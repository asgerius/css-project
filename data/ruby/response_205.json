[{"tags": ["ruby-on-rails", "ruby", "encryption", "openssl", "attr-encrypted"], "comments": [{"owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "edited": false, "score": 1, "creation_date": 1544655502, "post_id": 53752392, "comment_id": 94358147, "body": "Have you tried deleting the attribute via the database instead of ActiveRecord? There are two columns <code>encrypted_#{attr}</code> and <code>encrypted_#{attr}_iv</code>.  If you don&#39;t care about the old data I think clearing those would allow you to write to them again via AR."}, {"owner": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 1, "creation_date": 1544655733, "post_id": 53752392, "comment_id": 94358231, "body": "Yes, why don&#39;t you just make <code>User.update_all account_number: nil</code> on both attributes and then just create a rake task to update them again, if they are nil I think there will not be problems to update them."}, {"owner": {"reputation": 15501, "user_id": 664833, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/814bed2c4c2d0e69ec65a28a166c01b7?s=128&d=identicon&r=PG", "display_name": "user664833", "link": "https://stackoverflow.com/users/664833/user664833"}, "edited": false, "score": 1, "creation_date": 1544657563, "post_id": 53752392, "comment_id": 94358798, "body": "Thanks a lot! These are great comments, and they helped me figure this out. My model actually has more than one encrypted field (not just <code>account_number</code>, but others too - I just didn&#39;t mention them so as to keep things brief). I had already tried clearing the <code>account_number</code> and only overwriting it; but it wasn&#39;t until I cleared all encrypted fields (with <code>update_all</code>) that I was able to overwrite the old data and save it (perhaps due to validation errors that I wasn&#39;t seeing for some reason - presently not sure... I will look into this some more.)"}], "owner": {"reputation": 15501, "user_id": 664833, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/814bed2c4c2d0e69ec65a28a166c01b7?s=128&d=identicon&r=PG", "display_name": "user664833", "link": "https://stackoverflow.com/users/664833/user664833"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 453, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1586854800, "creation_date": 1544653932, "question_id": 53752392, "link": "https://stackoverflow.com/questions/53752392/how-to-encrypt-new-data-with-new-key-using-attr-encrypted-over-old-data", "title": "How to encrypt new data with new key using attr_encrypted (over old data)?", "body": "<p>I am using <a href=\"https://github.com/attr-encrypted/attr_encrypted\" rel=\"nofollow noreferrer\"><code>attr_encrypted</code></a>, and have some data encrypted with a key that I no longer have access to. I would like to overwrite the existing/old data with new data, using a new key. How can I do this?</p>\n\n<p>For example, consider this:</p>\n\n<pre><code>class User\n    attr_encrypted :account_number,  key: ENV['ATTR_ENCRYPTED_KEY'] # new key\nend\n</code></pre>\n\n<p>The following attempt fails with <code>OpenSSL::Cipher::CipherError</code></p>\n\n<pre><code>u = User.first\nu.account_number = '123456789' # error here!\nu.save \n</code></pre>\n\n<p>Based on the stack trace (below), I believe it is due to the fact that <code>attr_encrypted</code> tries to <code>decrypt</code> first - which clearly won't work due to the fact that the key is different. Is there a way to circumvent that, and just write the new data and <code>iv</code>, with a new key?</p>\n\n<pre><code>.../gems/encryptor-3.0.0/lib/encryptor.rb:98:in `final'\n.../gems/encryptor-3.0.0/lib/encryptor.rb:98:in `crypt'\n.../gems/encryptor-3.0.0/lib/encryptor.rb:49:in `decrypt'\n.../bundler/gems/attr_encrypted-399c5dd168ca/lib/attr_encrypted.rb:246:in `decrypt'\n.../bundler/gems/attr_encrypted-399c5dd168ca/lib/attr_encrypted.rb:335:in `decrypt'\n.../bundler/gems/attr_encrypted-399c5dd168ca/lib/attr_encrypted.rb:164:in `block (2 levels) in attr_encrypted'\n.../bundler/gems/attr_encrypted-399c5dd168ca/lib/attr_encrypted/adapters/active_record.rb:76:in `block in attr_encrypted'\n</code></pre>\n"}, {"tags": ["ruby", "sorting", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 20644, "user_id": 184184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f6a508697f9eca2680b12ddb85ba1319?s=128&d=identicon&r=PG", "display_name": "Lenin Raj Rajasekaran", "link": "https://stackoverflow.com/users/184184/lenin-raj-rajasekaran"}, "is_accepted": true, "score": 2, "last_activity_date": 1544649888, "creation_date": 1544649888, "answer_id": 53751591, "question_id": 53751216, "link": "https://stackoverflow.com/questions/53751216/sort-rails-model-attribute-by-method/53751591#53751591", "title": "Sort Rails Model Attribute by Method", "body": "<p>It is currently sorted based on the string values <code>text-danger</code>, <code>text-success</code> and <code>text-warning</code>. To sort it the way you want, try sorting it based on numeric values:</p>\n\n<pre><code>sort_by do |item| \n  case item.get_quantity_text_class\n     when 'text-danger'\n       0\n     when 'text-warning'\n       1\n     else\n       2\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 628, "user_id": 4643970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AwK4h.jpg?s=128&g=1", "display_name": "Mahmoud Sayed", "link": "https://stackoverflow.com/users/4643970/mahmoud-sayed"}, "is_accepted": false, "score": 0, "last_activity_date": 1544650096, "creation_date": 1544650096, "answer_id": 53751631, "question_id": 53751216, "link": "https://stackoverflow.com/questions/53751216/sort-rails-model-attribute-by-method/53751631#53751631", "title": "Sort Rails Model Attribute by Method", "body": "<p>you can define your comparator inside Item</p>\n\n<pre><code>class Item\n  def &lt;=&gt;(another_item)\n    txt_class   = self.get_quantity_text_class\n    o_txt_class = another_item.get_quantity_text_class \n\n    if txt_class == o_txt_class\n      # put your logic here for items with identical classes.\n      # for example: \n      self.quantity_on_hand &lt;=&gt; another_item.quantity_on_hand\n    end\n\n    text_classes = ['text-danger', 'text-warning', 'text-success']\n\n    txt_class_idx   = text_classes.find_index { |e| e == txt_class }\n    o_txt_class_idx = text_classes.find_index { |e| e == o_txt_class }\n\n    txt_class_idx &lt;=&gt; o_txt_class_idx\n  end\nend\n</code></pre>\n\n<p>then call <code>items.sort</code></p>\n"}], "owner": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 53751591, "answer_count": 2, "score": 0, "last_activity_date": 1544654506, "creation_date": 1544648187, "question_id": 53751216, "link": "https://stackoverflow.com/questions/53751216/sort-rails-model-attribute-by-method", "title": "Sort Rails Model Attribute by Method", "body": "<p>I have a model that uses a method to display an attribute on a view. I've managed to get them sorted, but they are not sorting the way I need them to be sorted. </p>\n\n<p><a href=\"https://i.stack.imgur.com/jN6nl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jN6nl.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have the red quantities at the top, which I want, but I need the green and yellow quantities reversed. The order should be red, yellow then green.</p>\n\n<p>Here is the method that adds the colors the column:</p>\n\n<pre><code>def get_quantity_text_class\n  case\n  when quantity_on_hand &gt; reorder_quantity then 'text-success'\n  when quantity_on_hand &gt; p_level then 'text-warning'\n  else 'text-danger'\n  end\nend\n</code></pre>\n\n<p>And here is the method that creates the column:</p>\n\n<pre><code>def quantity_on_hand\n  ppkb.sum(:quantity)\nend\n</code></pre>\n\n<p>Here is the sort algorithm I'm using:</p>\n\n<pre><code>sort_by{ |item| item.get_quantity_text_class }\n</code></pre>\n\n<p>I feel like I'm so close, but I just can't figure out how to reverse the green and yellow numbers.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 388, "user_id": 6181153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4adaccdd999ad2cf2b7bc72f66d1490a?s=128&d=identicon&r=PG&f=1", "display_name": "Jay Mason", "link": "https://stackoverflow.com/users/6181153/jay-mason"}, "edited": false, "score": 3, "creation_date": 1544647283, "post_id": 53750983, "comment_id": 94354727, "body": "This has already been answered <a href=\"https://stackoverflow.com/questions/32542300/how-to-output-trailing-zero-in-ruby\" title=\"how to output trailing zero in ruby\">stackoverflow.com/questions/32542300/&hellip;</a>"}, {"owner": {"reputation": 3047, "user_id": 10388629, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/My8T3.png?s=128&g=1", "display_name": "Pika the Master of the Whales", "link": "https://stackoverflow.com/users/10388629/pika-the-master-of-the-whales"}, "edited": false, "score": 4, "creation_date": 1544647288, "post_id": 53750983, "comment_id": 94354729, "body": "uh, 10.50 is the same as 10.5?"}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 3, "creation_date": 1544647687, "post_id": 53750983, "comment_id": 94354913, "body": "What&#39;s the difference between <code>10.50</code> and <code>10.5</code>? That&#39;s right, there is no difference! It&#39;s just the same value written in two ways."}, {"owner": {"reputation": 13, "user_id": 10495816, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nm54X.jpg?s=128&g=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/10495816/jon"}, "edited": false, "score": 0, "creation_date": 1544648208, "post_id": 53750983, "comment_id": 94355118, "body": "I see that but I&#39;m trying to match the expected_value exactly. So I want my output to be 10.50 and not 10.5."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1544658960, "post_id": 53750983, "comment_id": 94359167, "body": "Floating point numbers can often mismatch a tiny bit which is why test frameworks often have a <code>assert_approx_equal</code> type method to handle the slight differences. You may get <code>10.4999999999999361</code> as the result of a calculation, but really that&#39;s <code>10.50</code> rounded to two places. Does <code>.round(2)</code> do the job well enough for your case? Internally there is no <code>10.50</code>, it&#39;s stored instead much more like <code>1.050000000... * 10^1</code> typically using the <a href=\"https://en.wikipedia.org/wiki/IEEE_754\" rel=\"nofollow noreferrer\">IEEE floating-point format</a>."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1544656444, "post_id": 53752774, "comment_id": 94358457, "body": "<code>&#39;%.02f&#39; % number</code> perhaps?"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1544682239, "post_id": 53752774, "comment_id": 94364505, "body": "@tadman, precisely! If you want to post your answer, I&#39;m going to delete mine."}, {"owner": {"reputation": 13, "user_id": 10495816, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nm54X.jpg?s=128&g=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/10495816/jon"}, "edited": false, "score": 2, "creation_date": 1544715899, "post_id": 53752774, "comment_id": 94382777, "body": "Thank you all!! I learned the &#39;%.2f&#39; % #number works perfectly. Not only that, a great &quot;a-ha&quot; moment in programming for me. Thanks again!"}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1544656127, "creation_date": 1544656127, "answer_id": 53752774, "question_id": 53750983, "link": "https://stackoverflow.com/questions/53750983/ruby-reads-50-as-5/53752774#53752774", "title": "Ruby reads .50 as .5", "body": "<p>Maybe you can define your custom method to format the number as string with two decimals:</p>\n\n<pre><code>def two_decimals(number)\n  number = Float(number)\n  price_split = number.to_s.split('.')\n  price_split[1] = price_split.last + '0'*(2-price_split.last.size) if price_split.last.size &lt; 2\n  price_split.join('.')\nend\n\ntwo_decimals(10.25) #=&gt; \"10.25\"\ntwo_decimals(10.2) #=&gt; \"10.20\"\ntwo_decimals(10) #=&gt; \"10.00\"\n</code></pre>\n\n<p>Or something better...</p>\n"}, {"tags": [], "owner": {"reputation": 896, "user_id": 4351693, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/l7TpX.jpg?s=128&g=1", "display_name": "David J. Davis", "link": "https://stackoverflow.com/users/4351693/david-j-davis"}, "is_accepted": false, "score": 1, "last_activity_date": 1544704896, "last_edit_date": 1544704896, "creation_date": 1544666234, "answer_id": 53753996, "question_id": 53750983, "link": "https://stackoverflow.com/questions/53750983/ruby-reads-50-as-5/53753996#53753996", "title": "Ruby reads .50 as .5", "body": "<p>The answer is in the <a href=\"http://ruby-doc.org/core-2.5.0/String.html#method-i-25\" rel=\"nofollow noreferrer\">string format operator</a> which allows you to coerce the float into a string with 2 decimal places.  This method will also work to do the rounding of 3 digit numbers, I didn't try it any further, but I'm fairly certain it will work. Here is your original code modified to showcase exactly how it would work.  </p>\n\n<pre><code>class Item\n  attr_reader :name, :description, :manufacturer, :price, :summary \n\n  def initialize (name, manufacturer, price, description=nil, summary=nil) \n    @name = name\n    @manufacturer = manufacturer\n    @price = \"%.2f\" % price\n    @description = description\n\n    if description\n      @summary = \"Name: #{name}\n                  Description: #{description}\n                  Manufacturer: #{manufacturer}\n                  Price: $#{@price}\"\n    else\n      @summary = \"Name: #{name}\n                  Manufacturer: #{manufacturer}\n                  Price: $#{@price}\"\n    end\n  end\n\n  def price\n     @price\n  end\nend\n</code></pre>\n\n<p><strong>EDIT:</strong> I didn't see @tadman's comment until after posting this, he beat me to the answer.      </p>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1544720142, "creation_date": 1544720142, "answer_id": 53766652, "question_id": 53750983, "link": "https://stackoverflow.com/questions/53750983/ruby-reads-50-as-5/53766652#53766652", "title": "Ruby reads .50 as .5", "body": "<p>The usual way of formatting numbers is:</p>\n\n<pre><code>'%.02f' % number\n</code></pre>\n\n<p>Where that is the <a href=\"https://ruby-doc.org/core-2.5.3/Kernel.html#method-i-sprintf\" rel=\"nofollow noreferrer\"><code>printf</code>-style</a> notation for describing how you want something formatted. This is inherited from C and shows up in a lot of other languages:</p>\n\n<pre><code>'%f' % number    # A floating-point number with default precision\n'%.02f' % number # A floating-point number rounded to 2 places\n</code></pre>\n\n<p>Within Rails you also have helper methods like <a href=\"https://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_with_precision\" rel=\"nofollow noreferrer\"><code>number_with_precision</code></a> which can handle localization cases where the decimal separator is not a dot:</p>\n\n<pre><code>number_with_precision(number, precision: 2, locale: :fr)\n# =&gt; 1,50\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10495816, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nm54X.jpg?s=128&g=1", "display_name": "Jon", "link": "https://stackoverflow.com/users/10495816/jon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "answer_count": 3, "score": -3, "last_activity_date": 1544720142, "creation_date": 1544647122, "last_edit_date": 1544697660, "question_id": 53750983, "link": "https://stackoverflow.com/questions/53750983/ruby-reads-50-as-5", "title": "Ruby reads .50 as .5", "body": "<p>I have an <code>Item</code> class, and I initialized five variables. I am trying to match the output in my terminal to the value of the <code>expected_summary</code>. I am calling <code>Item.summary</code> in the following code:</p>\n\n<pre><code>class Item\n  attr_reader :name, :description, :manufacturer, :price, :summary\n\n  def initialize (name, manufacturer, price, description=nil, summary=nil)\n    @name = name\n    @manufacturer = manufacturer\n    @price = price\n    @description = description\n    if description\n      @summary = \"Name: #{name}\nDescription: #{description}\nManufacturer: #{manufacturer}\nPrice: $#{price}\"\n    else\n      @summary = \"Name: #{name}\nManufacturer: #{manufacturer}\nPrice: $#{price}\"\n    end\n  end\nend\n\n#expected_summary = %q(Name: Spy Notebook\n#Manufacturer: Spys-R-Us\n#Price: $10.50)\nitem = Item.new(\"Spy Notebook\", \"Spys-R-Us\", 10.50)\nputs item.summary\n</code></pre>\n\n<p>When I pass a number <code>10.50</code> as the <code>price</code> argument, it returns as <code>10.5</code>. I cannot figure out why. Why does Ruby read <code>10.50</code> as <code>10.5</code>? Is there a way to correct this?</p>\n"}, {"tags": ["ruby", "file"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1544646592, "post_id": 53750258, "comment_id": 94354440, "body": "Do you have a question?"}, {"owner": {"reputation": 25, "user_id": 10777259, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6mWtXLs1Re8/AAAAAAAAAAI/AAAAAAAAAH8/xDTmffQYzYs/photo.jpg?sz=128", "display_name": "Akino", "link": "https://stackoverflow.com/users/10777259/akino"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1544648067, "post_id": 53750258, "comment_id": 94355062, "body": "....................yea. Actually, how to solve the problem if it wasn&#39;t obvious."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1544652757, "post_id": 53750258, "comment_id": 94357108, "body": "Can you please explain the problem and your question in clear, unambiguous language? <a href=\"https://stackoverflow.com/help/how-to-ask\">This article</a> and <a href=\"https://stackoverflow.com/help/mcve\">this article</a> may help you with formulating your question. You should also <a href=\"https://stackoverflow.com/tour\">take the tour</a>."}, {"owner": {"reputation": 13379, "user_id": 1033027, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b56ea1c43a4ecb1060ec8bcb8d2bce78?s=128&d=identicon&r=PG", "display_name": "Jules", "link": "https://stackoverflow.com/users/1033027/jules"}, "edited": false, "score": 2, "creation_date": 1544659235, "post_id": 53750258, "comment_id": 94359243, "body": "@Akino &quot;the problem&quot; <i>isn&#39;t</i> obvious. You&#39;re describing a behaviour that arises predictably from writing this code."}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1544673456, "post_id": 53750258, "comment_id": 94362223, "body": "The question is poorly worded. Also, running this (with a slight modification so the paths from the first file are shared to the second), everything works as expected so it&#39;s not clear what you&#39;re asking. If I had to take a shot in the dark I&#39;d go with &quot;path issue&quot; due to how you&#39;re escaping paths with `\\`. You might try using join for path concatenation <a href=\"https://ruby-doc.org/core-1.8.7/File.html#method-c-join\" rel=\"nofollow noreferrer\">ruby-doc.org/core-1.8.7/File.html#method-c-join</a>"}, {"owner": {"reputation": 25, "user_id": 10777259, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6mWtXLs1Re8/AAAAAAAAAAI/AAAAAAAAAH8/xDTmffQYzYs/photo.jpg?sz=128", "display_name": "Akino", "link": "https://stackoverflow.com/users/10777259/akino"}, "reply_to_user": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1544707611, "post_id": 53750258, "comment_id": 94377446, "body": "@JayDorsey It didn&#39;t work, uh, the problem is most likely related to &quot;unless File.exist?(EGGPATH)&quot;, since the script is behaving like that line wouldn&#39;t even exist, it&#39;s trying to create the same directory twice, which of course results in this error."}, {"owner": {"reputation": 25, "user_id": 10777259, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6mWtXLs1Re8/AAAAAAAAAAI/AAAAAAAAAH8/xDTmffQYzYs/photo.jpg?sz=128", "display_name": "Akino", "link": "https://stackoverflow.com/users/10777259/akino"}, "edited": false, "score": 0, "creation_date": 1544707640, "post_id": 53750258, "comment_id": 94377463, "body": "Sorry I didn&#39;t explain it like that in the first place, my bad."}], "answers": [{"tags": [], "owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "is_accepted": false, "score": 0, "last_activity_date": 1544829156, "creation_date": 1544829156, "answer_id": 53788051, "question_id": 53750258, "link": "https://stackoverflow.com/questions/53750258/ruby-1-8-1-errnoeexist-file-exists/53788051#53788051", "title": "Ruby (1.8.1) -- ERRNO::EEXIST File exists", "body": "<p>You're getting that error because the directory <code>MODAR</code> doesn't exist on your system. Something like below should fix it:</p>\n\n<pre><code>modar_path = File.join(SAVEPATH, 'MODAR')\n\nunless Dir.exists?(modar_path)\n  Dir.mkdir(modar_path)\nend\n</code></pre>\n\n<p>There's another command that might work:</p>\n\n<pre><code>require 'fileutils'\n# replace modar_path with the path you choose, or set it as I did above\nFileUtils.mkdir_p(modar_path)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25, "user_id": 10777259, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6mWtXLs1Re8/AAAAAAAAAAI/AAAAAAAAAH8/xDTmffQYzYs/photo.jpg?sz=128", "display_name": "Akino", "link": "https://stackoverflow.com/users/10777259/akino"}, "is_accepted": true, "score": 0, "last_activity_date": 1544871777, "creation_date": 1544871777, "answer_id": 53791745, "question_id": 53750258, "link": "https://stackoverflow.com/questions/53750258/ruby-1-8-1-errnoeexist-file-exists/53791745#53791745", "title": "Ruby (1.8.1) -- ERRNO::EEXIST File exists", "body": "<p>So, I found out that Ruby cannot stand checking the file names that have characters other than English alphabet in them. Shame. So that's the solution, I'll have to recreate the TXTLIST array to:\n<code>TXTLIST = [\"A\", \"b\", \"C\", \"D\", \"e\", \"F\", \"g\", \"H\", \"i\", \"J\", \"k\", \"L\", \"m\", \"N\", \"o\", \"P\", \"r\", \"S\", \"t\", \"U\", \"w\", \"y\", \"X\", \"z\", \"Q\", \"v\", \"a\", \"B\", \"c\", \"d\", \"E\", \"f\", \"G\", \"h\", \"I\", \"j\" \"K\", \"l\", \"M\", \"n\", \"O\", \"p\", \"R\", \"r\", \"S\", \"t\", \"U\", \"w\", \"Y\", \"x\", \"Z\", \"q\", \"V\"]</code> or something like that.</p>\n"}], "owner": {"reputation": 25, "user_id": 10777259, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6mWtXLs1Re8/AAAAAAAAAAI/AAAAAAAAAH8/xDTmffQYzYs/photo.jpg?sz=128", "display_name": "Akino", "link": "https://stackoverflow.com/users/10777259/akino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 1, "accepted_answer_id": 53791745, "answer_count": 2, "score": -1, "last_activity_date": 1544871777, "creation_date": 1544643668, "last_edit_date": 1544707239, "question_id": 53750258, "link": "https://stackoverflow.com/questions/53750258/ruby-1-8-1-errnoeexist-file-exists", "title": "Ruby (1.8.1) -- ERRNO::EEXIST File exists", "body": "<p>So I am working with Ruby, and...\nI have an error <code>ERRNO::EEXIST, Script 'text' line 2 ... File exists</code>\nThe error occurs if a directory it created (defined in EGGPATH) already exists, which should work in itself because of <code>unless File.exist?(EGGPATH)</code>\nWhile what I'm trying to do is:</p>\n\n<pre><code>def cyhm   #file text\n  Dir.mkdir(EGGPATH) unless File.exist?(EGGPATH)\n  File.open(EGGPATH + \"/CAN YOU HEAR ME.txt\", \"w+\") do |f|\n    f.write(\"text\")\n  end\nend\ndef cyhm_pt2\n  Dir.mkdir(EGGPATH) unless File.exist?(EGGPATH)\n  if File.exists?(EGGPATH + \"/CAN YOU HEAR ME.txt\") == false\n    cyhm\n  end\n  File.open(EGGPATH + \"/CAN YOU HEAR ME.txt\", \"a+\") do |f|\n    f.write(\"text2\")\n  end\nend\n</code></pre>\n\n<p>While EGGPATH is defined here, in the other file:</p>\n\n<pre><code>TXTLIST = [\"\u0104\", \"\u0105\", \"\u0106\", \"\u0107\", \"\u0118\", \"\u0119\", \"\u0141\", \"\u0142\", \"\u0143\", \"\u0144\", \"\u00d3\", \"\u00f3\", \"\u015a\", \n\"\u015b\", \"\u0179\", \"\u017a\", \"\u017b\", \"\u017c\"] #file randomtxt\nEGGPAT = TXTLIST[rand(TXTLIST.size)] + TXTLIST[rand(TXTLIST.size)] + \nTXTLIST[rand(TXTLIST.size)] + TXTLIST[rand(TXTLIST.size)] + \nTXTLIST[rand(TXTLIST.size)] + TXTLIST[rand(TXTLIST.size)] + \nTXTLIST[rand(TXTLIST.size)] + TXTLIST[rand(TXTLIST.size)] + \nTXTLIST[rand(TXTLIST.size)] + TXTLIST[rand(TXTLIST.size)] + \nTXTLIST[rand(TXTLIST.size)]\nif File.exists?(SAVEPATH + \"\\\\MODAR\\\\eseggdir.es\") == false\n  File.open(SAVEPATH + \"\\\\MODAR\\\\eseggdir.es\", \"w+\") do |f|\n    f.write(EGGPAT)\n  end\nend\nEGGPATH = File.read(SAVEPATH + \"\\\\MODAR\\\\eseggdir.es\")\n</code></pre>\n\n<p>Also, don't tell me to switch to a newer version of Ruby, cause I'm working with RPGXP, and I don't want to change it anytime soon...</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1544633957, "post_id": 53747393, "comment_id": 94348182, "body": "Try to avoid quoting variables for no reason. Here <code>&quot;#{client_id}&quot;</code> can be <code>client_id</code>. If you need to coerce that into a string for whatever reason <code>client_id.to_s</code> makes it clear what you&#39;re doing."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1544634030, "post_id": 53747603, "comment_id": 94348213, "body": "The <code>each_with_index</code> approach is faster especially if you capture <code>@clients.length</code> into a variable in advance."}, {"owner": {"reputation": 25, "user_id": 5864993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38704c922ae4c7202c38521d9aeedf07?s=128&d=identicon&r=PG&f=1", "display_name": "Ing.LuisC", "link": "https://stackoverflow.com/users/5864993/ing-luisc"}, "edited": false, "score": 0, "creation_date": 1544662166, "post_id": 53747603, "comment_id": 94359871, "body": "@jvillian, thanks a lot my friend, this worked with no problems"}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 4, "last_activity_date": 1544634567, "last_edit_date": 1544634567, "creation_date": 1544632948, "answer_id": 53747603, "question_id": 53747393, "link": "https://stackoverflow.com/questions/53747393/last-element-of-the-hash/53747603#53747603", "title": "last element of the hash", "body": "<p>You can try:</p>\n\n<pre><code>@clients.each do |(c, client_id)|\n  draw_text \"#{client_id}\", :at =&gt; [0,22], :size =&gt; 5, :style =&gt; :bold\n  start_new_page unless client_id == @clients.values.last\nend\n</code></pre>\n\n<p>You could also try:</p>\n\n<pre><code>@clients.each_with_index do |(c, client_id), i|\n  draw_text \"#{client_id}\", :at =&gt; [0,22], :size =&gt; 5, :style =&gt; :bold\n  start_new_page unless i == @clients.length - 1\nend\n</code></pre>\n\n<p>As Tadman suggests, you could also speed this up by doing:</p>\n\n<pre><code>def client\n  @clients_length = @clients.length - 1\n  @clients.each_with_index do |(c, client_id), i|\n    draw_text \"#{client_id}\", :at =&gt; [0,22], :size =&gt; 5, :style =&gt; :bold\n    start_new_page unless i == @clients_length\n  end\nend\n</code></pre>\n\n<p>Your original code:</p>\n\n<pre><code>def client\n  @client.each do |(c,client_id)|\n    draw_text \"#{client_id}\", :at =&gt; [0,22], :size =&gt; 5, :style =&gt; :bold\n    start_new_page unless client_id == @client.map{|e|[e.c, e.client_id]}.client_id.last\n  end\nend\n</code></pre>\n\n<p>Seems banged up, minimally, because: </p>\n\n<ul>\n<li>You're using <code>map</code> on every iteration, which seems wasteful.</li>\n<li>In <code>@client.map{|e|[e.c, e.client_id]}</code>, <code>.c</code> and <code>.client_id</code> aren't methods on <code>Array</code>.</li>\n<li><code>.client_id</code> isn't a method on <code>Array</code>.</li>\n<li>Probably other stuff.</li>\n</ul>\n\n<p>BTW, last two <code>keys</code> and <code>values</code> in your <code>list</code> are identical. I don't know if that's an error. But, if that's what you intend, then you may have other problems.</p>\n\n<p>Also BTW, the title of your question says 'last element of the array', but you're working with a <code>hash</code>, not an <code>array</code>.</p>\n"}], "owner": {"reputation": 25, "user_id": 5864993, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38704c922ae4c7202c38521d9aeedf07?s=128&d=identicon&r=PG&f=1", "display_name": "Ing.LuisC", "link": "https://stackoverflow.com/users/5864993/ing-luisc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 253, "favorite_count": 0, "accepted_answer_id": 53747603, "answer_count": 1, "score": 0, "last_activity_date": 1544662039, "creation_date": 1544632285, "last_edit_date": 1544662039, "question_id": 53747393, "link": "https://stackoverflow.com/questions/53747393/last-element-of-the-hash", "title": "last element of the hash", "body": "<p>I am sending several parameters for the printing of tickets in pdf</p>\n\n<pre><code>  Parameters: {\"utf8\"=&gt;\"\u2713\", \"list\"=&gt;{\"client_0801541\"=&gt;\"0801541\", \"client_0801554\"=&gt;\"0801554\", \"client_0801554\"=&gt;\"0801554\"}, \"subaction\"=&gt;\"print selected clients\"}\n</code></pre>\n\n<p>I need to print each client on a different page, for this I use a start_new_page at the end of showing the client's code, but in that way after the last client leaves a blank page. How could I make it so that for each client it verifies if it is the last one of the array? I have tried the following:</p>\n\n<pre><code>  def client\n    @client.each do |(c,client_id)|\n      draw_text \"#{client_id}\", :at =&gt; [0,22], :size =&gt; 5, :style =&gt; :bold\n      start_new_page unless client_id == @client.map{|e|[e.c, e.client_id]}.client_id.last\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "ruby-on-rails-5", "wicked-pdf"], "answers": [{"comments": [{"owner": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "edited": false, "score": 1, "creation_date": 1603378906, "post_id": 54187005, "comment_id": 114024395, "body": "Well done! This is really interesting and similar to the solution we came up with. Yours might be more robust, though. We have a PR with wicked_pdf to add a helper for encoding base64 image data from image URLs. Check it out here and feel free to comment and contribute: <a href=\"https://github.com/mileszs/wicked_pdf/pull/947\" rel=\"nofollow noreferrer\">github.com/mileszs/wicked_pdf/pull/947</a>"}], "tags": [], "owner": {"reputation": 480, "user_id": 1121826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IBVOi.jpg?s=128&g=1", "display_name": "John Athayde", "link": "https://stackoverflow.com/users/1121826/john-athayde"}, "is_accepted": false, "score": 1, "last_activity_date": 1547489612, "creation_date": 1547489612, "answer_id": 54187005, "question_id": 53747204, "link": "https://stackoverflow.com/questions/53747204/wickedpdf-not-displaying-remote-images-from-s3-in-production/54187005#54187005", "title": "WickedPdf Not Displaying Remote Images from S3 in Production", "body": "<p>So I had to use a different function and made a helper out of it. The <code>embed_remote_image</code> method is probably the most interesting to you and how I used it in my larger helper (which determines if it's the front or back image of an item, and if missing shows the custom missing image). </p>\n\n<pre><code>  # PDF image include - dont' need link logic, needed for https images\n  # per https://github.com/mileszs/wicked_pdf/issues/36#issuecomment-91027880\n  require 'open-uri'\n  def embed_remote_image(url, content_type)\n    asset = open(url, \"r:UTF-8\") { |f| f.read }\n    base64 = Base64.encode64(asset.to_s).gsub(/\\s+/, \"\")\n    \"data:#{content_type};base64,#{Rack::Utils.escape(base64)}\"\n  end\n\n  def issue_image_pdf_display(issue, graphic, size, sizeinpx, issuer = nil, nolink = false, chapter_issue = false)\n    if !graphic.blank?\n      if graphic == issue.imageback\n        image_tag(embed_remote_image(issue.imageback_url(size), 'image/png'))\n      else\n        image_tag(embed_remote_image(issue.image_url(size), 'image/png'))\n      end\n    else\n      missing_image_display(issue, size, sizeinpx)\n    end\n  end\n</code></pre>\n\n<p>You also need the buildpack. <a href=\"https://github.com/dscout/wkhtmltopdf-buildpack.git\" rel=\"nofollow noreferrer\">https://github.com/dscout/wkhtmltopdf-buildpack.git</a></p>\n"}], "owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 511, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1547489612, "creation_date": 1544631578, "question_id": 53747204, "link": "https://stackoverflow.com/questions/53747204/wickedpdf-not-displaying-remote-images-from-s3-in-production", "title": "WickedPdf Not Displaying Remote Images from S3 in Production", "body": "<p>First of all, everything works just fine in my dev environment and worked fine in production until I updated my Rails app to Rails 5.2.2 and Ruby to 2.5.3 (both were only a couple of minor versions off). I updated a number of other gems but neither the wicked pdf or wkhtmltopdf-binary were updated. I'm unsure about their dependencies. On production (using Heroku) <code>wicked_pdf</code> is not rendering images from outside of my domain.</p>\n\n<p>Here are the gems I am using:</p>\n\n<pre><code>gem 'wicked_pdf' #version 1.1.0\ngem 'wkhtmltopdf-binary' #version 0.12.4\n</code></pre>\n\n<p>The following code works in development but not in production:</p>\n\n<pre><code>&lt;%= image_tag @invoice.job.customer.account.logo.url, width: 220 %&gt;\n&lt;%= image_tag @invoice.job.customer.account.logo_url, width: 220 %&gt;\n&lt;%= wicked_pdf_image_tag @invoice.job.customer.account.logo_url, width: 220 %&gt;\n&lt;img  src=\"&lt;%= @invoice.job.customer.account.logo_url %&gt;\" width=\"220\"&gt;\n</code></pre>\n\n<p>Displaying a local image works on production:</p>\n\n<pre><code> &lt;%= image_tag \"logo.png\" width: 220 %&gt;\n</code></pre>\n\n<p>I assume this has something to do with Heroku because I've read about problems with wkhtmltopdf-binary and Heroku but have had no luck from the attempts I've made.</p>\n"}, {"tags": ["ruby", "chef-infra", "inspec"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1544631617, "post_id": 53747071, "comment_id": 94346889, "body": "Doesn&#39;t an interpolation like <code>&quot;https&#47;&#47;#{DNScloudui[&#39;value&#39;]}&quot;</code> work?"}, {"owner": {"reputation": 83, "user_id": 7658550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfc3766b70a0917f19d47903b9c5d500?s=128&d=identicon&r=PG&f=1", "display_name": "uwieuwe4", "link": "https://stackoverflow.com/users/7658550/uwieuwe4"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1544632546, "post_id": 53747071, "comment_id": 94347404, "body": "nope (unterminated regexp meets end of file (SyntaxError))"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 2, "creation_date": 1544634991, "post_id": 53747071, "comment_id": 94348677, "body": "What&#39;s the value of <code>DNScloudui</code>?"}, {"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1544639225, "post_id": 53747071, "comment_id": 94350949, "body": "Alternatively <code>DNScloudui = &quot;https:&#47;&#47;#{attribute(&#39;DNS_name_cloudui&#39;)}&quot;</code>, and if that does not work then the above comment is definitely relevant."}, {"owner": {"reputation": 83, "user_id": 7658550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfc3766b70a0917f19d47903b9c5d500?s=128&d=identicon&r=PG&f=1", "display_name": "uwieuwe4", "link": "https://stackoverflow.com/users/7658550/uwieuwe4"}, "edited": false, "score": 0, "creation_date": 1545038326, "post_id": 53747071, "comment_id": 94472476, "body": "the value of DNScloudui is something of this form: &quot;foo.bar.foo-bar.com&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 6316, "user_id": 1184717, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7f8710cd5754a79df5dc5cd3d5308da2?s=128&d=identicon&r=PG", "display_name": "Mr.", "link": "https://stackoverflow.com/users/1184717/mr"}, "is_accepted": true, "score": 1, "last_activity_date": 1544687097, "creation_date": 1544687097, "answer_id": 53757153, "question_id": 53747071, "link": "https://stackoverflow.com/questions/53747071/ho-to-use-string-concatenation-in-an-http-block-in-inspec/53757153#53757153", "title": "Ho to use string concatenation in an http-block in Inspec?", "body": "<p>assuming that <code>DNScloudui</code> returns you a non-nil value, then you can use string interpolation to get the value of the <code>DNScloudui</code> variable. for instance:</p>\n\n<pre><code>DNScloudui = attribute('DNS_name_cloudui')\n\ncontrol 'Website reachability' do\n  title 'Check reachability by GET requests'\n  describe http(\"https://#{DNScloudui['value']}\", method: 'GET') do\n    its('status') { should cmp 200 }\n  end\nend\n</code></pre>\n\n<p>also, looking at the name of your <code>DNScloudui</code> variable, i would suggest to stick to <a href=\"https://github.com/rubocop-hq/ruby-style-guide\" rel=\"nofollow noreferrer\">ruby naming conventions and style guides</a></p>\n"}], "owner": {"reputation": 83, "user_id": 7658550, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfc3766b70a0917f19d47903b9c5d500?s=128&d=identicon&r=PG&f=1", "display_name": "uwieuwe4", "link": "https://stackoverflow.com/users/7658550/uwieuwe4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "accepted_answer_id": 53757153, "answer_count": 1, "score": 0, "last_activity_date": 1544687097, "creation_date": 1544631155, "last_edit_date": 1544661449, "question_id": 53747071, "link": "https://stackoverflow.com/questions/53747071/ho-to-use-string-concatenation-in-an-http-block-in-inspec", "title": "Ho to use string concatenation in an http-block in Inspec?", "body": "<p>I've got an Inspec-control containing a http-block. The URL is saved in a variable called <code>DNScloudui['value']</code> - I want to add <code>https://</code> to the beginning of the URL. </p>\n\n<pre><code>DNScloudui = attribute('DNS_name_cloudui')\n\ncontrol 'Website reachability' do\n  title 'Check reachability by GET requests'\n  describe http(DNScloudui['value'], method: 'GET') do\n    its('status') { should cmp 200 }\n  end\nend\n</code></pre>\n\n<p>How can I achieve that?</p>\n"}, {"tags": ["ruby", "postgresql", "ssl"], "answers": [{"comments": [{"owner": {"reputation": 2062, "user_id": 1772673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89b6a300aac526ffe07c53c049dde773?s=128&d=identicon&r=PG", "display_name": "Josh Kupershmidt", "link": "https://stackoverflow.com/users/1772673/josh-kupershmidt"}, "edited": false, "score": 0, "creation_date": 1544718961, "post_id": 53752813, "comment_id": 94384554, "body": "Wow - it is really as difficult as I feared. Thanks a lot for this answer, I&#39;ll accept if nobody has a clever ruby-level solution."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "reply_to_user": {"reputation": 2062, "user_id": 1772673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89b6a300aac526ffe07c53c049dde773?s=128&d=identicon&r=PG", "display_name": "Josh Kupershmidt", "link": "https://stackoverflow.com/users/1772673/josh-kupershmidt"}, "edited": false, "score": 0, "creation_date": 1544732612, "post_id": 53752813, "comment_id": 94390877, "body": "The only Ruby-level option I found was <a href=\"https://github.com/ged/ruby-pg/blob/b6fd35539298a7f0307e71937a654d97fa44e6ba/ext/pg_connection.c#L3356-L3390\" rel=\"nofollow noreferrer\"><code>PG::Connection.new.ssl_attribute()</code></a> but this only functions on an established connection, and in your described scenario the connection cannot be established, ergo this method call would not work."}], "tags": [], "owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "is_accepted": true, "score": 1, "last_activity_date": 1544656368, "creation_date": 1544656368, "answer_id": 53752813, "question_id": 53746821, "link": "https://stackoverflow.com/questions/53746821/runtime-detection-of-ssl-support-in-the-pg-gem/53752813#53752813", "title": "Runtime detection of SSL support in the pg gem", "body": "<p>First, make sure Ruby is compiled with OpenSSL support:</p>\n\n<pre><code>ruby -r rbconfig -e 'puts RbConfig::CONFIG[\"configure_args\"]'\n'--prefix=/Users/foo/.rvm/rubies/ruby-2.6.0-preview2' '' '--with-opt-dir=/usr/local/opt/libyaml:/usr/local/opt/readline:/usr/local/opt/libksba:/usr/local/opt/openssl@1.1' '--disable-install-doc' '--enable-shared' 'build_alias=' 'host_alias=' 'target_alias=' 'CC=gcc'\n</code></pre>\n\n<p>Make sure <code>openssl</code> is somewhere in the <code>--with-opt-dir</code> output. Alternatively, you can check with this:</p>\n\n<pre><code>ruby -r openssl -e 'puts OpenSSL::OPENSSL_LIBRARY_VERSION'\nOpenSSL 1.1.1  11 Sep 2018\n</code></pre>\n\n<p>Next, locate your <code>pg_ext.bundle</code>. The location of this will vary depending on how you install Ruby and gems, but if you're using RVM it's fairly straightforward to locate in <code>~/.rvm/gems</code>. For example, it is located here for me:</p>\n\n<pre><code>~/.rvm/gems/ruby-2.6.0-preview2/gems/pg-1.1.3/ext/pg_ext.bundle\n</code></pre>\n\n<p>Now run <code>otool -L</code> to find the libraries it is linked against:</p>\n\n<pre><code>otool -L /Users/foo/.rvm/gems/ruby-2.6.0-preview2/gems/pg-1.1.3/ext/pg_ext.bundle\n  /Users/foo/.rvm/gems/ruby-2.6.0-preview2/gems/pg-1.1.3/ext/pg_ext.bundle:\n  /Users/foo/.rvm/rubies/ruby-2.6.0-preview2/lib/libruby.2.6.dylib (compatibility version 2.6.0, current version 2.6.0)\n  /usr/local/opt/postgresql/lib/libpq.5.dylib (compatibility version 5.0.0, current version 5.11.0)\n  /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1252.200.5)\n</code></pre>\n\n<p>Now run <code>otool -L</code> against the <code>libpq</code> dylib listed in the above output to see what it's linked against:</p>\n\n<pre><code>otool -L /usr/local/opt/postgresql/lib/libpq.5.dylib\n  /usr/local/opt/postgresql/lib/libpq.5.dylib:\n  /usr/local/opt/postgresql/lib/libpq.5.dylib (compatibility version 5.0.0, current version 5.11.0)\n  /usr/local/opt/openssl/lib/libssl.1.0.0.dylib (compatibility version 1.0.0, current version 1.0.0)\n  /usr/local/opt/openssl/lib/libcrypto.1.0.0.dylib (compatibility version 1.0.0, current version 1.0.0)\n  /System/Library/Frameworks/Kerberos.framework/Versions/A/Kerberos (compatibility version 5.0.0, current version 6.0.0)\n  /System/Library/Frameworks/LDAP.framework/Versions/A/LDAP (compatibility version 1.0.0, current version 2.4.0)\n  /usr/lib/libSystem.B.dylib (compatibility version 1.0.0, current version 1252.200.5)\n</code></pre>\n\n<p>As long as it's linked against <code>libssl</code> and <code>libcrypto</code>, the installed <code>pg</code> gem should support OpenSSL as well.</p>\n"}], "owner": {"reputation": 2062, "user_id": 1772673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89b6a300aac526ffe07c53c049dde773?s=128&d=identicon&r=PG", "display_name": "Josh Kupershmidt", "link": "https://stackoverflow.com/users/1772673/josh-kupershmidt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "accepted_answer_id": 53752813, "answer_count": 1, "score": 1, "last_activity_date": 1544656368, "creation_date": 1544630351, "question_id": 53746821, "link": "https://stackoverflow.com/questions/53746821/runtime-detection-of-ssl-support-in-the-pg-gem", "title": "Runtime detection of SSL support in the pg gem", "body": "<p>We have some Ruby code which does something like:</p>\n\n<pre><code>require 'pg'\n\n# Create a remote Postgres database instance, and wait\n# until it's online, then try to connect:\nconn = PG::Connection.new(\n    ... params ...\n    sslmode: 'require')\n</code></pre>\n\n<p>The important part is that the remote Postgres instance is configured such that SSL usage is mandatory (e.g. <a href=\"https://dba.stackexchange.com/questions/8580/force-postgresql-clients-to-use-ssl\">like this</a>) -- the <code>sslmode: 'require'</code> in the client code is redundant.</p>\n\n<p>This works fine on many developer machines, but some developers are noticing that they get some error like:</p>\n\n<pre><code> FATAL:  no pg_hba.conf entry for host \"...\", user \"...\", database \"...\", SSL off (PG::ConnectionBad)\n</code></pre>\n\n<p>and the root cause seems to be that their <code>pg</code> gem does not actually have SSL support.</p>\n\n<p><strong>My question: is there any way to determine if the <code>pg</code> gem does in fact have SSL support, without actually trying to connect to a server requiring SSL</strong>? (It would be much better if we could detect the problem right away, instead of waiting until a remote Postgres instance has been created, and only then discovering the problem.)</p>\n\n<p>My first thought was to check a method on the <code>pg</code> gem such as <a href=\"https://www.rubydoc.info/gems/pg/PG.init_openssl\" rel=\"nofollow noreferrer\">init_openssl</a>, but the documentation claims:</p>\n\n<blockquote>\n  <p>When SSL support is not compiled in, this function is present but does nothing.</p>\n</blockquote>\n\n<p>and this behavior appears to be the same whether SSL support is present or not:</p>\n\n<pre><code>2.3.1 :002 &gt; PG.init_openssl(true, true)\n =&gt; nil \n</code></pre>\n\n<p>Environment info: ruby 2.3 on recent OS X, <code>pg</code> gem 0.19.0, various versions of <code>libpq</code></p>\n"}, {"tags": ["java", "ruby", "regex"], "comments": [{"owner": {"reputation": 80378, "user_id": 637853, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/72baa38005eb8de126b2dd2e6fa1d660?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/637853/thomas"}, "edited": false, "score": 2, "creation_date": 1544630320, "post_id": 53746744, "comment_id": 94346125, "body": "If <code>ip_address</code> is a <code>String</code> then I&#39;m pretty sure there is an equivalent. I&#39;m no ruby expert so I&#39;d have to guess: what is that meant to do? And what did you try so far?"}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 10781687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d177c1bad366f6d526bae5ab1099c44?s=128&d=identicon&r=PG&f=1", "display_name": "Robear Selwans", "link": "https://stackoverflow.com/users/10781687/robear-selwans"}, "is_accepted": false, "score": 2, "last_activity_date": 1544630390, "creation_date": 1544630390, "answer_id": 53746841, "question_id": 53746744, "link": "https://stackoverflow.com/questions/53746744/conversion-regex-ruby-to-java/53746841#53746841", "title": "Conversion regex ruby to java", "body": "<p><code>ip_address.replaceFirst(\"regex\", \"replacement\");</code></p>\n\n<p>This is the Java equivalent of Ruby's <code>sub()</code>. If you want something like <code>gsub()</code>, this other function can be used:</p>\n\n<p><code>ip_address.replaceAll(\"regex\", \"replacement\");</code></p>\n"}, {"tags": [], "owner": {"reputation": 38670, "user_id": 870248, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/862c89e44433fc911c4af648dbd1c9d0?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Vargas", "link": "https://stackoverflow.com/users/870248/paul-vargas"}, "is_accepted": false, "score": 1, "last_activity_date": 1544630426, "creation_date": 1544630426, "answer_id": 53746860, "question_id": 53746744, "link": "https://stackoverflow.com/questions/53746744/conversion-regex-ruby-to-java/53746860#53746860", "title": "Conversion regex ruby to java", "body": "<p>You can try the following regular expression:</p>\n\n<pre><code>/\\d+\n</code></pre>\n\n<p>i.e.:</p>\n\n<pre><code>ipAddress.replaceAll(\"/\\\\d+\", \"\")\n</code></pre>\n"}], "owner": {"reputation": 3726, "user_id": 1095362, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/a935299844c31ef1eb01a4e7e028bb2e?s=128&d=identicon&r=PG", "display_name": "robert trudel", "link": "https://stackoverflow.com/users/1095362/robert-trudel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "closed_date": 1544636036, "answer_count": 2, "score": 0, "last_activity_date": 1544630426, "creation_date": 1544630071, "question_id": 53746744, "link": "https://stackoverflow.com/questions/53746744/conversion-regex-ruby-to-java", "closed_reason": "Duplicate", "title": "Conversion regex ruby to java", "body": "<p>In ruby I have this</p>\n\n<pre><code>ip_address.sub(/\\/\\d+/,'')\n</code></pre>\n\n<p>Is there any equivalent in java?</p>\n"}, {"tags": ["ruby", "jwt", "criteo"], "answers": [{"comments": [{"owner": {"reputation": 1176, "user_id": 951321, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9eb886c753c17c33ba7fd8061af43e3f?s=128&d=identicon&r=PG", "display_name": "markhorrocks", "link": "https://stackoverflow.com/users/951321/markhorrocks"}, "edited": false, "score": 0, "creation_date": 1544810051, "post_id": 53783151, "comment_id": 94420798, "body": "I edited the question to reflect your suggestion about the auth header and tried a variety of endpoints including your suggestions but no luck."}, {"owner": {"reputation": 1813, "user_id": 1047730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c2435beed6cd3c5be09b77e213e4184?s=128&d=identicon&r=PG", "display_name": "codenamev", "link": "https://stackoverflow.com/users/1047730/codenamev"}, "reply_to_user": {"reputation": 1176, "user_id": 951321, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9eb886c753c17c33ba7fd8061af43e3f?s=128&d=identicon&r=PG", "display_name": "markhorrocks", "link": "https://stackoverflow.com/users/951321/markhorrocks"}, "edited": false, "score": 0, "creation_date": 1544817848, "post_id": 53783151, "comment_id": 94423942, "body": "@markhorrocks I updated my answer after testing their endpoints.  Looks like they haven&#39;t quite made the transition to v2 of their API."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1545021269, "post_id": 53783151, "comment_id": 94466386, "body": "This is the answer. <a href=\"https://api.criteo.com/marketing/swagger/ui/index#!/Portfolio/Portfolio_GetPortfolio\" rel=\"nofollow noreferrer\">Always read the API documentation first</a> which includes the Request URL <code>https:&#47;&#47;api.criteo.com&#47;marketing&#47;v1&#47;portfolio</code>."}, {"owner": {"reputation": 1176, "user_id": 951321, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9eb886c753c17c33ba7fd8061af43e3f?s=128&d=identicon&r=PG", "display_name": "markhorrocks", "link": "https://stackoverflow.com/users/951321/markhorrocks"}, "edited": false, "score": 0, "creation_date": 1545071265, "post_id": 53783151, "comment_id": 94490599, "body": "The question was how to use the REST API v2. I had read the documentation many times but the answer above indicated that v2 is not yet implemented so I resorted to v1 in the interim."}], "tags": [], "owner": {"reputation": 1813, "user_id": 1047730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c2435beed6cd3c5be09b77e213e4184?s=128&d=identicon&r=PG", "display_name": "codenamev", "link": "https://stackoverflow.com/users/1047730/codenamev"}, "is_accepted": true, "score": 3, "last_activity_date": 1544817345, "last_edit_date": 1544817345, "creation_date": 1544803411, "answer_id": 53783151, "question_id": 53746087, "link": "https://stackoverflow.com/questions/53746087/how-to-query-the-criteo-rest-api-v2-in-ruby/53783151#53783151", "title": "How to query the Criteo REST API v2 in Ruby?", "body": "<p>Looks like you need to add the following to your <code>headers</code>:</p>\n\n<pre><code>'Authorization': 'Bearer VALID_JWT_TOKEN_BASE64'\n</code></pre>\n\n<p>Also, they don't appear to have migrated their <code>portfolio</code> API endpoint to v2 yet.  I was able to resolve their old v1 endpoint (<a href=\"https://support.criteo.com/hc/en-us/articles/360001226125-Testing-Criteo-Marketing-API\" rel=\"nofollow noreferrer\">based on their documentation</a>):</p>\n\n<pre><code>curl -X GET --header 'Accept: application/json' --header 'Authorization: Bearer [token]' https://api.criteo.com/marketing/v1/portfolio\n</code></pre>\n\n<p>That at least gave me an unauthorized response.  Try updating your uri to:</p>\n\n<pre><code>uri = URI('https://api.criteo.com/marketing/v1/portfolio')\n</code></pre>\n"}], "owner": {"reputation": 1176, "user_id": 951321, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9eb886c753c17c33ba7fd8061af43e3f?s=128&d=identicon&r=PG", "display_name": "markhorrocks", "link": "https://stackoverflow.com/users/951321/markhorrocks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "accepted_answer_id": 53783151, "answer_count": 1, "score": 1, "last_activity_date": 1545074051, "creation_date": 1544627789, "last_edit_date": 1545074051, "question_id": 53746087, "link": "https://stackoverflow.com/questions/53746087/how-to-query-the-criteo-rest-api-v2-in-ruby", "title": "How to query the Criteo REST API v2 in Ruby?", "body": "<p>I want to query the Criteo REST API v2. </p>\n\n<p>The answer below indicates that the REST API v2 has not yet been implement by Criteo so i have used v1 instead. Their website says that v1 will be deprecated soon.</p>\n\n<p>The API v1 is described <a href=\"https://support.criteo.com/hc/en-us/articles/360001226125-Testing-Criteo-Marketing-API\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>The Swagger for API v1 is <a href=\"https://api.criteo.com/marketing/swagger/ui/index#!/Statistics/Statistics_GetStats\" rel=\"nofollow noreferrer\">here</a> </p>\n\n<p>The REST API v2 which I'd really like to use is <a href=\"https://support.criteo.com/hc/en-us/articles/360001265360-Criteo-Resellers-Program-API-Guide-V2-0\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>Here is my code at this point:</p>\n\n<pre><code>#! /usr/bin/ruby\n\nrequire 'net/http'\nrequire 'net/https'\nrequire 'uri'\nrequire 'jwt'\nrequire 'date'\nrequire 'json'\n\nCLIENT_ID = 'mapi-XXX'\n\nCLIENT_SECRET = 'YYY'\n\nend_date = Date.today\n\nstart_date = Date.today - Date.today.mday + 1\n\n\n# first get a valid token\n\nuri = URI('https://api.criteo.com/marketing/oauth2/token')\n\nheaders = { 'Content-Type': 'application/x-www-form-urlencoded', 'Accept': 'application/json' }      \n\nhttps = Net::HTTP.new(uri.host, uri.port)\n\nhttps.use_ssl = true\n\nhttps.verify_mode = OpenSSL::SSL::VERIFY_NONE\n\nrequest = Net::HTTP::Post.new(uri.path, headers)\n\nrequest.set_form_data( 'client_id' =&gt; CLIENT_ID, 'client_secret' =&gt; CLIENT_SECRET, 'grant_type' =&gt; 'client_credentials' )\n\nresponse = https.request(request)\n\naccess_token = JSON.parse(response.body)['access_token']\n\n puts access_token\n\n\n\nuri = URI('https://api.criteo.com/marketing/v1/portfolio')\n\nheaders = { 'Accept': 'application/json', 'Authorization': \"Bearer #{access_token}\" }\n\nhttps = Net::HTTP.new(uri.host, uri.port)\n\nhttps.use_ssl = true\n\nhttps.verify_mode = OpenSSL::SSL::VERIFY_NONE\n\nrequest = Net::HTTP::Get.new(uri.path, headers)\n\nresponse = https.request(request)\n\nputs response.body\n\n\nuri = URI('https://api.criteo.com/marketing/v1/campaigns?campaignStatus=Running')\n\nheaders = { 'Accept': 'application/json', 'Authorization': \"Bearer #{access_token}\" }\n\nhttps = Net::HTTP.new(uri.host, uri.port)\n\nhttps.use_ssl = true\n\nhttps.verify_mode = OpenSSL::SSL::VERIFY_NONE\n\nrequest = Net::HTTP::Get.new(uri.path, headers)\n\nresponse = https.request(request)\n\nputs response.body\n\njson = JSON.parse(response.body)\n\ncampaigns = json.map { |campaign| campaign['campaignId'] }\n\n\n# get statistics\n\nputs start_date # =&gt; \"2018-12-01\" \n\nputs end_date # =&gt; \"2018-12-17\"\n\nuri = URI.parse('https://api.criteo.com/marketing/v1/statistics')\n\nheaders = { 'Content-Type': 'application/x-www-form-urlencoded', 'Accept': 'application/json', 'Authorization': \"Bearer #{access_token}\" }\n\nhttps = Net::HTTP.new(uri.host, uri.port)\n\nhttps.use_ssl = true\n\nhttps.verify_mode = OpenSSL::SSL::VERIFY_NONE\n\nrequest = Net::HTTP::Post.new(uri.path, headers)\n\nrequest.set_form_data( 'reportType' =&gt; 'CampiagnPerformance', 'ignoreXDevice' =&gt; true, 'startDate' =&gt; \"#{start_date}\", 'endDate' =&gt; \"#{end_date}\", 'dimensions' =&gt; ['CampaignId'], 'metrics' =&gt; ['Clicks'], 'format' =&gt; 'Json', 'currency' =&gt; 'USD', 'timezone' =&gt; 'GMT') \n\n#request.body = payload.to_json\n\nputs request.body\n\nresponse = https.request(request)\n\nputs response.body\n</code></pre>\n"}, {"tags": ["ruby", "rspec", "initializer"], "comments": [{"owner": {"reputation": 2902, "user_id": 1202324, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e62f40c62dda03af2f033c651f36311?s=128&d=identicon&r=PG", "display_name": "Denny Mueller", "link": "https://stackoverflow.com/users/1202324/denny-mueller"}, "edited": false, "score": 0, "creation_date": 1544628223, "post_id": 53745935, "comment_id": 94344734, "body": "You are right @Stefan was confused switching between original code and this example :)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1544628263, "post_id": 53745935, "comment_id": 94344763, "body": "Your example code works just fine. Seems like you have edited out the error."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1544628324, "post_id": 53745935, "comment_id": 94344802, "body": "Wild guess: a typo in <code>initialize</code>?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1544628348, "post_id": 53745935, "comment_id": 94344823, "body": "@Stefan: then it wouldn&#39;t have worked in console. My guess is: spring is hung up and is not reloading the code."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1544628544, "post_id": 53745935, "comment_id": 94344937, "body": "Could you show your <i>actual</i> code?"}, {"owner": {"reputation": 2902, "user_id": 1202324, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e62f40c62dda03af2f033c651f36311?s=128&d=identicon&r=PG", "display_name": "Denny Mueller", "link": "https://stackoverflow.com/users/1202324/denny-mueller"}, "edited": false, "score": 0, "creation_date": 1544628664, "post_id": 53745935, "comment_id": 94344999, "body": "Give me a couple of minutes I can get this right."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1544629790, "post_id": 53745935, "comment_id": 94345746, "body": "You modify the passed-in hash in <code>rectify_cashflows</code>, so <code>object.cashflows</code> and <code>@payload</code> are the same object."}], "answers": [{"comments": [{"owner": {"reputation": 2902, "user_id": 1202324, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e62f40c62dda03af2f033c651f36311?s=128&d=identicon&r=PG", "display_name": "Denny Mueller", "link": "https://stackoverflow.com/users/1202324/denny-mueller"}, "edited": false, "score": 0, "creation_date": 1544629965, "post_id": 53746557, "comment_id": 94345860, "body": "I will go home for today (\u256f&#176;\u25a1&#176;\uff09\u256f\ufe35 \u253b\u2501\u253b Thanks everything makes sense now. Sorry for the messy start of the Question."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 1, "last_activity_date": 1544629915, "last_edit_date": 1544629915, "creation_date": 1544629373, "answer_id": 53746557, "question_id": 53745935, "link": "https://stackoverflow.com/questions/53745935/rspec-object-new-does-not-invoke-initialize-correctly/53746557#53746557", "title": "rspec Object.new does not invoke initialize correctly", "body": "<blockquote>\n  <p>This test should fail since <code>rectify_cashflows</code> sorts them and adds a <code>delta</code> key in each cashflow.</p>\n</blockquote>\n\n<p>Yes. The problem is, your rectify method affects <code>@payload</code> from your spec too. Because it's <strong>the very same array</strong> (containing the same hashes). Naturally, an object is equal to itself and your test passes. </p>\n\n<p>A simple fix would be to use copying <code>sort</code> instead of in-place <code>sort!</code>. Or, better, simply deep-copy the array in the initializer. (deep part is important)</p>\n"}], "owner": {"reputation": 2902, "user_id": 1202324, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e62f40c62dda03af2f033c651f36311?s=128&d=identicon&r=PG", "display_name": "Denny Mueller", "link": "https://stackoverflow.com/users/1202324/denny-mueller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 53746557, "answer_count": 1, "score": 0, "last_activity_date": 1544629915, "creation_date": 1544627281, "last_edit_date": 1544629474, "question_id": 53745935, "link": "https://stackoverflow.com/questions/53745935/rspec-object-new-does-not-invoke-initialize-correctly", "title": "rspec Object.new does not invoke initialize correctly", "body": "<pre><code>module BusinessMath\n  class Cashflows\n    include Newton\n\n    attr_accessor :cashflows\n\n    def initialize(cashflows)\n      @cashflows = rectify_cashflows(cashflows)\n    end\n\n    private\n\n    def rectify_cashflows(cashflows)\n      cashflows.sort_by! { |cashflow| cashflow[:date] }\n\n      cashflows.each do |cashflow|\n        cashflow[:delta] = 0 if cashflow[:date] == cashflows.first[:date]\n        cashflow[:delta] = Date.range_360(cashflows.first[:date], cashflow[:date])\n      end\n\n      cashflows\n    end\n  end\nend\n\n# spec\nbefore(:all) do\n  @payload = [\n    { date: Date.parse('1.1.2018'), amount: -100 },\n    { date: Date.parse('1.6.2018'), amount: -50 },\n    { date: Date.parse('1.1.2019'), amount: 150 }\n   ]\nend\n\ndescribe '.initialize' do\n  let(:object) { BusinessMath::Cashflows.new(@payload) }\n\n  it 'sets @cashflows' do\n    expect(object.cashflows).to eq(@payload)\n  end\nend\n</code></pre>\n\n<p>This test is supposed to fail since <code>rectify_cashflows</code> sorts the cashflows and adds a <code>delta</code> key in each cashflow. The expected and in console working <code>.cashflow</code> looks like this:</p>\n\n<pre><code>[\n  { date: Date.parse('1.1.2018'), amount: -100, delta: 0 },\n  { date: Date.parse('1.6.2018'), amount: -50, delta: 180},\n  { date: Date.parse('1.1.2019'), amount: 150, delta: 360}\n]\n</code></pre>\n\n<p>How could I test it the correct way?</p>\n"}, {"tags": ["ruby", "forms", "capybara"], "answers": [{"tags": [], "owner": {"reputation": 169, "user_id": 2588359, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/15e96671c0ae0cbb2c3ae6acef062195?s=128&d=identicon&r=PG", "display_name": "bott", "link": "https://stackoverflow.com/users/2588359/bott"}, "is_accepted": false, "score": 0, "last_activity_date": 1544628571, "creation_date": 1544628571, "answer_id": 53746314, "question_id": 53745784, "link": "https://stackoverflow.com/questions/53745784/why-wont-capybara-fill-in-my-text-field/53746314#53746314", "title": "Why won&#39;t Capybara fill in my text field?", "body": "<p>fill_in use a locator, not an element, you are using \"f\" wich is an element. Doc reference\n<a href=\"https://www.rubydoc.info/github/teamcapybara/capybara/master/Capybara/Node/Actions#fill_in-instance_method\" rel=\"nofollow noreferrer\">https://www.rubydoc.info/github/teamcapybara/capybara/master/Capybara/Node/Actions#fill_in-instance_method</a></p>\n\n<blockquote>\n  <p>fill_in([locator], with: , **options)</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 6375, "user_id": 6826164, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh6.googleusercontent.com/-CKThqFqe5Eo/AAAAAAAAAAI/AAAAAAAAP10/ih0uh1YgT_I/photo.jpg?sz=128", "display_name": "Jonathan Tuzman", "link": "https://stackoverflow.com/users/6826164/jonathan-tuzman"}, "edited": false, "score": 0, "creation_date": 1544721429, "post_id": 53747741, "comment_id": 94385828, "body": "Thanks for the answer, and thanks for the best practice tip!"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 3, "last_activity_date": 1544652459, "last_edit_date": 1544652459, "creation_date": 1544633468, "answer_id": 53747741, "question_id": 53745784, "link": "https://stackoverflow.com/questions/53745784/why-wont-capybara-fill-in-my-text-field/53747741#53747741", "title": "Why won&#39;t Capybara fill in my text field?", "body": "<p>As the answer by @bott correctly states <code>fill_in</code> takes a locator, which is the name, id, or associated label text of the input you want to fill in, not an element or CSS selector. Additionally since Capybara 3.7.0 you can call <code>fill_in</code> on a fillable element and skip passing the locator (as mentioned in the docs - \"if no locator is provided will operate on self or a descendant\") - in your case that would be</p>\n\n<pre><code>f.fill_in with: 'paprika'\n</code></pre>\n\n<p>On a side note there is no need to call <code>all(...).first</code> since there is a <code>first</code> method if all you want is the first matching element, however in general usage you really want to prefer methods that return single unique elements (find, etc), using scoping if necessary to ensure uniqueness, instead of <code>all</code> and <code>first</code></p>\n"}, {"tags": [], "owner": {"reputation": 83, "user_id": 2638169, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/162d82774b33e5831bb9e9fe27d427ba?s=128&d=identicon&r=PG", "display_name": "swiknaba", "link": "https://stackoverflow.com/users/2638169/swiknaba"}, "is_accepted": false, "score": 0, "last_activity_date": 1544687089, "creation_date": 1544687089, "answer_id": 53757150, "question_id": 53745784, "link": "https://stackoverflow.com/questions/53745784/why-wont-capybara-fill-in-my-text-field/53757150#53757150", "title": "Why won&#39;t Capybara fill in my text field?", "body": "<p>If you are not using the <code>f</code>variable anymore after <code>fill_in</code> I don't see a point in assigning a variable.</p>\n\n<p>Have a look at <code>fill_in</code>: <a href=\"https://www.rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Actions#fill_in-instance_method\" rel=\"nofollow noreferrer\">https://www.rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Actions#fill_in-instance_method</a></p>\n\n<p>it expects a string, I am not sure if you can use a <code>CSS</code> selector.</p>\n\n<p>You can alternativly also use <code>find</code> and <code>set</code>:</p>\n\n<pre><code>find('#my_container_id #id_of_first_input').set 'capybara'\nfind('#my_container_id #id_of_datetime_input').set I18n.l(Time.now, format: '%d-%m-%Y, %H:%M')\n</code></pre>\n\n<p><code>find('input[type=text]').set 'foo'</code>should work as well, since <code>find</code> accepts any valid <code>CSS</code>, see: <a href=\"https://www.rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Finders#find-instance_method\" rel=\"nofollow noreferrer\">https://www.rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Finders#find-instance_method</a></p>\n\n<p>Bonus, in case you'll need it: if you have a dropdown you can do: <code>find('#my_container_id #my_dropdown_id').find(\"option[value='#{factory2.id}']\").select_option</code></p>\n"}], "owner": {"reputation": 6375, "user_id": 6826164, "user_type": "registered", "accept_rate": 39, "profile_image": "https://lh6.googleusercontent.com/-CKThqFqe5Eo/AAAAAAAAAAI/AAAAAAAAP10/ih0uh1YgT_I/photo.jpg?sz=128", "display_name": "Jonathan Tuzman", "link": "https://stackoverflow.com/users/6826164/jonathan-tuzman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 347, "favorite_count": 0, "accepted_answer_id": 53747741, "answer_count": 3, "score": 0, "last_activity_date": 1544687089, "creation_date": 1544626783, "question_id": 53745784, "link": "https://stackoverflow.com/questions/53745784/why-wont-capybara-fill-in-my-text-field", "title": "Why won&#39;t Capybara fill in my text field?", "body": "<p>When I grab a text field, fill_in isn't working. It says it can't find the field, even though it appears to know it's a field and appears to know its value? What am I doing wrong here?</p>\n\n<pre><code>f = page.all('input[type=text]').first\nf\n=&gt; #&lt;Capybara::Node::Element tag=\"input\" path=\"/html/body/form/ol/li[1]/input\"&gt;\nf.value\n=&gt; \"parsley\"\nfill_in f, with: 'paprika'\nCapybara::ElementNotFound: Unable to find field #&lt;Capybara::Node::Element tag=\"input\" path=\"/html/body/form/ol/li[1]/input\"&gt;\nfrom /Users/test/.rvm/gems/ruby-2.3.3/gems/capybara-3.12.0/lib/capybara/node/finders.rb:301:in `block in synced_resolve'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "associations", "mongoid"], "answers": [{"comments": [{"owner": {"reputation": 1352, "user_id": 502235, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/450f4492b7c4ca82f26d11176880693a?s=128&d=identicon&r=PG", "display_name": "Joshua F. Rountree", "link": "https://stackoverflow.com/users/502235/joshua-f-rountree"}, "edited": false, "score": 0, "creation_date": 1544641441, "post_id": 53745827, "comment_id": 94352076, "body": "Thanks for this.  If I recall, <code>embeds_many</code> stores them as an array.  I&#39;m specifically needing them in the format in the original post since its a part of a legacy system. :-/"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 0, "last_activity_date": 1544626952, "creation_date": 1544626952, "answer_id": 53745827, "question_id": 53745497, "link": "https://stackoverflow.com/questions/53745497/how-to-store-embeds-many-embedded-in-in-mongoid-as-a-hash-instead-of-array/53745827#53745827", "title": "How to store embeds_many / embedded_in in mongoid as a Hash instead of Array?", "body": "<p>You can probably use polymorphic associations (see the <a href=\"https://mongoid.github.io/old/en/mongoid/docs/relations.html\" rel=\"nofollow noreferrer\">docs</a> \"Polymorphism\"):</p>\n\n<pre><code>class Band\n  include Mongoid::Document\n  embeds_many :photos, as: :photographic\nend\n\nclass Photo\n  include Mongoid::Document\n  embedded_in :photographic, polymorphic: true\nend\n\nclass Image\n  include Mongoid::Document\n  embedded_in :photographic, polymorphic: true\nend\n</code></pre>\n\n<p>Polymorphic relations store both id and class name of the associated document.</p>\n"}], "owner": {"reputation": 1352, "user_id": 502235, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/450f4492b7c4ca82f26d11176880693a?s=128&d=identicon&r=PG", "display_name": "Joshua F. Rountree", "link": "https://stackoverflow.com/users/502235/joshua-f-rountree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1544626952, "creation_date": 1544625892, "question_id": 53745497, "link": "https://stackoverflow.com/questions/53745497/how-to-store-embeds-many-embedded-in-in-mongoid-as-a-hash-instead-of-array", "title": "How to store embeds_many / embedded_in in mongoid as a Hash instead of Array?", "body": "<p>As I'm building a new API for an existing legacy system, I'm trying to figure out how to model a relationship in a way that makes sense for the ODM but maintain the same storage structure that is already existing.</p>\n\n<p>The current structure is stored as:</p>\n\n<pre><code>{\n  _id: ObjectId(),\n  name: String,\n  relationship_ids: {\n    \"5c06a0eb350e6ef20d1486b9\" : {\n        \"id\" : \"5c06a0eb350e6ef20d1486b9\", \n        \"type\" : \"package\"\n    },\n    \"5ba105bf350e6e3f6ef97532\" : {\n        \"id\" : \"5ba105bf350e6e3f6ef97532\", \n        \"type\" : \"something\"\n    }\n }\n}\n</code></pre>\n\n<p>And I'd like to model the object as if it's its own Model in Rails.\nI thought maybe there was a way to do this but I don't see it anywhere.</p>\n\n<p>I'm guessing I need some sort of serialize / deserialize adapter or override it specifically at the <code>embedded_in do</code> / <code>embeds_many do</code> area... but not sure.</p>\n\n<p>UPDATE:</p>\n\n<p>I'm guessing it has something to do with this overriding methods on this somehow:\n<a href=\"https://docs.mongodb.com/mongoid/7.0/api/Mongoid/Association/Embedded/EmbedsMany/Proxy.html\" rel=\"nofollow noreferrer\">https://docs.mongodb.com/mongoid/7.0/api/Mongoid/Association/Embedded/EmbedsMany/Proxy.html</a></p>\n\n<p>But I am somewhat new to this and don't have a clue where the best place to put this type of override.</p>\n\n<p>Anybody else have a solution for this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "include", "ruby-on-rails-5", "activeadmin"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1544622505, "post_id": 53744411, "comment_id": 94341320, "body": "So, basically, you don&#39;t know how to require a file properly? Where is it located?"}, {"owner": {"reputation": 525, "user_id": 7431246, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154943107064592/picture?type=large", "display_name": "Ofir Sasson", "link": "https://stackoverflow.com/users/7431246/ofir-sasson"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1544622654, "post_id": 53744411, "comment_id": 94341425, "body": "I know but in active admin it&#39;s not working. On other files it&#39;s works good. the file is in /lib/app_languages.rb and the resource is in app/admin/courses.rb"}, {"owner": {"reputation": 1201, "user_id": 8785865, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5b892309a47e8d4a61140a615f2b3337?s=128&d=identicon&r=PG&f=1", "display_name": "Aarthi", "link": "https://stackoverflow.com/users/8785865/aarthi"}, "edited": false, "score": 0, "creation_date": 1544637191, "post_id": 53744411, "comment_id": 94349936, "body": "Have you referred this <a href=\"https://stackoverflow.com/questions/8673112/rails-3-how-to-add-a-helper-that-activeadmin-will-use\" title=\"rails 3 how to add a helper that activeadmin will use\">stackoverflow.com/questions/8673112/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1276, "user_id": 5399937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ctCqj.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/5399937/tom"}, "is_accepted": false, "score": 0, "last_activity_date": 1544657107, "creation_date": 1544657107, "answer_id": 53752923, "question_id": 53744411, "link": "https://stackoverflow.com/questions/53744411/rails-5-include-unrelated-class-inside-active-admins-resource/53752923#53752923", "title": "Rails 5: include unrelated class inside active admin&#39;s resource", "body": "<ul>\n<li>I would first change this from a class to a module: <code>module AppLanguages</code>.</li>\n<li>Then change all 3 of the items to constants. <code>KEYS</code> <code>VALUES</code> <code>LANG</code>.</li>\n<li>At the bottom of the file add <code>ActiveAdmin.send(:include, AppLanguages)</code> (or whichever module you would like the extensions in if not ActiveAdmin).</li>\n<li>Finally, either have it in autoload or create an initializer to require it.</li>\n</ul>\n\n<p>I recommend this method because you don't have to require it anywhere in ActiveAdmin itself, the code stays in your app. Also, if something in the module breaks (admittedly unlikely here) it will be easier to find the source of the code.</p>\n"}], "owner": {"reputation": 525, "user_id": 7431246, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154943107064592/picture?type=large", "display_name": "Ofir Sasson", "link": "https://stackoverflow.com/users/7431246/ofir-sasson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544657107, "creation_date": 1544622245, "last_edit_date": 1544622879, "question_id": 53744411, "link": "https://stackoverflow.com/questions/53744411/rails-5-include-unrelated-class-inside-active-admins-resource", "title": "Rails 5: include unrelated class inside active admin&#39;s resource", "body": "<p>I have Rails 5 API app with active admin that's working fine. I created a class in lib which calls app_languages.rb and contains array of hashes for language properties. I want to share the data in my active admin resources and use it, but It's not working. I tried writing require '/lib/app_languages.rb' but it's not working and I get this error: <code>cannot load such file -- /lib/app_languages.rb</code></p>\n\n<p>this is app_languages.rb:</p>\n\n<pre><code>class AppLanguages\n  keys = [:language, :flag]\n  values = [\"English\", \"EN\", \"French\", \"FR\", \"Spanish\", \"SP\", \"Japanese\", \"JPN\", \"Hebrew\", \"HEB\"]\n  LANG = values.each_slice(2).map { |value| Hash[keys.zip(value)] }\nend\n</code></pre>\n\n<p>How can I gain access to app_languages.rb's variables from a resource in active admin?</p>\n\n<p><strong>EDIT:</strong> I read that in rails 5 there's a problem with autoload so I already configured this in application.rb: <code>config.autoload_paths &lt;&lt; \"#{Rails.root}/lib\"</code>\nand configured in every enviroment: <code>config.eager_load = true</code></p>\n"}, {"tags": ["ruby", "algorithm", "function", "irb"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1544619148, "post_id": 53743396, "comment_id": 94339427, "body": "Calling <code>chomp</code> on hardcoded string makes zero sense. Also, <code>gets</code> receives a string back, hence do <code>gets.to_i.times</code>. Also please next time post the whole error message."}, {"owner": {"reputation": 203, "user_id": 10468970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kU6Va.png?s=128&g=1", "display_name": "Prozak", "link": "https://stackoverflow.com/users/10468970/prozak"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1544619711, "post_id": 53743396, "comment_id": 94339765, "body": "Yeah, you&#39;re absolutely right. Thanks for the help! Although now the cups aren&#39;t actually being created the loop is acting as a false positive. When I type Cup.all I get the error  <code>Traceback (most recent call last):         2: from &#47;Users&#47;WTFwerewolf&#47;.rvm&#47;rubies&#47;ruby-2.5.1&#47;bin&#47;irb:11:in </code>&lt;main&gt;&#39;         1: from (irb):3 NoMethodError (undefined method <code>all&#39; for Cup:Class)</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1544620051, "post_id": 53743396, "comment_id": 94339941, "body": "Which is probably because (surprise) the class <code>Cup</code> has no method <code>all</code> defined? There is no magic."}, {"owner": {"reputation": 203, "user_id": 10468970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kU6Va.png?s=128&g=1", "display_name": "Prozak", "link": "https://stackoverflow.com/users/10468970/prozak"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1544620554, "post_id": 53743396, "comment_id": 94340186, "body": "Ahh I thought <code>all</code> was something Ruby understood automatically. Has worked in the Rails console before. Will be working on separating the next input lines. Thanks for your help though I really appreciate it!"}], "answers": [{"tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": true, "score": 2, "last_activity_date": 1544623635, "creation_date": 1544623635, "answer_id": 53744840, "question_id": 53743396, "link": "https://stackoverflow.com/questions/53743396/looping-a-creation-based-on-user-input/53744840#53744840", "title": "Looping a creation based on user input", "body": "<p>You need to clear basic with ruby</p>\n\n<pre><code>class Cup\n    attr_accessor :colour, :radius\n\n    def initialize(colour='No Colour', radius=0)\n        @colour = colour\n        @radius = radius\n    end\nend\n\nputs \"How many cups are there?\"\ncups = []\ngets.to_i.times do |n| \n  puts \"Enter Cup-#{n+1} colour &amp; radius:\"\n  c = gets.chomp\n  r = gets.to_i\n  cups &lt;&lt; Cup.new(c, r)\nend\n\nsorted_cups = cups.sort_by { |x| x.radius }\n</code></pre>\n\n<p>Further you can display sorted_cups </p>\n"}], "owner": {"reputation": 203, "user_id": 10468970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kU6Va.png?s=128&g=1", "display_name": "Prozak", "link": "https://stackoverflow.com/users/10468970/prozak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 53744840, "answer_count": 1, "score": 0, "last_activity_date": 1544623635, "creation_date": 1544618919, "last_edit_date": 1544619055, "question_id": 53743396, "link": "https://stackoverflow.com/questions/53743396/looping-a-creation-based-on-user-input", "title": "Looping a creation based on user input", "body": "<p>I'm creating an algorithm to sort cups by the length of their radii. The input would be</p>\n\n<pre><code>2  \nred 10       \ngreen 7\n</code></pre>\n\n<p>and the output being</p>\n\n<pre><code>green\nred\n</code></pre>\n\n<p>My approach to this is seeing as the first input is 2 I would have to create 2 Cup that have colour and radius attributes. As seen here:</p>\n\n<pre><code>class Cup\n    attr_accessor :colour, :radius\n\n    def initialize(colour, radius)\n        @colour = \"\"\n        @radius = 0\n    end\n\n    def number_of_cups\n        puts \"How many cups are there?\".chomp\n        gets.times do \n            Cup.new(\"\", 0)\n        end\n    end\nend\n</code></pre>\n\n<p>I am receiving an <code>undefined method</code> error when I try to access Cup.number_of_cups. My question is, for example, if I typed in <code>3</code> then I would have <code>3</code> new cup objects? </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 4670, "user_id": 2658159, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/7ca457ff473ed766a9c140f9956c910a?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron Thomas", "link": "https://stackoverflow.com/users/2658159/aaron-thomas"}, "edited": false, "score": 1, "creation_date": 1544617103, "post_id": 53742840, "comment_id": 94338313, "body": "all snarky comments about using Ruby to run a node.js program welcome, and heartily agreed with"}], "answers": [{"comments": [{"owner": {"reputation": 4670, "user_id": 2658159, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/7ca457ff473ed766a9c140f9956c910a?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron Thomas", "link": "https://stackoverflow.com/users/2658159/aaron-thomas"}, "edited": false, "score": 1, "creation_date": 1544617952, "post_id": 53743013, "comment_id": 94338765, "body": "A non-standard error is being raised, and it also contains info about what failed within the external command. If i understand correctly, the rescue didn&#39;t capture this error, and sounds like I need to read up on error handling in ruby. Thank you."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 2, "last_activity_date": 1544617579, "creation_date": 1544617579, "answer_id": 53743013, "question_id": 53742840, "link": "https://stackoverflow.com/questions/53742840/capture-failures-when-using-ruby-open3-standard-library/53743013#53743013", "title": "Capture failures when using Ruby open3 standard library", "body": "<p>Not sure about the reason, but a non-<code>StandardError</code> may be raised. So, what about changing your rescue to:</p>\n\n<pre><code>rescue Exception =&gt; exception\n</code></pre>\n\n<p>That may give you more clues as to what is happening.</p>\n"}], "owner": {"reputation": 4670, "user_id": 2658159, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/7ca457ff473ed766a9c140f9956c910a?s=128&d=identicon&r=PG&f=1", "display_name": "Aaron Thomas", "link": "https://stackoverflow.com/users/2658159/aaron-thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 53743013, "answer_count": 1, "score": 2, "last_activity_date": 1544617579, "creation_date": 1544616934, "question_id": 53742840, "link": "https://stackoverflow.com/questions/53742840/capture-failures-when-using-ruby-open3-standard-library", "title": "Capture failures when using Ruby open3 standard library", "body": "<p>I'm running an external command using the <a href=\"http://ruby-doc.org/stdlib-2.5.1/libdoc/open3/rdoc/Open3.html#method-c-popen2e\" rel=\"nofollow noreferrer\"><code>Open3.popen2e</code></a> function. The external command fails spectacularly halfway through. Unfortunately this also kills my ruby process that is using <code>popen2e</code>. What is the reason, and how can I avoid?</p>\n\n<pre><code>begin\n  Open3.popen2e(\"node mynode.js\") do |i, oe|\n    oe.each do |ln|\n      puts ln.chomp\n    end\n  end\nrescue =&gt; exception\n  puts exception.message\nend\n</code></pre>\n\n<p>Using ruby 2.5.1 on Ubuntu</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1544610287, "post_id": 53740722, "comment_id": 94334333, "body": "Why dont you put everything in another dir so your path would be like <code>&#47;app&#47;external_apps&#47;cms&#47;types&#47;post.rb</code>?"}, {"owner": {"reputation": 4128, "user_id": 552936, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1900c159e4b89ccab33af7f7b111b140?s=128&d=identicon&r=PG", "display_name": "mbajur", "link": "https://stackoverflow.com/users/552936/mbajur"}, "reply_to_user": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1544610550, "post_id": 53740722, "comment_id": 94334475, "body": "i&#39;m creating a rails engine and putting all these classes in /app/cms would be an official recommended way fo customizing my engine. I can&#39;t ask my users to put the code in the path you suggested :)"}], "answers": [{"comments": [{"owner": {"reputation": 4128, "user_id": 552936, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1900c159e4b89ccab33af7f7b111b140?s=128&d=identicon&r=PG", "display_name": "mbajur", "link": "https://stackoverflow.com/users/552936/mbajur"}, "edited": false, "score": 0, "creation_date": 1544613373, "post_id": 53741701, "comment_id": 94336122, "body": "it still raises <code>LoadError (Unable to autoload constant Types::Post, expected &#47;Users&#47;xxx&#47;workspace&#47;personal&#47;xxx&#47;app&#47;cms&#47;types&#47;post.rb to define it)</code> when calling <code>Cms::Types::Post.new</code>"}, {"owner": {"reputation": 812, "user_id": 1800474, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jwTww.jpg?s=128&g=1", "display_name": "RajG", "link": "https://stackoverflow.com/users/1800474/rajg"}, "reply_to_user": {"reputation": 4128, "user_id": 552936, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1900c159e4b89ccab33af7f7b111b140?s=128&d=identicon&r=PG", "display_name": "mbajur", "link": "https://stackoverflow.com/users/552936/mbajur"}, "edited": false, "score": 0, "creation_date": 1544613417, "post_id": 53741701, "comment_id": 94336155, "body": "<code>require_relative &#39;path_to_your_class&#39;</code>"}, {"owner": {"reputation": 4128, "user_id": 552936, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1900c159e4b89ccab33af7f7b111b140?s=128&d=identicon&r=PG", "display_name": "mbajur", "link": "https://stackoverflow.com/users/552936/mbajur"}, "edited": false, "score": 0, "creation_date": 1544613459, "post_id": 53741701, "comment_id": 94336180, "body": "wouldn&#39;t it break autoloading / app in dev env ?"}], "tags": [], "owner": {"reputation": 812, "user_id": 1800474, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jwTww.jpg?s=128&g=1", "display_name": "RajG", "link": "https://stackoverflow.com/users/1800474/rajg"}, "is_accepted": false, "score": 0, "last_activity_date": 1544613178, "last_edit_date": 1544613178, "creation_date": 1544612854, "answer_id": 53741701, "question_id": 53740722, "link": "https://stackoverflow.com/questions/53740722/how-can-i-put-app-subdir-classess-under-a-namespace/53741701#53741701", "title": "How can i put app subdir classess under a namespace", "body": "<p>Normally, when you use <code>namespace</code> you need to have your file structure as below:</p>\n\n<pre><code>module Cms\n  module Types\n    class Post\n    end\n  end\nend\n</code></pre>\n\n<p><code>EDIT:</code> Also to make it, autoload the path, you could add the below line in your <code>application.rb</code>:</p>\n\n<pre><code>config.autoload_paths &lt;&lt; Rails.root.join('app', 'cms').to_s\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 1, "last_activity_date": 1544630702, "creation_date": 1544630702, "answer_id": 53746950, "question_id": 53740722, "link": "https://stackoverflow.com/questions/53740722/how-can-i-put-app-subdir-classess-under-a-namespace/53746950#53746950", "title": "How can i put app subdir classess under a namespace", "body": "<p>What is <code>Post</code>? I mean, what is the nature of <code>Post</code>? For instance, is it a service? </p>\n\n<p>If it were a service (for example), I would put it in:</p>\n\n<pre><code>/app/services/cms/types/post_service.rb\n</code></pre>\n\n<p>And then define it as: </p>\n\n<pre><code>class Cms::Types::PostService\nend\n</code></pre>\n\n<p>If it were a <code>type</code> (which seems like it might be a problematic name), then I would define it in:</p>\n\n<pre><code>/app/types/cms/post_type.rb\n</code></pre>\n\n<p>and define it as:</p>\n\n<pre><code>class Cms::PostType\nend\n</code></pre>\n\n<p>In other words, name the directory under <code>/app</code> using the description of what <code>Post</code> is (just like rails does with <code>models</code>, <code>controllers</code>, etc.) and then add the description (in the singular form) to the end of your definition (rails does this with <code>controllers</code>, <code>helpers</code>, and <code>mailers</code>, but not with <code>models</code>).</p>\n"}], "owner": {"reputation": 4128, "user_id": 552936, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/1900c159e4b89ccab33af7f7b111b140?s=128&d=identicon&r=PG", "display_name": "mbajur", "link": "https://stackoverflow.com/users/552936/mbajur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1544630702, "creation_date": 1544609709, "question_id": 53740722, "link": "https://stackoverflow.com/questions/53740722/how-can-i-put-app-subdir-classess-under-a-namespace", "title": "How can i put app subdir classess under a namespace", "body": "<p>I want to namespace all my classes put in a <code>app/cms</code> folder under <code>Cms</code> module. So, let's say i have a following file:</p>\n\n<pre><code># /app/cms/types/post.rb\nclass Cms::Types::Post\nend\n</code></pre>\n\n<p>Rails assumes that class definition of a file put in this dir should be <code>Types::Post</code> instead of <code>Cms::Types::Post</code>. So, when calling <code>Cms::Types::Post.new</code>, rails throws</p>\n\n<pre><code>LoadError (Unable to autoload constant Types::Post, expected /Users/xxx/workspace/personal/xxx/app/cms/types/post.rb to define it)\n</code></pre>\n\n<p>How can i namespace all these files under <code>Cms</code>?</p>\n\n<p>I'm on rails 5.2.0</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "answers": [{"tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 0, "last_activity_date": 1544608220, "creation_date": 1544608220, "answer_id": 53740234, "question_id": 53740159, "link": "https://stackoverflow.com/questions/53740159/forbiddenattributeserror-in-ruby-on-rails-when-update-attributes-use/53740234#53740234", "title": "ForbiddenAttributesError in ruby on rails when update_attributes use", "body": "<p>You should use <a href=\"https://edgeguides.rubyonrails.org/action_controller_overview.html#strong-parameters\" rel=\"nofollow noreferrer\">strong parameters</a>, Rails prevent you from assigning unfiltered params coming from outside world for <a href=\"https://guides.rubyonrails.org/v3.2.8/security.html#mass-assignment\" rel=\"nofollow noreferrer\">security reasons</a>.</p>\n\n<pre><code>def update\n  # ...\n  @post.update_attributes(post_params)\n  # ...\nend\n\n# ...\n\nprivate\n\ndef post_params\n  params.require(:post).permit(:title, :body, :category_id)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3476, "user_id": 853453, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c56bc18cbbd5419335d47335afb81f07?s=128&d=identicon&r=PG", "display_name": "Beena Shetty", "link": "https://stackoverflow.com/users/853453/beena-shetty"}, "is_accepted": false, "score": 0, "last_activity_date": 1544608296, "creation_date": 1544608296, "answer_id": 53740257, "question_id": 53740159, "link": "https://stackoverflow.com/questions/53740159/forbiddenattributeserror-in-ruby-on-rails-when-update-attributes-use/53740257#53740257", "title": "ForbiddenAttributesError in ruby on rails when update_attributes use", "body": "<p>Attributes should be whitelisted for updating.</p>\n\n<p>Below is the code:</p>\n\n<pre><code>        def edit\n            @post = Post.find(params[:id])\n        end\n\n        def update\n           @post = Post.find(params[:id])\n           if @post\n              @post.update_attributes(post_params)\n              redirect_to post_path, :notice =&gt; \"you post  has been updated\"\n           else\n              render \"edit\"\n           end\n        end\n\n   private\n\n    def post_params\n      params.require(:post).permit(:title, :body, :category_id)\n    end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 0, "last_activity_date": 1544608471, "creation_date": 1544608471, "answer_id": 53740310, "question_id": 53740159, "link": "https://stackoverflow.com/questions/53740159/forbiddenattributeserror-in-ruby-on-rails-when-update-attributes-use/53740310#53740310", "title": "ForbiddenAttributesError in ruby on rails when update_attributes use", "body": "<p><a href=\"https://api.rubyonrails.org/classes/ActiveModel/ForbiddenAttributesError.html\" rel=\"nofollow noreferrer\">ActiveModel::ForbiddenAttributesError</a> is only raised if you pass unsanitized objects to the record update call.</p>\n\n<pre><code>@post.update_attributes(params[:post]) # This would be an issue\n\nPost.where(params[:post]) # This would not\n\n@post.update_attributes(post_params) # Neither would this\n\ndef post_params\n  params.require(:post).permit(:title, :body, :category_id)\nend\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10303765, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "x-xx-x", "link": "https://stackoverflow.com/users/10303765/x-xx-x"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "closed_date": 1544609161, "accepted_answer_id": 53740234, "answer_count": 3, "score": -1, "last_activity_date": 1544608471, "creation_date": 1544607910, "question_id": 53740159, "link": "https://stackoverflow.com/questions/53740159/forbiddenattributeserror-in-ruby-on-rails-when-update-attributes-use", "closed_reason": "Duplicate", "title": "ForbiddenAttributesError in ruby on rails when update_attributes use", "body": "<p>I am createing simple ruby blog app I am updating a post but it's showing thi type error\n<a href=\"https://i.stack.imgur.com/Cyi3k.png\" rel=\"nofollow noreferrer\">error</a></p>\n\n<pre><code>        def edit\n            @post = Post.find(params[:id])\n        end\n\n        def update\n            @post = Post.find(params[:id])\n            if @post\n                puts \"******************dd*********************\"\n                puts params[:post]\n                puts \"**************************************\"\n                @post.update_attributes(params[:post])\n\n\n                redirect_to post_path, :notice =&gt; \"you post  has been updated\"\n            else\n                render \"edit\"\n            end\n        end\n</code></pre>\n\n<p>but when I  using this </p>\n\n<pre><code>        @post.update_attributes({\"title\"=&gt;\"2nd\", \"body\"=&gt;\"this is second post body\", \"category_id\"=&gt;\"2\"})\n</code></pre>\n\n<p>it is work </p>\n"}, {"tags": ["ruby", "httparty"], "answers": [{"comments": [{"owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1544609979, "post_id": 53740409, "comment_id": 94334125, "body": "Do you have explanation for this ? Why did you choose this one !"}], "tags": [], "owner": {"reputation": 3476, "user_id": 853453, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c56bc18cbbd5419335d47335afb81f07?s=128&d=identicon&r=PG", "display_name": "Beena Shetty", "link": "https://stackoverflow.com/users/853453/beena-shetty"}, "is_accepted": false, "score": 1, "last_activity_date": 1544609175, "last_edit_date": 1544609175, "creation_date": 1544608738, "answer_id": 53740409, "question_id": 53739706, "link": "https://stackoverflow.com/questions/53739706/body-parameters-in-post-request-with-capitals/53740409#53740409", "title": "Body parameters in POST request with capitals", "body": "<p>Pass payload like this:</p>\n\n<pre><code>payload = { :shortDescription =&gt; \"Bla\" }\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>payload = { \"shortDescription\" =&gt; \"Bla\" }\n</code></pre>\n"}], "owner": {"reputation": 5732, "user_id": 481554, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8752b3b932f333ec036da794a34cf083?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/481554/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1544609175, "creation_date": 1544606438, "last_edit_date": 1544606574, "question_id": 53739706, "link": "https://stackoverflow.com/questions/53739706/body-parameters-in-post-request-with-capitals", "title": "Body parameters in POST request with capitals", "body": "<p>I need to send a POST request with HTTParty, in which the body parameter must be <code>shortDescription</code>. Should I use:</p>\n\n<pre><code>payload = { :short_description =&gt; \"Bla\" }\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>payload = { :shortDescription =&gt; \"Bla\" }\n</code></pre>\n\n<p>How can I do this?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1544602929, "post_id": 53738491, "comment_id": 94330060, "body": "You could convert it to json: <code>JSON.parse(string.gsub(&#39;=&gt;&#39;, &#39;:&#39;))</code> or <code>hash = eval(string)</code> but eval is dangerous."}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 1, "creation_date": 1544603030, "post_id": 53738491, "comment_id": 94330120, "body": "JSON won&#39;t work on complex objects like <code>Time</code>."}], "answers": [{"comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1544603496, "post_id": 53738817, "comment_id": 94330332, "body": "helpful, so can we convert time donating string to time object to have it in hash?"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1544603572, "post_id": 53738817, "comment_id": 94330369, "body": "@ray &#39;to have it in hash&#39;, are you referring to ruby hash or redis hash?"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1544603647, "post_id": 53738817, "comment_id": 94330409, "body": "In ruby, I know, redis?"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "reply_to_user": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 1, "creation_date": 1544603944, "post_id": 53738817, "comment_id": 94330541, "body": "@ray to store it in redis hash, each value will have to be marshalled, and then each value has to marshal <code>load</code>ed back. Extremely cumbersome, unless someone writes an interface."}], "tags": [], "owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "is_accepted": false, "score": 1, "last_activity_date": 1544602978, "creation_date": 1544602978, "answer_id": 53738817, "question_id": 53738491, "link": "https://stackoverflow.com/questions/53738491/how-to-convert-a-hash-inside-a-string-into-a-hash/53738817#53738817", "title": "How to convert a hash inside a string into a hash?", "body": "<p>You cannot save all Ruby hash parameters in a Redis hash and expect to get the attributes in similar way.\nBefore saving it in redis hash, ruby calls <code>to_s</code> on the attributes.</p>\n\n<pre><code>redis.hmset('foo', 'a', 'b', 'account', 1, 'date', Time.now)\nredis.hgetall('foo') \n# =&gt; {\"a\"=&gt;\"b\", \"account\"=&gt;\"1\", \"date\"=&gt;\"2018-12-12 13:45:50 +0530\"}\n</code></pre>\n\n<p>As you can see above, '1' is converted into the string and Time.now is converted from a <code>Time</code> <em>*object*</em> (<code>2018-12-12 13:45:42 +0530</code>) to the stringified <code>\"2018-12-12 13:45:50 +0530\"</code></p>\n\n<p>You can instead use the <a href=\"http://ruby-doc.org/core-2.0.0/Marshal.html\" rel=\"nofollow noreferrer\"><strong>Marshal dump</strong></a> and set the ruby hash as redis key:</p>\n\n<pre><code>hash = {'a' =&gt; 'b', 'account' =&gt; 1, 'date' =&gt; Time.now }\n# =&gt; {\"a\"=&gt;\"b\", \"account\"=&gt;1, \"date\"=&gt;2018-12-12 13:47:25 +0530}\nredis.set('foo', Marshal.dump(hash))\nredis.get('foo')\n# =&gt; \"\\u0004\\b{\\bI\\\"\\u0006a\\u0006:\\u0006ETI\\\"\\u0006b\\u0006;\\u0000TI\\\"\\faccount\\u0006;\\u0000Ti\\u0006I\\\"\\tdate\\u0006;\\u0000TIu:\\tTime\\r\\x88\\xAD\\u001D\\x80-\\xB8\\x9CE\\a:\\voffseti\\u0002XM:\\tzoneI\\\"\\bIST\\u0006;\\u0000F\"\nMarshal.load redis.get('foo')\n#=&gt; {\"a\"=&gt;\"b\", \"account\"=&gt;1, \"date\"=&gt;2018-12-12 13:47:25 +0530}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7334027, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-u89ZFrPfyN0/AAAAAAAAAAI/AAAAAAAAABw/6fB8lzMM6qg/photo.jpg?sz=128", "display_name": "Tanmay Surlekar", "link": "https://stackoverflow.com/users/7334027/tanmay-surlekar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 1, "answer_count": 1, "score": -2, "last_activity_date": 1544676375, "creation_date": 1544601655, "last_edit_date": 1544676375, "question_id": 53738491, "link": "https://stackoverflow.com/questions/53738491/how-to-convert-a-hash-inside-a-string-into-a-hash", "title": "How to convert a hash inside a string into a hash?", "body": "<p>How can I convert data received from redis data which was stored as hash in string format back to hash?</p>\n\n<p>Tried retriving from redis as string not able to convert to hash</p>\n\n<p>The string looks like:</p>\n\n<pre><code>{\"index\"=&gt;1, \"isActive\"=&gt;true, \"accountNumber\"=&gt;5137, \"name\"=&gt;{\"first\"=&gt;\"Holder\", \"last\"=&gt;\"Hanson\"},}\n</code></pre>\n"}, {"tags": ["ruby", "module", "constants"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1544600942, "post_id": 53738092, "comment_id": 94329156, "body": "Module names are constants."}], "answers": [{"comments": [{"owner": {"reputation": 5657, "user_id": 534481, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367?s=128&d=identicon&r=PG", "display_name": "Saurabh Nanda", "link": "https://stackoverflow.com/users/534481/saurabh-nanda"}, "edited": false, "score": 0, "creation_date": 1544603633, "post_id": 53738388, "comment_id": 94330404, "body": "What will happen if <code>A</code> is defined as <code>module A; def self.foo; puts &quot;foo&quot;; end; end;</code> and <code>a.foo</code> is called <i>after</i> <code>remov_const</code> is called?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 5657, "user_id": 534481, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367?s=128&d=identicon&r=PG", "display_name": "Saurabh Nanda", "link": "https://stackoverflow.com/users/534481/saurabh-nanda"}, "edited": false, "score": 0, "creation_date": 1544603673, "post_id": 53738388, "comment_id": 94330421, "body": "It will print <code>&quot;foo&quot;</code>, just as you expected."}, {"owner": {"reputation": 5657, "user_id": 534481, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367?s=128&d=identicon&r=PG", "display_name": "Saurabh Nanda", "link": "https://stackoverflow.com/users/534481/saurabh-nanda"}, "edited": false, "score": 0, "creation_date": 1544603850, "post_id": 53738388, "comment_id": 94330502, "body": "Doesn&#39;t it mean that <code>A</code> was <b>not</b> removed/unloaded? Does <code>a=A</code> create a copy of the entire module definition?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 5657, "user_id": 534481, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367?s=128&d=identicon&r=PG", "display_name": "Saurabh Nanda", "link": "https://stackoverflow.com/users/534481/saurabh-nanda"}, "edited": false, "score": 0, "creation_date": 1544604246, "post_id": 53738388, "comment_id": 94330706, "body": "No, <code>A</code> was removed. What it had pointed to was not removed. <code>a = A</code> does not create a copy."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 3, "last_activity_date": 1544603637, "last_edit_date": 1544603637, "creation_date": 1544601293, "answer_id": 53738388, "question_id": 53738092, "link": "https://stackoverflow.com/questions/53738092/remove-const-and-modules-name/53738388#53738388", "title": "remove_const and module&#39;s name", "body": "<p>When a module is defined with a name <code>A</code>,</p>\n\n<pre><code>module A; end\na = A\n</code></pre>\n\n<p>then its name is <code>\"A\"</code>, so you can call it as <code>A</code> (by it's name):</p>\n\n<pre><code>a.name # =&gt; \"A\"\nA # =&gt; A\n</code></pre>\n\n<p>But if you undefine <code>A</code>:</p>\n\n<pre><code>self.class.send(:remove_const, :A)\n</code></pre>\n\n<p>then you cannot call <code>A</code> anymore:</p>\n\n<pre><code>A # &gt;&gt; NameError: uninitialized constant A\n</code></pre>\n\n<p>but its name remains as <code>\"A\"</code>:</p>\n\n<pre><code>a.name # =&gt; \"A\"\na # =&gt; A\n</code></pre>\n\n<p>That is probably what is meant by confusing.</p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 2, "last_activity_date": 1544649526, "creation_date": 1544649526, "answer_id": 53751501, "question_id": 53738092, "link": "https://stackoverflow.com/questions/53738092/remove-const-and-modules-name/53751501#53751501", "title": "remove_const and module&#39;s name", "body": "<p>A module's name is automatically set when the module is assigned to a constant for the very first time. But, it does not get automatically <em>unset</em> when the module is un-assigned. This may be confusing.</p>\n\n<p>See:</p>\n\n<pre><code>a = Module.new\na.name    #=&gt; nil\na.to_s    #=&gt; '#&lt;Module:0x00007f91b38625f8&gt;'\na.inspect #=&gt; '#&lt;Module:0x00007f91b38625f8&gt;'\n\nA = a\na.name    #=&gt; 'A'\na.to_s    #=&gt; 'A'\na.inspect #=&gt; 'A'\n\nB = a\nB.name    #=&gt; 'A'\nB.to_s    #=&gt; 'A'\nB.inspect #=&gt; 'A'\n\nself.class.send(:remove_const, :A)\na = nil\nB.name    #=&gt; 'A'\nB.to_s    #=&gt; 'A'\nB.inspect #=&gt; 'A'\n</code></pre>\n\n<p>Now, you can only refer to the module via the constant <code>B</code>, but the name of the module is still <code>A</code>, which is the first constant that it was ever assigned to. Removing the constant will not change and/or delete the module's name.</p>\n"}], "owner": {"reputation": 5657, "user_id": 534481, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/60df8c1a366ab1bf4378154e71a93367?s=128&d=identicon&r=PG", "display_name": "Saurabh Nanda", "link": "https://stackoverflow.com/users/534481/saurabh-nanda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1544649526, "creation_date": 1544600020, "last_edit_date": 1544601497, "question_id": 53738092, "link": "https://stackoverflow.com/questions/53738092/remove-const-and-modules-name", "title": "remove_const and module&#39;s name", "body": "<p>In <a href=\"https://ruby-doc.org/core-2.2.3/Module.html#method-i-remove_const\" rel=\"nofollow noreferrer\">standard Ruby documentation for <code>remove_const</code></a>, I noticed this line:</p>\n\n<blockquote>\n  <p>If that constant referred to a module, this will not change that\n  module's name and can lead to confusion.</p>\n</blockquote>\n\n<p>What does this mean? What does removing/unloading a constant have to do with module names? What kind of confusion is this referring to?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 356, "user_id": 7781865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a015f597dcb8d01d4deae23070c6991f?s=128&d=identicon&r=PG", "display_name": "colincr", "link": "https://stackoverflow.com/users/7781865/colincr"}, "edited": false, "score": 3, "creation_date": 1544591542, "post_id": 53735771, "comment_id": 94325826, "body": "can you post your migration files and your schema?"}], "answers": [{"tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 0, "last_activity_date": 1544593777, "last_edit_date": 1592644375, "creation_date": 1544593777, "answer_id": 53736791, "question_id": 53735771, "link": "https://stackoverflow.com/questions/53735771/table-which-has-been-dropped-before-create-migration-again/53736791#53736791", "title": "table which has been dropped before - create migration again", "body": "<p>It depends on how you dropped your table.</p>\n<p><strong>How Migration Works</strong></p>\n<p>Whenever migration is created, it has its own timestamp &amp; when you run <code>rake db:migrate</code>, it will run <code>up</code> method (create table in your case) &amp; store timestamp of that migration in <code>schema_migrations</code> table.</p>\n<p>You can check whether <strong>payments</strong> table present or not in your database by using following,</p>\n<pre><code>ActiveRecord::Base.connection.tables.include? 'payments'\n</code></pre>\n<p><em>case</em> - If you have dropped table not by rails migration (by console or external source), Then <code>schema_migrations</code> will not clear timestamp of migration which create <code>payments</code> table (running down method can clear timestamp). but adding new migration for creating <code>payments</code> table with new timestamp will not affect you.</p>\n<p>And if still it does not help, it all depends on what you have written in your 'create payment table' migration file, method invoked inside it must be <code>change</code> or <code>up</code> (additional info).</p>\n"}], "owner": {"reputation": 314, "user_id": 6637390, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/fDP1p.jpg?s=128&g=1", "display_name": "rail_engine", "link": "https://stackoverflow.com/users/6637390/rail-engine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1544593777, "creation_date": 1544586440, "question_id": 53735771, "link": "https://stackoverflow.com/questions/53735771/table-which-has-been-dropped-before-create-migration-again", "title": "table which has been dropped before - create migration again", "body": "<p>Question regarding migration:\nI had a table a few months ago called <strong>payment</strong>\nthen we wrote a migration and dropped it</p>\n\n<p>now I want that <strong>payment</strong> table again</p>\n\n<p>I generated a migration but when I migrate it actually drops and does not create <strong>payments</strong>.</p>\n\n<p>Please, can someone give me direction? TA</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1544583407, "post_id": 53734694, "comment_id": 94324097, "body": "You can&#39;t. It doesn&#39;t make sense. Your YAML file is equivalent, if valid, to one that only has the second instance of <code>Sweet_fruits</code>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1544583434, "post_id": 53734694, "comment_id": 94324099, "body": "Why did you think your question is related to rspec?"}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 1, "creation_date": 1544598159, "post_id": 53734694, "comment_id": 94328049, "body": "Sure you can but should you, probably not."}, {"owner": {"reputation": 693, "user_id": 4086794, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f35dcbd75a6c6509156cc3f908a413d8?s=128&d=identicon&r=PG&f=1", "display_name": "Chuchoo", "link": "https://stackoverflow.com/users/4086794/chuchoo"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1544624388, "post_id": 53734694, "comment_id": 94342403, "body": "@sawa you are right. completely not related to Rspec"}], "answers": [{"comments": [{"owner": {"reputation": 693, "user_id": 4086794, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f35dcbd75a6c6509156cc3f908a413d8?s=128&d=identicon&r=PG&f=1", "display_name": "Chuchoo", "link": "https://stackoverflow.com/users/4086794/chuchoo"}, "edited": false, "score": 0, "creation_date": 1544591452, "post_id": 53734781, "comment_id": 94325790, "body": "Thank you. Can you show me how to iterate over the array under Fruits?"}, {"owner": {"reputation": 351, "user_id": 3878329, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EHSxC.png?s=128&g=1", "display_name": "Peter Zhu", "link": "https://stackoverflow.com/users/3878329/peter-zhu"}, "reply_to_user": {"reputation": 693, "user_id": 4086794, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f35dcbd75a6c6509156cc3f908a413d8?s=128&d=identicon&r=PG&f=1", "display_name": "Chuchoo", "link": "https://stackoverflow.com/users/4086794/chuchoo"}, "edited": false, "score": 1, "creation_date": 1544626103, "post_id": 53734781, "comment_id": 94343450, "body": "@Chuchoo Here&#39;s how: <a href=\"https://stackoverflow.com/questions/22350738/iterate-a-yaml-array-with-ruby\" title=\"iterate a yaml array with ruby\">stackoverflow.com/questions/22350738/&hellip;</a>"}], "tags": [], "owner": {"reputation": 351, "user_id": 3878329, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/EHSxC.png?s=128&g=1", "display_name": "Peter Zhu", "link": "https://stackoverflow.com/users/3878329/peter-zhu"}, "is_accepted": false, "score": 3, "last_activity_date": 1544577866, "creation_date": 1544577866, "answer_id": 53734781, "question_id": 53734694, "link": "https://stackoverflow.com/questions/53734694/read-values-under-duplicate-key-in-yaml/53734781#53734781", "title": "Read values under duplicate key in YAML", "body": "<p>Your YAML is illegal per the <a href=\"https://yaml.org/spec/1.2/spec.html#id2764044\" rel=\"nofollow noreferrer\">YAML spec</a> (\"The content of a mapping node is an unordered set of key: value node pairs, with the restriction that each of the keys is <strong>unique</strong>.\") You could do this instead:</p>\n\n<pre><code>Fruits:\n  - Sweet_fruits:\n     apple: 1\n     banana: 4\n     pineapple: 10\n  - Sweet_fruits:\n     apple: 3\n     banana: 5\n     mango: 6\n</code></pre>\n\n<p>and iterate over the array under <code>Fruits</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 693, "user_id": 4086794, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f35dcbd75a6c6509156cc3f908a413d8?s=128&d=identicon&r=PG&f=1", "display_name": "Chuchoo", "link": "https://stackoverflow.com/users/4086794/chuchoo"}, "is_accepted": true, "score": -1, "last_activity_date": 1544759548, "creation_date": 1544759548, "answer_id": 53773286, "question_id": 53734694, "link": "https://stackoverflow.com/questions/53734694/read-values-under-duplicate-key-in-yaml/53773286#53773286", "title": "Read values under duplicate key in YAML", "body": "<p>This is how you get all the <code>Sweet_fruits</code> items in an array. You first declare items_array as an empty array variable then iterate over <code>Sweet_fruits</code>.</p>\n\n<pre><code>items_array = []\n Fruits['Sweet_fruits'].each do |items|\n   items_array &lt;&lt; items\n end\n</code></pre>\n"}], "owner": {"reputation": 693, "user_id": 4086794, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f35dcbd75a6c6509156cc3f908a413d8?s=128&d=identicon&r=PG&f=1", "display_name": "Chuchoo", "link": "https://stackoverflow.com/users/4086794/chuchoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 878, "favorite_count": 0, "accepted_answer_id": 53773286, "answer_count": 2, "score": -2, "last_activity_date": 1544759548, "creation_date": 1544577193, "last_edit_date": 1544583446, "question_id": 53734694, "link": "https://stackoverflow.com/questions/53734694/read-values-under-duplicate-key-in-yaml", "title": "Read values under duplicate key in YAML", "body": "<p>In the following yaml file, how do I read all items under first <code>Sweet_fruits</code> and then subsequently items under second <code>Sweet_fruits</code> using some kind of loop?</p>\n\n<pre><code>Fruits:\n  Sweet_fruits:\n   apple: 1\n   banana: 4\n   pineapple: 10\n  Sweet_fruits:\n   apple: 3\n   banana: 5\n   mango: 6\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1544572746, "post_id": 53734014, "comment_id": 94322014, "body": "Are you sure you&#39;re loading the fixtures, at least for users?"}, {"owner": {"reputation": 415, "user_id": 5184474, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44b3b92a2676d760184290640fec066c?s=128&d=identicon&r=PG", "display_name": "in43sh", "link": "https://stackoverflow.com/users/5184474/in43sh"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1544572757, "post_id": 53734014, "comment_id": 94322017, "body": "@SebastianPalma thank you, I just added it"}, {"owner": {"reputation": 415, "user_id": 5184474, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44b3b92a2676d760184290640fec066c?s=128&d=identicon&r=PG", "display_name": "in43sh", "link": "https://stackoverflow.com/users/5184474/in43sh"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1544572830, "post_id": 53734014, "comment_id": 94322033, "body": "@SebastianPalma no, I&#39;m not sure, how would I check it?"}, {"owner": {"reputation": 5883, "user_id": 1422070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/2xK0E.jpg?s=128&g=1", "display_name": "edwardmp", "link": "https://stackoverflow.com/users/1422070/edwardmp"}, "edited": false, "score": 1, "creation_date": 1544572930, "post_id": 53734014, "comment_id": 94322063, "body": "Have you defined user fixtuers in test/fixtures/users.yml? If so, does your <code>test_helper.rb</code> have a line <code>fixtures :all</code> in the body of the <code>ActiveSupport::TestCase</code> class?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1544574478, "post_id": 53734014, "comment_id": 94322390, "body": "If you&#39;re missing a <code>test&#47;fixtures&#47;users.yml</code> file this might not know how to load your dummy users."}, {"owner": {"reputation": 415, "user_id": 5184474, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44b3b92a2676d760184290640fec066c?s=128&d=identicon&r=PG", "display_name": "in43sh", "link": "https://stackoverflow.com/users/5184474/in43sh"}, "reply_to_user": {"reputation": 5883, "user_id": 1422070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/2xK0E.jpg?s=128&g=1", "display_name": "edwardmp", "link": "https://stackoverflow.com/users/1422070/edwardmp"}, "edited": false, "score": 0, "creation_date": 1544574874, "post_id": 53734014, "comment_id": 94322458, "body": "@edwardmp I do not have users.yml at all because it was not listed in the instructions. relationships.yml is empty, so what should I put there?"}], "answers": [{"tags": [], "owner": {"reputation": 5883, "user_id": 1422070, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/2xK0E.jpg?s=128&g=1", "display_name": "edwardmp", "link": "https://stackoverflow.com/users/1422070/edwardmp"}, "is_accepted": true, "score": 2, "last_activity_date": 1544615063, "creation_date": 1544615063, "answer_id": 53742320, "question_id": 53734014, "link": "https://stackoverflow.com/questions/53734014/michael-hartls-rails-tutorial-chapter-12-undefined-method-users/53742320#53742320", "title": "Michael Hartl&#39;s Rails tutorial chapter 12 \u2014 undefined method `users&#39;", "body": "<p>You need to create and put some fixtures in <code>test/fixtures/users.yml</code>.</p>\n\n<p>Example (you probably need to adapt it to your own database design):</p>\n\n<pre><code>michael:\n  email: \"user_1@example.com\"\n  uid: \"user_1@example.com\"\n  encrypted_password: &lt;%= Devise::Encryptor.digest(User, 'password') %&gt;\n</code></pre>\n\n<p>This fixture would now be accesible in your test as <code>users(:michael)</code>.\nCheck the <a href=\"https://guides.rubyonrails.org/testing.html#the-low-down-on-fixtures\" rel=\"nofollow noreferrer\">Rails docs</a> for more info.</p>\n"}], "owner": {"reputation": 415, "user_id": 5184474, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/44b3b92a2676d760184290640fec066c?s=128&d=identicon&r=PG", "display_name": "in43sh", "link": "https://stackoverflow.com/users/5184474/in43sh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 53742320, "answer_count": 1, "score": 0, "last_activity_date": 1544615063, "creation_date": 1544571592, "last_edit_date": 1544572710, "question_id": 53734014, "link": "https://stackoverflow.com/questions/53734014/michael-hartls-rails-tutorial-chapter-12-undefined-method-users", "title": "Michael Hartl&#39;s Rails tutorial chapter 12 \u2014 undefined method `users&#39;", "body": "<p>I'm working on Michal Hartl's tutorial and I'm getting error after first test.</p>\n\n<pre><code>E\n\nError:\nRelationshipTest#test_should_be_valid:\nNoMethodError: undefined method `users' for #&lt;RelationshipTest:0x00007feb7da11100&gt;\n    test/models/relationship_test.rb:6:in `setup'\n\n\nbin/rails test test/models/relationship_test.rb:10\n\nE\n\nError:\nRelationshipTest#test_should_require_a_followed_id:\nNoMethodError: undefined method `users' for #&lt;RelationshipTest:0x00007feb7dadf2a8&gt;\n    test/models/relationship_test.rb:6:in `setup'\n\n\nbin/rails test test/models/relationship_test.rb:19\n\nE\n\nError:\nRelationshipTest#test_should_require_a_follower_id:\nNoMethodError: undefined method `users' for #&lt;RelationshipTest:0x00007feb7e8d04e8&gt;\n    test/models/relationship_test.rb:6:in `setup'\n\n\nbin/rails test test/models/relationship_test.rb:14\n</code></pre>\n\n<p>Here is my relationship_test.rb:</p>\n\n<pre><code>require 'test_helper'\n\nclass RelationshipTest &lt; ActiveSupport::TestCase\n\n  def setup\n    @relationship = Relationship.new(follower_id: users(:michael).id,\n                                    followed_id: users(:archer).id)\n  end\n\n  test \"should be valid\" do\n    assert @relationship.valid?\n  end\n\n  test \"should require a follower_id\" do\n    @relationship.follower_id = nil\n    assert_not @relationship.valid?\n  end\n\n  test \"should require a followed_id\" do\n    @relationship.followed_id = nil\n    assert_not @relationship.valid?\n  end\nend\n</code></pre>\n\n<p>I'm really confused by error, so any help would be appreciated. I've tried to search other answers, but couldn't find anything on this.</p>\n"}, {"tags": ["ruby", "inheritance", "multiple-inheritance"], "answers": [{"comments": [{"owner": {"reputation": 88, "user_id": 9224771, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hIgAazMKVHM/AAAAAAAAAAI/AAAAAAAABgs/DDcZKnVaud8/photo.jpg?sz=128", "display_name": "Pablo Cordero", "link": "https://stackoverflow.com/users/9224771/pablo-cordero"}, "edited": false, "score": 0, "creation_date": 1544574910, "post_id": 53734279, "comment_id": 94322467, "body": "Yes, you are right!. I use copia because in the previous sesion of the project, we made other object which need a copy constructor and I thought that we had to do in the same way. Thank you very much!"}], "tags": [], "owner": {"reputation": 3976, "user_id": 1210165, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f674db9036f7245292bb87295431e31?s=128&d=identicon&r=PG", "display_name": "evanbikes", "link": "https://stackoverflow.com/users/1210165/evanbikes"}, "is_accepted": true, "score": 0, "last_activity_date": 1544573442, "creation_date": 1544573442, "answer_id": 53734279, "question_id": 53734001, "link": "https://stackoverflow.com/questions/53734001/problem-with-inheritance-nomethoderror-undefined-method/53734279#53734279", "title": "Problem with inheritance. NoMethodError: undefined method", "body": "<p>In your <code>copia</code> method, you are returning <code>self</code>, but that is a class method, so <code>self</code> refers to the class itself. </p>\n\n<p>Instead, you want to return the <em>instance</em> of the class. I haven't seen inheritance used in this way exactly, but I would guess that when you call <code>super(casilla)</code>, it calls the top-level <code>copia</code> method which calls <code>new</code> inside the Casilla class. So you would end up with a Casilla instance.</p>\n\n<p>I would remove all the super calls from each <code>copia</code> method (and any other class methods) to get things working and then DRY (remove duplications) it up afterwards.</p>\n"}], "owner": {"reputation": 88, "user_id": 9224771, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-hIgAazMKVHM/AAAAAAAAAAI/AAAAAAAABgs/DDcZKnVaud8/photo.jpg?sz=128", "display_name": "Pablo Cordero", "link": "https://stackoverflow.com/users/9224771/pablo-cordero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 312, "favorite_count": 0, "accepted_answer_id": 53734279, "answer_count": 1, "score": 0, "last_activity_date": 1544573442, "creation_date": 1544571460, "question_id": 53734001, "link": "https://stackoverflow.com/questions/53734001/problem-with-inheritance-nomethoderror-undefined-method", "title": "Problem with inheritance. NoMethodError: undefined method", "body": "<p>I'm making a university project. The project is about a game (like a monopoly). This week, we have studied inheritance and now, we have to use in the project. I have some problems with the children class constructors.</p>\n\n<p>I have this parent class:</p>\n\n<pre><code>class Casilla\n    attr_reader :numeroCasilla\n    attr_accessor :precioCompra\n\n    def initialize(numCas, coste)\n      @numeroCasilla = numCas\n      @precioCompra = coste\n    end\n\n    def self.copia(casilla)\n      self.new(casilla.numeroCasilla, casilla.precioCompra)\n    end\n\n    # Dejamos este m\u00e9todo ya que no podemos modificar precioCompra desde calle\n    def setTitulo(ttl)\n      @precioCompra = ttl.precioCompra\n    end\n\n    def soyEdificable; end\n    def tengoPropietario; end\n\n    private :setTitulo\n  end\n</code></pre>\n\n<p>This is one child class:</p>\n\n<pre><code>class Calle &lt; Casilla\n        attr_reader :titulo\n        attr_reader :tipo\n\n      # def initialize(casilla, ttl)\n      #     copia(casilla,ttl)\n      # end\n\n        def self.copia(casilla,ttl)\n            super(casilla)\n            @titulo = ttl\n            @tipo = TipoCasilla::CALLE\n\n            self\n        end\n\n        def soyEdificable\n            salida = true\n            salida\n        end\n\n        def tengoPropietario\n            salida = @titulo.tengoPropietario();\n            salida\n        end\n\n        def setTitulo(ttl)\n            @titulo = ttl\n            super(ttl)\n        end\n\n        def propietarioEncarcelado\n            @titulo.propietarioEncarcelado\n        end\n\n        def asignarPropietario(jugador)\n            @titulo.propietario = jugador;\n            @titulo\n        end\n\n        def pagarAlquiler\n            @titulo.pagarAlquiler\n        end\n\n        private :setTitulo\n    end\n</code></pre>\n\n<p>The last child class:</p>\n\n<pre><code>class OtraCasilla &lt; Casilla\n        attr_reader :tipo\n\n      # def initialize(casilla, tp)\n      #     copia(casilla)\n      #     @tipo = tp\n      # end\n\n        def self.copia(casilla, tipo)\n            super(casilla)\n            @tipo = tipo\n\n            return self\n        end\n\n        def soyEdificable\n            salida = false\n            salida\n        end\n\n        def tengoPropietario\n            salida = false\n            salida\n        end \n\n        def to_s\n          puts super\n          puts \" \\n Tipo: #{@tipo} \\n\"\n        end\n    end\n</code></pre>\n\n<p>The parent class has two diferent ways to appear, like a \"Calle\" with specifics variable or other diferent forms (with same variables). TipoSorpresa is a enum with types of \"Casilla\". \nThe problem is with the constructors. In other class when I want to initialize a Calle object or otraCasilla object, I use </p>\n\n<pre><code>Calle.copia(\u00b7\u00b7\u00b7)\notraCasilla(\u00b7\u00b7\u00b7)\n</code></pre>\n\n<p>The run works fine, but when I want to access to a class element, the compiler say me that this element doesn't exist. This is the zone of the error:</p>\n\n<pre><code>@casillas = Array.new\n\n@casillas&lt;&lt; OtraCasilla.copia(Casilla.new(0, 0), TipoCasilla::SALIDA)\n@casillas&lt;&lt; Calle.copia(Casilla.new(1, 500), TituloPropiedad.new(\"Av. de Andaluc\u00eda\", 500, 50, 20, 150, 250))\nputs @casillas[1].titulo.nombre  # I put this to check if the constructor is good\n</code></pre>\n\n<p>In the last line, we have this error:</p>\n\n<pre><code>NoMethodError: undefined method `titulo' for ModeloQytetet::Calle:Class\n</code></pre>\n\n<p>Thank you for your time and sorry if my english is not good.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller", "slim-lang", "nanoc"], "comments": [{"owner": {"reputation": 779, "user_id": 833555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d99cf1bcf274d03c06d2f218f73cff0d?s=128&d=identicon&r=PG", "display_name": "Gregory Ostermayr", "link": "https://stackoverflow.com/users/833555/gregory-ostermayr"}, "edited": false, "score": 0, "creation_date": 1544568378, "post_id": 53733115, "comment_id": 94320762, "body": "does nanoc have the <code>content_for</code> method available?"}, {"owner": {"reputation": 53, "user_id": 6470765, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QvukGJcSrKM/AAAAAAAAAAI/AAAAAAAAAJQ/RanKxG_kEFo/photo.jpg?sz=128", "display_name": "Daniel Salazar", "link": "https://stackoverflow.com/users/6470765/daniel-salazar"}, "reply_to_user": {"reputation": 779, "user_id": 833555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d99cf1bcf274d03c06d2f218f73cff0d?s=128&d=identicon&r=PG", "display_name": "Gregory Ostermayr", "link": "https://stackoverflow.com/users/833555/gregory-ostermayr"}, "edited": false, "score": 0, "creation_date": 1544630157, "post_id": 53733115, "comment_id": 94345993, "body": "I had to use <code>include</code> instead of <code>content_for</code>. It is related to the version of nanoc you&#39;re using."}], "answers": [{"tags": [], "owner": {"reputation": 2181, "user_id": 108369, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/be732ee41fd3038aa98a0a7e7b7be081?s=128&d=identicon&r=PG", "display_name": "Denis Defreyne", "link": "https://stackoverflow.com/users/108369/denis-defreyne"}, "is_accepted": true, "score": 2, "last_activity_date": 1544599495, "creation_date": 1544599495, "answer_id": 53737968, "question_id": 53733115, "link": "https://stackoverflow.com/questions/53733115/pass-variable-from-content-to-layout-in-nanoc-using-slim/53737968#53737968", "title": "Pass variable from content to layout in Nanoc using Slim", "body": "<p>Nanoc provides a <a href=\"https://nanoc.ws/doc/reference/helpers/#capturing\" rel=\"nofollow noreferrer\">capturing helper</a>, which makes it possible to \u201ccapture\u201d content in one place and use it somewhere else.</p>\n\n<p>content/content.slim:</p>\n\n<pre><code>---\ntitle: Mister Tree\n---\n\np Hello there!\n\n- content_for :age\n  | hundreds of years\n</code></pre>\n\n<p>layout/layout.slim:</p>\n\n<pre><code>doctype html\nhtml\n  body\n    == yield\n    p I am #{@item[:title]} and am #{content_for(@item, :age)} years old\n</code></pre>\n\n<p>lib/default.rb (or any file in lib/ of your choosing):</p>\n\n<pre><code>use_helper Nanoc::Helpers::Capturing\n</code></pre>\n\n<p>This generates the following output:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;body&gt;\n    &lt;p&gt;Hello there!&lt;/p&gt;\n    &lt;p&gt;I am Mister Tree and am hundreds of years years old&lt;/p&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 6470765, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-QvukGJcSrKM/AAAAAAAAAAI/AAAAAAAAAJQ/RanKxG_kEFo/photo.jpg?sz=128", "display_name": "Daniel Salazar", "link": "https://stackoverflow.com/users/6470765/daniel-salazar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 53737968, "answer_count": 1, "score": 1, "last_activity_date": 1544599495, "creation_date": 1544566291, "last_edit_date": 1544567354, "question_id": 53733115, "link": "https://stackoverflow.com/questions/53733115/pass-variable-from-content-to-layout-in-nanoc-using-slim", "title": "Pass variable from content to layout in Nanoc using Slim", "body": "<p>I basically want to know the easiest way to pass a ruby variable from a content page to its layout using Nanoc and Slim. I am thinking of something like this:</p>\n\n<p>content/content.slim:</p>\n\n<pre><code>---\ntitle: Writeups\nlayout: /layout.slim\n---\n- age = get_age\n</code></pre>\n\n<p>layout/layout.slim:</p>\n\n<pre><code>doctype html\n  html\n    head\n      == yield\n      p I am #{@item[:title]} and am #{@item[:age]} years old\n</code></pre>\n\n<p>I know how to access values via frontmatter, but frontmatter values are fixed and what I want is a ruby function to find that value for me.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 0, "creation_date": 1544565310, "post_id": 53732742, "comment_id": 94319693, "body": "have you tried running a bundle install?"}, {"owner": {"reputation": 1396, "user_id": 3037732, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/041ad1d83789f334a781df81cbc05826?s=128&d=identicon&r=PG&f=1", "display_name": "jhilgeman", "link": "https://stackoverflow.com/users/3037732/jhilgeman"}, "reply_to_user": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 0, "creation_date": 1544565387, "post_id": 53732742, "comment_id": 94319721, "body": "No. I have no idea what that would do and where to run it from."}, {"owner": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 0, "creation_date": 1544565447, "post_id": 53732742, "comment_id": 94319743, "body": "go to the root of the application and run <code>bundle install</code> from the terminal. this will install all gems"}, {"owner": {"reputation": 1396, "user_id": 3037732, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/041ad1d83789f334a781df81cbc05826?s=128&d=identicon&r=PG&f=1", "display_name": "jhilgeman", "link": "https://stackoverflow.com/users/3037732/jhilgeman"}, "reply_to_user": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 0, "creation_date": 1544565685, "post_id": 53732742, "comment_id": 94319841, "body": "Okay, it showed a bunch of &quot;Using &lt;package&gt; (&lt;version&gt;) lines and then ended with a green message &quot;Your bundle is complete! It was installed into /srv/---REDACTED---/shared/bundle&quot; but I&#39;m getting the same error, even after a restart."}, {"owner": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 0, "creation_date": 1544565839, "post_id": 53732742, "comment_id": 94319890, "body": "check what active record version is installed, you can check on the output of bundle install, what version it was"}, {"owner": {"reputation": 1396, "user_id": 3037732, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/041ad1d83789f334a781df81cbc05826?s=128&d=identicon&r=PG&f=1", "display_name": "jhilgeman", "link": "https://stackoverflow.com/users/3037732/jhilgeman"}, "reply_to_user": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 0, "creation_date": 1544565990, "post_id": 53732742, "comment_id": 94319936, "body": "It&#39;s version 3.0.20"}, {"owner": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 0, "creation_date": 1544566090, "post_id": 53732742, "comment_id": 94319967, "body": "so it is the one where the file exist. maybe the permission changed for that folder/file or something. uninstall and reinstall the gem, to see if that change. do it without using sudo, to be sure"}, {"owner": {"reputation": 1396, "user_id": 3037732, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/041ad1d83789f334a781df81cbc05826?s=128&d=identicon&r=PG&f=1", "display_name": "jhilgeman", "link": "https://stackoverflow.com/users/3037732/jhilgeman"}, "reply_to_user": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "edited": false, "score": 0, "creation_date": 1544566423, "post_id": 53732742, "comment_id": 94320111, "body": "I don&#39;t know how to do that. The guy before me was the Ruby guru. It seems just like the application doesn&#39;t know where to look for the gem..."}, {"owner": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "reply_to_user": {"reputation": 1396, "user_id": 3037732, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/041ad1d83789f334a781df81cbc05826?s=128&d=identicon&r=PG&f=1", "display_name": "jhilgeman", "link": "https://stackoverflow.com/users/3037732/jhilgeman"}, "edited": false, "score": 0, "creation_date": 1544566552, "post_id": 53732742, "comment_id": 94320166, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/185094/discussion-between-xploshioon-and-jhilgeman\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 1396, "user_id": 3037732, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/041ad1d83789f334a781df81cbc05826?s=128&d=identicon&r=PG&f=1", "display_name": "jhilgeman", "link": "https://stackoverflow.com/users/3037732/jhilgeman"}, "is_accepted": false, "score": 0, "last_activity_date": 1544631690, "creation_date": 1544631690, "answer_id": 53747233, "question_id": 53732742, "link": "https://stackoverflow.com/questions/53732742/ruby-on-rails-application-no-such-file-to-load/53747233#53747233", "title": "Ruby on Rails application - No such file to load", "body": "<p>I ended up manually copying over the missing files from the \n/data/srv/---REDACTED---/shared/bundle/ruby/1.8/gems/activerecord-3.0.20/lib/active_record/locking/optimistic.rb</p>\n\n<p>...to the gem that was reporting the missing file, since it seemed to be the same gem and same version. </p>\n\n<p>Running the bundle install didn't change anything, for some reason.</p>\n"}], "owner": {"reputation": 1396, "user_id": 3037732, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/041ad1d83789f334a781df81cbc05826?s=128&d=identicon&r=PG&f=1", "display_name": "jhilgeman", "link": "https://stackoverflow.com/users/3037732/jhilgeman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544631690, "creation_date": 1544564489, "question_id": 53732742, "link": "https://stackoverflow.com/questions/53732742/ruby-on-rails-application-no-such-file-to-load", "title": "Ruby on Rails application - No such file to load", "body": "<p>I'm trying to bring up an old Ruby on Rails application from a crashed server, and when I try to access it via the browser, I get this screen:\n<a href=\"https://i.stack.imgur.com/djFdQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/djFdQ.png\" alt=\"enter image description here\"></a></p>\n\n<p>For copy-and-paste / searchability, here's the text:</p>\n\n<pre><code>Ruby on Rails application could not be loaded\n---------------------------------------------\nA source file that the application requires, is missing.\n\n    It is possible that you didn't upload your application files correctly. Please check whether all your application files are uploaded.\n    A required library may not installed. Please install all libraries that this application requires.\n\nFurther information about the error may have been written to the application's log file. Please check it in order to analyse the problem.\n\nError message:\n    no such file to load -- active_record/locking/optimistic\nException class:\n    LoadError\nApplication root:\n    /srv/---REDACTED---/current \nBacktrace:\n---the backtrace---\n</code></pre>\n\n<p>That first line mentioned in the backtrace is:</p>\n\n<pre><code>include Locking::Optimistic, Locking::Pessimistic\n</code></pre>\n\n<p>So it's looking for active_record/locking/optimistic, which I found in a variety of other locations:</p>\n\n<pre><code>/data/srv/---REDACTED---/shared/bundle/ruby/1.8/gems/activerecord-3.0.20/lib/active_record/locking/optimistic.rb\n/usr/lib/ruby/gems/1.8/gems/activerecord-3.0.20/lib/active_record/locking/optimistic.rb\n/var/lib/gems/1.8/gems/activerecord-3.0.20/lib/active_record/locking/optimistic.rb\n</code></pre>\n\n<p>My problem is that I have no idea how to tell Ruby where to go look for the files it thinks are missing. I am not a Ruby person and I don't know how Phusion Passenger runs things, but I know most languages have concepts of \"paths\" to search and I'm assuming I just need to set a path somewhere.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1544563861, "post_id": 53732607, "comment_id": 94319103, "body": "<code>name = ARGV[0]</code> because <code>ARGV</code> is an <code>Array</code> <a href=\"http://jnoconor.github.io/blog/2013/10/13/a-short-explanation-of-argv/\" rel=\"nofollow noreferrer\">jnoconor.github.io/blog/2013/10/13/a-short-explanation-of-ar&zwnj;&#8203;gv</a>"}, {"owner": {"reputation": 117, "user_id": 10631543, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nMZejGnZP88/AAAAAAAAAAI/AAAAAAAADQ8/XAutJzW1jzE/photo.jpg?sz=128", "display_name": "Robert Baker", "link": "https://stackoverflow.com/users/10631543/robert-baker"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1544563997, "post_id": 53732607, "comment_id": 94319165, "body": "That was it! Thank you very much!"}, {"owner": {"reputation": 209, "user_id": 342523, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/94c0b92f45663974a845bf55cd72b3b7?s=128&d=identicon&r=PG", "display_name": "Tom Hughes", "link": "https://stackoverflow.com/users/342523/tom-hughes"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1544630962, "post_id": 53732607, "comment_id": 94346496, "body": "@engineersmnky has the right answer, it should be promoted to an answer, not just a comment. In my experience this is a small-seeming thing that trips up a lot of folks..."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 209, "user_id": 342523, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/94c0b92f45663974a845bf55cd72b3b7?s=128&d=identicon&r=PG", "display_name": "Tom Hughes", "link": "https://stackoverflow.com/users/342523/tom-hughes"}, "edited": false, "score": 0, "creation_date": 1544650638, "post_id": 53732607, "comment_id": 94356120, "body": "@TomHughes then please feel free to write it up."}], "owner": {"reputation": 117, "user_id": 10631543, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nMZejGnZP88/AAAAAAAAAAI/AAAAAAAADQ8/XAutJzW1jzE/photo.jpg?sz=128", "display_name": "Robert Baker", "link": "https://stackoverflow.com/users/10631543/robert-baker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544564606, "creation_date": 1544563688, "last_edit_date": 1544564606, "question_id": 53732607, "link": "https://stackoverflow.com/questions/53732607/use-cl-var-to-perform-hash-lookup", "title": "use CL var to perform hash lookup", "body": "<p>Am trying to modify an exercise from a ruby lesson. Instead of hard coding a name in the script, I want to use it as a CL var and pass it to the script. </p>\n\n<p>I start the script with an arg of \"Mary\" <code>ruby hashes.rb Mary</code></p>\n\n<p>Here is the script </p>\n\n<pre><code>#!/usr/bin/ruby\n# Script Name - hashes.rb\nfavorite_pizza = {\n\"John\" =&gt; \"Pepperoni\",\n\"Tim\" =&gt; \"Mushroom\",\n\"Mary\" =&gt; \"Cheese\"\n}\nname=ARGV\nputs favorite_pizza[name]`\n</code></pre>\n\n<p>I get blank output when I run the script. If I add the line <code>puts name</code> to the script, I see the output <code>Mary</code>, so I know the var is being set correctly. But now mater how I write <code>puts favorite_pizza[???]</code>, I never get expected <code>Cheese</code> output. In the brackets I have tried <code>[name]</code> and <code>[ARGV]</code> and <code>[\"#{name}\"]</code> and <code>[\"#{ARGV}\"]</code> and every other thing I can think of, google no help. </p>\n\n<p>If I hard code it <code>puts favorite_pizza[\"Mary\"]</code> I get expected output <code>Cheese</code>. </p>\n\n<p>Thanks in advance. </p>\n"}, {"tags": ["ruby", "selenium", "automation", "capybara", "screenshot"], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 8538968, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IhJCqVHGPMA/AAAAAAAAAAI/AAAAAAABh_w/ZjN1g94kZBA/photo.jpg?sz=128", "display_name": "Syed Abbas", "link": "https://stackoverflow.com/users/8538968/syed-abbas"}, "edited": false, "score": 0, "creation_date": 1544617831, "post_id": 53732939, "comment_id": 94338696, "body": "Thanks Thomas, but if I use Capybara\u2019s save_screenshot, can I pass on an argument with a custom file name to save the screen shot by? I could not find anything about that in the doc."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 15, "user_id": 8538968, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IhJCqVHGPMA/AAAAAAAAAAI/AAAAAAABh_w/ZjN1g94kZBA/photo.jpg?sz=128", "display_name": "Syed Abbas", "link": "https://stackoverflow.com/users/8538968/syed-abbas"}, "edited": false, "score": 0, "creation_date": 1544634679, "post_id": 53732939, "comment_id": 94348524, "body": "@SyedAbbas The first parameter passed to <code>save_screenshot</code> is either the relative (to Capybara.save_path) or absolute location of where to save the image - <code>save_screenshot(&#39;blah&#47;image.png&#39;)</code> - relative to Capybara.save_path - <code>save_screenshot(&#39;&#47;blah&#47;image.png&#39;)</code> - absolute location"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 15, "user_id": 8538968, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IhJCqVHGPMA/AAAAAAAAAAI/AAAAAAABh_w/ZjN1g94kZBA/photo.jpg?sz=128", "display_name": "Syed Abbas", "link": "https://stackoverflow.com/users/8538968/syed-abbas"}, "edited": false, "score": 0, "creation_date": 1544665888, "post_id": 53732939, "comment_id": 94360589, "body": "@SyedAbbas You&#39;re welcome - don&#39;t forget to accept the answer (the checkmark) so the question gets marked as answered"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1544565483, "creation_date": 1544565483, "answer_id": 53732939, "question_id": 53732369, "link": "https://stackoverflow.com/questions/53732369/using-screenshot-and-open-image-method-from-capybara-screenshot-gem-i-want-to-b/53732939#53732939", "title": "Using screenshot_and_open_image method from capybara-screenshot gem; I want to be able to specify what file name to save by", "body": "<p>You don't need the capybara-screenshot gem for that, just use Capybaras <code>save_screenshot</code> - <a href=\"https://www.rubydoc.info/github/teamcapybara/capybara/Capybara/Session#save_screenshot-instance_method\" rel=\"nofollow noreferrer\">https://www.rubydoc.info/github/teamcapybara/capybara/Capybara/Session#save_screenshot-instance_method</a></p>\n"}], "owner": {"reputation": 15, "user_id": 8538968, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-IhJCqVHGPMA/AAAAAAAAAAI/AAAAAAABh_w/ZjN1g94kZBA/photo.jpg?sz=128", "display_name": "Syed Abbas", "link": "https://stackoverflow.com/users/8538968/syed-abbas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 482, "favorite_count": 0, "accepted_answer_id": 53732939, "answer_count": 1, "score": 1, "last_activity_date": 1544565483, "creation_date": 1544562494, "last_edit_date": 1544563960, "question_id": 53732369, "link": "https://stackoverflow.com/questions/53732369/using-screenshot-and-open-image-method-from-capybara-screenshot-gem-i-want-to-b", "title": "Using screenshot_and_open_image method from capybara-screenshot gem; I want to be able to specify what file name to save by", "body": "<p>So in my spec,  I'm using the screenshot_and_open_image from from capybara-screenshot gem to capture image, however I want to also be able to tell the screenshot_and_open_image method what file name to save the screenshot by, and also not have it open the image afterwards. How can I do that ? If not possible with this gem, are there recommendations for other screenshot gems I can use to achieve this?</p>\n\n<p>When reviewing <a href=\"https://github.com/mattheworiordan/capybara-screenshot\" rel=\"nofollow noreferrer\">https://github.com/mattheworiordan/capybara-screenshot</a> it was not very clear to me how I can do that. Any help would be appreciated. </p>\n"}, {"tags": ["ruby", "shell", "prompt", "readline"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1544558395, "post_id": 53731212, "comment_id": 94316677, "body": "You can pass arguments through the <code>.()</code> method call."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 3, "creation_date": 1544558441, "post_id": 53731212, "comment_id": 94316701, "body": "Might want to build a true CLI instead using something like <a href=\"https://github.com/erikhuda/thor\" rel=\"nofollow noreferrer\"><code>thor</code></a>, <a href=\"https://github.com/leejarvis/slop\" rel=\"nofollow noreferrer\"><code>slop</code></a> , <a href=\"https://github.com/commander-rb/commander\" rel=\"nofollow noreferrer\"><code>commander</code></a> and <a href=\"https://lab.hookops.com/ruby-cli-gems.html\" rel=\"nofollow noreferrer\">many more</a>"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1544561969, "post_id": 53731212, "comment_id": 94318285, "body": "As said above, there are entire frameworks written around CLIs in ruby - this will likely make your life much easier than trying to reinvent the wheel! But if you really want to build your own (or to have full control of how the entire application works), the fundamental approach - in many languages, including ruby - is to use <code>ARGV</code>."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1544562068, "post_id": 53731212, "comment_id": 94318326, "body": "Ruby also provides <a href=\"https://ruby-doc.org/core/ARGF.html\" rel=\"nofollow noreferrer\"><code>ARGF</code></a>, which also handles streaming input. Also, for some slightly more advanced out-of-the-box tooling, there is a library called <a href=\"https://ruby-doc.org/stdlib/libdoc/optparse/rdoc/OptionParser.html\" rel=\"nofollow noreferrer\"><code>optparse</code></a> in ruby&#39;s standard library."}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1544601372, "post_id": 53731212, "comment_id": 94329339, "body": "I&#39;ve written a simple shell like this in ruby, using readline, it&#39;s at <a href=\"https://github.com/kontena/kontena-plugin-shell\" rel=\"nofollow noreferrer\">github.com/kontena/kontena-plugin-shell</a>"}, {"owner": {"reputation": 1, "user_id": 10777496, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Xm6Z-NaHFkQ/AAAAAAAAAAI/AAAAAAAACPw/mVp6XgNl9J4/photo.jpg?sz=128", "display_name": "A G", "link": "https://stackoverflow.com/users/10777496/a-g"}, "edited": false, "score": 0, "creation_date": 1544605979, "post_id": 53731212, "comment_id": 94331651, "body": "Thanks all for the replies. I&#39;ve quickly looked at <b>thor</b> documentation but I&#39;ve only found a way of passing args on calling (something like <code>my_program -args1 -args2</code> ), but I haven&#39;t found a way to create a prompt that accept commands until user exit (to give you an idea, something like the <i>msfconsole</i> of metasploit). Did I miss something?"}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1544562544, "creation_date": 1544562544, "answer_id": 53732380, "question_id": 53731212, "link": "https://stackoverflow.com/questions/53731212/pass-input-parameters-to-ruby-written-shell/53732380#53732380", "title": "Pass input parameters to ruby-written shell?", "body": "<p>While that might work if you wrangle it enough, the easy way is this:</p>\n\n<pre><code>hash = {\n  'command_1' =&gt; :method_1,\n  'command_2' =&gt; :method_2\n}\n\nsend(hash[input.to_s])\n</code></pre>\n\n<p>The <code>send</code> method allows dynamic dispatch which is way easier than trying to deal with <code>method</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 10777496, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Xm6Z-NaHFkQ/AAAAAAAAAAI/AAAAAAAACPw/mVp6XgNl9J4/photo.jpg?sz=128", "display_name": "A G", "link": "https://stackoverflow.com/users/10777496/a-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544562544, "creation_date": 1544557148, "last_edit_date": 1544562455, "question_id": 53731212, "link": "https://stackoverflow.com/questions/53731212/pass-input-parameters-to-ruby-written-shell", "title": "Pass input parameters to ruby-written shell?", "body": "<p>I'm trying to write a shell in Ruby (using <code>readline</code>), implementing some custom commands. To create the correspondence between given input and methods that are defined in an external module I'm using an hash like this</p>\n\n<pre><code>hash = {\n  'command_1' =&gt; method(:method_1),\n  'command_2' =&gt; method(:method_2)\n}\n</code></pre>\n\n<p>And once I got the user input I pass it to the hash calling the method associated with the command-key</p>\n\n<pre><code>hash[input.to_s].()\n</code></pre>\n\n<p>My questions are: how can I handle variants of the same command? (e.g. for the <code>help</code> command give different output depending if a flag is given, something like <code>help -command_1</code>)\n<br>\nHow can I pass parameters to methods in the hash? (e.g. pass to an <code>open</code> command the file to be opened like <code>open file_name</code>)</p>\n\n<p>Thanks to all in advance.</p>\n"}, {"tags": ["ruby", "selenium"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1544553879, "post_id": 53730394, "comment_id": 94314592, "body": "what do <code>cause</code> and <code>message</code> return? You might be able to access that information from <code>cause</code> but most like you will have to parse the message string since  <code>Selenium::WebDriver::Error::UnknownError</code> is just a <code>StandardError</code> nothing special appears to be retained"}, {"owner": {"reputation": 1880, "user_id": 3574603, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/71a7b92124991652bf4dd64a9c50a9ca?s=128&d=identicon&r=PG&f=1", "display_name": "user3574603", "link": "https://stackoverflow.com/users/3574603/user3574603"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1544555305, "post_id": 53730394, "comment_id": 94315260, "body": "<code>cause</code> returns nil and <code>message</code> returns: <code>&quot;unknown error: unhandled inspector error: {\\&quot;code\\&quot;:-32000,\\&quot;message\\&quot;:\\&quot;Cannot navigate to invalid URL\\&quot;}\\n  (Session info: headless chrome=71.0.3578.80)\\n  (Driver info: chromedriver=2.44.609545 (c2f88692e98ce7233d2df7c724465ecacfe74df5),platform=Mac OS X 10.13.1 x86_64)&quot;</code>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 3, "creation_date": 1544555964, "post_id": 53730394, "comment_id": 94315564, "body": "You could try <code>require &#39;json&#39;; JSON.parse(error.message[&#47;{.*}&#47;]) #=&gt; {&quot;code&quot;=&gt;-32000, &quot;message&quot;=&gt;&quot;Cannot navigate to invalid URL&quot;}</code>. Then use as a standard <code>Hash</code>; however I cannot guarantee every message looks like this so additional error handling could be required"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1544575575, "post_id": 53730394, "comment_id": 94322597, "body": "Hi, If you ready to use Ruby Selenium binding, then go for WATIR which is nice wrapper for Ruby Selenium binding."}], "owner": {"reputation": 1880, "user_id": 3574603, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/71a7b92124991652bf4dd64a9c50a9ca?s=128&d=identicon&r=PG&f=1", "display_name": "user3574603", "link": "https://stackoverflow.com/users/3574603/user3574603"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 233, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544553438, "creation_date": 1544553438, "question_id": 53730394, "link": "https://stackoverflow.com/questions/53730394/ruby-selenium-how-do-i-access-the-error-code-and-message-of-selenium-errors", "title": "Ruby/Selenium: How do I access the error code and message of Selenium errors?", "body": "<p>I've set up some code to intentionally fail:</p>\n\n<pre><code>begin\n  puts PageRatings.new(url: 'heckety').to_a\nrescue StandardError =&gt; error\n  binding.pry\nend\n</code></pre>\n\n<p>When I enter pry, I see that:</p>\n\n<pre><code>&gt; error.class\n=&gt; Selenium::WebDriver::Error::UnknownError\n</code></pre>\n\n<p>I can see that <code>error</code> contains a code and a message:</p>\n\n<pre><code>&gt; error\n=&gt; #&lt;Selenium::WebDriver::Error::UnknownError: unknown error: unhandled inspector error: {\"code\":-32000,\"message\":\"Cannot navigate to invalid URL\"}\n  (Session info: headless chrome=71.0.3578.80)\n  (Driver info: chromedriver=2.44.609545 (c2f88692e98ce7233d2df7c724465ecacfe74df5),platform=Mac OS X 10.13.1 x86_64)&gt;\n</code></pre>\n\n<p>But how do I access the values of the code and message? Running <code>ls pry</code> I see that the following methods are available:</p>\n\n<pre><code>Exception#methods: \n  ==  backtrace  backtrace_locations  cause  exception  full_message  inspect  message  respond_to?  set_backtrace  to_s\n</code></pre>\n\n<p>But none of those methods return or unable me to get the message or codes separately. Is there a particular way to get at error codes/messages in Ruby?</p>\n"}, {"tags": ["arrays", "ruby", "rxmp"], "comments": [{"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 4, "creation_date": 1544552327, "post_id": 53730075, "comment_id": 94313858, "body": "1.8.1 is <i>15</i> years old at this point, and not even the latest release of ruby 1.x, which itself end-of-lifed over 4 years ago.  Are you sure you want to be using 1.8.1? <a href=\"https://www.ruby-lang.org/en/news/2003/12/25/ruby-181-is-out/\" rel=\"nofollow noreferrer\">ruby-lang.org/en/news/2003/12/25/ruby-181-is-out</a> ,   <a href=\"https://www.ruby-lang.org/en/news/2014/07/01/eol-for-1-8-7-and-1-9-2/\" rel=\"nofollow noreferrer\">ruby-lang.org/en/news/2014/07/01/eol-for-1-8-7-and-1-9-2</a>"}, {"owner": {"reputation": 25, "user_id": 10777259, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6mWtXLs1Re8/AAAAAAAAAAI/AAAAAAAAAH8/xDTmffQYzYs/photo.jpg?sz=128", "display_name": "Akino", "link": "https://stackoverflow.com/users/10777259/akino"}, "reply_to_user": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1544552444, "post_id": 53730075, "comment_id": 94313912, "body": "I can&#39;t. I&#39;m using RPG Maker XP, which has default 1.8.1 version."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1544552456, "post_id": 53730075, "comment_id": 94313917, "body": "<code>txtlist[rand(txtlist.size)]</code> Docs for <a href=\"https://ruby-doc.org/core-1.8.6/Array.html\" rel=\"nofollow noreferrer\">1.8.6</a> best I could do"}, {"owner": {"reputation": 25, "user_id": 10777259, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6mWtXLs1Re8/AAAAAAAAAAI/AAAAAAAAAH8/xDTmffQYzYs/photo.jpg?sz=128", "display_name": "Akino", "link": "https://stackoverflow.com/users/10777259/akino"}, "edited": false, "score": 0, "creation_date": 1544553064, "post_id": 53730075, "comment_id": 94314227, "body": "&quot;Cannot convert Array into Integer&quot;"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1544553262, "post_id": 53730075, "comment_id": 94314325, "body": "You&#39;ll need to give a little more context as to where that error occurs because this should be fine. As a note you&#39;ll want to declare this as a constant ideally, <code>TXTLIST</code>."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1544553365, "post_id": 53730075, "comment_id": 94314367, "body": "@Akino <code>size</code> needs to be inside the parens <code>rand(txtlist.size)</code> (<b>not outside</b> <code>rand(txtlist).size</code>) also why not try RPG Maker VX instead? It atleast runs on <code>1.9.3</code> which means you could use <code>txtlist.sample</code>."}, {"owner": {"reputation": 25, "user_id": 10777259, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6mWtXLs1Re8/AAAAAAAAAAI/AAAAAAAAAH8/xDTmffQYzYs/photo.jpg?sz=128", "display_name": "Akino", "link": "https://stackoverflow.com/users/10777259/akino"}, "edited": false, "score": 0, "creation_date": 1544554169, "post_id": 53730075, "comment_id": 94314723, "body": "Meh. I once bought RPG Maker XP because I wanted to make a translation for a game called Oneshot, so now I&#39;m here, using it."}, {"owner": {"reputation": 25, "user_id": 10777259, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6mWtXLs1Re8/AAAAAAAAAAI/AAAAAAAAAH8/xDTmffQYzYs/photo.jpg?sz=128", "display_name": "Akino", "link": "https://stackoverflow.com/users/10777259/akino"}, "edited": false, "score": 0, "creation_date": 1544554232, "post_id": 53730075, "comment_id": 94314752, "body": "..oh. now it works"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1544557082, "post_id": 53730075, "comment_id": 94316042, "body": "I am slightly amused that the selected answer to the 2010 question for which this question is a dup, which is a short and simple answer to a simple question, has so far garnered 1020 upvotes! Oh, to have lived in the days of the low-hanging fruit!"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1544557745, "post_id": 53730075, "comment_id": 94316366, "body": "@CarySwoveland more so amusing is that Answer was provided nearly 7 years after the <a href=\"https://www.ruby-lang.org/en/news/2003/12/25/ruby-181-is-out/\" rel=\"nofollow noreferrer\">Release of 1.8.1</a> that the OP is using. Granted this build predates SO by nearly 5 years :)"}], "owner": {"reputation": 25, "user_id": 10777259, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6mWtXLs1Re8/AAAAAAAAAAI/AAAAAAAAAH8/xDTmffQYzYs/photo.jpg?sz=128", "display_name": "Akino", "link": "https://stackoverflow.com/users/10777259/akino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "closed_date": 1544553371, "answer_count": 0, "score": 0, "last_activity_date": 1544553100, "creation_date": 1544552120, "last_edit_date": 1544553100, "question_id": 53730075, "link": "https://stackoverflow.com/questions/53730075/ruby-1-8-1-choosing-a-random-character-from-an-array", "closed_reason": "Duplicate", "title": "Ruby (1.8.1) -- choosing a random character from an array", "body": "<p>I'm trying to do something with coding in Ruby, but I am very new to programming.\nI want the script to choose a random character from this array:</p>\n\n<pre><code>txtlist = [\"\u0104\", \"\u0105\", \"\u0106\", \"\u0107\", \"\u0118\", \"\u0119\", \"\u0141\", \"\u0142\", \"\u0143\", \"\u0144\", \"\u00d3\", \"\u00f3\", \"\u015a\", \"\u015b\", \"\u0179\", \"\u017a\", \"\u017b\", \"\u017c\", \"\u023a\", \"\u2c65\", \"\u0182\", \"\u0183\", \"\u1e06\", \"\u1e07\", \"\u0187\", \"\u0188\", \"\u0255\", \"\u1d6d\", \"\u1d91\", \"\u0221\", \"\u1ec2\", \"\u1ec3\", \"\u0116\u0304\", \"\u0117\u0304\", \"\u1d6e\", \"\u01e4\", \"\u01e5\", \"\u0126\", \"\u0127\", \"\u012c\", \"\u012d\", \"\u0208\", \"\u0209\", \"\u0197\", \"\u0268\", \"\u1d84\", \"\u0234\", \"\u1d6f\", \"\u0220\", \"\u019e\", \"\u01fe\", \"\u01ff\", \"\u00a6\", \"\u1d73\", \"\u023e\", \"\u2c66\", \"\u1eee\", \"\u1eef\", \"\u1d8d\", \"\u0291\", \"\u0250\", \"\u0299\", \"\u0238\", \"\u025d\", \"\u025e\", \"\u0194\", \"\u0263\", \"\u01f6\", \"\u0195\", \"\u2c76\", \"\u0222\", \"\u0223\", \"\u0427\", \"\u0447\", \"\u00b6\", \"\u00a7\", \"\u00aa\", \"\u00bc\", \"\u00bd\", \"\u00be\"]\n</code></pre>\n\n<p>But I don't know how to do that.</p>\n\n<p>I couldn't find anything on internet (please note I'm barely even familiar with Ruby), so any help would be greatly appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "faker"], "comments": [{"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 2, "creation_date": 1544549782, "post_id": 53728951, "comment_id": 94312648, "body": "Did you run <code>bundle install</code> after changing Gemfile?"}, {"owner": {"reputation": 100, "user_id": 10463251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff958d5dc3d428d04f1cce2f80433712?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin W.", "link": "https://stackoverflow.com/users/10463251/kevin-w"}, "edited": false, "score": 0, "creation_date": 1544550584, "post_id": 53728951, "comment_id": 94313067, "body": "You might check your Gemfile and ensure the production group includes Faker."}, {"owner": {"reputation": 1905, "user_id": 232838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8342950f34a66d9ec7cfe10b33d5494c?s=128&d=identicon&r=PG", "display_name": "koffeinfrei", "link": "https://stackoverflow.com/users/232838/koffeinfrei"}, "edited": false, "score": 0, "creation_date": 1544552061, "post_id": 53728951, "comment_id": 94313719, "body": "Check if <code>bundle install</code> actually installed the gem in the <code>production</code> group. You may encounter something like this: <a href=\"https://stackoverflow.com/a/30802514/232838\">stackoverflow.com/a/30802514/232838</a>."}, {"owner": {"reputation": 2402, "user_id": 1842796, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c38057b059d9aaa8ed5a42b1762108c2?s=128&d=identicon&r=PG", "display_name": "crispychicken", "link": "https://stackoverflow.com/users/1842796/crispychicken"}, "edited": false, "score": 0, "creation_date": 1544552326, "post_id": 53728951, "comment_id": 94313857, "body": "Yes, I did run <code>bundle install</code>. How would I check if the gem is installed in production? I don&#39;t have a <code>.bundle&#47;config</code> file."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1544554345, "post_id": 53728951, "comment_id": 94314806, "body": "<code>uninitialized constant Faker</code>, but from which file does this error originate?"}, {"owner": {"reputation": 2402, "user_id": 1842796, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c38057b059d9aaa8ed5a42b1762108c2?s=128&d=identicon&r=PG", "display_name": "crispychicken", "link": "https://stackoverflow.com/users/1842796/crispychicken"}, "edited": false, "score": 0, "creation_date": 1544554773, "post_id": 53728951, "comment_id": 94315016, "body": "it&#39;s coming from <code>seeds.rb</code>"}, {"owner": {"reputation": 2812, "user_id": 3738542, "user_type": "registered", "profile_image": "https://graph.facebook.com/100002024985258/picture?type=large", "display_name": "oren", "link": "https://stackoverflow.com/users/3738542/oren"}, "edited": false, "score": 0, "creation_date": 1544554988, "post_id": 53728951, "comment_id": 94315119, "body": "@crispychicken check by \u2018gem list\u2019"}], "answers": [{"tags": [], "owner": {"reputation": 2402, "user_id": 1842796, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c38057b059d9aaa8ed5a42b1762108c2?s=128&d=identicon&r=PG", "display_name": "crispychicken", "link": "https://stackoverflow.com/users/1842796/crispychicken"}, "is_accepted": false, "score": 0, "last_activity_date": 1544555304, "creation_date": 1544555304, "answer_id": 53730809, "question_id": 53728951, "link": "https://stackoverflow.com/questions/53728951/unrecognized-constant-faker-in-production-mode/53730809#53730809", "title": "Unrecognized constant Faker in production mode", "body": "<p>I removed the <code>faker</code> gem completely from the <code>Gemfile</code> then made a <code>bundle install</code>. After that I added the gem back to the file and <code>bundle install</code> again. </p>\n\n<p>Now it is working. So the issue was, bundle didn't put it in production the first time I installed.</p>\n"}], "owner": {"reputation": 2402, "user_id": 1842796, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c38057b059d9aaa8ed5a42b1762108c2?s=128&d=identicon&r=PG", "display_name": "crispychicken", "link": "https://stackoverflow.com/users/1842796/crispychicken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 390, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1544555304, "creation_date": 1544547713, "last_edit_date": 1544549439, "question_id": 53728951, "link": "https://stackoverflow.com/questions/53728951/unrecognized-constant-faker-in-production-mode", "title": "Unrecognized constant Faker in production mode", "body": "<p>I'm using <code>seeds.rb</code> to populate my db on my dev server running in production mode.</p>\n\n<p>Inside the seeds file I'm using the Faker gem to generate random values. In development mode everything works fine. But if I try to seed in production mode I get an error that Faker is not recognized.</p>\n\n<p>Gemfile:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>group :production do\n   gem 'faker'\nend\n</code></pre>\n\n<p>Seeds.rb:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>require 'faker'\n\nuser = User.create(name: Faker::Name.name)\n</code></pre>\n\n<p>So if I run <code>rake db:seed RAILS_ENV=production</code> I get the error message: <code>NameError: uninitialized constant Faker</code>.</p>\n\n<p>Any advice?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "submit", "link-to"], "answers": [{"tags": [], "owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "is_accepted": true, "score": 1, "last_activity_date": 1544547265, "creation_date": 1544547265, "answer_id": 53728823, "question_id": 53728611, "link": "https://stackoverflow.com/questions/53728611/redirect-to-new-view-with-submit-tag-in-rails/53728823#53728823", "title": "Redirect to new view with submit_tag in Rails", "body": "<p>You can do:</p>\n\n<pre><code>&lt;% link_to some_path do %&gt;\n  &lt;%= submit_tag(\"Save Email\".upcase, name:\"email_change\",\"data-target\":\"email_change.submit\") %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The 'Rails' way to do this would probably be to wrap the redirect in some conditional logic in your controller action, especially if you're submitting data from a form</p>\n"}], "owner": {"reputation": 968, "user_id": 2898592, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/73e5b3a840f9b874ea5ecb89a281e6f7?s=128&d=identicon&r=PG&f=1", "display_name": "A.J", "link": "https://stackoverflow.com/users/2898592/a-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "accepted_answer_id": 53728823, "answer_count": 1, "score": 0, "last_activity_date": 1544547265, "creation_date": 1544546402, "question_id": 53728611, "link": "https://stackoverflow.com/questions/53728611/redirect-to-new-view-with-submit-tag-in-rails", "title": "Redirect to new view with submit_tag in Rails", "body": "<p>I have the following <code>submit_tag</code> button</p>\n\n<p><code>&lt;%= submit_tag(\"Save Email\".upcase, name:\"email_change\",\"data-target\":\"email_change.submit\") %&gt;</code></p>\n\n<p>I am trying to have it redirect to a new view, similar to what is done with using <code>link_to</code>. Is there a way to do something similar using the submit button?</p>\n"}, {"tags": ["ruby", "slim-lang"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1544542656, "post_id": 53727232, "comment_id": 94308487, "body": "Looks like you&#39;ve hit a bug or limitation in Slim. You could file a bug report, or work around it, but there&#39;s no real answer here. Neither <code>&#47;</code> or <code>#</code> will work."}, {"owner": {"reputation": 117, "user_id": 10457156, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AZw1gkCmwyE/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVloGcE4rtJ4TOUFh8qJl7DyKHIdQ/mo/photo.jpg?sz=128", "display_name": "Simon Jakobi", "link": "https://stackoverflow.com/users/10457156/simon-jakobi"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1544546340, "post_id": 53727232, "comment_id": 94310819, "body": "Looks like I came across a longstanding issue: <a href=\"https://github.com/slim-template/slim/issues/224\" rel=\"nofollow noreferrer\">github.com/slim-template/slim/issues/224</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1544546399, "post_id": 53727232, "comment_id": 94310868, "body": "Is it the trailing comma after the second <code>@date</code>?"}], "owner": {"reputation": 117, "user_id": 10457156, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-AZw1gkCmwyE/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DVloGcE4rtJ4TOUFh8qJl7DyKHIdQ/mo/photo.jpg?sz=128", "display_name": "Simon Jakobi", "link": "https://stackoverflow.com/users/10457156/simon-jakobi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1544542330, "creation_date": 1544541775, "last_edit_date": 1544542330, "question_id": 53727232, "link": "https://stackoverflow.com/questions/53727232/slim-comment-syntax-inside-method-calls", "title": "Slim: Comment syntax inside method calls", "body": "<p>I have a method call in my slim template that looks like</p>\n\n<pre><code>= concept(@table_cell, nil, { \\\n  date: @date,\n  month: @date,\n})\n</code></pre>\n\n<p>Now I'd like to add a comment at the end of the <code>month</code> line. What delimiter should I use? With either <code>/</code> or <code>#</code> or I get an error</p>\n\n<pre><code>Unknown line indicator\n    })\n    ^\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "yaml", "haml", "minitest"], "comments": [{"owner": {"reputation": 3590, "user_id": 1494245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50a2dcc33b58918f27664b7646d92b7?s=128&d=identicon&r=PG", "display_name": "Sean Huber", "link": "https://stackoverflow.com/users/1494245/sean-huber"}, "edited": false, "score": 0, "creation_date": 1544540066, "post_id": 53726570, "comment_id": 94306764, "body": "What kind of object does <code>users(:cscades)</code> return?"}, {"owner": {"reputation": 153, "user_id": 10724515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/275cb88602df18b9496c19c422973d86?s=128&d=identicon&r=PG&f=1", "display_name": "CertainlyNotAdrian", "link": "https://stackoverflow.com/users/10724515/certainlynotadrian"}, "reply_to_user": {"reputation": 3590, "user_id": 1494245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50a2dcc33b58918f27664b7646d92b7?s=128&d=identicon&r=PG", "display_name": "Sean Huber", "link": "https://stackoverflow.com/users/1494245/sean-huber"}, "edited": false, "score": 0, "creation_date": 1544540146, "post_id": 53726570, "comment_id": 94306818, "body": "a user fixture, I&#39;ll update my question now"}, {"owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 0, "creation_date": 1544540547, "post_id": 53726570, "comment_id": 94307089, "body": "You shouldn&#39;t be duplicating questions. I won&#39;t down vote/report any of them. But to keep the questions as cleaner as possible please do not repeat them."}, {"owner": {"reputation": 153, "user_id": 10724515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/275cb88602df18b9496c19c422973d86?s=128&d=identicon&r=PG&f=1", "display_name": "CertainlyNotAdrian", "link": "https://stackoverflow.com/users/10724515/certainlynotadrian"}, "reply_to_user": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 0, "creation_date": 1544540857, "post_id": 53726570, "comment_id": 94307307, "body": "@fanta apologies, the previous ver question was obtuse (due to lack of understanding on my part). This ver. of the question is much more focused with additional details and explanation"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1544543077, "post_id": 53726570, "comment_id": 94308755, "body": "How many tracks do you have? You&#39;re using the fixture <code>:one</code>, are there more? Try <code>puts Track.count</code> in your <code>setup</code> block."}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1544550017, "post_id": 53726570, "comment_id": 94312758, "body": "I think you have other tracks in fixtures without defined users"}], "owner": {"reputation": 153, "user_id": 10724515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/275cb88602df18b9496c19c422973d86?s=128&d=identicon&r=PG&f=1", "display_name": "CertainlyNotAdrian", "link": "https://stackoverflow.com/users/10724515/certainlynotadrian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 433, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1581309331, "creation_date": 1544539516, "last_edit_date": 1581309331, "question_id": 53726570, "link": "https://stackoverflow.com/questions/53726570/rails-5-how-to-resolve-nomethoderror-undefined-method-name-for-nilnilclass", "title": "Rails 5 how to resolve NoMethodError - undefined method `name&#39; for nil:NilClass that occurs during minitest only", "body": "<p>I'm trying to test my track_controller's index method and it keeps returning a <code>&lt;500 Internal Server Error&gt;</code>.</p>\n\n<p>A track is created by a user is associated with said user. So <code>@track.user.name</code> should return the user's name. Yet the error is indicating that the <code>user</code> returns <code>nil</code> despite me explicitly assigning the user, what gives?</p>\n\n<p>Test log:</p>\n\n<pre><code>-------------------------------------------\nTracksControllerTest: test_should_get_index\n-------------------------------------------\n  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? LIMIT ?[0m  [[\"id\", 701806347], [\"LIMIT\", 1]]\n  [1m[36mTrack Load (0.1ms)[0m  [1m[34mSELECT  \"tracks\".* FROM \"tracks\" WHERE \"tracks\".\"id\" = ? LIMIT ?[0m  [[\"id\", 980190962], [\"LIMIT\", 1]]\n  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m\n  [1m[36mTrack Update (0.3ms)[0m  [1m[33mUPDATE \"tracks\" SET \"user_id\" = ?, \"updated_at\" = ? WHERE \"tracks\".\"id\" = ?[0m  [[\"user_id\", 701806347], [\"updated_at\", \"2018-12-11 14:30:49.753966\"], [\"id\", 980190962]]\n  [1m[35m (0.1ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m\nStarted GET \"/\" for 127.0.0.1 at 2018-12-11 14:30:49 +0000\nProcessing by TracksController#index as HTML\n  [1m[35m (0.1ms)[0m  [1m[35mSAVEPOINT active_record_1[0m\n  [1m[36mCart Create (0.2ms)[0m  [1m[32mINSERT INTO \"carts\" (\"created_at\", \"updated_at\") VALUES (?, ?)[0m  [[\"created_at\", \"2018-12-11 14:30:49.856142\"], [\"updated_at\", \"2018-12-11 14:30:49.856142\"]]\n  [1m[35m (0.0ms)[0m  [1m[35mRELEASE SAVEPOINT active_record_1[0m\n  Rendering tracks/index.html.haml within layouts/application\n  [1m[36mTrack Load (0.2ms)[0m  [1m[34mSELECT \"tracks\".* FROM \"tracks\" ORDER BY created_at desc[0m\n  Rendered tracks/index.html.haml within layouts/application (23.1ms)\nCompleted 500 Internal Server Error in 51ms (ActiveRecord: 0.5ms)\n\nNoMethodError - undefined method `name' for nil:NilClass:\n  app/views/tracks/index.html.haml:20:in `block in _app_views_tracks_index_html_haml___68907435507065187_70307785248520'\n  app/views/tracks/index.html.haml:8:in `_app_views_tracks_index_html_haml___68907435507065187_70307785248520'\n  test/controllers/tracks_controller_test.rb:17:in `block in &lt;class:TracksControllerTest&gt;'\n</code></pre>\n\n<p>tracks_controller_test.rb:</p>\n\n<pre><code>require 'test_helper'\ninclude Warden::Test::Helpers\nclass TracksControllerTest &lt; ActionDispatch::IntegrationTest\n\n\n\n  setup do\n    @user = users(:cscades)\n    login_as(@user)\n    @track = tracks(:one) #need to sign in the users in order for tracks to be deleted as only track creators can delete them\n    @track.user = @user\n    @track.save!\n\n  end\n\n  test \"should get index\" do\n    get root_path # root path == tracks#index\n    assert_response :success\n  end\n</code></pre>\n\n<p>track_controller.rb:</p>\n\n<pre><code>class TracksController &lt; ApplicationController\n\n  skip_before_action :authenticate_user!, raise: false\n  before_action :set_track, only: [:show, :edit, :update, :destroy]\n  before_action :authenticate_user!, except: [:index, :show]\n\n  # GET /tracks\n  # GET /tracks.json\n  def index\n    @tracks = Track.all.order(\"created_at desc\")\n  end\n</code></pre>\n\n<p>index.html.haml (for tracks) error occurs on line indicated below:</p>\n\n<pre><code>- content_for :header do\n  %section.hero.is-warning\n    .hero-body\n      .container\n        %h1.title\n          Browse the newest Tracks\n.track-index-grid.pt4\n  - @tracks.each do |track|\n    .track.border-light\n      .track-thumb\n        -unless track.image_url(:thumb).nil?\n          =link_to image_tag(track.image_url(:thumb)), track\n        - if track.genre\n          .condition\n            %span.tag.is-dark\n              = track.genre\n      .pa3\n        %h3.fw7.f4.title= link_to track.name, track\n        %p.has-text-gray.fw7.pt9\n          Sold by #{link_to track.user.name, new_message_path(:recipient =&gt; track.user.email), :title =&gt; \"Send an email to #{track.user.name}\"} #ERROR OCCURS HERE\n        %p.has-text-grey\n          #{track.description}\n        %p.f3.fw6.has-text-right.pt2.price= number_to_currency(track.price)\n        - if track_artist(track)\n          = link_to 'Edit', edit_track_path(track), class: \"button is-small\"\n          = link_to 'Delete', track, method: :delete, data: { confirm: \"Are you sure ?\" }, class: \"button is-small\"\n</code></pre>\n\n<p>users.yml (user fixtures):</p>\n\n<pre><code>cscades:\n  name: Cscades\n  encrypted_password: &lt;%= Devise::Encryptor.digest(User,'password') %&gt;\n  email: cscadesbooking@gmail.com\n# column: value\n#\npolocardigan:\n  name: PoloCardigan\n  encrypted_password: &lt;%= Devise::Encryptor.digest(User,'password') %&gt;\n  email: cardiganbooking@gmail.com\n# column: value\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1544542739, "post_id": 53726307, "comment_id": 94308542, "body": "<code>Inner</code> is a class as proved by <code>Inner.class #=&gt; Class</code> and the documentation for <code>Struct</code> clearly states that this will be a subclass of <code>Struct</code>. I think this might have more to do with it <a href=\"https://ruby-doc.org/core-2.5.0/Module.html#method-i-module_eval\" rel=\"nofollow noreferrer\"><code>Module#module_eval</code></a> &quot;Evaluates the string or block in the context of mod, <b>except that when a block is given, constant/class variable lookup is not affected</b>. This can be used to add methods to a class....&quot;  Since <code>Struct</code> sub classes created with a block do so through <code>rb_mod_module_eval</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1544563759, "post_id": 53726307, "comment_id": 94319049, "body": "A small point: it is modules (including classes) that house constants."}], "tags": [], "owner": {"reputation": 3119, "user_id": 4842949, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0agpj31wtZ8/AAAAAAAAAAI/AAAAAAAAAAA/mSolbNN-zIY/photo.jpg?sz=128", "display_name": "Joseph Cho", "link": "https://stackoverflow.com/users/4842949/joseph-cho"}, "is_accepted": false, "score": 1, "last_activity_date": 1544541868, "last_edit_date": 1544541868, "creation_date": 1544538666, "answer_id": 53726307, "question_id": 53725741, "link": "https://stackoverflow.com/questions/53725741/ruby-syntax-for-defining-a-constant-inside-a-struct/53726307#53726307", "title": "Ruby: Syntax for defining a constant inside a Struct", "body": "<p>After a little digging I was able to figure this out. Here's a quote from a <a href=\"https://stackoverflow.com/questions/14260931/ruby-accessing-constants-from-inner-class\">similar question</a>:</p>\n\n<blockquote>\n  <p>Constants belong to classes, therefore constant resolution via the ::\n  operator only works with class objects.</p>\n</blockquote>\n\n<p>In your above example <code>Inner</code> is a constant not a class, so <code>Outer::Inner::CONST</code> won't work. If we redefine <code>Inner</code> as a class we see the expected results.</p>\n\n<pre><code>class Outer\n\n  class Inner\n    CONST = 'abce'\n    Deeper = Struct.new(:dummy) do\n      def fun\n        puts(dummy)\n      end\n    end\n  end\n\nend\n\nobj = Outer::Inner::Deeper.new(15)\nobj.fun\nputs(Outer::Inner::CONST)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 14, "last_activity_date": 1544544036, "creation_date": 1544544036, "answer_id": 53727917, "question_id": 53725741, "link": "https://stackoverflow.com/questions/53725741/ruby-syntax-for-defining-a-constant-inside-a-struct/53727917#53727917", "title": "Ruby: Syntax for defining a constant inside a Struct", "body": "<p>This happens because the constant is defined in the current <em>namespace</em>. The <code>class</code> and <code>module</code> keywords define namespaces, but <code>Struct.new</code> (just like <code>Class.new</code>) does not.</p>\n\n<p>In order to define the constant under the Struct's scope, you have to use <code>self::</code></p>\n\n<pre><code>class Outer\n  Inner = Struct.new(:dummy) do\n    self::CONST = 'abce'\n  end\nend\n\nOuter::Inner::CONST\n#=&gt; 'abce'\n\nOuter::CONST\n#=&gt; NameError uninitialized constant Outer::CONST\n</code></pre>\n"}], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 720, "favorite_count": 1, "accepted_answer_id": 53727917, "answer_count": 2, "score": 5, "last_activity_date": 1544563467, "creation_date": 1544536894, "last_edit_date": 1544563467, "question_id": 53725741, "link": "https://stackoverflow.com/questions/53725741/ruby-syntax-for-defining-a-constant-inside-a-struct", "title": "Ruby: Syntax for defining a constant inside a Struct", "body": "<p>Consider the following (correct) Ruby program:</p>\n\n<pre><code>class Outer\n\n  Inner = Struct.new(:dummy) do\n    CONST = 'abce'\n    def fun\n      puts(dummy)\n    end\n  end\n\nend\n\nobj = Outer::Inner.new(15)\nobj.fun\nputs(Outer::CONST)\n</code></pre>\n\n<p>Why do I have to write <code>Outer::CONST</code> instead of <code>Outer::Inner::CONST</code>? </p>\n\n<p>My understanding of the block passed to <code>Struct::new</code> was that <code>self</code> is bound to <code>Outer::Inner</code>, and indeed, we can see that the method (<code>fun</code>) is attached to the Inner class; but <code>CONST</code> obviously is not.</p>\n"}, {"tags": ["ruby", "github", "rubygems"], "comments": [{"owner": {"reputation": 14213, "user_id": 398863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CNtJ.png?s=128&g=1", "display_name": "Amit Patel", "link": "https://stackoverflow.com/users/398863/amit-patel"}, "edited": false, "score": 1, "creation_date": 1544537670, "post_id": 53725559, "comment_id": 94305316, "body": "Checkout <a href=\"https://help.github.com/articles/searching-code/#considerations-for-code-search\" rel=\"nofollow noreferrer\">help.github.com/articles/searching-code/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2024, "user_id": 5511315, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBuFb.png?s=128&g=1", "display_name": "noraj", "link": "https://stackoverflow.com/users/5511315/noraj"}, "is_accepted": false, "score": 0, "last_activity_date": 1544540722, "creation_date": 1544540722, "answer_id": 53726926, "question_id": 53725559, "link": "https://stackoverflow.com/questions/53725559/how-to-find-apps-on-github-that-use-a-specific-ruby-gem-contain-a-specific-lin/53726926#53726926", "title": "How to find apps on Github, that use a specific Ruby gem?/contain a specific line of code?", "body": "<p>A workaround is to:</p>\n\n<ol>\n<li>search for reverse dependencies on RubyGems (eg. for <a href=\"https://rubygems.org/gems/milia/reverse_dependencies\" rel=\"nofollow noreferrer\">milia</a>)</li>\n<li>find the list of projects consuming the gem</li>\n<li>check if each project are using a github repo (check github badge or home page on rubygems)</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 2050, "user_id": 5695646, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-nEigl1xsDV4/AAAAAAAAAAI/AAAAAAAAANE/WGykpWYiogM/photo.jpg?sz=128", "display_name": "Yshmarov", "link": "https://stackoverflow.com/users/5695646/yshmarov"}, "is_accepted": true, "score": 0, "last_activity_date": 1602754712, "creation_date": 1602754712, "answer_id": 64368774, "question_id": 53725559, "link": "https://stackoverflow.com/questions/53725559/how-to-find-apps-on-github-that-use-a-specific-ruby-gem-contain-a-specific-lin/64368774#64368774", "title": "How to find apps on Github, that use a specific Ruby gem?/contain a specific line of code?", "body": "<p>Ok, now it can easily be done in github by looking at <code>/network/dependencies</code> path like <a href=\"https://github.com/jekuno/milia/network/dependencies\" rel=\"nofollow noreferrer\">https://github.com/jekuno/milia/network/dependencies</a></p>\n"}], "owner": {"reputation": 2050, "user_id": 5695646, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-nEigl1xsDV4/AAAAAAAAAAI/AAAAAAAAANE/WGykpWYiogM/photo.jpg?sz=128", "display_name": "Yshmarov", "link": "https://stackoverflow.com/users/5695646/yshmarov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 64368774, "answer_count": 2, "score": 1, "last_activity_date": 1602754712, "creation_date": 1544536340, "last_edit_date": 1544544374, "question_id": 53725559, "link": "https://stackoverflow.com/questions/53725559/how-to-find-apps-on-github-that-use-a-specific-ruby-gem-contain-a-specific-lin", "title": "How to find apps on Github, that use a specific Ruby gem?/contain a specific line of code?", "body": "<p>I am trying to use a gem. Let's say, <code>gem \"milia\"</code>, and want to find other people that use it in their apps in order to benchmark. Is there a way to search for apps that have this line of code in their <code>Gemfile</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 1, "last_activity_date": 1544535791, "creation_date": 1544535791, "answer_id": 53725401, "question_id": 53725314, "link": "https://stackoverflow.com/questions/53725314/custom-validations-for-timestamp-rails/53725401#53725401", "title": "custom validations for timestamp rails", "body": "<p>You  can directly compare two timestamp objects like this,</p>\n\n<pre><code>  def end_date_after_start_date?\n    if unworked_period_to &lt; unworked_period_from\n       errors.add :unworked_period_to, \"Unworked period to should be greater than the unworked period from\"\n    end\n  end\n</code></pre>\n\n<p>No need to convert in any other data_type</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user10346789"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544535791, "creation_date": 1544535450, "question_id": 53725314, "link": "https://stackoverflow.com/questions/53725314/custom-validations-for-timestamp-rails", "title": "custom validations for timestamp rails", "body": "<p>I have a little problem. Anyone can answer how to right validate this case? Maybe need to convert the timestamp to integer, or in something else?</p>\n\n<h1>model: unworked_day.rb</h1>\n\n<pre><code>class UnworkedDay &lt; ApplicationRecord\n  validate :end_date_after_start_date?\n\n  def end_date_after_start_date?\n    if unworked_period_to.to_i &lt; unworked_period_from.to_i\n       errors.add :unworked_period_to, \"Unworked period to should be greater than the unworked period from\"\n    end\n  end\n</code></pre>\n\n<h1>migration</h1>\n\n<pre><code>  t.timestamp :unworked_period_from\n  t.timestamp :unworked_period_to\n</code></pre>\n"}, {"tags": ["ruby", "xml", "csv", "nokogiri"], "answers": [{"tags": [], "owner": {"reputation": 2024, "user_id": 5511315, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBuFb.png?s=128&g=1", "display_name": "noraj", "link": "https://stackoverflow.com/users/5511315/noraj"}, "is_accepted": false, "score": 0, "last_activity_date": 1544540907, "creation_date": 1544540907, "answer_id": 53726973, "question_id": 53724380, "link": "https://stackoverflow.com/questions/53724380/ruby-xml-to-csv-with-nokogiri/53726973#53726973", "title": "Ruby XML to CSV with nokogiri", "body": "<p>Just check some existing examples:</p>\n\n<ul>\n<li><a href=\"https://bits.ashleyblewer.com/blog/2016/09/21/lorena-parsing-xml-into-csv-with-ruby/\" rel=\"nofollow noreferrer\">https://bits.ashleyblewer.com/blog/2016/09/21/lorena-parsing-xml-into-csv-with-ruby/</a></li>\n<li><a href=\"https://gist.github.com/bxt/454bb3b6ad7d2fdba0a5b1efb9b45d86\" rel=\"nofollow noreferrer\">https://gist.github.com/bxt/454bb3b6ad7d2fdba0a5b1efb9b45d86</a></li>\n<li><a href=\"https://stackoverflow.com/questions/21852766/parse-xml-nodes-to-csv-with-ruby-nokogiri\">Parse XML nodes to CSV with Ruby/Nokogiri</a></li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 7005679, "user_type": "registered", "profile_image": "https://graph.facebook.com/1296668503701460/picture?type=large", "display_name": "Stasiek Zieli\u0144ski", "link": "https://stackoverflow.com/users/7005679/stasiek-zieli%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 443, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1544549716, "creation_date": 1544531796, "last_edit_date": 1544549716, "question_id": 53724380, "link": "https://stackoverflow.com/questions/53724380/ruby-xml-to-csv-with-nokogiri", "title": "Ruby XML to CSV with nokogiri", "body": "<p>I'm very new to ruby and to programming at all. I'm trying to export XML to CSV using Ruby and nokogiri. My code:</p>\n\n<pre><code>require 'csv'\nrequire 'nokogiri'\n\nfile = File.read('example.xml')\ndoc = Nokogiri::XML(file)\na = []\ncsv = CSV.open('output.csv', 'wb') \n\nCSV.open('output.csv', 'wb') do |csv|\n    csv &lt;&lt; doc.at('Start').search('*').map(&amp;:name)\n    doc.search('Start').each do |x|\n      csv &lt;&lt; x.search('*').map(&amp;:text)\n    end\n  end\n</code></pre>\n\n<p>XML I want to convert:</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;root&gt;\n    &lt;Start&gt;\n        &lt;Value1&gt;2018-10-15&lt;/Value1&gt;\n        &lt;Value2&gt;2018-11-17&lt;/Value2&gt;\n        &lt;Value3&gt;\n            &lt;ID type=\"Value3_ID\"&gt;XXX1&lt;/ID&gt;\n        &lt;/Value3&gt;\n        &lt;Value4&gt;\n            &lt;ID type=\"Value4_ID\"&gt;XXX2&lt;/ID&gt;\n        &lt;/Value4&gt;\n        &lt;Value5&gt;\n            &lt;ID type=\"Value5_ID\"&gt;XXX3&lt;/ID&gt;\n        &lt;/Value5&gt;\n        &lt;Value6.1&gt;\n            &lt;Value6.2&gt;\n                &lt;ID type=\"Value6.2_ID\"&gt;XXX4&lt;/ID&gt;\n            &lt;/Value6.2&gt;\n            &lt;Value6.3&gt;XXX5&lt;/Value6.3&gt;\n            &lt;Value6.4&gt;XXX6&lt;/Value6.4&gt;\n            &lt;Value6.5&gt;\n                &lt;ID type=\"Value6.5_ID\"&gt;XXX7&lt;/ID&gt;\n            &lt;/Value6.5&gt;\n            &lt;Value6.6&gt;XXX8&lt;/Value6.6&gt;\n            &lt;Value6.7&gt;XXX9&lt;/Value6.7&gt;\n        &lt;/Value6.1&gt;\n        &lt;Value6.1&gt;\n            &lt;Value6.2&gt;\n                &lt;ID type=\"Value6.2_ID\"&gt;XXX10&lt;/ID&gt;\n            &lt;/Value6.2&gt;\n            &lt;SValue6.3&gt;XXX11&lt;/SValue6.3&gt;\n            &lt;Value6.5&gt;\n                &lt;ID type=\"Value6.5_ID\"&gt;XXX12&lt;/ID&gt;\n            &lt;/Value6.5&gt;\n        &lt;/Value6.1&gt;\n    &lt;/Start&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>Sorry for very basic question. The most important thing for me is that the xml will be converted automatically cause I have a lot of different XMLs so I can't list all the nodes I need. \n+ it would be great to not have this empty nodes....</p>\n\n<p>Thanks!!</p>\n"}, {"tags": ["ruby", "rubygems", "zlib", "aix"], "comments": [{"owner": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "edited": false, "score": 0, "creation_date": 1544540515, "post_id": 53723621, "comment_id": 94307070, "body": "You should have a zlib-1.2.11 compiled from source."}, {"owner": {"reputation": 37, "user_id": 4209939, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_orBSJhNXAs/AAAAAAAAAAI/AAAAAAAAAEs/jT1kpGQZnpA/photo.jpg?sz=128", "display_name": "Paras Bothra", "link": "https://stackoverflow.com/users/4209939/paras-bothra"}, "reply_to_user": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "edited": false, "score": 0, "creation_date": 1544549530, "post_id": 53723621, "comment_id": 94312503, "body": "I have installed the same using rpm and getting the error. Even rpm -qa shows that zlib, gdbm and readlines are installed. Is it mandatory to compile zlib from source? I"}, {"owner": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "edited": false, "score": 0, "creation_date": 1544553488, "post_id": 53723621, "comment_id": 94314426, "body": "Well, I was wrong: turns out perzl does have a <code>libz-devel.rpm</code> package, so you don&#39;t have to install from source. <a href=\"http://www.perzl.org/aix/index.php?n=Main.Zlib\" rel=\"nofollow noreferrer\">perzl.org/aix/index.php?n=Main.Zlib</a>"}, {"owner": {"reputation": 37, "user_id": 4209939, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_orBSJhNXAs/AAAAAAAAAAI/AAAAAAAAAEs/jT1kpGQZnpA/photo.jpg?sz=128", "display_name": "Paras Bothra", "link": "https://stackoverflow.com/users/4209939/paras-bothra"}, "reply_to_user": {"reputation": 1339, "user_id": 2141064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c56d69ec8f5e469a8c6ca22d60271e9b?s=128&d=identicon&r=PG", "display_name": "Lorinczy Zsigmond", "link": "https://stackoverflow.com/users/2141064/lorinczy-zsigmond"}, "edited": false, "score": 0, "creation_date": 1544555239, "post_id": 53723621, "comment_id": 94315231, "body": "I had this installed before compiling ruby. But still got the error. Any other library/package that needs to be installed?"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 4209939, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_orBSJhNXAs/AAAAAAAAAAI/AAAAAAAAAEs/jT1kpGQZnpA/photo.jpg?sz=128", "display_name": "Paras Bothra", "link": "https://stackoverflow.com/users/4209939/paras-bothra"}, "edited": false, "score": 0, "creation_date": 1544608808, "post_id": 53731893, "comment_id": 94333420, "body": "Thank you @anothermh for the help. It finally worked and I was able to install ruby gems."}], "tags": [], "owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "is_accepted": true, "score": 2, "last_activity_date": 1544560193, "creation_date": 1544560193, "answer_id": 53731893, "question_id": 53723621, "link": "https://stackoverflow.com/questions/53723621/cannot-install-ruby-gems-on-aix-7-1-with-ruby-2-4-5/53731893#53731893", "title": "Cannot install ruby gems on AIX 7.1 with ruby 2.4.5", "body": "<p>Make sure you have installed the following RPM packages:</p>\n\n<ul>\n<li><code>zlib-devel</code></li>\n<li><code>readline-devel</code></li>\n<li><code>gdbm-devel</code></li>\n</ul>\n\n<p>Available version numbers and direct download links are available on the <a href=\"https://www.ibm.com/developerworks/aix/library/aix-toolbox/alpha.html\" rel=\"nofollow noreferrer\">AIX Toolbox site</a>.</p>\n\n<p>After installing the development packages recompile Ruby and it should correctly compile those libraries, then retry your <code>gem install</code> command.</p>\n"}], "owner": {"reputation": 37, "user_id": 4209939, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_orBSJhNXAs/AAAAAAAAAAI/AAAAAAAAAEs/jT1kpGQZnpA/photo.jpg?sz=128", "display_name": "Paras Bothra", "link": "https://stackoverflow.com/users/4209939/paras-bothra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 53731893, "answer_count": 1, "score": 1, "last_activity_date": 1544560193, "creation_date": 1544529075, "last_edit_date": 1544529390, "question_id": 53723621, "link": "https://stackoverflow.com/questions/53723621/cannot-install-ruby-gems-on-aix-7-1-with-ruby-2-4-5", "title": "Cannot install ruby gems on AIX 7.1 with ruby 2.4.5", "body": "<p>I just compiled ruby from source on AIX 7.1. However, the following errors got logged during the make.</p>\n\n<pre><code>*** Following extensions failed to configure:\n../../../ext/gdbm/extconf.rb:0: Failed to configure gdbm. It will not be installed.\n../../../ext/readline/extconf.rb:0: Failed to configure readline. It will not be installed.\n../../../ext/zlib/extconf.rb:0: Failed to configure zlib. It will not be installed.\n*** Fix the problems, then remove these directories and try again if you want.\n</code></pre>\n\n<p>Now, when i try to install gems using gem install cool.io-1.5.3.gem, it gives the below error:</p>\n\n<pre><code>ERROR:  Loading command: install (LoadError)\n        cannot load such file -- zlib\nERROR:  While executing gem ... (NoMethodError)\n    undefined method `invoke_with_build_args' for nil:NilClass\n</code></pre>\n\n<p>edit : gdbm, readline and zlib were all installed using rpm before compiling Ruby.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1544550633, "post_id": 53722856, "comment_id": 94313092, "body": "try <code>current_user.update!(country: &quot;&quot;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 1, "last_activity_date": 1544527895, "creation_date": 1544527895, "answer_id": 53723271, "question_id": 53722856, "link": "https://stackoverflow.com/questions/53722856/ruby-on-rails-update-attribute-is-not-updating/53723271#53723271", "title": "ruby on rails update_attribute is not updating", "body": "<p>I would guess that it IS updating the record in the <code>users</code> table, but note that it won't change the attribute automatically in the copy of the record in memory.</p>\n\n<p>Try this...</p>\n\n<pre><code>current_user.update_attribute(:country, '')\ncurrent_user.reload\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 5835440, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/10205568368144646/picture?type=large", "display_name": "Baurzhan Kozhaev", "link": "https://stackoverflow.com/users/5835440/baurzhan-kozhaev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1544527895, "creation_date": 1544526578, "question_id": 53722856, "link": "https://stackoverflow.com/questions/53722856/ruby-on-rails-update-attribute-is-not-updating", "title": "ruby on rails update_attribute is not updating", "body": "<p>I'm trying update information of a current_user by a following method:</p>\n\n<pre><code>current_user.update_attribute(:country, \"\")\n</code></pre>\n\n<p>but it's not updating anything.\nwhen I was doing the same in console everything was fine.\nPlease help me with this issue?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash", "symbols"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1544527147, "post_id": 53722187, "comment_id": 94299518, "body": "<i>&quot;units does a reference to a specified argument called units&quot;</i> \u2013 you can&#39;t really tell whether this is a keyword argument or a hash. Ruby 2.x transparently converts between them, so <code>foo(a: 1)</code> and <code>foo({a: 1})</code> are effectively the same. Ruby 3.x is going to have &quot;real&quot; keyword arguments."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1544543423, "post_id": 53722187, "comment_id": 94308997, "body": "The answers down below explain the symbol syntactic sugar. For the difference between when to use a string as key and when to use a symbol as key I recommend checking out <a href=\"https://stackoverflow.com/questions/16621073/when-to-use-symbols-instead-of-strings-in-ruby\"><i>When to use symbols instead of strings in Ruby?</i></a>."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1544527308, "post_id": 53722265, "comment_id": 94299610, "body": "Or maybe we are passing a keyword argument <code>units</code>, you&#39;ll never know ;-)"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1544527453, "post_id": 53722265, "comment_id": 94299693, "body": "You&#39;re right! Either an hash or a keyword argument :)"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 1, "last_activity_date": 1544524575, "creation_date": 1544524575, "answer_id": 53722265, "question_id": 53722187, "link": "https://stackoverflow.com/questions/53722187/confusion-between-hashes-and-symbols/53722265#53722265", "title": "Confusion between hashes and symbols", "body": "<pre><code>Geocode.configure(units: :km)\n</code></pre>\n\n<p>We are passing an hash to the <code>configure</code> method. This hash <code>{units: :km}</code>. Convenient syntax for <code>{:units =&gt; :km}</code>. So an hash with a key value pair with key symbol (<code>:units</code>) and value symbol (<code>:km</code>).</p>\n\n<pre><code>validates :home_type, presence: true\n</code></pre>\n\n<p>Here we are passing to the <code>validates</code> method a symbol <code>:home_type</code> and an hash, <code>{presence: true}</code>, or <code>{:presence =&gt; true</code>}. So the key is <code>:presence</code> symbol, the value is the boolean <code>true</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1544527448, "post_id": 53722605, "comment_id": 94299690, "body": "<i>&quot;nothing but simplified convention in rails&quot;</i> \u2013 this isn&#39;t Rails specific, Rails cannot alter Ruby&#39;s syntax."}], "tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 1, "last_activity_date": 1544527701, "last_edit_date": 1544527701, "creation_date": 1544525760, "answer_id": 53722605, "question_id": 53722187, "link": "https://stackoverflow.com/questions/53722187/confusion-between-hashes-and-symbols/53722605#53722605", "title": "Confusion between hashes and symbols", "body": "<p>It is very basic &amp; nothing but simplified convention in ruby</p>\n\n<pre><code>validates :home_type, presence: true, if: :check_user\n</code></pre>\n\n<p>is similar to </p>\n\n<pre><code>validates :home_type, { :presence =&gt; true, :if =&gt; :check_user }\n</code></pre>\n\n<p>So when I write as,</p>\n\n<pre><code>link_to 'Edit', edit_path(user), class: 'user_one', id: \"user_#{user.id}\"\n</code></pre>\n\n<p>In above, <code>link_to</code> is ActionHelper method which is taking 3 arguments where last one is hash <code>{ class: 'user_one', id: \"user_#{user.id}\" }</code></p>\n"}], "owner": {"reputation": 1, "user_id": 10365180, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tWcSu.jpg?s=128&g=1", "display_name": "ndjerrou", "link": "https://stackoverflow.com/users/10365180/ndjerrou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1544527701, "creation_date": 1544524258, "question_id": 53722187, "link": "https://stackoverflow.com/questions/53722187/confusion-between-hashes-and-symbols", "title": "Confusion between hashes and symbols", "body": "<p>May you help me understand the concept behind the hash and especially when we use symbols.</p>\n\n<p>:name is a symbol right ?</p>\n\n<p>we can use symbol as a key for our hashed right ?</p>\n\n<p><code>:name</code> and <code>name:</code> for example : those are two syntaxes but it describes a symbol right ?</p>\n\n<p>when we have this for example : </p>\n\n<pre><code>Geocode.configure(\n\nunits: :km\n\n)\n</code></pre>\n\n<p>here units does a reference to a specified argument called units in the configure function right ? and :km is the symbol we want to send through the variable unit or am I wrong ?</p>\n\n<p>A last example :</p>\n\n<pre><code>validates :home_type, presence: true\n</code></pre>\n\n<p>Here we try to send to the validates function the symbol home_type right ?</p>\n\n<p>and the second argument is named \"presence\" and we want to send the boolean true through this variable right ?</p>\n\n<p>I am sorry if you don't understand my question, don't hesitate to ask me.</p>\n\n<p>I got many headeck nderstanding those syntaxes.</p>\n\n<p>Thanks a lot !</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ajax", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1544523861, "post_id": 53721881, "comment_id": 94297614, "body": "Is your ajax request is successfully going to your controller  ? Can you please check this first and please add terminal log of your ajax call"}, {"owner": {"reputation": 5, "user_id": 10018273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69441090e86ac4bf513519b6d5e4d1e3?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lp", "link": "https://stackoverflow.com/users/10018273/simon-lp"}, "reply_to_user": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1544524622, "post_id": 53721881, "comment_id": 94298062, "body": "Yes it is successfully connected as I can see that the search is performed in the rails console, but with en empty text parameter. I added the browser and rails console log"}, {"owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1544524701, "post_id": 53721881, "comment_id": 94298110, "body": "Try to add terminal logs (rails server) not browser logs ."}, {"owner": {"reputation": 966, "user_id": 6384607, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc77165b05cef4d2d4f6ed65d6bf9b21?s=128&d=identicon&r=PG&f=1", "display_name": "t s", "link": "https://stackoverflow.com/users/6384607/t-s"}, "edited": false, "score": 0, "creation_date": 1544524951, "post_id": 53721881, "comment_id": 94298245, "body": "This is because your <code>params[:term]</code> is empty so there is no result."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 10018273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69441090e86ac4bf513519b6d5e4d1e3?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lp", "link": "https://stackoverflow.com/users/10018273/simon-lp"}, "edited": false, "score": 0, "creation_date": 1544525670, "post_id": 53722285, "comment_id": 94298659, "body": "I have added the Beer model to let you see the search_beer method. Let me check the value of param[:terms] with binding.pry"}, {"owner": {"reputation": 5, "user_id": 10018273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69441090e86ac4bf513519b6d5e4d1e3?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lp", "link": "https://stackoverflow.com/users/10018273/simon-lp"}, "edited": false, "score": 0, "creation_date": 1544526535, "post_id": 53722285, "comment_id": 94299177, "body": "as you said params[:term] is nil but I really don&#39;t see why its not filled with the text entered in the form ..."}, {"owner": {"reputation": 171, "user_id": 8332606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g4gQv.jpg?s=128&g=1", "display_name": "CecileV", "link": "https://stackoverflow.com/users/8332606/cecilev"}, "reply_to_user": {"reputation": 5, "user_id": 10018273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69441090e86ac4bf513519b6d5e4d1e3?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lp", "link": "https://stackoverflow.com/users/10018273/simon-lp"}, "edited": false, "score": 0, "creation_date": 1544527302, "post_id": 53722285, "comment_id": 94299608, "body": "In the console when you are stopped at the binding.pry point you can request for the value of <code>params</code>, what does it contain?"}, {"owner": {"reputation": 5, "user_id": 10018273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69441090e86ac4bf513519b6d5e4d1e3?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lp", "link": "https://stackoverflow.com/users/10018273/simon-lp"}, "edited": false, "score": 0, "creation_date": 1544527554, "post_id": 53722285, "comment_id": 94299754, "body": "When I puts params  I have this   {&quot;name&quot;=&gt;&quot;fg&quot;, &quot;format&quot;=&gt;&quot;json&quot;, &quot;controller&quot;=&gt;&quot;autocomplete&quot;, &quot;action&quot;=&gt;&quot;index&quot;}, no trace of the text field"}, {"owner": {"reputation": 171, "user_id": 8332606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g4gQv.jpg?s=128&g=1", "display_name": "CecileV", "link": "https://stackoverflow.com/users/8332606/cecilev"}, "reply_to_user": {"reputation": 5, "user_id": 10018273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69441090e86ac4bf513519b6d5e4d1e3?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lp", "link": "https://stackoverflow.com/users/10018273/simon-lp"}, "edited": false, "score": 0, "creation_date": 1544527812, "post_id": 53722285, "comment_id": 94299878, "body": "Ok so that means that there may be an issue with the html... If you inspect in your browser the html for your form, do you have a <code>&lt;input type=&quot;text&quot; name=&quot;term&quot; &#47;&gt;</code> ?"}, {"owner": {"reputation": 5, "user_id": 10018273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69441090e86ac4bf513519b6d5e4d1e3?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lp", "link": "https://stackoverflow.com/users/10018273/simon-lp"}, "edited": false, "score": 0, "creation_date": 1544527942, "post_id": 53722285, "comment_id": 94299952, "body": "Yes I have exactly that :  &lt;input type=&quot;text&quot; name=&quot;term&quot; id=&quot;term&quot; class=&quot;my_form&quot;&gt;"}, {"owner": {"reputation": 171, "user_id": 8332606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g4gQv.jpg?s=128&g=1", "display_name": "CecileV", "link": "https://stackoverflow.com/users/8332606/cecilev"}, "reply_to_user": {"reputation": 5, "user_id": 10018273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69441090e86ac4bf513519b6d5e4d1e3?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lp", "link": "https://stackoverflow.com/users/10018273/simon-lp"}, "edited": false, "score": 0, "creation_date": 1544528282, "post_id": 53722285, "comment_id": 94300133, "body": "This is really weird I tried with your exact same code on my side (except the JS at this point, just to check the params) and I do have  <code>params[:term]</code> that matches the characters entered in the form. Where exactly did you add the <code>binding.pry</code>? PS : actually I think that in your text_field_tag you don&#39;t need to specify <code>params[:term]</code>, I get the same replacing it by <code>nil</code> following this syntax to add a class to a text_field_tag <a href=\"https://apidock.com/rails/ActionView/Helpers/FormTagHelper/text_field_tag\" rel=\"nofollow noreferrer\">apidock.com/rails/ActionView/Helpers/FormTagHelper/&hellip;</a>"}, {"owner": {"reputation": 5, "user_id": 10018273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69441090e86ac4bf513519b6d5e4d1e3?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lp", "link": "https://stackoverflow.com/users/10018273/simon-lp"}, "edited": false, "score": 0, "creation_date": 1544529451, "post_id": 53722285, "comment_id": 94300792, "body": "I have put it right at the beginning  of the Index function. I think I start seeing what&#39;s happening here : params[:term] are only filled when I click the button but not while I type inside the texfield"}, {"owner": {"reputation": 171, "user_id": 8332606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g4gQv.jpg?s=128&g=1", "display_name": "CecileV", "link": "https://stackoverflow.com/users/8332606/cecilev"}, "reply_to_user": {"reputation": 5, "user_id": 10018273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69441090e86ac4bf513519b6d5e4d1e3?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lp", "link": "https://stackoverflow.com/users/10018273/simon-lp"}, "edited": false, "score": 0, "creation_date": 1544532508, "post_id": 53722285, "comment_id": 94302409, "body": "Have you solved your problem? If my answer helped you, could you please upvote it? Thanks and have a nice day, happy to help further if needed"}, {"owner": {"reputation": 5, "user_id": 10018273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69441090e86ac4bf513519b6d5e4d1e3?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lp", "link": "https://stackoverflow.com/users/10018273/simon-lp"}, "edited": false, "score": 0, "creation_date": 1544534257, "post_id": 53722285, "comment_id": 94303255, "body": "I found what was wrong thanks to you thank you so much !!"}], "tags": [], "owner": {"reputation": 171, "user_id": 8332606, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g4gQv.jpg?s=128&g=1", "display_name": "CecileV", "link": "https://stackoverflow.com/users/8332606/cecilev"}, "is_accepted": true, "score": 0, "last_activity_date": 1544524995, "last_edit_date": 1544524995, "creation_date": 1544524657, "answer_id": 53722285, "question_id": 53721881, "link": "https://stackoverflow.com/questions/53721881/data-always-empty-ajax-call-rails-5/53722285#53722285", "title": "Data always empty AJAX call Rails 5", "body": "<p>1) Have you checked the <code>params[:term]</code> actually contains the string you enter ? For example by adding a <code>binding.pry</code> at the beginning of your index method in your controller, and checking in terminal console what's the value of <code>params[:term]</code> when the code is stopped by <code>binding.pry</code>?</p>\n\n<p>2) What is your <code>search_beer</code> method?\nHave you tried definining a pg search scope in your Beer model, as explained here:<a href=\"https://github.com/Casecommons/pg_search#user-content-pg_search_scope\" rel=\"nofollow noreferrer\">https://github.com/Casecommons/pg_search#user-content-pg_search_scope</a> ?\nThen you could have a <code>search_by_name</code> method (if your Beer model has a <code>name</code> attribute) so that <code>Beer.search_by_name(params[:term])</code>returns an array of beers whose name match what you have in <code>params[:term]</code></p>\n"}], "owner": {"reputation": 5, "user_id": 10018273, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69441090e86ac4bf513519b6d5e4d1e3?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lp", "link": "https://stackoverflow.com/users/10018273/simon-lp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 53722285, "answer_count": 1, "score": 0, "last_activity_date": 1544525312, "creation_date": 1544523292, "last_edit_date": 1544525312, "question_id": 53721881, "link": "https://stackoverflow.com/questions/53721881/data-always-empty-ajax-call-rails-5", "title": "Data always empty AJAX call Rails 5", "body": "<p>I am new to RAILS and even more to AJAX calls.</p>\n\n<p>I have a search bar where I want to perform an autocomplete to help users find items present in the db.\nFor the moment I am only trying to display the data of the AJAX call inside the console but whatever I do it is always empty...</p>\n\n<p>I am using Rails 5.2.1</p>\n\n<p>My form :</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;%= form_tag autocomplete_index_path,remote: true,  method: :get do %&gt;\r\n &lt;%= text_field_tag 'term', params[:term], class:\"my_form\"%&gt;\r\n  &lt;%= submit_tag \"bouton\", class: \"my_button\" %&gt;\r\n&lt;% end %&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>My controller (using pg search):</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>class AutocompleteController &lt; ApplicationController\r\n  def index\r\n    respond_to do |format|\r\n     format.json { render json: { data: Beer.search_beer(params[:term]).limit(5)}  } \r\n    end\r\n  end\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>And my assets/javascripts file </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>$(document).ready(function(){\r\n\r\n    $(\".my_form\").keyup(function(){\r\n        var search = $(this).val();\r\n\r\n        if(search != \"\"){\r\n\r\n            $.ajax({\r\n                url: 'autocomplete',\r\n                method: 'GET',\r\n                dataType: 'json',\r\n                data: {'name': $(\"#term\").val()},\r\n                success:function(data){\r\n                 console.log('Success!', data);\r\n                }\r\n                });\r\n        }\r\n\r\n    });\r\n\r\n});</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Beer model with pg scope</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>class Beer &lt; ApplicationRecord\r\n  include PgSearch\r\n  belongs_to :brewery\r\n  belongs_to :category\r\n  belongs_to :style\r\n  has_many :bars, through: :beer_lists\r\n  pg_search_scope :search_beer, \r\n    against: :name, \r\n    using: {\r\n      tsearch: {\r\n        prefix: true\r\n      }\r\n    }\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>If someone could help me figure out why Ajax call is always rendering an empty array it would much appreciated !</p>\n\n<p><a href=\"https://i.stack.imgur.com/PC43u.png\" rel=\"nofollow noreferrer\">Console log</a></p>\n\n<p><a href=\"https://i.stack.imgur.com/2D5OT.png\" rel=\"nofollow noreferrer\">Rails server</a></p>\n"}, {"tags": ["ruby", "rubygems", "mobius"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1544522833, "post_id": 53720180, "comment_id": 94297024, "body": "Can you reach the host from your network? Is <a href=\"https://api.rubygems.org/\" rel=\"nofollow noreferrer\">api.rubygems.org</a> reachable in your browser? Do you have a firewall rule blocking outbound access for <code>ruby</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 3124046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d21c0dae914f91ec14838267ebac3a7c?s=128&d=identicon&r=PG&f=1", "display_name": "GratefulEnergy", "link": "https://stackoverflow.com/users/3124046/gratefulenergy"}, "edited": false, "score": 0, "creation_date": 1544646300, "post_id": 53727053, "comment_id": 94354326, "body": "Thank you, it was indeed the firewall."}], "tags": [], "owner": {"reputation": 2024, "user_id": 5511315, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBuFb.png?s=128&g=1", "display_name": "noraj", "link": "https://stackoverflow.com/users/5511315/noraj"}, "is_accepted": true, "score": 0, "last_activity_date": 1544541229, "creation_date": 1544541229, "answer_id": 53727053, "question_id": 53720180, "link": "https://stackoverflow.com/questions/53720180/errors-updating-ruby-gems/53727053#53727053", "title": "Errors Updating Ruby Gems", "body": "<p>Your request timed out, you may have a network problem, eg. proxy, dns, firewall, routing, etc.</p>\n"}], "owner": {"reputation": 29, "user_id": 3124046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d21c0dae914f91ec14838267ebac3a7c?s=128&d=identicon&r=PG&f=1", "display_name": "GratefulEnergy", "link": "https://stackoverflow.com/users/3124046/gratefulenergy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 53727053, "answer_count": 1, "score": 0, "last_activity_date": 1544541229, "creation_date": 1544517227, "question_id": 53720180, "link": "https://stackoverflow.com/questions/53720180/errors-updating-ruby-gems", "title": "Errors Updating Ruby Gems", "body": "<p>I'm trying to update my ruby gems, I had to go the manual route, download > unpack > CD there, the run: ruby setup.rb</p>\n\n<p>To here I was good to go; now however, when trying to update said gems, or when I try to install the mobius network client, I get the following: </p>\n\n<pre><code> C:\\Windows\\System32&gt;gem update\n Updating installed gems\n ERROR:  While executing gem ... (Gem::RemoteFetcher::UnknownHostError)\n timed out (https://api.rubygems.org/specs.4.8.gz)\n\n C:\\Windows\\System32&gt;gem install mobius-client\n ERROR:  Could not find a valid gem 'mobius-client' (&gt;= 0), here is why:\n Unable to download data from https://rubygems.org/ - timed out \n (https://api.rubygems.org/specs.4.8.gz)\n</code></pre>\n\n<p>Is this something wrong on my side?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 28138, "user_id": 337166, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fKzgt.jpg?s=128&g=1", "display_name": "jvnill", "link": "https://stackoverflow.com/users/337166/jvnill"}, "edited": false, "score": 0, "creation_date": 1544515863, "post_id": 53719553, "comment_id": 94293035, "body": "<code>class OrderItem# &lt; ActiveRecord::Base</code> you have a rogue <code>#</code> in the middle there"}, {"owner": {"reputation": 725, "user_id": 4779531, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/QCkeC.jpg?s=128&g=1", "display_name": "SEJU", "link": "https://stackoverflow.com/users/4779531/seju"}, "reply_to_user": {"reputation": 28138, "user_id": 337166, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fKzgt.jpg?s=128&g=1", "display_name": "jvnill", "link": "https://stackoverflow.com/users/337166/jvnill"}, "edited": false, "score": 0, "creation_date": 1544515948, "post_id": 53719553, "comment_id": 94293080, "body": "Thanks, that was because I tried to get it formatted properly. Is not in my code and I will delete it from here. Thanks for your hint."}, {"owner": {"reputation": 725, "user_id": 4779531, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/QCkeC.jpg?s=128&g=1", "display_name": "SEJU", "link": "https://stackoverflow.com/users/4779531/seju"}, "reply_to_user": {"reputation": 28138, "user_id": 337166, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fKzgt.jpg?s=128&g=1", "display_name": "jvnill", "link": "https://stackoverflow.com/users/337166/jvnill"}, "edited": false, "score": 0, "creation_date": 1544517032, "post_id": 53719553, "comment_id": 94293518, "body": "@jvnill I managed to get it passing with: &#39;errors.add(:amount, &quot;should be one or more&quot;) unless amount.nil? || amount &gt; 0.0&#39; any idea why?"}, {"owner": {"reputation": 725, "user_id": 4779531, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/QCkeC.jpg?s=128&g=1", "display_name": "SEJU", "link": "https://stackoverflow.com/users/4779531/seju"}, "reply_to_user": {"reputation": 28138, "user_id": 337166, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fKzgt.jpg?s=128&g=1", "display_name": "jvnill", "link": "https://stackoverflow.com/users/337166/jvnill"}, "edited": false, "score": 0, "creation_date": 1544517178, "post_id": 53719553, "comment_id": 94293596, "body": "Now it passes even with 0. I deleted the one I had and wrote another one. ... Why does this happen? Sublime showed nothing there and everything seemed properly formatted!!!"}, {"owner": {"reputation": 28138, "user_id": 337166, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fKzgt.jpg?s=128&g=1", "display_name": "jvnill", "link": "https://stackoverflow.com/users/337166/jvnill"}, "edited": false, "score": 0, "creation_date": 1544530329, "post_id": 53719553, "comment_id": 94301254, "body": "no idea. sometimes the IDE doesn&#39;t show everything.  in your case, since the code is just about 3 lines, just rewriting them from scratch shouldn&#39;t be a problem :)"}], "owner": {"reputation": 725, "user_id": 4779531, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/QCkeC.jpg?s=128&g=1", "display_name": "SEJU", "link": "https://stackoverflow.com/users/4779531/seju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544517233, "creation_date": 1544514568, "last_edit_date": 1544517233, "question_id": 53719553, "link": "https://stackoverflow.com/questions/53719553/validation-not-passing-for-syntaxerror-syntax-error-unexpected-tidentifier-ex", "title": "Validation not passing for &#39;SyntaxError syntax error, unexpected tIDENTIFIER, expecting kEND):&#39;", "body": "<p>I am working on a checkout routine for a Rails webshop. Everything is working, but following a tutorial I placed a validation which throws a <code>SyntaxError syntax error, unexpected tIDENTIFIER, expecting kEND):</code> error.</p>\n\n<p>When I uncomment it, everything works, but I still would like to implement a validation in this place.</p>\n\n<p>The error is related to lines 17, 46 and 47 in the controller and 10 in the model.</p>\n\n<p>The relative action in my controller is:</p>\n\n<pre><code>class CheckoutController &lt; ApplicationController\n\n  def place_order \n    @page_title = \"Checkout\" \n    @order = Order.new(params[:order])\n    @order.customer_ip = request.remote_ip \n    populate_order ### LINE 17\n\n    ...\n  end\n\n  private \n  def populate_order\n    @cart.cart_items.each do |cart_item|\n      order_item = OrderItem.new(:product_id =&gt; cart_item.product_id, :price =&gt; cart_item.price, :amount =&gt; cart_item.amount)  ### LINE 46\n      @order.order_items &lt;&lt; order_item ### LINE 47\n    end\n  end\nend \n</code></pre>\n\n<p>The order_item model is:</p>\n\n<pre><code>class OrderItem &lt; ActiveRecord::Base\n  attr_accessible :amount, :price, :product_id, :order_id\n  belongs_to :order\n  belongs_to :product\n  def validate\n     errors.add(:amount, \"should be one or more\") unless amount.nil? || amount &gt; 0   ### LINE 10\n\n     errors.add(:price, \"should be a positive number\") unless price.nil? || price &gt; 0.0\n  end\nend\n</code></pre>\n\n<p>Not even stackoverflow lets me put in this line correctly</p>\n\n<p>The error messages for line 10 and the pass with line 10 uncommented are as follows</p>\n\n<pre><code>Started POST \"/checkout/place_order\" for 127.0.0.1 at Tue Dec 11 08:03:05 +0100 2018\nProcessing by CheckoutController#place_order as HTML\n  Parameters: {\"order\"=&gt;{\"email\"=&gt;\"test@example.tld\", \"ship_to_last_name\"=&gt;\"Smith\", \"phone_number\"=&gt;\"123451234134\", \"ship_to_first_name\"=&gt;\"John\", \"ship_to_country\"=&gt;\"United States of America\", \"ship_to_postal_code\"=&gt;\"12345\", \"ship_to_address\"=&gt;\"Somewhere Avenue\", \"ship_to_city\"=&gt;\"Nowheretorn\"}, \"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"xxxxx=\", \"commit\"=&gt;\"Place Order\"}\n  Cart Load (0.4ms)  SELECT `carts`.* FROM `carts` WHERE `carts`.`id` = ? LIMIT 1  [[\"id\", 3]]\n  CartItem Load (0.4ms)  SELECT `cart_items`.* FROM `cart_items` WHERE `cart_items`.`cart_id` = 3\nCompleted 500 Internal Server Error in 5ms\n\nSyntaxError (/Users/devaccount/Development/REPRO/webapp/app/models/order_item.rb:10: syntax error, unexpected tIDENTIFIER, expecting kEND):\n  app/controllers/checkout_controller.rb:46:in `populate_order'\n  app/controllers/checkout_controller.rb:45:in `populate_order'\n  app/controllers/checkout_controller.rb:17:in `place_order'\n\n\nStarted POST \"/checkout/place_order\" for 127.0.0.1 at Tue Dec 11 08:03:29 +0100 2018\nProcessing by CheckoutController#place_order as HTML\n  Parameters: {\"order\"=&gt;{\"email\"=&gt;\"test@example.tld\", \"ship_to_last_name\"=&gt;\"Smith\", \"phone_number\"=&gt;\"123451234134\", \"ship_to_first_name\"=&gt;\"John\", \"ship_to_country\"=&gt;\"United States of America\", \"ship_to_postal_code\"=&gt;\"12345\", \"ship_to_address\"=&gt;\"Somewhere Avenue\", \"ship_to_city\"=&gt;\"Nowheretorn\"}, \"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"xxxxx=\", \"commit\"=&gt;\"Place Order\"}\n  Cart Load (0.2ms)  SELECT `carts`.* FROM `carts` WHERE `carts`.`id` = ? LIMIT 1  [[\"id\", 3]]\n  CartItem Load (0.4ms)  SELECT `cart_items`.* FROM `cart_items` WHERE `cart_items`.`cart_id` = 3\n  SQL (0.1ms)  BEGIN\n  SQL (1.4ms)  INSERT INTO `orders` (`created_at`, `customer_ip`, `email`, `error_message`, `phone_number`, `ship_to_address`, `ship_to_city`, `ship_to_country`, `ship_to_first_name`, `ship_to_last_name`, `ship_to_postal_code`, `status`, `updated_at`) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)  [[\"created_at\", Tue, 11 Dec 2018 07:03:29 UTC +00:00], [\"customer_ip\", \"127.0.0.1\"], [\"email\", \"test@example.tld\"], [\"error_message\", nil], [\"phone_number\", \"123451234134\"], [\"ship_to_address\", \"Somewhere Avenue\"], [\"ship_to_city\", \"Nowheretorn\"], [\"ship_to_country\", \"United States of America\"], [\"ship_to_first_name\", \"John\"], [\"ship_to_last_name\", \"Smith\"], [\"ship_to_postal_code\", \"12345\"], [\"status\", \"open\"], [\"updated_at\", Tue, 11 Dec 2018 07:03:29 UTC +00:00]]\n  SQL (1.1ms)  INSERT INTO `order_items` (`amount`, `created_at`, `order_id`, `price`, `product_id`, `updated_at`) VALUES (?, ?, ?, ?, ?, ?)  [[\"amount\", 1], [\"created_at\", Tue, 11 Dec 2018 07:03:29 UTC +00:00], [\"order_id\", 7], [\"price\", 10], [\"product_id\", 13], [\"updated_at\", Tue, 11 Dec 2018 07:03:29 UTC +00:00]]\n   (0.5ms)  COMMIT\n  SQL (0.1ms)  BEGIN\n   (0.3ms)  UPDATE `orders` SET `updated_at` = '2018-12-11 07:03:29', `status` = 'processed' WHERE `orders`.`id` = 7\n   (0.4ms)  COMMIT\n  SQL (0.2ms)  BEGIN\n  SQL (0.3ms)  DELETE FROM `cart_items` WHERE `cart_items`.`id` = ?  [[\"id\", 11]]\n   (0.4ms)  COMMIT\nRedirected to http://localhost:3000/checkout/thank_you\nCompleted 302 Found in 138ms (ActiveRecord: 9.1ms)\n</code></pre>\n\n<p>I checked: amount has an integer value in the order_items table and is always greater than 0 in both cases.\nI hope someone can point me into the right direction.</p>\n"}, {"tags": ["ruby", "nokogiri"], "answers": [{"tags": [], "owner": {"reputation": 8454, "user_id": 958529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3ec25db39c63bab1a11037649e326b8?s=128&d=identicon&r=PG", "display_name": "halfelf", "link": "https://stackoverflow.com/users/958529/halfelf"}, "is_accepted": true, "score": 1, "last_activity_date": 1544512820, "last_edit_date": 1544512820, "creation_date": 1544512457, "answer_id": 53719131, "question_id": 53718535, "link": "https://stackoverflow.com/questions/53718535/find-attributes-with-prefix-attribute-name/53719131#53719131", "title": "Find attributes with prefix attribute name", "body": "<pre><code>doc = Nokogiri::HTML('&lt;div in-prop in-alias=\"\" in-type=\"teacher\"&gt;&lt;div in-name=\"Alice\"&gt;Hello &lt;i in-name=\"Wonderland\"&gt;World&lt;/i&gt;&lt;/div&gt;&lt;/div&gt;')\n\na = doc.xpath(\"//@*[starts-with(name(), 'in')]\")\n\na.map { |i| i.name[3..-1] }  # =&gt; [\"prop\", \"alias\", \"type\", \"name\", \"name\"]\n</code></pre>\n"}], "owner": {"reputation": 1179, "user_id": 2858044, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b99bf8baf41337577e4e425677080472?s=128&d=identicon&r=PG&f=1", "display_name": "itx", "link": "https://stackoverflow.com/users/2858044/itx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 53719131, "answer_count": 1, "score": 0, "last_activity_date": 1544512820, "creation_date": 1544509563, "last_edit_date": 1544512745, "question_id": 53718535, "link": "https://stackoverflow.com/questions/53718535/find-attributes-with-prefix-attribute-name", "title": "Find attributes with prefix attribute name", "body": "<p>I have html look likes :</p>\n\n<pre><code>&lt;div in-prop in-alias=\"\" in-type=\"teacher\"&gt;&lt;div in-name=\"Alice\"&gt;Hello &lt;i in-name=\"Wonderland\"&gt;World&lt;/i&gt;&lt;/div&gt;&lt;/div&gt;\n</code></pre>\n\n<p>I want to collect custom attribute names based on prefix <code>in-</code> attribute name, I have working code and returns <code>[\"prop\", \"alias\", \"type\", \"name\", \"name\"]</code> </p>\n\n<pre><code>require 'nokogiri'\n\nclass PartB\n  def get_scheme(html)\n    get_doc(html).map { |elm|\n      elm.attributes.map{|k, v| k.gsub(\"in-\", \"\") if !k.nil? &amp;&amp; k.include?(\"in-\")}\n    }.flatten.compact\n  end\n\n  def get_doc(html)\n    Nokogiri::HTML(html).search('*')\n  end\nend\n</code></pre>\n\n<p>but I think that is redundant, because I use <code>search('*')</code> and it will get all html tags. Is there any way to do that?</p>\n"}, {"tags": ["ruby", "amazon-web-services", "cfndsl"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1544509199, "post_id": 53718396, "comment_id": 94290456, "body": "What\u2019s wrong with <code>grep -r SSESpecification *&#47;**&#47;*.rb</code> btw?"}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1544513387, "post_id": 53718396, "comment_id": 94291999, "body": "@AlekseiMatiushkin or even better: <code>grep -r &quot;def SSESpecification&quot; **&#47;*.rb</code>"}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1544513833, "post_id": 53718396, "comment_id": 94292158, "body": "Btw this is often useful: <code>grep &quot;def SSESpecification&quot; $(gem contents cfndsl)</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1544513997, "post_id": 53718396, "comment_id": 94292223, "body": "@KimmoLehto Yeah, I usually start with <code>&quot;def foo&quot;</code> but it could be <code>def self.foo</code>, <code>define_method foo</code> etc, especially taking into account it\u2019s invoked with <code>instance_eval</code> :)"}], "owner": {"reputation": 6535, "user_id": 504909, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/aa6c866af04400dc1281bb430792317c?s=128&d=identicon&r=PG", "display_name": "user504909", "link": "https://stackoverflow.com/users/504909/user504909"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1545357765, "creation_date": 1544508812, "last_edit_date": 1545357765, "question_id": 53718396, "link": "https://stackoverflow.com/questions/53718396/is-there-way-to-find-wherewhich-file-defined-certain-method-in-ruby", "title": "Is there way to find where(which file) defined certain method in ruby?", "body": "<p>I have a cfndsl file with the statement:</p>\n\n<pre><code>SSESpecification(SSEEnabled: true)\n</code></pre>\n\n<p>on the local machine I get this error:</p>\n\n<pre><code>Traceback (most recent call last):\n        12: from /usr/local/bin/cfndsl:23:in `&lt;main&gt;'\n        11: from /usr/local/bin/cfndsl:23:in `load'\n        10: from /var/lib/gems/2.5.0/gems/cfndsl-0.16.9/bin/cfndsl:138:in `&lt;top (required)&gt;'\n         9: from /var/lib/gems/2.5.0/gems/cfndsl-0.16.9/lib/cfndsl.rb:87:in `eval_file_with_extras'\n         8: from /var/lib/gems/2.5.0/gems/cfndsl-0.16.9/lib/cfndsl.rb:87:in `eval'\n         7: from /c/work/dfsi/infra/cfndsl/cadnsw.rb:5:in `eval_file_with_extras'\n         6: from /var/lib/gems/2.5.0/gems/cfndsl-0.16.9/lib/cfndsl.rb:93:in `CloudFormation'\n         5: from /var/lib/gems/2.5.0/gems/cfndsl-0.16.9/lib/cfndsl/jsonable.rb:204:in `declare'\n         4: from /var/lib/gems/2.5.0/gems/cfndsl-0.16.9/lib/cfndsl/jsonable.rb:204:in `instance_eval'\n         3: from /c/work/dfsi/infra/cfndsl/cadnsw.rb:420:in `block in eval_file_with_extras'\n         2: from /var/lib/gems/2.5.0/gems/cfndsl-0.16.9/lib/cfndsl/orchestration_template.rb:104:in `block (3 levels) in create_resource_accessor'\n         1: from /var/lib/gems/2.5.0/gems/cfndsl-0.16.9/lib/cfndsl/orchestration_template.rb:104:in `instance_eval'\n/c/work/dfsi/infra/cfndsl/cadnsw.rb:470:in `block (2 levels) in eval_file_with_extras': undefined method `SSESpecification' for #&lt;CfnDsl::AWS::Types::AWS_DynamoDB_Table:0x00007fffd918d478&gt;\n</code></pre>\n\n<p>But on the server it is running OK without errors.</p>\n\n<p>I just want to find out on server which file defined the method <code>SSESpecification</code>.</p>\n\n<p>How should I do that with irb?</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 4, "creation_date": 1544506651, "post_id": 53717625, "comment_id": 94289710, "body": "I see now why you selected an answer so quickly. The author of that question asked you to do that just a few minutes after you posted the question! It is very bad form for him to have done that. He would not have done so had the question been posted by an experienced SO member, because he knows his request would not have fallen on deaf ears. I suggest that in future you wait at least a couple of hours,  as you don&#39;t want to discourage others from posting answers or short-circuit those who are still working on their answers. There&#39;s no rush..."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1544520987, "post_id": 53717625, "comment_id": 94295840, "body": "@CarySwoveland the OP appreciated the answer and said that it solved the problem. Its author in return asked if the OP could accept it, even providing a link to help section which explains how accepting works in detail. I see no bad form here."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 5, "creation_date": 1544506238, "post_id": 53717671, "comment_id": 94289585, "body": "I would never, never, never upvote an answer given by anyone who asks a newbie SO for it after just a few minutes. Shame!"}, {"owner": {"reputation": 2075, "user_id": 1543579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7RQCa.jpg?s=128&g=1", "display_name": "shirakia", "link": "https://stackoverflow.com/users/1543579/shirakia"}, "edited": false, "score": 1, "creation_date": 1544506776, "post_id": 53717671, "comment_id": 94289744, "body": "Thanks for your advice. You are right. I just thought telling how to use StackOverflow is a great behavior."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1544510240, "post_id": 53717671, "comment_id": 94290824, "body": "Correction to my earlier comment: &quot;...who asks an SO newbie to mark their answer as selected after just a few minutes.&quot;"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1544511394, "post_id": 53717671, "comment_id": 94291231, "body": "@Sagar, the answer is correct, so I don&#39;t think it deserves downvotes."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1544516278, "post_id": 53717671, "comment_id": 94293223, "body": "New users sometimes don&#39;t know that answers can be accepted. So if a new user says <i>&quot;thanks, that works&quot;</i> (aka solved the problem) but doesn&#39;t accept the answer, it&#39;s perfectly fine to ask them to do so."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1544516378, "post_id": 53717671, "comment_id": 94293257, "body": "Upvote from me \u2013 you answered within 5 minutes, your solution works and it solved the OP&#39;s problem."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1544552750, "post_id": 53717671, "comment_id": 94314070, "body": "@Stefan, I disagree, strenuously. Firstly, we can agree that many SO newbies are also Ruby rubies, meaning that they may not know SO rules and etiquette and may not be able to determine if an answer is a good one. All SO veterans know this. I&#39;ve seen numerous instances where the author of the first answer posted asked for the greenie and got it, and the answer was poor, sometimes even wrong. If the asker exits the room before other members offer much better answers or point out the flaws in the accepted answer, has he/she been well-served by SO? (cont.)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1544553918, "post_id": 53717671, "comment_id": 94314607, "body": "...Even if the asker  stays around, they probably don&#39;t know they can revoke or move the greenie. We&#39;ve both seen absolutely wonderful answers go unrewarded for that reason. It&#39;s true that newbies often don&#39;t know they are expected to select the answer, but the solution for that is not for authors of answers to say, &quot;gimmie the checkmark!&quot;. Rather, they should explain how it works and point out there&#39;s no rush to make a selection, that they&#39;d be well-served by waiting for others to post answers. Then they select the answer they find most helpful, if indeed any are helpful. (cont.)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1544554425, "post_id": 53717671, "comment_id": 94314856, "body": "...@Stefan, lastly, let me ask you this. Have you <i>ever</i> posted the first answer to a question asked by an obvious newbie and said (sic), &quot;If you find that I have answered your question please select my answer&quot;? If the answer is &quot;no&quot;, you should ask yourself how that behavior squares with your comment above.  So there!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1544602491, "post_id": 53717671, "comment_id": 94329869, "body": "@CarySwoveland I&#39;ve posted similar comments, e.g. <a href=\"https://stackoverflow.com/questions/46478857/ruby-calculations-with-gets-chomp-in-a-loop/46490824#comment79941010_46490824\">1</a> and <a href=\"https://stackoverflow.com/questions/26972633/writing-arrays-using-grep/26973801#comment42484067_26973801\">2</a>. Although I tend phrase them in a more general way."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1544602574, "post_id": 53717671, "comment_id": 94329898, "body": "For me, the greenie is always subjective because it marks the best answer <i>for the OP</i> in the context of his or her problem. It allows the OP to mark the question as being solved and to pick an answer regardless of votes. Maybe the OP is behind schedule and a quick and dirty answer is more valuable that a clean one posted hours later."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1544605660, "post_id": 53717671, "comment_id": 94331444, "body": "@Stefan, #1 doesn\u2019t count as you merely suggested (20 or so hours after the question was posted) that an answer be selected. ..but a quick and incorrect answer is not not likely more valuable... We\u2019ll just have to disagree on this one."}], "tags": [], "owner": {"reputation": 2075, "user_id": 1543579, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7RQCa.jpg?s=128&g=1", "display_name": "shirakia", "link": "https://stackoverflow.com/users/1543579/shirakia"}, "is_accepted": true, "score": -3, "last_activity_date": 1544504695, "creation_date": 1544504695, "answer_id": 53717671, "question_id": 53717625, "link": "https://stackoverflow.com/questions/53717625/multiply-each-item-in-an-array-by-each-item-in-another-array/53717671#53717671", "title": "Multiply each item in an array by each item in another array", "body": "<p>This is not beautiful but returns what you want.</p>\n\n<p><code>a.map{|aa| b.map{|bb| bb * aa}}.flatten</code></p>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1544508813, "post_id": 53717789, "comment_id": 94290337, "body": "When I see the code like this (once a month at least,) I always wonder what\u2019s wrong with <code>Enumerable#map_reduce</code> to be introduced in Ruby core? :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1544509935, "post_id": 53717789, "comment_id": 94290681, "body": "Do you (or does a reader) know why <a href=\"http://ruby-doc.org/core-2.5.1/Array.html#method-i-product\" rel=\"nofollow noreferrer\">Array#product</a> returns an array rather than an enumerator? An enumerator would have obvious advantages in applications where <code>product</code> is chained to an <code>Enumerable</code> method. (I expect the reason is forehead-slapping  simple.)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 4, "creation_date": 1544510307, "post_id": 53717789, "comment_id": 94290848, "body": "@CarySwoveland I am positive it\u2019s legacy; fwiw, you always are free to <code>a.enum_for(:product, b)</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1544510563, "post_id": 53717789, "comment_id": 94290941, "body": "Thanks, mudsie, er @AlekseiMatiushkin That makes sense and  thanks for the code (which I&#39;ve tucked away)."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1544515669, "post_id": 53717789, "comment_id": 94292932, "body": "@CarySwoveland the corresponding <a href=\"https://bugs.ruby-lang.org/issues/3021\" rel=\"nofollow noreferrer\">ticket #3021</a> says: <i>&quot;Returning an enumerator today would break compatibility though. I suggest that Array#product(&amp;block) yields to the block and returns self.&quot;</i> Although I&#39;m not sure what could have broken since it didn&#39;t take a block before &#175;\\_(\u30c4)_/&#175;"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1544515707, "post_id": 53717789, "comment_id": 94292954, "body": "BTW, <code>zip</code> is even worse \u2013 it just returns (a useless) <code>nil</code> when a block is given."}, {"owner": {"reputation": 2024, "user_id": 5511315, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBuFb.png?s=128&g=1", "display_name": "noraj", "link": "https://stackoverflow.com/users/5511315/noraj"}, "edited": false, "score": 0, "creation_date": 1544541485, "post_id": 53717789, "comment_id": 94307697, "body": "@shirakia please change the accepted answer, this one is proper."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1544560351, "post_id": 53717789, "comment_id": 94317596, "body": "@Stefan, I confess that I never noticed that <code>product</code> could take a block. I expect &quot;Returning an enumerator today...&quot; referred to chaining."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 10, "last_activity_date": 1544505424, "creation_date": 1544505424, "answer_id": 53717789, "question_id": 53717625, "link": "https://stackoverflow.com/questions/53717625/multiply-each-item-in-an-array-by-each-item-in-another-array/53717789#53717789", "title": "Multiply each item in an array by each item in another array", "body": "<p>For a nice abstraction, can get cartesian product using <code>product</code>:</p>\n\n<pre><code>a.product(b).map { |aa, bb| aa * bb }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1544517176, "post_id": 53718109, "comment_id": 94293594, "body": "<i>&quot;the cross-products are all done in C&quot;</i> \u2013 are you sure? The source code for <a href=\"https://github.com/ruby/ruby/blob/v2_5_3/lib/matrix.rb#L881-L906\" rel=\"nofollow noreferrer\"><code>matrix.rb</code></a> looks as if it is implemented in Ruby."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1544555585, "post_id": 53718109, "comment_id": 94315390, "body": "@Stefan, as I was reading the code at the link you gave you could have knocked me over with a feather. Why? Why? Not why the feather, but why write each and every <code>Matrix</code> method in Ruby? The idea of writing numerically demanding methods such as <a href=\"http://ruby-doc.org/stdlib-2.5.1/libdoc/matrix/rdoc/Matrix.html#method-i-lup_decomposition\" rel=\"nofollow noreferrer\">Matrix#lup_decomposition</a> in Ruby boggles the mind. I had assumed an optimized public-domain matrix library written in C had been used (with Ruby wrappers). That also would have been a lot easier than reinventing the wheel."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 5, "last_activity_date": 1544556395, "last_edit_date": 1544556395, "creation_date": 1544507293, "answer_id": 53718109, "question_id": 53717625, "link": "https://stackoverflow.com/questions/53717625/multiply-each-item-in-an-array-by-each-item-in-another-array/53718109#53718109", "title": "Multiply each item in an array by each item in another array", "body": "<p>This solution makes use of <a href=\"http://ruby-doc.org/stdlib-2.5.1/libdoc/matrix/rdoc/Matrix.html\" rel=\"nofollow noreferrer\">Matrix</a> methods to compute (and then flatten) the <em>outer product</em> of two vectors.</p>\n\n<pre><code>require 'matrix'\n\n(Matrix.column_vector(a) * Matrix.row_vector(b)).to_a.flatten\n  #=&gt; [4, 5, 6, 8, 10, 12, 12, 15, 18]\n</code></pre>\n\n<p>Like the other two answers to date, this produces a temporary array, which when flattened (if not already flattened) contains <code>a.size**2</code> elements. If <code>a</code> is so large that this results in a storage problem, you could use a pair of enumerators instead:</p>\n\n<pre><code>a.each_with_object([]) { |aa,arr| b.each { |bb| arr &lt;&lt; aa*bb } }\n  #=&gt; [4, 5, 6, 8, 10, 12, 12, 15, 18]\n</code></pre>\n\n<p>The enumerators are as follows.</p>\n\n<pre><code>enum_a = a.each_with_object([])\n  #=&gt; #&lt;Enumerator: [1, 2, 3]:each_with_object([])&gt;\naa, arr = enum_a.next\n  #=&gt; [1, []]\naa, arr = enum_a.next\n  #=&gt; [2, []]\n...\n\nenum_b = b.each\n  #=&gt; #&lt;Enumerator: [4, 5, 6]:each&gt;\nbb = enum_b.next\n  #=&gt; 4\nbb = enum_b.next\n  #=&gt; 5\n...\n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.5.1/Enumerator.html#method-i-next\" rel=\"nofollow noreferrer\">Enumerator#next</a>. This is how enumerators pass elements to their blocks.</p>\n\n<p>The method <a href=\"http://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-each_with_object\" rel=\"nofollow noreferrer\">Enumerable#each_with_object</a> is very convenient and not as complex as it may initially seem. For the most part it just saves two lines of code from the following.</p>\n\n<pre><code>arr = []\na.each { |aa| b.each { |bb| arr &lt;&lt; aa*bb } }\narr\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1544508669, "post_id": 53718114, "comment_id": 94290289, "body": "The former is a shallow copy of the answer given by @Amadan and the latter is the exact copy of [not the best here] accepted answer. Downvoted."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1544509176, "post_id": 53718114, "comment_id": 94290448, "body": "Use <code>(:*)</code> in your first answer and <code>flat_map</code> in your second answer."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1544509955, "post_id": 53718114, "comment_id": 94290690, "body": "@SagarPandya I personally dislike passing a symbol argument to <code>reduce</code> since it is allowed by this method only, all of a sudden, while using <code>Symbol#to_proc</code> is the common approach used widely among the whole ruby core."}], "tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 2, "last_activity_date": 1544507631, "last_edit_date": 1544507631, "creation_date": 1544507330, "answer_id": 53718114, "question_id": 53717625, "link": "https://stackoverflow.com/questions/53717625/multiply-each-item-in-an-array-by-each-item-in-another-array/53718114#53718114", "title": "Multiply each item in an array by each item in another array", "body": "<p>Tried with following,</p>\n\n<pre><code>a.product(b).map { |x| x.inject(&amp;:*) }\n</code></pre>\n\n<p>Amazingly following also solve it,</p>\n\n<pre><code>a.map { |x| b.map(&amp;x.method(:*)) }.flatten\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 9817577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1e06b516b854d650961455b7879fe39?s=128&d=identicon&r=PG&f=1", "display_name": "KGSoloman", "link": "https://stackoverflow.com/users/9817577/kgsoloman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 321, "favorite_count": 0, "accepted_answer_id": 53717671, "answer_count": 4, "score": 4, "last_activity_date": 1544556395, "creation_date": 1544504422, "last_edit_date": 1544507762, "question_id": 53717625, "link": "https://stackoverflow.com/questions/53717625/multiply-each-item-in-an-array-by-each-item-in-another-array", "title": "Multiply each item in an array by each item in another array", "body": "<p>In Ruby, how can one multiply every element in one array by every element in another array, such that:</p>\n\n<pre><code>a = [1,2,3]\n\nb = [4,5,6]\n\nc = a*b = [4,5,6,8,10,12,12,15,18]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sqlite"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1544505480, "post_id": 53717567, "comment_id": 94289336, "body": "I&#39;m not going to watch a YouTube video to understand what you did, and I doubt anyone else will either, so I suggest including the relevant info from the video in your post. But I can tell you that the command is <code>gem install sqlite3</code>, not <code>gem sqlite3</code>."}, {"owner": {"reputation": 779, "user_id": 833555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d99cf1bcf274d03c06d2f218f73cff0d?s=128&d=identicon&r=PG", "display_name": "Gregory Ostermayr", "link": "https://stackoverflow.com/users/833555/gregory-ostermayr"}, "edited": false, "score": 0, "creation_date": 1544506885, "post_id": 53717567, "comment_id": 94289769, "body": "you should be able to open up a console and run <code>sqlite3</code> from the command line. I suspect it&#39;s not in your environment path."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user9450045"}, "is_accepted": false, "score": 1, "last_activity_date": 1544512456, "creation_date": 1544512456, "answer_id": 53719129, "question_id": 53717567, "link": "https://stackoverflow.com/questions/53717567/cannot-run-rails-server-cannot-locate-sqlite3/53719129#53719129", "title": "Cannot run rails server cannot locate sqlite3", "body": "<p><code>C:/Ruby25-x64/lib/ruby</code></p>\n\n<p>Fortunately your system is 64 bits as I do not know solution for the 32 bits.</p>\n\n<p>Download this:</p>\n\n<p><a href=\"https://ci.appveyor.com/project/MSP-Greg/sqlite3-ruby/build/3/job/hhk6ie8gdo545svr/artifacts\" rel=\"nofollow noreferrer\">https://ci.appveyor.com/project/MSP-Greg/sqlite3-ruby/build/3/job/hhk6ie8gdo545svr/artifacts</a></p>\n\n<p>And in the folder where you downloaded it open the cmd and run:</p>\n\n<p><code>gem install sqlite3-1.3.13.20180326210955-x64-mingw32.gem</code></p>\n\n<p>There are shorter ways to do it in the cmd but I have been specific.</p>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 8964279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c96f479e47b8350362c4d32a3be2a872?s=128&d=identicon&r=PG&f=1", "display_name": "cozimo", "link": "https://stackoverflow.com/users/8964279/cozimo"}, "is_accepted": false, "score": 0, "last_activity_date": 1544586725, "creation_date": 1544586725, "answer_id": 53735806, "question_id": 53717567, "link": "https://stackoverflow.com/questions/53717567/cannot-run-rails-server-cannot-locate-sqlite3/53735806#53735806", "title": "Cannot run rails server cannot locate sqlite3", "body": "<p>I deleted everything. Ruby, rails, sqlite. Then I downloaded RailsInstaller and just used that and it worked okay. The first time I tried RailsInstaller, it did some weird thing where it seemed to have had an error. This time it didn't.</p>\n"}], "owner": {"reputation": 81, "user_id": 8964279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c96f479e47b8350362c4d32a3be2a872?s=128&d=identicon&r=PG&f=1", "display_name": "cozimo", "link": "https://stackoverflow.com/users/8964279/cozimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1544586725, "creation_date": 1544504031, "question_id": 53717567, "link": "https://stackoverflow.com/questions/53717567/cannot-run-rails-server-cannot-locate-sqlite3", "title": "Cannot run rails server cannot locate sqlite3", "body": "<p>I couldn't find an answer for my issue on Stack Overflow and I think it may be because I installed SQLite3 the wrong way after following a youtube tutorial.</p>\n\n<p>I followed this tutorial to install SQLite <a href=\"https://www.youtube.com/watch?v=zOJWL3oXDO8&amp;t=176s\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=zOJWL3oXDO8&amp;t=176s</a>. I initially installed <a href=\"http://sqlite-tools-win32-x86-3260000.zip\" rel=\"nofollow noreferrer\">http://sqlite-tools-win32-x86-3260000.zip</a> under the Precompiled Binaries for Windows section on the SQLite website. I extracted the files then pasted it into C:\\sqlite (I changed the name of the folder to sqlite). Then I went to Edit the System Environmental Variables (I just typed it into Cortana search) and then clicked Environmental Variables. I clicked Path, then Edit, then New, then I typed in C:\\sqlite.</p>\n\n<p>I ran the following on my windows 10 computer.</p>\n\n<p>$ rails new blog</p>\n\n<p>$ cd blog</p>\n\n<p>$ bundle install</p>\n\n<p>$ rails server</p>\n\n<p>And then it returned the following:</p>\n\n<pre><code>    Traceback (most recent call last):\n        43: from bin/rails:4:in `&lt;main&gt;'\n        42: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:291:in `require'\n        41: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:257:in `load_dependency'\n        40: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:291:in `block in require'\n        39: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:29:in `require'\n        38: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:20:in `require_with_bootsnap_lfi'\n        37: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/loaded_features_index.rb:65:in `register'\n        36: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `block in require_with_bootsnap_lfi'\n        35: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require'\n        34: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-5.2.2/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\n        33: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-5.2.2/lib/rails/command.rb:46:in `invoke'\n        32: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-5.2.2/lib/rails/command/base.rb:65:in `perform'\n        31: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/thor-0.20.3/lib/thor.rb:387:in `dispatch'\n        30: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/thor-0.20.3/lib/thor/invocation.rb:126:in `invoke_command'\n        29: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/thor-0.20.3/lib/thor/command.rb:27:in `run'\n        28: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-5.2.2/lib/rails/commands/server/server_command.rb:142:in `perform'\n        27: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-5.2.2/lib/rails/commands/server/server_command.rb:142:in `tap'\n        26: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-5.2.2/lib/rails/commands/server/server_command.rb:145:in `block in perform'\n        25: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:291:in `require'\n        24: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:257:in `load_dependency'\n        23: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:291:in `block in require'\n        22: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:29:in `require'\n        21: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:20:in `require_with_bootsnap_lfi'\n        20: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/loaded_features_index.rb:65:in `register'\n        19: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `block in require_with_bootsnap_lfi'\n        18: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require'\n        17: from D:/Programming Projects/Web Design Projects and Notes/Rails/Rails Learn/blog/config/application.rb:7:in `&lt;top (required)&gt;'\n        16: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bundler-1.17.1/lib/bundler.rb:114:in `require'\n        15: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bundler-1.17.1/lib/bundler/runtime.rb:65:in `require'\n        14: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bundler-1.17.1/lib/bundler/runtime.rb:65:in `each'\n        13: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bundler-1.17.1/lib/bundler/runtime.rb:76:in `block in require'\n        12: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bundler-1.17.1/lib/bundler/runtime.rb:76:in `each'\n        11: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bundler-1.17.1/lib/bundler/runtime.rb:81:in `block (2 levels) in require'\n        10: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:29:in `require'\n         9: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:20:in `require_with_bootsnap_lfi'\n         8: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/loaded_features_index.rb:65:in `register'\n         7: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `block in require_with_bootsnap_lfi'\n         6: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require'\n         5: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/sqlite3-1.3.13-x64-mingw32/lib/sqlite3.rb:2:in `&lt;top (required)&gt;'\n         4: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/sqlite3-1.3.13-x64-mingw32/lib/sqlite3.rb:6:in `rescue in &lt;top (required)&gt;'\n         3: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:291:in `require'\n         2: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:257:in `load_dependency'\n         1: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.2/lib/active_support/dependencies.rb:291:in `block in require'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.2/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:32:in `require': cannot load such file -- sqlite3/sqlite3_native (LoadError)\n</code></pre>\n\n<p>The thing is, I then tried to delete the C:\\sqlite folder and then delete the edit I made in Environmental Variables. Then I ran the following in command line:</p>\n\n<p>$ gem 'sqlite3', git: '<a href=\"https://github.com/sparklemotion/sqlite3-ruby\" rel=\"nofollow noreferrer\">https://github.com/sparklemotion/sqlite3-ruby</a>'</p>\n\n<p>It then returned: </p>\n\n<p>ERROR: While executing gem ... (Gem::CommandLineError)\nUnknown command sqlite3,</p>\n\n<p>So now I'm really confused.</p>\n"}, {"tags": ["ruby", "gcc", "aix"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1544502154, "post_id": 53717161, "comment_id": 94288454, "body": "You should always include the <b>exact</b> error message you received and the <b>exact</b> steps necessary to reproduce it. Please read <a href=\"https://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, Verifiable example</a> then come back here and update your question to reflect the guidelines in that article."}, {"owner": {"reputation": 37, "user_id": 4209939, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_orBSJhNXAs/AAAAAAAAAAI/AAAAAAAAAEs/jT1kpGQZnpA/photo.jpg?sz=128", "display_name": "Paras Bothra", "link": "https://stackoverflow.com/users/4209939/paras-bothra"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1544503968, "post_id": 53717161, "comment_id": 94288900, "body": "Updated the exact error message as well as the exact steps necessary to reproduce the error."}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 4209939, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_orBSJhNXAs/AAAAAAAAAAI/AAAAAAAAAEs/jT1kpGQZnpA/photo.jpg?sz=128", "display_name": "Paras Bothra", "link": "https://stackoverflow.com/users/4209939/paras-bothra"}, "edited": false, "score": 0, "creation_date": 1544510334, "post_id": 53718020, "comment_id": 94290854, "body": "Thanks for the update. I get different error on using GNU make. Updated the post with the error."}, {"owner": {"reputation": 37, "user_id": 4209939, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_orBSJhNXAs/AAAAAAAAAAI/AAAAAAAAAEs/jT1kpGQZnpA/photo.jpg?sz=128", "display_name": "Paras Bothra", "link": "https://stackoverflow.com/users/4209939/paras-bothra"}, "edited": false, "score": 0, "creation_date": 1544528799, "post_id": 53718020, "comment_id": 94300423, "body": "Thank you very much. I am able to compile ruby now. I am facing another issue while installing fluentd gems for which I&#39;ll create another question."}], "tags": [], "owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "is_accepted": true, "score": 1, "last_activity_date": 1544521518, "last_edit_date": 1544521518, "creation_date": 1544506768, "answer_id": 53718020, "question_id": 53717161, "link": "https://stackoverflow.com/questions/53717161/compile-ruby-from-source-on-aix-7-1/53718020#53718020", "title": "Compile Ruby from source on AIX 7.1", "body": "<p>The issue is that you are using AIX's built-in copy of <code>make</code> and it does not support the command-line option <code>-C</code>. That option is available in <a href=\"https://www.gnu.org/software/make/\" rel=\"nofollow noreferrer\">GNU make</a>.</p>\n\n<p>If you run <code>make -v</code> and do not see output like the following then you are not using GNU make:</p>\n\n<pre><code>GNU Make 3.81\nCopyright (C) 2006  Free Software Foundation, Inc.\n</code></pre>\n\n<p>Run the command <code>which make</code> and it will return either <code>/usr/bin/make</code> or <code>/opt/freeware/bin/make</code> (or a similar path outside of <code>/usr/bin</code>):</p>\n\n<ul>\n<li><p>If it returns <code>/usr/bin/make</code> then you do not have GNU make installed on your system and will need to follow <a href=\"https://www.ibm.com/support/knowledgecenter/en/SSWSR9_11.6.0/com.ibm.pim.ins.doc/pim_tsk_installinggnuutilities.html\" rel=\"nofollow noreferrer\">one</a> <a href=\"http://www.perzl.org/aix/index.php?n=Main.Make\" rel=\"nofollow noreferrer\">of</a> <a href=\"https://www.ibm.com/developerworks/community/forums/html/topic?id=73b8da45-3a1b-445e-b902-6b693adc11ad\" rel=\"nofollow noreferrer\">several</a> tutorials to get it installed on AIX.</p></li>\n<li><p>If it returns <code>/opt/freeware/bin/make</code> then you do have GNU make installed, but it's not reflected in <code>$PATH</code>. You can add it to your path temporarily while you compile Ruby by running <code>export PATH=/opt/freeware/bin:$PATH</code> before you run the <code>make</code> command.</p></li>\n</ul>\n\n<p><strong>Update:</strong></p>\n\n<p>I would encourage you to open a separate question for your current build trouble, since the original question was about the <code>-C</code> flag for <code>make</code> not working on AIX, and now you have a separate question about running GNU make with an entirely different set of issues and possible solutions.</p>\n\n<p>That said, it's possible you may be able to resolve your issue by starting over and running <code>./configure LIBTOOL='/usr/bin/libtool --tag=CC'</code> (or whatever your path is to <code>libtool</code>). This is based off the following messages:</p>\n\n<pre><code>libtool: compile: unable to infer tagged configuration\nlibtool: compile: specify a tag with `--tag'\n</code></pre>\n\n<p>If this doesn't work then you'll probably have to edit the <code>Makefile</code> by looking for those specific invocations of <code>libtool</code> and append <code>--tag=CC</code> to them one by one until you're able to progress beyond these errors.</p>\n\n<p>Both solutions are assuming that the only code being compiled is C. To my knowledge, everything in MRI that needs to be compiled is written in C, but if anything is written in C++ then the <code>libtool</code> invocations would require <code>--tag=CXX</code>. You can read more about tags <a href=\"https://www.gnu.org/software/libtool/manual/html_node/Tags.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 37, "user_id": 4209939, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_orBSJhNXAs/AAAAAAAAAAI/AAAAAAAAAEs/jT1kpGQZnpA/photo.jpg?sz=128", "display_name": "Paras Bothra", "link": "https://stackoverflow.com/users/4209939/paras-bothra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 53718020, "answer_count": 1, "score": 1, "last_activity_date": 1544521518, "creation_date": 1544500539, "last_edit_date": 1544510581, "question_id": 53717161, "link": "https://stackoverflow.com/questions/53717161/compile-ruby-from-source-on-aix-7-1", "title": "Compile Ruby from source on AIX 7.1", "body": "<p>I am trying to compile Ruby 2.4.5 from source using gcc compiler on AIX 7.1. The configure works fine, but the make fails giving an error C is not a recognized flag. Anybody faced the same issue and managed to compile ruby on AIX 7.1?</p>\n\n<pre><code>Steps followed:\n\n1) ./configure --disable-install-doc CC=\"gcc\" CFLAGS=\"-maix64 -mminimal-toc\" CXX=\"g++\" CXXFLAGS=\"-maix64 -mminimal-toc\" NM=\"nm -X64\" AR=\"ar -X64\" LDFLAGS=\"-maix64\" EXTLDFLAGS=\" -- works perfectly fine\n\n2) make - fails with the below error\n\n    make: Not a recognized flag: C\n    usage: make [-einqrst] [-k|-S] [-d[A|adg[1|2]mstv]] [-D variable] [-f makefile] [-j [jobs]] [variable=value ...] [target ...]\n    make: 1254-004 The error code from the last command is 2.\n    Stop.\n    make: 1254-004 The error code from the last command is 2.\n    Stop.\n    make: 1254-004 The error code from the last command is 2.\n</code></pre>\n\n<p>Update :</p>\n\n<p>Switching to GNU make gives the below error:</p>\n\n<pre><code>Making all in man\nmake[5]: Entering directory '/test/ruby-2.4.5/tst/ext/fiddle/libffi-3.2.1/man'\nmake[5]: Nothing to be done for 'all'.\nmake[5]: Leaving directory '/test/ruby-2.4.5/tst/ext/fiddle/libffi-3.2.1/man'\nmake[5]: Entering directory '/test/ruby-2.4.5/tst/ext/fiddle/libffi-3.2.1'\n  CC       src/prep_cif.lo\n  CC       src/types.lo\n  CC       src/raw_api.lo\n  CC       src/java_raw_api.lo\n  CC       src/closures.lo\n  CC       src/powerpc/ffi_darwin.lo\n../../../../ext/fiddle/libffi-3.2.1/src/powerpc/ffi_darwin.c: In function 'ffi_p                                                                                                                                                             rep_args':\n../../../../ext/fiddle/libffi-3.2.1/src/powerpc/ffi_darwin.c:112:17: warning: un                                                                                                                                                             used variable 'abi' [-Wunused-variable]\n   const ffi_abi abi = ecif-&gt;cif-&gt;abi;\n                 ^\n  CPPAS    src/powerpc/aix.lo\nlibtool: compile: unable to infer tagged configuration\nlibtool: compile: specify a tag with `--tag'\nMakefile:1335: recipe for target 'src/powerpc/aix.lo' failed\nmake[5]: *** [src/powerpc/aix.lo] Error 1\nmake[5]: Leaving directory '/test/ruby-2.4.5/tst/ext/fiddle/libffi-3.2.1'\nMakefile:1596: recipe for target 'all-recursive' failed\nmake[4]: *** [all-recursive] Error 1\nmake[4]: Leaving directory '/test/ruby-2.4.5/tst/ext/fiddle/libffi-3.2.1'\nMakefile:730: recipe for target 'all' failed\nmake[3]: *** [all] Error 2\nmake[3]: Leaving directory '/test/ruby-2.4.5/tst/ext/fiddle/libffi-3.2.1'\nMakefile:370: recipe for target 'libffi-3.2.1/.libs/libffi_convenience.a' failed\nmake[2]: *** [libffi-3.2.1/.libs/libffi_convenience.a] Error 2\nmake[2]: Leaving directory '/test/ruby-2.4.5/tst/ext/fiddle'\nexts.mk:212: recipe for target 'ext/fiddle/all' failed\nmake[1]: *** [ext/fiddle/all] Error 2\nmake[1]: Leaving directory '/test/ruby-2.4.5/tst'\nuncommon.mk:220: recipe for target 'build-ext' failed\nmake: *** [build-ext] Error 2\n</code></pre>\n"}, {"tags": ["ruby", "activerecord", "terminal", "rails-activerecord"], "answers": [{"tags": [], "owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "is_accepted": false, "score": 1, "last_activity_date": 1544493410, "creation_date": 1544493410, "answer_id": 53716296, "question_id": 53716065, "link": "https://stackoverflow.com/questions/53716065/how-to-show-active-record-tables-and-their-columns-on-the-cli/53716296#53716296", "title": "How to show active-record tables and their columns on the CLI?", "body": "<p>There's a couple ways you can get this information about your database out but this should work from a <code>rails console</code>:</p>\n\n<pre><code>ActiveRecord::Base.connection.tables.each do |table|\n  next unless ActiveRecord.const_defined?(table.classify) &amp;&amp; !table.match(/schema_migrations/)\n  puts table.classify.to_s\n  puts '-----'\n  puts table.classify.constantize.column_names\n  puts\n  puts\nend;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2024, "user_id": 5511315, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBuFb.png?s=128&g=1", "display_name": "noraj", "link": "https://stackoverflow.com/users/5511315/noraj"}, "is_accepted": false, "score": 0, "last_activity_date": 1544542636, "creation_date": 1544542636, "answer_id": 53727500, "question_id": 53716065, "link": "https://stackoverflow.com/questions/53716065/how-to-show-active-record-tables-and-their-columns-on-the-cli/53727500#53727500", "title": "How to show active-record tables and their columns on the CLI?", "body": "<blockquote>\n  <p>You are probably seeking:</p>\n  \n  <p><code>ActiveRecord::Base.connection.tables</code></p>\n  \n  <p>and</p>\n  \n  <p><code>ActiveRecord::Base.connection.table_structure(\"projects\")</code></p>\n</blockquote>\n\n<p>Ref <a href=\"https://stackoverflow.com/questions/2098131/rails-how-to-list-database-tables-objects-using-the-rails-console\">Rails: How to list database tables/objects using the Rails console?</a></p>\n"}, {"tags": [], "owner": {"reputation": 2301, "user_id": 19317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47035e07012da3162b6e83650ee3abe0?s=128&d=identicon&r=PG", "display_name": "aridlehoover", "link": "https://stackoverflow.com/users/19317/aridlehoover"}, "is_accepted": false, "score": 0, "last_activity_date": 1544591785, "creation_date": 1544591785, "answer_id": 53736485, "question_id": 53716065, "link": "https://stackoverflow.com/questions/53716065/how-to-show-active-record-tables-and-their-columns-on-the-cli/53736485#53736485", "title": "How to show active-record tables and their columns on the CLI?", "body": "<p>If your goal is just to see the table structure on the command line, you could print the contents of <code>db/schema.rb</code> which Rails maintains as you run your migrations. The file includes table names, along with column names and data types. It even includes indices.</p>\n\n<p>On macOS or Linux: <code>cat db/schema.rb</code></p>\n\n<p>On Windows: <code>type db/schema.rb</code></p>\n"}], "owner": {"reputation": 49, "user_id": 10062681, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e93fa197d322f71956b14516217fe561?s=128&d=identicon&r=PG&f=1", "display_name": "Kenkuts", "link": "https://stackoverflow.com/users/10062681/kenkuts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 812, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1544591785, "creation_date": 1544491415, "question_id": 53716065, "link": "https://stackoverflow.com/questions/53716065/how-to-show-active-record-tables-and-their-columns-on-the-cli", "title": "How to show active-record tables and their columns on the CLI?", "body": "<p>I am new to active-record and I am doing table migrations. I want to see tables that I have migrated with their corresponding column names on the terminal. Does anyone know the command to do this?</p>\n\n<p>Let say I have 2 tables cats and dogs, is there a command that would show something like this in my CLI? </p>\n\n<pre><code>dogs\n---------\nname \nbreed\nage\n\ncats \n---------\nname\nbreed\nage\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "imagemagick", "rmagick"], "answers": [{"comments": [{"owner": {"reputation": 186, "user_id": 6759431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb40b68c16728a10a291126fef1cbd3b?s=128&d=identicon&r=PG", "display_name": "mudl", "link": "https://stackoverflow.com/users/6759431/mudl"}, "edited": false, "score": 0, "creation_date": 1544494160, "post_id": 53716319, "comment_id": 94286906, "body": "OH! Of course! Just insert line breaks into the string! Why didn&#39;t I think of this. You are a genius, lol. Thank you!"}, {"owner": {"reputation": 186, "user_id": 6759431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb40b68c16728a10a291126fef1cbd3b?s=128&d=identicon&r=PG", "display_name": "mudl", "link": "https://stackoverflow.com/users/6759431/mudl"}, "edited": false, "score": 0, "creation_date": 1544495525, "post_id": 53716319, "comment_id": 94287160, "body": "Also, there is one other issue that is a hassle with Japanese. There is a script called Katakana for foreign names and words. In it is a &quot;\u30fc&quot; (i.e. in the name &quot;Cody&quot;, &quot;\u30b3\u30fc\u30c7\u30a3&quot;). This character is rotated vertical when the type is oriented vertical, so for this character only I guess I&#39;ll have to sort something else out...hmmm..."}, {"owner": {"reputation": 27168, "user_id": 7355741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CMNt.jpg?s=128&g=1", "display_name": "fmw42", "link": "https://stackoverflow.com/users/7355741/fmw42"}, "reply_to_user": {"reputation": 186, "user_id": 6759431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb40b68c16728a10a291126fef1cbd3b?s=128&d=identicon&r=PG", "display_name": "mudl", "link": "https://stackoverflow.com/users/6759431/mudl"}, "edited": false, "score": 0, "creation_date": 1544498320, "post_id": 53716319, "comment_id": 94287699, "body": "I do not think your issue is related to vertical orientation. You should create your text string in a UTF-8 compatible text editor and save as a file that is UTF-8 compatible. Then use label:@file.txt to load the text from the file. That might take care of your issue. If it fails to read the file, then you might have to edit the policy.xml file to permit the use of the @file structure. See <a href=\"https://imagemagick.org/script/resources.php\" rel=\"nofollow noreferrer\">imagemagick.org/script/resources.php</a> for information about the policy.xml file"}], "tags": [], "owner": {"reputation": 27168, "user_id": 7355741, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6CMNt.jpg?s=128&g=1", "display_name": "fmw42", "link": "https://stackoverflow.com/users/7355741/fmw42"}, "is_accepted": true, "score": 1, "last_activity_date": 1544493594, "creation_date": 1544493594, "answer_id": 53716319, "question_id": 53716021, "link": "https://stackoverflow.com/questions/53716021/rmagick-imagemagick-text-processing-too-slow-for-heroku/53716319#53716319", "title": "RMagick/Imagemagick text-processing too slow for Heroku", "body": "<blockquote>\n  <p>YES it is necessary to make a new image for each letter because as far\n  as I can tell there is no (right-side-up) vertical text format for\n  ImageMagick</p>\n</blockquote>\n\n<p>In ImageMagick command line, you can create a vertically aligned text string image by placing line feeds after each character.</p>\n\n<pre><code>convert -background white -fill black -pointsize 18 -font arial -gravity center label:\"t\\ne\\ns\\nt\\ni\\nn\\ng\" result.png\n</code></pre>\n\n<p><br></p>\n\n<p><a href=\"https://i.stack.imgur.com/ePLes.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ePLes.png\" alt=\"enter image description here\"></a></p>\n\n<p>Does this help you? Or is that not practical?</p>\n"}], "owner": {"reputation": 186, "user_id": 6759431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb40b68c16728a10a291126fef1cbd3b?s=128&d=identicon&r=PG", "display_name": "mudl", "link": "https://stackoverflow.com/users/6759431/mudl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 53716319, "answer_count": 1, "score": 0, "last_activity_date": 1544594058, "creation_date": 1544491071, "last_edit_date": 1544594058, "question_id": 53716021, "link": "https://stackoverflow.com/questions/53716021/rmagick-imagemagick-text-processing-too-slow-for-heroku", "title": "RMagick/Imagemagick text-processing too slow for Heroku", "body": "<p>Japan has massive gift giving culture and every year we have to print out tons of those \"Noshi\"s. I made a simply rails program for adding text to a blank noshi image to add to our system (already built in rails).</p>\n\n<p>For reference, basically I wanted to make an open version of this that dosen't have a watermark: www.noshi.jp</p>\n\n<p>Here's what the controller looks like:\n  def create\n    @noshi = Noshi.new(noshi_params)</p>\n\n<pre><code>  # Set up variables\n  ntype = @noshi.ntype\n  omote = @noshi.omotegaki\n  olength = omote.length\n  opsize = (168 - (olength * 12))\n  namae = @noshi.namae\n  namae2 = @noshi.namae2\n  # namae3 = @noshi.namae3\n  # namae4 = @noshi.namae4\n  # namae5 = @noshi.namae5\n\n    replacements = [ [\"(\u682a)\", \"\u3231\"], [\"(\u6709)\", \"\u3232\"] ]\n    replacements.each {|replacement| namae.gsub!(replacement[0], replacement[1])}\n    replacements.each {|replacement| namae2.gsub!(replacement[0], replacement[1])}\n    # replacements.each {|replacement| namae3.gsub!(replacement[0], replacement[1])}\n    # replacements.each {|replacement| namae4.gsub!(replacement[0], replacement[1])}\n    # replacements.each {|replacement| namae5.gsub!(replacement[0], replacement[1])}\n\n    names = []\n    names += [namae, namae2] # removed namae3, namae4, namae5 for the time being\n    longest = names.max_by(&amp;:length)\n    nlength = longest.length\n  npsize = (144 - (nlength * 12))\n  i = 0\n  # Pull Noshi Type\n  noshi_img = MiniMagick::Image.open(\"#{ENV['GBUCKET_PREFIX']}noshi/noshi#{ntype}.jpg\")\n    # Resize to A4 @ 300dpi\n    noshi_img.resize \"2480x3508\"\n    # Iterate through each character\n    omote.each_char do |c|\n      # Open new blank/transparent noshi\n      chars = MiniMagick::Image.open(\"#{ENV['GBUCKET_PREFIX']}noshi/noshi_blank.png\")\n      chars.resize \"2480x3508\"\n      # Draw Each Omotegaki Character\n      chars.combine_options do |d|\n        d.gravity 'North'\n        # Placement based on point size\n        plcmnt = ((opsize / 12 * 12) + (opsize * i * 1.2))\n        d.draw \"text 0,#{plcmnt} '#{c}'\"\n        d.font 'TakaoPMincho'\n        d.pointsize opsize\n        d.fill(\"#000000\")\n        i += 1\n      end\n      # Composite each letter as iterated\n      noshi_img = noshi_img.composite(chars) do |comp|\n        comp.compose \"Over\"    # OverCompositeOp\n        comp.geometry \"+0+0\" # copy second_image onto first_image from (0, 0)\n      end\n    end\n  # Iterator Reset\n  i = 0\n    # Draw Name Text (Line 1)\n    namae.each_char do |c|\n      # Iterate through each character\n      # Open new blank/transparent noshi\n      chars = MiniMagick::Image.open(\"#{ENV['GBUCKET_PREFIX']}noshi/noshi_blank.png\")\n      # Resize to a square so it's easy to flip\n      chars.resize \"2480x3508\"\n      chars.combine_options do |d|\n      # Middle position for first line so set to 0\n      xplcmnt =  (npsize / 12) * 0\n      yplcmnt = (625 - npsize) - (npsize * i)\n        d.gravity 'south'\n        # Placement based on point size, fix for katakana dash\n        # positive x is \n        if c == '\u30fc' \n          yplcmnt += 15\n          d.draw \"text 0,#{yplcmnt} '|'\"\n          d.pointsize (npsize * 0.85)\n        else\n          d.draw \"text 0,#{yplcmnt} '#{c}'\"\n          d.pointsize npsize\n        end\n        d.font 'TakaoPMincho'\n        d.fill(\"#000000\")\n        i += 1\n      end\n      # Composite each letter as iterated\n      noshi_img = noshi_img.composite(chars) do |comp|\n        comp.compose \"Over\"    # OverCompositeOp\n        comp.geometry \"+0+0\" # copy second_image onto first_image from (0, 0)\n      end\n    end\n  # Iterator Reset\n  i = 0\n    # Draw Name Text (Line 2)\n    namae2.each_char do |c|\n      # Iterate through each character\n      # Open new blank/transparent noshi\n      chars = MiniMagick::Image.open(\"#{ENV['GBUCKET_PREFIX']}noshi/noshi_blank.png\")\n      # Resize to a square so it's easy to flip\n      chars.resize \"2480x3508\"\n      chars.combine_options do |d|\n      # Next position for second line so set by font size\n      xplcmnt = (npsize / 6) - npsize * 1.45\n      yplcmnt = (625 - (npsize * 2)) - (npsize * i)\n        d.gravity 'south'\n        # Placement based on point size, fix for katakana dash\n        if c == '\u30fc' \n          yplcmnt += 15\n          d.draw \"text #{xplcmnt},#{yplcmnt} '|'\"\n          d.pointsize (npsize * 0.85)\n        else\n          d.draw \"text #{xplcmnt},#{yplcmnt} '#{c}'\"\n          d.pointsize npsize\n        end\n        d.font 'TakaoPMincho'\n        d.fill(\"#000000\")\n        i += 1\n      end\n      # Composite each letter as iterated\n      noshi_img = noshi_img.composite(chars) do |comp|\n        comp.compose \"Over\"    # OverCompositeOp\n        comp.geometry \"+0+0\" # copy second_image onto first_image from (0, 0)\n      end\n    end\n\n  # Setup and save the file\n  noshi_img.format \"png\"\n  fname = \"#{@noshi.omotegaki}_#{@noshi.namae}\"\n  dkey = Time.now.strftime('%Y%m%d%H%M%S')\n  ext = '.png'\n  finlname = fname + dkey + ext\n  noshi_img.write finlname\n  @noshi.image = File.open(finlname)\n  File.delete(finlname) if File.exist?(finlname)\n\nrespond_to do |format|\n  if @noshi.save\n    format.html { redirect_to @noshi, notice: '\u71a8\u6597\u304c\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u3002' }\n    format.json { render :show, status: :created, location: @noshi }\n  else\n    format.html { render :new }\n    format.json { render json: @noshi.errors, status: :unprocessable_entity }\n  end\nend end\n</code></pre>\n\n<p>How it works.\n1. User pics a noshi background, selects a noshi header type (for \u304a\u6b73\u66ae or \u304a\u795d\u3044 or whatever), and inputs a name\n2. The app then takes a corresponding file from the gCloud for the noshi background.\n3. The app takes each letter and calculates the font size and placement based on the number of total letters and lines. \n4. It takes an empty image file and puts each letter onto it's own image and then merges all of them into a final image.</p>\n\n<p>YES it is necessary to make a new image for each letter because as far as I can tell there is no (right-side-up) vertical text format for ImageMagick (a pretty crucial function for a large portion of the planet [China, Japan, Korea] so I find it pretty surprising that it's missing this).</p>\n\n<p>This works fine in development and for our purposes I don't mind it being slow. However, on Heroku this returns an error if it takes over 30 seconds to process, even though the noshi is correctly created every time. </p>\n\n<p>THE QUESTION:</p>\n\n<p>I read that \"scale\" instead of \"resize\" may help, but looking at my code I feel like there has to be a more efficient way to do what I've done here. I tried using base images with smaller file sizes, this didn't help much.</p>\n\n<p><strong>Is there a more efficient way to do this?</strong> </p>\n\n<p><strong>If not, is there a way to send the user somewhere to wait while the noshi completes so it doesn't return an error every time?</strong></p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>Just coming back to show the working Ruby on Rails controller I ended up with:</p>\n\n<pre><code>def create\n        @noshi = Noshi.new(noshi_params)\n\n        # Set up variables\n        ntype = @noshi.ntype\n        omote = @noshi.omotegaki\n        omote_length = omote.length\n        omote_point_size = (168 - (omote_length * 12))\n\n        #make an array with each of the name lines entered\n        name_array = Array.new\n        name_array &lt;&lt; @noshi.namae\n        name_array &lt;&lt; @noshi.namae2\n        name_array &lt;&lt; @noshi.namae3\n        name_array &lt;&lt; @noshi.namae4\n        name_array &lt;&lt; @noshi.namae5\n\n        #replace multi-character prefixes with their single charcter versions\n        #replace katakana dash with capital I\n        #insert line breaks after each letter for Japanese vertical type\n        name_array.each do |namae|\n            replacements = [ [\"(\u682a)\", \"\u3231\"], [\"(\u6709)\", \"\u3232\"], [\"\u30fc\", \"|\"] ]\n            replacements.each {|replacement| namae.gsub!(replacement[0], replacement[1])}\n        end\n        def add_line_breaks(string)\n            string.scan(/.{1}/).join(\"\\n\")\n        end\n        name_array.map!{ |namae| add_line_breaks(namae)}\n        #add line breaks after each character for the omote as well\n        omote = add_line_breaks(omote)\n        #find the longest string (important: after the character concatenation) in the name array to calculate the point size for the names section\n        name_array_max_length = (name_array.map { |namae| namae.length }).max\n        name_point_size = (204 - (name_array_max_length * 10))\n        #max omote size is 156, and the name needs to be an order smaller than that by default.\n        if name_point_size &gt; 108\n            name_point_size = 108\n        end\n\n        # Pull Noshi Type\n        noshi_img = MiniMagick::Image.open(\"#{ENV['GBUCKET_PREFIX']}noshi/noshi#{ntype}.jpg\")\n        # Resize to A4 @ 300dpi\n        noshi_img.resize \"2480x3508\"\n\n        #create the overlay image\n        name_overlay = MiniMagick::Image.open(\"#{ENV['GBUCKET_PREFIX']}noshi/noshi_blank.png\")\n        name_overlay.resize \"2480x3508\"\n        #first time for omote\n        name_overlay.combine_options do |image|\n            image.gravity 'North'\n            # Placement based on point size\n            omote_placement_y = (348 - (omote_length * (omote_point_size / 2)))\n            image.font 'TakaoPMincho'\n            image.pointsize omote_point_size\n            image.fill(\"#000000\")\n            image.draw \"text 0,#{omote_placement_y} '#{omote}'\"\n        end\n        #count number of names in array, add a name for each time\n        name_array.count.times do |i|\n            name_overlay.combine_options do |image|\n                image.gravity 'North'\n                # Placement based on point size and iteration\n                name_placement_x = (0 - i * name_point_size)\n                name_placement_y = 1150 + ((i * name_point_size) - (name_point_size / 2))\n                image.font 'TakaoPMincho'\n                image.pointsize name_point_size\n                image.fill(\"#000000\")\n                image.draw \"text #{name_placement_x},#{name_placement_y} '#{name_array[i]}'\"\n            end\n        end\n\n        noshi_img = noshi_img.composite(name_overlay) do |comp|\n            comp.compose \"Over\"    #OverCompositeOp\n            comp.geometry \"+0+0\"   #copy second_image onto first_image from (0, 0)\n        end\n\n\n        # Setup and save the file\n        noshi_img.format \"png\"\n        #name the file\n        fname = \"#{@noshi.omotegaki}_#{@noshi.namae}\"\n        dkey = Time.now.strftime('%Y%m%d%H%M%S')\n        ext = '.png'\n        final_name = fname + dkey + ext\n        #write a temporary version\n        noshi_img.write final_name\n        #write/stream the file to the uploader\n        @noshi.image = File.open(final_name)\n        #delete the original temporary\n        File.delete(final_name) if File.exist?(final_name)\n\n    respond_to do |format|\n        if @noshi.save\n        format.html { redirect_to @noshi, notice: '\u71a8\u6597\u304c\u4f5c\u6210\u3055\u308c\u307e\u3057\u305f\u3002' }\n        format.json { render :show, status: :created, location: @noshi }\n        else\n        format.html { render :new }\n        format.json { render json: @noshi.errors, status: :unprocessable_entity }\n        end\n    end\n    end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 5, "last_activity_date": 1544491292, "last_edit_date": 1544491292, "creation_date": 1544490944, "answer_id": 53716010, "question_id": 53715898, "link": "https://stackoverflow.com/questions/53715898/rails-5-scope-like-multiple-partial-strings/53716010#53716010", "title": "Rails 5 scope like multiple partial strings", "body": "<p>PostgreSQL allows you to apply a boolean valued operator to an entire array of values using the <a href=\"https://www.postgresql.org/docs/current/functions-comparisons.html#id-1.5.8.28.16\" rel=\"nofollow noreferrer\"><code>op any(array_expr)</code> construct</a>:</p>\n\n<blockquote>\n  <p><strong>9.23.3. ANY/SOME (array)</strong></p>\n\n<pre><code>expression operator ANY (array expression)\nexpression operator SOME (array expression)\n</code></pre>\n  \n  <p>The right-hand side is a parenthesized expression, which must yield an array value. The left-hand expression is evaluated and compared to each element of the array using the given <code>operator</code>, which must yield a Boolean result. The result of <code>ANY</code> is \u201ctrue\u201d if any true result is obtained. The result is \u201cfalse\u201d if no true result is found (including the case where the array has zero elements).</p>\n</blockquote>\n\n<p>PostgreSQL also supports the <a href=\"https://www.postgresql.org/docs/11/arrays.html#ARRAYS-INPUT\" rel=\"nofollow noreferrer\">array constructor syntax</a> for creating arrays:</p>\n\n<pre><code>array[value, value, ...]\n</code></pre>\n\n<p>Conveniently, ActiveRecord will expand a placeholder as a comma-delimited list when the value is an array.</p>\n\n<p>Putting these together gives us:</p>\n\n<pre><code>scope :by_templates, -&gt;(templates) { joins(:template).where('templates.label ~* any(array[?])', templates) }\n</code></pre>\n\n<p>As an aside, if you're using the case-insensitive regex operator (<code>~*</code>) as a case-insensitive comparison (i.e. no real regex pattern matching going on) then you might want to use <code>upper</code> instead:</p>\n\n<pre><code># Yes, this class method is still a scope.\ndef self.by_templates(templates)\n  joins(:template).where('upper(templates.label) = any(array[?])', templates.map(&amp;:upcase) }\nend\n</code></pre>\n\n<p>Then you could add an index to <code>templates</code> on <code>upper(label)</code> to speed things up and avoid possible issues with stray regex metacharacters in the <code>templates</code>. I tend to use upper case for this sort of thing because of oddities lie <code>'\u00df'.upcase</code> being <code>'SS'</code> but <code>'SS'.downcase</code> being <code>'ss'</code>.</p>\n"}], "owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 3, "accepted_answer_id": 53716010, "answer_count": 1, "score": 1, "last_activity_date": 1544491292, "creation_date": 1544489774, "question_id": 53715898, "link": "https://stackoverflow.com/questions/53715898/rails-5-scope-like-multiple-partial-strings", "title": "Rails 5 scope like multiple partial strings", "body": "<p>Say I have a scope like this:</p>\n\n<pre><code>scope :by_templates, -&gt;(t) { joins(:template).where('templates.label ~* ?', t) }\n</code></pre>\n\n<p>How can I retrieve multiple templates with <code>t</code> like so?</p>\n\n<pre><code>Document.first.by_templates(%w[email facebook])\n</code></pre>\n\n<p>This code returns this error.</p>\n\n<pre><code>PG::DatatypeMismatch: ERROR:  argument of AND must be type boolean, not type record\n   LINE 1: ...template_id\" WHERE \"documents\".\"user_id\" = $1 AND (templates...\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "irb", "pry", "rails-console"], "answers": [{"tags": [], "owner": {"reputation": 779, "user_id": 833555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d99cf1bcf274d03c06d2f218f73cff0d?s=128&d=identicon&r=PG", "display_name": "Gregory Ostermayr", "link": "https://stackoverflow.com/users/833555/gregory-ostermayr"}, "is_accepted": false, "score": 1, "last_activity_date": 1544498759, "last_edit_date": 1544498759, "creation_date": 1544497591, "answer_id": 53716766, "question_id": 53715854, "link": "https://stackoverflow.com/questions/53715854/calculating-exact-duration-time-from-a-datetime-column-in-postgres-using-rails/53716766#53716766", "title": "Calculating exact duration time from a DateTime column in Postgres using Rails", "body": "<p>use the helper instead of including the helpers manually</p>\n\n<pre><code> &gt; helper.time_ago_in_words(2.hours.ago, true)\n =&gt; \"2 hours\" \n\n &gt; helper.time_ago_in_words((2.hours.ago + 5.seconds), true)\n =&gt; \"1 hour, 59 minutes, and 55 seconds\" \n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5806784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/870a3235b08fcea4bb7fae815d5e1e28?s=128&d=identicon&r=PG&f=1", "display_name": "MattM", "link": "https://stackoverflow.com/users/5806784/mattm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544498759, "creation_date": 1544489215, "question_id": 53715854, "link": "https://stackoverflow.com/questions/53715854/calculating-exact-duration-time-from-a-datetime-column-in-postgres-using-rails", "title": "Calculating exact duration time from a DateTime column in Postgres using Rails", "body": "<p>I am trying to get a more accurate output than \"about 2 hours\" for duration time.</p>\n\n<p>Currently, we are using <code>time_ago_in_words</code></p>\n\n<p>This looks like the below function in .erb</p>\n\n<pre><code>Duration: &lt;%= time_ago_in_words(@sitrep.incident.created_at) %&gt;\n\n# I found the gem `dotiw` which lets me use:\ndistance_of_time_in_words(@sitrep.incident.created_at)\n# However, there is an error and I can't get either to work in irb\n</code></pre>\n\n<p>This is my console output when attempting both. All help is appreciated</p>\n\n<pre><code>[1] pry(main)&gt; include ActionView::Helpers\n=&gt; Object\n[2] pry(main)&gt; t = Sitrep.last.incident.created_at\n\n# redacted output    \n\n=&gt; Wed, 28 Nov 2018 21:47:45 UTC +00:00\n[3] pry(main)&gt; t\n=&gt; Wed, 28 Nov 2018 21:47:45 UTC +00:00\n[4] pry(main)&gt; time_ago_in_words(t)\n=&gt; \"&lt;span class=\\\"translation_missing\\\" title=\\\"translation missing: en.weeks\\\"&gt;Weeks&lt;/span&gt;, &lt;span class=\\\"translation_missing\\\" title=\\\"translation missing: en.days\\\"&gt;Days&lt;/span&gt;, &lt;span class=\\\"translation_missing\\\" title=\\\"translation missing: en.hours\\\"&gt;Hours&lt;/span&gt;, and &lt;span class=\\\"translation_missing\\\" title=\\\"translation missing: en.minutes\\\"&gt;Minutes&lt;/span&gt;\"\n[5] pry(main)&gt; distance_of_time_in_words(t)\nNoMethodError: undefined method `seconds' for Wed, 28 Nov 2018 21:47:45 UTC +00:00:Time\nDid you mean?  send\nDid you mean?  send\nfrom /Users/mmowris/.rbenv/versions/2.3.8/lib/ruby/gems/2.3.0/gems/activesupport-4.2.7.1/lib/active_support/time_with_zone.rb:371:in `method_missing'\n[6] pry(main)&gt;\n</code></pre>\n\n<p>The first method, time_ago_in_words works for our rails app. This .erb file sends an email, and the output would look something like:</p>\n\n<pre><code>Duration: about 2 hours\n</code></pre>\n\n<p>Any ideas on how to proceed? Why does this work in our rails project, but not irb? Why can't I get dotiw to work with the same input? Why can't i get taiw to work with the same input that works in production?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "psych"], "comments": [{"owner": {"reputation": 356, "user_id": 7781865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a015f597dcb8d01d4deae23070c6991f?s=128&d=identicon&r=PG", "display_name": "colincr", "link": "https://stackoverflow.com/users/7781865/colincr"}, "reply_to_user": {"reputation": 20644, "user_id": 184184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f6a508697f9eca2680b12ddb85ba1319?s=128&d=identicon&r=PG", "display_name": "Lenin Raj Rajasekaran", "link": "https://stackoverflow.com/users/184184/lenin-raj-rajasekaran"}, "edited": false, "score": 0, "creation_date": 1544483896, "post_id": 53715108, "comment_id": 94284719, "body": "thanks, @emaillenin, however that solution has not worked for me."}], "answers": [{"tags": [], "owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "is_accepted": true, "score": 2, "last_activity_date": 1544568433, "last_edit_date": 1544568433, "creation_date": 1544552713, "answer_id": 53730218, "question_id": 53715108, "link": "https://stackoverflow.com/questions/53715108/psychbadalias-unknown-alias-1-when-running-rake-jobswork/53730218#53730218", "title": "Psych::BadAlias: Unknown alias: 1 when running rake jobs:work", "body": "<p>I got the same issue after <code>ruby</code> upgrade from <code>2.1.5</code> to <code>2.3.8</code>. Thats latest ruby version that could be run with rails <code>4.1.8</code>.</p>\n\n<p>Upgrading to the latest version of <code>delayed_job</code> did not help. Also tried to specify downgraded version of <a href=\"https://github.com/ruby/psych\" rel=\"nofollow noreferrer\"><code>psych</code></a> gem in my <code>Gemfile</code>. This did work not as well.</p>\n\n<p>The real issue is that if error appears on job parsing stage then <code>delayed_job</code> does not update <code>last_error</code> column. </p>\n\n<p>So I just went though all the jobs and checked if it could be parsed or not:</p>\n\n<pre><code>failing_jobs = []\n\nDelayed::Job.find_each do |job|\n  begin\n    # this code is from dj source https://github.com/collectiveidea/delayed_job/blob/master/lib/delayed/psych_ext.rb#L15\n    yaml = job.handler\n    result = Psych.parse(yaml)\n    result ? Delayed::PsychExt::ToRuby.create.accept(result) : result\n  rescue Psych::BadAlias =&gt; e\n    failing_jobs &lt;&lt; job    \n  end\nend\n</code></pre>\n\n<p>In my case it were 6 jobs out of ~3k that could be deleted safely so I got lucky :)</p>\n\n<p>Refs:</p>\n\n<p><a href=\"https://github.com/collectiveidea/delayed_job/pull/867\" rel=\"nofollow noreferrer\">https://github.com/collectiveidea/delayed_job/pull/867</a></p>\n\n<p><a href=\"https://github.com/collectiveidea/delayed_job_mongoid/pull/65\" rel=\"nofollow noreferrer\">https://github.com/collectiveidea/delayed_job_mongoid/pull/65</a></p>\n"}], "owner": {"reputation": 356, "user_id": 7781865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a015f597dcb8d01d4deae23070c6991f?s=128&d=identicon&r=PG", "display_name": "colincr", "link": "https://stackoverflow.com/users/7781865/colincr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 0, "accepted_answer_id": 53730218, "answer_count": 1, "score": 0, "last_activity_date": 1544568433, "creation_date": 1544483583, "last_edit_date": 1544568129, "question_id": 53715108, "link": "https://stackoverflow.com/questions/53715108/psychbadalias-unknown-alias-1-when-running-rake-jobswork", "title": "Psych::BadAlias: Unknown alias: 1 when running rake jobs:work", "body": "<p>Something strange is happening with my application when I boot the jobs server with rake jobs:work. The rails webserver boots fine. I've noticed threads such as <a href=\"https://stackoverflow.com/questions/22664614/rails4-psychbadalias-unknown-alias-test\">this one</a>, however 1) it's not quite the same error message, that one seems more straightforward and 2) the answer did not yield any different results.</p>\n\n<p>Here's my stacktrace - </p>\n\n<pre><code>rake aborted!\nPsych::BadAlias: Unknown alias: 1\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/psych_ext.rb:77:in `visit_Psych_Nodes_Mapping'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/psych_ext.rb:35:in `visit_Psych_Nodes_Mapping'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/psych_ext.rb:35:in `visit_Psych_Nodes_Mapping'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/psych_ext.rb:17:in `load_dj'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/backend/base.rb:85:in `payload_object'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/backend/base.rb:74:in `name'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/worker.rb:245:in `job_say'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/worker.rb:272:in `handle_failed_job'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/worker.rb:213:in `block in run'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/lifecycle.rb:61:in `block in initialize'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/lifecycle.rb:66:in `execute'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/lifecycle.rb:40:in `run_callbacks'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/worker.rb:213:in `rescue in run'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/worker.rb:202:in `run'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/worker.rb:280:in `block in reserve_and_run_one_job'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/lifecycle.rb:61:in `block in initialize'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/lifecycle.rb:66:in `execute'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/lifecycle.rb:40:in `run_callbacks'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/worker.rb:280:in `reserve_and_run_one_job'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/worker.rb:187:in `block in work_off'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/worker.rb:186:in `times'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/worker.rb:186:in `work_off'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/worker.rb:150:in `block (4 levels) in start'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/worker.rb:149:in `block (3 levels) in start'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/lifecycle.rb:61:in `block in initialize'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/lifecycle.rb:66:in `execute'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/lifecycle.rb:40:in `run_callbacks'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/worker.rb:148:in `block (2 levels) in start'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/worker.rb:147:in `loop'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/worker.rb:147:in `block in start'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/plugins/clear_locks.rb:7:in `block (2 levels) in &lt;class:ClearLocks&gt;'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/lifecycle.rb:79:in `block (2 levels) in add'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/lifecycle.rb:61:in `block in initialize'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/lifecycle.rb:79:in `block in add'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/lifecycle.rb:66:in `execute'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/lifecycle.rb:40:in `run_callbacks'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/worker.rb:146:in `start'\n/Users/ccromar/.rvm/gems/ruby-2.4.0/gems/delayed_job-4.0.6/lib/delayed/tasks.rb:9:in `block (2 levels) in &lt;top (required)&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rspec-rails"], "answers": [{"comments": [{"owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "edited": false, "score": 0, "creation_date": 1544486639, "post_id": 53715310, "comment_id": 94285381, "body": "You&#39;re right, works perfect (I&#39;ve wasted a lot of time). I&#39;m just wondering, is this before block is uses in an correct way? I mean is it more elegant way to do so?"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "edited": false, "score": 0, "creation_date": 1544486756, "post_id": 53715310, "comment_id": 94285408, "body": "Text example is cleaner with it (but may be harder to understand), it help to avoid repeating the same code if you have more examples in the same context,"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 1, "last_activity_date": 1544485033, "creation_date": 1544485033, "answer_id": 53715310, "question_id": 53714926, "link": "https://stackoverflow.com/questions/53714926/rspec-sessions-controllers-user-with-invalid-params-without-devise/53715310#53715310", "title": "RSpec sessions controllers - user with invalid params without devise", "body": "<p>In your test you expect redirect response:</p>\n\n<pre><code>expect(response).to redirect_to(action: 'new')\n</code></pre>\n\n<p>And in the controller you just render <code>new</code> template:</p>\n\n<pre><code>render 'new'\n</code></pre>\n\n<p>I think it's a good approach to render <code>new</code>, you should change your spec to expect this.</p>\n\n<pre><code>expect(response).to render_template(:new)\n</code></pre>\n"}], "owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 53715310, "answer_count": 1, "score": 0, "last_activity_date": 1544485067, "creation_date": 1544482494, "last_edit_date": 1544485067, "question_id": 53714926, "link": "https://stackoverflow.com/questions/53714926/rspec-sessions-controllers-user-with-invalid-params-without-devise", "title": "RSpec sessions controllers - user with invalid params without devise", "body": "<p>I've got a simple message app to learn RSpec where one user can create message to another user (only logged users can write messages). I didn't used devise or FactoryBot, this app is as simple as possible just for rspec learning.</p>\n\n<p>I wanted to run these tests for sessions controller, but the second one (when user has invalid params)  gives me an error <code>Expected response to be a &lt;3XX: redirect&gt;, but was a &lt;200: OK&gt;</code> and I don't understand why since hours.</p>\n\n<pre><code>RSpec.describe SessionsController, type: :controller do\n  let(:create_user) { @user = User.create(username: 'John', password: 'test123') }\n\n  describe 'POST #create' do\n\n    context 'when user is logged in' do\n      it 'loads correct user details and redirect to the root path' do\n        create_user\n        post :create, params: { session: { username: @user.username, password: @user.password } }\n        expect(response).to redirect_to(root_path)\n      end\n    end\n\n    context 'when user has invalid params' do\n      before do\n        create_user\n        post :create, params: { session: { username: @user.username, password: 'somepass' } }\n      end\n\n      it 'render new action' do\n        expect(assigns(:user)).not_to eq create_user\n        expect(response).to redirect_to(action: 'new')\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Sessions Controller</p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n  before_action :logged_in_redirect, only: %i[new create]\n\n  def new; end\n\n  def create\n    user = User.find_by(username: params[:session][:username])\n    if user &amp;&amp; user.authenticate(params[:session][:password])\n      session[:user_id] = user.id\n      flash[:success] = 'You have successfully logged in'\n      redirect_to root_path\n    else\n      flash.now[:error] = 'There was something wrong with your login'\n      render 'new'\n    end\n  end\nend\n</code></pre>\n\n<p>I'm not quite sure if line <code>expect(assigns(:user)).not_to eq create_user</code> is in line with convention but it doesn't matter for result.</p>\n"}, {"tags": ["ruby", "amazon-web-services", "aws-lambda"], "answers": [{"tags": [], "owner": {"reputation": 2213, "user_id": 1144475, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c1edf0028fc55a04d0a45863267ddb80?s=128&d=identicon&r=PG", "display_name": "Ben Downey", "link": "https://stackoverflow.com/users/1144475/ben-downey"}, "is_accepted": false, "score": 3, "last_activity_date": 1544537895, "creation_date": 1544537895, "answer_id": 53726082, "question_id": 53714177, "link": "https://stackoverflow.com/questions/53714177/aws-lambda-unable-to-find-ruby-dependency/53726082#53726082", "title": "AWS Lambda Unable to Find Ruby Dependency", "body": "<p>The issue was a mismatch between Ruby versions.  I was a few versions behind AWS Lambda's version (2.5.0).  Once I changed updated my local version to the one Labmda uses, the loading error went away.</p>\n\n<p>This issue is a duplicate of <a href=\"https://stackoverflow.com/questions/53673486/aws-lambda-ruby-function-failing-to-load-gem\">AWS Lambda: Ruby function failing to load gem</a> and <a href=\"https://stackoverflow.com/questions/53634260/how-can-i-get-my-aws-lambda-to-access-gems-stored-in-vendor-bundle#comment94129753_53634260\">How can I get my AWS Lambda to access gems stored in vendor/bundle?</a> but at this time, neither has accepted answers, so I'm leaving this posted here for future devs in a similar situation.</p>\n"}, {"tags": [], "owner": {"reputation": 659, "user_id": 2695716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/51Wgc.jpg?s=128&g=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/2695716/dennis"}, "is_accepted": false, "score": 0, "last_activity_date": 1571752948, "creation_date": 1571752948, "answer_id": 58506065, "question_id": 53714177, "link": "https://stackoverflow.com/questions/53714177/aws-lambda-unable-to-find-ruby-dependency/58506065#58506065", "title": "AWS Lambda Unable to Find Ruby Dependency", "body": "<p>You do not need to match your local Ruby version to the AWS Ruby version. Instead you can utilise Docker to vendor the 2.5.0 gems in this way:</p>\n\n<pre><code>cd /path/to/Gemfile/ &amp;&amp; \\\ndocker run -v `pwd`:`pwd` -w `pwd` -i -t lambci/lambda:build-ruby2.5 bundle install --deployment\n</code></pre>\n"}], "owner": {"reputation": 2213, "user_id": 1144475, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c1edf0028fc55a04d0a45863267ddb80?s=128&d=identicon&r=PG", "display_name": "Ben Downey", "link": "https://stackoverflow.com/users/1144475/ben-downey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1133, "favorite_count": 2, "answer_count": 2, "score": 2, "last_activity_date": 1571752948, "creation_date": 1544478583, "last_edit_date": 1544478672, "question_id": 53714177, "link": "https://stackoverflow.com/questions/53714177/aws-lambda-unable-to-find-ruby-dependency", "title": "AWS Lambda Unable to Find Ruby Dependency", "body": "<p>I'm working through the tutorial in <a href=\"https://aws.amazon.com/blogs/compute/announcing-ruby-support-for-aws-lambda/\" rel=\"nofollow noreferrer\">announcing-ruby-support-for-aws-lambda</a> and I'm having trouble getting Lambda to locate Ruby dependencies.</p>\n\n<p>I've got the tutorial's code just copy/pasted in there.  Nothing fancy so far.</p>\n\n<pre><code>require 'aws-record'\n\nclass DemoTable\n  include Aws::Record\n  set_table_name ENV[\u2018DDB_TABLE\u2019]\n  string_attr :id, hash_key: true\n  string_attr :body\nend\n\ndef put_item(event:,context:)\n  body = event[\"body\"]\n  item = DemoTable.new(id: SecureRandom.uuid, body: body)\n  item.save! # raise an exception if save fails\n  item.to_h\nend\n</code></pre>\n\n<p>I've got a Gemfile that contains <code>aws-record</code> and I've run both <code>bundle install</code> and <code>bundle install --deployment</code>.</p>\n\n<p>If I'm in the Lambda console, looking at the Function Code section, I can see the project has the vendor directory and the <code>aws-record</code> gem is present.</p>\n\n<p>I've used the <code>sam</code> CLI to package and deploy the code and it <em>seems</em> like everything worked.</p>\n\n<p>But when I create and run the test, I receive the following error.</p>\n\n<pre><code>{\n  \"errorMessage\": \"cannot load such file -- aws-record\",\n  \"errorType\": \"Init&lt;LoadError&gt;\",\n  \"stackTrace\": [\n    \"/var/lang/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\",\n    \"/var/lang/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\",\n    \"/var/task/hello_ruby_record.rb:1:in `&lt;top (required)&gt;'\",\n    \"/var/lang/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\",\n    \"/var/lang/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:59:in `require'\"\n  ]\n}\n</code></pre>\n\n<p>Everything seems to simple at this stage of the app, so I'm mystified about what I'm missing.  Does anyone have any suggestions about how to troubleshoot this?</p>\n"}, {"tags": ["javascript", "ruby", "web-scraping", "nokogiri"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1544473673, "post_id": 53712549, "comment_id": 94280795, "body": "You don&#39;t need to learn rails to use <code>watir</code>. You can use vanilla ruby, just like you are doing currently with <code>nokogiri</code>."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1544473938, "post_id": 53712549, "comment_id": 94280926, "body": "Also, if you want to &quot;cheat&quot;, here&#39;s something you could do... Just download <code>https:&#47;&#47;disneyworld.disney.go.com&#47;en_GB&#47;sitemap.xml</code> and grab all URLs containing <code>&#47;attractions&#47;</code> or whatever :)"}, {"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1544486635, "post_id": 53712549, "comment_id": 94285379, "body": "I did this site with mechanize once but it was a maze of json. I suggest selenium/watir/headless chrome instead."}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1544475768, "post_id": 53713234, "comment_id": 94281725, "body": "Nice work you beat me to it. :) <a href=\"https://repl.it/@engineersmnky/mechanizePageScrape\" rel=\"nofollow noreferrer\">Example of the above</a>"}], "tags": [], "owner": {"reputation": 898, "user_id": 160272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/813f535246722b7bf02aacc9ce818de8?s=128&d=identicon&r=PG", "display_name": "showaltb", "link": "https://stackoverflow.com/users/160272/showaltb"}, "is_accepted": false, "score": 1, "last_activity_date": 1544474071, "creation_date": 1544474071, "answer_id": 53713234, "question_id": 53712549, "link": "https://stackoverflow.com/questions/53712549/use-nokogiri-to-scrape-a-website-that-uses-javascript/53713234#53713234", "title": "Use Nokogiri to scrape a website that uses Javascript", "body": "<p>I assume you are loading the page using something like <code>open-uri</code>. The site is a little odd in that the first request to <a href=\"https://disneyworld.disney.go.com/attractions/\" rel=\"nofollow noreferrer\">https://disneyworld.disney.go.com/attractions/</a> does not return the attractions list. That list is returned by a subsequent XMLHttpRequest to the same url. So you probably aren't seeing the results in the content at all.</p>\n\n<p>You can simulate the XMLHttpRequest (and do a lot of other stuff) by using a gem like <a href=\"http://docs.seattlerb.org/mechanize/\" rel=\"nofollow noreferrer\">mechanize</a>. Here's a working example that gets those attraction urls:</p>\n\n<pre><code>require 'mechanize'\n\nurl = 'https://disneyworld.disney.go.com/attractions/'\nmech = Mechanize.new;\n\n# make an XMLHttpRequest to get the page (returns attraction list)\nmech.get(url, [], nil, { 'x-requested-with' =&gt; 'XMLHttpRequest' }) do |page|\n  page.search('ul.finderList li').each do |attraction|\n    name = attraction.at_css('h2.cardName').content\n    link = attraction.at_css('a')['href']\n    puts \"#{name}: #{link}\"\n  end\nend\n</code></pre>\n\n<p>The <code>page.search</code> method returns a Nokogiri node set, so you can use Nokogiri methods for further processing.</p>\n"}], "owner": {"reputation": 1, "user_id": 10772488, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-YBl9Ml8gScE/AAAAAAAAAAI/AAAAAAAAAKs/OIoqP-87nwI/photo.jpg?sz=128", "display_name": "Amanda M.", "link": "https://stackoverflow.com/users/10772488/amanda-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1544500881, "creation_date": 1544471032, "last_edit_date": 1544500881, "question_id": 53712549, "link": "https://stackoverflow.com/questions/53712549/use-nokogiri-to-scrape-a-website-that-uses-javascript", "title": "Use Nokogiri to scrape a website that uses Javascript", "body": "<p>For a project for a class, I am trying to scrape a website. From this website,</p>\n\n<pre><code>https://disneyworld.disney.go.com/attractions/\n</code></pre>\n\n<p>I'm trying to pull all attraction URLs. For example, for the first attraction in the list, I'm trying to grab this url: </p>\n\n<pre><code>https://disneyworld.disney.go.com/attractions/epcot/mission-space-advanced-training-lab/\n</code></pre>\n\n<p>Since the website uses Javascript, I'm having a hard time getting the urls using Nokogiri and selectors. Class names don't seem to work, and my attempt returns a different url than I'm trying to snag. The best I have is:</p>\n\n<pre><code>index_page.css(\"ul\").children.css(\"li\").each do |container|\n</code></pre>\n\n<p>but container returns the incorrect urls. It was suggested that I use the gem watir, but neither I nor my instructors can figure out how to use it.</p>\n\n<p>Any ideas would be appreciated.</p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1544471404, "creation_date": 1544471404, "answer_id": 53712632, "question_id": 53712298, "link": "https://stackoverflow.com/questions/53712298/upgrading-rspec-to-rspec-2-99-want-to-use-let-connection-variable-in-before-aft/53712632#53712632", "title": "Upgrading Rspec to Rspec 2.99, want to use let connection variable in before/after hooks", "body": "<p>I think RSpec wants you to run the block before each example instead of your once before all examples:</p>\n\n<pre><code>let(:connection) { user_base }\n\nafter do # short for `after(:each) do`\n  connection.delete_folder\nend\n\nit \"adds folder\" do    \n  connection.add_folder\nend\n\nit \"edits folder\" do\n  connection.edit_folder\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 10772400, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d2b84770e99390903d93f0f48dd839d?s=128&d=identicon&r=PG&f=1", "display_name": "videogameviking", "link": "https://stackoverflow.com/users/10772400/videogameviking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544471404, "creation_date": 1544469890, "question_id": 53712298, "link": "https://stackoverflow.com/questions/53712298/upgrading-rspec-to-rspec-2-99-want-to-use-let-connection-variable-in-before-aft", "title": "Upgrading Rspec to Rspec 2.99, want to use let connection variable in before/after hooks", "body": "<p>I have a head scratcher. When upgrading rspec I am getting: </p>\n\n<pre><code>DEPRECATION: let declaration `directory` accessed in an `after(:all)` hook \nat:\n`let` and `subject` declarations are not intended to be called\n</code></pre>\n\n<p>Now I understand that I cannot use let defined variables in before/after hooks. However, the methods that are used with my test suite uses a connection to preform some REST API action:</p>\n\n<pre><code>let {:connection}   {user_base}\nafter(:all) do\n connection.delete_folder\nend\n</code></pre>\n\n<p>My question is this: Is there anyway of getting around this without making every connection an instance variable? I want to avoid calling connection variable each time I want to preform an action e.g.</p>\n\n<pre><code>before(:all) do\n @connection = user_base\nend\nit \"adds folder\" do    \n @connection.add_folder\nend\nit \"edits folder\" do\n @connection.edit_folder\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "discourse"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 10179930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f41f2c4561ce17a6ff417229beeb5540?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/10179930/sebastian"}, "edited": false, "score": 0, "creation_date": 1544476113, "post_id": 53711206, "comment_id": 94281855, "body": "Thanks that seems to fix it. I was pretty sure i tried that but seems like i was wrong! Thank you so much for your answer!"}], "tags": [], "owner": {"reputation": 183, "user_id": 6176394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/945261141733c25671268e2aa465249d?s=128&d=identicon&r=PG&f=1", "display_name": "Artur Martsinkovskyi", "link": "https://stackoverflow.com/users/6176394/artur-martsinkovskyi"}, "is_accepted": false, "score": 2, "last_activity_date": 1544479753, "last_edit_date": 1544479753, "creation_date": 1544464936, "answer_id": 53711206, "question_id": 53711021, "link": "https://stackoverflow.com/questions/53711021/ruby-getting-undefined-method-error-and-i-am-not-sure-if-i-fully-understand-how/53711206#53711206", "title": "Ruby getting undefined Method error, and i am not sure if i fully understand how methods are working for my plugin", "body": "<p>Unfortunately, your understanding of methods is shallow. Basically, any method you declare in the global scope is added to the Object class as private method, so it is accessible everywhere in your objects cause they derive from Object class and in global scope because it is the scope of the Object class. If you declare method as self.method, you make it a method of main Object, because self refers to main, which is not the desired behaviour for you. To fix that issue, you should just remove self and write it like that: </p>\n\n<pre><code>def my_method\nend\n</code></pre>\n\n<p>This way this method will be added to the Object class itself, not the main Object. There is a <a href=\"https://vitobotta.com/2013/09/13/top-level-methods-in-ruby/\" rel=\"nofollow noreferrer\">link</a> on the article about methods in general. And another <a href=\"https://banisterfiend.wordpress.com/2010/11/23/what-is-the-ruby-top-level/\" rel=\"nofollow noreferrer\">one</a> on the toplevel scope behaviour. In <a href=\"https://repl.it/@artur_martsinko/GoldPhysicalTwintext\" rel=\"nofollow noreferrer\">this</a> codepen you may observe the difference. Also, it may be useful for you to learn some Ruby before going on with your development. I suggest <a href=\"https://rubymonk.com/\" rel=\"nofollow noreferrer\">rubymonk</a>. Another issue is your one-method files which is not the best practice for ruby code organization. Ruby is truly object-oriented language and if you need to have a bunch or even one general-purpose method, it is better to put it in a module or class to define its purpose and role in application, make it reusable and trackable, without global scope pollution.</p>\n"}], "owner": {"reputation": 51, "user_id": 10179930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f41f2c4561ce17a6ff417229beeb5540?s=128&d=identicon&r=PG&f=1", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/10179930/sebastian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544479753, "creation_date": 1544464235, "question_id": 53711021, "link": "https://stackoverflow.com/questions/53711021/ruby-getting-undefined-method-error-and-i-am-not-sure-if-i-fully-understand-how", "title": "Ruby getting undefined Method error, and i am not sure if i fully understand how methods are working for my plugin", "body": "<p>i am trying to create a plugin for Discourse, which is written in Ruby. As normal blank files my program is working perfect and without errors, but when i try to adapt my code into the plugin context i run into issues and i am not sure if i really understand how the whole idea with functions is meant to be. \nI thought it would be smart to have more than just one file, to outsource functionality in different methods and require them in a kind of \"main\" file. For example getting tweets is one method in an extra file, sending tweets a different method in another file. In blank ruby code its working fine but when i try to integrate that into the plugin file structure i get the error </p>\n\n<pre><code>undefined method `my_method' for #&lt;Plugin::Instance:0x00007f9004012fc0&gt; (NoMethodError)\n</code></pre>\n\n<p>the files with the methods are in a lib directory and the \"main\" file which is called the plugin.rb is in the mainfolder</p>\n\n<p>so i tried </p>\n\n<pre><code>require_relative 'lib/my_method'\n</code></pre>\n\n<p>and the other way </p>\n\n<pre><code>require_relative File.expand_path('../lib/my_method.rb', __FILE__)\n</code></pre>\n\n<p>but i still run into that error. </p>\n\n<p>i have not defined any kind of classes or modules or something like that so the \"method files\" are literally starting with </p>\n\n<pre><code>def self.my_method\n\n    #my code here\n    end \n</code></pre>\n\n<p>Could that be the reason why i run into the error above? Why is it working as blank ruby code, but not when i try to run the plugin with <code>rails s</code> on my discourse instance? \nI am still pretty new into ruby programming, so maybe my question seems a bit silly. </p>\n\n<p>Here is the link which lead me threw the plugin creation:</p>\n\n<p><a href=\"https://meta.discourse.org/t/beginners-guide-to-creating-discourse-plugins-part-1/30515\" rel=\"nofollow noreferrer\">https://meta.discourse.org/t/beginners-guide-to-creating-discourse-plugins-part-1/30515</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex", "rspec", "mocking"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1544461244, "post_id": 53709570, "comment_id": 94275007, "body": "Is there a reason you ask and answer all your own questions?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1544463349, "post_id": 53709570, "comment_id": 94276120, "body": "Nothing wrong with doing that!"}, {"owner": {"reputation": 3090, "user_id": 4454732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8OrTJkCtkn4/AAAAAAAAAAI/AAAAAAAAA4s/7jp2lrThK2k/photo.jpg?sz=128", "display_name": "David Hempy", "link": "https://stackoverflow.com/users/4454732/david-hempy"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1544538974, "post_id": 53709570, "comment_id": 94306066, "body": "Of course, @engineersmnky ... to share knowledge! :-)  I searched for what I needed, and did not find a solution that matched the keywords I was looking for. So now, the next person who searches for this issue will hopeful find a simple, copy-and-paste solution!"}], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 556078, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c0bbd7c139dc8abc512ea70ee15454af?s=128&d=identicon&r=PG", "display_name": "Max Cascone", "link": "https://stackoverflow.com/users/556078/max-cascone"}, "edited": false, "score": 0, "creation_date": 1604694200, "post_id": 53709571, "comment_id": 114435019, "body": "This is great, i am using it for <code>stub_command</code>: <code>let(:module_is_installed) do &#47;\\(Get-Module.*&#47; end</code>"}], "tags": [], "owner": {"reputation": 3090, "user_id": 4454732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8OrTJkCtkn4/AAAAAAAAAAI/AAAAAAAAA4s/7jp2lrThK2k/photo.jpg?sz=128", "display_name": "David Hempy", "link": "https://stackoverflow.com/users/4454732/david-hempy"}, "is_accepted": false, "score": 4, "last_activity_date": 1544458690, "creation_date": 1544458690, "answer_id": 53709571, "question_id": 53709570, "link": "https://stackoverflow.com/questions/53709570/how-to-mock-all-requests-to-a-site-with-stub-request/53709571#53709571", "title": "How to mock all requests to a site with stub_request?", "body": "<p>Use <code>:any</code> to match all methods, and a regular expression to match all URL's:</p>\n\n<pre><code>their_site = 'http://rest.example.com'\nstub_request(:any, /#{their_site}.*/ ).to_raise(Errno::ECONNREFUSED)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>their_site = 'https://rest.example.com:443/api'\nstub_request(:any, %r[#{their_site}.*] ).to_timeout\n</code></pre>\n\n<p>or</p>\n\n<pre><code>stub_request(:any, %r[#{their_site}.*] )\n  .to_return(status: 500, body: 'Sorry, mate.')\n</code></pre>\n\n<p>or</p>\n\n<pre><code>stub_request(:any, %r[#{their_site}.*] )\n  .to_return(status: 404)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>stub_request(:any, %r[#{their_site}.*] )\n  .to_return(status: 200, 'We tried our best.')\n</code></pre>\n\n<p>If you want to break <em>all</em> external hits, you can do that with a regex:</p>\n\n<pre><code>stub_request(:any, /.*/ ).to_timeout\n</code></pre>\n"}], "owner": {"reputation": 3090, "user_id": 4454732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8OrTJkCtkn4/AAAAAAAAAAI/AAAAAAAAA4s/7jp2lrThK2k/photo.jpg?sz=128", "display_name": "David Hempy", "link": "https://stackoverflow.com/users/4454732/david-hempy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 683, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544458690, "creation_date": 1544458690, "question_id": 53709570, "link": "https://stackoverflow.com/questions/53709570/how-to-mock-all-requests-to-a-site-with-stub-request", "title": "How to mock all requests to a site with stub_request?", "body": "<p>I want to mock <em>all</em> requests to a given site in my rspec tests with stub_reuest ... not just the URL's I know about today. In particular, I want to raise an exception or timeout to simulate a REST service being offline or broken.</p>\n\n<p>How do I match all URL's for just one site? How do I block any URL for a given host?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "rubygems", "redmine"], "comments": [{"owner": {"reputation": 1, "user_id": 8906461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10b737d1d481957082395759d677ae2e?s=128&d=identicon&r=PG&f=1", "display_name": "Joao Luiz", "link": "https://stackoverflow.com/users/8906461/joao-luiz"}, "edited": false, "score": 0, "creation_date": 1544458664, "post_id": 53709555, "comment_id": 94273617, "body": "Sorry, here is the link to pastebin: <a href=\"https://pastebin.com/4mipkJBT\" rel=\"nofollow noreferrer\">pastebin.com/4mipkJBT</a>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1544460599, "post_id": 53709555, "comment_id": 94274674, "body": "Did you run <code>bundle install</code>?"}, {"owner": {"reputation": 1, "user_id": 8906461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10b737d1d481957082395759d677ae2e?s=128&d=identicon&r=PG&f=1", "display_name": "Joao Luiz", "link": "https://stackoverflow.com/users/8906461/joao-luiz"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1544548596, "post_id": 53709555, "comment_id": 94312035, "body": "Yes, I did. No errors at all."}, {"owner": {"reputation": 2453, "user_id": 800965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fMjbN.jpg?s=128&g=1", "display_name": "Aleksandar Pavi\u0107", "link": "https://stackoverflow.com/users/800965/aleksandar-pavi%c4%87"}, "edited": false, "score": 0, "creation_date": 1544556985, "post_id": 53709555, "comment_id": 94316011, "body": "Have you looked in log/production.log or development.log?"}], "owner": {"reputation": 1, "user_id": 8906461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10b737d1d481957082395759d677ae2e?s=128&d=identicon&r=PG&f=1", "display_name": "Joao Luiz", "link": "https://stackoverflow.com/users/8906461/joao-luiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544458643, "creation_date": 1544458643, "question_id": 53709555, "link": "https://stackoverflow.com/questions/53709555/cant-start-redmine-after-installing-plugin", "title": "Can&#39;t Start Redmine After Installing Plugin", "body": "<p>I just installed this plugin for my redmine: <a href=\"https://github.com/masweetman/issue_charts\" rel=\"nofollow noreferrer\">https://github.com/masweetman/issue_charts</a></p>\n\n<p>After that, I can't go to my redmine webpage, here is the error log:</p>\n\n<pre><code>4mipkJBT\n</code></pre>\n\n<p>Any ideas?\nThanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "stripe-payments"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1544457477, "post_id": 53709202, "comment_id": 94272964, "body": "Please add your console output to your question. Specifically, what is the value of <code>params[:product_id]</code>? (Please edit your question, don&#39;t respond with code in comments.)"}, {"owner": {"reputation": 37, "user_id": 10586066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f795fb0d33f56a47dac4b986cf81ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Hardress", "link": "https://stackoverflow.com/users/10586066/hardress"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1544457880, "post_id": 53709202, "comment_id": 94273208, "body": "Could you tell me how to output that value to the Rails Console?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1544458240, "post_id": 53709202, "comment_id": 94273384, "body": "In your rails console (where your rails server is running), you should see a transaction that begins with <code>Started POST</code>. It should include a line that begins <code>Parameters:</code>. Just paste the whole thing into your question."}, {"owner": {"reputation": 37, "user_id": 10586066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f795fb0d33f56a47dac4b986cf81ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Hardress", "link": "https://stackoverflow.com/users/10586066/hardress"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1544458549, "post_id": 53709202, "comment_id": 94273549, "body": "Thank you. I have added the readout"}], "answers": [{"comments": [{"owner": {"reputation": 37, "user_id": 10586066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f795fb0d33f56a47dac4b986cf81ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Hardress", "link": "https://stackoverflow.com/users/10586066/hardress"}, "edited": false, "score": 0, "creation_date": 1544459359, "post_id": 53709601, "comment_id": 94273985, "body": "Thank you. I&#39;m not sure how to change the request to send the product_id on the params. Would I just edit the @product = line?"}], "tags": [], "owner": {"reputation": 3807, "user_id": 2043592, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zCbuL.jpg?s=128&g=1", "display_name": "xploshioOn", "link": "https://stackoverflow.com/users/2043592/xploshioon"}, "is_accepted": false, "score": 0, "last_activity_date": 1544458803, "creation_date": 1544458803, "answer_id": 53709601, "question_id": 53709202, "link": "https://stackoverflow.com/questions/53709202/couldnt-find-product-without-an-id/53709601#53709601", "title": "Couldn&#39;t find Product without an ID", "body": "<p>if you check at your console log, <code>params[:product_id]</code> doesn't exist on the request</p>\n\n<pre><code>Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"jJhGPS9Su0IuepHt2Eea/hCEhDo3A3fggu6EUjwLDrJphrC8VmNRycUqzyLGiJpcaN3mHOzr224BYsbgbjo38Q==\", \"stripeToken\"=&gt;\"tok_1Dfr0PHrTxlTJx3aoOtOh2Z9\", \"stripeTokenType\"=&gt;\"card\", \"stripeEmail\"=&gt;\"myemail@gmail.com\"}\n</code></pre>\n\n<p>That is your problem. change your request to send the product_id on the params so your lookout will work.</p>\n"}, {"comments": [{"owner": {"reputation": 37, "user_id": 10586066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f795fb0d33f56a47dac4b986cf81ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Hardress", "link": "https://stackoverflow.com/users/10586066/hardress"}, "edited": false, "score": 0, "creation_date": 1544459401, "post_id": 53709665, "comment_id": 94274013, "body": "Thank you for your response. I&#39;m still not sure how to go about editing the code I have. I&#39;m very new at this, but trying to figure it out."}, {"owner": {"reputation": 136, "user_id": 5360097, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153702473768701/picture?type=large", "display_name": "Zohaib A. Butt", "link": "https://stackoverflow.com/users/5360097/zohaib-a-butt"}, "reply_to_user": {"reputation": 37, "user_id": 10586066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f795fb0d33f56a47dac4b986cf81ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Hardress", "link": "https://stackoverflow.com/users/10586066/hardress"}, "edited": false, "score": 0, "creation_date": 1544460030, "post_id": 53709665, "comment_id": 94274378, "body": "<a href=\"https://stackoverflow.com/questions/2034700/form-for-with-nested-resources\" title=\"form for with nested resources\">stackoverflow.com/questions/2034700/&hellip;</a> has explained implementation of forms with nested resources quite well, with an example."}, {"owner": {"reputation": 37, "user_id": 10586066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f795fb0d33f56a47dac4b986cf81ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Hardress", "link": "https://stackoverflow.com/users/10586066/hardress"}, "edited": false, "score": 0, "creation_date": 1544462938, "post_id": 53709665, "comment_id": 94275910, "body": "I&#39;ve read through that code and added your example to my routes, but I&#39;m really not sure what else to do to get this working. Sorry I am very inexperienced with this and just want to get it working."}, {"owner": {"reputation": 136, "user_id": 5360097, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153702473768701/picture?type=large", "display_name": "Zohaib A. Butt", "link": "https://stackoverflow.com/users/5360097/zohaib-a-butt"}, "reply_to_user": {"reputation": 37, "user_id": 10586066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f795fb0d33f56a47dac4b986cf81ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Hardress", "link": "https://stackoverflow.com/users/10586066/hardress"}, "edited": false, "score": 0, "creation_date": 1544463283, "post_id": 53709665, "comment_id": 94276095, "body": "Could you please share what error are you facing after changing the code and share your <code>routes.rb</code> file as well?  And there is no need to worry about inexperience, we all start from the first step."}, {"owner": {"reputation": 37, "user_id": 10586066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f795fb0d33f56a47dac4b986cf81ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Hardress", "link": "https://stackoverflow.com/users/10586066/hardress"}, "edited": false, "score": 0, "creation_date": 1544463630, "post_id": 53709665, "comment_id": 94276248, "body": "Thanks, it&#39;s still the same error in the title: ActiveRecord::RecordNotFound in PaymentsController#create, highlighting the @product line. To be clear, I haven&#39;t edited anything in the Payments Controller (I&#39;m really not sure what to edit)"}, {"owner": {"reputation": 136, "user_id": 5360097, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153702473768701/picture?type=large", "display_name": "Zohaib A. Butt", "link": "https://stackoverflow.com/users/5360097/zohaib-a-butt"}, "reply_to_user": {"reputation": 37, "user_id": 10586066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f795fb0d33f56a47dac4b986cf81ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Hardress", "link": "https://stackoverflow.com/users/10586066/hardress"}, "edited": false, "score": 0, "creation_date": 1544464326, "post_id": 53709665, "comment_id": 94276556, "body": "I have updated my answer for a much clearer step-wise instructions, that are easier to understand and might take you closer to your solution."}, {"owner": {"reputation": 37, "user_id": 10586066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f795fb0d33f56a47dac4b986cf81ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Hardress", "link": "https://stackoverflow.com/users/10586066/hardress"}, "edited": false, "score": 0, "creation_date": 1544465027, "post_id": 53709665, "comment_id": 94276874, "body": "Okay, I have edited and re-pasted the code above. I&#39;m getting a syntax error now, which I&#39;m sure is from adding the code in the wrong place. Also, I didn&#39;t have a payments/_form.html.erb file before but I created one and added your recommended code."}, {"owner": {"reputation": 136, "user_id": 5360097, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153702473768701/picture?type=large", "display_name": "Zohaib A. Butt", "link": "https://stackoverflow.com/users/5360097/zohaib-a-butt"}, "reply_to_user": {"reputation": 37, "user_id": 10586066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f795fb0d33f56a47dac4b986cf81ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Hardress", "link": "https://stackoverflow.com/users/10586066/hardress"}, "edited": false, "score": 0, "creation_date": 1544465143, "post_id": 53709665, "comment_id": 94276923, "body": "Could you please share the error that you are facing?"}, {"owner": {"reputation": 37, "user_id": 10586066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f795fb0d33f56a47dac4b986cf81ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Hardress", "link": "https://stackoverflow.com/users/10586066/hardress"}, "edited": false, "score": 0, "creation_date": 1544465451, "post_id": 53709665, "comment_id": 94277055, "body": "Yes, the error is: /apps/RailsOne/app/controllers/payments_controller.rb:5: syntax error, unexpected tIVAR, expecting &#39;)&#39; #payment = #product.payments.new ^~~~~~~~ *The ampersands appear to be triggering an error on here so I replaced them with #payment and #product.payments.new"}, {"owner": {"reputation": 136, "user_id": 5360097, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153702473768701/picture?type=large", "display_name": "Zohaib A. Butt", "link": "https://stackoverflow.com/users/5360097/zohaib-a-butt"}, "reply_to_user": {"reputation": 37, "user_id": 10586066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f795fb0d33f56a47dac4b986cf81ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Hardress", "link": "https://stackoverflow.com/users/10586066/hardress"}, "edited": false, "score": 0, "creation_date": 1544465585, "post_id": 53709665, "comment_id": 94277112, "body": "If Product and Payment models are associated, then just write <code>@product = @product.payments.new</code> instead of using <code>#</code>.  Use <code>@</code> instead of <code>#</code>"}, {"owner": {"reputation": 37, "user_id": 10586066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f795fb0d33f56a47dac4b986cf81ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Hardress", "link": "https://stackoverflow.com/users/10586066/hardress"}, "edited": false, "score": 0, "creation_date": 1544465924, "post_id": 53709665, "comment_id": 94277261, "body": "I must be doing something wrong, I updated the payments controller file and repasted above, but now I&#39;m back to the original error"}, {"owner": {"reputation": 37, "user_id": 10586066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f795fb0d33f56a47dac4b986cf81ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Hardress", "link": "https://stackoverflow.com/users/10586066/hardress"}, "edited": false, "score": 0, "creation_date": 1544469180, "post_id": 53709665, "comment_id": 94278704, "body": "Is that where you wanted me to paste in the payments controller?"}], "tags": [], "owner": {"reputation": 136, "user_id": 5360097, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153702473768701/picture?type=large", "display_name": "Zohaib A. Butt", "link": "https://stackoverflow.com/users/5360097/zohaib-a-butt"}, "is_accepted": false, "score": 1, "last_activity_date": 1544464283, "last_edit_date": 1544464283, "creation_date": 1544459026, "answer_id": 53709665, "question_id": 53709202, "link": "https://stackoverflow.com/questions/53709202/couldnt-find-product-without-an-id/53709665#53709665", "title": "Couldn&#39;t find Product without an ID", "body": "<p>You are not passing the Product ID <code>:product_id</code> in your parameters. Ideally, this is an issue of routing.</p>\n\n<p>For the request to create a payment for a product, the structure of URL should be <code>POST /products/:product_id/payments</code>. This way, you would not have to explicitly mention the <code>product_id</code> as a hidden field in your form in order to pass it as a parameter in your request.</p>\n\n<p>Following is an example to generate nested routes in your case.</p>\n\n<pre><code>resources :products do\n   resources :payments\nend\n</code></pre>\n\n<p>Detailed explanation of changes that you would have to do in order to make it work:</p>\n\n<p>In <code>routes.rb</code>\nRemove <code>resources :payments</code> and <code>resources :products</code>. These two lines will be replaced by</p>\n\n<pre><code>resources :products do\n   resources :payments\nend\n</code></pre>\n\n<p>In <code>app/controllers/payments_controller.rb</code></p>\n\n<pre><code>def new\n  @product = Product.find(params[:product_id])  \n  @payment = @product.payments.new\nend\n</code></pre>\n\n<p>In <code>app/views/payments/_form.html.erb</code></p>\n\n<pre><code>&lt;%= form_for [@product, @payment] do |f| %&gt;\n</code></pre>\n\n<p>Suppose you have a product with ID=1, in order to add a payment for that product, you can access its payments form at URL\n<code>/products/1/payments/new</code>.</p>\n"}], "owner": {"reputation": 37, "user_id": 10586066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f795fb0d33f56a47dac4b986cf81ee7?s=128&d=identicon&r=PG&f=1", "display_name": "Hardress", "link": "https://stackoverflow.com/users/10586066/hardress"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 661, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1544465877, "creation_date": 1544457279, "last_edit_date": 1544465877, "question_id": 53709202, "link": "https://stackoverflow.com/questions/53709202/couldnt-find-product-without-an-id", "title": "Couldn&#39;t find Product without an ID", "body": "<p>I'm getting an ActiveRecord::RecordNotFound in PaymentsController#create error / Couldn't find Product without an ID</p>\n\n<p>I'm trying to set up Stripe payments, but I get an error after the credit card is submitted. I'm doing this for an Intro to Rails class, and my classmates have the same code but theirs' is working.</p>\n\n<p>It appears that the error is in this line:</p>\n\n<pre><code>@product = Product.find(params[:product_id])\n</code></pre>\n\n<p>Here is my Payments Controller:</p>\n\n<pre><code>class PaymentsController &lt; ApplicationController\n\n  def new\n    @product = @product.payments.new\n  end\n\n  def create\n    token = params[:stripeToken]\n    @product = Product.find(params[:product_id])\n    @user = current_user\n    # Create the charge on Stripe's servers - this will charge the user's card\n\n    begin\n      charge = Stripe::Charge.create(\n        amount: (@product.price*100), # amount in cents, again\n        currency: \"usd\",\n        source: token,\n        description: params[:stripeEmail]\n      )\n\n      if charge.paid\n        Order.create(\n          product_id: @product.id,\n          user_id: @user.id,\n          total: @product.price\n        )\n        #flash[:success] = \"You have successfully paid for your order!\"\n        UserMailer.order_confirmation_email(@user, @product).deliver_now\n    end\n\n    rescue Stripe::CardError =&gt; e\n      # The card has been declined\n      body = e.json_body\n      err = body[:error]\n      flash[:error] = \"Unfortunately, there was an error processing your payment: #{err[:message]}\"\n    end\n    redirect_to product_path(@product), notice: \"Thank you for your purchase.\"\n  end\nend\n</code></pre>\n\n<p>Here is the console message:</p>\n\n<pre><code>Started POST \"/payments/create\" for 127.0.0.1 at 2018-12-10 10:49:15 -0500\nProcessing by PaymentsController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"jJhGPS9Su0IuepHt2Eea/hCEhDo3A3fggu6EUjwLDrJphrC8VmNRycUqzyLGiJpcaN3mHOzr224BYsbgbjo38Q==\", \"stripeToken\"=&gt;\"tok_1Dfr0PHrTxlTJx3aoOtOh2Z9\", \"stripeTokenType\"=&gt;\"card\", \"stripeEmail\"=&gt;\"myemail@gmail.com\"}\nCompleted 404 Not Found in 2ms (ActiveRecord: 0.0ms)\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>Rails.application.routes.draw do\n  devise_for :users, path: '', path_names: { sign_in: 'login', sign_out: 'logout' }\n  resources :users\n  resources :products, :invoices, :orders, :users # 5.1 added \", :invoices, :orders, :users\"\n  resources :users, except: [:index]\n  get 'simple_pages/about'\n  get 'simple_pages/contact'\n  get 'simple_pages/index'\n  get 'simple_pages/landing_page'\n  post 'simple_pages/thank_you'\n  post 'payments/create'\n  root 'simple_pages#landing_page'\n  mount ActionCable.server =&gt; '/cable'\n\n\n  resources :products do # 5.8 added\n    resources :comments\n  end\n\n  resources :products do\n     resources :payments\n  end\n\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\nend\n</code></pre>\n\n<p>payments/_form.html.erb</p>\n\n<pre><code>&lt;%= form_for [@product, @payment] do |f| %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "rake", "kill"], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 2, "last_activity_date": 1544454296, "creation_date": 1544454296, "answer_id": 53708361, "question_id": 53707580, "link": "https://stackoverflow.com/questions/53707580/kill-callback-rake/53708361#53708361", "title": "Kill callback rake", "body": "<p>Assuming the process is killed gracefully (i.e. not via <code>kill -9</code>, or any other <code>SIGKILL</code>), you can rescue from the signal and \"do something\" before terminating. (Or even refuse to terminate, if you want!)</p>\n\n<p>The most basic approach would be to define an <a href=\"https://ruby-doc.org/core/Kernel.html#method-i-at_exit\" rel=\"nofollow noreferrer\"><code>at_exit</code></a> proc:</p>\n\n<pre><code>at_exit { write_something_to_file }\n</code></pre>\n\n<p>Or, you could be more granular and define <code>rescue</code> blocks within the code:</p>\n\n<pre><code>rescue SystemExit, Interrupt\n  # ...\n</code></pre>\n\n<p>...Or, you could establish even more control by \"killing\" the process via custom signals (e.g. <code>USR1</code>), instead of sending <code>SIGINT</code>: <a href=\"https://ruby-doc.org/core/Signal.html\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core/Signal.html</a>.</p>\n\n<p>There are many variant approaches you could take, so long as it's not a <code>SIGKILL</code> being sent, as that's uncatchable by design.</p>\n"}], "owner": {"reputation": 26, "user_id": 5110355, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-PxR03d9cKzw/AAAAAAAAAAI/AAAAAAAAARo/ewgys2BaRnM/photo.jpg?sz=128", "display_name": "Martin Ziserman", "link": "https://stackoverflow.com/users/5110355/martin-ziserman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 53708361, "answer_count": 1, "score": -1, "last_activity_date": 1544454296, "creation_date": 1544451542, "question_id": 53707580, "link": "https://stackoverflow.com/questions/53707580/kill-callback-rake", "title": "Kill callback rake", "body": "<p>I have a really long rake task that finish with writting the result in a file. I would like to kill it but get it's current result written in the file.</p>\n\n<p>I know I could make it write to the file at each iteration but that would make it even longer. So is there a way to call a function before the task is killed ?</p>\n"}, {"tags": ["ruby", "string", "escaping", "literals"], "comments": [{"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 1, "creation_date": 1544450039, "post_id": 53707082, "comment_id": 94268740, "body": "It is unclear what your question is. Can you show a piece of code that you are trying to use and is failing?"}, {"owner": {"reputation": 1487, "user_id": 2879613, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9d15495a9fc9602f04d0124d4989b6ab?s=128&d=identicon&r=PG&f=1", "display_name": "ggoha", "link": "https://stackoverflow.com/users/2879613/ggoha"}, "reply_to_user": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 0, "creation_date": 1544450268, "post_id": 53707082, "comment_id": 94268865, "body": "I read the password from the secrets and it did not work. I try simple string and have behavior like in question"}, {"owner": {"reputation": 1487, "user_id": 2879613, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9d15495a9fc9602f04d0124d4989b6ab?s=128&d=identicon&r=PG&f=1", "display_name": "ggoha", "link": "https://stackoverflow.com/users/2879613/ggoha"}, "reply_to_user": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 0, "creation_date": 1544450320, "post_id": 53707082, "comment_id": 94268897, "body": "for example ruby -e &#39;puts &quot;a\\\\yb&quot;&#39; =&gt; &quot;ayb&quot;"}, {"owner": {"reputation": 20930, "user_id": 6881240, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/dc1e27d7e9a3de2ca8e257cb7c72ff4a?s=128&d=identicon&r=PG&f=1", "display_name": "kabanus", "link": "https://stackoverflow.com/users/6881240/kabanus"}, "edited": false, "score": 1, "creation_date": 1544450544, "post_id": 53707082, "comment_id": 94269025, "body": "I have your version of ruby and get <code>a\\yb</code> as output on the terminal. Please post exactly what you are running and is not working so we can better understand."}, {"owner": {"reputation": 27342, "user_id": 899344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b510e9cb741e4f4e1aed1c4642f21066?s=128&d=identicon&r=PG", "display_name": "Conner", "link": "https://stackoverflow.com/users/899344/conner"}, "edited": false, "score": 1, "creation_date": 1544477385, "post_id": 53707082, "comment_id": 94282362, "body": "After your edits, <code>p</code> is the problem. Use <code>puts</code> instead."}], "answers": [{"comments": [{"owner": {"reputation": 1487, "user_id": 2879613, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9d15495a9fc9602f04d0124d4989b6ab?s=128&d=identicon&r=PG&f=1", "display_name": "ggoha", "link": "https://stackoverflow.com/users/2879613/ggoha"}, "edited": false, "score": 0, "creation_date": 1544450142, "post_id": 53707142, "comment_id": 94268796, "body": "ruby 2.3.3p222 (2016-11-21 revision 56859)"}], "tags": [], "owner": {"reputation": 27342, "user_id": 899344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b510e9cb741e4f4e1aed1c4642f21066?s=128&d=identicon&r=PG", "display_name": "Conner", "link": "https://stackoverflow.com/users/899344/conner"}, "is_accepted": false, "score": 1, "last_activity_date": 1544477256, "last_edit_date": 1544477256, "creation_date": 1544450019, "answer_id": 53707142, "question_id": 53707082, "link": "https://stackoverflow.com/questions/53707082/how-to-get-a-string-with-y/53707142#53707142", "title": "How to get a string with `&quot;\\y&quot;`", "body": "<p>Works for me. Can you show us some context?</p>\n\n<pre><code>ruby -v\n#=&gt; ruby 2.5.3p105 (2018-10-18 revision 65156) [x86_64-linux]\nruby -e 'puts \"a\\\\yb\"'\n#=&gt; a\\yb\n</code></pre>\n\n<p>After your edits, the problem is using <code>p</code> instead of <code>puts</code>. For instance:</p>\n\n<pre><code>ruby -e 'puts \"a\\\\yb\"'\n#=&gt; a\\yb\nruby -e 'p \"a\\\\yb\"'\n#=&gt; \"a\\\\yb\"\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/questions/1255324/p-vs-puts-in-ruby\">this discussion</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 4, "last_activity_date": 1544457910, "creation_date": 1544457910, "answer_id": 53709364, "question_id": 53707082, "link": "https://stackoverflow.com/questions/53707082/how-to-get-a-string-with-y/53709364#53709364", "title": "How to get a string with `&quot;\\y&quot;`", "body": "<p>When you say:</p>\n\n<pre><code>'a\\yb'\n</code></pre>\n\n<p>Then you get this back:</p>\n\n<pre><code>\"a\\\\yb\"\n</code></pre>\n\n<p>These are <strong>identical</strong> as far as Ruby is concerned. Inside of double quotes (<code>\"</code>) the backslash has special meaning. A single backslash is used to indicate either control codes like <code>\\n</code> meaning newline, or literal versions of same, like <code>\\\\</code> meaning <em>literal</em> backslash.</p>\n\n<p>Try this:</p>\n\n<pre><code>puts \"a\\\\yb\"\n</code></pre>\n\n<p>Then you'll see exactly what you want. The <code>\\\\</code> part is just escaping.</p>\n\n<p>When you use <code>p</code> you're calling:</p>\n\n<pre><code>puts \"a\\\\yb\".inspect\n</code></pre>\n\n<p>This <code>inspect</code> part puts it back into a double-quoted and escaped string, which is where you're getting confused. Print the string, not the \"inspected\" version of it.</p>\n"}, {"tags": [], "owner": {"reputation": 219, "user_id": 10474577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3137e930cf7c117b2c7aa711df8f74f6?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Gurzhiy", "link": "https://stackoverflow.com/users/10474577/ivan-gurzhiy"}, "is_accepted": false, "score": 0, "last_activity_date": 1544479036, "last_edit_date": 1544479036, "creation_date": 1544477968, "answer_id": 53714053, "question_id": 53707082, "link": "https://stackoverflow.com/questions/53707082/how-to-get-a-string-with-y/53714053#53714053", "title": "How to get a string with `&quot;\\y&quot;`", "body": "<p>In simple words <code>p</code> print <code>obj.inspect</code> to output</p>\n\n<p>Simple way to see this:</p>\n\n<pre><code>irb(main):009:0&gt; string = %q{a\\yb}\n=&gt; \"a\\\\yb\"\n\nirb(main):018:0&gt; puts string.inspect\n\"a\\\\yb\"\n\nirb(main):019:0&gt; p string\n\"a\\\\yb\"\n\nirb(main):010:0&gt; puts string\na\\yb\n</code></pre>\n"}], "owner": {"reputation": 1487, "user_id": 2879613, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9d15495a9fc9602f04d0124d4989b6ab?s=128&d=identicon&r=PG&f=1", "display_name": "ggoha", "link": "https://stackoverflow.com/users/2879613/ggoha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "closed_date": 1544558557, "accepted_answer_id": 53709364, "answer_count": 3, "score": -2, "last_activity_date": 1544498543, "creation_date": 1544449813, "last_edit_date": 1544498543, "question_id": 53707082, "link": "https://stackoverflow.com/questions/53707082/how-to-get-a-string-with-y", "closed_reason": "Needs details or clarity", "title": "How to get a string with `&quot;\\y&quot;`", "body": "<p>I have a password that contains <code>\"\\y\"</code>. I get:</p>\n\n<pre><code>\"a\\yb\" # =&gt; \"ayb\"\n'a\\yb' # =&gt; 'a\\\\yb'\n\"a\\\\yb\" # =&gt; \"a\\\\yb\"\n'a\\\\b' # =&gt; \"a\\\\yb\"\n</code></pre>\n\n<p>And nothing (like <code>concatenation</code> or <code>sub</code>) works. </p>\n\n<p>Is there a way to not change the password?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "image", "heroku"], "comments": [{"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1544450183, "post_id": 53707073, "comment_id": 94268819, "body": "Where do you store them at Heroku and how did you upload them ?"}, {"owner": {"reputation": 27, "user_id": 10587677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6286e5499a121af0e479956d84224c85?s=128&d=identicon&r=PG&f=1", "display_name": "Matheus Andrade", "link": "https://stackoverflow.com/users/10587677/matheus-andrade"}, "reply_to_user": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1544452734, "post_id": 53707073, "comment_id": 94270238, "body": "I&#39;m using spree, and through the spree console I can tie an image to a product."}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1544572697, "post_id": 53707073, "comment_id": 94321997, "body": "I am not too sure how Spree works. But basically only files in your asset pipeline are persistent. (Stored in app/asset/images then precompiled into public folder) what you should do is host those images at a cloud service (not sure if this is what you do through the spree console, this is why I asked)"}], "answers": [{"comments": [{"owner": {"reputation": 2133, "user_id": 5473450, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7mHKn.png?s=128&g=1", "display_name": "RangerRanger", "link": "https://stackoverflow.com/users/5473450/rangerranger"}, "edited": false, "score": 0, "creation_date": 1544457083, "post_id": 53707243, "comment_id": 94272704, "body": "The intent above is correct, but a small clarification. Heroku does allow the use of the file system but it is strongly discouraged. Since the filesystem is ephemeral and the dynos restart once per day, you will lose anything you&#39;ve written to the fs on that restart. Small point but important distinction."}], "tags": [], "owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "is_accepted": false, "score": 1, "last_activity_date": 1544450297, "creation_date": 1544450297, "answer_id": 53707243, "question_id": 53707073, "link": "https://stackoverflow.com/questions/53707073/heroku-images-gone/53707243#53707243", "title": "Heroku Images gone", "body": "<p>Heroku doesn't allow you to save images to it due to its ephemereal storage unless they're a part of your assets folder and precompiled.  For uploading images you need to tie it into AmazonS3 (or some other image store) because only the database data persists.  Here's a heroku dev guide that shows how to use AmazonS3 to store images and why they can't be saved on Heroku's platform itself:</p>\n\n<p><a href=\"https://devcenter.heroku.com/articles/active-storage-on-heroku\" rel=\"nofollow noreferrer\">https://devcenter.heroku.com/articles/active-storage-on-heroku</a></p>\n"}], "owner": {"reputation": 27, "user_id": 10587677, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6286e5499a121af0e479956d84224c85?s=128&d=identicon&r=PG&f=1", "display_name": "Matheus Andrade", "link": "https://stackoverflow.com/users/10587677/matheus-andrade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1544450297, "creation_date": 1544449754, "question_id": 53707073, "link": "https://stackoverflow.com/questions/53707073/heroku-images-gone", "title": "Heroku Images gone", "body": "<p>After updating images for many products on HerokuApp, I came back some minutes later to see that all images of the products but two are missing?</p>\n\n<p>Is this normal or is this fixable?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver", "automated-tests", "browserstack"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 9320560, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-x6FgfK0Lc9Q/AAAAAAAAAAI/AAAAAAAAABQ/MsZBpHfGScY/photo.jpg?sz=128", "display_name": "Adam Jensen", "link": "https://stackoverflow.com/users/9320560/adam-jensen"}, "edited": false, "score": 0, "creation_date": 1544459334, "post_id": 53709508, "comment_id": 94273976, "body": "Until now, I have used these flags to simulate cameras in chrome and firefox, but now I need similar flags for IE and Edge, which I can&#39;t find"}], "tags": [], "owner": {"reputation": 118, "user_id": 10401929, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6401fae152061b6f1c4d7d1c97834af7?s=128&d=identicon&r=PG&f=1", "display_name": "Ozone17", "link": "https://stackoverflow.com/users/10401929/ozone17"}, "is_accepted": false, "score": 0, "last_activity_date": 1544458451, "creation_date": 1544458451, "answer_id": 53709508, "question_id": 53706829, "link": "https://stackoverflow.com/questions/53706829/how-can-i-pass-create-a-fake-media-stream-to-edge-ie-webdriver/53709508#53709508", "title": "How can I pass/create a fake media stream to Edge/IE WebDriver?", "body": "<p>Currently, there is no such BrowserStack specific custom capability to pass fake media stream on IE and edge. However, you can use the same on chrome and firefox as you have mentioned above. The Chrome Option 'use-fake-device-for-media-stream' is used to grant camera access. However, you can use the 'use-fake-ui-for-media-stream' Chrome Option that will handle the scenarios for 'use-fake-device-for-media-stream' as well('Use you Microphone' OR 'Use your camera' popup).</p>\n"}], "owner": {"reputation": 73, "user_id": 9320560, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-x6FgfK0Lc9Q/AAAAAAAAAAI/AAAAAAAAABQ/MsZBpHfGScY/photo.jpg?sz=128", "display_name": "Adam Jensen", "link": "https://stackoverflow.com/users/9320560/adam-jensen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 785, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544458451, "creation_date": 1544448974, "question_id": 53706829, "link": "https://stackoverflow.com/questions/53706829/how-can-i-pass-create-a-fake-media-stream-to-edge-ie-webdriver", "title": "How can I pass/create a fake media stream to Edge/IE WebDriver?", "body": "<p>There are some flags to create a fake media stream for web camera recording. For example:</p>\n\n<p>'--use-fake-device-for-media-stream', '--use-fake-ui-for-media-stream' (Chrome); </p>\n\n<p>'make.navigator.streams.fake' (Firefox).</p>\n\n<p>Are there any flags for Edge/IE browser to pass them to WebDriver capability (Selenium::WebDriver.new :remote, { url: url, desired_caps: caps })? </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1544447617, "post_id": 53706179, "comment_id": 94267322, "body": "Can you add the stack-trace? We currently have no idea where <i>class_name</i> is called."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1544447867, "post_id": 53706179, "comment_id": 94267466, "body": "What I can tell you is adding the method <i>class_name</i> to each model doesn&#39;t impact the result because it is called upon <code>nil</code> (eg. <code>nil.model_name</code>) and not on one of your models."}, {"owner": {"reputation": 51, "user_id": 7509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51168050702128b8f694a1e5d6796d9a?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Sinko", "link": "https://stackoverflow.com/users/7509565/mr-sinko"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1544448253, "post_id": 53706179, "comment_id": 94267674, "body": "Here&#39;s the link <a href=\"https://i.stack.imgur.com/vbNKg.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/vbNKg.png</a>"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 7509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51168050702128b8f694a1e5d6796d9a?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Sinko", "link": "https://stackoverflow.com/users/7509565/mr-sinko"}, "edited": false, "score": 0, "creation_date": 1544450180, "post_id": 53707031, "comment_id": 94268817, "body": "Hi thanks I tried that but the error is somewhat the same, <a href=\"https://i.stack.imgur.com/NHSxK.png\" rel=\"nofollow noreferrer\">i.stack.imgur.com/NHSxK.png</a>"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 51, "user_id": 7509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51168050702128b8f694a1e5d6796d9a?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Sinko", "link": "https://stackoverflow.com/users/7509565/mr-sinko"}, "edited": false, "score": 0, "creation_date": 1544450261, "post_id": 53707031, "comment_id": 94268861, "body": "I guess something is wrong in the <i>in_state</i> scope. Can you post its contents?"}, {"owner": {"reputation": 51, "user_id": 7509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51168050702128b8f694a1e5d6796d9a?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Sinko", "link": "https://stackoverflow.com/users/7509565/mr-sinko"}, "edited": false, "score": 0, "creation_date": 1544451536, "post_id": 53707031, "comment_id": 94269571, "body": "include Statesman::Machine        state :new, initial: true       state :created       state :in_progress       state :updating       state :canceled       state :expired       state :assigned       state :error"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 51, "user_id": 7509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51168050702128b8f694a1e5d6796d9a?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Sinko", "link": "https://stackoverflow.com/users/7509565/mr-sinko"}, "edited": false, "score": 0, "creation_date": 1544452770, "post_id": 53707031, "comment_id": 94270264, "body": "Just to isolate the issue, does <code>Shift.in_state(:created)</code> also produce this error?"}, {"owner": {"reputation": 51, "user_id": 7509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51168050702128b8f694a1e5d6796d9a?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Sinko", "link": "https://stackoverflow.com/users/7509565/mr-sinko"}, "edited": false, "score": 0, "creation_date": 1544459167, "post_id": 53707031, "comment_id": 94273887, "body": "when I do inspect in current_user.shifts.inspect I get this ActiveRecord::Associations::CollectionProxy []"}, {"owner": {"reputation": 51, "user_id": 7509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51168050702128b8f694a1e5d6796d9a?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Sinko", "link": "https://stackoverflow.com/users/7509565/mr-sinko"}, "edited": false, "score": 0, "creation_date": 1544459280, "post_id": 53707031, "comment_id": 94273948, "body": "Shift.in_state(:created) does not produce this error but throws undefine method for &#39;shift&#39;"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 51, "user_id": 7509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51168050702128b8f694a1e5d6796d9a?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Sinko", "link": "https://stackoverflow.com/users/7509565/mr-sinko"}, "edited": false, "score": 0, "creation_date": 1544460755, "post_id": 53707031, "comment_id": 94274758, "body": "@Mr.Sinko The empty collection proxy means that <i>current_user</i> doesn&#39;t have any shifts. It&#39;s somewhat strange that <i>in_state</i> is not available for the class itself, most query methods are. Try <code>Shift.all.in_state(:created)</code> instead. This calls <i>in_state</i> on the current query scope instead of calling it on the <i>Shift</i> class itself."}, {"owner": {"reputation": 51, "user_id": 7509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51168050702128b8f694a1e5d6796d9a?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Sinko", "link": "https://stackoverflow.com/users/7509565/mr-sinko"}, "edited": false, "score": 0, "creation_date": 1544487812, "post_id": 53707031, "comment_id": 94285679, "body": "the error still persist after trying shifts.all.in_state(:created).first  but here&#39;s the new output of the console User Load (0.6ms)  SELECT  <code>users</code>.* FROM <code>users</code> WHERE <code>users</code>.<code>guid</code> = &#39;fff54dd0-207e-475b-9bc9-4bef3c97f821&#39; LIMIT 1   Shift Load (0.3ms)  SELECT <code>shifts</code>.* FROM <code>shifts</code> WHERE <code>shifts</code>.<code>user_guid</code> = &#39;fff54dd0-207e-475b-9bc9-4bef3c97f821&#39;  before just User Load (0.6ms)  SELECT  <code>users</code>.* FROM <code>users</code> WHERE <code>users</code>.<code>guid</code> = &#39;fff54dd0-207e-475b-9bc9-4bef3c97f821&#39; LIMIT 1"}, {"owner": {"reputation": 51, "user_id": 7509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51168050702128b8f694a1e5d6796d9a?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Sinko", "link": "https://stackoverflow.com/users/7509565/mr-sinko"}, "edited": false, "score": 0, "creation_date": 1544488968, "post_id": 53707031, "comment_id": 94285926, "body": "I forgot to add the additional association in my shift model where the state is might be included.    include Statesman::Adapters::ActiveRecordQueries   attr_accessor :start_date, :start_timer, :end_date, :end_timer    has_many :shift_requests   has_many :employees, through: :shift_requests   has_many :shift_transitions   belongs_to :user, foreign_key: &#39;user_guid&#39;, primary_key: &#39;guid&#39;"}, {"owner": {"reputation": 51, "user_id": 7509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51168050702128b8f694a1e5d6796d9a?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Sinko", "link": "https://stackoverflow.com/users/7509565/mr-sinko"}, "edited": false, "score": 0, "creation_date": 1544490397, "post_id": 53707031, "comment_id": 94286189, "body": "it was weird that the in_state stop working after the stateman gem was updated to 3.5.1 before it was 2.0.1. I had to undone the upgrade of that gem."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 51, "user_id": 7509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51168050702128b8f694a1e5d6796d9a?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Sinko", "link": "https://stackoverflow.com/users/7509565/mr-sinko"}, "edited": false, "score": 0, "creation_date": 1544533336, "post_id": 53707031, "comment_id": 94302792, "body": "@Mr.Sinko What Rails and Ruby version are you using? <a href=\"https://github.com/gocardless/statesman/blob/master/CHANGELOG.md#v300-3-july-2017\" rel=\"nofollow noreferrer\">The Statesman changelog says that v3.0.0 dropped support for Rails 4.2 and dropped support for Ruby 2.2.</a>"}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 0, "last_activity_date": 1544449978, "last_edit_date": 1544449978, "creation_date": 1544449625, "answer_id": 53707031, "question_id": 53706179, "link": "https://stackoverflow.com/questions/53706179/got-an-error-on-association-for-my-ruby-on-rails-app/53707031#53707031", "title": "Got an error on association for my ruby on rails app", "body": "<p>This might have something to do with operator precedence. Try moving the <code>created_shifts</code> assignment to a separate line.</p>\n\n<pre><code>def redirect_based_on_shift_state\n  return unless current_user\n  created_shifts = current_user.shifts.in_state(:created).first\n  return unless created_shifts\n  redirect_to new_shift_call_list_path(created_shifts)\nend\n</code></pre>\n\n<p>This makes it also easier to find the issue in case the error still occurs. By having you logic on multiple lines the stack pointing to a certain line is also more accurate, since there is less happening per line.</p>\n"}], "owner": {"reputation": 51, "user_id": 7509565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51168050702128b8f694a1e5d6796d9a?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Sinko", "link": "https://stackoverflow.com/users/7509565/mr-sinko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544450124, "creation_date": 1544446665, "last_edit_date": 1544450124, "question_id": 53706179, "link": "https://stackoverflow.com/questions/53706179/got-an-error-on-association-for-my-ruby-on-rails-app", "title": "Got an error on association for my ruby on rails app", "body": "<p>Here's the stack:</p>\n\n<p>undefined method `class_name' for nil:NilClass Did you mean? class_eval</p>\n\n<pre><code>    def redirect_based_on_shift_state\n         redirect_to new_shift_call_list_path(created_shifts) if current_user &amp;&amp; created_shifts = current_user.shifts.in_state(:created).first\n    end\n\n    Class &lt; User\n         self.primary_key = 'guid'\n         has_many :shifts, foreign_key: 'user_guid', primary_key: 'guid'\n\n    Class &lt; Shift\n         belongs_to :user, foreign_key: 'user_guid', primary_key: 'guid\n</code></pre>\n\n<p>I already added class_name in each model to specify it explicitly though I am not using different class name. Hoping that will fix the problem however did not. This happens after my ruby upgrade from 2.2.1 to 2.5.1 and run bundle update --conservative. \nThanks for the help!</p>\n\n<p><a href=\"https://i.stack.imgur.com/vbNKg.png\" rel=\"nofollow noreferrer\">enter image description here</a>\n<a href=\"https://i.stack.imgur.com/NHSxK.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "apache", "passenger"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1544469799, "post_id": 53706131, "comment_id": 94278996, "body": "Could you use a VM (e.g. vagrant) or docker container? Or, just spin up another server?"}, {"owner": {"reputation": 53, "user_id": 5246416, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sda78AfwV6M/AAAAAAAAAAI/AAAAAAAAAAw/sFFWt0OU-pg/photo.jpg?sz=128", "display_name": "Harshwardhan Singh Rathore", "link": "https://stackoverflow.com/users/5246416/harshwardhan-singh-rathore"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1544504473, "post_id": 53706131, "comment_id": 94289039, "body": "Wouldn&#39;t it be better to run application by ProxyPass instead of having all these installations?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1544524494, "post_id": 53706131, "comment_id": 94297979, "body": "Sure, but I don&#39;t know if that will solve the compatibility issue. I&#39;m just throwing alternate ideas out there, in particular on the question of &quot;installing another passenger version&quot;, in case you hit a brick wall. It&#39;s been over 5 years since I attempted to run a ruby 1.8 application."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1544524680, "post_id": 53706131, "comment_id": 94298099, "body": "It&#39;s quite possible that you&#39;ll hit some <i>other</i> issues when trying to install such an old application on a modern machine, such as using OpenSSL or compiling native C extensions. Which is why it <i>may</i> be worth considering running a second server, or a VM, or a (docker?) container."}], "owner": {"reputation": 53, "user_id": 5246416, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-sda78AfwV6M/AAAAAAAAAAI/AAAAAAAAAAw/sFFWt0OU-pg/photo.jpg?sz=128", "display_name": "Harshwardhan Singh Rathore", "link": "https://stackoverflow.com/users/5246416/harshwardhan-singh-rathore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544448259, "creation_date": 1544446546, "last_edit_date": 1544448259, "question_id": 53706131, "link": "https://stackoverflow.com/questions/53706131/run-rails-2-2-2-application-with-phusion-passenger-5-0-30", "title": "Run Rails 2.2.2 application with Phusion Passenger 5.0.30", "body": "<p>I have my server running rails 4.2 applications with phusion passenger 5.0.30. But I need to set up one of our old websites on this server which is running on Rails 2.2.2 and ruby ruby-1.8.7-p352. I know I can not run rails 2.2.x applications with phusion passenger 5.x. So is there a way I can install some other passenger version particularly for this website? Or shall I go with ProxyPass. Thanks in advance.   </p>\n"}, {"tags": ["ruby", "docker", "docker-build"], "comments": [{"owner": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "edited": false, "score": 1, "creation_date": 1544444429, "post_id": 53704769, "comment_id": 94265663, "body": "I&#39;d suggest not using <code>rvm</code> or any similar version manager with Docker.  Just install the single specific version of Ruby your application needs in the image."}, {"owner": {"reputation": 1066, "user_id": 5238800, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ERVtn.png?s=128&g=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5238800/nik"}, "reply_to_user": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "edited": false, "score": 0, "creation_date": 1544450705, "post_id": 53704769, "comment_id": 94269105, "body": "@DavidMaze - Thanks for your response.I would have done that but I have other application too running on same machine which uses different ruby versions,so I&#39;ll have to keep RVM. Any alternate solution?Or can I restrict RVM access to docker?"}, {"owner": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "edited": false, "score": 0, "creation_date": 1544454148, "post_id": 53704769, "comment_id": 94271097, "body": "\u201cOther application ... different Ruby versions\u201d...then you can build a different image, with a different Ruby base, for that other application."}, {"owner": {"reputation": 2024, "user_id": 5511315, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UBuFb.png?s=128&g=1", "display_name": "noraj", "link": "https://stackoverflow.com/users/5511315/noraj"}, "edited": false, "score": 1, "creation_date": 1544549220, "post_id": 53704769, "comment_id": 94312349, "body": "@nik You can use <code>rvm</code> (or better <code>rbenv</code>) on your machine but use a fixed version of ruby inside your container (use ruby images)."}, {"owner": {"reputation": 2019, "user_id": 10035556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86cea073655558939d961937095efc80?s=128&d=identicon&r=PG&f=1", "display_name": "Mayur", "link": "https://stackoverflow.com/users/10035556/mayur"}, "edited": false, "score": 0, "creation_date": 1551866097, "post_id": 53704769, "comment_id": 96793780, "body": "@nik Did you solve this issue?"}], "owner": {"reputation": 1066, "user_id": 5238800, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/ERVtn.png?s=128&g=1", "display_name": "nik", "link": "https://stackoverflow.com/users/5238800/nik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1544441494, "creation_date": 1544441494, "question_id": 53704769, "link": "https://stackoverflow.com/questions/53704769/rvm-exec-not-found-while-building-docker", "title": "rvm-exec: not found while building docker", "body": "<p>I have ruby application running inside docker.I tried to run docker container on ubuntu VM which worked fine.But when I tried to run the same docker-ruby application on another VM ,it is giving me error as-</p>\n\n<pre><code>Step 14/17 : RUN bundle install --gemfile test/Gemfile\n ---&gt; Running in b545e371e3\n/usr/bin/bundle: 2: exec: /usr/local/rvm/bin/rvm-exec: not found\nERROR: Service 'test' failed to build: The command '/bin/sh -c bundle install --gemfile test/Gemfile' returned a non-zero code: 127\n</code></pre>\n\n<p>I'm using same repository and ruby version(1.8.7) on both ubuntu systems, still facing issue.Can anyone help/suggest some solution on this issue? Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 106, "user_id": 6037583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b584584fd12f81a98eb924a1df66bfed?s=128&d=identicon&r=PG&f=1", "display_name": "eurodo061", "link": "https://stackoverflow.com/users/6037583/eurodo061"}, "edited": false, "score": 2, "creation_date": 1544443409, "post_id": 53704565, "comment_id": 94265107, "body": "Please check <a href=\"https://github.com/discourse/mini_racer/issues/85\" rel=\"nofollow noreferrer\">this</a> or <a href=\"https://github.com/discourse/mini_racer/issues/37\" rel=\"nofollow noreferrer\">this</a>.  Try doing a <code>gem uninstall libv8</code> and retry installing <code>mini_racer</code>."}, {"owner": {"reputation": 1023, "user_id": 5524590, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6eaff3863b2de0a4dd5328b612ead9de?s=128&d=identicon&r=PG&f=1", "display_name": "El Anonimo", "link": "https://stackoverflow.com/users/5524590/el-anonimo"}, "reply_to_user": {"reputation": 106, "user_id": 6037583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b584584fd12f81a98eb924a1df66bfed?s=128&d=identicon&r=PG&f=1", "display_name": "eurodo061", "link": "https://stackoverflow.com/users/6037583/eurodo061"}, "edited": false, "score": 0, "creation_date": 1544444810, "post_id": 53704565, "comment_id": 94265887, "body": "<code>Successfully uninstalled libv8-6.7.288.46.1-x86_64-linux ... Successfully installed libv8-6.7.288.46.1-x86_64-linux ... Successfully installed mini_racer-0.2.4 ... 2 gems installed</code>   <code>*:~&#47;Desktop&#47;Studies&#47;react-on-rails-demo$ gem which mini_racer ERROR:  Can&#39;t find Ruby library file or shared library mini_racer</code>   Though I see the ` /home/*/.rvm/gems/ruby-2.5.1/gems/mini_racer-0.2.4/ext/mini_&zwnj;&#8203;racer_extension/` folder and its contents."}, {"owner": {"reputation": 106, "user_id": 6037583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b584584fd12f81a98eb924a1df66bfed?s=128&d=identicon&r=PG&f=1", "display_name": "eurodo061", "link": "https://stackoverflow.com/users/6037583/eurodo061"}, "edited": false, "score": 0, "creation_date": 1544445640, "post_id": 53704565, "comment_id": 94266287, "body": "Can you please do <code>ruby -v</code> inside <code>~&#47;Desktop&#47;Studies&#47;react-on-rails-demo</code> and check the ruby version you have for react-on-rails-demo project. Or you can try <code>bundle exec gem which mini_racer</code>. Or do <code>rvm use ruby@2.5.1</code> and then run <code>gem which mini_racer</code>. Let me know if its working or not."}, {"owner": {"reputation": 1023, "user_id": 5524590, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6eaff3863b2de0a4dd5328b612ead9de?s=128&d=identicon&r=PG&f=1", "display_name": "El Anonimo", "link": "https://stackoverflow.com/users/5524590/el-anonimo"}, "reply_to_user": {"reputation": 106, "user_id": 6037583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b584584fd12f81a98eb924a1df66bfed?s=128&d=identicon&r=PG&f=1", "display_name": "eurodo061", "link": "https://stackoverflow.com/users/6037583/eurodo061"}, "edited": false, "score": 0, "creation_date": 1544446149, "post_id": 53704565, "comment_id": 94266521, "body": "These were the outputs:  <code>ruby -v ruby 2.5.1p57</code>  <code>bundle exec gem which mini_racer Could not find gem &#39;mini_racer&#39; in any of the gem sources listed in your Gemfile.</code>  <code>rvm use ruby@2.5.1 ruby-2.5.1 - #gemset created &#47;home&#47;*&#47;.rvm&#47;gems&#47;ruby-2.5.1@2.5.1 ruby-2.5.1 - #generating 2.5.1 wrappers........... Using &#47;home&#47;*&#47;.rvm&#47;gems&#47;ruby-2.5.1 with gemset 2.5.1</code>  <code>gem which mini_racer ERROR:  Can&#39;t find Ruby library file or shared library mini_racer</code>"}, {"owner": {"reputation": 1023, "user_id": 5524590, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6eaff3863b2de0a4dd5328b612ead9de?s=128&d=identicon&r=PG&f=1", "display_name": "El Anonimo", "link": "https://stackoverflow.com/users/5524590/el-anonimo"}, "reply_to_user": {"reputation": 106, "user_id": 6037583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b584584fd12f81a98eb924a1df66bfed?s=128&d=identicon&r=PG&f=1", "display_name": "eurodo061", "link": "https://stackoverflow.com/users/6037583/eurodo061"}, "edited": false, "score": 0, "creation_date": 1544446494, "post_id": 53704565, "comment_id": 94266708, "body": "I&#39;m trying to install the React on Rails framework. <a href=\"https://www.youtube.com/watch?v=_bjScw60FBk&amp;index=3&amp;list=PL5VAKH-U1M6dj84BApfUtvBjvF-0-JfEU\" rel=\"nofollow noreferrer\">youtube.com/&hellip;</a>"}, {"owner": {"reputation": 106, "user_id": 6037583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b584584fd12f81a98eb924a1df66bfed?s=128&d=identicon&r=PG&f=1", "display_name": "eurodo061", "link": "https://stackoverflow.com/users/6037583/eurodo061"}, "edited": false, "score": 0, "creation_date": 1544446991, "post_id": 53704565, "comment_id": 94266990, "body": "Add mini_racer to your gemfile and do a <code>bundle</code>, then check <code>gem which mini_racer</code> I think it should work after this."}, {"owner": {"reputation": 106, "user_id": 6037583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b584584fd12f81a98eb924a1df66bfed?s=128&d=identicon&r=PG&f=1", "display_name": "eurodo061", "link": "https://stackoverflow.com/users/6037583/eurodo061"}, "reply_to_user": {"reputation": 1023, "user_id": 5524590, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6eaff3863b2de0a4dd5328b612ead9de?s=128&d=identicon&r=PG&f=1", "display_name": "El Anonimo", "link": "https://stackoverflow.com/users/5524590/el-anonimo"}, "edited": false, "score": 0, "creation_date": 1544447003, "post_id": 53704565, "comment_id": 94266998, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/185007/discussion-between-eurodo061-and-el-anonimo\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 1023, "user_id": 5524590, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6eaff3863b2de0a4dd5328b612ead9de?s=128&d=identicon&r=PG&f=1", "display_name": "El Anonimo", "link": "https://stackoverflow.com/users/5524590/el-anonimo"}, "is_accepted": true, "score": 0, "last_activity_date": 1544455887, "creation_date": 1544455887, "answer_id": 53708806, "question_id": 53704565, "link": "https://stackoverflow.com/questions/53704565/warning-command-line-option-wimplicit-int-is-valid-for-c-objc-but-not-for-c/53708806#53708806", "title": "warning: command line option \u2018-Wimplicit-int\u2019 is valid for C/ObjC but not for C++", "body": "<p>I commented out\n<code># mini_racer', platforms: :ruby</code> in the Gemfile then installed <code>mini_racer</code> with <code>sudo gem install mini_racer</code>. It seems to work now. Though <code>mini_racer</code> remained commented out in the Gemfile.</p>\n"}], "owner": {"reputation": 1023, "user_id": 5524590, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6eaff3863b2de0a4dd5328b612ead9de?s=128&d=identicon&r=PG&f=1", "display_name": "El Anonimo", "link": "https://stackoverflow.com/users/5524590/el-anonimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 881, "favorite_count": 0, "accepted_answer_id": 53708806, "answer_count": 1, "score": 0, "last_activity_date": 1544455887, "creation_date": 1544440740, "last_edit_date": 1544445273, "question_id": 53704565, "link": "https://stackoverflow.com/questions/53704565/warning-command-line-option-wimplicit-int-is-valid-for-c-objc-but-not-for-c", "title": "warning: command line option \u2018-Wimplicit-int\u2019 is valid for C/ObjC but not for C++", "body": "<p>Attempting to install the required gems for a project on Ubuntu 16 I ran into the error above. The gem causing it was <code>mini_racer 0.2.4</code>.</p>\n\n<p>The code line causing the error is inside <code>/home/*/.rvm/gems/ruby-2.5.1/gems/mini_racer-0.2.4/ext/mini_racer_extension/Makefile</code>.</p>\n\n<p>How do I remove the option <code>-Wimplicit-int</code> from that line when on the command to install the project gems <code>mini_racer 0.2.4</code> gets refetched?</p>\n\n<pre><code>current directory:\n/home/*/.rvm/gems/ruby-2.5.1/gems/mini_racer-0.2.4/ext/mini_racer_extension\nmake \"DESTDIR=\"\ncompiling mini_racer_extension.cc\ncc1plus: warning: command line option \u2018-Wimplicit-int\u2019 is valid for C/ObjC but not for C++\ncc1plus: warning: unrecognized command line option \u2018-Wno-self-assign\u2019\ncc1plus: warning: unrecognized command line option \u2018-Wno-constant-logical-operand\u2019\ncc1plus: warning: unrecognized command line option \u2018-Wno-parentheses-equality\u2019\ncc1plus: warning: unrecognized command line option \u2018-Wno-tautological-compare\u2019\nlinking shared-object mini_racer_extension.so\nmini_racer_extension.so: final close failed: Invalid operation\ncollect2: error: ld returned 1 exit status\nMakefile:257: recipe for target 'mini_racer_extension.so' failed\nmake: *** [mini_racer_extension.so] Error 1\n\nmake failed, exit code 2\n</code></pre>\n"}, {"tags": ["ruby", "jekyll", "liquid"], "comments": [{"owner": {"reputation": 3249, "user_id": 1279355, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ac7a44c55973edf3381ce916ee8eb100?s=128&d=identicon&r=PG", "display_name": "Sir l33tname", "link": "https://stackoverflow.com/users/1279355/sir-l33tname"}, "edited": false, "score": 0, "creation_date": 1544464132, "post_id": 53704076, "comment_id": 94276477, "body": "Do you have a repo which can be cloned to try this?"}, {"owner": {"reputation": 179, "user_id": 4362080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YLGsA.png?s=128&g=1", "display_name": "debite", "link": "https://stackoverflow.com/users/4362080/debite"}, "reply_to_user": {"reputation": 3249, "user_id": 1279355, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ac7a44c55973edf3381ce916ee8eb100?s=128&d=identicon&r=PG", "display_name": "Sir l33tname", "link": "https://stackoverflow.com/users/1279355/sir-l33tname"}, "edited": false, "score": 1, "creation_date": 1544478510, "post_id": 53704076, "comment_id": 94282884, "body": "@Sirl33tname The actual repo is private, but I was able to reproduce the issue with a minimal version of the site which can be found here: <a href=\"https://github.com/tnwr/jekyll-pages-collection\" rel=\"nofollow noreferrer\">github.com/tnwr/jekyll-pages-collection</a>"}], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 4362080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YLGsA.png?s=128&g=1", "display_name": "debite", "link": "https://stackoverflow.com/users/4362080/debite"}, "edited": false, "score": 0, "creation_date": 1544533455, "post_id": 53714930, "comment_id": 94302850, "body": "That\u2019s it! Thank you for pointing me to the <code>page.merge</code> variable. I already tried to remove that statement, but then I was confused by another error: <code>Liquid Exception: Liquid syntax error (&#47;_includes&#47;head.html line 7): &#39;for&#39; tag was never closed included in &#47;_layouts&#47;default.html</code>. As this error comes from the <code>jekyll-seo-tag</code> plugin, I found out that an additional <code>excerpt_separator: &quot;&quot;</code> in the config solves it. Do you know how this is related to the switch from the include folder method to the collection method?"}], "tags": [], "owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "is_accepted": true, "score": 2, "last_activity_date": 1544597519, "last_edit_date": 1544597519, "creation_date": 1544482513, "answer_id": 53714930, "question_id": 53704076, "link": "https://stackoverflow.com/questions/53704076/using-a-collection-for-sub-pages-in-jekyll-results-in-liquid-exception/53714930#53714930", "title": "Using a collection for sub pages in Jekyll results in Liquid Exception", "body": "<p>The error is raised when you call <code>page.merge</code>. Because :</p>\n\n<ul>\n<li><code>site.pages</code> is already a special group of <a href=\"https://jekyllrb.com/docs/pages/\" rel=\"nofollow noreferrer\">pages</a>, replacing it by a pages collection is not specially a good idea. Once done, you no longer can reach originals pages trough <code>site.page</code>, but only new collection's elements.</li>\n<li>When calling <code>page.merge</code> on a collection item, Liquid tries to invoke the <code>Jekyll::Drop::merge</code> method which needs an argument, and not the <code>merge</code> property set in front matter.</li>\n</ul>\n\n<p>Solution : Don't set pages as a collection.</p>\n"}], "owner": {"reputation": 179, "user_id": 4362080, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YLGsA.png?s=128&g=1", "display_name": "debite", "link": "https://stackoverflow.com/users/4362080/debite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "accepted_answer_id": 53714930, "answer_count": 1, "score": 0, "last_activity_date": 1544597519, "creation_date": 1544438863, "last_edit_date": 1544525319, "question_id": 53704076, "link": "https://stackoverflow.com/questions/53704076/using-a-collection-for-sub-pages-in-jekyll-results-in-liquid-exception", "title": "Using a collection for sub pages in Jekyll results in Liquid Exception", "body": "<p>To maintain clarity I like to keep all template files for sub pages in a directory named <code>_pages</code>. As Jekyll ignores all directories starting with <code>_</code> I need to add the following to my <code>_config.yml</code>:</p>\n\n<pre><code>include:\n  - _pages\n</code></pre>\n\n<p>Even though this already works quite well, a more convenient way to achieve the same results would be to use a <a href=\"https://jekyllrb.com/docs/collections/\" rel=\"nofollow noreferrer\">collection</a> for all sub pages. This way the sub pages could be targeted with <code>type: pages</code> when defining defaults like shared layouts or meta data.</p>\n\n<pre><code>collections:\n  pages:\n    output: true\n</code></pre>\n\n<p>While the above works like a charm for another project, it throws the following exception when using it for my current project:</p>\n\n<pre><code>Liquid Exception: wrong number of arguments (given 0, expected 1) in /_layouts/content.html\n</code></pre>\n\n<p>I have no idea how the switch from the include folder method to the collection method could produce this error. Even more odd is that the message does not provide a line number.</p>\n\n<p>The file <code>content.html</code> is used as primary layout for the sub pages and got the following content:</p>\n\n<pre><code>---\nlayout: default\n---\n\n&lt;div class=\"o-page o-page--pushed {{ page.style }}\"&gt;\n  {% include navigation.html %}\n\n  &lt;main class=\"o-page__content{% if page.merge %} u-pv-0x{% endif %}\"&gt;\n    {{ content }}\n  &lt;/main&gt;\n\n  {% include footer.html %}\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>EDIT:</strong> I created a <a href=\"https://github.com/tnwr/jekyll-pages-collection\" rel=\"nofollow noreferrer\">repository</a> which reproduces the issue.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "puma"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1544429927, "post_id": 53701805, "comment_id": 94258238, "body": "Did you do any changes in the code recently?"}, {"owner": {"reputation": 11, "user_id": 1636328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d223112d3ee2c55e7a6a19409fd4d5a?s=128&d=identicon&r=PG", "display_name": "dathatreya", "link": "https://stackoverflow.com/users/1636328/dathatreya"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1544432557, "post_id": 53701805, "comment_id": 94259368, "body": "No, it&#39;s working fine in my local development environment. but giving this error in production server"}, {"owner": {"reputation": 11, "user_id": 1636328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d223112d3ee2c55e7a6a19409fd4d5a?s=128&d=identicon&r=PG", "display_name": "dathatreya", "link": "https://stackoverflow.com/users/1636328/dathatreya"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1544435105, "post_id": 53701805, "comment_id": 94260704, "body": "I&#39;m not able to get where exactly the issue is... &quot;/health&quot; is my middle ware to check whether service is running or not. This service was hitting in my server on every 10 seconds"}, {"owner": {"reputation": 516, "user_id": 7095773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f78d8dd1e9e016f48fb7dcef852f2200?s=128&d=identicon&r=PG&f=1", "display_name": "Moyom", "link": "https://stackoverflow.com/users/7095773/moyom"}, "edited": false, "score": 0, "creation_date": 1556735809, "post_id": 53701805, "comment_id": 98535220, "body": "Did you find any solution? I am having the same problem"}, {"owner": {"reputation": 73, "user_id": 13992519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/831e04b6405a53d0431b9b88f7f83eef?s=128&d=identicon&r=PG&f=1", "display_name": "Xtrfox", "link": "https://stackoverflow.com/users/13992519/xtrfox"}, "reply_to_user": {"reputation": 516, "user_id": 7095773, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f78d8dd1e9e016f48fb7dcef852f2200?s=128&d=identicon&r=PG&f=1", "display_name": "Moyom", "link": "https://stackoverflow.com/users/7095773/moyom"}, "edited": false, "score": 0, "creation_date": 1612755633, "post_id": 53701805, "comment_id": 116856784, "body": "@Moyom, were you able to solve this? Having the same problem."}], "owner": {"reputation": 11, "user_id": 1636328, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d223112d3ee2c55e7a6a19409fd4d5a?s=128&d=identicon&r=PG", "display_name": "dathatreya", "link": "https://stackoverflow.com/users/1636328/dathatreya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 740, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1544437480, "creation_date": 1544429875, "last_edit_date": 1544437480, "question_id": 53701805, "link": "https://stackoverflow.com/questions/53701805/rack-app-error-handling-request-head-health-systemstackerror-stack-level-to", "title": "Rack app error handling request {HEAD /health } SystemStackError: stack level too deep", "body": "<p>After continuous running of my RAILS application on puma server for 3 to 5 days, \ni'm getting below error: in \"puma.stderr.log\" file, which is causing to reach the log file size more than 100GB+ in 2 days</p>\n\n<pre><code>Rack app error handling request {HEAD /health } \n#&lt;SystemStackError: stack level too deep&gt;\n/.../.rvm/gems/ruby-2.3.3/gems/rack-1.5.5/lib/rack/body_proxy.rb:8:in 'respond_to?'\n/.../.rvm/gems/ruby-2.3.3/gems/rack-1.5.5/lib/rack/body_proxy.rb:8:in 'respond_to?'\n/.../.rvm/gems/ruby-2.3.3/gems/rack-1.5.5/lib/rack/body_proxy.rb:8:in 'respond_to?'\n\n(~= logging this same lines for 15000 to 20000 times in log file)\n\n/.../.rvm/gems/ruby-2.3.3/gems/rack-1.5.5/lib/rack/body_proxy.rb:8:in 'respond_to?'\n/.../.rvm/gems/ruby-2.3.3/gems/rack-contrib-1.7.0/lib/rack/contrib/sendfile.rb:100:in 'call'\n/.../.rvm/gems/ruby-2.3.3/gems/railties-4.0.9/lib/rails/engine.rb:511:in 'call'\n/.../.rvm/gems/ruby-2.3.3/gems/railties-4.0.9/lib/rails/application.rb:97:in 'call'\n/.../.rvm/gems/ruby-2.3.3/gems/puma-3.11.4/lib/puma/configuration.rb:225:in 'call'\n/.../.rvm/gems/ruby-2.3.3/gems/puma-3.11.4/lib/puma/server.rb:632:in 'handle_request'\n/.../.rvm/gems/ruby-2.3.3/gems/puma-3.11.4/lib/puma/server.rb:446:in 'process_client'\n/.../.rvm/gems/ruby-2.3.3/gems/puma-3.11.4/lib/puma/server.rb:306:in 'block in run'\n/.../.rvm/gems/ruby-2.3.3/gems/puma-3.11.4/lib/puma/thread_pool.rb:120:in 'block in spawn_thread'\n</code></pre>\n\n<p>my PUMA configuration:</p>\n\n<pre><code>app_path = Rails.root.to_s\nworkers         Integer( ENV['WEB_CONCURRENCY'] || 2)\nthreads         9,32 # Min and Max threads per worker\n\npreload_app!\n\nenvironment     'production'\nport            3000\nbind            \"unix://#{app_path}/tmp/sockets/puma.sock\"\nstdout_redirect \"#{app_path}/log/puma/puma.stdout.log\", \"#{app_path}/log/puma/puma.stderr.log\", false # Logging\n\n# Set master PID and state locations\npidfile         \"#{app_path}/tmp/pids/puma.pid\"\nstate_path      \"#{app_path}/tmp/pids/puma.state\"\n\nactivate_control_app\n</code></pre>\n\n<p>Can anyone help me on this please, I'm unable to trace the exact issue to fix this??</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1544432147, "post_id": 53701574, "comment_id": 94259179, "body": "Do you mean &quot;fractional&quot; rather than &quot;factional&quot;?"}, {"owner": {"reputation": 10972, "user_id": 1299362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f9ec564b963a34f47cc1719738d75b23?s=128&d=identicon&r=PG", "display_name": "Obromios", "link": "https://stackoverflow.com/users/1299362/obromios"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1544484742, "post_id": 53701574, "comment_id": 94284932, "body": "I did mean fractional rather than factional, I must have been reading too much political commentary. I have edited accordingly"}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1544442544, "post_id": 53702235, "comment_id": 94264678, "body": "This answer will fulfill the purpose, but I think the original intention of the feature was to simply use the <code>:even</code> option in cases like this, which will &quot;round half toward the nearest even number&quot;, which will, in a long run, give the same result without actually returning random results. And I think this is actually what the OP is mentioning."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 5, "last_activity_date": 1544445865, "last_edit_date": 1544445865, "creation_date": 1544432091, "answer_id": 53702235, "question_id": 53701574, "link": "https://stackoverflow.com/questions/53701574/ruby-method-to-round-a-floating-number-frandomly-when-fractional-component-is-0/53702235#53702235", "title": "Ruby method to round a floating number frandomly when fractional component is 0.5", "body": "<p>Since Ruby 2.4, <a href=\"http://ruby-doc.org/core-2.5.3/Float.html#method-i-round\" rel=\"nofollow noreferrer\"><code>round</code></a> takes an optional keyword argument <code>half</code> to specify the round mode for <em>\"[...] numbers that are half-way between two possible rounded values\"</em></p>\n\n<p>Your method would become:</p>\n\n<pre><code>def round_random(x)\n  x.round(half: [:up, :down].sample)\nend\n\nround_random(2.6) #=&gt; 3 (always)\n\nround_random(2.5) #=&gt; 2\nround_random(2.5) #=&gt; 3\nround_random(2.5) #=&gt; 2\n\nround_random(2.4) #=&gt; 2 (always)\n</code></pre>\n\n<p>There's also <code>:even</code> which implements <a href=\"https://en.wikipedia.org/wiki/Rounding#Round_half_to_even\" rel=\"nofollow noreferrer\">round half to even</a> \u2013 a rule to avoid bias by rounding to the next <em>even</em> number in case of a tie:</p>\n\n<pre><code>1.5.round(half: :even) #=&gt; 2\n2.5.round(half: :even) #=&gt; 2\n3.5.round(half: :even) #=&gt; 4\n4.5.round(half: :even) #=&gt; 4\n</code></pre>\n\n<p>Maybe that would be a more deterministic alternativ to your problem.</p>\n"}], "owner": {"reputation": 10972, "user_id": 1299362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f9ec564b963a34f47cc1719738d75b23?s=128&d=identicon&r=PG", "display_name": "Obromios", "link": "https://stackoverflow.com/users/1299362/obromios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 53702235, "answer_count": 1, "score": 0, "last_activity_date": 1544484689, "creation_date": 1544428795, "last_edit_date": 1544484689, "question_id": 53701574, "link": "https://stackoverflow.com/questions/53701574/ruby-method-to-round-a-floating-number-frandomly-when-fractional-component-is-0", "title": "Ruby method to round a floating number frandomly when fractional component is 0.5", "body": "<p>I am working on a statistical problem and need to round randomly up or down if the fractional component is 0.5. The following code should work</p>\n\n<pre><code>def round_random(x)\n    return x.round unless x.modulo(1) == 0.5\n    x.floor + rand(2)\nend\n</code></pre>\n\n<p>but I recall some discussion about doing this in ruby, so I wonder if there is actually a standard method for it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 2, "creation_date": 1544429419, "post_id": 53701256, "comment_id": 94258019, "body": "You tagged your question all Rails versions from 3 to 5. What version do you actually use?"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1544434876, "post_id": 53701256, "comment_id": 94260555, "body": "If the Rails version is not relevant to the question I suggest removing all Ruby on Rails version tags."}], "answers": [{"tags": [], "owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "is_accepted": false, "score": 1, "last_activity_date": 1544429324, "creation_date": 1544429324, "answer_id": 53701688, "question_id": 53701256, "link": "https://stackoverflow.com/questions/53701256/how-to-use-joins-query-in-rails/53701688#53701688", "title": "how to use joins query in rails?", "body": "<p>I am assuming your rails versions is > 5</p>\n\n<pre><code>class ProjectsController &lt; ApplicationController\n    def index\n        @projects = Project.left_outer_joins(:client).select(\"projects.*, clients.name as client_name\").group(\"projects.id\")\n    end\nend\n</code></pre>\n\n<p>With above query you will get one another attribute in single project <code>client_name</code> which will contain project's client name. If you want to do on application level You can go with ray's answer, if you want to do on database level, you can write above query</p>\n"}, {"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 3, "creation_date": 1544436024, "post_id": 53701768, "comment_id": 94261209, "body": "<b>Note:</b> Keep in mind that this code raises <i>&quot;NoMethodError: undefined method `client_name&#39; for nil:NilClass&quot;</i> if <i>client</i> can be <code>nil</code>. In this case check for the presence of <i>client</i> first, or use the <a href=\"http://ruby-doc.org/core-2.5.3/doc/syntax/calling_methods_rdoc.html#label-Receiver\" rel=\"nofollow noreferrer\">safe navigation operator</a> (<code>&amp;.</code>)."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 3, "last_activity_date": 1544429714, "creation_date": 1544429714, "answer_id": 53701768, "question_id": 53701256, "link": "https://stackoverflow.com/questions/53701256/how-to-use-joins-query-in-rails/53701768#53701768", "title": "how to use joins query in rails?", "body": "<p>I see no reason to use a <code>JOIN</code> query. But I would suggest using <a href=\"https://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations\" rel=\"nofollow noreferrer\"><code>includes</code></a> to avoid N+1 queries.</p>\n\n<pre><code># in your controller\n@projects = Project.includes(:client)\n\n# in your view (simplified \u2013 without html tags)\n&lt;% @projects.each do |project| %&gt;\n  &lt;%= project.name %&gt;\n  &lt;%= project.client.client_name %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 10728400, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xxD9M.jpg?s=128&g=1", "display_name": "divya", "link": "https://stackoverflow.com/users/10728400/divya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1544435664, "creation_date": 1544427264, "last_edit_date": 1544435664, "question_id": 53701256, "link": "https://stackoverflow.com/questions/53701256/how-to-use-joins-query-in-rails", "title": "how to use joins query in rails?", "body": "<p>I have two models <em>Client</em> and <em>Project</em>.</p>\n\n<h2>Models</h2>\n\n<pre><code>class Project &lt; ApplicationRecord\n    belongs_to :client\nend\nclass Client &lt; ApplicationRecord\n    has_many :projects\nend\n</code></pre>\n\n<p>I have the following records inside the <em>clients</em> and <em>projects</em> tables:</p>\n\n<p><a href=\"https://i.stack.imgur.com/n8ca7.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/n8ca7.png\" alt=\"enter image description here\"></a></p>\n\n<p><a href=\"https://i.stack.imgur.com/D9i5n.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/D9i5n.png\" alt=\"enter image description here\"></a></p>\n\n<p>I want to display the an project record with the client name. What query do I need in my controller?</p>\n\n<h2>Controller</h2>\n\n<pre><code>class ProjectsController &lt; ApplicationController\n  def index\n    @projects = #your query here\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "macos-mojave"], "comments": [{"owner": {"reputation": 779, "user_id": 833555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d99cf1bcf274d03c06d2f218f73cff0d?s=128&d=identicon&r=PG", "display_name": "Gregory Ostermayr", "link": "https://stackoverflow.com/users/833555/gregory-ostermayr"}, "edited": false, "score": 0, "creation_date": 1544500693, "post_id": 53700851, "comment_id": 94288147, "body": "Can you confirm you have Xcode Command Line tools installed?"}, {"owner": {"reputation": 55, "user_id": 8637293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42b1358e569a8aa1226e0d8173dde645?s=128&d=identicon&r=PG", "display_name": "Jackson Gong", "link": "https://stackoverflow.com/users/8637293/jackson-gong"}, "reply_to_user": {"reputation": 779, "user_id": 833555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d99cf1bcf274d03c06d2f218f73cff0d?s=128&d=identicon&r=PG", "display_name": "Gregory Ostermayr", "link": "https://stackoverflow.com/users/833555/gregory-ostermayr"}, "edited": false, "score": 0, "creation_date": 1544502037, "post_id": 53700851, "comment_id": 94288418, "body": "Hi Greg, I ran <code>xcode-select --install</code> and saw this: <code>xcode-select: error: command line tools are already installed, use &quot;Software Update&quot; to install updates</code>. So that means it&#39;s already installed, right? Thanks!"}, {"owner": {"reputation": 779, "user_id": 833555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d99cf1bcf274d03c06d2f218f73cff0d?s=128&d=identicon&r=PG", "display_name": "Gregory Ostermayr", "link": "https://stackoverflow.com/users/833555/gregory-ostermayr"}, "edited": false, "score": 0, "creation_date": 1544502372, "post_id": 53700851, "comment_id": 94288503, "body": "what&#39;s the output of <code>&#47;usr&#47;bin&#47;clang</code>"}, {"owner": {"reputation": 55, "user_id": 8637293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42b1358e569a8aa1226e0d8173dde645?s=128&d=identicon&r=PG", "display_name": "Jackson Gong", "link": "https://stackoverflow.com/users/8637293/jackson-gong"}, "reply_to_user": {"reputation": 779, "user_id": 833555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d99cf1bcf274d03c06d2f218f73cff0d?s=128&d=identicon&r=PG", "display_name": "Gregory Ostermayr", "link": "https://stackoverflow.com/users/833555/gregory-ostermayr"}, "edited": false, "score": 0, "creation_date": 1544544611, "post_id": 53700851, "comment_id": 94309730, "body": "Is this what you are looking for? <code>~ :)&#47;usr&#47;bin&#47;clang clang: error: no input files</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3334, "user_id": 493866, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/c5a49c836c2fe4d59ec5a0828344af63?s=128&d=identicon&r=PG", "display_name": "Danny", "link": "https://stackoverflow.com/users/493866/danny"}, "is_accepted": false, "score": 0, "last_activity_date": 1549637269, "creation_date": 1549637269, "answer_id": 54594854, "question_id": 53700851, "link": "https://stackoverflow.com/questions/53700851/couldnt-install-gem-extconf-rb-failed/54594854#54594854", "title": "Couldn&#39;t install gem - extconf.rb failed", "body": "<p>I had to run the following cryptic commands to get nokogiri installed. Basically this entails getting my C compiler working in mac osx Mojave, after having everything working fine in a previous OS (Yosemite I think it was...)</p>\n\n<p>This is an (somewhat) obvious step when upgrading osx:</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>xcode-select --install\n</code></pre>\n\n<p>I also had to do this, which I never would've known how to do without google and <a href=\"https://gorails.com/setup/osx/10.14-mojave\" rel=\"nofollow noreferrer\">this post</a></p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>sudo installer -pkg /Library/Developer/CommandLineTools/Packages/macOS_SDK_headers_for_macOS_10.14.pkg -target /\n</code></pre>\n\n<p>Finally, I had to agree to the xcode license (found I had to do this via the makefile logs when install of nokogiri failed...)</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>sudo xcodebuild -licence\n</code></pre>\n\n<p>It'll prompt you to eventually type \"agree\"</p>\n\n<p>Finally, continuing with <code>bundle</code> works as expected for a new rails project that includes nokogiri. Success! </p>\n"}], "owner": {"reputation": 55, "user_id": 8637293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42b1358e569a8aa1226e0d8173dde645?s=128&d=identicon&r=PG", "display_name": "Jackson Gong", "link": "https://stackoverflow.com/users/8637293/jackson-gong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 838, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1549637269, "creation_date": 1544425074, "last_edit_date": 1544425401, "question_id": 53700851, "link": "https://stackoverflow.com/questions/53700851/couldnt-install-gem-extconf-rb-failed", "title": "Couldn&#39;t install gem - extconf.rb failed", "body": "<p>I upgraded the macos to Mojave and reinstalled xcode, xcode CLT, ruby, etc. Then when I tried:</p>\n\n<pre><code>gem install nokogiri\n</code></pre>\n\n<p>I got the following error (installing other gems gave similar error):</p>\n\n<pre><code>ERROR: Failed to build gem native extension.\n\ncurrent directory: /usr/local/lib/ruby/gems/2.5.0/gems/nokogiri-1.8.5/ext/nokogiri\n/usr/local/opt/ruby/bin/ruby -r ./siteconf20181209-20884-etfc5r.rb extconf.rb\nchecking if the C compiler accepts ... *** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n</code></pre>\n\n<p>I checked the <code>mkmf.log</code>, which contains the following:</p>\n\n<pre><code>\"clang -o conftest -I/usr/local/Cellar/ruby/2.5.3_1/include/ruby-2.5.0/x86_64-darwin18 -I/usr/local/Cellar/ruby/2.5.3_1/include/ruby-2.5.0/ruby/backward -I/usr/local/Cellar/ruby/2.5.3_1/include/ruby-2.5.0 -I.  -I/usr/local/opt/libyaml/include -I/usr/local/opt/openssl/include -I/usr/local/opt/readline/include -D_XOPEN_SOURCE -D_DARWIN_C_SOURCE -D_DARWIN_UNLIMITED_SELECT -D_REENTRANT   -O3 -ggdb3 -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wno-tautological-compare -Wno-parentheses-equality -Wno-constant-logical-operand -Wno-self-assign -Wunused-variable -Wimplicit-int -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wshorten-64-to-32 -Wimplicit-function-declaration -Wdivision-by-zero -Wdeprecated-declarations -Wextra-tokens  -fno-common -pipe conftest.c  -L. -L/usr/local/Cellar/ruby/2.5.3_1/lib -L/usr/local/opt/libyaml/lib -L/usr/local/opt/openssl/lib -L/usr/local/opt/readline/lib -L. -fstack-protector -L/usr/local/lib -L/usr/local/opt/libyaml/lib -L/usr/local/opt/openssl/lib -L/usr/local/opt/readline/lib     -lruby.2.5.3  -lpthread -ldl -lobjc \"\nIn file included from conftest.c:1:\nIn file included from /usr/local/Cellar/ruby/2.5.3_1/include/ruby-2.5.0/ruby.h:33:\nIn file included from /usr/local/Cellar/ruby/2.5.3_1/include/ruby-2.5.0/ruby/ruby.h:29:\n</code></pre>\n\n<p>The text went on like this for a while. I also <code>cd</code> to the nokogiri folder and directly run <code>extconf.rb</code>, and got the following error:</p>\n\n<pre><code>checking if the C compiler accepts ... *** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.`\n\nProvided configuration options:\n--with-opt-dir\n--with-opt-include\n</code></pre>\n\n<p>... (skipped similar content for brevity and continued below)</p>\n\n<pre><code>usr/local/Cellar/ruby/2.5.3_1/lib/ruby/2.5.0/mkmf.rb:456:in 'try_do': The compiler failed to generate an executable file. (RuntimeError)\nYou have to install development tools first.\n</code></pre>\n\n<p>I tried to install xcode. I also installed the header and acknowledged the license. I at first thought it has to do with GCC, but the mkmf file showed that the problem is with <code>Clang</code>.</p>\n\n<p>Hope someone can help.</p>\n"}, {"tags": ["ruby-on-rails", "angular", "ruby", "http-status-code-422", "rack-cors"], "answers": [{"comments": [{"owner": {"reputation": 2112, "user_id": 1631695, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ca3099ee965662180d4b9988f6326f?s=128&d=identicon&r=PG", "display_name": "jakenberg", "link": "https://stackoverflow.com/users/1631695/jakenberg"}, "edited": false, "score": 0, "creation_date": 1568075387, "post_id": 53701723, "comment_id": 102151143, "body": "<b>Be warned:</b> this is a terrible idea (in OP&#39;s case - note they are using HTML). By doing this you are turning off a key security feature in Rails, which exposes you to CSRF."}, {"owner": {"reputation": 469, "user_id": 4933446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cddb61a578ce2805e2f1ce9ef4cf1fe?s=128&d=identicon&r=PG", "display_name": "quazar", "link": "https://stackoverflow.com/users/4933446/quazar"}, "reply_to_user": {"reputation": 2112, "user_id": 1631695, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ca3099ee965662180d4b9988f6326f?s=128&d=identicon&r=PG", "display_name": "jakenberg", "link": "https://stackoverflow.com/users/1631695/jakenberg"}, "edited": false, "score": 0, "creation_date": 1568214046, "post_id": 53701723, "comment_id": 102205266, "body": "@jakenberg I am using JSON API so its not an issue."}, {"owner": {"reputation": 2112, "user_id": 1631695, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c7ca3099ee965662180d4b9988f6326f?s=128&d=identicon&r=PG", "display_name": "jakenberg", "link": "https://stackoverflow.com/users/1631695/jakenberg"}, "edited": false, "score": 0, "creation_date": 1568342179, "post_id": 53701723, "comment_id": 102251699, "body": "JSON APIs can still be vulnerable to CSRF via XSS: <a href=\"https://security.stackexchange.com/a/150877/40855\">security.stackexchange.com/a/150877/40855</a>. Update your question so that it doesn&#39;t show you rendering as HTML if this is a JSON API question."}], "tags": [], "owner": {"reputation": 469, "user_id": 4933446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cddb61a578ce2805e2f1ce9ef4cf1fe?s=128&d=identicon&r=PG", "display_name": "quazar", "link": "https://stackoverflow.com/users/4933446/quazar"}, "is_accepted": true, "score": 0, "last_activity_date": 1544429522, "creation_date": 1544429522, "answer_id": 53701723, "question_id": 53699878, "link": "https://stackoverflow.com/questions/53699878/gem-rack-cors-not-working-and-request-from-angular-client-to-rails-api-throwin/53701723#53701723", "title": "gem &quot;rack-cors&quot; not working and request from angular client to rails api throwing cors error", "body": "<p>It turns out I need to change how protect_from_forgery was handled as mentioned in <a href=\"https://github.com/rails/rails/blob/e20dd73df42d63b206d221e2258cc6dc7b1e6068/railties/lib/rails/generators/rails/app/templates/app/controllers/application_controller.rb.tt\" rel=\"nofollow noreferrer\">docs</a></p>\n\n<pre><code>protect_from_forgery with: :null_session\n</code></pre>\n\n<p>PS: To the person who deleted his answer, please don't do that, knowing what not to do is also part of leaning.</p>\n"}], "owner": {"reputation": 469, "user_id": 4933446, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5cddb61a578ce2805e2f1ce9ef4cf1fe?s=128&d=identicon&r=PG", "display_name": "quazar", "link": "https://stackoverflow.com/users/4933446/quazar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 838, "favorite_count": 0, "accepted_answer_id": 53701723, "answer_count": 1, "score": 1, "last_activity_date": 1597389083, "creation_date": 1544418987, "last_edit_date": 1597389083, "question_id": 53699878, "link": "https://stackoverflow.com/questions/53699878/gem-rack-cors-not-working-and-request-from-angular-client-to-rails-api-throwin", "title": "gem &quot;rack-cors&quot; not working and request from angular client to rails api throwing cors error", "body": "<p>I am struggling to get gem \"rack-cors\" to work locally. I have bare rails setup with gem 'devise_token_auth' and angular 7 client with 'angular-token' for auth. But every request from angular is throwing cors error. I have configured rails and \"rack-cors\" as per documentation but its not working. Here's my configuration in <code>application.rb</code></p>\n\n<pre><code>config.middleware.insert_before 0, Rack::Cors do\n      allow do\n        origins '*'\n        resource '*',\n          headers: :any,\n          expose: ['access-token', 'expiry', 'token-type', 'uid', 'client'],\n          methods: [:get, :post, :options, :delete, :put]\n      end\n    end\n</code></pre>\n\n<p>If I list Middlewares using <code>rails middleware</code>, <code>Rack::Cors</code> is listed second after <code>use Webpacker::DevServerProxy</code> but every request throws following error. </p>\n\n<pre><code>Processing by DeviseTokenAuth::SessionsController#create as HTML\n  Parameters: {\"session\"=&gt;{}}\nHTTP Origin header (http://localhost:4200) didn't match request.base_url (http://localhost:3000)\nCompleted 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms)\n\n\n\nActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1544419430, "post_id": 53699714, "comment_id": 94254653, "body": "<code>CSV.generate(headers: true) { |csv| csv &lt;&lt; [r1c1, r1c2]; csv &lt;&lt; [r2c1, r2c2]  }</code>, you can create csv content by above <code>r1c1</code> is nothing but string content of first ro first column"}, {"owner": {"reputation": 6487, "user_id": 1677824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/QkEqX.jpg?s=128&g=1", "display_name": "Akhil", "link": "https://stackoverflow.com/users/1677824/akhil"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1544427307, "post_id": 53699714, "comment_id": 94257250, "body": "@mu-is-too-short solution mention here <a href=\"https://stackoverflow.com/a/7074726/1677824\">stackoverflow.com/a/7074726/1677824</a> is not working for me. It prints extra \\ in result <code>source.gsub(&quot;&#39;&quot;,&quot;\\\\\\\\&#39;&quot;) =&gt; &quot;It\\\\&#39;s Free&quot;</code>"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1544464333, "post_id": 53699714, "comment_id": 94276562, "body": "@Akhil That&#39;s because you&#39;re looking at the result in <code>irb</code> which uses <code>#inspect</code> to display the value of the last expression. Look at <code>puts source.gsub(&quot;&#39;&quot;,&quot;\\\\\\\\&#39;&quot;).inspect</code> and <code>puts source.gsub(&quot;&#39;&quot;,&quot;\\\\\\\\&#39;&quot;)</code> and you&#39;ll see the difference."}, {"owner": {"reputation": 6487, "user_id": 1677824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/QkEqX.jpg?s=128&g=1", "display_name": "Akhil", "link": "https://stackoverflow.com/users/1677824/akhil"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1544521280, "post_id": 53699714, "comment_id": 94296008, "body": "Thanks @mu-is-too-short it worked !!"}], "owner": {"reputation": 6487, "user_id": 1677824, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/QkEqX.jpg?s=128&g=1", "display_name": "Akhil", "link": "https://stackoverflow.com/users/1677824/akhil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "closed_date": 1544418902, "answer_count": 0, "score": 0, "last_activity_date": 1544419449, "creation_date": 1544417769, "question_id": 53699714, "link": "https://stackoverflow.com/questions/53699714/replacing-by-in-ruby", "closed_reason": "Duplicate", "title": "Replacing &#39; by \\&#39; in Ruby", "body": "<p>I have one ruby script which parses one CSV and generates some XML files.\nIn this process, I am stuck at changing</p>\n\n<p><code>it's free</code></p>\n\n<p>to </p>\n\n<p><code>it\\'s free</code></p>\n\n<p>Seems to be a trivial task, but I couldn't complete it.</p>\n\n<p>Tried below</p>\n\n<pre><code>gsub(\"'\",\"\\'\")\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "invisible-recaptcha"], "answers": [{"comments": [{"owner": {"reputation": 6994, "user_id": 623266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aab060b3da7fa08ba0b531e2204c6469?s=128&d=identicon&r=PG", "display_name": "chell", "link": "https://stackoverflow.com/users/623266/chell"}, "edited": false, "score": 0, "creation_date": 1544670564, "post_id": 53752013, "comment_id": 94361637, "body": "Thank you very much for the excellent explanation.  It works now without the e.preventDefault() as I added the type=&quot;button&quot; to the button."}], "tags": [], "owner": {"reputation": 2770, "user_id": 1021936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/936649577892fa601836ba51ed464521?s=128&d=identicon&r=PG", "display_name": "Thiago Lewin", "link": "https://stackoverflow.com/users/1021936/thiago-lewin"}, "is_accepted": true, "score": 6, "last_activity_date": 1544651939, "creation_date": 1544651939, "answer_id": 53752013, "question_id": 53699173, "link": "https://stackoverflow.com/questions/53699173/invisible-recaptcha-submitting-form-before-getting-data/53752013#53752013", "title": "invisible recaptcha submitting form before getting data", "body": "<p>You need the <code>e.preventDefault()</code> statement otherwise the form will be submitted before recaptcha executes the callback.</p>\n\n<p>This happens because <a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/button\" rel=\"noreferrer\"><code>&lt;button&gt;</code></a> with no <strong>type</strong> attribute has <code>submit</code> as the default value/ behavior. If you look at <a href=\"https://github.com/ambethia/recaptcha#programmatically-invoke\" rel=\"noreferrer\">recaptcha documentation</a>, the <code>&lt;button&gt;</code> tag has the <strong>type</strong> attribute defined as <code>button</code>, which has no behavior associated, thus no action happens when you click at it.</p>\n\n<p>Returning to your case, either you keep the <code>e.preventDefault()</code> statement or you set the <strong>type</strong> attribute as <code>button</code>:</p>\n\n<pre><code>.form-group.actions.mt-5\n   button.btn.btn-primary.btn-lg.btn-block#submit-btn type=\"button\" Submit\n = invisible_recaptcha_tags ui: :invisible, callback: 'submitInvisibleRecaptchaForm'\n</code></pre>\n"}], "owner": {"reputation": 6994, "user_id": 623266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aab060b3da7fa08ba0b531e2204c6469?s=128&d=identicon&r=PG", "display_name": "chell", "link": "https://stackoverflow.com/users/623266/chell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 669, "favorite_count": 1, "accepted_answer_id": 53752013, "answer_count": 1, "score": 5, "last_activity_date": 1544651939, "creation_date": 1544412999, "last_edit_date": 1544436328, "question_id": 53699173, "link": "https://stackoverflow.com/questions/53699173/invisible-recaptcha-submitting-form-before-getting-data", "title": "invisible recaptcha submitting form before getting data", "body": "<p>I am using the recaptcha gem. Rails 5.2.</p>\n\n<p>I have the following form:</p>\n\n<pre><code>= simple_form_for @quote_request_form, url: quote_requests_path, html: {id: \"invisible-recaptcha-form\"} do |f|\n  .form-group\n    = f.input :name, label: false, placeholder: 'First and Last Name', \n  .form-group.actions.mt-5\n    button.btn.btn-primary.btn-lg.btn-block#submit-btn Submit\n  = invisible_recaptcha_tags ui: :invisible, callback: 'submitInvisibleRecaptchaForm'\n</code></pre>\n\n<p>I have added the following javascript for the form:</p>\n\n<pre><code>javascript:\n\n\n  document.getElementById('submit-btn').addEventListener('click', function (e) {\n      e.preventDefault();\n      grecaptcha.execute();\n  });\n\n  var submitInvisibleRecaptchaForm = function () {\n    document.getElementById(\"invisible-recaptcha-form\").submit();\n  };\n</code></pre>\n\n<p>I check the value from the recaptcha in my controller as follows:</p>\n\n<pre><code>  if verify_recaptcha(model: @quote_request_form) &amp;&amp; @quote_request_form.save\n    redirect_to quote_confirm_path, notice: \"Your quotation request is being processed\"\n  else\n    render :new\n  end\n</code></pre>\n\n<p>It all works as long as I use the e.preventDefault(); line. If I remove this line I get a failure with the recaptcha and I can see in the parameters that the recaptcha attriburte is sending in blank data.</p>\n\n<p>I don't understand why I need it as none of the documentation specify it. So I'm doing something wrong but I can't figure it out.</p>\n\n<p>Can anyone see how I can fix this?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "reply_to_user": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "edited": false, "score": 0, "creation_date": 1544408240, "post_id": 53698637, "comment_id": 94252566, "body": "I&#39;ll add it, but you can see it inside the array in the error message."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1544412668, "post_id": 53698637, "comment_id": 94253310, "body": "Your code as shown does not work in the way described. <code>pages</code> is defined as an instance variable but it has no getter or setter methods. <code>Document.new.pages</code> raises <code>NoMethodError: undefined method &#39;pages&#39; for #&lt;Document:0x00007fcd1fb1dbb0 @pages=[]&gt;</code>. Please make sure your code samples work as described first!"}, {"owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1544415003, "post_id": 53698637, "comment_id": 94253737, "body": "My bad, I&#39;ve fixed it. I was simplifying the problem for SO."}], "answers": [{"tags": [], "owner": {"reputation": 779, "user_id": 833555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d99cf1bcf274d03c06d2f218f73cff0d?s=128&d=identicon&r=PG", "display_name": "Gregory Ostermayr", "link": "https://stackoverflow.com/users/833555/gregory-ostermayr"}, "is_accepted": true, "score": 1, "last_activity_date": 1544408622, "creation_date": 1544408622, "answer_id": 53698708, "question_id": 53698637, "link": "https://stackoverflow.com/questions/53698637/ruby-object-allocation-type-coercion/53698708#53698708", "title": "Ruby object allocation type coercion", "body": "<p>Change</p>\n\n<pre><code>@document.pages &lt;&lt; @pages\n</code></pre>\n\n<p>to </p>\n\n<pre><code>@document.pages = @pages\n</code></pre>\n"}], "owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 53698708, "answer_count": 1, "score": 0, "last_activity_date": 1544414980, "creation_date": 1544407862, "last_edit_date": 1544414980, "question_id": 53698637, "link": "https://stackoverflow.com/questions/53698637/ruby-object-allocation-type-coercion", "title": "Ruby object allocation type coercion", "body": "<p>Given this Ruby class (importantly, <strong>not</strong> ActiveRecord or Rails):</p>\n\n<pre><code>class Document\n  attr_accessor :word_total, :pages\n\n  def initialize\n    @pages = []\n  end\n\n  def word_total\n    @pages.map(&amp;:word_count).sum\n  end\nend\n</code></pre>\n\n<p>And this line of code in another class:</p>\n\n<pre><code>@document.pages &lt;&lt; @pages\n</code></pre>\n\n<p>I get this error.</p>\n\n<pre><code>Failure/Error: @pages.map(&amp;:word_count).sum\n\nNoMethodError:\nundefined method `word_count' for [#&lt;Page:0x00007ff76ca85320  @word_count=254&gt;]:Array\n</code></pre>\n\n<p>How can I coerce the type of collection to be a <code>Page</code> instead of an <code>Array</code>? Is that the problem I'm experiencing?</p>\n"}, {"tags": ["ruby", "postgresql", "sinatra"], "comments": [{"owner": {"reputation": 779, "user_id": 833555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d99cf1bcf274d03c06d2f218f73cff0d?s=128&d=identicon&r=PG", "display_name": "Gregory Ostermayr", "link": "https://stackoverflow.com/users/833555/gregory-ostermayr"}, "edited": false, "score": 0, "creation_date": 1544407305, "post_id": 53698363, "comment_id": 94252396, "body": "can you connect to Postgres manually?"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1544410885, "post_id": 53698363, "comment_id": 94253016, "body": "Do you have PostgreSQL installed? Have you setup the database for this app? If you run macOS you can install Postgres with <code>brew install postgresql</code>. You would have to refer to the documentation of the app you cloned for info on actually setting up the database."}], "answers": [{"comments": [{"owner": {"reputation": 257, "user_id": 6238512, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/W8pZ8.jpg?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/6238512/kris"}, "edited": false, "score": 1, "creation_date": 1544466830, "post_id": 53707145, "comment_id": 94277673, "body": "Thank you, The firewall was causing part of the problem and blocking my connection. I also realized that  PostgreSQL version 11 is not compatible with windows 10 so I downgraded to version 10."}], "tags": [], "owner": {"reputation": 3249, "user_id": 1279355, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ac7a44c55973edf3381ce916ee8eb100?s=128&d=identicon&r=PG", "display_name": "Sir l33tname", "link": "https://stackoverflow.com/users/1279355/sir-l33tname"}, "is_accepted": true, "score": 4, "last_activity_date": 1544463862, "last_edit_date": 1544463862, "creation_date": 1544450040, "answer_id": 53707145, "question_id": 53698363, "link": "https://stackoverflow.com/questions/53698363/trouble-starting-sinatra-application/53707145#53707145", "title": "Trouble starting sinatra application", "body": "<p>Your PostgreSQL is not running or not accepting connections at <code>127.0.0.1:5432</code></p>\n\n<p>Meaning you should start a PostgreSQL server and if it's already running check your firewall configuration. (Or if your PostgreSQL server is running at <code>127.0.0.1:4000</code> for example, you need to adjust your application config to these values)</p>\n"}], "owner": {"reputation": 257, "user_id": 6238512, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/W8pZ8.jpg?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/6238512/kris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 53707145, "answer_count": 1, "score": 0, "last_activity_date": 1544463862, "creation_date": 1544404711, "question_id": 53698363, "link": "https://stackoverflow.com/questions/53698363/trouble-starting-sinatra-application", "title": "Trouble starting sinatra application", "body": "<p>I have cloned a sinatra application and am trying to run the application. I have followed the steps in the in the repo read me but when I run: </p>\n\n<blockquote>\n  <p>rackup -p 4567</p>\n</blockquote>\n\n<p>the server starts but I get the following error: </p>\n\n<pre><code>PG::ConnectionBad at /\ncould not connect to server: Connection refused (0x0000274D/10061) Is the server running on host \"localhost\" (::1) and accepting TCP/IP connections on port 5432? could not connect to server: Connection refused (0x0000274D/10061) Is the server running on host \"localhost\" (127.0.0.1) and accepting TCP/IP connections on port 5432?\n</code></pre>\n\n<p>Any help is appriciated, Thanks  </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1544415285, "post_id": 53698159, "comment_id": 94253790, "body": "You need to reconsider your calculation that comes after this. Why does <code>3</code> have to be exceptional? Is there a way to avoid it? If it really should be handled as an exceptional case, then it should be handled as exceptional in the routine shown here as well."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1544440417, "post_id": 53698159, "comment_id": 94263566, "body": "<i>&quot;value is used in a multiplication, and if it is 0, the output becomes 0&quot;</i> \u2013 only the result of the multiplication becomes 0, so you&#39;d have <code>total_monthly_income_present_month + 0</code>. Not sure why you need the ternary."}], "answers": [{"tags": [], "owner": {"reputation": 779, "user_id": 833555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d99cf1bcf274d03c06d2f218f73cff0d?s=128&d=identicon&r=PG", "display_name": "Gregory Ostermayr", "link": "https://stackoverflow.com/users/833555/gregory-ostermayr"}, "is_accepted": false, "score": 0, "last_activity_date": 1544408053, "creation_date": 1544408053, "answer_id": 53698662, "question_id": 53698159, "link": "https://stackoverflow.com/questions/53698159/finding-remaining-months-in-a-fiscal-year/53698662#53698662", "title": "Finding remaining months in a fiscal year", "body": "<p>you could set the min value of the starting index value with max</p>\n\n<pre><code>fiscal_months = [4,5,6,7,8,9,10,11,12,1,2,3]\nindex = [@month-3, 1].max\nannual_taxable_income += total_monthly_income_present_month + @basic_salary * fiscal_months[index, 12].size\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 100, "user_id": 10463251, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff958d5dc3d428d04f1cce2f80433712?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin W.", "link": "https://stackoverflow.com/users/10463251/kevin-w"}, "is_accepted": false, "score": 0, "last_activity_date": 1544418616, "creation_date": 1544418616, "answer_id": 53699827, "question_id": 53698159, "link": "https://stackoverflow.com/questions/53698159/finding-remaining-months-in-a-fiscal-year/53699827#53699827", "title": "Finding remaining months in a fiscal year", "body": "<p>It seems odd that you want a function that returns the same answer (1) for two different inputs (2,3).  But, if that is the case you could do it like this.  It is brute force but makes clear what you are trying to do:</p>\n\n<pre><code>def num_remaining_months_for (m)\n  fiscal_months = [4,  5,  6, 7, 8, 9, 10, 11, 12, 1, 2, 3]\n  remaining =     [11, 10, 9, 8, 7, 6,  5,  4, 3 , 2, 1, 1]\n  index = fiscal_months.index(m)\n  remaining[index]\nend\n\n(1..12).each do |e|\n  puts \"For month #{e} =&gt; #{num_remaining_months_for(e)} remaining\"\nend\n</code></pre>\n\n<p>The results are:</p>\n\n<pre><code>For month 1 =&gt; 2 remaining\nFor month 2 =&gt; 1 remaining\nFor month 3 =&gt; 1 remaining\nFor month 4 =&gt; 11 remaining\nFor month 5 =&gt; 10 remaining\nFor month 6 =&gt; 9 remaining\nFor month 7 =&gt; 8 remaining\nFor month 8 =&gt; 7 remaining\nFor month 9 =&gt; 6 remaining\nFor month 10 =&gt; 5 remaining\nFor month 11 =&gt; 4 remaining\nFor month 12 =&gt; 3 remaining\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 392, "user_id": 9910110, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OTTsN.jpg?s=128&g=1", "display_name": "Sandra", "link": "https://stackoverflow.com/users/9910110/sandra"}, "is_accepted": false, "score": 1, "last_activity_date": 1544420539, "creation_date": 1544420539, "answer_id": 53700072, "question_id": 53698159, "link": "https://stackoverflow.com/questions/53698159/finding-remaining-months-in-a-fiscal-year/53700072#53700072", "title": "Finding remaining months in a fiscal year", "body": "<p>I would do it like that. I think it's clearer.</p>\n\n<pre><code>def number_of_remaining_months(month)\n  fiscal_months_array = [4, 5, 6, 7, 8, 9, 10, 11, 12, 1, 2, 3]\n  month = 2 if month == 3\n  fiscal_months_array.count - 1 - fiscal_months_array.index(month)\nend\n\nputs(\"Number of the month [1-12]:\")\nmonth = Integer(gets.chomp)\nresult = number_of_remaining_months(month)\nannual_taxable_income = total_monthly_income_present_month +\n                        @basic_salary * result\n</code></pre>\n\n<p>I hope it useful for you.</p>\n"}, {"comments": [{"owner": {"reputation": 898, "user_id": 160272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/813f535246722b7bf02aacc9ce818de8?s=128&d=identicon&r=PG", "display_name": "showaltb", "link": "https://stackoverflow.com/users/160272/showaltb"}, "edited": false, "score": 0, "creation_date": 1544460922, "post_id": 53701890, "comment_id": 94274846, "body": "Your code gives me <code>12</code> for an input of <code>3</code>. To get zero, I had to add parentheses: <code>(12 - (mon + 9)) % 12</code>, which is equivalent to <code>(3 - mon) % 12</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 898, "user_id": 160272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/813f535246722b7bf02aacc9ce818de8?s=128&d=identicon&r=PG", "display_name": "showaltb", "link": "https://stackoverflow.com/users/160272/showaltb"}, "edited": false, "score": 0, "creation_date": 1544469913, "post_id": 53701890, "comment_id": 94279039, "body": "@showaltb, after reviewing my IRB session I see I transposed the wrong code to my answer. The operative line of the method that produced those results was <code>11 - (mon + 8) % 12</code>, but <code>(3 - mon) % 12</code> is simpler and therefore preferable. Many thanks."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1544500433, "last_edit_date": 1544500433, "creation_date": 1544430333, "answer_id": 53701890, "question_id": 53698159, "link": "https://stackoverflow.com/questions/53698159/finding-remaining-months-in-a-fiscal-year/53701890#53701890", "title": "Finding remaining months in a fiscal year", "body": "<pre><code>def remaining_months(mon)\n  (3 - mon) % 12\nend\n\n(1..12).each { |mon| puts \"#{mon} -&gt; #{remaining_months(mon)}\" }\n1  -&gt;  2\n2  -&gt;  1\n3  -&gt;  0\n4  -&gt; 11\n5  -&gt; 10\n6  -&gt;  9\n7  -&gt;  8\n8  -&gt;  7\n9  -&gt;  6\n10 -&gt;  5\n11 -&gt;  4\n12 -&gt;  3\n</code></pre>\n\n<p>You therefore would want <code>[remaining_months(mon), 1].max</code>. It's best not to put this part in the method <code>remaining_months</code>.</p>\n\n<p>Note that the array <code>months</code> is determined by the first element, which is the first month of the fiscal year (<code>4</code>). It therefore should not be surprising that only the first element is needed in calculations.</p>\n\n<p>Do you ever have problems like this where a modulus is involved and finding yourself trying different expressions until you finally find hit on one that works? Here's a way to do that for those in audience who are somewhat lazy by nature.</p>\n\n<pre><code>RESULT = [*(3..11), 0, 1, 2].reverse\n\na = [*(-12..0), *(1..12)]\n\na.product([1,-1], (a-[0]), a).\n  select do |c1,c2,c3,c4|\n    (1..12).all? { |mon| c1 + c2 * ((c3 * mon + c4) % 12) == RESULT[mon-1] }\n  end.\n  map do |c1,c2,c3,c4|\n    s1 = c1.zero? ? '' : c1.to_s \n    s2 = case c1.zero?\n         when true then c2==1 ? '' : '-'\n         else c2==1 ? ' + ' : ' - '\n         end\n    s3 = if c3 &gt; 0\n           c3==1 ? '' : \"#{c3} * \"\n         else\n           c3==-1 ? '- ' : \"- #{c3.abs} * \"\n         end\n    s4 = case c4 &lt;=&gt; 0\n         when 0 then ''\n         when -1 then \" - #{c4.abs}\"\n         else \" + #{c4}\"\n         end\n    \"#{s1}#{s2}((#{s3}mon#{s4}) % 12\"\n  end\n  #=&gt; [\"((- mon - 9) % 12\",\n  #    \"((- mon + 3) % 12\",\n  #    \"(11 * mon - 9) % 12\",\n  #    \"(11 * mon + 3) % 12\",\n  #    \"11 - ((- 11 * mon - 4) % 12\",\n  #    \"11 - ((- 11 * mon + 8) % 12\",\n  #    \"11 - ((mon - 4) % 12\",\n  #    \"11 - ((mon + 8) % 12\"]\n</code></pre>\n\n<p>Take your pick!</p>\n\n<p>Here we obtain the following intermediate result.</p>\n\n<pre><code>a.product([1,-1], (a-[0]), a).\n  select do |c1,c2,c3,c4|\n    (1..12).all? { |mon| c1 + c2 * ((c3 * mon + c4) % 12) == RESULT[mon-1] }\n  end\n  #=&gt; [[0, 1, -1, -9], [0, 1, -1, 3], [0, 1, 11, -9], [0, 1, 11, 3],\n  #    [11, -1, -11, -4], [11, -1, -11, 8], [11, -1, 1, -4], [11, -1, 1, 8]]\n</code></pre>\n"}], "owner": {"reputation": 464, "user_id": 6720055, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-Qor8L0OFVjU/AAAAAAAAAAI/AAAAAAAAABA/-ei57u2kNfQ/photo.jpg?sz=128", "display_name": "Rabin Poudyal", "link": "https://stackoverflow.com/users/6720055/rabin-poudyal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 53701890, "answer_count": 4, "score": -2, "last_activity_date": 1544500433, "creation_date": 1544402519, "last_edit_date": 1544415456, "question_id": 53698159, "link": "https://stackoverflow.com/questions/53698159/finding-remaining-months-in-a-fiscal-year", "title": "Finding remaining months in a fiscal year", "body": "<p>I need to calculate the number of remaining months in a fiscal year from the given month, where a fiscal year starts from the fourth month of the year. I have an array illustrating this:</p>\n\n<pre><code>months = [4, 5, 6, 7, 8, 9, 10, 11, 12, 1, 2, 3]\n</code></pre>\n\n<p>Some expected inputs and outputs are:</p>\n\n<ul>\n<li><code>4</code> => <code>11</code></li>\n<li><code>10</code> => <code>5</code></li>\n<li><code>2</code> => <code>1</code></li>\n</ul>\n\n<p>However, when <code>3</code> is given (as well as when <code>2</code> is given), I want it to return <code>1</code> because the return value is used in a multiplication, and if it is 0, the output becomes <code>0</code>.</p>\n\n<p>I solved this by doing:</p>\n\n<pre><code>@month == 3 ?\nannual_taxable_income += total_monthly_income_present_month :\nannual_taxable_income += total_monthly_income_present_month + @basic_salary * fiscal_months_array[@month - 3, 12].size\n</code></pre>\n\n<p>I used ternary operator to check if there is <code>3</code>, and if there is, then do not find the remaining months. The solution is working but I need a better way to do this.</p>\n"}, {"tags": ["ruby", "string", "symbols"], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 3, "creation_date": 1544410333, "post_id": 53697833, "comment_id": 94252916, "body": "What are you trying to show using <code>permutation</code>? It raises an error."}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1544450662, "post_id": 53697833, "comment_id": 94269082, "body": "I mean to write &quot;product&quot;, but I was looking at the permutation documentation when i wrote this and didn&#39;t go back and test it. The link went to the right documentation, but nothing else was right :) Good catch, I updated the answer"}], "tags": [], "owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "is_accepted": false, "score": 0, "last_activity_date": 1544450710, "last_edit_date": 1544450710, "creation_date": 1544399123, "answer_id": 53697833, "question_id": 53697740, "link": "https://stackoverflow.com/questions/53697740/combining-symbols-in-ruby/53697833#53697833", "title": "Combining symbols in ruby", "body": "<p>Look at <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-product\" rel=\"nofollow noreferrer\">Array#product</a></p>\n\n<pre><code>a = [:man, :woman]\nb = [\"one\", \"two\"]\na.product(b).map { |arr| arr.join('_') }.map(&amp;:to_sym)\n</code></pre>\n\n<p>Your error is because you're trying to call <code>each</code> on a <code>String</code> (b), because you converted it with <code>to_s</code> a few lines up.</p>\n\n<p>If you want to do this with the temporary variable, q, you can write it like this:</p>\n\n<pre><code>a=[:man, :woman ]\nb=[\"one\", \"two\"]\nq=[]\n\na.each do |tmp_a|\n  b.each do |tmp_b|\n    q.push((tmp_a.to_s + '_' + tmp_b).to_sym)\n  end\nend\n\nputs q\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": false, "score": 2, "last_activity_date": 1544399581, "creation_date": 1544399581, "answer_id": 53697885, "question_id": 53697740, "link": "https://stackoverflow.com/questions/53697740/combining-symbols-in-ruby/53697885#53697885", "title": "Combining symbols in ruby", "body": "<p>You have some problems while trying to achieve your expected output:</p>\n\n<p>Converting b to String gives you nothing else than <code>\"[\\\"one\\\", \\\"two\\\"]\"</code>, which isn't iterable, so I guess that mess everything.</p>\n\n<p>In the other hand it seems you're trying to iterate on a, to iterate on b then, but pushing to q right the value of the elements of a to String plus a call on each to b, seems to give you nothing.</p>\n\n<p>With a slight tweak you can make that work:</p>\n\n<pre><code>a = [:man, :woman]\nb = [\"one\", \"two\"]\nq = []\n\na.each do |n|\n    b.each do |w|\n        q &lt;&lt; (\"#{n}_#{w}\").to_sym\n    end\nend\n\np q\n# [:man_one, :man_two, :woman_one, :woman_two]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 779, "user_id": 833555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d99cf1bcf274d03c06d2f218f73cff0d?s=128&d=identicon&r=PG", "display_name": "Gregory Ostermayr", "link": "https://stackoverflow.com/users/833555/gregory-ostermayr"}, "is_accepted": false, "score": 0, "last_activity_date": 1544401708, "creation_date": 1544401708, "answer_id": 53698083, "question_id": 53697740, "link": "https://stackoverflow.com/questions/53697740/combining-symbols-in-ruby/53698083#53698083", "title": "Combining symbols in ruby", "body": "<p>Yet another riff on the nested loop without mutating an external variable within the loops</p>\n\n<pre><code>a = [:man, :woman]\nb = [\"one\", \"two\"]\n\nq = a.flat_map do |n|\n  b.map do |w|\n    \"#{n}_#{w}\".to_sym\n  end\nend\n\np q \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1544440743, "post_id": 53698889, "comment_id": 94263729, "body": "Alternatively <code>a.product(b).map { |g, n| :&quot;#{g}_#{n}&quot; }</code> \u2013 rarely seen, but interpolation also works with <a href=\"http://ruby-doc.org/core-2.5.3/doc/syntax/literals_rdoc.html#label-Symbols\" rel=\"nofollow noreferrer\">symbol literals</a>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1544441519, "post_id": 53698889, "comment_id": 94264118, "body": "@Stefan Opps. I will fix it."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 4, "last_activity_date": 1544441529, "last_edit_date": 1544441529, "creation_date": 1544410385, "answer_id": 53698889, "question_id": 53697740, "link": "https://stackoverflow.com/questions/53697740/combining-symbols-in-ruby/53698889#53698889", "title": "Combining symbols in ruby", "body": "<p>A straightforward way is this:</p>\n\n<pre><code>a.product(b).map{|arr| arr.join(\"_\").to_sym}\n#=&gt; [:man_one, :man_two, :woman_one, :woman_two]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1544477935, "creation_date": 1544477935, "answer_id": 53714045, "question_id": 53697740, "link": "https://stackoverflow.com/questions/53697740/combining-symbols-in-ruby/53714045#53714045", "title": "Combining symbols in ruby", "body": "<p>Just to give another example of <a href=\"https://ruby-doc.org/core-2.5.3/Array.html#method-i-product\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.5.3/Array.html#method-i-product</a>, passing a block:</p>\n\n<pre><code>res = []\na.product(b){ |e| res &lt;&lt; e.join('_').to_sym }\nres #=&gt; [:man_one, :man_two, :woman_one, :woman_two]\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 10435234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RA1DnjQ1h1E/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUSUSggVRzzuE-_38kSQQqJd74q3w/mo/photo.jpg?sz=128", "display_name": "Rafeh Ishtiaq", "link": "https://stackoverflow.com/users/10435234/rafeh-ishtiaq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1097, "favorite_count": 0, "answer_count": 5, "score": 3, "last_activity_date": 1544477935, "creation_date": 1544398064, "last_edit_date": 1544409998, "question_id": 53697740, "link": "https://stackoverflow.com/questions/53697740/combining-symbols-in-ruby", "title": "Combining symbols in ruby", "body": "<p>I have two arrays, one with symbols and another with strings.</p>\n\n<pre><code>a = [:man, :woman]\nb = [\"one\", \"two\"]\n</code></pre>\n\n<p>I'm trying to combine every symbol with each string in the array so that the output would be:</p>\n\n<pre><code>[:man_one, :man_two, :woman_one, :woman_two]\n</code></pre>\n\n<p>I've tried</p>\n\n<pre><code>b = b.to_s\nq = []\na.each do |n|\n  q.push (n.to_s + b.each {|w| \"_\" + w}).to_sym\nend\np q\n</code></pre>\n\n<p>But this gives me an error. How can I create the new symbols?</p>\n"}, {"tags": ["ruby", "windows"], "comments": [{"owner": {"reputation": 40466, "user_id": 33226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8f75007bcbcb8ba4daa408592e1c65ec?s=128&d=identicon&r=PG", "display_name": "Gavin Miller", "link": "https://stackoverflow.com/users/33226/gavin-miller"}, "edited": false, "score": 0, "creation_date": 1544398503, "post_id": 53697619, "comment_id": 94250892, "body": "You&#39;re on a linux platform?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1544435191, "post_id": 53697619, "comment_id": 94260754, "body": "If you have a file that doesn&#39;t contain the <code>%PDF</code> header magic, you don&#39;t have a PDF file. Anyway, what you are asking for is essentially to provide you with a full PDF parser implementation. On top of that, you aren&#39;t even content with an ISO-compliant parser, you want it to exclude certain valid documents that your &#39;gems&#39; cannot deal with, as well as allow some invalid documents that those libraries can digest. This is <b>way</b> to broad a question."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9450045"}, "edited": false, "score": 0, "creation_date": 1544402076, "post_id": 53697845, "comment_id": 94251482, "body": "Hi. I&#39;m working on windows, your code doesn&#39;t work for me :( <code>timeout</code> I knew him but he wasn&#39;t useful to me in my case (long history)."}, {"owner": {"reputation": 40466, "user_id": 33226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8f75007bcbcb8ba4daa408592e1c65ec?s=128&d=identicon&r=PG", "display_name": "Gavin Miller", "link": "https://stackoverflow.com/users/33226/gavin-miller"}, "edited": false, "score": 0, "creation_date": 1544406474, "post_id": 53697845, "comment_id": 94252248, "body": "@talC best I can do is point you to <a href=\"https://superuser.com/a/1247756/1168\">superuser.com/a/1247756/1168</a>"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1544434735, "post_id": 53697845, "comment_id": 94260481, "body": "This checks whether a file claims to be a PDF file. It does <i>nothing</i> to verify document integrity (other than pointing out, that that needs to be done, <i>somehow</i>). This is not useful."}], "tags": [], "owner": {"reputation": 40466, "user_id": 33226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8f75007bcbcb8ba4daa408592e1c65ec?s=128&d=identicon&r=PG", "display_name": "Gavin Miller", "link": "https://stackoverflow.com/users/33226/gavin-miller"}, "is_accepted": false, "score": 1, "last_activity_date": 1544399203, "creation_date": 1544399203, "answer_id": 53697845, "question_id": 53697619, "link": "https://stackoverflow.com/questions/53697619/check-if-a-pdf-file-is-corrupted-with-ruby/53697845#53697845", "title": "Check if a PDF file is corrupted with Ruby?", "body": "<p>I've hit this situation before when verifying grub bootloaders with ruby. I found the easiest solution was to do a pre-check of the hex that I know is supposed to exist. Something along the lines of this:</p>\n\n<pre><code>result = `hexdump pdf_file.pdf | head -n 1`\nvalid_pdf = result.split(\" \")[1..2] == [\"2550\", \"4446\"]\n</code></pre>\n\n<p>Over time you can expand your check to look for other bad pdfs ahead of time.</p>\n\n<p>One good practice to circumvent the locks on your pdf hangs, is to use the <a href=\"https://ruby-doc.org/stdlib-2.1.1/libdoc/timeout/rdoc/Timeout.html\" rel=\"nofollow noreferrer\"><code>Timeout</code> functionality in ruby</a> This way you can properly exit and not have to forcefully shutdown your program.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9450045"}, "edited": false, "score": 0, "creation_date": 1544408013, "post_id": 53698524, "comment_id": 94252520, "body": "Thanks helped me, is the only way to check if a pdf is damaged?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1544434572, "post_id": 53698524, "comment_id": 94260396, "body": "That code checks for presence of the PDF header magic (and fails to even do that reliably). It doesn&#39;t attempt to verify data integrity. That&#39;s not useful. @tal: If you need to test data integrity you&#39;ll inevitably have to write a full PDF parser."}, {"owner": {"reputation": 779, "user_id": 833555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d99cf1bcf274d03c06d2f218f73cff0d?s=128&d=identicon&r=PG", "display_name": "Gregory Ostermayr", "link": "https://stackoverflow.com/users/833555/gregory-ostermayr"}, "edited": false, "score": 0, "creation_date": 1544441763, "post_id": 53698524, "comment_id": 94264244, "body": "agreed - too bad pdf doesn&#39;t come with a checksum, It sounded like some of his PDF generation was total failure i.e. not even a header was being written. The real solution is to use an exteral library which is not part of this solution."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9450045"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1544460293, "post_id": 53698524, "comment_id": 94274516, "body": "@IInspectable The gems I&#39;m using are malysms in my case, they&#39;re slow and I&#39;ve only used them because I can&#39;t find documentation to manipulate pdf with pure ruby (which is what I&#39;d like). I don&#39;t mind programming a PDF parser from scratch but what are the rules to follow? is what I don&#39;t know. Come on, the external bookstore is made of ruby, so why can&#39;t you do without gems?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 1, "creation_date": 1544463377, "post_id": 53698524, "comment_id": 94276134, "body": "@tal: Ruby can read files, that&#39;s all you need. And 198 CHF to purchase the <a href=\"https://www.iso.org/standard/51502.html\" rel=\"nofollow noreferrer\">ISO 32000-1:2008</a> standard. Depending on your familiarity with PDF, plan anywhere from half a year to several years until you have written a parser from scratch."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9450045"}, "reply_to_user": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1544473815, "post_id": 53698524, "comment_id": 94280868, "body": "@IInspectable Interesting, I didn&#39;t know, but yes, that&#39;s what I was looking for. ISO 32000-1:2008 does not specify the following: methods for validating the conformance of PDF files or readers. Won&#39;t be a problem? apart, so someone who made a gem to analyze PDF should have studied that ISO?"}, {"owner": {"reputation": 35031, "user_id": 1889329, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/57bec3f0b9c5879cdd9d9fa2e8629318?s=128&d=identicon&r=PG&f=1", "display_name": "IInspectable", "link": "https://stackoverflow.com/users/1889329/iinspectable"}, "edited": false, "score": 0, "creation_date": 1544487881, "post_id": 53698524, "comment_id": 94285697, "body": "@tal: ISO 32000-1:2008 lists requirements a conforming reader must meet. I&#39;m not aware of any methods or tools to verify the conformance of any given reader implementation. Anyone who has published a gem is just that: any random contributor on the internet. There is no requirement for a gem author to have read the ISO standard. Adobe has released 6 editions of the PDF specification prior to standardization. The <a href=\"https://www.adobe.com/devnet/acrobat/pdfs/pdf_reference_1-7.pdf\" rel=\"nofollow noreferrer\">sixth edition</a> is freely available for download. That&#39;s what authors usually take to (if at all)."}], "tags": [], "owner": {"reputation": 779, "user_id": 833555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d99cf1bcf274d03c06d2f218f73cff0d?s=128&d=identicon&r=PG", "display_name": "Gregory Ostermayr", "link": "https://stackoverflow.com/users/833555/gregory-ostermayr"}, "is_accepted": true, "score": -1, "last_activity_date": 1544406545, "creation_date": 1544406545, "answer_id": 53698524, "question_id": 53697619, "link": "https://stackoverflow.com/questions/53697619/check-if-a-pdf-file-is-corrupted-with-ruby/53698524#53698524", "title": "Check if a PDF file is corrupted with Ruby?", "body": "<pre><code>result = IO.binread('file.pdf', 4).unpack(\"H*\").first\nvalid_pdf = result == '25504446'\n</code></pre>\n\n<p>Will do the comparison for those first 4 bytes</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9450045"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 433, "favorite_count": 0, "accepted_answer_id": 53698524, "answer_count": 2, "score": -1, "last_activity_date": 1544406545, "creation_date": 1544396969, "last_edit_date": 1544406491, "question_id": 53697619, "link": "https://stackoverflow.com/questions/53697619/check-if-a-pdf-file-is-corrupted-with-ruby", "title": "Check if a PDF file is corrupted with Ruby?", "body": "<p>Ideally I want to avoid using gems, as I am currently using: <code>pdf-reader</code>, <code>combine-pdf</code> and <code>origami</code></p>\n\n<p>Each gem if it comes across a damaged pdf sometimes doesn't send an exception but stays there and does nothing.</p>\n\n<p>So I would like you to please help me with a code to see if the file is damaged or not.</p>\n\n<p>I have noticed that some pdf files do not have hexadecimal <code>(hex 25 50 44 46 | %PDF)</code> but I'm afraid it's not a universal solution.</p>\n\n<p>Besides all those gems sometimes throw exceptions even when the pdf does work, but at least if I'm sure the pdf works, I'll know what to do.</p>\n\n<p>I could start there. How do I read hexadecimal with ruby? Is the only way to check a pdf?</p>\n"}, {"tags": ["ruby", "rsa"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1544393360, "post_id": 53696992, "comment_id": 94249705, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/2293608/what-causes-neither-pub-key-nor-priv-key-nested-asn1-error-when-building-a-p\">What causes &quot;Neither PUB key nor PRIV key:: nested asn1 error&quot; when building a public key in ruby?</a>"}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1544396344, "post_id": 53696992, "comment_id": 94250380, "body": "Probably the 3rd answer on the page that anothermh linked. Wrapping your string in double quotes and adding a <code>\\n</code> (literally) after the <code>MII</code> and before the <code>QAB</code> (at beginning and end of your string) worked in a console."}, {"owner": {"reputation": 222, "user_id": 1969191, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/05e6a7d87060d5d765deb8bbb95e804b?s=128&d=identicon&r=PG", "display_name": "user1969191", "link": "https://stackoverflow.com/users/1969191/user1969191"}, "reply_to_user": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1544427296, "post_id": 53696992, "comment_id": 94257246, "body": "@JayDorsey please share your string because I am getting same error even after adding \\n in the string. For further investigation I have added the string in my question thanks."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1544427592, "post_id": 53696992, "comment_id": 94257349, "body": "You placed them wrongly. Like this: <code>&quot;-----BEGIN PUBLIC KEY-----\\nMII...QAB\\n-----END PUBLIC KEY-----&quot;</code>"}, {"owner": {"reputation": 222, "user_id": 1969191, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/05e6a7d87060d5d765deb8bbb95e804b?s=128&d=identicon&r=PG", "display_name": "user1969191", "link": "https://stackoverflow.com/users/1969191/user1969191"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1544428309, "post_id": 53696992, "comment_id": 94257612, "body": "@Amadan I am still getting same error. Thanks"}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1544451079, "post_id": 53696992, "comment_id": 94269320, "body": "@user1969191 Added as an answer because of character limits"}], "answers": [{"tags": [], "owner": {"reputation": 222, "user_id": 1969191, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/05e6a7d87060d5d765deb8bbb95e804b?s=128&d=identicon&r=PG", "display_name": "user1969191", "link": "https://stackoverflow.com/users/1969191/user1969191"}, "is_accepted": false, "score": 0, "last_activity_date": 1544446937, "creation_date": 1544446937, "answer_id": 53706255, "question_id": 53696992, "link": "https://stackoverflow.com/questions/53696992/unable-to-generate-rsa-public-key-in-ruby/53706255#53706255", "title": "Unable to Generate RSA Public key in ruby", "body": "<p>The OpenSSL::PKey::RSA.new class was unable to created the new object because their is some issue with the public string key.</p>\n\n<p>I find out the key is invalid in the following way:</p>\n\n<p>In ruby console/irb</p>\n\n<pre><code>puts public_key.to_s.gsub('\\n', \"\\n\")\n</code></pre>\n\n<p>Save the output in a file with name public_key.txt and run the following command on ubuntu terminal</p>\n\n<pre><code>openssl pkey -inform PEM -pubin -in public_key.txt -noout &amp;&gt; /dev/null\nif [ $? != 0 ] ; then\n    echo \"this was definitely not a public key in PEM format\"\n    exit 1\nfi\n</code></pre>\n\n<p>If key is invalid the above script will print</p>\n\n<blockquote>\n  <p>this was definitely not a public key in PEM format</p>\n</blockquote>\n\n<p>And will print nothing if key is valid.</p>\n\n<p>Thanks</p>\n"}, {"tags": [], "owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "is_accepted": false, "score": 0, "last_activity_date": 1544451048, "creation_date": 1544451048, "answer_id": 53707455, "question_id": 53696992, "link": "https://stackoverflow.com/questions/53696992/unable-to-generate-rsa-public-key-in-ruby/53707455#53707455", "title": "Unable to Generate RSA Public key in ruby", "body": "<p>This doesn't generate any errors for me (your original string yielded the same error you noted).</p>\n\n<pre><code>require 'openssl'\npublic_key = \"-----BEGIN PUBLIC KEY-----\\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAttI6ImgD74PhHWVqnrqSOmStboplyL02DB3/nc2iyDdYLzXoBIQN+NPMBPlsZlEKuKjsg5Ycfp6VjcmncM3CH9MGIr+Lmbj1HZmO/jJGJ84RPhzYOiZuElzs3seIcOtOa3BpFeqRsXJlrf1IVBKVU3erka5ACLVyrsjmp/VXMx5QjPD0qXARMGb6rDewTkyg3pGz07Y7rZgXkTl54ase+XaPegOankxdEQhVjPdrk7eSlIQS5Ni7FAcSyTOtYoPgiP7W0PolOMHvpFg96CHjc8V8xDsFdh0wbHd49WcKxiJMIfL65VUIW5aob9fw05a5FczyASa0iNtRiICy/QnCqQIDAQAB\\n-----END PUBLIC KEY-----\"8xDsFdh0wbHd49WcKxiJMIfL65VUIW5aob9fw05a5FczyASa0iNtRiICy/QnCqQIDAQAB\\n-----END PUBLIC KEY-----\"\nOpenSSL::PKey::RSA.new public_key \n</code></pre>\n\n<p>That returns <code>#&lt;OpenSSL::PKey::RSA:0x00007fa78b9b6ee8&gt;</code> rather than an error. If I remove the <code>\\n</code> I can reproduce the error you noted.</p>\n\n<p>Ruby 2.5.3, macOS, using openssl installed via homebrew.</p>\n"}], "owner": {"reputation": 222, "user_id": 1969191, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/05e6a7d87060d5d765deb8bbb95e804b?s=128&d=identicon&r=PG", "display_name": "user1969191", "link": "https://stackoverflow.com/users/1969191/user1969191"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 204, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1544451048, "creation_date": 1544391944, "last_edit_date": 1544428526, "question_id": 53696992, "link": "https://stackoverflow.com/questions/53696992/unable-to-generate-rsa-public-key-in-ruby", "title": "Unable to Generate RSA Public key in ruby", "body": "<p>I am unable to create a object of OpenSSL::PKey::RSA class for a public key in string format. The following is my code:</p>\n\n<pre><code>public_key = '-----BEGIN PUBLIC KEY-----MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAttI6ImgD74PhHWVqnrqSOmStboplyL02DB3/nc2iyDdYLzXoBIQN+NPMBPlsZlEKuKjsg5Ycfp6VjcmncM3CH9MGIr+Lmbj1HZmO/jJGJ84RPhzYOiZuElzs3seIcOtOa3BpFeqRsXJlrf1IVBKVU3erka5ACLVyrsjmp/VXMx5QjPD0qXARMGb6rDewTkyg3pGz07Y7rZgXkTl54ase+XaPegOankxdEQhVjPdrk7eSlIQS5Ni7FAcSyTOtYoPgiP7W0PolOMHvpFg96CHjc8V8xDsFdh0wbHd49WcKxiJMIfL65VUIW5aob9fw05a5FczyASa0iNtRiICy/QnCqQIDAQAB-----END PUBLIC KEY-----'\nOpenSSL::PKey::RSA.new public_key\n</code></pre>\n\n<p>I am getting the following error:</p>\n\n<pre><code>OpenSSL::PKey::RSAError: Neither PUB key nor PRIV key: nested asn1 error\n</code></pre>\n\n<p>I am using ruby version ruby 2.3.7. Any body can tell me what is wrong with string or function.? </p>\n\n<p>I have try adding \\n solution suggested <a href=\"https://stackoverflow.com/questions/2293608/what-causes-neither-pub-key-nor-priv-key-nested-asn1-error-when-building-a-p\">here</a></p>\n\n<pre><code>public_key = \"-----BEGIN PUBLIC KEY-----MIIB\\nIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAttI6ImgD74PhHWVqnrqSOmStboplyL02DB3/nc2iyDdYLzXoBIQN+NPMBPlsZlEKuKjsg5Ycfp6VjcmncM3CH9MGIr+Lmbj1HZmO/jJGJ84RPhzYOiZuElzs3seIcOtOa3BpFeqRsXJlrf1IVBKVU3erka5ACLVyrsjmp/VXMx5QjPD0qXARMGb6rDewTkyg3pGz07Y7rZgXkTl54ase+XaPegOankxdEQhVjPdrk7eSlIQS5Ni7FAcSyTOtYoPgiP7W0PolOMHvpFg96CHjc8V8xDsFdh0wbHd49WcKxiJMIfL65VUIW5aob9fw05a5FczyASa0iNtRiICy/QnCqQIDA\\nQAB-----END PUBLIC KEY-----\"\n</code></pre>\n\n<p>but I am getting same error</p>\n\n<pre><code>OpenSSL::PKey::RSAError: Neither PUB key nor PRIV key: nested asn1 error\n</code></pre>\n\n<p>Add \\n on different places</p>\n\n<pre><code>public_key = \"-----BEGIN PUBLIC KEY-----\\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAttI6ImgD74PhHWVqnrqSOmStboplyL02DB3/nc2iyDdYLzXoBIQN+NPMBPlsZlEKuKjsg5Ycfp6VjcmncM3CH9MGIr+Lmbj1HZmO/jJGJ84RPhzYOiZuElzs3seIcOtOa3BpFeqRsXJlrf1IVBKVU3erka5ACLVyrsjmp/VXMx5QjPD0qXARMGb6rDewTkyg3pGz07Y7rZgXkTl54ase+XaPegOankxdEQhVjPdrk7eSlIQS5Ni7FAcSyTOtYoPgiP7W0PolOMHvpFg96CHjc8V8xDsFdh0wbHd49WcKxiJMIfL65VUIW5aob9fw05a5FczyASa0iNtRiICy/QnCqQIDAQAB\\n-----END PUBLIC KEY-----\"\n\npublic_key = \"-----BEGIN PUBLIC KEY-----\\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAttI6ImgD74PhHWVqnrqSOmStboplyL02DB3/nc2iyDdYLzXoBIQN+NPMBPlsZlEKuKjsg5Ycfp6VjcmncM3CH9MGIr+Lmbj1HZmO/jJGJ84RPhzYOiZuElzs3seIcOtOa3BpFeqRsXJlrf1IVBKVU3erka5ACLVyrsjmp/VXMx5QjPD0qXARMGb6rDewTkyg3pGz07Y7rZgXkTl54ase+XaPegOankxdEQhVjPdrk7eSlIQS5Ni7FAcSyTOtYoPgiP7W0PolOMHvpFg96CHjc8V8xDsFdh0wbHd49WcKxiJMIfL65VUIW5aob9fw05a5FczyASa0iNtRiICy/QnCqQIDA\\nQAB-----END PUBLIC KEY-----\"\n</code></pre>\n\n<p>Is generating same error message.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller", "null", "accepts-nested-attributes"], "comments": [{"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1544387550, "post_id": 53695550, "comment_id": 94248176, "body": "Show us your firms_controller.rb. I think you need to add @firm.product_categories.build in <code>new</code> action and probably similarily with <code>@product_categories.products.build</code> in <code>new</code>action. That&#39;s what I do in case of nested attributes."}, {"owner": {"reputation": 1480, "user_id": 4741620, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/13911648aa5b99a6542494b4c8fcbc38?s=128&d=identicon&r=PG&f=1", "display_name": "jedi", "link": "https://stackoverflow.com/users/4741620/jedi"}, "edited": false, "score": 0, "creation_date": 1544387937, "post_id": 53695550, "comment_id": 94248289, "body": "You can also inspect what params you are sending from the form by putting <code>binding.pry</code> into your <code>FirmsController#create</code> action to debug it."}], "owner": {"reputation": 1, "user_id": 10767680, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ejnA2fYYnb4/AAAAAAAAAAI/AAAAAAAAAD4/scO1cXuv6cw/photo.jpg?sz=128", "display_name": "Damjan Radev", "link": "https://stackoverflow.com/users/10767680/damjan-radev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544447862, "creation_date": 1544381308, "last_edit_date": 1544401803, "question_id": 53695550, "link": "https://stackoverflow.com/questions/53695550/rails-nested-form-with-has-many-through", "title": "Rails nested form with has_many :through", "body": "<p>I have 3 models, the product model has a connection to the firm model through the product_categories model. I want to create a form where I can add product with their category, within the firm form.  </p>\n\n<p>Firm model</p>\n\n<pre><code>class Firm &lt; ApplicationRecord\n has_many :product_categories\n has_many :products, through: :product_categories\n accepts_nested_attributes_for :product_categories\nend\n</code></pre>\n\n<p>Product model</p>\n\n<pre><code>class Product &lt; ApplicationRecord\n has_many :product_categories\n has_many :firms, through: :product_categories\n has_many :variants, class_name: 'ProductVariant'\nend\n</code></pre>\n\n<p>ProductCategory</p>\n\n<pre><code>class ProductCategory &lt; ApplicationRecord\n belongs_to :product\n belongs_to :firm\n accepts_nested_attributes_for :product\nend\n</code></pre>\n\n<p>This is how my create form for the firm looks like</p>\n\n<pre><code>&lt;%= form_with(model: @firm, local: true) do |form| %&gt;\n  firm.fields...\n  &lt;%= form.fields_for :product_categories do |prod_c_f| %&gt;\n   product_category.fields...\n     &lt;%= prod_c_f.fields_for :product do |prod_f| %&gt;\n      product.fields...\n     &lt;% end %&gt;\n  &lt;% end %&gt;\n  &lt;%= form.submit \"Create Firm\", class: 'btn btn-primary \n  btn-block ' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>And this is my controller</p>\n\n<pre><code>def create\n@firm = Firm.new\n\n@firm.product_categories.build.build_product\n respond_to do |format|\n  if @firm.save\n   format.html { redirect_to firms_path, notice: '...' }\n  else\n  format.html { render :new }\n  end\n end\nend\n</code></pre>\n\n<p>This are the params</p>\n\n<pre><code>params.require(:firm).permit(:title, \nproduct_categories_attributes:[ product_attributes: \n[:title, :price, :description]])\n</code></pre>\n\n<p>And the form doesn't display:</p>\n\n<p><img src=\"https://i.stack.imgur.com/aqn3r.png\" alt=\"And the form doesn&#39;t display\"></p>\n"}, {"tags": ["ruby", "recursion", "sequence"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1544380602, "post_id": 53695092, "comment_id": 94246195, "body": "Sure, this can be written recursively, as can most methods that employ iteration, but it is a trivial sort of recursion that is less efficient and more opaque than simple iteration. Note that method and variable names customarily begin with a lower-case letter, and must do so when there are no arguments. Consider writing you rmethod as follows: <code>enum = Prime.each; loop do; n = enum.next; break if n &gt; 100; p &quot;this is prime - #{n}&quot;; end</code>."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1544389033, "post_id": 53695092, "comment_id": 94248594, "body": "@CarySwoveland <code>Prime.each(100){|pr| p &quot;this is prime - #{pr}&quot; }</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1544395003, "post_id": 53695092, "comment_id": 94250037, "body": "@steenslag, thanks. Good to know."}], "answers": [{"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1544379987, "last_edit_date": 1544379987, "creation_date": 1544379679, "answer_id": 53695326, "question_id": 53695092, "link": "https://stackoverflow.com/questions/53695092/generating-a-series-of-prime-numbers-using-recursion-in-ruby/53695326#53695326", "title": "Generating a series of prime numbers using recursion in ruby", "body": "<p>Other option:</p>\n\n<pre><code>require 'prime'\ndef primes_smaller_than(num, res=[])\n  return res if num &lt; 2\n  res &lt;&lt; num if Prime.prime?(num)\n  primes_smaller_than(num - 1, res)\nend\n\nprimes_smaller_than 100\n#=&gt; [97, 89, 83, 79, 73, 71, 67, 61, 59, 53, 47, 43, 41, 37, 31, 29, 23, 19, 17, 13, 11, 7, 5, 3, 2]\n</code></pre>\n\n<p>To print it out:</p>\n\n<pre><code>primes_smaller_than(100).each { |e| puts \"this is prime - #{e}\" }\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 10435234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RA1DnjQ1h1E/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUSUSggVRzzuE-_38kSQQqJd74q3w/mo/photo.jpg?sz=128", "display_name": "Rafeh Ishtiaq", "link": "https://stackoverflow.com/users/10435234/rafeh-ishtiaq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1544379987, "creation_date": 1544378152, "question_id": 53695092, "link": "https://stackoverflow.com/questions/53695092/generating-a-series-of-prime-numbers-using-recursion-in-ruby", "title": "Generating a series of prime numbers using recursion in ruby", "body": "<p>I am trying to generate a list of prime nos b/w 1-100 in ruby. I have initally done this through an iterative method which works well.</p>\n\n<pre><code>require 'prime'\n\ndef Primenos(n)\n Prime.prime?(n)\nend\n\ndef f1\n  (1..100).collect do |e|\n    if Primenos(e)\n      then p \"this is prime - #{e}\"\n    end\n  end\nend\n\nf1\n</code></pre>\n\n<p>But I would also like to know if this could be done recursively ? Any idea?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5.1", "google-people"], "answers": [{"comments": [{"owner": {"reputation": 106, "user_id": 4012872, "user_type": "registered", "profile_image": "https://graph.facebook.com/684643650/picture?type=large", "display_name": "Davie Overman", "link": "https://stackoverflow.com/users/4012872/davie-overman"}, "edited": false, "score": 0, "creation_date": 1544379006, "post_id": 53695012, "comment_id": 94245726, "body": "I&#39;ve tried <code>response = people.list_person_connections(&#39;people&#47;me&#39;, page_size: 10, fields: &quot;names&quot;)</code> to only receive  &quot;Sending HTTP get <a href=\"https://people.googleapis.com/v1/people/me/connections?fields=names&amp;pageSize=10\" rel=\"nofollow noreferrer\">people.googleapis.com/v1/people/me/&hellip;</a> 400 ...&gt; Caught error badRequest: Request contains an invalid argument. Error - #&lt;Google::Apis::ClientError: badRequest: Request contains an invalid argument.&gt;"}, {"owner": {"reputation": 106, "user_id": 4012872, "user_type": "registered", "profile_image": "https://graph.facebook.com/684643650/picture?type=large", "display_name": "Davie Overman", "link": "https://stackoverflow.com/users/4012872/davie-overman"}, "edited": false, "score": 0, "creation_date": 1544379124, "post_id": 53695012, "comment_id": 94245767, "body": "Then I tried <code>response = people.list_person_connections(&#39;people&#47;me&#39;, page_size: 10, request_mask_include_field: &quot;personFields&quot;, fields: &quot;names&quot;)</code> to receive &quot;Sending HTTP get <a href=\"https://people.googleapis.com/v1/people/me/connections?fields=names&amp;pageSize=10&amp;requestMask.includeField=personFields\" rel=\"nofollow noreferrer\">people.googleapis.com/v1/people/me/&hellip;</a> 400 ... Caught error badRequest: Request contains an invalid argument. Error - #&lt;Google::Apis::ClientError: badRequest: Request contains an invalid argument.&gt;  Google::Apis::ClientError: badRequest: Request contains an invalid argument. \tfrom (irb):27"}, {"owner": {"reputation": 106, "user_id": 4012872, "user_type": "registered", "profile_image": "https://graph.facebook.com/684643650/picture?type=large", "display_name": "Davie Overman", "link": "https://stackoverflow.com/users/4012872/davie-overman"}, "edited": false, "score": 1, "creation_date": 1544379465, "post_id": 53695012, "comment_id": 94245867, "body": "Whoops.  Just actually read the doc: response = people.list_person_connections(&#39;people/me&#39;, page_size: 10, request_mask_include_field: &quot;person.names&quot;) works. Thanks. :)"}], "tags": [], "owner": {"reputation": 3087, "user_id": 688480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db08b7613d6bf1b94e662b1f96f9ef02?s=128&d=identicon&r=PG", "display_name": "Ray Baxter", "link": "https://stackoverflow.com/users/688480/ray-baxter"}, "is_accepted": true, "score": 1, "last_activity_date": 1544377699, "creation_date": 1544377699, "answer_id": 53695012, "question_id": 53694848, "link": "https://stackoverflow.com/questions/53694848/when-attempting-to-retrieve-google-contacts-via-peoplev1-api-in-ruby-rails-why/53695012#53695012", "title": "When attempting to retrieve Google Contacts via PeopleV1 API in Ruby Rails, why do I get &quot;ArgumentError: unknown keyword: person_fields&quot;?", "body": "<p>The correct attribute is <code>fields</code> not <code>person_fields</code>. See docs <a href=\"https://www.rubydoc.info/gems/google-api-client/0.9.19/Google/Apis/PeopleV1/PeopleService\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 157, "user_id": 3349830, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/712009991/picture?type=large", "display_name": "uechan", "link": "https://stackoverflow.com/users/3349830/uechan"}, "is_accepted": false, "score": 2, "last_activity_date": 1546891172, "creation_date": 1546891172, "answer_id": 54080989, "question_id": 53694848, "link": "https://stackoverflow.com/questions/53694848/when-attempting-to-retrieve-google-contacts-via-peoplev1-api-in-ruby-rails-why/54080989#54080989", "title": "When attempting to retrieve Google Contacts via PeopleV1 API in Ruby Rails, why do I get &quot;ArgumentError: unknown keyword: person_fields&quot;?", "body": "<p>Just to clarify for any future readers, Ray Baxte linked to docs corresponding to version <code>0.9.19</code> of the <code>google-api-client</code> gem - the current version is <code>0.27.1</code></p>\n\n<p>I'm using <code>0.26.0</code> and the correct argument is <code>person_fields</code> - this obviously changed somewhere between <code>0.9.19</code> and <code>0.26.0</code></p>\n\n<p>I follow the documentation in the generated API method definitions:\n<a href=\"https://github.com/googleapis/google-api-ruby-client/blob/0.27.1/generated/google/apis/people_v1/service.rb#L591\" rel=\"nofollow noreferrer\">https://github.com/googleapis/google-api-ruby-client/blob/0.27.1/generated/google/apis/people_v1/service.rb#L591</a></p>\n"}], "owner": {"reputation": 106, "user_id": 4012872, "user_type": "registered", "profile_image": "https://graph.facebook.com/684643650/picture?type=large", "display_name": "Davie Overman", "link": "https://stackoverflow.com/users/4012872/davie-overman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "accepted_answer_id": 53695012, "answer_count": 2, "score": 0, "last_activity_date": 1548368945, "creation_date": 1544376596, "last_edit_date": 1548368945, "question_id": 53694848, "link": "https://stackoverflow.com/questions/53694848/when-attempting-to-retrieve-google-contacts-via-peoplev1-api-in-ruby-rails-why", "title": "When attempting to retrieve Google Contacts via PeopleV1 API in Ruby Rails, why do I get &quot;ArgumentError: unknown keyword: person_fields&quot;?", "body": "<p>I'm having a hard time integrating Google Contacts into my Ruby (version 2.2.10) on Rails 5 (version 5.1.5) App.</p>\n\n<p>When I execute the following code block, I receive \"ArgumentError: unknown keyword: person_fields\".</p>\n\n<pre><code>people  = Google::Apis::PeopleV1::PeopleService.new\npeople.authorization = auth_client\nresponse = people.list_person_connections('people/me', page_size: 10, \nperson_fields: 'names,emailAddresses')\n</code></pre>\n\n<p>To rectify the problem, I tried using the following gem versions:</p>\n\n<p>gem 'google-api-client', '~> 0.11'</p>\n\n<p>gem 'google-api-client', '~> 0.8'</p>\n\n<p>gem 'google-api-client'</p>\n\n<p>I still receive the error no matter which version of the gem I use.</p>\n\n<p>Below is the code in its entirety:</p>\n\n<pre><code>require 'google/apis/people_v1'\nrequire 'google/api_client/client_secrets'\n\nclient_secrets = Google::APIClient::ClientSecrets.load 'client_secret_1088824912015-f8asojku302s0mvcijgj7takse8pg8rg.apps.googleusercontent.com.json' \n\nauth_client = client_secrets.to_authorization\n\nauth_client.update!( :scope =&gt; 'https://www.googleapis.com/auth/contacts.readonly', :redirect_uri =&gt; 'http://localhost:3000/oauth2callback', :additional_parameters =&gt; { \"access_type\" =&gt; \"offline\", \"include_granted_scopes\" =&gt; \"true\" } )\n\nauth_uri = auth_client.authorization_uri.to_s\n\n\n# To exchange an authorization code for an access token, use the fetch_access_token! method:\n\nauth_client.code = #auth_code#\nauth_client.fetch_access_token!\n\npeople  = Google::Apis::PeopleV1::PeopleService.new\n\npeople.authorization = auth_client\n\nresponse = people.list_person_connections('people/me', page_size: 10, person_fields: 'names,emailAddresses')\n</code></pre>\n\n<p>Any assistance would be greatly appreciated. </p>\n"}, {"tags": ["ruby", "jekyll", "redcarpet"], "comments": [{"owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 0, "creation_date": 1544382736, "post_id": 53694097, "comment_id": 94246811, "body": "Can you try a <code>bundle exec jekyll serve --future</code> ?"}, {"owner": {"reputation": 77, "user_id": 7393227, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-j5zW6O6iLvI/AAAAAAAAAAI/AAAAAAAAABY/_q6DGv1aQtY/photo.jpg?sz=128", "display_name": "Hadi Varposhti", "link": "https://stackoverflow.com/users/7393227/hadi-varposhti"}, "reply_to_user": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 0, "creation_date": 1544418434, "post_id": 53694097, "comment_id": 94254441, "body": "yes , I did it but nothing change"}, {"owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 0, "creation_date": 1544432911, "post_id": 53694097, "comment_id": 94259546, "body": "A repository url maybe ?"}, {"owner": {"reputation": 77, "user_id": 7393227, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-j5zW6O6iLvI/AAAAAAAAAAI/AAAAAAAAABY/_q6DGv1aQtY/photo.jpg?sz=128", "display_name": "Hadi Varposhti", "link": "https://stackoverflow.com/users/7393227/hadi-varposhti"}, "reply_to_user": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 0, "creation_date": 1544472631, "post_id": 53694097, "comment_id": 94280293, "body": "it&#39;s impossible because i install on my local to customize theme to my language but without any changes just after install on my local  , it doesn&#39;t display even sample text"}], "owner": {"reputation": 77, "user_id": 7393227, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh3.googleusercontent.com/-j5zW6O6iLvI/AAAAAAAAAAI/AAAAAAAAABY/_q6DGv1aQtY/photo.jpg?sz=128", "display_name": "Hadi Varposhti", "link": "https://stackoverflow.com/users/7393227/hadi-varposhti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544371293, "creation_date": 1544371293, "question_id": 53694097, "link": "https://stackoverflow.com/questions/53694097/why-doesnt-text-display-in-jekyll-site-generator", "title": "why doesn&#39;t text display in jekyll site generator?", "body": "<p>I want to launch a site using jekyll, but the problem is that no posts are displayed.\nI have used the template <a href=\"http://lanyon.getpoole.com/\" rel=\"nofollow noreferrer\">lanyon</a>. The odd thing is that with the command </p>\n\n<blockquote>\n  <p>bundle exec jekyll serve</p>\n</blockquote>\n\n<p>The website starts without any problems, but no posts are still displayed.Even changes to the template's content remain unchanged.</p>\n\n<p>This is the content of the config.yml file :</p>\n\n<pre><code># Dependencies\n# markdown:         redcarpet\nmarkdown:           kramdown\n# pygments:         true\nhighlighter:        true\n\n# Permalinks\npermalink:        pretty\n\n# Setup\ntitle:            Lanyon\ntagline:          'A Jekyll theme'\ndescription:      'A reserved &lt;a href=\"http://jekyllrb.com\" target=\"_blank\"&gt;Jekyll&lt;/a&gt; theme that places the utmost gravity on content with a hidden drawer. Made by &lt;a href=\"https://twitter.com/mdo\" target=\"_blank\"&gt;@mdo&lt;/a&gt;.'\nurl:              http://lanyon.getpoole.com\n\nauthor:\n  name:           'Mark Otto'\n  url:            https://twitter.com/mdo\n\n# paginate:         5\njekyll-paginate:    5\n\n# Custom vars\nversion:          2.0.0\n\ngithub:\n  repo:           https://github.com/poole/lanyon\n</code></pre>\n\n<p>This is the content of the gemfile file :</p>\n\n<pre><code>source \"https://rubygems.org\"\n\n# Hello! This is where you manage which Jekyll version is used to run.\n# When you want to use a different version, change it below, save the\n# file and run `bundle install`. Run Jekyll with `bundle exec`, like so:\n#\n#     bundle exec jekyll serve\n#\n# This will help ensure the proper Jekyll version is running.\n# Happy Jekylling!\ngem \"jekyll\", \"~&gt; 3.8.5\"\n\n# This is the default theme for new Jekyll sites. You may change this to anything you like.\ngem \"minima\", \"~&gt; 2.0\"\n\n# If you want to use GitHub Pages, remove the \"gem \"jekyll\"\" above and\n# uncomment the line below. To upgrade, run `bundle update github-pages`.\n# gem \"github-pages\", group: :jekyll_plugins\n\n# If you have any plugins, put them here!\ngroup :jekyll_plugins do\n  gem \"jekyll-feed\", \"~&gt; 0.6\"\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem \"tzinfo-data\", platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n\n# Performance-booster for watching directories on Windows\ngem \"wdm\", \"~&gt; 0.1.0\" if Gem.win_platform?\n</code></pre>\n\n<p>And the packages I used to launch the website:</p>\n\n<ul>\n<li>redcarpet (3.4.0, 3.3.4)</li>\n<li>ruby 2.5.3p105 (2018-10-18 revision 65156) [x86_64-linux]</li>\n<li>jekyll (3.8.5)</li>\n<li>bundler (1.17.1)</li>\n<li>pygments.rb (1.2.1, 0.6.3)</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "e-commerce", "shipping"], "answers": [{"comments": [{"owner": {"reputation": 779, "user_id": 833555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d99cf1bcf274d03c06d2f218f73cff0d?s=128&d=identicon&r=PG", "display_name": "Gregory Ostermayr", "link": "https://stackoverflow.com/users/833555/gregory-ostermayr"}, "edited": false, "score": 0, "creation_date": 1544391026, "post_id": 53696846, "comment_id": 94249097, "body": "you could also refactor out the inject code into a subtotal method etc"}], "tags": [], "owner": {"reputation": 779, "user_id": 833555, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d99cf1bcf274d03c06d2f218f73cff0d?s=128&d=identicon&r=PG", "display_name": "Gregory Ostermayr", "link": "https://stackoverflow.com/users/833555/gregory-ostermayr"}, "is_accepted": true, "score": 0, "last_activity_date": 1544397922, "last_edit_date": 1544397922, "creation_date": 1544390839, "answer_id": 53696846, "question_id": 53693796, "link": "https://stackoverflow.com/questions/53693796/add-customized-flat-rate-shipping-in-rails-ecommerce-app/53696846#53696846", "title": "Add customized flat rate shipping in rails ecommerce app", "body": "<p>I'd add a shipping fee there <a href=\"https://github.com/tutsplus/rails_store_with_braintree/blob/master/app/models/cart.rb#L50\" rel=\"nofollow noreferrer\">https://github.com/tutsplus/rails_store_with_braintree/blob/master/app/models/cart.rb#L50</a></p>\n\n<p>something like this</p>\n\n<pre><code>def shipping_fee\n  5.00\nend\n\ndef total_price\n  total = @items.inject(0) { |sum, item| sum + item.total_price }\n  total + shipping_fee\nend\n</code></pre>\n\n<p>Add a visual ui element that tells the user how much shipping will be. I could go on about tests and about not using floats for money but that isn't really the primary goal of this project. Also you could put shipping fee in the database to make more easily updatable etc. Good luck.</p>\n"}], "owner": {"reputation": 23, "user_id": 10226051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c91666bfc2952150332a3e4738c86b34?s=128&d=identicon&r=PG&f=1", "display_name": "TheoNov18", "link": "https://stackoverflow.com/users/10226051/theonov18"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 1, "accepted_answer_id": 53696846, "answer_count": 1, "score": 2, "last_activity_date": 1544457384, "creation_date": 1544369198, "question_id": 53693796, "link": "https://stackoverflow.com/questions/53693796/add-customized-flat-rate-shipping-in-rails-ecommerce-app", "title": "Add customized flat rate shipping in rails ecommerce app", "body": "<p>Before I get started, I do have to say that I'm new to Rails and coding in general.  I have a question about adding a flat rate shipping fee to my rails app.  I'm building an ecommerce app with the Tutsplus tutorial (here's the source code: <a href=\"https://github.com/tutsplus/rails_store_with_braintree\" rel=\"nofollow noreferrer\">https://github.com/tutsplus/rails_store_with_braintree</a>), but he didn't go over how to add a shipping fee.  I've googled this, but found answers mainly for Spree, Solidus, and ActiveShipping, but these don't work for me.  I don't want to calculate shipping because I'm charging a flat rate regardless of location or the amount of products in the cart.  Can any of you help me in this area?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "vue.js", "webpack"], "comments": [{"owner": {"reputation": 2364, "user_id": 388280, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/67227642f4c9822bc306c8fe6a5f6742?s=128&d=identicon&r=PG", "display_name": "ytbryan", "link": "https://stackoverflow.com/users/388280/ytbryan"}, "edited": false, "score": 0, "creation_date": 1544404500, "post_id": 53693726, "comment_id": 94251926, "body": "Using gon may be the easiest way. Have you looked at Vue on rails project? github.com/vueonrails"}, {"owner": {"reputation": 11, "user_id": 7141222, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wFUJnCCDmNo/AAAAAAAAAAI/AAAAAAAAAMA/ZLcEGRkwPHQ/photo.jpg?sz=128", "display_name": "mihra&#231; cerraho\u011flu", "link": "https://stackoverflow.com/users/7141222/mihra%c3%a7-cerraho%c4%9flu"}, "reply_to_user": {"reputation": 2364, "user_id": 388280, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/67227642f4c9822bc306c8fe6a5f6742?s=128&d=identicon&r=PG", "display_name": "ytbryan", "link": "https://stackoverflow.com/users/388280/ytbryan"}, "edited": false, "score": 0, "creation_date": 1544442586, "post_id": 53693726, "comment_id": 94264695, "body": "yes you are right but there is no sample works with nested attributes... :("}], "owner": {"reputation": 11, "user_id": 7141222, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-wFUJnCCDmNo/AAAAAAAAAAI/AAAAAAAAAMA/ZLcEGRkwPHQ/photo.jpg?sz=128", "display_name": "mihra&#231; cerraho\u011flu", "link": "https://stackoverflow.com/users/7141222/mihra%c3%a7-cerraho%c4%9flu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1544368975, "creation_date": 1544368630, "last_edit_date": 1544368975, "question_id": 53693726, "link": "https://stackoverflow.com/questions/53693726/rails-passing-nested-attributes-to-vue-js", "title": "Rails: Passing nested attributes to vue.js", "body": "<p>I have a Survey model </p>\n\n<pre><code>class Survey &lt; ApplicationRecord\n    has_many :questions, dependent: :destroy\n    accepts_nested_attributes_for :questions, allow_destroy: true\n    belongs_to :user\nend\n</code></pre>\n\n<p>And Quesiton model which is nested to \"survey\" as below;</p>\n\n<pre><code>class Question &lt; ApplicationRecord\n    enum qtype: [:multiple_choice, :check_boxes, :short_answer]\n  belongs_to :survey\n  has_many :options\n  accepts_nested_attributes_for :options, allow_destroy: true\nend\n</code></pre>\n\n<p>And option model connected to question as nested.</p>\n\n<pre><code> class Option &lt; ApplicationRecord      \n      belongs_to :question \n    end\n</code></pre>\n\n<p>Parameters in my <code>surveys_controller</code>:</p>\n\n<pre><code>def survey_params\n      params.require(:survey).permit(:name, questions_attributes:[:id, :title, :qtype, :_destroy, options_attributes:[:id, :otext, _destroy]])\n    end\n</code></pre>\n\n<p>It is working clear Without Vue.js implementing.\nI want to use vue.js for making dynamic form. \nWhat should i do passing do form <code>all nested attributes</code> Without using '<code>gon</code>' gem\nalso which json file should i create with <code>jbuilder</code>?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["digital-signature", "ruby", "ecdsa"], "answers": [{"tags": [], "owner": {"reputation": 3705, "user_id": 8334991, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v0H6m.jpg?s=128&g=1", "display_name": "Alexandre Fenyo", "link": "https://stackoverflow.com/users/8334991/alexandre-fenyo"}, "is_accepted": false, "score": 1, "last_activity_date": 1545260962, "creation_date": 1545260962, "answer_id": 53860414, "question_id": 53734440, "link": "https://stackoverflow.com/questions/53734440/how-to-sign-ecdsa-with-pem-private-key/53860414#53860414", "title": "How to sign ECDSA with pem private key?", "body": "<p>To parse your key stored in PEM format, you can use the openssl module: <code>sudo gem install openssl</code></p>\n\n<p>Using this module, you will extract the private key this way: <code>OpenSSL::PKey::EC.new(pemcontent).private_key</code></p>\n\n<p>Note that your private key is based on the <strong>secp256k1</strong> elliptic curve:</p>\n\n<pre><code>% openssl ec -text 2&gt;&amp;1 &lt;&lt; EOF | grep OID\n-----BEGIN EC PRIVATE KEY-----\nMHQCAQEEIBAFWFAlCWPb8IvM4yHLLKBIN/mEJU9cZnM5JD2U2EmAoAcGBSuBBAAK\noUQDQgAErMGUjbHcEf7Gk9gVOOlWdqSaGc0YhE5HBPqhoniBUG8MTx5AT7mxtuyn\nQkydMeOciHyvvyU0gf81UW9udef2nA==\n-----END EC PRIVATE KEY-----\nEOF\nASN1 OID: secp256k1\n</code></pre>\n\n<p>Therefore, the first parameter to give to <code>EDSA.sign()</code> must be <code>ECDSA::Group::Secp256k1</code>. This is an object that contains the parameters that define this curve.</p>\n\n<p>Finally, here is your code, on which I've made the changes needed to make it work:</p>\n\n<pre><code>require 'ecdsa'\nrequire 'openssl'\n\ndef sign(str)\n  pemcontent = \"-----BEGIN EC PRIVATE KEY-----\nMHQCAQEEIBAFWFAlCWPb8IvM4yHLLKBIN/mEJU9cZnM5JD2U2EmAoAcGBSuBBAAK\noUQDQgAErMGUjbHcEf7Gk9gVOOlWdqSaGc0YhE5HBPqhoniBUG8MTx5AT7mxtuyn\nQkydMeOciHyvvyU0gf81UW9udef2nA==\n-----END EC PRIVATE KEY-----\"\n  digest = Digest::SHA256.digest(str)\n  temp_key = str.size\n  signature = ECDSA.sign(ECDSA::Group::Secp256k1, OpenSSL::PKey::EC.new(pemcontent).private_key, digest, temp_key)\n  return signature\nend\n</code></pre>\n\n<p>Note: the value of temp_key should be generated with a more random way than using the length of the message to sign, like you did in your example code (it is a <strong>very</strong> <strong>very</strong> bad idea since soon or later, you will sign two messages with the same length, and this could let your private key been discovered).</p>\n"}], "migrated_from": {"other_site": {"aliases": ["http://itsecurity.stackexchange.com"], "launch_date": 1310490000, "open_beta_date": 1290106800, "closed_beta_date": 1289502000, "site_state": "normal", "high_resolution_icon_url": "https://cdn.sstatic.net/Sites/security/Img/apple-touch-icon@2.png", "twitter_account": "StackSecurity", "favicon_url": "https://cdn.sstatic.net/Sites/security/Img/favicon.ico", "icon_url": "https://cdn.sstatic.net/Sites/security/Img/apple-touch-icon.png", "audience": "information security professionals", "site_url": "https://security.stackexchange.com", "api_site_parameter": "security", "logo_url": "https://cdn.sstatic.net/Sites/security/Img/logo.png", "name": "Information Security", "site_type": "main_site"}, "on_date": 1544574844, "question_id": 199424}, "owner": {"user_type": "does_not_exist", "display_name": "koker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 619, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1545260962, "creation_date": 1544368249, "question_id": 53734440, "link": "https://stackoverflow.com/questions/53734440/how-to-sign-ecdsa-with-pem-private-key", "title": "How to sign ECDSA with pem private key?", "body": "<p>I have private key with pem format.</p>\n\n<pre><code>-----BEGIN EC PRIVATE KEY-----\nMHQCAQEEIBAFWFAlCWPb8IvM4yHLLKBIN/mEJU9cZnM5JD2U2EmAoAcGBSuBBAAK\noUQDQgAErMGUjbHcEf7Gk9gVOOlWdqSaGc0YhE5HBPqhoniBUG8MTx5AT7mxtuyn\nQkydMeOciHyvvyU0gf81UW9udef2nA==\n-----END EC PRIVATE KEY-----\n</code></pre>\n\n<p>I want to sign with ruby code like following.</p>\n\n<pre><code>require 'ecdsa'\ndef sign(str)\n    digest = Digest::SHA256.digest(str) \n    temp_key = str.size \n    signature = ECDSA.sign($group, $private_key, digest, temp_key)\nend\n</code></pre>\n\n<p>I want to know how to code for reading PEM private key file and using to sign.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "unix", "capistrano", "unicorn"], "comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1544366573, "post_id": 53693004, "comment_id": 94242251, "body": "I&#39;ve never had to use any root privileges to deploy before so I don&#39;t think that&#39;s the issue (or it would flag on prod too)"}], "answers": [{"comments": [{"owner": {"reputation": 3395, "user_id": 1145900, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1572c88229072d7535cbe8a8e05d58cc?s=128&d=identicon&r=PG", "display_name": "pre", "link": "https://stackoverflow.com/users/1145900/pre"}, "edited": false, "score": 0, "creation_date": 1544368190, "post_id": 53693460, "comment_id": 94242699, "body": "I know what you see, but that&#39;s not the problem. I have the environment correctly set."}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 0, "last_activity_date": 1544366716, "creation_date": 1544366716, "answer_id": 53693460, "question_id": 53693004, "link": "https://stackoverflow.com/questions/53693004/cant-start-unicorn-using-init-d-service-cant-find-bundle-as-sudo/53693460#53693460", "title": "can&#39;t start unicorn using init.d service \u2013 can&#39;t find bundle as sudo", "body": "<p>I think your problem (may) be:</p>\n\n<pre><code>cd $APP_ROOT; bundle exec unicorn -D -c /home/user/apps/appname/shared/config/unicorn.rb -E production\"\n</code></pre>\n\n<p>Assuming that is the same command you're using on your test server, you'll need to change the environment to test.</p>\n"}, {"comments": [{"owner": {"reputation": 3395, "user_id": 1145900, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1572c88229072d7535cbe8a8e05d58cc?s=128&d=identicon&r=PG", "display_name": "pre", "link": "https://stackoverflow.com/users/1145900/pre"}, "edited": false, "score": 0, "creation_date": 1544372305, "post_id": 53693953, "comment_id": 94243857, "body": "also found this question, which had the same answer: <a href=\"https://stackoverflow.com/questions/31971806/unicorn-service-upstart-script-throws-su-bundle-command-not-found?rq=1\" title=\"unicorn service upstart script throws su bundle command not found\">stackoverflow.com/questions/31971806/&hellip;</a>"}], "tags": [], "owner": {"reputation": 3395, "user_id": 1145900, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1572c88229072d7535cbe8a8e05d58cc?s=128&d=identicon&r=PG", "display_name": "pre", "link": "https://stackoverflow.com/users/1145900/pre"}, "is_accepted": true, "score": 0, "last_activity_date": 1544370276, "creation_date": 1544370276, "answer_id": 53693953, "question_id": 53693004, "link": "https://stackoverflow.com/questions/53693004/cant-start-unicorn-using-init-d-service-cant-find-bundle-as-sudo/53693953#53693953", "title": "can&#39;t start unicorn using init.d service \u2013 can&#39;t find bundle as sudo", "body": "<p>I think I found the solution:</p>\n\n<p>On the prod server I had a <code>/etc/profile.d/rbenv.sh</code> that's missing on the new server.</p>\n\n<p>That's its content:</p>\n\n<pre><code>export RBENV_ROOT=/home/user/.rbenv\nexport PATH=$RBENV_ROOT/shims:$RBENV_ROOT/bin:$PATH\n</code></pre>\n"}], "owner": {"reputation": 3395, "user_id": 1145900, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1572c88229072d7535cbe8a8e05d58cc?s=128&d=identicon&r=PG", "display_name": "pre", "link": "https://stackoverflow.com/users/1145900/pre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 681, "favorite_count": 0, "accepted_answer_id": 53693953, "answer_count": 2, "score": 0, "last_activity_date": 1544370276, "creation_date": 1544363372, "last_edit_date": 1544363936, "question_id": 53693004, "link": "https://stackoverflow.com/questions/53693004/cant-start-unicorn-using-init-d-service-cant-find-bundle-as-sudo", "title": "can&#39;t start unicorn using init.d service \u2013 can&#39;t find bundle as sudo", "body": "<p>I'm trying to set a rails test server, deployed using capistrano.</p>\n\n<p>I know my capistrano scripts are working as it deploys to the production server using the same scripts without a problem.</p>\n\n<p>During deployment, unicorn should be started, to do this</p>\n\n<p><code>sudo service unicorn_appname start</code> </p>\n\n<p>is called.</p>\n\n<p>This gives the following error:\n<code>Job for unicorn_appname.service failed because the control process exited with error code. See \"systemctl status unicorn_appname.service\" and \"journalctl -xe\" for details.</code></p>\n\n<p>When I check <code>sudo journalctl -u unicorn_appname</code> is see</p>\n\n<pre><code>systemd[1]: Starting LSB: starts the unicorn web server...\nsu[3790]: Successful su for user by root\nsu[3790]: + ??? root:user\nsu[3790]: pam_unix(su:session): session opened for user user by (uid=0)\nunicorn_appname[3787]: -su: bundle: command not found\nsystemd[1]: unicorn_appname.service: Control process exited, code=exited status=127\nsystemd[1]: Failed to start LSB: starts the unicorn web server.\nsystemd[1]: unicorn_appname.service: Unit entered failed state.\nsystemd[1]: unicorn_appname.service: Failed with result 'exit-code'.\n</code></pre>\n\n<p><code>/etc/init.d/unicorn_appname</code> exists and when in <code>/etc/init.d</code></p>\n\n<p><code>./unicorn_appname start</code> works<br>\n<code>sudo ./unicorn_appname start</code> however gives <code>-su: bundle: command not found</code></p>\n\n<p>however <code>which bundle</code> and <code>sudo which bundle</code> both show the same path (<code>/home/user/.rbenv/shims/bundle</code>)</p>\n\n<p>If possible I don't want to change the scripts, as they work on the other server.\nSo I think there's some setting different or missing on the new server \u2013 but I have no more idea where to look.</p>\n\n<p>This is the content of <code>unicorn_appname</code>:</p>\n\n<pre><code>#!/bin/sh\n\n### BEGIN INIT INFO\n# Provides:          unicorn\n# Required-Start:    $local_fs $remote_fs $network $syslog\n# Required-Stop:     $local_fs $remote_fs $network $syslog\n# Default-Start:     2 3 4 5\n# Default-Stop:      0 1 6\n# Short-Description: starts the unicorn web server\n# Description:       starts unicorn\n### END INIT INFO\n\nset -e\n\n# Feel free to change any of the following variables for your app:\nTIMEOUT=${TIMEOUT-60}\nAPP_ROOT=/home/user/apps/appname/current\nPID_DIR=$APP_ROOT/tmp/pids\nPID=$PID_DIR/unicorn.pid\nCMD=\"cd $APP_ROOT; bundle exec unicorn -D -c /home/user/apps/appname/shared/config/unicorn.rb -E production\"\nAS_USER=user\nset -u\n\nOLD_PIN=\"$PID.oldbin\"\n\nsig () {\n  test -s \"$PID\" &amp;&amp; kill -$1 `cat $PID`\n}\n\noldsig () {\n  test -s $OLD_PIN &amp;&amp; kill -$1 `cat $OLD_PIN`\n}\n\nworkersig () {\n  workerpid=\"$APP_ROOT/tmp/pids/unicorn.$2.pid\"\n\n  test -s \"$workerpid\" &amp;&amp; kill -$1 `cat $workerpid`\n}\n\nrun () {\n  if [ \"$(id -un)\" = \"$AS_USER\" ]; then\n    eval $1\n  else\n    su -c \"$1\" - $AS_USER\n  fi\n}\n\ncase \"$1\" in\nstart)\n  sig 0 &amp;&amp; echo &gt;&amp;2 \"Already running\" &amp;&amp; exit 0\n  run \"$CMD\"\n  ;;\nstop)\n  sig QUIT &amp;&amp; exit 0\n  echo &gt;&amp;2 \"Not running\"\n  ;;\nforce-stop)\n  sig TERM &amp;&amp; exit 0\n  echo &gt;&amp;2 \"Not running\"\n  ;;\nkill_worker)\n  workersig QUIT $2 &amp;&amp; exit 0\n  echo &gt;&amp;2 \"Worker not running\"\n  ;;\nrestart|reload)\n  sig USR2 &amp;&amp; echo reloaded OK &amp;&amp; exit 0\n  echo &gt;&amp;2 \"Couldn't reload, starting '$CMD' instead\"\n  run \"$CMD\"\n  ;;\nupgrade)\n  if sig USR2 &amp;&amp; sleep 2 &amp;&amp; sig 0 &amp;&amp; oldsig QUIT\n  then\n    n=$TIMEOUT\n    while test -s $OLD_PIN &amp;&amp; test $n -ge 0\n    do\n      printf '.' &amp;&amp; sleep 1 &amp;&amp; n=$(( $n - 1 ))\n    done\n    echo\n\n    if test $n -lt 0 &amp;&amp; test -s $OLD_PIN\n    then\n      echo &gt;&amp;2 \"$OLD_PIN still exists after $TIMEOUT seconds\"\n      exit 1\n    fi\n    exit 0\n  fi\n  echo &gt;&amp;2 \"Couldn't upgrade, starting '$CMD' instead\"\n  run \"$CMD\"\n  ;;\nreopen-logs)\n  sig USR1\n  ;;\n*)\n  echo &gt;&amp;2 \"Usage: $0 &lt;start|stop|restart|upgrade|force-stop|reopen-logs&gt;\"\n  exit 1\n  ;;\nesac\n</code></pre>\n\n<p>Any more info you'll need?</p>\n\n<h1>EDIT:</h1>\n\n<p><code>user</code> is the user I use to deploy. For <code>root</code> on this system, nothing is installed. Can that be the problem?</p>\n"}, {"tags": ["ruby", "string", "symbols"], "comments": [{"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1544367341, "post_id": 53692976, "comment_id": 94242457, "body": "The comment by Ursus is correct. You need to convert each Symbol to a String so you can mutate it, then convert that new string to a Symbol."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1544411244, "post_id": 53692976, "comment_id": 94253070, "body": "What happened with <code>:grape</code> and <code>:black</code> in <code>a</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 10435234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RA1DnjQ1h1E/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUSUSggVRzzuE-_38kSQQqJd74q3w/mo/photo.jpg?sz=128", "display_name": "Rafeh Ishtiaq", "link": "https://stackoverflow.com/users/10435234/rafeh-ishtiaq"}, "edited": false, "score": 0, "creation_date": 1544371952, "post_id": 53693059, "comment_id": 94243740, "body": "Thank you +1 What f I wanted to do this via sub or gsub?"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 113, "user_id": 10435234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RA1DnjQ1h1E/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUSUSggVRzzuE-_38kSQQqJd74q3w/mo/photo.jpg?sz=128", "display_name": "Rafeh Ishtiaq", "link": "https://stackoverflow.com/users/10435234/rafeh-ishtiaq"}, "edited": false, "score": 0, "creation_date": 1544372162, "post_id": 53693059, "comment_id": 94243810, "body": "Which part? It doesn&#39;t seem work for sub/gsub though"}, {"owner": {"reputation": 113, "user_id": 10435234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RA1DnjQ1h1E/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUSUSggVRzzuE-_38kSQQqJd74q3w/mo/photo.jpg?sz=128", "display_name": "Rafeh Ishtiaq", "link": "https://stackoverflow.com/users/10435234/rafeh-ishtiaq"}, "edited": false, "score": 0, "creation_date": 1544372454, "post_id": 53693059, "comment_id": 94243885, "body": "The same code but by using gsub or sub to check the last letter and put hi or hello"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 113, "user_id": 10435234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RA1DnjQ1h1E/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUSUSggVRzzuE-_38kSQQqJd74q3w/mo/photo.jpg?sz=128", "display_name": "Rafeh Ishtiaq", "link": "https://stackoverflow.com/users/10435234/rafeh-ishtiaq"}, "edited": false, "score": 0, "creation_date": 1544372627, "post_id": 53693059, "comment_id": 94243922, "body": "Thing is we&#39;re doing more a concatenation than a substitution. Another way would be <code>&quot;#{s}#{s[-1] == &#39;e&#39; ? &#39;hello&#39; : &#39;hi&#39;}&quot;.to_sym</code>"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 2, "creation_date": 1544380164, "post_id": 53693059, "comment_id": 94246055, "body": "Or even <code>:&quot;#{s}#{s[-1] == &#39;e&#39; ? &#39;hello&#39; : &#39;hi&#39;}&quot;</code> but the leading colon will probably get lost in all the punctuation."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 4, "last_activity_date": 1544372679, "last_edit_date": 1544372679, "creation_date": 1544363670, "answer_id": 53693059, "question_id": 53692976, "link": "https://stackoverflow.com/questions/53692976/manipulating-symbols-in-ruby/53693059#53693059", "title": "Manipulating symbols in ruby", "body": "<p>Use <code>to_sym</code> to have a symbol back</p>\n\n<pre><code>a = [:apple, :banana , :grape, :black]\na.map do |s|\n  (s.to_s + (s[-1] == 'e' ? 'hello' : 'hi')).to_sym\nend\n</code></pre>\n\n<p>An alternative</p>\n\n<pre><code>a = [:apple, :banana , :grape, :black]\na.map do |s|\n  \"#{s}#{s[-1] == 'e' ? 'hello' : 'hi'}\".to_sym\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 18705, "user_id": 6461462, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/BlsdV.jpg?s=128&g=1", "display_name": "M--", "link": "https://stackoverflow.com/users/6461462/m"}, "edited": false, "score": 3, "creation_date": 1544420588, "post_id": 53698992, "comment_id": 94254929, "body": "Add some explanation please."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1544449572, "post_id": 53698992, "comment_id": 94268477, "body": "the OP does not seem to want to lose the last character but rather just append hello/hi"}, {"owner": {"reputation": 113, "user_id": 10435234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RA1DnjQ1h1E/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUSUSggVRzzuE-_38kSQQqJd74q3w/mo/photo.jpg?sz=128", "display_name": "Rafeh Ishtiaq", "link": "https://stackoverflow.com/users/10435234/rafeh-ishtiaq"}, "edited": false, "score": 0, "creation_date": 1544480482, "post_id": 53698992, "comment_id": 94283636, "body": "I put up my solution using sub"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1544449595, "last_edit_date": 1544449595, "creation_date": 1544411397, "answer_id": 53698992, "question_id": 53692976, "link": "https://stackoverflow.com/questions/53692976/manipulating-symbols-in-ruby/53698992#53698992", "title": "Manipulating symbols in ruby", "body": "<pre><code>a.map{|sym| sym.to_s.sub(/.\\z/) do\n  |c| case c; when \"e\" then \"hello\"; else \"hi\" end.to_sym\nend}\n# =&gt; [:applhello, :bananhi, :graphello, :blachi]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 1, "last_activity_date": 1544420395, "creation_date": 1544420395, "answer_id": 53700059, "question_id": 53692976, "link": "https://stackoverflow.com/questions/53692976/manipulating-symbols-in-ruby/53700059#53700059", "title": "Manipulating symbols in ruby", "body": "<p>Tried with following,</p>\n\n<pre><code>a.map { |x| \"#{x}#{x.to_s.last == 'e' ? 'hello' : 'hi'}\".to_sym }\n# =&gt; [:applehello, :bananahi, :grapehello, :blackhi]\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 10435234, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-RA1DnjQ1h1E/AAAAAAAAAAI/AAAAAAAAAAA/AAN31DUSUSggVRzzuE-_38kSQQqJd74q3w/mo/photo.jpg?sz=128", "display_name": "Rafeh Ishtiaq", "link": "https://stackoverflow.com/users/10435234/rafeh-ishtiaq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 115, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1544480554, "creation_date": 1544363171, "last_edit_date": 1544480554, "question_id": 53692976, "link": "https://stackoverflow.com/questions/53692976/manipulating-symbols-in-ruby", "title": "Manipulating symbols in ruby", "body": "<p>I am trying to take an array of symbols,</p>\n\n<pre><code>a = [:apple, :banana ,:grape, :black]\n</code></pre>\n\n<p>and add a string at the end of each symbol depending on the last letter. If the symbol ends with <code>e</code>, add <code>\"hello\"</code>, otherwise <code>\"hi\"</code>. I want to get:</p>\n\n<pre><code>[:applehello, :bananahi]\n</code></pre>\n\n<p>I did:</p>\n\n<pre><code>n = []\na.each do |b|\n  if (b[-1] == \"e\")\n    n.push b.to_s + \"hello\"\n  else\n    n.push b.to_s + \"hi\"\n  end\nend\np n\n</code></pre>\n\n<p>I have to convert it into strings. How can I get the final output in symbols?</p>\n\n<p>Did it using sub aswell-</p>\n\n<pre><code>a.each do |q|\n\n\nif (q[-1]==\"e\")\n    then n.push q.to_s.sub(/e/,\"ehello\")\n  else\n    n.push q.to_s.sub(/\\z/,\"ahi\")\n  end\nend\n\np n\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "json", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 910, "user_id": 5351624, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Nqncn.jpg?s=128&g=1", "display_name": "Matheus", "link": "https://stackoverflow.com/users/5351624/matheus"}, "edited": false, "score": 0, "creation_date": 1544360227, "post_id": 53692394, "comment_id": 94240610, "body": "Maybe he wants an array with just one element, if this is the case, he should use Entry.where(user: current_user).limit(1) that will generate the same query of Entry.find_by(user: current_user), but will return just one object in an ActiveRecord::Relation."}, {"owner": {"reputation": 6569, "user_id": 371530, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UJz1r.jpg?s=128&g=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/371530/robin"}, "edited": false, "score": 0, "creation_date": 1544361185, "post_id": 53692394, "comment_id": 94240853, "body": "Thank you. I just forgot about that <code>find_by</code> only the first result."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 3, "last_activity_date": 1544359718, "last_edit_date": 1544359718, "creation_date": 1544359294, "answer_id": 53692394, "question_id": 53692380, "link": "https://stackoverflow.com/questions/53692380/how-to-always-return-a-json-array-for-single-result-in-ruby-on-rails/53692394#53692394", "title": "How to always return a JSON array for single result in Ruby On Rails?", "body": "<p>Try changing this</p>\n\n<pre><code>render json: Entry.find_by(user: current_user).to_json(include: :user)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>render json: Entry.where(user: current_user).to_json(include: :user)\n</code></pre>\n\n<p><code>find_by</code> returns an object, whereas <code>where</code> an <code>ActiveRecord::Relation</code></p>\n"}], "owner": {"reputation": 6569, "user_id": 371530, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/UJz1r.jpg?s=128&g=1", "display_name": "Robin", "link": "https://stackoverflow.com/users/371530/robin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 567, "favorite_count": 0, "accepted_answer_id": 53692394, "answer_count": 1, "score": 1, "last_activity_date": 1544359718, "creation_date": 1544359190, "question_id": 53692380, "link": "https://stackoverflow.com/questions/53692380/how-to-always-return-a-json-array-for-single-result-in-ruby-on-rails", "title": "How to always return a JSON array for single result in Ruby On Rails?", "body": "<p>What is the easiest or anticipated way to always return a JSON array from a API controller in Ruby On Rails?</p>\n\n<p>Let's say I've the following controller action:</p>\n\n<pre><code>def index\n  render json: Entry.all.includes(:user).to_json(include: :user) if current_user.has_role?(:administrator)\n  render json: Entry.find_by(user: current_user).to_json(include: :user)\nend\n</code></pre>\n\n<p>A list of entries is returned. Sometimes the result is only one entry, so <code>to_json()</code> doesn't create a JSON array but a JSON object instead.</p>\n\n<p>This complicates everything like API documentation and implementation in the clients, because we have to test for empty results, single results and array results.</p>\n\n<p>How is it possible to always return a JSON array here?</p>\n\n<p>Stack: Ruby 2.5.3; Rails 5.2.2</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5.2"], "answers": [{"comments": [{"owner": {"reputation": 329, "user_id": 1919995, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/59f2e666102af47b6d8e989f7f435327?s=128&d=identicon&r=PG", "display_name": "Muhammad Yaseen", "link": "https://stackoverflow.com/users/1919995/muhammad-yaseen"}, "edited": false, "score": 0, "creation_date": 1544376963, "post_id": 53694163, "comment_id": 94245091, "body": "Excellent ! Thank you very much for your great reply."}], "tags": [], "owner": {"reputation": 898, "user_id": 160272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/813f535246722b7bf02aacc9ce818de8?s=128&d=identicon&r=PG", "display_name": "showaltb", "link": "https://stackoverflow.com/users/160272/showaltb"}, "is_accepted": true, "score": 1, "last_activity_date": 1544371786, "creation_date": 1544371786, "answer_id": 53694163, "question_id": 53690918, "link": "https://stackoverflow.com/questions/53690918/assigning-current-user-id-to-importing-students-list/53694163#53694163", "title": "Assigning current_user id to importing students list", "body": "<p>Since the model doesn't have direct access to <code>current_user</code>, I would just pass it to your <code>Student.import</code> method:</p>\n\n<pre><code>def import\n  Student.import(params[:file], current_user)\n  ...\nend\n</code></pre>\n\n<p>Then in the model method, use the user when creating a new <code>Student</code> (not sure if you want to update existing students, but you could do that as well). Something like this:</p>\n\n<pre><code>def self.import(file, user)\n  ...\n  note = find_by_id(row[\"id\"]) || new(user: user)\n  ...\nend\n</code></pre>\n"}], "owner": {"reputation": 329, "user_id": 1919995, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/59f2e666102af47b6d8e989f7f435327?s=128&d=identicon&r=PG", "display_name": "Muhammad Yaseen", "link": "https://stackoverflow.com/users/1919995/muhammad-yaseen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 53694163, "answer_count": 1, "score": 0, "last_activity_date": 1544371786, "creation_date": 1544347415, "last_edit_date": 1544358032, "question_id": 53690918, "link": "https://stackoverflow.com/questions/53690918/assigning-current-user-id-to-importing-students-list", "title": "Assigning current_user id to importing students list", "body": "<p>Actually I am trying to import Excel file into the rails 5 application.</p>\n\n<p>While importing I am getting an error, <strong><em>ActiveRecord::RecordInvalid (Validation failed: User must exist)</em></strong></p>\n\n<p>Here is my student.rb</p>\n\n<pre><code>class Student &lt; ApplicationRecord\n\n  belongs_to :user\n\n  mount_uploader :image, ImageUploader\n\n\n  def self.search(search)\n\n    where ([\"student_name LIKE ? OR admission_no LIKE ?\", \"%#{search}%\",\"%#{search}%\"])  \n\n  end\n\n  def self.import(file)\n    spreadsheet = open_spreadsheet(file)\n    header = spreadsheet.row(1)\n    (2..spreadsheet.last_row).each do |i|\n      row = Hash[[header, spreadsheet.row(i)].transpose]\n      note = find_by_id(row[\"id\"]) || new\n      note.attributes = row.to_hash.slice(*row.to_hash.keys)\n      note.save!\n    end\n  end\n\n  def self.open_spreadsheet(file)\n    case File.extname(file.original_filename)\n    when \".csv\" then Roo::CSV.new(file.path)\n    when \".xls\" then Roo::Excel.new(file.path)\n    when \".xlsx\" then Roo::Excelx.new(file.path)\n    else raise \"Unknown file type: #{file.original_filename}\"\n    end \n  end    \n\nend\n</code></pre>\n\n<p>Here is my students_controller.rb</p>\n\n<pre><code>def import\n    Student.import(params[:file])\n    redirect_to admissions_path, success: \"File was successfully imported.\"\nend\n\ndef new\n    @student = current_user.students.build\nend\n\ndef create\n    @student = current_user.students.build(student_params)\n\n    respond_to do |format|\n      if @student.save\n        format.html { redirect_to admissions_url, success: 'Student record was successfully created.' }\n        format.json { render :show, status: :created, location: @student }\n      else\n        format.html { render :new }\n        format.json { render json: @student.errors, status: :unprocessable_entity }\n      end\n    end\n end\n\ndef student_params\n      params.require(:student).permit(:admission_no, :student_name, :surname, :user_id)\n    end\nend\n</code></pre>\n\n<p>Any suggestions are most welcome.</p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["arrays", "ruby", "multidimensional-array"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1544341120, "post_id": 53690155, "comment_id": 94236737, "body": "For the element at location i,j let t=i-j. Then the element at location p,q is on the same main diagonal if and only if p-q=t. Varying t produces all main diagonals. Elements on each antediagonal have a similar property except <code>p+q=t</code>. Please define what constitutes a \u201cwinner\u201d. Many readers, me included, have never heard of this game."}, {"owner": {"reputation": 94146, "user_id": 477420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb05243292dee6726c128660d31583b?s=128&d=identicon&r=PG", "display_name": "Alexei Levenkov", "link": "https://stackoverflow.com/users/477420/alexei-levenkov"}, "edited": false, "score": 0, "creation_date": 1544341265, "post_id": 53690155, "comment_id": 94236764, "body": "You should write function that counts points on a diagonal and then call that helper function for each of diagonal ( there are 2*(n+n-1) diagonals in n*n board - two directions and starting on each element of first row and first column)"}, {"owner": {"reputation": 94146, "user_id": 477420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb05243292dee6726c128660d31583b?s=128&d=identicon&r=PG", "display_name": "Alexei Levenkov", "link": "https://stackoverflow.com/users/477420/alexei-levenkov"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1544341518, "post_id": 53690155, "comment_id": 94236804, "body": "@CarySwoveland <a href=\"https://en.wikipedia.org/wiki/Connect_Four\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Connect_Four</a> ... I&#39;d expect it to be known everywhere... or at least unlimited paper variant of it."}, {"owner": {"reputation": 51, "user_id": 9861236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df07dcbbf50567f8f33c1541ae3fad37?s=128&d=identicon&r=PG&f=1", "display_name": "katies1987", "link": "https://stackoverflow.com/users/9861236/katies1987"}, "edited": false, "score": 0, "creation_date": 1544341857, "post_id": 53690155, "comment_id": 94236867, "body": "Thank you both for your help. I&#39;ll be back in the comments if I have any clarifying questions."}, {"owner": {"reputation": 51, "user_id": 9861236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df07dcbbf50567f8f33c1541ae3fad37?s=128&d=identicon&r=PG&f=1", "display_name": "katies1987", "link": "https://stackoverflow.com/users/9861236/katies1987"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1544343167, "post_id": 53690155, "comment_id": 94237082, "body": "@CarySwoveland I understand the concept (column 7 - row 7) = 0, so all points on that diagonal are equal to 0 (4,4; 5,5, etc.,) I just don&#39;t understand how to implement that."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1544343453, "post_id": 53690155, "comment_id": 94237132, "body": "Sorry, but the Sandman beckons. I\u2019ll post an answer in the morning if you don\u2019t have a good one by then. In explaining the rules please indicate whether four in a row can \u201cwrap around\u201d. Also, please indicate whether winners can be on antediagonals (i.e., bottom left to top right)."}, {"owner": {"reputation": 51, "user_id": 9861236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df07dcbbf50567f8f33c1541ae3fad37?s=128&d=identicon&r=PG&f=1", "display_name": "katies1987", "link": "https://stackoverflow.com/users/9861236/katies1987"}, "edited": false, "score": 0, "creation_date": 1544343989, "post_id": 53690155, "comment_id": 94237217, "body": "Thanks so much! I&#39;m working on it now, so we&#39;ll see...I&#39;ll leave a note, or add to my code if I figure something out."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1544344504, "post_id": 53690155, "comment_id": 94237311, "body": "This is a much better question than before."}, {"owner": {"reputation": 51, "user_id": 9861236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df07dcbbf50567f8f33c1541ae3fad37?s=128&d=identicon&r=PG&f=1", "display_name": "katies1987", "link": "https://stackoverflow.com/users/9861236/katies1987"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1544345458, "post_id": 53690155, "comment_id": 94237501, "body": "@anothermh THANK YOU! I got super frustrated when you sent me that post to read, went and worked on my code for a while and came up with a solution for the initial (horizontal and vertical) wins. I appreciate the push. :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 94146, "user_id": 477420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb05243292dee6726c128660d31583b?s=128&d=identicon&r=PG", "display_name": "Alexei Levenkov", "link": "https://stackoverflow.com/users/477420/alexei-levenkov"}, "edited": false, "score": 0, "creation_date": 1544380933, "post_id": 53690155, "comment_id": 94246304, "body": "@AlexeiLevenkov, I confess I was born under a rock and haven&#39;t strayed far from it."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1544395918, "post_id": 53690155, "comment_id": 94250265, "body": "I suggest you move the description of the game to the top (no need for &quot;Edited to add:&quot;) and make your code an answer rather than part of the question. (It&#39;s not uncommon for askers to offer solutions.) Best to keep the question just a question. You might refer to your answer in the question just to stem readers who miss your answer from asking what you&#39;ve done to try to solve. My answer would be difficult for a newbie, but I think if you work at it, line-by-line, you&#39;ll understand it and learn a lot about both Ruby and the Ruby-way."}, {"owner": {"reputation": 51, "user_id": 9861236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df07dcbbf50567f8f33c1541ae3fad37?s=128&d=identicon&r=PG&f=1", "display_name": "katies1987", "link": "https://stackoverflow.com/users/9861236/katies1987"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1544397569, "post_id": 53690155, "comment_id": 94250683, "body": "Will do, thanks @CarySwoveland"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 9861236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df07dcbbf50567f8f33c1541ae3fad37?s=128&d=identicon&r=PG&f=1", "display_name": "katies1987", "link": "https://stackoverflow.com/users/9861236/katies1987"}, "edited": false, "score": 0, "creation_date": 1544394153, "post_id": 53694641, "comment_id": 94249866, "body": "Thank you! I&#39;m really interested in this solution, and will play with it more outside of this project!"}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1544375103, "creation_date": 1544375103, "answer_id": 53694641, "question_id": 53690155, "link": "https://stackoverflow.com/questions/53690155/connect-4-diagonal-win-check/53694641#53694641", "title": "Connect 4 Diagonal Win Check", "body": "<p>I was playing with a similar grid, for a crosswords and come out with a way to get the diagonals. I changed a bit to fit the connect 4.\nIt is not a complete answer but I hope it can help.</p>\n\n<p>First of all I want to map the grid to have also the coordinates:</p>\n\n<pre><code>grid_map = grid_array.map.with_index{ |line, y| line.map.map.with_index { |e, x| [e, x, y] } }\n</code></pre>\n\n<p>Then a couple of methods to recover all the diagonals of a matrix (there should be e better solution, anyway).</p>\n\n<p>The first takes only half the diagonals in one direction:</p>\n\n<pre><code>def half_diagonals(matrix)\n  max_y = matrix[0].size\n  max_x = matrix.size\n  diagonals = []\n  (0...max_x).each do |x_start|\n    x = x_start\n    y = 0\n    diagonal = [matrix[x][y]]\n    while  x &lt; max_x - 1 and y &lt; max_y - 1 do\n      x += 1\n      y += 1\n      diagonal &lt;&lt; matrix[x][y]\n    end\n    diagonals &lt;&lt; diagonal\n  end\n  # only in diagonals with at least four spots\n  return diagonals.select{ |d| d.size &gt;= 4 }\nend\n</code></pre>\n\n<p>This calls half_diagonals(matrix) on transformations of the matrix to get all the diagonals:</p>\n\n<pre><code>def diagonals(matrix)\n  half_diagonals(matrix) +\n  half_diagonals(matrix.transpose)[1..-1] +\n  half_diagonals(matrix.reverse) +\n  half_diagonals(matrix.reverse.transpose)[1..-1]\nend\n\n# diagonals(grid_map).each { |e| p e } # to print the diagonals\n</code></pre>\n\n<p>Now, it is required to check each diagonal for a winner, so define a method to do so:</p>\n\n<pre><code>def check_diagonal(diagonal, empty_spot = \".\")\n  check = diagonal.chunk_while { |s1, s2| s1[0] == s2[0] }.map { |e| [e.count, e[0][0], e.map{ |ee| ee[1..-1]}] }\n  return detected = check.detect { |e| e[0] == 4 and e[1] != empty_spot }\n  # it returns the first four detected\nend\n</code></pre>\n\n<p>Now call the methods on <code>grid_map</code>, to get the count, the colour and the coordinates of the connected four:</p>\n\n<pre><code>diagonals(grid_map).map { |diagonal| check_diagonal(diagonal) }.compact\n#=&gt; [[4, \"B\", [[0, 0], [1, 1], [2, 2], [3, 3]]], [4, \"X\", [[3, 4], [4, 5], [5, 6], [6, 7]]]]\n</code></pre>\n\n<p>The four <code>\"M\"</code> are not returned because of <code>check.detect</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 9861236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df07dcbbf50567f8f33c1541ae3fad37?s=128&d=identicon&r=PG&f=1", "display_name": "katies1987", "link": "https://stackoverflow.com/users/9861236/katies1987"}, "edited": false, "score": 0, "creation_date": 1544389688, "post_id": 53695159, "comment_id": 94248772, "body": "I&#39;m a little fuzzy, but I think I understand what you mean, Steve. I wrote some code and added it to the end of my question above. Would you mind taking a look?"}, {"owner": {"reputation": 51, "user_id": 9861236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df07dcbbf50567f8f33c1541ae3fad37?s=128&d=identicon&r=PG&f=1", "display_name": "katies1987", "link": "https://stackoverflow.com/users/9861236/katies1987"}, "edited": false, "score": 0, "creation_date": 1544394066, "post_id": 53695159, "comment_id": 94249851, "body": "I added an answer below that I came up with. It starts at r7, c7 and moves from bottom right to top left. Do you see any immediate issues? I have been testing for a little bit and what I have come across, I&#39;ve been able to address."}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 51, "user_id": 9861236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df07dcbbf50567f8f33c1541ae3fad37?s=128&d=identicon&r=PG&f=1", "display_name": "katies1987", "link": "https://stackoverflow.com/users/9861236/katies1987"}, "edited": false, "score": 0, "creation_date": 1544395743, "post_id": 53695159, "comment_id": 94250219, "body": "I think the code you added to the question won&#39;t work.  I don&#39;t think that column needs to be incremented if the piece count increases. But I see you have an answer from Cary and that&#39;s usually worth gold in the bank."}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 1, "last_activity_date": 1544378599, "creation_date": 1544378599, "answer_id": 53695159, "question_id": 53690155, "link": "https://stackoverflow.com/questions/53690155/connect-4-diagonal-win-check/53695159#53695159", "title": "Connect 4 Diagonal Win Check", "body": "<p>If there is a winning diagonal, the start position must be in the range of row [0-3] and col [0-3].  Any diagonal starting outside that upper left box wouldn't have enough right-and-down positions to make it to four in a row. </p>\n\n<p>So really you need a <code>while row &lt; 4</code> and <code>while col &lt; 4</code> nested loops.</p>\n\n<p>For each row col combination,  assuming that value is not \".\" you could then set your piece_count to 1 and then do a counter 1 to 3 and check <code>playing_board[row + counter][col + counter]</code> is equal to the value of <code>playing_board[row][col]</code> and if it is increment your piece_count.</p>\n\n<p>Outside the counter 1 to 3 loop, if piece_count is 4, you have a winner.</p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 9861236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df07dcbbf50567f8f33c1541ae3fad37?s=128&d=identicon&r=PG&f=1", "display_name": "katies1987", "link": "https://stackoverflow.com/users/9861236/katies1987"}, "edited": false, "score": 0, "creation_date": 1544394291, "post_id": 53696823, "comment_id": 94249902, "body": "Thank you for the <i>super</i> detailed explanation! I&#39;m just learning Ruby, so some of this I don&#39;t quite understand, but what I can understand helped me to come up with a working <i>fingers crossed</i> solution.  I&#39;ve added my solution as an answer to this post. I would appreciate any suggestions or hole-poking."}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 1, "creation_date": 1544395977, "post_id": 53696823, "comment_id": 94250283, "body": "As always excellent answer from you.  For info, the physical toy &quot;Connect4&quot; requires that you insert your token in the top and gravity drops it to the lowest position.  So the dot in position [4][2] with the token in position [3][2] could never physically happen (unless, I guess, the token got &quot;stuck&quot; while falling, which I&#39;ve never seen happen)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1544396253, "post_id": 53696823, "comment_id": 94250356, "body": "@Steve, thanks. Without looking I&#39;ll bet there&#39;s a youtube video showing a token getting stuck."}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1544399090, "post_id": 53696823, "comment_id": 94250984, "body": "I had to check. Couldn&#39;t find one.  Curse my OCD."}, {"owner": {"reputation": 89, "user_id": 13128095, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V3uMDbDnz3U/AAAAAAAAAAI/AAAAAAAAAAA/AKF05nDHpdHbpYrUM99s07cGo4WlfnoOfg/photo.jpg?sz=128", "display_name": "Christian", "link": "https://stackoverflow.com/users/13128095/christian"}, "edited": false, "score": 0, "creation_date": 1603634797, "post_id": 53696823, "comment_id": 114092732, "body": "Thank you for this, I was able to follow it up until the diagonals. The Map inside a Map confused me, would it be possible to breakdown <code>(0..grid.size-4).map { |i| (0..grid.size-1-i).map { |j| grid[i+j][j] } }</code> a little further?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 89, "user_id": 13128095, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V3uMDbDnz3U/AAAAAAAAAAI/AAAAAAAAAAA/AKF05nDHpdHbpYrUM99s07cGo4WlfnoOfg/photo.jpg?sz=128", "display_name": "Christian", "link": "https://stackoverflow.com/users/13128095/christian"}, "edited": false, "score": 1, "creation_date": 1603671786, "post_id": 53696823, "comment_id": 114102597, "body": "@Christian, I did an edit to clarify my answer. Please let me know if it answers your question."}, {"owner": {"reputation": 89, "user_id": 13128095, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V3uMDbDnz3U/AAAAAAAAAAI/AAAAAAAAAAA/AKF05nDHpdHbpYrUM99s07cGo4WlfnoOfg/photo.jpg?sz=128", "display_name": "Christian", "link": "https://stackoverflow.com/users/13128095/christian"}, "edited": false, "score": 0, "creation_date": 1603734738, "post_id": 53696823, "comment_id": 114124333, "body": "Thanks @Cary, I can understand the end result but it&#39;s getting there which is what I&#39;m struggling with. <code>(0..grid.size-4)</code> resolves to <code>(0..2)</code>, what is <code>(0..2).map</code> actually doing?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1603736686, "post_id": 53696823, "comment_id": 114125212, "body": "<code>(0..2).map</code> returns an array of three elements, mappings of <code>0</code>, <code>1</code> and <code>2</code>. Consider, for example, <code>1</code>. <code>1</code> is passed to the block <code>{ |i| (0..grid.size-1-i).map { |j| grid[i+j][j] } }</code> and the block variable <code>i</code> is set to <code>1</code>. The block calculation for <code>i=1</code> is therefore <code>(0..grid.size-1-1).map { |j| grid[1+j][j] }</code>, which reduces to <code>(0..4).map { |j| grid[1+j][j] }</code>, which equals <code>[&quot;.&quot;, &quot;.&quot;, &quot;w&quot;, &quot;w&quot;, &quot;w&quot;]</code>, so <code>i=1</code> is mapped to that 5-element array. Similar calculations are made for <code>i=0</code> and <code>i=2</code>. Clear?"}, {"owner": {"reputation": 89, "user_id": 13128095, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-V3uMDbDnz3U/AAAAAAAAAAI/AAAAAAAAAAA/AKF05nDHpdHbpYrUM99s07cGo4WlfnoOfg/photo.jpg?sz=128", "display_name": "Christian", "link": "https://stackoverflow.com/users/13128095/christian"}, "edited": false, "score": 1, "creation_date": 1603741303, "post_id": 53696823, "comment_id": 114127205, "body": "that&#39;s great, appreciate you taking the time to write that. Between your answer and comments I am just about grasping it :)"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 4, "last_activity_date": 1603740240, "last_edit_date": 1603740240, "creation_date": 1544390721, "answer_id": 53696823, "question_id": 53690155, "link": "https://stackoverflow.com/questions/53690155/connect-4-diagonal-win-check/53696823#53696823", "title": "Connect 4 Diagonal Win Check", "body": "<p>Suppose we have</p>\n<pre><code>grid = [\n  %w| . . . . . . |,\n  %w| . . . w w . |,\n  %w| . . . w b . |,\n  %w| b . w . b . |,\n  %w| w w . w b b |,\n  %w| b w b b w b |\n]\n  #=&gt; [[&quot;.&quot;, &quot;.&quot;, &quot;.&quot;, &quot;.&quot;, &quot;.&quot;, &quot;.&quot;], \n  #    [&quot;.&quot;, &quot;.&quot;, &quot;.&quot;, &quot;w&quot;, &quot;w&quot;, &quot;.&quot;],\n  #    [&quot;.&quot;, &quot;.&quot;, &quot;.&quot;, &quot;w&quot;, &quot;b&quot;, &quot;.&quot;],\n  #    [&quot;b&quot;, &quot;.&quot;, &quot;w&quot;, &quot;.&quot;, &quot;b&quot;, &quot;.&quot;],\n  #    [&quot;w&quot;, &quot;w&quot;, &quot;.&quot;, &quot;w&quot;, &quot;b&quot;, &quot;b&quot;],\n  #    [&quot;b&quot;, &quot;w&quot;, &quot;b&quot;, &quot;b&quot;, &quot;w&quot;, &quot;b&quot;]]\n</code></pre>\n<p>True, this is is only 6x6, but the solution is no different.</p>\n<p>Firstly, as the array is small we don't have to worry about computational efficiency, so we can concentrate on code efficiency.</p>\n<p>Let's first check if there are four in a row in each row.</p>\n<p><strong>Check the rows</strong></p>\n<pre><code>def four_in_a_row_by_row(arr)\n  arr.each do |row|\n    a = row.each_cons(4).find { |a| a.uniq.size == 1 &amp;&amp; a.first != '.' }\n    return a.first unless a.nil?        \n  end\n  nil\nend\n</code></pre>\n<p>This method returns <code>w</code> if there are four <code>w</code>'s in a row, <code>b</code> if there are four <code>b</code>'s in a row, else <code>nil</code>.</p>\n<p>For <code>arr = grid</code> we find that no row contains four <code>'b'</code>'s or <code>'w'</code>'s in a row.</p>\n<pre><code>four_in_a_row_by_row(grid)\n  #=&gt; nil\n</code></pre>\n<p>Note that this method does not require that <code>arr.size == grid.size</code> or that all elements of <code>arr</code> to be of the same size. It merely checks to see if any element has four <code>'w'</code>'s or four <code>'b'</code>'s in a row. This will have significance later.</p>\n<p>The last element of <code>arr</code> passed to the block, for example, is the following.</p>\n<pre><code>row =  [&quot;b&quot;, &quot;w&quot;, &quot;b&quot;, &quot;b&quot;, &quot;w&quot;, &quot;b&quot;]\n</code></pre>\n<p>We then compute</p>\n<pre><code>enum0 = row.each_cons(4)\n  #=&gt; #&lt;Enumerator: [&quot;b&quot;, &quot;w&quot;, &quot;b&quot;, &quot;b&quot;, &quot;w&quot;, &quot;b&quot;]:each_cons(4)&gt;\n</code></pre>\n<p>and</p>\n<pre><code>enum1 = enum0.find\n  #=&gt; #&lt;Enumerator: #&lt;Enumerator: [&quot;b&quot;, &quot;w&quot;, &quot;b&quot;, &quot;b&quot;, &quot;w&quot;, &quot;b&quot;]:each_cons(4)&gt;:find&gt;\n</code></pre>\n<p><code>enum1</code> can be thought of as a <em>compound</em> enumerator, though Ruby does not define it so. See <a href=\"https://ruby-doc.org/core-2.7.0/Enumerable.html#method-i-each_cons\" rel=\"nofollow noreferrer\">Enumerable#each_cons</a> and <a href=\"https://ruby-doc.org/core-2.7.0/Enumerable.html#method-i-find\" rel=\"nofollow noreferrer\">Enumerable#find</a>.</p>\n<p>We can convert this enumerator to an array to see the elements that will be passed to the block.</p>\n<pre><code>enum1.to_a\n  #=&gt; [[&quot;b&quot;, &quot;w&quot;, &quot;b&quot;, &quot;b&quot;],\n  #    [&quot;w&quot;, &quot;b&quot;, &quot;b&quot;, &quot;w&quot;],\n  #    [&quot;b&quot;, &quot;b&quot;, &quot;w&quot;, &quot;b&quot;]]\n</code></pre>\n<p>The first element is passed to the block and the following calculations are made.</p>\n<pre><code>    a = enum1.next\n    u = a.uniq\n    u.size == 1\n</code></pre>\n<p>We therefore do not need to compute <code>a.first != '.'</code>. The remaining two elements of <code>enum1</code> are passed to the block and <code>nil</code> is computed for each, indicating that there are not four in a row <code>'w'</code>'s or <code>'b'</code>'s in the last row.</p>\n<p>We are almost finished!</p>\n<p>&quot;Wait&quot;, you say, we have only checked the rows! There are still the columns and all the diagonals! Stay tuned...</p>\n<p><strong>Check the columns</strong></p>\n<p>This one is dead-easy.</p>\n<pre><code>four_in_a_row_by_row(grid.transpose)\n  #=&gt; nil\n</code></pre>\n<p>Here</p>\n<pre><code> grid.transpose\n   #=&gt; [[&quot;.&quot;, &quot;.&quot;, &quot;.&quot;, &quot;b&quot;, &quot;w&quot;, &quot;b&quot;],\n   #    [&quot;.&quot;, &quot;.&quot;, &quot;.&quot;, &quot;.&quot;, &quot;w&quot;, &quot;w&quot;],\n   #    [&quot;.&quot;, &quot;.&quot;, &quot;.&quot;, &quot;w&quot;, &quot;.&quot;, &quot;b&quot;],\n   #    [&quot;.&quot;, &quot;w&quot;, &quot;w&quot;, &quot;.&quot;, &quot;w&quot;, &quot;b&quot;],\n   #    [&quot;.&quot;, &quot;w&quot;, &quot;b&quot;, &quot;b&quot;, &quot;b&quot;, &quot;w&quot;],\n   #    [&quot;.&quot;, &quot;.&quot;, &quot;.&quot;, &quot;.&quot;, &quot;b&quot;, &quot;b&quot;]]\n</code></pre>\n<p><strong>Check the diagonals (top left to bottom right)</strong></p>\n<p>Here all we need do is construct as array <code>arr</code> containing the diagonals and then apply <code>four_in_a_row(arr)</code>. First identify the diagonals that include the elements in the first column that are of length <code>4</code> or greater. That includes the following diagonals</p>\n<pre><code>[grid[0][0], grid[1][1], grid[2][2], grid[3][3], grid[4][4],grid[5][5]] \n[grid[1][0], grid[2][1], grid[3][2], grid[4][3], grid[5][4]] \n[grid[2][0], grid[3][1], grid[4][2], grid[5][3]] \n</code></pre>\n<p>It is not necessary to consider the remaining diagonals that contain an element in the first column because they contain fewer than <code>4</code> elements:</p>\n<pre><code>[grid[3][0], grid[4][1], grid[5][2]] \n[grid[4][0], grid[5][1]] \n[grid[5][0]] \n</code></pre>\n<p>We can obtains the first three diagonals as follows.</p>\n<pre><code>(0..grid.size-4).map { |i| (0..grid.size-1-i).map { |j| grid[i+j][j] } }\n  #=&gt; [[&quot;.&quot;, &quot;.&quot;, &quot;.&quot;, &quot;.&quot;, &quot;b&quot;, &quot;b&quot;],\n  #    [&quot;.&quot;, &quot;.&quot;, &quot;w&quot;, &quot;w&quot;, &quot;w&quot;],\n  #    [&quot;.&quot;, &quot;.&quot;, &quot;.&quot;, &quot;b&quot;]]\n</code></pre>\n<p>Similarly, identify the diagonals that include the elements in the first row, other that <code>grid[0][0]</code>, that are are of length <code>4</code> or greater. Those are the diagonals</p>\n<pre><code>[grid[0][1], grid[1][2], grid[2][3], grid[3][4], grid[4][5]] \n[grid[0][2], grid[1][3], grid[2][4], grid[3][5]] \n</code></pre>\n<p>The remaining diagonals containing an element in the first row (other than <code>grid[0][0]</code>) contain fewer than <code>4</code> elements. We obtain those diagonals as follows.</p>\n<pre><code>(1..grid.first.size-4).map do |j|\n  (0..grid.size-j-1).map { |i| grid[i][j+i] }\nend\n  #=&gt; [[&quot;.&quot;, &quot;.&quot;, &quot;w&quot;, &quot;b&quot;, &quot;b&quot;],\n  #    [&quot;.&quot;, &quot;w&quot;, &quot;b&quot;, &quot;.&quot;]]\n</code></pre>\n<p>We therefore can obtain an array of all diagonals as follows.</p>\n<pre><code>def diagonals(grid)\n  (0..grid.size-4).map do |i|\n    (0..grid.size-1-i).map { |j| grid[i+j][j] }\n  end.concat((1..grid.first.size-4).map do |j|\n    (0..grid.size-j-1).map { |i| grid[i][j+i] }\n  end)\nend\n</code></pre>\n    \n<pre><code>arr = diagonals(grid)\n  #=&gt; [[&quot;.&quot;, &quot;.&quot;, &quot;.&quot;, &quot;.&quot;, &quot;b&quot;, &quot;b&quot;],\n  #    [&quot;.&quot;, &quot;.&quot;, &quot;w&quot;, &quot;w&quot;, &quot;w&quot;],\n  #    [&quot;.&quot;, &quot;.&quot;, &quot;.&quot;, &quot;b&quot;],\n  #    [&quot;.&quot;, &quot;.&quot;, &quot;w&quot;, &quot;b&quot;, &quot;b&quot;],\n  #    [&quot;.&quot;, &quot;w&quot;, &quot;b&quot;, &quot;.&quot;]]\n</code></pre>\n<p>We see that no diagonals contain four in a row.</p>\n<pre><code>four_in_a_row_by_row(arr)\n  #=&gt; nil\n</code></pre>\n<p><strong>Check the antediagonals (botton left to top right)</strong></p>\n<p>We could go through the same reasoning as in computing the diagonals, but since computational efficiency is not important here, there is an easier way: compute the diagonals of the array obtained by &quot;rotating&quot; <code>grid</code> 90 degrees.</p>\n<pre><code>def rotate90(grid)\n  ncols = grid.first.size\n  grid.each_index.with_object([]) do |i,a|\n    a &lt;&lt; ncols.times.map { |j| grid[j][ncols-1-i] }\n  end\nend\n</code></pre>\n\n<pre><code>arr = rotate90(grid)\n  #=&gt; [[&quot;.&quot;, &quot;.&quot;, &quot;.&quot;, &quot;.&quot;, &quot;b&quot;, &quot;b&quot;],\n  #    [&quot;.&quot;, &quot;w&quot;, &quot;b&quot;, &quot;b&quot;, &quot;b&quot;, &quot;w&quot;],\n  #    [&quot;.&quot;, &quot;w&quot;, &quot;w&quot;, &quot;.&quot;, &quot;w&quot;, &quot;b&quot;],\n  #    [&quot;.&quot;, &quot;.&quot;, &quot;.&quot;, &quot;w&quot;, &quot;.&quot;, &quot;b&quot;],\n  #    [&quot;.&quot;, &quot;.&quot;, &quot;.&quot;, &quot;.&quot;, &quot;w&quot;, &quot;w&quot;],\n  #    [&quot;.&quot;, &quot;.&quot;, &quot;.&quot;, &quot;b&quot;, &quot;w&quot;, &quot;b&quot;]]\narr1 = diagonals(arr)\n  #=&gt; [[&quot;.&quot;, &quot;w&quot;, &quot;w&quot;, &quot;w&quot;, &quot;w&quot;, &quot;b&quot;], [&quot;.&quot;, &quot;w&quot;, &quot;.&quot;, &quot;.&quot;, &quot;w&quot;],\n  #    [&quot;.&quot;, &quot;.&quot;, &quot;.&quot;, &quot;b&quot;], [&quot;.&quot;, &quot;b&quot;, &quot;.&quot;, &quot;.&quot;, &quot;w&quot;], [&quot;.&quot;, &quot;b&quot;, &quot;w&quot;, &quot;b&quot;]]\n</code></pre>\n<p>We see that no antediagonals contain four in a row.</p>\n<pre><code>four_in_a_row_by_row(arr1)\n  #=&gt; &quot;w&quot;\n</code></pre>\n<p><strong>Putting it all together</strong></p>\n<pre><code>def four_in_a_row(grid)\n  four_in_a_row_by_row(grid) ||\n  four_in_a_row_by_row(grid.transpose) ||\n  four_in_a_row_by_row(diagonals(grid)) ||\n  four_in_a_row_by_row(diagonals(rotate90(grid)))\nend\n  \nfour_in_a_row_by_row(grid) \n  #=&gt; &quot;w&quot;\n</code></pre>\n<p><strong>Alternative calculation of <code>four_in_a_row_by_row</code></strong></p>\n<p>One may alternatively write <code>four_in_a_row_by_row</code> as follows.</p>\n<pre><code>def four_in_a_row_by_row(arr)\n  row = arr.find { |row| four_in_a_row(row) }\n  row.nil? ? nil : four_in_a_row(row)\nend\n</code></pre>\n\n<pre><code>def four_in_a_row(row)\n  (0..row.size-5).find { |j| row[j,4].uniq.size == 1 &amp;&amp; row[j] != '.' }\nend\n</code></pre>\n\n<pre><code>four_in_a_row_by_row(grid)\n  #=&gt; nil\n</code></pre>\n\n<p>If preferred, <code>row.nil? ? nil : four_in_a_row(row)</code> could be replaced with</p>\n<pre><code>four_in_a_row(row) unless row.nil?\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 9861236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df07dcbbf50567f8f33c1541ae3fad37?s=128&d=identicon&r=PG&f=1", "display_name": "katies1987", "link": "https://stackoverflow.com/users/9861236/katies1987"}, "is_accepted": false, "score": 1, "last_activity_date": 1544393960, "creation_date": 1544393960, "answer_id": 53697253, "question_id": 53690155, "link": "https://stackoverflow.com/questions/53690155/connect-4-diagonal-win-check/53697253#53697253", "title": "Connect 4 Diagonal Win Check", "body": "<p>I came up with a solution that has seemed to work in testing. It goes from bottom right to top left, starting at row 7, column 7 in my 8x8 grid. I've also created the antediagonal that moves from bottom left to top right. </p>\n\n<p>I have tested for the last little while and haven't found an error, but would love to know if anyone else pokes holes in it. </p>\n\n<p>I appreciate all of you so much -- your solutions and advice got me to this point!</p>\n\n<pre><code>def nw_diagonal_win (playing_board, player_piece)\n    row = 7\n    column = 7\n    piece_count = 0\n    while row &lt; playing_board.size &amp;&amp; row &gt;= 0 &amp;&amp; column &lt; playing_board[row].size &amp;&amp; column &gt;= 0\n      if playing_board[row][column] == player_piece\n        piece_count += 1\n        column -= 1\n        row -= 1\n      else\n        piece_count = 0\n        column -= 1\n        if column &lt; 3\n          row -= 1\n          column = 7\n        end\n      end\n        if piece_count == 4\n          puts \"Player #{player_piece} is the winner in a diagonal!\"\n        end\n    end\nend\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 9861236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df07dcbbf50567f8f33c1541ae3fad37?s=128&d=identicon&r=PG&f=1", "display_name": "katies1987", "link": "https://stackoverflow.com/users/9861236/katies1987"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1002, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1603740240, "creation_date": 1544339149, "last_edit_date": 1544389818, "question_id": 53690155, "link": "https://stackoverflow.com/questions/53690155/connect-4-diagonal-win-check", "title": "Connect 4 Diagonal Win Check", "body": "<p>I'm testing a diagonal win in a Ruby Connect 4 game. I have been using a hard-coded 2D array for testing:</p>\n\n<pre><code>grid_array = [\n[\"B\", \".\", \".\", \".\", \".\", \".\", \".\", \".\"],\n[\".\", \"B\", \".\", \".\", \".\", \".\", \".\", \".\"],\n[\".\", \".\", \"B\", \".\", \".\", \".\", \".\", \".\"],\n[\".\", \".\", \".\", \"B\", \".\", \".\", \".\", \".\"],\n[\".\", \".\", \".\", \"X\", \"M\", \".\", \".\", \".\"],\n[\".\", \".\", \".\", \".\", \"X\", \"M\", \".\", \".\"],\n[\".\", \".\", \".\", \".\", \".\", \"X\", \"M\", \".\"],\n[\".\", \".\", \".\", \".\", \".\", \".\", \"X\", \"M\"]\n]\n</code></pre>\n\n<p>This inner loop of this method works correctly (correctly identifies that <code>'M'</code> or <code>'B'</code> separately are winners, but I am stuck when trying to move the diagonal checking across the columns or up the rows with the outer loop to pick up <code>'X'</code> as a winning value, for example.</p>\n\n<pre><code>def nw_diagonal_win (playing_board)\n  row = 7\n  while row &lt; playing_board.size &amp;&amp; row &gt;= 0\n\n    row = 7\n    column = 7\n    piece_count = 0\n\n    while (row &lt; playing_board.size &amp;&amp; column &lt; playing_board[row].size &amp;&amp; column &gt;= 0)\n\n      if playing_board[row][column] == 'M'\n        piece_count += 1\n\n        if piece_count == 4\n          puts \"Player is the winner in a diagonal!\"\n        end\n\n        puts piece_count.inspect\n\n      else\n        piece_count = 0\n        puts \"No winner.\"\n      end\n\n      row += 1\n      column += 1\n    end\n\n    row -= 1\n  end\nend\n</code></pre>\n\n<p>Edited to add:\nA 'winner' in Connect 4 sets 4 adjacent pieces (horizontal, vertical, or diagonal). In my game, this is represented by <code>'X'</code> and <code>'0'</code>. Pieces are \"dropped\" from the top of a column in the grid and fall to the bottom-most available space in that column. Pieces can be stacked in a column, but cannot \"float\" in the middle of the board. Diagonals may run from top left to bottom right or top right to bottom left. A win only occurs if pieces are uninterrupted within the grid (no wrapping around). </p>\n\n<p>Think a larger version of tic-tac-toe where moves must be made in the bottom row first, and then can subsequently be made in the rows above, stacking like boxes. Four in a row (horizontal, vertical, or diagonal \\ /) wins.</p>\n\n<p>In response to answer suggestion from Steve, below:</p>\n\n<pre><code>def top_left_diagonal (playing_board, player_piece)\n  row = 0\n  while row &lt; playing_board.size - 3\n    piece_count = 0\n    column = 0\n    while column &lt; playing_board[row].size - 3 &amp;&amp; playing_board[row][column] == player_piece\n      if (playing_board[row][column] == playing_board[row + piece_count][column + piece_count])\n        piece_count += 1\n      else\n        piece_count = 0\n      end\n      column += 1\n    end\n    if piece_count == 4\n      puts \"Diagonal winner!\"\n    end\n    row += 1\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 1, "creation_date": 1544332548, "post_id": 53689513, "comment_id": 94235517, "body": "<a href=\"https://blog.appsignal.com/2018/05/29/ruby-magic-enumerable-and-enumerator.html\" rel=\"nofollow noreferrer\">blog.appsignal.com/2018/05/29/&hellip;</a> is a pretty good explanation."}, {"owner": {"reputation": 85, "user_id": 8668262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3141cf94999c45c14debe36549bfc180?s=128&d=identicon&r=PG&f=1", "display_name": "amarjeet singh", "link": "https://stackoverflow.com/users/8668262/amarjeet-singh"}, "reply_to_user": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "edited": false, "score": 0, "creation_date": 1544332569, "post_id": 53689513, "comment_id": 94235522, "body": "its working bro! @matt"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1544334509, "post_id": 53689513, "comment_id": 94235775, "body": "The author has included <code>Enumerable</code> into the custom class <code>VowelFinder</code>. To be able to use the many wonderful instance methods of  <code>Enumerable</code> the class must have an instance method <code>each</code> which returns an enumerator. All of <code>Enumerable</code>&#39;s instance methods require an enumerator as their receiver."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1544335648, "post_id": 53689513, "comment_id": 94235913, "body": "@CarySwoveland Just like the <a href=\"http://ruby-doc.org/core/Enumerable.html\" rel=\"nofollow noreferrer\">docs</a> say: &quot;The <code>Enumerable</code> mixin provides collection classes with several traversal and searching methods, and with the ability to sort. <b>The class must provide a method <code>each</code>, which yields successive members of the collection.</b>&quot;"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1544450954, "post_id": 53689513, "comment_id": 94269238, "body": "@muistooshort No real need to include <code>Enumerable</code> when you can just create an <code>Enumerator</code>. The <code>Enumerator</code> class already has an <code>each</code> method and includes <code>Enumerable</code>. In this case one could use <code>Kernel#to_enum</code>/<code>#enum_for</code>, such as <code>&quot;the quick brown fox jumped&quot;.enum_for(:scan, &#47;[aeiou]&#47;).inject(:+)#=&gt;&quot;euiooue&quot;</code>. This will create an <code>Enumerator</code> from <code>String#scan</code> with the argument <code>&#47;[aeiou]&#47;</code> and when inject is called each vowel will be yielded to the block provided by <code>Symbol#to_proc</code>."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1544464183, "post_id": 53689513, "comment_id": 94276500, "body": "@engineersmnky Yeah but this looks more like an exercise in using <code>Enumerable</code> than anything else. All academic examples are bad and full of hand waving but the underlying principle here, as I see it, is that <code>Enumerable</code> is built on <code>each</code>."}], "answers": [{"tags": [], "owner": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "is_accepted": false, "score": 1, "last_activity_date": 1544450212, "last_edit_date": 1592644375, "creation_date": 1544336161, "answer_id": 53689901, "question_id": 53689513, "link": "https://stackoverflow.com/questions/53689513/when-and-how-does-the-each-method-work/53689901#53689901", "title": "When and how does the `each` method work?", "body": "<p><strong>TL:DR</strong> The Enumerable mixin works by a kind of contract with you. You tell it what <code>each</code> means, and it brings to life several dozen additional methods. <code>inject</code> is one of those methods.</p>\n<h3>Actual discussion</h3>\n<p>How does <code>inject</code> work? Roughly speaking, it walks through something that consists of <em>elements</em>, applying a function to the elements as they arrive. What are the elements of the string <code>&quot;the quick brown fox jumped&quot;</code>? Arguably, they are its characters. So if we treat the string as an array of characters and inject <code>+</code>, which concatenates strings, we expect to get the original string itself:</p>\n<pre><code>arr = &quot;The quick brown fox jumped&quot;.scan /./\nputs arr.inject(:+) # =&gt; the quick brown fox jumped\n</code></pre>\n<p>But now let's go a step further. Ruby has mixins, and in particular it has the Enumerable mixin. This allows us to treat <em>anything we like</em> as &quot;something that has elements&quot;. So instead of an array, let's make it possible to inject <code>+</code> over the elements of the string <em>itself</em>. To do so, we must define <code>each</code> for a String, so that it becomes possible to walk the elements of the string. Once we do that, Enumerable's many methods, including <code>inject</code>, will spring to life.</p>\n<p>What should <code>each</code> mean for a string? Again, we could simply make it mean each character. We could conceivably do that by aliasing <code>each</code> to the existing <code>each_char</code>:</p>\n<pre><code>class String\n  include Enumerable\n  alias each each_char\nend\ns = &quot;the quick brown fox jumped&quot;\nputs s.inject(:+) # =&gt; the quick brown fox jumped\n</code></pre>\n<p>But instead of aliasing <code>each</code> to <code>each_char</code>, we could define <code>each</code> ourselves from scratch. We already know one way to do that, using <code>scan</code>:</p>\n<pre><code>class String\n  include Enumerable\n  def each\n    self.scan(/./) do |ch|\n      yield ch\n    end\n  end\nend\ns = &quot;the quick brown fox jumped&quot;\nputs s.inject(:+) # =&gt; the quick brown fox jumped\n</code></pre>\n<p>But the definition of <code>each</code> is up to me, so instead of scanning for <em>every</em> character, I can scan for some <em>other</em> pattern! For example, I can scan for vowels instead:</p>\n<pre><code>class String\n  include Enumerable\n  def each\n    self.scan(/[aeiou]/) do |ch|\n      yield ch\n    end\n  end\nend\ns = &quot;the quick brown fox jumped&quot;\nputs s.inject(:+) # =&gt; euiooue\n</code></pre>\n<p>But let's not lame String by defining <code>each</code> in this curious way. Let's sluff this whole functionality off onto a custom class. Let's call it VowelFinder! Thus we end up with the code you started with.</p>\n"}], "owner": {"reputation": 85, "user_id": 8668262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3141cf94999c45c14debe36549bfc180?s=128&d=identicon&r=PG&f=1", "display_name": "amarjeet singh", "link": "https://stackoverflow.com/users/8668262/amarjeet-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1544450212, "creation_date": 1544331351, "last_edit_date": 1544412430, "question_id": 53689513, "link": "https://stackoverflow.com/questions/53689513/when-and-how-does-the-each-method-work", "title": "When and how does the `each` method work?", "body": "<p>I don't understand why <code>each</code> method is defined in this code:</p>\n\n<pre><code>class VowelFinder\n  include Enumerable\n\n  def initialize(string)\n    @string = string\n  end\n\n  def each\n    @string.scan(/[aeiou]/) do |vowel|\n      yield vowel\n    end\n  end\nend\n\nvf = VowelFinder.new(\"the quick brown fox jumped\")\nvf.inject(:+)\n# =&gt; \"euiooue\"\n</code></pre>\n\n<p>This code works, but not without <code>each</code>. Also, If I use <code>Array</code> and <code>Range</code> classes, and overwrite the <code>each</code> method in them, something different happens.</p>\n\n<p>When I create an object, and call <code>inject</code> method on it, when and how does the <code>each</code>  method work?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "ruby-on-rails-5", "rbenv"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1544324395, "post_id": 53688962, "comment_id": 94234458, "body": "It would help if you included the specific steps you took to get to where you are, not just including a link to a very long guide. That said, I never recommend rbenv and I always recommend RVM: Install RVM with <code>\\curl -sSL https:&#47;&#47;get.rvm.io | bash -s stable</code>; restart your shell; install Ruby with <code>rvm install 2.5.3</code>; install Rails with <code>gem install rails</code>. Proceed from there. (and I&#39;d recommend removing rbenv entirely before doing any of that)"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1544334250, "post_id": 53688962, "comment_id": 94235746, "body": "Try <code>bundle exec rails</code>, your paths may not be setup correctly"}, {"owner": {"reputation": 614, "user_id": 1313821, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2f96f7f08031975ca2add7bf193b32df?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/1313821/matt"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1544352116, "post_id": 53688962, "comment_id": 94238774, "body": "@anothermh sometimes suggesting a different tool is the right answer. Thanks!"}, {"owner": {"reputation": 2251, "user_id": 9785060, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IUduC.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/9785060/viktor"}, "edited": false, "score": 0, "creation_date": 1563961908, "post_id": 53688962, "comment_id": 100871211, "body": "I came across this problem myself, and <code>gem pristine --all</code> did work and it solved the issue, just want to thank you for mentioning that as an option and making sure anyone else should try that before looking for other solutions."}], "answers": [{"tags": [], "owner": {"reputation": 873, "user_id": 822274, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/09c9fa19a755167d54247df0d7feb05f?s=128&d=identicon&r=PG", "display_name": "Zakaria", "link": "https://stackoverflow.com/users/822274/zakaria"}, "is_accepted": false, "score": -1, "last_activity_date": 1544345114, "last_edit_date": 1544345114, "creation_date": 1544344749, "answer_id": 53690664, "question_id": 53688962, "link": "https://stackoverflow.com/questions/53688962/rbenv-rails-command-not-found-immediately-after-installing-rails-5-2-1/53690664#53690664", "title": "rbenv: rails: command not found immediately after installing rails 5.2.1", "body": "<p>You installed <code>ruby</code> using <code>rbenv</code> and now you can install gems. and <code>rails</code> is a gem for <code>ruby</code>. So, first to set the global version of Ruby you should create <code>.ruby-version</code> file in your home directory and write your installed ruby version (<code>2.5.3</code>) on it.</p>\n\n<p>and then you should run <code>gem install rails</code> command to install rails.</p>\n"}], "owner": {"reputation": 614, "user_id": 1313821, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2f96f7f08031975ca2add7bf193b32df?s=128&d=identicon&r=PG&f=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/1313821/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 694, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1544345114, "creation_date": 1544324093, "question_id": 53688962, "link": "https://stackoverflow.com/questions/53688962/rbenv-rails-command-not-found-immediately-after-installing-rails-5-2-1", "title": "rbenv: rails: command not found immediately after installing rails 5.2.1", "body": "<p>I have spent the whole day trying to upgrade from Rails 4x to 5.2.1. I was following <a href=\"https://gorails.com/setup/osx/10.12-sierra#homebrew\" rel=\"nofollow noreferrer\">this</a> guide for the upgrade and I was not able to upgrade successfully. </p>\n\n<p><strong>Issue:</strong>\nAfter \"successfully\" installing Rails 5 using:\n <code>ruby 2.5.3p105 (2018-10-18 revision 65156) [x86_64-darwin17]</code> and did <code>rails -v</code> I get:</p>\n\n<pre><code>rbenv: rails: command not found\n\nThe `rails' command exists in these Ruby versions:\n  2.2.0\n</code></pre>\n\n<p><strong>Things that I have tried:</strong>\n<code>gem pristine different gems</code>\n<code>gem pristine --all</code>\n<a href=\"https://stackoverflow.com/questions/29316792/rails-rbenv-rails-command-not-found\">this</a>\nand played around with paths but no luck so far. </p>\n\n<p>Any help would be greatly appreciated</p>\n\n<p>Additionally here is my gem environment:</p>\n\n<pre><code>RubyGems Environment:\n  - RUBYGEMS VERSION: 2.7.6\n  - RUBY VERSION: 2.5.3 (2018-10-18 patchlevel 105) [x86_64-darwin17]\n  - INSTALLATION DIRECTORY: /Users/Matt/.rvm/gems/ruby-2.2.0\n  - USER INSTALLATION DIRECTORY: /Users/Matt/.gem/ruby/2.5.0\n  - RUBY EXECUTABLE: /Users/Matt/.rbenv/versions/2.5.3/bin/ruby\n  - EXECUTABLE DIRECTORY: /Users/Matt/.rvm/gems/ruby-2.2.0/bin\n  - SPEC CACHE DIRECTORY: /Users/Matt/Tools/.rbenv/versions/2.2.0/lib/ruby/gems/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /Users/Matt/.rbenv/versions/2.5.3/etc\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-darwin-17\n  - GEM PATHS:\n     - /Users/Matt/.rvm/gems/ruby-2.2.0\n     - /Users/Matt/Tools/.rbenv/versions/2.2.0/lib/ruby/gems/2.2.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n     - \"gem\" =&gt; \"--no-document\"\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - /Users/Matt/.rbenv/versions/2.5.3/bin\n     - /usr/local/Cellar/rbenv/1.1.1/libexec\n     - /Users/Matt/.rbenv/plugins/ruby-build/bin\n     - /Users/Matt/.rbenv/shims\n     - /Users/Matt/.rbenv/bin\n     - /Users/Matt/anaconda/bin\n     - /Library/Frameworks/Python.framework/Versions/3.5/bin\n     - /Users/Matt/.rbenv/shims\n     - /Users/Matt/.rbenv/shims\n     - /usr/local/bin\n     - /usr/bin\n     - /bin\n     - /usr/sbin\n     - /sbin\n     - /opt/X11/bin\n</code></pre>\n"}]