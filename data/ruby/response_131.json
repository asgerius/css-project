[{"tags": ["ruby-on-rails", "ruby", "postgresql", "sidekiq"], "answers": [{"comments": [{"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1499905644, "post_id": 45069521, "comment_id": 77112216, "body": "I should have mentioned that the issue appears as soon as I took out the limit from <code>@network_hosts = network_hosts.limit(5)</code>"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1499905920, "post_id": 45069521, "comment_id": 77112284, "body": "According to <a href=\"https://stackoverflow.com/questions/16555206/arrays-in-ruby-take-vs-limit-vs-first\">this answer</a>, limit is not an <code>array</code> method. I still think you want to get rid of all that looping (n+1?) and sorting of the <code>array</code>."}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1499906255, "post_id": 45069521, "comment_id": 77112349, "body": "You&#39;re correct.  I was able to speed up the query and the server doesn&#39;t hang with this query <code>@network_hosts = NetworkHost.where(location_id: @company.locations.where.not(grace_enabled: true)).order(ip_address: :asc)</code> ... Now I just need to figure out how to cut down the query time more since it takes <code>380511ms</code> as of now.  Thanks for putting me on the right track.  My AR query skills need work!"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1499906443, "post_id": 45069521, "comment_id": 77112384, "body": "Out of curiosity, in your console, how many queries are being done as a result of this code block? Also, you should be able to do <code>location:</code> instead of <code>location_id:</code> as long as <code>NetworkHost belongs_to :location</code> ."}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1499906519, "post_id": 45069521, "comment_id": 77112407, "body": "It was tons... way too many to count by hand.  Is there a way that I can get an easy count?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1499906566, "post_id": 45069521, "comment_id": 77112418, "body": "Is it still tons? That would be surprising."}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1499906607, "post_id": 45069521, "comment_id": 77112431, "body": "It&#39;s probably because I need to clean up some other helper methods that also call the method to get the hosts, so it&#39;s running it over a few times."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1499906641, "post_id": 45069521, "comment_id": 77112441, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/149061/discussion-between-jvillian-and-godzilla74\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 1, "last_activity_date": 1499905163, "creation_date": 1499905163, "answer_id": 45069521, "question_id": 45069348, "link": "https://stackoverflow.com/questions/45069348/handling-a-massive-query-in-rails/45069521#45069521", "title": "Handling a massive query in Rails", "body": "<p>I believe you want to (1) get rid of all that looping (you've got a lot of queries going on) and (2) do your sorting with your AR query instead of in the array. </p>\n\n<p>Perhaps something like: </p>\n\n<pre><code>NetworkHost.\n  where(location: Location.where.not(grace_enabed: true).where(company: @company)).\n  order(ip_address: :asc).\n  tap do |network_hosts|\n    @network_hosts = network_hosts.limit(5)\n    @host_count = network_hosts.count\n  end\n</code></pre>\n\n<p>Something like that ought to do it in a single DB query. </p>\n\n<p>I had to make some assumptions about how your associations are set up and that you're looking for locations where grace_enabled isn't true (nil or false). </p>\n\n<p>I haven't tested this, so it may well be buggy. But, I think the direction is correct.</p>\n"}, {"comments": [{"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1499910367, "post_id": 45070147, "comment_id": 77113302, "body": "Does doing this keep the page from loading until all records have been batched in?"}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "reply_to_user": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1499911028, "post_id": 45070147, "comment_id": 77113447, "body": "As far as I&#39;m aware rails won&#39;t start sending any html until the view is finished rendering, but I admit, I&#39;ve never looked into how/when it starts sending stuff to the client. In my experience though, when you have queries with a ton of records being returned, it&#39;s not usually the queries that need to be run taking a while, it&#39;s trying to load and store that many records in memory and batching can usually give you some better performance"}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "reply_to_user": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1499911151, "post_id": 45070147, "comment_id": 77113475, "body": "and with the configurable batch size you can reduce the number of queries that need to be run if you know your server can handle, say, 10,000 records at a time without slowing down"}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1499914955, "post_id": 45070147, "comment_id": 77114306, "body": "instead of <code>@users</code> you would have <code>@network_hosts</code> and then do like <code>@network_hosts.find_each { |host| # render&#47;act on the host }</code>"}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 1, "last_activity_date": 1499910266, "creation_date": 1499910266, "answer_id": 45070147, "question_id": 45069348, "link": "https://stackoverflow.com/questions/45069348/handling-a-massive-query-in-rails/45070147#45070147", "title": "Handling a massive query in Rails", "body": "<p>Something to remember, Rails won't execute any SQL queries until the result of the query is actually needed. (I'll be using User instead of NetworkHost so I can show you the console output as I go)</p>\n\n<pre><code>@users = User.where(first_name: 'Random');nil # No query run\n=&gt; nil\n@users # query is now run because the results are needed (they are being output to the IRB window)\n#  User Load (0.4ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"first_name\" = $1 LIMIT $2  [[\"first_name\", \"Random\"], [\"LIMIT\", 11]]\n# =&gt; #&lt;ActiveRecord::Relation [...]&gt;\n@users = User.where(first_name: 'Random') # query will be run because the results are needed for the output into the IRB window   \n#  User Load (0.4ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"first_name\" = $1 LIMIT $2  [[\"first_name\", \"Random\"], [\"LIMIT\", 11]]\n# =&gt; #&lt;ActiveRecord::Relation [...]&gt;\n</code></pre>\n\n<p>Why is this important? It allows you to store the query you want to run in the instance variable and not execute it until you get to a view where you can use some of the nice methods of <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Batches.html#method-i-find_each\" rel=\"nofollow noreferrer\">ActiveRecord::Batches</a>. In particular, if you have some view (or export function, etc.) where you are iterating the <code>@network_hosts</code>, you can use <code>find_each</code>.</p>\n\n<pre><code># Controller\n@users = User.where(first_name: 'Random') # No query run\n\n# view\n@users.find_each(batch_size: 1) do |user|\n  puts \"User's ID is #{user.id}\"         \nend\n#  User Load (0.5ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"first_name\" = $1 ORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"first_name\", \"Random\"], [\"LIMIT\", 1]]\n#  User's ID is 1\n#  User Load (0.4ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"first_name\" = $1 AND (\"users\".\"id\" &gt; 1) ORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"first_name\", \"Random\"], [\"LIMIT\", 1]]\n#  User's ID is 2\n#  User Load (0.3ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"first_name\" = $1 AND (\"users\".\"id\" &gt; 2) ORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"first_name\", \"Random\"], [\"LIMIT\", 1]]\n# =&gt; nil\n</code></pre>\n\n<p>Your query is not executed until the view, where it will now load only 1,000 records (configurable) into memory at a time. Once it reaches the end of those 1,000 records, it will automatically run another query to fetch the next 1,000 records. So your memory is much more sane, at the cost of extra database queries (which are usually pretty quick)</p>\n"}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 1, "accepted_answer_id": 45069521, "answer_count": 2, "score": 0, "last_activity_date": 1499910266, "creation_date": 1499903929, "question_id": 45069348, "link": "https://stackoverflow.com/questions/45069348/handling-a-massive-query-in-rails", "title": "Handling a massive query in Rails", "body": "<p>What's the best way to handle a large result set with Rails and Postgres?  I didn't have a problem until today, but now I'm trying to return a 124,000 record object of <code>@network_hosts</code>, which has effectively DoS'd my development server.</p>\n\n<p>My activerecord orm isn't the prettiest, but I'm pretty sure cleaning it up isn't going to help in relation to performance.</p>\n\n<pre><code>@network_hosts = []\n@host_count = 0\n@company.locations.each do |l|\n  if  l.grace_enabled == nil || l.grace_enabled == false\n    l.network_hosts.each do |h|\n      @host_count += 1\n      @network_hosts.push(h)\n      @network_hosts.sort! { |x,y| x.ip_address &lt;=&gt; y.ip_address }\n      @network_hosts = @network_hosts.first(5)\n     end\n  end\nend\n</code></pre>\n\n<p>In the end, I need to be able to return <code>@network_hosts</code> to the controller for processing into the view.</p>\n\n<p>Is this something that Sidekiq would be able to help with, or is it going to be just as long?  If Sidekiq is the path to take, how do I handle not having the <code>@network_hosts</code> object upon page load since the job is running asyncronously?</p>\n"}, {"tags": ["ruby", "linux", "gsub"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1499903759, "post_id": 45069227, "comment_id": 77111731, "body": "Please show the string you wish to obtain; e.g., <code>&quot;MTH;2;VERDER;GHK&quot;</code> or <code>&quot;MTH;2&quot;</code>?"}, {"owner": {"reputation": 7, "user_id": 8298904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4658c7efc5867952415f81f378cd0da3?s=128&d=identicon&r=PG&f=1", "display_name": "diegoto", "link": "https://stackoverflow.com/users/8298904/diegoto"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1499903892, "post_id": 45069227, "comment_id": 77111770, "body": "i need &quot;MTH;2&quot; but i need to use a regex string generate from replaced string  because I have a problem with a multiple array that i omitted of the question because this could be more complicated this question"}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 1, "creation_date": 1499906377, "post_id": 45069227, "comment_id": 77112372, "body": "Why not <code>variablea.partition(&quot;;&quot;)[0]+&quot;;2&quot;</code>? It is <b>very</b> unclear what you are trying to do. Good sign why it is hard to do it. The first <code>gsub</code> you have <code>variableb.gsub(&quot;#{variablea}&quot;,...</code> simply produces an empty string."}], "owner": {"reputation": 7, "user_id": 8298904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4658c7efc5867952415f81f378cd0da3?s=128&d=identicon&r=PG&f=1", "display_name": "diegoto", "link": "https://stackoverflow.com/users/8298904/diegoto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1499911005, "creation_date": 1499903103, "last_edit_date": 1499911005, "question_id": 45069227, "link": "https://stackoverflow.com/questions/45069227/how-i-could-replace-in-gsub-ruby-using-a-replace-string-with-regex-command", "title": "how I could replace in gsub ruby using a replace string with regex command?", "body": "<p>I have a command:  </p>\n\n<pre><code>ruby -e ' variablea=\"MTH;VERDER;GHK\" ;variableb=\"MTH;VERDER;GHK\"; input=variableb.gsub(\"#{variablea}\".gsub(/.+?;(.*?);.+/,\"\\\\1.+\"),\"2\"); print input ' &gt;fffc\n</code></pre>\n\n<p>I need to replace <code>MTH;VERDER;GHK</code> using a regex command <code>VERDER.+</code> generated by substitution <code>\"MTH;VERDER;GHK\".gsub(/.+?;(.*?);.+/,\"\\\\1.+\")</code>  for obtain <code>MTH;2</code>.</p>\n\n<p>I understand that the question may be strange but what happens is that I have simplified my approach so as not to make it too complicated to understand.</p>\n\n<p>In summary I'm trying to use a <em>regex command</em> for replace originated from <em>a string will replaced</em>.</p>\n\n<p>My problem is that replace string is treated as string, I cannot use as a regex command.</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "activerecord", "rails-activerecord"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1499908547, "post_id": 45068941, "comment_id": 77112854, "body": "What do you mean by &quot;I need ActiveRecord approach&quot;? What are you trying to do with the result? Do you have a model? What does the real query look like?"}, {"owner": {"reputation": 2124, "user_id": 839787, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f330a19645ff0895459fce9ca810b3ce?s=128&d=identicon&r=PG", "display_name": "Stephane Paquet", "link": "https://stackoverflow.com/users/839787/stephane-paquet"}, "edited": false, "score": 0, "creation_date": 1499922696, "post_id": 45068941, "comment_id": 77116300, "body": "Have you tried ActiveModel Serializer JSON? You can find more information here <a href=\"http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.htm&zwnj;&#8203;l</a>"}, {"owner": {"reputation": 4888, "user_id": 1374563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/puhlO.gif?s=128&g=1", "display_name": "ole", "link": "https://stackoverflow.com/users/1374563/ole"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1499947984, "post_id": 45068941, "comment_id": 77132757, "body": "@muistooshort I just need something on the ActiveRecord level, maybe implement type casting based on PostgreSQL OID or something like that. And I want to get AR make it automatically."}], "answers": [{"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": false, "score": 0, "last_activity_date": 1499966208, "creation_date": 1499966208, "answer_id": 45087184, "question_id": 45068941, "link": "https://stackoverflow.com/questions/45068941/casting-json-with-activerecord-raw-query/45087184#45087184", "title": "Casting JSON with ActiveRecord raw query", "body": "<p>The low-level database interfaces tend to be a bit limited as everyone assumes that you're using an ORM. You could, however, trick ActiveRecord into doing the work for you as most of the database processing logic is in ActiveRecord itself.</p>\n\n<p>ActiveRecord queries generally work with the result of a query more than what the model or table has to say so you can say things like:</p>\n\n<pre><code>Model.select('2*3 as six')\n</code></pre>\n\n<p>and the <code>Model</code> instances that you get back will have <code>six</code> attributes.</p>\n\n<p>This chicanery also applies to <code>find_by_sql</code>:</p>\n\n<pre><code>&gt; Model.find_by_sql(%q{select '{\"a\":11}'::jsonb as pancakes}).first.pancakes\n=&gt; {\"a\"=&gt;11} \n&gt; Model.find_by_sql(%q{select '{\"a\":11}'::jsonb as pancakes}).first.pancakes.class\n=&gt; Hash\n</code></pre>\n"}], "owner": {"reputation": 4888, "user_id": 1374563, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/puhlO.gif?s=128&g=1", "display_name": "ole", "link": "https://stackoverflow.com/users/1374563/ole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 537, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1499966222, "creation_date": 1499901162, "last_edit_date": 1499966222, "question_id": 45068941, "link": "https://stackoverflow.com/questions/45068941/casting-json-with-activerecord-raw-query", "title": "Casting JSON with ActiveRecord raw query", "body": "<p>Is it possible to make ActiveRecord to cast JSON values from the raw queries somehow?</p>\n\n<p>Here's an example where I want to get <code>{\"x\": 1}</code> result to be casted as a Hash value, but I'm getting a String:</p>\n\n<pre><code>irb(main):017:0&gt; ActiveRecord::Base.connection.select_value(%{SELECT '{\"x\": 1}'::json})\n(0.2ms)  SELECT '{\"x\": 1}'::json\n=&gt; \"{\\\"x\\\": 1}\"\n\nirb(main):018:0&gt; ActiveRecord::Base.connection.select_value(%{SELECT '{\"x\": 1}'::json}).class\n(0.2ms)  SELECT '{\"x\": 1}'::json\n=&gt; String\n</code></pre>\n\n<p>Please, don't suggest <code>JSON.parse('{\"x\": 1}')</code>. I need ActiveRecord approach.</p>\n"}, {"tags": ["ruby", "rubygems", "cocoapods", "rbenv"], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 8127577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1416d55cdf2abd990854bde50801a71?s=128&d=identicon&r=PG&f=1", "display_name": "GW1732", "link": "https://stackoverflow.com/users/8127577/gw1732"}, "is_accepted": true, "score": 0, "last_activity_date": 1499967004, "creation_date": 1499967004, "answer_id": 45087412, "question_id": 45068809, "link": "https://stackoverflow.com/questions/45068809/cannot-upgrade-past-cocoapods-0-39-0/45087412#45087412", "title": "Cannot upgrade past CocoaPods 0.39.0", "body": "<p>The solution to my problem was:</p>\n\n<pre><code>sudo gem install -n /usr/local/bin cocoapods\n</code></pre>\n\n<p>This was the only way I could get rid of 0.39.0 and install the latest version of CocoaPods...</p>\n\n<p>I found this solution and an explanation for why this was a problem at the following link: </p>\n\n<p><a href=\"https://github.com/CocoaPods/CocoaPods/issues/3736\" rel=\"nofollow noreferrer\">https://github.com/CocoaPods/CocoaPods/issues/3736</a></p>\n\n<p>Hooray!</p>\n"}], "owner": {"reputation": 13, "user_id": 8127577, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1416d55cdf2abd990854bde50801a71?s=128&d=identicon&r=PG&f=1", "display_name": "GW1732", "link": "https://stackoverflow.com/users/8127577/gw1732"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 45087412, "answer_count": 1, "score": 0, "last_activity_date": 1499967004, "creation_date": 1499900399, "question_id": 45068809, "link": "https://stackoverflow.com/questions/45068809/cannot-upgrade-past-cocoapods-0-39-0", "title": "Cannot upgrade past CocoaPods 0.39.0", "body": "<p>I am trying to upgrade to CocoaPods 1.2.1 but cannot uninstall CocoaPods 0.39.0.</p>\n\n<p>I have reviewed numerous posts about this issue.  Evidently 0.39.0 caused a lot of problems.  I do not have enough reputation points to attach all the links I have reviewed but there are several StackOverFlow questions and GitHub Issues on the topic as v.0.39.0 evidently had some problems.  Here are two of the many posts I reviewed:</p>\n\n<p>STACKOVERFLOW QUESTIONS:\n<a href=\"https://stackoverflow.com/questions/25016382/cocoa-pods-need-to-completely-re-install/25021772#25021772\">Cocoa Pods need to completely re-install</a></p>\n\n<p>COCOAPODS BLOG POST ABOUT SHARDING and v.0.39.0:\n<a href=\"http://blog.cocoapods.org/Sharding/\" rel=\"nofollow noreferrer\">http://blog.cocoapods.org/Sharding/</a></p>\n\n<p>Here is my 'gem env' output:</p>\n\n<pre><code>RubyGems Environment:\n  - RUBYGEMS VERSION: 2.6.12\n  - RUBY VERSION: 2.3.1 (2016-04-26 patchlevel 112) [x86_64-darwin15]\n  - INSTALLATION DIRECTORY: \n/Users/johndoe/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0\n  - USER INSTALLATION DIRECTORY: /Users/johndoe/.gem/ruby/2.3.0\n  - RUBY EXECUTABLE: /Users/johndoe/.rbenv/versions/2.3.1/bin/ruby\n  - EXECUTABLE DIRECTORY: /Users/johndoe/.rbenv/versions/2.3.1/bin\n  - SPEC CACHE DIRECTORY: /Users/johndoe/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: \n/Users/johndoe/.rbenv/versions/2.3.1/etc\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-darwin-15\n  - GEM PATHS:\n     - /Users/johndoe/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0\n     - /Users/johndoe/.gem/ruby/2.3.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - /Users/johndoe/.rbenv/versions/2.3.1/bin\n     - /usr/local/Cellar/rbenv/1.1.1/libexec\n     - /usr/local/bin\n     - /usr/local/sbin\n     - /Users/johndoe/.rbenv/shims\n     - /Users/johndoe/.rbenv/shims\n     - /usr/local/bin\n     - /usr/bin\n     - /bin\n     - /usr/sbin\n     - /sbin\n     - /Applications/Postgres.app/Contents/Versions/latest/bin\n     - /Users/johndoe/.rbenv/versions/2.3.1/bin\n</code></pre>\n\n<p>And here is my 'gem list --local | grep cocoapods' output:</p>\n\n<pre><code>cocoapods (1.2.1)\ncocoapods-core (1.2.1, 1.2.0, 0.39.0)\ncocoapods-deintegrate (1.0.1)\ncocoapods-downloader (1.1.3, 0.9.3)\ncocoapods-plugins (1.0.0, 0.4.2)\ncocoapods-search (1.0.0, 0.1.0)\ncocoapods-stats (1.0.0, 0.6.2)\ncocoapods-trunk (1.2.0, 0.6.4)\ncocoapods-try (1.1.0, 0.5.1)\n</code></pre>\n\n<p>I have tried the following solutions:</p>\n\n<p>1) \"sudo gem uninstall cocoapods\" then \"sudo gem install cocoapods\" and closed and reopened the terminal after each step</p>\n\n<p>2) I modified my .bash_profile to make sure my echo $PATH includes the - EXECUTABLE DIRECTORY: from my gem env</p>\n\n<p>3) Tried \"gem pristine --all\"</p>\n\n<p>4) Made sure my home brew was up to date</p>\n\n<p>5) Reinstalled rbenv</p>\n\n<p>6) Tried various combinations of:</p>\n\n<pre><code>$ sudo rm -fr ~/Library/Caches/CocoaPods/\n$ sudo rm -fr ~/.cocoapods/repos/master/\n$ sudo rm -fr Pods/\n</code></pre>\n\n<p>and then uninstalled and reinstalled cocoapods\u2026</p>\n\n<p>7) Manually applied \u201csudo gem uninstall\u201d to each element in the output of my \u201cgem list --local | grep cocoapods\u201d and then \u2026 </p>\n\n<pre><code>rm -rf ~/.cocoapods/repos/master\nsudo gem install cocoapods\n</code></pre>\n\n<p>8) Tried\n    $ sudo gem update cocoapods</p>\n\n<p>9) I tried:\n    sudo gem install cocoapods:1.2.1</p>\n\n<p>but when I try </p>\n\n<pre><code>pod _1.2.1_ version \n</code></pre>\n\n<p>or </p>\n\n<pre><code>pod \u2014version\n</code></pre>\n\n<p>it says 0.39.0</p>\n\n<p>10) The output of \u201cwhich pod\u201d is:\n    /usr/local/bin/pod</p>\n\n<p>11) I cannot recall if the first time I tried \u201csudo gem uninstall cocoapods\u201d it gave me the option of specifically uninstalling 0.39.0.  I chose \u201cAll Versions\u201d nevertheless</p>\n\n<p>12) I tried \u201csudo chown -R \"$(whoami)\" /usr/local/Cellar/rbenv\" to make sure it wasn\u2019t a permissions issue</p>\n\n<p>13) I am using Mac OS Sierra 10.12.5</p>\n\n<p>Any help would be GREATLY appreciated!  Help!?!</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1499897964, "post_id": 45068085, "comment_id": 77110120, "body": "How about the value for each for <code>item:store&#47;</code>, any limitations/rules to consider?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1499898132, "post_id": 45068085, "comment_id": 77110175, "body": "Instead of inventing your own format why not use something like YAML, JSON, or something like that?"}, {"owner": {"reputation": 591, "user_id": 8142520, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/l2J1e.png?s=128&g=1", "display_name": "user8142520", "link": "https://stackoverflow.com/users/8142520/user8142520"}, "reply_to_user": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1499898632, "post_id": 45068085, "comment_id": 77110326, "body": "&quot;item:store/&quot; is fixed and thanks @Gerry"}], "answers": [{"tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 0, "last_activity_date": 1499903844, "last_edit_date": 1499903844, "creation_date": 1499902822, "answer_id": 45069180, "question_id": 45068085, "link": "https://stackoverflow.com/questions/45068085/whats-the-efficient-way-of-checking-the-format-of-file-by-ruby/45069180#45069180", "title": "What&#39;s the efficient way of checking the format of file by Ruby?", "body": "<p>Using regular expressions could be a good option since each line has a fixed format; and you almost got it, your regex just needed a few tweaks:</p>\n\n<pre><code>(?:#.*|^\"customer-id:\\d{5},item:store\\/\\D*\" *= *\\(\\d*, *\\d*\\); *(?:#.*)?)$\n</code></pre>\n\n<p>This is what was added to your current regex:</p>\n\n<ul>\n<li>Option to be a comment line (<code>#.*</code>) <em>or</em> (<code>|</code>) a regular line (everything after <code>|</code>).</li>\n<li>Check for possible spaces before and after <code>=</code>, after the comma (<code>,</code>) that separates the digits in parenthesis, and at the end of the line.</li>\n<li>Option to include another comment at the end of the line (<code>(?:#.*)?</code>).</li>\n</ul>\n\n<p>So just compare each line against this regex to check for the right format.</p>\n"}], "owner": {"reputation": 591, "user_id": 8142520, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/l2J1e.png?s=128&g=1", "display_name": "user8142520", "link": "https://stackoverflow.com/users/8142520/user8142520"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 45069180, "answer_count": 1, "score": 0, "last_activity_date": 1499903844, "creation_date": 1499896231, "last_edit_date": 1499898578, "question_id": 45068085, "link": "https://stackoverflow.com/questions/45068085/whats-the-efficient-way-of-checking-the-format-of-file-by-ruby", "title": "What&#39;s the efficient way of checking the format of file by Ruby?", "body": "<p>I have a file like:</p>\n\n<pre><code>Fruit.Store={\n    #blabla\n    \"customer-id:12345,item:store/apple\" = (1,2);   #blabla\n    \"customer-id:23456,item:store/banana\" = (1,3);   #blabla\n    \"customer-id:23456,item:store/watermelon\" = (1,4);\n    #blabla\n    \"customer-id:67890,item:store/watermelon\" = (1,6);\n    #The following two are unique\n    \"customer-id:0000,item:store/\" = (100, 100);\n    #\n    \"\" = (0,0)\n};\n</code></pre>\n\n<p>Except the comments, each line has the same format: <code>customer-id</code> and <code>item:store/</code> are fixed, and <code>customer-id</code> is a 5-digit number. The last two records are unique. How could I make sure the file is in the right format elegantly? I am thinking about using the flag for the first special line <code>Fruit.Store={</code> and than for the following lines split each line by \",\" and \"=\", and if the splitted line is not correct, match them with the last two records. I want to use Ruby for it. Any advice? Thank you. </p>\n\n<p>I am also thinking about using regular expression for the format, and wrote:</p>\n\n<pre><code>^\"customer:\\d{5},item:store\\/\\D*\"=\\(\\d*,\\d*\\);\n</code></pre>\n\n<p>but I want to combine these two situations (with comment and without comment):</p>\n\n<pre><code>^\"customer:\\d{5},item:store\\/\\D*\"=\\(\\d*,\\d*\\);$\n\n^\"customer:\\d{5},item:store\\/\\D*\"=\\(\\d*,\\d*\\);#.*$\n</code></pre>\n\n<p>how could I do it? Thanks </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "hyperlink", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1499896810, "post_id": 45068047, "comment_id": 77109681, "body": "The parameter is a hash? I don&#39;t think you can pass a hash like that."}, {"owner": {"reputation": 11994, "user_id": 1876508, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/CRCbp.png?s=128&g=1", "display_name": "user1876508", "link": "https://stackoverflow.com/users/1876508/user1876508"}, "reply_to_user": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1499896838, "post_id": 45068047, "comment_id": 77109696, "body": "The parameter is indeed a hash"}, {"owner": {"reputation": 11994, "user_id": 1876508, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/CRCbp.png?s=128&g=1", "display_name": "user1876508", "link": "https://stackoverflow.com/users/1876508/user1876508"}, "reply_to_user": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1499896872, "post_id": 45068047, "comment_id": 77109706, "body": "@Gerry Do you know where I can find the magic behind these tools in the API docs?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1499897122, "post_id": 45068047, "comment_id": 77109807, "body": "What error are you getting? I just tried passing a hash into one of my paths and it worked fine."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1499897314, "post_id": 45068047, "comment_id": 77109868, "body": "Unfortunatelly, no. I always refer to the guides, but this specific topic is not mentioned."}, {"owner": {"reputation": 11994, "user_id": 1876508, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/CRCbp.png?s=128&g=1", "display_name": "user1876508", "link": "https://stackoverflow.com/users/1876508/user1876508"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1499897340, "post_id": 45068047, "comment_id": 77109876, "body": "@jvillian Sorry, I had a typo. It turns out the second choice does not work though"}], "answers": [{"tags": [], "owner": {"reputation": 13091, "user_id": 385532, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/082cc70175616a7f63b134a741c5d6e3?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/385532/matt"}, "is_accepted": false, "score": 0, "last_activity_date": 1499935695, "creation_date": 1499935695, "answer_id": 45075727, "question_id": 45068047, "link": "https://stackoverflow.com/questions/45068047/how-can-i-pass-in-parameters-into-a-rails-edit-link/45075727#45075727", "title": "How can I pass in parameters into a rails edit link?", "body": "<p>This seems to work fine for me: </p>\n\n<p><code>&lt;%= link_to 'Edit', edit_object_path(object, foo: {bar: true}) %&gt;</code></p>\n\n<pre><code>Started GET \"/objects/1/edit?foo%5Bbar%5D=true\" for 127.0.0.1 at 2018-02-03 07:45:59 +0000\nProcessing by ObjectsController#edit as HTML\n  Parameters: {\"foo\"=&gt;{\"bar\"=&gt;\"true\"}, \"id\"=&gt;\"1\"}\n</code></pre>\n"}], "owner": {"reputation": 11994, "user_id": 1876508, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/CRCbp.png?s=128&g=1", "display_name": "user1876508", "link": "https://stackoverflow.com/users/1876508/user1876508"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1499935695, "creation_date": 1499896057, "last_edit_date": 1499897392, "question_id": 45068047, "link": "https://stackoverflow.com/questions/45068047/how-can-i-pass-in-parameters-into-a-rails-edit-link", "title": "How can I pass in parameters into a rails edit link?", "body": "<p>Suppose I have a model</p>\n\n<pre><code>class A &lt; ApplicationRecord\n  ...\nend\n</code></pre>\n\n<p>and in a form, I want to link to a specific instance using </p>\n\n<pre><code>edit_a_path\n</code></pre>\n\n<p>but I also want to submit a parameter, similar to </p>\n\n<pre><code>&lt;%= link_to \"New A\",\n    new_a_path(:b=&gt; {:id =&gt; @b.id})%&gt;\n</code></pre>\n\n<p>How can I do this? I tried</p>\n\n<pre><code>edit_a_path(:b=&gt; {:id =&gt; @b.id}, @a)\n</code></pre>\n\n<p>but I get an error. Also, <strong>bonus points</strong> if you reference the API documentation. I could not find an API reference for these methods.</p>\n\n<hr>\n\n<p>In my original code, I had a typo, but the correct way to do this is</p>\n\n<pre><code>edit_a_path(@a, :b=&gt; {:id =&gt; @b.id})\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "sqlite", "activerecord"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1499895399, "post_id": 45067876, "comment_id": 77109152, "body": "Does SQLite support JSON columns? This might be something you need to use <code>text</code> for on that database."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6257950, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fpZMC.jpg?s=128&g=1", "display_name": "Alec ", "link": "https://stackoverflow.com/users/6257950/alec"}, "edited": false, "score": 0, "creation_date": 1499896675, "post_id": 45067917, "comment_id": 77109625, "body": "Haha You&#39;re right! I usually start every project with --database=postgresql and must have forgotten this time.. Now just need to change back over.. Thanks!"}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "reply_to_user": {"reputation": 13, "user_id": 6257950, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fpZMC.jpg?s=128&g=1", "display_name": "Alec ", "link": "https://stackoverflow.com/users/6257950/alec"}, "edited": false, "score": 0, "creation_date": 1499897095, "post_id": 45067917, "comment_id": 77109797, "body": "@Alec If you almost always want that command line option running <code>rails new --help</code> down in the description mentions &quot;You can specify extra command-line arguments to be used every time     &#39;rails new&#39; runs in the .railsrc configuration file in your home directory.&quot;. Never done it, but seems like it&#39;d help accidentally forgetting an option"}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 0, "last_activity_date": 1499895494, "creation_date": 1499895494, "answer_id": 45067917, "question_id": 45067876, "link": "https://stackoverflow.com/questions/45067876/undefined-method-json-for-activerecord/45067917#45067917", "title": "Undefined method `json&#39; for #&lt;ActiveRecord:", "body": "<p>As far I know if you want to do this in SQLite3, you need to setup <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/AttributeMethods/Serialization/ClassMethods.html\" rel=\"nofollow noreferrer\">serialization</a> in the model. However, on that page it mentions,</p>\n\n<blockquote>\n  <p>Keep in mind that database adapters handle certain serialization tasks for you. For instance: json and jsonb types in PostgreSQL will be converted between JSON object/array syntax and Ruby Hash or Array objects transparently. There is no need to use serialize in this case.</p>\n</blockquote>\n\n<p>So I'm wondering if you were meaning to be using Postgres which looks like it might have a <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/PostgreSQL/ColumnMethods.html\" rel=\"nofollow noreferrer\">json method</a>.</p>\n"}], "owner": {"reputation": 13, "user_id": 6257950, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/fpZMC.jpg?s=128&g=1", "display_name": "Alec ", "link": "https://stackoverflow.com/users/6257950/alec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1521, "favorite_count": 0, "accepted_answer_id": 45067917, "answer_count": 1, "score": 0, "last_activity_date": 1499895494, "creation_date": 1499895250, "question_id": 45067876, "link": "https://stackoverflow.com/questions/45067876/undefined-method-json-for-activerecord", "title": "Undefined method `json&#39; for #&lt;ActiveRecord:", "body": "<p>I have a create_table migration that looks like this:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>class CreateOrders &lt; ActiveRecord::Migration[5.1]\n  def change\n    create_table :orders do |t|\n      t.string :state\n      t.string :coin_sku\n      t.monetize :amount, currency: { present: false }\n      t.json :payment\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n\n\n<p>Now when I run my rails db:migrate, it returns me an error message saying:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>rails aborted!\nStandardError: An error has occurred, this and all later migrations canceled:\n\nundefined method `json' for #&lt;ActiveRecord::ConnectionAdapters::SQLite3::TableDefinition:0x007f819fbb81b8&gt;\nDid you mean?  JSON\n</code></pre>\n\n\n\n<p>Has anyone ever had this problem before? Many thanks!!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "e-commerce", "stripe-payments"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1499895801, "post_id": 45067766, "comment_id": 77109308, "body": "your charges/new.html.erb is a little odd. Why is there a form_tag but no submit button?"}, {"owner": {"reputation": 79, "user_id": 6642140, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b8b510cacc3d1adc8b132654f56fc420?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/6642140/matt"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1499896265, "post_id": 45067766, "comment_id": 77109477, "body": "There is a working button that gets rendered to the page. It&#39;s using the Stripe API to create the form."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1499896466, "post_id": 45067766, "comment_id": 77109550, "body": "Is this $1 referring to something different than the <code>data-amount</code> attribute you&#39;re already providing? Why not <code>data-amount=&#39;1&#39;</code>?"}, {"owner": {"reputation": 79, "user_id": 6642140, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b8b510cacc3d1adc8b132654f56fc420?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/6642140/matt"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1499899260, "post_id": 45067766, "comment_id": 77110528, "body": "Because the data amount attribute reads it as cents. So $1.00 is 100 cents."}], "answers": [{"tags": [], "owner": {"reputation": 122, "user_id": 8232110, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d11740f2464eee430ee2c285b0750b37?s=128&d=identicon&r=PG&f=1", "display_name": "LemonDev", "link": "https://stackoverflow.com/users/8232110/lemondev"}, "is_accepted": true, "score": 1, "last_activity_date": 1499904130, "creation_date": 1499904130, "answer_id": 45069378, "question_id": 45067766, "link": "https://stackoverflow.com/questions/45067766/how-to-get-value-from-other-class-in-rails/45069378#45069378", "title": "How to get value from other class in Rails", "body": "<p>In your charges_controller, change the amount:</p>\n\n<pre><code>@amount = @cart.total_price * 735\n</code></pre>\n\n<p>And your charges/new.html.erb:</p>\n\n<pre><code>&lt;span&gt;Amount: &lt;%= number_to_currency(@cart.total_price * 7.35) %&gt;&lt;/span&gt;\n</code></pre>\n\n<p>and</p>\n\n<pre><code>data-amount=\"&lt;%= @cart.total_price * 735 %&gt;\"\n</code></pre>\n\n<p>Let me know if that helps.</p>\n"}], "owner": {"reputation": 79, "user_id": 6642140, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b8b510cacc3d1adc8b132654f56fc420?s=128&d=identicon&r=PG&f=1", "display_name": "matt", "link": "https://stackoverflow.com/users/6642140/matt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 45069378, "answer_count": 1, "score": 0, "last_activity_date": 1499904130, "creation_date": 1499894720, "question_id": 45067766, "link": "https://stackoverflow.com/questions/45067766/how-to-get-value-from-other-class-in-rails", "title": "How to get value from other class in Rails", "body": "<p>I'm not sure if I am phrasing this question correctly. I am using the Stripe API for a Harry Potter themed Rails online store demo app. I followed the Stripe boilerplate code, so I currently have the amount set at a hardcoded value of $1.00. In my shopping cart, there is a method that displays the total cost of all items in the cart. That works fine, but I can't figure out how to pass that value to the Charges controller so that it sets that as the amount of the payment.</p>\n\n<p>I'm fairly new to Rails, so any helpful explanations would be greatly appreciated.</p>\n\n<p>Here is my charges/new.html.erb file:</p>\n\n<pre><code>&lt;%= form_tag charges_path do %&gt;\n  &lt;article&gt;\n    &lt;% if flash[:error].present? %&gt;\n      &lt;div id=\"error_explanation\"&gt;\n        &lt;p&gt;&lt;%= flash[:error] %&gt;&lt;/p&gt;\n      &lt;/div&gt;\n    &lt;% end %&gt;\n    &lt;label class=\"amount\"&gt;\n      &lt;span&gt;Amount: $1.00&lt;/span&gt;\n    &lt;/label&gt;\n  &lt;/article&gt;\n\n  &lt;script src=\"https://checkout.stripe.com/checkout.js\" class=\"stripe-button\"\n          data-key=\"&lt;%= Rails.configuration.stripe[:publishable_key] %&gt;\"\n          data-description=\"A month's subscription\"\n          data-amount=\"100\"\n          data-locale=\"auto\"&gt;&lt;/script&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Here is my Charges controller:</p>\n\n<pre><code>class ChargesController &lt; ApplicationController\n    include CurrentCart\n    before_action :set_cart, only: [:new, :create]\n\n    def new\n    end\n\n    def create #METHOD IS CALLED AFTER PAYMENT IS MADE\n     # Amount in cents\n     @amount = 100\n\n     customer = Stripe::Customer.create(\n       :email =&gt; params[:stripeEmail],\n       :source  =&gt; params[:stripeToken]\n     )\n\n     charge = Stripe::Charge.create(\n       :customer    =&gt; customer.id,\n       :amount      =&gt; @amount,\n       :description =&gt; 'Witch or Wizard',\n       :currency    =&gt; 'usd'\n     )\n\n     Cart.destroy(session[:cart_id]) \n\n    rescue Stripe::CardError =&gt; e\n      flash[:error] = e.message\n      redirect_to new_charge_path\n    end \n\nend\n</code></pre>\n\n<p>Here is my carts/show.html.erb file:</p>\n\n<pre><code>&lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\n\n&lt;h2&gt;My Cart&lt;/h2&gt;\n&lt;table class=\"table table-responsive table-striped\"&gt;\n    &lt;thead&gt;\n        &lt;tr&gt;\n            &lt;th&gt;Item&lt;/th&gt;\n            &lt;th&gt;Quantity&lt;/th&gt;\n            &lt;th&gt;Total Price in Galleons&lt;/th&gt;\n            &lt;th&gt;Total Price in Muggle Currency&lt;/th&gt;\n        &lt;/tr&gt;\n        &lt;tbody&gt;\n            &lt;%= render(@cart.line_items) %&gt;\n            &lt;tr&gt;\n                &lt;td&gt;Total&lt;/td&gt;\n                &lt;td&gt;&lt;%= number_to_currency(@cart.total_price * 7.35) %&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n        &lt;/tbody&gt;\n    &lt;/thead&gt;\n&lt;/table&gt;\n\n&lt;br&gt;\n\n&lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-3\"&gt;\n        &lt;div class=\"row\"&gt;\n            &lt;div class=\"col-md-4\"&gt;\n                &lt;%= link_to 'Back', products_path, :class =&gt; 'btn btn-primary whiteText' %&gt;\n            &lt;/div&gt;\n            &lt;div class=\"col-md-4\"&gt;\n                &lt;%= link_to \"Checkout\", new_charge_path, :class =&gt; 'btn btn-success whiteText' %&gt;\n\n            &lt;/div&gt;\n            &lt;div class=\"col-md-4\"&gt;\n                &lt;%= link_to 'Empty Cart', @cart, method: :delete, data: {confirm: 'Are you sure you want to empty your cart?'}, :class =&gt; 'btn btn-danger whiteText' %&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-9\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Here is my Carts controller: </p>\n\n<pre><code>class CartsController &lt; ApplicationController\n  before_action :set_cart, only: [:show, :edit, :update, :destroy]\n  rescue_from ActiveRecord::RecordNotFound, with: :invalid_cart\n\n  # GET /carts\n  # GET /carts.json\n  def index\n    @carts = Cart.all\n  end\n\n  # GET /carts/1\n  # GET /carts/1.json\n  def show\n  end\n\n  # GET /carts/new\n  def new\n    @cart = Cart.new\n  end\n\n  # GET /carts/1/edit\n  def edit\n  end\n\n  # POST /carts\n  # POST /carts.json\n  def create\n    @cart = Cart.new(cart_params)\n\n    respond_to do |format|\n      if @cart.save\n        format.html { redirect_to @cart, notice: 'Cart was successfully created.' }\n        format.json { render :show, status: :created, location: @cart }\n      else\n        format.html { render :new }\n        format.json { render json: @cart.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /carts/1\n  # PATCH/PUT /carts/1.json\n  def update\n    respond_to do |format|\n      if @cart.update(cart_params)\n        format.html { redirect_to @cart, notice: 'Cart was successfully updated.' }\n        format.json { render :show, status: :ok, location: @cart }\n      else\n        format.html { render :edit }\n        format.json { render json: @cart.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /carts/1\n  # DELETE /carts/1.json\n  def destroy\n    @cart.destroy if @cart.id == session[:cart_id]\n    session[:cart_id] = nil\n    respond_to do |format|\n      format.html { redirect_to root_path, notice: 'Cart was emptied.' }\n      format.json { head :no_content }\n    end\n  end\n\n  def update_quantity\n    @line_item.update_attribute(:quantity)\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_cart\n      @cart = Cart.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def cart_params\n      params.fetch(:cart, {})\n    end\n\n    def invalid_cart\n      logger.error \"Attempt to access invalid cart #{params[:id]}\"\n      redirect_to root_path, notice: 'Invalid cart'\n    end\nend\n</code></pre>\n\n<p>Here is my Cart model:</p>\n\n<pre><code>class Cart &lt; ApplicationRecord\n    has_many :line_items, dependent: :destroy\n\n    def add_product(product)\n        current_item = line_items.find_by(product_id: product.id)\n        if current_item\n            current_item.quantity += 1\n        else\n            current_item = line_items.build(product_id: product.id)\n        end\n        current_item\n    end\n\n    def total_price\n       line_items.to_a.sum {|item| item.total_price} \n    end\n\n    def convert_to_muggle(galleons)\n        line_items.to_a.sum {|item| item.convert_to_muggle} \n    end    \n\nend\n</code></pre>\n\n<p>And here is my routes file:</p>\n\n<pre><code>Rails.application.routes.draw do\n\n\n  resources :charges\n  resources :orders\n  resources :line_items\n  resources :carts\n  devise_for :users\n  match 'users/:id' =&gt; 'users#destroy', :via =&gt; :delete, :as =&gt; :admin_destroy_user\n  resources :users, only: [:index, :show, :edit, :update]\n\n  root 'products#index'\n\n  resources :products\n\n  controller :products do\n    post '/products/destroy' =&gt; 'products#destroy', as: :destroy\n    get '/products/add_to_cart' =&gt; 'products#add_to_cart', as: :add_to_cart\n    get '/products/remove_from_cart' =&gt; 'products#remove_from_cart', as: :remove_from_cart\n  end\n\n  controller :line_items do \n    post '/line_items/increase_quantity' =&gt; 'line_items#increase_quantity', as: :increase_quantity\n  end\n\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "memory-leaks", "garbage-collection"], "owner": {"reputation": 1100, "user_id": 4524789, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/844f22aa3a74fa8145406ea89fb77491?s=128&d=identicon&r=PG&f=1", "display_name": "Jack Collins", "link": "https://stackoverflow.com/users/4524789/jack-collins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 422, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1499898222, "creation_date": 1499894666, "last_edit_date": 1499898222, "question_id": 45067753, "link": "https://stackoverflow.com/questions/45067753/ruby-rails-string-memory-leak-database-strings-are-worst-offenders", "title": "Ruby/Rails string memory leak - database strings are worst offenders?", "body": "<p>I've been battling what appears to be a memory leak in my Rails application for some time now. I <em>think</em> I've tracked part of the problem to a certain class, but I am seeing confusing results from <code>memory-profiler</code>. </p>\n\n<p>Short background - the <code>AuditMessage</code> class constructs user-friendly strings based on the data in an audit log record (from the <code>audited</code> gem). This message is constructed when the audit record is created so it is run very often. My first test was to <a href=\"https://github.com/michaelherold/benchmark-memory\" rel=\"nofollow noreferrer\">benchmark-memory</a> to confirm that auditing and message generation was the problem: </p>\n\n<pre><code>Full audit with AuditMessage:   91 M memsize, 8.7 M retained\nWithout AuditMessage:           59 M memsize, 4.5 M retained\nWithout auditing at all:        33.8 M memsize; 2.9 M retained\n</code></pre>\n\n<p>That tells me that the auditing and <code>AuditMessage</code> are problematic. I created a short test file based on <a href=\"https://samsaffron.com/archive/2015/03/31/debugging-memory-leaks-in-ruby\" rel=\"nofollow noreferrer\">this debugging article</a>. Essentially, I'm generating 100 messages, running Garbage Collection, checking memory, and repeating.</p>\n\n<pre><code>ENV['RAILS_ENV'] = 'production'\nrequire 'objspace'\nrequire 'memory_profiler'\nrequire File.expand_path(\"../config/environment\", __FILE__)\n\ndef rss\n  `ps -eo pid,rss | grep #{Process.pid} | awk '{print $2}'`.to_i\nend\n\nAuditMessage.new(AuditEntry.first).text_message\n\nGC.start\nputs \"rss: #{rss} live objects #{GC.stat[:heap_live_slots]}\"\n\nMemoryProfiler.start\nAuditEntry.limit(1000).in_groups_of(100) do |entries|\n  entries.each do |a|\n    AuditMessage.new(a).text_message\n  end\n  GC.start\n  puts \"rss: #{rss} live objects #{GC.stat[:heap_live_slots]}, total allocated: #{GC.stat[:total_allocated_objects]}\"\n\nend\nputs \"FINAL: rss: #{rss} live objects #{GC.stat[:heap_live_slots]}, total allocated: #{GC.stat[:total_allocated_objects]}\"\n\nreport = MemoryProfiler.stop\nreport.pretty_print\n</code></pre>\n\n<p>I believe the <code>GC.stat</code> results confirm this is a memory leak because the <code>heap_live_slots</code> continue to increase. Please correct me if I'm wrong:</p>\n\n<pre><code>rss: 181688 live objects 572803\nrss: 273484 live objects 631408, total allocated: 5307067\nrss: 275464 live objects 654608, total allocated: 5743585\nrss: 275468 live objects 677286, total allocated: 6180094\nrss: 275468 live objects 698909, total allocated: 6618187\nrss: 275476 live objects 722677, total allocated: 7066883\nrss: 275476 live objects 745892, total allocated: 7509013\nrss: 278512 live objects 771616, total allocated: 7955413\nrss: 278992 live objects 794085, total allocated: 8368117\nrss: 278992 live objects 815336, total allocated: 8763087\nrss: 314976 live objects 852800, total allocated: 9319171\nFINAL: rss: 315884 live objects 852790, total allocated: 9319200\n</code></pre>\n\n<p>I expected that the results from <code>MemoryProfiler</code> would show string leaks from my <code>AuditMessage</code> class. However, the results point towards <code>database_statments</code> and other activerecord internals. For example, the largest retained string objects are from activerecord: </p>\n\n<pre><code>Retained String Report\n-----------------------------------\n   886  \"User\"\n   886  /Users/jackcollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activerecord-5.0.0.1/lib/active_record/connection_adapters/postgresql/database_statements.rb:111\n\n   782  \"Activity\"\n   778  /Users/jackcollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activerecord-5.0.0.1/lib/active_record/connection_adapters/postgresql/database_statements.rb:111\n     1  /Users/jackcollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activemodel-5.0.0.1/lib/active_model/naming.rb:148\n     1  /Users/jackcollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-5.0.0.1/lib/active_support/inflector/methods.rb:124\n     1  /Users/jackcollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-5.0.0.1/lib/active_support/inflector/methods.rb:69\n     1  /Users/jackcollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/concurrent-ruby-1.0.5/lib/concurrent/collection/map/non_concurrent_map_backend.rb:24\n</code></pre>\n\n<p>By location also points to ActiveRecord and ActiveModel:</p>\n\n<pre><code>retained memory by location\n-----------------------------------\n1128000  /Users/jackcollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activerecord-5.0.0.1/lib/active_record/result.rb:117\n 943634  /Users/jackcollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activerecord-5.0.0.1/lib/active_record/connection_adapters/postgresql/database_statements.rb:111\n  45718  /Users/jackcollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activemodel-5.0.0.1/lib/active_model/attribute_methods.rb:383\n  20072  /Users/jackcollins/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activerecord-5.0.0.1/lib/active_record/connection_adapters/postgresql/schema_statements.rb:238\n</code></pre>\n\n<p>And finally: </p>\n\n<pre><code>retained memory by gem\n-----------------------------------\n2286378  activerecord-5.0.0.1\n  54151  activesupport-5.0.0.1\n  51342  activemodel-5.0.0.1\n</code></pre>\n\n<p>How should I interpret this data? Has anyone else run into a similar issue with string memory leaks in Ruby/Rails?</p>\n"}, {"tags": ["ruby", "loops"], "comments": [{"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 5, "creation_date": 1499891358, "post_id": 45066869, "comment_id": 77107198, "body": "So what is your question?"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1499895052, "post_id": 45066869, "comment_id": 77108990, "body": "Maybe you have to replace the <code>nil</code>s with name-strings in the hashes."}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1499905020, "post_id": 45066869, "comment_id": 77112067, "body": "If you want to fill in the names: <code>&gt; beatles.zip([&quot;John&quot;, &quot;Ringo&quot;, &quot;Paul&quot;, &quot;George&quot;]).map {|h, n| h[:name]=n; h}</code>"}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1499892487, "last_edit_date": 1499892487, "creation_date": 1499892125, "answer_id": 45067158, "question_id": 45066869, "link": "https://stackoverflow.com/questions/45066869/ruby-loops-need-some-explaining/45067158#45067158", "title": "Ruby Loops need some explaining", "body": "<pre><code>beatles.class         #=&gt; Array\nbeatles.length        #=&gt; 4\nbeatles[0]            #=&gt; {:name=&gt;nil, :nickname=&gt;\"The Smart One\"}\nbeatles[1]            #=&gt; {:name=&gt;nil, :nickname=&gt;\"The Funny One\"}\nbeatles[2]            #=&gt; {:name=&gt;nil, :nickname=&gt;\"The Cute One\"}\nbeatles[3]            #=&gt; {:name=&gt;nil, :nickname=&gt;\"The Quiet One\"}\nbeatles[4]            #=&gt; nil\n\nh = beatles[2]        #=&gt; {:name=&gt;nil, :nickname=&gt;\"The Cute One\"}\nh.class               #=&gt; Hash\nh[:name]              #=&gt; nil \nh[:nickname]          #=&gt; \"The Cute One\"\nbeatles[2][:name]     #=&gt; nil\nbeatles[2][:nickname] #=&gt; \"The Cute One\"\n\ni = 0    \nwhile i &lt; beatles.length\n  puts \"i=#{i}\"\n  puts \"Hi, I'm #{beatles[i][:name]}.  I'm #{beatles[i][:nickname]}!\"\n  i += 1\nend\n\ni=0\nHi, I'm .  I'm The Smart One!\ni=1\nHi, I'm .  I'm The Funny One!\ni=2\nHi, I'm .  I'm The Cute One!\ni=3\nHi, I'm .  I'm The Quiet One!\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 8293130, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10154952247190805/picture?type=large", "display_name": "Matthew Lombana", "link": "https://stackoverflow.com/users/8293130/matthew-lombana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1499892487, "creation_date": 1499890995, "last_edit_date": 1499891331, "question_id": 45066869, "link": "https://stackoverflow.com/questions/45066869/ruby-loops-need-some-explaining", "title": "Ruby Loops need some explaining", "body": "<p>I have this problem and have been having issues with loops and how the pertain to this statement. If someone could walk me through it.</p>\n\n<pre><code>ruby\nbeatles = [\n  {\n    name: nil,\n    nickname: \"The Smart One\"\n  },\n  {\n    name: nil,\n    nickname: \"The Funny One\"\n  },\n  {\n    name: nil,\n    nickname: \"The Cute One\"\n  },\n  {\n    name: nil,\n    nickname: \"The Quiet One\"\n  }\n]\n\ni = 0\nwhile i &lt; beatles.length\n  # Your code here!\n  i += 1\nend\n\ni = 0\nwhile i &lt; beatles.length\n  puts \"Hi, I'm #{beatles[i][:name]}.  I'm #{beatles[i][:nickname]}!\"\n  i += 1\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "reactjs", "authentication", "devise"], "answers": [{"tags": [], "owner": {"reputation": 1223, "user_id": 3012473, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/gSYLc.png?s=128&g=1", "display_name": "buncis", "link": "https://stackoverflow.com/users/3012473/buncis"}, "is_accepted": false, "score": 1, "last_activity_date": 1499921230, "last_edit_date": 1499921230, "creation_date": 1499920515, "answer_id": 45071473, "question_id": 45066659, "link": "https://stackoverflow.com/questions/45066659/devise-token-auth-will-not-authenticate-for-put-route/45071473#45071473", "title": "Devise Token Auth Will Not Authenticate for PUT Route", "body": "<p>are you using :authenticate_user! from devise? </p>\n\n<p>if yes, it can't work for api\nyou need create your own helper method</p>\n\n<p>you can put it in your api application_controller/model_controller </p>\n\n<p>or cretae a module and include it wherever you need</p>\n\n<p>then change the before action into authenticate_with_token!</p>\n\n<pre><code>  def current_user_api\n    @current_user ||= User.find_by(auth_token: request.headers['Authorization'])\n  end\n\n  def user_signed_in_api?\n    current_user_api.present?\n  end\n\n  def authenticate_with_token!\n    render json: { errors: \"Not authenticated\" },\n      status: :unathorized unless user_signed_in_api? \n  end\n</code></pre>\n\n<p>this book chapter 5 will help you \n<a href=\"http://apionrails.icalialabs.com/book/chapter_five\" rel=\"nofollow noreferrer\">http://apionrails.icalialabs.com/book/chapter_five</a></p>\n\n<p>and for <code>Can't verify CSRF token authenticity.</code></p>\n\n<p>you can put this in your application controller </p>\n\n<pre><code>  protect_from_forgery with: :null_session\n  skip_before_action :verify_authenticity_token, if: :json_request?\n\n  protected\n    def json_request?\n      request.format.json?\n    end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 371, "user_id": 7573223, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIuXz.jpg?s=128&g=1", "display_name": "SMAG", "link": "https://stackoverflow.com/users/7573223/smag"}, "is_accepted": false, "score": 0, "last_activity_date": 1606767404, "creation_date": 1606767404, "answer_id": 65080537, "question_id": 45066659, "link": "https://stackoverflow.com/questions/45066659/devise-token-auth-will-not-authenticate-for-put-route/65080537#65080537", "title": "Devise Token Auth Will Not Authenticate for PUT Route", "body": "<p>If you want to use <code>:authenticate_user!</code> or similar, then make sure to pass in all the necessary parameters:</p>\n<ul>\n<li>access-token</li>\n<li>expiry</li>\n<li>token-type</li>\n<li>uid</li>\n<li>client</li>\n</ul>\n<p>It looks like you were missing <code>expiry</code> and <code>token-type</code>.</p>\n<p>This will result in the user being authenticated and the <code>current_user</code> being set as expected, assuming the token and credentials are valid.</p>\n<p>Note: these headers my need to be exposed in your CORS configuration:</p>\n<pre><code>Rails.application.config.middleware.insert_before 0, Rack::Cors do\n  allow do\n    origins '*'\n    resource &quot;*&quot;,\n         expose: %w[access-token expiry token-type uid client],\n         headers: :any,\n         methods: :any\n  end\nend\n</code></pre>\n<p>Another Note: If you mounted your devise endpoint inside the api, then you will need to call a different <code>:authenticate_user!</code> method.</p>\n<p>example:</p>\n<pre><code>namespace :api, defaults: { format: 'json' } do\n  namespace :v1 do\n    mount_devise_token_auth_for 'User', at: 'auth'\n\n    # API routing and resources\n  end\nend\n</code></pre>\n<p>Then you would need to call <code>:authenticate_api_v1_user!</code> instead.</p>\n<p>example:</p>\n<pre><code> class Api::V1::ApiController &lt; ApplicationController\n   before_action :authenticate_api_v1_user!\n end\n</code></pre>\n"}], "owner": {"reputation": 531, "user_id": 4859818, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/26c8b231855a82a9de1aa2819b5f8899?s=128&d=identicon&r=PG&f=1", "display_name": "Jared", "link": "https://stackoverflow.com/users/4859818/jared"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 655, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1606767404, "creation_date": 1499890103, "question_id": 45066659, "link": "https://stackoverflow.com/questions/45066659/devise-token-auth-will-not-authenticate-for-put-route", "title": "Devise Token Auth Will Not Authenticate for PUT Route", "body": "<p>Hi thanks for viewing my question. I'm building out a Rails API which works with a React front end on a different server. I'm using the Devise Token Auth gem, and am able to successfully log in, log out, and make get requests for multiple resources without any problems. To handle the changing tokens I am updating the headers on each request. </p>\n\n<p>The problem I am running into is when I try to make a PUT request to update a resource, in which case I get a 401. Full error message:</p>\n\n<pre><code>Started PUT \"/api/stores/3/orders/1\" for 127.0.0.1 at 2017-07-12 16:00:05 -0400\nProcessing by Api::OrdersController#update as HTML\n  Parameters: {\"order\"=&gt;{\"id\"=&gt;1, \"provider_notes\"=&gt;\"tailor notes\"}, \"headers\"=&gt;{\"client\"=&gt;\"YVa0NIlxAdm6BLQXk0xeJw\", \"access-token\"=&gt;\"bNc9BB0TgICIJzGfM4H_6A\", \"uid\"=&gt;\"joe@joestailor.com\"}, \"store_id\"=&gt;\"3\", \"id\"=&gt;\"1\"}\nCan't verify CSRF token authenticity.\nFilter chain halted as :authenticate_user! rendered or redirected\nCompleted 401 Unauthorized in 1ms (Views: 0.1ms | ActiveRecord: 0.0ms)\n</code></pre>\n\n<p>After checking, the access-token printed in the error message is in fact the token i got from the last request, so it should be good. Here's the controller I am working with. I'm not able to get passed the authenticate_user! before action. </p>\n\n<pre><code>class Api::OrdersController &lt; ApplicationController\n  before_action :authenticate_user!\n  before_action :set_order, only: [:show, :update]\n\n  def index\n    render :json =&gt; current_user.store.open_orders.as_json(include: [:customer], methods: [:alterations_count])\n  end\n\n  def show\n    render :json =&gt; @order.as_json(include: [:customer, :items =&gt; {include: :item_type}])\n  end\n\n  def update\n    if @order.update(order_params)\n      render :json =&gt; @order\n      .as_json(include: [:customer, :items =&gt; {include: :item_type}])\n    else\n      byebug\n    end\n  end\n\n  private\n\n  def set_order\n    @order = Order.find(params[:id])\n  end\n\n  def order_params\n    if current_user.tailor?\n      params.require(order).permit(:requester_notes, :arrived, :fulfilled)\n    end\n  end\nend\n</code></pre>\n\n<p>Any reason why a put request might work differently than the get requests I've been using (for this same controller)? Any advice to get around this with the Devise Auth Token would be awesome. Thanks. </p>\n"}, {"tags": ["c#", "ruby", "xamarin.forms", "ui-testing", "calabash-android"], "answers": [{"tags": [], "owner": {"reputation": 6630, "user_id": 3453898, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MjQi5.png?s=128&g=1", "display_name": "pixel", "link": "https://stackoverflow.com/users/3453898/pixel"}, "is_accepted": false, "score": 0, "last_activity_date": 1499965668, "creation_date": 1499965668, "answer_id": 45087070, "question_id": 45065970, "link": "https://stackoverflow.com/questions/45065970/calabash-android-ui-test-detect-if-xamarin-forms-entry-field-has-focus/45087070#45087070", "title": "Calabash-android UI test - Detect if Xamarin.Forms Entry field has focus", "body": "<p>Figured this out.  Not exactly detecting field got focus but detecting that the keyboard is displayed which was my original question.</p>\n\n<p>When field is focused, keyboard is displayed and that is what I wanted to test in my Calabash test.</p>\n\n<p>So, going to Calabash API for Android <a href=\"http://calabashapi.xamarin.com/android/\" rel=\"nofollow noreferrer\">http://calabashapi.xamarin.com/android/</a>, I see TextHelpers contains keyboard_visible? which can be called from ruby definitions to check for keyboard visibility.</p>\n"}], "owner": {"reputation": 6630, "user_id": 3453898, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MjQi5.png?s=128&g=1", "display_name": "pixel", "link": "https://stackoverflow.com/users/3453898/pixel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499965668, "creation_date": 1499887376, "last_edit_date": 1499894497, "question_id": 45065970, "link": "https://stackoverflow.com/questions/45065970/calabash-android-ui-test-detect-if-xamarin-forms-entry-field-has-focus", "title": "Calabash-android UI test - Detect if Xamarin.Forms Entry field has focus", "body": "<p>My code will focus on Xamarin.Forms Entry field when its ContentView is displayed.  This will then automatically focus on an Xamarin.Forms Entry field on an Android device.</p>\n\n<p>Now, I would like to write a UI test to confirm that the field has been auto focused.</p>\n\n<p>How can I detect that an field has been autofocused in a Calabash/ruby test?</p>\n"}, {"tags": ["arrays", "ruby", "trim"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1499888543, "post_id": 45065892, "comment_id": 77105786, "body": "This sounds like an &quot;<a href=\"https://meta.stackexchange.com/q/66377/153968\">XY Problem</a>&quot;. I&#39;d recommend showing what is generating the arrays as it sounds like that should be what you&#39;re asking about."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 2, "last_activity_date": 1499887480, "creation_date": 1499887480, "answer_id": 45066002, "question_id": 45065892, "link": "https://stackoverflow.com/questions/45065892/how-do-i-trim-my-array-of-strings/45066002#45066002", "title": "How do I &quot;trim&quot; my array of strings?", "body": "<p>Here's a sort of clunky solution that involves testing the first element and removing it with <code>shift</code>, while doing the same with the last and <code>pop</code>:</p>\n\n<pre><code>list = [nil, \"\", \"a\", \"\", \"b\", nil, \"\", nil]\n\nwhile ((!list.first or !list.first.match(/\\S/)) and list.any?)\n  list.shift\nend\n\nwhile ((!list.last or !list.last.match(/\\S/)) and list.any?)\n  list.pop\nend\n\nlist\n# =&gt; [\"a\", \"\", \"b\"]\n</code></pre>\n\n<p>Remember that empty strings are still logically true in Ruby, as anything that isn't literally <code>nil</code> or <code>false</code> will be. If you're in Ruby on Rails or are using ActiveSupport you'll have access to the <code>.present?</code> method which is a more rigorous test, requiring the string to be defined and contain at least one non-space character.</p>\n"}, {"comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 1, "creation_date": 1499889619, "post_id": 45066024, "comment_id": 77106350, "body": "<code>array.drop_while(&amp;blank).reverse_each.drop_while(&amp;blank)</code> is slightly better IMO"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "reply_to_user": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1499889690, "post_id": 45066024, "comment_id": 77106382, "body": "@steenslag, why is what you suggest better?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1499889776, "post_id": 45066024, "comment_id": 77106424, "body": "@steenslag, I forgot it exists (:"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1499889808, "post_id": 45066024, "comment_id": 77106450, "body": "@Natalia, with it you are not actually reversing the array. You just traverse it in reversed order."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 1, "last_activity_date": 1499887568, "creation_date": 1499887568, "answer_id": 45066024, "question_id": 45065892, "link": "https://stackoverflow.com/questions/45065892/how-do-i-trim-my-array-of-strings/45066024#45066024", "title": "How do I &quot;trim&quot; my array of strings?", "body": "<pre><code>array.\n drop_while { |element| element.nil? || element.empty? }.\n reverse.\n drop_while { |element| element.nil? || element.empty? }.\n reverse\n</code></pre>\n\n<p>If you want to remove the repetition:</p>\n\n<pre><code>blank = -&gt;(element) { element.nil? || element.empty? }\n\narray.drop_while(&amp;blank).reverse.drop_while(&amp;blank).reverse\n</code></pre>\n\n<hr>\n\n<p>If you are using active support, you can do it directly:</p>\n\n<pre><code>array.drop_while(&amp;:blank?).reverse.drop_while(&amp;:blank?).reverse\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "edited": false, "score": 1, "creation_date": 1499892182, "post_id": 45066855, "comment_id": 77107596, "body": "Just an FYI if the array is [], the above gives an error."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1499893180, "post_id": 45066855, "comment_id": 77108081, "body": "Good point. It was also a problem if the array contains nothing other than <code>nil</code> and <code>&#39;&#39;</code>. I fixed it."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1499893121, "last_edit_date": 1499893121, "creation_date": 1499890924, "answer_id": 45066855, "question_id": 45065892, "link": "https://stackoverflow.com/questions/45065892/how-do-i-trim-my-array-of-strings/45066855#45066855", "title": "How do I &quot;trim&quot; my array of strings?", "body": "<pre><code>ndx = array.index { |e| !e.to_s.empty? }\narray[ndx..array.rindex { |e| !e.to_s.empty? }] unless ndx.nil?\n  #=&gt; [\"a\", \"\", \"b\"]\n</code></pre>\n\n<p>If <code>e #=&gt; nil</code>, <code>e.to_s #=&gt; ''</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1066, "favorite_count": 0, "accepted_answer_id": 45066024, "answer_count": 3, "score": 0, "last_activity_date": 1499893121, "creation_date": 1499887138, "last_edit_date": 1499889765, "question_id": 45065892, "link": "https://stackoverflow.com/questions/45065892/how-do-i-trim-my-array-of-strings", "title": "How do I &quot;trim&quot; my array of strings?", "body": "<p>With Ruby, I'm curious about how to remove the leading and ending elements of an array of strings if those elements are blank (either <code>nil</code> or the empty string).  If I have an array of</p>\n\n<pre><code>[\"\", \"a\", \"\", \"b\", nil, \"\"]\n</code></pre>\n\n<p>I would want the result to be</p>\n\n<pre><code>[\"a\", \"\", \"b\"]\n</code></pre>\n\n<p>I found a partial way to remove the right non-present elements of an array using</p>\n\n<pre><code>arr.pop until arr.last || arr.empty?\n</code></pre>\n\n<p>But that seems to only work with trimming the <code>nil</code> elements of the end of my array.  It doesn't address empty strings or removing the blank elements from the front of an array.</p>\n"}, {"tags": ["ruby", "recursion", "dynamic-programming", "memoization"], "answers": [{"comments": [{"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 0, "creation_date": 1499894116, "post_id": 45067067, "comment_id": 77108524, "body": "<code>a = [1,2]; h = {a=&gt;7}; h[a] + h[a.dup] + h[[1,2]]</code>"}, {"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 0, "creation_date": 1499894158, "post_id": 45067067, "comment_id": 77108551, "body": "also <code>.to_json</code> is not &quot;free&quot;."}, {"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 0, "creation_date": 1499936871, "post_id": 45067067, "comment_id": 77124740, "body": "Using array as memoization key produces huge amount of Array instances. Not only for stored keys, but also every time when you read from memo. Its ok for very small data in usual app, but not in sport algo. BTW minus is not mine."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": -1, "last_activity_date": 1499895546, "last_edit_date": 1499895546, "creation_date": 1499891764, "answer_id": 45067067, "question_id": 45065879, "link": "https://stackoverflow.com/questions/45065879/effective-way-to-memoize-a-combination-of-two-numbers/45067067#45067067", "title": "Effective way to memoize a combination of two numbers", "body": "<p><s>Since identical arrays have different object ids, you couldn't just put the values as an array in a hash key. However</s> you can convert to string to make a simple lookup structure, for example converting to YAML/JSON</p>\n\n<pre><code>require 'json'\n\nmemo = {}\ndef memoize(*args, &amp;blk)\n  memo[args.to_json] ||= blk.call\nend\ndef num_ways(amount, index)\n  memoize(amount, index) do\n    # original method body\n  end\nend\n</code></pre>\n\n<hr>\n\n<p><em>edit</em></p>\n\n<p>nevermind, I guess I am wrong about the need to use <code>to_json</code>. You could just use <code>args</code> inside <code>memoize</code> and not <code>args.to_json</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1360, "user_id": 4430977, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1268ab423eed6c864e3c43514a55efa5?s=128&d=identicon&r=PG&f=1", "display_name": "segue_segway", "link": "https://stackoverflow.com/users/4430977/segue-segway"}, "edited": false, "score": 0, "creation_date": 1500345343, "post_id": 45075745, "comment_id": 77281868, "body": "So creating a key of an array in a hash will auto generate multiple hash keys? My concern with using a 2D array is that it can be very wasteful and unnecessary for space"}, {"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "reply_to_user": {"reputation": 1360, "user_id": 4430977, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1268ab423eed6c864e3c43514a55efa5?s=128&d=identicon&r=PG&f=1", "display_name": "segue_segway", "link": "https://stackoverflow.com/users/4430977/segue-segway"}, "edited": false, "score": 0, "creation_date": 1500360736, "post_id": 45075745, "comment_id": 77287302, "body": "1. <code>memo = {}; ... memo[ [amount, index] ] = num_ways(...</code> will produce huge amount of <code>Array</code> objects. It is bad if <i>speed</i> does matter. You can test it with Ruby&#39;s <code>benchmark</code>."}, {"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "reply_to_user": {"reputation": 1360, "user_id": 4430977, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1268ab423eed6c864e3c43514a55efa5?s=128&d=identicon&r=PG&f=1", "display_name": "segue_segway", "link": "https://stackoverflow.com/users/4430977/segue-segway"}, "edited": false, "score": 0, "creation_date": 1500360916, "post_id": 45075745, "comment_id": 77287411, "body": "2. 2D array (my example) is not <i>wasteful</i> in this <i>particular</i> case and I described <i>why</i>. You can inspect <code>memo</code> at the finish and find 0(<b>zero</b>) <i>unused</i> 2D array slots. So I claimed 2D array as best choice in this case."}, {"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "reply_to_user": {"reputation": 1360, "user_id": 4430977, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1268ab423eed6c864e3c43514a55efa5?s=128&d=identicon&r=PG&f=1", "display_name": "segue_segway", "link": "https://stackoverflow.com/users/4430977/segue-segway"}, "edited": false, "score": 0, "creation_date": 1500361541, "post_id": 45075745, "comment_id": 77287772, "body": "@Sunny You can improve your algo skills at Leetcode. Here is me: <a href=\"https://leetcode.com/p1366/\" rel=\"nofollow noreferrer\">leetcode.com/p1366</a>"}], "tags": [], "owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1499941510, "last_edit_date": 1499941510, "creation_date": 1499935733, "answer_id": 45075745, "question_id": 45065879, "link": "https://stackoverflow.com/questions/45065879/effective-way-to-memoize-a-combination-of-two-numbers/45075745#45075745", "title": "Effective way to memoize a combination of two numbers", "body": "<p>I believe there is no common way to implement memoization when you solve algo task. Because of speed. Way you have to choose depends on you algo, input data and so on.\nFew imperative rules:</p>\n\n<ul>\n<li>avoid creation of many data structure instances: <code>h = {}; h[ [1,2] ] \n= 3</code> will produce <code>COINS.size</code> * <code>amount</code> <code>Array</code>s just for keys</li>\n<li>use <code>Array</code> for <em>contiguous</em> data and <code>Hash</code> for <em>gapped</em> one</li>\n<li>use <code>Hash</code> instead of <code>Array</code> when you can't predict data size</li>\n<li>create <code>Array</code> with needed values when you can predict your<br>\n<em>contiguous</em> data size</li>\n</ul>\n\n<p>Using that rules, memoization (just in your case, where <code>COINS.size</code> &lt;&lt; <code>amount</code> and both datas are <em>contiguous</em>) might look like:</p>\n\n<pre><code>COINS = [25, 10, 5, 1]\n\ndef count_ways(amount)\n  # memo is just COINS.size + 1 Array instances\n  # a[0] = 1 instead of return 1 if amount == 0\n  memo = Array.new(COINS.size){ Array.new(amount).tap{ |a| a[0] = 1 } }\n  num_ways(amount, 0, memo)\nend\n\ndef num_ways(amount, index, memo)\n  return 0 if index &gt;= COINS.size || amount &lt; 0\n\n  memo[index][amount] ||=\n    num_ways(amount - COINS[index], index, memo) +\n    num_ways(amount, index + 1, memo)\nend\n</code></pre>\n\n<p>P.S. <code>dynamic-programming</code> tag is unnecessary :)</p>\n"}], "owner": {"reputation": 1360, "user_id": 4430977, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1268ab423eed6c864e3c43514a55efa5?s=128&d=identicon&r=PG&f=1", "display_name": "segue_segway", "link": "https://stackoverflow.com/users/4430977/segue-segway"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 237, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1499941510, "creation_date": 1499887085, "question_id": 45065879, "link": "https://stackoverflow.com/questions/45065879/effective-way-to-memoize-a-combination-of-two-numbers", "title": "Effective way to memoize a combination of two numbers", "body": "<p>I'm working on an algorithm to count the number of ways to build 100 cents given an infinite amount of pennies, dimes, nickels, and quarters. </p>\n\n<p>I ended up coming with the above (which AFAIK works):</p>\n\n<pre><code>def count_ways(amount)\n  num_ways(amount, 0)\nend\n\ndef num_ways(amount, index)\n  return 1 if amount == 0\n  return 0 if index &gt;= COINS.length || amount &lt; 0\n  num_ways(amount - COINS[index], index) +\n  num_ways(amount, index + 1)\nend\n</code></pre>\n\n<p>Now, I'd like to memoize this algorithm. An effective way I've found to think about memoizing is to consider what inputs do we pass into this function repeatedly. In this case, I'd like to memoize the combination of amount &amp; index parameters.</p>\n\n<p>Typically when I have two parameters, I build a two D array as a way to memoize but here that makes a lot less sense. Consequently, how can you memoize off of these two parameters? Does it make sense to do something like this? </p>\n\n<pre><code>def count_ways(amount)\n  memo = Hash.new { |h, k| h[k] = [] }\n  num_ways(amount, 0, memo)\nend\n\ndef num_ways(amount, index, memo)\n  return 1 if amount == 0\n  return 0 if index &gt;= COINS.length || amount &lt; 0\n  memo[amount - COINS[index], index] ||= num_ways(amount - COINS[index], index)\n  memo[amount, index + 1] ||= num_ways(amount, index + 1)\n\n  memo[amount - COINS[index], index] +\n    memo[amount, index + 1]\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sockets", "ruby-on-rails-4", "websocket"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1500775297, "post_id": 45065622, "comment_id": 77485234, "body": "Is Puma super important? <code>iodine</code> provides similar features (multi-threading, multi-processing) as well as Native Websockets (much faster than any Ruby implementation I tested against), static file service etc&#39;... I&#39;m biased, since I&#39;m the author, but I think it&#39;s a better fit for websockets (I think it&#39;s also faster, but you can test that yourself)."}], "answers": [{"tags": [], "owner": {"reputation": 2545, "user_id": 1783642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc69b60352cb9a411cb033b26bd8136e?s=128&d=identicon&r=PG", "display_name": "Puhlze", "link": "https://stackoverflow.com/users/1783642/puhlze"}, "is_accepted": false, "score": 0, "last_activity_date": 1499892389, "creation_date": 1499892389, "answer_id": 45067237, "question_id": 45065622, "link": "https://stackoverflow.com/questions/45065622/using-web-sockets-in-a-rails-4-application-with-puma/45067237#45067237", "title": "Using Web Sockets in a Rails 4 application with Puma", "body": "<p>Based on this <a href=\"https://github.com/puma/puma/issues/589\" rel=\"nofollow noreferrer\">issue</a> it sounds like the best bet is <a href=\"https://github.com/ngauthier/tubesock\" rel=\"nofollow noreferrer\">tubesock</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6655656"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 356, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499892389, "creation_date": 1499886066, "last_edit_date": 1499886357, "question_id": 45065622, "link": "https://stackoverflow.com/questions/45065622/using-web-sockets-in-a-rails-4-application-with-puma", "title": "Using Web Sockets in a Rails 4 application with Puma", "body": "<p>I'm working in a Rails <code>4.2.7</code> application and need to use WebSockets. Unfortunately I can't upgrade to Rails 5 and use Action Cable for this.</p>\n\n<p>The application is using Puma in production, I say this because I found some gems that are meant to be used for Web Sockets but they work just in <code>Thin</code> app server but not with <code>Puma</code> app server.</p>\n\n<p>Is there any easy solution for this?</p>\n\n<p>Specifically what I need to do is trigger an event to my clients (browsers in this case) every time my model is updated</p>\n\n<pre><code>class MyModel &lt; ActiveRecord::Base\n  after_commit :notify_users, if: :some_condition\n\n  def notify_users\n    # Trigger a web socket event to my clients here\n  end\nend\n</code></pre>\n\n<p>I have tried with <a href=\"https://github.com/websocket-rails/websocket-rails\" rel=\"nofollow noreferrer\">https://github.com/websocket-rails/websocket-rails</a>, and the message gets sent according to the logs, but I'm not receiving it on the browser, and unfortunately it seems that the gems is not maintained anymore.</p>\n\n<p>Is there a solutions that might work for this situation? Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "apartment-gem"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1499882603, "post_id": 45064599, "comment_id": 77102629, "body": "Define <i>not working</i>. What do you expect it to do? What does it do instead? Is there a error message? What does it day?"}, {"owner": {"reputation": 2545, "user_id": 1783642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc69b60352cb9a411cb033b26bd8136e?s=128&d=identicon&r=PG", "display_name": "Puhlze", "link": "https://stackoverflow.com/users/1783642/puhlze"}, "edited": false, "score": 0, "creation_date": 1499885932, "post_id": 45064599, "comment_id": 77104472, "body": "The documentation adds the middleware in the <code>config&#47;application.rb</code> file and uses a constant not a string. Maybe one of those two things is creating an issue? <a href=\"https://github.com/influitive/apartment#switch-on-subdomain\" rel=\"nofollow noreferrer\">github.com/influitive/apartment#switch-on-subdomain</a>. Is your <code>apartment.rb</code> in <code>config&#47;initializers</code>?"}, {"owner": {"reputation": 460, "user_id": 2184246, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/us1R6.jpg?s=128&g=1", "display_name": "Tauqeer Ahmad", "link": "https://stackoverflow.com/users/2184246/tauqeer-ahmad"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1499933332, "post_id": 45064599, "comment_id": 77122278, "body": "@spickermann By not working I meant that when I hit url www.example.com I should try to find any tenant rather it should use public database."}, {"owner": {"reputation": 460, "user_id": 2184246, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/us1R6.jpg?s=128&g=1", "display_name": "Tauqeer Ahmad", "link": "https://stackoverflow.com/users/2184246/tauqeer-ahmad"}, "reply_to_user": {"reputation": 2545, "user_id": 1783642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc69b60352cb9a411cb033b26bd8136e?s=128&d=identicon&r=PG", "display_name": "Puhlze", "link": "https://stackoverflow.com/users/1783642/puhlze"}, "edited": false, "score": 0, "creation_date": 1499935005, "post_id": 45064599, "comment_id": 77123429, "body": "@Puhlze <code>apartment.rb</code> is in <code>config&#47;initializers</code>.  constant or string it does worked for me."}], "owner": {"reputation": 460, "user_id": 2184246, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/us1R6.jpg?s=128&g=1", "display_name": "Tauqeer Ahmad", "link": "https://stackoverflow.com/users/2184246/tauqeer-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499882182, "creation_date": 1499882182, "question_id": 45064599, "link": "https://stackoverflow.com/questions/45064599/excluded-subdomains-doesnt-seems-to-be-working", "title": "excluded_subdomains doesn&#39;t seems to be working", "body": "<h1>config/initializers/apartment/subdomain_exclusions.rb</h1>\n\n<p><code>Apartment::Elevators::Subdomain.excluded_subdomains = ['www']</code></p>\n\n<p>Above doesn't seems to be working. I'm using rails 5.0.2.</p>\n\n<p>in apartment.rb I have this </p>\n\n<pre><code>Apartment::Elevators::Subdomain.excluded_subdomains = ['www', 'admin']\nRails.application.config.middleware.use'Apartment::Elevators::Subdomain'\n</code></pre>\n\n<p>To test on local i have added hosts</p>\n\n<pre><code>127.0.0.1 www.example.com admin.example.com\n</code></pre>\n\n<p>on www.example.com I got error <code>Apartment::TenantNotFound</code>\nWhat I'm missing here. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 4769, "user_id": 1242470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f1b4b172a8f873efe1179ca140f1eb?s=128&d=identicon&r=PG", "display_name": "Mate Solymosi", "link": "https://stackoverflow.com/users/1242470/mate-solymosi"}, "edited": false, "score": 0, "creation_date": 1499882282, "post_id": 45064527, "comment_id": 77102446, "body": "This calls <code>strftime</code> for every day in the date range, which could be slow if the range is large."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 4769, "user_id": 1242470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f1b4b172a8f873efe1179ca140f1eb?s=128&d=identicon&r=PG", "display_name": "Mate Solymosi", "link": "https://stackoverflow.com/users/1242470/mate-solymosi"}, "edited": false, "score": 0, "creation_date": 1499882878, "post_id": 45064527, "comment_id": 77102771, "body": "@M&#225;t&#233;Solymosi Yes, you are correct, although the difference will be almost negligible (unless, of course, it is used to query hundreds of years)."}, {"owner": {"reputation": 4769, "user_id": 1242470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f1b4b172a8f873efe1179ca140f1eb?s=128&d=identicon&r=PG", "display_name": "Mate Solymosi", "link": "https://stackoverflow.com/users/1242470/mate-solymosi"}, "edited": false, "score": 0, "creation_date": 1499883072, "post_id": 45064527, "comment_id": 77102886, "body": "True, that&#39;s not a realistic scenario."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 4769, "user_id": 1242470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f1b4b172a8f873efe1179ca140f1eb?s=128&d=identicon&r=PG", "display_name": "Mate Solymosi", "link": "https://stackoverflow.com/users/1242470/mate-solymosi"}, "edited": false, "score": 0, "creation_date": 1499885039, "post_id": 45064527, "comment_id": 77103972, "body": "@M&#225;t&#233;Solymosi But still takes twice the time, so its good to note it."}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": false, "score": 3, "last_activity_date": 1499883023, "last_edit_date": 1499883023, "creation_date": 1499881902, "answer_id": 45064527, "question_id": 45064402, "link": "https://stackoverflow.com/questions/45064402/get-unique-array-of-month-and-years-between-two-dates/45064527#45064527", "title": "Get unique array of month and years between two dates", "body": "<p>You could create an array of dates, then use <code>strftime</code> to set the correct format, and <code>uniq</code> to avoid repeated values, like this:</p>\n\n<pre><code>(first..last).map{ |date| date.strftime(\"%b %Y\") }.uniq\n#=&gt; [\"Dec 2016\", \"Jan 2017\", \"Feb 2017\", \"Mar 2017\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4166, "user_id": 1943093, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/88673a3a34877f3f32364a52dc349470?s=128&d=identicon&r=PG", "display_name": "imrichardcole", "link": "https://stackoverflow.com/users/1943093/imrichardcole"}, "edited": false, "score": 0, "creation_date": 1499882125, "post_id": 45064550, "comment_id": 77102350, "body": "not quite what I&#39;m after, this solution includes the day which I don&#39;t need, just the month and the year i.e Dec 2016"}, {"owner": {"reputation": 4769, "user_id": 1242470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f1b4b172a8f873efe1179ca140f1eb?s=128&d=identicon&r=PG", "display_name": "Mate Solymosi", "link": "https://stackoverflow.com/users/1242470/mate-solymosi"}, "reply_to_user": {"reputation": 4166, "user_id": 1943093, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/88673a3a34877f3f32364a52dc349470?s=128&d=identicon&r=PG", "display_name": "imrichardcole", "link": "https://stackoverflow.com/users/1943093/imrichardcole"}, "edited": false, "score": 0, "creation_date": 1499882174, "post_id": 45064550, "comment_id": 77102377, "body": "Updated my answer."}], "tags": [], "owner": {"reputation": 4769, "user_id": 1242470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f1b4b172a8f873efe1179ca140f1eb?s=128&d=identicon&r=PG", "display_name": "Mate Solymosi", "link": "https://stackoverflow.com/users/1242470/mate-solymosi"}, "is_accepted": false, "score": 1, "last_activity_date": 1499882155, "last_edit_date": 1499882155, "creation_date": 1499881984, "answer_id": 45064550, "question_id": 45064402, "link": "https://stackoverflow.com/questions/45064402/get-unique-array-of-month-and-years-between-two-dates/45064550#45064550", "title": "Get unique array of month and years between two dates", "body": "<p>Assuming these variables:</p>\n\n<pre><code>first = Date.new(2016, 12, 2)\nlast = Date.new(2017, 3, 1)\n</code></pre>\n\n<p>A one-liner solution:</p>\n\n<pre><code>(first.beginning_of_month..last).map { |d| d.strftime(\"%b %Y\") if d.day == 1 }.compact\n#=&gt; [\"Dec 2016\", \"Jan 2017\", \"Feb 2017\", \"Mar 2017\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 2, "last_activity_date": 1499883002, "last_edit_date": 1499883002, "creation_date": 1499882484, "answer_id": 45064684, "question_id": 45064402, "link": "https://stackoverflow.com/questions/45064402/get-unique-array-of-month-and-years-between-two-dates/45064684#45064684", "title": "Get unique array of month and years between two dates", "body": "<p>Not a pretty one-liner, but also doesn't walk through each day individually so should be a fair bit faster for large ranges.</p>\n\n<pre><code>first = Date.new(2016, 12, 2)\nlast = Date.new(2017, 3, 1)\n\ndates = []\nwhile first.beginning_of_month &lt; last.end_of_month\n  dates &lt;&lt; first.strftime(\"%b %Y\")\n\n  first = first.next_month\nend\n\nputs dates.inspect\n# =&gt; [\"Dec 2016\", \"Jan 2017\", \"Feb 2017\", \"Mar 2017\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4320, "user_id": 3922099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZHBBc.jpg?s=128&g=1", "display_name": "Dan Kreiger", "link": "https://stackoverflow.com/users/3922099/dan-kreiger"}, "is_accepted": false, "score": 1, "last_activity_date": 1499882541, "creation_date": 1499882541, "answer_id": 45064694, "question_id": 45064402, "link": "https://stackoverflow.com/questions/45064402/get-unique-array-of-month-and-years-between-two-dates/45064694#45064694", "title": "Get unique array of month and years between two dates", "body": "<pre class=\"lang-rb prettyprint-override\"><code>start_date=Date.new(2016,12,2)\nend_date=Date.new(2017,3,1)\n\n(start_date..end_date).map{ |d| d.strftime(\"%b %Y\") }.uniq\n =&gt; [\"Dec 2016\", \"Jan 2017\", \"Feb 2017\", \"Mar 2017\"] \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1499884388, "post_id": 45064898, "comment_id": 77103584, "body": "Wow, this is by far the fastest solution. Nice!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1499885141, "post_id": 45064898, "comment_id": 77104036, "body": "I made a few changes to my answer. Initially I used <code>&quot;%s %s&quot; % [Date::ABBR_MONTHNAMES[f.month], f.year]</code>, but after seeing that everyone else used <code>strftime(&quot;%b %Y&quot;)</code> I recognized the folly of my ways."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 4, "last_activity_date": 1499884968, "last_edit_date": 1499884968, "creation_date": 1499883350, "answer_id": 45064898, "question_id": 45064402, "link": "https://stackoverflow.com/questions/45064402/get-unique-array-of-month-and-years-between-two-dates/45064898#45064898", "title": "Get unique array of month and years between two dates", "body": "<pre><code>require 'date'\n\ndef doit(first, last)\n  (12*last.year + last.month - 12*first.year - first.month).times.map do\n    first.strftime(\"%b %Y\")\n    first = first &gt;&gt; 1\n  end\nend\n\nfirst = Date.parse('Fri, 02 Dec 2016')\nlast  = Date.parse('Wed, 01 Mar 2017')\ndoit(first, last)\n  #=&gt; [\"Dec 2016\", \"Jan 2017\", \"Feb 2017\", \"Mar 2017\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4166, "user_id": 1943093, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/88673a3a34877f3f32364a52dc349470?s=128&d=identicon&r=PG", "display_name": "imrichardcole", "link": "https://stackoverflow.com/users/1943093/imrichardcole"}, "edited": false, "score": 0, "creation_date": 1499886062, "post_id": 45065233, "comment_id": 77104542, "body": "awesome, thanks for going to the extra effort to prove which is the most efficient!"}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": false, "score": 3, "last_activity_date": 1499885350, "last_edit_date": 1499885350, "creation_date": 1499884481, "answer_id": 45065233, "question_id": 45064402, "link": "https://stackoverflow.com/questions/45064402/get-unique-array-of-month-and-years-between-two-dates/45065233#45065233", "title": "Get unique array of month and years between two dates", "body": "<p>Since user asks for <strong><em>most efficient way</em></strong> (and just for fun) here's a simple benchmark of the proposed solutions:</p>\n\n<pre><code>require 'benchmark'\n\nBenchmark.bmbm(10) do |bm|\n  bm.report('Cary') do\n    first = Date.new(1000, 1, 1)\n    last  = Date.new(2100, 1, 1)\n\n    def doit(first, last)\n      (12*last.year + last.month - 12*first.year - first.month).times.map do\n        first.strftime(\"%b %Y\")\n        first = first &gt;&gt; 1\n      end\n    end\n\n    doit(first, last)\n  end\n\n  bm.report('Simple Lime') do\n    first = Date.new(1000, 1, 1)\n    last  = Date.new(2100, 1, 1)\n\n    dates = []\n\n    while first.beginning_of_month &lt; last.end_of_month\n      dates &lt;&lt; first.strftime(\"%b %Y\")\n\n      first = first.next_month\n    end\n  end\n\n  bm.report('M\u00e1t\u00e9') do\n    first = Date.new(1000, 1, 1)\n    last  = Date.new(2100, 1, 1)\n\n    (first.beginning_of_month..last).map { |d| d.strftime(\"%b %Y\") if d.day == 1 }.compact\n  end\n\n  bm.report('Gerry/Dan') do\n    first = Date.new(1000, 1, 1)\n    last  = Date.new(2100, 1, 1)\n\n    (first..last).map{ |date| date.strftime(\"%b %Y\") }.uniq\n  end\nend\n</code></pre>\n\n<p>Results:</p>\n\n<pre><code>Rehearsal -----------------------------------------------\nCary          0.020000   0.000000   0.020000 (  0.025968)\nSimple Lime   0.190000   0.000000   0.190000 (  0.192860)\nM\u00e1t\u00e9          0.460000   0.020000   0.480000 (  0.481839)\nGerry/Dan     0.810000   0.020000   0.830000 (  0.835931)\n-------------------------------------- total: 1.520000sec\n\n                  user     system      total        real\nCary          0.020000   0.000000   0.020000 (  0.024871)\nSimple Lime   0.150000   0.000000   0.150000 (  0.150696)\nM\u00e1t\u00e9          0.390000   0.010000   0.400000 (  0.398637)\nGerry/Dan     0.710000   0.010000   0.720000 (  0.711155)\n</code></pre>\n"}], "owner": {"reputation": 4166, "user_id": 1943093, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/88673a3a34877f3f32364a52dc349470?s=128&d=identicon&r=PG", "display_name": "imrichardcole", "link": "https://stackoverflow.com/users/1943093/imrichardcole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 0, "accepted_answer_id": 45064898, "answer_count": 6, "score": 2, "last_activity_date": 1499885350, "creation_date": 1499881501, "question_id": 45064402, "link": "https://stackoverflow.com/questions/45064402/get-unique-array-of-month-and-years-between-two-dates", "title": "Get unique array of month and years between two dates", "body": "<p>I have two <code>Date</code> objects, for example:</p>\n\n<pre><code>first = Fri, 02 Dec 2016 \nlast = Wed, 01 Mar 2017\n</code></pre>\n\n<p>What is the most efficient way to get a unique array of months and years between them?  In this case I'm after:</p>\n\n<pre><code>Dec 2016\nJan 2017\nFeb 2017\nMar 2017\n</code></pre>\n"}, {"tags": ["ruby", "rabbitmq", "rpc", "bunny"], "answers": [{"tags": [], "owner": {"reputation": 346, "user_id": 5339255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30e914752731143a7de3f3e7738206be?s=128&d=identicon&r=PG&f=1", "display_name": "lpiner", "link": "https://stackoverflow.com/users/5339255/lpiner"}, "is_accepted": false, "score": 0, "last_activity_date": 1499892278, "creation_date": 1499892278, "answer_id": 45067208, "question_id": 45064213, "link": "https://stackoverflow.com/questions/45064213/direct-reply-pseudo-queue-with-bunny-gem/45067208#45067208", "title": "direct reply pseudo queue with bunny gem", "body": "<p>I think it's trying to create it which you're not allowed to do.</p>\n\n<p><a href=\"https://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2013-September/030095.html\" rel=\"nofollow noreferrer\">https://lists.rabbitmq.com/pipermail/rabbitmq-discuss/2013-September/030095.html</a></p>\n\n<p>My ruby is a tad rusty but give this a try:</p>\n\n<pre><code>channel = connection.create_channel\nchannel.queue_declare('amq.rabbitmq.reply-to', :passive =&gt; true)\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4178234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e51a032488fb7087c3b4309bdc17ab35?s=128&d=identicon&r=PG&f=1", "display_name": "Anton bog", "link": "https://stackoverflow.com/users/4178234/anton-bog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1499955427, "creation_date": 1499880746, "last_edit_date": 1499955427, "question_id": 45064213, "link": "https://stackoverflow.com/questions/45064213/direct-reply-pseudo-queue-with-bunny-gem", "title": "direct reply pseudo queue with bunny gem", "body": "<p>I am creating an rabbitmq rpc in ruby 2.3 using bunny 2.7.0\nI've made it with one reply queue per client. But I am expected to have quite a large amount of clients and it is not efficient to do it in this way. I want to use a direct reply feature of rabbitmq</p>\n\n<pre><code>connection = Bunny.new(rabbitmq_url, :automatically_recover =&gt; true)\nconnection.start\n\nchannel = connection.create_channel\n\nreply_queue = channel.queue('amq.rabbitmq.reply-to', no_ack: true)\n</code></pre>\n\n<p>on the last line of code I receive error</p>\n\n<pre><code>Bunny::AccessRefused: ACCESS_REFUSED - queue name 'amq.rabbitmq.reply-to' contains reserved prefix 'amq.*'\n</code></pre>\n\n<p>in theory that is expected due to <a href=\"http://rubybunny.info/articles/queues.html\" rel=\"nofollow noreferrer\">http://rubybunny.info/articles/queues.html</a></p>\n\n<p>but on other hand - there is an article <a href=\"https://www.rabbitmq.com/direct-reply-to.html\" rel=\"nofollow noreferrer\">https://www.rabbitmq.com/direct-reply-to.html</a> that describes existance an usability of this queue.</p>\n\n<p>i want to declare a queue because i need to subscribe to it to receive respond</p>\n\n<pre><code>consumer = reply_queue.subscribe do |_, properties, payload|\n    # action\nend\n</code></pre>\n\n<p>I dont understand what am I doing wrong with it (</p>\n\n<p>there are similar topics with examples of such approach but created on other languages and tools like nodejs and that seems to work fine. What am I doing wrong with bunny ?</p>\n\n<p>Update</p>\n\n<p>found the problem - I used odler version of rabbitmq server. That one that id not support direct reply queue yet</p>\n"}, {"tags": ["ruby", "ubuntu", "rubygems", "ubuntu-17.04"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 3524705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d16b885530abea9b4927dba4ff427a5d?s=128&d=identicon&r=PG&f=1", "display_name": "Jdenny", "link": "https://stackoverflow.com/users/3524705/jdenny"}, "is_accepted": false, "score": 0, "last_activity_date": 1501246146, "creation_date": 1501246146, "answer_id": 45373997, "question_id": 45064053, "link": "https://stackoverflow.com/questions/45064053/unable-to-install-ruby-gem-unf-ext-0-7-4-on-ubuntu/45373997#45373997", "title": "Unable to install Ruby gem unf_ext 0.7.4 on Ubuntu", "body": "<p>I ran into a similar issue with installing unf_ext on Ubuntu. I had to add a swapfile to my server. Once I did that I was able to install the unf_ext gem.</p>\n"}], "owner": {"reputation": 1, "user_id": 8289928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe308ab521c66a0e05ba471d1c937829?s=128&d=identicon&r=PG&f=1", "display_name": "nvl90319", "link": "https://stackoverflow.com/users/8289928/nvl90319"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 331, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1501246146, "creation_date": 1499880146, "last_edit_date": 1499880931, "question_id": 45064053, "link": "https://stackoverflow.com/questions/45064053/unable-to-install-ruby-gem-unf-ext-0-7-4-on-ubuntu", "title": "Unable to install Ruby gem unf_ext 0.7.4 on Ubuntu", "body": "<p>I am having a hell of a time installing <code>unf_ext 0.7.4</code> on Ubuntu. I've tried every form of Google searching you can possibly imagined and installed almost everything I could think of, here's what I've installed so far:</p>\n\n<ul>\n<li>libgmp-dev</li>\n<li>ruby-dev </li>\n<li>zlib1g-dev </li>\n<li>liblzma-dev</li>\n<li>build-essential</li>\n<li>build-essential patch</li>\n<li>libxml2</li>\n<li>libxslt1.1</li>\n<li>openssl </li>\n<li>libreadline6 </li>\n<li>libreadline6-dev </li>\n<li>curl </li>\n<li>git-core </li>\n<li>zlib1g </li>\n<li>zlib1g-dev </li>\n<li>libssl-dev </li>\n<li>libyaml-dev </li>\n<li>libsqlite3-0 </li>\n<li>libsqlite3-dev </li>\n<li>sqlite3 (found a link somewhere that said this would help?) </li>\n<li>libxml2-dev </li>\n<li>libxslt-dev </li>\n<li>autoconf </li>\n<li>libc6-dev </li>\n<li>ncurses-dev </li>\n<li>automake </li>\n<li>libtool </li>\n<li>bison</li>\n</ul>\n\n<p>However after having all of these installed it still does not work, so I tried</p>\n\n<ul>\n<li><code>sudo apt-get update &amp;&amp; sudo apt-get install libxml2-dev &amp;&amp; sudo apt-get install libxslt-dev &amp;&amp; sudo gem install unf_ext</code></li>\n</ul>\n\n<p>During that I get this error:</p>\n\n<pre><code>Some packages could not be installed. This may mean that you have\nrequested an impossible situation or if you are using the unstable\ndistribution that some required packages have not yet been created\nor been moved out of Incoming.\n\nThe following information may help to resolve the situation:\nThe following packages have unmet dependencies:\n libxml2-dev : Depends: libxml2 (= 2.9.1+dfsg1-3ubuntu4.9) but 2.9.4+dfsg1-2.2 is to be installed\nE: Unable to correct problems, you have held broken packages.\n</code></pre>\n\n<p>However, <code>dpkg --get-selections</code> displays no packages on <code>hold</code> and all are installed. How can I successfully get this gem installed?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "twitter-bootstrap"], "comments": [{"owner": {"reputation": 9473, "user_id": 5377037, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/4e0c20b401183f5646ae297c943f5da4?s=128&d=identicon&r=PG&f=1", "display_name": "5377037", "link": "https://stackoverflow.com/users/5377037/5377037"}, "edited": false, "score": 0, "creation_date": 1499880437, "post_id": 45063363, "comment_id": 77101305, "body": "edit your question"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1499889019, "post_id": 45063363, "comment_id": 77106048, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and their linked pages. Don&#39;t use links to images. Links rot then break making the question difficult to understand."}], "answers": [{"tags": [], "owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "is_accepted": true, "score": 0, "last_activity_date": 1499878186, "creation_date": 1499878186, "answer_id": 45063499, "question_id": 45063363, "link": "https://stackoverflow.com/questions/45063363/how-to-retrive-data-from-database-in-the-form-of-grid-in-ruby-on-rails/45063499#45063499", "title": "How to retrive data from database in the form of grid in ruby on rails", "body": "<p>your \"col-md-3\" is missing \", and you have to put the column size inside the loop each, here is your revision that you can try</p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n  &lt;% unless @fridges.blank? %&gt;\n    &lt;% @fridges.each do |fridge| %&gt;\n      &lt;div class=\"col-md-3\"&gt;\n        &lt;div class=\"card card-cascade narrower\"&gt;\n            &lt;div class=\"view overlay hm-white-slight\"&gt;\n              &lt;%= image_tag(fridge.image.url(:medium), :alt =&gt; \"Fridge Item\", :class =&gt; \"img-fluid\")%&gt;\n                &lt;a&gt;\n                    &lt;div class=\"mask waves-effect waves-light\"&gt;&lt;/div&gt;\n                &lt;/a&gt;\n            &lt;/div&gt;\n            &lt;div class=\"card-block text-center\"&gt;\n                &lt;a href class=text-muted&gt;\n                    &lt;h5&gt;&lt;%= fridge.Amount %&gt;&lt;/h5&gt;\n                &lt;/a&gt;\n                &lt;h4 class=card-title&gt;\n                    &lt;strong&gt;\n                       &lt;%= link_to fridge.Name, fridge_path(fridge) %&gt;\n                    &lt;/strong&gt;\n                &lt;/h4&gt;\n                &lt;div class=card-footer&gt;\n                    &lt;span class=left&gt;&lt;%= fridge.Amount %&gt;&lt;/span&gt;\n                    &lt;span class=right&gt;\n                        &lt;%= truncate(fridge.Quantity) %&gt;\n                    &lt;/span&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 8263533, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AcbTF.jpg?s=128&g=1", "display_name": "Malik Asad Ali", "link": "https://stackoverflow.com/users/8263533/malik-asad-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 45063499, "answer_count": 1, "score": -4, "last_activity_date": 1499878186, "creation_date": 1499877707, "last_edit_date": 1499878185, "question_id": 45063363, "link": "https://stackoverflow.com/questions/45063363/how-to-retrive-data-from-database-in-the-form-of-grid-in-ruby-on-rails", "title": "How to retrive data from database in the form of grid in ruby on rails", "body": "<p>I want to retrieve data from database in the form of grid for this i use bootstrap columns but data will be retrieve in the form of list by default in ruby on rails 5.This is my view code`  </p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n            &lt;div class=col-md-3&gt;\n                &lt;% unless @fridges.blank? %&gt;\n                &lt;% @fridges.each do |fridge| %&gt;\n                &lt;div class=\"card card-cascade narrower\"&gt;\n                    &lt;div class=\"view overlay hm-white-slight\"&gt;\n &lt;%= image_tag(fridge.image.url(:medium), :alt =&gt; \"Fridge Item\", :class =&gt; \"img-fluid\")%&gt;\n                        &lt;a&gt;\n                            &lt;div class=\"mask waves-effect waves-light\"&gt;&lt;/div&gt;\n                        &lt;/a&gt;\n                    &lt;/div&gt;\n                    &lt;div class=\"card-block text-center\"&gt;\n                        &lt;a href class=text-muted&gt;\n                            &lt;h5&gt;&lt;%= fridge.Amount %&gt;&lt;/h5&gt;\n                        &lt;/a&gt;\n                        &lt;h4 class=card-title&gt;\n                            &lt;strong&gt;\n                               &lt;%= link_to fridge.Name, fridge_path(fridge) %&gt;\n                            &lt;/strong&gt;\n                        &lt;/h4&gt;\n                        &lt;div class=card-footer&gt;\n                            &lt;span class=left&gt;&lt;%= fridge.Amount %&gt;&lt;/span&gt;\n                            &lt;span class=right&gt;\n                                &lt;%= truncate(fridge.Quantity) %&gt;\n                            &lt;/span&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;% end %&gt;\n    &lt;/div&gt;`\n</code></pre>\n\n<p>Table name = fridges, <a href=\"https://i.stack.imgur.com/nYVpg.png\" rel=\"nofollow noreferrer\">here is the screen shot</a> that i want to display data. All the styles is properly working but only issue is data is shown in list form <a href=\"https://i.stack.imgur.com/6nmrT.png\" rel=\"nofollow noreferrer\">check here</a>. Please help me Thanks.</p>\n"}, {"tags": ["ruby", "macos", "twitter", "makefile", "rubygems"], "comments": [{"owner": {"reputation": 1652, "user_id": 4743327, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9FOL2.jpg?s=128&g=1", "display_name": "Croaton", "link": "https://stackoverflow.com/users/4743327/croaton"}, "edited": false, "score": 0, "creation_date": 1499877681, "post_id": 45063227, "comment_id": 77099864, "body": "Did you try to install http_parser first?"}, {"owner": {"reputation": 339, "user_id": 6328218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CT64V.jpg?s=128&g=1", "display_name": "Fran&#231;ois No&#235;l", "link": "https://stackoverflow.com/users/6328218/fran%c3%a7ois-no%c3%abl"}, "edited": false, "score": 0, "creation_date": 1499878146, "post_id": 45063227, "comment_id": 77100113, "body": "Also, you should verify if you have accepted xcode condition. It can produce some strange behavior if not but I don&#39;t know if you&#39;re problem is related to that."}, {"owner": {"reputation": 1, "user_id": 8297029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D1ox8.jpg?s=128&g=1", "display_name": "Wall-C", "link": "https://stackoverflow.com/users/8297029/wall-c"}, "reply_to_user": {"reputation": 1652, "user_id": 4743327, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/9FOL2.jpg?s=128&g=1", "display_name": "Croaton", "link": "https://stackoverflow.com/users/4743327/croaton"}, "edited": false, "score": 0, "creation_date": 1499937358, "post_id": 45063227, "comment_id": 77125067, "body": "@VitalyFry Yes I tried same error appeared, there seemed to have a problem with my <code>make</code> command"}, {"owner": {"reputation": 1, "user_id": 8297029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D1ox8.jpg?s=128&g=1", "display_name": "Wall-C", "link": "https://stackoverflow.com/users/8297029/wall-c"}, "edited": false, "score": 1, "creation_date": 1499937916, "post_id": 45063227, "comment_id": 77125490, "body": "I finally found what went wrong with the help of a friend : the ruby gem exec <code>make</code> replaced the original <code>make</code> from xcode command line tools because I forced the installation of gems via sudo command.&lt;/br&gt;I had to remove the gem make in my  <code>&#47;usr&#47;local&#47;bin&#47;make</code> folder&lt;/br&gt;Anyhow, thanks guys for the help ! :)"}], "answers": [{"tags": [], "owner": {"reputation": 2545, "user_id": 1783642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc69b60352cb9a411cb033b26bd8136e?s=128&d=identicon&r=PG", "display_name": "Puhlze", "link": "https://stackoverflow.com/users/1783642/puhlze"}, "is_accepted": false, "score": 0, "last_activity_date": 1499880544, "creation_date": 1499880544, "answer_id": 45064153, "question_id": 45063227, "link": "https://stackoverflow.com/questions/45063227/cannot-install-ruby-gem-twitter-on-mac-os/45064153#45064153", "title": "Cannot install RUBY Gem Twitter on MAC OS", "body": "<p>Looks like make is trying to load things from the default ruby: <code>/Library/Ruby/Gems/2.0.0/gems/make-0.3.1/bin/make (LoadError)</code> rather than from your rvm-installed ruby. I'd try installing the make gem with <code>gem install make</code> to see if that resolves your issue.</p>\n\n<p>You could also check your GEM_PATH environment variable to make sure that local gems aren't being used before the gems installed for your rvm ruby.</p>\n"}], "owner": {"reputation": 1, "user_id": 8297029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/D1ox8.jpg?s=128&g=1", "display_name": "Wall-C", "link": "https://stackoverflow.com/users/8297029/wall-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499880544, "creation_date": 1499877230, "question_id": 45063227, "link": "https://stackoverflow.com/questions/45063227/cannot-install-ruby-gem-twitter-on-mac-os", "title": "Cannot install RUBY Gem Twitter on MAC OS", "body": "<p>I have a problem trying to install the gem twitter on MAC OS.</p>\n\n<p>I input the command <code>sudo gem install twitter</code></p>\n\n<p>and got the following result : </p>\n\n<pre><code>Building native extensions.  This could take a while...\nERROR:  Error installing twitter:\n\nERROR: Failed to build gem native extension.\n\ncurrent directory: /Users/Will/.rvm/rubies/ruby-2.3.3/lib/ruby/gems/2.3.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser\n/Users/Will/.rvm/rubies/ruby-2.3.3/bin/ruby -r ./siteconf20170712-36084-peffuw.rb extconf.rb\n\ncreating Makefile\n\ncurrent directory: /Users/Will/.rvm/rubies/ruby-2.3.3/lib/ruby/gems/2.3.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser\nmake \"DESTDIR=\" clean\n/usr/local/bin/make:23:in `load': cannot load such file -- /Library/Ruby/Gems/2.0.0/gems/make-0.3.1/bin/make (LoadError)\n    from /usr/local/bin/make:23:in `&lt;main&gt;'\n\ncurrent directory: /Users/Will/.rvm/rubies/ruby-2.3.3/lib/ruby/gems/2.3.0/gems/http_parser.rb-0.6.0/ext/ruby_http_parser\nmake \"DESTDIR=\"\n/usr/local/bin/make:23:in `load': cannot load such file -- /Library/Ruby/Gems/2.0.0/gems/make-0.3.1/bin/make (LoadError)\n    from /usr/local/bin/make:23:in `&lt;main&gt;'\n\nmake failed, exit code 1\n\nGem files will remain installed in /Users/Will/.rvm/rubies/ruby-2.3.3/lib/ruby/gems/2.3.0/gems/http_parser.rb-0.6.0 for inspection.\nResults logged to /Users/Will/.rvm/rubies/ruby-2.3.3/lib/ruby/gems/2.3.0/extensions/x86_64-darwin-15/2.3.0/http_parser.rb-0.6.0/gem_make.out\n</code></pre>\n\n<p>I already tried stuff from around the net (installed XCode command line tools, re-installed Ruby and rvm...) and I'm all out of ideas/solutions/places to search...</p>\n\n<p>Could you please help me ?</p>\n\n<p>Thanks guys :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "logging", "access-log", "trinidad-gem"], "comments": [{"owner": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "edited": false, "score": 0, "creation_date": 1499876580, "post_id": 45062908, "comment_id": 77099305, "body": "What have you try?"}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 1, "creation_date": 1499877156, "post_id": 45062908, "comment_id": 77099591, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/11267540/how-to-log-specific-request-details-to-rails-server-logs\">How to log specific request details to rails server logs</a>"}, {"owner": {"reputation": 1, "user_id": 5057470, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hC-BtD-QABs/AAAAAAAAAAI/AAAAAAAAAI0/K8Gssn4YHls/photo.jpg?sz=128", "display_name": "Subhendu MALLIK", "link": "https://stackoverflow.com/users/5057470/subhendu-mallik"}, "edited": false, "score": 0, "creation_date": 1499932552, "post_id": 45062908, "comment_id": 77121742, "body": "my question is different. I have explained bit more.let me know if you want more clarity."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5057470, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hC-BtD-QABs/AAAAAAAAAAI/AAAAAAAAAI0/K8Gssn4YHls/photo.jpg?sz=128", "display_name": "Subhendu MALLIK", "link": "https://stackoverflow.com/users/5057470/subhendu-mallik"}, "edited": false, "score": 0, "creation_date": 1500003950, "post_id": 45063110, "comment_id": 77160983, "body": "I have edited the question. Can you please have a look into this?"}], "tags": [], "owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "is_accepted": false, "score": 0, "last_activity_date": 1499876798, "creation_date": 1499876798, "answer_id": 45063110, "question_id": 45062908, "link": "https://stackoverflow.com/questions/45062908/how-to-implement-access-log-in-rails/45063110#45063110", "title": "How to implement access log in rails?", "body": "<p>Everything you need can be found in the response header and body.  Add a global action to your ApplicationController with a <code>before_</code> or <code>around_</code> action like:</p>\n\n<p>/application_controller.rb</p>\n\n<pre><code>around_filter :logging_traffic\n\n  def logging_traffic \n    logger.info \"USERAGENT: #{request.headers['HTTP_USER_AGENT']}\"\n    begin \n      yield \n    ensure \n      logger.info \"response_status: #{response.status}\"\n    end \n  end \n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5057470, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-hC-BtD-QABs/AAAAAAAAAAI/AAAAAAAAAI0/K8Gssn4YHls/photo.jpg?sz=128", "display_name": "Subhendu MALLIK", "link": "https://stackoverflow.com/users/5057470/subhendu-mallik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1149, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1499932407, "creation_date": 1499876105, "last_edit_date": 1499932407, "question_id": 45062908, "link": "https://stackoverflow.com/questions/45062908/how-to-implement-access-log-in-rails", "title": "How to implement access log in rails?", "body": "<p>I want to implement access log in the ruby layer of my application. I want to log like this for each request.</p>\n\n<pre><code>192.168.2.20 - - [28/Jul/2006:10:27:10 -0300] \"GET /cgi-bin/try/ HTTP/1.0\" 200 3395\n127.0.0.1 - - [28/Jul/2006:10:22:04 -0300] \"GET / HTTP/1.0\" 200 2216\n</code></pre>\n\n<p>I want to create a different file for access log only like apache access log. We can log the request in the rails logger that is easily achievable but how can we create separate log file only for access log. I am using trinidad.</p>\n"}, {"tags": ["ruby", "rspec", "capybara"], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1499874816, "creation_date": 1499874816, "answer_id": 45062491, "question_id": 45062165, "link": "https://stackoverflow.com/questions/45062165/get-text-from-alert-to-compare-with-string-cucumber-capybara-rspec/45062491#45062491", "title": "Get text from Alert to compare with string - Cucumber + Capybara + Rspec", "body": "<p>Assuming you are talking about modal system alerts triggered by JS <code>alert</code>, <code>confirm</code>, <code>prompt</code> then you need to use the capybara methods <code>accept_alert</code>, <code>accept_confirm</code>, <code>dismiss_confirm</code>, <code>accept_prompt</code> or <code>dismiss_prompt</code> - <a href=\"http://www.rubydoc.info/gems/capybara/Capybara/Session#accept_alert-instance_method\" rel=\"nofollow noreferrer\">http://www.rubydoc.info/gems/capybara/Capybara/Session#accept_alert-instance_method</a></p>\n\n<p>All of these will return the text the modal showed, or you can pass in a string which will be tested against the text of the modal and raise an error if it doesn't match.  They also need to take a block that has the action that triggers the modal, so if clicking a link triggered it your step could be something like</p>\n\n<pre><code>When /^(?:|I ) click \"([^\"]*)\" and accept \"([^\"]*)\"$/ do |link, msg|\n  accept_alert msg do\n    click_link(link)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1254, "user_id": 3585595, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/0fc9b06e8ebb26a395ff5e49ecc85f7c?s=128&d=identicon&r=PG&f=1", "display_name": "Paulo Roberto", "link": "https://stackoverflow.com/users/3585595/paulo-roberto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 660, "favorite_count": 0, "accepted_answer_id": 45062491, "answer_count": 1, "score": 0, "last_activity_date": 1499874816, "creation_date": 1499873958, "question_id": 45062165, "link": "https://stackoverflow.com/questions/45062165/get-text-from-alert-to-compare-with-string-cucumber-capybara-rspec", "title": "Get text from Alert to compare with string - Cucumber + Capybara + Rspec", "body": "<p>I need to get the text that appears in the alert to compare with a text string that was expected by the Test.</p>\n\n<p>I'm using Cucumber + Ruby + rspec and Capybara.</p>\n\n<p><strong>I have tried the following:</strong> </p>\n\n<pre><code>Then(/^I see the message \"([^\"]*)\"$/) do |mensagemsucesso|\n\n    TextAlert = page.driver.browser.switch_to.alert.text\n    sleep(5)\n    Expect(textAlert).to eql mensagemsucesso\n\nEnd\n</code></pre>\n\n<p><strong>Error:</strong></p>\n\n<blockquote>\n  <p>No modal dialog is currently open\n  (Selenium::WebDriver::Error::NoSuchAlertError)</p>\n</blockquote>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 5614, "user_id": 1177790, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tjFKT.jpg?s=128&g=1", "display_name": "Paritosh Singh", "link": "https://stackoverflow.com/users/1177790/paritosh-singh"}, "edited": false, "score": 0, "creation_date": 1499872954, "post_id": 45061674, "comment_id": 77096890, "body": "Not on my machine. Did you <code>require &#39;json&#39;</code>? What version of Ruby do you use? What error does it raise?"}, {"owner": {"reputation": 5614, "user_id": 1177790, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tjFKT.jpg?s=128&g=1", "display_name": "Paritosh Singh", "link": "https://stackoverflow.com/users/1177790/paritosh-singh"}, "edited": false, "score": 0, "creation_date": 1499873014, "post_id": 45061674, "comment_id": 77096937, "body": "Yup, I did require json. I am using ruby version 2.4.1"}, {"owner": {"reputation": 5614, "user_id": 1177790, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tjFKT.jpg?s=128&g=1", "display_name": "Paritosh Singh", "link": "https://stackoverflow.com/users/1177790/paritosh-singh"}, "edited": false, "score": 0, "creation_date": 1499873043, "post_id": 45061674, "comment_id": 77096959, "body": "I am geeting this error: JSON::ParserError: 784: unexpected token at &#39;&quot;{\\&quot;Details\\&quot;:[{\\&quot;WaybillNo\\&quot;:\\&quot;11-17-657\\&quot;,\\&quot;ShipperName\\&quot;&zwnj;&#8203;:\\&quot;Paritosh Singh\\&quot;,\\&quot;ShipperAddress\\&quot;:\\&quot;New Delhi, India\\&quot;,\\&quot;ShipperMob\\&quot;:\\&quot;0812944\\&quot;,\\&quot;ConsigneeName\\&quot;:\\&quot;SANDY&zwnj;&#8203;\\&quot;,\\&quot;ConsigneeAddres&zwnj;&#8203;s\\&quot;:\\&quot;Mumbai India\\&quot;,\\&quot;ConsigneeMob\\&quot;:\\&quot;8355485\\&quot;,\\&quot;Pieces\\&quot;:\\&quot;1\\&quot;}]}&quot;&#39;"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 5614, "user_id": 1177790, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tjFKT.jpg?s=128&g=1", "display_name": "Paritosh Singh", "link": "https://stackoverflow.com/users/1177790/paritosh-singh"}, "edited": false, "score": 0, "creation_date": 1499873533, "post_id": 45061674, "comment_id": 77097309, "body": "I get the same error with the string provided, but the string provided in the question works fine. Where did the first string come from and how did you generate the second string?"}, {"owner": {"reputation": 5614, "user_id": 1177790, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tjFKT.jpg?s=128&g=1", "display_name": "Paritosh Singh", "link": "https://stackoverflow.com/users/1177790/paritosh-singh"}, "edited": false, "score": 0, "creation_date": 1499873743, "post_id": 45061674, "comment_id": 77097455, "body": "I am using same string as given in question :)"}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1499873946, "post_id": 45061674, "comment_id": 77097623, "body": "The other string has a different level of \\\\ escaping"}, {"owner": {"reputation": 5614, "user_id": 1177790, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tjFKT.jpg?s=128&g=1", "display_name": "Paritosh Singh", "link": "https://stackoverflow.com/users/1177790/paritosh-singh"}, "edited": false, "score": 0, "creation_date": 1499874503, "post_id": 45061674, "comment_id": 77097973, "body": "Found a way to parse json: JSON.parse(string.gsub(&quot;\\&quot;&quot;,&quot;&quot;).gsub(&quot;\\\\&quot;,&quot;\\&quot;&quot;))"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 5, "last_activity_date": 1499872612, "creation_date": 1499872612, "answer_id": 45061674, "question_id": 45061584, "link": "https://stackoverflow.com/questions/45061584/how-can-i-parse-this-json-in-ruby/45061674#45061674", "title": "How can I parse this JSON in ruby", "body": "<p>This looks like JSON within JSON:</p>\n\n<pre><code>require 'json'\n\nstring = \"\\\"{\\\\\\\"Details\\\\\\\":[{\\\\\\\"WaybillNo\\\\\\\":\\\\\\\"11-17-657\\\\\\\",\\\\\\\"ShipperName\\\\\\\":\\\\\\\"Paritosh Singh\\\\\\\",\\\\\\\"ShipperAddress\\\\\\\":\\\\\\\"New Delhi, India\\\\\\\",\\\\\\\"ShipperMob\\\\\\\":\\\\\\\"0812944\\\\\\\",\\\\\\\"ConsigneeName\\\\\\\":\\\\\\\"SANDY\\\\\\\",\\\\\\\"ConsigneeAddress\\\\\\\":\\\\\\\"Mumbai India\\\\\\\",\\\\\\\"ConsigneeMob\\\\\\\":\\\\\\\"8355485\\\\\\\",\\\\\\\"Pieces\\\\\\\":\\\\\\\"1\\\\\\\"}]}\\\"\"\n\nJSON.parse(JSON.parse(string))\n#=&gt; {\n#     \"Details\" =&gt; [\n#       [0] {\n#         \"WaybillNo\"        =&gt; \"11-17-657\",\n#         \"ShipperName\"      =&gt; \"Paritosh Singh\",\n#         \"ShipperAddress\"   =&gt; \"New Delhi, India\",\n#         \"ShipperMob\"       =&gt; \"0812944\",\n#         \"ConsigneeName\"    =&gt; \"SANDY\",\n#         \"ConsigneeAddress\" =&gt; \"Mumbai India\",\n#         \"ConsigneeMob\"     =&gt; \"8355485\",\n#         \"Pieces\"           =&gt; \"1\"\n#       }\n#     ]\n#   }\n</code></pre>\n"}], "owner": {"reputation": 5614, "user_id": 1177790, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/tjFKT.jpg?s=128&g=1", "display_name": "Paritosh Singh", "link": "https://stackoverflow.com/users/1177790/paritosh-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 45061674, "answer_count": 1, "score": 1, "last_activity_date": 1499872612, "creation_date": 1499872375, "question_id": 45061584, "link": "https://stackoverflow.com/questions/45061584/how-can-i-parse-this-json-in-ruby", "title": "How can I parse this JSON in ruby", "body": "<p>Please help me parse this json in ruby:</p>\n\n<pre><code>\"\\\"{\\\\\\\"Details\\\\\\\":[{\\\\\\\"WaybillNo\\\\\\\":\\\\\\\"11-17-657\\\\\\\",\\\\\\\"ShipperName\\\\\\\":\\\\\\\"Paritosh Singh\\\\\\\",\\\\\\\"ShipperAddress\\\\\\\":\\\\\\\"New Delhi, India\\\\\\\",\\\\\\\"ShipperMob\\\\\\\":\\\\\\\"0812944\\\\\\\",\\\\\\\"ConsigneeName\\\\\\\":\\\\\\\"SANDY\\\\\\\",\\\\\\\"ConsigneeAddress\\\\\\\":\\\\\\\"Mumbai India\\\\\\\",\\\\\\\"ConsigneeMob\\\\\\\":\\\\\\\"8355485\\\\\\\",\\\\\\\"Pieces\\\\\\\":\\\\\\\"1\\\\\\\"}]}\\\"\"\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "spree", "gsap"], "answers": [{"tags": [], "owner": {"reputation": 224, "user_id": 6366616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lgwr3.jpg?s=128&g=1", "display_name": "Max L.", "link": "https://stackoverflow.com/users/6366616/max-l"}, "is_accepted": true, "score": 0, "last_activity_date": 1499873681, "creation_date": 1499873681, "answer_id": 45062069, "question_id": 45061244, "link": "https://stackoverflow.com/questions/45061244/ruby-and-tweenmax/45062069#45062069", "title": "Ruby And tweenmax", "body": "<p>Did you try greensock-rails gem? </p>\n\n<p><a href=\"https://github.com/robertpataki/greensock-rails\" rel=\"nofollow noreferrer\">https://github.com/robertpataki/greensock-rails</a></p>\n"}], "owner": {"reputation": 859, "user_id": 6034998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-vtaWMdlttYk/AAAAAAAAAAI/AAAAAAAAADA/nVgDy2-nrds/photo.jpg?sz=128", "display_name": "Salman", "link": "https://stackoverflow.com/users/6034998/salman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 45062069, "answer_count": 1, "score": 1, "last_activity_date": 1499873681, "creation_date": 1499871498, "question_id": 45061244, "link": "https://stackoverflow.com/questions/45061244/ruby-and-tweenmax", "title": "Ruby And tweenmax", "body": "<p>I've tried adding Tweenmax and other JavaScript libraries to my Ruby/Spree app.</p>\n\n<p>But I've not been able to make it work.</p>\n\n<p>I've added separate files to assets/javascripts/store</p>\n\n<p>add included them in the all.js file</p>\n\n<p>Yet it seems that the app doesn't run Tweenmax.</p>\n\n<p>Can someone explain to me how to add Tweenmax to Ruby on Rails &amp; Spree? </p>\n"}, {"tags": ["ruby", "selenium", "capybara"], "comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1499875513, "post_id": 45061053, "comment_id": 77098706, "body": "Do you have <code>Capybara.exact</code> set to true by any chance?  If not, is the button outside the current scope (i.e. are you inside a within block that doesn&#39;t contain the button).  Note:  <code>click_button</code> is implemented as <code>find_button(args...).click</code> so it&#39;s no surprise your third attempt was no different than the first. Your fourth attempt wouldn&#39;t work because the content of the button is more than just &quot;Jetzt bestellen&quot;. Please add the exact error message you get to your question."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1499876345, "post_id": 45061053, "comment_id": 77099169, "body": "<a href=\"https://gist.github.com/twalpole/14cd6c69c91b3d54cf2bd994375a019b\" rel=\"nofollow noreferrer\">gist.github.com/twalpole/14cd6c69c91b3d54cf2bd994375a019b</a> is a gist taking the html you show, putting it into a document and then showing capybara finding an clicking on it.  Are you sure the text is &quot;Jetzt bestellen&quot; when your test runs? and not the &quot;Jetzt kaufen&quot; you show in the html?  Could you try just doing <code>click_button(&#39;Jetzt&#39;)</code> and seeing if that passes."}], "answers": [{"comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1499875619, "post_id": 45062667, "comment_id": 77098766, "body": "In Capybara links do require &#39;href&#39; attributes, or for you to specify an <code>href: nil</code> option to click_link.  This is because the html spec says it&#39;s not a link if it doesn&#39;t have an href - just a link placeholder.  <code>button</code> elements though don&#39;t have any such requirement in Capybara (just that they&#39;re not disabled)"}], "tags": [], "owner": {"reputation": 1283, "user_id": 1861295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eaa01348f213c03dad2201f5e224e12a?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/1861295/john"}, "is_accepted": false, "score": 0, "last_activity_date": 1499875344, "creation_date": 1499875344, "answer_id": 45062667, "question_id": 45061053, "link": "https://stackoverflow.com/questions/45061053/capybara-cant-find-button-to-click-by-xpath-or-text-button-does-not-have-id-or/45062667#45062667", "title": "Capybara can&#39;t find button to click by xpath or text, button does not have id or name", "body": "<p>This is how I got around this issue when testing an Angular app.</p>\n\n<pre><code>@browser.find('button', text: 'Jetzt bestellen').click\n</code></pre>\n\n<p>Without a hrefs on the links and buttons a few capybara finders don't work like they would if they had a href.</p>\n"}], "owner": {"reputation": 11, "user_id": 7644821, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206650614424145/picture?type=large", "display_name": "Mariana Furini", "link": "https://stackoverflow.com/users/7644821/mariana-furini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 822, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499875344, "creation_date": 1499871029, "question_id": 45061053, "link": "https://stackoverflow.com/questions/45061053/capybara-cant-find-button-to-click-by-xpath-or-text-button-does-not-have-id-or", "title": "Capybara can&#39;t find button to click by xpath or text, button does not have id or name", "body": "<p>I am testing this page that I have to fill up a form and only when all fields are filled and valid, the button is enabled to click, however, when trying to find the button to click I always get the message that capybara was unable to find the button or element or however I try to find it.\nThe button does not have a name or an id, which makes it harder. </p>\n\n<p><a href=\"https://i.stack.imgur.com/Wai1y.png\" rel=\"nofollow noreferrer\">screenshot of the part of the code while inspecting element</a></p>\n\n<pre><code>&lt;button class=\"btn btn--highlight _159vaYHuibqRdI3OZTALCW\"&gt;\n&lt;!-- react-text: 182 --&gt;\nJetzt kaufen\n&lt;!-- /react-text --&gt;\n&lt;!-- react-text: 183 --&gt; \u2014 &lt;!-- /react-text --&gt;\n&lt;!-- react-text: 184 --&gt;\n94,01&amp;nbsp;\u20ac\n&lt;!-- /react-text --&gt;\n&lt;span class=\"spinner\"&gt;\n&lt;/span&gt;&lt;/button&gt;\n</code></pre>\n\n<p>When the size of the browser changes, the button text changes, however by default size the text of the button is \"Jetzt bestellen\" and when larger  \"Jetzt kaufen\"\nWays I already tried to click this button:</p>\n\n<p><strong>@browser</strong>.click_button('Jetzt bestellen', wait:10)</p>\n\n<p><strong>@browser</strong>.within \".btn btn--highlight\" do\n    @browser.click_on \"Jetzt bestellen\"\n  end</p>\n\n<p><strong>@browser</strong>.find_button('Jetzt bestellen', wait: 10).click</p>\n\n<p><strong>@browser</strong>.find(:xpath, '//button[text()=\"Jetzt bestellen\"]', wait: 10).click</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 969, "user_id": 3832310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fEEXV.png?s=128&g=1", "display_name": "Paul", "link": "https://stackoverflow.com/users/3832310/paul"}, "edited": false, "score": 0, "creation_date": 1499871233, "post_id": 45060948, "comment_id": 77095511, "body": "What&#39;s in <code>@posts</code>? Are you getting all posts before scrolling through the users?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8295262, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/dc2caf7e8a4e2b5d16b37a78f54b3afb?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Hardman", "link": "https://stackoverflow.com/users/8295262/matt-hardman"}, "edited": false, "score": 0, "creation_date": 1499871593, "post_id": 45061118, "comment_id": 77095799, "body": "Thanks @widjajayd I tried this but it comes up with an error undefined method `total&#39; for nil:NilClass. I know this normally happens when there is nothing in the field for a particular, but I have checked the posts and they all have a value?"}, {"owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "reply_to_user": {"reputation": 13, "user_id": 8295262, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/dc2caf7e8a4e2b5d16b37a78f54b3afb?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Hardman", "link": "https://stackoverflow.com/users/8295262/matt-hardman"}, "edited": false, "score": 0, "creation_date": 1499871868, "post_id": 45061118, "comment_id": 77096010, "body": "meaning one of the user do not have any post, let me edit my code to check it"}, {"owner": {"reputation": 13, "user_id": 8295262, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/dc2caf7e8a4e2b5d16b37a78f54b3afb?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Hardman", "link": "https://stackoverflow.com/users/8295262/matt-hardman"}, "edited": false, "score": 0, "creation_date": 1499872153, "post_id": 45061118, "comment_id": 77096233, "body": "Ah yes you are correct 2 users don&#39;t have any posts. How do I change it so it ignores users who have no posts?"}, {"owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "reply_to_user": {"reputation": 13, "user_id": 8295262, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/dc2caf7e8a4e2b5d16b37a78f54b3afb?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Hardman", "link": "https://stackoverflow.com/users/8295262/matt-hardman"}, "edited": false, "score": 0, "creation_date": 1499872277, "post_id": 45061118, "comment_id": 77096334, "body": "I just edited the code so if the user has posts (.size &gt; 0) it will print it, if not then it will skip to next user"}, {"owner": {"reputation": 3946, "user_id": 6231376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cea33b55396be93411ade85021f41b01?s=128&d=identicon&r=PG&f=1", "display_name": "TeWu", "link": "https://stackoverflow.com/users/6231376/tewu"}, "edited": false, "score": 0, "creation_date": 1499872432, "post_id": 45061118, "comment_id": 77096469, "body": "You should be able to get only users with post(s) using <code>User.joins(:posts)</code> instead of <code>User.all</code> (see <a href=\"https://stackoverflow.com/a/38440584/6231376\">this answer</a>)."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 13, "user_id": 8295262, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/dc2caf7e8a4e2b5d16b37a78f54b3afb?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Hardman", "link": "https://stackoverflow.com/users/8295262/matt-hardman"}, "edited": false, "score": 0, "creation_date": 1499873873, "post_id": 45061118, "comment_id": 77097554, "body": "Ouch n+1. @MattHardman consider eager loading the posts (still inefficient but better) or creating a scope for the most recent post and merging that into the user query."}], "tags": [], "owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "is_accepted": true, "score": 0, "last_activity_date": 1499872226, "last_edit_date": 1499872226, "creation_date": 1499871201, "answer_id": 45061118, "question_id": 45060948, "link": "https://stackoverflow.com/questions/45060948/how-to-display-last-post-for-each-user-in-ruby-on-rails/45061118#45061118", "title": "How to display last post for each user in ruby on rails?", "body": "<p>you may try this code, change @posts to u.posts</p>\n\n<pre><code>&lt;% @users.each do |u| %&gt;\n  &lt;% if u.posts.size &gt; 0 %&gt;\n    &lt;%= u.posts.last.total %&gt;\n    &lt;%= u.email %&gt;\n  &lt;% end %&gt;      \n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "is_accepted": false, "score": 0, "last_activity_date": 1499874297, "creation_date": 1499874297, "answer_id": 45062281, "question_id": 45060948, "link": "https://stackoverflow.com/questions/45060948/how-to-display-last-post-for-each-user-in-ruby-on-rails/45062281#45062281", "title": "How to display last post for each user in ruby on rails?", "body": "<p>If you have more than a trivial number of users and posts then I would consider trying to reduce the number of queries you're issuing.</p>\n\n<p>You can very quickly get the maximum post_id per user_id ...</p>\n\n<pre><code>max_post_id_per_user = Post.group(:user_id).maximum(:id)\n</code></pre>\n\n<p>... and get a hash of the required Posts ...</p>\n\n<pre><code>max_post_per_user = Post.where(id: max_post_id_per_user).group_by(:user_id)\n</code></pre>\n\n<p>... and then reference that hash to get the required post for the user id.</p>\n"}], "owner": {"reputation": 13, "user_id": 8295262, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/dc2caf7e8a4e2b5d16b37a78f54b3afb?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Hardman", "link": "https://stackoverflow.com/users/8295262/matt-hardman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 249, "favorite_count": 0, "accepted_answer_id": 45061118, "answer_count": 2, "score": 0, "last_activity_date": 1499874297, "creation_date": 1499870788, "last_edit_date": 1499874294, "question_id": 45060948, "link": "https://stackoverflow.com/questions/45060948/how-to-display-last-post-for-each-user-in-ruby-on-rails", "title": "How to display last post for each user in ruby on rails?", "body": "<p>I am trying to display just the last post for each user and having messed around for a while, I cannot work it out.</p>\n\n<p>I have relationships of users has many posts and posts belong to users. \nWhen I use the below code it correctly puts each users email address but it puts the value for each post as the last overall value (not the last value for that specific user).</p>\n\n<pre><code>&lt;% @users.each do |u| %&gt;\n  &lt;%= @posts.last.total %&gt;\n  &lt;%= u.email %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>(Total is a calculation performed in posts model and saved in the db.)</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1499868397, "post_id": 45059885, "comment_id": 77093264, "body": "Don&#39;t compare strings. Compare <code>Time</code> objects. <code>t = Time.parse(&quot;2017-07-12T13:30:44Z&quot;); t &lt; Time.now &amp;&amp; t &gt; Time.now - (3600 * 24)</code>"}, {"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 1, "creation_date": 1499868812, "post_id": 45059885, "comment_id": 77093589, "body": "If you have <code>ActiveSupport</code> (Rails), use <code>Time.parse(&#39;2017-07-11T13:30:44Z&#39;) &gt; 1.day.ago</code>"}, {"owner": {"reputation": 158, "user_id": 2334324, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/73d4019af69d424c0586a4e9c1cd8cec?s=128&d=identicon&r=PG", "display_name": "Mike D", "link": "https://stackoverflow.com/users/2334324/mike-d"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1499869099, "post_id": 45059885, "comment_id": 77093820, "body": "@TomLord I&#39;m not understanding how that will validate the time I have to be within the past 24 hours."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1499873094, "post_id": 45059885, "comment_id": 77097004, "body": "<code>Time.now - (3600 * 24)</code> === &quot;Time is greater than 1 day ago&quot;. Your question did not mention <code>rails</code>, so I provided an answer in vanilla ruby."}], "answers": [{"comments": [{"owner": {"reputation": 158, "user_id": 2334324, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/73d4019af69d424c0586a4e9c1cd8cec?s=128&d=identicon&r=PG", "display_name": "Mike D", "link": "https://stackoverflow.com/users/2334324/mike-d"}, "edited": false, "score": 0, "creation_date": 1499871235, "post_id": 45061044, "comment_id": 77095516, "body": "Thank you for answering. Not understanding why people are downvoting my question."}, {"owner": {"reputation": 575, "user_id": 2855747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef29652da2fde5184c329af0e72ccea?s=128&d=identicon&r=PG", "display_name": "Colto", "link": "https://stackoverflow.com/users/2855747/colto"}, "reply_to_user": {"reputation": 158, "user_id": 2334324, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/73d4019af69d424c0586a4e9c1cd8cec?s=128&d=identicon&r=PG", "display_name": "Mike D", "link": "https://stackoverflow.com/users/2334324/mike-d"}, "edited": false, "score": 2, "creation_date": 1499873578, "post_id": 45061044, "comment_id": 77097345, "body": "&#175;\\_(\u30c4)_/&#175;  It might be a simple question to some people who have been using ruby for a while, but that doesn&#39;t mean it&#39;s simple for everyone. Good luck, Mike. Glad I could help. Cheers!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1499880840, "post_id": 45061044, "comment_id": 77101540, "body": "I don&#39;t know Rails but have the impression one could write <code>DateTime.strptime(&#39;2017-07-12T13:30:44+07:00&#39;, &#39;%Y-%m-%dT%H:%M:%S%z&#39;).between?(1.day.ago, Time.now)</code>. If so, that would be more expressive, imo."}, {"owner": {"reputation": 575, "user_id": 2855747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef29652da2fde5184c329af0e72ccea?s=128&d=identicon&r=PG", "display_name": "Colto", "link": "https://stackoverflow.com/users/2855747/colto"}, "edited": false, "score": 0, "creation_date": 1499893551, "post_id": 45061044, "comment_id": 77108264, "body": "Yeah, that would work too. In vanilla Ruby that would look like <code>datetime.between?(Time.now - (3600 * 24), Time.now)</code>"}], "tags": [], "owner": {"reputation": 575, "user_id": 2855747, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef29652da2fde5184c329af0e72ccea?s=128&d=identicon&r=PG", "display_name": "Colto", "link": "https://stackoverflow.com/users/2855747/colto"}, "is_accepted": true, "score": 5, "last_activity_date": 1499871015, "creation_date": 1499871015, "answer_id": 45061044, "question_id": 45059885, "link": "https://stackoverflow.com/questions/45059885/ruby-how-to-validate-date-time-to-be-within-at-least-24-hours/45061044#45061044", "title": "Ruby how to validate date/time to be within at least 24 hours?", "body": "<p>There are a handful of ways to handle this. In my opinion the easiest would be to compare the two datetimes.</p>\n\n<p>Something like this:</p>\n\n<p><strong>Rails</strong></p>\n\n<p><code>datetime &gt;= 1.day.ago &amp;&amp; datetime &lt;= Time.now</code></p>\n\n<p><strong>Vanilla Ruby</strong></p>\n\n<p>This requires you to mess with the date a little more manually, which responds in seconds. So 3600 seconds in an hour, 24 hours in a day.</p>\n\n<p><code>datetime &gt;= Time.now - (3600 * 24) &amp;&amp; datetime &lt;= Time.now</code></p>\n\n<p>Essentially this is saying \"make sure my time object is more recent or equal to 24 hours ago but not a date past right now\"</p>\n"}], "owner": {"reputation": 158, "user_id": 2334324, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/73d4019af69d424c0586a4e9c1cd8cec?s=128&d=identicon&r=PG", "display_name": "Mike D", "link": "https://stackoverflow.com/users/2334324/mike-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 963, "favorite_count": 0, "accepted_answer_id": 45061044, "answer_count": 1, "score": 0, "last_activity_date": 1499871015, "creation_date": 1499868100, "question_id": 45059885, "link": "https://stackoverflow.com/questions/45059885/ruby-how-to-validate-date-time-to-be-within-at-least-24-hours", "title": "Ruby how to validate date/time to be within at least 24 hours?", "body": "<p>I have a date/time format in utc iso8601 like this:</p>\n\n<pre><code> 2017-07-12T13:30:44Z\n</code></pre>\n\n<p>And I'm able to get a \"time now\" by doing this:</p>\n\n<pre><code>now = Time.now.utc.iso8601\n</code></pre>\n\n<p>I'm having trouble figuring out how to compare and make sure that the date/time I have in the first block is within the past 24 hours.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "authentication", "ldap"], "answers": [{"tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 0, "last_activity_date": 1499871948, "last_edit_date": 1499871948, "creation_date": 1499871270, "answer_id": 45061151, "question_id": 45059698, "link": "https://stackoverflow.com/questions/45059698/upon-login-authentication-with-ldap-ad-how-do-i-create-a-user-row-if-one-is-non/45061151#45061151", "title": "upon login authentication with LDAP/AD how do I create a user row if one is non existent using AD records", "body": "<p>Update <code>AuthenticaeUser</code> to look like this:</p>\n\n<pre><code>class AuthenticateUser\n  def self.call(*args)\n    new(*args).call\n  end\n\n  def initialize(username, password)\n    @username = \"#{username}@company.com\"\n    @password = password\n  end\n\n  def call\n    search_title_if_valid_user\n  end\n\n  private\n  def search_title_if_valid_user\n    ldap = Net::LDAP.new(\n      host: server_ip_address,\n      port: 389,\n      base: \"DC=corp,DC=com\",   # change for your company values\n      auth: { method: :simple, username: @username, password: @password }\n    )\n\n    ldap.search(attributes: [\"title\"]) if ldap.bind\n  end\nend\n</code></pre>\n\n<p>Then use it in your controller like this:</p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n  def new\n  end\n\n  def create\n    username = params[:nome]\n    password = params[:password]\n\n    title = AuthenticateUser.call(username, password)\n\n    if title\n      user = User.create_with(nome: username).find_or_create_by(NumeroEmpregado: title)\n      session[:user_id] = user.id\n      redirect_to '/'\n    else\n      flash[:error] = \"Erro!              \\nN\u00famero de Empregado e/ou password incorrecto(a)\"\n      redirect_to '/login'\n     end\n  end\n\n  def destroy\n    session[:user_id] = nil\n    redirect_to '/index/new'\n  end\nend\n</code></pre>\n\n<p>This assumes that <code>NumeroEmpregado</code> value is stored in the <code>title</code> attribute within your LDAP server.</p>\n"}, {"comments": [{"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1499872588, "post_id": 45061281, "comment_id": 77096596, "body": "@AnroDeodo Yes, you can, using <code>user.persisted?</code> is a good way to catch failed created users."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 1, "creation_date": 1499872645, "post_id": 45061281, "comment_id": 77096639, "body": "The only catch here is that <code>User.find_or_create_by(nome: username)</code> will fail every time if additional attributes are needed in the model. If so, thats where <code>create_with</code> comes handy."}, {"owner": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "edited": false, "score": 0, "creation_date": 1499873427, "post_id": 45061281, "comment_id": 77097231, "body": "Actually since now it will save another field,  the two calls make sense. And since now the abstraction gerry introduced checks first if the LDAP user exists in the external system (and assuming no duplicate users can exist in that system) it shouldn&#39;t be needed as long as your validations are correctly set for the user. On the first case you showed, since you were doing <code>create_with :nome</code>, and then <code>create_or_find_by :nome</code> it was unnecessary."}], "tags": [], "owner": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "is_accepted": false, "score": 0, "last_activity_date": 1499871580, "creation_date": 1499871580, "answer_id": 45061281, "question_id": 45059698, "link": "https://stackoverflow.com/questions/45059698/upon-login-authentication-with-ldap-ad-how-do-i-create-a-user-row-if-one-is-non/45061281#45061281", "title": "upon login authentication with LDAP/AD how do I create a user row if one is non existent using AD records", "body": "<p>I think you also want to re-write the creation of the user, because basically you're trying to create it first, and the calling find or create again. You can have it all in the same method, hence it's <code>find_or_create_by</code>. You probably want to make sure the user was created/exists as well (<code>.persisted?</code> will return true for either).</p>\n\n<pre><code>if AuthenticateUser.new(username, password).call\n  user = User.find_or_create_by(nome: username)\n  if user.persisted?\n    session[:user_id] = user.id\n    redirect_to '/'\n  else\n    #...\n  end\nelse\n  flash[:error] = \"Erro!              \\nN\u00famero de Empregado e/ou password incorrecto(a)\"\n  redirect_to '/login'\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8283967"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 45061151, "answer_count": 2, "score": 0, "last_activity_date": 1499871948, "creation_date": 1499867704, "last_edit_date": 1499871841, "question_id": 45059698, "link": "https://stackoverflow.com/questions/45059698/upon-login-authentication-with-ldap-ad-how-do-i-create-a-user-row-if-one-is-non", "title": "upon login authentication with LDAP/AD how do I create a user row if one is non existent using AD records", "body": "<p>Currently I have this code for my sessions_controller:</p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n  def new\n  end\n\n  def create\n    username = params[:nome]\n    password = params[:password]\n    name     = username \n\n    if AuthenticateUser.new(username, password).call\n      user = User.create_with(nome: name).find_or_create_by(nome: user)\n      session[:user_id] = user.id\n      redirect_to '/'\n    else\n      flash[:error] = \"Erro!              \\nN\u00famero de Empregado e/ou password incorrecto(a)\"\n      redirect_to '/login'\n     end\n  end\n\n  def destroy\n    session[:user_id] = nil\n    redirect_to '/index/new'\n  end\nend\n</code></pre>\n\n<p>What I want to do is to check if the user that I'm logging in with the <code>LDAP</code> (as shown in <a href=\"https://stackoverflow.com/questions/45055287/i-have-an-ldap-connection-on-my-ror-app-but-now-how-do-i-check-users-on-login\">my previous question</a>) has a field in my <code>users</code> table and if not to automatically create one with the username and attributing it an automatically <code>user_id</code> that Rails does and getting a field from the <code>LDAP</code> and putting it in my <code>SQLSERVER DB</code>, the problem is when I log in with my account It just redirects me to '/' (root) without any error notices and without creating a new row on my <code>database</code></p>\n\n<p>I'm using <code>SqlServer Management Studio</code> and my users table has the following fields: <code>id NumeroEmpregado nome created_at updated_at</code></p>\n\n<p>I want to make <code>NumeroEmpregado</code> to be automatically given from the <code>LDAP</code> (attribute in LDAP is <code>title</code>). I'll worry with that later, and I want <code>nome</code> to be the <code>username</code> given in the form:</p>\n\n<pre><code> &lt;%= form_tag '/login' do %&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;div class=\"text\"&gt;\n      N\u00famero de Empregado: &lt;br&gt; \n      &lt;%= text_field_tag :nome %&gt;&lt;br&gt;\n      Password: &lt;br&gt;\n      &lt;%= password_field_tag :password %&gt;&lt;br&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;%= submit_tag \"Submit\", class: \"button\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<ul>\n<li>How can I do this/What are the errors in my code?</li>\n</ul>\n"}, {"tags": ["python", "ruby", "selenium", "xpath"], "answers": [{"tags": [], "owner": {"reputation": 1298, "user_id": 6305204, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jGfSZ.png?s=128&g=1", "display_name": "con--", "link": "https://stackoverflow.com/users/6305204/con"}, "is_accepted": true, "score": 1, "last_activity_date": 1499868982, "creation_date": 1499868982, "answer_id": 45060214, "question_id": 45059562, "link": "https://stackoverflow.com/questions/45059562/selenium-xpath-behaving-differently-with-python-than-with-ruby/45060214#45060214", "title": "Selenium xpath behaving differently with python than with ruby", "body": "<p>The issue was that I was following a page redirect and trying to select elements before they were rendered. <a href=\"https://stackoverflow.com/questions/26566799/selenium-python-how-to-wait-until-the-page-is-loaded\">This</a> answer solved it. </p>\n"}], "owner": {"reputation": 1298, "user_id": 6305204, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jGfSZ.png?s=128&g=1", "display_name": "con--", "link": "https://stackoverflow.com/users/6305204/con"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "closed_date": 1499869097, "accepted_answer_id": 45060214, "answer_count": 1, "score": 0, "last_activity_date": 1523634488, "creation_date": 1499867337, "last_edit_date": 1523634488, "question_id": 45059562, "link": "https://stackoverflow.com/questions/45059562/selenium-xpath-behaving-differently-with-python-than-with-ruby", "closed_reason": "Duplicate", "title": "Selenium xpath behaving differently with python than with ruby", "body": "<p>I'm having a strange issue with selenium.</p>\n\n<ol>\n<li><p>This ruby code:</p>\n\n<pre><code>page.all(:xpath, \"//table[3]//tr[last()]//td\")\n</code></pre>\n\n<p>Will get me all the cells of the last row of the third table on a page.</p></li>\n<li><p>This python code:</p>\n\n<pre><code>driver.find_elements_by_xpath(\"//table[3]//tr[last()]//td\")\n</code></pre>\n\n<p>Doesn't return anything at all.</p></li>\n</ol>\n\n<p>Edit: The issue was with the page loading at different speeds. <a href=\"https://stackoverflow.com/questions/26566799/how-to-wait-until-the-page-is-loaded-with-selenium-for-python\">Waiting until the page loaded</a> solved the problem.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 2070, "user_id": 1010826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d926cfe6638d33207f97dbd5a5103ba1?s=128&d=identicon&r=PG", "display_name": "Magnuss", "link": "https://stackoverflow.com/users/1010826/magnuss"}, "is_accepted": false, "score": 2, "last_activity_date": 1499865713, "creation_date": 1499865713, "answer_id": 45058890, "question_id": 45058675, "link": "https://stackoverflow.com/questions/45058675/config-environments-development-rb-command-not-found/45058890#45058890", "title": "config/environments/development.rb command not found", "body": "<p>You don't run the environment file, that is for configuration purposes <em>only</em>.</p>\n\n<p>You need to run the web server, which serves GitLab. Read docs about starting the web server, usually it's <code>bundle exec rails s</code>, but it would depend on the setup.</p>\n"}, {"tags": [], "owner": {"reputation": 2045, "user_id": 7852682, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/846c3df5348d19c9aa28e61e35d11498?s=128&d=identicon&r=PG&f=1", "display_name": "slal", "link": "https://stackoverflow.com/users/7852682/slal"}, "is_accepted": true, "score": 0, "last_activity_date": 1499872721, "creation_date": 1499872721, "answer_id": 45061716, "question_id": 45058675, "link": "https://stackoverflow.com/questions/45058675/config-environments-development-rb-command-not-found/45061716#45061716", "title": "config/environments/development.rb command not found", "body": "<p>Why are you trying to run the <code>development.rb</code>. It is only for configuration. Settings specified here will take precedence over those in <code>config/application.rb</code>.</p>\n\n<p>When you do a <code>rails s</code> i.e run your rails server, the file gets executed. The <code>environment.rb</code> requires the <code>application.rb</code> before it initializes the rails app.</p>\n\n<p>If you want to just run your rails app then doing a <code>rails s</code> should be fine</p>\n"}], "owner": {"reputation": 13, "user_id": 8295802, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/883c977100eb0a1c2280b3032183cd36?s=128&d=identicon&r=PG&f=1", "display_name": "Lax", "link": "https://stackoverflow.com/users/8295802/lax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 0, "accepted_answer_id": 45061716, "answer_count": 2, "score": 1, "last_activity_date": 1499885691, "creation_date": 1499865168, "last_edit_date": 1499885691, "question_id": 45058675, "link": "https://stackoverflow.com/questions/45058675/config-environments-development-rb-command-not-found", "title": "config/environments/development.rb command not found", "body": "<p>I would like run a <code>gitlab ruby on rails</code> project.\nAfter  cloning I would like to build up the environment but there is permission problems. <code>config/environments/development.rb get chmod +x</code> then I use <code>config/environments/development.rb</code> command: </p>\n\n<pre><code>config/environments/development.rb\nconfig/environments/development.rb: line     1: Rails.application.configure: command not found\nconfig/environments/development.rb: line 7: config.cache_classes: command not found\nconfig/environments/development.rb: line 10: config.eager_load: command not found\nconfig/environments/development.rb: line 13: config.consider_all_requests_local: command not found\nconfig/environments/development.rb: line 14: config.action_controller.perform_caching: command not found\nconfig/environments/development.rb: line 17: config.action_mailer.raise_delivery_errors: command not found\nconfig/environments/development.rb: line 20: config.active_support.deprecation: command not found\nconfig/environments/development.rb: line 23: config.active_record.migration_error: command not found\nconfig/environments/development.rb: line 28: config.assets.debug: command not found\nconfig/environments/development.rb: line 32: config.assets.digest: command not found\nconfig/environments/development.rb: line 37: config.assets.raise_runtime_errors: command not found\nconfig/environments/development.rb: line 41: end: command not found\n</code></pre>\n\n<p>And this is the development.rb</p>\n\n<pre><code>Rails.application.configure do\n  # Settings specified here will take precedence over those in config/application.rb.\n\n  # In the development environment your application's code is reloaded on\n  # every request. This slows down response time but is perfect for development\n  # since you don't have to restart the web server when you make code changes.\n  config.cache_classes = false\n\n  # Do not eager load code on boot.\n  config.eager_load = false\n\n  # Show full error reports and disable caching.\n  config.consider_all_requests_local       = true\n  config.action_controller.perform_caching = false\n\n  # Don't care if the mailer can't send.\n  config.action_mailer.raise_delivery_errors = false\n\n  # Print deprecation notices to the Rails logger.\n  config.active_support.deprecation = :log\n\n  # Raise an error on page load if there are pending migrations.\n  config.active_record.migration_error = :page_load\n\n  # Debug mode disables concatenation and preprocessing of assets.\n  # This option may cause significant delays in view rendering with a large\n  # number of complex assets.\n  config.assets.debug = true\n\n  # Asset digests allow you to set far-future HTTP expiration dates on all assets,\n  # yet still be able to expire them through the digest params.\n  config.assets.digest = true\n\n  # Adds additional error checking when serving assets at runtime.\n  # Checks for improperly declared sprockets dependencies.\n  # Raises helpful error messages.\n  config.assets.raise_runtime_errors = true\n\n  # Raises error for missing translations\n  # config.action_view.raise_on_missing_translations = true\nend\n</code></pre>\n\n<p>Ruby 2.3.0</p>\n\n<p>Rails 4.2.6</p>\n\n<p>bundle install run successfully</p>\n\n<p>The project use 2.3.0 ruby</p>\n"}, {"tags": ["ruby", "regex", "gsub"], "answers": [{"comments": [{"owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "edited": false, "score": 0, "creation_date": 1499866139, "post_id": 45058733, "comment_id": 77091518, "body": "If I do <code>ruby -0777 -pe &#39;ARGF.read.gsub(&#47;href{[^}]+}&#47;){ |href| href.gsub(%q|#|, %q|\\#|) }&#39; test.txt</code> then it  works for the first link, but not the remaining. What am I doing wrong?"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 3, "last_activity_date": 1499884742, "last_edit_date": 1499884742, "creation_date": 1499865322, "answer_id": 45058733, "question_id": 45058600, "link": "https://stackoverflow.com/questions/45058600/how-to-use-gsub-to-simplify-regular-expressions/45058733#45058733", "title": "How to use gsub to simplify regular expressions", "body": "<p>You could use two gsubs : one with an argument and a block (for <code>href{...}</code>), one with 2 arguments (to replace <code>#</code> with <code>\\#</code>):</p>\n\n<pre><code>text = %q(Here is some text with a \\href{./file.pdf#section.1.5}{link} to section 1.5.)\nputs text.gsub(/href{[^}]+}/){ |href| href.gsub('#', '\\#') }\n#=&gt; Here is some text with a \\href{./file.pdf\\#section.1.5}{link} to section 1.5.\n</code></pre>\n\n<p>If you want to launch it from a terminal with <code>ruby -e</code> for a <code>test.txt</code> file, you can use:</p>\n\n<pre><code>ruby -pe '$_.gsub(/href{[^}]+}/){ |href| href.gsub(%q|#|, %q|\\#|) }' test.txt\n# Here is some text with a \\href{./file.pdf#section.1.5}{link} to section 1.5.\n# Here is some text with a \\href{./file.pdf#section.1.6}{link} to section 1.6.\n# Here is some text with a \\href{./file.pdf#section.1.7}{link} to section 1.7.\n</code></pre>\n\n<p>or</p>\n\n<pre><code>ruby -e 'puts ARGF.read.gsub(/href{[^}]+}/){ |href| href.gsub(%q|#|, %q|\\#|) }' test.txt\n# Here is some text with a \\href{./file.pdf#section.1.5}{link} to section 1.5.\n# Here is some text with a \\href{./file.pdf#section.1.6}{link} to section 1.6.\n# Here is some text with a \\href{./file.pdf#section.1.7}{link} to section 1.7.\n</code></pre>\n\n<p>Do not mix <code>ruby -pe</code> and <code>ARGF.read</code>, it would only read the first line of your file!</p>\n"}, {"tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": true, "score": 3, "last_activity_date": 1499867954, "creation_date": 1499867954, "answer_id": 45059813, "question_id": 45058600, "link": "https://stackoverflow.com/questions/45058600/how-to-use-gsub-to-simplify-regular-expressions/45059813#45059813", "title": "How to use gsub to simplify regular expressions", "body": "<p>Except if one or several of the urls contained inside <code>\\href{..}</code>s has a password part enclosed between quotes like <code>http://username:\"sdkfj#lkn#\"@domainname.org/path/file.ext</code>, the only possible place for the character <code>#</code> in a url is at the end and delimits the fragment part: <code>./path/path/file.rb?val=toto#thefragmentpart</code>.</p>\n\n<p>In other words, if I am not wrong there's max one <code>#</code> to escape per <code>href{...}</code>. Then you can simply do that:</p>\n\n<pre><code>text.gsub(/\\\\href{[^#}]*\\K#/, \"\\\\#\")\n</code></pre>\n\n<p>The character class <code>[^#}]</code> forbids the character <code>}</code> and ensures that you are always between curly brackets.</p>\n"}], "owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 45059813, "answer_count": 2, "score": 2, "last_activity_date": 1499884742, "creation_date": 1499864970, "last_edit_date": 1499868118, "question_id": 45058600, "link": "https://stackoverflow.com/questions/45058600/how-to-use-gsub-to-simplify-regular-expressions", "title": "How to use gsub to simplify regular expressions", "body": "<p>I would like to escape the <code>#</code> with <code>\\</code> when they appear in <code>\\href</code> commands.</p>\n\n<p>Normally I would write a regex such as <code>s/(\\\\href\\{.*?)#(.*?)\\}/\\1\\\\#\\2/g</code>, but I imagine <code>gsub</code> would we a good choice here to first extract the <code>\\href</code> content and then replace <code>#</code> with <code>\\#</code>.</p>\n\n<pre><code>Here is some text with a \\href{./file.pdf#section.1.5}{link} to section 1.5.\n</code></pre>\n\n<p>There can be multiple links in one line.</p>\n\n<p><strong>Question</strong></p>\n\n<p>Can <code>gsub</code> simplify these sorts of problems?</p>\n"}, {"tags": ["ruby", "oauth-2.0", "sinatra", "basecamp"], "answers": [{"tags": [], "owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "is_accepted": false, "score": 0, "last_activity_date": 1499866223, "creation_date": 1499866223, "answer_id": 45059117, "question_id": 45058420, "link": "https://stackoverflow.com/questions/45058420/oauth-issue-with-basecamp/45059117#45059117", "title": "oauth issue with basecamp", "body": "<p>Turns out that the url fields was wrong, should be <code>type</code> not <code>response_type</code>.</p>\n"}], "owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 114, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499866223, "creation_date": 1499864498, "last_edit_date": 1499866034, "question_id": 45058420, "link": "https://stackoverflow.com/questions/45058420/oauth-issue-with-basecamp", "title": "oauth issue with basecamp", "body": "<p>I'm getting the following error:</p>\n\n<blockquote>\n  <p>--- :error: 'Unsupported type: nil. We support user_agent and web_server.'</p>\n</blockquote>\n\n<p>when I try to redirect using this url:</p>\n\n<pre><code>https://launchpad.37signals.com/authorization/new?client_id=&lt;client_ID&gt;&amp;redirect_uri=http://localhost:9292/oauth/callback&amp;response_type=code\n</code></pre>\n\n<p>Here's the code I'm using </p>\n\n<pre><code>class Client &lt; Sinatra::Base\n  get '/oauth' do\n    redirect ::Base_Camp.oauth.auth_url\n  end\nend\n</code></pre>\n\n<p>edit: Also I changed <code>response_type</code> to <code>token</code>  and no change</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1499864866, "post_id": 45058271, "comment_id": 77090486, "body": "Can you post the <code>products_controller</code> code?"}, {"owner": {"reputation": 938, "user_id": 3389866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100001760573877/picture?type=large", "display_name": "fcastillo", "link": "https://stackoverflow.com/users/3389866/fcastillo"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1499865234, "post_id": 45058271, "comment_id": 77090775, "body": "Yes, edited with all code in <code>products_controller.rb</code>"}, {"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 1, "creation_date": 1499865966, "post_id": 45058271, "comment_id": 77091380, "body": "Have a look at this link <a href=\"http://www.blazeboy.me/rails-accepts_nested_attributes-for-polymorphic-relation-solution.html\" rel=\"nofollow noreferrer\">blazeboy.me/&hellip;</a>"}, {"owner": {"reputation": 938, "user_id": 3389866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100001760573877/picture?type=large", "display_name": "fcastillo", "link": "https://stackoverflow.com/users/3389866/fcastillo"}, "edited": false, "score": 0, "creation_date": 1499866794, "post_id": 45058271, "comment_id": 77092024, "body": "Thats works great! Thanks!!!"}], "answers": [{"tags": [], "owner": {"reputation": 1039, "user_id": 558232, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/aLHwj.jpg?s=128&g=1", "display_name": "shivashankar", "link": "https://stackoverflow.com/users/558232/shivashankar"}, "is_accepted": false, "score": 0, "last_activity_date": 1499866370, "creation_date": 1499866370, "answer_id": 45059171, "question_id": 45058271, "link": "https://stackoverflow.com/questions/45058271/rails-5-error-accepts-nested-attributes-for-in-polymorphic/45059171#45059171", "title": "Rails 5 error accepts_nested_attributes_for in polymorphic", "body": "<p>As Hotel model has one Product via polymorphic, </p>\n\n<pre><code>class HotelRoom &lt; ApplicationRecord\n  has_one :product, as: :type_data, dependent: :destroy\n  accepts_nested_attributes_for :product, allow_destroy: true\n  accepts_nested_attributes_for :rates, allow_destroy: true\n ....\nend\n</code></pre>\n\n<p>In hotel_rooms controller new action</p>\n\n<pre><code>def new\n    @hotel_room  = HotelRoom.new\n    @hotel_room.build_product\nend\n</code></pre>\n\n<p>In Hotel view form</p>\n\n<pre><code>&lt;%= form_for(@hotel_room) do |f| %&gt;\n   ....\n   &lt;%= f.fields_for(:product) do |p| %&gt;\n    ....\n   &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Note:\nIf you have common data between HotelRoom and Product, then you need to introduce another model like TypeData and set it polymorphic.</p>\n"}], "owner": {"reputation": 938, "user_id": 3389866, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/100001760573877/picture?type=large", "display_name": "fcastillo", "link": "https://stackoverflow.com/users/3389866/fcastillo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 288, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499866370, "creation_date": 1499864139, "last_edit_date": 1499865165, "question_id": 45058271, "link": "https://stackoverflow.com/questions/45058271/rails-5-error-accepts-nested-attributes-for-in-polymorphic", "title": "Rails 5 error accepts_nested_attributes_for in polymorphic", "body": "<p>I have an error when I try create a product: \"Cannot build association 'type_data'. Are you trying to build a polymorphic one-to-one association?\"</p>\n\n<p>I don't know what is happend. I saw a lot examples with the same code but mine doesn't work.</p>\n\n<p>Here my <code>product.rb</code></p>\n\n<pre><code>class Product &lt; ApplicationRecord\n  belongs_to :type_data, polymorphic: true\n  accepts_nested_attributes_for :type_data, allow_destroy: true\nend\n</code></pre>\n\n<p>Here my hotel_room.rb</p>\n\n<pre><code>class HotelRoom &lt; ApplicationRecord\n  has_one :product, as: :type_data, dependent: :destroy\n  has_many :rates\n  accepts_nested_attributes_for :rates, allow_destroy: true\nend\n</code></pre>\n\n<p>My products/_form.html.erb</p>\n\n<pre><code>&lt;%= f.fields_for :type_data do |builder| %&gt;\n  &lt;%= render \"edit_hotel_account_fields\", f: builder %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>My products/_edit_account_fields.heml.erb</p>\n\n<pre><code>&lt;%= f.fields_for :rates do |builder| %&gt;\n  &lt;%= render 'rate_fields', f: builder %&gt;\n&lt;% end %&gt;\n&lt;%= link_to_add_fields \"Add rate\", f, :rates %&gt;\n</code></pre>\n\n<p>My products/_rate_fields.html.erb</p>\n\n<pre><code>&lt;div class=\"form-group\"&gt;\n  &lt;label&gt;&lt;%= t('products.new.rates.double_price') %&gt;&lt;/label&gt;\n  &lt;%= f.number_field :double_price, step: 0.1, class: 'form-control' %&gt;\n&lt;/div&gt;\n&lt;%= f.hidden_field :_destroy %&gt;\n&lt;%= link_to \"remove\", '#', class: \"remove_fields\" %&gt;\n</code></pre>\n\n<p>And this is all my products_controller.rb</p>\n\n<pre><code>    class ProductsController &lt; ApplicationController\n  before_action :set_product, only: [:show, :edit, :update, :destroy]\n\n  # GET /products\n  # GET /products.json\n  def index\n    @products = Product.all\n  end\n\n  # GET /products/1\n  # GET /products/1.json\n  def show\n  end\n\n  # GET /products/new\n  def new\n    @product = Product.new\n  end\n\n  # GET /products/1/edit\n  def edit\n  end\n\n  # POST /products\n  # POST /products.json\n  def create\n    @product = Product.new(product_params)\n\n    respond_to do |format|\n      if @product.save\n        format.html { redirect_to products_path, notice: 'Product was successfully created.' }\n        format.json { render :show, status: :created, location: @product }\n      else\n        format.html { render :new }\n        format.json { render json: @product.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /products/1\n  # PATCH/PUT /products/1.json\n  def update\n    respond_to do |format|\n      if @product.update(product_params)\n        format.html { redirect_to @product, notice: 'Product was successfully updated.' }\n        format.json { render :show, status: :ok, location: @product }\n      else\n        format.html { render :edit }\n        format.json { render json: @product.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /products/1\n  # DELETE /products/1.json\n  def destroy\n    @product.destroy\n    respond_to do |format|\n      format.html { redirect_to products_url, notice: 'Product was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  # AJAX cargas m\u00e1s fechas\n  def date_range\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_product\n      @product = Product.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def product_params\n      params.require(:product).permit(:status, :provider_id, :commission, :title, :commercial_title, :title_seo, :description, :seo_description, :slug_web, :slug_redirection, :services, :info, :province, :state, :city, :country, :cancel_conditions, :limit_children_age, :special_alert, :notes, :stock, :iva, :minimum_advance, type_data_attributes: [:room_stock, :room_service, :_destroy, rates_attributes: [:title, :start_date, :end_date, :hotel_room_id, :individual_price, :double_price, :child_bed_price, :adult_bed_price, :adult_breakfast_price, :adult_medium_price, :adult_complete_price, :child_breakfast_price, :child_medium_price, :child_complete_price, :_destroy]], dates: {}, map: {}, address_autocomplete: {})\n    end\nend\n</code></pre>\n\n<p>Do anyone know what is happend? </p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": false, "score": 0, "last_activity_date": 1499864977, "creation_date": 1499864977, "answer_id": 45058605, "question_id": 45058164, "link": "https://stackoverflow.com/questions/45058164/ruby-beginner-code-only-repeats-2-times/45058605#45058605", "title": "Ruby beginner: code only repeats 2 times", "body": "<p>The problem is that <code>continue_question</code> only executes once, at the end of your code, but you need to loop until user exits (i.e types <code>n</code>).</p>\n\n<p>So simply add a loop inside <code>continue_question</code>, for example:</p>\n\n<pre><code>def continue_question \n  continue = \"y\" \n\n  until continue == \"n\" do\n    puts \"Do you want to continue? (y/n)\"  \n    continue = gets.chomp.to_s  \n\n    if continue == \"y\"  \n      calculator  \n    elsif continue == \"n\"  \n      puts \"Bye!\"  \n    else  \n      puts \"What?\"  \n    end\n  end\nend \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1499866209, "post_id": 45058652, "comment_id": 77091561, "body": "You could also consider using <code>while</code> or <code>loop</code> instead of calling the methods recursively like this. However, that&#39;s a larger refactor that&#39;s probably beyond the scope of your original question."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 0, "last_activity_date": 1499865110, "creation_date": 1499865110, "answer_id": 45058652, "question_id": 45058164, "link": "https://stackoverflow.com/questions/45058164/ruby-beginner-code-only-repeats-2-times/45058652#45058652", "title": "Ruby beginner: code only repeats 2 times", "body": "<p>Your code does not repeat 2 times, it repeats <strong>once</strong>.</p>\n\n<p>The reason is because in your <code>continue_question</code> method, you do not tell it to repeat again:</p>\n\n<pre><code>def continue_question\n  puts \"Do you want to continue? (y/n)\"\n  continue = gets.chomp.to_s\n\n  if continue == \"y\"\n    calculator # &lt;-- This causes it it repeat ONCE!\n  elsif continue == \"n\"\n    puts \"Bye!\"\n  else\n    puts \"What?\"\n    continue_question\n  end\nend\n</code></pre>\n\n<p>A quick fix is to re-call the <code>continue_question</code> method below that line, to recursively repeat itself:</p>\n\n<pre><code>def continue_question\n  puts \"Do you want to continue? (y/n)\"\n  continue = gets.chomp.to_s\n\n  if continue == \"y\"\n    calculator\n    continue_question # &lt;-- Add this to repeat indefinitely\n  elsif continue == \"n\"\n    puts \"Bye!\"\n  else\n    puts \"What?\"\n    continue_question\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5388303, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nmv3T.jpg?s=128&g=1", "display_name": "Ovidiu", "link": "https://stackoverflow.com/users/5388303/ovidiu"}, "is_accepted": false, "score": 0, "last_activity_date": 1499865478, "creation_date": 1499865478, "answer_id": 45058801, "question_id": 45058164, "link": "https://stackoverflow.com/questions/45058164/ruby-beginner-code-only-repeats-2-times/45058801#45058801", "title": "Ruby beginner: code only repeats 2 times", "body": "<blockquote>\n  <p>Hey the code I created only repeats 2 times.</p>\n</blockquote>\n\n<p>I think you misunderstand the following:</p>\n\n<pre><code>if continue == \"y\"  \n  calculator  \n  elsif continue == \"n\"  \n  puts \"Bye!\"  \n</code></pre>\n\n<p>When you call the above function <code>calculator</code>, you are still executing the <code>continue_question</code> function. So when the <code>calculator</code> finishes executing, <code>continue_question</code> will finish as well and the program will stop. For the wanted result you can try using a <a href=\"https://www.tutorialspoint.com/ruby/ruby_loops.htm\" rel=\"nofollow noreferrer\">loop</a>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8244676"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 45058652, "answer_count": 3, "score": 0, "last_activity_date": 1499865478, "creation_date": 1499863763, "last_edit_date": 1499863862, "question_id": 45058164, "link": "https://stackoverflow.com/questions/45058164/ruby-beginner-code-only-repeats-2-times", "title": "Ruby beginner: code only repeats 2 times", "body": "<p>Hey the code I created only repeats 2 times.\nAfter I type the second time \"y\" for the \"continue_question\"-method the code only stops.</p>\n\n<pre><code>def greeting  \n  puts \"Hello! Please type your name: \"  \n  name = gets.chomp.capitalize  \n\n  puts \"It is nice to meet you #{name}.  I am a simple calculator application.\"  \n  puts \"I can add, subtract, multiply, and divide.\"  \nend  \n\ngreeting  \n\ndef calculator  \n\n    puts \"First number: \"  \n    @n1 = gets.chomp.to_i  \n    puts \"Secons number: \"  \n    @n2 = gets.chomp.to_i  \n\ndef calculation\n  puts \"Type 1 to add, 2 to subtract, 3 to multiply, or 4 to divide two numbers: \"\n  operation_selection = gets.chomp.to_i  \n\n    if operation_selection == 1  \n      @result = @n1 + @n2  \n    elsif operation_selection == 2  \n      @result = @n1 - @n2  \n    elsif operation_selection == 3  \n      @result = @n1 * @n2  \n    elsif operation_selection == 4  \n      @result = @n1 / @n2  \n    else  \n      puts \"Something went wrong!\"  \n      calculation  \n    end  \nend  \n\ncalculation  \n\nputs \"Your Result is #{@result}\"  \nend  \n\ncalculator  \n\ndef continue_question  \nputs \"Do you want to continue? (y/n)\"  \ncontinue = gets.chomp.to_s  \n\nif continue == \"y\"  \n  calculator  \n  elsif continue == \"n\"  \n  puts \"Bye!\"  \nelse  \n  puts \"What?\"  \n  continue_question  \nend  \nend  \n\ncontinue_question \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "memory-management", "memory-leaks", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 4023, "user_id": 396964, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9d5d2fc7ebac788a7eca7acd89a96485?s=128&d=identicon&r=PG", "display_name": "chrismanderson", "link": "https://stackoverflow.com/users/396964/chrismanderson"}, "edited": false, "score": 0, "creation_date": 1499867647, "post_id": 45057920, "comment_id": 77092691, "body": "Not an answer but checkout <a href=\"https://blog.codeship.com/debugging-a-memory-leak-on-heroku/\" rel=\"nofollow noreferrer\">blog.codeship.com/debugging-a-memory-leak-on-heroku</a> for more leak detection suggestions."}], "answers": [{"tags": [], "owner": {"reputation": 3380, "user_id": 3757435, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/m8r2q.png?s=128&g=1", "display_name": "Mugur &#39;Bud&#39; Chirica", "link": "https://stackoverflow.com/users/3757435/mugur-bud-chirica"}, "is_accepted": false, "score": 1, "last_activity_date": 1499941049, "creation_date": 1499941049, "answer_id": 45077754, "question_id": 45057920, "link": "https://stackoverflow.com/questions/45057920/detect-ruby-memory-leaks/45077754#45077754", "title": "Detect Ruby Memory Leaks", "body": "<p>Give <a href=\"https://github.com/MiniProfiler/rack-mini-profiler\" rel=\"nofollow noreferrer\">rack-mini-profiler</a> a try, you have various ways to see how your application manages resources, in your case you are probably interested in <a href=\"https://github.com/MiniProfiler/rack-mini-profiler#memory-profiling\" rel=\"nofollow noreferrer\">memory profiling</a>.</p>\n"}], "owner": {"reputation": 2063, "user_id": 936747, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/39b4b0385a36027295651b1fc8eb2487?s=128&d=identicon&r=PG", "display_name": "Jak", "link": "https://stackoverflow.com/users/936747/jak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1595, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499941049, "creation_date": 1499863091, "question_id": 45057920, "link": "https://stackoverflow.com/questions/45057920/detect-ruby-memory-leaks", "title": "Detect Ruby Memory Leaks", "body": "<p>I am using Ruby 2.3.3 and Rails 5.0.1. In my application the memory is increasing for each and every request and not reducing when the request is complete.</p>\n\n<p>Installed Gems: (GemFile.lock)</p>\n\n<pre><code>GEM\n  remote: https://rubygems.org/\n  specs:\n    actioncable (5.0.1)\n      actionpack (= 5.0.1)\n      nio4r (~&gt; 1.2)\n      websocket-driver (~&gt; 0.6.1)\n    actionmailer (5.0.1)\n      actionpack (= 5.0.1)\n      actionview (= 5.0.1)\n      activejob (= 5.0.1)\n      mail (~&gt; 2.5, &gt;= 2.5.4)\n      rails-dom-testing (~&gt; 2.0)\n    actionpack (5.0.1)\n      actionview (= 5.0.1)\n      activesupport (= 5.0.1)\n      rack (~&gt; 2.0)\n      rack-test (~&gt; 0.6.3)\n      rails-dom-testing (~&gt; 2.0)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.2)\n    actionview (5.0.1)\n      activesupport (= 5.0.1)\n      builder (~&gt; 3.1)\n      erubis (~&gt; 2.7.0)\n      rails-dom-testing (~&gt; 2.0)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.2)\n    activejob (5.0.1)\n      activesupport (= 5.0.1)\n      globalid (&gt;= 0.3.6)\n    activemodel (5.0.1)\n      activesupport (= 5.0.1)\n    activerecord (5.0.1)\n      activemodel (= 5.0.1)\n      activesupport (= 5.0.1)\n      arel (~&gt; 7.0)\n    activesupport (5.0.1)\n      concurrent-ruby (~&gt; 1.0, &gt;= 1.0.2)\n      i18n (~&gt; 0.7)\n      minitest (~&gt; 5.1)\n      tzinfo (~&gt; 1.1)\n    addressable (2.5.0)\n      public_suffix (~&gt; 2.0, &gt;= 2.0.2)\n    airbrussh (1.1.1)\n      sshkit (&gt;= 1.6.1, != 1.7.0)\n    arel (7.1.4)\n    builder (3.2.2)\n    byebug (9.0.6)\n    capistrano (3.7.1)\n      airbrussh (&gt;= 1.0.0)\n      capistrano-harrow\n      i18n\n      rake (&gt;= 10.0.0)\n      sshkit (&gt;= 1.9.0)\n    capistrano-bundler (1.2.0)\n      capistrano (~&gt; 3.1)\n      sshkit (~&gt; 1.2)\n    capistrano-harrow (0.5.3)\n    capistrano-rails (1.2.0)\n      capistrano (~&gt; 3.1)\n      capistrano-bundler (~&gt; 1.1)\n    capistrano-rvm (0.1.2)\n      capistrano (~&gt; 3.0)\n      sshkit (~&gt; 1.2)\n    capistrano-ssh-doctor (1.0.0)\n      capistrano (&gt;= 3.1)\n    capybara (2.11.0)\n      addressable\n      mime-types (&gt;= 1.16)\n      nokogiri (&gt;= 1.3.3)\n      rack (&gt;= 1.0.0)\n      rack-test (&gt;= 0.5.4)\n      xpath (~&gt; 2.0)\n    codeclimate-test-reporter (1.0.6)\n      simplecov\n    coderay (1.1.1)\n    concurrent-ruby (1.0.3)\n    database_cleaner (1.5.3)\n    diff-lcs (1.2.5)\n    docile (1.1.5)\n    dotenv (2.1.1)\n    erubis (2.7.0)\n    execjs (2.7.0)\n    factory_girl (4.8.0)\n      activesupport (&gt;= 3.0.0)\n    factory_girl_rails (4.8.0)\n      factory_girl (~&gt; 4.8.0)\n      railties (&gt;= 3.0.0)\n    faker (1.6.6)\n      i18n (~&gt; 0.5)\n    fast_stack (0.2.0)\n    globalid (0.3.7)\n      activesupport (&gt;= 4.1.0)\n    honeybadger (2.7.2)\n    htmlbeautifier (1.2.1)\n    httparty (0.14.0)\n      multi_xml (&gt;= 0.5.2)\n    i18n (0.7.0)\n    jasmine (2.5.1)\n      jasmine-core (&gt;= 2.5.1, &lt; 3.0.0)\n      phantomjs\n      rack (&gt;= 1.2.1)\n      rake\n    jasmine-core (2.5.2)\n    jasmine-jquery-rails (2.0.3)\n    json (2.0.2)\n    launchy (2.4.3)\n      addressable (~&gt; 2.3)\n    libv8 (3.16.14.17)\n    libv8 (3.16.14.17-x86_64-darwin-16)\n    loofah (2.0.3)\n      nokogiri (&gt;= 1.5.9)\n    mail (2.6.4)\n      mime-types (&gt;= 1.16, &lt; 4)\n    mail_gate (1.1.2)\n      mail\n    memory_profiler (0.9.8)\n    method_source (0.8.2)\n    mime-types (3.1)\n      mime-types-data (~&gt; 3.2015)\n    mime-types-data (3.2016.0521)\n    mini_portile2 (2.1.0)\n    minitest (5.10.1)\n    multi_xml (0.6.0)\n    net-scp (1.2.1)\n      net-ssh (&gt;= 2.6.5)\n    net-ssh (3.2.0)\n    newrelic_rpm (3.17.2.327)\n    nio4r (1.2.1)\n    nokogiri (1.6.8.1)\n      mini_portile2 (~&gt; 2.1.0)\n    pg (0.19.0)\n    phantomjs (2.1.1.0)\n    pry (0.10.4)\n      coderay (~&gt; 1.1.0)\n      method_source (~&gt; 0.8.1)\n      slop (~&gt; 3.4)\n    pry-byebug (3.4.2)\n      byebug (~&gt; 9.0)\n      pry (~&gt; 0.10)\n    public_suffix (2.0.4)\n    puma (3.6.2)\n    rack (2.0.1)\n    rack-mini-profiler (0.10.5)\n      rack (&gt;= 1.2.0)\n    rack-test (0.6.3)\n      rack (&gt;= 1.0)\n    rails (5.0.1)\n      actioncable (= 5.0.1)\n      actionmailer (= 5.0.1)\n      actionpack (= 5.0.1)\n      actionview (= 5.0.1)\n      activejob (= 5.0.1)\n      activemodel (= 5.0.1)\n      activerecord (= 5.0.1)\n      activesupport (= 5.0.1)\n      bundler (&gt;= 1.3.0, &lt; 2.0)\n      railties (= 5.0.1)\n      sprockets-rails (&gt;= 2.0.0)\n    rails-controller-testing (1.0.1)\n      actionpack (~&gt; 5.x)\n      actionview (~&gt; 5.x)\n      activesupport (~&gt; 5.x)\n    rails-dom-testing (2.0.1)\n      activesupport (&gt;= 4.2.0, &lt; 6.0)\n      nokogiri (~&gt; 1.6.0)\n    rails-html-sanitizer (1.0.3)\n      loofah (~&gt; 2.0)\n    railties (5.0.1)\n      actionpack (= 5.0.1)\n      activesupport (= 5.0.1)\n      method_source\n      rake (&gt;= 0.8.7)\n      thor (&gt;= 0.18.1, &lt; 2.0)\n    rake (12.0.0)\n    ref (2.0.0)\n    rspec-core (3.5.4)\n      rspec-support (~&gt; 3.5.0)\n    rspec-expectations (3.5.0)\n      diff-lcs (&gt;= 1.2.0, &lt; 2.0)\n      rspec-support (~&gt; 3.5.0)\n    rspec-mocks (3.5.0)\n      diff-lcs (&gt;= 1.2.0, &lt; 2.0)\n      rspec-support (~&gt; 3.5.0)\n    rspec-rails (3.5.2)\n      actionpack (&gt;= 3.0)\n      activesupport (&gt;= 3.0)\n      railties (&gt;= 3.0)\n      rspec-core (~&gt; 3.5.0)\n      rspec-expectations (~&gt; 3.5.0)\n      rspec-mocks (~&gt; 3.5.0)\n      rspec-support (~&gt; 3.5.0)\n    rspec-support (3.5.0)\n    sass (3.4.23)\n    sass-rails (5.0.6)\n      railties (&gt;= 4.0.0, &lt; 6)\n      sass (~&gt; 3.1)\n      sprockets (&gt;= 2.8, &lt; 4.0)\n      sprockets-rails (&gt;= 2.0, &lt; 4.0)\n      tilt (&gt;= 1.1, &lt; 3)\n    shoulda-matchers (3.1.1)\n      activesupport (&gt;= 4.0.0)\n    simple_form (3.3.1)\n      actionpack (&gt; 4, &lt; 5.1)\n      activemodel (&gt; 4, &lt; 5.1)\n    simplecov (0.12.0)\n      docile (~&gt; 1.1.0)\n      json (&gt;= 1.8, &lt; 3)\n      simplecov-html (~&gt; 0.10.0)\n    simplecov-html (0.10.0)\n    simplecov-rcov (0.2.3)\n      simplecov (&gt;= 0.4.1)\n    slop (3.6.0)\n    spring (2.0.1)\n      activesupport (&gt;= 4.2)\n    sprockets (3.7.1)\n      concurrent-ruby (~&gt; 1.0)\n      rack (&gt; 1, &lt; 3)\n    sprockets-rails (3.2.0)\n      actionpack (&gt;= 4.0)\n      activesupport (&gt;= 4.0)\n      sprockets (&gt;= 3.0.0)\n    sshkit (1.11.5)\n      net-scp (&gt;= 1.1.2)\n      net-ssh (&gt;= 2.8.0)\n    stackprof (0.2.10)\n    supercache (0.7)\n    therubyracer (0.12.2)\n      libv8 (~&gt; 3.16.14.0)\n      ref\n    thor (0.19.4)\n    thread_safe (0.3.5)\n    tilt (2.0.5)\n    tzinfo (1.2.2)\n      thread_safe (~&gt; 0.1)\n    uglifier (3.0.4)\n      execjs (&gt;= 0.3.0, &lt; 3)\n    websocket-driver (0.6.4)\n      websocket-extensions (&gt;= 0.1.0)\n    websocket-extensions (0.1.2)\n    will_paginate (3.1.5)\n    will_paginate-bootstrap (1.0.1)\n      will_paginate (&gt;= 3.0.3)\n    xpath (2.0.0)\n      nokogiri (~&gt; 1.3)\n\nPLATFORMS\n  ruby\n  x86_64-darwin-16\n\nDEPENDENCIES\n  airbrussh\n  byebug\n  capistrano\n  capistrano-bundler\n  capistrano-rails\n  capistrano-rvm\n  capistrano-ssh-doctor\n  capybara\n  codeclimate-test-reporter (~&gt; 1.0.0)\n  database_cleaner\n  dotenv\n  factory_girl_rails\n  faker\n  fast_stack\n  honeybadger\n  htmlbeautifier\n  httparty\n  jasmine\n  jasmine-jquery-rails\n  launchy\n  mail_gate\n  memory_profiler\n  newrelic_rpm\n  pg\n  pry-byebug\n  puma\n  rack-mini-profiler\n  rails (= 5.0.1)\n  rails-controller-testing\n  rspec-rails\n  sass-rails (~&gt; 5.0.0.beta1)\n  shoulda-matchers\n  simple_form\n  simplecov\n  simplecov-rcov\n  spring\n  stackprof\n  supercache\n  therubyracer\n  uglifier\n  will_paginate\n  will_paginate-bootstrap\n\nRUBY VERSION\n   ruby 2.3.3p222\n\nBUNDLED WITH\n   1.15.1\n</code></pre>\n\n<p>I used <code>MemoryProfiler</code> to detect memory leaks. I have pasted the result of <code>MemoryProfiler.start</code> and <code>MemoryProfiler.stop</code>. <strong>Which one is causing leaks is not clear to me. Which gem or code causing memory leak issue?</strong> </p>\n\n<pre><code>Total allocated: 242425441 bytes (2105822 objects)\nTotal retained:  2970695 bytes (16840 objects)\n\nallocated memory by gem\n-----------------------------------\n  68444044  activerecord-5.0.1\n  48631659  activesupport-5.0.1\n  33867169  ruby-2.3.3/lib\n  26983147  actionview-5.0.1\n  20242402  i18n-0.7.0\n  15872628  20170712102216/app\n  10357404  simple_form-3.3.1\n   3187323  puma-3.6.2\n   3010603  newrelic_rpm-3.17.2.327\n   2581225  activemodel-5.0.1\n   2174325  rack-mini-profiler-0.10.5\n   2077399  rack-2.0.1\n   1785709  erubis-2.7.0\n   1634373  arel-7.1.4\n   1154020  actionpack-5.0.1\n    209364  other\n    122145  concurrent-ruby-1.0.3\n     57606  did_you_mean-1.0.0\n     16299  railties-5.0.1\n     12261  sprockets-rails-3.2.0\n      2808  honeybadger-2.7.2\n      1160  sprockets-3.7.1\n       368  tzinfo-1.2.2\n\nretained memory by gem\n-----------------------------------\n   1102502  puma-3.6.2\n    728109  simple_form-3.3.1\n    522334  i18n-0.7.0\n    226441  actionview-5.0.1\n     93458  activerecord-5.0.1\n     74910  rack-2.0.1\n     70051  activesupport-5.0.1\n     60945  concurrent-ruby-1.0.3\n     31530  actionpack-5.0.1\n     22331  activemodel-5.0.1\n     12389  newrelic_rpm-3.17.2.327\n     11770  rack-mini-profiler-0.10.5\n      9717  ruby-2.3.3/lib\n      1879  20170712102216/app\n      1593  arel-7.1.4\n       504  railties-5.0.1\n       232  honeybadger-2.7.2\nallocated memory by location\n-----------------------------------\n  16675773  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activesupport-5.0.1/lib/active_support/core_ext/string/output_safety.rb:176\n  11287702  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/actionview-5.0.1/lib/action_view/helpers/tags/base.rb:51\n   6412328  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/result.rb:123\n   6169344  /usr/local/rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/set.rb:83\n   6122176  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/i18n-0.7.0/lib/i18n/backend/base.rb:118\n   5305392  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/associations/join_dependency/join_part.rb:51\n   5249720  /usr/local/rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/timeout.rb:81\n   4253488  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activesupport-5.0.1/lib/active_support/core_ext/hash/except.rb:11\n   4161024  /usr/local/rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/set.rb:360\n   3698688  /usr/local/rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/set.rb:96\n   3520608  /usr/local/rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/set.rb:88\n   3152622  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/simple_form-3.3.1/lib/simple_form/inputs/base.rb:180\n   2880280  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activesupport-5.0.1/lib/active_support/hash_with_indifferent_access.rb:283\n   2867056  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/i18n-0.7.0/lib/i18n.rb:145\n   2866128  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/i18n-0.7.0/lib/i18n/exceptions.rb:46\n   2818960  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/i18n-0.7.0/lib/i18n.rb:268\n   2676232  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/attribute_set/builder.rb:33\n   2662442  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activesupport-5.0.1/lib/active_support/core_ext/string/output_safety.rb:258\n   2649672  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/persistence.rb:69\n   2593155  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/actionview-5.0.1/lib/action_view/helpers/tag_helper.rb:192\n   2389918  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/log_subscriber.rb:51\n   1926400  /usr/local/rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/set.rb:420\n   1890554  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/puma-3.6.2/lib/puma/server.rb:907\n   1803634  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/simple_form-3.3.1/lib/simple_form/inputs/base.rb:181\n   1732528  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activesupport-5.0.1/lib/active_support/core_ext/string/output_safety.rb:198\n   1599053  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/i18n-0.7.0/lib/i18n.rb:330\n   1569960  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/predicate_builder.rb:72\n   1508831  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activesupport-5.0.1/lib/active_support/multibyte/unicode.rb:248\n   1493725  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/actionview-5.0.1/lib/action_view/helpers/tags/base.rb:109\n   1462544  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/core.rb:135\n   1431338  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/actionview-5.0.1/lib/action_view/helpers/tag_helper.rb:152\n   1426240  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/attribute.rb:5\n   1402178  /usr/local/rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/logger.rb:654\n   1373677  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/actionview-5.0.1/lib/action_view/template.rb:310\n   1360800  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activesupport-5.0.1/lib/active_support/core_ext/object/json.rb:161\n   1353705  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activesupport-5.0.1/lib/active_support/inflector/methods.rb:385\n   1288272  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation.rb:24\n   1280920  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation.rb:36\n   1259712  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/associations/association_scope.rb:67\n   1244682  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/rack-2.0.1/lib/rack/query_parser.rb:81\n   1200960  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/associations/join_dependency.rb:140\n   1156385  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activesupport-5.0.1/lib/active_support/tagged_logging.rb:21\n   1135632  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/actionview-5.0.1/lib/action_view/helpers/form_helper.rb:1867\n   1086637  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/rack-mini-profiler-0.10.5/lib/patches/db/pg.rb:7\n   1076640  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/i18n-0.7.0/lib/i18n/backend/base.rb:32\n   1067904  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/attribute_methods.rb:347\n   1055840  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activesupport-5.0.1/lib/active_support/json/encoding.rb:89\n   1050872  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/puma-3.6.2/lib/puma/thread_pool.rb:70\n   1038184  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activesupport-5.0.1/lib/active_support/core_ext/hash/keys.rb:14\n   1035416  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/relation/predicate_builder.rb:97\n\nretained memory by location\n-----------------------------------\n   1050872  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/puma-3.6.2/lib/puma/thread_pool.rb:70\n    516280  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/i18n-0.7.0/lib/i18n.rb:330\n    435844  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/simple_form-3.3.1/lib/simple_form/inputs/base.rb:180\n    253231  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/simple_form-3.3.1/lib/simple_form/inputs/base.rb:181\n    112705  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/actionview-5.0.1/lib/action_view/template.rb:310\n     31056  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/concurrent-ruby-1.0.3/lib/concurrent/collection/map/non_concurrent_map_backend.rb:16\n     28271  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/simple_form-3.3.1/lib/simple_form/inputs/base.rb:183\n     23673  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/puma-3.6.2/lib/puma/client.rb:258\n     22080  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/concurrent-ruby-1.0.3/lib/concurrent/collection/map/mri_map_backend.rb:14\n     19832  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activemodel-5.0.1/lib/active_model/attribute_methods.rb:383\n     18732  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/puma-3.6.2/lib/puma/client.rb:285\n     17776  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/actionview-5.0.1/lib/action_view/template/resolver.rb:165\n     17640  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/rack-2.0.1/lib/rack/query_parser.rb:64\n     16944  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activesupport-5.0.1/lib/active_support/hash_with_indifferent_access.rb:217\n     14480  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activesupport-5.0.1/lib/active_support/core_ext/hash/indifferent_access.rb:9\n     14160  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/actionpack-5.0.1/lib/action_dispatch/http/parameter_filter.rb:55\n     13784  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/rack-2.0.1/lib/rack/query_parser.rb:157\n     11800  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/actionview-5.0.1/lib/action_view/template.rb:121\n     11360  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/rack-mini-profiler-0.10.5/lib/patches/db/pg.rb:7\n     11328  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/actionview-5.0.1/lib/action_view/template/resolver.rb:215\n     11073  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activesupport-5.0.1/lib/active_support/dependencies.rb:293\n     10975  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/actionview-5.0.1/lib/action_view/template.rb:340\n      9440  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/actionview-5.0.1/lib/action_view/template.rb:141\n      9132  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/simple_form-3.3.1/lib/simple_form/inputs/base.rb:184\n      8914  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/actionview-5.0.1/lib/action_view/template.rb:347\n      8406  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/rack-2.0.1/lib/rack/query_parser.rb:167\n      8110  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/actionview-5.0.1/lib/action_view/helpers/form_helper.rb:1889\n      7776  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/puma-3.6.2/lib/puma/client.rb:35\n      6968  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/connection_adapters/postgresql/schema_statements.rb:238\n      6857  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/concurrent-ruby-1.0.3/lib/concurrent/collection/map/non_concurrent_map_backend.rb:24\n      5887  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/i18n-0.7.0/lib/i18n.rb:332\n      5828  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/actionview-5.0.1/lib/action_view/template/resolver.rb:348\n      5774  /usr/local/rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/uri/common.rb:384\n      5680  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/attribute.rb:5\n      5664  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/actionview-5.0.1/lib/action_view/template/resolver.rb:269\n      5360  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/attribute.rb:80\n      5360  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/connection_adapters/postgresql/schema_statements.rb:676\n      5360  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/connection_adapters/postgresql/schema_statements.rb:683\n      5106  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/attribute_methods/read.rb:33\n      4720  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activesupport-5.0.1/lib/active_support/core_ext/hash/except.rb:11\n      4496  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/model_schema.rb:350\n      4496  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/model_schema.rb:380\n      4376  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/connection_adapters/schema_cache.rb:62\n      3622  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/attribute_methods.rb:30\n      3511  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/rack-2.0.1/lib/rack/multipart.rb:36\n      3280  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activerecord-5.0.1/lib/active_record/result.rb:123\n      3024  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:382\n      2808  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/activesupport-5.0.1/lib/active_support/callbacks.rb:163\n      2551  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/actionpack-5.0.1/lib/action_dispatch/journey/path/pattern.rb:71\n      2360  &lt;APPLICATION_HOME_PATH&gt;/shared/bundle/ruby/2.3.0/gems/actionview-5.0.1/lib/action_view/template.rb:139\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 2, "last_activity_date": 1499862814, "creation_date": 1499862814, "answer_id": 45057828, "question_id": 45057743, "link": "https://stackoverflow.com/questions/45057743/replace-ruby-string-with-gsub-with-conditions-for-multiple-strings/45057828#45057828", "title": "Replace ruby string with gsub with conditions for multiple strings", "body": "<p>What about using a regex?</p>\n\n<pre><code>string.gsub(/(with_)?pas/, \"\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": false, "score": 3, "last_activity_date": 1499863180, "creation_date": 1499863180, "answer_id": 45057951, "question_id": 45057743, "link": "https://stackoverflow.com/questions/45057743/replace-ruby-string-with-gsub-with-conditions-for-multiple-strings/45057951#45057951", "title": "Replace ruby string with gsub with conditions for multiple strings", "body": "<p>You can use your current approach, but will need to change the order, otherwise it won't work as expected:</p>\n\n<pre><code>string.gsub(\"with_pas\",\"\").gsub(\"pas\",\"\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 447, "user_id": 1250195, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/100000193975398/picture?type=large", "display_name": "a45b", "link": "https://stackoverflow.com/users/1250195/a45b"}, "is_accepted": false, "score": 0, "last_activity_date": 1499868233, "creation_date": 1499868233, "answer_id": 45059933, "question_id": 45057743, "link": "https://stackoverflow.com/questions/45057743/replace-ruby-string-with-gsub-with-conditions-for-multiple-strings/45059933#45059933", "title": "Replace ruby string with gsub with conditions for multiple strings", "body": "<pre><code>str.gsub(/pas|with_pas/, '').squeeze\n</code></pre>\n\n<p>This will remove the words and <code>squeeze</code> will remove the extra space that <code>gsub</code> added.</p>\n"}], "owner": {"reputation": 2908, "user_id": 662503, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/881a236ca533281bb9c9ac92f380b5a0?s=128&d=identicon&r=PG", "display_name": "rubyist", "link": "https://stackoverflow.com/users/662503/rubyist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 483, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1499937795, "creation_date": 1499862589, "last_edit_date": 1499937795, "question_id": 45057743, "link": "https://stackoverflow.com/questions/45057743/replace-ruby-string-with-gsub-with-conditions-for-multiple-strings", "title": "Replace ruby string with gsub with conditions for multiple strings", "body": "<p>I have as string as \"pas\" and \"with_pas\". I want to replace it with blank string. Now I am doing as follows</p>\n\n<pre><code>string.gsub(\"pas\",\"\").gsub(\"with_pas\",\"\") \n</code></pre>\n\n<p>In some scenario i get the string as \"pas\" and in some other  with \"with_pas\".</p>\n\n<p>Is there a better way to do this?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 7628939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97467af3e74bdc384ae865b97f3f682c?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/7628939/media"}, "edited": false, "score": 0, "creation_date": 1499862955, "post_id": 45057734, "comment_id": 77088966, "body": "Thank you but it gives me wrong a result. For example, if <code>user:xxx login:yyy</code> and <code>user:xxx login:zzz</code>, the result will be always 1 not 2 even the passwords are different!"}, {"owner": {"reputation": 115, "user_id": 7628939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97467af3e74bdc384ae865b97f3f682c?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/7628939/media"}, "edited": false, "score": 0, "creation_date": 1499863765, "post_id": 45057734, "comment_id": 77089584, "body": "This is the idea but you have to change <code>1</code> by <code>-1</code> in <code>SUBSTRING_INDEX(extra, &#39;:&#39;, 1)</code> to have the correct answer (to extract only the password because 1 gives as a result <code>user</code>). Thanks for your help!"}, {"owner": {"reputation": 21010, "user_id": 2019247, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MnZYd.jpg?s=128&g=1", "display_name": "31piy", "link": "https://stackoverflow.com/users/2019247/31piy"}, "reply_to_user": {"reputation": 115, "user_id": 7628939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97467af3e74bdc384ae865b97f3f682c?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/7628939/media"}, "edited": false, "score": 1, "creation_date": 1499864590, "post_id": 45057734, "comment_id": 77090259, "body": "@media - Thanks! Slipped out of mind that user is also there. I only considered <code>login</code>."}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 2, "creation_date": 1499867211, "post_id": 45057734, "comment_id": 77092334, "body": "An alternative syntax for the same result: <code>Visit.where(&#39;extra LIKE ?&#39;, &quot;%login%&quot;).distinct.count(&quot;SUBSTRING_INDEX(extra, &#39;:&#39;, -1)&quot;)</code>"}], "tags": [], "owner": {"reputation": 21010, "user_id": 2019247, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MnZYd.jpg?s=128&g=1", "display_name": "31piy", "link": "https://stackoverflow.com/users/2019247/31piy"}, "is_accepted": true, "score": 2, "last_activity_date": 1499864521, "last_edit_date": 1499864521, "creation_date": 1499862571, "answer_id": 45057734, "question_id": 45057588, "link": "https://stackoverflow.com/questions/45057588/count-distinct-with-activerecord-ruby/45057734#45057734", "title": "Count distinct with activerecord ruby", "body": "<p>You can use MySQL's <a href=\"https://dev.mysql.com/doc/refman/5.7/en/string-functions.html#function_substring-index\" rel=\"nofollow noreferrer\"><code>SUBSTRING_INDEX</code></a> to achieve this.</p>\n\n<pre><code>Visit.select(\"SUBSTRING_INDEX(extra, ':', -1)\").where('extra LIKE ?', \"%login%\").distinct.count\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 7628939, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/97467af3e74bdc384ae865b97f3f682c?s=128&d=identicon&r=PG&f=1", "display_name": "media", "link": "https://stackoverflow.com/users/7628939/media"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 1, "accepted_answer_id": 45057734, "answer_count": 1, "score": 1, "last_activity_date": 1499864521, "creation_date": 1499862112, "question_id": 45057588, "link": "https://stackoverflow.com/questions/45057588/count-distinct-with-activerecord-ruby", "title": "Count distinct with activerecord ruby", "body": "<p>The table <code>Visit</code> contains the column <code>extra</code> which is written this way <code>user:xxx login:yyy</code> (string type).</p>\n\n<p>I want to determine all the number of <strong>distinct passwords</strong> (after the word <code>login</code>). I wrote this ActiveRecord query in my controller.</p>\n\n<pre><code>Visit.select(:extra).where('extra LIKE ?', \"%login%\").distinct.count\n</code></pre>\n\n<p>This query will give me a result of distinct <code>extra</code> which contains the word <code>login</code> not the password (<code>yyy</code> in this example). I want to do the same but for all the strings (passwords) after the word <code>login</code>.</p>\n\n<p>Is there any solution to do this? Any help will be appreciated.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 5736, "user_id": 283181, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8cda855dadc64aa1e2a984c0ddd1f381?s=128&d=identicon&r=PG", "display_name": "Pierre", "link": "https://stackoverflow.com/users/283181/pierre"}, "edited": false, "score": 0, "creation_date": 1499861159, "post_id": 45057162, "comment_id": 77087517, "body": "Wrong comment, deleted."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1499861349, "post_id": 45057162, "comment_id": 77087686, "body": "Your regex syntax is wrong. Try <code>&#47;10\\.4(3|4|6)&#47;</code>"}, {"owner": {"reputation": 5736, "user_id": 283181, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8cda855dadc64aa1e2a984c0ddd1f381?s=128&d=identicon&r=PG", "display_name": "Pierre", "link": "https://stackoverflow.com/users/283181/pierre"}, "edited": false, "score": 0, "creation_date": 1499861474, "post_id": 45057162, "comment_id": 77087799, "body": "Indeed. Read too fast actually. Surprising it did even work in the first place."}, {"owner": {"reputation": 7, "user_id": 8295576, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jBjpxDUgk5o/AAAAAAAAAAI/AAAAAAAAAA0/FudfIKXSUy0/photo.jpg?sz=128", "display_name": "user8295576", "link": "https://stackoverflow.com/users/8295576/user8295576"}, "edited": false, "score": 0, "creation_date": 1499862720, "post_id": 45057162, "comment_id": 77088787, "body": "Following expression helped me however any suggestions will be highly appreciated"}, {"owner": {"reputation": 7, "user_id": 8295576, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jBjpxDUgk5o/AAAAAAAAAAI/AAAAAAAAAA0/FudfIKXSUy0/photo.jpg?sz=128", "display_name": "user8295576", "link": "https://stackoverflow.com/users/8295576/user8295576"}, "edited": false, "score": 0, "creation_date": 1499862728, "post_id": 45057162, "comment_id": 77088797, "body": "/(^10.4[3-4|6]\\b)/"}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 1, "creation_date": 1499863346, "post_id": 45057162, "comment_id": 77089254, "body": "If you&#39;re dealing with subnets, why not use an IP address gem which does all that for you? Especially if you&#39;re not very familiar with regex."}], "answers": [{"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1499875645, "post_id": 45062494, "comment_id": 77098781, "body": "Your second solution is definitely the right approach. However, you don&#39;t need <code>to_range</code>. IPAddr has an <code>include?</code>/<code>===</code> method: <a href=\"https://repl.it/JYpr\" rel=\"nofollow noreferrer\">repl.it/JYpr</a>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1499876770, "post_id": 45062494, "comment_id": 77099402, "body": "@JordanRunning thank you. Updated accordingly with accreditation. BTW I hate that they aliased this as <code>===</code> I don&#39;t feel that it adds anything syntactically and <code>include?</code> is much more expressive and intentional"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1499877624, "post_id": 45062494, "comment_id": 77099839, "body": "Since <code>===</code> is used by <code>case</code> expressions as well as <code>slice_before</code>/<code>_after</code>, <code>grep</code> and other methods, I think it&#39;s essential."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1499879499, "post_id": 45062494, "comment_id": 77100801, "body": "@JordanRunning fair point. Although I do not think I would ever actually use it in written code it does have an implied necessity"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1499879895, "post_id": 45062494, "comment_id": 77101013, "body": "<code>case ip; when IPAddr.new(&#39;10.43.0.0&#47;16&#39;), IPAddr.new(&#39;10.44.0.0&#47;16&#39;) then ...</code> is quite convenient ..."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1499880047, "post_id": 45062494, "comment_id": 77101097, "body": "@Stefan agreed (although I hate case statements) my point was I don&#39;t think I would ever write <code>===</code> over <code>include?</code> as it lacks readability in comparison"}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 3, "last_activity_date": 1499877073, "last_edit_date": 1499877073, "creation_date": 1499874833, "answer_id": 45062494, "question_id": 45057162, "link": "https://stackoverflow.com/questions/45057162/need-help-matching-ip-subnet-with-ruby-regex/45062494#45062494", "title": "Need help matching IP subnet with ruby regex", "body": "<p>While a regex will work (@Stefan has already provided one) and I have no idea about your implementation the <a href=\"http://ruby-doc.org/stdlib-2.4.1/libdoc/ipaddr/rdoc/IPAddr.html#method-i-mask-21\" rel=\"nofollow noreferrer\"><code>IPAddr</code></a> standard library may interest you e.g. </p>\n\n<pre><code> acceptable_sub_nets = [\"10.43.0.0\",\"10.44.0.0\",\"10.46.0.0\"]\n my_list_of_ips.select do |ip|\n   acceptable_sub_nets.include?(IPAddr.new(ip).mask(16).to_s)\n end\n</code></pre>\n\n<p>For example </p>\n\n<pre><code>IPAddr.new(\"10.43.22.19\").mask(16).to_s\n#=&gt; \"10.43.0.0\"\nIPAddr.new(\"192.168.0.1\").mask(16).to_s\n#=&gt; \"192.168.0.0\"\n</code></pre>\n\n<p>Additionally you could do something like </p>\n\n<pre><code> acceptable_sub_nets = [\"10.43.0.0\",\"10.44.0.0\",\"10.46.0.0\"].map do |subnet|\n      IPAddr.new(subnet).mask(16).to_range\n end\n\n my_list_of_ips.select do |ip|\n   acceptable_sub_nets.any? {|range| range.cover?(ip) } \n end\n</code></pre>\n\n<p>Example</p>\n\n<pre><code>subnet_range = IPAddr.new(\"10.43.0.0\").mask(16).to_range\nsubnet_range.cover?(\"10.43.22.19\")\n#=&gt; true\nsubnet_range.cover?(\"192.168.0.1\")\n#=&gt; false\n</code></pre>\n\n<p><strong>Update</strong> (Thank you @JordanRunning)</p>\n\n<p>The second option can be simplified to</p>\n\n<pre><code>acceptable_sub_nets = [\n      #including the mask range\n      IPAddr.new(\"10.43.0.0/16\"),\n      IPAddr.new(\"10.44.0.0/16\"),\n      IPAddr.new(\"10.46.0.0/16\")]\n\n my_list_of_ips.select do |ip|\n   acceptable_sub_nets.any? {|range| range.include?(ip) } \n end\n</code></pre>\n\n<p>This does not require conversion to a <code>Range</code> but rather leverages <code>IPAddr#include?</code> directly.</p>\n"}], "owner": {"reputation": 7, "user_id": 8295576, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-jBjpxDUgk5o/AAAAAAAAAAI/AAAAAAAAAA0/FudfIKXSUy0/photo.jpg?sz=128", "display_name": "user8295576", "link": "https://stackoverflow.com/users/8295576/user8295576"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1499877073, "creation_date": 1499860909, "last_edit_date": 1499861158, "question_id": 45057162, "link": "https://stackoverflow.com/questions/45057162/need-help-matching-ip-subnet-with-ruby-regex", "title": "Need help matching IP subnet with ruby regex", "body": "<p>I am trying to match first two octets of an IP to determine network subnet.\nIP start with <code>10.43</code> or <code>10.44</code> or <code>10.46</code> but not <code>10.45</code>, tried to match with this expression <code>10.4{3|4|6}</code> but it matches only <code>10.44</code> and <code>10.46</code> </p>\n\n<p>Any guess why not matching <code>10.43</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 4, "last_activity_date": 1499860068, "last_edit_date": 1499860068, "creation_date": 1499859562, "answer_id": 45056659, "question_id": 45056614, "link": "https://stackoverflow.com/questions/45056614/can-someone-explain-to-me-what-this-code-is-doing/45056659#45056659", "title": "Can someone explain to me what this code is doing?", "body": "<p>It should be the same as <code>course_path(course)</code></p>\n\n<p>This call just figure out the path for you. The expression in your code simply build this path putting together <code>\"courses/\"</code> and the id of the course (but using interpolation, not concatenation).</p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 4870851, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b63877031aec9418f71fbcc1ea4efd3?s=128&d=identicon&r=PG&f=1", "display_name": "Miron Marczuk", "link": "https://stackoverflow.com/users/4870851/miron-marczuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1499865138, "creation_date": 1499865138, "answer_id": 45058662, "question_id": 45056614, "link": "https://stackoverflow.com/questions/45056614/can-someone-explain-to-me-what-this-code-is-doing/45058662#45058662", "title": "Can someone explain to me what this code is doing?", "body": "<p>As Ursus answer explains, <code>courses/#{course.id}</code> creates URL directing to specific course path by using string interpolation. For example, if <code>@courses</code> variable is an array with Course objects with ids: <code>[1, 2, 3]</code>, then you will receive links directing to <code>\"course/1\", \"course/2\", course/3\"</code>.</p>\n\n<p>To replace that interpolation, you can simply write </p>\n\n<pre><code>&lt;%= link_to course.title, course %&gt;\n</code></pre>\n\n<p>It will create the same output as <code>\"courses/#{course.id}\"</code></p>\n\n<p>To learn more about string intepolation, you can start here: <a href=\"http://ruby-for-beginners.rubymonstas.org/bonus/string_interpolation.html\" rel=\"nofollow noreferrer\">http://ruby-for-beginners.rubymonstas.org/bonus/string_interpolation.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 33, "user_id": 5491036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2767c98d63c5cb4f091fa1efb44d1b3d?s=128&d=identicon&r=PG&f=1", "display_name": "mantralux", "link": "https://stackoverflow.com/users/5491036/mantralux"}, "is_accepted": false, "score": 0, "last_activity_date": 1499865160, "creation_date": 1499865160, "answer_id": 45058670, "question_id": 45056614, "link": "https://stackoverflow.com/questions/45056614/can-someone-explain-to-me-what-this-code-is-doing/45058670#45058670", "title": "Can someone explain to me what this code is doing?", "body": "<p>For some reason your friend did this:</p>\n\n<pre><code>&lt;td&gt;&lt;%= link_to course.title, \"courses/#{course.id}\" %&gt;&lt;/td&gt;\n</code></pre>\n\n<p>...instead of this:</p>\n\n<pre><code>&lt;td&gt;&lt;%= link_to course.title, course %&gt;&lt;/td&gt;\n</code></pre>\n\n<p>...and I have no idea why. The second example is how you use links in Rails. The first example doesn't safeguard you against possible future URL changes.</p>\n"}], "owner": {"reputation": 121, "user_id": 8213773, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5a6cfecf326ae47889cbcd19c2970d17?s=128&d=identicon&r=PG&f=1", "display_name": "yamaoka", "link": "https://stackoverflow.com/users/8213773/yamaoka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 45056659, "answer_count": 3, "score": 1, "last_activity_date": 1499865160, "creation_date": 1499859447, "question_id": 45056614, "link": "https://stackoverflow.com/questions/45056614/can-someone-explain-to-me-what-this-code-is-doing", "title": "Can someone explain to me what this code is doing?", "body": "<p>I am currently building an online course and I was having trouble accessing a lesson that is associated with a certain course.</p>\n\n<p>A developer friend of mine solved the problem for me but I'm not really sure why this code works and if there are different ways, more of a Rails conventional way to write this code.</p>\n\n<pre><code>&lt;% @courses.each do |course| %&gt;\n    &lt;tr&gt;\n      &lt;td&gt;&lt;%= link_to course.title, \"courses/#{course.id}\" %&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>I am not sure what this part <code>\"courses/#{course.id}\"</code> is doing. Is there a way to write this using a more conventional seeming names route helper?</p>\n"}, {"tags": ["ruby", "attr-accessor"], "comments": [{"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 0, "creation_date": 1499859742, "post_id": 45056228, "comment_id": 77086420, "body": "<code>b = nil</code> =&gt; <code>self.b = nil</code>"}, {"owner": {"reputation": 228, "user_id": 4891793, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153039879553600/picture?type=large", "display_name": "som4ik", "link": "https://stackoverflow.com/users/4891793/som4ik"}, "reply_to_user": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 0, "creation_date": 1499860038, "post_id": 45056228, "comment_id": 77086652, "body": "i know that self.b = nil, but why ?  it should be 2 , i didn&#39;t enter the if positive branch?  add <code>puts b</code> before <code>if c</code> to understand my question my friend"}], "answers": [{"tags": [], "owner": {"reputation": 1521, "user_id": 7177640, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21ab719e4dfae3533a20da4f52e5c9e7?s=128&d=identicon&r=PG", "display_name": "nattfodd", "link": "https://stackoverflow.com/users/7177640/nattfodd"}, "is_accepted": false, "score": 0, "last_activity_date": 1499860709, "creation_date": 1499860709, "answer_id": 45057093, "question_id": 45056228, "link": "https://stackoverflow.com/questions/45056228/strange-behave-of-ruby-attr-accessor/45057093#45057093", "title": "Strange behave of ruby attr_accessor", "body": "<p>That's because in context of <code>if</code> statement you actually redefine <code>b</code> when you type <code>b = nil</code>. For Ruby, it's not clear either you want to call object's method <code>:b</code> or to create a new variable <code>b</code>. In such cases, priority always goes from the global to the closest context, in this case - to context inside of <code>if</code> block.</p>\n\n<p>If you'll change</p>\n\n<pre><code>if c\n  b = nil\nelse\n  return b\nend\n\n# to \nif c\n  # b = nil\n  # or\n  self.b = nil\nelse\n  return b\n</code></pre>\n\n<p>You'll notice it works as you expected.</p>\n"}, {"tags": [], "owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "is_accepted": true, "score": 3, "last_activity_date": 1499860945, "creation_date": 1499860945, "answer_id": 45057176, "question_id": 45056228, "link": "https://stackoverflow.com/questions/45056228/strange-behave-of-ruby-attr-accessor/45057176#45057176", "title": "Strange behave of ruby attr_accessor", "body": "<p><strong>Variable Hoisting</strong> effect is used in many languages. For Ruby it is described in the <a href=\"https://docs.ruby-lang.org/en/2.4.0/syntax/assignment_rdoc.html#label-Local+Variables+and+Methods\" rel=\"nofollow noreferrer\">official documentation</a>:</p>\n\n<blockquote>\n  <p>The local variable is created when the parser encounters the assignment, not when the assignment occurs</p>\n</blockquote>\n\n<p>So, <code>get_answer</code> method creates <strong>local</strong> variable <code>b</code> regardless to value of <code>c</code>. <strong>And</strong> assigns local variable <code>b</code> to <code>nil</code> while creating. Then <code>get_answer</code> returns local variable <code>b</code> which is always <code>nil</code>.</p>\n\n<p>Correct method:</p>\n\n<pre><code>def get_answer\n  c ? self.b = nil : b\nend\n</code></pre>\n"}], "owner": {"reputation": 228, "user_id": 4891793, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153039879553600/picture?type=large", "display_name": "som4ik", "link": "https://stackoverflow.com/users/4891793/som4ik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 1, "accepted_answer_id": 45057176, "answer_count": 2, "score": 4, "last_activity_date": 1499860945, "creation_date": 1499858334, "last_edit_date": 1499858368, "question_id": 45056228, "link": "https://stackoverflow.com/questions/45056228/strange-behave-of-ruby-attr-accessor", "title": "Strange behave of ruby attr_accessor", "body": "<p>I have this block of code:</p>\n\n<pre><code>class CallMe\n  attr_accessor :a, :b, :c\n\n  def self.start(*args)\n     self.new(*args).get_answer\n  end\n\n  def initialize(a,b,c)\n    @a = a\n    @b = b\n    @c = c\n  end\n\n  def get_answer \n    if c\n      b = nil\n    else\n      return b \n    end\n   end\nend\nanswer = CallMe.start(1,2,nil)\n</code></pre>\n\n<p>Why when i run it in irb i always get <code>answer = nil</code> even logic case is get b value that is 2 </p>\n"}, {"tags": ["ruby", "xpath", "css-selectors", "nokogiri", "mechanize-ruby"], "comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 1, "creation_date": 1499859146, "post_id": 45055619, "comment_id": 77085986, "body": "This is more of an <a href=\"https://stackoverflow.com/questions/tagged/xpath\">xpath</a> or <a href=\"https://stackoverflow.com/questions/tagged/css-selectors\">css-selectors</a> question than it is about mechanize. If you added those, you&#39;d get a larger audience."}], "answers": [{"comments": [{"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1499904076, "post_id": 45056766, "comment_id": 77111819, "body": "This isn&#39;t quite it, it needs to stop at the <code>h4</code>, not just exclude it."}, {"owner": {"reputation": 2773, "user_id": 2505904, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/dfbdb599d48dd7b6dba638bf0549599a?s=128&d=identicon&r=PG", "display_name": "Matrix", "link": "https://stackoverflow.com/users/2505904/matrix"}, "edited": false, "score": 0, "creation_date": 1499940985, "post_id": 45056766, "comment_id": 77127853, "body": "I edited question, sry about imprecisions, but we can&#39;t know how many and the type of possible existing tags followings &lt;h4&gt;, so I need to ignore all tags since &lt;h4&gt; (included). I can&#39;t do a solid xpath cmd because the content is dynamic and unpredictable !"}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "reply_to_user": {"reputation": 2773, "user_id": 2505904, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/dfbdb599d48dd7b6dba638bf0549599a?s=128&d=identicon&r=PG", "display_name": "Matrix", "link": "https://stackoverflow.com/users/2505904/matrix"}, "edited": false, "score": 0, "creation_date": 1500032700, "post_id": 45056766, "comment_id": 77175274, "body": "@Matrix You certainly can do it in XPath! See my edit."}], "tags": [], "owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "is_accepted": false, "score": 1, "last_activity_date": 1499953857, "last_edit_date": 1499953857, "creation_date": 1499859857, "answer_id": 45056766, "question_id": 45055619, "link": "https://stackoverflow.com/questions/45055619/get-all-tags-followings-a-certain-with-mechanize-ruby/45056766#45056766", "title": "Get all tags followings a certain with mechanize ? (ruby)", "body": "<p>Looks like you want to return the <code>h2</code> element and its following siblings. I'm not clear on whether you want to keep or discard the <code>h4</code>; if you want to keep it the XPath would be:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>//h2[@class=\"target\"] | //h2[@class=\"target\"]/following-sibling::*\n</code></pre>\n\n<p>If you need to exclude the <code>h4</code>:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>//h2[@class=\"target\"] | //h2[@class=\"target\"]/following-sibling::*[not(self::h4)]\n</code></pre>\n\n<p><strong>Edit</strong>: If you need to exclude an <code>h4</code> and anything beyond:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>//h2[@class=\"target\"] | //h2[@class=\"target\"]/following-sibling::*[not(self::h4) | not(preceding-sibling::h4)]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2773, "user_id": 2505904, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/dfbdb599d48dd7b6dba638bf0549599a?s=128&d=identicon&r=PG", "display_name": "Matrix", "link": "https://stackoverflow.com/users/2505904/matrix"}, "edited": false, "score": 0, "creation_date": 1499943562, "post_id": 45069352, "comment_id": 77129584, "body": "Thx, I don&#39;t know was so easy to get type of tag (use <code>.name</code>). My use case give this : <code>el = page.at(&#39;#Nom_commun&#39;).parent     html = el.inner_html     el = el.at(&#39;+ *&#39;)     while el &amp;&amp; el.name != &#39;h4&#39;       html &lt;&lt; el.inner_html       el = el.at(&#39;+ *&#39;)     end</code>"}], "tags": [], "owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "is_accepted": true, "score": 2, "last_activity_date": 1499903975, "creation_date": 1499903975, "answer_id": 45069352, "question_id": 45055619, "link": "https://stackoverflow.com/questions/45055619/get-all-tags-followings-a-certain-with-mechanize-ruby/45069352#45069352", "title": "Get all tags followings a certain with mechanize ? (ruby)", "body": "<p>You can subtract the ones you don't want from your nodeset:</p>\n\n<pre><code>h2 = page.at('h2')\n(h2.search('~ *') - h2.search('~ h4','~ h4 ~ *')).each do |el|\n    # el is not a h4 and does not follow a h4\nend\n</code></pre>\n\n<p>Maybe it makes more sense to use xpath but I can do this without googling.</p>\n\n<p>Your idea of iterating next sibling can work too:</p>\n\n<pre><code>el = page.at('h2 ~ *')\nwhile el &amp;&amp; el.name != 'h4'\n    # do something with el\n    el = el.at('+ *')\nend\n</code></pre>\n"}], "owner": {"reputation": 2773, "user_id": 2505904, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/dfbdb599d48dd7b6dba638bf0549599a?s=128&d=identicon&r=PG", "display_name": "Matrix", "link": "https://stackoverflow.com/users/2505904/matrix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 335, "favorite_count": 0, "accepted_answer_id": 45069352, "answer_count": 2, "score": 1, "last_activity_date": 1499953857, "creation_date": 1499856685, "last_edit_date": 1499941174, "question_id": 45055619, "link": "https://stackoverflow.com/questions/45055619/get-all-tags-followings-a-certain-with-mechanize-ruby", "title": "Get all tags followings a certain with mechanize ? (ruby)", "body": "<p>How can I get all elements following once, like :</p>\n\n<pre><code>&lt;div id=\"exemple\"&gt;\n  &lt;h2 class=\"target\"&gt;foo&lt;/h2&gt;\n  &lt;p&gt;bla bla&lt;/p&gt;\n  &lt;ul&gt;\n    &lt;li&gt;bar1&lt;/li&gt;\n    &lt;li&gt;bar2&lt;/li&gt;\n    &lt;li&gt;bar3&lt;/li&gt;\n  &lt;/ul&gt;\n  &lt;h4&gt;baz&lt;/h4&gt; \n  &lt;ul&gt;\n     &lt;li&gt;lot&lt;/li&gt;\n  &lt;/ul&gt;\n  &lt;div&gt;of&lt;/div&gt;\n  &lt;p&gt;possible&lt;/p&gt;\n  &lt;p&gt;tags&lt;/p&gt;\n  &lt;a href=\"#\"&gt;after&lt;/a&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>I need to detect <code>&lt;h2 class=\"target\"&gt;</code> and get all tags to the next <code>&lt;h4&gt;</code> and ignore <code>&lt;h4&gt;</code> <strong>AND</strong> all followings tags (if <code>&lt;h4&gt;</code> not exist, I have to get all tags to the end of parent [here : end of <code>&lt;div&gt;</code>])</p>\n\n<p><strong>The content is dynamic and unpredictable</strong> The only rule is : we know there is a target and there is a  (or end of element). I need to get all tags beetween both and exclud all others.</p>\n\n<p>With this exemple I need to get the HTML following :</p>\n\n<pre><code>&lt;h2 class=\"target\"&gt;foo&lt;/h2&gt;\n&lt;p&gt;bla bla&lt;/p&gt;\n&lt;ul&gt;\n  &lt;li&gt;bar1&lt;/li&gt;\n  &lt;li&gt;bar2&lt;/li&gt;\n  &lt;li&gt;bar3&lt;/li&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>so I can get : <code>target = page.at('#exemple .target')</code>\nI know <code>next_sibling</code> method, but how can i test the type of tag of the current node?</p>\n\n<p>I think about something like that to course the node tree : </p>\n\n<pre><code>html = ''\nwhile not target.is_a? 'h4'\n  html &lt;&lt; target.inner_html\n  target = target.next_sibling\n</code></pre>\n\n<p>How can I do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rest", "ruby-on-rails-3", "coffeescript"], "comments": [{"owner": {"reputation": 865, "user_id": 1439147, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/DEX2c.jpg?s=128&g=1", "display_name": "Anbazhagan p", "link": "https://stackoverflow.com/users/1439147/anbazhagan-p"}, "edited": false, "score": 0, "creation_date": 1499856817, "post_id": 45055595, "comment_id": 77084489, "body": "How do i set the blob in rest client"}, {"owner": {"reputation": 2673, "user_id": 4172728, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/FQpL7.jpg?s=128&g=1", "display_name": "Gokul", "link": "https://stackoverflow.com/users/4172728/gokul"}, "edited": false, "score": 0, "creation_date": 1499861699, "post_id": 45055595, "comment_id": 77087994, "body": "Try sending the post body as JSON string. You can convert the hash to JSON string using <code>to_json</code> method"}, {"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1499863346, "post_id": 45055595, "comment_id": 77089255, "body": "Can you post the ajax request response as well here..."}, {"owner": {"reputation": 865, "user_id": 1439147, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/DEX2c.jpg?s=128&g=1", "display_name": "Anbazhagan p", "link": "https://stackoverflow.com/users/1439147/anbazhagan-p"}, "reply_to_user": {"reputation": 2673, "user_id": 4172728, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/FQpL7.jpg?s=128&g=1", "display_name": "Gokul", "link": "https://stackoverflow.com/users/4172728/gokul"}, "edited": false, "score": 0, "creation_date": 1499865433, "post_id": 45055595, "comment_id": 77090949, "body": "@GokulM tried to_json it didnt work"}, {"owner": {"reputation": 865, "user_id": 1439147, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/DEX2c.jpg?s=128&g=1", "display_name": "Anbazhagan p", "link": "https://stackoverflow.com/users/1439147/anbazhagan-p"}, "reply_to_user": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1499866023, "post_id": 45055595, "comment_id": 77091422, "body": "@VamsiKrishna Added screenshot check if it helps"}, {"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1499866153, "post_id": 45055595, "comment_id": 77091528, "body": "@Anbazhaganp response please not the request headers..."}, {"owner": {"reputation": 865, "user_id": 1439147, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/DEX2c.jpg?s=128&g=1", "display_name": "Anbazhagan p", "link": "https://stackoverflow.com/users/1439147/anbazhagan-p"}, "reply_to_user": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1499868256, "post_id": 45055595, "comment_id": 77093156, "body": "@VamsiKrishna Access-Control-Allow-Origin:* Cache-Control:no-cache Content-Length:735 Content-Type:application/json; charset=utf-8 Date:Wed, 12 Jul 2017 13:20:45 GMT Expires:-1 P3P:policyref=&quot;/w3c/p3p.xml&quot;, CP=&quot;CAO CURa ADMa DEVa TAIa OUR BUS UNI PUR COM NAV INT CNT STA&quot; Pragma:no-cache Server:Microsoft-IIS/7.5 X-AspNet-Version:4.0.30319 X-Powered-By:ASP.NET"}, {"owner": {"reputation": 865, "user_id": 1439147, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/DEX2c.jpg?s=128&g=1", "display_name": "Anbazhagan p", "link": "https://stackoverflow.com/users/1439147/anbazhagan-p"}, "edited": false, "score": 0, "creation_date": 1499868290, "post_id": 45055595, "comment_id": 77093182, "body": "This is the response header, and in response i get the data of uploaded cart"}, {"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1499869579, "post_id": 45055595, "comment_id": 77094203, "body": "Can you tell me the version of RestClient you are using...In rails console you can type RestClient.version"}, {"owner": {"reputation": 865, "user_id": 1439147, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/DEX2c.jpg?s=128&g=1", "display_name": "Anbazhagan p", "link": "https://stackoverflow.com/users/1439147/anbazhagan-p"}, "reply_to_user": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1499869885, "post_id": 45055595, "comment_id": 77094447, "body": "@VamsiKrishna rest client version 2.0.1"}, {"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "reply_to_user": {"reputation": 865, "user_id": 1439147, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/DEX2c.jpg?s=128&g=1", "display_name": "Anbazhagan p", "link": "https://stackoverflow.com/users/1439147/anbazhagan-p"}, "edited": false, "score": 0, "creation_date": 1499870627, "post_id": 45055595, "comment_id": 77095016, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/149019/discussion-between-vamsi-krishna-and-anbazhagan-p\">continue this discussion in chat</a>."}, {"owner": {"reputation": 2272, "user_id": 6014860, "user_type": "registered", "accept_rate": 59, "profile_image": "https://lh3.googleusercontent.com/-HTre8HPI5M0/AAAAAAAAAAI/AAAAAAAABFU/H4adUeHsQ2g/photo.jpg?sz=128", "display_name": "Ngoral", "link": "https://stackoverflow.com/users/6014860/ngoral"}, "edited": false, "score": 0, "creation_date": 1541672823, "post_id": 45055595, "comment_id": 93299708, "body": "Did you finally solve the problem?"}], "owner": {"reputation": 865, "user_id": 1439147, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/DEX2c.jpg?s=128&g=1", "display_name": "Anbazhagan p", "link": "https://stackoverflow.com/users/1439147/anbazhagan-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 205, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499865963, "creation_date": 1499856617, "last_edit_date": 1592644375, "question_id": 45055595, "link": "https://stackoverflow.com/questions/45055595/rest-client-post-request-error-with-multipart", "title": "Rest client post request, error with multipart", "body": "<p>I have the following ajax request which works fine, but when i try the same through rest-client ruby gem i'm getting the following error</p>\n<pre><code>&quot;{\\&quot;error\\&quot;:{\\&quot;message\\&quot;:\\&quot;Wrong request body. Check if all parameters set correctly\\&quot;,\\&quot;code\\&quot;:401},\\&quot;cartItems\\&quot;:[]}&quot;\n</code></pre>\n<p>JS:</p>\n<pre><code>    dataContentType = 'application/json'\n    data = new FormData\n    if dataContentType == 'text/xml'\n      data.append 'data', new Blob([ $('#requestXml').val() ], type: 'text/xml')\n    else\n      data.append 'data', new Blob([ $('#requestJson').val() ], type: 'application/json')\n      console.log('requestJson', $('#requestJson').val())\n    fileIdx = 0\n    $('input[type=file]').each (i, value) -&gt;\n      `var i`\n      i = 0\n      while i &lt; value.files.length\n        data.append 'file[' + fileIdx + ']', new Blob([ value.files[i] ], type: 'application/octet-stream'), value.files[i].name\n        fileIdx++\n        i++\n      return\n    $.ajax\n      type: 'POST'\n      url: 'https://imatsandbox.materialise.net/web-api/cartitems/register'\n      data: data\n      cache: false\n      contentType: false\n      processData: false\n      beforeSend: (request) -&gt;\n        request.setRequestHeader 'Accept', dataContentType\n        return\n      dataType: 'text'\n      success: (data, textStatus, jqXHR) -&gt;\n</code></pre>\n<p>data variable contains this</p>\n<pre><code>{&quot;currency&quot;:&quot;USD&quot;,&quot;cartItems&quot;:[{&quot;toolID&quot;:&quot;toolID&quot;,&quot;MyCartItemReference&quot;:&quot;some reference&quot;,&quot;modelID&quot;:&quot;modelID&quot;,&quot;modelFileName&quot;:&quot;&quot;,&quot;fileUnits&quot;:&quot;mm&quot;,&quot;fileScaleFactor&quot;:&quot;1&quot;,&quot;materialID&quot;:&quot;00e005a8-b29b-4196-ba4e-57ac1c4ce60c&quot;,&quot;finishID&quot;:&quot;bba2bebb-8895-4049-aeb0-ab651cee2597&quot;,&quot;quantity&quot;:&quot;1&quot;,&quot;xDimMm&quot;:81.266,&quot;yDimMm&quot;:159.935,&quot;zDimMm&quot;:10.096,&quot;volumeCm3&quot;:15.5864,&quot;surfaceCm2&quot;:260.288,&quot;iMatAPIPrice&quot;:&quot;25.0&quot;,&quot;mySalesPrice&quot;:&quot;26.0&quot;}]}\n</code></pre>\n<p>I tried with the following using rest client</p>\n<pre><code>request = RestClient.post(&quot;https://imatsandbox.materialise.net/web-api/cartitems/register&quot;,{:currency =&gt; &quot;USD&quot;,:cartItems =&gt; [{:toolID =&gt; &quot;toolID&quot;,:MyCartItemReference =&gt; &quot;some reference&quot;,:modelID =&gt; &quot;modelID&quot;,:modelFileName =&gt; &quot;&quot;,:fileUnits =&gt; &quot;mm&quot;,:fileScaleFactor =&gt; &quot;1&quot;,:materialID =&gt; &quot;00e005a8-b29b-4196-ba4e-57ac1c4ce60c&quot;,:finishID =&gt; &quot;bba2bebb-8895-4049-aeb0-ab651cee2597&quot;,:quantity =&gt; &quot;1&quot;,:xDimMm =&gt; &quot;81.266&quot;,:yDimMm =&gt; &quot;159.935&quot;,:zDimMm =&gt; &quot;10.096&quot;,:volumeCm3 =&gt; &quot;15.5864&quot;,:surfaceCm2 =&gt; &quot;260.288&quot;,:iMatAPIPrice =&gt; &quot;25.0&quot;,:mySalesPrice =&gt; &quot;26.0&quot;}], :multipart =&gt; true})\n</code></pre>\n<p>In coffee script it works fine, when i try in the rest client it throws mentioned error.</p>\n<p>EDIT:\n<a href=\"https://i.stack.imgur.com/gRJ96.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gRJ96.png\" alt=\"enter image description here\" /></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "authentication", "active-directory", "ldap"], "comments": [{"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1499856806, "post_id": 45055287, "comment_id": 77084483, "body": "I think this piece of code should do the trick for you...<a href=\"https://github.com/ruby-ldap/ruby-net-ldap/blob/e4c46a223a19feda78393a793711353aa1febdcd/lib/net/ldap.rb#L37-L51\" rel=\"nofollow noreferrer\">github.com/ruby-ldap/ruby-net-ldap/blob/&hellip;</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8283967"}, "reply_to_user": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1499857187, "post_id": 45055287, "comment_id": 77084709, "body": "Yes, I&#39;m using this code to establish the connection to the ladp, What I want is to login users and check if the domain and username and password are correct with what&#39;s on the LADP"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8283967"}, "edited": false, "score": 0, "creation_date": 1499858098, "post_id": 45055845, "comment_id": 77085325, "body": "I got this error: <code>uninitialized constant SessionsController::AuthenticateUser</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8283967"}, "edited": false, "score": 0, "creation_date": 1499858759, "post_id": 45055845, "comment_id": 77085713, "body": "Nvm, I restarted the server, but now it&#39;s giving me the <code>else</code> error when I insert a valid user from the ad, why is this?"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 1, "creation_date": 1499859246, "post_id": 45055845, "comment_id": 77086042, "body": "<code>@AnroDeodo ldap.bind</code> will return <code>false</code> only if the information provided is incorrect, have you confirmed that host/user/password are correct?"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 1, "creation_date": 1499859567, "post_id": 45055845, "comment_id": 77086307, "body": "@AnroDeodo You can use <code>get_operation_result</code> to get more details about why it failed. For example, add <code>puts ldap.get_operation_result</code> right after <code>ldap.bind</code> and check what is printed on the server log."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8283967"}, "edited": false, "score": 0, "creation_date": 1499859603, "post_id": 45055845, "comment_id": 77086320, "body": "nevermind, I had to use my company&#39;s domain name <code>@company.com</code>, is there a way to define this like <code>@NumeroEmpregado&quot;@company.com&#39;</code> ?"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 1, "creation_date": 1499859827, "post_id": 45055845, "comment_id": 77086475, "body": "@AnroDeodo You mean to append that domain to each user? If so, yes, with something like this: <code>@user = &quot;#{user}@company.com&quot;</code> in <code>initialize</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8283967"}, "edited": false, "score": 1, "creation_date": 1499859840, "post_id": 45055845, "comment_id": 77086486, "body": "and one more question, how can I automatically attribute a <code>user_id</code> on my sqlserver database to my ldap <code>user</code> so he can use the rest of the app? I get the current error when I log in: <code>Couldn&#39;t find User with &#39;id&#39;=my.name@company.com</code> on line <code>@current_user ||= User.find(session[:user_id]) if session[:user_id]</code>"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1499860080, "post_id": 45055845, "comment_id": 77086684, "body": "Y@AnroDeodo You will need to check if user exists as well in your db (no auth needed there) and use its id, i&#39;ll update my answer to show that."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8283967"}, "edited": false, "score": 0, "creation_date": 1499864160, "post_id": 45055845, "comment_id": 77089909, "body": "in the <code>else</code> statment can I make it create a <code>user_id</code> for that <code>NumeroEmpregado</code> if one is non-existent? If so, how?"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1499864393, "post_id": 45055845, "comment_id": 77090087, "body": "@AnroDeodo Yes , you can use <code>find_or_create_by</code> (see the <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-find_or_create_by\" rel=\"nofollow noreferrer\">docs</a>), but you will need to provide all required user attributes in order to create a <code>User</code>. What attributes does <code>User</code> have?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8283967"}, "edited": false, "score": 0, "creation_date": 1499864602, "post_id": 45055845, "comment_id": 77090270, "body": "<code>params.require(:user).permit(:NumeroEmpregado, :nome, :password, :password_confirmation)</code> This was what I was using for my previous login method, were you created user on a create user form, but now since I have the logins on the AD I don&#39;t need it anymore and would rather have my rails app creating the user_id automatically when you sign in (if there is none) if there is, just use the one assigned to that username, because I have controllers working with the <code>user_id</code> field"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8283967"}, "edited": false, "score": 0, "creation_date": 1499864880, "post_id": 45055845, "comment_id": 77090492, "body": "I added my Users_controller.rb to main code so it&#39;s easier to understand"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1499865543, "post_id": 45055845, "comment_id": 77091035, "body": "@AnroDeodo You need to add <code>name</code> in the login form in order to create the <code>User</code>, otherwise you could only create it with <code>NumeroEmpregado </code>, but in that case (i.e. no additional attributes for <code>User</code>) there is no need for a <code>User</code> model."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8283967"}, "edited": false, "score": 0, "creation_date": 1499865715, "post_id": 45055845, "comment_id": 77091172, "body": "Yes, I&#39;m scraping the <code>NumeroEmpregado</code> and making it <code>name</code>, the <code>NumeroEmpregado</code> I&#39;m hoping to get it from the AD, if so is possible"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8283967"}, "edited": false, "score": 0, "creation_date": 1499865815, "post_id": 45055845, "comment_id": 77091260, "body": "so,   <code>user = User.find_or_create_by_NumeroEmpregado(user)</code> should work right, or do I need to define something in a private method?"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1499865951, "post_id": 45055845, "comment_id": 77091365, "body": "@AnroDeodo No private method needed, but usage should be <code>User.create_with(name: name).find_or_create_by(NumeroEmpregado: user)</code>, where <code>name</code> needs to be assigned before setting the user."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8283967"}, "edited": false, "score": 0, "creation_date": 1499866099, "post_id": 45055845, "comment_id": 77091487, "body": "would this work? <code>if AuthenticateUser.new(user, password).call       user = User.create_with(Nome: name).find_or_create_by(Nome: user)</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8283967"}, "edited": false, "score": 0, "creation_date": 1499866158, "post_id": 45055845, "comment_id": 77091530, "body": "<code>undefined local variable or method &#39;name&#39; for #&lt;SessionsController:0xa1385d8&gt;</code>"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1499866570, "post_id": 45055845, "comment_id": 77091839, "body": "@AnroDeodo No, check updated answer to see an example of the correct usage. Two things two consider: 1) attributes are case sensitive, so using <code>Nome</code> or <code>nome</code> depends on how column is named in your db. 2) <code>create_with</code> adds additional attributes needed to create the object."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1499866620, "post_id": 45055845, "comment_id": 77091890, "body": "@AnroDeodo The error is because <code>name</code> is not defined, you need to define it (i just don&#39;t know where to get that value, that&#39;s why i don&#39;t include that specific step in my example)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8283967"}, "edited": false, "score": 0, "creation_date": 1499866819, "post_id": 45055845, "comment_id": 77092036, "body": "it&#39;s doing: <code>User Load (2.0ms)  EXEC sp_executesql N&#39;SELECT  [users].* FROM [users] WHERE [users].[nome] IS NULL  ORDER BY [users].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY&#39;, N&#39;@0 int&#39;, @0 = 1  [[&quot;LIMIT&quot;, nil]]   SQL (1.0ms)  BEGIN TRANSACTION   User Exists (2.0ms)  EXEC sp_executesql N&#39;SELECT  1 AS one FROM [users] WHERE [users].[NumeroEmpregado] IS NULL  ORDER BY [users].[id] ASC OFFSET 0 ROWS FETCH NEXT @0 ROWS ONLY&#39;, N&#39;@0 int&#39;, @0 = 1  [[&quot;LIMIT&quot;, nil]]   SQL (1.0ms)  IF @@TRANCOUNT &gt; 0 ROLLBACK TRANSACTION</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8283967"}, "edited": false, "score": 0, "creation_date": 1499866870, "post_id": 45055845, "comment_id": 77092078, "body": "Redirecting to root and not creating a new field in my DB table for the username"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1499867145, "post_id": 45055845, "comment_id": 77092289, "body": "@AnroDeodo I&#39;m not sure what the error could be, do you get any else on the log? I will highly recommend posting a new question (showing only controller code and error/log) so other users can also take a look (and improve your odds of getting a solution)."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1499867272, "post_id": 45055845, "comment_id": 77092394, "body": "@AnroDeodo Check updated answer, i had an error which may cause the problem (should be <code>.find_or_create_by(NumeroEmpregado: username)</code> instead of <code>.find_or_create_by(NumeroEmpregado: user)</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user8283967"}, "edited": false, "score": 0, "creation_date": 1499867721, "post_id": 45055845, "comment_id": 77092764, "body": "created: <a href=\"https://stackoverflow.com/questions/45059698/upon-login-authentication-with-ldap-ad-how-do-i-create-a-user-row-if-one-is-non\" title=\"upon login authentication with ldap ad how do i create a user row if one is non\">stackoverflow.com/questions/45059698/&hellip;</a>"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1499867923, "post_id": 45055845, "comment_id": 77092900, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/149012/discussion-between-gerry-and-anro-deodo\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 1, "last_activity_date": 1499867223, "last_edit_date": 1499867223, "creation_date": 1499857320, "answer_id": 45055845, "question_id": 45055287, "link": "https://stackoverflow.com/questions/45055287/i-have-an-ldap-connection-on-my-ror-app-but-now-how-do-i-check-users-on-login/45055845#45055845", "title": "I have an ldap connection on my RoR app but now how do I check users on login?", "body": "<p>You could create a <em>service</em> that handles that process:</p>\n\n<p>app/services/authenticate_user.rb</p>\n\n<pre><code>class AuthenticateUser\n  def initialize(user, password)\n    @user = user\n    @password = password\n  end\n\n  def call\n    user_is_valid?\n  end\n\n  private\n  def user_is_valid?\n    ldap = Net::LDAP.new\n    ldap.host = your_server_ip_address\n    ldap.port = 389\n    ldap.auth(@user, @password)\n    ldap.bind\n  end\nend\n</code></pre>\n\n<p>Then use it in your controller:</p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n  def new\n  end\n\n  def create\n    username = params[:NumeroEmpregado]\n    password = params[:password]\n    name     = \"Some Name\"      # Change \"Some Name\" to set the correct name  \n\n    if AuthenticateUser.new(username, password).call\n      user = User.create_with(nome: name).find_or_create_by(NumeroEmpregado: username)\n      session[:user_id] = user.id\n      redirect_to '/'\n    else\n      flash[:error] = \"Erro!              \\nN\u00famero de Empregado e/ou password incorrecto(a)\"\n      redirect_to '/login'\n     end\n  end\n\n  def destroy\n    session[:user_id] = nil\n    redirect_to '/index/new'\n  end\nend\n</code></pre>\n\n<p><code>AuthenticateUser.new(user, password).call</code> will return <code>true</code> when valid <code>user</code> and <code>password</code> are provided, and will return <code>false</code> otherwise.</p>\n\n<p>This is a basic example covering only the LDAP authentication, you will need to adapt it for your specific needs, including exception handling.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8283967"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 408, "favorite_count": 1, "accepted_answer_id": 45055845, "answer_count": 1, "score": 1, "last_activity_date": 1499867223, "creation_date": 1499855697, "last_edit_date": 1499864845, "question_id": 45055287, "link": "https://stackoverflow.com/questions/45055287/i-have-an-ldap-connection-on-my-ror-app-but-now-how-do-i-check-users-on-login", "title": "I have an ldap connection on my RoR app but now how do I check users on login?", "body": "<p>I'm developing an <code>Ruby on Rails</code> webapp and I'm trying to use <code>LDAP</code> authentication to authenticate my users, I have the connection set up and working to the <code>LDAP</code>, but now I can't find any examples or documentation online on how to write code to authenticate users against my <code>LDAP</code> on <code>Ruby on Rails</code> </p>\n\n<p>I'm using: <code>Ruby v2.2</code> and <code>Rails v5.0.3</code> and the gem I'm using to connect to ldap is <code>gem 'net-ldap', '~&gt; 0.16.0'</code></p>\n\n<p>This is my login form at the moment, authenticating with a <code>sqlserver DB</code>, but I want it to authenticate against my <code>LDAP DB</code> : </p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n\n  def new\n  end\n\n\n  def create\n    user = User.find_by_NumeroEmpregado(params[:NumeroEmpregado])\n\n    if user &amp;&amp; user.authenticate(params[:password])\n\n      session[:user_id] = user.id\n      redirect_to '/'\n    else\n     flash[:error] = \"Erro!              \\nN\u00famero de Empregado e/ou password incorrecto(a)\"\n     redirect_to '/login'\n     end\n  end\n\n  def destroy\n    session[:user_id] = nil\n    redirect_to '/index/new'\n  end\n\nend\n</code></pre>\n\n<p>users_controller.rb</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n\n  def new\n  end\n\n  def create\n    user = User.new(user_params)\n    if user.save\n      session[:user_id] = user.id\n      redirect_to '/'\n    else\n    flash[:error] = \"Erro!           \\nNenhum dos campos pode ser deixado em branco\"\n    redirect_to '/signup'\n\n    end\n  end\n\nprivate\n  def user_params\n    params.require(:user).permit(:NumeroEmpregado, :nome, :password, :password_confirmation)\n  end\nend\n</code></pre>\n\n<ul>\n<li>How can I reformulate this code into authenticating with my <code>LDAP DB</code>?</li>\n</ul>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1499855828, "post_id": 45054870, "comment_id": 77083774, "body": "Have you tried anything yourself so far?"}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1499866756, "post_id": 45054870, "comment_id": 77091995, "body": "Please add examples of what the output should be."}], "answers": [{"tags": [], "owner": {"reputation": 726, "user_id": 828473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e88625d1b87bc9741496a9bbfa0bc8e4?s=128&d=identicon&r=PG", "display_name": "hewo", "link": "https://stackoverflow.com/users/828473/hewo"}, "is_accepted": true, "score": 1, "last_activity_date": 1499855069, "creation_date": 1499855069, "answer_id": 45055050, "question_id": 45054870, "link": "https://stackoverflow.com/questions/45054870/move-all-instances-of-a-character-to-the-end-of-the-string/45055050#45055050", "title": "Move all instances of a character to the end of the string", "body": "<p>You could do it with:</p>\n\n<pre><code>s = \"Hi! Hi! Hi!\"\ns1 = s.delete(\"!\")+s.scan(\"!\").join\n</code></pre>\n\n<ul>\n<li>.delete(\"!\") just returns a string without \"!\". </li>\n<li>.scan(\"!\") collects all \"!\" from a string.</li>\n<li>.join just joins all elements of an array to a string</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 0, "last_activity_date": 1499863435, "creation_date": 1499863435, "answer_id": 45058045, "question_id": 45054870, "link": "https://stackoverflow.com/questions/45054870/move-all-instances-of-a-character-to-the-end-of-the-string/45058045#45058045", "title": "Move all instances of a character to the end of the string", "body": "<p>Just for fun, you could sort the characters by their index, except when the character is <code>!</code> :</p>\n\n<pre><code>\"Hi! Hi! Hi!\".each_char.sort_by.with_index{ |c, i| c == '!' ? Float::INFINITY : i }.join\n#=&gt; \"Hi Hi Hi!!!\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1499875727, "creation_date": 1499875727, "answer_id": 45062802, "question_id": 45054870, "link": "https://stackoverflow.com/questions/45054870/move-all-instances-of-a-character-to-the-end-of-the-string/45062802#45062802", "title": "Move all instances of a character to the end of the string", "body": "<p>Another way:</p>\n\n<pre><code>str.tr('!','') + '!'*str.count('!')\n #=&gt; \"Hi Hi Hi!!!\"\n</code></pre>\n"}], "owner": {"reputation": 169, "user_id": 8004873, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155337100937704/picture?type=large", "display_name": "sledge_909", "link": "https://stackoverflow.com/users/8004873/sledge-909"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "closed_date": 1499876179, "accepted_answer_id": 45055050, "answer_count": 3, "score": 0, "last_activity_date": 1499876315, "creation_date": 1499854603, "last_edit_date": 1499876315, "question_id": 45054870, "link": "https://stackoverflow.com/questions/45054870/move-all-instances-of-a-character-to-the-end-of-the-string", "closed_reason": "Needs details or clarity", "title": "Move all instances of a character to the end of the string", "body": "<p>If I havd a string like:</p>\n\n<pre><code>\"Hi! Hi! Hi!\"\n</code></pre>\n\n<p>How can I move the exclamation marks to the end of the string.</p>\n\n<p>Expected output:</p>\n\n<pre><code>\"Hi Hi Hi!!!\"\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ruby-on-rails-5"], "owner": {"reputation": 11, "user_id": 7856454, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a75b7f64ef818fd5b7723bdbf06ec87?s=128&d=identicon&r=PG&f=1", "display_name": "massi", "link": "https://stackoverflow.com/users/7856454/massi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 224, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1499861624, "creation_date": 1499854120, "last_edit_date": 1499861624, "question_id": 45054688, "link": "https://stackoverflow.com/questions/45054688/replace-remote-function-for-rails-5", "title": "replace remote_function for rails 5", "body": "<p>There is no more <code>remote_function</code> in rails 5. How can i replace it with JavaScript.</p>\n\n<p>I want to upgrade a legacy rails application to 5 and I am stuck in this bug of (remote_function) </p>\n\n<p>this is my view </p>\n\n<pre><code> &lt;p&gt;&lt;label for=\"comment\"&gt;Special position: &lt;/label&gt;&lt;%= f.text_field :special_position , :class=&gt;\"form-control\" %&gt;&lt;/p&gt;\n &lt;p&gt;&lt;label for=\"medium\"&gt;Medium: &lt;/label&gt;&lt;%= collection_select(:order_item, :medium_id, @media,  :id, :label, { :always_prompt =&gt; \"Select a medium\" }, { :onchange =&gt; \"#{remote_function(:url =&gt; { :action =&gt; \"medium_changed\" }, :with =&gt; \"'order_item_id=#{@order_item.id}&amp;order_id=#{@order_item.order.id}&amp;medium_id='+value\") }\", :id =&gt; \"order_item_medium_id\", :name =&gt; \"order_item[medium_id]\" ,:class=&gt;\"form-control\"} )  %&gt;&lt;/p&gt;\n &lt;p&gt;&lt;label for=\"listing_entry\"&gt;Listing entry: &lt;/label&gt;&lt;%= collection_select(:order_item, :contact_id, @listing_entries, :id, :fancy_name, { :always_prompt =&gt; \"Select a listing entry\" }, { :id =&gt; \"order_item_contact_id\", :name =&gt; \"order_item[contact_id]\" ,:class=&gt;\"form-control\"} ) %&gt;&lt;/p&gt;\n</code></pre>\n\n<p>this is the action in the controller (order_item_controller)</p>\n\n<pre><code>def medium_changed\n  if !params[:order_item_id].blank?\n    @order_item = OrderItem.find(params[:order_item_id])\n    @order_item.medium = Medium.find(params[:medium_id])\n  else\n    @medium = Medium.find(params[:medium_id])\n  end\n\n  unless params[:order_id].blank?\n    @order = Order.find(params[:order_id])\n  end\n\n  render :update do |page|\n    page.replace_html 'product', :partial =&gt; 'product', :locals =&gt; { :order_item =&gt; @order_item, :medium =&gt; @medium, :order =&gt; @order }\n    page.replace_html 'reference', :partial =&gt; 'reference', :locals =&gt; { :order_item =&gt; @order_item, :medium =&gt; @medium, :order =&gt; @order }\n    page.replace_html 'category', :partial =&gt; 'category', :locals =&gt; { :order_item =&gt; @order_item, :medium =&gt; @medium, :order =&gt; @order }\n    page.replace_html 'region', :partial =&gt; 'region', :locals =&gt; { :order_item =&gt; @order_item, :medium =&gt; @medium, :order =&gt; @order }\n    page.replace_html 'city', :partial =&gt; 'city', :locals =&gt; { :order_item =&gt; @order_item, :medium =&gt; @medium, :order =&gt; @order }\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "counter", "culture"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1499849174, "post_id": 45052688, "comment_id": 77078823, "body": "Did you run <code>bundle install</code> on heroku?"}, {"owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "edited": false, "score": 0, "creation_date": 1499851538, "post_id": 45052688, "comment_id": 77080610, "body": "try installing it for production gem &#39;counter_culture&#39;, &#39;~&gt; 1.0&#39;"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 1, "creation_date": 1499853899, "post_id": 45052688, "comment_id": 77082386, "body": "post your gemfile"}], "answers": [{"tags": [], "owner": {"reputation": 323, "user_id": 2085707, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2f58dfbe2fd4af3b5a6d6a602637e3a2?s=128&d=identicon&r=PG", "display_name": "myoo", "link": "https://stackoverflow.com/users/2085707/myoo"}, "is_accepted": false, "score": 0, "last_activity_date": 1499910154, "creation_date": 1499910154, "answer_id": 45070130, "question_id": 45052688, "link": "https://stackoverflow.com/questions/45052688/rails-cause-method-not-found-error-on-heroku/45070130#45070130", "title": "Rails cause method not found error on Heroku", "body": "<p>Thank you for pointing it out.</p>\n\n<p>I put <code>gem 'counter_culture'</code> into <code>group :development, :test</code>.\nIt's mistake.</p>\n\n<p>Thanks and Sorry for bother you.\nCheers! </p>\n"}], "owner": {"reputation": 323, "user_id": 2085707, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2f58dfbe2fd4af3b5a6d6a602637e3a2?s=128&d=identicon&r=PG", "display_name": "myoo", "link": "https://stackoverflow.com/users/2085707/myoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 316, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1499910154, "creation_date": 1499849043, "last_edit_date": 1499856495, "question_id": 45052688, "link": "https://stackoverflow.com/questions/45052688/rails-cause-method-not-found-error-on-heroku", "title": "Rails cause method not found error on Heroku", "body": "<p>I created Rails 5.1.2 app and deployed to Heroku.</p>\n\n<p>At local, everything is all right, but when deployed to Heroku, below errors occured at starting puma.</p>\n\n<pre><code>/app/vendor/bundle/ruby/2.4.0/gems/activerecord-5.1.2/lib/active_record/dynamic_matchers.rb:22:in `method_missing': undefined method `counter_culture' for #&lt;Class:0x00000003296690&gt; (NoMethodError)\n</code></pre>\n\n<p>I specified ruby version to 2.4.1 in my Gemfile,</p>\n\n<pre><code>source 'https://rubygems.org'\nruby '2.4.1'\n</code></pre>\n\n<p>and heroku cli returns ruby version as below.</p>\n\n<pre><code>heroku run \"ruby -v\"\nRunning ruby -v on \u2b22 my-app... up, run.1200 (Free)\nruby 2.4.1p111 (2017-03-22 revision 58053) [x86_64-linux]\n</code></pre>\n\n<p>but logs from puma says that </p>\n\n<pre><code>from /app/vendor/bundle/ruby/2.4.0/\n</code></pre>\n\n<p>and cannot find method of counter_culture gem.</p>\n\n<p>Someone knows how to resolve this error?</p>\n\n<p>When testing by Heroku CI, this error was not caused.</p>\n"}, {"tags": ["ruby", "object", "directory"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6671759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ba0a574ba2694bc88f0dd6d23d6badc?s=128&d=identicon&r=PG&f=1", "display_name": "Ona", "link": "https://stackoverflow.com/users/6671759/ona"}, "edited": false, "score": 0, "creation_date": 1499852535, "post_id": 45053889, "comment_id": 77081383, "body": "I do not understand why the method entries works with my object kd, but getwd does not. These two methods are listed among the methods for Dir class."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 1, "user_id": 6671759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ba0a574ba2694bc88f0dd6d23d6badc?s=128&d=identicon&r=PG&f=1", "display_name": "Ona", "link": "https://stackoverflow.com/users/6671759/ona"}, "edited": false, "score": 1, "creation_date": 1499852884, "post_id": 45053889, "comment_id": 77081643, "body": "@Ona <code>Dir</code> includes <code>Enumerable</code>, so <code>kd.entries</code> is actually <a href=\"http://ruby-doc.org/core-2.4.1/Enumerable.html#method-i-entries\" rel=\"nofollow noreferrer\"><code>Enumerable#entries</code></a>. It&#39;s equivalent to calling <code>kd.each.to_a</code>"}, {"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1499853309, "post_id": 45053889, "comment_id": 77081941, "body": "Yes as @Stefan said, .entries works as Dir includes Enumerable...If you really want to know what are all the instance methods that are available for Dir class you can always do <code>Dir.instance_methods</code> in irb..."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1499853420, "post_id": 45053889, "comment_id": 77082020, "body": "<code>Dir.instance_methods</code> merely returns a list of symbols. It doesn&#39;t explain where the methods come from."}, {"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1499853804, "post_id": 45053889, "comment_id": 77082314, "body": "Yeah true, I told this so that OP can make use of the list and code accordingly next time."}], "tags": [], "owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "is_accepted": false, "score": 0, "last_activity_date": 1499852062, "creation_date": 1499852062, "answer_id": 45053889, "question_id": 45052497, "link": "https://stackoverflow.com/questions/45052497/class-dir-creating-an-object-ruby/45053889#45053889", "title": "Class Dir. Creating an object. Ruby", "body": "<p>Of course <code>kd</code> is an object of <code>Dir</code>...But, the method <code>getwd</code> is a Public class method not a Public instance method. So, <code>getwd</code> doesn't work with objects. You should use it like <code>Dir.getwd</code> only...\nIf you want to change directory and get the current working directory, which I assume is your requirement, you can do like...</p>\n\n<pre><code>Dir.chdir(\"N:/Data-Analytics/Products\") #changes the current working directory\n</code></pre>\n\n<p>and then run,</p>\n\n<p><code>Dir.getwd</code> or <code>Dir.pwd</code> <code># gets current working directory</code></p>\n"}], "owner": {"reputation": 1, "user_id": 6671759, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ba0a574ba2694bc88f0dd6d23d6badc?s=128&d=identicon&r=PG&f=1", "display_name": "Ona", "link": "https://stackoverflow.com/users/6671759/ona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499852062, "creation_date": 1499848464, "last_edit_date": 1499850882, "question_id": 45052497, "link": "https://stackoverflow.com/questions/45052497/class-dir-creating-an-object-ruby", "title": "Class Dir. Creating an object. Ruby", "body": "<p>I am new to Ruby and to programming in general. Currently, I am working with Dir class in Ruby. I'm trying to create a Dir object and then use the Dir methods on this object. However, I do something wrong. This is a little code that I use.</p>\n\n<pre><code>$LOAD_PATH\nputs Dir.getwd\nputs Dir.glob(\"*.rb\")\n</code></pre>\n\n<p>this works just fine. I can see my current directory and list all the files with .rb extention.</p>\n\n<pre><code>kd = Dir.new(\"N:/Data-Analytics/Products\")\nputs kd.getwd\n</code></pre>\n\n<p>Here, I created an object kd indicating other directory. However, I have a message that getwd is an undefined method. Isn't kd an object of Dir?</p>\n\n<p>Thank you for your help =)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "reek"], "answers": [{"tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": false, "score": 5, "last_activity_date": 1499846321, "creation_date": 1499846321, "answer_id": 45051752, "question_id": 45051509, "link": "https://stackoverflow.com/questions/45051509/instancevariableassumption-userscontroller-assumes-too-much-for-instance-variab/45051752#45051752", "title": "InstanceVariableAssumption: UsersController assumes too much for instance variable &#39;@user&#39;", "body": "<p>That looks like one of the smells that reek <a href=\"https://github.com/troessner/reek/blob/master/README.md#working-with-rails\" rel=\"noreferrer\">recommends disabling</a> on the GitHub page. According to <a href=\"https://github.com/troessner/reek/issues/1133\" rel=\"noreferrer\">this bug report</a>  filed on the project, it appears this is just due to rails making use/encouraging patterns that reek doesn't like by default.</p>\n"}, {"tags": [], "owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "is_accepted": false, "score": 1, "last_activity_date": 1499846340, "creation_date": 1499846340, "answer_id": 45051758, "question_id": 45051509, "link": "https://stackoverflow.com/questions/45051509/instancevariableassumption-userscontroller-assumes-too-much-for-instance-variab/45051758#45051758", "title": "InstanceVariableAssumption: UsersController assumes too much for instance variable &#39;@user&#39;", "body": "<p>Instance Variable Assumption says:</p>\n\n<blockquote>\n  <p>Classes should not assume that instance variables are set or present outside of the current class definition.</p>\n</blockquote>\n\n<p>Well, this is where <strong>Convention over configuration</strong> comes in Rails. Rails has its own way of doing things, and the class: <code>UsersController</code> has a dependency upon the class: <code>User</code>.</p>\n\n<p>The variable: <code>@user</code> is an instance variable defined in <code>UsersController</code>, but this is an object of class <code>User</code>. And this is how the things are done in Rails, and you will find it everywhere.</p>\n\n<p>Just assume that this isn't perfect according to <a href=\"https://github.com/troessner/reek\" rel=\"nofollow noreferrer\">Reek</a> gem, but this is how the things are done in Ruby on Rails.</p>\n"}, {"tags": [], "owner": {"reputation": 1928, "user_id": 3280050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0f86ec29ab3a8f7f841f471d582a933?s=128&d=identicon&r=PG", "display_name": "truongnm", "link": "https://stackoverflow.com/users/3280050/truongnm"}, "is_accepted": true, "score": 0, "last_activity_date": 1520249899, "creation_date": 1520249899, "answer_id": 49109643, "question_id": 45051509, "link": "https://stackoverflow.com/questions/45051509/instancevariableassumption-userscontroller-assumes-too-much-for-instance-variab/49109643#49109643", "title": "InstanceVariableAssumption: UsersController assumes too much for instance variable &#39;@user&#39;", "body": "<p>We could use like this:</p>\n\n<pre><code>attr_reader :user, :users\n</code></pre>\n\n<p>Then all @user, @users can be written like <code>user</code> or <code>users</code>.</p>\n"}], "owner": {"reputation": 1928, "user_id": 3280050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0f86ec29ab3a8f7f841f471d582a933?s=128&d=identicon&r=PG", "display_name": "truongnm", "link": "https://stackoverflow.com/users/3280050/truongnm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1495, "favorite_count": 1, "accepted_answer_id": 49109643, "answer_count": 3, "score": 3, "last_activity_date": 1520249899, "creation_date": 1499845657, "last_edit_date": 1499848206, "question_id": 45051509, "link": "https://stackoverflow.com/questions/45051509/instancevariableassumption-userscontroller-assumes-too-much-for-instance-variab", "title": "InstanceVariableAssumption: UsersController assumes too much for instance variable &#39;@user&#39;", "body": "<p>I'm following Michael Hartl tutorial Rails course. On <a href=\"https://www.railstutorial.org/book/sign_up\" rel=\"nofollow noreferrer\">chapter 7</a>, I run Reek on UsersController and I got this following warning:</p>\n\n<blockquote>\n  <p>app/controllers/users_controller.rb -- 1 warning:<br>\n  <a href=\"https://www.railstutorial.org/book/sign_up\" rel=\"nofollow noreferrer\">1</a>:InstanceVariableAssumption: UsersController assumes too much for\n  instance variable '@user'\n  [<a href=\"https://github.com/troessner/reek/blob/master/docs/Instance-Variable-Assumption.md]\" rel=\"nofollow noreferrer\">https://github.com/troessner/reek/blob/master/docs/Instance-Variable-Assumption.md]</a></p>\n</blockquote>\n\n<p>Here is my code:</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  def new\n    @user = User.new\n  end\n\n  def create\n    @user = User.new user_params\n    if @user.save\n      flash[:success] = t \"welcome_to_app\"\n      redirect_to @user\n    else\n      render \"new\"\n    end\n  end\n\n  def show\n    @user = User.find_by id: params[:id]\n\n    return if @user\n    flash[:danger] = t \"not_exist_user\"\n    redirect_to root_path\n  end\n\n  private\n\n  def user_params\n    params.require(:user).permit :name, :email, :password,\n      :password_confirmation\n  end\nend\n</code></pre>\n\n<p>Kindly explain why I got this error InstanceVariableAssumption and how to fix this.</p>\n"}, {"tags": ["ruby", "jenkins", "cucumber", "knapsack-problem"], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 8137317, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/594b08364d3acbfb70e71a9407af3f4f?s=128&d=identicon&r=PG&f=1", "display_name": "Giwery", "link": "https://stackoverflow.com/users/8137317/giwery"}, "edited": false, "score": 0, "creation_date": 1499845265, "post_id": 45051274, "comment_id": 77076159, "body": "If I run  <code>bundle exec rake &quot;knapsack:cucumber -f json -o cucumber.json&quot;</code> I get error: <code>Don&#39;t know how to build task &#39;knapsack:cucumber -- -f json -o cucumber.json&#39;</code>"}, {"owner": {"reputation": 224, "user_id": 6366616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lgwr3.jpg?s=128&g=1", "display_name": "Max L.", "link": "https://stackoverflow.com/users/6366616/max-l"}, "reply_to_user": {"reputation": 117, "user_id": 8137317, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/594b08364d3acbfb70e71a9407af3f4f?s=128&d=identicon&r=PG&f=1", "display_name": "Giwery", "link": "https://stackoverflow.com/users/8137317/giwery"}, "edited": false, "score": 0, "creation_date": 1499845828, "post_id": 45051274, "comment_id": 77076542, "body": "@Giwery Did you use --f or -f ?"}, {"owner": {"reputation": 117, "user_id": 8137317, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/594b08364d3acbfb70e71a9407af3f4f?s=128&d=identicon&r=PG&f=1", "display_name": "Giwery", "link": "https://stackoverflow.com/users/8137317/giwery"}, "edited": false, "score": 0, "creation_date": 1499846706, "post_id": 45051274, "comment_id": 77077147, "body": "<code>bundle exec rake &quot;knapsack:cucumber[--format json --out cucumber.json]&quot;</code> Solve the problem. Thanks."}], "tags": [], "owner": {"reputation": 224, "user_id": 6366616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lgwr3.jpg?s=128&g=1", "display_name": "Max L.", "link": "https://stackoverflow.com/users/6366616/max-l"}, "is_accepted": true, "score": 2, "last_activity_date": 1500069221, "last_edit_date": 1500069221, "creation_date": 1499844997, "answer_id": 45051274, "question_id": 45051122, "link": "https://stackoverflow.com/questions/45051122/how-to-generate-cucumber-report-if-i-use-knapsack/45051274#45051274", "title": "How to generate cucumber report if I use knapsack", "body": "<p>There is an example from documentation:</p>\n\n<pre><code>bundle exec rake \"knapsack_pro:cucumber[--name feature]\"\n</code></pre>\n\n<p>So, try to use <code>\"\"</code> like:</p>\n\n<pre><code>bundle exec rake \"knapsack:cucumber[--format json --out cucumber.json]\"\n</code></pre>\n\n<p><a href=\"https://github.com/KnapsackPro/knapsack_pro-ruby#passing-arguments-to-cucumber\" rel=\"nofollow noreferrer\">https://github.com/KnapsackPro/knapsack_pro-ruby#passing-arguments-to-cucumber</a></p>\n\n<p>Hope it will help you!</p>\n"}], "owner": {"reputation": 117, "user_id": 8137317, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/594b08364d3acbfb70e71a9407af3f4f?s=128&d=identicon&r=PG&f=1", "display_name": "Giwery", "link": "https://stackoverflow.com/users/8137317/giwery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "accepted_answer_id": 45051274, "answer_count": 1, "score": 2, "last_activity_date": 1500069221, "creation_date": 1499844553, "question_id": 45051122, "link": "https://stackoverflow.com/questions/45051122/how-to-generate-cucumber-report-if-i-use-knapsack", "title": "How to generate cucumber report if I use knapsack", "body": "<p>I run tests in parallel in my jenkins pipeline job using knapsack. I need json report after job for Cucumber reports plugin.\nNow I run cucumber like:</p>\n\n<p><code>bundle exec rake knapsack:cucumber</code></p>\n\n<p>But for plugin I need run cucumber with parameters <code>-f json -o cucumber.json</code>:</p>\n\n<p><code>bundle exec rake knapsack:cucumber -- -f json -o cucumber.json</code></p>\n\n<p>But after this job report didin't genereted.</p>\n\n<p>When I try run <code>cucumber -f json -o cucumber.json</code> report genereted.</p>\n\n<p>How can I generate report with knapsack?\nThanks.</p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 1, "creation_date": 1499856741, "post_id": 45050951, "comment_id": 77084436, "body": "You shouldn&#39;t write your <code>settings.yml</code> inside the installed gem directory. It is <i>very</i> common that the user running your executable has no write permissions there. Instead, access your <code>settings.yml</code> from a location which is usually writable by the current user, e.g. the user&#39;s home directory as in <code>File.expand_path(&quot;~&#47;my_gem.yml&quot;)</code>. It is also a good idea to make this location configurable (e.g. with a command line parameter)."}, {"owner": {"reputation": 147, "user_id": 5320036, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/86efb30c83401cea1682eadc9aa51709?s=128&d=identicon&r=PG&f=1", "display_name": "Jogan Thums", "link": "https://stackoverflow.com/users/5320036/jogan-thums"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1499862808, "post_id": 45050951, "comment_id": 77088842, "body": "Thank you @HolgerJust, this is certainly a better way to get things done."}], "owner": {"reputation": 147, "user_id": 5320036, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/86efb30c83401cea1682eadc9aa51709?s=128&d=identicon&r=PG&f=1", "display_name": "Jogan Thums", "link": "https://stackoverflow.com/users/5320036/jogan-thums"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1499844018, "creation_date": 1499844018, "question_id": 45050951, "link": "https://stackoverflow.com/questions/45050951/writable-file-in-a-ruby-gem", "title": "Writable file in a Ruby Gem", "body": "<p>I created a Ruby Gem executable that contains a settings.yml file where it stores some settings. These settings can be altered during runtime of the executable. \nOn Ubuntu I installed this Gem with sudo gem install and got a write permission error while trying to save the settings.yml file during runtime. So I build the Gem once again this time with write permissions set for all in the settings.yml file. This worked and during runtime I could save my settings.yml file.\nBut when trying to run the gem on my Raspberry Pi it gave the same write permission error.\nIs there a way to ascertain write permissions for a certain file in a Ruby Gem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1499841374, "post_id": 45050022, "comment_id": 77073781, "body": "on which line do you get the error? any backtrace?"}, {"owner": {"reputation": 65, "user_id": 8255597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f00079fc1de2083ee50f75cd2ae6ea1d?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/8255597/boris"}, "reply_to_user": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1499842701, "post_id": 45050022, "comment_id": 77074544, "body": "list.each do |l| <a href=\"http://pix.academ.info/img/2017/07/12/5fe682a4ea2afa56e21fe6b66f5fc14d.png\" rel=\"nofollow noreferrer\">pix.academ.info/img/2017/07/12/&hellip;</a>"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1499844338, "post_id": 45050022, "comment_id": 77075573, "body": "The <code>list</code> is nil. What is the <code>response</code>? Try inspecting it and show us the result."}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1499844360, "post_id": 45050022, "comment_id": 77075586, "body": "post <code>body</code> output"}, {"owner": {"reputation": 65, "user_id": 8255597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f00079fc1de2083ee50f75cd2ae6ea1d?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/8255597/boris"}, "edited": false, "score": 0, "creation_date": 1499851923, "post_id": 45050022, "comment_id": 77080906, "body": "oh, gosh... how to do it? :("}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "edited": false, "score": 0, "creation_date": 1499853806, "post_id": 45050022, "comment_id": 77082317, "body": "@Boris just <code>p</code> before <code>list</code> like <code>p body</code> and you will see the output in console, copy it and paste it here"}, {"owner": {"reputation": 65, "user_id": 8255597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f00079fc1de2083ee50f75cd2ae6ea1d?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/8255597/boris"}, "edited": false, "score": 0, "creation_date": 1499898591, "post_id": 45050022, "comment_id": 77110311, "body": "Rails.logger.debug response.body : <a href=\"https://pastebin.com/H16cRNfa\" rel=\"nofollow noreferrer\">pastebin.com/H16cRNfa</a>  I really look forward to your comments, thank you."}, {"owner": {"reputation": 65, "user_id": 8255597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f00079fc1de2083ee50f75cd2ae6ea1d?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/8255597/boris"}, "edited": false, "score": 0, "creation_date": 1499900103, "post_id": 45050022, "comment_id": 77110785, "body": "If this helps, I can clone the app to heroku."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 8255597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f00079fc1de2083ee50f75cd2ae6ea1d?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/8255597/boris"}, "edited": false, "score": 0, "creation_date": 1500455522, "post_id": 45050790, "comment_id": 77339521, "body": "body.fetch(&#39;list&#39;){[]}.compact This solved the problem. Thank you!"}, {"owner": {"reputation": 224, "user_id": 6366616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lgwr3.jpg?s=128&g=1", "display_name": "Max L.", "link": "https://stackoverflow.com/users/6366616/max-l"}, "reply_to_user": {"reputation": 65, "user_id": 8255597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f00079fc1de2083ee50f75cd2ae6ea1d?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/8255597/boris"}, "edited": false, "score": 0, "creation_date": 1500459698, "post_id": 45050790, "comment_id": 77342549, "body": "@Boris glad to hear it )"}], "tags": [], "owner": {"reputation": 224, "user_id": 6366616, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lgwr3.jpg?s=128&g=1", "display_name": "Max L.", "link": "https://stackoverflow.com/users/6366616/max-l"}, "is_accepted": true, "score": 1, "last_activity_date": 1499843558, "creation_date": 1499843558, "answer_id": 45050790, "question_id": 45050022, "link": "https://stackoverflow.com/questions/45050022/undefined-method-each-for-nil-nilclass/45050790#45050790", "title": "undefined method each for nil: NilClass", "body": "<p>You can use standard method <code>#fetch</code>for this purpose:</p>\n\n<p><a href=\"https://ruby-doc.org/core-2.4.1/Array.html#method-i-fetch\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.4.1/Array.html#method-i-fetch</a></p>\n\n<pre><code>a = [ 11, 22, 33, 44 ]\na.fetch(1)               #=&gt; 22\na.fetch(-1)              #=&gt; 44\na.fetch(4, 'cat')        #=&gt; \"cat\"\na.fetch(100) { |i| puts \"#{i} is out of bounds\" }\n                         #=&gt; \"100 is out of bounds\"\n</code></pre>\n\n<p>Also there is a method <code>#try</code> or even better <code>&amp;.</code> to prevent nil error. Here are some examples:</p>\n\n<p><a href=\"http://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/\" rel=\"nofollow noreferrer\">http://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/</a></p>\n\n<p>Hope this will help you!</p>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 5695120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb11e8539c177718217f68f9033111e1?s=128&d=identicon&r=PG", "display_name": "Alexey Dmitriev", "link": "https://stackoverflow.com/users/5695120/alexey-dmitriev"}, "is_accepted": false, "score": 0, "last_activity_date": 1499862235, "creation_date": 1499862235, "answer_id": 45057630, "question_id": 45050022, "link": "https://stackoverflow.com/questions/45050022/undefined-method-each-for-nil-nilclass/45057630#45057630", "title": "undefined method each for nil: NilClass", "body": "<p>Debug information inside \"def self.cal\" would be really useful:</p>\n\n<p><code>Rails.logger.debug response.body</code></p>\n\n<p>Then you can understand how to parse it properly.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4149807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0292caae1d05c4cfaa73a14fa5b9592f?s=128&d=identicon&r=PG&f=1", "display_name": "Ramakrishna", "link": "https://stackoverflow.com/users/4149807/ramakrishna"}, "is_accepted": false, "score": 0, "last_activity_date": 1534416718, "last_edit_date": 1534416718, "creation_date": 1534414972, "answer_id": 51874774, "question_id": 45050022, "link": "https://stackoverflow.com/questions/45050022/undefined-method-each-for-nil-nilclass/51874774#51874774", "title": "undefined method each for nil: NilClass", "body": "<pre><code>a=nil\nputs a[:ram]\nresult: undefined method `[]' for nil:NilClass (NoMethodError)\n</code></pre>\n\n<p>To avoid this type of error  you can create on nil_class.rb file and keep it in initializers folder in your Rails app. </p>\n\n<pre><code>class NilClass\n    def method_missing(method, *args)\n        \"\"\n    end\nend\na=nil\n\nputs a[:ram]\nresult : ''\n</code></pre>\n\n<p>We can overwrite to avoid errors.</p>\n"}], "owner": {"reputation": 65, "user_id": 8255597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f00079fc1de2083ee50f75cd2ae6ea1d?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/8255597/boris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 469, "favorite_count": 0, "accepted_answer_id": 45050790, "answer_count": 3, "score": -2, "last_activity_date": 1534416718, "creation_date": 1499840990, "last_edit_date": 1499855687, "question_id": 45050022, "link": "https://stackoverflow.com/questions/45050022/undefined-method-each-for-nil-nilclass", "title": "undefined method each for nil: NilClass", "body": "<p>If I add a new ID through the web form, I get the weather for a new city. But if ID is wrong, I get:</p>\n\n<blockquote>\n  <p>\"undefined method `each 'for nil: NilClass\"... </p>\n</blockquote>\n\n<p>Tell me, please, how to check the server's response and show the message\" Did you enter the wrong ID \"?</p>\n\n<p>For example, response to the wrong ID:</p>\n\n<pre><code>{\"cod\":\"404\",\"message\":\"City not found: 605856\"}\n</code></pre>\n\n<p>my_form:</p>\n\n<pre><code>&lt;%= form_tag(\"search\", method: \"get\") do %&gt;\n  &lt;%= label_tag(:q, \"Search for:\") %&gt;\n  &lt;%= text_field_tag(:q) %&gt;\n  &lt;%= submit_tag(\"Go\") %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>controller:</p>\n\n<pre><code>@array = [703448,6058560,1819729] # ID cities\n\nif params[:q].nil?\n  @cities = @array.join(\",\")\nelse\n  @array = @array &lt;&lt; params[:q]\n  @cities = @array.join(\",\")\nend\n\n@lookup = Weather.call(@cities)\n</code></pre>\n\n<p>model:</p>\n\n<pre><code>class Weather\n  include HTTParty\n  base_uri \"http://api.openweathermap.org/data/2.5/group?appid=***********************\n  format :json\n\n  #call the api with HTTParty and parse the JSON response \n  def self.call list_ids\n    response = HTTParty.get(base_uri + '&amp;id=' + list_ids)\n    body = JSON.parse(response.body)\n    list = body[\"list\"]\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "asset-pipeline"], "answers": [{"comments": [{"owner": {"reputation": 1588, "user_id": 723334, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Yoz09.jpg?s=128&g=1", "display_name": "prajeesh", "link": "https://stackoverflow.com/users/723334/prajeesh"}, "edited": false, "score": 0, "creation_date": 1499842934, "post_id": 45049733, "comment_id": 77074682, "body": "Does this get precompiled when you run rake assets:precompile ?"}, {"owner": {"reputation": 151, "user_id": 4511178, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000864175133/picture?type=large", "display_name": "Prashant Kumar Mishra", "link": "https://stackoverflow.com/users/4511178/prashant-kumar-mishra"}, "reply_to_user": {"reputation": 1588, "user_id": 723334, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Yoz09.jpg?s=128&g=1", "display_name": "prajeesh", "link": "https://stackoverflow.com/users/723334/prajeesh"}, "edited": false, "score": 0, "creation_date": 1499845269, "post_id": 45049733, "comment_id": 77076161, "body": "Add Rails.application.config.assets.precompile += %w( file_name ) for pre compilation in assets.rb"}], "tags": [], "owner": {"reputation": 151, "user_id": 4511178, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000864175133/picture?type=large", "display_name": "Prashant Kumar Mishra", "link": "https://stackoverflow.com/users/4511178/prashant-kumar-mishra"}, "is_accepted": false, "score": 0, "last_activity_date": 1499839984, "creation_date": 1499839984, "answer_id": 45049733, "question_id": 45049580, "link": "https://stackoverflow.com/questions/45049580/rails-asset-pipeline-page-specific-css/45049733#45049733", "title": "Rails asset pipeline - Page specific css", "body": "<p>Add an admin_application.(css &amp; js) file and do require all the css and js used for admin panel into that and stub all the front_end assets.</p>\n\n<p>You can stub the file like</p>\n\n<p>in js</p>\n\n<p>//= stub file.js</p>\n\n<p>in css</p>\n\n<p>*= stub file.css</p>\n\n<p><strong>Note</strong>: You should use different layout for both front_end and admin_panel.</p>\n"}], "owner": {"reputation": 1588, "user_id": 723334, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/Yoz09.jpg?s=128&g=1", "display_name": "prajeesh", "link": "https://stackoverflow.com/users/723334/prajeesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 196, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499839984, "creation_date": 1499839317, "question_id": 45049580, "link": "https://stackoverflow.com/questions/45049580/rails-asset-pipeline-page-specific-css", "title": "Rails asset pipeline - Page specific css", "body": "<p>I have  a website that contains a registration page on the front end.\nIt also contains an admin panel which uses an admin theme.\nSince the javascripts and css files of the theme are placed on assets folder, they will be loaded on the admin pages as well as on the FRONT END.</p>\n\n<p>Is there a way to organise the theme files on the asset folder so that they are not loaded on the front end?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1391, "user_id": 1584408, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QjIgV.png?s=128&g=1", "display_name": "timiTao", "link": "https://stackoverflow.com/users/1584408/timitao"}, "edited": false, "score": 0, "creation_date": 1499838890, "post_id": 45049320, "comment_id": 77072499, "body": "Please, show your code."}, {"owner": {"reputation": 65, "user_id": 8293552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/23228a3f7fe6148b06d45162de0324b2?s=128&d=identicon&r=PG&f=1", "display_name": "Sushant Bajracharya", "link": "https://stackoverflow.com/users/8293552/sushant-bajracharya"}, "reply_to_user": {"reputation": 1391, "user_id": 1584408, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/QjIgV.png?s=128&g=1", "display_name": "timiTao", "link": "https://stackoverflow.com/users/1584408/timitao"}, "edited": false, "score": 0, "creation_date": 1499839029, "post_id": 45049320, "comment_id": 77072562, "body": "@timiTao, question updated"}, {"owner": {"reputation": 668, "user_id": 5010116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sIte7.jpg?s=128&g=1", "display_name": "Top Sekret", "link": "https://stackoverflow.com/users/5010116/top-sekret"}, "edited": false, "score": 0, "creation_date": 1499845401, "post_id": 45049320, "comment_id": 77076255, "body": "I guess you could sort it with something like: [pseudocode] <code>if rate1 == rate2 then return time2 - time1 else return rate1 - rate2</code>, assuming there is a sort method that takes a callback taking two parameters and returning the difference"}, {"owner": {"reputation": 65, "user_id": 8293552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/23228a3f7fe6148b06d45162de0324b2?s=128&d=identicon&r=PG&f=1", "display_name": "Sushant Bajracharya", "link": "https://stackoverflow.com/users/8293552/sushant-bajracharya"}, "edited": false, "score": 0, "creation_date": 1499845700, "post_id": 45049320, "comment_id": 77076452, "body": "i will have to loop the whole data for this, do not I ?"}], "answers": [{"comments": [{"owner": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "reply_to_user": {"reputation": 65, "user_id": 8293552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/23228a3f7fe6148b06d45162de0324b2?s=128&d=identicon&r=PG&f=1", "display_name": "Sushant Bajracharya", "link": "https://stackoverflow.com/users/8293552/sushant-bajracharya"}, "edited": false, "score": 0, "creation_date": 1499838981, "post_id": 45049391, "comment_id": 77072540, "body": "well, this should work. Could you please share the query fired on rails console. So that I can have a better idea of what&#39;s happening"}, {"owner": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "reply_to_user": {"reputation": 65, "user_id": 8293552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/23228a3f7fe6148b06d45162de0324b2?s=128&d=identicon&r=PG&f=1", "display_name": "Sushant Bajracharya", "link": "https://stackoverflow.com/users/8293552/sushant-bajracharya"}, "edited": false, "score": 0, "creation_date": 1499839377, "post_id": 45049391, "comment_id": 77072742, "body": "It is sorting on the basis of time correctly. But your problem is that the field is of type datetime so, no two records have same <code>created_at</code> value."}, {"owner": {"reputation": 65, "user_id": 8293552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/23228a3f7fe6148b06d45162de0324b2?s=128&d=identicon&r=PG&f=1", "display_name": "Sushant Bajracharya", "link": "https://stackoverflow.com/users/8293552/sushant-bajracharya"}, "edited": false, "score": 0, "creation_date": 1499839487, "post_id": 45049391, "comment_id": 77072802, "body": "it has to sort according to rating as well."}, {"owner": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "reply_to_user": {"reputation": 65, "user_id": 8293552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/23228a3f7fe6148b06d45162de0324b2?s=128&d=identicon&r=PG&f=1", "display_name": "Sushant Bajracharya", "link": "https://stackoverflow.com/users/8293552/sushant-bajracharya"}, "edited": false, "score": 0, "creation_date": 1499839822, "post_id": 45049391, "comment_id": 77072987, "body": "see there may be following cases  According the query above it will sort by rating only when it got two records with same <code>created_at</code> value. Which will obviously never be the case.  Please tell me what should be result if  Course A created_at 4July 4:03 rating 2  Course B created_at 4July 3:03 rating 3  Course C created_at 5July 4:10 raitng 1  Now should <code>Course C</code> should be at top because it has highest created_at or at the lowest because it has lowest rating"}], "tags": [], "owner": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1499838623, "creation_date": 1499838623, "answer_id": 45049391, "question_id": 45049320, "link": "https://stackoverflow.com/questions/45049320/custom-ordering-activerecord-data-in-rails/45049391#45049391", "title": "custom ordering activerecord data in rails", "body": "<p>try \n<code>Course.order({ created_at: :desc, rating: :desc })</code></p>\n\n<p>This will sort first on <code>created_at</code> and if two records have same <code>created_at</code> the will sort on the basis of rating</p>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 8293552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/23228a3f7fe6148b06d45162de0324b2?s=128&d=identicon&r=PG&f=1", "display_name": "Sushant Bajracharya", "link": "https://stackoverflow.com/users/8293552/sushant-bajracharya"}, "edited": false, "score": 0, "creation_date": 1499845475, "post_id": 45050155, "comment_id": 77076301, "body": "the only problem with this is that if A, B has a rating of 4 each but A was created first and B was created second, then B shows up first. If A had shown up first, I wud accept this answer"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 65, "user_id": 8293552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/23228a3f7fe6148b06d45162de0324b2?s=128&d=identicon&r=PG&f=1", "display_name": "Sushant Bajracharya", "link": "https://stackoverflow.com/users/8293552/sushant-bajracharya"}, "edited": false, "score": 0, "creation_date": 1499846113, "post_id": 45050155, "comment_id": 77076732, "body": "you can change it to <code>created_at ASC</code>"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 65, "user_id": 8293552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/23228a3f7fe6148b06d45162de0324b2?s=128&d=identicon&r=PG&f=1", "display_name": "Sushant Bajracharya", "link": "https://stackoverflow.com/users/8293552/sushant-bajracharya"}, "edited": false, "score": 0, "creation_date": 1499846299, "post_id": 45050155, "comment_id": 77076869, "body": "@SushantBajracharya : you don&#39;t need to define <code>ASC</code> as well, as default it take ASC order"}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": true, "score": 1, "last_activity_date": 1499846259, "last_edit_date": 1499846259, "creation_date": 1499841409, "answer_id": 45050155, "question_id": 45049320, "link": "https://stackoverflow.com/questions/45049320/custom-ordering-activerecord-data-in-rails/45050155#45050155", "title": "custom ordering activerecord data in rails", "body": "<p>Try:</p>\n\n<pre><code>Course.all.order(\"average_rating DESC, created_at ASC\")\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 8293552, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/23228a3f7fe6148b06d45162de0324b2?s=128&d=identicon&r=PG&f=1", "display_name": "Sushant Bajracharya", "link": "https://stackoverflow.com/users/8293552/sushant-bajracharya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 517, "favorite_count": 0, "accepted_answer_id": 45050155, "answer_count": 2, "score": 0, "last_activity_date": 1499846259, "creation_date": 1499838315, "last_edit_date": 1499839198, "question_id": 45049320, "link": "https://stackoverflow.com/questions/45049320/custom-ordering-activerecord-data-in-rails", "title": "custom ordering activerecord data in rails", "body": "<p>I have 3 courses A(july 1), B(july 2), C(july 3).A and B is rated 4 and C is rated 5.</p>\n\n<p>I want to order the course like this</p>\n\n<p>C should come first because it was created latest and it has higher rating than others.</p>\n\n<p>A should come second because it was created first than B</p>\n\n<p>I cant use <code>order</code> because it wont give me what i need. any way to fix this?</p>\n\n<p>Here is how i am fetching the data</p>\n\n<pre><code>@courses.order('updated_at DESC, average_rating DESC')\n</code></pre>\n\n<h3>code</h3>\n\n<pre><code>[\n#&lt;Course:0x00000009f3c128\n  id: 6,\n  tutor_id: 2,\n  course_name: \"name\",\n  course_subtitle: \"sub\",\n  course_description: \"&lt;p&gt;test&lt;/p&gt; test\\r\\n\",\n  video_link: \"https://www.youtube.com/watch?v=UVrQcieqD0U\",\n  course_language: \"German\",\n  course_image: \"finalse.png\",\n  created_at: Tue, 11 Jul 2017 05:03:03 UTC +00:00,\n  updated_at: Tue, 11 Jul 2017 08:47:03 UTC +00:00,\n  status: \"accepted\",\n  average_rating: 2.5,\n  rated_time: nil&gt;,\n #&lt;Course:0x00000008139608\n  id: 7,\n  tutor_id: 2,\n  course_name: \"another\",\n  course_subtitle: \"another subtuitle\",\n  course_description: \"&lt;p&gt;course descrition&lt;/p&gt;\\r\\n\",\n  video_link: \"https://www.youtube.com/watch?v=uaTeZA-Gj7s\",\n  course_language: \"Chinese\",\n  course_image: nil,\n  created_at: Tue, 11 Jul 2017 10:40:45 UTC +00:00,\n  updated_at: Tue, 11 Jul 2017 10:41:06 UTC +00:00,\n  status: \"accepted\",\n  average_rating: 2.5,\n  rated_time: nil&gt;,\n #&lt;Course:0x0000000813bea8\n  id: 8,\n  tutor_id: 2,\n  course_name: \"asfas\",\n  course_subtitle: \"were\",\n  course_description: \"&lt;p&gt;asdfsadf&lt;/p&gt;\\r\\n\",\n  video_link: \"https://www.youtube.com/watch?v=xGytDsqkQY8\",\n  course_language: \"English\",\n  course_image: nil,\n  created_at: Wed, 12 Jul 2017 03:53:26 UTC +00:00,\n  updated_at: Wed, 12 Jul 2017 04:32:33 UTC +00:00,\n  status: \"accepted\",\n  average_rating: 1.0,\n  rated_time: nil&gt;,\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3543, "user_id": 2231236, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ZyG2H.jpg?s=128&g=1", "display_name": "Nithin", "link": "https://stackoverflow.com/users/2231236/nithin"}, "edited": false, "score": 0, "creation_date": 1499836981, "post_id": 45049005, "comment_id": 77071729, "body": "check this <a href=\"https://stackoverflow.com/a/4052936/2231236\">stackoverflow.com/a/4052936/2231236</a>"}], "answers": [{"comments": [{"owner": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1499837291, "post_id": 45049032, "comment_id": 77071848, "body": "Doesn&#39;t <code>html_safe</code> mark the string as trusted, so that <b>no</b> additional escaping happens? Thats what the OP wants but your explanation <code>html_safe will escape HTML tags</code> is would then be wrong?"}, {"owner": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "reply_to_user": {"reputation": 31823, "user_id": 1960455, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d22bdc5c04b48a9054586eb64174ea99?s=128&d=identicon&r=PG", "display_name": "t.niese", "link": "https://stackoverflow.com/users/1960455/t-niese"}, "edited": false, "score": 0, "creation_date": 1499837430, "post_id": 45049032, "comment_id": 77071902, "body": "@t.niese It was typo error. Thanx for correction (Y)"}], "tags": [], "owner": {"reputation": 2735, "user_id": 7006199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kFqCJ.jpg?s=128&g=1", "display_name": "Nimish Gupta", "link": "https://stackoverflow.com/users/7006199/nimish-gupta"}, "is_accepted": true, "score": 0, "last_activity_date": 1499837402, "last_edit_date": 1499837402, "creation_date": 1499836981, "answer_id": 45049032, "question_id": 45049005, "link": "https://stackoverflow.com/questions/45049005/what-would-the-reason-be-for-my-ckeditor-to-output-html-tags-onto-the-screen/45049032#45049032", "title": "What would the reason be for my ckeditor to output html tags onto the screen?", "body": "<p>try using <code>html_safe</code> on the post text when you are displaying it</p>\n\n<p>For ex if -</p>\n\n<pre><code>&lt;div&gt;&lt;%= post_data.html_safe %&gt;&lt;div&gt;\n</code></pre>\n\n<p>html_safe will not escape the HTML tags</p>\n"}], "owner": {"reputation": 91, "user_id": 8171105, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b9746932bf6a2851e5e480765271cab0?s=128&d=identicon&r=PG&f=1", "display_name": "dragon", "link": "https://stackoverflow.com/users/8171105/dragon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 45049032, "answer_count": 1, "score": 0, "last_activity_date": 1499837402, "creation_date": 1499836829, "question_id": 45049005, "link": "https://stackoverflow.com/questions/45049005/what-would-the-reason-be-for-my-ckeditor-to-output-html-tags-onto-the-screen", "title": "What would the reason be for my ckeditor to output html tags onto the screen?", "body": "<p>I installed ckeditor on my blog website I am building and whenever I create a new post using ckeditor, the post gets outputted blog with the html tags that were used during the post creation.</p>\n\n<p>So if I bold a text, the strong tag shows up on the screen but the text doesn't actually get bolded.</p>\n\n<p>My new.html.erb shows:</p>\n\n<pre><code>&lt;h1&gt;Create Post&lt;/h1&gt;\n\n&lt;%=  simple_form_for :lesson, url: lessons_path do |f| %&gt;\n&lt;p&gt;\n&lt;%= f.label :title %&gt;\n&lt;%= f.text_field :title %&gt;\n&lt;/p&gt;\n\n    &lt;%= f.input :content, :as =&gt; :ckeditor, input_html: {:ckeditor =&gt; {:toolbar =&gt; 'FULL'}}, class: \"form-control\" %&gt;&lt;/div&gt;\n\n\n\n&lt;p&gt;\n&lt;%= f.submit :Submit\uff01 %&gt;\n&lt;/p&gt;\n\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>My ckeditor settings are:</p>\n\n<pre><code>CKEDITOR.editorConfig = function(config) {\n  config.language = 'en';\n  config.width = '700';\n  config.filebrowserBrowseUrl = \"/ckeditor/attachment_files\";\n  config.filebrowserImageBrowseLinkUrl = \"/ckeditor/pictures\";\n  config.filebrowserImageBrowseUrl = \"/ckeditor/pictures\";\n  config.filebrowserImageUploadUrl = \"/ckeditor/pictures\";\n  config.filebrowserUploadUrl = \"/ckeditor/attachment_files\";\n\n  config.toolbar_Pure = [\n    '/', {\n      name: 'basicstyles',\n      items: ['Bold', 'Italic', 'Underline', 'Strike', 'Subscript', 'Superscript', '-', 'RemoveFormat']\n    }, {\n      name: 'paragraph',\n      items: ['NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', '-', 'Blockquote', '-', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock', '-', 'BidiLtr', 'BidiRtl']\n    }, {\n      name: 'links',\n      items: ['Link', 'Unlink']\n    }, '/', {\n      name: 'styles',\n      items: ['Styles', 'Format', 'Font', 'FontSize']\n    }, {\n      name: 'colors',\n      items: ['TextColor', 'BGColor']\n    }, {\n      name: 'insert',\n      items: ['Image', 'Table', 'HorizontalRule', 'PageBreak']\n    }\n  ];\n  config.toolbar = 'Pure';\n  return true;\n};\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "virtus"], "comments": [{"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1499842298, "post_id": 45048840, "comment_id": 77074283, "body": "Sorry I don&#39;t know Virtus, but in your form you refer to <code>@shipment_for</code> but in your controller I don&#39;t see any reference to <code>@shipment_for</code>. you only set <code>@shipment</code> and <code>@shipment_detail</code>"}, {"owner": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "edited": false, "score": 0, "creation_date": 1499842904, "post_id": 45048840, "comment_id": 77074656, "body": "you wrote <code>attriute</code>"}, {"owner": {"reputation": 93, "user_id": 5172177, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ppRWM.jpg?s=128&g=1", "display_name": "Ryan Angelo", "link": "https://stackoverflow.com/users/5172177/ryan-angelo"}, "reply_to_user": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1499856996, "post_id": 45048840, "comment_id": 77084604, "body": "@Maxence I updated my question sorry for mistakes, but the question is now updated"}, {"owner": {"reputation": 93, "user_id": 5172177, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ppRWM.jpg?s=128&g=1", "display_name": "Ryan Angelo", "link": "https://stackoverflow.com/users/5172177/ryan-angelo"}, "reply_to_user": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "edited": false, "score": 0, "creation_date": 1499857010, "post_id": 45048840, "comment_id": 77084611, "body": "@TimmyVonHeiss updated my question"}], "owner": {"reputation": 93, "user_id": 5172177, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ppRWM.jpg?s=128&g=1", "display_name": "Ryan Angelo", "link": "https://stackoverflow.com/users/5172177/ryan-angelo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 244, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1499856868, "creation_date": 1499835949, "last_edit_date": 1499856868, "question_id": 45048840, "link": "https://stackoverflow.com/questions/45048840/initialize-data-in-edit-using-rails-form-object", "title": "initialize data in edit using rails form object", "body": "<p>I cant initialize the data for class attributes with the use virtus gem. Here's my example code:</p>\n\n<pre><code>class ShipmentForm\n  include Virtus.mode\n\n  attr_reader :shipment\n  attr_reader :shipment_detail\n\n  attribute :shipment_type, String\n  attribute  :shipment_detail, ShipmentDetailAttribute\n\n  def initialize(attr = {})\n   if !attr['id'].nil?\n    @shipment = Shipment.find(attr['id'])\n    @shipment_detail = @shipment.shipment_detail\n    self[:shipment_type] = attr[:shipment_type].nil? ? @shipment.shipment_type : attr[:shipment_type]\n     self[:shipment_detail] = attr[:shipment_detail].nil? ? @shipment_detail.attributes : attr[:shipment_detail]\n   else\n    super(attr)\n   end\n  end\nend\n\nclass ShipmentDetailAttribute\n  include Virtus.model\n\n  attribute :po_number\n  attribute :job_no\n  etc...\nend\n</code></pre>\n\n<p>My haml form</p>\n\n<pre><code>= form_for @shipment, url: shipments_path, method: :patch do |f|\n  = f.text_field :shipment_type\n  = f.fields_for :shipment_detail do |detail|\n    = detail.text_field :po_number\n    = detail.text_field :job_no\n    etc ....\n</code></pre>\n\n<p>Data for shipment_detail fields(po_number, job_no) are not displaying inside the text field</p>\n"}, {"tags": ["ruby", "jruby"], "comments": [{"owner": {"reputation": 81784, "user_id": 9859, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/KEZOL.jpg?s=128&g=1", "display_name": "rampion", "link": "https://stackoverflow.com/users/9859/rampion"}, "edited": false, "score": 0, "creation_date": 1499854864, "post_id": 45048528, "comment_id": 77083039, "body": "<a href=\"https://stackoverflow.com/q/3875884/9859\">related</a>. On my phone right now, but I think you&#39;d start with <code>RubyString#to_java_bytes</code> and then pass those to something that implements the <code>InputStream</code> interface"}], "answers": [{"tags": [], "owner": {"reputation": 81784, "user_id": 9859, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/KEZOL.jpg?s=128&g=1", "display_name": "rampion", "link": "https://stackoverflow.com/users/9859/rampion"}, "is_accepted": true, "score": 1, "last_activity_date": 1499883322, "creation_date": 1499883322, "answer_id": 45064892, "question_id": 45048528, "link": "https://stackoverflow.com/questions/45048528/how-to-convert-org-jruby-rubystring-to-java-io-inputstream/45064892#45064892", "title": "How to convert org.jruby.RubyString to java.io.InputStream", "body": "<p>Use <code>RubyString#to_java_bytes</code> to convert the string to bytes, then wrap it in a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayInputStream.html\" rel=\"nofollow noreferrer\"><code>java.io.ByteArrayInputStream</code></a>,\nwhich is a subclass of <code>java.io.InputStream</code>:</p>\n\n<pre><code>&gt;&gt; \"an arbitrary string\"\n\"an arbitrary string\"\n&gt;&gt; _.to_java_bytes\n=&gt; byte[97, 110, 32, 97, 114, 98, 105, 116, 114, 97, 114, 121, 32, 115, 116, 114, 105, 110, 103]@7133da86\n&gt;&gt; java.io.ByteArrayInputStream.new(_)\n=&gt; #&lt;Java::JavaIo::ByteArrayInputStream:0x73e22a3d&gt;\n&gt;&gt; _.java_kind_of? java.io.InputStream\n=&gt; true\n</code></pre>\n\n<p>All at once:</p>\n\n<pre><code>inputstream = java.io.ByteArrayInputStream.new(\"an arbitrary string\".to_java_bytes)\n</code></pre>\n"}], "owner": {"reputation": 591, "user_id": 8142520, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/l2J1e.png?s=128&g=1", "display_name": "user8142520", "link": "https://stackoverflow.com/users/8142520/user8142520"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "accepted_answer_id": 45064892, "answer_count": 1, "score": 1, "last_activity_date": 1499883322, "creation_date": 1499834103, "question_id": 45048528, "link": "https://stackoverflow.com/questions/45048528/how-to-convert-org-jruby-rubystring-to-java-io-inputstream", "title": "How to convert org.jruby.RubyString to java.io.InputStream", "body": "<p>I am using JRuby with a Java library. The type of an input parameter of the Java method is InputStream, and I am using JRuby to call this method, how could I revert something like \"/directory/item.txt\" to InputStream for the Java method? Thank you.</p>\n"}, {"tags": ["ruby", "google-app-engine", "web-scraping", "google-cloud-vision"], "comments": [{"owner": {"reputation": 316, "user_id": 3306395, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d1bd8cee72b705788cc732ccafc41a55?s=128&d=identicon&r=PG&f=1", "display_name": "karnesJ.R", "link": "https://stackoverflow.com/users/3306395/karnesj-r"}, "edited": false, "score": 0, "creation_date": 1499866515, "post_id": 45048382, "comment_id": 77091792, "body": "Please leave feedback on the answer provided. Did it work for you or not? If not, why?"}, {"owner": {"reputation": 32008, "user_id": 322020, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/dce43cb8158a14c3fed02bea797becd7?s=128&d=identicon&r=PG", "display_name": "Nakilon", "link": "https://stackoverflow.com/users/322020/nakilon"}, "edited": false, "score": 0, "creation_date": 1499898792, "post_id": 45048382, "comment_id": 77110369, "body": "You should better save image to file and then send it -- ruby Cloud Vision library has method for that. If you send the image as a String object, you consume the RAM for it and I won&#39;t be surprised if Net::HTTP library anyway converts the payload to tempfile anyway if it&#39;s enough large."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 6727850, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WQkA-9wJxLo/AAAAAAAAAAI/AAAAAAAAAXw/bgyzeJ9J6N8/photo.jpg?sz=128", "display_name": "aaronbnb", "link": "https://stackoverflow.com/users/6727850/aaronbnb"}, "edited": false, "score": 0, "creation_date": 1500061912, "post_id": 45048781, "comment_id": 77192804, "body": "Thanks for the lengthy explanation. Really appreciate it; I&#39;m just concerned with speed. It doesn&#39;t make sense to base64 encode the image. Since I&#39;ve opened the webpage with the image, seemed like it could be faster to encode, converting it to a string so Google wouldn&#39;t have to open that page. In any case, I&#39;ve revised my original post. Would appreciate your thoughts."}, {"owner": {"reputation": 316, "user_id": 3306395, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d1bd8cee72b705788cc732ccafc41a55?s=128&d=identicon&r=PG&f=1", "display_name": "karnesJ.R", "link": "https://stackoverflow.com/users/3306395/karnesj-r"}, "reply_to_user": {"reputation": 59, "user_id": 6727850, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WQkA-9wJxLo/AAAAAAAAAAI/AAAAAAAAAXw/bgyzeJ9J6N8/photo.jpg?sz=128", "display_name": "aaronbnb", "link": "https://stackoverflow.com/users/6727850/aaronbnb"}, "edited": false, "score": 0, "creation_date": 1501875388, "post_id": 45048781, "comment_id": 77989891, "body": "@aaronbnb You want to make google do the alt-tags as fast as possible yeah? So <i>why would you make their service fetch IO on the image</i>? Sending the image in Base64 <i>is the image</i> and the service does not have to fetch the image itself. It may not be a large improvement, but it will be something. The ruby library just sends formatted requests to google. There is no improvement in using manual JSON over it. Limiting the tags may not be a valid strategy since I don&#39;t know how the image processor works, but I&#39;m assuming that limiting the tags just limits the output you get back."}], "tags": [], "owner": {"reputation": 316, "user_id": 3306395, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d1bd8cee72b705788cc732ccafc41a55?s=128&d=identicon&r=PG&f=1", "display_name": "karnesJ.R", "link": "https://stackoverflow.com/users/3306395/karnesj-r"}, "is_accepted": false, "score": 1, "last_activity_date": 1499835685, "creation_date": 1499835685, "answer_id": 45048781, "question_id": 45048382, "link": "https://stackoverflow.com/questions/45048382/how-to-send-base64-image-to-google-cloud-vision-api-label-detection-in-ruby/45048781#45048781", "title": "How to send Base64 image to Google Cloud Vision API label detection in Ruby?", "body": "<p>So you're using Ruby to scrape some images off a page and then send the image to Google, yeah? </p>\n\n<h1>Why you might <em>not want</em> to base64 encode the image:</h1>\n\n<ul>\n<li>Headless scraping becomes more network intensive. You have to download the image to then process it.</li>\n<li>Now you also have to worry about adding in the base64 encode process</li>\n<li>Potential storage concerns if you aren't just holding the image in memory (and if you do this, debugging becomes somewhat more challenging</li>\n</ul>\n\n<h1>Why you might <em>want</em> to base64 encode the image:</h1>\n\n<ul>\n<li>The image is not publicly accessible</li>\n<li>You have to store the image anyway</li>\n</ul>\n\n<p>Once you have weighed the choices, if you still want to get the image into base64 here is how you do it:</p>\n\n<pre><code>require 'base64'\nBase64.encode(image_binary)\n</code></pre>\n\n<p>It really is that easy.</p>\n\n<h1>But how do I get that image in binary?</h1>\n\n<pre><code>require 'curb'\n# This line is an example and is not intended to be valid\nimg_binary = Curl::Easy.perform(\"http://www.imgur.com/sample_image.png\").body_str\n</code></pre>\n\n<h1>How do I send that to Google?</h1>\n\n<p>Google has a pretty solid write-up of this process here: <a href=\"https://cloud.google.com/vision/docs/request#json_request_format\" rel=\"nofollow noreferrer\">Make a Vision API Request in JSON</a></p>\n\n<p>If you can't click it (or are too lazy to) I have provided a zero-context copy-and-paste of what a request body should look like to their API here:</p>\n\n<pre><code>request_body_json = {\n  \"requests\":[\n    {\n      \"image\":{\n        \"content\":\"/9j/7QBEUGhvdG9...image contents...eYxxxzj/Coa6Bax//Z\"\n      },\n      \"features\":[\n        {\n          \"type\":\"LABEL_DETECTION\",\n          \"maxResults\":1\n        }\n      ]\n    }\n  ]\n}\n</code></pre>\n\n<p>So now we know what a request should look like in the body. If you're already sending the img_src in a POST request, then it's as easy as this:</p>\n\n<pre><code>require 'base64'\nrequire 'curb'\nrequests = []\nfor image in array_of_image_urls\n  img_binary = Curl::Easy.perform(image).body_str\n  image_in_base64 = Base64.encode(image_binary)\n  requests &lt;&lt; { \"image\" =&gt; { \"content\" : image_in_base64 }, \"imageContext\" =&gt; \"&lt;OPTIONAL: SEE REFERENCE LINK&gt;\", \"features\" =&gt; [ {\"type\" =&gt; \"LABEL_DETECTION\", \"maxResults\" =&gt; 1 }]}\nend\n\n# Now just POST requests.to_json with your Authorization and such (You did read the reference right?)\n</code></pre>\n\n<p>Play around with the hash formatting and values as required. This is the <em>general idea</em> which is the best I can give you when your question is SUPER vague.</p>\n"}, {"tags": [], "owner": {"reputation": 40621, "user_id": 380757, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/895b803ca490f08e45cf548f35d0b5b5?s=128&d=identicon&r=PG", "display_name": "Tuxdude", "link": "https://stackoverflow.com/users/380757/tuxdude"}, "is_accepted": false, "score": 2, "last_activity_date": 1500194414, "creation_date": 1500194414, "answer_id": 45126651, "question_id": 45048382, "link": "https://stackoverflow.com/questions/45048382/how-to-send-base64-image-to-google-cloud-vision-api-label-detection-in-ruby/45126651#45126651", "title": "How to send Base64 image to Google Cloud Vision API label detection in Ruby?", "body": "<p><strong>TL;DR</strong> - You can take advantage of the batching supporting in the annotation API for Cloud Vision.</p>\n\n<h2>Longer version</h2>\n\n<p>Google Cloud Vision API supports batching multiple requests in a single call to the <a href=\"https://cloud.google.com/vision/docs/reference/rest/v1/images/annotate\" rel=\"nofollow noreferrer\"><code>images:annotate</code> API</a>. There are also <a href=\"https://cloud.google.com/vision/docs/limits\" rel=\"nofollow noreferrer\">these limits which are enforced for Cloud Vision</a>:</p>\n\n<ul>\n<li>Maximum of 16 images per request</li>\n<li>Maximum 4 MB per image</li>\n<li>Maximum of 8 MB total request size.</li>\n</ul>\n\n<p>You could reduce the number of requests by batching 16 at a time (assuming you do not exceed any of the image size restrictions within the request):</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire \"google/cloud/vision\"\n\nimage_paths = [\n  ...\n  \"./wakeupcat.jpg\",\n  \"./cat_meme_1.jpg\",\n  \"./cat_meme_2.jpg\",\n  ...\n]\n\nvision = Google::Cloud::Vision.new\nlength = image_paths.length\n\nstart = 0\nrequest_count = 0\nwhile start &lt; length do\n  last = [start + 15, length - 1].min\n  current_image_paths = image_paths[start..last]\n  printf \"Sending %d images in the request. start: %d last: %d\\n\", current_image_paths.length, start, last\n  result = vision.annotate *current_image_paths, labels: 1\n  printf \"Result: %s\\n\", result\n  start += 16\n  request_count += 1\nend\n\nprintf \"Made %d requests\\n\", request_count\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 6727850, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-WQkA-9wJxLo/AAAAAAAAAAI/AAAAAAAAAXw/bgyzeJ9J6N8/photo.jpg?sz=128", "display_name": "aaronbnb", "link": "https://stackoverflow.com/users/6727850/aaronbnb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3115, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1500194414, "creation_date": 1499833267, "last_edit_date": 1500061819, "question_id": 45048382, "link": "https://stackoverflow.com/questions/45048382/how-to-send-base64-image-to-google-cloud-vision-api-label-detection-in-ruby", "title": "How to send Base64 image to Google Cloud Vision API label detection in Ruby?", "body": "<p>Hi I'm building a program in Ruby to generate alt attributes for images on a webpage. I'm scraping the page for the images then sending their src, in other words a URL, to google-cloud-vision for label detection and other Cloud Vision methods. It takes about 2-6 seconds per image. I'm wondering if there's any way to reduce response time. I first used TinyPNG to compress the images. Cloud Vision was a tad faster but the time it took to compress more than outweighed the improvement. How can I improve response time? I'll list some ideas.</p>\n\n<p>1) Since we're sending a URL to Google Cloud, it takes time for Google Cloud to receive a response, that is from the img_src, before it can even analyze the image. Is it faster to send a base64 encoded image? What's the fastest form in which to send (or really, for Google to receive) an image?</p>\n\n<pre><code>cloud_vision = Google::Cloud::Vision.new project: PROJECT_ID\n@vision = cloud_vision.image(@file_name)\n@vision.labels #or @vision.web, etc.\n</code></pre>\n\n<p>2) My current code for label detection. First question: is it faster to send a JSON request rather than call Ruby (label or web) methods on a Google Cloud Project? If so, should I limit responses? Labels with less than a 0.6 confidence score don't seem of much help. Would that speed up image rec/processing time? </p>\n\n<p>Open to any suggestions on how to speed up response time from Cloud Vision.</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "loops", "each"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1499831737, "post_id": 45048075, "comment_id": 77070075, "body": "Are you only interested in words starting with <code>&quot;S&quot;</code>? That is , will you be doing anything with words not starting with <code>&quot;S&quot;</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 2, "last_activity_date": 1499831508, "creation_date": 1499831508, "answer_id": 45048108, "question_id": 45048075, "link": "https://stackoverflow.com/questions/45048075/iterating-over-an-array-and-searching-the-matching-element-with-a-given-string-i/45048108#45048108", "title": "Iterating over an array and searching the matching element with a given string in ruby", "body": "<p>You could try with <code>start_with?</code>:</p>\n\n<pre><code>names = [\"John\", \"Sam\", \"Sandy\", \"Andrew\", \"Charlie\"]\n\nnames.each do |name|\n  puts 'output a message' if name.start_with?('S')\nend\n# output a message (for Sam)\n# output a message (for Sandy)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4509, "user_id": 2936491, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/BIeeI.jpg?s=128&g=1", "display_name": "techdreams", "link": "https://stackoverflow.com/users/2936491/techdreams"}, "is_accepted": false, "score": 3, "last_activity_date": 1499835075, "creation_date": 1499835075, "answer_id": 45048691, "question_id": 45048075, "link": "https://stackoverflow.com/questions/45048075/iterating-over-an-array-and-searching-the-matching-element-with-a-given-string-i/45048691#45048691", "title": "Iterating over an array and searching the matching element with a given string in ruby", "body": "<p>Ruby 1.9.2 introduced <a href=\"http://RubyDoc.Info/docs/ruby-core/1.9.2/String#start_with%3F-instance_method\" rel=\"nofollow noreferrer\"><code>start_with?</code></a> that intakes a string as a parameter and checks its present inside another string.</p>\n\n<p>In your case you could do like this.</p>\n\n<pre><code>names.each do |name|\n  puts 'output a message' if name.start_with?('S')\nend\n</code></pre>\n\n<p>But for a more real life scenario you should do two things.</p>\n\n<ol>\n<li>The name could also start with <strong>'s'</strong> rather than <strong>'S'</strong>, so search for both.</li>\n<li>It could have spaces before the actual name. Use <code>.strip</code> method for trailing spaces and then search.</li>\n</ol>\n\n<p>So you should search like this for more practical scenario.</p>\n\n<pre><code>names = [\"John\", \"sam\", \" Sandy\", \"Andrew\", \"Charlie\"]\n\nnames.each do |name|\n  puts 'output a message' if name.strip.start_with?('s', 'S')\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 0, "last_activity_date": 1499848654, "creation_date": 1499848654, "answer_id": 45052561, "question_id": 45048075, "link": "https://stackoverflow.com/questions/45048075/iterating-over-an-array-and-searching-the-matching-element-with-a-given-string-i/45052561#45052561", "title": "Iterating over an array and searching the matching element with a given string in ruby", "body": "<p>The Ruby way would be to use <a href=\"https://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-select\" rel=\"nofollow noreferrer\"><code>select</code></a> with a block or <a href=\"https://ruby-doc.org/core-2.1.0/Enumerable.html#method-i-grep\" rel=\"nofollow noreferrer\"><code>grep</code></a> with a regex first to filter the names which begin with 'S', and only then use <code>each</code> to display the selected names:</p>\n\n<pre><code>names = [\"John\", \"Sam\", \"Sandy\", \"Andrew\", \"Charlie\"]\n\ns_names = names.grep(/^s/i)\n# or\ns_names = names.select{ |name| name.downcase.start_with?('s') }\n\ns_names.each do |name|\n  puts \"'#{name}' starts with an 'S'\"\nend\n# 'Sam' starts with an 'S'\n# 'Sandy' starts with an 'S'\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 8293130, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/10154952247190805/picture?type=large", "display_name": "Matthew Lombana", "link": "https://stackoverflow.com/users/8293130/matthew-lombana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 454, "favorite_count": 0, "accepted_answer_id": 45048108, "answer_count": 3, "score": 2, "last_activity_date": 1537262375, "creation_date": 1499831320, "last_edit_date": 1537262375, "question_id": 45048075, "link": "https://stackoverflow.com/questions/45048075/iterating-over-an-array-and-searching-the-matching-element-with-a-given-string-i", "title": "Iterating over an array and searching the matching element with a given string in ruby", "body": "<p>If I have an array like </p>\n\n<pre><code>names = [\"John\", \"Sam\", \"Sandy\", \"Andrew\", \"Charlie\"]\n</code></pre>\n\n<p>and I had to write a method that takes in the array as a parameter. Inside that method, iterate over the array using the each method. If the name starts with an \u201cS\u201d, output a message.</p>\n\n<p>How would I go about doing this? So far I only have </p>\n\n<pre><code>names.each do |i|\n   puts i\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "selenium", "rspec", "nightwatch.js"], "comments": [{"owner": {"reputation": 2186, "user_id": 4005809, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oLzhL.jpg?s=128&g=1", "display_name": "Steve Carey", "link": "https://stackoverflow.com/users/4005809/steve-carey"}, "edited": false, "score": 1, "creation_date": 1499833496, "post_id": 45047769, "comment_id": 77070535, "body": "Minitest (the Rails default) and RSpec are testing framewords specifically for Ruby/Rails applications. You may be able to do some testing with Nightwatch but I doubt you could do full coverage testing. My 2 cents is to stick with the tried and true. I&#39;ve never used Nightwatch though so I&#39;m just putting this as a comment and not an answer."}], "answers": [{"comments": [{"owner": {"reputation": 514, "user_id": 6856276, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/ecAKM.jpg?s=128&g=1", "display_name": "globewalldesk", "link": "https://stackoverflow.com/users/6856276/globewalldesk"}, "edited": false, "score": 0, "creation_date": 1499868683, "post_id": 45048998, "comment_id": 77093484, "body": "Well, we haven&#39;t upgraded past Rails 4.2 or whatever it is we&#39;re running.  What is the test framework that is built in to Rails called, by the way? I&#39;m reading the Hartl tutorial and I don&#39;t see it named as such anywhere."}], "tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": true, "score": 5, "last_activity_date": 1499888454, "last_edit_date": 1499888454, "creation_date": 1499836800, "answer_id": 45048998, "question_id": 45047769, "link": "https://stackoverflow.com/questions/45047769/can-nightwatch-be-used-to-test-rails/45048998#45048998", "title": "Can Nightwatch be used to test Rails?", "body": "<p>Yes it can be used to test Rails. But only from the outside (only through the Browser). So no Unit/Controller/View Tests.\nYou'll need MiniTest or Rspec for those.</p>\n\n<p>My two cents (also see comment by @SteveCarey): Since I prefer to stick with what comes with Rails and use as little external tools as possible: </p>\n\n<p>Have a look at System Tests that have been introduced with Rails 5.1 or, if you are on a older version, see if you can write those tests using Capybara/Integration Tests.</p>\n\n<p>Update:</p>\n\n<p>You can find more details on testing framework here: <a href=\"http://guides.rubyonrails.org/v4.1/testing.html#brief-note-about-minitest\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/v4.1/testing.html#brief-note-about-minitest</a></p>\n\n<p>It was Test::Unit and nowadays is Minitest. But the basics are the same so it does not really matter.</p>\n\n<p>Another popular testing framework is RSpec. Which you can use instead of Minitest/TestUnit if you want to. I prefer Minitest but there are pros and cons for both frameworks. </p>\n\n<p>Rails 4.2 came with Unit-tests, Functional/Controller-tests and Integration-tests. The built in thing that resembles Nightwatch the most are Integration-tests: <a href=\"http://guides.rubyonrails.org/v4.1/testing.html#integration-testing\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/v4.1/testing.html#integration-testing</a></p>\n\n<p>You can also look at libraries such as Capybara (<a href=\"https://github.com/teamcapybara/capybara\" rel=\"nofollow noreferrer\">https://github.com/teamcapybara/capybara</a>) which calls itself an Acceptance Test framework. It integrates nicely with TestUnit/Minitest/Rspec.</p>\n"}], "owner": {"reputation": 514, "user_id": 6856276, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/ecAKM.jpg?s=128&g=1", "display_name": "globewalldesk", "link": "https://stackoverflow.com/users/6856276/globewalldesk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 489, "favorite_count": 0, "accepted_answer_id": 45048998, "answer_count": 1, "score": 1, "last_activity_date": 1499888454, "creation_date": 1499829306, "question_id": 45047769, "link": "https://stackoverflow.com/questions/45047769/can-nightwatch-be-used-to-test-rails", "title": "Can Nightwatch be used to test Rails?", "body": "<p>A contractor for our startup installed the Selenium-based Nightwatch testing framework, since our stack is React-heavy. But he told me that it could even be used to test our Rails code. A new contractor said, to the contrary, that Nightwatch couldn't do unit tests of our Rails controllers and models (which makes sense to me).</p>\n\n<p>Who is right? Do you suppose the first programmer had in mind just that we would do end-to-end testing (certain inputs lead to certain outputs), and that we need not test the details of the Rails code? Do we, as I suspect and as the new contractor asserts, need RSpec or some other Ruby-based testing framework to handle our Rails code, if we want to be a TDD shop?</p>\n"}, {"tags": ["ruby", "input"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8292932, "user_type": "registered", "profile_image": "https://graph.facebook.com/1382130868500598/picture?type=large", "display_name": "locnguyen", "link": "https://stackoverflow.com/users/8292932/locnguyen"}, "edited": false, "score": 0, "creation_date": 1499928387, "post_id": 45047545, "comment_id": 77119008, "body": "I really thanks for your help! But my problem are like that  input  N M e_{1,1} e_{1,2} ... e_{1,N} e_{2,1} e_{2,2} ... e_{2,N} ... e_{M,1} e_{M,2} ... e_{M,N}"}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 1, "last_activity_date": 1499827914, "creation_date": 1499827914, "answer_id": 45047545, "question_id": 45047401, "link": "https://stackoverflow.com/questions/45047401/how-to-input-m-values-in-n-timesn-lines-by-ruby/45047545#45047545", "title": "How to input m values in n times(n lines) by Ruby?", "body": "<p>If you want to get an user input then you could consider using <code>gets</code>, this way:</p>\n\n<pre><code># a stores what the user introduces, in this case \"a b c\"\na = gets.chomp\n# =&gt; \"a b c\"\n</code></pre>\n\n<p>If for instance you want to allow the user to enter many values, separated by a whitespace or any other, then you can use <code>split</code>, like in:</p>\n\n<pre><code># in this case split without arguments takes the input as string, and divides it within every whitespace ang gives you them in an array.\na = gets.chomp.split\n=&gt; [\"a\", \"b\", \"c\"]\n</code></pre>\n\n<p>Then you already have the way to get the user input for <em>M values in 1 lines with space between 2 values</em>. If you'd like to repeat this, then you could use <code>times</code>, specifying the amount of times you want this be done, i.e:</p>\n\n<pre><code># This will store what the user introduces, splitted as before, and each array will be inside a \"main\" array.\n# If for instance the input is 1 2 3 the first time, a b c the second time, then you get\na = 2.times.map do\n  gets.chomp.split\nend\np a\n# =&gt; [[\"1\", \"2\", \"3\"], [\"a\", \"b\", \"c\"]]\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 8292932, "user_type": "registered", "profile_image": "https://graph.facebook.com/1382130868500598/picture?type=large", "display_name": "locnguyen", "link": "https://stackoverflow.com/users/8292932/locnguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 45047545, "answer_count": 1, "score": -1, "last_activity_date": 1499827914, "creation_date": 1499826950, "question_id": 45047401, "link": "https://stackoverflow.com/questions/45047401/how-to-input-m-values-in-n-timesn-lines-by-ruby", "title": "How to input m values in n times(n lines) by Ruby?", "body": "<p>I have some Ruby exercises and i have problem with inputs.\nI want to know how to input M values in 1 lines with space between 2 values,\nand do N lines like that.\nHave anyone can help me? Please!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex", "xml"], "comments": [{"owner": {"reputation": 13804, "user_id": 15754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DrITH.jpg?s=128&g=1", "display_name": "dbugger", "link": "https://stackoverflow.com/users/15754/dbugger"}, "edited": false, "score": 2, "creation_date": 1499827000, "post_id": 45047305, "comment_id": 77068848, "body": "Do not use regex to read XML.  Parse it  out with an XML tool. Check out <a href=\"https://stackoverflow.com/questions/11198239/parsing-xml-with-ruby\" title=\"parsing xml with ruby\">stackoverflow.com/questions/11198239/parsing-xml-with-ruby</a>"}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1499827713, "post_id": 45047305, "comment_id": 77069038, "body": "How did you get the XML snippet? With an XML parser? If so, you should definitely extract the value you want with the XML parser, it will be much easier."}, {"owner": {"reputation": 1259, "user_id": 972040, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a15117b65a2228a0fd54f3ae591790ba?s=128&d=identicon&r=PG", "display_name": "ruevaughn", "link": "https://stackoverflow.com/users/972040/ruevaughn"}, "edited": false, "score": 0, "creation_date": 1499829568, "post_id": 45047305, "comment_id": 77069491, "body": "Ok, see edit I gave some more context. The Params I received back were extremely messy, and I wasn&#39;t sure how to parse them to XML so I turned them into a readable string. Any extra info on converting those params to XML?"}, {"owner": {"reputation": 137436, "user_id": 415448, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/P2vVZ.png?s=128&g=1", "display_name": "Michael Kay", "link": "https://stackoverflow.com/users/415448/michael-kay"}, "edited": false, "score": 0, "creation_date": 1499844909, "post_id": 45047305, "comment_id": 77075909, "body": "This is not &quot;a simple Regex task&quot;. XML is not a regular language, therefore it is not amenable to processing using regular expressions. Use an XML parser and XPath."}], "answers": [{"comments": [{"owner": {"reputation": 1259, "user_id": 972040, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a15117b65a2228a0fd54f3ae591790ba?s=128&d=identicon&r=PG", "display_name": "ruevaughn", "link": "https://stackoverflow.com/users/972040/ruevaughn"}, "edited": false, "score": 0, "creation_date": 1499829499, "post_id": 45047512, "comment_id": 77069473, "body": "I tried that, it still only matches the first instance"}], "tags": [], "owner": {"reputation": 355, "user_id": 1993830, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b71d4855bf19ec0c3f337b46f2dd0ad7?s=128&d=identicon&r=PG", "display_name": "Andrew", "link": "https://stackoverflow.com/users/1993830/andrew"}, "is_accepted": false, "score": 0, "last_activity_date": 1499827748, "creation_date": 1499827748, "answer_id": 45047512, "question_id": 45047305, "link": "https://stackoverflow.com/questions/45047305/rails-regex-finding-values-on-new-lines/45047512#45047512", "title": "Rails Regex Finding values on new lines", "body": "<p>I think you can use the multi-line flag \"m\"</p>\n\n<pre><code>a.match(/&lt;InstanceIdentifier&gt;([^\\n]\\w+)&lt;\\/InstanceIdentifier&gt;/mi)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1259, "user_id": 972040, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a15117b65a2228a0fd54f3ae591790ba?s=128&d=identicon&r=PG", "display_name": "ruevaughn", "link": "https://stackoverflow.com/users/972040/ruevaughn"}, "edited": false, "score": 0, "creation_date": 1499879745, "post_id": 45049473, "comment_id": 77100935, "body": "You are right, I was missing the &lt; thanks. I will try that"}, {"owner": {"reputation": 1259, "user_id": 972040, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a15117b65a2228a0fd54f3ae591790ba?s=128&d=identicon&r=PG", "display_name": "ruevaughn", "link": "https://stackoverflow.com/users/972040/ruevaughn"}, "edited": false, "score": 0, "creation_date": 1499880292, "post_id": 45049473, "comment_id": 77101227, "body": "I had tried Scan, but I didn&#39;t realize I could pass it a block. Sweet. Thanks"}], "tags": [], "owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "is_accepted": true, "score": 0, "last_activity_date": 1499839363, "last_edit_date": 1499839363, "creation_date": 1499838979, "answer_id": 45049473, "question_id": 45047305, "link": "https://stackoverflow.com/questions/45047305/rails-regex-finding-values-on-new-lines/45049473#45049473", "title": "Rails Regex Finding values on new lines", "body": "<p>You can do</p>\n\n<pre><code>a = \"&lt;InstanceIdentifier&gt;ac1aabd9000048fd0000005b1499825426437&lt;/InstanceIdentifier&gt;\\n\\r&lt;InstanceIdentifier&gt;7B8FB4781849AAB8C8ECBEA488FF5BF7&lt;/InstanceIdentifier&gt;\"\na.scan(/&lt;InstanceIdentifier&gt;(\\w+)&lt;\\/InstanceIdentifier&gt;/i) { |match| puts match }\n# ac1aabd9000048fd0000005b1499825426437\n# 7B8FB4781849AAB8C8ECBEA488FF5BF7\n</code></pre>\n\n<p>if you're set on using a regex for this, though as mentioned an XML parser would be a better way to go about this. Do note, that test input you gave us</p>\n\n<pre><code>a = \"&lt;InstanceIdentifier&gt;ac1aabd9000048fd0000005b1499825426437&lt;/InstanceIdentifier&gt;\\n\\rInstanceIdentifier&gt;7B8FB4781849AAB8C8ECBEA488FF5BF7&lt;/InstanceIdentifier&gt;\"\n</code></pre>\n\n<p>is incorrect, though that looks like a hand-modified example and probably just a question-typo (based on your gist links). (You're missing the open <code>&lt;</code> on the second <code>&lt;InstanceIdentifier&gt;</code></p>\n"}], "owner": {"reputation": 1259, "user_id": 972040, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a15117b65a2228a0fd54f3ae591790ba?s=128&d=identicon&r=PG", "display_name": "ruevaughn", "link": "https://stackoverflow.com/users/972040/ruevaughn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 45049473, "answer_count": 2, "score": 1, "last_activity_date": 1499839363, "creation_date": 1499826247, "last_edit_date": 1499829392, "question_id": 45047305, "link": "https://stackoverflow.com/questions/45047305/rails-regex-finding-values-on-new-lines", "title": "Rails Regex Finding values on new lines", "body": "<p>I am having trouble with a simple regex task. The string looks something like this:</p>\n\n<pre><code>a = \"&lt;InstanceIdentifier&gt;ac1aabd9000048fd0000005b1499825426437&lt;/InstanceIdentifier&gt;\\n\\rInstanceIdentifier&gt;7B8FB4781849AAB8C8ECBEA488FF5BF7&lt;/InstanceIdentifier&gt;\"\n</code></pre>\n\n<p>I'm trying to extract the value 7B8FB4781849AAB8C8ECBEA488FF5BF7 out of the string with</p>\n\n<pre><code>a.match(/&lt;InstanceIdentifier&gt;(\\w+)&lt;\\/InstanceIdentifier&gt;/i)\n</code></pre>\n\n<p>But this is obviously only matching the first one. I have tried a lot of things. Using Rubular, I've tried it with the '.+' operator using the 'm' option. Can anyone help me here? </p>\n\n<p><strong>Edit</strong>: Ok, so this is a XML communication, i'm sending them XML and they're apparently sending XML back. When they hit my Rails controllers, here is what params looks like. A mess.</p>\n\n<p><a href=\"https://gist.github.com/ruevaughn/090312182b96e0fb6f3422f2a6f993d9\" rel=\"nofollow noreferrer\">https://gist.github.com/ruevaughn/090312182b96e0fb6f3422f2a6f993d9</a></p>\n\n<p>So, since in the beginning I didn't need to do anything with this code, I just formatted it nicely so I could view the output, since the last few lines was all I needed to see, whether error or success.</p>\n\n<p>This code:</p>\n\n<pre><code>message = \"\"\nparams.each do |k,v|\n   message &lt;&lt; k\n   message &lt;&lt; v\nend\n\nputs message\n</code></pre>\n\n<p>Generates this 'cleaner' string.</p>\n\n<p><a href=\"https://gist.github.com/ruevaughn/a85bcf51d498c439bccebc7d8ade749b\" rel=\"nofollow noreferrer\">https://gist.github.com/ruevaughn/a85bcf51d498c439bccebc7d8ade749b</a></p>\n\n<p>Now, I have the requirements to store in the database whether or not this was an error or success, and since this was done in a background job, the only way I have to tie back to the original database item is this instance identifier. </p>\n\n<p>So I didn't want to have to parse the XML. But it looks like I might have to go that route. I have done a good amount of XML creation but I don't know how to parse the XML from those params. Any suggestions on that part?</p>\n"}, {"tags": ["ruby", "mongoid", "grape"], "comments": [{"owner": {"reputation": 472, "user_id": 6372660, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U8mLL.jpg?s=128&g=1", "display_name": "Tasawar Hussain", "link": "https://stackoverflow.com/users/6372660/tasawar-hussain"}, "edited": false, "score": 0, "creation_date": 1499847997, "post_id": 45046170, "comment_id": 77078063, "body": "why dont you just write a searlizer for this"}, {"owner": {"reputation": 880, "user_id": 5279080, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh5.googleusercontent.com/-LoDm6XYbQug/AAAAAAAAAAI/AAAAAAAAABE/t33anFH2T3I/photo.jpg?sz=128", "display_name": "alilland", "link": "https://stackoverflow.com/users/5279080/alilland"}, "reply_to_user": {"reputation": 472, "user_id": 6372660, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/U8mLL.jpg?s=128&g=1", "display_name": "Tasawar Hussain", "link": "https://stackoverflow.com/users/6372660/tasawar-hussain"}, "edited": false, "score": 0, "creation_date": 1499876618, "post_id": 45046170, "comment_id": 77099325, "body": "@TasawarHussain what is a serializer? is it a grape specific feature or ruby?"}], "owner": {"reputation": 880, "user_id": 5279080, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh5.googleusercontent.com/-LoDm6XYbQug/AAAAAAAAAAI/AAAAAAAAABE/t33anFH2T3I/photo.jpg?sz=128", "display_name": "alilland", "link": "https://stackoverflow.com/users/5279080/alilland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 271, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1499878482, "creation_date": 1499816946, "last_edit_date": 1499878482, "question_id": 45046170, "link": "https://stackoverflow.com/questions/45046170/grape-entity-how-can-i-return-the-nested-value-instead-of-the-key-value-pair", "title": "Grape Entity - how can I return the nested value instead of the key value pair?", "body": "<p>I have a POST auth endpoint that returns a token and user object data, along with some metadata.</p>\n\n<p>Im running into an issue because I am not trying to return an object from my Entity, I just want to return a value... </p>\n\n<p><strong>here is a sample JSON response from my endpoint:</strong></p>\n\n<pre><code>{\n  \"status\": \"success\",\n  \"request_time\": 0.108006,\n  \"records\": 1,\n  \"msg\": \"some msg\",\n  \"user\": {\n    \"id\": \"someidstringformongodb\",\n    \"created_at\": \"2017-07-10T17:15:15.334-07:00\",\n    \"updated_at\": \"2017-07-10T17:15:15.334-07:00\",\n    \"active\": true,\n    \"email\": \"email@test.com\",\n    \"first_name\": \"John\",\n    \"last_name\": \"Doe\",\n    \"suffix\": null,\n    \"title\": \"Cool Title\",\n    \"admin\": false,\n    \"phone\": \"777-777-7777\"\n  },\n  \"access_key\": {\n    \"token\": \"xxxsomerandomtokenxxx\"\n  }\n}\n</code></pre>\n\n<p><strong>desired JSON response</strong></p>\n\n<pre><code>{\n  // ...\n  \"user\": {\n    //...\n  },\n  \"access_key\": \"xxxsomerandomtokenxxx\"\n}\n\n// or\n\n{\n  // ...\n  \"user\": {\n    //...\n  },\n  \"token\": \"xxxsomerandomtokenxxx\"\n}\n</code></pre>\n\n<p><strong>relevant endpoint code</strong></p>\n\n<pre><code>post '/' do\n  email_pattern = /^#{ sanitize_user_input(params[:email]) }$/i\n  user = SomeModule::User.find_by(email: email_pattern)\n  error!('Invalid email/password combination') if user.nil?\n  error!('Invalid email/password combination') unless user.password == params[:password]\n  error!('This account is no longer active') unless user.active\n  access_key = SomeModule::AccessKey.new_key_for_user(user)\n  access_key.save\n  present_success user, \"some msg\"\n  present :user, user, with: SomeModule::Entities::UserBase\n\n  ## what should happen to this, in order to return only the value instead of an object?\n  present :access_key, access_key, with: SomeModule::Entities::AccessKey\nend\n</code></pre>\n\n<p><strong>relevant entity code</strong></p>\n\n<pre><code>class AccessKey &lt; Grape::Entity\n  expose :token\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 1141, "user_id": 3251463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxssB.png?s=128&g=1", "display_name": "Scott Schupbach", "link": "https://stackoverflow.com/users/3251463/scott-schupbach"}, "is_accepted": false, "score": 1, "last_activity_date": 1499816314, "creation_date": 1499816314, "answer_id": 45046088, "question_id": 45046037, "link": "https://stackoverflow.com/questions/45046037/how-to-add-a-parameter-in-strong-params/45046088#45046088", "title": "How to add a parameter in strong params?", "body": "<p>You could use <code>custom_field_params</code> as is, and in your <code>update</code> method, do something like:</p>\n\n<p><code>MyModel.update(custom_field_params.select { |k, _v| k != :type_id })</code></p>\n"}], "owner": {"reputation": 1, "user_id": 8292504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66728c0bd9a6eb55bdbca6016ef73bb5?s=128&d=identicon&r=PG&f=1", "display_name": "Artem B.", "link": "https://stackoverflow.com/users/8292504/artem-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499816314, "creation_date": 1499815862, "question_id": 45046037, "link": "https://stackoverflow.com/questions/45046037/how-to-add-a-parameter-in-strong-params", "title": "How to add a parameter in strong params?", "body": "<p>How to add a parameter in strong params?</p>\n\n<p>I can choose the \"type\" when the object is instantiated.\nBut I can't update this \"type\".</p>\n\n<p>Can I do two methods with parameters.\nfor example:</p>\n\n<pre><code>def custom_field_params\n  params.require(:custom_field).permit(:name, :required, :type_id, options_attributes: [:id, :name, :position, :_destroy])\nend\n\ndef update_custom_field_params\n  params.require(:custom_field).permit(:name, :required, options_attributes: [:id, :name, :position, :_destroy])\nend\n</code></pre>\n\n<p>Can I combine these two methods into one method?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4932805"}, "edited": false, "score": 0, "creation_date": 1499815603, "post_id": 45045898, "comment_id": 77066183, "body": "How about some reading? <a href=\"http://guides.rubyonrails.org/active_record_querying.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/active_record_querying.html</a>"}, {"owner": {"reputation": 221, "user_id": 5420504, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/174979efbe4f8e8e9f1579ac1c551f82?s=128&d=identicon&r=PG&f=1", "display_name": "kparekh01", "link": "https://stackoverflow.com/users/5420504/kparekh01"}, "edited": false, "score": 0, "creation_date": 1499817903, "post_id": 45045898, "comment_id": 77066725, "body": "What is your intended output here?  Is <code>@class_mates</code> supposed to hold all Users that belong to a specific active group that the current User also belongs to?"}, {"owner": {"reputation": 97, "user_id": 5819480, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e88894467a0235addde9a4819add176?s=128&d=identicon&r=PG&f=1", "display_name": "Rul", "link": "https://stackoverflow.com/users/5819480/rul"}, "edited": false, "score": 0, "creation_date": 1499872393, "post_id": 45045898, "comment_id": 77096439, "body": "Exact, the data that I hope are all the users that are within the same group"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 5819480, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e88894467a0235addde9a4819add176?s=128&d=identicon&r=PG&f=1", "display_name": "Rul", "link": "https://stackoverflow.com/users/5819480/rul"}, "edited": false, "score": 0, "creation_date": 1499874294, "post_id": 45046199, "comment_id": 77097838, "body": "Wow Arel is a excellent Tool, but if i want run the sql generated?, thanks for your answer"}, {"owner": {"reputation": 97, "user_id": 5819480, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e88894467a0235addde9a4819add176?s=128&d=identicon&r=PG&f=1", "display_name": "Rul", "link": "https://stackoverflow.com/users/5819480/rul"}, "edited": false, "score": 0, "creation_date": 1499875244, "post_id": 45046199, "comment_id": 77098539, "body": "Very easy with ActiveRecord::Base.connection.execute Thank you it works :D"}, {"owner": {"reputation": 4769, "user_id": 1242470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f1b4b172a8f873efe1179ca140f1eb?s=128&d=identicon&r=PG", "display_name": "Mate Solymosi", "link": "https://stackoverflow.com/users/1242470/mate-solymosi"}, "reply_to_user": {"reputation": 97, "user_id": 5819480, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e88894467a0235addde9a4819add176?s=128&d=identicon&r=PG&f=1", "display_name": "Rul", "link": "https://stackoverflow.com/users/5819480/rul"}, "edited": false, "score": 0, "creation_date": 1499880609, "post_id": 45046199, "comment_id": 77101414, "body": "Just remove the <code>to_sql</code> from the end, and you get just another ActiveRecord relation object that you can call <code>to_a</code>, <code>each</code>, etc. on."}], "tags": [], "owner": {"reputation": 4769, "user_id": 1242470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f1b4b172a8f873efe1179ca140f1eb?s=128&d=identicon&r=PG", "display_name": "Mate Solymosi", "link": "https://stackoverflow.com/users/1242470/mate-solymosi"}, "is_accepted": true, "score": 1, "last_activity_date": 1499817444, "last_edit_date": 1499817444, "creation_date": 1499817131, "answer_id": 45046199, "question_id": 45045898, "link": "https://stackoverflow.com/questions/45045898/how-can-write-two-inner-join-in-rails-5/45046199#45046199", "title": "How can write two inner join in Rails 5", "body": "<p>Try this:</p>\n\n<pre><code>inner_user = Arel::Table.new(:users, as: :i_user)\ninner_ubg = Arel::Table.new(:user_by_groups, as: :i_ubg)\n\nUser.joins(:groups).where(\n  Arel::Nodes::In.new(\n    Group.arel_table[:id],\n    inner_user.\n      project(inner_ubg[:group_id]).\n      join(inner_ubg).on(inner_user[:id].eq(inner_ubg[:user_id])).\n      where(inner_ubg[:active].eq(true)).\n      where(inner_user[:id].eq(4))\n  )\n).to_sql\n\n#=&gt; SELECT \"users\".* FROM \"users\"\n#     INNER JOIN \"user_by_groups\" ON \"user_by_groups\".\"user_id\" = \"users\".\"id\"\n#     INNER JOIN \"groups\" ON \"groups\".\"id\" = \"user_by_groups\".\"group_id\"           \n#     WHERE \"groups\".\"id\" IN ((\n#       SELECT \"i_ubg\".\"group_id\" FROM \"users\" \"i_user\"\n#       INNER JOIN \"user_by_groups\" \"i_ubg\" ON \"i_user\".\"id\" = \"i_ubg\".\"user_id\"\n#       WHERE \"i_ubg\".\"active\" = 't' AND \"i_user\".\"id\" = 4\n#     ))\n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 5819480, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e88894467a0235addde9a4819add176?s=128&d=identicon&r=PG&f=1", "display_name": "Rul", "link": "https://stackoverflow.com/users/5819480/rul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 543, "favorite_count": 0, "accepted_answer_id": 45046199, "answer_count": 1, "score": 2, "last_activity_date": 1499817444, "creation_date": 1499814884, "question_id": 45045898, "link": "https://stackoverflow.com/questions/45045898/how-can-write-two-inner-join-in-rails-5", "title": "How can write two inner join in Rails 5", "body": "<p>Hi I want traslate this sql to rails active record</p>\n\n<pre><code>select a.*\nfrom public.users a\ninner join public.user_by_groups gp2 on gp2.user_id = a.id and gp2.active = 'true'\nand gp2.group_id in \n(SELECT gp.group_id                     \n  FROM public.users u\n  inner join public.user_by_groups gp on gp.user_id = u.id and gp.active = 'true'\n  where u.id = '4')\n</code></pre>\n\n<p>My models (With Many to Many Relation)</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :user_by_groups\n  has_many :groups, through: :user_by_groups\nend\n\nclass UserByGroup &lt; ApplicationRecord\n  # Relations\n  belongs_to :user\n  belongs_to :group\nend\n\nclass Group &lt; ApplicationRecord\n  has_many :user_by_groups\n  has_many :users, through: :user_by_groups\nend\n</code></pre>\n\n<p>And single have this first query:</p>\n\n<pre><code>    @class_mates = User.joins(:user_by_groups)\n.where(user_by_groups: { user_id: 4 })\n.where(user_by_groups: { active: true })\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 2, "creation_date": 1499814886, "post_id": 45045877, "comment_id": 77066003, "body": "This: <code>&quot;123,456,789,012,345&quot;</code> is not an <code>Array</code>. It&#39;s a <code>String</code>."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 8255597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f00079fc1de2083ee50f75cd2ae6ea1d?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/8255597/boris"}, "edited": false, "score": 0, "creation_date": 1499823751, "post_id": 45045911, "comment_id": 77068055, "body": "That is, I can add a variable to a string only if I convert a string into an array? Is this the easiest way?"}], "tags": [], "owner": {"reputation": 1141, "user_id": 3251463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxssB.png?s=128&g=1", "display_name": "Scott Schupbach", "link": "https://stackoverflow.com/users/3251463/scott-schupbach"}, "is_accepted": true, "score": 1, "last_activity_date": 1499888171, "last_edit_date": 1499888171, "creation_date": 1499814973, "answer_id": 45045911, "question_id": 45045877, "link": "https://stackoverflow.com/questions/45045877/how-do-i-add-element-to-a-comma-delimited-string/45045911#45045911", "title": "How do I add element to a comma-delimited string?", "body": "<p>In your code block above, <code>@array</code> is not an array, it's a string. </p>\n\n<h3>Change the way you set the value of <code>@array</code></h3>\n\n<p>If you're setting the value of <code>@array</code> somewhere else, to make it an array of integers, replace the double quotes with square brackets:</p>\n\n<p><code>@array = [123, 456, 789, 012, 345]</code></p>\n\n<p>Then you can push or shovel the new value in:</p>\n\n<p><code>@array &lt;&lt; params[:q]</code><br>\nor<br>\n<code>@array.push(params[:q])</code></p>\n\n<h3>Convert <code>String</code> to <code>Array</code></h3>\n\n<p>Alternately if you want the numbers to remain strings for some reason, just convert the string into an array using the <code>String#split</code> method:</p>\n\n<p><code>@array = \"123,456,789,012,345\".split(',') #=&gt; ['123', '456', '789', '012', '345']</code></p>\n\n<h3>Just append to <code>String</code></h3>\n\n<p>You could also just add the new value (as a string) to the existing string:</p>\n\n<pre><code>@array += \",#{params[:q]}\"\n</code></pre>\n\n<p>So if <code>params[:q]</code> were set to <code>678</code>, this would turn the integer into a string and add it to the existing string with a leading-comma.</p>\n\n<p>But then you should probably rename <code>@array</code> to <code>@string</code> to be more precise.</p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 7340302, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-u4529rh22qs/AAAAAAAAAAI/AAAAAAAAAAs/w8Q__aj_iMs/photo.jpg?sz=128", "display_name": "Sam", "link": "https://stackoverflow.com/users/7340302/sam"}, "is_accepted": false, "score": 0, "last_activity_date": 1499828451, "last_edit_date": 1499828451, "creation_date": 1499828029, "answer_id": 45047561, "question_id": 45045877, "link": "https://stackoverflow.com/questions/45045877/how-do-i-add-element-to-a-comma-delimited-string/45047561#45047561", "title": "How do I add element to a comma-delimited string?", "body": "<p>Your array will have to be in brackets. Right now your instance variable of array (@array) is actually a String. You'll want to put your string into an array like so:</p>\n\n<pre><code>array = [123,456,789,012,345]\n</code></pre>\n\n<p>There are different ways to put your variable into your array. You can certainly shovel it in:</p>\n\n<pre><code> array &lt;&lt; params[:q]\n</code></pre>\n\n<p>If you want the values in your array to remain in a string, you can use the split method:</p>\n\n<pre><code>@array.split or @array.split(',')\n</code></pre>\n\n<p>Pull up IRB and plug those in and see if that is what you're looking for. You can also prepend (add to the front) or append (add the end) of your string. </p>\n\n<p>This ruby doc will serve you well: <a href=\"https://ruby-doc.org/core-2.4.1/Array.htmlhttp://\" rel=\"nofollow noreferrer\">Ruby Doc-Arrays</a></p>\n\n<p>Good luck!</p>\n"}, {"comments": [{"owner": {"reputation": 883, "user_id": 765255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YSOA0.jpg?s=128&g=1", "display_name": "iNulty", "link": "https://stackoverflow.com/users/765255/inulty"}, "edited": false, "score": 0, "creation_date": 1499851001, "post_id": 45053072, "comment_id": 77080201, "body": "Never noticed the <code>Array#insert</code> method, nice"}], "tags": [], "owner": {"reputation": 156, "user_id": 3869972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUauD.jpg?s=128&g=1", "display_name": "Aravind.S", "link": "https://stackoverflow.com/users/3869972/aravind-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1499850008, "creation_date": 1499850008, "answer_id": 45053072, "question_id": 45045877, "link": "https://stackoverflow.com/questions/45045877/how-do-i-add-element-to-a-comma-delimited-string/45053072#45053072", "title": "How do I add element to a comma-delimited string?", "body": "<pre><code> # The following lines add the element as the last element in the array\narray[array.length] = element\narray += [element]\narray &lt;&lt; element\narray.push(element)\narray.append(element)\n\n# To add it at a specific position, use insert \narray.insert(position, element)\n</code></pre>\n\n<p>As people have already mentioned, <strong>@array</strong> in your case is a String and not an Array.</p>\n"}], "owner": {"reputation": 65, "user_id": 8255597, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/f00079fc1de2083ee50f75cd2ae6ea1d?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/8255597/boris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1184, "favorite_count": 0, "accepted_answer_id": 45045911, "answer_count": 3, "score": 2, "last_activity_date": 1509070996, "creation_date": 1499814739, "last_edit_date": 1509070996, "question_id": 45045877, "link": "https://stackoverflow.com/questions/45045877/how-do-i-add-element-to-a-comma-delimited-string", "title": "How do I add element to a comma-delimited string?", "body": "<p>I have an array (in test_controller.rb): </p>\n\n<pre><code>@array = \"123,456,789,012,345\"\n</code></pre>\n\n<p>Also, I have a variable:  </p>\n\n<pre><code>@var = params[:q] #I get it from the web form.\n</code></pre>\n\n<p>Tell me please, how can I add this variable to an array?</p>\n"}, {"tags": ["ruby", "variables", "block"], "comments": [{"owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "edited": false, "score": 0, "creation_date": 1499814087, "post_id": 45045577, "comment_id": 77065763, "body": "Are you trying to find a single duplicate or the last duplicate or an array of duplicates? Also, your current code is iterating through all elements in the array twice in a nested fashion and re-setting duplicate to the last duplicate found."}], "answers": [{"comments": [{"owner": {"reputation": 508, "user_id": 2476604, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/HZVR2.png?s=128&g=1", "display_name": "clockworkpc", "link": "https://stackoverflow.com/users/2476604/clockworkpc"}, "edited": false, "score": 0, "creation_date": 1499814981, "post_id": 45045850, "comment_id": 77066033, "body": "Thanks, this is a better solution.  The one-liner still eludes me, but, hey, it was worth a shot!"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 1, "last_activity_date": 1499814535, "creation_date": 1499814535, "answer_id": 45045850, "question_id": 45045577, "link": "https://stackoverflow.com/questions/45045577/how-to-convert-a-three-line-ruby-method-into-one/45045850#45045850", "title": "How to convert a three-line Ruby method into one", "body": "<p>It's a little too much to do cleanly in a one-liner, but this is a more\nefficient solution.</p>\n\n<pre><code>def find_dups(arr)\n  counts = Hash.new { |hash,key| hash[key] = 0 }\n  arr.each_with_object(counts) do |x, memo|\n    memo[x] += 1\n  end.select { |key,val| val &gt; 1 }.keys\nend\n</code></pre>\n\n<p>The <code>Hash.new</code> call instantiates a hash where the default value is 0.</p>\n\n<p><code>each_with_object</code> modifies this hash to track the count of each element in <code>arr</code>, then at the\nend the <code>filter</code> is used to select only those having a count greater than one.</p>\n\n<p>The benefit of this approach over a solution using <code>Array#includes?</code> or <code>Array#count</code> is that it only scans the array a single time. Thus it is a O(N) time instead of O(N^2).</p>\n"}, {"comments": [{"owner": {"reputation": 508, "user_id": 2476604, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/HZVR2.png?s=128&g=1", "display_name": "clockworkpc", "link": "https://stackoverflow.com/users/2476604/clockworkpc"}, "edited": false, "score": 0, "creation_date": 1499814949, "post_id": 45045862, "comment_id": 77066019, "body": "Thanks for pointing that out.  It doesn&#39;t exactly answer my question, bit it&#39;s good to know about the code."}, {"owner": {"reputation": 1141, "user_id": 3251463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxssB.png?s=128&g=1", "display_name": "Scott Schupbach", "link": "https://stackoverflow.com/users/3251463/scott-schupbach"}, "reply_to_user": {"reputation": 508, "user_id": 2476604, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/HZVR2.png?s=128&g=1", "display_name": "clockworkpc", "link": "https://stackoverflow.com/users/2476604/clockworkpc"}, "edited": false, "score": 0, "creation_date": 1499815207, "post_id": 45045862, "comment_id": 77066094, "body": "So is the issue that you want the block to be a closure so that <code>duplicate</code> is still available after the block runs? Because if so, I think the way you have it is the way to do it."}], "tags": [], "owner": {"reputation": 1141, "user_id": 3251463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxssB.png?s=128&g=1", "display_name": "Scott Schupbach", "link": "https://stackoverflow.com/users/3251463/scott-schupbach"}, "is_accepted": false, "score": 1, "last_activity_date": 1499814631, "creation_date": 1499814631, "answer_id": 45045862, "question_id": 45045577, "link": "https://stackoverflow.com/questions/45045577/how-to-convert-a-three-line-ruby-method-into-one/45045862#45045862", "title": "How to convert a three-line Ruby method into one", "body": "<p>Your method is only finding the last duplicate in the array. If you want all the duplicates, I would do something like this:</p>\n\n<pre><code>def find_dups(arr)\n  dups = Hash.new { |h, k| h[k] = 0 }\n  arr.each { |el| dups[el] += 1 }\n  dups.select { |k, v| v &gt; 1 }.keys\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "is_accepted": false, "score": 0, "last_activity_date": 1499815312, "creation_date": 1499815312, "answer_id": 45045950, "question_id": 45045577, "link": "https://stackoverflow.com/questions/45045577/how-to-convert-a-three-line-ruby-method-into-one/45045950#45045950", "title": "How to convert a three-line Ruby method into one", "body": "<p>You can do this as one line and it flows a bit nicer. Though this would find the first instance of a duplicate whereas your code is returning the last instance of a duplicate, not sure if that's part of your requirement.</p>\n\n<pre><code>def find_dup(array)\n  array.group_by { |value| value }.find { |_, groups| groups.count &gt; 1 }.first\nend\n</code></pre>\n\n<p>Also, note that making things one line doesn't strictly mean is better. I'd find the code more readable split over more lines, but that's just my opinion.</p>\n\n<pre><code>def find_dup(array)\n  array.group_by { |value| \n    value \n  }.find { |_, groups| \n    groups.count &gt; 1 \n  }.first\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "edited": false, "score": 0, "creation_date": 1499815549, "post_id": 45045976, "comment_id": 77066173, "body": "use <code>reverse_each</code> when chaining <code>reverse</code> and <code>each</code>. Other than that, nice solution as well."}], "tags": [], "owner": {"reputation": 1141, "user_id": 3251463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxssB.png?s=128&g=1", "display_name": "Scott Schupbach", "link": "https://stackoverflow.com/users/3251463/scott-schupbach"}, "is_accepted": false, "score": 1, "last_activity_date": 1499815798, "last_edit_date": 1499815798, "creation_date": 1499815502, "answer_id": 45045976, "question_id": 45045577, "link": "https://stackoverflow.com/questions/45045577/how-to-convert-a-three-line-ruby-method-into-one/45045976#45045976", "title": "How to convert a three-line Ruby method into one", "body": "<p>If what you really want is a one-liner that isn't concerned with big-O complexity and only returns the last duplicate in the array, I would do this:</p>\n\n<pre><code>def find_last_dup(arr)\n  arr.reverse_each { |el| return el if arr.count(el) &gt; 1 }\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "is_accepted": false, "score": 0, "last_activity_date": 1499821866, "last_edit_date": 1499821866, "creation_date": 1499817085, "answer_id": 45046188, "question_id": 45045577, "link": "https://stackoverflow.com/questions/45045577/how-to-convert-a-three-line-ruby-method-into-one/45046188#45046188", "title": "How to convert a three-line Ruby method into one", "body": "<p>Given:</p>\n\n<pre><code>&gt; a\n=&gt; [8, 5, 6, 6, 5, 8, 6, 1, 9, 7, 2, 10, 7, 7, 3, 4]\n</code></pre>\n\n<p>You can group the dups together:</p>\n\n<pre><code>&gt; a.uniq.each_with_object(Hash.new(0)) {|e, h| c=a.count(e); h[e]=c if c&gt;1}\n=&gt; {8=&gt;2, 5=&gt;2, 6=&gt;3, 7=&gt;3}\n</code></pre>\n\n<p>Or,</p>\n\n<pre><code>&gt; a.group_by{ |e| e}.select{|k,v| v if v.length&gt;1}\n=&gt; {8=&gt;[8, 8], 5=&gt;[5, 5], 6=&gt;[6, 6, 6], 7=&gt;[7, 7, 7]}\n</code></pre>\n\n<p>In each case, the order of the result is based on the order of the elements in <code>a</code> that have dups. If you just want the first:</p>\n\n<pre><code>&gt; a.group_by{ |e| e}.select{|k,v| v if v.length&gt;1}.first\n=&gt; [8, [8, 8]]\n</code></pre>\n\n<p>Or last:</p>\n\n<pre><code>&gt; a.group_by{ |e| e}.select{|k,v| v if v.length&gt;1}.to_a.last\n=&gt; [7, [7, 7, 7]]\n</code></pre>\n\n<p>If you want to 'fast forward' to the first value that has a dup, you can use drop_while:</p>\n\n<pre><code>&gt; b=[1,2,3,4,5,4,5,6]\n&gt; b.drop_while {|e| b.count(e)==1 }[0]\n=&gt; 4\n</code></pre>\n\n<p>Or the last:</p>\n\n<pre><code>&gt; b.reverse.drop_while {|e| b.count(e)==1 }[0]\n=&gt; 5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22377, "user_id": 2288659, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/bBg8v.png?s=128&g=1", "display_name": "Silvio Mayolo", "link": "https://stackoverflow.com/users/2288659/silvio-mayolo"}, "is_accepted": false, "score": 0, "last_activity_date": 1499819355, "last_edit_date": 1499819355, "creation_date": 1499819003, "answer_id": 45046405, "question_id": 45045577, "link": "https://stackoverflow.com/questions/45045577/how-to-convert-a-three-line-ruby-method-into-one/45046405#45046405", "title": "How to convert a three-line Ruby method into one", "body": "<p>Just want to add one more approach to the mix.</p>\n\n<pre><code>def find_last_dup(arr)\n  arr.reverse_each.detect { |x| arr.count(x) &gt; 1 }\nend\n</code></pre>\n\n<p>Alternatively, you can get linear time complexity in two lines.</p>\n\n<pre><code>def find_last_dup(arr)\n  freq = arr.each_with_object(Hash.new(0)) { |x, obj| obj[x] += 1 }\n  arr.reverse_each.detect { |x| freq[x] &gt; 1 }\nend\n</code></pre>\n\n<p>For the sake of argument, the latter approach can be reduced to one line as well, but this would be unidiomatic and confusing.</p>\n\n<pre><code>def find_last_dup(arr)\n  arr.each_with_object(Hash.new(0)) { |x, obj| obj[x] += 1 }\n    .tap do |freq| return arr.reverse_each.detect { |x| freq[x] &gt; 1 } end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 156, "user_id": 3869972, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CUauD.jpg?s=128&g=1", "display_name": "Aravind.S", "link": "https://stackoverflow.com/users/3869972/aravind-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1499882260, "last_edit_date": 1499882260, "creation_date": 1499848922, "answer_id": 45052642, "question_id": 45045577, "link": "https://stackoverflow.com/questions/45045577/how-to-convert-a-three-line-ruby-method-into-one/45052642#45052642", "title": "How to convert a three-line Ruby method into one", "body": "<pre><code>def find_duplicates(array)\n  array.dup.uniq.each { |element| array.delete_at(array.index(element)) }.uniq\nend\n</code></pre>\n\n<p>The above method <strong>find_duplicates</strong> duplicated the input array and deletes the first occurrence of all the elements, leaving the array with only remaining occurrences of the duplicate elements.</p>\n\n<p>Example:</p>\n\n<pre><code>array = [1, 2, 3, 4, 3, 4, 3]\n=&gt; [1, 2, 3, 4, 3, 4, 3] \nfind_duplicates(array)\n=&gt; [3, 4] \n</code></pre>\n"}], "owner": {"reputation": 508, "user_id": 2476604, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/HZVR2.png?s=128&g=1", "display_name": "clockworkpc", "link": "https://stackoverflow.com/users/2476604/clockworkpc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 7, "score": 0, "last_activity_date": 1499882260, "creation_date": 1499812859, "question_id": 45045577, "link": "https://stackoverflow.com/questions/45045577/how-to-convert-a-three-line-ruby-method-into-one", "title": "How to convert a three-line Ruby method into one", "body": "<p>I have a simple method that iterates through an array and returns a duplicate. (Or duplicates)</p>\n\n<pre><code>def find_dup(array)\n  duplicate = 0\n  array.each { |element| duplicate = element if array.count(element) &gt; 1}\n  duplicate\nend\n</code></pre>\n\n<p>It works, but I'd like to express this more elegantly.</p>\n\n<p>The reason it is three lines is that the variable \"duplicate\", which the method must return, is not visible to the method if I introduce it inside the block, i.e,</p>\n\n<pre><code>def find_dup(array)\n  array.each { |element| duplicate = element if array.count(element) &gt; 1}\n  duplicate\nend\n</code></pre>\n\n<p>I've tried a few ways to define \"duplicate\" as the result of a block, but to no avail.</p>\n\n<p>Any thoughts?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": false, "score": 0, "last_activity_date": 1499810643, "last_edit_date": 1499810643, "creation_date": 1499810298, "answer_id": 45045127, "question_id": 45044981, "link": "https://stackoverflow.com/questions/45044981/can-i-sort-by-a-property-in-rails-after-doing-an-includes-on-the-model/45045127#45045127", "title": "Can I sort by a property in Rails after doing an :includes on the model?", "body": "<p>You want to sort the associated records. Try this:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :books, -&gt; { order(slot_number: :asc) }\nend\n</code></pre>\n\n<p>Or when this is not the default sorting that you want to have applied all the time:</p>\n\n<pre><code>user = User.includes(:cars, :books).find_by_id(params[:user_id])\nuser.books.order(slot_number: :asc)\n</code></pre>\n\n<p>But: since you are selecting the <code>User</code> by id:</p>\n\n<p>Notes:\n* If the User must exist: just use <code>find</code> instead of <code>find_by_id</code>\n* Why do you have the <code>includes</code> in the first place? This will most like not help as you are selecting a single <code>User</code> I don't see why this would get you any benefit.</p>\n"}, {"tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": true, "score": 3, "last_activity_date": 1499877938, "last_edit_date": 1499877938, "creation_date": 1499810936, "answer_id": 45045260, "question_id": 45044981, "link": "https://stackoverflow.com/questions/45044981/can-i-sort-by-a-property-in-rails-after-doing-an-includes-on-the-model/45045260#45045260", "title": "Can I sort by a property in Rails after doing an :includes on the model?", "body": "<p>A few notes:</p>\n\n<ol>\n<li>There's no benefit to eager loading (<code>includes</code>) here since you're loading a single record. Eager loading is useful when you're loading a collection and referencing associations for each of the loaded instances, like <code>cars = Car.includes(:manufacturer).where(year: 1990..2001)</code>.</li>\n<li><p>Sorting an eager-loaded collection only makes sense in the context of the parent object, or otherwise loading the collection outside of the context of the parent collection (i.e., not eager). For example, you could do this:</p>\n\n<pre><code>readers = Reader.includes(:books).order('books.title').where(state: 'TX')\nreaders.each do |reader|\n  puts reader.name + \" likes \" + books.collect(&amp;:title).to_sentence\nend\n</code></pre>\n\n<p>But this requires that the collection is sorted for each <code>Reader</code>. The appropriate place for this declaration is on the association:</p>\n\n<pre><code>class Reader &lt; ApplicationRecord\n  has_many :books, -&gt; { order(:title) }\nend\n</code></pre>\n\n<p>Otherwise  you really just want to load a separate collection:</p>\n\n<pre><code>cars = Car.where(year: 1990..2001)\nmanufacturers = Manufacturer.where(cars: cars).order(:name)\n</code></pre></li>\n<li><p>If you <em>are</em> only loading associations for a single record, you should be applying the scope to the relationship and <em>not</em> eager loading it:</p>\n\n<pre><code>@user = User.find(1)\n@books = @user.books.order(:slot_number)\n@cars = @user.cars.order(:year)\n</code></pre></li>\n</ol>\n"}], "owner": {"reputation": 5115, "user_id": 602210, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/637a0e1f50816d88828e0db32918a9fb?s=128&d=identicon&r=PG", "display_name": "Zack Shapiro", "link": "https://stackoverflow.com/users/602210/zack-shapiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 45045260, "answer_count": 2, "score": 0, "last_activity_date": 1499877938, "creation_date": 1499809510, "question_id": 45044981, "link": "https://stackoverflow.com/questions/45044981/can-i-sort-by-a-property-in-rails-after-doing-an-includes-on-the-model", "title": "Can I sort by a property in Rails after doing an :includes on the model?", "body": "<p>I have a snippet of code: <code>User.includes(:cars, :books).find_by_id(params[:user_id])</code></p>\n\n<p><code>Book</code> has an attribute <code>slot_number</code> that returns values 0-4. For some reason, I can get an array that isn't arranged 0-4, in that order.</p>\n\n<p>Is there a way to ensure those <code>books</code> are sorted by <code>slot_number</code>? </p>\n"}, {"tags": ["ruby", "terminology"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1499812943, "post_id": 45044789, "comment_id": 77065483, "body": "I have never heard of <a href=\"http://ruby-doc.org/core-2.0.0/Module.html#method-i-attr_accessor\" rel=\"nofollow noreferrer\">Module#attr_accessor</a>, <a href=\"https://ruby-doc.org/core-2.4.0/Module.html#method-i-define_method\" rel=\"nofollow noreferrer\">Module#define_method</a> and other Ruby methods that generate methods referred to as anything other than just <code>methods</code>. Moreover, I don&#39;t see that advantage of having such a term, especially because I don&#39;t see how it could be defined in an  unambiguous way."}], "answers": [{"comments": [{"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1499811161, "post_id": 45045274, "comment_id": 77064952, "body": "Yep, I&#39;ve always called these \u201cclass macros\u201d specifically."}], "tags": [], "owner": {"reputation": 161, "user_id": 4799185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2573ddee29779e76b7da7d3c2c9ff18d?s=128&d=identicon&r=PG", "display_name": "cainlevy", "link": "https://stackoverflow.com/users/4799185/cainlevy"}, "is_accepted": true, "score": 4, "last_activity_date": 1499811579, "last_edit_date": 1499811579, "creation_date": 1499811039, "answer_id": 45045274, "question_id": 45044789, "link": "https://stackoverflow.com/questions/45044789/in-ruby-what-is-the-vocab-word-for-attr-accessor/45045274#45045274", "title": "In ruby, what is the vocab word for `attr_accessor`?", "body": "<p>When code generates or expands into other code, it can be called a macro.</p>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Macro_(computer_science)\" rel=\"nofollow noreferrer\">https://en.wikipedia.org/wiki/Macro_(computer_science)</a></p>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 0, "last_activity_date": 1499814955, "creation_date": 1499814955, "answer_id": 45045909, "question_id": 45044789, "link": "https://stackoverflow.com/questions/45044789/in-ruby-what-is-the-vocab-word-for-attr-accessor/45045909#45045909", "title": "In ruby, what is the vocab word for `attr_accessor`?", "body": "<p>The book \"The Ruby Programming Language\" (Flanagan, <a href=\"https://en.wikipedia.org/wiki/Yukihiro_Matsumoto\" rel=\"nofollow noreferrer\">Matsumoto</a>) refers to it as metaprogramming (pg. 219)</p>\n"}], "owner": {"reputation": 2092, "user_id": 1513338, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/83ae0274fbc360c0bb80750fc7b5aa0e?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/1513338/dan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 45045274, "answer_count": 2, "score": 0, "last_activity_date": 1500581209, "creation_date": 1499808628, "last_edit_date": 1500581209, "question_id": 45044789, "link": "https://stackoverflow.com/questions/45044789/in-ruby-what-is-the-vocab-word-for-attr-accessor", "title": "In ruby, what is the vocab word for `attr_accessor`?", "body": "<p>In Ruby, you can add <code>attr_reader</code>, <code>attr_writer</code> or <code>attr_accessor</code> to a class to generate accessors and mutators for an instance variable. In Rails, model validations and controller filters are added using a similar syntax.</p>\n\n<p>I know that under the hood this is a method that runs when the class is defined, which generates some code and attaches it to the class.</p>\n\n<p>What I'm looking for is a <strong>vocab word</strong> to describe this pattern. My searching has come up with \"[code ]generator\" and \"helper\", and I think I like \"generator\" the best, but I wonder if there is an official word for it.</p>\n\n<p>Sources:</p>\n\n<ul>\n<li><a href=\"https://mikeyhogarth.wordpress.com/2011/12/01/creating-your-own-attr_accessor-in-ruby/\" rel=\"nofollow noreferrer\">https://mikeyhogarth.wordpress.com/2011/12/01/creating-your-own-attr_accessor-in-ruby/</a></li>\n<li><a href=\"http://codeatmorning.com/ruby-attr_accessor-what-is-that/\" rel=\"nofollow noreferrer\">http://codeatmorning.com/ruby-attr_accessor-what-is-that/</a></li>\n</ul>\n"}, {"tags": ["ruby", "inheritance"], "answers": [{"comments": [{"owner": {"reputation": 388, "user_id": 6490100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1f96fcbc830e132e4f884c861a2f5a1?s=128&d=identicon&r=PG", "display_name": "Asad Moosvi", "link": "https://stackoverflow.com/users/6490100/asad-moosvi"}, "edited": false, "score": 0, "creation_date": 1499814644, "post_id": 45045348, "comment_id": 77065923, "body": "Yes, but the method appears to be in <code>SuperClass.singleton_class</code> and in <code>SubClass.singleton_class</code>. Why? Is it actually in both of these classes&#39; methods table? Or is it only in <code>SuperClass.singleton_class</code> with a pointer from <code>SubClass.singleton_class</code>&#39;s methods table to <code>SuperClass.singleton_class</code>&#39;s methods table?"}, {"owner": {"reputation": 161, "user_id": 4799185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2573ddee29779e76b7da7d3c2c9ff18d?s=128&d=identicon&r=PG", "display_name": "cainlevy", "link": "https://stackoverflow.com/users/4799185/cainlevy"}, "reply_to_user": {"reputation": 388, "user_id": 6490100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1f96fcbc830e132e4f884c861a2f5a1?s=128&d=identicon&r=PG", "display_name": "Asad Moosvi", "link": "https://stackoverflow.com/users/6490100/asad-moosvi"}, "edited": false, "score": 0, "creation_date": 1499957293, "post_id": 45045348, "comment_id": 77140656, "body": "@AsadMoosvi updated the answer to include more information on <code>instance_methods</code>. Is that more helpful?"}], "tags": [], "owner": {"reputation": 161, "user_id": 4799185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2573ddee29779e76b7da7d3c2c9ff18d?s=128&d=identicon&r=PG", "display_name": "cainlevy", "link": "https://stackoverflow.com/users/4799185/cainlevy"}, "is_accepted": true, "score": 1, "last_activity_date": 1499957255, "last_edit_date": 1499957255, "creation_date": 1499811505, "answer_id": 45045348, "question_id": 45044690, "link": "https://stackoverflow.com/questions/45044690/how-does-inheritance-work-when-it-comes-to-class-methods-in-ruby/45045348#45045348", "title": "How does inheritance work when it comes to class methods in Ruby?", "body": "<p>There is only one copy of the method.</p>\n\n<h2>Explanation:</h2>\n\n<h3>1. Singleton classes are instances</h3>\n\n<p><code>SubClass</code> and <code>SuperClass</code> are both instances of <code>Class</code>. If you inspect the singleton class in IRB, you'll see something like:</p>\n\n<pre><code>&gt; SuperClass.singleton_class\n=&gt; #&lt;Class:SuperClass&gt;\n&gt; SubClass.singleton_class\n=&gt; #&lt;Class:SubClass&gt;\n</code></pre>\n\n<p>The <code>SuperClass.singleton_class</code> is an ancestor of <code>SubClass.singleton_class</code> just the same way that <code>SuperClass</code> is an ancestor of <code>SubClass</code>. Said another way: classes are also instances (of Class), and work by the same rules.</p>\n\n<h3>2. <code>instance_methods</code> takes an optional argument</h3>\n\n<p>These rules say that <code>SubClass.singleton_class.instance_methods</code> will return every instance method available, no matter which ancestor defines it. If you would like to only see instance methods defined on <code>SubClass.singleton_class</code>, you need to invoke <code>SubClass.singleton_class.instance_methods(false)</code>.</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.4.1/Module.html#method-i-instance_methods\" rel=\"nofollow noreferrer\">http://ruby-doc.org/core-2.4.1/Module.html#method-i-instance_methods</a></p>\n"}, {"tags": [], "owner": {"reputation": 388, "user_id": 6490100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1f96fcbc830e132e4f884c861a2f5a1?s=128&d=identicon&r=PG", "display_name": "Asad Moosvi", "link": "https://stackoverflow.com/users/6490100/asad-moosvi"}, "is_accepted": false, "score": 0, "last_activity_date": 1499855005, "creation_date": 1499855005, "answer_id": 45055015, "question_id": 45044690, "link": "https://stackoverflow.com/questions/45044690/how-does-inheritance-work-when-it-comes-to-class-methods-in-ruby/45055015#45055015", "title": "How does inheritance work when it comes to class methods in Ruby?", "body": "<pre><code>class SuperClass\n  def self.superclass_method\n    puts \"I am the superclass method.\"\n    puts \"self = #{self}\"\n  end\nend\n\nclass SubClass &lt; SuperClass\nend\n\np SuperClass.singleton_class.instance_methods(false) # =&gt; [:superclass_method]\np SubClass.singleton_class.instance_methods(false) # =&gt; []\n</code></pre>\n\n<p><code>superclass_method</code> is actually only defined in <code>SuperClass.singleton_class</code>. By default the argument to <code>instance_methods</code> is true and it shows methods defined in superclasses as well as methods defined in the class it's called on. By passing it the argument of <code>false</code> only shows the methods defined in that class. </p>\n"}], "owner": {"reputation": 388, "user_id": 6490100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d1f96fcbc830e132e4f884c861a2f5a1?s=128&d=identicon&r=PG", "display_name": "Asad Moosvi", "link": "https://stackoverflow.com/users/6490100/asad-moosvi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1327, "favorite_count": 0, "accepted_answer_id": 45045348, "answer_count": 2, "score": 2, "last_activity_date": 1499957255, "creation_date": 1499808164, "question_id": 45044690, "link": "https://stackoverflow.com/questions/45044690/how-does-inheritance-work-when-it-comes-to-class-methods-in-ruby", "title": "How does inheritance work when it comes to class methods in Ruby?", "body": "<pre><code>class SuperClass\n  def self.superclass_method\n    puts \"I am the superclass method.\"\n    puts \"self = #{self}\"\n  end\nend\n\nclass SubClass &lt; SuperClass\nend\n\nputs SubClass.singleton_class.instance_methods.include? :superclass_method # true\nputs SuperClass.singleton_class.instance_methods.include? :superclass_method # true\n</code></pre>\n\n<p>Both of these statements return true. Are there two copies of the same method?  One in SubClass' singleton class and the other in SuperClass' singleton class?</p>\n\n<p>When running this code, I was expecting the second statement to return false because I thought ruby would be using the method that was defined in the SuperClass' singleton class. </p>\n\n<p>How does this actually work?</p>\n"}, {"tags": ["json", "ruby", "amazon-web-services"], "comments": [{"owner": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 1, "creation_date": 1499810177, "post_id": 45044639, "comment_id": 77064611, "body": "Try file:///Users/kougav01/Desktop/GitCH/v2.json."}, {"owner": {"reputation": 25, "user_id": 8196724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/307f53fe026f6d37acc49573df5b4b0b?s=128&d=identicon&r=PG&f=1", "display_name": "koushiskool", "link": "https://stackoverflow.com/users/8196724/koushiskool"}, "reply_to_user": {"reputation": 45894, "user_id": 271415, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/8648256cc53b261c5e1d266380a256fc?s=128&d=identicon&r=PG", "display_name": "jarmod", "link": "https://stackoverflow.com/users/271415/jarmod"}, "edited": false, "score": 0, "creation_date": 1499814356, "post_id": 45044639, "comment_id": 77065851, "body": "thanks that seemed to work."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 8196724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/307f53fe026f6d37acc49573df5b4b0b?s=128&d=identicon&r=PG&f=1", "display_name": "koushiskool", "link": "https://stackoverflow.com/users/8196724/koushiskool"}, "edited": false, "score": 0, "creation_date": 1499813827, "post_id": 45045269, "comment_id": 77065706, "body": "why does it work if I run it on the command prompt and not in the ruby script. ??"}, {"owner": {"reputation": 524, "user_id": 1227293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4f80e42794094c98a40bfebef4ec292?s=128&d=identicon&r=PG", "display_name": "Alex Sharp", "link": "https://stackoverflow.com/users/1227293/alex-sharp"}, "reply_to_user": {"reputation": 25, "user_id": 8196724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/307f53fe026f6d37acc49573df5b4b0b?s=128&d=identicon&r=PG&f=1", "display_name": "koushiskool", "link": "https://stackoverflow.com/users/8196724/koushiskool"}, "edited": false, "score": 0, "creation_date": 1499814157, "post_id": 45045269, "comment_id": 77065792, "body": "Ah, you need to escape the backslashes. Just use ruby&#39;s <code>File.join()</code> to join the different parts of your path. So for the relevant part of that line: <code>--policy-document file:&#47;&#47;#{File.join(&#39;&#47;Users&#39;, &#39;kougav1&#39;, &#39;Desktop&#39;, &#39;GitCH&#39;, &#39;v2.json&#39;)}</code>"}], "tags": [], "owner": {"reputation": 524, "user_id": 1227293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4f80e42794094c98a40bfebef4ec292?s=128&d=identicon&r=PG", "display_name": "Alex Sharp", "link": "https://stackoverflow.com/users/1227293/alex-sharp"}, "is_accepted": false, "score": 0, "last_activity_date": 1499811004, "creation_date": 1499811004, "answer_id": 45045269, "question_id": 45044639, "link": "https://stackoverflow.com/questions/45044639/unable-to-execute-an-amazon-cli-command-in-ruby-script/45045269#45045269", "title": "Unable to execute an Amazon CLI command in ruby script", "body": "<p>Your path to the file <code>file://Userskougav01DesktopGitCH\u26422.json</code> is invalid -- it's missing the directory slashes <code>/</code>.</p>\n"}], "owner": {"reputation": 25, "user_id": 8196724, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/307f53fe026f6d37acc49573df5b4b0b?s=128&d=identicon&r=PG&f=1", "display_name": "koushiskool", "link": "https://stackoverflow.com/users/8196724/koushiskool"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 434, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499811004, "creation_date": 1499807949, "question_id": 45044639, "link": "https://stackoverflow.com/questions/45044639/unable-to-execute-an-amazon-cli-command-in-ruby-script", "title": "Unable to execute an Amazon CLI command in ruby script", "body": "<p>I am able to run certain CLI commands but however, I getting an error when the CLI command <code>aws iam create-policy-version --policy-arn arn:aws:iam::899163431116:policy/cloudhealth-access-policy --policy-document file://\\Users\\kougav01\\Desktop\\GitCH\\v2.json --set-as-default --profile jo</code></p>\n\n<p>executes in my script,however, it executes perfectly on command prompt. </p>\n\n<p>THE ERROR MESSAGE: <code>Error parsing parameter '--policy-document': Unable to load paramfile file://Userskougav01DesktopGitCH\u26422.json: [Errno 22] Invalid argument: u'Userskougav01DesktopGitCH\\x0b2.json'</code></p>\n\n<p>MY CODE LOOKS LIKE: </p>\n\n<pre><code>require 'aws-sdk'\nrequire 'json'\nrequire 'rest-client'\n\n#current CloudHealth API restricts\n j = RestClient.get 'https://chapi.cloudhealthtech.com/v1/aws_accounts?api_key=#####&amp;page=1&amp;per_page=100'\n j2 = RestClient.get 'https://chapi.cloudhealthtech.com/v1/aws_accounts?api_key=######&amp;page=2&amp;per_page=100'\n my_hash = JSON.parse(j)\n my_hash2 = JSON.parse(j2)\n accnt_size = my_hash[\"aws_accounts\"].size\n intaccntsize = accnt_size.to_i\n account_number_array = Array.new\n my_hash[\"aws_accounts\"].each do |account|\n  if account[\"status\"][\"level\"] == \"yellow\"\n    account_number_array &lt;&lt; account[\"owner_id\"]\n  end\nend\nmy_hash2[\"aws_accounts\"].each do |account|\n  if account[\"status\"][\"level\"] == \"yellow\"\n    account_number_array &lt;&lt; account[\"owner_id\"]\n  end\nend\nputs \"Here are the accounts that have an warning(status = yellow)\"\nputs\nputs account_number_array.inspect\nputs \"1.) Making the changes so the policy will have the addittion of elasticfilesystem:Describe*, es:Describe* and es:ListTags\"\n\n\naccnt = [899163431116, 2382308203823, 8989089089080]\n\n`aws iam get-policy-version --policy-arn arn:aws:iam::#{accnt[0]}:policy/cloudhealth-access-policy --version-id v2 --profile jo`\n\n    account_number_array.each do |awsid|\n    `aws iam create-policy-version --policy-arn arn:aws:iam::#{awsid}:policy/cloudhealth-access-policy --policy-document file://\\Users\\kougav01\\Desktop\\GitCH\\v2.json --set-as-default --profile jo`\n    end\n</code></pre>\n\n<p>Essentially, I have an bunch of account numbers from an API call that need to have an updated policy, I am updating the policy using an CLI command and uploading a .json file for a new version(v2.json).</p>\n"}, {"tags": ["arrays", "ruby", "rspec", "watir-webdriver"], "answers": [{"tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 1, "last_activity_date": 1499876012, "creation_date": 1499876012, "answer_id": 45062883, "question_id": 45044500, "link": "https://stackoverflow.com/questions/45044500/rspec-and-watir-use-array-param-as-for-an-element-index/45062883#45062883", "title": "Rspec and Watir; use array param as for an element index", "body": "<p>You need to do 2 things:</p>\n\n<ul>\n<li>Iterate over the passed in indices rather than passing the whole Array as a parameter to <code>:index</code></li>\n<li>Locate the specific <code>div</code> rather than <code>divs</code> using the <code>:index</code> (ie element collections do not support the <code>:index</code> locator)</li>\n</ul>\n\n<p>This would look like:</p>\n\n<pre><code>def pin_specific_idxs(*idxs)\n  idxs.each do |idx|\n    foo.div(:class =&gt; 'some-element', :index =&gt; idx)\n       .div(:class, 'another-element')\n       .button(:class, 'thingy-i-want-to-click')\n       .click\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 541, "user_id": 4190664, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/de07027535059906c84b49ea7ea593ea?s=128&d=identicon&r=PG&f=1", "display_name": "kmancusi", "link": "https://stackoverflow.com/users/4190664/kmancusi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 45062883, "answer_count": 1, "score": 0, "last_activity_date": 1499876012, "creation_date": 1499807354, "last_edit_date": 1499866063, "question_id": 45044500, "link": "https://stackoverflow.com/questions/45044500/rspec-and-watir-use-array-param-as-for-an-element-index", "title": "Rspec and Watir; use array param as for an element index", "body": "<p>Running GUI tests using Rspec.  Is it possible for me to pass an array of values and have them used as the index position for an element?</p>\n\n<p>Something like:</p>\n\n<pre><code>def pin_specific_idxs(*idx)\n    pins = foo.divs(:class =&gt; 'some-element', :index =&gt; idx).div(:class, 'another-element').button(:class, 'thingy-i-want-to-click')\n    pins.each do |pin|\n        pin.click\n    end\nend\n</code></pre>\n\n<p>So in testing, I would call <code>pin_specific_idxs(0,2,3)</code></p>\n\n<p>Is that doable or do I have to explicitly call individual index values every time?</p>\n"}, {"tags": ["ruby", "twitter-bootstrap-3", "sass", "media-queries"], "answers": [{"tags": [], "owner": {"reputation": 23437, "user_id": 1751766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e9dcedc3f0cca576af092aa31955c06?s=128&d=identicon&r=PG", "display_name": "David Taiaroa", "link": "https://stackoverflow.com/users/1751766/david-taiaroa"}, "is_accepted": false, "score": 0, "last_activity_date": 1499815058, "last_edit_date": 1499815058, "creation_date": 1499814396, "answer_id": 45045828, "question_id": 45044401, "link": "https://stackoverflow.com/questions/45044401/scss-bootstrap-btn-group-media-query-multiple-pages/45045828#45045828", "title": "SCSS bootstrap btn-group Media Query multiple pages", "body": "<p>I can think of a number of ways to do this, here are two methods that are easy to picture: \n<a href=\"https://codepen.io/panchroma/pen/XgojBL\" rel=\"nofollow noreferrer\">https://codepen.io/panchroma/pen/XgojBL</a>  </p>\n\n<p>Add a clearfix div at the point where you want the buttons to break, then use media queries to hide or show this div.   </p>\n\n<p>Another method instead of using a clearfix would be to target <code>.btn-group</code> in your CSS, and using media queries set a max-width at viewports 768 - 992 px.  </p>\n\n<p>Good luck!</p>\n\n<p>HTML  </p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"col-sm-6\"&gt;first col&lt;/div&gt;\n    &lt;div class=\"col-sm-6\"&gt;\n      &lt;div class=\"btn-group\"&gt;\n        &lt;button type=\"button\" class=\"btn btn-primary\"&gt;btn-1&lt;/button&gt;\n        &lt;button type=\"button\" class=\"btn btn-primary\"&gt;btn-2&lt;/button&gt;\n        &lt;div class=\"cf\"&gt;&lt;/div&gt;\n        &lt;button type=\"button\" class=\"btn btn-primary\"&gt;btn-3&lt;/button&gt;\n        &lt;button type=\"button\" class=\"btn btn-primary\"&gt;btn-4&lt;/button&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>CSS  </p>\n\n<pre><code>.btn-group .cf{\n  display:none;\n}\n\n@media (min-width: 768px) and (max-width: 992px) {\n  .btn-group .cf{\n    display:block;\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5179114, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6aa120e81c1319fd323b74dc28085692?s=128&d=identicon&r=PG&f=1", "display_name": "TheRous", "link": "https://stackoverflow.com/users/5179114/therous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1499843022, "creation_date": 1499806923, "last_edit_date": 1499843022, "question_id": 45044401, "link": "https://stackoverflow.com/questions/45044401/scss-bootstrap-btn-group-media-query-multiple-pages", "title": "SCSS bootstrap btn-group Media Query multiple pages", "body": "<p>I am working on an application in Ruby. It has 8 pages and on each one of the pages the general layout is bootstrap's .container . row .col-sm-6 .col-sm-6 layout. I have a btn-group in the 2nd col-sm-6 layout that looks great on lg, xl and s devices.</p>\n\n<p>When the screen falls between 992px-768px the button group breaks in an unpleasant fashion</p>\n\n<p><img src=\"https://i.stack.imgur.com/JnkOP.png\" alt=\"btn-group 768-992px\"></p>\n\n<p>It adjust well when the columns shift one on top of the other on small screens 544px-768px and Breaks bad again on xs devices &lt; 544px</p>\n\n<p><img src=\"https://i.stack.imgur.com/zbAEu.png\" alt=\"btn-group &gt;544px\">. </p>\n\n<p>I have found a nice solution where I make the btn-group vertical on xs screens by duplicating the code adding the btn-group-vertical to duplicated code and hiding this code until it detects an xs screen (then it hides the horizontal btn-group). However, this is a lot of duplicate code that I have to replicated on 8 pages and still doesn't solve for medium screens. </p>\n\n<p>I thought about keeping my code cleaner by adding scss like this: </p>\n\n<pre><code>.myClass {\n\n    @media (max-width: 760px) {\n        &amp;:extend(.btn-group-vertical all);\n    }\n\n    @media (min-width: 761px) {\n        &amp;:extend(.btn-group all); \n    }\n}\n</code></pre>\n\n<p>That I found on stack overflow question 31893581. It doesn't work even with the manipulations that I thought would work. I could follow the solution stated in that same post but I am uncertain how sanitary that would be etc.</p>\n\n<p>If somebody has any advice for me on how to solve for a class that pulls in bootstrap classes at specific browser widths or a completely different solution to my problem, I am all ears.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "railstutorial.org"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1499809366, "post_id": 45044319, "comment_id": 77064301, "body": "Did you try with <code>save</code>? <code>User.new(name: &quot;Test User&quot;, email: &quot;test@user.com&quot;, password: &quot;secretsecret&quot;, password_confirmation: &quot;secretsecret&quot;).save</code>"}, {"owner": {"reputation": 59, "user_id": 4641077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61fac1a2f1c89fbea8d785b4797758a6?s=128&d=identicon&r=PG", "display_name": "Fiodor", "link": "https://stackoverflow.com/users/4641077/fiodor"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1499892595, "post_id": 45044319, "comment_id": 77107773, "body": "of course I tried it! over rails console mode it seems to function well, but thru web interface email field is stil staying nil..."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1499892792, "post_id": 45044319, "comment_id": 77107876, "body": "Just to know, do you have a repo, to see where&#39;s the problem?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1499893665, "post_id": 45044319, "comment_id": 77108318, "body": "It seems the repo isn&#39;t updated."}, {"owner": {"reputation": 516, "user_id": 5401931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d32000a5fe68f84ce025cb8f39aee0?s=128&d=identicon&r=PG", "display_name": "jlesse", "link": "https://stackoverflow.com/users/5401931/jlesse"}, "edited": false, "score": 0, "creation_date": 1499894172, "post_id": 45044319, "comment_id": 77108563, "body": "How are posting you the new user to the controller?"}, {"owner": {"reputation": 59, "user_id": 4641077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61fac1a2f1c89fbea8d785b4797758a6?s=128&d=identicon&r=PG", "display_name": "Fiodor", "link": "https://stackoverflow.com/users/4641077/fiodor"}, "edited": false, "score": 0, "creation_date": 1499895719, "post_id": 45044319, "comment_id": 77109273, "body": "oh, you&#39;r right. here is updated one <a href=\"https://bitbucket.org/CasusArts/sample_app/src/c51644815432?at=master\" rel=\"nofollow noreferrer\">bitbucket.org/CasusArts/sample_app/src/c51644815432?at=maste&zwnj;&#8203;r</a>"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1499899263, "post_id": 45044319, "comment_id": 77110530, "body": "The controller you points your login route, doesn&#39;t exist, what to do?"}, {"owner": {"reputation": 59, "user_id": 4641077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61fac1a2f1c89fbea8d785b4797758a6?s=128&d=identicon&r=PG", "display_name": "Fiodor", "link": "https://stackoverflow.com/users/4641077/fiodor"}, "edited": false, "score": 0, "creation_date": 1500061650, "post_id": 45044319, "comment_id": 77192683, "body": "login controller is not necessary at this point. it&#39;ll come soon. the problem now is that by saving user data over web interface email field is saved as nil. whith console it&#39;s not a problem however.."}], "answers": [{"tags": [], "owner": {"reputation": 516, "user_id": 5401931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d32000a5fe68f84ce025cb8f39aee0?s=128&d=identicon&r=PG", "display_name": "jlesse", "link": "https://stackoverflow.com/users/5401931/jlesse"}, "is_accepted": false, "score": 0, "last_activity_date": 1499809070, "last_edit_date": 1499809070, "creation_date": 1499808612, "answer_id": 45044786, "question_id": 45044319, "link": "https://stackoverflow.com/questions/45044319/rails-tutorial-chapter-7-user-saves-without-email/45044786#45044786", "title": "Rails Tutorial Chapter 7 user saves without email", "body": "<p><code>User.new</code> does not actually make a post request to the controller. It just creates a new instance of the User object in memory without saving it to the database. If you use <code>User.create</code> with the same arguments you will get an id, an updated at, and a created_at - but this still is not making a post request to your controller, its simply saving it to your database. If you'd like to make a post request to the new action of your controller you can make a front end with a new user form and submit it, or you could use something like postman or curl to make a request to your server. You'd also have to have your serving running either locally or elsewhere. I recommend reviewing pure ruby before going deeper into rails.</p>\n\n<p><a href=\"https://www.ruby-lang.org/en/documentation/quickstart/3/\" rel=\"nofollow noreferrer\">https://www.ruby-lang.org/en/documentation/quickstart/3/</a></p>\n\n<p><a href=\"https://www.getpostman.com/\" rel=\"nofollow noreferrer\">https://www.getpostman.com/</a></p>\n\n<p><a href=\"https://curl.haxx.se/docs/manpage.html\" rel=\"nofollow noreferrer\">https://curl.haxx.se/docs/manpage.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 59, "user_id": 4641077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61fac1a2f1c89fbea8d785b4797758a6?s=128&d=identicon&r=PG", "display_name": "Fiodor", "link": "https://stackoverflow.com/users/4641077/fiodor"}, "is_accepted": false, "score": 0, "last_activity_date": 1500076319, "creation_date": 1500076319, "answer_id": 45113049, "question_id": 45044319, "link": "https://stackoverflow.com/questions/45044319/rails-tutorial-chapter-7-user-saves-without-email/45113049#45113049", "title": "Rails Tutorial Chapter 7 user saves without email", "body": "<p>After long time seeking for errror, it's finaly cought! The main casus on it were <code>before_save { self.email = email.downcase! }</code> pice of code. in user.rb model.<code>before_save { self.email = email.downcase }</code>, so, without forcing downcase!</p>\n"}], "owner": {"reputation": 59, "user_id": 4641077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61fac1a2f1c89fbea8d785b4797758a6?s=128&d=identicon&r=PG", "display_name": "Fiodor", "link": "https://stackoverflow.com/users/4641077/fiodor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1500076319, "creation_date": 1499806577, "last_edit_date": 1499892989, "question_id": 45044319, "link": "https://stackoverflow.com/questions/45044319/rails-tutorial-chapter-7-user-saves-without-email", "title": "Rails Tutorial Chapter 7 user saves without email", "body": "<p>I've been going thru Rails Tutorial and got stucked on chapter 7. The problem is that after posting sign up information to rails thru rails console (with User.new), id, created_at and updated_at are becoming nil. By creating User thru creaded user web page, email becomes nil.</p>\n\n<p><strong>user.rb</strong></p>\n\n<pre><code>class User &lt; ApplicationRecord\n  before_save { self.email = email.downcase! }\n  VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-]+(\\.[a-z\\d\\-]+)*\\.[a-z]+\\z/i\n\n  validates :name, presence: true, length: { maximum: 50 }\n  validates :email, presence: true, length: { maximum: 255 },\n        format: { with: VALID_EMAIL_REGEX },\n        uniqueness: { case_sensitive: false }\n  validates :password, presence: true, length: { minimum: 6 }\n\n  has_secure_password\nend\n</code></pre>\n\n<p><strong>users_controller.rb</strong></p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  def new\n    @user = User.new\n  end\n\n  def create\n    @user = User.new(user_params)\n    if @user.save\n      flash[:success] = \"Welcome to the Sample App!\"\n      redirect_to @user\n    else\n      render 'new'\n    end\n  end\n\n  def show\n    @user = User.find(params[:id])\n  end\n\n  private\n    def user_params\n      params.require(:user).permit(:name, :email, :password, \n                                               :password_confirmation)\n  end\nend\n</code></pre>\n\n<p><strong>* new.html.erb *</strong></p>\n\n<pre><code>&lt;% provide(:titel, 'Sign Up') %&gt;\n\n&lt;h1&gt;Sign Up&lt;/h1&gt;\n\n&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-md-6 col-md-offset-3\"&gt;\n    &lt;%= form_for(@user, url: signup_path) do |f| %&gt;\n      &lt;%= render 'shared/error_messages' %&gt;\n\n      &lt;%= f.label :name %&gt;\n      &lt;%= f.text_field :name, class: \"form-control\" %&gt;\n\n      &lt;%= f.label :email %&gt;\n      &lt;%= f.email_field :email, class: 'form-control' %&gt;\n\n      &lt;%= f.label :password %&gt;\n      &lt;%= f.password_field :password, class: \"form-control\" %&gt;\n\n      &lt;%= f.label :password_confirmation, \"Confirmation\" %&gt;\n      &lt;%= f.password_field :password_confirmation, class: \"form-control\" %&gt;\n\n      &lt;%= f.submit \"Create my account\", class: \"btn btn-primary\" %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>rails console output</strong></p>\n\n<pre><code>irb(main):001:0&gt; user = User.new(name: \"Test User\", email: \"test@user.com\", password: \"secretsecret\", password_confirmation: \"secretsecret\")\n=&gt; #&lt;User id: nil, name: \"Test User\", email: \"test@user.com\", created_at: nil, updated_at: nil, password_digest: \"$2a$10$E1SvEDh.aQSi809sQ7ecReacmSsnxRDUn3IbEawugQD...\"&gt;\n</code></pre>\n\n<p><strong>Showing /sample_app/app/views/users/show.html.erb where line #7 raised:</strong></p>\n\n<pre><code>def gravatar_for(user, size: 100)\n  gravatar_id = Digest::MD5::hexdigest(user.email.downcase) # this line is highlighted\n  gravatar_url = \"https://secure.gravatar.com/avatar/#{gravatar_id}?=#{size}\"\n  image_tag(gravatar_url, alt: user.name, class: \"gravatar\")\nend\n</code></pre>\n\n<p>by checking development.sqlite3, email field is nil.</p>\n\n<p>Where am I wrong? Thank you!</p>\n\n<p>Ruby 2.4, Rail 5.1</p>\n"}, {"tags": ["ruby", "selenium", "watir", "page-object-gem"], "comments": [{"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1499807194, "post_id": 45044092, "comment_id": 77063293, "body": "How watir automatically waits for things was the big update from watir-webdriver to watir 6. Run your code with this: <code>Selenium::WebDriver.logger.level = :info</code> and it will show you what calls the driver is seeing. That error means that the element isn&#39;t there, but that element isn&#39;t getting called in the <code>#logged_in?</code> code you showed."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1499807879, "post_id": 45044092, "comment_id": 77063624, "body": "Given the exception, I would expect the script to be failing on the first line of the <code>#try_login</code> method."}, {"owner": {"reputation": 269, "user_id": 7252299, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d409a8bbf050e0fc4adc2b871e06ed13?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah", "link": "https://stackoverflow.com/users/7252299/sarah"}, "edited": false, "score": 0, "creation_date": 1499867201, "post_id": 45044092, "comment_id": 77092324, "body": "I  pasted the wrong error into the code. I&#39;ll edit it, but here&#39;s the actual error: <code>timed out after 30 seconds, waiting for #&lt;Watir::Anchor: located: false; {:id=&gt;&quot;LINK_default_logout&quot;, :tag_name=&gt;&quot;a&quot;}&gt; to be located (Watir::Exception::UnknownObjectException)</code>. I also added the stracktrace into the post as well."}, {"owner": {"reputation": 269, "user_id": 7252299, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d409a8bbf050e0fc4adc2b871e06ed13?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah", "link": "https://stackoverflow.com/users/7252299/sarah"}, "edited": false, "score": 0, "creation_date": 1499876619, "post_id": 45044092, "comment_id": 77099326, "body": "I added information about what I found from the logger into my post."}], "owner": {"reputation": 269, "user_id": 7252299, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d409a8bbf050e0fc4adc2b871e06ed13?s=128&d=identicon&r=PG&f=1", "display_name": "Sarah", "link": "https://stackoverflow.com/users/7252299/sarah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 425, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1500048348, "creation_date": 1499805574, "last_edit_date": 1499884625, "question_id": 45044092, "link": "https://stackoverflow.com/questions/45044092/watir-page-object-existence-methods-timing-out", "title": "Watir/Page Object Existence Methods Timing Out", "body": "<p>I recently upgraded from:</p>\n\n<ul>\n<li>Page Object 1.2.2 </li>\n<li>Watir-Webdriver 0.9.9 </li>\n<li>Selenium WebDriver 2.53.0</li>\n<li>Firefox 45.8.0</li>\n</ul>\n\n<p>To:</p>\n\n<ul>\n<li>Page Object 2.2.0</li>\n<li>Watir 6.3.0</li>\n<li>Selenium-Webdriver 3.4.3</li>\n<li>Firefox 52.2.0</li>\n</ul>\n\n<p>After a little bit of pain, I've finally gotten my tests to start running! One small snag though. The methods <code>#present?</code>, <code>#exists?</code>, and <code>#visible?</code> don't return anything, they just timeout instead. Similarly, <code>#wait_until</code>, <code>x_element.when_present?</code>, and similar methods all hit the same problem!</p>\n\n<p>Here is my page object:</p>\n\n<pre><code>class LoginPage &lt; TeamConnectPage\n\n  MAX_LOGIN_ATTEMPTS = 3\n\n  button :ok, value: /^OK$/i\n  button :submit, value: 'Login'\n  button :new_session, value: 'New Session'\n  link :logout, id: 'LINK_default_logout'\n  span :error_message, class: 'texterror'\n  text_field :username, name: 'j_username'\n  text_field :password, name: 'j_password'\n\n  def login_as(username)\n    username = username.to_s\n    do_logout if logged_in?\n    attempts = 0\n    try_login(username)\n    while username_element.present?\n      fail \"#{MAX_LOGIN_ATTEMPTS} logins attempted unsuccessfully for user #{username}\" if (attempts+=1) == MAX_LOGIN_ATTEMPTS\n      try_login(username)\n    end\n    if new_session_element.present?\n      new_session\n      logout_element.when_present(10)\n    end\n  end\n\n  private\n\n  def try_login(username)\n    self.username = username\n    self.password = 'test'\n    submit\n    wait_for_login_submit\n  end\n\n  def wait_for_login_submit\n    wait_until(10) { !username_element.present? || (username_element.present? &amp;&amp; username_element.value.empty?) }\n    wait_until(10) { error_message_element.present? || logout_element.present? || new_session_element.present? }\n  end\n\n  def do_logout\n    logout\n  end\n\n  def logged_in?\n    logout_element.present?\n  end\nend\n</code></pre>\n\n<p>Here's the step definition where I'm calling the page object:</p>\n\n<pre><code>def login_role role\n  caps = Selenium::WebDriver::Remote::Capabilities.firefox(accept_insecure_certs: true)\n  @browser ||= Watir::Browser.new(:firefox, desired_capabilities: caps)\n  @browser.driver.manage.window.maximize\n  @browser.goto('http://ntdmatters-it4.nwie.net/TeamConnect/login')\n  @logged_in_user = User[RoleMapping[role]]\n  on_page(LoginPage).login_as(@logged_in_user.userid)\nend\n</code></pre>\n\n<p>Here's my load order:</p>\n\n<pre><code>require 'pry'\nrequire 'active_support'\nrequire 'active_support/core_ext'\nrequire 'chronic'\nrequire 'page-object'\nrequire 'rspec'\nrequire 'watir'\nrequire 'selenium-webdriver'\n</code></pre>\n\n<p>And here's the error I'm getting:</p>\n\n<pre><code>      timed out after 30 seconds, waiting for #&lt;Watir::Anchor: located: false; {\n:id=&gt;\"LINK_default_logout\", :tag_name=&gt;\"a\"}&gt; to be located (Watir::Exception::UnknownObjectException)\n      (eval):1:in `process_watir_call'\n      ./features/support/env.src/pages/login_page.rb:48:in `do_logout'\n      ./features/support/env.src/pages/login_page.rb:15:in `login_as'\n      ./features/step_definitions/login_steps.rb:24:in `login_role'\n      ./features/step_definitions/login_steps.rb:2:in `/^I login to Project\nwith role (.*)$/'\n</code></pre>\n\n<p>What happens is that the script will hit that the <code>#logged_in?</code> method and just sit there. Then it will time out and give me the above error message.</p>\n\n<p>I can't help and wonder if this is some sort of configuration problem and that things just need to be loaded correctly or if there's some sort of deeper trap I have fallen into.</p>\n\n<p>EDIT:</p>\n\n<p>When I changed the Selenium logger level to 'Info', I got the following repeated for 30 seconds:</p>\n\n<pre><code>2017-07-12 12:11:21 INFO Selenium    &gt;&gt;&gt; http://127.0.0.1:4444/session/8d74a28f-\nd8fc-4db6-a851-4f238edf7d70/element | {\"using\":\"css selector\",\"value\":\"#LINK_def\nault_logout\"}\n2017-07-12 12:11:21 INFO Selenium &lt;- {\"value\":{\"error\":\"no such element\",\"messag\ne\":\"Unable to locate element: #LINK_default_logout\",\"stacktrace\":\"stack backtrac\ne:\\n   0:           0x4bd56f - &lt;no info&gt;\\n   1:           0x4bdcc9 - &lt;no info&gt;\\n\n   2:           0x43dc4d - &lt;no info&gt;\\n   3:           0x44db84 - &lt;no info&gt;\\n   4\n:           0x44a1ca - &lt;no info&gt;\\n   5:           0x4207bc - &lt;no info&gt;\\n   6:\n        0x405e47 - &lt;no info&gt;\\n   7:           0x6db3d9 - &lt;no info&gt;\\n   8:\n    0x417847 - &lt;no info&gt;\\n   9:           0x6d56d3 - &lt;no info&gt;\\n  10:         0x\n776c59cd - BaseThreadInitThunk\"}}\n</code></pre>\n\n<p>EDIT2: This occurs whether or not the element is actually present or not. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "devise", "recaptcha"], "comments": [{"owner": {"reputation": 27405, "user_id": 2112633, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c9bf1e5beda923bfc9abb2271c5838e5?s=128&d=identicon&r=PG", "display_name": "usha", "link": "https://stackoverflow.com/users/2112633/usha"}, "edited": false, "score": 0, "creation_date": 1499805374, "post_id": 45043991, "comment_id": 77062448, "body": "<code>save_and_open_page</code> will show you how the page looks like, Useful for debugging"}], "answers": [{"tags": [], "owner": {"reputation": 666, "user_id": 1819852, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/da91c0f9296f7029e059362ea5809af6?s=128&d=identicon&r=PG", "display_name": "souravlahoti", "link": "https://stackoverflow.com/users/1819852/souravlahoti"}, "is_accepted": false, "score": 0, "last_activity_date": 1500061938, "creation_date": 1500061938, "answer_id": 45110645, "question_id": 45043991, "link": "https://stackoverflow.com/questions/45043991/rspec-test-case-failing-after-adding-recaptcha/45110645#45110645", "title": "RSpec test case failing after adding Recaptcha", "body": "<p>Seems like it was a configuration issue in my build environment. I forgot to add the private and public key from google services to my environment variable.</p>\n\n<p>Hope this helps someone</p>\n"}], "owner": {"reputation": 666, "user_id": 1819852, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/da91c0f9296f7029e059362ea5809af6?s=128&d=identicon&r=PG", "display_name": "souravlahoti", "link": "https://stackoverflow.com/users/1819852/souravlahoti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 220, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1500061938, "creation_date": 1499805218, "question_id": 45043991, "link": "https://stackoverflow.com/questions/45043991/rspec-test-case-failing-after-adding-recaptcha", "title": "RSpec test case failing after adding Recaptcha", "body": "<p>I have added a gem recaptcha and implemented it on my sign up and login page.\nBut few of my test cases are failing. One of the test case is :</p>\n\n<pre><code>require 'rails_helper'\n\nfeature 'User sessions', js: true do\n  let(:organisation) {\n    FactoryGirl.create(:organisation, email_domain: 'example.com')\n  }\n\n  let!(:user) {\n    FactoryGirl.create(:user,\n      email: 'mrbig@example.com',\n      password: 'password',\n      organisation: organisation)\n  }\n\n  scenario 'user signs in and out' do\n    visit new_user_session_path\n\n    expect(page).to have_content 'Log in'\n\n    fill_in 'Email', with: 'mrbig@example.com'\n    fill_in 'Password', with: 'WRONG'\n    click_on 'Log in'\n\n    expect(page).to have_content 'Invalid Email or password.'\n\n    fill_in 'Email', with: 'mrbig@example.com'\n    fill_in 'Password', with: 'password'\n    click_on 'Log in'\n\n    find('.MenuContent-logout').click\n\n    expect(page).to have_text 'Log in'\n  end\nend\n</code></pre>\n\n<p>I had added <code>Recaptcha.configuration.skip_verify_env.push(\"test\")</code> to my <code>config/initializers/recaptcha.rb</code> file but still it fails on my build.</p>\n\n<p>I also added :</p>\n\n<pre><code>scenario 'user signs up' do\nUsers::RegistrationsController.any_instance.stub(:check_captcha).and_return(true)\n# Begin signup\nvisit new_user_registration_path\n</code></pre>\n\n<p>But in both cases I am getting the same error :</p>\n\n<p><a href=\"https://i.stack.imgur.com/cVyPY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cVyPY.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 27405, "user_id": 2112633, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c9bf1e5beda923bfc9abb2271c5838e5?s=128&d=identicon&r=PG", "display_name": "usha", "link": "https://stackoverflow.com/users/2112633/usha"}, "edited": false, "score": 0, "creation_date": 1499805507, "post_id": 45043989, "comment_id": 77062508, "body": "This is not an answer. Add a comment instead"}], "tags": [], "owner": {"reputation": 2124, "user_id": 839787, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f330a19645ff0895459fce9ca810b3ce?s=128&d=identicon&r=PG", "display_name": "Stephane Paquet", "link": "https://stackoverflow.com/users/839787/stephane-paquet"}, "is_accepted": false, "score": 0, "last_activity_date": 1499806104, "last_edit_date": 1499806104, "creation_date": 1499805213, "answer_id": 45043989, "question_id": 45043927, "link": "https://stackoverflow.com/questions/45043927/cant-use-milia-on-rails-5-1-2-project/45043989#45043989", "title": "Can&#39;t use Milia on rails 5.1.2 project", "body": "<p>I would replace the <code>act_as_tenant</code> by <code>acts_as_universal_and_determines_account</code> in Member class.</p>\n"}, {"comments": [{"owner": {"reputation": 2050, "user_id": 5695646, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-nEigl1xsDV4/AAAAAAAAAAI/AAAAAAAAANE/WGykpWYiogM/photo.jpg?sz=128", "display_name": "Yshmarov", "link": "https://stackoverflow.com/users/5695646/yshmarov"}, "edited": false, "score": 0, "creation_date": 1613406312, "post_id": 45096486, "comment_id": 117059407, "body": "This works 100%. Just verified"}], "tags": [], "owner": {"reputation": 408, "user_id": 3459901, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9083dc044fe37d1b7a16cd2b3dc168d0?s=128&d=identicon&r=PG", "display_name": "Giova.panasiti", "link": "https://stackoverflow.com/users/3459901/giova-panasiti"}, "is_accepted": true, "score": 4, "last_activity_date": 1500015044, "creation_date": 1500015044, "answer_id": 45096486, "question_id": 45043927, "link": "https://stackoverflow.com/questions/45043927/cant-use-milia-on-rails-5-1-2-project/45096486#45096486", "title": "Can&#39;t use Milia on rails 5.1.2 project", "body": "<p>If you, like me, are running rails 5.1 what solved my problem was to remove:</p>\n\n<pre><code>config.load_defaults 5.1\n</code></pre>\n\n<p>in <em>config/application.rb</em></p>\n"}], "owner": {"reputation": 408, "user_id": 3459901, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9083dc044fe37d1b7a16cd2b3dc168d0?s=128&d=identicon&r=PG", "display_name": "Giova.panasiti", "link": "https://stackoverflow.com/users/3459901/giova-panasiti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 550, "favorite_count": 0, "accepted_answer_id": 45096486, "answer_count": 2, "score": 1, "last_activity_date": 1500015044, "creation_date": 1499804916, "last_edit_date": 1499805627, "question_id": 45043927, "link": "https://stackoverflow.com/questions/45043927/cant-use-milia-on-rails-5-1-2-project", "title": "Can&#39;t use Milia on rails 5.1.2 project", "body": "<p>I'm trying to setup a multi tenancy rails application using the milia gem.</p>\n\n<p>When I try to signup a new user i get this error:</p>\n\n<p><code>MILIA &gt;&gt;&gt;&gt;&gt; [register user/org] tenant create failed - Tenant must exist</code></p>\n\n<p>Even if I try to create a new user or a new tentant from the console I get the same error \"Tenant must exist\".</p>\n\n<p>Being on rails 5 i know I should pay attention to relationship in models but all models are setted up as their demo show.</p>\n\n<h3>Edit 1:</h3>\n\n<p><em>views/devise/registration/new.html.erb</em></p>\n\n<pre><code>&lt;div class=\"panel panel-default devise-bs\"&gt;\n  &lt;div class=\"panel-heading\"&gt;\n    &lt;h4&gt;&lt;%= t('.sign_up', default: 'Sign up') %&gt;&lt;/h4&gt;\n  &lt;/div&gt;\n  &lt;div class=\"panel-body\"&gt;\n    &lt;%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { role: 'form' }) do |f| %&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;%= f.label :email %&gt;\n        &lt;%= f.email_field :email, autofocus: true, class: 'form-control' %&gt;\n      &lt;/div&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;%= f.label :password %&gt;\n        &lt;%= f.password_field :password, class: 'form-control' %&gt;\n      &lt;/div&gt;\n      &lt;div class=\"form-group\"&gt;\n        &lt;%= f.label :password_confirmation %&gt;\n        &lt;%= f.password_field :password_confirmation, class: 'form-control' %&gt;\n      &lt;/div&gt;\n      &lt;%= fields_for (:tenant) do |w| %&gt;\n        &lt;div class=\"form-group col-md-6 no-left-padding\"&gt;\n          &lt;%= w.label :name, 'Organization' %&gt;\n          &lt;span class=\"description\"&gt;(Unique name for your group)&lt;/span&gt;\n          &lt;%= w.text_field :name, required: true, class: 'form-control' %&gt;\n        &lt;/div&gt;\n        &lt;div class=\"form-group col-md-6 no-right-padding\"&gt;\n          &lt;%= w.label :plan%&gt;\n          &lt;%= w.select :plan, options_for_select(Plan.options, params[:plan]) ,{}, required: true, class: 'form-control' %&gt;\n        &lt;/div&gt;\n      &lt;% end %&gt;\n      &lt;%= f.submit t('.sign_up', default: 'Sign up'), class: 'btn btn-primary' %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n&lt;%= render 'devise/shared/links' %&gt;\n</code></pre>\n\n<p><em>app/models/member.rb</em></p>\n\n<pre><code>class Member &lt; ApplicationRecord\n\n  belongs_to :user\n  acts_as_tenant\n\n  DEFAULT_ADMIN = {\n    first_name: \"Admin\",\n    last_name:  \"Please edit me\"\n  }\n\n  def self.create_new_member(user, params)\n    # add any other initialization for a new member\n    return user.create_member( params )\n  end\n\n  def self.create_org_admin(user)\n    new_member = create_new_member(user, DEFAULT_ADMIN)\n    unless new_member.errors.empty?\n      raise ArgumentError, new_member.errors.full_messages.uniq.join(\", \")\n    end\n\n    return new_member\n\n  end\n\nend\n</code></pre>\n\n<p><em>app/models/tenant.rb</em></p>\n\n<pre><code>class Tenant &lt; ApplicationRecord\n\n   acts_as_universal_and_determines_tenant\n  has_many :members, dependent: :destroy\n\n  validates :name, uniqueness: true, presence: true\n  validates :plan, presence: true\n  # validates_uniqueness_of :name\n  # validates_presence_of :name\n  # validates_presence_of :plan\n\n    def self.create_new_tenant(tenant_params, user_params, coupon_params)\n\n      # tenant = Tenant.new(:name =&gt; tenant_params[:name], :plan =&gt; tenant_params[:name])\n        tenant = Tenant.new(tenant_params)\n\n      if new_signups_not_permitted?(coupon_params)\n\n        raise ::Milia::Control::MaxTenantExceeded, \"Sorry, new accounts not permitted at this time\"\n\n      else\n        tenant.save    # create the tenant\n      end\n      return tenant\n    end\n\n  # ------------------------------------------------------------------------\n  # new_signups_not_permitted? -- returns true if no further signups allowed\n  # args: params from user input; might contain a special 'coupon' code\n  #       used to determine whether or not to allow another signup\n  # ------------------------------------------------------------------------\n  def self.new_signups_not_permitted?(params)\n    return false\n  end\n\n  # ------------------------------------------------------------------------\n  # tenant_signup -- setup a new tenant in the system\n  # CALLBACK from devise RegistrationsController (milia override)\n  # AFTER user creation and current_tenant established\n  # args:\n  #   user  -- new user  obj\n  #   tenant -- new tenant obj\n  #   other  -- any other parameter string from initial request\n  # ------------------------------------------------------------------------\n    def self.tenant_signup(user, tenant, other = nil)\n      #  StartupJob.queue_startup( tenant, user, other )\n      # any special seeding required for a new organizational tenant\n      #\n      Member.create_org_admin(user)\n      #\n    end\n\n\nend\n</code></pre>\n\n<p><em>app/models/user.rb</em></p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable, :confirmable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n  acts_as_universal_and_determines_account\n  has_one :member, :dependent =&gt; :destroy\n\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1499810027, "post_id": 45043903, "comment_id": 77064566, "body": "Invalid Ruby:(("}], "answers": [{"tags": [], "owner": {"reputation": 27405, "user_id": 2112633, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c9bf1e5beda923bfc9abb2271c5838e5?s=128&d=identicon&r=PG", "display_name": "usha", "link": "https://stackoverflow.com/users/2112633/usha"}, "is_accepted": false, "score": 0, "last_activity_date": 1499806106, "last_edit_date": 1499806106, "creation_date": 1499805709, "answer_id": 45044123, "question_id": 45043903, "link": "https://stackoverflow.com/questions/45043903/ruby-extract-single-key-value-from-first-block-in-json/45044123#45044123", "title": "Ruby extract single key value from first block in json", "body": "<p>Your json is not in valid format. But assuming you have the right format, following should work</p>\n\n<pre><code>result[\"log_entries\"].collect{|entry| entry[\"created\"]}\n=&gt; [\"2017-07-11T18:40:31Z\", \"2017-06-02T11:23:21Z\"]\n</code></pre>\n\n<p>Above code will collect all the created date and give you an array</p>\n"}, {"comments": [{"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "reply_to_user": {"reputation": 158, "user_id": 2334324, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/73d4019af69d424c0586a4e9c1cd8cec?s=128&d=identicon&r=PG", "display_name": "Mike D", "link": "https://stackoverflow.com/users/2334324/mike-d"}, "edited": false, "score": 0, "creation_date": 1499810747, "post_id": 45045061, "comment_id": 77064819, "body": "Thanks for the feedback!"}], "tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": true, "score": 1, "last_activity_date": 1499809948, "creation_date": 1499809948, "answer_id": 45045061, "question_id": 45043903, "link": "https://stackoverflow.com/questions/45043903/ruby-extract-single-key-value-from-first-block-in-json/45045061#45045061", "title": "Ruby extract single key value from first block in json", "body": "<p>Since <code>log_entries</code> is an array you can just access the first element and get its <code>created</code> value.</p>\n\n<p>Assuming the variable <code>result</code> holds the whole hash (the JSON you parse from the API):</p>\n\n<pre><code>puts result['log_entries'][0]['created']\n</code></pre>\n\n<p>will print out the first date. Now you might want to guard that for cases where <code>log_entries</code> empty, so wrap it in a <code>if</code>:</p>\n\n<pre><code>if result['log_entries'].any?\n  puts result['log_entries'][0]['created']\nend\n</code></pre>\n"}], "owner": {"reputation": 158, "user_id": 2334324, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/73d4019af69d424c0586a4e9c1cd8cec?s=128&d=identicon&r=PG", "display_name": "Mike D", "link": "https://stackoverflow.com/users/2334324/mike-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 185, "favorite_count": 0, "accepted_answer_id": 45045061, "answer_count": 2, "score": 0, "last_activity_date": 1499809948, "creation_date": 1499804800, "question_id": 45043903, "link": "https://stackoverflow.com/questions/45043903/ruby-extract-single-key-value-from-first-block-in-json", "title": "Ruby extract single key value from first block in json", "body": "<p>I'm parsing a very large json output from an application API and end up with a ruby array similar to the sanitized version below:</p>\n\n<pre><code>{\"log_entries\"=&gt;\n  [{\"id=&gt;\"SDF888B2B2KAZZ0AGGB200\",\n    \"type\"=&gt;\"warning\",\n    \"summary\"=&gt;\"Things happened\",\n    \"created\"=&gt;\"2017-07-11T18:40:31Z\",\n    \"person\"=&gt;\n      {\"id\"=&gt;\"44bAN8\",\n       \"name\"=&gt;\"Harry\"}\n    \"system\"=&gt;\"local\",\n    \"service\"=&gt;\"syslog\"\n  {\"id=&gt;\"HMB001NBALLB81MMLLABLK\",\n    \"type\"=&gt;\"info\",\n    \"summary\"=&gt;\"Notice\",\n    \"created\"=&gt;\"2017-06-02T11:23:21Z\",\n    \"person\"=&gt;\n      {\"id\"=&gt;\"372z1j\",\n       \"name\"=&gt;\"Sally\"}\n    \"system\"=&gt;\"local\",\n    \"service\"=&gt;\"syslog\"}]},\n\"other\"=&gt;200,\n\"set\"=&gt;0,\n\"more\"=&gt;false,\n\"total\"=nil}\n</code></pre>\n\n<p>I just need to be able to print the value of the \"created\" key only in the first block. Meaning, when the program exits, I need it to print \"2017-07-11T18:40:31Z.\" I've googled a lot but wasn't successful in finding anything.  I've tried something like:</p>\n\n<pre><code>puts [\"log_entries\"][\"id\"][\"created\"] \n</code></pre>\n\n<p>My expectation was to print all of them to start <em>somewhere</em> and even that yields an error. Forgive me, I don't use ruby much.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4769, "user_id": 1242470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f1b4b172a8f873efe1179ca140f1eb?s=128&d=identicon&r=PG", "display_name": "Mate Solymosi", "link": "https://stackoverflow.com/users/1242470/mate-solymosi"}, "edited": false, "score": 0, "creation_date": 1499804861, "post_id": 45043879, "comment_id": 77062196, "body": "It depends. What does your gem do? How much and what kind of configuration does it need?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1499804981, "post_id": 45043879, "comment_id": 77062252, "body": "Pros: it is configurable, Cons: None. Unless the ability to configure breaks your gem. (Hint: Your question right now is actually what are the pros and cons of allowing a user to configure the gem? Not what are the pros and cons of each technique.) Either way not really suited for SO"}, {"owner": {"reputation": 97, "user_id": 8084227, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/400447e5c3436202823b1c4a5860adbb?s=128&d=identicon&r=PG&f=1", "display_name": "Ko32mo", "link": "https://stackoverflow.com/users/8084227/ko32mo"}, "reply_to_user": {"reputation": 4769, "user_id": 1242470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f1b4b172a8f873efe1179ca140f1eb?s=128&d=identicon&r=PG", "display_name": "Mate Solymosi", "link": "https://stackoverflow.com/users/1242470/mate-solymosi"}, "edited": false, "score": 0, "creation_date": 1499805228, "post_id": 45043879, "comment_id": 77062372, "body": "@M&#225;t&#233;Solymosi, in what cases the 1st approach is better, in what the 2nd one?"}], "answers": [{"tags": [], "owner": {"reputation": 161, "user_id": 4799185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2573ddee29779e76b7da7d3c2c9ff18d?s=128&d=identicon&r=PG", "display_name": "cainlevy", "link": "https://stackoverflow.com/users/4799185/cainlevy"}, "is_accepted": false, "score": 0, "last_activity_date": 1499812074, "creation_date": 1499812074, "answer_id": 45045438, "question_id": 45043879, "link": "https://stackoverflow.com/questions/45043879/configuring-my-own-gem-via-dsl-or-yml-config-file/45045438#45045438", "title": "Configuring my own gem: via DSL? Or *.yml config file?", "body": "<p>Using a DSL or Ruby code for configuration means that someone using your library doesn't have to conform to your expectations for how those bits of configuration should be stored and managed. YML files may be common, but so are ENV variables.</p>\n\n<p>If you only offer a YML configuration option, then please consider running the YML file through ERB (like Rails) so that folks can reference ENV variables according to their preference.</p>\n"}], "owner": {"reputation": 97, "user_id": 8084227, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/400447e5c3436202823b1c4a5860adbb?s=128&d=identicon&r=PG&f=1", "display_name": "Ko32mo", "link": "https://stackoverflow.com/users/8084227/ko32mo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499812074, "creation_date": 1499804715, "last_edit_date": 1499805188, "question_id": 45043879, "link": "https://stackoverflow.com/questions/45043879/configuring-my-own-gem-via-dsl-or-yml-config-file", "title": "Configuring my own gem: via DSL? Or *.yml config file?", "body": "<p>When building my own gem, what are the procs and cons to allow a user to configure it via </p>\n\n<pre><code>a) DSL or ruby code \nvs\nb) *.yml config file\n</code></pre>\n\n<p>?</p>\n\n<p>For me, they're about the same.</p>\n"}, {"tags": ["ruby", "logical-operators"], "comments": [{"owner": {"reputation": 346, "user_id": 2457435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d998a18446f06a200a4e66460a82f6d1?s=128&d=identicon&r=PG", "display_name": "01010011 01000010", "link": "https://stackoverflow.com/users/2457435/01010011-01000010"}, "edited": false, "score": 1, "creation_date": 1499804149, "post_id": 45043727, "comment_id": 77061838, "body": "In ruby, <code>|</code> is a bitwise operator, which is different than the boolean operator <code>||</code>. If you don&#39;t know what bitwise operators are, this looks like a decent source for an introduction: <a href=\"https://www.calleerlandsson.com/rubys-bitwise-operators/\" rel=\"nofollow noreferrer\">calleerlandsson.com/rubys-bitwise-operators</a>"}, {"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 2, "creation_date": 1499804231, "post_id": 45043727, "comment_id": 77061881, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/3384571/ruby-bitwise-or\">ruby bitwise or</a>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1499804710, "post_id": 45043727, "comment_id": 77062116, "body": "<a href=\"https://www.tutorialspoint.com/ruby/ruby_operators.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/ruby/ruby_operators.htm</a> . Additionally these have different precedence levels <a href=\"https://ruby-doc.org/core-2.4.1/doc/syntax/precedence_rdoc.html\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.4.1/doc/syntax/precedence_rdoc.html</a> . <code>or</code> and <code>||</code> are both Logical Operators although due to its precedence level <code>or</code> is usually referred to as a control flow operator. <code>|</code> is a bit bitwise operator to perform a bit by bit compilation e.g. <code>60 | 13 #=&gt; 61</code> because in binary it would be <code>111100 | 1101</code> which equates to <code>111101</code> or <code>61</code> because the first 4 ones are present in 60 and the last one is present in 13"}, {"owner": {"reputation": 426, "user_id": 3584767, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/c6aSe.jpg?s=128&g=1", "display_name": "vinibol12", "link": "https://stackoverflow.com/users/3584767/vinibol12"}, "edited": false, "score": 0, "creation_date": 1499805709, "post_id": 45043727, "comment_id": 77062604, "body": "Thanks for the sources. They are helpful."}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 2, "creation_date": 1499807285, "post_id": 45043727, "comment_id": 77063344, "body": "This is not a proper duplicate of the nominated exemplar.  Even if it were, I wouldn&#39;t vote to close, since this is a better asked question."}], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1499807697, "post_id": 45043954, "comment_id": 77063545, "body": "&quot;The <code>|</code> operator is a <i>binary</i> operator&quot; \u2013 Well, so is <code>||</code>. In fact, apart from <code>~</code>, <code>!</code>, <code>-@</code>, and <code>+@</code>, which are unary, and <code>?:</code>, which is ternary, <i>all</i> operators in Ruby are binary."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1499812587, "post_id": 45043954, "comment_id": 77065372, "body": "True, they&#39;re binary as in take two components. I&#39;ll clarify the phrasing as context is important here."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 4, "last_activity_date": 1499812625, "last_edit_date": 1499812625, "creation_date": 1499805029, "answer_id": 45043954, "question_id": 45043727, "link": "https://stackoverflow.com/questions/45043727/whats-the-difference-between-or-and-in-ruby/45043954#45043954", "title": "What&#39;s the difference between &quot;or&quot; and | in ruby?", "body": "<p>The <code>|</code> operator is a <em>binary mathematical</em> operator, that is it does a binary OR and works on a numerical level:</p>\n\n<pre><code>1 | 2\n# =&gt; 3\n4 | 3\n# =&gt; 7\n1 | 2 | 3\n# =&gt; 3\n</code></pre>\n\n<p>This is because it's manipulating individual values as if they were binary:</p>\n\n<pre><code>0b01 | 0b10\n# =&gt; 3 (0b11)\n</code></pre>\n\n<p>The <code>||</code> operator is a <em>logical</em> one, that is it returns the first value that's logically true. In Ruby only literal <code>nil</code> and <code>false</code> values evaluates as logically false, everything else, including <code>0</code>, empty strings and arrays, is true.</p>\n\n<p>So:</p>\n\n<pre><code>1 || 2\n# =&gt; 1\n0 || 1\n# =&gt; 0\n</code></pre>\n\n<p>The <code>or</code> operator works almost exactly the same as <code>||</code> except it's at a much lower precedence. That means other operators are evaluated first which can lead to some problems if you're not anticipating this:</p>\n\n<pre><code>a = false || true\n# =&gt; true\na\n# =&gt; true\n\na = false or true\n# =&gt; true\na\n# =&gt; false\n</code></pre>\n\n<p>This is because it's actually interpreted as:</p>\n\n<pre><code>(a = false) or true\n</code></pre>\n\n<p>This is because <code>=</code> has a <a href=\"https://ruby-doc.org/core-2.2.0/doc/syntax/precedence_rdoc.html\" rel=\"nofollow noreferrer\">higher precedence</a> when being evaluated.</p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 1, "last_activity_date": 1499808012, "creation_date": 1499808012, "answer_id": 45044656, "question_id": 45043727, "link": "https://stackoverflow.com/questions/45043727/whats-the-difference-between-or-and-in-ruby/45044656#45044656", "title": "What&#39;s the difference between &quot;or&quot; and | in ruby?", "body": "<p><code>||</code> and <code>or</code> are special built-in operators. Which means they could (and indeed <em>do</em>) have behavior that cannot be expressed in Ruby. In particular, <code>||</code> and <code>or</code> are non-strict and lazy in their right operand, whereas Ruby is actually a strict and eager language.</p>\n\n<p>OTOH, <code>|</code> is just a method call like any other method call. There is absolutely nothing special about it. Which means:</p>\n\n<ul>\n<li>it is strict</li>\n<li>it is eager</li>\n<li>any object can choose to respond to it however it wants</li>\n</ul>\n\n<p>Whereas <code>||</code> and <code>or</code> are language built-in operators, which are </p>\n\n<ul>\n<li>non-strict in their right operand</li>\n<li>lazy in their right operand</li>\n<li>their behavior is hard-coded and independent of any particular object, it is always the same and cannot be changed</li>\n</ul>\n\n<p>The only difference between <code>||</code> and <code>or</code> is precedence: <code>or</code> has very low precedence (and it has the same precedence as <code>and</code>).</p>\n"}], "owner": {"reputation": 426, "user_id": 3584767, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/c6aSe.jpg?s=128&g=1", "display_name": "vinibol12", "link": "https://stackoverflow.com/users/3584767/vinibol12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 383, "favorite_count": 1, "accepted_answer_id": 45043954, "answer_count": 2, "score": 3, "last_activity_date": 1499914289, "creation_date": 1499804054, "last_edit_date": 1499914289, "question_id": 45043727, "link": "https://stackoverflow.com/questions/45043727/whats-the-difference-between-or-and-in-ruby", "title": "What&#39;s the difference between &quot;or&quot; and | in ruby?", "body": "<p>I thought the only difference was between <code>|</code> and <code>||</code> where <code>|</code> would be equivalent to <code>or</code>. But I realised the latter is incorrect and now I'm confused. </p>\n\n<p><strong>AMEND</strong>: I understand this question to be different from <a href=\"https://stackoverflow.com/questions/3384571/ruby-bitwise-or\">ruby bitwise or</a> while mine is about the lack of understanding of the difference between bitwise and boolean operators as pointed out here in comments and answers.\nBesides, in my opinion the answers to this question have been more relevant and clearer to the problem itself. Flagging as duplicate would dissuade users from the better answers. </p>\n"}, {"tags": ["ruby", "string", "comparison"], "comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 3, "creation_date": 1499804353, "post_id": 45043534, "comment_id": 77061938, "body": "Should <code>&quot;1111&quot;</code> cause a match?"}, {"owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "edited": false, "score": 0, "creation_date": 1499805001, "post_id": 45043534, "comment_id": 77062262, "body": "And do the positions matter? So does <code>&quot;1234&quot;</code> match <code>&quot;4321&quot;</code>?"}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1499806201, "post_id": 45043534, "comment_id": 77062841, "body": "Also I don&#39;t think your <code>match</code> function does what you are hoping it does."}, {"owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "edited": false, "score": 0, "creation_date": 1499808222, "post_id": 45043534, "comment_id": 77063781, "body": "@adrian Sauls I tried to answer, but the functions I put might still be wrong for what you want, as you did not give clear indications how multiple occurances are to be handled."}, {"owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "edited": false, "score": 0, "creation_date": 1499810161, "post_id": 45043534, "comment_id": 77064603, "body": "@adrian I really recommend to try some exercises on <a href=\"http://exercism.io/languages/ruby/about\" rel=\"nofollow noreferrer\">exercism.io/languages/ruby/about</a> learned a lot about these kinds of problems over there."}, {"owner": {"reputation": 13, "user_id": 8291660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4fa7e276a2c572f6e15b0a2254373ed?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Sauls", "link": "https://stackoverflow.com/users/8291660/adrian-sauls"}, "edited": false, "score": 0, "creation_date": 1499831242, "post_id": 45043534, "comment_id": 77069960, "body": "&quot;1111&quot; would not match, and positions do not matter. Thank you all again. Roland, I think your answer covers it perfectly."}, {"owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "edited": false, "score": 0, "creation_date": 1500027059, "post_id": 45043534, "comment_id": 77171946, "body": "@AdrianSauls If my answer works for you, then it is common practice to accept that answer, see <a href=\"https://stackoverflow.com/help/accepted-answer\">stackoverflow.com/help/accepted-answer</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "is_accepted": true, "score": 0, "last_activity_date": 1499808575, "last_edit_date": 1499808575, "creation_date": 1499808097, "answer_id": 45044677, "question_id": 45043534, "link": "https://stackoverflow.com/questions/45043534/how-to-compare-strings-for-3-4-matches/45044677#45044677", "title": "How to compare strings for 3/4 matches", "body": "<p>So let us divide this problem into two seperate problems.</p>\n\n<ol>\n<li>You want a function that counts the number of matching characters.</li>\n<li>Then you want to collect these strings together, if they have enough matching characters.</li>\n</ol>\n\n<p>You could for example write a function that checks how many characters of the both strings match.</p>\n\n<pre><code>def count_matching_chars(str1,str2)\n  # counts how many characters of str1 appear in str2\n  matching_chars_count = 0\n  str1.each_char do |char| \n    matching_chars_count += 1 if str2.include?(char)\n  end\n  matching_chars_count\nend\n\nputs count_matching_chars(\"1234\", \"1134\") =&gt; 3\nputs count_matching_chars(\"1111\", \"1134\") =&gt; 4\nputs count_matching_chars(\"1234\", \"1111\") =&gt; 1\n</code></pre>\n\n<p>This one here ignores the positioning, it just checks, how many of the characters of <code>str1</code> match one character of <code>str2</code>.</p>\n\n<p>Now you can easily collect these numbers in an array.</p>\n\n<pre><code>def matches(my_num, arr)\n  result = []\n  arr.each do |num|\n    result &lt;&lt; arr if count_matching_chars(my_num,num) &gt;= 3\n  end\n  result\nend\n</code></pre>\n\n<p>You can write both functions in a more compact way, by using enumerator functions like <code>count</code> and <code>select</code>:</p>\n\n<pre><code>def count_matching_chars(str1,str2)\n  str1.each_char.count do |char| \n    str2.include?(char)\n  end\nend\n\ndef matches(my_num, arr)\n  arr.select do |num|\n    return true if count_matching_chars(num,my_num) &gt;= 3\n  end\nend\n</code></pre>\n\n<p>Or you then combine everything into one function</p>\n\n<pre><code>def matches(my_num, arr)\n  arr.select do |num|\n    true if my_num.each_char.count { |char| num.include?(char)} &gt;= 3\n  end\nend\n</code></pre>\n\n<p>Now if you just want to check, if it is a winning number. You just return <code>true</code> as soon as you find a match:</p>\n\n<pre><code>def winning_number?(my_num, arr)\n  arr.select do |num|\n    return true if my_num.each_char.count { |char| num.include?(char)} &gt;= 3\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8291660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4fa7e276a2c572f6e15b0a2254373ed?s=128&d=identicon&r=PG&f=1", "display_name": "Adrian Sauls", "link": "https://stackoverflow.com/users/8291660/adrian-sauls"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 45044677, "answer_count": 1, "score": 1, "last_activity_date": 1499808575, "creation_date": 1499803218, "question_id": 45043534, "link": "https://stackoverflow.com/questions/45043534/how-to-compare-strings-for-3-4-matches", "title": "How to compare strings for 3/4 matches", "body": "<p>Need to compare numbers in an array to 'winning' number. But I have to see if 3 out of 4 match. eg \"1234\" is my number and winning=[\"4356\",\"8312\",\"4820\",\"7623\"] . In this case \"8312\" should alert a win because they have 1 2&amp;3 in common. I have to define the numbers in a unit test, then write a function in a separate file then pass that function back into the unit test. Any help would be greatly appreciated. I already wrote a function and test comparing for an exact match and dont have any idea on what next step to take.</p>\n\n<p>function_file</p>\n\n<pre><code> def match(my_num,arr)\n  matches = []\n  arr.each_with_index do |v,i|\n     if my_num == v\n        matches &lt;&lt; my_num\n     end\n   end\n  matches\nend     \n</code></pre>\n\n<p>test_file</p>\n\n<pre><code>require \"minitest/autorun\"\nrequire_relative \"close_but_no_func.rb\"\n\nclass TestWinningNumbers &lt; Minitest::Test\n    def test_1_equals_1\n        assert_equal(10-5, 3+2)\n    end\n    def test_winning_num\n        my_num = \"1134\"\n        arr=[\"6028\",\"2088\",\"3058\",\"3476\",\"8740\",\"1134\"]\n        assert_equal([\"1134\"], match(my_num, arr))\n    end     \nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 479, "user_id": 6417047, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/z5xDc.jpg?s=128&g=1", "display_name": "Collin", "link": "https://stackoverflow.com/users/6417047/collin"}, "edited": false, "score": 0, "creation_date": 1499803643, "post_id": 45043506, "comment_id": 77061563, "body": "Perfect. Thanks a ton!"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1499804982, "post_id": 45043506, "comment_id": 77062254, "body": "Note that <code>LIKE</code> may or may not be case sensitive depending on the database you&#39;re using so you&#39;ll probably want to downcase the column value and pattern if you want a case insensitive search."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 2, "last_activity_date": 1499803428, "last_edit_date": 1499803428, "creation_date": 1499803111, "answer_id": 45043506, "question_id": 45043450, "link": "https://stackoverflow.com/questions/45043450/search-users-with-ruby-variable-as-query/45043506#45043506", "title": "Search Users with Ruby Variable as Query", "body": "<p>You can try passing the <code>params[:query]</code> to a <code>LIKE</code> SQL query within a <code>where</code> ActiveRecord statement:</p>\n\n<pre><code>def search_handler\n  @query = params[:query]\n  @type  = params[:type]\n  if @type == 'users'\n    @users = User.where('username LIKE ?', \"%#{@query}%\")\n  end\nend\n</code></pre>\n\n<p>That will give you all the users where the username matches with the value of <code>@query</code> you've passed, producing an SQL query like:</p>\n\n<pre><code>SELECT  \"users\".* FROM \"users\" WHERE (username LIKE '%blablabla%') LIMIT ?  [[\"LIMIT\", 11]]\n</code></pre>\n\n<p>You could take a look to the <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html\" rel=\"nofollow noreferrer\"><code>ActiveRecord Query Methods</code></a> for improving your queries in Rails.</p>\n"}], "owner": {"reputation": 479, "user_id": 6417047, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/z5xDc.jpg?s=128&g=1", "display_name": "Collin", "link": "https://stackoverflow.com/users/6417047/collin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 45043506, "answer_count": 1, "score": 0, "last_activity_date": 1499803428, "creation_date": 1499802863, "question_id": 45043450, "link": "https://stackoverflow.com/questions/45043450/search-users-with-ruby-variable-as-query", "title": "Search Users with Ruby Variable as Query", "body": "<p>I'm trying to make a simple search functionality within my app. To do this, the user will search on the page \"/search/users/[query]\". The parameters are setup correctly, but I cannot figure how to make it so that it searches the database for all users that the search term is in their username. I feel like I'm almost there, but it does not work:</p>\n\n<pre><code>   def search_handler\n        @query = params[:query]\n        @type = params[:type]\n        if @type == \"users\"\n          @users = User.all.username.match(@query/i)\n        end\n    end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1499801479, "post_id": 45043039, "comment_id": 77060425, "body": "What is the <code>results in error</code> stuff supposed to mean? If <code>find</code> fails? What is an error in this context? Is it an exception or a specific type of return value?"}, {"owner": {"reputation": 4693, "user_id": 5501536, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/50b9ab14ab8699a3862c14ee48126abe?s=128&d=identicon&r=PG&f=1", "display_name": "chevybow", "link": "https://stackoverflow.com/users/5501536/chevybow"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1499803230, "post_id": 45043039, "comment_id": 77061330, "body": "Sorry for not being clear- I mean exceptions. Specifically I am experiencing NoMethodErrors but in general any exception that would be raised should be filtered out of the list.    The find method is resulting in exceptions being raised- I want the exceptions, aka &quot;elements that cannot be properly found&quot;, to be filtered out."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1499803268, "post_id": 45043039, "comment_id": 77061353, "body": "What does it mean to &quot;filter out exceptions&quot;?"}, {"owner": {"reputation": 4693, "user_id": 5501536, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/50b9ab14ab8699a3862c14ee48126abe?s=128&d=identicon&r=PG&f=1", "display_name": "chevybow", "link": "https://stackoverflow.com/users/5501536/chevybow"}, "edited": false, "score": 0, "creation_date": 1499803330, "post_id": 45043039, "comment_id": 77061391, "body": "To be even more clear: the NoMethodError is not due to the find method but because of the way I am calling the elements within the find method- which results in exceptions if invalid data is passed through."}, {"owner": {"reputation": 4693, "user_id": 5501536, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/50b9ab14ab8699a3862c14ee48126abe?s=128&d=identicon&r=PG&f=1", "display_name": "chevybow", "link": "https://stackoverflow.com/users/5501536/chevybow"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1499803380, "post_id": 45043039, "comment_id": 77061422, "body": "@ndn I mean elements that result in exceptions be filtered out .."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1499803500, "post_id": 45043039, "comment_id": 77061488, "body": "But when does an element &quot;result in exception&quot;? Elements are just some objects, you have to do something with them so they would cause an exception. What is that something?"}, {"owner": {"reputation": 4693, "user_id": 5501536, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/50b9ab14ab8699a3862c14ee48126abe?s=128&d=identicon&r=PG&f=1", "display_name": "chevybow", "link": "https://stackoverflow.com/users/5501536/chevybow"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1499803783, "post_id": 45043039, "comment_id": 77061640, "body": "@ndn Best example I can give that is clear, at least to me, is if elements have a name attribute. I call the method find through <code>find(element.name)</code> which results in an exception if the element does not have a name."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1499803867, "post_id": 45043039, "comment_id": 77061678, "body": "@AdamS, then finding the element doesn&#39;t cause an exception, it&#39;s getting it&#39;s name that does. You can check with <code>element.respond_to?(:name)</code>."}], "answers": [{"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1499804932, "last_edit_date": 1499804932, "creation_date": 1499803152, "answer_id": 45043517, "question_id": 45043039, "link": "https://stackoverflow.com/questions/45043039/filter-out-array-values-that-result-in-errors/45043517#45043517", "title": "Filter out array values that result in errors", "body": "<p>The correct way to filter elements would be:</p>\n\n<pre><code>first_array - second_array\n</code></pre>\n\n<p>If you want to raise an error if you find any element from one in another:</p>\n\n<pre><code>raise 'error' unless (first_array &amp; second_array).empty?\n</code></pre>\n\n<hr>\n\n<p>Last attempt:</p>\n\n<pre><code>first_array.select { |element| condition_with_second_array(element) rescue false }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1499803606, "post_id": 45043615, "comment_id": 77061547, "body": "How can something result in an exception when calling <code>find</code> (assuming <code>array2</code> is indeed an array)?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1499803636, "post_id": 45043615, "comment_id": 77061560, "body": "Why not <code>keep_if</code> or <code>select!</code>  instead? Control flow <code>and</code> just seems so out of place here. even <code>not(array2.find(e))</code> seems cleaner."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1499803940, "post_id": 45043615, "comment_id": 77061713, "body": "@engineersmnky Both of those are valid alternatives, but I&#39;m just using what the original question had to keep the changes as modest as possible."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1499803566, "creation_date": 1499803566, "answer_id": 45043615, "question_id": 45043039, "link": "https://stackoverflow.com/questions/45043039/filter-out-array-values-that-result-in-errors/45043615#45043615", "title": "Filter out array values that result in errors", "body": "<p>What you're looking for is this, then:</p>\n\n<pre><code>array1.delete_if do |e|\n  array2.find(e) and false\n\nrescue\n  true\nend\n</code></pre>\n\n<p>Where that will remove anything that causes an exception when calling <code>find</code>.</p>\n"}], "owner": {"reputation": 4693, "user_id": 5501536, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/50b9ab14ab8699a3862c14ee48126abe?s=128&d=identicon&r=PG&f=1", "display_name": "chevybow", "link": "https://stackoverflow.com/users/5501536/chevybow"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 2, "closed_date": 1499805490, "accepted_answer_id": 45043615, "answer_count": 2, "score": -3, "last_activity_date": 1499804932, "creation_date": 1499801365, "question_id": 45043039, "link": "https://stackoverflow.com/questions/45043039/filter-out-array-values-that-result-in-errors", "closed_reason": "Needs details or clarity", "title": "Filter out array values that result in errors", "body": "<p>Basically I have 2 data structures. For simplicity lets suppose they are both 1 dimensional arrays. Assuming all functions are defined correctly, I want to do something like </p>\n\n<pre><code>Array1.delete_if(Array2.find(element in array 1) results in error)\n</code></pre>\n\n<p>I have no idea how to approach this. I've tried rescue statements and the such but I still end up with errors. Is there an efficient and easy way to filter out elements in an array based on if a method call results in an error? </p>\n\n<p>Thanks. </p>\n"}, {"tags": ["arrays", "ruby", "ruby-on-rails-3", "loops", "counter"], "comments": [{"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 1, "creation_date": 1499800430, "post_id": 45042655, "comment_id": 77059887, "body": "If you have an array, say <code>a=(1..10).to_a</code> instead of iterating, you could just rotate the array <code>a.rotate!</code> then always play <code>a[0]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 79, "user_id": 8158227, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GRXZ_YdbdWE/AAAAAAAAAAI/AAAAAAAAQwk/KBvT8azLkh4/photo.jpg?sz=128", "display_name": "Juan Carlos Garfias Tovar", "link": "https://stackoverflow.com/users/8158227/juan-carlos-garfias-tovar"}, "is_accepted": false, "score": 0, "last_activity_date": 1499801449, "creation_date": 1499801449, "answer_id": 45043060, "question_id": 45042655, "link": "https://stackoverflow.com/questions/45042655/reset-counter-after-finishing-iterating-with-the-array-elements/45043060#45043060", "title": "Reset counter after finishing iterating with the array elements", "body": "<p>After going to class i found a solution to this. that was simple to implement yet i know there are better options to solve the problem.\nthank you all for the help! :D</p>\n\n<p>PD: comment other solutions that you found if you'd like to </p>\n\n<pre><code>class Playlist\n  attr_accessor :songs\n  def initialize (name,songs)\n    @name = name\n    @songs = songs\n  end\n\n  def display_name\n    @name\n  end\n\n  def number_of_songs\n    \"There are #{@songs.count} songs in the #{display_name}\"\n  end\n\n  def add_song(song)\n    @songs &lt;&lt; song\n    @songs\n  end\n\n  def next_song\n    max =@songs.length\n    i = 0\n    finish = \"\"\n    puts \"Write Play to start the playlist (#{@name})\"\n    puts\n    promt =\"&gt;\"\n    print promt\n    while finish.downcase != \"play\"\n      finish = gets.chomp\n      i = 0\n      puts\n    while i &lt;max\n      p \"Playing song: #{@songs[i]}\"\n      p \"skip song? (Y/N) or exit to end the playlist\"\n      print promt\n      user_input = gets.chomp\n      if user_input.downcase == \"y\" &amp;&amp; i != 8\n        i += 1\n      elsif user_input.downcase == \"n\" &amp;&amp; i != 8\n        puts \"Playing song\"\n        sleep(1)\n        print'.'\n        sleep(1)\n        print'.'\n        sleep(1)\n        sleep(1)\n        print'.'\n        sleep(1)\n        print'.'\n        sleep(1)\n        sleep(1)\n        print'.'\n        sleep(1)\n        print'.'\n        sleep(1)\n        print'.'\n        puts\n        puts\n        i+=1\n      elsif user_input.downcase == \"exit\"\n        exit!\n      end\n    end\n    puts\n    p \"Restarting playlist\"\n    puts\n    puts \"Write Play to start the playlist (#{@name})\"\n    puts\n  end \nend\nend\n\nplaylist = Playlist.new(\"The Ultimate Playlist\",[\"In My Life\",\"Naive\",\"She Moves In Her Own Way\",\"Skinny Love\",\"All My Life\",\"All The Small Things\",\"Real\"])\n\np playlist.display_name\np playlist.number_of_songs\np playlist.add_song(\"California(Here We Come)\")\nputs\np playlist.next_song\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 8158227, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GRXZ_YdbdWE/AAAAAAAAAAI/AAAAAAAAQwk/KBvT8azLkh4/photo.jpg?sz=128", "display_name": "Juan Carlos Garfias Tovar", "link": "https://stackoverflow.com/users/8158227/juan-carlos-garfias-tovar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499801449, "creation_date": 1499799834, "question_id": 45042655, "link": "https://stackoverflow.com/questions/45042655/reset-counter-after-finishing-iterating-with-the-array-elements", "title": "Reset counter after finishing iterating with the array elements", "body": "<p>I\u2019m doing this code but I can\u2019t find the proper way to reset the counter after iterating with all the elements inside the array.</p>\n\n<p>The idea is that after getting to the last song in the playlist you will get into the first one. Here is my code, i would really appreciate your help with this. Thanks in advance!</p>\n\n<pre><code>class Playlist\n  attr_accessor :songs\n  def initialize (name,songs)\n    @name = name\n    @songs = songs\n  end\n\n  def display_name\n    @name\n  end\n\n  def number_of_songs\n    \"There are #{@songs.count} songs in the #{display_name}\"\n  end\n\n  def add_song(song)\n    @songs &lt;&lt; song\n    @songs\n  end\n\n  def next_song\n    i = 0\n    while i != 9\n      p \"Playing song: #{@songs[i]}\"\n      p \"skip song? (Y/N)\"\n      user_input = gets.chomp\n      if user_input.downcase == \"y\" &amp;&amp; i != 8\n        i += 1\n      elsif user_input.downcase == \"n\" &amp;&amp; i != 8\n        puts \"Playing song\"\n        sleep(1)\n        print'.'\n        sleep(1)\n        print'.'\n        sleep(1)\n        sleep(1)\n        print'.'\n        sleep(1)\n        print'.'\n        sleep(1)\n        sleep(1)\n        print'.'\n        sleep(1)\n        print'.'\n        sleep(1)\n        print'.'\n        puts\n        puts\n        i+=1\n      end\n    end\n  end\nend\n\nplaylist = Playlist.new(\"The Ultimate Playlist\",[\"In My Life\",\"Naive\",\"She Moves In Her Own Way\",\"Skinny Love\",\"All My Life\",\"All The Small Things\",\"Real\"])\n\np playlist.display_name\np playlist.number_of_songs\np playlist.add_song(\"California(Here We Come)\")\nputs\np playlist.next_song\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "dry"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1499799619, "last_edit_date": 1499799619, "creation_date": 1499799289, "answer_id": 45042503, "question_id": 45042449, "link": "https://stackoverflow.com/questions/45042449/rails-convention-for-drying-up-new-edit-given-high-degree-of-sharing/45042503#45042503", "title": "Rails convention for DRYing up new/edit given high degree of sharing", "body": "<p>Instead of <code>new_or_edit</code>, why not just pick one and have the other delegate to it? That's less verbose. In practice you'll usually split things up differently where <code>new</code> and <code>edit</code> are simply decoration around the same form.</p>\n\n<p>For example <code>new</code>:</p>\n\n<pre><code>&lt;% form_for ... do |form| %&gt;\n  &lt;%= render partial: 'form', object: form %&gt;\n  &lt;%= submit_tag 'Create' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Where you'd adjust labels, where any \"cancel\" link went to and such on a case-by-case basis and the bulk of the form content is in the <code>_form</code> partial.</p>\n\n<p>It may seem like a giant hassle to have so many files, but a reasonable number of small, simple, largely single-purpose files is often easier to keep track of than a few that are complex because they're so multi-purpose.</p>\n"}], "owner": {"reputation": 3351, "user_id": 2731253, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf88a5179da66f2e54012dd30b6f31cb?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/2731253/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1499799619, "creation_date": 1499799000, "question_id": 45042449, "link": "https://stackoverflow.com/questions/45042449/rails-convention-for-drying-up-new-edit-given-high-degree-of-sharing", "title": "Rails convention for DRYing up new/edit given high degree of sharing", "body": "<p>There are often lots of similarities between <code>new</code> and <code>edit</code> and (also <code>create</code> and <code>update</code>). I find that historically, what that leads me to create is a singular view that is titled <code>new_or_edit</code> where I use various permission identifiers to change the information presented. For a simple contrived example...</p>\n\n<pre><code>def new\n  @permission = \"new\"\n  render 'new_or_edit'\nend\n\ndef edit\n  @permission = \"edit\"\n  render 'new_or_edit'\nend\n\n# new_or_edit.html.erb\n&lt;% form_for ... %&gt;\n  &lt;% if @permission == \"new\" %&gt;\n    &lt;input id=\"name\" /&gt;\n  &lt;% else %&gt;\n    &lt;input id=\"email\" /&gt;\n  &lt;% end %&gt;\n  &lt;input id=\"story\" /&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>What is more \"Railsy\" from a convention perspective? The way I've done it above. Or to have a separate <code>new.html.erb</code> and <code>edit.html.erb</code> and pull in partials, so a re-write would be below:</p>\n\n<pre><code>def new\n  @permission = \"new\"\nend\n\ndef edit\n  @permission = \"edit\"\nend\n\n# new.html.erb\n&lt;% form_for ... %&gt;\n  &lt;%= render @permission %&gt;\n  &lt;%= render \"generic\" %&gt;\n&lt;% end %&gt;\n\n# edit.html.erb\n&lt;% form_for ... %&gt;\n  &lt;%= render @permission %&gt;\n  &lt;%= render \"generic\" %&gt;\n&lt;% end %&gt;\n\n# _new.html.erb\n&lt;input id=\"name\" /&gt;\n\n# _edit.html.erb\n&lt;input id=\"email\" /&gt;\n\n# _generic.html.erb\n&lt;input id=\"story\" /&gt;\n</code></pre>\n\n<p>Personally, I've always felt my way, if designed to be readable, is nicer because ...</p>\n\n<ol>\n<li><p>Fewer files (which is something I personally dislike with Rails development) </p></li>\n<li><p>It's nice to not duplicate classes (e.g., on <code>form_for</code>) and inevitably, text, like intro text between files</p></li>\n</ol>\n\n<p>That said, I'm asking now because I'm doing a refactoring anyway, and would rather not other Rails developers who look at this/ help me with it become immediately allergic to what I've written. FWIW, in my style, I also will combine the create/update methods similarly. I realize this breaks CRUD, but I do feel like it's just easier when there's SO much that's shared (realize the degree of sharing depends on project, in my case, it's a VERY high degree of sharing)</p>\n"}, {"tags": ["ruby", "sinatra", "sinatra-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 8291346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01177d88b8b8edfc9cbd705352c5db17?s=128&d=identicon&r=PG&f=1", "display_name": "mmarien", "link": "https://stackoverflow.com/users/8291346/mmarien"}, "edited": false, "score": 1, "creation_date": 1499952662, "post_id": 45043220, "comment_id": 77136892, "body": "Thank you! I also had to establish a connection with Active Records in my user.rb but it works now. Thanks!"}], "tags": [], "owner": {"reputation": 8367, "user_id": 384293, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/982dca3ca4a3f7c66dc3941b6e91c532?s=128&d=identicon&r=PG", "display_name": "tbuehlmann", "link": "https://stackoverflow.com/users/384293/tbuehlmann"}, "is_accepted": true, "score": 0, "last_activity_date": 1499801985, "creation_date": 1499801985, "answer_id": 45043220, "question_id": 45042384, "link": "https://stackoverflow.com/questions/45042384/ruby-nameerror-at-signup-uninitialized-constant-user/45043220#45043220", "title": "Ruby: NameError at &#39;/signup&#39; uninitialized constant User", "body": "<p>You need to require the user.rb file. Try this in your actions.rb file:</p>\n\n<pre><code>require_relative 'user'\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 8291346, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01177d88b8b8edfc9cbd705352c5db17?s=128&d=identicon&r=PG&f=1", "display_name": "mmarien", "link": "https://stackoverflow.com/users/8291346/mmarien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 408, "favorite_count": 0, "accepted_answer_id": 45043220, "answer_count": 1, "score": 0, "last_activity_date": 1499801985, "creation_date": 1499798778, "question_id": 45042384, "link": "https://stackoverflow.com/questions/45042384/ruby-nameerror-at-signup-uninitialized-constant-user", "title": "Ruby: NameError at &#39;/signup&#39; uninitialized constant User", "body": "<p>I'm new to Ruby and working on creating a form that creates a new user when submitted. I have created my database (rake: 12.0.0) and am able to edit it when using tux (so I am assuming that my model files are correct). I am using Sinatra to launch the website (which works), but when I submit the form, I am receiving this error: <strong>NameError at  '/signup' uninitialized constant User</strong>. Given that I am able to edit the database in tux, I'm assuming that my actions.rb file is not accessing the models files, but I'm not sure why.  </p>\n\n<p>ruby: 2.4.1</p>\n\n<p>puma: 3.9.1</p>\n\n<p>sinatra: 2.0.0</p>\n\n<p>tux: 0.3.0</p>\n\n<p>I've looked at other threads with similar topics, but still can't seem to figure out what the problem is. Any help would be great! Thanks </p>\n\n<p>If you need any other information let me know!</p>\n\n<p>This is my models/user.rb file:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n\n  validates_uniqueness_of :email, :phone_number\n\nend\n</code></pre>\n\n<p>actions.rb</p>\n\n<pre><code>require 'sinatra'\nrequire 'rubygems'\n\nset :public_folder, 'public'\npost '/signup' do\n  [...params -&gt; this section works so I omitted it]\n\n  # Instantiate and save a User\n  @user = User.create({firstname: firstname, lastname: lastname, email: email})\nend\n</code></pre>\n\n<p>gemfile</p>\n\n<pre><code>source \"https://rubygems.org\"\n\ngem 'rake'\ngem 'activesupport'\n\ngem 'sinatra'\ngem 'sinatra-contrib'\ngem 'sinatra-activerecord'\n\n# gem 'puma'\ngem 'tux'\n\ngroup :development, :test do\n  gem 'pry'\n  gem 'shotgun'\n  gem 'sqlite3'\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2782, "user_id": 4458445, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bIIZcxNxAuA/AAAAAAAAAAI/AAAAAAAAOGs/6SNi2yJnzKA/photo.jpg?sz=128", "display_name": "RToyo", "link": "https://stackoverflow.com/users/4458445/rtoyo"}, "edited": false, "score": 0, "creation_date": 1499797075, "post_id": 45041862, "comment_id": 77057964, "body": "You should be able to use <code>#sample</code> to grab randomly from the list."}], "answers": [{"comments": [{"owner": {"reputation": 479, "user_id": 6417047, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/z5xDc.jpg?s=128&g=1", "display_name": "Collin", "link": "https://stackoverflow.com/users/6417047/collin"}, "edited": false, "score": 0, "creation_date": 1499797428, "post_id": 45041904, "comment_id": 77058144, "body": "Don&#39;t know why this didn&#39;t occur to me or why I couldn&#39;t find it. Thanks for your help :)"}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1499804449, "post_id": 45041904, "comment_id": 77061990, "body": "With <code>n</code> users, this is <code>n+1</code> SQL queries."}], "tags": [], "owner": {"reputation": 140, "user_id": 4669351, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-GK0S7JqVqm0/AAAAAAAAAAI/AAAAAAAAAy4/HlUHW6KwQzE/photo.jpg?sz=128", "display_name": "Alex Quach", "link": "https://stackoverflow.com/users/4669351/alex-quach"}, "is_accepted": true, "score": 6, "last_activity_date": 1499797053, "creation_date": 1499797053, "answer_id": 45041904, "question_id": 45041862, "link": "https://stackoverflow.com/questions/45041862/randomize-selections-in-a-list-of-100/45041904#45041904", "title": "Randomize Selections in a List of 100", "body": "<pre class=\"lang-rb prettyprint-override\"><code>users_in_descending_order_of_followers = User.all.sort_by { |u| -u.followers.count }\nsample_of_top = users_in_descending_order_of_followers.take(100).sample(5)\n</code></pre>\n\n<p>You can use <code>sort_by</code> which can be easier to use than <code>sort</code>, and combine <code>take</code> and <code>sample</code> to get the top 100 users and sample 5 of those users.</p>\n"}, {"comments": [{"owner": {"reputation": 479, "user_id": 6417047, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/z5xDc.jpg?s=128&g=1", "display_name": "Collin", "link": "https://stackoverflow.com/users/6417047/collin"}, "edited": false, "score": 0, "creation_date": 1499799358, "post_id": 45042369, "comment_id": 77059285, "body": "I see what you&#39;re saying, but your above example did not work. I will tweak it as needed and see if I can produce the intended result."}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "reply_to_user": {"reputation": 479, "user_id": 6417047, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/z5xDc.jpg?s=128&g=1", "display_name": "Collin", "link": "https://stackoverflow.com/users/6417047/collin"}, "edited": false, "score": 0, "creation_date": 1499799451, "post_id": 45042369, "comment_id": 77059335, "body": "That code assumes that the <code>:followers</code> relationship is the same table name which should be <code>followers</code>, and that the foreign key is <code>user_id</code>"}, {"owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "reply_to_user": {"reputation": 479, "user_id": 6417047, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/z5xDc.jpg?s=128&g=1", "display_name": "Collin", "link": "https://stackoverflow.com/users/6417047/collin"}, "edited": false, "score": 0, "creation_date": 1499799503, "post_id": 45042369, "comment_id": 77059368, "body": "If this is already your schema, but still didn&#39;t work, I&#39;ll have to test this later."}], "tags": [], "owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "is_accepted": false, "score": 1, "last_activity_date": 1499799780, "last_edit_date": 1499799780, "creation_date": 1499798690, "answer_id": 45042369, "question_id": 45041862, "link": "https://stackoverflow.com/questions/45041862/randomize-selections-in-a-list-of-100/45042369#45042369", "title": "Randomize Selections in a List of 100", "body": "<p><code>User.all.sort</code> can \"potentially\" pose some problems in the long-run, depending on the number of total users, and the availability of resources particularly computer memory, not to mention it would be a lot slower because you're calling 2x <code>.followers.count</code> inside the <code>sort</code> block, which essentially calls 2xN times more DB query; N being the number of users. This is because <code>User.all.sort</code> will immediately execute the <code>User.all</code> query, thereby fetching all <code>User</code> records into memory, as opposed to your usual <code>User.all</code>, which is lazy loaded, until you (for example use <code>.each</code>, or better yet <code>.find_each</code> somewhere down the line)</p>\n\n<p>I suggest something like below (I extended Deekshith's answer referring to your link to the other question):</p>\n\n<pre><code>User.joins(:followers).order('count(followers.user_id) desc').limit(100).sample(5)\n</code></pre>\n\n<ul>\n<li><code>.joins</code>, <code>.order</code>, and <code>.limit</code> above will all extend the SQL string query into one string, then executes that SQL string, and finally run <code>.sample(5)</code> (not a SQL anymore!, but is already just a plain ruby method at this point), finally yielding the result that you needed.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "is_accepted": false, "score": 1, "last_activity_date": 1499804367, "creation_date": 1499804367, "answer_id": 45043795, "question_id": 45041862, "link": "https://stackoverflow.com/questions/45041862/randomize-selections-in-a-list-of-100/45043795#45043795", "title": "Randomize Selections in a List of 100", "body": "<p>I would strongly consider using a counter cache on the User model, to hold the count of followers.</p>\n\n<p>This would give a very small performance impact on adding or removing followers, and greatly increase performance when performing sorts:</p>\n\n<pre><code>User.order(followers_count: :desc)\n</code></pre>\n\n<p>This would be particularly noticeable if you wanted the top-n users by follower count, or finding users with no followers.</p>\n\n<pre><code>User.order(followers_count: :desc).limit(100).sample(5)\n</code></pre>\n\n<p>This method will out-perform others using <code>count(*)</code>. Add an index on <code>followers_count</code> for best effect.</p>\n"}], "owner": {"reputation": 479, "user_id": 6417047, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/z5xDc.jpg?s=128&g=1", "display_name": "Collin", "link": "https://stackoverflow.com/users/6417047/collin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 45041904, "answer_count": 3, "score": 0, "last_activity_date": 1499804367, "creation_date": 1499796937, "question_id": 45041862, "link": "https://stackoverflow.com/questions/45041862/randomize-selections-in-a-list-of-100", "title": "Randomize Selections in a List of 100", "body": "<p>This is a follow-up to this last question I asked: <a href=\"https://stackoverflow.com/questions/45023758/sort-users-by-number-of-followers/45027209\">Sort Users by Number of Followers</a>. That code is:</p>\n\n<p><code>@ordered_users = User.all.sort{|a,b| b.followers.count &lt;=&gt; a.followers.count}</code></p>\n\n<p>What I hope to accomplish is take the ordered users and get the top 100 of those and <em>then</em> randomly choose 5 out of that 100. Is there a way to accomplish this?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby", "windows", "temporary-files"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 3, "last_activity_date": 1499799536, "creation_date": 1499799536, "answer_id": 45042568, "question_id": 45041794, "link": "https://stackoverflow.com/questions/45041794/ruby-tempfile-corruption-of-binary-files/45042568#45042568", "title": "Ruby tempfile corruption of binary files", "body": "<p>The instance <a href=\"https://ruby-doc.org/stdlib-2.4.0/libdoc/tempfile/rdoc/Tempfile.html#method-c-open\" rel=\"nofollow noreferrer\"><code>open</code> method</a> is documented as:</p>\n\n<blockquote>\n  <p>Opens or reopens the file with mode <code>r+</code>.</p>\n</blockquote>\n\n<p>This means you can't depend on that method to open it in the correct mode. That's not a big deal since the normal use of Tempfile is different:</p>\n\n<pre><code>tmp = Tempfile.new('test.bin', Dir.getwd)\nFile.open('test.bin', 'rb') { |h| IO.copy_stream(h, tmp) } # =&gt; 2\ntmp.rewind\n</code></pre>\n\n<p>Now once it's been \"rewound\" you can read any data you want from it starting from the beginning.</p>\n"}], "owner": {"reputation": 3, "user_id": 3502523, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LkYV3.jpg?s=128&g=1", "display_name": "CryoCZ", "link": "https://stackoverflow.com/users/3502523/cryocz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 482, "favorite_count": 0, "accepted_answer_id": 45042568, "answer_count": 1, "score": 0, "last_activity_date": 1499799536, "creation_date": 1499796665, "question_id": 45041794, "link": "https://stackoverflow.com/questions/45041794/ruby-tempfile-corruption-of-binary-files", "title": "Ruby tempfile corruption of binary files", "body": "<p>after a lot of digging around I've found that RubyZip can corrupt binary files. After taking a closer look, it seems like <code>Tempfile</code> class can't correctly re-open binary files. To demonstrate the effect take the following script:</p>\n\n<pre><code>require 'tempfile'\n\ntmp = Tempfile.new('test.bin', Dir.getwd)\nFile.open('test.bin', 'rb') { |h| IO.copy_stream(h, tmp) } # =&gt; 2\n# 2 is the expected number of bytes\ntmp.close\n# temporary file (looking in OS) now really IS 2 bytes in size\ntmp.open\n# temporary file (looking in OS) now is 1 byte in size\ntmp.binmode\n# temporary file (looking in OS) still has the wrong number of bytes (1)\ntmp.read.length # =&gt; 1\n# And here is the problem I keep bumping into\n</code></pre>\n\n<p>The <code>test.bin</code> file I'm using only contains two bytes: <code>00 1a</code>. After corruption of the temporary file, it contains 1 byte: <code>00</code>. If it matters I'm running windows.</p>\n\n<p>Is there something that I'm missing? Is this intentional behavior? And if so, is there a way to prevent this behavior?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sidekiq"], "answers": [{"tags": [], "owner": {"reputation": 477, "user_id": 898716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSIAn.jpg?s=128&g=1", "display_name": "Allam Matsubara", "link": "https://stackoverflow.com/users/898716/allam-matsubara"}, "is_accepted": false, "score": 0, "last_activity_date": 1499797441, "creation_date": 1499797441, "answer_id": 45042007, "question_id": 45041335, "link": "https://stackoverflow.com/questions/45041335/migrating-from-delayed-jobs-to-sidekiq/45042007#45042007", "title": "migrating from Delayed Jobs to Sidekiq", "body": "<p>I don't know much about <code>Delayed::Job</code>, but from your tests, seems like you're testing if the size of your queue is 0, right? If so, Sidekiq have a section that explains some tests that you can do <a href=\"https://github.com/mperham/sidekiq/wiki/Testing\" rel=\"nofollow noreferrer\">here</a>, and, with the instructions on that page, about your configuration for use Rspec, you can do something like</p>\n\n<p><code>it {expect(MyJob.jobs.size).to be_eql 0 }</code></p>\n\n<p>Also, if you like more tests options, take a look at <a href=\"https://github.com/philostler/rspec-sidekiq\" rel=\"nofollow noreferrer\">this gem</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 904, "user_id": 2009660, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/e22d99bf5cf6f13f3a9a111a333ecb15?s=128&d=identicon&r=PG", "display_name": "kmanzana", "link": "https://stackoverflow.com/users/2009660/kmanzana"}, "is_accepted": false, "score": 0, "last_activity_date": 1499798468, "last_edit_date": 1499798468, "creation_date": 1499797817, "answer_id": 45042125, "question_id": 45041335, "link": "https://stackoverflow.com/questions/45041335/migrating-from-delayed-jobs-to-sidekiq/45042125#45042125", "title": "migrating from Delayed Jobs to Sidekiq", "body": "<p>With <code>Sidekiq</code> if you are using the basic usage where you set up your own worker for a specific job, i.e. <code>MyJobWorker</code>.  Then in the code you would use it like so:</p>\n\n<pre><code>MyJobWorker.perfom_async(id: 5)\n</code></pre>\n\n<p>Then in your spec it's as simple as asserting that the worker has that number of jobs:</p>\n\n<pre><code>it { expect(MyJobWorker.jobs.size).to be(0) }\n</code></pre>\n\n<p><code>Sidekiq</code> has some pretty good <a href=\"https://github.com/mperham/sidekiq/wiki/Testing#testing-delay-and-delay_for-methods\" rel=\"nofollow noreferrer\">docs on testing</a>.</p>\n\n<p>In order to give a more specific answer please include more of the code for how you are setting up your <code>Sidekiq</code> worker and how you are using the worker.</p>\n"}], "owner": {"reputation": 99, "user_id": 2572872, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/aunBL.png?s=128&g=1", "display_name": "Ali Ashtiani", "link": "https://stackoverflow.com/users/2572872/ali-ashtiani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 452, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1499798468, "creation_date": 1499795004, "question_id": 45041335, "link": "https://stackoverflow.com/questions/45041335/migrating-from-delayed-jobs-to-sidekiq", "title": "migrating from Delayed Jobs to Sidekiq", "body": "<p>I am migrating from Delayed Jobs to Sidekiq. There are some spec that I already have and I also want to change them to become compatible with sidekiq. </p>\n\n<pre><code>it { expect(Delayed::Job.select{|job| job.handler.match(/MyJob/)}.size).to be 0 }\n</code></pre>\n\n<p>This basically checks that there are no MyJob DelayJobs scheduled. How can I test the same thing for the same job in sidekiq. </p>\n"}, {"tags": ["ruby", "chef-infra"], "answers": [{"comments": [{"owner": {"reputation": 1019, "user_id": 2730331, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ff73fdc2c4b7f1600823fb392a0ff36b?s=128&d=identicon&r=PG", "display_name": "user081608", "link": "https://stackoverflow.com/users/2730331/user081608"}, "edited": false, "score": 0, "creation_date": 1499796140, "post_id": 45041517, "comment_id": 77057410, "body": "I wanted to make it easier to find the different attributes (readability) as you said. Can you explain more why you do not recommend it?"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 1019, "user_id": 2730331, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ff73fdc2c4b7f1600823fb392a0ff36b?s=128&d=identicon&r=PG", "display_name": "user081608", "link": "https://stackoverflow.com/users/2730331/user081608"}, "edited": false, "score": 0, "creation_date": 1499796465, "post_id": 45041517, "comment_id": 77057609, "body": "Because a lot of people get the mistaken impression that only one of the files will be used, like how recipes work. If you have so many attributes that putting them in one file is too hard, you probably have too many attributes."}, {"owner": {"reputation": 1019, "user_id": 2730331, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ff73fdc2c4b7f1600823fb392a0ff36b?s=128&d=identicon&r=PG", "display_name": "user081608", "link": "https://stackoverflow.com/users/2730331/user081608"}, "edited": false, "score": 0, "creation_date": 1499797166, "post_id": 45041517, "comment_id": 77058016, "body": "I have a recipe that will run through ~50 domains, each having different attribute values. The file in the end will come out to be ~600 lines of attributes. Would this be considered too many or normal?"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 1019, "user_id": 2730331, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ff73fdc2c4b7f1600823fb392a0ff36b?s=128&d=identicon&r=PG", "display_name": "user081608", "link": "https://stackoverflow.com/users/2730331/user081608"}, "edited": false, "score": 0, "creation_date": 1499797562, "post_id": 45041517, "comment_id": 77058212, "body": "That doesn&#39;t sound like something that should be in node attributes. Only things that actually vary should use them."}, {"owner": {"reputation": 1019, "user_id": 2730331, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ff73fdc2c4b7f1600823fb392a0ff36b?s=128&d=identicon&r=PG", "display_name": "user081608", "link": "https://stackoverflow.com/users/2730331/user081608"}, "edited": false, "score": 0, "creation_date": 1499799404, "post_id": 45041517, "comment_id": 77059312, "body": "I need that amount for each domain to create them using a template"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 1019, "user_id": 2730331, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ff73fdc2c4b7f1600823fb392a0ff36b?s=128&d=identicon&r=PG", "display_name": "user081608", "link": "https://stackoverflow.com/users/2730331/user081608"}, "edited": false, "score": 0, "creation_date": 1499804424, "post_id": 45041517, "comment_id": 77061973, "body": "Put the data somewhere else, like in the recipe or in a data bag or some other API."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 1, "last_activity_date": 1499795704, "creation_date": 1499795704, "answer_id": 45041517, "question_id": 45041044, "link": "https://stackoverflow.com/questions/45041044/organize-chef-attributes-in-different-directories/45041517#45041517", "title": "Organize Chef attributes in different directories", "body": "<p>This is not a thing, and even using multiple files might not do what you expect. Remember that <em>all</em> attribute files are always loaded. Segmenting them into multiple files is just for readability at best, and I don't recommend it. In fact if you're using Chef 13, we got rid of the directory entirely and you can just use <code>mycookbooks/attributes.rb</code>.</p>\n"}], "owner": {"reputation": 1019, "user_id": 2730331, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/ff73fdc2c4b7f1600823fb392a0ff36b?s=128&d=identicon&r=PG", "display_name": "user081608", "link": "https://stackoverflow.com/users/2730331/user081608"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "accepted_answer_id": 45041517, "answer_count": 1, "score": 0, "last_activity_date": 1499795704, "creation_date": 1499793930, "question_id": 45041044, "link": "https://stackoverflow.com/questions/45041044/organize-chef-attributes-in-different-directories", "title": "Organize Chef attributes in different directories", "body": "<p>I am trying to organize my attributes files by directory with in the attributes directory. I would look like this:</p>\n\n<pre><code>attributes\n    -Production\n        -file1.rb\n        -file2.rb\n    -Stage\n        -file1.rb\n        -file2.rb\n    -Development\n        -file1.rb\n        -file2.rb\n</code></pre>\n\n<p>When putting the different attribute files in the directories, Chef doesnt pick them up. Is there a way to make Chef look in all directories?</p>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver"], "answers": [{"tags": [], "owner": {"reputation": 267, "user_id": 3456626, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6zwm6.jpg?s=128&g=1", "display_name": "NotInventedHere", "link": "https://stackoverflow.com/users/3456626/notinventedhere"}, "is_accepted": true, "score": 0, "last_activity_date": 1499807695, "last_edit_date": 1499807695, "creation_date": 1499801699, "answer_id": 45043134, "question_id": 45040678, "link": "https://stackoverflow.com/questions/45040678/keep-focus-on-pop-up-with-selenium-webdriver/45043134#45043134", "title": "Keep focus on pop up with Selenium WebDriver", "body": "<p>You can use something like</p>\n\n<pre><code>@browser.switch_to.window(@browser.window_handles.last)\n</code></pre>\n\n<p>The accepted answer <a href=\"https://stackoverflow.com/a/9705814/3456626\">here</a> has a really good explanation of how to use switch_to.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user411103"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 648, "favorite_count": 0, "accepted_answer_id": 45043134, "answer_count": 1, "score": 0, "last_activity_date": 1499807695, "creation_date": 1499792658, "question_id": 45040678, "link": "https://stackoverflow.com/questions/45040678/keep-focus-on-pop-up-with-selenium-webdriver", "title": "Keep focus on pop up with Selenium WebDriver", "body": "<p>I am running an automated script with Selenium Webdriver (Ruby). At some point I need to click on <code>myelement</code> that, as result, will open a pop up (new modal browser window).</p>\n\n<p>However, the focus of the script (<code>browser</code> variable) is still on the original browser window and not in the pop up. How can I keep the focus on the pop up?</p>\n\n<pre><code>require 'selenium-webdriver'\nbrowser = Selenium::WebDriver.for :chrome\nbrowser.navigate.to 'http://example.com'\nbrowser.find_element(:id, 'myelement').click # Opens pop up and returns nil\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "reek", "feature-envy"], "answers": [{"tags": [], "owner": {"reputation": 4769, "user_id": 1242470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f1b4b172a8f873efe1179ca140f1eb?s=128&d=identicon&r=PG", "display_name": "Mate Solymosi", "link": "https://stackoverflow.com/users/1242470/mate-solymosi"}, "is_accepted": true, "score": 2, "last_activity_date": 1499789471, "last_edit_date": 1499789471, "creation_date": 1499789157, "answer_id": 45039573, "question_id": 45039413, "link": "https://stackoverflow.com/questions/45039413/rails-featureenvy-applicationhelperfull-title-refers-to-page-title-more-th/45039573#45039573", "title": "Rails - FeatureEnvy: ApplicationHelper#full_title refers to &#39;page_title&#39; more than self (maybe move it to another class?)", "body": "<p>The <a href=\"https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md\" rel=\"nofollow noreferrer\">documentation of <strong>reek</strong></a> explains <strong>feature envy</strong> as follows:</p>\n\n<blockquote>\n  <p><em>Feature Envy</em> occurs when a code fragment references another object more often than it references itself, or when several clients do the same series of manipulations on a particular type of object.</p>\n</blockquote>\n\n<p>In this particular case, I believe this issue can be ignored. It is natural for helper methods to take arguments and operate on those, instead of referencing <code>self</code>, which is the view object in this case.</p>\n\n<p><strong>How to exclude helpers from reek's analysis:</strong></p>\n\n<p>You should be able to exclude all helpers from being checked for compliance with the \"feature envy\" rule by adding this to the <strong><a href=\"https://github.com/troessner/reek#configuration-options\" rel=\"nofollow noreferrer\">config.reek</a></strong> file:</p>\n\n<pre><code>\"app/helpers\":\n  FeatureEnvy:\n    enabled: false\n</code></pre>\n"}], "owner": {"reputation": 1928, "user_id": 3280050, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c0f86ec29ab3a8f7f841f471d582a933?s=128&d=identicon&r=PG", "display_name": "truongnm", "link": "https://stackoverflow.com/users/3280050/truongnm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 654, "favorite_count": 0, "accepted_answer_id": 45039573, "answer_count": 1, "score": 2, "last_activity_date": 1499789471, "creation_date": 1499788737, "question_id": 45039413, "link": "https://stackoverflow.com/questions/45039413/rails-featureenvy-applicationhelperfull-title-refers-to-page-title-more-th", "title": "Rails - FeatureEnvy: ApplicationHelper#full_title refers to &#39;page_title&#39; more than self (maybe move it to another class?)", "body": "<p>I'm learning Rails course by Michael Hartl, <a href=\"https://www.railstutorial.org/book/rails_flavored_ruby\" rel=\"nofollow noreferrer\">on chapter 4</a>,\nI have function full_title as following:</p>\n\n<p><code>app/helpers/application_helper.rb</code></p>\n\n<pre><code>module ApplicationHelper\n  def full_title page_title = \"\"\n    base_title = t \"app_name\"\n    page_title.empty? ? base_title : page_title + \" | \" + base_title\n  end\nend\n</code></pre>\n\n<p>Runing reek (a code review tool), I got a warning:</p>\n\n<pre><code>app/helpers/application_helper.rb -- 1 warning:\n  [4, 4]:FeatureEnvy: ApplicationHelper#full_title refers to 'page_title' more than self (maybe move it to another class?) [https://github.com/troessner/reek/blob/master/docs/Feature-Envy.md]\n</code></pre>\n\n<p>So what is FeatureEnvy and how to fix it in this case?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-maps-api-3"], "comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1499792513, "post_id": 45038122, "comment_id": 77055287, "body": "Whats the full error message? What line does it occur on? Is it the same for both auth flows?"}, {"owner": {"reputation": 33, "user_id": 2196560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e43516034eec79cb27518ca23e68fb23?s=128&d=identicon&r=PG", "display_name": "Allan Klaus", "link": "https://stackoverflow.com/users/2196560/allan-klaus"}, "reply_to_user": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1499798462, "post_id": 45038122, "comment_id": 77058771, "body": "the error is <code>uninitialized constant Google::Auth::Stores::TokenStore</code> and <code>uninitialized constant Google::APIClient::InstalledAppFlow</code>  The error raise when I call theses classes, cause it don&#39;t found it, but I installed the gem."}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1499802909, "post_id": 45038122, "comment_id": 77061124, "body": "Did you require these in the file/controller where <code>authorization</code> is defined?"}, {"owner": {"reputation": 33, "user_id": 2196560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e43516034eec79cb27518ca23e68fb23?s=128&d=identicon&r=PG", "display_name": "Allan Klaus", "link": "https://stackoverflow.com/users/2196560/allan-klaus"}, "reply_to_user": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1499805554, "post_id": 45038122, "comment_id": 77062524, "body": "I found the solution. I need to add the gem in Gemfile, but in my service I need to require <code>&#39;google&#47;api_client&#47;auth&#47;file_storage&#39; and </code>&#39;google/api_client/auth/installed_app&#39;&#180;"}], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 2196560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e43516034eec79cb27518ca23e68fb23?s=128&d=identicon&r=PG", "display_name": "Allan Klaus", "link": "https://stackoverflow.com/users/2196560/allan-klaus"}, "is_accepted": false, "score": 1, "last_activity_date": 1499805766, "creation_date": 1499805766, "answer_id": 45044138, "question_id": 45038122, "link": "https://stackoverflow.com/questions/45038122/authorize-google-oauth2/45044138#45044138", "title": "Authorize Google Oauth2", "body": "<p>I found the solution using the second case. When I added the gem <code>gem 'google-api-client', '&gt;0.7', require: 'google/api_client'</code> in Gemfile I thought that all was done, but <code>Google::APIClient::FileStorage</code> and <code>Google::APIClient::InstalledAppFlow</code> need to require more files, so in the file you will use theses guys add these lines</p>\n\n<pre><code>require 'google/api_client/auth/file_storage'\nrequire 'google/api_client/auth/installed_app'\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 2196560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e43516034eec79cb27518ca23e68fb23?s=128&d=identicon&r=PG", "display_name": "Allan Klaus", "link": "https://stackoverflow.com/users/2196560/allan-klaus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 305, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499805766, "creation_date": 1499785118, "question_id": 45038122, "link": "https://stackoverflow.com/questions/45038122/authorize-google-oauth2", "title": "Authorize Google Oauth2", "body": "<p>I have an application ruby on rails and I'm trying to authorize my app in google, but I always get <code>uninitialized constant</code></p>\n\n<p>I tried to use <code>Google::Auth::Stores::TokenStore</code> and <code>Google::APIClient::InstalledAppFlow</code></p>\n\n<p>I followed theses samples <a href=\"https://github.com/google/google-auth-library-ruby#example-command-line\" rel=\"nofollow noreferrer\">https://github.com/google/google-auth-library-ruby#example-command-line</a> and <a href=\"https://developers.google.com/youtube/v3/code_samples/ruby?hl=pt-br#upload_a_video\" rel=\"nofollow noreferrer\">https://developers.google.com/youtube/v3/code_samples/ruby?hl=pt-br#upload_a_video</a></p>\n\n<p>One use <code>googleauth</code> and other <code>google-api-client</code>.</p>\n\n<p>In my Gemfile </p>\n\n<p><code>\ngem 'google-api-client', '0.8.2', require: 'google/api_client'\ngem 'googleauth'\n</code></p>\n\n<p>In my code</p>\n\n<p>Using first example</p>\n\n<pre><code>def authorization\n    client_id = Google::Auth::ClientId.from_file './client_secrets.json'\n    scope = ['SCOPE']\n    token_store = Google::Auth::Stores::FileTokenStore.new(file: './tokens.yaml')\n    authorizer = Google::Auth::UserAuthorizer.new(client_id, scope, token_store)\n    credentials = authorizer.get_credentials(user_id)\n    if credentials.nil?\n        url = authorizer.get_authorization_url(base_url: OOB_URI )\n        puts \"Open #{url} in your browser and enter the resulting code:\"\n        code = gets\n        credentials = authorizer.get_and_store_credentials_from_code(\n        user_id: user_id, code: code, base_url: OOB_URI)\n    end\nend\n</code></pre>\n\n<p>Using second example</p>\n\n<pre><code>def authorization\n    file_storage = Google::APIClient::FileStore.new(oauth2)\n    if file_storage.authorization.nil?\n        client_secrets = Google::APIClient::ClientSecrets.load\n        flow = Google::APIClient::InstalledAppFlow.new(\n        client_id: client_secrets.client_id,\n        client_secret: client_secrets.client_secret,\n        scope: [YOUTUBE_UPLOAD_SCOPE]\n        )\n        client.authorization = flow.authorize(file_storage)\n    else\n        client.authorization = file_storage.authorization\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "minitest", "activesupport"], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 3841634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d173eaa5554410d9d4c50bb7c1e09af?s=128&d=identicon&r=PG", "display_name": "Tek", "link": "https://stackoverflow.com/users/3841634/tek"}, "edited": false, "score": 0, "creation_date": 1499791466, "post_id": 45038157, "comment_id": 77054632, "body": "Thank you for the resolution. Updating my question with explanation."}], "tags": [], "owner": {"reputation": 4769, "user_id": 1242470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f1b4b172a8f873efe1179ca140f1eb?s=128&d=identicon&r=PG", "display_name": "Mate Solymosi", "link": "https://stackoverflow.com/users/1242470/mate-solymosi"}, "is_accepted": true, "score": 3, "last_activity_date": 1499787143, "last_edit_date": 1499787143, "creation_date": 1499785215, "answer_id": 45038157, "question_id": 45038032, "link": "https://stackoverflow.com/questions/45038032/typeerror-activesupport-is-not-a-class/45038157#45038157", "title": "TypeError: ActiveSupport is not a class", "body": "<p><code>ActiveSupport</code> is <strong>not a class</strong> but a <strong>module</strong>:</p>\n\n<pre><code>ActiveSupport.class\n#=&gt; Module\n</code></pre>\n\n<p>To patch the <code>ActiveSupport::TestCase</code> class, try this:</p>\n\n<pre><code>module ActiveSupport\n  class TestCase\n    # ...\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2267, "user_id": 882025, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/zK7M6.jpg?s=128&g=1", "display_name": "hoffm", "link": "https://stackoverflow.com/users/882025/hoffm"}, "is_accepted": false, "score": 0, "last_activity_date": 1499785350, "creation_date": 1499785350, "answer_id": 45038197, "question_id": 45038032, "link": "https://stackoverflow.com/questions/45038032/typeerror-activesupport-is-not-a-class/45038197#45038197", "title": "TypeError: ActiveSupport is not a class", "body": "<p>I think what you want is:</p>\n\n<pre><code>class ActiveSupport::TestCase\n  [...]\nend\n</code></pre>\n\n<p><code>ActiveSupport</code> is a <em>module</em>, not a class. It's being used as a namespace here for the <code>TestCase</code> class. Here's the relevant bit of code in <code>active_support</code> 5.0.2: <a href=\"https://github.com/rails/rails/blob/v5.0.2/activesupport/lib/active_support/test_case.rb#L14\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/v5.0.2/activesupport/lib/active_support/test_case.rb#L14</a></p>\n"}], "owner": {"reputation": 143, "user_id": 3841634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d173eaa5554410d9d4c50bb7c1e09af?s=128&d=identicon&r=PG", "display_name": "Tek", "link": "https://stackoverflow.com/users/3841634/tek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1393, "favorite_count": 0, "accepted_answer_id": 45038157, "answer_count": 2, "score": 2, "last_activity_date": 1499792057, "creation_date": 1499784883, "last_edit_date": 1499792057, "question_id": 45038032, "link": "https://stackoverflow.com/questions/45038032/typeerror-activesupport-is-not-a-class", "title": "TypeError: ActiveSupport is not a class", "body": "<p>Hello all and thanks in advance for the feedback. </p>\n\n<p>I have a new rails 5.0.4 project (ruby 2.3.4p301 (2017-03-30 revision 58214) [x86_64-darwin15]) and am having an issue when running my first minitest pass.</p>\n\n<p>The command:</p>\n\n<pre><code>bin/rails test\n</code></pre>\n\n<p>The error</p>\n\n<pre><code>TypeError: ActiveSupport is not a class\n&lt;sanatized&gt;/ps/tekkedout-dnd-tools/test/test_helper.rb:5:in `&lt;top (required)&gt;'\n&lt;sanatized&gt;/.rvm/gems/ruby-2.3.4/gems/activesupport-5.0.4/lib/active_support/dependencies.rb:293:in `require'\n&lt;sanatized&gt;/.rvm/gems/ruby-2.3.4/gems/activesupport-5.0.4/lib/active_support/dependencies.rb:293:in `block in require'\n&lt;sanatized&gt;/.rvm/gems/ruby-2.3.4/gems/activesupport-5.0.4/lib/active_support/dependencies.rb:259:in `load_dependency'\n&lt;sanatized&gt;/.rvm/gems/ruby-2.3.4/gems/activesupport-5.0.4/lib/active_support/dependencies.rb:293:in `require'\n&lt;sanatized&gt;/ps/tekkedout-dnd-tools/test/models/spell_test.rb:1:in `&lt;top (required)&gt;'\n</code></pre>\n\n<p>test_helper.rb</p>\n\n<pre><code>ENV[\"RAILS_ENV\"] ||= \"test\"\nrequire File.expand_path(\"../../config/environment\", __FILE__)\nrequire \"rails/test_help\"\n\nclass ActiveSupport\n  class TestCase\n    # Setup all fixtures in test/fixtures/*.yml for all tests in alphabetical order.\n    fixtures :all\n\n    # Add more helper methods to be used by all tests here...\n  end\nend\n</code></pre>\n\n<h2>Update</h2>\n\n<p>Looks like when implementing rubocop I made some hasty changes and hadn't started with my specs yet.</p>\n\n<p>Here is the diff:</p>\n\n<pre><code>-class ActiveSupport::TestCase\n-  # Setup all fixtures in test/fixtures/*.yml for all tests in alphabetical order.\n-  fixtures :all\n+class ActiveSupport\n+  class TestCase\n+    # Setup all fixtures in test/fixtures/*.yml for all tests in alphabetical order.\n+    fixtures :all\n\n-  # Add more helper methods to be used by all tests here...\n+    # Add more helper methods to be used by all tests here...\n+  end\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1499786147, "post_id": 45037646, "comment_id": 77050976, "body": "Does clicking the link after everything finishes loading produce the popup?"}, {"owner": {"reputation": 8714, "user_id": 306084, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/546ee016aba112078e62861bdc38ae69?s=128&d=identicon&r=PG", "display_name": "pjmorse", "link": "https://stackoverflow.com/users/306084/pjmorse"}, "edited": false, "score": 0, "creation_date": 1499786367, "post_id": 45037646, "comment_id": 77051129, "body": "Can you look at the <code>public.js</code> included in your page (that is, as the browser sees it, after Rails has post-processed it) and verify that <code>demo.js</code> was included in it? My guess is that there&#39;s something about the syntax of your manifest file which is keeping it from being included."}, {"owner": {"reputation": 63, "user_id": 6395318, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206595948245802/picture?type=large", "display_name": "Yasser Kotrsi", "link": "https://stackoverflow.com/users/6395318/yasser-kotrsi"}, "reply_to_user": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1499786855, "post_id": 45037646, "comment_id": 77051521, "body": "@SimpleLime : no the popup dosen&#39;t shows up after clicking the link neither after loading page as I made a call after the page loading and a call after clicking the link."}, {"owner": {"reputation": 63, "user_id": 6395318, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206595948245802/picture?type=large", "display_name": "Yasser Kotrsi", "link": "https://stackoverflow.com/users/6395318/yasser-kotrsi"}, "reply_to_user": {"reputation": 8714, "user_id": 306084, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/546ee016aba112078e62861bdc38ae69?s=128&d=identicon&r=PG", "display_name": "pjmorse", "link": "https://stackoverflow.com/users/306084/pjmorse"}, "edited": false, "score": 0, "creation_date": 1499786882, "post_id": 45037646, "comment_id": 77051539, "body": "@pjmorse: this is the content of my public.js, I don&#39;t see anything wrong : //= require jquery //= require jquery_ujs //= require demo \u2013"}, {"owner": {"reputation": 8714, "user_id": 306084, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/546ee016aba112078e62861bdc38ae69?s=128&d=identicon&r=PG", "display_name": "pjmorse", "link": "https://stackoverflow.com/users/306084/pjmorse"}, "edited": false, "score": 0, "creation_date": 1499787102, "post_id": 45037646, "comment_id": 77051702, "body": "@YasserKotrsi Is that what the browser is seeing, though? That is, if you load the page in your browser, then use Developer Tools or the like to check public.js, does it include JS code, or that manifest copy? If it&#39;s showing that manifest, the problem is that your JS isn&#39;t getting post-processed."}, {"owner": {"reputation": 63, "user_id": 6395318, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206595948245802/picture?type=large", "display_name": "Yasser Kotrsi", "link": "https://stackoverflow.com/users/6395318/yasser-kotrsi"}, "reply_to_user": {"reputation": 8714, "user_id": 306084, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/546ee016aba112078e62861bdc38ae69?s=128&d=identicon&r=PG", "display_name": "pjmorse", "link": "https://stackoverflow.com/users/306084/pjmorse"}, "edited": false, "score": 0, "creation_date": 1499790112, "post_id": 45037646, "comment_id": 77053786, "body": "@pjmorse : okey i understood your question. My browser dosen&#39;t see the script . In fact, I used the the firefox &quot;firebug inspector&quot; and it tells me that there are errors &quot;ReferenceError: jsRoar is not defined&quot;. I also checked the head of the page in the inspector and here what i found :  <code>&lt;script src=&quot;&#47;assets&#47;demo.self-877aef30ae1b040ab8a3aba4e3e309a11d7f2&zwnj;&#8203;612f44dde450b5c157aa&zwnj;&#8203;5f95c05.js?body=1&quot;&gt;</code>      <code>(function() {      </code>      <code>}).call(this); </code>&lt;/script&gt; <code>&lt;script src=&quot;&#47;assets&#47;public.self-6a3cf5192354f71615ac51034b3e97c20ed&zwnj;&#8203;a99643fcaf5bbe6d41ad&zwnj;&#8203;59bd12167.js?body=1&quot;&zwnj;&#8203;&gt;</code>"}, {"owner": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "edited": false, "score": 0, "creation_date": 1499791959, "post_id": 45037646, "comment_id": 77054942, "body": "@YasserKotrsi can you try and add <code>demo.js</code> to the precompile as well? I think it ought to raise an error if it wasn&#39;t precompiling and being required but who knows -&gt; <code>Rails.application.config.assets.precompile += %w( public.js demo.js )</code>"}, {"owner": {"reputation": 63, "user_id": 6395318, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206595948245802/picture?type=large", "display_name": "Yasser Kotrsi", "link": "https://stackoverflow.com/users/6395318/yasser-kotrsi"}, "reply_to_user": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "edited": false, "score": 0, "creation_date": 1499797635, "post_id": 45037646, "comment_id": 77058266, "body": "@MicaelNussbaumer I already try this solution but still unfixable sadly."}], "answers": [{"comments": [{"owner": {"reputation": 8714, "user_id": 306084, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/546ee016aba112078e62861bdc38ae69?s=128&d=identicon&r=PG", "display_name": "pjmorse", "link": "https://stackoverflow.com/users/306084/pjmorse"}, "edited": false, "score": 0, "creation_date": 1499786218, "post_id": 45038358, "comment_id": 77051033, "body": "Why? The <code>javascript_include_tag(&quot;public&quot;)</code> should have loaded the function, because the <code>public</code> manifest already requires <code>demo</code>. I&#39;m not saying you&#39;re wrong, but I don&#39;t understand from your answer why you would be right."}, {"owner": {"reputation": 63, "user_id": 6395318, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206595948245802/picture?type=large", "display_name": "Yasser Kotrsi", "link": "https://stackoverflow.com/users/6395318/yasser-kotrsi"}, "edited": false, "score": 0, "creation_date": 1499786364, "post_id": 45038358, "comment_id": 77051125, "body": "Actually, I don&#39;t think this is the problem, because through the  <code>&lt;%= javascript_tag( &quot;jsRoar(&#39;Rails&#39;);&quot; )%&gt;</code> helper i intended to call the function. And for the js resource loading I already did in the layout by adding :  <code>&lt;%= javascript_include_tag(&quot;public&quot;) %&gt;</code> in the header section as the public.js is the manifest file of this project."}, {"owner": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "edited": false, "score": 0, "creation_date": 1499789538, "post_id": 45038358, "comment_id": 77053454, "body": "I just tried it with the difference being the <code>requires</code> included in <code>application.js</code> and it worked as expected so I would think that pjmorse is correct and the js file is not being rendered correctly. And you don&#39;t need to call <code>layout &#39;application&#39;</code> unless your controller is inheriting from some other controller who has a layout different than application, because by default it uses <code>&#39;application&#39;</code>"}], "tags": [], "owner": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "is_accepted": false, "score": 0, "last_activity_date": 1499785788, "creation_date": 1499785788, "answer_id": 45038358, "question_id": 45037646, "link": "https://stackoverflow.com/questions/45037646/javascript-asset-dosent-load-in-my-html-erb-page/45038358#45038358", "title": "javascript asset dosen&#39;t load in my html.erb page", "body": "<p>I think this:</p>\n\n<pre><code>&lt;%= javascript_tag(\"jsRoar('Rails');\")%&gt;\n</code></pre>\n\n<p>should be:</p>\n\n<pre><code>&lt;%= javascript_include_tag(\"demo\") %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1284, "user_id": 1628387, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/c482161f077c79df5e62590110b465e9?s=128&d=identicon&r=PG", "display_name": "Alex C", "link": "https://stackoverflow.com/users/1628387/alex-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1499796217, "creation_date": 1499796217, "answer_id": 45041664, "question_id": 45037646, "link": "https://stackoverflow.com/questions/45037646/javascript-asset-dosent-load-in-my-html-erb-page/45041664#45041664", "title": "javascript asset dosen&#39;t load in my html.erb page", "body": "<p>See if this code works in your view:</p>\n\n<pre><code>$(document).ready(function(){\n   jsRoar('Yassser');\n})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 63, "user_id": 6395318, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206595948245802/picture?type=large", "display_name": "Yasser Kotrsi", "link": "https://stackoverflow.com/users/6395318/yasser-kotrsi"}, "is_accepted": false, "score": 2, "last_activity_date": 1499801045, "creation_date": 1499801045, "answer_id": 45042963, "question_id": 45037646, "link": "https://stackoverflow.com/questions/45037646/javascript-asset-dosent-load-in-my-html-erb-page/45042963#45042963", "title": "javascript asset dosen&#39;t load in my html.erb page", "body": "<p>My problem was resolved after deleting the \"demo.coffee\" file.\nI discovered that the my issue is derived from the fact that I have two files with the same name (but different extensions) \"demo.js\" and \"demo.coffee\". Since the Rails asset helpers treat coffescript and js files equally this is ambiguous.\nSo I have deleted the \"demo.coffee\" and all my problems are settled.\nThank you all mates.\nGreat thnx for @max with his reply in <a href=\"https://stackoverflow.com/questions/44231490/ruby-on-rails-asset-pipeline-doesnt-work-properly\">this post</a> </p>\n"}], "owner": {"reputation": 63, "user_id": 6395318, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206595948245802/picture?type=large", "display_name": "Yasser Kotrsi", "link": "https://stackoverflow.com/users/6395318/yasser-kotrsi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1499801045, "creation_date": 1499783832, "last_edit_date": 1499784881, "question_id": 45037646, "link": "https://stackoverflow.com/questions/45037646/javascript-asset-dosent-load-in-my-html-erb-page", "title": "javascript asset dosen&#39;t load in my html.erb page", "body": "<p>I am using : </p>\n\n<pre><code>Linux Ubuntu 16.04\n\nruby 2.4.0p0;\n\nrails 5.1.1\n</code></pre>\n\n<p>I am a begginner in rails and I have followed the Ruby on Rails 4 Essential Training in lynda.com in order to learn. I am now stuck at the loading js assets task. </p>\n\n<p>I have created the \"app/assets/javascripts/demo.js\" file which contains the js function : </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>function jsRoar(name) {\r\n  alert('I am ' + name + '. Hear me roar!');\r\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Then I have load this file in my manifest file \"app/assets/javascripts/public.js\"</p>\n\n<pre><code>//= require jquery\n//= require jquery_ujs\n//= require demo\n</code></pre>\n\n<p>After that I have added external include of js to my layout at \"app/views/layouts/application.html.erb\":</p>\n\n<pre><code>&lt;%= javascript_include_tag \"public\" %&gt;\n</code></pre>\n\n<p>In my controller I have included my layout by typing at \"app/controllers/demo_controller.rb\"</p>\n\n<pre><code>layout 'application'\n</code></pre>\n\n<p>And finally I have called my function by typing these js codes in my demo/index.html.erb :</p>\n\n<pre><code>&lt;%= link_to('Roar', '#', :onclick =&gt; \"jsRoar('Yassser');return true;\") %&gt;   \n&lt;%= javascript_tag(\"jsRoar('Rails');\")%&gt;\n</code></pre>\n\n<p>After that i get \"undefined function\" in my chrome console and the alert doesn't appears .I have defined the function in the same html.erb and it works so it's not a problem of javascript i think.\nI must mention also that, at first when i run my server, i have obtained a problem of assets compilation so I have fixed by adding this line in \"config/initializers/assets.rb\": </p>\n\n<pre><code>Rails.application.config.assets.precompile += %w( public.js)\n</code></pre>\n\n<p>I am available for more details.\nPlease help.</p>\n"}, {"tags": ["arrays", "ruby", "search"], "answers": [{"tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 5, "last_activity_date": 1499783657, "creation_date": 1499783657, "answer_id": 45037580, "question_id": 45037400, "link": "https://stackoverflow.com/questions/45037400/find-where-int-or-string-matches-in-array/45037580#45037580", "title": "Find where int or string matches in array", "body": "<p>You can use <code>each_index</code> along with <code>select</code>:</p>\n\n<pre><code>arr = [1,4,6,4,1]\narr.each_index.select { |i| arr[i] == 1 }\n#=&gt; [0, 4]\n</code></pre>\n"}], "owner": {"reputation": 3502, "user_id": 2558108, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DUiG3.jpg?s=128&g=1", "display_name": "Qwertie", "link": "https://stackoverflow.com/users/2558108/qwertie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 45037580, "answer_count": 1, "score": 0, "last_activity_date": 1499783657, "creation_date": 1499783276, "question_id": 45037400, "link": "https://stackoverflow.com/questions/45037400/find-where-int-or-string-matches-in-array", "title": "Find where int or string matches in array", "body": "<p>Is there any way where I can not only find out if an array includes something but also where in the array it is found?</p>\n\n<p>For example </p>\n\n<p>finding <code>1</code> in <code>[1,4,6,4,1]</code> would return <code>[0,4]</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "solr", "sunspot"], "answers": [{"comments": [{"owner": {"reputation": 373, "user_id": 1798531, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6926ca6cf4c1b4fc41c4fbadda92a8e8?s=128&d=identicon&r=PG", "display_name": "bjacobs", "link": "https://stackoverflow.com/users/1798531/bjacobs"}, "edited": false, "score": 0, "creation_date": 1500405138, "post_id": 45037743, "comment_id": 77318762, "body": "please see my edit above. Perhaps you can help further. I&#39;m not getting the syntax quite right."}, {"owner": {"reputation": 373, "user_id": 1798531, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6926ca6cf4c1b4fc41c4fbadda92a8e8?s=128&d=identicon&r=PG", "display_name": "bjacobs", "link": "https://stackoverflow.com/users/1798531/bjacobs"}, "edited": false, "score": 0, "creation_date": 1500911694, "post_id": 45037743, "comment_id": 77532273, "body": "Thank you for the update, but it causes me to get a &quot;SystemStackError (stack level too deep)&quot; error. FYI I&#39;m using ruby 2.3.1 and rails 5.0.0"}, {"owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "reply_to_user": {"reputation": 373, "user_id": 1798531, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6926ca6cf4c1b4fc41c4fbadda92a8e8?s=128&d=identicon&r=PG", "display_name": "bjacobs", "link": "https://stackoverflow.com/users/1798531/bjacobs"}, "edited": false, "score": 0, "creation_date": 1501658452, "post_id": 45037743, "comment_id": 77868789, "body": "I am pretty sure this error is due to some other code, probably in your model or somewhere, specially callbacks. Solr won&#39;t cause this sort of error. Sharing more relevant code and logs might help.."}, {"owner": {"reputation": 373, "user_id": 1798531, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6926ca6cf4c1b4fc41c4fbadda92a8e8?s=128&d=identicon&r=PG", "display_name": "bjacobs", "link": "https://stackoverflow.com/users/1798531/bjacobs"}, "edited": false, "score": 0, "creation_date": 1501859991, "post_id": 45037743, "comment_id": 77981891, "body": "Just so I don&#39;t go down a rabbit hole here, is it really possible that this is an error elsewhere in my code when it works perfectly before adding the facet? I&#39;ve been searching around the internet and found this <a href=\"https://github.com/sunspot/sunspot/issues/395\" rel=\"nofollow noreferrer\">github.com/sunspot/sunspot/issues/395</a>, but when I click on the link to see the bug report, it asks for a log in, so I hit a wall."}], "tags": [], "owner": {"reputation": 5727, "user_id": 6548745, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-ohYaFCalmPo/AAAAAAAAAAI/AAAAAAAAC9Y/Uamy4dkGW_0/photo.jpg?sz=128", "display_name": "Md. Farhan Memon", "link": "https://stackoverflow.com/users/6548745/md-farhan-memon"}, "is_accepted": false, "score": 0, "last_activity_date": 1500470772, "last_edit_date": 1500470772, "creation_date": 1499784088, "answer_id": 45037743, "question_id": 45037200, "link": "https://stackoverflow.com/questions/45037200/filter-a-result-from-sunspot-solr/45037743#45037743", "title": "Filter a result from Sunspot Solr", "body": "<p>Yes, you are right.. you will have to use <a href=\"https://github.com/sunspot/sunspot/wiki/Drilling-down-with-facets\" rel=\"nofollow noreferrer\"><code>facets</code></a>, something like the following</p>\n\n<pre><code>facet :field_PropertySubType, exclude: with(:field_PropertySubType, attributes[:field_PropertySubType]\n</code></pre>\n\n<p>However, you will have to index this field as <code>string</code> instead as <code>fulltext</code> doesn't support faceting.</p>\n\n<p><strong>Update</strong></p>\n\n<p>Because of your <code>if</code> statement, the facets are not created if the option is not selected..you need an <code>else</code> statement..</p>\n\n<pre><code>if params[:single_family].present?\n  facet :field_PropertySubType, exclude: with(:field_PropertySubType,\"Single Family\")\nelse\n  facet :field_PropertySubType\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 373, "user_id": 1798531, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6926ca6cf4c1b4fc41c4fbadda92a8e8?s=128&d=identicon&r=PG", "display_name": "bjacobs", "link": "https://stackoverflow.com/users/1798531/bjacobs"}, "is_accepted": true, "score": 0, "last_activity_date": 1503685391, "creation_date": 1503685391, "answer_id": 45887437, "question_id": 45037200, "link": "https://stackoverflow.com/questions/45037200/filter-a-result-from-sunspot-solr/45887437#45887437", "title": "Filter a result from Sunspot Solr", "body": "<p>It ended up being:</p>\n\n<pre><code>facet :field_PropertySubType, exclude: [with(:field_PropertySubType, \"Single Family\")]\n</code></pre>\n\n<p>The \"with\" just needed brackets around it. </p>\n"}], "owner": {"reputation": 373, "user_id": 1798531, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6926ca6cf4c1b4fc41c4fbadda92a8e8?s=128&d=identicon&r=PG", "display_name": "bjacobs", "link": "https://stackoverflow.com/users/1798531/bjacobs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "accepted_answer_id": 45887437, "answer_count": 2, "score": 0, "last_activity_date": 1503685391, "creation_date": 1499782825, "last_edit_date": 1500405052, "question_id": 45037200, "link": "https://stackoverflow.com/questions/45037200/filter-a-result-from-sunspot-solr", "title": "Filter a result from Sunspot Solr", "body": "<p>I have a search that's working great for searching an address in a property listing. But I can't figure out how to then filter those results based on the values of a certain text field. Here is what I have:</p>\n\n<pre><code>search = Listing.search do\n  fulltext attributes[:address] + \" -'Off Market'\"\n\n  with(:field_BedsTotal).greater_than_or_equal_to attributes[:field_BedsTotal]\n  with(:field_BathsFull).greater_than_or_equal_to attributes[:field_BathsFull]\nend\n</code></pre>\n\n<p>So it's searching for the user inputed address (discarding any that are off market), and only returning results with beds and bath greater or equal to what the user selects. </p>\n\n<p>But there is another field called \"field_PropertySubType\" that has \"Condo\" or \"Single Family\" as values. I have a checkbox that the user can check (attributes[:condo], attributes[:single_family]). How can I filter the search results by these values of field_PropertySubType? I'm guessing with facets but I can't find enough documentation to help for my particular scenario. I did add the field_PropertySubType field to my searchable list as text. But if I add it to \"fulltext\" it only adds to the results (like anything that matches address OR condo\") instead of filtering them (matching address AND condo). Thanks!</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Trying out facet, but not quite getting the syntax correct:</p>\n\n<pre><code>searchable do\n    text :field_StreetNumber, :field_StreetName, :field_StreetSuffix, :field_City\n    string :field_PropertySubType, :field_PropertyType\n  end\n\n  def self.filter(attributes)\n\n    search = Listing.search do\n      fulltext attributes[:address]\n      facet :field_PropertySubType, exclude: with(:field_PropertySubType,\"Single Family\") if params[:single_family].present?\n    end\n\n  end\n</code></pre>\n"}, {"tags": ["ruby", "jenkins", "rubygems", "phantomjs", "poltergeist"], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 2, "last_activity_date": 1499790039, "creation_date": 1499790039, "answer_id": 45039857, "question_id": 45037151, "link": "https://stackoverflow.com/questions/45037151/cliverdependencynotfoundcould-not-find-an-executable-phantomjs-on-your/45039857#45039857", "title": "Cliver::Dependency::NotFound:Could not find an executable [&quot;phantomjs&quot;] on your path. error on Jenkins", "body": "<p>From the phantomjs gem readme, you need to do</p>\n\n<pre><code>gem 'phantomjs', :require =&gt; 'phantomjs/poltergeist'\n</code></pre>\n\n<p>to configure the poltergeist driver automatically - <a href=\"https://github.com/colszowka/phantomjs-gem#usage-with-poltergeistcapybara\" rel=\"nofollow noreferrer\">https://github.com/colszowka/phantomjs-gem#usage-with-poltergeistcapybara</a> - or specify the PhantomJS location if manually registering the poltergeist driver - <a href=\"https://github.com/colszowka/phantomjs-gem#manual-setup\" rel=\"nofollow noreferrer\">https://github.com/colszowka/phantomjs-gem#manual-setup</a> .  This is because the phantomjs gem doesn't install the binary into the PATH, so \n Poltergeist needs to be told where it is.  On your local machine it's probably finding another install of PhantomJS that is in your PATH.</p>\n"}, {"tags": [], "owner": {"reputation": 2429, "user_id": 683728, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb96935c08d5b850f3fbf1c1f25196fe?s=128&d=identicon&r=PG", "display_name": "glasz", "link": "https://stackoverflow.com/users/683728/glasz"}, "is_accepted": false, "score": 3, "last_activity_date": 1507426399, "creation_date": 1507426399, "answer_id": 46626734, "question_id": 45037151, "link": "https://stackoverflow.com/questions/45037151/cliverdependencynotfoundcould-not-find-an-executable-phantomjs-on-your/46626734#46626734", "title": "Cliver::Dependency::NotFound:Could not find an executable [&quot;phantomjs&quot;] on your path. error on Jenkins", "body": "<p>if you're using Rails' system tests, you'll need to pass proper options to the driver to have it use PhantomJS from the <code>phantomjs</code> gem:</p>\n\n<pre><code>require 'phantomjs'\n\nclass ApplicationSystemTestCase &lt; ActionDispatch::SystemTestCase\n  driven_by :poltergeist, options: { phantomjs: Phantomjs.path }\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2695, "user_id": 6488361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QLWMu.jpg?s=128&g=1", "display_name": "Kaka Ruto", "link": "https://stackoverflow.com/users/6488361/kaka-ruto"}, "is_accepted": false, "score": 0, "last_activity_date": 1601469955, "creation_date": 1601469955, "answer_id": 64137884, "question_id": 45037151, "link": "https://stackoverflow.com/questions/45037151/cliverdependencynotfoundcould-not-find-an-executable-phantomjs-on-your/64137884#64137884", "title": "Cliver::Dependency::NotFound:Could not find an executable [&quot;phantomjs&quot;] on your path. error on Jenkins", "body": "<p>This script worked for me</p>\n<pre><code>#!/usr/bin/env bash\n# This script install PhantomJS in your Debian/Ubuntu System\n#\n# This script must be run as root:\n# sudo sh install_phantomjs.sh\n#\n\nif [[ $EUID -ne 0 ]]; then\n    echo &quot;This script must be run as root&quot; 1&gt;&amp;2\n    exit 1\nfi\n\nPHANTOM_VERSION=&quot;phantomjs-2.1.1&quot;\nARCH=$(uname -m)\n\nif ! [ $ARCH = &quot;x86_64&quot; ]; then\n    $ARCH=&quot;i686&quot;\nfi\n\nPHANTOM_JS=&quot;$PHANTOM_VERSION-linux-$ARCH&quot;\n\napt-get update\napt-get install build-essential chrpath libssl-dev libxft-dev -y\napt-get install libfreetype6 libfreetype6-dev -y\napt-get install libfontconfig1 libfontconfig1-dev -y\n\ncd ~\nwget https://bitbucket.org/ariya/phantomjs/downloads/$PHANTOM_JS.tar.bz2\ntar xvjf $PHANTOM_JS.tar.bz2\n\nmv $PHANTOM_JS /usr/local/share\nln -sf /usr/local/share/$PHANTOM_JS/bin/phantomjs /usr/local/bin\n</code></pre>\n<p>Give the file executable permissions</p>\n<pre><code>chmod +x install_phantomjs.sh\n</code></pre>\n<p>Then push to git to rebuild</p>\n<pre><code>git add install_phantomjs.sh\ngit commit -m 'Install PhantomJS'\ngit push\n</code></pre>\n<p>NB: Find the latest PhantomJS versions here <a href=\"https://bitbucket.org/ariya/phantomjs/downloads/\" rel=\"nofollow noreferrer\">https://bitbucket.org/ariya/phantomjs/downloads/</a>, then you can edit the <code>PHANTOM_VERSION</code> env variable appropriately</p>\n"}], "owner": {"reputation": 49, "user_id": 5706450, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh6.googleusercontent.com/-tnI0j-lzzW0/AAAAAAAAAAI/AAAAAAAAAGc/FugDed2H1JI/photo.jpg?sz=128", "display_name": "Nipun Tanay", "link": "https://stackoverflow.com/users/5706450/nipun-tanay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3574, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1601469955, "creation_date": 1499782696, "question_id": 45037151, "link": "https://stackoverflow.com/questions/45037151/cliverdependencynotfoundcould-not-find-an-executable-phantomjs-on-your", "title": "Cliver::Dependency::NotFound:Could not find an executable [&quot;phantomjs&quot;] on your path. error on Jenkins", "body": "<p>I am getting this error while building the project on Jenkins . The execution is running hassle free on my local machine . I have added these to my Gemfile .</p>\n\n<pre><code>gem 'poltergeist'\ngem 'capybara'\ngem 'phantomjs'\n</code></pre>\n\n<p>The error only occurs on jenkins.\nusing phantomjs 2.1.1.0</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 551, "user_id": 3260603, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/WHzXB.jpg?s=128&g=1", "display_name": "tekina", "link": "https://stackoverflow.com/users/3260603/tekina"}, "edited": false, "score": 0, "creation_date": 1499782173, "post_id": 45036894, "comment_id": 77047777, "body": "No. There is only one key <code>JsonData</code>. The entire hash is its value."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 2, "last_activity_date": 1499782712, "last_edit_date": 1499782712, "creation_date": 1499782080, "answer_id": 45036894, "question_id": 45036788, "link": "https://stackoverflow.com/questions/45036788/append-a-hash-to-a-get-endpoints-query-params-in-rails/45036894#45036894", "title": "Append a hash to a GET endpoint&#39;s query params in Rails", "body": "<p>Perhaps you're looking for the <code>to_query</code> method?</p>\n\n<pre><code>2.3.1 :024 &gt; {\"key1\" =&gt; \"value1\", \"key2\" =&gt; \"value2\", \"key3\" =&gt; \"value3\"}.to_query\n =&gt; \"key1=value1&amp;key2=value2&amp;key3=value3\"\n</code></pre>\n\n<p>Or: </p>\n\n<pre><code>2.3.1 :029 &gt; {\"JsonData\" =&gt; {\"key1\" =&gt; \"value1\", \"key2\" =&gt; \"value2\", \"key3\" =&gt; \"value3\"}}.to_query\n =&gt; \"JsonData%5Bkey1%5D=value1&amp;JsonData%5Bkey2%5D=value2&amp;JsonData%5Bkey3%5D=value3\" \n</code></pre>\n\n<p>Or, as stated in the <a href=\"https://apidock.com/rails/Hash/to_query\" rel=\"nofollow noreferrer\">docs</a>, </p>\n\n<blockquote>\n  <p>An optional namespace can be passed to enclose key names:</p>\n</blockquote>\n\n<pre><code>2.3.1 :030 &gt; {\"key1\" =&gt; \"value1\", \"key2\" =&gt; \"value2\", \"key3\" =&gt; \"value3\"}.to_query('JsonData')\n =&gt; \"JsonData%5Bkey1%5D=value1&amp;JsonData%5Bkey2%5D=value2&amp;JsonData%5Bkey3%5D=value3\" \n</code></pre>\n\n<p>So, it could look something like</p>\n\n<pre><code>2.3.1 :031 &gt; \"&lt;URL&gt;/some_endpoint?#{{\"key1\" =&gt; \"value1\", \"key2\" =&gt; \"value2\", \"key3\" =&gt; \"value3\"}.to_query('JsonData')}\"\n =&gt; \"&lt;URL&gt;/some_endpoint?JsonData%5Bkey1%5D=value1&amp;JsonData%5Bkey2%5D=value2&amp;JsonData%5Bkey3%5D=value3\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": false, "score": 0, "last_activity_date": 1499782715, "last_edit_date": 1499782715, "creation_date": 1499782403, "answer_id": 45037037, "question_id": 45036788, "link": "https://stackoverflow.com/questions/45036788/append-a-hash-to-a-get-endpoints-query-params-in-rails/45037037#45037037", "title": "Append a hash to a GET endpoint&#39;s query params in Rails", "body": "<p>How about manually creating the string, like this:</p>\n\n<pre><code>hash = {\"key1\" =&gt; \"value1\", \"key2\" =&gt; \"value2\", \"key3\" =&gt; \"value3\"}\n\nurl = \"/some_endpoint?JsonData={\" + hash.map { |k, v| \"'#{k}' =&gt; '#{v}'\" }.join(\", \") + \"}\"\n#=&gt; \"/some_endpoint?JsonData={'key1' =&gt; 'value1', 'key2' =&gt; 'value2', 'key3' =&gt; 'value3'}\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 551, "user_id": 3260603, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/WHzXB.jpg?s=128&g=1", "display_name": "tekina", "link": "https://stackoverflow.com/users/3260603/tekina"}, "is_accepted": false, "score": 0, "last_activity_date": 1499855317, "creation_date": 1499855317, "answer_id": 45055146, "question_id": 45036788, "link": "https://stackoverflow.com/questions/45036788/append-a-hash-to-a-get-endpoints-query-params-in-rails/45055146#45055146", "title": "Append a hash to a GET endpoint&#39;s query params in Rails", "body": "<p>This is quite embarassing. Converting the hash to JSON did work eventually.</p>\n\n<p>The final URL looks like:</p>\n\n<pre><code>hash = {\"key1\" =&gt; \"value1\", \"key2\" =&gt; \"value2\", \"key3\" =&gt; \"value3\"}\n\n\"#{URL}/some_endpoint?JsonData=#{hash.to_json}\"\n</code></pre>\n"}], "owner": {"reputation": 551, "user_id": 3260603, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/WHzXB.jpg?s=128&g=1", "display_name": "tekina", "link": "https://stackoverflow.com/users/3260603/tekina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1499855317, "creation_date": 1499781849, "question_id": 45036788, "link": "https://stackoverflow.com/questions/45036788/append-a-hash-to-a-get-endpoints-query-params-in-rails", "title": "Append a hash to a GET endpoint&#39;s query params in Rails", "body": "<p>I'm integrating with a 3rd party service for which the complete URL string of a GET request needs to look something like:</p>\n\n<p><code>&lt;URL&gt;/some_endpoint?JsonData={\"key1\" =&gt; \"value1\", \"key2\" =&gt; \"value2\", \"key3\" =&gt; \"value3\"}</code></p>\n\n<p>To be clear, this request has only one param, <code>JsonData</code> and the entire hash is the corresponding value. All values inside the hash are URL-safe.</p>\n\n<p>JSON/CGI/URI encodings don't seem to help here.</p>\n\n<p>How do I not encode/add escape characters here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake"], "answers": [{"tags": [], "owner": {"reputation": 1521, "user_id": 7177640, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21ab719e4dfae3533a20da4f52e5c9e7?s=128&d=identicon&r=PG", "display_name": "nattfodd", "link": "https://stackoverflow.com/users/7177640/nattfodd"}, "is_accepted": true, "score": 1, "last_activity_date": 1499781556, "creation_date": 1499781556, "answer_id": 45036677, "question_id": 45036119, "link": "https://stackoverflow.com/questions/45036119/file-paths-for-parsing-in-ruby-using-rake/45036677#45036677", "title": "File paths for parsing in Ruby using Rake", "body": "<p>__dir_ method returns directory of the current file you're in, so this should work for you:</p>\n\n<pre><code>File.read(__dir__ + \"/../metadata.json\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 2, "last_activity_date": 1499785141, "creation_date": 1499785141, "answer_id": 45038130, "question_id": 45036119, "link": "https://stackoverflow.com/questions/45036119/file-paths-for-parsing-in-ruby-using-rake/45038130#45038130", "title": "File paths for parsing in Ruby using Rake", "body": "<p>Additionally to get the \"full path\" you can use <code>File::expand_path</code> </p>\n\n<blockquote>\n  <p>Converts a pathname to an absolute pathname. Relative paths are referenced from the current working directory of the process unless dir_string is given, in which case it will be used as the starting point. The given pathname may start with a \u201c~\u201d, which expands to the process owner\u2019s home directory (the environment variable HOME must be set correctly). \u201c~user\u201d expands to the named user\u2019s home directory.</p>\n</blockquote>\n\n<p>For example:</p>\n\n<pre><code>File.expand_path('../metadata.json',__FILE__)\n</code></pre>\n\n<p>Here it will first resolve the parent directory of <code>__FILE__</code> which the current file from which it is called e.g. <code>Rakefile</code> then it will use the relative path passed as <code>../metadata.json</code> to find the specific file requested and resolve the absolute path</p>\n"}], "owner": {"reputation": 53, "user_id": 7494489, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2093aafe00fa2f80741c896bb6410b1d?s=128&d=identicon&r=PG&f=1", "display_name": "DevLuke", "link": "https://stackoverflow.com/users/7494489/devluke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 587, "favorite_count": 0, "accepted_answer_id": 45036677, "answer_count": 2, "score": -1, "last_activity_date": 1499785141, "creation_date": 1499780160, "question_id": 45036119, "link": "https://stackoverflow.com/questions/45036119/file-paths-for-parsing-in-ruby-using-rake", "title": "File paths for parsing in Ruby using Rake", "body": "<p>So I'm writing a test that locates a particular file <code>metadata.json</code> to be parsed to Ruby's JSON gem to be tested using RSpec. My directory hierarchy looks like this:</p>\n\n<pre><code>|_tests\n   - metadata.json\n   - Rakefile\n   - Gemfile\n   |_specs\n     -tagging_specs\n</code></pre>\n\n<p>The code was a simple file read passing in the relative path, so: </p>\n\n<pre><code>print \"Getting values from metadata.json file\"\n#Path to metadata.json file\nmetadata = File.read('../metadata.json')\nvalues = JSON.parse(metadata)\n</code></pre>\n\n<p>Which worked fine when invoked directly using the rspec command. But as I plan to right multiple tests I opted to use Rake to manage my specs. Since doing this however I get an error and have to pass in a full directory path such as <code>home/work/projects/tests/metadata.json</code></p>\n\n<p>The error message I get is when using ../metadata.json with Rake is:</p>\n\n<pre><code>Failure/Error: metadata = File.read('../metadata.json')\n\nErrno::ENOENT:\nNo such file or directory @ rb_sysopen - ../metadata.json\n./spec_tests/tagging_standards_spec.rb:7:in 'read'\n./spec_tests/tagging_standards_spec.rb:7:in 'block in &lt;top (required)&gt;'\n./spec_tests/tagging_standards_spec.rb:3:in '&lt;top (required)&gt;'\nNo examples found.\n\nFinished in 0.00072 seconds (files took 0.17953 seconds to load)\n0 examples, 0 failures, 1 error occurred outside of examples\n</code></pre>\n\n<p>This woukdnt be a problem if it was just me using these tests. However they're meant to provide the base for others to do their work, so their directory paths will of course be different. So is there a way in Ruby or Rake to make this more dynamic and reusable? </p>\n"}]