[{"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1470271260, "post_id": 38755411, "comment_id": 64885229, "body": "Hi and welcome to Stack Overflow. Here we expect you to have a go at it yourself, then show us the code you have (even/especially if it&#39;s not working). ie we&#39;re not going to write your code for you, but if you have a go at it, we can show you how to adapt it to fit your needs... In this case it&#39;d help if you showed us what you actually need (eg how you expect these to be linked)... perhaps show us some pseudo-code of how you&#39;d use them once they&#39;re linked? But you definitely need to have a go at the linkage yourself first."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1470271333, "post_id": 38755411, "comment_id": 64885246, "body": "You might also find the Rails Guide on Associations to be helpful: <a href=\"http://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/association_basics.html</a> To give you a good grounding in the ways that Active Records can be linked to one another. I suspect you may be interested in the parts on <code>has_many :through</code>"}, {"owner": {"reputation": 3041, "user_id": 5012854, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh5.googleusercontent.com/-3yud0cij0J8/AAAAAAAAAAI/AAAAAAAAA7c/KPT7qK4SBFc/photo.jpg?sz=128", "display_name": "davideghz", "link": "https://stackoverflow.com/users/5012854/davideghz"}, "edited": false, "score": 0, "creation_date": 1470284071, "post_id": 38755411, "comment_id": 64889148, "body": "can you pls add more details about the relationships between <code>Firm</code> and <code>Revenue</code>? Is it a 1:1, 1:n or n:n relationship? What does unique_id refer to?"}, {"owner": {"reputation": 348, "user_id": 4844180, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2ee458e41d901755b961a5bb62bc3fa0?s=128&d=identicon&r=PG&f=1", "display_name": "richiepop2", "link": "https://stackoverflow.com/users/4844180/richiepop2"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1470316326, "post_id": 38755411, "comment_id": 64907746, "body": "@TarynEast, thanks for your response.  I looked at Rails Guide, Rails Cast, youtube and stackoverflow and couldn&#39;t find information to help me with my problem.  Yes, I know that I can join the tables via different associations, but my questions is: how do I publish the joined table in my views?  This is where I&#39;m having a disconnect.  For example, for the firm model, if I did a: has_many: revenues, through:users and did the same for revenue: has_many: firsms, through:users, how do I take this association and link the two in a one table?"}, {"owner": {"reputation": 348, "user_id": 4844180, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2ee458e41d901755b961a5bb62bc3fa0?s=128&d=identicon&r=PG&f=1", "display_name": "richiepop2", "link": "https://stackoverflow.com/users/4844180/richiepop2"}, "reply_to_user": {"reputation": 3041, "user_id": 5012854, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh5.googleusercontent.com/-3yud0cij0J8/AAAAAAAAAAI/AAAAAAAAA7c/KPT7qK4SBFc/photo.jpg?sz=128", "display_name": "davideghz", "link": "https://stackoverflow.com/users/5012854/davideghz"}, "edited": false, "score": 0, "creation_date": 1470317155, "post_id": 38755411, "comment_id": 64908387, "body": "@davideghz, there is a 1:1 relationship between firm to revenue, and revenue to firm.  The unique_id is a an integer that can associate the various tables.  For example, in the firm model, unique_id:1 will represent Company A, and in the revenue model, unique_id: 1 will represent Company A&#39;s revenue and profit.  Hope this helps."}], "answers": [{"comments": [{"owner": {"reputation": 348, "user_id": 4844180, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2ee458e41d901755b961a5bb62bc3fa0?s=128&d=identicon&r=PG&f=1", "display_name": "richiepop2", "link": "https://stackoverflow.com/users/4844180/richiepop2"}, "edited": false, "score": 0, "creation_date": 1470333143, "post_id": 38770359, "comment_id": 64919914, "body": "thanks for your response, @davideghz.  Would the revenue&#39;s firm_id then correspond to the firm&#39;s unique_id?  At some point there has to be a common connection between the two tables, which is why I put a unique ID in each table.  Am I understanding this correctly?  Sorry for the naivete, and I appreciate your patience. I never built a multi-table site before.  It might be also be important to note, that the user will not create data.  All the tables&#39; data will be uploaded and will not be updated or destroyed by the user."}, {"owner": {"reputation": 3041, "user_id": 5012854, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh5.googleusercontent.com/-3yud0cij0J8/AAAAAAAAAAI/AAAAAAAAA7c/KPT7qK4SBFc/photo.jpg?sz=128", "display_name": "davideghz", "link": "https://stackoverflow.com/users/5012854/davideghz"}, "reply_to_user": {"reputation": 348, "user_id": 4844180, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2ee458e41d901755b961a5bb62bc3fa0?s=128&d=identicon&r=PG&f=1", "display_name": "richiepop2", "link": "https://stackoverflow.com/users/4844180/richiepop2"}, "edited": false, "score": 1, "creation_date": 1470334773, "post_id": 38770359, "comment_id": 64920793, "body": "when you create a table associated to a Model, Rails will automatically create a column <code>id</code> which serves as primary key for the table. When you create a dependent Model (in this case Revenue) and you add <code>t.belongs_to :firm, index: true</code> in the migration, Rails will add a <code>firm_id</code> in revenues table which serves as foreign key.  Note that I just edit my answer since there was an error in migrations :)"}], "tags": [], "owner": {"reputation": 3041, "user_id": 5012854, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh5.googleusercontent.com/-3yud0cij0J8/AAAAAAAAAAI/AAAAAAAAA7c/KPT7qK4SBFc/photo.jpg?sz=128", "display_name": "davideghz", "link": "https://stackoverflow.com/users/5012854/davideghz"}, "is_accepted": true, "score": 2, "last_activity_date": 1470334694, "last_edit_date": 1470334694, "creation_date": 1470321304, "answer_id": 38770359, "question_id": 38755411, "link": "https://stackoverflow.com/questions/38755411/join-tables-rails-postgresql/38770359#38770359", "title": "join tables rails postgresql", "body": "<p>As per your question and comments it looks right to me to set up relationships as follow:</p>\n\n<p>A user <em>has_many</em> firms (companies). A firm <em>has_on</em>e revenue. A user <em>has_many</em> revenues <em>through</em> firms.</p>\n\n<pre><code># app/models/user.rb\nclass User &lt; ActiveRecord::Base\n  has_many :firms\n  has_many :revenues, through :firms\nend\n\n# app/models/firm.rb\nclass Firm &lt; ActiveRecord::Base\n  has_one :revenue\nend\n\n# app/models/revenue.rb\nclass Revenue &lt; ActiveRecord::Base\n  belongs_to :firm\nend\n</code></pre>\n\n<p>Instead of storing a <code>unique_id</code> in both <code>firms</code> and <code>revenues</code> tables, it would be better to use a foreign_key in revenues, like <code>firm_id</code>.</p>\n\n<p>The corresponding migrations are:</p>\n\n<pre><code>class CreateFirm &lt; ActiveRecord::Migration\n  def change\n    create_table :firm do |t|\n      t.string :name\n      t.string :state\n      t.string :city\n\n      t.timestamps null: false\n    end\n  end\nend\n\nclass CreateRevenue &lt; ActiveRecord::Migration\n  def change     \n    create_table :firm do |t|\n      t.belongs_to :firm, index: true\n      t.integer :revenue\n      t.integer :profit\n\n      t.timestamps null: false\n    end\n  end\nend\n</code></pre>\n\n<p>This will enable you to use, for example, <code>firm.revenue.profit</code> to display the value of <code>profit</code> in the <code>app/views/firms/show.html.erb</code> view.</p>\n\n<p>Looking at your models and migrations syntax it seems you are not using Rails 5. You can find Rails 4.2 docs about the <code>has_one</code> relationship <a href=\"http://guides.rubyonrails.org/v4.2/association_basics.html#the-has-one-association\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 348, "user_id": 4844180, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2ee458e41d901755b961a5bb62bc3fa0?s=128&d=identicon&r=PG&f=1", "display_name": "richiepop2", "link": "https://stackoverflow.com/users/4844180/richiepop2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 38770359, "answer_count": 1, "score": 1, "last_activity_date": 1470334694, "creation_date": 1470268334, "question_id": 38755411, "link": "https://stackoverflow.com/questions/38755411/join-tables-rails-postgresql", "title": "join tables rails postgresql", "body": "<p>I have three models: user, firm and revenue. I'd like to join the firm and revenue models, in order to publish the joined model results. Could someone please point me in the right direction on how to go about joining these tables and publish the results?  Note, firm and revenue model can be joined through a unique_id number.  Here is some of my code:  </p>\n\n<p><strong>Revenue Model</strong></p>\n\n<pre><code>class Revenue &lt; ActiveRecord::Base\n  belongs_to :user\n\n  def self.import(file)\n  CSV.foreach(file.path, headers: true) do |row|\n    Revenue.create! row.to_hash\n   end \n  end\n\nend\n</code></pre>\n\n<p><strong>Firm Model</strong></p>\n\n<pre><code>class Firm &lt; ActiveRecord::Base\n  belongs_to :user\n\n  def self.import(file)\n  CSV.foreach(file.path, headers: true) do |row|\n    Firm.create! row.to_hash\n   end \n  end\n\nend\n</code></pre>\n\n<p><strong>User Model</strong></p>\n\n<p>class User &lt; ActiveRecord::Base</p>\n\n<pre><code>  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  before_save { self.email = email.downcase }\n\n  has_many :revenues\n  has_many :firms\n\n\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable,\n         :session_limitable, :confirmable\n\n  validates :name, :lastname, :industry, :company, :title, :address, :state, :city, :zip, presence: true\n  validates :phone, presence: true, length: { maximum: 11 }\n\n\nend\n</code></pre>\n\n<p><strong>Revenue DB</strong></p>\n\n<pre><code>class CreateRevenues &lt; ActiveRecord::Migration\n  def change\n    create_table :revenues do |t|\n      t.integer :unique_id\n      t.integer :revenue\n      t.integer :profit\n      t.references :user, index: true, foreign_key: true\n\n      t.timestamps null: false\n    end\n  end\nend\n</code></pre>\n\n<p><strong>Firm DB</strong></p>\n\n<pre><code>class CreateFirms &lt; ActiveRecord::Migration\n  def change\n    create_table :firms do |t|\n      t.integer :unique_id\n      t.string :name\n      t.string :state\n      t.string :city\n      t.references :user, index: true, foreign_key: true\n\n      t.timestamps null: false\n    end\n  end\nend\n</code></pre>\n\n<p><strong>View</strong></p>\n\n<pre><code>&lt;h2&gt;Firm Data&lt;/h2&gt;\n\n    &lt;body&gt;\n    &lt;table&gt;\n      &lt;tr&gt;\n         &lt;th&gt;unique_id&lt;/th&gt;\n         &lt;th&gt;name&lt;/th&gt;\n         &lt;th&gt;state&lt;/th&gt;\n         &lt;th&gt;city&lt;/th&gt;\n    &lt;/tr&gt;\n\n      &lt;body&gt;\n        &lt;% @firms.each do |firm| %&gt;\n        &lt;tr&gt;\n            &lt;td&gt;&lt;%= firm.unique_id %&gt; &lt;/td&gt;\n             &lt;td&gt;&lt;%= firm.name %&gt; &lt;/td&gt;\n             &lt;td&gt;&lt;%= firm.state %&gt; &lt;/td&gt;\n             &lt;td&gt;&lt;%= firm.city %&gt; &lt;/td&gt;\n        &lt;tr&gt;\n        &lt;% end %&gt;\n        &lt;/table&gt;\n      &lt;/body&gt;\n\n    &lt;h2&gt;Revenue Data&lt;/h2&gt;\n\n    &lt;body&gt;\n    &lt;table&gt;\n      &lt;tr&gt;\n         &lt;th&gt;unique_id&lt;/th&gt;\n         &lt;th&gt;revenue&lt;/th&gt;\n         &lt;th&gt;profit&lt;/th&gt;\n    &lt;/tr&gt;\n\n      &lt;body&gt;\n        &lt;% @revenues.each do |rev| %&gt;\n        &lt;tr&gt;\n            &lt;td&gt;&lt;%= rev.unique_id %&gt; &lt;/td&gt;\n             &lt;td&gt;&lt;%= rev.revenue %&gt; &lt;/td&gt;\n             &lt;td&gt;&lt;%= rev.profit %&gt; &lt;/td&gt;\n        &lt;tr&gt;\n        &lt;% end %&gt;\n        &lt;/table&gt;\n      &lt;/body&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 4672260, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-awlhgZ71F5o/AAAAAAAAAAI/AAAAAAAAAcU/bmQeO8tD51g/photo.jpg?sz=128", "display_name": "Electric Skeleton", "link": "https://stackoverflow.com/users/4672260/electric-skeleton"}, "edited": false, "score": 0, "creation_date": 1470268354, "post_id": 38755273, "comment_id": 64884498, "body": "It seems to have worked, but how would I check inside the MySQL table to make sure it entered the data inside?  I&#39;ve done this <code>mysql&gt; SELECT * FROM U; Empty set (0.00 sec)</code>  I don&#39;t think it actually saved it."}, {"owner": {"reputation": 185, "user_id": 4789427, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10200544047161494/picture?type=large", "display_name": "Jarrel09", "link": "https://stackoverflow.com/users/4789427/jarrel09"}, "reply_to_user": {"reputation": 55, "user_id": 4672260, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-awlhgZ71F5o/AAAAAAAAAAI/AAAAAAAAAcU/bmQeO8tD51g/photo.jpg?sz=128", "display_name": "Electric Skeleton", "link": "https://stackoverflow.com/users/4672260/electric-skeleton"}, "edited": false, "score": 0, "creation_date": 1470269236, "post_id": 38755273, "comment_id": 64884702, "body": "the best route is to use the rails console. Literally type &#39;rails console&#39; into the command line or use &#39;rails console --sandbox&#39; if you don&#39;t want to make any changes. From there simply type &#39;U.all&#39;"}, {"owner": {"reputation": 55, "user_id": 4672260, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-awlhgZ71F5o/AAAAAAAAAAI/AAAAAAAAAcU/bmQeO8tD51g/photo.jpg?sz=128", "display_name": "Electric Skeleton", "link": "https://stackoverflow.com/users/4672260/electric-skeleton"}, "edited": false, "score": 0, "creation_date": 1470631480, "post_id": 38755273, "comment_id": 65009370, "body": "I have done some fixes to make it so it appears in the rails console, I got the email working but not the password.  It says <code>undefined method </code>permit&#39; for &quot;password i typed&quot;:String Did you mean? print<code>.  It highlighted this </code>params.require(:u).permit(:id, :email, :password, :created_at, :updated_at)`"}, {"owner": {"reputation": 185, "user_id": 4789427, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10200544047161494/picture?type=large", "display_name": "Jarrel09", "link": "https://stackoverflow.com/users/4789427/jarrel09"}, "reply_to_user": {"reputation": 55, "user_id": 4672260, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-awlhgZ71F5o/AAAAAAAAAAI/AAAAAAAAAcU/bmQeO8tD51g/photo.jpg?sz=128", "display_name": "Electric Skeleton", "link": "https://stackoverflow.com/users/4672260/electric-skeleton"}, "edited": false, "score": 0, "creation_date": 1470695696, "post_id": 38755273, "comment_id": 65044676, "body": "I can&#39;t understand what you&#39;ve written. Can you edit it and reply?"}, {"owner": {"reputation": 185, "user_id": 4789427, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10200544047161494/picture?type=large", "display_name": "Jarrel09", "link": "https://stackoverflow.com/users/4789427/jarrel09"}, "reply_to_user": {"reputation": 55, "user_id": 4672260, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-awlhgZ71F5o/AAAAAAAAAAI/AAAAAAAAAcU/bmQeO8tD51g/photo.jpg?sz=128", "display_name": "Electric Skeleton", "link": "https://stackoverflow.com/users/4672260/electric-skeleton"}, "edited": false, "score": 0, "creation_date": 1470850022, "post_id": 38755273, "comment_id": 65120861, "body": "rewrite it in a new comment for me"}], "tags": [], "owner": {"reputation": 185, "user_id": 4789427, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10200544047161494/picture?type=large", "display_name": "Jarrel09", "link": "https://stackoverflow.com/users/4789427/jarrel09"}, "is_accepted": true, "score": 1, "last_activity_date": 1470267407, "creation_date": 1470267407, "answer_id": 38755273, "question_id": 38755225, "link": "https://stackoverflow.com/questions/38755225/uninitialized-constant-ucontrolleruser-param/38755273#38755273", "title": "uninitialized constant UController::User_param", "body": "<p>In Rails you don't capitalize methods, only constants and classes. change <code>User_param</code> to <code>user_params</code> along with the method and that should work. I made params plural since it is clearer and easier to understand</p>\n\n<p>Also, change the user_param method to this:</p>\n\n<pre><code>def user_params\n  params.require(:u).permit(:id, :email, :password, :created_at, :updated_at)\nend\n</code></pre>\n\n<p>The <code>.require(:u)</code> doesn't need to be plural as you had it.</p>\n"}], "owner": {"reputation": 55, "user_id": 4672260, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-awlhgZ71F5o/AAAAAAAAAAI/AAAAAAAAAcU/bmQeO8tD51g/photo.jpg?sz=128", "display_name": "Electric Skeleton", "link": "https://stackoverflow.com/users/4672260/electric-skeleton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "accepted_answer_id": 38755273, "answer_count": 1, "score": 0, "last_activity_date": 1470267407, "creation_date": 1470267019, "question_id": 38755225, "link": "https://stackoverflow.com/questions/38755225/uninitialized-constant-ucontrolleruser-param", "title": "uninitialized constant UController::User_param", "body": "<p>I am making a basic account setup and to try to learn how the database stuff works. I have been running into this error constantly, and I have no idea how to make it disappear.  I have my stuff named as U, so the URL will be easier to type a username like Reddit has it <code>example.com/u/username</code></p>\n\n<p>The Error is <code>uninitialized constant UController::User_param</code></p>\n\n<p>It highlights this code: <code>@user = U.new(User_param)</code></p>\n\n<p><strong>Controller:</strong></p>\n\n<pre><code>class UController &lt; ApplicationController\n  def index\n    @users = U.all\n  end\n\n  def show\n  end\n\n  def create\n    @user = U.new(User_param)\n\n    if @user.save\n      redirect_to :action =&gt; 'list'\n    else\n      @user = U.all\n      render :action =&gt; 'new'\n    end\n  end\n\n  def User_param\n    params.require(:Us).permit(:id, :email, :password, :created_at, :updated_at)\n  end\n\n  def new\n    @user = U.new\n  end\n\n  def edit\n  end\nend\n</code></pre>\n\n<p><strong>Routes:</strong>\n<code>resources :u</code></p>\n\n<p><strong>U Model:</strong></p>\n\n<pre><code>class U &lt; ActiveRecord::Base\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "boolean", "submit", "checkmark"], "answers": [{"tags": [], "owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "is_accepted": false, "score": 0, "last_activity_date": 1470272284, "creation_date": 1470272284, "answer_id": 38755908, "question_id": 38755102, "link": "https://stackoverflow.com/questions/38755102/how-to-create-accept-decline-buttons-with-boolean/38755908#38755908", "title": "How to Create Accept/Decline Buttons with Boolean?", "body": "<p>In your controller... check the value of the submit-button - which will be either \"accept\" or \"decline\" and set the boolean based on that.</p>\n"}, {"tags": [], "owner": {"reputation": 1827, "user_id": 1362329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QRckP.jpg?s=128&g=1", "display_name": "neydroid", "link": "https://stackoverflow.com/users/1362329/neydroid"}, "is_accepted": true, "score": 3, "last_activity_date": 1470273085, "creation_date": 1470273085, "answer_id": 38756992, "question_id": 38755102, "link": "https://stackoverflow.com/questions/38755102/how-to-create-accept-decline-buttons-with-boolean/38756992#38756992", "title": "How to Create Accept/Decline Buttons with Boolean?", "body": "<p>You can use f.button to pass a param that you'll use in the controller:</p>\n\n<p>In your view:</p>\n\n<pre><code>&lt;%= f.button \"Accept\", name: \"button_action\", value: \"accept\" %&gt;\n&lt;%= f.button \"Decline\", name: \"button_action\", value: \"decline\" %&gt;\n</code></pre>\n\n<p>In your controller use the param value:</p>\n\n<pre><code>if params['button_action'] == 'accept'\nelse\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "is_accepted": false, "score": 0, "last_activity_date": 1470273974, "creation_date": 1470273974, "answer_id": 38757074, "question_id": 38755102, "link": "https://stackoverflow.com/questions/38755102/how-to-create-accept-decline-buttons-with-boolean/38757074#38757074", "title": "How to Create Accept/Decline Buttons with Boolean?", "body": "<p><strong>This is my experience</strong></p>\n\n<p>When you make check box and did not set any value it autometically send boolean value. That means true or false. When Check box is checked value will be true or one and if box is unckecked then value will be false or 0.</p>\n\n<p>Hope It helps.</p>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 464, "favorite_count": 0, "accepted_answer_id": 38756992, "answer_count": 3, "score": 2, "last_activity_date": 1470273974, "creation_date": 1470266077, "question_id": 38755102, "link": "https://stackoverflow.com/questions/38755102/how-to-create-accept-decline-buttons-with-boolean", "title": "How to Create Accept/Decline Buttons with Boolean?", "body": "<p>I have accept/decline as a switch:</p>\n\n<pre><code>&lt;%= form_for @dueler do |f| %&gt;\n  &lt;%= f.check_box :accept, class: 'someclass', :data =&gt; { 'on-text'=&gt;'Decline', 'off-text'=&gt;'Accept'} %&gt; \n  &lt;script&gt;\n    $(\"[class='someclass']\").bootstrapSwitch();\n  &lt;/script&gt;\n  &lt;%= button_tag(type: 'submit')  do %&gt;\n    Save\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>But I'm trying to make them into two separate buttons. If a user clicks one, how to make it where it would automatically submit with the appropriate <code>:accept</code> value:</p>\n\n<pre><code>&lt;%= button_tag(type: 'submit')  do %&gt;\n  Accept # submits &amp; makes :accept true\n&lt;% end %&gt;&lt;br&gt;&lt;br&gt;\n\n&lt;%= button_tag(type: 'submit')  do %&gt;\n  Decline # submits &amp; makes :accept false\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "windows", "server"], "comments": [{"owner": {"reputation": 1048, "user_id": 6166821, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LpwuPY2Vfjw/AAAAAAAAAAI/AAAAAAAADS0/aT3BFBVyQEQ/photo.jpg?sz=128", "display_name": "Hasmukh Rathod", "link": "https://stackoverflow.com/users/6166821/hasmukh-rathod"}, "edited": false, "score": 0, "creation_date": 1470270089, "post_id": 38754934, "comment_id": 64884945, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/17643897/cannot-load-such-file-sqlite3-sqlite3-native-loaderror-on-ruby-on-rails\">cannot load such file -- sqlite3/sqlite3_native (LoadError) on ruby on rails</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6674390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a9bdc5b27c61b0d6855cbc3cd676da9?s=128&d=identicon&r=PG&f=1", "display_name": "mishako", "link": "https://stackoverflow.com/users/6674390/mishako"}, "edited": false, "score": 0, "creation_date": 1470318564, "post_id": 38757463, "comment_id": 64909591, "body": "Unfortunately, that also didn&#39;t work. I tried your solution and the server started normally, but its homepage (e.g. localhost:3000) said following: &quot;Could not load &#39;active_record/connection_adapters/sqlite3_adapter&#39;. Make sure that the adapter in config/database.yml is valid. If you use an adapter other than &#39;mysql&#39;, &#39;mysql2&#39;, &#39;postgresql&#39; or &#39;sqlite3&#39; add the necessary adapter gem to the Gemfile.&quot;"}, {"owner": {"reputation": 329, "user_id": 1919995, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/59f2e666102af47b6d8e989f7f435327?s=128&d=identicon&r=PG", "display_name": "Muhammad Yaseen", "link": "https://stackoverflow.com/users/1919995/muhammad-yaseen"}, "reply_to_user": {"reputation": 1, "user_id": 6674390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a9bdc5b27c61b0d6855cbc3cd676da9?s=128&d=identicon&r=PG&f=1", "display_name": "mishako", "link": "https://stackoverflow.com/users/6674390/mishako"}, "edited": false, "score": 0, "creation_date": 1470319163, "post_id": 38757463, "comment_id": 64910045, "body": "Make sure that you have gem &#39;sqlite3&#39; in your Gemfile."}], "tags": [], "owner": {"reputation": 329, "user_id": 1919995, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/59f2e666102af47b6d8e989f7f435327?s=128&d=identicon&r=PG", "display_name": "Muhammad Yaseen", "link": "https://stackoverflow.com/users/1919995/muhammad-yaseen"}, "is_accepted": false, "score": 1, "last_activity_date": 1470319643, "last_edit_date": 1470319643, "creation_date": 1470277001, "answer_id": 38757463, "question_id": 38754934, "link": "https://stackoverflow.com/questions/38754934/error-when-starting-the-rails-server-on-windows/38757463#38757463", "title": "Error when starting the Rails server on Windows", "body": "<p>Find your sqlite3 gemspec file. One example is</p>\n\n<pre><code>`/usr/local/share`/gem/specifications/sqlite3-1.3.7.gemspec`\n</code></pre>\n\n<p>Windows: <code>C:\\Ruby21\\lib\\ruby\\gems\\2.1.0\\specifications.</code></p>\n\n<p>You should adjust according with your Rubygem path and sqlite3 version. Edit the file above and look for the following line</p>\n\n<pre><code>s.require_paths=[\"lib\"]\n</code></pre>\n\n<p>change it to</p>\n\n<pre><code>s.require_paths= [\"lib/sqlite3_native\"]\n</code></pre>\n\n<p>Hope that helps!!!</p>\n"}], "owner": {"reputation": 1, "user_id": 6674390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a9bdc5b27c61b0d6855cbc3cd676da9?s=128&d=identicon&r=PG&f=1", "display_name": "mishako", "link": "https://stackoverflow.com/users/6674390/mishako"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 439, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470319643, "creation_date": 1470264989, "question_id": 38754934, "link": "https://stackoverflow.com/questions/38754934/error-when-starting-the-rails-server-on-windows", "title": "Error when starting the Rails server on Windows", "body": "<p>Right after launching <code>rails server</code> command Ruby terminal doesn't start the server and writes following:</p>\n\n<pre><code>C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/sqlite3-1.3.11-x64-mingw32/lib/sqlite3.rb:6:in `require': cannot load such file -- sqlite3/sqlite3_native (LoadError)\n    from C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/sqlite3-1.3.11-x64-mingw32/lib/sqlite3.rb:6:in `rescue in &lt;top (required)&gt;'\n    from C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/sqlite3-1.3.11-x64-mingw32/lib/sqlite3.rb:2:in `&lt;top (required)&gt;'\n    from C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/bundler-1.12.5/lib/bundler/runtime.rb:86:in `require'\n    from C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/bundler-1.12.5/lib/bundler/runtime.rb:86:in `block (2 levels) in require'\n    from C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/bundler-1.12.5/lib/bundler/runtime.rb:81:in `each'\n    from C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/bundler-1.12.5/lib/bundler/runtime.rb:81:in `block in require'\n    from C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/bundler-1.12.5/lib/bundler/runtime.rb:70:in `each'\n    from C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/bundler-1.12.5/lib/bundler/runtime.rb:70:in `require'\n    from C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/bundler-1.12.5/lib/bundler.rb:102:in `require'\n    from C:/Sites/testing/config/application.rb:7:in `&lt;top (required)&gt;'\n    from C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/railties-5.0.0/lib/rails/commands/commands_tasks.rb:88:in `require'\n    from C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/railties-5.0.0/lib/rails/commands/commands_tasks.rb:88:in `block in server'\n    from C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/railties-5.0.0/lib/rails/commands/commands_tasks.rb:85:in `tap'\n    from C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/railties-5.0.0/lib/rails/commands/commands_tasks.rb:85:in `server'\n    from C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/railties-5.0.0/lib/rails/commands/commands_tasks.rb:49:in `run_command!'\n    from C:/tools/ruby23/lib/ruby/gems/2.3.0/gems/railties-5.0.0/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\n    from bin/rails:4:in `require'\n    from bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>When looking for answers to similar question, I haven't found any working solution. I can say that:</p>\n\n<ol>\n<li>Application is created in directory, in which path are only English symbols.</li>\n<li>I tried to fix problem using:\n<code>gem cleanup\nbundle install</code></li>\n<li>I tried to start the server using: <code>bundle exec rails server</code>.</li>\n<li>I tried to delete the gems which contain \"problem\" in the gemfile.</li>\n<li>Also tried to fully reuninstall Ruby and Rails with all gems.</li>\n</ol>\n\n<p>All that didn't help, so I would really appreciate for working in my case solution!</p>\n\n<p>P.S. I am working on: Windows 8.1 (64-bit), Ruby 2.3.0, Rails 5.0.0</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 5182778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe165ff91015729c26d1f462d2e9c678?s=128&d=identicon&r=PG&f=1", "display_name": "asd", "link": "https://stackoverflow.com/users/5182778/asd"}, "edited": false, "score": 0, "creation_date": 1470263828, "post_id": 38754700, "comment_id": 64883259, "body": "Well, that was simple. Thank you."}, {"owner": {"reputation": 1507, "user_id": 2833161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2iuKF.jpg?s=128&g=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/2833161/owen"}, "edited": false, "score": 0, "creation_date": 1470276260, "post_id": 38754700, "comment_id": 64887228, "body": "Alternatively you could override <code>to_s</code> so the representation of the post is its content."}], "tags": [], "owner": {"reputation": 1150, "user_id": 5213790, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JsYim.jpg?s=128&g=1", "display_name": "mrvncaragay", "link": "https://stackoverflow.com/users/5213790/mrvncaragay"}, "is_accepted": true, "score": 2, "last_activity_date": 1470263412, "creation_date": 1470263412, "answer_id": 38754700, "question_id": 38754684, "link": "https://stackoverflow.com/questions/38754684/michael-hartl-chapter-2/38754700#38754700", "title": "Michael Hartl - Chapter 2", "body": "<p><code>&lt;%= @user.microposts.first %&gt;</code> returns a single post object. to render content do this </p>\n\n<p><code>&lt;%= @user.microposts.first.content %&gt;</code> </p>\n"}], "owner": {"reputation": 151, "user_id": 5182778, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe165ff91015729c26d1f462d2e9c678?s=128&d=identicon&r=PG&f=1", "display_name": "asd", "link": "https://stackoverflow.com/users/5182778/asd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 38754700, "answer_count": 1, "score": 0, "last_activity_date": 1470263412, "creation_date": 1470263308, "question_id": 38754684, "link": "https://stackoverflow.com/questions/38754684/michael-hartl-chapter-2", "title": "Michael Hartl - Chapter 2", "body": "<p>I've been going through Chapter 2 and it's been going well, except that he's asked the reader to show the users first micropost, which seems simple. You can see the Chapter <a href=\"https://3rd-edition.railstutorial.org/book/toy_app\" rel=\"nofollow\">here</a>.</p>\n\n<p>In my <code>show.html.erb</code> I've added the following lines:</p>\n\n<pre><code>&lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Name:&lt;/strong&gt;\n  &lt;%= @user.name %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Email:&lt;/strong&gt;\n  &lt;%= @user.email %&gt;\n&lt;/p\n\n&lt;p&gt;\n  &lt;strong&gt;Post:&lt;/strong&gt;\n  &lt;%= @user.microposts.first %&gt;\n&lt;/p&gt;\n\n&lt;%= link_to 'Edit', edi&lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\n</code></pre>\n\n<p>But all I see at /users/1 is \"Post: #\".</p>\n\n<p>Any idea what I'm doing wrong?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1470263032, "post_id": 38754514, "comment_id": 64883020, "body": "<code>#{x}</code> and <code>x</code> are generally equivalent <i>if</i> <code>x</code> is a string value. For others it is roughly equivalent to <code>x.to_s</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1470263170, "post_id": 38754514, "comment_id": 64883060, "body": "Also not clear why you have a <code>begin...end</code> structure in the middle there with no particular purpose."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1470263234, "post_id": 38754514, "comment_id": 64883080, "body": "Is it possible you have a file with the name of the directory you&#39;re trying to create?"}, {"owner": {"reputation": 1211, "user_id": 130639, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ab7aaf4e9821bbdbd726f3a6e920e5da?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/130639/jim"}, "edited": false, "score": 0, "creation_date": 1470263409, "post_id": 38754514, "comment_id": 64883130, "body": "I&#39;m also not sure why you&#39;re using a while loop here when something like: <code>IO.readlines(filename).chomp.each {|currentusername| ... }</code> might be cleaner. Also, using <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/fileutils/rdoc/FileUtils.html#method-c-mkdir\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.0.0/libdoc/fileutils/rdoc/&hellip;</a> it seems you can enable a verbose option. Maybe that will yield some info for the failure."}, {"owner": {"reputation": 11, "user_id": 4343445, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6c2_uPd-aUw/AAAAAAAAAAI/AAAAAAAAAGE/5gU76ID_EaA/photo.jpg?sz=128", "display_name": "dr.watkins9", "link": "https://stackoverflow.com/users/4343445/dr-watkins9"}, "reply_to_user": {"reputation": 1211, "user_id": 130639, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ab7aaf4e9821bbdbd726f3a6e920e5da?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/130639/jim"}, "edited": false, "score": 1, "creation_date": 1470266873, "post_id": 38754514, "comment_id": 64884143, "body": "@Jim I read your comment and was immediately able to solve my problem. I googled Errno::EINVAL and found out that I needed to add .chomps to the end of IO.readlines(filename). Apparently there is some sort of special character that .chomps removes? Also, I&#39;m fairly new to Ruby, there was a little bit of copy &amp; paste going on here, so I&#39;m sure I don&#39;t have the most efficient code. I&#39;ll look into .each, I am not familiar with it yet."}, {"owner": {"reputation": 1211, "user_id": 130639, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ab7aaf4e9821bbdbd726f3a6e920e5da?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/130639/jim"}, "edited": false, "score": 0, "creation_date": 1470275354, "post_id": 38754514, "comment_id": 64887026, "body": "Yup, chomp&#39;ing removes the linefeed on the end of the line (string). So that makes sense now that it wasn&#39;t working for you."}], "answers": [{"tags": [], "owner": {"reputation": 1211, "user_id": 130639, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ab7aaf4e9821bbdbd726f3a6e920e5da?s=128&d=identicon&r=PG", "display_name": "Jim", "link": "https://stackoverflow.com/users/130639/jim"}, "is_accepted": false, "score": 0, "last_activity_date": 1470275633, "creation_date": 1470275633, "answer_id": 38757266, "question_id": 38754514, "link": "https://stackoverflow.com/questions/38754514/ruby-fileutils-mkdir-error/38757266#38757266", "title": "Ruby FileUtils.mkdir error", "body": "<p>So, something like this should work:</p>\n\n<pre><code>require 'fileutils'\n\nfilename = \"C:/Users/drwat/Desktop/somefolder/accountusernames.txt\"\ntimes    = IO.readlines(filename).size\ncounter  = 0\npassword = \"changethis\"\n\noriginalFolder = \"Release/.\"\n\nIO.readlines(filename).chomp.each \\\n{|currentusername|\n    FileUtils.mkdir currentusername\n    ...\n}\n</code></pre>\n\n<p>As I mentioned before, it's almost always a good idea to chomp() data in a file to remove that carriage return/linefeed from the source data.</p>\n"}], "owner": {"reputation": 11, "user_id": 4343445, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6c2_uPd-aUw/AAAAAAAAAAI/AAAAAAAAAGE/5gU76ID_EaA/photo.jpg?sz=128", "display_name": "dr.watkins9", "link": "https://stackoverflow.com/users/4343445/dr-watkins9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 356, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470275633, "creation_date": 1470262336, "question_id": 38754514, "link": "https://stackoverflow.com/questions/38754514/ruby-fileutils-mkdir-error", "title": "Ruby FileUtils.mkdir error", "body": "<p>I am trying to write a program to make about 100 copies of a folder, each with a different name but in the same directory. Here is the code I have so far:</p>\n\n<pre><code>require 'fileutils'\n\nfilename = \"C:/Users/drwat/Desktop/somefolder/accountusernames.txt\"\ntimes = IO.readlines(filename).size\ncounter = 0\npassword = \"changethis\"\n\noriginalFolder = \"Release/.\"\n\nwhile(counter &lt; times)\n    begin\n        currentusername = IO.readlines(filename)[counter]\n\n        FileUtils.mkdir currentusername\n        FileUtils.cp_r(originalFolder, \"#{currentusername}\")\n\n        #Put username into auth.json file\n        data = File.read(\"auth.json\")\n        filtered_data = data.gsub(\"aaaa\", \"#{currentusername}\")\n        File.open(\"auth.json\", \"w\") do |f|\n            f.write(filtered_data)\n        end\n\n        #Put password into auth.json file\n        data = File.read(\"auth.json\")\n        filtered_data = data.gsub(\"bbbb\", \"#{password}\")\n        File.open(\"auth.json\", \"w\") do |f|\n            f.write(filtered_data)\n        end\n\n        FileUtils.cp \"auth.json\", \"#{currentusername}/Config\"\n\n        #Revert auth.json file back to A's and B's\n        data = File.read(\"auth.json\")\n        filtered_data = data.gsub(\"#{currentusername}\", \"aaaa\")\n        File.open(\"auth.json\", \"w\") do |f|\n            f.write(filtered_data)\n        end\n        data = File.read(\"auth.json\")\n        filtered_data = data.gsub(\"#{password}\", bbbb)\n        File.open(\"auth.json\", \"w\") do |f|\n            f.write(filtered_data)\n        end\n\n        counter += 1\n    end\nend\n</code></pre>\n\n<p>The error I get when I run the program:</p>\n\n<pre><code>D:/Installed Programs/Ruby200-x64/lib/ruby/2.0.0/fileutils.rb:245:in `mkdir': Invalid argument - twitchypair1 (Errno::EINVAL)\n        from D:/Installed Programs/Ruby200-x64/lib/ruby/2.0.0/fileutils.rb:245:in `fu_mkdir'\n        from D:/Installed Programs/Ruby200-x64/lib/ruby/2.0.0/fileutils.rb:174:in `block in mkdir'\n        from D:/Installed Programs/Ruby200-x64/lib/ruby/2.0.0/fileutils.rb:173:in `each'\n        from D:/Installed Programs/Ruby200-x64/lib/ruby/2.0.0/fileutils.rb:173:in `mkdir'\n        from D:/somefolder/thiscode.rb:14:in `&lt;main&gt;'\n</code></pre>\n\n<p>I don't know if there is something wrong with my code or my installation of ruby or what. I've tried a few different ways to make it work, such as removing the FileUtils.mkdir line, but I can't get it. That just gives me another error. Any help would be greatly appreciated. I haven't done a whole lot with Ruby but it seems very easy to use apart from this.</p>\n\n<p>Also, do \"#{currentusername}\" and currentusername return the exact same thing?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sass", "bootstrap-sass"], "comments": [{"owner": {"reputation": 2125, "user_id": 1473963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oOZ5g.png?s=128&g=1", "display_name": "Polyov", "link": "https://stackoverflow.com/users/1473963/polyov"}, "edited": false, "score": 0, "creation_date": 1470262368, "post_id": 38754435, "comment_id": 64882811, "body": "cleared browser cache? sometimes styles get stuck if you&#39;re reloading pages a bunch"}, {"owner": {"reputation": 147, "user_id": 5284687, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ywNuy.jpg?s=128&g=1", "display_name": "Joseph Bourne", "link": "https://stackoverflow.com/users/5284687/joseph-bourne"}, "reply_to_user": {"reputation": 2125, "user_id": 1473963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/oOZ5g.png?s=128&g=1", "display_name": "Polyov", "link": "https://stackoverflow.com/users/1473963/polyov"}, "edited": false, "score": 0, "creation_date": 1470262734, "post_id": 38754435, "comment_id": 64882928, "body": "@Polyov I tried that, no luck. Thanks for the feedback though"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1470273804, "post_id": 38754435, "comment_id": 64886736, "body": "you have <code>myFooter</code> - did you mean <code>.myFooter</code> or <code>#myFooter</code> ?"}], "owner": {"reputation": 147, "user_id": 5284687, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ywNuy.jpg?s=128&g=1", "display_name": "Joseph Bourne", "link": "https://stackoverflow.com/users/5284687/joseph-bourne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470262006, "creation_date": 1470262006, "question_id": 38754435, "link": "https://stackoverflow.com/questions/38754435/scss-code-not-working-but-bootstrap-sass-does", "title": "SCSS code not working, but bootstrap-sass does", "body": "<p>Development environment: Ubuntu 16.04, rvm, rails 5, ruby 2.3.0, postgres 9.4.</p>\n\n<p>Well...after since I been using bootstrap-sass for this rails project my scss code doesn't work. Whether I write it in application.scss file, or user.scss and page.scss file. I even removed the following code in my application.scss file:</p>\n\n<pre><code>@import \"bootstrap-sprockets\";\n@import \"bootstrap\";\n</code></pre>\n\n<p>.....and still no luck.</p>\n\n<p>my pages.scss has the following content:</p>\n\n<pre><code>myFooter\n{\n  position:fixed;\n  bottom:0;\n  z-index:3;\n  width:50%;\n  margin: 0 auto;\n}\n</code></pre>\n\n<p>I'am basically trying to style my own footer instead of relying on bootstrap presets.</p>\n\n<p>I've tried using rails assets:clean &amp;&amp; and rails assets:precompile command due to looking at other questions on stackoverflow, but nothing works.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 38, "user_id": 6674320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5baca13617d73ae34358d70ab29c3ae0?s=128&d=identicon&r=PG&f=1", "display_name": "DmitryBash", "link": "https://stackoverflow.com/users/6674320/dmitrybash"}, "edited": false, "score": 0, "creation_date": 1470293072, "post_id": 38754459, "comment_id": 64892429, "body": "Hey bro, thank you. I switched for this form and in controller to (comment_params). It starts to works"}], "tags": [], "owner": {"reputation": 5966, "user_id": 2477691, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DaiPF.jpg?s=128&g=1", "display_name": "chumakoff", "link": "https://stackoverflow.com/users/2477691/chumakoff"}, "is_accepted": true, "score": 1, "last_activity_date": 1470262127, "creation_date": 1470262127, "answer_id": 38754459, "question_id": 38754020, "link": "https://stackoverflow.com/questions/38754020/form-for-nested-resourcespost-comment/38754459#38754459", "title": "form_for nested resources(post, comment)", "body": "<p>Your <code>new</code> form does not pass neither <code>post_id</code> nor <code>comment_id</code> parameter. It should be eather in the form action url or in the form body. </p>\n\n<p>I can not see all the picture, but I think you have to add parent id to the form action url. It is <code>/comments</code> now, has no parent id parameter in it. It must be <code>/posts/:post_id/comments</code> or <code>/comments/:comment_id/comments</code>.</p>\n\n<p>Change your form to:</p>\n\n<pre><code>&lt;%= form_for [@parent, @comment] do |f| %&gt;\n  &lt;%= f.input :title %&gt;\n  &lt;%= f.text_area :body %&gt;\n  &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 38, "user_id": 6674320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5baca13617d73ae34358d70ab29c3ae0?s=128&d=identicon&r=PG&f=1", "display_name": "DmitryBash", "link": "https://stackoverflow.com/users/6674320/dmitrybash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 38754459, "answer_count": 1, "score": 0, "last_activity_date": 1503312931, "creation_date": 1470260085, "question_id": 38754020, "link": "https://stackoverflow.com/questions/38754020/form-for-nested-resourcespost-comment", "title": "form_for nested resources(post, comment)", "body": "<p>I have one question about form_for with nested resources. I create something like blog, with posts,comments, comments on comments(like replies).And I have an issue. Then I try to make comment it: \"Redirected to <a href=\"http://localhost:3000/\" rel=\"nofollow\">http://localhost:3000/</a>\nFilter chain halted as :get_parent rendered or redirected\nCompleted 302 Found\"</p>\n\n<p><strong>new.html.erb for comments:</strong></p>\n\n<pre><code>&lt;div class= \"container\" %&gt;\n&lt;%= form_for @comment do |f| %&gt;\n    &lt;%= f.input :title %&gt;\n    &lt;%= f.text_area :body %&gt;\n    &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>My comments controller:</strong></p>\n\n<pre><code>   before_filter :get_parent\n\n  def new\n    @comment = @parent.comments.build\n  end\n\n  def create\n    @comment = @parent.comments.build(params[:comment])\n    @comment.user_id = current_user.id\n    if @comment.save\n      redirect_to posts_path(@comment.post), :notice =&gt; 'Thank you for your comment!'\n    else\n      render :new\n    end\n  end\n\n  private\n\n  def comment_params\n    params.require(:comment).permit(:body, :title, :user_id, :commentable_id, :commentable_type)\n  end\n\n\n  def get_parent\n    @parent = Post.find_by_id(params[:post_id]) if params[:post_id]\n    @parent = Comment.find_by_id(params[:comment_id]) if params[:comment_id]\n\n    redirect_to root_path unless defined?(@parent)\n  end\nend\n</code></pre>\n\n<p><strong>post model:</strong></p>\n\n<pre><code>has_many :comments, as: :commentable\nbelongs_to :user\n\n def post\n    commentable.is_a?(Post) ? commentable : commentable.post\n  end\n</code></pre>\n\n<p><strong>comment model:</strong></p>\n\n<pre><code>belongs_to :user\n\nbelongs_to :commentable, polymorphic: true\nhas_many :comments, :as =&gt; :commentable\n</code></pre>\n\n<p><strong>routes:</strong></p>\n\n<pre><code> resources :posts do\n    resources :comments\n  end\n\n  resources :comments do\n    resources :comments \n  end\n</code></pre>\n\n<p><strong>post_show.html.erb</strong></p>\n\n<pre><code>&lt;h1&gt;&lt;%= @post.title %&gt;&lt;/h1&gt;\n\n&lt;div class=\"body\"&gt;\n  &lt;%= @post.body %&gt;  \n&lt;/div&gt;\n\n&lt;h2&gt;Comments&lt;/h2&gt;\n\n&lt;p&gt;&lt;%= link_to 'Add a Comment', new_post_comment_path(@post) %&gt;&lt;/p&gt;\n\n&lt;ul class=\"comment_list\"&gt;\n  &lt;%= render :partial =&gt; 'comments/comment', :collection =&gt; @post.comments %&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>github repo with app: <a href=\"https://github.com/Dmitry96/dasasd\" rel=\"nofollow\">https://github.com/Dmitry96/dasasd</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1470259711, "post_id": 38753908, "comment_id": 64881678, "body": "First thing to remove here is <code>$info =</code>. Not needed. Your expectation is not matching with the subject. So write what you are testing. That helps readability."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1470259765, "post_id": 38753908, "comment_id": 64881714, "body": "In Ruby <code>$</code> means <i>global variable</i> and that usually means you&#39;re doing something wrong. These are almost always a bad plan and should be avoided whenever possible."}, {"owner": {"reputation": 109, "user_id": 5719883, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b8bf0d8f9d6227ec067c305dd8cbcbbe?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5719883/mike"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1470259803, "post_id": 38753908, "comment_id": 64881732, "body": "@ArupRakshit, should be just <code>info</code> ?"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1470259857, "post_id": 38753908, "comment_id": 64881764, "body": "The block returns value will be assigned to the <code>let(:info)</code> by default. So you don&#39;t need anything except the <code>Hash</code> there."}, {"owner": {"reputation": 109, "user_id": 5719883, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b8bf0d8f9d6227ec067c305dd8cbcbbe?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5719883/mike"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1470259913, "post_id": 38753908, "comment_id": 64881794, "body": "@ArupRakshit, i don&#39;t really get what you&#39;re saying"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 1, "creation_date": 1470259940, "post_id": 38753908, "comment_id": 64881804, "body": "mike <code>let(:info) {       {&quot;people&quot;=&gt;                         {&quot;name&quot;=&gt;&quot;Jordan&quot;,                          &quot;last_name&quot;=&gt;&quot;McClalister&quot;}}               }</code> is enough. clear now?"}], "answers": [{"tags": [], "owner": {"reputation": 39, "user_id": 5924248, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/13eedb6be6d6b48a2aa56a6708a35111?s=128&d=identicon&r=PG", "display_name": "Gabriel Bonner", "link": "https://stackoverflow.com/users/5924248/gabriel-bonner"}, "is_accepted": false, "score": 2, "last_activity_date": 1470261165, "creation_date": 1470261165, "answer_id": 38754251, "question_id": 38753908, "link": "https://stackoverflow.com/questions/38753908/testing-if-a-method-returns-a-non-null-value/38754251#38754251", "title": "Testing if a method returns a `non-null` value", "body": "<p>You'll need to change the let assignment to:</p>\n\n<pre><code>describe House::Room do\n  describe '.populate' do\n    let(:info) {\"people\"=&gt;\n                        {\"name\"=&gt;\"Jordan\",\n                         \"last_name\"=&gt;\"McClalister\"}\n               }\n    it 'should return an integer &gt; 0' do\n      expect(House::Room.populate(info)).not_to eq(nil)\n    end\n  end\nend\n</code></pre>\n\n<p>That should make your code work as you expect.</p>\n\n<p>However, you could also use another matcher, like 'be_within' if you wanted to be more specific, or write several expect statements in the same test, like 'expect to be an integer', 'expect to be greater than 0', etc...  There is no limit to the number of expect statements you can have in an 'it' block, the test will only pass is all of the expectations are matched.  (That said, I believe best practice would be to split it up into individual tests.)</p>\n"}], "owner": {"reputation": 109, "user_id": 5719883, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b8bf0d8f9d6227ec067c305dd8cbcbbe?s=128&d=identicon&r=PG&f=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5719883/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2031, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1470261165, "creation_date": 1470259531, "question_id": 38753908, "link": "https://stackoverflow.com/questions/38753908/testing-if-a-method-returns-a-non-null-value", "title": "Testing if a method returns a `non-null` value", "body": "<p>Im testing if my method <code>populate()</code> returns a non-null value (which it does, it returns an integer > 0) but having troubles to correctly write it. I have:</p>\n\n<pre><code>describe House::Room do\n  describe '.populate' do\n    let(:info) {\n      $info = {\"people\"=&gt;\n                        {\"name\"=&gt;\"Jordan\",\n                         \"last_name\"=&gt;\"McClalister\"}}\n              }\n    it 'should return an integer &gt; 0' do\n      expect(House::Room.populate(info)).not_to eq(nil)\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "nested-attributes"], "answers": [{"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1470266308, "post_id": 38755089, "comment_id": 64884010, "body": "I have a <code>dueler</code> and <code>duel</code> model. <code>duel</code> <code>has_many :duelers</code>. Is there a way to just have it where when a user updates dueler it <code>redirects_to</code> duel show page?"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1470344239, "post_id": 38755089, "comment_id": 64925950, "body": "That gives same error as question :/ To clarify I&#39;m trying to do this without creating a &quot;DuelersController&quot;. Thanks for trying!"}, {"owner": {"reputation": 2503, "user_id": 942986, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tR28w.jpg?s=128&g=1", "display_name": "fabriciofreitag", "link": "https://stackoverflow.com/users/942986/fabriciofreitag"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1470351632, "post_id": 38755089, "comment_id": 64928618, "body": "Sorry to waste your time @AnthonyGalli.com, I updated the answer, please take a look and let me know."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1470351796, "post_id": 38755089, "comment_id": 64928647, "body": "No worries buddy :) It gives error: <code>No route matches {:action=&gt;&quot;set_duel&quot;, :controller=&gt;&quot;duel&quot;, :id=&gt;&quot;13&quot;}</code>. I thought maybe the action should be <code>show</code>, but same error <code>No route matches {:action=&gt;&quot;show&quot;, :controller=&gt;&quot;duel&quot;, :id=&gt;&quot;13&quot;}</code>"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1470351983, "post_id": 38755089, "comment_id": 64928697, "body": "I also tried this way, but I get a different error: <a href=\"http://stackoverflow.com/questions/38778376/how-to-update-dueler-in-duels-controller?noredirect=1#comment64928351_38778376\" title=\"how to update dueler in duels controller\">stackoverflow.com/questions/38778376/&hellip;</a>. Been at this for awhile :/"}, {"owner": {"reputation": 2503, "user_id": 942986, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tR28w.jpg?s=128&g=1", "display_name": "fabriciofreitag", "link": "https://stackoverflow.com/users/942986/fabriciofreitag"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1470410141, "post_id": 38755089, "comment_id": 64955490, "body": "@AnthonyGalli.com, can you update the post with your routes.rb? It should contain a route to allow the usage of set_duel."}], "tags": [], "owner": {"reputation": 2503, "user_id": 942986, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/tR28w.jpg?s=128&g=1", "display_name": "fabriciofreitag", "link": "https://stackoverflow.com/users/942986/fabriciofreitag"}, "is_accepted": true, "score": 1, "last_activity_date": 1470351600, "last_edit_date": 1470351600, "creation_date": 1470265976, "answer_id": 38755089, "question_id": 38753687, "link": "https://stackoverflow.com/questions/38753687/routing-error-uninitialized-constant-for-nonexistent-controller/38755089#38755089", "title": "Routing Error: uninitialized constant for nonexistent controller", "body": "<p>Sorry, I was distracted. I think your problem is actually another, you have to explicitly specify the controller and action here.\nOn a side note, maybe you'll have to change the way you fetch your parameters on the set_duel action (I don't remember if rails sets the id automatically), anyway: </p>\n\n<pre><code>#Assuming you want to call set_duel upon submission\n&lt;%= form_for @dueler, :url =&gt; { :controller =&gt; \"duel\", :action =&gt; \"set_duel\" }, :html =&gt; {:method =&gt; :post} do |f| %&gt;\n  Accept? &lt;%= f.check_box :accept %&gt;\n  &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 38755089, "answer_count": 1, "score": 0, "last_activity_date": 1470351600, "creation_date": 1470258618, "question_id": 38753687, "link": "https://stackoverflow.com/questions/38753687/routing-error-uninitialized-constant-for-nonexistent-controller", "title": "Routing Error: uninitialized constant for nonexistent controller", "body": "<p>Upon checking <code>submit</code> I get <code>Routing Error: uninitialized constant DuelersController</code></p>\n\n<p><strong><code>duels/show.html.erb</code></strong></p>\n\n<pre><code>The loser(s) will &lt;%= @duel.consequence %&gt;&lt;br&gt;&lt;br&gt;\nIf everyone succeeds they will &lt;%= @duel.reward %&gt;\n&lt;%= form_for @dueler do |f| %&gt;\n  Accept? &lt;%= f.check_box :accept %&gt;\n  &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>There is no <code>DuelersController</code> only <strong><code>DuelsController</code></strong></p>\n\n<pre><code>def show\n  @dueler = Dueler.find_by(user_id: current_user.id)\n  respond_with(@duel)\nend\n\ndef set_duel\n  @duel = Duel.find(params[:id])\nend\n</code></pre>\n\n<p>Once a <code>user</code> clicks <code>submit</code> how can I redirect the user back to the show page?</p>\n\n<pre><code>Dueler.last\n id: 20,\n user_id: 78,\n challenge_id: 178,\n duel_id: 13,\n accept: nil&gt; # For example redirect back to duels/13 with accept: true\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "jenkins"], "comments": [{"owner": {"reputation": 73, "user_id": 4745201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b91385e456a644ebf26f65f9c286e9c?s=128&d=identicon&r=PG&f=1", "display_name": "PapaouT135", "link": "https://stackoverflow.com/users/4745201/papaout135"}, "edited": false, "score": 0, "creation_date": 1470259023, "post_id": 38753658, "comment_id": 64881358, "body": "I&#39;m using a windows machine running cygwin"}, {"owner": {"reputation": 14757, "user_id": 172599, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21eabf5c0a4d240da9cd1f8b4f52c94a?s=128&d=identicon&r=PG", "display_name": "Dave Bacher", "link": "https://stackoverflow.com/users/172599/dave-bacher"}, "edited": false, "score": 0, "creation_date": 1470260253, "post_id": 38753658, "comment_id": 64881966, "body": "Examine <i>copy_S3.rb</i> in the workspace after your job runs. Does it contain the expected content? It is likely that $LOAD_PATH is being replaced by the shell as the file is created. Why not check out your copy_S3 script from a source repository?"}], "owner": {"reputation": 73, "user_id": 4745201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b91385e456a644ebf26f65f9c286e9c?s=128&d=identicon&r=PG&f=1", "display_name": "PapaouT135", "link": "https://stackoverflow.com/users/4745201/papaout135"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2083, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1470868830, "creation_date": 1470258499, "last_edit_date": 1470868830, "question_id": 38753658, "link": "https://stackoverflow.com/questions/38753658/how-to-execute-ruby-script-from-jenkins", "title": "How to execute ruby script from Jenkins", "body": "<p>I added this step in my Jenkins Job</p>\n\n<p><strong>Execute Shell</strong></p>\n\n<pre><code> FILE=copy_S3.rb\n cat &gt; \"$FILE\" &lt;&lt; EOF\n #!/usr/bin/env ruby\n libPath =  ENV[\"WORKSPACE\"]+\"/../lib/\"\n puts libPath\n $LOAD_PATH.unshift( libPath ) \n EOF\n\n ruby ./copy_S3.rb\n</code></pre>\n\n<p>I'm getting an error </p>\n\n<pre><code>./copy_S3.rb:5:in `&lt;main&gt;': undefined method `unshift'\n</code></pre>\n"}, {"tags": ["ruby", "demorgans-law"], "comments": [{"owner": {"reputation": 28990, "user_id": 1114966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af8712b05e5cfb862323a07c83749054?s=128&d=identicon&r=PG", "display_name": "squiguy", "link": "https://stackoverflow.com/users/1114966/squiguy"}, "edited": false, "score": 4, "creation_date": 1470258518, "post_id": 38753641, "comment_id": 64881120, "body": "<a href=\"https://en.wikipedia.org/wiki/De_Morgan%27s_laws\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/De_Morgan%27s_laws</a>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1470258605, "post_id": 38753641, "comment_id": 64881163, "body": "One of &quot;key isn&#39;t a&quot; and &quot;key isn&#39;t b&quot; will ALWAYS be true. Therefore, your condition is always true."}], "answers": [{"tags": [], "owner": {"reputation": 451, "user_id": 3497155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b516d57239e485a43237d1ed41f4cf73?s=128&d=identicon&r=PG", "display_name": "Lavika", "link": "https://stackoverflow.com/users/3497155/lavika"}, "is_accepted": true, "score": 0, "last_activity_date": 1470258981, "creation_date": 1470258981, "answer_id": 38753783, "question_id": 38753641, "link": "https://stackoverflow.com/questions/38753641/ruby-if-statement-multiple-conditions-not-equal/38753783#38753783", "title": "Ruby if statement multiple conditions not equal", "body": "<p>I think what you are trying to achieve, can be done by- </p>\n\n<pre><code>H.each do |key, v|\n  if (key != \"a\") &amp;&amp; (key != \"b\")\n    puts key\n  end\nend\n</code></pre>\n\n<p>Note - <code>||</code> operator will return true if any of the two conditions is true.</p>\n\n<p>Hope that helps.</p>\n"}, {"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 2, "last_activity_date": 1470259223, "creation_date": 1470259223, "answer_id": 38753844, "question_id": 38753641, "link": "https://stackoverflow.com/questions/38753641/ruby-if-statement-multiple-conditions-not-equal/38753844#38753844", "title": "Ruby if statement multiple conditions not equal", "body": "<p>The inverse of</p>\n\n<pre><code>if (key == \"a\") || (key == \"b\")\n</code></pre>\n\n<p>is actually</p>\n\n<pre><code>if !(key == \"a\") &amp;&amp; !(key == \"b\")\n</code></pre>\n\n<p>IF you say \"it can be this or that\" the opposite is \"it cannot be this and cannot be that\"</p>\n"}], "owner": {"reputation": 2630, "user_id": 2976939, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d88affe0f95bd3616baa5dd09190626d?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2976939/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2027, "favorite_count": 0, "accepted_answer_id": 38753783, "answer_count": 2, "score": 1, "last_activity_date": 1470259223, "creation_date": 1470258421, "last_edit_date": 1470259205, "question_id": 38753641, "link": "https://stackoverflow.com/questions/38753641/ruby-if-statement-multiple-conditions-not-equal", "title": "Ruby if statement multiple conditions not equal", "body": "<p>I can't figure out why multiple if statement conditionals with not equals doesn't work. In <code>irb</code></p>\n\n<pre><code>2.3.0 :009 &gt; H = Hash[\"a\" =&gt; 100, \"b\" =&gt; 200, \"c\" =&gt; 1000, \"d\" =&gt; 2000]\n =&gt; {\"a\"=&gt;100, \"b\"=&gt;200, \"c\"=&gt;1000, \"d\"=&gt;2000}\n2.3.0 :011 &gt; H.each do |key, v|\n2.3.0 :012 &gt;     if (key != \"a\") || (key != \"b\")\n2.3.0 :013?&gt;     puts key\n2.3.0 :014?&gt;     end\n2.3.0 :015?&gt;   end\na\nb\nc\nd\n =&gt; {\"a\"=&gt;100, \"b\"=&gt;200, \"c\"=&gt;1000, \"d\"=&gt;2000} \n2.3.0 :016 &gt; H.each do |key, v|\n2.3.0 :017 &gt;     if key != \"a\" || key != \"b\"\n2.3.0 :018?&gt;     puts key\n2.3.0 :019?&gt;     end\n2.3.0 :020?&gt;   end\na\nb\nc\nd\n =&gt; {\"a\"=&gt;100, \"b\"=&gt;200, \"c\"=&gt;1000, \"d\"=&gt;2000} \n2.3.0 :021 &gt; H.each do |key, v|\n2.3.0 :022 &gt;     if !(key == \"a\") || !(key == \"b\")\n2.3.0 :023?&gt;     puts key\n2.3.0 :024?&gt;     end\n2.3.0 :025?&gt;   end\na\nb\nc\nd\n =&gt; {\"a\"=&gt;100, \"b\"=&gt;200, \"c\"=&gt;1000, \"d\"=&gt;2000} \n</code></pre>\n\n<p>But this works:</p>\n\n<pre><code>2.3.0 :026 &gt; H.each do |key, v|\n2.3.0 :027 &gt;     if (key == \"a\") || (key == \"b\")\n2.3.0 :028?&gt;     puts key\n2.3.0 :029?&gt;     end\n2.3.0 :030?&gt;   end\na\nb\n =&gt; {\"a\"=&gt;100, \"b\"=&gt;200, \"c\"=&gt;1000, \"d\"=&gt;2000} \n</code></pre>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "logging", "location"], "answers": [{"tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 2, "last_activity_date": 1470257510, "creation_date": 1470257510, "answer_id": 38753397, "question_id": 38753317, "link": "https://stackoverflow.com/questions/38753317/what-does-location-mean-in-my-rails-logs/38753397#38753397", "title": "What does location mean in my Rails logs?", "body": "<p>I believe you are using the <a href=\"https://github.com/roidrage/lograge\" rel=\"nofollow\">lograge</a> gem for logging. There, the <code>location</code> field is set if the request was answered with an HTTP redirect (i.e. an <code>HTTP 301</code> or <code>HTTP 302</code>). The field contains the full URL where the user was forwarded to.</p>\n\n<p>The field is called <code>location</code> because that's the name of the HTTP header containing this field in the response.</p>\n"}], "owner": {"reputation": 6671, "user_id": 5129131, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/j5HkF.jpg?s=128&g=1", "display_name": "Sergio Tapia", "link": "https://stackoverflow.com/users/5129131/sergio-tapia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 38753397, "answer_count": 1, "score": 0, "last_activity_date": 1470257510, "creation_date": 1470257212, "question_id": 38753317, "link": "https://stackoverflow.com/questions/38753317/what-does-location-mean-in-my-rails-logs", "title": "What does location mean in my Rails logs?", "body": "<p>Here's an example output:</p>\n\n<blockquote>\n  <p>13:25:29 log.1    | method=GET path=/users/auth/github/callback\n  format=html controller=users/omniauth_callbacks action=github\n  status=302 duration=829.94 view=0.00 db=25.57\n  location=<a href=\"http://loclhost:5000/heroku/in-stcks/\" rel=\"nofollow\">http://loclhost:5000/heroku/in-stcks/</a>\n  params={\"code\"=>\"xxxxxxxx\",\n  \"state\"=>\"xxxxxxxx\"}</p>\n</blockquote>\n\n<p>What is the <code>location</code> field in this line, and where is it loaded from?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1470258664, "post_id": 38753122, "comment_id": 64881188, "body": "Thank you! That worked, but now I ran into a new problem if you want to help me over here: <a href=\"http://stackoverflow.com/questions/38753687/routing-error-uninitialized-constant-for-nonexistent-controller\" title=\"routing error uninitialized constant for nonexistent controller\">stackoverflow.com/questions/38753687/&hellip;</a> :)"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 1, "last_activity_date": 1470256411, "creation_date": 1470256411, "answer_id": 38753122, "question_id": 38753032, "link": "https://stackoverflow.com/questions/38753032/how-to-show-nested-attribute-for-corresponding-user/38753122#38753122", "title": "How to Show Nested Attribute for Corresponding User?", "body": "<p>Try to retrieve just the dueler for the current_user (with an SQL query)</p>\n\n<p>in the action</p>\n\n<pre><code>@duel = Dueler.find_by(user_id: current_user.id)\n</code></pre>\n\n<p>in the view</p>\n\n<pre><code>&lt;%= form_for @duel do |f| %&gt;\n  Accept?  : &lt;%= f.check_box :accept %&gt;\n  &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15, "favorite_count": 0, "accepted_answer_id": 38753122, "answer_count": 1, "score": 0, "last_activity_date": 1470256411, "creation_date": 1470256062, "question_id": 38753032, "link": "https://stackoverflow.com/questions/38753032/how-to-show-nested-attribute-for-corresponding-user", "title": "How to Show Nested Attribute for Corresponding User?", "body": "<p>How can I only show the <code>:accept</code>checkmark for the <code>dueler</code> who is the <code>current_user</code>?</p>\n\n<p>Right now there is a <code>check_mark</code> for each dueler, which means a user who is not the dueler can accept on behalf of the other user.</p>\n\n<pre><code>Dueler.last\n id: 20,\n user_id: 78,\n challenge_id: 178,\n duel_id: 13,\n accept: nil&gt;\n</code></pre>\n\n<p><strong>duels/show.html.erb</strong></p>\n\n<pre><code>&lt;% @duel.duelers.each do |dueler| %&gt;\n    &lt;% if current_user.id == dueler.user_id %&gt;\n        &lt;%= form_for @duel do |f| %&gt;\n          &lt;%= f.fields_for :duelers do |accept_fields| %&gt; # Only Want to Show One Checkmark for current_user.id == dueler.user_id \n            Accept?  : &lt;%= accept_fields.check_box :accept %&gt;\n          &lt;% end %&gt;\n          &lt;%= f.submit %&gt;\n        &lt;% end %&gt;\n    &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 5966, "user_id": 2477691, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DaiPF.jpg?s=128&g=1", "display_name": "chumakoff", "link": "https://stackoverflow.com/users/2477691/chumakoff"}, "edited": false, "score": 0, "creation_date": 1470257344, "post_id": 38752913, "comment_id": 64880570, "body": ":authenticate_api_v1_public_members_user!     It looks very weird!  This Devise helper should have nothing to do with your namespaces. The name of the method depends of the name of your user model. From your example I may gess that your user model is ApiV1PublicMemberUser"}, {"owner": {"reputation": 1576, "user_id": 1933068, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/EsXL4.png?s=128&g=1", "display_name": "HermannHH", "link": "https://stackoverflow.com/users/1933068/hermannhh"}, "reply_to_user": {"reputation": 5966, "user_id": 2477691, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DaiPF.jpg?s=128&g=1", "display_name": "chumakoff", "link": "https://stackoverflow.com/users/2477691/chumakoff"}, "edited": false, "score": 0, "creation_date": 1470257762, "post_id": 38752913, "comment_id": 64880772, "body": "I got the tip for a namespaced authenticate method here: <a href=\"http://stackoverflow.com/a/29409283/1933068\">stackoverflow.com/a/29409283/1933068</a> . I have also updated my question to explain the Model @chumakoff"}, {"owner": {"reputation": 5966, "user_id": 2477691, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DaiPF.jpg?s=128&g=1", "display_name": "chumakoff", "link": "https://stackoverflow.com/users/2477691/chumakoff"}, "edited": false, "score": 0, "creation_date": 1470258187, "post_id": 38752913, "comment_id": 64880964, "body": "If it really works this way, you must use methods <code>current_api_v1_public_members_user!</code> and <code>api_v1_public_members_user_signed_in?</code> instead of <code>current_user!</code> and <code>user_signed_in?</code>"}, {"owner": {"reputation": 1576, "user_id": 1933068, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/EsXL4.png?s=128&g=1", "display_name": "HermannHH", "link": "https://stackoverflow.com/users/1933068/hermannhh"}, "reply_to_user": {"reputation": 5966, "user_id": 2477691, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DaiPF.jpg?s=128&g=1", "display_name": "chumakoff", "link": "https://stackoverflow.com/users/2477691/chumakoff"}, "edited": false, "score": 0, "creation_date": 1470258721, "post_id": 38752913, "comment_id": 64881214, "body": "Wow your suggestion actually worked. I did something similar before, but my word sequence was incorrect. Can you please add this as an answer so that I can mark it as accepted. Thanks @chumakoff"}, {"owner": {"reputation": 5966, "user_id": 2477691, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DaiPF.jpg?s=128&g=1", "display_name": "chumakoff", "link": "https://stackoverflow.com/users/2477691/chumakoff"}, "edited": false, "score": 1, "creation_date": 1470258872, "post_id": 38752913, "comment_id": 64881290, "body": "I am very surprised that it works like this. Got something new to know. Thank you! I created an answer"}], "answers": [{"tags": [], "owner": {"reputation": 5966, "user_id": 2477691, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DaiPF.jpg?s=128&g=1", "display_name": "chumakoff", "link": "https://stackoverflow.com/users/2477691/chumakoff"}, "is_accepted": true, "score": 1, "last_activity_date": 1470258740, "last_edit_date": 1495542787, "creation_date": 1470258740, "answer_id": 38753721, "question_id": 38752913, "link": "https://stackoverflow.com/questions/38752913/devise-methods-undefined-in-rails-project/38753721#38753721", "title": "Devise methods undefined in Rails project", "body": "<p>It seems to be that Devise is nested within the <code>:api_v1_public_members</code> namespace in your routes.rb. In this case it affects not only on <code>authenticate_user!</code> method, changing it into <code>authenticate_api_v1_public_members_user!</code>, but on the others methods too.</p>\n\n<ul>\n<li><p><code>current_user</code> turns to <code>current_api_v1_public_members_user</code></p></li>\n<li><p><code>user_signed_in?</code> turns to <code>api_v1_public_members_user_signed_in?</code></p></li>\n</ul>\n\n<p>There is similar problem here <a href=\"https://stackoverflow.com/questions/27164906/undefined-method-authenticate-user-apipostscontroller-in-devise-rails-4/29409283#29409283\">undefined method `authenticate_user! Api::PostsController in Devise / Rails 4</a></p>\n"}], "owner": {"reputation": 1576, "user_id": 1933068, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/EsXL4.png?s=128&g=1", "display_name": "HermannHH", "link": "https://stackoverflow.com/users/1933068/hermannhh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 421, "favorite_count": 0, "accepted_answer_id": 38753721, "answer_count": 1, "score": 0, "last_activity_date": 1470258740, "creation_date": 1470255597, "last_edit_date": 1470257838, "question_id": 38752913, "link": "https://stackoverflow.com/questions/38752913/devise-methods-undefined-in-rails-project", "title": "Devise methods undefined in Rails project", "body": "<p>I have a Rails 5 app with the Devise gem installed. My project is set up in such a way, that all controllers are namespaced...Even Devise controllers.</p>\n\n<p>In my routes file I have done this(This will better explain my namespacing structure):</p>\n\n<pre><code>controllers: {\n    sessions: \"api/v1/public/members/users/sessions\",\n    passwords: \"api/v1/public/members/users/passwords\",\n    registrations: \"api/v1/public/members/users/registrations\",\n},\npath_names: { \n  sign_in: 'login', \n  password: 'forgot', \n  sign_up: 'register',\n  sign_out: 'signout'\n}\n</code></pre>\n\n<p>I have also setup the devise view files to reflect the required namespaced structure.</p>\n\n<p>I have included the following in my ApplicationController.rb:</p>\n\n<pre><code>before_action :authenticate_api_v1_public_members_user!\n</code></pre>\n\n<p>Since my Devise controllers are namespaced, the standard 'before_action :authenticate_user!' method needed to be updated to the one above in order to work.</p>\n\n<p>The issue that I'm experiencing, is that none of the Devise helper methods are available in any of my views. When calling 'current_user' or 'user_signed_in?' in a view, I am presented with an 'undefined method' error when refreshing my browser. I tried namespacing these helper methods as well, but to no avail.</p>\n\n<p><strong>UPDATE</strong>\nModels are not namespaced in my app. I am using a normal User model. Only controllers are namespaced and are structured as indicated by the route above.</p>\n\n<p>Does anybody have experience with a similar issue?</p>\n"}, {"tags": ["ruby", "testing", "automation", "capybara"], "comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 1, "creation_date": 1470256642, "post_id": 38752750, "comment_id": 64880210, "body": "What driver are you using with Capybara? Some drivers have different options for this (selenium driver specifically)."}, {"owner": {"reputation": 51, "user_id": 6387686, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/575d53741472a1ce984eba8453589d85?s=128&d=identicon&r=PG&f=1", "display_name": "Serhii Kaihorodov", "link": "https://stackoverflow.com/users/6387686/serhii-kaihorodov"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1470298872, "post_id": 38752750, "comment_id": 64895920, "body": "I use Selenium driver."}], "answers": [{"tags": [], "owner": {"reputation": 1905, "user_id": 232838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8342950f34a66d9ec7cfe10b33d5494c?s=128&d=identicon&r=PG", "display_name": "koffeinfrei", "link": "https://stackoverflow.com/users/232838/koffeinfrei"}, "is_accepted": false, "score": 1, "last_activity_date": 1470255383, "creation_date": 1470255383, "answer_id": 38752854, "question_id": 38752750, "link": "https://stackoverflow.com/questions/38752750/ruby-capybara-how-to-fill-text-field-with-some-text-without-clearing-previousl/38752854#38752854", "title": "Ruby: Capybara: How to fill text field with some text without clearing previously entered text in the field", "body": "<pre><code>field = find_field 'Text field'\nfield.set(\"#{field.value} and something more...\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15010, "user_id": 567863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abda861707b1e78e0fce47ced55f84ee?s=128&d=identicon&r=PG", "display_name": "Paul Fioravanti", "link": "https://stackoverflow.com/users/567863/paul-fioravanti"}, "is_accepted": false, "score": 0, "last_activity_date": 1470315484, "creation_date": 1470315484, "answer_id": 38768023, "question_id": 38752750, "link": "https://stackoverflow.com/questions/38752750/ruby-capybara-how-to-fill-text-field-with-some-text-without-clearing-previousl/38768023#38768023", "title": "Ruby: Capybara: How to fill text field with some text without clearing previously entered text in the field", "body": "<p>Try using <a href=\"http://www.rubydoc.info/github/jnicklas/capybara/Capybara%2FNode%2FElement%3Asend_keys\" rel=\"nofollow\"><code>Capybara::Node::Element#send_keys</code></a> on your field in question to append more text to it.  For example:</p>\n\n<pre><code>find('#your-text-field').send_keys(\"this is more text to add\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1470323234, "creation_date": 1470323234, "answer_id": 38771084, "question_id": 38752750, "link": "https://stackoverflow.com/questions/38752750/ruby-capybara-how-to-fill-text-field-with-some-text-without-clearing-previousl/38771084#38771084", "title": "Ruby: Capybara: How to fill text field with some text without clearing previously entered text in the field", "body": "<p>Since you're using Selenium you can do</p>\n\n<pre><code>fill_in('whatever', with: 'text to append', fill_options: {clear: :none})\n</code></pre>\n\n<p>or</p>\n\n<pre><code>field.set('whatever', clear: :none)\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 6387686, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/575d53741472a1ce984eba8453589d85?s=128&d=identicon&r=PG&f=1", "display_name": "Serhii Kaihorodov", "link": "https://stackoverflow.com/users/6387686/serhii-kaihorodov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1085, "favorite_count": 0, "accepted_answer_id": 38771084, "answer_count": 3, "score": 0, "last_activity_date": 1470323234, "creation_date": 1470255008, "question_id": 38752750, "link": "https://stackoverflow.com/questions/38752750/ruby-capybara-how-to-fill-text-field-with-some-text-without-clearing-previousl", "title": "Ruby: Capybara: How to fill text field with some text without clearing previously entered text in the field", "body": "<p>I need to add some text into the text field that already contains text.\nWhen I use fill_in or set functions - it clears previously entered text. \nSo how to add text into text box without clearing previously entered data in it?</p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 4103, "user_id": 4271125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VQnWR.jpg?s=128&g=1", "display_name": "djaszczurowski", "link": "https://stackoverflow.com/users/4271125/djaszczurowski"}, "is_accepted": true, "score": 3, "last_activity_date": 1470253388, "creation_date": 1470253388, "answer_id": 38752346, "question_id": 38752192, "link": "https://stackoverflow.com/questions/38752192/ruby-differences-between-and-in-method-parameters/38752346#38752346", "title": "Ruby: differences between () and [] in method parameters", "body": "<p>when you call a method in ruby you use <code>()</code>. Sometimes you are allowed to use <code>[]</code> on a particular object and it works, but only because type of this object has <code>[]</code> method defined in its definition. for instance</p>\n\n<pre><code>class Foo\n  def [](key)\n    key\n  end\nend\n\n# and later you can call:\n\nfoo = Foo.new\nfoo['anything']\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1470253398, "creation_date": 1470253398, "answer_id": 38752349, "question_id": 38752192, "link": "https://stackoverflow.com/questions/38752192/ruby-differences-between-and-in-method-parameters/38752349#38752349", "title": "Ruby: differences between () and [] in method parameters", "body": "<p>Generally round brackets are used for specifying <em>arguments</em> and square brackets are for <em>indexing</em> things.</p>\n\n<p>Example:</p>\n\n<pre><code>def is_a_method(a, b)\nend\n\nis_a_method(1,2)\n\nis_a_hash = { a: 1, b: 2 }\nis_a_hash[:a]\n</code></pre>\n\n<p>They're not interchangeable. Like a lot of things in programming the exact characters matter.</p>\n\n<p>These things can be stacked and combined:</p>\n\n<pre><code>JSON.parse(response.body)['data']\n</code></pre>\n\n<p>The result of the <code>JSON.parse(...)</code> method call is, in this case, a Hash data structure. Calling <code>['data']</code> on that pulls out an element from that structure.</p>\n\n<p>In many cases the round brackets are optional, but in some cases they're best included for clarity. For example you can express that as this:</p>\n\n<pre><code>body = JSON.parse response.body\nbody['data']\n</code></pre>\n\n<p>Square brackets are not optional.</p>\n"}, {"comments": [{"owner": {"reputation": 4649, "user_id": 681679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ba1bdfa6ba08225903a74383be42b06?s=128&d=identicon&r=PG", "display_name": "photoionized", "link": "https://stackoverflow.com/users/681679/photoionized"}, "edited": false, "score": 0, "creation_date": 1470253512, "post_id": 38752353, "comment_id": 64878669, "body": "to clarify, <code>[]</code> and <code>[]=</code> are actually two separate methods on <code>Array</code>, check out <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-5B-5D\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.0/Array.html#method-i-5B-5D</a> and <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-5B-5D-3D\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.0/Array.html#method-i-5B-5D-3D</a> respectively"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 2, "last_activity_date": 1470253570, "last_edit_date": 1470253570, "creation_date": 1470253404, "answer_id": 38752353, "question_id": 38752192, "link": "https://stackoverflow.com/questions/38752192/ruby-differences-between-and-in-method-parameters/38752353#38752353", "title": "Ruby: differences between () and [] in method parameters", "body": "<p>It's syntactic sugar. <code>[]</code> and <code>[]=</code>  are methods defined for Array, Hash and other classes.\nGiven <code>a</code> an array, I think</p>\n\n<pre><code>a[0] = 5\n</code></pre>\n\n<p>is the same of </p>\n\n<pre><code>a.[]=(0, 5)\n</code></pre>\n\n<p>I tried in irb, it works :)</p>\n"}], "owner": {"reputation": 4842, "user_id": 1493868, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7a84611ec325ce3125ec56149b2cfcb6?s=128&d=identicon&r=PG", "display_name": "Tr\u1ea7n Kim D\u1ef1", "link": "https://stackoverflow.com/users/1493868/tr%e1%ba%a7n-kim-d%e1%bb%b1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 573, "favorite_count": 0, "accepted_answer_id": 38752346, "answer_count": 3, "score": 0, "last_activity_date": 1470253570, "creation_date": 1470252801, "question_id": 38752192, "link": "https://stackoverflow.com/questions/38752192/ruby-differences-between-and-in-method-parameters", "title": "Ruby: differences between () and [] in method parameters", "body": "<p>I'm using rspec for testing a hash contains a key or not.</p>\n\n<pre><code>response_data = JSON.parse(response.body)['data']\nexpect(response_data).to have_key('store_id')\nexpect(response_data).to have_key('store_name')\n</code></pre>\n\n<p>But by error, I change from normal parenthese to square parenthese:</p>\n\n<pre><code>response_data = JSON.parse(response.body)['data']\nexpect(response_data).to have_key['store_id']\nexpect(response_data).to have_key['store_name']\n</code></pre>\n\n<p>It tooks me a long time for debugging with error: </p>\n\n<blockquote>\n  <p>NoMethodError: undefined method `[]'</p>\n</blockquote>\n\n<p>My question is: Ruby doesn't throw exception about this grammar is wrong, but exception about <code>undefined method</code> so I'm curious how ruby understand method with square parenthese.</p>\n\n<p>thanks</p>\n"}, {"tags": ["ruby", "selenium-webdriver", "capybara", "capybara-webkit"], "comments": [{"owner": {"reputation": 223, "user_id": 5310502, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b6f92af37160cf2310ac2ccadcd9b758?s=128&d=identicon&r=PG&f=1", "display_name": "testerBDD", "link": "https://stackoverflow.com/users/5310502/testerbdd"}, "edited": false, "score": 0, "creation_date": 1470252439, "post_id": 38752069, "comment_id": 64878050, "body": "I am using IE browser"}, {"owner": {"reputation": 36788, "user_id": 2887618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e643417e67e5a3bb9f659e4491ed26b0?s=128&d=identicon&r=PG&f=1", "display_name": "Florent B.", "link": "https://stackoverflow.com/users/2887618/florent-b"}, "edited": false, "score": 0, "creation_date": 1470253155, "post_id": 38752069, "comment_id": 64878468, "body": "Do you get 2 handles with the Chrome and Firefox driver?"}, {"owner": {"reputation": 223, "user_id": 5310502, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b6f92af37160cf2310ac2ccadcd9b758?s=128&d=identicon&r=PG&f=1", "display_name": "testerBDD", "link": "https://stackoverflow.com/users/5310502/testerbdd"}, "reply_to_user": {"reputation": 36788, "user_id": 2887618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e643417e67e5a3bb9f659e4491ed26b0?s=128&d=identicon&r=PG&f=1", "display_name": "Florent B.", "link": "https://stackoverflow.com/users/2887618/florent-b"}, "edited": false, "score": 0, "creation_date": 1470253309, "post_id": 38752069, "comment_id": 64878567, "body": "Application doesnt work on other browsers and specifically written for IE"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1470255969, "post_id": 38752069, "comment_id": 64879888, "body": "What does <code>popup_general</code> actually do?  When you say &quot;not working&quot;, what errors are you getting?  Also if you are calling things on <code>page.driver.browser</code> you&#39;re outside of Capybara code and into the driver code,  <code>page.windows</code> should be used instead of page.driver.browser.window_handles, etc."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1470256342, "post_id": 38752069, "comment_id": 64880053, "body": "Also - what versions of Capybara, selenium-webdriver, and iedriver are you using?"}], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 0, "last_activity_date": 1470256565, "creation_date": 1470256565, "answer_id": 38753161, "question_id": 38752069, "link": "https://stackoverflow.com/questions/38752069/capybara-ruby-not-detecting-popups/38753161#38753161", "title": "Capybara : Ruby : not detecting popups", "body": "<p>You've probably run into the following issue with selenium-webdriver - <a href=\"https://github.com/SeleniumHQ/selenium/issues/1273\" rel=\"nofollow\">https://github.com/SeleniumHQ/selenium/issues/1273</a></p>\n"}], "owner": {"reputation": 223, "user_id": 5310502, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b6f92af37160cf2310ac2ccadcd9b758?s=128&d=identicon&r=PG&f=1", "display_name": "testerBDD", "link": "https://stackoverflow.com/users/5310502/testerbdd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470256565, "creation_date": 1470252340, "question_id": 38752069, "link": "https://stackoverflow.com/questions/38752069/capybara-ruby-not-detecting-popups", "title": "Capybara : Ruby : not detecting popups", "body": "<p>I have an application where when i click a link (link1) it opens popup, below is the code for the popup</p>\n\n<pre><code>&lt;a href=\"javascript:popup_general('/webapp/sso?ssotype=external&amp;amp;appname='AppName', 'ADRaqa5', '750', '450', 'top=0,left=,toolbar=yes,menubar=no,location=no,resizable=yes,scrollbars=yes');\"&gt;link1&lt;/a&gt;\n</code></pre>\n\n<p>i tried using</p>\n\n<pre><code>page.driver.browser.window_focus page.windows.last.handle\n</code></pre>\n\n<p>also i tried using </p>\n\n<pre><code>new_window = window_opened_by{click_link link_text}\nwithin_window new_window do\n   click_link 'overridelink'\nend\n</code></pre>\n\n<p>both of them are not working so finally i tried to get the windows ids </p>\n\n<pre><code>print page.driver.browser.window_handles\n</code></pre>\n\n<p>result</p>\n\n<pre><code> [\"ccc7074b-dad0-472f-b134-a6c72e08f7a4\"]\n</code></pre>\n\n<p>so it looks like capybara is not even detecting second window</p>\n\n<p>can you guys help me in this issue &amp; also if there are any work arounds</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 16089, "user_id": 726239, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/l4w57.jpg?s=128&g=1", "display_name": "Shaunak", "link": "https://stackoverflow.com/users/726239/shaunak"}, "edited": false, "score": 2, "creation_date": 1470252536, "post_id": 38751938, "comment_id": 64878107, "body": "So what is the problem you are running into?"}, {"owner": {"reputation": 111, "user_id": 6246328, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/e05f278aae0408d3bfd1cdd4203576d4?s=128&d=identicon&r=PG&f=1", "display_name": "SinGar", "link": "https://stackoverflow.com/users/6246328/singar"}, "reply_to_user": {"reputation": 16089, "user_id": 726239, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/l4w57.jpg?s=128&g=1", "display_name": "Shaunak", "link": "https://stackoverflow.com/users/726239/shaunak"}, "edited": false, "score": 0, "creation_date": 1470254630, "post_id": 38751938, "comment_id": 64879223, "body": "I was getting a error message that said &quot;<code>undefined local variable or method bookmark for #&lt;#&lt;Class:0x007fdfb1b39c80&gt;:0x007fdfb1c67ee0&gt;Did you mean?  bookmark_url or @bookmarks</code>  also thank you for asking that, it made me go back and examine a few things."}], "answers": [{"tags": [], "owner": {"reputation": 111, "user_id": 6246328, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/e05f278aae0408d3bfd1cdd4203576d4?s=128&d=identicon&r=PG&f=1", "display_name": "SinGar", "link": "https://stackoverflow.com/users/6246328/singar"}, "is_accepted": false, "score": 0, "last_activity_date": 1470259043, "creation_date": 1470259043, "answer_id": 38753806, "question_id": 38751938, "link": "https://stackoverflow.com/questions/38751938/trying-to-adapt-code-form-one-of-my-views-to-be-rendered-in-a-partial/38753806#38753806", "title": "Trying to adapt code form one of my views to be rendered in a partial", "body": "<p>I figured out my problem, I could not use the partial because the partial <code>app/views/likes/_likes.html.erb</code> was taking in a different variable than was being passed by <code>app/views/bookmarks/_bookmarksandlikes.html.erb</code> so I just put the needed code into <code>app/views/bookmarks/_bookmarksandlikes.html.erb</code> and adapted it like so.</p>\n\n<pre><code>&lt;div class=row&gt;\n    &lt;h3&gt;\n        &lt;%y=1%&gt;\n        &lt;% mark.each do |x| %&gt;\n        &lt;%=y%&gt;)&lt;%= link_to x.url, x.url%&gt;&lt;br&gt;\n        &lt;%y=y+1%&gt;\n        &lt;%= link_to \"Edit bookmark\", edit_topic_bookmark_path(x.topic, x), class: 'btn btn-primary btn-xs'%&gt;&lt;br&gt;\n        &lt;%= link_to \"Delete bookmark\", [x.topic, x], method: :delete, class: 'btn btn-danger btn-xs', data: { confirm: 'Are you sure you want to delete this bookmark?' } %&gt;&lt;br&gt;\n        &lt;% if like = current_user.liked(x) %&gt;\n        &lt;%= link_to [x, like], class: 'btn btn-danger', method: :delete do %&gt;\n        &lt;i class=\"glyphicon glyphicon-star-empty\"&gt;&lt;/i&gt;&amp;nbsp; Unlike\n        &lt;% end %&gt;\n    &lt;% else %&gt;\n        &lt;%= link_to [x, Like.new], class: 'btn btn-primary', method: :post do %&gt;\n        &lt;i class=\"glyphicon glyphicon-star\"&gt;&lt;/i&gt;&amp;nbsp; Like\n        &lt;% end %&gt;\n        &lt;br&gt;\n        &lt;% end %&gt;\n        &lt;%end%&gt;\n\n    &lt;/h3&gt;\n  &lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 6246328, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/e05f278aae0408d3bfd1cdd4203576d4?s=128&d=identicon&r=PG&f=1", "display_name": "SinGar", "link": "https://stackoverflow.com/users/6246328/singar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470259043, "creation_date": 1470251810, "last_edit_date": 1470254420, "question_id": 38751938, "link": "https://stackoverflow.com/questions/38751938/trying-to-adapt-code-form-one-of-my-views-to-be-rendered-in-a-partial", "title": "Trying to adapt code form one of my views to be rendered in a partial", "body": "<p>I have a partial that takes a column from a database a iterates over it and displays all the urls on the web page. I want to add the lines that I have written in my <code>app/views/topics/show.html.erb</code> page that allow the user to edit, delete, or like the link.</p>\n\n<p>These are the three lines I want to adapt to be added to the partial, the first two are buttons to carry out the edit and delete function and the third is a link to a partial with the like code.</p>\n\n<pre><code>&lt;%= link_to \"Edit bookmark\", edit_topic_bookmark_path(bookmark.topic, bookmark), class: 'btn btn-primary btn-xs'%&gt;&lt;br&gt;\n&lt;%= link_to \"Delete bookmark\", [bookmark.topic, bookmark], method: :delete, class: 'btn btn-danger btn-xs', data: { confirm: 'Are you sure you want to delete this bookmark?' } %&gt;\n&lt;%= render partial: 'likes/likes', locals: { bookmark: bookmark } %&gt;\n</code></pre>\n\n<p>this is the partial I would like to adapt it to located in <code>app/views/bookmarks/_bookmarksandlikes.html.erb</code></p>\n\n<pre><code>&lt;div&gt;\n    &lt;h3&gt;\n        &lt;%y=1%&gt;\n        &lt;% mark.each do |x| %&gt;\n            &lt;%=y%&gt;)&lt;%= link_to x.url, x.url%&gt;\n            &lt;%y=y+1%&gt;\n\n        &lt;% end %&gt;\n    &lt;/h3&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>and it is being called from <code>app/views/users/show.html.erb</code> with these two lines.</p>\n\n<pre><code> &lt;%= render partial: 'bookmarks/bookmarksandlikes', locals: { mark: @bookmarks} %&gt;\n &lt;%= render partial: 'bookmarks/bookmarksandlikes', locals: { mark: @liked_bookmarks} %&gt;\n</code></pre>\n\n<p>here is how I have tried to insert the code into the partial</p>\n\n<pre><code>&lt;div&gt;\n  &lt;h3&gt;\n    &lt;%y=1%&gt;\n    &lt;% mark.each do |x| %&gt;\n      &lt;%=y%&gt;)&lt;%= link_to x.url, x.url%&gt;\n      &lt;%y=y+1%&gt;\n      &lt;%= link_to \"Edit bookmark\", edit_topic_bookmark_path(x.topic, x), class: 'btn btn-primary btn-xs'%&gt;&lt;br&gt;\n      &lt;%= link_to \"Delete bookmark\", [x.topic, x], method: :delete, class: 'btn btn-danger btn-xs', data: { confirm: 'Are you sure you want to delete this bookmark?' } %&gt;\n      &lt;%= render partial: 'likes/likes', locals: { x: x } %&gt;\n   &lt;%end%&gt;\n &lt;/h3&gt;\n</code></pre>\n\n<p></p>\n\n<p>when I run the code as is I get an error page that says \"<code>undefined local variable or method 'bookmark' for #&lt;#&lt;Class:0x007fdfb1b39c80&gt;:0x007fdfb1988d50&gt; Did you mean?  bookmark_url or @bookmarks</code></p>\n\n<p>and says there is a problem on line 3 of the partial with the code for liking a page in <code>app/views/likes/_likes.html.erb</code></p>\n\n<pre><code>&lt;% if policy(Like.new).create? %&gt;\n  &lt;div&gt;\n    &lt;% if like = current_user.liked(bookmark) %&gt;\n    &lt;%= link_to [bookmark, like], class: 'btn btn-danger', method: :delete do %&gt;\n      &lt;i class=\"glyphicon glyphicon-star-empty\"&gt;&lt;/i&gt;&amp;nbsp; Unlike\n    &lt;% end %&gt;\n&lt;% else %&gt;\n  &lt;%= link_to [bookmark, Like.new], class: 'btn btn-primary', method: :post do %&gt;\n    &lt;i class=\"glyphicon glyphicon-star\"&gt;&lt;/i&gt;&amp;nbsp; Like\n  &lt;% end %&gt;\n&lt;% end %&gt;\n&lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>side note at this point in working through this problem, it appears that only the third line for the partial I am trying to insert is giving me problems, the edit and delete buttons are rendering nicely. </p>\n\n<p>Even if you don't know the answer I am quite keen to hear any thoughts on what I am not considering in this question or just your thoughts, also if you need more information please just let me know and I will post more.</p>\n\n<p>Thanks for looking at my question.</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 1905, "user_id": 232838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8342950f34a66d9ec7cfe10b33d5494c?s=128&d=identicon&r=PG", "display_name": "koffeinfrei", "link": "https://stackoverflow.com/users/232838/koffeinfrei"}, "edited": false, "score": 1, "creation_date": 1470251340, "post_id": 38751748, "comment_id": 64877398, "body": "What exactly is your desired result?"}, {"owner": {"reputation": 191, "user_id": 1964320, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b3c2ad4841578dac172935bfb2cdeba3?s=128&d=identicon&r=PG", "display_name": "Curious_Bop", "link": "https://stackoverflow.com/users/1964320/curious-bop"}, "reply_to_user": {"reputation": 1905, "user_id": 232838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8342950f34a66d9ec7cfe10b33d5494c?s=128&d=identicon&r=PG", "display_name": "koffeinfrei", "link": "https://stackoverflow.com/users/232838/koffeinfrei"}, "edited": false, "score": 0, "creation_date": 1470251560, "post_id": 38751748, "comment_id": 64877512, "body": "Updated question with my desired result."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1470258272, "post_id": 38751748, "comment_id": 64881013, "body": "In the first instance you say you want a single string (<code>&quot;12345&quot;</code>). Later you say you want an array of three integers. Which is it? In any event, if you want an array containing the first part of every line, that obviously gives you the first part of the first line, so I don&#39;t understand why the question even mentions the first line."}], "answers": [{"tags": [], "owner": {"reputation": 1905, "user_id": 232838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8342950f34a66d9ec7cfe10b33d5494c?s=128&d=identicon&r=PG", "display_name": "koffeinfrei", "link": "https://stackoverflow.com/users/232838/koffeinfrei"}, "is_accepted": false, "score": 0, "last_activity_date": 1470251602, "creation_date": 1470251602, "answer_id": 38751882, "question_id": 38751748, "link": "https://stackoverflow.com/questions/38751748/ruby-split-initial-file-contents-into-array/38751882#38751882", "title": "ruby split initial file contents into array", "body": "<pre><code>File.readlines('results.txt').map { |line| line.split(',') }.map(&amp;:first)\n=&gt; [\"12345\", \"23456\", \"34567\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1470268879, "last_edit_date": 1470268879, "creation_date": 1470256613, "answer_id": 38753172, "question_id": 38751748, "link": "https://stackoverflow.com/questions/38751748/ruby-split-initial-file-contents-into-array/38753172#38753172", "title": "ruby split initial file contents into array", "body": "<p>Here are a couple of ways to do that. First create the file.</p>\n\n<pre><code>txt =&lt;&lt;_\n12345,500,500\n23456,100,150\n34567,99,109\")\n_\n\nFName = \"tmp\"\nFile.write(FName, txt)\n  #=&gt; 43\n</code></pre>\n\n<p><strong>#1</strong></p>\n\n<pre><code>File.foreach(FName).map { |line| line[0, line.index(',')] }\n  #=&gt; [\"12345\", \"23456\", \"34567\"]\n</code></pre>\n\n<p><strong>#2</strong></p>\n\n<pre><code>File.foreach(FName).map { |line| line.to_i.to_s }\n  #=&gt; [\"12345\", \"23456\", \"34567\"]\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/core-2.3.0/IO.html#method-c-foreach\" rel=\"nofollow\">IO#foreach</a> reads the file line-by-line, as contrasted by <a href=\"http://ruby-doc.org/core-2.3.0/IO.html#method-c-readlines\" rel=\"nofollow\">IO#readlines</a>, which \"gulps\" the entire file into an array. <code>foreach</code> is therefore less demanding of memory than <code>readlines</code>. You can write either <code>IO.foreach...</code> or <code>File.foreach...</code> as <code>File</code> is a subclass of <code>IO</code> (<code>File &lt; IO #=&gt; true</code>). </p>\n"}], "owner": {"reputation": 191, "user_id": 1964320, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/b3c2ad4841578dac172935bfb2cdeba3?s=128&d=identicon&r=PG", "display_name": "Curious_Bop", "link": "https://stackoverflow.com/users/1964320/curious-bop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 38753172, "answer_count": 2, "score": 1, "last_activity_date": 1470268879, "creation_date": 1470251111, "last_edit_date": 1470251485, "question_id": 38751748, "link": "https://stackoverflow.com/questions/38751748/ruby-split-initial-file-contents-into-array", "title": "ruby split initial file contents into array", "body": "<p>I have a file that I am reading that follows the following format:</p>\n\n<pre><code>12345,500,500\n23456,100,150\n34567,99,109\n</code></pre>\n\n<p>What I'm trying to do is read up until the first comma of the file and then map them into an array.</p>\n\n<pre><code>test = File.read('results.txt').split(',')[0]\np test \n =&gt; \"12345\" \n</code></pre>\n\n<p>would return me back the first value before the comma but I want to put all of them into an array</p>\n\n<pre><code>test = File.read('results.txt').split(',')[0].map(&amp;:strip)\n</code></pre>\n\n<p>I have tried the following above and other similar permutations but  unfortunately it's not quite the right it seems.</p>\n\n<p>my desired result is to have an array of the following</p>\n\n<pre><code>[12345,23456,34567]\n</code></pre>\n"}, {"tags": ["ruby", "oracle", "activerecord"], "comments": [{"owner": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "edited": false, "score": 0, "creation_date": 1470254183, "post_id": 38751494, "comment_id": 64878991, "body": "Have you taken a look at <a href=\"http://stackoverflow.com/questions/3661546/how-to-require-active-record-working-outside-of-rails?\">this question?</a> It appears you can do <code>require &#39;active_record&#39;</code> and it should work."}, {"owner": {"reputation": 1, "user_id": 3246016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71396fc9842eeb355acf8bd59c8c888d?s=128&d=identicon&r=PG&f=1", "display_name": "Krithiga", "link": "https://stackoverflow.com/users/3246016/krithiga"}, "reply_to_user": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "edited": false, "score": 0, "creation_date": 1470254684, "post_id": 38751494, "comment_id": 64879249, "body": "Thank you @Cory Shay!! And yes , I did both: require &#39;active_record&#39; and  require &#39;activerecord-oracle_enhanced-adapter&#39;. Still the same error and other link you gave uses &#39;mysql&#39; adapter."}, {"owner": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "edited": false, "score": 0, "creation_date": 1470255275, "post_id": 38751494, "comment_id": 64879559, "body": "What version of oracle enhanced adapter do you have? May be related to these issues: <a href=\"https://github.com/rsim/oracle-enhanced/issues/893\" rel=\"nofollow noreferrer\">#893</a>  and <a href=\"https://github.com/rsim/oracle-enhanced/issues/889\" rel=\"nofollow noreferrer\">#889</a>."}, {"owner": {"reputation": 1, "user_id": 3246016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71396fc9842eeb355acf8bd59c8c888d?s=128&d=identicon&r=PG&f=1", "display_name": "Krithiga", "link": "https://stackoverflow.com/users/3246016/krithiga"}, "reply_to_user": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "edited": false, "score": 0, "creation_date": 1470256487, "post_id": 38751494, "comment_id": 64880129, "body": "@Cory Shay, Thank you so much. I had activerecord-oracle_enhanced-adapter-1.6.7 so I uninstalled and installed activerecord-oracle_enhanced-adapter -v 1.7.0.beta1 and this solved the issue. Thank you so much!!"}, {"owner": {"reputation": 1096, "user_id": 6061947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/99f89bd4c6b19d14dc3d682c08242cc4?s=128&d=identicon&r=PG&f=1", "display_name": "Cory Shay", "link": "https://stackoverflow.com/users/6061947/cory-shay"}, "edited": false, "score": 0, "creation_date": 1470256520, "post_id": 38751494, "comment_id": 64880147, "body": "No problem, glad to hear!"}], "owner": {"reputation": 1, "user_id": 3246016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71396fc9842eeb355acf8bd59c8c888d?s=128&d=identicon&r=PG&f=1", "display_name": "Krithiga", "link": "https://stackoverflow.com/users/3246016/krithiga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 886, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470250253, "creation_date": 1470250253, "question_id": 38751494, "link": "https://stackoverflow.com/questions/38751494/uninitialized-constant-activerecordconnectionadaptersoracleenhancedcolumnf", "title": "uninitialized constant ActiveRecord::ConnectionAdapters::OracleEnhancedColumn::FALSE_VALUES (NameError) in Ruby (not using Rails) and Oracle", "body": "<p>I am writing a test in Ruby (2.3.00p0) and Oracle client (12.1.0.2). I am using below code to connect to Oracle </p>\n\n<pre><code>ActiveRecord::Base.establish_connection(\n :adapter=&gt;'oracle_enhanced',\n :database=&gt;'DBName:1521',\n :username=&gt;'username',\n :password=&gt;'password'\n)\n</code></pre>\n\n<p>I am not using Rails as I this is functional tests written in Ruby and Cucumber. OS is Mac. I have installed ruby-oci8 and all other gems needed. Still getting the error \nuninitialized constant ActiveRecord::ConnectionAdapters::OracleEnhancedColumn::FALSE_VALUES (NameError)</p>\n\n<p>Can someone please help me resolve this issue. All the articles and solutions are related to rails and not plain ruby.</p>\n\n<p>TIA</p>\n"}, {"tags": ["php", "ruby-on-rails", "ruby", "apache"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6586190"}, "edited": false, "score": 0, "creation_date": 1470250542, "post_id": 38751510, "comment_id": 64876971, "body": "Thanks. But as I understood from this installation guide <a href=\"https://nathanhoad.net/how-to-ruby-on-rails-ubuntu-apache-with-passenger\" rel=\"nofollow noreferrer\">nathanhoad.net/&hellip;</a>   it&#39;s talking about installation on Apache ( No WEBrick )  About my second question. What that command actually does? In case of PHP applications there is nothing similar to that."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1470251241, "post_id": 38751510, "comment_id": 64877338, "body": "@SonyaSeyrios, the command <code>$rails server</code> starts the ruby WEBrick sever, which listens on port 3000 for requests, so if you enter a url like:  <code>http:&#47;&#47;localhost:3000&#47;users&#47;</code> that will be handled by the WEBrick server.  On the other hand, your Apache server will probably be setup to listen on port 8000 or 8080 for requests, so if you enter a url like <code>http:&#47;&#47;localhost:8000&#47;users&#47;</code>, then Apache will handle that request.  You don&#39;t want to start the WEBrick server if you aren&#39;t going to use it.  Instead, start your Apache server however you do it, then enter urls in your browser."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1470251629, "post_id": 38751510, "comment_id": 64877550, "body": "@SonyaSeyrios,  Both WEBrick and Apache are computer programs.  They are both servers.  You can use which ever one you want.  Both have certain commands that you have to issue to start the sever."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6586190"}, "edited": false, "score": 0, "creation_date": 1470251641, "post_id": 38751510, "comment_id": 64877556, "body": "To conclude:   1. It&#39;s possible to install Rails on Apache (not WEBrick), as described in sent link. Subsequently, it will listen to 8000/8080 port, as PHP.  2. If I do like that, I may not use the command &gt;rails server, as Apache already works.  Please correct if I&#39;m wrong."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1470251774, "post_id": 38751510, "comment_id": 64877626, "body": "Right.  You don&#39;t want to start the ruby WEBrick server--using the command <code>rails server</code>--if you are not going to use that server."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1470252085, "post_id": 38751510, "comment_id": 64877825, "body": "@SonyaSeyrios, If you were confused by my use of <code>WEBrick</code> as the name of the server that <code>rails server</code> starts--it looks like <code>rails server</code> now starts a server named <code>Puma</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6586190"}, "edited": false, "score": 0, "creation_date": 1470252118, "post_id": 38751510, "comment_id": 64877850, "body": "Thanks. And finally, which option do you prefer? Use one server for both PHP and Rails, or use WEBrick for Rails?"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1470252315, "post_id": 38751510, "comment_id": 64877952, "body": "@SonyaSeyrios, If you are just learning Rails and following the Rails tutorial, I would stick with whatever they use.  I have apache+php installed, and I&#39;ve never used apache for rails development.  I just use <code>rails sever</code> to start the server, then I look at the server output to see what url/port I need to enter into my browser.  It&#39;s much easier to use <code>rails server</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6586190"}, "edited": false, "score": 0, "creation_date": 1470252811, "post_id": 38751510, "comment_id": 64878254, "body": "Yes, I&#39;m reading &quot;Agile web development on Rails&quot;. Here is what confused me:    &quot; Maybe you\u2019ve been following along and writing the code in this chapter. If so, chances are that the application is still running on your computer. When we start coding our next application in ten pages or so, we\u2019ll get a conflict the first time we run it, because it will also try to use the computer\u2019s port 3000 to talk with the browser. Now would be a good time to stop the current application by pressing Ctrl-C in the window you used to start it. &quot;. Comments?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6586190"}, "edited": false, "score": 0, "creation_date": 1470253151, "post_id": 38751510, "comment_id": 64878467, "body": "What if I have several applications?"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1470336765, "post_id": 38751510, "comment_id": 64921926, "body": "@SonyaSeyrios, See here: <a href=\"http://stackoverflow.com/questions/1694144/can-two-applications-listen-to-the-same-port\" title=\"can two applications listen to the same port\">stackoverflow.com/questions/1694144/&hellip;</a>"}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": true, "score": 1, "last_activity_date": 1470250750, "last_edit_date": 1470250750, "creation_date": 1470250309, "answer_id": 38751510, "question_id": 38751270, "link": "https://stackoverflow.com/questions/38751270/rails-and-php-on-one-server/38751510#38751510", "title": "Rails and PHP on one server", "body": "<ol>\n<li><p>A server like Apache handles requests.  If you make a request to a php program, then the php program will execute.  If you make a request to a ruby program (i.e. a rails program), then the ruby program will execute.  Typically, you will add a shebang line to a ruby program:</p>\n\n<pre><code>#!/usr/bin/env ruby\n</code></pre>\n\n<p>so that the server knows to use ruby to execute the program.</p></li>\n<li><p><code>$ rails server</code> starts the WEBrick server, which is a ruby server and has nothing to do with Apache.</p></li>\n</ol>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6586190"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 38751510, "answer_count": 1, "score": 1, "last_activity_date": 1470250750, "creation_date": 1470249430, "question_id": 38751270, "link": "https://stackoverflow.com/questions/38751270/rails-and-php-on-one-server", "title": "Rails and PHP on one server", "body": "<p>I have Apache server with installed PHP by default. There are several applications working on PHP, and I'm going to run there applications on Rails also.</p>\n\n<ol>\n<li>If I install also Ruby and Rails, may applications on PHP somehow interfere the applications on Rails?</li>\n<li>In Rails tutorial there is a command '<strong>>rails server</strong>' to run the server. If I already use the server for applications on PHP, should I use that command? If so, what would it do?</li>\n</ol>\n\n<p>My appreciation for response.</p>\n"}, {"tags": ["ruby", "github", "jekyll", "github-pages"], "comments": [{"owner": {"reputation": 2574, "user_id": 4162641, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-QCRH93REO58/AAAAAAAAAAI/AAAAAAAAA20/uZA4Z48QSc0/photo.jpg?sz=128", "display_name": "StephenG", "link": "https://stackoverflow.com/users/4162641/stepheng"}, "edited": false, "score": 0, "creation_date": 1470257723, "post_id": 38751059, "comment_id": 64880756, "body": "Have you tried removing the <code>Gemfile</code> and <code>Gemfile.lock</code> as well as removing the <code>gems</code> attribute from the <code>_config.yml</code>? This is speculation, but those could be interfering with Github Page build configs"}, {"owner": {"reputation": 47, "user_id": 1644438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a63a43e07e76c46e52cda22edc40c90d?s=128&d=identicon&r=PG", "display_name": "Emilio", "link": "https://stackoverflow.com/users/1644438/emilio"}, "reply_to_user": {"reputation": 2574, "user_id": 4162641, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-QCRH93REO58/AAAAAAAAAAI/AAAAAAAAA20/uZA4Z48QSc0/photo.jpg?sz=128", "display_name": "StephenG", "link": "https://stackoverflow.com/users/4162641/stepheng"}, "edited": false, "score": 0, "creation_date": 1470259429, "post_id": 38751059, "comment_id": 64881535, "body": "Thanks for the answer! I have tried removing Gemfiles and gems from config but unfortunately the problem persists"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 1644438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a63a43e07e76c46e52cda22edc40c90d?s=128&d=identicon&r=PG", "display_name": "Emilio", "link": "https://stackoverflow.com/users/1644438/emilio"}, "edited": false, "score": 0, "creation_date": 1470255567, "post_id": 38752814, "comment_id": 64879699, "body": "Hi! Thanks for the answer. Actually, that config was added last just to &quot;give it a try&quot;...this is, to make sure the solution wasn&#39;t that silly! As you may see, I took it off now and the problem persists: locally it works but not when uploaded to GitHub"}], "tags": [], "owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "is_accepted": true, "score": 0, "last_activity_date": 1470260636, "last_edit_date": 1470260636, "creation_date": 1470255244, "answer_id": 38752814, "question_id": 38751059, "link": "https://stackoverflow.com/questions/38751059/jekyll-github-metadata-working-locally-but-not-in-github/38752814#38752814", "title": "jekyll-github-metadata working locally but not in GitHub", "body": "<p><strong>Edit</strong> : I've forked your repository at <a href=\"https://statiktest.github.io/emilioidk.github.io/GitHub/\" rel=\"nofollow\">https://statiktest.github.io/emilioidk.github.io/GitHub/</a></p>\n\n<p>As you can see we have <code>public_repositories : false</code>. </p>\n\n<p>I think it's a bug and you can open an issue on <a href=\"https://github.com/jekyll/github-metadata/issues/new\" rel=\"nofollow\">https://github.com/jekyll/github-metadata/issues/new</a></p>\n\n<p><strong>end edit /</strong></p>\n\n<p>You problem is with you <code>github: emilioidk</code>. It becomes <code>site.github</code> and thus overrides jekyll metadatas in <code>site.github</code>.</p>\n\n<p>Remove <code>github: emilioidk</code> from your <strong>_config.yml</strong>.</p>\n\n<p>And the problem is the same locally. I'm surprised that it works for you.</p>\n"}, {"tags": [], "owner": {"reputation": 47, "user_id": 1644438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a63a43e07e76c46e52cda22edc40c90d?s=128&d=identicon&r=PG", "display_name": "Emilio", "link": "https://stackoverflow.com/users/1644438/emilio"}, "is_accepted": false, "score": 1, "last_activity_date": 1470297807, "last_edit_date": 1592644375, "creation_date": 1470297807, "answer_id": 38761729, "question_id": 38751059, "link": "https://stackoverflow.com/questions/38751059/jekyll-github-metadata-working-locally-but-not-in-github/38761729#38761729", "title": "jekyll-github-metadata working locally but not in GitHub", "body": "<p>Contacted support from GitHub, it was a problem in their end and it is solved now</p>\n<blockquote>\n<p>Hey Emilio,</p>\n<p>Sorry about that, we had a bug on our end that caused the github-metadata gem to stop working for about 40 hours.</p>\n<p>It should be working now though.</p>\n</blockquote>\n"}], "owner": {"reputation": 47, "user_id": 1644438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a63a43e07e76c46e52cda22edc40c90d?s=128&d=identicon&r=PG", "display_name": "Emilio", "link": "https://stackoverflow.com/users/1644438/emilio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 38752814, "answer_count": 2, "score": 0, "last_activity_date": 1470297807, "creation_date": 1470248660, "last_edit_date": 1470260664, "question_id": 38751059, "link": "https://stackoverflow.com/questions/38751059/jekyll-github-metadata-working-locally-but-not-in-github", "title": "jekyll-github-metadata working locally but not in GitHub", "body": "<p>I have my GitHub page set up as a homepage. When I develop locally I use github-metadata for displaying information about my repositories and it works fine (I even uploaded _site to show how the page is built). Nevertheless when I pushed the page to GitHub, the information is not being displayed.</p>\n\n<p>Repository: <a href=\"https://github.com/emilioidk/emilioidk.github.io\" rel=\"nofollow\">https://github.com/emilioidk/emilioidk.github.io</a></p>\n\n<p>Gemfile</p>\n\n<pre><code>source 'https://rubygems.org'\ngem 'jekyll-github-metadata'\ngem 'github-pages', group: :jekyll_plugins\n</code></pre>\n\n<p>_config.yml (redundant github information for testing)</p>\n\n<pre><code>github_username:  emilioidk\ngithub: emilioidk\nrepository: emilioidk/emilioidk.github.io\ngems: ['jekyll-github-metadata']\n</code></pre>\n\n<p>Edit:\nI have tried removing github from config file. No positive results.\nI have tried removing Gemfile, Gemfile.lock and gems from config file. No positive result.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "paypal", "activemerchant"], "answers": [{"tags": [], "owner": {"reputation": 496, "user_id": 5537203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88445e66d439bb5df0fdf9876049cbdc?s=128&d=identicon&r=PG&f=1", "display_name": "pk-n", "link": "https://stackoverflow.com/users/5537203/pk-n"}, "is_accepted": true, "score": 0, "last_activity_date": 1470292425, "creation_date": 1470292425, "answer_id": 38760028, "question_id": 38750830, "link": "https://stackoverflow.com/questions/38750830/getting-error-with-paypal-activemerchant-a-field-was-longer-or-shorter-than/38760028#38760028", "title": "getting error with paypal, activemerchant -- A field was longer or shorter than the server allows", "body": "<p>I changed<br>\n<code>gateway = ActiveMerchant::Billing::TrustCommerceGateway.new</code> </p>\n\n<p>to</p>\n\n<pre><code>gateway = ActiveMerchant::Billing::PaypalGateway.new\n</code></pre>\n\n<p>and it worked fine.</p>\n"}], "owner": {"reputation": 496, "user_id": 5537203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88445e66d439bb5df0fdf9876049cbdc?s=128&d=identicon&r=PG&f=1", "display_name": "pk-n", "link": "https://stackoverflow.com/users/5537203/pk-n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 38760028, "answer_count": 1, "score": 0, "last_activity_date": 1470292425, "creation_date": 1470247835, "last_edit_date": 1470248339, "question_id": 38750830, "link": "https://stackoverflow.com/questions/38750830/getting-error-with-paypal-activemerchant-a-field-was-longer-or-shorter-than", "title": "getting error with paypal, activemerchant -- A field was longer or shorter than the server allows", "body": "<p>I am trying to implement paypal payment gateway using activemerchet but getting error-A field was longer or shorter than the server allows</p>\n\n<p>i am using credrntials of pro account. I saw other SO questions but it was not helpful</p>\n\n<pre><code>    require 'rubygems'\n    require 'active_merchant'\n    ActiveMerchant::Billing::Base.mode = :test\n\n    gateway = ActiveMerchant::Billing::TrustCommerceGateway.new(\n                :login =&gt; 'XXX@gmail.com',\n                :password =&gt; 'my_password',\n                :signature =&gt; 'my_signature')\n\n    credit_card = ActiveMerchant::Billing::CreditCard.new(\n                    :first_name         =&gt; 'f_name',\n                    :last_name          =&gt; 'l_name',\n                    :number             =&gt; '4032034467080704',\n                    :month              =&gt; '9',\n                    :year               =&gt; '2021',\n                    :verification_value =&gt; '123',\n                    :brand =&gt; 'VISA'\n                    )\n\n    AMOUNT = 1000\n      def purchase_options\n        {\n            ip: \"127.0.0.1\",\n            billing_address: {\n                name:      \"Flaying Cakes\",\n                address1:  \"123 5th Av.\",\n                city:      \"New York\",\n                state:     \"NY\",\n                country:   \"US\",\n                zip:       \"10001\"\n            }\n        }\n      end\n\nif credit_card.validate.empty?\n    response = gateway.purchase(AMOUNT, credit_card, purchase_options)\n    if response.success?\n      puts \"Successfully charged to the credit card #{credit_card.display_number}\"\n    else\n       raise StandardError, response.message\n    end\nelse\n    puts \"credit card is not valid #{credit_card.errors.full_messages.join(\". \")}\"\nend\n</code></pre>\n"}, {"tags": ["ruby", "nan"], "comments": [{"owner": {"reputation": 9160, "user_id": 1300194, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/oBkyV.jpg?s=128&g=1", "display_name": "Awlad Liton", "link": "https://stackoverflow.com/users/1300194/awlad-liton"}, "edited": false, "score": 0, "creation_date": 1470248403, "post_id": 38750796, "comment_id": 64875713, "body": "<a href=\"https://www.ruby-forum.com/topic/6726568\" rel=\"nofollow noreferrer\">ruby-forum.com/topic/6726568</a>"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1470250588, "post_id": 38751389, "comment_id": 64876993, "body": "Excellent answer! Would this work <code>[1, 2, 3, &#39;a&#39;, &#39;b&#39;, Float::NAN].any? { |e| e != e } #=&gt; true</code>? That is, are there any other Ruby objects <code>e</code> for which <code>e != 3 #=&gt; true</code>?"}, {"owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1470251125, "post_id": 38751389, "comment_id": 64877279, "body": "Good idea, but I&#39;m afraid it would considerably increase the wtf/loc ratio. :) BTW, I have no idea whether any other class redefined <code>==</code> this way."}], "tags": [], "owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "is_accepted": true, "score": 2, "last_activity_date": 1470249868, "last_edit_date": 1495542776, "creation_date": 1470249868, "answer_id": 38751389, "question_id": 38750796, "link": "https://stackoverflow.com/questions/38750796/how-to-check-if-an-array-contains-floatnan/38751389#38751389", "title": "How to check if an array contains Float::NAN", "body": "<p>To check, you can use:</p>\n\n<pre><code>[1, 2, 3, 'a', 'b', Float::NAN].any?{|item| item.respond_to?(:nan?) &amp;&amp; item.nan?}\n</code></pre>\n\n<p>(or <code>try</code>, if you use Rails)</p>\n\n<p>And as for <em>why</em>, take a look at <a href=\"https://stackoverflow.com/questions/1565164/what-is-the-rationale-for-all-comparisons-returning-false-for-ieee754-nan-values/1573715\">What is the rationale for all comparisons returning false for IEEE754 NaN values?</a></p>\n"}], "owner": {"reputation": 1984, "user_id": 2623749, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fcbbc9a5894aea56bce09a71a25e560f?s=128&d=identicon&r=PG", "display_name": "Lokesh", "link": "https://stackoverflow.com/users/2623749/lokesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "accepted_answer_id": 38751389, "answer_count": 1, "score": 2, "last_activity_date": 1470249909, "creation_date": 1470247692, "last_edit_date": 1470249909, "question_id": 38750796, "link": "https://stackoverflow.com/questions/38750796/how-to-check-if-an-array-contains-floatnan", "title": "How to check if an array contains Float::NAN", "body": "<p>I find this behavior rather strange</p>\n\n<pre><code>&gt; [1, 2, 3, 'a', 'b', Float::NAN].include? Float::NAN\nfalse\n</code></pre>\n\n<p>I tried this then and got surprised</p>\n\n<pre><code>&gt; Float::NAN == Float::NAN\nfalse\n</code></pre>\n\n<p>So, to check for <code>Float::NAN</code>, I had to resort to </p>\n\n<pre><code>&gt; [1, 2, 3, 'a', 'b', Float::NAN].any? { |i| i.is_a?(Float) &amp;&amp; i.nan? }\ntrue\n</code></pre>\n\n<p>So,</p>\n\n<ol>\n<li>Is there a better way to check for <code>Float::NAN</code> in an array?</li>\n<li>Why is there such a weird behavior with <code>Float::NAN</code>?</li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "range"], "comments": [{"owner": {"reputation": 3129, "user_id": 227397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lVdnG.jpg?s=128&g=1", "display_name": "Jeff Price", "link": "https://stackoverflow.com/users/227397/jeff-price"}, "edited": false, "score": 0, "creation_date": 1470247276, "post_id": 38750603, "comment_id": 64875134, "body": "I imagine if the ranges are in sorted order you could reverse the array and start slicing from the back working forward?"}, {"owner": {"reputation": 25043, "user_id": 1417223, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dbdfe3d2d5f87f172757ada1438f3d16?s=128&d=identicon&r=PG", "display_name": "Fellow Stranger", "link": "https://stackoverflow.com/users/1417223/fellow-stranger"}, "reply_to_user": {"reputation": 3129, "user_id": 227397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lVdnG.jpg?s=128&g=1", "display_name": "Jeff Price", "link": "https://stackoverflow.com/users/227397/jeff-price"}, "edited": false, "score": 0, "creation_date": 1470247377, "post_id": 38750603, "comment_id": 64875174, "body": "Heh! :) I actually just came to think of that possibility, but then I realized that the ranges will sometimes overlap. So it&#39;s still not a good solution. See update."}], "answers": [{"comments": [{"owner": {"reputation": 25043, "user_id": 1417223, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dbdfe3d2d5f87f172757ada1438f3d16?s=128&d=identicon&r=PG", "display_name": "Fellow Stranger", "link": "https://stackoverflow.com/users/1417223/fellow-stranger"}, "edited": false, "score": 0, "creation_date": 1470249326, "post_id": 38750712, "comment_id": 64876233, "body": "Excellent. But I assume the second part could be done like this equally well? <code>a1 - reject.to_a</code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 25043, "user_id": 1417223, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dbdfe3d2d5f87f172757ada1438f3d16?s=128&d=identicon&r=PG", "display_name": "Fellow Stranger", "link": "https://stackoverflow.com/users/1417223/fellow-stranger"}, "edited": false, "score": 0, "creation_date": 1470251230, "post_id": 38750712, "comment_id": 64877328, "body": "@FellowStranger Since <code>a1</code> contains values and not offsets, no, you can&#39;t do that. You&#39;d have to convert the ranges to values, and that also presumes that the values are unique, which they may not be."}, {"owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 0, "creation_date": 1470252161, "post_id": 38750712, "comment_id": 64877869, "body": "but it could be like this a1 - a2.flat_map(&amp;:to_a)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 0, "creation_date": 1470253197, "post_id": 38750712, "comment_id": 64878488, "body": "@fanta Again, this presumes the values in <code>a1</code> are indicies and not random values."}, {"owner": {"reputation": 25043, "user_id": 1417223, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dbdfe3d2d5f87f172757ada1438f3d16?s=128&d=identicon&r=PG", "display_name": "Fellow Stranger", "link": "https://stackoverflow.com/users/1417223/fellow-stranger"}, "edited": false, "score": 0, "creation_date": 1475672668, "post_id": 38750712, "comment_id": 67036004, "body": "This doesn&#39;t work in cases where <code>a1</code> doesn&#39;t start from 0. E.g. <code>a1 = [*10..20]</code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1475687328, "post_id": 38750712, "comment_id": 67046573, "body": "It wasn&#39;t clear in your original example if you wanted values in <code>a1</code> excluded by their index or if you wanted them excluded by their <i>value</i>. If you want them excluded by value, it&#39;s really easy: <code>a1 - a2.flat_map(&amp;:to_a)</code>"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1470247380, "creation_date": 1470247380, "answer_id": 38750712, "question_id": 38750603, "link": "https://stackoverflow.com/questions/38750603/remove-multiple-ranges-of-values-from-array/38750712#38750712", "title": "Remove multiple ranges of values from array", "body": "<p>If the result of the first operation impacts the second you're either going to have to track the resulting offset implications, which can get crazy complicated, or simply go about doing the reverse operation and instead flag which you want or don't want using the ranges:</p>\n\n<pre><code>require 'set'\n\na1 = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]\na2 = [2..4, 8..11, 16..17]\n\n# Convert the ranges to a set of index values to remove\nreject = Set.new(a2.flat_map(&amp;:to_a))\n\n# Using value/index pairs, accumulate those values which are\n# not being excluded by their index.\na1.each_with_index.each_with_object([ ]) do |(v, i), a|\n  a &lt;&lt; v unless (reject.include?(i))\nend\n\n# =&gt; [0, 1, 5, 6, 7, 12, 13, 14, 15, 18, 19, 20]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1470253238, "post_id": 38750726, "comment_id": 64878523, "body": "<code>(a)</code> can be <code>a</code> here. Brackets are only necessary for raw ranges, like <code>(0..1).to-a</code>"}, {"owner": {"reputation": 2405, "user_id": 135845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/agZcF.jpg?s=128&g=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/135845/eric"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1470256550, "post_id": 38750726, "comment_id": 64880165, "body": "So it can. Thanks!"}], "tags": [], "owner": {"reputation": 2405, "user_id": 135845, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/agZcF.jpg?s=128&g=1", "display_name": "Eric", "link": "https://stackoverflow.com/users/135845/eric"}, "is_accepted": false, "score": 0, "last_activity_date": 1470256637, "last_edit_date": 1470256637, "creation_date": 1470247423, "answer_id": 38750726, "question_id": 38750603, "link": "https://stackoverflow.com/questions/38750603/remove-multiple-ranges-of-values-from-array/38750726#38750726", "title": "Remove multiple ranges of values from array", "body": "<p>I'm not sure this is the least naive solution, but it seems simple to convert your ranges into arrays so you're dealing with like-for-like:</p>\n\n<pre><code>a2.each{ |a| a1 = a1 - a.to_a }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "is_accepted": false, "score": 0, "last_activity_date": 1470251736, "creation_date": 1470251736, "answer_id": 38751914, "question_id": 38750603, "link": "https://stackoverflow.com/questions/38750603/remove-multiple-ranges-of-values-from-array/38751914#38751914", "title": "Remove multiple ranges of values from array", "body": "<pre><code>[-1, *a2.flat_map(&amp;:minmax), a1.length].each_slice(2).flat_map{|i,j| a1[i+1...j]}\n# =&gt; [0, 1, 5, 6, 7, 12, 13, 14, 15, 18, 19, 20] \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25043, "user_id": 1417223, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dbdfe3d2d5f87f172757ada1438f3d16?s=128&d=identicon&r=PG", "display_name": "Fellow Stranger", "link": "https://stackoverflow.com/users/1417223/fellow-stranger"}, "is_accepted": true, "score": 0, "last_activity_date": 1475672571, "creation_date": 1475672571, "answer_id": 39874741, "question_id": 38750603, "link": "https://stackoverflow.com/questions/38750603/remove-multiple-ranges-of-values-from-array/39874741#39874741", "title": "Remove multiple ranges of values from array", "body": "<pre><code>a1 = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]\na2 = [2..4, 8..11, 16..17]\n\na1 - a2.flat_map(&amp;:to_a)\n</code></pre>\n"}], "owner": {"reputation": 25043, "user_id": 1417223, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dbdfe3d2d5f87f172757ada1438f3d16?s=128&d=identicon&r=PG", "display_name": "Fellow Stranger", "link": "https://stackoverflow.com/users/1417223/fellow-stranger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 39874741, "answer_count": 4, "score": 0, "last_activity_date": 1475672571, "creation_date": 1470246952, "last_edit_date": 1495540856, "question_id": 38750603, "link": "https://stackoverflow.com/questions/38750603/remove-multiple-ranges-of-values-from-array", "title": "Remove multiple ranges of values from array", "body": "<pre><code>a1 = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]\na2 = [2..4, 8..11, 16..17]\n</code></pre>\n\n<p>Removing one range of values from an array can be done <a href=\"https://stackoverflow.com/a/26909739/1417223\">like this</a>:</p>\n\n<pre><code>[1, 2, 3, 4, 5, 6, 7, 8, 9].slice!(2..5)\n</code></pre>\n\n<p>Iterating over the ranges and apply the same as above (<code>a2.each { |range| a1.slice!(range) }</code>) isn't perfect though. The ranges overlap sometimes and thus destroy the referencing index for the other ranges.</p>\n\n<p>So, any suggestions on how to remove the ranges in <code>a2</code> from <code>a1</code> in the most efficient way? \n<code>a1</code> is normally [*0..10080] long. <code>a2</code> has about 30 ranges, each containing hundreds of values.</p>\n"}, {"tags": ["ruby", "session", "authentication", "cookies", "get"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1470246360, "post_id": 38750126, "comment_id": 64874631, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages. If you&#39;re having trouble with code also read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. We need a better description of the problem. We need to have a better understanding of how you&#39;re doing this. Have you looked at using <a href=\"https://github.com/sparklemotion/mechanize\" rel=\"nofollow noreferrer\">Mechanize</a>? It&#39;s designed to help navigate a site and can handle cookies for you."}, {"owner": {"reputation": 3798, "user_id": 1012952, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/572a69029f51ac0b75b5195c53495fc9?s=128&d=identicon&r=PG", "display_name": "Killerpixler", "link": "https://stackoverflow.com/users/1012952/killerpixler"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1470251066, "post_id": 38750126, "comment_id": 64877255, "body": "Thank you. With Mechanize I was able to get my google session and scrape the site I needed."}], "answers": [{"tags": [], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "is_accepted": false, "score": 0, "last_activity_date": 1470249366, "last_edit_date": 1470249366, "creation_date": 1470248526, "answer_id": 38751009, "question_id": 38750126, "link": "https://stackoverflow.com/questions/38750126/ruby-http-get-call-again-site-that-requires-an-active-session/38751009#38751009", "title": "Ruby HTTP get call again site that requires an active session", "body": "<p>Yes, it is possible to use your cookie and send it. That's how browsers work.</p>\n\n<p>From <a href=\"https://en.wikipedia.org/wiki/HTTP_cookie\" rel=\"nofollow\">Wikipedia</a></p>\n\n<pre><code>GET /spec.html HTTP/1.1\nHost: www.example.org\nCookie: theme=light; sessionToken=abc123\n\u2026\n</code></pre>\n\n<p>It takes a bit of work to figure out exactly what is going on. I suggest looking at the Network tab on the browser to see each HTTP request.</p>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1470255438, "post_id": 38751722, "comment_id": 64879636, "body": "YAML is a good candidate format. Just store the information in a file relative to your source code. The <a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/yaml/rdoc/YAML.html\" rel=\"nofollow noreferrer\">YAML</a> class is easy to use and comes with Ruby. There are lots of examples of using it on SO. A disk-based SQLite DB is a bit more secure if you want to keep prying eyes from easily seeing it. <a href=\"http://sequel.jeremyevans.net/rdoc/files/README_rdoc.html#label-Getting+Started\" rel=\"nofollow noreferrer\">Sequel</a> makes that easy. You could encrypt it and decrypt it on the fly, if you&#39;re more paranoid, but if the source is available that&#39;d be a waste of time."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1470255665, "post_id": 38751722, "comment_id": 64879745, "body": "If Google has an associated API for whatever you&#39;re trying to scrape, you&#39;re better off using it. Scraping is a last ditch attempt and more failure prone."}, {"owner": {"reputation": 3798, "user_id": 1012952, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/572a69029f51ac0b75b5195c53495fc9?s=128&d=identicon&r=PG", "display_name": "Killerpixler", "link": "https://stackoverflow.com/users/1012952/killerpixler"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1470315134, "post_id": 38751722, "comment_id": 64906840, "body": "As I mentioned this particular datapoint is not part of the API so I have to resort to scraping. Thanks for the YAML tip I&#39;ll look into that."}], "tags": [], "owner": {"reputation": 3798, "user_id": 1012952, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/572a69029f51ac0b75b5195c53495fc9?s=128&d=identicon&r=PG", "display_name": "Killerpixler", "link": "https://stackoverflow.com/users/1012952/killerpixler"}, "is_accepted": true, "score": 0, "last_activity_date": 1470316516, "last_edit_date": 1495535323, "creation_date": 1470251041, "answer_id": 38751722, "question_id": 38750126, "link": "https://stackoverflow.com/questions/38750126/ruby-http-get-call-again-site-that-requires-an-active-session/38751722#38751722", "title": "Ruby HTTP get call again site that requires an active session", "body": "<p>Credits to <a href=\"https://stackoverflow.com/users/128421/the-tin-man\">@the-tin-man</a> for suggesting <code>mechanize</code>. For anyone else looking how to get a valid google session for whatever service you need:</p>\n\n<pre><code>agent = Mechanize.new\nlogin_page = agent.get(\"https://accounts.google.com\")\nlogin_form1 = login_page.form\nlogin_form1.Email = \"your_google_email_here\"\nlogin_form2 = login_form1.click_button\nlogin_form2.form.Passwd = \"your_google_password\"\nlogin_form2.form.click_button\n#at this point you have a valid google session so the next part is specific for my needs\nsearch_console_page = agent.get(\"https://www.google.com/webmasters/tools/index-status?hl=en&amp;authuser=0&amp;siteUrl=xxx\")\ntotal_indexed = search_console_page.search(\"td.property div.primary\").inner_html.gsub(',', '').to_i\n</code></pre>\n\n<p>Now I just have to figure out how to store that cookie somewhere permanently so I don't have to login every time I use it.</p>\n"}], "owner": {"reputation": 3798, "user_id": 1012952, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/572a69029f51ac0b75b5195c53495fc9?s=128&d=identicon&r=PG", "display_name": "Killerpixler", "link": "https://stackoverflow.com/users/1012952/killerpixler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 38751722, "answer_count": 2, "score": 1, "last_activity_date": 1470316516, "creation_date": 1470245227, "last_edit_date": 1470247621, "question_id": 38750126, "link": "https://stackoverflow.com/questions/38750126/ruby-http-get-call-again-site-that-requires-an-active-session", "title": "Ruby HTTP get call again site that requires an active session", "body": "<p>I am trying to get the source for <code>https://www.google.com/webmasters/tools/index-status?hl=en&amp;authuser=0&amp;siteUrl=xxx</code> in order to get the index status number which for some reason is not exposed via the <code>webmasters v3</code> API.</p>\n\n<p>Now I can't just do a <code>HTTParty.get(url)</code> call since that will just give me a redirect to the accounts login page (<code>https://accounts.google.com/ServiceLogin?xxxxxx</code>). If i run <code>HTTParty.get(url, {follow_redirects: false})</code> I get a 302 error since the page cannot redirect me to Google's login page.</p>\n\n<p>Basically the question is: is it possible to either take my existing logged in cookie and supply it to the script or have the script \"log in\" an then store the session cookie?</p>\n\n<p>The latter part would basically consist of:</p>\n\n<ul>\n<li>Get call to <code>https://accounts.google.com</code></li>\n<li>POST submit the login form</li>\n<li>Await a response, save cookie</li>\n<li>Use that session to go to the above search console URL</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9160, "user_id": 1300194, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/oBkyV.jpg?s=128&g=1", "display_name": "Awlad Liton", "link": "https://stackoverflow.com/users/1300194/awlad-liton"}, "edited": false, "score": 0, "creation_date": 1470245430, "post_id": 38749960, "comment_id": 64874115, "body": "<code>User.eager_load(answers: {question: {sub_category: :super_category}}).where(&quot;users.id = ?&quot;,1).first</code> or <code>User.eager_load(answers: {question: {sub_category: :super_category}}).find(1)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1470245602, "post_id": 38750224, "comment_id": 64874214, "body": "how do I eager_load on an instance?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1470248945, "post_id": 38750224, "comment_id": 64876016, "body": "See Awlad&#39;s answer. I think he has you covered."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 0, "last_activity_date": 1470245542, "creation_date": 1470245542, "answer_id": 38750224, "question_id": 38749960, "link": "https://stackoverflow.com/questions/38749960/rails-eager-load-deep-associations-on-an-instance/38750224#38750224", "title": "Rails eager_load deep associations on an instance", "body": "<p>As Awlad suggests in his comment, <code>eager_load</code> should be called on the class, not the instance. See the <a href=\"http://api.rubyonrails.org/v4.0.1/classes/ActiveRecord/QueryMethods.html#method-i-eager_load\" rel=\"nofollow\">docs</a>. Nice work, Awlad!</p>\n"}, {"tags": [], "owner": {"reputation": 9160, "user_id": 1300194, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/oBkyV.jpg?s=128&g=1", "display_name": "Awlad Liton", "link": "https://stackoverflow.com/users/1300194/awlad-liton"}, "is_accepted": true, "score": 3, "last_activity_date": 1470246023, "creation_date": 1470246023, "answer_id": 38750340, "question_id": 38749960, "link": "https://stackoverflow.com/questions/38749960/rails-eager-load-deep-associations-on-an-instance/38750340#38750340", "title": "Rails eager_load deep associations on an instance", "body": "<p>You are trying to prevent N+1 query. </p>\n\n<p>Preload performs individual SQL queries for each collection.</p>\n\n<p>Eager load construct one left-joined SELECT to retrieve all collections in one query.\nIf you use <code>includes</code> Rails pick which one to use. </p>\n\n<p>eager_load is a class method. You should use on the model Class.</p>\n\n<p>Try like this:</p>\n\n<pre><code>User.eager_load(answers: {question: {sub_category: :super_category}}).where(\"users.id = ?\",1).first \n</code></pre>\n\n<p>or </p>\n\n<pre><code>User.eager_load(answers: {question: {sub_category: :super_category}}).find(1)\n</code></pre>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 550, "favorite_count": 0, "accepted_answer_id": 38750340, "answer_count": 2, "score": 1, "last_activity_date": 1470246023, "creation_date": 1470244643, "last_edit_date": 1470245572, "question_id": 38749960, "link": "https://stackoverflow.com/questions/38749960/rails-eager-load-deep-associations-on-an-instance", "title": "Rails eager_load deep associations on an instance", "body": "<p>Below are my five models and relevant associations:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :answers\nend    \n\nclass Answer &lt; ActiveRecord::Base\n  belongs_to :question\nend\n\nclass Question &lt; ActiveRecord::Base\n  belongs_to :sub_category\nend\n\nclass SubCategory &lt; ActiveRecord::Base\n  belongs_to :super_category\nend\n\nclass SuperCategory &lt; ActiveRecord::Base\n  has_many :sub_categories\nend\n</code></pre>\n\n<p>Next I find a <code>User</code> object:</p>\n\n<pre><code>@user = User.find(1234)\n</code></pre>\n\n<p>Now what I want to do is I want to eager_load the following:</p>\n\n<ul>\n<li>All of the User's <code>Answers</code>\n\n<ul>\n<li>Each of the Answers' associated <code>question</code>\n\n<ul>\n<li>Each of the questions' associated <code>sub_category</code>\n\n<ul>\n<li>Each of the sub_categories' associated <code>super_category</code></li>\n</ul></li>\n</ul></li>\n</ul></li>\n</ul>\n\n<p>I attempted the following:</p>\n\n<pre><code>@user.eager_load(answers: {question: {sub_category: :super_category}})\n</code></pre>\n\n<p>However it comes back with the following error:</p>\n\n<blockquote>\n  <p>NoMethodError ... Undefined method 'eager_load' for the [user record]</p>\n</blockquote>\n\n<p>I am not sure what I am doing wrong. </p>\n\n<p><strong>Question:</strong> how do I eager_load the associations above on the instance?</p>\n\n<p>I am not sure if this matters or not: but at the time that all the eager_loading is conducted: none of the associated <code>question</code> records have been persisted, so all of their <code>ids</code> are nil.  I don't think this matters, but just in case: I figured I should mention it. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "carrierwave", "data-uri"], "answers": [{"comments": [{"owner": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "edited": false, "score": 0, "creation_date": 1470247703, "post_id": 38750513, "comment_id": 64875336, "body": "The images are in another model. I have a model Users has_many Pictures. How this code convert the data_uri to carrierwave upload it?"}], "tags": [], "owner": {"reputation": 314, "user_id": 941257, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aac3d020c88380249677785064df65a6?s=128&d=identicon&r=PG", "display_name": "Bruno Arueira", "link": "https://stackoverflow.com/users/941257/bruno-arueira"}, "is_accepted": false, "score": -1, "last_activity_date": 1470246633, "creation_date": 1470246633, "answer_id": 38750513, "question_id": 38749907, "link": "https://stackoverflow.com/questions/38749907/rails-4-upload-data-uri-with-carrierwave/38750513#38750513", "title": "Rails 4: Upload Data Uri with Carrierwave", "body": "<p>What do you need is something like that:</p>\n\n<pre><code>function save_photo() {\n  // actually snap photo (from preview freeze) and display it\n  Webcam.snap( function(data_uri) {\n    $.ajax({\n      // put a valid route\n      url: '/profile/2',\n      type: 'PATCH',\n      data: { image: data_uri }\n    })\n    .done(function () {\n      // display results in page\n      document.getElementById('results').innerHTML = \n        '&lt;img src=\"'+data_uri+'\"/&gt;&lt;br/&gt;&lt;/br&gt;' + \n        '&lt;a href=\"'+data_uri+'\" target=\"_blank\"&gt;link&lt;/a&gt;';\n    });\n\n    // shut down camera, stop capturing\n    Webcam.reset();\n});\n</code></pre>\n"}], "owner": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 283, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470246633, "creation_date": 1470244485, "question_id": 38749907, "link": "https://stackoverflow.com/questions/38749907/rails-4-upload-data-uri-with-carrierwave", "title": "Rails 4: Upload Data Uri with Carrierwave", "body": "<p>I'm using the <a href=\"https://github.com/jhuckaby/webcamjs\" rel=\"nofollow\">webcamnjs</a> to take pictures from webcam, and I looking a way to upload it with carrierwave. I found <a href=\"https://github.com/timsly/carrierwave-data-uri\" rel=\"nofollow\">this gem</a> who do that.</p>\n\n<p>So I have my js code to take the picture:</p>\n\n<pre><code> function save_photo() {\n  // actually snap photo (from preview freeze) and display it\n  Webcam.snap( function(data_uri) {\n    // display results in page\n    document.getElementById('results').innerHTML = \n      '&lt;img src=\"'+data_uri+'\"/&gt;&lt;br/&gt;&lt;/br&gt;' + \n      '&lt;a href=\"'+data_uri+'\" target=\"_blank\"&gt;link&lt;/a&gt;';\n\n    // shut down camera, stop capturing\n    Webcam.reset();\n\n  } );\n</code></pre>\n\n<p><strong>The question is:</strong> How can I read the data_uri js variable and integrate that in the ruby code for upload and save it without reload the page, with ajax?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 851, "user_id": 369762, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/af569c7955f8449738a681888905837b?s=128&d=identicon&r=PG", "display_name": "Clone", "link": "https://stackoverflow.com/users/369762/clone"}, "edited": false, "score": 0, "creation_date": 1470249482, "post_id": 38749634, "comment_id": 64876335, "body": "I already have fixtures like this: /test/fixtures/flower.yml file. Is it wrong?"}, {"owner": {"reputation": 421, "user_id": 3842322, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1789845834/picture?type=large", "display_name": "Jeff Zivkovic", "link": "https://stackoverflow.com/users/3842322/jeff-zivkovic"}, "reply_to_user": {"reputation": 851, "user_id": 369762, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/af569c7955f8449738a681888905837b?s=128&d=identicon&r=PG", "display_name": "Clone", "link": "https://stackoverflow.com/users/369762/clone"}, "edited": false, "score": 0, "creation_date": 1470273115, "post_id": 38749634, "comment_id": 64886605, "body": "I can tell you that all of my fixture files are plural: scores.yml, seminars.yml, users.yml, etc. Maybe that has something to do with it?"}], "tags": [], "owner": {"reputation": 421, "user_id": 3842322, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1789845834/picture?type=large", "display_name": "Jeff Zivkovic", "link": "https://stackoverflow.com/users/3842322/jeff-zivkovic"}, "is_accepted": false, "score": 0, "last_activity_date": 1470243550, "creation_date": 1470243550, "answer_id": 38749634, "question_id": 38749072, "link": "https://stackoverflow.com/questions/38749072/rake-test-expects-for-the-table-name-defined-as-model-name/38749634#38749634", "title": "Rake test expects for the table name defined as model name?", "body": "<p>When you run tests, Rails doesn't look at your regular database. Instead, it looks at your <strong><em>fixtures</em></strong>.</p>\n\n<p>You need to write fake data in test/fixtures/flowers.</p>\n\n<p>Cheers!</p>\n"}], "owner": {"reputation": 851, "user_id": 369762, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/af569c7955f8449738a681888905837b?s=128&d=identicon&r=PG", "display_name": "Clone", "link": "https://stackoverflow.com/users/369762/clone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470243930, "creation_date": 1470241715, "last_edit_date": 1470243930, "question_id": 38749072, "link": "https://stackoverflow.com/questions/38749072/rake-test-expects-for-the-table-name-defined-as-model-name", "title": "Rake test expects for the table name defined as model name?", "body": "<p>I have an MS SQL db table (<code>dbo.MEXICAN_FLOWERS</code>), used by a model <code>Flower</code>. In order to write test cases, I wrote a dummy migration file for that model, and then modified the migration file with the column names that the db has, and ran:</p>\n\n<pre><code>rake db:migrate\n</code></pre>\n\n<p>Also I tried:</p>\n\n<pre><code>$RAILS_ENV=test rake db:migrate \n</code></pre>\n\n<p>and verified that everything looks great. When I try to do:</p>\n\n<pre><code>$ rake test\n</code></pre>\n\n<p>it raises an error such that a table with flowers is not found:</p>\n\n<pre><code>ActiveRecord::StatementInvalid: SQLite3::SQLException: no such table: flower: DELETE FROM \u201cflower\u201d\n</code></pre>\n\n<p>Why is this happening?</p>\n\n<p>I also ran:</p>\n\n<pre><code>rake db:migrate\n</code></pre>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "ruby-on-rails-4", "simple-form"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6673373, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1028660663908472/picture?type=large", "display_name": "Giovanni Pecchio", "link": "https://stackoverflow.com/users/6673373/giovanni-pecchio"}, "edited": false, "score": 0, "creation_date": 1470246565, "post_id": 38750313, "comment_id": 64874748, "body": "aggiungendolo solo cosi non funziona. Come dovrei fare?"}], "tags": [], "owner": {"reputation": 390, "user_id": 2890843, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000015581897/picture?type=large", "display_name": "Lorenzo Sinisi", "link": "https://stackoverflow.com/users/2890843/lorenzo-sinisi"}, "is_accepted": false, "score": 0, "last_activity_date": 1470245881, "creation_date": 1470245881, "answer_id": 38750313, "question_id": 38749070, "link": "https://stackoverflow.com/questions/38749070/f-collection-select-not-showing-up/38750313#38750313", "title": "f.collection_select not showing up", "body": "<p>Have you tried   &lt;%= f.association :categories %>?</p>\n"}, {"tags": [], "owner": {"reputation": 329, "user_id": 1919995, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/59f2e666102af47b6d8e989f7f435327?s=128&d=identicon&r=PG", "display_name": "Muhammad Yaseen", "link": "https://stackoverflow.com/users/1919995/muhammad-yaseen"}, "is_accepted": false, "score": 0, "last_activity_date": 1470251995, "creation_date": 1470251995, "answer_id": 38751989, "question_id": 38749070, "link": "https://stackoverflow.com/questions/38749070/f-collection-select-not-showing-up/38751989#38751989", "title": "f.collection_select not showing up", "body": "<p>For selecting the associated Category for an instance of Content, @content)</p>\n\n<p>collection_select(:content, :category_id, Category.all, :id, :name, prompt: true)</p>\n"}, {"comments": [{"owner": {"reputation": 451, "user_id": 3497155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b516d57239e485a43237d1ed41f4cf73?s=128&d=identicon&r=PG", "display_name": "Lavika", "link": "https://stackoverflow.com/users/3497155/lavika"}, "reply_to_user": {"reputation": 13, "user_id": 6673373, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1028660663908472/picture?type=large", "display_name": "Giovanni Pecchio", "link": "https://stackoverflow.com/users/6673373/giovanni-pecchio"}, "edited": false, "score": 0, "creation_date": 1470305170, "post_id": 38752954, "comment_id": 64900270, "body": "= f.input :category_id, collection: Category.all.collect {|c| [c.name, c.id] }, prompt: true Try this once"}, {"owner": {"reputation": 13, "user_id": 6673373, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1028660663908472/picture?type=large", "display_name": "Giovanni Pecchio", "link": "https://stackoverflow.com/users/6673373/giovanni-pecchio"}, "edited": false, "score": 0, "creation_date": 1470322551, "post_id": 38752954, "comment_id": 64912958, "body": "Now is showing the title of the collection (category) but not the dropdown"}, {"owner": {"reputation": 13, "user_id": 6673373, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1028660663908472/picture?type=large", "display_name": "Giovanni Pecchio", "link": "https://stackoverflow.com/users/6673373/giovanni-pecchio"}, "edited": false, "score": 0, "creation_date": 1470324661, "post_id": 38752954, "comment_id": 64914609, "body": "Which html? This is the new content html: &lt;h4 class=&quot;center blue-text text-accent-3&quot;&gt;Add a project&lt;/h4&gt;  &lt;br&gt;  &lt;%= render &#39;form&#39; %&gt;  &lt;br&gt;  &lt;%= link_to &#39;Back&#39;, contents_path %&gt;"}], "tags": [], "owner": {"reputation": 451, "user_id": 3497155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b516d57239e485a43237d1ed41f4cf73?s=128&d=identicon&r=PG", "display_name": "Lavika", "link": "https://stackoverflow.com/users/3497155/lavika"}, "is_accepted": false, "score": 0, "last_activity_date": 1470255761, "creation_date": 1470255761, "answer_id": 38752954, "question_id": 38749070, "link": "https://stackoverflow.com/questions/38749070/f-collection-select-not-showing-up/38752954#38752954", "title": "f.collection_select not showing up", "body": "<pre><code>= f.select(:category_id, Category.all.collect {|c| [c.name, c.id] },{include_blank: true} )\n</code></pre>\n\n<p>Hope, that helps!</p>\n"}], "owner": {"reputation": 13, "user_id": 6673373, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1028660663908472/picture?type=large", "display_name": "Giovanni Pecchio", "link": "https://stackoverflow.com/users/6673373/giovanni-pecchio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1470259041, "creation_date": 1470241710, "last_edit_date": 1470259041, "question_id": 38749070, "link": "https://stackoverflow.com/questions/38749070/f-collection-select-not-showing-up", "title": "f.collection_select not showing up", "body": "<p>I'm working in rails 4 with simple_form and I have two models, one called content and the other one called category. Category has many content and the content belongs to a category. The problem is that when i want a collection_select to show in my form is not showing.\nHere is the code:</p>\n\n<pre><code>&lt;%= simple_form_for @content, html: { multipart: true } do |f| %&gt;\n\n  &lt;%= f.input :title, required: true %&gt;\n  &lt;%= f.input :tagline, required: true, label: 'Short description', input_html: { maxlength: 20 }%&gt;\n  &lt;%= f.input :description, required: true %&gt;\n  &lt;%= f.input :price, required: true %&gt;\n  &lt;%= f.input :team, required: true, label: 'Team member number' %&gt;\n  &lt;%= f.input :equity, required: true, label: 'Equity percentage'%&gt;\n  &lt;%= f.input :website, label: 'Website Link', as: :string%&gt;\n  &lt;%= f.input :linkedin, label: 'Linkedin Link', as: :string %&gt;\n  &lt;%=f.collection_select :category_id, Category.all, :id, :name, {prompt: \"Chose a category\"} %&gt;\n  &lt;br&gt;\n  &lt;%= f.input :copertina, required: true, label: 'Image Cover' %&gt;\n  &lt;br&gt;\n  &lt;%= f.button :submit %&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>Thanks for the help.</p>\n\n<p>Edit: Could it be a js problem?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 3077, "user_id": 1257369, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/UVwvN.gif?s=128&g=1", "display_name": "everyman", "link": "https://stackoverflow.com/users/1257369/everyman"}, "edited": false, "score": 1, "creation_date": 1470240913, "post_id": 38748736, "comment_id": 64871382, "body": "They will return a String not Bool. How do you call them?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1470247168, "post_id": 38748736, "comment_id": 64875081, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;. Please modify your question and be more descriptive: Which returns true and which returns false? What did you try to figure out the answer yourself? As is, your question doesn&#39;t show a lot of research or effort: \u201c<a href=\"http://meta.stackoverflow.com/q/261592/128421\">How much research effort is expected of Stack Overflow users?</a>\u201d is a useful page to read."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1470247832, "post_id": 38748736, "comment_id": 64875413, "body": "Be careful, as they don&#39;t define &quot;word&quot; the same way so the results will be different. <code>longest_word(&#39;foo bar foo_bar_baz&#39;) # =&gt; &quot;foo_bar_baz&quot;</code> vs. <code>LongestWord(&#39;foo bar foo_bar_baz&#39;) # =&gt; #&lt;MatchData &quot;foo&quot;&gt;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3077, "user_id": 1257369, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/UVwvN.gif?s=128&g=1", "display_name": "everyman", "link": "https://stackoverflow.com/users/1257369/everyman"}, "is_accepted": false, "score": 1, "last_activity_date": 1470246837, "last_edit_date": 1470246837, "creation_date": 1470241166, "answer_id": 38748911, "question_id": 38748736, "link": "https://stackoverflow.com/questions/38748736/difference-between-two-codes-i-get-false-for-one-and-true-for-another/38748911#38748911", "title": "Difference between two codes: I get false for one and true for another", "body": "<p>The difference is:</p>\n\n<ul>\n<li><code>LongestWord</code> returns <code>MatchData</code> <a href=\"http://ruby-doc.org/core-2.2.0/MatchData.html\" rel=\"nofollow\">http://ruby-doc.org/core-2.2.0/MatchData.html</a></li>\n<li><code>longest_word</code> returns <code>String</code> </li>\n</ul>\n\n<p>so</p>\n\n<pre><code>longest_word(sentence).eql?(LongestWord(sentence).to_s) == true\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6673318, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CnwcoEtIT48/AAAAAAAAAAI/AAAAAAAAAC0/F12z1QRD3Xk/photo.jpg?sz=128", "display_name": "Simon Liang", "link": "https://stackoverflow.com/users/6673318/simon-liang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1470246837, "creation_date": 1470240646, "last_edit_date": 1470244786, "question_id": 38748736, "link": "https://stackoverflow.com/questions/38748736/difference-between-two-codes-i-get-false-for-one-and-true-for-another", "title": "Difference between two codes: I get false for one and true for another", "body": "<p>I got these two codes from two websites defining the longest word in a string:</p>\n\n<p>Code 1.</p>\n\n<pre><code>def longest_word(sentence)\n  words = sentence.split(\" \")\n  longest_word = nil\n  word_idx = 0\n  while word_idx &lt; words.length\n    current_word = words[word_idx]\n    if longest_word == nil\n      longest_word = current_word\n    elsif longest_word.length &lt; current_word.length\n      longest_word = current_word\n    end\n    word_idx += 1\n  end\n  longest_word\nend\n</code></pre>\n\n<p>Code 2.</p>\n\n<pre><code>def LongestWord(sen)\n  arr = sen.split.map do |w|\n    /[a-zA-Z0-9\\s]+/.match(w)\n  end\n  longest = arr.max_by do |w|\n    w.to_s.length\n  end\n  longest\nend\n</code></pre>\n\n<p>But one code gives me true, and one gives me false. Can someone tell me why?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 164, "user_id": 2539170, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/63f9a96cf0a733161dc376d619731fcf?s=128&d=identicon&r=PG", "display_name": "ramijames", "link": "https://stackoverflow.com/users/2539170/ramijames"}, "edited": false, "score": 0, "creation_date": 1470285649, "post_id": 38748652, "comment_id": 64889593, "body": "Thanks, the extra explanation was really helpful."}], "tags": [], "owner": {"reputation": 12441, "user_id": 645132, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3ce3855f059c1eea934e5316d5c22181?s=128&d=identicon&r=PG", "display_name": "agmcleod", "link": "https://stackoverflow.com/users/645132/agmcleod"}, "is_accepted": true, "score": 2, "last_activity_date": 1470240458, "creation_date": 1470240458, "answer_id": 38748652, "question_id": 38748608, "link": "https://stackoverflow.com/questions/38748608/how-do-i-get-the-attributes-of-an-object-in-ruby/38748652#38748652", "title": "How do I get the attributes of an object in ruby?", "body": "<p>You need to output the information. So in ERB when you have a tag like:</p>\n\n<pre><code>&lt;% i = 4 %&gt;\n</code></pre>\n\n<p>That executes code. When you have:</p>\n\n<pre><code>&lt;%= \"hi\" %&gt;\n</code></pre>\n\n<p>That outputs the return value. So what you actually want is this:</p>\n\n<pre><code>&lt;% User.all.each do |user| %&gt;\n  &lt;%= user.name %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>What you should do with the users though, is setup an instance variable in your controller:</p>\n\n<pre><code>def viewall\n  @users = User.all\nend\n</code></pre>\n\n<p>Then use it in your view:</p>\n\n<pre><code>&lt;% @users.each do |user| %&gt;\n  &lt;%= user.name %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Just better to keep SQL calls and a lot of logic out of your views. Leverage the controllers, models and helpers to do that.</p>\n"}, {"tags": [], "owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "is_accepted": false, "score": 3, "last_activity_date": 1470240495, "creation_date": 1470240495, "answer_id": 38748664, "question_id": 38748608, "link": "https://stackoverflow.com/questions/38748608/how-do-i-get-the-attributes-of-an-object-in-ruby/38748664#38748664", "title": "How do I get the attributes of an object in ruby?", "body": "<p>You are not displaying the data to the user. </p>\n\n<p>In your controller method, is where you should add</p>\n\n<pre><code>@users = User.all \n</code></pre>\n\n<p>And in your view</p>\n\n<pre><code>&lt;% @users.each do |user| %&gt;\n  &lt;h1&gt;&lt;%= user.name %&gt;&lt;/h1&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<ul>\n<li><strong>&lt;% %></strong>: These brackets are used to evaluate an expression</li>\n<li><strong>&lt;%= %></strong>: These brackets evaluate an expression and render the output</li>\n</ul>\n"}], "owner": {"reputation": 164, "user_id": 2539170, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/63f9a96cf0a733161dc376d619731fcf?s=128&d=identicon&r=PG", "display_name": "ramijames", "link": "https://stackoverflow.com/users/2539170/ramijames"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 38748652, "answer_count": 2, "score": 0, "last_activity_date": 1470240495, "creation_date": 1470240296, "question_id": 38748608, "link": "https://stackoverflow.com/questions/38748608/how-do-i-get-the-attributes-of-an-object-in-ruby", "title": "How do I get the attributes of an object in ruby?", "body": "<p>I'm new to Ruby and Rails. I've been trying to get a view of all users to work and am not sure what I'm doing wrong.</p>\n\n<p>I have a view with:</p>\n\n<pre><code>&lt;% provide(:title, \"View all Users\") %&gt;\n\n&lt;h1&gt;Users#viewall&lt;/h1&gt;\n&lt;p&gt;Find me in app/views/users/viewall.html.erb&lt;/p&gt;\n\n&lt;% \n@users = User.all \n@users.each do |user|\n  user.name\nend\n%&gt;\n</code></pre>\n\n<p>The output of this is a list of objects in the database, with all the object's data. When I want to target (for example) just the name, it doesn't work.</p>\n\n<pre><code>[#&lt;User id: 1, name: \"user name\", email: \"mail@mail.com\", created_at: \"2016-08-03 15:40:41\", updated_at: \"2016-08-03 15:40:41\", password_digest: \"$2a$10$KmWWK86H/dj.HAp9zcHOUOCbph1rawIer41kyH4dIrV...\"&gt;]\n</code></pre>\n\n<p>What am I missing here? I'm not even really sure what to google as I don't know what the loop is spitting out.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "reply_to_user": {"reputation": 132, "user_id": 2718745, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/8ZMdW.jpg?s=128&g=1", "display_name": "mdiaz00147", "link": "https://stackoverflow.com/users/2718745/mdiaz00147"}, "edited": false, "score": 0, "creation_date": 1470271469, "post_id": 38748764, "comment_id": 64885287, "body": "Ok then accept answer. Encouragement keeps me helping in future too."}], "tags": [], "owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "is_accepted": true, "score": 1, "last_activity_date": 1470240745, "creation_date": 1470240745, "answer_id": 38748764, "question_id": 38748567, "link": "https://stackoverflow.com/questions/38748567/ruby-on-rails-new-object-properties/38748764#38748764", "title": "Ruby on rails new object properties", "body": "<p><strong>Here is what to do?</strong></p>\n\n<p>Do this:</p>\n\n<pre><code>@user = User.new(user_params)\n@user.plan_id = @plan_vars.id\n@user.lessons = @plan_vars.lessons\n@user.save\n</code></pre>\n\n<p>if nested form is used or @plan_vars returns array there results another type of error</p>\n"}, {"tags": [], "owner": {"reputation": 451, "user_id": 3497155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b516d57239e485a43237d1ed41f4cf73?s=128&d=identicon&r=PG", "display_name": "Lavika", "link": "https://stackoverflow.com/users/3497155/lavika"}, "is_accepted": false, "score": 0, "last_activity_date": 1470256900, "creation_date": 1470256900, "answer_id": 38753235, "question_id": 38748567, "link": "https://stackoverflow.com/questions/38748567/ruby-on-rails-new-object-properties/38753235#38753235", "title": "Ruby on rails new object properties", "body": "<p>You can merge plan params to <code>user_params</code> hash</p>\n\n<pre><code>def user_params\n  params.require(:user).permit(:name, :email, :phone, :document, :password,\n                               :password_confirmation)\n                       .merge(plan_id: @plan_vars.id, lessons: @plan_vars.lessons)\nend\n\n\ndef create\n  plan = params[:user][:plan]\n  @plan_vars = Plan.find(plan)\n  @user = User.new(user_params)\nend\n</code></pre>\n\n<p>Hope, that helps!</p>\n"}, {"tags": [], "owner": {"reputation": 1567, "user_id": 2116875, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2ZCou.jpg?s=128&g=1", "display_name": "rneves", "link": "https://stackoverflow.com/users/2116875/rneves"}, "is_accepted": false, "score": 0, "last_activity_date": 1470258021, "creation_date": 1470258021, "answer_id": 38753542, "question_id": 38748567, "link": "https://stackoverflow.com/questions/38748567/ruby-on-rails-new-object-properties/38753542#38753542", "title": "Ruby on rails new object properties", "body": "<p>I prefer something similar to @Lavika's answer, but with merge on create action</p>\n\n<pre><code>def create\n  plan = params[:user][:plan]\n  @plan_vars = Plan.find(plan)\n  @user = User.new(user_params.merge(plan_id: @plan_vars.id, lessons: @plan_vars.lessons))\n  # ...\nend\n</code></pre>\n\n<p>@pradeep sapkota's answer is also a good option</p>\n"}], "owner": {"reputation": 132, "user_id": 2718745, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/8ZMdW.jpg?s=128&g=1", "display_name": "mdiaz00147", "link": "https://stackoverflow.com/users/2718745/mdiaz00147"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 387, "favorite_count": 0, "accepted_answer_id": 38748764, "answer_count": 3, "score": 1, "last_activity_date": 1470258021, "creation_date": 1470240167, "question_id": 38748567, "link": "https://stackoverflow.com/questions/38748567/ruby-on-rails-new-object-properties", "title": "Ruby on rails new object properties", "body": "<p>i need to add to my user new objet some new properties that i will define when the form is submited by retrieve them from my database, but when i submited the new properties are nill and i dont know why</p>\n\n<pre><code>def create\n  plan        =   params[:user][:plan]\n  @plan_vars  =   Plan.find(plan)\n\n    @user        = User.new(user_params, :plan_id =&gt; @plan_vars.id, :lessons =&gt; @plan_vars.lessons)\n    if @user.save\n        flash[:success] = \"Usuario creado exitosamente\"\n      redirect_to   users_path\n  else\n        flash[:warning] =   \"Ooops... algo ha fallado :O #{@user.errors}\"\n        redirect_to  new_user_path\n    end\n  end\n</code></pre>\n\n<p>here is the user params</p>\n\n<pre><code>def user_params\n      params.require(:user).permit(:name, :email, :phone, :document, :password,\n                                   :password_confirmation)\n    end\n</code></pre>\n"}, {"tags": ["sql", "ruby", "postgresql", "sql-order-by", "sql-limit"], "comments": [{"owner": {"reputation": 65136, "user_id": 519216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xs4ND.jpg?s=128&g=1", "display_name": "Lamak", "link": "https://stackoverflow.com/users/519216/lamak"}, "edited": false, "score": 1, "creation_date": 1470239547, "post_id": 38748273, "comment_id": 64870472, "body": "If everything is as you said, then you should get your expected results. Just for fun, what happens if you give an alias to the count, and order by that alias?: <code>SELECT a.artist, COUNT(DISTINCT a.asin) as N FROM ........... ORDER BY N DESC</code>?"}, {"owner": {"reputation": 1106495, "user_id": 1144035, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e514b017977ebf742a418cac697d8996?s=128&d=identicon&r=PG", "display_name": "Gordon Linoff", "link": "https://stackoverflow.com/users/1144035/gordon-linoff"}, "edited": false, "score": 0, "creation_date": 1470239563, "post_id": 38748273, "comment_id": 64870488, "body": "I removed the incompatible database tags.  Feel free to add the tag for the database you are really using."}, {"owner": {"reputation": 133, "user_id": 3512495, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/cRs3b.png?s=128&g=1", "display_name": "charleszardo", "link": "https://stackoverflow.com/users/3512495/charleszardo"}, "reply_to_user": {"reputation": 65136, "user_id": 519216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xs4ND.jpg?s=128&g=1", "display_name": "Lamak", "link": "https://stackoverflow.com/users/519216/lamak"}, "edited": false, "score": 0, "creation_date": 1470240283, "post_id": 38748273, "comment_id": 64870959, "body": "@Lamak even with the alias, the results are still ordered by artist.  Seems completely bizarre to me."}, {"owner": {"reputation": 5778, "user_id": 5921693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104a78260ca097069cf8f8179e41acdd?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/5921693/nick"}, "edited": false, "score": 0, "creation_date": 1470240775, "post_id": 38748273, "comment_id": 64871283, "body": "Based on your output, it looks like your doing more than your code is showing - <code>ARRAY_AGG</code>, etc.? If so, can you show that - it might impact the final ordering"}, {"owner": {"reputation": 133, "user_id": 3512495, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/cRs3b.png?s=128&g=1", "display_name": "charleszardo", "link": "https://stackoverflow.com/users/3512495/charleszardo"}, "reply_to_user": {"reputation": 5778, "user_id": 5921693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104a78260ca097069cf8f8179e41acdd?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/5921693/nick"}, "edited": false, "score": 0, "creation_date": 1470241399, "post_id": 38748273, "comment_id": 64871702, "body": "@Nicarus, I did fail to mention that I&#39;m writing this in ruby within a provided skeleton and running RSpec tests that came with the set of problems.  I&#39;ve added a function that processes the queries to my post above."}, {"owner": {"reputation": 5778, "user_id": 5921693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104a78260ca097069cf8f8179e41acdd?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/5921693/nick"}, "edited": false, "score": 0, "creation_date": 1470241500, "post_id": 38748273, "comment_id": 64871781, "body": "Can you run your exact query (what you posted) directly in psql or a PostgreSQL client - outside of Ruby? I imagine the ordering is correct there. I would bet that you lose that ordering in Ruby."}, {"owner": {"reputation": 133, "user_id": 3512495, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/cRs3b.png?s=128&g=1", "display_name": "charleszardo", "link": "https://stackoverflow.com/users/3512495/charleszardo"}, "reply_to_user": {"reputation": 5778, "user_id": 5921693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104a78260ca097069cf8f8179e41acdd?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/5921693/nick"}, "edited": false, "score": 0, "creation_date": 1470245620, "post_id": 38748273, "comment_id": 64874230, "body": "@Nicarus - running directly through PostgreSQL did the trick.  Thanks for your input.  It never dawned on me that the problem could&#39;ve been related to the queries being run through Ruby."}, {"owner": {"reputation": 5778, "user_id": 5921693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104a78260ca097069cf8f8179e41acdd?s=128&d=identicon&r=PG", "display_name": "Nick", "link": "https://stackoverflow.com/users/5921693/nick"}, "edited": false, "score": 0, "creation_date": 1470245720, "post_id": 38748273, "comment_id": 64874283, "body": "Good. If you were able to identify why the ordering was not preserved in Ruby and how to correct it, you should post that as answer to this and accept it. That way the next person searching for this or a similar issue will have this as a resource."}, {"owner": {"reputation": 133, "user_id": 3512495, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/cRs3b.png?s=128&g=1", "display_name": "charleszardo", "link": "https://stackoverflow.com/users/3512495/charleszardo"}, "edited": false, "score": 0, "creation_date": 1470245852, "post_id": 38748273, "comment_id": 64874349, "body": "Certainly.  I&#39;ll give it a try and see if I can identify the Ruby cause."}], "answers": [{"tags": [], "owner": {"reputation": 133, "user_id": 3512495, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/cRs3b.png?s=128&g=1", "display_name": "charleszardo", "link": "https://stackoverflow.com/users/3512495/charleszardo"}, "is_accepted": true, "score": 2, "last_activity_date": 1470321643, "last_edit_date": 1470321643, "creation_date": 1470245792, "answer_id": 38750292, "question_id": 38748273, "link": "https://stackoverflow.com/questions/38748273/why-does-order-by-only-work-properly-in-my-query-when-used-with-limit/38750292#38750292", "title": "Why does ORDER BY only work properly in my query when used with LIMIT?", "body": "<p>This is an ORM issue, not a SQL issue. The perceived problem is due to the way RSpec is printing the failure message in this case.</p>\n\n<p>Running the query through PostgreSQL worked perfectly fine and as expected.</p>\n\n<p>The correct order is also seen when printing out the results in the test block right before</p>\n\n<pre><code>expect(rock_superstars).to ...\n</code></pre>\n\n<p>Therefore the issue seems to have to do with RSpec's <code>contain_exactly</code>.  Upon failure it prints out <code>actual collection contained:</code> with a different sorting order than that which the query generates.</p>\n"}], "owner": {"reputation": 133, "user_id": 3512495, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/cRs3b.png?s=128&g=1", "display_name": "charleszardo", "link": "https://stackoverflow.com/users/3512495/charleszardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 38750292, "answer_count": 1, "score": 0, "last_activity_date": 1470321643, "creation_date": 1470239327, "last_edit_date": 1470247450, "question_id": 38748273, "link": "https://stackoverflow.com/questions/38748273/why-does-order-by-only-work-properly-in-my-query-when-used-with-limit", "title": "Why does ORDER BY only work properly in my query when used with LIMIT?", "body": "<p>I'm going through some SQL practice problems.  The one I'm currently baffled by asks to select the artist who has recorded the most rock albums, as well as the number of albums.  While putting to the query together piece-by-piece I ran into an issue ordering by number of rock albums.</p>\n\n<pre><code>  SELECT\n    a.artist, COUNT(DISTINCT a.asin)\n  FROM\n    albums a\n  JOIN\n    styles s ON a.asin = s.album\n  WHERE\n    s.style LIKE '%Rock%'\n  GROUP BY\n    a.artist\n  ORDER BY\n    COUNT(DISTINCT a.asin) DESC\n</code></pre>\n\n<p>Yields something like:</p>\n\n<pre><code>[[\"Alanis Morissette\", \"1\"], [\"Anne Murray\", \"1\"], [\"Billy Joel\", \"2\"] ...      \n[\"The Beach Boys\", \"1\"], [\"The Beatles\", \"7\"], [\"The Clash\", \"1\"] ...\n[\"Trash Can Sinatras\", \"1\"], [\"Travis\", \"1\"], [\"U2\", \"2\"], [\"Van Morrison\", \"1\"]]\n</code></pre>\n\n<p>The results are still ordered by artist rather than count.  However, when I add</p>\n\n<pre><code>LIMIT 1\n</code></pre>\n\n<p>to the query, ORDER BY seems to work properly as the correct answer ([\"The Beatles\", \"7\"]) moves from the middle to the top as the only answer that's yielded.</p>\n\n<p>Could someone please explain what's going on here?</p>\n\n<p>NOTE:  I believe it might be helpful to include that the code is written in Ruby and run through the following function:</p>\n\n<pre><code>require 'pg'\n\ndef execute(sql)\n  conn = PG::Connection.open(:dbname =&gt; 'sqlzoo')\n  query_result = conn.exec(sql).values\n  conn.close\n  query_result\nend\n</code></pre>\n\n<p>Also, this is the test (RSpec) being used for the query:</p>\n\n<pre><code>describe \"rock_superstars\" do\n  it \"selects the name of the most prolific rock artist\" do\n    expect(rock_superstars).to contain_exactly(\n      [\"The Beatles\", \"7\"]\n    )\n  end\nend\n</code></pre>\n\n<p>The results above are the output from this test, hence the form of an array.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6615600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/731e48b25bce05a45572412c01087b3a?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jones", "link": "https://stackoverflow.com/users/6615600/matt-jones"}, "edited": false, "score": 0, "creation_date": 1470240274, "post_id": 38748374, "comment_id": 64870952, "body": "Hmm I tried this, and it doesn&#39;t seem to update when I click it. Can you maybe alter my code to show how you would add the id to the td and the f.select element?"}, {"owner": {"reputation": 3, "user_id": 6615600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/731e48b25bce05a45572412c01087b3a?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jones", "link": "https://stackoverflow.com/users/6615600/matt-jones"}, "edited": false, "score": 0, "creation_date": 1470240830, "post_id": 38748374, "comment_id": 64871324, "body": "Actually, I think the issue is with the jquery. I have an html.erb page being loaded by my application.html.erb via &lt;%= yield %&gt; so where would I put the Jquery?"}, {"owner": {"reputation": 471, "user_id": 4515608, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a14962d882080869b622f66585c01945?s=128&d=identicon&r=PG&f=1", "display_name": "sump", "link": "https://stackoverflow.com/users/4515608/sump"}, "reply_to_user": {"reputation": 3, "user_id": 6615600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/731e48b25bce05a45572412c01087b3a?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jones", "link": "https://stackoverflow.com/users/6615600/matt-jones"}, "edited": false, "score": 0, "creation_date": 1470247347, "post_id": 38748374, "comment_id": 64875159, "body": "You can load jquery via the gem or include it using a script tag and linking it to googles hosted jquery glad to see it worked using vanilla js though :)"}], "tags": [], "owner": {"reputation": 471, "user_id": 4515608, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a14962d882080869b622f66585c01945?s=128&d=identicon&r=PG&f=1", "display_name": "sump", "link": "https://stackoverflow.com/users/4515608/sump"}, "is_accepted": true, "score": 0, "last_activity_date": 1470239593, "creation_date": 1470239593, "answer_id": 38748374, "question_id": 38748127, "link": "https://stackoverflow.com/questions/38748127/ruby-on-rails-update-fields-based-on-f-select-value/38748374#38748374", "title": "Ruby on Rails - update fields based on f.select value", "body": "<p>You can do this with jQuery:</p>\n\n<p>Let's add an id: \"quantitySelect\" on the quantity field\nLet's also add an id: \"quantityRow\" on the td field</p>\n\n<pre><code>$(function(){\n  $('.quantitySelect').change(function(e){\n    e.preventDefault();\n    var quantity = $('.quantitySelect').val();\n    $('.quantityRow').html(\"&lt;h4&gt;&lt;%= @original_event_price %&gt; x (\" + quantity + \") guest(s)\");\n  });\n});\n</code></pre>\n\n<p>You can also add if checks to see if the quantity is > 1 and append the word guest to guests.</p>\n"}], "owner": {"reputation": 3, "user_id": 6615600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/731e48b25bce05a45572412c01087b3a?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Jones", "link": "https://stackoverflow.com/users/6615600/matt-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 948, "favorite_count": 0, "accepted_answer_id": 38748374, "answer_count": 1, "score": 0, "last_activity_date": 1470242091, "creation_date": 1470238867, "last_edit_date": 1470242091, "question_id": 38748127, "link": "https://stackoverflow.com/questions/38748127/ruby-on-rails-update-fields-based-on-f-select-value", "title": "Ruby on Rails - update fields based on f.select value", "body": "<p>I have a dropdown box to chose the number of tickets that one wants to buy. I want to update the fields after it to reflect the value once it is clicked. Here is a snippet of my form currently:</p>\n\n<pre><code>    &lt;%= form_for :transaction, :url =&gt; new_transaction_path(:event_id =&gt; @event.id), :method =&gt; 'GET' do |f| %&gt;\n      &lt;table style=\"width:100%\"&gt;\n        &lt;tr style=\"border-bottom: 1px solid #999999\"&gt;\n          &lt;td&gt;&lt;h4&gt;Number of Guests&lt;/h4&gt;&lt;/td&gt;\n          &lt;td&gt;\n            &lt;%= f.select(:quantity, (1..20))%&gt;\n          &lt;/td&gt;\n        &lt;/tr&gt;\n        &lt;tr style=\"border-bottom: 1px solid #999999\"&gt;\n          &lt;!-- replace (1) with the value from the f.select dropdown --&gt;\n          &lt;td&gt;&lt;h4&gt;&lt;%= @original_event_price %&gt; x (1) guest(s)&lt;/h4&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n      &lt;/table&gt;\n      &lt;%= f.submit 'Request to Book', class: 'button mt1 btn-request-to-book' %&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>I want to replace (1) with the value from the f.select dropdown in the last table row to the value of guests that the user chooses. </p>\n\n<p><strong>EDIT WITH WORKING SOLUTION</strong></p>\n\n<pre><code>&lt;%= form_for :transaction, :url =&gt; new_transaction_path(:event_id =&gt; @event.id), :method =&gt; 'GET' do |f| %&gt;\n  &lt;table style=\"width:100%\"&gt;\n    &lt;tr style=\"border-bottom: 1px solid #999999\"&gt;\n      &lt;td&gt;&lt;h4&gt;Number of Guests&lt;/h4&gt;&lt;/td&gt;\n      &lt;td&gt;\n        &lt;%= f.select :quantity, (1..20), {}, { :onChange=&gt;'mytest()', :id=&gt;'quantitySelect' } %&gt;\n      &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr style=\"border-bottom: 1px solid #999999\"&gt;\n      &lt;!-- replace (1) with the value from the f.select dropdown --&gt;\n      &lt;td&gt;&lt;h4&gt;&lt;%= @original_event_price %&gt; x (1) guest(s)&lt;/h4&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;/table&gt;\n  &lt;%= f.submit 'Request to Book', class: 'button mt1 btn-request-to-book' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>SCRIPT</p>\n\n<pre><code>&lt;script type=\"text/javascript\"&gt;\n  function mytest() {\n    var quantity = $('#quantitySelect').val();\n    $('#quantityRow').html(\"&lt;h4&gt;&lt;%= @original_event_price %&gt; x (\" + quantity + \") guest(s)\");\n  }\n&lt;/script&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "capybara", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 960, "user_id": 4109592, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7Sip6.jpg?s=128&g=1", "display_name": "Nick Schwaderer", "link": "https://stackoverflow.com/users/4109592/nick-schwaderer"}, "edited": false, "score": 0, "creation_date": 1470294537, "post_id": 38752983, "comment_id": 64893242, "body": "I&#39;m going to accept this as the answer, because that&#39;s what I&#39;m fighting right now, having a more in depth conversation on the issues page for js-routes here: <a href=\"https://github.com/railsware/js-routes/issues/203#issuecomment-237467449\" rel=\"nofollow noreferrer\">github.com/railsware/js-routes/issues/&hellip;</a>"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1470255863, "creation_date": 1470255863, "answer_id": 38752983, "question_id": 38747650, "link": "https://stackoverflow.com/questions/38747650/rails-5-upgrade-nomethoderror-undefined-method-call-for-js-routes-dependen/38752983#38752983", "title": "Rails 5 Upgrade: NoMethodError: undefined method `call&#39; for :&quot;js-routes_dependent_on_routes&quot;", "body": "<p>I would guess that js-routes is not yet compatible with sprockets 4.0 - revert to sprockets 3.x</p>\n"}], "owner": {"reputation": 960, "user_id": 4109592, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7Sip6.jpg?s=128&g=1", "display_name": "Nick Schwaderer", "link": "https://stackoverflow.com/users/4109592/nick-schwaderer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "accepted_answer_id": 38752983, "answer_count": 1, "score": 0, "last_activity_date": 1470255863, "creation_date": 1470237647, "last_edit_date": 1470238016, "question_id": 38747650, "link": "https://stackoverflow.com/questions/38747650/rails-5-upgrade-nomethoderror-undefined-method-call-for-js-routes-dependen", "title": "Rails 5 Upgrade: NoMethodError: undefined method `call&#39; for :&quot;js-routes_dependent_on_routes&quot;", "body": "<p>I am getting a peculiar error during my Rails 5 upgrading when I run RSpec or <code>rake assets:precompile</code>, or try to fire up my server. It's running into this in my <code>session.html.haml</code> file and being picked up by better_errors. In RSpec it hits on the feature tests immediately. (Capybara) In short it is this:</p>\n\n<p><code>\nrake aborted!\nNoMethodError: undefined method `call' for :\"js-routes_dependent_on_routes\":Symbol\n</code></p>\n\n<p>Here is the stack trace for the rake task:</p>\n\n<p><code>\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/processor_utils.rb:83:in `call_processor'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/processor_utils.rb:65:in `block in call_processors'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/processor_utils.rb:64:in `reverse_each'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/processor_utils.rb:64:in `call_processors'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/loader.rb:147:in `load_from_unloaded'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/loader.rb:58:in `block in load'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/loader.rb:323:in `fetch_asset_from_dependency_cache'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/loader.rb:42:in `load'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/cached_environment.rb:20:in `block in initialize'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/cached_environment.rb:47:in `yield'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/cached_environment.rb:47:in `load'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/bundle.rb:23:in `block in call'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/utils.rb:152:in `dfs'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/bundle.rb:24:in `call'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/processor_utils.rb:83:in `call_processor'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/processor_utils.rb:65:in `block in call_processors'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/processor_utils.rb:64:in `reverse_each'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/processor_utils.rb:64:in `call_processors'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/loader.rb:147:in `load_from_unloaded'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/loader.rb:58:in `block in load'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/loader.rb:323:in `fetch_asset_from_dependency_cache'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/loader.rb:42:in `load'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/cached_environment.rb:20:in `block in initialize'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/cached_environment.rb:47:in `yield'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/cached_environment.rb:47:in `load'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/manifest.rb:124:in `block in find'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/manifest.rb:123:in `each'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/manifest.rb:123:in `find'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/manifest.rb:165:in `compile'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-rails-3.1.1/lib/sprockets/rails/task.rb:68:in `block (3 levels) in define'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/rake/sprocketstask.rb:147:in `with_logger'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-rails-3.1.1/lib/sprockets/rails/task.rb:67:in `block (2 levels) in define'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/airbrake-5.4.3/lib/airbrake/rake/task_ext.rb:19:in `execute'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/gems/rake-11.2.2/exe/rake:27:in `&lt;top (required)&gt;'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/bin/ruby_executable_hooks:15:in `eval'\n/Users/this_is-my_username/.rvm/gems/ruby-2.2.3/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></p>\n\n<p>And here is the stack trace for RSpec:</p>\n\n<p>```\nFailure/Error: = stylesheet_link_tag 'application'</p>\n\n<pre><code>  ActionView::Template::Error:\n    undefined method `call' for :\"js-routes_dependent_on_routes\":Symbol\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/processor_utils.rb:83:in `call_processor'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/processor_utils.rb:65:in `block in call_processors'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/processor_utils.rb:64:in `reverse_each'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/processor_utils.rb:64:in `call_processors'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/loader.rb:147:in `load_from_unloaded'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/loader.rb:58:in `block in load'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/loader.rb:323:in `fetch_asset_from_dependency_cache'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/loader.rb:42:in `load'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/cached_environment.rb:20:in `block in initialize'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/cached_environment.rb:47:in `yield'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/cached_environment.rb:47:in `load'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/bundle.rb:23:in `block in call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/utils.rb:152:in `dfs'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/bundle.rb:24:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/processor_utils.rb:83:in `call_processor'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/processor_utils.rb:65:in `block in call_processors'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/processor_utils.rb:64:in `reverse_each'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/processor_utils.rb:64:in `call_processors'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/loader.rb:147:in `load_from_unloaded'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/loader.rb:58:in `block in load'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/loader.rb:323:in `fetch_asset_from_dependency_cache'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/loader.rb:42:in `load'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/cached_environment.rb:20:in `block in initialize'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/cached_environment.rb:47:in `yield'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/cached_environment.rb:47:in `load'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/base.rb:66:in `find_asset'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/base.rb:73:in `find_all_linked_assets'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/manifest.rb:124:in `block in find'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/manifest.rb:123:in `each'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/manifest.rb:123:in `find'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-rails-3.1.1/lib/sprockets/railtie.rb:50:in `each'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-rails-3.1.1/lib/sprockets/railtie.rb:50:in `map'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-rails-3.1.1/lib/sprockets/railtie.rb:50:in `precompiled_assets'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-rails-3.1.1/lib/sprockets/railtie.rb:35:in `asset_precompiled?'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-rails-3.1.1/lib/sprockets/railtie.rb:250:in `block (3 levels) in &lt;class:Railtie&gt;'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-rails-3.1.1/lib/sprockets/rails/helper.rb:342:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-rails-3.1.1/lib/sprockets/rails/helper.rb:342:in `precompiled?'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-rails-3.1.1/lib/sprockets/rails/helper.rb:346:in `raise_unless_precompiled_asset'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-rails-3.1.1/lib/sprockets/rails/helper.rb:320:in `digest_path'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-rails-3.1.1/lib/sprockets/rails/helper.rb:308:in `asset_path'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-rails-3.1.1/lib/sprockets/rails/helper.rb:85:in `block in resolve_asset_path'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-rails-3.1.1/lib/sprockets/rails/helper.rb:225:in `block in resolve_asset'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-rails-3.1.1/lib/sprockets/rails/helper.rb:224:in `each'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-rails-3.1.1/lib/sprockets/rails/helper.rb:224:in `detect'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-rails-3.1.1/lib/sprockets/rails/helper.rb:224:in `resolve_asset'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-rails-3.1.1/lib/sprockets/rails/helper.rb:84:in `resolve_asset_path'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-rails-3.1.1/lib/sprockets/rails/helper.rb:74:in `compute_asset_path'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionview-5.0.0/lib/action_view/helpers/asset_url_helper.rb:144:in `asset_path'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionview-5.0.0/lib/action_view/helpers/asset_url_helper.rb:281:in `stylesheet_path'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionview-5.0.0/lib/action_view/helpers/asset_tag_helper.rb:100:in `block in stylesheet_link_tag'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionview-5.0.0/lib/action_view/helpers/asset_tag_helper.rb:96:in `map'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionview-5.0.0/lib/action_view/helpers/asset_tag_helper.rb:96:in `stylesheet_link_tag'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-rails-3.1.1/lib/sprockets/rails/helper.rb:168:in `block in stylesheet_link_tag'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-rails-3.1.1/lib/sprockets/rails/helper.rb:166:in `map'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-rails-3.1.1/lib/sprockets/rails/helper.rb:166:in `stylesheet_link_tag'\n  # ./app/views/layouts/session.html.haml:9:in `_app_views_layouts_session_html_haml__520677417205870691_70261382602080'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionview-5.0.0/lib/action_view/template.rb:158:in `block in render'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/notifications.rb:166:in `instrument'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionview-5.0.0/lib/action_view/template.rb:348:in `instrument'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionview-5.0.0/lib/action_view/template.rb:156:in `render'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionview-5.0.0/lib/action_view/renderer/template_renderer.rb:66:in `render_with_layout'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/skylight-0.10.5/lib/skylight/probes/action_view.rb:32:in `block in render_with_layout'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionview-5.0.0/lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/notifications.rb:164:in `block in instrument'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/notifications/instrumenter.rb:21:in `instrument'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/notifications.rb:164:in `instrument'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionview-5.0.0/lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/skylight-0.10.5/lib/skylight/probes/action_view.rb:31:in `render_with_layout'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionview-5.0.0/lib/action_view/renderer/template_renderer.rb:52:in `render_template'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionview-5.0.0/lib/action_view/renderer/template_renderer.rb:14:in `render'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionview-5.0.0/lib/action_view/renderer/renderer.rb:42:in `render_template'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionview-5.0.0/lib/action_view/renderer/renderer.rb:23:in `render'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionview-5.0.0/lib/action_view/rendering.rb:103:in `_render_template'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_controller/metal/streaming.rb:217:in `_render_template'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionview-5.0.0/lib/action_view/rendering.rb:83:in `render_to_body'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_controller/metal/rendering.rb:52:in `render_to_body'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_controller/metal/renderers.rb:144:in `render_to_body'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/abstract_controller/rendering.rb:26:in `render'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_controller/metal/rendering.rb:36:in `render'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/core_ext/benchmark.rb:12:in `block in ms'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/core_ext/benchmark.rb:12:in `ms'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_controller/metal/instrumentation.rb:44:in `block in render'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activerecord-5.0.0/lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_controller/metal/instrumentation.rb:43:in `render'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/wicked_pdf-1.0.6/lib/wicked_pdf/pdf_helper.rb:22:in `render_with_wicked_pdf'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/bundler/gems/remotipart-88d9a7d55bde/lib/remotipart/render_overrides.rb:16:in `render_with_remotipart'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/responders-2.2.0/lib/action_controller/responder.rb:238:in `default_render'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/responders-2.2.0/lib/action_controller/responder.rb:170:in `to_html'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/responders-2.2.0/lib/action_controller/responder.rb:163:in `respond'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/responders-2.2.0/lib/action_controller/responder.rb:156:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/responders-2.2.0/lib/action_controller/respond_with.rb:205:in `respond_with'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/devise-4.2.0/app/controllers/devise/sessions_controller.rb:12:in `new'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/abstract_controller/base.rb:188:in `process_action'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_controller/metal/rendering.rb:30:in `process_action'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/abstract_controller/callbacks.rb:20:in `block in process_action'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/callbacks.rb:126:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/callbacks.rb:126:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/callbacks.rb:455:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/callbacks.rb:455:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/callbacks.rb:448:in `block (2 levels) in around'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/callbacks.rb:286:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/callbacks.rb:286:in `block (2 levels) in halting'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/bundler/gems/rails-observers-3fe157d6cbb5/lib/rails/observers/action_controller/caching/sweeper.rb:24:in `around'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/callbacks.rb:405:in `public_send'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/callbacks.rb:405:in `block in make_lambda'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/callbacks.rb:285:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/callbacks.rb:285:in `block in halting'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/callbacks.rb:447:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/callbacks.rb:447:in `block in around'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/callbacks.rb:455:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/callbacks.rb:455:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/callbacks.rb:101:in `__run_callbacks__'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/callbacks.rb:90:in `run_callbacks'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/abstract_controller/callbacks.rb:19:in `process_action'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_controller/metal/rescue.rb:20:in `process_action'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/notifications.rb:164:in `block in instrument'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/notifications/instrumenter.rb:21:in `instrument'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/notifications.rb:164:in `instrument'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_controller/metal/instrumentation.rb:30:in `process_action'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_controller/metal/params_wrapper.rb:248:in `process_action'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activerecord-5.0.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/abstract_controller/base.rb:126:in `process'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionview-5.0.0/lib/action_view/rendering.rb:30:in `process'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_controller/metal.rb:190:in `dispatch'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_controller/metal.rb:262:in `dispatch'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_dispatch/routing/route_set.rb:50:in `dispatch'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_dispatch/routing/route_set.rb:32:in `serve'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_dispatch/routing/mapper.rb:16:in `block in &lt;class:Constraints&gt;'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_dispatch/routing/mapper.rb:46:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_dispatch/routing/mapper.rb:46:in `serve'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_dispatch/journey/router.rb:39:in `block in serve'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_dispatch/journey/router.rb:26:in `each'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_dispatch/journey/router.rb:26:in `serve'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_dispatch/routing/route_set.rb:725:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/rack-pjax-1.0.0/lib/rack/pjax.rb:12:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/rack-attack-4.4.1/lib/rack/attack.rb:107:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/bundler/gems/remotipart-88d9a7d55bde/lib/remotipart/middleware.rb:32:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/warden-1.2.6/lib/warden/manager.rb:35:in `block in call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/warden-1.2.6/lib/warden/manager.rb:34:in `catch'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/warden-1.2.6/lib/warden/manager.rb:34:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/rack-2.0.1/lib/rack/etag.rb:25:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/rack-2.0.1/lib/rack/conditional_get.rb:25:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/rack-2.0.1/lib/rack/head.rb:12:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/rack-2.0.1/lib/rack/session/abstract/id.rb:222:in `context'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/rack-\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-rails-3.1.1/lib/sprockets/rails/quiet_assets.rb:13:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/request_store-1.3.1/lib/request_store/middleware.rb:9:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/rack-2.0.1/lib/rack/method_override.rb:22:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/rack-2.0.1/lib/rack/runtime.rb:22:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/activesupport-5.0.0/lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_dispatch/middleware/executor.rb:12:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/actionpack-5.0.0/lib/action_dispatch/middleware/static.rb:136:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/rack-2.0.1/lib/rack/sendfile.rb:111:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/railties-5.0.0/lib/rails/engine.rb:522:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/rack-2.0.1/lib/rack/urlmap.rb:68:in `block in call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/rack-2.0.1/lib/rack/urlmap.rb:53:in `each'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/rack-2.0.1/lib/rack/urlmap.rb:53:in `call'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/rack-test-0.6.3/lib/rack/mock_session.rb:30:in `request'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/rack-test-0.6.3/lib/rack/test.rb:244:in `process_request'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/rack-test-0.6.3/lib/rack/test.rb:58:in `get'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/capybara-2.7.1/lib/capybara/rack_test/browser.rb:61:in `process'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/capybara-2.7.1/lib/capybara/rack_test/browser.rb:39:in `block in process_and_follow_redirects'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/capybara-2.7.1/lib/capybara/rack_test/browser.rb:38:in `times'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/capybara-2.7.1/lib/capybara/rack_test/browser.rb:38:in `process_and_follow_redirects'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/capybara-2.7.1/lib/capybara/rack_test/browser.rb:22:in `visit'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/capybara-2.7.1/lib/capybara/rack_test/driver.rb:43:in `visit'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/capybara-2.7.1/lib/capybara/session.rb:233:in `visit'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/capybara-2.7.1/lib/capybara/dsl.rb:52:in `block (2 levels) in &lt;module:DSL&gt;'\n  # ./spec/support/login_macros.rb:43:in `login_registrar_feature'\n  # ./spec/features/error_avoidance/role_specific_spec.rb:13:in `block (2 levels) in &lt;top (required)&gt;'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/rspec-retry-0.4.5/lib/rspec/retry.rb:98:in `block in run'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/rspec-retry-0.4.5/lib/rspec/retry.rb:88:in `loop'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/rspec-retry-0.4.5/lib/rspec/retry.rb:88:in `run'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/rspec-retry-0.4.5/lib/rspec_ext/rspec_ext.rb:12:in `run_with_retry'\n  # /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/rspec-retry-0.4.5/lib/rspec/retry.rb:22:in `block (2 levels) in setup'\n  # ------------------\n  # --- Caused by: ---\n  # NoMethodError:\n  #   undefined method `call' for :\"js-routes_dependent_on_routes\":Symbol\n  #   /Users/this_is_my_username/.rvm/gems/ruby-2.2.3/gems/sprockets-4.0.0.beta2/lib/sprockets/processor_utils.rb:83:in `call_processor'\n</code></pre>\n\n<p>```</p>\n\n<p>What in the world is going on?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json"], "answers": [{"tags": [], "owner": {"reputation": 541, "user_id": 1046311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5d654832cbadad537c9e7585dbc9fe5?s=128&d=identicon&r=PG", "display_name": "Brice Durand", "link": "https://stackoverflow.com/users/1046311/brice-durand"}, "is_accepted": true, "score": 0, "last_activity_date": 1470237662, "creation_date": 1470237662, "answer_id": 38747660, "question_id": 38747510, "link": "https://stackoverflow.com/questions/38747510/nomethoderror-undefined-method-for-nilnilclass-when-object-is-not-nil/38747660#38747660", "title": "NoMethodError (undefined method `[]&#39; for nil:NilClass) when object is not nil", "body": "<p>Use result[\"results\"] instead of result[0][\"results\"]</p>\n\n<pre><code>@word.definition = result[\"results\"][0][\"senses\"][0][\"definition\"][0]\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4713966, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-uSCEUZNB--M/AAAAAAAAAAI/AAAAAAAAACQ/LRcNFtBuNyo/photo.jpg?sz=128", "display_name": "javipepe", "link": "https://stackoverflow.com/users/4713966/javipepe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 38747660, "answer_count": 1, "score": 0, "last_activity_date": 1470237662, "creation_date": 1470237281, "question_id": 38747510, "link": "https://stackoverflow.com/questions/38747510/nomethoderror-undefined-method-for-nilnilclass-when-object-is-not-nil", "title": "NoMethodError (undefined method `[]&#39; for nil:NilClass) when object is not nil", "body": "<p>My app consists in a form via which you can enter a word, submit, and then the controller will create a <code>Word</code> object with the word itself, and the definition and an example fetched via JSON from an API.</p>\n\n<p>This is the conflicting line:</p>\n\n<pre><code>def create\n  @word = Word.new(word_params)\n\n  url = \"http://api.pearson.com/v2/dictionaries/entries?headword=#{@word.word_name}\"\n\n  Rails.logger.info url\n  uri = URI(url)\n  Rails.logger.info uri\n  response = Net::HTTP.get(uri)\n  Rails.logger.info response\n  result = ActiveSupport::JSON.decode(response)\n  Rails.logger.info result\n\n  @word.definition = result[0][\"results\"][0][\"senses\"][0][\"definition\"][0]\n  @word.example = result[0][\"results\"][0][\"senses\"][0][\"translation\"][0][\"example\"][0][\"text\"]\n  @word.save\n  redirect_to @word\nend\n</code></pre>\n\n<p>And here comes the error line:</p>\n\n<pre><code>@word.definition = result[0][\"results\"][0][\"senses\"][0][\"definition\"][0]\n\nFATAL -- :NoMethodError (undefined method `[]' for nil:NilClass):\n</code></pre>\n\n<p>So I assumed that <code>result</code> was <code>nil</code>. So I logged it out but the result is exactly as expected <a href=\"http://i.stack.imgur.com/tK9iA.png\" rel=\"nofollow\">as shown in this image</a></p>\n\n<p>What else can I try?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 16241, "user_id": 4927984, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cKD3n.png?s=128&g=1", "display_name": "Mistalis", "link": "https://stackoverflow.com/users/4927984/mistalis"}, "edited": false, "score": 0, "creation_date": 1470236957, "post_id": 38747360, "comment_id": 64868564, "body": "What have you done so far?"}], "answers": [{"comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 221, "user_id": 5535908, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ff8ecf8d47500eb8a5269b8a0cc5dc8e?s=128&d=identicon&r=PG&f=1", "display_name": "GVS", "link": "https://stackoverflow.com/users/5535908/gvs"}, "edited": false, "score": 0, "creation_date": 1470237180, "post_id": 38747390, "comment_id": 64868715, "body": "Basically, you should use the link_to version that accepts a block"}, {"owner": {"reputation": 221, "user_id": 5535908, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ff8ecf8d47500eb8a5269b8a0cc5dc8e?s=128&d=identicon&r=PG&f=1", "display_name": "GVS", "link": "https://stackoverflow.com/users/5535908/gvs"}, "edited": false, "score": 0, "creation_date": 1470237189, "post_id": 38747390, "comment_id": 64868724, "body": "It worked! I have to wait 10 minutes to accept this answer. But I will mark it as correct. Thanks!!!"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 1, "last_activity_date": 1470236934, "creation_date": 1470236934, "answer_id": 38747390, "question_id": 38747360, "link": "https://stackoverflow.com/questions/38747360/how-to-add-glyphicon-to-link-to/38747390#38747390", "title": "How to add glyphicon to link_to", "body": "<p>Try something like</p>\n\n<pre><code>&lt;%= link_to like_post_path(post), method: :post do %&gt;\n  &lt;i class=\"glyphicon glyphicon-heart\"&gt;&lt;/i&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "is_accepted": false, "score": 0, "last_activity_date": 1470237195, "creation_date": 1470237195, "answer_id": 38747474, "question_id": 38747360, "link": "https://stackoverflow.com/questions/38747360/how-to-add-glyphicon-to-link-to/38747474#38747474", "title": "How to add glyphicon to link_to", "body": "<p><strong>This is for you</strong></p>\n\n<pre><code>&lt;%= link_to '&lt;i class=\"glyphicon glyphicon-heart\"&gt;&lt;/i&gt; Like'.html_safe, like_post_path(post), method: :post %&gt;\n</code></pre>\n"}], "owner": {"reputation": 221, "user_id": 5535908, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ff8ecf8d47500eb8a5269b8a0cc5dc8e?s=128&d=identicon&r=PG&f=1", "display_name": "GVS", "link": "https://stackoverflow.com/users/5535908/gvs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1470237195, "creation_date": 1470236865, "question_id": 38747360, "link": "https://stackoverflow.com/questions/38747360/how-to-add-glyphicon-to-link-to", "title": "How to add glyphicon to link_to", "body": "<p>I am trying to replace the word \"like\" with a heart icon.</p>\n\n<p>Basically, I am trying to add <code>&lt;i class=\"glyphicon glyphicon-heart\"&gt;&lt;/i&gt;</code> to the following:</p>\n\n<pre><code>&lt;%= link_to 'Like', like_post_path(post), method: :post %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "routes"], "comments": [{"owner": {"reputation": 656, "user_id": 1571115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a14d53b497799c8835ba825923564b6?s=128&d=identicon&r=PG", "display_name": "titan", "link": "https://stackoverflow.com/users/1571115/titan"}, "edited": false, "score": 0, "creation_date": 1470235016, "post_id": 38746638, "comment_id": 64867019, "body": "can you post your action code here?"}, {"owner": {"reputation": 2914, "user_id": 2102463, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/15dcbb4f6666b95444564c2fde5aceb7?s=128&d=identicon&r=PG", "display_name": "MMachinegun", "link": "https://stackoverflow.com/users/2102463/mmachinegun"}, "edited": false, "score": 0, "creation_date": 1470242422, "post_id": 38746638, "comment_id": 64872308, "body": "is your <code>.js</code>-file in your view named <code>create.js.erb</code> ?"}, {"owner": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "edited": false, "score": 0, "creation_date": 1470243121, "post_id": 38746638, "comment_id": 64872736, "body": "Yes. But its blank"}], "answers": [{"comments": [{"owner": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "edited": false, "score": 0, "creation_date": 1470235273, "post_id": 38746719, "comment_id": 64867214, "body": "Do not work. It redirect anymay with the error: ActionController::UnknownFormat"}, {"owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "reply_to_user": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "edited": false, "score": 0, "creation_date": 1470235478, "post_id": 38746719, "comment_id": 64867396, "body": "you need to specify remote: =&gt; true and create a file in view folder named create.js.erb"}, {"owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "reply_to_user": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "edited": false, "score": 0, "creation_date": 1470235744, "post_id": 38746719, "comment_id": 64867640, "body": "did you removed new.html.erb ? keep both file use format.js not format.js"}, {"owner": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "edited": false, "score": 0, "creation_date": 1470235805, "post_id": 38746719, "comment_id": 64867687, "body": "No, I dont remove any fale, just commented the code of redirect"}, {"owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "reply_to_user": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "edited": false, "score": 0, "creation_date": 1470235846, "post_id": 38746719, "comment_id": 64867722, "body": "View comment above just use format.js not format.json but you can keep both"}, {"owner": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "edited": false, "score": 0, "creation_date": 1470236373, "post_id": 38746719, "comment_id": 64868124, "body": "Yeah, I try that. Just format.js It still redirect and get the error: ActionController::UnknownFormat"}, {"owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "reply_to_user": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "edited": false, "score": 0, "creation_date": 1470236893, "post_id": 38746719, "comment_id": 64868516, "body": "Look you are using remote: :remote instead of remote: true and no necessary to use remote: true in submit button. Simple error man!"}, {"owner": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "edited": false, "score": 0, "creation_date": 1470237254, "post_id": 38746719, "comment_id": 64868770, "body": "Thanks! Code updated, look above. But when I submit the form, it still redirect to /pictures (index action) and return the error: ActionController::UnknownFormat"}, {"owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "reply_to_user": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "edited": false, "score": 0, "creation_date": 1470238207, "post_id": 38746719, "comment_id": 64869512, "body": "Is there is create.js.erb file in app/views/pictures/"}, {"owner": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "edited": false, "score": 0, "creation_date": 1470238548, "post_id": 38746719, "comment_id": 64869738, "body": "No, this file dont exist"}, {"owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "reply_to_user": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "edited": false, "score": 0, "creation_date": 1470238607, "post_id": 38746719, "comment_id": 64869775, "body": "Create the file. The redirection error is due to absence of that file."}, {"owner": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "edited": false, "score": 0, "creation_date": 1470238733, "post_id": 38746719, "comment_id": 64869873, "body": "Should create a blank file? Just tried that and the error persist."}, {"owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "reply_to_user": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "edited": false, "score": 0, "creation_date": 1470239770, "post_id": 38746719, "comment_id": 64870607, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/119027/discussion-between-pradeep-sapkota-and-fernando-aureliano\">continue this discussion in chat</a>. click the link"}], "tags": [], "owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "is_accepted": false, "score": 1, "last_activity_date": 1470235166, "creation_date": 1470235166, "answer_id": 38746719, "question_id": 38746638, "link": "https://stackoverflow.com/questions/38746638/rails-4-stop-redirect-after-create-or-update-form/38746719#38746719", "title": "Rails 4: Stop redirect after create or update form", "body": "<p><strong>This is due to response format</strong></p>\n\n<pre><code>respond_to do |format|\n  if @data.save\n   format.js\n   #you need to remove format.html form here just keep format.js\n  else\n   format.html { render :new}\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 3485359, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d0471f8db6827a0070de8a4e67df3d6?s=128&d=identicon&r=PG&f=1", "display_name": "Server Izetov", "link": "https://stackoverflow.com/users/3485359/server-izetov"}, "is_accepted": false, "score": 0, "last_activity_date": 1470313667, "creation_date": 1470313667, "answer_id": 38767361, "question_id": 38746638, "link": "https://stackoverflow.com/questions/38746638/rails-4-stop-redirect-after-create-or-update-form/38767361#38767361", "title": "Rails 4: Stop redirect after create or update form", "body": "<p>You are trying to use 2 options (remote: true, multipart: true) which can't work together. If you want to use AJAX for upload files, you should try this awesome GEM <a href=\"https://github.com/JangoSteve/remotipart\" rel=\"nofollow\">remotipart</a></p>\n"}], "owner": {"reputation": 764, "user_id": 552941, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/HYsSP.jpg?s=128&g=1", "display_name": "Fernando Aureliano", "link": "https://stackoverflow.com/users/552941/fernando-aureliano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 893, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1470313667, "creation_date": 1470234973, "last_edit_date": 1470239321, "question_id": 38746638, "link": "https://stackoverflow.com/questions/38746638/rails-4-stop-redirect-after-create-or-update-form", "title": "Rails 4: Stop redirect after create or update form", "body": "<p>How can I <strong>not redirect</strong> to an other view after creating or updating a form using <code>remote: true</code> in Rails?</p>\n\n\n\n<pre><code>//route\nresources :pictures\n\n\n// action\ndef create\n  @picture = Picture.new(picture_params)\n\n  respond_to do |format|\n    if @picture.save\n      #format.html { redirect_to @picture, notice: 'Picture was successfully created.' }\n      #format.json { render :show, status: :created, location: @picture }\n      format.js\n    else\n      format.html { render :new }\n      #format.json { render json: @picture.errors, status: :unprocessable_entity }\n    end\n  end\nend\n\n\n// view\n&lt;%= form_for(@picture, remote: true, :authenticity_token =&gt; true, html: { multipart: true } ) do |f| %&gt;\n\n    [...]\n\n&lt;%= f.submit %&gt;\n</code></pre>\n\n<p>If I just remove the redirect function I get the error:</p>\n\n<pre><code>ActionController::UnknownFormat \n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/BlQDz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BlQDz.png\" alt=\"error image\"></a></p>\n"}, {"tags": ["ruby", "compiler-errors", "rubygems"], "owner": {"reputation": 31, "user_id": 6652007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b5ecf44b32b19bc964ca57f5ea9bd0d?s=128&d=identicon&r=PG&f=1", "display_name": "Josqu", "link": "https://stackoverflow.com/users/6652007/josqu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1470606709, "creation_date": 1470233653, "last_edit_date": 1470606709, "question_id": 38746116, "link": "https://stackoverflow.com/questions/38746116/cant-install-visualruby", "title": "Cant install Visualruby", "body": "<p>I try to install Visualruby (<code>sudo gem install visualruby</code>) on Linux Mint I have already install ruby and Glade but its give me anytime this error output: </p>\n\n<pre><code>rbglib.c: In function \u2018rbg_scan_options\u2019:\nrbglib.c:905:56: error: expected \u2018)\u2019 before \u2018PRIsVALUE\u2019\n                      \"options must be Hash or nil: %+\" PRIsVALUE,\n                                                        ^\nrbglib.c:906:22: warning: conversion lacks type at end of format [-Wformat=]\n                      original_options);\n                      ^\nmake: *** [rbglib.o] Error 1\n\n\nGem files will remain installed in /var/lib/gems/1.9.1/gems/glib2-3.0.8 for inspection.\nResults logged to /var/lib/gems/1.9.1/gems/glib2-3.0.8/ext/glib2/gem_make.out\n</code></pre>\n"}, {"tags": ["ruby", "gitlab"], "owner": {"reputation": 917, "user_id": 1689137, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6e00dce5b0f2050aa5caf016c9dfe3e3?s=128&d=identicon&r=PG", "display_name": "Dmitriy Kozmenko", "link": "https://stackoverflow.com/users/1689137/dmitriy-kozmenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 2, "answer_count": 0, "score": 1, "last_activity_date": 1470237136, "creation_date": 1470233551, "last_edit_date": 1470237136, "question_id": 38746073, "link": "https://stackoverflow.com/questions/38746073/gitlab-get-count-of-not-work-in-progress-merge-requests", "title": "Gitlab get count of not Work in progress merge requests", "body": "<p>to get count of all merge requests assigned to user on Gitlab:</p>\n\n<pre><code>current_user.assigned_merge_requests.opened.count\n</code></pre>\n\n<p>to get count of all opened merge requests:</p>\n\n<pre><code>MergeRequest.opened.count\n</code></pre>\n\n<p>How I can get count of all opened merge requests but not marked as \"Work in progress\"???</p>\n"}, {"tags": ["ruby", "sinatra"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1470248202, "post_id": 38745724, "comment_id": 64875587, "body": "Your question is an XY problem. You&#39;re asking how to do your solution, but the question should be &quot;What is the right way to generate and delete reports after n days&quot;. This shouldn&#39;t be done inside Sinatra, instead let it serve the output of the report generator. If the reports run quickly then do it inline. If they take a while then do them outside Sinatra from some sort of cron. Either way, write something that runs at an interval to purge the old files outside of Sinatra. Report age is determined by looking at its timestamp on disk, which will survive restarting the server."}], "answers": [{"tags": [], "owner": {"reputation": 10274, "user_id": 930207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oy7Q3.png?s=128&g=1", "display_name": "mcfinnigan", "link": "https://stackoverflow.com/users/930207/mcfinnigan"}, "is_accepted": false, "score": 3, "last_activity_date": 1470233494, "creation_date": 1470233494, "answer_id": 38746055, "question_id": 38745724, "link": "https://stackoverflow.com/questions/38745724/long-sleep-in-ruby/38746055#38746055", "title": "Long sleep in Ruby", "body": "<blockquote>\n  <p>How is this kind of thing normally done?</p>\n</blockquote>\n\n<p>A couple of ways in the event you don't have cron or similar schedulers on the system.</p>\n\n<ol>\n<li><p>A messaging server such as RabbitMQ, onto which you place a message with some sort of property that prevents the message from being processed and consumed until after a certain amount of time has elapsed.</p></li>\n<li><p>A service such as <a href=\"https://github.com/resque/resque\" rel=\"nofollow\">resque</a></p></li>\n<li><p>A daemon job in your server which checks the reports folder once a day (perhaps at 2am or some other less busy time) and removes files created more than a week prior</p></li>\n<li><p>Similar to above, a daemon job which checks a db table that lists the filenames, and issues deletes for files created more than a week ago.</p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1905, "user_id": 232838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8342950f34a66d9ec7cfe10b33d5494c?s=128&d=identicon&r=PG", "display_name": "koffeinfrei", "link": "https://stackoverflow.com/users/232838/koffeinfrei"}, "is_accepted": false, "score": 1, "last_activity_date": 1470233561, "last_edit_date": 1495541283, "creation_date": 1470233561, "answer_id": 38746083, "question_id": 38745724, "link": "https://stackoverflow.com/questions/38745724/long-sleep-in-ruby/38746083#38746083", "title": "Long sleep in Ruby", "body": "<p>Either</p>\n\n<ol>\n<li>Use the windows task scheduler (there is an equivalent to cronjobs on windows, see <a href=\"https://stackoverflow.com/a/132975/232838\">https://stackoverflow.com/a/132975/232838</a> for more info)</li>\n<li>Just check for old files to be deleted every time you create a new report. I don't assume that it's a problem for reports to lie around a bit too long (I assume you want to delete the old files for storage reasons).</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": true, "score": 1, "last_activity_date": 1470234765, "last_edit_date": 1470234765, "creation_date": 1470234397, "answer_id": 38746418, "question_id": 38745724, "link": "https://stackoverflow.com/questions/38745724/long-sleep-in-ruby/38746418#38746418", "title": "Long sleep in Ruby", "body": "<p>Normally you would use cron or some kind of job queue like delayed_job or Sidekiq. You can do cron jobs in Windows with the Task Scheduler or the command-line AT command. If that isn't an option for some other reason, you can do something like wp-cron, which uses incoming requests as a kind of timer to see if there are any jobs that need to be run. It would look like:</p>\n\n<pre><code>require 'sinatra'\nrequire 'date'\n\nclass App &lt; Sinatra::Base\n  configure do\n    set :report_dir, '/path/to/reports'\n    set :keep_for, 7 # days\n  end\n\n  helpers do\n    def generate\n      # write .pdf to settings.report_dir and return path to pdf\n    end\n\n    def cleanup\n      Dir.glob(File.expand_path('*.pdf', settings.report_dir)) do |pdf|\n        stat = File.lstat(pdf)\n        File.unlink(pdf) if stat.file? and Date.today - stat.ctime.to_date &gt; settings.keep_for\n      end\n    rescue Errno::ENOENT\n      # another thread is working\n    end\n  end\n\n  post '/generate_report' do\n    send_file generate\n  end\n\n  after do\n    Thread.new { cleanup } if rand &lt; 0.01 # 1% of requests trigger cleanup\n  end\nend\n</code></pre>\n\n<p>This is obviously a simplistic example to get you started. You might consider using a mutex as well if you're concerned about multiple cleanup threads running concurrently and interfering with each other, and catching the ENOENT becomes expensive.</p>\n"}], "owner": {"reputation": 61, "user_id": 2812308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0df2fbb0e503d0ec0b1440498cb66217?s=128&d=identicon&r=PG&f=1", "display_name": "bk5115545", "link": "https://stackoverflow.com/users/2812308/bk5115545"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 38746418, "answer_count": 3, "score": 0, "last_activity_date": 1470234765, "creation_date": 1470232629, "question_id": 38745724, "link": "https://stackoverflow.com/questions/38745724/long-sleep-in-ruby", "title": "Long sleep in Ruby", "body": "<p>I have a rather large Sinatra app (about 4k lines) and one portion of it involves generating reports for the user to download.</p>\n\n<p>I want the reports to auto-delete after so many days even if the webserver is restarted.  I don't have a daemon process on the server and it's Windows or else I would just throw up some cron.</p>\n\n<p><strong>How is this kind of thing normally done?</strong></p>\n\n<p>I was thinking about something like the below but it wouldn't persist after server restart.</p>\n\n<pre><code>report_filename = \"asdasdsad.pdf\"\ngenerate report(report_filename)\nThread.new {\n  sleep((60*60*24) * 7) # wait 7 days\n  File.delete(report_filename)\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5470, "user_id": 2052097, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/KOzAT.jpg?s=128&g=1", "display_name": "z atef", "link": "https://stackoverflow.com/users/2052097/z-atef"}, "edited": false, "score": 0, "creation_date": 1470231830, "post_id": 38745338, "comment_id": 64864523, "body": "You want all files under app/assets/mystuff/*  and its sub-directories ?"}], "answers": [{"tags": [], "owner": {"reputation": 1905, "user_id": 232838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8342950f34a66d9ec7cfe10b33d5494c?s=128&d=identicon&r=PG", "display_name": "koffeinfrei", "link": "https://stackoverflow.com/users/232838/koffeinfrei"}, "is_accepted": true, "score": 10, "last_activity_date": 1470232171, "creation_date": 1470232171, "answer_id": 38745543, "question_id": 38745338, "link": "https://stackoverflow.com/questions/38745338/how-to-match-multiple-patterns-with-dir-glob/38745543#38745543", "title": "How to match multiple patterns with Dir.glob?", "body": "<p><code>Dir.glob</code> also accepts an array of patterns.</p>\n\n<pre><code>Dir.glob([\"app/assets/mystuff/*\", \"app/assets/mystuff/more/*\"])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5470, "user_id": 2052097, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/KOzAT.jpg?s=128&g=1", "display_name": "z atef", "link": "https://stackoverflow.com/users/2052097/z-atef"}, "is_accepted": false, "score": 1, "last_activity_date": 1470232481, "creation_date": 1470232481, "answer_id": 38745655, "question_id": 38745338, "link": "https://stackoverflow.com/questions/38745338/how-to-match-multiple-patterns-with-dir-glob/38745655#38745655", "title": "How to match multiple patterns with Dir.glob?", "body": "<p>this should do it for you .. tested it in my local machine and it works as expected. </p>\n\n<p>lets say , you have the following directory and subdirectory :</p>\n\n<pre><code>z$ find deletpractic/\ndeletpractic/\ndeletpractic/sub_dir\ndeletpractic/sub_dir/file1_in_subdir.txt\ndeletpractic/sub_dir/file2_in_subdir.txt\ndeletpractic/text1\ndeletpractic/text2\ndeletpractic/text3\ndeletpractic/text4\ndeletpractic/text5\ndeletpractic/text6\ndeletpractic/text7\n</code></pre>\n\n<p>it pretty much  boils down to this  <code>Dir.glob(\"/mydir/**/*\")</code></p>\n\n<pre><code>[za]$ /usr/bin/ruby -rpp -e 'common_file_paths =    Dir.glob(\"/dev/deletpractic/**/*\").reject do |path|   File.directory?(path) end ; pp common_file_paths'\n</code></pre>\n\n<p>Output : </p>\n\n<pre><code>[\"/dev/deletpractic/sub_dir/file1_in_subdir.txt\",\n \"/dev/deletpractic/sub_dir/file2_in_subdir.txt\",\n \"/dev/deletpractic/text1\",\n \"/dev/deletpractic/text2\",\n \"/dev/deletpractic/text3\",\n \"/dev/deletpractic/text4\",\n \"/dev/deletpractic/text5\",\n \"/dev/deletpractic/text6\",\n \"/dev/deletpractic/text7\"]\n</code></pre>\n"}], "owner": {"reputation": 8823, "user_id": 976691, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/93eaf3f1f6df27205641701fca8bd233?s=128&d=identicon&r=PG", "display_name": "Tintin81", "link": "https://stackoverflow.com/users/976691/tintin81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2727, "favorite_count": 0, "accepted_answer_id": 38745543, "answer_count": 2, "score": 7, "last_activity_date": 1470232481, "creation_date": 1470231624, "question_id": 38745338, "link": "https://stackoverflow.com/questions/38745338/how-to-match-multiple-patterns-with-dir-glob", "title": "How to match multiple patterns with Dir.glob?", "body": "<p>In my Rails app I am trying to collect the paths to all the files contained in two different directories using <code>Dir.glob</code>.</p>\n\n<p>The following code works but is not very concise. Isn't there a way two match <strong>two</strong> patterns at once with <code>Dir.glob</code>?</p>\n\n<pre><code>common_file_paths = Dir.glob(\"app/assets/mystuff/*\").reject do |path|\n  File.directory?(path)\nend\n\nmore_file_paths = Dir.glob(\"app/assets/mystuff/more/*\").reject do |path|\n  File.directory?(path)\nend\n\nfile_paths = common_file_paths + more_file_paths\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "methods"], "answers": [{"comments": [{"owner": {"reputation": 3041, "user_id": 5012854, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh5.googleusercontent.com/-3yud0cij0J8/AAAAAAAAAAI/AAAAAAAAA7c/KPT7qK4SBFc/photo.jpg?sz=128", "display_name": "davideghz", "link": "https://stackoverflow.com/users/5012854/davideghz"}, "edited": false, "score": 0, "creation_date": 1470237108, "post_id": 38746088, "comment_id": 64868673, "body": "Thanks for your explanation and for pointing me to that RailsCast. I still do not understand one thing: how do Rails know that <code>view</code> is an <code>ActionView::Base</code> view instance of a Rails view?"}, {"owner": {"reputation": 3041, "user_id": 5012854, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh5.googleusercontent.com/-3yud0cij0J8/AAAAAAAAAAI/AAAAAAAAA7c/KPT7qK4SBFc/photo.jpg?sz=128", "display_name": "davideghz", "link": "https://stackoverflow.com/users/5012854/davideghz"}, "edited": false, "score": 0, "creation_date": 1470239844, "post_id": 38746088, "comment_id": 64870661, "body": "Your updated answer is great, but can you pls point me to the exact line in the linked source code (of the gem) where the ActionView::Base instance is actually passed to the method?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 3041, "user_id": 5012854, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh5.googleusercontent.com/-3yud0cij0J8/AAAAAAAAAAI/AAAAAAAAA7c/KPT7qK4SBFc/photo.jpg?sz=128", "display_name": "davideghz", "link": "https://stackoverflow.com/users/5012854/davideghz"}, "edited": false, "score": 1, "creation_date": 1470241082, "post_id": 38746088, "comment_id": 64871520, "body": "Wow! You&#39;re really making me work for this one... (kidding). So, on closer inspection of the referenced gem, the documentation offers <b>Using MetaTags in controller</b> and <b>Using MetaTags in view</b> - which indicates that this doesn&#39;t follow the PORO presenter pattern (sorry about that). Instead, the MetaTag methods are included in both <code>ActionController::Base</code> and <code>ActionView::Base</code> via the include methods called on lines 36 and 37 of <code>meta-tags&#47;lib&#47;meta_tags.rb</code>. In these contexts, <code>view</code> is always available."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 2, "last_activity_date": 1470239387, "last_edit_date": 1470239387, "creation_date": 1470233576, "answer_id": 38746088, "question_id": 38745199, "link": "https://stackoverflow.com/questions/38745199/rails-content-tag-method/38746088#38746088", "title": "Rails content_tag method", "body": "<p>Most commonly, <code>content_tag</code> is called in the context of a view - so, you don't need to call <code>view.content_tag</code> because the view knows how to respond to <code>content_tag</code> (and simply calling <code>content_tag</code> is the same as calling <code>self.content_tag</code>). </p>\n\n<p>The <code>render</code> method that you're showing exists within the class <code>MetaTag</code> which inherits from <code>Tag</code>. <code>Tag</code> is a plain old Ruby object (PORO), so it doesn't know how to respond to <code>content_tag</code>. </p>\n\n<p>But, as you can see, the <code>render</code> method takes a view as an argument. And, naturally, the <code>view</code> object knows how to respond to <code>content_tag</code>. So, calling <code>view.content_tag</code> is the way that <code>MetaTag</code> is able to render the content tag. </p>\n\n<p>This is pretty much an instance of the Presenter Pattern (different people use different terms). Ryan Bates has a good RailsCast on this <a href=\"https://www.youtube.com/watch?v=QHsq6aFlP0U\" rel=\"nofollow\">here</a>.</p>\n\n<p>To your question in the comments, Rails doesn't \"know\" that <code>view</code> is an instance of <code>ActionView::Base</code>. You have the responsiblity of passing in an actual view instance. I tend to pass in the controller so that I have access to the view and params. Maybe something like this:</p>\n\n<pre><code>class FooController &lt; ApplicationController\n\n  def foo_action\n    FooPresenter.present(self)\n  end\n\nend\n</code></pre>\n\n<p>and...</p>\n\n<pre><code>class FooPresenter\n  class &lt;&lt; self\n\n    def present(controller)\n      new(controller).present\n    end\n\n  end # class methods\n\n  #===================================================================\n  # instance methods\n  #===================================================================\n\n    def initialize(controller)\n      @controller = controller\n    end\n\n    def present\n      content_tag :div, data: {foo: params[:foo]}, class: 'bar'\n    end\n\n  private\n\n    def controller()  @controller                end\n    def view()        controller.view_context    end\n    def params()      controller.params          end\n\n    def method_missing(*args, &amp;block)\n      view.send(*args, &amp;block)\n    end\n\nend\n</code></pre>\n\n<p>By including the <code>method_missing</code> method, I no longer have to call <code>view.content_tag</code>. I can just call <code>content_tag</code>. FooPresenter won't find the method, so will send the call onto the <code>view</code> where the method will be found and executed. </p>\n\n<p>Again, Ryan does a great job explaining all of this. </p>\n"}, {"tags": [], "owner": {"reputation": 661, "user_id": 6615480, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh3.googleusercontent.com/-zeJiLg6mLbk/AAAAAAAAAAI/AAAAAAAADGg/kOzxK-Uaq-4/photo.jpg?sz=128", "display_name": "Greg Answer", "link": "https://stackoverflow.com/users/6615480/greg-answer"}, "is_accepted": false, "score": 1, "last_activity_date": 1470233584, "creation_date": 1470233584, "answer_id": 38746095, "question_id": 38745199, "link": "https://stackoverflow.com/questions/38745199/rails-content-tag-method/38746095#38746095", "title": "Rails content_tag method", "body": "<p>Without going into too much details, <code>content_tag</code> is a method in the <code>ActionView::Helpers::TagHelper</code> class. I believe this class' object is either automatically included in Rails views or the Rails view object delegates to this object.</p>\n\n<p>This particular gem takes an <code>ActionView::Base</code> object as a parameter for its <code>render</code> method so that the method has access to <code>content_tag</code> method, which is part of <code>ActionView::Helpers::TagHelper</code>. This is a decent example of <a href=\"https://en.wikipedia.org/wiki/Dependency_injection\" rel=\"nofollow\">Dependency Injection</a> which is a fundamental principle of object oriented programming.</p>\n"}], "owner": {"reputation": 3041, "user_id": 5012854, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh5.googleusercontent.com/-3yud0cij0J8/AAAAAAAAAAI/AAAAAAAAA7c/KPT7qK4SBFc/photo.jpg?sz=128", "display_name": "davideghz", "link": "https://stackoverflow.com/users/5012854/davideghz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1478, "favorite_count": 0, "accepted_answer_id": 38746088, "answer_count": 2, "score": 0, "last_activity_date": 1470239387, "creation_date": 1470231280, "question_id": 38745199, "link": "https://stackoverflow.com/questions/38745199/rails-content-tag-method", "title": "Rails content_tag method", "body": "<p>I was browsing the source code of <a href=\"https://github.com/kpumuk/meta-tags/blob/master/lib/meta_tags/content_tag.rb\" rel=\"nofollow\">this gem</a> and I found a use of content_tag that confuses me a lot.</p>\n\n<pre><code>def render(view)\n  view.content_tag(name, attributes[:content], attributes.except(:content))\nend\n</code></pre>\n\n<p>I do not understand why content_tag is called on view. I generally use it as helper to generate HTML tags, but I've never called it as a method.</p>\n"}, {"tags": ["ruby", "documentation", "rdoc", "yard"], "comments": [{"owner": {"reputation": 1442, "user_id": 183982, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d26359eaade8fa09736f1a6cacc59e3c?s=128&d=identicon&r=PG", "display_name": "Mahmoud M. Abdel-Fattah", "link": "https://stackoverflow.com/users/183982/mahmoud-m-abdel-fattah"}, "edited": false, "score": 0, "creation_date": 1530189580, "post_id": 38744959, "comment_id": 89154645, "body": "Someone posted the same question in Yard&#39;s Github repo, check the answer there: <a href=\"https://github.com/lsegal/yard/issues/1022\" rel=\"nofollow noreferrer\">github.com/lsegal/yard/issues/1022</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1473, "user_id": 2215798, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2fdf9a0dea76c0d2c3338f04a0d86b40?s=128&d=identicon&r=PG", "display_name": "smile2day", "link": "https://stackoverflow.com/users/2215798/smile2day"}, "is_accepted": false, "score": 4, "last_activity_date": 1618585432, "last_edit_date": 1618585432, "creation_date": 1480602475, "answer_id": 40913152, "question_id": 38744959, "link": "https://stackoverflow.com/questions/38744959/documentation-of-rails-controllers-using-yard/40913152#40913152", "title": "Documentation of Rails controllers using yard", "body": "<p>I am not aware of a Rails convention to document action parameters through Yard. Will be more than happy to learn about one if anyone out there knows more.</p>\n<p>Yard is very flexible. You can for example <a href=\"http://www.rubydoc.info/gems/yard/file/docs/Tags.md#Adding_Custom_Tags\" rel=\"nofollow noreferrer\">define your own tags</a> for the project. Add a tag dedicated to document your controller action parameters.</p>\n<p>First include the tag definition in the Yard options file <a href=\"https://www.rubydoc.info/gems/yard/file/docs/GettingStarted.md#yardopts-options-file\" rel=\"nofollow noreferrer\"><code>.yardopts</code></a>. Th file is picked up from the project's root directory:</p>\n<pre><code>--type-name-tag controller_action_param:&quot;Controller Action Parameters&quot;\n</code></pre>\n<p>Use the new tag in your controller actions like in the example below:</p>\n<pre><code># Renders a list of items\n# @controller_action_param :info [String] Only return items with this specific info\n# @controller_action_param :limit [Integer] Only return &lt;limit&gt; items\ndef index\n  # ... do something smart here\nend\n</code></pre>\n<p>The convention you now defined is that the parameter name is the key used to access the params data - params[:info] for example.</p>\n<p>Define a tag name and heading text that suits you most - this is just an example.</p>\n"}], "owner": {"reputation": 1848, "user_id": 657644, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/28f86578bc070ea2fbde98810ddf63d0?s=128&d=identicon&r=PG", "display_name": "PascalTurbo", "link": "https://stackoverflow.com/users/657644/pascalturbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1560, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1618585432, "creation_date": 1470230746, "question_id": 38744959, "link": "https://stackoverflow.com/questions/38744959/documentation-of-rails-controllers-using-yard", "title": "Documentation of Rails controllers using yard", "body": "<p>When trying to create the documentation of my rails controller and the used parameters I'm getting stuck because yard seems to expect, that the parameters exists as method parameters.</p>\n\n<pre><code># Renders a list of items\n# @param params [Hash] the search parameters\n# @option params [String] 'info' Only return items with this specific info\n# @option params [Integer] 'limit' Only return &lt;limit&gt; items\ndef index\n  # ... do something smart here\nend\n</code></pre>\n\n<p>So for this documentation yard will raise a warning and doesn't create the documentation:</p>\n\n<pre><code>[warn]: @param tag has unknown parameter name: params \nin file `app/controllers/items_controller.rb' near line 8\n</code></pre>\n\n<p>Is there a way to document these kinds of items using yard or will I need to do this manually?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "search", "hyperlink"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 6415738, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/080Rq.png?s=128&g=1", "display_name": "Akamaru", "link": "https://stackoverflow.com/users/6415738/akamaru"}, "edited": false, "score": 0, "creation_date": 1470233332, "post_id": 38745588, "comment_id": 64865700, "body": "That fixes the old problem but brings a new one. The url is now included at the end of the webpage now, but not as a separate link. An example link would be <a href=\"http://www.abdn.ac.uk/study/courses/undergraduate/L600/\" rel=\"nofollow noreferrer\">abdn.ac.uk/study/courses/undergraduate/L600</a> - with <a href=\"http://www\" rel=\"nofollow noreferrer\">www</a>. at the start too. But instead of going there it just adds /%22http://www.abdn.ac.uk/study/courses/undergraduate/L600/%&zwnj;&#8203;22 to the end of the link. Any help is appreciated."}, {"owner": {"reputation": 3041, "user_id": 5012854, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh5.googleusercontent.com/-3yud0cij0J8/AAAAAAAAAAI/AAAAAAAAA7c/KPT7qK4SBFc/photo.jpg?sz=128", "display_name": "davideghz", "link": "https://stackoverflow.com/users/5012854/davideghz"}, "reply_to_user": {"reputation": 83, "user_id": 6415738, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/080Rq.png?s=128&g=1", "display_name": "Akamaru", "link": "https://stackoverflow.com/users/6415738/akamaru"}, "edited": false, "score": 0, "creation_date": 1470233641, "post_id": 38745588, "comment_id": 64865903, "body": "it seems the problem is the missing protocol (http://) in the URL. You have two options: 1) edit all urls in your DB to include http:// or 2) do something like <code>link_to &#39;link text&#39;, &quot;http:&#47;&#47;#{degree.url}&quot;</code>"}, {"owner": {"reputation": 83, "user_id": 6415738, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/080Rq.png?s=128&g=1", "display_name": "Akamaru", "link": "https://stackoverflow.com/users/6415738/akamaru"}, "edited": false, "score": 0, "creation_date": 1470233977, "post_id": 38745588, "comment_id": 64866171, "body": "Sorry, I couldn&#39;t figure out how to get the protocol to show up on the comment. The protocol is present in the database."}, {"owner": {"reputation": 83, "user_id": 6415738, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/080Rq.png?s=128&g=1", "display_name": "Akamaru", "link": "https://stackoverflow.com/users/6415738/akamaru"}, "edited": false, "score": 0, "creation_date": 1470234240, "post_id": 38745588, "comment_id": 64866349, "body": "the http // www is present within the database and is called accurately through the code. Just it adds the url to the end of the websites homepage as opposed to opening the link separate of everything. If you get me. Sorry for not being as clear as I could be."}, {"owner": {"reputation": 3041, "user_id": 5012854, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh5.googleusercontent.com/-3yud0cij0J8/AAAAAAAAAAI/AAAAAAAAA7c/KPT7qK4SBFc/photo.jpg?sz=128", "display_name": "davideghz", "link": "https://stackoverflow.com/users/5012854/davideghz"}, "reply_to_user": {"reputation": 83, "user_id": 6415738, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/080Rq.png?s=128&g=1", "display_name": "Akamaru", "link": "https://stackoverflow.com/users/6415738/akamaru"}, "edited": false, "score": 0, "creation_date": 1470234871, "post_id": 38745588, "comment_id": 64866884, "body": "alright, let&#39;s try this <code>link_to &#39;link text&#39;, url_for(degree.url), target: &quot;_blank&quot;</code> ..this must work!"}, {"owner": {"reputation": 83, "user_id": 6415738, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/080Rq.png?s=128&g=1", "display_name": "Akamaru", "link": "https://stackoverflow.com/users/6415738/akamaru"}, "edited": false, "score": 0, "creation_date": 1470235088, "post_id": 38745588, "comment_id": 64867071, "body": "For some reason it still appends the correct html link, including protocols, to the homepages url and provides the following error: No route matches [GET] &quot;/%22http:/www.abdn.ac.uk/study/courses/undergraduate/L600/%&zwnj;&#8203;22&quot;"}, {"owner": {"reputation": 3041, "user_id": 5012854, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh5.googleusercontent.com/-3yud0cij0J8/AAAAAAAAAAI/AAAAAAAAA7c/KPT7qK4SBFc/photo.jpg?sz=128", "display_name": "davideghz", "link": "https://stackoverflow.com/users/5012854/davideghz"}, "reply_to_user": {"reputation": 83, "user_id": 6415738, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/080Rq.png?s=128&g=1", "display_name": "Akamaru", "link": "https://stackoverflow.com/users/6415738/akamaru"}, "edited": false, "score": 1, "creation_date": 1470235320, "post_id": 38745588, "comment_id": 64867258, "body": "I think the error is somehow related to the double quotes &quot; that I see before and after the url, so that rails does not see the correct full link and interprets it as a relative path, but I really do not understand why they are there :("}, {"owner": {"reputation": 83, "user_id": 6415738, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/080Rq.png?s=128&g=1", "display_name": "Akamaru", "link": "https://stackoverflow.com/users/6415738/akamaru"}, "edited": false, "score": 0, "creation_date": 1470235577, "post_id": 38745588, "comment_id": 64867490, "body": "Thanks for your help, if they are the problem I can try removing the quotes before they are stored in the database, which will hopefully solve that problem if it is the case."}, {"owner": {"reputation": 3041, "user_id": 5012854, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh5.googleusercontent.com/-3yud0cij0J8/AAAAAAAAAAI/AAAAAAAAA7c/KPT7qK4SBFc/photo.jpg?sz=128", "display_name": "davideghz", "link": "https://stackoverflow.com/users/5012854/davideghz"}, "reply_to_user": {"reputation": 83, "user_id": 6415738, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/080Rq.png?s=128&g=1", "display_name": "Akamaru", "link": "https://stackoverflow.com/users/6415738/akamaru"}, "edited": false, "score": 0, "creation_date": 1470235782, "post_id": 38745588, "comment_id": 64867671, "body": "ah! so in your DB you have links between double quotes.. that must be the problem. Let me know if it works, I&#39;m pretty curious now!"}, {"owner": {"reputation": 83, "user_id": 6415738, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/080Rq.png?s=128&g=1", "display_name": "Akamaru", "link": "https://stackoverflow.com/users/6415738/akamaru"}, "edited": false, "score": 0, "creation_date": 1470236449, "post_id": 38745588, "comment_id": 64868183, "body": "Will update you once the scrape is finished and database repopulated."}, {"owner": {"reputation": 83, "user_id": 6415738, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/080Rq.png?s=128&g=1", "display_name": "Akamaru", "link": "https://stackoverflow.com/users/6415738/akamaru"}, "edited": false, "score": 1, "creation_date": 1470237620, "post_id": 38745588, "comment_id": 64869057, "body": "Yeah, that was the problem, the double quotes in the database. With those removed your last suggestion works dandy, and I&#39;m guessing your first one probably will too. Thanks for the help."}], "tags": [], "owner": {"reputation": 3041, "user_id": 5012854, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh5.googleusercontent.com/-3yud0cij0J8/AAAAAAAAAAI/AAAAAAAAA7c/KPT7qK4SBFc/photo.jpg?sz=128", "display_name": "davideghz", "link": "https://stackoverflow.com/users/5012854/davideghz"}, "is_accepted": true, "score": 0, "last_activity_date": 1470232310, "creation_date": 1470232310, "answer_id": 38745588, "question_id": 38744712, "link": "https://stackoverflow.com/questions/38744712/rails-search-table-clickable-link/38745588#38745588", "title": "Rails search table clickable link", "body": "<p>try this instead of hardcoding the <code>&lt;a&gt; tag</code>:</p>\n\n<pre><code>&lt;%= link_to 'View course page on University Website', degree.url %&gt;\n</code></pre>\n\n<p>Can you also post a sample of url? Be sure to include the protocol (e.g, <a href=\"http://..\" rel=\"nofollow\">http://..</a>.)</p>\n"}], "owner": {"reputation": 83, "user_id": 6415738, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/080Rq.png?s=128&g=1", "display_name": "Akamaru", "link": "https://stackoverflow.com/users/6415738/akamaru"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 38745588, "answer_count": 1, "score": 1, "last_activity_date": 1474928382, "creation_date": 1470230001, "last_edit_date": 1474928382, "question_id": 38744712, "link": "https://stackoverflow.com/questions/38744712/rails-search-table-clickable-link", "title": "Rails search table clickable link", "body": "<p>I have a keyword search page for which the results are presented in a table. One of the fields in this table is a url which I want to display as a clickable link when the field has one in it but I can't get this working, when the link is clicked it instead queries the search again. I think the problem is due to the def within the searches controller dealing with the keywordsearch view. Can anybody help?</p>\n\n<p>Below is the keywordsearch view which contains the results table:</p>\n\n<pre><code>&lt;!-- Index of all Courses --&gt;\n&lt;% provide(:title, \"Courses Page\") %&gt;\n\n\n&lt;!--Breadcrumbs --&gt;\n&lt;br&gt;\n&lt;%= link_to \"Back\", :back %&gt;&lt;br&gt;&lt;br&gt;\n\n&lt;!--Page Contents --&gt; \n\n\n  &lt;div class =\"row\"&gt;\n    &lt;h1&gt;Degrees Offered&lt;/h1&gt;\n    &lt;%= image_tag \"line.png\" , :alt =&gt; \"line break\"%&gt;    \n  &lt;/div&gt;\n\n  &lt;div class =\"row\"&gt;\n\n      &lt;!-- Form for Keyword Search, to query database for University courses. It is hidden so as to not appear as a search on the page --&gt;\n      &lt;div class = \"hidden\"&gt;         \n      &lt;%= form_tag(keywordsearch_path, :method =&gt; \"get\", id: \"search-data\") do %&gt;\n      &lt;%= text_field_tag :search, params[:search], placeholder: \"Search course\" %&gt;\n      &lt;%= submit_tag \"Search\" %&gt;\n      &lt;% end %&gt;\n      &lt;/div&gt;     \n      &lt;% if @search_degree != nil %&gt;\n      &lt;% end %&gt;\n\n      &lt;% if @search_degree != nil %&gt;\n        &lt;table border=\"1\" class=\"table\"&gt;\n          &lt;thead&gt;\n            &lt;tr&gt;\n              &lt;th&gt;University Name&lt;/th&gt;\n              &lt;th&gt;Course Name&lt;/th&gt;\n              &lt;th&gt;Duration&lt;/th&gt;\n              &lt;th&gt;Qualification&lt;/th&gt;\n              &lt;th&gt;Entry Requirements&lt;/th&gt;\n              &lt;th&gt;Course Page&lt;/th&gt;\n            &lt;/tr&gt;\n          &lt;/thead&gt;\n          &lt;tbody&gt;\n            &lt;% @search_degree.each do |degree| %&gt;\n            &lt;tr&gt;\n              &lt;td&gt;&lt;%= degree.uname %&gt;&lt;/td&gt;\n              &lt;td&gt;&lt;%= degree.cname %&gt;&lt;/td&gt;\n              &lt;td&gt;&lt;%= degree.duration %&gt;&lt;/td&gt;\n              &lt;td&gt;&lt;%= degree.qualification %&gt;&lt;/td&gt;\n              &lt;td&gt;&lt;%= degree.entry %&gt;&lt;/td&gt;\n              &lt;td&gt; &lt;a href=&lt;% degree.url %&gt;&gt;View course page on University Website&lt;/a&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n            &lt;% end %&gt;\n          &lt;/tbody&gt;\n        &lt;/table&gt;\n      &lt;% end %&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>Below is portion of the search controller in which keyword search is defined:</p>\n\n<pre><code>  def keywordsearch\n    @search = Degree.all.select(:uname, :cname, :ucas, :duration, :qualification, :entry).distinct.order(id: :ASC)\n    if params[:search]\n      @search_degree = Degree.search(params[:search]).order('uname ASC')\n    end\n  end\n</code></pre>\n\n<p>The link from all of this is clickable but rather than taking me to the correct url it redoes the search.</p>\n"}, {"tags": ["ruby-on-rails", "sql-server", "ruby", "freetds", "tiny-tds"], "comments": [{"owner": {"reputation": 5651, "user_id": 2308473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e694fbf7ee4853cdb75ffd32a4a59bf7?s=128&d=identicon&r=PG", "display_name": "Ian Kenney", "link": "https://stackoverflow.com/users/2308473/ian-kenney"}, "edited": false, "score": 0, "creation_date": 1470229191, "post_id": 38744280, "comment_id": 64862495, "body": "Not familiar, but the host name could be just &quot;qsss.gar.de&quot; (also the port maybe 3000)"}, {"owner": {"reputation": 535, "user_id": 6648456, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/e1b762d35d49760ffc0984b363973714?s=128&d=identicon&r=PG&f=1", "display_name": "zwiebl", "link": "https://stackoverflow.com/users/6648456/zwiebl"}, "reply_to_user": {"reputation": 5651, "user_id": 2308473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e694fbf7ee4853cdb75ffd32a4a59bf7?s=128&d=identicon&r=PG", "display_name": "Ian Kenney", "link": "https://stackoverflow.com/users/2308473/ian-kenney"}, "edited": false, "score": 0, "creation_date": 1470229414, "post_id": 38744280, "comment_id": 64862669, "body": "No, thats all fine, I am able to connect with exactly those parameters from the SQLPro wizard, but not from the application."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1470229861, "post_id": 38744280, "comment_id": 64863019, "body": "try changing the port to 3000 and removing the 3000 from the host as this has nothing to do with the host name."}, {"owner": {"reputation": 535, "user_id": 6648456, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/e1b762d35d49760ffc0984b363973714?s=128&d=identicon&r=PG&f=1", "display_name": "zwiebl", "link": "https://stackoverflow.com/users/6648456/zwiebl"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1470230090, "post_id": 38744280, "comment_id": 64863198, "body": "@engineersmnky I just tried, it is still the same situation. I can connect from SQLPro wizard with the parameters I provided, so those are most likely not the problem?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1470232873, "post_id": 38744280, "comment_id": 64865352, "body": "@zwiebl the <code>,3000</code> means use port 300 to connect right now based on you config you are trying to connect on 1433 which means the connection string would end up more like <code>qsss.gar.de\\SQL2012,3000,1433</code> I bet this doesn&#39;t work in SQLPro. I think the second issue is the backslash when interpretted this will become <code>&quot;qsss.gar.de\\\\SQL2012,3000&quot;</code>. Maybe Try using dataserver option in place of host <a href=\"https://github.com/rails-sqlserver/tiny_tds#tinytdsclient-usage\" rel=\"nofollow noreferrer\">TinyTDS Docs</a> for more help."}, {"owner": {"reputation": 535, "user_id": 6648456, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/e1b762d35d49760ffc0984b363973714?s=128&d=identicon&r=PG&f=1", "display_name": "zwiebl", "link": "https://stackoverflow.com/users/6648456/zwiebl"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1470234582, "post_id": 38744280, "comment_id": 64866652, "body": "@engineersmnky I think you are right. I changed the port to 3000, and I removed the ,3000 from the host. Also I changed the &quot;host&quot; to &quot;dataserver&quot;, and I got rid of that problem, but now I got a new problem... It now says: &quot;Unable to connect: Adaptive Server is unavailable or does not exist (qsss.gar.de\\SQL2012)&quot;"}, {"owner": {"reputation": 535, "user_id": 6648456, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/e1b762d35d49760ffc0984b363973714?s=128&d=identicon&r=PG&f=1", "display_name": "zwiebl", "link": "https://stackoverflow.com/users/6648456/zwiebl"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1470235724, "post_id": 38744280, "comment_id": 64867627, "body": "@engineersmnky No, still the same. It now says &quot;Unable to connect: Adaptive Server is unavailable or does not exist (qsss.gar.de\\SQL2012,3000)&quot;."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1470235752, "post_id": 38744280, "comment_id": 64867644, "body": "@zwiebl this was my mistake in syntax see my answer and give that a try"}, {"owner": {"reputation": 535, "user_id": 6648456, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/e1b762d35d49760ffc0984b363973714?s=128&d=identicon&r=PG&f=1", "display_name": "zwiebl", "link": "https://stackoverflow.com/users/6648456/zwiebl"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1470237266, "post_id": 38744280, "comment_id": 64868780, "body": "@engineersmnky I figured, if I change the Host to be just &quot;qsss.gar.de&quot;, and not the &quot;qsss.gar.de\\SQL2012&quot; that I am able to connect. So the problem is somewhere with parsing that &quot;\\&quot;. What interests me, do I even need to have this part &quot;SQL2012&quot; in order to work? Or will it work also if I leave it out?"}], "answers": [{"comments": [{"owner": {"reputation": 535, "user_id": 6648456, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/e1b762d35d49760ffc0984b363973714?s=128&d=identicon&r=PG&f=1", "display_name": "zwiebl", "link": "https://stackoverflow.com/users/6648456/zwiebl"}, "edited": false, "score": 0, "creation_date": 1470236018, "post_id": 38746938, "comment_id": 64867854, "body": "I tried like you wrote, but it put me back to the initial error line: &quot;Server name not found in configuration files&quot; :("}, {"owner": {"reputation": 535, "user_id": 6648456, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/e1b762d35d49760ffc0984b363973714?s=128&d=identicon&r=PG&f=1", "display_name": "zwiebl", "link": "https://stackoverflow.com/users/6648456/zwiebl"}, "edited": false, "score": 0, "creation_date": 1470236329, "post_id": 38746938, "comment_id": 64868092, "body": "What confuses me is that I get the following in the command line, as I try to reach the server: &quot;Started GET &quot;/&quot; for ::1 at 2016-08-03 16:56:02 +0200.  So the GET command is like for the empty IP address, it looks weird?"}, {"owner": {"reputation": 535, "user_id": 6648456, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/e1b762d35d49760ffc0984b363973714?s=128&d=identicon&r=PG&f=1", "display_name": "zwiebl", "link": "https://stackoverflow.com/users/6648456/zwiebl"}, "edited": false, "score": 1, "creation_date": 1470237253, "post_id": 38746938, "comment_id": 64868766, "body": "I figured, if I change the Host to be just &quot;qsss.gar.de&quot;, and not the &quot;qsss.gar.de\\SQL2012&quot; that I am able to connect. So the problem is somewhere with parsing that &quot;\\&quot;. What interests me, do I even need to have this part &quot;SQL2012&quot; in order to work?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 535, "user_id": 6648456, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/e1b762d35d49760ffc0984b363973714?s=128&d=identicon&r=PG&f=1", "display_name": "zwiebl", "link": "https://stackoverflow.com/users/6648456/zwiebl"}, "edited": false, "score": 0, "creation_date": 1470238733, "post_id": 38746938, "comment_id": 64869874, "body": "@zwiebl if you have multiple instances of SQL running on that server then yes because that portion specifies the instance."}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 1, "last_activity_date": 1470235701, "creation_date": 1470235701, "answer_id": 38746938, "question_id": 38744280, "link": "https://stackoverflow.com/questions/38744280/tinytds-server-name-not-found-in-configuration-files/38746938#38746938", "title": "TinyTDS: Server name not found in configuration files", "body": "<p>Please try this </p>\n\n<pre><code>development:\n  adapter:    'sqlserver'\n  dataserver: 'qsss.gar.de\\SQL2012:3000'\n  database:   'City'\n  username:   'user_me'\n  password:   'user_me##2009'\n</code></pre>\n\n<p>Your current configuration is suffering from 2 things</p>\n\n<ul>\n<li><p>First you are specifying a port and including it in the host value so this will actually look like <code>qsss.gar.de\\SQL2012,3000:1433</code> </p></li>\n<li><p>Second when the host is interpreted the backslash will get doubled up e.g. <code>qsss.gar.de\\\\SQL2012,3000:1433</code></p></li>\n</ul>\n\n<p>The <code>dataserver</code> option should resolve this as TinyTDS says this option will support the backslash and the port in <code>hostname:port</code> format. I have not tested this but according to the documentation it should be a sufficient solution.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 7248292, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/db44acc1f18d858b04fdb9bde8c73010?s=128&d=identicon&r=PG", "display_name": "Noelio Alves", "link": "https://stackoverflow.com/users/7248292/noelio-alves"}, "is_accepted": false, "score": 3, "last_activity_date": 1480861929, "creation_date": 1480861929, "answer_id": 40959674, "question_id": 38744280, "link": "https://stackoverflow.com/questions/38744280/tinytds-server-name-not-found-in-configuration-files/40959674#40959674", "title": "TinyTDS: Server name not found in configuration files", "body": "<p>I was having the same problem and I was able to resolve it by changing the <strong>\"host\"</strong> parameter to <strong>\"dataserver\"</strong> in the config.yml file.</p>\n\n<p>Also check if the server running the application is able to resolve the DNS name of the database server if it does not put the IP of the server.</p>\n\n<p>I also use Microsoft SQL database and can only resolve the <strong>\"TinyTds :: Error: Server name not found in configuration files\"</strong> error after changing the above file.</p>\n"}, {"tags": [], "owner": {"reputation": 127, "user_id": 5407229, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153674350781974/picture?type=large", "display_name": "Joshua Swain", "link": "https://stackoverflow.com/users/5407229/joshua-swain"}, "is_accepted": false, "score": 0, "last_activity_date": 1619037408, "creation_date": 1619037408, "answer_id": 67203134, "question_id": 38744280, "link": "https://stackoverflow.com/questions/38744280/tinytds-server-name-not-found-in-configuration-files/67203134#67203134", "title": "TinyTDS: Server name not found in configuration files", "body": "<p>My problem was the version of the database container I was connecting to. I was connecting to a <a href=\"https://hub.docker.com/_/microsoft-mssql-server\" rel=\"nofollow noreferrer\">SQL Server db via docker</a>. When things weren't working, I was using the container <code>2019-latest</code>. Things started working when I switched to <code>2019-CU6-ubuntu-16.04</code></p>\n"}], "owner": {"reputation": 535, "user_id": 6648456, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/e1b762d35d49760ffc0984b363973714?s=128&d=identicon&r=PG&f=1", "display_name": "zwiebl", "link": "https://stackoverflow.com/users/6648456/zwiebl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5811, "favorite_count": 2, "answer_count": 3, "score": 6, "last_activity_date": 1619037408, "creation_date": 1470228860, "last_edit_date": 1470230294, "question_id": 38744280, "link": "https://stackoverflow.com/questions/38744280/tinytds-server-name-not-found-in-configuration-files", "title": "TinyTDS: Server name not found in configuration files", "body": "<p>I keep seeing this error, and I am unable to connect to the database on the remote server.</p>\n\n<p>I am given a connection string to the database, that looks like the following:</p>\n\n<pre><code>data source=qsss.gar.de\\SQL2012,3000;initial catalog=City;persist security info=True;user id=user_me;password=user_me##2009;\n</code></pre>\n\n<p>Now, I have created a <code>database.yml</code> file based on that connection string, like the following:</p>\n\n<pre><code>development:\n    adapter:  'sqlserver'\n    host:     'qsss.gar.de\\SQL2012,3000'\n    port:     1433\n    database: 'City'\n    username: 'user_me'\n    password: 'user_me##2009'\n</code></pre>\n\n<p>And as I try and run the server, it always hits me with the <strong>Server name not found in configuration files</strong> error.</p>\n\n<pre><code>opts[:port] ||= 1433\n      opts[:dataserver] = \"#{opts[:host]}:#{opts[:port]}\" if opts[:dataserver].to_s.empty?\n      connect(opts) // ERROR AT THIS LINE\n    end\n\n    def tds_73?\n</code></pre>\n\n<p>Please try and help me figure what is the problem with this?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>I can connect to the server using <code>SQLPro for MSSQL</code> wizard, with exactly the same connection parameters:</p>\n\n<p><a href=\"http://i.stack.imgur.com/87krY.png\" rel=\"noreferrer\">picture</a></p>\n\n<p>It works from the wizard, but not from code using TinyTDS!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 23, "user_id": 3578402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90c5c746e172e5c55adcab293a980749?s=128&d=identicon&r=PG&f=1", "display_name": "jmscholen", "link": "https://stackoverflow.com/users/3578402/jmscholen"}, "edited": false, "score": 0, "creation_date": 1470236940, "post_id": 38743998, "comment_id": 64868551, "body": "So I added some code related to the comment that @sergio made about missing block."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1470228704, "post_id": 38744139, "comment_id": 64862105, "body": "&quot;I&#39;d expect it to fail&quot; - unless <code>find</code> returns nothing, which hides the error. Or maybe he thought that the block is an insignificant detail and hid it behind <code>some_more_arguments</code>."}, {"owner": {"reputation": 23, "user_id": 3578402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90c5c746e172e5c55adcab293a980749?s=128&d=identicon&r=PG&f=1", "display_name": "jmscholen", "link": "https://stackoverflow.com/users/3578402/jmscholen"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1470239652, "post_id": 38744139, "comment_id": 64870541, "body": "So with the added code block, is the <code>yield record</code> being replaced with the <code>do |r|    result[r.id] = {&#39;attribute&#39; =&gt; r.attribute } end</code> block of code? @SergioTulentsev @DaveSchweisguth"}, {"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1470241191, "post_id": 38744139, "comment_id": 64871593, "body": "Not &quot;replaced&quot;, exactly, but yes, the block runs at that point with the block parameter <code>r</code> set to the argument to <code>yield</code>, <code>record</code>."}], "tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": false, "score": 2, "last_activity_date": 1470241219, "last_edit_date": 1470241219, "creation_date": 1470228446, "answer_id": 38744139, "question_id": 38743998, "link": "https://stackoverflow.com/questions/38743998/what-does-yield-do-in-this-ruby-method/38744139#38744139", "title": "What does yield do in this Ruby method?", "body": "<p><code>find_all_from_source</code> is evidently meant to be called with a block that processes the records returned by <code>find</code> in some way. The <code>yield</code> calls that block on each record.</p>\n\n<p>That method could have been written this unidiomatic way to avoid Ruby's hard-to-follow implicit block syntax:</p>\n\n<pre><code>def find_all_from_source(source_id, some_more_arguments, &amp;block)\n  joins, conditions = invoke_records_from_source(source_id, some_more_arguments)\n  find(:all, :select =&gt; \u201c#{self.table_name}\u201d, :joins =&gt; joins, :conditions =&gt; conditions).each do |record|\n    block.call record\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 3578402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/90c5c746e172e5c55adcab293a980749?s=128&d=identicon&r=PG&f=1", "display_name": "jmscholen", "link": "https://stackoverflow.com/users/3578402/jmscholen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1470241219, "creation_date": 1470228093, "last_edit_date": 1470236903, "question_id": 38743998, "link": "https://stackoverflow.com/questions/38743998/what-does-yield-do-in-this-ruby-method", "title": "What does yield do in this Ruby method?", "body": "<p>I have a bit of old code in a legacy app which uses <code>yield</code> in a way that I don't understand. I could use some help with an explanation. I've read most of the SO results on Ruby <code>yield</code> but don't understand it in this context. Thanks.</p>\n\n<pre><code>def find_all_from_source(source_id)\n  joins, conditions = invoke_records_from_source(source_id)\n  find(:all, :select =&gt; \u201c#{self.table_name}\u201d, :joins =&gt; joins, :conditions =&gt; conditions).each do |record|\n    yield record\n  end\nend\n\nresult = {}\nmodel.find_all_from_source(source_id) do |r|\n   result[r.id] = {'attribute' =&gt; r.attribute }\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "twilio"], "answers": [{"comments": [{"owner": {"reputation": 763, "user_id": 3746396, "user_type": "registered", "accept_rate": 66, "profile_image": "https://graph.facebook.com/1486200055/picture?type=large", "display_name": "FutoRicky", "link": "https://stackoverflow.com/users/3746396/futoricky"}, "edited": false, "score": 0, "creation_date": 1470231000, "post_id": 38743994, "comment_id": 64863866, "body": "trying that out and getting this error: <code>Twilio::REST::RequestError (HoldUrl is not a valid URL: &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;&lt;Response&gt;&lt;Say&gt;This call has been put on hold.&lt;&#47;Say&gt;&lt;Redirect&gt;http:&#47;&#47;twimlets.com&#47;holdmusic?Bucket=co&zwnj;&#8203;m.twilio.music.class&zwnj;&#8203;ical&lt;&#47;Redirect&gt;&lt;&#47;Res&zwnj;&#8203;ponse&gt;):</code>"}, {"owner": {"reputation": 6300, "user_id": 3165879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zFfDv.jpg?s=128&g=1", "display_name": "php-dev", "link": "https://stackoverflow.com/users/3165879/php-dev"}, "reply_to_user": {"reputation": 763, "user_id": 3746396, "user_type": "registered", "accept_rate": 66, "profile_image": "https://graph.facebook.com/1486200055/picture?type=large", "display_name": "FutoRicky", "link": "https://stackoverflow.com/users/3746396/futoricky"}, "edited": false, "score": 0, "creation_date": 1470231493, "post_id": 38743994, "comment_id": 64864241, "body": "@FutoRicky No, the <code>HoldUrl</code> attribute value is an URL (that you host, example : <code>http:&#47;&#47;youdomain&#47;onhold</code>) that returns the <code>Twiml</code> snippet I provided you."}, {"owner": {"reputation": 763, "user_id": 3746396, "user_type": "registered", "accept_rate": 66, "profile_image": "https://graph.facebook.com/1486200055/picture?type=large", "display_name": "FutoRicky", "link": "https://stackoverflow.com/users/3746396/futoricky"}, "edited": false, "score": 0, "creation_date": 1470238265, "post_id": 38743994, "comment_id": 64869548, "body": "Yup, that was it. Thanks for your help!"}], "tags": [], "owner": {"reputation": 6300, "user_id": 3165879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zFfDv.jpg?s=128&g=1", "display_name": "php-dev", "link": "https://stackoverflow.com/users/3165879/php-dev"}, "is_accepted": true, "score": 3, "last_activity_date": 1470228440, "last_edit_date": 1470228440, "creation_date": 1470228082, "answer_id": 38743994, "question_id": 38743427, "link": "https://stackoverflow.com/questions/38743427/twilio-say-when-putting-conference-on-hold/38743994#38743994", "title": "Twilio Say when putting conference on hold", "body": "<p>I'm not a Ruby developer but I'm a <a href=\"/questions/tagged/twilio\" class=\"post-tag\" title=\"show questions tagged &#39;twilio&#39;\" rel=\"tag\">twilio</a> expert.</p>\n\n<p>Besides the <code>Hold</code> attribute, you should update the <code>HoldUrl</code> attribute to</p>\n\n<ul>\n<li><strong>Say</strong> that the call is being put on hold</li>\n<li><strong>Redirect</strong> to the default Twilio Hold Music (or create your own file)</li>\n</ul>\n\n<p>The <code>HoldUrl</code> twiml will look like the following.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;Response&gt;\n    &lt;Say&gt;This call has been put on hold&lt;/Say&gt;\n    &lt;Redirect&gt;http://twimlets.com/holdmusic?Bucket=com.twilio.music.classical&lt;/Redirect&gt;\n&lt;/Response&gt;\n</code></pre>\n\n<p>Reference : <a href=\"https://www.twilio.com/docs/api/rest/participant#optional-parameters\" rel=\"nofollow\">Twilio documentation</a></p>\n\n<blockquote>\n  <p>The 'HoldUrl' attribute lets you specify a URL for music that plays\n  when a participant is held. The URL may be an MP3, a WAV or a TwiML\n  document that uses <strong>Play</strong>, <strong>Say</strong> or <strong>Redirect</strong>.</p>\n</blockquote>\n"}], "owner": {"reputation": 763, "user_id": 3746396, "user_type": "registered", "accept_rate": 66, "profile_image": "https://graph.facebook.com/1486200055/picture?type=large", "display_name": "FutoRicky", "link": "https://stackoverflow.com/users/3746396/futoricky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 38743994, "answer_count": 1, "score": 0, "last_activity_date": 1470228440, "creation_date": 1470226618, "question_id": 38743427, "link": "https://stackoverflow.com/questions/38743427/twilio-say-when-putting-conference-on-hold", "title": "Twilio Say when putting conference on hold", "body": "<p>I am able to put the conference call on hold, but I would like Twilio to say something like 'This call has been put on hold' to all participants before the music starts playing.</p>\n\n<p>I've been trying to do something like this, but it's not working:</p>\n\n<pre><code>response = Twilio::TwiML::Response.new do |r|\n\n  # Loop over participants and print out a property for each one\n  @client.account.conferences.get(@conference_sid).participants.list.each do |participant|\n    participant.update(:hold =&gt; false) if !params[:hold]\n    if params[:hold]\n      participant.update(:hold =&gt; true)\n      r.Say 'This call has been put on hold.'\n    end\n  end\nend\n</code></pre>\n\n<p>Anyone know how to achieve this? Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1983, "user_id": 663870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71e7c28bfa44919786a5874586edee4d?s=128&d=identicon&r=PG", "display_name": "emrahbasman", "link": "https://stackoverflow.com/users/663870/emrahbasman"}, "edited": false, "score": 2, "creation_date": 1470226969, "post_id": 38743413, "comment_id": 64860693, "body": "You can use scopes for all your where conditions. <a href=\"http://guides.rubyonrails.org/active_record_querying.html#scopes\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/active_record_querying.html#scopes</a>"}, {"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1470229312, "post_id": 38743413, "comment_id": 64862584, "body": "<code>now - 10.minutes</code> = <code>10.minutes.ago</code>"}], "owner": {"reputation": 33, "user_id": 5760131, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f5d21dce2a25d04acf34ddc00fd3a15b?s=128&d=identicon&r=PG&f=1", "display_name": "katarina", "link": "https://stackoverflow.com/users/5760131/katarina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470226562, "creation_date": 1470226562, "question_id": 38743413, "link": "https://stackoverflow.com/questions/38743413/spaghetti-code-how-to-fix-my-db-calls", "title": "spaghetti code - how to fix my db calls", "body": "<p>My db calls are like this:</p>\n\n<pre><code>orders_pending_acceptance = Order.joins(:notifications).includes(:timestamps)\n    .where(shopper_status: 'shopper_pending_acceptance')\n    .where(\"notifications.created_at &gt; ?\", now - 10.minutes)\n    .select { |order| order.time_calculator\n      .latest_shopper_assignment_time &lt; order.timestamps\n      .where(name: 'shopper_pending_acceptance').value }\n</code></pre>\n\n<p>and it looks ugly, not speaking about hound issues. How to fix it? Could you please suggest different approach?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "ruby-on-rails-4", "mysql2"], "answers": [{"comments": [{"owner": {"reputation": 207, "user_id": 2039486, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/0433b8361c39089e68aea3753d90a8ae?s=128&d=identicon&r=PG", "display_name": "joe", "link": "https://stackoverflow.com/users/2039486/joe"}, "edited": false, "score": 0, "creation_date": 1470225988, "post_id": 38743097, "comment_id": 64859927, "body": "Yes I tried adding \\\\ slashes but both are eliminated."}], "tags": [], "owner": {"reputation": 10274, "user_id": 930207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oy7Q3.png?s=128&g=1", "display_name": "mcfinnigan", "link": "https://stackoverflow.com/users/930207/mcfinnigan"}, "is_accepted": false, "score": 1, "last_activity_date": 1470225758, "creation_date": 1470225758, "answer_id": 38743097, "question_id": 38742993, "link": "https://stackoverflow.com/questions/38742993/ruby-mysql2-client-not-taking-backslash-while-insert/38743097#38743097", "title": "Ruby Mysql2 Client not taking backslash while insert", "body": "<p>\\ is likely being removed by the MySQL2 client as part of a SQL injection protection preprocessor.</p>\n\n<p>Have you looked at trying either a double backslash or using the <a href=\"http://www.rubydoc.info/github/brianmario/mysql2/Mysql2/Client#escape-class_method\" rel=\"nofollow\">escape</a> method to properly escape the string?</p>\n"}, {"comments": [{"owner": {"reputation": 207, "user_id": 2039486, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/0433b8361c39089e68aea3753d90a8ae?s=128&d=identicon&r=PG", "display_name": "joe", "link": "https://stackoverflow.com/users/2039486/joe"}, "edited": false, "score": 0, "creation_date": 1470293079, "post_id": 38746431, "comment_id": 64892432, "body": "Its saving in mysql like this :    %#{myname}       %#{.myregex.}      %#{ns}"}], "tags": [], "owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "is_accepted": false, "score": 0, "last_activity_date": 1470300157, "last_edit_date": 1470300157, "creation_date": 1470234423, "answer_id": 38746431, "question_id": 38742993, "link": "https://stackoverflow.com/questions/38742993/ruby-mysql2-client-not-taking-backslash-while-insert/38746431#38746431", "title": "Ruby Mysql2 Client not taking backslash while insert", "body": "<p><strong>Try using this</strong></p>\n\n<pre><code>@person_result = client.query('INSERT INTO user_types(user_name, regex, code) Values (myname , \"\\.\"+myregx+\".\\\" , ns )')\n</code></pre>\n"}], "owner": {"reputation": 207, "user_id": 2039486, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/0433b8361c39089e68aea3753d90a8ae?s=128&d=identicon&r=PG", "display_name": "joe", "link": "https://stackoverflow.com/users/2039486/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1470300157, "creation_date": 1470225493, "question_id": 38742993, "link": "https://stackoverflow.com/questions/38742993/ruby-mysql2-client-not-taking-backslash-while-insert", "title": "Ruby Mysql2 Client not taking backslash while insert", "body": "<p>We are using production and staging databases in our application.\nOur requirement is to insert all the records to staging database when ever a record is added in production database, so that both the servers are consistent and same data. </p>\n\n<p>I have used Mysql2 client pool to connect to staging server and insert the record that is added to production.\n here is my code:</p>\n\n<pre><code>def create   \n    @aperson = Person.new\n    @person = @aperson.save\n    if @person &amp;&amp; Rails.env == \"production\"\n      #add_new_person_to_staging\n\n      client = Mysql2::Client.new(:host =&gt; dbconfig[:host], :username =&gt; dbconfig[:username], :password =&gt; dbconfig[:password], :database =&gt; dbconfig[:database])        \n      @person_result = client.query('INSERT INTO user_types(user_name,    regex, code) Values (\"myname\" , \"\\.myregex\\.\" , \"ns\" );')\n    end\nend\n</code></pre>\n\n<p>Here \"<code>@person_result</code>\" record is inserted to mysql table but the \"<code>regex</code>\" column eliminates \"\\\" slashes. </p>\n\n<p>like :  <code>user_name = myname, regex = .myregex., code = ns</code></p>\n\n<p>when I manually execute the \"Insert\" query in mysql command line it inserts as it is along with \\ slash. but not through \"client.query\" \nWhy does <code>\\ slash</code> is eliminated. please help me here. </p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "multithreading", "postgresql", "puma"], "comments": [{"owner": {"reputation": 1983, "user_id": 663870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71e7c28bfa44919786a5874586edee4d?s=128&d=identicon&r=PG", "display_name": "emrahbasman", "link": "https://stackoverflow.com/users/663870/emrahbasman"}, "edited": false, "score": 0, "creation_date": 1470229257, "post_id": 38742773, "comment_id": 64862543, "body": "What does explain say? <a href=\"http://guides.rubyonrails.org/active_record_querying.html#running-explain\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a> Also can we see your migration?"}, {"owner": {"reputation": 531, "user_id": 1106611, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e1076b7f86f1cad1f49253584da2ce97?s=128&d=identicon&r=PG", "display_name": "Ruben Homs", "link": "https://stackoverflow.com/users/1106611/ruben-homs"}, "reply_to_user": {"reputation": 1983, "user_id": 663870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71e7c28bfa44919786a5874586edee4d?s=128&d=identicon&r=PG", "display_name": "emrahbasman", "link": "https://stackoverflow.com/users/663870/emrahbasman"}, "edited": false, "score": 0, "creation_date": 1470230301, "post_id": 38742773, "comment_id": 64863359, "body": "What migration are you talking about? I&#39;ll work on updating the question with an explain query."}, {"owner": {"reputation": 1983, "user_id": 663870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71e7c28bfa44919786a5874586edee4d?s=128&d=identicon&r=PG", "display_name": "emrahbasman", "link": "https://stackoverflow.com/users/663870/emrahbasman"}, "edited": false, "score": 0, "creation_date": 1470230755, "post_id": 38742773, "comment_id": 64863696, "body": "Schema of your addresses table."}, {"owner": {"reputation": 531, "user_id": 1106611, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e1076b7f86f1cad1f49253584da2ce97?s=128&d=identicon&r=PG", "display_name": "Ruben Homs", "link": "https://stackoverflow.com/users/1106611/ruben-homs"}, "reply_to_user": {"reputation": 1983, "user_id": 663870, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71e7c28bfa44919786a5874586edee4d?s=128&d=identicon&r=PG", "display_name": "emrahbasman", "link": "https://stackoverflow.com/users/663870/emrahbasman"}, "edited": false, "score": 0, "creation_date": 1470295728, "post_id": 38742773, "comment_id": 64893967, "body": "I added the explain query and the schema of the addresses table."}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1470401020, "post_id": 38742773, "comment_id": 64949207, "body": "That does sound like blocking to obtain a new database connection - timeout for that is 5s. Any messages in the logs that seem relevant?"}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1470401627, "post_id": 38742773, "comment_id": 64949612, "body": "What&#39;s max_connections set to in your Postgres configuration?"}, {"owner": {"reputation": 531, "user_id": 1106611, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e1076b7f86f1cad1f49253584da2ce97?s=128&d=identicon&r=PG", "display_name": "Ruben Homs", "link": "https://stackoverflow.com/users/1106611/ruben-homs"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1470401762, "post_id": 38742773, "comment_id": 64949698, "body": "@FrederickCheung I have looked into that possibility by upping the timeout to see if that was the case but it wasn&#39;t. The logs don&#39;t show any signs of timeout in obtaining connections."}, {"owner": {"reputation": 531, "user_id": 1106611, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e1076b7f86f1cad1f49253584da2ce97?s=128&d=identicon&r=PG", "display_name": "Ruben Homs", "link": "https://stackoverflow.com/users/1106611/ruben-homs"}, "reply_to_user": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1470401853, "post_id": 38742773, "comment_id": 64949772, "body": "@mwp haven&#39;t touched it, so it&#39;s set to the default of 100 connections."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 1, "creation_date": 1470401958, "post_id": 38742773, "comment_id": 64949849, "body": "@RubenHoms It&#39;s determined dynamically at startup so it may be worth doing a quick <code>show max_connections;</code> just to make sure it&#39;s actually 100."}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1470401985, "post_id": 38742773, "comment_id": 64949866, "body": "If decreasing the rails connection pool size makes the issue happen more often, then I&#39;d be inclined to think that was the issue. Increasing it might make the issue happen less often (I assume that it what you mean by thread pool) but won&#39;t make it go away completely if you are leaking connections."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1470402269, "post_id": 38742773, "comment_id": 64950061, "body": "@RubenHoms Another thought occurs, are you using preload_app! in your Puma config? If so, it may be worth sharing your Puma config with us so we can take a look at your on_worker_boot and before_fork handlers."}, {"owner": {"reputation": 531, "user_id": 1106611, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e1076b7f86f1cad1f49253584da2ce97?s=128&d=identicon&r=PG", "display_name": "Ruben Homs", "link": "https://stackoverflow.com/users/1106611/ruben-homs"}, "reply_to_user": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1470402616, "post_id": 38742773, "comment_id": 64950309, "body": "@mwp Ran the query, it returns 100 as well. Yes, I am using preload_app! I added the puma config to the question so you can see for yourself."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 2, "creation_date": 1470402944, "post_id": 38742773, "comment_id": 64950542, "body": "@RubenHoms Well, this is certainly a puzzler. Is it possible some other process is occasionally locking the table? <a href=\"https://wiki.postgresql.org/wiki/Lock_Monitoring\" rel=\"nofollow noreferrer\">wiki.postgresql.org/wiki/Lock_Monitoring</a> If I were troubleshooting this I would probably take a look at the middleware stack next. If you can spare the memory, maybe disable preload_app! (and your handlers) and see if the problem goes away. I also might update to Ruby 2.2.4, Puma 3.6.0, and Rails 4.2.7 just to rule out the possibility that this is an already-fixed bug."}, {"owner": {"reputation": 531, "user_id": 1106611, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e1076b7f86f1cad1f49253584da2ce97?s=128&d=identicon&r=PG", "display_name": "Ruben Homs", "link": "https://stackoverflow.com/users/1106611/ruben-homs"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1470403010, "post_id": 38742773, "comment_id": 64950593, "body": "@FrederickCheung I&#39;m running <a href=\"https://devcenter.heroku.com/articles/concurrency-and-database-connections#number-of-active-connections\" rel=\"nofollow noreferrer\">a query</a> to check the amount of open connections and with big loads it doesn&#39;t increase over ~30 with the threadpool being set to a max of 60 connections."}, {"owner": {"reputation": 531, "user_id": 1106611, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e1076b7f86f1cad1f49253584da2ce97?s=128&d=identicon&r=PG", "display_name": "Ruben Homs", "link": "https://stackoverflow.com/users/1106611/ruben-homs"}, "reply_to_user": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1470408210, "post_id": 38742773, "comment_id": 64954131, "body": "@mwp Ran some tests to see if it was a lock occuring but couldn&#39;t find anything related to that. I&#39;ve added a <a href=\"http://i.imgur.com/HjLgKXE.png\" rel=\"nofollow noreferrer\">screenshot</a> of <a href=\"http://ptop.projects.pgfoundry.org/\" rel=\"nofollow noreferrer\">pg_top</a> running while the system is running a under heavy load. Only weird thing I&#39;m noticing is that one of the processes (the only one with CMD &quot;postgres: postgres postgres [local] idle&quot; is the only one sometimes switching to the &#39;run&#39; state. The other processes seem to stay in the &#39;sleep&#39; state. Not sure what to make of that."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1470465862, "post_id": 38742773, "comment_id": 64972241, "body": "How many rows are there in the table? Did you consider adding an index to that table? How often do you write to that table?"}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "edited": false, "score": 0, "creation_date": 1470558299, "post_id": 38742773, "comment_id": 64992121, "body": "@RubenHoms Maybe your hitting the Rails connection pool bug. <a href=\"https://devcenter.heroku.com/articles/concurrency-and-database-connections#bad-connections\" rel=\"nofollow noreferrer\">described here</a>"}, {"owner": {"reputation": 125670, "user_id": 6464308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12PVX.jpg?s=128&g=1", "display_name": "Laurenz Albe", "link": "https://stackoverflow.com/users/6464308/laurenz-albe"}, "edited": false, "score": 4, "creation_date": 1470641993, "post_id": 38742773, "comment_id": 65013479, "body": "I recommend that you rule out the database as cause, by setting <code>log_min_duration_statement = 3000</code> and reading through the log file to see if there were statements that took more than 3 seconds. Or use <a href=\"http://dalibo.github.io/pgbadger/\" rel=\"nofollow noreferrer\">pgBadger</a> to do it for you."}, {"owner": {"reputation": 531, "user_id": 1106611, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e1076b7f86f1cad1f49253584da2ce97?s=128&d=identicon&r=PG", "display_name": "Ruben Homs", "link": "https://stackoverflow.com/users/1106611/ruben-homs"}, "reply_to_user": {"reputation": 125670, "user_id": 6464308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12PVX.jpg?s=128&g=1", "display_name": "Laurenz Albe", "link": "https://stackoverflow.com/users/6464308/laurenz-albe"}, "edited": false, "score": 0, "creation_date": 1470820699, "post_id": 38742773, "comment_id": 65100542, "body": "@LaurenzAlbe Great idea! I ruled out that the query is actually taking that long since it does not appear in the logs."}, {"owner": {"reputation": 692, "user_id": 4256719, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ESoCR.jpg?s=128&g=1", "display_name": "Jagdish", "link": "https://stackoverflow.com/users/4256719/jagdish"}, "edited": false, "score": 0, "creation_date": 1474670561, "post_id": 38742773, "comment_id": 66642622, "body": "could you change your criteria sequence. Put first addreesable_id and addreesable_type and then deleted_at condition. Try to use rails-footnotes and bullet gem to show where is issue in query."}], "answers": [{"tags": [], "owner": {"reputation": 2054, "user_id": 2565593, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b483dea19c00b3d952f4958d67ea4bd1?s=128&d=identicon&r=PG", "display_name": "Steve Midgley", "link": "https://stackoverflow.com/users/2565593/steve-midgley"}, "is_accepted": false, "score": 1, "last_activity_date": 1476748140, "creation_date": 1476748140, "answer_id": 40097379, "question_id": 38742773, "link": "https://stackoverflow.com/questions/38742773/rails-query-execution-causes-database-spikes/40097379#40097379", "title": "Rails query execution causes database spikes", "body": "<p>I would suggest a couple of things - two possible solutions, one testing/reproduction approach, and one suggestion for deeper metrics.</p>\n\n<p>1) Possible quick solution: Spin-off that 1 minute job so it is non-blocking. See if the problem resolves from that. Try using Redis+Sidekiq which is pretty simple to get up and running (or something similar).</p>\n\n<p>2) Second possible solution: Look for any full table locks or exclusive row locks being made to Postgres - see if you EVER make full table locks, and if so, find the offending statement and eliminate it. </p>\n\n<p>3) Testing/replication: For testing, see if you can replicate this problem outside of production. I'd recommend jmeter as a very useful tool to simulate a lot of requests and requests of different types, and see if you can repro this in a controlled/staging context. Consistent replication is the key to resolving issues like this. Refer to your production server logs around the time that the issue occurs to generate your jmeter test requests that will hopefully help reproduce the issue.</p>\n\n<p>If you can figure out a way to replicate it, then you can start tuning the simulation to see if removing or increasing/decreasing various requests eliminates the problem or changes the problem in some way..</p>\n\n<p>4) Analytics: Install NewRelic or similar analytics gem to get a deeper insight into what's going on when that request comes in. You really want to get a solid picture as to whether the request is truly blocked in Postgres (by an exclusive row/table lock that is blocking your query) or whether you are backed up by a slow running query in the Puma execution queue, or somewhere inside Ruby there's an unfortunate wait state somehow.</p>\n\n<p>You don't yet have enough information to solve this issue, so you really want to start exploring solutions by collecting data, alongside hypotheses of what's happening.</p>\n\n<p>My general strategy for this kind of problem is (in this order): </p>\n\n<ul>\n<li>Try some quick/easy/safe fixes (in the blind) and see if anything is resolved/changed. </li>\n<li>Try to replicate in a non-production environment (really, really try to make this work). </li>\n<li>Instrument the system to collect data to see what you can learn about the problem and anything related.</li>\n</ul>\n"}], "owner": {"reputation": 531, "user_id": 1106611, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/e1076b7f86f1cad1f49253584da2ce97?s=128&d=identicon&r=PG", "display_name": "Ruben Homs", "link": "https://stackoverflow.com/users/1106611/ruben-homs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 545, "favorite_count": 3, "answer_count": 1, "score": 10, "last_activity_date": 1476748140, "creation_date": 1470224986, "last_edit_date": 1470402530, "question_id": 38742773, "link": "https://stackoverflow.com/questions/38742773/rails-query-execution-causes-database-spikes", "title": "Rails query execution causes database spikes", "body": "<p>I'm having a problem with my Rails application where some random queries take around 5 seconds or longer to finish. Most of the time the queries are very simple (<code>select * from x where id = ?</code>) and the fields are even indexed too.</p>\n\n<p>Here's some more information about the setup:</p>\n\n<ul>\n<li>Puma 3.5.0 behind a reversed nginx proxy\n\n<ul>\n<li>4 workers with minimum 4, max 8 threads each.</li>\n</ul></li>\n<li>Ruby v2.2.3, Rails v4.2.4</li>\n<li>PostgreSQL 9.4 database\n\n<ul>\n<li>Thread pool set to max 60 connections</li>\n</ul></li>\n<li>Appsignal for monitoring</li>\n<li>8GB RAM, 4 CPU's, SSD.</li>\n</ul>\n\n<p>I found this out when looking at the query performance in Appsignal. I noticed most queries finishing in a few ms and then every now and then, still in the same request, there are multiple queries that take 5+ seconds to finish. And the odd part is that it ALWAYS takes 5,.. seconds.\nHere's a picture of that in action:\n<a href=\"https://i.stack.imgur.com/gAuqU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gAuqU.png\" alt=\"Appsignal performance\"></a></p>\n\n<p>Things I've tried:</p>\n\n<ul>\n<li>Increase the thread pool to make sure the puma worker threads have enough connection objects.</li>\n<li>Set 'reaping_frequency' to 10s to make sure there are no dead connections being used.</li>\n<li>Increase puma workers/threads</li>\n</ul>\n\n<p>I'm noticing this in the application as there are some pages that take a long time to load (I have a function call that takes about 1 minute to finish) and somehow this is blocking new requests. This is strange to me as there are 4 workers each with 8 threads = 32 threads that can handle the other requests. </p>\n\n<p>I ran an explain on the query in the picture above, this is the output:</p>\n\n<pre><code>Limit  (cost=0.28..8.30 rows=1 width=150)\n  -&gt;  Index Scan using index_addresses_on_addressable_id_and_addressable_type on addresses  (cost=0.28..8.30 rows=1 width=150)\n        Index Cond: ((addressable_id = 1) AND ((addressable_type)::text = 'University'::text))\n        Filter: (deleted_at IS NULL)\nTotal query runtime: 13 ms\n</code></pre>\n\n<p>And this is the schema of the addresses table:</p>\n\n<pre><code># Table name: addresses\n#\n#  id               :integer          not null, primary key\n#  street           :string\n#  zip_code         :string\n#  city             :string\n#  country          :string\n#  addressable_id   :integer\n#  addressable_type :string\n#  created_at       :datetime         not null\n#  updated_at       :datetime         not null\n#  street_number    :string\n#  latitude         :float\n#  longitude        :float\n#  mobile           :string\n#  phone            :string\n#  email            :string\n#  deleted_at       :datetime\n#  name             :string`\n</code></pre>\n\n<p>Here's my Puma config file:</p>\n\n<pre><code>#!/usr/bin/env puma\n\ndirectory '/home/deployer/apps/qeystate/current'\nrackup \"/home/deployer/apps/qeystate/current/config.ru\"\nenvironment 'staging'   \npidfile \"/home/deployer/apps/qeystate/shared/tmp/pids/puma.pid\"\nstate_path \"/home/deployer/apps/qeystate/shared/tmp/pids/puma.state\"\nstdout_redirect '/home/deployer/apps/qeystate/shared/log/puma_access.log', '/home/deployer/apps/qeystate/shared/log/puma_error.log', true\nthreads 4,8\nbind 'unix:///home/deployer/apps/qeystate/shared/tmp/sockets/puma.sock'\nworkers 4\npreload_app!\nprune_bundler\n\non_worker_boot do\n  ActiveSupport.on_load(:active_record) do\n    ActiveRecord::Base.establish_connection\n  end\nend\n\nbefore_fork do\n  ActiveRecord::Base.connection_pool.disconnect!\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 395, "user_id": 2646716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100002366454382/picture?type=large", "display_name": "Hari Prakash", "link": "https://stackoverflow.com/users/2646716/hari-prakash"}, "edited": false, "score": 0, "creation_date": 1470224690, "post_id": 38742601, "comment_id": 64858994, "body": "I did.now getting error like undefined method `each&#39; for #&lt;GoodsAddress:0x0000000440bab0&gt;"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 395, "user_id": 2646716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100002366454382/picture?type=large", "display_name": "Hari Prakash", "link": "https://stackoverflow.com/users/2646716/hari-prakash"}, "edited": false, "score": 0, "creation_date": 1470224746, "post_id": 38742601, "comment_id": 64859033, "body": "@HariPrakash: can you update your associations in your question?"}, {"owner": {"reputation": 395, "user_id": 2646716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100002366454382/picture?type=large", "display_name": "Hari Prakash", "link": "https://stackoverflow.com/users/2646716/hari-prakash"}, "edited": false, "score": 0, "creation_date": 1470225101, "post_id": 38742601, "comment_id": 64859293, "body": "class CustomerDetail &lt; ActiveRecord::Base   has_one :goods_address"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 395, "user_id": 2646716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100002366454382/picture?type=large", "display_name": "Hari Prakash", "link": "https://stackoverflow.com/users/2646716/hari-prakash"}, "edited": false, "score": 0, "creation_date": 1470225242, "post_id": 38742601, "comment_id": 64859398, "body": "@HariPrakash: then you don&#39;t need to use <code>each</code> due to <code>has_one</code> relation, it will return you single object only"}, {"owner": {"reputation": 395, "user_id": 2646716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100002366454382/picture?type=large", "display_name": "Hari Prakash", "link": "https://stackoverflow.com/users/2646716/hari-prakash"}, "edited": false, "score": 0, "creation_date": 1470226989, "post_id": 38742601, "comment_id": 64860701, "body": "got it.Thank u very much"}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": true, "score": 0, "last_activity_date": 1470225332, "last_edit_date": 1470225332, "creation_date": 1470224518, "answer_id": 38742601, "question_id": 38742505, "link": "https://stackoverflow.com/questions/38742505/rails-cannot-nest-nested-form-with-parent-form-in-index-page/38742601#38742601", "title": "rails Cannot nest nested form with parent form in index page", "body": "<p>may be some of customer does not have <code>goods_address</code> so <code>each</code> can not performed on <code>nil</code> obect</p>\n\n<p>Try:</p>\n\n<pre><code>%tbody\n  - @customer_details.each do |customer|\n    %tr\n      %td= customer.customer_name\n      %td= customer.customer_id\n      %td= customer.address\n      %td= customer.state\n      %td= customer.email\n        - if customer.goods_address.present?\n          %td= customer.goods_address.delivery_address\n          %td= customer.goods_address.name\n          %td= customer.goods_address.address\n          %td= customer.goods_address.state\n</code></pre>\n"}], "owner": {"reputation": 395, "user_id": 2646716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100002366454382/picture?type=large", "display_name": "Hari Prakash", "link": "https://stackoverflow.com/users/2646716/hari-prakash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 38742601, "answer_count": 1, "score": 1, "last_activity_date": 1470225332, "creation_date": 1470224304, "question_id": 38742505, "link": "https://stackoverflow.com/questions/38742505/rails-cannot-nest-nested-form-with-parent-form-in-index-page", "title": "rails Cannot nest nested form with parent form in index page", "body": "<p><strong>index.html.haml</strong></p>\n\n<p>I have to display customer detail list in index page.I want the nested form 'goods address' fields also to be listed in index page</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>%tbody\r\n        - @customer_details.each do |customer|\r\n          %tr\r\n            %td= customer.customer_name\r\n            %td= customer.customer_id\r\n            %td= customer.address\r\n            %td= customer.state\r\n            %td= customer.email\r\n              - customer.goods_address.each do |goods_address|\r\n                %td= goods_address.delivery_address\r\n                %td= goods_address.name\r\n                %td= goods_address.address\r\n                %td= goods_address.state</code></pre>\r\n</div>\r\n</div>\r\n\nThe problem is im getting undefined method 'each' for goods address. I dont know how to solve this. can someone help me.Thanks in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "ruby-on-rails-5", "sidekiq-monitor"], "comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1470226569, "post_id": 38742116, "comment_id": 64860365, "body": "I would search through these gems github repositories. Rails 5.0 and ruby 2.3 are very recent, they may not be fully compatible with the gems."}, {"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1470226897, "post_id": 38742116, "comment_id": 64860630, "body": "If an urgent fix is needed you can remove devise and roll your own auth with bcrypt since that seems to be working fine for 5.0."}], "answers": [{"tags": [], "owner": {"reputation": 15010, "user_id": 567863, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/abda861707b1e78e0fce47ced55f84ee?s=128&d=identicon&r=PG", "display_name": "Paul Fioravanti", "link": "https://stackoverflow.com/users/567863/paul-fioravanti"}, "is_accepted": true, "score": 5, "last_activity_date": 1470310866, "creation_date": 1470310866, "answer_id": 38766355, "question_id": 38742116, "link": "https://stackoverflow.com/questions/38742116/rails-devise-and-sidekiq-routes/38766355#38766355", "title": "Rails - devise and sidekiq routes", "body": "<p>Try wrapping your mounting of Sidekiq under <code>devise_scope</code>, in the same way you're using its alias \"<code>as</code>\" in your <code>devise_for</code> route:</p>\n\n<pre><code># Only allow authenticated users to get access\n# to the Sidekiq web interface\ndevise_scope :user do\n  authenticated :user do\n    mount Sidekiq::Web =&gt; '/sidekiq'\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 106, "user_id": 7987618, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pxqZ6.jpg?s=128&g=1", "display_name": "ethaning", "link": "https://stackoverflow.com/users/7987618/ethaning"}, "is_accepted": false, "score": 1, "last_activity_date": 1614697589, "creation_date": 1614697589, "answer_id": 66441906, "question_id": 38742116, "link": "https://stackoverflow.com/questions/38742116/rails-devise-and-sidekiq-routes/66441906#66441906", "title": "Rails - devise and sidekiq routes", "body": "<p>Here's a snippet for that allows for custom authentication on the Sidekiq routes.</p>\n<pre><code>authenticate :user, -&gt;(user) { user.admin? || Other auth related checks... } do\n  mount Sidekiq::Web =&gt; &quot;/sidekiq&quot;\nend\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 6668612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3c4e8bbfcaabf54f4ffb59b0a541cb4?s=128&d=identicon&r=PG&f=1", "display_name": "Nikhil M", "link": "https://stackoverflow.com/users/6668612/nikhil-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1702, "favorite_count": 0, "accepted_answer_id": 38766355, "answer_count": 2, "score": 8, "last_activity_date": 1614697589, "creation_date": 1470223226, "last_edit_date": 1470224421, "question_id": 38742116, "link": "https://stackoverflow.com/questions/38742116/rails-devise-and-sidekiq-routes", "title": "Rails - devise and sidekiq routes", "body": "<p>I am running a Rails 5.0.0 app with Ruby 2.3.1</p>\n\n<p>Sidekiq is being used for background jobs and devise for authentication.</p>\n\n<p>Sidekiq monitoring and devise are mounted in routes as follows:</p>\n\n<pre><code>devise_for :users, skip: [:sessions]\n    as :user do\n        get    'login' =&gt; 'devise/sessions#new',      :as =&gt; :new_user_session\n        post   'login' =&gt; 'devise/sessions#create',   :as =&gt; :user_session\n        delete 'logout' =&gt; 'devise/sessions#destroy', :as =&gt; :destroy_user_session\n    end\n\nrequire 'sidekiq/web'\n    require 'sidekiq/cron/web'\n    #Sidekiq::Web.set :session_secret, Rails.application.secrets[:secret_key_base]\n    authenticate :user do\n        mount Sidekiq::Web =&gt; '/sidekiq'\n    end\n</code></pre>\n\n<p>But, accessing the sidekiq status page logs out the user.</p>\n\n<p>The same code used to work fine with Rails 4.2.5</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1049, "user_id": 3251199, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bf61d317161fc12eb6c9b74c546be321?s=128&d=identicon&r=PG&f=1", "display_name": "nicholas79171", "link": "https://stackoverflow.com/users/3251199/nicholas79171"}, "edited": false, "score": 0, "creation_date": 1470223334, "post_id": 38742075, "comment_id": 64858024, "body": "How are you storing the current user&#39;s information? I&#39;m guessing you&#39;re storing some kind of information in their session like their user id?"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 3280663, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/100000083875543/picture?type=large", "display_name": "Blogger11", "link": "https://stackoverflow.com/users/3280663/blogger11"}, "edited": false, "score": 0, "creation_date": 1470223506, "post_id": 38742113, "comment_id": 64858137, "body": "This worked! Thanks man I couldn&#39;t figure out that syntex for the life of me haha"}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 1, "last_activity_date": 1470223224, "creation_date": 1470223224, "answer_id": 38742113, "question_id": 38742075, "link": "https://stackoverflow.com/questions/38742075/route-to-current-user-edit-in-a-view/38742113#38742113", "title": "Route to Current User Edit in a view", "body": "<p>As simple as:</p>\n\n<pre><code>link_to 'Edit profile', [:edit, current_user]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1905, "user_id": 232838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8342950f34a66d9ec7cfe10b33d5494c?s=128&d=identicon&r=PG", "display_name": "koffeinfrei", "link": "https://stackoverflow.com/users/232838/koffeinfrei"}, "is_accepted": false, "score": 2, "last_activity_date": 1470228328, "last_edit_date": 1470228328, "creation_date": 1470223738, "answer_id": 38742303, "question_id": 38742075, "link": "https://stackoverflow.com/questions/38742075/route-to-current-user-edit-in-a-view/38742303#38742303", "title": "Route to Current User Edit in a view", "body": "<p>You can either use the brackets notation</p>\n\n<pre><code>link_to 'Edit profile', [:edit, current_user]\n</code></pre>\n\n<p>or the <a href=\"http://guides.rubyonrails.org/routing.html#path-and-url-helpers\" rel=\"nofollow\">named routes helpers</a>, which you get by invoking <code>rake routes</code></p>\n\n<pre><code>link_to 'Edit profile', edit_user_path(current_user)\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 3280663, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/100000083875543/picture?type=large", "display_name": "Blogger11", "link": "https://stackoverflow.com/users/3280663/blogger11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 38742113, "answer_count": 2, "score": 0, "last_activity_date": 1475353398, "creation_date": 1470223106, "last_edit_date": 1475353398, "question_id": 38742075, "link": "https://stackoverflow.com/questions/38742075/route-to-current-user-edit-in-a-view", "title": "Route to Current User Edit in a view", "body": "<p>What is the syntax I need to use in order to route to edit the current user's profile? I want to put a link on my page that takes you to edit your user profile. I know how to link_to but not sure what what the syntax is to get to the current user.</p>\n\n<pre><code>&lt;%= link_to \"Edit Profile\", current_user %&gt; \n</code></pre>\n\n<p>My <code>UsersController</code> looks like this:</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  before_action :logged_in_user, only: [:index, :edit, :update, :destroy]\n  before_action :correct_user,   only: [:edit, :update]\n  before_action :admin_user,     only: :destroy\n\n\n  def index\n    @users = User.paginate(page: params[:page])\n  end\n\n  def new\n    @user = User.new\n  end\n\n  def create\n    @user = User.new(user_params)\n\n    if @user.save\n        flash[:notice] = \"Welcome to Studio Academy Manager\"\n      sign_in @user\n        redirect_to root_url\n    else\n        render 'new'\n    end\n  end\n\n  def show\n    @user = User.find(params[:id])\n  end\n\n  def edit\n    @user = User.find(params[:id])\n  end\n\n  def update\n    @user = User.find(params[:id])\n    if @user.update_attributes(user_params)\n      flash[:success] = \"Profile updated\"\n      redirect_to @user\n    else\n      render 'edit'\n    end\n  end\n\n  def destroy\n    User.find(params[:id]).destroy\n    flash[:success] = \"User deleted\"\n    redirect_to users_url\n  end\n\nprivate\n  def user_params\n    params.require(:user).permit(:email, :username, :password, :password_confirmation, :first_name, :last_name, :phone, :street_1, :street_2, :city, :state, :zip, :enabled, :admin)\n  end\n\n  def logged_in_user\n  unless current_user.present?\n      store_location\n      flash[:danger] = \"Please log in.\"\n      redirect_to login_url\n    end\n  end\n\n  def correct_user\n    @user = User.find(params[:id])\n    redirect_to(root_url) unless @user == current_user\n  end\n\n  def admin_user\n    redirect_to(root_url) unless current_user.admin?\n  end\nend\n</code></pre>\n\n<p>And In my routes file I have:</p>\n\n<pre><code>  resources :users\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf-generation", "prawn"], "comments": [{"owner": {"reputation": 1195, "user_id": 1201917, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2bfbfc7322e119a59b09eefd2775e05e?s=128&d=identicon&r=PG", "display_name": "user1201917", "link": "https://stackoverflow.com/users/1201917/user1201917"}, "edited": false, "score": 1, "creation_date": 1470240954, "post_id": 38741994, "comment_id": 64871416, "body": "Imo, it is simpler to create HTML with styles and convert it to PDF with wkhtmltopdf. <a href=\"https://github.com/mileszs/wicked_pdf\" rel=\"nofollow noreferrer\">wicked_pdf</a>. Sorry if changing the gem is not suitable for you."}, {"owner": {"reputation": 800, "user_id": 3290423, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cf08b4a89aa05d600469502f103c187a?s=128&d=identicon&r=PG&f=1", "display_name": "rico_mac", "link": "https://stackoverflow.com/users/3290423/rico-mac"}, "reply_to_user": {"reputation": 1195, "user_id": 1201917, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2bfbfc7322e119a59b09eefd2775e05e?s=128&d=identicon&r=PG", "display_name": "user1201917", "link": "https://stackoverflow.com/users/1201917/user1201917"}, "edited": false, "score": 0, "creation_date": 1470241076, "post_id": 38741994, "comment_id": 64871513, "body": "@user1201917 thanks, but I&#39;m not sure how wicked_pdf handles the overflow of text like prawn? I have no way of knowing how long a the text area might be."}], "owner": {"reputation": 800, "user_id": 3290423, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cf08b4a89aa05d600469502f103c187a?s=128&d=identicon&r=PG&f=1", "display_name": "rico_mac", "link": "https://stackoverflow.com/users/3290423/rico-mac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470222877, "creation_date": 1470222877, "question_id": 38741994, "link": "https://stackoverflow.com/questions/38741994/prawn-rails-generate-table-with-some-content-not-bound-by-table", "title": "Prawn Rails, generate table with some content not bound by table", "body": "<p>I am trying to build a fairly complex pdf using Prawn in Rails. </p>\n\n<p>The document I am trying to generate is a form of script split into four columns. The script is comprised of a collection of 'snippets', which are iterated through and populate the third column. If a snippet has special properties it can also populate any one of the other three columns as well. This is all achieved very easily using tables. However, I then need to be able to draw an arrow of some description (using prawn graphics) at certain points spanning between the table columns (please see attached image).</p>\n\n<p><a href=\"https://i.stack.imgur.com/0wMoZ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0wMoZ.jpg\" alt=\"demo table\"></a>        </p>\n\n<p>How is this achieved since content is bound by table cells? Is there a way to later draw these lines using cursor points or some other method?</p>\n\n<p>Please ask for further for clarification if I'm not making any sense.</p>\n\n<p>Thanks </p>\n"}, {"tags": ["ruby", "chef-infra", "inspec"], "answers": [{"comments": [{"owner": {"reputation": 307, "user_id": 6448700, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3a3c6965cc61446923c17b9d7a8cd84c?s=128&d=identicon&r=PG&f=1", "display_name": "saurg", "link": "https://stackoverflow.com/users/6448700/saurg"}, "edited": false, "score": 0, "creation_date": 1470288842, "post_id": 38750347, "comment_id": 64890652, "body": "Also can you tell me about this syntax  <code>its(:stdout) { is_expected.to eq &quot;\\n&quot; }</code>. Its not chef InSpec and what is resource <code>is_expected</code> ?"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 307, "user_id": 6448700, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3a3c6965cc61446923c17b9d7a8cd84c?s=128&d=identicon&r=PG&f=1", "display_name": "saurg", "link": "https://stackoverflow.com/users/6448700/saurg"}, "edited": false, "score": 0, "creation_date": 1470295428, "post_id": 38750347, "comment_id": 64893786, "body": "That&#39;s a mix of syntax from RSpec itself and the <code>rspec-its</code> gem. Neither are specific to InSpec. Equivalent to <code>it { expect(subject.stdout).to eq &quot;\\n&quot; }</code> just with a little less-ish typing and a little more readable as a sentence."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 1, "last_activity_date": 1470246046, "creation_date": 1470246046, "answer_id": 38750347, "question_id": 38741743, "link": "https://stackoverflow.com/questions/38741743/file-names-in-chef-inspec/38750347#38750347", "title": "File names in Chef InSpec", "body": "<p><code>*</code> for globs is mostly a shell feature, and as you might expect the <code>file</code> resource doesn't support them. Use a <code>command</code> resource instead:</p>\n\n<pre><code>describe command('ls /home/user') do\n  its(:stdout) { is_expected.to eq \"\\n\" }\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11424, "user_id": 584674, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/mZZN5.gif?s=128&g=1", "display_name": "james.garriss", "link": "https://stackoverflow.com/users/584674/james-garriss"}, "is_accepted": false, "score": 1, "last_activity_date": 1536165976, "last_edit_date": 1536165976, "creation_date": 1536164979, "answer_id": 52189775, "question_id": 38741743, "link": "https://stackoverflow.com/questions/38741743/file-names-in-chef-inspec/52189775#52189775", "title": "File names in Chef InSpec", "body": "<p>Here's an alternate approach that tests for the existence of the directory, and if it exists it uses Ruby to test for files within it.  It also uses the <code>expect</code> syntax, which allows for a custom error message.</p>\n\n<pre><code>control 'Test for an empty dir' do\n  describe directory('/hey') do\n    it 'This directory should exist and be a directory.' do\n      expect(subject).to(exist)\n      expect(subject).to(be_directory)\n    end\n  end\n  if (File.exist?('/hey'))\n    Array(Dir[\"/hey/*\"]).each do |bad_file|\n      describe bad_file do\n        it 'This file should not be here.' do\n          expect(bad_file).to(be_nil)\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>If there are files present, the resulting error message is informative:</p>\n\n<pre><code>  \u00d7  Test for an empty dir: Directory /hey (2 failed)\n     \u2714  Directory /hey This directory should exist and be a directory.\n     \u00d7  /hey/test2.png This file should not be here.\n     expected: nil\n          got: \"/hey/test2.png\"\n     \u00d7  /hey/test.png This file should not be here.\n     expected: nil\n          got: \"/hey/test.png\"\n</code></pre>\n"}], "owner": {"reputation": 307, "user_id": 6448700, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3a3c6965cc61446923c17b9d7a8cd84c?s=128&d=identicon&r=PG&f=1", "display_name": "saurg", "link": "https://stackoverflow.com/users/6448700/saurg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1391, "favorite_count": 0, "accepted_answer_id": 38750347, "answer_count": 2, "score": 1, "last_activity_date": 1536165976, "creation_date": 1470222102, "last_edit_date": 1536165022, "question_id": 38741743, "link": "https://stackoverflow.com/questions/38741743/file-names-in-chef-inspec", "title": "File names in Chef InSpec", "body": "<p>In Ruby, <code>*</code> is used to represent the name of a file. </p>\n\n<p>For example, <code>/home/user/*.rb</code> will return all files ending with <code>.rb</code>. I want to do something similar in Chef InSpec. </p>\n\n<p>For example:</p>\n\n<pre><code>describe file ('home/user/*') do\n  it {should_not exist }\nend\n</code></pre>\n\n<p>It should give me all the files inside <code>/home/user</code> directory and check that no file exists inside this directory. In other words, I want to check if this directory is empty or not in Chef. </p>\n\n<p>How can I do that? </p>\n"}, {"tags": ["ruby", "email", "heroku", "sinatra"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1470226455, "post_id": 38741631, "comment_id": 64860268, "body": "Install New Relic or look into your log files and figure out what the error is."}, {"owner": {"reputation": 381, "user_id": 4857642, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-kwtVmykXWww/AAAAAAAAAAI/AAAAAAAAAEs/rE6ZDFojwyA/photo.jpg?sz=128", "display_name": "Michael Stokes", "link": "https://stackoverflow.com/users/4857642/michael-stokes"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1470245684, "post_id": 38741631, "comment_id": 64874268, "body": "How do I look into my log files?"}, {"owner": {"reputation": 27694, "user_id": 194175, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/56badf521701d4f9b3a394d3ef6e90c4?s=128&d=identicon&r=PG", "display_name": "rdegges", "link": "https://stackoverflow.com/users/194175/rdegges"}, "edited": false, "score": 0, "creation_date": 1470256415, "post_id": 38741631, "comment_id": 64880091, "body": "Use <code>heroku logs --tail</code> command from the command line to view logs. This will show you any output that would normally happen on the terminal. Enable debugging mode in your web application and you&#39;ll get some useful messages."}], "owner": {"reputation": 381, "user_id": 4857642, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh3.googleusercontent.com/-kwtVmykXWww/AAAAAAAAAAI/AAAAAAAAAEs/rE6ZDFojwyA/photo.jpg?sz=128", "display_name": "Michael Stokes", "link": "https://stackoverflow.com/users/4857642/michael-stokes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1487968369, "creation_date": 1470221829, "last_edit_date": 1487968369, "question_id": 38741631, "link": "https://stackoverflow.com/questions/38741631/can-send-mail-locally-but-not-on-heroku", "title": "Can send mail locally but not on Heroku", "body": "<p>I am having an issue sending mail via Heroku. I am able to send it locally, but for some reason every time I send it via Heroku I keep getting the 'Internal Server Error'. It had worked fine in the past, but all I had to do was to change my password, then the issue started. Does anyone know what's going on?</p>\n\n<pre><code>post '/' do\n    require 'pony'\n    name  = params[:name]\n    mail = params[:mail]\n    subject = params[:subject]\n    body  = params[:body]\n\nPony.options = {\n  :via =&gt; :smtp,\n  :via_options =&gt; {\n    :address              =&gt; 'smtp.gmail.com',\n    :location             =&gt; '/c/sendmail/./sendmail',\n    :ssl                  =&gt; true,\n    :arguments            =&gt; '-t',\n    :port                 =&gt; '587',\n    :enable_starttls_auto =&gt; true,\n    :user_name            =&gt; 'username',\n    :password             =&gt; \"password\",\n    :authentication       =&gt; :plain, # :plain, :login, :cram_md5, no auth by default\n    :domain               =&gt; \"localhost\",\n    # :tls                =&gt; true\n  }\n}\n\n\n    Pony.mail(\n        :to =&gt; 'stokes8671@gmail.com', \n        :from =&gt; name + '&lt;' + mail + '&gt;',\n        :reply_to =&gt; mail,\n        :subject =&gt; subject,\n        :body =&gt; body)\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "datatables"], "comments": [{"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "edited": false, "score": 0, "creation_date": 1470219762, "post_id": 38740767, "comment_id": 64855719, "body": "<code>&quot;dom&quot;: &#39;&lt;&quot;top&quot;f&gt;rt&lt;&quot;bottom&quot;p&gt;&lt;&quot;clear&quot;&gt;&#39;,</code> - that looks odd to me as it&#39;s labelled <code>dom</code> at it clearly isn&#39;t valid HTML"}, {"owner": {"reputation": 50625, "user_id": 3549014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/290cbac6da9b4ef5ac976e5d50ab637e?s=128&d=identicon&r=PG", "display_name": "Gyrocode.com", "link": "https://stackoverflow.com/users/3549014/gyrocode-com"}, "edited": false, "score": 1, "creation_date": 1470220251, "post_id": 38740767, "comment_id": 64856022, "body": "Remove <code>&quot;aoColumnDefs&quot;: [ { &#39;bSortable&#39;: false, &#39;aTargets&#39;: [ 14 ] } ]</code> and see if that fixes the problem."}, {"owner": {"reputation": 115, "user_id": 5493621, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-fziemhGqhzI/AAAAAAAAAAI/AAAAAAAAAAw/-E5wtKA5h3s/photo.jpg?sz=128", "display_name": "bill_cosby", "link": "https://stackoverflow.com/users/5493621/bill-cosby"}, "edited": false, "score": 0, "creation_date": 1470220599, "post_id": 38740767, "comment_id": 64856252, "body": "i figured out that too. but after posting question"}], "owner": {"reputation": 115, "user_id": 5493621, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-fziemhGqhzI/AAAAAAAAAAI/AAAAAAAAAAw/-E5wtKA5h3s/photo.jpg?sz=128", "display_name": "bill_cosby", "link": "https://stackoverflow.com/users/5493621/bill-cosby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470220486, "creation_date": 1470219472, "question_id": 38740767, "link": "https://stackoverflow.com/questions/38740767/jquery-datatables-ajax-call-wont-run", "title": "Jquery Datatables ajax call won&#39;t run", "body": "<p>I have following dataTables jquery in my js file</p>\n\n<pre><code>$(\"#manage_chauffeurs\").dataTable({\n  \"processing\": true,\n  \"bServerSide\": true,\n  \"aaSorting\": [],\n  \"ajax\":{\n    'type': 'POST',\n    'url': '/admin/reports/chauffeurs_data'\n  },\n  \"responsive\": true,\n  \"aoColumnDefs\": [\n      { 'bSortable': false, 'aTargets': [ 14 ] }\n   ],\n  \"columnDefs\": [ { targets: '_all', visible: true } ],\n  \"dom\": '&lt;\"top\"f&gt;rt&lt;\"bottom\"p&gt;&lt;\"clear\"&gt;',\n  \"aoColumns\": [\n    { \"mDataProp\": \"name\", \"sDefaultContent\": \"\", \"sClass\": \"center_align\"},\n    { \"mDataProp\": \"user_id\", \"sDefaultContent\": \"\", \"sClass\": \"center_align\" }\n  ]\n});\n</code></pre>\n\n<p>Below is the html</p>\n\n<pre><code>  &lt;table class=\"display responsive no-wrap\" id=\"manage_chauffeurs\"&gt;\n    &lt;thead&gt;\n      &lt;tr&gt;\n        &lt;th width=\"50%\"&gt;User Name&lt;/th&gt;\n        &lt;th width=\"50%\"&gt;User ID&lt;/th&gt;\n      &lt;/tr&gt;\n    &lt;/thead&gt;\n\n  &lt;/table&gt;\n</code></pre>\n\n<p>I have the resource <code>'/admin/reports/chauffeurs_data'</code> set at my server. However, I don't get an ajax call. No call at all.</p>\n\n<p>Browser console gives the following error:</p>\n\n<pre><code>jquery.dataTables.js?body=1:4090 Uncaught TypeError: Cannot read property 'style' of undefined\n</code></pre>\n\n<p>Checked for above error, I have no mismatch of columns in my code.\nWhat could be going wrong here?\nSomeone please help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1048, "user_id": 6166821, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LpwuPY2Vfjw/AAAAAAAAAAI/AAAAAAAADS0/aT3BFBVyQEQ/photo.jpg?sz=128", "display_name": "Hasmukh Rathod", "link": "https://stackoverflow.com/users/6166821/hasmukh-rathod"}, "edited": false, "score": 0, "creation_date": 1470219359, "post_id": 38740483, "comment_id": 64855450, "body": "If i understood properly, you want to show child&#39;s attribute on index action of parent controller, right?"}], "answers": [{"comments": [{"owner": {"reputation": 395, "user_id": 2646716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100002366454382/picture?type=large", "display_name": "Hari Prakash", "link": "https://stackoverflow.com/users/2646716/hari-prakash"}, "edited": false, "score": 0, "creation_date": 1470224633, "post_id": 38740786, "comment_id": 64858958, "body": "still i get the same error. but this time not for nilClass. undefined method `each&#39; for #&lt;GoodsAddress:0x0000000440bab0&gt; getting error like this."}], "tags": [], "owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "is_accepted": true, "score": 0, "last_activity_date": 1470225075, "last_edit_date": 1470225075, "creation_date": 1470219528, "answer_id": 38740786, "question_id": 38740483, "link": "https://stackoverflow.com/questions/38740483/rails-nested-form-display-fields-in-index-page-along-with-parent-form/38740786#38740786", "title": "Rails nested form display fields in index page along with parent form", "body": "<p>If you want to display the <code>child-attributes(goods_address)</code> with <code>parent(customer_details)</code>, just loop the association of the parent object.</p>\n\n<pre><code>%tbody\n- @customer_details.each do |customer|\n  %tr\n    %td= customer.customer_name\n    %td= customer.customer_id\n    %td= customer.address\n    %td= customer.state\n    %td= customer.email\n    - if customer.goods_address.present?\n        %td= customer.try(:goods_address).try(:delivery_address)\n        %td= customer.try(:goods_address).try(:name)\n        %td= customer.try(:goods_address).try(:contact_no)\n</code></pre>\n"}], "owner": {"reputation": 395, "user_id": 2646716, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100002366454382/picture?type=large", "display_name": "Hari Prakash", "link": "https://stackoverflow.com/users/2646716/hari-prakash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 38740786, "answer_count": 1, "score": 1, "last_activity_date": 1470225075, "creation_date": 1470218720, "last_edit_date": 1470219079, "question_id": 38740483, "link": "https://stackoverflow.com/questions/38740483/rails-nested-form-display-fields-in-index-page-along-with-parent-form", "title": "Rails nested form display fields in index page along with parent form", "body": "<p><strong>index.html.haml</strong></p>\n\n<p>I have a customer details form which has a nested form named 'goods address'. I want to display all the customer details in index page.\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code> %tbody\r\n        - @customer_details.each do |customer|\r\n          %tr\r\n            %td= customer.customer_name\r\n            %td= customer.customer_id\r\n            %td= customer.address\r\n            %td= customer.state\r\n            %td= customer.email</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>nested form</strong>\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>= fields_for customer_detail do |f|\r\n  = f.fields_for :goods_address do |t|\r\n    .fieldset\r\n      .row\r\n        .col-sm-12\r\n        = t.label :delivery_address,\"Goods to be delivered at same address mention above?\", class: \"col-sm-6 control-label text-right\"\r\n        = t.check_box :delivery_address, autofocus: true, class: \"toggle-two customer-goods col-sm-6\", :value =&gt; \"On\"\r\n    %br\r\n    %div{id: 'customer_goods'}\r\n      .main-center-pan.main-login-pan\r\n        .fieldset\r\n          .row\r\n            .col-sm-12\r\n            = t.label :name,\"Name\", class: \"col-sm-3 control-label text-right\"\r\n            = t.text_field :name, autofocus: true, class: \"col-sm-3\"\r\n            = t.label :contact_no,\"Contact number\", class: \"col-sm-3 control-label text-right\"\r\n            = t.text_field :contact_no, autofocus: true, class: \"col-sm-3\"\r\n        %br</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p><strong>parent form</strong>\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>= nested_form_for(@customer_detail) do |f|\r\n      - all_views_side_error_messages!(@customer_detail)\r\n      .form-alignment\r\n        .fieldset\r\n          .row\r\n            .col-sm-12\r\n            = f.label :customer_name,\"Organisation/Customer Name\", class: \"col-sm-3 control-label text-right\"\r\n            = f.text_field :customer_name, autofocus: true, class: \"col-sm-3\"\r\n            = f.label :residential_type,\"Residential Type\", class: \"col-sm-3 control-label text-right\"\r\n            = f.check_box :residential_type, autofocus: true, \"data-width\" =&gt; \"200\", class: \"toggle-two-resident select-resident col-sm-3\"\r\n        %br</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>The problem is I dont know how to define the nested form's fields in the index.can someone plz help me.Thanks in advance. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 535, "user_id": 6648456, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/e1b762d35d49760ffc0984b363973714?s=128&d=identicon&r=PG&f=1", "display_name": "zwiebl", "link": "https://stackoverflow.com/users/6648456/zwiebl"}, "edited": false, "score": 0, "creation_date": 1470227424, "post_id": 38740074, "comment_id": 64861062, "body": "I tried like you said, but still I get an error saying &quot;found unknown escape character while parsing a quoted scalar at line 3 column 8 (RuntimeError)&quot;"}, {"owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "reply_to_user": {"reputation": 535, "user_id": 6648456, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/e1b762d35d49760ffc0984b363973714?s=128&d=identicon&r=PG&f=1", "display_name": "zwiebl", "link": "https://stackoverflow.com/users/6648456/zwiebl"}, "edited": false, "score": 0, "creation_date": 1470231329, "post_id": 38740074, "comment_id": 64864111, "body": "I think you need to use <code>host: &quot;gsss.gar.de\\\\SQL2012,3000&quot;</code> (Because only one backslash tries to escape the <code>S</code>)"}], "tags": [], "owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "is_accepted": true, "score": 0, "last_activity_date": 1470217657, "creation_date": 1470217657, "answer_id": 38740074, "question_id": 38739927, "link": "https://stackoverflow.com/questions/38739927/translating-a-connection-string-to-database-yml-file-in-ruby-on-rails/38740074#38740074", "title": "Translating a connection string to database.yml file in Ruby on Rails", "body": "<p>use quotes <code>\"</code> to wrap the strings.</p>\n\n<pre><code>development:\n    adapter:    \"sqlserver\"\n    host:       \"qsss.gar.de\\SQL2012,3000\"\n    port:       \"1433\"\n    database:   \"City\"\n    username:   \"user_me\"\n    password:   \"user_me##2009\"\n</code></pre>\n\n<p>This way YML will only interpret these as strings and not as comments and other stuff.</p>\n"}], "owner": {"reputation": 535, "user_id": 6648456, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/e1b762d35d49760ffc0984b363973714?s=128&d=identicon&r=PG&f=1", "display_name": "zwiebl", "link": "https://stackoverflow.com/users/6648456/zwiebl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 737, "favorite_count": 0, "accepted_answer_id": 38740074, "answer_count": 1, "score": 0, "last_activity_date": 1470217657, "creation_date": 1470217263, "question_id": 38739927, "link": "https://stackoverflow.com/questions/38739927/translating-a-connection-string-to-database-yml-file-in-ruby-on-rails", "title": "Translating a connection string to database.yml file in Ruby on Rails", "body": "<p>The problem is fairly simple and straightforward. I have a database <code>connection string</code> and I want to make a corresponding <code>database.yml</code> file from it.</p>\n\n<p>The connection string is as follows:</p>\n\n<pre><code>data source=qsss.gar.de\\SQL2012,3000;initial catalog=City;persist security info=True;user id=user_me;password=user_me##2009;\n</code></pre>\n\n<p>Now, the file I created is likewise:</p>\n\n<pre><code>development:\n    adapter:    sqlserver\n    host:       qsss.gar.de\\SQL2012,3000\n    port:       1433\n    database:   City\n    username:   user_me\n    password:   user_me##2009\n</code></pre>\n\n<p>Now, the problem occurs in line 3: this <code>qsss.gar.de\\SQL2012</code> is syntax-highlighted, where as the <code>,3000</code> part stays white, not highlighted but just as a normal text</p>\n\n<p>Also the problem in last line: <code>user_me##2009</code>, it just recognizes <code>user_me</code> and then treats <code>##2009</code> as the comment, but this part is also a part of the password.</p>\n\n<p>I noticed, if I used quotation marks, the highlighting is OK, but not sure should I use them?</p>\n\n<p>My question is - how should the <code>database.yml</code> file look like for the given connection string?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sidekiq"], "comments": [{"owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1470218004, "post_id": 38739773, "comment_id": 64854579, "body": "Just wondering, why are you using 10 workers."}, {"owner": {"reputation": 694, "user_id": 5493147, "user_type": "registered", "accept_rate": 66, "profile_image": "https://graph.facebook.com/10207662115541894/picture?type=large", "display_name": "nobilik", "link": "https://stackoverflow.com/users/5493147/nobilik"}, "reply_to_user": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1470233041, "post_id": 38739773, "comment_id": 64865475, "body": "@MohammadAbuShady It&#39;s just for my experience) But even if count of workers is 5, they grow and grow... At this time they&#39;re 5 but size of each is 640 Mb.  Can&#39;t understand, how to tweak it."}, {"owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1470233179, "post_id": 38739773, "comment_id": 64865593, "body": "I&#39;m not sure but I think sidekiq is built to consume as much resources as available for performance, you&#39;ll probably find your CPU going way up, even if the queue is empty, I&#39;ll need to find you the documentation that confirms this."}, {"owner": {"reputation": 694, "user_id": 5493147, "user_type": "registered", "accept_rate": 66, "profile_image": "https://graph.facebook.com/10207662115541894/picture?type=large", "display_name": "nobilik", "link": "https://stackoverflow.com/users/5493147/nobilik"}, "reply_to_user": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1470241176, "post_id": 38739773, "comment_id": 64871585, "body": "@MohammadAbuShady CPU usage is around 20% and not depends on qtt of workers."}], "owner": {"reputation": 694, "user_id": 5493147, "user_type": "registered", "accept_rate": 66, "profile_image": "https://graph.facebook.com/10207662115541894/picture?type=large", "display_name": "nobilik", "link": "https://stackoverflow.com/users/5493147/nobilik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 354, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1470216847, "creation_date": 1470216847, "question_id": 38739773, "link": "https://stackoverflow.com/questions/38739773/how-to-control-sidekiq-workers-ram-usage", "title": "How to control Sidekiq workers RAM usage?", "body": "<p>Ruby 2.3.0\nRails 4.2.4\nSidekiq 4.1.1</p>\n\n<p>RAM of VM was 3 Gb and size of each of 10 Sidekiq workers was 250-300 Mb. Now I increased RAM to 5 Gb, but sizes of workers also increased to 500+ Mb. OOM from time to time kill one of workers. </p>\n\n<p>How to control memory allocation size in this case, and why it happens?</p>\n"}, {"tags": ["ruby", "macos", "jekyll"], "answers": [{"comments": [{"owner": {"reputation": 20202, "user_id": 1606323, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/MkEIh.jpg?s=128&g=1", "display_name": "harryg", "link": "https://stackoverflow.com/users/1606323/harryg"}, "edited": false, "score": 1, "creation_date": 1470217734, "post_id": 38739675, "comment_id": 64854406, "body": "That does it. I still needed to also run <code>bundler install</code> as well. I would&#39;ve imagined all the Jekyll dependencies would&#39;ve been installed with it..."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 7, "last_activity_date": 1549467301, "last_edit_date": 1549467301, "creation_date": 1470216585, "answer_id": 38739675, "question_id": 38739530, "link": "https://stackoverflow.com/questions/38739530/cannot-build-or-serve-jekyll-site-on-osx/38739675#38739675", "title": "Cannot build or serve Jekyll site on OSX", "body": "<p>It seems you don't have <code>bundler</code> gem. Try</p>\n\n<p><code>gem install bundler</code></p>\n"}], "owner": {"reputation": 20202, "user_id": 1606323, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/MkEIh.jpg?s=128&g=1", "display_name": "harryg", "link": "https://stackoverflow.com/users/1606323/harryg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1029, "favorite_count": 1, "accepted_answer_id": 38739675, "answer_count": 1, "score": 4, "last_activity_date": 1549467301, "creation_date": 1470216162, "question_id": 38739530, "link": "https://stackoverflow.com/questions/38739530/cannot-build-or-serve-jekyll-site-on-osx", "title": "Cannot build or serve Jekyll site on OSX", "body": "<p>I am running OS X 10.11.6 and I installed Jekyll (using the already existent ruby on my system) by the recommended method: <code>sudo gem install -n /usr/local/bin/ jekyll</code>.</p>\n\n<p>I can happily run <code>jekyll</code> on my system so I made a new site by running <code>jekyll new TestSite</code> which successfully executed.</p>\n\n<p>However, this is where it stops working: if I <code>cd</code> into the site directory and run any <code>jekyll</code> command I get the following error:</p>\n\n<pre><code>/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- bundler (LoadError)\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Library/Ruby/Gems/2.0.0/gems/jekyll-3.2.1/lib/jekyll/plugin_manager.rb:34:in `require_from_bundler'\n    from /Library/Ruby/Gems/2.0.0/gems/jekyll-3.2.1/exe/jekyll:9:in `&lt;top (required)&gt;'\n    from /usr/local/bin/jekyll:23:in `load'\n    from /usr/local/bin/jekyll:23:in `&lt;main&gt;'\n</code></pre>\n\n<p>Any ideas how to get it working?</p>\n"}, {"tags": ["ruby", "operator-precedence"], "answers": [{"tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 1, "last_activity_date": 1470215437, "creation_date": 1470215437, "answer_id": 38739225, "question_id": 38739054, "link": "https://stackoverflow.com/questions/38739054/how-does-precedence-apply-on-an-expression-with-an-assignment-and-a-conditional/38739225#38739225", "title": "How does precedence apply on an expression with an assignment and a conditional?", "body": "<p>Ruby recognizes local variables during parsing. So, in your case, even thouogh it's not set to <code>1</code> (because the precedence of this expression is like you wrote), ruby knows that it's local variable and doesn't raise <code>NameError</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 1, "last_activity_date": 1470215771, "last_edit_date": 1470215771, "creation_date": 1470215460, "answer_id": 38739235, "question_id": 38739054, "link": "https://stackoverflow.com/questions/38739054/how-does-precedence-apply-on-an-expression-with-an-assignment-and-a-conditional/38739235#38739235", "title": "How does precedence apply on an expression with an assignment and a conditional?", "body": "<p>Ruby parser defines <code>var</code> when it sees it on the lefthand side of an expression (even though its inside of a conditional that doesn\u2019t run). So <code>nil</code> looks an appropriate value.</p>\n"}], "owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "closed_date": 1470215774, "accepted_answer_id": 38739225, "answer_count": 2, "score": 0, "last_activity_date": 1470215771, "creation_date": 1470214924, "question_id": 38739054, "link": "https://stackoverflow.com/questions/38739054/how-does-precedence-apply-on-an-expression-with-an-assignment-and-a-conditional", "closed_reason": "Duplicate", "title": "How does precedence apply on an expression with an assignment and a conditional?", "body": "<p>I have the following simple snippet:</p>\n\n<pre><code>var = 1 if false\n</code></pre>\n\n<p>I would expect this to evaluate as:</p>\n\n<pre><code>(var = 1) if false\n</code></pre>\n\n<p>so <code>var</code> would be undefined. However, <code>var</code> gets defined and receives a <code>nil</code> as its value.</p>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["ruby", "regex", "gsub"], "comments": [{"owner": {"reputation": 20173, "user_id": 1777111, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Us59l.jpg?s=128&g=1", "display_name": "Martin Schmelzer", "link": "https://stackoverflow.com/users/1777111/martin-schmelzer"}, "edited": false, "score": 0, "creation_date": 1470213146, "post_id": 38737696, "comment_id": 64851318, "body": "try <code>(\\s*[\\w-]*:)?([\\d.]*)rem&#47;g</code>"}, {"owner": {"reputation": 1435, "user_id": 6252717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EWcgG.png?s=128&g=1", "display_name": "TheThirdMan", "link": "https://stackoverflow.com/users/6252717/thethirdman"}, "reply_to_user": {"reputation": 20173, "user_id": 1777111, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/Us59l.jpg?s=128&g=1", "display_name": "Martin Schmelzer", "link": "https://stackoverflow.com/users/1777111/martin-schmelzer"}, "edited": false, "score": 0, "creation_date": 1470214184, "post_id": 38737696, "comment_id": 64851984, "body": "@MartinDabbelJuSmelter: Ruby doesn&#39;t have a global <code>g</code> option."}], "answers": [{"comments": [{"owner": {"reputation": 1435, "user_id": 6252717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EWcgG.png?s=128&g=1", "display_name": "TheThirdMan", "link": "https://stackoverflow.com/users/6252717/thethirdman"}, "edited": false, "score": 0, "creation_date": 1470212537, "post_id": 38738114, "comment_id": 64850927, "body": "While this is the only way I&#39;ve come accross so far if extended to 4 properties (which is the most I can imagine to occur in CSS), I was specifically wondering whether it&#39;s possible to match an unknown amount of elements. Your answer unfortunately also creates an empty second result for the first match, which would lead to rather unnecessary post-processing; see <a href=\"http://rubular.com/r/rL1x3VQNmp\" rel=\"nofollow noreferrer\">Rubular</a>"}, {"owner": {"reputation": 1217, "user_id": 2660911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580a3e9a6939226a59fadb456c38912a?s=128&d=identicon&r=PG", "display_name": "baddger964", "link": "https://stackoverflow.com/users/2660911/baddger964"}, "reply_to_user": {"reputation": 1435, "user_id": 6252717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EWcgG.png?s=128&g=1", "display_name": "TheThirdMan", "link": "https://stackoverflow.com/users/6252717/thethirdman"}, "edited": false, "score": 1, "creation_date": 1470212879, "post_id": 38738114, "comment_id": 64851155, "body": "You can&#39;t match an unknown amount of element, read this for explanation : <a href=\"http://stackoverflow.com/questions/464736/python-regular-expressions-how-to-capture-multiple-groups-from-a-wildcard-expr#464755\" title=\"python regular expressions how to capture multiple groups from a wildcard expr%23464755\">stackoverflow.com/questions/464736/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1217, "user_id": 2660911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/580a3e9a6939226a59fadb456c38912a?s=128&d=identicon&r=PG", "display_name": "baddger964", "link": "https://stackoverflow.com/users/2660911/baddger964"}, "is_accepted": false, "score": 0, "last_activity_date": 1470212203, "creation_date": 1470212203, "answer_id": 38738114, "question_id": 38737696, "link": "https://stackoverflow.com/questions/38737696/how-do-i-regex-match-an-unknown-number-of-repeating-elements/38738114#38738114", "title": "How do I regex-match an unknown number of repeating elements?", "body": "<p>This regex will do the job for your example : </p>\n\n<pre><code>([^}{;]+):(?:([0-9\\.]+?)rem\\s?)?(?:([0-9\\.]+?)rem\\s?)\n</code></pre>\n\n<p>But whith this you can't match  something like : <code>margin:4rem 7rem 9rem</code></p>\n"}, {"comments": [{"owner": {"reputation": 1435, "user_id": 6252717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EWcgG.png?s=128&g=1", "display_name": "TheThirdMan", "link": "https://stackoverflow.com/users/6252717/thethirdman"}, "edited": false, "score": 0, "creation_date": 1470223291, "post_id": 38738736, "comment_id": 64857987, "body": "The second suggestion is great - by modifying the string blockwise, there is no need to assume anything about the string, trying to mess with seperation (as you&#39;d need to not only seperate spaces, but also parentheses and other characters, <i>then</i> search for occurrences of rem anyway). Thanks for clearing this up! I added the way I ended up solving my problem to the first post."}], "tags": [], "owner": {"reputation": 1905, "user_id": 232838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8342950f34a66d9ec7cfe10b33d5494c?s=128&d=identicon&r=PG", "display_name": "koffeinfrei", "link": "https://stackoverflow.com/users/232838/koffeinfrei"}, "is_accepted": true, "score": 1, "last_activity_date": 1470214092, "creation_date": 1470214092, "answer_id": 38738736, "question_id": 38737696, "link": "https://stackoverflow.com/questions/38737696/how-do-i-regex-match-an-unknown-number-of-repeating-elements/38738736#38738736", "title": "How do I regex-match an unknown number of repeating elements?", "body": "<p>You can't capture a dynamic number of match groups (at least not in ruby).</p>\n\n<p>Instead you could do either one of the following:</p>\n\n<ol>\n<li>Capture the whole value and split on space</li>\n<li>Use multilevel matching to capture first the whole key/value pair and secondly match the value. You can use blocks on the <code>match</code> method in ruby.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 767, "user_id": 4332742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MkdSw.jpg?s=128&g=1", "display_name": "Anshul Rai", "link": "https://stackoverflow.com/users/4332742/anshul-rai"}, "is_accepted": false, "score": 0, "last_activity_date": 1470215556, "creation_date": 1470215556, "answer_id": 38739277, "question_id": 38737696, "link": "https://stackoverflow.com/questions/38737696/how-do-i-regex-match-an-unknown-number-of-repeating-elements/38739277#38739277", "title": "How do I regex-match an unknown number of repeating elements?", "body": "<p>This is what I've been able to do: <a href=\"http://rubular.com/r/wCbWx5JVo6\" rel=\"nofollow\">DEMO</a></p>\n\n<p>Regex: <code>(?&lt;={|;)([^:}]+)(?::)([^A-Za-z]+)</code></p>\n\n<p>And this is what my result looks like:</p>\n\n<pre><code> #    Match 1           Match 2\n #    1. font-size      1. margin\n #    2. 1.6            2. 4\n</code></pre>\n\n<p>As @koffeinfrei says, dynamic capture isn't possible in Ruby. Would be smarter to capture the whole string and remove spaces.</p>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1470216466, "creation_date": 1470216466, "answer_id": 38739632, "question_id": 38737696, "link": "https://stackoverflow.com/questions/38737696/how-do-i-regex-match-an-unknown-number-of-repeating-elements/38739632#38739632", "title": "How do I regex-match an unknown number of repeating elements?", "body": "<pre><code>str = 'body{font-size:1.6rem;margin:4rem 7rem;}'\nstr.scan(/(?&lt;=[{; ]).+?(?=[;}])/)\n   .map { |e| e.match /(?&lt;prop&gt;.+):(?&lt;value&gt;.+)/ }\n#\u21d2 [\n#    [0] #&lt;MatchData \"font-size:1.6rem\" prop:\"font-size\" value:\"1.6rem\"&gt;,\n#    [1] #&lt;MatchData \"margin:4rem 7rem\" prop:\"margin\" value:\"4rem 7rem\"&gt;\n# ]\n</code></pre>\n\n<p>The latter <code>match</code> might be easily adapted to return whatever you want, <code>value.split(/\\s+/)</code> will return all the values, <code>\\d+</code> instead of <code>.+</code> will match digits only etc.</p>\n"}], "owner": {"reputation": 1435, "user_id": 6252717, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EWcgG.png?s=128&g=1", "display_name": "TheThirdMan", "link": "https://stackoverflow.com/users/6252717/thethirdman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 639, "favorite_count": 0, "accepted_answer_id": 38738736, "answer_count": 4, "score": 0, "last_activity_date": 1470806344, "creation_date": 1470211128, "last_edit_date": 1470230051, "question_id": 38737696, "link": "https://stackoverflow.com/questions/38737696/how-do-i-regex-match-an-unknown-number-of-repeating-elements", "title": "How do I regex-match an unknown number of repeating elements?", "body": "<p>I'm trying to write a Ruby script that replaces all rem values in a CSS file with their px equivalents. This would be an example CSS file:</p>\n\n<pre><code>body{font-size:1.6rem;margin:4rem 7rem;}\n</code></pre>\n\n<p>The MatchData I'd like to get would be:</p>\n\n<pre><code>#    Match 1           Match 2\n#    1. font-size      1. margin\n#    2. 1.6            2. 4\n#                      3. 7\n</code></pre>\n\n<p>However I'm entirely clueless as to how to get multiple and different MatchData results. The RegEx that got me closest is this (<a href=\"http://rubular.com/r/KLGoBDcud6\" rel=\"nofollow\">you can also take a look at it at Rubular</a>):</p>\n\n<pre><code>/([^}{;]+):\\s*([0-9.]+?)rem(?=\\s*;|\\s*})/i\n</code></pre>\n\n<p>This will match single instances of value declarations (so it will properly return the desired Match 1 result), but entirely disregards multiples.</p>\n\n<p>I also tried something along the lines of <code>([0-9.]+?rem\\s*)+</code>, but that didn't return the desired result either, and doesn't feel like I'm on the right track, as it won't return multiple result data sets.</p>\n\n<hr>\n\n<p><strong>EDIT</strong> After the suggestions in the answers, I ended up solving the problem like this:</p>\n\n<pre><code># search for any declarations that contain rem unit values and modify blockwise\n@output.gsub!(/([^ }{;]+):\\s*([^}{;]*[0-9.]rem+[^;]*)(?=\\s*;|\\s*})/i) do |match|\n  # search for any single rem value\n  string = match.gsub(/([0-9.]+)rem/i) do |value|\n    # convert the rem value to px by multiplying by 10 (this is not universal!)\n    value = sprintf('%g', Regexp.last_match[1].to_f * 10).to_s + 'px'\n  end\n  string += ';' + match # append the original match result to the replacement\n  match = string # overwrite the matched result\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "email", "ruby-on-rails-4", "checkbox"], "answers": [{"comments": [{"owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "edited": false, "score": 0, "creation_date": 1470212408, "post_id": 38738058, "comment_id": 64850840, "body": "Hi Pradeep, when you say &quot;use multiple selection box&quot;, do you mean to add a check box for each email address as opposed to using the <code>collection_check_boxes</code> ?"}, {"owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "edited": false, "score": 0, "creation_date": 1470213709, "post_id": 38738058, "comment_id": 64851673, "body": "Ok, thanks for your edit, but I cannot see the email addresses of the contacts displayed in the select? I.e. the only value I can see is &quot;Enter Email Address&quot;, for some reason the emails are not pulling through. Any idea why?"}, {"owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "edited": false, "score": 0, "creation_date": 1470213764, "post_id": 38738058, "comment_id": 64851712, "body": "Is there a way of doing this using check boxes?"}, {"owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "reply_to_user": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "edited": false, "score": 0, "creation_date": 1470213926, "post_id": 38738058, "comment_id": 64851814, "body": "What i gave is example only you have to pass object that contains emails if you have passed @contacts and |contact|  then use contact.email instead of user.contact. It must work"}, {"owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "edited": false, "score": 0, "creation_date": 1470214680, "post_id": 38738058, "comment_id": 64852315, "body": "Ok, adapting some of your code I&#39;ve got as far as using check boxes and then going to the controller and splitting the emails out, but my issue now is that the line <code>UserEmails.send_email(email).deliver_now</code> errors because the <code>email</code> is just the email address selected as opposed to the email which contains the to, cc, bcc, subject, message etc. parameters, so do you know how I can modify this to send the email with the same subject and message but to the different contacts selected?"}, {"owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "reply_to_user": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "edited": false, "score": 0, "creation_date": 1470214904, "post_id": 38738058, "comment_id": 64852470, "body": "Using that depends upon your code you can manually create multiple selection field for to, from , cc and bcc emails split them and pass them to your mailer as your desire."}, {"owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "edited": false, "score": 0, "creation_date": 1470215392, "post_id": 38738058, "comment_id": 64852812, "body": "Sorry, but can you please show me how. My create controller now looks like this:    <code>def create     @email = Email.new(email_params) \t@email.user_id = session[:user_id] \t@user = session[:user_id] \tif @email.save \t\t@emails = (email_params[:to]).split(&quot;; &quot;) \t\t@emails.each do |email| \t\t\tUserEmails.send_email(email).deliver_now \t\tend \t\tredirect_to @email, notice: &#39;Email was successfully created.&#39; \telse \t\tredirect &#39;new&#39; \tend   end</code>"}, {"owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "reply_to_user": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "edited": false, "score": 0, "creation_date": 1470216129, "post_id": 38738058, "comment_id": 64853361, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/118987/discussion-between-ben-smith-and-pradeep-sapkota\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "is_accepted": false, "score": 0, "last_activity_date": 1470214802, "last_edit_date": 1470214802, "creation_date": 1470212067, "answer_id": 38738058, "question_id": 38737576, "link": "https://stackoverflow.com/questions/38737576/ruby-on-rails-loop-through-check-boxes-of-email-addresses-and-send-an-email-to/38738058#38738058", "title": "Ruby on Rails: Loop through check boxes of email addresses and send an email to each?", "body": "<p><strong>Use Multiple Selection box and then select2 for making email address selection box like google does after that following code works</strong></p>\n\n<p><strong>Your form</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code> &lt;div class=\"form-group\"&gt;\r\n              &lt;%= f.label :select_user_email %&gt;&lt;br/&gt;\r\n              &lt;select class=\"form-control select2\" name=\"user[email][]\"&gt;\r\n                &lt;option value=\"\" selected disabled&gt;Enter email address&lt;/option&gt;\r\n                &lt;%@users.each do |user|%&gt;\r\n                    &lt;option value=\"&lt;%=user.email%&gt;\"&gt;&lt;%=user.name%&gt;&lt;/option&gt;\r\n                &lt;%end%&gt;\r\n              &lt;/select&gt;\r\n            &lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<pre><code>def create\n  @emails = (params[:email]).split(\",\")\n  @emails.each do |email|\n   UserMailer(email, @message).deliver_now\nend\nend\n</code></pre>\n\n<p><strong>Remember select2 is a javascript and css for making selection box like this</strong>\n<a href=\"https://i.stack.imgur.com/JT3Mr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JT3Mr.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1470214802, "creation_date": 1470210759, "question_id": 38737576, "link": "https://stackoverflow.com/questions/38737576/ruby-on-rails-loop-through-check-boxes-of-email-addresses-and-send-an-email-to", "title": "Ruby on Rails: Loop through check boxes of email addresses and send an email to each?", "body": "<p>I am trying to create a system in RoR to send out emails, and what I want a user to be able to do is select multiple email addresses through checkboxes on a form and the system loop through each of those selected checkboxes sending an email to each. At the minute a user can select multiple email addresses on the form and the system joins them together so that one email is sent to multiple recipients, e.g. the user selects the email addresses \"1@a.com\" and \"2@b.com\" and the system sends an email to \"1@a.com;2@b.com\".</p>\n\n<p>I have done this through the view: </p>\n\n<pre><code>&lt;%= form_for(@email) do |f| %&gt;\n  &lt;% if @email.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(@email.errors.count, \"error\") %&gt; prohibited this email from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% @email.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;p&gt;\n    &lt;%= f.label :from_name %&gt;&lt;br&gt;\n    &lt;% if @user.present? %&gt;\n    &lt;%= f.select :from_name, [@user.firstname + \" \" + @user.surname, @user.organisation] %&gt;\n    &lt;% end %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= f.label :From_Email_Address %&gt;&lt;br&gt;\n    &lt;%= f.collection_select :account_id, Account.where(user_id: session[:user_id]), \n      :id,:email %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= f.label :to %&gt;&lt;br&gt;\n    &lt;%= f.collection_check_boxes(:to, @contacts, :email, :email) %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= f.label :cc %&gt;&lt;br&gt;\n    &lt;%= f.text_field :cc %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= f.label :bcc %&gt;&lt;br&gt;\n    &lt;%= f.text_field :bcc %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= f.label :subject %&gt;&lt;br&gt;\n    &lt;%= f.text_field :subject %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= f.label :message %&gt;&lt;br&gt;\n    &lt;%= f.text_field :message %&gt;\n  &lt;/p&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n</code></pre>\n\n\n\n<p>With the line <code>&lt;%= f.collection_check_boxes(:to, @contacts, :email, :email) %&gt;</code> showing the checkboxes for each of the email addresses saved in the contacts database table.</p>\n\n<p>This then goes through to the <code>emails_controller</code>, which has the following code:</p>\n\n<pre><code>class EmailsController &lt; ApplicationController\n  before_action :set_email, only: [:show, :edit, :update, :destroy]\n\n  def index\n    # Only show the email accounts for the user logged in\n    @emails = Email.where(user_id: session[:user_id])\n  end\n\n  def show\n  end\n\n  def new\n    @user = User.find(session[:user_id])\n    @contacts = Contact.where(user_id: session[:user_id])\n    @email = Email.new\n  end\n\n  def edit\n    @user = User.find(session[:user_id])\n    @contacts = Contact.where(user_id: session[:user_id])\n  end\n\n  def create\n    @email = Email.new(email_params)\n    @email.user_id = session[:user_id]\n    @user = session[:user_id]\n    if @email.save\n        UserEmails.send_email(@email).deliver_now\n        redirect_to @email, notice: 'Email was successfully created.'\n    else\n        redirect 'new'\n    end\n  end\n\n  def update\n      if @email.update(email_params)\n        redirect_to @email, notice: 'Email was successfully updated.'\n      else\n        redirect 'edit'\n      end\n  end\n\n  def destroy\n    @email.destroy\n    redirect_to emails_url, notice: 'Email was successfully destroyed.'\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_email\n          @email = Email.find(params[:id])\nend\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def email_params \n        res = params.require(:email).permit(:account_id, :cc, :bcc, :subject, :message, :from_name, to: []) \n        res[:to] = res[:to].join('; ') \n        res \n    end\nend\n</code></pre>\n\n<p>With the <code>email_params</code> code joining the email addresses selected together with a \";\" between each one.</p>\n\n<p>As you can see above in the <code>create</code> method, the code <code>UserEmails.send_email(@email).deliver_now</code> is ran once the email is saved - this code sends the email out.</p>\n\n<p>So, what my question is, is whether anyone can help me to change the code so that one email is sent to each of the email addresses selected on the form?</p>\n\n<p>Below is what my form with the check boxes looks like.</p>\n\n<p><a href=\"https://i.stack.imgur.com/rKVeW.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rKVeW.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1470292484, "post_id": 38737442, "comment_id": 64892120, "body": "sonukrishna, I have taken the liberty of clarifying your question to conform with my understanding of what you wish to do. My understanding is shared by everyone who has offered a solution to date. I trust this is what you want to do."}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1470314760, "post_id": 38737442, "comment_id": 64906553, "body": "@CarySwoveland I shared the understanding of you and the others who answered.  I never found this question unclear; I wish the voters would have left a comment saying what was unclear to them."}], "answers": [{"tags": [], "owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "is_accepted": false, "score": 1, "last_activity_date": 1470211851, "creation_date": 1470211851, "answer_id": 38737963, "question_id": 38737442, "link": "https://stackoverflow.com/questions/38737442/make-multiple-arrays-into-a-single-array/38737963#38737963", "title": "Make multiple arrays into a single array", "body": "<p>Try this: </p>\n\n<pre><code>nested = aa.select { |ele| ele.is_a? Array }.flatten\naa = aa.select { |ele| !ele.is_a? Array }\nresult = []\nnested.each { |ele| result &lt;&lt; ([aa + [ele]].flatten.sort) }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 5433989, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1063d58b53fc013af0cb29e2d2e51847?s=128&d=identicon&r=PG&f=1", "display_name": "sonukrishna", "link": "https://stackoverflow.com/users/5433989/sonukrishna"}, "edited": false, "score": 0, "creation_date": 1593606729, "post_id": 38737987, "comment_id": 110839213, "body": "Thanks for this response."}], "tags": [], "owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "is_accepted": false, "score": 0, "last_activity_date": 1470211904, "creation_date": 1470211904, "answer_id": 38737987, "question_id": 38737442, "link": "https://stackoverflow.com/questions/38737442/make-multiple-arrays-into-a-single-array/38737987#38737987", "title": "Make multiple arrays into a single array", "body": "<p>Maybe you can use something like this:</p>\n\n<pre><code>arr = [1, 2, 3, [5, 6, 7], 8]\n\n# get fixnum\nnumbers = arr.select { |i| !(Array === i) }\n\noutput = arr.each.with_index.with_object(Array.new([])) do |(a, i), exp|\n  a.each { |k| exp &lt;&lt; numbers.dup.insert(i, k) } if Array === a\nend\n\np output\n# =&gt; [[1, 2, 3, 5, 8], [1, 2, 3, 6, 8], [1, 2, 3, 7, 8]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 5433989, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1063d58b53fc013af0cb29e2d2e51847?s=128&d=identicon&r=PG&f=1", "display_name": "sonukrishna", "link": "https://stackoverflow.com/users/5433989/sonukrishna"}, "edited": false, "score": 0, "creation_date": 1470218925, "post_id": 38738536, "comment_id": 64855168, "body": "Thank dear  ,its a great help"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1470213811, "last_edit_date": 1470213811, "creation_date": 1470213490, "answer_id": 38738536, "question_id": 38737442, "link": "https://stackoverflow.com/questions/38737442/make-multiple-arrays-into-a-single-array/38738536#38738536", "title": "Make multiple arrays into a single array", "body": "<pre><code>\u25b6 max_sz = aa.map { |e| [*e].size }.max\n#\u21d2 3\n\u25b6 aa.map { |e| e.is_a?(Array) ? e : [e] * max_sz }.transpose\n#\u21d2 [[1,2,3,5,8],[1,2,3,6,8],[1,2,3,7,8]]\n</code></pre>\n\n<p>or, maybe more clear:</p>\n\n<pre><code>\u25b6 aa.map { |e| ([*e] * max_sz).take(max_sz) }.transpose\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 59, "user_id": 5433989, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1063d58b53fc013af0cb29e2d2e51847?s=128&d=identicon&r=PG&f=1", "display_name": "sonukrishna", "link": "https://stackoverflow.com/users/5433989/sonukrishna"}, "edited": false, "score": 0, "creation_date": 1593606773, "post_id": 38749926, "comment_id": 110839235, "body": "Thanks for this help."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1470249026, "last_edit_date": 1470249026, "creation_date": 1470244549, "answer_id": 38749926, "question_id": 38737442, "link": "https://stackoverflow.com/questions/38737442/make-multiple-arrays-into-a-single-array/38749926#38749926", "title": "Make multiple arrays into a single array", "body": "<pre><code>first, mid, last = aa.chunk(&amp;:class).map { |_,e| e.flatten }\n  #=&gt; [[1, 2, 3], [5, 6, 7], [8]] \n[first].product(mid.product([last])).map(&amp;:flatten)\n  #=&gt; [[1, 2, 3, 5, 8], [1, 2, 3, 6, 8], [1, 2, 3, 7, 8]] \n</code></pre>\n\n<p>The steps are as follows</p>\n\n<pre><code>enum = aa.chunk(&amp;:class)\n  #=&gt; #&lt;Enumerator: #&lt;Enumerator::Generator:0x007ff64a1699f8&gt;:each&gt; \n</code></pre>\n\n<p>We can see the elements that will be generated by this enumerator by converting it to an array.</p>\n\n<pre><code>enum.to_a\n  #=&gt; [[Fixnum, [1, 2, 3]], [Array, [[5, 6, 7]]], [Fixnum, [8]]] \n</code></pre>\n\n<p>Continuing,</p>\n\n<pre><code>first, mid, last = enum.map { |_,e| e.flatten }\n  #=&gt; [[1, 2, 3], [5, 6, 7], [8]] \nfirst\n  #=&gt; [1, 2, 3] \nmid\n  #=&gt; [5, 6, 7] \nlast\n  #=&gt; [8] \n\na = mid.product([last])\n  #=&gt; [[5, [8]], [6, [8]], [7, [8]]] \nb = [first].product(a)\n  #=&gt; [[[1, 2, 3], [5, [8]]],\n  #    [[1, 2, 3], [6, [8]]],\n  #    [[1, 2, 3], [7, [8]]]] \nb.map(&amp;:flatten)\n  #=&gt; [[1, 2, 3, 5, 8],\n  #    [1, 2, 3, 6, 8],\n  #    [1, 2, 3, 7, 8]]\n</code></pre>\n"}], "owner": {"reputation": 59, "user_id": 5433989, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1063d58b53fc013af0cb29e2d2e51847?s=128&d=identicon&r=PG&f=1", "display_name": "sonukrishna", "link": "https://stackoverflow.com/users/5433989/sonukrishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "answer_count": 4, "score": -2, "last_activity_date": 1470297993, "creation_date": 1470210382, "last_edit_date": 1470286673, "question_id": 38737442, "link": "https://stackoverflow.com/questions/38737442/make-multiple-arrays-into-a-single-array", "title": "Make multiple arrays into a single array", "body": "<p>Given</p>\n\n<pre><code>arr = [5,6,7]\naa  = [1,2,3,arr,8,9]\n</code></pre>\n\n<p>I wish to produce the array</p>\n\n<pre><code>b = [[1,2,3,5,8,9], [1,2,3,6,8,9], [1,2,3,7,8,9]] \n</code></pre>\n\n<p>Notice that all three elements of <code>b</code> begin with the elements of <code>aa</code> that precede <code>arr</code> (the \"beginners\") and end with the elements of <code>aa</code> that follow <code>arr</code> (the \"enders). The <code>i</code>th element of <code>arr</code> is then inserted into the <code>i</code>th element of <code>b</code>, in between the \"beginners\" and the \"enders\". The size of <code>b</code> therefore equals the size of <code>arr</code>. </p>\n\n<p>More generally, the elements of <code>aa</code> that precede or follow <code>arr</code> can be any objects other than arrays (not necessarily integers).</p>\n\n<p><strong>Note:</strong> The original statement of this question had</p>\n\n<pre><code>aa = [1,2,3,arr,8]\n</code></pre>\n\n<p>and the intent was to produce the array</p>\n\n<pre><code>b = [[1,2,3,5,8],[1,2,3,6,8],[1,2,3,7,8]]\n</code></pre>\n\n<p>That is why some of the answers do not reflect the revised example above.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "edited": false, "score": 0, "creation_date": 1470210202, "post_id": 38736808, "comment_id": 64849530, "body": "I think you may be looking for mysql function FIELD, see this post <a href=\"http://stackoverflow.com/questions/12096948/rails-3-order-by-field-and-last\" title=\"rails 3 order by field and last\">stackoverflow.com/questions/12096948/&hellip;</a>"}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1470216390, "post_id": 38736808, "comment_id": 64853547, "body": "@hassan your problem resolved?"}], "answers": [{"comments": [{"owner": {"reputation": 11736, "user_id": 610351, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f4ee98206d84b25a83228e285c678f0?s=128&d=identicon&r=PG", "display_name": "Geoffroy", "link": "https://stackoverflow.com/users/610351/geoffroy"}, "edited": false, "score": 0, "creation_date": 1470209636, "post_id": 38737163, "comment_id": 64849224, "body": "I&#39;m not sure this will change anything, as the database just returns matching object in the order it find them"}, {"owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "reply_to_user": {"reputation": 11736, "user_id": 610351, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f4ee98206d84b25a83228e285c678f0?s=128&d=identicon&r=PG", "display_name": "Geoffroy", "link": "https://stackoverflow.com/users/610351/geoffroy"}, "edited": false, "score": 0, "creation_date": 1470218471, "post_id": 38737163, "comment_id": 64854883, "body": "I edited my answer, i tried with a similar structure, it works and i hope it will be useful for you later may be ..."}], "tags": [], "owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "is_accepted": false, "score": 0, "last_activity_date": 1470218829, "last_edit_date": 1470218829, "creation_date": 1470209538, "answer_id": 38737163, "question_id": 38736808, "link": "https://stackoverflow.com/questions/38736808/want-to-query-in-array-and-get-result-of-ids-that-been-passed-into-query/38737163#38737163", "title": "Want to query in array and get result of ids that been passed into query", "body": "<p>Try this </p>\n\n<pre><code>Answer_ids = PsychographicsAnswer\n                    .group('psychographics_question_id')\n                    .order('count(*) DESC')\n                    .limit(5)\n                    .pluck(:psychographics_question_id) // Answers_id =&gt; [175, 174, 176, 173, 172]\n\nPsychographicsQuestion.unscoped.where(:id=&gt;Answer_ids)\n                  .order(\"FIELD(id, #{Answer_ids.join(',')})\")\n                  .pluck(:id) // [175, 174, 176, 173, 172]\n</code></pre>\n\n<p>I think you may be looking for mysql function FIELD.</p>\n"}, {"comments": [{"owner": {"reputation": 349, "user_id": 6172228, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c84d3d15f2acbca0332610457d579d86?s=128&d=identicon&r=PG&f=1", "display_name": "Hassan Munir", "link": "https://stackoverflow.com/users/6172228/hassan-munir"}, "edited": false, "score": 1, "creation_date": 1470216941, "post_id": 38737475, "comment_id": 64853926, "body": "I found solution by customizing ur idea and it works thanks. By following query i solved my issue.  <code>PsychographicsQuestion.joins(:psychographics_answers) \t.select(&quot;psychographics_questions.* , count(psychographics_answers.psychographics_question_id) as scount&quot;) \t.group(&quot;psychographics_questions.id&quot;)\t \t.order(&quot;scount DESC&quot;)</code>"}], "tags": [], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "is_accepted": false, "score": 0, "last_activity_date": 1470210491, "creation_date": 1470210491, "answer_id": 38737475, "question_id": 38736808, "link": "https://stackoverflow.com/questions/38736808/want-to-query-in-array-and-get-result-of-ids-that-been-passed-into-query/38737475#38737475", "title": "Want to query in array and get result of ids that been passed into query", "body": "<p>If you want to order questions according to number of its associated answers then I think you can do like this</p>\n\n<pre><code>Question\n  .joins(:answers)\n  .select(\"users.*, count(annswers.id) as scount\")\n  .group(\"questions.id\")\n  .order(\"scount DESC\")\n</code></pre>\n"}], "owner": {"reputation": 349, "user_id": 6172228, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/c84d3d15f2acbca0332610457d579d86?s=128&d=identicon&r=PG&f=1", "display_name": "Hassan Munir", "link": "https://stackoverflow.com/users/6172228/hassan-munir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1470218829, "creation_date": 1470208444, "last_edit_date": 1470210250, "question_id": 38736808, "link": "https://stackoverflow.com/questions/38736808/want-to-query-in-array-and-get-result-of-ids-that-been-passed-into-query", "title": "Want to query in array and get result of ids that been passed into query", "body": "<p>I made a query which returns me array of ids. like below : </p>\n\n<pre><code>PsychographicsAnswer.group('psychographics_question_id')\n                    .order('count(*) DESC')\n                    .limit(5)\n                    .pluck(:psychographics_question_id)\n</code></pre>\n\n<p>this return me following result</p>\n\n<pre><code>[175, 174, 176, 173, 172]\n</code></pre>\n\n<p>Now i want to find question with same ids and exactly in same order. I am querying in following way.</p>\n\n<pre><code>PsychographicsQuestion.where(:id=&gt;PsychographicsAnswer\n                        .group('psychographics_question_id')\n                        .order('count(*) DESC')\n                        .limit(5)\n                        .pluck(:psychographics_question_id))\n                      .pluck(:id)\n</code></pre>\n\n<p>this return me following result:</p>\n\n<pre><code>[172, 173, 174, 175, 176]\n</code></pre>\n\n<p>As you can see ids not in order like i pass in query. I want to get result exactly in same fashion as i querying in. </p>\n"}, {"tags": ["ruby", "elasticsearch", "logstash"], "answers": [{"comments": [{"owner": {"reputation": 571, "user_id": 5474567, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/aE0Hv.jpg?s=128&g=1", "display_name": "Yu Watanabe", "link": "https://stackoverflow.com/users/5474567/yu-watanabe"}, "edited": false, "score": 0, "creation_date": 1470207398, "post_id": 38736391, "comment_id": 64848061, "body": "Worked like a charm! Thank you!"}, {"owner": {"reputation": 163519, "user_id": 4604579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/reC2t.jpg?s=128&g=1", "display_name": "Val", "link": "https://stackoverflow.com/users/4604579/val"}, "reply_to_user": {"reputation": 571, "user_id": 5474567, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/aE0Hv.jpg?s=128&g=1", "display_name": "Yu Watanabe", "link": "https://stackoverflow.com/users/5474567/yu-watanabe"}, "edited": false, "score": 0, "creation_date": 1470207410, "post_id": 38736391, "comment_id": 64848072, "body": "Awesome, glad it helped!"}], "tags": [], "owner": {"reputation": 163519, "user_id": 4604579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/reC2t.jpg?s=128&g=1", "display_name": "Val", "link": "https://stackoverflow.com/users/4604579/val"}, "is_accepted": true, "score": 8, "last_activity_date": 1470207146, "creation_date": 1470207146, "answer_id": 38736391, "question_id": 38736085, "link": "https://stackoverflow.com/questions/38736085/ruby-code-in-logstash-failing-with-rubyexception/38736391#38736391", "title": "Ruby code in logstash failing with _rubyexception", "body": "<p>There is a new event API in Logstash 5.0.0 and now you need to set fields on the event as follows:</p>\n\n<pre><code>  ruby {\n    code =&gt; \"\n      event.set('newfield', 'test')\n    \"\n  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 321, "user_id": 5784728, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lJLHa.png?s=128&g=1", "display_name": "Vignesh Ammasi", "link": "https://stackoverflow.com/users/5784728/vignesh-ammasi"}, "is_accepted": false, "score": 3, "last_activity_date": 1485772485, "creation_date": 1485772485, "answer_id": 41933745, "question_id": 38736085, "link": "https://stackoverflow.com/questions/38736085/ruby-code-in-logstash-failing-with-rubyexception/41933745#41933745", "title": "Ruby code in logstash failing with _rubyexception", "body": "<p>For get the value from field name:</p>\n\n<pre><code>ruby {\n code =&gt; \"\n value = (event.get('field_name'))\n    \"\n}\n</code></pre>\n"}], "owner": {"reputation": 571, "user_id": 5474567, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/aE0Hv.jpg?s=128&g=1", "display_name": "Yu Watanabe", "link": "https://stackoverflow.com/users/5474567/yu-watanabe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5225, "favorite_count": 1, "accepted_answer_id": 38736391, "answer_count": 2, "score": 2, "last_activity_date": 1485772485, "creation_date": 1470206203, "question_id": 38736085, "link": "https://stackoverflow.com/questions/38736085/ruby-code-in-logstash-failing-with-rubyexception", "title": "Ruby code in logstash failing with _rubyexception", "body": "<p>I would like to get help with the code in ruby filter.</p>\n\n<p>logstash version is 5.0.0 alpha4.</p>\n\n<p>I am testing the code in ruby filter as below but I am getting _rubyexception.</p>\n\n<pre><code>  ruby {\n    code =&gt; \"\n      event['newfield'] = 'test'\n    \"\n  }\n</code></pre>\n\n<p>ruby filter is defined inside filter { }.\nThe logstash.log shows as below,</p>\n\n<pre><code>:timestamp=&gt;\"2016-08-03T15:26:47.291000+0900\", :message=&gt;\"Ruby exception occurred: undefined method[]=' for 2016-08-03T06:26:46.829Z test %{message}:LogStash::Event\", :level=&gt;:error}\n</code></pre>\n\n<p>I cant find the reason why ruby filter is unable to use event object.\nI appreciate if I could get some help to cope this issue.</p>\n\n<p>Thanks,\nYu</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "is_accepted": false, "score": 0, "last_activity_date": 1470203646, "creation_date": 1470203646, "answer_id": 38735452, "question_id": 38735129, "link": "https://stackoverflow.com/questions/38735129/how-to-upload-image-in-ruby-app-folder-and-insert-url-in-database-column/38735452#38735452", "title": "How to upload image in ruby app folder and insert url in database column", "body": "<p><strong>View following method for uploading files to app/assets/images/people_profile_images folder</strong></p>\n\n<p>First upload Image like this: </p>\n\n<pre><code>@user =User.new(user_params)\n  #this will create user form paramaters given\nuploaded_file = params[:user][:photo]\n#this will add uploaded image or file in uplaoded_fie\nif (uploaded_file)\n  File.open(Rails.root.join('app/assets', 'images/people_profile_images', uploaded_file.original_filename), 'wb') do |file|\n    file.write(uploaded_file.read)\n    @user.photo = \"/assets/people_profile_images/\"+uploaded_file.original_filename\n  end\nelse\n  @user.photo = \"/assets/people_profile_images/default_avatar.png\"\nend\n</code></pre>\n\n<p>then save user </p>\n\n<pre><code>@user.save\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 159, "user_id": 5213662, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154284279718018/picture?type=large", "display_name": "Anna S", "link": "https://stackoverflow.com/users/5213662/anna-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1470204002, "creation_date": 1470204002, "answer_id": 38735550, "question_id": 38735129, "link": "https://stackoverflow.com/questions/38735129/how-to-upload-image-in-ruby-app-folder-and-insert-url-in-database-column/38735550#38735550", "title": "How to upload image in ruby app folder and insert url in database column", "body": "<p>I don't know of an approach that can cover both: image uploading and then saving the url on the database.</p>\n\n<p>You can do one or the other:</p>\n\n<p>1) Use a gem called paperclip that helps upload image files.</p>\n\n<p>See this links: </p>\n\n<p><a href=\"https://github.com/thoughtbot/paperclip#ruby-and-rails\" rel=\"nofollow\">https://github.com/thoughtbot/paperclip#ruby-and-rails</a></p>\n\n<p><a href=\"https://teamtreehouse.com/library/image-uploads-in-ruby-on-rails-41\" rel=\"nofollow\">https://teamtreehouse.com/library/image-uploads-in-ruby-on-rails-41</a> (paperclip, carrierwave, and dragonfly)</p>\n\n<p>I have used paperclip and it has worked well for me. </p>\n\n<p>OR:</p>\n\n<p>2) Include it as an additional field on your filename.html.erb for your image_url</p>\n\n<p>One caveat, of using this though is that this can be changed and you have no control of the image that might show on your site. Thus, the image_url should be from a reputable CDN or at least from a reputable user uploading to your site.</p>\n"}, {"tags": [], "owner": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "is_accepted": false, "score": 0, "last_activity_date": 1470205578, "creation_date": 1470205578, "answer_id": 38735919, "question_id": 38735129, "link": "https://stackoverflow.com/questions/38735129/how-to-upload-image-in-ruby-app-folder-and-insert-url-in-database-column/38735919#38735919", "title": "How to upload image in ruby app folder and insert url in database column", "body": "<p>Create a column url:string in your model. Add it as a hidden field in your form. Set its value to the same as your remote_url using .js </p>\n\n<p>var urladdy = input.remoteurl.val()</p>\n\n<p>input.url.val(urladdy) </p>\n\n<p>This will upload image with carrier wave and also save its url as string. </p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 6261341, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0SEG-uIaL4I/AAAAAAAAAAI/AAAAAAAAADw/bVIbecnz7DI/photo.jpg?sz=128", "display_name": "Kundan Sinha", "link": "https://stackoverflow.com/users/6261341/kundan-sinha"}, "is_accepted": true, "score": 1, "last_activity_date": 1470921167, "creation_date": 1470921167, "answer_id": 38897415, "question_id": 38735129, "link": "https://stackoverflow.com/questions/38735129/how-to-upload-image-in-ruby-app-folder-and-insert-url-in-database-column/38897415#38897415", "title": "How to upload image in ruby app folder and insert url in database column", "body": "<p><code>User(Model) mount_uploader :userImage, AvatarUploader</code></p>\n\n<pre><code>UsersController -&gt; @user = User.new(user_params)\n                    if @user.save\n                     redirect_to(:action =&gt; 'show', id: User.last.id)\n                    else\n                    render :json =&gt; data_hash2, :content_type =&gt; 'application/json' \n                    end\n\n\n\nclass AvatarUploader &lt; CarrierWave::Uploader::Base\nstorage :file\ndef store_dir\n        \"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}\"\n    end\ndef extension_white_list\n        %w(jpg jpeg gif png) \n    end  end\n</code></pre>\n\n<blockquote>\n  <p>If You Using Web Service</p>\n</blockquote>\n\n<pre><code>&lt;form action=\"http://ruby/controllername/create\" lass=\"new_user\" id=\"new_user\" enctype=\"multipart/form-data\" accept-charset=\"UTF-8\" method=\"post\"&gt;\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6617255, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DnxXeeOreLg/AAAAAAAAAAI/AAAAAAAAAEA/YybYnDp53Nk/photo.jpg?sz=128", "display_name": "Kundan Sinha", "link": "https://stackoverflow.com/users/6617255/kundan-sinha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 324, "favorite_count": 0, "accepted_answer_id": 38897415, "answer_count": 4, "score": 0, "last_activity_date": 1470921167, "creation_date": 1470202301, "last_edit_date": 1470288451, "question_id": 38735129, "link": "https://stackoverflow.com/questions/38735129/how-to-upload-image-in-ruby-app-folder-and-insert-url-in-database-column", "title": "How to upload image in ruby app folder and insert url in database column", "body": "<blockquote>\n  <p>Controller</p>\n  \n  <h1>Save the object</h1>\n</blockquote>\n\n<p>How to Use This Controller to insert image in any folder and image url store in database<br>\n<code>def create_json</code> </p>\n\n<pre><code>    @user = User.new(userFirstName: params[:userFirstName], userLastName: params[:userLastName], userEmail: params[:userEmail], password: encrypted_password, userImage: params[:userImage])\nif @user.save       #if save succeeds, redirect to the index action\n        redirect_to(:action =&gt; 'show', id: User.last.id)\n        else\n    #if not succeeds, redirect to the index action  \n        redirect_to(:action =&gt; 'new')\n        end end\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "requirejs"], "answers": [{"tags": [], "owner": {"reputation": 473, "user_id": 1843013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/306b59b1ac6f07b59f074f25da587654?s=128&d=identicon&r=PG&f=1", "display_name": "Say.My.Name.", "link": "https://stackoverflow.com/users/1843013/say-my-name"}, "is_accepted": true, "score": 1, "last_activity_date": 1470615530, "creation_date": 1470615530, "answer_id": 38819769, "question_id": 38734730, "link": "https://stackoverflow.com/questions/38734730/requirejs-concatenating-js-but-not-minifying/38819769#38819769", "title": "RequireJS concatenating JS but not minifying", "body": "<p>I found the issue.</p>\n\n<p>There was a syntax error with my JavaScript source that was silently failing the build. It was only when I added <code>logLevel: 0</code> to my requirejs.yml file that I was able to see the error <code>Unexpected token operator \u00ab=\u00bb, expected punc \u00ab,\u00bb (line: 11, col: 37, pos: 276)</code>. </p>\n"}], "owner": {"reputation": 473, "user_id": 1843013, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/306b59b1ac6f07b59f074f25da587654?s=128&d=identicon&r=PG&f=1", "display_name": "Say.My.Name.", "link": "https://stackoverflow.com/users/1843013/say-my-name"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 144, "favorite_count": 0, "accepted_answer_id": 38819769, "answer_count": 1, "score": 4, "last_activity_date": 1470615530, "creation_date": 1470200439, "last_edit_date": 1470278102, "question_id": 38734730, "link": "https://stackoverflow.com/questions/38734730/requirejs-concatenating-js-but-not-minifying", "title": "RequireJS concatenating JS but not minifying", "body": "<p>I'm using <code>requirejs-rails</code> version 0.9.8 on Rails 4.0.13. I'm running into an issue where requirejs is concatenating all of my JS files, but not minifying them.</p>\n\n<p>Here's my requirejs.yml file:</p>\n\n<pre><code>paths:\n  'react'             : 'react/react-with-addons'\n  'react-dom'         : 'react/react-dom'\n  'react-router'      : 'react-router/index'\n  'react-router-shim' : 'react-router-shim/react-router-shim'\n  'jquery'            : 'jquery/dist/jquery'\n  'lodash'            : 'lodash/lodash'\n  'flux'              : 'flux/dist/Flux'\n  'es6-promise'       : 'es6-promise/promise'\n  'event-emitter'     : 'eventemitter2/lib/eventemitter2'\n  'object-assign'     : 'object-assign/object-assign'\n  'async'             : 'requirejs-plugins/src/async'\n  'moment'            : 'moment/min/moment-with-locales.min'\n  'bootstrap'         : 'bootstrap/bootstrap.min'\n  'material'          : 'material-kit/material.min'\n  'material-kit'      : 'material-kit/material-kit'\n  'jquery'            : 'jquery/jquery.min'\n\nshim:\n  'react-router-shim':\n    exports: 'React'\n  'react-router':\n    deps: ['react-router-shim']\n    exports: 'ReactRouter'\n  'material-kit':\n    deps: ['jquery', 'material', 'bootstrap']\n  'material':\n    deps: ['jquery', 'bootstrap']\n  'bootstrap':\n    deps: ['jquery']\n    exports: 'jquery'\n  'lodash':\n    exports: '_'\n  'object-assign':\n    exports: 'ObjectAssign'\n</code></pre>\n\n<p>And after running <code>rake assets:precompile RAILS_ENV=production</code>, I look into <code>public/assets</code> for the <code>application-HASH</code> file and see that it's just a big file with all of the JS concatenating. Here's my <code>production.rb</code> file as well:</p>\n\n<pre><code>  App::Application.configure do\n    # Settings specified here will take precedence over those in config/application.rb.\n\n    # Code is not reloaded between requests.\n    config.cache_classes = true\n\n    # Eager load code on boot. This eager loads most of Rails and\n    # your application in memory, allowing both thread web servers\n    # and those relying on copy on write to perform better.\n    # Rake tasks automatically ignore this option for performance.\n    config.eager_load = true\n\n    # Full error reports are disabled and caching is turned on.\n    config.consider_all_requests_local       = false\n    config.action_controller.perform_caching = true\n\n    # Enable Rack::Cache to put a simple HTTP cache in front of your application\n    # Add `rack-cache` to your Gemfile before enabling this.\n    # For large-scale production use, consider using a caching reverse proxy like nginx, varnish or squid.\n    # config.action_dispatch.rack_cache = true\n\n    # Disable Rails's static asset server (Apache or nginx will already do this).\n    config.serve_static_assets = true\n\n    # Compress JavaScripts and CSS.\n    config.assets.js_compressor = :uglifier\n\n    # config.assets.css_compressor = :sass\n\n    # Do not fallback to assets pipeline if a precompiled asset is missed.\n    config.assets.compile = true\n\n    # Generate digests for assets URLs.\n    config.assets.digest = true\n\n    # Version of your assets, change this if you want to expire all your assets.\n    config.assets.version = '1.1'\n\n    # Specifies the header that your server uses for sending files.\n    # config.action_dispatch.x_sendfile_header = \"X-Sendfile\" # for apache\n    # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for nginx\n\n    # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.\n    config.force_ssl = true\n\n    # Set to :debug to see everything in the log.\n    config.log_level = :info\n\n    # Prepend all log lines with the following tags.\n    # config.log_tags = [ :subdomain, :uuid ]\n\n    # Use a different logger for distributed setups.\n    # config.logger = ActiveSupport::TaggedLogging.new(SyslogLogger.new)\n\n    # Use a different cache store in production.\n    # config.cache_store = :mem_cache_store\n\n    # Enable serving of images, stylesheets, and JavaScripts from an asset server.\n    # config.action_controller.asset_host = \"http://assets.example.com\"\n\n    # Precompile additional assets.\n    # application.js, application.css, and all non-JS/CSS in app/assets folder are already added.\n    # config.assets.precompile += %w( search.js )\n\n    # Ignore bad email addresses and do not raise email delivery errors.\n    # Set this to true and configure the email server for immediate delivery to raise delivery errors.\n    # config.action_mailer.raise_delivery_errors = false\n\n    # Enable locale fallbacks for I18n (makes lookups for any locale fall back to\n    # the I18n.default_locale when a translation can not be found).\n    config.i18n.fallbacks = true\n\n    # Send deprecation notices to registered listeners.\n    config.active_support.deprecation = :notify\n\n    # Disable automatic flushing of the log to improve performance.\n    # config.autoflush_log = false\n\n    # Use default logging formatter so that PID and timestamp are not suppressed.\n    config.log_formatter = ::Logger::Formatter.new\n  end\n</code></pre>\n\n<p><strong>EDIT</strong><br>\nIt looks like <code>requirejs-rails</code> is successfully minifying my JS files individually in my app's <code>tmp/requirejs/dst</code> directory, but these files aren't joined together to create the <code>application-HASH.js</code> file.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1150, "user_id": 5213790, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JsYim.jpg?s=128&g=1", "display_name": "mrvncaragay", "link": "https://stackoverflow.com/users/5213790/mrvncaragay"}, "edited": false, "score": 0, "creation_date": 1470199774, "post_id": 38734607, "comment_id": 64844735, "body": "are you sure when you run <code>rails s</code> that you&#39;re inside the project folder?"}, {"owner": {"reputation": 254, "user_id": 5572701, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4740d7a53f1f97d127912f7db82a2bc9?s=128&d=identicon&r=PG", "display_name": "Umair Iftikhar", "link": "https://stackoverflow.com/users/5572701/umair-iftikhar"}, "reply_to_user": {"reputation": 1150, "user_id": 5213790, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JsYim.jpg?s=128&g=1", "display_name": "mrvncaragay", "link": "https://stackoverflow.com/users/5213790/mrvncaragay"}, "edited": false, "score": 0, "creation_date": 1470199817, "post_id": 38734607, "comment_id": 64844750, "body": "yes I am inside the project folder......"}, {"owner": {"reputation": 1414, "user_id": 3458314, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/0gRzO.jpg?s=128&g=1", "display_name": "hgsongra", "link": "https://stackoverflow.com/users/3458314/hgsongra"}, "edited": false, "score": 0, "creation_date": 1470202323, "post_id": 38734607, "comment_id": 64845681, "body": "provide the output of <code>dir</code> command of your project directory, it look like you are not in your project directory"}, {"owner": {"reputation": 254, "user_id": 5572701, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4740d7a53f1f97d127912f7db82a2bc9?s=128&d=identicon&r=PG", "display_name": "Umair Iftikhar", "link": "https://stackoverflow.com/users/5572701/umair-iftikhar"}, "edited": false, "score": 0, "creation_date": 1470202720, "post_id": 38734607, "comment_id": 64845834, "body": "Yes I was not in project directory but when I change directory. A new error occurred"}, {"owner": {"reputation": 254, "user_id": 5572701, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4740d7a53f1f97d127912f7db82a2bc9?s=128&d=identicon&r=PG", "display_name": "Umair Iftikhar", "link": "https://stackoverflow.com/users/5572701/umair-iftikhar"}, "edited": false, "score": 0, "creation_date": 1470202743, "post_id": 38734607, "comment_id": 64845844, "body": "New error is &quot;Could not find gem &#39;uglifier (&gt;=1.3.0) x86-mingw32&#39; in any of the gem sources listed in your Gemfile or available on this machine."}], "answers": [{"comments": [{"owner": {"reputation": 254, "user_id": 5572701, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4740d7a53f1f97d127912f7db82a2bc9?s=128&d=identicon&r=PG", "display_name": "Umair Iftikhar", "link": "https://stackoverflow.com/users/5572701/umair-iftikhar"}, "edited": false, "score": 0, "creation_date": 1470200070, "post_id": 38734655, "comment_id": 64844843, "body": "I change directory now I am in <code>C:\\Sites\\myrubyblog</code> now I have different error."}, {"owner": {"reputation": 254, "user_id": 5572701, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4740d7a53f1f97d127912f7db82a2bc9?s=128&d=identicon&r=PG", "display_name": "Umair Iftikhar", "link": "https://stackoverflow.com/users/5572701/umair-iftikhar"}, "edited": false, "score": 0, "creation_date": 1470200175, "post_id": 38734655, "comment_id": 64844879, "body": "New error is &quot;Could not find gem &#39;uglifier (&gt;=1.3.0) x86-mingw32&#39; in any of the gem sources listed in your Gemfile or available on this machine."}, {"owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "reply_to_user": {"reputation": 254, "user_id": 5572701, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4740d7a53f1f97d127912f7db82a2bc9?s=128&d=identicon&r=PG", "display_name": "Umair Iftikhar", "link": "https://stackoverflow.com/users/5572701/umair-iftikhar"}, "edited": false, "score": 0, "creation_date": 1470201302, "post_id": 38734655, "comment_id": 64845265, "body": "@UmairIftikhar did you try to install the gem <code>gem install uglifier</code>? Or did you bundle install/update?"}, {"owner": {"reputation": 254, "user_id": 5572701, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4740d7a53f1f97d127912f7db82a2bc9?s=128&d=identicon&r=PG", "display_name": "Umair Iftikhar", "link": "https://stackoverflow.com/users/5572701/umair-iftikhar"}, "edited": false, "score": 0, "creation_date": 1470201429, "post_id": 38734655, "comment_id": 64845329, "body": "I did bundle install but that was also not working. How to install gem?"}], "tags": [], "owner": {"reputation": 1393, "user_id": 6206501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JENfJ.jpg?s=128&g=1", "display_name": "Abhilash Reddy", "link": "https://stackoverflow.com/users/6206501/abhilash-reddy"}, "is_accepted": false, "score": 1, "last_activity_date": 1470199990, "creation_date": 1470199990, "answer_id": 38734655, "question_id": 38734607, "link": "https://stackoverflow.com/questions/38734607/rails-server-is-not-starting-on-windows-10/38734655#38734655", "title": "Rails Server is not starting on Windows 10", "body": "<p>You need to change your directory to the app root folder.For Example if your app name is 'myapp', then type <code>cd myapp</code> and run rails server with <code>rails s</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 2282, "user_id": 2096619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5dd9bce5e0a2c9d52729bf6b73aa043?s=128&d=identicon&r=PG", "display_name": "Fernando Vieira", "link": "https://stackoverflow.com/users/2096619/fernando-vieira"}, "edited": false, "score": 0, "creation_date": 1496433093, "post_id": 38735615, "comment_id": 75676743, "body": "this is not the solution for the problem. My devkit is setup but still rails server doesn&#180;t start. Temporary running server running puma directly"}, {"owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "edited": false, "score": 0, "creation_date": 1496454836, "post_id": 38735615, "comment_id": 75682626, "body": "You can share what is displayed in terminal or cmd then we can find problem. Answer is for how to install uglifier gem."}], "tags": [], "owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "is_accepted": true, "score": 1, "last_activity_date": 1496454909, "last_edit_date": 1496454909, "creation_date": 1470204278, "answer_id": 38735615, "question_id": 38734607, "link": "https://stackoverflow.com/questions/38734607/rails-server-is-not-starting-on-windows-10/38735615#38735615", "title": "Rails Server is not starting on Windows 10", "body": "<p><strong>The problem my be caused due to following (Unable to Install gems)</strong></p>\n\n<p>if you are using latest version of ruby installer to install ruby then there are problem for installing  nokogiri and ulifier or other gem which needs to compailing in your pc. so you needs to install devkit first. For this please  do following:</p>\n\n<p>The download is a self-extracting archive. When you execute the file, it\u2019ll ask you for a destination for the files. Enter a path that has no spaces in it. We recommend something simple, like <code>C:\\RubyDevKit\\</code>. Click Extract and wait until the process is finished.\n<a href=\"http://rubyinstaller.org/downloads/\" rel=\"nofollow noreferrer\">Download from here</a></p>\n\n<p>Next, you need to initialize the DevKit and bind it to your Ruby installation. Open your favorite command line tool and navigate to the folder you extracted the DevKit into.</p>\n\n<pre><code>cd C:\\RubyDevKit\n</code></pre>\n\n<p>Auto-detect Ruby installations and add them to a configuration file for the next step.</p>\n\n<pre><code>ruby dk.rb init\n</code></pre>\n\n<p>Install the DevKit, binding it to your Ruby installation.</p>\n\n<pre><code>ruby dk.rb install\n</code></pre>\n\n<p>Now run bundle install</p>\n\n<p>If still problem persist downgrade your ruby or install linux distro.</p>\n"}, {"tags": [], "owner": {"reputation": 2282, "user_id": 2096619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5dd9bce5e0a2c9d52729bf6b73aa043?s=128&d=identicon&r=PG", "display_name": "Fernando Vieira", "link": "https://stackoverflow.com/users/2096619/fernando-vieira"}, "is_accepted": false, "score": 0, "last_activity_date": 1496435599, "creation_date": 1496435599, "answer_id": 44337028, "question_id": 38734607, "link": "https://stackoverflow.com/questions/38734607/rails-server-is-not-starting-on-windows-10/44337028#44337028", "title": "Rails Server is not starting on Windows 10", "body": "<p>Check if the bin/rails file is in place. If not, generate a new sample app, then copy the bin folder to it.</p>\n"}], "owner": {"reputation": 254, "user_id": 5572701, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4740d7a53f1f97d127912f7db82a2bc9?s=128&d=identicon&r=PG", "display_name": "Umair Iftikhar", "link": "https://stackoverflow.com/users/5572701/umair-iftikhar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1529, "favorite_count": 0, "accepted_answer_id": 38735615, "answer_count": 3, "score": 1, "last_activity_date": 1496454909, "creation_date": 1470199644, "question_id": 38734607, "link": "https://stackoverflow.com/questions/38734607/rails-server-is-not-starting-on-windows-10", "title": "Rails Server is not starting on Windows 10", "body": "<p>I am using windows 10. I install Rails and other supporting software via railsinstaller.org website. </p>\n\n<p>Now I go on CMD and writing command <code>rails server</code> but Rails server not starting work. when I open link in firefox <a href=\"http://localhost:3000\" rel=\"nofollow noreferrer\">http://localhost:3000</a></p>\n\n<p>Following is snapshot of output when I write <code>rails s</code> in cmd. I have Rails 4.2.5.1 in my PC and using Windows 10</p>\n\n<p><a href=\"https://i.stack.imgur.com/mI9nf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mI9nf.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["sql", "ruby", "database", "multithreading", "postgresql"], "answers": [{"comments": [{"owner": {"reputation": 1269, "user_id": 2780649, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/iOQEv.png?s=128&g=1", "display_name": "satnam", "link": "https://stackoverflow.com/users/2780649/satnam"}, "edited": false, "score": 0, "creation_date": 1470204339, "post_id": 38735467, "comment_id": 64846505, "body": "Oh! Great catch! &quot;objects&quot; should be &quot;photos&quot; because, well &quot;objects&quot; isn&#39;t anything I just changed names to obfuscate the real names. But thanks for pointing it out"}, {"owner": {"reputation": 821, "user_id": 1166593, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd1b53c45386ed7ac737bdd65b1f9fe2?s=128&d=identicon&r=PG", "display_name": "AlexN", "link": "https://stackoverflow.com/users/1166593/alexn"}, "reply_to_user": {"reputation": 1269, "user_id": 2780649, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/iOQEv.png?s=128&g=1", "display_name": "satnam", "link": "https://stackoverflow.com/users/2780649/satnam"}, "edited": false, "score": 0, "creation_date": 1470205766, "post_id": 38735467, "comment_id": 64847224, "body": "The second thing is that if queue is larger than 100 you do nothing with the <code>objects</code>."}, {"owner": {"reputation": 1269, "user_id": 2780649, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/iOQEv.png?s=128&g=1", "display_name": "satnam", "link": "https://stackoverflow.com/users/2780649/satnam"}, "edited": false, "score": 0, "creation_date": 1470206578, "post_id": 38735467, "comment_id": 64847623, "body": "So I updated my code with yours and I&#39;m still seeing rows being skipped. I updated my original post too to reflect how my script looks now. I agree that I was missing a crucial piece in my code but still about 33% of the rows are being skipped"}, {"owner": {"reputation": 821, "user_id": 1166593, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd1b53c45386ed7ac737bdd65b1f9fe2?s=128&d=identicon&r=PG", "display_name": "AlexN", "link": "https://stackoverflow.com/users/1166593/alexn"}, "reply_to_user": {"reputation": 1269, "user_id": 2780649, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/iOQEv.png?s=128&g=1", "display_name": "satnam", "link": "https://stackoverflow.com/users/2780649/satnam"}, "edited": false, "score": 0, "creation_date": 1470207194, "post_id": 38735467, "comment_id": 64847956, "body": "Use a real queue instead of a simple array, i update my answer."}, {"owner": {"reputation": 1269, "user_id": 2780649, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/iOQEv.png?s=128&g=1", "display_name": "satnam", "link": "https://stackoverflow.com/users/2780649/satnam"}, "edited": false, "score": 0, "creation_date": 1470207801, "post_id": 38735467, "comment_id": 64848276, "body": "Yes, just tried that. Still skipping. The results improved slightly though. Now skips about 28%. Thats a ~5% improvement."}, {"owner": {"reputation": 821, "user_id": 1166593, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd1b53c45386ed7ac737bdd65b1f9fe2?s=128&d=identicon&r=PG", "display_name": "AlexN", "link": "https://stackoverflow.com/users/1166593/alexn"}, "reply_to_user": {"reputation": 1269, "user_id": 2780649, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/iOQEv.png?s=128&g=1", "display_name": "satnam", "link": "https://stackoverflow.com/users/2780649/satnam"}, "edited": false, "score": 0, "creation_date": 1470207916, "post_id": 38735467, "comment_id": 64848331, "body": "add collector.join at the end."}, {"owner": {"reputation": 1269, "user_id": 2780649, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/iOQEv.png?s=128&g=1", "display_name": "satnam", "link": "https://stackoverflow.com/users/2780649/satnam"}, "edited": false, "score": 0, "creation_date": 1470208210, "post_id": 38735467, "comment_id": 64848472, "body": "Yes, just tried that too. Still skipping. Also I updated my script in the original answer to reflect exactly how it looks now"}, {"owner": {"reputation": 821, "user_id": 1166593, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd1b53c45386ed7ac737bdd65b1f9fe2?s=128&d=identicon&r=PG", "display_name": "AlexN", "link": "https://stackoverflow.com/users/1166593/alexn"}, "reply_to_user": {"reputation": 1269, "user_id": 2780649, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/iOQEv.png?s=128&g=1", "display_name": "satnam", "link": "https://stackoverflow.com/users/2780649/satnam"}, "edited": false, "score": 0, "creation_date": 1470208262, "post_id": 38735467, "comment_id": 64848499, "body": "Join the consumer, too."}, {"owner": {"reputation": 1269, "user_id": 2780649, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/iOQEv.png?s=128&g=1", "display_name": "satnam", "link": "https://stackoverflow.com/users/2780649/satnam"}, "edited": false, "score": 0, "creation_date": 1470208742, "post_id": 38735467, "comment_id": 64848720, "body": "Yes just tried it with consumer and join. Still skipping and I get the error saying that each is not defined for type Queue on the all_threads.each line. I guess we&#39;ll have to use a simple array for that right?"}, {"owner": {"reputation": 821, "user_id": 1166593, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd1b53c45386ed7ac737bdd65b1f9fe2?s=128&d=identicon&r=PG", "display_name": "AlexN", "link": "https://stackoverflow.com/users/1166593/alexn"}, "reply_to_user": {"reputation": 1269, "user_id": 2780649, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/iOQEv.png?s=128&g=1", "display_name": "satnam", "link": "https://stackoverflow.com/users/2780649/satnam"}, "edited": false, "score": 0, "creation_date": 1470208892, "post_id": 38735467, "comment_id": 64848810, "body": "since you are only accessing it within the consumer and after the consumer is finished an array is ok."}, {"owner": {"reputation": 821, "user_id": 1166593, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd1b53c45386ed7ac737bdd65b1f9fe2?s=128&d=identicon&r=PG", "display_name": "AlexN", "link": "https://stackoverflow.com/users/1166593/alexn"}, "reply_to_user": {"reputation": 1269, "user_id": 2780649, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/iOQEv.png?s=128&g=1", "display_name": "satnam", "link": "https://stackoverflow.com/users/2780649/satnam"}, "edited": false, "score": 0, "creation_date": 1470208929, "post_id": 38735467, "comment_id": 64848827, "body": "how much you are still missing?"}, {"owner": {"reputation": 1269, "user_id": 2780649, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/iOQEv.png?s=128&g=1", "display_name": "satnam", "link": "https://stackoverflow.com/users/2780649/satnam"}, "edited": false, "score": 0, "creation_date": 1470209172, "post_id": 38735467, "comment_id": 64848960, "body": "Its been a ton of improvement actually. About 8% is still missing"}, {"owner": {"reputation": 821, "user_id": 1166593, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd1b53c45386ed7ac737bdd65b1f9fe2?s=128&d=identicon&r=PG", "display_name": "AlexN", "link": "https://stackoverflow.com/users/1166593/alexn"}, "reply_to_user": {"reputation": 1269, "user_id": 2780649, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/iOQEv.png?s=128&g=1", "display_name": "satnam", "link": "https://stackoverflow.com/users/2780649/satnam"}, "edited": false, "score": 0, "creation_date": 1470209385, "post_id": 38735467, "comment_id": 64849069, "body": "the <code>while queue.length &gt; 0</code> in the consumer is still a problem."}, {"owner": {"reputation": 1269, "user_id": 2780649, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/iOQEv.png?s=128&g=1", "display_name": "satnam", "link": "https://stackoverflow.com/users/2780649/satnam"}, "edited": false, "score": 0, "creation_date": 1470209493, "post_id": 38735467, "comment_id": 64849137, "body": "Why do you think that is the problem? What am I missing?"}, {"owner": {"reputation": 1269, "user_id": 2780649, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/iOQEv.png?s=128&g=1", "display_name": "satnam", "link": "https://stackoverflow.com/users/2780649/satnam"}, "edited": false, "score": 0, "creation_date": 1470210274, "post_id": 38735467, "comment_id": 64849570, "body": "Holy Shit that worked! 100% rows getting updated! You&#39;re an absolute multithreading beast! Can I endorse you in LinkedIn or something? lol"}, {"owner": {"reputation": 1269, "user_id": 2780649, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/iOQEv.png?s=128&g=1", "display_name": "satnam", "link": "https://stackoverflow.com/users/2780649/satnam"}, "edited": false, "score": 0, "creation_date": 1470210333, "post_id": 38735467, "comment_id": 64849599, "body": "Also just for my knowledge&#39;d sake can you explain why <code>while queue.length &gt; 0</code> was a problem? I still don&#39;t understand"}, {"owner": {"reputation": 821, "user_id": 1166593, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd1b53c45386ed7ac737bdd65b1f9fe2?s=128&d=identicon&r=PG", "display_name": "AlexN", "link": "https://stackoverflow.com/users/1166593/alexn"}, "reply_to_user": {"reputation": 1269, "user_id": 2780649, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/iOQEv.png?s=128&g=1", "display_name": "satnam", "link": "https://stackoverflow.com/users/2780649/satnam"}, "edited": false, "score": 0, "creation_date": 1470210484, "post_id": 38735467, "comment_id": 64849685, "body": "because the queue could become empty even though the collector is still adding new items to it, because the consumer is just faster than the collector."}, {"owner": {"reputation": 1269, "user_id": 2780649, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/iOQEv.png?s=128&g=1", "display_name": "satnam", "link": "https://stackoverflow.com/users/2780649/satnam"}, "edited": false, "score": 0, "creation_date": 1470210739, "post_id": 38735467, "comment_id": 64849832, "body": "makes sense. Anyways just wanted to say that you&#39;re help was like Godsend tonight. Much appreciated! Thank You!"}, {"owner": {"reputation": 1269, "user_id": 2780649, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/iOQEv.png?s=128&g=1", "display_name": "satnam", "link": "https://stackoverflow.com/users/2780649/satnam"}, "edited": false, "score": 0, "creation_date": 1470258918, "post_id": 38735467, "comment_id": 64881313, "body": "one last question. Why did you remove <code>consumer.join</code> from your code? If I remove it, it skips rows. If I keep it gives me <code>No live threads left. Deadlock? (fatal)</code> on the line where I add it (I add it after <code>collector.join</code> and before <code>all_threads.each...</code>. Any ideas?"}, {"owner": {"reputation": 821, "user_id": 1166593, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd1b53c45386ed7ac737bdd65b1f9fe2?s=128&d=identicon&r=PG", "display_name": "AlexN", "link": "https://stackoverflow.com/users/1166593/alexn"}, "reply_to_user": {"reputation": 1269, "user_id": 2780649, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/iOQEv.png?s=128&g=1", "display_name": "satnam", "link": "https://stackoverflow.com/users/2780649/satnam"}, "edited": false, "score": 0, "creation_date": 1470301906, "post_id": 38735467, "comment_id": 64897990, "body": "you stil have <code>while queue.length &gt; 0</code> in your code, please update your code. Then i can look at it again."}], "tags": [], "owner": {"reputation": 821, "user_id": 1166593, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/fd1b53c45386ed7ac737bdd65b1f9fe2?s=128&d=identicon&r=PG", "display_name": "AlexN", "link": "https://stackoverflow.com/users/1166593/alexn"}, "is_accepted": true, "score": 1, "last_activity_date": 1470209611, "last_edit_date": 1470209611, "creation_date": 1470203704, "answer_id": 38735467, "question_id": 38734390, "link": "https://stackoverflow.com/questions/38734390/db-update-script-skips-rows-to-update-if-i-use-multithreading/38735467#38735467", "title": "DB update script skips rows to update if I use multithreading", "body": "<p>I think you have an error in your collector.</p>\n\n<p>When the queue length is larger than 100 you are simply throwing your data away and <code>queue.push(photos)</code> should be <code>queue.push(objects)</code>.</p>\n\n<pre><code>        if queue.length &gt;= 100\n            progress_logger.info(\"Queue length limit reached. Sleeping Collector\")\n            sleep(5)\n        else\n            queue.push(photos)\n            progress_logger.info(\"Pushing to Queue. FROM: #{lower_limit} TO: #{upper_limit}\")\n        end\n</code></pre>\n\n<p>You probably want something like this:</p>\n\n<pre><code>queue = Queue.new\n...\n        while queue.length &gt;= 100\n            progress_logger.info(\"Queue length limit reached. Sleeping Collector\")\n            sleep(5)\n        end\n\n        queue.push(objects)\n        progress_logger.info(\"Pushing to Queue. FROM: #{lower_limit} TO: #{upper_limit}\")\n\n...\n\nall_threads = []\n\nconsumer = Thread.new {\n  loop {\n  if num_threads &lt;= 15\n    objects_block = queue.shift\n\n    all_threads &lt;&lt; Thread.new {\n      num_threads += 1\n      update_objects(objects_block, updater_logger, error_logger)\n      num_threads -= 1\n    }\n  else\n    progress_logger.info(\"Threads limit reached. Sleeping Updater\")\n    sleep(1)\n  end\n  }\n}\n\ncollector.join\n\nwhile !queue.empty?\n  sleep(10)\nend\n\nall_threads.each do |thread|\n  thread.join\nend\n</code></pre>\n"}], "owner": {"reputation": 1269, "user_id": 2780649, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/iOQEv.png?s=128&g=1", "display_name": "satnam", "link": "https://stackoverflow.com/users/2780649/satnam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 38735467, "answer_count": 1, "score": 0, "last_activity_date": 1470209611, "creation_date": 1470198273, "last_edit_date": 1470208897, "question_id": 38734390, "link": "https://stackoverflow.com/questions/38734390/db-update-script-skips-rows-to-update-if-i-use-multithreading", "title": "DB update script skips rows to update if I use multithreading", "body": "<p>I have a table that has about 40 million rows (about 120 million IDs) and I need to update some of the rows using a script that I wrote in Ruby. My DB is a PostgreSQL DB.</p>\n\n<p>The problem that I'm having is that if I write a single threaded script, it runs very very slow (since it has to update each row separately, and there is time lost in opening and closing the connection). On the positive side, it successfully updates all the rows.</p>\n\n<p>So to speed it up, I thought I'd write a multithreaded script so that I could utilize multiple connections. But the problem now is that some of the rows are just not updated without telling me why (my script has exception handling). </p>\n\n<p>Here is my script that uses multithreading.</p>\n\n<pre><code>require 'sequel'\nrequire 'logger'\n......\n\nDB = Sequel.connect('DB Credentials') # max connections = 20\n\n\nstarting_id = 1\ntotal_objects = 120061827\n\nqueue = Queue.new\nThread.abort_on_exception = true\n\ncollector = Thread.new {\n    (starting_id..total_objects).step(100000) do |id|\n        lower_limit = id\n        upper_limit = id + 100000\n        if upper_limit &gt; total_objects\n            upper_limit = total_objects + 1\n        end\n\n        objects = DB[\"\n            SELECT id, extra_fields\n            FROM table\n            WHERE json_typeof(extra_fields-&gt;'field') = 'object'\n            AND id &gt;= #{lower_limit}\n            AND id &lt; #{upper_limit}\n        \"]\n\n        while queue.length &gt;= 100\n            progress_logger.info(\"Queue length limit reached. Sleeping Collector\")\n            sleep(5)\n        end\n\n        queue.push(objects)\n        progress_logger.info(\"Pushing to Queue. FROM: #{lower_limit} TO: #{upper_limit}\")\n    end\n    Thread.exit\n}\n\ndef update_extra_fields(object, extra_fields, updater_logger, error_logger)\n    begin\n        update_query = DB[\"\n            UPDATE table\n            SET extra_fields = '#{JSON.generate(extra_fields)}'\n            WHERE id = #{object[:id]}\n        \"]\n\n        update_result = update_query.update\n        updater_logger.info(\"Updated Photo ID: #{object[:id]}\") if update_result == 1\n    rescue Sequel::Error =&gt; e\n        error_logger.info(\"Could not update 'extra_fields' for #{object[:id]} because #{e.message}\")\n    end\nend\n\ndef construct_new_tags(tags)\n    #logic\n    return new_tags\nend\n\ndef update_objects(objects, updater_logger, error_logger)\n    objects.each do |object|\n        extra_fields = JSON.parse(object[:extra_fields])\n        tags = extra_fields[\"field\"]\n        new_tags = construct_new_tags(tags)\n        extra_fields[\"new_field\"] = new_tags\n        update_extra_fields(object, extra_fields, updater_logger, error_logger)\n    end\nend\n\nnum_threads = 0\nall_threads = []\nconsumer = Thread.new {\n    while queue.length &gt; 0\n        if num_threads &lt;= 15\n            objects_block = queue.shift\n\n            all_threads &lt;&lt; Thread.new {\n                num_threads += 1\n                update_objects(objects_block, updater_logger, error_logger)\n                num_threads -= 1\n            }\n        else\n            progress_logger.info(\"Threads limit reached. Sleeping Updater\")\n            sleep(1)\n        end\n    end\n}\n\ncollector.join\nconsumer.join    \nall_threads.each do |thread|\n    thread.join\nend\n\n\nputs \"Queue END reached: EXIT\"\n</code></pre>\n\n<ol>\n<li>Nothing ever gets logged in the error_logger</li>\n<li>The number of rows updated each time I run the script is different. So I'm confident that there isn't a specific pattern that I'm missing rows to update etc.</li>\n<li>If I write a single threaded script that follows the same logic. All the rows are successfully updates.</li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby", "if-statement", "syntax"], "comments": [{"owner": {"reputation": 1150, "user_id": 5213790, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JsYim.jpg?s=128&g=1", "display_name": "mrvncaragay", "link": "https://stackoverflow.com/users/5213790/mrvncaragay"}, "edited": false, "score": 6, "creation_date": 1470197237, "post_id": 38734185, "comment_id": 64844016, "body": "i dont see any problem with that code. it&#39;s prolly inside partial.."}, {"owner": {"reputation": 658, "user_id": 4184843, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/euuGW.jpg?s=128&g=1", "display_name": "Canh", "link": "https://stackoverflow.com/users/4184843/canh"}, "edited": false, "score": 1, "creation_date": 1470198081, "post_id": 38734185, "comment_id": 64844271, "body": "Maybe you miss some <code>end</code> somewhere else above this code, perhaps an <code>end</code> for another <code>if</code>, and rails think that that <code>if</code> block hasn&#39;t ended yet until it sees this <code>if</code> here and raises an error at wrong place."}, {"owner": {"reputation": 10621, "user_id": 312907, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/9decae0c588d499686dfbfe3b1072914?s=128&d=identicon&r=PG", "display_name": "Francesco Belladonna", "link": "https://stackoverflow.com/users/312907/francesco-belladonna"}, "edited": false, "score": 1, "creation_date": 1470200786, "post_id": 38734185, "comment_id": 64845074, "body": "One <code>end</code> per <code>if</code> by the way, no <code>end</code> for <code>else</code> or <code>elsif</code>, you just need one per <code>if</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1249, "user_id": 5224982, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/20a0ec1c0a5a8a9e5690fb30e7cb4a01?s=128&d=identicon&r=PG&f=1", "display_name": "Muaaz Rafi", "link": "https://stackoverflow.com/users/5224982/muaaz-rafi"}, "is_accepted": true, "score": 0, "last_activity_date": 1470201432, "creation_date": 1470201432, "answer_id": 38734937, "question_id": 38734185, "link": "https://stackoverflow.com/questions/38734185/rails-how-many-times-to-write-end-after-if-else-condition/38734937#38734937", "title": "Rails - how many times to write &lt;%end%&gt; after if else condition", "body": "<p>There is only one &lt;% end %> required per if condition. Please paste in log so we can have closer look. </p>\n"}, {"tags": [], "owner": {"reputation": 183, "user_id": 6483534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e412bcc5112603d95c87d380a48f43c?s=128&d=identicon&r=PG&f=1", "display_name": "PS.", "link": "https://stackoverflow.com/users/6483534/ps"}, "is_accepted": false, "score": 1, "last_activity_date": 1470202780, "creation_date": 1470202780, "answer_id": 38735244, "question_id": 38734185, "link": "https://stackoverflow.com/questions/38734185/rails-how-many-times-to-write-end-after-if-else-condition/38735244#38735244", "title": "Rails - how many times to write &lt;%end%&gt; after if else condition", "body": "<p>The code seems to be fine as it is currently. You only need one <code>&lt;% end %&gt;</code> for if/elsif/else block of condition. </p>\n"}], "owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 38734937, "answer_count": 2, "score": 1, "last_activity_date": 1470206370, "creation_date": 1470196841, "last_edit_date": 1470206370, "question_id": 38734185, "link": "https://stackoverflow.com/questions/38734185/rails-how-many-times-to-write-end-after-if-else-condition", "title": "Rails - how many times to write &lt;%end%&gt; after if else condition", "body": "<p>I'm trying to figure out an error message in my production mode. It's referring to a syntax error saying I'm missing keyword end and pointing to a line around about this block of code.</p>\n\n<p>Do I need to write <code>&lt;% end %&gt;</code> again? Do I need it once for the <code>if</code> and once again for the <code>else</code>?</p>\n\n<pre><code>&lt;ul id=\"nav\" class=\"row nopadding cd-side-navigation\"&gt;\n  &lt;% if logged_in_as?(@profile) %&gt;\n    &lt;%= render 'profiles/menu_owner', profile: @profile %&gt;   \n  &lt;% else %&gt;\n    &lt;%= render 'profiles/menu_visitor', profile: @profile %&gt; \n  &lt;% end %&gt;\n&lt;/ul&gt;\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 2, "creation_date": 1470197265, "post_id": 38734170, "comment_id": 64844021, "body": "Hi M, it would help if you would include the expected output, it would help to clean up some of your formatting errors."}, {"owner": {"reputation": 11, "user_id": 6158697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aa45e0ee61d907fcc16ddfb35837583?s=128&d=identicon&r=PG&f=1", "display_name": "M Canterel", "link": "https://stackoverflow.com/users/6158697/m-canterel"}, "edited": false, "score": 0, "creation_date": 1470199997, "post_id": 38734170, "comment_id": 64844816, "body": "Sorry folks. I&#39;m just catching on to the formatting. Hopefully I cleaned it up (w the help of Vlad)- M"}], "answers": [{"tags": [], "owner": {"reputation": 934, "user_id": 3589799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2eee47e029f07a4c79c52ea377e27?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/3589799/vlad"}, "is_accepted": false, "score": 0, "last_activity_date": 1470197630, "creation_date": 1470197630, "answer_id": 38734292, "question_id": 38734170, "link": "https://stackoverflow.com/questions/38734170/iterate-conditionally-through-array/38734292#38734292", "title": "Iterate conditionally through array", "body": "<p>Based on the output your function gives me, with <code>%w(101 This is the first label 102 This is the second label 103 This is the third label 104 This is the fourth label).each { |x| puts x }</code> or using <code>map</code> I get the same result. It would help if you can post your expected output.</p>\n"}, {"comments": [{"owner": {"reputation": 934, "user_id": 3589799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2eee47e029f07a4c79c52ea377e27?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/3589799/vlad"}, "edited": false, "score": 0, "creation_date": 1470199018, "post_id": 38734411, "comment_id": 64844513, "body": "That&#39;s a pretty good use of a regex. But that assumes the array should always break when its numeric. Good answer nonetheless. +1"}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "reply_to_user": {"reputation": 934, "user_id": 3589799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77d2eee47e029f07a4c79c52ea377e27?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad", "link": "https://stackoverflow.com/users/3589799/vlad"}, "edited": false, "score": 1, "creation_date": 1470199094, "post_id": 38734411, "comment_id": 64844527, "body": "Thanks @Vlad. It makes some strong assumptions about the input, but I can only work off of whatever information is available in the original question!"}, {"owner": {"reputation": 11, "user_id": 6158697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aa45e0ee61d907fcc16ddfb35837583?s=128&d=identicon&r=PG&f=1", "display_name": "M Canterel", "link": "https://stackoverflow.com/users/6158697/m-canterel"}, "edited": false, "score": 0, "creation_date": 1470200828, "post_id": 38734411, "comment_id": 64845092, "body": "Thanks mwp. I guess I&#39;m relying too much on the basic Array class docs at ruby-doc.org.  I found info on #slice_when and #slice_between on the ruby-lang.org. But I&#39;m confused: when I enter Array.methods, shouldn&#39;t slice_when, which Array should inherit from Enumerable, show up? It doesn&#39;t..."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 0, "creation_date": 1470201081, "post_id": 38734411, "comment_id": 64845176, "body": "Try <code>Array.instance_methods</code>. :-)"}], "tags": [], "owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "is_accepted": false, "score": 1, "last_activity_date": 1470201591, "last_edit_date": 1470201591, "creation_date": 1470198408, "answer_id": 38734411, "question_id": 38734170, "link": "https://stackoverflow.com/questions/38734170/iterate-conditionally-through-array/38734411#38734411", "title": "Iterate conditionally through array", "body": "<p>This will iterate through the array two elements at a time and \"break\" (slice) it when the right-hand side is a number (or as it's written, when the right-hand side does not contain any non-digit characters). Hope this helps!</p>\n\n<pre><code>test_ary.slice_when { |_, r| r !~ /\\D/ }.map { |w| w.join(' ') }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 2, "creation_date": 1470201518, "post_id": 38734706, "comment_id": 64845373, "body": "Quite nice! I like this better than slice_when. slice_before can take a pattern argument so it can be simplified a bit to <code>words.slice_before(&#47;\\d&#47;)</code>."}], "tags": [], "owner": {"reputation": 187800, "user_id": 320615, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/65c80e12b6a33913538653f6d4ef1277?s=128&d=identicon&r=PG", "display_name": "Dogbert", "link": "https://stackoverflow.com/users/320615/dogbert"}, "is_accepted": false, "score": 3, "last_activity_date": 1470234523, "last_edit_date": 1470234523, "creation_date": 1470200270, "answer_id": 38734706, "question_id": 38734170, "link": "https://stackoverflow.com/questions/38734170/iterate-conditionally-through-array/38734706#38734706", "title": "Iterate conditionally through array", "body": "<p>I would use <code>Enumerable#slice_before</code>:</p>\n\n<pre><code>test_ary.slice_before { |w| w =~ /\\d/ }.map { |ws| ws.join(\" \") }\n# =&gt; [\"101 This is the first label\", \"102 This is the second label\", \"103 This is the third label\", \"104 This is the fourth label\"]\n</code></pre>\n\n<p>Edit: As @mwp said, you can make this even shorter:</p>\n\n<pre><code>test_ary.slice_before(/\\d/).map { |ws| ws.join(\" \") }\n# =&gt; [\"101 This is the first label\", \"102 This is the second label\", \"103 This is the third label\", \"104 This is the fourth label\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 6158697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aa45e0ee61d907fcc16ddfb35837583?s=128&d=identicon&r=PG&f=1", "display_name": "M Canterel", "link": "https://stackoverflow.com/users/6158697/m-canterel"}, "edited": false, "score": 0, "creation_date": 1470201965, "post_id": 38734732, "comment_id": 64845538, "body": "Thx muda. Using regex goes a long long way"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 11, "user_id": 6158697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aa45e0ee61d907fcc16ddfb35837583?s=128&d=identicon&r=PG&f=1", "display_name": "M Canterel", "link": "https://stackoverflow.com/users/6158697/m-canterel"}, "edited": false, "score": 0, "creation_date": 1470202242, "post_id": 38734732, "comment_id": 64845652, "body": "Welcome erel, I am unable to understand what you meant, though."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1470200446, "creation_date": 1470200446, "answer_id": 38734732, "question_id": 38734170, "link": "https://stackoverflow.com/questions/38734170/iterate-conditionally-through-array/38734732#38734732", "title": "Iterate conditionally through array", "body": "<pre><code>\u25b6 test_ary.join(' ').split(/ (?=\\d)/)\n#\u21d2 [\n#  [0] \"101 This is the first label\",\n#  [1] \"102 This is the second label\",\n#  [2] \"103 This is the third label\",\n#  [3] \"104 This is the fourth label\"\n# ]\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6158697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1aa45e0ee61d907fcc16ddfb35837583?s=128&d=identicon&r=PG&f=1", "display_name": "M Canterel", "link": "https://stackoverflow.com/users/6158697/m-canterel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1470295226, "creation_date": 1470196748, "last_edit_date": 1470234317, "question_id": 38734170, "link": "https://stackoverflow.com/questions/38734170/iterate-conditionally-through-array", "title": "Iterate conditionally through array", "body": "<p>I want to break an array into an array of arrays.</p>\n\n<pre><code>test_ary = %w(101 This is the first label 102 This is the second label 103 This is\nthe third label 104 This is the fourth label)\n\nresult = iterate_array(test_ary)\n</code></pre>\n\n<p>Expected output:</p>\n\n<pre><code>#\u21d2\u00a0[\n#    \"101 This is the first label\",\n#    \"102 This is the second label\",\n#    \"103 This is the third label\",\n#    \"104 This is the fourth label\" ]\n</code></pre>\n\n<p>I wrote the following method:</p>\n\n<pre><code>def iterate_array(ary)\n  temp_ary = []\n  final_ary =[]\n  idx = 0\n    temp_ary.push ary[idx]\n    idx +=1\n    done = ary.length - 1\n    while idx &lt;= done\n        if ary[idx] =~ /\\d/\n            final_ary.push temp_ary\n            temp_ary = []\n            temp_ary.push ary[idx]\n        else\n            temp_ary.push ary[idx]\n        end\n        idx +=1\n    end\n    final_ary.push temp_ary\n    returned_ary=final_ary.map {|nested_ary| nested_ary.join(\" \")}\n    returned_ary\nend\n</code></pre>\n\n<p>I think there must be an easier and more elegant way. Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "paperclip"], "answers": [{"comments": [{"owner": {"reputation": 221, "user_id": 5535908, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ff8ecf8d47500eb8a5269b8a0cc5dc8e?s=128&d=identicon&r=PG&f=1", "display_name": "GVS", "link": "https://stackoverflow.com/users/5535908/gvs"}, "edited": false, "score": 0, "creation_date": 1470196615, "post_id": 38734140, "comment_id": 64843865, "body": "Unfortunately, that did not work for me."}, {"owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "reply_to_user": {"reputation": 221, "user_id": 5535908, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ff8ecf8d47500eb8a5269b8a0cc5dc8e?s=128&d=identicon&r=PG&f=1", "display_name": "GVS", "link": "https://stackoverflow.com/users/5535908/gvs"}, "edited": false, "score": 0, "creation_date": 1470196735, "post_id": 38734140, "comment_id": 64843887, "body": "@GVS, Do you have image for <code>missing.png</code> on the said urls?"}, {"owner": {"reputation": 221, "user_id": 5535908, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ff8ecf8d47500eb8a5269b8a0cc5dc8e?s=128&d=identicon&r=PG&f=1", "display_name": "GVS", "link": "https://stackoverflow.com/users/5535908/gvs"}, "edited": false, "score": 0, "creation_date": 1470196837, "post_id": 38734140, "comment_id": 64843914, "body": "Yes. If you mean did I also create a new path &quot;app/assets/images/style/missing.png&quot;"}], "tags": [], "owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "is_accepted": false, "score": 0, "last_activity_date": 1470200990, "last_edit_date": 1470200990, "creation_date": 1470196549, "answer_id": 38734140, "question_id": 38734116, "link": "https://stackoverflow.com/questions/38734116/ruby-paperclip-how-to-get-missing-png-to-work/38734140#38734140", "title": "Ruby/Paperclip: How to get missing.png to work?", "body": "<p>Instead of:</p>\n\n<pre><code>default_url: \"/images/:style/missing.png\"\n</code></pre>\n\n<p>Try:</p>\n\n<pre><code>default_url: \"/:style/missing.png\"\n</code></pre>\n"}], "owner": {"reputation": 221, "user_id": 5535908, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ff8ecf8d47500eb8a5269b8a0cc5dc8e?s=128&d=identicon&r=PG&f=1", "display_name": "GVS", "link": "https://stackoverflow.com/users/5535908/gvs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 677, "favorite_count": 0, "closed_date": 1564979536, "answer_count": 1, "score": 0, "last_activity_date": 1470200990, "creation_date": 1470196422, "question_id": 38734116, "link": "https://stackoverflow.com/questions/38734116/ruby-paperclip-how-to-get-missing-png-to-work", "closed_reason": "Duplicate", "title": "Ruby/Paperclip: How to get missing.png to work?", "body": "<p>I am creating user avatars. I am having trouble getting the \"missing.png\" to show up. For users who decided not to upload a profile picture, I have created a default image to be displayed. Below is what I got so far. Please show me what I am doing wrong.</p>\n\n<p><strong>user.rb</strong></p>\n\n<pre><code>  has_attached_file :avatar, styles: { large: \"800x800&gt;\", medium: \"300x300&gt;\", thumb: \"50x50&gt;\" }, default_url: \"/images/:style/missing.png\"\n  validates_attachment_content_type :avatar, content_type: /\\Aimage\\/.*\\Z/\n</code></pre>\n\n<p><strong>posts/index.html.erb</strong> (Shows all posts by all users, for the moment)</p>\n\n<pre><code>&lt;%= link_to(image_tag(post.user.avatar.url(:medium)), user_path(post.user.username)) %&gt;\n</code></pre>\n\n<p><strong>users/show.html.erb</strong> (This is the user's profile page)</p>\n\n<pre><code>&lt;%= image_tag @user.avatar.url(:medium) %&gt;\n</code></pre>\n\n<p><strong>\"missing.png\"</strong></p>\n\n<p>Images: <code>app/assets/images/missing.png</code></p>\n\n<p>Thumb: <code>app/assets/images/thumb/missing.png</code></p>\n\n<p>Medium: <code>app/assets/images/medium/missing.png</code></p>\n\n<p>Large: <code>app/assets/images/large/missing.png</code></p>\n\n<hr>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby", "loops", "math", "infinite"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1470196345, "post_id": 38734016, "comment_id": 64843774, "body": "Assuming the argument <code>percent</code> is an integer less than 100, <code>percent&#47;100</code> will be zero (integer division, remember?). You need <code>percent&#47;100.0</code> to return a float such as 0.50. Incidentally, considering your method of  calculation, this question has nothing to do with <code>inject</code>, so you might remove that from the title."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1470198122, "post_id": 38734016, "comment_id": 64844283, "body": "@CarySwoveland as I read your comment I felt myself obliged to provide an answer based on <code>inject</code> :)"}], "answers": [{"tags": [], "owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "is_accepted": false, "score": 2, "last_activity_date": 1470196717, "creation_date": 1470196717, "answer_id": 38734163, "question_id": 38734016, "link": "https://stackoverflow.com/questions/38734016/infinite-while-loops-in-ruby/38734163#38734163", "title": "Infinite While loops in ruby", "body": "<p>I'm sure that you are trying with Integers (instead floats), so you are losing precision try this</p>\n\n<pre><code>def pop_growth(start, percent, desired)      \n  year_count = 0\n  while start &lt;= desired    \n    year_count += 1\n    start = start + (start * (percent.to_f / 100))\n  end\n  return year_count\nend\n</code></pre>\n\n<p>and let me know if it works for you. if not can you send me your start, percent and desired values?</p>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1470198551, "last_edit_date": 1470198551, "creation_date": 1470198011, "answer_id": 38734341, "question_id": 38734016, "link": "https://stackoverflow.com/questions/38734016/infinite-while-loops-in-ruby/38734341#38734341", "title": "Infinite While loops in ruby", "body": "<p>The proper answer is given by Horacio, let me rewrite this in idiomatic ruby:</p>\n\n<pre><code>def pop_growth start, percent, desired\n  (0..Float::INFINITY).inject(start) do |memo, years|\n    break years if memo &gt; desired    \n    memo *= (1.0 + percent / 100.0)\n  end\nend\n</code></pre>\n\n<p>or, with infinite loop:</p>\n\n<pre><code>def pop_growth start, percent, desired\n  loop.each_with_object(years: 0, count: start) do |_, memo|\n    break memo[:years] if memo[:count] &gt; desired    \n    memo[:years] += 1\n    memo[:count] *= (1.0 + percent / 100.0)\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1470203087, "post_id": 38735150, "comment_id": 64845977, "body": "Nice, but consider rounding the result, since <code>year_count</code> is to be integer, AFAIU."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1470203335, "post_id": 38735150, "comment_id": 64846078, "body": "@mudasobwa,it&#39;s not clear to me that an integer is required (&quot;I&#39;ll pay off my mortgage in 8-1/2 years&quot;), but I figured that should be <code>pop_growth(100, 10, 200).ceil #=&gt; 8</code>, if required."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1470207718, "last_edit_date": 1470207718, "creation_date": 1470202388, "answer_id": 38735150, "question_id": 38734016, "link": "https://stackoverflow.com/questions/38734016/infinite-while-loops-in-ruby/38735150#38735150", "title": "Infinite While loops in ruby", "body": "<p>Three ways.</p>\n\n<p><strong>#1 Solve equation</strong></p>\n\n<p>Solve <code>desired = start * (1.0 + 0.01 * percent)**n</code> for <code>n</code>:</p>\n\n<pre><code>def pop_growth(start, percent, desired)      \n  Math.log(desired.to_f/start)/Math.log(1.0 + percent/100.0)\nend\n\nyears = pop_growth(100, 10, 200)\n  #=&gt; 7.272540897341713\n</code></pre>\n\n<p><code>years.ceil #=&gt; 8</code> if desired.</p>\n\n<p><strong>#2 Compound until desire met</strong></p>\n\n<pre><code>def pop_growth(start, percent, desired)\n  return 0 if start &gt;= desired\n  alpha = 1.0 + 0.01 * percent\n  1.step.find { (start *= alpha) &gt;= desired }\nend\n\npop_growth 100, 10, 200\n  #=&gt; 8\n</code></pre>\n\n<p><strong>#3 Use recursion</strong></p>\n\n<pre><code>def pop_growth(start, percent, desired, years=0)\n  return years if start &gt;= desired\n  pop_growth(start*(1.0+0.01*percent), percent, desired, years+1)\nend\n\npop_growth 100, 10, 200\n  #=&gt; 8\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 183, "user_id": 6483534, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e412bcc5112603d95c87d380a48f43c?s=128&d=identicon&r=PG&f=1", "display_name": "PS.", "link": "https://stackoverflow.com/users/6483534/ps"}, "is_accepted": false, "score": 0, "last_activity_date": 1470203917, "creation_date": 1470203917, "answer_id": 38735520, "question_id": 38734016, "link": "https://stackoverflow.com/questions/38734016/infinite-while-loops-in-ruby/38735520#38735520", "title": "Infinite While loops in ruby", "body": "<p>Just add <code>.to_f</code> method to percent or divide by <code>100.0</code>, which will convert the integer into float.</p>\n\n<pre><code>start + (start * (percent / 100))\n</code></pre>\n\n<p>When you are dividing, you need at least one float number in order to return the exact division answer, else Ruby will round it down to nearest whole number, which in this case <code>percent / 100</code> will result in 0, assuming that the value in percent is less than 100. This will cause this statement <code>start + (start * (percent / 100))</code> to become <code>start = start + 0</code>, which is why you are seeing the infinite loop. </p>\n"}], "owner": {"reputation": 219, "user_id": 4744594, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/42e4a92b61881cac95df5f9d764abcce?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4744594/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 480, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1470207718, "creation_date": 1470195899, "last_edit_date": 1470196535, "question_id": 38734016, "link": "https://stackoverflow.com/questions/38734016/infinite-while-loops-in-ruby", "title": "Infinite While loops in ruby", "body": "<p>I have the following program which should count the number of years it should take a population to grow to the desired size. Whenever I run this I get an infinite loop. Can someone help me identify my error?    </p>\n\n<pre><code>def pop_growth(start, percent, desired)      \n  year_count = 0\n  while start &lt;= desired    \n    year_count += 1\n    start = start + (start * (percent / 100))\n  end\n  return year_count\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 6212024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5teMS.jpg?s=128&g=1", "display_name": "apwn", "link": "https://stackoverflow.com/users/6212024/apwn"}, "edited": false, "score": 0, "creation_date": 1470205702, "post_id": 38734052, "comment_id": 64847184, "body": "Thanks. That might be it. Any idea on how I can save it all at once?"}, {"owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "reply_to_user": {"reputation": 29, "user_id": 6212024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5teMS.jpg?s=128&g=1", "display_name": "apwn", "link": "https://stackoverflow.com/users/6212024/apwn"}, "edited": false, "score": 0, "creation_date": 1470206224, "post_id": 38734052, "comment_id": 64847462, "body": "You are keeping your real model suspense and asking answer you need to share all three models and what you want to achieve clearly. Then I might help."}], "tags": [], "owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "is_accepted": false, "score": 0, "last_activity_date": 1470196106, "creation_date": 1470196106, "answer_id": 38734052, "question_id": 38733933, "link": "https://stackoverflow.com/questions/38733933/save-a-has-one-model-with-a-nested-form-with-devise-rails-4/38734052#38734052", "title": "Save a has_one model with a nested form with Devise - Rails 4", "body": "<p><strong>The problem is that user saved first and then you saved build for relationship purpose you can save user_id to build table instead of saving build_id to user</strong></p>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 6212024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5teMS.jpg?s=128&g=1", "display_name": "apwn", "link": "https://stackoverflow.com/users/6212024/apwn"}, "edited": false, "score": 0, "creation_date": 1470205611, "post_id": 38734222, "comment_id": 64847140, "body": "Thanks Breno. However, it doesn&#39;t work as it doesn&#39;t get the id from the form. I think it saves the user first and doesn&#39;t have the build id.  <code>Parameters: {&quot;utf8&quot;=&gt;&quot;\u2713&quot;, &quot;authenticity_token&quot;=&gt;&quot;Atu7B4voCs8T1Rtz82zc3MRABSUfqQa9374og&zwnj;&#8203;g1WVBL5W0Kicc9DLrigg&zwnj;&#8203;gOuVJL+rb0FXjHJ5Yu5B&zwnj;&#8203;vfo05+NXA==&quot;, &quot;user&quot;=&gt;{&quot;first_name&quot;=&gt;&quot;ophk&quot;, &quot;last_name&quot;=&gt;&quot;kddkd&quot;, &quot;email&quot;=&gt;&quot;kjiuh@gmail.com&quot;, &quot;password&quot;=&gt;&quot;[FILTERED]&quot;, &quot;password_confirmation&quot;=&gt;&quot;[FILTERED]&quot;, &quot;build_attributes&quot;=&gt;{&quot;template_id&quot;=&gt;&quot;1&quot;, &quot;domain_url&quot;=&gt;&quot;khljgjjff.com&quot;}}, &quot;commit&quot;=&gt;&quot;Sign up&quot;}</code>"}, {"owner": {"reputation": 795, "user_id": 1416586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56c9e88549055ec5a72a74cc152067ac?s=128&d=identicon&r=PG", "display_name": "Breno Perucchi", "link": "https://stackoverflow.com/users/1416586/breno-perucchi"}, "reply_to_user": {"reputation": 29, "user_id": 6212024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5teMS.jpg?s=128&g=1", "display_name": "apwn", "link": "https://stackoverflow.com/users/6212024/apwn"}, "edited": false, "score": 0, "creation_date": 1470206118, "post_id": 38734222, "comment_id": 64847408, "body": "But insert a binding.pry ou debug to verify &#39;user.errors&#39; to identify the object build has created or with errors"}, {"owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "edited": false, "score": 1, "creation_date": 1470206326, "post_id": 38734222, "comment_id": 64847505, "body": "Using binding.pry is nice idea but what is problem is already konwn. Problem is that user saved first and then build but he wants build id in user table. Which is not possible."}, {"owner": {"reputation": 795, "user_id": 1416586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56c9e88549055ec5a72a74cc152067ac?s=128&d=identicon&r=PG", "display_name": "Breno Perucchi", "link": "https://stackoverflow.com/users/1416586/breno-perucchi"}, "edited": false, "score": 0, "creation_date": 1470206337, "post_id": 38734222, "comment_id": 64847510, "body": "I remembered a one thing when I had created model with name build I had also a problem. I have change to builder. I think that word build is reserved word"}, {"owner": {"reputation": 795, "user_id": 1416586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56c9e88549055ec5a72a74cc152067ac?s=128&d=identicon&r=PG", "display_name": "Breno Perucchi", "link": "https://stackoverflow.com/users/1416586/breno-perucchi"}, "edited": false, "score": 0, "creation_date": 1470206523, "post_id": 38734222, "comment_id": 64847591, "body": "In nested association you can create a new user with new association build and if run action save in the first association the nested will created the build after created user."}, {"owner": {"reputation": 29, "user_id": 6212024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5teMS.jpg?s=128&g=1", "display_name": "apwn", "link": "https://stackoverflow.com/users/6212024/apwn"}, "edited": false, "score": 0, "creation_date": 1470207383, "post_id": 38734222, "comment_id": 64848054, "body": "hum that&#39;s a nice thought. I will try to change the model name"}], "tags": [], "owner": {"reputation": 795, "user_id": 1416586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56c9e88549055ec5a72a74cc152067ac?s=128&d=identicon&r=PG", "display_name": "Breno Perucchi", "link": "https://stackoverflow.com/users/1416586/breno-perucchi"}, "is_accepted": false, "score": 0, "last_activity_date": 1470197210, "creation_date": 1470197210, "answer_id": 38734222, "question_id": 38733933, "link": "https://stackoverflow.com/questions/38733933/save-a-has-one-model-with-a-nested-form-with-devise-rails-4/38734222#38734222", "title": "Save a has_one model with a nested form with Devise - Rails 4", "body": "<pre><code>params.require(:user).permit(:first_name, :last_name, :email, :password, :password_confirmation, build_attributes: [:id, :template_id, :domain_url])\n</code></pre>\n\n<p>build_attributes should has <code>:id</code></p>\n\n<p>making a test</p>\n\n<pre><code>def create\n  user = User.new(sign_up_params)\n  user.save\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 795, "user_id": 1416586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56c9e88549055ec5a72a74cc152067ac?s=128&d=identicon&r=PG", "display_name": "Breno Perucchi", "link": "https://stackoverflow.com/users/1416586/breno-perucchi"}, "is_accepted": false, "score": 0, "last_activity_date": 1470207757, "last_edit_date": 1592644375, "creation_date": 1470207757, "answer_id": 38736588, "question_id": 38733933, "link": "https://stackoverflow.com/questions/38733933/save-a-has-one-model-with-a-nested-form-with-devise-rails-4/38736588#38736588", "title": "Save a has_one model with a nested form with Devise - Rails 4", "body": "model User.rb\n<pre><code>has_one :build\naccepts_nested_attributes_for :build, allow_destroy: true\n</code></pre>\nrails console\n<pre><code>user  = User.new(name: 'example', build_attributes:{template_id:1, domain_url: 'test'})\n\nuser.save # this will create user and after that will create has_one build association\nuser.errors unless user.save\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 6212024, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5teMS.jpg?s=128&g=1", "display_name": "apwn", "link": "https://stackoverflow.com/users/6212024/apwn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 554, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1470207757, "creation_date": 1470195337, "question_id": 38733933, "link": "https://stackoverflow.com/questions/38733933/save-a-has-one-model-with-a-nested-form-with-devise-rails-4", "title": "Save a has_one model with a nested form with Devise - Rails 4", "body": "<p>I'm stuck in a rails project trying to save a has_one model when the user signs up with Devise.</p>\n\n<p>My app is saving the child model as well as the new user but the issue is that it doesn't save the child id in the user table.</p>\n\n<p>I've tried plenty of options found on Stackoverflow without success. \nAm I doing something wrong?</p>\n\n<p><strong>User model:</strong></p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable, :omniauthable, :omniauth_providers =&gt; [:linkedin]\n\n  # Associations\n  has_one :build, inverse_of: :user\n  # Allow saving of attributes on associated records through the parent,\n# :autosave option is automatically enabled on every association\n  accepts_nested_attributes_for :build, allow_destroy: true\nend\n</code></pre>\n\n<p><strong>build model</strong></p>\n\n<pre><code>class Build &lt; ActiveRecord::Base\n  belongs_to :user, inverse_of: :build\n  has_one :template\n  # validates_presence_of :user\nend\n</code></pre>\n\n<p><strong>Registrations Controller</strong></p>\n\n<pre><code>class Users::RegistrationsController &lt; Devise::RegistrationsController\nbefore_action :sign_up_params, only: [:create]\nbefore_action :account_update_params, only: [:update]\n# before_filter :configure_permitted_parameters\n\n  # GET /resource/sign_up\n  def new\n    # super\n\n    # Override Devise default behaviour and create a build as well\n    build_resource({})\n    resource.build_build\n    respond_with self.resource\n\n    # @build = @user.builds.build(template_id: params[:template_id], domain_url: params[:domain_url])\n  end\n\n  # POST /resource\n  def create\n    super\n    # @build = current_user.build.build(params[:post])\n\n    # @build = @user.build.build(template_id: sign_up_params[:template_id], domain_url: sign_up_params[:domain_url])\n    # @build.save\n    UserMailer.welcome_email(@user).deliver unless @user.invalid?\n  end\n\n  # GET /resource/edit\n  # def edit\n  #   super\n  # end\n\n  # PUT /resource\n  # def update\n  #   super\n  # end\n\n  # DELETE /resource\n  # def destroy\n  #   super\n  # end\n\n  # GET /resource/cancel\n  # Forces the session data which is usually expired after sign\n  # in to be expired now. This is useful if the user wants to\n  # cancel oauth signing in/up in the middle of the process,\n  # removing all OAuth session data.\n  # def cancel\n  #   super\n  # end\n\n  # protected\n  #\n  # def configure_permitted_parameters\n  #   devise_parameter_sanitizer.for(:sign_up) { |u|\n  #     u.permit(:first_name, :last_name, :email, :password, :password_confirmation, :builds_attributes =&gt; [:template_id, :domain_url])\n  #   }\n  # end\n\n  # If you have extra params to permit, append them to the sanitizer.\n  # def configure_sign_up_params\n  #   devise_parameter_sanitizer.permit(:sign_up, keys: [:attribute])\n  # end\n\n  # If you have extra params to permit, append them to the sanitizer.\n  # def configure_account_update_params\n  #   devise_parameter_sanitizer.permit(:account_update, keys: [:attribute])\n  # end\n\n  # The path used after sign up.\n  # def after_sign_up_path_for(resource)\n  #   super(resource)\n  # end\n\n  # The path used after sign up for inactive accounts.\n  # def after_inactive_sign_up_path_for(resource)\n  #   super(resource)\n  # end\n\n  private\n\n  def sign_up_params\n    devise_parameter_sanitizer.sanitize(:sign_up)\n    params.require(:user).permit(:first_name, :last_name, :email, :password, :password_confirmation, build_attributes: [:template_id, :domain_url])\n  end\n\n  def account_update_params\n    params.require(:user).permit(:first_name, :last_name, :email, :password, :password_confirmation, :current_password)\n  end\nend\n</code></pre>\n\n<p><strong>New User Form - View</strong></p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n&lt;h4 class=\"center-align\"&gt;Sign up&lt;/h4&gt;\n\n&lt;div id=\"signup-row\" class=\"row z-depth-2\"&gt;\n    &lt;div id=\"signup\" class=\"col s6\"&gt;\n\n        &lt;%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %&gt;\n        &lt;%= devise_error_messages! %&gt;\n\n        &lt;div class=\"field\"&gt;\n            &lt;%= f.label :first_name %&gt;&lt;br/&gt;\n            &lt;%= f.text_field :first_name, autofocus: true %&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"field\"&gt;\n            &lt;%= f.label :last_name %&gt;&lt;br/&gt;\n            &lt;%= f.text_field :last_name %&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"field\"&gt;\n            &lt;%= f.label :email %&gt;&lt;br/&gt;\n            &lt;%= f.email_field :email %&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"field\"&gt;\n            &lt;%= f.label :password %&gt;\n            &lt;% if @minimum_password_length %&gt;\n            &lt;em&gt;(&lt;%= @minimum_password_length %&gt;\n                characters minimum)&lt;/em&gt;\n            &lt;% end %&gt;&lt;br/&gt;\n            &lt;%= f.password_field :password, autocomplete: \"off\" %&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"field\"&gt;\n            &lt;%= f.label :password_confirmation %&gt;&lt;br/&gt;\n            &lt;%= f.password_field :password_confirmation, autocomplete: \"off\" %&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"actions\"&gt;\n            &lt;%= f.submit \"Sign up\", :class =&gt; 'btn black' %&gt;\n            &lt;%= render \"devise/shared/links\" %&gt;\n\n        &lt;/div&gt;\n\n        &lt;%= f.fields_for :build do |o| %&gt;\n      &lt;%= o.hidden_field :template_id, value: params[\"template\"] %&gt;\n      &lt;%= o.hidden_field :domain_url, value: params[\"domain\"] %&gt;\n        &lt;% end %&gt;\n        &lt;% end %&gt;\n    &lt;/div&gt;\n\n    &lt;div id=\"linkedin-signup\" class=\"col s6\"&gt;\n      &lt;div class=\"center-align\"&gt;\n        &lt;h5&gt;Sign up with LinkedIn &lt;/h5&gt; &lt;br&gt;\n        &lt;a href=\"http://localhost:3000/login/li/oauth2\"&gt;&lt;%= image_tag('linkedin.png', :class =&gt; \"linkedIn-logo\" ) %&gt;&lt;/a&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>Server /post log</strong></p>\n\n<pre><code>Started POST \"/users\" for 127.0.0.1 at 2016-08-03 13:31:22 +1000\nProcessing by Users::RegistrationsController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"11DgWCU07EXLJKXbhWah0gREdBiN2PLkF/WxWsuqW5rgQdCUrRH9rLBrKpbusRhtsCzSAQT0ADlxhQxMvWAD6A==\", \"user\"=&gt;{\"first_name\"=&gt;\"john\", \"last_name\"=&gt;\"maksksk\", \"email\"=&gt;\"jofff@gmail.com\", \"password\"=&gt;\"[FILTERED]\", \"password_confirmation\"=&gt;\"[FILTERED]\", \"build_attributes\"=&gt;{\"template_id\"=&gt;\"1\", \"domain_url\"=&gt;\"dddddd.com.au\"}}, \"commit\"=&gt;\"Sign up\"}\n   (0.1ms)  BEGIN\n  User Exists (0.6ms)  SELECT  1 AS one FROM \"users\" WHERE \"users\".\"email\" = 'jofff@gmail.com' LIMIT 1\n  SQL (0.5ms)  INSERT INTO \"users\" (\"first_name\", \"last_name\", \"email\", \"encrypted_password\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"  [[\"first_name\", \"john\"], [\"last_name\", \"maksksk\"], [\"email\", \"jofff@gmail.com\"], [\"encrypted_password\", \"$2a$11$WgJJ.uM2DfaqQhUYatUZnuIJmaqIDVfIuYEkl/U3zSbm.h/OH/yGa\"], [\"created_at\", \"2016-08-03 03:31:22.796589\"], [\"updated_at\", \"2016-08-03 03:31:22.796589\"]]\n  SQL (0.2ms)  INSERT INTO \"builds\" (\"template_id\", \"domain_url\", \"user_id\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4, $5) RETURNING \"id\"  [[\"template_id\", 1], [\"domain_url\", \"dddddd.com.au\"], [\"user_id\", 30], [\"created_at\", \"2016-08-03 03:31:22.800033\"], [\"updated_at\", \"2016-08-03 03:31:22.800033\"]]\n   (1.3ms)  COMMIT\n   (0.1ms)  BEGIN\n  SQL (0.4ms)  UPDATE \"users\" SET \"last_sign_in_at\" = $1, \"current_sign_in_at\" = $2, \"last_sign_in_ip\" = $3, \"current_sign_in_ip\" = $4, \"sign_in_count\" = $5, \"updated_at\" = $6 WHERE \"users\".\"id\" = $7  [[\"last_sign_in_at\", \"2016-08-03 03:31:22.804259\"], [\"current_sign_in_at\", \"2016-08-03 03:31:22.804259\"], [\"last_sign_in_ip\", \"127.0.0.1/32\"], [\"current_sign_in_ip\", \"127.0.0.1/32\"], [\"sign_in_count\", 1], [\"updated_at\", \"2016-08-03 03:31:22.805380\"], [\"id\", 30]]\n   (1.2ms)  COMMIT\n</code></pre>\n\n<p>Thanks for your help!! </p>\n\n<p>ps: build wasn't a smart name for a table I guess...</p>\n\n<p>Thomas</p>\n"}, {"tags": ["ruby", "yaml", "erb"], "answers": [{"comments": [{"owner": {"reputation": 512, "user_id": 714186, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/80a2796024c64b5ae0bacb945d541d7f?s=128&d=identicon&r=PG&f=1", "display_name": "my_overflowed_stack", "link": "https://stackoverflow.com/users/714186/my-overflowed-stack"}, "edited": false, "score": 0, "creation_date": 1470195011, "post_id": 38733883, "comment_id": 64843490, "body": "Interesting, is there a way to get foo to resolve to stdout via yaml/erb?"}, {"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "reply_to_user": {"reputation": 512, "user_id": 714186, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/80a2796024c64b5ae0bacb945d541d7f?s=128&d=identicon&r=PG&f=1", "display_name": "my_overflowed_stack", "link": "https://stackoverflow.com/users/714186/my-overflowed-stack"}, "edited": false, "score": 2, "creation_date": 1470197170, "post_id": 38733883, "comment_id": 64843995, "body": "I don&#39;t know.  YAML is normally for storing data, not objects.  Maybe try putting the string stdout in your YAML file and convert that string to the corresponding object later."}, {"owner": {"reputation": 512, "user_id": 714186, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/80a2796024c64b5ae0bacb945d541d7f?s=128&d=identicon&r=PG&f=1", "display_name": "my_overflowed_stack", "link": "https://stackoverflow.com/users/714186/my-overflowed-stack"}, "edited": false, "score": 0, "creation_date": 1470226700, "post_id": 38733883, "comment_id": 64860470, "body": "Makes sense.  Although you can serialize/deserialize objects in YAML we probably can&#39;t do what I&#39;m trying to do."}], "tags": [], "owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "is_accepted": true, "score": 2, "last_activity_date": 1470194956, "creation_date": 1470194956, "answer_id": 38733883, "question_id": 38733852, "link": "https://stackoverflow.com/questions/38733852/using-a-global-ruby-variable-inside-yaml/38733883#38733883", "title": "Using a global ruby variable inside YAML", "body": "<p>Look at what you get when you just run ERB:</p>\n\n<pre><code>ERB.new(\"foo: &lt;%= $stdout %&gt;\").result\n</code></pre>\n\n<p>The result is this:</p>\n\n<pre><code>foo: #&lt;IO:0x0056078694db38&gt;\n</code></pre>\n\n<p>So <code>foo</code> will be set to <code>nil</code> because <code>#</code> is the comment character in YAML.</p>\n"}], "owner": {"reputation": 512, "user_id": 714186, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/80a2796024c64b5ae0bacb945d541d7f?s=128&d=identicon&r=PG&f=1", "display_name": "my_overflowed_stack", "link": "https://stackoverflow.com/users/714186/my-overflowed-stack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 38733883, "answer_count": 1, "score": 0, "last_activity_date": 1470194956, "creation_date": 1470194712, "question_id": 38733852, "link": "https://stackoverflow.com/questions/38733852/using-a-global-ruby-variable-inside-yaml", "title": "Using a global ruby variable inside YAML", "body": "<p>Given the following YAML file:</p>\n\n<pre><code>---\nfoo: &lt;%= $stdout %&gt;\n</code></pre>\n\n<p>When I try to ERB this yaml file:</p>\n\n<pre><code>YAML.load(ERB.new(File.read(filename)).result)\n</code></pre>\n\n<p>I get the following result:</p>\n\n<pre><code>{\"foo\"=&gt;nil}\n</code></pre>\n\n<p>Why isn't <code>$stdout</code> resolving correct?  If I put other ruby code in there, it works as expected.</p>\n"}, {"tags": ["ruby", "boolean"], "answers": [{"tags": [], "owner": {"reputation": 5177, "user_id": 468459, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e3e80ab2ace6e347ff9293e697de0af3?s=128&d=identicon&r=PG", "display_name": "bioneuralnet", "link": "https://stackoverflow.com/users/468459/bioneuralnet"}, "is_accepted": true, "score": 3, "last_activity_date": 1470195059, "creation_date": 1470195059, "answer_id": 38733895, "question_id": 38733804, "link": "https://stackoverflow.com/questions/38733804/ruby-booleans-operator-double-bang-double-exclamation-mark/38733895#38733895", "title": "Ruby booleans operator double-bang double exclamation mark", "body": "<p>Your last line \"what mystery value could there be when every object in Ruby is a boolean?\" is the source of your confusion. That's simply not true; the only booleans in Ruby are <em>true</em> and <em>false</em>.</p>\n\n<p>I can't be sure, but I'm guessing that you misunderstood a statement like \"everything in Ruby except <em>false</em> and <em>nil</em> are <strong>truthy</strong>. \"Truthy\" means that if you use it in an <em>if</em> statement, it will act like it's true. Even an empty string is truthy. But it isn't actually the boolean value <em>true</em> (unless you prepend !!, as you noted).</p>\n\n<p>And since your case statement in example 3 is saying \"when the value i pass in is the boolean value true|false...\", it won't match unless you literally pass in the boolean value true or false.</p>\n"}], "owner": {"reputation": 163, "user_id": 6385598, "user_type": "registered", "accept_rate": 84, "profile_image": "https://lh4.googleusercontent.com/-Z9Wlhtst6dw/AAAAAAAAAAI/AAAAAAAAFTc/yvtsJV4l5yQ/photo.jpg?sz=128", "display_name": "iswg", "link": "https://stackoverflow.com/users/6385598/iswg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 38733895, "answer_count": 1, "score": -1, "last_activity_date": 1470195059, "creation_date": 1470194323, "question_id": 38733804, "link": "https://stackoverflow.com/questions/38733804/ruby-booleans-operator-double-bang-double-exclamation-mark", "title": "Ruby booleans operator double-bang double exclamation mark", "body": "<p>I'm working on : <a href=\"https://www.codewars.com/kata/the-if-function/\" rel=\"nofollow\">https://www.codewars.com/kata/the-if-function/</a></p>\n\n<p>Why would the first two work and not the third?</p>\n\n<pre><code>def _if(bool, ifTrue, ifFalse)\n  bool ? ifTrue.call : ifFalse.call\nend\n\ndef _if(bool, ifTrue, ifFalse)\n  case !!bool\n  when true\n    ifTrue.call\n  when false\n    ifFalse.call\n  end\nend\n\ndef _if(bool, ifTrue, ifFalse)\n  case bool\n  when true\n    ifTrue.call\n  when false\n    ifFalse.call\n  end\nend\n</code></pre>\n\n<p>Also I saw somebody say \"The double negation ensures that no matter the initial value, you will always get true or false, never some mystery value.\"</p>\n\n<p>But my question is what mystery value could there be when every object in Ruby is a boolean?</p>\n"}, {"tags": ["ruby", "text", "text-files", "text-manipulation"], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1470234808, "post_id": 38734972, "comment_id": 64866831, "body": "You should better use <code>%r</code> with a delimiter other than a slash for the regex literal."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1470238689, "post_id": 38734972, "comment_id": 64869830, "body": "@sawa, please explain why."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1470249091, "post_id": 38734972, "comment_id": 64876100, "body": "@sawa, ah! I didn&#39;t know that. Thanks, will fix."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1470249323, "last_edit_date": 1470249323, "creation_date": 1470201608, "answer_id": 38734972, "question_id": 38733791, "link": "https://stackoverflow.com/questions/38733791/text-insertion-using-ruby/38734972#38734972", "title": "Text insertion using Ruby", "body": "<pre><code>txt =&lt;&lt;_\n11/14/2015, 13:51: John Doe: Hi there\n11/14/2015, 13:52: Jane Doe: Hi, my name is Jane.\nNice to meet you.\n11/14/2015, 13:53: Joe Bloggs: Hey there everyone!\nShall we get started?\n_\n\nR = %r{\\A\\d{2}/\\d{2}/\\d{4}\\,\\s\\d{2}:\\d{2}:\\s}\n\narr = txt.split(\"\\n\")\n  #=&gt; [\"11/14/2015, 13:51: John Doe: Hi there\",\n  #    \"11/14/2015, 13:52: Jane Doe: Hi, my name is Jane.\",\n  #    \"Nice to meet you.\",\n  #    \"11/14/2015, 13:53: Joe Bloggs: Hey there everyone!\",\n  #    \"Shall we get started?\"] \n(1..arr.size-1).each do |i|\n  next if arr[i] =~ R\n  previous_line = arr[i-1]\n  leader = previous_line[0, 2 + previous_line.rindex(\": \")]\n  arr[i] = leader.concat(arr[i]) \nend\narr\n  #=&gt; [\"11/14/2015, 13:51: John Doe: Hi there\",\n  #    \"11/14/2015, 13:52: Jane Doe: Hi, my name is Jane.\",\n  #    \"11/14/2015, 13:52: Jane Doe: Nice to meet you.\",\n  #    \"11/14/2015, 13:53: Joe Bloggs: Hey there everyone!\",\n  #    \"11/14/2015, 13:53: Joe Bloggs: Shall we get started?\"] \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1470235485, "creation_date": 1470235485, "answer_id": 38746859, "question_id": 38733791, "link": "https://stackoverflow.com/questions/38733791/text-insertion-using-ruby/38746859#38746859", "title": "Text insertion using Ruby", "body": "<pre><code>input = StringIO.new &lt;&lt;~_\n  11/14/2015, 13:51: John Doe: Hi there\n  11/14/2015, 13:52: Jane Doe: Hi, my name is Jane.\n  Nice to meet you.\n  11/14/2015, 13:53: Joe Bloggs: Hey there everyone!\n  Shall we get started?\n_\n\nlabel = nil\noutput = input.each_with_object(\"\") do\n  |l, s|\n  if l =~ %r[\\A\\d{2}/\\d{2}/\\d{4}, \\d{2}:\\d{2}: ]\n    label = $&amp;\n    s.concat(l)\n  else\n    s.concat(label + l)\n  end\nend\nputs output\n</code></pre>\n\n<p>output</p>\n\n<pre><code>11/14/2015, 13:51: John Doe: Hi there\n11/14/2015, 13:52: Jane Doe: Hi, my name is Jane.\n11/14/2015, 13:52: Nice to meet you.\n11/14/2015, 13:53: Joe Bloggs: Hey there everyone!\n11/14/2015, 13:53: Shall we get started?\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5828452, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N3R888hi2KI/AAAAAAAAAAI/AAAAAAAALGA/0pgUDB3e3cE/photo.jpg?sz=128", "display_name": "Adarsh Parthasarathy", "link": "https://stackoverflow.com/users/5828452/adarsh-parthasarathy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1470249323, "creation_date": 1470194235, "question_id": 38733791, "link": "https://stackoverflow.com/questions/38733791/text-insertion-using-ruby", "title": "Text insertion using Ruby", "body": "<p>I have a .txt file with text laid out like this:</p>\n\n<pre><code>11/14/2015, 13:51: John Doe: Hi there\n11/14/2015, 13:52: Jane Doe: Hi, my name is Jane.\nNice to meet you.\n11/14/2015, 13:53: Joe Bloggs: Hey there everyone!\nShall we get started?\n</code></pre>\n\n<p>What I'd like to accomplish is to insert the \"label\", so to speak, of the previous message in front of a message that lacks a label. For example, the end result would look like this:</p>\n\n<pre><code>11/14/2015, 13:51: John Doe: Hi there\n11/14/2015, 13:52: Jane Doe: Hi, my name is Jane.\n11/14/2015, 13:52: Jane Doe: Nice to meet you.\n11/14/2015, 13:53: Joe Bloggs: Hey there everyone!\n11/14/2015, 13:53: Joe Bloggs: Shall we get started?\n</code></pre>\n\n<p>How would I go about doing this?</p>\n"}, {"tags": ["ruby", "unit-testing", "rspec", "mocking", "typhoeus"], "answers": [{"comments": [{"owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "edited": false, "score": 0, "creation_date": 1470261848, "post_id": 38743974, "comment_id": 64882634, "body": "Thanks, Dave! Yeah, for me it wasn&#39;t so much testing the code per-se but rather understanding how to test the Typhoeus API for chunking. Your example looks perfect. Thanks!"}], "tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": false, "score": 3, "last_activity_date": 1470251602, "last_edit_date": 1470251602, "creation_date": 1470228021, "answer_id": 38743974, "question_id": 38733770, "link": "https://stackoverflow.com/questions/38733770/how-to-mock-with-rspec-an-api-that-accepts-and-then-calls-block-callbacks/38743974#38743974", "title": "How to mock with RSpec an API that accepts and then calls block callbacks?", "body": "<p>The key is that <a href=\"https://relishapp.com/rspec/rspec-mocks/v/3-5/docs/configuring-responses/block-implementation\" rel=\"nofollow\">you can give an RSpec <code>allow</code> or <code>expect</code> a block implementation</a>. So stub <code>on_body</code> and <code>on_complete</code> to save the blocks you give them, and <code>run</code> to call those blocks:</p>\n\n<pre><code>it \"writes to and closes the file\" do\n  downloaded_file = double\n  expect(downloaded_file).to receive(:write)\n  expect(downloaded_file).to receive(:close)\n  allow(File).to receive(:open).and_return(downloaded_file)\n\n  request = double\n  allow(request).to receive(:on_body) { |&amp;block| @on_body = block }\n  allow(request).to receive(:on_complete) { |&amp;block| @on_complete = block }\n  allow(request).to receive(:run) do\n    @on_body.call \"chunk\"\n    @on_complete.call nil\n  end\n  allow(Typhoeus::Request).to receive(:new).and_return(request)\n\n  download_zip_file\nend\n</code></pre>\n\n<p>I didn't verify any arguments, but you can add <code>with</code>s to do that. I also left out stubbing and mocking the <code>FileUtils</code> calls, since those are easy.</p>\n\n<p>The interesting part of this question is how to stub an API like this in RSpec, so that's what I addressed. However, I would probably write an acceptance test (Cucumber or RSpec feature spec) first that exercises all of the code end to end, then write unit tests to test error handling and such.</p>\n"}, {"comments": [{"owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "edited": false, "score": 0, "creation_date": 1470262080, "post_id": 38744771, "comment_id": 64882712, "body": "SunnyMagadan, thank you so much! I somehow didn&#39;t see the Typhoeus request stubbing... mainly because it doesn&#39;t have a specific example for the downloading-in-chunks call... but I see how how it would work with that (plus your example). Very good stuff.  I also saw the webmock library but had the same issue (I didn&#39;t see how to use it with Typhoeus&#39; chunking). Oh, and also: thank you very much for the memfs suggestion. I was just going to do manual cleanup of the fs after tests, but that&#39;s MUCH better. Good call!"}], "tags": [], "owner": {"reputation": 1609, "user_id": 3241907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea2601af49d5eca9004032bc36d918b?s=128&d=identicon&r=PG&f=1", "display_name": "SunnyMagadan", "link": "https://stackoverflow.com/users/3241907/sunnymagadan"}, "is_accepted": false, "score": 4, "last_activity_date": 1470230179, "creation_date": 1470230179, "answer_id": 38744771, "question_id": 38733770, "link": "https://stackoverflow.com/questions/38733770/how-to-mock-with-rspec-an-api-that-accepts-and-then-calls-block-callbacks/38744771#38744771", "title": "How to mock with RSpec an API that accepts and then calls block callbacks?", "body": "<p>The main responsibility of your method is download of the zip file into a specific folder in the local file system. It doesn't matter how you can perform this. The result is matters here.</p>\n\n<p>If you want to check that your method does download properly then you should stub network request then call <code>download_zip_file</code> method then check if a file was created at corresponding path and its contents match to the stubbed response body.</p>\n\n<p>Typhoeus has support of request stubbing: <a href=\"https://github.com/typhoeus/typhoeus/tree/d9e6dce92a04754a2276c94393dad0f3a5c06bdd#direct-stubbing\" rel=\"nofollow\">https://github.com/typhoeus/typhoeus/tree/d9e6dce92a04754a2276c94393dad0f3a5c06bdd#direct-stubbing</a>\nAlternatively, you could use Webmock for the same purpose. It has support of Typhoeus requests stubbing: <a href=\"https://github.com/bblimke/webmock\" rel=\"nofollow\">https://github.com/bblimke/webmock</a></p>\n\n<p>Example:</p>\n\n<pre><code>it \"downloads file\" do\n  zip_path = \"tmp/downloads\"\n  zip_file = \"filename.zip\"\n  downloaded_file_path = \"#{zip_path}/#{zip_file}\"\n  feed = \"http://www.colorado.edu/conflict/peace/download/peace.zip\"\n  zip_file_content = \"some zip file content\"\n\n  response = Typhoeus::Response.new(code: 200, body: zip_file_content)\n  Typhoeus.stub(feed).and_return(response)\n\n  Downloader.new(zip_path, zip_file, feed).download_zip_file\n\n  expect(File.exists?(downloaded_file_path)).to eq(true)\n  expect(File.read(downloaded_file_path)).to eq(zip_file_content)\nend\n</code></pre>\n\n<p>Moreover, I would suggest to use in-memory fake file system for your tests, which create files and folders, in order to not pollute local file system with a garbage.\nMemfs is a good gem for this. <a href=\"https://github.com/simonc/memfs\" rel=\"nofollow\">https://github.com/simonc/memfs</a>\nIt's easy to add it to your tests:</p>\n\n<pre><code>before do\n  MemFs.activate!\nend\n\nafter do\n  MemFs.deactivate!\nend\n</code></pre>\n\n<p>After that your tests won't create any local files, but functionality will remain the same.</p>\n"}], "owner": {"reputation": 985, "user_id": 1218280, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/490d74e521a4803d9363359288cd6f92?s=128&d=identicon&r=PG", "display_name": "Dan Sharp", "link": "https://stackoverflow.com/users/1218280/dan-sharp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2028, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1470251602, "creation_date": 1470194072, "last_edit_date": 1470228182, "question_id": 38733770, "link": "https://stackoverflow.com/questions/38733770/how-to-mock-with-rspec-an-api-that-accepts-and-then-calls-block-callbacks", "title": "How to mock with RSpec an API that accepts and then calls block callbacks?", "body": "<p>I have this method:</p>\n\n<pre><code>def download_zip_file\n  FileUtils.rm_rf(@zip_path) if @zip_path\n  FileUtils.mkdir_p(@zip_path)\n  downloaded_file = File.open(@zip_file, \"wb\")\n  request = Typhoeus::Request.new(@feed, followlocation: true)\n  request.on_body { |chunk| downloaded_file.write(chunk) }\n  request.on_complete { |response| downloaded_file.close }\n  request.run\nend\n</code></pre>\n\n<p>It clears the zip_path, recreates it, opens a file for writing, then downloads the file from the <code>@feed</code> URL and writes to the downloaded file in chunks.</p>\n\n<p>I'm wondering how to unit test it, mocking the actual request. Since it uses chunking via some blocks, it's a bit complicated.</p>\n\n<p>I formerly had this code:</p>\n\n<pre><code>def download_feed_data_from_url\n  response = Typhoeus.get(@feed, followlocation: true)\n  raise(FeedNotFoundError, \"Could not find feed at feed: #{@feed}. Response: #{response.inspect}\") unless response.success?\n  result = response.body\nend\n</code></pre>\n\n<p>Which was easy to test (by mocking Typhoeus and providing a stub return):</p>\n\n<pre><code>context \"testing feed downloading\" do\n  let(:feed) { \"http://the.feed.url\" }\n  let(:response) { double(body: \"some content\", success?: true) }\n\n  before\n    allow(Typhoeus).to receive(:get).with(feed, followlocation:true).and_return(response)\n  end\n\n  # ... individual assertions, i.e. that Typhoeus is called, that it pulls the body content, etc.\nend\n</code></pre>\n\n<p>So I'm wondering how to unit test the same kinds of things... i.e. that the the path is created, the file is saved, etc. while mocking Typhoeus. Since it's a 3rd party library, I don't need to test that it works, just that it's called correctly.</p>\n\n<p>It's the chunking and <code>on_body</code> and <code>on_complete</code> that are confusing me (in terms of how to test it)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "rspec", "routes"], "comments": [{"owner": {"reputation": 1249, "user_id": 5224982, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/20a0ec1c0a5a8a9e5690fb30e7cb4a01?s=128&d=identicon&r=PG&f=1", "display_name": "Muaaz Rafi", "link": "https://stackoverflow.com/users/5224982/muaaz-rafi"}, "edited": false, "score": 0, "creation_date": 1470202897, "post_id": 38733567, "comment_id": 64845912, "body": "Can you paste in the spec, for reference that will be helpful."}, {"owner": {"reputation": 1494, "user_id": 417681, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bed3fcf4e33cb832d1e41f5a2c6e16b8?s=128&d=identicon&r=PG", "display_name": "wildabeast", "link": "https://stackoverflow.com/users/417681/wildabeast"}, "reply_to_user": {"reputation": 1249, "user_id": 5224982, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/20a0ec1c0a5a8a9e5690fb30e7cb4a01?s=128&d=identicon&r=PG&f=1", "display_name": "Muaaz Rafi", "link": "https://stackoverflow.com/users/5224982/muaaz-rafi"}, "edited": false, "score": 0, "creation_date": 1470204474, "post_id": 38733567, "comment_id": 64846569, "body": "Its there (very simple one line spec). I made it a little more obvious now. <code>post :pull, params: { :id =&gt; 12 }</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1905, "user_id": 232838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8342950f34a66d9ec7cfe10b33d5494c?s=128&d=identicon&r=PG", "display_name": "koffeinfrei", "link": "https://stackoverflow.com/users/232838/koffeinfrei"}, "is_accepted": true, "score": 2, "last_activity_date": 1470214907, "creation_date": 1470214907, "answer_id": 38739048, "question_id": 38733567, "link": "https://stackoverflow.com/questions/38733567/no-route-matches-error-in-rspec-but-route-shows-up-in-rake-routes/38739048#38739048", "title": "&quot;No route matches&quot; error in rspec, but route shows up in rake routes", "body": "<p>Controller tests in rails don't actually invoke the routing, it's only syntactic sugar for calling the controller action. Your spec should call:</p>\n\n<pre><code>post :update, params: { :id =&gt; 12 }\n</code></pre>\n\n<p>If you actually want to test the route you should use a request spec.</p>\n"}], "owner": {"reputation": 1494, "user_id": 417681, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/bed3fcf4e33cb832d1e41f5a2c6e16b8?s=128&d=identicon&r=PG", "display_name": "wildabeast", "link": "https://stackoverflow.com/users/417681/wildabeast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 537, "favorite_count": 0, "accepted_answer_id": 38739048, "answer_count": 1, "score": 1, "last_activity_date": 1470214907, "creation_date": 1470192485, "last_edit_date": 1470204401, "question_id": 38733567, "link": "https://stackoverflow.com/questions/38733567/no-route-matches-error-in-rspec-but-route-shows-up-in-rake-routes", "title": "&quot;No route matches&quot; error in rspec, but route shows up in rake routes", "body": "<p>Here is my route from <code>routes.rb</code>:</p>\n\n<pre><code>resources :books, :except =&gt; [:new, :edit] do\n\n    post \"pull\" =&gt; \"books#update\", :data =&gt; { \"pull\" =&gt; true }\n</code></pre>\n\n<p><code>rake routes</code> shows things as expected</p>\n\n<pre><code>pull_api_v1_book POST  /api/v1/books/:id/pull(.:format)  \n    api/v1/books#update {:format=&gt;:json, :data=&gt;{\"pull\"=&gt;true}}\n</code></pre>\n\n<p>Running a dev server, the route works as expected:</p>\n\n<pre><code>curl -X POST  http://localhost:3000/api/v1/books/3/pull?auth_token=1234567890\n</code></pre>\n\n<p>My spec in in books_controller_spec.rb:</p>\n\n<pre><code>describe \"pull api\" do\n  it \"should not fail\" do\n    post :pull, params: { :id =&gt; 12 }\n  end\nend\n</code></pre>\n\n<p>But the output of the spec:</p>\n\n<pre><code> Failure/Error: post :pull, params: { :id =&gt; 12 }\n\n ActionController::UrlGenerationError:\n   No route matches {:action=&gt;\"pull\", :controller=&gt;\"api/v1/books\", :id=&gt;12}\n</code></pre>\n\n<p>Why can't rspec find the route?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 1507, "user_id": 2833161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2iuKF.jpg?s=128&g=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/2833161/owen"}, "is_accepted": false, "score": 3, "last_activity_date": 1470189576, "creation_date": 1470189576, "answer_id": 38733150, "question_id": 38733111, "link": "https://stackoverflow.com/questions/38733111/trying-to-make-my-partial-work/38733150#38733150", "title": "Trying to make my partial work", "body": "<p>You're close. Instead of <code>@resource</code> just use <code>topic</code>, which you are passing in as a local.</p>\n\n<pre><code>&lt;div&gt;\n  &lt;% topic.each do |x| %&gt;\n    &lt;%= x.url%&gt;\n  &lt;% end %&gt;\n&lt;div&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "is_accepted": false, "score": 1, "last_activity_date": 1470189751, "creation_date": 1470189751, "answer_id": 38733171, "question_id": 38733111, "link": "https://stackoverflow.com/questions/38733111/trying-to-make-my-partial-work/38733171#38733171", "title": "Trying to make my partial work", "body": "<p>Instead of:</p>\n\n<pre><code>&lt;div&gt;\n  &lt;% @resource.each do |x| %&gt;\n    &lt;%= x.url%&gt;\n  &lt;% end %&gt;\n&lt;div&gt;\n</code></pre>\n\n<p>Do it:</p>\n\n<pre><code>&lt;div&gt;\n  &lt;% topic.each do |x| %&gt;\n    &lt;%= x.url%&gt;\n  &lt;% end %&gt;\n&lt;div&gt;\n</code></pre>\n\n<p>Because you pass the object on <code>locals: { topic:     @liked_bookmarks}</code> you should use <code>topic</code> instead of using any <code>instance that is not initialize</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "is_accepted": false, "score": 2, "last_activity_date": 1470189898, "creation_date": 1470189898, "answer_id": 38733198, "question_id": 38733111, "link": "https://stackoverflow.com/questions/38733111/trying-to-make-my-partial-work/38733198#38733198", "title": "Trying to make my partial work", "body": "<p><strong>Since you are not passing @resource into partial and passing only topic variable you need to do it</strong></p>\n\n<pre><code>&lt;div&gt;\n&lt;% topic.each do |x| %&gt;\n&lt;%= x.url%&gt;\n&lt;% end %&gt;\n&lt;div&gt;\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 6246328, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/e05f278aae0408d3bfd1cdd4203576d4?s=128&d=identicon&r=PG&f=1", "display_name": "SinGar", "link": "https://stackoverflow.com/users/6246328/singar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1470189898, "creation_date": 1470189336, "last_edit_date": 1470189422, "question_id": 38733111, "link": "https://stackoverflow.com/questions/38733111/trying-to-make-my-partial-work", "title": "Trying to make my partial work", "body": "<p>I need to iterate through two sets of values on the same web page so I wrote a partial to eliminate duplicate code. The two variables that I am trying to iterate through are <code>@bookmarks</code> and <code>@liked_bookmarks</code>. </p>\n\n<p>The partial is rendered properly if I use either <code>@bookmarks</code> or <code>@liked_bookmarks</code> in the partial it's self but then the only one of the value sets are displayed. in the code below I tried using <code>@resource</code> as a stand in that will have <code>@bookmarks</code> and <code>@liked_bookmarks</code> passed into it.</p>\n\n<p>this is the partial that is located in <code>app/views/bookmarks/_bookmarksandlikes.html.erb</code></p>\n\n<pre><code>&lt;div&gt;\n  &lt;% @resource.each do |x| %&gt;\n    &lt;%= x.url%&gt;\n  &lt;% end %&gt;\n&lt;div&gt;\n</code></pre>\n\n<p>and this is the code for the page that I am calling the above partial on located in <code>app/views/users/show.html.erb</code></p>\n\n<pre><code>&lt;h1&gt;My Blocmarks&lt;/h1&gt;\n&lt;p&gt;Find me in app/views/users/show.html.erb&lt;/p&gt;\n\n&lt;div&gt;\n  &lt;h1&gt;Blockmarks I have created  &lt;/h1&gt;\n  &lt;div class =row&gt;\n     &lt;%= render partial: 'bookmarks/bookmarksandlikes', locals: { topic:     @bookmarks} %&gt;\n   &lt;/div&gt;\n\n&lt;/div&gt;\n\n\n&lt;div&gt;\n  &lt;h1&gt;Blockmarks I have liked\n    &lt;%= render partial: 'bookmarks/bookmarksandlikes', locals: { topic:     @liked_bookmarks} %&gt;\n  &lt;/h1&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activesupport-concern"], "answers": [{"comments": [{"owner": {"reputation": 4072, "user_id": 456507, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0c345a1eee78a5a2f5cec25b8424fd15?s=128&d=identicon&r=PG", "display_name": "Ivar", "link": "https://stackoverflow.com/users/456507/ivar"}, "edited": false, "score": 0, "creation_date": 1470229022, "post_id": 38733413, "comment_id": 64862352, "body": "Thank you for the thorough answer! So in practice to test a concern&#39;s class methods you must always use a class where the concern is included."}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": true, "score": 1, "last_activity_date": 1470191813, "last_edit_date": 1470191813, "creation_date": 1470191376, "answer_id": 38733413, "question_id": 38733042, "link": "https://stackoverflow.com/questions/38733042/can-i-invoke-a-class-method-from-an-activerecordconcern-without-mixing-it-into/38733413#38733413", "title": "Can I invoke a class method from an ActiveRecord::Concern without mixing it into another class?", "body": "<p>No, you can't because the methods defined in the block of <code>class_methods</code> are actually defined in the module <code>Foo::ClassMethods</code> (<code>Foo</code> is your concern). Here is the relevant source code of <code>ActiveSupport::Concern</code></p>\n\n<pre><code>module ActiveSupport\n  # ...\n  module Concern\n    # ...\n    def class_methods(&amp;class_methods_module_definition)\n      mod = const_defined?(:ClassMethods, false) ?\n        const_get(:ClassMethods) :\n        const_set(:ClassMethods, Module.new)\n\n      mod.module_eval(&amp;class_methods_module_definition)\n    end\n  end\nend\n</code></pre>\n\n<p>You can see that <code>class_methods</code> just creates the module <code>ClassMethods</code> for you if it is not defined by yourself. The methods you defined are just instance methods in that module, so you can't call it at the module level.</p>\n\n<p>Later on, the module <code>ClassMethods</code> will be extended by the class that includes your concern. Here is the relevant source code:</p>\n\n<pre><code>module ActiveSupport\n  # ...\n  module Concern\n    def append_features(base)\n      if base.instance_variable_defined?(:@_dependencies)\n        # ...\n      else\n        # ...\n        base.extend const_get(:ClassMethods) if const_defined?(:ClassMethods)  # &lt;-- Notice this line\n        # ...\n      end\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 4072, "user_id": 456507, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/0c345a1eee78a5a2f5cec25b8424fd15?s=128&d=identicon&r=PG", "display_name": "Ivar", "link": "https://stackoverflow.com/users/456507/ivar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 38733413, "answer_count": 1, "score": 0, "last_activity_date": 1470191813, "creation_date": 1470188850, "question_id": 38733042, "link": "https://stackoverflow.com/questions/38733042/can-i-invoke-a-class-method-from-an-activerecordconcern-without-mixing-it-into", "title": "Can I invoke a class method from an ActiveRecord::Concern without mixing it into another class?", "body": "<p>I'm creating an <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/Concern.html\" rel=\"nofollow\">ActiveSupport::Concern</a> that defines several class methods using the <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/Concern.html#method-i-class_methods\" rel=\"nofollow\"><code>class_methods</code></a> method. With a regular module it is possible to invoke the class methods directly using <code>NameOfModule.target_method</code> (e.g. in the stdlib class Math it's common to invoke <a href=\"http://ruby-doc.org/core-2.2.2/Math.html#method-c-acos\" rel=\"nofollow\">acos</a> like so <code>Math.acos(x)</code>) but I'm at a loss finding how to perform a similar invocation my <code>Concern</code>. Is this possible, if so, how?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "helper"], "comments": [{"owner": {"reputation": 1507, "user_id": 2833161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2iuKF.jpg?s=128&g=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/2833161/owen"}, "edited": false, "score": 0, "creation_date": 1470188981, "post_id": 38733029, "comment_id": 64842153, "body": "I wouldn&#39;t recommend mixing view code into the helper. Simplify the helper (e.g. <code>def this_user?</code>) to just determine if the output should be shown. Then use <code>&lt;% if this_user? %&gt;template if logged in&lt;% else %&gt;template if logged out&lt;% end %&gt;</code>"}, {"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "reply_to_user": {"reputation": 1507, "user_id": 2833161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2iuKF.jpg?s=128&g=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/2833161/owen"}, "edited": false, "score": 0, "creation_date": 1470189042, "post_id": 38733029, "comment_id": 64842176, "body": "@Owen - what happens if the other user also happens to be logged in? I only want to show the full menu to the user that owns the profile."}, {"owner": {"reputation": 1507, "user_id": 2833161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2iuKF.jpg?s=128&g=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/2833161/owen"}, "edited": false, "score": 0, "creation_date": 1470189055, "post_id": 38733029, "comment_id": 64842178, "body": "Also - did you mean <code>@profile</code> or <code>profile</code> (as the latter is passed as a parameter to the helper)?"}, {"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "reply_to_user": {"reputation": 1507, "user_id": 2833161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2iuKF.jpg?s=128&g=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/2833161/owen"}, "edited": false, "score": 0, "creation_date": 1470189136, "post_id": 38733029, "comment_id": 64842198, "body": "Owen - I don&#39;t understand. In the show page, I want to show the menu items based on whether the user is the profile owner or a profile visitor. I think @profile is correct in that context because I want to give it the profile page being visited."}], "answers": [{"comments": [{"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1470189278, "post_id": 38733087, "comment_id": 64842230, "body": "Thank you  - that works. I&#39;ll accept when the timer allows me to."}], "tags": [], "owner": {"reputation": 1507, "user_id": 2833161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2iuKF.jpg?s=128&g=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/2833161/owen"}, "is_accepted": true, "score": 2, "last_activity_date": 1470189393, "last_edit_date": 1470189393, "creation_date": 1470189154, "answer_id": 38733087, "question_id": 38733029, "link": "https://stackoverflow.com/questions/38733029/rails-4-helper-method-not-responding-to-if-condition/38733087#38733087", "title": "Rails 4 - helper method not responding to if condition", "body": "<p>Your problem is using assignment instead of comparison.</p>\n\n<pre><code>if current_user.id = @profile.user_id \n</code></pre>\n\n<p>should read</p>\n\n<pre><code>if current_user.id == profile.user_id\n</code></pre>\n\n<p>However, while we're looking at this, you should consider separating the view code from application logic. All of the code to output the HTML should be in the view if possible. So your helper should be simplified, example as follows:</p>\n\n<pre><code>module ProfilesHelper\n  def logged_in_as?(profile)\n    current_user.id == profile.user_id\n  end\nend\n</code></pre>\n\n<p>Then your profile show can be:</p>\n\n<pre><code>&lt;ul id=\"nav\" class=\"row nopadding cd-side-navigation\"&gt;\n  &lt;% if logged_in_as?(@profile) %&gt;\n    &lt;li class='col-xs-4 col-sm-2 nopadding menuitem' style='background:#006F7F'&gt;\n      &lt;a href='index.html' class='hvr-sweep-to-bottom'&gt;\n        &lt;br&gt;&lt;br&gt;\n        &lt;span&gt;Dashboard&lt;/span&gt;\n      &lt;/a&gt;\n    &lt;/li&gt;\n  &lt;% else %&gt;\n    &lt;li class='col-xs-6 col-sm-3 nopadding menuitem blue'&gt;\n      &lt;a href='resume.html' class='hvr-sweep-to-bottom'&gt;\n        &lt;i class='flaticon-graduation61'&gt;\n        &lt;/i&gt;&lt;span&gt;Researh History&lt;/span&gt;&lt;/a&gt;\n    &lt;/li&gt;\n  &lt;% end %&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p>This way the HTML is all together and you don't need to mess around with your helper when you want to change it - plus, you can reuse it elsewhere for simple logic in other templates.</p>\n"}, {"comments": [{"owner": {"reputation": 795, "user_id": 1416586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56c9e88549055ec5a72a74cc152067ac?s=128&d=identicon&r=PG", "display_name": "Breno Perucchi", "link": "https://stackoverflow.com/users/1416586/breno-perucchi"}, "edited": false, "score": 0, "creation_date": 1470190091, "post_id": 38733207, "comment_id": 64842399, "body": "only after submit this post that I saw the answer of Owen."}, {"owner": {"reputation": 1507, "user_id": 2833161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2iuKF.jpg?s=128&g=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/2833161/owen"}, "edited": false, "score": 1, "creation_date": 1470190157, "post_id": 38733207, "comment_id": 64842414, "body": "Your code still has the unintended assignment operator."}], "tags": [], "owner": {"reputation": 795, "user_id": 1416586, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/56c9e88549055ec5a72a74cc152067ac?s=128&d=identicon&r=PG", "display_name": "Breno Perucchi", "link": "https://stackoverflow.com/users/1416586/breno-perucchi"}, "is_accepted": false, "score": 0, "last_activity_date": 1470190364, "last_edit_date": 1470190364, "creation_date": 1470189964, "answer_id": 38733207, "question_id": 38733029, "link": "https://stackoverflow.com/questions/38733029/rails-4-helper-method-not-responding-to-if-condition/38733207#38733207", "title": "Rails 4 - helper method not responding to if condition", "body": "<p>I'm agree with owen in this case that don't need create html recursive. I think is better is not abstract of the view.</p>\n\n<h3>profiles_Helper.rb</h3>\n\n<pre><code>module ProfilesHelper\n\n  def is_current_user?(profile)\n     current_user == profile.user\n  end\n\nend\n</code></pre>\n\n<h3>views/xxx.html.erb</h3>\n\n<pre><code>&lt;%- if is_current_user?(@profile) %&gt;\n  &lt;li class='col-xs-4 col-sm-2 nopadding menuitem' style='background:#006F7F'&gt;\n    &lt;a href='index.html' class='hvr-sweep-to-bottom'&gt;\n      &lt;br&gt;&lt;br&gt;\n      &lt;span&gt;Dashboard&lt;/span&gt;\n    &lt;/a&gt;\n  &lt;/li&gt;\"\n&lt;% else %&gt;\n  &lt;li class='col-xs-6 col-sm-3 nopadding menuitem blue'&gt;\n    &lt;a href='resume.html' class='hvr-sweep-to-bottom'&gt;\n      &lt;i class='flaticon-graduation61'&gt;\n      &lt;/i&gt;&lt;span&gt;Researh History&lt;/span&gt;\n    &lt;/a&gt;\n &lt;/li&gt;\"\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 38733087, "answer_count": 2, "score": 0, "last_activity_date": 1470190364, "creation_date": 1470188752, "question_id": 38733029, "link": "https://stackoverflow.com/questions/38733029/rails-4-helper-method-not-responding-to-if-condition", "title": "Rails 4 - helper method not responding to if condition", "body": "<p>I'm trying to figure out how to use a helper method in rails 4.</p>\n\n<p>I have profile show page - if the current user is looking at:\n-  their own profile page, they should have a menu with 6 options on that page (each option links to the visible bits of that user's profile); or else\n- another user's profile page, they should have a menu with 4 options on that page (each option links to a the visible bits of that other user's profile).</p>\n\n<p>In my helper folder, I have a profiles_helper.rb:</p>\n\n<pre><code>module ProfilesHelper\n\ndef items_for_profile_menu(profile)\n        if current_user.id = @profile.user_id \n      \"&lt;li class='col-xs-4 col-sm-2 nopadding menuitem' style='background:#006F7F'&gt;\n               &lt;a href='index.html' class='hvr-sweep-to-bottom'&gt;\n                      &lt;br&gt;&lt;br&gt;\n                      &lt;span&gt;Dashboard&lt;/span&gt;\n               &lt;/a&gt;\n        &lt;/li&gt;\"\n    else\n \"&lt;li class='col-xs-6 col-sm-3 nopadding menuitem blue'&gt;\n       &lt;a href='resume.html' class='hvr-sweep-to-bottom'&gt;\n       &lt;i class='flaticon-graduation61'&gt;\n       &lt;/i&gt;&lt;span&gt;Researh History&lt;/span&gt;&lt;/a&gt;\n   &lt;/li&gt;\"\n</code></pre>\n\n<p>In my profile show, I have:</p>\n\n<pre><code>&lt;ul id=\"nav\" class=\"row nopadding cd-side-navigation\"&gt;\n   &lt;%= raw (items_for_profile_menu(@profile)) %&gt;   \n&lt;/ul&gt;\n</code></pre>\n\n<p>When I save all this and try it - I get the same 6 item menu when I am logged in as the owner of the profile, as I do when I look at the profile from another account.</p>\n\n<p>How do I get this helper method to distinguish between the current user who's id is the same as the profile.user_id that is for the displayed profile and the current user's own profile page?</p>\n\n<p>My model associations are:</p>\n\n<p>User:</p>\n\n<pre><code>has_one :profile\n</code></pre>\n\n<p>Profile:</p>\n\n<pre><code>belongs_to :user\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "templates", "devise", "sendgrid"], "answers": [{"comments": [{"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1470187836, "post_id": 38732902, "comment_id": 64841911, "body": "@pradeep_sapkota - thanks for your note. That&#39;s not what I&#39;m trying to do. Sendgrid has a tempting system that allows you to create templates to use in sending transactional emails. In that template builder, I&#39;m trying to put some links. One problem is with making an ordinary link to a 3rd party url - that is displayed as a word instead of the url path. The second problem is giving that template a link which is a devise confirmation token."}, {"owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "reply_to_user": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1470208492, "post_id": 38732902, "comment_id": 64848596, "body": "this must solve your problem <a href=\"https://sendgrid.com/docs/API_Reference/SMTP_API/substitution_tags.html\" rel=\"nofollow noreferrer\">sendgrid.com/docs/API_Reference/SMTP_API/substitution_tags.h&zwnj;&#8203;tml</a>"}, {"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1470260927, "post_id": 38732902, "comment_id": 64882257, "body": "Do you know of any resources that help to explain how to use these tags in a rails app to call a template made in sendgrid. The documents refer to the need for different types of substitution tags based on which language is used. Are there any guides that help to explain this for rails apps?"}, {"owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "reply_to_user": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1470271688, "post_id": 38732902, "comment_id": 64885340, "body": "I do not use send grid at all there must be through documentation about it. I think first it needs data to be render to json and then in template use &lt;%paramater%&gt; or parameter! ."}, {"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1470272167, "post_id": 38732902, "comment_id": 64885447, "body": "someone must know how to do this. I have tried to setup campaign monitor(createsend is the gem for rails for CM); postmark; mailjet and now I&#39;m trying sendgrid. The documentation is indecipherable to me."}, {"owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "reply_to_user": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1470272371, "post_id": 38732902, "comment_id": 64885489, "body": "Open bounty for Question then any one expert can help you. Since I&#39;m not using send grid and using own created template then I couldn&#39;t explain more than this."}, {"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1470273394, "post_id": 38732902, "comment_id": 64886661, "body": "I appreciate the comments. I&#39;ve done several bounties for each of the previous attempts. I don&#39;t think it helps. I&#39;ll keep looking for help just the same."}], "tags": [], "owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "is_accepted": false, "score": 1, "last_activity_date": 1470187606, "creation_date": 1470187606, "answer_id": 38732902, "question_id": 38732759, "link": "https://stackoverflow.com/questions/38732759/rails-4-devise-mailer-using-sendgrid-template/38732902#38732902", "title": "Rails 4, devise mailer using sendgrid template", "body": "<p>You must post more error details to get answer. But this might be helpful.</p>\n\n<p><strong>Your Mailer</strong></p>\n\n<pre><code>class UserMailer &lt; ApplicationMailer\ndefault from: 'your@email.com'\n\ndef welcome_email(user)\n    @user = user // User\n    @url  = 'Url'\n    mail(to: @user.email, subject: 'Confirm your account')\nend \nend\n</code></pre>\n\n<p><strong>In your config/environment/development.rb or production.rb</strong></p>\n\n<pre><code>config.action_mailer.delivery_method = :smtp\nconfig.action_mailer.default_url_options = { :host =&gt; 'localhost:3000' }\nconfig.action_mailer.smtp_settings = {\naddress:              'smtp.gmail.com',\nport:                 587,\ndomain:               'example.com',\nuser_name:            '',\npassword:             '',\nauthentication:       'plain',\nenable_starttls_auto: true\n}\n</code></pre>\n\n<p><strong>In your controller</strong>\n<code>UserMailer.welcome_email(@user).deliver_now</code> or deliver_later</p>\n\n<p><strong>In your view file</strong></p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>http://myserver.com/accounts/confirm?confirmation_token=&lt;%=@user.confirmation_token%&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>This works for me and hope you too.</p>\n"}, {"tags": [], "owner": {"reputation": 35, "user_id": 2854718, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b2afa57b3906170615ec34c628a0e60?s=128&d=identicon&r=PG&f=1", "display_name": "AndyPandy_25Flow", "link": "https://stackoverflow.com/users/2854718/andypandy-25flow"}, "is_accepted": false, "score": 2, "last_activity_date": 1530275457, "creation_date": 1530275457, "answer_id": 51101819, "question_id": 38732759, "link": "https://stackoverflow.com/questions/38732759/rails-4-devise-mailer-using-sendgrid-template/51101819#51101819", "title": "Rails 4, devise mailer using sendgrid template", "body": "<p>I followed the Sendgrid-ruby docs here:\n<a href=\"https://github.com/sendgrid/sendgrid-ruby/blob/master/USE_CASES.md#with-mail-helper-class\" rel=\"nofollow noreferrer\">Sendgrid-ruby Using MailHelper Class</a></p>\n\n<p>Then combined the Devise docs on how to override their methods:\n<a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Use-custom-mailer\" rel=\"nofollow noreferrer\">How to Use Custom Mailer Devise</a></p>\n\n<p>In the case of sending the confirmation token, you can create a link or button in your template and use SendGrid substitutions to pass the token. </p>\n\n<p>An Example would be in: <code>/mailers/my_custom_mailer.rb</code></p>\n\n<pre><code> # Overriding Devise confirmation instructions method.\ndef confirmation_instructions(record, token, opts={})\n   @user = record\n   mail = Mail.new\n   mail.from = Email.new(email: 'info@example.com')\n   mail.subject = 'One last step '+ @user.name\n   personalization = Personalization.new\n   personalization.add_to(Email.new(email: @user.email))\n\n   # Get the confirmation token &amp; pass it to the substitution in your template\n   personalization.add_substitution(Substitution.new(key: '--confirmation--', \n                                                     value: @user.confirmation_token))\n\n   mail.add_personalization(personalization)\n   mail.template_id = 'SENDGRID_TEMPLATE_ID_HERE'\n\n   sg = SendGrid::API.new(api_key: ENV['SENDGRID_API_KEY'])\n   begin\n       response = sg.client.mail._(\"send\").post(request_body: mail.to_json)\n   rescue Exception =&gt; e\n       puts e.message\n   end\n   super\nend\n</code></pre>\n\n<p>Finally in my SendGrid Template, I would have a link or button like:</p>\n\n<pre><code>https://myexample.com/users/confirmation?confirmation_token=--confirmation--\n</code></pre>\n\n<p>Notice that the <strong>--confirmation--</strong> is the exact substitution key in <code>my_custom_mailer.rb</code></p>\n"}], "owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1455, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1530275457, "creation_date": 1470186243, "question_id": 38732759, "link": "https://stackoverflow.com/questions/38732759/rails-4-devise-mailer-using-sendgrid-template", "title": "Rails 4, devise mailer using sendgrid template", "body": "<p>I'm trying to figure out how to use Rails 4, so that my devise emails can be sent using Sendgrid templates.</p>\n\n<p>I'm making my first template in Sendgrid.</p>\n\n<p>I can't see how to give links a name. The insert link button on the sendgrid templates page lets you select whether the link is a URL or an email. I picked URL. Then it has one option to complete the https: address. I want to give that address a masked name (i.e. 'Schedule' - which his the link to the https schedule url).</p>\n\n<p>How do I do this in Sendgrid template?</p>\n\n<p>Also, I have a link to devise confirmation token as:</p>\n\n<pre><code>&lt;%= link_to 'Confirm account', confirmation_url(@resource, confirmation_token: @token) %&gt;\n</code></pre>\n\n<p>How do I give that token to Sendgrid in a sendgrid email template?</p>\n"}, {"tags": ["mysql", "ruby", "encryption", "obfuscation", "deobfuscation"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user41871"}, "is_accepted": false, "score": 1, "last_activity_date": 1470183905, "creation_date": 1470183905, "answer_id": 38732489, "question_id": 38732474, "link": "https://stackoverflow.com/questions/38732474/obfuscate-deobfuscate-data-in-ruby-and-mysql/38732489#38732489", "title": "Obfuscate/deobfuscate data in ruby and mysql", "body": "<p>You can use symmetric key encryption. Put the key in a config file and then use it to encrypt/decrypt the data in question.</p>\n"}], "owner": {"reputation": 1, "user_id": 5843752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39aa43f993fd318c68cc08bfc32df194?s=128&d=identicon&r=PG&f=1", "display_name": "NJ8", "link": "https://stackoverflow.com/users/5843752/nj8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1470183905, "creation_date": 1470183772, "question_id": 38732474, "link": "https://stackoverflow.com/questions/38732474/obfuscate-deobfuscate-data-in-ruby-and-mysql", "title": "Obfuscate/deobfuscate data in ruby and mysql", "body": "<p>I would want to obfuscate data when reading from mysql database using mysql. \nI want to be able to deobfuscate the data then in ruby to get back the original string.</p>\n\n<p>Eg. Value for one of the fields lets say name in mysql database is  = 'Hello World'</p>\n\n<p>I want to do something like :</p>\n\n<p>obfuscated_name = select obfuscate(name) from users where id = 1;\nobfuscated_name = 'pcdbdygcljidr2h5o8boWame'\nAnd then use this obfuscated_name in ruby and deobfuscate it</p>\n\n<p>SomeClass.deobfuscate(obfuscated_name) => 'Hello World'</p>\n\n<p>Whats the easiest and simplest way to do this so that same logic is applied in mysql as well ruby.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "string", "params"], "comments": [{"owner": {"reputation": 34621, "user_id": 259900, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c78e40f8fc27a048f10ece6956a2fdf2?s=128&d=identicon&r=PG", "display_name": "Kevin Sylvestre", "link": "https://stackoverflow.com/users/259900/kevin-sylvestre"}, "edited": false, "score": 0, "creation_date": 1470183076, "post_id": 38732324, "comment_id": 64840821, "body": "I think you probably need to review a basic tutorial on Rails. Try: <a href=\"https://www.youtube.com/watch?v=OaDhY_y8WTo\" rel=\"nofollow noreferrer\">youtube.com/watch?v=OaDhY_y8WTo</a>"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1470186186, "post_id": 38732324, "comment_id": 64841572, "body": "Agree you&#39;d do well to read some basic guides. These are the official Rails Guides and I strongly recommend reading through them - you will level up your rails knowledge really quick that way: <a href=\"http://guides.rubyonrails.org/\" rel=\"nofollow noreferrer\">guides.rubyonrails.org</a> :)"}, {"owner": {"reputation": 3, "user_id": 6669943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb51bea6cb0750108cf25f038fedc29b?s=128&d=identicon&r=PG&f=1", "display_name": "Drixzy", "link": "https://stackoverflow.com/users/6669943/drixzy"}, "edited": false, "score": 0, "creation_date": 1470260088, "post_id": 38732324, "comment_id": 64881879, "body": "Thanks guys, I appreciate the links! And thanks Pradeep for the answer, that was the problem!"}], "answers": [{"tags": [], "owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "is_accepted": true, "score": 0, "last_activity_date": 1470189030, "creation_date": 1470189030, "answer_id": 38733063, "question_id": 38732324, "link": "https://stackoverflow.com/questions/38732324/rails-get-params-to-save-string-to-db/38733063#38733063", "title": "Rails. Get params to save string to db", "body": "<p><strong>Common it your mistake solve it right now</strong>\ncorrect your code </p>\n\n<pre><code>def new\n#params['titel']\nmypage=Task.new \nmypage.name=params['titel'] \nmypage.completion=params['done']\nmypage.priority=params['priority']\nmypage.save\nredirect_to action: \"tasks\"\nend\n</code></pre>\n\n<p><strong>to</strong></p>\n\n<pre><code>def new\n#params['titel']\nmypage=Task.new \nmypage.name=params[:name] \nmypage.completion=params[:completion]\nmypage.priority=params[:priority]\nmypage.save\nredirect_to action: \"tasks\"\nend\n</code></pre>\n\n<p>The error is due to that you used different parameter name then name used in form.</p>\n"}], "owner": {"reputation": 3, "user_id": 6669943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb51bea6cb0750108cf25f038fedc29b?s=128&d=identicon&r=PG&f=1", "display_name": "Drixzy", "link": "https://stackoverflow.com/users/6669943/drixzy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 0, "accepted_answer_id": 38733063, "answer_count": 1, "score": -1, "last_activity_date": 1470192591, "creation_date": 1470182655, "last_edit_date": 1470192591, "question_id": 38732324, "link": "https://stackoverflow.com/questions/38732324/rails-get-params-to-save-string-to-db", "title": "Rails. Get params to save string to db", "body": "<p>I'm new to rails and was wondering how I get params to save string to DB.\nAs of now the only paramater that is being saved is the last one and that one is of the \"int\" type.</p>\n\n<p>Code below, I thank in advance for any comments!</p>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>def new\n    #params['titel']\n    mypage=Task.new \n    mypage.name=params['titel'] \n    mypage.completion=params['done']\n    mypage.priority=params['priority']\n    mypage.save\n\n    redirect_to action: \"tasks\"\n\n  end\n</code></pre>\n\n<p><strong>Database</strong></p>\n\n<pre><code>class CreateTasks &lt; ActiveRecord::Migration\n  def change\n    create_table :tasks do |t|\n\n      t.timestamps null: false\n    end\n\n    add_column :tasks, :name, :string\n    add_column :tasks, :completion, :string\n    add_column :tasks, :priority, :int\n\n  end\nend\n</code></pre>\n\n<p><strong>View</strong></p>\n\n<pre><code>&lt;form action=\"/asterix\" method=\"post\"&gt;\n    Name &lt;input name=\"name\"&gt;\n    &lt;br&gt;\n    Completion &lt;input name=\"completion\"&gt;\n    &lt;br&gt;\n    Priority &lt;input name=\"priority\"&gt;\n    &lt;br&gt;\n    &lt;button type=\"submit\"&gt;&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "testing", "devise"], "answers": [{"tags": [], "owner": {"reputation": 119, "user_id": 2856575, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1623590869/picture?type=large", "display_name": "Tiago Mendon&#231;a", "link": "https://stackoverflow.com/users/2856575/tiago-mendon%c3%a7a"}, "is_accepted": true, "score": 0, "last_activity_date": 1470227207, "creation_date": 1470227207, "answer_id": 38743649, "question_id": 38732315, "link": "https://stackoverflow.com/questions/38732315/rails-controller-tests-with-devise-sign-in-unexpected-behavior/38743649#38743649", "title": "Rails controller tests with devise sign in unexpected behavior", "body": "<p>I found a piece of code that was dealing with fixtures of a User model with devise and the confirmable option. So my users' fixture should look like this:</p>\n\n<h1>users.yml</h1>\n\n<pre><code>george:\n  name: George\n  email: george@example.com\n  encrypted_password: &lt;%= Devise::Encryptor.digest User, '123456' %&gt;\n  confirmed_at: &lt;%= Date.today %&gt;\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 2856575, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1623590869/picture?type=large", "display_name": "Tiago Mendon&#231;a", "link": "https://stackoverflow.com/users/2856575/tiago-mendon%c3%a7a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 38743649, "answer_count": 1, "score": 0, "last_activity_date": 1470227207, "creation_date": 1470182587, "last_edit_date": 1592644375, "question_id": 38732315, "link": "https://stackoverflow.com/questions/38732315/rails-controller-tests-with-devise-sign-in-unexpected-behavior", "title": "Rails controller tests with devise sign in unexpected behavior", "body": "<p>I am trying to create a simple tests on my application with devise. I have a redirect set up if the user is not logged in, but even though I use sign_in before the test I still get redirected. When I manually test this, it works fine.</p>\n<h1>users.yml</h1>\n<pre><code>george:\n  name: George\n  email: george@example.com\n  encrypted_password: &lt;%= Devise::Encryptor.digest User, '123456' %&gt;\n</code></pre>\n<h1>addresses.yml</h1>\n<pre><code>georges_home:\n  title: Home\n  receiver: George\n  street: '132 Mitchell St SW'\n  country: 'US'\n  city: 'Atlanta'\n  postal_code: '30303'\n  phone: '+1 404-524-5665'\n  state: 'Georgia'\n  user: george\n</code></pre>\n<h1>addresses_controller.rb</h1>\n<pre><code>class AddressesController &lt; ApplicationController\n  before_action :login_needed\n\n  def index\n    @addresses = Address.where(user_id: @current_user.id)\n  end\n\n  private\n  def login_needed\n    if !user_signed_in?\n      redirect_to new_user_session_path, alert: 'Please log in.'\n    end\n  end\nend\n</code></pre>\n<h1>addresses_controller_test.rb</h1>\n<pre><code>require 'test_helper'\n\nclass AddressesControllerTest &lt; ActionController::TestCase\n  include Devise::TestHelpers\n\n  setup do\n    sign_in users(:george)\n    @address = addresses(:georges_home)\n  end\n\n  test &quot;should get index&quot; do\n    get :index\n    assert_response :success\n    assert_not_nil assigns(:addresses)\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 2360, "user_id": 4541624, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/X0lol.jpg?s=128&g=1", "display_name": "Adam Thompson", "link": "https://stackoverflow.com/users/4541624/adam-thompson"}, "edited": false, "score": 0, "creation_date": 1470183192, "post_id": 38732309, "comment_id": 64840854, "body": "I&#39;m not sure what you mean that if I tried to run the code block you posted it would defined a class level instance variable not accessible from instances. From what I can tell it is an instance variable accessible by each different instance (a different copy everytime) isn&#39;t it?"}], "tags": [], "owner": {"reputation": 1507, "user_id": 2833161, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2iuKF.jpg?s=128&g=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/2833161/owen"}, "is_accepted": true, "score": 1, "last_activity_date": 1470183521, "last_edit_date": 1470183521, "creation_date": 1470182496, "answer_id": 38732309, "question_id": 38732183, "link": "https://stackoverflow.com/questions/38732183/why-use-setup-method-for-test-suites-in-ruby-on-rails/38732309#38732309", "title": "Why use setup method for test suites in Ruby on Rails?", "body": "<p>You are defining it as an instance variable. When the test is run the class (<code>StaticPagesControllerTest</code>) is <em>instantiated</em> and the setup function called on that instance, not on the class. If you tried to do the following instead it would define a class level instance variable not accessible from instances:</p>\n\n<pre><code>class StaticPagesControllerTest &lt; ActionDispatch::IntegrationTest\n\n  @base_title = \"Ruby on Rails Tutorial Sample App\"\n\n  test \"should get home\" do\n    get static_pages_home_url\n    assert_response :success\n    assert_select \"title\", \"Home | #{@base_title}\" # XXX not defined on instance\n  end\n...\n</code></pre>\n\n<p>See <a href=\"http://www.railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby/\" rel=\"nofollow\">this page</a> for one explanation of the difference.</p>\n\n<p>You could use a class variable (<code>@@base_title</code>) but that might cause surprising consequences later, e.g. if you wanted to subclass the test.</p>\n\n<p>Here's a quick demonstration:</p>\n\n<pre><code>class First\n  @a = 'hoge'\n  @@b = 'hoge'\n\n  def initialize\n    @c = 'hoge'\n  end\n\n  def give_me_a\n    @a\n  end\n\n  def give_me_b\n    @@b\n  end\n\n  def give_me_c\n    @c\n  end\nend\n\nf = First.new\n# =&gt; #&lt;First:0x007fb81607fcd0&gt;\nf.give_me_a\n# =&gt; nil\nf.give_me_b\n# =&gt; \"hoge\"\nf.give_me_c\n# =&gt; \"hoge\"\n</code></pre>\n"}], "owner": {"reputation": 2360, "user_id": 4541624, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/X0lol.jpg?s=128&g=1", "display_name": "Adam Thompson", "link": "https://stackoverflow.com/users/4541624/adam-thompson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "accepted_answer_id": 38732309, "answer_count": 1, "score": 0, "last_activity_date": 1581411085, "creation_date": 1470181512, "question_id": 38732183, "link": "https://stackoverflow.com/questions/38732183/why-use-setup-method-for-test-suites-in-ruby-on-rails", "title": "Why use setup method for test suites in Ruby on Rails?", "body": "<p>I am working through <code>railstutorial.org</code> and in our first test suite we setup an instance variable in a <code>setup</code> method.</p>\n\n<pre><code>require 'test_helper'\n\nclass StaticPagesControllerTest &lt; ActionDispatch::IntegrationTest\n\n  def setup\n    @base_title = \"Ruby on Rails Tutorial Sample App\"\n  end\n\n  test \"should get home\" do\n    get static_pages_home_url\n    assert_response :success\n    assert_select \"title\", \"Home | #{@base_title}\"\n  end\n\n  test \"should get help\" do\n    get static_pages_help_url\n    assert_response :success\n    assert_select \"title\", \"Help | #{@base_title}\"\n  end\n\n  test \"should get about\" do\n    get static_pages_about_url\n    assert_response :success\n    assert_select \"title\", \"About | #{@base_title}\"\n  end\nend\n</code></pre>\n\n<p>Why do we do this instead of just defining it straight up as an instance variable? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 1265, "user_id": 2215912, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f014888a1bf93036790f22dcabf77b6b?s=128&d=identicon&r=PG", "display_name": "avellable", "link": "https://stackoverflow.com/users/2215912/avellable"}, "is_accepted": true, "score": 0, "last_activity_date": 1470185222, "creation_date": 1470185222, "answer_id": 38732653, "question_id": 38731367, "link": "https://stackoverflow.com/questions/38731367/rspec-cant-find-controllers-uninitialized-constants/38732653#38732653", "title": "RSPEC Can&#39;t find Controllers Uninitialized Constants", "body": "<p>I think the problem might be here</p>\n\n<p><strong>spec/controllers/culture_test_controller_spec.rb</strong></p>\n\n<pre><code>RSpec.describe CultureTestController, type: :controller do\n</code></pre>\n\n<p>It should be:</p>\n\n<pre><code>RSpec.describe Api::CultureTestController, type: :controller do\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5857837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/938e65d8f163e0b2f57bcfa9d2dcb7e0?s=128&d=identicon&r=PG&f=1", "display_name": "Rodras", "link": "https://stackoverflow.com/users/5857837/rodras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2180, "favorite_count": 0, "accepted_answer_id": 38732653, "answer_count": 1, "score": 1, "last_activity_date": 1470185222, "creation_date": 1470176251, "last_edit_date": 1495541694, "question_id": 38731367, "link": "https://stackoverflow.com/questions/38731367/rspec-cant-find-controllers-uninitialized-constants", "title": "RSPEC Can&#39;t find Controllers Uninitialized Constants", "body": "<p>I recently started adding tests to my app and I am facing some issues regarding the controllers tests. When I try to run any controller test <strong>I get this error:</strong></p>\n\n<pre><code> -&gt; bundle exec rspec -c -b spec/controllers/culture_test_controller_spec.rb\n ActiveRecord::SchemaMigration Load (0.6ms)  SELECT \"schema_migrations\".* FROM \"schema_migrations\"\n/home/rodras/Github/talentank/spec/controllers/culture_test_controller_spec.rb:4:in `&lt;top (required)&gt;': uninitialized constant CultureTestController (NameError)\n</code></pre>\n\n<p>The strange thing is that all the models tests seem to be working fine, that is why I assume that the issue is not in <code>rails_helper.rb</code> nor in <code>spec_helper.rb</code></p>\n\n<p>I have already check questions that seemed to have the same problem such as: <a href=\"https://stackoverflow.com/questions/26288113/rspec-cannot-find-my-controllers-uninitialized-constant\">RSpec Cannot find my Controllers Uninitialized Constant</a> but the solutions offered there didn't help me</p>\n\n<p>These are my files. If there is any other file that you need in order solve the question please let me know, and I will update the question.</p>\n\n<p><strong>rails_helper.rb</strong></p>\n\n<pre><code># This file is copied to spec/ when you run 'rails generate rspec:install'\nENV[\"RAILS_ENV\"] ||= 'test'\nrequire 'spec_helper'\nrequire File.expand_path(\"../../config/environment\", __FILE__)\nrequire 'rspec/rails'\nrequire 'shoulda/matchers'\n# Add additional requires below this line. Rails is not loaded until this point!\n\n# Requires supporting ruby files with custom matchers and macros, etc, in\n# spec/support/ and its subdirectories. Files matching `spec/**/*_spec.rb` are\n# run as spec files by default. This means that files in spec/support that end\n# in _spec.rb will both be required and run as specs, causing the specs to be\n# run twice. It is recommended that you do not name files matching this glob to\n# end with _spec.rb. You can configure this pattern with the --pattern\n# option on the command line or in ~/.rspec, .rspec or `.rspec-local`.\n#\n# The following line is provided for convenience purposes. It has the downside\n# of increasing the boot-up time by auto-requiring all files in the support\n# directory. Alternatively, in the individual `*_spec.rb` files, manually\n# require only the support files necessary.\n#\n# Dir[Rails.root.join(\"spec/support/**/*.rb\")].each { |f| require f }\n\n# Checks for pending migrations before tests are run.\n# If you are not using ActiveRecord, you can remove this line.\nActiveRecord::Migration.maintain_test_schema!\n\nRSpec.configure do |config|\n  # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures\n  config.fixture_path = \"#{::Rails.root}/spec/fixtures\"\n  config.include FactoryGirl::Syntax::Methods\n\n  # If you're not using ActiveRecord, or you'd prefer not to run each of your\n  # examples within a transaction, remove the following line or assign false\n  # instead of true.\n  config.use_transactional_fixtures = true\n\n  # RSpec Rails can automatically mix in different behaviours to your tests\n  # based on their file location, for example enabling you to call `get` and\n  # `post` in specs under `spec/controllers`.\n  #\n  # You can disable this behaviour by removing the line below, and instead\n  # explicitly tag your specs with their type, e.g.:\n  #\n  #     RSpec.describe UsersController, :type =&gt; :controller do\n  #       # ...\n  #     end\n  #\n  # The different available types are documented in the features, such as in\n  # https://relishapp.com/rspec/rspec-rails/docs\n  config.infer_spec_type_from_file_location!\nend\nShoulda::Matchers.configure do |config|\n  config.integrate do |with|\n    with.test_framework :rspec\n    with.library :rails\n  end\nend\n</code></pre>\n\n<p><strong>spec_helper.rb</strong></p>\n\n<pre><code>require File.expand_path(\"../../config/environment\", __FILE__)\n# This file was generated by the `rails generate rspec:install` command. Conventionally, all\n# specs live under a `spec` directory, which RSpec adds to the `$LOAD_PATH`.\n# The generated `.rspec` file contains `--require spec_helper` which will cause this\n# file to always be loaded, without a need to explicitly require it in any files.\n#\n# Given that it is always loaded, you are encouraged to keep this file as\n# light-weight as possible. Requiring heavyweight dependencies from this file\n# will add to the boot time of your test suite on EVERY test run, even for an\n# individual file that may not need all of that loaded. Instead, consider making\n# a separate helper file that requires the additional dependencies and performs\n# the additional setup, and require it from the spec files that actually need it.\n#\n# The `.rspec` file also contains a few flags that are not defaults but that\n# users commonly want.\n#\n# See http://rubydoc.info/gems/rspec-core/RSpec/Core/Configuration\nRSpec.configure do |config|\n  # rspec-expectations config goes here. You can use an alternate\n  # assertion/expectation library such as wrong or the stdlib/minitest\n  # assertions if you prefer.\n  config.expect_with :rspec do |expectations|\n    # This option will default to `true` in RSpec 4. It makes the `description`\n    # and `failure_message` of custom matchers include text for helper methods\n    # defined using `chain`, e.g.:\n    # be_bigger_than(2).and_smaller_than(4).description\n    #   # =&gt; \"be bigger than 2 and smaller than 4\"\n    # ...rather than:\n    #   # =&gt; \"be bigger than 2\"\n    expectations.include_chain_clauses_in_custom_matcher_descriptions = true\n  end\n\n  # rspec-mocks config goes here. You can use an alternate test double\n  # library (such as bogus or mocha) by changing the `mock_with` option here.\n  config.mock_with :rspec do |mocks|\n    # Prevents you from mocking or stubbing a method that does not exist on\n    # a real object. This is generally recommended, and will default to\n    # `true` in RSpec 4.\n    mocks.verify_partial_doubles = true\n  end\n\n  # For using same seed as development environment\n   config.before(:all) do\n     #load Rails.root + \"db/seeds.rb\"\n     Rails.application.load_seed # loading seeds\n   end\n\n# The settings below are suggested to provide a good initial experience\n# with RSpec, but feel free to customize to your heart's content.\n begin\n  # These two settings work together to allow you to limit a spec run\n  # to individual examples or groups you care about by tagging them with\n  # `:focus` metadata. When nothing is tagged with `:focus`, all examples\n  # get run.\n  config.filter_run :focus\n  config.run_all_when_everything_filtered = true\n\n  # Limits the available syntax to the non-monkey patched syntax that is recommended.\n  # For more details, see:\n  #   - http://myronmars.to/n/dev-blog/2012/06/rspecs-new-expectation-syntax\n  #   - http://teaisaweso.me/blog/2013/05/27/rspecs-new-message-expectation-syntax/\n  #   - http://myronmars.to/n/dev-blog/2014/05/notable-changes-in-rspec-3#new__config_option_to_disable_rspeccore_monkey_patching\n  config.disable_monkey_patching!\n\n  # Many RSpec users commonly either run the entire suite or an individual\n  # file, and it's useful to allow more verbose output when running an\n  # individual spec file.\n  if config.files_to_run.one?\n    # Use the documentation formatter for detailed output,\n    # unless a formatter has already been configured\n    # (e.g. via a command-line flag).\n    config.default_formatter = 'doc'\n  end\n\n  # Print the 10 slowest examples and example groups at the\n  # end of the spec run, to help surface which specs are running\n  # particularly slow.\n  config.profile_examples = 10\n\n  # Run specs in random order to surface order dependencies. If you find an\n  # order dependency and want to debug it, you can fix the order by providing\n  # the seed, which is printed after each run.\n  #     --seed 1234\n  config.order = :random\n\n  # Seed global randomization in this process using the `--seed` CLI option.\n  # Setting this allows you to use `--seed` to deterministically reproduce\n  # test failures related to randomization by passing the same `--seed` value\n  # as the one that triggered the failure.\n  Kernel.srand config.seed\n end\nend\n</code></pre>\n\n<p><em>One of my controller tests</em>: <strong>spec/controllers/culture_test_controller_spec.rb</strong></p>\n\n<pre><code>require 'rails_helper'\nrequire 'rspec/its'\n\nRSpec.describe CultureTestController, type: :controller do\n  describe \"GET #index\" do\n    it \"returns a specific culture test\" do\n      culture_test = FactoryGirl(:culture_test)\n      get :index\n      expect(response).to render_text(:culture_test)\n    end\n    it \"returns all the culture tests\" do\n      culture_test = FactoryGirl(:invalid_culture_test)\n      get :index\n      expect(response).to render_text(CultureTest.all)\n    end\n\n  end\n\nend\n</code></pre>\n\n<p><em>The respective controller:</em> <strong>culture_test_controller.rb</strong></p>\n\n<pre><code>module Api\n    class CultureTestController &lt; ApplicationController\n        before_action :find_culture_test, only: [:show, :edit, :update, :registration, :results]\n\n    def index\n        if(params[:company_id] != nil &amp;&amp; params[:title] != nil)\n            respond_to do |format|\n                format.json{\n                    render text: CultureTest.where(:company_id =&gt; params[:company_id]).where(:title =&gt; params[:title]).first.to_json\n                }\n            end\n        else\n            respond_to do |format|\n                format.json{\n                    render text: CultureTest.all.to_json\n                }\n            end\n        end\n    end\n</code></pre>\n\n<p><strong>Gemfile:</strong></p>\n\n<pre><code>source 'https://rubygems.org'\n\nruby \"2.1.3\"\n\n### APP DEFAULT GEMS\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.2.0'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.1.0'\ngem 'sprockets', '2.12.3'\n# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\n# Removed so that we can use AngularJS\n# gem 'turbolinks'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\ngem 'responders'\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n# Bower package manager\ngem 'bower-rails'\ngem 'rails-html-sanitizer'\n\n\n### FRONT-END STUFF\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Using the jQuery UI framework\ngem 'jquery-ui-rails'\n# And some nice jQuery gems\ngem 'jquery-validation-rails'\ngem 'jquerymobile-rails'\n# Talentank's front-end devs prefer haml over erb\ngem 'haml'\n# Zurb's Foundation as HTML+CSS framework\ngem 'foundation-rails'\n# We want to use the Foundation icons too\ngem 'foundation-icons-sass-rails'\n# Font Awesome: awesome icons\ngem \"font-awesome-rails\"\n# Animate.css as a Rails gem (simple CSS animations)\ngem 'animate-rails'\n# EU cookies law\ngem 'cookies_eu'\n# Angular templates for simple Angular templates as asset referencing\ngem 'angular-rails-templates'\n# Gem for authenticate with protection token\ngem 'angular_rails_csrf'\n\n\n### BACK-END STUFF\n# let's use PostgreSQL. Yay!\ngem 'pg'\n# let's get rid of that webrick crap\ngem \"puma\"\n# Devise as user authenticator and session management\ngem 'devise'\n# gem 'devise_token_auth' # Token based authentication for Rails JSON APIs\n# gem 'omniauth' # required for devise_token_auth\n# Paperclip allows us to attach files (such as logos in company profiles)\ngem 'paperclip'\n# i18n for internationalization (app translation)\ngem 'i18n'\ngem 'i18n-js'\n# Globalize is used to translate the database\ngem 'globalize'\n# Simple_form for, guess what, simple forms\ngem 'simple_form'\n# Allows country selection in simple form\ngem 'country_select'\n# mail_form for simple, yet nice contact forms\ngem 'mail_form'\n\n\n### DEVOPS STUFF (anything related to the logistics of deploying the app)\n# rails_12factor has to do with Heroku and devops\ngem 'rails_12factor'\n# yaml_db: db migrations to heroku\ngem 'yaml_db'\n\n# Backend for working in background\ngem 'delayed_job_active_record'\n\n# To run jobs\ngem 'daemons'\n\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug'\n\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views\n  gem 'web-console', '~&gt; 2.0'\n\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\n\n  gem 'rspec-rails'\n  gem 'rspec-its'\n  gem 'shoulda-matchers', require: false# Helps with the test models with belongs_to and has_many\n  # Fuubar formats RSpec output in a nice way\n  # gem 'fuubar'\n  #FactoryGirl is a library for setting up Ruby objects as test data.\n  gem 'factory_girl_rails'\n  #Faker for creating fake dummy fields\n  gem 'faker'\n\n  gem 'mailcatcher'\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller", "undefined"], "answers": [{"tags": [], "owner": {"reputation": 539, "user_id": 4756005, "user_type": "registered", "profile_image": "https://graph.facebook.com/789842967777866/picture?type=large", "display_name": "Jo&#227;o Victor", "link": "https://stackoverflow.com/users/4756005/jo%c3%a3o-victor"}, "is_accepted": true, "score": 1, "last_activity_date": 1470181215, "creation_date": 1470181215, "answer_id": 38732137, "question_id": 38731344, "link": "https://stackoverflow.com/questions/38731344/how-to-update-attribute-of-child-model-in-parent-show-page-undefined-method/38732137#38732137", "title": "How to update attribute of child model in parent show page? Undefined Method", "body": "<p>I suspect that you will need to use fields_for tag\nCheck this out: <a href=\"http://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for\" rel=\"nofollow\">http://apidock.com/rails/ActionView/Helpers/FormHelper/fields_for</a></p>\n"}, {"tags": [], "owner": {"reputation": 1889, "user_id": 4209704, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/p8jsg.jpg?s=128&g=1", "display_name": "Pradeep Sapkota", "link": "https://stackoverflow.com/users/4209704/pradeep-sapkota"}, "is_accepted": false, "score": 0, "last_activity_date": 1470195474, "creation_date": 1470195474, "answer_id": 38733959, "question_id": 38731344, "link": "https://stackoverflow.com/questions/38731344/how-to-update-attribute-of-child-model-in-parent-show-page-undefined-method/38733959#38733959", "title": "How to update attribute of child model in parent show page? Undefined Method", "body": "<p><strong>I think you are making things complex your self</strong>\nbe clear about models and relationship you have and columns you need to update then edit your question. Then I can help.</p>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 38732137, "answer_count": 2, "score": 0, "last_activity_date": 1470195474, "creation_date": 1470176134, "question_id": 38731344, "link": "https://stackoverflow.com/questions/38731344/how-to-update-attribute-of-child-model-in-parent-show-page-undefined-method", "title": "How to update attribute of child model in parent show page? Undefined Method", "body": "<p>Getting error: <code>undefined method 'dueler'</code>.</p>\n\n<p>A <code>duel</code> has_many <code>duelers</code>.</p>\n\n<pre><code>Dueler.last\n id: 20,\n user_id: 78,\n challenge_id: 178,\n duel_id: 13,\n accept: nil&gt;\n</code></pre>\n\n<p>How can a dueler <code>:accept</code> the duel in <strong>duels/show.html.erb</strong>?</p>\n\n<pre><code>&lt;% @duel.duelers.each do |dueler| %&gt;\n  &lt;%= dueler.user.name %&gt; &lt;%= dueler.user.last_name %&gt; will &lt;%= dueler.challenge.name %&gt;&lt;br&gt;\n  &lt;% if current_user.id == dueler.user_id %&gt;\n    # undefined method 'dueler' for #&lt;Duel:0x007ffd32ae2400&gt;\n    &lt;%= form_for(@duel.dueler) do |f| %&gt; \n        &lt;%= f.check_box :accept %&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\nThe loser(s) will &lt;%= @duel.consequence %&gt;&lt;br&gt;\nIf everyone succeeds they will &lt;%= @duel.reward %&gt;\n</code></pre>\n"}, {"tags": ["java", "ruby", "heroku", "rake", "jruby"], "comments": [{"owner": {"reputation": 7, "user_id": 2969765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f416b23c7e84e0246366e38c0c35377?s=128&d=identicon&r=PG&f=1", "display_name": "cogitator", "link": "https://stackoverflow.com/users/2969765/cogitator"}, "reply_to_user": {"reputation": 3715, "user_id": 1241334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fCjAE.jpg?s=128&g=1", "display_name": "Jonny Henly", "link": "https://stackoverflow.com/users/1241334/jonny-henly"}, "edited": false, "score": 0, "creation_date": 1470176392, "post_id": 38731255, "comment_id": 64839057, "body": "@JonnyHenly Thanks. It&#39;s in <a href=\"https://devcenter.heroku.com/articles/getting-started-with-jruby#run-the-app-locally\" rel=\"nofollow noreferrer\">this page</a>. Look for the line &quot;<i>Now you can create the appropriate database and tables for the app using this rake task:</i>&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 9230, "user_id": 63308, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/666badca71c452ae51c999971419b506?s=128&d=identicon&r=PG", "display_name": "codefinger", "link": "https://stackoverflow.com/users/63308/codefinger"}, "is_accepted": false, "score": 0, "last_activity_date": 1470849639, "creation_date": 1470849639, "answer_id": 38879800, "question_id": 38731255, "link": "https://stackoverflow.com/questions/38731255/heroku-jruby-rake-aborted-java-lang-illegalaccessexception/38879800#38879800", "title": "Heroku - JRuby - rake aborted! - java.lang.IllegalAccessException", "body": "<p>Regarding your original problem, you probably need to install the Unlimited JCE into your local JDK. You can download them here:\n<a href=\"http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html\" rel=\"nofollow\">http://www.oracle.com/technetwork/java/javase/downloads/jce8-download-2133166.html</a></p>\n"}], "owner": {"reputation": 7, "user_id": 2969765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f416b23c7e84e0246366e38c0c35377?s=128&d=identicon&r=PG&f=1", "display_name": "cogitator", "link": "https://stackoverflow.com/users/2969765/cogitator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 598, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1544625575, "creation_date": 1470175663, "last_edit_date": 1544625575, "question_id": 38731255, "link": "https://stackoverflow.com/questions/38731255/heroku-jruby-rake-aborted-java-lang-illegalaccessexception", "title": "Heroku - JRuby - rake aborted! - java.lang.IllegalAccessException", "body": "<p>I am following the \"Getting Started on Heroku with Ruby (Microsoft Windows)\" tutorial. </p>\n\n<p>I have followed the steps carefully. However, when I entered this command...</p>\n\n<p><code>jruby -S bin\\rake db:create db:migrate --trace</code></p>\n\n<p><em>(which can be found in <a href=\"https://devcenter.heroku.com/articles/getting-started-with-jruby#run-the-app-locally\" rel=\"nofollow noreferrer\">this page</a>; look for the line \"Now you can create the appropriate database and tables for the app using this rake task:\".)</em></p>\n\n<p>...I got this error:</p>\n\n<blockquote>\n  <p>rake aborted!<br>\n  LoadError: load error:<br>\n  C:/Users/username/Desktop/jruby-getting-started/config/boot --\n  java.lang.IllegalAccessException: Can not set static final boolean\n  field javax.crypto.JceSecurity.isRestricted to java.lang.Boolean<br>\n  org/jruby/RubyKernel.java:940:in <code>require'<br>\n  C:/Users/username/Desktop/jruby-getting-started/config/application.rb:1:in\n  </code>'<br>\n  org/jruby/RubyKernel.java:940:in <code>require'<br>\n  C:/Users/username/Desktop/jruby-getting-started/rakefile:1:in</code>'<br>\n  org/jruby/RubyKernel.java:958:in <code>load'<br>\n  C:/Users/username/Desktop/jruby-getting-started/rakefile:4:in</code>(root)'<br>\n  C:/jruby-9.0.0.0/lib/ruby/gems/shared/gems/rake-10.4.0/lib/rake/rake_module.rb:1:in <code>(root)'<br>\n  C:/jruby-9.0.0.0/lib/ruby/gems/shared/gems/rake-10.4.0/lib/rake/rake_module.rb:28:in\n  </code>block in load_rakefile'<br>\n  C:/jruby-9.0.0.0/lib/ruby/gems/shared/gems/rake-10.4.0/lib/rake/application.rb:694:in\n  <code>raw_load_rakefile'<br>\n  C:/jruby-9.0.0.0/lib/ruby/gems/shared/gems/rake-10.4.0/lib/rake/application.rb:100:in\n  </code>load_rakefile'<br>\n  C:/jruby-9.0.0.0/lib/ruby/gems/shared/gems/rake-10.4.0/lib/rake/application.rb:182:in\n  <code>block in standard_exception_handling'<br>\n  C:/jruby-9.0.0.0/lib/ruby/gems/shared/gems/rake-10.4.0/lib/rake/application.rb:99:in\n  </code>load_rakefile'<br>\n  C:/jruby-9.0.0.0/lib/ruby/gems/shared/gems/rake-10.4.0/lib/rake/application.rb:83:in\n  <code>run'<br>\n  C:/jruby-9.0.0.0/lib/ruby/gems/shared/gems/rake-10.4.0/lib/rake/application.rb:182:in\n  </code>'<br>\n  org/jruby/RubyKernel.java:958:in <code>load' bin\\rake:17:in</code>'</p>\n</blockquote>\n\n<p>I have followed <a href=\"https://devcenter.heroku.com/articles/getting-started-with-ruby#run-the-app-locally\" rel=\"nofollow noreferrer\">this tutorial</a>, too, and I got a \"rake aborted!\" related error, too. This one:</p>\n\n<blockquote>\n  <p>rake aborted!<br>\n  LoadError: cannot load such file -- 2.2/pg_ext<br>\n  C:/tools/ruby22/lib/ruby/gems/2.2.0/gems/pg-0.17.1-x86-mingw32/lib/pg.rb:10:in\n  <code>require'<br>\n  C:/tools/ruby22/lib/ruby/gems/2.2.0/gems/pg-0.17.1-x86-mingw32/lib/pg.rb:10:in\n  </code>rescue in '<br>\n  C:/tools/ruby22/lib/ruby/gems/2.2.0/gems/pg-0.17.1-x86-mingw32/lib/pg.rb:3:in\n  <code>&lt;top (required)&gt;'<br>\n  C:/tools/ruby22/lib/ruby/gems/2.2.0/gems/bundler-1.12.5/lib/bundler/runtime.rb:86:in\n  </code>require'<br>\n  C:/tools/ruby22/lib/ruby/gems/2.2.0/gems/bundler-1.12.5/lib/bundler/runtime.rb:86:in\n  <code>block (2 levels) in require'<br>\n  C:/tools/ruby22/lib/ruby/gems/2.2.0/gems/bundler-1.12.5/lib/bundler/runtime.rb:81:in\n  </code>each'<br>\n  C:/tools/ruby22/lib/ruby/gems/2.2.0/gems/bundler-1.12.5/lib/bundler/runtime.rb:81:in\n  <code>block in require'<br>\n  C:/tools/ruby22/lib/ruby/gems/2.2.0/gems/bundler-1.12.5/lib/bundler/runtime.rb:70:in\n  </code>each'<br>\n  C:/tools/ruby22/lib/ruby/gems/2.2.0/gems/bundler-1.12.5/lib/bundler/runtime.rb:70:in\n  <code>require'<br>\n  C:/tools/ruby22/lib/ruby/gems/2.2.0/gems/bundler-1.12.5/lib/bundler.rb:102:in\n  </code>require'<br>\n  C:/Users/username/Desktop/ruby-getting-started/config/application.rb:7:in\n  <code>&lt;top (required)&gt;'<br>\n  C:/Users/username/Desktop/ruby-getting-started/Rakefile:4:in</code>require'<br>\n  C:/Users/username/Desktop/ruby-getting-started/Rakefile:4:in <code>&lt;top\n  (required)&gt;'<br>\n  C:/tools/ruby22/lib/ruby/2.2.0/rake/rake_module.rb:28:in</code>load'<br>\n  C:/tools/ruby22/lib/ruby/2.2.0/rake/rake_module.rb:28:in\n  <code>load_rakefile'<br>\n  C:/tools/ruby22/lib/ruby/2.2.0/rake/application.rb:689:in\n  </code>raw_load_rakefile'<br>\n  C:/tools/ruby22/lib/ruby/2.2.0/rake/application.rb:94:in <code>block in\n  load_rakefile'<br>\n  C:/tools/ruby22/lib/ruby/2.2.0/rake/application.rb:176:in\n  </code>standard_exception_handling'<br>\n  C:/tools/ruby22/lib/ruby/2.2.0/rake/application.rb:93:in\n  <code>load_rakefile'<br>\n  C:/tools/ruby22/lib/ruby/2.2.0/rake/application.rb:77:in</code>block in\n  run'<br>\n  C:/tools/ruby22/lib/ruby/2.2.0/rake/application.rb:176:in\n  <code>standard_exception_handling'<br>\n  C:/tools/ruby22/lib/ruby/2.2.0/rake/application.rb:75:in</code>run'<br>\n  C:/tools/ruby22/lib/ruby/gems/2.2.0/gems/rake-10.4.2/bin/rake:33:in\n  <code>&lt;top (required)&gt;'<br>\n  C:/tools/ruby22/bin/rake:23:in</code>load'<br>\n  C:/tools/ruby22/bin/rake:23:in <code>&lt;main&gt;'<br>\n  LoadError: cannot load such file -- pg_ext<br>\n  C:/tools/ruby22/lib/ruby/gems/2.2.0/gems/pg-0.17.1-x86-mingw32/lib/pg.rb:4:in\n  </code>require'<br>\n  C:/tools/ruby22/lib/ruby/gems/2.2.0/gems/pg-0.17.1-x86-mingw32/lib/pg.rb:4:in\n  <code>&lt;top (required)&gt;'<br>\n  C:/tools/ruby22/lib/ruby/gems/2.2.0/gems/bundler-1.12.5/lib/bundler/runtime.rb:86:in\n  </code>require'<br>\n  C:/tools/ruby22/lib/ruby/gems/2.2.0/gems/bundler-1.12.5/lib/bundler/runtime.rb:86:in\n  <code>block (2 levels) in require'<br>\n  C:/tools/ruby22/lib/ruby/gems/2.2.0/gems/bundler-1.12.5/lib/bundler/runtime.rb:81:in\n  </code>each'<br>\n  C:/tools/ruby22/lib/ruby/gems/2.2.0/gems/bundler-1.12.5/lib/bundler/runtime.rb:81:in\n  <code>block in require'<br>\n  C:/tools/ruby22/lib/ruby/gems/2.2.0/gems/bundler-1.12.5/lib/bundler/runtime.rb:70:in\n  </code>each'<br>\n  C:/tools/ruby22/lib/ruby/gems/2.2.0/gems/bundler-1.12.5/lib/bundler/runtime.rb:70:in\n  <code>require'<br>\n  C:/tools/ruby22/lib/ruby/gems/2.2.0/gems/bundler-1.12.5/lib/bundler.rb:102:in\n  </code>require'<br>\n  C:/Users/username/Desktop/ruby-getting-started/config/application.rb:7:in\n  <code>&lt;top (required)&gt;'<br>\n  C:/Users/username/Desktop/ruby-getting-started/Rakefile:4:in</code>require'<br>\n  C:/Users/username/Desktop/ruby-getting-started/Rakefile:4:in <code>&lt;top\n  (required)&gt;'<br>\n  C:/tools/ruby22/lib/ruby/2.2.0/rake/rake_module.rb:28:in</code>load'<br>\n  C:/tools/ruby22/lib/ruby/2.2.0/rake/rake_module.rb:28:in\n  <code>load_rakefile'<br>\n  C:/tools/ruby22/lib/ruby/2.2.0/rake/application.rb:689:in\n  </code>raw_load_rakefile'<br>\n  C:/tools/ruby22/lib/ruby/2.2.0/rake/application.rb:94:in <code>block in\n  load_rakefile'<br>\n  C:/tools/ruby22/lib/ruby/2.2.0/rake/application.rb:176:in\n  </code>standard_exception_handling'<br>\n  C:/tools/ruby22/lib/ruby/2.2.0/rake/application.rb:93:in\n  <code>load_rakefile'<br>\n  C:/tools/ruby22/lib/ruby/2.2.0/rake/application.rb:77:in</code>block in\n  run'<br>\n  C:/tools/ruby22/lib/ruby/2.2.0/rake/application.rb:176:in\n  <code>standard_exception_handling'<br>\n  C:/tools/ruby22/lib/ruby/2.2.0/rake/application.rb:75:in</code>run'<br>\n  C:/tools/ruby22/lib/ruby/gems/2.2.0/gems/rake-10.4.2/bin/rake:33:in\n  <code>&lt;top (required)&gt;'<br>\n  C:/tools/ruby22/bin/rake:23:in</code>load'<br>\n  C:/tools/ruby22/bin/rake:23:in `'</p>\n</blockquote>\n\n<p>Thank you in advance for your answers/solutions.  </p>\n\n<p><strong>EDIT:</strong><br>\nI am on Windows 10. This problem, was solved reading the answer found here:\n<a href=\"https://stackoverflow.com/questions/15314423/i-get-a-pg-error-when-trying-to-destroy-a-controller/15340125#15340125\">I get a pg error when trying to destroy a controller</a>.</p>\n\n<p>Then, another problem came up, which was solved reading the answer found here:<br>\n<a href=\"https://stackoverflow.com/questions/23338356/pgconnectionbad-fatal-role-myname-does-not-exist/23841599#23841599\">PG::ConnectionBad FATAL: role \u201cMyname\u201d does not exist</a>.  </p>\n\n<p>Then, another problem came up, which was solved reading the answer found here:<br>\n<a href=\"https://github.com/tzinfo/tzinfo/wiki/Resolving-TZInfo::DataSourceNotFound-Errors\" rel=\"nofollow noreferrer\">Resolving TZInfo::DataSourceNotFound Errors</a>.  </p>\n\n<p>Then, another problem came up, when trying to run an app locally, via this command:<br>\n<code>heroku local</code>  </p>\n\n<blockquote>\n  <p>[OKAY] Loaded ENV .env File as KEY=VALUE Format<br>\n  3:44:09 PM web.1 | ERROR: worker mode not supported on JRuby or Windows<br>\n  [DONE] Killing all processes with signal  null 3:44:09 PM web.1 Exited with exit code 1  </p>\n</blockquote>\n\n<p>I read the advice on the second aforementioned tutorial, by adding a <em>Procfile.windows</em> file (modified as: <code>web: ruby -S puma -t 5:5 -p %PORT% -e development</code>) in the root directory.  </p>\n\n<p>Then, another problem came up, when trying to run an app locally, via this command:<br>\n<code>heroku local web -f Procfile.windows</code>  </p>\n\n<blockquote>\n  <p>[OKAY] Loaded ENV .env File as KEY=VALUE Format   3:55:01 PM web.1 | \n  C:/Program\n  Files/Heroku/ruby-2.1.7/lib/ruby/2.1.0/rubygems/dependency.rb:298:in\n  <code>to_specs'   [DONE] Killing all processes with signal  null   3:55:01\n  PM web.1 |  : Could not find 'puma' (&gt;= 0) among 8 total gem(s)\n  (Gem::LoadError)   3:55:01 PM web.1 |      from C:/Program\n  Files/Heroku/ruby-2.1.7/lib/ruby/2.1.0/rubygems/dependency.rb:309:in\n  </code>to_spec'   3:55:01 PM web.1 |      from C:/Program\n  Files/Heroku/ruby-2.1.7/lib/ruby/2.1.0/rubygems/core_ext/kernel_gem.rb:53:in\n  <code>gem'   3:55:01 PM web.1 |      from C:/tools/ruby22/bin/puma:22:in\n  </code>' 3:55:01 PM web.1 Exited with exit code 1</p>\n</blockquote>\n\n<p>As of yet, I cannot find a solution for this one. It seems that the problem is that Heroku uses internally another version of Ruby (that's the v2.1.7 one as shown above, instead of the v2.2.4 installed elsewhere), which does not contain the gem named \"puma\".</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "activerecord", "erb", "nested-forms"], "answers": [{"tags": [], "owner": {"reputation": 505, "user_id": 5909738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNscA.jpg?s=128&g=1", "display_name": "Tashows", "link": "https://stackoverflow.com/users/5909738/tashows"}, "is_accepted": true, "score": 1, "last_activity_date": 1470905003, "creation_date": 1470905003, "answer_id": 38891438, "question_id": 38730791, "link": "https://stackoverflow.com/questions/38730791/how-to-use-a-checkbox-to-modify-a-value-from-each-object-of-a-model-using-a-nest/38891438#38891438", "title": "How to use a checkbox to modify a value from each object of a model using a nested form", "body": "<p>Try changing this:</p>\n\n<pre><code>&lt;%= f.fields_for :units do |ff| %&gt;\n  &lt;% @units.each do |unit| %&gt;\n    &lt;% unless unit.sold %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;%= unit.product.name %&gt;&lt;/td&gt;\n        &lt;td&gt;\n            &lt;%= ff.label :into_remission, \"Nombre de tu Marca:\" %&gt;\n            &lt;%= ff.check_box :into_remission%&gt;\n        &lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;% end %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>into this:</p>\n\n<pre><code>&lt;% @units.each do |unit| %&gt;\n  &lt;%= f.fields_for :units, unit do |ff| %&gt;\n    &lt;% unless unit.sold %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;%= unit.product.name %&gt;&lt;/td&gt;\n        &lt;td&gt;\n            &lt;%= ff.label :into_remission, \"Nombre de tu Marca:\" %&gt;\n            &lt;%= ff.check_box :into_remission%&gt;\n        &lt;/td&gt;\n      &lt;/tr&gt;\n      &lt;% end %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I think you should first iterate over the units and pass each unit separately into the fields for. That should solve the showing issue.</p>\n"}], "owner": {"reputation": 21, "user_id": 5965360, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/10154555438115260/picture?type=large", "display_name": "Bambi&#39;s Dilemma", "link": "https://stackoverflow.com/users/5965360/bambis-dilemma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "accepted_answer_id": 38891438, "answer_count": 1, "score": 0, "last_activity_date": 1470905003, "creation_date": 1470173414, "question_id": 38730791, "link": "https://stackoverflow.com/questions/38730791/how-to-use-a-checkbox-to-modify-a-value-from-each-object-of-a-model-using-a-nest", "title": "How to use a checkbox to modify a value from each object of a model using a nested form", "body": "<p>I'm new at programming and I have a question related to making a form in ruby in rails. I'm making a database for storing products' units. These units are, upon creation, initially located at the storage. This location is stored in a column Unit model. Then I have a model Store and a model Remission. </p>\n\n<pre><code>class Unit &lt; ActiveRecord::Base\n  belongs_to :store\n  belongs_to :remission\n  attr_accessor :into_remission\nend\n\nclass Remission &lt; ActiveRecord::Base\n  belongs_to :store\n  has_many :units\n  accepts_nested_attributes_for :units\nend\n\nclass Store &lt; ActiveRecord::Base\n  has_many :units\n  has_many :remissions\nend\n</code></pre>\n\n<p>Store has_many :remissions and Remission has_many :units. The idea is that when I put some units for selling in a store I have to create a remission. This remission is the list of products that I gave the store so we both can have a reference of which products are at the store. So I have a form to create a remission in which you can select the store that would change the store_id(reference) of the Remission. I also want to select from this same form the units that would take part in this new remission changing the remission_id(reference) from each unit. For that I made a attar_accessor :into_remissions in the Unit model so I could change that to true in each unit that would end up in the remission with a checkbox. I having a lot of problems making this work, here is the code of my form:</p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-md-6 col-md-offset-3\"&gt;\n    &lt;%= form_for(@remission) do |f| %&gt;\n      &lt;%= render 'shared/error_messages_remissions' %&gt;\n#Here you select the store that would own the remission and the products\n      &lt;div class=\"field\"&gt;\n        &lt;%= f.label :store_id, \"Producto\" %&gt; &lt;br/&gt;\n        &lt;%= f.collection_select :store_id, @stores.order(:name), :id, :name, prompt: \"Select Store\" %&gt;\n      &lt;/div&gt;\n#Here its a dynamic table that display all the products in storage\n        &lt;table id=\"products\" class=\"table table-striped table-bordered\" cellspacing=\"0\" width=\"100%\"&gt;\n          &lt;thead&gt;\n            &lt;tr&gt;\n              &lt;th&gt;Product Name&lt;/th&gt;\n              &lt;th&gt;Remission&lt;/th&gt;\n            &lt;/tr&gt;\n          &lt;/thead&gt;\n          &lt;tbody&gt;\n      #HERE I WANT TO MAKE A CHECK_BOX THAT CHANGES THE INTO_REMISSION VALUE FROM EACH UNIT. SO IT MARKS THE UNITS THAT WOULD TAKE PART IN THE REMISSION\n          &lt;%= f.fields_for :units do |ff| %&gt;\n            &lt;% @units.each do |unit| %&gt;\n              &lt;% unless unit.sold %&gt;\n                &lt;tr&gt;\n                  &lt;td&gt;&lt;%= unit.product.name %&gt;&lt;/td&gt;\n                  &lt;td&gt;\n                      &lt;%= ff.label :into_remission, \"Nombre de tu Marca:\" %&gt;\n                      &lt;%= ff.check_box :into_remission%&gt;\n                  &lt;/td&gt;\n                &lt;/tr&gt;\n                &lt;% end %&gt;\n            &lt;% end %&gt;\n          &lt;% end %&gt;\n          &lt;/tbody&gt;\n        &lt;/table&gt;\n        &lt;%= f.submit \"Submit\", class: \"btn btn-primary\" %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Needless to say he check_box its now showing nor working.\nI not sure how to make this work and any advices would be welcome as I'm new with rails and programming. Thanks</p>\n"}, {"tags": ["ruby", "rally", "lookbackapi"], "answers": [{"tags": [], "owner": {"reputation": 344, "user_id": 6415671, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/10206890667050829/picture?type=large", "display_name": "Timothy Chen", "link": "https://stackoverflow.com/users/6415671/timothy-chen"}, "is_accepted": true, "score": 0, "last_activity_date": 1470245111, "creation_date": 1470245111, "answer_id": 38750091, "question_id": 38730597, "link": "https://stackoverflow.com/questions/38730597/how-to-query-rallys-lookback-api-based-on-release-name-or-oid/38750091#38750091", "title": "How to query Rally&#39;s Lookback API based on Release Name or OID?", "body": "<p>Oops, simple mistake on my end but I'll post it just in case anyone else is trying to do the same thing: the project OID has to be the same as the project which is in the release you're trying to query. Or better yet, just remove the project parameter!</p>\n"}], "owner": {"reputation": 344, "user_id": 6415671, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/10206890667050829/picture?type=large", "display_name": "Timothy Chen", "link": "https://stackoverflow.com/users/6415671/timothy-chen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 38750091, "answer_count": 1, "score": 0, "last_activity_date": 1470245111, "creation_date": 1470172593, "question_id": 38730597, "link": "https://stackoverflow.com/questions/38730597/how-to-query-rallys-lookback-api-based-on-release-name-or-oid", "title": "How to query Rally&#39;s Lookback API based on Release Name or OID?", "body": "<p>I'm using the <a href=\"https://gist.github.com/anonymous/cad56b0d4d4ba58cb091\" rel=\"nofollow\">Rally Ruby Lookback Connection Helper</a> to query Rally's Lookback API using Ruby.</p>\n\n<p>Here's my <code>query_obj</code>:</p>\n\n<pre><code>query_obj = {\n  \"find\" =&gt; {\n    \"_ProjectHierarchy\": [ProjectObjectID here],\n    \"_TypeHierarchy\" =&gt; \"Defect\",\n    \"Release\" =&gt; [ReleaseObjectID here],\n    \"__At\": [DateTime here]\n  },\n  \"fields\" =&gt; [\"Severity\", \"State\", \"Name\", \"Release\"],\n  \"start\" =&gt; 0,\n  \"pagesize\" =&gt; 1000,\n  \"hydrate\": [\"Severity\", \"State\", \"Release\"]\n}\n</code></pre>\n\n<p>I know that everything else works since I've been using this query when not querying with the additional release parameter. If anyone knows the keyword to pair with the release object id, that'd be super helpful. Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 5250, "user_id": 5154683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae81933dce5ced9ec019414bbd4f0f4?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Nubel", "link": "https://stackoverflow.com/users/5154683/robert-nubel"}, "is_accepted": true, "score": 1, "last_activity_date": 1470176892, "creation_date": 1470176892, "answer_id": 38731479, "question_id": 38730582, "link": "https://stackoverflow.com/questions/38730582/how-to-handle-a-datetime-style-like-saturdays-at-0105-jst/38731479#38731479", "title": "How to handle a DateTIme style like Saturdays at 01:05 (JST)", "body": "<p>Assuming you're literally scraping the string <code>Saturdays at 01:05 (JST)</code> off of the website, there are a few things to consider.</p>\n\n<p>First, a single DateTime field is not <em>really</em> going to be able to represent a recurring time, like you have. Gems like <a href=\"https://github.com/seejohnrun/ice_cube\" rel=\"nofollow\">IceCube</a> were created to handle the complexities of recurring, scheduled dates. But you can get by with one DateTime field, under the assumption that it stores one instance of the broadcast and all other broadcasts are at the same time and day every week.</p>\n\n<p>Now, you need to parse the string you're scraping into that date. The easiest way to do this is with the <a href=\"https://github.com/seejohnrun/ice_cube\" rel=\"nofollow\">Chronic</a> gem, which takes all sorts of English-worded time representations and turns it into a date. With your date, you need to unpluralize \"Saturdays\" so that Chronic knows to just find the next Saturday:</p>\n\n<pre><code>require 'chronic'\n\nstring = \"Saturdays at 1:30 (JST)\"\nbroadcast = Chronic.parse(string.sub('days', 'day'))\n</code></pre>\n\n<p>The <code>broadcast</code> variable now holds a <code>DateTime</code> value which you can store directly into the database. Don't worry about the time zone -- Chronic returned a Time value with zone information, so Rails will store it into your database in UTC, and convert it back out to your server timezone whenever you load it.</p>\n\n<p>If you do want to convert the time to a specific zone ever, you can do so easily:</p>\n\n<pre><code>pst_time = broadcast.in_time_zone('Pacific Time (US &amp; Canada)')\n</code></pre>\n"}], "owner": {"reputation": 323, "user_id": 3338886, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/75b47755e1a595760e9bce7e4eefa2f4?s=128&d=identicon&r=PG&f=1", "display_name": "Wesly", "link": "https://stackoverflow.com/users/3338886/wesly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 38731479, "answer_count": 1, "score": 0, "last_activity_date": 1470176892, "creation_date": 1470172515, "question_id": 38730582, "link": "https://stackoverflow.com/questions/38730582/how-to-handle-a-datetime-style-like-saturdays-at-0105-jst", "title": "How to handle a DateTIme style like Saturdays at 01:05 (JST)", "body": "<p>I'm scraping a site to get the date and time a episode comes out on. So what i'm getting is Saturdays at 01:05 (JST) which is the time in japan. I have a field in my episodes table called broadcast and it has a DateTime format.\nWhat is the best way to handle this and to change the time zone to (pst)?</p>\n"}, {"tags": ["arrays", "ruby", "loops", "hash"], "answers": [{"tags": [], "owner": {"reputation": 5966, "user_id": 2477691, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DaiPF.jpg?s=128&g=1", "display_name": "chumakoff", "link": "https://stackoverflow.com/users/2477691/chumakoff"}, "is_accepted": true, "score": 1, "last_activity_date": 1470173460, "creation_date": 1470173460, "answer_id": 38730801, "question_id": 38730400, "link": "https://stackoverflow.com/questions/38730400/how-to-loop-hashes-within-an-array/38730801#38730801", "title": "How to loop hashes within an array", "body": "<pre><code>data = []\n\n3.times do\n  puts \"Name?, eg. Willow Rosenberg\"\n  name = gets.chomp\n  number = rand(1000..9000) + 1\n\n  hash = {\n    name: name,\n    number: number,\n    email: name.split(' ').last + number.to_s[1..3] + \"@btvs.com\"\n  }\n\n  data &lt;&lt; hash\nend\n\nputs data\n</code></pre>\n"}], "owner": {"reputation": 425, "user_id": 6660836, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/05ea963bbb083f7b33cc7463088149c4?s=128&d=identicon&r=PG&f=1", "display_name": "morrime", "link": "https://stackoverflow.com/users/6660836/morrime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 1, "accepted_answer_id": 38730801, "answer_count": 1, "score": 0, "last_activity_date": 1488494122, "creation_date": 1470171773, "last_edit_date": 1488494122, "question_id": 38730400, "link": "https://stackoverflow.com/questions/38730400/how-to-loop-hashes-within-an-array", "title": "How to loop hashes within an array", "body": "<p>I need to use a loop in my code so the user is prompted with \"Name?\" three times, and each answer is stored as a new hash within the data array. Each answer should also have a new random number generated for it, and an email. </p>\n\n<p>I need <code>puts data</code> to output all three hashes and their contents. I've tried using <code>3.times do</code>, but I'm having trouble:</p>\n\n<pre><code>data = Array.new()\n\nputs \"Name?, eg. Willow Rosenberg\"\nname = gets.chomp\nnumber = rand(1000..9000) + 1\n    data = [\n        {\n        name: name,\n        number: number,\n        email: name.split(' ').last + number.to_s[1..3] + \"@btvs.com\"\n        }\n    ]\n\nputs data\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 2221, "user_id": 5921203, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/lczFa.jpg?s=128&g=1", "display_name": "Steven Aguilar", "link": "https://stackoverflow.com/users/5921203/steven-aguilar"}, "edited": false, "score": 0, "creation_date": 1470175029, "post_id": 38731077, "comment_id": 64838586, "body": "I am getting the following error when I run the code. ``` Failure/Error: now_serving(other_deli)              #&lt;IO:&lt;STDOUT&gt;&gt; received :puts with unexpected arguments          expected: (&quot;Currently serving Logan.&quot;)               got: (&quot;Currently serving Avi.&quot;) - @chumakoff"}, {"owner": {"reputation": 5966, "user_id": 2477691, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DaiPF.jpg?s=128&g=1", "display_name": "chumakoff", "link": "https://stackoverflow.com/users/2477691/chumakoff"}, "reply_to_user": {"reputation": 2221, "user_id": 5921203, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/lczFa.jpg?s=128&g=1", "display_name": "Steven Aguilar", "link": "https://stackoverflow.com/users/5921203/steven-aguilar"}, "edited": false, "score": 0, "creation_date": 1470177519, "post_id": 38731077, "comment_id": 64839429, "body": "What are <code>katz_deli</code> and <code>other_deli</code>? Where are these from?"}, {"owner": {"reputation": 2221, "user_id": 5921203, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/lczFa.jpg?s=128&g=1", "display_name": "Steven Aguilar", "link": "https://stackoverflow.com/users/5921203/steven-aguilar"}, "edited": false, "score": 0, "creation_date": 1470177601, "post_id": 38731077, "comment_id": 64839459, "body": "these are some tests from Rspec. @chumakoff"}, {"owner": {"reputation": 2221, "user_id": 5921203, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/lczFa.jpg?s=128&g=1", "display_name": "Steven Aguilar", "link": "https://stackoverflow.com/users/5921203/steven-aguilar"}, "edited": false, "score": 0, "creation_date": 1470177771, "post_id": 38731077, "comment_id": 64839517, "body": "The Rspec file is given to tests the code from an online educational source. <a href=\"https://github.com/learn-co-curriculum/deli-counter\" rel=\"nofollow noreferrer\">github.com/learn-co-curriculum/deli-counter</a> This link shows the instructions to follow.@chumakoff"}, {"owner": {"reputation": 5966, "user_id": 2477691, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DaiPF.jpg?s=128&g=1", "display_name": "chumakoff", "link": "https://stackoverflow.com/users/2477691/chumakoff"}, "reply_to_user": {"reputation": 2221, "user_id": 5921203, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/lczFa.jpg?s=128&g=1", "display_name": "Steven Aguilar", "link": "https://stackoverflow.com/users/5921203/steven-aguilar"}, "edited": false, "score": 1, "creation_date": 1470177990, "post_id": 38731077, "comment_id": 64839581, "body": "Sorry, have no time for this"}], "tags": [], "owner": {"reputation": 5966, "user_id": 2477691, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/DaiPF.jpg?s=128&g=1", "display_name": "chumakoff", "link": "https://stackoverflow.com/users/2477691/chumakoff"}, "is_accepted": false, "score": 0, "last_activity_date": 1470174616, "creation_date": 1470174616, "answer_id": 38731077, "question_id": 38730393, "link": "https://stackoverflow.com/questions/38730393/fifo-ruby-queues-algorithm-not-working/38731077#38731077", "title": "FIFO Ruby Queues algorithm not working", "body": "<p>It is a bad idea to shift an array at the same time you loop through it.</p>\n\n<pre><code>def now_serving(array)\n  while name = array.shift\n    puts \"Currently serving #{name}.\"\n  end\n\n  puts \"There is nobody waiting to be served!\"\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2221, "user_id": 5921203, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/lczFa.jpg?s=128&g=1", "display_name": "Steven Aguilar", "link": "https://stackoverflow.com/users/5921203/steven-aguilar"}, "is_accepted": false, "score": 0, "last_activity_date": 1470261164, "creation_date": 1470261164, "answer_id": 38754250, "question_id": 38730393, "link": "https://stackoverflow.com/questions/38730393/fifo-ruby-queues-algorithm-not-working/38754250#38754250", "title": "FIFO Ruby Queues algorithm not working", "body": "<p>So this fixed my bug</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>def now_serving(array)\r\n  queue = Queue.new\r\n  queue = array\r\n    \r\n    if array.length &gt; 0\r\n    puts \"Currently serving #{array[0]}.\"\r\n    array.shift\r\n    else\r\n    puts \"There is nobody waiting to be served!\"\r\n    end\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"reputation": 2221, "user_id": 5921203, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/lczFa.jpg?s=128&g=1", "display_name": "Steven Aguilar", "link": "https://stackoverflow.com/users/5921203/steven-aguilar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1470261164, "creation_date": 1470171751, "question_id": 38730393, "link": "https://stackoverflow.com/questions/38730393/fifo-ruby-queues-algorithm-not-working", "title": "FIFO Ruby Queues algorithm not working", "body": "<p>Build the now_serving method which should call out (i.e. puts) the next person in line and then remove them from the front. If there is nobody in line, it should call out (puts) that \"There is nobody waiting to be served!\". When I try to use the shift method to get rid of the first element in the array. I end up with the wrong output. Here is the Ruby code:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>def now_serving(array)\r\n  while array.length != 0\r\n    array.each do |name|\r\n      puts \"Currently serving #{name}.\"\r\n      array.shift\r\n      end\r\n  end\r\n    puts \"There is nobody waiting to be served!\"\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>But the array.shift is only working once, How do I get it to drop the first element of an array continuously. Here is the code for the Rspec:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>describe \"#now_serving\" do\r\n    context \"there are no people in line\" do\r\n      it \"should say that the line is empty\" do\r\n        expect($stdout).to receive(:puts).with(\"There is nobody waiting to be served!\")\r\n        now_serving(katz_deli)\r\n      end\r\n    end\r\n\r\n    context \"there are people in line\" do\r\n      it \"should serve the first person in line and remove them from the queue\" do\r\n        expect($stdout).to receive(:puts).with(\"Currently serving Logan.\")\r\n        now_serving(other_deli)\r\n        expect(other_deli).to eq(%w(Avi Spencer))\r\n      end\r\n    end\r\n  end\r\n\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}]