[{"tags": ["ruby", "watir"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1450919220, "post_id": 34445240, "comment_id": 56634022, "body": "Without the (minimal amount of) HTML to reproduce the issue, it&#39;s just guesswork.  I suggest posting the HTML and any watir code that you&#39;ve written to solve the problem."}], "answers": [{"tags": [], "owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "is_accepted": true, "score": 1, "last_activity_date": 1450920424, "creation_date": 1450920424, "answer_id": 34446102, "question_id": 34445240, "link": "https://stackoverflow.com/questions/34445240/how-to-find-out-a-cell-that-has-checkbox-in-it-in-watir/34446102#34446102", "title": "how to find out a cell that has checkbox in it in watir?", "body": "<p>Without seeing sample HTML, this is a total shot-in-the-dark, but here's a possible approach.  </p>\n\n<p>Given this contrived HTML snippet:</p>\n\n<pre><code>&lt;table&gt;\n  &lt;tr&gt;&lt;td id=\"foo\"&gt;&lt;input type=\"checkbox\" name=\"foo\"&gt;&lt;/tr&gt;&lt;/td&gt;\n  &lt;tr&gt;&lt;td id=\"bar\"&gt;&lt;input type=\"checkbox\" name=\"bar\"&gt;&lt;/tr&gt;&lt;/td&gt;\n  &lt;tr&gt;&lt;td id=\"text\"&gt;text&lt;/tr&gt;&lt;/td&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>You could use the <code>checkboxes</code> method to locate the checkboxes and then use the <code>parent</code> method to get the id of the cell that contains the checkbox (assuming the cell has an id):</p>\n\n<pre><code>b.checkboxes.each { |checkbox| puts checkbox.parent.id}\n#=&gt; foo\n#=&gt; bar\n</code></pre>\n\n<p>If you want to <code>flash</code> the checkboxes, this might work depending on how the page is implemented:</p>\n\n<pre><code>b.checkboxes.each { |checkbox| checkbox.flash}\n</code></pre>\n\n<p>Like I said, total guess.  But it's the giving season, so there you go.</p>\n"}], "owner": {"reputation": 1049, "user_id": 4635750, "user_type": "registered", "accept_rate": 49, "profile_image": "https://graph.facebook.com/847597188612174/picture?type=large", "display_name": "Nodir Nasirov", "link": "https://stackoverflow.com/users/4635750/nodir-nasirov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 34446102, "answer_count": 1, "score": 0, "last_activity_date": 1450920424, "creation_date": 1450913019, "question_id": 34445240, "link": "https://stackoverflow.com/questions/34445240/how-to-find-out-a-cell-that-has-checkbox-in-it-in-watir", "title": "how to find out a cell that has checkbox in it in watir?", "body": "<p>I have a table with several columns and rows, in some cells there are checkboxes.\nso how can i flash those cells in watir?\nIs there method that returns what element is located in particular cell?</p>\n"}, {"tags": ["javascript", "jquery", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 173951, "user_id": 47738, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/53ee7b8cd087180a542867d4491d9681?s=128&d=identicon&r=PG", "display_name": "rahul", "link": "https://stackoverflow.com/users/47738/rahul"}, "edited": false, "score": 0, "creation_date": 1450912218, "post_id": 34445059, "comment_id": 56632099, "body": "Can you post the generated HTML in the browser?"}, {"owner": {"reputation": 833, "user_id": 3915892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/CMVW5.jpg?s=128&g=1", "display_name": "DanielsV", "link": "https://stackoverflow.com/users/3915892/danielsv"}, "reply_to_user": {"reputation": 76753, "user_id": 1026459, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/pv5mS.png?s=128&g=1", "display_name": "Travis J", "link": "https://stackoverflow.com/users/1026459/travis-j"}, "edited": false, "score": 0, "creation_date": 1450912360, "post_id": 34445059, "comment_id": 56632133, "body": "@TravisJ thanks it worked! you can submit this as answer. I will accept it."}], "answers": [{"tags": [], "owner": {"reputation": 76753, "user_id": 1026459, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/pv5mS.png?s=128&g=1", "display_name": "Travis J", "link": "https://stackoverflow.com/users/1026459/travis-j"}, "is_accepted": true, "score": 2, "last_activity_date": 1450912423, "creation_date": 1450912423, "answer_id": 34445142, "question_id": 34445059, "link": "https://stackoverflow.com/questions/34445059/jquery-adding-span-integer-values-doesnt-work/34445142#34445142", "title": "jquery adding span integer values doesn&#39;t work", "body": "<p>As written, the DOM elements are not accessible when the script executes. The result is that no elements are changed. Wrap your \"application.js\" in a dom ready callback function using jQuery's <code>$(function{})</code> or native <code>addEventListener</code> with \"load\".</p>\n"}], "owner": {"reputation": 833, "user_id": 3915892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/CMVW5.jpg?s=128&g=1", "display_name": "DanielsV", "link": "https://stackoverflow.com/users/3915892/danielsv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "closed_date": 1450912487, "accepted_answer_id": 34445142, "answer_count": 1, "score": 1, "last_activity_date": 1450912423, "creation_date": 1450911931, "question_id": 34445059, "link": "https://stackoverflow.com/questions/34445059/jquery-adding-span-integer-values-doesnt-work", "closed_reason": "Duplicate", "title": "jquery adding span integer values doesn&#39;t work", "body": "<p>Don't know why it doesn't work. jquery isn't adding them up. It displays just 00. I'm using rails 4.</p>\n\n<pre><code># application.js \nvar sum = 0;\n$('.sum1').each(function() {\n  sum += +$(this).text()||0;\n});\n$(\"#sum1_total\").text(sum);\n\n\n# view\n&lt;% @modification.boxes.each do |d| %&gt;  \n  &lt;tr class=\"sum\"&gt;\n    &lt;td&gt;&lt;%= best_in_place d, :shares, :type =&gt; :input, :class =&gt; :sum1 %&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;% end %&gt; \n&lt;tr&gt;\n  &lt;td&gt;&lt;span id=\"sum1_total\"&gt;00&lt;/span&gt;&lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "rspec", "factory-bot"], "comments": [{"owner": {"reputation": 6455, "user_id": 2363967, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e456a6a8bd35a0e65c22d202b48ccfa4?s=128&d=identicon&r=PG", "display_name": "Andrew Williamson", "link": "https://stackoverflow.com/users/2363967/andrew-williamson"}, "edited": false, "score": 0, "creation_date": 1450912305, "post_id": 34445041, "comment_id": 56632119, "body": "It&#39;s coming from line 3 or 4 in FitnessGoalsController.create"}, {"owner": {"reputation": 366, "user_id": 4368437, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1c9d1ba391d6d3ef3336421958d6c714?s=128&d=identicon&r=PG&f=1", "display_name": "codeinspired", "link": "https://stackoverflow.com/users/4368437/codeinspired"}, "reply_to_user": {"reputation": 6455, "user_id": 2363967, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e456a6a8bd35a0e65c22d202b48ccfa4?s=128&d=identicon&r=PG", "display_name": "Andrew Williamson", "link": "https://stackoverflow.com/users/2363967/andrew-williamson"}, "edited": false, "score": 0, "creation_date": 1450912519, "post_id": 34445041, "comment_id": 56632188, "body": "@Andrew Williamson - As I mentioned in my question, I&#39;m aware of where the error is coming from in the controller.  I&#39;m just stuck on how to resolve it."}, {"owner": {"reputation": 6455, "user_id": 2363967, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e456a6a8bd35a0e65c22d202b48ccfa4?s=128&d=identicon&r=PG", "display_name": "Andrew Williamson", "link": "https://stackoverflow.com/users/2363967/andrew-williamson"}, "edited": false, "score": 0, "creation_date": 1450912598, "post_id": 34445041, "comment_id": 56632223, "body": "Well a good place to start would be printing the params variable, and making sure that params[:fitness_goal][:activity_ids] and params[:fitness_goal][:target_ids] are both defined"}, {"owner": {"reputation": 366, "user_id": 4368437, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1c9d1ba391d6d3ef3336421958d6c714?s=128&d=identicon&r=PG&f=1", "display_name": "codeinspired", "link": "https://stackoverflow.com/users/4368437/codeinspired"}, "reply_to_user": {"reputation": 6455, "user_id": 2363967, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e456a6a8bd35a0e65c22d202b48ccfa4?s=128&d=identicon&r=PG", "display_name": "Andrew Williamson", "link": "https://stackoverflow.com/users/2363967/andrew-williamson"}, "edited": false, "score": 0, "creation_date": 1450913025, "post_id": 34445041, "comment_id": 56632371, "body": "Using Pry / Better Errors, I can confirm that both params variables are defined."}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1450913793, "post_id": 34445041, "comment_id": 56632633, "body": "It really looks like they&#39;re not.  Can you <code>pry</code> your create method, run the test, and then examine <code>fitness_goal_params</code> and maybe edit your question to include the value?"}, {"owner": {"reputation": 366, "user_id": 4368437, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1c9d1ba391d6d3ef3336421958d6c714?s=128&d=identicon&r=PG&f=1", "display_name": "codeinspired", "link": "https://stackoverflow.com/users/4368437/codeinspired"}, "edited": false, "score": 0, "creation_date": 1450914084, "post_id": 34445041, "comment_id": 56632712, "body": "I added results from binding.pry / Better Errors."}], "answers": [{"comments": [{"owner": {"reputation": 366, "user_id": 4368437, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1c9d1ba391d6d3ef3336421958d6c714?s=128&d=identicon&r=PG&f=1", "display_name": "codeinspired", "link": "https://stackoverflow.com/users/4368437/codeinspired"}, "edited": false, "score": 0, "creation_date": 1450914702, "post_id": 34445419, "comment_id": 56632878, "body": "I changed the unless statement but still getting the error:  NoMethodError: undefined method `reject&#39; for nil:NilClass"}, {"owner": {"reputation": 1041, "user_id": 1454143, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/44360e6437e6f1a83b61f34b2485185e?s=128&d=identicon&r=PG", "display_name": "Pierre Michard", "link": "https://stackoverflow.com/users/1454143/pierre-michard"}, "reply_to_user": {"reputation": 366, "user_id": 4368437, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1c9d1ba391d6d3ef3336421958d6c714?s=128&d=identicon&r=PG&f=1", "display_name": "codeinspired", "link": "https://stackoverflow.com/users/4368437/codeinspired"}, "edited": false, "score": 0, "creation_date": 1450914996, "post_id": 34445419, "comment_id": 56632956, "body": "Yes there is another error on the unless statement, I will edit my response"}, {"owner": {"reputation": 1041, "user_id": 1454143, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/44360e6437e6f1a83b61f34b2485185e?s=128&d=identicon&r=PG", "display_name": "Pierre Michard", "link": "https://stackoverflow.com/users/1454143/pierre-michard"}, "reply_to_user": {"reputation": 366, "user_id": 4368437, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1c9d1ba391d6d3ef3336421958d6c714?s=128&d=identicon&r=PG&f=1", "display_name": "codeinspired", "link": "https://stackoverflow.com/users/4368437/codeinspired"}, "edited": false, "score": 0, "creation_date": 1450915183, "post_id": 34445419, "comment_id": 56633007, "body": "you could also simplify your code by using reject! method"}, {"owner": {"reputation": 366, "user_id": 4368437, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1c9d1ba391d6d3ef3336421958d6c714?s=128&d=identicon&r=PG&f=1", "display_name": "codeinspired", "link": "https://stackoverflow.com/users/4368437/codeinspired"}, "edited": false, "score": 0, "creation_date": 1450915739, "post_id": 34445419, "comment_id": 56633173, "body": "The revised unless statement triggers a new error:   ActionView::MissingTemplate:        Missing template fitness_goals/create, application/create with {:locale=&gt;[:en], :formats=&gt;[:html], :variants=&gt;[], :handlers=&gt;[:erb, :builder, :raw, :ruby, :coffee, :jbuilder]}. Searched in:          * &quot;#&lt;RSpec::Rails::ViewRendering::EmptyTemplatePathSetDecorato&zwnj;&#8203;r:0x00000005794758&gt;&quot;"}, {"owner": {"reputation": 1041, "user_id": 1454143, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/44360e6437e6f1a83b61f34b2485185e?s=128&d=identicon&r=PG", "display_name": "Pierre Michard", "link": "https://stackoverflow.com/users/1454143/pierre-michard"}, "reply_to_user": {"reputation": 366, "user_id": 4368437, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1c9d1ba391d6d3ef3336421958d6c714?s=128&d=identicon&r=PG&f=1", "display_name": "codeinspired", "link": "https://stackoverflow.com/users/4368437/codeinspired"}, "edited": false, "score": 0, "creation_date": 1450916127, "post_id": 34445419, "comment_id": 56633269, "body": "your in the case when unless contition is true. following your code, in this case the create method just does nothing; no render nor redirect is called. If you indent your code correctly, that will show your thing more clearly."}, {"owner": {"reputation": 366, "user_id": 4368437, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1c9d1ba391d6d3ef3336421958d6c714?s=128&d=identicon&r=PG&f=1", "display_name": "codeinspired", "link": "https://stackoverflow.com/users/4368437/codeinspired"}, "edited": false, "score": 0, "creation_date": 1450916537, "post_id": 34445419, "comment_id": 56633373, "body": "Any more ideas on how to solve the problem that&#39;s causing the test to fail when the reject method is called?  BTW, thanks for the suggestion to use reject! instead of reject."}, {"owner": {"reputation": 1041, "user_id": 1454143, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/44360e6437e6f1a83b61f34b2485185e?s=128&d=identicon&r=PG", "display_name": "Pierre Michard", "link": "https://stackoverflow.com/users/1454143/pierre-michard"}, "reply_to_user": {"reputation": 366, "user_id": 4368437, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1c9d1ba391d6d3ef3336421958d6c714?s=128&d=identicon&r=PG&f=1", "display_name": "codeinspired", "link": "https://stackoverflow.com/users/4368437/codeinspired"}, "edited": false, "score": 0, "creation_date": 1450916761, "post_id": 34445419, "comment_id": 56633418, "body": "you could call <code>render &#39;new&#39;</code> when the unless condition is true."}], "tags": [], "owner": {"reputation": 1041, "user_id": 1454143, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/44360e6437e6f1a83b61f34b2485185e?s=128&d=identicon&r=PG", "display_name": "Pierre Michard", "link": "https://stackoverflow.com/users/1454143/pierre-michard"}, "is_accepted": false, "score": 0, "last_activity_date": 1450915787, "last_edit_date": 1450915787, "creation_date": 1450914380, "answer_id": 34445419, "question_id": 34445041, "link": "https://stackoverflow.com/questions/34445041/rspec-post-create-tests-failing-with-undefined-method-reject-for-nilnilclass/34445419#34445419", "title": "Rspec POST: create tests failing with undefined method `reject&#39; for nil:NilClass?", "body": "<p>I see 2 bugs on your code which could explain that:</p>\n\n<ol>\n<li><p>you use <code>&amp;&amp;</code> operator when your probably mean to use <code>||</code></p></li>\n<li><p>You check for <code>params[:activity_ids]</code> but try to use <code>params[:fitness_goal][:activity_ids]</code></p></li>\n</ol>\n\n<p>so you could change: </p>\n\n<pre><code>unless params[:fitness_goal].blank? &amp;&amp; params[:activity_ids].blank? &amp;&amp; params[:target_ids].blank?\n</code></pre>\n\n<p>by:</p>\n\n<pre><code>unless params[:fitness_goal].blank? || params[:fitness_goal][:activity_ids].blank? || params[:fitness_goal][:target_ids].blank?\n</code></pre>\n"}], "owner": {"reputation": 366, "user_id": 4368437, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1c9d1ba391d6d3ef3336421958d6c714?s=128&d=identicon&r=PG&f=1", "display_name": "codeinspired", "link": "https://stackoverflow.com/users/4368437/codeinspired"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 641, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1450915787, "creation_date": 1450911836, "last_edit_date": 1450914390, "question_id": 34445041, "link": "https://stackoverflow.com/questions/34445041/rspec-post-create-tests-failing-with-undefined-method-reject-for-nilnilclass", "title": "Rspec POST: create tests failing with undefined method `reject&#39; for nil:NilClass?", "body": "<p>I have a Rails (4.1.8) application with Rspec (3.1.0) and FactoryGirl (4.5.0) for testing. My controller tests for the post create action fail with the following error:</p>\n\n<pre><code>Failure/Error: post :create, { member_id: @member, fitness_goal: @fitness_goal_attributes }\n NoMethodError:\n   undefined method `reject' for nil:NilClass\n</code></pre>\n\n<p>The fitness goal factory:</p>\n\n<pre><code>FactoryGirl.define do\n\nfactory :fitness_goal do\nassociation :goal_list\nassociation :timeframe\nstart_date Date.current\nend_date Date.current + 30\ntargets { [create(:target, outcome: \"Lose Fat\"), create(:target, outcome: \"Reduce caloric intake by x%\")] }\nactivities { [create(:activity, description: \"Walk x steps a day\"), create(:activity, description: \"Climb x floors a day\"), create(:activity, description: \"Run x mile a day\")] }   \nassociation :member\nassociation :trainer\nnotes 'This is a sample note.'\nend\nend\n</code></pre>\n\n<p>The relevant FactoryGirl instance variable:</p>\n\n<pre><code>@fitness_goal_attributes = FactoryGirl.build(:fitness_goal).attributes\n</code></pre>\n\n<p>I'm using the Array reject method in my Fitness Goals Controller's create action:</p>\n\n<pre><code>def create\n  unless params[:fitness_goal].blank? &amp;&amp; params[:activity_ids].blank? &amp;&amp; params[:target_ids].blank?\n  params[:fitness_goal][:activity_ids] = params[:fitness_goal][:activity_ids].reject{ |activity_ids| activity_ids.empty? }   \n  params[:fitness_goal][:target_ids] = params[:fitness_goal][:target_ids].reject{ |target_ids| target_ids.empty? }      \n  @fitness_goal = @member.fitness_goals.build(fitness_goal_params)\n\n  if @fitness_goal.save \n    flash[:success] = \"Fitness goal was successfully created.\"\n    redirect_to member_fitness_goals_path(@member)\n  else\n    render 'new'\n  end\n end\nend\n</code></pre>\n\n<p>The fitness goal params:</p>\n\n<pre><code>def fitness_goal_params\n  params.require(:fitness_goal).permit(:goal_list_id, :timeframe_id, :start_date, :end_date, { target_ids: [] }, { activity_ids: [] }, :notes, :member_id, :trainer_id)\n end\n</code></pre>\n\n<p>**** EDIT ******\nResults from binding.pry / Better Errors:</p>\n\n<pre><code>params[:fitness_goal][:activity_ids]\n=&gt; [\"12\", \"10\", \"11\"]\n\nparams[:fitness_goal][:target_ids]\n=&gt; [\"1\", \"2\"]\n\n params[:fitness_goal]\n =&gt; {\"goal_list_id\"=&gt;\"1\", \"timeframe_id\"=&gt;\"2\", \"start_date\"=&gt;\"2015-12-16\", \"end_date\"=&gt;\"2016-01-15\", \"target_ids\"=&gt;[\"1\", \"2\"], \"activity_ids\"=&gt;[\"12\", \"10\", \"11\"], \"trainer_id\"=&gt;\"\", \"notes\"=&gt;\"testing\"}\n</code></pre>\n\n<p>***** EDIT *****</p>\n\n<p>The application works as expected in development and production environments but Rspec throws the error for all tests of the POST create method. I can't figure out why the unless statement is not acting as a \"nil guard\" when I call the reject method on the arrays. What am I doing wrong and how do I resolve the error?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter-bootstrap", "flash-message"], "comments": [{"owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "edited": false, "score": 0, "creation_date": 1450909952, "post_id": 34444501, "comment_id": 56631314, "body": "have you registered this flash message type in <code>ApplicationController</code>? <code>add_flash_types :danger</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1450909361, "post_id": 34444576, "comment_id": 56631090, "body": "Thanks for your help! I replaced your flash code with mine, but then when the flash popped up <code>flash[:danger] = &#39;Striked added&#39;</code> it still showed as an <code>alert-info</code> instead of as danger"}, {"owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1450909416, "post_id": 34444576, "comment_id": 56631119, "body": "sorry I&#39;m not sure what you mean by &quot;I replaced your flash code with mine.&quot; What did you end up with in the <code>:class</code> option?"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1450909465, "post_id": 34444576, "comment_id": 56631139, "body": "This is the html output: <code>&lt;div class=&quot;alert alert-info &quot;&gt;Striked added&lt;&#47;div&gt;</code>"}, {"owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1450909491, "post_id": 34444576, "comment_id": 56631152, "body": "Can you share the value of your <code>:class</code> option in the ruby code?"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1450909619, "post_id": 34444576, "comment_id": 56631197, "body": "Sorry now I&#39;m confused. <code>:class</code> option? I copy and pasted your code so the class is <code>&quot;alert alert-info #{&#39;red&#39; if name == :danger}&quot;</code>"}, {"owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1450909716, "post_id": 34444576, "comment_id": 56631229, "body": "ah. are you sure <code>:danger</code> is showing up as the <code>name</code> variable in that code? it sounds like the conditional <code>name == :danger</code> isn&#39;t returning <code>true</code>"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1450909885, "post_id": 34444576, "comment_id": 56631286, "body": "Yea I&#39;m sure. I think alert alert-info is overriding <code>:danger</code> before it can be used for the conditional or <code>:danger</code> isn&#39;t being set at all since if I take out the whole class then nothing comes up for the flash"}, {"owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1450910079, "post_id": 34444576, "comment_id": 56631359, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/98863/discussion-between-sixty4bit-and-anthonygalli-com\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "is_accepted": true, "score": 4, "last_activity_date": 1450909050, "creation_date": 1450909050, "answer_id": 34444576, "question_id": 34444501, "link": "https://stackoverflow.com/questions/34444501/flash-message-customization/34444576#34444576", "title": "Flash Message Customization", "body": "<p>You can use string interpolation in the <code>:class</code> option with a conditional statement to add another class for only a certain kind of flash:</p>\n\n<pre><code>&lt;% flash.each do |name, msg| %&gt;\n  &lt;%= content_tag(:div, msg, class: \"alert alert-info #{'red' if name == :danger}\") %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 34444576, "answer_count": 1, "score": 0, "last_activity_date": 1450962698, "creation_date": 1450908616, "last_edit_date": 1450962698, "question_id": 34444501, "link": "https://stackoverflow.com/questions/34444501/flash-message-customization", "title": "Flash Message Customization", "body": "<p>In my <strong>application.rb</strong>:</p>\n\n<pre><code>&lt;% flash.each do |name, msg| %&gt;\n  &lt;%= content_tag(:div, msg, class: \"alert alert-info\") %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>which works for me because I have about 10 different flash lines of code, but on only one of them I want the flash to display as red</p>\n\n<pre><code>flash[:danger] = 'Striked added' # MAKE RED\n</code></pre>\n\n<p>Do you know a quick fix?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 6455, "user_id": 2363967, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/e456a6a8bd35a0e65c22d202b48ccfa4?s=128&d=identicon&r=PG", "display_name": "Andrew Williamson", "link": "https://stackoverflow.com/users/2363967/andrew-williamson"}, "edited": false, "score": 0, "creation_date": 1450908427, "post_id": 34444347, "comment_id": 56630712, "body": "Try adding the closing div element <b>&lt;/div&gt;</b> to the end of the html"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1450909711, "post_id": 34444347, "comment_id": 56631227, "body": "What is your question?"}], "answers": [{"tags": [], "owner": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "is_accepted": true, "score": 2, "last_activity_date": 1450909987, "creation_date": 1450909987, "answer_id": 34444750, "question_id": 34444347, "link": "https://stackoverflow.com/questions/34444347/search-form-is-not-displayed/34444750#34444750", "title": "Search form is not displayed", "body": "<p>you are missing equal sign.</p>\n\n<pre><code>&lt;%= form_tag 'mainbase', :method =&gt; 'get' do %&gt;\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 5488889, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cc68f903b6b664161c93ae328631c06b?s=128&d=identicon&r=PG&f=1", "display_name": "Luka Baryshych", "link": "https://stackoverflow.com/users/5488889/luka-baryshych"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "accepted_answer_id": 34444750, "answer_count": 1, "score": -1, "last_activity_date": 1450909987, "creation_date": 1450907837, "question_id": 34444347, "link": "https://stackoverflow.com/questions/34444347/search-form-is-not-displayed", "title": "Search form is not displayed", "body": "<p>I tried to create a sample search form from railsCast #37:\nrailscasts.com/episodes/37-simple-search-form</p>\n\n<p>And my text field looks invisible or hidden. Here is my code:</p>\n\n<p>View:</p>\n\n<pre><code>&lt;div&gt;\n&lt;% form_tag 'mainbase', :method =&gt; 'get' do %&gt;\n  &lt;p&gt;\n    &lt;%= text_field_tag :search, params[:search] %&gt;\n    &lt;%= submit_tag \"Search\", :name =&gt; nil %&gt;\n  &lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p></p>\n\n<p>Controller:</p>\n\n<pre><code> @students = Student.search(params[:search])\n</code></pre>\n\n<p>Model:</p>\n\n<pre><code>def self.search(search)\n  if search\n    where(['name LIKE ?', \"%#{search}%\"])\n  else\n    all\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "macos", "osx-elcapitan", "ruby-enterprise-edition"], "comments": [{"owner": {"reputation": 14632, "user_id": 428260, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/Jr7uO.png?s=128&g=1", "display_name": "iltempo", "link": "https://stackoverflow.com/users/428260/iltempo"}, "edited": false, "score": 0, "creation_date": 1450907643, "post_id": 34444050, "comment_id": 56630365, "body": "Do you have to stick to REE? It&#39;s pretty much outdated and is not supported anymore."}, {"owner": {"reputation": 709, "user_id": 1930371, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7008550892ce49412cddc525f5d10202?s=128&d=identicon&r=PG", "display_name": "jmcharnes", "link": "https://stackoverflow.com/users/1930371/jmcharnes"}, "reply_to_user": {"reputation": 14632, "user_id": 428260, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/Jr7uO.png?s=128&g=1", "display_name": "iltempo", "link": "https://stackoverflow.com/users/428260/iltempo"}, "edited": false, "score": 0, "creation_date": 1450908684, "post_id": 34444050, "comment_id": 56630822, "body": "I do, we&#39;re in the process of rebuilding the application in a 2.2.3 environment. Until then, I&#39;m attached to that for working on the legacy project."}], "owner": {"reputation": 709, "user_id": 1930371, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7008550892ce49412cddc525f5d10202?s=128&d=identicon&r=PG", "display_name": "jmcharnes", "link": "https://stackoverflow.com/users/1930371/jmcharnes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1450906326, "creation_date": 1450906326, "question_id": 34444050, "link": "https://stackoverflow.com/questions/34444050/ree-ruby-enterprise-edition-on-el-capitan-installed-through-rvm-giving-bug", "title": "REE (Ruby Enterprise Edition) on El Capitan, installed through RVM, giving: [BUG] Segmentation fault", "body": "<p>I had 10.10 installed on my MacBook Pro Retina. During this time, I had REE 1.8.7-2011.12 on my machine working fine. I upgraded to 10.11 El Capitan and everything worked fine. I recently uninstalled and reinstalled RVM to clean up my Ruby Environment. It's been working great with Ruby 2.2.3, and other various versions. However, one of the projects I work on is a legacy application that requires the specific version of REE, <code>ree-1.8.7-2011.12</code>.</p>\n\n<p>It acts as if it's installed properly. However, when I went to install my first gem, <code>gem install bundler</code>, I get:</p>\n\n<p><code>/Users/myusername/.rvm/rubies/ree-1.8.7-2011.12/lib/ruby/1.8/timeout.rb:60: [BUG] Segmentation fault\nruby 1.8.7 (2011-12-28 MBARI 8/0x6770 on patchlevel 357) [i686-darwin15.0.0], MBARI 0x6770, Ruby Enterprise Edition 2011.12</code></p>\n\n<p>I've spent a good portion of my day trying to resolve this without having to just create a virtual machine for this, though it would probably solve my problems. Any advice on how to prevent the Segmentation fault?</p>\n"}, {"tags": ["ruby", "linked-list"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1450905939, "post_id": 34443612, "comment_id": 56629600, "body": "Just run the algorithm manually. With pen and paper. Tracing states of nodes. You&#39;ll see."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1450906233, "post_id": 34443989, "comment_id": 56629719, "body": "This doesn&#39;t answer the question, does it?"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1450906363, "post_id": 34443989, "comment_id": 56629784, "body": "@SergioTulentsev  Do you ever sleep?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1450906402, "post_id": 34443989, "comment_id": 56629798, "body": "@WandMaker: I was about to :)"}, {"owner": {"reputation": 1041, "user_id": 1454143, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/44360e6437e6f1a83b61f34b2485185e?s=128&d=identicon&r=PG", "display_name": "Pierre Michard", "link": "https://stackoverflow.com/users/1454143/pierre-michard"}, "edited": false, "score": 0, "creation_date": 1450906509, "post_id": 34443989, "comment_id": 56629841, "body": "you&#39;re right, it doesn&#39;t. I had not correctly understood the question"}, {"owner": {"reputation": 113, "user_id": 4655866, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-1d8tteGpZKc/AAAAAAAAAAI/AAAAAAAAAIs/uHJb5riHcuQ/photo.jpg?sz=128", "display_name": "Anthony D", "link": "https://stackoverflow.com/users/4655866/anthony-d"}, "edited": false, "score": 0, "creation_date": 1450906883, "post_id": 34443989, "comment_id": 56630028, "body": "Yes, I understand. I&#39;m only doing it because I have to, its part of the course I&#39;m taking. They even told us its never rarely used, but important to understand because its a common interview question."}, {"owner": {"reputation": 1041, "user_id": 1454143, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/44360e6437e6f1a83b61f34b2485185e?s=128&d=identicon&r=PG", "display_name": "Pierre Michard", "link": "https://stackoverflow.com/users/1454143/pierre-michard"}, "edited": false, "score": 0, "creation_date": 1450907598, "post_id": 34443989, "comment_id": 56630345, "body": "It took me time, but I edited my comment. As you see I just explains what does each iteration does. I don&#39;t see a clearer way to explain it."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1450908290, "post_id": 34443989, "comment_id": 56630660, "body": "@PierreMichard: check out my explanation :)"}, {"owner": {"reputation": 1041, "user_id": 1454143, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/44360e6437e6f1a83b61f34b2485185e?s=128&d=identicon&r=PG", "display_name": "Pierre Michard", "link": "https://stackoverflow.com/users/1454143/pierre-michard"}, "edited": false, "score": 0, "creation_date": 1450908391, "post_id": 34443989, "comment_id": 56630698, "body": "nice, I have been searching an elegant way of explaining that. You clearly found the way :)"}, {"owner": {"reputation": 113, "user_id": 4655866, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-1d8tteGpZKc/AAAAAAAAAAI/AAAAAAAAAIs/uHJb5riHcuQ/photo.jpg?sz=128", "display_name": "Anthony D", "link": "https://stackoverflow.com/users/4655866/anthony-d"}, "edited": false, "score": 0, "creation_date": 1450961980, "post_id": 34443989, "comment_id": 56647803, "body": "Thanks, Pierre! Great answer!"}, {"owner": {"reputation": 1041, "user_id": 1454143, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/44360e6437e6f1a83b61f34b2485185e?s=128&d=identicon&r=PG", "display_name": "Pierre Michard", "link": "https://stackoverflow.com/users/1454143/pierre-michard"}, "edited": false, "score": 0, "creation_date": 1450962161, "post_id": 34443989, "comment_id": 56647872, "body": "You&#39;re welcome. Tell you teacher to create a Class for Ruby instead of adapting a C class to Ruby :)"}], "tags": [], "owner": {"reputation": 1041, "user_id": 1454143, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/44360e6437e6f1a83b61f34b2485185e?s=128&d=identicon&r=PG", "display_name": "Pierre Michard", "link": "https://stackoverflow.com/users/1454143/pierre-michard"}, "is_accepted": false, "score": 3, "last_activity_date": 1450907502, "last_edit_date": 1450907502, "creation_date": 1450906029, "answer_id": 34443989, "question_id": 34443612, "link": "https://stackoverflow.com/questions/34443612/how-to-reverse-a-linked-list-in-ruby/34443989#34443989", "title": "How to reverse a linked list in Ruby", "body": "<pre><code># Create a LinkedListNode instance with value 36\nnode1 = LinkedListNode.new(37)\n# Create a LinkedListNode instance which next value is node1\nnode2 = LinkedListNode.new(99, node1)\n# node2 -&gt; node1\n# Create a LinkedListNode instance which next value is node2\nnode3 = LinkedListNode.new(12, node2)\n# node3 -&gt; node2 -&gt; node1\n\nprint_values(node3)\n# 12 -&gt; 99 -&gt; 37\n</code></pre>\n\n<p>Fist pass into reverse_list method</p>\n\n<pre><code>reverse_list(node3)\ndef reverse_list(list, previous=nil)\n  # set current_head to node2\n  current_head = list.next_node\n  # Change node3.next_node node2--&gt;nil\n  list.next_node = previous\n  if current_head\n    # reverse_list(node2, node3)\n    reverse_list(current_head, list)\n  else\n    list\n  end\nend\n</code></pre>\n\n<p>Second pass into reverse_list method</p>\n\n<pre><code>reverse_list(node2, node3)\ndef reverse_list(list, previous=nil)\n  # set current_head to node1\n  current_head = list.next_node\n  # Change node2.next_node node1--&gt;node3\n  list.next_node = previous\n  if current_head\n    # reverse_list(node1, node2)\n    reverse_list(current_head, list)\n  else\n    list\n  end\nend\n</code></pre>\n\n<p>last pass into reverse_list method</p>\n\n<pre><code>reverse_list(node1, node2)\ndef reverse_list(list, previous=nil)\n  # set current_head to nil\n  current_head = list.next_node\n  # Change node1.next_node nil--&gt;node2\n  list.next_node = previous\n  if current_head\n    reverse_list(current_head, list)\n  else\n    # The end, return node1\n    list\n  end\nend\n</code></pre>\n\n<p>By the way linked list is not a common practice in the ruby languages (and all the languages with a garbage collector), there is generally a class (such as Array for example) which have all the functionalities and flexibility you may need.</p>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1450961474, "post_id": 34444363, "comment_id": 56647584, "body": "Anthony, did it help? :) Now do you see what&#39;s happening there?"}, {"owner": {"reputation": 113, "user_id": 4655866, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-1d8tteGpZKc/AAAAAAAAAAI/AAAAAAAAAIs/uHJb5riHcuQ/photo.jpg?sz=128", "display_name": "Anthony D", "link": "https://stackoverflow.com/users/4655866/anthony-d"}, "edited": false, "score": 0, "creation_date": 1450961536, "post_id": 34444363, "comment_id": 56647613, "body": "Great visualization, it wasn&#39;t so much that I didn&#39;t understand how the pointers were being rearranged, I didn&#39;t understand what the reverse_list code was doing. You both gave great answers! Thanks a lot."}, {"owner": {"reputation": 113, "user_id": 4655866, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-1d8tteGpZKc/AAAAAAAAAAI/AAAAAAAAAIs/uHJb5riHcuQ/photo.jpg?sz=128", "display_name": "Anthony D", "link": "https://stackoverflow.com/users/4655866/anthony-d"}, "edited": false, "score": 1, "creation_date": 1450961860, "post_id": 34444363, "comment_id": 56647760, "body": "Seeing your answer while reading through Pierres answer really helped. Once I understood it I decided to try an iterative solution instead of recursion, just to solidify things."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 5, "last_activity_date": 1451985042, "last_edit_date": 1451985042, "creation_date": 1450907911, "answer_id": 34444363, "question_id": 34443612, "link": "https://stackoverflow.com/questions/34443612/how-to-reverse-a-linked-list-in-ruby/34444363#34444363", "title": "How to reverse a linked list in Ruby", "body": "<p>Here's a little visualization I made up. </p>\n\n<p><code>^</code> points to head of the list. At each level of recursion, its right arrow is \"turned\" to point from element on the right to element on the left. Proceed until there is a right arrow (pointing to a non-nil). If right arrow points to nil, return the current head.</p>\n\n<pre><code>previous\n\u2193\nnil    12 -&gt; 99 -&gt; 37 -&gt; nil\n       ^\n\n       previous\n       \u2193 \nnil &lt;- 12       99 -&gt; 37 -&gt; nil\n                ^\n\n             previous\n             \u2193\nnil &lt;- 12 &lt;- 99       37 -&gt; nil\n                      ^         \n\nnil &lt;- 12 &lt;- 99 &lt;- 37 \n                   ^                            \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1575, "user_id": 1645105, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Pco1O.jpg?s=128&g=1", "display_name": "Vbp", "link": "https://stackoverflow.com/users/1645105/vbp"}, "is_accepted": false, "score": 3, "last_activity_date": 1469377516, "creation_date": 1469377516, "answer_id": 38554200, "question_id": 34443612, "link": "https://stackoverflow.com/questions/34443612/how-to-reverse-a-linked-list-in-ruby/38554200#38554200", "title": "How to reverse a linked list in Ruby", "body": "<p>Here is a simple solution if someone is looking to do this without recursion</p>\n\n<pre><code>class Node\n  attr_accessor :value, :next\n\n  def initialize(value, next_node)\n    @value = value\n    @next = next_node\n  end\nend\n\nclass LinkedList\n  attr_accessor :head, :tail\n\n  def add(value)\n    if(@head.nil?)\n      @head = Node.new(value, nil)\n      @tail = @head\n    else\n      @tail.next = Node.new(value, nil)\n      @tail = @tail.next\n    end\n  end\n\n  def reverse(list)\n    return nil if list.nil?\n    prev = nil\n    curr = list.head\n\n    while(curr != nil)\n      temp = curr.next\n      curr.next = prev\n      prev = curr\n      curr = temp\n    end\n    list.head = prev\n    list\n  end\n\n  def display(list)\n    return nil if list.nil?\n    curr = list.head\n    arr = []\n    while(curr != nil)\n      arr.push(curr.value)\n      curr = curr.next\n    end\n    p arr\n  end\nend\n\nlist = LinkedList.new()\nlist.add(1)\nlist.add(2)\nlist.add(3)\n\nlist.display(list)                #list before reversing [1,2,3]\nlist.display(list.reverse(list))  #list after reversing  [3,2,1]\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 4655866, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-1d8tteGpZKc/AAAAAAAAAAI/AAAAAAAAAIs/uHJb5riHcuQ/photo.jpg?sz=128", "display_name": "Anthony D", "link": "https://stackoverflow.com/users/4655866/anthony-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2894, "favorite_count": 3, "accepted_answer_id": 34444363, "answer_count": 3, "score": 3, "last_activity_date": 1469377516, "creation_date": 1450904270, "last_edit_date": 1450905295, "question_id": 34443612, "link": "https://stackoverflow.com/questions/34443612/how-to-reverse-a-linked-list-in-ruby", "title": "How to reverse a linked list in Ruby", "body": "<p>In the mutation example below, I don't understand how the linked list is reversed.</p>\n\n<pre><code>class LinkedListNode\n  attr_accessor :value, :next_node\n\n  def initialize(value, next_node=nil)\n    @value = value\n    @next_node = next_node\n  end\nend\n\ndef print_values(list_node)\n  print \"#{list_node.value} --&gt; \"\n  if list_node.next_node.nil?\n    print \"nil\\n\"\n    return\n  else\n    print_values(list_node.next_node)\n  end\nend\ndef reverse_list(list, previous=nil)\n  current_head = list.next_node\n  list.next_node = previous\n  if current_head\n    reverse_list(current_head, list)\n  else\n    list\n  end\nend\n\nnode1 = LinkedListNode.new(37)\nnode2 = LinkedListNode.new(99, node1)\nnode3 = LinkedListNode.new(12, node2)\nprint_values(node3)\nputs \"-------\"\nrevlist = reverse_list(node3)\nprint_values(revlist)\n</code></pre>\n\n<p>If I just return <code>current_head</code>, I get <code>99-&gt;37-&gt;nil</code>, which makes sense because <code>99</code> would be <code>next_node</code>. Returning the next line, </p>\n\n<pre><code>list.next_node = previous\n</code></pre>\n\n<p>throws an error because <code>print_values</code> method can't print the value for <code>nil</code>. I'm not understanding what is reversing the list. If anyone could explain this to me, I would appreciate it.</p>\n"}, {"tags": ["ruby", "exception"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1450903775, "post_id": 34443407, "comment_id": 56628706, "body": "The same you know in any language that doesn&#39;t have checked exceptions. Or even those that have and throw unchecked. Read the documentation. Read the tests. Read the code. You saw people ask that question multiple times and not get a silver bullet, yet you decided to ask it again. How do you know how to use any API for that matter?"}, {"owner": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1450941454, "post_id": 34443407, "comment_id": 56639500, "body": "How do I find source or tests for <a href=\"http://ruby-doc.org/core-2.0.0/IO.html#method-i-write\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.0.0/IO.html#method-i-write</a>   I am aware of the &quot;click to toggle source&quot; button, but it doesn&#39;t show anything useful."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1450904536, "post_id": 34443631, "comment_id": 56629026, "body": "You get -1 for rescuing Exception :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1450904643, "post_id": 34443631, "comment_id": 56629083, "body": "Well, you don&#39;t reraise."}, {"owner": {"reputation": 1521, "user_id": 1274846, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/048371ccb94bbd3aae9ac0ca20c0a31c?s=128&d=identicon&r=PG", "display_name": "Trinculo", "link": "https://stackoverflow.com/users/1274846/trinculo"}, "edited": false, "score": 0, "creation_date": 1450906758, "post_id": 34443631, "comment_id": 56629974, "body": "I don&#39;t think this is a bad answer.  If you&#39;re completely not sure then this will at least show you the one that is getting raised so you can deal with accordingly."}, {"owner": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "edited": false, "score": 0, "creation_date": 1450941355, "post_id": 34443631, "comment_id": 56639471, "body": "I think this is bad process. I don&#39;t want to swallow exceptions. What I am currently doing is trying to push code into extreme cases and making program fail, then reading exception name that is thrown. But I am sure I am missing stuff this way and there must be a more efficient way."}], "tags": [], "owner": {"reputation": 1041, "user_id": 1454143, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/44360e6437e6f1a83b61f34b2485185e?s=128&d=identicon&r=PG", "display_name": "Pierre Michard", "link": "https://stackoverflow.com/users/1454143/pierre-michard"}, "is_accepted": false, "score": 2, "last_activity_date": 1450904729, "last_edit_date": 1450904729, "creation_date": 1450904367, "answer_id": 34443631, "question_id": 34443407, "link": "https://stackoverflow.com/questions/34443407/how-to-know-what-exceptions-to-rescue/34443631#34443631", "title": "How to know what exceptions to rescue", "body": "<p>Sometimes you just don't know which kind of exception can be thrown, for that the generic <code>rescue</code> catching exists.</p>\n\n<pre><code>begin\n    do_something\nrescue KnownException\n    treat_exception\n# generic exception \nrescue Exception =&gt; e\n    # you don't know which exception has been raised but all info is in e\n    print \"Ups I don't know this Exception:#{e.class} error: #{e.message}\"\n    raise\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "edited": false, "score": 0, "creation_date": 1450941197, "post_id": 34443726, "comment_id": 56639426, "body": "It&#39;s not true that recovering from exception implies knowing what they are. I know how to recover from &quot;you can&#39;t write to this folder&quot; or &quot;filename invalid&quot; if I knew what those exceptions were named. And it&#39;s not listed anywhere I have looked."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "edited": false, "score": 0, "creation_date": 1450941783, "post_id": 34443726, "comment_id": 56639616, "body": "@MarkoAvlija\u0161: check out this post: <a href=\"http://blog.nicksieger.com/articles/2006/09/06/rubys-exception-hierarchy/\" rel=\"nofollow noreferrer\">blog.nicksieger.com/articles/2006/09/06/&hellip;</a>. If you run this code in a rails app, you get much bigger exception tree. There&#39;s your list."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "edited": false, "score": 0, "creation_date": 1450942230, "post_id": 34443726, "comment_id": 56639753, "body": "Particularly, &quot;no such file&quot; error is called <code>Errno::ENOENT</code>."}, {"owner": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "edited": false, "score": 0, "creation_date": 1450942351, "post_id": 34443726, "comment_id": 56639801, "body": "Thanks, this is useful. Any idea how to apply this code to a (other people&#39;s) class? All I can think of now is run it before you include the class and output results into file, then run it after and do a diff. This way I&#39;ll catch unique exceptions, but miss those that standard ruby code is using."}, {"owner": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "edited": false, "score": 0, "creation_date": 1450942883, "post_id": 34443726, "comment_id": 56639964, "body": "do you want to figure it out and create an answer from it? This question is asked a lot and no real answers are given."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "edited": false, "score": 0, "creation_date": 1450943067, "post_id": 34443726, "comment_id": 56640021, "body": "@MarkoAvlija\u0161: Nah, I&#39;m good, thanks. But it seems that you got the pointers you needed, though."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 2, "last_activity_date": 1450943351, "last_edit_date": 1450943351, "creation_date": 1450904800, "answer_id": 34443726, "question_id": 34443407, "link": "https://stackoverflow.com/questions/34443407/how-to-know-what-exceptions-to-rescue/34443726#34443726", "title": "How to know what exceptions to rescue", "body": "<blockquote>\n  <p>How can I catch only them when I don't know what those exceptions are?</p>\n</blockquote>\n\n<p>What are you going to do when you catch them, I wonder? It makes little sense to catch exceptions for the sake of catching. Swallowing exceptions is especially bad practice.</p>\n\n<p>My rule of thumb is: catch only those I can recover from (this implies already knowing what they are). Let the rest bubble up and crash the program or possibly be catched in one of outer scopes (which will know how to recover from this concrete one).</p>\n\n<h2>How to discover currently loaded exception classes</h2>\n\n<p><a href=\"http://blog.nicksieger.com/articles/2006/09/06/rubys-exception-hierarchy/\" rel=\"nofollow\">This almost 10 year old code snippet</a> still works today:</p>\n\n<pre><code>exceptions = []\ntree = {}\nObjectSpace.each_object(Class) do |cls|\n  next unless cls.ancestors.include? Exception\n  next if exceptions.include? cls\n  exceptions &lt;&lt; cls\n  cls.ancestors.delete_if {|e| [Object, Kernel].include? e }.reverse.inject(tree) {|memo,cls| memo[cls] ||= {}}\nend\n\nindent = 0\ntree_printer = Proc.new do |t|\n  t.keys.sort { |c1,c2| c1.name &lt;=&gt; c2.name }.each do |k|\n    space = (' ' * indent); space ||= ''\n    puts space + k.to_s\n    indent += 2; tree_printer.call t[k]; indent -= 2\n  end\nend\ntree_printer.call tree\n</code></pre>\n\n<p>Run it in the rails console and you'll see a lot of exception classes. :)</p>\n"}, {"comments": [{"owner": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "edited": false, "score": 0, "creation_date": 1450941011, "post_id": 34443745, "comment_id": 56639352, "body": "Where to find it? On ruby-doc.org code is useless - it&#39;s in C and partial. Take a look at IO#write.   <a href=\"http://ruby-doc.org/core-2.0.0/IO.html#method-i-write\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.0.0/IO.html#method-i-write</a>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "edited": false, "score": 0, "creation_date": 1450941507, "post_id": 34443745, "comment_id": 56639517, "body": "@MarkoAvlija\u0161 Weren&#39;t you looking for <code>YAML.load_file</code>?"}, {"owner": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "edited": false, "score": 0, "creation_date": 1450941735, "post_id": 34443745, "comment_id": 56639600, "body": "Yes to load and save settings. For save settings I am using File.write / IO.write"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "edited": false, "score": 1, "creation_date": 1450944043, "post_id": 34443745, "comment_id": 56640362, "body": "@MarkoAvlija\u0161: I&#39;m afraid you&#39;ll have to read a good chunk of ruby codebase to learn which exceptions are thrown from core and stdlib. <a href=\"https://github.com/ruby/ruby/blob/ada76728f6e672a8b7366bf1f444387945af993b/error.c\" rel=\"nofollow noreferrer\">This file</a> will provide keywords for grepping (C function names). As an alternative, you can read rubinius code, much less C there :)"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": -2, "last_activity_date": 1450904875, "last_edit_date": 1592644375, "creation_date": 1450904875, "answer_id": 34443745, "question_id": 34443407, "link": "https://stackoverflow.com/questions/34443407/how-to-know-what-exceptions-to-rescue/34443745#34443745", "title": "How to know what exceptions to rescue", "body": "<blockquote>\n<p>The source code is the documentation.</p>\n<p>-- Matz</p>\n</blockquote>\n"}], "owner": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1450943351, "creation_date": 1450903372, "last_edit_date": 1495542258, "question_id": 34443407, "link": "https://stackoverflow.com/questions/34443407/how-to-know-what-exceptions-to-rescue", "title": "How to know what exceptions to rescue", "body": "<p>I want a class that will load and save settings in yaml file, and displays an error if something happens. I must catch exceptions and I must know what to catch. There is no guarantee what exception will be raised; user might press CTRL+C or memory may run out, but <code>YAML.load_file</code> can raise only a limited number of exceptions. There is nowhere listed what exceptions a function <code>YAML.load_file</code> might raise.</p>\n\n<p>How can I catch only them when I don't know what those exceptions are?</p>\n\n<p>This question has been asked, but there is no real answer:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/11641517\">How to know what exceptions to rescue?</a> Answer is about exceptions in general</li>\n<li><a href=\"https://stackoverflow.com/questions/1392442\">How to deal with not knowing what exceptions can be raised by a library method in Ruby?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/29856485\">Ruby How to know what to rescue?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/8481837\">Where to find (or how to read) ruby documentation?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/13876039\">Documentation for Ruby exceptions</a></li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 3994, "user_id": 37019, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4354cb7ba5e9c6a01f77eb8de753b62?s=128&d=identicon&r=PG", "display_name": "danielrsmith", "link": "https://stackoverflow.com/users/37019/danielrsmith"}, "edited": false, "score": 0, "creation_date": 1450902640, "post_id": 34443176, "comment_id": 56628198, "body": "What is <code>@subject.errors</code> after <code>@subject.save</code> is called?"}, {"owner": {"reputation": 63, "user_id": 5488889, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cc68f903b6b664161c93ae328631c06b?s=128&d=identicon&r=PG&f=1", "display_name": "Luka Baryshych", "link": "https://stackoverflow.com/users/5488889/luka-baryshych"}, "reply_to_user": {"reputation": 3994, "user_id": 37019, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e4354cb7ba5e9c6a01f77eb8de753b62?s=128&d=identicon&r=PG", "display_name": "danielrsmith", "link": "https://stackoverflow.com/users/37019/danielrsmith"}, "edited": false, "score": 0, "creation_date": 1450903057, "post_id": 34443176, "comment_id": 56628363, "body": "@danielrsmith none. Saving is working normal"}, {"owner": {"reputation": 1852, "user_id": 2113461, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/371d7f69208d6659f37879b2851b5385?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas.V", "link": "https://stackoverflow.com/users/2113461/nicholas-v"}, "edited": false, "score": 0, "creation_date": 1450911285, "post_id": 34443176, "comment_id": 56631798, "body": "What is the association? A multi select field infers that subject has many lecturers, but you mention <code>lecturers_id</code> column. Is this a column on subjects table? if so then this is incorrect for as multi select field.."}, {"owner": {"reputation": 63, "user_id": 5488889, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cc68f903b6b664161c93ae328631c06b?s=128&d=identicon&r=PG&f=1", "display_name": "Luka Baryshych", "link": "https://stackoverflow.com/users/5488889/luka-baryshych"}, "reply_to_user": {"reputation": 1852, "user_id": 2113461, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/371d7f69208d6659f37879b2851b5385?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas.V", "link": "https://stackoverflow.com/users/2113461/nicholas-v"}, "edited": false, "score": 0, "creation_date": 1450981558, "post_id": 34443176, "comment_id": 56655033, "body": "@jverban lecturer has many subjects"}], "answers": [{"tags": [], "owner": {"reputation": 1852, "user_id": 2113461, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/371d7f69208d6659f37879b2851b5385?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas.V", "link": "https://stackoverflow.com/users/2113461/nicholas-v"}, "is_accepted": false, "score": 0, "last_activity_date": 1450911136, "last_edit_date": 1450911136, "creation_date": 1450910698, "answer_id": 34444863, "question_id": 34443176, "link": "https://stackoverflow.com/questions/34443176/multiselect-is-not-saving/34444863#34444863", "title": "Multiselect is not saving", "body": "<p>Assuming the association is that <code>Subject</code> <code>has_many :lecturers</code> then you would change <code>lecturers_id</code> to <code>lecturers_ids</code>:</p>\n\n<pre><code>def subject_params\n    params.require(:subject).permit(:name, :credit, :number_of_hours, :lecturers_ids =&gt; [])\nend\n</code></pre>\n\n<p>Form:</p>\n\n<pre><code>&lt;%= f.select(:lecturers_ids, ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 824, "user_id": 5580690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzdJe.png?s=128&g=1", "display_name": "Nitin Srivastava", "link": "https://stackoverflow.com/users/5580690/nitin-srivastava"}, "is_accepted": false, "score": 0, "last_activity_date": 1450938587, "creation_date": 1450938587, "answer_id": 34448332, "question_id": 34443176, "link": "https://stackoverflow.com/questions/34443176/multiselect-is-not-saving/34448332#34448332", "title": "Multiselect is not saving", "body": "<p>In case of <code>Subject</code> <code>has_many :lecturers</code>. Your form should be </p>\n\n<pre><code>&lt;%= f.select(:lecturer_ids, Lecturer.all.collect {|l| [ l.name, l.id ] }, {}, { :multiple =&gt; true }) %&gt;\n</code></pre>\n\n<p>and your <code>subject_params</code> should be</p>\n\n<pre><code>def subject_params\n    params.require(:subject).permit(:name, :credit, :number_of_hours, :lecturer_ids =&gt; [])\nend\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 5488889, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/cc68f903b6b664161c93ae328631c06b?s=128&d=identicon&r=PG&f=1", "display_name": "Luka Baryshych", "link": "https://stackoverflow.com/users/5488889/luka-baryshych"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1450938587, "creation_date": 1450902326, "question_id": 34443176, "link": "https://stackoverflow.com/questions/34443176/multiselect-is-not-saving", "title": "Multiselect is not saving", "body": "<p>I`m trying to pass related params into a model with multiselect list. I need to assing classes to lecturers by choosing a lector when creating new class entry. I checked the db and got nothing in lecturers_id column. This is my form: </p>\n\n<pre><code>     &lt;%= f.select(:lecturers_id, Lecturer.all.collect {|l| [ l.name, l.id ] }, {}, { :multiple =&gt; true }) %&gt;\n</code></pre>\n\n<p>My controller:</p>\n\n<pre><code>def subject_params\n    params.require(:subject).permit(:name, :credit, :number_of_hours, :lecturers_id =&gt; [])\nend\n def create\n    @subject = Subject.new(subject_params)\n    @subject.save\n    redirect_to \"/subjects\" and return\nend\n</code></pre>\n\n<p>And my view: </p>\n\n<pre><code> &lt;% @lecturers.each do |lect| %&gt;\n        &lt;tr&gt;\n            &lt;td class='col-md-3'&gt;&lt;%= lect.name %&gt;&lt;/td&gt;\n            &lt;td class='col-md-3'&gt;\n                &lt;% lect.subjects do |subj| %&gt;\n                &lt;%= subj.name %&gt;\n                &lt;% end %&gt;\n            &lt;/td&gt;\n    &lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "currency"], "comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 1, "creation_date": 1450903065, "post_id": 34443153, "comment_id": 56628372, "body": "How does <code>10.to_money</code> works?  I am getting no method on Fixnum error.  I have installed money gem"}, {"owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "edited": false, "score": 0, "creation_date": 1450903111, "post_id": 34443153, "comment_id": 56628401, "body": "You have to declare it in a variable. <code>money = Money.new(10, USD)</code>"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "edited": false, "score": 0, "creation_date": 1450903195, "post_id": 34443153, "comment_id": 56628439, "body": "@RichardHamilton I am able to work with <code>Money.new</code>, but OP is using some kind of enhanced <code>Fixnum</code> that allows <code>to_money</code> method on number <code>10</code> - I am curious about that part"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1450903604, "post_id": 34443153, "comment_id": 56628633, "body": "Use <code>Money#format</code> method - you will see correct output.  Fundamentally, it is still doing right thing.  Output of <code>inspect</code> may be weird"}, {"owner": {"reputation": 5794, "user_id": 850224, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/65b467905691337e208944fcb34c7f57?s=128&d=identicon&r=PG", "display_name": "Artem Kalinchuk", "link": "https://stackoverflow.com/users/850224/artem-kalinchuk"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1450903924, "post_id": 34443153, "comment_id": 56628768, "body": "@WandMaker <code>format</code> returns a formatted string. I don&#39;t want to parse a string to get the value I need. I know it&#39;s a go-around but it won&#39;t work in my case. I don&#39;t think it&#39;s doing the right thing because <code>cents</code> returns 1230 when it should be 123000."}], "answers": [{"comments": [{"owner": {"reputation": 5794, "user_id": 850224, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/65b467905691337e208944fcb34c7f57?s=128&d=identicon&r=PG", "display_name": "Artem Kalinchuk", "link": "https://stackoverflow.com/users/850224/artem-kalinchuk"}, "edited": false, "score": 0, "creation_date": 1450909214, "post_id": 34443928, "comment_id": 56631024, "body": "That explains it. Not very convenient since it messes up my calculations."}, {"owner": {"reputation": 2504, "user_id": 1041509, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nC1WT.png?s=128&g=1", "display_name": "alex.bour", "link": "https://stackoverflow.com/users/1041509/alex-bour"}, "edited": false, "score": 0, "creation_date": 1592214893, "post_id": 34443928, "comment_id": 110334752, "body": "I had the same issue with JPY. Yes, I confirm it&#39;s the subunit way to manage it that causes the issue. I found the good way to manage the conversion using &quot;from_amount&quot; constructor: <code>Money.from_amount(price, &quot;JPY&quot;).exchange_to(&quot;USD&quot;)</code> instead of <code>Money.new(price, &quot;JPY&quot;).exchange_to(&quot;USD&quot;)</code>"}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 3, "last_activity_date": 1450905780, "creation_date": 1450905780, "answer_id": 34443928, "question_id": 34443153, "link": "https://stackoverflow.com/questions/34443153/how-to-exchange-correctly-using-the-money-gem/34443928#34443928", "title": "How to exchange correctly using the Money gem", "body": "<p>It really depends on definition of <code>Currency</code>.  Below code shows that 10 USD is indeed equal to 1230 yen.</p>\n\n<pre><code>require \"rails\"\nrequire \"money-rails\"\n\nMoney.add_rate('USD', 'EUR', 0.92)\nMoney.add_rate('USD', 'JPY', 123.0)\n\np 10.to_money.exchange_to('JPY') == Money.new(1230,\"JPY\")\n#=&gt; true\n</code></pre>\n\n<p>Your expectation that you should see <code>123000</code> may not be correct if you inspect the <code>JPY</code> currency</p>\n\n<pre><code>p Money.new(1230,\"JPY\").currency\n</code></pre>\n\n<p><code>#&lt;Money::Currency id: jpy, priority: 6, symbol_first: true, thousands_separator: ,, html_entity: &amp;#x00A5;, decimal_mark: ., name: Japanese Yen, symbol: \u00a5, subunit_to_unit: 1, exponent: 0.0, iso_code: JPY, iso_numeric: 392, subunit: , smallest_denomination: 1&gt;</code></p>\n\n<p>Important field to note in <code>Currency</code> definition is the value of <code>subunit_to_unit: 1</code>.  As per documentation:</p>\n\n<blockquote>\n  <p>:subunit_to_unit the proportion between the unit and the subunit</p>\n</blockquote>\n\n<p>This means that in case of Yen, the value displayed is in Yen, and it need not be multiplied by 100 as is the case with USD or EUR.</p>\n\n<pre><code>p 10.to_money.exchange_to('EUR')\n#=&gt; #&lt;Money fractional:920 currency:EUR&gt;\np 10.to_money.exchange_to('JPY')\n#=&gt; #&lt;Money fractional:1230 currency:JPY&gt;\n</code></pre>\n\n<p>Below is Currency definition for EUR</p>\n\n<p><code>#&lt;Money::Currency id: eur, priority: 2, symbol_first: true, thousands_separator: ., html_entity: &amp;#x20AC;, decimal_mark: ,, name: Euro, symbol: \u20ac, subunit_to_unit: 100, exponent: 2.0, iso_code: EUR, iso_numeric: 978, subunit: Cent, smallest_denomination: 1&gt;</code></p>\n\n<p>In case of EUR, <code>subunit_to_unit: 100</code> indicates that value is in cents (or equivalent)</p>\n"}], "owner": {"reputation": 5794, "user_id": 850224, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/65b467905691337e208944fcb34c7f57?s=128&d=identicon&r=PG", "display_name": "Artem Kalinchuk", "link": "https://stackoverflow.com/users/850224/artem-kalinchuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 608, "favorite_count": 0, "accepted_answer_id": 34443928, "answer_count": 1, "score": 1, "last_activity_date": 1450905780, "creation_date": 1450902239, "last_edit_date": 1450902887, "question_id": 34443153, "link": "https://stackoverflow.com/questions/34443153/how-to-exchange-correctly-using-the-money-gem", "title": "How to exchange correctly using the Money gem", "body": "<p>I use the Money gem to work with different currencies. I'm seeing a strange behavior with the \"JPY\" currency.</p>\n\n<p>I have the following rates:</p>\n\n<pre><code>config.add_rate('USD', 'EUR', 0.92)\nconfig.add_rate('USD', 'JPY', 123.0)\n</code></pre>\n\n<p>Trying to exchange currencies, I get strange results:</p>\n\n<pre><code>10.to_money.exchange_to('EUR')\n=&gt; #&lt;Money fractional:920 currency:EUR&gt;\n\n10.to_money.exchange_to('JPY')\n=&gt; #&lt;Money fractional:1230 currency:JPY&gt;\n</code></pre>\n\n<p>The \"JPY\" conversion should be <code>#&lt;Money fractional:123000 currency:JPY&gt;</code>. Any ideas on what's going on?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 3, "last_activity_date": 1450902078, "creation_date": 1450902078, "answer_id": 34443123, "question_id": 34443085, "link": "https://stackoverflow.com/questions/34443085/how-to-call-method-with-parameters-using-square-brackets/34443123#34443123", "title": "How to call method with parameters using square brackets?", "body": "<p>You can do this with lambdas</p>\n\n<pre><code>content = -&gt;(key) { \"content for #{key}\" }\n\ncontent[:benefits] # =&gt; \"content for benefits\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1041, "user_id": 1454143, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/44360e6437e6f1a83b61f34b2485185e?s=128&d=identicon&r=PG", "display_name": "Pierre Michard", "link": "https://stackoverflow.com/users/1454143/pierre-michard"}, "is_accepted": false, "score": 0, "last_activity_date": 1450903624, "creation_date": 1450903624, "answer_id": 34443462, "question_id": 34443085, "link": "https://stackoverflow.com/questions/34443085/how-to-call-method-with-parameters-using-square-brackets/34443462#34443462", "title": "How to call method with parameters using square brackets?", "body": "<p>you could create a method with no argument, which returns a hash:</p>\n\n<pre><code>def content\n    {\n        :beneficts =&gt; 1000\n    }\nend\n\np content[:beneficts]\n&gt; 1000\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1450903881, "creation_date": 1450903881, "answer_id": 34443529, "question_id": 34443085, "link": "https://stackoverflow.com/questions/34443085/how-to-call-method-with-parameters-using-square-brackets/34443529#34443529", "title": "How to call method with parameters using square brackets?", "body": "<p>Within <code>content</code>'s class</p>\n\n<pre><code>def [] key\n  ...\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 1, "last_activity_date": 1450911585, "creation_date": 1450911585, "answer_id": 34444992, "question_id": 34443085, "link": "https://stackoverflow.com/questions/34443085/how-to-call-method-with-parameters-using-square-brackets/34444992#34444992", "title": "How to call method with parameters using square brackets?", "body": "<blockquote>\n  <p>I'd like to define a method in a class that, when called, acts like a hash</p>\n</blockquote>\n\n<p>The only way to do that is if the method returns an object that responds to <code>[]</code>. See the <code>params</code> method in Rails for an example.</p>\n"}], "owner": {"reputation": 3826, "user_id": 151278, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/4f6e4a6317a6e8226ea45ca35e5cf04c?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/151278/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1450911585, "creation_date": 1450901936, "last_edit_date": 1450903995, "question_id": 34443085, "link": "https://stackoverflow.com/questions/34443085/how-to-call-method-with-parameters-using-square-brackets", "title": "How to call method with parameters using square brackets?", "body": "<p>I'd like to define a method in a class that, when called, acts like a hash, accepting an argument with <code>[]</code> instead of <code>()</code>.</p>\n\n<pre><code>def content(key)\nend\n</code></pre>\n\n<p>I'd like to access it with this kind of syntax: <code>content[:benefits]</code> instead of <code>content(:benefits)</code>.</p>\n"}, {"tags": ["javascript", "html", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 824, "user_id": 5580690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tzdJe.png?s=128&g=1", "display_name": "Nitin Srivastava", "link": "https://stackoverflow.com/users/5580690/nitin-srivastava"}, "edited": false, "score": 0, "creation_date": 1450939366, "post_id": 34443080, "comment_id": 56638741, "body": "Hi, a quick question. Do you want to append multiple nested form in a form?"}, {"owner": {"reputation": 11, "user_id": 5712489, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205401856152032/picture?type=large", "display_name": "Lauren Imhoff", "link": "https://stackoverflow.com/users/5712489/lauren-imhoff"}, "edited": false, "score": 0, "creation_date": 1450971237, "post_id": 34443080, "comment_id": 56651556, "body": "I have a Person model with has_many records model. I want to be able to create multiple records while creating a person. I have record nested in person working. Just was trying to get a button in person form to add more form for records as needed. I have my record form in a partial trying to render it in js.erb file so that I can keep rendering it. I&#39;m new at this(obviously) help please. I still struggle with syntax. Those quotes get me. :)"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5712489, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205401856152032/picture?type=large", "display_name": "Lauren Imhoff", "link": "https://stackoverflow.com/users/5712489/lauren-imhoff"}, "edited": false, "score": 0, "creation_date": 1450910814, "post_id": 34444775, "comment_id": 56631628, "body": "I didn&#39;t use a gem for my nested form I did accepts_nested_attributes method.  Can i still use your approach with that method? I initially was trying to do a button to &amp; it render the new.js.erb which was rendering that bit of javascript.  Help/thoughts?"}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "reply_to_user": {"reputation": 11, "user_id": 5712489, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205401856152032/picture?type=large", "display_name": "Lauren Imhoff", "link": "https://stackoverflow.com/users/5712489/lauren-imhoff"}, "edited": false, "score": 0, "creation_date": 1450949755, "post_id": 34444775, "comment_id": 56642619, "body": "<code>button_to</code> would not work because it is intended to build a form to allow to POST data without having to explicitly build the form. Check the docs I linked to. You would need to do a simple <code>link_to</code>, with an explicit <code>onclick</code> as mentioned in my answer, and yes it should work. However when adding multiple nested forms this way, as mentioned, it will no longer work. You could also render a new form using ajax. But if you are using <code>accepts_nested_attributes_for</code>, it seems wise to just use the cocoon gem as it is easier imho. Just check the documentation and see if it fits your problem."}], "tags": [], "owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "is_accepted": false, "score": 1, "last_activity_date": 1450910174, "creation_date": 1450910174, "answer_id": 34444775, "question_id": 34443080, "link": "https://stackoverflow.com/questions/34443080/button-in-a-form-to-append-that-chunk-of-form-to-overall-form-using-javascript/34444775#34444775", "title": "Button in a form, to append that chunk of form to overall form using javascript", "body": "<p><a href=\"http://apidock.com/rails/ActionView/Helpers/UrlHelper/button_to\" rel=\"nofollow\">button_to</a> does not do what you think it does :) </p>\n\n<p>If you really want to use inline javascript, you could do something like </p>\n\n<pre><code>link_to 'Add another record', '#', onclick: \"$(..).append(..); return false;\"\n</code></pre>\n\n<p>But truthfully: that style of javascript programming we try to avoid. So alternative approach:</p>\n\n<pre><code>link_to 'Add another record', '#', \n   'data-template' =&gt; CGI.escapeHTML(render('records/form').to_str).html_safe\n</code></pre>\n\n<p>and in your javascript add something like:</p>\n\n<pre><code>$(document).on('click', 'a[data-template]', function(e) {\n  e.preventDefault();\n  var $this     = $(this),\n      content   = $this.data('template');\n  $('.records-container').append(content);\n)\n</code></pre>\n\n<p>This is simple version (untested) of the code used in cocoon, a gem to build nested forms.\nIf you are trying to build nested forms however, I would suggest to check out <a href=\"https://github.com/nathanvda/cocoon/\" rel=\"nofollow\">cocoon</a> (because in that case you would also need to, at least, create unique id's for each new nested form)</p>\n"}], "owner": {"reputation": 11, "user_id": 5712489, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205401856152032/picture?type=large", "display_name": "Lauren Imhoff", "link": "https://stackoverflow.com/users/5712489/lauren-imhoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1450910174, "creation_date": 1450901908, "last_edit_date": 1450902269, "question_id": 34443080, "link": "https://stackoverflow.com/questions/34443080/button-in-a-form-to-append-that-chunk-of-form-to-overall-form-using-javascript", "title": "Button in a form, to append that chunk of form to overall form using javascript", "body": "<p>Button in a form, to append that chunk of form to overall form using javascript.</p>\n\n<p>What am I doing wrong in this line of code in my <code>html.erb</code> file?</p>\n\n<pre><code>&lt;%= button_to \"Add Another Record\", '$('.records-container').append('&lt;%=j render partial: 'records/form'%&gt;');'%&gt; \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "image"], "answers": [{"comments": [{"owner": {"reputation": 579, "user_id": 1598051, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/444a3e1b98fb1375cfecf211862dbb26?s=128&d=identicon&r=PG", "display_name": "Evgeny Palguev", "link": "https://stackoverflow.com/users/1598051/evgeny-palguev"}, "edited": false, "score": 0, "creation_date": 1451119214, "post_id": 34444816, "comment_id": 56681125, "body": "Thanks for your answer! But I don&#39;t understand that it is necessary to change in my code?))"}], "tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": false, "score": 1, "last_activity_date": 1450910392, "creation_date": 1450910392, "answer_id": 34444816, "question_id": 34443040, "link": "https://stackoverflow.com/questions/34443040/rails-dont-showing-images-from-public-folder/34444816#34444816", "title": "Rails don&#39;t showing images from public folder", "body": "<p>There is a difference between URL paths and your filesystem paths. Generally, the URL path <code>/</code> is mapped to your <code>public</code> directory on your computer. As such, when requesting <code>http://localhost:3000/uploads/document/1450527696/qwerty_2.jpg</code>, your webserver will serve the file found in <code>/Users/my_user_name/Documents/rp/1512/my_app/public/uploads/document/1450527696/qwerty_2.jpg</code>.</p>\n\n<p>In your code, you have to use the two different paths in their reqpective locations, i.e. the filesystem path when getting the available files and the URL path when generating the <code>image_tag</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 12083646, "user_type": "registered", "profile_image": "https://graph.facebook.com/1231293990298878/picture?type=large", "display_name": "Enzymz", "link": "https://stackoverflow.com/users/12083646/enzymz"}, "is_accepted": false, "score": 0, "last_activity_date": 1583225106, "last_edit_date": 1583225106, "creation_date": 1583224873, "answer_id": 60503180, "question_id": 34443040, "link": "https://stackoverflow.com/questions/34443040/rails-dont-showing-images-from-public-folder/60503180#60503180", "title": "Rails don&#39;t showing images from public folder", "body": "<p>Remove <code>public</code> from your URL and try:</p>\n\n<pre><code>http://localhost:3000/uploads/document/1450527696/qwerty_2.jpg\n</code></pre>\n"}], "owner": {"reputation": 579, "user_id": 1598051, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/444a3e1b98fb1375cfecf211862dbb26?s=128&d=identicon&r=PG", "display_name": "Evgeny Palguev", "link": "https://stackoverflow.com/users/1598051/evgeny-palguev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 999, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1583225106, "creation_date": 1450901710, "last_edit_date": 1450902180, "question_id": 34443040, "link": "https://stackoverflow.com/questions/34443040/rails-dont-showing-images-from-public-folder", "title": "Rails don&#39;t showing images from public folder", "body": "<p>I am making an app - it is uploading (with <code>carrierwave</code>) pdf and ppt files, then <code>Docsplit</code> extracts pages/slides to images and save it to <code>public/uploads/document/unique_timestamp/</code> folder.</p>\n\n<p>In <code>show</code> view the images don't show, but links are correct - for example \"<a href=\"http://localhost:3000/Users/my_user_name/Documents/rp/1512/my_app/public/uploads/document/1450527696/qwerty_2.jpg\" rel=\"nofollow noreferrer\">http://localhost:3000/Users/my_user_name/Documents/rp/1512/my_app/public/uploads/document/1450527696/qwerty_2.jpg</a>\" and I see <a href=\"https://i.stack.imgur.com/jMYfs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jMYfs.png\" alt=\"enter image description here\"></a></p>\n\n<p>What can I do?</p>\n\n<p>in controllers/documents_controller.rb:</p>\n\n<pre><code>def show\n    @output_path = \"#{Rails.root}/public/uploads/document/\" + @document.image.to_s[-14,10] + \"/\"\nend\n</code></pre>\n\n<p>in view/show.html.erb:</p>\n\n<pre><code>&lt;ul&gt;\n&lt;% Dir.foreach(@output_path) do |f| %&gt;\n\n  &lt;% if f != \".\" &amp;&amp; f != \"..\" %&gt;\n    &lt;li&gt;\n      &lt;%= image_tag @output_path + f %&gt;\n      &lt;br&gt;&lt;%= f %&gt;\n    &lt;/li&gt;\n\n  &lt;% end %&gt;\n\n&lt;% end %&gt;\n&lt;/ul&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "excel", "spreadsheet", "axlsx"], "answers": [{"comments": [{"owner": {"reputation": 162, "user_id": 3956630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DzNBP.jpg?s=128&g=1", "display_name": "Yugendran", "link": "https://stackoverflow.com/users/3956630/yugendran"}, "edited": false, "score": 0, "creation_date": 1451976405, "post_id": 34499724, "comment_id": 56956768, "body": "The first approach worked right away and I had to construct an array of initial and final column cell values like this <i>sheet.merge_cells sheet.rows[0].cells[(4..(v-1))]</i> and <i>sheet.merge_cells sheet.rows[0].cells[(((tmp_arry4[i-1] + 3)-1)..(v-1))]</i> . Will try the second approach too."}, {"owner": {"reputation": 162, "user_id": 3956630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DzNBP.jpg?s=128&g=1", "display_name": "Yugendran", "link": "https://stackoverflow.com/users/3956630/yugendran"}, "edited": false, "score": 0, "creation_date": 1451976693, "post_id": 34499724, "comment_id": 56956886, "body": "Regarding initialize strings, I am unable to merge empty cells unless I fill it with an empty string value. I had to build an array whose rows constitute the rows of an axlsx sheet and these rows have empty string values."}], "tags": [], "owner": {"reputation": 1995, "user_id": 1011964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c74ae7d92a97e1fe53489f66c32a718?s=128&d=identicon&r=PG", "display_name": "noel", "link": "https://stackoverflow.com/users/1011964/noel"}, "is_accepted": true, "score": 9, "last_activity_date": 1451333313, "last_edit_date": 1451333313, "creation_date": 1451331868, "answer_id": 34499724, "question_id": 34442559, "link": "https://stackoverflow.com/questions/34442559/axlsx-merge-cells-based-on-row-column-number-like-in-spreadsheet-gem/34499724#34499724", "title": "Axlsx merge cells based on row-column number like in Spreadsheet gem", "body": "<p>Probably the easiest way is to pass in the actual cells (untested):</p>\n\n<pre><code>merge_cells sheet.rows.last.cells[(1..2)]\nmerge_cells sheet.rows.last.cells[(3..4)]\n</code></pre>\n\n<p>But you can also use the <a href=\"https://github.com/randym/axlsx/blob/master/lib/axlsx.rb#L90-L109\" rel=\"noreferrer\"><code>Axlsx::col_ref</code> or <code>Axlsx::cell_r</code> method</a> to convert <code>row, column</code> to the spreadsheet notation:</p>\n\n<pre><code>merge_cells Axlsx::cell_r(0,0) + ':' + Axlsx::cell_r(1,0)\nmerge_cells Axlsx::cell_r(2,0) + ':' + Axlsx::cell_r(3,0)\n</code></pre>\n\n<p><strong>Edit</strong></p>\n\n<p>Regarding your issue of having to initialize strings, I am able to merge uninitialized cells, and specify merge before cells are specified. I am using Axlsx 2.0.1.</p>\n"}], "owner": {"reputation": 162, "user_id": 3956630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DzNBP.jpg?s=128&g=1", "display_name": "Yugendran", "link": "https://stackoverflow.com/users/3956630/yugendran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5890, "favorite_count": 2, "accepted_answer_id": 34499724, "answer_count": 1, "score": 6, "last_activity_date": 1451333313, "creation_date": 1450899400, "last_edit_date": 1450900277, "question_id": 34442559, "link": "https://stackoverflow.com/questions/34442559/axlsx-merge-cells-based-on-row-column-number-like-in-spreadsheet-gem", "title": "Axlsx merge cells based on row-column number like in Spreadsheet gem", "body": "<p>I have been using the <strong>Spreadsheet gem</strong> to write xls files.\nWith the Spreadsheet gem, merging the cells can be done dynamically based on the row and column number like this </p>\n\n<pre><code>  merge_cells(start_row, start_col, end_row, end_col)\n</code></pre>\n\n<p>My Code snippet</p>\n\n<pre><code>  excel_file = Spreadsheet::Workbook.new     \n  sheet1 = excel_file.create_worksheet :name =&gt; 'Example'\n  .\n  .#code blocks\n  .\n  .\n  start_col = 4\n  end_col = 0\n\n  wk_array_size.each_with_index do |v,i|\n    end_col = start_col+((v.to_i*2)-1)\n    sheet1.merge_cells(0, start_col, 0, end_col)\n    start_col = (end_col+3)\n  end\n  .\n  .#code blocks\n  .\n  sheet1.insert_row(0,week_names)\n</code></pre>\n\n<p>Where week_array_size is an array which holds the size of an hash based on which the cells are merged.</p>\n\n<pre><code>  [11, 10, 3]\n</code></pre>\n\n<p>The merging would be done dynamically as iterated over the array week_array_size </p>\n\n<pre><code>  start_col = 4\n  end_col = (4+(11*2)-1) = 25\n\n  (0, 4, 0, 25)\n  sheet1.merge_cells(0, 4, 0, 25)\n  .\n  .\n  (0, 28, 0, 47)\n  sheet1.merge_cells(0, 28, 0, 47)\n  .\n  .\n  (0, 50, 0, 55)\n  sheet1.merge_cells(0, 50, 0, 55)\n</code></pre>\n\n<p>Once the cells have been merged, the data is written to the merged cells</p>\n\n<pre><code>  sheet1.insert_row(0,week_names)\n  sheet1.row(0).height = 30\n</code></pre>\n\n<p>But the same approach can't seem to be applied with the <strong>AXLSX gem</strong> for xlsx files, since it uses the alpha-numeric row-column names like this <strong>\"A1:A2\"</strong>. And data has to be written with empty string values before merging like the below example</p>\n\n<pre><code>  p = Axlsx::Package.new\n\n\n  p.workbook.add_worksheet(:name =&gt; 'Example') do |sheet|\n  sheet.add_row [\"Class Name\", \"\", \"\", \"Time\"]\n  merge_cells \"A1:A2\"\n  merge_cells \"A3:A4\"\n  end\n</code></pre>\n\n<p>Is there a way to merge cells in Axlsx based on row and column numbers like how it is done in Spreadsheet gem? Also can the data be written after merging the cells? </p>\n"}, {"tags": ["javascript", "ruby-on-rails", "arrays", "ruby", "hash"], "answers": [{"comments": [{"owner": {"reputation": 1456, "user_id": 2903635, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/3f3ab51695511d5587f395f215fc2007?s=128&d=identicon&r=PG&f=1", "display_name": "Bhav", "link": "https://stackoverflow.com/users/2903635/bhav"}, "edited": false, "score": 0, "creation_date": 1450900174, "post_id": 34442569, "comment_id": 56627088, "body": "In my javascript example, the data is available in gon.balances, however, in my example, gon.balances is an array of 9 Objects with some Objects having the same account_id. My issue is trying to group them so there is one Object for each account_id."}, {"owner": {"reputation": 38790, "user_id": 665240, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/32fc08ee80cf129f6b1e8593eccb9a03?s=128&d=identicon&r=PG", "display_name": "Carl Zulauf", "link": "https://stackoverflow.com/users/665240/carl-zulauf"}, "reply_to_user": {"reputation": 1456, "user_id": 2903635, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/3f3ab51695511d5587f395f215fc2007?s=128&d=identicon&r=PG&f=1", "display_name": "Bhav", "link": "https://stackoverflow.com/users/2903635/bhav"}, "edited": false, "score": 0, "creation_date": 1450909030, "post_id": 34442569, "comment_id": 56630953, "body": "@Bhav that is unrelated to the question you asked, but look at <code>group_by</code> in the rails docs"}], "tags": [], "owner": {"reputation": 38790, "user_id": 665240, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/32fc08ee80cf129f6b1e8593eccb9a03?s=128&d=identicon&r=PG", "display_name": "Carl Zulauf", "link": "https://stackoverflow.com/users/665240/carl-zulauf"}, "is_accepted": false, "score": 0, "last_activity_date": 1450899444, "creation_date": 1450899444, "answer_id": 34442569, "question_id": 34442288, "link": "https://stackoverflow.com/questions/34442288/creating-a-hash-in-rails/34442569#34442569", "title": "Creating a hash in Rails", "body": "<p>You need to inject the data from rails into your javascript somewhere. In your example your index.html.erb could be modified to work by adding something similar to the following line right after you open your <code>&lt;script&gt;</code>.</p>\n\n<pre><code>var gon = gon || {}; gon.balances = &lt;%= @balances.to_json %&gt;\n</code></pre>\n\n<p>You can customize the structure of the balances collection by implementing <code>as_json</code> methods in your models which return a hash with the values you need.</p>\n"}, {"comments": [{"owner": {"reputation": 1456, "user_id": 2903635, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/3f3ab51695511d5587f395f215fc2007?s=128&d=identicon&r=PG&f=1", "display_name": "Bhav", "link": "https://stackoverflow.com/users/2903635/bhav"}, "edited": false, "score": 0, "creation_date": 1450904559, "post_id": 34442963, "comment_id": 56629041, "body": "I receive a no method error in my controller. ... &#39;undefined method `to_sym&#39; for 1:Fixnum&#39;"}, {"owner": {"reputation": 2356, "user_id": 1547872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/x2Brf.jpg?s=128&g=1", "display_name": "dileep nandanam", "link": "https://stackoverflow.com/users/1547872/dileep-nandanam"}, "reply_to_user": {"reputation": 1456, "user_id": 2903635, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/3f3ab51695511d5587f395f215fc2007?s=128&d=identicon&r=PG&f=1", "display_name": "Bhav", "link": "https://stackoverflow.com/users/2903635/bhav"}, "edited": false, "score": 1, "creation_date": 1450905688, "post_id": 34442963, "comment_id": 56629498, "body": "see the edit. &quot;acc_#{acc_id}&quot; will help you making a gone variable accessible as gone.acc_123"}, {"owner": {"reputation": 1456, "user_id": 2903635, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/3f3ab51695511d5587f395f215fc2007?s=128&d=identicon&r=PG&f=1", "display_name": "Bhav", "link": "https://stackoverflow.com/users/2903635/bhav"}, "edited": false, "score": 0, "creation_date": 1450908127, "post_id": 34442963, "comment_id": 56630590, "body": "Thanks. That makes sense. I&#39;ve updated the OP as I&#39;d like to modify the hash to return additional information such as the date for each balance and the account name instead of id."}, {"owner": {"reputation": 2356, "user_id": 1547872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/x2Brf.jpg?s=128&g=1", "display_name": "dileep nandanam", "link": "https://stackoverflow.com/users/1547872/dileep-nandanam"}, "reply_to_user": {"reputation": 1456, "user_id": 2903635, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/3f3ab51695511d5587f395f215fc2007?s=128&d=identicon&r=PG&f=1", "display_name": "Bhav", "link": "https://stackoverflow.com/users/2903635/bhav"}, "edited": false, "score": 0, "creation_date": 1450908709, "post_id": 34442963, "comment_id": 56630828, "body": "you can simply use [acc_details.account.name , acc_details.map(&amp;:attributes)] as ordered pairs for hash, so that the key will be a string containing account name and value as an array of hash containing account details."}, {"owner": {"reputation": 1456, "user_id": 2903635, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/3f3ab51695511d5587f395f215fc2007?s=128&d=identicon&r=PG&f=1", "display_name": "Bhav", "link": "https://stackoverflow.com/users/2903635/bhav"}, "edited": false, "score": 0, "creation_date": 1450909997, "post_id": 34442963, "comment_id": 56631330, "body": "Ah, okay the value makes sense. That returns all the attributes. The key returns an error. ... undefined method `account&#39; for #&lt;Array:0x007f9c01aa9138&gt;"}, {"owner": {"reputation": 2356, "user_id": 1547872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/x2Brf.jpg?s=128&g=1", "display_name": "dileep nandanam", "link": "https://stackoverflow.com/users/1547872/dileep-nandanam"}, "reply_to_user": {"reputation": 1456, "user_id": 2903635, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/3f3ab51695511d5587f395f215fc2007?s=128&d=identicon&r=PG&f=1", "display_name": "Bhav", "link": "https://stackoverflow.com/users/2903635/bhav"}, "edited": false, "score": 1, "creation_date": 1450910396, "post_id": 34442963, "comment_id": 56631489, "body": "try acc_details.first.account.name , since acc_details is an array of active record objects with same name."}], "tags": [], "owner": {"reputation": 2356, "user_id": 1547872, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/x2Brf.jpg?s=128&g=1", "display_name": "dileep nandanam", "link": "https://stackoverflow.com/users/1547872/dileep-nandanam"}, "is_accepted": true, "score": 1, "last_activity_date": 1450905503, "last_edit_date": 1450905503, "creation_date": 1450901267, "answer_id": 34442963, "question_id": 34442288, "link": "https://stackoverflow.com/questions/34442288/creating-a-hash-in-rails/34442963#34442963", "title": "Creating a hash in Rails", "body": "<p>You can group the objects with account_id to make a hash with acc_ids as keys and array of balances as values.</p>\n\n<pre><code>@balances = Hash[\n  Balance.all.order(date: :desc).group_by(&amp;:account_id).map{|acc_id, acc_details|\n    [\"acc_#{acc_id}\".to_sym, acc_details.map(&amp;:balance)]\n  }\n]\n</code></pre>\n\n<p>will give you a hash like</p>\n\n<pre><code>{:acc_id1 =&gt; [balance1, balance2], :acc_id2 =&gt; [balance_3] }\n</code></pre>\n\n<p>which you can turn into go variables by</p>\n\n<pre><code>gone.push(@balances)\n</code></pre>\n"}], "owner": {"reputation": 1456, "user_id": 2903635, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/3f3ab51695511d5587f395f215fc2007?s=128&d=identicon&r=PG&f=1", "display_name": "Bhav", "link": "https://stackoverflow.com/users/2903635/bhav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 1, "accepted_answer_id": 34442963, "answer_count": 2, "score": 1, "last_activity_date": 1450908457, "creation_date": 1450898167, "last_edit_date": 1450908457, "question_id": 34442288, "link": "https://stackoverflow.com/questions/34442288/creating-a-hash-in-rails", "title": "Creating a hash in Rails", "body": "<p>In my Rails app, I'm trying to use Chart.js to create a line graph with the datasets based on the data being passed from a controller (with the help of the gon gem).  Specifically, I want each dataset to be based on an account_id.</p>\n\n<p>Currently, the controller contains this code where gon.balances is an array of Objects with the following fields - <code>account_id, balance, date</code>...:</p>\n\n<p>balances_controller.rb:</p>\n\n<pre><code>....\ndef index\n  @balances = Balance.all.order(date: :desc)\n\n  gon.balances = @balances\nend\n....\n</code></pre>\n\n<p>I was wondering if it's possible to create variables dynamically in the controller like the following pseudocode, and if so, how?</p>\n\n<ul>\n<li>read all unique Balance.account_id</li>\n<li>for each Balance.account_id\n\n<ul>\n<li>return the account name (Account.name)</li>\n<li>all the Balance.date and Balance.balance that correspond to that Balance.account_id</li>\n</ul></li>\n</ul>\n\n<p>So in affect, I want to be able to return an array of Objects like such:</p>\n\n<pre><code>{:balance1.account.name =&gt; [[balance1.date, balance1.balance],\n                           [balance2.date, balance2.balance]],\n:balance3.account.name  =&gt; [[balance3.date, balance3.balance]] }\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<p>With Dileep Nandanam's help below, I've managed to return all the balances sorted by account_id.</p>\n\n<p>balances_controller.rb:</p>\n\n<pre><code>  def index\n    @balances = Balance.all.order(date: :desc)\n\n    @balancesSortedByAccountId = Hash[\n      Balance.all.order(date: :desc).group_by(&amp;:account_id).map{|acc_id, acc_details|\n        [\"acc_#{acc_id}\".to_sym, acc_details.map(&amp;:balance)]\n      }\n    ]\n\n    gon.balances = @balances\n    gon.balancesSortByAccId = @balancesSortedByAccountId\n  end\n</code></pre>\n\n<p>That provides a hash like this:</p>\n\n<pre><code>{:acc_id1 =&gt; [balance1, balance2], :acc_id2 =&gt; [balance_3] }\n</code></pre>\n\n<p>How can I modify this to provide a hash like the following:</p>\n\n<pre><code>{:balance1.account.name =&gt; [[balance1.date, balance1.balance],\n                           [balance2.date, balance2.balance]],\n:balance3.account.name  =&gt; [[balance3.date, balance3.balance]] }\n</code></pre>\n\n<p>I'm not sure how to return the name and I've tried the following to try to create the array for the date and balance but this results in two separate arrays:</p>\n\n<pre><code>    @balancesSortedByAccountId = Hash[\n      Balance.all.order(date: :desc).group_by(&amp;:account_id).map{|acc_id, acc_details|\n        [\"acc_#{acc_id}\".to_sym, [acc_details.map(&amp;:date), acc_details.map(&amp;:balance)]]\n      }\n    ]\n</code></pre>\n"}, {"tags": ["ruby", "file", "extraction"], "comments": [{"owner": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "edited": false, "score": 0, "creation_date": 1450898329, "post_id": 34442176, "comment_id": 56626229, "body": "what is line 96 doing here? <code>&#47;path&#47;to&#47;file&#47;#{archived_file}.ods&quot;, &#39;path&#47;to&#47;home&#39;</code>"}, {"owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "reply_to_user": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "edited": false, "score": 0, "creation_date": 1450898431, "post_id": 34442176, "comment_id": 56626278, "body": "@archana That&#39;s my mistake, it does the same as the line under it, let me take it out really quick"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450903565, "post_id": 34442176, "comment_id": 56628618, "body": "Please reduce your code to the bare-minimum necessary to demonstrate the problem you&#39;re seeing. &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. We can&#39;t run your code to test possible fixes and trying to recreate your environment with the little you&#39;ve told us isn&#39;t doable."}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450919880, "post_id": 34442176, "comment_id": 56634172, "body": "@theTinMan you can run the code like this..? Just use your own file paths... You wouldn&#39;t be able to run it with this members file paths anyways.. And on another note, why is this question down voted, I&#39;m guessing the reason the paths aren&#39;t shown is because this is for a company, I wouldn&#39;t want my works file paths blasted all over stack overflow.."}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "edited": false, "score": 0, "creation_date": 1450899290, "post_id": 34442472, "comment_id": 56626684, "body": "<code>path&#47;to&#47;directory&#47;file.file</code> is not the path to the file...  Also that doesn&#39;t explain why it works when I test run it in a different directory...?"}, {"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "reply_to_user": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "edited": false, "score": 0, "creation_date": 1450903372, "post_id": 34442472, "comment_id": 56628528, "body": "I don&#39;t know why it works in a different directory, but you only pasted part of your program, so maybe the missing part holds a clue.  But I&#39;m confused by your answer - are you running the code as pasted above, or are all the placeholder paths in that code something you added here on SO to obfuscate the real name of the directories you&#39;re using ?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1450903652, "post_id": 34442472, "comment_id": 56628660, "body": "The question lacks sufficient detail for us to be able to do much with it."}, {"owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "edited": false, "score": 0, "creation_date": 1450903779, "post_id": 34442472, "comment_id": 56628707, "body": "@DanFarrell I made the paths in the question because I&#39;d rather not have everyone one stackoverflow know the directories in my companies system.. The rest of the code runs just fine and works, it has nothing to do with this specific aspect of the program."}, {"owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450903795, "post_id": 34442472, "comment_id": 56628710, "body": "@theTinMan What details am I missing..?"}, {"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 1, "creation_date": 1450904401, "post_id": 34442472, "comment_id": 56628961, "body": "You posted an error including a path that certainly doesn&#39;t exist on your system ( /path/... ) and changed your code before sharing it, so how could we <i>possibly</i> know why you&#39;re getting a stat error if we&#39;re not seeing the code nor the real error message?"}, {"owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "edited": false, "score": 0, "creation_date": 1450907350, "post_id": 34442472, "comment_id": 56630242, "body": "Because the error message is the same thing, it&#39;s telling me the file doesn&#39;t exist where the file clearly exists"}, {"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 1, "creation_date": 1450907635, "post_id": 34442472, "comment_id": 56630360, "body": "If you really think the <code>mv</code> operation is failing to recognize an extant file, then that would be a bug with Ruby.  But that&#39;s not the case, I&#39;m willing to assume.  There&#39;s an error in your pathing somewhere that is causing this, but since you don&#39;t care to share your pathing with us, we can&#39;t ind it."}, {"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1450907751, "post_id": 34442472, "comment_id": 56630424, "body": "As a random guess, your line 77 is relative, but your error message has a leading slash, so it&#39;s absolute.  Of course, since those aren&#39;t the actual values in both your script and your error message, that could well be an error in your obfuscation."}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 1, "creation_date": 1450919727, "post_id": 34442472, "comment_id": 56634144, "body": "@DanFarrell I don&#39;t understand why this is down voted? He doesn&#39;t want to show his file paths for security, you can still find the problem without the full path names.."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1450922986, "post_id": 34442472, "comment_id": 56634777, "body": "We can&#39;t find anything because we have no idea what the directory hierarchy for his files is. We don&#39;t know where his files really are, because it&#39;s entirely possible that they&#39;re not where he thinks they are. Ruby is an extremely well tested language, especially the File and IO classes. Odds are very small the problem is in the language. And, it&#39;s a requirement that we be able to recreate the problem, or the file layout has to be perfectly defined if we&#39;re to help him. It has nothing to do with security; If he wants help he can recreate a sanitized hierarchy that hides sensitive info."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1450923128, "post_id": 34442472, "comment_id": 56634798, "body": "@Ekult3k, if you think you can solve the problem, then provide an answer. That&#39;s how SO works. We&#39;re trying to help, but we expect certain things. If you can read into the given question and divine the missing information then please do so. Sometimes the paths are relative, and we have NO idea where the code is running at that point, and other times it&#39;s absolute, making it independent of the current-working directory."}, {"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 1, "creation_date": 1450933580, "post_id": 34442472, "comment_id": 56636998, "body": "As another thought here, I see a lot of repeated strings.  If these were variables, not only would you not have to obfuscate the logic ( just the initial assignment ), but you&#39;d have a good chance of solving the problem in the process.  One trick I like to use in cases like these is a string or regex based search and replace - easiest way to spot typos."}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450957582, "post_id": 34442472, "comment_id": 56646054, "body": "@theTinMan okay I&#39;ll post an answer."}], "tags": [], "owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "is_accepted": false, "score": 1, "last_activity_date": 1451251473, "last_edit_date": 1451251473, "creation_date": 1450899039, "answer_id": 34442472, "question_id": 34442176, "link": "https://stackoverflow.com/questions/34442176/untar-files-outputting-error/34442472#34442472", "title": "Untar files outputting error", "body": "<p>If you look at the error message, it days exactly why this operation didn't work.  You have several placeholder paths in your code still.    The placeholder is explicitly shown in the error.</p>\n"}, {"comments": [{"owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "edited": false, "score": 0, "creation_date": 1450957901, "post_id": 34452314, "comment_id": 56646163, "body": "Hi, thank you for the answer, however I am only trying to extract a single file from a large tarball, the tarball also has a directory inside of it, not the entire tarball. Is there a way I can do that using a bash command? I already have tried using <code>gem&#47;package</code> and it didn&#39;t work, probably due to my permissions within that folder."}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "reply_to_user": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "edited": false, "score": 0, "creation_date": 1450958330, "post_id": 34452314, "comment_id": 56646340, "body": "@Bam I editors the answer, it should contain an answer to your question now."}, {"owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "edited": false, "score": 0, "creation_date": 1450958481, "post_id": 34452314, "comment_id": 56646401, "body": "Thank you! That&#39;s exactly what I was looking for! It works!"}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "reply_to_user": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "edited": false, "score": 0, "creation_date": 1450958579, "post_id": 34452314, "comment_id": 56646438, "body": "@Bam I&#39;d highly suggest using Ruby in place of bash, but you&#39;re welcome glad I could help, feel free to accept the answer"}], "tags": [], "owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "is_accepted": true, "score": 1, "last_activity_date": 1450958276, "last_edit_date": 1450958276, "creation_date": 1450957558, "answer_id": 34452314, "question_id": 34442176, "link": "https://stackoverflow.com/questions/34442176/untar-files-outputting-error/34452314#34452314", "title": "Untar files outputting error", "body": "<p>Alright your problem is one of three things:</p>\n\n<ol>\n<li>You don't have write permissions to the directory you're attempting to move to, I tested your code within <em>my own directories</em> and it works perfectly, good job on using FileUtils, you can use \"package/gem\" &amp; \"zlib\" in place of the bash command, that would look something like this: \n<code>extract = Gem::Package::TarReader.new(Zlib::GzipReader.open(filename_here))</code></li>\n<li>Your files don't exist within the archive, or there's something wrong within the archive. Check with an admin or with someone who has full perms to the directory you're going into, see if it works for them.</li>\n<li>Your bash command is a little weird.. <code>tar -xvzf UW_archive_#{tar_name}.tgz path/to/extract/from/#{archived_file}.ods</code> I'm not entirely sure what you're attempting to do here. But if you need to change directories, and insist on using bash, <code>-C</code> will change into a directory. Here's a rewrite of that command: <code>tar -x -f UW_archive_#{tar_name}.tgz -C /path/to/change/to #{archived_file}.ods</code> </li>\n</ol>\n\n<p>The <code>-x</code> tells bash to extract from a <code>tar</code> the <code>-f</code> tells it this is the filename and the <code>-C</code> says extract this filename into this directory.</p>\n\n<p>That's about all I can really think of, Ruby can pretty much do everything bash can do, all you have to do is find the gem, or the library for it. Hope this helps!</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>If extracting a single file from a large tarball within the directory inside of the tarball: <code>tar -x -f tarname.tgz -C path/to/extract/to path/to/file/filename.file</code></p>\n\n<p>That should extract the file out of the tar and into the specified directory, careful though, this will extract the file ALONG with the path, to get rid of the path you can use either, <code>--strip-components 1</code> the number is how many paths you want to strip. Or you can move the file from the paths and delete the paths themselves, hope this helps!</p>\n"}], "owner": {"reputation": 153, "user_id": 5712254, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5179d3995a0d58f4d4dd166ba4f9faf2?s=128&d=identicon&r=PG&f=1", "display_name": "Bam", "link": "https://stackoverflow.com/users/5712254/bam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 34452314, "answer_count": 2, "score": -2, "last_activity_date": 1451251473, "creation_date": 1450897722, "last_edit_date": 1450903249, "question_id": 34442176, "link": "https://stackoverflow.com/questions/34442176/untar-files-outputting-error", "title": "Untar files outputting error", "body": "<p>I recently created a program that will untar a file within a specified directory. When untarring the file I get the error:</p>\n\n<pre><code>/usr/local/lib/ruby/1.9.1/fileutils.rb:1423:in `stat': No such file or directory - /path/to/directory/file.file (Errno::ENOENT)\n        from /usr/local/lib/ruby/1.9.1/fileutils.rb:1423:in `block in fu_each_src_dest'\n        from /usr/local/lib/ruby/1.9.1/fileutils.rb:1437:in `fu_each_src_dest0'\n        from /usr/local/lib/ruby/1.9.1/fileutils.rb:1421:in `fu_each_src_dest'\n        from /usr/local/lib/ruby/1.9.1/fileutils.rb:504:in `mv'\n        from spreadsheet:97:in `block in unlock_archive_spreadsheet'\n        from spreadsheet:76:in `each'\n        from spreadsheet:76:in `unlock_archive_spreadsheet'\n        from spreadsheet:24:in `start'\n        from spreadsheet:111:in `&lt;main&gt;'\n</code></pre>\n\n<p>When I try to run the program within the directory that it will be used in, it outputs the above error.<br>\nI'm a little confused because when I test run this program it works. For example:</p>\n\n<pre><code>[me@me ruby]$ ruby spreadsheet\nIs this an archive spreadsheet?: y\nEnter Folio # of spreadsheet if unlocking multiple use comma followed by space: 2719569\nText file containing the information is: filelist_20120625.txt\nContinue: yes\nPreparing to extract file..\nExtracting file...\nMoving file to 4000_UW_spreadsheets directory\nFile extracted and moved successfully\n[me@me ruby]$ \n</code></pre>\n\n<p>This is the source:</p>\n\n<pre><code> 70   require 'fileutils'\n 71\n 72\n 73   def unlock_archive_spreadsheet\n 74     print \"Enter Folio # of spreadsheet if unlocking multiple use comma followed by space: \"\n 75     folio = gets.chomp\n 76     folio.split(', ').each do |archived_file|\n 77        FileUtils.chdir(\"path/where/file/is\")\n 78       \n 79       archived_text_file = `grep -lr #{archived_file}.ods *.txt`\n 80       tar_name = archived_text_file.match(/\\d+/).to_s\n 81       puts \"Text file containing the information is: #{archived_text_file}\"\n 82       print \"Continue: \"\n 83       continue = gets.chomp.downcase\n 84       if continue.start_with?(\"y\")\n 85         puts \"Preparing to extract file..\"\n 86        \n 87         if File.exist?(\"/path/to/file/#{archived_file}.ods\")\n 88           puts \"ERROR FILE EXISTS. Delete or move file and try again\"\n 89           raise \"File: #{archived_file}.ods exists in directory. Delete or move file to continue, if file is not found within directory, contact admin.\"\n 90           next\n 91         else\n 92           puts \"Extracting file...\"\n 93           `tar -xvzf UW_archive_#{tar_name}.tgz path/to/extract/from/#{archived_file}.ods`\n 94         end\n 95         puts \"Moving file to 4000_UW_spreadsheets directory\"\n 96         \n 97         FileUtils.mv \"/path/to/file/#{archived_file}.ods\", '/path/to/move/to'\n 98        \n 99         puts \"File extracted and moved successfully\"\n100       else\n101         puts \"Exiting..\"\n102         exit 1\n103       end\n104     end\n105   end\n</code></pre>\n\n<p>Is there something I'm doing wrong here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 473, "user_id": 3841197, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/017492b1aaa99adaa4ec1d4190ee2f66?s=128&d=identicon&r=PG&f=1", "display_name": "Adt", "link": "https://stackoverflow.com/users/3841197/adt"}, "edited": false, "score": 0, "creation_date": 1450896251, "post_id": 34441747, "comment_id": 56625209, "body": "I got it, but i want to set &quot;file&quot; so that it can be used by other methods, how can i do that ?"}, {"owner": {"reputation": 473, "user_id": 3841197, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/017492b1aaa99adaa4ec1d4190ee2f66?s=128&d=identicon&r=PG&f=1", "display_name": "Adt", "link": "https://stackoverflow.com/users/3841197/adt"}, "edited": false, "score": 0, "creation_date": 1450896365, "post_id": 34441747, "comment_id": 56625265, "body": "i m putting my complete class above to tell u what i m trying to do ."}, {"owner": {"reputation": 89146, "user_id": 211563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32a10a2f047dec1e5582e74cba6b3ec?s=128&d=identicon&r=PG", "display_name": "Andrew Marshall", "link": "https://stackoverflow.com/users/211563/andrew-marshall"}, "reply_to_user": {"reputation": 473, "user_id": 3841197, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/017492b1aaa99adaa4ec1d4190ee2f66?s=128&d=identicon&r=PG&f=1", "display_name": "Adt", "link": "https://stackoverflow.com/users/3841197/adt"}, "edited": false, "score": 1, "creation_date": 1450896367, "post_id": 34441747, "comment_id": 56625266, "body": "@Adt As I said, ActiveRecord/ActiveModel already gives you that ability. Did you attempt <code>MultipleJob.new(file: &#39;foo&#39;)</code> without your <code>initialize</code> in place?"}], "tags": [], "owner": {"reputation": 89146, "user_id": 211563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32a10a2f047dec1e5582e74cba6b3ec?s=128&d=identicon&r=PG", "display_name": "Andrew Marshall", "link": "https://stackoverflow.com/users/211563/andrew-marshall"}, "is_accepted": true, "score": 5, "last_activity_date": 1450895872, "creation_date": 1450895872, "answer_id": 34441747, "question_id": 34441687, "link": "https://stackoverflow.com/questions/34441687/rails-ruby-error-in-initialize/34441747#34441747", "title": "Rails/ ruby error in initialize", "body": "<p>You\u2019re subclassing ActiveRecord, which defines its own <code>initialize</code>. You should really use an <a href=\"http://guides.rubyonrails.org/active_record_callbacks.html#after-initialize-and-after-find\"><code>after_initialize</code></a> callback instead.</p>\n\n<p>But really, ActiveRecord (via <a href=\"http://guides.rubyonrails.org/active_model_basics.html#model\">ActiveModel::Model</a>) already does what you\u2019re doing in your <code>initialize</code> on its own anyway, so you don\u2019t need it at all!</p>\n"}], "owner": {"reputation": 473, "user_id": 3841197, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/017492b1aaa99adaa4ec1d4190ee2f66?s=128&d=identicon&r=PG&f=1", "display_name": "Adt", "link": "https://stackoverflow.com/users/3841197/adt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 34441747, "answer_count": 1, "score": 0, "last_activity_date": 1450895872, "creation_date": 1450895535, "question_id": 34441687, "link": "https://stackoverflow.com/questions/34441687/rails-ruby-error-in-initialize", "title": "Rails/ ruby error in initialize", "body": "<p>I have this class </p>\n\n<pre><code>class MultipleJob &lt; ActiveRecord::Base\n    attr_accessor :file\n    def initialize(attributes = {})\n      attributes.each { |title, value| send(\"#{title}=\", value) }      \n    end\nend\n</code></pre>\n\n<p>when  i m trying to do MultipleJob.new</p>\n\n<p>it is showing me</p>\n\n<pre><code>&gt;&gt; MultipleJob.new\n=&gt; #&lt;MultipleJob not initialized&gt;\n</code></pre>\n\n<p>Any guess why i m seeing this error?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 841, "user_id": 2280574, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/fsxqk.jpg?s=128&g=1", "display_name": "Mellet", "link": "https://stackoverflow.com/users/2280574/mellet"}, "edited": false, "score": 0, "creation_date": 1450896751, "post_id": 34441825, "comment_id": 56625482, "body": "I gues I would have to create a model for the &#39;grenade&#39; to make this form?"}, {"owner": {"reputation": 841, "user_id": 2280574, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/fsxqk.jpg?s=128&g=1", "display_name": "Mellet", "link": "https://stackoverflow.com/users/2280574/mellet"}, "edited": false, "score": 0, "creation_date": 1450898043, "post_id": 34441825, "comment_id": 56626067, "body": "Figuered out how to make the form with the option as an array :)"}], "tags": [], "owner": {"reputation": 3160, "user_id": 1266795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7855792dbc5f3b4c365344314e2b1ad6?s=128&d=identicon&r=PG", "display_name": "AndyV", "link": "https://stackoverflow.com/users/1266795/andyv"}, "is_accepted": true, "score": 0, "last_activity_date": 1450896173, "last_edit_date": 1495541245, "creation_date": 1450896173, "answer_id": 34441825, "question_id": 34441640, "link": "https://stackoverflow.com/questions/34441640/creating-a-filter-for-active-record-in-rails/34441825#34441825", "title": "Creating a filter for active record in rails", "body": "<p>Look into creating a form with an array of options (e.g., <a href=\"https://stackoverflow.com/questions/8850188/syntax-for-form-for-when-building-an-array-from-checkboxes\">here</a>).  That will allow you to get multiple values for the specific type of grenade.</p>\n\n<p>Your scope will work with either a single id <em>or</em> an array of ids and using the array of options approach should yield an array that will work.  In your example above it would effectively be Nade.by_grenade([1,4]).  You might want to guard against the array being empty (assuming that an empty list would be a bad thing).</p>\n"}], "owner": {"reputation": 841, "user_id": 2280574, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/fsxqk.jpg?s=128&g=1", "display_name": "Mellet", "link": "https://stackoverflow.com/users/2280574/mellet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 34441825, "answer_count": 1, "score": 0, "last_activity_date": 1450896173, "creation_date": 1450895263, "question_id": 34441640, "link": "https://stackoverflow.com/questions/34441640/creating-a-filter-for-active-record-in-rails", "title": "Creating a filter for active record in rails", "body": "<p>Just started coding in Ruby on Rails and have managed to create the basic CRUD functionality for my app.</p>\n\n<p>I can also list them all.\nNow I would like to create a filter for the user to interact with.</p>\n\n<pre><code>Database Schema\ncreate_table \"nades\", force: :cascade do |t|\n   t.string   \"title\"\n   t.integer   \"grenade\"\n   t.text     \"description\"\n   t.datetime \"created_at\"\n   t.datetime \"updated_at\"\n   t.integer  \"map_id\"\nend\n</code></pre>\n\n<p>The \"grenade\" can have a value from 1-4, corresponding to a specific grenade:</p>\n\n<p><code>[[1,\"smoke\"], [2,\"flash\"], [3,\"molotov\"], [4,\"he-grande\"]</code></p>\n\n<p>Now I'm trying to create a filter with 4 buttons in the view. Where you can toggle each nade on/off to show or hide them in the results.</p>\n\n<p><code>[x]Smoke [ ]Flash [ ]Moltov [x]HE</code></p>\n\n<p>This should only return the nades <code>where grenade = [1,4]</code></p>\n\n<p>After some reading it looks like scoped would be nice to use to manage this.\nHowever I'm not sure how to make it work as I want.</p>\n\n<p>Was thinking of doing something like:</p>\n\n<p><code>scope :by_nade, -&gt; grenade { where(grenade: grenade) if status.grenade? }</code></p>\n\n<p>However this only allows me to get 1 specific nade type from the database.\nIs it posible to send multiple parameters like:</p>\n\n<p><code>http://localhost:3000/nades/?by_nade=1,2  ??</code></p>\n\n<p>Or is it a better solution to my problem?</p>\n"}, {"tags": ["ruby", "installation", "liquid"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1450898494, "post_id": 34441561, "comment_id": 56626322, "body": "all you should need is <code>require &#39;liquid&#39;</code> this will go and find the installed gem and it will be accessible in your project."}, {"owner": {"reputation": 99, "user_id": 5712212, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b8904f898fea835d62deffeec3d17fd6?s=128&d=identicon&r=PG&f=1", "display_name": "szMuzzyA", "link": "https://stackoverflow.com/users/5712212/szmuzzya"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1450903464, "post_id": 34441561, "comment_id": 56628572, "body": "Do I not need to run any gulp tasks for it?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1451311657, "post_id": 34441561, "comment_id": 56731422, "body": "I am not sure what you intend to do in this project so it is hard for me to help beyond answering your question of &quot;how to use liquid&quot;. If you have a more specific question please feel free to ask. Otherwise <code>require</code> is how you include ruby gems as a library and then you can access them in your code."}], "owner": {"reputation": 99, "user_id": 5712212, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b8904f898fea835d62deffeec3d17fd6?s=128&d=identicon&r=PG&f=1", "display_name": "szMuzzyA", "link": "https://stackoverflow.com/users/5712212/szmuzzya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 258, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1450894953, "creation_date": 1450894953, "question_id": 34441561, "link": "https://stackoverflow.com/questions/34441561/setting-up-and-using-liquid", "title": "Setting up and using liquid", "body": "<p>I can't seem to figure out how to get liquid set up on my windows machine.</p>\n\n<p>I installed ruby.  I then used 'gem install liquid' to install liquid.</p>\n\n<p>From here I have no clue how to use liquid in my project.  I'm using gulp, so I don't know if that matters or not</p>\n\n<p>Do I need to create and set up a gem file in my project?  If so, how do I set it up to use liquid?</p>\n\n<p>I'm a complete noob with this and there's absolutely no helpful documentation online.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "paypal"], "comments": [{"owner": {"reputation": 3160, "user_id": 1266795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7855792dbc5f3b4c365344314e2b1ad6?s=128&d=identicon&r=PG", "display_name": "AndyV", "link": "https://stackoverflow.com/users/1266795/andyv"}, "edited": false, "score": 0, "creation_date": 1450895431, "post_id": 34441468, "comment_id": 56624839, "body": "The &#39;value&#39; key looks like it has json rather than ruby hash elements.  Is that correct?"}, {"owner": {"reputation": 964, "user_id": 3550183, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b641c307007e973d90e33737c2d3a48f?s=128&d=identicon&r=PG&f=1", "display_name": "Doug", "link": "https://stackoverflow.com/users/3550183/doug"}, "reply_to_user": {"reputation": 3160, "user_id": 1266795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7855792dbc5f3b4c365344314e2b1ad6?s=128&d=identicon&r=PG", "display_name": "AndyV", "link": "https://stackoverflow.com/users/1266795/andyv"}, "edited": false, "score": 0, "creation_date": 1450895660, "post_id": 34441468, "comment_id": 56624950, "body": "Yes, I originally changed those keys to contain Ruby hash elements.  The way I posted it here is just copied from the docs.  I&#39;ll change it to prevent further confusion."}, {"owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "edited": false, "score": 0, "creation_date": 1450896064, "post_id": 34441468, "comment_id": 56625123, "body": "have to tried with <i>update_attributes</i> method on <i>@credit_card</i> object ."}, {"owner": {"reputation": 964, "user_id": 3550183, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b641c307007e973d90e33737c2d3a48f?s=128&d=identicon&r=PG&f=1", "display_name": "Doug", "link": "https://stackoverflow.com/users/3550183/doug"}, "edited": false, "score": 0, "creation_date": 1450896225, "post_id": 34441468, "comment_id": 56625192, "body": "I believe <code>update_attributes</code> is for <code>ActiveRecord</code>, no?  If I&#39;m manipulating a PayPal CreditCard object, I don&#39;t think that&#39;ll be an available method."}], "owner": {"reputation": 964, "user_id": 3550183, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/b641c307007e973d90e33737c2d3a48f?s=128&d=identicon&r=PG&f=1", "display_name": "Doug", "link": "https://stackoverflow.com/users/3550183/doug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1450895796, "creation_date": 1450894512, "last_edit_date": 1450895796, "question_id": 34441468, "link": "https://stackoverflow.com/questions/34441468/paypal-card-update-error-wrong-number-of-arguments", "title": "PayPal card update error... wrong number of arguments?", "body": "<p>So I'm trying to update a card using PayPal-Ruby-SDK.  I'm taking the majority of my code directly from the examples <a href=\"https://github.com/paypal/PayPal-Ruby-SDK/blob/master/samples/credit_card/update.rb\" rel=\"nofollow\">here</a>.  </p>\n\n<p>To find the card to update:</p>\n\n<pre><code>@credit_card = CreditCard.find(user.card_id)\n=&gt;\n#&lt;PayPal::SDK::REST::DataTypes::CreditCard:0x007f954d8b9a68\n @create_time=\"2015-12-22T00:58:40Z\",\n @error=nil,\n @expire_month=10,\n @expire_year=2017,\n @id=\"CARD-8JN90741LM8220207KZ4KAQA\",\n @links=\n  [#&lt;PayPal::SDK::REST::DataTypes::Links:0x007f954d89c990\n    @error=nil,\n    @href=\n     \"https://api.sandbox.paypal.com/v1/vault/credit-cards/CARD-8JN90741LM8220207KZ4KAQA\",\n    @method=\"GET\",\n    @rel=\"self\"&gt;,\n   #&lt;PayPal::SDK::REST::DataTypes::Links:0x007f954d89c378\n    @error=nil,\n    @href=\n     \"https://api.sandbox.paypal.com/v1/vault/credit-cards/CARD-8JN90741LM8220207KZ4KAQA\",\n    @method=\"DELETE\",\n    @rel=\"delete\"&gt;,\n   #&lt;PayPal::SDK::REST::DataTypes::Links:0x007f954d88bc08\n    @error=nil,\n    @href=\n     \"https://api.sandbox.paypal.com/v1/vault/credit-cards/CARD-8JN90741LM8220207KZ4KAQA\",\n    @method=\"PATCH\",\n    @rel=\"patch\"&gt;],\n @number=\"xxxxxxxxxxxx3124\",\n @state=\"ok\",\n @type=\"discover\",\n @update_time=\"2015-12-22T00:58:40Z\",\n @valid_until=\"2018-12-21T00:00:00Z\"&gt;\n</code></pre>\n\n<p>To update the card...</p>\n\n<pre><code>@updated_card = {\n  :op=&gt; \"replace\",\n  :path=&gt; \"/billing_address\",\n  :value=&gt; {\n    :line1=&gt; \"111 First Street\",\n    :city=&gt; \"Saratoga\",\n    :country_code=&gt; \"US\",\n    :state=&gt; \"CA\",\n    :postal_code=&gt; \"95070\"\n  }\n}\n\npatch_request = Patch.new(@updated_card)\n@credit_card.update(patch_request)\n</code></pre>\n\n<p>When I try using this method, it tells me I'm using the wrong number of arguments...</p>\n\n<pre><code>ArgumentError: wrong number of arguments (1 for 0)\nfrom /Users/doug/.rvm/gems/ruby-2.1.3/gems/paypal-sdk-rest-1.3.4/lib/paypal-sdk/rest/data_types.rb:196:in `update'\nfrom (irb):56\nfrom /Users/doug/.rvm/gems/ruby-2.1.3/gems/railties-4.2.0/lib/rails/commands/console.rb:110:in `start'\nfrom /Users/doug/.rvm/gems/ruby-2.1.3/gems/railties-4.2.0/lib/rails/commands/console.rb:9:in `start'\nfrom /Users/doug/.rvm/gems/ruby-2.1.3/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:68:in `console'\nfrom /Users/doug/.rvm/gems/ruby-2.1.3/gems/railties-4.2.0/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\nfrom /Users/doug/.rvm/gems/ruby-2.1.3/gems/railties-4.2.0/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\nfrom /Users/doug/.rvm/gems/ruby-2.1.3/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:274:in `require'\nfrom /Users/doug/.rvm/gems/ruby-2.1.3/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:274:in `block in require'\nfrom /Users/doug/.rvm/gems/ruby-2.1.3/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:240:in `load_dependency'\nfrom /Users/doug/.rvm/gems/ruby-2.1.3/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:274:in `require'\nfrom /Users/doug/workspace/pokersprout/coaching/bin/rails:8:in `&lt;top (required)&gt;'\nfrom /Users/doug/.rvm/gems/ruby-2.1.3/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:268:in `load'\nfrom /Users/doug/.rvm/gems/ruby-2.1.3/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:268:in `block in load'\nfrom /Users/doug/.rvm/gems/ruby-2.1.3/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:240:in `load_dependency'\nfrom /Users/doug/.rvm/gems/ruby-2.1.3/gems/activesupport-4.2.0/lib/active_support/dependencies.rb:268:in `load'\nfrom /Users/doug/.rvm/gems/ruby-2.1.3/gems/spring-1.4.0/lib/spring/commands/rails.rb:6:in `call'\nfrom /Users/doug/.rvm/gems/ruby-2.1.3/gems/spring-1.4.0/lib/spring/command_wrapper.rb:38:in `call'\nfrom /Users/doug/.rvm/gems/ruby-2.1.3/gems/spring-1.4.0/lib/spring/application.rb:183:in `block in serve'\nfrom /Users/doug/.rvm/gems/ruby-2.1.3/gems/spring-1.4.0/lib/spring/application.rb:156:in `fork'\nfrom /Users/doug/.rvm/gems/ruby-2.1.3/gems/spring-1.4.0/lib/spring/application.rb:156:in `serve'\nfrom /Users/doug/.rvm/gems/ruby-2.1.3/gems/spring-1.4.0/lib/spring/application.rb:131:in `block in run'\nfrom /Users/doug/.rvm/gems/ruby-2.1.3/gems/spring-1.4.0/lib/spring/application.rb:125:in `loop'\nfrom /Users/doug/.rvm/gems/ruby-2.1.3/gems/spring-1.4.0/lib/spring/application.rb:125:in `run'\nfrom /Users/doug/.rvm/gems/ruby-2.1.3/gems/spring-1.4.0/lib/spring/application/boot.rb:18:in `&lt;top (required)&gt;'\nfrom /Users/doug/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\nfrom /Users/doug/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\nfrom -e:1:in `&lt;main&gt;'2.1.3\n</code></pre>\n\n<p>I'm not quite sure what to make of this error, since the documentation tells me I have to pass in the updated card parameters.  It seems to be up to date, and this is the package that PayPal's docs recommended.</p>\n\n<p>If I try to just use <code>update</code> with no arguments (which doesn't make much sense), I get this response:</p>\n\n<pre><code>PayPal-Request-Id: 29fc28cf-9aeb-4ca0-bbaa-2ecab741fa43\nRequest[patch]: https://api.sandbox.paypal.com/v1/vault/credit-cards/CARD-8JN90741LM8220207KZ4KAQA\nRequest.body={\"id\":\"CARD-8JN90741LM8220207KZ4KAQA\",\"number\":\"xxxxxxxxxxxx3124\",\"type\":\"discover\",\"expire_month\":10,\"expire_year\":2017,\"state\":\"ok\",\"valid_until\":\"2018-12-21T00:00:00Z\",\"create_time\":\"2015-12-22T00:58:40Z\",\"update_time\":\"2015-12-22T00:58:40Z\",\"links\":[{\"href\":\"https://api.sandbox.paypal.com/v1/vault/credit-cards/CARD-8JN90741LM8220207KZ4KAQA\",\"rel\":\"self\",\"method\":\"GET\"},{\"href\":\"https://api.sandbox.paypal.com/v1/vault/credit-cards/CARD-8JN90741LM8220207KZ4KAQA\",\"rel\":\"delete\",\"method\":\"DELETE\"},{\"href\":\"https://api.sandbox.paypal.com/v1/vault/credit-cards/CARD-8JN90741LM8220207KZ4KAQA\",\"rel\":\"patch\",\"method\":\"PATCH\"}]}  request.header={\"X-PAYPAL-SANDBOX-EMAIL-ADDRESS\"=&gt;\"reid-facilitator@pokersprout.com\", \"Authorization\"=&gt;\"Bearer A101.VF7UC2sTfYAAjpAIEgURryx08ur2UhHZGhqjZnMA4l9_NbsxYQcsH83v37HIVEC9.5Y9P29NrkohOap3ONlr4w3Wp84O\", \"Content-Type\"=&gt;\"application/json\", \"User-Agent\"=&gt;\"PayPalSDK/PayPal-Ruby-SDK 1.3.4 (paypal-sdk-core 1.3.4; ruby 2.1.3p242-x86_64-darwin13.0;OpenSSL 1.0.1j 15 Oct 2014)\", \"PayPal-Request-Id\"=&gt;\"29fc28cf-9aeb-4ca0-bbaa-2ecab741fa43\"}\nResponse[400]: Bad Request, Duration: 0.657s\nResponse.body={\"name\":\"MALFORMED_REQUEST\",\"message\":\"Incoming JSON request does not map to API request\",\"information_link\":\"https://developer.paypal.com/docs/api/#MALFORMED_REQUEST\",\"debug_id\":\"700d334028fdd\"}   Response.header={\"date\"=&gt;[\"Wed, 23 Dec 2015 18:07:48 GMT\"], \"server\"=&gt;[\"Apache\"], \"proxy_server_info\"=&gt;[\"host=slcsbplatformapiserv3002.slc.paypal.com;threadId=333\"], \"paypal-debug-id\"=&gt;[\"700d334028fdd\", \"700d334028fdd\"], \"content-language\"=&gt;[\"*\"], \"correlation-id\"=&gt;[\"700d334028fdd\"], \"content-length\"=&gt;[\"195\"], \"vary\"=&gt;[\"Authorization\"], \"content-type\"=&gt;[\"application/json\"], \"set-cookie\"=&gt;[\"X-PP-SILOVER=name%3DSANDBOX3.API.1%26silo_version%3D880%26app%3Dplatformapiserv%26TIME%3D4108483158; domain=.paypal.com; path=/; Secure; HttpOnly\", \"X-PP-SILOVER=; Expires=Thu, 01 Jan 1970 00:00:01 GMT\"], \"connection\"=&gt;[\"close\"]}\n</code></pre>\n\n<p>I can't think of any reason it would want me to use this method with 0 arguments.  Am I missing something obvious?</p>\n"}, {"tags": ["javascript", "ruby", "websocket", "eventmachine"], "answers": [{"comments": [{"owner": {"reputation": 2618, "user_id": 2228070, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/329ef92f05f1986990497ab0bbc63749?s=128&d=identicon&r=PG", "display_name": "NmdMystery", "link": "https://stackoverflow.com/users/2228070/nmdmystery"}, "edited": false, "score": 0, "creation_date": 1450903124, "post_id": 34442550, "comment_id": 56628407, "body": "The javascript is a ReactJS jsx file that&#39;s being loaded to every page - there are no dependency issues because the socket is working, it&#39;s just the handshake message that doesn&#39;t show up.  The connection is defined globally."}], "tags": [], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "is_accepted": false, "score": 0, "last_activity_date": 1450899368, "creation_date": 1450899368, "answer_id": 34442550, "question_id": 34441269, "link": "https://stackoverflow.com/questions/34441269/websocket-onopen-message-only-sent-sometimes/34442550#34442550", "title": "WebSocket onopen - message only sent sometimes", "body": "<p>How are you calling the Javascript? Is there some dependency that needs to be loaded first? Where is connection defined? </p>\n"}, {"tags": [], "owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "is_accepted": false, "score": 1, "last_activity_date": 1451237368, "last_edit_date": 1451237368, "creation_date": 1450920518, "answer_id": 34446115, "question_id": 34441269, "link": "https://stackoverflow.com/questions/34441269/websocket-onopen-message-only-sent-sometimes/34446115#34446115", "title": "WebSocket onopen - message only sent sometimes", "body": "<p>Could this be an issue with <code>EventMachine::WebSocket</code>?</p>\n\n<p>I wonder if all the connections closures are websocket connections. Maybe your browser is trying to access the page using Http as well?</p>\n\n<p>Is it possible that the connections are being closed before the Websocket response to the \"Ping\" is available?</p>\n\n<p>You can try using a different server side solution to check if this might be the issue.</p>\n\n<p>For example, you can use <a href=\"http://www.plezi.io\" rel=\"nofollow\">Plezi</a> to test the client and gather more information. i.e. (in <code>irb</code>):</p>\n\n<pre><code>require 'plezi'\n\nclass TestController\n    def index\n        puts \"Got HTTP request\"\n        \"Hello World\"\n    end\n    def on_open\n        puts \"Websocket Opened.\"\n        write \"Websocket Opened.\"\n    end\n    def on_message data\n        puts \"Got: #{data}\"\n        write \"pong\"\n    end\n    def on_close\n        puts \"Websocket Closed.\"\n    end\nend\nroute '/', TestController\n# if using `irb`, use:\nexit # to start server\n</code></pre>\n\n<p>Good luck.</p>\n\n<p>P.S. The default port is 3000.</p>\n\n<p>If you want, you can either use:</p>\n\n<pre><code>Plezi.port = 8080\n</code></pre>\n\n<p>Or run your script (omit the <code>exit</code> directive if not using <code>irb</code>) with the <code>-p</code> argument:</p>\n\n<pre><code>$ ruby ./server.rb -p 8080\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4822, "user_id": 410012, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/grjgM.jpg?s=128&g=1", "display_name": "claj", "link": "https://stackoverflow.com/users/410012/claj"}, "is_accepted": false, "score": 0, "last_activity_date": 1460575157, "creation_date": 1460575157, "answer_id": 36607664, "question_id": 34441269, "link": "https://stackoverflow.com/questions/34441269/websocket-onopen-message-only-sent-sometimes/36607664#36607664", "title": "WebSocket onopen - message only sent sometimes", "body": "<p>Could it be a race condition? Given that a js WebSocket connect at construction time, maybe you wont be able to add the <code>onopen</code> event handler before that event already has been triggered, and sent (without any effect) to an undefined handler?</p>\n"}], "owner": {"reputation": 2618, "user_id": 2228070, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/329ef92f05f1986990497ab0bbc63749?s=128&d=identicon&r=PG", "display_name": "NmdMystery", "link": "https://stackoverflow.com/users/2228070/nmdmystery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1072, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1460575157, "creation_date": 1450893609, "last_edit_date": 1450894934, "question_id": 34441269, "link": "https://stackoverflow.com/questions/34441269/websocket-onopen-message-only-sent-sometimes", "title": "WebSocket onopen - message only sent sometimes", "body": "<p>I'm having a strange problem with WebSocket.  When I open up a new socket, I have both the server and the client send handshake messages to each other.  However, the code seems to execute only sometimes.</p>\n\n<p>Server Code (ruby):</p>\n\n<pre><code># Set up the websocket server on port 8080\nEventMachine::WebSocket.start(:host =&gt; \"localhost\", :port =&gt; 8080, :secure =&gt; false) do |ws|\n    ws.onopen do\n        ws.send \"WebSocket opened on port 8080.\"\n    end\n\n    ws.onmessage do |msg|\n        puts msg\n    end\n\n    ws.onclose do\n        puts \"WebSocket closed.\"\n    end\nend\n</code></pre>\n\n<p>Client code (javascript):</p>\n\n<pre><code>connection.onopen = function() {\n    connection.send(\"Ping!\");\n};\n\nconnection.onerror = function() {\n    console.log(\"WebSocket error.\");\n};\n\nconnection.onmessage = function(e) {\n    console.log(\"Server: \" + e.data);\n};\n</code></pre>\n\n<p>The console output on the server side after some refreshing, waiting a couple of seconds each time:</p>\n\n<pre><code>WebSocket closed.\nWebSocket closed.\nWebSocket closed.\nPing!\nWebSocket closed.\nWebSocket closed.\nWebSocket closed.\nWebSocket closed.\nPing!\nWebSocket closed.\nWebSocket closed.\n</code></pre>\n\n<p>Each time \"Ping!\" is posted, the client also receives the handshake message directed to it.  So the failure is on both sides - when it does work, both sides receive their messages.</p>\n\n<p>What might be the cause of this?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1450893055, "post_id": 34440953, "comment_id": 56623657, "body": "@sergiotulentsev, now both answers are deleted. Both should be turned into community wiki answers."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450893155, "post_id": 34440953, "comment_id": 56623711, "body": "@theTinMan: Hm, I see one still standing. No need to have them both."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1450893318, "post_id": 34440953, "comment_id": 56623801, "body": "@SergioTulentsev, Yes, the other was undeleted right after the comment-exchange."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1450900189, "post_id": 34440953, "comment_id": 56627095, "body": "Would it not be more convenient if all the hash values were arrays, as you could always check if <code>h[k].is_a? Hash</code>."}, {"owner": {"reputation": 1521, "user_id": 1274846, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/048371ccb94bbd3aae9ac0ca20c0a31c?s=128&d=identicon&r=PG", "display_name": "Trinculo", "link": "https://stackoverflow.com/users/1274846/trinculo"}, "edited": false, "score": 0, "creation_date": 1452613720, "post_id": 34440953, "comment_id": 57241693, "body": "Why the down votes?  I clearly state my need and my attempted solution?"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1450900995, "post_id": 34441018, "comment_id": 56627453, "body": "Good one, Wand. You could alternatively write <code>hash[k] = [process(v)]</code>."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1450901292, "post_id": 34441018, "comment_id": 56627586, "body": "@CarySwoveland I did not mess with the original code much, its pretty much what OP had.  Feel free to update it as its community wiki"}], "tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 4, "last_activity_date": 1450898469, "last_edit_date": 1450898469, "creation_date": 1450892431, "answer_id": 34441018, "question_id": 34440953, "link": "https://stackoverflow.com/questions/34440953/put-every-hash-element-inside-of-an-array-ruby/34441018#34441018", "title": "Put every Hash Element inside of an Array Ruby", "body": "<p>You need to wrap your code into a method and call it recursively.</p>\n\n<pre><code>my_hash = {\"a\"=&gt;{\"a1\"=&gt;\"b1\"}, \"b\"=&gt;\"b\", \"c\"=&gt;{\"c1\"=&gt;{\"c2\"=&gt;\"c3\"}}}\n\ndef process(hash)\n    hash.each do |k,v|\n      if v.class == Hash\n        hash[k] = [] &lt;&lt; process(v)\n      end\n    end\nend\n\np process(my_hash)\n#=&gt; {\"a\"=&gt;[{\"a1\"=&gt;\"b1\"}], \"b\"=&gt;\"b\", \"c\"=&gt;[{\"c1\"=&gt;[{\"c2\"=&gt;\"c3\"}]}]}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 629, "user_id": 1795600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0F3Z1.png?s=128&g=1", "display_name": "stefkin", "link": "https://stackoverflow.com/users/1795600/stefkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1450914032, "last_edit_date": 1450914032, "creation_date": 1450913732, "answer_id": 34445337, "question_id": 34440953, "link": "https://stackoverflow.com/questions/34440953/put-every-hash-element-inside-of-an-array-ruby/34445337#34445337", "title": "Put every Hash Element inside of an Array Ruby", "body": "<p>Recurring proc is another way around:</p>\n\n<pre><code>h = {\"a\"=&gt;{\"a1\"=&gt;\"b1\"}, \"b\"=&gt;\"b\", \"c\"=&gt;{\"c1\"=&gt;{\"c2\"=&gt;\"c3\"}}}\nh.map(&amp;(p = proc{|k,v| {k =&gt; v.is_a?(Hash) ? [p[*v]] : v}}))\n .reduce({}, &amp;:merge)\n# =&gt; {\"a\"=&gt;[{\"a1\"=&gt;\"b1\"}], \"b\"=&gt;\"b\", \"c\"=&gt;[{\"c1\"=&gt;[{\"c2\"=&gt;\"c3\"}]}]}\n</code></pre>\n\n<p>It can be done with single reduce, but that way things get even more obfuscated.</p>\n"}], "owner": {"reputation": 1521, "user_id": 1274846, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/048371ccb94bbd3aae9ac0ca20c0a31c?s=128&d=identicon&r=PG", "display_name": "Trinculo", "link": "https://stackoverflow.com/users/1274846/trinculo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 34441018, "answer_count": 2, "score": 0, "last_activity_date": 1450914032, "creation_date": 1450892141, "last_edit_date": 1450892296, "question_id": 34440953, "link": "https://stackoverflow.com/questions/34440953/put-every-hash-element-inside-of-an-array-ruby", "title": "Put every Hash Element inside of an Array Ruby", "body": "<p>Let's say I have a Hash like this:</p>\n\n<pre><code>my_hash = {\"a\"=&gt;{\"a1\"=&gt;\"b1\"}, \"b\"=&gt;\"b\", \"c\"=&gt;{\"c1\"=&gt;{\"c2\"=&gt;\"c3\"}}}\n</code></pre>\n\n<p>And I want to convert <em>every</em> element inside the hash that is also a hash to be placed inside of an Array.</p>\n\n<p>For example, I want the finished Hash to look like this:</p>\n\n<pre><code>{\"a\"=&gt;[{\"a1\"=&gt;\"b1\"}], \"b\"=&gt;\"b\", \"c\"=&gt;[{\"c1\"=&gt;[{\"c2\"=&gt;\"c3\"}]}]}\n</code></pre>\n\n<p>Here is what I've tried so far, but I need it to work recursively and I'm not quite sure how to make that work:</p>\n\n<pre><code>my_hash.each do |k,v|\n  if v.class == Hash\n    my_hash[k] = [] &lt;&lt; v\n  end\nend\n =&gt; {\"a\"=&gt;[{\"a1\"=&gt;\"b1\"}], \"b\"=&gt;\"b\", \"c\"=&gt;[{\"c1\"=&gt;{\"c2\"=&gt;\"c3\"}}]}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 36449, "user_id": 2453699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b0a49d160baf7d95b81d798ea0cb65?s=128&d=identicon&r=PG", "display_name": "vee", "link": "https://stackoverflow.com/users/2453699/vee"}, "edited": false, "score": 4, "creation_date": 1450889334, "post_id": 34440231, "comment_id": 56621552, "body": "How do you have routes setup for <code>upvote</code>?"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1450889413, "post_id": 34440231, "comment_id": 56621595, "body": "<code>button_to</code> method send a <code>POST</code> request by default."}, {"owner": {"reputation": 133, "user_id": 5711942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b5e9db9844fcf8e3e606bc93d3f69b?s=128&d=identicon&r=PG&f=1", "display_name": "Arch", "link": "https://stackoverflow.com/users/5711942/arch"}, "reply_to_user": {"reputation": 36449, "user_id": 2453699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b0a49d160baf7d95b81d798ea0cb65?s=128&d=identicon&r=PG", "display_name": "vee", "link": "https://stackoverflow.com/users/2453699/vee"}, "edited": false, "score": 0, "creation_date": 1450889519, "post_id": 34440231, "comment_id": 56621662, "body": "I edited the routes. thank you @vee"}, {"owner": {"reputation": 133, "user_id": 5711942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b5e9db9844fcf8e3e606bc93d3f69b?s=128&d=identicon&r=PG&f=1", "display_name": "Arch", "link": "https://stackoverflow.com/users/5711942/arch"}, "edited": false, "score": 0, "creation_date": 1450889680, "post_id": 34440231, "comment_id": 56621769, "body": "I didn&#39;t create any routes for upvote, thanks"}], "answers": [{"tags": [], "owner": {"reputation": 1318, "user_id": 5586783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/060731280703cb6c69bff0df57eb8898?s=128&d=identicon&r=PG", "display_name": "Andy Gauge", "link": "https://stackoverflow.com/users/5586783/andy-gauge"}, "is_accepted": true, "score": 3, "last_activity_date": 1450889699, "creation_date": 1450889699, "answer_id": 34440370, "question_id": 34440231, "link": "https://stackoverflow.com/questions/34440231/rails-4-button-to-action/34440370#34440370", "title": "Rails 4 Button to Action", "body": "<pre><code># config/routes.rb\nresources :budgets do\n  post :upvote, on: :member\nend\n</code></pre>\n\n<p><a href=\"http://guides.rubyonrails.org/routing.html#adding-more-restful-actions\" rel=\"nofollow\">Rails Guide routing from the outside in</a>.</p>\n"}], "owner": {"reputation": 133, "user_id": 5711942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11b5e9db9844fcf8e3e606bc93d3f69b?s=128&d=identicon&r=PG&f=1", "display_name": "Arch", "link": "https://stackoverflow.com/users/5711942/arch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 34440370, "answer_count": 1, "score": 0, "last_activity_date": 1450889699, "creation_date": 1450889227, "last_edit_date": 1450889442, "question_id": 34440231, "link": "https://stackoverflow.com/questions/34440231/rails-4-button-to-action", "title": "Rails 4 Button to Action", "body": "<p>I am creating a button which will send 100 points from the user to the owner of the article. For now, I wrote the following code, but Rails says: </p>\n\n<blockquote>\n  <p>ActionController::UrlGenerationError in Articles#show | No route matches {:action=>\"upvote\", :controller=>\"budgets\", :id=>7}</p>\n</blockquote>\n\n<p>What could be wrong?</p>\n\n<p>Controller:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code> class BudgetsController &lt; ApplicationController\n    def upvote\n        @article = Article.find(params[:id])\n        if @article.budgets.exists?(user_id: current_user.id)\n            @article.budgets.create\n            @article.budgets.user_id = current_user.id\n            @article.budgets.user_gill = 1000\n        end\n\n        @budget = @article.budgets.find(user_id: current_user.id)\n\n    end\nend\n</code></pre>\n\n<p>html:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;div class = \"row\"&gt;\r\n\t&lt;div class = \"col-md-1\"&gt;\r\n\t\t&lt;%= button_to \"\uff0b\", {:action =&gt; \"upvote\", :controller =&gt; \"budgets\",  :id =&gt; @article.id }%&gt;\r\n\t&lt;/div&gt;\r\n&lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Model:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>class Article &lt; ActiveRecord::Base\n    belongs_to :user\n    has_many :comments\n    has_and_belongs_to_many :budgets\nend\n\n\nclass Budget &lt; ActiveRecord::Base\n    belongs_to :user\n    has_and_belongs_to_many :articles\nend\n\nclass User &lt; ActiveRecord::Base\n    has_many :articles\n    has_many :comments\n    has_one :budget\nend\n</code></pre>\n\n<p>Routes:\n</p>\n\n<pre><code> resources :articles do\n    resources :comments\n    resources :budgets\n  end\n  resources :users do\n    resources :budgets\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "post", "activerecord", "routing"], "comments": [{"owner": {"reputation": 4769, "user_id": 1242470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f1b4b172a8f873efe1179ca140f1eb?s=128&d=identicon&r=PG", "display_name": "Mate Solymosi", "link": "https://stackoverflow.com/users/1242470/mate-solymosi"}, "edited": false, "score": 0, "creation_date": 1450889370, "post_id": 34440151, "comment_id": 56621571, "body": "What is the URL that error is thrown for? Can you also paste your <code>rake routes</code> output?"}, {"owner": {"reputation": 25, "user_id": 2503326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc4a1622692d3b9e1d5d710881fd4361?s=128&d=identicon&r=PG", "display_name": "ROROROtimi", "link": "https://stackoverflow.com/users/2503326/rororotimi"}, "reply_to_user": {"reputation": 4769, "user_id": 1242470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f1b4b172a8f873efe1179ca140f1eb?s=128&d=identicon&r=PG", "display_name": "Mate Solymosi", "link": "https://stackoverflow.com/users/1242470/mate-solymosi"}, "edited": false, "score": 0, "creation_date": 1450889969, "post_id": 34440151, "comment_id": 56621945, "body": "The URL that the error is thrown for is: <code>http:&#47;&#47;localhost:3000&#47;courses&#47;add_course</code>  I&#39;ve also added my rake routes output!"}, {"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 1, "creation_date": 1450891644, "post_id": 34440151, "comment_id": 56622892, "body": "Are you sure you are making a POST request?"}, {"owner": {"reputation": 4769, "user_id": 1242470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f1b4b172a8f873efe1179ca140f1eb?s=128&d=identicon&r=PG", "display_name": "Mate Solymosi", "link": "https://stackoverflow.com/users/1242470/mate-solymosi"}, "edited": false, "score": 0, "creation_date": 1450891659, "post_id": 34440151, "comment_id": 56622900, "body": "From the <code>rake routes</code> output it seems that the URL that was generated is not <code>&#47;courses&#47;add_course</code> but <code>&#47;courses&#47;:course_id&#47;courses&#47;add_course</code>, for some reason. The weird thing is that it correctly generated <code>&#47;courses&#47;add_course</code> when I tried to reproduce the problem in a new Rails app."}, {"owner": {"reputation": 25, "user_id": 2503326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc4a1622692d3b9e1d5d710881fd4361?s=128&d=identicon&r=PG", "display_name": "ROROROtimi", "link": "https://stackoverflow.com/users/2503326/rororotimi"}, "edited": false, "score": 0, "creation_date": 1450993542, "post_id": 34440151, "comment_id": 56658324, "body": "I think the fact that I wasn&#39;t making a POST request was part of the problem. I don&#39;t know how to fully make a <b>form for</b> request yet, so I decided to put this part of the project on hold. Thanks for the help guys!"}], "answers": [{"tags": [], "owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "is_accepted": true, "score": 0, "last_activity_date": 1450894479, "creation_date": 1450894479, "answer_id": 34441461, "question_id": 34440151, "link": "https://stackoverflow.com/questions/34440151/custom-post-method-trouble-routing-error-on-post-vs-show/34441461#34441461", "title": "Custom Post Method Trouble (Routing Error on Post vs. Show)", "body": "<p>It seems that there is mistake in <strong><code>nested routes</code></strong>.</p>\n\n<pre><code>devise_for :users\n\nresources :users do\n  resources :courses do\n    collection do\n      get 'my_courses'\n      post 'add_course'\n    end\n   end \n  end\n\nroot to: \"courses#index\"\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 2503326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc4a1622692d3b9e1d5d710881fd4361?s=128&d=identicon&r=PG", "display_name": "ROROROtimi", "link": "https://stackoverflow.com/users/2503326/rororotimi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 34441461, "answer_count": 1, "score": 0, "last_activity_date": 1450894479, "creation_date": 1450888903, "last_edit_date": 1450889888, "question_id": 34440151, "link": "https://stackoverflow.com/questions/34440151/custom-post-method-trouble-routing-error-on-post-vs-show", "title": "Custom Post Method Trouble (Routing Error on Post vs. Show)", "body": "<p>Trying to build a rails app in which I have a many_to_many relation between users and courses.</p>\n\n<p>After establishing the relationship between my models with a join table, aptly named courses_users, I am trying to establish some custom routing to <strong>create a new POST method</strong>.</p>\n\n<p>My routes.rb file is as such:</p>\n\n<pre><code>devise_for :users\n\nresources :courses do\n    collection do\n      get 'my_courses'\n      post 'add_course'\n    end\n  end\n\nroot to: \"courses#index\"\n</code></pre>\n\n<p>but I still get</p>\n\n<p><a href=\"https://i.stack.imgur.com/flhdz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/flhdz.png\" alt=\"ActiveRecord::RecordNotFound in CoursesController#show\"></a></p>\n\n<p>or</p>\n\n<p>ActiveRecord::RecordNotFound in CoursesController#show</p>\n\n<p>Here is my rake routes output as well:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Uq8Hj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Uq8Hj.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Any advice</strong>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "amazon-elastic-beanstalk"], "answers": [{"tags": [], "owner": {"reputation": 7106, "user_id": 1802462, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/da869b462fe799ff165513e4f075cb3b?s=128&d=identicon&r=PG", "display_name": "Tal", "link": "https://stackoverflow.com/users/1802462/tal"}, "is_accepted": false, "score": 1, "last_activity_date": 1450897206, "creation_date": 1450897206, "answer_id": 34442073, "question_id": 34440063, "link": "https://stackoverflow.com/questions/34440063/get-aws-beanstalk-to-run-rails-app-from-subfolder-as-opposed-to-root/34442073#34442073", "title": "Get AWS Beanstalk to run Rails app from subfolder as opposed to root", "body": "<p>beanstalk is very sensitive to structure as its deployment process is mostly a bunch of shell scripts wrapped together. therefore it won't bend to your new structure.<br>\na couple of options here:<br>\n1. adapt to the standard structure, which is also recommended by rails. don't nest \"app\" folders.<br>\n2. create a pre-deploy script (.ebextension) that copies your folder to the right place.</p>\n"}], "owner": {"reputation": 761, "user_id": 218017, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/lkea4.jpg?s=128&g=1", "display_name": "JustNeph", "link": "https://stackoverflow.com/users/218017/justneph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450897206, "creation_date": 1450888552, "question_id": 34440063, "link": "https://stackoverflow.com/questions/34440063/get-aws-beanstalk-to-run-rails-app-from-subfolder-as-opposed-to-root", "title": "Get AWS Beanstalk to run Rails app from subfolder as opposed to root", "body": "<p>I have a repo with the folder structure as such</p>\n\n<pre><code> root_of_repo\n   -app\n   -some_gem\n   -some_gem \n</code></pre>\n\n<p>Within the <code>app</code> folder is where my Rails app lives. I would like for beanstalk to deploy the rails app from within this folder. However, it keeps trying to deploy the Rails app from the root. How would I tell beanstalk to first navigate into the app folder then continue running the necessary rails actions (bundle, rails s, etc).</p>\n"}, {"tags": ["ruby", "shoes"], "answers": [{"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 0, "last_activity_date": 1450896777, "creation_date": 1450896777, "answer_id": 34441979, "question_id": 34439170, "link": "https://stackoverflow.com/questions/34439170/ruby-shoes-animation/34441979#34441979", "title": "Ruby Shoes animation", "body": "<p>It looks like you don't need two <code>animation</code> object, but work with single animation object to move forward and backward during animation.</p>\n\n<p>Here is a working app doing animation from left-to-right and right-to-left to prescribed number of iterations defined by variable <code>@iterations</code>.</p>\n\n<p>Before running, don't forget to update the image path (Currently, <code>a.jpg</code>)</p>\n\n<pre><code>Shoes.app do\n\n  @im = image(\"a.jpg\", left: 0, top: 220, width: 180, height: 230)\n\n  @direction = :forward\n  @iteration = 5\n\n  @an = animate 64 do\n    if (@im.left &lt; (self.width-@im.width)) &amp;&amp; @direction == :forward\n        @im.left += 5\n    elsif @direction == :forward\n        @direction = :backward \n    end\n\n    if @im.left &gt; 0 &amp;&amp; @direction == :backward\n        @im.left -= 5\n    elsif @direction == :backward\n        @direction = :forward\n        @iteration -= 1\n    end\n\n    @an.stop if @iteration == 0\n  end\nend \n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 5500260, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/524b6ca9de013f5d675e97f4d89a99ba?s=128&d=identicon&r=PG&f=1", "display_name": "Tkinter", "link": "https://stackoverflow.com/users/5500260/tkinter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 0, "accepted_answer_id": 34441979, "answer_count": 1, "score": -1, "last_activity_date": 1451062287, "creation_date": 1450885523, "last_edit_date": 1450885580, "question_id": 34439170, "link": "https://stackoverflow.com/questions/34439170/ruby-shoes-animation", "title": "Ruby Shoes animation", "body": "<p>Why only the first animation works good in my program? An image should move from left to the right and then from right to the left. This is happening only from left to the right.</p>\n\n<pre><code>Shoes.app do\n\n  @im = image(\"D:/image.jpg\", left: 0, top: 220, width: 180, height: 230)\n\n  @an = animate 20 do\n    if @im.left &lt; (self.width-@im.width)\n      @im.left += 5\n    else\n      @an.stop\n    end\n  end\n\n  @an2 = animate 20 do\n    if @im.left &lt;= (self.width-@im.width) and @im.left &gt; 0\n      @im.left -= 5\n    else\n      @an2.stop\n    end\n  end\n\nend \n</code></pre>\n"}, {"tags": ["ruby", "metaprogramming"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1450885407, "post_id": 34439116, "comment_id": 56619101, "body": "You can just get <i>all</i> instance variables. If this is not good enough, then you&#39;ll have to instrument attr_accessor in one way or another. No way to avoid this."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1450887757, "post_id": 34439116, "comment_id": 56620554, "body": "Does it matter whether method was defined using <code>attr_accessor</code> or you are looking for methods that are accessor methods of instance variables?"}, {"owner": {"reputation": 1402, "user_id": 275249, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f4a6789a3cfae583e20b747df4dfe519?s=128&d=identicon&r=PG&f=1", "display_name": "n_x_l", "link": "https://stackoverflow.com/users/275249/n-x-l"}, "edited": false, "score": 0, "creation_date": 1450895649, "post_id": 34439116, "comment_id": 56624944, "body": "attr_accessor is what I am after. The rest I can get easily with TracePoint."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1450885884, "post_id": 34439225, "comment_id": 56619414, "body": "Then this doesn&#39;t really answer the question, does it? :)"}], "tags": [], "owner": {"reputation": 2183, "user_id": 1200043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tr7dt.jpg?s=128&g=1", "display_name": "maniacalrobot", "link": "https://stackoverflow.com/users/1200043/maniacalrobot"}, "is_accepted": false, "score": 0, "last_activity_date": 1450885676, "creation_date": 1450885676, "answer_id": 34439225, "question_id": 34439116, "link": "https://stackoverflow.com/questions/34439116/get-all-variables-defined-through-attr-accessor-without-overriding-attr-acces/34439225#34439225", "title": "Get all variables defined through `attr_accessor` without overriding `attr_accessor`", "body": "<p>you can use <code>obj.methods()</code> to find all the methods available on the instance (inc methods from superclasses), and <code>obj.methods(false)</code> to get only the method defined on current singleton object. I'm not sure its possible to detect if these methods where created via <code>attr_accessor</code> though</p>\n"}, {"comments": [{"owner": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1450891298, "post_id": 34440466, "comment_id": 56622689, "body": "As a side note, I spent some time trying to figure out how to use <code>TracePoint</code> to get the names of the methods as passed to <code>attr_accessor</code>. I found it to be quite impossible."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1450893958, "post_id": 34440466, "comment_id": 56624121, "body": "I tried to. And so did the OP. That was the whole point of the question. And only you reached the solution."}, {"owner": {"reputation": 1402, "user_id": 275249, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f4a6789a3cfae583e20b747df4dfe519?s=128&d=identicon&r=PG&f=1", "display_name": "n_x_l", "link": "https://stackoverflow.com/users/275249/n-x-l"}, "edited": false, "score": 2, "creation_date": 1450895488, "post_id": 34440466, "comment_id": 56624866, "body": "Amazing stuff. I also had traces on c_call and a check if the method is attr_accessor, then got stuck there. Calling #parameters on <code>method(:attr_accessor)</code> tells me it received some (returns <code>[[:rest]]</code>), but no idea how to get that, since it receives a traditional splat argument."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 1, "creation_date": 1450897947, "post_id": 34440466, "comment_id": 56626011, "body": "Very nice answer, I learned something new because of this answer"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1450990013, "post_id": 34440466, "comment_id": 56657465, "body": "The problem is that I was running it in IRB. :-)"}], "tags": [], "owner": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "is_accepted": false, "score": 7, "last_activity_date": 1450901855, "last_edit_date": 1450901855, "creation_date": 1450890093, "answer_id": 34440466, "question_id": 34439116, "link": "https://stackoverflow.com/questions/34439116/get-all-variables-defined-through-attr-accessor-without-overriding-attr-acces/34440466#34440466", "title": "Get all variables defined through `attr_accessor` without overriding `attr_accessor`", "body": "<p>In the question title, you asked for a list of variables, but this answers the question body, which asked for a list of the methods defined.</p>\n\n<p>This method doesn't bother checking instance variables, which will have noise introduced if you begin manually updating or creating other instance variables.</p>\n\n<pre><code>module MethodTracer\n  TracePoint.trace(:c_call) do |t|\n    if (t.method_id == :attr_accessor)\n      t.self.extend(MethodTracer)\n\n      methods = t.self::Methods ||= []\n      MethodTracer.send(:define_method, :method_added) {|m| methods &lt;&lt; m }\n    end\n  end\n\n  TracePoint.trace(:c_return) do |t|\n    if (t.method_id == :attr_accessor)\n      MethodTracer.send(:remove_method, :method_added)\n    end\n  end\nend\n\nclass Foo\n  attr_accessor :a, :b\n  attr_accessor :c\n\n  def foo; end\nend\n\nFoo::Methods # =&gt; [:a, :a=, :b, :b=, :c, :c=]\n</code></pre>\n\n<p>I've stored the method names in the <code>Methods</code> constant, but obviously you can store them wherever is most convenient for you.</p>\n\n<p>Defining/removing <code>method_added</code> on <code>MethodTracer</code> ensures that you don't clobber any <code>Foo.method_added</code> you've defined yourself. This methodology, however, does require that if you define <code>Foo.method_added</code> before your calls to <code>attr_accessor</code>, you will need to call <code>super</code> inside it. Otherwise you will skip the temporary <code>method_added</code> defined by <code>MethodTracer</code>.</p>\n"}], "owner": {"reputation": 1402, "user_id": 275249, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f4a6789a3cfae583e20b747df4dfe519?s=128&d=identicon&r=PG&f=1", "display_name": "n_x_l", "link": "https://stackoverflow.com/users/275249/n-x-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1638, "favorite_count": 2, "answer_count": 2, "score": 9, "last_activity_date": 1450965458, "creation_date": 1450885338, "last_edit_date": 1450890486, "question_id": 34439116, "link": "https://stackoverflow.com/questions/34439116/get-all-variables-defined-through-attr-accessor-without-overriding-attr-acces", "title": "Get all variables defined through `attr_accessor` without overriding `attr_accessor`", "body": "<p>I am setting some trace code on my program, and would like to know which methods are defined through <code>attr_accessor</code>. Using <code>TracePoint</code>, I can detect when <code>attr_accessor</code> is called, but I don't know how to get it to tell me the arguments it received. Any ideas? </p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "rspec", "cucumber", "capybara"], "comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1450892046, "post_id": 34438732, "comment_id": 56623096, "body": "a stacktrace for the error may help narrow it down, although the fact that cucumber is trying to initialize when you&#39;re running specs would tend to imply you have a require or 2 in the wrong place."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1450894100, "post_id": 34438732, "comment_id": 56624201, "body": "ok - so it looks like capybara/cucumber is getting required by capybara-screenshot even when you&#39;re not using cucumber.  Easiest solution would probably be to upgrade capybara-screenshot"}], "answers": [{"comments": [{"owner": {"reputation": 8714, "user_id": 306084, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/546ee016aba112078e62861bdc38ae69?s=128&d=identicon&r=PG", "display_name": "pjmorse", "link": "https://stackoverflow.com/users/306084/pjmorse"}, "edited": false, "score": 0, "creation_date": 1450898351, "post_id": 34441416, "comment_id": 56626239, "body": "The <code>capybara-screenshot</code> gem update was sufficient to get rspec going again. I&#39;ve added the <code>require</code> lines but it doesn&#39;t look like they were a blocker - at some level I&#39;m wondering if capybara-screenshot is actually even in use. But that&#39;s a different problem entirely."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 8714, "user_id": 306084, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/546ee016aba112078e62861bdc38ae69?s=128&d=identicon&r=PG", "display_name": "pjmorse", "link": "https://stackoverflow.com/users/306084/pjmorse"}, "edited": false, "score": 0, "creation_date": 1450898448, "post_id": 34441416, "comment_id": 56626288, "body": "the require lines would be required for your cucumber tests, not the specs - hence why they should be in env.rb (or other cucumber support file)"}, {"owner": {"reputation": 8714, "user_id": 306084, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/546ee016aba112078e62861bdc38ae69?s=128&d=identicon&r=PG", "display_name": "pjmorse", "link": "https://stackoverflow.com/users/306084/pjmorse"}, "edited": false, "score": 0, "creation_date": 1450899017, "post_id": 34441416, "comment_id": 56626567, "body": "ETA - yes, I added the <code>require</code> lines to the cucumber setup <code>env.rb</code>, but the features ran cleanly before I did that."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 8714, "user_id": 306084, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/546ee016aba112078e62861bdc38ae69?s=128&d=identicon&r=PG", "display_name": "pjmorse", "link": "https://stackoverflow.com/users/306084/pjmorse"}, "edited": false, "score": 0, "creation_date": 1450899075, "post_id": 34441416, "comment_id": 56626596, "body": "ok -- you must have them required through something else then too - no harm"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1450894607, "last_edit_date": 1450894607, "creation_date": 1450894257, "answer_id": 34441416, "question_id": 34438732, "link": "https://stackoverflow.com/questions/34438732/rspec-gets-undefined-method-build-rb-world-factory-for-nil/34441416#34441416", "title": "rspec gets &quot;undefined method `build_rb_world_factory&#39; for nil&quot;", "body": "<p>From your stacktrace - the capybara-screenshot gem is requiring capybara/cucumber even though you're running specs which aren't using cucumber.  This means World is called from capybara/cucumber against a non-initialized cucumber, and gives the error.  The version of capybara-screenshot you're using is really old, and the code that required capybara/cucumber has since been removed so you should probably update the version of capybara-screenshot you're using, and add</p>\n\n<pre><code>require 'capybara/cucumber'\nrequire 'capybara-screenshot/cucumber'\n</code></pre>\n\n<p>to your env.rb or other cucumber support file</p>\n"}], "owner": {"reputation": 8714, "user_id": 306084, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/546ee016aba112078e62861bdc38ae69?s=128&d=identicon&r=PG", "display_name": "pjmorse", "link": "https://stackoverflow.com/users/306084/pjmorse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 645, "favorite_count": 0, "accepted_answer_id": 34441416, "answer_count": 1, "score": 0, "last_activity_date": 1450894607, "creation_date": 1450884061, "last_edit_date": 1450892466, "question_id": 34438732, "link": "https://stackoverflow.com/questions/34438732/rspec-gets-undefined-method-build-rb-world-factory-for-nil", "title": "rspec gets &quot;undefined method `build_rb_world_factory&#39; for nil&quot;", "body": "<p>I'm updating a Rails 3.2 app to Ruby 2.2.2. I've pulled the Rails version up to 3.2.22, which is necessary for Ruby 2.2.2. That went relatively well but prompted a Cucumber update, from 1.2.1 to 1.3.20. (I don't recall the details, because that was several failed efforts ago, but I think my features were passing but then exiting false before I did this.)</p>\n\n<p>Now Cucumber features run fine (albeit with a ton of unrelated Ruby 2.2.2 warnings), but rspec does not. Specifically, when I run <code>rake spec</code> I get this error:</p>\n\n<pre><code>/path/to/gems/cucumber-1.3.20/lib/cucumber/rb_support/rb_dsl.rb:15:in `build_rb_world_factory': undefined method `build_rb_world_factory' for nil:NilClass (NoMethodError)\n</code></pre>\n\n<p>The stack trace leads through Capybara (2.4.4, pinned for other reasons), ActiveSupport, and Bundler back up to rspec-core.</p>\n\n<p>All my searches trying to find similar issues just lead to the code, because it seems like the only place this method name exists is in code.</p>\n\n<p>Why am I getting this error from Capybara/Cucumber when running rspec? How can I fix it?</p>\n\n<p>ETA: Stack trace, with paths condensed a bit:</p>\n\n<pre><code>/path/to/gems/cucumber-1.3.20/lib/cucumber/rb_support/rb_dsl.rb:15:in `build_rb_world_factory': undefined method `build_rb_world_factory' for nil:NilClass (NoMethodError)\n    from /path/to/gems/cucumber-1.3.20/lib/cucumber/rb_support/rb_dsl.rb:50:in `World'\n    from /path/to/gems/capybara-2.4.4/lib/capybara/cucumber.rb:4:in `&lt;top (required)&gt;'\n    from /path/to/gems/activesupport-3.2.22/lib/active_support/dependencies.rb:251:in `require'\n    from /path/to/gems/activesupport-3.2.22/lib/active_support/dependencies.rb:251:in `block in require'\n    from /path/to/gems/activesupport-3.2.22/lib/active_support/dependencies.rb:236:in `load_dependency'\n    from /path/to/gems/activesupport-3.2.22/lib/active_support/dependencies.rb:251:in `require'\n    from /path/to/gems/capybara-screenshot-0.2.2/lib/capybara-screenshot.rb:96:in `&lt;top (required)&gt;'\n    from /path/to/gems/bundler-1.10.6/lib/bundler/runtime.rb:76:in `require'\n    from /path/to/gems/bundler-1.10.6/lib/bundler/runtime.rb:76:in `block (2 levels) in require'\n    from /path/to/gems/bundler-1.10.6/lib/bundler/runtime.rb:72:in `each'\n    from /path/to/gems/bundler-1.10.6/lib/bundler/runtime.rb:72:in `block in require'\n    from /path/to/gems/bundler-1.10.6/lib/bundler/runtime.rb:61:in `each'\n    from /path/to/gems/bundler-1.10.6/lib/bundler/runtime.rb:61:in `require'\n    from /path/to/gems/bundler-1.10.6/lib/bundler.rb:134:in `require'\n    from /path/to/app/config/application.rb:13:in `&lt;top (required)&gt;'\n    from /path/to/app/config/environment.rb:2:in `require'\n    from /path/to/app/config/environment.rb:2:in `&lt;top (required)&gt;'\n    from /path/to/app/spec/spec_helper.rb:10:in `require'\n    from /path/to/app/spec/spec_helper.rb:10:in `&lt;top (required)&gt;'\n    from /path/to/app/spec/controllers/academic_years_controller_spec.rb:1:in `require'\n    from /path/to/app/spec/controllers/academic_years_controller_spec.rb:1:in `&lt;top (required)&gt;'\n    from /path/to/gems/rspec-core-3.2.3/lib/rspec/core/configuration.rb:1226:in `load'\n    from /path/to/gems/rspec-core-3.2.3/lib/rspec/core/configuration.rb:1226:in `block in load_spec_files'\n    from /path/to/gems/rspec-core-3.2.3/lib/rspec/core/configuration.rb:1224:in `each'\n    from /path/to/gems/rspec-core-3.2.3/lib/rspec/core/configuration.rb:1224:in `load_spec_files'\n    from /path/to/gems/rspec-core-3.2.3/lib/rspec/core/runner.rb:97:in `setup'\n    from /path/to/gems/rspec-core-3.2.3/lib/rspec/core/runner.rb:85:in `run'\n    from /path/to/gems/rspec-core-3.2.3/lib/rspec/core/runner.rb:70:in `run'\n    from /path/to/gems/rspec-core-3.2.3/lib/rspec/core/runner.rb:38:in `invoke'\n    from /path/to/gems/rspec-core-3.2.3/exe/rspec:4:in `&lt;main&gt;'\n/path/to/ruby/ruby-2.2.2/bin/ruby -I/path/to/gems/rspec-core-3.2.3/lib:/path/to/gems/rspec-support-3.2.2/lib /path/to/gems/rspec-core-3.2.3/exe/rspec --pattern spec/\\*\\*\\{,/\\*/\\*\\*\\}/\\*_spec.rb failed\n</code></pre>\n\n<p>My hunch is that there's a configuration file which needs to be rebuilt somewhere.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1450884593, "post_id": 34438815, "comment_id": 56618521, "body": "Booyah!! Thanks so much Danny.. I thought there was some Ruby magic in there somewhere, and that was it.. thanks much! I&#39;ll accept this answer when I can.."}, {"owner": {"reputation": 229, "user_id": 2996915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/37905fd5f43b2c8ba04666f2636c886f?s=128&d=identicon&r=PG", "display_name": "Danny Y", "link": "https://stackoverflow.com/users/2996915/danny-y"}, "reply_to_user": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1450885031, "post_id": 34438815, "comment_id": 56618827, "body": "No problemo :) The answer that @meagar posted is also worth a read if you aren&#39;t with Rails autoloading. Anything under your &quot;app&quot; directory should get autoloaded by Rails by default, but if you were to add anything in say, your &#39;lib&quot; folder, or a new folder in your root path, you&#39;d have to autoload the paths."}], "tags": [], "owner": {"reputation": 229, "user_id": 2996915, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/37905fd5f43b2c8ba04666f2636c886f?s=128&d=identicon&r=PG", "display_name": "Danny Y", "link": "https://stackoverflow.com/users/2996915/danny-y"}, "is_accepted": true, "score": 2, "last_activity_date": 1450884335, "creation_date": 1450884335, "answer_id": 34438815, "question_id": 34438715, "link": "https://stackoverflow.com/questions/34438715/including-service-class-in-controller/34438815#34438815", "title": "Including Service class in Controller", "body": "<p>Your class name needs to be the same as the name of your file, I believe. So since your file is named <code>product_service.rb</code>, your class should be:</p>\n\n<pre><code>class ProductService\n  class &lt;&lt; self\n    def screen_print\n      \"These are the words in screen print\"\n    end\n  end\nend\n</code></pre>\n\n<p>and in your controller:</p>\n\n<pre><code>class AmazonsController &lt; ApplicationController\n  def index\n    @joe = ProductService.screen_print\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1450884516, "creation_date": 1450884516, "answer_id": 34438865, "question_id": 34438715, "link": "https://stackoverflow.com/questions/34438715/including-service-class-in-controller/34438865#34438865", "title": "Including Service class in Controller", "body": "<p>Rails does not load files from uncommon locations. You will need to tells Rails that the <code>services</code> folder exists and to load file from it.</p>\n\n<p>Add the following to your <code>config/application.rb</code>:</p>\n\n<pre><code># Custom directories with classes and modules you want to be autoloadable.\nconfig.autoload_paths += [Rails.root.join('app', 'services')]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2330, "user_id": 1043167, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1998812477433665de07bdc97af50d28?s=128&d=identicon&r=PG", "display_name": "Laurens", "link": "https://stackoverflow.com/users/1043167/laurens"}, "edited": false, "score": 0, "creation_date": 1450884878, "post_id": 34438870, "comment_id": 56618714, "body": "<a href=\"http://edgeguides.rubyonrails.org/autoloading_and_reloading_constants.html#autoload-paths\" rel=\"nofollow noreferrer\">edgeguides.rubyonrails.org/&hellip;</a> all subdirectories under <code>app&#47;</code> will be autoloaded if I understand correctly"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 2330, "user_id": 1043167, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1998812477433665de07bdc97af50d28?s=128&d=identicon&r=PG", "display_name": "Laurens", "link": "https://stackoverflow.com/users/1043167/laurens"}, "edited": false, "score": 0, "creation_date": 1450884936, "post_id": 34438870, "comment_id": 56618751, "body": "@Laurens There is no indication that <code>services</code> is in <code>app</code>. He simply says &quot;from ..services/product_service.rb&quot;, whatever that means."}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": false, "score": 1, "last_activity_date": 1450884977, "last_edit_date": 1495542186, "creation_date": 1450884547, "answer_id": 34438870, "question_id": 34438715, "link": "https://stackoverflow.com/questions/34438715/including-service-class-in-controller/34438870#34438870", "title": "Including Service class in Controller", "body": "<p>In addition to the <a href=\"https://stackoverflow.com/a/34438815/229044\">naming problems</a> already pointed out, Rails won't automatically require arbitrary files from folders it doesn't know about.</p>\n\n<p>If you want files in a new folder to be automatically required, you need to add it to Rails' autoload paths:</p>\n\n<pre><code># config/application.rb\nconfig.autoload_paths &lt;&lt; Rails.root.join('services')\n</code></pre>\n\n<p>See <a href=\"https://stackoverflow.com/questions/19098663/auto-loading-lib-files-in-rails-4\">Auto-loading lib files in Rails 4</a> for more details.</p>\n"}], "owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 34438815, "answer_count": 3, "score": 0, "last_activity_date": 1450884977, "creation_date": 1450884009, "last_edit_date": 1450884447, "question_id": 34438715, "link": "https://stackoverflow.com/questions/34438715/including-service-class-in-controller", "title": "Including Service class in Controller", "body": "<p>I want to include the following class from my services folder into my Controller.. </p>\n\n<p>Here is the Class in ..services/product_service.rb</p>\n\n<pre><code>class MyServices\n class &lt;&lt; self\n  def screen_print\n   \"These are the words in screen print\"\n  end\n end\nend\n</code></pre>\n\n<p>And all I want to do is this in my controller:</p>\n\n<pre><code>class AmazonsController &lt; ApplicationController\n def index\n  @joe = MyServices.screen_print\n end\nend\n</code></pre>\n\n<p>I thought I could just include it in the controller. And its not a module so include isn't working, and I tried updating my config/appliaction.rb file and that didn't work either..</p>\n"}, {"tags": ["ruby", "symbols"], "comments": [{"owner": {"reputation": 13686, "user_id": 1663919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0abe37f1cd26ea99091568cf4edf448?s=128&d=identicon&r=PG", "display_name": "Zdeslav Vojkovic", "link": "https://stackoverflow.com/users/1663919/zdeslav-vojkovic"}, "edited": false, "score": 0, "creation_date": 1450882174, "post_id": 34438099, "comment_id": 56617142, "body": "some info here: <a href=\"http://stackoverflow.com/questions/4014190/passing-an-operator-to-a-function\" title=\"passing an operator to a function\">stackoverflow.com/questions/4014190/&hellip;</a>"}, {"owner": {"reputation": 13, "user_id": 5693361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5FrI6.jpg?s=128&g=1", "display_name": "Einar Stensson", "link": "https://stackoverflow.com/users/5693361/einar-stensson"}, "edited": false, "score": 0, "creation_date": 1450885835, "post_id": 34438099, "comment_id": 56619385, "body": "Thank you for the links!"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5693361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5FrI6.jpg?s=128&g=1", "display_name": "Einar Stensson", "link": "https://stackoverflow.com/users/5693361/einar-stensson"}, "edited": false, "score": 0, "creation_date": 1450885666, "post_id": 34438208, "comment_id": 56619258, "body": "Aha! So in my example, .reduce takes the :+ symbol and associates it with one of its methods? Thank you for your response!"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 13, "user_id": 5693361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5FrI6.jpg?s=128&g=1", "display_name": "Einar Stensson", "link": "https://stackoverflow.com/users/5693361/einar-stensson"}, "edited": false, "score": 0, "creation_date": 1450885829, "post_id": 34438208, "comment_id": 56619372, "body": "Yes, <code>+</code> method will be called on each element of the collection being reduced. In this case elements are number which actually <i>do</i> have such method. This wouldn&#39;t work as well with, say, Books."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 5, "last_activity_date": 1450882213, "creation_date": 1450882213, "answer_id": 34438208, "question_id": 34438099, "link": "https://stackoverflow.com/questions/34438099/using-symbols-to-reference-blocks-in-ruby-e-g/34438208#34438208", "title": "Using symbols to reference blocks in Ruby e.g. :+, :-, :*", "body": "<p>The symbol you pass to <code>reduce</code> will be interpreted as a name of a method to call on each element. So this</p>\n\n<pre><code>collection.reduce(:foo)\n</code></pre>\n\n<p>is equivalent to this</p>\n\n<pre><code>collection.reduce { |memo, element| memo.foo(element) }\n</code></pre>\n\n<p>The reason it works with sums is that <code>+</code> operator is actually just a method on numbers. </p>\n\n<pre><code> 1.+(3) # =&gt; 4\n</code></pre>\n\n<blockquote>\n  <p>My first thought is therefore that :+ references {|sum, i| sum += i} as an explicit block</p>\n</blockquote>\n\n<p>Not sure what you mean there, but <code>:+</code> most certainly does not reference this block. Or any block. Or anything. </p>\n\n<p>Symbols are just names. They don't point to anything. Deciding what they mean is up to the code that uses them.</p>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 5693361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5FrI6.jpg?s=128&g=1", "display_name": "Einar Stensson", "link": "https://stackoverflow.com/users/5693361/einar-stensson"}, "edited": false, "score": 1, "creation_date": 1450885709, "post_id": 34438943, "comment_id": 56619295, "body": "Thank you! Its becoming clearer to me now."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 4, "last_activity_date": 1450884781, "creation_date": 1450884781, "answer_id": 34438943, "question_id": 34438099, "link": "https://stackoverflow.com/questions/34438099/using-symbols-to-reference-blocks-in-ruby-e-g/34438943#34438943", "title": "Using symbols to reference blocks in Ruby e.g. :+, :-, :*", "body": "<p>A symbol is not a reference to variables, keys in hash tables, or as a way of sending blocks as you claim. The truth is that a symbol is used to describe these things as designed by the person who wrote the respective method that uses them, and actual mapping of a symbol to these things is done within the respective method.</p>\n\n<p>For you particular example, <code>:+</code> is not referencing <code>{|sum, i| sum += i}</code>, or any other block; it is a peculiarity of the alternative syntax of <code>reduce</code> that allows a symbol to be passed, and converts that symbol to a block. The corresponding block, though close to it, it not what you thought, but is: <code>{|sum, i| sum + i}</code>.</p>\n"}], "owner": {"reputation": 13, "user_id": 5693361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5FrI6.jpg?s=128&g=1", "display_name": "Einar Stensson", "link": "https://stackoverflow.com/users/5693361/einar-stensson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 1, "closed_date": 1450902652, "accepted_answer_id": 34438208, "answer_count": 2, "score": 0, "last_activity_date": 1450884781, "creation_date": 1450881819, "last_edit_date": 1450881943, "question_id": 34438099, "link": "https://stackoverflow.com/questions/34438099/using-symbols-to-reference-blocks-in-ruby-e-g", "closed_reason": "Duplicate", "title": "Using symbols to reference blocks in Ruby e.g. :+, :-, :*", "body": "<p>I'm learning about the use of symbols in Ruby and have realized they act largely as references to variables, keys in hash tables, and even as a way of sending blocks in methods.</p>\n\n<p>My questions is, what exactly are symbols, such as <code>:+</code> <code>:-</code> <code>:*</code>, referencing when I use them in a method?</p>\n\n<p>e.g. using <code>:+</code> to sum all the values in an array:</p>\n\n<pre><code>puts [1,2,3].reduce(:+) \n =&gt; 6\n</code></pre>\n\n<p>gives the same result as:</p>\n\n<pre><code>puts [1,2,3].reduce {|sum, i| sum += i}\n=&gt; 6\n</code></pre>\n\n<p>and if I create my own version of :+</p>\n\n<pre><code>a = lambda {|sum,i| sum += i}\nputs [1,2,3].reduce(&amp;a)\n=&gt; 6\n</code></pre>\n\n<p>My first thought is therefore that <code>:+</code> references <code>{|sum, i| sum += i}</code> as an explicit block but I've had trouble finding information to confirm that.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "mysql2"], "comments": [{"owner": {"reputation": 83, "user_id": 4632722, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6159233dfb2f148d2d510117429cdf1f?s=128&d=identicon&r=PG&f=1", "display_name": "Grge Lks", "link": "https://stackoverflow.com/users/4632722/grge-lks"}, "edited": false, "score": 0, "creation_date": 1450881404, "post_id": 34437889, "comment_id": 56616675, "body": "Do you mean by gem install mysql2 -v 0.3.10 ? because i did but when i run bundle install, it installs additionally the 0.4.2"}, {"owner": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 0, "creation_date": 1450881471, "post_id": 34437889, "comment_id": 56616717, "body": "What version you have mentioned in gemfile ?"}, {"owner": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 0, "creation_date": 1450881684, "post_id": 34437889, "comment_id": 56616834, "body": "gem &#39;mysql2&#39;, &#39;0.4.2&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 517, "user_id": 1521631, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/c598c745fb01bfabcb7d77cd59eccea2?s=128&d=identicon&r=PG", "display_name": "MustModify", "link": "https://stackoverflow.com/users/1521631/mustmodify"}, "edited": false, "score": 0, "creation_date": 1529512359, "post_id": 34438173, "comment_id": 88903765, "body": "This worked for me. But why? Shouldn&#39;t gem/bundler handle this?"}, {"owner": {"reputation": 699, "user_id": 251930, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe856db76da810cb28e573d6f014562c?s=128&d=identicon&r=PG", "display_name": "Nathan Crause", "link": "https://stackoverflow.com/users/251930/nathan-crause"}, "edited": false, "score": 0, "creation_date": 1602625643, "post_id": 34438173, "comment_id": 113779142, "body": "Unfortunately, this solution no longer works - that version of mysql2 fails to compile against the latest MariaDB :("}], "tags": [], "owner": {"reputation": 123, "user_id": 4976829, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-DVgvLGW4e1o/AAAAAAAAAAI/AAAAAAAAABc/L50v3370_fQ/photo.jpg?sz=128", "display_name": "Mahesh Pawar", "link": "https://stackoverflow.com/users/4976829/mahesh-pawar"}, "is_accepted": false, "score": 1, "last_activity_date": 1450882035, "creation_date": 1450882035, "answer_id": 34438173, "question_id": 34437889, "link": "https://stackoverflow.com/questions/34437889/loaderror-for-mysql2-while-starting-ruby-on-rails-app/34438173#34438173", "title": "Loaderror for mysql2 while starting ruby on rails app", "body": "<p>First remove the existing mysql gem.<br>\nAnd then try by using following version of mysql in Gemfile:</p>\n\n<pre><code>gem 'mysql2', '~&gt; 0.3.11'\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 4632722, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/6159233dfb2f148d2d510117429cdf1f?s=128&d=identicon&r=PG&f=1", "display_name": "Grge Lks", "link": "https://stackoverflow.com/users/4632722/grge-lks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1098, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1528382215, "creation_date": 1450881143, "question_id": 34437889, "link": "https://stackoverflow.com/questions/34437889/loaderror-for-mysql2-while-starting-ruby-on-rails-app", "title": "Loaderror for mysql2 while starting ruby on rails app", "body": "<p>I am trying to start the ruby on rails application that i had to my old mac which i transferred all data to the new one (el capitan).</p>\n\n<p>I tried to bundle install, bundle update everything, the database.yml looks fine,but the application doesn't begin due to the following error.</p>\n\n<p>I have two versions of mysql2, but if i delete the 0.4.2 and i try to bundle install (it installs 0.4.2) and if rails s (it requires the 0.4.2)</p>\n\n<p>Any idea??</p>\n\n<pre><code>/Users/glouk/.rvm/gems/ruby-1.9.3-p448@global/gems/bundler-1.11.2/lib/bundler/rubygems_integration.rb:314:in `block in replace_gem': Please install the mysql2 adapter: `gem install activerecord-mysql2-adapter` (can't activate mysql2 (~&gt; 0.3.10), already activated mysql2-0.4.2. Make sure all dependencies are added to Gemfile.) (LoadError)\n</code></pre>\n\n<p>My gem list:</p>\n\n<pre><code>*** LOCAL GEMS ***\n\nactionmailer (3.2.12)\nactionpack (3.2.12)\nactivemodel (3.2.12)\nactiverecord (3.2.12)\nactiverecord-mysql2-adapter (0.0.3)\nactiveresource (3.2.12)\nactivesupport (3.2.12)\nacts-as-taggable-on (2.3.3)\nafm (0.2.0)\narel (3.0.3, 3.0.2)\nAscii85 (1.0.2)\nawesome_nested_set (2.1.6)\nbcrypt (3.1.10)\nbcrypt-ruby (3.0.1)\nbeanstalk-client (1.1.1)\nbigdecimal (1.1.0)\nbuilder (3.0.4)\nbundler (1.11.2)\nbundler-unload (1.0.2)\ncancan (1.6.10, 1.6.9)\ncapistrano (2.15.4)\nclimate_control (0.0.3)\ncocaine (0.5.1)\ncocoon (1.2.6, 1.1.2)\ncoffee-rails (3.2.2)\ncoffee-script (2.2.0)\ncoffee-script-source (1.10.0, 1.6.2)\ncombined_time_select (1.0.1, 1.0.0)\ndaemons (1.2.3, 1.1.9)\ndeep_cloneable (1.5.1)\ndevise (2.2.3)\ndiff-lcs (1.2.5, 1.2.4)\nerubis (2.7.0)\nexception_notification (2.5.2)\nexecjs (2.6.0, 1.4.0)\nexecutable-hooks (1.3.2)\nformtastic (2.2.1)\nfriendly_id (4.0.9)\ngaletahub-simple_captcha (0.1.5)\ngem-wrappers (1.2.7)\nhas_scope (0.5.1)\nhashery (2.1.0)\nhighline (1.7.8, 1.6.18)\nhike (1.2.3, 1.2.2)\nhttpclient (2.7.0.1, 2.3.3)\ni18n (0.7.0, 0.6.4)\nimpressionist (1.3.1)\ninherited_resources (1.4.0)\nio-console (0.3)\njourney (1.0.4)\njquery-rails (2.2.1)\njquery-turbolinks (1.0.0)\njquery_datepicker (0.4)\njson (1.8.3, 1.7.7, 1.5.5)\nlibv8 (3.16.14.13, 3.11.8.17)\nliquid (3.0.6, 2.6.1)\nmail (2.4.4)\nmime-types (1.25.1, 1.23)\nmimemagic (0.3.0)\nmini_portile2 (2.0.0)\nminitest (2.5.1)\nmulti_json (1.11.2, 1.7.2)\nmysql (2.9.1)\nmysql2 (0.4.2, 0.3.10)\nnegative_captcha (0.3.2)\nnet-scp (1.1.0)\nnet-sftp (2.1.1)\nnet-ssh (2.6.7)\nnet-ssh-gateway (1.2.0)\nnokogiri (1.5.9)\norm_adapter (0.5.0, 0.4.0)\npaper_trail (2.7.1)\npaperclip (3.4.1)\npdf-core (0.6.0)\npdf-reader (1.3.3)\npolyglot (0.3.5, 0.3.3)\nrack (1.4.7, 1.4.5)\nrack-cache (1.5.1, 1.2)\nrack-ssl (1.3.4, 1.3.3)\nrack-test (0.6.3, 0.6.2)\nrails (3.2.12)\nrails3-jquery-autocomplete (1.0.11)\nrailties (3.2.12)\nrake (10.4.2, 10.0.4, 0.9.2.2)\nrdoc (3.12.2, 3.9.5)\nref (2.0.0, 1.0.4)\nresponders (0.9.3)\nroo (1.11.2)\nrspec-core (2.99.2, 2.13.1)\nrspec-expectations (2.13.0)\nrspec-mocks (2.99.4, 2.13.1)\nrspec-rails (2.13.2)\nruby-ole (1.2.11.6)\nruby-rc4 (0.1.5)\nrubygems-bundler (1.4.4)\nrubyzip (1.1.7, 0.9.9)\nrvm (1.11.3.9)\nrvm-capistrano (1.3.0)\nsass (3.4.20, 3.2.8)\nsass-rails (3.2.6)\nsimple_form (2.1.0)\nsmarter_csv (1.1.0, 1.0.4)\nsocial-share-button (0.1.4)\nspreadsheet (0.8.5)\nsprockets (2.2.3, 2.2.2)\nsqlite3 (1.3.11, 1.3.7)\nthe_sortable_tree (2.3.2)\ntherubyracer (0.12.2)\nthor (0.19.1, 0.18.1)\nthread_safe (0.3.5)\ntilt (1.4.1, 1.3.7)\ntreetop (1.4.15, 1.4.12)\ntruncate_html (0.9.3, 0.9.2)\nttfunk (1.4.0, 1.0.3)\nturbolinks (1.1.1)\ntzinfo (0.3.46, 0.3.37)\nuglifier (2.0.1)\nwarden (1.2.4, 1.2.1)\nwill_paginate (3.0.7, 3.0.4)\nxapian-ruby (1.2.21, 1.2.12)\nxapian_db (1.3.2)\n</code></pre>\n"}, {"tags": ["ruby", "postgresql", "ruby-datamapper"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450889216, "post_id": 34437765, "comment_id": 56621481, "body": "First, you need to understand your technology. Sinatra isn&#39;t the problem at all, it&#39;s your use of Datamapper. Sinatra only is the tool to display the output of Datamapper, and it&#39;s all running in Ruby code, so rewrite your question with that new knowledge so it makes more sense. &quot;Datamapper&quot; has been implemented for multiple languages; They&#39;re not the same so ignore the one for PHP."}, {"owner": {"reputation": 1159, "user_id": 1071423, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3743814552befaf8e7c665e28cc52a0?s=128&d=identicon&r=PG", "display_name": "sam452", "link": "https://stackoverflow.com/users/1071423/sam452"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450890113, "post_id": 34437765, "comment_id": 56622042, "body": "i agree that Sinatra isn&#39;t the cause, but merely how the error was first returned. Are you saying the first third of my Q relating the background/context should be removed? It seems the last 2/3 is where my Q resides (postgresql and datamapper)?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450892403, "post_id": 34437765, "comment_id": 56623318, "body": "I&#39;m saying that your wording is distractingly misleading. &quot;But Sinatra returns a mapping error:&quot;, &quot;But Sinatra still fails to find this table.&quot;, &quot;What am I overlooking to get Sinatra to find this table?&quot; for instance. Sinatra doesn&#39;t find anything, it doesn&#39;t care, only Datamapper does. Take Sinatra out of the question entirely as it&#39;s an innocent bystander and its repeated mention is a red-herring."}], "owner": {"reputation": 1159, "user_id": 1071423, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b3743814552befaf8e7c665e28cc52a0?s=128&d=identicon&r=PG", "display_name": "sam452", "link": "https://stackoverflow.com/users/1071423/sam452"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1450892277, "creation_date": 1450880766, "last_edit_date": 1450892277, "question_id": 34437765, "link": "https://stackoverflow.com/questions/34437765/datamapper-unable-to-find-table", "title": "Datamapper unable to find table", "body": "<p>I have an app running on my Raspberry Pi with Postgresql 9.1.</p>\n\n<p>My first iteration was to add weather records into a table called \"Weathers\". That was successful.</p>\n\n<p>My next iteration is to use <code>psychopg2</code> to write records from Python into a different table called \"weather\". That also is succcessful.</p>\n\n<p>What should also be successful is to change the Weather class in my app to the new fields. But DataMapper returns a mapping error: </p>\n\n<pre><code>@records = Weather.all(:order =&gt; :timestamp.desc)\nArgumentError at /\n+options [:order]+ entry :timestamp does not map to a property in Weather\n</code></pre>\n\n<p>Rereading the datamapper.org docs suggests it's something to do with my table name so I migrated over the older \"weathers\" table into another called \"older\" and dropped the \"weathers\" table. But DataMapper still fails to find this table.</p>\n\n<p>My Postgres environment with a truncated view of the target table is:</p>\n\n<pre><code>            List of relations\n Schema |   Name    | Type  | Owner \n--------+-----------+-------+-------\n public | customers | table | pi\n public | older     | table | pi\n public | systemlog | table | pi\n public | weather   | table | pi\n(4 rows)\n\n                                                         Table \"public.weather\"\n           Column            |            Type             |                      Modifiers                       | Storage  | Description \n-----------------------------+-----------------------------+------------------------------------------------------+----------+-------------\n id                          | integer                     | not null default nextval('weather_id_seq'::regclass) | plain    | \n timestamp                   | timestamp without time zone | default now()                                        | plain    | \n currentwindspeed            | real                        |                                                      | plain    | \n bmp180temperature           | integer                     |                                                      | plain    | \nIndexes:\n    \"weather_pkey\" PRIMARY KEY, btree (id)\nHas OIDs: no\n</code></pre>\n\n<p>My Datamapper class is:</p>\n\n<pre><code>class Weather\n  include DataMapper::Resource\n  property :id,  Serial\n  property :bmp180temperature, String\n  property :insidehumidity, String\n  property :totalrain, String\n  property :currentwinddirection, String\n  property :currentWindSpeed, String\n  property :timestamp, DateTime\nend\nDataMapper.finalize\nWeather.auto_upgrade!\n</code></pre>\n\n<p>Since this is Ruby I fired-up IRb, required the Datamapper gem and got:</p>\n\n<pre><code>records = Weather.all\nDataObjects::SyntaxError: ERROR:  column \"bmp180temperature\" does not exist\nLINE 1: SELECT \"id\", \"bmp180temperature\", \"insidehumidity\", \"totalra...\n                     ^\n (code: 50360452, sql state: 42703, query: SELECT \"id\", \"bmp180temperature\", \"insidehumidity\", \"totalrain\", \"currentwinddirection\", \"current_wind_speed\", \"timestamp\" FROM \"weathers\" ORDER BY \"id\", uri: postgres:pi@localhost/postgres?scheme=postgres&amp;user=pi&amp;password=pw&amp;host=localhost&amp;port=&amp;path=/postgres&amp;query=&amp;fragment=&amp;adapter=postgres)\n        from /var/lib/gems/1.9.1/gems/dm-do-adapter-1.2.0/lib/dm-do-adapter/adapter.rb:147:in `execute_reader'\n        from /var/lib/gems/1.9.1/gems/dm-do-adapter-1.2.0/lib/dm-do-adapter/adapter.rb:147:in `block in read'\n        from /var/lib/gems/1.9.1/gems/dm-do-adapter-1.2.0/lib/dm-do-adapter/adapter.rb:276:in `with_connection'\n</code></pre>\n\n<p>This makes me think it's not finding the right table. It seems to be OK with the <code>id</code> column, perhaps.</p>\n\n<p>I see what appears to be DataMapper is being used for PHP in the CodeIgniter framework but I'm unsure if it's the same DataMapper I'm using in Ruby.</p>\n\n<p>What am I overlooking to get DataMapper to find this table?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 948, "user_id": 3903642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/939a67adcffb80d11f6a29cb8992469b?s=128&d=identicon&r=PG", "display_name": "Jeiwan", "link": "https://stackoverflow.com/users/3903642/jeiwan"}, "is_accepted": false, "score": 3, "last_activity_date": 1450880295, "creation_date": 1450880295, "answer_id": 34437636, "question_id": 34437206, "link": "https://stackoverflow.com/questions/34437206/how-to-make-a-controller-scope-inside-another-one/34437636#34437636", "title": "How to make a controller scope inside another one?", "body": "<pre><code>  resource :status, only: [], controller: :status do\n    resources :states\n    collection do\n      get 'first'\n      get 'second'\n      get 'third'\n    end\n  end\n</code></pre>\n\n<p>Will give you this:</p>\n\n<pre><code>       status_states GET    /status/states(.:format)          states#index\n                     POST   /status/states(.:format)          states#create\n    new_status_state GET    /status/states/new(.:format)      states#new\n   edit_status_state GET    /status/states/:id/edit(.:format) states#edit\n        status_state GET    /status/states/:id(.:format)      states#show\n                     PATCH  /status/states/:id(.:format)      states#update\n                     PUT    /status/states/:id(.:format)      states#update\n                     DELETE /status/states/:id(.:format)      states#destroy\n        first_status GET    /status/first(.:format)           status#first\n       second_status GET    /status/second(.:format)          status#second\n        third_status GET    /status/third(.:format)           status#third\n</code></pre>\n"}], "owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 274, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1450880295, "creation_date": 1450878833, "last_edit_date": 1450880154, "question_id": 34437206, "link": "https://stackoverflow.com/questions/34437206/how-to-make-a-controller-scope-inside-another-one", "title": "How to make a controller scope inside another one?", "body": "<p>I have a controller named <code>status</code> with a lots of methods like <code>first</code>, <code>second</code> and so on and so far.</p>\n\n<p>So, I have a <code>routes.rb</code> file looks like this:</p>\n\n<pre><code>scope 'status', controller: :status do\n  get 'first'\n  get 'second'\n  # and so on\nend\n</code></pre>\n\n<p>I also have a path that should looks like '/status/states':</p>\n\n<pre><code>scope :status do\n  resources :states\nend\n</code></pre>\n\n<p>How can I merge these scopes to one for using DRY &amp; clean code?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "module"], "answers": [{"comments": [{"owner": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450877353, "post_id": 34436765, "comment_id": 56614304, "body": "Yes, I have already used it that way in previous projects, but for some reason it doesn&#39;t work. It gives me the following error: <code>uninitialized constant Api:Module1::Controller::Controller1::Model1</code>. So for some reason it&#39;s using the common root..."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450877419, "post_id": 34436765, "comment_id": 56614349, "body": "That&#39;s weird. Shouldn&#39;t happen. Post the actual code you tried."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450877461, "post_id": 34436765, "comment_id": 56614369, "body": "Note, <code>Model::Model1</code>, <b>not</b> just <code>Model1</code>."}, {"owner": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450877500, "post_id": 34436765, "comment_id": 56614390, "body": "Yeah, I&#39;m aware of that. I mapped my actual implementation to the example I provided above."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450877566, "post_id": 34436765, "comment_id": 56614435, "body": "Must be rails auto-loading (not surprised). What if you <code>require</code> model file on top of controller file? Or enable eager-loading?"}, {"owner": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450877612, "post_id": 34436765, "comment_id": 56614457, "body": "I would rather have it working without a hacky solution"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450877652, "post_id": 34436765, "comment_id": 56614485, "body": "That&#39;s not hacking. That&#39;s how rails works. Don&#39;t like requires (or eager loading) - use FQNs (fully qualified names)"}, {"owner": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450877689, "post_id": 34436765, "comment_id": 56614503, "body": "Well the auto-loader should theoretically pick those up, no ?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450877733, "post_id": 34436765, "comment_id": 56614527, "body": "I don&#39;t think so. Not enough info to locate the file."}, {"owner": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450877909, "post_id": 34436765, "comment_id": 56614614, "body": "Actually, forget what I just said."}, {"owner": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450877934, "post_id": 34436765, "comment_id": 56614635, "body": "It works the first time, when I refresh it won&#39;t work anymore on both passenger and rails server."}, {"owner": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450878046, "post_id": 34436765, "comment_id": 56614700, "body": "the first page load always works, subsequent requests throw the error."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450878141, "post_id": 34436765, "comment_id": 56614751, "body": "You just said the same thing. Did you try any of the fixes I suggested? Try the other one :)"}, {"owner": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450878219, "post_id": 34436765, "comment_id": 56614801, "body": "Okay, how do I require the file ? Sorry I&#39;m pretty new to rails/ruby. For me the auto-loader always seemed to work fine..."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450878269, "post_id": 34436765, "comment_id": 56614842, "body": "put <code>require &#39;api&#47;module1&#47;model&#47;model1&#39;</code> on top of the file"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450878316, "post_id": 34436765, "comment_id": 56614866, "body": "FYI, eager loading works the first time (and doesn&#39;t work after) is because you&#39;re running in dev mode with <code>cache_classes=false</code>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450878415, "post_id": 34436765, "comment_id": 56614929, "body": "&quot;the auto-loader always seemed to work fine&quot; - that was before you invented file structure that produces names too long to be used :)"}, {"owner": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450878461, "post_id": 34436765, "comment_id": 56614957, "body": "Good point(s). So for production environment <code>cache_classes</code> will be <code>true</code> ?"}, {"owner": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450878694, "post_id": 34436765, "comment_id": 56615096, "body": "Okay I think I actually found the problem"}, {"owner": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450878801, "post_id": 34436765, "comment_id": 56615169, "body": "I thought <code>Api::V1::Module1::Controller::Controller1 &lt; ApplicationController</code> would automatically set up the module structure, but it doesn&#39;t ? So if I nest the modules as you demonstrated in your answer, it seems to work. So is my guess correct that those two things are different things ?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450878897, "post_id": 34436765, "comment_id": 56615224, "body": "Ah, you see, now the differences start to creep in. API:: <b>V1</b> ::Module1? You didn&#39;t mention V1 in your question. I assume that the model is not under V1?"}, {"owner": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450878951, "post_id": 34436765, "comment_id": 56615257, "body": "It actually is, just a mistake on my part."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450879019, "post_id": 34436765, "comment_id": 56615300, "body": "Ah, I see. Use the full module nesting syntax, not the compact one-line form. That&#39;s a quirk of ruby constant resolution mechanism"}, {"owner": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450879076, "post_id": 34436765, "comment_id": 56615335, "body": "The thing I hate about the module nesting is that it clutters my modules <b>A LOT</b>. That&#39;s why I tried to use the compact form. Strange"}, {"owner": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450879264, "post_id": 34436765, "comment_id": 56615469, "body": "I would have loved to know why the compact syntax doesn&#39;t work, but I guess your answer helped me find the problem, so I&#39;ll accept it"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450879289, "post_id": 34436765, "comment_id": 56615484, "body": "@the_critic: yeah, life is pain :)"}, {"owner": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450879379, "post_id": 34436765, "comment_id": 56615535, "body": "It really shouldn&#39;t be though. It&#39;s supposed to make things easier and I would consider component nesting to be a very significant part of development.... I guess it&#39;s just how it is."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 1, "creation_date": 1450879459, "post_id": 34436765, "comment_id": 56615575, "body": "@the_critic: check it out: <a href=\"http://pastie.org/10649156\" rel=\"nofollow noreferrer\">pastie.org/10649156</a>. This is why compact form doesn&#39;t work (as it should)"}, {"owner": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "edited": false, "score": 0, "creation_date": 1450879604, "post_id": 34436765, "comment_id": 56615667, "body": "Okay that&#39;s actually really helpful. Thanks! I guess there is some reason they did it that way..."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 1, "last_activity_date": 1450877523, "last_edit_date": 1450877523, "creation_date": 1450877172, "answer_id": 34436765, "question_id": 34436514, "link": "https://stackoverflow.com/questions/34436514/using-classes-from-submodules-in-module-tree/34436765#34436765", "title": "Using classes from submodules in module tree", "body": "<p>You should be able to do <code>Model::Model1.all</code> (omitting the common root). Is this good enough for you? Imagine that you also have <code>Serializer::Model1</code> and <code>FormObject::Model1</code>, so you can't just use <code>Model1</code>. Otherwise, how will you tell these apart?</p>\n\n<pre><code>module Api\n  module MyApp\n    module Controller\n      class Controller1\n        attr_reader :model\n        def initialize\n          @model = Model::User.new\n        end\n      end\n    end\n  end\nend\n\nmodule Api\n  module MyApp\n    module Model\n      class User\n      end\n    end\n  end\nend\n\nc = Api::MyApp::Controller::Controller1.new\nc.model # =&gt; #&lt;Api::MyApp::Model::User:0x007fa36411e888&gt;\n</code></pre>\n"}], "owner": {"reputation": 11964, "user_id": 1066899, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/093623a2cb341330217f2a4f38a69cc2?s=128&d=identicon&r=PG", "display_name": "the_critic", "link": "https://stackoverflow.com/users/1066899/the-critic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 1, "accepted_answer_id": 34436765, "answer_count": 1, "score": 0, "last_activity_date": 1450877523, "creation_date": 1450876388, "question_id": 34436514, "link": "https://stackoverflow.com/questions/34436514/using-classes-from-submodules-in-module-tree", "title": "Using classes from submodules in module tree", "body": "<p>I have the following structure: </p>\n\n<pre><code>api/\n  api/\n    module1/\n      controller/\n        controller1.rb\n      model/\n        model1.rb\n      serializer/\n        serializer1.rb\n</code></pre>\n\n<p><strong>controller1.rb</strong> looks like this: </p>\n\n<pre><code>class Api::Module1::Controller::Controller1 &lt; ApplicationController\n    def index\n        # how do I prevent having to use the prefixed full module path ?\n        render json: Api::Module1::Model::Model1.all, each_serializer: Api::Module1::Serializer::Serializer1\n    end\nend\n</code></pre>\n\n<p><strong>model1.rb</strong> looks like this: </p>\n\n<pre><code>class Api::Module1::Model::Model1 &lt; ActiveRecord::Base\n\nend\n</code></pre>\n\n<p>My question: </p>\n\n<p>How do I circumvent using <code>Api::Module1::Model</code> as a prefix to use my model classes in my controller ? I would like to use just <code>Model1.all</code> instead of <code>Api::Module1::Model::Model1.all</code>. </p>\n\n<p>I tried using <code>include Api::Module1::Model</code> at the top of my <code>controller1.rb</code> but that doesn't work either because if I then use <code>Model1.all</code> it obviously tries to use the module path from the controller, i.e. <code>Api::Module1::Controller::MenuController::Model</code>, which is not what I intend to use obviously. </p>\n"}, {"tags": ["ruby", "security", "gem"], "answers": [{"comments": [{"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 0, "creation_date": 1451297150, "post_id": 34481436, "comment_id": 56724455, "body": "It&#39;s the package manager (Rubygems) that creates the cert, but I don&#39;t know what it&#39;s doing under the hood so I&#39;ll check that out and see if the walkthrough helps me out and get back to you, thanks!"}], "tags": [], "owner": {"reputation": 67623, "user_id": 417194, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/fd36c548bbe7c836bc4812c588fa731a?s=128&d=identicon&r=PG", "display_name": "Denis de Bernardy", "link": "https://stackoverflow.com/users/417194/denis-de-bernardy"}, "is_accepted": false, "score": 4, "last_activity_date": 1451226977, "creation_date": 1451226977, "answer_id": 34481436, "question_id": 34436231, "link": "https://stackoverflow.com/questions/34436231/how-do-i-add-an-extra-signing-cert-to-an-existing-gem/34481436#34481436", "title": "How do I add an extra signing cert to an existing gem?", "body": "<p>Presumably you self-issued your own cert, and it's complaining that the cert chain is broken as a result. The gem's owner should issue your cert using their own as the certification authority.</p>\n\n<p><a href=\"https://support.dnsimple.com/articles/what-is-ssl-certificate-chain/\" rel=\"nofollow\">https://support.dnsimple.com/articles/what-is-ssl-certificate-chain/</a></p>\n\n<p>It can be done using <code>openssl</code>. The docs for doing so are - unfortunately - abysmally bad and the steps you need to take to do so are hairy - to put it mildly. <a href=\"https://jamielinux.com/docs/openssl-certificate-authority/\" rel=\"nofollow\">Possible walkthrough here</a>.</p>\n"}], "owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "answer_count": 1, "score": 16, "last_activity_date": 1451630813, "creation_date": 1450875454, "question_id": 34436231, "link": "https://stackoverflow.com/questions/34436231/how-do-i-add-an-extra-signing-cert-to-an-existing-gem", "title": "How do I add an extra signing cert to an existing gem?", "body": "<p>I've been added as a contributor to an existing project which has a signing certificate attached to the gem. I'll be pushing the next release so I need to add my cert to the gem. When I follow the instructions at <a href=\"http://guides.rubygems.org/security/#building-gems\">http://guides.rubygems.org/security/#building-gems</a> everything is fine up till I reach point 4 and run <code>gem build</code>\u2026 the following error presents itself:</p>\n\n<blockquote>\n  <p>ERROR:  While executing gem ... (Gem::Security::Exception)\n      invalid signing chain: certificate (my details) was not issued by (existing cert owner's details)</p>\n</blockquote>\n\n<p>I've never added a second cert to an existing gem, does anyone know what the next step is? Does the existing cert owner need to do something? Is a project supposed or able to have more than one cert?</p>\n\n<p>I've not been able to find any info on this, so any insight or help would be very welcome and appreciated.</p>\n"}, {"tags": ["ruby", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1450904244, "post_id": 34434988, "comment_id": 56628898, "body": "When programming, and especially when asking programming questions, it&#39;s really important to understand what components in your code do what. Nokogiri has nothing to do with files, it only parses text, returning information about what it found. Then you have to use IO or File to read/write/update/delete the files. That&#39;s immediately your clue where you should look, as <code>open</code> belongs to those classes, not Nokogiri. Searching the documentation will tell you that. And the documentation would have led to <a href=\"http://ruby-doc.org/core-2.0.0/IO.html#method-c-new-label-IO+Open+Mode\" rel=\"nofollow noreferrer\">the solution</a>."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1450872088, "creation_date": 1450872088, "answer_id": 34435259, "question_id": 34434988, "link": "https://stackoverflow.com/questions/34434988/how-to-add-lines-to-a-file-with-nokogiri/34435259#34435259", "title": "How to add lines to a file with Nokogiri?", "body": "<p>You have the wrong <a href=\"http://ruby-doc.org/core-2.2.3/IO.html#method-c-new\" rel=\"nofollow\">mode opening a file</a>:</p>\n\n<pre><code>- open(\"uni.csv\", \"w\"){ |file| file.write(data)}\n#                  \u21d3 appends, not overrides content\n+ open(\"uni.csv\", \"a\"){ |file| file.write(data)}\n</code></pre>\n"}], "owner": {"reputation": 6105, "user_id": 1700874, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad36477949cfd7db659cd4420537911c?s=128&d=identicon&r=PG&f=1", "display_name": "The Whiz of Oz", "link": "https://stackoverflow.com/users/1700874/the-whiz-of-oz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 34435259, "answer_count": 1, "score": 1, "last_activity_date": 1450872088, "creation_date": 1450871097, "last_edit_date": 1450871465, "question_id": 34434988, "link": "https://stackoverflow.com/questions/34434988/how-to-add-lines-to-a-file-with-nokogiri", "title": "How to add lines to a file with Nokogiri?", "body": "<p>I am trying to add parsed information to a text file using Nokogiri. I would like to append every new string to the existing file.</p>\n\n<pre><code>divs_with_links = uni_page.css('div.border-top_lightgrey')\ndivs_with_links.each_with_index do |div, index|\n  if div.css('h3').text == 'Biology'\n    uni_link = div.css(\"span.external-url\").text || \"no link found\"\n    uni_email = div.css(\"p.email\").text || \"no email found\"\n    data = \"#{current_uni_title}|#{uni_link}|#{uni_email}\"\n    open(\"uni.csv\", \"w\"){ |file| file.write(data)}\n    break\n  end\nend\n</code></pre>\n\n<p>Every time I parse a new page, Nokogiri deletes the file contents.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "redis", "sidekiq"], "comments": [{"owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 1, "creation_date": 1450919829, "post_id": 34434745, "comment_id": 56634161, "body": "We need the full backtrace."}, {"owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "reply_to_user": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 0, "creation_date": 1451248953, "post_id": 34434745, "comment_id": 56711108, "body": "@MikePerham I&#39;ve updated my post."}, {"owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 1, "creation_date": 1451347724, "post_id": 34434745, "comment_id": 56747162, "body": "Show us the code for the worker."}, {"owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 1, "creation_date": 1451407673, "post_id": 34434745, "comment_id": 56771543, "body": "The backtrace doesn&#39;t make any sense.  What version of Sidekiq are you using?"}, {"owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "reply_to_user": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 0, "creation_date": 1451421007, "post_id": 34434745, "comment_id": 56778379, "body": "I&#39;m using sidekiq-pro: gem &quot;sidekiq-pro&quot;, &quot;~&gt; 2.0&quot;, source: &quot;secret source&quot;"}, {"owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "reply_to_user": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 0, "creation_date": 1451421144, "post_id": 34434745, "comment_id": 56778439, "body": "In Gemfile.lock I have the following versions: sidekiq-pro (2.0.5), sidekiq (&gt;= 3.3.2)"}, {"owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 0, "creation_date": 1451431881, "post_id": 34434745, "comment_id": 56783058, "body": "When you start sidekiq, what version does it print out?"}, {"owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "reply_to_user": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 0, "creation_date": 1451465323, "post_id": 34434745, "comment_id": 56793213, "body": "It does not print any version. Only this big SidekiqPro inscription"}, {"owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 0, "creation_date": 1451497707, "post_id": 34434745, "comment_id": 56810592, "body": "<code>bundle exec sidekiq -V</code>"}, {"owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "reply_to_user": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 0, "creation_date": 1451543617, "post_id": 34434745, "comment_id": 56826200, "body": "It prints: Sidekiq 3.4.2."}, {"owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 0, "creation_date": 1451580106, "post_id": 34434745, "comment_id": 56840480, "body": "Thanks, the stack still makes no sense - it does not correspond to the 3.4.2 source code.  I can&#39;t explain what you are seeing."}], "answers": [{"tags": [], "owner": {"reputation": 6088, "user_id": 1983072, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/974c4e106b996fff51c25171e439b7b8?s=128&d=identicon&r=PG", "display_name": "bbozo", "link": "https://stackoverflow.com/users/1983072/bbozo"}, "is_accepted": false, "score": 2, "last_activity_date": 1451761846, "creation_date": 1451761846, "answer_id": 34569665, "question_id": 34434745, "link": "https://stackoverflow.com/questions/34434745/rails-cache-read-in-sidekiq-process/34569665#34569665", "title": "Rails.cache.read in sidekiq process", "body": "<p>A couple options without being able to go into the Pro code:</p>\n\n<h2>Error you found is redis-store related, try memcached</h2>\n\n<p>Try moving the cache to memcached, it should be a simple and non-disruptive action, cost-free on simple plans, and see if the problem goes away, or changes, could be useful for hunting the core bug down</p>\n\n<p>memcache is a better caching service anyway for simple key-value stuff,</p>\n\n<h2>The worker you linked is not a part of the stack trace</h2>\n\n<p>You showed the <code>ResponseCreatorWorker</code>, but that does not appear in the stack trace. What appears is <code>ResponseProcessorWorker</code>, maybe link that worker instead?</p>\n\n<h2>Are you sure you are running the code you are running?</h2>\n\n<p>Mike Perham says that the <code>Sidekiq</code> backtrace doesn't match the version you have given him, and the wrong worker is in the stack trace? Are you really sure the server is updating? Review the deployment log and log in to the worker with <code>heroku run bash</code> and inspect a couple of key files, make sure nothing is off with the platform.</p>\n\n<h2>Can you rescue it? :D</h2>\n\n<p>It should be pretty safe to put in a rescue that catches <code>NotImplementedError</code>, tries once again, and logs a record of it into the logs. Update gems when appropriate and when warnings disappear open a whiskey and celebrate.</p>\n\n<p>Put something like this in your model:</p>\n\n<pre><code>def wrap_me_scotty\n  yield\nrescue NotImplementedError =&gt; e\n  warn \"#{e} :-(\"\n  yield # try once more, let it explode if no joy\nend\n</code></pre>\n\n<p>and then wrap <code>Rails.cache</code> calls</p>\n\n<pre><code>def self.from_cache(schema_id)\n  schema = wrap_me_scotty{ Rails.cache.read(\"schema_#{schema_id}\") }\n  unless schema\n    schema = Schema.where(id: schema_id).includes(:schema_items).first\n    wrap_me_scotty{ Rails.cache.write(\"schema_#{schema_id}\", schema) } if schema\n  end\n  schema\nend\n</code></pre>\n"}], "owner": {"reputation": 5714, "user_id": 2389501, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/23f6a708c04c660111117c4613592689?s=128&d=identicon&r=PG", "display_name": "Mateusz Urba\u0144ski", "link": "https://stackoverflow.com/users/2389501/mateusz-urba%c5%84ski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1305, "favorite_count": 1, "answer_count": 1, "score": 4, "last_activity_date": 1451761846, "creation_date": 1450870323, "last_edit_date": 1451381871, "question_id": 34434745, "link": "https://stackoverflow.com/questions/34434745/rails-cache-read-in-sidekiq-process", "title": "Rails.cache.read in sidekiq process", "body": "<p>In my Ruby on Rails application I have model that looks like this:</p>\n\n<pre><code>class Schema &lt; ActiveRecord::Base\n  has_many :schema_items\n\n  def self.from_cache(schema_id)\n    schema = Rails.cache.read(\"schema_#{schema_id}\")\n    unless schema\n      schema = Schema.where(id: schema_id).includes(:schema_items).first\n      Rails.cache.write(\"schema_#{schema_id}\", schema) if schema\n    end\n    schema\n  end\nend\n</code></pre>\n\n<p>I'm using this class method in other class which is called by Sidekiq worker. From time to time it returns the following error:</p>\n\n<pre><code>NotImplementedError\n</code></pre>\n\n<p>Using google I found this issue in redis_store gem: <a href=\"https://github.com/redis-store/redis-store/issues/74\" rel=\"nofollow\">https://github.com/redis-store/redis-store/issues/74</a></p>\n\n<p>But they fix this bug. My app is hosted on Heroku and I'm using the RedisCloud. Any ideas how can I solve this?</p>\n\n<p>EDIT: </p>\n\n<p>Here is the full backtrace:</p>\n\n<pre><code>NotImplementedError: NotImplementedError\n  from celluloid/tasks/task_fiber.rb:15:in `block in create'\n  from celluloid/tasks.rb:57:in `block in initialize'\n  from celluloid/actor.rb:357:in `block in task'\n  from celluloid/cell.rb:71:in `block in task'\n  from celluloid/cell.rb:60:in `block in invoke'\n  from celluloid/calls.rb:122:in `dispatch'\n  from celluloid/calls.rb:26:in `dispatch'\n  from celluloid/calls.rb:26:in `public_send'\n  from sidekiq/processor.rb:50:in `process'\n  from sidekiq/processor.rb:98:in `stats'\n  from sidekiq/processor.rb:51:in `block in process'\n  from sidekiq/middleware/chain.rb:132:in `invoke'\n  from sidekiq/middleware/chain.rb:132:in `call'\n  from sidekiq/middleware/chain.rb:129:in `block in invoke'\n  from sidekiq/middleware/server/logging.rb:11:in `call'\n  from sidekiq/logging.rb:30:in `with_context'\n  from sidekiq/middleware/server/logging.rb:15:in `block in call'\n  from sidekiq/middleware/chain.rb:129:in `block in invoke'\n  from sidekiq/failures/middleware.rb:9:in `call'\n  from sidekiq/middleware/chain.rb:129:in `block in invoke'\n  from sidekiq/middleware/server/retry_jobs.rb:74:in `call'\n  from sidekiq/middleware/chain.rb:129:in `block in invoke'\n  from sidekiq/middleware/server/active_record.rb:6:in `call'\n  from sidekiq/middleware/chain.rb:129:in `block in invoke'\n  from sidekiq/batch/middleware.rb:25:in `call'\n  from sidekiq/middleware/chain.rb:129:in `block in invoke'\n  from sidekiq_unique_jobs/middleware/server/unique_jobs.rb:16:in `call'\n  from sidekiq/middleware/chain.rb:129:in `block in invoke'\n  from sidetiq/middleware/history.rb:8:in `call'\n  from sidekiq/middleware/chain.rb:129:in `block in invoke'\n  from new_relic/agent/instrumentation/sidekiq.rb:29:in `call'\n  from new_relic/agent/instrumentation/controller_instrumentation.rb:352:in `perform_action_with_newrelic_trace'\n  from new_relic/agent/instrumentation/sidekiq.rb:33:in `block in call'\n  from sidekiq/middleware/chain.rb:127:in `block in invoke'\n  from sidekiq/processor.rb:52:in `block (2 levels) in process'\n  from sidekiq/processor.rb:75:in `execute_job'\n  from app/workers/response_processor_worker.rb:8:in `perform'\n  from app/services/import/response_processor.rb:28:in `process'\n  from app/models/import/importer/raw_response_validator.rb:17:in `validate'\n  from app/models/survey_schema.rb:51:in `from_cache'\n  from active_record/relation/finder_methods.rb:127:in `first'\n  from active_record/relation/finder_methods.rb:484:in `find_nth'\n  from active_record/relation/finder_methods.rb:500:in `find_nth_with_limit'\n  from active_record/relation.rb:243:in `to_a'\n  from active_record/relation.rb:514:in `load'\n  from active_record/relation.rb:643:in `exec_queries'\n  from active_record/relation.rb:643:in `each'\n  from active_record/relation.rb:644:in `block in exec_queries'\n  from active_record/associations/preloader.rb:102:in `preload'\n  from active_record/associations/preloader.rb:102:in `flat_map'\n  from active_record/associations/preloader.rb:102:in `each'\n  from active_record/associations/preloader.rb:103:in `block in preload'\n  from active_record/associations/preloader.rb:115:in `preloaders_on'\n  from active_record/associations/preloader.rb:143:in `preloaders_for_one'\n  from active_record/associations/preloader.rb:143:in `flat_map'\n  from active_record/associations/preloader.rb:143:in `each'\n  from active_record/associations/preloader.rb:144:in `block in preloaders_for_one'\n  from active_record/associations/preloader.rb:144:in `map'\n  from active_record/associations/preloader.rb:144:in `each'\n  from active_record/associations/preloader.rb:146:in `block (2 levels) in preloaders_for_one'\n  from active_record/associations/preloader/association.rb:20:in `run'\n  from active_record/associations/preloader/collection_association.rb:13:in `preload'\n  from active_record/associations/preloader/association.rb:78:in `associated_records_by_owner'\n  from active_record/associations/preloader/association.rb:60:in `owners_by_key'\n  from active_record/associations/preloader/association.rb:103:in `key_conversion_required?'\n  from active_record/associations/preloader/association.rb:107:in `association_key_type'\n  from active_record/associations/preloader/association.rb:45:in `association_key_name'\n</code></pre>\n\n<p>and my worker looks like this:</p>\n\n<pre><code>class ResponseCreatorWorker\n  include Sidekiq::Worker\n\n  sidekiq_options queue: :response_processing\n\n  def perform(schema_id)\n    # some not important code\n    schema = Schema.from_cache(schema_id) # this line throws the error\n    Response.create(schema: schema)\n  end\nend\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1450872548, "post_id": 34434294, "comment_id": 56611547, "body": "<i>&quot;it gives error&quot;</i> - please include the error."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1450869124, "creation_date": 1450869124, "answer_id": 34434377, "question_id": 34434294, "link": "https://stackoverflow.com/questions/34434294/two-dimensional-array-syntax-where-string-as-index/34434377#34434377", "title": "Two dimensional array syntax where string as index", "body": "<pre><code>\u25b6 products = {}\n#\u21d2 {}\n\u25b6 products['first_category'] = []\n#\u21d2 []\n\u25b6 products['second_category'] = []\n#\u21d2 []\n\u25b6 products['first_category'][0] = ['aaa', 'bb', 'ccc']\n\u25b6 products['first_category'][1] = ['aa', 'bb', 'cc']\n\u25b6 products['first_category'][2] = ['a', 'b', 'c']\n\u25b6 products['second_category'][0] = ['asd', 'sdfb', 'csdfd']\n\u25b6 products['second_category'][1] = ['sdf', 'bsdf', 'dsfssd']\n\u25b6 all_products = products['first_category'] + products['second_category']\n#\u21d2 [\n#  [0] [\n#    [0] \"aaa\",\n#    [1] \"bb\",\n#    [2] \"ccc\"\n#  ],\n#  [1] [\n#    [0] \"aa\",\n#    [1] \"bb\",\n#    [2] \"cc\"\n#  ],\n#  [2] [\n#    [0] \"a\",\n#    [1] \"b\",\n#    [2] \"c\"\n#  ],\n#  [3] [\n#    [0] \"asd\",\n#    [1] \"sdfb\",\n#    [2] \"csdfd\"\n#  ],\n#  [4] [\n#    [0] \"sdf\",\n#    [1] \"bsdf\",\n#    [2] \"dsfssd\"\n#  ]\n# ]\n</code></pre>\n\n<p>The tricks here are:</p>\n\n<ol>\n<li>Since your top-level indices are strings, the object itself must be a hash rather than an array. Arrays might have integer indices only.</li>\n<li>All subarrays must be explicitly created before one might add elements to them.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 1, "last_activity_date": 1450870660, "last_edit_date": 1450870660, "creation_date": 1450870127, "answer_id": 34434693, "question_id": 34434294, "link": "https://stackoverflow.com/questions/34434294/two-dimensional-array-syntax-where-string-as-index/34434693#34434693", "title": "Two dimensional array syntax where string as index", "body": "<p>Your code is fine.  Just use below line to create <code>products</code> (add it to top of your code snippet)</p>\n\n<pre><code>products = Hash.new {|hash, key| hash[key] = [] }\n</code></pre>\n\n<p>You need to use <code>Hash</code> as <code>Array</code> can't have non-numeric indices.  Hash allows you to accepts its elements in array-like syntax even though it's a dictionary. In addition, the above code will ensure that if there is no entry for a given key, an empty array is used as its value and added to hash.</p>\n\n<hr>\n\n<p>Working sample:</p>\n\n<pre><code>products = Hash.new {|hash, key| hash[key] = [] }\n\nproducts['first_category'][0] = ['aaa', 'bb', 'ccc']\nproducts['first_category'][1] = ['aa', 'bb', 'cc']\nproducts['first_category'][2] = ['a', 'b', 'c']\n\nproducts['second_category'][0] = ['asd', 'sdfb', 'csdfd']\nproducts['second_category'][1] = ['sdf', 'bsdf', 'dsfssd']\n\nall_products = products['first_category'] + products['second_category']\n\np all_products[0]\n#=&gt; [\"aaa\", \"bb\", \"ccc\"]\np all_products[1]\n#=&gt; [\"aa\", \"bb\", \"cc\"]\np all_products[2]\n#=&gt; [\"a\", \"b\", \"c\"]\np all_products[3]\n#=&gt; [\"asd\", \"sdfb\", \"csdfd\"]\np all_products[4]\n#=&gt; [\"sdf\", \"bsdf\", \"dsfssd\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 179, "user_id": 1617212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/315275d1a8e94a785a1da5fe79a04ec7?s=128&d=identicon&r=PG", "display_name": "rejin", "link": "https://stackoverflow.com/users/1617212/rejin"}, "is_accepted": false, "score": 0, "last_activity_date": 1450870380, "creation_date": 1450870380, "answer_id": 34434762, "question_id": 34434294, "link": "https://stackoverflow.com/questions/34434294/two-dimensional-array-syntax-where-string-as-index/34434762#34434762", "title": "Two dimensional array syntax where string as index", "body": "<p>just try</p>\n\n<pre><code>all_products = products.values.flatten(1)\n</code></pre>\n\n<p>You take the values into an array ignoring the keys and flatten it to the level of 1</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1670773"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 34434377, "answer_count": 3, "score": 0, "last_activity_date": 1450870660, "creation_date": 1450868839, "last_edit_date": 1450869196, "question_id": 34434294, "link": "https://stackoverflow.com/questions/34434294/two-dimensional-array-syntax-where-string-as-index", "title": "Two dimensional array syntax where string as index", "body": "<p>I need something like this below.</p>\n\n<pre><code>products['first_category'][0] = ['aaa', 'bb', 'ccc']\nproducts['first_category'][1] = ['aa', 'bb', 'cc']\nproducts['first_category'][2] = ['a', 'b', 'c']\nproducts['second_category'][0] = ['asd', 'sdfb', 'csdfd']\nproducts['second_category'][1] = ['sdf', 'bsdf', 'dsfssd']\nall_products = products['first_category'] + products['second_category']\n</code></pre>\n\n<p>This should produce an array of the form </p>\n\n<pre><code>all_products[0] = ['aaa', 'bb', 'ccc']\nall_products[1] = ['aa', 'bb', 'cc']\nall_products[2] = ['a', 'b', 'c']\nall_products[3] = ['asd', 'sdfb', 'csdfd']\nall_products[4] = ['sdf', 'bsdf', 'dsfssd']\n</code></pre>\n\n<p>But I don't know how to implement this in ruby. I tried this but it gives error.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "esb"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1450874884, "post_id": 34434016, "comment_id": 56612931, "body": "... Obviously it depends on the ESB. Any I&#39;ve used can consume from a message queue like RabbitMQ."}], "answers": [{"tags": [], "owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "is_accepted": true, "score": 1, "last_activity_date": 1450881740, "creation_date": 1450881740, "answer_id": 34438076, "question_id": 34434016, "link": "https://stackoverflow.com/questions/34434016/connect-ruby-on-rails-application-to-an-esb/34438076#34438076", "title": "Connect Ruby on Rails Application to an ESB", "body": "<p>Yes.</p>\n\n<p>Please notice that Ruby is soft-typed and that EBS services should (normally) be strong typed, so that you will probably require manual type checking.</p>\n\n<p>Ruby could probably be used for most applications (not system writing) and it definitely fits well within a Service oriented design such as an EBS.</p>\n"}], "owner": {"reputation": 37, "user_id": 2343980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fb2d000f1cfc2c1bea5412604723a290?s=128&d=identicon&r=PG", "display_name": "Suchith", "link": "https://stackoverflow.com/users/2343980/suchith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "accepted_answer_id": 34438076, "answer_count": 1, "score": 0, "last_activity_date": 1450881740, "creation_date": 1450867935, "last_edit_date": 1450874760, "question_id": 34434016, "link": "https://stackoverflow.com/questions/34434016/connect-ruby-on-rails-application-to-an-esb", "title": "Connect Ruby on Rails Application to an ESB", "body": "<p>I want to connect a ruby on rails application with to an ESB. Is it possible to connect a Ruby application with an ESB? </p>\n\n<p>Please provide explanations and suggestions.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rspec-rails", "rspec3"], "answers": [{"comments": [{"owner": {"reputation": 500, "user_id": 1567993, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/cef758cd6a80995ec83945c4b9209d27?s=128&d=identicon&r=PG", "display_name": "Daneo", "link": "https://stackoverflow.com/users/1567993/daneo"}, "edited": false, "score": 0, "creation_date": 1450879872, "post_id": 34437094, "comment_id": 56615826, "body": "This would just remove the requirement for the parameter id, right? So in what way should it solve it ? I realized I forgot to include the error message, so added it now. <a href=\"https://gist.github.com/daneov/8087abd1319d2354b677\" rel=\"nofollow noreferrer\">GitHub</a> has the gist with the entire stacktrace"}], "tags": [], "owner": {"reputation": 2330, "user_id": 1043167, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1998812477433665de07bdc97af50d28?s=128&d=identicon&r=PG", "display_name": "Laurens", "link": "https://stackoverflow.com/users/1043167/laurens"}, "is_accepted": false, "score": 0, "last_activity_date": 1450878453, "creation_date": 1450878453, "answer_id": 34437094, "question_id": 34433991, "link": "https://stackoverflow.com/questions/34433991/error-concerning-url-parameter-while-testing-view/34437094#34437094", "title": "Error concerning url parameter while testing view", "body": "<pre><code>def edit\n  @territory = Territory.find(edit_params)\nend\n</code></pre>\n\n<p>Should just be</p>\n\n<pre><code>def edit\n  @territory = Territory.find(params[:id])\nend\n</code></pre>\n"}], "owner": {"reputation": 500, "user_id": 1567993, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/cef758cd6a80995ec83945c4b9209d27?s=128&d=identicon&r=PG", "display_name": "Daneo", "link": "https://stackoverflow.com/users/1567993/daneo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450879810, "creation_date": 1450867871, "last_edit_date": 1450879810, "question_id": 34433991, "link": "https://stackoverflow.com/questions/34433991/error-concerning-url-parameter-while-testing-view", "title": "Error concerning url parameter while testing view", "body": "<p>Running the provided spec fails, and I think it might be related to the url parameters, being territories/:id/.</p>\n\n<blockquote>\n  <p>Error received :  </p>\n</blockquote>\n\n<pre><code>1) territories/edit.html.erb shows a form with the data already in it\n     Failure/Error: &lt;%= form_for(territory, remote: true) do |territory_form| %&gt;\n\n     ActionView::Template::Error:\n       No route matches {:action=&gt;\"show\", :controller=&gt;\"territories\", :format=&gt;nil, :id=&gt;nil, :locale=&gt;#&lt;Territory id: 2, name: \"Territory 4\", lent_on: \"2015-12-21\", returned_on: \"2015-12-21\", lent_to: 6, created_at: \"2015-12-23 10:04:15\", updated_at: \"2015-12-23 10:04:15\"&gt;} missing required keys: [:id]\n</code></pre>\n\n<p>I'm working with <code>form_for</code>. I find it a bit weird that I receive an error about the url parameter in my view, while I'm not having anything directly related to it in the view code.</p>\n\n<p>I've put the controller code as wel, just for clarity.</p>\n\n<p>Can someone guide me how to either fix this or how to properly test this</p>\n\n<blockquote>\n  <p>edit.html.erb</p>\n</blockquote>\n\n<pre><code>&lt;h1&gt;Territories#edit&lt;/h1&gt;\n&lt;p&gt;Find me in app/views/territories/edit.html.erb&lt;/p&gt;\n\n&lt;%= render partial: \"territory_form\", locals: { territory: @territory } %&gt;\n</code></pre>\n\n<blockquote>\n  <p>edit.html.erb_spec.rb</p>\n</blockquote>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe \"territories/edit.html.erb\", type: :view, territories:true do\n  before(:each) do\n    @territory = create(:territory)\n    render\n  end\n\n  it \"shows a form with the data already in it\" do\n    puts \"Body: #{rendered}\"\n    expect(rendered).to have_css(\"label\", :text =&gt; \"Name\")\n    expect(rendered).to have_css \"input[value*='#{@territory.name}']\"\n  end\nend\n</code></pre>\n\n<blockquote>\n  <p>routes.rb</p>\n</blockquote>\n\n<pre><code>        Prefix Verb   URI Pattern                                     Controller#Action\n  sessions_new GET    (/:locale)/sessions/new(.:format)               sessions#new {:locale=&gt;/en|nl/}\n   sign_up_new GET    (/:locale)/sign_up/new(.:format)                sign_up#new {:locale=&gt;/en|nl/}\n         users GET    (/:locale)/users(.:format)                      users#index {:locale=&gt;/en|nl/}\n     edit_user GET    (/:locale)/users/:id/edit(.:format)             users#edit {:locale=&gt;/en|nl/}\n          user GET    (/:locale)/users/:id(.:format)                  users#show {:locale=&gt;/en|nl/}\n               PATCH  (/:locale)/users/:id(.:format)                  users#update {:locale=&gt;/en|nl/}\n               PUT    (/:locale)/users/:id(.:format)                  users#update {:locale=&gt;/en|nl/}\n               DELETE (/:locale)/users/:id(.:format)                  users#destroy {:locale=&gt;/en|nl/}\n      register GET    (/:locale)/register(.:format)                   users#new {:locale=&gt;/en|nl/}\n               POST   (/:locale)/register(.:format)                   users#create {:locale=&gt;/en|nl/}\n         login GET    (/:locale)/login(.:format)                      sessions#new {:locale=&gt;/en|nl/}\n               POST   (/:locale)/login(.:format)                      sessions#create {:locale=&gt;/en|nl/}\n        logout DELETE (/:locale)/logout(.:format)                     sessions#destroy {:locale=&gt;/en|nl/}\n      overview GET    (/:locale)/user/overview(.:format)              dashboard#index {:locale=&gt;/en|nl/}\n   territories GET    (/:locale)/admin/territories(.:format)          territories#index {:locale=&gt;/en|nl/}\n               POST   (/:locale)/admin/territories(.:format)          territories#create {:locale=&gt;/en|nl/}\n new_territory GET    (/:locale)/admin/territories/new(.:format)      territories#new {:locale=&gt;/en|nl/}\nedit_territory GET    (/:locale)/admin/territories/:id/edit(.:format) territories#edit {:locale=&gt;/en|nl/}\n     territory GET    (/:locale)/admin/territories/:id(.:format)      territories#show {:locale=&gt;/en|nl/}\n               PATCH  (/:locale)/admin/territories/:id(.:format)      territories#update {:locale=&gt;/en|nl/}\n               PUT    (/:locale)/admin/territories/:id(.:format)      territories#update {:locale=&gt;/en|nl/}\n               DELETE (/:locale)/admin/territories/:id(.:format)      territories#destroy {:locale=&gt;/en|nl/}\n               GET    /:locale(.:format)                              sessions#new\n          root GET    /                                               sessions#new\n</code></pre>\n\n<blockquote>\n  <p>territories_controller.rb</p>\n</blockquote>\n\n<pre><code>class TerritoriesController &lt; ApplicationController\n\n  def index\n    @territories = Territory.all.order(:name) #Must be changed to use pagination\n  end\n\n  def new\n    @territory = Territory.new\n  end\n\n  def import\n\n  end\n\n  def create\n    @territory = Territory.new(create_params)\n    if (!@territory.save)\n      render action: :create and return\n    end\n\n    render action :new\n  end\n\n  def show\n  end\n\n  def edit\n    @territory = Territory.find(edit_params)\n  end\n\n  def update\n    territory_params = update_params\n    @territory = Territory.find(territory_params[:id])\n\n    if (!@territory || !@territory.persisted?)\n      render index and return\n    end\n\n    @territory.update(territory_params[:territory])\n  end\n\n  def destroy\n  end\n\n\n  private\n  def create_params\n    params.require(:territory).permit(:name)\n  end\n\n  def edit_params\n    params.require(:id)\n  end\n\n  def update_params\n    id = params.require(:id)\n    territory = params.require(:territory).permit(:name)\n    {:id =&gt; id, :territory =&gt; territory}\n  end\nend\n</code></pre>\n\n<blockquote>\n  <p>territory_form.html.erb</p>\n</blockquote>\n\n<pre><code>&lt;%= form_for(territory, remote: true) do |territory_form| %&gt;\n  &lt;p&gt;\n    &lt;%= territory_form.label :name %&gt;\n    &lt;%= territory_form.text_field :name %&gt;\n  &lt;/p&gt;\n  &lt;%= territory_form.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Made it into a <a href=\"https://gist.github.com/daneov/8087abd1319d2354b677\" rel=\"nofollow\">gist</a></p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 4, "last_activity_date": 1450867729, "creation_date": 1450867729, "answer_id": 34433944, "question_id": 34433883, "link": "https://stackoverflow.com/questions/34433883/ruby-initialize-an-object-instance-with-a-block/34433944#34433944", "title": "Ruby: Initialize an Object instance with a block", "body": "<p>You could use <a href=\"http://ruby-doc.org/core-2.2.4/Object.html#method-i-tap\" rel=\"nofollow\"><code>tap</code></a>:</p>\n\n<blockquote>\n  <p>Yields self to the block, and then returns self.</p>\n</blockquote>\n\n<p>Example:</p>\n\n<pre><code>def create_custom_object\n  Object.new.tap { |o| o.define_singleton_method(:foo) { 'foo' } }\nend\n\nobject = create_custom_object\n#=&gt; #&lt;Object:0x007f9beb857b48&gt;\n\nobject.foo\n#=&gt; \"foo\"\n</code></pre>\n"}], "owner": {"reputation": 1137, "user_id": 3657027, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9055a18fa1995864d1ce9f718b1a2418?s=128&d=identicon&r=PG&f=1", "display_name": "DreamWalker", "link": "https://stackoverflow.com/users/3657027/dreamwalker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 1, "accepted_answer_id": 34433944, "answer_count": 1, "score": 3, "last_activity_date": 1450867933, "creation_date": 1450867499, "question_id": 34433883, "link": "https://stackoverflow.com/questions/34433883/ruby-initialize-an-object-instance-with-a-block", "title": "Ruby: Initialize an Object instance with a block", "body": "<p>Is that ever possible to initialize an Object instance, perform an operation on it and return this instance without creating a temporary variable?</p>\n\n<p>For example:</p>\n\n<pre><code>def create_custom_object\n  Object.new do |instance|\n    instance.define_singleton_method(:foo) { 'foo' }\n  end\nend \n# returns an instance, but defines nothing :(\ndef create_custom_object\n  Object.new do \n    self.define_singleton_method(:foo) { 'foo' }\n  end\nend\n# same thing \n</code></pre>\n\n<p>rather than:</p>\n\n<pre><code>def create_custom_object \n  object = Object.new\n  object.define_singleton_method(:foo) { 'foo' }\n  object\nend \n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 18774, "user_id": 1763929, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/jLvbN.jpg?s=128&g=1", "display_name": "Vucko", "link": "https://stackoverflow.com/users/1763929/vucko"}, "edited": false, "score": 2, "creation_date": 1450868546, "post_id": 34433668, "comment_id": 56609106, "body": "Here&#39;s from <a href=\"https://www.reddit.com/r/ruby/comments/3elrzz/changes_in_ruby_22_since_19/\" rel=\"nofollow noreferrer\">reddit - Changes in Ruby 2.2, since 1.9?</a>."}], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1450866787, "creation_date": 1450866787, "question_id": 34433668, "link": "https://stackoverflow.com/questions/34433668/what-do-i-have-to-pay-attention-to-when-compatibility-between-ruby-1-9-and-2-2", "title": "What do I have to pay attention to, when compatibility between Ruby 1.9 and 2.2 is necessary?", "body": "<p>(Similar question already asked at <a href=\"https://www.ruby-forum.com/topic/6877419\" rel=\"nofollow\">Ruby Forum</a>, but posting it here too with better wording, since I didn't get any response so far).</p>\n\n<p>For a new Ruby project, I have the requirement to start the development using Ruby 1.9.3. I personally expect, however, that there will be a shift to Ruby 2.2.x sooner or later. Therefore, I would like to write my code in a way that it says upward compatible.</p>\n\n<p>I was looking for some information, which puts together things, where Ruby <em>changes</em> its behaviour between the 1.9 and the 2.2 branch, but could not find any. I think I have to pay attention when processing files, because the way encoding is specified, might have changed. Also, I learned that 'each' (for Array) will have a different return value in 1.9 and 2.2. Is there anything else, which could bite me?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "logging", "log4r"], "comments": [{"owner": {"reputation": 4348, "user_id": 1239718, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1e0007c47fb11a12c8427a856187d48e?s=128&d=identicon&r=PG", "display_name": "shem", "link": "https://stackoverflow.com/users/1239718/shem"}, "edited": false, "score": 0, "creation_date": 1450866125, "post_id": 34433252, "comment_id": 56607632, "body": "Are you sure this is the pattern you use? It looks more like &#39;%d %p %t : %m&#39; am I right?"}, {"owner": {"reputation": 1336, "user_id": 2368386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/def0bf04ed6af586750332d26ca8d46d?s=128&d=identicon&r=PG", "display_name": "fudy", "link": "https://stackoverflow.com/users/2368386/fudy"}, "reply_to_user": {"reputation": 4348, "user_id": 1239718, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1e0007c47fb11a12c8427a856187d48e?s=128&d=identicon&r=PG", "display_name": "shem", "link": "https://stackoverflow.com/users/1239718/shem"}, "edited": false, "score": 0, "creation_date": 1450922686, "post_id": 34433252, "comment_id": 56634721, "body": "Checked, it&#39;s the pattern I use"}, {"owner": {"reputation": 4348, "user_id": 1239718, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1e0007c47fb11a12c8427a856187d48e?s=128&d=identicon&r=PG", "display_name": "shem", "link": "https://stackoverflow.com/users/1239718/shem"}, "edited": false, "score": 0, "creation_date": 1450940491, "post_id": 34433252, "comment_id": 56639152, "body": "Sorry, thought you&#39;re using log4j and not log4r. See my answer"}], "answers": [{"tags": [], "owner": {"reputation": 4348, "user_id": 1239718, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1e0007c47fb11a12c8427a856187d48e?s=128&d=identicon&r=PG", "display_name": "shem", "link": "https://stackoverflow.com/users/1239718/shem"}, "is_accepted": true, "score": 2, "last_activity_date": 1450940466, "creation_date": 1450940466, "answer_id": 34448657, "question_id": 34433252, "link": "https://stackoverflow.com/questions/34433252/ruby-on-rails-log-file-name-and-line-number/34448657#34448657", "title": "Ruby On Rails log file name and line number", "body": "<p>It doesn't show in the <a href=\"http://log4r.rubyforge.org/rdoc/Log4r/rdoc/patternformatter.html\" rel=\"nofollow\">documentation</a> but from looking at the <a href=\"https://github.com/colbygk/log4r/blob/master/lib/log4r/formatter/patternformatter.rb\" rel=\"nofollow\">code</a> you can see that you should replace \"t\" with \"T\" to get only the file name.</p>\n\n<p>The other option is to implement custom formatting like explained <a href=\"http://log4r.rubyforge.org/rdoc/Log4r/rdoc/formatter.html\" rel=\"nofollow\">here</a></p>\n"}], "owner": {"reputation": 1336, "user_id": 2368386, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/def0bf04ed6af586750332d26ca8d46d?s=128&d=identicon&r=PG", "display_name": "fudy", "link": "https://stackoverflow.com/users/2368386/fudy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 783, "favorite_count": 0, "accepted_answer_id": 34448657, "answer_count": 1, "score": 0, "last_activity_date": 1450940466, "creation_date": 1450865505, "last_edit_date": 1450922636, "question_id": 34433252, "link": "https://stackoverflow.com/questions/34433252/ruby-on-rails-log-file-name-and-line-number", "title": "Ruby On Rails log file name and line number", "body": "<p>Right now, I use log4r for logger in Rails to print file name and line number:</p>\n\n<pre><code>======== config/log4r.yml ========\n\nlog4r_config:\n  # define all loggers:\n  loggers:\n    - name          : rails\n      level         : DEBUG\n      trace         : 'true'\n      outputters    : \n      - console\n\n  # define all outputters (incl. formatters)\n  outputters:\n  - type: StdoutOutputter\n    name: console\n    formatter:\n      date_pattern: '%Y-%m-%d %H:%M:%S'\n      pattern     : '%d %l %t : %m'\n      type        : PatternFormatter\n</code></pre>\n\n<p>However it prints file path instead of filename, and it's too long:</p>\n\n<pre><code>2015-12-23 18:05:37 INFO /Users/fudy/Workspace/RubyWorkspace/HelloWorld/app/controllers/welcome_controller.rb:3: in `index' : hello\n</code></pre>\n\n<p>But I want this format:</p>\n\n<pre><code>2015-12-23 18:05:37 INFO welcome_controller.rb:3: hello\n</code></pre>\n\n<p>Is there any solution?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "http", "curl"], "comments": [{"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "edited": false, "score": 0, "creation_date": 1450874450, "post_id": 34433001, "comment_id": 56612673, "body": "How do you expect to receive an HTML response to a JSON request?"}], "answers": [{"tags": [], "owner": {"reputation": 1205, "user_id": 1216183, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/HNBsM.png?s=128&g=1", "display_name": "fabien-michel", "link": "https://stackoverflow.com/users/1216183/fabien-michel"}, "is_accepted": false, "score": 0, "last_activity_date": 1450866091, "creation_date": 1450866091, "answer_id": 34433448, "question_id": 34433001, "link": "https://stackoverflow.com/questions/34433001/how-to-get-data-in-ruby-controller-and-post-it-back-to-html/34433448#34433448", "title": "how to get data in ruby controller and post it back to html", "body": "<p>I thinks it because you do <code>POST</code> request in the first case whereas your routes files only match a <code>GET</code> request.\nSimple curl command without <code>--request POST</code> do a <code>GET</code> request by default.</p>\n\n<p>You have to change your <code>routes</code>file to match a <code>POST</code> request</p>\n\n<pre><code>resources :app_v1 do \n  collection do \n    post :view\n  end\nend  \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "edited": false, "score": 0, "creation_date": 1450879183, "post_id": 34437247, "comment_id": 56615409, "body": "@rack Let us know whether our solution work for you or not."}], "tags": [], "owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "is_accepted": true, "score": 0, "last_activity_date": 1450878948, "creation_date": 1450878948, "answer_id": 34437247, "question_id": 34433001, "link": "https://stackoverflow.com/questions/34433001/how-to-get-data-in-ruby-controller-and-post-it-back-to-html/34437247#34437247", "title": "how to get data in ruby controller and post it back to html", "body": "<p>It seems you have an issue with controller name I guess not Sure. But this solution work for me</p>\n\n<p><strong>1:</strong> Create controller <code>app/controllers/app_v1_controller.rb</code></p>\n\n<p><strong>2:</strong>   </p>\n\n<pre><code>class AppV1Controller &lt; ApplicationController\n  def view\n    @users = User.all\n  end\nend\n</code></pre>\n\n<p><strong>3:</strong>  </p>\n\n<pre><code>     resources :app_v1 do\n        collection do\n          get :view\n        end\n      end\n</code></pre>\n\n<p><code>curl http://localhost:3000/app_v1/view</code> </p>\n\n<h2>Return</h2>\n\n<hr>\n\n<blockquote>\n  <p>[{\"id\":1,\"first_name\":\"vinay\",\"last_name\":\"gupta\",\"email\":\"vgvinay2@gmail.com\",\"address\":\"bangamane\n  tech paerkjkm\"}]</p>\n</blockquote>\n\n<hr>\n\n<p><strong><code>curl --verbose --header \"Accept: application/json\" --header \"Content-type: application/json\" --request GET --data '{\"content\":\"meta data\"}' http://localhost:3000/app_v1/view</code></strong></p>\n\n<h2>Return</h2>\n\n<hr>\n\n<blockquote>\n  <p>json\" --request GET --data '{\"content\":\"meta data\"}'\n  <a href=\"http://localhost:3000/app_v1/view\" rel=\"nofollow\">http://localhost:3000/app_v1/view</a>\n  * Hostname was NOT found in DNS cache\n  *   Trying 127.0.0.1...\n  * Connected to localhost (127.0.0.1) port 3000 (#0)</p>\n  \n  <blockquote>\n    <p>GET /app_v1/view HTTP/1.1\n    User-Agent: curl/7.35.0\n    Host: localhost:3000\n    Accept: application/json\n    Content-type: application/json\n    Content-Length: 23</p>\n    \n    <ul>\n    <li>upload completely sent off: 23 out of 23 bytes &lt; HTTP/1.1 200 OK  &lt; X-Frame-Options: SAMEORIGIN &lt; X-Xss-Protection: 1; mode=block &lt;\n    X-Content-Type-Options: nosniff &lt; Content-Type: application/json;\n    charset=utf-8 &lt; Etag: W/\"01885a844e824dae54d6e0556099efe8\" &lt;\n    Cache-Control: max-age=0, private, must-revalidate &lt; X-Request-Id:\n    82e9634c-e2ef-489d-bc43-b2f4e8aacf4c &lt; X-Runtime: 0.007763</li>\n    <li>Server WEBrick/1.3.1 (Ruby/2.1.1/2014-02-24) is not blacklisted &lt; Server: WEBrick/1.3.1 (Ruby/2.1.1/2014-02-24) &lt; Date: Wed, 23 Dec 2015\n    13:54:34 GMT &lt; Content-Length: 116 &lt; Connection: Keep-Alive &lt; </li>\n    <li>Connection #0 to host localhost left intact [{\"id\":1,\"first_name\":\"vinay\",\"last_name\":\"gupta\",\"email\":\"vgvinay2@gmail.com\",\"address\":\"bangamane\n    tech paerkjkm\"}]</li>\n    </ul>\n  </blockquote>\n</blockquote>\n\n<hr>\n\n<p>Hope this help You !!!</p>\n"}], "owner": {"reputation": 23, "user_id": 5710593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d8b97790019ee60ca9180a20bb4e7ac?s=128&d=identicon&r=PG&f=1", "display_name": "rack koh", "link": "https://stackoverflow.com/users/5710593/rack-koh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 34437247, "answer_count": 2, "score": -1, "last_activity_date": 1450878948, "creation_date": 1450864784, "last_edit_date": 1450868241, "question_id": 34433001, "link": "https://stackoverflow.com/questions/34433001/how-to-get-data-in-ruby-controller-and-post-it-back-to-html", "title": "how to get data in ruby controller and post it back to html", "body": "<p>I want to call a ruby controller <code>app_v1</code> through <code>curl</code> command :</p>\n\n<p><code>curl --verbose --header \"Accept: application/json\" --header \"Content-type: application/json\" --request POST --data '{\"content\":\"meta data\"}' http://localhost:7000/app_v1/view</code></p>\n\n<p><code>routes</code> file has : </p>\n\n<pre><code>resources :app_v1 do \n  collection do \n    get :view\n  end\nend     \n</code></pre>\n\n<p>But I am facing error stating routing error but when i am not sending any data i.e. <code>curl http://localhost:7000/app_v1/view</code>  then the data which i want to display is been rendered</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1450864427, "post_id": 34432812, "comment_id": 56606565, "body": "Please use English punctuation when you write in English."}], "answers": [{"comments": [{"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1450864506, "post_id": 34432869, "comment_id": 56606625, "body": "you can directly <code>puts</code> array too. Here: <code>puts map.enemies.map(&amp;:name)</code>"}], "tags": [], "owner": {"reputation": 2070, "user_id": 1010826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d926cfe6638d33207f97dbd5a5103ba1?s=128&d=identicon&r=PG", "display_name": "Magnuss", "link": "https://stackoverflow.com/users/1010826/magnuss"}, "is_accepted": true, "score": 2, "last_activity_date": 1450866624, "last_edit_date": 1450866624, "creation_date": 1450864407, "answer_id": 34432869, "question_id": 34432812, "link": "https://stackoverflow.com/questions/34432812/how-to-access-attribute/34432869#34432869", "title": "How to access attribute", "body": "<p>If I understand your question correctly then:</p>\n\n<pre><code>map.enemies.each do |enemy|\n  puts enemy.name\nend\n</code></pre>\n\n<p>Return an array of names</p>\n\n<pre><code>puts map.enemies.map(&amp;:name)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1450874735, "post_id": 34435987, "comment_id": 56612839, "body": "The <i>proper</i> way would be to use special printer objects. But that&#39;s probably way too high OOP for this program :)"}, {"owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1450874797, "post_id": 34435987, "comment_id": 56612877, "body": "I am tempted to say the <i>Java</i> way, but yes. :-P"}], "tags": [], "owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "is_accepted": false, "score": 1, "last_activity_date": 1450889646, "last_edit_date": 1450889646, "creation_date": 1450874569, "answer_id": 34435987, "question_id": 34432812, "link": "https://stackoverflow.com/questions/34432812/how-to-access-attribute/34435987#34435987", "title": "How to access attribute", "body": "<p>You can define the method <code>to_s</code> in <code>Enemy</code>. This method is used when you <code>puts</code> an object:</p>\n\n<pre><code>class Enemy\n  ...\n  def to_s\n    @name\n  end\nend\n\nenemy = Enemy.new(\"foo\")\n\nputs enemy\n#=&gt; foo\n</code></pre>\n\n<p>To print the names of an <code>Array</code> of objects, you can then use <code>join</code> on the <code>Array</code>:</p>\n\n<pre><code>map = Map.new\n\nmap.enemies = [Enemy.new(\"foo\"), Enemy.new(\"bar\")]\n\nputs map.enemies.join(\", \")\n#=&gt; foo, bar\n</code></pre>\n\n<p>This has the benefit that the <code>Enemy</code> object now is responsible for knowing how it should be printed, rather than this behaviour being spread across the code that uses <code>Enemy</code>.</p>\n"}], "owner": {"reputation": 33, "user_id": 5546404, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-q4oVwIUJ0aw/AAAAAAAAAAI/AAAAAAAAAtc/ykLjHpVmKDM/photo.jpg?sz=128", "display_name": "TDX", "link": "https://stackoverflow.com/users/5546404/tdx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 34432869, "answer_count": 2, "score": 2, "last_activity_date": 1450889646, "creation_date": 1450864243, "question_id": 34432812, "link": "https://stackoverflow.com/questions/34432812/how-to-access-attribute", "title": "How to access attribute", "body": "<p>I want to put the name of the enemies (toto and titi). How can I do that ? </p>\n\n<p>My simplified code :</p>\n\n<pre><code>class Gamer\n  attr_accessor :name, ...\n  def initialize(name)\n    @name = name\n    ...\n  end\n  ...\nend\n\nclass Enemy &lt; Gamer\n  ...\nend\n\nclass Map\n  attr_accessor :enemies\n  ...\nend    \n##############\nmap = Map.new\nmap.enemies = [\n  Enemy.new(\"toto\"),\n  Enemy.new(\"titi\")\n]\n\nputs \"#{map.enemies}\"\n</code></pre>\n\n<p>I'm a beginner in Ruby</p>\n\n<p>return : </p>\n\n<pre><code>[#&lt;Gamer:0x000002e29da0 @name=\"toto\"&gt;, #&lt;Gamer:0x000002e29d50 @name=\"titi\"&gt;]\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1297, "user_id": 5042431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8VZqF.jpg?s=128&g=1", "display_name": "Charles", "link": "https://stackoverflow.com/users/5042431/charles"}, "edited": false, "score": 0, "creation_date": 1450914628, "post_id": 34432627, "comment_id": 56632859, "body": "Thanks for helping me discover that site."}], "answers": [{"tags": [], "owner": {"reputation": 2183, "user_id": 1200043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tr7dt.jpg?s=128&g=1", "display_name": "maniacalrobot", "link": "https://stackoverflow.com/users/1200043/maniacalrobot"}, "is_accepted": false, "score": 1, "last_activity_date": 1450863943, "creation_date": 1450863943, "answer_id": 34432721, "question_id": 34432627, "link": "https://stackoverflow.com/questions/34432627/arr-length-works-outside-a-loop-but-causes-an-error-inside-a-loop/34432721#34432721", "title": "`arr.length` works outside a loop but causes an error inside a loop", "body": "<p>you've reassigned to <code>arr</code> inside the loop, I assume the first pass through the loop has worked but on the second pass, <code>arr</code> is now an integer.</p>\n\n<p>You should use a different variable name that is uniq inside the loop</p>\n"}, {"tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": true, "score": 1, "last_activity_date": 1450863947, "creation_date": 1450863947, "answer_id": 34432723, "question_id": 34432627, "link": "https://stackoverflow.com/questions/34432627/arr-length-works-outside-a-loop-but-causes-an-error-inside-a-loop/34432723#34432723", "title": "`arr.length` works outside a loop but causes an error inside a loop", "body": "<p>You are reassigning <code>arr</code> as a <code>Fixnum</code> here: <code>arr = arr[i] - 2</code>. Hence the error</p>\n"}], "owner": {"reputation": 538, "user_id": 5593185, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/966652223394287/picture?type=large", "display_name": "Mike", "link": "https://stackoverflow.com/users/5593185/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 34432723, "answer_count": 2, "score": -1, "last_activity_date": 1450864745, "creation_date": 1450863680, "last_edit_date": 1450864745, "question_id": 34432627, "link": "https://stackoverflow.com/questions/34432627/arr-length-works-outside-a-loop-but-causes-an-error-inside-a-loop", "title": "`arr.length` works outside a loop but causes an error inside a loop", "body": "<p>I'm trying to complete a hackerrank challenge.When I try to use <code>puts arr.length</code> in the loop,</p>\n\n<pre><code>n = gets.strip.to_i\narr = gets.strip\narr = arr.split(' ').map(&amp;:to_i)\nn.times do |i|\n  puts arr.length\n  arr = arr[i] - 2\n  if arr[i] &lt;= 0\n    arr[i].delete\n  end\nend\n</code></pre>\n\n<p>I get an error:</p>\n\n<pre><code>!in `block in': undefined method `length' for 3:Fixnum (NoMethodError)\n</code></pre>\n\n<p>I don't understand it because <code>arr.length</code> works outside the loop. Why am I getting this error?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "filterrific"], "comments": [{"owner": {"reputation": 33, "user_id": 3014982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9adfbe4cbaed30ab5f5e73d384e39d1?s=128&d=identicon&r=PG", "display_name": "luksimir", "link": "https://stackoverflow.com/users/3014982/luksimir"}, "edited": false, "score": 0, "creation_date": 1450872389, "post_id": 34432448, "comment_id": 56611459, "body": "The documentation mentions, that this is possible, bud does not provide instructions on how to do it."}], "answers": [{"tags": [], "owner": {"reputation": 1443, "user_id": 4064922, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh4.googleusercontent.com/-2_1oNmjkoec/AAAAAAAAAAI/AAAAAAAAAXE/OTUcRfaAZeM/photo.jpg?sz=128", "display_name": "Aboozar Rajabi", "link": "https://stackoverflow.com/users/4064922/aboozar-rajabi"}, "is_accepted": false, "score": 0, "last_activity_date": 1460366230, "creation_date": 1460366230, "answer_id": 36544541, "question_id": 34432448, "link": "https://stackoverflow.com/questions/34432448/rails-filterrific-and-saved-searches/36544541#36544541", "title": "Rails Filterrific and saved searches", "body": "<p>You can implement a Search controller separately to save the search results. Follow the railscasts Advanced search form. It's clear and informative. And I think your final solution would be the mixture of that and Filterrific. </p>\n"}], "owner": {"reputation": 33, "user_id": 3014982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9adfbe4cbaed30ab5f5e73d384e39d1?s=128&d=identicon&r=PG", "display_name": "luksimir", "link": "https://stackoverflow.com/users/3014982/luksimir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 229, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1462906436, "creation_date": 1450863131, "question_id": 34432448, "link": "https://stackoverflow.com/questions/34432448/rails-filterrific-and-saved-searches", "title": "Rails Filterrific and saved searches", "body": "<p>i am trying to implement filterrific in my app, but i am finding it rather difficult. One thing is shortening my sleep and that is saved searches. Does anyone have any pointers on how to implement it.</p>\n\n<p>Best regards,\nLuka</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ajax", "ruby-on-rails-4", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 2537, "user_id": 5371321, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ZFyVo.jpg?s=128&g=1", "display_name": "Narasimha Reddy - Geeker", "link": "https://stackoverflow.com/users/5371321/narasimha-reddy-geeker"}, "is_accepted": true, "score": 2, "last_activity_date": 1450940883, "creation_date": 1450940883, "answer_id": 34448737, "question_id": 34432406, "link": "https://stackoverflow.com/questions/34432406/how-can-we-send-an-ajax-request-in-controller-integration-testing-rspec-ror/34448737#34448737", "title": "How can we send an AJAX request in controller integration testing rspec/ror?", "body": "<p>we can send request simply like <br></p>\n\n<pre><code> xhr 'get','[path_to_action]', delivery_method: :deliver, status: :pending, format: 'js'\n</code></pre>\n\n<p>here <code>xhr</code> is a rails request helpers method.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5710450"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 885, "favorite_count": 2, "accepted_answer_id": 34448737, "answer_count": 1, "score": 1, "last_activity_date": 1450940883, "creation_date": 1450862979, "last_edit_date": 1450867738, "question_id": 34432406, "link": "https://stackoverflow.com/questions/34432406/how-can-we-send-an-ajax-request-in-controller-integration-testing-rspec-ror", "title": "How can we send an AJAX request in controller integration testing rspec/ror?", "body": "<p>I am sending AJAX request in rspec controller test like following</p>\n\n<pre><code>it 'responds with success' do\n  xhr :get, :index, delivery_method: :deliver, status: :pending, format: 'js'\n  expect(response.status).to eq(200)\nend\n</code></pre>\n\n<p>but I have no clue how can I send same request in <code>Integration</code> testing.</p>\n"}, {"tags": ["ruby", "parsing", "plugins", "fluentd"], "owner": {"reputation": 30155, "user_id": 1373822, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b5122dbcd5bee4cf22a45fe68181eda0?s=128&d=identicon&r=PG", "display_name": "Amyth", "link": "https://stackoverflow.com/users/1373822/amyth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 858, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1466255685, "creation_date": 1450862450, "last_edit_date": 1450863762, "question_id": 34432257, "link": "https://stackoverflow.com/questions/34432257/fluentd-custom-parser-plugin-raises-uninitialized-constant-fluent-error", "title": "Fluentd custom parser plugin raises uninitialized constant Fluent error", "body": "<p>I am trying to implement a custom <a href=\"http://www.fluentd.org/\" rel=\"nofollow\">fluentd</a> parser plugin. As suggested in the <a href=\"http://docs.fluentd.org/articles/plugin-development#parser-plugins\" rel=\"nofollow\">docs</a>, I have created the following file called <code>parser_unordered_multiline.rb</code> and put it in the location <code>/etc/td-agent/plugin/</code>.</p>\n\n<pre><code># @Package:     Fluentd\n# @Module:      Unordered Multiline Parser Plugin\n# @Author:      Amyth Singh &lt;mail@amythsingh.com&gt;\n#\n#    Licensed under the Apache License, Version 2.0 (the \"License\");\n#    you may not use this file except in compliance with the License.\n#    You may obtain a copy of the License at\n#\n#        http://www.apache.org/licenses/LICENSE-2.0\n#\n#    Unless required by applicable law or agreed to in writing, software\n#    distributed under the License is distributed on an \"AS IS\" BASIS,\n#    WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n#    See the License for the specific language governing permissions and\n#    limitations under the License.\n\n\nmodule Fluent\n    class TextParser\n        class UnorderedMultilineParser &lt; Parser\n\n            Plugin.register_parser('unordered_multiline', self)\n\n            ## Define configuration params\n            config_param :delimiter, :string, :default =&gt; \" \"\n            config_param :time_format, :string, :default =&gt; nil\n\n            ## configures our parser plugin\n            def configure(conf)\n                super\n\n                if @delimiter.length != 1\n                    raise ConfigError, \"delimiter must be a single character. #{@delimiter} is not.\"\n                end\n\n                @time_parser = TimeParser.new(@time_format)\n            end\n\n\n            def parse(text)\n                time, key_values = text.split(\" \", 2)\n                time = @time_parser.parse(time)\n                record = {}\n                key_values.split(@delimiter).each { |kv|\n                    k, v = kv.split(\"=\", 2)\n                    record[k] = v\n                }\n\n                yield time, record\n\n            end\n        end\n    end\nend\n</code></pre>\n\n<p>I am using the same code given in the <a href=\"http://docs.fluentd.org/articles/plugin-development#parser-plugins\" rel=\"nofollow\">example in the documentation</a> (just with a different name) but the fluentd logs show the error:</p>\n\n<pre><code>unexpected error error=\"uninitialized constant Fluent::TextParser::Parser\"\n</code></pre>\n\n<p>Following is the full stack trace</p>\n\n<pre><code>2015-12-23 14:38:23 +0530 [info]: starting fluentd-0.10.50\n2015-12-23 14:38:23 +0530 [info]: reading config file path=\"/etc/td-agent/td-agent.conf\"\n2015-12-23 14:38:23 +0530 [error]: unexpected error error=\"uninitialized constant Fluent::TextParser::Parser\"\n  2015-12-23 14:38:23 +0530 [error]: /etc/td-agent/plugin/parser_unordered_multiline.rb:21:in `&lt;class:TextParser&gt;'\n  2015-12-23 14:38:23 +0530 [error]: /etc/td-agent/plugin/parser_unordered_multiline.rb:20:in `&lt;module:Fluent&gt;'\n  2015-12-23 14:38:23 +0530 [error]: /etc/td-agent/plugin/parser_unordered_multiline.rb:19:in `&lt;top (required)&gt;'\n  2015-12-23 14:38:23 +0530 [error]: /opt/td-agent/embedded/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n  2015-12-23 14:38:23 +0530 [error]: /opt/td-agent/embedded/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n  2015-12-23 14:38:23 +0530 [error]: /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.50/lib/fluent/plugin.rb:59:in `block in load_plugin_dir'\n  2015-12-23 14:38:23 +0530 [error]: /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.50/lib/fluent/plugin.rb:57:in `each'\n  2015-12-23 14:38:23 +0530 [error]: /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.50/lib/fluent/plugin.rb:57:in `load_plugin_dir'\n  2015-12-23 14:38:23 +0530 [error]: /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.50/lib/fluent/engine.rb:129:in `load_plugin_dir'\n  2015-12-23 14:38:23 +0530 [error]: /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.50/lib/fluent/supervisor.rb:369:in `block in init_engine'\n  2015-12-23 14:38:23 +0530 [error]: /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.50/lib/fluent/supervisor.rb:366:in `each'\n  2015-12-23 14:38:23 +0530 [error]: /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.50/lib/fluent/supervisor.rb:366:in `init_engine'\n  2015-12-23 14:38:23 +0530 [error]: /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.50/lib/fluent/supervisor.rb:129:in `block in start'\n  2015-12-23 14:38:23 +0530 [error]: /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.50/lib/fluent/supervisor.rb:246:in `call'\n  2015-12-23 14:38:23 +0530 [error]: /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.50/lib/fluent/supervisor.rb:246:in `main_process'\n  2015-12-23 14:38:23 +0530 [error]: /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.50/lib/fluent/supervisor.rb:221:in `block in supervise'\n  2015-12-23 14:38:23 +0530 [error]: /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.50/lib/fluent/supervisor.rb:220:in `fork'\n  2015-12-23 14:38:23 +0530 [error]: /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.50/lib/fluent/supervisor.rb:220:in `supervise'\n  2015-12-23 14:38:23 +0530 [error]: /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.50/lib/fluent/supervisor.rb:126:in `start'\n  2015-12-23 14:38:23 +0530 [error]: /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.50/lib/fluent/command/fluentd.rb:160:in `&lt;top (required)&gt;'\n  2015-12-23 14:38:23 +0530 [error]: /opt/td-agent/embedded/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n  2015-12-23 14:38:23 +0530 [error]: /opt/td-agent/embedded/lib/ruby/2.1.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n  2015-12-23 14:38:23 +0530 [error]: /opt/td-agent/embedded/lib/ruby/gems/2.1.0/gems/fluentd-0.10.50/bin/fluentd:6:in `&lt;top (required)&gt;'\n  2015-12-23 14:38:23 +0530 [error]: /opt/td-agent/embedded/bin/fluentd:23:in `load'\n  2015-12-23 14:38:23 +0530 [error]: /opt/td-agent/embedded/bin/fluentd:23:in `&lt;top (required)&gt;'\n  2015-12-23 14:38:23 +0530 [error]: /usr/sbin/td-agent:7:in `load'\n  2015-12-23 14:38:23 +0530 [error]: /usr/sbin/td-agent:7:in `&lt;main&gt;'\n2015-12-23 14:38:23 +0530 [info]: process finished code=256\n2015-12-23 14:38:23 +0530 [warn]: process died within 1 second. exit.\n</code></pre>\n\n<p>And this is how my configuration file looks like.</p>\n\n<pre><code>&lt;source&gt;\n    type tail\n    path /var/log/mail/mail*\n    pos_file /var/log/td-agent/tmp/access.log\n    exclude_path [\"/var/log/mail/*.gz\", \"/var/log/mail/*.zip\"]\n    read_from_head true\n    time_format %M %d %H:%M:%S\n    port 5140\n    format unordered_multiline\n    tag  mail\n&lt;/source&gt;\n\n\n&lt;match mail&gt;\n    type copy\n    &lt;store&gt;\n       type elasticsearch\n       logstash_format true\n       flush_interval 30s\n    &lt;/store&gt;\n&lt;/match&gt;\n</code></pre>\n\n<p>I am fairly new to ruby and fluentd, Can anybody tell me what this error is all about ?</p>\n\n<h2>update</h2>\n\n<p>According to the <a href=\"http://docs.fluentd.org/articles/plugin-management\" rel=\"nofollow\">plugin management docs</a>, even the path seems correct</p>\n"}, {"tags": ["ruby", "math", "integer"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1450862580, "post_id": 34432250, "comment_id": 56605508, "body": "Explain what those variables/methods are."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1450862642, "post_id": 34432250, "comment_id": 56605546, "body": "Share stack trace, at least few lines from top"}, {"owner": {"reputation": 833, "user_id": 3915892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/CMVW5.jpg?s=128&g=1", "display_name": "DanielsV", "link": "https://stackoverflow.com/users/3915892/danielsv"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1450862916, "post_id": 34432250, "comment_id": 56605688, "body": "@sawa <code>d.percent</code> and <code>d.shares</code> are percent and share count for each <code>box</code>. All are integers in DB. Local variables <code>percent</code> and <code>shares</code> are for counting everything together. Did I explain what you wanted?"}, {"owner": {"reputation": 2634, "user_id": 1210949, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/vAL35.jpg?s=128&g=1", "display_name": "Albin", "link": "https://stackoverflow.com/users/1210949/albin"}, "edited": false, "score": 0, "creation_date": 1450863262, "post_id": 34432250, "comment_id": 56605904, "body": "How do you create <code>@modification</code> and how does the <code>boxes</code> method look?"}, {"owner": {"reputation": 833, "user_id": 3915892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/CMVW5.jpg?s=128&g=1", "display_name": "DanielsV", "link": "https://stackoverflow.com/users/3915892/danielsv"}, "edited": false, "score": 0, "creation_date": 1450863426, "post_id": 34432250, "comment_id": 56606008, "body": "@modification is database table. and each modification has many boxes. So they both are DB tables."}], "answers": [{"tags": [], "owner": {"reputation": 1962, "user_id": 2945616, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/TL0yY.jpg?s=128&g=1", "display_name": "Atul Khanduri", "link": "https://stackoverflow.com/users/2945616/atul-khanduri"}, "is_accepted": true, "score": 3, "last_activity_date": 1450863458, "creation_date": 1450863458, "answer_id": 34432546, "question_id": 34432250, "link": "https://stackoverflow.com/questions/34432250/cant-sum-up-ruby-integers/34432546#34432546", "title": "Can&#39;t Sum up ruby integers", "body": "<p>Here is your problem:</p>\n\n<p>You are declaring <code>percent</code> and <code>shares</code> as <code>percent = 0, shares = 0</code>. This will create percent as <code>Array</code> with value <code>[0,0]</code>.\nRather declare both as <code>percent = 0; shares = 0</code>. (notice the semicolon instead of comma)</p>\n\n<pre><code>2.1.5 :042 &gt; percent = 0, shares = 0\n =&gt; [0, 0] \n2.1.5 :043 &gt; percent\n =&gt; [0, 0] \n2.1.5 :044 &gt; percent.class\n =&gt; Array \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1450869638, "creation_date": 1450869638, "answer_id": 34434530, "question_id": 34432250, "link": "https://stackoverflow.com/questions/34432250/cant-sum-up-ruby-integers/34434530#34434530", "title": "Can&#39;t Sum up ruby integers", "body": "<p>The assignment doesn't work as you expect:</p>\n\n<pre><code>percent = 0, shares = 0\n</code></pre>\n\n<p>because it is interpreted as:</p>\n\n<pre><code>percent = (0, (shares = 0))\n</code></pre>\n\n<p>which is equivalent to:</p>\n\n<pre><code>shares = 0\npercent = 0, shares\n</code></pre>\n\n<p>The last line <a href=\"http://ruby-doc.org/core-2.2.4/doc/syntax/assignment_rdoc.html#label-Implicit+Array+Assignment\" rel=\"nofollow\">implicitly creates an array</a>. You could also write:</p>\n\n<pre><code>shares = 0\npercent = [0, shares]\n</code></pre>\n\n<p>The \"fix\" is actually simple. You have to move the variables to the left-hand side and the values to the right-hand side:</p>\n\n<pre><code>percent, shares = 0, 0\n</code></pre>\n\n<p>This is called <a href=\"http://ruby-doc.org/core-2.2.4/doc/syntax/assignment_rdoc.html#label-Implicit+Array+Assignment\" rel=\"nofollow\">multiple assignment</a>.</p>\n\n<hr>\n\n<p>BTW, instead of looping yourself, you could also use <a href=\"http://api.rubyonrails.org/classes/Enumerable.html#method-i-sum\" rel=\"nofollow\"><code>sum</code></a>:</p>\n\n<pre><code>percent = @modification.boxes.sum(&amp;:percent)\nshares  = @modification.boxes.sum(&amp;:shares)\n</code></pre>\n"}], "owner": {"reputation": 833, "user_id": 3915892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/CMVW5.jpg?s=128&g=1", "display_name": "DanielsV", "link": "https://stackoverflow.com/users/3915892/danielsv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 34432546, "answer_count": 2, "score": 1, "last_activity_date": 1450869638, "creation_date": 1450862430, "last_edit_date": 1450862735, "question_id": 34432250, "link": "https://stackoverflow.com/questions/34432250/cant-sum-up-ruby-integers", "title": "Can&#39;t Sum up ruby integers", "body": "<p>I'm getting this error when trying to SUM up each <code>boxes.percent</code> into local variable <code>percent</code>.</p>\n\n<p>Here is error:</p>\n\n<blockquote>\n  <p>no implicit conversion of Fixnum into Array</p>\n</blockquote>\n\n<p>My code:</p>\n\n<pre><code>&lt;% percent = 0, shares = 0 %&gt;\n&lt;% @modification.boxes.each do |d|\n  percent = percent + d.percent #here is problem, at least rails told me that \n  shares = shares + d.shares  \nend %&gt;\n\n&lt;% unless percent == 100 %&gt;  \n  Total percent needs to be 100%!\n&lt;% end %&gt;\n\n&lt;% unless shares == @modification.entity.total_number %&gt; \n  Not correct number!\n&lt;% end %&gt;\n</code></pre>\n\n<p>Where is the problem? In database both <code>percent</code> and <code>shares</code> for boxes are integer.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "facebook"], "answers": [{"comments": [{"owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "edited": false, "score": 0, "creation_date": 1450865694, "post_id": 34433227, "comment_id": 56607338, "body": "Yup, I forget about methods added by assoc. Thanks again!!"}], "tags": [], "owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "is_accepted": true, "score": 1, "last_activity_date": 1450865445, "creation_date": 1450865445, "answer_id": 34433227, "question_id": 34432226, "link": "https://stackoverflow.com/questions/34432226/ruby-on-rails-omniauth-build-profile/34433227#34433227", "title": "Ruby on Rails omniauth build profile", "body": "<p>It seems that you are trying to override a method <code>buide_profile</code> which gives us <a href=\"http://guides.rubyonrails.org/association_basics.html#has-one-association-reference\" rel=\"nofollow\">Active Record Methods Added by has_one</a>.</p>\n\n<hr>\n\n<blockquote>\n  <p><strong><code>Methods Added by has_one</code></strong></p>\n  \n  <p>association(force_reload = false)</p>\n  \n  <p>association=(associate)</p>\n  \n  <p>build_association(attributes = {})</p>\n  \n  <p>create_association(attributes = {})</p>\n  \n  <p>create_association!(attributes = {})</p>\n</blockquote>\n\n<hr>\n\n<p>In your case you could re-write <code>from_omniauth</code> methods</p>\n\n<pre><code>  def self.from_omniauth(auth)\n\n    where(provider: auth.provider, uid: auth.uid).first_or_create do |user|\n      logger.info \"status=from_omniauth first_name=#{auth.info.first_name} first_last_name=#{auth.info.last_name}\"\n      user.email = auth.info.email\n      user.password = Devise.friendly_token[0,20]\n      user.build_profile(first_name: auth.info.first_name)\n      #user.name = auth.info.name   # assuming the user model has a name\n      #user.image = auth.info.image # assuming the user model has an image\n    end\n  end\n</code></pre>\n\n<p>Hope this help you!!!</p>\n"}], "owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 34433227, "answer_count": 1, "score": 0, "last_activity_date": 1461241364, "creation_date": 1450862337, "question_id": 34432226, "link": "https://stackoverflow.com/questions/34432226/ruby-on-rails-omniauth-build-profile", "title": "Ruby on Rails omniauth build profile", "body": "<p>I am using <code>facebook-omniauth</code> to authenticate user with Facebook. Everything works fine, except how can I build user <code>profile</code> table from extra fields that I receive from omniauth.</p>\n\n<p>The relationship <code>user</code> to <code>profile</code> is <code>has_one</code>, and <code>belongs_to</code> as vice versa.</p>\n\n<p>Following were my <code>OmniauthCallbacksController</code></p>\n\n<pre><code>class Users::OmniauthCallbacksController &lt; Devise::OmniauthCallbacksController\n    def facebook\n    # You need to implement the method below in your model (e.g. app/models/user.rb)\n    @user = User.from_omniauth(request.env[\"omniauth.auth\"])\n\n\n    if @user.persisted?\n      sign_in_and_redirect @user, :event =&gt; :authentication #this will throw if @user is not activated\n      set_flash_message(:notice, :success, :kind =&gt; \"Facebook\") if is_navigational_format?\n    else\n      session[\"devise.facebook_data\"] = request.env[\"omniauth.auth\"]\n      redirect_to new_user_registration_url\n    end\n  end\n\n  def failure\n    redirect_to root_path\n  end\nend\n</code></pre>\n\n<p>In my <code>user.rb</code> model</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable, :omniauthable, :omniauth_providers =&gt; [:facebook]\n\n  has_many :products\n  has_one :profile\n  has_one :store_setting\n  after_create :send_welcome_message\n  enum status: {\n    normal: 0,\n    merchant: 1\n  }\n\n  def self.from_omniauth(auth)\n\n        where(provider: auth.provider, uid: auth.uid).first_or_create do |user|\n      logger.info \"status=from_omniauth first_name=#{auth.info.first_name} first_last_name=#{auth.info.last_name}\"\n        user.email = auth.info.email\n        user.password = Devise.friendly_token[0,20]\n      user.build_profile(auth)\n        #user.name = auth.info.name   # assuming the user model has a name\n        #user.image = auth.info.image # assuming the user model has an image\n      end\n    end\n\n\n\n    def self.new_with_session(params, session)\n    super.tap do |user|\n      if data = session[\"devise.facebook_data\"] &amp;&amp; session[\"devise.facebook_data\"][\"extra\"][\"raw_info\"]\n        user.email = data[\"email\"] if user.email.blank?\n      end\n    end\n  end\n\n  def build_profile(auth)\n    self.Profile.new(first_name:auth.info.first_name) --&gt; not work!!\n  end\n\n  private\n\n  def send_welcome_message\n    UserMailer.welcome_message(self).deliver\n\n  end\n\n\nend\n</code></pre>\n\n<p>Thanks!!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "datagrid"], "answers": [{"comments": [{"owner": {"reputation": 363, "user_id": 5549118, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/1528435484134902/picture?type=large", "display_name": "Pirun Seng", "link": "https://stackoverflow.com/users/5549118/pirun-seng"}, "edited": false, "score": 0, "creation_date": 1450863481, "post_id": 34431732, "comment_id": 56606044, "body": "! Thanks for your answer. Anyway, I&#39;ve already tried that way as well but it doesn&#39;t help as I don&#39;t understand what they do something like: <code>def account     Account.find(account_id)   end</code>"}], "tags": [], "owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "is_accepted": false, "score": 1, "last_activity_date": 1450860425, "creation_date": 1450860425, "answer_id": 34431732, "question_id": 34431521, "link": "https://stackoverflow.com/questions/34431521/rails-how-to-loop-through-association-of-an-object-in-grid-class-which-is-usin/34431732#34431732", "title": "Rails - How to loop through association of an object in Grid class which is using DataGrid gem?", "body": "<p>you can try</p>\n\n<pre><code>dynamic do\n object.assocated_objects.each do |a_obj|\n   column(:myFieldName, html: true) do |object|\n     a_object.a_object_field\n   end\n end\nend\n</code></pre>\n\n<p>You can see more on <a href=\"https://github.com/bogdan/datagrid/wiki/Columns#dynamic-columns\" rel=\"nofollow\">Dynamic Columns</a> </p>\n"}], "owner": {"reputation": 363, "user_id": 5549118, "user_type": "registered", "accept_rate": 36, "profile_image": "https://graph.facebook.com/1528435484134902/picture?type=large", "display_name": "Pirun Seng", "link": "https://stackoverflow.com/users/5549118/pirun-seng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 186, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450862692, "creation_date": 1450859506, "last_edit_date": 1450862692, "question_id": 34431521, "link": "https://stackoverflow.com/questions/34431521/rails-how-to-loop-through-association-of-an-object-in-grid-class-which-is-usin", "title": "Rails - How to loop through association of an object in Grid class which is using DataGrid gem?", "body": "<p>I'm using <a href=\"https://github.com/bogdan/datagrid\" rel=\"nofollow\">DataGrid gem</a> to display data in table and it can be sorted. It works well with object's fields. My problem is that I want to display data of its associated object, but I cannot.</p>\n\n<p>I have tried something like:</p>\n\n<pre><code>column(:myFieldName, html: true) do |object|\n   object.assocated_objects.each do |a_obj|\n      a_object.a_object_field\n   end\nend\n</code></pre>\n\n<p>Unluckily, this doesn't work. It always returns associated_objects as collection of objects.</p>\n\n<p>Hope you can help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redirect", "testing", "minitest"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1450858763, "post_id": 34431359, "comment_id": 56603634, "body": "I think something is different between your controller test and manual testing in browser."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1450859147, "post_id": 34431359, "comment_id": 56603796, "body": "What is the content of the page that you get back with 200? Inspect it and it might lead you to a solution."}, {"owner": {"reputation": 2322, "user_id": 1445184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be110ccb289808429894c89202e4384b?s=128&d=identicon&r=PG", "display_name": "Lucas Caton", "link": "https://stackoverflow.com/users/1445184/lucas-caton"}, "edited": false, "score": 0, "creation_date": 1450861784, "post_id": 34431359, "comment_id": 56605070, "body": "Can you add your controller / action?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1450861880, "post_id": 34431359, "comment_id": 56605124, "body": "The source code of your test would help us to investigate an issue."}, {"owner": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "edited": false, "score": 0, "creation_date": 1450862151, "post_id": 34431359, "comment_id": 56605272, "body": "Are you doing the redirect via JavaScript?"}, {"owner": {"reputation": 1543, "user_id": 5521564, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-lVBHAGWG1UU/AAAAAAAAAAI/AAAAAAAAAyk/h3sPrDdtXjY/photo.jpg?sz=128", "display_name": "Matthias", "link": "https://stackoverflow.com/users/5521564/matthias"}, "edited": false, "score": 0, "creation_date": 1450870338, "post_id": 34431359, "comment_id": 56610223, "body": "Not sure how to diagnose what is the difference between the controller test and the manual test. How do I check to content of the 200 page? Just posted the controller action. No javascript."}], "answers": [{"comments": [{"owner": {"reputation": 1543, "user_id": 5521564, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-lVBHAGWG1UU/AAAAAAAAAAI/AAAAAAAAAyk/h3sPrDdtXjY/photo.jpg?sz=128", "display_name": "Matthias", "link": "https://stackoverflow.com/users/5521564/matthias"}, "edited": false, "score": 0, "creation_date": 1450937040, "post_id": 34439902, "comment_id": 56637984, "body": "Yes, I think that is what it is. I should not expect a redirect, as it is the controller action (create) and not the method login_in_as that initiates the redirect."}], "tags": [], "owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "is_accepted": true, "score": 2, "last_activity_date": 1450887932, "creation_date": 1450887932, "answer_id": 34439902, "question_id": 34431359, "link": "https://stackoverflow.com/questions/34431359/test-failure-expected-response-to-be-a-redirect-but-was-200/34439902#34439902", "title": "Test failure: Expected response to be a &lt;redirect&gt;, but was &lt;200&gt;", "body": "<p>You have a faulty test.</p>\n\n<p>This is what the code in your controller says:</p>\n\n<pre><code>if user &amp;&amp; user.authenticate(params[:session][:password])\n  redirect_back_or dashboard\nelse\n  render 'new' \nend\n\n# if user is not nil AND user can authenticate with given params\n  # success (redirect)\n# else the params passed to the controller did not authenticate the user\n  # fail (render 200)\n</code></pre>\n\n<p>Then your test says:</p>\n\n<pre><code>log_in_as(@user_one)\nassert_redirected_to dashboard_url\n\n# login user manually, rather than assign params\n# check if the controller action redirected, meaning check if it could authenticate with the given params that you did not assign\n</code></pre>\n\n<p>See the problem? You need to set the params that the controller action is checking if you want it to pass the <code>if</code> statement. </p>\n"}], "owner": {"reputation": 1543, "user_id": 5521564, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-lVBHAGWG1UU/AAAAAAAAAAI/AAAAAAAAAyk/h3sPrDdtXjY/photo.jpg?sz=128", "display_name": "Matthias", "link": "https://stackoverflow.com/users/5521564/matthias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1143, "favorite_count": 0, "accepted_answer_id": 34439902, "answer_count": 1, "score": 0, "last_activity_date": 1451333640, "creation_date": 1450858668, "last_edit_date": 1451333640, "question_id": 34431359, "link": "https://stackoverflow.com/questions/34431359/test-failure-expected-response-to-be-a-redirect-but-was-200", "title": "Test failure: Expected response to be a &lt;redirect&gt;, but was &lt;200&gt;", "body": "<p>I'm a newbie to rails and starting with setting up my first testing suite.</p>\n\n<p>In my tests I keep getting the following failure:</p>\n\n<pre><code>Expected response to be a &lt;redirect&gt;, but was &lt;200&gt;\n</code></pre>\n\n<p>This response is odd, as the redirect clearly works when testing using the browser. Does anyone have an idea what could be going on here, or what is the best approach in diagnosing such problem. For example, is there a way to find out on what page the 200 message was given.</p>\n\n<p>The test script (user_controller_test.rb)</p>\n\n<pre><code>test \"when correct should redirect to dashboard\" do\n    log_in_as(@user_one)\n    assert_redirected_to dashboard_url\nend \n</code></pre>\n\n<p>The full console message</p>\n\n<pre><code> FAIL[\"test_should_get_dashboard_when_correct_user\", UsersControllerTest, 2015-12-23 18:06:20 +1100]\n test_should_get_dashboard_when_correct_user#UsersControllerTest (1450854380.57s)\nExpected response to be a &lt;redirect&gt;, but was &lt;200&gt;\ntest/controllers/users_controller_test.rb:27:in `block in &lt;class:UsersControllerTest&gt;'\n</code></pre>\n\n<p>The controller:</p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n\ndef create\n    user = User.find_by(email: params[:session][:email].downcase)\n    if user &amp;&amp; user.authenticate(params[:session][:password])\n\n          log_in user         \n          params[:session][:remember_me] == '1' ? remember(user) : forget(user)\n          redirect_back_or dashboard\n     else\n      flash.now[:danger] = 'Invalid email/password combination'\n      render 'new' \n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 923, "user_id": 703108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcfb8b5751aea66a06beb71034ddc602?s=128&d=identicon&r=PG", "display_name": "phylae", "link": "https://stackoverflow.com/users/703108/phylae"}, "edited": false, "score": 0, "creation_date": 1476500716, "post_id": 34431219, "comment_id": 67384723, "body": "I believe this is a duplicate of <a href=\"http://stackoverflow.com/questions/29583303/how-to-set-a-ruby-on-rails-4-apps-default-db-isolation-level\" title=\"how to set a ruby on rails 4 apps default db isolation level\">stackoverflow.com/questions/29583303/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 81552, "user_id": 562459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/V3UR9.png?s=128&g=1", "display_name": "Mike Sherrill &#39;Cat Recall&#39;", "link": "https://stackoverflow.com/users/562459/mike-sherrill-cat-recall"}, "edited": false, "score": 0, "creation_date": 1450928201, "post_id": 34431789, "comment_id": 56635833, "body": "You can also set the default transaction isolation level for the database server. Edit postgresql.conf; look for default_transaction_isolation. This affects all databases under that server. On the one hand, you can&#39;t get much more global than that. On the other hand, changing this setting isn&#39;t for most people."}], "tags": [], "owner": {"reputation": 2070, "user_id": 1010826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d926cfe6638d33207f97dbd5a5103ba1?s=128&d=identicon&r=PG", "display_name": "Magnuss", "link": "https://stackoverflow.com/users/1010826/magnuss"}, "is_accepted": true, "score": 4, "last_activity_date": 1451289931, "last_edit_date": 1451289931, "creation_date": 1450860627, "answer_id": 34431789, "question_id": 34431219, "link": "https://stackoverflow.com/questions/34431219/how-do-i-set-the-isolation-level-of-all-my-rails-transactions/34431789#34431789", "title": "How do I set the isolation level of all my rails transactions", "body": "<p><strike>There does not seem to be a global isolation option</strike>, thus you are left with four options:</p>\n\n<ol>\n<li>Monkeypatch existing <code>transaction</code> implementation, so that it picks\nyour desired isolation level. (Monkeypatching is not desirable)</li>\n<li><p>Use correct <code>isolation</code> level throughout your application. </p>\n\n<p><code>SomeModel.transaction(isolation: :read_committed)</code></p></li>\n<li><p>Extend <code>ActiveRecord</code> and create your own custom transaction method.</p></li>\n<li><p>As commented - you may be able to edit the default isolation level in DB configuration. For postgres it's <a href=\"http://www.postgresql.org/docs/9.2/static/runtime-config-client.html#GUC-DEFAULT-TRANSACTION-ISOLATION\" rel=\"nofollow\">this one</a></p></li>\n</ol>\n\n<p>Example code:</p>\n\n<pre><code>#lib/activerecord_extension.rb\nmodule ActiveRecordExtension\n  extend ActiveSupport::Concern\n\n  module ClassMethods\n    def custom_transaction\n      transaction(isolation: :read_committed) do\n        yield\n      end\n    end\n  end\nend\n\nActiveRecord::Base.send(:include, ActiveRecordExtension)\n</code></pre>\n\n<p>Then in your initializers:</p>\n\n<pre><code>#config/initializers/activerecord_extension.rb\nrequire \"active_record_extension\"\n</code></pre>\n\n<p>Afterwards you can use:</p>\n\n<pre><code>MyModel.custom_transaction do\n  &lt;...&gt;\nend\n</code></pre>\n\n<p>And in the future, this will allow you to change the isolation level in one place.</p>\n"}, {"tags": [], "owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "is_accepted": false, "score": 2, "last_activity_date": 1450862013, "last_edit_date": 1495542183, "creation_date": 1450862013, "answer_id": 34432139, "question_id": 34431219, "link": "https://stackoverflow.com/questions/34431219/how-do-i-set-the-isolation-level-of-all-my-rails-transactions/34432139#34432139", "title": "How do I set the isolation level of all my rails transactions", "body": "<p>Rails doesn't support setting a global isolation level, but Postgres lets you set one for a session. You can hook into Rails' connection establishment to run a command every time a connection is made, thought the techniques for this all rely on monkeypatching and may be questionable.</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/29224331/run-raw-sql-in-rails-after-connecting-to-database\">Run Raw SQL in Rails after connecting to Database</a></li>\n<li><a href=\"https://stackoverflow.com/questions/18318873/can-i-hook-into-activerecord-connection-establishment\">Can I hook into ActiveRecord connection establishment?</a></li>\n</ul>\n\n<p>Then configure your isolation level with:</p>\n\n<pre><code>SET SESSION CHARACTERISTICS AS TRANSACTION transaction_mode\n</code></pre>\n\n<p>Though this is interesting, I'd go with something more like <a href=\"https://stackoverflow.com/a/34431789/802618\">Magnuss's answer</a> for maintainability and sanity.</p>\n"}], "owner": {"reputation": 708, "user_id": 336893, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/6776cd02cf0e246a317291481321043f?s=128&d=identicon&r=PG", "display_name": "WhiteTiger", "link": "https://stackoverflow.com/users/336893/whitetiger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 880, "favorite_count": 0, "accepted_answer_id": 34431789, "answer_count": 2, "score": 1, "last_activity_date": 1451289931, "creation_date": 1450858037, "question_id": 34431219, "link": "https://stackoverflow.com/questions/34431219/how-do-i-set-the-isolation-level-of-all-my-rails-transactions", "title": "How do I set the isolation level of all my rails transactions", "body": "<p>I'm using RoR version 4.2.3, and I understand I can set the isolation level of my transactions. However, where do I define setting the isolation level of all transactions? so I only have to define it once and then not worry about it?</p>\n\n<p>I'm using postgreSQL as my database</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1450857815, "post_id": 34431112, "comment_id": 56603259, "body": "Define &quot;having trouble with the rest&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 5703238, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d92954b0220a4a361c40431ae87ab63?s=128&d=identicon&r=PG&f=1", "display_name": "Suda", "link": "https://stackoverflow.com/users/5703238/suda"}, "edited": false, "score": 0, "creation_date": 1450861179, "post_id": 34431242, "comment_id": 56604764, "body": "Thank you very much. It works. When I pass &quot;created_at&quot;, I want to show like 2015/12/21 08:53 in the view. Normally, I would do like   <code>created_at.in_time_zone(&#39;Tokyo&#39;).strftime(&quot;%Y&#47;%m&#47;%d %H:%M&quot;)</code>  But how can I apply those method into this?"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 25, "user_id": 5703238, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d92954b0220a4a361c40431ae87ab63?s=128&d=identicon&r=PG&f=1", "display_name": "Suda", "link": "https://stackoverflow.com/users/5703238/suda"}, "edited": false, "score": 0, "creation_date": 1450861986, "post_id": 34431242, "comment_id": 56605181, "body": "@Suda : <code>#{rest.map{|x| x[:created_at].in_time_zone(&#39;Tokyo&#39;).strftime(&#39;%Y&#47;%m&#47;%d %H:%M&#39;)}.join(&#39;, &#39;)}&quot; </code> will work for you"}], "tags": [], "owner": {"reputation": 42085, "user_id": 3444240, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/OjOru.jpg?s=128&g=1", "display_name": "potashin", "link": "https://stackoverflow.com/users/3444240/potashin"}, "is_accepted": true, "score": 4, "last_activity_date": 1450858150, "creation_date": 1450858150, "answer_id": 34431242, "question_id": 34431112, "link": "https://stackoverflow.com/questions/34431112/passing-data-from-db-to-view/34431242#34431242", "title": "Passing data from DB to view", "body": "<p>You can try something like this:</p>\n\n<pre><code>&lt;% site.group_by(&amp;:url).each do |url, rest| %&gt;\n   &lt;%= \"#{url}: #{rest.map{|x| x[:created_at]}.join(', ')}\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 5703238, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4d92954b0220a4a361c40431ae87ab63?s=128&d=identicon&r=PG&f=1", "display_name": "Suda", "link": "https://stackoverflow.com/users/5703238/suda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 34431242, "answer_count": 1, "score": 0, "last_activity_date": 1450860952, "creation_date": 1450857491, "last_edit_date": 1450860952, "question_id": 34431112, "link": "https://stackoverflow.com/questions/34431112/passing-data-from-db-to-view", "title": "Passing data from DB to view", "body": "<p>I have database which has site_url column, and created_at column such as</p>\n\n<pre><code>id  url  created_at\n1   foo  2015-12-21\n2   bar  2015-12-23\n3   foo  2015-12-24\n4   baz  2015-12-25\n5   bar  2015-12-26\n</code></pre>\n\n<p>And I want to pass these data to view so that I can display when url is created by each url.</p>\n\n<p>For now, I extracted data as follows</p>\n\n<pre><code>site = Model.all\neach_site = site.group_by(&amp;:url)\n</code></pre>\n\n<p>By doing this, I got a hash such as </p>\n\n<pre><code>{\"foo\" =&gt; [id: 1, url: \"foo\", created_at: \"2015-12-21\"], \"bar\" =&gt;[\u2026]}\n</code></pre>\n\n<p>Am I in the right track?</p>\n\n<p>In the end, I want to do in a view like</p>\n\n<pre><code>foo: 2015-12-21, 2015-12-24\nbar: 2015-12-23, 2015-12-26\nbaz: 2015-12-25\n</code></pre>\n\n<p>How can I pass the data to achieve this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5710209, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eHiCmdhf7-Y/AAAAAAAAAAI/AAAAAAAAAAA/aL_sBvEyKvQ/photo.jpg?sz=128", "display_name": "Navin AS", "link": "https://stackoverflow.com/users/5710209/navin-as"}, "edited": false, "score": 0, "creation_date": 1450865048, "post_id": 34432205, "comment_id": 56606932, "body": "No still same error, if i add or not the sass-rails will be as dependency right?"}, {"owner": {"reputation": 1, "user_id": 5710209, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eHiCmdhf7-Y/AAAAAAAAAAI/AAAAAAAAAAA/aL_sBvEyKvQ/photo.jpg?sz=128", "display_name": "Navin AS", "link": "https://stackoverflow.com/users/5710209/navin-as"}, "edited": false, "score": 0, "creation_date": 1450865157, "post_id": 34432205, "comment_id": 56606996, "body": "also meta-search is not used in active admin they have moved to ransack"}, {"owner": {"reputation": 2322, "user_id": 1445184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be110ccb289808429894c89202e4384b?s=128&d=identicon&r=PG", "display_name": "Lucas Caton", "link": "https://stackoverflow.com/users/1445184/lucas-caton"}, "reply_to_user": {"reputation": 1, "user_id": 5710209, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eHiCmdhf7-Y/AAAAAAAAAAI/AAAAAAAAAAA/aL_sBvEyKvQ/photo.jpg?sz=128", "display_name": "Navin AS", "link": "https://stackoverflow.com/users/5710209/navin-as"}, "edited": false, "score": 0, "creation_date": 1450865387, "post_id": 34432205, "comment_id": 56607157, "body": "You&#39;re right, as sass-rails is a dependency, it should behave the same way. Regarding <code>meta-search</code>, the documentation looks to be out of date. What happens if you clear assets (<code>bundle exec rake assets:clean</code>) first?"}, {"owner": {"reputation": 1, "user_id": 5710209, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eHiCmdhf7-Y/AAAAAAAAAAI/AAAAAAAAAAA/aL_sBvEyKvQ/photo.jpg?sz=128", "display_name": "Navin AS", "link": "https://stackoverflow.com/users/5710209/navin-as"}, "edited": false, "score": 0, "creation_date": 1450871312, "post_id": 34432205, "comment_id": 56610817, "body": "bundle exec rake assets:clean running without any error"}], "tags": [], "owner": {"reputation": 2322, "user_id": 1445184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be110ccb289808429894c89202e4384b?s=128&d=identicon&r=PG", "display_name": "Lucas Caton", "link": "https://stackoverflow.com/users/1445184/lucas-caton"}, "is_accepted": false, "score": 0, "last_activity_date": 1450862211, "creation_date": 1450862211, "answer_id": 34432205, "question_id": 34431104, "link": "https://stackoverflow.com/questions/34431104/active-admin-sass-compile-error/34432205#34432205", "title": "active admin sass compile error", "body": "<p>According to ActiveAdmin's <a href=\"http://activeadmin.info/docs/documentation.html\" rel=\"nofollow\">documentation</a>, you must include <code>sass-rails</code> to your <code>Gemfile</code> (as well as <code>MetaSearch</code>):</p>\n\n<pre><code># Gemfile\ngem 'activeadmin'\ngem 'sass-rails'\ngem 'meta_search'\n</code></pre>\n\n<p>Hope it helps!</p>\n"}], "owner": {"reputation": 1, "user_id": 5710209, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-eHiCmdhf7-Y/AAAAAAAAAAI/AAAAAAAAAAA/aL_sBvEyKvQ/photo.jpg?sz=128", "display_name": "Navin AS", "link": "https://stackoverflow.com/users/5710209/navin-as"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 356, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450862211, "creation_date": 1450857475, "question_id": 34431104, "link": "https://stackoverflow.com/questions/34431104/active-admin-sass-compile-error", "title": "active admin sass compile error", "body": "<p>I don't use Sass in my rails application, after adding active admin it adds sass as dependencie to my rails application. Now I run <code>RAILS_ENV=production rake assets:precompile --trace</code> , it throws the error</p>\n\n<pre><code>rake aborted! NoMethodError: undefined method [] for nil:NilClass\n</code></pre>\n\n<p>I am attaching my Gemlock file here. and this is my active_admin.css.scss file</p>\n\n<pre><code>@import \"active_admin/mixins\"; @import \"active_admin/base\";\n</code></pre>\n\n\n\n<pre class=\"lang-html prettyprint-override\"><code>GEM\n  remote: https://rubygems.org/\n  specs:\n    actionmailer (4.2.4)\n      actionpack (= 4.2.4)\n      actionview (= 4.2.4)\n      activejob (= 4.2.4)\n      mail (~&gt; 2.5, &gt;= 2.5.4)\n      rails-dom-testing (~&gt; 1.0, &gt;= 1.0.5)\n    actionpack (4.2.4)\n      actionview (= 4.2.4)\n      activesupport (= 4.2.4)\n      rack (~&gt; 1.6)\n      rack-test (~&gt; 0.6.2)\n      rails-dom-testing (~&gt; 1.0, &gt;= 1.0.5)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.2)\n    actionview (4.2.4)\n      activesupport (= 4.2.4)\n      builder (~&gt; 3.1)\n      erubis (~&gt; 2.7.0)\n      rails-dom-testing (~&gt; 1.0, &gt;= 1.0.5)\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.2)\n    activeadmin (1.0.0.pre2)\n      arbre (~&gt; 1.0, &gt;= 1.0.2)\n      bourbon\n      coffee-rails\n      formtastic (~&gt; 3.1)\n      formtastic_i18n\n      inherited_resources (~&gt; 1.6)\n      jquery-rails\n      jquery-ui-rails\n      kaminari (~&gt; 0.15)\n      rails (&gt;= 3.2, &lt; 5.0)\n      ransack (~&gt; 1.3)\n      sass-rails\n    activejob (4.2.4)\n      activesupport (= 4.2.4)\n      globalid (&gt;= 0.3.0)\n    activemodel (4.2.4)\n      activesupport (= 4.2.4)\n      builder (~&gt; 3.1)\n    activerecord (4.2.4)\n      activemodel (= 4.2.4)\n      activesupport (= 4.2.4)\n      arel (~&gt; 6.0)\n    activesupport (4.2.4)\n      i18n (~&gt; 0.7)\n      json (~&gt; 1.7, &gt;= 1.7.7)\n      minitest (~&gt; 5.1)\n      thread_safe (~&gt; 0.3, &gt;= 0.3.4)\n      tzinfo (~&gt; 1.1)\n    arbre (1.0.3)\n      activesupport (&gt;= 3.0.0)\n    arel (6.0.3)\n    bcrypt (3.1.10)\n    bootstrap_flash_messages (1.0.2)\n    bourbon (4.2.6)\n      sass (~&gt; 3.4)\n      thor (~&gt; 0.19)\n    builder (3.2.2)\n    climate_control (0.0.3)\n      activesupport (&gt;= 3.0)\n    clndr-rails (1.2.10.1)\n      jquery-rails\n      momentjs-rails\n      rails (~&gt; 4.2.0)\n      railties (~&gt; 4.2.0)\n      underscore-rails\n    cocaine (0.5.7)\n      climate_control (&gt;= 0.0.3, &lt; 1.0)\n    coffee-rails (4.1.0)\n      coffee-script (&gt;= 2.2.0)\n      railties (&gt;= 4.0.0, &lt; 5.0)\n    coffee-script (2.4.1)\n      coffee-script-source\n      execjs\n    coffee-script-source (1.9.1.1)\n    content_for_in_controllers (0.0.2)\n    daemons (1.2.3)\n    devise (3.5.3)\n      bcrypt (~&gt; 3.0)\n      orm_adapter (~&gt; 0.1)\n      railties (&gt;= 3.2.6, &lt; 5)\n      responders\n      thread_safe (~&gt; 0.1)\n      warden (~&gt; 1.2.3)\n    erubis (2.7.0)\n    eventmachine (1.0.8)\n    execjs (2.6.0)\n    faraday (0.9.2)\n      multipart-post (&gt;= 1.2, &lt; 3)\n    font-awesome-rails (4.5.0.0)\n      railties (&gt;= 3.2, &lt; 5.0)\n    foreman (0.78.0)\n      thor (~&gt; 0.19.1)\n    formtastic (3.1.3)\n      actionpack (&gt;= 3.2.13)\n    formtastic_i18n (0.4.1)\n    globalid (0.3.6)\n      activesupport (&gt;= 4.1.0)\n    has_scope (0.6.0)\n      actionpack (&gt;= 3.2, &lt; 5)\n      activesupport (&gt;= 3.2, &lt; 5)\n    i18n (0.7.0)\n    inherited_resources (1.6.0)\n      actionpack (&gt;= 3.2, &lt; 5)\n      has_scope (~&gt; 0.6.0.rc)\n      railties (&gt;= 3.2, &lt; 5)\n      responders\n    jquery-rails (4.0.5)\n      rails-dom-testing (~&gt; 1.0)\n      railties (&gt;= 4.2.0)\n      thor (&gt;= 0.14, &lt; 2.0)\n    jquery-turbolinks (2.1.0)\n      railties (&gt;= 3.1.0)\n      turbolinks\n    jquery-ui-rails (5.0.5)\n      railties (&gt;= 3.2.16)\n    json (1.8.3)\n    jwt (1.5.2)\n    kaminari (0.16.3)\n      actionpack (&gt;= 3.0.0)\n      activesupport (&gt;= 3.0.0)\n    kgio (2.10.0)\n    libv8 (3.16.14.7)\n    loofah (2.0.3)\n      nokogiri (&gt;= 1.5.9)\n    mail (2.6.3)\n      mime-types (&gt;= 1.16, &lt; 3)\n    mime-types (2.6.2)\n    mimemagic (0.3.0)\n    mini_portile (0.6.2)\n    minitest (5.8.2)\n    momentjs-rails (2.10.6)\n      railties (&gt;= 3.1)\n    multi_json (1.11.2)\n    multi_xml (0.5.5)\n    multipart-post (2.0.0)\n    nokogiri (1.6.6.2)\n      mini_portile (~&gt; 0.6.0)\n    oauth (0.4.7)\n    oauth2 (1.0.0)\n      faraday (&gt;= 0.8, &lt; 0.10)\n      jwt (~&gt; 1.0)\n      multi_json (~&gt; 1.3)\n      multi_xml (~&gt; 0.5)\n      rack (~&gt; 1.2)\n    orm_adapter (0.5.0)\n    paperclip (4.3.1)\n      activemodel (&gt;= 3.2.0)\n      activesupport (&gt;= 3.2.0)\n      cocaine (~&gt; 0.5.5)\n      mime-types\n      mimemagic (= 0.3.0)\n    polyamorous (1.3.0)\n      activerecord (&gt;= 3.0)\n    rack (1.6.4)\n    rack-test (0.6.3)\n      rack (&gt;= 1.0)\n    rails (4.2.4)\n      actionmailer (= 4.2.4)\n      actionpack (= 4.2.4)\n      actionview (= 4.2.4)\n      activejob (= 4.2.4)\n      activemodel (= 4.2.4)\n      activerecord (= 4.2.4)\n      activesupport (= 4.2.4)\n      bundler (&gt;= 1.3.0, &lt; 2.0)\n      railties (= 4.2.4)\n      sprockets-rails\n    rails-deprecated_sanitizer (1.0.3)\n      activesupport (&gt;= 4.2.0.alpha)\n    rails-dom-testing (1.0.7)\n      activesupport (&gt;= 4.2.0.beta, &lt; 5.0)\n      nokogiri (~&gt; 1.6.0)\n      rails-deprecated_sanitizer (&gt;= 1.0.1)\n    rails-html-sanitizer (1.0.2)\n      loofah (~&gt; 2.0)\n    railties (4.2.4)\n      actionpack (= 4.2.4)\n      activesupport (= 4.2.4)\n      rake (&gt;= 0.8.7)\n      thor (&gt;= 0.18.1, &lt; 2.0)\n    raindrops (0.15.0)\n    rake (10.4.2)\n    ransack (1.7.0)\n      actionpack (&gt;= 3.0)\n      activerecord (&gt;= 3.0)\n      activesupport (&gt;= 3.0)\n      i18n\n      polyamorous (~&gt; 1.2)\n    ref (1.0.5)\n    responders (2.1.1)\n      railties (&gt;= 4.2.0, &lt; 5.1)\n    sass (3.4.20)\n    sass-rails (5.0.4)\n      railties (&gt;= 4.0.0, &lt; 5.0)\n      sass (~&gt; 3.1)\n      sprockets (&gt;= 2.8, &lt; 4.0)\n      sprockets-rails (&gt;= 2.0, &lt; 4.0)\n      tilt (&gt;= 1.1, &lt; 3)\n    sorcery (0.9.1)\n      bcrypt (~&gt; 3.1)\n      oauth (~&gt; 0.4, &gt;= 0.4.4)\n      oauth2 (&gt;= 0.8.0)\n    spring (1.4.0)\n    sprockets (3.4.0)\n      rack (&gt; 1, &lt; 3)\n    sprockets-rails (2.3.3)\n      actionpack (&gt;= 3.0)\n      activesupport (&gt;= 3.0)\n      sprockets (&gt;= 2.8, &lt; 4.0)\n    sqlite3 (1.3.11)\n    therubyracer (0.12.2)\n      libv8 (~&gt; 3.16.14.0)\n      ref\n    thin (1.6.4)\n      daemons (~&gt; 1.0, &gt;= 1.0.9)\n      eventmachine (~&gt; 1.0, &gt;= 1.0.4)\n      rack (~&gt; 1.0)\n    thor (0.19.1)\n    thread_safe (0.3.5)\n    tilt (2.0.1)\n    turbolinks (2.5.3)\n      coffee-rails\n    tzinfo (1.2.2)\n      thread_safe (~&gt; 0.1)\n    uglifier (2.7.2)\n      execjs (&gt;= 0.3.0)\n      json (&gt;= 1.8.0)\n    underscore-rails (1.8.3)\n    unicorn (5.0.1)\n      kgio (~&gt; 2.6)\n      rack\n      raindrops (~&gt; 0.7)\n    warden (1.2.4)\n      rack (&gt;= 1.0)\n    will_paginate (3.0.7)\n    will_paginate-bootstrap (1.0.1)\n      will_paginate (&gt;= 3.0.3)\n\nPLATFORMS\n  ruby\n\nDEPENDENCIES\n  activeadmin\n  bootstrap_flash_messages (~&gt; 1.0.1)\n  clndr-rails\n  content_for_in_controllers\n  devise\n  font-awesome-rails\n  foreman\n  jquery-rails\n  jquery-turbolinks\n  paperclip\n  rails (= 4.2.4)\n  sorcery\n  spring\n  sprockets\n  sqlite3\n  therubyracer\n  thin\n  turbolinks\n  uglifier (&gt;= 1.3.0)\n  underscore-rails\n  unicorn\n  will_paginate-bootstrap\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "zsh", "rbenv", "osx-elcapitan"], "answers": [{"comments": [{"owner": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "edited": false, "score": 0, "creation_date": 1450860069, "post_id": 34431578, "comment_id": 56604199, "body": "The lesson here is not to mix RVM and rbenv."}, {"owner": {"reputation": 6190, "user_id": 1944784, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/dd8b3d0343bf4c734ebbd7a18e2a9fe0?s=128&d=identicon&r=PG&f=1", "display_name": "4ae1e1", "link": "https://stackoverflow.com/users/1944784/4ae1e1"}, "edited": false, "score": 0, "creation_date": 1450868248, "post_id": 34431578, "comment_id": 56608942, "body": "You shouldn&#39;t set your RVM paths like that to begin with."}, {"owner": {"reputation": 597, "user_id": 1091745, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3014027f6f3d4df4047514b999e1bd66?s=128&d=identicon&r=PG", "display_name": "tdlm", "link": "https://stackoverflow.com/users/1091745/tdlm"}, "edited": false, "score": 0, "creation_date": 1450896930, "post_id": 34431578, "comment_id": 56625562, "body": "Good to know. Hope it helps someone else."}], "tags": [], "owner": {"reputation": 597, "user_id": 1091745, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3014027f6f3d4df4047514b999e1bd66?s=128&d=identicon&r=PG", "display_name": "tdlm", "link": "https://stackoverflow.com/users/1091745/tdlm"}, "is_accepted": false, "score": 0, "last_activity_date": 1450859753, "creation_date": 1450859753, "answer_id": 34431578, "question_id": 34430744, "link": "https://stackoverflow.com/questions/34430744/error-while-running-rbenv-install-on-os-x-10-11-2-config-status-error-could-n/34431578#34431578", "title": "Error while running rbenv install on OS X 10.11.2: config.status: error: could not create GNUmakefile", "body": "<p>I ended up going through my PATH settings in ~/.zshrc and broke the entire path out into individual lines (there were a lot). I figured that way I could comment each PATH setting out individually if I thought it might matter. As it turns out, I was right. I commented out the following:</p>\n\n<pre><code># export PATH=\"/usr/local/rvm/gems/ruby-2.1.0/bin:$PATH\"\n# export PATH=\"/usr/local/rvm/gems/ruby-2.1.0@global/bin:$PATH\"\n# export PATH=\"/usr/local/rvm/rubies/ruby-2.1.0/bin:$PATH\"\n# export PATH=\"/usr/local/rvm/gems/ruby-1.9.3-p448/bin:$PATH\"\n# export PATH=\"/usr/local/rvm/gems/ruby-1.9.3-p448@global/bin:$PATH\"\n# export PATH=\"/usr/local/rvm/rubies/ruby-1.9.3-p448/bin:$PATH\"\n</code></pre>\n\n<p>I then re-ran the command and it completed successfully.</p>\n\n<p>Hope this helps someone else.</p>\n"}], "owner": {"reputation": 597, "user_id": 1091745, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3014027f6f3d4df4047514b999e1bd66?s=128&d=identicon&r=PG", "display_name": "tdlm", "link": "https://stackoverflow.com/users/1091745/tdlm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 532, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450859753, "creation_date": 1450855898, "last_edit_date": 1450856520, "question_id": 34430744, "link": "https://stackoverflow.com/questions/34430744/error-while-running-rbenv-install-on-os-x-10-11-2-config-status-error-could-n", "title": "Error while running rbenv install on OS X 10.11.2: config.status: error: could not create GNUmakefile", "body": "<p>Trying to follow the instructions from here -- <a href=\"https://gorails.com/setup/osx/10.11-el-capitan\" rel=\"nofollow\">https://gorails.com/setup/osx/10.11-el-capitan</a> -- to install Ruby on Rails, but I'm getting the following error:</p>\n\n<pre><code>\u279c  ~  rbenv install 2.2.3\nDownloading ruby-2.2.3.tar.gz...\n-&gt; https://dqw8nmjcqpjn7.cloudfront.net/df795f2f99860745a416092a4004b016ccf77e8b82dec956b120f18bdc71edce\nInstalling ruby-2.2.3...\n\nBUILD FAILED (OS X 10.11.2 using ruby-build 20150928)\n\nInspect or clean up the working tree at /var/folders/l3/skxhsvw51wz7fnn2v1v4d3sh0000gn/T/ruby-build.20151222232425.95349\nResults logged to /var/folders/l3/skxhsvw51wz7fnn2v1v4d3sh0000gn/T/ruby-build.20151222232425.95349.log\n\nLast 10 log lines:\nchecking for nroff... /usr/bin/nroff\n.ext/include/x86_64-darwin15/ruby/config.h updated\nruby library version = 2.2.0\nconfigure: creating ./config.status\nconfig.status: creating GNUmakefile\nawk: syntax error at source line 1 source file ./confyJCFwP/subs.awk\n context is\n     &gt;&gt;&gt; BEGIN &lt;&lt;&lt;  {\nawk: bailing out at source line 275\nconfig.status: error: could not create GNUmakefile\n</code></pre>\n\n<p>And then checking the log file, it says the same thing at the end:</p>\n\n<pre><code>...\n.ext/include/x86_64-darwin15/ruby/config.h updated\n ruby library version = 2.2.0\n configure: creating ./config.status\n config.status: creating GNUmakefile\n awk: syntax error at source line 1 source file ./confyJCFwP/subs.awk\n  context is\n      &gt;&gt;&gt; BEGIN &lt;&lt;&lt;  {\n awk: bailing out at source line 275\n config.status: error: could not create GNUmakefile\n</code></pre>\n\n<p>How can I fix this? I recently ran <code>brew upgrade</code> on everything and it seemed to complete successfully.</p>\n\n<p>Note: I don't know if it's relevant but my shell is ZSH (via oh-my-zsh).</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 5, "last_activity_date": 1450854361, "creation_date": 1450854361, "answer_id": 34430373, "question_id": 34430261, "link": "https://stackoverflow.com/questions/34430261/custom-struct-method-cant-set-struct-member/34430373#34430373", "title": "Custom Struct method can&#39;t set struct member", "body": "<pre><code>Val = Struct.new(:value) do\n  def inc \n    p value # here it still prints 1\n\n    # but here you REDEFINED what value is. It is now a local variable!\n    # Also its initial value is nil, hence the error you're getting.\n    value = value + 1 \n\n    # should have used this instead, to reference the method\n    self.value = value + 1\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14450, "user_id": 438615, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Dseeq.jpg?s=128&g=1", "display_name": "Jonah", "link": "https://stackoverflow.com/users/438615/jonah"}, "edited": false, "score": 0, "creation_date": 1450856041, "post_id": 34430731, "comment_id": 56602473, "body": "my only remaining confusion is: why is &quot;self.&quot; not implied as it normally is?  is that rule inapplicable to assignment statements in general?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 14450, "user_id": 438615, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Dseeq.jpg?s=128&g=1", "display_name": "Jonah", "link": "https://stackoverflow.com/users/438615/jonah"}, "edited": false, "score": 1, "creation_date": 1450856225, "post_id": 34430731, "comment_id": 56602550, "body": "If a method call (with implicit <code>self</code> receiver) had priority over a local variable, then there would be no way to call that variable."}, {"owner": {"reputation": 14450, "user_id": 438615, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Dseeq.jpg?s=128&g=1", "display_name": "Jonah", "link": "https://stackoverflow.com/users/438615/jonah"}, "edited": false, "score": 0, "creation_date": 1450856377, "post_id": 34430731, "comment_id": 56602626, "body": "well, it could work if you disallowed shadowing method names with local vars, right?  but i get your point"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 4, "last_activity_date": 1450855844, "creation_date": 1450855844, "answer_id": 34430731, "question_id": 34430261, "link": "https://stackoverflow.com/questions/34430261/custom-struct-method-cant-set-struct-member/34430731#34430731", "title": "Custom Struct method can&#39;t set struct member", "body": "<p>Clarification on Sergio's answer.</p>\n\n<p>Within <code>inc</code>'s definition, there is initially no variable <code>value</code>, and what is called by <code>p value</code> is the method <code>value</code>, which returns <code>1</code>.</p>\n\n<p>Then in line <code>value = value + 1</code>, at the point when <code>value =</code> has been parsed, a local variable <code>value</code> is created and is initialized to <code>nil</code>. Even though <code>value + 1</code> is evaluated prior to assignment of its value into the newly created <code>value</code>, the initialization of <code>value</code> takes place first. So, when <code>value + 1</code> is to be evaluated, there already is a local variable <code>value</code>, which has priority to be called over the method <code>value</code>. And this value is <code>nil</code>.</p>\n"}], "owner": {"reputation": 14450, "user_id": 438615, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Dseeq.jpg?s=128&g=1", "display_name": "Jonah", "link": "https://stackoverflow.com/users/438615/jonah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "closed_date": 1450911146, "accepted_answer_id": 34430731, "answer_count": 2, "score": 3, "last_activity_date": 1450855844, "creation_date": 1450853850, "question_id": 34430261, "link": "https://stackoverflow.com/questions/34430261/custom-struct-method-cant-set-struct-member", "closed_reason": "Duplicate", "title": "Custom Struct method can&#39;t set struct member", "body": "<p>An example will explain the question:</p>\n\n<pre><code>Val = Struct.new(:value) do\n  def inc \n    p value\n    value = value + 1 \n  end\nend\n\nv = Val.new(1)\nv.inc\n</code></pre>\n\n<p>The output will be:</p>\n\n<pre><code>1\nundefined method `+' for nil:NilClass (NoMethodError)\n</code></pre>\n\n<p>Why do I get this error when <code>value</code> is clearly not nil?  Is there a way to make this work?</p>\n"}, {"tags": ["ruby", "sqlite"], "answers": [{"tags": [], "owner": {"reputation": 1962, "user_id": 2945616, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/TL0yY.jpg?s=128&g=1", "display_name": "Atul Khanduri", "link": "https://stackoverflow.com/users/2945616/atul-khanduri"}, "is_accepted": false, "score": 1, "last_activity_date": 1450855444, "last_edit_date": 1450855444, "creation_date": 1450855048, "answer_id": 34430532, "question_id": 34430017, "link": "https://stackoverflow.com/questions/34430017/to-show-the-data-extracted-from-database-horizontally-using-ruby-program/34430532#34430532", "title": "To show the data extracted from database horizontally using Ruby program", "body": "<p>Store the value in Array.\nTry this:</p>\n\n<pre><code>def registered_users\n    arr = []\n    @@db.execute(\n    \"Select strftime('%Y-%m',created_at) AS Month, count(uuid) as RegistredPeopleNo\n    from users\n    group by strftime('%Y-%m',created_at)\n    order by Month;\") do |row|\n    arr &lt;&lt; row\n    end\n    p arr\nend\n</code></pre>\n\n<p>Update: You do not need <code>each</code> loop. Probably below code will give you the result you want.</p>\n\n<pre><code>@@db.execute(\n  \"Select strftime('%Y-%m',created_at) AS Month, count(uuid) as RegistredPeopleNo\n  from users\n  group by strftime('%Y-%m',created_at)\n  order by Month;\")`\n</code></pre>\n"}], "owner": {"reputation": 106, "user_id": 1932914, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/002e7312eb086a7e86ab1da1bfe2103c?s=128&d=identicon&r=PG", "display_name": "user1932914", "link": "https://stackoverflow.com/users/1932914/user1932914"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1450855444, "creation_date": 1450852863, "question_id": 34430017, "link": "https://stackoverflow.com/questions/34430017/to-show-the-data-extracted-from-database-horizontally-using-ruby-program", "title": "To show the data extracted from database horizontally using Ruby program", "body": "<p>I have to show the data in the below specified manner using Ruby program..\nCan someone help me as to how can I do it. DO have to make changes in SQlcode or Ruby code.\nThe code is below here:</p>\n\n<pre><code>require 'sqlite3'\n#db=SQLite3::Database.open ('adaptive.db')\nclass Database\n    @@db=SQLite3::Database.open 'adaptive.db'\n    def registered_users\n        @@db.execute(\n        \"Select strftime('%Y-%m',created_at) AS Month, count(uuid) as    RegistredPeopleNo\n        from users\n        group by strftime('%Y-%m',created_at)\n        order by Month;\") do |row|\n          p row\n        end\n      end\n      def registered_devices\n         @@db.execute(\n         \"Select strftime('%Y-%m',created_at) AS RegisteredMonth,\n          count(serial_number) AS RegisteredDevicesNo\n          from devices\n          group by strftime('%Y-%m',created_at)\n          order by RegisteredMonth;\") do |row|\n              p row\n          end\n       end\n       def unregistered_users\n         @@db.execute(\n         \"Select strftime('%Y-%m',updated_at) AS Unregister, count(id) AS Id\n          from users\n          where id not in(Select user_id from devices)\n          group by strftime('%Y-%m',updated_at)\n          order by Unregister;\") do |row|\n          p row\n          end\n       end\n       def unregistered_devices\n         @@db.execute(\n         \"Select strftime('%Y-%m',updated_at) AS Unregister,count(id) AS Id\n          from devices\n          where channel_id is null\n          group by strftime('%Y-%m',updated_at);\") do |row|\n          p row\n       end\n     end\n     def device_per_user\n       @@db.execute(\n       \"select register AS NoOFMachines,count(id) as NoOFPeople\n        from(\n        Select users.id AS id,count(devices.id) AS register\n        from users,devices\n        where users.id=devices.user_id\n        group by devices.user_id)\n        group by register;\") do |row|\n          p row\n        end\n     end\n  end\n</code></pre>\n\n<p>The run commands:</p>\n\n<pre><code>&gt;irb\n&gt;require './database'\n&gt;db=Database.new\n&gt;db.registered_users#\nThe output is following:\n[\"2015-08\",23]\n[\"2015-09\",102]\n[\"2015-10\",59]\n[\"2015-11\",25]\n</code></pre>\n\n<p>But, I want it to displayed like this:</p>\n\n<pre><code>[[\"2015-08\",23],[\"2015-09\",102],[\"2015-10\",59],[\"2015-11\",25]]\n</code></pre>\n\n<p>Can some one help me with this problem... Thanks in advance</p>\n"}, {"tags": ["ruby", "singleton"], "answers": [{"tags": [], "owner": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "is_accepted": false, "score": 6, "last_activity_date": 1450851746, "creation_date": 1450851746, "answer_id": 34429797, "question_id": 34429693, "link": "https://stackoverflow.com/questions/34429693/singleton-method-vs-class-method/34429797#34429797", "title": "Singleton method vs. class method", "body": "<p>In ruby class is an object as well. So, in your example <code>classmethod</code> is a singleton method for object <code>C</code> and <code>singletonmethod</code> is singleton method for object <code>c</code>. </p>\n\n<p>I highly recommend book \"Metaprogramming Ruby\" by Paolo Perrotta.</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4932805"}, "edited": false, "score": 1, "creation_date": 1502051749, "post_id": 34429858, "comment_id": 78032778, "body": "Superb explanation! I&#39;m thrilled."}, {"owner": {"reputation": 311, "user_id": 7292776, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-X5noq26VPcQ/AAAAAAAAAAI/AAAAAAAAAgA/cWtPXan-Ofg/photo.jpg?sz=128", "display_name": "Shekhar Patil", "link": "https://stackoverflow.com/users/7292776/shekhar-patil"}, "edited": false, "score": 0, "creation_date": 1594923018, "post_id": 34429858, "comment_id": 111304574, "body": "The super explanation is from the well-grounded Rubyist book, Anyways thanks!!"}], "tags": [], "owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "is_accepted": true, "score": 20, "last_activity_date": 1590517043, "last_edit_date": 1590517043, "creation_date": 1450852096, "answer_id": 34429858, "question_id": 34429693, "link": "https://stackoverflow.com/questions/34429693/singleton-method-vs-class-method/34429858#34429858", "title": "Singleton method vs. class method", "body": "<p>Most of what happens in Ruby involves classes and modules, containing\ndefinitions of instance methods</p>\n\n<pre><code>class C\n  def talk\n    puts \"Hi!\"\n  end\nend\n\nc = C.new\nc.talk\nOutput: Hi!\n</code></pre>\n\n<p>But as you saw earlier (even earlier than you saw instance methods inside classes), you can also define singleton methods directly on individual objects:</p>\n\n<pre><code>obj = Object.new\ndef obj.talk\n  puts \"Hi!\"\nend\nobj.talk\n#Output: Hi!\n</code></pre>\n\n<p>When you define a singleton method on a given object, only that object can call that method. As you\u2019ve seen, the most common type of singleton method is the class method\u2014a method added to a Class object on an individual basis:</p>\n\n<pre><code>class Car\n  def self.makes\n    %w{ Honda Ford Toyota Chevrolet Volvo }\n  end\nend\n</code></pre>\n\n<p>But any object can have singleton methods added to it. The ability to define method- driven behavior on a per-object basis is one of the hallmarks of Ruby\u2019s design.</p>\n\n<h3>Singleton classes</h3>\n\n<p>Singleton classes are anonymous: although they\u2019re class objects (instances of the class Class ), they spring up automatically without being given a name. Nonetheless, you can open the class-definition body of a singleton class and add instance methods, class methods, and constants to it, as you would with a regular class.</p>\n\n<p><strong>Note:</strong></p>\n\n<p><strong><code>Every object has two classes:</code></strong></p>\n\n<p>\u25a0  The class of which it\u2019s an instance</p>\n\n<p>\u25a0  Its singleton class</p>\n\n<h2>----------------------------------------------------------------</h2>\n\n<h1>At Last I would highly recommends you to watch.</h1>\n\n<p>1: <a href=\"https://www.youtube.com/watch?v=io34q2G4eOU\" rel=\"nofollow noreferrer\">The Ruby Object Model and Metaprogramming</a> For detail info about <strong><code>singleton method vs. class method ruby</code></strong></p>\n\n<p>2: <a href=\"http://www.infoq.com/presentations/metaprogramming-ruby\" rel=\"nofollow noreferrer\">MetaProgramming - Extending Ruby for Fun and Profit</a> - by <strong><code>Dave Thomas</code></strong> </p>\n\n<p>Hope this help you!!!</p>\n"}, {"comments": [{"owner": {"reputation": 312, "user_id": 3981834, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/913925d7b5e5420b4f76fe4c0de8b6d3?s=128&d=identicon&r=PG&f=1", "display_name": "rubyemerite", "link": "https://stackoverflow.com/users/3981834/rubyemerite"}, "edited": false, "score": 0, "creation_date": 1450854508, "post_id": 34429881, "comment_id": 56601812, "body": "Thank you. I have confusion with names. you have cleared my doubt."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1450857873, "post_id": 34429881, "comment_id": 56603288, "body": "Is it alright to use <code>def C.classmethod ...</code> to define singleton methods for class in a way similar to way its created on non-class objects ?  For some reason, not many people seem to do so."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 18, "last_activity_date": 1450852189, "creation_date": 1450852189, "answer_id": 34429881, "question_id": 34429693, "link": "https://stackoverflow.com/questions/34429693/singleton-method-vs-class-method/34429881#34429881", "title": "Singleton method vs. class method", "body": "<p>There is no difference. There are no class methods in Ruby. \"Class method\" is just a name that we <em>humans</em> call a singleton method if the object happens to be an instance of the <code>Class</code> class.</p>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1450856840, "creation_date": 1450856840, "answer_id": 34430954, "question_id": 34429693, "link": "https://stackoverflow.com/questions/34429693/singleton-method-vs-class-method/34430954#34430954", "title": "Singleton method vs. class method", "body": "<p>They are relative notions; matter of perspective. What is its instance method from the point of view of a singleton class of class A is a class method from the point of view (of an instance) of A.</p>\n"}, {"tags": [], "owner": {"reputation": 1256, "user_id": 2713696, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9Ebob.jpg?s=128&g=1", "display_name": "Mukesh Kumar Gupta", "link": "https://stackoverflow.com/users/2713696/mukesh-kumar-gupta"}, "is_accepted": false, "score": 3, "last_activity_date": 1496519493, "creation_date": 1496519493, "answer_id": 44347990, "question_id": 34429693, "link": "https://stackoverflow.com/questions/34429693/singleton-method-vs-class-method/44347990#44347990", "title": "Singleton method vs. class method", "body": "<blockquote>\n  <p>Since all methods are implemented and stored by the class definition, it should be impossible for an object to define its own methods. However, Ruby provides a way around this - you can define methods that are available only for a specific object. Such methods are called Singleton Methods.</p>\n</blockquote>\n\n<pre><code>class Instance\n  def instance_method\n    puts \"instance method called\"\n  end\nend\n\nin_obj = Instance.new\n</code></pre>\n\n<p>The above statement you a reference object of class Instance, you might get a different id. </p>\n\n<pre><code>#&lt;Instance:0x00000000e9ee68&gt;\n</code></pre>\n\n<p>let's call the instance method with the object and we will get output.</p>\n\n<pre><code>in_obj.instance_method\ninstance method called\n</code></pre>\n\n<p>Now, create the singleton method.</p>\n\n<pre><code>sin_obj = Instance.new\n#&lt;Instance:0x00000000e98d60&gt;\ndef sin_obj.singleton_method\n  puts \"singleton method called\"\nend\n</code></pre>\n\n<p>calling the singleton method </p>\n\n<pre><code>sin_obj.sigleton_method\nsingleton method called\n</code></pre>\n\n<blockquote>\n  <p>Here, the object sin_obj has the singleton method singleton_method. This is a\n  singleton method because it belongs to just one instance of a class\n  and will not be shared with others.</p>\n  \n  <p><em>However, singleton methods contradict that instance objects cannot\n  hold methods, only class definitions (objects of class Class) can. It\n  happens that the truth is somewhere in-between.</em>\n  When you declare a singleton method on an object, Ruby automatically creates a class to hold just that method. This class is called the 'metaclass' of the object. All subsequent singleton methods of this object goes to its metaclass. Whenever you send a message to the object, it first looks to see whether the method exists in its metaclass. If it is not there, it gets propagated to the actual class of the object and if it is not found there, the message traverses the inheritance hierarchy.\n  Let defined the class method in the same Instance class. \n  Now, lets check the fact that I stats above with an example.</p>\n</blockquote>\n\n<pre><code>foo = \"Hey I am a string\"\ndef foo.foo_instance_method\n    p self.upcase\nend\n</code></pre>\n\n<p>Verify the fact that signleton method definition goes to the meta class.</p>\n\n<pre><code>p foo.class.instance_methods.include?:foo_instance_method\n false\np foo.metaclass.instance_methods.include?:foo_instance_method\n true\np foo.metaclass.class\n Class\np foo.metaclass\n #&lt;Class:#&lt;String:0x00000000e8f0f8&gt;&gt;\n</code></pre>\n\n<p>Let look how meta class is implemented.</p>\n\n<pre><code>class Instance\n  def metaclass\n    class &lt;&lt; self\n      self\n    end\n  end\nend\n</code></pre>\n\n<p>The class &lt;&lt; self syntax changes the current self to point to the metaclass of the current object. Since we are already inside an instance method, this would be the instance's metaclass. The method simply returns self which at this point is the metaclass of the instance.</p>\n\n<blockquote>\n  <p>A metaclass is almost a class in many respects. It however can't be\n  instantiated. To check this see the example below.</p>\n</blockquote>\n\n<pre><code>a = Instance.new\na.metaclass.new\nYou will get is error when try to intantiate the meta class.\n*TypeError: can't create instance of singleton class*\n</code></pre>\n\n<blockquote>\n  <p>In Ruby, both 'metaclass' and 'singleton class' means the same. You'll\n  find them being used interchangeably in Ruby literature.</p>\n</blockquote>\n\n<pre><code>class Instance\n    def self.class_method #instead one can use def Instance.class_method\n        puts \"class method called\"        \n    end\nend\n</code></pre>\n\n<h1>However, one can also follow this syntax to defined a class method</h1>\n\n<pre><code>class Instance\n  class &lt;&lt; self\n    def show\n      puts \"Class method show invoked\"\n    end\n  end\nend\n</code></pre>\n\n<p>calling class_method</p>\n\n<pre><code>Instance.class_method\nclass method called\nInstance.show \nClass method show invoked\n</code></pre>\n\n<p>It consists of building a new anonymous class only for the current object (self). To create the anonymous class, we use the &lt;&lt; notation. Look closely how class method and singleton method are defined you find the difference. \nconsider the example. </p>\n\n<pre><code>class Instance \n puts self\n def meth\n  p self\n end\nend\n</code></pre>\n\n<p>here, outside of meth method self is nothing but the class, inside an instance_method the self pointing to the current instance or object.</p>\n\n<p>Additionally, You can also check that a method responds to a particular object or not. </p>\n\n<pre><code>p Instance.new.respond_to?(:singleton_method)\np Instance.new.respond_to?(:class_method)\n</code></pre>\n"}], "owner": {"reputation": 312, "user_id": 3981834, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/913925d7b5e5420b4f76fe4c0de8b6d3?s=128&d=identicon&r=PG&f=1", "display_name": "rubyemerite", "link": "https://stackoverflow.com/users/3981834/rubyemerite"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7485, "favorite_count": 4, "accepted_answer_id": 34429858, "answer_count": 5, "score": 9, "last_activity_date": 1590517043, "creation_date": 1450851230, "last_edit_date": 1450856592, "question_id": 34429693, "link": "https://stackoverflow.com/questions/34429693/singleton-method-vs-class-method", "title": "Singleton method vs. class method", "body": "<p>Are class method and singleton method doing the same or different? Here is an example.</p>\n\n<pre><code>class C\n  def self.classmethod\n    puts \"class method #{self}\"\n  end\nend\n\nC.classmethod  # class method C\nc = C.new\n\ndef c.singletonmethod\n  puts \"instance method #{self}\"\nend\n\nc.singletonmethod  # instance method #&lt;C:0x0000000118ed08&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "mongodb-ruby"], "answers": [{"tags": [], "owner": {"reputation": 5647, "user_id": 272441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecd0422f996af1d00d555e471a1d3362?s=128&d=identicon&r=PG", "display_name": "toddsundsted", "link": "https://stackoverflow.com/users/272441/toddsundsted"}, "is_accepted": true, "score": 2, "last_activity_date": 1458856565, "creation_date": 1458856565, "answer_id": 36210674, "question_id": 34429292, "link": "https://stackoverflow.com/questions/34429292/using-dbref-in-mongo-ruby-driver-undefined-method-bson-type-for-mongodbr/36210674#36210674", "title": "Using DBRef in mongo ruby driver: (undefined method `bson_type&#39; for #&lt;Mongo::DBRef:0x0056466ed55e48&gt;)", "body": "<p>The Ruby Mongo driver (I am using v2.2.0) does not define a <code>bson_type</code> method on the <code>Mongo::DBRef</code> class. I was able to work around this particular limitation by specifying the DB reference as extended JSON (<a href=\"https://docs.mongodb.org/manual/reference/mongodb-extended-json/#db-reference\" rel=\"nofollow\">link</a>). Define your <code>grant_document</code> hash as:</p>\n\n<pre><code>grant_document = { :target =&gt; { \"$ref\" =&gt; \"user\", \"$id\" =&gt; user_mongo.first[\"_id\"] }, :role =&gt; ... }\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 578070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d838d342980740afbdc08e2ab17162d?s=128&d=identicon&r=PG", "display_name": "Ariel Goldblatt", "link": "https://stackoverflow.com/users/578070/ariel-goldblatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 360, "favorite_count": 0, "accepted_answer_id": 36210674, "answer_count": 1, "score": 2, "last_activity_date": 1458856565, "creation_date": 1450849115, "question_id": 34429292, "link": "https://stackoverflow.com/questions/34429292/using-dbref-in-mongo-ruby-driver-undefined-method-bson-type-for-mongodbr", "title": "Using DBRef in mongo ruby driver: (undefined method `bson_type&#39; for #&lt;Mongo::DBRef:0x0056466ed55e48&gt;)", "body": "<p>When I try to use DBRef in the mongo ruby driver (creating a new DBRef object and including in a document which I am inserting into a collection), I get this error that I cannot make heads nor tails of:</p>\n\n<pre><code>NoMethodError (undefined method `bson_type' for #&lt;Mongo::DBRef:0x0056466ed55e48&gt;):\n  app/controllers/payment_notifications_controller.rb:43:in `block in create'\n  app/controllers/payment_notifications_controller.rb:19:in `create'\n</code></pre>\n\n<p>Here is the code in question:</p>\n\n<pre><code>user_mongo = Urgent::Application.config.mongo_client[:user].find(uuid: order.identity.uuid)\nif user_mongo\n  grant_document = { :target =&gt; Mongo::DBRef.new(\"user\", user_mongo.first[\"_id\"]), :role =&gt; order_item.expirable.backend_id, :created =&gt; Time.now, :store_item_id =&gt; order_item.id, :store_order_id =&gt; order.id }\n\n  if expires\n    grant_document[:expires] = expires\n  end\n\n  Urgent::Application.config.mongo_client[:grant].insert_one(grant_document)\nend\n</code></pre>\n\n<p>Line 39 refers to the second to last line in the code snippet.</p>\n"}, {"tags": ["ruby", "jekyll", "github-pages", "octopress"], "comments": [{"owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 0, "creation_date": 1450881621, "post_id": 34429109, "comment_id": 56616796, "body": "Can you provide a repository url ? Can be useful to try to spot your problem."}, {"owner": {"reputation": 13189, "user_id": 2087628, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/698fddc9acccb5115122e3150f6019fd?s=128&d=identicon&r=PG&f=1", "display_name": "JaskeyLam", "link": "https://stackoverflow.com/users/2087628/jaskeylam"}, "reply_to_user": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 0, "creation_date": 1450925597, "post_id": 34429109, "comment_id": 56635322, "body": "@DavidJacquel <a href=\"https://github.com/Jaskey/Jaskey.github.io\" rel=\"nofollow noreferrer\">github.com/Jaskey/Jaskey.github.io</a> , this repo. I had uninstall ruby(1.93) and install a newer version(2.23), now, with now problem. But actually the older version worked fine before"}], "owner": {"reputation": 13189, "user_id": 2087628, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/698fddc9acccb5115122e3150f6019fd?s=128&d=identicon&r=PG&f=1", "display_name": "JaskeyLam", "link": "https://stackoverflow.com/users/2087628/jaskeylam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1450848652, "creation_date": 1450848048, "last_edit_date": 1450848652, "question_id": 34429109, "link": "https://stackoverflow.com/questions/34429109/octopress-liquid-exception-invalid-byte-sequence-in-gb2312-when-rake-generate", "title": "Octopress: Liquid Exception: invalid byte sequence in GB2312, when rake generate", "body": "<p>I had a problem when I tried to generate the post with octopress.</p>\n\n<p>When I type <code>rake generate</code></p>\n\n<p>I have:</p>\n\n<pre><code>## Generating Site with Jekyll\nidentical source/stylesheets/screen.css\nConfiguration file: e:/github/Jaskey.github.io/_config.yml\n            Source: source\n       Destination: public\n      Generating...\n [31m  Liquid Exception: invalid byte sequence in GB2312 i\n0m\njekyll 2.5.3 | Error:  invalid byte sequence in GB2312\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/8tUVA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8tUVA.png\" alt=\"enter image description here\"></a></p>\n\n<p>Tried set <code>encoding: utf-8</code> at _config.yml but not work.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "caching"], "answers": [{"tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": true, "score": 0, "last_activity_date": 1450859458, "creation_date": 1450859458, "answer_id": 34431508, "question_id": 34428793, "link": "https://stackoverflow.com/questions/34428793/correct-way-to-expire-a-fragment-cache/34431508#34431508", "title": "Correct way to expire a fragment cache", "body": "<p>You would indeed need to expire each fragment from individually - there is no way in general to expire a range of keys (I think memorystore supports expiry by regexp but I don't think anyone uses that in production).</p>\n\n<p>You may be better off choosing your cache keys so that they change when the underlying data has changed.</p>\n"}], "owner": {"reputation": 3797, "user_id": 145684, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/f90947872162ab16e9a76085569a46f8?s=128&d=identicon&r=PG", "display_name": "steven_noble", "link": "https://stackoverflow.com/users/145684/steven-noble"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 34431508, "answer_count": 1, "score": 0, "last_activity_date": 1450859458, "creation_date": 1450845906, "last_edit_date": 1450854595, "question_id": 34428793, "link": "https://stackoverflow.com/questions/34428793/correct-way-to-expire-a-fragment-cache", "title": "Correct way to expire a fragment cache", "body": "<p>In the view for <code>Reports#index</code>, I cache a fragment like this:</p>\n\n<pre><code>- cache(\"#{@country}-#{@category}-#{@benchmark}-#{@status}\") do\n</code></pre>\n\n<p><em>Note that those four variables are strings, not model objects, so they will not expire automatically on touch.</em></p>\n\n<p>To expire every copy of this cache, do I have to call <code>expire_fragment</code> for every string that could be generated by cocacenating possible values for <code>@country</code>, <code>@category</code>, <code>@benchmark</code> and <code>@status</code>? Or will <code>expire_fragment reports_path</code> do the trick?</p>\n\n<p>Sorry the API docs aren't crystal clear on this and it's not the type of thing that's easily, robustly tested.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2926, "user_id": 2224930, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2e8fcc9502e90ee995c10f712ea5bfb7?s=128&d=identicon&r=PG", "display_name": "harinsa", "link": "https://stackoverflow.com/users/2224930/harinsa"}, "reply_to_user": {"reputation": 2602, "user_id": 5565170, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d110c1241538fcf7c1fd6b6ebfa6153f?s=128&d=identicon&r=PG&f=1", "display_name": "Stidgeon", "link": "https://stackoverflow.com/users/5565170/stidgeon"}, "edited": false, "score": 0, "creation_date": 1450842956, "post_id": 34428326, "comment_id": 56597689, "body": "about 30 categories, There is no direct relationship between weight and price e.g. should be able to specify price for each category."}, {"owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "edited": false, "score": 0, "creation_date": 1450843354, "post_id": 34428326, "comment_id": 56597796, "body": "side note: in Ruby you don&#39;t need to specify <code>return</code> unless you have an expression that would terminate the execution of the method prematurely. Ruby methods automatically return the return value of the last evaluated expression."}, {"owner": {"reputation": 2926, "user_id": 2224930, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2e8fcc9502e90ee995c10f712ea5bfb7?s=128&d=identicon&r=PG", "display_name": "harinsa", "link": "https://stackoverflow.com/users/2224930/harinsa"}, "reply_to_user": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "edited": false, "score": 2, "creation_date": 1450843544, "post_id": 34428326, "comment_id": 56597845, "body": "@sixty4bit thanks, I just like to see the word return, gives me assurance haha."}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1450850924, "post_id": 34428326, "comment_id": 56600260, "body": "what is the price  if weight is 50.5g?"}, {"owner": {"reputation": 2926, "user_id": 2224930, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2e8fcc9502e90ee995c10f712ea5bfb7?s=128&d=identicon&r=PG", "display_name": "harinsa", "link": "https://stackoverflow.com/users/2224930/harinsa"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1450851314, "post_id": 34428326, "comment_id": 56600430, "body": "@WandMaker good catch!"}], "answers": [{"tags": [], "owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "is_accepted": true, "score": 2, "last_activity_date": 1450844343, "last_edit_date": 1495542683, "creation_date": 1450843932, "answer_id": 34428528, "question_id": 34428326, "link": "https://stackoverflow.com/questions/34428326/dynamically-mapping-of-value-range-and-output/34428528#34428528", "title": "Dynamically mapping of value range and output", "body": "<p>One way you could do this is to structure your data as a <code>Hash</code> with <code>Range</code> objects as the keys like so:</p>\n\n<pre><code>SHIPPING_COSTS = {\n  0..50 =&gt; 1,\n  51..100 =&gt; 2,\n}\n</code></pre>\n\n<p>Using <code>Enumerable#select</code> in your method, you can then get a key-value pair using the <code>===</code> operator:</p>\n\n<pre><code> def price_for_weight(w)    \n    SHIPPING_COSTS.select { |range| range === w }\n end\n</code></pre>\n\n<p><code>===</code> used with a set asks whether the value on the right side of the comparison can be considered a member of the set on the left side (see <a href=\"https://stackoverflow.com/questions/4467538/what-does-the-operator-do-in-ruby\">this question</a>).</p>\n\n<p>Since the above would return a key-value pair, you could add <code>.values.first</code> after the block to get just the cost:</p>\n\n<pre><code> def price_for_weight(w)    \n    SHIPPING_COSTS.select { |range| range === w }.values.first\n end\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 1, "creation_date": 1450851368, "post_id": 34429390, "comment_id": 56600451, "body": "As precaution, should keys be sorted using <code>ShippingCost.keys.sort.bsearch{...}</code> ?"}, {"owner": {"reputation": 2926, "user_id": 2224930, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2e8fcc9502e90ee995c10f712ea5bfb7?s=128&d=identicon&r=PG", "display_name": "harinsa", "link": "https://stackoverflow.com/users/2224930/harinsa"}, "edited": false, "score": 0, "creation_date": 1450851639, "post_id": 34429390, "comment_id": 56600575, "body": "the cost is just a mapping from the range, so I could still use 1.01 dollars instead of an integer of cent"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1450849608, "creation_date": 1450849608, "answer_id": 34429390, "question_id": 34428326, "link": "https://stackoverflow.com/questions/34428326/dynamically-mapping-of-value-range-and-output/34429390#34429390", "title": "Dynamically mapping of value range and output", "body": "<p>Assuming the costs are not always whole dollars, counting in cents is better.</p>\n\n<pre><code>ShippingCost = {50 =&gt; 100, 100 =&gt; 200}\n\ndef price_for_weight(w)\n  ShippingCost[ShippingCost.keys.bsearch{|k| w &lt;= k}]\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": false, "score": 0, "last_activity_date": 1450852775, "creation_date": 1450852775, "answer_id": 34430005, "question_id": 34428326, "link": "https://stackoverflow.com/questions/34428326/dynamically-mapping-of-value-range-and-output/34430005#34430005", "title": "Dynamically mapping of value range and output", "body": "<p>Here is one more way to do this:</p>\n\n<p>Given that your ranges are coming from DB, you will be using an array of something.  We could use a hash to represent values of each price range as shown below.</p>\n\n<pre><code>prices = [ {min: 0, max: 50, price: 1}, {min: 50, max: 100, price: 2} ]\nweight = 50.5\n\nprices.find {|i| (i[:min]...i[:max]).include? weight }[:price]\n#=&gt; 2\n</code></pre>\n\n<p>Also note the usage of <code>...</code> in range, which excludes the end value. Hence, <code>(0...50)</code> will not include <code>50</code>.  This will ensure that there is no overlap between ranges in case you had used <code>(0..50)</code>, <code>(50..100)</code>, or we don't skip a range of values if you had used <code>(0..50)</code> and <code>(51..100)</code>.</p>\n"}], "owner": {"reputation": 2926, "user_id": 2224930, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/2e8fcc9502e90ee995c10f712ea5bfb7?s=128&d=identicon&r=PG", "display_name": "harinsa", "link": "https://stackoverflow.com/users/2224930/harinsa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 34428528, "answer_count": 3, "score": 0, "last_activity_date": 1450852775, "creation_date": 1450842463, "last_edit_date": 1450849425, "question_id": 34428326, "link": "https://stackoverflow.com/questions/34428326/dynamically-mapping-of-value-range-and-output", "title": "Dynamically mapping of value range and output", "body": "<p>I am trying to create a method to calculate the shipping cost for a package. The shipping cost comes in a table which states the weight range and the corresponding price.</p>\n\n<p>Example data:</p>\n\n<pre><code>0 - 50g : $1\n51 - 100g : $2\n</code></pre>\n\n<p>How should I structure my data, how can I generate the price dynamically based on the data instead of writing many <code>if</code> statements?</p>\n\n<p>Example code:</p>\n\n<pre><code>def price_for_weight(w)    \n  if w &lt; 50\n    return 1\n  elsif w &lt; 100\n    return 2\n  end\n</code></pre>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 3331, "user_id": 994210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32122073312c9c8b4c6a05f4c1257516?s=128&d=identicon&r=PG", "display_name": "Tom L", "link": "https://stackoverflow.com/users/994210/tom-l"}, "edited": false, "score": 0, "creation_date": 1450842514, "post_id": 34428248, "comment_id": 56597594, "body": "You can handle that with a combination of jQuery and ActiveRecord validation. For the jQuery you want a listener on country and have it show/hide State based on the selection. In the model, validations can be conditional. It can require the presence of State if the Country is the United States."}], "answers": [{"tags": [], "owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "is_accepted": false, "score": 3, "last_activity_date": 1450842988, "creation_date": 1450842988, "answer_id": 34428411, "question_id": 34428248, "link": "https://stackoverflow.com/questions/34428248/having-fields-be-conditionally-required-in-rails-model/34428411#34428411", "title": "Having fields be conditionally required in rails model?", "body": "<p>You seem to be on the right track! The hiding/showing of the <code>states/provinces</code> box would be handled by jQuery. You could also use an ActiveRecord validation in your model to ensure that the <code>state</code> field is blank if the country isn't USA or Canada:</p>\n\n<pre><code>class MyClass &lt; ActiveRecord::Base\n  validates :state, presence: false, unless: Proc.new { |m| m.country.in?[\"USA\", \"Canada\"] }\nend\n</code></pre>\n\n<p>conversely:</p>\n\n<pre><code>validates :state, presence: true, if: Proc.new { |m| m.country.in?[\"USA\", \"Canada\"] }\n</code></pre>\n\n<p>You can learn more about custom validations at the <a href=\"http://guides.rubyonrails.org/active_record_validations.html#using-a-symbol-with-if-and-unless\" rel=\"nofollow\">RailsGuides page for Active Record Validations</a>. Section 5 talks about conditional validations using custom methods and procs. Section 6 talks about even more powerful custom validations but I doubt you need to go that far here.</p>\n"}, {"comments": [{"owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "edited": false, "score": 0, "creation_date": 1450881425, "post_id": 34432692, "comment_id": 56616688, "body": "thanks for the upvote! for <code>validates :state, inclusion: { in: %w(usa canada)</code>, wouldn&#39;t this require that the <code>state</code> field be either <code>&quot;usa&quot;</code> or <code>&quot;canada&quot;</code>? I don&#39;t think the OP wants these values to be states, but that the <code>state</code> field should be populated by an actual state (like <code>&#39;California&quot;</code>) if the <code>country</code> field is populated by <code>&quot;usa&quot;</code> or <code>&quot;canada&quot;</code>, hence my validation being on <code>state</code> for presence if the <code>country</code> is <code>in?</code> one of those two."}, {"owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "reply_to_user": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "edited": false, "score": 0, "creation_date": 1450888698, "post_id": 34432692, "comment_id": 56621151, "body": "Yes that&#39;s probably right - it makes more sense than my interpretation. I thought the OP wanted the state to only be USA or Canada"}], "tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": false, "score": 1, "last_activity_date": 1450863843, "creation_date": 1450863843, "answer_id": 34432692, "question_id": 34428248, "link": "https://stackoverflow.com/questions/34428248/having-fields-be-conditionally-required-in-rails-model/34432692#34432692", "title": "Having fields be conditionally required in rails model?", "body": "<p>To add to <code>sixty4bit</code>'s answer (which I upvoted), you should put your validations into Rails' backend, only handling the response with JS.</p>\n\n<hr>\n\n<p><a href=\"https://en.wikipedia.org/wiki/Convention_over_configuration\" rel=\"nofollow\">Convention over configuration</a> calls for you to use as much of the inbuilt framework functionality as you can; when you start configuring validations etc through JQuery, you end up with code all over the place, often leading to massive bloat (repetition of code etc).</p>\n\n<p>Rails' validation system is very good -- you can send any set of params through your controller and the model will accept/reject depending on whether the data fits the validations. </p>\n\n<p>Thus, I would definitely suggest putting a <a href=\"http://guides.rubyonrails.org/active_record_validations.html\" rel=\"nofollow\"><code>validator</code></a> in your model; I'd do it slightly differently than <code>sixty4bit</code>'s answer (<a href=\"http://guides.rubyonrails.org/active_record_validations.html#using-a-string-with-if-and-unless\" rel=\"nofollow\">you can use strings with <code>if</code>/<code>unless</code></a>):</p>\n\n<pre><code>#app/models/model.rb\nclass Model &lt; ActiveRecord::Base\n   validates :state, inclusion: { in: %w(usa canada),\n    message: \"%{value} is not a valid state\" }, unless: \"state.blank?\"\nend\n</code></pre>\n\n<p>--</p>\n\n<blockquote>\n  <p>it seems like the model for the validation, and the view for the presentation of the box</p>\n</blockquote>\n\n<p>In addition to the model validation (which is for the params alone), you'd need some sort of front-end mechanism to deal with the blanking-out of the select box.</p>\n\n<p>This can be done relatively simply:</p>\n\n<pre><code>#app/assets/javascripts/application.js\n$(document).on(\"change\", \"select#state\", function(e) {\n    if ($(this).val() != \"USA\") || ($(this).val() != \"Canada\") {\n       $(this).attr(\"disabled\", true);\n    }\n});\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 3562355, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1365920638/picture?type=large", "display_name": "user3562355", "link": "https://stackoverflow.com/users/3562355/user3562355"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 950, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1450863843, "creation_date": 1450841875, "question_id": 34428248, "link": "https://stackoverflow.com/questions/34428248/having-fields-be-conditionally-required-in-rails-model", "title": "Having fields be conditionally required in rails model?", "body": "<p>I am working on a rails app for a moving company.  I am working on a way for leads to enter data that will be submitted.  There is a lot of very straight forward information (name, email, phone, etc.) but they also need to enter an origin Address, Zip code, city, state and country and same for a destination.  I want the State box to be a select box with a list of states/provinces, but ONLY if the country is the United States or Canada.  If the country is not the United States or Canada, the box will disappear/they will not be able to submit a value.  Is this possible in rails, or is this more likely something I would use jquery for?  Would it be implemented in the model, controller or view (it seems like the model for the validation, and the view for the presentation of the box, but I'm not sure)?</p>\n\n<p>I'm still kinda new to rails, so I'm sorry if this should be a simple answer.  I'm using rails 4 for this app.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "ruby-on-rails-4", "html-table"], "answers": [{"comments": [{"owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "edited": false, "score": 0, "creation_date": 1450843046, "post_id": 34428298, "comment_id": 56597708, "body": "Thanks! I haven&#39;t heard pivots before. One problem. To add some complexity the items table is from a join, the &#39;name&#39; column is from a table we&#39;ll call table_storing_name. here is the query <code>SELECT table_storing_name.name, items.key, items.value  FROM &quot;table_storing_name&quot;  INNER JOIN &quot;items&quot;  ON &quot;items&quot;.&quot;table_storing_name_id&quot; = &quot;table_storing_name&quot;.&quot;id&quot;  WHERE &quot;table_storing_name&quot;.&quot;category_id&quot; = 5</code> could pivots fit in with this?"}, {"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "reply_to_user": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "edited": false, "score": 0, "creation_date": 1450843156, "post_id": 34428298, "comment_id": 56597733, "body": "I&#39;ll try to update my question, but I will leave the first on there as well because it answers your original problem."}, {"owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "edited": false, "score": 0, "creation_date": 1450843785, "post_id": 34428298, "comment_id": 56597909, "body": "Thanks. sorry for throwing a spanner in the works, i didn&#39;t think of doing it through SQL. I&#39;ll give this a shot."}, {"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "reply_to_user": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "edited": false, "score": 0, "creation_date": 1450843856, "post_id": 34428298, "comment_id": 56597935, "body": "SQL is the place to do such data manipulations because it was designed for this purpose."}], "tags": [], "owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "is_accepted": true, "score": 1, "last_activity_date": 1450843292, "last_edit_date": 1450843292, "creation_date": 1450842208, "answer_id": 34428298, "question_id": 34428246, "link": "https://stackoverflow.com/questions/34428246/rails-how-to-loop-through-db-table-column-where-row-value-is-x-and-display-i/34428298#34428298", "title": "Rails - How to loop through db table column where row value is &#39;x&#39; and display in html table", "body": "<p>You are trying to do a <em>pivot</em> on the <code>Items</code> table.  Try using the following query.  This should return the data in exactly the format you need, freeing you from having to do complex manipulations in your HTML layer.</p>\n\n<pre><code>SELECT name,\n       SUM(CASE WHEN key = 'k1' THEN value ELSE 0 END) AS k1,\n       SUM(CASE WHEN key = 'k2' THEN value ELSE 0 END) AS k2,\n       SUM(CASE WHEN key = 'k3' THEN value ELSE 0 END) AS k3\nFROM Items\nGROUP BY name\n</code></pre>\n\n<p>Here is the actual query you want, based on the new information you provided:</p>\n\n<pre><code>SELECT table_storing_name.name,\n       SUM(CASE WHEN items.key = 'k1' THEN items.value ELSE 0 END) AS k1,\n       SUM(CASE WHEN items.key = 'k2' THEN items.value ELSE 0 END) AS k2,\n       SUM(CASE WHEN items.key = 'k3' THEN items.value ELSE 0 END) AS k3\nFROM \"table_storing_name\" INNER JOIN \"items\"\n    ON \"items\".\"table_storing_name_id\" = \"table_storing_name\".\"id\"\nWHERE \"table_storing_name\".\"category_id\" = 5\nGROUP BY table_storing_name.name\n</code></pre>\n"}], "owner": {"reputation": 1675, "user_id": 3234020, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/82171ee5bc1b2139a9834c92ce52b4c7?s=128&d=identicon&r=PG&f=1", "display_name": "Rob", "link": "https://stackoverflow.com/users/3234020/rob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 617, "favorite_count": 0, "accepted_answer_id": 34428298, "answer_count": 1, "score": 1, "last_activity_date": 1450843292, "creation_date": 1450841861, "question_id": 34428246, "link": "https://stackoverflow.com/questions/34428246/rails-how-to-loop-through-db-table-column-where-row-value-is-x-and-display-i", "title": "Rails - How to loop through db table column where row value is &#39;x&#39; and display in html table", "body": "<p>This is a bit hard to explain so I'll map it out</p>\n\n<p>This is an example of the db table</p>\n\n<pre><code>    Table - Items\n-----------------------\n| name | key  | value |\n-----------------------\n| n1   | k1   |  12   |\n-----------------------\n| n1   | k2   |  32   |\n-----------------------\n| n1   | k3   |  22   |\n-----------------------\n| n2   | k1   |  56   |\n-----------------------\n| n2   | k2   |  34   |\n-----------------------\n| n2   | k3   |  11   |\n-----------------------\n</code></pre>\n\n<p>The DB table is simplified to keep the post short and i cant change the way the DB is setup (it would make my life easier but i cant)</p>\n\n<p>I need the data to be looped through and displayed like below where the 'value' associated with the 'key' is in the table.</p>\n\n<pre><code>| Name   |   k1   |  k2  | k3   |\n---------------------------------\n|  n1    |   12   |  32  | 22   |\n---------------------------------\n|  n2    |   56   |  34  | 11   |\n---------------------------------\n</code></pre>\n\n<p>For the table I've tried </p>\n\n<pre><code>&lt;table id=\"example\" class=\"display\"&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th&gt;Name&lt;/th&gt;\n      &lt;th&gt;k1&lt;/th&gt;\n      &lt;th&gt;k2&lt;/th&gt; \n      &lt;th&gt;k3&lt;/th&gt;   \n    &lt;/tr&gt;\n  &lt;/thead&gt;\n  &lt;tbody&gt;\n\n  &lt;%  @items.each do |item| %&gt;\n    &lt;tr&gt;\n                           &lt;td&gt;&lt;%= item.name %&gt;&lt;/td&gt;\n    &lt;% if item.key == 'k1' %&gt; &lt;td&gt;&lt;%= item.value %&gt;&lt;/td&gt; &lt;% end %&gt;\n    &lt;% if item.key == 'k2' %&gt; &lt;td&gt;&lt;%= item.value %&gt;&lt;/td&gt; &lt;% end %&gt;\n    &lt;% if item.key == 'k3' %&gt; &lt;td&gt;&lt;%= item.value %&gt;&lt;/td&gt; &lt;% end %&gt;\n\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>But this only runs thought the first item.value column and leaves k2 and k3 columns blank. </p>\n\n<p>Are there any methods or something to help with this? I'm sure there is a more efficient and simpler way of doing this but i cant find it or think of it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "multithreading", "amazon-web-services", "delayed-job"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1450862485, "post_id": 34427977, "comment_id": 56605453, "body": "Related to unicorn&#39;s forking perhaps? (When you fork a process only the thread that calls fork continues executing in the new process)"}, {"owner": {"reputation": 583, "user_id": 863351, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4399328f0f041d5a0004196193875bc3?s=128&d=identicon&r=PG", "display_name": "Mad Dog", "link": "https://stackoverflow.com/users/863351/mad-dog"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1450882037, "post_id": 34427977, "comment_id": 56617044, "body": "I wasn&#39;t aware that Thread.new was forking unicorn - though admittedly I do not know enough about unicorn."}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1450882196, "post_id": 34427977, "comment_id": 56617153, "body": "Thread.new doesn&#39;t cause forking but unicorn itself does fork, which will interrupt threads. If this is the problem you&#39;d be able to reproduce it with a thread that just writes to a log file or something every second (to exclude SQS as a reason for the problem)"}], "owner": {"reputation": 583, "user_id": 863351, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/4399328f0f041d5a0004196193875bc3?s=128&d=identicon&r=PG", "display_name": "Mad Dog", "link": "https://stackoverflow.com/users/863351/mad-dog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 190, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1450839826, "creation_date": 1450839826, "last_edit_date": 1495535242, "question_id": 34427977, "link": "https://stackoverflow.com/questions/34427977/background-thread-appears-to-lock-on-rails-using-aws-queuepoller", "title": "Background thread appears to lock on Rails using AWS QueuePoller", "body": "<p>We have a need to consume from a an SQS queue in our Rails application; for this we've chosen to use <a href=\"http://docs.aws.amazon.com/sdkforruby/api/Aws/SQS/QueuePoller.html\" rel=\"nofollow noreferrer\">SQS QueuePoller</a></p>\n\n<p>Following the response to a <a href=\"https://stackoverflow.com/questions/33482560/how-do-i-listen-for-aws-sqs-messages-in-the-background-of-my-rails-app\">similar question</a> that was labeled too broad, we created the following in an initializer:</p>\n\n<pre><code>require 'json'\nENV['AWS_REGION'] = 'us-east-1'\nif Rails.env.production?\n  Thread.abort_on_exception = true\n  Thread.new do\n    CUSTOM_LOGGER = [Custom Logger Defn...]\n    queue_url = \"....\"\n    poller = Aws::SQS::QueuePoller.new(queue_url)\n\n    poller.before_request do |stats|\n      CUSTOM_LOGGER.info(\"requests: #{stats.request_count}\")\n      CUSTOM_LOGGER.info(\"messages: #{stats.received_message_count}\")\n      CUSTOM_LOGGER.info(\"last-timestamp: #{stats.last_message_received_at}\")\n    end\n\n    CUSTOM_LOGGER.info(\"Start polling!\")\n    poller.poll do |msg|\n      CUSTOM_LOGGER.debug(\"Received message: \"+msg.body)\n      begin\n        json_msg = JSON.parse(msg.body)\n        job_name = json_msg[\"Message\"]\n        job_name.constantize.perform_later if defined? job_name.constantize\n        CUSTOM_LOGGER.debug(\"Submitted to delayed job: \"+job_name)\n      rescue =&gt; e\n        throw :skip_delete\n      end\n    end\n    CUSTOM_LOGGER.info(\"Finished polling - exiting thread!\")\n    ActiveRecord::Base.connection.close\n  end\nend\n</code></pre>\n\n<p>This yielded strange behavior - when running the rails server (daemon/production) mode, the poller seemed to consume all the messages currently on the queue then stopped (no log output for the thread finishing polling, just seems stuck).  However, if we run from the Rails console, the thread seems to move along happily consuming from SQS indefinitely.</p>\n\n<p>Any particular reason that a background thread would get stuck/die in Unicorn right off the bat?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-url-shortener"], "answers": [{"comments": [{"owner": {"reputation": 680, "user_id": 2014130, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/KK2ms.jpg?s=128&g=1", "display_name": "prograshid", "link": "https://stackoverflow.com/users/2014130/prograshid"}, "edited": false, "score": 0, "creation_date": 1483169413, "post_id": 34429045, "comment_id": 70015735, "body": "You also need to specify key parameter in your request."}], "tags": [], "owner": {"reputation": 1173, "user_id": 3575850, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/gTV7j.jpg?s=128&g=1", "display_name": "lalala", "link": "https://stackoverflow.com/users/3575850/lalala"}, "is_accepted": true, "score": 0, "last_activity_date": 1450847641, "creation_date": 1450847641, "answer_id": 34429045, "question_id": 34427927, "link": "https://stackoverflow.com/questions/34427927/google-url-shortener-returns-error-domain-usagelimits-reason-ipref/34429045#34429045", "title": "Google URL Shortener returns error, {&quot;domain&quot;=&gt;&quot;usageLimits&quot;, &gt; &quot;reason&quot;=&gt;&quot;ipRefererBlocked", "body": "<p>At a google developer console, if I made api key not specifying ip address, it didn't return error. But I'm still not sure why it returns error when it is specified ip address.</p>\n"}], "owner": {"reputation": 1173, "user_id": 3575850, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/gTV7j.jpg?s=128&g=1", "display_name": "lalala", "link": "https://stackoverflow.com/users/3575850/lalala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 536, "favorite_count": 0, "accepted_answer_id": 34429045, "answer_count": 1, "score": 0, "last_activity_date": 1450847641, "creation_date": 1450839453, "question_id": 34427927, "link": "https://stackoverflow.com/questions/34427927/google-url-shortener-returns-error-domain-usagelimits-reason-ipref", "title": "Google URL Shortener returns error, {&quot;domain&quot;=&gt;&quot;usageLimits&quot;, &gt; &quot;reason&quot;=&gt;&quot;ipRefererBlocked", "body": "<p>I'd like to use <a href=\"https://developers.google.com/url-shortener/v1/getting_started\" rel=\"nofollow\">google url shortener</a> on ruby.\nI've been using <a href=\"https://github.com/zigotto/googl\" rel=\"nofollow\">googl</a>.\nAt the google developer console, I've got an api key. I've set the ip address \"127.0.0.1\".</p>\n\n<p>Then, I wrote as following, however it returned an error.\nCould you tell me how to solve the problem?</p>\n\n<pre><code>Googl.shorten('url',\"127.0.0.1\",my_api_key)\n</code></pre>\n\n<blockquote>\n  <p>Googl::Error ({\"error\"=>{\"errors\"=>[{\"domain\"=>\"usageLimits\",\n  \"reason\"=>\"ipRefererBlocked\", \"message\"=>\"There is a per-IP or\n  per-Referer restriction configured on your API key and the request\n  does not match these restrictions. Please use the Google Developers\n  Console to update your API key configuration if request from this IP\n  or referer should be allowed.\",\n  \"extendedHelp\"=>\"<a href=\"https://console.developers.google.com\" rel=\"nofollow\">https://console.developers.google.com</a>\"}],\n  \"code\"=>403, \"message\"=>\"There is a per-IP or per-Referer restriction\n  configured on your API key and the request does not match these\n  restrictions. Please use the Google Developers Console to update your\n  API key configuration if request from this IP or referer should be\n  allowed.\"}}):   app/controllers/products_controller.rb:102:in `create'</p>\n</blockquote>\n"}, {"tags": ["ruby", "sqlite"], "answers": [{"comments": [{"owner": {"reputation": 89146, "user_id": 211563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32a10a2f047dec1e5582e74cba6b3ec?s=128&d=identicon&r=PG", "display_name": "Andrew Marshall", "link": "https://stackoverflow.com/users/211563/andrew-marshall"}, "edited": false, "score": 1, "creation_date": 1450838710, "post_id": 34427795, "comment_id": 56596772, "body": "Or use single quotes."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 89146, "user_id": 211563, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d32a10a2f047dec1e5582e74cba6b3ec?s=128&d=identicon&r=PG", "display_name": "Andrew Marshall", "link": "https://stackoverflow.com/users/211563/andrew-marshall"}, "edited": false, "score": 0, "creation_date": 1450840025, "post_id": 34427795, "comment_id": 56597047, "body": "@AndrewMarshall True, but you still have to worry about some incredibly rare cases and Ruby people seem to be allergic to single quotes. I use single quotes unless I specifically need something that only double quotes provide but that seems to be very rare."}], "tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": false, "score": 1, "last_activity_date": 1450839874, "last_edit_date": 1495540339, "creation_date": 1450838387, "answer_id": 34427795, "question_id": 34427668, "link": "https://stackoverflow.com/questions/34427668/not-able-to-open-sqlite3-database-using-ruby-program/34427795#34427795", "title": "Not able to open SQLite3 database using Ruby program", "body": "<p>I'd guess that your problem is that a <code>\\</code> inside a double quoted string is used to begin an escape sequence. For example:</p>\n\n<pre><code>&gt; puts \"C:\\Users\\aroraku\\Desktop\\SQL\\adaptive.db\"\nC:UsersrorakuDesktopSQLdaptive.db\n</code></pre>\n\n<p>There were also a couple beeps from my terminal that I can't copy'n'paste that well.</p>\n\n<p>You'll need to double your backslashes:</p>\n\n<pre><code>\"C:\\\\Users\\\\aroraku\\\\Desktop\\\\SQL\\\\adaptive.db\"\n</code></pre>\n\n<p>or use forward slashes instead:</p>\n\n<pre><code>\"C:/Users/aroraku/Desktop/SQL/adaptive.db\"\n</code></pre>\n\n<p>Windows has historically allowed either forward or back slashes in path names, I'm not sure if this is still true so the forward slash version may not work.</p>\n\n<p>Single quotes (as noted by <a href=\"https://stackoverflow.com/users/211563/andrew-marshall\">Andrew Marshall</a>) are also an option:</p>\n\n<pre><code>'C:\\Users\\aroraku\\Desktop\\SQL\\adaptive.db'\n</code></pre>\n\n<p>but you can still run into issues with certain odd filenames as a backslash still has meaning in some narrow cases (such as <code>'\\\\'</code> and <code>'\\''</code>) inside single-quoted strings.</p>\n"}], "owner": {"reputation": 106, "user_id": 1932914, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/002e7312eb086a7e86ab1da1bfe2103c?s=128&d=identicon&r=PG", "display_name": "user1932914", "link": "https://stackoverflow.com/users/1932914/user1932914"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450839874, "creation_date": 1450837426, "question_id": 34427668, "link": "https://stackoverflow.com/questions/34427668/not-able-to-open-sqlite3-database-using-ruby-program", "title": "Not able to open SQLite3 database using Ruby program", "body": "<p>I am working on a simple program where I need to open my Sqlite3 database by writing Ruby code but I am getting the following error on executing it:\n'initialize': unable to open database file(Sqlite\u00a3:CantOpenException) \n    from first.rb:4:in 'new'\n    from first.rb:4:in ''</p>\n\n<p>The code is here:</p>\n\n<pre><code>require \"sqlite3\"\n\n# Open a database\ndb = SQLite3::Database.open \"C:\\Users\\aroraku\\Desktop\\SQL\\adaptive.db\"\n\n\n# Find a few rows\ndb.execute( \"\nSelect count(uuid) as RegistredPeopleNo, strftime('%Y-%m',created_at) AS Month\nfrom users\ngroup by strftime('%Y-%m',created_at)\norder by Month;\" ) do |row|\n  p row\nend\n</code></pre>\n\n<p>Can someone please help me with this problem. Thanks in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "associations"], "comments": [{"owner": {"reputation": 171, "user_id": 5654057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bda494cccb0b45592f0c1ed9059be85?s=128&d=identicon&r=PG&f=1", "display_name": "Veets", "link": "https://stackoverflow.com/users/5654057/veets"}, "edited": false, "score": 0, "creation_date": 1450834908, "post_id": 34427212, "comment_id": 56595818, "body": "Try <code>&lt;%= @event.user.user_name %&gt;</code> in the show.html.erb if you are planning to show the user_name(provided that you have a &#39;user_name&#39; column in the users table) who created the event right after creation of the event."}, {"owner": {"reputation": 1133, "user_id": 4715927, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/7ccf41d253b4391ebfeef44a2f73052d?s=128&d=identicon&r=PG&f=1", "display_name": "Murat Kaya", "link": "https://stackoverflow.com/users/4715927/murat-kaya"}, "reply_to_user": {"reputation": 171, "user_id": 5654057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bda494cccb0b45592f0c1ed9059be85?s=128&d=identicon&r=PG&f=1", "display_name": "Veets", "link": "https://stackoverflow.com/users/5654057/veets"}, "edited": false, "score": 0, "creation_date": 1450835157, "post_id": 34427212, "comment_id": 56595877, "body": "now its says  undefined method `user&#39; for nil:NilClass"}, {"owner": {"reputation": 171, "user_id": 5654057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1bda494cccb0b45592f0c1ed9059be85?s=128&d=identicon&r=PG&f=1", "display_name": "Veets", "link": "https://stackoverflow.com/users/5654057/veets"}, "edited": false, "score": 0, "creation_date": 1450835648, "post_id": 34427212, "comment_id": 56595983, "body": "Please post your whole show.html.erb file if it contains anything other than <code>&lt;%= @event.user.user_name %&gt;</code> in the question."}, {"owner": {"reputation": 5470, "user_id": 2052097, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/KOzAT.jpg?s=128&g=1", "display_name": "z atef", "link": "https://stackoverflow.com/users/2052097/z-atef"}, "edited": false, "score": 0, "creation_date": 1450835762, "post_id": 34427212, "comment_id": 56596006, "body": "Are you using devise ?"}, {"owner": {"reputation": 1895, "user_id": 702772, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f52d6eda1d907af7b1a7b477eeed8fd8?s=128&d=identicon&r=PG", "display_name": "vutran", "link": "https://stackoverflow.com/users/702772/vutran"}, "edited": false, "score": 0, "creation_date": 1450836094, "post_id": 34427212, "comment_id": 56596091, "body": "I can see that you don&#39;t have <code>user_name</code> field for that model. I believe that you wanted to have that field but you forgot to create one. You can add and migrate your database. What exactly the view are you trying to show it in?"}, {"owner": {"reputation": 1133, "user_id": 4715927, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/7ccf41d253b4391ebfeef44a2f73052d?s=128&d=identicon&r=PG&f=1", "display_name": "Murat Kaya", "link": "https://stackoverflow.com/users/4715927/murat-kaya"}, "edited": false, "score": 0, "creation_date": 1450836449, "post_id": 34427212, "comment_id": 56596174, "body": "Actually I added user_name field to my database I can see it and update it.No I am not using devise."}, {"owner": {"reputation": 5470, "user_id": 2052097, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/KOzAT.jpg?s=128&g=1", "display_name": "z atef", "link": "https://stackoverflow.com/users/2052097/z-atef"}, "edited": false, "score": 0, "creation_date": 1450837025, "post_id": 34427212, "comment_id": 56596327, "body": "when you  created the user model like so rails g model blahblah .... Did you   add the association event:references"}, {"owner": {"reputation": 1133, "user_id": 4715927, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/7ccf41d253b4391ebfeef44a2f73052d?s=128&d=identicon&r=PG&f=1", "display_name": "Murat Kaya", "link": "https://stackoverflow.com/users/4715927/murat-kaya"}, "edited": false, "score": 0, "creation_date": 1450837170, "post_id": 34427212, "comment_id": 56596360, "body": "No, I didn&#39;t add But I added index when I create the user_id  to events like this.    add_column :events, :user_id, :integer     add_index :events, :user_id"}, {"owner": {"reputation": 1976, "user_id": 5109043, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P0r5Dh4pLMU/AAAAAAAAAAI/AAAAAAAAABk/9sH76qd9Kkg/photo.jpg?sz=128", "display_name": "Hoang Phan", "link": "https://stackoverflow.com/users/5109043/hoang-phan"}, "edited": false, "score": 0, "creation_date": 1450837673, "post_id": 34427212, "comment_id": 56596489, "body": "Could you show the <code>def show</code> action in events controller?"}, {"owner": {"reputation": 1133, "user_id": 4715927, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/7ccf41d253b4391ebfeef44a2f73052d?s=128&d=identicon&r=PG&f=1", "display_name": "Murat Kaya", "link": "https://stackoverflow.com/users/4715927/murat-kaya"}, "edited": false, "score": 0, "creation_date": 1450838000, "post_id": 34427212, "comment_id": 56596585, "body": "I don&#39;t want to show user name in show.html I want to show user name in event index.  And this is index action  def index     @events = Event.all   end"}, {"owner": {"reputation": 1976, "user_id": 5109043, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P0r5Dh4pLMU/AAAAAAAAAAI/AAAAAAAAABk/9sH76qd9Kkg/photo.jpg?sz=128", "display_name": "Hoang Phan", "link": "https://stackoverflow.com/users/5109043/hoang-phan"}, "edited": false, "score": 0, "creation_date": 1450840089, "post_id": 34427212, "comment_id": 56597064, "body": "I have edited your question and added some details from your comments to   be more specific about what you are expecting, please check again and see if my answer below helps you with it."}], "answers": [{"tags": [], "owner": {"reputation": 1976, "user_id": 5109043, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-P0r5Dh4pLMU/AAAAAAAAAAI/AAAAAAAAABk/9sH76qd9Kkg/photo.jpg?sz=128", "display_name": "Hoang Phan", "link": "https://stackoverflow.com/users/5109043/hoang-phan"}, "is_accepted": true, "score": 2, "last_activity_date": 1450839932, "creation_date": 1450839932, "answer_id": 34427993, "question_id": 34427212, "link": "https://stackoverflow.com/questions/34427212/belongs-to-user-association/34427993#34427993", "title": "Belongs To User association", "body": "<p>Ok so here's the problem:</p>\n\n<p>You want to show the event's user's name in index page but you can't be sure all events have one user associated with them. To avoid it you could use.</p>\n\n<pre><code>&lt;%= event.user.try(:user_name) || 'No user associated' %&gt;\n</code></pre>\n\n<p>Good luck!</p>\n"}, {"tags": [], "owner": {"reputation": 73119, "user_id": 1143732, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/mFUOI.jpg?s=128&g=1", "display_name": "Richard Peck", "link": "https://stackoverflow.com/users/1143732/richard-peck"}, "is_accepted": false, "score": 1, "last_activity_date": 1450867374, "creation_date": 1450867374, "answer_id": 34433849, "question_id": 34427212, "link": "https://stackoverflow.com/questions/34427212/belongs-to-user-association/34433849#34433849", "title": "Belongs To User association", "body": "<p>Although the answer will get your app to work, it won't fix your problem.</p>\n\n<p>The core issue is that your <code>Event</code> doesn't have an associated <code>User</code> object. This would not be a problem, except it seems from your code that you <em>require</em> an <code>Event</code> to have an associated <code>User</code> (<code>current_user.events.new</code> etc)...</p>\n\n<p>You need the following:</p>\n\n<pre><code>#app/models/event.rb\nclass Event &lt; ActiveRecord::Base\n   belongs_to :user \n   validates :user, presence: true #-&gt; always makes sure user exists\n   delegate :user_name, to: :user #-&gt; event.user_name\nend\n</code></pre>\n\n<p>--</p>\n\n<p>If you use the above code, you'll be able to call <code>@event.user_name</code> (solving the <a href=\"https://en.wikipedia.org/wiki/Law_of_Demeter\" rel=\"nofollow\">law of demeter</a> with <a href=\"http://api.rubyonrails.org/classes/Module.html#method-i-delegate\" rel=\"nofollow\"><code>delegate</code></a>). You'll also benefit from using <a href=\"http://guides.rubyonrails.org/active_record_validations.html#presence\" rel=\"nofollow\"><code>validates presence</code></a> to ensure the <code>:user</code> association exists on create &amp; update.</p>\n\n<p>This will allow you to rely on the <code>@event.user</code> object, which - to me - is far better than having to say \"No user associated\" in your app:</p>\n\n<pre><code>#view\n&lt;%= @event.user_name if @event.user %&gt;\n</code></pre>\n"}], "owner": {"reputation": 1133, "user_id": 4715927, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/7ccf41d253b4391ebfeef44a2f73052d?s=128&d=identicon&r=PG&f=1", "display_name": "Murat Kaya", "link": "https://stackoverflow.com/users/4715927/murat-kaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 781, "favorite_count": 0, "accepted_answer_id": 34427993, "answer_count": 2, "score": 3, "last_activity_date": 1450867374, "creation_date": 1450834262, "last_edit_date": 1450836997, "question_id": 34427212, "link": "https://stackoverflow.com/questions/34427212/belongs-to-user-association", "title": "Belongs To User association", "body": "<p>I just want to show the username who created the events. But when I try it says </p>\n\n<pre><code>undefined method `user_name' for nil:NilClass\n</code></pre>\n\n<p>This is my event.rb</p>\n\n<pre><code>class Event &lt; ActiveRecord::Base\n  belongs_to :user\n  validates :name, presence: true\n  validates :description, presence: true, length: {minimum: 5}\nend\n</code></pre>\n\n<p>And this is my user.rb</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_secure_password\n  has_many :events\nend\n</code></pre>\n\n<p>And I am trying to show the user name in <code>html.erb</code> file like this.</p>\n\n<pre><code>&lt;%= event.user.user_name %&gt;\n</code></pre>\n\n<p>But I am getting this error.</p>\n\n<p>So this is my create method in <code>events_controller</code></p>\n\n<pre><code>def create\n\n    @event = current_user.events.new(event_params)\n\n    respond_to do |format|\n      if @event.save\n        format.html { redirect_to @event, notice: 'Event was successfully created.' }\n      else\n        format.html { render :new }\n      end\n    end\n  end\n</code></pre>\n\n<p>So what should I do for showing username in that page.</p>\n\n<p>Thank You</p>\n"}, {"tags": ["ruby", "xpath", "nokogiri"], "comments": [{"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1450856667, "post_id": 34426698, "comment_id": 56602760, "body": "You can use it like that but you would need to do <code>xml.remove_namespaces!</code> first"}], "answers": [{"comments": [{"owner": {"reputation": 12227, "user_id": 917187, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/HdPa7.jpg?s=128&g=1", "display_name": "Dave Sag", "link": "https://stackoverflow.com/users/917187/dave-sag"}, "edited": false, "score": 0, "creation_date": 1450831642, "post_id": 34426795, "comment_id": 56595108, "body": "Thanks Daniel \u2014 I&#39;ve tried all sorts of combinations now and none of them work. I&#39;ll keep at it."}, {"owner": {"reputation": 46640, "user_id": 317052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GaULO.jpg?s=128&g=1", "display_name": "Daniel Haley", "link": "https://stackoverflow.com/users/317052/daniel-haley"}, "reply_to_user": {"reputation": 12227, "user_id": 917187, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/HdPa7.jpg?s=128&g=1", "display_name": "Dave Sag", "link": "https://stackoverflow.com/users/917187/dave-sag"}, "edited": false, "score": 1, "creation_date": 1450832240, "post_id": 34426795, "comment_id": 56595263, "body": "You could also try <code>&#47;&#47;*[local-name()=&#39;SessionID&#39;]</code>"}], "tags": [], "owner": {"reputation": 46640, "user_id": 317052, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/GaULO.jpg?s=128&g=1", "display_name": "Daniel Haley", "link": "https://stackoverflow.com/users/317052/daniel-haley"}, "is_accepted": true, "score": 3, "last_activity_date": 1450830759, "creation_date": 1450830759, "answer_id": 34426795, "question_id": 34426698, "link": "https://stackoverflow.com/questions/34426698/why-isnt-nokogiris-xpath-working-as-expected/34426795#34426795", "title": "Why isn&#39;t Nokogiri&#39;s xpath working as expected?", "body": "<p>It's because <code>SessionID</code> is in the namespace <code>http://tempuri.org/</code>.</p>\n\n<p>Try something like (untested):</p>\n\n<pre><code>xml.xpath(\"//x:SessionID\", {\"x\" =&gt; \"http://tempuri.org/\"})\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12227, "user_id": 917187, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/HdPa7.jpg?s=128&g=1", "display_name": "Dave Sag", "link": "https://stackoverflow.com/users/917187/dave-sag"}, "edited": false, "score": 0, "creation_date": 1450831305, "post_id": 34426799, "comment_id": 56595032, "body": "yep I know. I was just trying to parse this manually for a unit test and it&#39;s bugging me that it&#39;s not working"}], "tags": [], "owner": {"reputation": 910, "user_id": 193530, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc7d0eba790c7e609b1c04da744200d3?s=128&d=identicon&r=PG", "display_name": "suranyami", "link": "https://stackoverflow.com/users/193530/suranyami"}, "is_accepted": false, "score": 0, "last_activity_date": 1450830781, "creation_date": 1450830781, "answer_id": 34426799, "question_id": 34426698, "link": "https://stackoverflow.com/questions/34426698/why-isnt-nokogiris-xpath-working-as-expected/34426799#34426799", "title": "Why isn&#39;t Nokogiri&#39;s xpath working as expected?", "body": "<p>Not a direct answer to your question, but if you're wanting to parse SOAP, you'd be better off using the <code>savon</code> gem rather than <code>nokogiri</code>. It's specifically designed to handle all the intricacies of SOAP.</p>\n"}], "owner": {"reputation": 12227, "user_id": 917187, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/HdPa7.jpg?s=128&g=1", "display_name": "Dave Sag", "link": "https://stackoverflow.com/users/917187/dave-sag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 34426795, "answer_count": 2, "score": 4, "last_activity_date": 1450831009, "creation_date": 1450830050, "last_edit_date": 1450831009, "question_id": 34426698, "link": "https://stackoverflow.com/questions/34426698/why-isnt-nokogiris-xpath-working-as-expected", "title": "Why isn&#39;t Nokogiri&#39;s xpath working as expected?", "body": "<p>I am parsing a Soap response with Nokogiri but for some reason the <code>xpath</code> or <code>css</code> methods can not find any tags beyond the <code>&lt;soap:Body&gt;</code> tag.</p>\n\n<p>The XML I am trying to parse is</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;\n&lt;soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\"\n    xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\n    xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"&gt;\n    &lt;soap:Body&gt;\n        &lt;AuthenticationResponse xmlns=\"http://tempuri.org/\"&gt;\n            &lt;AuthenticationResult&gt;\n                &lt;SessionID&gt;clinTQYART6qxeQ%k^Am&amp;amp;Sd5Co3&lt;/SessionID&gt;\n                &lt;RequestStatus&gt;1&lt;/RequestStatus&gt;\n                &lt;RequestMessage&gt;Success&lt;/RequestMessage&gt;\n            &lt;/AuthenticationResult&gt;\n        &lt;/AuthenticationResponse&gt;\n    &lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\n</code></pre>\n\n<p>If I inspect the parsed XML with a debugger I see</p>\n\n<pre><code>=&gt; #(Document:0x3fce3c4dd95c {\n  name = \"document\",\n  children = [\n    #(Element:0x3fce385b04dc {\n      name = \"Envelope\",\n      namespace = #(Namespace:0x3fce385b04b4 { prefix = \"soap\", href = \"http://schemas.xmlsoap.org/soap/envelope/\" }),\n      children = [\n        #(Element:0x3fce385e509c {\n          name = \"Body\",\n          namespace = #(Namespace:0x3fce385b04b4 { prefix = \"soap\", href = \"http://schemas.xmlsoap.org/soap/envelope/\" }),\n          children = [\n            #(Element:0x3fce385e4c64 {\n              name = \"AuthenticationResponse\",\n              namespace = #(Namespace:0x3fce385e4c14 { href = \"http://tempuri.org/\" }),\n              children = [\n                #(Element:0x3fce385e48a4 {\n                  name = \"AuthenticationResult\",\n                  namespace = #(Namespace:0x3fce385e4c14 { href = \"http://tempuri.org/\" }),\n                  children = [\n                    #(Element:0x3fce385e44f8 { name = \"SessionID\", namespace = #(Namespace:0x3fce385e4c14 { href = \"http://tempuri.org/\" }), children = [ #(Text \"clinTQYART6qxeQ%k^Am&amp;Sd5Co3\")] }),\n                    #(Element:0x3fce39dcff7c { name = \"RequestStatus\", namespace = #(Namespace:0x3fce385e4c14 { href = \"http://tempuri.org/\" }), children = [ #(Text \"1\")] }),\n                    #(Element:0x3fce39dcfa2c { name = \"RequestMessage\", namespace = #(Namespace:0x3fce385e4c14 { href = \"http://tempuri.org/\" }), children = [ #(Text \"Success\")] })]\n                  })]\n              })]\n          })]\n      })]\n  })\n</code></pre>\n\n<p>which is fine.</p>\n\n<p>But <code>xml.xpath(\"//SessionID\")</code> gives <code>[]</code></p>\n\n<p>However <code>xml.xpath(\"//soap:Body\")[0]</code>  gives</p>\n\n<pre><code>=&gt; #(Element:0x3fce385e509c {\n  name = \"Body\",\n  namespace = #(Namespace:0x3fce385b04b4 { prefix = \"soap\", href = \"http://schemas.xmlsoap.org/soap/envelope/\" }),\n  children = [\n    #(Element:0x3fce385e4c64 {\n      name = \"AuthenticationResponse\",\n      namespace = #(Namespace:0x3fce385e4c14 { href = \"http://tempuri.org/\" }),\n      children = [\n        #(Element:0x3fce385e48a4 {\n          name = \"AuthenticationResult\",\n          namespace = #(Namespace:0x3fce385e4c14 { href = \"http://tempuri.org/\" }),\n          children = [\n            #(Element:0x3fce385e44f8 { name = \"SessionID\", namespace = #(Namespace:0x3fce385e4c14 { href = \"http://tempuri.org/\" }), children = [ #(Text \"clinTQYART6qxeQ%k^Am&amp;Sd5Co3\")] }),\n            #(Element:0x3fce39dcff7c { name = \"RequestStatus\", namespace = #(Namespace:0x3fce385e4c14 { href = \"http://tempuri.org/\" }), children = [ #(Text \"1\")] }),\n            #(Element:0x3fce39dcfa2c { name = \"RequestMessage\", namespace = #(Namespace:0x3fce385e4c14 { href = \"http://tempuri.org/\" }), children = [ #(Text \"Success\")] })]\n          })]\n      })]\n  })\n</code></pre>\n\n<p>and <code>xml.xpath(\"//soap:Body\")[0].children[0].children[0].children[0]</code> gives</p>\n\n<pre><code>=&gt; #(Element:0x3fce385e44f8 { name = \"SessionID\", namespace = #(Namespace:0x3fce385e4c14 { href = \"http://tempuri.org/\" }), children = [ #(Text \"clinTQYART6qxeQ%k^Am&amp;Sd5Co3\")] })\n</code></pre>\n\n<p>and consequently <code>xml.xpath(\"//soap:Body\")[0].children[0].children[0].children[0].content</code> gives me the correct id string.</p>\n\n<p>So why doesn't <code>xml.xpath(\"//SessionID\")</code> work?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "heroku", "asset-pipeline"], "answers": [{"tags": [], "owner": {"reputation": 9917, "user_id": 1586221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/96ab4c67eb62b315a8e7584f7dfd547a?s=128&d=identicon&r=PG", "display_name": "tompave", "link": "https://stackoverflow.com/users/1586221/tompave"}, "is_accepted": false, "score": 0, "last_activity_date": 1450830016, "creation_date": 1450830016, "answer_id": 34426696, "question_id": 34426583, "link": "https://stackoverflow.com/questions/34426583/rails-image-asset-not-updating-in-pipeline/34426696#34426696", "title": "Rails image asset not updating in pipeline", "body": "<p>Odd. Try deleting <code>APP_ROOT/tmp/cache/assets</code></p>\n"}], "owner": {"reputation": 3481, "user_id": 759466, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/68PHH.png?s=128&g=1", "display_name": "captainrad", "link": "https://stackoverflow.com/users/759466/captainrad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1450830016, "creation_date": 1450829255, "last_edit_date": 1450829791, "question_id": 34426583, "link": "https://stackoverflow.com/questions/34426583/rails-image-asset-not-updating-in-pipeline", "title": "Rails image asset not updating in pipeline", "body": "<p>I made a minor change to a <code>.gif</code> file we have under our rails <code>/app/assets</code> directory.</p>\n\n<p>After running a <code>rake assets:clean</code> and <code>rake assets:precompile</code> I suddenly have the old version of the <code>.gif</code> being referenced in my <code>/public/assets</code> directory.</p>\n\n<p>If I delete it from the public directory and rerun the precompile it generates the old file yet again.</p>\n\n<p>What do I have to do to update an image in the asset pipeline?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1451423600, "post_id": 34426625, "comment_id": 56779502, "body": "Close enough. Thanks for the help!"}], "tags": [], "owner": {"reputation": 3930, "user_id": 4613236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wQZcm.jpg?s=128&g=1", "display_name": "Zoran", "link": "https://stackoverflow.com/users/4613236/zoran"}, "is_accepted": true, "score": 1, "last_activity_date": 1450829570, "creation_date": 1450829570, "answer_id": 34426625, "question_id": 34426544, "link": "https://stackoverflow.com/questions/34426544/how-to-abbreviate-date-select-month-year/34426625#34426625", "title": "How to abbreviate date_select month &amp; year?", "body": "<p>You can shorten the month names by using the <code>use_short_month</code> option, like so:</p>\n\n<pre><code>&lt;%= f.date_select :deadline, order: [:month, :day, :year], use_short_month: true, class: 'date-select' %&gt;\n</code></pre>\n\n<p>Hope it helps!</p>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 34426625, "answer_count": 1, "score": 0, "last_activity_date": 1450829570, "creation_date": 1450829073, "question_id": 34426544, "link": "https://stackoverflow.com/questions/34426544/how-to-abbreviate-date-select-month-year", "title": "How to abbreviate date_select month &amp; year?", "body": "<p><code>&lt;%= f.date_select :deadline, :order =&gt; [:month, :day, :year], class: 'date-select' %&gt;</code></p>\n\n<p>Instead of <code>date_select</code> showing:</p>\n\n<ul>\n<li><strong>December | 22 | 2015</strong></li>\n</ul>\n\n<p>How can we shorten the month and date:</p>\n\n<ul>\n<li><strong>Dec | 22 | 15</strong></li>\n</ul>\n\n<p>I mean this in terms of the _form not the output.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-chrome"], "comments": [{"owner": {"reputation": 13508, "user_id": 230202, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/014443228ec95795e9359bb239294dc1?s=128&d=identicon&r=PG", "display_name": "antpaw", "link": "https://stackoverflow.com/users/230202/antpaw"}, "edited": false, "score": 0, "creation_date": 1450830226, "post_id": 34426532, "comment_id": 56594767, "body": "people can enter this in the browser url window or use curl. if this breaks your code you should fix your code."}, {"owner": {"reputation": 1995, "user_id": 986820, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/15050e11f16301e15da9970a82d2a62f?s=128&d=identicon&r=PG", "display_name": "giorgio", "link": "https://stackoverflow.com/users/986820/giorgio"}, "reply_to_user": {"reputation": 13508, "user_id": 230202, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/014443228ec95795e9359bb239294dc1?s=128&d=identicon&r=PG", "display_name": "antpaw", "link": "https://stackoverflow.com/users/230202/antpaw"}, "edited": false, "score": 0, "creation_date": 1450834040, "post_id": 34426532, "comment_id": 56595645, "body": "Why on earth would somebody enter such a bizarre querystring in the browser? Its not the sort of thing you just make up for the fun of it! It is worth pointing out that multiple users from different geographical locations all somehow got that same querystring"}, {"owner": {"reputation": 1989, "user_id": 1520130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9000383017000de1e1025f4f80d8655?s=128&d=identicon&r=PG", "display_name": "osman", "link": "https://stackoverflow.com/users/1520130/osman"}, "edited": false, "score": 0, "creation_date": 1450835268, "post_id": 34426532, "comment_id": 56595907, "body": "Does look like the little cross that google added in labs - <a href=\"https://productforums.google.com/forum/#!topic/gmail/uOM5CLR9xMw\" rel=\"nofollow noreferrer\">productforums.google.com/forum/#!topic/gmail/uOM5CLR9xMw</a>. But why do you care?"}, {"owner": {"reputation": 1995, "user_id": 986820, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/15050e11f16301e15da9970a82d2a62f?s=128&d=identicon&r=PG", "display_name": "giorgio", "link": "https://stackoverflow.com/users/986820/giorgio"}, "edited": false, "score": 0, "creation_date": 1450837003, "post_id": 34426532, "comment_id": 56596318, "body": "I care because I dont know where it is coming from and whether it is preventing users from doing what they want to do."}], "answers": [{"comments": [{"owner": {"reputation": 1995, "user_id": 986820, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/15050e11f16301e15da9970a82d2a62f?s=128&d=identicon&r=PG", "display_name": "giorgio", "link": "https://stackoverflow.com/users/986820/giorgio"}, "edited": false, "score": 0, "creation_date": 1472530933, "post_id": 37734824, "comment_id": 65775551, "body": "It is definitely something to do with gmail and I suspect that it is when people past something from gmail into the editor on my web page (summmernote editor). However I cant replicate the error and I have no idea how to prevent it happening."}], "tags": [], "owner": {"reputation": 16, "user_id": 6447206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ce1d31901356128b091b4f871863cbe?s=128&d=identicon&r=PG&f=1", "display_name": "Sadjad Bahmanpour", "link": "https://stackoverflow.com/users/6447206/sadjad-bahmanpour"}, "is_accepted": true, "score": 0, "last_activity_date": 1465501203, "creation_date": 1465501203, "answer_id": 37734824, "question_id": 34426532, "link": "https://stackoverflow.com/questions/34426532/where-does-querystring-of-ui-2view-dimiv-amo1tqfqsw2sit-ic-come-from/37734824#37734824", "title": "Where does querystring of &quot;ui=2&amp;view=dim&amp;iv=amo1tqfqsw2s&amp;it=ic&quot; come from", "body": "<p>I'm having the same issue, turned out people was copy/pasting from their Gmail emails into our system logs/comments (we have CKEditor for logs). So every time they were looking at those logs we receive these errors on our servers. \nI've checked the log and this is content of one of them</p>\n\n<pre><code>&lt;img alt=\"\" class=\"ajz\" id=\":ps\" src=\"https://mail.google.com/mail/u/0/images/cleardot.gif\" style=\"background:url(&amp;quot;?ui=2&amp;amp;view=dim&amp;amp;iv=amo1tqfqsw2s&amp;amp;it=ic&amp;quot;) \n</code></pre>\n\n<p>So as you see this image background is pointing to those </p>\n\n<pre><code>ui=2&amp;view=dim\n</code></pre>\n"}], "owner": {"reputation": 1995, "user_id": 986820, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/15050e11f16301e15da9970a82d2a62f?s=128&d=identicon&r=PG", "display_name": "giorgio", "link": "https://stackoverflow.com/users/986820/giorgio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 37734824, "answer_count": 1, "score": 0, "last_activity_date": 1465501203, "creation_date": 1450828987, "question_id": 34426532, "link": "https://stackoverflow.com/questions/34426532/where-does-querystring-of-ui-2view-dimiv-amo1tqfqsw2sit-ic-come-from", "title": "Where does querystring of &quot;ui=2&amp;view=dim&amp;iv=amo1tqfqsw2s&amp;it=ic&quot; come from", "body": "<p>In my rails app (Rails 4.2.4 Ruby 2.1.2) I have suddenly started getting errors due to weird stuff in the url.</p>\n\n<p>For example where the valid url would be :</p>\n\n<pre><code>/note/new?client_id=nnnn\n</code></pre>\n\n<p>The url that appears from time to time on the production server is:</p>\n\n<pre><code>/note/new?ui=2&amp;view=dim&amp;iv=amo1tqfqsw2s&amp;it=ic\n</code></pre>\n\n<p>I have no idea where the spurious querystring is coming from.</p>\n\n<p>Googling seems to come up with various pages concerning Gmail but are no help.</p>\n\n<p>The browser appears to be chrome when the error occurs.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ssl", "mixed-content"], "answers": [{"comments": [{"owner": {"reputation": 4868, "user_id": 113342, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/cPgZ3.png?s=128&g=1", "display_name": "CalebHC", "link": "https://stackoverflow.com/users/113342/calebhc"}, "edited": false, "score": 0, "creation_date": 1450833108, "post_id": 34426651, "comment_id": 56595472, "body": "Thanks so much for the help but I decided to use some rack middle ware to allow me to add constraints which worked out nicer for my requirements. Thanks again though! :)"}], "tags": [], "owner": {"reputation": 14632, "user_id": 428260, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/Jr7uO.png?s=128&g=1", "display_name": "iltempo", "link": "https://stackoverflow.com/users/428260/iltempo"}, "is_accepted": false, "score": 2, "last_activity_date": 1450829737, "creation_date": 1450829737, "answer_id": 34426651, "question_id": 34426203, "link": "https://stackoverflow.com/questions/34426203/mixed-content-iframe-issue-in-rails-4-2/34426651#34426651", "title": "Mixed Content iframe Issue In Rails 4.2", "body": "<p>If you are talking about a unique action throughout the controller hierarchy you can exclude this one.</p>\n\n<pre><code>class ApplicationController\n  force_ssl except :unique_action_name\n\nend\n</code></pre>\n\n<p>See the <a href=\"http://api.rubyonrails.org/classes/ActionController/ForceSSL/ClassMethods.html\" rel=\"nofollow\">reference</a> for further information.</p>\n"}, {"tags": [], "owner": {"reputation": 4868, "user_id": 113342, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/cPgZ3.png?s=128&g=1", "display_name": "CalebHC", "link": "https://stackoverflow.com/users/113342/calebhc"}, "is_accepted": true, "score": 0, "last_activity_date": 1450833537, "creation_date": 1450833537, "answer_id": 34427119, "question_id": 34426203, "link": "https://stackoverflow.com/questions/34426203/mixed-content-iframe-issue-in-rails-4-2/34427119#34427119", "title": "Mixed Content iframe Issue In Rails 4.2", "body": "<p>Problem solved! I ended up using <a href=\"https://github.com/tobmatth/rack-ssl-enforcer\" rel=\"nofollow\">https://github.com/tobmatth/rack-ssl-enforcer</a> to setup the SSL constraints I needed:</p>\n\n<pre><code>config.middleware.use Rack::SslEnforcer, except: '/search', strict: true\n</code></pre>\n\n<p>The force_ssl controller class method is great but I actually needed more fine grain control because the page that I needed no security on is actually a user genertaed page in a CMS controller. So I actually just can't exclude an action but an actual user generated URL. I know this may sound odd but it's working perfect for my weird situation. :)</p>\n\n<p>Thanks!</p>\n"}], "owner": {"reputation": 4868, "user_id": 113342, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/cPgZ3.png?s=128&g=1", "display_name": "CalebHC", "link": "https://stackoverflow.com/users/113342/calebhc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 524, "favorite_count": 0, "accepted_answer_id": 34427119, "answer_count": 2, "score": 1, "last_activity_date": 1450833604, "creation_date": 1450827037, "last_edit_date": 1450833604, "question_id": 34426203, "link": "https://stackoverflow.com/questions/34426203/mixed-content-iframe-issue-in-rails-4-2", "title": "Mixed Content iframe Issue In Rails 4.2", "body": "<p>I'm finishing up a Rails 4.2 app for a client and I have enabled the force_ssl option in the production environment. Now everything is working fine but the client NEEDS to embed an iframe that fetches from a non secure page. This non secure page I have no control over and the page doesn't support https.... :/</p>\n\n<p>Is there any solution that would allow me to have SSL enforced everywhere except on this one controller action?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1577, "user_id": 1931740, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/cb10f132dcaf1badbba4e13ca1b8696a?s=128&d=identicon&r=PG&f=1", "display_name": "Bunti", "link": "https://stackoverflow.com/users/1931740/bunti"}, "edited": false, "score": 0, "creation_date": 1450827645, "post_id": 34426170, "comment_id": 56594044, "body": "What if you have        def is_int?(x)          x.is_a? Integer      end;      [1, 2, 3, 4, 5, &#39;string&#39;].select(&amp;method(:is_int?))  where defining a separate method to check if a given argument is an integer and call that method with the short hand mechanism."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1450828527, "post_id": 34426170, "comment_id": 56594304, "body": "@Uri Agassi&#39;s answer to the <a href=\"http://stackoverflow.com/questions/23695653/can-you-supply-arguments-to-the-mapmethod-syntax-in-ruby\">earlier question</a> is a classic."}], "owner": {"reputation": 33, "user_id": 5709109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c796e4fb4bce685a00c4504fd27ec58d?s=128&d=identicon&r=PG&f=1", "display_name": "Frank", "link": "https://stackoverflow.com/users/5709109/frank"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "closed_date": 1450827033, "answer_count": 0, "score": 1, "last_activity_date": 1450826853, "creation_date": 1450826853, "question_id": 34426170, "link": "https://stackoverflow.com/questions/34426170/symbolto-proc-with-parameters", "closed_reason": "Duplicate", "title": "Symbol#to_proc with parameters", "body": "<p>Let's say you have a list in Ruby:</p>\n\n<pre><code>integer_list = [1, 2, 3, 4, 5]\n</code></pre>\n\n<p>Selecting only the even numbers would be easy</p>\n\n<pre><code>integer_list.select(&amp;:even?)\n</code></pre>\n\n<p>But what happens, if you had a mixed list?\nAnd wanted to select only the integers\nFrom what I've learned, I would write something like this:</p>\n\n<pre><code>mixed_list = [1, 2, 3, 4, 5, 'string']\nmixed_list.select { |x| x.is_a? Integer }\n</code></pre>\n\n<p>My question now is, is there a way to shorten this code like in the first example? Roughly like that:</p>\n\n<pre><code>mixed_list.select(&amp;:is_a? Integer)\n</code></pre>\n"}, {"tags": ["ruby", "automated-tests", "watir", "watir-webdriver"], "comments": [{"owner": {"reputation": 32896, "user_id": 1276506, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7149d2bc15314277ac69357ef7251650?s=128&d=identicon&r=PG", "display_name": "boulder_ruby", "link": "https://stackoverflow.com/users/1276506/boulder-ruby"}, "edited": false, "score": 0, "creation_date": 1452194398, "post_id": 34426067, "comment_id": 57072232, "body": "you need to provide the webpage or a comparable example of the webpage for somebody to test out here, I think"}, {"owner": {"reputation": 505, "user_id": 1904740, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4f706fc49994f5194f5961f371f6723e?s=128&d=identicon&r=PG", "display_name": "Abe Heward", "link": "https://stackoverflow.com/users/1904740/abe-heward"}, "edited": false, "score": 0, "creation_date": 1452812947, "post_id": 34426067, "comment_id": 57346198, "body": "Can you set your script to take a screenshot at the point of the error?  That is often a very illuminating thing to do. Your problem may be that the page is not fully rendered when the script wants to interact with the element, or else a mis-rendering of the page can cause the element to be obscured by another."}], "owner": {"reputation": 1597, "user_id": 1270530, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/h3jji.jpg?s=128&g=1", "display_name": "rails4sandeep", "link": "https://stackoverflow.com/users/1270530/rails4sandeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1450826305, "creation_date": 1450826305, "question_id": 34426067, "link": "https://stackoverflow.com/questions/34426067/watir-webdriver-unable-to-find-checkbox-in-headless-firefox", "title": "watir-webdriver unable to find checkbox in headless firefox", "body": "<p>I have this checkbox on the page I am trying to drive using watir-webdriver</p>\n\n<pre><code>&lt;input type=\"checkbox\" name=\"company[active]\" id=\"archived\"&gt;\n</code></pre>\n\n<p>I have identified it using the id <code>status_id: \"archived\"</code></p>\n\n<p>and trying to set it with the code</p>\n\n<pre><code>    @b.checkbox(:id =&gt; @@locator[:status_id]).wait_until_present\n    @b.checkbox(:id =&gt; @@locator[:status_id]).set\n</code></pre>\n\n<p>And I get the error</p>\n\n<pre><code>timed out after 30 seconds, waiting for {:id=&gt;\"archived\", :tag_name=&gt;\"input\", :type=&gt;\"checkbox\"} to become present (Watir::Wait::TimeoutError)\n</code></pre>\n\n<p>Also tried with name attribute with same result</p>\n\n<p>It works fine in firefox and phantomjs. This fails only in headless version of firefox</p>\n\n<p>Headless firefox settings are</p>\n\n<pre><code>ENV DISPLAY=\":99.0\" \\\nFF_VERSION=\"42.0\"\n</code></pre>\n\n<p>Did any face the same and were able to solve it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv"], "answers": [{"tags": [], "owner": {"reputation": 1965, "user_id": 1044646, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fea53b5852e2dd313e0fb1375929ed60?s=128&d=identicon&r=PG", "display_name": "Babur Usenakunov", "link": "https://stackoverflow.com/users/1044646/babur-usenakunov"}, "is_accepted": true, "score": 1, "last_activity_date": 1450825683, "last_edit_date": 1450825683, "creation_date": 1450825330, "answer_id": 34425875, "question_id": 34425793, "link": "https://stackoverflow.com/questions/34425793/how-to-pass-the-name-of-a-file-to-ruby-controller-when-uploading-it/34425875#34425875", "title": "How to pass the name of a file to Ruby controller when uploading it?", "body": "<p>Uploaded file is an instance of <a href=\"http://api.rubyonrails.org/classes/ActionDispatch/Http/UploadedFile.html\" rel=\"nofollow\">ActionDispatch::Http::UploadedFile</a>. It has <code>original_filename</code> attribute:</p>\n\n<pre><code>def uploadFile\n  filename = params[:csvfile].original_filename\n  # ...\nend\n</code></pre>\n"}], "owner": {"reputation": 177, "user_id": 5689162, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/26dd9194e25666eeb75953067c8624fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mandar", "link": "https://stackoverflow.com/users/5689162/mandar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "accepted_answer_id": 34425875, "answer_count": 1, "score": 0, "last_activity_date": 1450825683, "creation_date": 1450824862, "question_id": 34425793, "link": "https://stackoverflow.com/questions/34425793/how-to-pass-the-name-of-a-file-to-ruby-controller-when-uploading-it", "title": "How to pass the name of a file to Ruby controller when uploading it?", "body": "<p>I am new to ruby on rails. I am trying to upload a CSV file in my application, parse it and save the contents in database. I want to pass the name of the csv file when I am uploading it to the controller. I am not sure how to pass the actual name of the CSV file to my Ruby Controller.</p>\n\n<p>Code ex:</p>\n\n<pre><code>view :\n&lt;h1&gt;File Upload&lt;/h1&gt;\n&lt;%== form_tag({:action=&gt;'uploadFile'}, :multipart =&gt; true) %&gt;\n&lt;input type=\"file\" name=\"csvfile\" /&gt;&lt;br /&gt;\n&lt;input type=\"submit\" name=\"Upload\" value=\"Upload\") %&gt;\" /&gt;\n&lt;/form&gt;\n\ncontroller:\nclass UploadController &lt; ApplicationController\ndef index\n    render :file =&gt; 'app\\views\\upload\\uploadfile.html.erb'\nend\ndef uploadFile\n    csvfile = params[:csvfile]\n    render :text =&gt; \"File has been uploaded successfully\"\nend\nend\n</code></pre>\n"}, {"tags": ["ruby", "class", "oop"], "comments": [{"owner": {"reputation": 949, "user_id": 4210110, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh5.googleusercontent.com/-V_sAK37z25M/AAAAAAAAAAI/AAAAAAAABsg/kzDEZOpn-UM/photo.jpg?sz=128", "display_name": "Juanjo Salvador", "link": "https://stackoverflow.com/users/4210110/juanjo-salvador"}, "edited": false, "score": 0, "creation_date": 1450825223, "post_id": 34425763, "comment_id": 56593235, "body": "Uhhh... I don&#39;t think so."}], "answers": [{"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": true, "score": 3, "last_activity_date": 1450832103, "last_edit_date": 1450832103, "creation_date": 1450826310, "answer_id": 34426070, "question_id": 34425763, "link": "https://stackoverflow.com/questions/34425763/does-ruby-have-right-operators-similar-to-python/34426070#34426070", "title": "Does Ruby have right operators similar to Python?", "body": "<p>The class needs a <code>coerce</code> method for this to work:</p>\n\n<pre><code>class N32\n\n  def +( other )\n    2\n  end \n\n  def coerce(other)\n    [self, other]\n  end\n\nend\n\na = N32.new\na + 3 # return 2\n3 + a # return 2\n</code></pre>\n"}], "owner": {"reputation": 513, "user_id": 1952636, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/85131abb716ee86fbede929d8548573c?s=128&d=identicon&r=PG", "display_name": "Gulaev Valentin", "link": "https://stackoverflow.com/users/1952636/gulaev-valentin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 34426070, "answer_count": 1, "score": 1, "last_activity_date": 1450832103, "creation_date": 1450824714, "last_edit_date": 1450829364, "question_id": 34425763, "link": "https://stackoverflow.com/questions/34425763/does-ruby-have-right-operators-similar-to-python", "title": "Does Ruby have right operators similar to Python?", "body": "<p>Python <a href=\"https://docs.python.org/3/reference/datamodel.html#object.__radd__\" rel=\"nofollow\">defines</a> left and right operators using methods <code>__radd__</code>, <code>__rsub__</code>, etc. </p>\n\n<p>Does Ruby have something similar?</p>\n\n<pre><code>class N32\n  def +( other )\n    2\n  end\nend\na = N32.new\na + 3 # return 2\n3 + a # return error N32 can't be coerced into Fixnum\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "factory-bot", "rspec3"], "answers": [{"tags": [], "owner": {"reputation": 2330, "user_id": 1043167, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1998812477433665de07bdc97af50d28?s=128&d=identicon&r=PG", "display_name": "Laurens", "link": "https://stackoverflow.com/users/1043167/laurens"}, "is_accepted": false, "score": 0, "last_activity_date": 1450824215, "creation_date": 1450824215, "answer_id": 34425682, "question_id": 34425557, "link": "https://stackoverflow.com/questions/34425557/drying-up-rspec-test/34425682#34425682", "title": "DRYing up Rspec test", "body": "<p>Shared examples are a good way to clean up your specs and remove code duplication, take a look at <a href=\"https://www.relishapp.com/rspec/rspec-core/docs/example-groups/shared-examples\" rel=\"nofollow\">https://www.relishapp.com/rspec/rspec-core/docs/example-groups/shared-examples</a></p>\n"}, {"tags": [], "owner": {"reputation": 4154, "user_id": 3123370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7856610653d1a0b44bf049c3d20b2a68?s=128&d=identicon&r=PG", "display_name": "MilesStanfield", "link": "https://stackoverflow.com/users/3123370/milesstanfield"}, "is_accepted": true, "score": 1, "last_activity_date": 1450943657, "creation_date": 1450943657, "answer_id": 34449257, "question_id": 34425557, "link": "https://stackoverflow.com/questions/34425557/drying-up-rspec-test/34449257#34449257", "title": "DRYing up Rspec test", "body": "<p>you have an extra before block. remove it so this ...</p>\n\n<pre><code>config.before(:each, admin: true) do |_example|\n  before do\n    sign_in FactoryGirl.create(:user)\n  end\nend\n</code></pre>\n\n<p>becomes this ...</p>\n\n<pre><code>config.before(:each, admin: true) do\n  sign_in FactoryGirl.create(:user)\nend\n</code></pre>\n\n<p>Also, if these are controller specs (as they appear to be) then this ...</p>\n\n<pre><code>describe 'GET #index' do\n</code></pre>\n\n<p>should actually look like this ...</p>\n\n<pre><code>describe SomeController, type: :controller, admin: true do\n</code></pre>\n"}], "owner": {"reputation": 24422, "user_id": 190623, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ded2adc034647d0e934806583137ecdd?s=128&d=identicon&r=PG", "display_name": "Gandalf StormCrow", "link": "https://stackoverflow.com/users/190623/gandalf-stormcrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "accepted_answer_id": 34449257, "answer_count": 2, "score": 0, "last_activity_date": 1552202271, "creation_date": 1450823512, "last_edit_date": 1552202271, "question_id": 34425557, "link": "https://stackoverflow.com/questions/34425557/drying-up-rspec-test", "title": "DRYing up Rspec test", "body": "<p>I'm at the point where I'm developing an admin dashboard part of my app, and for every action the user needs to be logged in.</p>\n\n<p>So for example this test :</p>\n\n<pre><code>describe 'GET #index' do\n    let(:user) { create(:user) }\n\n    before do\n      sign_in user\n    end\n\n    it 'responds successfully with an HTTP 200 status code' do\n      get :index\n      expect(response).to be_success\n      expect(response).to have_http_status(200)\n    end\n\n    it 'renders the index template' do\n      get :index\n      expect(response).to render_template('index')\n    end\n\n    it 'loads all of the tags into @tags' do\n      tag1 = create(:tag)\n      tag2 = create(:tag)\n      get :index\n\n      expect(assigns(:tags)).to match_array([tag1, tag2])\n    end\n  end\n</code></pre>\n\n<p>Is working just fine, but I was thinking if I could extract the user creation and sign_in part to something that I can use for all these admin tests. I tried this :</p>\n\n<pre><code>describe 'GET #index', admin: true do\n ....all the same as above, except user creation and before sign in block\nend\n</code></pre>\n\n<p>Then in my <code>spec/spec_helper.rb</code> I added the following :</p>\n\n<pre><code>config.before(:each, admin: true) do |_example|\n  before do\n    sign_in FactoryGirl.create(:user)\n  end\nend\n</code></pre>\n\n<p>Unfortunately this didn't work, is there a better way that I can do this? accomplish the same thing, that I can put the login code in one place and not have to re-past it in my admin tests.</p>\n\n<p>I'm using Rails 4 and Rspec 3.</p>\n"}, {"tags": ["ruby", "rubymine"], "answers": [{"tags": [], "owner": {"reputation": 1757, "user_id": 5766404, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Scz0L.png?s=128&g=1", "display_name": "bogl", "link": "https://stackoverflow.com/users/5766404/bogl"}, "is_accepted": false, "score": 0, "last_activity_date": 1452367077, "creation_date": 1452367077, "answer_id": 34697815, "question_id": 34425401, "link": "https://stackoverflow.com/questions/34425401/is-there-a-way-to-get-code-completion-working-with-the-qt4ruby-library/34697815#34697815", "title": "Is there a way to get code completion working with the qt4ruby library?", "body": "<p>You might want to give <a href=\"https://atom.io/\" rel=\"nofollow\">Atom</a> a try.</p>\n\n<p>Atom does code completion. It does not have the Qt syntax built in, but it suggests completions of code which is already in memory. \nAnd it does excellent syntax highlighting for ruby.</p>\n"}], "owner": {"reputation": 1, "user_id": 5708887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/97a162e49f446719137c0cfaea687822?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan", "link": "https://stackoverflow.com/users/5708887/jordan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1452367077, "creation_date": 1450822749, "question_id": 34425401, "link": "https://stackoverflow.com/questions/34425401/is-there-a-way-to-get-code-completion-working-with-the-qt4ruby-library", "title": "Is there a way to get code completion working with the qt4ruby library?", "body": "<p>I'm currently just starting into ruby development and decided that I'd like to use qt4ruby to develop my gui, however when I use RubyMine or Aptana studio, code completion fails to function.</p>\n\n<p>I've tried this both on Windows (with gem qtbindings) and ubuntu 14.04/15.04.</p>\n\n<p>Thanks~ </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "edited": false, "score": 0, "creation_date": 1450822676, "post_id": 34425050, "comment_id": 56592214, "body": "you need params.require to prevent security holes when you use mass assignment. if you don&#39;t use mass assignment, you do not need the parameter checking. otherwise, if you use it, you need to specify your parameters exactly to prevent security holes."}], "answers": [{"tags": [], "owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "is_accepted": true, "score": 1, "last_activity_date": 1450852116, "creation_date": 1450852116, "answer_id": 34429864, "question_id": 34425050, "link": "https://stackoverflow.com/questions/34425050/rails-permit-a-param-of-unknown-type-string-hash-array-or-fixnum/34429864#34429864", "title": "Rails - permit a param of unknown type (string, hash, array, or fixnum)", "body": "<p>What you want can probably be done, but will take some work. Your best bet is this post: <a href=\"http://blog.trackets.com/2013/08/17/strong-parameters-by-example.html\" rel=\"nofollow\">http://blog.trackets.com/2013/08/17/strong-parameters-by-example.html</a></p>\n\n<p>This is not my work, but I have used the technique they outline in an app I wrote. The part you are looking for is at the end:</p>\n\n<pre><code>params = ActionController::Parameters.new(user: { username: \"john\", data: { foo: \"bar\" } })\n# let's assume we can't do this because the data hash can contain any kind of data\nparams.require(:user).permit(:username, data: [ :foo ])\n\n# we need to use the power of ruby to do this \"by hand\"\nparams.require(:user).permit(:username).tap do |whitelisted|\n  whitelisted[:data] = params[:user][:data]\nend\n# Unpermitted parameters: data\n# =&gt; { \"username\" =&gt; \"john\", \"data\" =&gt; {\"foo\"=&gt;\"bar\"} }\n</code></pre>\n\n<p>That blog post helped me understand params and I still refer to it when I need to brush up on the details.</p>\n"}], "owner": {"reputation": 63, "user_id": 5407745, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/151f7d88c7d0a9c8b170b095c3711b95?s=128&d=identicon&r=PG&f=1", "display_name": "Doug", "link": "https://stackoverflow.com/users/5407745/doug"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 645, "favorite_count": 0, "accepted_answer_id": 34429864, "answer_count": 1, "score": 1, "last_activity_date": 1450852116, "creation_date": 1450821188, "question_id": 34425050, "link": "https://stackoverflow.com/questions/34425050/rails-permit-a-param-of-unknown-type-string-hash-array-or-fixnum", "title": "Rails - permit a param of unknown type (string, hash, array, or fixnum)", "body": "<p>My model has a <code>custom_fields</code> column that serializes an array of hashes. Each of these hashes has a <code>value</code> attribute, which can be a hash, array, string, or fixnum. What could I do to permit this <code>value</code> attribute regardless of its type?</p>\n\n<p>My current permitted params line looks something like:</p>\n\n<pre><code>params.require(:model_name).permit([\n    :field_one,\n    :field_two,\n    custom_fields: [:value]\n])\n</code></pre>\n\n<p>Is there any way I can modify this to accept when <code>value</code> is an unknown type?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 220, "user_id": 1681709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gq5zF.jpg?s=128&g=1", "display_name": "Jason Brodie", "link": "https://stackoverflow.com/users/1681709/jason-brodie"}, "edited": false, "score": 2, "creation_date": 1450821153, "post_id": 34424960, "comment_id": 56591627, "body": "What does your data look like.  You are talking like emails is a seperate model but referencing it like it is a field on the Patient."}, {"owner": {"reputation": 1440, "user_id": 4282529, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/dW8oZ.jpg?s=128&g=1", "display_name": "kdweber89", "link": "https://stackoverflow.com/users/4282529/kdweber89"}, "reply_to_user": {"reputation": 220, "user_id": 1681709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gq5zF.jpg?s=128&g=1", "display_name": "Jason Brodie", "link": "https://stackoverflow.com/users/1681709/jason-brodie"}, "edited": false, "score": 0, "creation_date": 1450821219, "post_id": 34424960, "comment_id": 56591657, "body": "It is a field within a patient."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1450821294, "post_id": 34424960, "comment_id": 56591695, "body": "In that case it would be <code>Patient.where(email: nil)</code>. <code>includes</code> is for joining model tables where <code>Email</code> would be a separate model not an attribute."}], "answers": [{"tags": [], "owner": {"reputation": 220, "user_id": 1681709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Gq5zF.jpg?s=128&g=1", "display_name": "Jason Brodie", "link": "https://stackoverflow.com/users/1681709/jason-brodie"}, "is_accepted": true, "score": 1, "last_activity_date": 1450821416, "creation_date": 1450821416, "answer_id": 34425097, "question_id": 34424960, "link": "https://stackoverflow.com/questions/34424960/conditionals-in-an-active-record-query/34425097#34425097", "title": "Conditionals in an Active Record query", "body": "<p>Simple then.</p>\n\n<pre><code>Patient.where(email: nil)\n</code></pre>\n\n<p>Should get you your result.</p>\n"}], "owner": {"reputation": 1440, "user_id": 4282529, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/dW8oZ.jpg?s=128&g=1", "display_name": "kdweber89", "link": "https://stackoverflow.com/users/4282529/kdweber89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "accepted_answer_id": 34425097, "answer_count": 1, "score": 0, "last_activity_date": 1450821775, "creation_date": 1450820774, "last_edit_date": 1450821775, "question_id": 34424960, "link": "https://stackoverflow.com/questions/34424960/conditionals-in-an-active-record-query", "title": "Conditionals in an Active Record query", "body": "<p>I have a large database of information. They are mostly patients. Some of them have email addresses and some of them don't.  I can pull an additional email address by simply running </p>\n\n<pre><code>Patient.last.email\n</code></pre>\n\n<p>However I only want to see the patients who do not have email addresses.  (I think its about half of the ones that I have)</p>\n\n<p>I've tried both these below, but not having the best of luck. </p>\n\n<pre><code>Patient.includes(:email).where('email = ?', 'nil')\nPatient.includes(:email).where('email = ?' 'nil').references(:email)\n</code></pre>\n\n<p>Would anyone know what I'm doing wrong?</p>\n"}, {"tags": ["ruby", "selenium-webdriver", "cucumber", "capybara", "site-prism"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1450822210, "post_id": 34424872, "comment_id": 56592055, "body": "Welcome to Stack Overflow. If you tried using <code>wait_for</code> show us the minimal code demonstrating that. Read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 207, "user_id": 5631763, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/245046d37ae87654c4d5e83266568584?s=128&d=identicon&r=PG&f=1", "display_name": "SaeeK", "link": "https://stackoverflow.com/users/5631763/saeek"}, "edited": false, "score": 1, "creation_date": 1450829594, "post_id": 34425417, "comment_id": 56594604, "body": "Thanks a lot Tom. I will try this and will let you know."}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 2, "last_activity_date": 1450823302, "last_edit_date": 1450823302, "creation_date": 1450822828, "answer_id": 34425417, "question_id": 34424872, "link": "https://stackoverflow.com/questions/34424872/wait-for-an-image-to-load-using-capybara-siteprism/34425417#34425417", "title": "Wait for an image to load using Capybara SitePrism", "body": "<p>img elements have a complete property that indicates whether the image is loaded or not.  Therefore something along the lines of</p>\n\n<pre><code>start = Time.now\nwhile true\n  break if find('img.some_class')['complete']\n  if Time.now &gt; start + 5.seconds\n    fail \"Image still not loaded\"\n  end\n  sleep 0.1\nend\n</code></pre>\n\n<p>would wait up to 5 seconds for the image to finish loading, assuming the img element is already on the page.</p>\n\n<p>This could also be implemented as a custom selector with something along the lines of</p>\n\n<pre><code>Capybara.add_selector(:loaded_image) do\n  css { |locator_class| \"img.#{locator_class}\" }\n  filter(:loaded, default: true, boolean: true) { |node, value| not(value ^ node['complete']) }\nend\n</code></pre>\n\n<p>which could then be called as</p>\n\n<pre><code>find(:loaded_image, 'some_class')\n</code></pre>\n\n<p>*** Note: I haven't actually tried the custom selector code, but it should be close enough to provide guidance</p>\n"}], "owner": {"reputation": 207, "user_id": 5631763, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/245046d37ae87654c4d5e83266568584?s=128&d=identicon&r=PG&f=1", "display_name": "SaeeK", "link": "https://stackoverflow.com/users/5631763/saeek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 735, "favorite_count": 0, "accepted_answer_id": 34425417, "answer_count": 1, "score": 4, "last_activity_date": 1450823302, "creation_date": 1450820412, "last_edit_date": 1450822015, "question_id": 34424872, "link": "https://stackoverflow.com/questions/34424872/wait-for-an-image-to-load-using-capybara-siteprism", "title": "Wait for an image to load using Capybara SitePrism", "body": "<p>How can I wait for an image to load using Capybara? Here's my app code:</p>\n\n<pre><code>-- &lt;img src=\"data:image/jpeg.*\" class=\"some class\" alt=\"Image\"&gt;\n</code></pre>\n\n<p>I have tried using the <code>wait_for</code> method using those <code>class</code> and <code>img</code> attributes with no luck. It never waited for that image to load.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 610, "user_id": 1530293, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/850986c2ba967e56f0fca158ba03c3ec?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/1530293/kevin"}, "edited": false, "score": 1, "creation_date": 1450818338, "post_id": 34424313, "comment_id": 56590445, "body": "you don&#39;t, it&#39;s doing the right thing and encoding UTF-8 characters.  from_json will read it in just fine."}, {"owner": {"reputation": 887, "user_id": 4664086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ca859ce2ca107d4a1110965ef40d7f6?s=128&d=identicon&r=PG&f=1", "display_name": "Damiano Stoffie", "link": "https://stackoverflow.com/users/4664086/damiano-stoffie"}, "edited": false, "score": 0, "creation_date": 1450820338, "post_id": 34424313, "comment_id": 56591256, "body": "embedding a format into another is a recipe for a failure unless you can prove otherwise"}], "answers": [{"tags": [], "owner": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "is_accepted": true, "score": 1, "last_activity_date": 1450820127, "last_edit_date": 1450820127, "creation_date": 1450818532, "answer_id": 34424452, "question_id": 34424313, "link": "https://stackoverflow.com/questions/34424313/how-can-i-embed-html-tags-into-a-json-object-in-rails/34424452#34424452", "title": "How can I embed HTML tags into a JSON object in Rails?", "body": "<p><code>to_json</code> is doing the safe thing encoding the HTML. </p>\n\n<p>If you are certain that it is safe, you can easily decode with Rails' <code>JSON.parse</code></p>\n\n<pre><code>&gt;&gt; JSON.parse \"{\\\"desc\\\":\\\"\\\\u003cp\\\\u003eThis is my description.\\\\u003c/p\\\\u003e\\\"}\"\n=&gt; {\"desc\"=&gt;\"&lt;p&gt;This is my description.&lt;/p&gt;\"}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 94, "user_id": 1195739, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NbzxJ.jpg?s=128&g=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/1195739/jay"}, "is_accepted": false, "score": 0, "last_activity_date": 1450857240, "creation_date": 1450857240, "answer_id": 34431046, "question_id": 34424313, "link": "https://stackoverflow.com/questions/34424313/how-can-i-embed-html-tags-into-a-json-object-in-rails/34431046#34431046", "title": "How can I embed HTML tags into a JSON object in Rails?", "body": "<p>You could try doing this:</p>\n\n<pre><code>def json_template(id)\n  ###################\n  # Method to create the json templates\n  ###################\n  File.open(\"test_dir/temp_file.json\", 'w'){|i|\n    templ = %Q&lt;{\n  \"id\": \"#{Random.rand(20)}#{Random.rand(20)}\",\n  \"version\": 1.0.1.1,\n  \"service\": \"ftp\",\n  \"os\": \"linux\"\n  }&gt;\n    i.write(templ)\n  }\nend\n</code></pre>\n"}], "owner": {"reputation": 11596, "user_id": 465986, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/592491f3adae59ba7f0416760d5361ab?s=128&d=identicon&r=PG", "display_name": "AKWF", "link": "https://stackoverflow.com/users/465986/akwf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 593, "favorite_count": 0, "accepted_answer_id": 34424452, "answer_count": 2, "score": 1, "last_activity_date": 1457129402, "creation_date": 1450817877, "last_edit_date": 1457129402, "question_id": 34424313, "link": "https://stackoverflow.com/questions/34424313/how-can-i-embed-html-tags-into-a-json-object-in-rails", "title": "How can I embed HTML tags into a JSON object in Rails?", "body": "<p>I have a simple hash containing a description:</p>\n\n<pre><code>simple_hash = { \"description\" =&gt; \"&lt;p&gt;This is my description.&lt;/p&gt;\" }\n</code></pre>\n\n<p>I need write this out to a file. In the file, this hash needs to be represented as JSON:</p>\n\n<pre><code>simple_hash.to_json\n</code></pre>\n\n<p>But this is what I'm actually getting:</p>\n\n<pre><code>\"{\\\"description\\\":\\\"\\\\u003cp\\\\u003eThis is my description.\\\\u003c/p\\\\u003e\\\"}\"\n</code></pre>\n\n<p>How do I stop <code>to_json</code> from doing that to my HTML tags?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1450818463, "post_id": 34424296, "comment_id": 56590497, "body": "It&#39;s only &quot;returning&quot; the value of @n because the rails console (or irb) everything in ruby is a statement and @n.times {} returns @n. If you want to print do <code>puts</code> as the answer suggests, if you want to get the values in an array do <code>.map</code>."}], "answers": [{"comments": [{"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "edited": false, "score": 0, "creation_date": 1450825535, "post_id": 34424359, "comment_id": 56593333, "body": "Is it possible to print an image instead, using erb?"}, {"owner": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "reply_to_user": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "edited": false, "score": 1, "creation_date": 1450825990, "post_id": 34424359, "comment_id": 56593509, "body": "I have never done it myself but yes you can print image. RMagick is the gem to read the image. Here is a link that explains how you can do it <a href=\"http://radek.io/2015/06/29/catpix/\" rel=\"nofollow noreferrer\">radek.io/2015/06/29/catpix</a>"}], "tags": [], "owner": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "is_accepted": false, "score": 2, "last_activity_date": 1450818125, "creation_date": 1450818125, "answer_id": 34424359, "question_id": 34424296, "link": "https://stackoverflow.com/questions/34424296/n-times-do-block-just-returns-value-of-n/34424359#34424359", "title": "&quot;n.times do&quot; block just returns value of n", "body": "<p>You are not printing anything. Try:</p>\n\n<pre><code>@n.times do\n  puts \"hello\"\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "edited": false, "score": 0, "creation_date": 1450825530, "post_id": 34424439, "comment_id": 56593332, "body": "Is it possible to print an image instead, using erb?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "edited": false, "score": 0, "creation_date": 1450852306, "post_id": 34424439, "comment_id": 56600841, "body": "define &quot;print an image&quot;"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 6, "last_activity_date": 1450818465, "creation_date": 1450818465, "answer_id": 34424439, "question_id": 34424296, "link": "https://stackoverflow.com/questions/34424296/n-times-do-block-just-returns-value-of-n/34424439#34424439", "title": "&quot;n.times do&quot; block just returns value of n", "body": "<p>Nope, I don't see how you inferred from those answers that <code>.times</code> block should return anything. What it does is it runs specified block specified number of times, nothing more. Return values of the block are discarded. Will do if you want to, say, print \"hello\" to standard output N times or do some other work.</p>\n\n<pre><code>n.times do\n  puts 'hello'\nend\n</code></pre>\n\n<p>If you expected N copies of \"hello\" string in an array, then there are other ways to achieve this. For example:</p>\n\n<pre><code>Array.new(n, 'hello')\nn.times.map { 'hello' } \n# and many others\n</code></pre>\n"}], "owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1552, "favorite_count": 0, "accepted_answer_id": 34424439, "answer_count": 2, "score": 3, "last_activity_date": 1450818493, "creation_date": 1450817813, "last_edit_date": 1495539955, "question_id": 34424296, "link": "https://stackoverflow.com/questions/34424296/n-times-do-block-just-returns-value-of-n", "title": "&quot;n.times do&quot; block just returns value of n", "body": "<p>Judging by the answers to  <a href=\"https://stackoverflow.com/questions/13036371/using-ruby-how-can-i-iterate-over-a-for-loop-n-times\">this question</a>, I expected </p>\n\n<pre><code>@n.times do\n  \"hello\"\nend\n</code></pre>\n\n<p>to return a number of \"hello\"s equal to the value of <code>@n</code>. However, no matter how I modify the code, my rails console just returns the value of <code>@n</code> and nothing more. What am I doing wrong?</p>\n\n<p>For example, if I first set <code>@n = 10</code>, then the result of the code would just be <code>10</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-s3"], "comments": [{"owner": {"reputation": 21521, "user_id": 78613, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0fa1dc97175c4cc1ea4ecf506119961c?s=128&d=identicon&r=PG", "display_name": "Nick Veys", "link": "https://stackoverflow.com/users/78613/nick-veys"}, "edited": false, "score": 0, "creation_date": 1450817394, "post_id": 34424155, "comment_id": 56590035, "body": "Have you tried moving <code>self.save!</code> up a few lines to happen before uploading?"}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1450820867, "post_id": 34424155, "comment_id": 56591488, "body": "Don&#39;t you need to be looking at the code that calls generate_xlsx rather than its implementation?"}, {"owner": {"reputation": 895, "user_id": 4433527, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/iGRYK.png?s=128&g=1", "display_name": "pureofpure", "link": "https://stackoverflow.com/users/4433527/pureofpure"}, "edited": false, "score": 0, "creation_date": 1450833011, "post_id": 34424155, "comment_id": 56595453, "body": "Nick Veys, that doesn&#39;t work! Frederick Cheung i will edit my post with the code that calls the generate_xlsx !"}], "answers": [{"comments": [{"owner": {"reputation": 895, "user_id": 4433527, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/iGRYK.png?s=128&g=1", "display_name": "pureofpure", "link": "https://stackoverflow.com/users/4433527/pureofpure"}, "edited": false, "score": 0, "creation_date": 1450887131, "post_id": 34436535, "comment_id": 56620171, "body": "i got this error  &gt;  can&#39;t dump anonymous module: #&lt;Module:0x007fe7ced84a10&gt; when i use create!"}, {"owner": {"reputation": 4769, "user_id": 1242470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f1b4b172a8f873efe1179ca140f1eb?s=128&d=identicon&r=PG", "display_name": "Mate Solymosi", "link": "https://stackoverflow.com/users/1242470/mate-solymosi"}, "reply_to_user": {"reputation": 895, "user_id": 4433527, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/iGRYK.png?s=128&g=1", "display_name": "pureofpure", "link": "https://stackoverflow.com/users/4433527/pureofpure"}, "edited": false, "score": 0, "creation_date": 1450889004, "post_id": 34436535, "comment_id": 56621347, "body": "Try this: <code>@users = User.all.page(params[:page]).per(10).to_a</code> -- without calling <code>to_a</code>, <code>@users</code> is an <code>ActiveRecord::Relation</code>, and not an array of <code>User</code> models, and delayed_job might have problems serializing an <code>ActiveRecord::Relation</code>."}], "tags": [], "owner": {"reputation": 4769, "user_id": 1242470, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18f1b4b172a8f873efe1179ca140f1eb?s=128&d=identicon&r=PG", "display_name": "Mate Solymosi", "link": "https://stackoverflow.com/users/1242470/mate-solymosi"}, "is_accepted": false, "score": 1, "last_activity_date": 1450876441, "creation_date": 1450876441, "answer_id": 34436535, "question_id": 34424155, "link": "https://stackoverflow.com/questions/34424155/delayed-job-job-cannot-be-created-for-non-persisted-record/34436535#34436535", "title": "Delayed Job: job cannot be created for non-persisted record", "body": "<p>From the looks of it, you need to save the <code>Xlsxfile</code> instance <em>before</em> you call <code>generate_xlsx</code> on it. Try the following:</p>\n\n<pre><code>s = Xlsxfiles.create\ns.generate_xlsx(@users)\n</code></pre>\n\n<p>You might need to adjust validations on <code>Xlsxfile</code> so that they allow saving empty records.</p>\n"}], "owner": {"reputation": 895, "user_id": 4433527, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/iGRYK.png?s=128&g=1", "display_name": "pureofpure", "link": "https://stackoverflow.com/users/4433527/pureofpure"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 530, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450876441, "creation_date": 1450817105, "last_edit_date": 1450833424, "question_id": 34424155, "link": "https://stackoverflow.com/questions/34424155/delayed-job-job-cannot-be-created-for-non-persisted-record", "title": "Delayed Job: job cannot be created for non-persisted record", "body": "<p>I am using carrierwave to upload files to amazon S3 and the delayed_job_activerecord gem.</p>\n\n<p>I have a function where I generate an xlsx file and upload it to amazon S3 but I get this error :</p>\n\n<blockquote>\n  <p>job cannot be created for non-persisted record: #&lt;Xlsxfiles id: nil, created_at: nil, updated_at: nil, xlsxfile: nil&gt;</p>\n</blockquote>\n\n<p>Xlsxfiles is the uploader </p>\n\n<p>Here is my function: </p>\n\n<pre><code>def generate_xlsx(content)\n\n    temp_file = Tempfile.new(['users','.xlsx'])\n    ToXls::Writer.new(content, {:columns =&gt; [:name,:address],\n        :headers =&gt; [\"name\",\"address\"]}).write_io(temp_file)\n\n    temp_file.rewind\n    file = File.open(temp_file)\n    #self.xlsxfile = file\n    self.xlsxfile.store!(file)#\n    #self.write_carrierwave_identifier\n    self.save!\n\n  end\n\n  handle_asynchronously :generate_xlsx\n</code></pre>\n\n<p>and here is where i call the funciton</p>\n\n<pre><code> def index\n        @users = User.all.page(params[:page]).per(10)\n        respond_to do |format|\n            format.html\n            format.xls {\n\n                s = Xlsxfiles.new\n                s.generate_xlsx(@users)\n\n                redirect_to :back\n                }\n            end\n        end\n</code></pre>\n\n<p>Without the delayed job my function works and uploads the file to S3,\nbut when I use delayed job, the job executes before the activerecord is saved, any solution? </p>\n"}, {"tags": ["ruby", "git", "rubygems", "gitlab"], "comments": [{"owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "edited": false, "score": 0, "creation_date": 1450816757, "post_id": 34423850, "comment_id": 56589737, "body": "Do you have this <code>\\\\#</code> string defined anywhere in your config files? Seems that ruby expects an array or hash in place of this string."}, {"owner": {"reputation": 1512, "user_id": 2920617, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/7oqRC.jpg?s=128&g=1", "display_name": "Joel Brewer", "link": "https://stackoverflow.com/users/2920617/joel-brewer"}, "edited": false, "score": 0, "creation_date": 1450818802, "post_id": 34423850, "comment_id": 56590645, "body": "Perhaps you tried using <code>\\` to designate a comment as opposed to </code>#` ?"}], "answers": [{"tags": [], "owner": {"reputation": 784, "user_id": 2553000, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/98cee193ab6bce4934efae04ea1d7725?s=128&d=identicon&r=PG", "display_name": "seoyoochan", "link": "https://stackoverflow.com/users/2553000/seoyoochan"}, "is_accepted": false, "score": 0, "last_activity_date": 1450823242, "creation_date": 1450823242, "answer_id": 34425492, "question_id": 34423850, "link": "https://stackoverflow.com/questions/34423850/gitlab-shell-install-rake-failing/34425492#34425492", "title": "GitLab shell install rake failing", "body": "<p>somewhere you called <code>each</code> method onto String type.</p>\n"}], "owner": {"reputation": 57, "user_id": 5067982, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-4KbmK8o3GlM/AAAAAAAAAAI/AAAAAAAANpE/a6ONItX4E5g/photo.jpg?sz=128", "display_name": "Leo Forney", "link": "https://stackoverflow.com/users/5067982/leo-forney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 163, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450823242, "creation_date": 1450815627, "question_id": 34423850, "link": "https://stackoverflow.com/questions/34423850/gitlab-shell-install-rake-failing", "title": "GitLab shell install rake failing", "body": "<p>I'm not a ruby developer so it is very hard for me to understand this language... But I get this error when trying to run rake install on gitlab. I am using postgresql and I followed the guide on how to install. All of the gems installed without an issue.</p>\n\n<pre><code> root@gitlab-server:/home/git/gitlab# cd /home/git/gitlab &amp;&amp; sudo -u git -H bune exec rake gitlab:shell:install REDIS_URL=unix:/var/run/redis/redis.sock RAILS_ENV=production --trace\n ** Invoke gitlab:shell:install (first_time)\n ** Invoke environment (first_time)\n ** Execute environment\n rake aborted!\n NoMethodError: undefined method `each' for \"\\\\#\":String\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.4/lib/active_record/connection_adapters/connection_specification.rb:150:in `resolve_all'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.4/lib/active_record/connection_handling.rb:69:in `resolve'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.4/lib/active_record/core.rb:46:in `configurations='\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.4/lib/active_record/railtie.rb:117:in `block (2 levels) in &lt;class:Railtie&gt;'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/lazy_load_hooks.rb:38:in `instance_eval'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/lazy_load_hooks.rb:38:in `execute_hook'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/lazy_load_hooks.rb:28:in `block in on_load'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/lazy_load_hooks.rb:27:in `each'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/lazy_load_hooks.rb:27:in `on_load'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/activerecord-4.2.4/lib/active_record/railtie.rb:116:in `block in &lt;class:Railtie&gt;'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/railties-4.2.4/lib/rails/initializable.rb:30:in `instance_exec'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/railties-4.2.4/lib/rails/initializable.rb:30:in `run'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/railties-4.2.4/lib/rails/initializable.rb:55:in `block in run_initializers'\n /usr/local/lib/ruby/2.1.0/tsort.rb:226:in `block in tsort_each'\n /usr/local/lib/ruby/2.1.0/tsort.rb:348:in `block (2 levels) in each_strongly_connected_component'\n /usr/local/lib/ruby/2.1.0/tsort.rb:427:in `each_strongly_connected_component_from'\n /usr/local/lib/ruby/2.1.0/tsort.rb:347:in `block in each_strongly_connected_component'\n /usr/local/lib/ruby/2.1.0/tsort.rb:345:in `each'\n /usr/local/lib/ruby/2.1.0/tsort.rb:345:in `call'\n /usr/local/lib/ruby/2.1.0/tsort.rb:345:in `each_strongly_connected_component'\n /usr/local/lib/ruby/2.1.0/tsort.rb:224:in `tsort_each'\n /usr/local/lib/ruby/2.1.0/tsort.rb:205:in `tsort_each'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/railties-4.2.4/lib/rails/initializable.rb:54:in `run_initializers'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/railties-4.2.4/lib/rails/application.rb:352:in `initialize!'\n /home/git/gitlab/config/environment.rb:5:in `&lt;top (required)&gt;'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `require'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `block in require'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:240:in `load_dependency'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/activesupport-4.2.4/lib/active_support/dependencies.rb:274:in `require'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/railties-4.2.4/lib/rails/application.rb:328:in `require_environment!'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/railties-4.2.4/lib/rails/application.rb:457:in `block in run_tasks_blocks'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/rake-10.4.2/lib/rake/task.rb:240:in `call'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/rake-10.4.2/lib/rake/task.rb:240:in `block in execute'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/rake-10.4.2/lib/rake/task.rb:235:in `each'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/rake-10.4.2/lib/rake/task.rb:235:in `execute'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/rake-10.4.2/lib/rake/task.rb:179:in `block in invoke_with_call_chain'\n /usr/local/lib/ruby/2.1.0/monitor.rb:211:in `mon_synchronize'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/rake-10.4.2/lib/rake/task.rb:172:in `invoke_with_call_chain'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/rake-10.4.2/lib/rake/task.rb:201:in `block in invoke_prerequisites'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/rake-10.4.2/lib/rake/task.rb:199:in `each'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/rake-10.4.2/lib/rake/task.rb:199:in `invoke_prerequisites'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/rake-10.4.2/lib/rake/task.rb:178:in `block in invoke_with_call_chain'\n /usr/local/lib/ruby/2.1.0/monitor.rb:211:in `mon_synchronize'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/rake-10.4.2/lib/rake/task.rb:172:in `invoke_with_call_chain'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/rake-10.4.2/lib/rake/task.rb:165:in `invoke'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:150:in `invoke_task'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:106:in `block (2 levels) in top_level'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:106:in `each'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:106:in `block in top_level'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:115:in `run_with_threads'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:100:in `top_level'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:78:in `block in run'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:176:in `standard_exception_handling'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/rake-10.4.2/lib/rake/application.rb:75:in `run'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/gems/rake-10.4.2/bin/rake:33:in `&lt;top (required)&gt;'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/bin/rake:23:in `load'\n /home/git/gitlab/vendor/bundle/ruby/2.1.0/bin/rake:23:in `&lt;main&gt;'\n Tasks: TOP =&gt; gitlab:shell:install =&gt; environment\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "angularjs"], "comments": [{"owner": {"reputation": 3582, "user_id": 5596858, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/fQd1x.jpg?s=128&g=1", "display_name": "xersiee", "link": "https://stackoverflow.com/users/5596858/xersiee"}, "edited": false, "score": 0, "creation_date": 1450815329, "post_id": 34423732, "comment_id": 56589075, "body": "Do you see any error in your browser&#39;s console?"}, {"owner": {"reputation": 355, "user_id": 4423629, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/3fa874ac0511f471b34d491c0b45c1e8?s=128&d=identicon&r=PG&f=1", "display_name": "starwars25", "link": "https://stackoverflow.com/users/4423629/starwars25"}, "reply_to_user": {"reputation": 3582, "user_id": 5596858, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/fQd1x.jpg?s=128&g=1", "display_name": "xersiee", "link": "https://stackoverflow.com/users/5596858/xersiee"}, "edited": false, "score": 0, "creation_date": 1450815434, "post_id": 34423732, "comment_id": 56589129, "body": "No errors are shown."}], "answers": [{"tags": [], "owner": {"reputation": 355, "user_id": 4423629, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/3fa874ac0511f471b34d491c0b45c1e8?s=128&d=identicon&r=PG&f=1", "display_name": "starwars25", "link": "https://stackoverflow.com/users/4423629/starwars25"}, "is_accepted": false, "score": 0, "last_activity_date": 1450816632, "creation_date": 1450816632, "answer_id": 34424056, "question_id": 34423732, "link": "https://stackoverflow.com/questions/34423732/issue-with-angularjs/34424056#34424056", "title": "Issue with AngularJS", "body": "<p>The solution for me was to migrate javascript libraries to <code>vendor</code> folder and move <code>ng-app</code> to <code>html</code> tag.</p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 2716253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d674993372f9e57dc67fe259058abcde?s=128&d=identicon&r=PG", "display_name": "Tofani", "link": "https://stackoverflow.com/users/2716253/tofani"}, "is_accepted": false, "score": 0, "last_activity_date": 1450817414, "creation_date": 1450817414, "answer_id": 34424211, "question_id": 34423732, "link": "https://stackoverflow.com/questions/34423732/issue-with-angularjs/34424211#34424211", "title": "Issue with AngularJS", "body": "<p>Check if you are using turbolinks. It's a bit tricky to make turbolinks and angularjs work together, I suggest you to take a look <a href=\"http://kurtfunai.com/2014/08/angularjs-and-turbolinks.html\" rel=\"nofollow\">here</a></p>\n"}], "owner": {"reputation": 355, "user_id": 4423629, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/3fa874ac0511f471b34d491c0b45c1e8?s=128&d=identicon&r=PG&f=1", "display_name": "starwars25", "link": "https://stackoverflow.com/users/4423629/starwars25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 27, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1450817414, "creation_date": 1450815059, "question_id": 34423732, "link": "https://stackoverflow.com/questions/34423732/issue-with-angularjs", "title": "Issue with AngularJS", "body": "<p>My application seems to be fine. But when I click chrome's back or forward button, my URL is changed, but I see blank screen and empty <code>body</code> tag with <code>ng-view</code> attribute. I have put a <code>console.log</code> in each controller and I see that the controller of desired page is executed, but page is not rendered at all, just blank <code>body</code> tag. </p>\n\n<p>How do I fix it? I am using angularjs with Ruby on Rails if it is important.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "gemfile"], "comments": [{"owner": {"reputation": 14632, "user_id": 428260, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/Jr7uO.png?s=128&g=1", "display_name": "iltempo", "link": "https://stackoverflow.com/users/428260/iltempo"}, "edited": false, "score": 0, "creation_date": 1450819356, "post_id": 34423611, "comment_id": 56590877, "body": "Can you please provide the command line output in question?"}, {"owner": {"reputation": 1603, "user_id": 1321432, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qM8dI.jpg?s=128&g=1", "display_name": "Dmitry Biletskyy", "link": "https://stackoverflow.com/users/1321432/dmitry-biletskyy"}, "edited": false, "score": 0, "creation_date": 1450822491, "post_id": 34423611, "comment_id": 56592144, "body": "You can use <code>bundle exec</code> before each command to use gem version from gemfile."}, {"owner": {"reputation": 4976, "user_id": 2584924, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ui9hq.jpg?s=128&g=1", "display_name": "Muirik", "link": "https://stackoverflow.com/users/2584924/muirik"}, "edited": false, "score": 0, "creation_date": 1450824395, "post_id": 34423611, "comment_id": 56592930, "body": "If I run any command at all pretty much, I get this output: &#39;Your Ruby version is 2.1.7, but your Gemfile specified 2.1.1&#39;"}, {"owner": {"reputation": 4976, "user_id": 2584924, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ui9hq.jpg?s=128&g=1", "display_name": "Muirik", "link": "https://stackoverflow.com/users/2584924/muirik"}, "edited": false, "score": 0, "creation_date": 1450824697, "post_id": 34423611, "comment_id": 56593039, "body": "My question is, where is my Gemfile set to 2.1.1? If I can&#39;t even get as far as to instantiate a new rails app, where is it seeing that Gemfile? And to clarify further, even after I physically updated the Gemfile that originally caused the conflict, it&#39;s still telling me my Gemfile is set to 2.1.1. Where is it reading that from?"}, {"owner": {"reputation": 4976, "user_id": 2584924, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ui9hq.jpg?s=128&g=1", "display_name": "Muirik", "link": "https://stackoverflow.com/users/2584924/muirik"}, "edited": false, "score": 0, "creation_date": 1450826086, "post_id": 34423611, "comment_id": 56593531, "body": "$ rails new bda Your Ruby version is 2.1.7, but your Gemfile specified 2.1.1&#39;"}], "owner": {"reputation": 4976, "user_id": 2584924, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ui9hq.jpg?s=128&g=1", "display_name": "Muirik", "link": "https://stackoverflow.com/users/2584924/muirik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1450817006, "creation_date": 1450814601, "last_edit_date": 1450817006, "question_id": 34423611, "link": "https://stackoverflow.com/questions/34423611/discrepancy-between-ruby-version-and-gemfile-ruby-version", "title": "Discrepancy between Ruby version and Gemfile Ruby version", "body": "<p>If I boot Aptana to begin a new rails app, and go to do <code>rails new app</code>, it tells me there is a discrepancy between my ruby version and the ruby version in my gemfile. Which gemfile is that referring to? I haven't been able to initiate the <code>rails new</code> command. Where do I need to change that setting? I am on a Windows machine. </p>\n\n<p>By the way, this issue first arose when I did a git pull for a rails app. Somehow my machine's ruby version was overridden by the ruby version in the gemfile of that app. But even when I change it in the gemfile of that app it still keeps telling me that I'm running a different version of Ruby than is listed in the gemfile. So something is overridden somewhere else. Even when I reboot, restart, use a different root directory, etc, I still run into the same issue.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "activeadmin"], "comments": [{"owner": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "edited": false, "score": 0, "creation_date": 1450813643, "post_id": 34423086, "comment_id": 56588351, "body": "Did you have 2 different model for User and Admin?"}], "answers": [{"tags": [], "owner": {"reputation": 2788, "user_id": 4152876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d538506cb7d350250906243645c28d4?s=128&d=identicon&r=PG", "display_name": "Timo Schilling", "link": "https://stackoverflow.com/users/4152876/timo-schilling"}, "is_accepted": true, "score": 1, "last_activity_date": 1450817175, "creation_date": 1450817175, "answer_id": 34424168, "question_id": 34423086, "link": "https://stackoverflow.com/questions/34423086/redirect-to-appropriate-pages-after-logging-in/34424168#34424168", "title": "Redirect to appropriate pages after logging in", "body": "<pre><code>def after_sign_in_path_for(resource_or_scope)\n  case resource_or_scope\n  when AdminUser\n    admin_dashboard_path\n  when User\n    client_dashboard_path\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1428, "user_id": 4156793, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a0abab859fc0ae6541c3f63d7777f5b1?s=128&d=identicon&r=PG&f=1", "display_name": "Raaz", "link": "https://stackoverflow.com/users/4156793/raaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 34424168, "answer_count": 1, "score": 0, "last_activity_date": 1450817330, "creation_date": 1450812458, "last_edit_date": 1450817330, "question_id": 34423086, "link": "https://stackoverflow.com/questions/34423086/redirect-to-appropriate-pages-after-logging-in", "title": "Redirect to appropriate pages after logging in", "body": "<p>I have installed devise and activeadmin gem. When I try to login via client then I get redirected to the right page but when I try to login via admin I get redirected to the client login page. </p>\n\n<h3>routes.rb</h3>\n\n<pre><code> namespace :admin do\n        # get \"/stats\" =&gt; \"stats#stats\"\n        devise_scope :admin_user do\n          get '/stats/:scope' =&gt; \"stats#stats\", as: :admin_stats\n        end\n      end\n\n      devise_for :admin_users, ActiveAdmin::Devise.config\n      ActiveAdmin.routes(self)\n      namespace :client do\n        get 'dashboard' =&gt; 'dashboard#index', as: 'dashboard'\n      end\n\n      devise_for :users, class_name: 'FormUser', controllers: { omniauth_callbacks: 'omniauth_callbacks', registrations: 'registrations' }\n      devise_scope :user do\n        root to: 'devise/registrations#new'\n      end\n</code></pre>\n\n<h3>application_controller.rb</h3>\n\n<pre><code>def after_sign_in_path_for(resource_or_scope)\n    client_dashboard_path\n  end\n\n  def after_sign_out_path_for(resource_or_scope)\n    root_path\n  end\n</code></pre>\n\n<p>How can I fix this?</p>\n\n<p>Here is a link to the test app <a href=\"http://rsslotto.herokuapp.com\" rel=\"nofollow\">enter link description here</a></p>\n\n<p>Admin login <a href=\"http://rsslotto.herokuapp.com/admin\" rel=\"nofollow\">enter link description here</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 3, "creation_date": 1450811146, "post_id": 34422659, "comment_id": 56587043, "body": "Please edit your question to properly indent your code. At present it&#39;s extremely difficult to read and is unlikely to attract quality answers."}, {"owner": {"reputation": 2041, "user_id": 2071800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e1f877eccccc9e714b4d4fe03917f2a7?s=128&d=identicon&r=PG", "display_name": "Joe Half Face", "link": "https://stackoverflow.com/users/2071800/joe-half-face"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1450811508, "post_id": 34422659, "comment_id": 56587217, "body": "@Jordan, I edited, not sure, but may be now it looks better"}], "answers": [{"comments": [{"owner": {"reputation": 2041, "user_id": 2071800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e1f877eccccc9e714b4d4fe03917f2a7?s=128&d=identicon&r=PG", "display_name": "Joe Half Face", "link": "https://stackoverflow.com/users/2071800/joe-half-face"}, "edited": false, "score": 0, "creation_date": 1450870177, "post_id": 34423029, "comment_id": 56610131, "body": "no, that didn&#39;t fix the problem, however, just changing syntax to <code>ActiveRecord::Base.transaction</code> seems that something as activesupport interprets syntax without dot to this one back in controller"}, {"owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "reply_to_user": {"reputation": 2041, "user_id": 2071800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e1f877eccccc9e714b4d4fe03917f2a7?s=128&d=identicon&r=PG", "display_name": "Joe Half Face", "link": "https://stackoverflow.com/users/2071800/joe-half-face"}, "edited": false, "score": 0, "creation_date": 1450870953, "post_id": 34423029, "comment_id": 56610611, "body": "@JoeHalfFace <i>Good Catch</i> ! I completely forget to ."}], "tags": [], "owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "is_accepted": false, "score": 1, "last_activity_date": 1451063982, "last_edit_date": 1451063982, "creation_date": 1450812202, "answer_id": 34423029, "question_id": 34422659, "link": "https://stackoverflow.com/questions/34422659/activerecord-and-poro-approach/34423029#34423029", "title": "ActiveRecord and PORO approach", "body": "<p>It seems you need to include other <code>ActiveModel</code> class as well</p>\n\n<pre><code>class List\n  include ActiveRecord::Base.transaction\n\n  extend ActiveModel::Naming\n  include ActiveModel::Conversion\n  include ActiveModel::Validations\n\n  #... rest of the code\nend\n</code></pre>\n"}], "owner": {"reputation": 2041, "user_id": 2071800, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e1f877eccccc9e714b4d4fe03917f2a7?s=128&d=identicon&r=PG", "display_name": "Joe Half Face", "link": "https://stackoverflow.com/users/2071800/joe-half-face"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 594, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1451063982, "creation_date": 1450810654, "last_edit_date": 1450811468, "question_id": 34422659, "link": "https://stackoverflow.com/questions/34422659/activerecord-and-poro-approach", "title": "ActiveRecord and PORO approach", "body": "<p>I have model <code>Student</code> and controller <code>StudentsController</code>.</p>\n\n<p>I had this code in controller:</p>\n\n<pre><code>def create_students_list\n   @students=[...#some code which evaluates to array of student instances]\n  result=list_transaction(@students)\n  ...\n  end \n      private\n        def list_transaction(collection, options= {})\n          errors=[]\n          ActiveRecord::Base.transaction do\n           collection.each do |item|\n            if item.save\n             else\n             errors &lt;&lt; item.errors\n            end\n           end\n          end\n        if errors.any?\n        {:success=&gt;false, :errors =&gt; errors }\n        else\n       {:success =&gt; true}\n      end\n     end\n</code></pre>\n\n<p>The idea is: I have a big amount of input, which I want to be wraped in transaction. There is some other logic also, not the subject of matter here.\nBut I wanted to DRY controller, also I needed same operation for other controllers, so I decided to use PORO approach: to have pure Ruby object which can be reusable.</p>\n\n<pre><code>   class List\n    include ActiveRecord\n    include ActiveRecord::Transactions::ClassMethods\n\n    def initialize(collection)\n     @collection=collection\n    end\n\n    def group_input\n     outputs={:valid=&gt;[], :invalid=&gt;[]}\n     @collection.each do |element|\n      if element.valid?\n       outputs[:valid] &lt;&lt; element\n       else\n       outputs[:invalid] &lt;&lt; [element, element.errors]\n       end\n      end\n    if outputs[:valid].any?\n     save_list(outputs[:valid])\n     outputs[:something_saved]=true\n     outputs[:valid].delete\n    end\n     save_list(outputs[:valid])\n    if outputs[:invalid].empty?\n     outputs = {}\n     outputs[:all_records_saved]=true\n    else\n     outputs=outputs[:invalid]\n    end\n     outputs\n    end\n\n    private\n    def save_list(collection)\n     ActiveRecord::Base transaction do\n      collection.each do |element|\n      element.save\n      end\n    end\n    end\n  end\n</code></pre>\n\n<p>Problem: it leads to an error:</p>\n\n<pre><code>NameError:\n       undefined local variable or method `connection' for #&lt;List:0x000001073a62d8 @collection=[#&lt;Student id: nil&gt;]&gt;\n</code></pre>\n\n<p>Tried to inclide ActiveRecord::ConnectionsHandler, which also raise:</p>\n\n<pre><code> NameError:\n       undefined local variable or method `connection_handler' for #&lt;List:0x0000010c285480 @collection=[#&lt;Student id: nil&gt;]&gt;\n</code></pre>\n\n<p>I don't know how to get this working</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1450810403, "post_id": 34422492, "comment_id": 56586645, "body": "Your file1 is the same as file2"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1450810513, "post_id": 34422492, "comment_id": 56586704, "body": "Why on earth would you expect <code>include PagePopulator::PageObject</code>?"}, {"owner": {"reputation": 1, "user_id": 1370709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586917ae1ecea95ff0c168efad56fedf?s=128&d=identicon&r=PG", "display_name": "lugman", "link": "https://stackoverflow.com/users/1370709/lugman"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1450810696, "post_id": 34422492, "comment_id": 56586794, "body": "Sergio - sorry - I corrected this"}, {"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1450810794, "post_id": 34422492, "comment_id": 56586850, "body": "You may want use github links to those two source files:  <a href=\"https://github.com/cheezy/page-object/blob/master/lib/page-object/page_populator.rb\" rel=\"nofollow noreferrer\">github.com/cheezy/page-object/blob/master/lib/page-object/&hellip;</a>   and <a href=\"https://github.com/cheezy/page-object/blob/master/lib/page-object.rb\" rel=\"nofollow noreferrer\">github.com/cheezy/page-object/blob/master/lib/page-object.rb</a>"}, {"owner": {"reputation": 1, "user_id": 1370709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586917ae1ecea95ff0c168efad56fedf?s=128&d=identicon&r=PG", "display_name": "lugman", "link": "https://stackoverflow.com/users/1370709/lugman"}, "edited": false, "score": 0, "creation_date": 1450810796, "post_id": 34422492, "comment_id": 56586852, "body": "To answer your question: &quot;Why on earth would you expect include PagePopulator::PageObject?&quot; Can you show at least one Ruby tutorial saying that if you have same module defined in 2 different files you don&#39;t have to add it in the include statement?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1450810865, "post_id": 34422492, "comment_id": 56586892, "body": "I mean, why <code>include PagePopulator::PageObject</code> and not <code>include PageObject::PagePopulator</code>?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1450810942, "post_id": 34422492, "comment_id": 56586932, "body": "In short, the concept you&#39;re confused with here is called &quot;reopening classes/modules&quot;. You can google it."}, {"owner": {"reputation": 1, "user_id": 1370709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586917ae1ecea95ff0c168efad56fedf?s=128&d=identicon&r=PG", "display_name": "lugman", "link": "https://stackoverflow.com/users/1370709/lugman"}, "edited": false, "score": 0, "creation_date": 1450811046, "post_id": 34422492, "comment_id": 56586988, "body": "I haven&#39;t found any source that is saying that having 2 modules with the same name in 2 different files, and requiring one file from the other offsets their modules."}, {"owner": {"reputation": 1, "user_id": 1370709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586917ae1ecea95ff0c168efad56fedf?s=128&d=identicon&r=PG", "display_name": "lugman", "link": "https://stackoverflow.com/users/1370709/lugman"}, "edited": false, "score": 0, "creation_date": 1450811162, "post_id": 34422492, "comment_id": 56587054, "body": "Sergio - there is a typo in my description should be"}, {"owner": {"reputation": 1, "user_id": 1370709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586917ae1ecea95ff0c168efad56fedf?s=128&d=identicon&r=PG", "display_name": "lugman", "link": "https://stackoverflow.com/users/1370709/lugman"}, "edited": false, "score": 0, "creation_date": 1450811173, "post_id": 34422492, "comment_id": 56587062, "body": "include PageObject::PagePopulator"}, {"owner": {"reputation": 1, "user_id": 1370709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586917ae1ecea95ff0c168efad56fedf?s=128&d=identicon&r=PG", "display_name": "lugman", "link": "https://stackoverflow.com/users/1370709/lugman"}, "edited": false, "score": 0, "creation_date": 1450811299, "post_id": 34422492, "comment_id": 56587113, "body": "instead of   include PagePopulator::PageObject I corrected this in description"}, {"owner": {"reputation": 6088, "user_id": 1983072, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/974c4e106b996fff51c25171e439b7b8?s=128&d=identicon&r=PG", "display_name": "bbozo", "link": "https://stackoverflow.com/users/1983072/bbozo"}, "edited": false, "score": 0, "creation_date": 1450816573, "post_id": 34422492, "comment_id": 56589643, "body": "Point of interest, what do you use <code>page-object</code> gem for? :)"}, {"owner": {"reputation": 1, "user_id": 1370709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586917ae1ecea95ff0c168efad56fedf?s=128&d=identicon&r=PG", "display_name": "lugman", "link": "https://stackoverflow.com/users/1370709/lugman"}, "edited": false, "score": 0, "creation_date": 1450819023, "post_id": 34422492, "comment_id": 56590732, "body": "PageObject gem is used in Ruby/Cucumber framework for regression testing of the web applications. It eases a lot interaction with the web page - see comments in page-object.rb. Also book mentioned here is a good resource <a href=\"http://www.cheezyworld.com/cucumber-cheese/\" rel=\"nofollow noreferrer\">cheezyworld.com/cucumber-cheese</a>"}, {"owner": {"reputation": 1, "user_id": 1370709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586917ae1ecea95ff0c168efad56fedf?s=128&d=identicon&r=PG", "display_name": "lugman", "link": "https://stackoverflow.com/users/1370709/lugman"}, "edited": false, "score": 0, "creation_date": 1450819194, "post_id": 34422492, "comment_id": 56590802, "body": "Frederick from Answer 1 was right - I used this gem as example of same name module interactions."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 1370709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586917ae1ecea95ff0c168efad56fedf?s=128&d=identicon&r=PG", "display_name": "lugman", "link": "https://stackoverflow.com/users/1370709/lugman"}, "edited": false, "score": 0, "creation_date": 1450820125, "post_id": 34423073, "comment_id": 56591163, "body": "I am not sure that you are answering what I asked, or maybe I didn&#39;t understand the answer.         file_a     require &quot;file_b&quot;     module Foo        include Bar        ...     end  file_b: module Foo   module Bar ... end  Where is the explanation that  include Foo::Bar does not need to be used in file_a  I am looking currently at Module.nesting assuming that is will give me the answer <a href=\"http://ruby-doc.org/core-2.2.0/Module.html#method-c-nesting\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.0/Module.html#method-c-nesting</a>"}, {"owner": {"reputation": 1, "user_id": 1370709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586917ae1ecea95ff0c168efad56fedf?s=128&d=identicon&r=PG", "display_name": "lugman", "link": "https://stackoverflow.com/users/1370709/lugman"}, "edited": false, "score": 0, "creation_date": 1450822978, "post_id": 34423073, "comment_id": 56592342, "body": "I think you explained general rule about nesting, and example on the  ruby-doc.org/core-2.2.0/Module.html#method-c-nesting page shows how to find out nested modules/constants. I updated my initial post with more descriptive details"}], "tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": false, "score": 0, "last_activity_date": 1450820750, "last_edit_date": 1450820750, "creation_date": 1450812417, "answer_id": 34423073, "question_id": 34422492, "link": "https://stackoverflow.com/questions/34422492/modules-with-the-same-name-in-two-different-ruby-files/34423073#34423073", "title": "Modules with the same name in two different Ruby files", "body": "<p>I think what you are trying to ask about is the rules for constant lookup in ruby: when you write <code>Bar</code> in your code, how does ruby find the value of that constant?</p>\n\n<p>What files things are in is irrelevant, what matters is that within</p>\n\n<pre><code>module Foo\n  ...\nend\n</code></pre>\n\n<p>A reference to <code>Bar</code> will try <code>Foo::Bar</code> and then the top level <code>::Bar</code> constant ( constant scoping is lexically scoped)</p>\n\n<p>So in the case where <code>Foo::Bar</code> has been previously defined then</p>\n\n<pre><code>module Foo\n  include Foo::Bar\nend \n</code></pre>\n\n<p>And </p>\n\n<pre><code>module Foo\n  include Bar\nend \n</code></pre>\n\n<p>Do the same thing.</p>\n\n<p>The <code>Module.nesting</code> method will show you this lookup chain. Ruby will also search the ancestors of the currently open class / module. There are some gotchas / corner cases, but those are the basics. </p>\n"}], "owner": {"reputation": 1, "user_id": 1370709, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/586917ae1ecea95ff0c168efad56fedf?s=128&d=identicon&r=PG", "display_name": "lugman", "link": "https://stackoverflow.com/users/1370709/lugman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1004, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1450822736, "creation_date": 1450810003, "last_edit_date": 1450822736, "question_id": 34422492, "link": "https://stackoverflow.com/questions/34422492/modules-with-the-same-name-in-two-different-ruby-files", "title": "Modules with the same name in two different Ruby files", "body": "<p>My \"file 1\"</p>\n\n<pre><code>C:\\Ruby200\\lib\\ruby\\gems\\2.0.0\\gems\\page-object-0.9.2\\lib\\page-object.rb  \n</code></pre>\n\n<p>and my directory </p>\n\n<pre><code>C:\\Ruby200\\lib\\ruby\\gems\\2.0.0\\gems\\page-object-0.9.2\\lib\\page-object\n</code></pre>\n\n<p>are located on my hard drive as a consequence of page-object gem installation.</p>\n\n<p>In the contents of \"file 1\", among the other lines of code, I see the following line:</p>\n\n<pre><code>require 'page-object/page_populator'\n</code></pre>\n\n<p>Lower in the same file, I see:</p>\n\n<pre><code>module PageObject\n  include PagePopulator\n</code></pre>\n\n<p>Looking at \"file 2\"</p>\n\n<pre><code>C:\\Ruby200\\lib\\ruby\\gems\\2.0.0\\gems\\page-object-0.9.2\\lib\\page-object\\page_populator.rb\n</code></pre>\n\n<p>these lines are at the top of this file:</p>\n\n<pre><code>module PageObject\n  module PagePopulator\n</code></pre>\n\n<p>Based on the Ruby tutorials that I read, that say that after requiring \"file 2\" into \"file 1\" using <code>require</code>, modules from \"file 2\" need to be included into the \"file 1\" with <code>include</code>.</p>\n\n<p>I would expect \"file 1\" to have</p>\n\n<pre><code>include PageObject::PagePopulator\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>include PagePopulator\n</code></pre>\n\n<p>However, since it is not setup this way, and page-object is a widely-used gem, I believe that having the <code>PageObject</code> module in both files eliminates the need for</p>\n\n<pre><code>include PageObject::PagePopulator\n</code></pre>\n\n<p>because</p>\n\n<pre><code>include PagePopulator\n</code></pre>\n\n<p>is sufficient.</p>\n\n<p>I wanted to confirm that my assumption is right.</p>\n\n<p>Having read about Module.nesting method and also having read the links returned by googling \"reopening classes/modules\" query, I still didn't find the answer to my question.</p>\n\n<p>I will try to describe it again.</p>\n\n<p>content of file_a is below:</p>\n\n<pre><code>require \"file_b\"\n module Foo\n  include Bar\n    ...\nend\n</code></pre>\n\n<p>content of file_b is below:</p>\n\n<pre><code>module Foo\n module Bar\n   ...\nend\n</code></pre>\n\n<p>Where is the explanation that we shouldn't use \nin file_a the following: </p>\n\n<pre><code>include Foo::Bar \n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>include Bar\n</code></pre>\n\n<p>and the way I have written it before:</p>\n\n<pre><code>include Bar\n</code></pre>\n\n<p>is sufficient</p>\n\n<p>What would be the difference if we have</p>\n\n<p>file_c  with the following content:</p>\n\n<pre><code>module Bar\n    ...\nend\n</code></pre>\n\n<p>Does it mean that there is no difference in including module from this file_c versus file_b?</p>\n\n<p>content of file_a with module from file_b and module from file_c is below:</p>\n\n<pre><code>require \"file_b\"\n require \"file_c\"\n  module Foo\n   include Bar\n     ...\n  end\n</code></pre>\n\n<p>If this is the case what is the point of having module Foo in file_b?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activesupport"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1450809784, "post_id": 34422426, "comment_id": 56586308, "body": "No. It&#39;s not an object, it&#39;s a syntax. It&#39;s like asking <i>&quot;can I overwrite <code>if</code>&quot;</i>."}, {"owner": {"reputation": 9447, "user_id": 1380867, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5dc27a551f77074a1dcc431e4158704b?s=128&d=identicon&r=PG", "display_name": "MZaragoza", "link": "https://stackoverflow.com/users/1380867/mzaragoza"}, "edited": false, "score": 1, "creation_date": 1450809891, "post_id": 34422426, "comment_id": 56586368, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/12989011/how-can-i-override-the-method-when-subclassing-a-ruby-hash\">How can I override the &#91;&#93;= method when subclassing a ruby hash?</a>"}, {"owner": {"reputation": 2359, "user_id": 1837084, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/67dya.jpg?s=128&g=1", "display_name": "Oleg Antonyan", "link": "https://stackoverflow.com/users/1837084/oleg-antonyan"}, "edited": false, "score": 5, "creation_date": 1450810273, "post_id": 34422426, "comment_id": 56586566, "body": "Hashes in ruby are ordered since 1.9, so what is the point of using ActiveSupport::OrderedHash?"}, {"owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "edited": false, "score": 0, "creation_date": 1450810906, "post_id": 34422426, "comment_id": 56586910, "body": "@pleaner  Your Question is <i>as same as</i>  could we override <b>def ()</b>. But we can&#39;t."}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 3, "last_activity_date": 1450811143, "creation_date": 1450811143, "answer_id": 34422767, "question_id": 34422426, "link": "https://stackoverflow.com/questions/34422426/is-there-a-way-to-overwrite-the-object/34422767#34422767", "title": "Is there a way to overwrite the `{ }` object?", "body": "<p>Hash literal <code>{}</code> is hard-coded in Ruby, and you cannot change it. <code>{}</code> will become a <code>Hash</code>. However, since Ruby's class can be modified, you can remove all unnecessary methods, constants, variables from <code>Hash</code>, and copy everything that is in <code>ActiveSupport::OrderedHash</code> into <code>Hash</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 2, "last_activity_date": 1450852710, "last_edit_date": 1495535637, "creation_date": 1450852710, "answer_id": 34429992, "question_id": 34422426, "link": "https://stackoverflow.com/questions/34422426/is-there-a-way-to-overwrite-the-object/34429992#34429992", "title": "Is there a way to overwrite the `{ }` object?", "body": "<p>There are only very few languages which allow you to overload literals (I only know of two: <a href=\"http://ioke.org/\" rel=\"nofollow noreferrer\">Ioke</a> and <a href=\"http://seph-lang.org/\" rel=\"nofollow noreferrer\">Seph</a>). Ruby is not one of them.</p>\n\n<p>See also <a href=\"https://stackoverflow.com/a/8119962/2988\">overloading Ruby's <code>[\u2026]</code> Array creation shorthand</a>, <a href=\"https://stackoverflow.com/a/12586979/2988\">Which method is invoked by <code>[\u2026]</code> in Ruby?</a>, and <a href=\"https://stackoverflow.com/a/5359397/2988\">How to intercept the call to constructor of class <code>Hash</code>?</a>.</p>\n"}], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 34422767, "answer_count": 2, "score": 2, "last_activity_date": 1450852710, "creation_date": 1450809698, "last_edit_date": 1495535314, "question_id": 34422426, "link": "https://stackoverflow.com/questions/34422426/is-there-a-way-to-overwrite-the-object", "title": "Is there a way to overwrite the `{ }` object?", "body": "<p>I'm trying to make all Hashes in my program be ActiveSupport::OrderedHash. </p>\n\n<p>I can override the Hash.new constructor by <code>::Hash = ActiveSupport::OrderedHash</code> but <code>{}.class</code> is still hash.</p>\n\n<p><code>def {}</code> gives me a syntax error. </p>\n\n<p>It was recommended that this is a duplicate of <a href=\"https://stackoverflow.com/questions/12989011\">this question</a>, but I don't think that is the case. My question isn't about subclassing Hash, it's about overwriting the default <code>{ }</code> => Hash constructor. </p>\n"}, {"tags": ["ruby", "homebrew", "osx-elcapitan"], "comments": [{"owner": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1450809744, "post_id": 34422280, "comment_id": 56586295, "body": "Could you do a <code>which ruby</code> and <code>ruby --version</code> I want to see what ruby are you using?"}, {"owner": {"reputation": 113, "user_id": 2697705, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100000296494673/picture?type=large", "display_name": "Ricardo Brandao", "link": "https://stackoverflow.com/users/2697705/ricardo-brandao"}, "reply_to_user": {"reputation": 6200, "user_id": 637094, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/fd50f61387b63900335c8556f86237be?s=128&d=identicon&r=PG", "display_name": "Leonel Gal&#225;n", "link": "https://stackoverflow.com/users/637094/leonel-gal%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1450810226, "post_id": 34422280, "comment_id": 56586542, "body": "which ruby   /usr/local/bin/ruby   ruby --version   ruby 2.2.1p85 (2015-02-26 revision 49769) [x86_64-darwin12.6.0]"}, {"owner": {"reputation": 6015, "user_id": 643821, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8604b32053024d582a89d3da8b2921e2?s=128&d=identicon&r=PG", "display_name": "mattexx", "link": "https://stackoverflow.com/users/643821/mattexx"}, "edited": false, "score": 0, "creation_date": 1450812538, "post_id": 34422280, "comment_id": 56587766, "body": "Have you looked <a href=\"https://github.com/Homebrew/homebrew/blob/master/share/doc/homebrew/El_Capitan_and_Homebrew.md\" rel=\"nofollow noreferrer\">here</a>?"}, {"owner": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "edited": false, "score": 0, "creation_date": 1450813476, "post_id": 34422280, "comment_id": 56588267, "body": "Uninstall brew first using <code>ruby -e &quot;$(curl -fsSL https:&#47;&#47;raw.githubusercontent.com&#47;Homebrew&#47;install&#47;master&#47;un&zwnj;&#8203;install)&quot;</code> and install it again using <code>ruby -e &quot;$(curl -fsSL https:&#47;&#47;raw.githubusercontent.com&#47;Homebrew&#47;install&#47;master&#47;in&zwnj;&#8203;stall)&quot;</code>."}, {"owner": {"reputation": 113, "user_id": 2697705, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100000296494673/picture?type=large", "display_name": "Ricardo Brandao", "link": "https://stackoverflow.com/users/2697705/ricardo-brandao"}, "reply_to_user": {"reputation": 6015, "user_id": 643821, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8604b32053024d582a89d3da8b2921e2?s=128&d=identicon&r=PG", "display_name": "mattexx", "link": "https://stackoverflow.com/users/643821/mattexx"}, "edited": false, "score": 0, "creation_date": 1450814776, "post_id": 34422280, "comment_id": 56588862, "body": "@mattexx, Yes I looked it. Thanks"}, {"owner": {"reputation": 113, "user_id": 2697705, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100000296494673/picture?type=large", "display_name": "Ricardo Brandao", "link": "https://stackoverflow.com/users/2697705/ricardo-brandao"}, "reply_to_user": {"reputation": 7975, "user_id": 1577357, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9db0054df76cc4b80888ff713527a652?s=128&d=identicon&r=PG", "display_name": "Zulhilmi Zainudin", "link": "https://stackoverflow.com/users/1577357/zulhilmi-zainudin"}, "edited": false, "score": 0, "creation_date": 1450814816, "post_id": 34422280, "comment_id": 56588872, "body": "@zulhfreelancer, I got the same error: &lt;internal:gem_prelude&gt;:1:in <code>require&#39;: cannot load such file -- rubygems.rb (LoadError)  from &lt;internal:gem_prelude&gt;:1:in </code>&lt;compiled&gt;&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 1153, "user_id": 1231241, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15ebe63c47e748d8312362404a1df31a?s=128&d=identicon&r=PG", "display_name": "Dannid", "link": "https://stackoverflow.com/users/1231241/dannid"}, "edited": false, "score": 0, "creation_date": 1455909593, "post_id": 34496714, "comment_id": 58717193, "body": "I ran that curl command and was prompted to uninstall my existing brew first: <code>ruby -e &quot;$(curl -fsSL https:&#47;&#47;raw.githubusercontent.com&#47;Homebrew&#47;install&#47;master&#47;un&zwnj;&#8203;install)&quot;</code>"}], "tags": [], "owner": {"reputation": 113, "user_id": 2697705, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100000296494673/picture?type=large", "display_name": "Ricardo Brandao", "link": "https://stackoverflow.com/users/2697705/ricardo-brandao"}, "is_accepted": true, "score": 2, "last_activity_date": 1451318451, "creation_date": 1451318451, "answer_id": 34496714, "question_id": 34422280, "link": "https://stackoverflow.com/questions/34422280/how-to-reinstall-brew-on-el-capitan/34496714#34496714", "title": "How to reinstall brew on El Capitan?", "body": "<p>I found out the problem.</p>\n\n<p>I ran <code>type -a ruby</code> and saw I had installed two ruby: one on /usr/bin and another on /usr/local/bin</p>\n\n<p>I just <code>mv /usr/local/bin/ruby /usr/local/bin/rubybkp</code> and solve the problem</p>\n\n<p>After this I ran <code>ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"</code> to reinstall brew.</p>\n"}, {"tags": [], "owner": {"reputation": 654, "user_id": 8840984, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-4Dy2dxToukY/AAAAAAAAAAI/AAAAAAAAAM8/ZWUcEdyngr4/photo.jpg?sz=128", "display_name": "Andre DiCioccio", "link": "https://stackoverflow.com/users/8840984/andre-dicioccio"}, "is_accepted": false, "score": 0, "last_activity_date": 1592456694, "creation_date": 1592456694, "answer_id": 62442728, "question_id": 34422280, "link": "https://stackoverflow.com/questions/34422280/how-to-reinstall-brew-on-el-capitan/62442728#62442728", "title": "How to reinstall brew on El Capitan?", "body": "<p>Further to the above, just note that installing brew now uses Bash:</p>\n\n<pre><code>ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"\n\nWarning: The Ruby Homebrew installer is now deprecated and has been rewritten in Bash. \nPlease migrate to the following command:\n      /bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install.sh)\"\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 2697705, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/100000296494673/picture?type=large", "display_name": "Ricardo Brandao", "link": "https://stackoverflow.com/users/2697705/ricardo-brandao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1828, "favorite_count": 0, "accepted_answer_id": 34496714, "answer_count": 2, "score": 1, "last_activity_date": 1592456694, "creation_date": 1450809063, "last_edit_date": 1453467737, "question_id": 34422280, "link": "https://stackoverflow.com/questions/34422280/how-to-reinstall-brew-on-el-capitan", "title": "How to reinstall brew on El Capitan?", "body": "<p>I'm stuck to reinstall brew, ruby on El Capitan. </p>\n\n<p>Actually I didn't remember how exactly it occurs, but I lost my brew and I don't get reinstall it.</p>\n\n<p>This is the message I receive when I try to reinstall it:</p>\n\n<pre><code>ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"\n&lt;internal:gem_prelude&gt;:1:in `require': cannot load such file -- rubygems.rb (LoadError)\nfrom &lt;internal:gem_prelude&gt;:1:in `&lt;compiled&gt;'\n</code></pre>\n\n<p>First, some information:</p>\n\n<pre><code>&gt;which ruby\n/usr/local/bin/ruby\n\n&gt;ruby --version\nruby 2.2.1p85 (2015-02-26 revision 49769) [x86_64-darwin12.6.0]\n</code></pre>\n\n<p>And, if I try to fix ruby:</p>\n\n<pre><code>&gt;rvm list known\n# MRI Rubies\n[ruby-]1.8.6[-p420]\n[ruby-]1.8.7[-head] # security released on head\n[ruby-]1.9.1[-p431]\n[ruby-]1.9.2[-p330]\n[ruby-]1.9.3[-p551]\n[ruby-]2.0.0[-p643]\n[ruby-]2.1.4\n[ruby-]2.1[.5]\n[ruby-]2.2[.1]\n[ruby-]2.2-head\nruby-head\n\n&gt;rvm install 2.2\nSearching for binary rubies, this might take some time.\nFound remote file https://rvm_io.global.ssl.fastly.net/binaries/osx/10.11/x86_64/ruby-2.2.1.tar.bz2\nChecking requirements for osx.\nAbout to install Homebrew, press `Enter` for default installation in `/usr/local`,\ntype new path if you wish custom Homebrew installation (the path needs to be writable for user)\n: \n&lt;internal:gem_prelude&gt;:1:in `require': cannot load such file -- rubygems.rb (LoadError)\n    from &lt;internal:gem_prelude&gt;:1:in `&lt;compiled&gt;'\nRequirements installation failed with status: 1.\n</code></pre>\n\n<p>How to proceed now? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "mongoid"], "comments": [{"owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "edited": false, "score": 0, "creation_date": 1450807219, "post_id": 34421482, "comment_id": 56585017, "body": "Kindly check with <i><a href=\"http://stackoverflow.com/a/8052619/3098330\">stackoverflow.com/a/8052619/3098330</a></i>"}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 2716253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d674993372f9e57dc67fe259058abcde?s=128&d=identicon&r=PG", "display_name": "Tofani", "link": "https://stackoverflow.com/users/2716253/tofani"}, "reply_to_user": {"reputation": 23, "user_id": 3658007, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000499837415/picture?type=large", "display_name": "Vin&#237;cius Salmont", "link": "https://stackoverflow.com/users/3658007/vin%c3%adcius-salmont"}, "edited": false, "score": 0, "creation_date": 1450814242, "post_id": 34422156, "comment_id": 56588639, "body": "I&#39;m happy to help, and welcome to Stack Overflow. If this answer or any other one solved your issue, please mark it as accepted."}], "tags": [], "owner": {"reputation": 71, "user_id": 2716253, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d674993372f9e57dc67fe259058abcde?s=128&d=identicon&r=PG", "display_name": "Tofani", "link": "https://stackoverflow.com/users/2716253/tofani"}, "is_accepted": true, "score": 0, "last_activity_date": 1450808612, "creation_date": 1450808612, "answer_id": 34422156, "question_id": 34421482, "link": "https://stackoverflow.com/questions/34421482/compare-two-params-in-mongoid-on-rails/34422156#34422156", "title": "Compare two params in MongoID on Rails", "body": "<p>Try this:</p>\n\n<pre><code>Tasks.where('$where' =&gt; 'this.date &gt;= this.done_date')\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 3658007, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000499837415/picture?type=large", "display_name": "Vin&#237;cius Salmont", "link": "https://stackoverflow.com/users/3658007/vin%c3%adcius-salmont"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 34422156, "answer_count": 1, "score": 2, "last_activity_date": 1450822407, "creation_date": 1450805780, "last_edit_date": 1450822407, "question_id": 34421482, "link": "https://stackoverflow.com/questions/34421482/compare-two-params-in-mongoid-on-rails", "title": "Compare two params in MongoID on Rails", "body": "<p>I'm trying make a query like this in Rails using MongoID:</p>\n\n<blockquote>\n  <p>\"Find Tasks Where Date is less than Done_date and Done_date is between the beginning of this week and the end of this week\"</p>\n</blockquote>\n\n<p>I found an way to compare two elements inside the Mongo id using:</p>\n\n<pre><code>Tasks.collection.find({\"$where\" =&gt; 'this.date &gt;= this.done_date'})\n</code></pre>\n\n<p>But I really don't know how can I add the date range inside this.</p>\n"}, {"tags": ["ruby", "windows", "command-line", "terminal", "git-bash"], "comments": [{"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1450804767, "post_id": 34421039, "comment_id": 56583699, "body": "What terminal are you using?"}, {"owner": {"reputation": 19, "user_id": 5708161, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10153364497952984/picture?type=large", "display_name": "Jonathan Silvestri", "link": "https://stackoverflow.com/users/5708161/jonathan-silvestri"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1450804792, "post_id": 34421039, "comment_id": 56583712, "body": "Git Bash. I am on a Windows machine."}, {"owner": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1450805194, "post_id": 34421039, "comment_id": 56583942, "body": "bash is your shell, what&#39;s your terminal? Is it whatever you get with &quot;command prompt&quot;?"}, {"owner": {"reputation": 19, "user_id": 5708161, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10153364497952984/picture?type=large", "display_name": "Jonathan Silvestri", "link": "https://stackoverflow.com/users/5708161/jonathan-silvestri"}, "reply_to_user": {"reputation": 205702, "user_id": 7552, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b60298053f87465641c1b1192338c8cd?s=128&d=identicon&r=PG", "display_name": "glenn jackman", "link": "https://stackoverflow.com/users/7552/glenn-jackman"}, "edited": false, "score": 0, "creation_date": 1450805384, "post_id": 34421039, "comment_id": 56584047, "body": "I can use Windows Powershell or the command prompt...does that help?"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 5708161, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10153364497952984/picture?type=large", "display_name": "Jonathan Silvestri", "link": "https://stackoverflow.com/users/5708161/jonathan-silvestri"}, "edited": false, "score": 0, "creation_date": 1450805353, "post_id": 34421354, "comment_id": 56584033, "body": "That did the trick! Will I have to do this for all future code?"}, {"owner": {"reputation": 19, "user_id": 5708161, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10153364497952984/picture?type=large", "display_name": "Jonathan Silvestri", "link": "https://stackoverflow.com/users/5708161/jonathan-silvestri"}, "edited": false, "score": 0, "creation_date": 1450805470, "post_id": 34421354, "comment_id": 56584097, "body": "It seems that if I run my original program from either PowerShell or the command line, it works."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 19, "user_id": 5708161, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10153364497952984/picture?type=large", "display_name": "Jonathan Silvestri", "link": "https://stackoverflow.com/users/5708161/jonathan-silvestri"}, "edited": false, "score": 0, "creation_date": 1450806561, "post_id": 34421354, "comment_id": 56584701, "body": "In general, you should not need to <code>flush</code> streams. But windows is famous for having weird terminal emulators, so I can not assure you will never meet this superfluous <code>flush</code> in the future :)"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1450808907, "post_id": 34421354, "comment_id": 56585865, "body": "The STDOUT stream should always flush anytime a line-end character is seen, which will happen when <code>puts</code> processes the expression. That can be tested by simply turning on <code>sync</code> for the stream: <code>STDOUT.sync = true</code>, then running the code without using <code>flush</code>. See <a href=\"http://stackoverflow.com/a/8949007/128421\">stackoverflow.com/a/8949007/128421</a>."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1450805299, "creation_date": 1450805299, "answer_id": 34421354, "question_id": 34421039, "link": "https://stackoverflow.com/questions/34421039/ruby-program-not-running-properly-in-terminal/34421354#34421354", "title": "Ruby program not running properly in terminal", "body": "<p>There is a problem of flushing in-/out-streams. I have no clue how it is done in your terminal, but the code below should do the trick (note the explicit <code>flush</code> of output stream):</p>\n\n<pre><code>$stdout.puts 'What is your favorite number?'\n$stdout.flush\nfav_num = $stdin.gets.chomp.to_i\nbetter_num = fav_num + 1\n$stdout.puts better_num.to_s + ' is a much better number than ' + fav_num.to_s + '!'\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 5708161, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10153364497952984/picture?type=large", "display_name": "Jonathan Silvestri", "link": "https://stackoverflow.com/users/5708161/jonathan-silvestri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 450, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1450808666, "creation_date": 1450804138, "last_edit_date": 1450808666, "question_id": 34421039, "link": "https://stackoverflow.com/questions/34421039/ruby-program-not-running-properly-in-terminal", "title": "Ruby program not running properly in terminal", "body": "<p>I am writing very basic Ruby programs to learn variables and methods for class. I wrote the following:</p>\n\n<pre><code>puts 'What is your favorite number?'\nfav_num = gets.chomp.to_i\nbetter_num = fav_num + 1\nputs better_num.to_s + ' ' + 'is a much better number than ' + fav_num.to_s + '!'\n</code></pre>\n\n<p>When I run this program in my terminal using <code>ruby variables-methods.rb</code>, it goes to the next line and does nothing. If I type in a number, this happens:</p>\n\n<pre><code>22\nWhat is your favorite number?\n23 is a much better number than 22!\n</code></pre>\n\n<p>I updated Ruby in my terminal. </p>\n\n<p>Any idea what might be going wrong? </p>\n"}, {"tags": ["ruby", "redis", "redis-objects"], "answers": [{"tags": [], "owner": {"reputation": 918, "user_id": 788754, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/13d7a3ab12ec57e0d372d7115362cb91?s=128&d=identicon&r=PG", "display_name": "Pod", "link": "https://stackoverflow.com/users/788754/pod"}, "is_accepted": true, "score": 0, "last_activity_date": 1450810074, "creation_date": 1450810074, "answer_id": 34422516, "question_id": 34420969, "link": "https://stackoverflow.com/questions/34420969/redis-objects-ruby-gem-how-to-retrieve-redis-list-and-iterate/34422516#34422516", "title": "Redis-objects Ruby gem, how to retrieve Redis list and iterate?", "body": "<p>Right. The text below, from the Gem documentation explains it!</p>\n\n<blockquote>\n  <p>There is a Ruby class that maps to each Redis type, with methods for\n  each Redis API command. <strong>Note that calling new does not imply it's\n  actually a \"new\" value - it just creates a mapping between that Ruby\n  object and the corresponding Redis data structure</strong>, which may already\n  exist on the redis-server.</p>\n</blockquote>\n\n<p>So I don't need to use lrange to get to the list. Using <code>Redis::List.new('list_name', :marshal =&gt; true)</code> will get me a handle to the list. Then I can iterate, add or remove items from the list.</p>\n\n<p>Reading is helpful...</p>\n"}], "owner": {"reputation": 918, "user_id": 788754, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/13d7a3ab12ec57e0d372d7115362cb91?s=128&d=identicon&r=PG", "display_name": "Pod", "link": "https://stackoverflow.com/users/788754/pod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 517, "favorite_count": 0, "accepted_answer_id": 34422516, "answer_count": 1, "score": 1, "last_activity_date": 1450810074, "creation_date": 1450803900, "last_edit_date": 1450804261, "question_id": 34420969, "link": "https://stackoverflow.com/questions/34420969/redis-objects-ruby-gem-how-to-retrieve-redis-list-and-iterate", "title": "Redis-objects Ruby gem, how to retrieve Redis list and iterate?", "body": "<p>I'm trying to use <a href=\"https://github.com/nateware/redis-objects\" rel=\"nofollow\">redis-objects</a> Ruby gem to store some Redis data in lists.</p>\n\n<p>I am able to create a list by following the <a href=\"https://github.com/nateware/redis-objects#lists\" rel=\"nofollow\">example</a> in the documentation.</p>\n\n<p>I am able to find the list from Redis using lrange. Not sure if that is the best way, I couldn't find a method provided by redis-objects.</p>\n\n<p>Initially when I iterate the elements in the list I get the elements in the form of Hashes.</p>\n\n<p>However after I get the list using lrange those are not hashes and I cannot access the data. </p>\n\n<p>What would be the appropriate way to find the list and get the items in hash form?</p>\n\n<p>You can see the code below and the outputs from the console.</p>\n\n<pre><code>@list = Redis::List.new('list_name', :marshal =&gt; true)\n@list &lt;&lt; {:name =&gt; \"Nate\", :city =&gt; \"San Diego\"}\n@list.each do |el|\n    puts el\n    puts el.class\n    puts \"#{el[:name]} lives in #{el[:city]}\"\nend\n\nredis = Redis.current\n@list = redis.lrange(\"list_name\", 0, -1)\n@list.each do |el|\n    puts el\n    puts el.class\n    puts \"#{el[:name]} lives in #{el[:city]}\"\nend\n</code></pre>\n\n<p>Each of the puts:</p>\n\n<pre><code>{:name=&gt;\"Nate\", :city=&gt;\"San Diego\"}\nHash\nNate lives in San Diego\n{:  nameI\"  Nate:ET:    cityI\"San Diego;T\nString\nCompleted 500 Internal Server Error in 349ms\n\nTypeError - no implicit conversion of Symbol into Integer:\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 1284, "user_id": 2667545, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/77414e4cbee3c6687d580bbb7876d8c2?s=128&d=identicon&r=PG", "display_name": "Vic", "link": "https://stackoverflow.com/users/2667545/vic"}, "is_accepted": true, "score": 6, "last_activity_date": 1450802882, "creation_date": 1450802882, "answer_id": 34420679, "question_id": 34420570, "link": "https://stackoverflow.com/questions/34420570/rails-uninitialized-constant-applicationcontrollersessionhelper/34420679#34420679", "title": "Rails Uninitialized constant ApplicationController::SessionHelper", "body": "<p>Spelling error</p>\n\n<pre><code>include SessionsHelper\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 5631967, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e133cb88719b01e7560a31c92f205822?s=128&d=identicon&r=PG&f=1", "display_name": "thermobeelearns", "link": "https://stackoverflow.com/users/5631967/thermobeelearns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1824, "favorite_count": 0, "accepted_answer_id": 34420679, "answer_count": 1, "score": -3, "last_activity_date": 1450802882, "creation_date": 1450802581, "question_id": 34420570, "link": "https://stackoverflow.com/questions/34420570/rails-uninitialized-constant-applicationcontrollersessionhelper", "title": "Rails Uninitialized constant ApplicationController::SessionHelper", "body": "<p>I can't figure out this error that I'm getting:</p>\n\n<pre><code>ActionController::RoutingError (uninitialized constant ApplicationController::SessionHelper):\n  app/controllers/application_controller.rb:3:in `&lt;class:ApplicationController&gt;'\n  app/controllers/application_controller.rb:1:in `&lt;top (required)&gt;'\n  app/controllers/static_pages_controller.rb:1:in `&lt;top (required)&gt;'\n</code></pre>\n\n<p>This is my Application controller:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  protect_from_forgery with: :exception\n  include SessionHelper\nend\n</code></pre>\n\n<p>And my sessions_helper.rb:</p>\n\n<pre><code>module SessionsHelper\n\n  # Logs in the given user.\n  def log_in(user)\n    session[:user_id] = user.id\n  end\n\n  # Returns the current logged-in user (if any).\n  def current_user\n    @current_user ||= User.find_by(id: session[:user_id])\n  end\n\n  # Returns true if the user is logged in, false otherwise.\n  def logged_in?\n    !current_user.nil?\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "gem", "activeadmin"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1450802499, "post_id": 34420497, "comment_id": 56582413, "body": "Remove github source from <code>gem &#39;formtastic&#39;,          github: &#39;justinfrench&#47;formtastic&#39;</code>, use <code>gem &#39;formtastic&#39;</code>. SOunds like the latest (that would be found in github) versoin of <code>formtastic</code> relies on <code>1.0.0.pre2</code>."}, {"owner": {"reputation": 803, "user_id": 4739356, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2840861b630380bb691a2e7b793c22ca?s=128&d=identicon&r=PG&f=1", "display_name": "M.T Davis", "link": "https://stackoverflow.com/users/4739356/m-t-davis"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1450803220, "post_id": 34420497, "comment_id": 56582858, "body": "@mudasobwa I modified the gem file based on your responce. I also corrected the file based on the feedback I got from running &quot;bundle install&quot;. However, still no luck. I&#39;m getting the following eror message <code>Bundler could not find compatible versions for gem &quot;jquery-rails&quot;:   In Gemfile:     activeadmin (&gt;= 0) ruby depends on       jquery-rails (&lt; 3, &gt;= 1.0.0) ruby      jquery-rails (3.0.0)</code> I took out the version number and keep <code>gem &#39;jquery-rails&#39;</code> and still no luck"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1450804162, "post_id": 34420497, "comment_id": 56583400, "body": "<code>gem &#39;jquery-rails&#39;, &#39;~&gt; 4.0&#39;, &#39;&gt;= 4.0.5&#39;</code> \u21d2 <code>gem &#39;jquery-rails&#39;</code>."}, {"owner": {"reputation": 803, "user_id": 4739356, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2840861b630380bb691a2e7b793c22ca?s=128&d=identicon&r=PG&f=1", "display_name": "M.T Davis", "link": "https://stackoverflow.com/users/4739356/m-t-davis"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1450807007, "post_id": 34420497, "comment_id": 56584907, "body": "@mudasobwa, is the syntax correct? I&#39;m getting the follwoing error message when running bundle install <code>Gemfile syntax error on line 13: syntax error, unexpected tSTRING_BEG, expecting keyword_do or &#39;{&#39; or &#39;(&#39; gem &#39;jquery-rails&#39;, &#39;~&gt; 4.0&#39;, &#39;&gt;= 4.0.5&#39; =&gt; gem &#39;jquery-rails&#39;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 803, "user_id": 4739356, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2840861b630380bb691a2e7b793c22ca?s=128&d=identicon&r=PG&f=1", "display_name": "M.T Davis", "link": "https://stackoverflow.com/users/4739356/m-t-davis"}, "edited": false, "score": 0, "creation_date": 1450808712, "post_id": 34421931, "comment_id": 56585754, "body": "when I comment out <code>gem &#39;activeadmin&#39;, github: &#39;activeadmin&#39;, branch: &#39;0-6-stable&#39;</code> it works. However, when I un-comment that gem it fails with the following error message: <code>Bundler could not find compatible versions for gem &quot;formtastic&quot;:   In Gemfile:     activeadmin (&gt;= 0) ruby depends on       formtastic (~&gt; 2.0) ruby      formtastic (3.1.3)</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1450858766, "post_id": 34421931, "comment_id": 56603637, "body": "OMG, please, try to get the point instead of mindless copypasting solutions. Try to read about how versioning in gem works. All the gems listed <i>must</i> be compatible one with each other. You might just remove all versions and run gem build. That will probably suffice."}], "tags": [], "owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "is_accepted": false, "score": -1, "last_activity_date": 1450809581, "last_edit_date": 1450809581, "creation_date": 1450807618, "answer_id": 34421931, "question_id": 34420497, "link": "https://stackoverflow.com/questions/34420497/issue-with-gem-file/34421931#34421931", "title": "Issue with Gem file", "body": "<p><strong>1:</strong> remove <strong><code>Gemfile.lock</code></strong></p>\n\n<p><strong>2:</strong> Add <code>gem 'jquery-rails'</code></p>\n\n<p><strong>3:</strong> add <code>gem 'formtastic'</code></p>\n\n<p><strong>4:</strong> Run <code>bundle install</code></p>\n\n<p>Still if you have any issue in bundle <a href=\"https://github.com/activeadmin/activeadmin/blob/0-6-stable/Gemfile#L16\" rel=\"nofollow\">Github Active Admin</a> ,I would like to say go with <code>rails 3.2</code>.</p>\n\n<p>Hope this help you !!!</p>\n"}, {"comments": [{"owner": {"reputation": 803, "user_id": 4739356, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2840861b630380bb691a2e7b793c22ca?s=128&d=identicon&r=PG&f=1", "display_name": "M.T Davis", "link": "https://stackoverflow.com/users/4739356/m-t-davis"}, "edited": false, "score": 0, "creation_date": 1451490383, "post_id": 34423896, "comment_id": 56806573, "body": "where you find this information? I don&#39;t remember coming  across it anywhere in the documentation or on the GitHub page. Thanks again."}], "tags": [], "owner": {"reputation": 2788, "user_id": 4152876, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d538506cb7d350250906243645c28d4?s=128&d=identicon&r=PG", "display_name": "Timo Schilling", "link": "https://stackoverflow.com/users/4152876/timo-schilling"}, "is_accepted": true, "score": 1, "last_activity_date": 1450815846, "creation_date": 1450815846, "answer_id": 34423896, "question_id": 34420497, "link": "https://stackoverflow.com/questions/34420497/issue-with-gem-file/34423896#34423896", "title": "Issue with Gem file", "body": "<p>You can't use the <code>0-6-stable</code> branch, if you use rails <code>&gt;= 4.x</code>, <code>0-6-stable</code> works only with rails <code>&lt;= 3.x</code>.</p>\n\n<p>This mean's your <code>Gemfile</code> need to look like this:\n    source '<a href=\"http://rubygems.org\" rel=\"nofollow\">http://rubygems.org</a>'</p>\n\n<pre><code>ruby '2.2.1'\ngem 'rails', '~&gt; 4.2', '&gt;= 4.2.5'\ngem 'railties', '~&gt; 4.2', '&gt;= 4.2.5'\ngem 'sqlite3', group: :development\ngem 'sass-rails', '~&gt; 4.0.3'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'coffee-rails', '~&gt; 4.0.0'\ngem 'jquery-rails', '~&gt; 4.0', '&gt;= 4.0.5'\ngem 'turbolinks'\ngem 'jbuilder', '~&gt; 2.0'\ngem 'sdoc', '~&gt; 0.4.0',          group: :doc\ngem 'rails_12factor', group: :production\ngem 'pg', group: :production\ngem 'activeadmin', github: 'activeadmin'\n#gem 'will_paginate', '~&gt; 3.0'\n#gem 'will_paginate-bootstrap'\ngem 'carrierwave'\ngem \"fog\"\ngem \"figaro\"\ngem 'execjs'\ngem 'tzinfo-data', platforms: [:mingw, :mswin]\ngem \"mini_magick\"\ngem 'devise'\ngem 'searchkick'\ngroup :development, :test do\n  gem 'rspec-rails', '~&gt; 3.0'\nend\n</code></pre>\n\n<p>From the ActiveAdmin point of view there is no need to use ransack, inherited_resources and formtastic from github.</p>\n"}], "owner": {"reputation": 803, "user_id": 4739356, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2840861b630380bb691a2e7b793c22ca?s=128&d=identicon&r=PG&f=1", "display_name": "M.T Davis", "link": "https://stackoverflow.com/users/4739356/m-t-davis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 375, "favorite_count": 0, "accepted_answer_id": 34423896, "answer_count": 2, "score": -2, "last_activity_date": 1450815999, "creation_date": 1450802346, "last_edit_date": 1450815999, "question_id": 34420497, "link": "https://stackoverflow.com/questions/34420497/issue-with-gem-file", "title": "Issue with Gem file", "body": "<p>I'm trying to install active admin which I was partly successful with. However, I want to use the '0-6-stable' and not the \"1.0.0.pre2\" version. When I changed my gem file to reflect my change, I get the following error message:</p>\n\n<pre><code>Resolving dependencies...\nBundler could not find compatible versions for gem \"formtastic\":\n  In Gemfile:\n    activeadmin (&gt;= 0) ruby depends on\n      formtastic (~&gt; 2.0) ruby\n\n    formtastic (3.2.0.pre)\n</code></pre>\n\n<p>Now, I've gotten this message before and I would just delete my Gemfile.lock but it doesn't seem like that is working.</p>\n\n<p>Copy of my gem file:</p>\n\n<pre><code>source 'http://rubygems.org'\n\nruby '2.2.1'\ngem 'ransack', github: 'activerecord-hackery/ransack'\ngem 'inherited_resources', github: 'josevalim/inherited_resources'\ngem 'formtastic',          github: 'justinfrench/formtastic'\ngem 'rails', '~&gt; 4.2', '&gt;= 4.2.5'\ngem 'railties', '~&gt; 4.2', '&gt;= 4.2.5'\ngem 'sqlite3', group: :development\ngem 'sass-rails', '~&gt; 4.0.3'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'coffee-rails', '~&gt; 4.0.0'\ngem 'jquery-rails', '~&gt; 4.0', '&gt;= 4.0.5'\ngem 'turbolinks'\ngem 'jbuilder', '~&gt; 2.0'\ngem 'sdoc', '~&gt; 0.4.0',          group: :doc\ngem 'rails_12factor', group: :production\ngem 'pg', group: :production\ngem 'activeadmin', github: 'activeadmin', branch: '0-6-stable'\n#gem 'will_paginate', '~&gt; 3.0'\n#gem 'will_paginate-bootstrap'\ngem 'carrierwave'\ngem \"fog\"\ngem \"figaro\"\ngem 'execjs'\ngem 'tzinfo-data', platforms: [:mingw, :mswin]\ngem \"mini_magick\"\ngem 'devise'\ngem 'searchkick'\ngroup :development, :test do\n  gem 'rspec-rails', '~&gt; 3.0'\nend\n</code></pre>\n\n<p>The reason I want to use the most stable version of active admin is because I'm getting <code>\"NoMethodError in Admin::AdminUsersController#index\"</code> when I select \"Admin Users\" I hoping that using the stable version will correct this issue.</p>\n\n<p>EDIT: The ActiveAdmin Issue: <a href=\"https://github.com/activeadmin/activeadmin/issues/4249\" rel=\"nofollow\">https://github.com/activeadmin/activeadmin/issues/4249</a></p>\n"}]