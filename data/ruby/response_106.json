[{"tags": ["ruby-on-rails", "ruby", "cucumber"], "comments": [{"owner": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "edited": false, "score": 2, "creation_date": 1484782506, "post_id": 41731292, "comment_id": 70656988, "body": "The way one &quot;exits&quot; a cucumber step is with an exception or flow control. You have an adequate workaround.  If you&#39;re trying to end execution, you should turn the condition into an expectation: <code>expect(condition).to be_true</code>."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1484794721, "post_id": 41731292, "comment_id": 70660196, "body": "did you try <code>break</code>?"}, {"owner": {"reputation": 1145, "user_id": 854678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x670d.jpg?s=128&g=1", "display_name": "Owen B", "link": "https://stackoverflow.com/users/854678/owen-b"}, "edited": false, "score": 0, "creation_date": 1531210100, "post_id": 41731292, "comment_id": 89498421, "body": "<code>break</code> gives the same issue. As answered below, <code>next</code> seems to give the desired outcome"}], "answers": [{"tags": [], "owner": {"reputation": 190, "user_id": 3618081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jCF0i.png?s=128&g=1", "display_name": "Mayshar", "link": "https://stackoverflow.com/users/3618081/mayshar"}, "is_accepted": false, "score": 0, "last_activity_date": 1484837561, "creation_date": 1484837561, "answer_id": 41744819, "question_id": 41731292, "link": "https://stackoverflow.com/questions/41731292/how-to-exit-out-of-ruby-cucumber-step-definition-early/41744819#41744819", "title": "How to exit out of Ruby Cucumber Step definition early?", "body": "<p>The issue your having with the code sample you have given is that the code you don't want to execute isn't part of your if block. </p>\n\n<p>What happens the way you have written it, is it will check the if condition, then execute based on what it finds. Then, it moves to the next line of code, which is your code you don't want to run. </p>\n\n<p>My suggestion, is to try something like this,</p>\n\n<pre><code>When(/^I create scenarios$/) do\n   if condition == true\n   else\n     #code i don't want to execute if condition matches\n   end\nend\n</code></pre>\n\n<p>What will happen here, is it will check the if condition, and if it is true, the code will do nothing but SKIP the else step because it met the if condition. When it checks the if condition, if it comes back false, then it will move on to the else step, and execute that code.</p>\n\n<p>I cant promise this is the BEST way to write this code, but this is simple and should suffice to solve the problem</p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 5812768, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-hz93Ydg3gmU/AAAAAAAAAAI/AAAAAAAAAE8/w5dxcczCB9A/photo.jpg?sz=128", "display_name": "Andrew B", "link": "https://stackoverflow.com/users/5812768/andrew-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1484837890, "creation_date": 1484837890, "answer_id": 41744935, "question_id": 41731292, "link": "https://stackoverflow.com/questions/41731292/how-to-exit-out-of-ruby-cucumber-step-definition-early/41744935#41744935", "title": "How to exit out of Ruby Cucumber Step definition early?", "body": "<p>Because you want nothing to happen if the condition is true, I would recommend using <code>unless</code> in the step definition.</p>\n\n<pre><code>When(/^I create scenarios$/) do\n  unless condition == true\n     #code you want to execute when the condition is false\n  end\nend\n</code></pre>\n\n<p>If <code>condition == true</code>, the flow will just move on to the next step.</p>\n"}, {"tags": [], "owner": {"reputation": 304, "user_id": 4788704, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-p6-tONkPxXs/AAAAAAAAAAI/AAAAAAAAABU/kgEGiVyqoG8/photo.jpg?sz=128", "display_name": "Ben Behar", "link": "https://stackoverflow.com/users/4788704/ben-behar"}, "is_accepted": false, "score": 5, "last_activity_date": 1499875710, "creation_date": 1499875710, "answer_id": 45062796, "question_id": 41731292, "link": "https://stackoverflow.com/questions/41731292/how-to-exit-out-of-ruby-cucumber-step-definition-early/45062796#45062796", "title": "How to exit out of Ruby Cucumber Step definition early?", "body": "<p>I believe that you are looking to exit the block early by using 'next'.</p>\n\n<pre><code>next if condition\n</code></pre>\n"}], "owner": {"reputation": 335, "user_id": 1097108, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3a7440ae072223fdd13f1e6f246c2b7c?s=128&d=identicon&r=PG", "display_name": "user1097108", "link": "https://stackoverflow.com/users/1097108/user1097108"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 764, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1499875710, "creation_date": 1484782167, "question_id": 41731292, "link": "https://stackoverflow.com/questions/41731292/how-to-exit-out-of-ruby-cucumber-step-definition-early", "title": "How to exit out of Ruby Cucumber Step definition early?", "body": "<p>I don't know why this is so difficult. I've tried several things, but for some reason this Ruby Cucumber code either continues onto the next code in the block, or I get something like \"unexpected return (LocalJumpError)\". Is this something obvious that I can't find the answer to?</p>\n\n<p>I have a workaround by just wrapping all the code in an \"if condition == false\", but is there a better way?</p>\n\n<pre><code>When(/^I create scenarios$/) do\n   if condition == true\n     #exit, return, next, break ????\n   end\n   #code i don't want to execute if condition matches\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "railstutorial.org"], "answers": [{"tags": [], "owner": {"reputation": 163, "user_id": 6432023, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbf6670724daaa9b481e1521a81666c2?s=128&d=identicon&r=PG&f=1", "display_name": "Christian O&#39;Rourke", "link": "https://stackoverflow.com/users/6432023/christian-orourke"}, "is_accepted": true, "score": 0, "last_activity_date": 1484785551, "creation_date": 1484785551, "answer_id": 41731787, "question_id": 41731197, "link": "https://stackoverflow.com/questions/41731197/both-users-signup-test-and-user-test-fail-after-actionmailer-configurationbased/41731787#41731787", "title": "Both users_signup_test and user_test fail after ActionMailer configuration(based off of Michael Hartl tutorial)", "body": "<p>Last error was caused by UserMailer in the users_controller, changing it to DogMailer fixed the error</p>\n"}], "owner": {"reputation": 163, "user_id": 6432023, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fbf6670724daaa9b481e1521a81666c2?s=128&d=identicon&r=PG&f=1", "display_name": "Christian O&#39;Rourke", "link": "https://stackoverflow.com/users/6432023/christian-orourke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 41731787, "answer_count": 1, "score": 0, "last_activity_date": 1484785551, "creation_date": 1484781545, "last_edit_date": 1484782684, "question_id": 41731197, "link": "https://stackoverflow.com/questions/41731197/both-users-signup-test-and-user-test-fail-after-actionmailer-configurationbased", "title": "Both users_signup_test and user_test fail after ActionMailer configuration(based off of Michael Hartl tutorial)", "body": "<p>I am trying to make a simple application that just sends an email with a picture of a dog in it to whoever signs up to use as an example for myself for creating mailers in other applications. My user model and integration tests were passing before I added the code for my ActionMailer. I'm not sure what's going on/why they are failing as I have made no changes to the user.rb model or the users_controller.rb file besides adding a private email(which isn't the problem, I've removed the method and reverted the model back to its original state and get the same error messages). If anyone can help me or knows why this could happening that would be great!</p>\n\n<p>Edit: Here is my bitbucket repository: <a href=\"https://bitbucket.org/corourke24/daves-double-down-dogs\" rel=\"nofollow noreferrer\">https://bitbucket.org/corourke24/daves-double-down-dogs</a></p>\n\n<p>The error messages that I'm getting are as follows:</p>\n\n<pre><code>Failure:\nUsersSignupTest#test_valid_signup_info [/home/ubuntu/workspace/test/integration/users_signup_test.rb:17]:\n\"User.count\" didn't change by 1.\nExpected: 4\n  Actual: 3\n\n\nbin/rails test test/integration/users_signup_test.rb:15\n\n...F\n\nFailure:\nUserTest#test_email_validation_should_accept_valid_email_addresses [/home/ubuntu/workspace/test/models/user_test.rb:39]:\nExpected false to be truthy.\n\n\nbin/rails test test/models/user_test.rb:34\n\nF\n\nFailure:\nUserTest#test_user_should_have_valid_email [/home/ubuntu/workspace/test/models/user_test.rb:14]:\nExpected false to be truthy.\n\n\nbin/rails test test/models/user_test.rb:13\n\nF\n\nFailure:\nUserTest#test_user_should_be_valid [/home/ubuntu/workspace/test/models/user_test.rb:10]:\nExpected false to be truthy.\n\n\nbin/rails test test/models/user_test.rb:9 \n</code></pre>\n\n<p>Here is my user.rb model:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n    before_save :email_downcase\n    EMAIL_REGEXP =  /\\A[\\w+\\-.]+@[a-z\\d\\-]+(\\.[a-z\\d\\-]+)*\\.[a-z]+\\z/i\n    validates :email, presence: true, length: { maximum: 255 },\n                    format: { with: EMAIL_REGEXP },\n                    uniqueness: { case_sensitive: false }\n\n    private\n\n        def email_downcase\n            self.email = email.downcase\n        end\n\nend\n</code></pre>\n\n<p>Here is my users_controller.rb file:</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n\n  def show\n    @user = User.find(params[:id])\n  end\n\n  def new\n    @user = User.new\n  end\n\n  def create\n    @user = User.new(user_params)\n    if @user.save\n      UserMailer.account_activation(@user).deliver_now\n      redirect_to root_path\n      flash[:success] = \"Welcome to Dave's Double Down Dogs!\"\n    else\n      render 'new'\n    end\n  end\n\n  private\n\n    def user_params\n      params.require(:user).permit(:email)\n    end\nend\n</code></pre>\n\n<p>Here is my application_cpontroller.rb file:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  # Prevent CSRF attacks by raising an exception.\n  # For APIs, you may want to use :null_session instead.\n  protect_from_forgery with: :exception\nend\n</code></pre>\n\n<p>Here is my users.yml file:</p>\n\n<pre><code>christian:\n  email: christian@example.com\n\nexample:\n  email: user@example.com\n\nuser:\n  email: user1@example.com\n</code></pre>\n\n<p>Here is my seeds.rb file:</p>\n\n<pre><code>User.create!(email: \"example@railstutorial.org\")\n</code></pre>\n\n<p>Here is my user_test.rb file:</p>\n\n<pre><code>require 'test_helper'\n\nclass UserTest &lt; ActiveSupport::TestCase\n\n  def setup\n    @user = User.new(email: \"user@example.com\")\n  end\n\n  test \"user should be valid\" do\n    assert @user.valid?\n  end\n\n  test \"user should have valid email\" do\n    assert @user.valid?  \n  end\n\n  test \"emails hould be valid\" do\n    @user.email = \"   \"\n    assert_not @user.valid?\n  end\n\n  test \"email should not be too long\" do\n    @user.email = 'i' * 244 + '@example.com'\n    assert_not @user.valid?\n  end\n\n  test \"email addresses should be unique\" do\n    dup_user = @user.dup\n    dup_user.email = @user.email.upcase\n    @user.save\n    assert_not dup_user.valid?\n  end\n\n  test \"email validation should accept valid email addresses\" do\n    valid_addresses = %w[user@example.com USER@foo.COM A_US-ER@foo.bar.org\n                     first.last@foo.jp alice+bob@baz.cn]\n    valid_addresses.each do |i|\n      @user.email = i\n      assert @user.valid?\n    end\n  end\n\n  test \"email validation should reject invalid email addresses\" do\n    invalid_addresses = %w[user@example,com user_at_foo.org user.name@example.\n                       foo@bar_baz.com foo@bar+baz.com]\n    invalid_addresses.each do |i|\n      @user.email = i\n      assert_not @user.valid?\n    end\n  end\n\n  test \"email addresses should be saved in lowercase\" do\n    multi_case_email = \"Foo@ExAMPle.CoM\"\n    @user.email = multi_case_email\n    @user.save\n    assert_equal multi_case_email.downcase, @user.reload.email\n  end\n\nend\n</code></pre>\n\n<p>Here is my users_signup_test.rb file:</p>\n\n<pre><code>require 'test_helper'\n\nclass UsersSignupTest &lt; ActionDispatch::IntegrationTest\n\n  test \"invalid signup info\" do\n    get signup_path\n    assert_no_difference 'User.count' do\n      post signup_path, params: { user: { email: \"\" } }\n    end\n    assert_template 'users/new'\n    assert_select 'div#error_explanation'\n    assert_select 'div.field_with_errors'\n  end\n\n  test \"valid signup info\" do\n    get signup_path\n    assert_difference 'User.count', 1 do\n      post signup_path, params: { user: { email: \"user@example.com\" } }\n    end\n    assert_redirected_to root_path\n    flash[:success] \n  end\n\nend\n</code></pre>\n\n<p>Edit: after realizing that the problem may be caused by duplicate email addressed being made by my</p>\n\n<pre><code>def setup\n    @user = User.new(email: \"user@example.com\")\nend\n</code></pre>\n\n<p>method in my user_test.rb interacting with my users.yml file I have changed my users.yml file to be:</p>\n\n<pre><code>christian:\n  email: christian@example.gov\n\nexample:\n  email: user@example.gov\n\nuser:\n  email: userx@example.gov\n</code></pre>\n\n<p>However, the error messages I get now are as follows:</p>\n\n<pre><code>.E\n\nError:\nUsersSignupTest#test_valid_signup_info:\nNameError: uninitialized constant UsersController::UserMailer\n    app/controllers/users_controller.rb:14:in `create'\n    test/integration/users_signup_test.rb:18:in `block (2 levels) in &lt;class:UsersSignupTest&gt;'\n    test/integration/users_signup_test.rb:17:in `block in &lt;class:UsersSignupTest&gt;'\n\n\nbin/rails test test/integration/users_signup_test.rb:15\n</code></pre>\n"}, {"tags": ["ruby", "postgresql", "sinatra", "ruby-datamapper"], "comments": [{"owner": {"reputation": 623, "user_id": 846250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o1e1i.png?s=128&g=1", "display_name": "To\ub9c8SE", "link": "https://stackoverflow.com/users/846250/to%eb%a7%88se"}, "edited": false, "score": 0, "creation_date": 1485429537, "post_id": 41730612, "comment_id": 70926263, "body": "A simple solution consists in using a <code>mutex</code> in your route to ensure that only one thread is executing it at any time."}, {"owner": {"reputation": 1, "user_id": 7438071, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VYwTrvbDOMw/AAAAAAAAAAI/AAAAAAAAEIo/8CvBfw1uplU/photo.jpg?sz=128", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0411\u043e\u0440\u043e\u0434\u0438\u043d", "link": "https://stackoverflow.com/users/7438071/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%91%d0%be%d1%80%d0%be%d0%b4%d0%b8%d0%bd"}, "reply_to_user": {"reputation": 623, "user_id": 846250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o1e1i.png?s=128&g=1", "display_name": "To\ub9c8SE", "link": "https://stackoverflow.com/users/846250/to%eb%a7%88se"}, "edited": false, "score": 0, "creation_date": 1485551878, "post_id": 41730612, "comment_id": 70988648, "body": "@To\ub9c8SE Thank you! This is very helpful."}], "owner": {"reputation": 1, "user_id": 7438071, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-VYwTrvbDOMw/AAAAAAAAAAI/AAAAAAAAEIo/8CvBfw1uplU/photo.jpg?sz=128", "display_name": "\u0410\u043d\u0434\u0440\u0435\u0439 \u0411\u043e\u0440\u043e\u0434\u0438\u043d", "link": "https://stackoverflow.com/users/7438071/%d0%90%d0%bd%d0%b4%d1%80%d0%b5%d0%b9-%d0%91%d0%be%d1%80%d0%be%d0%b4%d0%b8%d0%bd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1484778811, "creation_date": 1484778567, "last_edit_date": 1484778811, "question_id": 41730612, "link": "https://stackoverflow.com/questions/41730612/parallel-post-requests-to-db-with-ruby-datamapper", "title": "Parallel POST requests to DB with Ruby/DataMapper", "body": "<p>I'am trying to implement kind of a matchmaking REST service for the game. \nMy matchmaking table is simple as </p>\n\n<pre><code>ID (Serial)\nClient_Name_1 (String)\nClient_Name_2 (String)\n</code></pre>\n\n<p>Basic idea is that when client sends me his \"Name\" I check if there is a row with Client_Name_2 = NULL and update this row. \nIf there is no \"NULL\" rows I create new row with Client_Name_1 as recieved client \"Name\"</p>\n\n<p>Here is the router code:</p>\n\n<pre><code>post '/api/start' do\n    #parsing a request with client name\n    body = JSON.parse request.body.read\n\n    #checking if there is a row to update\n    t = Match.first(:Client_Name_2 =&gt; nil)\n\n    #matchmaking client to existing game if found\n    if t != nil\n    t.update(\n    Client_Name_2:  body['name']    \n    )\n    response = {:playerIs =&gt; '2', :id =&gt; t['id']} \n\n    #creating new game if nowhere to matchmake\n    elsif \n    m = Match.create(\n    Client_Name_1:      body['name']\n    )\n\n    Task.create(\n    Match_ID:       m['id']\n    )\n\n    response = {:playerIs =&gt; '1', :id =&gt; m['id']} \n\n    end \n    status 201\n    response.to_json    \nend\n</code></pre>\n\n<p>The tricky part for me is that when this router called simultaneously at the very same second from several different clients, all of these requests get the same row id from   </p>\n\n<pre><code>  #checking if there is a row to update\n  t = Match.first(:Client_Name_2 =&gt; nil)\n</code></pre>\n\n<p>and this code updates the same row for each request.</p>\n\n<p>Is there a simple solution for this or i will have to implement something like queue to handle such simultaneous requests consequentially?</p>\n\n<p>I will really appreciate your advice.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 1, "creation_date": 1484781554, "post_id": 41730590, "comment_id": 70656681, "body": "Assuming network bandwidth is not the bottleneck, you&#39;d do well to parallelize downloads and mutex on zipping. Typhoeus makes this easy and efficient, fwiw. Probably also worth <i>not</i> compressing much / at all. JPG data doesn&#39;t compress much. <a href=\"http://stackoverflow.com/a/21210576/203130\">This is another interesting option.</a>"}, {"owner": {"reputation": 2390, "user_id": 4812050, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/hzLjT.jpg?s=128&g=1", "display_name": "Cruz Nunez", "link": "https://stackoverflow.com/users/4812050/cruz-nunez"}, "reply_to_user": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1484896470, "post_id": 41730590, "comment_id": 70707717, "body": "@coreyward I got it working and went from downloading 6MB in 40 seconds to 1.7 seconds. I don&#39;t know what you mean by mutex on zipping. I also didn&#39;t use Typhoeus. I&#39;m happy with these numbers, Will mutex on zipping and Typhoeus improve it even more?"}], "answers": [{"tags": [], "owner": {"reputation": 492, "user_id": 756369, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/MFp2Q.jpg?s=128&g=1", "display_name": "jsookiki", "link": "https://stackoverflow.com/users/756369/jsookiki"}, "is_accepted": false, "score": 0, "last_activity_date": 1484780943, "creation_date": 1484780943, "answer_id": 41731081, "question_id": 41730590, "link": "https://stackoverflow.com/questions/41730590/rail-mass-download/41731081#41731081", "title": "Rail mass download", "body": "<p>Your best bet here is to use a primitive caching system in conjunction with the aws s3 gem.  </p>\n\n<p>First, you'd create a bucket in S3 called <code>car_image_zips</code>. When someone hits download, you'd reach out to this bucket to see if the car image zip exists there. If it does, download it. If not, download all the files and create the zip and upload it. One thing to note here is if your implementation uses something like Sidekiq for background jobs, you could optimize by making the subsequent upload a background job.  </p>\n\n<p>So with that said:\nI would assume <code>@car</code> has an <code>id</code>. And this also assumes you've configured the AWS S3 gem correctly. So download would look something like this:</p>\n\n<pre><code>def download\n car_id = @car.id\n s3 = AWS::S3.new #should be added as constant somewhere\n bucket = s3.buckets['car_image_zips']\n if buckets.object[\"#{car_id}_zip\"].exists? #Sample naming scheme\n  send_data s3.get_object(bucket:'car_image_zips', key:\"#{car_id}_zip\").body.read\n else\n   # Zip up files like you have\n   @images = @car.images\n   compressed_filestream = Zip::OutputStream.write_buffer do |zos|\n    @images.each do |img|\n      zos.put_next_entry img.file_file_name\n      zos.print open(img.file.url).read\n    end\n  end\n  compressed_filestream.rewindsend_data \n  s3_obj = s3.bucket('car_image_zips').object(\"#{@car.name}.zip\")\n  s3_obj.upload_file(\"#{@car.name}.zip\")\n  send_data compressed_filestream.read, filename: \"#{@car.name}.zip\"\nend\n</code></pre>\n\n<p>Granted, I have not tested this, but this should give you a general idea on how to do this with basic caching.  It's not perfect as you'll need to download and process it once, but it's a huge gain for a relatively simple solution.</p>\n\n<p>If you really truly wanted to optimize, you could use something like an <a href=\"http://docs.aws.amazon.com/lambda/latest/dg/with-s3.html%20AWS%20Lambda\" rel=\"nofollow noreferrer\">AWS Lambda</a> function to create a zip every time a file is uploaded to S3 and make it available for download. </p>\n"}, {"tags": [], "owner": {"reputation": 2390, "user_id": 4812050, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/hzLjT.jpg?s=128&g=1", "display_name": "Cruz Nunez", "link": "https://stackoverflow.com/users/4812050/cruz-nunez"}, "is_accepted": true, "score": 0, "last_activity_date": 1485801373, "creation_date": 1485801373, "answer_id": 41943088, "question_id": 41730590, "link": "https://stackoverflow.com/questions/41730590/rail-mass-download/41943088#41943088", "title": "Rail mass download", "body": "<p>Here is an answer for option 3. In the original code, the <code>.each</code> method waits for each loop to finish before continuing the next. If the download of the picture from the internet to the server takes one second, on average, then it will take a 40 image download about 40 seconds to download. Instead, download all the files at the same time. To do this use <a href=\"https://ruby-doc.org/core-2.2.0/Thread.html\" rel=\"nofollow noreferrer\">Threads</a>.</p>\n\n<pre><code>class CarsController &lt; ApplicationController\n  def download\n    images = load_images\n\n    filestream = write_file images\n\n    send_data filestream.read, filename: \"#{@car.name}.zip\"\n  end\n\n  def load_images\n    threads = []\n    images = []\n\n    @car.images.each do |f|\n      threads &lt;&lt; Thread.new do\n        images &lt;&lt; { name: f.file_file_name, file: open(f.file.url).read }\n      end\n    end\n\n    threads.each(&amp;:join)\n\n    images\n  end\n\n  def write_file(images)\n    require 'zip'\n\n    Zip.default_compression = Zlib::NO_COMPRESSION\n\n    stream = Zip::OutputStream.write_buffer do |zos|\n      images.each do |img|\n        zos.put_next_entry img[:name]\n        zos.print img[:file]\n      end\n    end\n\n    stream.rewind\n\n    stream\n  end\nend\n</code></pre>\n\n<p>You shovel the images and their names into an array using threads. Pass that array of info into a zipfile writer method. Once the zipfile is written, send it to the user.</p>\n\n<p>This reduces the controller action runtime from 40 seconds to 1..2 seconds.</p>\n"}], "owner": {"reputation": 2390, "user_id": 4812050, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/hzLjT.jpg?s=128&g=1", "display_name": "Cruz Nunez", "link": "https://stackoverflow.com/users/4812050/cruz-nunez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 41943088, "answer_count": 2, "score": -1, "last_activity_date": 1485801373, "creation_date": 1484778493, "question_id": 41730590, "link": "https://stackoverflow.com/questions/41730590/rail-mass-download", "title": "Rail mass download", "body": "<p>I'm using paperclip and AWS S3 for file storage.</p>\n\n<p>I have a Car model and an Image model.\nA car <code>has_many :images</code>.\nThe image <code>has_attachment :file</code>.</p>\n\n<p>A car can have as many images as I want.</p>\n\n<p>What I wanted is a way to download all these car's images at the same time.</p>\n\n<p>I have working code:</p>\n\n\n\n<pre><code>def download\n  @images = @car.images\n\n  compressed_filestream = Zip::OutputStream.write_buffer do |zos|\n    @images.each do |img|\n      zos.put_next_entry img.file_file_name\n      zos.print open(img.file.url).read\n    end\n  end\n\n  compressed_filestream.rewind\n  send_data compressed_filestream.read, filename: \"#{@car.name}.zip\"\nend\n</code></pre>\n\n<p>When <code>/cars/1/download</code> is requested the above controller actions runs.\nIt works but I find it really slow.\nWhat I want now is a <em>faster</em> solution for mass download.\nI find download time to take 6 seconds per megabyte.</p>\n\n<p>I want a faster way.\nI know that you can go to any web page, right-click, and \"Save As...\" in order to save that particular page.\nWhen the page has images, they appear in a new folder after the download finishes.\nThe download is also really fast.\nI guess this is so because the browser has already downloaded those images, so it justs gives them to my computer instead of fetching the images again.\nIf the browser can download an HTML file and a folder of assets, we should be able to make the browser download just a folder of images right?</p>\n\n<p>I have a few ideas that I will work on but I want to know if anyone has some faster solutions or input at least on current ideas.</p>\n\n<p>Ideas:</p>\n\n<ol>\n<li><p>Instead of drafting a new .zip file everytime someone wants to download, edit the .zip file everytime the car's images get updated. This way when the user requests all the images, the file already exists, and they just download it. But where should these .zip files go? Where and how do we save them?</p></li>\n<li><p>In JavaScript you can create blob files using some image url. Can we load all the images after the page has loaded? This way the page load is fast, but then in the background, while the user is viewing the page, the browser is downloading the images in the background. If the user decides to download them, the download time is fast.</p></li>\n<li><p>Maybe my controller action could be improved to create a temporary .zip file faster.</p></li>\n</ol>\n\n<p>Ideas anyone?</p>\n"}, {"tags": ["ruby", "math"], "comments": [{"owner": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "edited": false, "score": 0, "creation_date": 1484777512, "post_id": 41730330, "comment_id": 70655217, "body": "Could you please improve your question by including the code you have tried to solve the problem?"}, {"owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "reply_to_user": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "edited": false, "score": 0, "creation_date": 1484777739, "post_id": 41730330, "comment_id": 70655309, "body": "All I have is a while loop, where I realise that I somehow need to sort the digits somehow and I am completely blank on how to do that."}, {"owner": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "edited": false, "score": 0, "creation_date": 1484777792, "post_id": 41730330, "comment_id": 70655332, "body": "Posting your code would be a good start point. It will make clearer what you are trying to do and will give us a basis to help you"}, {"owner": {"reputation": 3930, "user_id": 4613236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wQZcm.jpg?s=128&g=1", "display_name": "Zoran", "link": "https://stackoverflow.com/users/4613236/zoran"}, "edited": false, "score": 0, "creation_date": 1484778658, "post_id": 41730330, "comment_id": 70655690, "body": "To sort the digits in a string, you can do something like this: <code>&#39;2196548&#39;.chars.sort.join</code> which would return <code>1245689</code>."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1484779444, "post_id": 41730330, "comment_id": 70655996, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. You need to try things, then, if you can&#39;t figure it show us the minimal code that demonstrates what you tried, and we&#39;ll help you fix it. Without that it looks like you didn&#39;t try and want us to write a tutorial, or code, for you, which isn&#39;t what SO is for. <a href=\"http://meta.stackoverflow.com/q/261592/128421\">meta.stackoverflow.com/q/261592/128421</a>"}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1484789971, "post_id": 41730330, "comment_id": 70659008, "body": "This question is a math problem."}], "answers": [{"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1484804121, "post_id": 41730627, "comment_id": 70662900, "body": "Downvoter : constructive criticism is welcome."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 1, "last_activity_date": 1484779409, "last_edit_date": 1484779409, "creation_date": 1484778615, "answer_id": 41730627, "question_id": 41730330, "link": "https://stackoverflow.com/questions/41730330/sorting-digits-in-a-string-or-integer/41730627#41730627", "title": "Sorting digits in a string or integer?", "body": "<h1>Math</h1>\n\n<p>If I understand it right, the \"smartest algorithm\" is to just calculate <a href=\"https://en.wikipedia.org/wiki/Binomial_coefficient\" rel=\"nofollow noreferrer\"><code>10 choose 4</code></a>.</p>\n\n<h1>Your question</h1>\n\n<p>A <a href=\"http://ruby-doc.org/stdlib-2.3.3/libdoc/set/rdoc/Set.html\" rel=\"nofollow noreferrer\"><code>Set</code></a> might be better suited than a <code>Hash</code> if you just want to count unique elements.</p>\n\n<p>If you have a string and want to sort the digits, you can use :</p>\n\n<pre><code>'4132'.chars.sort\n#=&gt; [\"1\", \"2\", \"3\", \"4\"]\n'4132'.chars.sort.join\n#=&gt; \"1234\"\n</code></pre>\n\n<h1>Alternative</h1>\n\n<p>You didn't provide any code, so I'll just write a few hints for an alternative way of calculating it :</p>\n\n<ul>\n<li>You can describe a button combination with 10 <code>1</code> and <code>0</code>s.</li>\n<li>Those 10 <code>1</code> and <code>0</code>s can be seen as a binary number.</li>\n<li>This binary number is between <code>0</code> and <code>2**10-1</code> (1023)</li>\n<li>You can iterate every number in this range, and convert them to binary (<code>number.to_s(2)</code>)</li>\n<li>You can count the number of <code>1</code>s to check if 4 buttons are pressed</li>\n<li>You can count the binary numbers that have exactly 4 <code>1</code>s</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "edited": false, "score": 0, "creation_date": 1484869429, "post_id": 41731413, "comment_id": 70699892, "body": "Very nice solution. However the correct answer is <code>10!&#47;(4!(10-4)!)=210</code>. 5040 looks like if the order matter."}, {"owner": {"reputation": 799, "user_id": 2559093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOwPf.jpg?s=128&g=1", "display_name": "OneNeptune", "link": "https://stackoverflow.com/users/2559093/oneneptune"}, "reply_to_user": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "edited": false, "score": 0, "creation_date": 1484869556, "post_id": 41731413, "comment_id": 70699925, "body": "@JasmineLognnes that&#39;s what the first one does, the last one goes in to all permutations, you can see after the second code snippet I went off on a &quot;if the order does matter&quot; meaning 1234 is different thatn 2134. Thanks!"}], "tags": [], "owner": {"reputation": 799, "user_id": 2559093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOwPf.jpg?s=128&g=1", "display_name": "OneNeptune", "link": "https://stackoverflow.com/users/2559093/oneneptune"}, "is_accepted": false, "score": 2, "last_activity_date": 1484783491, "last_edit_date": 1484783491, "creation_date": 1484782968, "answer_id": 41731413, "question_id": 41730330, "link": "https://stackoverflow.com/questions/41730330/sorting-digits-in-a-string-or-integer/41731413#41731413", "title": "Sorting digits in a string or integer?", "body": "<p>So, a few things, you said order didn't matter, so we just need the unique combinations. You also said each button could only be pressed once.</p>\n\n<p>You also said you wanted to solve it using ruby, so why write convoluted methods of your own when there's a perfectly simple way?</p>\n\n<p>You seem to be wanting an array though, not a hash.</p>\n\n<p>This will achieve that, but in an array:</p>\n\n<pre><code>[0,1,2,3,4,5,6,7,8,9].combination(4).to_a\n</code></pre>\n\n<p>This will put it in a hash.</p>\n\n<pre><code>combinations_in_hash = Hash.new\n[0,1,2,3,4,5,6,7,8,9].combination(4).to_a.each_with_index { |x,i| combinations_in_hash[i] = x }\ncombinations_in_hash\n</code></pre>\n\n<p>But let's say that order of the combination DID matter...</p>\n\n<pre><code>combinations_in_hash = Hash.new\n[0,1,2,3,4,5,6,7,8,9].combination(4).to_a.each_with_index { |x,i| combinations_in_hash[x] = Array.new(x.permutation.to_a) }\ncombinations_in_hash\n</code></pre>\n\n<p>Or in array form:</p>\n\n<pre><code>[0,1,2,3,4,5,6,7,8,9].permutation(4).to_a\n</code></pre>\n\n<p>Permutation can combine the combination / permutation effect by passing an argument of the length. Just in case!</p>\n\n<p>That's 5,040 possible combinations. Not too bad!</p>\n"}], "owner": {"reputation": 5139, "user_id": 3293148, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/a5b0a16cfd67f7e3944d886fd1bebde5?s=128&d=identicon&r=PG", "display_name": "Jasmine Lognnes", "link": "https://stackoverflow.com/users/3293148/jasmine-lognnes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 273, "favorite_count": 0, "closed_date": 1484852895, "accepted_answer_id": 41730627, "answer_count": 2, "score": -5, "last_activity_date": 1484783491, "creation_date": 1484777313, "question_id": 41730330, "link": "https://stackoverflow.com/questions/41730330/sorting-digits-in-a-string-or-integer", "closed_reason": "Needs more focus", "title": "Sorting digits in a string or integer?", "body": "<p>I have a combination lock with 10 buttons and I have to press in 4 buttons and then hit Open. Order of the buttons doesn't matter and each button can only be pressed once.</p>\n\n<p>I am sure there are some probability theory and permutation that makes this an easy problem, but I would like to solve it in Ruby.</p>\n\n<p>My thought is to have a while loop and then sort the digits in the counter and if each digit only occur once, then try to insert it in a hash, where I than can get the length of the hash at the end to have number of combinations.</p>\n\n<p>But how can I sort the digits in a string or inter?</p>\n\n<p>Or is there a smarter algorithm for this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "stripe-payments"], "comments": [{"owner": {"reputation": 234, "user_id": 5992270, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95add28d8792fa4af0f190344db456ac?s=128&d=identicon&r=PG", "display_name": "Stephen W", "link": "https://stackoverflow.com/users/5992270/stephen-w"}, "edited": false, "score": 0, "creation_date": 1484987674, "post_id": 41729929, "comment_id": 70745386, "body": "The first thing I notice is that you&#39;re not actually passing the stripe_card_token as a parameter to the function. Take a look at your Parameters at the bottom and you&#39;ve passed the plan, user data and commit info but no &quot;card&quot;. Start there possibly"}], "answers": [{"tags": [], "owner": {"reputation": 1070, "user_id": 5915807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f4095e2e965e552e521bc9d38886d77?s=128&d=identicon&r=PG", "display_name": "korben", "link": "https://stackoverflow.com/users/5915807/korben"}, "is_accepted": false, "score": 0, "last_activity_date": 1484776783, "creation_date": 1484776783, "answer_id": 41730228, "question_id": 41729929, "link": "https://stackoverflow.com/questions/41729929/stripeinvalidrequesterror-this-customer-has-no-attached-payment-source/41730228#41730228", "title": "Stripe::InvalidRequestError: This customer has no attached payment source", "body": "<p>I would recommend dividing out the requests to see which part of it is actually failing.  I <em>suspect</em> that the reason it's barfing is just because something else is happening and it's unable to manifest a meaningful error message.</p>\n\n<p>Try this:</p>\n\n<pre><code>cus = Stripe::Customer.create(description: email)\nself.stripe_customer_token = cus.id\ncus.sources.create(source: stripe_card_token)\nsub = Stripe::Subscription.create(customer: cus.id, plan: plan_id)\nsave!\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7437909"}, "is_accepted": true, "score": -1, "last_activity_date": 1485082553, "creation_date": 1485082553, "answer_id": 41790034, "question_id": 41729929, "link": "https://stackoverflow.com/questions/41729929/stripeinvalidrequesterror-this-customer-has-no-attached-payment-source/41790034#41790034", "title": "Stripe::InvalidRequestError: This customer has no attached payment source", "body": "<p>Many thanks for taking the time to reply. So I gave it a few days and looked at it again last night and it turned out to be a rather simple and stupid mistake on my part.</p>\n\n<p>In the lesson video and notes the instructor corrects a typo in the users.js file where he referenced an incorrect ID for the submit button in the form. He had typed</p>\n\n<pre><code>var submitBtn = $('#form-submit-btn');\n</code></pre>\n\n<p>but he had used the following in the form</p>\n\n<pre><code>var submitBtn = $('#form-signup-btn');\n</code></pre>\n\n<p>While I changed my users.js file to match the correction, somehow I had actually used #form-submit-btn' so when I corrected the users.js file per the lesson I actually caused the problem.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 591320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7dd1702e405bd4ac03504573c5c5351a?s=128&d=identicon&r=PG", "display_name": "user591320", "link": "https://stackoverflow.com/users/591320/user591320"}, "is_accepted": false, "score": 0, "last_activity_date": 1506850095, "last_edit_date": 1506850095, "creation_date": 1506849055, "answer_id": 46510897, "question_id": 41729929, "link": "https://stackoverflow.com/questions/41729929/stripeinvalidrequesterror-this-customer-has-no-attached-payment-source/46510897#46510897", "title": "Stripe::InvalidRequestError: This customer has no attached payment source", "body": "<p>I just hit the same issue.\nI made the fix for the typo but still got the same error. It looks like the test card number used in the course video maybe another source for this\nerror too. I used a test number from the following page and all worked as expected.</p>\n\n<p><a href=\"https://stripe.com/docs/testing#cards\" rel=\"nofollow noreferrer\">https://stripe.com/docs/testing#cards</a></p>\n\n<p>Just my 2cents!</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7437909"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1155, "favorite_count": 0, "protected_date": 1507945681, "accepted_answer_id": 41790034, "answer_count": 3, "score": 1, "last_activity_date": 1507940685, "creation_date": 1484775478, "question_id": 41729929, "link": "https://stackoverflow.com/questions/41729929/stripeinvalidrequesterror-this-customer-has-no-attached-payment-source", "title": "Stripe::InvalidRequestError: This customer has no attached payment source", "body": "<p>I'm trying to do the test signup at the end of lecture 113 in Upskill's Essential Web Developer course, however I get the following error and I have been over and over the previous lectures and cannot pinpoint where I have gone wrong.</p>\n\n<pre><code>Stripe::InvalidRequestError in Users::RegistrationsController#create\n\nThis customer has no attached payment source\n\nExtracted source (around line #10):\n\n8  def save_with_subscription\n9    if valid?\n10      customer = Stripe::Customer.create(description: email, plan: plan_id, card: stripe_card_token)\n11      self.stripe_customer_token = customer.id\n12      save!\n13    end\n\nRails.root: /home/ubuntu/workspace/saasapp\n\nApplication Trace | Framework Trace | Full Trace\napp/models/user.rb:10:in `save_with_subscription'\napp/controllers/users/registrations_controller.rb:7:in `block in create'\napp/controllers/users/registrations_controller.rb:3:in `create'\nRequest\n\nParameters:\n\n{\"utf8\"=&gt;\"\u2713\",\n\"authenticity_token\"=&gt;\"/4EiUCLerdc0o+vIbZWWZzxC3cm1TSjyWGs/lYq/H4RiT6zwohUJUQnZaIrxADF2RiWcs6G3BDXiRDQT/bEa4Q==\",\n\"plan\"=&gt;\"2\",\n\"user\"=&gt;{\"email\"=&gt;\"test@example.com\", \"password\"=&gt;\"[FILTERED]\", \"password_confirmation\"=&gt;\"[FILTERED]\"},\n\"commit\"=&gt;\"Sign up\"}\n\nToggle session dump\nToggle env dump\nResponse\n\nHeaders:\n\nNone\n</code></pre>\n\n<p>LOG</p>\n\n<pre><code>Started POST \"/users\" for 81.140.28.63 at 2017-01-18 21:24:44 +0000\nCannot render console from 81.140.28.63! Allowed networks: 127.0.0.1, ::1, 127.0.0.0/127.255.255.255\n    Processing by Users::RegistrationsController#create as HTML\nParameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"GIGatf9j6proPQgjnjCwR6r6BBeDLCYa2lhOG453bQLwln1wTOEbVSPaPow6ZLGBcGpvX3Qm1Fw03vpQc0Xtsg==\", \"plan\"=&gt;\"2\", \"user\"=&gt;{\"email\"=&gt;\"test@example.com\", \"password\"=&gt;\"[FILTERED]\", \"password_confirmation\"=&gt;\"[FILTERED]\"}, \"commit\"=&gt;\"Sign up\"}\n   (0.1ms)  begin transaction\n  User Exists (0.3ms)  SELECT  1 AS one FROM \"users\" WHERE \"users\".\"email\" = ? LIMIT ?  [[\"email\", \"test@example.com\"], [\"LIMIT\", 1]]\n   (0.2ms)  rollback transaction\n  User Exists (0.2ms)  SELECT  1 AS one FROM \"users\" WHERE \"users\".\"email\" = ? LIMIT ?  [[\"email\", \"test@example.com\"], [\"LIMIT\", 1]]\n  Plan Load (0.1ms)  SELECT  \"plans\".* FROM \"plans\" WHERE \"plans\".\"id\" = ? LIMIT ?  [[\"id\", 2], [\"LIMIT\", 1]]\nCompleted 500 Internal Server Error in 905ms (ActiveRecord: 0.9ms)\n\n\n\nStripe::InvalidRequestError (This customer has no attached payment source):\n\napp/models/user.rb:10:in `save_with_subscription'\napp/controllers/users/registrations_controller.rb:7:in `block in create'\napp/controllers/users/registrations_controller.rb:3:in `create'\n  Rendering /usr/local/rvm/gems/ruby-2.3.0@saasapp/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout\n  Rendering /usr/local/rvm/gems/ruby-2.3.0@saasapp/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb\n  Rendered /usr/local/rvm/gems/ruby-2.3.0@saasapp/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (9.5ms)\n  Rendering /usr/local/rvm/gems/ruby-2.3.0@saasapp/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb\n  Rendered /usr/local/rvm/gems/ruby-2.3.0@saasapp/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (4.3ms)\n  Rendering /usr/local/rvm/gems/ruby-2.3.0@saasapp/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb\n  Rendered /usr/local/rvm/gems/ruby-2.3.0@saasapp/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (2.7ms)\n  Rendered /usr/local/rvm/gems/ruby-2.3.0@saasapp/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.html.erb within rescues/layout (43.3ms)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "edited": false, "score": 0, "creation_date": 1484776434, "post_id": 41730044, "comment_id": 70654746, "body": "Thanks @Phil for the help! I didn&#39;t think about the false positive scenario either."}], "tags": [], "owner": {"reputation": 4543, "user_id": 3213605, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/a2HS8.jpg?s=128&g=1", "display_name": "PhilVarg", "link": "https://stackoverflow.com/users/3213605/philvarg"}, "is_accepted": true, "score": 0, "last_activity_date": 1484776014, "creation_date": 1484776014, "answer_id": 41730044, "question_id": 41729903, "link": "https://stackoverflow.com/questions/41729903/why-does-my-rspec-post-create-invalid-parameter-controller-test-fail/41730044#41730044", "title": "Why does my Rspec post :create invalid parameter controller test fail?", "body": "<p>well looking at the error, it looks like you cant use the <code>by</code> matcher for testing <code>to_not change</code>. intuitively, you should just be expecting it to not change the count. you shouldnt be testing that its <strong>not</strong> changing <strong>by</strong> 1, because that test would pass if the count changed by 0 or 2, which i imagine would lead to many false positives</p>\n\n<p>does this work?</p>\n\n<pre><code>expect { post :create, employee: invalid_employee_params }.to_not change(Employee, :count)\n</code></pre>\n"}], "owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 41730044, "answer_count": 1, "score": 0, "last_activity_date": 1484776014, "creation_date": 1484775375, "question_id": 41729903, "link": "https://stackoverflow.com/questions/41729903/why-does-my-rspec-post-create-invalid-parameter-controller-test-fail", "title": "Why does my Rspec post :create invalid parameter controller test fail?", "body": "<p>I have two tests for my controllers. </p>\n\n<pre><code>spec/controllers/employees_controller_spec.rb\n\n  it 'should create a new valid employee' do\n    employee_params = FactoryGirl.attributes_for(:employee)\n    expect { post :create, employee: employee_params }.to change(Employee, :count).by(1)\n    should redirect_to(action: :index)\n  end\n\n\n\n  it 'should not save an employee with an invalid avatar extention' do\n    invalid_employee_params = FactoryGirl.attributes_for(:employee)\n    invalid_employee_params[:avatar] = Rack::Test::UploadedFile.new(File.open(File.join(Rails.root, '/spec/fixtures/photos/duck.txt')))\n    expect { post :create, employee: invalid_employee_params }.to_not change(Employee, :count).by(1)\n  end\n</code></pre>\n\n<p>When I execute these tests, the first test passes while the second one fails. Here is the error below:</p>\n\n<pre><code>Failure/Error: expect { post :create, employee: invalid_employee_params }.to_not change(Employee, :count).by(1)\n\n NotImplementedError:\n   `expect { }.not_to change { }.by()` is not supported\n # ./spec/controllers/employees_controller_spec.rb:38:in `block (3 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>I have followed Rspec's documentation found here <a href=\"https://www.relishapp.com/rspec/rspec-expectations/v/2-2/docs/matchers/expect-change\" rel=\"nofollow noreferrer\">Rspec doc</a>and it seems correct to me. This looks like a simple error to fix but  I'm not quite sure what is going on. Could someone help point out my error. I am new to Rspec.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"comments": [{"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1484790832, "post_id": 41732462, "comment_id": 70659244, "body": "Hmm, didn&#39;t even know it existed.  Let me try it out!"}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1484862400, "post_id": 41732462, "comment_id": 70697104, "body": "Looks like this will work.  Been working on some heavy customization though."}], "tags": [], "owner": {"reputation": 6846, "user_id": 1753596, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/r9f3k.jpg?s=128&g=1", "display_name": "trh", "link": "https://stackoverflow.com/users/1753596/trh"}, "is_accepted": true, "score": 0, "last_activity_date": 1484790629, "creation_date": 1484790629, "answer_id": 41732462, "question_id": 41729734, "link": "https://stackoverflow.com/questions/41729734/ruby-on-rails-devise-password-override/41732462#41732462", "title": "Ruby on Rails devise password override", "body": "<p>Have you considered using devise_invitable? </p>\n\n<p><a href=\"https://github.com/scambra/devise_invitable\" rel=\"nofollow noreferrer\">https://github.com/scambra/devise_invitable</a></p>\n\n<p>This would let you use your form to create the extra user data, then send an invitation to your new users - the gem itself has a stubbed out email that just has a link to back to the site with a token, that lets them set their password</p>\n\n<p>This isn't a complicated process this way. </p>\n\n<h1>1 Add the gem to your Gemfile and run bundle install</h1>\n\n<pre><code>gem 'devise_invitable'\n</code></pre>\n\n<h1>2 Run the install generator for the initializer</h1>\n\n<pre><code>rails generate devise_invitable:install\n</code></pre>\n\n<h1>3 Run the generator for the model</h1>\n\n<pre><code>rails generate devise_invitable User\n</code></pre>\n\n<h1>4 Add invitable to your model</h1>\n\n<pre><code>  # your list of mods might be different, it will depend on what you're using\n  devise  :database_authenticatable, :registerable, :omniauthable,  :recoverable, :rememberable, :trackable , :validatable , :confirmable, :invitable\n</code></pre>\n\n<h1>5 Create a migration to add invitation fields</h1>\n\n<pre><code>rails g migration add_invitable_to_user \n</code></pre>\n\n<p>Open the migration and add this to it</p>\n\n<pre><code>def change\n    add_column :users, :invitation_token, :string\n    add_column :users, :invitation_created_at, :datetime\n    add_column :users, :invitation_sent_at, :datetime\n    add_column :users, :invitation_accepted_at, :datetime\n    add_column :users, :invitation_limit, :integer\n    add_column :users, :invited_by_id, :integer\n    add_column :users, :invited_by_type, :string\n    add_index :users, :invitation_token, :unique =&gt; true\n\n    # Allow null encrypted_password\n    change_column_null :users, :encrypted_password, :string, true\n    # Allow null password_salt (add it if you are using Devise's encryptable module)\n    change_column_null :users, :password_salt, :string, true\nend\n</code></pre>\n\n<h1>6 Generate the views so you can edit your invitation pages</h1>\n\n<pre><code>rails generate devise_invitable:views\n</code></pre>\n\n<h1>7 Add a route for devise invitations</h1>\n\n<pre><code># you might have other controllers or put them in a different directory, but it will be similar to this\ndevise_for :users, :controllers =&gt; { :invitations =&gt; 'users/invitations' }\n</code></pre>\n\n<h1>8 Add the invitation controller</h1>\n\n<pre><code>class Users::InvitationsController &lt; Devise::InvitationsController\n  protected\n\n  def invite_params\n    params.permit(user: [:email, :first_name, :last_name, :phone_number, :invitation_token, :provider, :skip_invitation])\n  end\n\n  def accept_invitation_params\n    params.permit(:password, :password_confirmation, :invitation_token, :first_name, :last_name, :phone_number )\n  end\n\nend\n</code></pre>\n\n<h1>9 Change the form to invite</h1>\n\n<pre><code>&lt;%= form_for @user, url: user_invitation_path(@user) do |f| %&gt;\n   &lt;%= f.label :first_name, \"First Name\", class: \"control-label col-md-2 col-sm-2 col-xs-12\" %&gt;\n   &lt;%= f.text_field :first_name, class: \"form-control\", :required =&gt; true, required: \"\" %&gt;\n\n   &lt;%= f.label :last_name, \"Last Name\", class: \"control-label col-md-2 col-sm-2 col-xs-12\" %&gt;\n   &lt;%= f.text_field :last_name, class: \"form-control\", :required =&gt; true, required: \"\" %&gt;\n\n   &lt;%= f.label :email, \"Email\", class: \"control-label col-md-2 col-sm-2 col-xs-12\" %&gt;\n   &lt;%= f.email_field :email, class: \"form-control\", :required =&gt; true, required: \"\" %&gt;\n\n   &lt;%= f.label :phone_number, \"Phone Number\", class: \"control-label col-md-2 col-sm-2 col-xs-12\" %&gt;\n   &lt;%= f.text_field :phone_number, class: \"form-control\", :required =&gt; true, required: \"\" %&gt;\n\n   &lt;%= f.label :password, \"Password\", class: \"control-label col-md-2 col-sm-2 col-xs-12\" %&gt;\n   &lt;%= f.password_field :password, class: \"form-control\", :required =&gt; true, required: \"\" %&gt;\n\n   &lt;%= f.label :password_confirmation, \"Password Confirmation\", class: \"control-label col-md-2 col-sm-2 col-xs-12\" %&gt;\n   &lt;%= f.password_field :password_confirmation, class: \"form-control\", :required =&gt; true, required: \"\" %&gt;\n\n   &lt;%= link_to \"Cancel\", \"\", class: \"btn btn-danger\" %&gt;\n   &lt;%= f.submit \"Submit\", class: \"btn btn-success\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 41732462, "answer_count": 1, "score": 0, "last_activity_date": 1484790629, "creation_date": 1484774770, "question_id": 41729734, "link": "https://stackoverflow.com/questions/41729734/ruby-on-rails-devise-password-override", "title": "Ruby on Rails devise password override", "body": "<p>My existing app uses Devise for user authentication which works fine for my user signup/confirmation process.  Users simply enter an email address, a password, and password_confirmation.  They get the confirmation email and all is good!</p>\n\n<p>Now, I want to allow <code>account_admins</code> to have the ability to create additional users that would fall under them.</p>\n\n<p>I have the controller and the form wired up and the user is being created.  However, it occurs to me that I need to allow the account_admin to bypass the <code>password</code> and <code>password_confirmation</code> fields.  <em>Otherwise, the account_admin user would need to send a separate email to each user with the password they created for them, which I don't like.</em></p>\n\n<p><strong>Instead, it makes more sense to just have the account_admin fill in the required fields <code>first_name</code>, <code>last_name</code>, <code>phone_number</code>, and <code>email</code> to create the user and have Devise create &amp; email a password to the user.</strong></p>\n\n<p>I've looked at quite a few <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Override-confirmations-so-users-can-pick-their-own-passwords-as-part-of-confirmation-activation\" rel=\"nofollow noreferrer\">Devise resources</a> and <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Automatically-generate-password-for-users-(simpler-registration)\" rel=\"nofollow noreferrer\">other things</a> ppl have done, but most of them have me completely rewiring the confirmation process as well, which I don't want to do.</p>\n\n<p>So, here is my form view <code>views/users/new.html.erb</code>:</p>\n\n<pre><code>&lt;%= form_for @user, url: users_admin_index_path(@user) do |f| %&gt;\n   &lt;%= f.label :first_name, \"First Name\", class: \"control-label col-md-2 col-sm-2 col-xs-12\" %&gt;\n   &lt;%= f.text_field :first_name, class: \"form-control\", :required =&gt; true, required: \"\" %&gt;\n\n   &lt;%= f.label :last_name, \"Last Name\", class: \"control-label col-md-2 col-sm-2 col-xs-12\" %&gt;\n   &lt;%= f.text_field :last_name, class: \"form-control\", :required =&gt; true, required: \"\" %&gt;\n\n   &lt;%= f.label :email, \"Email\", class: \"control-label col-md-2 col-sm-2 col-xs-12\" %&gt;\n   &lt;%= f.email_field :email, class: \"form-control\", :required =&gt; true, required: \"\" %&gt;\n\n   &lt;%= f.label :phone_number, \"Phone Number\", class: \"control-label col-md-2 col-sm-2 col-xs-12\" %&gt;\n   &lt;%= f.text_field :phone_number, class: \"form-control\", :required =&gt; true, required: \"\" %&gt;\n\n   &lt;%= f.label :password, \"Password\", class: \"control-label col-md-2 col-sm-2 col-xs-12\" %&gt;\n   &lt;%= f.password_field :password, class: \"form-control\", :required =&gt; true, required: \"\" %&gt;\n\n   &lt;%= f.label :password_confirmation, \"Password Confirmation\", class: \"control-label col-md-2 col-sm-2 col-xs-12\" %&gt;\n   &lt;%= f.password_field :password_confirmation, class: \"form-control\", :required =&gt; true, required: \"\" %&gt;\n\n   &lt;%= link_to \"Cancel\", \"\", class: \"btn btn-danger\" %&gt;\n   &lt;%= f.submit \"Submit\", class: \"btn btn-success\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>And the associated controller methods <code>controllers/users_controller.rb</code>:</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  before_action :get_company_and_locations\n\n  def new\n    if current_user.is_account_owner\n      @user = User.new\n    else\n      flash[:danger] = \"You do not have permission to do this action!\"\n    end\n  end\n\n  def create\n    @user = User.new(user_params)\n    @user.company_id = current_user.company.id\n    if @user.save\n      flash[:success] = \"User succesfully created!\"\n      redirect_to :back\n    else\n      render :new\n    end\n  end\n\n\n\n  private\n\n  def user_params\n    params.require(:user).permit(:first_name, :last_name, :email, :password, :password_confirmation)\n  end\nend\n</code></pre>\n\n<p>And since I'm also using devise for my <code>User</code> model, I needed to add the following to my <code>routes.rb</code>:</p>\n\n<pre><code>resources :users_admin, :controller =&gt; 'users'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "json", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1326, "user_id": 1185081, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2adfeded0954484efef1e804dd14e216?s=128&d=identicon&r=PG", "display_name": "user1185081", "link": "https://stackoverflow.com/users/1185081/user1185081"}, "edited": false, "score": 0, "creation_date": 1484803904, "post_id": 41729980, "comment_id": 70662820, "body": "Great ! I was desperately trying this html_safe method at the rails console with no effect ! It now works fine ;-)"}], "tags": [], "owner": {"reputation": 4543, "user_id": 3213605, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/a2HS8.jpg?s=128&g=1", "display_name": "PhilVarg", "link": "https://stackoverflow.com/users/3213605/philvarg"}, "is_accepted": true, "score": 0, "last_activity_date": 1484775693, "creation_date": 1484775693, "answer_id": 41729980, "question_id": 41729599, "link": "https://stackoverflow.com/questions/41729599/how-to-convert-activerecord-query-result-into-json-to-feed-d3-in-a-ror-project/41729980#41729980", "title": "How to convert ActiveRecord query result into json to feed D3 in a RoR project?", "body": "<p>because this is in an erb template, you need to mark the json as <code>html_safe</code></p>\n\n<pre><code>var errors = &lt;%= d3_chart_series_for(this_object).map { |measure| {index: measure.idx, count: measure.score}}.to_json.html_safe   %&gt;\n</code></pre>\n"}], "owner": {"reputation": 1326, "user_id": 1185081, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/2adfeded0954484efef1e804dd14e216?s=128&d=identicon&r=PG", "display_name": "user1185081", "link": "https://stackoverflow.com/users/1185081/user1185081"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 41729980, "answer_count": 1, "score": 0, "last_activity_date": 1484775693, "creation_date": 1484774282, "question_id": 41729599, "link": "https://stackoverflow.com/questions/41729599/how-to-convert-activerecord-query-result-into-json-to-feed-d3-in-a-ror-project", "title": "How to convert ActiveRecord query result into json to feed D3 in a RoR project?", "body": "<p>I develop an application with Ruby on Rails 5.0</p>\n\n<p>I am building an array of hashes to feed D3, that should look like this:</p>\n\n<blockquote>\n  <p>var errors = [\n              {index:-1, count:10},\n              {index:-2, count:40},\n              {index:-3, count:20},\n              {index:-4, count:60},\n              {index:-5, count:80},\n              {index:-6, count:30}];</p>\n</blockquote>\n\n<p>Formatting my ActiveRecord query, I get this result at the rails console:</p>\n\n<pre><code>var errors = &lt;%= d3_chart_series_for(this_object).map { |measure| {index: measure.idx, count: measure.score}}.to_json   %&gt;;\n</code></pre>\n\n<blockquote>\n  <p>var errors = \"[{\\\"index\\\":-1,\\\"count\\\":\\\"96.74\\\"},{\\\"index\\\":-2,\\\"count\\\":\\\"93.5\\\"},{\\\"index\\\":-3,\\\"count\\\":\\\"91.3\\\"},{\\\"index\\\":-4,\\\"count\\\":\\\"97.05\\\"},{\\\"index\\\":-5,\\\"count\\\":\\\"96.07\\\"},{\\\"index\\\":-6,\\\"count\\\":\\\"96.75\\\"},{\\\"index\\\":-7,\\\"count\\\":\\\"92.03\\\"},{\\\"index\\\":-8,\\\"count\\\":\\\"96.11\\\"}]\"</p>\n</blockquote>\n\n<p>Nearly good ! How can I remove all these \\\" to make it readable ?</p>\n\n<p>Is there a simple Ruby method to apply ?\nThanks</p>\n"}, {"tags": ["ruby", "sorting"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7174959"}, "edited": false, "score": 0, "creation_date": 1484770424, "post_id": 41728599, "comment_id": 70651637, "body": "<a href=\"https://www.igvita.com/2009/03/26/ruby-algorithms-sorting-trie-heaps/\" rel=\"nofollow noreferrer\">igvita.com/2009/03/26/ruby-algorithms-sorting-trie-heaps</a>"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1484771185, "post_id": 41728599, "comment_id": 70652023, "body": "Why do you think the comparison doesn&#39;t return <code>0</code>, <code>1</code> or <code>-1</code>? <code>&quot;War and Peace&quot; &lt;=&gt; &quot;Utopia&quot;</code> for example returns <code>1</code>."}, {"owner": {"reputation": 1502, "user_id": 4686951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SBUbs.png?s=128&g=1", "display_name": "Ben Amos", "link": "https://stackoverflow.com/users/4686951/ben-amos"}, "edited": false, "score": 1, "creation_date": 1484772025, "post_id": 41728599, "comment_id": 70652417, "body": "Could you be more specific with your question? Are you asking which sorting algorithm Ruby uses to reorder the objects? Are you wanting to know how that algorithm works? Are you asking how Ruby is able to determine that object A should come before object B? Or are you asking how to make use of the Array.sort method? Under the hood, sorting is not a trivial operation. There&#39;s a lot that can be explained."}], "answers": [{"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 2, "last_activity_date": 1484771743, "last_edit_date": 1484771743, "creation_date": 1484771432, "answer_id": 41728880, "question_id": 41728599, "link": "https://stackoverflow.com/questions/41728599/how-does-work-simple-sorting-in-ruby/41728880#41728880", "title": "How does work simple sorting in Ruby?", "body": "<p>There are any number of <a href=\"https://en.wikipedia.org/wiki/Sorting_algorithm\" rel=\"nofollow noreferrer\">sorting algorithms</a>, and the one Ruby uses is not defined, but if you look at the source code for <code>rb_ary_sort</code> which calls <code>rb_ary_sort_bang</code> you'll see <a href=\"https://github.com/ruby/ruby/blob/trunk/array.c#L2470\" rel=\"nofollow noreferrer\"><code>ruby_qsort</code></a>. If you <a href=\"https://github.com/ruby/ruby/blob/trunk/util.c#L215\" rel=\"nofollow noreferrer\">look inside that</a> you'll find it's just a wrapper around the fairly standard <a href=\"https://linux.die.net/man/3/qsort\" rel=\"nofollow noreferrer\">qsort_r</a>. That's <a href=\"https://en.wikipedia.org/wiki/Quicksort\" rel=\"nofollow noreferrer\">quicksort</a>, one of the most common sorting algorithms.</p>\n\n<p>Your block defines the sort order be defining how to compare elements between each other. Good sorting algorithms try to limit the number of comparisons which much be made between the elements.</p>\n\n<p>There's any number of tutorials about quicksort so I'm not going to explain it here, <a href=\"https://www.youtube.com/watch?v=aQiWF4E8flQ\" rel=\"nofollow noreferrer\">here's CS50 explaining it</a>. But the most interesting illustration might be <a href=\"https://www.youtube.com/watch?v=ywWBy6J5gz8\" rel=\"nofollow noreferrer\">as Hungarian Folk Dance</a> illustrating the use of a pivot and the divide and conquer approach. The hats show which elements are being compared.</p>\n"}], "owner": {"reputation": 845, "user_id": 6605573, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/6c01dc7452727028f86d9bac9e65c169?s=128&d=identicon&r=PG&f=1", "display_name": "Dev", "link": "https://stackoverflow.com/users/6605573/dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 1, "closed_date": 1484771419, "accepted_answer_id": 41728880, "answer_count": 1, "score": 1, "last_activity_date": 1484771743, "creation_date": 1484770305, "last_edit_date": 1484770793, "question_id": 41728599, "link": "https://stackoverflow.com/questions/41728599/how-does-work-simple-sorting-in-ruby", "closed_reason": "Duplicate", "title": "How does work simple sorting in Ruby?", "body": "<p>The following code returns a sorted array in ascending order:</p>\n\n<pre><code>books = [\"Charlie and the Chocolate Factory\", \"War and Peace\", \"Utopia\", \"A Brief History of Time\", \"A Wrinkle in Time\"]\n\n# To sort our books in ascending order, in-place\nbooks.sort! { |firstBook, secondBook| firstBook &lt;=&gt; secondBook }\n</code></pre>\n\n<p>How does this work? </p>\n\n<p>First it compares two objects, then it returns either 0, 1,  or -1.</p>\n\n<p>But how does <code>sort</code> know how to sort?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-cloud-platform", "cdn", "google-cdn"], "comments": [{"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "edited": false, "score": 0, "creation_date": 1484768031, "post_id": 41727889, "comment_id": 70650277, "body": "This got me there: <a href=\"https://cloud.google.com/ruby/getting-started/using-cloud-storage\" rel=\"nofollow noreferrer\">cloud.google.com/ruby/getting-started/using-cloud-storage</a>"}], "answers": [{"comments": [{"owner": {"reputation": 6744, "user_id": 4142753, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9ynfx.png?s=128&g=1", "display_name": "BilalReffas", "link": "https://stackoverflow.com/users/4142753/bilalreffas"}, "edited": false, "score": 0, "creation_date": 1484825579, "post_id": 41740586, "comment_id": 70674205, "body": "So I dont need to do on Rails side?"}, {"owner": {"reputation": 2455, "user_id": 1115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7053425c0d18b33acc9d6d9818a387b1?s=128&d=identicon&r=PG", "display_name": "Shane O&#39;Grady", "link": "https://stackoverflow.com/users/1115/shane-ogrady"}, "reply_to_user": {"reputation": 6744, "user_id": 4142753, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9ynfx.png?s=128&g=1", "display_name": "BilalReffas", "link": "https://stackoverflow.com/users/4142753/bilalreffas"}, "edited": false, "score": 0, "creation_date": 1484833399, "post_id": 41740586, "comment_id": 70679262, "body": "You don&#39;t need to do anything. Unless you want to serve from a different domain, for example: cdn.yourdomain.com  If so, follow this guide: <a href=\"http://www.speedawarenessmonth.com/speeding-up-asset-delivery-from-your-rails-app/\" rel=\"nofollow noreferrer\">speedawarenessmonth.com/&hellip;</a>  You will also need to configure your HTTP(S) Load Balancer to respond to that subdomain. However, since the Google HTTP(S) Load Balancer already implements HTTP/2, you won&#39;t see much benefit from this."}, {"owner": {"reputation": 6744, "user_id": 4142753, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9ynfx.png?s=128&g=1", "display_name": "BilalReffas", "link": "https://stackoverflow.com/users/4142753/bilalreffas"}, "edited": false, "score": 0, "creation_date": 1484833440, "post_id": 41740586, "comment_id": 70679290, "body": "Yes I want that because I have a custom domain"}, {"owner": {"reputation": 2455, "user_id": 1115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7053425c0d18b33acc9d6d9818a387b1?s=128&d=identicon&r=PG", "display_name": "Shane O&#39;Grady", "link": "https://stackoverflow.com/users/1115/shane-ogrady"}, "reply_to_user": {"reputation": 6744, "user_id": 4142753, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9ynfx.png?s=128&g=1", "display_name": "BilalReffas", "link": "https://stackoverflow.com/users/4142753/bilalreffas"}, "edited": false, "score": 0, "creation_date": 1484833637, "post_id": 41740586, "comment_id": 70679416, "body": "I think in that case you need to update your question with your requirements, because as it stands your question is answered :)"}, {"owner": {"reputation": 6744, "user_id": 4142753, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9ynfx.png?s=128&g=1", "display_name": "BilalReffas", "link": "https://stackoverflow.com/users/4142753/bilalreffas"}, "edited": false, "score": 0, "creation_date": 1484837875, "post_id": 41740586, "comment_id": 70682517, "body": "I did that now :)"}, {"owner": {"reputation": 2455, "user_id": 1115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7053425c0d18b33acc9d6d9818a387b1?s=128&d=identicon&r=PG", "display_name": "Shane O&#39;Grady", "link": "https://stackoverflow.com/users/1115/shane-ogrady"}, "reply_to_user": {"reputation": 6744, "user_id": 4142753, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9ynfx.png?s=128&g=1", "display_name": "BilalReffas", "link": "https://stackoverflow.com/users/4142753/bilalreffas"}, "edited": false, "score": 0, "creation_date": 1484856836, "post_id": 41740586, "comment_id": 70694168, "body": "What is &quot;custom domain&quot;? Is it a totally new domain? Or is it a subdomain of your main domain? Seriously, the more information you provide the faster, and better, someone can help you."}, {"owner": {"reputation": 6744, "user_id": 4142753, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9ynfx.png?s=128&g=1", "display_name": "BilalReffas", "link": "https://stackoverflow.com/users/4142753/bilalreffas"}, "reply_to_user": {"reputation": 2455, "user_id": 1115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7053425c0d18b33acc9d6d9818a387b1?s=128&d=identicon&r=PG", "display_name": "Shane O&#39;Grady", "link": "https://stackoverflow.com/users/1115/shane-ogrady"}, "edited": false, "score": 0, "creation_date": 1484858483, "post_id": 41740586, "comment_id": 70695022, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/133587/discussion-between-bilalreffas-and-shane-ogrady\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 2455, "user_id": 1115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7053425c0d18b33acc9d6d9818a387b1?s=128&d=identicon&r=PG", "display_name": "Shane O&#39;Grady", "link": "https://stackoverflow.com/users/1115/shane-ogrady"}, "is_accepted": true, "score": 0, "last_activity_date": 1484825002, "creation_date": 1484825002, "answer_id": 41740586, "question_id": 41727889, "link": "https://stackoverflow.com/questions/41727889/rails-cdn-on-google-cloud-platform-with-custom-domain/41740586#41740586", "title": "Rails CDN on Google Cloud Platform with custom Domain", "body": "<p>Are you using a HTTP(S) Load Balancer? If so, you just need to enable Cloud CDN on your backend.</p>\n\n<p>This is the official documentation to get started: <a href=\"https://cloud.google.com/cdn/docs/quickstart\" rel=\"nofollow noreferrer\">https://cloud.google.com/cdn/docs/quickstart</a></p>\n"}], "owner": {"reputation": 6744, "user_id": 4142753, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/9ynfx.png?s=128&g=1", "display_name": "BilalReffas", "link": "https://stackoverflow.com/users/4142753/bilalreffas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 1, "accepted_answer_id": 41740586, "answer_count": 1, "score": 1, "last_activity_date": 1484837831, "creation_date": 1484767779, "last_edit_date": 1484837831, "question_id": 41727889, "link": "https://stackoverflow.com/questions/41727889/rails-cdn-on-google-cloud-platform-with-custom-domain", "title": "Rails CDN on Google Cloud Platform with custom Domain", "body": "<p>I would like to use CDN on Rails. Currently I'm running the backend on the Google Cloud Platform. </p>\n\n<pre><code># Serve static files from the `/public` folder by default.\n# Consider using a CDN for better performance\nconfig.serve_static_files = true\n</code></pre>\n\n<p>I found this on config/environments/production.rb</p>\n\n<p>How I can implement that? </p>\n\n<p>Thank you so much for your help</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "mailgun", "rest-client"], "comments": [{"owner": {"reputation": 778, "user_id": 490148, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fdf74175f7ff2d2ff2c03c10ca2bce39?s=128&d=identicon&r=PG", "display_name": "virtuexru", "link": "https://stackoverflow.com/users/490148/virtuexru"}, "edited": false, "score": 0, "creation_date": 1484769863, "post_id": 41727857, "comment_id": 70651336, "body": "Does MailGun require you to whitelist IPs or something to be able to send requests?  I&#39;m assuming you&#39;re doing this call from your local machine which is where HTTPRequester worked as well? Are you sure the key is the same? I don&#39;t see why the call from Ruby would yield different results."}, {"owner": {"reputation": 315, "user_id": 5994650, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/o5RSb.jpg?s=128&g=1", "display_name": "Bruno Brito", "link": "https://stackoverflow.com/users/5994650/bruno-brito"}, "reply_to_user": {"reputation": 778, "user_id": 490148, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fdf74175f7ff2d2ff2c03c10ca2bce39?s=128&d=identicon&r=PG", "display_name": "virtuexru", "link": "https://stackoverflow.com/users/490148/virtuexru"}, "edited": false, "score": 0, "creation_date": 1484770171, "post_id": 41727857, "comment_id": 70651513, "body": "It doest not require ip whitelist, i&#39;m doing from local where my HttpRequester is installed as well. Yes the key is the same i double checked."}, {"owner": {"reputation": 315, "user_id": 5994650, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/o5RSb.jpg?s=128&g=1", "display_name": "Bruno Brito", "link": "https://stackoverflow.com/users/5994650/bruno-brito"}, "reply_to_user": {"reputation": 778, "user_id": 490148, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fdf74175f7ff2d2ff2c03c10ca2bce39?s=128&d=identicon&r=PG", "display_name": "virtuexru", "link": "https://stackoverflow.com/users/490148/virtuexru"}, "edited": false, "score": 0, "creation_date": 1484770259, "post_id": 41727857, "comment_id": 70651547, "body": "I found this question that seems to be related to my problem, but i don&#39;t know to fix it. <a href=\"http://stackoverflow.com/questions/30842841/mailgun-post-messages-api-always-throw-401-forbidden?rq=1\" title=\"mailgun post messages api always throw 401 forbidden\">stackoverflow.com/questions/30842841/&hellip;</a>"}, {"owner": {"reputation": 778, "user_id": 490148, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fdf74175f7ff2d2ff2c03c10ca2bce39?s=128&d=identicon&r=PG", "display_name": "virtuexru", "link": "https://stackoverflow.com/users/490148/virtuexru"}, "edited": false, "score": 0, "creation_date": 1484770603, "post_id": 41727857, "comment_id": 70651729, "body": "Ah well in my search I found a gem specific for Mailgun that should be way easier to use; <a href=\"https://github.com/mailgun/mailgun-ruby\" rel=\"nofollow noreferrer\">github.com/mailgun/mailgun-ruby</a> you instantiate a new class with the key and then use their methods to send/receive."}, {"owner": {"reputation": 315, "user_id": 5994650, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/o5RSb.jpg?s=128&g=1", "display_name": "Bruno Brito", "link": "https://stackoverflow.com/users/5994650/bruno-brito"}, "reply_to_user": {"reputation": 778, "user_id": 490148, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fdf74175f7ff2d2ff2c03c10ca2bce39?s=128&d=identicon&r=PG", "display_name": "virtuexru", "link": "https://stackoverflow.com/users/490148/virtuexru"}, "edited": false, "score": 0, "creation_date": 1484774187, "post_id": 41727857, "comment_id": 70653627, "body": "I&#39;m going to try it"}, {"owner": {"reputation": 7540, "user_id": 145905, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/27329e443ade13f20dc20526436244b7?s=128&d=identicon&r=PG", "display_name": "A B", "link": "https://stackoverflow.com/users/145905/a-b"}, "edited": false, "score": 0, "creation_date": 1484841737, "post_id": 41727857, "comment_id": 70685359, "body": "Does Mailgun actually accept an &quot;Api&quot; header? I thought they use HTTP basic authentication, so you should pass &quot;api&quot; as the user and your key as the password. <a href=\"https://documentation.mailgun.com/api-intro.html#authentication\" rel=\"nofollow noreferrer\">documentation.mailgun.com/api-intro.html#authentication</a>"}], "answers": [{"tags": [], "owner": {"reputation": 492, "user_id": 5754283, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ThgtP.png?s=128&g=1", "display_name": "Demilade", "link": "https://stackoverflow.com/users/5754283/demilade"}, "is_accepted": false, "score": -2, "last_activity_date": 1573922764, "creation_date": 1573922764, "answer_id": 58892973, "question_id": 41727857, "link": "https://stackoverflow.com/questions/41727857/getting-401-on-post-request-to-mailgun-api/58892973#58892973", "title": "Getting 401 on post request to mailgun api", "body": "<p>I just experienced this, so I am dropping my solution here. You need to add 0.0.0.0/0 to IP whitelists on the Mailgun website. Right underneath the list of API keys.</p>\n"}, {"tags": [], "owner": {"reputation": 536, "user_id": 204193, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/lPI3b.jpg?s=128&g=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/204193/jay"}, "is_accepted": false, "score": 0, "last_activity_date": 1576098253, "creation_date": 1576098253, "answer_id": 59294047, "question_id": 41727857, "link": "https://stackoverflow.com/questions/41727857/getting-401-on-post-request-to-mailgun-api/59294047#59294047", "title": "Getting 401 on post request to mailgun api", "body": "<p>Make sure you're using the actual API key you obtained from the dashboard, and not the \"key ID\" that they emailed you. The two are not the same!</p>\n"}], "owner": {"reputation": 315, "user_id": 5994650, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/o5RSb.jpg?s=128&g=1", "display_name": "Bruno Brito", "link": "https://stackoverflow.com/users/5994650/bruno-brito"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2621, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1576098253, "creation_date": 1484767674, "question_id": 41727857, "link": "https://stackoverflow.com/questions/41727857/getting-401-on-post-request-to-mailgun-api", "title": "Getting 401 on post request to mailgun api", "body": "<p>Im trying to do a post request to send a email, this is my code:</p>\n\n<pre><code> url = \"https://api.mailgun.net/v3/MYDOMAIN/messages\"\n\n    params = {\n        :from =&gt; \"Excited User &lt;manuelbruno05@gmail.com&gt;\",\n        :to =&gt; \"bruno.brito.ln@gmail.com, YOU@YOUR_DOMAIN_NAME\",\n        :subject =&gt; \"Hello\",\n        :text =&gt; \"Testing some Mailgun awesomness!\"\n    }\n\n    headers = {\n        :api =&gt; \"MY-API-KEY\"\n    }\n\n    RestClient.post url, params, headers\n</code></pre>\n\n<p>When i try to make a request, the response is 401 Unauthorized. Sending the request using <em>HttpRequester</em> works fine(response 200) so my guess is i'm setting headers wrong in Rails. My question: How can i fix this code?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "rolify"], "owner": {"reputation": 11, "user_id": 7437366, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0bbc9e78b639510a5b42f51fb244419?s=128&d=identicon&r=PG&f=1", "display_name": "user7437366", "link": "https://stackoverflow.com/users/7437366/user7437366"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1484766366, "creation_date": 1484766366, "question_id": 41727471, "link": "https://stackoverflow.com/questions/41727471/how-can-i-get-separate-tables-for-manager-owner-visitor-as-i-am-using-rolify", "title": "How can i get separate tables for manager , owner , visitor as i am using rolify gem?", "body": "<p>I am new to stackoverflow and i want to implement user with multiple roles .\nI had started with rolify gem . I had generated 3 devise users manager , owner , user (visitor). </p>\n\n<blockquote>\n  <p>Association used for my application is </p>\n</blockquote>\n\n<pre><code>class Role &lt; ApplicationRecord\n  has_and_belongs_to_many :users, :join_table =&gt; :users_roles\n\n  belongs_to :resource,\n             :polymorphic =&gt; true,\n             :optional =&gt; true\n\n  validates :resource_type,\n            :inclusion =&gt; { :in =&gt; Rolify.resource_types },\n            :allow_nil =&gt; true\n\n  scopify\nend\n</code></pre>\n\n<hr>\n\n<pre><code>class User &lt; ApplicationRecord\n  rolify\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n  after_create :assign_default_role\n\n  def assign_default_role\n    self.add_role(:visitor) if self.roles.blank?\n  end       \nend\n</code></pre>\n\n<hr>\n\n<pre><code>class Owner &lt; User\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n     after_create :assign_default_role\n      def assign_default_role\n        self.add_role(:owner) if self.roles.blank?\n      end               \nend\n</code></pre>\n\n<hr>\n\n<pre><code>class Manager &lt; User\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n  after_create :assign_default_role\n\n  def assign_default_role\n    self.add_role(:moderator) if self.roles.blank?\n  end          \nend\n</code></pre>\n\n<hr>\n\n<p>My concern is i am using rolify gem to assign role but i want to keep manager , owner , visitor table separate but if i didn't use Single table inheritance then how can i able to implement roles and keep table separate</p>\n\n<hr>\n"}, {"tags": ["ruby-on-rails", "ruby", "bash", "curl"], "comments": [{"owner": {"reputation": 778, "user_id": 490148, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fdf74175f7ff2d2ff2c03c10ca2bce39?s=128&d=identicon&r=PG", "display_name": "virtuexru", "link": "https://stackoverflow.com/users/490148/virtuexru"}, "edited": false, "score": 3, "creation_date": 1484766046, "post_id": 41727334, "comment_id": 70649164, "body": "Why not use an HTTP library instead of curl?"}, {"owner": {"reputation": 289, "user_id": 6614967, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/306000706408468/picture?type=large", "display_name": "Mohammad Shahbaz", "link": "https://stackoverflow.com/users/6614967/mohammad-shahbaz"}, "reply_to_user": {"reputation": 778, "user_id": 490148, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fdf74175f7ff2d2ff2c03c10ca2bce39?s=128&d=identicon&r=PG", "display_name": "virtuexru", "link": "https://stackoverflow.com/users/490148/virtuexru"}, "edited": false, "score": 0, "creation_date": 1484768693, "post_id": 41727334, "comment_id": 70650674, "body": "I am not sure how to use that."}, {"owner": {"reputation": 778, "user_id": 490148, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fdf74175f7ff2d2ff2c03c10ca2bce39?s=128&d=identicon&r=PG", "display_name": "virtuexru", "link": "https://stackoverflow.com/users/490148/virtuexru"}, "edited": false, "score": 0, "creation_date": 1484769911, "post_id": 41727334, "comment_id": 70651356, "body": "Here are some simple examples to get you started; it&#39;s a Ruby std library. <a href=\"https://ruby-doc.org/stdlib-2.1.3/libdoc/net/http/rdoc/Net/HTTP.html\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.1.3/libdoc/net/http/rdoc/Net/HTTP.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 289, "user_id": 6614967, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/306000706408468/picture?type=large", "display_name": "Mohammad Shahbaz", "link": "https://stackoverflow.com/users/6614967/mohammad-shahbaz"}, "edited": false, "score": 0, "creation_date": 1484768390, "post_id": 41727612, "comment_id": 70650480, "body": "I replaced payload with data, but it is still not inserting data ."}, {"owner": {"reputation": 289, "user_id": 6614967, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/306000706408468/picture?type=large", "display_name": "Mohammad Shahbaz", "link": "https://stackoverflow.com/users/6614967/mohammad-shahbaz"}, "edited": false, "score": 0, "creation_date": 1484768853, "post_id": 41727612, "comment_id": 70650756, "body": "It looks like , it is not getting data in params[:record_id]"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 289, "user_id": 6614967, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/306000706408468/picture?type=large", "display_name": "Mohammad Shahbaz", "link": "https://stackoverflow.com/users/6614967/mohammad-shahbaz"}, "edited": false, "score": 0, "creation_date": 1484769327, "post_id": 41727612, "comment_id": 70651013, "body": "I&#39;d switch this over to <code>curb</code> code at the very least, if not <a href=\"https://github.com/lostisland/faraday\" rel=\"nofollow noreferrer\">Faraday</a> before attempting to get everything working properly. That can make debugging a lot less messy."}, {"owner": {"reputation": 289, "user_id": 6614967, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/306000706408468/picture?type=large", "display_name": "Mohammad Shahbaz", "link": "https://stackoverflow.com/users/6614967/mohammad-shahbaz"}, "edited": false, "score": 0, "creation_date": 1484769750, "post_id": 41727612, "comment_id": 70651264, "body": "I actually do not know how to use curb.. I found this solution on net, and thought to try"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 289, "user_id": 6614967, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/306000706408468/picture?type=large", "display_name": "Mohammad Shahbaz", "link": "https://stackoverflow.com/users/6614967/mohammad-shahbaz"}, "edited": false, "score": 0, "creation_date": 1484769790, "post_id": 41727612, "comment_id": 70651284, "body": "That&#39;s why they have documentation, it helps you understand. <code>curb</code> isn&#39;t hard to use, it&#39;s essentially 1:1 mapped against <code>curl</code> command-line arguments, just in Ruby code."}, {"owner": {"reputation": 289, "user_id": 6614967, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/306000706408468/picture?type=large", "display_name": "Mohammad Shahbaz", "link": "https://stackoverflow.com/users/6614967/mohammad-shahbaz"}, "edited": false, "score": 0, "creation_date": 1484770002, "post_id": 41727612, "comment_id": 70651414, "body": "ok..but do you have any idea why the values are not coming from text box to params[:record_id]"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 289, "user_id": 6614967, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/306000706408468/picture?type=large", "display_name": "Mohammad Shahbaz", "link": "https://stackoverflow.com/users/6614967/mohammad-shahbaz"}, "edited": false, "score": 0, "creation_date": 1484770394, "post_id": 41727612, "comment_id": 70651625, "body": "I don&#39;t, but I bet <code>log&#47;development.log</code> does. Have a look in there to see if that&#39;s being populated correctly."}, {"owner": {"reputation": 289, "user_id": 6614967, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/306000706408468/picture?type=large", "display_name": "Mohammad Shahbaz", "link": "https://stackoverflow.com/users/6614967/mohammad-shahbaz"}, "edited": false, "score": 0, "creation_date": 1484771493, "post_id": 41727612, "comment_id": 70652155, "body": "It is saying that <b>the data being imported is not formatted correctly</b>"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 3, "last_activity_date": 1484806118, "last_edit_date": 1484806118, "creation_date": 1484766882, "answer_id": 41727612, "question_id": 41727334, "link": "https://stackoverflow.com/questions/41727334/how-to-use-a-ruby-rails-variable-in-the-curl-bash-script/41727612#41727612", "title": "how to use a ruby rails variable in the curl (bash) script", "body": "<p>Ignoring the fact that using <code>curl</code> externally when libraries like <a href=\"https://github.com/taf2/curb\" rel=\"nofollow noreferrer\"><code>curb</code></a> exist, using <code>%x{...}</code> for this is extremely messy. What you want to do is call <code>system</code>:</p>\n\n<pre><code>data = [\n  {\n    record_id: params[:record_id],\n    seat_id_seq: \"bbb\",\n    address: \"bbb\",\n    price: \"bbb\",\n    email: \"bbb\",\n    tickets1_complete: 2\n  }\n]\n\nsystem(\n  \"curl\",\n  \"-F\", \"overwriteBehavior=normal\",\n  \"-F\", \"content=record\",\n  \"-F\", \"type=flat\",\n  \"-F\", \"format=json\",\n  \"-F\", \"data=#{JSON.dump(data)}\",\n  'https://cri-datacap.org/api/'\n)\n</code></pre>\n\n<p>When you're writing JSON data, do try and use <code>JSON.dump</code> or <code>.to_json</code> to ensure your document is 100% valid.</p>\n"}], "owner": {"reputation": 289, "user_id": 6614967, "user_type": "registered", "accept_rate": 45, "profile_image": "https://graph.facebook.com/306000706408468/picture?type=large", "display_name": "Mohammad Shahbaz", "link": "https://stackoverflow.com/users/6614967/mohammad-shahbaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1484806118, "creation_date": 1484765924, "question_id": 41727334, "link": "https://stackoverflow.com/questions/41727334/how-to-use-a-ruby-rails-variable-in-the-curl-bash-script", "title": "how to use a ruby rails variable in the curl (bash) script", "body": "<p>I am trying to run this curl script in my ruby rails application:  </p>\n\n<pre><code>%x{ curl -F token='08F14AE57696E458BA6FC6A203F57E69' -F overwriteBehavior=normal \n-F content=record -F type=flat -F format=json \n-F data='[{\"record_id\":\"123\",\"seat_id_seq\":\"bbb\",\"address\":\"bbb\",\"price\":\"bbb\",\"email\":\"bbb\",\"tickets1_complete\":\"2\"}]'  \n'https://cri-datacap.org/api/' }\n</code></pre>\n\n<p>and its working fine. Now I want don't want to hardcode the values so i am trying to give this values by the variable.</p>\n\n<p>These variable contains value from the text field on my rails application: </p>\n\n<pre><code>%x{ curl -F token='08F14AE57696E458BA6FC6A203F57E69' -F overwriteBehavior=normal \n-F content=record -F type=flat -F format=json \n-F data='[{\"record_id\":\"#{params[:record_id]}\",\"seat_id_seq\":\"bbb\",\"address\":\"bbb\",\"price\":\"bbb\",\"email\":\"bbb\",\"tickets1_complete\":\"2\"}]'  \n'https://cri-datacap.org/api/' }\n</code></pre>\n\n<p>so I have tried for one variable record_id, but its not working.. This script is written in my controller.</p>\n"}, {"tags": ["ruby", "http", "curl"], "answers": [{"tags": [], "owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "is_accepted": false, "score": 0, "last_activity_date": 1484766195, "creation_date": 1484766195, "answer_id": 41727425, "question_id": 41726957, "link": "https://stackoverflow.com/questions/41726957/how-to-convert-curl-to-ruby-nethttp-with-x-get-g-options/41727425#41727425", "title": "How to convert curl to Ruby Net::HTTP with -X GET -G options?", "body": "<p><code>urlencode</code> means that the data is encoded in the URL</p>\n\n<pre><code>url = URI.parse('http://example.com')\nurl.query = \"since=2017-01-16&amp;until=2017-01-17\"\nputs url\n# =&gt; http://example.com?since=2017-01-16&amp;until=2017-01-17\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3536, "user_id": 5314903, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/63b7f28e96e254a2618902d079e06dba?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Cohen", "link": "https://stackoverflow.com/users/5314903/alex-cohen"}, "is_accepted": true, "score": 1, "last_activity_date": 1484768169, "creation_date": 1484768169, "answer_id": 41727980, "question_id": 41726957, "link": "https://stackoverflow.com/questions/41726957/how-to-convert-curl-to-ruby-nethttp-with-x-get-g-options/41727980#41727980", "title": "How to convert curl to Ruby Net::HTTP with -X GET -G options?", "body": "<p>You have to use the <code>URI.encode_www_form</code> function:</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire 'json'\nrequire 'net/http'\nrequire 'uri'\n\ndef get_pagerduty_hash(ending='')\n  uri = URI.parse(\"https://company.pagerduty.com/api/v1/schedules#{ending}\")\n  params = { :since =&gt; '2017-01-16', :until =&gt; '2017-01-17' }\n  uri.query = URI.encode_www_form(params)\n  request = Net::HTTP::Get.new(uri)\n  request.content_type = \"application/json\"\n  request[\"Authorization\"] = \"Token token=#{ENV['PAGERDUTY_ACCESS_KEY']}\"\n\n  req_options = {\n    use_ssl: uri.scheme == \"https\",\n  }\n\n  response = Net::HTTP.start(uri.hostname, uri.port, req_options) do |http|\n    http.request(request)\n  end\n\n  return JSON.parse(response.body).to_hash \n\nend\n</code></pre>\n"}], "owner": {"reputation": 3536, "user_id": 5314903, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/63b7f28e96e254a2618902d079e06dba?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Cohen", "link": "https://stackoverflow.com/users/5314903/alex-cohen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 775, "favorite_count": 0, "accepted_answer_id": 41727980, "answer_count": 2, "score": 2, "last_activity_date": 1484768169, "creation_date": 1484764497, "question_id": 41726957, "link": "https://stackoverflow.com/questions/41726957/how-to-convert-curl-to-ruby-nethttp-with-x-get-g-options", "title": "How to convert curl to Ruby Net::HTTP with -X GET -G options?", "body": "<p>I was using <a href=\"https://jhawthorn.github.io/curl-to-ruby/\" rel=\"nofollow noreferrer\">https://jhawthorn.github.io/curl-to-ruby/</a> to convert curl commands to Net::HTTP code.  However the following cannot be converted using the jhawthorn resource:</p>\n\n<pre><code>curl -H \"Content-type: application/json\" -H \"Authorization: Token token=$PAGERDUTY_ACCESS_KEY\" -X GET -G --data-urlencode \"since=2017-01-16\" --data-urlencode \"until=2017-01-17\"  \"https://company.pagerduty.com/api/v1/schedules\" \n</code></pre>\n\n<p>I have described my exact problem in this github issue: <a href=\"https://github.com/jhawthorn/curl-to-ruby/issues/8\" rel=\"nofollow noreferrer\">https://github.com/jhawthorn/curl-to-ruby/issues/8</a></p>\n\n<p>This is my current function that uses the Net::HTTP gem:</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire 'json'\nrequire 'net/http'\nrequire 'uri'\n\ndef get_pagerduty_hash(ending='')\n  uri = URI.parse(\"https://company.pagerduty.com/api/v1/schedules#{ending}\")\n  request = Net::HTTP::Get.new(uri)\n  request.content_type = \"application/json\"\n  request[\"Authorization\"] = \"Token token=#{ENV['PAGERDUTY_ACCESS_KEY']}\"\n\n  req_options = {\n    use_ssl: uri.scheme == \"https\",\n  }\n\n  response = Net::HTTP.start(uri.hostname, uri.port, req_options) do |http|\n    http.request(request)\n  end\n\n  return JSON.parse(response.body).to_hash \n\nend\n</code></pre>\n\n<p>How can I change this to correctly use the date part of the original curl command:</p>\n\n<pre><code>-X GET -G --data-urlencode \"since=2017-01-16\" --data-urlencode \"until=2017-01-17\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 0, "creation_date": 1484769903, "post_id": 41727074, "comment_id": 70651353, "body": "That&#39;d be useful if I was only updating one, or if I list them all out (neither solution is ideal for me). Thanks though."}, {"owner": {"reputation": 778, "user_id": 490148, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fdf74175f7ff2d2ff2c03c10ca2bce39?s=128&d=identicon&r=PG", "display_name": "virtuexru", "link": "https://stackoverflow.com/users/490148/virtuexru"}, "reply_to_user": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 1, "creation_date": 1484769986, "post_id": 41727074, "comment_id": 70651407, "body": "Apparently you can try <code>update_columns</code>. This skips validations and callbacks as well."}, {"owner": {"reputation": 778, "user_id": 490148, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fdf74175f7ff2d2ff2c03c10ca2bce39?s=128&d=identicon&r=PG", "display_name": "virtuexru", "link": "https://stackoverflow.com/users/490148/virtuexru"}, "reply_to_user": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 1, "creation_date": 1484770019, "post_id": 41727074, "comment_id": 70651427, "body": "<a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update_columns\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveRecord/&hellip;</a>"}, {"owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 0, "creation_date": 1484771804, "post_id": 41727074, "comment_id": 70652309, "body": "<code>update_columns</code> won&#39;t work on new records. I think I&#39;ll have to write a method with <code>persisted?</code> or something to get around this."}, {"owner": {"reputation": 778, "user_id": 490148, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fdf74175f7ff2d2ff2c03c10ca2bce39?s=128&d=identicon&r=PG", "display_name": "virtuexru", "link": "https://stackoverflow.com/users/490148/virtuexru"}, "reply_to_user": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 0, "creation_date": 1484773060, "post_id": 41727074, "comment_id": 70653015, "body": "what do you mean new records? On new records you can explicitly skip validations if you need to."}, {"owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 0, "creation_date": 1484773792, "post_id": 41727074, "comment_id": 70653416, "body": "I&#39;m using <code>find_or_initialize_by</code>, so records can be either new or existing."}], "tags": [], "owner": {"reputation": 778, "user_id": 490148, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fdf74175f7ff2d2ff2c03c10ca2bce39?s=128&d=identicon&r=PG", "display_name": "virtuexru", "link": "https://stackoverflow.com/users/490148/virtuexru"}, "is_accepted": false, "score": 0, "last_activity_date": 1567437904, "last_edit_date": 1567437904, "creation_date": 1484764927, "answer_id": 41727074, "question_id": 41726917, "link": "https://stackoverflow.com/questions/41726917/rails-5-update-attributes-with-unique-constraints/41727074#41727074", "title": "Rails 5: update_attributes with unique constraints", "body": "<p>For Rails 5 use <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update_attribute\" rel=\"nofollow noreferrer\">update_attribute</a> instead of <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update\" rel=\"nofollow noreferrer\">update_attributes</a>.</p>\n\n<p>It updates a single attribute and saves the record without going through the normal validation procedure.</p>\n\n<p><strong>Note</strong>: <code>update_attribute</code> updates only one attribute at a time from the code given in question, I think it will work for you.</p>\n\n<p>If this method doesn't suit you, you can also use <code>.update_columns</code> <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update_columns\" rel=\"nofollow noreferrer\">found here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7434751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07313c8e4a33c971acab279514973029?s=128&d=identicon&r=PG&f=1", "display_name": "J.R.", "link": "https://stackoverflow.com/users/7434751/j-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1484773709, "creation_date": 1484773709, "answer_id": 41729470, "question_id": 41726917, "link": "https://stackoverflow.com/questions/41726917/rails-5-update-attributes-with-unique-constraints/41729470#41729470", "title": "Rails 5: update_attributes with unique constraints", "body": "<pre><code>@lead = Lead.find_or_initialize_by(external_id: lead['external_id'])\n@lead.attributes = lead\n@lead.save(validate: false)\n</code></pre>\n\n<p>This should do the trick\nNot sure why you would go around your validations, this will bite you later.</p>\n\n<p>Api links:</p>\n\n<ul>\n<li><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/AttributeAssignment.html\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/classes/ActiveRecord/AttributeAssignment.html</a></li>\n<li><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-save\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-save</a></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "edited": false, "score": 0, "creation_date": 1484776483, "post_id": 41730060, "comment_id": 70654772, "body": "That is <i>super useful</i> to know, thank-you. I guess I should see if there&#39;s another quirk that might be causing the lead to be initialized instead of found."}], "tags": [], "owner": {"reputation": 4722, "user_id": 7401689, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/j8SqS.jpg?s=128&g=1", "display_name": "Johannes M&#252;ller", "link": "https://stackoverflow.com/users/7401689/johannes-m%c3%bcller"}, "is_accepted": true, "score": 1, "last_activity_date": 1484776070, "creation_date": 1484776070, "answer_id": 41730060, "question_id": 41726917, "link": "https://stackoverflow.com/questions/41726917/rails-5-update-attributes-with-unique-constraints/41730060#41730060", "title": "Rails 5: update_attributes with unique constraints", "body": "<p>Internally, <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update_attributes\" rel=\"nofollow noreferrer\"><code>update_attributes</code></a> calls <a href=\"http://api.rubyonrails.org/classes/ActiveModel/AttributeAssignment.html#method-i-assign_attributes\" rel=\"nofollow noreferrer\"><code>assign_attributes</code></a>, which assigns the given attributes and overwrites existing values if they are different. But if the same value has been assigned before, this attribute is not considered changed and therefore will not be included in an updated query.</p>\n\n<p>If everything is as it should be, your uniqueness validations should not fail at all - neither with a new nor an existing record. I would assume, there is some other quirk (which is not visible in the provided information about your context) causing these errors and would advise against simply disabling validation.</p>\n"}], "owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5670, "favorite_count": 0, "accepted_answer_id": 41730060, "answer_count": 3, "score": 1, "last_activity_date": 1567437904, "creation_date": 1484764363, "question_id": 41726917, "link": "https://stackoverflow.com/questions/41726917/rails-5-update-attributes-with-unique-constraints", "title": "Rails 5: update_attributes with unique constraints", "body": "<p>I'm trying to call a <code>find_or_initialize_by</code> in a controller like so:</p>\n\n<pre><code>@lead = Lead.find_or_initialize_by(external_id: lead['external_id'])\n@lead.update_attributes(lead)\n</code></pre>\n\n<p>That's all well and good, but my problem is that <code>lead</code> can and should have some information in it that has unique constraints on my model:</p>\n\n<pre><code>validates :address, uniqueness: { scope: [:address, :city, :state, :zip] }\nvalidates :voter_id, uniqueness: true\nvalidates :external_id, uniqueness: true\nvalidates :email, uniqueness: true, allow_blank: true, allow_nil: true\nvalidates_presence_of :first_name, :last_name, :address, :city, :state, :zip, :source, :status\n</code></pre>\n\n<p>So, when a lead already exists in the database, <code>update_attributes</code> fails because the hash contains the same information the record already did (coupled with a non-unique difference):</p>\n\n<pre><code>ActiveRecord::RecordInvalid (Validation failed: Address has already been taken, Voter has already been taken, External has already been taken):\n</code></pre>\n\n<p>How can I pass this hash and have Rails save it regardless of whether it's new (made by <code>initialize_by</code>) or existing (made by <code>find</code>) while maintaining all that validation?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 859, "user_id": 6034998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-vtaWMdlttYk/AAAAAAAAAAI/AAAAAAAAADA/nVgDy2-nrds/photo.jpg?sz=128", "display_name": "Salman", "link": "https://stackoverflow.com/users/6034998/salman"}, "edited": false, "score": 0, "creation_date": 1484764806, "post_id": 41726930, "comment_id": 70648514, "body": "Thanks for your answer and for your correction of management,  I&#39;m getting a new error message now:  undefined local variable or method `managment&#39; for #&lt;#&lt;Class:0x007f50f02d0030&gt;:0x007f50dc799210&gt; Did you mean?  @managment  Thank you for your patience"}, {"owner": {"reputation": 1582, "user_id": 787980, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/046251d17c44282a905b0bd951d72040?s=128&d=identicon&r=PG", "display_name": "Pramod Solanky", "link": "https://stackoverflow.com/users/787980/pramod-solanky"}, "reply_to_user": {"reputation": 859, "user_id": 6034998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-vtaWMdlttYk/AAAAAAAAAAI/AAAAAAAAADA/nVgDy2-nrds/photo.jpg?sz=128", "display_name": "Salman", "link": "https://stackoverflow.com/users/6034998/salman"}, "edited": false, "score": 0, "creation_date": 1484764891, "post_id": 41726930, "comment_id": 70648562, "body": "@Notorious_Creed If that answered your question, you should accept the answer :)"}, {"owner": {"reputation": 859, "user_id": 6034998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-vtaWMdlttYk/AAAAAAAAAAI/AAAAAAAAADA/nVgDy2-nrds/photo.jpg?sz=128", "display_name": "Salman", "link": "https://stackoverflow.com/users/6034998/salman"}, "reply_to_user": {"reputation": 1582, "user_id": 787980, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/046251d17c44282a905b0bd951d72040?s=128&d=identicon&r=PG", "display_name": "Pramod Solanky", "link": "https://stackoverflow.com/users/787980/pramod-solanky"}, "edited": false, "score": 0, "creation_date": 1484764937, "post_id": 41726930, "comment_id": 70648590, "body": "@PamioSolanky I pressed enter to soon and posted an unfinished response :P"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 1, "last_activity_date": 1484764402, "creation_date": 1484764402, "answer_id": 41726930, "question_id": 41726779, "link": "https://stackoverflow.com/questions/41726779/ruby-on-rails-5-merging-microposts-and-blog/41726930#41726930", "title": "Ruby on Rails 5 || Merging microposts and blog ||", "body": "<p>Your problem is here</p>\n\n<pre><code>@user = User.find(params[:id])\n@managment = current_user.managments.find_by_id(params[:id])\n</code></pre>\n\n<p>Your @management is ending up nil. You are passing the same id to the User and Managment queries (it's spelled management, by the way). </p>\n\n<p>What I think you're trying to do is get the 'managment' from <code>params[:id]</code>, and then get the associated user from there. You can do this:</p>\n\n<pre><code>@managment = Managment.find_by(id: params[:id])\nif !@managment\n  raise ActionController::RoutingError.new('Not Found')\nend\n@user = @managment.user\n</code></pre>\n\n<p>Note I've added some error handling for <code>find_by</code>, which will return nil if the record is not found. If this happens, you want to forward the error to Rails' builtin 404 page (done with the <code>raise</code>). </p>\n"}], "owner": {"reputation": 859, "user_id": 6034998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-vtaWMdlttYk/AAAAAAAAAAI/AAAAAAAAADA/nVgDy2-nrds/photo.jpg?sz=128", "display_name": "Salman", "link": "https://stackoverflow.com/users/6034998/salman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 41726930, "answer_count": 1, "score": 0, "last_activity_date": 1484764402, "creation_date": 1484763890, "question_id": 41726779, "link": "https://stackoverflow.com/questions/41726779/ruby-on-rails-5-merging-microposts-and-blog", "title": "Ruby on Rails 5 || Merging microposts and blog ||", "body": "<p>What i have done is created microposts(managments) in blog post tutorial of rails, but now edit,destroy and new work. Show doesn't</p>\n\n<p>Now i'm getting the following error</p>\n\n<pre><code>NoMethodError in Managments#show\n\nundefined method `id' for nil:NilClass\n\n&lt;li id=\"@managment-&lt;%= @managment.id %&gt;\" &gt; &lt;- cause of the problem\n  &lt;%= link_to gravatar_for(@managment.user, size: 50), @managment.user %&gt;\n  &lt;div class=\"user\"&gt;&lt;%= link_to @managment.user.name, @managment.user %&gt;&lt;/div&gt;\n\n    &lt;ul class=\"nav nav-tabs\"&gt;\n    &lt;li class=\"active\"&gt;&lt;a data-toggle=\"tab\" onclick=\"calculateManagement()\" href=\"#home\"&gt;@managment&lt;/a&gt;&lt;/li&gt;\n</code></pre>\n\n<p>managments controller:</p>\n\n<pre><code>class ManagmentsController &lt; ApplicationController\n  before_action :logged_in_user, only: [:create, :destroy]\n  before_action :correct_user,   only: :destroy\n\n    def index\n     @managments = current_user.managments\n    end\n\n  def show\n    @user = User.find(params[:id])\n    @managment = current_user.managments.find_by_id(params[:id])\n\n  end\n\n  def new\n    @user = User.new\n    @managment = Managment.new\n  end\n\n  def edit\n     @managment = Managment.find(params[:id])\n  end\n\n    def create\n     @managment = current_user.managments.build(managment_params)\n     if @managment.save\n      flash[:success] = \"Managment created!\"\n      redirect_to @managment\n     else\n      @feed_items = current_user.feed.paginate(page: params[:page])\n      render 'new'\n     end\n    end\n\n  def update\n     @managment = Managment.find(params[:id])\n\n    if @managment.update(article_params)\n      redirect_to @managment\n    else\n      render 'edit'\n    end\n  end\n\n  def destroy\n    @managment.destroy\n    flash[:success] = \"Managment deleted\"\n    redirect_to managments_path\n  end\n\n\n  private\n\n    def managment_params\n      params.require(:managment).permit( \n      :title,  :budget,\n      :procent1, :procent2, :procent3, :procent4,\n      :procent5, :procent6, :procent7,\n      :procent8, :procent9, :procent10,\n      :procent11, :procent12, :result1,\n      :result2, :result3, :objectivesname1,\n      :objectivesname2, :objectivesname3, \n      :lowprocent1, :lowprocent2, :lowprocent3,\n      :medprocent1, :medprocent2, :medprocent3,\n      :highprocent1, :highprocent2, :highprocent3,\n      :lowobjectives1, :lowobjectives2, :lowobjectives3,\n      :medobjectives1, :medobjectives2, :medobjectives3,\n      :highobjectives1, :highobjectives2, :highobjectives3\n\n      )\n    end\n\n    def correct_user\n      @managment = current_user.managments.find_by(id: params[:id])\n      redirect_to managments_path if @managment.nil?\n    end\n\nend\n</code></pre>\n\n<p>show.html.erb</p>\n\n<pre><code>&lt;li id=\"@managment-&lt;%= @managment.id %&gt;\" &gt;\n  &lt;%= link_to gravatar_for(@managment.user, size: 50), @managment.user %&gt;\n  &lt;div class=\"user\"&gt;&lt;%= link_to @managment.user.name, @managment.user %&gt;&lt;/div&gt;\n\n    &lt;ul class=\"nav nav-tabs\"&gt;\n    &lt;li class=\"active\"&gt;&lt;a data-toggle=\"tab\" onclick=\"calculateManagement()\" href=\"#home\"&gt;@managment&lt;/a&gt;&lt;/li&gt;\n    &lt;li&gt;&lt;a data-toggle=\"tab\" href=\"#menu1\" onclick=\"calculateManagement()\"&gt;Data&lt;/a&gt;&lt;/li&gt;\n    &lt;li&gt;&lt;a data-toggle=\"tab\" href=\"#menu2\" onclick=\"calculateManagement()\"&gt;Desired return sheet&lt;/a&gt;&lt;/li&gt;\n    &lt;li&gt;&lt;a data-toggle=\"tab\" href=\"#menu3\" onclick=\"calculateManagement()\"&gt;Expected return sheet&lt;/a&gt;&lt;/li&gt;\n    &lt;li&gt;&lt;a data-toggle=\"tab\" href=\"#menu4\" onclick=\"calculateManagement()\"&gt;Cost sheet&lt;/a&gt;&lt;/li&gt;\n  &lt;/ul&gt;\n\n    &lt;div class=\"tab-content\"&gt;\n    &lt;div id=\"home\" class=\"tab-pane fade in active\"&gt;\n      &lt;h3&gt;@managment&lt;/h3&gt;\n      &lt;div class=\"field\" id=\"totalbudget\"&gt;\n          &lt;input class=\"inputbudget procentages\" id=\"budget\" onkeydown=\"return false\"  value=\"&lt;%= @managment.title %&gt;\"&gt;\n        &lt;div class=\"colum\"&gt;\n    &lt;h1&gt;Budget&lt;/h1&gt;\n    &lt;input class=\"inputbudget procentages\" id=\"budget\" onkeydown=\"return false\"  value=\"&lt;%= @managment.budget %&gt;\"&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"colum\"&gt;\n    &lt;h4&gt;low presence&lt;/h4&gt;\n\n    &lt;p&gt;precentages&lt;/p&gt;\n    &lt;input class=\"inputbudget procentages\" id=\"procentages\" onkeydown=\"return false\"  value=\"&lt;%= @managment.procent1 %&gt;\"&gt;%\n    &lt;p&gt;result&lt;/p&gt;\n    &lt;input class=\"inputbudget\" id=\"result1\" onkeydown=\"return false\"  value=\"&lt;%= @managment.result1 %&gt;\"&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"colum\"&gt;\n    &lt;h4&gt;Medium presence&lt;/h4&gt;\n    &lt;p&gt;precentages&lt;/p&gt;\n    &lt;input class=\"inputbudget procentages\" id=\"procentages\" onkeydown=\"return false\"  value=\"&lt;%= @managment.procent2 %&gt;\"&gt;%\n    &lt;p&gt;result&lt;/p&gt;\n    &lt;input class=\"inputbudget\" id=\"result2\" onkeydown=\"return false\"  value=\"&lt;%= @managment.result2 %&gt;\"&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"colum\"&gt;\n    &lt;h4&gt;High presence&lt;/h4&gt;\n    &lt;p&gt;precentages&lt;/p&gt;\n    &lt;input class=\"inputbudget procentages\" id=\"procentages\" onkeydown=\"return false\"  value=\"&lt;%= @managment.procent3 %&gt;\"&gt;%\n    &lt;p&gt;result&lt;/p&gt;\n    &lt;input class=\"inputbudget\" id=\"result3\" onkeydown=\"return false\"  value=\"&lt;%= @managment.result3 %&gt;\"&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n        &lt;span id=\"title\"&gt;\n    &lt;h1&gt;Weighings&lt;/h1&gt;\n    &lt;/span&gt;\n    &lt;div class=\"field\" id=\"weighings\"&gt;\n    &lt;div class=\"colum\"&gt;\n    &lt;h4&gt;Low presence&lt;/h4&gt;\n    &lt;input class=\"inputbudget procentages\" id=\"lowplow\" onkeydown=\"return false\"  value=\"&lt;%= @managment.procent4 %&gt;\"&gt;%\n    &lt;input class=\"inputbudget procentages\" id=\"lowpmed\" onkeydown=\"return false\"  value=\"&lt;%= @managment.procent5 %&gt;\"&gt;%\n    &lt;input class=\"inputbudget procentages\" id=\"lowphigh\" onkeydown=\"return false\"  value=\"&lt;%= @managment.procent6 %&gt;\"&gt;%\n    &lt;/div&gt;\n\n    &lt;div class=\"colum\"&gt;\n    &lt;h4&gt;Medium presence&lt;/h4&gt;\n    &lt;input class=\"inputbudget procentages\" id=\"medplow\"  onkeydown=\"return false\"  value=\"&lt;%= @managment.procent7 %&gt;\"&gt;%\n    &lt;input class=\"inputbudget procentages\" id=\"medpmed\"  onkeydown=\"return false\"  value=\"&lt;%= @managment.procent8 %&gt;\"&gt;%\n    &lt;input class=\"inputbudget procentages\" id=\"medphigh\"  onkeydown=\"return false\"  value=\"&lt;%= @managment.procent9 %&gt;\"&gt;%\n    &lt;/div&gt;\n\n    &lt;div class=\"colum\"&gt;\n    &lt;h4&gt;High presence&lt;/h4&gt;\n    &lt;input class=\"inputbudget procentages\" id=\"highplow\"  onkeydown=\"return false\"  value=\"&lt;%= @managment.procent10 %&gt;\"&gt;%\n    &lt;input class=\"inputbudget procentages\" id=\"highpmed\"  onkeydown=\"return false\"  value=\"&lt;%= @managment.procent11 %&gt;\"&gt;%\n    &lt;input class=\"inputbudget procentages\" id=\"highphigh\"  onkeydown=\"return false\"  value=\"&lt;%= @managment.procent12 %&gt;\"&gt;%\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n    &lt;div class=\"field\"&gt;\n      &lt;h1&gt;Objectives&lt;/h1&gt;\n\n    &lt;h4&gt;low presence&lt;/h4&gt;\n    &lt;input class=\"inputbudget procentages\" id=\"objectiveinput\" onkeydown=\"return false\"  value=\"&lt;%= @managment.objectivesname1 %&gt;\"&gt;\n    &lt;input class=\"inputbudget procentages\" id=\"procentages\"  onkeydown=\"return false\"  value=\"&lt;%= @managment.lowprocent1 %&gt;\"&gt;%\n    &lt;input class=\"inputbudget procentages\" id=\"procentages\"  onkeydown=\"return false\"  value=\"&lt;%= @managment.medprocent1 %&gt;\"&gt;%\n    &lt;input class=\"inputbudget procentages\" id=\"procentages\"  onkeydown=\"return false\"  value=\"&lt;%= @managment.highprocent1 %&gt;\"&gt;%\n    &lt;input class=\"inputbudget procentages\" id=\"procentages\"   onkeydown=\"return false\"  value=\"&lt;%= @managment.lowobjectives1 %&gt;\"&gt;\n    &lt;input class=\"inputbudget procentages\" id=\"procentages\"   onkeydown=\"return false\"  value=\"&lt;%= @managment.medobjectives1 %&gt;\"&gt;\n    &lt;input class=\"inputbudget procentages\" id=\"procentages\"   onkeydown=\"return false\"  value=\"&lt;%= @managment.highobjectives1 %&gt;\"&gt;\n\n    &lt;h4&gt;Medium presence&lt;/h4&gt;\n    &lt;input class=\"inputbudget procentages\" id=\"objectiveinput\"  onkeydown=\"return false\"  value=\"&lt;%= @managment.objectivesname2 %&gt;\"&gt;\n    &lt;input class=\"inputbudget procentages\" id=\"procentages\"  onkeydown=\"return false\"  value=\"&lt;%= @managment.lowprocent2 %&gt;\"&gt;%\n    &lt;input class=\"inputbudget procentages\" id=\"procentages\"  onkeydown=\"return false\"  value=\"&lt;%= @managment.medprocent2 %&gt;\"&gt;%\n    &lt;input class=\"inputbudget procentages\" id=\"procentages\"  onkeydown=\"return false\"  value=\"&lt;%= @managment.highprocent2 %&gt;\"&gt;%\n    &lt;input class=\"inputbudget procentages\" id=\"procentages\"   onkeydown=\"return false\"  value=\"&lt;%= @managment.lowobjectives2 %&gt;\"&gt;\n    &lt;input class=\"inputbudget procentages\" id=\"procentages\"   onkeydown=\"return false\"  value=\"&lt;%= @managment.medobjectives2 %&gt;\"&gt;\n    &lt;input class=\"inputbudget procentages\" id=\"procentages\"   onkeydown=\"return false\"  value=\"&lt;%= @managment.highobjectives2 %&gt;\"&gt;\n\n    &lt;h4&gt;High presence&lt;/h4&gt;\n    &lt;input class=\"inputbudget procentages\" id=\"objectiveinput\"  onkeydown=\"return false\"  value=\"&lt;%= @managment.objectivesname3 %&gt;\"&gt;\n    &lt;input class=\"inputbudget procentages\" id=\"procentages\"  onkeydown=\"return false\"  value=\"&lt;%= @managment.lowprocent3 %&gt;\"&gt;%\n    &lt;input class=\"inputbudget procentages\" id=\"procentages\"  onkeydown=\"return false\"  value=\"&lt;%= @managment.medprocent3 %&gt;\"&gt;%\n    &lt;input class=\"inputbudget procentages\" id=\"procentages\"  onkeydown=\"return false\"  value=\"&lt;%= @managment.highprocent3 %&gt;\"&gt;%\n    &lt;input class=\"inputbudget procentages\" id=\"procentages\"   onkeydown=\"return false\"  value=\"&lt;%= @managment.lowobjectives3 %&gt;\"&gt;\n    &lt;input class=\"inputbudget procentages\" id=\"procentages\"   onkeydown=\"return false\"  value=\"&lt;%= @managment.medobjectives3 %&gt;\"&gt;\n    &lt;input class=\"inputbudget procentages\" id=\"procentages\"   onkeydown=\"return false\"  value=\"&lt;%= @managment.highobjectives3 %&gt;\"&gt;\n\n  &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div id=\"menu1\" class=\"tab-pane fade\"&gt;\n      &lt;h3&gt;Data&lt;/h3&gt;\n            &lt;!--START BUDGET FORM --&gt;\n      &lt;form class=\"budgetresultsoutput\" id=\"totalbudget\"&gt;\n        &lt;!--End budget output--&gt;\n\n        &lt;!--Procentages output--&gt;\n        &lt;div class=\"row datarowbudget\"&gt;\n          &lt;div class=\"colum\" id=\"columtext\"&gt;\n            &lt;p&gt;P.O.I&lt;/p&gt;\n            &lt;input class=\"box names\" type=\"text\" id=\"title3-0\" value=\"Domestic\" onkeydown=\"return false\" placeholder=\"Slice #1 title\" /&gt;\n            &lt;input class=\"box names\" type=\"text\" id=\"title2-1\" value=\"Continental\" onkeydown=\"return false\" placeholder=\"Slice #1 title\" /&gt;\n            &lt;input class=\"box names\" type=\"text\" id=\"title2-2\" value=\"International\" onkeydown=\"return false\" placeholder=\"Slice #1 title\" /&gt;\n            &lt;input class=\"box\" type=\"text\" id=\"title2-2\" value=\"Total\" onkeydown=\"return false\" placeholder=\"Slice #1 title\" /&gt;\n          &lt;/div&gt;\n\n          &lt;!-- COLUM 1/LOW--&gt;\n          &lt;div class=\"colum\" id=\"regio\"&gt;\n            &lt;p&gt;Low&lt;/p&gt;\n            &lt;input class=\"box\" value=\"1\" id=\"value3-0\" type=\"text\" onkeydown=\"return false\" /&gt;\n            &lt;input class=\"box\" value=\"1\" id=\"value3-1\" type=\"text\" onkeydown=\"return false\" /&gt;\n            &lt;input class=\"box\" value=\"1\" id=\"value3-2\" type=\"text\" onkeydown=\"return false\" /&gt;\n            &lt;input class=\"box\" value=\"1\" id=\"value3-9\" type=\"text\" onkeydown=\"return false\" /&gt;\n          &lt;/div&gt;\n          &lt;!-- COLUM 2 MEDIUM --&gt;\n          &lt;div class=\"colum\" id=\"regio\"&gt;\n            &lt;p&gt;Medium&lt;/p&gt;\n            &lt;input class=\"box\" value=\"1\" id=\"value3-3\" type=\"text\" onkeydown=\"return false\" /&gt;\n            &lt;input class=\"box\" value=\"1\" id=\"value3-4\" type=\"text\" onkeydown=\"return false\" /&gt;\n            &lt;input class=\"box\" value=\"1\" id=\"value3-5\" type=\"text\" onkeydown=\"return false\" /&gt;\n            &lt;input class=\"box\" value=\"1\" id=\"value3-10\" type=\"text\" onkeydown=\"return false\" /&gt;\n          &lt;/div&gt;\n          &lt;!-- COLUM 3 HIGH --&gt;\n          &lt;div class=\"colum\" id=\"regio\"&gt;\n            &lt;p&gt;High&lt;/p&gt;\n            &lt;input class=\"box\" value=\"1\" id=\"value3-6\" type=\"text\" onkeydown=\"return false\" /&gt;\n            &lt;input class=\"box\" value=\"1\" id=\"value3-7\" type=\"text\" onkeydown=\"return false\" /&gt;\n            &lt;input class=\"box\" value=\"1\" id=\"value3-8\" type=\"text\" onkeydown=\"return false\" /&gt;\n            &lt;input class=\"box\" value=\"1\" id=\"value3-11\" type=\"text\" onkeydown=\"return false\" /&gt;\n          &lt;/div&gt;\n          &lt;!--Budget output--&gt;\n          &lt;div class=\"colum columbudget\" id=\"regio\"&gt;\n            &lt;p&gt;Budget&lt;/p&gt;\n            &lt;input id=\"budgetdata\" type=\"text\" name=\"budget\" value=\"&lt;%= @managment.budget %&gt;\" onkeydown=\"return false\"&gt;&lt;br&gt;\n          &lt;/div&gt;\n          &lt;div class=\"colum\" id=\"regioprec\"&gt;\n            &lt;!--Low presence:--&gt;\n            &lt;p&gt;Procentages&lt;/p&gt;\n            &lt;input class=\"procentages\" id=\"lowdata\" type=\"text\" name=\"low\" value=\"&lt;%= @managment.procent1 %&gt;\" onkeydown=\"return false\"&gt;%&lt;br&gt;\n            &lt;input class=\"procentages\"id=\"meddata\" type=\"text\" name=\"low\" value=\"&lt;%= @managment.procent2 %&gt;\" onkeydown=\"return false\"&gt;%&lt;br&gt;\n            &lt;input class=\"procentages\" id=\"highdata\" type=\"text\" name=\"low\" value=\"&lt;%= @managment.procent3 %&gt;\" onkeydown=\"return false\"&gt;%&lt;br&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;!--End procentages input--&gt;\n    &lt;/div&gt;\n    &lt;div id=\"menu2\" class=\"tab-pane fade\"&gt;\n      &lt;h3&gt;Desired return sheet&lt;/h3&gt;\n      &lt;p&gt;Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam.&lt;/p&gt;\n    &lt;/div&gt;\n    &lt;div id=\"menu3\" class=\"tab-pane fade\"&gt;\n      &lt;h3&gt;Expected return sheet&lt;/h3&gt;\n      &lt;p&gt;Eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.&lt;/p&gt;\n    &lt;/div&gt;\n        &lt;div id=\"menu4\" class=\"tab-pane fade\"&gt;\n      &lt;h3&gt;Cost sheet&lt;/h3&gt;\n      &lt;p&gt;Eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo.&lt;/p&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n\n\n  &lt;span class=\"timestamp\"&gt;\n\n    &lt;% if current_user?(@managment.user) %&gt;\n      &lt;%= link_to \"delete\", @managment, method: :delete,\n                                       data: { confirm: \"You sure?\" } %&gt;\n    &lt;% end %&gt;\n  &lt;/span&gt;\n&lt;/li&gt;\n\n\n\n&lt;%= link_to 'Edit', edit_managment_path(@@managment) %&gt; |\n&lt;%= link_to 'Back', managments_path %&gt;\n\n\n\n&lt;script type=\"text/javascript\"&gt;\n//CALCULATE MANAGEMENT\nfunction calculateManagement() {\n\n  //START OF BUDGET(data) PART\n  var domesticResultLow = document.getElementById('value3-0');\n  var domesticResultMed = document.getElementById('value3-1');\n  var domesticResultHigh = document.getElementById('value3-2');\n  var domesticResultFinal = document.getElementById('value3-9');\n\n  var continentalResultLow = document.getElementById('value3-3');\n  var continentalResultMed = document.getElementById('value3-4');\n  var continentalResultHigh = document.getElementById('value3-5');\n  var continentalResultFinal = document.getElementById('value3-10');\n\n  var globalResultLow = document.getElementById('value3-6');\n  var globalResultMed = document.getElementById('value3-7');\n  var globalResultHigh = document.getElementById('value3-8');\n  var globalResultFinal = document.getElementById('value3-11');\n\n  var lowProcentageLow = document.getElementById('lowplow').value;\n  var lowProcentageMed = document.getElementById('lowpmed').value;\n  var lowProcentageHigh = document.getElementById('lowphigh').value;\n\n  var medProcentageLow = document.getElementById('medplow').value;\n  var medProcentageMed = document.getElementById('medpmed').value;\n  var medProcentageHigh = document.getElementById('medphigh').value;\n\n  var highProcentageLow = document.getElementById('highplow').value;\n  var highProcentageMed = document.getElementById('highpmed').value;\n  var highProcentageHigh = document.getElementById('highphigh').value;\n\n  var resultOne = document.getElementById('result1').value;\n  var resultTwo = document.getElementById('result2').value;\n  var resultThree = document.getElementById('result3').value;\n\n  var lowProcentLow = (resultOne /100 )* lowProcentageLow;\n  domesticResultLow.value = lowProcentLow;\n\n    var lowProcentMed = (resultOne /100 )* lowProcentageMed;\n  domesticResultMed.value = lowProcentMed;\n\n  var lowProcentHigh = (resultOne /100 )* lowProcentageHigh;\n  domesticResultHigh.value = lowProcentHigh;\n\n\n  var medProcentLow = (resultTwo /100 )* medProcentageLow;\n  continentalResultLow.value = medProcentLow;\n\n  var medProcentMed = (resultTwo /100 )* medProcentageMed;\n  continentalResultMed.value = medProcentMed;\n\n  var medProcentHigh = (resultTwo /100 )* medProcentageHigh;\n  continentalResultHigh.value = medProcentHigh;\n\n\n  var highProcentLow = (resultThree /100 )* highProcentageLow;\n  globalResultLow.value = highProcentLow;\n\n  var highProcentMed = (resultThree /100 )* highProcentageMed;\n  globalResultMed.value = highProcentMed;\n\n  var highProcentHigh = (resultThree /100 )* highProcentageHigh;\n  globalResultHigh.value = highProcentHigh;\n\n  domesticResultFinal.value = resultOne;\n  continentalResultFinal.value = resultTwo;\n  globalResultFinal.value = resultThree;\n\n  //END OF BUDGET(data) PART\n\n}\n\n\n//No letters\nfunction isNumber(evt) {\n  evt = (evt) ? evt : window.event;\n  var charCode = (evt.which) ? evt.which : evt.keyCode;\n  if (charCode &gt; 31 &amp;&amp; (charCode &lt; 48 || charCode &gt; 57)) {\n    return false;\n  }\n  return true;\n}\n//\n&lt;/script&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "edited": false, "score": 1, "creation_date": 1484763613, "post_id": 41726686, "comment_id": 70647842, "body": "Please post your <code>routes.rb</code> file."}, {"owner": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "edited": false, "score": 0, "creation_date": 1484765250, "post_id": 41726686, "comment_id": 70648746, "body": "<code>get wiki&#47;new</code> not <code>post wiki&#47;new</code>"}, {"owner": {"reputation": 90, "user_id": 6917784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f78b6b47a0bc1e73468ba219da11e7e?s=128&d=identicon&r=PG&f=1", "display_name": "Rapid99", "link": "https://stackoverflow.com/users/6917784/rapid99"}, "edited": false, "score": 0, "creation_date": 1484766517, "post_id": 41726686, "comment_id": 70649404, "body": "updated routes, but still getting the same error"}, {"owner": {"reputation": 2051, "user_id": 6255586, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Ez4Cz.jpg?s=128&g=1", "display_name": "VAD", "link": "https://stackoverflow.com/users/6255586/vad"}, "edited": false, "score": 0, "creation_date": 1484768365, "post_id": 41726686, "comment_id": 70650470, "body": "I believe you want <code>@wiki = Wiki.new(params[:wiki])</code> instead of <code>@wiki = Wiki.create(params[:wiki])</code> in your <code>create</code> action"}, {"owner": {"reputation": 90, "user_id": 6917784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f78b6b47a0bc1e73468ba219da11e7e?s=128&d=identicon&r=PG&f=1", "display_name": "Rapid99", "link": "https://stackoverflow.com/users/6917784/rapid99"}, "edited": false, "score": 0, "creation_date": 1484771304, "post_id": 41726686, "comment_id": 70652071, "body": "updated my create method to <code>@wiki = Wiki.new(params[:wiki])</code> but it made no difference"}, {"owner": {"reputation": 2051, "user_id": 6255586, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Ez4Cz.jpg?s=128&g=1", "display_name": "VAD", "link": "https://stackoverflow.com/users/6255586/vad"}, "edited": false, "score": 0, "creation_date": 1484771803, "post_id": 41726686, "comment_id": 70652307, "body": "@Rapid99 No it&#39;s not about the main problem. Just another one tiny tweak"}], "answers": [{"comments": [{"owner": {"reputation": 90, "user_id": 6917784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f78b6b47a0bc1e73468ba219da11e7e?s=128&d=identicon&r=PG&f=1", "display_name": "Rapid99", "link": "https://stackoverflow.com/users/6917784/rapid99"}, "edited": false, "score": 0, "creation_date": 1484768171, "post_id": 41727522, "comment_id": 70650366, "body": "I removed the other routes and restarted my server. I am still getting the following error when trying to access /wiki/new  undefined method `wikis_path&#39; for #&lt;#&lt;Class:0x007fa5e541d628&gt;:0x007fa5e4e30c60&gt;"}, {"owner": {"reputation": 2051, "user_id": 6255586, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Ez4Cz.jpg?s=128&g=1", "display_name": "VAD", "link": "https://stackoverflow.com/users/6255586/vad"}, "reply_to_user": {"reputation": 90, "user_id": 6917784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f78b6b47a0bc1e73468ba219da11e7e?s=128&d=identicon&r=PG&f=1", "display_name": "Rapid99", "link": "https://stackoverflow.com/users/6917784/rapid99"}, "edited": false, "score": 0, "creation_date": 1484768220, "post_id": 41727522, "comment_id": 70650392, "body": "@Rapid99 Did you change <code>resources :wiki</code> to <code>resources :wikis</code>?"}, {"owner": {"reputation": 90, "user_id": 6917784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f78b6b47a0bc1e73468ba219da11e7e?s=128&d=identicon&r=PG&f=1", "display_name": "Rapid99", "link": "https://stackoverflow.com/users/6917784/rapid99"}, "edited": false, "score": 0, "creation_date": 1484769318, "post_id": 41727522, "comment_id": 70651005, "body": "I did now, but it seems to have broken a lot. I am trying to clean it all up now and see if it makes a difference"}, {"owner": {"reputation": 90, "user_id": 6917784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f78b6b47a0bc1e73468ba219da11e7e?s=128&d=identicon&r=PG&f=1", "display_name": "Rapid99", "link": "https://stackoverflow.com/users/6917784/rapid99"}, "edited": false, "score": 0, "creation_date": 1484779087, "post_id": 41727522, "comment_id": 70655851, "body": "you were correct. I made a rookie mistake of naming my controller &quot;wiki_controller.rb&quot; instead of &quot;wikis_controller.rb&quot;. This messed up a lot. But after correcting my routes and refactoring my error files, everything is working as it should!"}, {"owner": {"reputation": 2051, "user_id": 6255586, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Ez4Cz.jpg?s=128&g=1", "display_name": "VAD", "link": "https://stackoverflow.com/users/6255586/vad"}, "reply_to_user": {"reputation": 90, "user_id": 6917784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f78b6b47a0bc1e73468ba219da11e7e?s=128&d=identicon&r=PG&f=1", "display_name": "Rapid99", "link": "https://stackoverflow.com/users/6917784/rapid99"}, "edited": false, "score": 0, "creation_date": 1484808175, "post_id": 41727522, "comment_id": 70664434, "body": "Glad to help you! I&#39;ll appreciate if you accept my answer as correct one."}], "tags": [], "owner": {"reputation": 2051, "user_id": 6255586, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/Ez4Cz.jpg?s=128&g=1", "display_name": "VAD", "link": "https://stackoverflow.com/users/6255586/vad"}, "is_accepted": true, "score": 3, "last_activity_date": 1484766560, "creation_date": 1484766560, "answer_id": 41727522, "question_id": 41726686, "link": "https://stackoverflow.com/questions/41726686/undefined-method-wikis-path/41727522#41727522", "title": "undefined method `wikis_path&#39;", "body": "<p>You can get rid of redundant unrestful wiki routes. <code>resources :wikis</code> will be enough:</p>\n\n<pre><code>Rails.application.routes.draw do\n  devise_for :users\n  resources :wikis\n  resources :users\n  root 'welcome#index'\nend\n</code></pre>\n\n<p>And something tells me that all will be fine after that change.</p>\n"}], "owner": {"reputation": 90, "user_id": 6917784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1f78b6b47a0bc1e73468ba219da11e7e?s=128&d=identicon&r=PG&f=1", "display_name": "Rapid99", "link": "https://stackoverflow.com/users/6917784/rapid99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 41727522, "answer_count": 1, "score": 2, "last_activity_date": 1484771627, "creation_date": 1484763546, "last_edit_date": 1484771627, "question_id": 41726686, "link": "https://stackoverflow.com/questions/41726686/undefined-method-wikis-path", "title": "undefined method `wikis_path&#39;", "body": "<p>I am having issues getting my create method to function correctly. </p>\n\n<p>Here is my new.html.erb file</p>\n\n<pre><code>  &lt;div class=\"col-md-8\"&gt;\n    &lt;%= form_for @wiki do |f| %&gt;\n      &lt;%= f.label :title, class: 'form-control' %&gt;\n      &lt;%= f.text_field :title, class: 'form-control', placeholder: \"Enter wiki title\" %&gt;&lt;br&gt;&lt;br&gt;\n\n      &lt;%= f.label :body, class: 'form-control'%&gt;\n      &lt;%= f.text_area :body, class: 'form-control', placeholder: \"Enter wiki body\" %&gt;&lt;br&gt;&lt;br&gt;\n\n      &lt;%= f.check_box :private %&gt; Private Topic&lt;br&gt;&lt;br&gt;\n\n      &lt;%= f.submit \"Save\", class: 'btn btn-success' %&gt;\n\n    &lt;% end %&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>Controller</p>\n\n<pre><code>  def new\n    @wiki = Wiki.new\n  end\n  def create\n    @wiki = Wiki.create(params[:wiki])\n    if @wiki.save\n      flash[:notice] = \"Wiki has been saved\"\n      redirect_to wiki_index_path\n    end\n  end\nprivate\n  def wiki_params\n    params.require(:wiki).permit(:title, :body, :private)\n  end\n</code></pre>\n\n<p><code>routes.rb</code></p>\n\n<pre><code>Rails.application.routes.draw do\n  devise_for :users\n  resources :wiki\n  post 'wiki/new'\n  post 'wiki/create'\n  resources :users\n  root 'welcome#index'\nend\n</code></pre>\n\n<p>If I use :wiki in my form_for on new.html.erb I can get passed the error but when clicking on my save button on the actual new page, nothing happens at all (since I'm not saving the information to the correct variable). However, as soon as I use the @wiki variable, I get the error </p>\n\n<pre><code>\"undefined method `wikis_path' for #&lt;#&lt;Class:0x007f8f794e5d58&gt;:0x007f8f7bb2ef50&gt;\"\n</code></pre>\n\n<p>Any help is appreciated! </p>\n"}, {"tags": ["c", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1811, "user_id": 5968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gBgib.jpg?s=128&g=1", "display_name": "James Williams", "link": "https://stackoverflow.com/users/5968/james-williams"}, "edited": false, "score": 0, "creation_date": 1484776852, "post_id": 41729770, "comment_id": 70654953, "body": "I tried calling file.flush() after the file.ioctl call but didn&#39;t notice any change in behavior. :("}, {"owner": {"reputation": 2470, "user_id": 1175090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bd5ca9726b8546e77c9fe21cae2f1e95?s=128&d=identicon&r=PG", "display_name": "Snake Sanders", "link": "https://stackoverflow.com/users/1175090/snake-sanders"}, "reply_to_user": {"reputation": 1811, "user_id": 5968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gBgib.jpg?s=128&g=1", "display_name": "James Williams", "link": "https://stackoverflow.com/users/5968/james-williams"}, "edited": false, "score": 0, "creation_date": 1484810257, "post_id": 41729770, "comment_id": 70665332, "body": "The last I could suggest for the moment is to check if the data is actually written at the moment the program is supposed to write it, not at the end. Check if the data is not only flushed from ruby environment but also from the OS to the IO. You can verify it using <a href=\"http://ruby-doc.org/core-2.4.0/IO.html#method-i-fsync\" rel=\"nofollow noreferrer\">fsync</a>. It will tell you with an exception if the underlying OS writes the data right away."}, {"owner": {"reputation": 1811, "user_id": 5968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gBgib.jpg?s=128&g=1", "display_name": "James Williams", "link": "https://stackoverflow.com/users/5968/james-williams"}, "edited": false, "score": 0, "creation_date": 1484826243, "post_id": 41729770, "comment_id": 70674596, "body": "The part where I said &quot;The do_latch functions are necessary so I can see the result in my hardware; but are probably not germane to this problem.&quot; was in fact the problem.   I was so busy looking at ioctl that I missed that I wasn&#39;t flushing when writing the latch values.   Thank you so much!"}], "tags": [], "owner": {"reputation": 2470, "user_id": 1175090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bd5ca9726b8546e77c9fe21cae2f1e95?s=128&d=identicon&r=PG", "display_name": "Snake Sanders", "link": "https://stackoverflow.com/users/1175090/snake-sanders"}, "is_accepted": true, "score": 1, "last_activity_date": 1484774901, "creation_date": 1484774901, "answer_id": 41729770, "question_id": 41726292, "link": "https://stackoverflow.com/questions/41726292/ruby-ioctl-and-complex-structures/41729770#41729770", "title": "Ruby, ioctl, and complex structures", "body": "<p>It is a common issue not to flush the buffer, you could check it out and try it.</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.4.0/IO.html#method-i-flush\" rel=\"nofollow noreferrer\">Flush</a>:\nFlushes any buffered data within ios to the underlying operating system (note that this is Ruby internal buffering only; the OS may buffer the data as well).</p>\n\n<pre><code>rb_io_flush(VALUE io)\n{\n    return rb_io_flush_raw(io, 1);\n}\n</code></pre>\n"}], "owner": {"reputation": 1811, "user_id": 5968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/gBgib.jpg?s=128&g=1", "display_name": "James Williams", "link": "https://stackoverflow.com/users/5968/james-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 0, "accepted_answer_id": 41729770, "answer_count": 1, "score": 4, "last_activity_date": 1484776800, "creation_date": 1484762267, "last_edit_date": 1484776800, "question_id": 41726292, "link": "https://stackoverflow.com/questions/41726292/ruby-ioctl-and-complex-structures", "title": "Ruby, ioctl, and complex structures", "body": "<p>I have a piece of hardware that I'm trying to control via my computer's built-in SPI driver. The SPI driver is controlled via ioctl. </p>\n\n<p>I can successfully drive the hardware from a small C program; but when I try to duplicate the C program in Ruby I run into problems. </p>\n\n<p>Using <a href=\"http://ruby-doc.org/core-2.4.0/IO.html\" rel=\"nofollow noreferrer\">IO#ioctl</a> to set basic registers (with u32 and u8 ints) works fine (I know because I can also use ioctl to read back the values I set); but as soon as I try to set a complex struct, the program fails with</p>\n\n<pre><code>small.rb:51:in 'ioctl': Connection timed out @ rb_ioctl - /dev/spidev32766.0 (Errno::ETIMEDOUT)\n</code></pre>\n\n<p>I might be running into trouble because the <a href=\"https://www.apt-browse.org/browse/ubuntu/precise/main/i386/linux-libc-dev/3.2.0-23.36/file/usr/include/linux/spi/spidev.h\" rel=\"nofollow noreferrer\">spi_ioc_transfer  struct</a> has two pointers to byte buffers but the pointers are typed as unsigned 64-bit ints even on 32-bit platforms -- necessitating a cast to <code>(unsigned long)</code> in C. I'm trying to replicate that in Ruby but am quite unsure of myself. </p>\n\n<p>Below are the C program which works and the Ruby port which doesn't work. The <code>do_latch</code> functions are necessary so I can see the result in my hardware; but are probably not germane to this problem. </p>\n\n<p>C (which works):</p>\n\n<pre><code>#include &lt;stdint.h&gt;\n#include &lt;unistd.h&gt;\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;string.h&gt;\n#include &lt;fcntl.h&gt;\n#include &lt;sys/ioctl.h&gt;\n#include &lt;linux/spi/spidev.h&gt;\n\nint do_latch() {\n    int fd = open(\"/sys/class/gpio/gpio1014/value\", O_RDWR);\n    write(fd, \"1\", 1);\n    write(fd, \"0\", 1);\n\n    close(fd);\n}\n\nint do_transfer(int fd, uint8_t *bytes, size_t len) {\n    uint8_t *rx_bytes = malloc(sizeof(uint8_t) * len);\n\n    struct spi_ioc_transfer transfer = {\n        .tx_buf = (unsigned long)bytes,\n        .rx_buf = (unsigned long)rx_bytes,\n\n        .len = len,\n        .speed_hz = 100000,\n\n        .delay_usecs = 0,\n        .bits_per_word = 8,\n        .cs_change = 0,\n        .tx_nbits = 0,\n        .rx_nbits = 0,\n        .pad = 0\n    };\n\n    if(ioctl(fd, SPI_IOC_MESSAGE(1), &amp;transfer) &lt; 1) {\n        perror(\"Could not send SPI message\"); \n        exit(1); \n    }\n\n    free(rx_bytes);\n}\n\nint main() {\n    int fd = open(\"/dev/spidev32766.0\", O_RDWR);\n\n    uint8_t mode = 0;\n    ioctl(fd, SPI_IOC_WR_MODE, &amp;mode);\n\n    uint8_t lsb_first = 0;\n    ioctl(fd, SPI_IOC_WR_LSB_FIRST, lsb_first);\n\n    uint32_t speed_hz = 100000;\n    ioctl(fd, SPI_IOC_WR_MAX_SPEED_HZ, speed_hz);\n\n    size_t data_len = 36;\n    uint8_t *tx_data = malloc(sizeof(uint8_t) * data_len);\n\n    memset(tx_data, 0xFF, data_len);\n\n    do_transfer(fd, tx_data, data_len);\n    do_latch();\n\n    sleep(2);\n\n    memset(tx_data, 0x00, data_len);\n\n    do_transfer(fd, tx_data, data_len);\n    do_latch();\n\n    free(tx_data);\n    close(fd);\n    return 0;\n}\n</code></pre>\n\n<p>Ruby (which fails on the ioctl line in <code>do_transfer</code>):</p>\n\n<pre><code>SPI_IOC_WR_MODE = 0x40016b01\nSPI_IOC_WR_LSB_FIRST = 0x40016b02\nSPI_IOC_WR_BITS_PER_WORD = 0x40016b03\nSPI_IOC_WR_MAX_SPEED_HZ = 0x40046b04\nSPI_IOC_WR_MODE32 = 0x40046b05\nSPI_IOC_MESSAGE_1 = 0x40206b00 \n\ndef do_latch()\n  File.open(\"/sys/class/gpio/gpio1014/value\", File::RDWR) do |file|\n    file.write(\"1\")\n    file.write(\"0\")\n  end\nend\n\ndef do_transfer(file, bytes)\n  ##########################################################################################\n  #begin spi_ioc_transfer struct (cat /usr/include/linux/spi/spidev.h)\n\n    #pack bytes into a buffer; create a new buffer (filled with zeroes) for the rx\n    tx_buff = bytes.pack(\"C*\")        \n    rx_buff = (Array.new(bytes.size) { 0 }).pack(\"C*\")       \n\n    #on 32-bit, the struct uses a zero-extended pointer for the buffers (so it's the same\n    #byte layout on 64-bit as well) -- so do some trickery to get the buffer addresses \n    #as 64-bit strings even though this is running on a 32-bit computer\n    tx_buff_pointer = [tx_buff].pack(\"P\").unpack(\"L!\")[0]   #u64 (zero-extended pointer)\n    rx_buff_pointer = [rx_buff].pack(\"P\").unpack(\"L!\")[0]   #u64 (zero-extended pointer)\n\n    buff_len = bytes.size                                   #u32\n    speed_hz = 100000                                       #u32\n\n    delay_usecs = 0                                         #u16\n    bits_per_word = 8                                       #u8\n    cs_change = 0                                           #u8\n    tx_nbits = 0                                            #u8\n    rx_nbits = 0                                            #u8\n    pad = 0                                                 #u16\n\n    struct_array = [tx_buff_pointer, rx_buff_pointer, buff_len, speed_hz, delay_usecs, bits_per_word, cs_change, tx_nbits, rx_nbits, pad]\n    struct_packed = struct_array.pack(\"QQLLSCCCCS\")\n\n    #in C, I pass a pointer to the the structure; so mimic that here\n    struct_pointer_packed = [struct_packed].pack(\"P\")\n  #end spi_ioc_transfer struct\n  ##########################################################################################\n\n  file.ioctl(SPI_IOC_MESSAGE_1, struct_pointer_packed)\nend\n\nFile.open(\"/dev/spidev32766.0\", File::RDWR) do |file|\n\n  file.ioctl(SPI_IOC_WR_MODE, [0].pack(\"C\"));\n  file.ioctl(SPI_IOC_WR_LSB_FIRST, [0].pack(\"C\"));\n  file.ioctl(SPI_IOC_WR_MAX_SPEED_HZ, [0].pack(\"L\"));\n\n  data_bytes = Array.new(36) { 0x00 }\n\n  do_transfer(file, data_bytes)\n  do_latch()\n\n  sleep(2) \n\n  data_bytes = []\n  data_bytes = Array.new(36) { 0xFF }\n\n  do_transfer(file, data_bytes)\n  do_latch()\n\nend\n</code></pre>\n\n<p>I pulled the magic number constants out by having C print them (they're macros in C). I can validate that most of them work; I'm a little unsure about the ioctl message that fails (<code>SPI_IOC_MESSAGE_1</code>) since that doesn't work and it's a complicated macro. Still, I have no reason to think that it's incorrect and it's always the same when I look at it from C. </p>\n\n<p>When I print out the structure in C and then print it out in Ruby, the only differences are in the buffer addresses, so if something's going wrong, that feels like the right place to look. But I've run out of things to try. </p>\n\n<p>I can also print out the addresses in both versions and they look like what I would expect, 32 bits extended to 64 bits, and match the values in the structure (although the structure is little-endian -- this is an ARM). </p>\n\n<p>Structure in C (that works):</p>\n\n<pre><code>60200200 00000000 a8200200 00000000 24000000 40420f00 00000800 00000000\n</code></pre>\n\n<p>Structure in Ruby (that fails):</p>\n\n<pre><code>a85da27f 00000000 08399b7f 00000000 24000000 40420f00 00000800 00000000\n</code></pre>\n\n<p>Is there an obvious mistake that I'm making when I lay out the struct in Ruby? Is there something else that I'm missing? </p>\n\n<p>My next step is to write a library in C and use FFI to access it from Ruby. But that seems like giving up; and using the native <code>ioctl</code> function feels like the better approach if I can ever make it work. </p>\n\n<h3>Update</h3>\n\n<p>Above, I'm doing </p>\n\n<pre><code>    struct_array = [tx_buff_pointer, rx_buff_pointer, buff_len, speed_hz, delay_usecs, bits_per_word, cs_change, tx_nbits, rx_nbits, pad]\n    struct_packed = struct_array.pack(\"QQLLSCCCCS\")\n\n    #in C, I pass a pointer to the the structure; so mimic that here\n    struct_pointer_packed = [struct_packed].pack(\"P\")\n    file.ioctl(SPI_IOC_MESSAGE_1, struct_pointer_packed)\n</code></pre>\n\n<p>because I have to pass a pointer to the struct in C. But that's what's causing the error! </p>\n\n<p>Instead, it needs to be </p>\n\n<pre><code>    struct_array = [tx_buff_pointer, rx_buff_pointer, buff_len, speed_hz, delay_usecs, bits_per_word, cs_change, tx_nbits, rx_nbits, pad]\n    struct_packed = struct_array.pack(\"QQLLSCCCCS\")\n\n    file.ioctl(SPI_IOC_MESSAGE_1, struct_packed)\n</code></pre>\n\n<p>I guess Ruby is automatically making it an array when it marshalls it over? </p>\n\n<p>Unfortunately, now it only intermittently works. The second call <em>never</em> works and the first call doesn't work if I pass in all zeros. It's very mysterious. </p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1484762021, "post_id": 41725911, "comment_id": 70646931, "body": "Your question isn&#39;t clear. Do you want to keep your Rails app from running when it can&#39;t see the client?"}, {"owner": {"reputation": 17, "user_id": 7317558, "user_type": "registered", "profile_image": "https://graph.facebook.com/1351243764940602/picture?type=large", "display_name": "Nicio Barreto Santos", "link": "https://stackoverflow.com/users/7317558/nicio-barreto-santos"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1484763842, "post_id": 41725911, "comment_id": 70647970, "body": "I don&#39;t my rails app working when it can&#39;t see the client."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1484764227, "post_id": 41725911, "comment_id": 70648195, "body": "@NicioBarretoSantos: if your rails stops running when there&#39;s no client, other clients won&#39;t be able to connect (the app is not working anymore)"}, {"owner": {"reputation": 17, "user_id": 7317558, "user_type": "registered", "profile_image": "https://graph.facebook.com/1351243764940602/picture?type=large", "display_name": "Nicio Barreto Santos", "link": "https://stackoverflow.com/users/7317558/nicio-barreto-santos"}, "edited": false, "score": 0, "creation_date": 1484765462, "post_id": 41725911, "comment_id": 70648863, "body": "I do not know if I am being clear. I am brazilian and not good at all with english. I will try.... I need to check if a specific computer has internet connection! For instance if my pc or your pc or my mother&#39;s pc has no internet connection!"}, {"owner": {"reputation": 2912, "user_id": 3081206, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YaKOY.jpg?s=128&g=1", "display_name": "takendarkk", "link": "https://stackoverflow.com/users/3081206/takendarkk"}, "edited": false, "score": 0, "creation_date": 1484765890, "post_id": 41725911, "comment_id": 70649089, "body": "Try pinging a popular website? Basically, just try to do something over the internet and see if it succeeds or not."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1484779032, "post_id": 41725911, "comment_id": 70655831, "body": "Does your app only have one user? If so it <i>might</i> make sense to ping and then not process if the client isn&#39;t visible or doesn&#39;t respond. If you are running a multi-user Rails app, then it doesn&#39;t make sense at all. Also, when idling, Rails won&#39;t take much CPU time at all unless you have background or cron-based code running."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1484779240, "post_id": 41725911, "comment_id": 70655913, "body": "I don&#39;t think the server pinging the user makes sense. Instead, in the admin web page have it request a resource from the server every n seconds using a JavaScript timeout. If the server doesn&#39;t see that at its expected interval then it knows the client isn&#39;t connected. That&#39;s less costly for the server. If the client doesn&#39;t get the resource from the server have the JavaScript raise a message saying the server isn&#39;t available. Then both sides know whether the connection is up. Use a session ID or a token only known by the server and client or use HTTPS to add some security."}], "answers": [{"comments": [{"owner": {"reputation": 967, "user_id": 2854373, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AGma4ADoqOg/AAAAAAAAAAI/AAAAAAAAuqk/UvigFQdQSm8/photo.jpg?sz=128", "display_name": "Ryan Plant", "link": "https://stackoverflow.com/users/2854373/ryan-plant"}, "edited": false, "score": 0, "creation_date": 1484879079, "post_id": 41725970, "comment_id": 70702421, "body": "From the sounds of it, he actually wants the Rails application to exist in one of two states based on the connection status of one specific pre-determined user. He seems to be implementing a delivery order system for a takeout restaurant, where users can use a form to submit food orders, but only if the restaurant&#39;s computer is currently logged in to the dashboard that displays them. Which makes a lot more sense."}], "tags": [], "owner": {"reputation": 778, "user_id": 490148, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fdf74175f7ff2d2ff2c03c10ca2bce39?s=128&d=identicon&r=PG", "display_name": "virtuexru", "link": "https://stackoverflow.com/users/490148/virtuexru"}, "is_accepted": false, "score": 0, "last_activity_date": 1484762120, "last_edit_date": 1484762120, "creation_date": 1484761151, "answer_id": 41725970, "question_id": 41725911, "link": "https://stackoverflow.com/questions/41725911/how-can-i-check-whether-some-specific-user-has-an-internet-connection/41725970#41725970", "title": "How can I check whether some specific user has an internet connection?", "body": "<p>This has nothing to do with Ruby on Rails. </p>\n\n<p>Is this user accessing a site that's on a local network but no outside internet access? If so you can have a <code>before_filter</code> or some kind of method on your homepage that tries to ping <code>google.com</code> or some other site outside of the LAN to check for internet.</p>\n"}, {"comments": [{"owner": {"reputation": 17, "user_id": 7317558, "user_type": "registered", "profile_image": "https://graph.facebook.com/1351243764940602/picture?type=large", "display_name": "Nicio Barreto Santos", "link": "https://stackoverflow.com/users/7317558/nicio-barreto-santos"}, "edited": false, "score": 0, "creation_date": 1484766243, "post_id": 41726807, "comment_id": 70649249, "body": "It&#39;s not exactly what I am searching for. Offline.js alert if the user has connection or not, and I want to get only one user.   The owner of my application need to access internet to see the users requests (it is a food delivery).  So if he does not has internet connection, he can&#39;t check the requests.   I need to identify if he, the owner, has internet connection!"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 17, "user_id": 7317558, "user_type": "registered", "profile_image": "https://graph.facebook.com/1351243764940602/picture?type=large", "display_name": "Nicio Barreto Santos", "link": "https://stackoverflow.com/users/7317558/nicio-barreto-santos"}, "edited": false, "score": 0, "creation_date": 1484766329, "post_id": 41726807, "comment_id": 70649295, "body": "@NicioBarretoSantos: if the app is hosted somewhere in internet (say, heroku), then if manager&#39;s computer doesn&#39;t have internet connection, he won&#39;t be able to open the app. Doesn&#39;t that solve your problem?"}, {"owner": {"reputation": 17, "user_id": 7317558, "user_type": "registered", "profile_image": "https://graph.facebook.com/1351243764940602/picture?type=large", "display_name": "Nicio Barreto Santos", "link": "https://stackoverflow.com/users/7317558/nicio-barreto-santos"}, "edited": false, "score": 0, "creation_date": 1484768540, "post_id": 41726807, "comment_id": 70650577, "body": "Nope! I have the delivery app and a admin. The idea is to check if someone is logged on admin, you know?"}], "tags": [], "owner": {"reputation": 720, "user_id": 4336142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T562X.jpg?s=128&g=1", "display_name": "Aniket Rao", "link": "https://stackoverflow.com/users/4336142/aniket-rao"}, "is_accepted": false, "score": 0, "last_activity_date": 1484766237, "last_edit_date": 1484766237, "creation_date": 1484764027, "answer_id": 41726807, "question_id": 41725911, "link": "https://stackoverflow.com/questions/41725911/how-can-i-check-whether-some-specific-user-has-an-internet-connection/41726807#41726807", "title": "How can I check whether some specific user has an internet connection?", "body": "<p>Use <a href=\"http://github.hubspot.com/offline/docs/welcome/\" rel=\"nofollow noreferrer\">Offline.js</a></p>\n\n<ol>\n<li>Add offline.min.js file in your vendor/assets/javascripts</li>\n<li>Require it in your app/assets/javascripts/application.js as <code>//= require offline.min</code></li>\n<li><p>Add the following code in the same application.js file</p>\n\n<pre><code>$(document).ready(function() {\n    Offline.check();\n    Offline.on('up', function() {\n        $('a.btn').removeClass('disabled');\n    });\n    Offline.on('down', function() {\n        $('a.btn').addClass('disabled');\n    });\n});\n</code></pre></li>\n</ol>\n\n<p>This is in relevance to my code where I just disable all buttons when the connection goes off.</p>\n\n<p>The default behaviour of Offline.js adds a overlay with a please wait message until the internet connection comes back on.</p>\n\n<p>I prefer to handle it this way as it give better user experience. Disabling buttons is a subtle way of preventing a user from working.</p>\n"}, {"tags": [], "owner": {"reputation": 967, "user_id": 2854373, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-AGma4ADoqOg/AAAAAAAAAAI/AAAAAAAAuqk/UvigFQdQSm8/photo.jpg?sz=128", "display_name": "Ryan Plant", "link": "https://stackoverflow.com/users/2854373/ryan-plant"}, "is_accepted": false, "score": 0, "last_activity_date": 1484878907, "creation_date": 1484878907, "answer_id": 41755063, "question_id": 41725911, "link": "https://stackoverflow.com/questions/41725911/how-can-i-check-whether-some-specific-user-has-an-internet-connection/41755063#41755063", "title": "How can I check whether some specific user has an internet connection?", "body": "<p>So just to clarify, your Rails application exists for users to send food delivery requests to one specific user -- the shop preparing and sending that food out, presumably -- and you want users to be unable to create new delivery requests when the shop/owner isn't currently online?</p>\n\n<p>The simplest way to implement this would be to have an Admin Dashboard area where the owner can click a button to 'open the shop' and allow new orders. The worry, then, is about the shop's connection going offline, resulting in customers whose order are never received. To get around that, you can have each customer order start in an 'unconfirmed' state; when a new order is submitted, the owner is notified, and he can click a button to confirm it, letting the user know that yes, their order has been seen and is being made (and their credit card can be charged <em>then</em>, if you have online payment). This is probably the most reliable solution because what you really want is confirmation that a human has acknowledged the order.</p>\n\n<p>If you <em>do</em> want to tie it directly to online status, then you can have the Admin Dashboard page regularly check that it's being viewed. You could accomplish this with a websockets connection, <a href=\"http://guides.rubyonrails.org/action_cable_overview.html\" rel=\"nofollow noreferrer\">see Action Cable introduced in Rails 5</a>. The Admin Dashboard page opens a websocket connection upon login; the new-connection event sets <code>accepting_orders = true</code>. The websocket disconnect event sets <code>accepting_orders = false</code>, which will happen soon after their connection is dropped (make sure to check the timeout settings). Without websockets, you could have a background HTTP request occurring on an interval; <em>x</em> seconds without receiving that request could cause Rails to stop accepting new orders.</p>\n"}], "owner": {"reputation": 17, "user_id": 7317558, "user_type": "registered", "profile_image": "https://graph.facebook.com/1351243764940602/picture?type=large", "display_name": "Nicio Barreto Santos", "link": "https://stackoverflow.com/users/7317558/nicio-barreto-santos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1484878907, "creation_date": 1484760925, "last_edit_date": 1484768809, "question_id": 41725911, "link": "https://stackoverflow.com/questions/41725911/how-can-i-check-whether-some-specific-user-has-an-internet-connection", "title": "How can I check whether some specific user has an internet connection?", "body": "<p>I maintain a system built with Ruby on Rails. The client has asked me to prevent the system from working when a specific user has no internet connection.</p>\n\n<p>How would you do it?</p>\n\n<p>I need to check if a specific computer has internet connection!\nFor instance if my pc or your pc or my mother's pc has no internet connection!</p>\n"}, {"tags": ["ruby", "centos"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1484760771, "post_id": 41725800, "comment_id": 70646265, "body": "Try <code>gem install logger</code>"}, {"owner": {"reputation": 33, "user_id": 7168749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdbc2d8b7a0d3deffb8ab98ba84c2ef?s=128&d=identicon&r=PG&f=1", "display_name": "ravi", "link": "https://stackoverflow.com/users/7168749/ravi"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1484761152, "post_id": 41725800, "comment_id": 70646481, "body": "Tried it @SergioTulentsev..but still seeing the same issue  [root@test01]# gem install logger Fetching: logger-1.2.8.gem (100%) Successfully installed logger-1.2.8 Parsing documentation for logger-1.2.8 Installing ri documentation for logger-1.2.8 Done installing documentation for logger after 1 seconds 1 gem installed [root@test01]# sudo ./install  ./install:29:in `require&#39;: no such file to load -- logger (LoadError) \tfrom ./install:29"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1484761674, "post_id": 41725800, "comment_id": 70646749, "body": "why the <code>sudo</code>?"}, {"owner": {"reputation": 492, "user_id": 756369, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/MFp2Q.jpg?s=128&g=1", "display_name": "jsookiki", "link": "https://stackoverflow.com/users/756369/jsookiki"}, "edited": false, "score": 0, "creation_date": 1484779404, "post_id": 41725800, "comment_id": 70655983, "body": "What happens when you run <code>ruby -version</code> in the directory? Is it correct? Also, the <code>sudo</code> should not be necessary"}, {"owner": {"reputation": 33, "user_id": 7168749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdbc2d8b7a0d3deffb8ab98ba84c2ef?s=128&d=identicon&r=PG&f=1", "display_name": "ravi", "link": "https://stackoverflow.com/users/7168749/ravi"}, "edited": false, "score": 0, "creation_date": 1485205115, "post_id": 41725800, "comment_id": 70819226, "body": "It ran successfully when i just executed ./install but throwing error as required ruby version more than 1.9.XX ..using RVM i defaulted 2.2.4 but it is taking 1.8.7 as centos has 1.8.7 installed when the instance was triggered .."}], "owner": {"reputation": 33, "user_id": 7168749, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdbc2d8b7a0d3deffb8ab98ba84c2ef?s=128&d=identicon&r=PG&f=1", "display_name": "ravi", "link": "https://stackoverflow.com/users/7168749/ravi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1484762285, "creation_date": 1484760542, "last_edit_date": 1484762285, "question_id": 41725800, "link": "https://stackoverflow.com/questions/41725800/issue-with-ruby-running-install-file", "title": "Issue with Ruby running install file", "body": "<p>I have Ruby v1.8.7 on my host with Centos, but I need to have a version 2.xx to install a particular application. I installed RVM and set it to default to Ruby 2.2.4.</p>\n\n<pre><code>[root@test.01]# rvm list\nrvm rubies\n\n=* ruby-2.2.4 [ x86_64 ]\n\n=&gt; - current\n=* - current &amp;&amp; default\n* - default\n</code></pre>\n\n<p>When I run install file it is returning the error: </p>\n\n<pre><code>[root@test-01]# sudo ./install auto\n./install:29:in `require': no such file to load -- logger (LoadError)\nfrom ./install:29\n</code></pre>\n"}, {"tags": ["ruby", "routes", "sinatra"], "comments": [{"owner": {"reputation": 751, "user_id": 3705364, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39e606a3ac74f6b627761231ab5695dc?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen C", "link": "https://stackoverflow.com/users/3705364/stephen-c"}, "edited": false, "score": 1, "creation_date": 1484760145, "post_id": 41725585, "comment_id": 70645925, "body": "Please post your code here. You only have a readme file pushed"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1484760280, "post_id": 41725585, "comment_id": 70645995, "body": "by default in sinatra, the folder is <code>views</code> but you have <code>view</code>"}, {"owner": {"reputation": 347, "user_id": 3050230, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/193200241/picture?type=large", "display_name": "Dave C", "link": "https://stackoverflow.com/users/3050230/dave-c"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1484760407, "post_id": 41725585, "comment_id": 70646060, "body": "I&#39;ve now uploaded the rest of the code. @maxple apologies that was a typo."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1484760664, "post_id": 41725585, "comment_id": 70646198, "body": "@DaveC it&#39;s unlikely that people will be willing to go through the code in your Github repo, scanning the whole thing for errors. Anyway, the most important thing is the error itself, which you should paste here as text"}, {"owner": {"reputation": 347, "user_id": 3050230, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/193200241/picture?type=large", "display_name": "Dave C", "link": "https://stackoverflow.com/users/3050230/dave-c"}, "edited": false, "score": 0, "creation_date": 1484761318, "post_id": 41725585, "comment_id": 70646565, "body": "The error is that it posts the <b>Oops! You should enter a valid birthdate in the form of mmddyyyy. Try again!</b> in <code>index_controller.rb</code> when going to <code>localhost:9292&#47;people</code> as mentioned. There are no actual errors in the terminal. I was wondering if it was something that had changed in ruby or associated gems, otherwise it doesn&#39;t seem to make sense."}], "answers": [{"comments": [{"owner": {"reputation": 347, "user_id": 3050230, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/193200241/picture?type=large", "display_name": "Dave C", "link": "https://stackoverflow.com/users/3050230/dave-c"}, "edited": false, "score": 0, "creation_date": 1484768840, "post_id": 41728039, "comment_id": 70650749, "body": "That&#39;s what I thought, but I&#39;m following a course and it seems to have worked for everyone else? I&#39;m a little concerned that if I change my code then I&#39;ll lose track of the course."}, {"owner": {"reputation": 667, "user_id": 6141597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d52107448cce3dc1010f66ceb534270?s=128&d=identicon&r=PG&f=1", "display_name": "abax", "link": "https://stackoverflow.com/users/6141597/abax"}, "reply_to_user": {"reputation": 347, "user_id": 3050230, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/193200241/picture?type=large", "display_name": "Dave C", "link": "https://stackoverflow.com/users/3050230/dave-c"}, "edited": false, "score": 0, "creation_date": 1484771148, "post_id": 41728039, "comment_id": 70652008, "body": "I&#39;m just curious if you tried one of my suggestions to see if that was the cause of the error (the second one would be the place I would start). Also, the first suggestion is a pretty benign change, I don&#39;t think it would trip you up much going forward. Basically if the course asks you to link to <code>&#47;&lt;%= #{birthdate} %&gt;</code> you just have to change it to <code>&#47;birthdate&#47;&lt;%= #{birthdate} %&gt;</code>"}, {"owner": {"reputation": 347, "user_id": 3050230, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/193200241/picture?type=large", "display_name": "Dave C", "link": "https://stackoverflow.com/users/3050230/dave-c"}, "edited": false, "score": 0, "creation_date": 1484778089, "post_id": 41728039, "comment_id": 70655453, "body": "It does work through doing that, which is what I assumed. It obviously then doesn&#39;t allow a user to input their date of birth straight after the domain then though as intended. Just bizarre why it&#39;s not working when nobody else on course seems to have had the same issue."}, {"owner": {"reputation": 667, "user_id": 6141597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d52107448cce3dc1010f66ceb534270?s=128&d=identicon&r=PG&f=1", "display_name": "abax", "link": "https://stackoverflow.com/users/6141597/abax"}, "reply_to_user": {"reputation": 347, "user_id": 3050230, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/193200241/picture?type=large", "display_name": "Dave C", "link": "https://stackoverflow.com/users/3050230/dave-c"}, "edited": false, "score": 0, "creation_date": 1484778431, "post_id": 41728039, "comment_id": 70655596, "body": "Is it possible when you switched computers that the order of the controller files changed?"}, {"owner": {"reputation": 347, "user_id": 3050230, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/193200241/picture?type=large", "display_name": "Dave C", "link": "https://stackoverflow.com/users/3050230/dave-c"}, "edited": false, "score": 0, "creation_date": 1484778506, "post_id": 41728039, "comment_id": 70655630, "body": "How would they be arranged? By date?"}], "tags": [], "owner": {"reputation": 667, "user_id": 6141597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d52107448cce3dc1010f66ceb534270?s=128&d=identicon&r=PG&f=1", "display_name": "abax", "link": "https://stackoverflow.com/users/6141597/abax"}, "is_accepted": false, "score": 2, "last_activity_date": 1484768384, "creation_date": 1484768384, "answer_id": 41728039, "question_id": 41725585, "link": "https://stackoverflow.com/questions/41725585/sinatra-app-routes-not-working-as-anticipated/41728039#41728039", "title": "Sinatra App Routes Not Working As Anticipated", "body": "<p>I believe what is happening is that Sinatra is pattern matching your url <code>localhost:9292/people</code> to the first route of your index controller <code>get '/:birthdate'</code> instead of <code>get '/people'</code>. Sinatra takes the request and then checks each of the routes in order, the first one to match then handles the request.</p>\n\n<p>To test this:</p>\n\n<ul>\n<li>try changing <code>get '/:birthdate'</code> to <code>get '/birthdate/:birthdate'</code> (if it works you would then have to change any links to birthdate appropriately).</li>\n</ul>\n\n<p>or</p>\n\n<ul>\n<li>comment out the birthdate route</li>\n</ul>\n\n<p>or</p>\n\n<ul>\n<li>move all the routes into the same file and change the order they are arranged in to get a feel for how the pattern matching is occurring.</li>\n</ul>\n"}], "owner": {"reputation": 347, "user_id": 3050230, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/193200241/picture?type=large", "display_name": "Dave C", "link": "https://stackoverflow.com/users/3050230/dave-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 327, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1484768384, "creation_date": 1484759862, "last_edit_date": 1484760347, "question_id": 41725585, "link": "https://stackoverflow.com/questions/41725585/sinatra-app-routes-not-working-as-anticipated", "title": "Sinatra App Routes Not Working As Anticipated", "body": "<p>I've been doing a Ruby course on Skillcrush (still very much an amateur) and have come across a part of the course where my code just doesn't work.</p>\n\n<p>The app uses Sinatra, and is supposed to show the <code>views/people/index.erb</code> when going to <code>localhost:9292/people</code>, but instead it goes to the error page which it should when the wrong extension is given after <code>localhost:9292/</code> (normally a date format, but if anything else is entered it should bring an error).</p>\n\n<p>I had to switch computers half way through the course, so have a feeling it may be to do with my setup. I've used the code that they've supplied and have checked for discrepancies using <code>diff --brief -r dir1/ dir2/</code> and can only see some in my <code>Gemfile.lock</code> file. I'm using Ruby 2.4 due to issues with gems on pre-2.0 Ruby and wondered if this might be the case?</p>\n\n<p>My code can be seen <a href=\"https://github.com/davemate23/sinatra-mvc\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Can anyone see any glaring issues?</p>\n"}, {"tags": ["ruby", "ssh", "shoes"], "comments": [{"owner": {"reputation": 2470, "user_id": 1175090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bd5ca9726b8546e77c9fe21cae2f1e95?s=128&d=identicon&r=PG", "display_name": "Snake Sanders", "link": "https://stackoverflow.com/users/1175090/snake-sanders"}, "edited": false, "score": 0, "creation_date": 1484775986, "post_id": 41725367, "comment_id": 70654528, "body": "First it is important to know the version of Ruby you are working with. Secondly I would suggest to read about threads: <a href=\"http://ruby-doc.org/core-2.0.0/Thread.html\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.0.0/Thread.html</a>"}], "owner": {"reputation": 179, "user_id": 1418018, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b9b5fae51bb864131d6c4c41bf540d8a?s=128&d=identicon&r=PG&f=1", "display_name": "user1418018", "link": "https://stackoverflow.com/users/1418018/user1418018"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1484759227, "creation_date": 1484759227, "question_id": 41725367, "link": "https://stackoverflow.com/questions/41725367/open-main-window-and-close-login-ruby", "title": "Open main window and close login (ruby)", "body": "<p>I'm using Ruby Shoes.\nI have a login window that upon entering username / password logs into remote server.</p>\n\n<p>Upon completion I'd like to open new (main) window with some data. Thus, I need to:\n1. open new window and close the login window\n2. keep the ssh connection that login window opened</p>\n\n<p>What's the best way to do this? </p>\n"}, {"tags": ["ruby", "elasticsearch", "rubygems", "logstash", "jmx"], "answers": [{"comments": [{"owner": {"reputation": 247, "user_id": 6263000, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/YhKTX.jpg?s=128&g=1", "display_name": "Babak Tourani", "link": "https://stackoverflow.com/users/6263000/babak-tourani"}, "edited": false, "score": 0, "creation_date": 1485273993, "post_id": 41809254, "comment_id": 70852397, "body": "That&#39;s the problem Marc: logstash-plugin is a shell script which doesn&#39;t seem to be compatible with RHEL, because when you run it, it immediately executes the &quot;setup&quot; program and then complains about the second command in the shell script, which reads as: . &quot;$(cd <code>dirname $0</code>/..; pwd)/bin/logstash.lib.sh&quot;"}, {"owner": {"reputation": 66, "user_id": 7458237, "user_type": "registered", "profile_image": "https://graph.facebook.com/510519638/picture?type=large", "display_name": "Marc Murray", "link": "https://stackoverflow.com/users/7458237/marc-murray"}, "reply_to_user": {"reputation": 247, "user_id": 6263000, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/YhKTX.jpg?s=128&g=1", "display_name": "Babak Tourani", "link": "https://stackoverflow.com/users/6263000/babak-tourani"}, "edited": false, "score": 0, "creation_date": 1485277986, "post_id": 41809254, "comment_id": 70855141, "body": "I ran it on CentOS 7 with no issues. Maybe try another VM and then just tar up your package and bring it across?"}, {"owner": {"reputation": 247, "user_id": 6263000, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/YhKTX.jpg?s=128&g=1", "display_name": "Babak Tourani", "link": "https://stackoverflow.com/users/6263000/babak-tourani"}, "edited": false, "score": 0, "creation_date": 1485362549, "post_id": 41809254, "comment_id": 70897664, "body": "I&#39;m not running it on a VM. It&#39;s a real blade. Apparently (according to the &quot;issues&quot; page in the github repository) that matters."}], "tags": [], "owner": {"reputation": 66, "user_id": 7458237, "user_type": "registered", "profile_image": "https://graph.facebook.com/510519638/picture?type=large", "display_name": "Marc Murray", "link": "https://stackoverflow.com/users/7458237/marc-murray"}, "is_accepted": false, "score": 1, "last_activity_date": 1485183410, "creation_date": 1485183410, "answer_id": 41809254, "question_id": 41725326, "link": "https://stackoverflow.com/questions/41725326/how-to-install-logstash-input-jmx-in-rhel/41809254#41809254", "title": "How to install logstash-input-jmx in RHEL?", "body": "<p>Welcome to the house of fun. What I did was, which may be out of your scope but it might help....</p>\n\n<p><code>$logstash_location/bin/logstash-plugin list</code> </p>\n\n<p>(as you might expect this shows what can be installed to your instance)</p>\n\n<p><code>$logstash_location/bin/logstash-plugin install logstash-input-jmx</code></p>\n\n<p>The plugin itself should resolve its own dependencies. I was having all sort of problems in Docker, but I had to build my Logstash tarball external to the machine. Make sure connectivity is ok too. It's a service, not local to your machine.</p>\n"}, {"tags": [], "owner": {"reputation": 247, "user_id": 6263000, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/YhKTX.jpg?s=128&g=1", "display_name": "Babak Tourani", "link": "https://stackoverflow.com/users/6263000/babak-tourani"}, "is_accepted": false, "score": 0, "last_activity_date": 1485427769, "creation_date": 1485427769, "answer_id": 41871825, "question_id": 41725326, "link": "https://stackoverflow.com/questions/41725326/how-to-install-logstash-input-jmx-in-rhel/41871825#41871825", "title": "How to install logstash-input-jmx in RHEL?", "body": "<p><a href=\"http://mattharris.org/2016/03/22/logstash-install-amazon-linux/\" rel=\"nofollow noreferrer\">This post</a> clearly describes the steps required to install a \"community\" logstash plugin, and can be used to install jmx plugin on RHEL. I've tried it on RHEL 7.3.</p>\n\n<p>The main thing to consider is that in RHEL 7.3 the logstash can be found under /usr/share/logstash/ rather than /opt/logstash</p>\n"}], "owner": {"reputation": 247, "user_id": 6263000, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/YhKTX.jpg?s=128&g=1", "display_name": "Babak Tourani", "link": "https://stackoverflow.com/users/6263000/babak-tourani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 344, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1485427769, "creation_date": 1484759080, "last_edit_date": 1484819823, "question_id": 41725326, "link": "https://stackoverflow.com/questions/41725326/how-to-install-logstash-input-jmx-in-rhel", "title": "How to install logstash-input-jmx in RHEL?", "body": "<p>Has anyone installed <strong>logstash-input-jmx</strong> (or any other \"community\" plugin for Logstash) in RHEL? </p>\n\n<p>How did you manage the Ruby/gem dependencies? </p>\n\n<p>After installing a recent version of Ruby, RubyGems, and Rails, the development/runtime gem dependencies have to be resolved, but attempting to install any of the gems mentioned in <a href=\"https://rubygems.org/gems/logstash-input-jmx\" rel=\"nofollow noreferrer\">here</a>, would lead to endless missing dependencies ... </p>\n\n<p>Are there any packaged versions of Logstash JMX plugin around?</p>\n\n<p>Thanks,</p>\n\n<p>Babak.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "multithreading", "join", "pool"], "answers": [{"tags": [], "owner": {"reputation": 5250, "user_id": 5154683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae81933dce5ced9ec019414bbd4f0f4?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Nubel", "link": "https://stackoverflow.com/users/5154683/robert-nubel"}, "is_accepted": true, "score": 3, "last_activity_date": 1484759252, "creation_date": 1484759252, "answer_id": 41725378, "question_id": 41725103, "link": "https://stackoverflow.com/questions/41725103/how-do-i-implmeent-join-in-my-rails-thread-pool/41725378#41725378", "title": "How do I implmeent &quot;join&quot; in my Rails thread pool?", "body": "<p>From <a href=\"http://ruby-concurrency.github.io/concurrent-ruby/Concurrent/ThreadPoolExecutor.html#wait_for_termination-instance_method\" rel=\"nofollow noreferrer\">the docs</a>, after calling <code>pool.shutdown</code>, you can call <code>pool.wait_for_termination</code> to block until all threads have completed.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "accepted_answer_id": 41725378, "answer_count": 1, "score": 1, "last_activity_date": 1484759252, "creation_date": 1484758422, "question_id": 41725103, "link": "https://stackoverflow.com/questions/41725103/how-do-i-implmeent-join-in-my-rails-thread-pool", "title": "How do I implmeent &quot;join&quot; in my Rails thread pool?", "body": "<p>I'm using Rails 5.0 with Ruby 2.4.  I have this gem</p>\n\n<pre><code>gem 'concurrent-ruby'\n</code></pre>\n\n<p>I want to load up a thread pool with work, but then I don't want execution to continue unti everything in the thradpool has finished executing.  SO I tried this ...  </p>\n\n<pre><code>  pool = Concurrent::FixedThreadPool.new(@concurrent_threads) \n  links.each do |link|\n    pool.post do\n      ... do work ...\n    end \n  end\n  pool.shutdown \n</code></pre>\n\n<p>But this doesn't seem to be working.  That is, there is code executed after the \"pool.shutdown\" line and I was hoping that would work somewhat like a \".join,\" that is, holding execution until everything had completed.  How do I do that?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1484760444, "post_id": 41725080, "comment_id": 70646079, "body": "Are you looking for <code>hash.dig(*args)</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 424, "user_id": 2249869, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d1e52cf17b7cf32d599f71d02fac1be5?s=128&d=identicon&r=PG", "display_name": "userFriendly", "link": "https://stackoverflow.com/users/2249869/userfriendly"}, "edited": false, "score": 0, "creation_date": 1484760564, "post_id": 41725787, "comment_id": 70646147, "body": "where did you find the documentation for that? I was looking at this <a href=\"http://ruby-doc.org/core-2.3.0_preview1/Hash.html#method-i-dig\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.3.0_preview1/Hash.html#method-i-dig</a>"}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1484763217, "post_id": 41725787, "comment_id": 70647620, "body": "The keyword here is the splash operator <code>*</code> not with <code>dig</code> itself."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 424, "user_id": 2249869, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d1e52cf17b7cf32d599f71d02fac1be5?s=128&d=identicon&r=PG", "display_name": "userFriendly", "link": "https://stackoverflow.com/users/2249869/userfriendly"}, "edited": false, "score": 1, "creation_date": 1484765963, "post_id": 41725787, "comment_id": 70649125, "body": "@userFriendly: the very link you posted shows that dig takes one or more keys: <code>dig(key, \u2026)</code>"}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1484789853, "post_id": 41725787, "comment_id": 70658969, "body": "I don&#39;t think they want functional-style, we should not encourage that in Ruby."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1484794105, "post_id": 41725787, "comment_id": 70660029, "body": "@akuhn i don&#39;t understand why you don&#39;t encourage functional practices in ruby. I wasn&#39;t trying to say it&#39;s an alternative to OOP, I was meaning that the syntax OP used is akin to the functional style (i&#39;ve been learning Erlang)."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 3, "last_activity_date": 1484760502, "creation_date": 1484760502, "answer_id": 41725787, "question_id": 41725080, "link": "https://stackoverflow.com/questions/41725080/dig-wrapper-method-to-accept-a-dynamic-number-of-variables/41725787#41725787", "title": "#dig wrapper method to accept a dynamic number of variables", "body": "<p>Hash#dig (defined in Ruby 2.3) already does this:</p>\n\n<pre><code>hash = { a: { b: 1 } }\nhash.dig(:a, :b) == hash.dig(*[:a, :b])\n</code></pre>\n\n<p>If you want to it more functional style (where you pass the hash as an argument instead of calling the method on it), it's easy:</p>\n\n<pre><code>def hash_dig(hash, *args)\n  hash.dig(*args)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 5, "last_activity_date": 1484766369, "last_edit_date": 1484766369, "creation_date": 1484765991, "answer_id": 41727357, "question_id": 41725080, "link": "https://stackoverflow.com/questions/41725080/dig-wrapper-method-to-accept-a-dynamic-number-of-variables/41727357#41727357", "title": "#dig wrapper method to accept a dynamic number of variables", "body": "<p><a href=\"http://ruby-doc.org/core-2.3.0/Hash.html#method-i-dig\" rel=\"nofollow noreferrer\">Hash#dig</a> was bestowed upon us in Ruby v2.3. To support earlier Ruby versions you can use <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-reduce\" rel=\"nofollow noreferrer\">Enumerable#reduce</a> (aka <code>inject</code>). This is how we did it when I was a kid.</p>\n\n<pre><code>def dig_it(h,*keys)\n  keys.reduce(h) { |obj,k| obj &amp;&amp; obj[k] }\nend\n\nh = { a: { b: 1 } }\n\ndig_it(h, :a, :b)\n  #=&gt; 1 \ndig_it(h, :a)\n  #=&gt; {:b=&gt;1} \ndig_it(h, :a, :c)\n  #=&gt; nil \ndig_it(h, :c, :b)\n  #=&gt; nil \n</code></pre>\n\n<p>If <code>obj</code> is a hash, as it is initially (<code>h</code>), when <code>k</code> is passed to the block <code>obj[k] #=&gt; nil</code> if <code>obj</code> does not have a key <code>k</code> (or if <code>obj</code> has a key <code>k</code> whose value if <code>nil</code>), in  which case <code>obj &amp;&amp; obj[k] #=&gt; obj &amp;&amp; nil #=&gt; nil</code>. The block calculation will therefore be <code>obj &amp;&amp; obj[k] #=&gt; nil &amp;&amp; obj[k] #=&gt; nil</code> for each of the remaining elements of <code>keys</code> that are passed to the block. (<code>nil[k]</code> would raise an exception but it is never executed.) If the hash <code>obj</code> has a key <code>k</code> with value <code>false</code>, the same outcome will result except <code>false</code> (rather than <code>nil</code>) will be returned.</p>\n"}], "owner": {"reputation": 424, "user_id": 2249869, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d1e52cf17b7cf32d599f71d02fac1be5?s=128&d=identicon&r=PG", "display_name": "userFriendly", "link": "https://stackoverflow.com/users/2249869/userfriendly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 0, "accepted_answer_id": 41725787, "answer_count": 2, "score": 0, "last_activity_date": 1484766369, "creation_date": 1484758365, "last_edit_date": 1484758779, "question_id": 41725080, "link": "https://stackoverflow.com/questions/41725080/dig-wrapper-method-to-accept-a-dynamic-number-of-variables", "title": "#dig wrapper method to accept a dynamic number of variables", "body": "<p>I'm trying to write a method that accepts an unknown number of arguments and performs a Hash#dig on them.</p>\n\n<pre><code>def unknown_dig(hash, *args)\n  # do some magic?\n  hash.dig(non_array_args)\nend\n\n#example usage\nunknown_dig(hash, 'a', 'b', 'c')\n</code></pre>\n\n<p>Is this possible? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "minitest", "railstutorial.org"], "answers": [{"tags": [], "owner": {"reputation": 425, "user_id": 4814945, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/QEx3I.jpg?s=128&g=1", "display_name": "myself", "link": "https://stackoverflow.com/users/4814945/myself"}, "is_accepted": false, "score": 4, "last_activity_date": 1484761356, "creation_date": 1484761356, "answer_id": 41726026, "question_id": 41724744, "link": "https://stackoverflow.com/questions/41724744/following-rails-tutorial-and-a-syntax-error-is-stopping-a-test-passing/41726026#41726026", "title": "Following Rails Tutorial and a syntax error is stopping a test passing", "body": "<p>You are following the Hartl rails tutorial so you copy and pasted the information or forgot to fill in the info. </p>\n\n<p>On line 15, you have <code>'div#&lt;CSS id for error explanation&gt;'</code> It should instead be the CSS for error explanation... <code>'div#error_explanation'</code> and the following <code>'div.field_with_errors'</code></p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7143626"}, "is_accepted": false, "score": 0, "last_activity_date": 1519654216, "creation_date": 1519654216, "answer_id": 48990435, "question_id": 41724744, "link": "https://stackoverflow.com/questions/41724744/following-rails-tutorial-and-a-syntax-error-is-stopping-a-test-passing/48990435#48990435", "title": "Following Rails Tutorial and a syntax error is stopping a test passing", "body": "<p>in assert_select you asked it to go to 'div' in css \nso you need just to write its name </p>\n"}], "owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1389, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1568122168, "creation_date": 1484757504, "last_edit_date": 1568122168, "question_id": 41724744, "link": "https://stackoverflow.com/questions/41724744/following-rails-tutorial-and-a-syntax-error-is-stopping-a-test-passing", "title": "Following Rails Tutorial and a syntax error is stopping a test passing", "body": "<p>Unfortunately I am receiving a syntax error that is hiding for me. Could anyone help? I understand it is relevant to the method 'assert_select' for the divs, but I am not sure why it is not passing.</p>\n\n<p>My error: </p>\n\n<pre><code>Error:\nUsersSignupTest#test_invalid_signup_information:\nNokogiri::CSS::SyntaxError: unexpected '#' after '[#&lt;Nokogiri::CSS::Node:0x0055b3736715e8 @type=:ELEMENT_NAME, @value=[\"div\"]&gt;]'\n    test/integration/users_signup_test.rb:15:in `block in &lt;class:UsersSignupTest&gt;'\n</code></pre>\n\n<p>My test:</p>\n\n<pre><code>require 'test_helper'\n\nclass UsersSignupTest &lt; ActionDispatch::IntegrationTest\n    test \"invalid signup information\" do\n        get signup_path\n        assert_no_difference 'User.count' do\n            post users_path, params: { user: {\n                name: \"\",\n                email: \"user@invalid\",\n                password: \"foo\",\n                password_confirmation: \"bar\"\n                }}\n            end\n            assert_template 'users/new'\n            assert_select 'div#&lt;CSS id for error explanation&gt;'\n            assert_select 'div.&lt;CSS class for field with error&gt;'\n    end\n</code></pre>\n\n<p>Code it is testing. Users/new:</p>\n\n<pre><code>&lt;% provide(:title, \"sign up\") %&gt;\n&lt;h1&gt;Sign up&lt;/h1&gt;\n\n&lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-6 col-md-offset-3\"&gt;\n        &lt;%= form_for(@user, url: signup_path) do |f| %&gt;\n            &lt;%= render 'shared/error_messages' %&gt;\n            &lt;%= f.label :name %&gt;\n            &lt;%= f.text_field :name, class: \"form-control\" %&gt;\n\n            &lt;%= f.label :email %&gt;\n            &lt;%= f.email_field :email, class: \"form-control\" %&gt;\n\n            &lt;%= f.label :password %&gt;\n            &lt;%= f.password_field :password, class: \"form-control\" %&gt;\n\n            &lt;%= f.label :password_confirmation, \"Confirmation\" %&gt;\n            &lt;%= f. password_field :password_confirmation, class: \"form-control\" %&gt;\n\n            &lt;%= f.submit \"Create my account\", class: \"btn btn-primary\" %&gt;\n\n            &lt;% end %&gt;\n\n        &lt;/div&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>Shared/_error_messages:</p>\n\n<pre><code>&lt;% if @user.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n        &lt;div class=\"alert alert-danger\"&gt;\n            The form contains &lt;%= pluralize(@user.errors.count, \"error\") %&gt;.\n        &lt;/div&gt;\n      &lt;ul&gt;\n        &lt;% @user.errors.full_messages.each do |msg| %&gt;\n            &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;\n        &lt;% end %&gt;\n      &lt;/ul&gt;\n     &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "image-processing", "carrierwave", "minimagick"], "comments": [{"owner": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "edited": false, "score": 0, "creation_date": 1484762282, "post_id": 41724621, "comment_id": 70647043, "body": "did you try <code>resize_to_fill</code> ?"}, {"owner": {"reputation": 1, "user_id": 5540705, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GMFfz_nnH9s/AAAAAAAAAAI/AAAAAAAAADg/CrrvUeZigak/photo.jpg?sz=128", "display_name": "RyanD", "link": "https://stackoverflow.com/users/5540705/ryand"}, "reply_to_user": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "edited": false, "score": 0, "creation_date": 1484763892, "post_id": 41724621, "comment_id": 70647994, "body": "Yes and it does not seem to change t in any way. Any idea as to why no resizing of any sort is working?"}, {"owner": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "edited": false, "score": 0, "creation_date": 1484764021, "post_id": 41724621, "comment_id": 70648065, "body": "Do you have all required gems installed ?"}, {"owner": {"reputation": 1, "user_id": 5540705, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GMFfz_nnH9s/AAAAAAAAAAI/AAAAAAAAADg/CrrvUeZigak/photo.jpg?sz=128", "display_name": "RyanD", "link": "https://stackoverflow.com/users/5540705/ryand"}, "reply_to_user": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "edited": false, "score": 0, "creation_date": 1484764467, "post_id": 41724621, "comment_id": 70648331, "body": "Yes and have ran bundle install too."}], "owner": {"reputation": 1, "user_id": 5540705, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-GMFfz_nnH9s/AAAAAAAAAAI/AAAAAAAAADg/CrrvUeZigak/photo.jpg?sz=128", "display_name": "RyanD", "link": "https://stackoverflow.com/users/5540705/ryand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 542, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1484845771, "creation_date": 1484757098, "last_edit_date": 1484845771, "question_id": 41724621, "link": "https://stackoverflow.com/questions/41724621/image-uploading-issue-with-carrierwave-and-minimagick-ruby-on-rails", "title": "Image uploading issue with Carrierwave and Minimagick (Ruby on rails)", "body": "<p>I am using Carrierwave to upload images and that works fine but I am now trying to use Minimagick  to process these uploaded images.</p>\n\n<p><strong>What is going on?</strong></p>\n\n<p>The images still upload as well as their thumb version, however both images are exactly the same size.</p>\n\n<p>Here is the uploader code:</p>\n\n<pre><code>class FileUploader &lt; CarrierWave::Uploader::Base\n\n  include CarrierWave::MiniMagick\n\n  # Choose what kind of storage to use for this uploader:\n  storage :file\n\n  # Override the directory where uploaded files will be stored.\n  def store_dir\n    \"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}\"\n  end\n\n  # Create different versions of your uploaded files:\n  version :thumb do\n    process :resize_to_fit =&gt; [100, 100]\n  end\n\n  # Add a white list of extensions which are allowed to be uploaded.\n  def extension_white_list\n    %w(jpg jpeg gif png)\n  end\n\nend\n</code></pre>\n\n<p>And here is how I am calling it:</p>\n\n<pre><code> &lt;%= image_tag example.my_file.url(:thumb).to_s %&gt;\n</code></pre>\n\n<p>I dont think it is anything to do with the way I am calling it because the two files created by all this are the same, so sound slike its to do with processing it on upload.</p>\n\n<p>Here is the folder created for each object:\n<a href=\"https://i.stack.imgur.com/2yQrN.png\" rel=\"nofollow noreferrer\">Image</a></p>\n\n<p><strong>--- Fixed ---</strong></p>\n\n<p>The issue was ImageMagick. It was not properly configured on my machine so that means no gem that deals with image processing (Paperclip, Minimagick or Dragonfly) could complete any image manipulation.</p>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1484751839, "post_id": 41722322, "comment_id": 70640062, "body": "<a href=\"http://stackoverflow.com/questions/1465569/ruby-how-can-i-copy-a-variable-without-pointing-to-the-same-object\">might be helpful</a>"}], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 3, "last_activity_date": 1484751986, "last_edit_date": 1484751986, "creation_date": 1484750768, "answer_id": 41722375, "question_id": 41722322, "link": "https://stackoverflow.com/questions/41722322/why-is-append-a-value-to-an-array-in-hash-will-also-modify-the-other-variable-th/41722375#41722375", "title": "Why is append a value to an array in hash will also modify the other variable that have it assigned?", "body": "<p>Because value of <code>b</code> and value of <code>c</code> is the same object (check out <a href=\"http://ruby-doc.org/core-2.4.0/Object.html#method-i-object_id\" rel=\"nofollow noreferrer\">Object#<code>object_id</code></a>):</p>\n\n<pre><code>b.object_id == c.object_id\n#=&gt; true\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1484752296, "post_id": 41722714, "comment_id": 70640406, "body": "How would you use <code>dup</code> in the OP&#39;s example?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1484752372, "post_id": 41722714, "comment_id": 70640472, "body": "You&#39;d need Rails <code>deep_dup</code>"}], "tags": [], "owner": {"reputation": 5355, "user_id": 452079, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/4fb85f91e35202c72ca16d54873b10c4?s=128&d=identicon&r=PG", "display_name": "rohit89", "link": "https://stackoverflow.com/users/452079/rohit89"}, "is_accepted": false, "score": 0, "last_activity_date": 1484753154, "last_edit_date": 1484753154, "creation_date": 1484751761, "answer_id": 41722714, "question_id": 41722322, "link": "https://stackoverflow.com/questions/41722322/why-is-append-a-value-to-an-array-in-hash-will-also-modify-the-other-variable-th/41722714#41722714", "title": "Why is append a value to an array in hash will also modify the other variable that have it assigned?", "body": "<p>All objects in ruby are assigned by reference with the exception of True, False, Nil and Fixnums which are handled specially.</p>\n\n<p>You can test it out by looking at <code>object_id</code></p>\n\n<pre><code>irb(main):001:0&gt; a = [1,2,3]\n=&gt; [1, 2, 3]\nirb(main):002:0&gt; b = a\n=&gt; [1, 2, 3]\nirb(main):003:0&gt; a.object_id == b.object_id\n=&gt; true\n</code></pre>\n\n<p>To create a copy of an object, use <code>.dup</code>.</p>\n\n<pre><code>irb(main):005:0&gt; b = a.dup\n=&gt; [1, 2, 3]\nirb(main):006:0&gt; a.object_id == b.object_id\n=&gt; false\n</code></pre>\n\n<p>For your example, you need a deep copy, so you can do</p>\n\n<pre><code>Marshal.load(Marshal.dump(hash))\n</code></pre>\n\n<p>So,</p>\n\n<pre><code>irb(main):037:0&gt; a = {a: []}\n=&gt; {:a=&gt;[]}\nirb(main):038:0&gt; b = Marshal.load(Marshal.dump(a))\n=&gt; {:a=&gt;[]}\nirb(main):039:0&gt; b[:a] &lt;&lt; 1\n=&gt; [1]\nirb(main):040:0&gt; b\n=&gt; {:a=&gt;[1]}\nirb(main):041:0&gt; a\n=&gt; {:a=&gt;[]}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1484753030, "post_id": 41723040, "comment_id": 70640991, "body": "It&#39;s okay to recommend your own library, but you must disclose your affiliation."}, {"owner": {"reputation": 1089, "user_id": 3512592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/189408ac24ce8bae9dc749c842c15037?s=128&d=identicon&r=PG&f=1", "display_name": "Devon Parsons", "link": "https://stackoverflow.com/users/3512592/devon-parsons"}, "edited": false, "score": 0, "creation_date": 1484753512, "post_id": 41723040, "comment_id": 70641354, "body": "Why isn&#39;t <code>.dup</code> enough? What does <code>full_dup</code> do that makes it appropriate here? &quot;You should use regular dup when that method is all you need.&quot; - when is that?"}, {"owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "edited": false, "score": 0, "creation_date": 1484754754, "post_id": 41723040, "comment_id": 70642205, "body": "The dup method performs a shallow copy. The full_dup method performs a deep copy. Shallow copies are quicker than deep copies, but they&#39;re... shallow. This is all mentioned in my answer. I could add that a shallow copy makes a copy of the container object, but not its contents. A deep copy, also copies the container object, and its contents and their contents and their contents and so on for a deep as is needed. As can be expected, this takes quite a bit longer to do and should be avoided if not needed. When is it needed? You need to figure that out and exercise judgement."}], "tags": [], "owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "is_accepted": false, "score": 0, "last_activity_date": 1484753257, "last_edit_date": 1484753257, "creation_date": 1484752692, "answer_id": 41723040, "question_id": 41722322, "link": "https://stackoverflow.com/questions/41722322/why-is-append-a-value-to-an-array-in-hash-will-also-modify-the-other-variable-th/41723040#41723040", "title": "Why is append a value to an array in hash will also modify the other variable that have it assigned?", "body": "<p>As mentioned in earlier, excellent answers, the problem you face is that a and b are the same object. Another answer (later deleted) recommended using the dup method, if a shallow copy was sufficient. Problem is that in your scenarios, a shallow copy is NOT good enough.</p>\n\n<p>I propose to try the full_dup gem. This gem adds a new method, called full_dup. A full_dup does a deep copy of your objects. So given your example:</p>\n\n<pre><code>require 'full_dup'\n\nhash_of_array = { a: [] }\nb = hash_of_array.full_dup\nc = hash_of_array.full_dup\n\nb[:a] &lt;&lt; 1\n\nputs b # =&gt; { a: [1] }\nputs c # =&gt; { a: [] }\n</code></pre>\n\n<p>As an aside, full_dup is no speed demon. You should use regular dup when that method is all you need.</p>\n\n<p>Oops; Forgot to mention. I am the author of the full_dup gem.</p>\n"}, {"comments": [{"owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "edited": false, "score": 1, "creation_date": 1484753181, "post_id": 41723052, "comment_id": 70641103, "body": "I have a hard time dealing with gallows humor since my brother, John, is also dead."}, {"owner": {"reputation": 1690, "user_id": 3034747, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ac87bcd269dafa9171c0bcb5baa209ac?s=128&d=identicon&r=PG", "display_name": "Yana Agun Siswanto", "link": "https://stackoverflow.com/users/3034747/yana-agun-siswanto"}, "edited": false, "score": 0, "creation_date": 1484754496, "post_id": 41723052, "comment_id": 70642038, "body": "It doesn&#39;t look like a pointer to me, but that&#39;s acceptable answer."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 1690, "user_id": 3034747, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ac87bcd269dafa9171c0bcb5baa209ac?s=128&d=identicon&r=PG", "display_name": "Yana Agun Siswanto", "link": "https://stackoverflow.com/users/3034747/yana-agun-siswanto"}, "edited": false, "score": 1, "creation_date": 1484754945, "post_id": 41723052, "comment_id": 70642331, "body": "@bekicot, assignment in C would work exactly the same way. Just think about it on higher level - <code>=</code> just <i>names</i> what is on the right side."}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1484763542, "post_id": 41723052, "comment_id": 70647803, "body": "Could we maybe find an example that is more inline with Ruby&#39;s value of programmer happiness rather than killed people? Maybe John is winning the lottery instead?"}, {"owner": {"reputation": 1690, "user_id": 3034747, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ac87bcd269dafa9171c0bcb5baa209ac?s=128&d=identicon&r=PG", "display_name": "Yana Agun Siswanto", "link": "https://stackoverflow.com/users/3034747/yana-agun-siswanto"}, "edited": false, "score": 0, "creation_date": 1484792260, "post_id": 41723052, "comment_id": 70659603, "body": "@ndn I upvoted you because giving me a new mindset. Thanks."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 6, "last_activity_date": 1484752744, "creation_date": 1484752744, "answer_id": 41723052, "question_id": 41722322, "link": "https://stackoverflow.com/questions/41722322/why-is-append-a-value-to-an-array-in-hash-will-also-modify-the-other-variable-th/41723052#41723052", "title": "Why is append a value to an array in hash will also modify the other variable that have it assigned?", "body": "<p>I know a person called John. Some call him Johny. Johny got shot today. Why did John also get shot?</p>\n\n<hr>\n\n<pre><code>foo = _something_\n</code></pre>\n\n<p>Simply gives the alternative name <code>foo</code> to <code>_something_</code>. It doesn't clone it or do any other shenanigans. </p>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 0, "last_activity_date": 1484752787, "last_edit_date": 1495540916, "creation_date": 1484752787, "answer_id": 41723069, "question_id": 41722322, "link": "https://stackoverflow.com/questions/41722322/why-is-append-a-value-to-an-array-in-hash-will-also-modify-the-other-variable-th/41723069#41723069", "title": "Why is append a value to an array in hash will also modify the other variable that have it assigned?", "body": "<p>In your example, and as mentioned by <a href=\"https://stackoverflow.com/a/41722375/6419007\">@AndreyDeineko</a>, <code>b</code> and <code>c</code> basically are the same object.</p>\n\n<p>It's not needed to exhibit the behaviour you're confused about, though.</p>\n\n<p>What's important is that they hold a reference to the same array :</p>\n\n<pre><code>array = []\n\nb = { b: array }\nc = { c: array }\n\nputs b == c\n#=&gt; false\n\nputs b.object_id == c.object_id\n#=&gt; false\n\nputs b[:b].object_id == c[:c].object_id\n#=&gt; true\n\nb[:b] &lt;&lt; 'test'\n\np b\n# {:b=&gt;[\"test\"]}\np c\n# {:c=&gt;[\"test\"]}\n</code></pre>\n"}], "owner": {"reputation": 1690, "user_id": 3034747, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ac87bcd269dafa9171c0bcb5baa209ac?s=128&d=identicon&r=PG", "display_name": "Yana Agun Siswanto", "link": "https://stackoverflow.com/users/3034747/yana-agun-siswanto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 41722375, "answer_count": 5, "score": 1, "last_activity_date": 1484753519, "creation_date": 1484750617, "last_edit_date": 1484753519, "question_id": 41722322, "link": "https://stackoverflow.com/questions/41722322/why-is-append-a-value-to-an-array-in-hash-will-also-modify-the-other-variable-th", "title": "Why is append a value to an array in hash will also modify the other variable that have it assigned?", "body": "<p>Sample code:</p>\n\n<pre><code>hash_of_array = { a: [] }\nb = hash_of_array\nc = hash_of_array\n\nb[:a] &lt;&lt; 1\n\nputs b # =&gt; { a: [1] }\nputs c # =&gt; { a: [1] }\n</code></pre>\n\n<p>Why do both variable have 1 in their array? I only appended it on variable <code>b</code>.</p>\n\n<p><strong>Tried on</strong></p>\n\n<ul>\n<li>Ruby Version 2.3.1, 2.4.0</li>\n<li>Rbenv</li>\n</ul>\n"}, {"tags": ["ruby", "math", "graphics", "3d", "sketchup"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1484750191, "post_id": 41722074, "comment_id": 70638859, "body": "It&#39;s not clear what the problem is. Could you give examples with a simple object, a rotation definition, what you expect and what you get? Complete Ruby code would also be helpful in order to test it."}, {"owner": {"reputation": 89, "user_id": 2667455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5389b574a5dd3b086340b38a6f330a97?s=128&d=identicon&r=PG", "display_name": "user2667455", "link": "https://stackoverflow.com/users/2667455/user2667455"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1484750486, "post_id": 41722074, "comment_id": 70639088, "body": "i added sample transform definition, object is described by component tree, each child inherits transform from parent, i think i am close, but i cannot figure if my rotations are OK ;/,, i am expecting result image showed above and i am getting something which is close..."}, {"owner": {"reputation": 2681, "user_id": 486990, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b0220a4b0ec42f2ddc610d0c187b1ee1?s=128&d=identicon&r=PG", "display_name": "thomthom", "link": "https://stackoverflow.com/users/486990/thomthom"}, "edited": false, "score": 0, "creation_date": 1484889865, "post_id": 41722074, "comment_id": 70705226, "body": "What are you trying to do? What is the setup before you start transforming? Can you provide a snipped that is self-contained? The current one contain a number of variables that isn&#39;t defined and hence hard for us to guess exactly what they are. You mention &quot;i want to rotate given object around axis&quot; - can we focus on that perhaps? What axis? What object?"}], "owner": {"reputation": 89, "user_id": 2667455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5389b574a5dd3b086340b38a6f330a97?s=128&d=identicon&r=PG", "display_name": "user2667455", "link": "https://stackoverflow.com/users/2667455/user2667455"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 790, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1484754635, "creation_date": 1484749902, "last_edit_date": 1484754635, "question_id": 41722074, "link": "https://stackoverflow.com/questions/41722074/sketchup-ruby-translate-rotate-scale", "title": "Sketchup ruby translate, rotate, scale", "body": "<p>I am developing plugin to load multiple bojects to model and performing multiple transformations\nI am working almost one week i go through sketchucation, sketchup ruby documentation, transformation matrices topics etc and i cannot figure what i am doing wrong.\nI am 100% sure that scalling and translating works, but i dont know what about rotations, basiaclly i want to rotate given object around axis.\nI would really appreciate any kind of professional ruby plugin makers help!!!\nMy target is to achieve such component:\n<a href=\"https://i.stack.imgur.com/36SZm.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/36SZm.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>but my current result is:</p>\n\n<p><a href=\"https://i.stack.imgur.com/TwHUe.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TwHUe.jpg\" alt=\"result\"></a></p>\n\n<p>My code is here, i know it is not shortest:</p>\n\n<pre><code>#1)Scale\n    scale_transformation = Geom::Transformation.scaling(@transform.scale_vector[0], \n                                                        @transform.scale_vector[1], \n                                                        @transform.scale_vector[2])                                                                                                                                            \n    #2)Rotate \n    vector = Geom::Vector3d.new(1, 0, 0)#x axis\n    rotate_transformation_x = Geom::Transformation.rotation(@transform.transformation.origin, vector, @transform.rotation_vector[0].degrees)#degrees-&gt;radians\n    vector = Geom::Vector3d.new(0, 1, 0)#y axis\n    rotate_transformation_y = Geom::Transformation.rotation(@transform.transformation.origin, vector, @transform.rotation_vector[1].degrees)#degrees-&gt;radians\n    vector = Geom::Vector3d.new(0, 0, 1)#z axis\n    rotate_transformation_z = Geom::Transformation.rotation(@transform.transformation.origin, vector, @transform.rotation_vector[2].degrees)#degrees-&gt;radians\n\n    #if rotate is [0, 0, 0] than rotate transformation is identity matrix:\n    if(@transform.rotation_vector[0] == 0 )\n        rotate_transformation_x = Geom::Transformation.new()\n    end\n    if(@transform.rotation_vector[1] == 0 )\n        rotate_transformation_y = Geom::Transformation.new()\n    end\n    if(@transform.rotation_vector[2] == 0 ) \n        rotate_transformation_z = Geom::Transformation.new()\n    end\n    rotate_transformation = rotate_transformation_x * rotate_transformation_y * rotate_transformation_z\n\n    #3)Translate        \n    translate_transformation = Geom::Transformation.translation(Geom::Vector3d.new(\n                                                                            meters_to_inches(@transform.translation_vector[0]),\n                                                                            meters_to_inches(@transform.translation_vector[1]),\n                                                                            meters_to_inches(@transform.translation_vector[2])\n                                                                            ))\n    #if translate is [0, 0, 0] than translate transformation is identity matrix:\n    if(@transform.translation_vector[0] == 0 &amp;&amp; @transform.translation_vector[1] == 0 &amp;&amp; @transform.translation_vector[2] == 0 )\n        translate_transformation = Geom::Transformation.new()\n    end\n    #using overloaded operator '*' for matrixes\n\n    puts @path + \"\\r\\nFROM PARENT : \" + @transform.to_s + \", matrix = \" + @transform.transformation.to_a.each_slice(4).inject { |str, row| \"#{str}\\r\\n#{row}\" }\n    @transform.transformation = (translate_transformation * rotate_transformation * scale_transformation) * @transform.transformation\n</code></pre>\n\n<p>@transform.transformation if there was not previous transformation is identity matrix.\nI think my mistake can be connected with order of multiplying matrices\nTHANK YOU FOR ANY KIND OF HELP!!!</p>\n\n<p>rotation and translation definition are as follows(for example):\n<a href=\"https://i.stack.imgur.com/XWbtJ.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XWbtJ.jpg\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1484749386, "post_id": 41721433, "comment_id": 70638218, "body": "Chef cookbook versions are simply <code>x.y.z</code>, without a leading &quot;v&quot;."}], "answers": [{"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1484749294, "post_id": 41721643, "comment_id": 70638147, "body": "Upvoted. You were the first to answer, and your answer is technically correct. The OP didn&#39;t write any code, it&#39;s okay to give hints IMHO."}, {"owner": {"reputation": 207, "user_id": 4180754, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/37b1333e2461f0bb224e2e0a8af38580?s=128&d=identicon&r=PG&f=1", "display_name": "Mo Martin", "link": "https://stackoverflow.com/users/4180754/mo-martin"}, "edited": false, "score": 0, "creation_date": 1484751180, "post_id": 41721643, "comment_id": 70639611, "body": "Thanks for the help"}, {"owner": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "edited": false, "score": 0, "creation_date": 1484752177, "post_id": 41721643, "comment_id": 70640305, "body": "You are welcome, based on your question I assumed you needed a hint and you would be able to tie up the details"}], "tags": [], "owner": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "is_accepted": false, "score": 2, "last_activity_date": 1484748627, "creation_date": 1484748627, "answer_id": 41721643, "question_id": 41721433, "link": "https://stackoverflow.com/questions/41721433/ruby-merge-arrays-without-duplicates-then-use-higher-value-out-of-duplicate-arra/41721643#41721643", "title": "Ruby merge arrays without duplicates then use higher value out of duplicate array", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.2.1/Hash.html#method-i-merge\" rel=\"nofollow noreferrer\">merge</a> passing a block to choose which value should be chosen when the key is duplicated.</p>\n"}, {"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1484749526, "post_id": 41721654, "comment_id": 70638342, "body": "@Stefan: Thanks, updated. Do you happen to know why <code>Array#&lt;=&gt;</code> is defined, but not <code>Array#&gt;</code> or <code>Array#&lt;</code> ?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 4, "creation_date": 1484749747, "post_id": 41721654, "comment_id": 70638508, "body": "According to <a href=\"https://bugs.ruby-lang.org/issues/5574#note-7\" rel=\"nofollow noreferrer\">Matz</a>: <i>&quot;Since arrays are not always compatible, I don&#39;t want to give wrong implication by making arrays comparable. Adding &lt;=&gt; was a realistic compromise for me to allow array sorting.&quot;</i>"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1484749881, "post_id": 41721654, "comment_id": 70638620, "body": "Wunderbar, danke!"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 5, "last_activity_date": 1484749218, "last_edit_date": 1484749218, "creation_date": 1484748654, "answer_id": 41721654, "question_id": 41721433, "link": "https://stackoverflow.com/questions/41721433/ruby-merge-arrays-without-duplicates-then-use-higher-value-out-of-duplicate-arra/41721654#41721654", "title": "Ruby merge arrays without duplicates then use higher value out of duplicate array", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.3.0/Hash.html#method-i-merge\" rel=\"nofollow noreferrer\"><code>Hash#merge</code></a>, but you also need to define how the comparison is made between two strings.</p>\n\n<p><code>major_minor</code> converts <code>\"v2.0.18\"</code> to <code>[2,0,18]</code>, which can be compared to other version arrays to find the maximum. </p>\n\n<pre><code>source = {\n  \"a\": \"v2.0.18\",\n  \"b\": \"v5.0.2\",\n  \"c\": \"v17.0.0\",\n  \"d\": \"v9.0.0\",\n}\n\ndestination = {\n  \"a\": \"v1.0.18\",\n  \"b\": \"v4.0.0\",\n  \"c\": \"v20.0.0\",\n  \"d\": \"v7.0.0\"\n}\n\ndef major_minor(version)\n  version.scan(/\\d+/).map(&amp;:to_i)\nend\n\np source.merge(destination){|key, old, new| [old, new].max_by{|v| major_minor(v) } }\n#=&gt; {:a=&gt;\"v2.0.18\", :b=&gt;\"v5.0.2\", :c=&gt;\"v20.0.0\", :d=&gt;\"v9.0.0\"}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 2, "creation_date": 1484749403, "post_id": 41721660, "comment_id": 70638233, "body": "<code>old</code> =&gt; <code>old_val</code>. Nice use of <code>Gem::Version</code>!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1484750099, "post_id": 41721660, "comment_id": 70638793, "body": "Nice, although I&#39;d incorporate Eric Duminil&#39;s approach: <code>a.merge(b) { |key, *values| values.max_by { |v| Gem::Version.new(v[1..-1]) } }</code>"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1484750219, "post_id": 41721660, "comment_id": 70638876, "body": "@Stefan, I can&#39;t get tired of repeating: you are cool as hell! Absolutely great improvement of what I&#39;ve written. Will edit"}, {"owner": {"reputation": 207, "user_id": 4180754, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/37b1333e2461f0bb224e2e0a8af38580?s=128&d=identicon&r=PG&f=1", "display_name": "Mo Martin", "link": "https://stackoverflow.com/users/4180754/mo-martin"}, "edited": false, "score": 0, "creation_date": 1484751153, "post_id": 41721660, "comment_id": 70639595, "body": "Thanks for the help"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 5, "last_activity_date": 1484750367, "last_edit_date": 1495535357, "creation_date": 1484748680, "answer_id": 41721660, "question_id": 41721433, "link": "https://stackoverflow.com/questions/41721433/ruby-merge-arrays-without-duplicates-then-use-higher-value-out-of-duplicate-arra/41721660#41721660", "title": "Ruby merge arrays without duplicates then use higher value out of duplicate array", "body": "<p><a href=\"https://ruby-doc.org/core-2.4.0/Hash.html#method-i-merge\" rel=\"nofollow noreferrer\">Hash#<code>merge</code></a> is what you're looking for:</p>\n\n<pre><code>a.merge(b) do |key, old_val, new_val|\n  Gem::Version.new(old_val[1..-1]) &gt; Gem::Version.new(new_val[1..-1]) ? old_val : new_val\nend\n#=&gt; {:a=&gt;\"v2.0.18\", :b=&gt;\"v5.0.2\", :c=&gt;\"v20.0.0\", :d=&gt;\"v9.0.0\"}\n</code></pre>\n\n<p>As <a href=\"https://stackoverflow.com/users/477037/stefan\">@Stefan</a> suggested, the above could be improved by incorporating the approach <strong>@Eric Duminil</strong>  used <a href=\"https://stackoverflow.com/a/41721654/1772830\">in his answer</a>:</p>\n\n<pre><code>a.merge(b) { |key, *values| values.max_by { |v| Gem::Version.new(v[1..-1]) } }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 2, "creation_date": 1484748835, "post_id": 41721670, "comment_id": 70637805, "body": "It doesn&#39;t work. Lexicographic order isn&#39;t version order. <code>&quot;v11.0&quot; &gt; &quot;v9.0&quot; #=&gt; false</code>"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1484749961, "post_id": 41721670, "comment_id": 70638675, "body": "Note: I didn&#39;t downvote. I typically just write comments and wait for the answer to get corrected."}, {"owner": {"reputation": 1872, "user_id": 4091324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/razpB.jpg?s=128&g=1", "display_name": "Darth Kotik", "link": "https://stackoverflow.com/users/4091324/darth-kotik"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1484750526, "post_id": 41721670, "comment_id": 70639130, "body": "@EricDuminil fair point. I&#39;m too used to work with numbers and it worked just find for this case, but it surely can cause troubles."}], "tags": [], "owner": {"reputation": 1872, "user_id": 4091324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/razpB.jpg?s=128&g=1", "display_name": "Darth Kotik", "link": "https://stackoverflow.com/users/4091324/darth-kotik"}, "is_accepted": false, "score": -1, "last_activity_date": 1484748716, "creation_date": 1484748716, "answer_id": 41721670, "question_id": 41721433, "link": "https://stackoverflow.com/questions/41721433/ruby-merge-arrays-without-duplicates-then-use-higher-value-out-of-duplicate-arra/41721670#41721670", "title": "Ruby merge arrays without duplicates then use higher value out of duplicate array", "body": "<p><code>merge</code> takes additional argument block to figure out which key to keep in case both hashes has same key </p>\n\n<pre><code>a = {\n      \"a\": \"v2.0.18\",\n      \"b\": \"v5.0.2\",\n      \"c\": \"v17.0.0\",\n      \"d\": \"v9.0.0\",\n    }\nb = {\n      \"a\": \"v1.0.18\",\n      \"b\": \"v4.0.0\",\n      \"c\": \"v20.0.0\",\n      \"d\": \"v7.0.0\"\n  }\nc = a.merge(b) {|k, v1, v2| [v1, v2].max}\n =&gt; {:a=&gt;\"v2.0.18\", :b=&gt;\"v5.0.2\", :c=&gt;\"v20.0.0\", :d=&gt;\"v9.0.0\"} \n</code></pre>\n"}], "owner": {"reputation": 207, "user_id": 4180754, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/37b1333e2461f0bb224e2e0a8af38580?s=128&d=identicon&r=PG&f=1", "display_name": "Mo Martin", "link": "https://stackoverflow.com/users/4180754/mo-martin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 41721654, "answer_count": 4, "score": 0, "last_activity_date": 1484886447, "creation_date": 1484748053, "last_edit_date": 1484886447, "question_id": 41721433, "link": "https://stackoverflow.com/questions/41721433/ruby-merge-arrays-without-duplicates-then-use-higher-value-out-of-duplicate-arra", "title": "Ruby merge arrays without duplicates then use higher value out of duplicate array", "body": "<p>i'm working on a version control system in which chef cookbook version numbers are specified in multiple different environments. </p>\n\n<p>I've been able to merge the two environment files together using this format --</p>\n\n<pre><code>source      = JSON.parse(File.read(\"A.json\"))\ndestination = JSON.parse(File.read(\"B.json\"))\nsource      = destination.merge(source)\n</code></pre>\n\n<p>The values of each file are in this format -- </p>\n\n<p>'A'</p>\n\n<pre><code>{\n  \"a\": \"v2.0.18\",\n  \"b\": \"v5.0.2\",\n  \"c\": \"v17.0.0\",\n  \"d\": \"v9.0.0\",\n}\n</code></pre>\n\n<p>'B'</p>\n\n<pre><code>{\n  \"a\": \"v1.0.18\",\n  \"b\": \"v4.0.0\",\n  \"c\": \"v20.0.0\",\n  \"d\": \"v7.0.0\"\n}\n</code></pre>\n\n<p>Currently does --</p>\n\n<pre><code>{\n  \"a\": \"v2.0.18\",\n  \"b\": \"v5.0.2\",\n  \"c\": \"v17.0.0\",\n  \"d\": \"v9.0.0\",\n}\n</code></pre>\n\n<p>What i'd like it to do -- </p>\n\n<pre><code>{\n  \"a\": \"v2.0.18\",\n  \"b\": \"v5.0.2\",\n  \"c\": \"v20.0.0\", #keeps higher value\n  \"d\": \"v9.0.0\",\n}\n</code></pre>\n\n<p>Any help would be greatly appreciated.\nThanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 3, "last_activity_date": 1484747767, "creation_date": 1484747767, "answer_id": 41721332, "question_id": 41721307, "link": "https://stackoverflow.com/questions/41721307/displaying-variable-in-rails-view/41721332#41721332", "title": "Displaying variable in rails view", "body": "<p>Try this one</p>\n\n<pre><code>&lt;%= @res.first[\"value\"] %&gt;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>&lt;%= @res[0][\"value\"] %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 2, "last_activity_date": 1484751281, "last_edit_date": 1484751281, "creation_date": 1484747797, "answer_id": 41721344, "question_id": 41721307, "link": "https://stackoverflow.com/questions/41721307/displaying-variable-in-rails-view/41721344#41721344", "title": "Displaying variable in rails view", "body": "<h1>Ruby 2.3 and newer</h1>\n\n<p><code>@res</code> is an Array with a Hash at index 0. To get the value, you can use :</p>\n\n<pre><code>@res.dig(0,\"value\")\n</code></pre>\n\n<p>And to display it in a view :</p>\n\n<pre><code>&lt;%= @res.dig(0,\"value\") %&gt;\n</code></pre>\n\n<p>Using <a href=\"http://ruby-doc.org/core-2.3.0/Hash.html#method-i-dig\" rel=\"nofollow noreferrer\"><code>dig</code></a> is the safest variant here, because it won't raise an exception if the array is empty.</p>\n\n<h1>Older Ruby</h1>\n\n<p>For older Ruby versions, you can use :</p>\n\n<pre><code>&lt;%= @res.fetch(0,{}).fetch(\"value\") %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 74, "user_id": 6058578, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/1010566642351525/picture?type=large", "display_name": "Rafa\u0142 Piekara", "link": "https://stackoverflow.com/users/6058578/rafa%c5%82-piekara"}, "is_accepted": false, "score": 0, "last_activity_date": 1484760023, "creation_date": 1484760023, "answer_id": 41725647, "question_id": 41721307, "link": "https://stackoverflow.com/questions/41721307/displaying-variable-in-rails-view/41725647#41725647", "title": "Displaying variable in rails view", "body": "<p>You can also try:</p>\n\n<pre><code>&lt;% @res.each do |item| %&gt;\n  &lt;p&gt;&lt;%= item[\"value\"] %&gt;&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>It would be useful while you'll have more items in your array.</p>\n"}], "owner": {"reputation": 2453, "user_id": 800965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fMjbN.jpg?s=128&g=1", "display_name": "Aleksandar Pavi\u0107", "link": "https://stackoverflow.com/users/800965/aleksandar-pavi%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 41721332, "answer_count": 3, "score": 0, "last_activity_date": 1509485266, "creation_date": 1484747696, "last_edit_date": 1509485266, "question_id": 41721307, "link": "https://stackoverflow.com/questions/41721307/displaying-variable-in-rails-view", "title": "Displaying variable in rails view", "body": "<p>If I have variable that looks like this</p>\n\n<pre><code>[{\"value\"=&gt;\"4\"}]\n</code></pre>\n\n<p>When I put inspect in view like this:</p>\n\n<pre><code>&lt;%= @res.inspect %&gt;\n</code></pre>\n\n<p>How do I show/print/echo only it's value? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rest"], "answers": [{"tags": [], "owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "is_accepted": true, "score": 2, "last_activity_date": 1484746880, "creation_date": 1484746880, "answer_id": 41720992, "question_id": 41720923, "link": "https://stackoverflow.com/questions/41720923/rails-rest-doesnt-show-load-the-right-page-ruby-on-rails/41720992#41720992", "title": "Rails REST doesn&#39;t show/load the right page - Ruby on Rails", "body": "<p>The answer is simple: in order you access the index page, you need to hit the following URL:</p>\n\n<pre><code>http://localhost:3000/subjects\n</code></pre>\n\n<p>Obviously, it will be with <code>GET</code></p>\n\n<p>The reason why you got the error is: since, anything of the format <code>subjects/:id</code> will take you to the <code>show</code> action within <code>SubjectsController</code>, so Rails interprets <code>subjects/index</code> as you are trying to access the page <code>subjects/:id</code> with <code>index</code> as <code>id</code> of the subject. Here's nothing wrong with Rails, since in RESTful web services, you access the index page by ONLY using the plural name of the resource, like in your case <code>http://localhost:3000/subjects</code></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7435957"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 41720992, "answer_count": 1, "score": 2, "last_activity_date": 1484747049, "creation_date": 1484746691, "last_edit_date": 1484747049, "question_id": 41720923, "link": "https://stackoverflow.com/questions/41720923/rails-rest-doesnt-show-load-the-right-page-ruby-on-rails", "title": "Rails REST doesn&#39;t show/load the right page - Ruby on Rails", "body": "<p>Basically I created a controller, model and view for subjects. Basically I have 6 actions inside my controller and set up a REST inside my routes file to route the right file. </p>\n\n<p>When I entered, <a href=\"http://localhost:3000/subjects/index\" rel=\"nofollow noreferrer\">http://localhost:3000/subjects/index</a> it shows me the view for show.html.erb instead of the index.html.erb</p>\n\n<p>Here's what my subject controller looks like:</p>\n\n<pre><code>class SubjectsController &lt; ApplicationController\n  def index\n    @subjects = Subject.sorted\n  end\n</code></pre>\n\n<p>And here's the content of my index.html.erb file.</p>\n\n<pre><code>&lt;% @page_title = \"All Subjects\" %&gt;\n\n&lt;div class=\"subjects index\"&gt;\n&lt;h2&gt;Subjects&lt;/h2&gt;\n\n&lt;%= link_to(\"Add New Subject\", new_subject_path, :class =&gt; \"action_new\") %&gt;\n\n&lt;table class=\"listing\" summary=\"Subject list\" border=\"1\"&gt;\n&lt;tr class=\"header\"&gt;\n&lt;th&gt;#&lt;/th&gt;\n&lt;th&gt;Subject&lt;/th&gt;\n&lt;th&gt;Visible&lt;/th&gt;\n&lt;th&gt;Pages&lt;/th&gt;\n&lt;th&gt;Actions&lt;/th&gt;\n&lt;/tr&gt;\n\n&lt;% @subjects.each do |subject| %&gt;\n&lt;tr&gt;\n  &lt;td&gt;&lt;%= subject.position %&gt; &lt;/td&gt;\n  &lt;td&gt;&lt;%= subject.name %&gt; &lt;/td&gt;\n  &lt;td class=\"center\"&gt;&lt;%= status_tag(subject.visible) %&gt;&lt;/td&gt;\n  &lt;td class=\"center\"&gt;&lt;%= subject.pages.size %&gt; &lt;/td&gt;\n  &lt;td class=\"actions\"&gt;\n    &lt;%= link_to(\"View Pages\", pages_path(:subject_id =&gt; subject.id), :class =&gt; 'action show') %&gt;\n    &lt;%= link_to(\"Show\", subject_path(subject), :class =&gt; 'action show') %&gt;\n    &lt;%= link_to(\"Edit\", edit_subject_path(subject), :class =&gt; 'action edit') %&gt;\n    &lt;%= link_to(\"Delete\", delete_subject_path(subject), :class =&gt; 'action delete') %&gt;\n  &lt;td&gt;\n  &lt;/tr&gt;\n  &lt;% end %&gt;\n  &lt;table&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Also here's what I set up on my routes:</p>\n\n<pre><code>  resources :subjects do\n    member do\n      get :delete\n    end\n  end\n</code></pre>\n\n<p>Any idea what am I missing?</p>\n"}, {"tags": ["ruby", "composer-php", "chef-infra", "aws-opsworks"], "answers": [{"tags": [], "owner": {"reputation": 427, "user_id": 2656059, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e7ca9c61595c0c1d94b15bb1c3e01ea8?s=128&d=identicon&r=PG", "display_name": "nicolaib", "link": "https://stackoverflow.com/users/2656059/nicolaib"}, "is_accepted": false, "score": 0, "last_activity_date": 1484779143, "creation_date": 1484779143, "answer_id": 41730739, "question_id": 41720518, "link": "https://stackoverflow.com/questions/41720518/opsworks-install-composer-error/41730739#41730739", "title": "Opsworks install composer error", "body": "<p>I solved it when I realized that the user was supposed to be \"root\" and not \"ubuntu\" in the recipe. The ubuntu user simply did not have adequate rights to create new folders in the release folder.</p>\n"}], "owner": {"reputation": 427, "user_id": 2656059, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/e7ca9c61595c0c1d94b15bb1c3e01ea8?s=128&d=identicon&r=PG", "display_name": "nicolaib", "link": "https://stackoverflow.com/users/2656059/nicolaib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 157, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1484779143, "creation_date": 1484745521, "last_edit_date": 1484746079, "question_id": 41720518, "link": "https://stackoverflow.com/questions/41720518/opsworks-install-composer-error", "title": "Opsworks install composer error", "body": "<p>I have an AWS Opsworks setup where I need to install composer on instance start and app deployment, but the installation fails. Can anyone help me out soving this.\nI'm running this Chef recipe:</p>\n\n<pre><code>node[:deploy].each do |app_name, deploy|\n  script \"install_composer\" do\n    interpreter \"bash\"\n    user \"ubuntu\"\n    cwd \"#{deploy[:deploy_to]}/current\"\n    code &lt;&lt;-EOH\n    curl -sS https://getcomposer.org/installer | php\n    php composer.phar install --no-dev\n    EOH\n    only_if { ::File.exists?(\"#{deploy[:deploy_to]}/current/composer.json\") }\n  end\nend\n</code></pre>\n\n<p>I'm receiving the following errors (where line 21 is the one that with <code>script \"install_composer\" do</code>).</p>\n\n<pre><code>[2017-01-18T11:16:38+00:00] ERROR: Running exception handlers\n[2017-01-18T11:16:38+00:00] ERROR: Exception handlers complete\n[2017-01-18T11:16:38+00:00] FATAL: Stacktrace dumped to /var/lib/aws/opsworks/cache.stage2/chef-stacktrace.out\n[2017-01-18T11:16:38+00:00] ERROR: script[install_composer] (composer::install line 21) had an error: Mixlib::ShellOut::ShellCommandFailed: Expected process to exit with [0], but received '1'\n---- Begin output of \"bash\"  \"/tmp/chef-script20170118-1672-16lyp81\" ----\nSTDOUT: All settings correct for using Composer\nThe installation directory \"/srv/www/[app_name]/releases/20170113140255\" is not writable\nCould not open input file: composer.phar\nSTDERR: \n---- End output of \"bash\"  \"/tmp/chef-script20170118-1672-16lyp81\" ----\nRan \"bash\"  \"/tmp/chef-script20170118-1672-16lyp81\" returned 1\n[2017-01-18T11:16:38+00:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)\n</code></pre>\n\n<p>I used a combination of these examples to build the script:</p>\n\n<p><a href=\"https://github.com/awslabs/opsworks-example-cookbooks/blob/master/phpapp/recipes/appsetup.rb\" rel=\"nofollow noreferrer\">https://github.com/awslabs/opsworks-example-cookbooks/blob/master/phpapp/recipes/appsetup.rb</a>\n<a href=\"https://github.com/onema/opsworks-chef-cookbooks/blob/master/composer/recipes/install.rb\" rel=\"nofollow noreferrer\">https://github.com/onema/opsworks-chef-cookbooks/blob/master/composer/recipes/install.rb</a></p>\n\n<p>The setup runs on Ubuntu instances. The instance reports <code>setup_failed</code>. If I disable the custom recipes, the instance starts fine. </p>\n\n<p>The app which name shows in the <code>The installation directory \"/srv/www/[app_name]/releases/20170113140255\" is not writable</code> is the 4th app in my app list, but the first one that it should actually install composer on (it contains <code>composer.json</code>). </p>\n\n<p>Hope you can help me out. Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nested-forms", "has-many-through", "cocoon-gem"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7389849, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Vj5DhW05vmQ/AAAAAAAAAAI/AAAAAAAAACk/kKyCZ1aa3-A/photo.jpg?sz=128", "display_name": "Abzal Zhumabaev", "link": "https://stackoverflow.com/users/7389849/abzal-zhumabaev"}, "edited": false, "score": 0, "creation_date": 1484805113, "post_id": 41726457, "comment_id": 70663236, "body": "Your method works fine, now im trying to rebuild form with &#39;sample_form&#39;, by the way i have a error on &#39;f.collection_select :game_id, Game.all.map{|g| [g.name, g.id]} &#39; -&gt; &#39;Wrong number of arguments&#39;, so i removed this if statement and it works for now"}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "reply_to_user": {"reputation": 11, "user_id": 7389849, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Vj5DhW05vmQ/AAAAAAAAAAI/AAAAAAAAACk/kKyCZ1aa3-A/photo.jpg?sz=128", "display_name": "Abzal Zhumabaev", "link": "https://stackoverflow.com/users/7389849/abzal-zhumabaev"}, "edited": false, "score": 0, "creation_date": 1484823958, "post_id": 41726457, "comment_id": 70673283, "body": "I wrote this code as an example, did not test it. I fixed the <code>collection_select</code> definition. If you do not need to set the game at all, then you do not need the select, to me it seemed relevant to actually be able to select the game for which to add the score. But it was just an example (and you could use any of the alternative ways to create a dropdown select option)."}], "tags": [], "owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "is_accepted": false, "score": 1, "last_activity_date": 1484823987, "last_edit_date": 1484823987, "creation_date": 1484762810, "answer_id": 41726457, "question_id": 41720370, "link": "https://stackoverflow.com/questions/41720370/rails-has-many-through-cocoon/41726457#41726457", "title": "Rails has_many :through, cocoon", "body": "<p>If I understand correctly, you want to add an entry for all games (which works), but adding a new <code>Result</code> does not. The problem is the <code>@game</code> which is probable either undefined or set to the last game. </p>\n\n<p>I also do not really like the approach (giving the <code>fields_for</code> a specific set). Instead I would adapt the approach slightly. Instead of using <code>initialized_player_games</code> I would use a method, to be called in the controller, e.g. <code>add_default_player_games</code>, something like </p>\n\n<pre><code>def add_default_player_games \n  Game.all.each do |game|\n    if g = player_games.find { |g| g.game_id == game.id }\n      g.enable ||= true \n    else\n      player_games.build(game: game)\n    end\n  end\nend\n</code></pre>\n\n<p>effectively adding new instances to the collection, without saving them.     </p>\n\n<p>So in your controller you would write </p>\n\n<pre><code> @player = Player.new\n @player.add_default_player_games\n</code></pre>\n\n<p>or in <code>edit</code></p>\n\n<pre><code> @player = Player.find(params[:id])\n @player.add_default_player_games\n</code></pre>\n\n<p>Your view would then just iterate over <code>player_games</code></p>\n\n<pre><code>&lt;%= player_form.fields_for :player_games do |builder| %&gt;\n  &lt;%= render 'result_fields', f: builder %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>And then, if you would use <code>simple-form</code> it would be very easy to select a game if not yet selected, and there is no need for the ugly <code>@game</code>. </p>\n\n<p>So do something like in <code>_result_fields</code> (in haml because I am a lazy typist)</p>\n\n<pre><code>.nested-fields\n  - game_id = f.object.game_id \n  - if game_id.present? \n    = f.hidden_field :game_id\n  - else \n    = f.collection_select :game_id, Game.all, :id, :name\n  ...\n</code></pre>\n\n<p>So in short: if there is a <code>game_id</code>, do not allow to change it (would be useful to show the title of the game or something), but if not use a dropdown-select to choose the game.\nAnd the rest stays the same (only use <code>game_id</code> instead of <code>@game.id</code>).</p>\n"}], "owner": {"reputation": 11, "user_id": 7389849, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Vj5DhW05vmQ/AAAAAAAAAAI/AAAAAAAAACk/kKyCZ1aa3-A/photo.jpg?sz=128", "display_name": "Abzal Zhumabaev", "link": "https://stackoverflow.com/users/7389849/abzal-zhumabaev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 822, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1484823987, "creation_date": 1484745117, "question_id": 41720370, "link": "https://stackoverflow.com/questions/41720370/rails-has-many-through-cocoon", "title": "Rails has_many :through, cocoon", "body": "<h1>Player.rb</h1>\n\n<pre><code>class Player &lt; ApplicationRecord\nbelongs_to :user\nhas_many :player_games, dependent: :destroy, inverse_of: :player\nhas_many :games, :through =&gt; :player_games\n\nvalidates :firstname, presence: true, length: { minimum: 3, maximum: 88 }\nvalidates :lastname, presence: true, length: { minimum: 3, maximum: 88 }\nvalidates :user_id, presence: true\n\naccepts_nested_attributes_for :player_games, reject_if: :reject_posts, allow_destroy: true\n\ndef reject_posts(attributes)\n    attributes['game_id'].to_i == 0\n    attributes['score'].blank?\n    attributes['time'].blank?\nend\n\ndef initialized_player_games # this is the key method\n    [].tap do |o|\n        Game.all.each do |game|\n            if g = player_games.find { |g| g.game_id == game.id }\n                o &lt;&lt; g.tap { |g| g.enable ||= true }\n            else\n                o &lt;&lt; PlayerGame.new(game: game)\n            end\n        end\n    end\nend\nend\n</code></pre>\n\n<h1>players_controller.rb</h1>\n\n<pre><code>class PlayersController &lt; ApplicationController\nbefore_action :set_player, only: [:edit, :update, :show, :destroy]\nbefore_action :require_user, except: [:index, :show]\nbefore_action :require_same_user, only: [:edit, :update, :destroy]\n\nbefore_filter :process_player_games_attrs, only: [:create, :update]\n\ndef process_player_games_attrs\n  params[:player][:player_games_attributes].values.each do |game_attr|\n    game_attr[:_destroy] = true if game_attr[:enable] != '1'\n  end\nend\n</code></pre>\n\n<p>.......</p>\n\n<pre><code>private\n  # Use callbacks to share common setup or constraints between actions.\n  def set_player\n    @player = Player.find(params[:id])\n  end\n\n  # Never trust parameters from the scary internet, only allow the white list through.\n  def player_params\n    params.require(:player).permit(:id, :firstname, :lastname, player_games_attributes: [:id, :game_id, :score, :time, :enable, :_destroy] )\n  end\n\n  def require_same_user\n    if current_user != @player.user and !current_user.admin?\n      flash[:danger] = \"You can edit or delete only your own player\"\n      redirect_to root_path\n    end \n  end\n\nend\n</code></pre>\n\n<h1>_form of 'PLAYER'</h1>\n\n<pre><code>&lt;%= form_for(@player, :html =&gt; {class: \"az-form\", role: \"form\"}) do |player_form| %&gt;\n\n  &lt;%= player_form.label :firstname, class: \"az-form__label\" %&gt; &lt;br/&gt;\n  &lt;%= player_form.text_field :firstname, class: \"az-form__input\", placeholder: \"Firstname of player\", autofocus: true %&gt;\n\n  &lt;%= player_form.label :lastname, class: \"az-form__label\" %&gt; &lt;/br&gt;\n  &lt;%= player_form.text_field :lastname, class: \"az-form__input\", placeholder: \"Lastname of player\" %&gt;\n\n  &lt;%= player_form.fields_for :player_games, @player.initialized_player_games do |builder| %&gt;\n\n    &lt;% @game = builder.object.game %&gt;\n\n    &lt;%= render 'result_fields', f: builder %&gt;\n\n    &lt;div class=\"links\"&gt;\n      &lt;%= link_to_add_association 'add result', player_form, :player_games, :partial =&gt; 'players/result_fields' %&gt;\n    &lt;/div&gt;\n\n    &lt;hr&gt;\n\n  &lt;% end %&gt;\n\n  &lt;div class=\"text-center\"&gt;\n    &lt;%= button_tag(type: \"submit\", class: \"az-form__submit\") do %&gt;\n        &lt;%= player_form.object.new_record? ? \"Create player\" : \"Update player\" %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<h1>_result_fields.html.erb</h1>\n\n<pre><code>&lt;div class=\"nested-fields\"&gt;\n\n&lt;%= f.hidden_field :game_id, :value =&gt; @game.id%&gt;\n\n&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-md-12\"&gt;\n    &lt;label class=\"az-form__label az-form__label--unable js-az-form__checkbox\" data-check=\"&lt;%= @game.id %&gt;\"&gt;\n      &lt;%= f.check_box :enable %&gt;\n      &lt;%= @game.title %&gt;\n     &lt;/label&gt;\n  &lt;/div&gt;\n &lt;/div&gt;\n\n&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-md-6\"&gt;\n    &lt;%= f.label :score,\n                    class: \"az-form__label\", :data =&gt; {:check =&gt; @game.id } %&gt; &lt;/br&gt;\n     &lt;%= f.number_field :score, step: :any, :data =&gt; {:check =&gt; @game.id },\n                           class: \"az-form__input az-form__input--disabled\",\n                           placeholder: \"Score for '#{@game.title}'\", disabled: true %&gt;\n      &lt;/div&gt;\n      &lt;div class=\"col-md-6\"&gt;\n     &lt;%= f.label :time,\n                    class: \"az-form__label\", :data =&gt; {:check =&gt; @game.id } %&gt; &lt;/br&gt;\n  &lt;%= f.number_field :time, step: :any, :data =&gt; {:check =&gt; @game.id },\n                           class: \"az-form__input az-form__input--disabled\",\n                           placeholder: \"Time for '#{@game.title}'\", disabled: true %&gt;\n   &lt;/div&gt;\n &lt;/div&gt;\n\n &lt;div class=\"row\"&gt;\n  &lt;div class=\"col-md-12\"&gt;\n   &lt;%= link_to_remove_association \"remove result\", f %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n&lt;/div&gt;\n</code></pre>\n\n<h1>Question:</h1>\n\n<p>When edit 'player' have access to only one result per game, can not change others, conflict with 'initialized_player_games' method, but if i remove this method from form work well, but cannot create another game if dont create in new action, how can i change this method properly?</p>\n"}, {"tags": ["arrays", "ruby", "pass-by-reference"], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1484745271, "post_id": 41720226, "comment_id": 70635324, "body": "&quot;pass by reference&quot; means that <i>assigning</i> another value to the variable would also change the variable in the caller&#39;s scope, e.g. <code>node_tree = []</code>. This is something Ruby doesn&#39;t allow."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1484745326, "post_id": 41720226, "comment_id": 70635372, "body": "Sorry, but this is wrong. Ruby is not pass by reference."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1484745996, "post_id": 41720226, "comment_id": 70635868, "body": "When you say &quot;pass by reference&quot; in Ruby, it means you try to apply a C++ concept to the wrong language."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1484746057, "post_id": 41720226, "comment_id": 70635915, "body": "It&#39;s still wrong to write passed by reference, even in quotes."}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 2, "creation_date": 1484746491, "post_id": 41720226, "comment_id": 70636255, "body": "Point taken, both of you, updated."}], "tags": [], "owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "is_accepted": false, "score": 5, "last_activity_date": 1484747540, "last_edit_date": 1484747540, "creation_date": 1484744719, "answer_id": 41720226, "question_id": 41720116, "link": "https://stackoverflow.com/questions/41720116/ruby-array-is-being-passed-by-reference-into-function/41720226#41720226", "title": "Ruby: array is being passed by reference into function?", "body": "<p>Everything is \"passed as an object\" in Ruby.</p>\n\n<p>And arrays are objects. </p>\n\n<p>If you want to avoid side-effects make a copy of the argument  </p>\n\n<pre><code>def abcde(node_tree)\n  copy = node_tree.dup\n  copy[0] += 100\n  copy\nend\n</code></pre>\n\n<p>A note of caution though since you named your variable <code>tree</code>, the <code>dup</code> method makes a shallow copy only. Shallow means that the array is copied but not its elements.</p>\n\n<p>Why did I not say \"pass by reference\" above?</p>\n\n<p>\"Pass by reference\" is a concept from another language and does not make sense in the context of Ruby. Technically the native implementation of Ruby uses pass by value, where the value is a pointer to an object structure. However thinking of Ruby as using \"pass by value\" is misleading since it does not create a copy of data structures before they are passed to a function. Which seems to be what you assumed would happen\u2026</p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 1, "last_activity_date": 1484749588, "creation_date": 1484749588, "answer_id": 41721961, "question_id": 41720116, "link": "https://stackoverflow.com/questions/41720116/ruby-array-is-being-passed-by-reference-into-function/41721961#41721961", "title": "Ruby: array is being passed by reference into function?", "body": "<p>Your assumption is wrong: <a href=\"/questions/tagged/ruby\" class=\"post-tag\" title=\"show questions tagged &#39;ruby&#39;\" rel=\"tag\">ruby</a> is <em>not</em> <a href=\"/questions/tagged/pass-by-reference\" class=\"post-tag\" title=\"show questions tagged &#39;pass-by-reference&#39;\" rel=\"tag\">pass-by-reference</a>, it is strictly <a href=\"/questions/tagged/pass-by-value\" class=\"post-tag\" title=\"show questions tagged &#39;pass-by-value&#39;\" rel=\"tag\">pass-by-value</a>, always. You can easily verify this by running this simple test:</p>\n\n<pre><code>def foo(bar)\n  bar = 'reference'\nend\n\nbaz = 'value'\n\nfoo(baz)\n\nputs \"Ruby is pass-by-#{baz}\"\n# Ruby is pass-by-value\n</code></pre>\n\n<p>More precisely, Ruby is <a href=\"/questions/tagged/call-by-object-sharing\" class=\"post-tag\" title=\"show questions tagged &#39;call-by-object-sharing&#39;\" rel=\"tag\">call-by-object-sharing</a> (also known as <em>call-by-object</em> and <em>call-by-sharing</em>), which is a special case of <em>pass-by-value</em>, where the <em>value</em> that is passed is always a pointer to a (potentially) shared (potentially) mutable object:</p>\n\n<pre><code>def is_ruby_pass_by_value?(foo)\n  foo.replace('More precisely, it is call-by-object-sharing!')\n  foo = 'No, Ruby is pass-by-reference.'\nend\n\nbar = 'Yes, of course, Ruby *is* pass-by-value!'\n\nis_ruby_pass_by_value?(bar)\n\np bar\n# 'More precisely, it is call-by-object-sharing!'\n</code></pre>\n\n<p>However, that is actually irrelevant to your question. It has nothing to do with <em>pass-by-reference</em> vs. <em>pass-by-value</em>.</p>\n\n<blockquote>\n  <p>So inside testarray function, I have an array <code>arr_tree</code> which is being passed to a function <code>abcde</code>. I change the value of the array inside <code>abcde</code> function and print array inside <code>testarray</code> I get the changed value here.</p>\n</blockquote>\n\n<p>You get the changed value because you change the value. It's as simple as that. Ruby is not a pure functional programming language, it <em>does</em> have mutable state. And if you mutate that state, then the old state is gone and only the new state exists.</p>\n\n<p>You wrote yourself:</p>\n\n<blockquote>\n  <p>I change the value of the array</p>\n</blockquote>\n\n<p>Well, if you change the array, the array changes! There is only one array in your entire code.</p>\n\n<blockquote>\n  <p>Please explain why the results are like this?</p>\n</blockquote>\n\n<p>The array changes because you change the array.</p>\n\n<blockquote>\n  <p>Also how can I achieve my expected result?</p>\n</blockquote>\n\n<p>You can achieve your result by not changing the array:</p>\n\n<pre><code>def testarray\n  arr_tree = [1, 2, 3, 4, 5]\n  (1..3).each do |index|\n    abcde(arr_tree)\n    puts arr_tree[0]\n  end\nend\n\ndef abcde(node_tree)\n  [node_tree.first + 100, *node_tree.drop(1)]\nend\n</code></pre>\n"}], "owner": {"reputation": 3288, "user_id": 3128796, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/a938da1334bd8a4de72edfe2740ac6e0?s=128&d=identicon&r=PG", "display_name": "asdfkjasdfjk", "link": "https://stackoverflow.com/users/3128796/asdfkjasdfjk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3410, "favorite_count": 1, "closed_date": 1484751408, "answer_count": 2, "score": 0, "last_activity_date": 1488707963, "creation_date": 1484744414, "last_edit_date": 1484747648, "question_id": 41720116, "link": "https://stackoverflow.com/questions/41720116/ruby-array-is-being-passed-by-reference-into-function", "closed_reason": "Duplicate", "title": "Ruby: array is being passed by reference into function?", "body": "<p>I have a simple code below</p>\n\n<pre><code>    def testarray\n      arr_tree = [1,2,3,4,5]\n      (1..3).each do |index|\n        abcde(arr_tree)\n        puts arr_tree[0]\n      end\n    end\n\n    def abcde(node_tree)\n      node_tree[0] += 100\n    end\n</code></pre>\n\n<p>So inside testarray function, I have an array <code>arr_tree</code> which is being passed to a function <code>abcde</code>. I change the value of the array inside <code>abcde</code> function and print array inside <code>testarray</code> I get the changed value here. So the output is</p>\n\n<pre><code>101\n201\n301\n</code></pre>\n\n<p>but I was expecting </p>\n\n<pre><code>1\n1\n1\n</code></pre>\n\n<p>Please explain why the results are like this? Also how can I achieve my expected result?</p>\n"}, {"tags": ["ruby", "jekyll", "interpolation"], "answers": [{"comments": [{"owner": {"reputation": 482, "user_id": 6114742, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10208215410758500/picture?type=large", "display_name": "Jorge Junior Arteaga Carvalho", "link": "https://stackoverflow.com/users/6114742/jorge-junior-arteaga-carvalho"}, "edited": false, "score": 0, "creation_date": 1484755060, "post_id": 41721856, "comment_id": 70642416, "body": "Thanks a lot man, this solved my issue. There&#39;s is a little syntax error in your explanation though, you forgot to close <code>{{ &#39;terms_&#39; | append: site.lang</code>"}, {"owner": {"reputation": 19724, "user_id": 1165509, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2ebdffd5ddb4a98b0cc77117503d2711?s=128&d=identicon&r=PG", "display_name": "marcanuy", "link": "https://stackoverflow.com/users/1165509/marcanuy"}, "reply_to_user": {"reputation": 482, "user_id": 6114742, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10208215410758500/picture?type=large", "display_name": "Jorge Junior Arteaga Carvalho", "link": "https://stackoverflow.com/users/6114742/jorge-junior-arteaga-carvalho"}, "edited": false, "score": 0, "creation_date": 1484755907, "post_id": 41721856, "comment_id": 70642995, "body": "@JorgeJuniorArteagaCarvalho you are right, I&#39;ve fixed it in the example!"}], "tags": [], "owner": {"reputation": 19724, "user_id": 1165509, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2ebdffd5ddb4a98b0cc77117503d2711?s=128&d=identicon&r=PG", "display_name": "marcanuy", "link": "https://stackoverflow.com/users/1165509/marcanuy"}, "is_accepted": true, "score": 3, "last_activity_date": 1484755933, "last_edit_date": 1484755933, "creation_date": 1484749279, "answer_id": 41721856, "question_id": 41719600, "link": "https://stackoverflow.com/questions/41719600/how-can-i-use-string-interpolation-with-jekyll/41721856#41721856", "title": "How can i use string interpolation with Jekyll?", "body": "<p>You can make use of the <code>capture</code> tag, instead of displaying a value it sets to a variable:</p>\n\n<pre><code>{% capture term_lang %}{{ 'terms_' | append: site.lang }}{% endcapture%}\n</code></pre>\n\n<p>Then you can use that variable as the index of the array:</p>\n\n<pre><code> site.data[term_lang]\n</code></pre>\n\n<p>In your example:</p>\n\n<pre><code>{% capture term_lang %}{{ 'terms_' | append: site.lang }}{% endcapture%}\n&lt;div id=\"glossary\"&gt;\n {% for term in site.data[term_lang] %}\n   &lt;!-- Glossary goes here --&gt;\n {% endfor %}\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 482, "user_id": 6114742, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/10208215410758500/picture?type=large", "display_name": "Jorge Junior Arteaga Carvalho", "link": "https://stackoverflow.com/users/6114742/jorge-junior-arteaga-carvalho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 775, "favorite_count": 0, "accepted_answer_id": 41721856, "answer_count": 1, "score": 2, "last_activity_date": 1484755933, "creation_date": 1484742941, "question_id": 41719600, "link": "https://stackoverflow.com/questions/41719600/how-can-i-use-string-interpolation-with-jekyll", "title": "How can i use string interpolation with Jekyll?", "body": "<p>I have a Jekyll 3 project that allows language selection. We use the 'jekyll-multiple-languages-plugin' gem for internationalization.\nWe have a glossary that is supposed to display German terms or English terms according to the selected language. I get the selected language using the variable <code>site.lang</code> provided by the 'jekyll-multiple-languages-plugin' gem.\nRight now glossary.html looks like this</p>\n\n<pre><code>  &lt;div id=\"glossary\"&gt;\n    {% if site.lang == \"de\" %}\n      {% for term in site.data['terms_de'] %}\n        &lt;!-- German glossary goes here --&gt;\n      {% endfor %}\n    {% elsif site.lang == \"en\" %}\n      {% for term in site.data['terms_en'] %}\n        &lt;!-- English glossary goes here --&gt;\n      {% endfor %}\n    {% endif %}\n  &lt;/div&gt;\n</code></pre>\n\n<p>However, i'd love to have something like this</p>\n\n<pre><code>  &lt;div id=\"glossary\"&gt;\n     {% for term in site.data[\"terms_#{site.lang}\"] %}\n       &lt;!-- Glossary goes here --&gt;\n     {% endfor %}\n  &lt;/div&gt;\n</code></pre>\n\n<p>But for some reason, the string interpolation <code>\"terms_#{site.lang}\"</code> doesn't work. I also tried <code>'terms_'+site.lang</code></p>\n\n<p>I think the interpolation is not working because, when i put <code>{{ site.lang }}</code> in the page, i see the selected language, but when i write <code>{{ \"terms_\"+site.lang }}</code> i don't see anything.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["arrays", "ruby", "cucumber", "capybara"], "comments": [{"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1484743000, "post_id": 41719292, "comment_id": 70633763, "body": "Can you please explain why you want to choose between random data in your test?  This is a valid question without knowing that, but I am very curious, since random behavior in tests is usually something we avoid, not seek."}, {"owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "reply_to_user": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1484743313, "post_id": 41719292, "comment_id": 70633980, "body": "All I wanted was to input any valid data to just get to me a certain point in the webpage to start my tests, without hardcoding specific records into the Gherkin steps.  I thought I&#39;d attempt to make it a little dynamic so more than one record is being entered. So I would use, Given I am logged in, Then I can start testing this page"}], "answers": [{"comments": [{"owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "edited": false, "score": 0, "creation_date": 1484742409, "post_id": 41719339, "comment_id": 70633361, "body": "That&#39;s great for choosing data within the hashes.  As each hash contains 3 data items specific to a certain record, I&#39;d need all 3 to pass validation.  So I&#39;d need to randomly choose a1 or b1, then interact with the data inside."}, {"owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "edited": false, "score": 0, "creation_date": 1484743060, "post_id": 41719339, "comment_id": 70633799, "body": "The original way worked too, I&#39;d mistyped something in my code in the IDE. Thanks for your answers"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "edited": false, "score": 1, "creation_date": 1484743095, "post_id": 41719339, "comment_id": 70633825, "body": "My pleasure Sir ;)"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 3, "last_activity_date": 1484742642, "last_edit_date": 1484742642, "creation_date": 1484742180, "answer_id": 41719339, "question_id": 41719292, "link": "https://stackoverflow.com/questions/41719292/choose-random-hash-from-method-ruby/41719339#41719339", "title": "Choose Random Hash from Method Ruby", "body": "<p>Try</p>\n\n<pre><code>def random_vehicles\n  a1 = {:vrm =&gt; 'A1',\n      :id =&gt; '11111111111',\n      :post_code =&gt; 'AA11AA'\n  }\n\n  b1 = {:vrm =&gt; 'B1',\n      :id =&gt; '22222222222',\n      :post_code =&gt; 'BB11BB'\n  }\n\n  [a1, b1]\nend\n\nvehicles = random_vehicles\np vehicles.sample\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "edited": false, "score": 1, "creation_date": 1484743027, "post_id": 41719465, "comment_id": 70633781, "body": "Thanks for that, the naming convention makes more sense in this example"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 2, "last_activity_date": 1484742973, "last_edit_date": 1484742973, "creation_date": 1484742542, "answer_id": 41719465, "question_id": 41719292, "link": "https://stackoverflow.com/questions/41719292/choose-random-hash-from-method-ruby/41719465#41719465", "title": "Choose Random Hash from Method Ruby", "body": "<p>Here's how you could modify the method to make your initial <code>random_vehicles.sample</code> to work:</p>\n\n<pre><code>def random_vehicles\n  [\n    {:vrm =&gt; 'A1',\n      :id =&gt; '11111111111',\n      :post_code =&gt; 'AA11AA'\n    },\n    {:vrm =&gt; 'B1',\n      :id =&gt; '22222222222',\n      :post_code =&gt; 'BB11BB'\n    }\n  ]\nend\n\nrandom_vehicles.sample\n#=&gt; {:vrm=&gt;\"B1\", :id=&gt;\"22222222222\", :post_code=&gt;\"BB11BB\"}\nrandom_vehicles.sample\n#=&gt; {:vrm=&gt;\"A1\", :id=&gt;\"11111111111\", :post_code=&gt;\"AA11AA\"}\n</code></pre>\n\n<p>Note that method name is important: it depends on what you actually want the method to return. In this case the method name is <code>sample_vehicles</code> (plural), so it feels natural, that it returns a collection of objects.</p>\n\n<p>If you need it to already return a vehicle, than you should change the method and rename it:</p>\n\n<pre><code>def random_vehicle\n  [\n    {:vrm =&gt; 'A1',\n      :id =&gt; '11111111111',\n      :post_code =&gt; 'AA11AA'\n    },\n    {:vrm =&gt; 'B1',\n      :id =&gt; '22222222222',\n      :post_code =&gt; 'BB11BB'\n    }\n  ].sample\nend\n\nrandom_vehicle\n#=&gt; {:vrm=&gt;\"B1\", :id=&gt;\"22222222222\", :post_code=&gt;\"BB11BB\"}\nrandom_vehicle\n#=&gt; {:vrm=&gt;\"B1\", :id=&gt;\"22222222222\", :post_code=&gt;\"BB11BB\"}\nrandom_vehicle\n#=&gt; {:vrm=&gt;\"A1\", :id=&gt;\"11111111111\", :post_code=&gt;\"AA11AA\"}\n</code></pre>\n"}], "owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 41719465, "answer_count": 2, "score": 0, "last_activity_date": 1484743332, "creation_date": 1484742081, "last_edit_date": 1484743332, "question_id": 41719292, "link": "https://stackoverflow.com/questions/41719292/choose-random-hash-from-method-ruby", "title": "Choose Random Hash from Method Ruby", "body": "<p>I might be going a little out there with this one. </p>\n\n<p>I'm using Cucumber Capybara with Ruby and I would like to create some hashes of specific data, then get my test to choose one of those hashes at random.  Can this be done?</p>\n\n<p>My method containing hashes:</p>\n\n<pre><code>def random_vehicles\n\n\na1 = {:vrm =&gt; 'A1',\n      :id =&gt; '11111111111',\n      :post_code =&gt; 'AA11AA'\n  }\n\nb1 = {:vrm =&gt; 'B1',\n      :id =&gt; '22222222222',\n      :post_code =&gt; 'BB11BB'\n  }\n\nend\n</code></pre>\n\n<p>How can I randomly choose one of the two hashes within that method? Such as:</p>\n\n<pre><code>sample = random_vehicles.sample   # This doesn't work\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 6476, "user_id": 345959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bb590d8ddd242dfaf688b8ffecdf76?s=128&d=identicon&r=PG", "display_name": "Smar", "link": "https://stackoverflow.com/users/345959/smar"}, "edited": false, "score": 0, "creation_date": 1484742160, "post_id": 41719239, "comment_id": 70633174, "body": "FWIW, that syntax is ugly and ambiguous, better to use <code>${$foo}</code>"}], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 4, "creation_date": 1484743038, "post_id": 41719296, "comment_id": 70633790, "body": "Please don&#39;t. There is absolutely no reason to use <code>eval</code> here. <code>Binding#local_variable_get</code> has existed for more than three years and the last version of Ruby that didn&#39;t have it isn&#39;t even maintained anymore."}], "tags": [], "owner": {"reputation": 2037, "user_id": 4531835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02f4959a0a3436daa0a07526ac6a3551?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Saleba", "link": "https://stackoverflow.com/users/4531835/andrey-saleba"}, "is_accepted": false, "score": 0, "last_activity_date": 1484742268, "last_edit_date": 1484742268, "creation_date": 1484742091, "answer_id": 41719296, "question_id": 41719239, "link": "https://stackoverflow.com/questions/41719239/is-there-an-equivalent-of-phps-in-ruby/41719296#41719296", "title": "Is there an equivalent of PHP&#39;s $$ in Ruby?", "body": "<p>Yes, you can use <code>eval</code> for this.</p>\n\n<p>Example: eval(variable name as string)</p>\n\n<pre><code>a = 4\neval('a') # it is 4.\n</code></pre>\n"}], "owner": {"reputation": 16621, "user_id": 319741, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b625972bd759abcd3de0d2283617a1b7?s=128&d=identicon&r=PG", "display_name": "Scott C Wilson", "link": "https://stackoverflow.com/users/319741/scott-c-wilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "closed_date": 1484742321, "answer_count": 1, "score": 0, "last_activity_date": 1484742268, "creation_date": 1484741938, "question_id": 41719239, "link": "https://stackoverflow.com/questions/41719239/is-there-an-equivalent-of-phps-in-ruby", "closed_reason": "Duplicate", "title": "Is there an equivalent of PHP&#39;s $$ in Ruby?", "body": "<p>In PHP you can dynamically interpret a variable name.  So if you do</p>\n\n<pre><code>&lt;?php\n$bar = \"a string\";\n$foo = \"bar\";\necho $$foo;\n</code></pre>\n\n<p>It will print \"a string\".  Can you do this in Ruby? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "server"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7435365, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0luSUWtj0bU/AAAAAAAAAAI/AAAAAAAAABY/YcHsr2yLvQQ/photo.jpg?sz=128", "display_name": "Ring", "link": "https://stackoverflow.com/users/7435365/ring"}, "edited": false, "score": 0, "creation_date": 1484743824, "post_id": 41719211, "comment_id": 70634327, "body": "Thank you very much.You helped me save time."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 13, "user_id": 7435365, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0luSUWtj0bU/AAAAAAAAAAI/AAAAAAAAABY/YcHsr2yLvQQ/photo.jpg?sz=128", "display_name": "Ring", "link": "https://stackoverflow.com/users/7435365/ring"}, "edited": false, "score": 0, "creation_date": 1484743837, "post_id": 41719211, "comment_id": 70634340, "body": "My pleasure Sir ;)"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 1, "last_activity_date": 1484741866, "creation_date": 1484741866, "answer_id": 41719211, "question_id": 41719178, "link": "https://stackoverflow.com/questions/41719178/ruby-on-rails-errors-on-command-rails-server/41719211#41719211", "title": "Ruby on rails errors on command \u201crails server\u201c", "body": "<p>Try to install nodejs</p>\n\n<pre><code>sudo apt-get install nodejs\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7435365, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0luSUWtj0bU/AAAAAAAAAAI/AAAAAAAAABY/YcHsr2yLvQQ/photo.jpg?sz=128", "display_name": "Ring", "link": "https://stackoverflow.com/users/7435365/ring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "closed_date": 1484742476, "accepted_answer_id": 41719211, "answer_count": 1, "score": 0, "last_activity_date": 1484745469, "creation_date": 1484741760, "last_edit_date": 1484745469, "question_id": 41719178, "link": "https://stackoverflow.com/questions/41719178/ruby-on-rails-errors-on-command-rails-server", "closed_reason": "Duplicate", "title": "Ruby on rails errors on command \u201crails server\u201c", "body": "<p>Here is my stack trace:</p>\n\n<p><img src=\"https://i.stack.imgur.com/f9YZ5.png\" alt=\"Rails server stack trace\"></p>\n\n<p>I'm running Ubuntu 16.10 x64.</p>\n"}, {"tags": ["ruby", "ssh", "shoes"], "answers": [{"tags": [], "owner": {"reputation": 6258, "user_id": 1527018, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/62e4e73fe7386a5e9401f90dc98c7584?s=128&d=identicon&r=PG", "display_name": "mic4ael", "link": "https://stackoverflow.com/users/1527018/mic4ael"}, "is_accepted": false, "score": 1, "last_activity_date": 1484741597, "creation_date": 1484741597, "answer_id": 41719129, "question_id": 41718966, "link": "https://stackoverflow.com/questions/41718966/not-getting-output-result-of-an-ssh-command/41719129#41719129", "title": "Not getting output / result of an SSH command", "body": "<p>Take a look at the <a href=\"http://net-ssh.github.io/net-ssh/Net/SSH/Connection/Channel.html#method-i-exec\" rel=\"nofollow noreferrer\">docs</a>. The block you are passing as the second argument to the <code>exec</code> method expects only two arguments <code>ch</code> and <code>success</code>. You need to make sure you add a callback which fires once the data is available. For example:</p>\n\n<pre><code>channel.on_data do |ch, data|\n  puts \"got stdout: #{data}\"\nend\n</code></pre>\n\n<p>You can also use <code>ssh.exec</code> method.</p>\n"}, {"tags": [], "owner": {"reputation": 179, "user_id": 1418018, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b9b5fae51bb864131d6c4c41bf540d8a?s=128&d=identicon&r=PG&f=1", "display_name": "user1418018", "link": "https://stackoverflow.com/users/1418018/user1418018"}, "is_accepted": false, "score": 1, "last_activity_date": 1484750731, "creation_date": 1484750731, "answer_id": 41722362, "question_id": 41718966, "link": "https://stackoverflow.com/questions/41718966/not-getting-output-result-of-an-ssh-command/41722362#41722362", "title": "Not getting output / result of an SSH command", "body": "<p>This works:</p>\n\n<pre><code>Net::SSH.start('hostname', username, :password =&gt; password) do |ssh|\n  ssh.open_channel do |channel|\n    output = channel.exec \"ls\" do |ch, success, data|\n      if success then\n        channel.on_data do |ch, data|\n            alert \"#{data}\"\n        end\n      end\n    end\n  end\n  ssh.loop\nend\n</code></pre>\n\n<p>Issue was, there exists a welcome message upon logging in (and the first line of it is blank). The \"ssh.loop\" allows to go through all the lines of welcome message and, finally, to the result of the \"ls\" command.</p>\n"}], "owner": {"reputation": 179, "user_id": 1418018, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b9b5fae51bb864131d6c4c41bf540d8a?s=128&d=identicon&r=PG&f=1", "display_name": "user1418018", "link": "https://stackoverflow.com/users/1418018/user1418018"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1484750731, "creation_date": 1484741062, "question_id": 41718966, "link": "https://stackoverflow.com/questions/41718966/not-getting-output-result-of-an-ssh-command", "title": "Not getting output / result of an SSH command", "body": "<p>I am connecting to a server, want to run a command and print the output. Here's the code:</p>\n\n<pre><code>def log_in\n  Net::SSH.start('hostname', 'username', :password =&gt; \"password\") do |ssh|\n    ssh.open_channel do |channel|\n      output = channel.exec \"ls\" do |ch, success, data|\n        if success then\n          alert \"Result: #{output} #{success} #{data}\"\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>The result is \"output\" being an empty list [], \"success\" being true and \"data\" being empty. Obviously, this shouldn't be the case, as when I am logged in through the terminal and hit the \"ls\" command, there are several files / folders listed. Where's my mistake? </p>\n\n<p>Interestingly enough, if I send gibberish as a command, e.g. instead of \"ls\", I send \"asdfgh\", it returns the same ([], true, empty).\nUsing Shoes / Ruby.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "email"], "answers": [{"comments": [{"owner": {"reputation": 159, "user_id": 5010747, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/97ad96dbc15ff4193aedda53bbc818ea?s=128&d=identicon&r=PG&f=1", "display_name": "Aparna V", "link": "https://stackoverflow.com/users/5010747/aparna-v"}, "edited": false, "score": 0, "creation_date": 1484743447, "post_id": 41718901, "comment_id": 70634071, "body": "If a have a couple of words which shouldn&#39;t be included in the subject line, it doesn&#39;t work when i include all the words after SUBJECT tag.For eg:- Mail.find(keys: [&#39;UNSEEN&#39;,&#39;NOT&#39;,&#39;SUBJECT&#39;,[&quot;Development&quot;,&quot;Uat&quot;]],:count =&gt; 100,:what =&gt;:all)"}, {"owner": {"reputation": 159, "user_id": 5010747, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/97ad96dbc15ff4193aedda53bbc818ea?s=128&d=identicon&r=PG&f=1", "display_name": "Aparna V", "link": "https://stackoverflow.com/users/5010747/aparna-v"}, "edited": false, "score": 0, "creation_date": 1484743533, "post_id": 41718901, "comment_id": 70634141, "body": "Do you find any solution for this Mr Eric Duminil? Thanks in advance"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 159, "user_id": 5010747, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/97ad96dbc15ff4193aedda53bbc818ea?s=128&d=identicon&r=PG&f=1", "display_name": "Aparna V", "link": "https://stackoverflow.com/users/5010747/aparna-v"}, "edited": false, "score": 1, "creation_date": 1484743632, "post_id": 41718901, "comment_id": 70634200, "body": "I cannot test it, but it should be something like <code>[&#39;UNSEEN&#39;, &#39;NOT&#39;, &#39;SUBJECT&#39;,&#39;word1&#39;, &#39;NOT&#39;, &#39;SUBJECT&#39;, &#39;word2&#39;]</code>"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1484740885, "creation_date": 1484740885, "answer_id": 41718901, "question_id": 41717656, "link": "https://stackoverflow.com/questions/41717656/finding-out-unread-mails-which-do-not-have-certain-keywords-included-in-the-subj/41718901#41718901", "title": "Finding out unread mails which do not have certain keywords included in the subject in my mailbox using Mail gem", "body": "<p>Note that it is an IMAP query, so it uses <a href=\"https://en.wikipedia.org/wiki/Polish_notation\" rel=\"nofollow noreferrer\">Polish notation</a> :</p>\n\n<pre><code>Mail.find(keys: ['UNSEEN', 'NOT', 'SUBJECT',\"development\"],:count =&gt; 100,:what =&gt;:all)\n</code></pre>\n\n<p>It worked on my computer with Gmail IMAP.</p>\n\n<p>One problem was that an Unseen mail was considered Seen as soon as I retrieved it to check <code>subject</code> and <code>from</code>.</p>\n"}], "owner": {"reputation": 159, "user_id": 5010747, "user_type": "registered", "accept_rate": 8, "profile_image": "https://www.gravatar.com/avatar/97ad96dbc15ff4193aedda53bbc818ea?s=128&d=identicon&r=PG&f=1", "display_name": "Aparna V", "link": "https://stackoverflow.com/users/5010747/aparna-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 205, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484740885, "creation_date": 1484737241, "last_edit_date": 1484737378, "question_id": 41717656, "link": "https://stackoverflow.com/questions/41717656/finding-out-unread-mails-which-do-not-have-certain-keywords-included-in-the-subj", "title": "Finding out unread mails which do not have certain keywords included in the subject in my mailbox using Mail gem", "body": "<p>I am able to read the unread emails with the word \"development\" from my mailbox using:  </p>\n\n<pre><code>Mail.find(keys: ['UNSEEN','SUBJECT',\"development\"],:count =&gt; 100,:what =&gt;:all).\n</code></pre>\n\n<p>I now want to retrieve the unread mails from my mailbox with out the word \"development\" in subject line.</p>\n\n<p>I read <a href=\"http://james.apache.org/server/rfclist/imap4/rfc2060.txt\" rel=\"nofollow noreferrer\">RFC2060</a>, section 6.4.4, and tried UNKEYWORD AND NOT methods, but it didn't help. Can anybody suggest me an appropriate answer for the same?  </p>\n"}, {"tags": ["arrays", "ruby", "date"], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 4, "last_activity_date": 1484737738, "last_edit_date": 1484737738, "creation_date": 1484737404, "answer_id": 41717719, "question_id": 41717613, "link": "https://stackoverflow.com/questions/41717613/convert-dates-in-different-formats-to-a-specific-format-in-ruby/41717719#41717719", "title": "convert &#39;dates&#39; in different formats to a specific format in ruby", "body": "<p><code>'yyyy-mm-dd'</code> isn't a valid <code>strpfime</code> format. You need to convert it (<code>'%Y-%m-%d'</code>) first :</p>\n\n<pre><code>require 'date'\n\ndate_val = ['12-20-1986', '23-01-2013', '2013-01-01', '12/01/2013', '23/12/1980']\nformats = ['mm-dd-yyyy', 'dd-mm-yyyy', 'yyyy-dd-mm', 'mm/dd/yyyy', 'dd/mm/yyyy']\nrequired_format = 'yyyy-mm-dd'\n\ndef to_strf_format(mmddyyyy)\n  mmddyyyy.sub('yyyy','%Y').sub('dd','%d').sub('mm','%m')\nend\n\nnew_date_vals = date_val.zip(formats).map do |date_str, mmddyyyy|\n  date = Date.strptime(date_str, to_strf_format(mmddyyyy))\n  date.strftime(to_strf_format(required_format))\nend\n\np new_date_vals\n#=&gt; [\"1986-12-20\", \"2013-01-23\", \"2013-01-01\", \"2013-12-01\", \"1980-12-23\"]\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 3726057, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f7b9a365193c2b770d3a29c1524a8702?s=128&d=identicon&r=PG&f=1", "display_name": "s c", "link": "https://stackoverflow.com/users/3726057/s-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 41717719, "answer_count": 1, "score": 1, "last_activity_date": 1484737738, "creation_date": 1484737143, "question_id": 41717613, "link": "https://stackoverflow.com/questions/41717613/convert-dates-in-different-formats-to-a-specific-format-in-ruby", "title": "convert &#39;dates&#39; in different formats to a specific format in ruby", "body": "<p>I have arrays as below:</p>\n\n<pre><code>date_val = ['12-20-1986', '23-01-2013', '2013-01-01', '12/01/2013', '23/12/1980']\nformats = ['mm-dd-yyyy', 'dd-mm-yyyy', 'yyyy-dd-mm', 'mm/dd/yyyy', 'dd/mm/yyyy']\n</code></pre>\n\n<p>where the array <code>formats</code> is showing the format in which array <code>date_val</code> is storing values.</p>\n\n<p>I am executing a loop in which one by one all the values will come and i need to convert the values in the array <code>date_val</code> to the <code>required_format</code></p>\n\n<pre><code>required_format = 'yyyy-mm-dd'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "session"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1484739919, "creation_date": 1484739919, "answer_id": 41718593, "question_id": 41717232, "link": "https://stackoverflow.com/questions/41717232/list-sessions-for-current-user-only-in-rails/41718593#41718593", "title": "List sessions for current user only in Rails", "body": "<p>If you use <code>PostgreSQL</code> as a backend, you might simply set a serialization <a href=\"https://github.com/rails/activerecord-session_store#configuration\" rel=\"nofollow noreferrer\">to be <code>:json</code></a>:</p>\n\n<pre><code>ActiveRecord::SessionStore::Session.serializer = :json\n</code></pre>\n\n<p>and query the <code>json</code> field against postgres.</p>\n\n<hr>\n\n<p>If you use <code>MySQL</code>, you could implement your own session class:</p>\n\n<pre><code>ActionDispatch::Session::ActiveRecordStore.session_class = MySessionClass\n</code></pre>\n\n<p>and implement a <code>pre_commit</code> hook, saving the <code>user_id</code> in the respective column in your table explicitly. Afterwards just query against this column.</p>\n"}, {"tags": [], "owner": {"reputation": 778, "user_id": 490148, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fdf74175f7ff2d2ff2c03c10ca2bce39?s=128&d=identicon&r=PG", "display_name": "virtuexru", "link": "https://stackoverflow.com/users/490148/virtuexru"}, "is_accepted": false, "score": 1, "last_activity_date": 1484750553, "creation_date": 1484750553, "answer_id": 41722298, "question_id": 41717232, "link": "https://stackoverflow.com/questions/41717232/list-sessions-for-current-user-only-in-rails/41722298#41722298", "title": "List sessions for current user only in Rails", "body": "<p>If I'm not mistaken you can use the same call <code>current_user</code> in the controller; so if you setup a <code>before_filter</code> on that controller/route you can use the same code to filter against <code>current_user.id</code></p>\n\n<p>Something like:</p>\n\n<pre><code>before_filter :get_user_session\n\ndef get_user_session\n  Session.all.each do |session|\n    if Marshal.load(Base64.decode64(session.data))['user_id'] == current_user.id\n      # do things\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1044, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1484750553, "creation_date": 1484736149, "question_id": 41717232, "link": "https://stackoverflow.com/questions/41717232/list-sessions-for-current-user-only-in-rails", "title": "List sessions for current user only in Rails", "body": "<p>I'm using the <code>activerecord-session_store</code> gem to store sessions in the database.</p>\n\n<p>I list sessions with this method in my SessionsController:</p>\n\n<pre><code>def index\n  @sessions = Session.all\nend\n</code></pre>\n\n<p>However this lists ALL sessions in the app and not just ones for the currently logged in user. The database table for sessions has the following columns: <code>id, session_id, data, created_at, updated_at</code> so there is no <code>user_id</code> column to filter on.</p>\n\n<p>I can access the <code>user_id</code> in the session data with <code>Marshal.load(Base64.decode64(session.data))['user_id']</code></p>\n\n<p>How can I use this data to filter the list? So far all I can think of is to do a conditional in the View that compares it against the <code>current_user.id</code></p>\n\n<p>e.g.</p>\n\n<pre><code>&lt;% @sessions.each do |session| %&gt;\n  &lt;% if Marshal.load(Base64.decode64(session.data))['user_id'] == current_user.id %&gt;\n    &lt;!-- LIST SESSION --&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "class", "hash"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 3, "creation_date": 1484732179, "post_id": 41714744, "comment_id": 70626416, "body": "&quot; if I use a class, with the <b>same code</b>&quot; \u2013 Here&#39;s a hint: it&#39;s not the same code. Compare the differences, and you will find the error."}], "answers": [{"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1484729864, "creation_date": 1484729864, "answer_id": 41715006, "question_id": 41714744, "link": "https://stackoverflow.com/questions/41714744/not-able-to-create-an-a-z-initialised-hash-in-ruby-class-why/41715006#41715006", "title": "Not able to create an (&#39;A&#39;..&#39;Z&#39;) initialised hash in ruby class? Why?", "body": "<p>The problem is that <code>#each</code> will return the array you iterated over. Hence after you assign that to <code>@abcliste</code>, all the <code>#store</code> calls don't matter as you have replaced the value of the instance variable altogether.</p>\n\n<p>Remove the second assignment.</p>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1484730663, "post_id": 41715036, "comment_id": 70625386, "body": "<code>(&#39;A&#39;..&#39;Z&#39;).zip([&quot;&quot;]*(&#39;A&#39;..&#39;Z&#39;).count).to_h</code>"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1484732737, "post_id": 41715036, "comment_id": 70626829, "body": "@mudasobwa: Thanks. I though about it, but <code>zip</code> doesn&#39;t make sense here IMHO."}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1484788984, "post_id": 41715036, "comment_id": 70658743, "body": "@mudasobwa beautifully elegant! You can even shorten it to <code>(&#39;a&#39;..&#39;z&#39;).zip([&#39;&#39;]).to_h</code>"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 2, "last_activity_date": 1484732078, "last_edit_date": 1484732078, "creation_date": 1484729976, "answer_id": 41715036, "question_id": 41714744, "link": "https://stackoverflow.com/questions/41714744/not-able-to-create-an-a-z-initialised-hash-in-ruby-class-why/41715036#41715036", "title": "Not able to create an (&#39;A&#39;..&#39;Z&#39;) initialised hash in ruby class? Why?", "body": "<h1>Your code</h1>\n\n<p>You don't need <code>to_a</code>, and you shouldn't overwrite @abcliste :</p>\n\n<pre><code>@abcliste = {}\n('A'..'Z').each{ |letter| @abcliste.store(letter,\"\")}\nprint @abcliste\n</code></pre>\n\n<h1>Alternatives</h1>\n\n<h3>each_with_object</h3>\n\n<p>The above code can be shortened with <code>each_with_object</code> :</p>\n\n<pre><code>@abcliste = ('A'..'Z').each_with_object({}) { |letter, liste| liste.store(letter,\"\") }\n</code></pre>\n\n<h3>map</h3>\n\n<pre><code>('A'..'Z').map{|letter| [letter, \"\"] }.to_h\n#=&gt; {\"A\"=&gt;\"\", \"B\"=&gt;\"\", \"C\"=&gt;\"\", \"D\"=&gt;\"\", \"E\"=&gt;\"\", \"F\"=&gt;\"\", \"G\"=&gt;\"\", \"H\"=&gt;\"\", \"I\"=&gt;\"\", \"J\"=&gt;\"\", \"K\"=&gt;\"\", \"L\"=&gt;\"\", \"M\"=&gt;\"\", \"N\"=&gt;\"\", \"O\"=&gt;\"\", \"P\"=&gt;\"\", \"Q\"=&gt;\"\", \"R\"=&gt;\"\", \"S\"=&gt;\"\", \"T\"=&gt;\"\", \"U\"=&gt;\"\", \"V\"=&gt;\"\", \"W\"=&gt;\"\", \"X\"=&gt;\"\", \"Y\"=&gt;\"\", \"Z\"=&gt;\"\"}\n</code></pre>\n\n<p>It first creates an array of pairs (letter and \"\"), and converts it to a Hash.</p>\n\n<h3>hash with default</h3>\n\n<p>Yet another possibility would be to just define a Hash with a default value :</p>\n\n<pre><code>@abcliste = Hash.new{|h,k| h[k] = \"\" }\np @abcliste\n#=&gt; {}\n@abcliste[\"A\"] &lt;&lt; 'letters'\np @abcliste[\"A\"]\n#=&gt; \"letters\"\np @abcliste[\"B\"]\n#=&gt; \"\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1826, "user_id": 5150708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/252ff188dc7377773468944f8794dc3f?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh Sharma", "link": "https://stackoverflow.com/users/5150708/santosh-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1484732269, "creation_date": 1484732269, "answer_id": 41715856, "question_id": 41714744, "link": "https://stackoverflow.com/questions/41714744/not-able-to-create-an-a-z-initialised-hash-in-ruby-class-why/41715856#41715856", "title": "Not able to create an (&#39;A&#39;..&#39;Z&#39;) initialised hash in ruby class? Why?", "body": "<p>Try Following.</p>\n\n<pre><code>class Abcliste\n  def initialize\n    @abcliste = {}\n    ('A'..'Z').to_a.each { |letter| @abcliste.store(letter, \"\") }\n    print @abcliste\n  end\nend\n\na = Abcliste.new \n</code></pre>\n\n<p>output:</p>\n\n<pre><code>{\"A\"=&gt;\"\", \"B\"=&gt;\"\", \"C\"=&gt;\"\", \"D\"=&gt;\"\", \"E\"=&gt;\"\", \"F\"=&gt;\"\", \"G\"=&gt;\"\", \"H\"=&gt;\"\", \"I\"=&gt;\"\", \"J\"=&gt;\"\", \"K\"=&gt;\"\", \"L\"=&gt;\"\", \"M\"=&gt;\"\", \"N\"=&gt;\"\", \"O\"=&gt;\"\", \"P\"=&gt;\"\", \"Q\"=&gt;\"\", \"R\"=&gt;\"\", \"S\"=&gt;\"\", \"T\"=&gt;\"\", \"U\"=&gt;\"\", \"V\"=&gt;\"\", \"W\"=&gt;\"\", \"X\"=&gt;\"\", \"Y\"=&gt;\"\", \"Z\"=&gt;\"\"} =&gt; #&lt;Abcliste:0x888f9d4 @abcliste={\"A\"=&gt;\"\", \"B\"=&gt;\"\", \"C\"=&gt;\"\", \"D\"=&gt;\"\", \"E\"=&gt;\"\", \"F\"=&gt;\"\", \"G\"=&gt;\"\", \"H\"=&gt;\"\", \"I\"=&gt;\"\", \"J\"=&gt;\"\", \"K\"=&gt;\"\", \"L\"=&gt;\"\", \"M\"=&gt;\"\", \"N\"=&gt;\"\", \"O\"=&gt;\"\", \"P\"=&gt;\"\", \"Q\"=&gt;\"\", \"R\"=&gt;\"\", \"S\"=&gt;\"\", \"T\"=&gt;\"\", \"U\"=&gt;\"\", \"V\"=&gt;\"\", \"W\"=&gt;\"\", \"X\"=&gt;\"\", \"Y\"=&gt;\"\", \"Z\"=&gt;\"\"}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1484736431, "post_id": 41717003, "comment_id": 70629347, "body": "Note: if you need to return <code>hash</code> every time in your <code>inject</code>, you need <code>each_with_object</code>."}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1484737965, "post_id": 41717003, "comment_id": 70630380, "body": "Good point - though you do need to be careful with <code>each_with_object</code> <a href=\"http://stackoverflow.com/a/19064234/1014251\">stackoverflow.com/a/19064234/1014251</a>"}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1484738219, "post_id": 41717003, "comment_id": 70630556, "body": "Yes - and I&#39;m just about to update my answer to show that. I just wanted to add a note about the difference between <code>inject</code> and <code>each_with_object</code>. I should have updated, then commented."}], "tags": [], "owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "is_accepted": false, "score": 0, "last_activity_date": 1484738317, "last_edit_date": 1484738317, "creation_date": 1484735531, "answer_id": 41717003, "question_id": 41714744, "link": "https://stackoverflow.com/questions/41714744/not-able-to-create-an-a-z-initialised-hash-in-ruby-class-why/41717003#41717003", "title": "Not able to create an (&#39;A&#39;..&#39;Z&#39;) initialised hash in ruby class? Why?", "body": "<p>First, <a href=\"http://nicholshayes.co.uk/blog/?p=267\" rel=\"nofollow noreferrer\">I think it is bad practice to use object initialization to do more than load data into a newly create instance</a>. If all you want to do is pass around a function, then you should use a Module and not a Class.</p>\n\n<pre><code>module Abcliste\n  def self.for(range, content = '')\n    range.each_with_object({}){|element, hash| hash[element] = content}\n  end\nend\n\nputs Abcliste.for 'A'..'Z'\n</code></pre>\n\n<p>Will output:</p>\n\n<blockquote>\n  <p>{\"A\"=>\"\", \"B\"=>\"\", \"C\"=>\"\", \"D\"=>\"\", \"E\"=>\"\", \"F\"=>\"\", \"G\"=>\"\",\n  \"H\"=>\"\", \"I\"=>\"\", \"J\"=>\"\", \"K\"=>\"\", \"L\"=>\"\", \"M\"=>\"\", \"N\"=>\"\",\n  \"O\"=>\"\", \"P\"=>\"\", \"Q\"=>\"\", \"R\"=>\"\", \"S\"=>\"\", \"T\"=>\"\", \"U\"=>\"\",\n  \"V\"=>\"\", \"W\"=>\"\", \"X\"=>\"\", \"Y\"=>\"\", \"Z\"=>\"\"}</p>\n</blockquote>\n\n<p>And this code will also allow you to do this:</p>\n\n<pre><code>puts Abcliste.for 1..10, 'foo'\n</code></pre>\n\n<blockquote>\n  <p>{1=>\"foo\", 2=>\"foo\", 3=>\"foo\", 4=>\"foo\", 5=>\"foo\", 6=>\"foo\", 7=>\"foo\",\n  8=>\"foo\", 9=>\"foo\", 10=>\"foo\"}</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "is_accepted": false, "score": 1, "last_activity_date": 1484789084, "last_edit_date": 1484789084, "creation_date": 1484747476, "answer_id": 41721218, "question_id": 41714744, "link": "https://stackoverflow.com/questions/41714744/not-able-to-create-an-a-z-initialised-hash-in-ruby-class-why/41721218#41721218", "title": "Not able to create an (&#39;A&#39;..&#39;Z&#39;) initialised hash in ruby class? Why?", "body": "<p>Here is what happens in your code</p>\n\n<pre><code>@abcliste = {}\n@abcliste = ('A'..'Z').to_a.each { |letter| @abcliste[letter] = \"\" }\n</code></pre>\n\n<p>Things happen in this order</p>\n\n<ul>\n<li>You create <code>{}</code> and assign to <code>@abcliste</code></li>\n<li>You use an <code>each</code> loop to store all values in the hash</li>\n<li><code>@abcliste</code> has the correct value now, but then \u2026</li>\n<li>You assign the return value of <code>each</code> to <code>@abcliste</code> \u2014 uh oh!</li>\n</ul>\n\n<p>When you execute <code>array.each { ... }</code> the return value of <code>each</code> is the array <code>array</code>.</p>\n"}], "owner": {"reputation": 131, "user_id": 6743057, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-FaIDrFXrlRU/AAAAAAAAAAI/AAAAAAAA6Qg/oE8tu_AVt94/photo.jpg?sz=128", "display_name": "Chlodwig Radulf", "link": "https://stackoverflow.com/users/6743057/chlodwig-radulf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1484789084, "creation_date": 1484728935, "last_edit_date": 1484785398, "question_id": 41714744, "link": "https://stackoverflow.com/questions/41714744/not-able-to-create-an-a-z-initialised-hash-in-ruby-class-why", "title": "Not able to create an (&#39;A&#39;..&#39;Z&#39;) initialised hash in ruby class? Why?", "body": "<p>I want to create a hash, that is initialised with the letters <code>'A'..'Z'</code> and <code>\"\"</code> on the other hand.</p>\n\n<pre><code>abcliste = {}\n('A'..'Z').to_a.each { |letter| abcliste[letter] = \"\"}\nprint abcliste # =&gt; {\"A\"=&gt;\"\", \"B\"=&gt;\"\", \"C\"=&gt;\"\", ... , \"Z\"=&gt;\"\"}\n</code></pre>\n\n<p><strong>But</strong>, if I use a class, with the same code, I will get an array <code>[\"A\", \"B\", \"C\", \"D\", \"E\", ... , \"Z\"]</code>:</p>\n\n<pre><code>class Abcliste\n  def initialize\n    @abcliste = {}\n    @abcliste = ('A'..'Z').to_a.each { |letter| @abcliste.store(letter, \"\") }\n    print @abcliste # =&gt; [\"A\", \"B\", \"C\", \"D\", \"E\", ... , \"Z\"]\n  end\nend\n\na = Abcliste.new # =&gt; [\"A\", \"B\", \"C\", \"D\", \"E\", ... , \"Z\"]\n</code></pre>\n\n<ol>\n<li>Why is this so?</li>\n<li>How can I write a class, so that I generates an hash from ('A'..'Z')</li>\n</ol>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1351104"}, "edited": false, "score": 0, "creation_date": 1484728511, "post_id": 41713958, "comment_id": 70624069, "body": "Is <code>internal_dependencies</code> an instance variable?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1484728612, "post_id": 41713958, "comment_id": 70624121, "body": "can <code>s</code> have more than one line?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1484728825, "post_id": 41713958, "comment_id": 70624259, "body": "you can also replace <code>do end</code> with curly braces. I also think that <code>end.some_method</code> looks weird"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1484732425, "post_id": 41713958, "comment_id": 70626601, "body": "@cobaltsoda: In Ruby, instance variables start with an <code>@</code> sigil, so it cannot possibly be an instance variable. It could theoretically be either a local variable or a receiverless message send without an argument list. Which of the two it is depends on whether an assignment to a local variable of that name has been parsed before the line in question. But note that <code>internal_dependencies</code> does not actually appear in the OP&#39;s code. There is only a message send to the <code>internal_dependencies=</code> method."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1351104"}, "edited": false, "score": 0, "creation_date": 1484734256, "post_id": 41713958, "comment_id": 70627899, "body": "I know how instance variables work. I was asking <i>specifically for this question</i> if <code>@internal_dependencies</code> has been defined elsewhere."}, {"owner": {"reputation": 7980, "user_id": 1213907, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ksAFh.png?s=128&g=1", "display_name": "KeepCalmAndCarryOn", "link": "https://stackoverflow.com/users/1213907/keepcalmandcarryon"}, "edited": false, "score": 0, "creation_date": 1484736264, "post_id": 41713958, "comment_id": 70629235, "body": "I have` attr_accessor :internal_dependencies` on the class which I think creates an instance variable."}, {"owner": {"reputation": 7980, "user_id": 1213907, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ksAFh.png?s=128&g=1", "display_name": "KeepCalmAndCarryOn", "link": "https://stackoverflow.com/users/1213907/keepcalmandcarryon"}, "edited": false, "score": 0, "creation_date": 1484736318, "post_id": 41713958, "comment_id": 70629266, "body": "and yes there can be more than one line. Without the <code>compact</code> it creates empty array entries for all the files that don&#39;t have a match"}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1484726527, "creation_date": 1484726527, "answer_id": 41714079, "question_id": 41713958, "link": "https://stackoverflow.com/questions/41713958/ruby-do-map-and-compact-together/41714079#41714079", "title": "ruby do map and compact together", "body": "<p>To avoid <code>compact</code> one might use <code>reduce</code> (<a href=\"https://ruby-doc.org/core/Enumerable.html#method-i-each_with_object\" rel=\"nofollow noreferrer\"><code>Enumerable#each_with_object</code></a> in this particular case) instead of <code>map</code>:</p>\n\n<pre><code>def get_internal_deps\n  self.internal_dependencies = sources.each_with_object do |f, acc|\n    s = File.open(File.join(self.dir, f)).grep(/\\d{8}-\\w{5}/)\n    acc &lt;&lt; {:file =&gt; f, :line =&gt; s} if s.length &gt; 0\n  end\nend\n</code></pre>\n\n<p>Also, note that an explicit <code>self</code> receiver might make sense in a case of assignment, but it is completely redundant in RHO (<code>sources</code> in this snippet.)</p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1351104"}, "edited": false, "score": 0, "creation_date": 1484741764, "post_id": 41714855, "comment_id": 70632886, "body": "You could <code>return @internal_dependencies if defined? @internal_dependencies</code> at the start of the method, and then use <code>each</code> to build the array all in one loop (instead of <code>.map.reject</code>). Apart from that, great answer."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1484762655, "post_id": 41714855, "comment_id": 70647272, "body": "@cobaltsoda: Thanks for the feedback. I&#39;m not sure I understand what the advantage would be, though. I usually prefer chaining specialized Enumerable methods instead of usung <code>each</code>, as long as it doesn&#39;t result in more iterations."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1351104"}, "edited": false, "score": 0, "creation_date": 1484763624, "post_id": 41714855, "comment_id": 70647850, "body": "Sorry, hard to explain over a comment box. I meant something like <code>@internal_dependencies = []; sources.each { |s| p = parse_dependency(s); @internal_dependencies &lt;&lt; p if p[:line] }; @internal_dependencies</code>, which iterates over each item once, whereas <code>.map.reject</code> iterates over each item twice."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1484763884, "post_id": 41714855, "comment_id": 70647987, "body": "Thanks. I guess it&#39;s a matter of taste. BTW, you call <code>parse_dependency</code> twice ;)"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1351104"}, "edited": false, "score": 0, "creation_date": 1484764015, "post_id": 41714855, "comment_id": 70648061, "body": "It would only really benefit if there were a large amount of dependencies, I just like nit-picking."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1484764170, "post_id": 41714855, "comment_id": 70648148, "body": "Even then, I&#39;m not sure it would make much of a difference. Reading and parsing a file will always be much slower than looking up a value in a Hash."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 1, "last_activity_date": 1484730902, "last_edit_date": 1484730902, "creation_date": 1484729337, "answer_id": 41714855, "question_id": 41713958, "link": "https://stackoverflow.com/questions/41713958/ruby-do-map-and-compact-together/41714855#41714855", "title": "ruby do map and compact together", "body": "<h1>Some notes</h1>\n\n<ul>\n<li>Your method is called <code>get_internal_deps</code>, but it looks like it actually sets an instance variable.</li>\n<li>You could define <code>internal_dependencies</code> and use caching.</li>\n<li>In this case, you'd need to remove any <code>attr_reader/writer/accessor</code> for <code>@internal_dependencies</code>.</li>\n<li><code>File.open(f)</code> isn't really clean.</li>\n<li>You don't need <code>self</code> in <code>self.dir</code> or <code>self.sources</code></li>\n<li><code>:line</code> is an Array. Shouldn't it be called :lines?</li>\n<li>2 separate, short methods might be better than a bigger one.</li>\n</ul>\n\n<h1>Refactored code</h1>\n\n<pre><code>def internal_dependencies\n  @internal_dependencies ||= sources.map{|s| parse_dependency(s) }\n                                    .reject{|h| h[:line].empty? }\nend\n\nprivate\n\ndef parse_dependency(source)\n  {\n    file: source,\n    line: File.readlines(File.join(dir, source)).grep(/\\d{8}-\\w{5}/)\n  }\nend\n</code></pre>\n"}], "owner": {"reputation": 7980, "user_id": 1213907, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ksAFh.png?s=128&g=1", "display_name": "KeepCalmAndCarryOn", "link": "https://stackoverflow.com/users/1213907/keepcalmandcarryon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 727, "favorite_count": 0, "accepted_answer_id": 41714855, "answer_count": 2, "score": 2, "last_activity_date": 1484741126, "creation_date": 1484726091, "question_id": 41713958, "link": "https://stackoverflow.com/questions/41713958/ruby-do-map-and-compact-together", "title": "ruby do map and compact together", "body": "<p>I'm new to ruby and this looks wrong but works fine</p>\n\n<pre><code>def get_internal_deps\n  self.internal_dependencies = self.sources.map do |f| \n    s = File.open(File.join(self.dir, f)).grep(/\\d{8}-\\w{5}/)\n    if s.length &gt; 0\n      {:file =&gt; f, :line =&gt; s}\n    end\n  end.compact\n  #how crazy does that look?\nend \n</code></pre>\n\n<p>So how do I do this without having an <code>end.compact</code>?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 72748, "user_id": 3185459, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PBjxg.jpg?s=128&g=1", "display_name": "RomanPerekhrest", "link": "https://stackoverflow.com/users/3185459/romanperekhrest"}, "edited": false, "score": 1, "creation_date": 1484724972, "post_id": 41713689, "comment_id": 70622202, "body": "what is the goal of concatenation? what should be matched by such regex?"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1484724990, "post_id": 41713689, "comment_id": 70622208, "body": "Is it JavaScript? The answer for the current question is either no, but there are ways depending on the language. For JS, see <a href=\"http://stackoverflow.com/questions/185510/how-can-i-concatenate-regex-literals-in-javascript\"><i>How can I concatenate regex literals in JavaScript?</i></a>."}, {"owner": {"reputation": 18939, "user_id": 2756409, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/UIrGI.jpg?s=128&g=1", "display_name": "TylerH", "link": "https://stackoverflow.com/users/2756409/tylerh"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1484773175, "post_id": 41713689, "comment_id": 70653081, "body": "@WiktorStribi\u017cew The question&#39;s been edited to specify Ruby. Can you re-consider your closure to see whether the dupe still applies?"}], "answers": [{"comments": [{"owner": {"reputation": 4516, "user_id": 2737435, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f14cf408fdb0a4ad5c9b6169557ced9?s=128&d=identicon&r=PG&f=1", "display_name": "XtraSimplicity", "link": "https://stackoverflow.com/users/2737435/xtrasimplicity"}, "edited": false, "score": 0, "creation_date": 1538544674, "post_id": 41713903, "comment_id": 92174228, "body": "This doesn&#39;t work in Ruby: <code>*** NoMethodError Exception: undefined method `+&#39; for &#47;my_str1&#47;:Regexp</code>"}, {"owner": {"reputation": 210, "user_id": 2120436, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yZn1B.jpg?s=128&g=1", "display_name": "prettycoder", "link": "https://stackoverflow.com/users/2120436/prettycoder"}, "edited": false, "score": 1, "creation_date": 1548800562, "post_id": 41713903, "comment_id": 95670988, "body": "that&#39;s not Ruby ;)"}], "tags": [], "owner": {"reputation": 346, "user_id": 5575309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0943fa244f818e9131ebeda73dc0b063?s=128&d=identicon&r=PG&f=1", "display_name": "Dasrath", "link": "https://stackoverflow.com/users/5575309/dasrath"}, "is_accepted": false, "score": -1, "last_activity_date": 1484725827, "last_edit_date": 1592644375, "creation_date": 1484725827, "answer_id": 41713903, "question_id": 41713689, "link": "https://stackoverflow.com/questions/41713689/is-it-possible-to-concat-two-regex-variables/41713903#41713903", "title": "Is it possible to concat two regex variables?", "body": "<p>If you have two regular expression , you can concatenate them like this:</p>\n<blockquote>\n<p>var r1 = /my_str/;</p>\n<p>var r2 = /my_str1/;</p>\n<p>var r3 = new RegExp( r1.source + r2.source );</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 2788627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcd00779176191c7f835a04068eb246f?s=128&d=identicon&r=PG&f=1", "display_name": "bpieck", "link": "https://stackoverflow.com/users/2788627/bpieck"}, "is_accepted": false, "score": 1, "last_activity_date": 1542887611, "creation_date": 1542887611, "answer_id": 53430454, "question_id": 41713689, "link": "https://stackoverflow.com/questions/41713689/is-it-possible-to-concat-two-regex-variables/53430454#53430454", "title": "Is it possible to concat two regex variables?", "body": "<p>Following works in Ruby - but I think it's not beautiful:</p>\n\n<pre><code>2.5.3 :001 &gt; r1 = /my_str1/\n =&gt; /my_str/\n2.5.3 :002 &gt; r2 = /my_str2/\n =&gt; /my_str1/\n2.5.3 :003 &gt; r3 = Regexp.new( \"#{r1.source}|#{r2.source}\" )\n =&gt; /my_str1|my_str2/\n</code></pre>\n\n<p>Of course you even could implement + on Regexp yourself, like this (but of course totally not recommended ^^):</p>\n\n<pre><code>class Regexp\n  def +(regexp)\n    self.class.new(\"#{source}|#{regexp.source}\")\n  end\nend\n</code></pre>\n\n<p>Then you can do:</p>\n\n<pre><code>2.5.3 :004 &gt;     class Regexp\n2.5.3 :005?&gt;       def +(regexp)\n2.5.3 :006?&gt;         self.class.new(\"#{source}|#{regexp.source}\")\n2.5.3 :007?&gt;       end\n2.5.3 :008?&gt;     end\n =&gt; :+\n2.5.3 :009 &gt; r1 + r2\n =&gt; /my_str1|my_str2/\n</code></pre>\n\n<p>There are of course reasons, why this is not implemented. I just assumed a or as concatenation (that should at least work in any cases - even when as mostly it's recommended definite start and end are defined in Regexp). But most probable you have some very different use case. So when you want to concatenate in different way, you maybe have to ensure that in first regexp <code>\\Z</code>and in second <code>\\A</code> has to be removed...</p>\n"}, {"comments": [{"owner": {"reputation": 21279, "user_id": 28558, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/5f44dde4b4617356f9a4880cb2f8fcdc?s=128&d=identicon&r=PG", "display_name": "Pistos", "link": "https://stackoverflow.com/users/28558/pistos"}, "edited": false, "score": 3, "creation_date": 1552970151, "post_id": 53437792, "comment_id": 97201109, "body": "I don&#39;t believe this is the solution OP wants.  <code>Regexp#union</code> does a regexp &quot;or&quot;, i.e. /my_str|my_str1/.  I think OP wants /my_strmy_str1/ or /my_str.*my_str1/."}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 5, "last_activity_date": 1542919514, "creation_date": 1542919514, "answer_id": 53437792, "question_id": 41713689, "link": "https://stackoverflow.com/questions/41713689/is-it-possible-to-concat-two-regex-variables/53437792#53437792", "title": "Is it possible to concat two regex variables?", "body": "<p><a href=\"https://ruby-doc.org/core-2.4.1/Regexp.html#method-c-union\" rel=\"noreferrer\">Regexp::union</a></p>\n\n<pre><code>r1 = /my_str/\nr2 = /my_str1/\nr3 = Regexp.union(r1, r2)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21279, "user_id": 28558, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/5f44dde4b4617356f9a4880cb2f8fcdc?s=128&d=identicon&r=PG", "display_name": "Pistos", "link": "https://stackoverflow.com/users/28558/pistos"}, "is_accepted": false, "score": 6, "last_activity_date": 1558623060, "last_edit_date": 1558623060, "creation_date": 1552970798, "answer_id": 55233814, "question_id": 41713689, "link": "https://stackoverflow.com/questions/41713689/is-it-possible-to-concat-two-regex-variables/55233814#55233814", "title": "Is it possible to concat two regex variables?", "body": "<p>Concatenate the <code>source</code>s and pass to <code>Regexp.new</code>:</p>\n\n<pre><code>2.4.1 :009 &gt; r1 = /a./\n =&gt; /a./ \n2.4.1 :010 &gt; r2 = /b{3}/\n =&gt; /b{3}/ \n2.4.1 :011 &gt; r3 = Regexp.new(r1.source + r2.source)\n =&gt; /a.b{3}/ \n2.4.1 :022 &gt; \"axbbb\" =~ r3\n =&gt; 0 \n2.4.1 :023 &gt; \"axbb\" =~ r3\n =&gt; nil \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 39041, "user_id": 27358, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/fed1635f89478c88eda07e87de452bcf?s=128&d=identicon&r=PG", "display_name": "David Moles", "link": "https://stackoverflow.com/users/27358/david-moles"}, "is_accepted": false, "score": 1, "last_activity_date": 1608065026, "creation_date": 1608065026, "answer_id": 65313400, "question_id": 41713689, "link": "https://stackoverflow.com/questions/41713689/is-it-possible-to-concat-two-regex-variables/65313400#65313400", "title": "Is it possible to concat two regex variables?", "body": "<p>Contra other answers, it's not strictly necessary to call <code>source</code>; in many cases <a href=\"https://ruby-doc.org/core-2.7.2/Regexp.html#method-i-to_s\" rel=\"nofollow noreferrer\"><code>Regexp#to_s</code></a> works just as well. From the docs:</p>\n<blockquote>\n<p>Returns a string containing the regular expression and its options (using the <code>?(opts:source)</code> notation. This string can be fed back in to ::new to a regular expression with the same semantics as the original.</p>\n</blockquote>\n<p>So often it's enough to just use string interpolation:</p>\n<pre class=\"lang-rb prettyprint-override\"><code>r1 = /my_str1/\n# =&gt; /my_str1/ \nr2 = /my_str2/\n# =&gt; /my_str2/ \nr3 = Regexp.new(&quot;#{r1}|#{r2}&quot;)\n# =&gt; /(?-mix:my_str1)|(?-mix:my_str2)/ \n</code></pre>\n<p>The result is less readable than the <code>/my_str1|my_str2/</code>, but will match identically -- the tradeoff is more readable source for a less readable regexp.</p>\n<p>That said, if you want to apply different options to the combined expression (or parts of it) than to the original expressions, you will need to call <code>source</code>.</p>\n<pre class=\"lang-rb prettyprint-override\"><code>r1 = /[a-z]\\n[0-9]/\nr2 = /[0-9]\\n[a-z]/\n\nr3 = Regexp.new(&quot;(?mi-x:(#{r1.source}|#{r2.source}))&quot;)\n# =&gt; /(?mi-x:([a-z]\\n[0-9]|[0-9]\\n[a-z]))/\nr3.match(&quot;A\\n1&quot;)\n# =&gt; #&lt;MatchData &quot;A\\n1&quot; 1:&quot;A\\n1&quot;&gt;        &lt;-- works\n\nr4 = Regexp.new(&quot;(?mi-x:(#{r1}|#{r2}))&quot;)\n# =&gt; /(?mi-x:((?-mix:[a-z]\\n[0-9])|(?-mix:[0-9]\\n[a-z])))/ \nr4.match(&quot;A\\n1&quot;)\n# =&gt; nil                                 &lt;-- doesn't work b/c wrong options\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 5448344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9202ba30e3b9437d3853598848543597?s=128&d=identicon&r=PG", "display_name": "Swapnil", "link": "https://stackoverflow.com/users/5448344/swapnil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3632, "favorite_count": 0, "answer_count": 5, "score": 7, "last_activity_date": 1608065026, "creation_date": 1484724909, "last_edit_date": 1484770202, "question_id": 41713689, "link": "https://stackoverflow.com/questions/41713689/is-it-possible-to-concat-two-regex-variables", "title": "Is it possible to concat two regex variables?", "body": "<p>Is it possible to concat two regex variables in Ruby?</p>\n\n<pre><code>r1 = /my_str/\nr2 = /my_str1/\nr3 = r1+r2\n</code></pre>\n\n<p>Can anyone give any suggestions?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-maps", "jquery-ui", "autocomplete"], "answers": [{"comments": [{"owner": {"reputation": 4391, "user_id": 3106174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mKAhl.jpg?s=128&g=1", "display_name": "Advice-Dog", "link": "https://stackoverflow.com/users/3106174/advice-dog"}, "edited": false, "score": 0, "creation_date": 1484767841, "post_id": 41713566, "comment_id": 70650172, "body": "I&#39;m not using <code>simple_form_for</code>. I&#39;m using <code>bootstrap_form_for</code> and I&#39;m worried that using both would add some issues.  And how do I provide the API key in that example? What file does it go into, or how does it go into the f.input field?"}, {"owner": {"reputation": 71, "user_id": 3908923, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pawxL.jpg?s=128&g=1", "display_name": "Sumit Dey", "link": "https://stackoverflow.com/users/3908923/sumit-dey"}, "reply_to_user": {"reputation": 4391, "user_id": 3106174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mKAhl.jpg?s=128&g=1", "display_name": "Advice-Dog", "link": "https://stackoverflow.com/users/3106174/advice-dog"}, "edited": false, "score": 0, "creation_date": 1484799638, "post_id": 41713566, "comment_id": 70661481, "body": "it may be simple_form_for, or it may be bootstrap_form_for, you can use any of them, but make sure that you have added an extra id = gmaps-input-address to that field. And for the api key, you can also do it without api key, in that case it will give a warning in console. simply add this line in the top of the view file where the input field is present &lt;script async defer type=&quot;text/javascript&quot; src=&quot;<a href=\"https://maps.googleapis.com/maps/api/js?sensor=false&quot;&gt;&lt;/script\" rel=\"nofollow noreferrer\">maps.googleapis.com/maps/api/js?sensor=false&quot;&gt;&lt;/&hellip;</a>&gt;"}], "tags": [], "owner": {"reputation": 71, "user_id": 3908923, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pawxL.jpg?s=128&g=1", "display_name": "Sumit Dey", "link": "https://stackoverflow.com/users/3908923/sumit-dey"}, "is_accepted": false, "score": 2, "last_activity_date": 1484724387, "creation_date": 1484724387, "answer_id": 41713566, "question_id": 41713123, "link": "https://stackoverflow.com/questions/41713123/ruby-on-rails-google-autocomplete-location/41713566#41713566", "title": "Ruby on Rails - Google Autocomplete Location", "body": "<p>Its pretty simple ..</p>\n\n<ol>\n<li>First ensure that you completed these steps deffined in <a href=\"https://github.com/kristianmandrup/gmaps-autocomplete-rails\" rel=\"nofollow noreferrer\">https://github.com/kristianmandrup/gmaps-autocomplete-rails</a> in the <strong>install</strong> section(no need of Customization section for beginers)</li>\n<li><p>Then place this in the view file </p>\n\n<p><code>= simple_form_for(resource) do |f|\n = f.input :address, :input_html =&gt;{:id =&gt; 'gmaps-input-address'}, :placeholder =&gt; 'Start typing a place name...'</code></p></li>\n</ol>\n\n<p>remember.. the id 'gmaps-input-address' should be present, and also provide the api key of google.</p>\n"}], "owner": {"reputation": 4391, "user_id": 3106174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mKAhl.jpg?s=128&g=1", "display_name": "Advice-Dog", "link": "https://stackoverflow.com/users/3106174/advice-dog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3131, "favorite_count": 2, "closed_date": 1512060976, "answer_count": 1, "score": -1, "last_activity_date": 1512015512, "creation_date": 1484722512, "question_id": 41713123, "link": "https://stackoverflow.com/questions/41713123/ruby-on-rails-google-autocomplete-location", "closed_reason": "Not suitable for this site", "title": "Ruby on Rails - Google Autocomplete Location", "body": "<p>I'm currently trying to implement an autocomplete location field but I'm unable to figure out how to get it working.</p>\n\n<p>Here is an <a href=\"http://rjshade.com/projects/gmaps-autocomplete/\" rel=\"nofollow noreferrer\">example</a> of what I'm trying to accomplish, except the map, I just need to enter a location and save the data to a model. Unfortunately the <a href=\"https://github.com/rjshade/gmaps-autocomplete\" rel=\"nofollow noreferrer\">linked repo's example</a> only shows how to use <code>simple_form_for</code>. I'm currently using <code>bootstrap_form_for</code> and can't figure out how to make it work.</p>\n\n<p>Same with <a href=\"https://github.com/kristianmandrup/gmaps-autocomplete-rails\" rel=\"nofollow noreferrer\" title=\"gmaps-autocomplete-rails\">gmaps-autocomplete-rails</a> and using <code>semantic_form_for</code>.</p>\n\n<p>I'm still trying to figure out where all the .js goes, and how it's setting up / working together with Rails.</p>\n\n<p>Any examples or tutorials would be greatly appreciated. </p>\n\n<p>Thanks for your help.</p>\n"}, {"tags": ["json", "ruby", "rspec"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 2, "creation_date": 1484722969, "post_id": 41713045, "comment_id": 70621263, "body": "I noticed you never accept the answers given to your questions. Make sure to go over your questions some time and accept the best answers given they solve your question. This way you let the community know, that the problem is solved and at the same time you reward the effort of the one, who has provided the solution"}, {"owner": {"reputation": 139, "user_id": 6731596, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae645e5557a6dd3db7e0585c8f7ae400?s=128&d=identicon&r=PG&f=1", "display_name": "Denis S.", "link": "https://stackoverflow.com/users/6731596/denis-s"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1484723254, "post_id": 41713045, "comment_id": 70621398, "body": "I&#39;m pretty new to stackoverflow and will follow your advice in future, Andrey"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1484725303, "post_id": 41713045, "comment_id": 70622353, "body": "In terms of accepting the answers you should be looking for a checkmark under the answer score."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1484727150, "post_id": 41713045, "comment_id": 70623259, "body": "I wonder how this question could get ever upvoted. Neither any effort is shown, nor the question itself is clear by any means."}], "answers": [{"comments": [{"owner": {"reputation": 139, "user_id": 6731596, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae645e5557a6dd3db7e0585c8f7ae400?s=128&d=identicon&r=PG&f=1", "display_name": "Denis S.", "link": "https://stackoverflow.com/users/6731596/denis-s"}, "edited": false, "score": 1, "creation_date": 1484722713, "post_id": 41713091, "comment_id": 70621142, "body": "That&#39;s a good point, Andrey!!!Thank you! Looks like there is no need to double check keys in the response"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1484727007, "post_id": 41713091, "comment_id": 70623174, "body": "I do not follow; <code>signal_events</code> is an array, not a hash. The question is unclear, though."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1484731587, "post_id": 41713091, "comment_id": 70625967, "body": "@mudasobwa I think OP meant the <code>&quot;signal&quot;</code> key inside the hash, which is an element of the <code>signal_events</code> array."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 6, "last_activity_date": 1484723016, "last_edit_date": 1484723016, "creation_date": 1484722386, "answer_id": 41713091, "question_id": 41713045, "link": "https://stackoverflow.com/questions/41713045/how-to-verify-that-i-get-only-one-key-from-json-response/41713091#41713091", "title": "How to verify that i get only one key from JSON response?", "body": "<p>Hash <strong><em>can not</em></strong> contain duplicated keys, so you will always have one value for any given key.</p>\n"}], "owner": {"reputation": 139, "user_id": 6731596, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ae645e5557a6dd3db7e0585c8f7ae400?s=128&d=identicon&r=PG&f=1", "display_name": "Denis S.", "link": "https://stackoverflow.com/users/6731596/denis-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 41713091, "answer_count": 1, "score": 1, "last_activity_date": 1484723034, "creation_date": 1484722208, "last_edit_date": 1484723034, "question_id": 41713045, "link": "https://stackoverflow.com/questions/41713045/how-to-verify-that-i-get-only-one-key-from-json-response", "title": "How to verify that i get only one key from JSON response?", "body": "<p>I get a response in JSON and need to make sure that i get only one 'signal' in signal_events. I'm using Ruby with rspec. </p>\n\n<pre><code>\"signal_events\": [\n{\n  \"id\": \"587e9ae969702d10bd5a0000\",\n  \"created_at\": 1484692201,\n  \"geo\": {\n    \"type\": \"Point\",\n    \"coordinates\": [\n      -153.45703125,\n      59.67773438\n    ]\n  },\n  \"expires_at\": 1484778601,\n  \"geohashes\": [\n    \"bddg\",\n    \"bdeh\"\n  ],\n  \"signal\": {\n    \"id\": \"587e9ae969702d0911060000\",\n    \"created_at\": 1484692201.24,\n    \"expires_at\": 1484778601.24,\n    \"signal_at\": 1484691607,\n    \"source\": \"usgs\",\n    \"updated_at\": 1484692144,\n    \"magnitude\": 2,\n    \"radius\": 6.36107901750268,\n    \"event_name\": \"earthquake\",\n    \"tsunami\": \"no\"\n  },\n  \"signal_type\": \"earthquake\",\n  \"centroid\": {\n    \"type\": \"Point\",\n    \"coordinates\": [\n      -153.45703125,\n      59.67773438\n    ]\n  },\n  \"location\": {\n    \"country\": \"United States\",\n    \"country_code\": \"US\",\n    \"city\": \"Kenai Peninsula Borough\",\n    \"region\": \"Kenai Peninsula Borough\",\n    \"region_code\": \"AK\"\n  }\n},\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-console"], "comments": [{"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1484719684, "post_id": 41712447, "comment_id": 70619952, "body": "Do you have the model post, in <code>app&#47;models&#47;post.rb</code>"}, {"owner": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "edited": false, "score": 0, "creation_date": 1484719789, "post_id": 41712447, "comment_id": 70620000, "body": "have you migrated the database?"}, {"owner": {"reputation": 47, "user_id": 7433957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66abdf44b540d28d80f7cb24c05e602d?s=128&d=identicon&r=PG&f=1", "display_name": "Hamza1510", "link": "https://stackoverflow.com/users/7433957/hamza1510"}, "reply_to_user": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1484720162, "post_id": 41712447, "comment_id": 70620140, "body": "@Sravan We haven&#39;t created a model yet, I&#39;m sure it&#39;s in the next steps of the tutorial. It would be weird if he didn&#39;t showed us that and went on to do this, but maybe he did."}, {"owner": {"reputation": 47, "user_id": 7433957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66abdf44b540d28d80f7cb24c05e602d?s=128&d=identicon&r=PG&f=1", "display_name": "Hamza1510", "link": "https://stackoverflow.com/users/7433957/hamza1510"}, "reply_to_user": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "edited": false, "score": 0, "creation_date": 1484720298, "post_id": 41712447, "comment_id": 70620189, "body": "@TimmyVonHeiss We haven&#39;t come this far in the tutorial. We&#39;ve only set up one route (get &#39;/posts&#39; =&gt; &#39;posts#index&#39;), created a controller (posts_controller.rb) and a view file views/posts/index.html.erb"}, {"owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "edited": false, "score": 0, "creation_date": 1484720571, "post_id": 41712447, "comment_id": 70620292, "body": "I just checked out the tutorial. Strangely enough, it does in fact start with the controller and make use of the model before explicitly going over how to create it. I think that tutorial is more about routes in particular than about rails a whole."}, {"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1484721009, "post_id": 41712447, "comment_id": 70620468, "body": "so, there you are, <code>Post.alll</code> says that, you should have a model and it is the data of that model"}, {"owner": {"reputation": 47, "user_id": 7433957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66abdf44b540d28d80f7cb24c05e602d?s=128&d=identicon&r=PG&f=1", "display_name": "Hamza1510", "link": "https://stackoverflow.com/users/7433957/hamza1510"}, "reply_to_user": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1484721692, "post_id": 41712447, "comment_id": 70620729, "body": "Jup! @Sravan, you were right about it. I was just taking his tutorial literally and ignored the fact that you need a model."}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 7433957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66abdf44b540d28d80f7cb24c05e602d?s=128&d=identicon&r=PG&f=1", "display_name": "Hamza1510", "link": "https://stackoverflow.com/users/7433957/hamza1510"}, "edited": false, "score": 0, "creation_date": 1484720661, "post_id": 41712547, "comment_id": 70620325, "body": "Ah, I see! Now something is happening, but I got a new error.  2.3.0 :001 &gt; Post.all   Post Load (0.6ms)  SELECT &quot;posts&quot;.* FROM &quot;posts&quot; ActiveRecord::StatementInvalid: SQLite3::SQLException: no such table: posts: SELECT &quot;posts&quot;.* FROM &quot;posts&quot;"}, {"owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "reply_to_user": {"reputation": 47, "user_id": 7433957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66abdf44b540d28d80f7cb24c05e602d?s=128&d=identicon&r=PG&f=1", "display_name": "Hamza1510", "link": "https://stackoverflow.com/users/7433957/hamza1510"}, "edited": false, "score": 0, "creation_date": 1484720948, "post_id": 41712547, "comment_id": 70620440, "body": "It looks like your tutorial is more about creating routes than about learning rails as a whole. I would recommend <a href=\"https://www.youtube.com/watch?v=nRyUn7D8zCc\" rel=\"nofollow noreferrer\">youtube.com/watch?v=nRyUn7D8zCc</a> if you&#39;re trying to learn rails. The first couple videos are about install and fundamentals, but if you want to pick roughly from where you are now, skip to part 4. I would recommend reviewing the basics if you&#39;re new to Ruby, however."}, {"owner": {"reputation": 47, "user_id": 7433957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66abdf44b540d28d80f7cb24c05e602d?s=128&d=identicon&r=PG&f=1", "display_name": "Hamza1510", "link": "https://stackoverflow.com/users/7433957/hamza1510"}, "edited": false, "score": 0, "creation_date": 1484721058, "post_id": 41712547, "comment_id": 70620496, "body": "I got it now, thank you for clearing that up for me. I just ran rails generate model post title: content: and migrated the database. Now I&#39;m on track again, thank you!"}], "tags": [], "owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "is_accepted": false, "score": 0, "last_activity_date": 1484719989, "creation_date": 1484719989, "answer_id": 41712547, "question_id": 41712447, "link": "https://stackoverflow.com/questions/41712447/uninitialized-constant-post-in-rails-console-following-tutorial/41712547#41712547", "title": "Uninitialized constant Post in rails console, following tutorial", "body": "<p>Your posts_controller.rb has nothing to do with it. Check that your app/models/post.rb defines</p>\n\n<pre><code>class Post &lt; ApplicationRecord # sometimes \"&lt; ActiveRecord::Base\" instead\nend\n</code></pre>\n\n<p>When you type <code>Post.all</code>, ruby tries to lookup a class called <code>Post</code>\u2013your model\u2013and call the <code>all</code> method on it. If it says <code>uninitialized constant Post</code> in the error, then your post model must not be defined.</p>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 7433957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66abdf44b540d28d80f7cb24c05e602d?s=128&d=identicon&r=PG&f=1", "display_name": "Hamza1510", "link": "https://stackoverflow.com/users/7433957/hamza1510"}, "edited": false, "score": 0, "creation_date": 1484721513, "post_id": 41712813, "comment_id": 70620671, "body": "Thank you! I figured it out after @Glyoko noticed that he skipped the model part in the tutorial. I&#39;m still new to rails, so I take every tutorial literally even tho I&#39;ve learned how to generate a model and migrating a database. Again, thanks."}], "tags": [], "owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "is_accepted": true, "score": 1, "last_activity_date": 1484721241, "creation_date": 1484721241, "answer_id": 41712813, "question_id": 41712447, "link": "https://stackoverflow.com/questions/41712447/uninitialized-constant-post-in-rails-console-following-tutorial/41712813#41712813", "title": "Uninitialized constant Post in rails console, following tutorial", "body": "<p>First create a model <code>Post</code> using the command,</p>\n\n<p><code>rails generate model Post title:string text:text</code></p>\n\n<p>This creates <code>app/models/post.rb</code> and a migratiuon file in <code>db/migrate</code></p>\n\n<p>Now, run the migration, if you already have the database.</p>\n\n<p><code>rails db:migrate</code></p>\n\n<p>Now, the table is created.</p>\n\n<p>Now open <code>rails console</code>/<code>rails c</code></p>\n\n<p><code>Post.all</code></p>\n"}], "owner": {"reputation": 47, "user_id": 7433957, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66abdf44b540d28d80f7cb24c05e602d?s=128&d=identicon&r=PG&f=1", "display_name": "Hamza1510", "link": "https://stackoverflow.com/users/7433957/hamza1510"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1193, "favorite_count": 0, "accepted_answer_id": 41712813, "answer_count": 2, "score": 2, "last_activity_date": 1484721241, "creation_date": 1484719514, "question_id": 41712447, "link": "https://stackoverflow.com/questions/41712447/uninitialized-constant-post-in-rails-console-following-tutorial", "title": "Uninitialized constant Post in rails console, following tutorial", "body": "<p>So I'm following this tutorial, and I have triple checked that everything I've done up to this point is correct. Tutorial: <a href=\"https://www.youtube.com/watch?v=0OzDgi0zqJU\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=0OzDgi0zqJU</a></p>\n\n<p>At the beginning of the video, he wants me to start the rails console and type \"Post.all\". I'm getting this error (below) while his terminal displaying a empty array.</p>\n\n<pre><code>EIERs-MBP:training eier$ rails c\nRunning via Spring preloader in process 75415\nLoading development environment (Rails 5.0.1)\n2.3.0 :001 &gt; Post.all\nNameError: uninitialized constant Post\nfrom (irb):1\nfrom /Users/eier/.rvm/gems/ruby-2.3.0@global/gems/railties-5.0.1/lib/rails/commands/console.rb:65:in `start'\nfrom /Users/eier/.rvm/gems/ruby-2.3.0@global/gems/railties-5.0.1/lib/rails/commands/console_helper.rb:9:in `start'\nfrom /Users/eier/.rvm/gems/ruby-2.3.0@global/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:78:in `console'\nfrom /Users/eier/.rvm/gems/ruby-2.3.0@global/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:49:in `run_command!'\nfrom /Users/eier/.rvm/gems/ruby-2.3.0@global/gems/railties-5.0.1/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\nfrom /Users/eier/Documents/Workspace/rails/training/bin/rails:9:in `&lt;top (required)&gt;'\nfrom /Users/eier/.rvm/rubies/ruby-2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\nfrom /Users/eier/.rvm/rubies/ruby-2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\nfrom -e:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>I've looked everywhere for answers on what this might be, I don't know if it's because of the rails version I'm using or not. It's a really simple tutorial, so it's really frustrating. We're suppose to create content in the rails console with Post.create(title: \"first post\", content: \"test\"), but I'm stuck on the error when typing \"Post.all\".</p>\n\n<p>Here's the posts_controller.rb file:</p>\n\n<pre><code>class PostsController &lt; ApplicationController\n def index\n\n end\nend\n</code></pre>\n\n<p>This is what his file looks as well, and all other files such as index.html.erb and routes we've created. Please let me know if I need to provide more information. </p>\n"}, {"tags": ["php", "ruby", "postgresql", "pgadmin-4"], "answers": [{"comments": [{"owner": {"reputation": 3832, "user_id": 3997528, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/74Tx9.png?s=128&g=1", "display_name": "Maha Dev", "link": "https://stackoverflow.com/users/3997528/maha-dev"}, "edited": false, "score": 1, "creation_date": 1484721692, "post_id": 41712609, "comment_id": 70620728, "body": "Sorry, its 9.6, i am updating my question"}, {"owner": {"reputation": 4629, "user_id": 3580115, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e563f6a8276664c598badcbc9f5dec7d?s=128&d=identicon&r=PG&f=1", "display_name": "Murtuza Z", "link": "https://stackoverflow.com/users/3580115/murtuza-z"}, "reply_to_user": {"reputation": 3832, "user_id": 3997528, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/74Tx9.png?s=128&g=1", "display_name": "Maha Dev", "link": "https://stackoverflow.com/users/3997528/maha-dev"}, "edited": false, "score": 0, "creation_date": 1484722274, "post_id": 41712609, "comment_id": 70620940, "body": "Could you provide more details like OS, pgAdmin4 version, steps to re-produce the issue."}, {"owner": {"reputation": 3832, "user_id": 3997528, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/74Tx9.png?s=128&g=1", "display_name": "Maha Dev", "link": "https://stackoverflow.com/users/3997528/maha-dev"}, "edited": false, "score": 0, "creation_date": 1484723146, "post_id": 41712609, "comment_id": 70621344, "body": "This question resembles my question, <a href=\"http://stackoverflow.com/questions/40212212/unrecognized-config-parameter-bytea-output-pgadmin-4\" title=\"unrecognized config parameter bytea output pgadmin 4\">stackoverflow.com/questions/40212212/&hellip;</a>"}, {"owner": {"reputation": 4629, "user_id": 3580115, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e563f6a8276664c598badcbc9f5dec7d?s=128&d=identicon&r=PG&f=1", "display_name": "Murtuza Z", "link": "https://stackoverflow.com/users/3580115/murtuza-z"}, "reply_to_user": {"reputation": 3832, "user_id": 3997528, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/74Tx9.png?s=128&g=1", "display_name": "Maha Dev", "link": "https://stackoverflow.com/users/3997528/maha-dev"}, "edited": false, "score": 0, "creation_date": 1484724100, "post_id": 41712609, "comment_id": 70621774, "body": "@MahaDev The given issue was specific to version below PG9.2, But you said you are using PG9.6 that&#39;s why I asked for steps."}], "tags": [], "owner": {"reputation": 4629, "user_id": 3580115, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e563f6a8276664c598badcbc9f5dec7d?s=128&d=identicon&r=PG&f=1", "display_name": "Murtuza Z", "link": "https://stackoverflow.com/users/3580115/murtuza-z"}, "is_accepted": false, "score": 1, "last_activity_date": 1484720288, "creation_date": 1484720288, "answer_id": 41712609, "question_id": 41712196, "link": "https://stackoverflow.com/questions/41712196/pgadmin4-error-unrecognized-configuration-parameter-bytea-output/41712609#41712609", "title": "PgAdmin4 Error : unrecognized configuration parameter &quot;bytea_output&quot;", "body": "<p>pgAdmin4 do not support PG9.1, it supports PG9.2 &amp; onwards</p>\n"}], "owner": {"reputation": 3832, "user_id": 3997528, "user_type": "registered", "accept_rate": 31, "profile_image": "https://i.stack.imgur.com/74Tx9.png?s=128&g=1", "display_name": "Maha Dev", "link": "https://stackoverflow.com/users/3997528/maha-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3102, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1484721701, "creation_date": 1484718352, "last_edit_date": 1484721701, "question_id": 41712196, "link": "https://stackoverflow.com/questions/41712196/pgadmin4-error-unrecognized-configuration-parameter-bytea-output", "title": "PgAdmin4 Error : unrecognized configuration parameter &quot;bytea_output&quot;", "body": "<p>I am using postgresql 9.6 and pgAdmin 4. I want to connect remote database in pgAdmin but getting this error. I have done my R&amp;d but get two things to add in my config file.</p>\n\n<blockquote>\n  <p>listen_addresses = '*'</p>\n  \n  <p>host    all all 0.0.0.0/0     md5.</p>\n</blockquote>\n\n<p>Done these both lines but still not working.</p>\n"}, {"tags": ["ruby", "macos", "jekyll", "blogs"], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 1418414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0178305cca7032ae4e69f191b718f93c?s=128&d=identicon&r=PG", "display_name": "jthmiranda", "link": "https://stackoverflow.com/users/1418414/jthmiranda"}, "edited": false, "score": 0, "creation_date": 1484765794, "post_id": 41718864, "comment_id": 70649047, "body": "Hi @deveth0, can&#39;t find any link for mac on ruby download page website, just for windows only, anyway thank you, i&#39;m keeping searching!"}, {"owner": {"reputation": 448, "user_id": 2625592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38VFF.png?s=128&g=1", "display_name": "deveth0", "link": "https://stackoverflow.com/users/2625592/deveth0"}, "reply_to_user": {"reputation": 73, "user_id": 1418414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0178305cca7032ae4e69f191b718f93c?s=128&d=identicon&r=PG", "display_name": "jthmiranda", "link": "https://stackoverflow.com/users/1418414/jthmiranda"}, "edited": false, "score": 0, "creation_date": 1484766377, "post_id": 41718864, "comment_id": 70649324, "body": "I think this thread should help you: <a href=\"http://stackoverflow.com/questions/8389301/os-x-rails-failed-to-build-gem-native-extension\" title=\"os x rails failed to build gem native extension\">stackoverflow.com/questions/8389301/&hellip;</a>"}, {"owner": {"reputation": 73, "user_id": 1418414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0178305cca7032ae4e69f191b718f93c?s=128&d=identicon&r=PG", "display_name": "jthmiranda", "link": "https://stackoverflow.com/users/1418414/jthmiranda"}, "edited": false, "score": 0, "creation_date": 1484767312, "post_id": 41718864, "comment_id": 70649895, "body": "Yes it&#39;s helpful, i&#39;m going to install Developer Tool and I hope get this done!"}], "tags": [], "owner": {"reputation": 448, "user_id": 2625592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38VFF.png?s=128&g=1", "display_name": "deveth0", "link": "https://stackoverflow.com/users/2625592/deveth0"}, "is_accepted": false, "score": 0, "last_activity_date": 1484740786, "creation_date": 1484740786, "answer_id": 41718864, "question_id": 41711842, "link": "https://stackoverflow.com/questions/41711842/cant-install-jekyll-on-macos-sierra-10-12-1/41718864#41718864", "title": "Can&#39;t install Jekyll on MacOS Sierra 10.12.1", "body": "<p>You have to install the <a href=\"http://rubyinstaller.org/add-ons/devkit/\" rel=\"nofollow noreferrer\">Ruby DevKit</a>. Depending on your installation of Ruby, you have to select the correct way to install it.</p>\n"}], "owner": {"reputation": 73, "user_id": 1418414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0178305cca7032ae4e69f191b718f93c?s=128&d=identicon&r=PG", "display_name": "jthmiranda", "link": "https://stackoverflow.com/users/1418414/jthmiranda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 843, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1484740786, "creation_date": 1484716472, "question_id": 41711842, "link": "https://stackoverflow.com/questions/41711842/cant-install-jekyll-on-macos-sierra-10-12-1", "title": "Can&#39;t install Jekyll on MacOS Sierra 10.12.1", "body": "<p>I'm trying to install <strong>Jekyll</strong> using:</p>\n\n<pre><code>sudo gem install jekyll\n</code></pre>\n\n<p>but I get a error, I had found a solution on early mac version not for <em>Sierra</em></p>\n\n<p>this is the output:</p>\n\n<pre><code>Building native extensions.  This could take a while...\nERROR:  Error installing jekyll:\nERROR: Failed to build gem native extension.\n\ncurrent directory: /Library/Ruby/Gems/2.0.0/gems/ffi-1.9.17/ext/ffi_c\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby -r ./siteconf20170117-1518-aaehhb.rb extconf.rb\nmkmf.rb can't find header files for ruby at /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/include/ruby.h\n\nextconf failed, exit code 1\n\nGem files will remain installed in /Library/Ruby/Gems/2.0.0/gems/ffi-1.9.17 for inspection.\nResults logged to /Library/Ruby/Gems/2.0.0/extensions/universal-darwin-16/2.0.0/ffi-1.9.17/gem_make.out\n</code></pre>\n\n<p>thanks for advance!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1484724637, "post_id": 41711725, "comment_id": 70622050, "body": "This kind of error usually happens when you are trying to compile a gem and you don&#39;t have the C headers required to do this. Please, check your distribution to see if you have some package named bzip2-dev or something like that. If you don&#39;t have installed, please install and try again."}], "answers": [{"comments": [{"owner": {"reputation": 102, "user_id": 6897874, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4wv28Ii0E5I/AAAAAAAAAAI/AAAAAAAACoo/G90hPXnYfaU/photo.jpg?sz=128", "display_name": "niraj pandey", "link": "https://stackoverflow.com/users/6897874/niraj-pandey"}, "edited": false, "score": 0, "creation_date": 1484748828, "post_id": 41719171, "comment_id": 70637799, "body": "I tried both the solution provided by you but no luck."}, {"owner": {"reputation": 102, "user_id": 6897874, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4wv28Ii0E5I/AAAAAAAAAAI/AAAAAAAACoo/G90hPXnYfaU/photo.jpg?sz=128", "display_name": "niraj pandey", "link": "https://stackoverflow.com/users/6897874/niraj-pandey"}, "edited": false, "score": 0, "creation_date": 1484817602, "post_id": 41719171, "comment_id": 70669209, "body": "My Gemfile is like this:   cat Gemfile source :gemcutter  gemspec source gem &#39;bzip2-ruby&#39;, git: &#39;<a href=\"https://github.com/brianmario/bzip2-ruby.git\" rel=\"nofollow noreferrer\">github.com/brianmario/bzip2-ruby.git</a>&#39;"}], "tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": false, "score": 1, "last_activity_date": 1484741743, "creation_date": 1484741743, "answer_id": 41719171, "question_id": 41711725, "link": "https://stackoverflow.com/questions/41711725/error-using-module-bzip2/41719171#41719171", "title": "Error using module bzip2", "body": "<p>The error is described in <a href=\"https://github.com/brianmario/bzip2-ruby/issues/19\" rel=\"nofollow noreferrer\">https://github.com/brianmario/bzip2-ruby/issues/19</a> and <a href=\"https://github.com/brianmario/bzip2-ruby/commit/46939f3521eed0f12157c3a20a1a077cf51d17d1\" rel=\"nofollow noreferrer\">fixed in the master branch</a> of the gem.</p>\n\n<p>Unfortunately, the fix is not yet released and given that the issue is now almost 4 years old, I'd wager the guess that it won't be released anymore. If you still want to use the gem, you can force to use the version directly from github by adding this to your <code>Gemfile</code>:</p>\n\n<pre><code>gem 'bzip2-ruby', git: 'https://github.com/brianmario/bzip2-ruby.git'\n</code></pre>\n\n<p>Generally, it is probably a good idea to switch to a gem which is actually maintained. A quick google search pointed e.g. to <a href=\"https://github.com/philr/bzip2-ffi\" rel=\"nofollow noreferrer\">https://github.com/philr/bzip2-ffi</a>.</p>\n"}], "owner": {"reputation": 102, "user_id": 6897874, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-4wv28Ii0E5I/AAAAAAAAAAI/AAAAAAAACoo/G90hPXnYfaU/photo.jpg?sz=128", "display_name": "niraj pandey", "link": "https://stackoverflow.com/users/6897874/niraj-pandey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1484741743, "creation_date": 1484715962, "last_edit_date": 1484716273, "question_id": 41711725, "link": "https://stackoverflow.com/questions/41711725/error-using-module-bzip2", "title": "Error using module bzip2", "body": "<p>I'm running into problems building bzip2-ruby. \nHere is the error I am getting while building it...\nCan someone help me understand what's going on?</p>\n\n<pre><code>/tmp/ruby/bin/gem -v\n2.6.8\n\n\n/tmp/ruby/bin/ruby -v\nruby 2.4.0p0 (2016-12-24 revision 57164) [x86_64-linux]\n\nIn file included from bzip2.c:5:\n/tmp/ruby/include/ruby-2.4.0/ruby/backward/rubyio.h:2:2: warning: #warning use \"ruby/io.h\" instead of \"rubyio.h\"\nbzip2.c:6:21: error: version.h: No such file or directory\nbzip2.c: In function \u2018bz_find_struct\u2019:\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "ruby-paranoia"], "answers": [{"tags": [], "owner": {"reputation": 720, "user_id": 4336142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/T562X.jpg?s=128&g=1", "display_name": "Aniket Rao", "link": "https://stackoverflow.com/users/4336142/aniket-rao"}, "is_accepted": true, "score": 1, "last_activity_date": 1484712407, "creation_date": 1484712407, "answer_id": 41711186, "question_id": 41711116, "link": "https://stackoverflow.com/questions/41711116/create-not-working-with-ruby-paranoia-on-heroku/41711186#41711186", "title": "&quot;Create&quot; not working with ruby paranoia on heroku", "body": "<p>Post migration, you need to do a heroku restart since the application is running in production mode. Heroku caches the db schema before any migrations are run. Thus, restarting the application will recache the schema.</p>\n\n<p>Just run and your problem should not persist.</p>\n\n<pre><code>heroku restart\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7433612, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-j_89UZHUkxo/AAAAAAAAAAI/AAAAAAAAN_g/hlKQjrWOXjI/photo.jpg?sz=128", "display_name": "Derrick", "link": "https://stackoverflow.com/users/7433612/derrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 41711186, "answer_count": 1, "score": 0, "last_activity_date": 1484712407, "creation_date": 1484711929, "question_id": 41711116, "link": "https://stackoverflow.com/questions/41711116/create-not-working-with-ruby-paranoia-on-heroku", "title": "&quot;Create&quot; not working with ruby paranoia on heroku", "body": "<p>I've implemented paranoia on a model (\"Stays\"), which is working in development, but not in production on heroku. On the heroku site, I can see an (expectedly empty) index page, but when I go to /stays/new, I get an error page.</p>\n\n<p>Checking the logs, I find this:</p>\n\n<pre><code>    2017-01-18T03:31:49.546164+00:00 app[web.1]: [d5ce2502-2cb9-4b1d-9888-f2990881bbb4] Completed 500 Internal Server Error in 16ms (ActiveRecord: 4.3ms)\n    2017-01-18T03:31:49.547115+00:00 app[web.1]: [d5ce2502-2cb9-4b1d-9888-f2990881bbb4] ActiveModel::UnknownAttributeError (unknown attribute 'deleted_at' for Stay.):\n    2017-01-18T03:31:49.547194+00:00 app[web.1]: [d5ce2502-2cb9-4b1d-9888-f2990881bbb4] app/controllers/stays_controller.rb:14:in `new'\n</code></pre>\n\n<p>In app/controllers/stays_controller.rb, here are the first 15 lines.</p>\n\n<pre><code>    class StaysController &lt; ApplicationController\n      before_action :set_stay, only: [:show, :edit, :update, :destroy]\n      before_action :correct_user, only: [:edit, :update, :destroy]\n      before_action :authenticate_user!, except: [:index, :show]\n\n      def index\n        @stays = Stay.all.order(\"created_at DESC\")\n      end\n\n      def show\n      end\n\n      def new\n        @stay = current_user.stays.build #Stay.new\n      end\n</code></pre>\n\n<p>In the gemfile:</p>\n\n<pre><code>gem 'paranoia', '~&gt; 2.2'\n</code></pre>\n\n<p>In app/models/stay.rb:</p>\n\n<pre><code>class Stay &lt; ApplicationRecord\n  belongs_to :user\n  acts_as_paranoid\nend\n</code></pre>\n\n<p>I've run <code>heroku run rake db:migrate</code> since pushing to heroku, but with no luck. Any idea why this is working locally for development, but not on heroku for production?</p>\n"}, {"tags": ["ruby", "lisp"], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1484714565, "post_id": 41711134, "comment_id": 70618214, "body": "You don&#39;t have to separate the first argument and the rest. You can simply do <code>[2, 3, 4, 5, 6].inject(:+) #=&gt; 20</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1484718241, "post_id": 41711134, "comment_id": 70619411, "body": "@sawa Yeah, I&#39;ve added a bit with <code>reduce</code> which is functionally the same."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1484720795, "post_id": 41711134, "comment_id": 70620380, "body": "Generally speaking, <code>reduce</code> here blurs the idea of being LISP-like. The AST of adding 3 items won\u2019t be <code>{:+, 1, 2, 3}</code>, it is <code>{:+, 1, {:+, 2, 3}}</code>. Upvoted, anyway."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1484721267, "post_id": 41711134, "comment_id": 70620571, "body": "@mudasobwa I was tempted to make it support nested structures but it&#39;d go a little beyond the scope of the question. That isn&#39;t much harder to fix."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 4, "last_activity_date": 1484712030, "creation_date": 1484712030, "answer_id": 41711134, "question_id": 41711084, "link": "https://stackoverflow.com/questions/41711084/ruby-lisp-interpreter-convert-arithmetic-symbol/41711134#41711134", "title": "Ruby Lisp Interpreter convert arithmetic symbol?", "body": "<p>Ruby's all about dynamic programming. In fact this makes your code ridiculously easy:</p>\n\n<pre><code>def evaluate(exp)\n  exp[1].to_i.send(exp[0], exp[2].to_i)\nend\n</code></pre>\n\n<p>It'd be even easier if those tokens were converted on the way in:</p>\n\n<pre><code>exp.map! do |token|\n  case (token)\n  when /\\A\\-?\\d+\\z/\n    token.to_i\n  else\n    token\n  end\nend\n</code></pre>\n\n<p>Then you get this:</p>\n\n<pre><code>def evaluate(exp)\n  exp[1].send(exp[0], exp[2])\nend\n</code></pre>\n\n<p>Now this presumes you're only supplying valid operations, that you're not doing anything absurd, but for trivial cases it works quite well.</p>\n\n<p>If you've converted everything and you're looking to make this more extensible:</p>\n\n<pre><code>def evaluate(exp)\n  op, *args = exp\n\n  args.reduce(&amp;op.to_sym)\nend\n</code></pre>\n\n<p>Then you can do this on arbitrary lists:</p>\n\n<pre><code>evaluate([ '+', 2, 1, 3, 4 ])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1484713195, "post_id": 41711139, "comment_id": 70617844, "body": "NB, you must choose an initial value of <code>1</code> for multiplication and division."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1484714529, "post_id": 41711139, "comment_id": 70618204, "body": "You don&#39;t have to separate the first argument and the rest. You can simply do <code>[2, 3, 4, 5, 6].inject(:+) #=&gt; 20</code>."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1484714631, "post_id": 41711139, "comment_id": 70618235, "body": "@sawa first argument is actually an operation, otherwise how would you know, what to pass into <code>inject</code>? :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1484720752, "post_id": 41711139, "comment_id": 70620366, "body": "Generally speaking, <code>inject</code> here blurs the idea of being LISP-like. The AST of adding 3 items won\u2019t be <code>{:+, 1, 2, 3}</code>, it is <code>{:+, 1, {:+, 2, 3}}</code>. Upvoted, anyway :)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1484732605, "post_id": 41711139, "comment_id": 70626730, "body": "@mudasobwa: in all Lisps I know, <code>+</code> and <code>*</code> are n-ary. Not sure about <code>-</code> and <code>&#47;</code>, though."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1484739365, "post_id": 41711139, "comment_id": 70631257, "body": "@J&#246;rgWMittag indeed, Lisp\u2019s last argument is a list (for <code>-</code> and <code>&#47;</code> as well.) For some reason, I thought it\u2019s just a handy syntactic sugar for internal AST, but it turns out it is not."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1484744493, "post_id": 41711139, "comment_id": 70634759, "body": "@mudasobwa <code>(+ 1 2 3)</code> translates to <code>(+ &#183; (1 &#183; (2 &#183; (3 &#183; nil))))</code>, so it actually does form a tree (although a different one)."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 3, "last_activity_date": 1484713432, "last_edit_date": 1484713432, "creation_date": 1484712056, "answer_id": 41711139, "question_id": 41711084, "link": "https://stackoverflow.com/questions/41711084/ruby-lisp-interpreter-convert-arithmetic-symbol/41711139#41711139", "title": "Ruby Lisp Interpreter convert arithmetic symbol?", "body": "<pre><code>def evaluate(*args)\n  operation, *numbers = args\n  numbers.map!(&amp;:to_i)\n  numbers.first.public_send(operation, numbers.last)\nend\n</code></pre>\n\n<p>If you expect more, than two numbers to be used:</p>\n\n<pre><code>def evaluate(*args)\n  operation, *numbers = args\n  numbers.map!(&amp;:to_i).inject(&amp;operation.to_sym)\nend\n\nevaluate('+','2','3', 4, 5, 6)\n#=&gt; 20\n</code></pre>\n\n<p>You can add an initial value if you need to make sure to always return a <code>Numeric</code> from the method (make sure to select any non-zero number, if operation is division or multiplication):</p>\n\n<pre><code>def evaluate(*args)\n  operation, *numbers = args\n  initial_value = %w(/ *).include?(operation) ? 1 : 0\n  numbers.map!(&amp;:to_i).inject(initial_value, &amp;operation.to_sym) #&lt;==== note 0\nend\n\nevaluate '+'\n#=&gt; 0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1484720978, "post_id": 41711542, "comment_id": 70620451, "body": "That way one might build the proper AST, using <code>#curry</code> instead of <code>#[]</code> in <code>eval</code>. This is the best answer here so far."}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1484721541, "post_id": 41711542, "comment_id": 70620684, "body": "Haha, I wanted to leave the complete implementation to them :) essentially all they need is a lookup table with some basic lisp functions and implementations of <code>eval</code> and <code>apply</code>"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1484734002, "post_id": 41711542, "comment_id": 70627745, "body": "Nice. You shouldn&#39;t call it eval, though."}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1484743464, "post_id": 41711542, "comment_id": 70634088, "body": "Updated to include all your comments."}], "tags": [], "owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "is_accepted": false, "score": 1, "last_activity_date": 1484744177, "last_edit_date": 1484744177, "creation_date": 1484714808, "answer_id": 41711542, "question_id": 41711084, "link": "https://stackoverflow.com/questions/41711084/ruby-lisp-interpreter-convert-arithmetic-symbol/41711542#41711542", "title": "Ruby Lisp Interpreter convert arithmetic symbol?", "body": "<p>Since you ask how this is typically done.</p>\n\n<p>You create a lookup table from operations to their implementation. And then use the first element to lookup an implementation and pass the remaining elements to that function.</p>\n\n<p>Essentially all you need to implement a lisp is</p>\n\n<ul>\n<li><code>evaluate</code></li>\n<li><code>apply</code> </li>\n<li>a lookup table</li>\n</ul>\n\n<p>That kernel might even fit into 30\u201350 lines. I don't think you want us to give you a complete implementation though. That would take all the fun out of writing your own lisp. </p>\n\n<p>I will thus just outline the basic structure\u2026</p>\n\n<pre><code>$table = {\n  '+' =&gt; lambda { |a, b| a + b },\n  '-' =&gt; lambda { |a, b| a - b },\n  '*' =&gt; lambda { |a, b| a * b },\n  '/' =&gt; lambda { |a, b| a.fdiv(b) },\n}\n\ndef evaluate(args, context = $table)\n  # A complete implementation of evaluate would make use of apply ...\n  head, *tail = args\n  context[head][*tail] \nend\n\ndef apply\n  # ...\nend\n\nputs evaluate(['/', 4, 3])\n# =&gt; 1.3333333333333333\n</code></pre>\n\n<p>It just so happens that your lisp function names and the corresponding Ruby function names are the same. But that will not always be given, using a lookup table is thus a more typical solution. I mapped the lisp <code>/</code> to Ruby's <code>fdiv</code> to demonstrate that.</p>\n\n<p><em>Fun fact, these first elements are called symbols and actually Ruby uses a very similar mechanism too and hence also has symbols. Internally, Ruby also uses nested lookup tables to organize classes and constants and methods and local variables, et cetera.</em></p>\n"}, {"tags": [], "owner": {"reputation": 2389, "user_id": 3931349, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JkeKC.jpg?s=128&g=1", "display_name": "rsm", "link": "https://stackoverflow.com/users/3931349/rsm"}, "is_accepted": false, "score": 1, "last_activity_date": 1484715724, "creation_date": 1484715724, "answer_id": 41711679, "question_id": 41711084, "link": "https://stackoverflow.com/questions/41711084/ruby-lisp-interpreter-convert-arithmetic-symbol/41711679#41711679", "title": "Ruby Lisp Interpreter convert arithmetic symbol?", "body": "<p>from lisp perspective (common lisp to be precise), you can define <code>evaluate</code> as:</p>\n\n<pre><code>(defun evaluate (func &amp;rest args)\n  (apply func args))\n</code></pre>\n\n<p>in first line you define <code>evaluate</code> function to take first argument called <code>func</code>, and rest of them (if any) to put in list called <code>args</code>.</p>\n\n<p>then you apply list of arguments stored in <code>args</code>, to function stored in <code>func</code>.</p>\n\n<p>usage examples:</p>\n\n<pre><code>(evaluate #'print \"some text, printed by function evaluated by my own code!\")\n=&gt; \"some text, printed by function evaluated by my own code!\"\n\n(evaluate #'+ 2 3)\n=&gt; 5\n</code></pre>\n\n<p>this weird looking <code>#'</code> quotes a function name, otherwise \"language\" would try to evaluate it as it does with all arguments before passing to function.</p>\n\n<p>i also strongly suggest \"structure and interpretation of computer programs\", at least videos! in the middle there is this great lecture on evaluation, basically heart of (almost) any computer language on 5 whiteboards! (well... green;)</p>\n"}, {"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1484725740, "creation_date": 1484725740, "answer_id": 41713882, "question_id": 41711084, "link": "https://stackoverflow.com/questions/41711084/ruby-lisp-interpreter-convert-arithmetic-symbol/41713882#41713882", "title": "Ruby Lisp Interpreter convert arithmetic symbol?", "body": "<p>A slightly cleaner version of the same:</p>\n\n<pre><code>def evaluate(operation, *numbers)\n  numbers.map(&amp;:to_i).reduce(operation)\nend\n\nevaluate('+', '2', '3')      # =&gt; 5\nevaluate('/', '6', '2', '3') # =&gt; 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 127093, "user_id": 69545, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OXXbv.jpg?s=128&g=1", "display_name": "Rainer Joswig", "link": "https://stackoverflow.com/users/69545/rainer-joswig"}, "is_accepted": false, "score": 1, "last_activity_date": 1484728542, "creation_date": 1484728542, "answer_id": 41714642, "question_id": 41711084, "link": "https://stackoverflow.com/questions/41711084/ruby-lisp-interpreter-convert-arithmetic-symbol/41714642#41714642", "title": "Ruby Lisp Interpreter convert arithmetic symbol?", "body": "<blockquote>\n  <p>How do typically lisp interpreters handle this?</p>\n</blockquote>\n\n<p>Lisp uses <em>symbols</em> for global function names. A <em>symbol</em> is a named thing with a few associated informations. One of these can be a <em>function</em>.</p>\n\n<pre><code>CL-USER 42 &gt; (symbol-function '+)\n#&lt;Function + 4100044D34&gt;\n\nCL-USER 43 &gt; (funcall (symbol-function '+) 1 2 3 4)\n10\n</code></pre>\n\n<p>So for your simple expression evaluation:</p>\n\n<pre><code>CL-USER 50 &gt; (defun eval-expression (expression)\n               (destructuring-bind (function &amp;rest arguments)\n                   expression\n                 (apply function arguments)))\nEVAL-EXPRESSION\n\nCL-USER 51 &gt; (eval-expression '(+ 1 2 3 4))\n10\n</code></pre>\n\n<p>Symbols itself are organized in <em>packages</em>, which you can imagine as some kind of specialized table. Packages map names to symbols:</p>\n\n<pre><code>CL-USER 52 &gt; (find-symbol \"+\")\n+\n:INHERITED\n</code></pre>\n\n<p>If you would want to evaluate a string, you first have to read the string to convert the string to Lisp data. The <em>reader</em> will look up the symbols, here <code>+</code>, from the current package:</p>\n\n<pre><code>CL-USER 53 &gt; (eval-expression (read-from-string \"(+ 1 2 3 4)\"))\n10\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1484736309, "creation_date": 1484736309, "answer_id": 41717277, "question_id": 41711084, "link": "https://stackoverflow.com/questions/41711084/ruby-lisp-interpreter-convert-arithmetic-symbol/41717277#41717277", "title": "Ruby Lisp Interpreter convert arithmetic symbol?", "body": "<p>There are many different solutions and you can chose one that more pretty for you, there are a few from me:</p>\n\n<pre><code>exp = ['+','2','3']\n\ndef evaluate(exp)\n  exp.map(&amp;:to_i).inject(exp.shift)\nend \n\n# &gt; evaluate(exp)\n# =&gt; 5\n\ndef evaluate(operation, *nums)\n  nums.map(&amp;:to_i).inject(operation)\nend\n\n# &gt; evaluate(*exp)\n# =&gt; 5\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 7246034, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5c5675c10810976ac3bdad546babe062?s=128&d=identicon&r=PG&f=1", "display_name": "Fianchetto", "link": "https://stackoverflow.com/users/7246034/fianchetto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "answer_count": 7, "score": 2, "last_activity_date": 1484744177, "creation_date": 1484711711, "question_id": 41711084, "link": "https://stackoverflow.com/questions/41711084/ruby-lisp-interpreter-convert-arithmetic-symbol", "title": "Ruby Lisp Interpreter convert arithmetic symbol?", "body": "<p>Essentially I have a evaluate method that takes something like</p>\n\n<pre><code>['+','2','3']\n</code></pre>\n\n<p>which would evaluate to 5.</p>\n\n<p>It's currently set up like so,</p>\n\n<pre><code>def evaluate(exp)\n    f = exp[0]\n    if f == '+' then\n        return exp[1].to_i + exp[2].to_i\n    elsif f == '-' then\n        return exp[1].to_i - exp[2].to_i\n    elsif f == '*' then\n        return exp[1].to_i * exp[2].to_i\n    elsif f == '/' then\n        return exp[1].to_i / exp[2].to_i\n    end\nend\n</code></pre>\n\n<p>This works fine, but there has to be a better way to do this without a giant if. Is there a way for me to convert the symbol and use it? How do typically lisp interpreters handle this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "haml"], "answers": [{"tags": [], "owner": {"reputation": 1410, "user_id": 1507845, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/9daba84d2a161462310fe5a0eb3ab53c?s=128&d=identicon&r=PG", "display_name": "XML Slayer", "link": "https://stackoverflow.com/users/1507845/xml-slayer"}, "is_accepted": false, "score": 2, "last_activity_date": 1484716545, "creation_date": 1484716545, "answer_id": 41711865, "question_id": 41710608, "link": "https://stackoverflow.com/questions/41710608/understanding-haml-indenting/41711865#41711865", "title": "Understanding Haml Indenting", "body": "<p>The main goal of Haml (like many other templates) is to reduce clutter; all those brackets and braces and whatnot are completely removed. But you still have to tell it when things begin and end (computers are smart, they're not that smart), so we use indentation instead. Any time you're writing something within a tag, indent it! When you're done with that tag, unindent!</p>\n\n<p>For example:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;p&gt;This is a &lt;small&gt;very small&lt;/small&gt; paragraph&lt;/p&gt;Yay!\n</code></pre>\n\n<p>becomes</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>%p\n  This is a\n  %small\n    very small\n  paragraph\nYay!\n</code></pre>\n\n<p>Any time you open a tag, the following line is indented, and as soon as you close that tag, we move back over to the left. Same thing with <code>if</code>s!</p>\n"}, {"tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": 3, "last_activity_date": 1484754615, "last_edit_date": 1484754615, "creation_date": 1484718988, "answer_id": 41712333, "question_id": 41710608, "link": "https://stackoverflow.com/questions/41710608/understanding-haml-indenting/41712333#41712333", "title": "Understanding Haml Indenting", "body": "<p>It would be easier if you posted your expected html.  Here is one possibility:</p>\n\n<pre class=\"lang-erlang prettyprint-override\"><code>- docs = %w[google.com yahoo.com apple.com]\n\n.wrapper_with_padding\n  #docs.clearfix\n  - unless docs.empty?\n    - docs.each do |doc|\n      %a{ href: (doc) } link text\n      .doc\n        %p.title= \"some title\"\n        %p.date=  \"some date\"\n        %p.content= \"some content\"\n\n  - else\n    %h2 Create Doc!\n    %p Start Creating Documents and Organizing your life!\n    %button{href: \"http://www.example.com\"} Create Doc\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>&lt;div class='wrapper_with_padding'&gt;\n  &lt;div class='clearfix' id='docs'&gt;&lt;/div&gt;\n  &lt;a href='google.com'&gt;link text&lt;/a&gt;\n  &lt;div class='doc'&gt;\n    &lt;p class='title'&gt;some title&lt;/p&gt;\n    &lt;p class='date'&gt;some date&lt;/p&gt;\n    &lt;p class='content'&gt;some content&lt;/p&gt;\n  &lt;/div&gt;\n  &lt;a href='yahoo.com'&gt;link text&lt;/a&gt;\n  &lt;div class='doc'&gt;\n    &lt;p class='title'&gt;some title&lt;/p&gt;\n    &lt;p class='date'&gt;some date&lt;/p&gt;\n    &lt;p class='content'&gt;some content&lt;/p&gt;\n  &lt;/div&gt;\n  &lt;a href='apple.com'&gt;link text&lt;/a&gt;\n  &lt;div class='doc'&gt;\n    &lt;p class='title'&gt;some title&lt;/p&gt;\n    &lt;p class='date'&gt;some date&lt;/p&gt;\n    &lt;p class='content'&gt;some content&lt;/p&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And if the docs array is empty:</p>\n\n<pre><code>&lt;div class='wrapper_with_padding'&gt;\n  &lt;div class='clearfix' id='docs'&gt;&lt;/div&gt;\n  &lt;h2&gt;Create Doc!&lt;/h2&gt;\n  &lt;p&gt;Start Creating Documents and Organizing your life!&lt;/p&gt;\n  &lt;button href='http://www.example.com'&gt;Create Doc&lt;/button&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>According to the <a href=\"http://haml.info/docs/yardoc/file.REFERENCE.html\" rel=\"nofollow noreferrer\">haml docs</a>:</p>\n\n<blockquote>\n  <p>Ruby Blocks</p>\n  \n  <p>Ruby blocks, like XHTML tags, don\u2019t need to be explicitly closed in\n  Haml. Rather, they\u2019re automatically closed, based on indentation. A\n  block begins whenever the indentation is increased after a Ruby\n  evaluation command. It ends when the indentation decreases (as long as\n  it\u2019s not an else clause or something similar).</p>\n</blockquote>\n\n<p>So to start a block in ruby code after an if/unless statement, you need to indent from the <code>-</code> code indicator.  And to start another block after the each() statement, once again you have to indent from the <code>-</code> code indicator for the each() line.  When you are done with the block, you just outdent back to the level of the <code>-</code> code indicator that started the block.</p>\n\n<p>A haml line that creates an element <em>looks up</em> to see where the previous haml line is that created an element.  If the current haml line is indented from that previous haml line, then the current element becomes a child of the previous element--it doesn't matter how much the indentation is.  For instance, the <code>&lt;a&gt;</code> haml needs to be indented three times in my example in order to be controlled by the <code>each()</code> block.  And because the <code>&lt;a&gt;</code> haml is indented some amount from the <code>#doc.clearfix</code> haml, which creates a <code>&lt;div&gt;</code>, that means the <code>&lt;a&gt;</code> tag will be a child of that <code>&lt;div&gt;</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 6184861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65527499fcf7e006f1892c42a03247ff?s=128&d=identicon&r=PG&f=1", "display_name": "Duron Epps", "link": "https://stackoverflow.com/users/6184861/duron-epps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 989, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1484754615, "creation_date": 1484708052, "question_id": 41710608, "link": "https://stackoverflow.com/questions/41710608/understanding-haml-indenting", "title": "Understanding Haml Indenting", "body": "<p>Can someone help me with understanding how to indent haml code properly `</p>\n\n<pre><code>.wrapper_with_padding\n#docs.clearfix\n - unless @docs.blank\n  - @docs.each do |doc|\n   %a{ href: (url_for [doc])}\n     .doc\n     %p.title= doc.title\n     %p.date= time_ago_in_words(doc.created_at)\n     %p.content= truncate(doc.content, length:50)\n\n  - else\n %h2 Create Doc!\n %p Start Creating Documents and Organizing your life!\n %button= link_to \"Create Doc\", new_doc_path\n</code></pre>\n"}, {"tags": ["ruby", "algorithm", "recursion", "time-complexity", "memoization"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1484713001, "post_id": 41710402, "comment_id": 70617793, "body": "The fewer tests you do the better. <code>@memo[node] ||= [ ... ]</code> is usually the most efficient way to test-assign-return in one line."}, {"owner": {"reputation": 42504, "user_id": 1161878, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/0157ddd785dc01e95342e3661d34b42a?s=128&d=identicon&r=PG", "display_name": "Gene", "link": "https://stackoverflow.com/users/1161878/gene"}, "edited": false, "score": 1, "creation_date": 1484721038, "post_id": 41710402, "comment_id": 70620486, "body": "This is what profilers are for. Try one!  <a href=\"https://ruby-doc.org/stdlib-2.1.0/libdoc/profiler/rdoc/Profiler__.html\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.1.0/libdoc/profiler/rdoc/Profiler__.ht&zwnj;&#8203;ml</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user1351104"}, "edited": false, "score": 0, "creation_date": 1484732498, "post_id": 41710402, "comment_id": 70626657, "body": "Can you provide some examples of input?"}, {"owner": {"reputation": 1360, "user_id": 4430977, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1268ab423eed6c864e3c43514a55efa5?s=128&d=identicon&r=PG&f=1", "display_name": "segue_segway", "link": "https://stackoverflow.com/users/4430977/segue-segway"}, "edited": false, "score": 0, "creation_date": 1484792142, "post_id": 41710402, "comment_id": 70659573, "body": "@cobaltsoda --I&#39;m not sure if it&#39;s possible to copy Leetcode&#39;s test cases here. I can link to the problem though! Added in my question."}], "owner": {"reputation": 1360, "user_id": 4430977, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/1268ab423eed6c864e3c43514a55efa5?s=128&d=identicon&r=PG&f=1", "display_name": "segue_segway", "link": "https://stackoverflow.com/users/4430977/segue-segway"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1488836813, "creation_date": 1484706433, "last_edit_date": 1488836813, "question_id": 41710402, "link": "https://stackoverflow.com/questions/41710402/method-is-slower-after-memoization", "title": "Method is slower after memoization", "body": "<p>I'm working on the following algorithm problem on Leetcode: </p>\n\n<blockquote>\n  <p>Given a binary tree, determine if it is height-balanced. For this\n  problem, a height-balanced binary tree is defined as a binary tree in\n  which the depth of the two subtrees of every node never differ by more\n  than 1.</p>\n</blockquote>\n\n<p>Here's the link: <a href=\"https://leetcode.com/problems/balanced-binary-tree/\" rel=\"nofollow noreferrer\">https://leetcode.com/problems/balanced-binary-tree/</a></p>\n\n<p>I've written two solutions--both of which pass Leetcode's tests. The first one should be more expensive than the second one because it repeatedly scans each subtree's nodes to calculate the heights for each node. The second solution should collect all the node heights into a cache so that the calculation doesn't have to repeat. However, it turns out my second solution is actually slower than my first one, and I have no idea why. Any input?</p>\n\n<p>Solution 1:</p>\n\n<pre><code>def is_balanced(root) #runs at 139 ms\n  return true if root.nil? \n  left_height = height(root.left)\n  right_height = height(root.right)\n\n  if !equal?(left_height, right_height)\n    return false \n  else \n    is_balanced(root.left) &amp;&amp; is_balanced(root.right)\n  end \nend \n\ndef height(node)\n  return 0 if node.nil?\n  [height(node.left), height(node.right)].max + 1 \nend\n\ndef equal?(num1, num2)\n  return true  if (num1-num2).abs &lt;= 1\n  false    \nend\n</code></pre>\n\n<p>Solution 2: (edited to include cobaltsoda's suggestion)</p>\n\n<pre><code>@memo = {}\ndef is_balanced(root)\n  @memo = {}\n  return true if root.nil? \n  left_height = height(root.left)\n  right_height = height(root.right)\n\n  if !equal?(left_height, right_height)\n    return false \n  else \n    is_balanced(root.left) &amp;&amp; is_balanced(root.right)\n  end \nend \n\ndef height(node)\n  @memo[node] = 0 if node.nil?\n  @memo[node] ||= [height(node.left), height(node.right)].max + 1 \nend\n\ndef equal?(num1, num2)\n  return true  if (num1-num2).abs &lt;= 1\n  false    \nend\n</code></pre>\n\n<p>Because the second solution uses memoization, shouldn't it cut out the redundancies and lower the time expenditure of the program? Not sure what I'm missing.</p>\n\n<p>Also, with memoization this goes from O(NlogN) algorithm to O(N) correct?</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 1624, "user_id": 2912211, "user_type": "registered", "profile_image": "https://graph.facebook.com/1059632598/picture?type=large", "display_name": "Zzz", "link": "https://stackoverflow.com/users/2912211/zzz"}, "is_accepted": false, "score": 0, "last_activity_date": 1484706042, "creation_date": 1484706042, "answer_id": 41710339, "question_id": 41710302, "link": "https://stackoverflow.com/questions/41710302/rails-server-tells-me-couldnt-find-file-jquery-ui-datepicker-with-type-ap/41710339#41710339", "title": "Rails server tells me--- couldn&#39;t find file &#39;jquery-ui/datepicker&#39; with type &#39;application/javascript&#39;", "body": "<p>You need to specify <code>jquery-rails</code> or <code>jquery-ui-rails</code> in the Gemfile</p>\n\n<pre><code>gem 'jquery-rails'\n# gem 'jquery-ui-rails'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2562, "user_id": 4344085, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ilSIn.jpg?s=128&g=1", "display_name": "Khanh Pham", "link": "https://stackoverflow.com/users/4344085/khanh-pham"}, "is_accepted": false, "score": 0, "last_activity_date": 1484712084, "creation_date": 1484712084, "answer_id": 41711144, "question_id": 41710302, "link": "https://stackoverflow.com/questions/41710302/rails-server-tells-me-couldnt-find-file-jquery-ui-datepicker-with-type-ap/41711144#41711144", "title": "Rails server tells me--- couldn&#39;t find file &#39;jquery-ui/datepicker&#39; with type &#39;application/javascript&#39;", "body": "<p>The easy way to solve your problem is:</p>\n\n<ol>\n<li>Download <code>jquery-ui</code> from <a href=\"http://jqueryui.com/download/\" rel=\"nofollow noreferrer\">http://jqueryui.com/download/</a></li>\n<li>Exact and copy <code>jquery-ui.min.js</code> to <code>app/assets/javascripts/</code> and <code>jquery-ui.min.css</code> to <code>app/assets/stylesheets/</code></li>\n<li><p>In <code>application.js</code> and <code>application.css</code>, make sure that you have this line: </p>\n\n<p><code>//= require_tree .</code> and <code>*= require_tree .</code></p></li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 7433372, "user_type": "registered", "profile_image": "https://graph.facebook.com/1596222967061772/picture?type=large", "display_name": "JS Bae", "link": "https://stackoverflow.com/users/7433372/js-bae"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1064, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1484712084, "creation_date": 1484705758, "last_edit_date": 1484707215, "question_id": 41710302, "link": "https://stackoverflow.com/questions/41710302/rails-server-tells-me-couldnt-find-file-jquery-ui-datepicker-with-type-ap", "title": "Rails server tells me--- couldn&#39;t find file &#39;jquery-ui/datepicker&#39; with type &#39;application/javascript&#39;", "body": "<pre><code>couldn't find file 'jquery-ui/datepicker' with type 'application/javascript'\nChecked in these paths: \n  /Users/jsbae/Desktop/unisports/app/assets/config\n  /Users/jsbae/Desktop/unisports/app/assets/images\n  /Users/jsbae/Desktop/unisports/app/assets/javascripts\n  /Users/jsbae/Desktop/unisports/app/assets/stylesheets\n  /Users/jsbae/Desktop/unisports/vendor/assets/javascripts\n  /Users/jsbae/Desktop/unisports/vendor/assets/stylesheets\n</code></pre>\n\n<p>This is what is happening when I try to run the rails server. I have checked my gem list and can see I have:</p>\n\n<pre><code>jquery-rails (4.2.2, 4.2.1)\njquery-turbolinks (2.1.0)\njquery-ui-rails (6.0.1, 5.0.5)\njqueryui_rails (0.0.4)\n</code></pre>\n\n<p>I have seen a lot of posts on problems with the versions, so I also tried to downgrade jquery-rails and jquery-ui-rails, but when running the commands such as: </p>\n\n<pre><code>gem install 'jquery-rails','~&gt;2.3.0' OR gem install 'jquery-ui-rails', '~&gt; 4.2.1'\n</code></pre>\n\n<p>But they constantly send me errors like:</p>\n\n<pre><code>ERROR:  Could not find a valid gem 'jquery-rails-2.3.0' (&gt;= 0) in any repository\nERROR:  Possible alternatives: jquery_rails3, jquery-rails, jquery-rails-cdn, jquery-rails_vho, jquery-rails-aristo\n</code></pre>\n\n<p>I have also tried editing the application.js and application.css files with<br>\n<code>*= require jquery-ui' &amp; '//= require jquery-ui</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model", "routes", "activeadmin"], "comments": [{"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 1, "creation_date": 1484711255, "post_id": 41710175, "comment_id": 70617379, "body": "did you define routes for <code>approve_admin_exercize_path</code> in your routes file?"}, {"owner": {"reputation": 103, "user_id": 4962848, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cvnx4xBIybk/AAAAAAAAAAI/AAAAAAAACDo/Fm4ATLjlG0k/photo.jpg?sz=128", "display_name": "Matteo Pennisi", "link": "https://stackoverflow.com/users/4962848/matteo-pennisi"}, "reply_to_user": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1484771612, "post_id": 41710175, "comment_id": 70652212, "body": "@EdmundLee yeah I can&#39;t find that, how I can add them?"}, {"owner": {"reputation": 103, "user_id": 4962848, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cvnx4xBIybk/AAAAAAAAAAI/AAAAAAAACDo/Fm4ATLjlG0k/photo.jpg?sz=128", "display_name": "Matteo Pennisi", "link": "https://stackoverflow.com/users/4962848/matteo-pennisi"}, "reply_to_user": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1484775238, "post_id": 41710175, "comment_id": 70654139, "body": "rake routes is not helping me."}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1484775776, "post_id": 41710175, "comment_id": 70654430, "body": "Are you using Rails? or are you using those modules individually?"}, {"owner": {"reputation": 103, "user_id": 4962848, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cvnx4xBIybk/AAAAAAAAAAI/AAAAAAAACDo/Fm4ATLjlG0k/photo.jpg?sz=128", "display_name": "Matteo Pennisi", "link": "https://stackoverflow.com/users/4962848/matteo-pennisi"}, "reply_to_user": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1484775934, "post_id": 41710175, "comment_id": 70654504, "body": "Yes I&#39;m using Rails"}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1484776473, "post_id": 41710175, "comment_id": 70654767, "body": "you should have a <code>routes.rb</code> file. You will need to add the route. Follow this doc <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/routing.html</a>"}, {"owner": {"reputation": 103, "user_id": 4962848, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cvnx4xBIybk/AAAAAAAAAAI/AAAAAAAACDo/Fm4ATLjlG0k/photo.jpg?sz=128", "display_name": "Matteo Pennisi", "link": "https://stackoverflow.com/users/4962848/matteo-pennisi"}, "reply_to_user": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1484776599, "post_id": 41710175, "comment_id": 70654835, "body": "But the problem is how to create a route for Active admin action. This is the real problem for me"}, {"owner": {"reputation": 103, "user_id": 4962848, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cvnx4xBIybk/AAAAAAAAAAI/AAAAAAAACDo/Fm4ATLjlG0k/photo.jpg?sz=128", "display_name": "Matteo Pennisi", "link": "https://stackoverflow.com/users/4962848/matteo-pennisi"}, "reply_to_user": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1484776630, "post_id": 41710175, "comment_id": 70654849, "body": "For example to create the action doing  exercize.reviewadmin=1 what I have to implement in routes.rb and exercize.rb?"}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1484777649, "post_id": 41710175, "comment_id": 70655266, "body": "What is <code>ActiveAdmin</code>? Is that a model? You are not using rails in a conventional way. Why do you have <code>controller do</code> block? I&#39;ve never used it this way. So I don&#39;t know how to help you."}, {"owner": {"reputation": 103, "user_id": 4962848, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cvnx4xBIybk/AAAAAAAAAAI/AAAAAAAACDo/Fm4ATLjlG0k/photo.jpg?sz=128", "display_name": "Matteo Pennisi", "link": "https://stackoverflow.com/users/4962848/matteo-pennisi"}, "reply_to_user": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1484777755, "post_id": 41710175, "comment_id": 70655316, "body": "Is a gem that generates an Admin Backend. However thank you foir tryng helping me :)"}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1484777895, "post_id": 41710175, "comment_id": 70655376, "body": "What gem is that? you need to tell us if you are using an external library."}, {"owner": {"reputation": 103, "user_id": 4962848, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cvnx4xBIybk/AAAAAAAAAAI/AAAAAAAACDo/Fm4ATLjlG0k/photo.jpg?sz=128", "display_name": "Matteo Pennisi", "link": "https://stackoverflow.com/users/4962848/matteo-pennisi"}, "reply_to_user": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1484777954, "post_id": 41710175, "comment_id": 70655401, "body": "<a href=\"http://activeadmin.info/\" rel=\"nofollow noreferrer\">activeadmin.info</a>"}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1484778019, "post_id": 41710175, "comment_id": 70655426, "body": "did you run this? <code>rails generate active_admin:resource [MyModelName]</code>"}, {"owner": {"reputation": 103, "user_id": 4962848, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cvnx4xBIybk/AAAAAAAAAAI/AAAAAAAACDo/Fm4ATLjlG0k/photo.jpg?sz=128", "display_name": "Matteo Pennisi", "link": "https://stackoverflow.com/users/4962848/matteo-pennisi"}, "reply_to_user": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1484778693, "post_id": 41710175, "comment_id": 70655703, "body": "Sure and this will delete my code"}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1484779859, "post_id": 41710175, "comment_id": 70656150, "body": "that&#39;s because active admin try to generate the file again. my bad. see my answer. You still need to setup rails. And I highly suggest you learn rails basic before diving into using a gem. Gems can be useful, but it will just confuse you if you don&#39;t know rails/ruby."}, {"owner": {"reputation": 103, "user_id": 4962848, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cvnx4xBIybk/AAAAAAAAAAI/AAAAAAAACDo/Fm4ATLjlG0k/photo.jpg?sz=128", "display_name": "Matteo Pennisi", "link": "https://stackoverflow.com/users/4962848/matteo-pennisi"}, "reply_to_user": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1484781878, "post_id": 41710175, "comment_id": 70656796, "body": "Thank you I will solve this in another way"}], "answers": [{"tags": [], "owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "is_accepted": true, "score": 0, "last_activity_date": 1484779768, "creation_date": 1484779768, "answer_id": 41730871, "question_id": 41710175, "link": "https://stackoverflow.com/questions/41710175/rails-admin-controller-creating-action/41730871#41730871", "title": "Rails Admin controller creating action", "body": "<p>ActiveAdmin doesn't setup path for you. You are still responsible for setting up your rails infrastructure.</p>\n\n<p>This <a href=\"https://guides.rubyonrails.org/routing.html\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/routing.html</a> is a very detailed reference.</p>\n\n<p>Your error trace says <code>undefined method</code>approve_admin_exercize_path'` which is trying to tell you that you don't have the path setup. (Rails use meta programming to construct these path methods for you).</p>\n\n<p>In your <code>route.rb</code> file, you should have something similar to this.</p>\n\n<pre><code>resources :exercize do\n  member do\n    post :approve\n  end\nend\n</code></pre>\n\n<p><strong>warning</strong></p>\n\n<p>This snippet above is not exact. I don't know how your app is structured therefore cannot give you the exact code.</p>\n\n<p>Then in your termianl, run <code>rake routes</code> will show you all the routes that are available.</p>\n"}], "owner": {"reputation": 103, "user_id": 4962848, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-cvnx4xBIybk/AAAAAAAAAAI/AAAAAAAACDo/Fm4ATLjlG0k/photo.jpg?sz=128", "display_name": "Matteo Pennisi", "link": "https://stackoverflow.com/users/4962848/matteo-pennisi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 202, "favorite_count": 0, "accepted_answer_id": 41730871, "answer_count": 1, "score": -1, "last_activity_date": 1484779768, "creation_date": 1484704606, "question_id": 41710175, "link": "https://stackoverflow.com/questions/41710175/rails-admin-controller-creating-action", "title": "Rails Admin controller creating action", "body": "<p>I'm tryng to create a new action to modify a value of a model.</p>\n\n<p>This is my exercize.rb file.</p>\n\n<pre><code>ActiveAdmin.register Exercize do\n\npermit_params :consegna, :libro, :spiegazione, :reviewadmin\n\nactions :all\n\ncontroller do\ndef approve\n   exercize.reviewadmin=1\nend\nend\naction_item only: :show do |exercize|\n  link_to('New Post', approve_admin_exercize_path(exercize))\nend\n\n\nend\n</code></pre>\n\n<p>And this is the error generated</p>\n\n<pre><code>NoMethodError in Admin::Exercizes#show\nShowing /var/lib/gems/2.3.0/gems/activeadmin-1.0.0.pre4/app/views/active_admin/resource/show.html.arb where line #2 raised:\n\nundefined method `approve_admin_exercize_path' for #&lt;ActiveAdmin::Views::ActionItems:0x007fb302ed2fa8&gt;\nExtracted source (around line #17):\n15\n16\n17\n18\n19\n20\n\nend\naction_item only: :show do |exercize|\n  link_to('New Post', approve_admin_exercize_path(exercize))\nend\n# permit_params do\n#   permitted = [:permitted, :attributes]\n\nRails.root: /home/matteo/Scrivania/workspace/schoolexploit\n\nApplication Trace | Framework Trace | Full Trace\narbre (1.1.1) lib/arbre/element.rb:182:in `method_missing'\napp/admin/exercize.rb:17:in `block (2 levels) in &lt;top (required)&gt;'\nactiveadmin (1.0.0.pre4) lib/active_admin/views/action_items.rb:9:in `instance_exec'\nactiveadmin (1.0.0.pre4) lib/active_admin/views/action_items.rb:9:in `block (2 levels) in build'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:31:in `block in build_tag'\narbre (1.1.1) lib/arbre/context.rb:92:in `with_current_arbre_element'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:49:in `with_current_arbre_element'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:26:in `build_tag'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:39:in `insert_tag'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:14:in `span'\nactiveadmin (1.0.0.pre4) lib/active_admin/views/action_items.rb:8:in `block in build'\nactiveadmin (1.0.0.pre4) lib/active_admin/views/action_items.rb:7:in `each'\nactiveadmin (1.0.0.pre4) lib/active_admin/views/action_items.rb:7:in `build'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:30:in `block in build_tag'\narbre (1.1.1) lib/arbre/context.rb:92:in `with_current_arbre_element'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:49:in `with_current_arbre_element'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:26:in `build_tag'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:39:in `insert_tag'\nactiveadmin (1.0.0.pre4) lib/active_admin/views/title_bar.rb:50:in `build_action_items'\nactiveadmin (1.0.0.pre4) lib/active_admin/views/title_bar.rb:24:in `block in build_titlebar_right'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:31:in `block in build_tag'\narbre (1.1.1) lib/arbre/context.rb:92:in `with_current_arbre_element'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:49:in `with_current_arbre_element'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:26:in `build_tag'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:39:in `insert_tag'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:14:in `div'\nactiveadmin (1.0.0.pre4) lib/active_admin/views/title_bar.rb:23:in `build_titlebar_right'\nactiveadmin (1.0.0.pre4) lib/active_admin/views/title_bar.rb:10:in `build'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:30:in `block in build_tag'\narbre (1.1.1) lib/arbre/context.rb:92:in `with_current_arbre_element'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:49:in `with_current_arbre_element'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:26:in `build_tag'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:39:in `insert_tag'\nactiveadmin (1.0.0.pre4) lib/active_admin/views/pages/base.rb:69:in `build_title_bar'\nactiveadmin (1.0.0.pre4) lib/active_admin/views/pages/base.rb:51:in `block (2 levels) in build_page'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:31:in `block in build_tag'\narbre (1.1.1) lib/arbre/context.rb:92:in `with_current_arbre_element'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:49:in `with_current_arbre_element'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:26:in `build_tag'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:39:in `insert_tag'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:14:in `div'\nactiveadmin (1.0.0.pre4) lib/active_admin/views/pages/base.rb:48:in `block in build_page'\narbre (1.1.1) lib/arbre/context.rb:92:in `with_current_arbre_element'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:49:in `with_current_arbre_element'\nactiveadmin (1.0.0.pre4) lib/active_admin/views/pages/base.rb:47:in `build_page'\nactiveadmin (1.0.0.pre4) lib/active_admin/views/pages/base.rb:10:in `build'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:30:in `block in build_tag'\narbre (1.1.1) lib/arbre/context.rb:92:in `with_current_arbre_element'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:26:in `build_tag'\narbre (1.1.1) lib/arbre/element/builder_methods.rb:39:in `insert_tag'\nactiveadmin (1.0.0.pre4) app/views/active_admin/resource/show.html.arb:2:in `block in __var_lib_gems_______gems_activeadmin_______pre__app_views_active_admin_resource_show_html_arb___1959187541369977911_70203555889500'\narbre (1.1.1) lib/arbre/context.rb:45:in `instance_eval'\narbre (1.1.1) lib/arbre/context.rb:45:in `initialize'\nactiveadmin (1.0.0.pre4) app/views/active_admin/resource/show.html.arb:1:in `new'\nactiveadmin (1.0.0.pre4) app/views/active_admin/resource/show.html.arb:1:in `__var_lib_gems_______gems_activeadmin_______pre__app_views_active_admin_resource_show_html_arb___1959187541369977911_70203555889500'\nactionview (5.0.0.1) lib/action_view/template.rb:158:in `block in render'\nactivesupport (5.0.0.1) lib/active_support/notifications.rb:166:in `instrument'\nactionview (5.0.0.1) lib/action_view/template.rb:348:in `instrument'\nactionview (5.0.0.1) lib/action_view/template.rb:156:in `render'\nactionview (5.0.0.1) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'\nactionview (5.0.0.1) lib/action_view/renderer/abstract_renderer.rb:42:in `block in instrument'\nactivesupport (5.0.0.1) lib/active_support/notifications.rb:164:in `block in instrument'\nactivesupport (5.0.0.1) lib/active_support/notifications/instrumenter.rb:21:in `instrument'\nactivesupport (5.0.0.1) lib/active_support/notifications.rb:164:in `instrument'\nactionview (5.0.0.1) lib/action_view/renderer/abstract_renderer.rb:41:in `instrument'\nactionview (5.0.0.1) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'\nactionview (5.0.0.1) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'\nactionview (5.0.0.1) lib/action_view/renderer/template_renderer.rb:52:in `render_template'\nactionview (5.0.0.1) lib/action_view/renderer/template_renderer.rb:14:in `render'\nactionview (5.0.0.1) lib/action_view/renderer/renderer.rb:42:in `render_template'\nactionview (5.0.0.1) lib/action_view/renderer/renderer.rb:23:in `render'\nactionview (5.0.0.1) lib/action_view/rendering.rb:103:in `_render_template'\nactionpack (5.0.0.1) lib/action_controller/metal/streaming.rb:217:in `_render_template'\nactionview (5.0.0.1) lib/action_view/rendering.rb:83:in `render_to_body'\nactionpack (5.0.0.1) lib/action_controller/metal/rendering.rb:52:in `render_to_body'\nactionpack (5.0.0.1) lib/action_controller/metal/renderers.rb:144:in `render_to_body'\nactionpack (5.0.0.1) lib/abstract_controller/rendering.rb:26:in `render'\nactionpack (5.0.0.1) lib/action_controller/metal/rendering.rb:36:in `render'\nactionpack (5.0.0.1) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'\nactivesupport (5.0.0.1) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'\n/usr/lib/ruby/2.3.0/benchmark.rb:308:in `realtime'\nactivesupport (5.0.0.1) lib/active_support/core_ext/benchmark.rb:12:in `ms'\nactionpack (5.0.0.1) lib/action_controller/metal/instrumentation.rb:44:in `block in render'\nactionpack (5.0.0.1) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'\nactiverecord (5.0.0.1) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'\nactionpack (5.0.0.1) lib/action_controller/metal/instrumentation.rb:43:in `render'\nremotipart (1.3.1) lib/remotipart/render_overrides.rb:16:in `render_with_remotipart'\nresponders (2.2.0) lib/action_controller/responder.rb:238:in `default_render'\nresponders (2.2.0) lib/action_controller/responder.rb:170:in `to_html'\nresponders (2.2.0) lib/responders/flash_responder.rb:107:in `to_html'\nresponders (2.2.0) lib/action_controller/responder.rb:163:in `respond'\nresponders (2.2.0) lib/action_controller/responder.rb:156:in `call'\nresponders (2.2.0) lib/action_controller/respond_with.rb:205:in `respond_with'\n/home/matteo/.bundle/ruby/2.3.0/inherited_resources-6707bf7e45b9/lib/inherited_resources/actions.rb:13:in `show'\nactionpack (5.0.0.1) lib/action_controller/metal/basic_implicit_render.rb:4:in `send_action'\nactionpack (5.0.0.1) lib/abstract_controller/base.rb:188:in `process_action'\nactionpack (5.0.0.1) lib/action_controller/metal/rendering.rb:30:in `process_action'\nactionpack (5.0.0.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'\nactivesupport (5.0.0.1) lib/active_support/callbacks.rb:126:in `call'\nactivesupport (5.0.0.1) lib/active_support/callbacks.rb:506:in `block (2 levels) in compile'\nactivesupport (5.0.0.1) lib/active_support/callbacks.rb:455:in `call'\nactivesupport (5.0.0.1) lib/active_support/callbacks.rb:101:in `__run_callbacks__'\nactivesupport (5.0.0.1) lib/active_support/callbacks.rb:750:in `_run_process_action_callbacks'\nactivesupport (5.0.0.1) lib/active_support/callbacks.rb:90:in `run_callbacks'\nactionpack (5.0.0.1) lib/abstract_controller/callbacks.rb:19:in `process_action'\nactionpack (5.0.0.1) lib/action_controller/metal/rescue.rb:20:in `process_action'\nactionpack (5.0.0.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'\nactivesupport (5.0.0.1) lib/active_support/notifications.rb:164:in `block in instrument'\nactivesupport (5.0.0.1) lib/active_support/notifications/instrumenter.rb:21:in `instrument'\nactivesupport (5.0.0.1) lib/active_support/notifications.rb:164:in `instrument'\nactionpack (5.0.0.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'\nactionpack (5.0.0.1) lib/action_controller/metal/params_wrapper.rb:248:in `process_action'\nactiverecord (5.0.0.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'\nactionpack (5.0.0.1) lib/abstract_controller/base.rb:126:in `process'\nactionview (5.0.0.1) lib/action_view/rendering.rb:30:in `process'\nactionpack (5.0.0.1) lib/action_controller/metal.rb:190:in `dispatch'\nactionpack (5.0.0.1) lib/action_controller/metal.rb:262:in `dispatch'\nactionpack (5.0.0.1) lib/action_dispatch/routing/route_set.rb:50:in `dispatch'\nactionpack (5.0.0.1) lib/action_dispatch/routing/route_set.rb:32:in `serve'\nactionpack (5.0.0.1) lib/action_dispatch/journey/router.rb:39:in `block in serve'\nactionpack (5.0.0.1) lib/action_dispatch/journey/router.rb:26:in `each'\nactionpack (5.0.0.1) lib/action_dispatch/journey/router.rb:26:in `serve'\nactionpack (5.0.0.1) lib/action_dispatch/routing/route_set.rb:725:in `call'\nrack-pjax (1.0.0) lib/rack/pjax.rb:12:in `call'\nremotipart (1.3.1) lib/remotipart/middleware.rb:32:in `call'\nwarden (1.2.6) lib/warden/manager.rb:35:in `block in call'\nwarden (1.2.6) lib/warden/manager.rb:34:in `catch'\nwarden (1.2.6) lib/warden/manager.rb:34:in `call'\nrack (2.0.1) lib/rack/etag.rb:25:in `call'\nrack (2.0.1) lib/rack/conditional_get.rb:25:in `call'\nrack (2.0.1) lib/rack/head.rb:12:in `call'\nrack (2.0.1) lib/rack/session/abstract/id.rb:222:in `context'\nrack (2.0.1) lib/rack/session/abstract/id.rb:216:in `call'\nactionpack (5.0.0.1) lib/action_dispatch/middleware/cookies.rb:613:in `call'\nactiverecord (5.0.0.1) lib/active_record/migration.rb:552:in `call'\nactionpack (5.0.0.1) lib/action_dispatch/middleware/callbacks.rb:38:in `block in call'\nactivesupport (5.0.0.1) lib/active_support/callbacks.rb:97:in `__run_callbacks__'\nactivesupport (5.0.0.1) lib/active_support/callbacks.rb:750:in `_run_call_callbacks'\nactivesupport (5.0.0.1) lib/active_support/callbacks.rb:90:in `run_callbacks'\nactionpack (5.0.0.1) lib/action_dispatch/middleware/callbacks.rb:36:in `call'\nactionpack (5.0.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'\nactionpack (5.0.0.1) lib/action_dispatch/middleware/remote_ip.rb:79:in `call'\nactionpack (5.0.0.1) lib/action_dispatch/middleware/debug_exceptions.rb:49:in `call'\nweb-console (3.3.1) lib/web_console/middleware.rb:131:in `call_app'\nweb-console (3.3.1) lib/web_console/middleware.rb:28:in `block in call'\nweb-console (3.3.1) lib/web_console/middleware.rb:18:in `catch'\nweb-console (3.3.1) lib/web_console/middleware.rb:18:in `call'\nactionpack (5.0.0.1) lib/action_dispatch/middleware/show_exceptions.rb:31:in `call'\nrailties (5.0.0.1) lib/rails/rack/logger.rb:36:in `call_app'\nrailties (5.0.0.1) lib/rails/rack/logger.rb:24:in `block in call'\nactivesupport (5.0.0.1) lib/active_support/tagged_logging.rb:70:in `block in tagged'\nactivesupport (5.0.0.1) lib/active_support/tagged_logging.rb:26:in `tagged'\nactivesupport (5.0.0.1) lib/active_support/tagged_logging.rb:70:in `tagged'\nrailties (5.0.0.1) lib/rails/rack/logger.rb:24:in `call'\nsprockets-rails (3.1.1) lib/sprockets/rails/quiet_assets.rb:13:in `call'\nactionpack (5.0.0.1) lib/action_dispatch/middleware/request_id.rb:24:in `call'\nrack (2.0.1) lib/rack/method_override.rb:22:in `call'\nrack (2.0.1) lib/rack/runtime.rb:22:in `call'\nactivesupport (5.0.0.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\nactionpack (5.0.0.1) lib/action_dispatch/middleware/executor.rb:12:in `call'\nactionpack (5.0.0.1) lib/action_dispatch/middleware/static.rb:136:in `call'\nrack (2.0.1) lib/rack/sendfile.rb:111:in `call'\nrailties (5.0.0.1) lib/rails/engine.rb:522:in `call'\npuma (3.6.0) lib/puma/configuration.rb:225:in `call'\npuma (3.6.0) lib/puma/server.rb:578:in `handle_request'\npuma (3.6.0) lib/puma/server.rb:415:in `process_client'\npuma (3.6.0) lib/puma/server.rb:275:in `block in run'\npuma (3.6.0) lib/puma/thread_pool.rb:116:in `block in spawn_thread'\nRequest\n\nParameters:\n\n{\"id\"=&gt;\"2\"}\nToggle session dump\nToggle env dump\nResponse\n\nHeaders:\n\nNone\nx\n&gt;&gt;   \n</code></pre>\n\n<p>I really tried everything. ActiveAdmin docs are not helping me so much. Please tell me How to solve this.</p>\n"}, {"tags": ["ruby", "error-handling"], "comments": [{"owner": {"reputation": 24791, "user_id": 499214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PObJM.png?s=128&g=1", "display_name": "John Dvorak", "link": "https://stackoverflow.com/users/499214/john-dvorak"}, "edited": false, "score": 0, "creation_date": 1484702070, "post_id": 41709715, "comment_id": 70614994, "body": "If Stripe is yours, you can have these exceptions inherit a common exception. Is it?"}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 4, "last_activity_date": 1484702599, "creation_date": 1484702599, "answer_id": 41709923, "question_id": 41709715, "link": "https://stackoverflow.com/questions/41709715/drying-repeated-rescue-statements/41709923#41709923", "title": "DRYing repeated rescue statements", "body": "<p>Somewhere in your app define a variable/constant/method which returns a list of the errors you want to rescue. For example:</p>\n\n<pre><code>STRIPE_ERRORS = [Stripe::InvalidRequestError, String::AuthenticationError]\n</code></pre>\n\n<p>The in your rescue block, you can use a splat operator to rescue any of these:</p>\n\n<pre><code>   begin\n     &lt;raise errors&gt;\n   rescue *STRIPE_ERRORS =&gt; e\n     &lt;handle errors&gt;\n   end\n</code></pre>\n\n<p>You can check which of the errors was raised with <code>e.class</code></p>\n"}, {"comments": [{"owner": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "edited": false, "score": 0, "creation_date": 1484725327, "post_id": 41710176, "comment_id": 70622364, "body": "Thanks for the answer! I think this seems to me very clear. I just wonder if # do something are the exact same, should I create some modules for &#39;handle_stripe_errors&#39; and where should I put the module?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "edited": false, "score": 0, "creation_date": 1484726572, "post_id": 41710176, "comment_id": 70622948, "body": "If <code># do something</code> are same, you can probably use maxple&#39;s solution. I don&#39;t know the architecture of your program, so can&#39;t tell you where would be the best place for the wrapper function."}, {"owner": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "edited": false, "score": 0, "creation_date": 1484726933, "post_id": 41710176, "comment_id": 70623127, "body": "I use those within service object and webhook to expand metadata."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 4, "last_activity_date": 1484704611, "creation_date": 1484704611, "answer_id": 41710176, "question_id": 41709715, "link": "https://stackoverflow.com/questions/41709715/drying-repeated-rescue-statements/41710176#41710176", "title": "DRYing repeated rescue statements", "body": "<p>Not quite sure if <code>do something</code> is same for each case or not. If not, this might do what you want:</p>\n\n<pre><code>def handle_stripe_errors\n  yield\nrescue Stripe::AuthenticationError =&gt; e, \n  # do something\nrescue Stripe::APIConnectionError =&gt; e, \n  # do something\nrescue Stripe::StripeError =&gt; e\n  # do something\nrescue =&gt; e\n  # do something\nend\n\nhandle_stripe_errors do\n  external_card_plan_service.create(api_attrs)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 11672748, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-sE7pS8f0aP8/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcSuWlKBxEHTPbvQeigP73fER__YQ/mo/photo.jpg?sz=128", "display_name": "Dannysauruses", "link": "https://stackoverflow.com/users/11672748/dannysauruses"}, "is_accepted": false, "score": 1, "last_activity_date": 1565725348, "last_edit_date": 1565725348, "creation_date": 1565724973, "answer_id": 57484272, "question_id": 41709715, "link": "https://stackoverflow.com/questions/41709715/drying-repeated-rescue-statements/57484272#57484272", "title": "DRYing repeated rescue statements", "body": "<p>Here's another solution that combines with Max's and Amadan's solution that DRY's it up a little more and makes a reusable class.</p>\n\n<p>This solution makes use of Rails <code>around_action</code> where you can define an action in a controller that surrounds its methods.</p>\n\n<p>i.e</p>\n\n<pre><code>...\nSTRIPE_ERRORS = [Stripe::InvalidRequestError, String::AuthenticationError, ...]\n\naround_action :stripe_error_handler\n...\n\ndef stripe_error_handler\n  yield\nrescue *STRIPE_ERRORS =&gt; e\n     &lt;handle errors&gt;\nend\n...\n</code></pre>\n\n<p>**You can specify which methods the <code>around_action</code> applies to!</p>\n\n<p>To make it a little more reusable you can define a class that contains a constant STRIPE_ERRORS and initializes with e in the rescue section (<code>StripeErrorHander.new(e)</code>) that way you can specify the behaviours for each Stripe error (maybe send an email/slack message on a specific error, make the error message a little more human readable).</p>\n\n<p>A simplified look at the class could look something like this:</p>\n\n<pre><code>class StripeErrorHandler\n  STRIPE_ERRORS = [\n    Stripe::CardError,\n    Stripe::RateLimitError,\n    ...\n  ].freeze\n\n  def initialize(error)\n    @error = error\n  end\n\n  def message\n    @error.message\n  end\n\n  def status\n    case @error\n    when Stripe::CardError\n      :unprocessable_entity\n    when Stripe::RateLimitError\n      :service_unavailable\n    else\n      :internal_server_error\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1565725348, "creation_date": 1484701034, "last_edit_date": 1516846400, "question_id": 41709715, "link": "https://stackoverflow.com/questions/41709715/drying-repeated-rescue-statements", "title": "DRYing repeated rescue statements", "body": "<p>I use stripe as a payment processor.</p>\n\n<p>Within the application, I send a request to Stripe to execute charge or for other types of processes, and basically use the same error handling boilerplate like below.</p>\n\n<pre><code>rescue Stripe::InvalidRequestError =&gt; e,  \n  # do something\nrescue Stripe::AuthenticationError =&gt; e, \n  # do something\nrescue Stripe::APIConnectionError =&gt; e, \n  # do something\nrescue Stripe::StripeError =&gt; e\n  # do something\nrescue =&gt; e\n  # do something\nend\n</code></pre>\n\n<p>While I could definitely <code>rescue</code> each of these error types in each API call, that's a lot of boilerplate code, I'd love to just <code>rescue</code> on all of them, and then build a method to do things such as logging, sending notification. </p>\n\n<p>How can I bundle these into one exception handler in a cleaner way (dry things up) like below?</p>\n\n<pre><code>def call\n   plan = Plan.new(attrs)\n   return plan unless plan.valid?\n\n   begin\n     external_card_plan_service.create(api_attrs)\n   rescue Exceptions::Stripe =&gt; e\n     plan.errors[:base] &lt;&lt; e.message\n     return plan\n   end\n\n   plan.save\n   plan.update(is_active: true, activated_at: Time.now.utc)\n   plan\n end\n</code></pre>\n"}, {"tags": ["ruby", "rabbitmq", "bunny"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1484701292, "post_id": 41709705, "comment_id": 70614808, "body": "Somehow you have more jobs ready than there are in the system. I think you broke something. Can you reproduce this? It could be a bug in RabbitMQ you&#39;ve discovered."}, {"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1484701463, "post_id": 41709705, "comment_id": 70614851, "body": "Please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}, {"owner": {"reputation": 18402, "user_id": 1858116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fQDZf.jpg?s=128&g=1", "display_name": "Gabriele Santomaggio", "link": "https://stackoverflow.com/users/1858116/gabriele-santomaggio"}, "edited": false, "score": 0, "creation_date": 1484727829, "post_id": 41709705, "comment_id": 70623667, "body": "Which version are you using?"}], "answers": [{"tags": [], "owner": {"reputation": 18402, "user_id": 1858116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fQDZf.jpg?s=128&g=1", "display_name": "Gabriele Santomaggio", "link": "https://stackoverflow.com/users/1858116/gabriele-santomaggio"}, "is_accepted": true, "score": 1, "last_activity_date": 1484730871, "creation_date": 1484730871, "answer_id": 41715329, "question_id": 41709705, "link": "https://stackoverflow.com/questions/41709705/negative-unack-in-rabbitmq/41715329#41715329", "title": "Negative unack in RabbitMQ", "body": "<p>This is only a management UI problem, <a href=\"https://github.com/rabbitmq/rabbitmq-management/issues/296\" rel=\"nofollow noreferrer\">see this bug</a></p>\n\n<p>The problem has been fixed in the last versions.</p>\n\n<p>The version <code>3.6.7</code> is <a href=\"https://github.com/rabbitmq/rabbitmq-server/releases/tag/rabbitmq_v3_6_7_milestone3\" rel=\"nofollow noreferrer\">around the corner</a>, you can try with it.</p>\n"}], "owner": {"reputation": 164, "user_id": 4586802, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/10202329763124223/picture?type=large", "display_name": "Avin A Good-time Chadee", "link": "https://stackoverflow.com/users/4586802/avin-a-good-time-chadee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 41715329, "answer_count": 1, "score": 1, "last_activity_date": 1484730871, "creation_date": 1484700974, "question_id": 41709705, "link": "https://stackoverflow.com/questions/41709705/negative-unack-in-rabbitmq", "title": "Negative unack in RabbitMQ", "body": "<p>Can someone explain this to me?</p>\n\n<p><a href=\"https://i.stack.imgur.com/Tl1tN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Tl1tN.png\" alt=\"enter image description here\"></a></p>\n\n<p>Stack is:\nRabbitMQ, Sneakers, Ruby, Bunny</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rspec", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1484724143, "post_id": 41709370, "comment_id": 70621795, "body": "Store it in a variable? e.g. <code>@log</code>."}], "answers": [{"tags": [], "owner": {"reputation": 778, "user_id": 490148, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fdf74175f7ff2d2ff2c03c10ca2bce39?s=128&d=identicon&r=PG", "display_name": "virtuexru", "link": "https://stackoverflow.com/users/490148/virtuexru"}, "is_accepted": false, "score": 0, "last_activity_date": 1484749545, "creation_date": 1484749545, "answer_id": 41721945, "question_id": 41709370, "link": "https://stackoverflow.com/questions/41709370/rspec-intercept-some-data-from-a-controller-action-and-send-to-read-it-within-a/41721945#41721945", "title": "Rspec: Intercept some data from a controller action and send to/read it within a spec", "body": "<p>You could try using expectations for the Logger class. Although it's a bit strange to use Rspecs to find items you are logging; if the information is that important maybe store it in a variable? Anywho; the code would be something like:</p>\n\n<pre><code>expect_any_instance_of(Logger).to receive(:foo)\n</code></pre>\n\n<p>You can check out more at the docs here: <a href=\"https://www.relishapp.com/rspec/rspec-mocks/v/2-14/docs/message-expectations/expect-a-message-on-any-instance-of-a-class!\" rel=\"nofollow noreferrer\">rspec expect a message on any instance of a class</a></p>\n"}], "owner": {"reputation": 931, "user_id": 2788619, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100006561616235/picture?type=large", "display_name": "L457", "link": "https://stackoverflow.com/users/2788619/l457"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484749545, "creation_date": 1484698867, "last_edit_date": 1484699515, "question_id": 41709370, "link": "https://stackoverflow.com/questions/41709370/rspec-intercept-some-data-from-a-controller-action-and-send-to-read-it-within-a", "title": "Rspec: Intercept some data from a controller action and send to/read it within a spec", "body": "<p>I have a custom Logger in the middle of my controller method which writes some data to a logfile (<code>logger.info 'some log data...'</code>). </p>\n\n<p>Is there any way I can intercept this data or possibly store a copy of this data within something like a string buffer and read it within my spec for processing after it is generated(possibly without stubbing)?</p>\n"}, {"tags": ["arrays", "ruby", "string", "integer", "min"], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1484699868, "post_id": 41709143, "comment_id": 70614415, "body": "@steenslag It wasn&#39;t clear if this data was going to be positive only or not, but in any case I&#39;ve added an optional <code>-</code>."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 4, "last_activity_date": 1484699845, "last_edit_date": 1484699845, "creation_date": 1484697211, "answer_id": 41709143, "question_id": 41709063, "link": "https://stackoverflow.com/questions/41709063/how-do-i-find-the-minimum-element-in-an-array-of-strings-but-only-considering-i/41709143#41709143", "title": "How do I find the minimum element in an array of strings, but only considering integers?", "body": "<p>You have a few ways of doing this, but the easiest is to screen out non-numerical values if you want to ignore the garbage:</p>\n\n<pre><code>data = [\"1\", \"a\", \"2\", \"3\"]\ndata.grep(/\\A\\-?\\d+\\z/).map(&amp;:to_i).min\n# =&gt; 1\n</code></pre>\n\n<p>The <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-grep\" rel=\"nofollow noreferrer\"><code>grep</code></a> method makes it pretty easy to pick out things that match a particular pattern, as well as many other things.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 3, "last_activity_date": 1484707935, "last_edit_date": 1484707935, "creation_date": 1484699388, "answer_id": 41709447, "question_id": 41709063, "link": "https://stackoverflow.com/questions/41709063/how-do-i-find-the-minimum-element-in-an-array-of-strings-but-only-considering-i/41709447#41709447", "title": "How do I find the minimum element in an array of strings, but only considering integers?", "body": "<p>When I want to convert a string to an integer, if and only it is a string representation of an integer, I always use <a href=\"http://ruby-doc.org/core-2.3.0/Kernel.html#method-i-Integer\" rel=\"nofollow noreferrer\">Kernel::Integer</a>:</p>\n\n<pre><code>arr = [\"3\", \"a\", \"2\", \"0x01\", \"0c\", \"0b11\", \"0o03\", \"4\", \"1_000\"]\n\narr.select { |s| Integer(s) rescue nil }.min_by { |s| Integer(s) }\n  #=&gt; \"0x01\" \n</code></pre>\n\n<p>Here</p>\n\n<pre><code>arr.select { |s| Integer(s) rescue nil }\n  #=&gt; [\"3\", \"2\", \"0x01\", \"0b11\", \"0o03\", \"4\", \"1_000\"] \n</code></pre>\n\n<p>Note <code>\"0x01\".to_i #=&gt; 0</code> (not!), which is why <code>Integer</code> must be used twice.</p>\n\n<p>If the string is not a representation of an integer, <code>Integer</code> raises an exception:</p>\n\n<pre><code>Integer(\"a\") \n  #=&gt; ArgumentError: invalid value for Integer(): \"a\"\n</code></pre>\n\n<p>which is rescued in-line, causing <code>nil</code> to be returned, resulting is the string not being selected. (One could of course go the extra mile and use a clause that only rescues <code>ArguementError</code> exceptions.) </p>\n\n<p>The question asks for an element of the array (a string) to be returned. If its integer equivalent is desired, you can write:</p>\n\n<pre><code>a = arr.map { |s| Integer(s) rescue nil }.compact.min\n  #=&gt; 1\n</code></pre>\n\n<p>where</p>\n\n<pre><code>arr.map { |s| Integer(s) rescue nil }\n  #=&gt; [3, nil, 2, 1, nil, 3, 3, 4, 1_000]\n</code></pre>\n\n<p>Note</p>\n\n<pre><code>['a', 'b'].map { |s| Integer(s) rescue nil }.compact.min\n  #=&gt; nil \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1484702948, "last_edit_date": 1484702948, "creation_date": 1484701871, "answer_id": 41709831, "question_id": 41709063, "link": "https://stackoverflow.com/questions/41709063/how-do-i-find-the-minimum-element-in-an-array-of-strings-but-only-considering-i/41709831#41709831", "title": "How do I find the minimum element in an array of strings, but only considering integers?", "body": "<p>Using <a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-grep_v\" rel=\"nofollow noreferrer\">Enumerable#grep_v</a> we can do the following and exclude wordy-strings:</p>\n\n<pre><code> arr = [\"1\", \"a\", \"2\", \"3\"]\n arr.grep_v(/[a-zA-Z]+/).min_by(&amp;:to_i) #=&gt; \"1\"\n</code></pre>\n\n<p>Modify the regexp as you feel appropriate.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 161, "favorite_count": 0, "accepted_answer_id": 41709143, "answer_count": 3, "score": 2, "last_activity_date": 1484707935, "creation_date": 1484696812, "last_edit_date": 1484697054, "question_id": 41709063, "link": "https://stackoverflow.com/questions/41709063/how-do-i-find-the-minimum-element-in-an-array-of-strings-but-only-considering-i", "title": "How do I find the minimum element in an array of strings, but only considering integers?", "body": "<p>I'm using Ruby 2.4.  I have an array of strings that are supposed to be integers ...</p>\n\n<pre><code>[\"1\", \"55\", \"25\", ... ]\n</code></pre>\n\n<p>I have the following for figuring out the minimum number in the array</p>\n\n<pre><code>data.map(&amp;:to_i).min\n</code></pre>\n\n<p>This works great, except for the times when a non-integer string creeps into my array, like</p>\n\n<pre><code>[\"1\", \"a\", \"2\", \"3\"]\n</code></pre>\n\n<p>With my <code>data.map(&amp;:to_i).min</code> line, the above returns zero.  How do I modify my code so that it will only take the min of elements in the array that are actually integers?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 7972, "user_id": 1297435, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/a9a1330f0e323fabed39f561f1b0d94c?s=128&d=identicon&r=PG", "display_name": "rails_id", "link": "https://stackoverflow.com/users/1297435/rails-id"}, "edited": false, "score": 0, "creation_date": 1484702190, "post_id": 41708903, "comment_id": 70615042, "body": "Try use <code>delete</code> instead of <code>get</code> on sign_out."}], "answers": [{"comments": [{"owner": {"reputation": 4391, "user_id": 3106174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mKAhl.jpg?s=128&g=1", "display_name": "Advice-Dog", "link": "https://stackoverflow.com/users/3106174/advice-dog"}, "edited": false, "score": 0, "creation_date": 1484696332, "post_id": 41708940, "comment_id": 70613380, "body": "I had <code>resources :users</code> before the <code>devise_for</code> block. Moving it after the block fixed my issue. Although, using the second suggestion doesn&#39;t seem to work, run in to he same issue as before."}], "tags": [], "owner": {"reputation": 2840, "user_id": 6400294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KtX2z.jpg?s=128&g=1", "display_name": "Shannon", "link": "https://stackoverflow.com/users/6400294/shannon"}, "is_accepted": false, "score": 1, "last_activity_date": 1484696076, "creation_date": 1484696076, "answer_id": 41708940, "question_id": 41708903, "link": "https://stackoverflow.com/questions/41708903/ruby-on-rails-user-devise-routing/41708940#41708940", "title": "Ruby on Rails - User Devise Routing", "body": "<p>Try adding <code>resources :users</code> after your <code>devise_for</code> block.</p>\n\n<p>You can also use the following:</p>\n\n<pre><code>devise_for :users, path: '', path_names: { sign_in: 'login', sign_out: 'logout'}\n</code></pre>\n"}], "owner": {"reputation": 4391, "user_id": 3106174, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/mKAhl.jpg?s=128&g=1", "display_name": "Advice-Dog", "link": "https://stackoverflow.com/users/3106174/advice-dog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1484696092, "creation_date": 1484695895, "question_id": 41708903, "link": "https://stackoverflow.com/questions/41708903/ruby-on-rails-user-devise-routing", "title": "Ruby on Rails - User Devise Routing", "body": "<p>I'm having issues with routing with Devise and my <code>Users</code> model. I was trying to get <code>sign_out</code> to work and found an answer that suggested this.</p>\n\n<p>// routes.rb</p>\n\n<pre><code>devise_for :users do\n    get '/users/sign_out' =&gt; 'devise/sessions#destroy'\n    get '/users/sign_in' =&gt; 'devise/sessions#create'\nend\n</code></pre>\n\n<p>And while this works for signing out, if I use just that I cannot view a <code>User</code>.</p>\n\n<p><code>No route matches [GET] \"/users/1\"</code></p>\n\n<p>However, if I add back <code>resources :users</code>, I run into the first issue where <code>sign_out</code> or <code>sign_in</code> try to view a <code>User</code>.</p>\n\n<p><code>Couldn't find User with 'id'=sign_out</code></p>\n\n<p>How do I add <code>/users/index</code> to the <code>devise_for</code> loop?</p>\n\n<p>Thanks for your help.</p>\n"}, {"tags": ["ruby", "rvm", "apache-zookeeper"], "answers": [{"comments": [{"owner": {"reputation": 16730, "user_id": 101095, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/9e5c6cdbcebd9b26a264a97465f713ce?s=128&d=identicon&r=PG", "display_name": "Cuga", "link": "https://stackoverflow.com/users/101095/cuga"}, "edited": false, "score": 0, "creation_date": 1536672600, "post_id": 41730624, "comment_id": 91501962, "body": "Thanks, this saved me, it was my exact issue."}], "tags": [], "owner": {"reputation": 105, "user_id": 5140108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/330a3b70c6cf72f4568e25b2c5f7e9b2?s=128&d=identicon&r=PG&f=1", "display_name": "Rebecca", "link": "https://stackoverflow.com/users/5140108/rebecca"}, "is_accepted": false, "score": 3, "last_activity_date": 1484778608, "creation_date": 1484778608, "answer_id": 41730624, "question_id": 41708873, "link": "https://stackoverflow.com/questions/41708873/zookeeper-1-4-11-wont-install/41730624#41730624", "title": "Zookeeper 1.4.11 won&#39;t install", "body": "<p>The problem was the following line in my ~/.bash_profile:</p>\n\n<p><code>export GREP_OPTIONS='--color=always'</code></p>\n\n<p>It was inject color characters in unexpected places. The way I found this was looking into the libtool generated by the build script inside Zookeeper, and I found some weird color characters.</p>\n"}], "owner": {"reputation": 105, "user_id": 5140108, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/330a3b70c6cf72f4568e25b2c5f7e9b2?s=128&d=identicon&r=PG&f=1", "display_name": "Rebecca", "link": "https://stackoverflow.com/users/5140108/rebecca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1484779928, "creation_date": 1484695716, "last_edit_date": 1484779928, "question_id": 41708873, "link": "https://stackoverflow.com/questions/41708873/zookeeper-1-4-11-wont-install", "title": "Zookeeper 1.4.11 won&#39;t install", "body": "<p>I'm having a problem with Zookeeper 1.4.11. It's a dependency of my project, and everytime I try to bundle I get:</p>\n\n<pre><code>Gem::Ext::BuildError: ERROR: Failed to build gem native extension.\n ...\n_zookeeper_interest\n_zookeeper_process\nmake[1]: *** [libzookeeper_st.la] Error 1\nmake: *** [all] Error 2\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary libraries and/or headers.  Check the mkmf.log file for more details.  You may need configuration options.\n</code></pre>\n\n<p>When I look for the <code>mkmf.log</code>, it doesn't exist anywhere. Has anyone seen this before?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "authorization", "pundit"], "answers": [{"tags": [], "owner": {"reputation": 33340, "user_id": 605707, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MxKJx.jpg?s=128&g=1", "display_name": "deefour", "link": "https://stackoverflow.com/users/605707/deefour"}, "is_accepted": true, "score": 1, "last_activity_date": 1484856124, "last_edit_date": 1484856124, "creation_date": 1484855385, "answer_id": 41750447, "question_id": 41708782, "link": "https://stackoverflow.com/questions/41708782/rails-5-pundit-authorisation-for-nested-resource/41750447#41750447", "title": "Rails 5 - Pundit - authorisation for nested resource", "body": "<p>Unless I'm missing something, <code>@current_user</code> isn't defined in your policies. How about simplifying your <code>show?</code> method:</p>\n\n<pre><code>def show?\n  return true unless record.private_comment?\n\n  return [ record.user_id, record.proposal.user_id ].include? user.id\nend\n</code></pre>\n\n<hr>\n\n<p>I think building huge conditionals like you've done is a common trap when thinking through the guards for an action.</p>\n\n<p>I find policy methods much easier to read and write if you consider the shortest possible paths to a failure or success of the guard independently up front. Follow these by weird edge cases, and finally a default (usually <code>false</code>) if necessary.</p>\n\n<p>This will lead to less duplication <em>(like your repeated evaluation of <code>record.private_comment == true</code>)</em> and cleaner code.</p>\n\n<p>It's also worth pointing out <a href=\"https://github.com/rails/rails/blob/master/activerecord/lib/active_record/attribute_methods/query.rb\" rel=\"nofollow noreferrer\">query methods exist for boolean attributes</a> on rails models. That is how you are able to do <code>record.private_comment?</code> instead of <code>record.private_comment == true</code>.</p>\n"}], "owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 506, "favorite_count": 0, "accepted_answer_id": 41750447, "answer_count": 1, "score": 0, "last_activity_date": 1484856124, "creation_date": 1484695303, "last_edit_date": 1484697771, "question_id": 41708782, "link": "https://stackoverflow.com/questions/41708782/rails-5-pundit-authorisation-for-nested-resource", "title": "Rails 5 - Pundit - authorisation for nested resource", "body": "<p>I am trying to figure out how to use Pundit with my Rails 5 app.</p>\n\n<p>I have models for Proposal, Potential and User. The associations are:</p>\n\n<p>Proposal</p>\n\n<pre><code>has_many :potentials, inverse_of: :proposal\n    accepts_nested_attributes_for :potentials, reject_if: :all_blank, allow_destroy: true\n\nbelongs_to :user\n</code></pre>\n\n<p>Potential</p>\n\n<pre><code>belongs_to :proposal, inverse_of: :potentials\n  belongs_to :user\n</code></pre>\n\n<p>User</p>\n\n<pre><code>has_many :proposals, dependent: :destroy\n  has_many :potentials\n</code></pre>\n\n<p>I have pundit policies for each of these resources. </p>\n\n<p>I am currently struggling to figure out how to implement rules so that potentials are only shown if rules are applied.</p>\n\n<p>My potentials are rendered in a partial saved in my proposals view folder. It has:</p>\n\n<pre><code>&lt;% @proposal.potentials.each do | pot | %&gt;\n        &lt;div class=\"panel\"&gt;\n            &lt;% if policy(pot).show? %&gt;\n                &lt;% if pot.private_comment == true %&gt;\n                    &lt;p&gt; &lt;%= render :text =&gt; 'CONFIDENTIAL - NOT FOR PUBLIC DISCLOSURE' %&gt;&lt;/p&gt;\n                    &lt;% end %&gt;\n                        &lt;p&gt;&lt;%=  pot.comment %&gt;\n                        &lt;/p&gt;\n                        &lt;p style = \"color: navy; text-align:right\"&gt;&lt;%= pot.user.full_name %&gt;, &lt;%= pot.user.organisation.title.titleize %&gt;&lt;/p&gt;\n\n                        &lt;p style=\"font-style:italic; color: #FFFFFF; float:right\"&gt;&lt;%= text_for_status(pot)%&gt;&lt;/p&gt;\n                    &lt;/div&gt;\n                &lt;% end %&gt;\n        &lt;% end %&gt;\n</code></pre>\n\n<p>In my proposal controller, show action, I have:</p>\n\n<pre><code>    before_action :set_proposal, only: [:show, :edit, :update, :destroy ]\n\ndef show\n        @potentials = @proposal.potentials\nend\n\nprivate\n    # Use callbacks to share common setup or constraints between actions.\n    def set_proposal\n      @proposal = Proposal.find(params[:id])\n      authorize @proposal\n    end\n</code></pre>\n\n<p>In my potential policy, I define the rules for show as any of the 3 criteria listed being true:</p>\n\n<pre><code>class PotentialPolicy &lt; ApplicationPolicy\n\n\n  def index?\n    true\n  end\n\n    def show?\ntrue  if record.private_comment != true ||\n      if record.private_comment == true &amp;&amp; @current_user == record.user_id ||\n      if record.private_comment == true &amp;&amp; @current_user  == record.proposal.user_id\n      else false\n      end\n      end\n</code></pre>\n\n<p>end</p>\n\n<pre><code>  def new?\n    true\n  end\n\n  def create?\n    true\n  end\n\n  def edit?\n    update?\n  end\n\n  def update?\n    true if record.user_id == current_user.id\n  end\n\n  def destroy?\n    false\n  end\n\nend\n</code></pre>\n\n<p>My expectation is that since I ask for the potential policy to be checked in the views/proposals/temporary_proposals.html.erb partial (above) and extracted below, </p>\n\n<pre><code>&lt;% if policy(pot).show? %&gt; \n</code></pre>\n\n<p>Note: pot is defined as @proposal.potential.</p>\n\n<p>The only logical error I can see in this is that current user is the user rather than the user id. But, if I append \".id\" to the end of current_user, I get an error that says \"id is nil\". </p>\n\n<p>Pundit will look at the potential policy for that proposal and figure out whether to display the record or not. </p>\n\n<p>This isnt right because when I save all this and try to render the proposal show, I can only see potentials where the :private_comment attribute is not true (but I do meet the criteria for the second and third qualifying permission (i.e. I created the potential and the proposal) - so I should be able to view that record).</p>\n\n<p>My application policy has:</p>\n\n<pre><code>class ApplicationPolicy\n  attr_reader :user, :record\n\n  def initialize(user, record)\n    @user = user\n    @record = record\n  end\n</code></pre>\n\n<p>I understand this to mean that since my potential policy inherits from my application policy, I should be able to refer to @record to mean the record this policy is trying to handle. To me, that means I should be able to define the show action as:</p>\n\n<pre><code>def show?\n    true  if record.private_comment != true ||\n          if record.private_comment == true &amp;&amp; @current_user == @record.user ||\n          if record.private_comment == true &amp;&amp; @current_user  == @record.proposal.user\n          else false\n          end\n    end\n  end\n</code></pre>\n\n<p>But this gives the same incorrect result as the attempt above.</p>\n\n<p>Can anyone see where I've got this wrong?</p>\n"}, {"tags": ["ruby", "gsub"], "comments": [{"owner": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "edited": false, "score": 0, "creation_date": 1484696132, "post_id": 41708730, "comment_id": 70613311, "body": "Do stock ticker symbols consist only of letters? Or are numbers allowed?"}], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 0, "last_activity_date": 1484697024, "creation_date": 1484697024, "answer_id": 41709099, "question_id": 41708730, "link": "https://stackoverflow.com/questions/41708730/using-ruby-gsub-to-parse-stock-ticker/41709099#41709099", "title": "Using ruby gsub to parse stock ticker", "body": "<p>Assuming that the date is the first number with 6 digits, the company name is right before and the type is right after, you can use this Regexp :</p>\n\n<pre><code>/(\\w+?)(\\d{6})([a-z])\\d+/i\n</code></pre>\n\n<p>Since you asked for <code>gsub</code> (which might not be the best solution here) :</p>\n\n<pre><code>\"NKE170217C00055000\".gsub(/(\\w+?)(\\d{6})([a-z])\\d+/i,'Name : \\1, Date : \\2, Type : \\3')\n#=&gt; \"Name : NKE, Date : 170217, Type : C\"\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1724295"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 41709099, "answer_count": 1, "score": 0, "last_activity_date": 1484697024, "creation_date": 1484694972, "question_id": 41708730, "link": "https://stackoverflow.com/questions/41708730/using-ruby-gsub-to-parse-stock-ticker", "title": "Using ruby gsub to parse stock ticker", "body": "<p>I have the following stock ticker string:</p>\n\n<pre><code>\"NKE170217C00055000\"\n</code></pre>\n\n<p>Using gsub, what would be the best way to grab from the ticker:</p>\n\n<ol>\n<li>Company name (i.e. \"NKE\")</li>\n<li>Date (i.e. \"170217\")</li>\n<li>Type (i.e. \"C\")</li>\n</ol>\n\n<p>Thank!</p>\n"}, {"tags": ["ruby", "rubygems", "libxml2", "libxml-ruby"], "comments": [{"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1484693546, "post_id": 41708446, "comment_id": 70612352, "body": "\u201cCould not create Makefile due to some reason, probably lack of necessary libraries and/or headers.  Check the mkmf.log file for more details.  You may need configuration options.\u201d"}, {"owner": {"reputation": 87, "user_id": 4237911, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/bb322bc99270acb8ad21d14d5d909a45?s=128&d=identicon&r=PG&f=1", "display_name": "Fyree", "link": "https://stackoverflow.com/users/4237911/fyree"}, "reply_to_user": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1484693637, "post_id": 41708446, "comment_id": 70612394, "body": "I checked the mkmf.log file, and was able to get some of the necessary headers. Still did not fix the issue though."}, {"owner": {"reputation": 32100, "user_id": 1033581, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e8891617e36b8d1254eb3ce1a5662da4?s=128&d=identicon&r=PG", "display_name": "C\u0153ur", "link": "https://stackoverflow.com/users/1033581/c%c5%93ur"}, "edited": false, "score": 0, "creation_date": 1521183058, "post_id": 41708446, "comment_id": 85630843, "body": "Please post your mkmf.log."}], "owner": {"reputation": 87, "user_id": 4237911, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/bb322bc99270acb8ad21d14d5d909a45?s=128&d=identicon&r=PG&f=1", "display_name": "Fyree", "link": "https://stackoverflow.com/users/4237911/fyree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 331, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1505921365, "creation_date": 1484693434, "question_id": 41708446, "link": "https://stackoverflow.com/questions/41708446/unable-to-install-newest-libxml-ruby-gem", "title": "Unable to install newest libxml-ruby gem", "body": "<p>I am having trouble installing the newest libxml-ruby gem for ruby 2.3.3. Here is the error I am getting:</p>\n\n<pre><code>ERROR:  Error installing libxml-ruby:\n    ERROR: Failed to build gem native extension.\n\ncurrent directory: C:/Ruby-2.3.3/lib/ruby/gems/2.3.0/gems/libxml-ruby-2.9.0/ext/libxml\nC:/Ruby-2.3.3/bin/ruby.exe -r ./siteconf20170117-6916-4mgpq6.rb extconf.rb\nchecking for libxml/xmlversion.h in /opt/include/libxml2,/opt/local/include/libxml2,/usr/local/include/libxml2,/usr/include/libxml2... yes\nchecking for xmlParseDoc() in -lxml2... no\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=C:/Ruby-2.3.3/bin/$(RUBY_BASE_NAME)\n    --with-xml2-config\n    --without-xml2-config\n    --with-xml2-dir\n    --without-xml2-dir\n    --with-xml2-include\n    --without-xml2-include=${xml2-dir}/include\n    --with-xml2-lib\n    --without-xml2-lib=${xml2-dir}/lib\n    --with-xml2lib\n    --without-xml2lib\n extconf failure: need libxml2.\n\nInstall the library or try one of the following options to extconf.rb:\n\n  --with-xml2-config=/path/to/xml2-config\n  --with-xml2-dir=/path/to/libxml2\n  --with-xml2-lib=/path/to/libxml2/lib\n  --with-xml2-include=/path/to/libxml2/include\n\n\nTo see why this extension failed to compile, please check the mkmf.log which can be found here:\n</code></pre>\n\n<p>I have found similar issues when looking for a solution, but no answer to the problem. Has anyone been able to fix this?</p>\n"}, {"tags": ["ruby", "cucumber", "parallel-testing"], "comments": [{"owner": {"reputation": 724, "user_id": 7985378, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/D9yDr.jpg?s=128&g=1", "display_name": "Sergio Prats", "link": "https://stackoverflow.com/users/7985378/sergio-prats"}, "edited": false, "score": 1, "creation_date": 1499855725, "post_id": 41708434, "comment_id": 77083678, "body": "I deleted cucumber.yml from ...Project\\config folder and it solved the problem, now I can run tests again."}], "answers": [{"comments": [{"owner": {"reputation": 1101, "user_id": 1091943, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2a0fb54ef44829caf823398a40e3c9ee?s=128&d=identicon&r=PG", "display_name": "Pysis", "link": "https://stackoverflow.com/users/1091943/pysis"}, "edited": false, "score": 0, "creation_date": 1532098607, "post_id": 48100074, "comment_id": 89860774, "body": "I forgot to add the rerun flag(s) this time around and was manually copying the output from the tool to add to a rerun file and missed this detail for a later trial.  Nice addition!"}], "tags": [], "owner": {"reputation": 145, "user_id": 1627766, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03e0b4ef5a47591b964229d3ebc29565?s=128&d=identicon&r=PG", "display_name": "Aaron", "link": "https://stackoverflow.com/users/1627766/aaron"}, "is_accepted": false, "score": 3, "last_activity_date": 1515085097, "creation_date": 1515085097, "answer_id": 48100074, "question_id": 41708434, "link": "https://stackoverflow.com/questions/41708434/cucumber-yml-was-found-but-cant-be-parsed-for-parallel-tests/48100074#48100074", "title": "Cucumber.yml was found, but can&#39;t be parsed for Parallel_Tests", "body": "<p>I stumbled upon this problem and only found solutions that suggested removing <code>rerun.txt</code>. That was not an option for me because I rely on that file to rerun failing scenarios.</p>\n\n<p>For some reason Cucumber outputs failing scenarios separated by <code>\\n</code> in <code>rerun.txt</code> which is not accepted by the default command found in <code>cucumber.yml</code>.</p>\n\n<p>My solution was to change the first line of <code>cucumber.yml</code> to substitute <code>\\n</code> with a space:</p>\n\n<pre><code>rerun = File.file?('rerun.txt') ? IO.read('rerun.txt').gsub(/\\n/, ' ') : \"\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5894, "user_id": 368330, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e9481fced0ea8fad7c1103dca297825c?s=128&d=identicon&r=PG", "display_name": "MonsieurDart", "link": "https://stackoverflow.com/users/368330/monsieurdart"}, "is_accepted": false, "score": 0, "last_activity_date": 1518731231, "creation_date": 1518731231, "answer_id": 48816857, "question_id": 41708434, "link": "https://stackoverflow.com/questions/41708434/cucumber-yml-was-found-but-cant-be-parsed-for-parallel-tests/48816857#48816857", "title": "Cucumber.yml was found, but can&#39;t be parsed for Parallel_Tests", "body": "<p>I had the same issue with the tests of Rails-Cucumber itself. In my case, just running this line fixed the problem:</p>\n\n<pre><code>rm .cucumber.rerun\n</code></pre>\n\n<p>Caution, sometimes the <code>rerun</code> file can have a different name.</p>\n"}, {"comments": [{"owner": {"reputation": 1521, "user_id": 7177640, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/21ab719e4dfae3533a20da4f52e5c9e7?s=128&d=identicon&r=PG", "display_name": "nattfodd", "link": "https://stackoverflow.com/users/7177640/nattfodd"}, "edited": false, "score": 0, "creation_date": 1520609416, "post_id": 49196691, "comment_id": 85398969, "body": "If you decided to answer the question, feel free to explain it. Answer should be self-explanatory &amp; full."}], "tags": [], "owner": {"reputation": 1, "user_id": 9468083, "user_type": "registered", "profile_image": "https://graph.facebook.com/1363306780442737/picture?type=large", "display_name": "Mikalai Karol", "link": "https://stackoverflow.com/users/9468083/mikalai-karol"}, "is_accepted": false, "score": 0, "last_activity_date": 1520608186, "creation_date": 1520608186, "answer_id": 49196691, "question_id": 41708434, "link": "https://stackoverflow.com/questions/41708434/cucumber-yml-was-found-but-cant-be-parsed-for-parallel-tests/49196691#49196691", "title": "Cucumber.yml was found, but can&#39;t be parsed for Parallel_Tests", "body": "<p>There is a suggestion to use gem update \u2013system</p>\n"}, {"tags": [], "owner": {"reputation": 53591, "user_id": 26510, "user_type": "registered", "accept_rate": 99, "profile_image": "https://www.gravatar.com/avatar/25ee9a1b9f5a16feb1432882a9ef2f06?s=128&d=identicon&r=PG", "display_name": "Brad Parks", "link": "https://stackoverflow.com/users/26510/brad-parks"}, "is_accepted": false, "score": 0, "last_activity_date": 1554828028, "creation_date": 1554828028, "answer_id": 55597503, "question_id": 41708434, "link": "https://stackoverflow.com/questions/41708434/cucumber-yml-was-found-but-cant-be-parsed-for-parallel-tests/55597503#55597503", "title": "Cucumber.yml was found, but can&#39;t be parsed for Parallel_Tests", "body": "<p>For me, the error </p>\n\n<p><code>cucumber.yml was found, but could not be parsed with ERB</code> </p>\n\n<p>meant that I was running my tests from RubyMine, and had set my <code>Features folder</code> not to the root of my project, but to a subfolder in the project called <code>features</code>.</p>\n\n<p>When I changed this to the root of my project, it worked out fine!</p>\n"}], "owner": {"reputation": 191, "user_id": 5858411, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/jjyS2.jpg?s=128&g=1", "display_name": "Austin L", "link": "https://stackoverflow.com/users/5858411/austin-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1482, "favorite_count": 1, "answer_count": 4, "score": 4, "last_activity_date": 1554828028, "creation_date": 1484693397, "last_edit_date": 1484755557, "question_id": 41708434, "link": "https://stackoverflow.com/questions/41708434/cucumber-yml-was-found-but-cant-be-parsed-for-parallel-tests", "title": "Cucumber.yml was found, but can&#39;t be parsed for Parallel_Tests", "body": "<p>When running multiple features with the Ruby gem Parallel_Tests in cucumber using this command:</p>\n\n<pre><code>parallel_cucumber features/\n</code></pre>\n\n<p>with a cucumber.yml file under my project root>config folder, which looks like:</p>\n\n<pre><code>default: --format html --out report&lt;%= ENV['TEST_ENV_NUMBER'] %&gt;.html\n</code></pre>\n\n<p>I receive the following error message:</p>\n\n<pre><code>cucumber.yml was found, but could not be parsed. Please refer to cucumber's documentation on correct profile usage.\n</code></pre>\n\n<p>I have looked into this and some others have thought it was due to a rerun.txt file, but i have not created this file and a project file search returns nothing. I am currently at a loss of what is causing cucumber to fail reading in the yaml file. Any help would be great.</p>\n\n<p>As described by another post, I went into lib/\ncucumber/cli/profile_loader.rb and added a STDERR output like so:</p>\n\n<pre><code>begin\n  @cucumber_yml = YAML::load(@cucumber_erb)\nrescue StandardError =&gt; e\n  STDERR.puts @cucumber_erb\n  raise(YmlLoadError,\"cucumber.yml was found, but could not be parsed.     Please refer to cucumber's documentation on correct profile usage.\\n\")\nend\n</code></pre>\n\n<p>Here is the result:</p>\n\n<pre><code>#parallel_reports: --format html --out reports/cukes_.html \ncucumber.yml was found, but could not be parsed. Please refer to cucumber's documentation on correct profile usage.\n#      \n\ndefault: --format htm#l  \n-   \noduetf aruelpto:r t-2-.fhotrmmla  #hptamrla l-l-eolu_tr erpeoprotrst:4 .-h-tfmolr a#tp ahrtamlll e-l-_oruetp orretpso:r t-s-/fcourkmeast_ .hhttmmll - ouctu cruempboerrt.sy/mclu kweass_ .fhotumnld, buctu ccuomubledr .nyomtl  bwea sp afrosuendd.,  Pblueta sceo urledf enro tt ob ec upcaurmsbeedr.' sP ldeoacsuem ernetfaetri otno  ocnu ccuomrbreerc'ts  pdroocfuimleen tu astaigoen. \nn correct profile usage.\n</code></pre>\n"}, {"tags": ["ruby", "ruby-2.3"], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 3, "last_activity_date": 1484694154, "last_edit_date": 1484694154, "creation_date": 1484693488, "answer_id": 41708463, "question_id": 41708372, "link": "https://stackoverflow.com/questions/41708372/why-is-this-switch-statement-not-working/41708463#41708463", "title": "Why is this switch statement not working?", "body": "<h1>Problems</h1>\n\n<h3>case a when b</h3>\n\n<pre><code>case a\nwhen b\n</code></pre>\n\n<p>tests if <code>a</code> is equal to <code>b</code>.</p>\n\n<p>In your case, <code>a</code> is a number (<code>num</code>) and <code>b</code> is a boolean (<code>num % 4 == 0</code>) so this never happens.</p>\n\n<h3>when b,c</h3>\n\n<p>Another problem is that</p>\n\n<pre><code>case\nwhen b,c\n</code></pre>\n\n<p>tests if <code>b</code> <strong>or</strong> <code>c</code>.</p>\n\n<p>If you want to check that <code>num</code> is divisible by 24, you need <code>b</code> <strong>and</strong> <code>c</code>.</p>\n\n<h1>Solution</h1>\n\n<p>Remove <code>num</code> from <code>case</code> and use logical and (<code>&amp;&amp;</code>) :</p>\n\n<pre><code>(1..100).each do |num|\n  case\n  when num % 4 == 0 &amp;&amp; num % 6 == 0\n  ## or just :\n  # when num % 24 == 0\n    puts 'Cluck'\n  when num % 4 == 0\n    puts 'Cluck Cluck'\n  when num % 5 == 0\n    puts 'Cluck Cluck Cluck'\n  else\n    puts num\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "is_accepted": false, "score": 0, "last_activity_date": 1484694033, "last_edit_date": 1484694033, "creation_date": 1484693515, "answer_id": 41708465, "question_id": 41708372, "link": "https://stackoverflow.com/questions/41708372/why-is-this-switch-statement-not-working/41708465#41708465", "title": "Why is this switch statement not working?", "body": "<p>I read over <a href=\"http://www.skorks.com/2009/08/how-a-ruby-case-statement-works-and-what-you-can-do-with-it/\" rel=\"nofollow noreferrer\">this guide </a> quick, and it seems to be that you're trying to use the <code>case</code> as an <code>if</code> statement, but you supplied a value to match against. </p>\n\n<p>Because you gave <code>num</code> as the first argument of <code>case</code>, it's expecting to match against it. The problem is, your conditions evaluate to boolean values, and  <code>num</code> is a number, so they'll never match, and the else condition will always be run. </p>\n\n<p>Remove the <code>num</code> from the start of the <code>case</code>. </p>\n"}, {"tags": [], "owner": {"reputation": 2899, "user_id": 2981518, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/vdLsm.jpg?s=128&g=1", "display_name": "Manish Giri", "link": "https://stackoverflow.com/users/2981518/manish-giri"}, "is_accepted": false, "score": 1, "last_activity_date": 1484693850, "creation_date": 1484693850, "answer_id": 41708540, "question_id": 41708372, "link": "https://stackoverflow.com/questions/41708372/why-is-this-switch-statement-not-working/41708540#41708540", "title": "Why is this switch statement not working?", "body": "<p>Oh well, Eric's answer is right on the money. I'd just add this as a <a href=\"http://www.skorks.com/2009/08/how-a-ruby-case-statement-works-and-what-you-can-do-with-it/\" rel=\"nofollow noreferrer\">reference</a> - </p>\n\n<blockquote>\n  <p>It doesn\u2019t end there though you can use a case statement without giving it a value to match against, which allows a case statement to mimic the behavior of an if statement, e.g.:</p>\n</blockquote>\n\n<pre><code>print \"Enter a string: \"\nsome_string = gets.chomp\ncase\nwhen some_string.match(/\\d/)\n  puts 'String has numbers'\nwhen some_string.match(/[a-zA-Z]/)\n  puts 'String has letters'\nelse\n  puts 'String has no numbers or letters'\nend\n</code></pre>\n"}], "owner": {"reputation": 624, "user_id": 1159777, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/n60jt.jpg?s=128&g=1", "display_name": "JoshEmory", "link": "https://stackoverflow.com/users/1159777/joshemory"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1484696457, "answer_count": 3, "score": 3, "last_activity_date": 1484694154, "creation_date": 1484693124, "last_edit_date": 1484693765, "question_id": 41708372, "link": "https://stackoverflow.com/questions/41708372/why-is-this-switch-statement-not-working", "closed_reason": "Duplicate", "title": "Why is this switch statement not working?", "body": "<p>I have this code</p>\n\n<pre><code>(1..50).each do |num|\n    case num\n      when num % 4 == 0, num % 6 == 0\n        puts 'Cluck'\n      when num % 4 == 0\n        puts 'Cluck Cluck'\n      when num % 5 == 0\n        puts 'Cluck Cluck Cluck'\n      else\n        puts num\n    end\nend    \n</code></pre>\n\n<p>For some odd reason, instead of putting cluck cluck on the fourth line or cluck on the 24th line, it's just putting a list of 1 through 100. I can't figure out what's wrong with the switch statement. The first when using the comma or &amp;&amp; doesn't change anything either (which I don't believe it should).</p>\n"}, {"tags": ["ruby", "terminal", "permissions", "bundle"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 7432758, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-zrAWOuexzF4/AAAAAAAAAAI/AAAAAAAAAZs/KlTabsY_2WA/photo.jpg?sz=128", "display_name": "Solly Denham", "link": "https://stackoverflow.com/users/7432758/solly-denham"}, "edited": false, "score": 0, "creation_date": 1484838358, "post_id": 41708227, "comment_id": 70682885, "body": "That doesnt do anything!"}, {"owner": {"reputation": 1624, "user_id": 2912211, "user_type": "registered", "profile_image": "https://graph.facebook.com/1059632598/picture?type=large", "display_name": "Zzz", "link": "https://stackoverflow.com/users/2912211/zzz"}, "reply_to_user": {"reputation": 5, "user_id": 7432758, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-zrAWOuexzF4/AAAAAAAAAAI/AAAAAAAAAZs/KlTabsY_2WA/photo.jpg?sz=128", "display_name": "Solly Denham", "link": "https://stackoverflow.com/users/7432758/solly-denham"}, "edited": false, "score": 0, "creation_date": 1484863653, "post_id": 41708227, "comment_id": 70697723, "body": "seems you&#39;ve changed rails or active support gem version in <code>Gemfile</code>, you can either run <code>bundle update</code> or change them back"}], "tags": [], "owner": {"reputation": 1624, "user_id": 2912211, "user_type": "registered", "profile_image": "https://graph.facebook.com/1059632598/picture?type=large", "display_name": "Zzz", "link": "https://stackoverflow.com/users/2912211/zzz"}, "is_accepted": true, "score": 0, "last_activity_date": 1484692364, "creation_date": 1484692364, "answer_id": 41708227, "question_id": 41708139, "link": "https://stackoverflow.com/questions/41708139/why-am-i-getting-error-permission-denied-rb-sysopen-when-my-computer-trys-to-r/41708227#41708227", "title": "Why am I getting error Permission denied @ rb_sysopen when my computer trys to run bundle install", "body": "<p>Like it suggested, run</p>\n\n<pre><code>gem install metasploit-payloads -v '1.2.6'\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 7432758, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh5.googleusercontent.com/-zrAWOuexzF4/AAAAAAAAAAI/AAAAAAAAAZs/KlTabsY_2WA/photo.jpg?sz=128", "display_name": "Solly Denham", "link": "https://stackoverflow.com/users/7432758/solly-denham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2050, "favorite_count": 0, "accepted_answer_id": 41708227, "answer_count": 1, "score": 0, "last_activity_date": 1484727866, "creation_date": 1484692039, "last_edit_date": 1484727866, "question_id": 41708139, "link": "https://stackoverflow.com/questions/41708139/why-am-i-getting-error-permission-denied-rb-sysopen-when-my-computer-trys-to-r", "title": "Why am I getting error Permission denied @ rb_sysopen when my computer trys to run bundle install", "body": "<p>I am trying to install Metasploit and one of the steps is to run the bundle install command. I am doing this on terminal on mac osx. But when ever I try to do this, this happens:</p>\n\n<pre><code>Errno::EACCES: Permission denied @ rb_sysopen -\n/Users/soldenh/.rvm/gems/ruby-2.4.0/cache/metasploit-payloads-1.2.6.gem\nAn error occurred while installing metasploit-payloads (1.2.6), and\nBundler cannot continue.\nMake sure that `gem install metasploit-payloads -v '1.2.6'` succeeds before\nbundling.\n</code></pre>\n\n<p>When I run a ./msfconsole it says:</p>\n\n<blockquote>\n  <p>Your bundle is locked to activesupport (4.2.7.1), but that version\n  could not be found in any of the sources listed in your Gemfile. If\n  you haven't changed sources, that means the author of activesupport\n  (4.2.7.1) has removed it. You'll need to update your bundle to a\n  different version of activesupport (4.2.7.1) that hasn't been removed\n  in order to install.</p>\n</blockquote>\n\n<p>How do I fix this???</p>\n"}, {"tags": ["ruby", "linux", "bash"], "answers": [{"tags": [], "owner": {"reputation": 53, "user_id": 7093796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e24f6a2f276e8407aebe58038f808540?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Kalinin", "link": "https://stackoverflow.com/users/7093796/alex-kalinin"}, "is_accepted": true, "score": 0, "last_activity_date": 1484691039, "creation_date": 1484691039, "answer_id": 41707910, "question_id": 41707909, "link": "https://stackoverflow.com/questions/41707909/make-symlinks-for-all-files-in-directory-recursively-into-other-directory/41707910#41707910", "title": "Make symlinks for all files in directory (recursively) into other directory", "body": "<p>Can do this with ruby script:</p>\n\n<pre><code>src = '/path/to/folder_a/'\ndst = '/path/to/folder_b/'\n\nfiles = `find $(realpath #{src}) -type f -iname \"*.txt\"`.split(\"\\n\")\nfiles.each_with_index do |path, idx|\n  name = File.basename path\n  `ln -s \"#{path}\" \"#{dst + \"%03d\" % idx}__#{name}\"`\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32690, "user_id": 3266847, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/U0oyt.png?s=128&g=1", "display_name": "Benjamin W.", "link": "https://stackoverflow.com/users/3266847/benjamin-w"}, "is_accepted": false, "score": 1, "last_activity_date": 1484697067, "creation_date": 1484697067, "answer_id": 41709112, "question_id": 41707909, "link": "https://stackoverflow.com/questions/41707909/make-symlinks-for-all-files-in-directory-recursively-into-other-directory/41709112#41709112", "title": "Make symlinks for all files in directory (recursively) into other directory", "body": "<p>In Bash:</p>\n\n<pre><code>shopt -s globstar                    # Enable **/* glob\n\nfor fname in folder_a/**/*.txt; do   # Get all .txt in folder_a\n    bname=${fname##*/}               # Basename of link target\n\n    # Assemble link name\n    printf -v lname '%s%03d%s' 'folder_b/' \"${bname//[!0-9]}\" \"_$bname\"\n\n    # Create link\n    ln -s \"$fname\" \"$lname\"\ndone\n</code></pre>\n\n<p>resulting in</p>\n\n<pre><code>.\n\u251c\u2500\u2500 folder_a\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 file3.txt\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 subfolder_1\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 file.txt\n\u2502\u00a0\u00a0 \u2514\u2500\u2500 subfolder_2\n\u2502\u00a0\u00a0     \u2514\u2500\u2500 subfolder_3\n\u2502\u00a0\u00a0         \u2514\u2500\u2500 file2.txt\n\u2514\u2500\u2500 folder_b\n    \u251c\u2500\u2500 000_file.txt -&gt; folder_a/subfolder_1/file.txt\n    \u251c\u2500\u2500 002_file2.txt -&gt; folder_a/subfolder_2/subfolder_3/file2.txt\n    \u2514\u2500\u2500 003_file3.txt -&gt; folder_a/file3.txt\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 7093796, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e24f6a2f276e8407aebe58038f808540?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Kalinin", "link": "https://stackoverflow.com/users/7093796/alex-kalinin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 41707910, "answer_count": 2, "score": 0, "last_activity_date": 1484697121, "creation_date": 1484691039, "last_edit_date": 1484697121, "question_id": 41707909, "link": "https://stackoverflow.com/questions/41707909/make-symlinks-for-all-files-in-directory-recursively-into-other-directory", "title": "Make symlinks for all files in directory (recursively) into other directory", "body": "<p>I have files in folder:</p>\n\n<pre><code>folder_a/\n  subfolder_1/\n    file.txt\n  subfolder_2/\n    subfolder_3\n      file2.txt\n  file3.txt\n</code></pre>\n\n<p>I need to get symlinks to .txt-files into <code>folder_b</code>:</p>\n\n<pre><code>folder_b/\n  000_file.txt  ---&gt; folder_a/subfolder_1/file.txt\n  001_file2.txt ---&gt; folder_a/subfolder_2/subfolder_3/file2.txt\n  003_file3.txt ---&gt; folder_a/file3.txt\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1484690985, "post_id": 41707731, "comment_id": 70611376, "body": "shouldn&#39;t this raise error already? From <code>OutsideOfModule</code>, you need to do <code>SomeModule:: SomeActiveRecordModel</code> in order to refer to the class."}, {"owner": {"reputation": 1980, "user_id": 674355, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/g87kn.jpg?s=128&g=1", "display_name": "bmasc", "link": "https://stackoverflow.com/users/674355/bmasc"}, "reply_to_user": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1484694621, "post_id": 41707731, "comment_id": 70612792, "body": "True, but not the point of my question. I&#39;ll update the method inside <code>OutsideOfModule</code>"}], "answers": [{"tags": [], "owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "is_accepted": false, "score": 0, "last_activity_date": 1484702466, "last_edit_date": 1495535361, "creation_date": 1484702466, "answer_id": 41709905, "question_id": 41707731, "link": "https://stackoverflow.com/questions/41707731/can-i-disallow-a-rails-model-from-being-access-outside-of-a-module/41709905#41709905", "title": "Can I disallow a Rails model from being access outside of a module?", "body": "<p>Short answer is no. Here's why</p>\n\n<p>Ideally, you want to implement this in your <code>SomeModule</code>. But when you call <code>SomeModule::SomeOtherClass.sum_of_attribute</code> in other classes, you are in a scope of <code>SomeModule::SomeOtherClass</code>. </p>\n\n<pre><code>SomeModule::SomeActiveRecordModel.sum(:some_attribute)\n                      ||\n                      \\/\nmodule SomeModule\n  class SomeActiveRecordModel\n    def sum(*args)\n      # Here, self =&gt; SomeModule::SomeActiveRecordModel\n      # That's why you won't be able to do any meta trick to the module\n      # or classes in the module to identify if it's being invoked outside\n    end\n  end\nend\n</code></pre>\n\n<p>So you wouldn't know who the original caller is. </p>\n\n<p>You might be able to dig through the call stack to do that. Here's another <a href=\"https://stackoverflow.com/questions/5100299/how-to-get-the-name-of-the-calling-method\">SO thread</a> you might find helpful if you want to go down that path.</p>\n"}, {"tags": [], "owner": {"reputation": 1843, "user_id": 4067720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a52c645614505bcaeb65a6c5199158c1?s=128&d=identicon&r=PG", "display_name": "Glyoko", "link": "https://stackoverflow.com/users/4067720/glyoko"}, "is_accepted": false, "score": 0, "last_activity_date": 1484704782, "creation_date": 1484704782, "answer_id": 41710195, "question_id": 41707731, "link": "https://stackoverflow.com/questions/41707731/can-i-disallow-a-rails-model-from-being-access-outside-of-a-module/41710195#41710195", "title": "Can I disallow a Rails model from being access outside of a module?", "body": "<p>In short, no. But this is more a question of Ruby's approach and philosophy. There are other ways of thinking about the code that allow you achieve something similar to what you're looking for, in a more Rubyesque way.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/3496291/private-class-not-class-method-in-a-ruby-module\">This answer</a> covers the different ways of making things private.</p>\n"}], "owner": {"reputation": 1980, "user_id": 674355, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/g87kn.jpg?s=128&g=1", "display_name": "bmasc", "link": "https://stackoverflow.com/users/674355/bmasc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1484704782, "creation_date": 1484690204, "last_edit_date": 1484694657, "question_id": 41707731, "link": "https://stackoverflow.com/questions/41707731/can-i-disallow-a-rails-model-from-being-access-outside-of-a-module", "title": "Can I disallow a Rails model from being access outside of a module?", "body": "<p>Is there a way to have a model such that only code within the same module can access it?</p>\n\n<p>Something like:</p>\n\n<pre><code>module SomeModule\n  class SomeActiveRecordModel\n    # has attribute `some_attribute`\n    ...\n  end\nend\n\nmodule SomeModule\n  class SomeOtherClass\n    def self.sum_of_attribute\n      SomeActiveRecordModel.sum(:some_attribute)\n    end\n  end\nend\n\nclass OutsideOfModule\n  def self.sum_of_attribute\n    SomeModule::SomeActiveRecordModel.sum(:some_attribute)\n  end\nend\n\nSomeModule::SomeOtherClass.sum_of_attribute # works\nOutsideOfModule.sum_of_attribute # raises error\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "websocket", "actioncable"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1484686659, "post_id": 41706651, "comment_id": 70609186, "body": "Welcome to Stack Overflow. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;, especially the information about what is on topic. Your question tells us very little useful information so I&#39;d recommend adding a lot more diagnostic information, or possibly checking <a href=\"https://superuser.com\">Super User</a> to see if it&#39;s a better fit for your question."}, {"owner": {"reputation": 1069, "user_id": 986711, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/8ERmO.jpg?s=128&g=1", "display_name": "MingMan", "link": "https://stackoverflow.com/users/986711/mingman"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1484687934, "post_id": 41706651, "comment_id": 70609858, "body": "Thanks! Its been a good 5 years so far!  I will make the title better you&#39;re right its not quite up to specs!"}], "owner": {"reputation": 1069, "user_id": 986711, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/8ERmO.jpg?s=128&g=1", "display_name": "MingMan", "link": "https://stackoverflow.com/users/986711/mingman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 197, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1484688017, "creation_date": 1484685902, "last_edit_date": 1484688017, "question_id": 41706651, "link": "https://stackoverflow.com/questions/41706651/why-did-my-action-cable-rails-messages-stop-being-received-on-1-client", "title": "Why did my Action Cable (Rails) messages stop being received on 1 client?", "body": "<p>I've had Action Cable feeding information to signed-in users in my application for many moons, but recently my main development computer has had a problem.  </p>\n\n<p>In all my environments, Production and Staging, the Action Cable functionality feeds the info correctly to other computers like my phone, backup computer, and my buddy's computer, but my computer doesn't get anything.</p>\n\n<p>The server logs look fine, they send the Action Cable messages, but my computer doesn't receive them.  I'd give you more information but I have no idea what would help for this. I restarted my computer and turning my local server off, still nothing. The local environment works fine though.</p>\n"}, {"tags": ["ruby", "shopify"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7174959"}, "edited": false, "score": 0, "creation_date": 1484690529, "post_id": 41705901, "comment_id": 70611161, "body": "Not sure if this is whats causing your error but upon formatting your code you are missing an <code>end</code> for your <code>StaticPrice</code> class"}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 6238129, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7c4f908a90a916e27b5c3e0def3c891d?s=128&d=identicon&r=PG&f=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/6238129/casey"}, "edited": false, "score": 0, "creation_date": 1484688162, "post_id": 41706673, "comment_id": 70609996, "body": "Thank you very much for your advice, I&#39;m afraid I&#39;m not very good at this and I&#39;m up against a wall to have this thing working by Monday and I can&#39;t find anyone to write it for me so I&#39;m trying to Frankenstein something together quickly based off of the pre-existing scripts (not many) in shopify and some of the stuff I&#39;ve found on GitHub..   If you or anyone has an easy way to do this I would be eternally grateful, sorry for being needy, I&#39;m trying to advance my skills to be able to actually assist rather than just ask for help."}, {"owner": {"reputation": 105, "user_id": 6238129, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7c4f908a90a916e27b5c3e0def3c891d?s=128&d=identicon&r=PG&f=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/6238129/casey"}, "edited": false, "score": 0, "creation_date": 1484868930, "post_id": 41706673, "comment_id": 70699782, "body": "Hey guys,  well I managed to get it to work, I&#39;m posting my results here mostly for comic relief, I&#39;m certain this is bloated code with a ton of unnecessary stuff going on, but I got it to work.  Basically this will change the price of items in the cart based on their tag for a sale and limit anyone from combining a coupon with the prices."}], "tags": [], "owner": {"reputation": 8203, "user_id": 210841, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5adbe9e20522d6a177e76b223b6750ed?s=128&d=identicon&r=PG", "display_name": "David Lazar", "link": "https://stackoverflow.com/users/210841/david-lazar"}, "is_accepted": false, "score": 0, "last_activity_date": 1484686012, "creation_date": 1484686012, "answer_id": 41706673, "question_id": 41705901, "link": "https://stackoverflow.com/questions/41705901/use-shopify-script-editor-to-set-static-price-by-tag/41706673#41706673", "title": "Use Shopify Script Editor to Set Static Price by Tag", "body": "<p>When you are instantiating a new StaticPrice object, you are sending in 3 attributes but your object accepts only the one. You instantiate TagSelector, but you never use the match? method.</p>\n\n<p>Without knowing more, seeing more, and having more of your explanations, the amount of code you are providing is of little use. </p>\n\n<p>Why not just iterate the cart, and set prices. That is trivial and does not involve complex objects. Experiment with simpler code, and build up to a more organized approach as you gain confidence. There is little need for the campaign, StaticPrice and TagSelector till you actually have some working script code that exhibits a need for them.</p>\n"}], "owner": {"reputation": 105, "user_id": 6238129, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7c4f908a90a916e27b5c3e0def3c891d?s=128&d=identicon&r=PG&f=1", "display_name": "Casey", "link": "https://stackoverflow.com/users/6238129/casey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 606, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1484869426, "creation_date": 1484683224, "last_edit_date": 1484869426, "question_id": 41705901, "link": "https://stackoverflow.com/questions/41705901/use-shopify-script-editor-to-set-static-price-by-tag", "title": "Use Shopify Script Editor to Set Static Price by Tag", "body": "<p>I've examined similar questions and solutions but I was not able to get them to work with mine.  I need to have a bunch of products set to a static price of $50,  there is no specific discount I can apply as the actual price on these all vary.  Here is the code I have so far:</p>\n\n<pre><code>class StaticPrice\n\n  def initialize(selector)\n    @selector = selector\n  end\n</code></pre>\n\n<p>TagSelector</p>\n\n<pre><code> class TagSelector\n\n      def initialize(tag)\n        @tag = tag\n      end\n\n      def match?(line_item)\n        line_item.variant.product.tags.include?(@tag)\n      end\n\n    end\n\nCAMPAIGNS = [\n  StaticPrice.new(\n    TagSelector.new(\"boots\"),\n    line_item.line_price == (5000), message: \"SALE!\")\n]\n\n\nOutput.cart = Input.cart\n</code></pre>\n\n<p>**** UPDATE... Well I got it to work, however it's extremely bloated and I'm quite sure unprofessional (rookie here), but.. it works.. This allows me to set static prices on products based off tags for a particular sale while at the same time not allowing someone to use a coupon to get any additional price off of the sale item.. I appreciate any suggestions for improvement ****</p>\n\n<pre><code>case Input.cart.discount_code\nwhen CartDiscount::Percentage\n          if  Line_items.quantity &gt; 1\n            Input.cart.discount_code.reject(message: \"Coupons can not be combined with BOGO promotion\")\n          end\n        end\n\nclass ItemCampaign\n  def initialize(selector, discount, partitioner)\n    @selector = selector\n    @discount = discount\n    @partitioner = partitioner\n  end\n  def run(cart)\n    applicable_items = cart.line_items.select do |line_item|\n      @selector.match?(line_item)\n    end\n    discounted_items = @partitioner.partition(cart, applicable_items)\n\n    discounted_items.each do |line_item|\n      @discount.apply(line_item)\n    end\n  end\nend\nclass TagSelector\n  def initialize(tag)\n    @tag = tag\n  end\n  def match?(line_item)\n    line_item.variant.product.tags.include?(@tag)\n  end\nend\nclass PercentageDiscount50\n  def initialize(percent, message)\n    @percent = Money.new(cents: 100) * 50\n    @message = message\n  end\n  def apply(line_item)\n    line_discount = line_item.line_price - line_item.line_price + Money.new(cents: 100) * 50\n    new_line_price = Money.new(cents: 100) * 50\n    line_item.change_line_price(new_line_price, message: @message)\n    puts \"Discounted line item with variant #{line_item.variant.id} by #{line_discount}.\"\n  end\nend\nclass PercentageDiscount40\n  def initialize(percent, message)\n    @percent = Money.new(cents: 100) * 40\n    @message = message\n  end\n  def apply(line_item)\n    line_discount = line_item.line_price - line_item.line_price + Money.new(cents: 100) * 40\n    new_line_price = Money.new(cents: 100) * 40\n    line_item.change_line_price(new_line_price, message: @message)\n    puts \"Discounted line item with variant #{line_item.variant.id} by #{line_discount}.\"\n  end\nend\nclass PercentageDiscount30\n  def initialize(percent, message)\n    @percent = Money.new(cents: 100) * 30\n    @message = message\n  end\n  def apply(line_item)\n    line_discount = line_item.line_price - line_item.line_price + Money.new(cents: 100) * 30\n    new_line_price = Money.new(cents: 100) * 30\n    line_item.change_line_price(new_line_price, message: @message)\n    puts \"Discounted line item with variant #{line_item.variant.id} by #{line_discount}.\"\n  end\nend\nclass PercentageDiscount20\n  def initialize(percent, message)\n    @percent = Money.new(cents: 100) * 20\n    @message = message\n  end\n  def apply(line_item)\n    line_discount = line_item.line_price - line_item.line_price + Money.new(cents: 100) * 20\n    new_line_price = Money.new(cents: 100) * 20\n    line_item.change_line_price(new_line_price, message: @message)\n    puts \"Discounted line item with variant #{line_item.variant.id} by #{line_discount}.\"\n  end\nend\nclass PercentageDiscount10\n  def initialize(percent, message)\n    @percent = Money.new(cents: 100) * 10\n    @message = message\n  end\n  def apply(line_item)\n    line_discount = line_item.line_price - line_item.line_price + Money.new(cents: 100) * 10\n    new_line_price = Money.new(cents: 100) * 10\n    line_item.change_line_price(new_line_price, message: @message)\n    puts \"Discounted line item with variant #{line_item.variant.id} by #{line_discount}.\"\n  end\nend\nclass LowToHighPartitioner\n  def initialize(paid_item_count, discounted_item_count)\n    @paid_item_count = paid_item_count\n    @discounted_item_count = discounted_item_count\n  end\n  def partition(cart, applicable_line_items)\n    sorted_items = applicable_line_items.sort_by{|line_item| line_item.variant.price}\n    total_applicable_quantity = sorted_items.map(&amp;:quantity).reduce(0, :+)\n    discounted_items_remaining = Integer(total_applicable_quantity / (@paid_item_count + @discounted_item_count) * @discounted_item_count)\n    discounted_items = []\n    sorted_items.each do |line_item|\n      break if discounted_items_remaining == 0\n      discounted_item = line_item\n      if line_item.quantity &gt; discounted_items_remaining\n        discounted_item = line_item.split(take: discounted_items_remaining)\n        position = cart.line_items.find_index(line_item)\n        cart.line_items.insert(position + 0, discounted_item)\n      end\n      discounted_items_remaining -= discounted_item.quantity\n      discounted_items.push(discounted_item)\n    end\n    discounted_items\n  end\nend\nCAMPAIGNS = [\n  ItemCampaign.new(\n    TagSelector.new(\"SCRIPT50\"),\n    PercentageDiscount50.new(10, \"$50 FINAL SALE!\"),\n    LowToHighPartitioner.new(0,1),\n  ),\n  ItemCampaign.new(\n    TagSelector.new(\"SCRIPT40\"),\n    PercentageDiscount40.new(10, \"$40 FINAL SALE!\"),\n    LowToHighPartitioner.new(0,1),\n  ),\n    ItemCampaign.new(\n    TagSelector.new(\"SCRIPT30\"),\n    PercentageDiscount30.new(10, \"$30 FINAL SALE!\"),\n    LowToHighPartitioner.new(0,1),\n  ),\n    ItemCampaign.new(\n    TagSelector.new(\"SCRIPT20\"),\n    PercentageDiscount20.new(10, \"$20 FINAL SALE!\"),\n    LowToHighPartitioner.new(0,1),\n  ),\n    ItemCampaign.new(\n    TagSelector.new(\"SCRIPT10\"),\n    PercentageDiscount10.new(10, \"$10 FINAL SALE!\"),\n    LowToHighPartitioner.new(0,1),\n  )\n]\nCAMPAIGNS.each do |campaign|\n  campaign.run(Input.cart)\nend\nOutput.cart = Input.cart\n</code></pre>\n"}, {"tags": ["ruby", "string", "algorithm", "parsing"], "comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1484683033, "post_id": 41705626, "comment_id": 70607311, "body": "You could read your words list and then sort it by <b>word size</b>, in <b>reverse order</b>, before searching the string. In this case, if your words list were <code>[&#39;blue&#39;,&#39;berry&#39;,&#39;blueberry&#39;]</code> it would turn out to be <code>[&#39;blueberry&#39;,&#39;berry&#39;,&#39;blue&#39;]</code> and your search would look for composite words first."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1484687448, "post_id": 41705626, "comment_id": 70609616, "body": "This sounds like an <a href=\"http://xyproblem.info\" rel=\"nofollow noreferrer\">XY Problem</a>. How are you getting that list?"}, {"owner": {"reputation": 962, "user_id": 135051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/099c6c3a8010e978993611900370e943?s=128&d=identicon&r=PG", "display_name": "phss", "link": "https://stackoverflow.com/users/135051/phss"}, "edited": false, "score": 1, "creation_date": 1484688103, "post_id": 41705626, "comment_id": 70609963, "body": "Why is it preferable to parse <code>blueberry</code> instead of <code>blue</code> and <code>berry</code>? Would that also not be a valid solution?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1484692814, "post_id": 41705626, "comment_id": 70612083, "body": "I&#39;m downvoting the question because it&#39;s not clear what is wanted and I don&#39;t think any amount of editing would help. It&#39;s intrinsically an unanswerable question. How, for example, should the string <code>&quot;carrotate&quot;</code> be split up? <code>[&quot;carrot&quot;, &quot;ate&quot;]</code>? <code>[&quot;car&quot;, &quot;rotate&quot;]</code>? <code>[&quot;car&quot;, &quot;rot&quot;, &quot;ate&quot;]</code>?. One could easily craft a longer string that has thousands of possible combinations. Questions like this are a waste of everyone&#39;s time, including the asker&#39;s."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1484698038, "post_id": 41705626, "comment_id": 70613932, "body": "If, after the string is broken into words found in the dictionary, nothing is to remain in the string, I&#39;m pretty sure this problem is NP-complete."}], "answers": [{"comments": [{"owner": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "edited": false, "score": 2, "creation_date": 1484685865, "post_id": 41706561, "comment_id": 70608738, "body": "I&#39;d think it would be smart to keep all possible successful matches from a given start point. You could find yourself in a situation where the longer match of two possible matches is the wrong one, and even the next word doesn&#39;t serve to fully disambiguate the result. It might be that it&#39;s not until a few steps down the road that the ambiguity is resolved (if at all)."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "edited": false, "score": 1, "creation_date": 1484686205, "post_id": 41706561, "comment_id": 70608917, "body": "@DerrellDurrett That&#39;s not a bad idea conceptually speaking, but it does complicate the solution considerably."}, {"owner": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "edited": false, "score": 0, "creation_date": 1484686332, "post_id": 41706561, "comment_id": 70608996, "body": "LOL. Yup. But it&#39;s the only (obvious) way to implement backtracking, so that if you&#39;ve made a bad choice, you can succeed. Otherwise you&#39;ll just end up failing much of the time."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "edited": false, "score": 1, "creation_date": 1484686830, "post_id": 41706561, "comment_id": 70609285, "body": "@DerrellDurrett The regular expression system is surprisingly good at navigating to find the longest, best matches, so it might be a non-issue in all but the most extreme cases."}, {"owner": {"reputation": 962, "user_id": 135051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/099c6c3a8010e978993611900370e943?s=128&d=identicon&r=PG", "display_name": "phss", "link": "https://stackoverflow.com/users/135051/phss"}, "edited": false, "score": 0, "creation_date": 1484688285, "post_id": 41706561, "comment_id": 70610069, "body": "That&#39;s quite interesting and clever use of regexp. :) But what would happen if the list of words was a big dictionary? Would it grind to a halt, or fail in some other way?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 962, "user_id": 135051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/099c6c3a8010e978993611900370e943?s=128&d=identicon&r=PG", "display_name": "phss", "link": "https://stackoverflow.com/users/135051/phss"}, "edited": false, "score": 0, "creation_date": 1484688447, "post_id": 41706561, "comment_id": 70610163, "body": "@phss With any non-trivla regular expression the answer is always &quot;maybe&quot;. The larger the list and the larger the data being scanned the higher the probability of a complete melt-down."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1484697484, "post_id": 41706561, "comment_id": 70613754, "body": "@CarySwoveland It might be better to adapt this to return any unknown chunks as well by spiking in a <code>.*?</code> as a catch-all, but I&#39;m not sure about how this will be used."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1484697661, "post_id": 41706561, "comment_id": 70613809, "body": "For <code>WORDS #=&gt; [&quot;muffins&quot;, &quot;insane&quot;, &quot;muffin&quot;, &quot;muff&quot;, &quot;sane&quot;, &quot;in&quot;]</code> <code>best_fit &quot;muffinsane&quot; #=&gt; [&quot;muffins&quot;]</code>, leaves <code>&quot;ane&quot;</code> used because that is not an element of <code>WORDS</code>, even though <code>[&quot;muffin&quot;, &quot;sane&quot;]</code>, <code>[&quot;muff&quot;, &quot;insane&quot;]</code>, and <code>[&quot;muff&quot;, in&quot;, &quot;sane&quot;]</code> all exhaust the string. Is that intended? If you saw my comment on the question you&#39;ll see that I&#39;m less than hopeful that anything useful can be done."}, {"owner": {"reputation": 681, "user_id": 5058542, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/28c0e972fda335bf074d3b68a4df6854?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/5058542/chris"}, "reply_to_user": {"reputation": 962, "user_id": 135051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/099c6c3a8010e978993611900370e943?s=128&d=identicon&r=PG", "display_name": "phss", "link": "https://stackoverflow.com/users/135051/phss"}, "edited": false, "score": 0, "creation_date": 1484699327, "post_id": 41706561, "comment_id": 70614283, "body": "@phss, when I tried using my mac&#39;s dictionary (~300,000 words), I got a system level too deep error, but trimming the word list down by half fixed the issue."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1484685593, "creation_date": 1484685593, "answer_id": 41706561, "question_id": 41705626, "link": "https://stackoverflow.com/questions/41705626/parse-a-string-without-spaces-into-an-array-of-individual-words/41706561#41706561", "title": "Parse a string without spaces into an array of individual words", "body": "<p>Although there's cases where there's multiple interpretations possible and picking the best one can be trouble, you can always approach it with a fairly na\u00efve algorithm like this:</p>\n\n<pre><code>WORDS = %w[\n  blueberry\n  blue\n  berry\n  fin\n  fins\n  muffin\n  muffins\n  are\n  insane\n  insanely\n  in\n  delicious\n  deli\n  us\n].sort_by do |word|\n  [ -word.length, word ]\nend\n\nWORD_REGEXP = Regexp.union(*WORDS)\n\ndef best_fit(string)\n  string.scan(WORD_REGEXP)\nend\n</code></pre>\n\n<p>This will parse your example:</p>\n\n<pre><code>best_fit(\"blueberrymuffinsareinsanelydelicious\")\n# =&gt; [\"blueberry\", \"muffins\", \"are\", \"insanely\", \"delicious\"]\n</code></pre>\n\n<p>Note that this skips any non-matching components.</p>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 2, "last_activity_date": 1484692996, "last_edit_date": 1484692996, "creation_date": 1484690381, "answer_id": 41707763, "question_id": 41705626, "link": "https://stackoverflow.com/questions/41705626/parse-a-string-without-spaces-into-an-array-of-individual-words/41707763#41707763", "title": "Parse a string without spaces into an array of individual words", "body": "<p>Here's a recursive method which finds the correct sentence in 0.4s on my slowish laptop.</p>\n\n<ul>\n<li>It first imports almost 100K english words and sorts them by decreasing size</li>\n<li>For every <code>word</code>, it checks if <code>text</code> starts with it</li>\n<li>If it does, it removes the <code>word</code> from the <code>text</code>, keeps the <code>word</code> in an array and recursively calls itself.</li>\n<li>If the <code>text</code> is empty, it means a sentence has been found.</li>\n<li>It uses a lazy array to stop at the first found sentence.</li>\n</ul>\n\n<hr>\n\n<pre><code>text = \"blueberrymuffinsareinsanelydeliciousbecausethey'rereallymoistandcolorful\"\n\ndictionary = File.readlines('/usr/share/dict/american-english')\n                 .map(&amp;:chomp)\n                 .sort_by{ |w| -w.size }\n\ndef find_words(text, possible_words, sentence = [])\n  return sentence if text.empty?\n  possible_words.lazy.select{ |word|\n    text.start_with?(word)\n  }.map{ |word|\n    find_words(text[word.size..-1], possible_words, sentence + [word])\n  }.find(&amp;:itself)\nend\n\np find_words(text, dictionary)\n#=&gt; [\"blueberry\", \"muffins\", \"are\", \"insanely\", \"delicious\", \"because\", \"they're\", \"really\", \"moist\", \"and\", \"colorful\"]\np find_words('someword', %w(no way to find a combination))\n#=&gt; nil\np find_words('culdesac', %w(culd no way to find a combination cul de sac))\n#=&gt; [\"cul\", \"de\", \"sac\"]\np find_words(\"carrotate\", dictionary)\n#=&gt; [\"carrot\", \"ate\"]\n</code></pre>\n\n<p>For a faster lookup, it could be a good idea to use a <a href=\"https://en.wikipedia.org/wiki/Trie\" rel=\"nofollow noreferrer\">Trie</a>.</p>\n"}], "owner": {"reputation": 681, "user_id": 5058542, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/28c0e972fda335bf074d3b68a4df6854?s=128&d=identicon&r=PG", "display_name": "Chris", "link": "https://stackoverflow.com/users/5058542/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 648, "favorite_count": 1, "accepted_answer_id": 41706561, "answer_count": 2, "score": 2, "last_activity_date": 1484703707, "creation_date": 1484682173, "last_edit_date": 1484703707, "question_id": 41705626, "link": "https://stackoverflow.com/questions/41705626/parse-a-string-without-spaces-into-an-array-of-individual-words", "title": "Parse a string without spaces into an array of individual words", "body": "<p>If I have a string \"blueberrymuffinsareinsanelydelicious\", what is the most efficient way to parse it such that I am left with [\"blueberry\", \"muffins\", \"are\", \"insanely\", \"delicious\"]?</p>\n\n<p>I already have my wordlist (mac's /usr/share/dict/words), but how do I ensure that the full word is stored in my array, aka: blueberry, instead of two separate words, blue and berry.</p>\n"}, {"tags": ["ruby", "chef-infra", "rvm", "centos6", "knife"], "answers": [{"comments": [{"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1484690477, "post_id": 41705666, "comment_id": 70611135, "body": "This is correct, we require 2.2 or newer at this point. ChefDK uses 2.3.1 on all platforms currently."}], "tags": [], "owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "is_accepted": false, "score": 2, "last_activity_date": 1484682340, "creation_date": 1484682340, "answer_id": 41705666, "question_id": 41705568, "link": "https://stackoverflow.com/questions/41705568/unable-to-execute-knife-cli/41705666#41705666", "title": "Unable to execute knife CLI", "body": "<p>Use <a href=\"https://downloads.chef.io/chefdk/\" rel=\"nofollow noreferrer\">ChefDK</a>. It is not recommended and supported to use <code>knife</code> with other Ruby environments. I think that it is especially not compatible with Ruby 1.x.</p>\n"}], "owner": {"reputation": 2796, "user_id": 1231943, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9098f78519e0c515af525856a06a81ca?s=128&d=identicon&r=PG", "display_name": "Davek804", "link": "https://stackoverflow.com/users/1231943/davek804"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484692944, "creation_date": 1484681976, "last_edit_date": 1484692944, "question_id": 41705568, "link": "https://stackoverflow.com/questions/41705568/unable-to-execute-knife-cli", "title": "Unable to execute knife CLI", "body": "<p>Can anyone suggest a reason why I can't execute knife? </p>\n\n<p>Here's my error when trying to execute knife: </p>\n\n<pre><code># knife\n/usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- chef/knife/core/subcommand_loader (LoadError)\nfrom /usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'\nfrom /usr/local/rvm/gems/ruby-1.9.3-p327/gems/chef-11.8.0/lib/chef/knife.rb:26:in `&lt;top (required)&gt;'\nfrom /usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require'\nfrom /usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require'\nfrom /usr/local/rvm/gems/ruby-1.9.3-p327/gems/chef-11.8.0/lib/chef/application/knife.rb:18:in `&lt;top (required)&gt;'\nfrom /usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require'\nfrom /usr/local/rvm/rubies/ruby-1.9.3-p327/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:55:in `require'\nfrom /usr/local/rvm/gems/ruby-1.9.3-p327/gems/chef-11.8.0/bin/knife:23:in `&lt;top (required)&gt;'\nfrom /usr/local/rvm/gems/ruby-1.9.3-p327/bin/knife:19:in `load'\nfrom /usr/local/rvm/gems/ruby-1.9.3-p327/bin/knife:19:in `&lt;main&gt;'\nfrom /usr/local/rvm/gems/ruby-1.9.3-p327/bin/ruby_executable_hooks:15:in `eval'\nfrom /usr/local/rvm/gems/ruby-1.9.3-p327/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n\n<p>Some other helpful output: </p>\n\n<pre><code># rvm list\nrvm rubies\n\n=* ruby-1.9.3-p327 [ x86_64 ]\nruby-1.9.3-p551 [ x86_64 ]\n\n# =&gt; - current\n# =* - current &amp;&amp; default\n#  * - default\n</code></pre>\n\n<p>Another: </p>\n\n<pre><code># rvm env\nexport PATH=\"/usr/local/rvm/gems/ruby-1.9.3-                                             p327/bin:/usr/local/rvm/gems/ruby-1.9.3-        p327@global/bin:/usr/local/rvm/rubies/ruby-1.9.3-p327/bin:$PATH\"\nexport GEM_HOME='/usr/local/rvm/gems/ruby-1.9.3-p327'\nexport GEM_PATH='/usr/local/rvm/gems/ruby-1.9.3-         p327:/usr/local/rvm/gems/ruby-1.9.3-p327@global'\nexport MY_RUBY_HOME='/usr/local/rvm/rubies/ruby-1.9.3-p327'\nexport IRBRC='/usr/local/rvm/rubies/ruby-1.9.3-p327/.irbrc'\nunset MAGLEV_HOME\nunset RBXOPT\nexport RUBY_VERSION='ruby-1.9.3-p327'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "monkeypatching"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1484687744, "post_id": 41705391, "comment_id": 70609760, "body": "I&#39;d recommend you read about <a href=\"http://ruby-doc.org/core-2.4.0/doc/syntax/refinements_rdoc.html\" rel=\"nofollow noreferrer\">Refinements</a>. They&#39;re designed to help avoid the problems we see with monkey-patching."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1484688135, "post_id": 41705391, "comment_id": 70609979, "body": "Before you go down this road, consider making a subclass of <code>String</code> that does what you want. It&#39;s only when you need to alter the behaviour of things universally you&#39;d want to do this."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1484688055, "post_id": 41705426, "comment_id": 70609934, "body": "I do try and name the files in <code>config&#47;initializers</code> something meaningful, like in this case <code>business_days.rb</code> instead of something confusingly generic like <code>monkey_patches.rb</code> or <code>embarrassing_collection_of_unfortunate_hacks.rb</code>. If you have an editor that allows quick opening by name it&#39;s easy to pull these up if you ever have to make adjustments if their name is consistent."}], "tags": [], "owner": {"reputation": 778, "user_id": 490148, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fdf74175f7ff2d2ff2c03c10ca2bce39?s=128&d=identicon&r=PG", "display_name": "virtuexru", "link": "https://stackoverflow.com/users/490148/virtuexru"}, "is_accepted": true, "score": 14, "last_activity_date": 1484681435, "creation_date": 1484681435, "answer_id": 41705426, "question_id": 41705391, "link": "https://stackoverflow.com/questions/41705391/where-to-put-code-when-monkey-patching/41705426#41705426", "title": "Where to put code when monkey patching", "body": "<p>There is no set rule on this. Technically you can open it (the class; and add your method) anywhere. I usually make a special file called <code>monkey_patches.rb</code> and put it in <code>config/initializers</code> or in a <code>misc</code> folder in my Rails app so if theres ever a conflict I know where to look.</p>\n\n<p>Also I'd advise to use a <code>Module</code> to wrap the monkey patch. Check out <a href=\"http://www.justinweiss.com/articles/3-ways-to-monkey-patch-without-making-a-mess/\" rel=\"noreferrer\">3 ways to monkey patch without making a mess</a> for more info.</p>\n\n<p>His example:</p>\n\n<pre><code>module CoreExtensions\n  module DateTime\n    module BusinessDays\n      def weekday?\n        !sunday? &amp;&amp; !saturday?\n      end\n    end\n  end\nend\n\nDateTime.include CoreExtensions::DateTime::BusinessDays\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2843, "user_id": 3319298, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/9kXKD.jpg?s=128&g=1", "display_name": "Epigene", "link": "https://stackoverflow.com/users/3319298/epigene"}, "is_accepted": false, "score": 2, "last_activity_date": 1507192214, "creation_date": 1507192214, "answer_id": 46581128, "question_id": 41705391, "link": "https://stackoverflow.com/questions/41705391/where-to-put-code-when-monkey-patching/46581128#46581128", "title": "Where to put code when monkey patching", "body": "<p>I have used the following technique described by Justin Weiss in <a href=\"https://www.justinweiss.com/articles/3-ways-to-monkey-patch-without-making-a-mess/\" rel=\"nofollow noreferrer\">3 Ways to Monkey-Patch Without Making a Mess</a></p>\n\n<p>When in vanilla Ruby, a gem, for instance, you define a module in some file you are requiring and then <a href=\"http://www.railstips.org/blog/archives/2009/05/15/include-vs-extend-in-ruby/\" rel=\"nofollow noreferrer\"><code>include</code> (or <code>extend</code>)</a> the module into desired class.</p>\n\n<pre><code>module StringMonkeypatch\n  def foo\n    #your special code \n  end\nend\n\nString.include StringMonkeypatch\n</code></pre>\n\n<p>When in Rails you may want to define the module in a place that gets autoloaded (look up <code>autoload_paths</code>) and in a way that follows Rails' naming convention.</p>\n\n<p>For example, if monkeypatching the <code>Sidekiq::Testing</code> gem class you should mirror the file structure.</p>\n\n<pre><code># in /app/&lt;something telling&gt;/sidekiq/testing/monkeypatch.rb\nmodule Sidekiq::Testing::Monkeypatch\n  def foo\n    #your special code \n  end\nend\n\n# in /config/environment.rb, at the bootom\nSidekiq::Testing.include Sidekiq::Testing::Monkeypatch\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 253, "user_id": 10115842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55fcac4a8691445a4aefa199b565f710?s=128&d=identicon&r=PG&f=1", "display_name": "stephennelson", "link": "https://stackoverflow.com/users/10115842/stephennelson"}, "is_accepted": false, "score": 1, "last_activity_date": 1550183704, "creation_date": 1550183704, "answer_id": 54700146, "question_id": 41705391, "link": "https://stackoverflow.com/questions/41705391/where-to-put-code-when-monkey-patching/54700146#54700146", "title": "Where to put code when monkey patching", "body": "<p>Just chiming in because it took me forever to figure this out because very little solutions worked. </p>\n\n<p>\u2022 I had to use plain old require. I put it in the <code>config/application.rb</code> file. The file does not automatically load for me if you put it in the app directory like some are suggesting. I don't know why.</p>\n\n<p><code>patching_file_path = File.expand_path(\"./lib\", Dir.pwd)\n Dir[patching_file_path+'/*.rb'].each {|file| require file }</code></p>\n\n<p>\u2022 I also put a temporary <code>puts \"I'm Working!</code> in the file I'm trying to require so I can check the console to see if it's actually loading. </p>\n\n<p>\u2022 Also, if you're using spring loader, before you start your console you should do <code>bin/spring stop</code> in your terminal before you start your rails console. Otherwise, it won't load new files. </p>\n"}], "owner": {"reputation": 563, "user_id": 6428423, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/28686ea8a03571c763a74df034a0974b?s=128&d=identicon&r=PG&f=1", "display_name": "Life4ants", "link": "https://stackoverflow.com/users/6428423/life4ants"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10182, "favorite_count": 1, "accepted_answer_id": 41705426, "answer_count": 3, "score": 10, "last_activity_date": 1550183704, "creation_date": 1484681343, "last_edit_date": 1484688141, "question_id": 41705391, "link": "https://stackoverflow.com/questions/41705391/where-to-put-code-when-monkey-patching", "title": "Where to put code when monkey patching", "body": "<p>Everything I read about monkey patching says to do something like this:</p>\n\n<pre><code>class String\n  def foo\n    #your special code \n  end\nend\n</code></pre>\n\n<p>But I can't find any instructions on where to put this code. In a rails app, can I just put this any crazy place I want? In a Module? A Model? </p>\n\n<p>Do I need to include something in the file where I define my monkeypatch? Do I need to include my monkeypatch everywhere where I want to use it?</p>\n"}, {"tags": ["arrays", "ruby", "attributes", "element"], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 3, "last_activity_date": 1484682442, "last_edit_date": 1484682442, "creation_date": 1484682050, "answer_id": 41705588, "question_id": 41705387, "link": "https://stackoverflow.com/questions/41705387/how-do-i-assign-an-attribute-based-on-where-an-elements-index-within-an-array/41705588#41705588", "title": "How do I assign an attribute based on where an element&#39;s index within an array?", "body": "<p>Try this one. <code>a</code> is your array</p>\n\n<pre><code>a.each_with_index { |item, index| item.attr1 = index + 1 }\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 41705588, "answer_count": 1, "score": 1, "last_activity_date": 1484682442, "creation_date": 1484681337, "question_id": 41705387, "link": "https://stackoverflow.com/questions/41705387/how-do-i-assign-an-attribute-based-on-where-an-elements-index-within-an-array", "title": "How do I assign an attribute based on where an element&#39;s index within an array?", "body": "<p>I'm using Ruby 2.4.  Let's say I have an array of objects, each of type \"MyData\".  Each MyData object has an attribute \"attr1\".  Given my array</p>\n\n<pre><code>[myobj1, myobj2, myobj3, ...]\n</code></pre>\n\n<p>how do I assign a value to the attribute \"attr1\" based on its position within the array?  FOr example, the first object in the array would hvae \"attr1\" set to \"1\", the second would have it set to \"2,\" and so on.</p>\n"}, {"tags": ["ruby", "selenium", "web-scraping"], "answers": [{"comments": [{"owner": {"reputation": 5463, "user_id": 4695064, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-KpAhKljoGO4/AAAAAAAAAAI/AAAAAAAAAHU/fb44qBeaDww/photo.jpg?sz=128", "display_name": "raj", "link": "https://stackoverflow.com/users/4695064/raj"}, "edited": false, "score": 0, "creation_date": 1484692862, "post_id": 41705982, "comment_id": 70612098, "body": "I tried changing coords and added waiting but its the same. But <code>mousemove</code> event listener is not being called."}, {"owner": {"reputation": 2412, "user_id": 2470092, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Qeqmh.jpg?s=128&g=1", "display_name": "Moshisho", "link": "https://stackoverflow.com/users/2470092/moshisho"}, "reply_to_user": {"reputation": 5463, "user_id": 4695064, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-KpAhKljoGO4/AAAAAAAAAAI/AAAAAAAAAHU/fb44qBeaDww/photo.jpg?sz=128", "display_name": "raj", "link": "https://stackoverflow.com/users/4695064/raj"}, "edited": false, "score": 0, "creation_date": 1484727777, "post_id": 41705982, "comment_id": 70623633, "body": "Are you sure the mouse move action happened after the page finished loading?"}, {"owner": {"reputation": 5463, "user_id": 4695064, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-KpAhKljoGO4/AAAAAAAAAAI/AAAAAAAAAHU/fb44qBeaDww/photo.jpg?sz=128", "display_name": "raj", "link": "https://stackoverflow.com/users/4695064/raj"}, "edited": false, "score": 0, "creation_date": 1484789822, "post_id": 41705982, "comment_id": 70658957, "body": "I understood the problem here. If you check out the website and click on any point , it will add a new <code>div</code> with location of the point. when i click once more. it dissapears. next click for some reason is not adding the <code>div</code>. It gets timed out as it cant find the element."}], "tags": [], "owner": {"reputation": 2412, "user_id": 2470092, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Qeqmh.jpg?s=128&g=1", "display_name": "Moshisho", "link": "https://stackoverflow.com/users/2470092/moshisho"}, "is_accepted": false, "score": 0, "last_activity_date": 1484683558, "creation_date": 1484683558, "answer_id": 41705982, "question_id": 41705355, "link": "https://stackoverflow.com/questions/41705355/scraping-an-dom-element-with-mouse-movement/41705982#41705982", "title": "Scraping an dom element with mouse movement", "body": "<p>You're missing a sleep before the move command. This page takes time to load, so either, you add a <code>finished_loading_elem=wait.until{driver.find_element(:id,\"z\")}</code> or add an implicit wait, like <code>Thread.Sleep</code> in other languages.</p>\n\n<p>Also, I suggest move to offset like 250, 250 because 100,100 could fall on the search bar.</p>\n"}], "owner": {"reputation": 5463, "user_id": 4695064, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-KpAhKljoGO4/AAAAAAAAAAI/AAAAAAAAAHU/fb44qBeaDww/photo.jpg?sz=128", "display_name": "raj", "link": "https://stackoverflow.com/users/4695064/raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 140, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1484683558, "creation_date": 1484681227, "question_id": 41705355, "link": "https://stackoverflow.com/questions/41705355/scraping-an-dom-element-with-mouse-movement", "title": "Scraping an dom element with mouse movement", "body": "<p>I am trying to scrape <a href=\"http://ventusky.com/\" rel=\"nofollow noreferrer\">http://ventusky.com/</a>. When mouse is moved around, it shows some data near that mouse pointer. I am using <code>selenium</code>. When I look at the browser console I can see that <code>mousemove</code> event listener is adding this data. My code.</p>\n\n<pre><code>test = driver.find_element(:id,\"h\")\ndriver.action.move_to(test, 100, 100).perform\nelem=wait.until{driver.find_element(:class,\"yy\")}\nputs elem.attribute \"outerHTML\"\n</code></pre>\n\n<p>But i do not get any data from the element <code>elem</code>. Its <code>text</code> is empty. I do not see anything happening on browser also when the script is run. Can someone help me to figure out this problem. I am pretty new to scrapping.</p>\n\n<p>I am using <code>ruby</code> even though it doesnt matter. I can find the ruby equivalent . </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1484680964, "post_id": 41705242, "comment_id": 70606221, "body": "Are single items excluded? Are more than two items permitted? Does adjacency matter, as in your 3, 7 example?"}, {"owner": {"reputation": 1090, "user_id": 7113209, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/10154091942466794/picture?type=large", "display_name": "hancho", "link": "https://stackoverflow.com/users/7113209/hancho"}, "reply_to_user": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1484683292, "post_id": 41705242, "comment_id": 70607441, "body": "Single items are excluded. More than two items is not permitted. They do not have to be adjacent. The index number I&#39;m concerned about is the second numbers in the pair.  It needs to be the lowest."}], "answers": [{"tags": [], "owner": {"reputation": 45754, "user_id": 17410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1022b779bdc1ddef7cd9d29abd70ed15?s=128&d=identicon&r=PG", "display_name": "zetetic", "link": "https://stackoverflow.com/users/17410/zetetic"}, "is_accepted": false, "score": 0, "last_activity_date": 1484699019, "creation_date": 1484699019, "answer_id": 41709395, "question_id": 41705242, "link": "https://stackoverflow.com/questions/41705242/how-to-find-all-combinations-of-subarrays-that-add-to-a-specific-value/41709395#41709395", "title": "How to find all combinations of subarrays that add to a specific value", "body": "<p>Taking into account your constraint from the comments: <em>They do not have to be adjacent. The index number I'm concerned about is the second numbers in the pair. It needs to be the lowest.</em></p>\n\n<pre><code>def pairs(array_ints, sum)\n  array_ints.combination(2).inject({}) do |acc, pair|\n    first, second = pair\n\n    #\n    # Find the last occurrence of the second element. Note the use of\n    # 'rindex' to search from the end of the array. The same element\n    # may occur more than once ...\n    #\n    index = array_ints.rindex(second)\n\n    if first + second == sum\n      if !acc[:index] || acc[:index] &gt; index\n        # Store the first match, or replace it if the stored\n        # index is higher than the current index\n        acc[:result] = pair\n        acc[:index] = index\n      end\n    end\n\n    acc\n  end.fetch(:result, [])\nend\n\ndescribe \"pairs\" do\n  let(:array) { [10, 5, 2, 3, 7, 5] }\n\n  describe \"when there are multiple combinations that add up to the sum\" do\n    it \"finds the pair having the lowest index of the second element in the pair\" do\n      expect(pairs(array, 10)).to eq([3,7])\n      expect(pairs(array, 8)).to eq([5,3])\n    end\n  end\n\n  describe \"when there is no combination matching the sum\" do\n    it \"returns an empty array\" do\n      expect(pairs(array, 1)).to eq([])\n    end\n  end\n\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27, "user_id": 7580637, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dsX9a.jpg?s=128&g=1", "display_name": "Abhishek28", "link": "https://stackoverflow.com/users/7580637/abhishek28"}, "is_accepted": false, "score": 0, "last_activity_date": 1487845914, "creation_date": 1487845914, "answer_id": 42413148, "question_id": 41705242, "link": "https://stackoverflow.com/questions/41705242/how-to-find-all-combinations-of-subarrays-that-add-to-a-specific-value/42413148#42413148", "title": "How to find all combinations of subarrays that add to a specific value", "body": "<p><strong>array_ints = [10, 5, 2, 3, 7, 5, 8, 2]</strong> and <strong>sum = 10</strong></p>\n\n<pre><code>def pairs(array_ints, sum)\n arr = []\n array_ints.each_cons(2){|x,y| arr.push(x,y) if x+y==sum }\n print arr.first(2)\nend\n\n# output [3, 7]\n</code></pre>\n"}], "owner": {"reputation": 1090, "user_id": 7113209, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/10154091942466794/picture?type=large", "display_name": "hancho", "link": "https://stackoverflow.com/users/7113209/hancho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1487845914, "creation_date": 1484680743, "last_edit_date": 1484687965, "question_id": 41705242, "link": "https://stackoverflow.com/questions/41705242/how-to-find-all-combinations-of-subarrays-that-add-to-a-specific-value", "title": "How to find all combinations of subarrays that add to a specific value", "body": "<p>I need to find the first combination in a given array that adds up to a specific value. The combination needs to be the lowest indexed combination as a whole. </p>\n\n<p>I have most of the problem worked out:</p>\n\n<pre><code>def pairs(array_ints, sum)\n  array_ints.combination(2).detect {|x, y| x + y == sum}\nend\n</code></pre>\n\n<p>This method doesn't give the combination with the lowest indexed pair. For example:</p>\n\n<pre><code>def pairs([10, 5, 2, 3, 7, 5], 10)\n  array_ints.combination(2).detect {|x, y| x + y == sum}\nend    \n\n#output [5, 5]\n#desired output [3, 7] because they appear earlier as a pair in the array. \n</code></pre>\n\n<p>How do I output all pairs that equal a particular sum and select the lowest indexed pair? </p>\n"}, {"tags": ["ruby", "sinatra", "puma", "sequel", "sequel-gem"], "comments": [{"owner": {"reputation": 3, "user_id": 4603246, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-y366PGtlgyo/AAAAAAAAAAI/AAAAAAAAAck/61KbYxDxG0I/photo.jpg?sz=128", "display_name": "Leandro Daniel Sardi", "link": "https://stackoverflow.com/users/4603246/leandro-daniel-sardi"}, "edited": false, "score": 0, "creation_date": 1484680755, "post_id": 41705112, "comment_id": 70606120, "body": "Please, click the links to see the screenshots. Apologies but StackOverflow doesn&#39;t allow me to publish images yet."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4603246, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-y366PGtlgyo/AAAAAAAAAAI/AAAAAAAAAck/61KbYxDxG0I/photo.jpg?sz=128", "display_name": "Leandro Daniel Sardi", "link": "https://stackoverflow.com/users/4603246/leandro-daniel-sardi"}, "edited": false, "score": 0, "creation_date": 1570718057, "post_id": 41725212, "comment_id": 103009275, "body": "Sorry. What is GVL?"}], "tags": [], "owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "is_accepted": true, "score": 0, "last_activity_date": 1484758732, "creation_date": 1484758732, "answer_id": 41725212, "question_id": 41705112, "link": "https://stackoverflow.com/questions/41705112/sequel-ado-puma-is-not-threading-queries/41725212#41725212", "title": "Sequel + ADO + Puma is not threading queries", "body": "<p>This is almost assuredly due to win32ole (the driver that Sequel's ado adapter uses).  It probably doesn't release the GVL during queries, which would cause the issues you are seeing.</p>\n\n<p>If you cannot switch to TinyTDS or switch to JRuby, then your only option if you want concurrent queries is to run separate webserver processes, and have a reverse proxy server dispatch requests to them.</p>\n"}], "owner": {"reputation": 3, "user_id": 4603246, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-y366PGtlgyo/AAAAAAAAAAI/AAAAAAAAAck/61KbYxDxG0I/photo.jpg?sz=128", "display_name": "Leandro Daniel Sardi", "link": "https://stackoverflow.com/users/4603246/leandro-daniel-sardi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 41725212, "answer_count": 1, "score": 0, "last_activity_date": 1484758732, "creation_date": 1484680284, "last_edit_date": 1484680590, "question_id": 41705112, "link": "https://stackoverflow.com/questions/41705112/sequel-ado-puma-is-not-threading-queries", "title": "Sequel + ADO + Puma is not threading queries", "body": "<p>We have a website running in Windows Server 2008 + SQLServer 2008 + Ruby + Sinatra + Sequel/Puma</p>\n\n<p>We've developed an API for our website.\nWhen the access points are requested by many clients, at the same time, the clients start getting RequestTimeout exceptions.</p>\n\n<p>I investigated a bit, and I noted that Puma is managing multi threading fine. \nBut Sequel (or any layer below Sequel) is processing one query at time, even if they came from different clients.</p>\n\n<p>In fact, the RequestTimeout exceptions don't occur if I launch many web servers, each one listening one different port, and I assign one different port to each client.</p>\n\n<p>I don't know yet if the problem is Sequel, ADO, ODBC, Windows, SQLServer or what.\n<strong>The truth is that I cannot switch to any other technology (like TinyTDS)</strong></p>\n\n<p>Bellow is a little piece of code with screenshots that you can use to replicate the bug:</p>\n\n<pre><code>require 'sinatra'\nrequire 'sequel'\nCONNECTION_STRING =\n \"Driver={SQL Server};Server=.\\\\SQLEXPRESS;\" +\n \"Trusted_Connection=no;\" +\n \"Database=pulqui;Uid=;Pwd=;\"\n\nDB = Sequel.ado(:conn_string=&gt;CONNECTION_STRING)\nenable :sessions\nconfigure { set :server, :puma }\nset :public_folder, './public/'\nset :bind, '0.0.0.0'\nget '/delaybyquery.json' do\n tid = params[:tid].to_s\n begin\n puts \"(track-id=#{tid}).starting access point\"\n q = \"select p1.* from liprofile p1, liprofile p2, liprofile p3, liprofile p4, liprofile p5\"\n DB[q].each { |row| # this query should takes a lot of time\n puts row[:id]\n }\n puts \"(track-id=#{tid}).done!\"\n rescue=&gt;e\n puts \"(track-id=#{tid}).error:#{e.to_s}\"\n end\nend\nget '/delaybycode.json' do\n tid = params[:tid].to_s\n begin\n puts \"(track-id=#{tid}).starting access point\"\n sleep(30)\n puts \"(track-id=#{tid}).done!\"\n rescue=&gt;e\n puts \"(track-id=#{tid}).error:#{e.to_s}\"\n end\nend \n</code></pre>\n\n<p>There are 2 access points in the code above:</p>\n\n<ol>\n<li><p><strong>delaybyquery.json</strong>, that generates a delay by joining the same table 5\ntimes. Note that the table must be about 1000 rows in order to get the\nquery working really slow; and</p></li>\n<li><p><strong>delaybycode.json</strong>, that generates a delay by just calling the ruby sleep\nfunction. </p></li>\n</ol>\n\n<p>Both access points receives a tid (tracking-id) parameter, and both write the\noutout in the CMD, so you can follow the activity of both process in the same\nwindow and check which access point is blocking incoming requests from other\nbrowsers.</p>\n\n<p>For testing I'm opening 2 tabs in the same chrome browser.\nBelow are the 2 testings that I'm performing. </p>\n\n<p><strong>Step #1: Run the webserver</strong></p>\n\n<p>c:\\source\\pulqui>ruby example.app.rb -p 81\nI get the output below </p>\n\n<p><strong>Step #2: Testing Delay by Code</strong></p>\n\n<p>I called to this URL:\n127.0.0.1:81/delaybycode.json?tid=123\nand 5 seconds later I called this other URL\n127.0.0.1:81/delaybycode.json?tid=456\nBelow is the output, where you can see that both calls are working in parallel </p>\n\n<p><a href=\"https://i.stack.imgur.com/dW4Ed.jpg\" rel=\"nofollow noreferrer\">click here to see the screenshot</a></p>\n\n<p><strong>Step #3: Testing Delay by Query</strong></p>\n\n<p>I called to this URL:\n127.0.0.1:81/delaybyquery.json?tid=123\nand 5 seconds later I called this other URL\n127.0.0.1:81/delaybyquery.json?tid=456\nBelow is the output, where you can see that calls are working 1 at time.\nEach call to an access point is finishing with a query timeout exception. </p>\n\n<p><a href=\"https://i.stack.imgur.com/ASjIH.jpg\" rel=\"nofollow noreferrer\">click here to see the screenshot</a></p>\n"}, {"tags": ["arrays", "ruby", "sorting", "field"], "answers": [{"tags": [], "owner": {"reputation": 104, "user_id": 4633361, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/343d73d7499657709acdc074a2e7d656?s=128&d=identicon&r=PG&f=1", "display_name": "Iob", "link": "https://stackoverflow.com/users/4633361/iob"}, "is_accepted": false, "score": 1, "last_activity_date": 1484679752, "creation_date": 1484679752, "answer_id": 41704966, "question_id": 41704756, "link": "https://stackoverflow.com/questions/41704756/getting-nomethoderror-when-trying-to-sort-my-ruby-array/41704966#41704966", "title": "Getting &quot;NoMethodError&quot; when trying to sort my Ruby array", "body": "<p>try this</p>\n\n<pre><code> results.sort_by! { |element| element.time_in_ms }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "is_accepted": true, "score": 1, "last_activity_date": 1484680108, "last_edit_date": 1484680108, "creation_date": 1484679758, "answer_id": 41704970, "question_id": 41704756, "link": "https://stackoverflow.com/questions/41704756/getting-nomethoderror-when-trying-to-sort-my-ruby-array/41704970#41704970", "title": "Getting &quot;NoMethodError&quot; when trying to sort my Ruby array", "body": "<p>Try one of these</p>\n\n<pre><code>results.sort_by(&amp;:time_in_ms)\n</code></pre>\n\n<p>Of in the long-form</p>\n\n<pre><code>results.sort { |a, b| a.time_in_ms &lt;=&gt; b.time_in_ms }\n</code></pre>\n\n<p>The <code>sort</code> method expects the block to return an integer value rather than a boolean. You get this error because your block returns a boolean.</p>\n\n<p>Quoting from the <code>ri</code> documentation</p>\n\n<blockquote>\n  <p>Returns an array containing the items in enum sorted, either according to their own <code>&lt;=&gt;</code> method, or by using the results of the supplied block. The block should return <code>-1</code>, <code>0</code>, or <code>+1</code> depending on the comparison between a and b. </p>\n</blockquote>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "accepted_answer_id": 41704970, "answer_count": 2, "score": 1, "last_activity_date": 1484680108, "creation_date": 1484679027, "question_id": 41704756, "link": "https://stackoverflow.com/questions/41704756/getting-nomethoderror-when-trying-to-sort-my-ruby-array", "title": "Getting &quot;NoMethodError&quot; when trying to sort my Ruby array", "body": "<p>I'm using Ruby 2.4.  I'm having difficulty sorting an array based on a particular field of the objects stored in that array.  I have</p>\n\n<pre><code>    results.sort! { |a,b| \n      puts \"a time: #{a.time_in_ms} b time: #{b.time_in_ms}\" \n      a.time_in_ms &lt; b.time_in_ms\n    }\n</code></pre>\n\n<p>and although I have verified that both fields are integers in my rails console, I get a \"\" error when I run this code ...</p>\n\n<pre><code>a time: 16968700 b time: 21784000 \nNoMethodError: undefined method `&gt;' for true:TrueClass\n    from /Users/davea/Documents/workspace/myproject/app/services/text_table_to_race_time_converter_service.rb:668:in `sort'\n    from /Users/davea/Documents/workspace/myproject/app/services/text_table_to_race_time_converter_service.rb:668:in `populate_overall_rank_info'\n    from /Users/davea/Documents/workspace/myproject/app/services/text_table_to_race_time_converter_service.rb:408:in `get_data_hash'\n    from /Users/davea/Documents/workspace/myproject/app/services/text_table_to_race_time_converter_service.rb:25:in `get_race_times'\n    from /Users/davea/Documents/workspace/myproject/app/services/active_com_service.rb:57:in `process_page_data'\n    from /Users/davea/Documents/workspace/myproject/app/services/abstract_import_service.rb:88:in `process_race_data'\n    from (irb):2\n    from /Users/davea/.rvm/gems/ruby-2.4.0@global/gems/railties-5.0.1/lib/rails/commands/console.rb:65:in `start'\n    from /Users/davea/.rvm/gems/ruby-2.4.0@global/gems/railties-5.0.1/lib/rails/commands/console_helper.rb:9:in `start'\n    from /Users/davea/.rvm/gems/ruby-2.4.0@global/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:78:in `console'\n    from /Users/davea/.rvm/gems/ruby-2.4.0@global/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:49:in `run_command!'\n    from /Users/davea/.rvm/gems/ruby-2.4.0@global/gems/railties-5.0.1/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\n    from bin/rails:4:in `require'\n    from bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>How do I sort based on a field in my object?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx", "amazon-elastic-beanstalk", "puma"], "comments": [{"owner": {"reputation": 3180, "user_id": 3863146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/34Tzj.png?s=128&g=1", "display_name": "sahil", "link": "https://stackoverflow.com/users/3863146/sahil"}, "edited": false, "score": 0, "creation_date": 1484679494, "post_id": 41704667, "comment_id": 70605513, "body": "Have you setup your ngnix.conf properly? If you can also post your nginx.conf file?"}, {"owner": {"reputation": 41, "user_id": 6212985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-i7BFuzC4etY/AAAAAAAAAAI/AAAAAAAAEyk/tSLhM7ptFQQ/photo.jpg?sz=128", "display_name": "Ayush Poddar", "link": "https://stackoverflow.com/users/6212985/ayush-poddar"}, "reply_to_user": {"reputation": 3180, "user_id": 3863146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/34Tzj.png?s=128&g=1", "display_name": "sahil", "link": "https://stackoverflow.com/users/3863146/sahil"}, "edited": false, "score": 0, "creation_date": 1484727291, "post_id": 41704667, "comment_id": 70623341, "body": "@sahil please do have a look..I have added the nginx configuration file."}, {"owner": {"reputation": 3180, "user_id": 3863146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/34Tzj.png?s=128&g=1", "display_name": "sahil", "link": "https://stackoverflow.com/users/3863146/sahil"}, "edited": false, "score": 0, "creation_date": 1484731845, "post_id": 41704667, "comment_id": 70626161, "body": "root should point to, <code>&#47;path&#47;to&#47;code_folder&#47;public</code>. Here is a <a href=\"https://gist.github.com/sahil290791/291298c55fd1dcf59cfb472c6c3a215a\" rel=\"nofollow noreferrer\">template</a> which I use for multiple apps running on Pushion passenger, Nginx and Rails."}, {"owner": {"reputation": 1084, "user_id": 2215738, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b7a5f9b4d3d4bedb8202c993029f4f3e?s=128&d=identicon&r=PG", "display_name": "Muyide Ibukun", "link": "https://stackoverflow.com/users/2215738/muyide-ibukun"}, "edited": false, "score": 0, "creation_date": 1530842284, "post_id": 41704667, "comment_id": 89385431, "body": "chaning this  <code>config.force_ssl = true</code> to <code>false</code> solved the problem. I spent days trying to figure this"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6424416, "user_type": "registered", "profile_image": "https://graph.facebook.com/1127151057341528/picture?type=large", "display_name": "Masha Gorkovenko", "link": "https://stackoverflow.com/users/6424416/masha-gorkovenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1604464879, "last_edit_date": 1604464879, "creation_date": 1604282006, "answer_id": 64638867, "question_id": 41704667, "link": "https://stackoverflow.com/questions/41704667/rails-app-deployed-using-elastic-beanstalk-responds-with-site-cant-be-reached/64638867#64638867", "title": "Rails app deployed using elastic beanstalk responds with &quot;site can&#39;t be reached&quot;", "body": "<p>I was getting a 504 gateway timeout error after deploying my rails app to elastic beanstalk. Adding a file named &quot;Procfile&quot; (no extension) in the root directory of the app with the contents</p>\n<pre><code>web: bundle exec puma -C /opt/elasticbeanstalk/config/private/pumaconf.rb\n</code></pre>\n<p>solved my issue.</p>\n"}], "owner": {"reputation": 41, "user_id": 6212985, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-i7BFuzC4etY/AAAAAAAAAAI/AAAAAAAAEyk/tSLhM7ptFQQ/photo.jpg?sz=128", "display_name": "Ayush Poddar", "link": "https://stackoverflow.com/users/6212985/ayush-poddar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1578, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1604464879, "creation_date": 1484678693, "last_edit_date": 1484988692, "question_id": 41704667, "link": "https://stackoverflow.com/questions/41704667/rails-app-deployed-using-elastic-beanstalk-responds-with-site-cant-be-reached", "title": "Rails app deployed using elastic beanstalk responds with &quot;site can&#39;t be reached&quot;", "body": "<p>I have built a rails app with the following stack:</p>\n\n<ol>\n<li>Puma (application server) 3.0</li>\n<li>Ruby on Rails 5.0</li>\n<li>Postgresql 9.5.3</li>\n</ol>\n\n<p>I tried deploying this application to aws elastic beanstalk and successfully did it. However, when I tried reaching the web address generated by the beanstalk, there is no hit on the application server. After a few minutes the browser throws \"site can't be reached\".</p>\n\n<p>Here are the necessary logs:</p>\n\n<p><em>puma.log</em></p>\n\n<pre><code>=== puma startup: 2017-01-17 18:10:06 +0000 ===\n=== puma startup: 2017-01-17 18:10:06 +0000 ===\n[1501] - Worker 0 (pid: 1504) booted, phase: 0\n</code></pre>\n\n<p><em>/var/log/nginx/error.log</em></p>\n\n<pre><code>2017/01/17 18:03:08 [warn] 703#0: conflicting server name \"localhost\" on 0.0.0.0:80, ignored\n2017/01/17 18:25:00 [warn] 2043#0: conflicting server name \"localhost\" on 0.0.0.0:80, ignored\n2017/01/17 18:25:00 [warn] 2050#0: conflicting server name \"localhost\" on 0.0.0.0:80, ignored\n</code></pre>\n\n<p><em>/var/app/containerfiles/logs/production.log</em></p>\n\n<pre><code>D, [2017-01-17T18:10:02.564332 #1397] DEBUG -- :    (1.0ms)  SELECT pg_try_advisory_lock(6778635641374256100);\nD, [2017-01-17T18:10:02.574041 #1397] DEBUG -- :   ActiveRecord::SchemaMigration Load (1.4ms)  SELECT \"schema_migrations\".* FROM \"schema_migrations\"\nD, [2017-01-17T18:10:02.591019 #1397] DEBUG -- :   ActiveRecord::InternalMetadata Load (1.7ms)  SELECT  \"ar_internal_metadata\".* FROM \"ar_internal_metadata\" WHERE \"ar_internal_metadata\".\"key\" = $1 LIMIT $2  [[\"key\", :environment], [\"LIMIT\", 1]]\nD, [2017-01-17T18:10:02.596200 #1397] DEBUG -- :    (1.0ms)  BEGIN\nD, [2017-01-17T18:10:02.598152 #1397] DEBUG -- :    (1.0ms)  COMMIT\nD, [2017-01-17T18:10:02.599249 #1397] DEBUG -- :    (0.9ms)  SELECT pg_advisory_unlock(6778635641374256100)\n</code></pre>\n\n<p>This production.log stays as is despite multiple reloads. I have not been able to get any errors in any of the logs.</p>\n\n<p>For further reference: </p>\n\n<p>Here are my few other files:</p>\n\n<p><em>config/puma.rb</em></p>\n\n<pre><code>workers Integer(ENV['WEB_CONCURRENCY'] || 2)\nthreads_count = Integer(ENV['RAILS_MAX_THREADS'] || 5)\nthreads threads_count, threads_count\n\npreload_app!\n\nrackup      DefaultRackup\nport        ENV['PORT']     || 3000\nenvironment ENV['RACK_ENV'] || 'development'\n\non_worker_boot do\n  # Worker specific setup for Rails 4.1+\n  # See: https://devcenter.heroku.com/articles/\n  # deploying-rails-applications-with-the-puma-web-server#on-worker-boot\n  ActiveRecord::Base.establish_connection\nend\n</code></pre>\n\n<p><em>Gemfile</em></p>\n\n<pre><code>source 'https://rubygems.org'\n\n# Ruby gem\n ruby '2.3.1'\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '~&gt; 5.0.0', '&gt;= 5.0.0.1'\n# Gemfile for password hashing\ngem 'bcrypt', '3.1.11'\n# Use postgresql as the database for Active Record\ngem 'pg', '~&gt; 0.18'\n# Use Puma as the app server\ngem 'puma', '~&gt; 3.0'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.2'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\ngem 'jquery-ui-rails', '~&gt; 5.0', '&gt;= 5.0.5'\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks\ngem 'turbolinks', '~&gt; 5'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.5'\n# Use Redis adapter to run Action Cable in production\n# gem 'redis', '~&gt; 3.0'\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\ngem 'select2-rails'\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n# Upload files\ngem 'carrierwave', '&gt;= 1.0.0.rc', '&lt; 2.0'\n# Image resizing\ngem 'mini_magick', '~&gt; 4.5', '&gt;= 4.5.1'\n# Image upload in production\ngem 'fog-aws'\n# Autoprefix CSS\ngem \"autoprefixer-rails\"\n# Google Maps API\ngem 'geocoder'\n# Redis\ngem 'redis', '~&gt; 3.3', '&gt;= 3.3.1'\n# For postgres full text search\ngem 'pg_search'\n# Font awesome support\ngem \"font-awesome-rails\"\n# Google oauth-2\ngem \"omniauth-google-oauth2\"\n# Facebook omniauth\ngem 'omniauth-facebook'\n\ngroup :production do\n  gem 'remote_syslog_logger'\nend\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug', platform: :mri\n  gem 'better_errors', '~&gt; 2.1', '&gt;= 2.1.1'\nend\n\ngroup :development do\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; anywhere in the code.\n  gem 'web-console'\n  gem 'listen', '~&gt; 3.0.5'\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\n  gem 'rails_layout'\n  gem 'seed_dump', '~&gt; 3.2', '&gt;= 3.2.4'\n  gem 'rubocop', '~&gt; 0.44.1', require: false\n  gem 'binding_of_caller', '~&gt; 0.7.2'\n  gem 'meta_request'\n  gem 'rack-mini-profiler', '~&gt; 0.10.1'\n  gem 'brakeman', :require =&gt; false\n  gem 'bullet'\nend\n\ngroup :test do\n  gem 'rails-controller-testing', '0.1.1'\n  gem 'minitest-reporters',       '1.1.9'\n  gem 'guard',                    '2.13.0'\n  gem 'guard-minitest',           '2.4.4'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n</code></pre>\n\n<p>Apart from that, I have tried a few things after my own personal research on google and stackoverflow:</p>\n\n<p>I appended the following to my puma config file(<em>puma.rb</em>):</p>\n\n<pre><code>bind \"unix:///var/run/puma/my_app.sock\"\npidfile \"/var/run/puma/my_app.sock\"\n</code></pre>\n\n<p>I even tried changing my controller for the root path to render a simple hello, instead of trying to get data from the database. But the main issue seems to be that the request does not reach the application as evident from zero log entries in <em>production.log</em>. </p>\n\n<p>I also tried removing the version number for puma provided in the <em>Gemfile</em> hoping that an updated version could fix this issue.</p>\n\n<p>I also tried restarting the nginx server as well as the application server multiple times. But nothing seems to be able to throw a meaningful error.</p>\n\n<p>To be sure that it is not a database issue, I ssh-ed into the eb cli, and used the rails console. The console worked just fine. So, it is not a database issue.</p>\n\n<p>I would really appreciate if someone could help me out, and atleast get me a meaningful error in the logs.</p>\n\n<p>EDIT 1:\nAs asked by Sahil, the nginx.conf file is: </p>\n\n<pre><code># For more information on configuration, see:\n#   * Official English Documentation: http://nginx.org/en/docs/\n#   * Official Russian Documentation: http://nginx.org/ru/docs/\n\nuser nginx;\nworker_processes auto;\nerror_log /var/log/nginx/error.log;\npid /var/run/nginx.pid;\n\n# Load dynamic modules. See /usr/share/nginx/README.fedora.\ninclude /usr/share/nginx/modules/*.conf;\n\nevents {\n    worker_connections 1024;\n}\n\nhttp {\n    log_format  main  '$remote_addr - $remote_user [$time_local] \"$request\" '\n                      '$status $body_bytes_sent \"$http_referer\" '\n                      '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n\n    access_log  /var/log/nginx/access.log  main;\n\n    sendfile            on;\n    tcp_nopush          on;\n    tcp_nodelay         on;\n    keepalive_timeout   65;\n    types_hash_max_size 2048;\n\n    include             /etc/nginx/mime.types;\n    default_type        application/octet-stream;\n\n    # Load modular configuration files from the /etc/nginx/conf.d directory.\n    # See http://nginx.org/en/docs/ngx_core_module.html#include\n    # for more information.\n    include /etc/nginx/conf.d/*.conf;\n\n    index   index.html index.htm;\n\n    server {\n        listen       80 ;\n        listen       [::]:80 ;\n        server_name  localhost;\n        root         /usr/share/nginx/html;\n\n        # Load configuration files for the default server block.\n        include /etc/nginx/default.d/*.conf;\n\n        location / {\n        }\n\n        # redirect server error pages to the static page /40x.html\n        #\n        error_page 404 /404.html;\n            location = /40x.html {\n        }\n\n        # redirect server error pages to the static page /50x.html\n        #\n        error_page 500 502 503 504 /50x.html;\n            location = /50x.html {\n        }\n\n        # proxy the PHP scripts to Apache listening on 127.0.0.1:80\n        #\n        #location ~ \\.php$ {\n        #    proxy_pass   http://127.0.0.1;\n        #}\n\n        # pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n        #\n        #location ~ \\.php$ {\n        #    root           html;\n        #    fastcgi_pass   127.0.0.1:9000;\n        #    fastcgi_index  index.php;\n        #    fastcgi_param  SCRIPT_FILENAME  /scripts$fastcgi_script_name;\n        #    include        fastcgi_params;\n        #}\n\n        # deny access to .htaccess files, if Apache's document root\n        # concurs with nginx's one\n        #\n        #location ~ /\\.ht {\n        #    deny  all;\n        #}\n    }\n\n# Settings for a TLS enabled server.\n#\n#    server {\n#        listen       443 ssl;\n#        listen       [::]:443 ssl;\n#        server_name  localhost;\n#        root         /usr/share/nginx/html;\n#\n#        ssl_certificate \"/etc/pki/nginx/server.crt\";\n#        ssl_certificate_key \"/etc/pki/nginx/private/server.key\";\n#        # It is *strongly* recommended to generate unique DH parameters\n#        # Generate them with: openssl dhparam -out /etc/pki/nginx/dhparams.pem 2048\n#        #ssl_dhparam \"/etc/pki/nginx/dhparams.pem\";\n#        ssl_session_cache shared:SSL:1m;\n#        ssl_session_timeout  10m;\n#        ssl_protocols TLSv1 TLSv1.1 TLSv1.2;\n#        ssl_ciphers HIGH:SEED:!aNULL:!eNULL:!EXPORT:!DES:!RC4:!MD5:!PSK:!RSAPSK:!aDH:!aECDH:!EDH-DSS-DES-CBC3-SHA:!KRB5-DES-CBC3-SHA:!SRP;\n#        ssl_prefer_server_ciphers on;\n#\n#        # Load configuration files for the default server block.\n#        include /etc/nginx/default.d/*.conf;\n#\n#        location / {\n#        }\n#\n#        error_page 404 /404.html;\n#            location = /40x.html {\n#        }\n#\n#        error_page 500 502 503 504 /50x.html;\n#            location = /50x.html {\n#        }\n\n\n}\n</code></pre>\n\n<p>Apart from that, in my production.rb file:</p>\n\n<pre><code>config.force_ssl = true\n</code></pre>\n\n<p>EDIT 2:</p>\n\n<p>I opened the url in my friend's laptop. It opened up. It seems the problem is with my system proxy. Now I could remove my system proxy, but I can't be sure for my users who would be visiting my website. Is there a way elastic beanstalk be used with system proxy? Meanwhile, I will fondle over the internet for the same.</p>\n\n<p>EDIT 3:\nI tried opening the website from safari in my laptop. It works. But it does not work from Google Chrome.</p>\n\n<p>EDIT 4:\nI cleared cache from my browser and it worked! A lesson learnt.</p>\n"}, {"tags": ["ruby", "date", "datetime"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1351104"}, "edited": false, "score": 0, "creation_date": 1484677760, "post_id": 41704268, "comment_id": 70604544, "body": "You can use <code>DateTime.parse</code> if the string doesn&#39;t need to be in that exact format, i.e. to allow valid date strings formatted differently."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1484678962, "post_id": 41704268, "comment_id": 70605210, "body": "To be fair, I&#39;ll mention that Cody had a working and well documented answer a few seconds before me."}], "answers": [{"tags": [], "owner": {"reputation": 31012, "user_id": 25398, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3690dee254e9aa9d98ff964a70e89f23?s=128&d=identicon&r=PG", "display_name": "Cody Caughlan", "link": "https://stackoverflow.com/users/25398/cody-caughlan"}, "is_accepted": false, "score": 2, "last_activity_date": 1484677643, "creation_date": 1484677643, "answer_id": 41704394, "question_id": 41704268, "link": "https://stackoverflow.com/questions/41704268/matching-date-formatted-january-17-2017-1030-am-in-ruby/41704394#41704394", "title": "Matching Date formatted: &quot;January 17, 2017 10:30 AM&quot; in Ruby", "body": "<p>This error is happening because according to the docs of <code>DateTime#strptime</code>:</p>\n\n<blockquote>\n  <p>Parses the given representation of date and time with the given template, and creates a date object. strptime does not support specification of flags and width unlike strftime.</p>\n</blockquote>\n\n<p>And your format includes a value of <code>%-d</code> which is a width parameter, hence the exception. If you try a basic invocation like:</p>\n\n<p><code>\nDateTime.strptime(str, '%B %d, %Y')\n</code></p>\n\n<p>you'll see it works. Also, you'll want uppercase-Y for the full 4-digit year.</p>\n\n<p>In a nutshell: you'll need to adjust your format string</p>\n"}, {"comments": [{"owner": {"reputation": 324, "user_id": 4398376, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100001617753263/picture?type=large", "display_name": "kouty", "link": "https://stackoverflow.com/users/4398376/kouty"}, "edited": false, "score": 0, "creation_date": 1484683790, "post_id": 41704408, "comment_id": 70607723, "body": "the only difference is %d instead of \u2030-d ?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 324, "user_id": 4398376, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100001617753263/picture?type=large", "display_name": "kouty", "link": "https://stackoverflow.com/users/4398376/kouty"}, "edited": false, "score": 1, "creation_date": 1484685256, "post_id": 41704408, "comment_id": 70608445, "body": "And Y for 4 digit year"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 0, "last_activity_date": 1484677685, "creation_date": 1484677685, "answer_id": 41704408, "question_id": 41704268, "link": "https://stackoverflow.com/questions/41704268/matching-date-formatted-january-17-2017-1030-am-in-ruby/41704408#41704408", "title": "Matching Date formatted: &quot;January 17, 2017 10:30 AM&quot; in Ruby", "body": "<p>This format works fine :</p>\n\n<pre><code>temp = DateTime.strptime(str, '%B %d, %Y %l:%M %p')\n#&lt;DateTime: 2017-01-17T10:30:00+00:00 ((2457771j,37800s,0n),+0s,2299161j)&gt;\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 1655679, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/716a10bb81cdec076d012b3c878fcd45?s=128&d=identicon&r=PG", "display_name": "user1655679", "link": "https://stackoverflow.com/users/1655679/user1655679"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 41704408, "answer_count": 2, "score": 0, "last_activity_date": 1484677711, "creation_date": 1484677168, "question_id": 41704268, "link": "https://stackoverflow.com/questions/41704268/matching-date-formatted-january-17-2017-1030-am-in-ruby", "title": "Matching Date formatted: &quot;January 17, 2017 10:30 AM&quot; in Ruby", "body": "<p>I have been trying to use Date/DateTime to validate that a given date is in the correct format.</p>\n\n<pre><code>str = \"January 17, 2017 10:30 AM\"\ntemp = DateTime.strptime(str, '%B %-d, %y %l:%M %p')\n</code></pre>\n\n<p>but am getting the error</p>\n\n<pre><code>`strptime': invalid date (ArgumentError)\n</code></pre>\n\n<p>I have been able to split the string into \"\"January 17,\" \"2017 10:30 AM\" and validate it without issue, but I would really like to know why I can't just use strptime on the whole string, or what I am doing wrong if it can be done.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 1, "last_activity_date": 1484677103, "creation_date": 1484677103, "answer_id": 41704245, "question_id": 41704009, "link": "https://stackoverflow.com/questions/41704009/convert-marshal-loaded-string-into-object/41704245#41704245", "title": "Convert Marshal loaded string into object", "body": "<p>That's not a string, it seems an hash. Try</p>\n\n<pre><code>&lt;% my_session = Marshal.load(Base64.decode64(session.data)) %&gt;\n&lt;%= my_session['ip_address'] %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 0, "last_activity_date": 1484700904, "creation_date": 1484700904, "answer_id": 41709694, "question_id": 41704009, "link": "https://stackoverflow.com/questions/41704009/convert-marshal-loaded-string-into-object/41709694#41709694", "title": "Convert Marshal loaded string into object", "body": "<p>Basically you have a hash, not a string, thus you can access it's key-value pairs using any of <a href=\"https://ruby-doc.org/core-2.4.0/Hash.html\" rel=\"nofollow noreferrer\">Hash methods</a>.</p>\n\n<p>Using <a href=\"https://ruby-doc.org/stdlib-2.4.0/libdoc/ostruct/rdoc/OpenStruct.html\" rel=\"nofollow noreferrer\">OpenStruct</a> is your another option:</p>\n\n<pre><code>require 'ostruct'\nh = {\"_csrf_token\"=&gt;\"G/l/RK08vhzy/jMCVfmBRpCQKA5IxiACd1e0pWqMlkA=\", \"user_id\"=&gt;1, \"ip_address\"=&gt;\"127.0.0.1\", \"browser\"=&gt;\"Chrome on Macintosh 10.11.5\"}\nobject = OpenStruct.new(h)\nobject.ip_address\n#=&gt; \"127.0.0.1\"\nobject.browser\n#=&gt; \"Chrome on Macintosh 10.11.5\"\n</code></pre>\n"}], "owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 41704245, "answer_count": 2, "score": 0, "last_activity_date": 1484700904, "creation_date": 1484676267, "question_id": 41704009, "link": "https://stackoverflow.com/questions/41704009/convert-marshal-loaded-string-into-object", "title": "Convert Marshal loaded string into object", "body": "<p>In my Rails app I access session data which is stored in the database using Marshal:</p>\n\n<pre><code>&lt;%= Marshal.load(Base64.decode64(session.data)) %&gt;\n</code></pre>\n\n<p>Which returns the following string:</p>\n\n<pre><code>{\"_csrf_token\"=&gt;\"G/l/RK08vhzy/jMCVfmBRpCQKA5IxiACd1e0pWqMlkA=\", \"user_id\"=&gt;1, \"ip_address\"=&gt;\"127.0.0.1\", \"browser\"=&gt;\"Chrome on Macintosh 10.11.5\"}\n</code></pre>\n\n<p>What I want to do is access the <code>ip_address</code> and <code>browser</code> directly so I can do something like:</p>\n\n<pre><code>&lt;%= session.data[:ip_address] %&gt;\n</code></pre>\n\n<p>How can I convert what <code>Marshal.load</code> returns into a usable object?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "openssl"], "comments": [{"owner": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1484675759, "post_id": 41703758, "comment_id": 70603429, "body": "Why to you add C tag?"}, {"owner": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1484676305, "post_id": 41703758, "comment_id": 70603666, "body": "Seems like the warnings in your console might be caused by including/loading the openssl classes twice. Are you sure they are being included once?"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1484676649, "post_id": 41703758, "comment_id": 70603858, "body": "The error in the screenshot looks awfully like <a href=\"https://github.com/rails/rails/issues/25185\" rel=\"nofollow noreferrer\">github.com/rails/rails/issues/25185</a>. This should only occur on Ruby 2.4 though. Are you really sure your app is running on Ruby 2.3? In any case, please specify the exact versions of both Ruby and Rails you use."}, {"owner": {"reputation": 524, "user_id": 5129146, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ff4d72a0973a0e960b538500044b9cab?s=128&d=identicon&r=PG&f=1", "display_name": "Boomerange", "link": "https://stackoverflow.com/users/5129146/boomerange"}, "reply_to_user": {"reputation": 16936, "user_id": 7076153, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/erPUC.png?s=128&g=1", "display_name": "Stargateur", "link": "https://stackoverflow.com/users/7076153/stargateur"}, "edited": false, "score": 0, "creation_date": 1484692080, "post_id": 41703758, "comment_id": 70611799, "body": "@Stargateur What do you mean?"}, {"owner": {"reputation": 524, "user_id": 5129146, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ff4d72a0973a0e960b538500044b9cab?s=128&d=identicon&r=PG&f=1", "display_name": "Boomerange", "link": "https://stackoverflow.com/users/5129146/boomerange"}, "reply_to_user": {"reputation": 10683, "user_id": 52317, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/b3da0ca2685a59740d157b22aec70935?s=128&d=identicon&r=PG", "display_name": "Uzbekjon", "link": "https://stackoverflow.com/users/52317/uzbekjon"}, "edited": false, "score": 0, "creation_date": 1484692087, "post_id": 41703758, "comment_id": 70611801, "body": "@Uzbekjon I have only require &quot;openssl&quot; twice in my project."}, {"owner": {"reputation": 524, "user_id": 5129146, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ff4d72a0973a0e960b538500044b9cab?s=128&d=identicon&r=PG&f=1", "display_name": "Boomerange", "link": "https://stackoverflow.com/users/5129146/boomerange"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1484692095, "post_id": 41703758, "comment_id": 70611805, "body": "@HolgerJust I use Ruby 2.3 (as you can see) but I tried 2.1.9 and the errors are still the same."}, {"owner": {"reputation": 524, "user_id": 5129146, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ff4d72a0973a0e960b538500044b9cab?s=128&d=identicon&r=PG&f=1", "display_name": "Boomerange", "link": "https://stackoverflow.com/users/5129146/boomerange"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1484697661, "post_id": 41703758, "comment_id": 70613810, "body": "@HolgerJust I forgot. ruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-darwin16], Rails 4.2.7.1"}, {"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1484699948, "post_id": 41703758, "comment_id": 70614437, "body": "Try requiring &quot;openssl&quot; only once. It appears that it&#39;s already been required once from your error message."}, {"owner": {"reputation": 524, "user_id": 5129146, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ff4d72a0973a0e960b538500044b9cab?s=128&d=identicon&r=PG&f=1", "display_name": "Boomerange", "link": "https://stackoverflow.com/users/5129146/boomerange"}, "reply_to_user": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1484700763, "post_id": 41703758, "comment_id": 70614670, "body": "@thesecretmaster I tried. It did not help. How about using gem &#39;openssl-ccm&#39; instead of openssl?"}], "owner": {"reputation": 524, "user_id": 5129146, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ff4d72a0973a0e960b538500044b9cab?s=128&d=identicon&r=PG&f=1", "display_name": "Boomerange", "link": "https://stackoverflow.com/users/5129146/boomerange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 674, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1484676024, "creation_date": 1484675404, "last_edit_date": 1484676024, "question_id": 41703758, "link": "https://stackoverflow.com/questions/41703758/openssl-cant-use-gem-openssl-key-must-be-32-bytes", "title": "OpenSSL cant use gem &quot;openssl&quot;: key must be 32 bytes", "body": "<p>Maybe title is not so good, but I am desperate and dont know where the problem is.</p>\n\n<p>I need to use gem \"openssl\", but it still gives me this errors when I start console:</p>\n\n<pre><code>/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::VERSION\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::OPENSSL_VERSION\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::OPENSSL_LIBRARY_VERSION\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::OPENSSL_VERSION_NUMBER\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::OPENSSL_FIPS\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::Config::DEFAULT_CONFIG_FILE\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::PKCS7::Signer\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::PKCS7::TEXT\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::PKCS7::NOCERTS\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::PKCS7::NOSIGS\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::PKCS7::NOCHAIN\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::PKCS7::NOINTERN\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::PKCS7::NOVERIFY\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::PKCS7::DETACHED\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::PKCS7::BINARY\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::PKCS7::NOATTR\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::PKCS7::NOSMIMECAP\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::PKey::RSA::PKCS1_PADDING\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::PKey::RSA::SSLV23_PADDING\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::PKey::RSA::NO_PADDING\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::PKey::RSA::PKCS1_OAEP_PADDING\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::PKey::EC::NAMED_CURVE\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::ExtConfig::HAVE_TLSEXT_HOST_NAME\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::ExtConfig::TLS_DH_anon_WITH_AES_256_GCM_SHA384\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::SSLContext::SESSION_CACHE_OFF\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::SSLContext::SESSION_CACHE_CLIENT\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::SSLContext::SESSION_CACHE_SERVER\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::SSLContext::SESSION_CACHE_BOTH\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::SSLContext::SESSION_CACHE_NO_AUTO_CLEAR\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::SSLContext::SESSION_CACHE_NO_INTERNAL_LOOKUP\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::SSLContext::SESSION_CACHE_NO_INTERNAL_STORE\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::SSLContext::SESSION_CACHE_NO_INTERNAL\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::SSLContext::METHODS\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::ExtConfig::OPENSSL_NO_SOCK\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::VERIFY_NONE\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::VERIFY_PEER\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::VERIFY_FAIL_IF_NO_PEER_CERT\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::VERIFY_CLIENT_ONCE\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_MICROSOFT_SESS_ID_BUG\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_NETSCAPE_CHALLENGE_BUG\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_NETSCAPE_REUSE_CIPHER_CHANGE_BUG\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_SSLREF2_REUSE_CERT_TYPE_BUG\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_MICROSOFT_BIG_SSLV3_BUFFER\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_MSIE_SSLV2_RSA_PADDING\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_SSLEAY_080_CLIENT_DH_BUG\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_TLS_D5_BUG\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_TLS_BLOCK_PADDING_BUG\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_DONT_INSERT_EMPTY_FRAGMENTS\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_ALL\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_NO_SESSION_RESUMPTION_ON_RENEGOTIATION\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_SINGLE_ECDH_USE\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_SINGLE_DH_USE\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_EPHEMERAL_RSA\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_CIPHER_SERVER_PREFERENCE\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_TLS_ROLLBACK_BUG\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_NO_SSLv2\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_NO_SSLv3\n/Users/jirisverak/.rvm/gems/ruby-2.3.0@jozu/gems/openssl-2.0.2/lib/openssl.bundle: warning: already initialized constant OpenSSL::SSL::OP_NO_TLSv1\netc\n</code></pre>\n\n<p>And webpage:\n<a href=\"https://i.stack.imgur.com/10Rbe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/10Rbe.png\" alt=\"enter image description here\"></a></p>\n\n<p>brew doctor: Your system is ready to brew.\nbrew info openssl: </p>\n\n<pre><code>openssl: stable 1.0.2j (bottled) [keg-only]\nSSL/TLS cryptography library\nhttps://openssl.org/\n/usr/local/Cellar/openssl/1.0.2j (1,695 files, 12M)\n  Poured from bottle on 2017-01-17 at 10:10:07\nFrom: https://github.com/Homebrew/homebrew-core/blob/master/Formula/openssl.rb\n==&gt; Dependencies\nBuild: makedepend \u2718\n==&gt; Options\n--universal\n    Build a universal binary\n--without-test\n    Skip build-time tests (not recommended)\n==&gt; Caveats\nA CA file has been bootstrapped using certificates from the SystemRoots\nkeychain. To add additional certificates (e.g. the certificates added in\nthe System keychain), place .pem files in\n  /usr/local/etc/openssl/certs\n\nand run\n  /usr/local/opt/openssl/bin/c_rehash\n\nThis formula is keg-only, which means it was not symlinked into /usr/local.\n\nApple has deprecated use of OpenSSL in favor of its own TLS and crypto libraries\n\nGenerally there are no consequences of this for you. If you build your\nown software and it requires this formula, you'll need to add to your\nbuild variables:\n\n    LDFLAGS:  -L/usr/local/opt/openssl/lib\n    CPPFLAGS: -I/usr/local/opt/openssl/include\n    PKG_CONFIG_PATH: /usr/local/opt/openssl/lib/pkgconfig\n</code></pre>\n\n<p>I've tried every possible solution from the SO, internet, space and time. But error is still there. I've reinstalled maybe 10 times rvm, openssl, installed dotnet, etc.</p>\n\n<p>Please can somebody finally help me? Otherwise I will break my Mac and start digging canals :-)</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "hash", "redis"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1484674540, "post_id": 41703239, "comment_id": 70602796, "body": "Welcome to Stack Overflow. It&#39;s important to show what you tried, and explain why it didn&#39;t work."}, {"owner": {"reputation": 493, "user_id": 3616806, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/5e239b7b5f6e0938a4393e0a639b0aa5?s=128&d=identicon&r=PG&f=1", "display_name": "Remember_me", "link": "https://stackoverflow.com/users/3616806/remember-me"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1484675198, "post_id": 41703239, "comment_id": 70603152, "body": "@theTinMan thanks, I did added what I&#39;ve tried."}], "answers": [{"comments": [{"owner": {"reputation": 1189, "user_id": 5220391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OK0HG.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5220391/matt"}, "reply_to_user": {"reputation": 493, "user_id": 3616806, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/5e239b7b5f6e0938a4393e0a639b0aa5?s=128&d=identicon&r=PG&f=1", "display_name": "Remember_me", "link": "https://stackoverflow.com/users/3616806/remember-me"}, "edited": false, "score": 0, "creation_date": 1484676246, "post_id": 41703557, "comment_id": 70603634, "body": "@Remember_me I added more info to the answer after seeing your edit now that I know how your code is functioning."}], "tags": [], "owner": {"reputation": 1189, "user_id": 5220391, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OK0HG.jpg?s=128&g=1", "display_name": "Matt", "link": "https://stackoverflow.com/users/5220391/matt"}, "is_accepted": true, "score": 3, "last_activity_date": 1484676136, "last_edit_date": 1484676136, "creation_date": 1484674623, "answer_id": 41703557, "question_id": 41703239, "link": "https://stackoverflow.com/questions/41703239/redis-hash-or-key-replace/41703557#41703557", "title": "Redis hash or key replace", "body": "<p>If you're looking to change (or add) a single value in a hash, you can use the <code>HSET</code> command. This does not \"fetch\" the hash from redis (returning it to you), it only modifies it.</p>\n\n<p>In your case, the command would be <code>HSET YourHashName d 10</code>.</p>\n\n<p><a href=\"https://redis.io/commands/hset\" rel=\"nofollow noreferrer\">HSET Documentation on redis.io</a></p>\n\n<p>If you find you're changing multiple values at once, then use <code>HMSET</code>. This command is more efficient than multiple <code>HSET</code> calls to do the same thing, as it is less chatty over the network.</p>\n\n<p><a href=\"https://redis.io/commands/hmset\" rel=\"nofollow noreferrer\">HMSET Documentation on redis.io</a></p>\n\n<p>Keep in mind that when adding or changing data within a hash, you don't need to read/get the hash (or any individual hash key values) first. Also, if the hash doesn't exist when setting its data, the hash will be created instead of returning an error.</p>\n"}], "owner": {"reputation": 493, "user_id": 3616806, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/5e239b7b5f6e0938a4393e0a639b0aa5?s=128&d=identicon&r=PG&f=1", "display_name": "Remember_me", "link": "https://stackoverflow.com/users/3616806/remember-me"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3241, "favorite_count": 0, "accepted_answer_id": 41703557, "answer_count": 1, "score": 0, "last_activity_date": 1484686327, "creation_date": 1484673553, "last_edit_date": 1484686327, "question_id": 41703239, "link": "https://stackoverflow.com/questions/41703239/redis-hash-or-key-replace", "title": "Redis hash or key replace", "body": "<p>If I had stored an object hash in redis, say this hash:</p>\n\n<pre><code> { a: 1, b: 2, c: 3, d: 4, e: 5 }\n</code></pre>\n\n<p>And if I knew that my hash value <code>d</code> has changed to <code>10</code>, can I go about updating that redis hash key value only, rather then fetching the hash, modifying it and writing it back to redis?</p>\n\n<p>I have an object state that I am caching in the redis, and basically once the state changes, I am looking for efficient way to refresh the cache.</p>\n\n<p>Is there a better way to do this?</p>\n\n<p><strong>Hello I've tried this</strong> :</p>\n\n<pre><code>a = { a: 1, b: 2, c: 3, d: 4, e: 5 }\nREDIS.mapped_hmset('key', a)\n</code></pre>\n\n<p>So this works :</p>\n\n<pre><code>b = REDIS.hgetall('key')\nb['d'] = 10\nREDIS.mapped_hmset('key', b)\n</code></pre>\n\n<p>But I am looking something if possible to modify the key in redis, or alternative approach. </p>\n"}, {"tags": ["arrays", "ruby", "position"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 3, "creation_date": 1484674529, "post_id": 41703164, "comment_id": 70602787, "body": "What should be returned for <code>[1, 2, 2]</code>?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1484677032, "post_id": 41703164, "comment_id": 70604069, "body": "Is the order of values significant? Can the array be sorted?"}], "answers": [{"comments": [{"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 2, "creation_date": 1484673949, "post_id": 41703318, "comment_id": 70602460, "body": "what about <code>a.index(a.max(2).min)</code> ?:)"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1484673979, "post_id": 41703318, "comment_id": 70602477, "body": "Yeah, probably better :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1484674289, "post_id": 41703318, "comment_id": 70602640, "body": "That gives an unexpected result on <code>[2, 2]</code>, does not it?"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1484674891, "post_id": 41703318, "comment_id": 70602995, "body": "Do you mean because greatest and second greatest are equal?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1484675021, "post_id": 41703318, "comment_id": 70603068, "body": "Yeap. I do not know, what is the expected output in such a case, though."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 9, "last_activity_date": 1484673830, "creation_date": 1484673830, "answer_id": 41703318, "question_id": 41703164, "link": "https://stackoverflow.com/questions/41703164/how-can-i-find-the-index-of-the-second-greatest-element-in-my-array/41703318#41703318", "title": "How can I find the index of the second greatest element in my array?", "body": "<p>Try this one. <code>a</code> is your array</p>\n\n<pre><code>a.index(a.max(2).last)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "is_accepted": false, "score": 0, "last_activity_date": 1484675409, "last_edit_date": 1484675409, "creation_date": 1484674287, "answer_id": 41703444, "question_id": 41703164, "link": "https://stackoverflow.com/questions/41703164/how-can-i-find-the-index-of-the-second-greatest-element-in-my-array/41703444#41703444", "title": "How can I find the index of the second greatest element in my array?", "body": "<p>Try this if you need the value</p>\n\n<pre><code>value = array.max(2).last\n</code></pre>\n\n<p>Try this if you need the index</p>\n\n<pre><code>index = array.each_with_index.max_by(2, &amp;:first).last.last\n</code></pre>\n\n<p>How does this work?</p>\n\n<ul>\n<li><code>each_with_index</code> creates an enumerator with tuples of <code>[element, index]</code></li>\n<li><code>max_by(2, &amp;:first)</code> finds the two greatest tuples, comparing their first value aka the element</li>\n<li><code>last</code> gets the second-greatest tuple</li>\n<li><code>last</code> unpacks that tuple by getting last value aka the index</li>\n</ul>\n\n<p>Note, this creates <code>O(n)</code> temporary arrays though because we chain the <code>each_with_index</code> enumerator and I would not use this for large arrays in a performance critical codepath.</p>\n"}, {"comments": [{"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1484675433, "post_id": 41703730, "comment_id": 70603281, "body": "This does not return the index of the element in the original array."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1484675541, "post_id": 41703730, "comment_id": 70603338, "body": "The index after sorting is always <code>ary.size - 2</code>"}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1484675596, "post_id": 41703730, "comment_id": 70603359, "body": "Keyword here is &quot;the original array&quot;"}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": -1, "last_activity_date": 1484676209, "last_edit_date": 1484676209, "creation_date": 1484675319, "answer_id": 41703730, "question_id": 41703164, "link": "https://stackoverflow.com/questions/41703164/how-can-i-find-the-index-of-the-second-greatest-element-in-my-array/41703730#41703730", "title": "How can I find the index of the second greatest element in my array?", "body": "<p>I'd sort the array then use something like:</p>\n\n<pre><code>ary.size - 2\n</code></pre>\n\n<p>For instance:</p>\n\n<pre><code>ary = 5.times.map{ rand(100) } # =&gt; [61, 75, 35, 48, 59]\n\nary.sort # =&gt; [35, 48, 59, 61, 75]\n\nary.sort[-2] # =&gt; 61\nary.size - 2 # =&gt; 3\nary.sort[ary.size - 2] # =&gt; 61\n</code></pre>\n\n<blockquote>\n  <p>This does not return the index of the element in the original array.</p>\n</blockquote>\n\n<p>The index of the second largest element after sorting is always <code>array.size - 2</code>.</p>\n\n<p>If the array has to be in its original order I'd do this:</p>\n\n<pre><code>ary = 5.times.map{ rand(100) } # =&gt; [83, 72, 4, 63, 68]\nhash = ary.each_with_index.to_h # =&gt; {83=&gt;0, 72=&gt;1, 4=&gt;2, 63=&gt;3, 68=&gt;4}\nhash.sort[-2] # =&gt; [72, 1]\n</code></pre>\n\n<p>At that point <code>hash.sort[-2]</code> returns the value and its index in the original array. <code>72</code> is the value and <code>ary[1]</code> is the index to the value.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1485458538, "last_edit_date": 1485458538, "creation_date": 1484683128, "answer_id": 41705878, "question_id": 41703164, "link": "https://stackoverflow.com/questions/41703164/how-can-i-find-the-index-of-the-second-greatest-element-in-my-array/41705878#41705878", "title": "How can I find the index of the second greatest element in my array?", "body": "<pre><code>a = [1,3,1,2]\n</code></pre>\n\n<p><strong>When <code>1</code> and <code>1</code> are regarded as the two smallest values of <code>a</code></strong></p>\n\n<pre><code>def second_largest_not_uniq(a)\n  a.each_index.min_by(2) { |i| a[i] }[1]\nend\n\nsecond_largest_not_uniq [1,3,1,2] #=&gt; 2 \nsecond_largest_not_uniq [1]       #=&gt; nil\nsecond_largest_not_uniq []        #=&gt; nil \n</code></pre>\n\n<p><strong>When <code>1</code> and <code>2</code> are regarded as the two smallest values of <code>a</code></strong></p>\n\n<pre><code>def second_largest_uniq(a)\n  a.each_index.to_a.uniq { |i| a[i] }.min_by(2) { |i| a[i] }[1]\nend\n\nsecond_largest_uniq [1,3,1,2]     #=&gt; 3\nsecond_largest_uniq [1,1,1]       #=&gt; nil\nsecond_largest_uniq []            #=&gt; nil\nsecond_largest_uniq [1]           #=&gt; nil\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 903, "favorite_count": 0, "accepted_answer_id": 41703318, "answer_count": 4, "score": 0, "last_activity_date": 1485458538, "creation_date": 1484673324, "last_edit_date": 1484687229, "question_id": 41703164, "link": "https://stackoverflow.com/questions/41703164/how-can-i-find-the-index-of-the-second-greatest-element-in-my-array", "title": "How can I find the index of the second greatest element in my array?", "body": "<p>I'm using Ruby 2.4 and   I have an array of numbers:</p>\n\n<pre><code>[23423, 349843, 13123, 29239, 20201, ...]\n</code></pre>\n\n<p>How can  I find the array index corresponding to the second greatest value in the array?  You can assume that there are at least two elements in the array.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "activesupport"], "comments": [{"owner": {"reputation": 778, "user_id": 490148, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fdf74175f7ff2d2ff2c03c10ca2bce39?s=128&d=identicon&r=PG", "display_name": "virtuexru", "link": "https://stackoverflow.com/users/490148/virtuexru"}, "edited": false, "score": 0, "creation_date": 1484673243, "post_id": 41703128, "comment_id": 70602049, "body": "Are you running <code>bundle exec rake db:migrate</code> or just <code>rake db:migrate</code>?"}, {"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 2, "creation_date": 1484673308, "post_id": 41703128, "comment_id": 70602097, "body": "can you post the migration file?"}, {"owner": {"reputation": 304, "user_id": 7431334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lcTad.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/7431334/sam"}, "reply_to_user": {"reputation": 778, "user_id": 490148, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fdf74175f7ff2d2ff2c03c10ca2bce39?s=128&d=identicon&r=PG", "display_name": "virtuexru", "link": "https://stackoverflow.com/users/490148/virtuexru"}, "edited": false, "score": 0, "creation_date": 1484675235, "post_id": 41703128, "comment_id": 70603172, "body": "@virtuexru I&#39;m just runing rake db:migrate, but I get the same output when trying bundle exec rake db:migrate."}, {"owner": {"reputation": 304, "user_id": 7431334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lcTad.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/7431334/sam"}, "reply_to_user": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1484675259, "post_id": 41703128, "comment_id": 70603189, "body": "@RockwellRice, sure, I&#39;ll edit the post ;)"}], "answers": [{"comments": [{"owner": {"reputation": 304, "user_id": 7431334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lcTad.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/7431334/sam"}, "edited": false, "score": 0, "creation_date": 1484676282, "post_id": 41703182, "comment_id": 70603656, "body": "Thanks for answering Virtuexru, I tried bundle update and after that bundle exec rake db:migrate but the output is almost the same. I edited the post."}, {"owner": {"reputation": 778, "user_id": 490148, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fdf74175f7ff2d2ff2c03c10ca2bce39?s=128&d=identicon&r=PG", "display_name": "virtuexru", "link": "https://stackoverflow.com/users/490148/virtuexru"}, "reply_to_user": {"reputation": 304, "user_id": 7431334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lcTad.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/7431334/sam"}, "edited": false, "score": 0, "creation_date": 1484678970, "post_id": 41703182, "comment_id": 70605213, "body": "Can you remove the version for <code>devise</code> in the gemfile? Meaning have it be: gem &#39;devise&#39; and run <code>bundle</code> first before running` bundle exec rake db:migrate`"}, {"owner": {"reputation": 778, "user_id": 490148, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fdf74175f7ff2d2ff2c03c10ca2bce39?s=128&d=identicon&r=PG", "display_name": "virtuexru", "link": "https://stackoverflow.com/users/490148/virtuexru"}, "reply_to_user": {"reputation": 304, "user_id": 7431334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lcTad.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/7431334/sam"}, "edited": false, "score": 0, "creation_date": 1484679143, "post_id": 41703182, "comment_id": 70605316, "body": "Also do you have <code>nodejs</code> installed? You might need it."}, {"owner": {"reputation": 304, "user_id": 7431334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lcTad.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/7431334/sam"}, "edited": false, "score": 0, "creation_date": 1484679361, "post_id": 41703182, "comment_id": 70605439, "body": "virtuexru, I did exactly what you said, but it doesn&#39;t change the out put."}, {"owner": {"reputation": 778, "user_id": 490148, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fdf74175f7ff2d2ff2c03c10ca2bce39?s=128&d=identicon&r=PG", "display_name": "virtuexru", "link": "https://stackoverflow.com/users/490148/virtuexru"}, "reply_to_user": {"reputation": 304, "user_id": 7431334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lcTad.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/7431334/sam"}, "edited": false, "score": 0, "creation_date": 1484679591, "post_id": 41703182, "comment_id": 70605561, "body": "Hmmm; l would imagine its something wrong with the <code>devise</code> gem.. I can&#39;t find anything else on the web related to this error. Sorry :( Worst case scenario you can open up an issue here: <a href=\"https://github.com/plataformatec/devise/issues\" rel=\"nofollow noreferrer\">github.com/plataformatec/devise/issues</a>"}, {"owner": {"reputation": 971, "user_id": 1799633, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5ac9043444eb7fe5314b171e05a6f503?s=128&d=identicon&r=PG", "display_name": "Bot", "link": "https://stackoverflow.com/users/1799633/bot"}, "edited": false, "score": 0, "creation_date": 1484910885, "post_id": 41703182, "comment_id": 70715992, "body": "Got any solutions for this? I am facing the same issue."}, {"owner": {"reputation": 11595, "user_id": 748259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d341d3b717765103bbd71484af0e96b?s=128&d=identicon&r=PG", "display_name": "Mikhail Nikalyukin", "link": "https://stackoverflow.com/users/748259/mikhail-nikalyukin"}, "reply_to_user": {"reputation": 971, "user_id": 1799633, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5ac9043444eb7fe5314b171e05a6f503?s=128&d=identicon&r=PG", "display_name": "Bot", "link": "https://stackoverflow.com/users/1799633/bot"}, "edited": false, "score": 0, "creation_date": 1485347974, "post_id": 41703182, "comment_id": 70887339, "body": "@Bot just found a solution, take a look at my answer"}], "tags": [], "owner": {"reputation": 778, "user_id": 490148, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fdf74175f7ff2d2ff2c03c10ca2bce39?s=128&d=identicon&r=PG", "display_name": "virtuexru", "link": "https://stackoverflow.com/users/490148/virtuexru"}, "is_accepted": false, "score": 0, "last_activity_date": 1484673384, "creation_date": 1484673384, "answer_id": 41703182, "question_id": 41703128, "link": "https://stackoverflow.com/questions/41703128/error-while-trying-to-load-the-gem-devise-activesupport-duration-cant-be-coe/41703182#41703182", "title": "Error while trying to load the gem &#39;devise. ActiveSupport: Duration can&#39;t be coerced into Integer", "body": "<p>Try running <code>bundle exec rake db:migrate</code> and let me know the output. Without <code>bundle exec</code> in front it won't know which gems to use &amp; will use native (system) gems.</p>\n\n<p>Also try running <code>bundle update</code> and then re-running the migration.</p>\n"}, {"comments": [{"owner": {"reputation": 971, "user_id": 1799633, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/5ac9043444eb7fe5314b171e05a6f503?s=128&d=identicon&r=PG", "display_name": "Bot", "link": "https://stackoverflow.com/users/1799633/bot"}, "edited": false, "score": 3, "creation_date": 1485362725, "post_id": 41851877, "comment_id": 70897799, "body": "Yea, that&#39;s what I did. Rails 3.2 is not supported on ruby 2.4, so had to use lower version."}, {"owner": {"reputation": 14353, "user_id": 235158, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/V08OU.jpg?s=128&g=1", "display_name": "AntonAL", "link": "https://stackoverflow.com/users/235158/antonal"}, "edited": false, "score": 1, "creation_date": 1489694520, "post_id": 41851877, "comment_id": 72796356, "body": "It works for me! Thank You. I have to upgrade my Rails 4 to Rails 5. But, I&#39;ve used ruby-2.3.3."}, {"owner": {"reputation": 230, "user_id": 1486234, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/945e89ebc5ab747e075d67c0058ee26f?s=128&d=identicon&r=PG", "display_name": "giglemad", "link": "https://stackoverflow.com/users/1486234/giglemad"}, "edited": false, "score": 1, "creation_date": 1513166513, "post_id": 41851877, "comment_id": 82545971, "body": "For future users, consider using ruby-2.3.4 or higher to avoid huge vulns present in 2.3.3 and prior versions"}, {"owner": {"reputation": 19260, "user_id": 1727392, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/KP9Ia.jpg?s=128&g=1", "display_name": "duhaime", "link": "https://stackoverflow.com/users/1727392/duhaime"}, "edited": false, "score": 1, "creation_date": 1534175917, "post_id": 41851877, "comment_id": 90606873, "body": "This kind of wonky dependency management seems particularly pronounced in the Ruby ecosystem..."}], "tags": [], "owner": {"reputation": 11595, "user_id": 748259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9d341d3b717765103bbd71484af0e96b?s=128&d=identicon&r=PG", "display_name": "Mikhail Nikalyukin", "link": "https://stackoverflow.com/users/748259/mikhail-nikalyukin"}, "is_accepted": false, "score": 22, "last_activity_date": 1491989365, "last_edit_date": 1491989365, "creation_date": 1485347952, "answer_id": 41851877, "question_id": 41703128, "link": "https://stackoverflow.com/questions/41703128/error-while-trying-to-load-the-gem-devise-activesupport-duration-cant-be-coe/41851877#41851877", "title": "Error while trying to load the gem &#39;devise. ActiveSupport: Duration can&#39;t be coerced into Integer", "body": "<p>Faced the issue today while trying to upgrade old app to rails 4.</p>\n\n<p>The issue is ruby version(2.4.0) and not devise itself. Consider to use ruby-2.3.3 or lower and it's going to work like a charm!</p>\n"}, {"comments": [{"owner": {"reputation": 4071, "user_id": 2354735, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Q33GM.jpg?s=128&g=1", "display_name": "Jet Blue", "link": "https://stackoverflow.com/users/2354735/jet-blue"}, "edited": false, "score": 1, "creation_date": 1528849695, "post_id": 44286374, "comment_id": 88659636, "body": "With this answer and <a href=\"https://stackoverflow.com/a/44286212\">this one</a>, you are my hero of the day."}, {"owner": {"reputation": 773, "user_id": 537025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0dfc49166318a6c56ad40ecb53189888?s=128&d=identicon&r=PG", "display_name": "courtsimas", "link": "https://stackoverflow.com/users/537025/courtsimas"}, "reply_to_user": {"reputation": 4071, "user_id": 2354735, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Q33GM.jpg?s=128&g=1", "display_name": "Jet Blue", "link": "https://stackoverflow.com/users/2354735/jet-blue"}, "edited": false, "score": 0, "creation_date": 1537546409, "post_id": 44286374, "comment_id": 91838008, "body": "Same as @JetBlue"}, {"owner": {"reputation": 487, "user_id": 753451, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/85d4032d575e0c8e853ff3037b51f16d?s=128&d=identicon&r=PG", "display_name": "Alex Buznik", "link": "https://stackoverflow.com/users/753451/alex-buznik"}, "edited": false, "score": 2, "creation_date": 1544382921, "post_id": 44286374, "comment_id": 94246873, "body": "I&#39;m sorry - what exactly should I do with this one? I created a new file in <code>config&#47;initializers</code> and put it there, but it didn&#39;t work"}, {"owner": {"reputation": 234, "user_id": 5696554, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10203997152048831/picture?type=large", "display_name": "mychemicalro", "link": "https://stackoverflow.com/users/5696554/mychemicalro"}, "edited": false, "score": 0, "creation_date": 1544431169, "post_id": 44286374, "comment_id": 94258720, "body": "Where do I need to put the Integer and Duration classes? @Thomas Dziedzic"}, {"owner": {"reputation": 487, "user_id": 753451, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/85d4032d575e0c8e853ff3037b51f16d?s=128&d=identicon&r=PG", "display_name": "Alex Buznik", "link": "https://stackoverflow.com/users/753451/alex-buznik"}, "reply_to_user": {"reputation": 234, "user_id": 5696554, "user_type": "registered", "accept_rate": 83, "profile_image": "https://graph.facebook.com/10203997152048831/picture?type=large", "display_name": "mychemicalro", "link": "https://stackoverflow.com/users/5696554/mychemicalro"}, "edited": false, "score": 0, "creation_date": 1544782416, "post_id": 44286374, "comment_id": 94406398, "body": "Hey @mychemicalro, I fixed it like this: <a href=\"https://www.udemy.com/learn-ruby-on-rails-from-scratch/learn/v4/questions/5836226\" rel=\"nofollow noreferrer\">udemy.com/learn-ruby-on-rails-from-scratch/learn/v4/question&zwnj;&#8203;s/&hellip;</a>"}, {"owner": {"reputation": 1634, "user_id": 882322, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49a7113c78c52353e443145aebcaffc9?s=128&d=identicon&r=PG", "display_name": "mpz", "link": "https://stackoverflow.com/users/882322/mpz"}, "edited": false, "score": 0, "creation_date": 1552813386, "post_id": 44286374, "comment_id": 97147137, "body": "i fixed this by adding this code to environment.rb file not initialesers file"}, {"owner": {"reputation": 2784, "user_id": 3873, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e03afa4743fbcf9451b745438026b886?s=128&d=identicon&r=PG", "display_name": "Sam Warwick", "link": "https://stackoverflow.com/users/3873/sam-warwick"}, "reply_to_user": {"reputation": 487, "user_id": 753451, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/85d4032d575e0c8e853ff3037b51f16d?s=128&d=identicon&r=PG", "display_name": "Alex Buznik", "link": "https://stackoverflow.com/users/753451/alex-buznik"}, "edited": false, "score": 0, "creation_date": 1616198157, "post_id": 44286374, "comment_id": 117936641, "body": "@AlexBuznik it appears that the Udemy link requires you to purchase the course ($25) to get access to the question. Please can you share the details of your solution?"}, {"owner": {"reputation": 487, "user_id": 753451, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/85d4032d575e0c8e853ff3037b51f16d?s=128&d=identicon&r=PG", "display_name": "Alex Buznik", "link": "https://stackoverflow.com/users/753451/alex-buznik"}, "edited": false, "score": 0, "creation_date": 1616306520, "post_id": 44286374, "comment_id": 117957300, "body": "Sure, my bad. Not much more other than Thomas&#39; advice  - forked activesupport and fixed the issue there per this answer (<a href=\"https://github.com/beshur/activesupport\" rel=\"nofollow noreferrer\">github.com/beshur/activesupport</a> not updated since then) , but also switched to heroku stack 16 (which may already be phasing out, I guess). Not  sure why I put the link to udemy for this."}], "tags": [], "owner": {"reputation": 564, "user_id": 8092262, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-GZ-S3rOmUC8/AAAAAAAAAAI/AAAAAAAAAHM/RSfjuxbW7-8/photo.jpg?sz=128", "display_name": "Thomas Dziedzic", "link": "https://stackoverflow.com/users/8092262/thomas-dziedzic"}, "is_accepted": true, "score": 17, "last_activity_date": 1496237972, "creation_date": 1496237972, "answer_id": 44286374, "question_id": 41703128, "link": "https://stackoverflow.com/questions/41703128/error-while-trying-to-load-the-gem-devise-activesupport-duration-cant-be-coe/44286374#44286374", "title": "Error while trying to load the gem &#39;devise. ActiveSupport: Duration can&#39;t be coerced into Integer", "body": "<p>I faced this yesterday while getting rails 3.2 and ruby 2.4 working together. I fixed it by monkey patching the activesupport library which is where the problem lies.</p>\n\n<p>solution: switch the order of multiplication, put Duration first</p>\n\n<p>Include the following code in your rails initializers:</p>\n\n<pre><code># pulled from https://github.com/rails/rails/blob/v3.2.22.5/activesupport/lib/active_support/core_ext/numeric/time.rb\n\nclass Numeric\n  def days\n    ActiveSupport::Duration.new(24.hours * self, [[:days, self]])\n  end\n  alias :day :days\n\n  def weeks\n    ActiveSupport::Duration.new(7.days * self, [[:days, self * 7]])\n  end\n  alias :week :weeks\n\n  def fortnights\n    ActiveSupport::Duration.new(2.weeks * self, [[:days, self * 14]])\n  end\n  alias :fortnight :fortnights\nend\n\n# pulled from https://github.com/rails/rails/blob/v3.2.22.5/activesupport/lib/active_support/core_ext/integer/time.rb\n\nclass Integer\n  def months\n    ActiveSupport::Duration.new(30.days * self, [[:months, self]])\n  end\n  alias :month :months\n\n  def years\n    ActiveSupport::Duration.new(365.25.days * self, [[:years, self]])\n  end\n  alias :year :years\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1241, "user_id": 979838, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/MSMhU.jpg?s=128&g=1", "display_name": "Patrick Brinich-Langlois", "link": "https://stackoverflow.com/users/979838/patrick-brinich-langlois"}, "edited": false, "score": 0, "creation_date": 1516404998, "post_id": 46377261, "comment_id": 83688714, "body": "Why 5.0.2? <code>1.day</code> works fine for me on Ruby 2.4.2 and Rails 4.2.10. The original poster experienced the bug on Rails 4.1.1. So the problem was fixed sometime between those versions."}, {"owner": {"reputation": 109, "user_id": 7583703, "user_type": "registered", "profile_image": "https://graph.facebook.com/1240680152/picture?type=large", "display_name": "Daniel O&#39;Quinn", "link": "https://stackoverflow.com/users/7583703/daniel-oquinn"}, "reply_to_user": {"reputation": 1241, "user_id": 979838, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/MSMhU.jpg?s=128&g=1", "display_name": "Patrick Brinich-Langlois", "link": "https://stackoverflow.com/users/979838/patrick-brinich-langlois"}, "edited": false, "score": 0, "creation_date": 1529978625, "post_id": 46377261, "comment_id": 89059950, "body": "Security, and to help oneself in the future when versions become even more difficult to update. If the OP is referencing gems that are outdated, and monkey patching system libraries it is likely to come back some day needing more work than it is to bump the version as they are made available."}, {"owner": {"reputation": 1241, "user_id": 979838, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/MSMhU.jpg?s=128&g=1", "display_name": "Patrick Brinich-Langlois", "link": "https://stackoverflow.com/users/979838/patrick-brinich-langlois"}, "edited": false, "score": 0, "creation_date": 1530069806, "post_id": 46377261, "comment_id": 89099017, "body": "I don&#39;t understand. Why is 5.0.2 sufficiently secure but 5.0.1 not? It seems that if the issue is specific to a version of Rails, it would be more useful to say what version the issue was fixed in rather than to say what version the issue was fixed in that also is secure enough by some unspecified standard."}, {"owner": {"reputation": 109, "user_id": 7583703, "user_type": "registered", "profile_image": "https://graph.facebook.com/1240680152/picture?type=large", "display_name": "Daniel O&#39;Quinn", "link": "https://stackoverflow.com/users/7583703/daniel-oquinn"}, "reply_to_user": {"reputation": 1241, "user_id": 979838, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/MSMhU.jpg?s=128&g=1", "display_name": "Patrick Brinich-Langlois", "link": "https://stackoverflow.com/users/979838/patrick-brinich-langlois"}, "edited": false, "score": 0, "creation_date": 1530127607, "post_id": 46377261, "comment_id": 89130056, "body": "It is generally a better approach to use the latest stable in any project. Doing so gives you better odds at having fewer security holes in your application. This is because newer versions have patches or account for any vulnerabilities discovered throughout the life of the software package. So the proper approach does not involve modifying system libraries and creating more holes, it is to update your system for the long run and capture these additionl benefits. I am not sure of the sepcifics of your question regarding bug fixes in rails 5.01 vs 5.0.2, maybe better to ask a new question."}], "tags": [], "owner": {"reputation": 109, "user_id": 7583703, "user_type": "registered", "profile_image": "https://graph.facebook.com/1240680152/picture?type=large", "display_name": "Daniel O&#39;Quinn", "link": "https://stackoverflow.com/users/7583703/daniel-oquinn"}, "is_accepted": false, "score": -2, "last_activity_date": 1529979547, "last_edit_date": 1529979547, "creation_date": 1506152314, "answer_id": 46377261, "question_id": 41703128, "link": "https://stackoverflow.com/questions/41703128/error-while-trying-to-load-the-gem-devise-activesupport-duration-cant-be-coe/46377261#46377261", "title": "Error while trying to load the gem &#39;devise. ActiveSupport: Duration can&#39;t be coerced into Integer", "body": "<p>Switch to rails version at least 5.0.2, remove your Gemfile.lock and run <code>bundle update</code>.</p>\n\n<p><code>5.2.0</code> is the most recent, this was released April 9, '18..</p>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 3239403, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/9d50d56d4bc894882fda1750525150c1?s=128&d=identicon&r=PG&f=1", "display_name": "leylakapi", "link": "https://stackoverflow.com/users/3239403/leylakapi"}, "is_accepted": false, "score": -1, "last_activity_date": 1514307637, "last_edit_date": 1514307637, "creation_date": 1514305736, "answer_id": 47981220, "question_id": 41703128, "link": "https://stackoverflow.com/questions/41703128/error-while-trying-to-load-the-gem-devise-activesupport-duration-cant-be-coe/47981220#47981220", "title": "Error while trying to load the gem &#39;devise. ActiveSupport: Duration can&#39;t be coerced into Integer", "body": "<p>Today, I faced with same problem, but different versions, my ruby version 2.4.2 and rails version 4.0.13.</p>\n\n<p>I was getting the same error, and fixed it now. Thanks to @thomas-dziedzic. </p>\n\n<p>The solution is:</p>\n\n<ol>\n<li>I pulled from\n<a href=\"https://github.com/rails/rails/commit/32f215c3014e580e512db5e8772d0deadf3d6497\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/commit/32f215c3014e580e512db5e8772d0deadf3d6497</a></li>\n<li>I edited according to this link then edit <a href=\"https://github.com/rails/rails/blob/32f215c3014e580e512db5e8772d0deadf3d6497/activesupport/lib/active_support/core_ext/numeric/conversions.rb\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/32f215c3014e580e512db5e8772d0deadf3d6497/activesupport/lib/active_support/core_ext/numeric/conversions.rb</a> </li>\n</ol>\n\n<p>When I editing active_support, the problem fixed it. </p>\n"}, {"tags": [], "owner": {"reputation": 487, "user_id": 753451, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/85d4032d575e0c8e853ff3037b51f16d?s=128&d=identicon&r=PG", "display_name": "Alex Buznik", "link": "https://stackoverflow.com/users/753451/alex-buznik"}, "is_accepted": false, "score": 0, "last_activity_date": 1544793223, "creation_date": 1544793223, "answer_id": 53780503, "question_id": 41703128, "link": "https://stackoverflow.com/questions/41703128/error-while-trying-to-load-the-gem-devise-activesupport-duration-cant-be-coe/53780503#53780503", "title": "Error while trying to load the gem &#39;devise. ActiveSupport: Duration can&#39;t be coerced into Integer", "body": "<p>Actually I had the same problem trying to install and run <code>activeadmin</code> under these conditions:</p>\n\n<p>rails 3.2.22.5\nruby 2.3.8</p>\n\n<p>The <a href=\"https://stackoverflow.com/a/44286374/753451\">solution by Thomas</a> did not fully work for me, because the ActiveSupport was called before the application could start.</p>\n\n<p>Solution that worked for me:\nI extracted the ActiveSupport as a separate gem, <a href=\"https://github.com/beshur/activesupport\" rel=\"nofollow noreferrer\">forked it</a>, applied the above patch by Thomas and did some additional fixes so it could be run as a gem, outside of rails.\nI also added this gem before <code>activeadmin</code>, so when <code>Duration</code> was required it run my patched version:</p>\n\n<pre><code># Gemfile extract\ngem 'activesupport', :git =&gt; 'git://github.com/beshur/activesupport.git'\ngem 'activeadmin', '0.6.6'\n</code></pre>\n\n<p>Then I switched my heroku app to use stack heroku-16 (<a href=\"https://devcenter.heroku.com/articles/stack\" rel=\"nofollow noreferrer\">more on stacks here</a>), however it still requires ruby 2.3.8.</p>\n\n<p>Hope it helps someone later, though it's already outdated versions.</p>\n"}, {"tags": [], "owner": {"reputation": 2015, "user_id": 15627, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/134234341cf3b1f53b9912c71bcdcfba?s=128&d=identicon&r=PG", "display_name": "Lars Westergren", "link": "https://stackoverflow.com/users/15627/lars-westergren"}, "is_accepted": false, "score": 0, "last_activity_date": 1571227379, "creation_date": 1571227379, "answer_id": 58412852, "question_id": 41703128, "link": "https://stackoverflow.com/questions/41703128/error-while-trying-to-load-the-gem-devise-activesupport-duration-cant-be-coe/58412852#58412852", "title": "Error while trying to load the gem &#39;devise. ActiveSupport: Duration can&#39;t be coerced into Integer", "body": "<p>I had the same problem when migrating a legacy app. Once you upgrade Rails to 4.2 you can upgrade the Ruby version to 2.4 and then continue along your upgrade path with both Rails and Ruby.</p>\n\n<p>I recommend using the bootboot gem in your Gemfile so you can test running specs in older and newer Rails versions with just an environment variable, without having to switch Git branches.</p>\n"}], "owner": {"reputation": 304, "user_id": 7431334, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lcTad.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/7431334/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10397, "favorite_count": 7, "accepted_answer_id": 44286374, "answer_count": 7, "score": 15, "last_activity_date": 1571227379, "creation_date": 1484673202, "last_edit_date": 1484676071, "question_id": 41703128, "link": "https://stackoverflow.com/questions/41703128/error-while-trying-to-load-the-gem-devise-activesupport-duration-cant-be-coe", "title": "Error while trying to load the gem &#39;devise. ActiveSupport: Duration can&#39;t be coerced into Integer", "body": "<p>I've been trying to fix this error for a while now without finding any helpful, help please.</p>\n\n<p>I'm trying to run migrations on my ROR app using the devise gem. But I get an error from ActiveSupport 'Duration can't be coerced into Integer'. this happened then I try to run:</p>\n\n<pre><code>rake db:migrate\n</code></pre>\n\n<p>I'm not sure if it has something to do with the code on the migrations or if it is something about a new devise version.\nThis is the error message:</p>\n\n<pre><code>/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/activesupport-4.1.1/lib/active_support/values/time_zone.rb:285: warning: circular argument reference - now\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/thread_safe-0.3.5/lib/thread_safe/cache.rb:155: warning: constant ::Fixnum is deprecated\nrake aborted!\nBundler::GemRequireError: There was an error while trying to load the gem 'devise'.\nGem Load Error is: ActiveSupport::Duration can't be coerced into Integer\nBacktrace for gem load error is:\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/activesupport-4.1.1/lib/active_support/core_ext/numeric/time.rb:50:in `*'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/activesupport-4.1.1/lib/active_support/core_ext/numeric/time.rb:50:in `days'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/activesupport-4.1.1/lib/active_support/core_ext/numeric/time.rb:55:in `weeks'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/devise-4.2.0/lib/devise.rb:121:in `&lt;module:Devise&gt;'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/devise-4.2.0/lib/devise.rb:9:in `&lt;top (required)&gt;'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:91:in `require'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:91:in `block (2 levels) in require'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:86:in `each'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:86:in `block in require'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:75:in `each'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:75:in `require'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/lib/bundler.rb:106:in `require'\n/home/sam/aplicaciones/pess/config/application.rb:7:in `&lt;top (required)&gt;'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n/home/sam/aplicaciones/pess/Rakefile:4:in `&lt;top (required)&gt;'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/rake_module.rb:28:in `load'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/rake_module.rb:28:in `load_rakefile'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:687:in `raw_load_rakefile'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:96:in `block in load_rakefile'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:178:in `standard_exception_handling'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:95:in `load_rakefile'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:79:in `block in run'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:178:in `standard_exception_handling'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:77:in `run'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/rake-12.0.0/exe/rake:27:in `&lt;top (required)&gt;'\n/home/sam/.rbenv/versions/2.4.0/bin/rake:22:in `load'\n/home/sam/.rbenv/versions/2.4.0/bin/rake:22:in `&lt;main&gt;'\nBundler Error Backtrace:\n/home/sam/aplicaciones/pess/config/application.rb:7:in `&lt;top (required)&gt;'\n/home/sam/aplicaciones/pess/Rakefile:4:in `&lt;top (required)&gt;'\nTypeError: ActiveSupport::Duration can't be coerced into Integer\n/home/sam/aplicaciones/pess/config/application.rb:7:in `&lt;top (required)&gt;'\n/home/sam/aplicaciones/pess/Rakefile:4:in `&lt;top (required)&gt;'\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>I'm using:</p>\n\n<pre><code>ruby '2.4.0'\ngem 'rails', '4.1.1'\ngem 'devise', '~&gt; 4.2.0'\n</code></pre>\n\n<p>Please let me know how can I make this a better question.\ngreetings.</p>\n\n<p>Edit:\nThis is one of the migrations files:</p>\n\n<pre><code>class DeviseCreateUsers &lt; ActiveRecord::Migration\ndef change\ncreate_table(:users) do |t|\n  t.string :email,              null: false, default: \"\"\n  t.string :encrypted_password, null: false, default: \"\"\n  t.string   :reset_password_token\n  t.datetime :reset_password_sent_at\n  t.datetime :remember_created_at\n  t.integer  :sign_in_count, default: 0, null: false\n  t.datetime :current_sign_in_at\n  t.datetime :last_sign_in_at\n  t.string   :current_sign_in_ip\n  t.string   :last_sign_in_ip\n  t.timestamps\nend\nend\nend\n</code></pre>\n\n<p>Also, when trying \n    bundle exec rake db:migrate\nI get almost the same:</p>\n\n<pre><code>bundle exec rake db:migrate\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/activesupport-4.1.1/lib/active_support/values/time_zone.rb:285: warning: circular argument reference - now\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/thread_safe-0.3.5/lib/thread_safe/cache.rb:155: warning: constant ::Fixnum is deprecated\nrake aborted!\nBundler::GemRequireError: There was an error while trying to load the gem 'devise'.\nGem Load Error is: ActiveSupport::Duration can't be coerced into Integer\nBacktrace for gem load error is:\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/activesupport-4.1.1/lib/active_support/core_ext/numeric/time.rb:50:in `*'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/activesupport-4.1.1/lib/active_support/core_ext/numeric/time.rb:50:in `days'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/activesupport-4.1.1/lib/active_support/core_ext/numeric/time.rb:55:in `weeks'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/devise-4.2.0/lib/devise.rb:121:in `&lt;module:Devise&gt;'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/devise-4.2.0/lib/devise.rb:9:in `&lt;top (required)&gt;'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:91:in `require'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:91:in `block (2 levels) in require'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:86:in `each'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:86:in `block in require'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:75:in `each'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/lib/bundler/runtime.rb:75:in `require'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/lib/bundler.rb:106:in `require'\n/home/sam/aplicaciones/pess/config/application.rb:7:in `&lt;top (required)&gt;'\n/home/sam/aplicaciones/pess/Rakefile:4:in `require'\n/home/sam/aplicaciones/pess/Rakefile:4:in `&lt;top (required)&gt;'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/rake_module.rb:28:in `load'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/rake_module.rb:28:in `load_rakefile'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:687:in `raw_load_rakefile'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:96:in `block in load_rakefile'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:178:in `standard_exception_handling'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:95:in `load_rakefile'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:79:in `block in run'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:178:in `standard_exception_handling'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/rake-12.0.0/lib/rake/application.rb:77:in `run'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/rake-12.0.0/exe/rake:27:in `&lt;top (required)&gt;'\n/home/sam/.rbenv/versions/2.4.0/bin/rake:22:in `load'\n/home/sam/.rbenv/versions/2.4.0/bin/rake:22:in `&lt;top (required)&gt;'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/lib/bundler/cli/exec.rb:74:in `load'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/lib/bundler/cli/exec.rb:74:in `kernel_load'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/lib/bundler/cli/exec.rb:27:in `run'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/lib/bundler/cli.rb:332:in `exec'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/lib/bundler/vendor/thor/lib/thor/command.rb:27:in `run'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/lib/bundler/vendor/thor/lib/thor/invocation.rb:126:in `invoke_command'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/lib/bundler/vendor/thor/lib/thor.rb:359:in `dispatch'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/lib/bundler/cli.rb:20:in `dispatch'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/lib/bundler/vendor/thor/lib/thor/base.rb:440:in `start'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/lib/bundler/cli.rb:11:in `start'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/exe/bundle:34:in `block in &lt;top (required)&gt;'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/lib/bundler/friendly_errors.rb:100:in `with_friendly_errors'\n/home/sam/.rbenv/versions/2.4.0/lib/ruby/gems/2.4.0/gems/bundler-1.13.7/exe/bundle:26:in `&lt;top (required)&gt;'\n/home/sam/.rbenv/versions/2.4.0/bin/bundle:22:in `load'\n/home/sam/.rbenv/versions/2.4.0/bin/bundle:22:in `&lt;main&gt;'\nBundler Error Backtrace:\n/home/sam/aplicaciones/pess/config/application.rb:7:in `&lt;top (required)&gt;'\n/home/sam/aplicaciones/pess/Rakefile:4:in `require'\n/home/sam/aplicaciones/pess/Rakefile:4:in `&lt;top (required)&gt;'\n/home/sam/.rbenv/versions/2.4.0/bin/bundle:22:in `load'\n/home/sam/.rbenv/versions/2.4.0/bin/bundle:22:in `&lt;main&gt;'\nTypeError: ActiveSupport::Duration can't be coerced into Integer\n/home/sam/aplicaciones/pess/config/application.rb:7:in `&lt;top (required)&gt;'\n/home/sam/aplicaciones/pess/Rakefile:4:in `require'\n/home/sam/aplicaciones/pess/Rakefile:4:in `&lt;top (required)&gt;'\n/home/sam/.rbenv/versions/2.4.0/bin/bundle:22:in `load'\n/home/sam/.rbenv/versions/2.4.0/bin/bundle:22:in `&lt;main&gt;'\n(See full trace by running task with --trace)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "oop"], "comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 1, "creation_date": 1484672337, "post_id": 41702712, "comment_id": 70601506, "body": "If you have those objects on subscription plan, then why don&#39;t you use a relation and delegate to the subscription plan when needed?"}, {"owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "edited": false, "score": 0, "creation_date": 1484673289, "post_id": 41702712, "comment_id": 70602084, "body": "How about simply changing the method names, for example create_stripe_subscript(ss)"}, {"owner": {"reputation": 11144, "user_id": 328294, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fbbd46a6f03489e1724c2dbf50c6a98c?s=128&d=identicon&r=PG", "display_name": "pixelearth", "link": "https://stackoverflow.com/users/328294/pixelearth"}, "reply_to_user": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1484673493, "post_id": 41702712, "comment_id": 70602191, "body": "@j-dexx In this case because I need to keep a record of the subscription_plan details at the time of subscription creation, since they will potentially change in the future as I find the right price. But any subscription already started needs to know how to renew itself and what the specs were for itself alone."}, {"owner": {"reputation": 1829, "user_id": 1442966, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2347a5fea07665538a73887817f30b85?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/1442966/edward"}, "edited": false, "score": 0, "creation_date": 1484678371, "post_id": 41702712, "comment_id": 70604888, "body": "If subscription plan is a relation, maybe you can try clean that up with nested attributes? Then you don&#39;t need to write any setter, you can just pass in the attributes all at once during creation. edit: Rails 4+ only"}], "answers": [{"tags": [], "owner": {"reputation": 429, "user_id": 7330717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68889267ed07fb0862d54dee957e3865?s=128&d=identicon&r=PG&f=1", "display_name": "MSathieu", "link": "https://stackoverflow.com/users/7330717/msathieu"}, "is_accepted": false, "score": 1, "last_activity_date": 1484676106, "creation_date": 1484676106, "answer_id": 41703971, "question_id": 41702712, "link": "https://stackoverflow.com/questions/41702712/is-there-an-industry-standard-for-setting-multiple-object-attributes-at-once/41703971#41703971", "title": "Is there an industry standard for setting multiple object attributes at once?", "body": "<p>You can use <code>assign_attributes(duration: sp.duration, num_lessons: sp.num_lessons)</code>.</p>\n"}], "owner": {"reputation": 11144, "user_id": 328294, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fbbd46a6f03489e1724c2dbf50c6a98c?s=128&d=identicon&r=PG", "display_name": "pixelearth", "link": "https://stackoverflow.com/users/328294/pixelearth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1484676106, "creation_date": 1484672042, "question_id": 41702712, "link": "https://stackoverflow.com/questions/41702712/is-there-an-industry-standard-for-setting-multiple-object-attributes-at-once", "title": "Is there an industry standard for setting multiple object attributes at once?", "body": "<p>In my rails models, I sometimes overwrite a single attribute setter, so that it sets more than one attribute like so:</p>\n\n<pre><code>class UserSubscription &lt; ActiveRecord::Base\n\n  # multi setter!\n  def subscription_plan=(sp)\n    self.duration                      = sp.duration\n    self.num_lessons                   = sp.num_lessons\n    self.checkout_active_duration_days = sp.checkout_active_duration_days\n    self.num_collaborators_can_have    = sp.num_collaborators\n    super sp\n  end\n\n  # multi setter!\n  def stripe_subscription=(ss)\n    self.stripe_subscription_id  = ss.id\n    self.current_period_start    = UserSubscription.stripe_stamp_to_datetime(ss.current_period_start)\n    self.current_period_end      = UserSubscription.stripe_stamp_to_datetime(ss.current_period_end)\n  end\n\nend\n</code></pre>\n\n<p>While initially I thought this was kind of clever, over time (years) I've felt that the lack of transparency this gives my older code makes me feel uneasy.</p>\n\n<p>So I've toyed around with not \"overwriting/overloading\" but specifically calling these methods #set_attrs_by_subscription_plan, or something similar. This feels more bulky and somewhat cumbersome by comparison, but there is less smoke and mirrors.</p>\n\n<p>It occurs to me that this must be something that others have dealt with, and maybe even something that has a name. There might even be an industry standard for accomplishing this, or a design pattern.</p>\n\n<p>Does anyone out there have suggestions / recommendations for me?</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 6, "creation_date": 1484669185, "post_id": 41701759, "comment_id": 70599400, "body": "<code>conversation.messages</code> must be empty and therefore <code>first</code> returns <code>nil</code>"}], "answers": [{"tags": [], "owner": {"reputation": 778, "user_id": 490148, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/fdf74175f7ff2d2ff2c03c10ca2bce39?s=128&d=identicon&r=PG", "display_name": "virtuexru", "link": "https://stackoverflow.com/users/490148/virtuexru"}, "is_accepted": true, "score": 1, "last_activity_date": 1484670968, "last_edit_date": 1495539948, "creation_date": 1484670968, "answer_id": 41702345, "question_id": 41701759, "link": "https://stackoverflow.com/questions/41701759/undefined-method-for-nilnilclass-when-using-time-ago-in-words-in-rails/41702345#41702345", "title": "undefined method `&gt;&#39; for nil:NilClass when using &#39;time_ago_in_words&#39; in Rails", "body": "<p><a href=\"https://stackoverflow.com/users/308731/iceman\">Iceman</a> hit the nail on the head.</p>\n\n<p>In your <code>&lt;li&gt;</code> make sure that <code>conversation.message</code> exists before calling <code>.first</code> on it; otherwise <code>.first</code> will just return <code>nil</code>.</p>\n"}], "owner": {"reputation": 346, "user_id": 6262955, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0zciE.png?s=128&g=1", "display_name": "Norman Chan", "link": "https://stackoverflow.com/users/6262955/norman-chan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 41702345, "answer_count": 1, "score": -1, "last_activity_date": 1484670968, "creation_date": 1484669030, "question_id": 41701759, "link": "https://stackoverflow.com/questions/41701759/undefined-method-for-nilnilclass-when-using-time-ago-in-words-in-rails", "title": "undefined method `&gt;&#39; for nil:NilClass when using &#39;time_ago_in_words&#39; in Rails", "body": "<p>I'm getting a strange error when trying to use the 'time_ago_in_words' function on conversation.messages.first(created_at) in rails:</p>\n\n<pre><code>&lt;% conversations.each do |conversation| %&gt;\n  &lt;% user_status = current_user.id == conversation.sender.id ? conversation.recipient : conversation.sender %&gt;\n  &lt;li&gt;\n    &lt;%= gravatar_for(user_status, size: 50) %&gt;\n    &lt;%= link_to user_status.email, conversation_messages_path(conversation),\n        remote: true,\n        class: \"conversation-names #{'current-link' if conversation == conversations.first}\" %&gt;\n    &lt;span class=\"delete-message\"&gt;&lt;%= link_to do %&gt;&lt;i class=\"fa fa-times\"&gt;&lt;/i&gt;&lt;% end %&gt;&lt;/span&gt;\n    &lt;p&gt;&lt;%= truncate(conversation.messages.first.try(:body)) %&gt;&lt;%= time_ago_in_words conversation.messages.first.try(:created_at) %&gt;&lt;/p&gt;\n  &lt;/li&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>undefined method `>' for nil:NilClass.  </p>\n"}, {"tags": ["arrays", "ruby", "null", "attributes"], "comments": [{"owner": {"reputation": 19411, "user_id": 6640099, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/tf1sO.jpg?s=128&g=1", "display_name": "Christian Dean", "link": "https://stackoverflow.com/users/6640099/christian-dean"}, "edited": false, "score": 0, "creation_date": 1484669095, "post_id": 41701716, "comment_id": 70599346, "body": "Do you want to filter out the objects with <code>nil</code> <code>att1</code>&#39;s?"}], "answers": [{"comments": [{"owner": {"reputation": 1829, "user_id": 1442966, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2347a5fea07665538a73887817f30b85?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/1442966/edward"}, "edited": false, "score": 0, "creation_date": 1484675828, "post_id": 41701744, "comment_id": 70603459, "body": "I like this answer better because of the readability. It is reading like exactly what it is supposed to do."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 7, "last_activity_date": 1484668959, "creation_date": 1484668959, "answer_id": 41701744, "question_id": 41701716, "link": "https://stackoverflow.com/questions/41701716/how-do-i-check-that-every-object-in-my-ruby-array-has-a-nil-attribute/41701744#41701744", "title": "How do I check that every object in my Ruby array has a nil attribute?", "body": "<p>Try something like this</p>\n\n<pre><code>my_arr.all? { |my_obj| my_obj.attr1.nil? }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1484669283, "post_id": 41701819, "comment_id": 70599454, "body": "What about <code>array.map(&amp;:attr1).all?(&amp;:itself)</code>?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1484669320, "post_id": 41701819, "comment_id": 70599469, "body": "@Ursus awesome idea, absolutely"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 1, "creation_date": 1484669759, "post_id": 41701819, "comment_id": 70599757, "body": "Cool, even better the last one :)"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1484670398, "post_id": 41701819, "comment_id": 70600224, "body": "@Ursus I realized I should have used <code>none?</code> rather then <code>all?</code> :)"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1484670453, "post_id": 41701819, "comment_id": 70600257, "body": "Yes. At one point that was not what the user asked :D Now it&#39;s correct"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1484670850, "post_id": 41701819, "comment_id": 70600501, "body": "@ndn actually added this note before seeing your comment :)"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1484670850, "post_id": 41701819, "comment_id": 70600502, "body": "Also why make it more complicated than needed. You could have done <code>array.map(&amp;:attr1).map(&amp;:itself).map(&amp;:itself).map(&amp;:itself)&zwnj;&#8203;.none?(&amp;:itself)</code> as well, but <code>array.none?(&amp;:attr1)</code> is exactly what you wanted."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1484670861, "post_id": 41701819, "comment_id": 70600506, "body": "@ndn my first solution does differentiate between <code>nil</code> and <code>false</code>, though"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 1, "last_activity_date": 1484670901, "last_edit_date": 1484670901, "creation_date": 1484669223, "answer_id": 41701819, "question_id": 41701716, "link": "https://stackoverflow.com/questions/41701716/how-do-i-check-that-every-object-in-my-ruby-array-has-a-nil-attribute/41701819#41701819", "title": "How do I check that every object in my Ruby array has a nil attribute?", "body": "<h1>TL;DR</h1>\n\n<blockquote>\n  <p>How do I check that every object in the array contains a <code>nil</code> value for\n  <code>attr1</code>?</p>\n</blockquote>\n\n<pre><code>array\n  .map(&amp;:attr1) # maps by attr1\n  .compact      # removes nil values from collection\n  .empty?       # checks, whether array is empty\n</code></pre>\n\n<hr>\n\n<h2>Note, that the below does not differentiate between <code>false</code> and <code>nil</code> values.</h2>\n\n<p><a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-none-3F\" rel=\"nofollow noreferrer\">Enumerable#<code>none?</code></a>:</p>\n\n<blockquote>\n  <p>The method returns <code>true</code> if the block never returns <code>true</code> for all\n  elements. If the block is not given, <code>none?</code> will return <code>true</code> only if\n  none of the collection members is <code>true</code>.</p>\n</blockquote>\n\n<p>It can be shortened to just</p>\n\n<pre><code>array.map(&amp;:attr1).none?\n</code></pre>\n\n<p>Or even shorter (<em>I bet this is the shortest one possible :D (without crazy metaprogramming)</em>)</p>\n\n<pre><code>array.none?(&amp;:attr1)\n</code></pre>\n\n<p>which basically checks, whether none of the <code>object.attr1</code> is truthy. </p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": -1, "last_activity_date": 1484680213, "last_edit_date": 1484680213, "creation_date": 1484679166, "answer_id": 41704783, "question_id": 41701716, "link": "https://stackoverflow.com/questions/41701716/how-do-i-check-that-every-object-in-my-ruby-array-has-a-nil-attribute/41704783#41704783", "title": "How do I check that every object in my Ruby array has a nil attribute?", "body": "<p>The simplest thing is to use <code>none?</code> when you want to know if all values are <code>nil</code>:</p>\n\n<pre><code>[nil, nil].none? # =&gt; true\n[true, nil].none? # =&gt; false\n</code></pre>\n\n<p>Or you can use <code>any?</code> and toggle the boolean result:</p>\n\n<pre><code>![nil, nil].any? # =&gt; true\n![true, nil].any? # =&gt; false\n</code></pre>\n\n<p>Extending that to fit your object:</p>\n\n<pre><code>class MyData\n  def initialize(b)\n    @attr1 = b\n  end\n\n  def attr1\n    @attr1\n  end\nend\n\nobj1 = MyData.new(nil)\nobj2 = MyData.new(true)\n\n[obj1, obj1].none?(&amp;:attr1) # =&gt; true\n[obj1, obj2].none?(&amp;:attr1) # =&gt; false\n</code></pre>\n\n<p>This will break down if you can have <code>false</code> values and want to consider them different than <code>nil</code> because <code>none?</code> considers <code>nil</code> and <code>false</code> values the same:</p>\n\n<pre><code>[false].none? # =&gt; true\n</code></pre>\n\n<p>(<code>any?</code> and <code>all?</code> also get fooled by the truthiness of a value.)</p>\n\n<p>To work around that I'd add a method to the class that tests whether that attribute is actually <code>nil</code>:</p>\n\n<pre><code>def nil?\n  @attr1.nil?\nend\n</code></pre>\n\n<p>Then something using <code>all?</code> works:</p>\n\n<pre><code>obj3 = MyData.new(false)\n[obj1, obj1].all?(&amp;:nil?) # =&gt; true\n[obj1, obj2].all?(&amp;:nil?) # =&gt; false\n[obj1, obj2, obj3].all?(&amp;:nil?) # =&gt; false\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 376, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1484680213, "creation_date": 1484668881, "last_edit_date": 1484670007, "question_id": 41701716, "link": "https://stackoverflow.com/questions/41701716/how-do-i-check-that-every-object-in-my-ruby-array-has-a-nil-attribute", "title": "How do I check that every object in my Ruby array has a nil attribute?", "body": "<p>I'm using Ruby 2.4.  Let's say I have an array of <code>MyData</code> instances. Each object has an attribute <code>attr1</code>.  Given my array</p>\n\n<pre><code>array = [myobj1, myobj2, myobj3]\n</code></pre>\n\n<p>How do I check that every object in the array contains a <code>nil</code> value for <code>attr1</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "metaprogramming"], "answers": [{"comments": [{"owner": {"reputation": 481, "user_id": 1912116, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2ce8b4171713c233017069115f263bf7?s=128&d=identicon&r=PG", "display_name": "petkov.np", "link": "https://stackoverflow.com/users/1912116/petkov-np"}, "edited": false, "score": 3, "creation_date": 1484668159, "post_id": 41701267, "comment_id": 70598679, "body": "From the <a href=\"http://guides.rubyonrails.org/action_controller_overview.html#hash-and-array-parameters\" rel=\"nofollow noreferrer\">rails docs</a>: &quot;The params object acts like a Hash, but lets you use symbols and strings interchangeably as keys.&quot;"}], "tags": [], "owner": {"reputation": 3796, "user_id": 3686898, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IvIuI.jpg?s=128&g=1", "display_name": "Philipp Meissner", "link": "https://stackoverflow.com/users/3686898/philipp-meissner"}, "is_accepted": false, "score": 0, "last_activity_date": 1484667637, "creation_date": 1484667637, "answer_id": 41701267, "question_id": 41701068, "link": "https://stackoverflow.com/questions/41701068/error-while-iterating-through-params/41701267#41701267", "title": "Error while iterating through params", "body": "<p>You're calling your <code>params</code> with a <em>symbol</em> but instead you should use a <em>string</em>.</p>\n\n<p>This means you should use one of the following approaches:</p>\n\n<p><code>params[\"test\"][\"task0\"]</code>\nor\n<code>params[:test.to_s][:task0.to_s]</code></p>\n\n<p>Hope that helped :)</p>\n"}, {"comments": [{"owner": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "edited": false, "score": 0, "creation_date": 1484668944, "post_id": 41701633, "comment_id": 70599239, "body": "Worth mentioning that the string interpolation will not work with symbol directly"}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 3, "last_activity_date": 1484668672, "creation_date": 1484668672, "answer_id": 41701633, "question_id": 41701068, "link": "https://stackoverflow.com/questions/41701068/error-while-iterating-through-params/41701633#41701633", "title": "Error while iterating through params", "body": "<p>You want to index with dynamic key, not call a method dynamically. Aka:</p>\n\n<pre><code>params[:test][\"task#{index}\"]\n</code></pre>\n\n<p>Should do. Note that params are have indifferent access for strings and symbols.</p>\n\n<hr>\n\n<p>To give you more food for thought, here is how you might have done the same with <code>#send</code>:</p>\n\n<pre><code>params[:test].send(:[], \"task#{index}\")\n</code></pre>\n\n<p>And here is how to define a method that would have the name you are trying to call:</p>\n\n<pre><code>define_method(\"params[:test][:task#{index}]\") do\n  puts 'WTF'\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 621, "user_id": 1690384, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4187ec71a8ae5536ad9c319cb5535d14?s=128&d=identicon&r=PG", "display_name": "Junan Chakma", "link": "https://stackoverflow.com/users/1690384/junan-chakma"}, "is_accepted": false, "score": 0, "last_activity_date": 1484668691, "creation_date": 1484668691, "answer_id": 41701643, "question_id": 41701068, "link": "https://stackoverflow.com/questions/41701068/error-while-iterating-through-params/41701643#41701643", "title": "Error while iterating through params", "body": "<p>You should use params object something like<code>params[:test][:task])</code> instead of <code>send(\"params[:test][:task#{index}]\"</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6052428"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 41701633, "answer_count": 3, "score": 0, "last_activity_date": 1484669223, "creation_date": 1484667103, "last_edit_date": 1484669223, "question_id": 41701068, "link": "https://stackoverflow.com/questions/41701068/error-while-iterating-through-params", "title": "Error while iterating through params", "body": "<p>I get an error when I try to iterate through params</p>\n\n<p>When running code below: </p>\n\n<pre><code>def create_score\n  @quiz = Test.find_by(password: session[:test_password])\n  @points = 0\n  @quiz.tasks.each_with_index do |task, index|\n    @task = Task.find_by(id: task)\n    @points += @task.score if @task.correct_answers.to_s == send(\"params[:test][:task#{index}]\")\n  end\n  @score = Score.new(user_id: 2, name: \"Test1\", points: @points)\n  if @score.save\n    redirect_to root_url\n  else\n    redirect_to signup_path\n  end\nend\n</code></pre>\n\n<p>I get:</p>\n\n<pre><code>undefined method `params[:test][:task0]' ...\n</code></pre>\n\n<p>at the</p>\n\n<pre><code>@points += @task.score if @task.correct_answers.to_s == send(\"params[:test][:task#{index}]\")\n</code></pre>\n\n<p>Which means that it has problem with <code>send</code> method</p>\n\n<p>Parameters look like this:</p>\n\n<pre><code>{\"utf8\"=&gt;\"\u2713\",\n \"authenticity_token\"=&gt;\"8h7rtv2yWio11DFo6kBKutdZl7RDBBaTrt7e8qel8fR5R5XsoXRhRrBeDQPPoZeuBlZ7N5PmqCxik06Z/gQLZQ==\",\n \"test\"=&gt;{\"task0\"=&gt;[\"4\"], \"task1\"=&gt;[\"0\"], \"task2\"=&gt;[\"10\"]},\n \"commit\"=&gt;\"Zako\u0144cz test\",\n \"locale\"=&gt;\"pl\"}\n</code></pre>\n\n<p>Which means that there is <code>params[:test][:task0]</code>, but still for some reason it fires an error, but I don't really know why. Any ideas why this happens?</p>\n"}, {"tags": ["ruby", "loops", "xpath", "nokogiri"], "comments": [{"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 2, "creation_date": 1484675069, "post_id": 41701058, "comment_id": 70603094, "body": "Please include text as text rather than images.  If the text would be too long, then figure out what minimal subset of the text is needed and include that."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1484763116, "post_id": 41701058, "comment_id": 70647556, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages, along with &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Images don&#39;t help us unless the question is about graphics. For source and data we need the minimal code and minimal data that demonstrate the problem, along with your desired output, all in the question, not as a link or an image. We can&#39;t reuse images and can&#39;t search on them, and have to retype code or data presented as images, which wastes our time and delays answers to you. And, honestly, a lot of potential answerers won&#39;t even try to help if you use images."}, {"owner": {"reputation": 131, "user_id": 6743057, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-FaIDrFXrlRU/AAAAAAAAAAI/AAAAAAAA6Qg/oE8tu_AVt94/photo.jpg?sz=128", "display_name": "Chlodwig Radulf", "link": "https://stackoverflow.com/users/6743057/chlodwig-radulf"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1484822260, "post_id": 41701058, "comment_id": 70672229, "body": "@theTinMan, thanks for your comment, ok i will try to do so in my next questions!"}], "answers": [{"tags": [], "owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "is_accepted": true, "score": 1, "last_activity_date": 1484714031, "creation_date": 1484714031, "answer_id": 41711405, "question_id": 41701058, "link": "https://stackoverflow.com/questions/41701058/how-to-get-text-between-two-divs-in-ruby-nokogiri/41711405#41711405", "title": "How to get text between two divs in ruby nokogiri?", "body": "<p>Try this</p>\n\n<pre><code>between = doc.at('#block777').children\n    .drop_while { |each| each.to_s !~ /line.gif/ }\n    .drop(1) \n    .take_while { |each| each.to_s !~ /line.gif/ }\n</code></pre>\n\n<p>This skips children until the first line is found, and then skips that line, and then gets all children until another lines is found. </p>\n"}], "owner": {"reputation": 131, "user_id": 6743057, "user_type": "registered", "accept_rate": 60, "profile_image": "https://lh6.googleusercontent.com/-FaIDrFXrlRU/AAAAAAAAAAI/AAAAAAAA6Qg/oE8tu_AVt94/photo.jpg?sz=128", "display_name": "Chlodwig Radulf", "link": "https://stackoverflow.com/users/6743057/chlodwig-radulf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 142, "favorite_count": 0, "accepted_answer_id": 41711405, "answer_count": 1, "score": -1, "last_activity_date": 1484822359, "creation_date": 1484667079, "last_edit_date": 1484822359, "question_id": 41701058, "link": "https://stackoverflow.com/questions/41701058/how-to-get-text-between-two-divs-in-ruby-nokogiri", "title": "How to get text between two divs in ruby nokogiri?", "body": "<p>I want to parse the text, that is between two horizontal_lines .</p>\n\n<p>It should be the text between the first and the second of this horizontal line.</p>\n\n<p>I would like to use the ruby gem 'nokogiri', not necessarily by using xpath.</p>\n\n<pre><code>url = \"http://calendar.rop.ru/?idd=167\"\npage = Nokogiri::HTML(open(url), nil, 'utf-8' )\n</code></pre>\n\n<p>My(failing)try:</p>\n\n<p>I thought of an iteration to find the first ant the second line in the div  with the id=\"block777\" </p>\n\n<pre><code>i=2 # because from then on the 1.st line starts \nuntil /src=\\\"img\\/line.gif\\\"/ =~ extract \ni += 1; extract = page.xpath('//div[@id=\"block777\"]/div[position()='+i.to_s+']').inner_html` \nputs extract\n</code></pre>\n\n<p>some more aspects:</p>\n\n<ul>\n<li><p>the link to the site: <a href=\"http://calendar.rop.ru/?idd=167\" rel=\"nofollow noreferrer\">\u041f\u0440\u0430\u0432\u043e\u0441\u043b\u0430\u0432\u043d\u044b\u0439 \u043a\u0430\u043b\u0435\u043d\u0434\u0430\u0440\u044c 2016</a></p></li>\n<li><p>the interesting part(I want to get) of the page is in the <code>div</code> with the <code>id=\"block777\"</code></p></li>\n<li><p>a horizontal_line is in this html text:</p></li>\n</ul>\n\n<p><code>&lt;div style=\"border:0px solid silver; width:100%; height:10px; margin:2px;\"&gt;&lt;img src=\"img/line.gif\" style=\"width:100%; height:1px; margin-top:4px;\"&gt;&lt;/div&gt;</code></p>\n\n<ul>\n<li>I would like to Iterate through the page and then to get the content, till I reach the next horizontal_line.</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1484667848, "post_id": 41701039, "comment_id": 70598472, "body": "Why are you not following Rails&#39;s conventions with a simple <code>destroy</code> method in the controller?"}, {"owner": {"reputation": 13, "user_id": 1705853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3cf2794c59f0848e302e85878c8f38a?s=128&d=identicon&r=PG", "display_name": "The Impaler", "link": "https://stackoverflow.com/users/1705853/the-impaler"}, "reply_to_user": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1484710394, "post_id": 41701039, "comment_id": 70617180, "body": "<code>destroy</code> would delete the entire object whereas I would just like to delete its &#39;name&#39; attribute."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 1705853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3cf2794c59f0848e302e85878c8f38a?s=128&d=identicon&r=PG", "display_name": "The Impaler", "link": "https://stackoverflow.com/users/1705853/the-impaler"}, "edited": false, "score": 0, "creation_date": 1484710288, "post_id": 41703046, "comment_id": 70617154, "body": "Thanks Kasper that worked! I assumed the dog hash key would have to follow the @dog object on the page. But since we have already specified the dog_path() it just knows how to look for the currently dog object that we are at?"}, {"owner": {"reputation": 1163, "user_id": 1826058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4182d58570b11f50ad0baf667b80300?s=128&d=identicon&r=PG", "display_name": "kaspernj", "link": "https://stackoverflow.com/users/1826058/kaspernj"}, "reply_to_user": {"reputation": 13, "user_id": 1705853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3cf2794c59f0848e302e85878c8f38a?s=128&d=identicon&r=PG", "display_name": "The Impaler", "link": "https://stackoverflow.com/users/1705853/the-impaler"}, "edited": false, "score": 0, "creation_date": 1484811482, "post_id": 41703046, "comment_id": 70665896, "body": "You cannot use an instance variable that way. The key must always be a valid symbol when using &quot;:&quot;. If you used rockets, then you could have used your instance variable, but then the key would be set to the value of the instance variable, which isn&#39;t what you want either.  I have updated my original answer, so that you can see an example of this behaviour."}, {"owner": {"reputation": 13, "user_id": 1705853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3cf2794c59f0848e302e85878c8f38a?s=128&d=identicon&r=PG", "display_name": "The Impaler", "link": "https://stackoverflow.com/users/1705853/the-impaler"}, "edited": false, "score": 0, "creation_date": 1484839013, "post_id": 41703046, "comment_id": 70683350, "body": "Thanks so much for the explanation Kasper that really helped!"}], "tags": [], "owner": {"reputation": 1163, "user_id": 1826058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4182d58570b11f50ad0baf667b80300?s=128&d=identicon&r=PG", "display_name": "kaspernj", "link": "https://stackoverflow.com/users/1826058/kaspernj"}, "is_accepted": true, "score": 0, "last_activity_date": 1484811624, "last_edit_date": 1484811624, "creation_date": 1484672980, "answer_id": 41703046, "question_id": 41701039, "link": "https://stackoverflow.com/questions/41701039/rails-5-how-to-set-an-objects-attributes-using-link-to-without-any-controller/41703046#41703046", "title": "Rails 5: How to set an object&#39;s attributes using link_to, without any controllers", "body": "<pre><code>&lt;%= link_to 'Delete Name', dog_path(@dog:{name: nil}), method: :patch %&gt;\n</code></pre>\n\n<p>Does indeed have a syntax error. You have a @ before your hash key called dog. It should be:</p>\n\n<pre><code>&lt;%= link_to 'Delete Name', dog_path(dog:{name: nil}), method: :patch %&gt;\n</code></pre>\n\n<p>You don't want to use the instance variable as the key for a hash, because that would set the value of the instance variable as the key. See this example:</p>\n\n<pre><code>2.3.3 :001 &gt; @instance_variable = \"test\"\n =&gt; \"test\"\n2.3.3 :002 &gt; {@instance_variable =&gt; \"value\"}\n =&gt; {\"test\"=&gt;\"value\"}\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 1705853, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3cf2794c59f0848e302e85878c8f38a?s=128&d=identicon&r=PG", "display_name": "The Impaler", "link": "https://stackoverflow.com/users/1705853/the-impaler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 170, "favorite_count": 0, "accepted_answer_id": 41703046, "answer_count": 1, "score": 1, "last_activity_date": 1484811624, "creation_date": 1484667000, "question_id": 41701039, "link": "https://stackoverflow.com/questions/41701039/rails-5-how-to-set-an-objects-attributes-using-link-to-without-any-controller", "title": "Rails 5: How to set an object&#39;s attributes using link_to, without any controllers", "body": "<p>I am trying to update an object titled Dog which has the attribute name. I wish to do so with using any controller methods, currently I am trying this:</p>\n\n<p><code>&lt;%= link_to 'Delete Name', dog_path(@dog:{name: nil}), method: :patch %&gt;</code></p>\n\n<p>This keeps giving me a syntax error but I've tried everything I can.</p>\n\n<p>Also, I am aware that it is possible to define a function (in this case titled \"delete_name\") in the controller and use the following:</p>\n\n<p><code>&lt;%= link_to 'Delete Name', controller: \"dogs\", action: \"delete_name\", id: @dog %&gt;</code></p>\n\n<p>But I wish to use the first method. Any help is appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "is_accepted": true, "score": 6, "last_activity_date": 1484671104, "last_edit_date": 1484671104, "creation_date": 1484665547, "answer_id": 41700508, "question_id": 41700482, "link": "https://stackoverflow.com/questions/41700482/vs-in-ruby/41700508#41700508", "title": "&lt;%=%&gt; vs &lt;%%&gt; in Ruby", "body": "<p><code>&lt;% %&gt;</code> will evaluate the code, but will not print the output.</p>\n\n<p><code>&lt;%= %&gt;</code> will evaluate the code AND print the output.</p>\n"}], "owner": {"reputation": 15683, "user_id": 6523163, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/qUURJ.jpg?s=128&g=1", "display_name": "aircraft", "link": "https://stackoverflow.com/users/6523163/aircraft"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3833, "favorite_count": 0, "closed_date": 1484665538, "accepted_answer_id": 41700508, "answer_count": 1, "score": -3, "last_activity_date": 1484671104, "creation_date": 1484665449, "last_edit_date": 1495539932, "question_id": 41700482, "link": "https://stackoverflow.com/questions/41700482/vs-in-ruby", "closed_reason": "Duplicate", "title": "&lt;%=%&gt; vs &lt;%%&gt; in Ruby", "body": "<p>I have a form in ruby html:</p>\n\n<pre><code>&lt;%= form_for :article do |f| %&gt;\n&lt;p&gt;\n  &lt;%= f.label :title %&gt;&lt;br&gt;\n  &lt;%= f.text_field :title %&gt;\n&lt;/p&gt;\n&lt;p&gt;\n  &lt;%= f.label :text %&gt;&lt;br&gt;\n  &lt;%= f.text_area :text %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;%= f.submit %&gt;\n&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<hr>\n\n<p><strong>Attention</strong></p>\n\n<p>The last line of code:<code>&lt;% end %&gt;</code>, why it is not <code>&lt;%= end %&gt;</code>?</p>\n\n<p>whats the different function with them? and if use <code>&lt;%= end %&gt;</code>, there will get this <a href=\"https://stackoverflow.com/questions/23379862/rails-syntax-unexpected-keyword-do-block\">syntax error</a>.</p>\n"}, {"tags": ["ruby", "regex", "string", "split", "literals"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1484665525, "post_id": 41700342, "comment_id": 70596845, "body": "It is not very clear, but you may try either <code>.split(&#47;(?&lt;!\\\\)\\s+&#47;)</code> or <code>.scan(&#47;(?:[^\\\\\\s]|\\\\.)+&#47;)</code>. I&#39;d rather prefer the <code>scan</code> option."}, {"owner": {"reputation": 804, "user_id": 697745, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4c84733ec3e140af306dcd5a540594f0?s=128&d=identicon&r=PG", "display_name": "Dol", "link": "https://stackoverflow.com/users/697745/dol"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1484665687, "post_id": 41700342, "comment_id": 70596977, "body": "Apologies if its not clear, I&#39;ll update with more info now. I couldn&#39;t get your examples to output what I want - I&#39;ll improve the clarity of my question - Thanks"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1484666132, "post_id": 41700342, "comment_id": 70597299, "body": "Look <a href=\"https://ideone.com/VUd5GV\" rel=\"nofollow noreferrer\">here</a>."}, {"owner": {"reputation": 5998, "user_id": 3889043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrDMd.jpg?s=128&g=1", "display_name": "mrlew", "link": "https://stackoverflow.com/users/3889043/mrlew"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1484666218, "post_id": 41700342, "comment_id": 70597373, "body": "@WiktorStribi\u017cew suggestions is correct. Try it here: <a href=\"http://rubular.com/r/NPxmm8PfqB\" rel=\"nofollow noreferrer\">rubular.com/r/NPxmm8PfqB</a>"}, {"owner": {"reputation": 804, "user_id": 697745, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4c84733ec3e140af306dcd5a540594f0?s=128&d=identicon&r=PG", "display_name": "Dol", "link": "https://stackoverflow.com/users/697745/dol"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1484666227, "post_id": 41700342, "comment_id": 70597383, "body": "@WiktorStribi\u017cew your examples do work, apologies, I was running them with double quotes (<code>&quot;&quot;</code>) rather than single - my bad!"}, {"owner": {"reputation": 804, "user_id": 697745, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4c84733ec3e140af306dcd5a540594f0?s=128&d=identicon&r=PG", "display_name": "Dol", "link": "https://stackoverflow.com/users/697745/dol"}, "edited": false, "score": 0, "creation_date": 1484666337, "post_id": 41700342, "comment_id": 70597459, "body": "Is there a way we can get rid of the \\ in the Four\\ Five? (without using <code>gsub</code> afterwards). If so put your comment as an answer and i&#39;ll mark it correct."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1484666383, "post_id": 41700342, "comment_id": 70597494, "body": "No, if you match it, it will be part of the match."}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1484715622, "post_id": 41700342, "comment_id": 70618513, "body": "Just use <code>shellwords</code> feature."}, {"owner": {"reputation": 804, "user_id": 697745, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4c84733ec3e140af306dcd5a540594f0?s=128&d=identicon&r=PG", "display_name": "Dol", "link": "https://stackoverflow.com/users/697745/dol"}, "edited": false, "score": 0, "creation_date": 1484731658, "post_id": 41700342, "comment_id": 70626021, "body": "It is a duplicate, good spot - the original is recent too. I&#39;ll sort it accordingly."}], "answers": [{"comments": [{"owner": {"reputation": 804, "user_id": 697745, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4c84733ec3e140af306dcd5a540594f0?s=128&d=identicon&r=PG", "display_name": "Dol", "link": "https://stackoverflow.com/users/697745/dol"}, "edited": false, "score": 0, "creation_date": 1484666906, "post_id": 41700797, "comment_id": 70597844, "body": "Thanks for the examples :)"}], "tags": [], "owner": {"reputation": 9384, "user_id": 761132, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/fa462ba2bc6318a8b2e7662bb8e91aa1?s=128&d=identicon&r=PG", "display_name": "Rizwan M.Tuman", "link": "https://stackoverflow.com/users/761132/rizwan-m-tuman"}, "is_accepted": false, "score": 1, "last_activity_date": 1484666377, "creation_date": 1484666377, "answer_id": 41700797, "question_id": 41700342, "link": "https://stackoverflow.com/questions/41700342/split-string-by-whitespaces-ignoring-escaped-whitespaces/41700797#41700797", "title": "Split string by whitespaces, ignoring escaped whitespaces", "body": "<p>You can try this:</p>\n\n<pre><code>(?&lt;!\\\\)\\s+\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/MOtysr/1\" rel=\"nofollow noreferrer\">Explanation</a></p>\n\n<p>sample:</p>\n\n<pre><code>a='one two three four\\ five';\nb=a.split(/(?&lt;!\\\\)\\s+/);\nprint(b);\n</code></pre>\n\n<p><a href=\"http://ideone.com/NzLEDW\" rel=\"nofollow noreferrer\">Run here</a></p>\n"}, {"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1484666472, "creation_date": 1484666472, "answer_id": 41700827, "question_id": 41700342, "link": "https://stackoverflow.com/questions/41700342/split-string-by-whitespaces-ignoring-escaped-whitespaces/41700827#41700827", "title": "Split string by whitespaces, ignoring escaped whitespaces", "body": "<p>If your strings have no escape sequences, you may use a splitting approach with</p>\n\n<pre><code>.split(/(?&lt;!\\\\)\\s+/)\n</code></pre>\n\n<p>Here, <code>(?&lt;!\\\\)\\s+</code> matches 1+ whitespaces (<code>\\s+</code>) that are not preceded with <code>\\</code>.</p>\n\n<p>If your strings may contain escape sequences, a <em>matching</em> approach is preferable as it is more reliable:</p>\n\n<pre><code>.scan(/(?:[^\\\\\\s]|\\\\.)+/)\n</code></pre>\n\n<p>See the <a href=\"https://ideone.com/VUd5GV\" rel=\"nofollow noreferrer\">Ruby demo</a>.</p>\n\n<p>It will match 1 or more characters other than <code>\\</code> and whitespace (with <code>[^\\\\\\s]</code>) and any escape sequence (matched with <code>\\\\.</code>, a backslash + any char other than line break chars).</p>\n\n<p>To get rid of <code>\\</code> symbols, you will have to use a <code>gsub</code> later.</p>\n"}, {"comments": [{"owner": {"reputation": 804, "user_id": 697745, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4c84733ec3e140af306dcd5a540594f0?s=128&d=identicon&r=PG", "display_name": "Dol", "link": "https://stackoverflow.com/users/697745/dol"}, "edited": false, "score": 0, "creation_date": 1484731412, "post_id": 41711667, "comment_id": 70625844, "body": "This is great! Thanks"}], "tags": [], "owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "is_accepted": false, "score": 1, "last_activity_date": 1484715607, "creation_date": 1484715607, "answer_id": 41711667, "question_id": 41700342, "link": "https://stackoverflow.com/questions/41700342/split-string-by-whitespaces-ignoring-escaped-whitespaces/41711667#41711667", "title": "Split string by whitespaces, ignoring escaped whitespaces", "body": "<p>Try this</p>\n\n<pre><code>require 'shellwords'\n\n'one two three four\\ five'.shellsplit\n# =&gt; [\"one\", \"two\", \"three\", \"four five\"]\n</code></pre>\n\n<p>No need for a regexp.</p>\n"}], "owner": {"reputation": 804, "user_id": 697745, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/4c84733ec3e140af306dcd5a540594f0?s=128&d=identicon&r=PG", "display_name": "Dol", "link": "https://stackoverflow.com/users/697745/dol"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 946, "favorite_count": 0, "closed_date": 1484731751, "accepted_answer_id": 41700827, "answer_count": 3, "score": 3, "last_activity_date": 1484715607, "creation_date": 1484665146, "last_edit_date": 1484665930, "question_id": 41700342, "link": "https://stackoverflow.com/questions/41700342/split-string-by-whitespaces-ignoring-escaped-whitespaces", "closed_reason": "Duplicate", "title": "Split string by whitespaces, ignoring escaped whitespaces", "body": "<p>I've been using the <a href=\"https://ruby-doc.org/core-2.4.0/doc/syntax/literals_rdoc.html#label-Percent+Strings\" rel=\"nofollow noreferrer\">Percentage Strings Literal</a> to convert strings like <code>\"one two three four\\ five\"</code> into an array.</p>\n\n<pre><code>%w(one two three four\\ five)\n</code></pre>\n\n<p>returns:</p>\n\n<pre><code>[\"one\", \"two\", \"three\", \"four five\"]\n</code></pre>\n\n<p>Now I want to do this dynamically, so can use Literals anymore. </p>\n\n<p>Which regex pattern can I use to convert my string above into an array? </p>\n\n<p>I'm looking for a regex pattern to place into a ruby split method that will take <code>\"one two three four\\ five\"</code> and return <code>[\"one\", \"two\", \"three\", \"four five\"]</code>. </p>\n\n<p>Note: I only want to split by whitespaces that <strong>aren't escaped</strong>, like above. Four and Five were combined into the same string because the whitespace that separated them was escaped.</p>\n"}, {"tags": ["ruby", "shoes"], "comments": [{"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1484664585, "post_id": 41699951, "comment_id": 70596142, "body": "Use more alerts (or a debugger, or <code>puts</code> statements, or whatever) to find out where the program is getting stalled.  You need to know whether it is successfully connecting, and if so, whether the remote &quot;ls&quot; is returning results."}, {"owner": {"reputation": 179, "user_id": 1418018, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b9b5fae51bb864131d6c4c41bf540d8a?s=128&d=identicon&r=PG&f=1", "display_name": "user1418018", "link": "https://stackoverflow.com/users/1418018/user1418018"}, "reply_to_user": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1484668000, "post_id": 41699951, "comment_id": 70598562, "body": "Right, any tips on how to do it? I am fairly new to the whole thing."}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1484670075, "post_id": 41699951, "comment_id": 70599995, "body": "You&#39;ve already used an alert to confirm that the function was called on click.  Add another alert after the <code>Net::SSH.start</code> line to find out if the network connection was established, and another after the <code>ssh.exec &quot;ls&quot;</code> line to find out if the &quot;ls&quot; returned results."}, {"owner": {"reputation": 179, "user_id": 1418018, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b9b5fae51bb864131d6c4c41bf540d8a?s=128&d=identicon&r=PG&f=1", "display_name": "user1418018", "link": "https://stackoverflow.com/users/1418018/user1418018"}, "reply_to_user": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1484734714, "post_id": 41699951, "comment_id": 70628182, "body": "The connection was established but ssh.exec &quot;ls&quot; gives no results. Rather, nothing happens, no error messages either."}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1484742448, "post_id": 41699951, "comment_id": 70633388, "body": "That&#39;s good to know.  That information needs to be in the question itself--comments are ephemeral on SO.  Can you please click &quot;edit&quot; and add all the additional information you have to the question?  Then for the next experiment: Remove all of the &quot;shoes&quot; from the program, and make it just do the <code>SSH.start...</code> and <code>SSH.connect...</code> and see what happens."}], "owner": {"reputation": 179, "user_id": 1418018, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/b9b5fae51bb864131d6c4c41bf540d8a?s=128&d=identicon&r=PG&f=1", "display_name": "user1418018", "link": "https://stackoverflow.com/users/1418018/user1418018"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1484664417, "creation_date": 1484664080, "last_edit_date": 1484664417, "question_id": 41699951, "link": "https://stackoverflow.com/questions/41699951/ruby-shoes-ssh-connect", "title": "Ruby Shoes ssh connect", "body": "<p>So I've added a button that on click calls function log_in</p>\n\n<pre><code>button \"Login\" do\n  log_in\nend\n</code></pre>\n\n<p>And this is my function, it's supposed to connect to a server with username and password</p>\n\n<pre><code>def log_in\n  alert \"Hola\"\n  Net::SSH.start(@hostname, 'Maria', :password =&gt; \"mariahi\") do |ssh|\n    ssh.exec \"ls\" do |ch, success|\n      para success\n      if success then\n        alert \"yay\"\n      else\n        alert \"Fail\"\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>I do get the first dialog alert, which means the function is called on click but nothing happens from there. Where's my mistake? Using Ruby Shoes.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx", "unicorn"], "comments": [{"owner": {"reputation": 6165, "user_id": 2697183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65255fe741b95ba0c641d96ea6750ea9?s=128&d=identicon&r=PG&f=1", "display_name": "AbM", "link": "https://stackoverflow.com/users/2697183/abm"}, "edited": false, "score": 0, "creation_date": 1484664401, "post_id": 41699717, "comment_id": 70596022, "body": "Do you have page caching?"}, {"owner": {"reputation": 1324, "user_id": 4959480, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/86a1d21d6a5ebbeca06d94ba55dbd487?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Hansch", "link": "https://stackoverflow.com/users/4959480/stefan-hansch"}, "reply_to_user": {"reputation": 6165, "user_id": 2697183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65255fe741b95ba0c641d96ea6750ea9?s=128&d=identicon&r=PG&f=1", "display_name": "AbM", "link": "https://stackoverflow.com/users/2697183/abm"}, "edited": false, "score": 0, "creation_date": 1484666242, "post_id": 41699717, "comment_id": 70597393, "body": "i cleaned with rake tmp:cache:clear rake assets:clean, restart unicorn, same output: text1"}, {"owner": {"reputation": 3180, "user_id": 3863146, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/34Tzj.png?s=128&g=1", "display_name": "sahil", "link": "https://stackoverflow.com/users/3863146/sahil"}, "edited": false, "score": 0, "creation_date": 1484682433, "post_id": 41699717, "comment_id": 70606965, "body": "How are you setting up <code>i18n </code> to use ru? Are you changing the default to <code>ru</code>?"}, {"owner": {"reputation": 1324, "user_id": 4959480, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/86a1d21d6a5ebbeca06d94ba55dbd487?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Hansch", "link": "https://stackoverflow.com/users/4959480/stefan-hansch"}, "edited": false, "score": 0, "creation_date": 1484773615, "post_id": 41699717, "comment_id": 70653339, "body": "yes, sure. if no, than dont returned text1. maybe problem in setting cache with nginx?"}], "owner": {"reputation": 1324, "user_id": 4959480, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/86a1d21d6a5ebbeca06d94ba55dbd487?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Hansch", "link": "https://stackoverflow.com/users/4959480/stefan-hansch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1484667635, "creation_date": 1484663405, "last_edit_date": 1484667635, "question_id": 41699717, "link": "https://stackoverflow.com/questions/41699717/i18n-pluralize-dont-work-correct-on-production-unicorn-and-nginx", "title": "i18n pluralize dont work correct on production unicorn and nginx", "body": "<p>When I run my app using default WEBrick server, and set locale  works perfectly.\nHowever, when I use Nginx and Unicorn to run my app, i18n doesnt work like it does in WEBrick.</p>\n\n<p>I have following method</p>\n\n<pre><code>t('law_articles.count', count: @law_articles.total_count)\n</code></pre>\n\n<p><strong>ru.yml</strong></p>\n\n<pre><code>law_articles:\n    count:\n      zero: 'text 1'\n      one: 'text 2'\n      few: 'text %{count} text3'\n      many: 'text %{count} text3'\n      other: 'text %{count} text4'\n</code></pre>\n\n<p>On localhost are working all correct. but on production, remote server nginx  + unicorn not correct. For example <code>@law_articles.total_count</code> return 43, but render on html every time <strong>text 1</strong></p>\n\n<p>Could anyone please teach me how to make i18n work?I'm stack all day....\nPlease excuse my poor English skill...\nThank you in advance.</p>\n"}]