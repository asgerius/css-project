[{"tags": ["ruby-on-rails", "ruby", "pdf", "pdf-generation"], "comments": [{"owner": {"reputation": 3538, "user_id": 693491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f30193798802607aa97082c4529fcc28?s=128&d=identicon&r=PG", "display_name": "Tyler Ferraro", "link": "https://stackoverflow.com/users/693491/tyler-ferraro"}, "edited": false, "score": 0, "creation_date": 1478746577, "post_id": 40517661, "comment_id": 68280088, "body": "Please take a look at <a href=\"http://stackoverflow.com/help/how-to-ask\">Posting Good Questions</a> which has detailed and useful instructions to help us help you. What line is the error referring to? Please post the full error, you cut it off too soon. Please format your code as well."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1478746717, "post_id": 40517661, "comment_id": 68280114, "body": "I&#39;m pretty sure you haven&#39;t posted the part of your code where the error is originating from. Can you please post the original error, including which file it is coming from?\\"}, {"owner": {"reputation": 383, "user_id": 6273382, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10156818603950237/picture?type=large", "display_name": "Omar", "link": "https://stackoverflow.com/users/6273382/omar"}, "edited": false, "score": 0, "creation_date": 1478747773, "post_id": 40517661, "comment_id": 68280289, "body": "max and Tyler thank you so much for your comments, my apologies for the way the question was presented. I&#39;ve just put in the full original error message as well as the charge.rb (when it works and gives me a pdf) and a charge.rb (that I want but gives me an error). Thank you again"}], "answers": [{"comments": [{"owner": {"reputation": 383, "user_id": 6273382, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10156818603950237/picture?type=large", "display_name": "Omar", "link": "https://stackoverflow.com/users/6273382/omar"}, "edited": false, "score": 1, "creation_date": 1478811275, "post_id": 40536436, "comment_id": 68313154, "body": "This works perfectly :)  I had generated a scaffold with my attributes capitalized when they should always be lower case."}], "tags": [], "owner": {"reputation": 1622, "user_id": 277994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce795239ba5dd2384fc2f88ffaff5451?s=128&d=identicon&r=PG", "display_name": "excid3", "link": "https://stackoverflow.com/users/277994/excid3"}, "is_accepted": true, "score": 1, "last_activity_date": 1478809678, "creation_date": 1478809678, "answer_id": 40536436, "question_id": 40517661, "link": "https://stackoverflow.com/questions/40517661/creating-pdfs-from-scratch-on-rails/40536436#40536436", "title": "Creating PDFs from scratch on Rails", "body": "<p>You've got a capital <code>Amount</code> in your model which will reference a constant. It should be lowercase <code>amount</code> to use the attribute on the charge record instead.</p>\n\n<p>I think that should be: <code>[\"Amount\",         \"$#{amount / 100}.00\"]</code></p>\n"}], "owner": {"reputation": 383, "user_id": 6273382, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10156818603950237/picture?type=large", "display_name": "Omar", "link": "https://stackoverflow.com/users/6273382/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 40536436, "answer_count": 1, "score": 0, "last_activity_date": 1478809678, "creation_date": 1478733688, "last_edit_date": 1478747661, "question_id": 40517661, "link": "https://stackoverflow.com/questions/40517661/creating-pdfs-from-scratch-on-rails", "title": "Creating PDFs from scratch on Rails", "body": "<p>I was working on creating a pdf receipts on my simple application. I was able to make it work for a generic/mostly hard coded entries. However, when I want the pdf to print out the amounts for a specfic charge (that is not Hard Coded) I get this error on my charges_controller.rb file - \"undefined local variable or method `amount' for #\" I have listed below my specific github as well the relevant below. Thank you so much for your help guys :)</p>\n\n<p>Exact Error Message:</p>\n\n<p>uninitialized constant Charge::Amount\napp/models/charge.rb:18:in <code>receipt'\napp/controllers/charges_controller.rb:64:in</code>block (2 levels) in show'\napp/controllers/charges_controller.rb:60:in `show'</p>\n\n<p>Github - <a href=\"https://github.com/OmarZV/PDF\" rel=\"nofollow noreferrer\">https://github.com/OmarZV/PDF</a></p>\n\n<p><strong>charges_controller.rb</strong></p>\n\n<pre><code>class ChargesController &lt; ApplicationController\nbefore_action :authenticate_user!\nbefore_action :set_charge, only: [:show]\ndef index\n@charges = Charge.all\nend\ndef new\n@charge = Charge.new\nend\ndef create\n@charge = Charge.new(charge_params)\nrespond_to do |format|\nif @charge.save\nformat.html { redirect_to @charge, notice: 'Charge was successfully created.' }\n    format.json { render :show, status: :created, location: @charge }\n  else\n    format.html { render :new }\n    format.json { render json: @charge.errors, status: :unprocessable_entity }\n  end\nend\nend\ndef show\nrespond_to do |format|\n    format.html\n    format.json\n    format.pdf {\n    send_data @charge.receipt.render,\n      filename: \"#{@charge.created_at.strftime(\"%Y-%m-%d\")}-gorails-receipt.pdf\",\n      type: \"application/pdf\",\n      disposition: :inline\n  }\nend\nend\nprivate\ndef set_charge\n@charge = current_user.charges.find(params[:id])\nend\nend\n</code></pre>\n\n<p><strong>charge.rb when it works</strong></p>\n\n<pre><code>class Charge &lt; ApplicationRecord\nbelongs_to :user\ndef receipt\nReceipts::Receipt.new(\nid: id,\n  product: \"GoRails\",\n  company: {\n    name: \"One Month, Inc.\",\n    address: \"37 Great Jones\\nFloor 2\\nNew York City, NY 10012\",\n    email: \"teachers@onemonth.com\",\n\n  },\n  line_items: [\n    [\"Date\",           created_at.to_s],\n    [\"Account Billed\", \"(#{user.email})\"],\n    [\"Product\",        \"GoRails\"],\n    [\"Amount\",         \"Amount\"],\n    [\"Charged to\",     \"{Card_type}\"],\n\n  ]      \n)\nend\nend\n</code></pre>\n\n<p><strong>charge.rb when it doesn't works</strong></p>\n\n<pre><code>class Charge &lt; ApplicationRecord\nbelongs_to :user\ndef receipt\nReceipts::Receipt.new(\nid: id,\n  product: \"GoRails\",\n  company: {\n    name: \"One Month, Inc.\",\n    address: \"37 Great Jones\\nFloor 2\\nNew York City, NY 10012\",\n    email: \"teachers@onemonth.com\",\n\n  },\n  line_items: [\n    [\"Date\",           created_at.to_s],\n    [\"Account Billed\", \"(#{user.email})\"],\n    [\"Product\",        \"GoRails\"],\n    [\"Amount\",         \"$#{Amount / 100}.00\"],\n    [\"Charged to\",     \"#{Card_type} (**** **** **** #{Card_last4})\"],\n\n  ]      \n)\nend\nend\n</code></pre>\n\n<p><strong>user.rb</strong></p>\n\n<pre><code>class User &lt; ApplicationRecord\ndevise :database_authenticatable, :registerable,:recoverable, :rememberable, :trackable, :validatable\nhas_many :charges\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "searchkick"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1478747009, "post_id": 40517658, "comment_id": 68280163, "body": "maybe you&#39;d consider this lazy,  but you could rescue the error."}, {"owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1478777586, "post_id": 40517658, "comment_id": 68293378, "body": "Hoping for something cleaner, but it may be an option to rescue error, create the index with <code>import: false</code>, and just add this one item."}, {"owner": {"reputation": 2594, "user_id": 2628223, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dbHga.jpg?s=128&g=1", "display_name": "BigRon", "link": "https://stackoverflow.com/users/2628223/bigron"}, "edited": false, "score": 0, "creation_date": 1481123933, "post_id": 40517658, "comment_id": 69249186, "body": "Just to be clear. There is a <code>Product</code> index that contains all of the <code>Product</code> records. You should call <code>Product.reindex</code> whenever you initialize this index for the first time. Then when a new <code>product</code> instance is added like in your above answer you can call <code>product.reindex</code> to add only that single, new product."}, {"owner": {"reputation": 2594, "user_id": 2628223, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dbHga.jpg?s=128&g=1", "display_name": "BigRon", "link": "https://stackoverflow.com/users/2628223/bigron"}, "edited": false, "score": 0, "creation_date": 1481124131, "post_id": 40517658, "comment_id": 69249347, "body": "I&#39;m curious on your use case: Why would the <code>Product Index</code> not yet exist? What sort of conditions do you have the dictate when to create the initial <code>Product Index</code>?"}, {"owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "edited": false, "score": 0, "creation_date": 1481125161, "post_id": 40517658, "comment_id": 69250107, "body": "This is for unit tests, where the code in question doesn&#39;t know if the index has been created yet. It could call Product.reindex to be sure, but that has a performance impact"}], "owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1478733670, "creation_date": 1478733670, "question_id": 40517658, "link": "https://stackoverflow.com/questions/40517658/seamlessly-create-index-with-searckick", "title": "Seamlessly create index with Searckick", "body": "<p>For test purposes, I want to do something like this:</p>\n\n<pre><code>product = Product.create name: 'coffee'\nproduct.reindex\n</code></pre>\n\n<p>This will fail, though, if the product index doesn't yet exist. What's the simplest way to create the index if it doesn't exist, or just use it if it does exist (and not reset it)?</p>\n"}, {"tags": ["ruby-on-rails", "angularjs", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 124, "user_id": 6712802, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-5HNrE7YGUzE/AAAAAAAAAAI/AAAAAAAAACE/pdt0nd3arb8/photo.jpg?sz=128", "display_name": "Alexander Borovoi", "link": "https://stackoverflow.com/users/6712802/alexander-borovoi"}, "edited": false, "score": 0, "creation_date": 1478762797, "post_id": 40519325, "comment_id": 68284639, "body": "Thank you! I wrote: Photo.new( title: params[:title],image: params[:photo][:image] ) and it works fine too."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 1, "last_activity_date": 1478762494, "last_edit_date": 1478762494, "creation_date": 1478746905, "answer_id": 40519325, "question_id": 40517603, "link": "https://stackoverflow.com/questions/40517603/rails-api-with-paperclip/40519325#40519325", "title": "Rails api with paperclip", "body": "<p>If your server has an incoming request that looks like this:</p>\n\n<pre><code>{\"title\"=&gt;\"simpletitletext\", \"photo\"=&gt;{\"image\"=&gt;......}}\n</code></pre>\n\n<p>you can make it look like this:</p>\n\n<pre><code>{\"photo\"=&gt;{\"title\"=&gt;\"simpletitle\", \"image\"=&gt;#...}}\n</code></pre>\n\n<p>The only difference between the two is that in the first, the <code>title</code> key is outside of the <code>photo</code> nested hash. but you want it to be inside.</p>\n\n<p>So in your Rails controller,. you could write:</p>\n\n<pre><code>def photo_params\n  hash = params[:photo]\n  hash.merge(title: params[:title])\nend\n</code></pre>\n"}], "owner": {"reputation": 124, "user_id": 6712802, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-5HNrE7YGUzE/AAAAAAAAAAI/AAAAAAAAACE/pdt0nd3arb8/photo.jpg?sz=128", "display_name": "Alexander Borovoi", "link": "https://stackoverflow.com/users/6712802/alexander-borovoi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 188, "favorite_count": 0, "accepted_answer_id": 40519325, "answer_count": 1, "score": 2, "last_activity_date": 1478762494, "creation_date": 1478733341, "question_id": 40517603, "link": "https://stackoverflow.com/questions/40517603/rails-api-with-paperclip", "title": "Rails api with paperclip", "body": "<p>I have rails api with simple paperclip model:</p>\n\n<pre><code>def create\n@photo = Photo.new(photo_params)\n\nif @photo.save\n  render json: @photo, status: :created, location: @photo\nelse\n  render json: @photo.errors, status: :unprocessable_entity\nend\nend\n\nprivate    \n\ndef photo_params\n  params.require(:photo).permit(:image, :title)\nend\n</code></pre>\n\n<p>My frontend framework send get like this</p>\n\n<pre><code>{\"title\"=&gt;\"simpletitletext\", \"photo\"=&gt;{\"image\"=&gt;......}}\n</code></pre>\n\n<p>But it wrong, because rails waits following</p>\n\n<pre><code>{\"photo\"=&gt;{\"title\"=&gt;\"simpletitle\", \"image\"=&gt;#...}}\n</code></pre>\n\n<p>I had been trying for different ways to fix angular for many hours, before wrote . May be it will be able to fix  in rails</p>\n"}, {"tags": ["ruby", "object"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1478733810, "post_id": 40517474, "comment_id": 68277003, "body": "You may also wish to push two objects in one line like: <code>array.push Square.new(4), Square.new(10) </code>"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 5010178, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a9b76f8d6032d1e92e743955d9cd4bfc?s=128&d=identicon&r=PG&f=1", "display_name": "Allen M", "link": "https://stackoverflow.com/users/5010178/allen-m"}, "edited": false, "score": 0, "creation_date": 1478733163, "post_id": 40517523, "comment_id": 68276766, "body": "Thank you a lot, i can&#39;t believe it was that easy.I usually alternate between for and each, but i&#39;ll use each for now on. I&#39;ll write down your suggestions so i can further improve the way i code."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1478733320, "post_id": 40517523, "comment_id": 68276836, "body": "Would it better to write your <code>area</code> method as <code>side*side</code> employing the wrapper?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1478736612, "post_id": 40517523, "comment_id": 68277823, "body": "Matter of preference. <code>@side * @side</code> is marginally faster, but that&#39;s irrelevant for most cases. <code>side * side</code> would work just the same."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 4, "last_activity_date": 1478732878, "creation_date": 1478732878, "answer_id": 40517523, "question_id": 40517474, "link": "https://stackoverflow.com/questions/40517474/ruby-array-of-objects/40517523#40517523", "title": "Ruby array of objects", "body": "<p>The <code>for</code> construct is hardly ever used in Ruby code. Instead you'd write:</p>\n\n<pre><code>array.each do |square|\n  square.printArea\nend\n</code></pre>\n\n<p>This iterates over the array and returns each <code>square</code> object, which is what your code does as well. <code>i</code> is not an index, it's an element in the array.</p>\n\n<p>As a note, Ruby strongly encourages method names and variables to be of the form <code>print_area</code>.</p>\n\n<p>A more Ruby form of this code looks like this:</p>\n\n<pre><code>class Square\n  attr_accessor :side\n\n  def initialize(side)\n    @side = side.to_i\n  end\n\n  def area\n    @side * @side\n  end\nend\n\nsquares = [ ]\nsquares &lt;&lt; Square.new(10)\nsquares &lt;&lt; Square.new(20)\n\nsquares.each do |square|\n  puts 'Square of side %d has area %d' % [ square.side, square.area ]\nend\n</code></pre>\n\n<p>This consolidates your <em>display logic</em> outside of the <em>model</em> where you should be focused on other things.</p>\n"}, {"tags": [], "owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "is_accepted": false, "score": 3, "last_activity_date": 1478733140, "creation_date": 1478733140, "answer_id": 40517565, "question_id": 40517474, "link": "https://stackoverflow.com/questions/40517474/ruby-array-of-objects/40517565#40517565", "title": "Ruby array of objects", "body": "<p>I believe you want to say:</p>\n\n<pre><code>array.each do |sq| \n  sq.printArea \nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "is_accepted": false, "score": 5, "last_activity_date": 1478735035, "last_edit_date": 1478735035, "creation_date": 1478734350, "answer_id": 40517754, "question_id": 40517474, "link": "https://stackoverflow.com/questions/40517474/ruby-array-of-objects/40517754#40517754", "title": "Ruby array of objects", "body": "<p>The other answers explained what to do to fix. I intend to explain WHY you got that error.</p>\n\n<p>Pay attention to your code:</p>\n\n<pre><code>array = []\narray &lt;&lt; Square.new(4)\narray &lt;&lt; Square.new(10)\n\nfor i in array do\n    array[i].printArea\nend\n</code></pre>\n\n<p>You created an empty array and then inserted two Square instances in it, right?</p>\n\n<p>Then, when you wrote <code>for i in array do</code>, what do you think <code>i</code> would contain? Of course <code>i</code> would contain the objects <strong>in <code>array</code></strong>, i.e., <code>i</code> would contain the Square instances!!! You are saying it! <code>i in array</code> says <code>i</code> is the content of the positions of the array, not its index.</p>\n\n<p>If you write</p>\n\n<pre><code>for i in array do\n    p i.class\nend\n</code></pre>\n\n<p>you'll see something like</p>\n\n<pre><code>Square\nSquare\n</code></pre>\n\n<p>It happens that Ruby only accepts integer as array indexes. Then, when you mentioned <code>array[i]</code> you were, in fact, saying something like <code>array[Square]</code>, and Ruby was trying to see those Square object as integers, in order to use them as array indexes. And it was failing, of course, because there is <code>no implicit conversion of Square into Integer</code>, and this is the error you got.</p>\n\n<p>I explain a bit more about this is <a href=\"http://rubyofftherails.blogspot.com.br/2016/06/implicit-and-bad-type-conversion-example.html\" rel=\"nofollow noreferrer\">this article</a> of my blog.</p>\n"}], "owner": {"reputation": 73, "user_id": 5010178, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a9b76f8d6032d1e92e743955d9cd4bfc?s=128&d=identicon&r=PG&f=1", "display_name": "Allen M", "link": "https://stackoverflow.com/users/5010178/allen-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 40517523, "answer_count": 3, "score": 3, "last_activity_date": 1478735035, "creation_date": 1478732627, "last_edit_date": 1478734185, "question_id": 40517474, "link": "https://stackoverflow.com/questions/40517474/ruby-array-of-objects", "title": "Ruby array of objects", "body": "<p>Creating a class Square which has a constructor and a methiod to calculate the area of the square.</p>\n\n<pre><code>class Square\n  def initialize(side)\n    @side = side\n  end\n\n  def printArea\n    @area = @side * @side\n    puts \"Area is: #{@area}\"\n  end\nend\n</code></pre>\n\n<p>Creating 2 objects and adding them to an array</p>\n\n<pre><code>array = []\narray &lt;&lt; Square.new(4)\narray &lt;&lt; Square.new(10)\n\nfor i in array do\n  array[i].printArea\nend\n</code></pre>\n\n<p>How do i acces the objects inside the array? I get an error: no implicit conversion of Square into Integer.</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "ruby-on-rails-4", "ruby-on-rails-3.2"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1478742964, "post_id": 40517384, "comment_id": 68279327, "body": "Which database do you use? BTW, that <code>&quot;---\\n...&quot;</code> stuff looks like the YAML form of an array."}], "answers": [{"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 2, "creation_date": 1478743016, "post_id": 40517654, "comment_id": 68279343, "body": "<code>[&quot;Eyes&quot;, &quot;Hair&quot;, &quot;Blood&quot;, &quot;&quot;, &quot;&quot;, &quot;&quot;].to_yaml</code> in the Rails console might be enlightening."}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": false, "score": 0, "last_activity_date": 1478733633, "creation_date": 1478733633, "answer_id": 40517654, "question_id": 40517384, "link": "https://stackoverflow.com/questions/40517384/saving-an-array-as-a-string-after-upgrading-from-rails-3-2-to-rails-4/40517654#40517654", "title": "Saving an array as a string after upgrading from Rails 3.2 to Rails 4", "body": "<p>This gets you most of the way there:</p>\n\n<pre><code>&gt;&gt; hash = {\"tdr_entry\" =&gt; {\"value\" =&gt; [\"Eyes\", \"Hair\", \"Blood\", \"\", \"\", \"\"], \"multi\" =&gt; \"true\"}}\n&gt;&gt; hash['tdr_entry'].transform_values { |set| Array.wrap(set).join(\"\\n- \") }\n=&gt; {\"value\"=&gt;\"Eyes\\n- Hair\\n- Blood\\n- \\n- \\n- \", \"multi\"=&gt;\"true\"}\n</code></pre>\n"}], "owner": {"reputation": 1005, "user_id": 1446264, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/LIJyD.jpg?s=128&g=1", "display_name": "Nick Shears", "link": "https://stackoverflow.com/users/1446264/nick-shears"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1478733633, "creation_date": 1478732164, "last_edit_date": 1478732807, "question_id": 40517384, "link": "https://stackoverflow.com/questions/40517384/saving-an-array-as-a-string-after-upgrading-from-rails-3-2-to-rails-4", "title": "Saving an array as a string after upgrading from Rails 3.2 to Rails 4", "body": "<p>I'm going through the process of upgrading a Rails project from 3.2.22.5 to 4.0.0 and I've just come across an issue to do with how an array is saved in the database between the two versions.</p>\n\n<p>I have this create action in a controller</p>\n\n<pre><code>def create\n  entry = current_user.tdr_entries.create()\n  entry.update_attributes(params[:tdr_entry])\n  if entry.save\n    result = 'ok'\n  end\n  render text: result || 'fail'\nend\n</code></pre>\n\n<p>The params are passing values like the following</p>\n\n<pre><code>{\"tdr_entry\"=&gt;{\"value\"=&gt;[\"Eyes\", \"Hair\", \"Blood\", \"\", \"\", \"\"], \"multi\"=&gt;\"true\"}}\n</code></pre>\n\n<p>In rails 3.2, value saves to the database with no problem and looks like this from a console:</p>\n\n<pre><code>=&gt; \"---\\n- Eyes\\n- Hair\\n- Blood\\n- ''\\n- ''\\n- ''\\n\"\n</code></pre>\n\n<p>But after upgrading to Rails 4, it's throwing an error when trying to do the same thing.</p>\n\n<pre><code>ActiveRecord::StatementInvalid (TypeError: can't cast Array to text:\n</code></pre>\n\n<p>How can I to convert the array to a string that is in the same format as it was before in Rails 3.2?</p>\n\n<p>Is it possible to do this? or do I need to completely refactor how this works in rails 4 and serialize it?</p>\n\n<p>Cheers.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "erb"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1478731162, "post_id": 40517126, "comment_id": 68275995, "body": "Do you use @address? If so, where and how exactly?"}, {"owner": {"reputation": 3821, "user_id": 1000514, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bd33755d13025ff0394a92993f23257e?s=128&d=identicon&r=PG", "display_name": "WagnerMatosUK", "link": "https://stackoverflow.com/users/1000514/wagnermatosuk"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1478731417, "post_id": 40517126, "comment_id": 68276102, "body": "@Eric Duminil I&#39;ve added the snippet of template that renders that string"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1478760593, "post_id": 40517126, "comment_id": 68283696, "body": "A <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> will help greatly."}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 0, "last_activity_date": 1478760359, "creation_date": 1478760359, "answer_id": 40521448, "question_id": 40517126, "link": "https://stackoverflow.com/questions/40517126/why-erb-doesnt-not-render-this-line/40521448#40521448", "title": "Why ERB doesn&#39;t not render this line", "body": "<p>The main thing I can think of is you're not setting the instance variable in the same scope as the ERB rendering.</p>\n\n<p>You can also try this to define <code>address</code> in the ERB:</p>\n\n<pre><code># make sure address is set first\n# if it's not, you have a scoping problem\nraise(ArgumentError) if @address.nil?\n\nbinding.local_variable_set :address, @address\n\nputs ERB.new(\"&lt;%= address %&gt;\").result binding\n</code></pre>\n"}], "owner": {"reputation": 3821, "user_id": 1000514, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/bd33755d13025ff0394a92993f23257e?s=128&d=identicon&r=PG", "display_name": "WagnerMatosUK", "link": "https://stackoverflow.com/users/1000514/wagnermatosuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 504, "favorite_count": 0, "accepted_answer_id": 40521448, "answer_count": 1, "score": 1, "last_activity_date": 1478760359, "creation_date": 1478730781, "last_edit_date": 1478731389, "question_id": 40517126, "link": "https://stackoverflow.com/questions/40517126/why-erb-doesnt-not-render-this-line", "title": "Why ERB doesn&#39;t not render this line", "body": "<p>I'm rendering a erb template outside Rails. The template is to be saved as an html file and sent elsewhere, so in my code I have this:</p>\n\n<pre><code>erb_file = \"templates/banners/#{template}.html.erb\"\n\nerb_str = File.read(erb_file)\n\n@city = options[:city]\n@address = \"#{@campaign.open_house_day} #{@case.open_house_from.strftime('%d/%m')} kl. #{@case.open_house_from.strftime('%H.%M')}-#{@case.open_house_to.strftime('%H.%M')}\"\n... \n\nrenderer = ERB.new(erb_str)\nresult = renderer.result(binding)\n\nFileUtils.mkdir_p('temp') unless File.directory?('temp')\n\nFile.open('temp/index.html', 'w') do |f|\n  f.write(result)\nend\n</code></pre>\n\n<p>All content is rendered fine, but erb simply ignore <code>@address</code> variable. Any ideas of why? While in my code, if I do <code>puts @address</code> the output is a string as expected. If I do <code>puts @address.class</code> the output is a String. Wha am I missing?</p>\n\n<p>Please note that the above does not use Rails</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Here's the line in my template that I use to render the html:</p>\n\n<pre><code>&lt;span class=\"wday\"&gt;&lt;%= @address %&gt;&lt;/span&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv"], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1478731664, "post_id": 40517164, "comment_id": 68276205, "body": "Explain why this is an appropriate answer. Instead of tossing out code help educate."}, {"owner": {"reputation": 37, "user_id": 4060420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a85d37f39bf857e7afe1e8eede2718eb?s=128&d=identicon&r=PG&f=1", "display_name": "b1akely", "link": "https://stackoverflow.com/users/4060420/b1akely"}, "edited": false, "score": 0, "creation_date": 1478752205, "post_id": 40517164, "comment_id": 68281270, "body": "How do I assign a post to multiple categories? For example in the csv in the category row I have &quot;1,2,3&quot; representing the ID&#39;s for 3 separate categories, but only the first ID is being recorded. Also, why do you use .new vs .create? Thanks for the help"}], "tags": [], "owner": {"reputation": 1, "user_id": 6836395, "user_type": "registered", "profile_image": "https://graph.facebook.com/10101591108537545/picture?type=large", "display_name": "Jan Ver Eecke", "link": "https://stackoverflow.com/users/6836395/jan-ver-eecke"}, "is_accepted": false, "score": 0, "last_activity_date": 1478731047, "creation_date": 1478731047, "answer_id": 40517164, "question_id": 40516949, "link": "https://stackoverflow.com/questions/40516949/rails-csv-import-with-associations/40517164#40517164", "title": "Rails csv import with associations", "body": "<pre><code>require 'csv'\nrequire 'open-uri'\nnamespace :post_import do\n  desc \"Import posts daily\"\n  task posts: :environment do\n    filename = File.join Rails.root, \"posts.csv\"\n    counter = 0\n\n    CSV.foreach(filename) do |row|\n      name, category, description = row\n\n      #you can user find or create, but for clarity I split it\n      post = Post.where(name: name).first\n      post = Post.new(name: name, description: description) if post == nil\n\n      #now we can simply add the style which joins to the category\n      post.styles.build(category_id: category)\n      post.save\n      counter += 1 if post.persisted?\n    end\n\n    puts \"Imported #{counter} [posts]\"\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 37, "user_id": 4060420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a85d37f39bf857e7afe1e8eede2718eb?s=128&d=identicon&r=PG&f=1", "display_name": "b1akely", "link": "https://stackoverflow.com/users/4060420/b1akely"}, "is_accepted": true, "score": 1, "last_activity_date": 1478902430, "creation_date": 1478902430, "answer_id": 40557049, "question_id": 40516949, "link": "https://stackoverflow.com/questions/40516949/rails-csv-import-with-associations/40557049#40557049", "title": "Rails csv import with associations", "body": "<p>I was able to solve this with help from Chris at gorails.com. Here is my (rough) working solution. Hope this helps anyone else with this issue!</p>\n\n<pre><code>require 'csv'\nrequire 'open-uri'\nnamespace :post_import do\n  desc \"Import posts daily\"\n  task posts: :environment do\n    filename = File.join Rails.root, \"posts.csv\"\n    counter = 0\n\n    CSV.foreach(filename) do |row|\n      name, category_ids, description = row\n      post = Post.new(name: name, description: description) if post == nil\n      post.save \n\n      #separate string of category ids into array\n      a_categories = category_ids.split(\",\")\n\n      a_categories.each do |category_id|\n        post.styles.where(category_id: category_id).first_or_create\n      end\n\n      counter += 1 if post.persisted?\n    end\n\n    puts \"Imported #{counter} [posts]\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 37, "user_id": 4060420, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a85d37f39bf857e7afe1e8eede2718eb?s=128&d=identicon&r=PG&f=1", "display_name": "b1akely", "link": "https://stackoverflow.com/users/4060420/b1akely"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 879, "favorite_count": 0, "accepted_answer_id": 40557049, "answer_count": 2, "score": 1, "last_activity_date": 1478902430, "creation_date": 1478729877, "question_id": 40516949, "link": "https://stackoverflow.com/questions/40516949/rails-csv-import-with-associations", "title": "Rails csv import with associations", "body": "<p>I am building a rails application that associates posts with many different categories. For example, I have a Post and need to be able to assign it to the categories Sports, News and Science through csv import via rake task.</p>\n\n<p>My question is how can I import an array of multiple category_ids into my Post model? I have it working where I can manually create a new Post and assign multiple categories to the post, but I am confused as to how to complete this through csv. I need help figuring out the best way to accomplish this.</p>\n\n<p>Here is what I have so far:</p>\n\n<p><strong>Schema</strong></p>\n\n<pre><code>  create_table \"posts\", force: :cascade do |t|\n    t.string   \"name\"\n    t.text     \"description\"\n  end\n\n  create_table \"styles\", force: :cascade do |t|\n    t.datetime \"created_at\",  null: false\n    t.datetime \"updated_at\",  null: false\n    t.integer  \"post_id\"\n    t.integer  \"category_id\"\n  end\n\n  create_table \"categories\", force: :cascade do |t|\n    t.string   \"name\"\n    t.datetime \"created_at\",        null: false\n    t.datetime \"updated_at\",        null: false\n  end\n</code></pre>\n\n<p><strong>Post.rb</strong></p>\n\n<pre><code>class Post &lt; ApplicationRecord  \n  has_many :styles\n  has_many :categories, through: :styles\nend\n</code></pre>\n\n<p><strong>Category.rb</strong></p>\n\n<pre><code>class Category &lt; ApplicationRecord\n  has_many :styles\n  has_many :posts, through: :styles\nend\n</code></pre>\n\n<p><strong>Style.rb</strong></p>\n\n<pre><code>class Style &lt; ApplicationRecord\n  belongs_to :post\n  belongs_to :category\nend\n</code></pre>\n\n<p><strong>Rake Task</strong></p>\n\n<pre><code>require 'csv'\nrequire 'open-uri'\nnamespace :post_import do\n  desc \"Import posts daily\"\n  task posts: :environment do\n    filename = File.join Rails.root, \"posts.csv\"\n    counter = 0\n\n    CSV.foreach(filename) do |row|\n      name, category, description = row\n      post = Post.create(name: name, category_ids: category, description: description)\n      counter += 1 if post.persisted?\n    end\n\n    puts \"Imported #{counter} [posts]\"\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-route53", "aws-sdk-ruby"], "answers": [{"tags": [], "owner": {"reputation": 711, "user_id": 1516373, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ot7S1.jpg?s=128&g=1", "display_name": "David S.", "link": "https://stackoverflow.com/users/1516373/david-s"}, "is_accepted": true, "score": 1, "last_activity_date": 1478747426, "creation_date": 1478747426, "answer_id": 40519382, "question_id": 40516306, "link": "https://stackoverflow.com/questions/40516306/handling-better-response-from-awsroute53client-new/40519382#40519382", "title": "Handling better response from Aws::Route53::Client.new", "body": "<p>Why are you converting a hash to JSON, only to convert it to a hash again? <code>JSON.parse(some_hash.to_json)</code> will just give you <code>some_hash</code>.</p>\n\n<p>That being said, I don't think it is possible to get JSON directly from AWS, mainly due to the fact that <a href=\"http://docs.aws.amazon.com/Route53/latest/APIReference/API_ListHostedZones.html\" rel=\"nofollow noreferrer\">their API responds with XML</a>. I think that your solution is ideal if that's all you're doing, but if you want, you can make a request with an HTTP client and then take the XML that you receive and use something like ActiveSupport's <a href=\"http://api.rubyonrails.org/classes/Hash.html#method-c-from_xml\" rel=\"nofollow noreferrer\">Hash.from_xml</a> to create a hash that you can then convert to JSON.</p>\n"}], "owner": {"reputation": 453, "user_id": 2400560, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/985514ba54cc639cce0c04c32bf2d42f?s=128&d=identicon&r=PG", "display_name": "Phil", "link": "https://stackoverflow.com/users/2400560/phil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 40519382, "answer_count": 1, "score": 1, "last_activity_date": 1491280578, "creation_date": 1478726867, "last_edit_date": 1491280578, "question_id": 40516306, "link": "https://stackoverflow.com/questions/40516306/handling-better-response-from-awsroute53client-new", "title": "Handling better response from Aws::Route53::Client.new", "body": "<p>First time trying to use the Ruby AWS ADK V2 and I am trying to format the data i am getting back and it seems quiet hard getting it into useable format.</p>\n\n<p>All I want to do is get a list of Hosted Zones and display in a table.</p>\n\n<p>I have a helper that has:</p>\n\n<pre><code>def hosted_zones\n  r53 = Aws::Route53::Client.new\n    #convert to hash first so we can parse and covert to json\n    h = (r53.list_hosted_zones).to_hash\n    j = JSON.parse((h.to_json))\nend\n</code></pre>\n\n<p>which then returns me the following JSON:</p>\n\n<pre><code>{\n  \"hosted_zones\": [{\n    \"id\": \"/hostedzone/Z1HSDGASSSME\",\n    \"name\": \"stagephil.com.\",\n    \"caller_reference\": \"2016-07-12T15:33:45.277646707+01:00\",\n    \"config\": {\n      \"comment\": \"Private DNS zone for stage\",\n      \"private_zone\": true\n    },\n    \"resource_record_set_count\": 10\n  }, {\n    \"id\": \"/hostedzone/ZJDGASSS0ZN3\",\n    \"name\": \"stagephil.com.\",\n    \"caller_reference\": \"2016-07-12T15:33:41.290143511+01:00\",\n    \"config\": {\n      \"comment\": \"Public DNS zone for stage\",\n      \"private_zone\": false\n    },\n    \"resource_record_set_count\": 7\n  }],\n  \"is_truncated\": false,\n  \"max_items\": 100\n}\n</code></pre>\n\n<p>To which I am running a really but while statement to interact through all the hosted_zone entries into a table.</p>\n\n<p>Is this the best way to get the response or can you request the response to be json already?</p>\n"}, {"tags": ["ruby", "jdbc", "db2", "dashdb"], "comments": [{"owner": {"reputation": 16538, "user_id": 1227152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4hr5l.jpg?s=128&g=1", "display_name": "mustaccio", "link": "https://stackoverflow.com/users/1227152/mustaccio"}, "edited": false, "score": 2, "creation_date": 1478731502, "post_id": 40516297, "comment_id": 68276136, "body": "Can&#39;t help with Ruby, but dashDB, being basically DB2, should be fine with the standard DB2 connection string properties."}, {"owner": {"reputation": 4717, "user_id": 1913389, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/QKwb2.png?s=128&g=1", "display_name": "theGreenCabbage", "link": "https://stackoverflow.com/users/1913389/thegreencabbage"}, "reply_to_user": {"reputation": 16538, "user_id": 1227152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4hr5l.jpg?s=128&g=1", "display_name": "mustaccio", "link": "https://stackoverflow.com/users/1227152/mustaccio"}, "edited": false, "score": 0, "creation_date": 1478731741, "post_id": 40516297, "comment_id": 68276235, "body": "You are right! Thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 4717, "user_id": 1913389, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/QKwb2.png?s=128&g=1", "display_name": "theGreenCabbage", "link": "https://stackoverflow.com/users/1913389/thegreencabbage"}, "is_accepted": false, "score": 0, "last_activity_date": 1478738321, "creation_date": 1478738321, "answer_id": 40518294, "question_id": 40516297, "link": "https://stackoverflow.com/questions/40516297/ruby-inheritance-of-class-and-method-in-jdbc-connection-string/40518294#40518294", "title": "Ruby inheritance of class and method in JDBC connection string", "body": "<p>Using <code>currentSchema</code> for both Dash DB and DB2 works.</p>\n"}], "owner": {"reputation": 4717, "user_id": 1913389, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/QKwb2.png?s=128&g=1", "display_name": "theGreenCabbage", "link": "https://stackoverflow.com/users/1913389/thegreencabbage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1478738321, "creation_date": 1478726818, "question_id": 40516297, "link": "https://stackoverflow.com/questions/40516297/ruby-inheritance-of-class-and-method-in-jdbc-connection-string", "title": "Ruby inheritance of class and method in JDBC connection string", "body": "<p>I have the following code snippet that generates a JDBC connection string for various databases. In this case, Dash DB and IBM DB2. The following is the structure of the code I use to generate my connection string in DB2.</p>\n\n<pre><code>def connection_creation_information\n  @connection_creation_information ||= Class.new(JDBCConnectionCreationInformation) do\n\n    private\n\n    def connection_string_primary_params(options)\n      params = []\n\n      params &lt;&lt; \"currentSchema=#{options[:schema] || options[:username]}\"\n\n      params &lt;&lt; options[:jdbc_additional_params] if options[:jdbc_additional_params]\n\n      params\n    end\n\n    def connection_string_scheme\n      'db2'\n    end\n\n    def connection_string_params(options)\n      super + ';'\n    end\n\n    def primary_param_separator\n      ';'\n    end\n\n    def base_separator\n      ':'\n    end\n  end.new\nend\n</code></pre>\n\n<p>Now, DashDB uses <code>defaultSchema</code> to define the default schema, while in DB2, it uses <code>currentSchema</code>. I am trying to minimize redundant code as much as possible, so right now, Dash DB's code inherits from DB2 using <code>class HTDialectDashDB &lt; HTDialectDB2</code> and override the one line/method that matters -- <code>connection_string_primary_params()</code></p>\n\n<p>In my Dash DB class, I am doing the following:</p>\n\n<pre><code>def connection_creation_information\n  @connection_creation_information ||= Class.new(JDBCConnectionCreationInformation) do\n\n    private\n\n    def connection_string_primary_params(options)\n      params = []\n\n      params &lt;&lt; \"defaultSchema=#{options[:schema] || options[:username]}\"\n\n      params &lt;&lt; options[:jdbc_additional_params] if options[:jdbc_additional_params]\n\n      params\n    end\n\n  end.new\nend\n</code></pre>\n\n<p>However, errors are being thrown that I must implement the four other methods described in the DB2 code, which I want to avoid, because it's just redundant code. </p>\n\n<p>What can I do in this case? </p>\n"}, {"tags": ["ruby", "charts", "axlsx"], "comments": [{"owner": {"reputation": 7953, "user_id": 812149, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/6lIqv.png?s=128&g=1", "display_name": "S.L. Barth", "link": "https://stackoverflow.com/users/812149/s-l-barth"}, "edited": false, "score": 0, "creation_date": 1480672344, "post_id": 40515882, "comment_id": 69069436, "body": "For future visitors: there is a <a href=\"http://stackoverflow.com/review/late-answers/14474321\">deleted link-only answer</a> by the OP. Apparently this is solved <a href=\"https://github.com/randym/axlsx/pull/431/commits/6057277d7a8473121ba63983913bd91d1e4c0a9b\" rel=\"nofollow noreferrer\">here</a>."}], "owner": {"reputation": 11, "user_id": 7138369, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JvPMIk4sSzY/AAAAAAAAAAI/AAAAAAAAB1E/mC3750EmO4c/photo.jpg?sz=128", "display_name": "lawrencetchin", "link": "https://stackoverflow.com/users/7138369/lawrencetchin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1478794566, "creation_date": 1478724988, "last_edit_date": 1478794566, "question_id": 40515882, "link": "https://stackoverflow.com/questions/40515882/adding-a-second-y-axis-using-axlsx-gem", "title": "Adding a second Y-axis using axlsx gem", "body": "<p>Is there a way to add a second Y-axis to a line chart using the axlsx gem. I currently have two data sets (data-series) and one set is much larger than the other. Does anyone have experience using SerAxis or adding a second Y-axis?</p>\n"}, {"tags": ["arrays", "ruby", "indexing"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1478724006, "post_id": 40515562, "comment_id": 68272892, "body": "Try and use <code>[ ]</code> instead of <code>Array.new</code> and also avoid one-lining everything, it makes your code hard to follow. This is also in dire need of proper indentation to make the flow more obvious."}, {"owner": {"reputation": 23, "user_id": 7138260, "user_type": "registered", "profile_image": "https://graph.facebook.com/1117250301716275/picture?type=large", "display_name": "Ryan Hall", "link": "https://stackoverflow.com/users/7138260/ryan-hall"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1478724291, "post_id": 40515562, "comment_id": 68273023, "body": "I apologize for the lack of indentations. I tried the [ ] before hand and it did not help. Thanks."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1478725136, "post_id": 40515562, "comment_id": 68273461, "body": "Those things don&#39;t solve the problem, but they keep your code minimal and organized so errors stand out better. The problem you had here was largely do the <code>puts</code> being buried in the middle of a complicated line. Breaking that out on to multiple lines would have made the mistake obvious."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 7138260, "user_type": "registered", "profile_image": "https://graph.facebook.com/1117250301716275/picture?type=large", "display_name": "Ryan Hall", "link": "https://stackoverflow.com/users/7138260/ryan-hall"}, "edited": false, "score": 0, "creation_date": 1478724610, "post_id": 40515625, "comment_id": 68273182, "body": "Since I am learning Ruby and out of curiosity, if I wanted to use &quot;print&#39; or &quot;puts&quot; how would I go about it?"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 23, "user_id": 7138260, "user_type": "registered", "profile_image": "https://graph.facebook.com/1117250301716275/picture?type=large", "display_name": "Ryan Hall", "link": "https://stackoverflow.com/users/7138260/ryan-hall"}, "edited": false, "score": 0, "creation_date": 1478724822, "post_id": 40515625, "comment_id": 68273282, "body": "print what? I mean, you print your array, element by element, in the statarray method."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1478725179, "post_id": 40515625, "comment_id": 68273481, "body": "<code>print</code> is identical to <code>puts</code>, but <code>puts</code> merely adds on a newline automatically. That is <code>print &quot;x\\n&quot;</code> and <code>puts &quot;x&quot;</code> are identical in terms of output."}, {"owner": {"reputation": 23, "user_id": 7138260, "user_type": "registered", "profile_image": "https://graph.facebook.com/1117250301716275/picture?type=large", "display_name": "Ryan Hall", "link": "https://stackoverflow.com/users/7138260/ryan-hall"}, "edited": false, "score": 0, "creation_date": 1478725180, "post_id": 40515625, "comment_id": 68273482, "body": "Ahhh got it. It wasn&#39;t registering with me for some reason. Thanks again."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1478727500, "post_id": 40515625, "comment_id": 68274603, "body": "I don&#39;t get what you want to do"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1478727632, "post_id": 40515625, "comment_id": 68274656, "body": "Open another question please"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 2, "last_activity_date": 1478723942, "creation_date": 1478723942, "answer_id": 40515625, "question_id": 40515562, "link": "https://stackoverflow.com/questions/40515562/using-ruby-why-is-my-array-printing-the-results-then-an-array-of-with-idex-numb/40515625#40515625", "title": "Using Ruby: Why is my array printing the results then an array of with idex numbers", "body": "<pre><code>puts statarray(0,'play')\n</code></pre>\n\n<p>should be just</p>\n\n<pre><code>statarray(0,'play')\n</code></pre>\n\n<p>otherwise you print the return value of the function, which is the entire array (because the <code>each</code> method)</p>\n"}, {"comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1478729109, "post_id": 40516585, "comment_id": 68275238, "body": "Yes, perfect :)"}], "tags": [], "owner": {"reputation": 23, "user_id": 7138260, "user_type": "registered", "profile_image": "https://graph.facebook.com/1117250301716275/picture?type=large", "display_name": "Ryan Hall", "link": "https://stackoverflow.com/users/7138260/ryan-hall"}, "is_accepted": false, "score": 0, "last_activity_date": 1478728145, "creation_date": 1478728145, "answer_id": 40516585, "question_id": 40515562, "link": "https://stackoverflow.com/questions/40515562/using-ruby-why-is-my-array-printing-the-results-then-an-array-of-with-idex-numb/40516585#40516585", "title": "Using Ruby: Why is my array printing the results then an array of with idex numbers", "body": "<p>This is what I was shooting for: </p>\n\n<pre><code>def pwsplayerindex(inplayer)\narr = []\n\n  pwsarr.each_with_index do |val,index|\n    if val['player'] == inplayer then arr &lt;&lt; index end\n  end\n  arr\nend\n\ndef statarray(i,stat)\nindexarr = Array.new\n\n  pwsplayerindex((pwsarr[i]['player'])).each do |x|\n    indexarr &lt;&lt; pwsarr[x][stat]\n  end\n    indexarr\nend \n\nputs statarray(0,'play')\n</code></pre>\n\n<p>This gives me what I was aiming for in my original question. It was a simple fix. I didn't realize I was printing in the method.</p>\n"}], "owner": {"reputation": 23, "user_id": 7138260, "user_type": "registered", "profile_image": "https://graph.facebook.com/1117250301716275/picture?type=large", "display_name": "Ryan Hall", "link": "https://stackoverflow.com/users/7138260/ryan-hall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 40515625, "answer_count": 2, "score": 2, "last_activity_date": 1478728145, "creation_date": 1478723718, "last_edit_date": 1478727838, "question_id": 40515562, "link": "https://stackoverflow.com/questions/40515562/using-ruby-why-is-my-array-printing-the-results-then-an-array-of-with-idex-numb", "title": "Using Ruby: Why is my array printing the results then an array of with idex numbers", "body": "<p>I have two methods:</p>\n\n<p><code>pwsplayerindex</code> finds a person that is in an array multiple times and gives the index of where their name is.</p>\n\n<p><code>statarray</code> uses the index # from <code>pwsplayerindex</code> to find other data in an array with hashes. </p>\n\n<pre><code>def pwsplayerindex(inplayer)\narr = Array.new\npwsarr.each_with_index do |val,index|\nif val['player'] == inplayer then arr &lt;&lt; index end\nend\n    arr\nend\n\ndef statarray(index,stat)\nindexarr = Array.new \npwsplayerindex((pwsarr[index]['player'])).each { |x| puts (pwsarr[x][stat])}   \nend  \n\n print statarray(0,'play')\n</code></pre>\n\n<p>Why does the result yield:</p>\n\n<pre><code>51.0\n29.9\n29.4\n28.1\n24.6\n16.6\n[0,82,88,113,192,472]\n</code></pre>\n\n<p>All I want it to give me is:</p>\n\n<pre><code>51.0\n29.9\n29.4\n28.1\n24.6\n16.6\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "neo4j", "neo4j.rb"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1478760556, "post_id": 40515025, "comment_id": 68283677, "body": "are you following a tutorial or something? Where is <code>find_for_oauth</code> <b>supposed</b> to be defined?"}, {"owner": {"reputation": 21, "user_id": 844214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863d5df876b480522181e5bbfe951820?s=128&d=identicon&r=PG", "display_name": "user844214", "link": "https://stackoverflow.com/users/844214/user844214"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1478805749, "post_id": 40515025, "comment_id": 68310495, "body": "Well, yes - using a devise tutorial, though it&#39;s not for Neo4j-use, so maybe barking up the wrong tree. Haven&#39;t used devise before. find_for_oauth is supposed to be in Identity-model - have tried with a helper, but no luck. Still tinkering with it..."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1478805849, "post_id": 40515025, "comment_id": 68310535, "body": "I really think this has nothing to do with Neo4j. Are you sure the tutorial doesn&#39;t include a step to define the method? See <a href=\"http://stackoverflow.com/questions/25598220/user-find-for-oauth-where-can-i-find-it\" title=\"user find for oauth where can i find it\">stackoverflow.com/questions/25598220/&hellip;</a>"}, {"owner": {"reputation": 21, "user_id": 844214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863d5df876b480522181e5bbfe951820?s=128&d=identicon&r=PG", "display_name": "user844214", "link": "https://stackoverflow.com/users/844214/user844214"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1479198142, "post_id": 40515025, "comment_id": 68444841, "body": "Neo4j is in all other regards working fine, however found a problem in my relations in Identity model: has_one :in_or_out_or_both, :user, model_class: &#39;User&#39;, type: :authentication Needed the model_class: parameter Problem persists though... Also facebook signs in allright, so dies on callback"}], "owner": {"reputation": 21, "user_id": 844214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/863d5df876b480522181e5bbfe951820?s=128&d=identicon&r=PG", "display_name": "user844214", "link": "https://stackoverflow.com/users/844214/user844214"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1478721616, "creation_date": 1478721616, "question_id": 40515025, "link": "https://stackoverflow.com/questions/40515025/rails-on-neo4j-using-devise-undefined-method-find-for-oauth-for-neo4j", "title": "Rails on Neo4j, using Devise -&gt; undefined method `find_for_oauth&#39; for Neo4j", "body": "<p>Running rails 4.2.6, ruby 2.3.1p112 with Neo4j Community edition.\nOn callback from Facebook I get this error:\nundefined method `find_for_oauth' for Neo4j::Shared::Identity:Module\nOn models/user.rb:</p>\n\n<pre><code>identity = Identity.find_for_oauth(auth)\n</code></pre>\n\n<p>My files are as such:\nmodels/user.rb</p>\n\n<pre><code>    class User \n  include Neo4j::ActiveNode\n\n  has_one :both, :identity, model_class: 'Identity', type: :has\n  has_many :both, :friends, model_class: 'User', type: :friends\n\n  property :username, type: String\n  property :facebook_token, type: String\n  index :facebook_token\n  property :created_at, type: DateTime\n  property :updated_at, type: DateTime\n  property :logged_out, type: DateTime\n\n  ## Database authenticatable\n  property :email, type: String, null: false, default: \"\"\n  index :email\n\n  property :encrypted_password\n\n  ## If you include devise modules, uncomment the properties below.\n\n  ## Rememberable\n  property :remember_created_at, type: DateTime\n  property :remember_token\n  index :remember_token\n\n\n  ## Recoverable\n  property :reset_password_token\n  index :reset_password_token\n  property :reset_password_sent_at, type: DateTime\n\n  ## Trackable\n  property :sign_in_count, type: Integer, default: 0\n  property :current_sign_in_at, type: DateTime\n  property :last_sign_in_at, type: DateTime\n  property :current_sign_in_ip, type:  String\n  property :last_sign_in_ip, type: String\n\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable, :omniauthable\n\n  property :name, type: String\n  property :email, type: String\n  property :username, type: String\n\n  def self.find_for_oauth(auth, signed_in_resource = nil)\n\n    identity = Identity.find_for_oauth(auth)\n\n    user = signed_in_resource ? signed_in_resource : identity.user\n\n    if user.nil?\n\n      email_is_verified = auth.info.email &amp;&amp; (auth.info.verified || auth.info.verified_email)\n      email = auth.info.email if email_is_verified\n      user = User.where(:email =&gt; email).first if email\n\n      # Create the user if it's a new registration\n      if user.nil?\n        user = User.new(\n            name: auth.extra.raw_info.name,\n            #username: auth.info.nickname || auth.uid,\n            email: email ? email : \"#{TEMP_EMAIL_PREFIX}-#{auth.uid}-#{auth.provider}.com\",\n            password: Devise.friendly_token[0,20]\n        )\n        user.skip_confirmation!\n        user.save!\n      end\n    end\n\n    # Associate the identity with the user if needed\n    if identity.user != user\n      identity.user = user\n      identity.save!\n    end\n    user\n  end\nend\n</code></pre>\n\n<p>models/identity.rb</p>\n\n<pre><code>class Identity \n  include Neo4j::ActiveNode\n  property :provider, type: String\n  property :uid, type: String\n\n  has_one :in_or_out_or_both, :user, type: :owner\n\n  validates_presence_of :uid, :provider\n  validates_uniqueness_of :uid, :scope =&gt; :provider\n\n  def self.find_for_oauth(auth)\n    find_or_create_by(uid: auth.uid, provider: auth.provider)\n  end\n\nend\n</code></pre>\n\n<p>routes.rb (well the interesting part of it)</p>\n\n<pre><code>devise_for :users, :skip =&gt; [:sessions], controllers: { omniauth_callbacks: 'omniauth_callbacks' }\nas :user do\n    get 'signin' =&gt; 'devise/sessions#new', :as =&gt; :new_user_session\n    post 'signin' =&gt; 'devise/sessions#create', :as =&gt; :user_session\n    match 'signout' =&gt; 'devise/sessions#destroy', :as =&gt; :destroy_user_session,\n          :via =&gt; Devise.mappings[:user].sign_out_via\nend\n</code></pre>\n\n<p>Callback from Facebook is this:</p>\n\n<pre><code>flash: {\"discard\"=&gt;[], \"flashes\"=&gt;{\"alert\"=&gt;\"Could not authenticate you from Facebook because \\\"Invalid credentials\\\".\"}}\n</code></pre>\n\n<p>This is ok for now - just need to fix the \"undefined method\" problem.\nI'm thinking it's the user->identity relation that's whack, but haven't been successful finding another/the right way to do it.</p>\n\n<p>Thanks in advance, guys :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 116, "user_id": 1338620, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/eba96e10d9d1018c1f72fe86f7fb0c53?s=128&d=identicon&r=PG", "display_name": "trowse", "link": "https://stackoverflow.com/users/1338620/trowse"}, "edited": false, "score": 0, "creation_date": 1478737212, "post_id": 40515541, "comment_id": 68277988, "body": "You&#39;re the best! Worked exactly as expected. I am coming from coding in ASP.net and this amazes me sometimes with how easy it is if you know the correct lines. Thanks again!"}, {"owner": {"reputation": 652, "user_id": 2154790, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/2ede517ca2ba67bf0692231d1f0389aa?s=128&d=identicon&r=PG", "display_name": "Luke Smith", "link": "https://stackoverflow.com/users/2154790/luke-smith"}, "reply_to_user": {"reputation": 116, "user_id": 1338620, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/eba96e10d9d1018c1f72fe86f7fb0c53?s=128&d=identicon&r=PG", "display_name": "trowse", "link": "https://stackoverflow.com/users/1338620/trowse"}, "edited": false, "score": 0, "creation_date": 1478764716, "post_id": 40515541, "comment_id": 68285579, "body": "Not a problem, glad it helped. I moved over from PHP a few years, it&#39;s a refreshingly concise language."}], "tags": [], "owner": {"reputation": 652, "user_id": 2154790, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/2ede517ca2ba67bf0692231d1f0389aa?s=128&d=identicon&r=PG", "display_name": "Luke Smith", "link": "https://stackoverflow.com/users/2154790/luke-smith"}, "is_accepted": true, "score": 0, "last_activity_date": 1478724942, "last_edit_date": 1478724942, "creation_date": 1478723617, "answer_id": 40515541, "question_id": 40514940, "link": "https://stackoverflow.com/questions/40514940/track-dates-of-viewed-article/40515541#40515541", "title": "Track Dates of viewed article", "body": "<p>You didn't mention what columns you had in your new model, but I'm assuming it's just the default timestamps and a field for the article ID. </p>\n\n<p>So, within the 'show' action for the articles, you could do something like this. Your action names and such may differ, but the principle is the same.</p>\n\n<pre><code>def show\n  @article = Article.find(params[:id])\n  View.create(article_id:@article.id)\nend\n</code></pre>\n\n<p>I can't think of any reason why you'd need to store the view itself in an instance variable, or any variable for that matter. </p>\n"}], "owner": {"reputation": 116, "user_id": 1338620, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/eba96e10d9d1018c1f72fe86f7fb0c53?s=128&d=identicon&r=PG", "display_name": "trowse", "link": "https://stackoverflow.com/users/1338620/trowse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "accepted_answer_id": 40515541, "answer_count": 1, "score": 1, "last_activity_date": 1478724942, "creation_date": 1478721325, "question_id": 40514940, "link": "https://stackoverflow.com/questions/40514940/track-dates-of-viewed-article", "title": "Track Dates of viewed article", "body": "<p>I am working through my first Ruby on Rails App!</p>\n\n<p>I have followed along with ruby's getting started tutorial and created a blog. <a href=\"http://guides.rubyonrails.org/getting_started.html\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/getting_started.html</a></p>\n\n<p>I am trying to implement a way to track when articles are viewed so I created a second table/model/controller that I'd like to insert the current date every time an article is viewed (show).</p>\n\n<p>I'm not really sure how to implement this though... my initial though was in the article controller under the show def I would do something like \n<code>\n@view = View.new(view_params)\n@view.Save!\n</code></p>\n\n<p>This didn't really work. Any idea at all?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "acts-as-follower"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1478721732, "post_id": 40514916, "comment_id": 68271745, "body": "Why not <code>current_user.following &lt;&lt; user</code> where <code>following</code> is a relationship you&#39;ve established as a <code>has_many ... :through</code> type structure?"}, {"owner": {"reputation": 21, "user_id": 7138143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/652510d74d918673f6b8f280f8e9924d?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7138143/jack"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1478721871, "post_id": 40514916, "comment_id": 68271805, "body": "I am using the act_as_follower gem to try to spped up development on the easy part to spend more time with the NEO4j side."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1478722136, "post_id": 40514916, "comment_id": 68271943, "body": "Then what does it recommend you do?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1478722152, "post_id": 40514916, "comment_id": 68271951, "body": "maybe you should look into the basics of Rails CRUD / REST before trying to use a non-standard data base"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1478731883, "post_id": 40514916, "comment_id": 68276300, "body": "It is <i>never</i> better to store sensitive information in a hidden field, especially when that information could grow in size. &quot;hidden&quot; only means it&#39;s not displayed by the browser in the rendered page, it doesn&#39;t mean it&#39;s hidden if someone looks at the source."}], "answers": [{"tags": [], "owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "is_accepted": false, "score": 2, "last_activity_date": 1478727747, "last_edit_date": 1478727747, "creation_date": 1478725907, "answer_id": 40516103, "question_id": 40514916, "link": "https://stackoverflow.com/questions/40514916/ruby-on-rails-storing-user-information/40516103#40516103", "title": "Ruby on rails storing user information", "body": "<p>I've done this before - I always used a new model that representing the relationship eg </p>\n\n<pre><code>class Follow &lt; ActiveRecord::Base\n  # obviously, fix these to suit your preferred terminology\n  # and include all the correct details\n  has_one :follower, class_name: 'User'\n  has_one :followee, class_name: 'User'\nend\n</code></pre>\n\n<p>That way you can store related information - such as when the user followed the other user and it doesn't become ponderous when your users have follow-lists in the hundreds (if not thousands).</p>\n\n<p>Then the views can implement some fairly standard patterns using rails resources.</p>\n\n<p>As to implementing the views the way you say... I'm not sure what you're trying to describe. Can you show us the code you've already tried (even if it isn't working)? It'll give us a clearer picture of what you're trying to do.</p>\n"}], "owner": {"reputation": 21, "user_id": 7138143, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/652510d74d918673f6b8f280f8e9924d?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7138143/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 159, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1478727747, "creation_date": 1478721240, "last_edit_date": 1478722170, "question_id": 40514916, "link": "https://stackoverflow.com/questions/40514916/ruby-on-rails-storing-user-information", "title": "Ruby on rails storing user information", "body": "<p>I am developing a social network for a class we have to be able to follow other user accounts. Right now I am stumped on whats the best way to do this I have a method follow that uses to user objects current_user.follow(user) something like that. How would I go about storing the information on the user index page so the current user could follow any of those users on that page. </p>\n\n<p>Would it be best to store the user ids in an hidden field, and query for that user when the follow button is clicked.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "heroku"], "comments": [{"owner": {"reputation": 3134, "user_id": 3884750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100003183948251/picture?type=large", "display_name": "Oleg  Sobchuk", "link": "https://stackoverflow.com/users/3884750/oleg-sobchuk"}, "edited": false, "score": 0, "creation_date": 1478719507, "post_id": 40514482, "comment_id": 68270683, "body": "did you set <code>ENV[&#39;mypinterestingapp&#39;]</code> on HEROKU?"}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "reply_to_user": {"reputation": 3134, "user_id": 3884750, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/100003183948251/picture?type=large", "display_name": "Oleg  Sobchuk", "link": "https://stackoverflow.com/users/3884750/oleg-sobchuk"}, "edited": false, "score": 0, "creation_date": 1478719638, "post_id": 40514482, "comment_id": 68270735, "body": "do you mean the &#39;heroku config&#39; listed at the top of my post? Also, on the Heroku website in my config variables, my AWS_BUCKET is named correctly &#39;mypinterestingapp&#39;, if that is what you are referring to."}], "answers": [{"comments": [{"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "reply_to_user": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "edited": false, "score": 0, "creation_date": 1478720565, "post_id": 40514588, "comment_id": 68271180, "body": "My pleasure @Benjamints. Be careful with them AWS creds. You might even consider swapping out the keys since someone could have copied them before I edited them out."}], "tags": [], "owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "is_accepted": true, "score": 0, "last_activity_date": 1478719868, "creation_date": 1478719868, "answer_id": 40514588, "question_id": 40514482, "link": "https://stackoverflow.com/questions/40514482/actionviewtemplateerror-missing-required-bucket-option/40514588#40514588", "title": "ActionView::Template::Error (missing required :bucket option)", "body": "<p>You need:</p>\n\n<pre><code>config.paperclip_defaults = {\n  :storage =&gt; :s3,\n  :s3_credentials =&gt; {\n    :bucket =&gt; ENV['AWS_BUCKET'],\n    :access_key_id =&gt; ENV['AWS_ACCESS_KEY_ID'],\n    :secret_access_key =&gt; ENV['AWS_SECRET_ACCESS_KEY']\n  }\n}\n</code></pre>\n\n<p>Right now you're looking for an <code>ENV</code> variable called <code>'mypinterestingapp'</code> when you should be looking for <code>ENV['AWS_BUCKET']</code>, which doesn't exist.</p>\n\n<p>Also, I replaced your actual credentials in the code sample above with some generic placeholders. Never a good idea to post actual credentials in a SO question ;)</p>\n"}], "owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 495, "favorite_count": 0, "accepted_answer_id": 40514588, "answer_count": 1, "score": 2, "last_activity_date": 1478720055, "creation_date": 1478719365, "last_edit_date": 1478720055, "question_id": 40514482, "link": "https://stackoverflow.com/questions/40514482/actionviewtemplateerror-missing-required-bucket-option", "title": "ActionView::Template::Error (missing required :bucket option)", "body": "<p>I am receiving this error on heroku logs. I am now receiving this error after creating a new bucket on amazon s3 and adding my keys. I also added my keys/bucket name to heroku, as seen here:</p>\n\n<pre><code>=== benjaminsunderland Config Vars\nAWS_ACCESS_KEY_ID:        my_access_key\nAWS_BUCKET:               mypinterestingapp\nAWS_SECRET_ACCESS_KEY:    my_secret_key\nDATABASE_URL:             my_database_url\nLANG:                     en_US.UTF-8\nRACK_ENV:                 production\nRAILS_ENV:                production\nRAILS_LOG_TO_STDOUT:      enabled\nRAILS_SERVE_STATIC_FILES: enabled\nSECRET_KEY_BASE:          my_secret_key_base\n</code></pre>\n\n<p>And also in enviroments/production.rb in my rails app</p>\n\n<pre><code>config.paperclip_defaults = {\n  :storage =&gt; :s3,\n  :s3_credentials =&gt; {\n    :bucket =&gt; ENV['mypinterestingapp'],\n    :access_key_id =&gt; ENV['AWS_ACCESS_KEY_ID'],\n    :secret_access_key =&gt; ENV['AWS_SECRET_ACCESS_KEY']\n  }\n}\n</code></pre>\n\n<p>my error in heroku logs:</p>\n\n<pre><code>2016-11-09T19:10:32.544099+00:00 app[web.1]: [6df3c971-b288-4b7e-893e-dcea2f2ef537] ActionView::Template::Error (missing required :bucket option):\n2016-11-09T19:10:32.544249+00:00 app[web.1]: [6df3c971-b288-4b7e-893e-dcea2f2ef537]     15:   &lt;tbody&gt;\n2016-11-09T19:10:32.544275+00:00 app[web.1]: [6df3c971-b288-4b7e-893e-dcea2f2ef537]     16:     &lt;% @pins.each do |pin| %&gt;\n2016-11-09T19:10:32.544676+00:00 app[web.1]: [6df3c971-b288-4b7e-893e-dcea2f2ef537]     17:       &lt;tr&gt;\n2016-11-09T19:10:32.544707+00:00 app[web.1]: [6df3c971-b288-4b7e-893e-dcea2f2ef537]     18:         &lt;td&gt;&lt;%= image_tag pin.image.url %&gt;&lt;/td&gt;\n2016-11-09T19:10:32.544734+00:00 app[web.1]: [6df3c971-b288-4b7e-893e-dcea2f2ef537]     19:         &lt;td&gt;&lt;%= pin.description %&gt;&lt;/td&gt;\n2016-11-09T19:10:32.544764+00:00 app[web.1]: [6df3c971-b288-4b7e-893e-dcea2f2ef537]     20:         &lt;td&gt;&lt;%= pin.user.email if pin.user %&gt;&lt;/td&gt;\n2016-11-09T19:10:32.544790+00:00 app[web.1]: [6df3c971-b288-4b7e-893e-dcea2f2ef537]     21:         &lt;td&gt;&lt;%= link_to 'Show', pin %&gt;&lt;/td&gt;\n2016-11-09T19:10:32.544818+00:00 app[web.1]: [6df3c971-b288-4b7e-893e-dcea2f2ef537]   \n2016-11-09T19:10:32.544854+00:00 app[web.1]: [6df3c971-b288-4b7e-893e-dcea2f2ef537] app/views/pins/index.html.erb:18:in `block in _app_views_pins_index_html_erb___1097567776692289569_70248207788000'\n2016-11-09T19:10:32.544884+00:00 app[web.1]: [6df3c971-b288-4b7e-893e-dcea2f2ef537] app/views/pins/index.html.erb:16:in `_app_views_pins_index_html_erb___1097567776692289569_70248207788000'\n</code></pre>\n\n<p>What have I done wrong as heroku is coming up with this error, not the rails app. Do I have a typo? You can see that I named the AWS_BUCKET as exactly the same in my production.rb.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "paperclip"], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1478722269, "creation_date": 1478722269, "answer_id": 40515176, "question_id": 40514466, "link": "https://stackoverflow.com/questions/40514466/could-not-find-the-ffmpeg-processor-in-any-of-these-paths-lib-paperclip-lib/40515176#40515176", "title": "Could not find the &#39;Ffmpeg&#39; processor in any of these paths: lib/paperclip, lib/paperclip_processors", "body": "<p>If you have ffmpeg installed on your system, you can first run <code>which ffmpeg</code> to get a path to the executable, i.e. <code>/usr/bin/ffmpeg</code></p>\n\n<p>Then you can symlink that into your project directory. </p>\n\n<p><em>bash</em>: <code>ln -s /usr/bin/ffmpeg lib/paperclip/ffmpeg</code></p>\n"}], "owner": {"reputation": 17, "user_id": 7017478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb51f3c6be38d52401d5d08b5c9b8ac2?s=128&d=identicon&r=PG&f=1", "display_name": "kanhaiya", "link": "https://stackoverflow.com/users/7017478/kanhaiya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 310, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1478722269, "creation_date": 1478719279, "question_id": 40514466, "link": "https://stackoverflow.com/questions/40514466/could-not-find-the-ffmpeg-processor-in-any-of-these-paths-lib-paperclip-lib", "title": "Could not find the &#39;Ffmpeg&#39; processor in any of these paths: lib/paperclip, lib/paperclip_processors", "body": "<p>Could not find the 'Ffmpeg' processor in any of these paths: lib/paperclip, lib/paperclip_processors</p>\n\n<p>Extracted source (around line #20):\n18\n19\n20\n21\n22\n23</p>\n\n<pre><code>def create\n    @post = current_user.posts.build(post_params)\n\n    if @post.save\n        redirect_to @post\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "http", "post"], "comments": [{"owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "edited": false, "score": 0, "creation_date": 1478716167, "post_id": 40513600, "comment_id": 68269080, "body": "Your&#39;e route error says this <code>No route matches [GET] &quot;&#47;recipes&#47;1&#47;like&quot;</code> but your <code>rake routes</code> output only shows <code>like_recipe POST   &#47;recipes&#47;:id&#47;like(.:format) recipes#like</code>"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1478716403, "post_id": 40513600, "comment_id": 68269190, "body": "Try inspecting the element in your browser. You can do this by right-clicking and choosing <code>inspect element</code> or something like that. What does the resulting html look like?"}, {"owner": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "edited": false, "score": 0, "creation_date": 1478717095, "post_id": 40513600, "comment_id": 68269521, "body": "why you need a POST method? (instead of GET)"}, {"owner": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "reply_to_user": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "edited": false, "score": 0, "creation_date": 1478720068, "post_id": 40513600, "comment_id": 68270939, "body": "@inye here is a great explanation of the differences between POST vs GEt <a href=\"http://stackoverflow.com/questions/3477333/what-is-the-difference-between-post-and-get\" title=\"what is the difference between post and get\">stackoverflow.com/questions/3477333/&hellip;</a> AS you can see I&#39;m submitting data to the server, not requesting any data; that is why I need a POST request."}, {"owner": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1478720227, "post_id": 40513600, "comment_id": 68270999, "body": "@moveson &lt;a rel=&quot;nofollow&quot; data-method=&quot;post&quot; href=&quot;/recipes/1/like?like=true&quot;&gt;                                                                                                        That&#39;s the HTML result"}, {"owner": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "edited": false, "score": 0, "creation_date": 1478720251, "post_id": 40513600, "comment_id": 68271010, "body": "@AlfonsoVergara  I know the difference, but why you use <code>link_to</code> instead a <code>submit</code>?"}, {"owner": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "reply_to_user": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "edited": false, "score": 0, "creation_date": 1478720355, "post_id": 40513600, "comment_id": 68271061, "body": "@inye what do you mean? I am not submitting a form. I&#39;m posting data to the database via the post method in my erb code."}, {"owner": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "reply_to_user": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "edited": false, "score": 0, "creation_date": 1478720833, "post_id": 40513600, "comment_id": 68271315, "body": "@DanRubio I understand that. I don&#39;t need a GET request instead, I need a POST request, hence the reason I created a POST route ( in routes.rb), not a GET route."}, {"owner": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "edited": false, "score": 0, "creation_date": 1478721263, "post_id": 40513600, "comment_id": 68271528, "body": "Have you tried <code>link_to like_recipe_path(@recipe), {like: true, method: :post}</code> instead?"}, {"owner": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "edited": false, "score": 0, "creation_date": 1478721321, "post_id": 40513600, "comment_id": 68271553, "body": "I hear someone tell create a link to POST is not recomend, but if you are sure about this. What if you use GET and in the controller check if is POST. According to <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActionView/Helpers/&hellip;</a> you have to <code>...If you are relying on the POST behavior, you should check for it in your controller&#39;s action by using the request object&#39;s methods for post?, delete?, patch?, or put?.</code> Also say <code>Useful for having links perform a POST operation in dangerous actions like deleting a record (which search bots can follow while spidering your site)</code>"}, {"owner": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "reply_to_user": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "edited": false, "score": 0, "creation_date": 1478721387, "post_id": 40513600, "comment_id": 68271574, "body": "@henners66 I still get the same error. The route rails wants is a GET request, even though I am requesting a POST request. Not sure what the error is,"}, {"owner": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "reply_to_user": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "edited": false, "score": 0, "creation_date": 1478721753, "post_id": 40513600, "comment_id": 68271755, "body": "@inye why is it not recommend to request data as a POST request? Second, in my recipes controller, the like action is defined. I&#39;ve already read the rails link that you provide. I am not deleting any records from the DB. No data is posted when I use a GET request because there is no data in the DB. I need to first POST data, then request it with a GET request. Please read, <a href=\"https://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9\" rel=\"nofollow noreferrer\">w3.org/Protocols/rfc2616/rfc2616-sec9.html#sec9</a>"}, {"owner": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "reply_to_user": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "edited": false, "score": 0, "creation_date": 1478721873, "post_id": 40513600, "comment_id": 68271807, "body": "@inye what would you recommend to post the data?"}, {"owner": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "edited": false, "score": 0, "creation_date": 1478722371, "post_id": 40513600, "comment_id": 68272051, "body": "ok having played around a little i eventually got it to POST by specifically adding the first attribute (rather than having it derive from the link) - i.e.     <code>link_to &#39;the text&#39;, like_recipe_path(@recipe), {like: true, method: :post}</code> - try that and see what happens"}, {"owner": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "edited": false, "score": 0, "creation_date": 1478722935, "post_id": 40513600, "comment_id": 68272323, "body": "I do not have to much knowledge but someone say me that link is no to POST and I do not remember the why."}, {"owner": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "reply_to_user": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "edited": false, "score": 0, "creation_date": 1478724425, "post_id": 40513600, "comment_id": 68273092, "body": "@henners66 unfortunately, this creates an error prior to reaching the like action. Error: undefined method `stringify_keys&#39; for &quot;/recipes/1/like&quot;:String. I think it produced this error because in lieu of the first param (&#39;the text&#39;) I&#39;m displaying an icon (the erb line right below it). When I remove the first param it works, but I get the route error."}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1478726662, "post_id": 40513600, "comment_id": 68274196, "body": "I have some buttons that work like this one, and they function just fine. The only obvious difference I see is I&#39;m using PUT instead of POST. Maybe give that a try? You&#39;ll need to change in both your <code>link_to</code> and your <code>routes.rb</code>. Make sure to restart the server after you make the changes."}, {"owner": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1478726875, "post_id": 40513600, "comment_id": 68274303, "body": "@moveson are the buttons from bootstrap?"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 1, "creation_date": 1478727100, "post_id": 40513600, "comment_id": 68274405, "body": "Yes, my entire app is styled with bootstrap."}, {"owner": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1478727101, "post_id": 40513600, "comment_id": 68274407, "body": "@moveson I still get the same error. The button_to method works but I lose my bootstrap icons. I&#39;ve used post before in link_to, so i have no idea why it&#39;s not working now. It may be that I&#39;m using cloud9 and it&#39;s somehow blocking js code, but that&#39;s unlikely."}, {"owner": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1478727157, "post_id": 40513600, "comment_id": 68274435, "body": "@moveson does this link work for you? <a href=\"https://recipe-manager-slothc0der.c9users.io/\" rel=\"nofollow noreferrer\">recipe-manager-slothc0der.c9users.io</a>"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1478727434, "post_id": 40513600, "comment_id": 68274567, "body": "It takes me to a sign-in screen. You should take a look at my project repo and see if that helps you. See the link in my answer below."}], "answers": [{"comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 1, "creation_date": 1478716510, "post_id": 40513695, "comment_id": 68269237, "body": "You should not need a GET route if it is intended only for use as a POST."}, {"owner": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "edited": false, "score": 0, "creation_date": 1478720001, "post_id": 40513695, "comment_id": 68270914, "body": "My intention is a post request, not a GET request, as listed within my question."}, {"owner": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "edited": false, "score": 0, "creation_date": 1478720606, "post_id": 40513695, "comment_id": 68271201, "body": "My intentions are to post data to the server, not request any."}], "tags": [], "owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "is_accepted": false, "score": -3, "last_activity_date": 1478716283, "creation_date": 1478716283, "answer_id": 40513695, "question_id": 40513600, "link": "https://stackoverflow.com/questions/40513600/no-route-matches-get-recipes-1-like-i-want-a-post-request/40513695#40513695", "title": "No route matches [GET] &quot;/recipes/1/like&quot; I want a POST request", "body": "<p>You need to add a GET route:</p>\n\n<pre><code>resources :recipes do\n    member do\n      get 'like'\n      post 'like'\n    end\n  end\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "edited": false, "score": 0, "creation_date": 1478724163, "post_id": 40515275, "comment_id": 68272966, "body": "This does not work. Error: &quot;undefined method `stringify_keys&#39; for &quot;/recipes/1/like&quot;:String&quot;"}, {"owner": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "reply_to_user": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "edited": false, "score": 0, "creation_date": 1478727202, "post_id": 40515275, "comment_id": 68274444, "body": "@AlfonsoVergara and  now?"}, {"owner": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "edited": false, "score": 0, "creation_date": 1478727291, "post_id": 40515275, "comment_id": 68274501, "body": "this is not working. I can&#39;t put in text in the first param because I&#39;m providing an icon for that param."}, {"owner": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "reply_to_user": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "edited": false, "score": 0, "creation_date": 1478727644, "post_id": 40515275, "comment_id": 68274667, "body": "and now? @AlfonsoVergara"}, {"owner": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "edited": false, "score": 0, "creation_date": 1478728110, "post_id": 40515275, "comment_id": 68274853, "body": "Still not working, same issue - it can&#39;t make a POST request."}, {"owner": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "reply_to_user": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "edited": false, "score": 0, "creation_date": 1478728479, "post_id": 40515275, "comment_id": 68275002, "body": "with the second option you have the same error? (stringify_keys) you delete the <code>do</code> and <code>end</code> tag?"}], "tags": [], "owner": {"reputation": 1718, "user_id": 2144445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/14196c924af54a8bcaf08e5ca40048b3?s=128&d=identicon&r=PG", "display_name": "inye", "link": "https://stackoverflow.com/users/2144445/inye"}, "is_accepted": false, "score": 0, "last_activity_date": 1478727565, "last_edit_date": 1478727565, "creation_date": 1478722603, "answer_id": 40515275, "question_id": 40513600, "link": "https://stackoverflow.com/questions/40513600/no-route-matches-get-recipes-1-like-i-want-a-post-request/40515275#40515275", "title": "No route matches [GET] &quot;/recipes/1/like&quot; I want a POST request", "body": "<p>Try with</p>\n\n<pre><code>&lt;%= link_to \"LIKE\", like_recipe_path(@recipe) ,  method: :post %&gt;\n</code></pre>\n\n<p>Other option:</p>\n\n<pre><code>&lt;%= link_to '&lt;i class=\"glyphicon glyphicon-thumbs-up\"&gt;&lt;/i&gt;'.html_safe , like_recipe_path(@recipe ,  like: 'value' ) ,  method: :post %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "edited": false, "score": 0, "creation_date": 1478725168, "post_id": 40515721, "comment_id": 68273477, "body": "I tried the button_to but then my icons are not displayed. I have already checked that I have JS on, which I do."}, {"owner": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "edited": false, "score": 0, "creation_date": 1478725317, "post_id": 40515721, "comment_id": 68273562, "body": "Also, I&#39;ve included the jquery gem into the gemfile for production and development."}, {"owner": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "edited": false, "score": 0, "creation_date": 1478725899, "post_id": 40515721, "comment_id": 68273844, "body": "Fred, I&#39;m a little confused; I am not submitting a form."}, {"owner": {"reputation": 88, "user_id": 5081028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b409a02dcd422207f48114dad361e7a8?s=128&d=identicon&r=PG", "display_name": "Fred Sladkey", "link": "https://stackoverflow.com/users/5081028/fred-sladkey"}, "reply_to_user": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "edited": false, "score": 0, "creation_date": 1478727474, "post_id": 40515721, "comment_id": 68274587, "body": "Your icons not being displayed does not sound like a side effect of <code>button_to</code>, since they are a seperate tag, is it possible anything else changed? As for submitting a form, if you&#39;re making a post request with <code>link_to</code> or <code>button_to</code> somewhere a form is being submitted, whether it&#39;s behind the scenes the with javascript for <code>link_to</code> or directly on the page for <code>button_to</code>."}], "tags": [], "owner": {"reputation": 88, "user_id": 5081028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b409a02dcd422207f48114dad361e7a8?s=128&d=identicon&r=PG", "display_name": "Fred Sladkey", "link": "https://stackoverflow.com/users/5081028/fred-sladkey"}, "is_accepted": false, "score": 0, "last_activity_date": 1478725070, "last_edit_date": 1478725070, "creation_date": 1478724299, "answer_id": 40515721, "question_id": 40513600, "link": "https://stackoverflow.com/questions/40513600/no-route-matches-get-recipes-1-like-i-want-a-post-request/40515721#40515721", "title": "No route matches [GET] &quot;/recipes/1/like&quot; I want a POST request", "body": "<p>While rails <code>link_to</code> does allow links to make requests with a method other than <code>GET</code>, it is not the normal behavior of links and relies on Javascript to make a form which gets submitted behind the scenes. Rails uses <code>jquery-ujs</code> for this, so make sure you haven't disabled it.</p>\n\n<p>That said, making <code>POST</code> requests <em>is</em> normal behavior for forms, so you could also try using <code>button_to</code> instead, and simply styling the button to look like a link if necessary.</p>\n\n<pre><code>&lt;%= button_to \"Like\",  like_recipe_path(@recipe), method: :delete, like: true  %&gt;\n</code></pre>\n\n<p>Additional Info:</p>\n\n<p><a href=\"https://github.com/rails/jquery-ujs\" rel=\"nofollow noreferrer\">https://github.com/rails/jquery-ujs</a></p>\n\n<p><a href=\"http://apidock.com/rails/ActionView/Helpers/UrlHelper/button_to\" rel=\"nofollow noreferrer\">http://apidock.com/rails/ActionView/Helpers/UrlHelper/button_to</a></p>\n"}, {"comments": [{"owner": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "edited": false, "score": 0, "creation_date": 1478727611, "post_id": 40516426, "comment_id": 68274647, "body": "Thanks, I&#39;ll check it out"}, {"owner": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "edited": false, "score": 0, "creation_date": 1478727877, "post_id": 40516426, "comment_id": 68274750, "body": "Our relevant code is almost identical in format - from the routes to the html.erb file. I do believe my icon tag is causing the app to break. I&#39;m going got remove it and add in &quot;text&quot; for the first param of link_to."}, {"owner": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "edited": false, "score": 0, "creation_date": 1478728021, "post_id": 40516426, "comment_id": 68274815, "body": "As I expected, when i remove the icon tag and add in text for the first param, it works; this has blown my mind away; it really doesn&#39;t make any sense."}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "reply_to_user": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "edited": false, "score": 1, "creation_date": 1478732494, "post_id": 40516426, "comment_id": 68276541, "body": "Use <a href=\"https://www.topdan.com/ruby-on-rails/ajax-toggle-buttons.html\" rel=\"nofollow noreferrer\">this method</a> instead. Better in every way. I&#39;m using it for my follow/unfollow buttons, and it is slick."}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": false, "score": 1, "last_activity_date": 1478727357, "creation_date": 1478727357, "answer_id": 40516426, "question_id": 40513600, "link": "https://stackoverflow.com/questions/40513600/no-route-matches-get-recipes-1-like-i-want-a-post-request/40516426#40516426", "title": "No route matches [GET] &quot;/recipes/1/like&quot; I want a POST request", "body": "<p>Here's the relevant code from my working project with a similar arrangement.</p>\n\n<pre><code># /views/events/splits.html.erb:\n\n&lt;%= link_to \"Add\",\n   associate_splits_event_path(id: @event.id, split_ids: [split.id]),\n   :method =&gt; :put,\n   :class =&gt; 'btn btn-xs btn-success' %&gt;\n\n# routes.rb\n\n  resources :events do\n    member { put :associate_splits }\n  end\n</code></pre>\n\n<p>If it's helpful to see it in context, feel free to poke around the repo. Here's a link to the view: <a href=\"https://github.com/SplitTime/OpenSplitTime/blob/master/app/views/events/splits.html.erb\" rel=\"nofollow noreferrer\">https://github.com/SplitTime/OpenSplitTime/blob/master/app/views/events/splits.html.erb</a></p>\n"}], "owner": {"reputation": 1086, "user_id": 2875421, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wEEgK.jpg?s=128&g=1", "display_name": "Alfonso Vergara", "link": "https://stackoverflow.com/users/2875421/alfonso-vergara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1478727565, "creation_date": 1478715859, "last_edit_date": 1478720448, "question_id": 40513600, "link": "https://stackoverflow.com/questions/40513600/no-route-matches-get-recipes-1-like-i-want-a-post-request", "title": "No route matches [GET] &quot;/recipes/1/like&quot; I want a POST request", "body": "<p>I've never encountered this problem before. I'm getting this error.</p>\n\n<pre><code>No route matches [GET] \"/recipes/1/like\"\n</code></pre>\n\n<p>Here is my routes.rb:</p>\n\n<pre><code>Rails.application.routes.draw do\n\n  root 'pages#home'\n\n  get '/home', to: \"pages#home\"\n\n  resources :recipes do\n    member do\n      post 'like'\n    end\n  end\nend\n</code></pre>\n\n<p>Here is my recipes_controller:</p>\n\n<pre><code>  def like\n    @recipe = Recipe.create(params[:id])\n    Like.create(like: params[:like], chef: Chef.first, recipe: @recipe)\n    #flash message\n    flash[:success] = \"Your selection was sucessful\"\n    redirect_to :back\n  end\n</code></pre>\n\n<p>Here is my html.erb file:</p>\n\n<pre><code>&lt;%= render 'shared/page_title', title: @recipe.name.titleize  %&gt;\n\n&lt;div class= \"row\"&gt;\n  &lt;div class=\"col-md-4 pull-right center\"&gt;\n    &lt;%= gravator_for @recipe.chef, size: 200 %&gt;\n    &lt;p&gt;\n      &lt;h5&gt;Brought to you by: &lt;%= @recipe.chef.chefname.capitalize %&gt;&lt;/h5&gt;\n    &lt;/p&gt;\n  &lt;/div&gt;\n  &lt;div class= \"col-xs-8 col-md-8\"&gt;\n    &lt;%= link_to \"Edit this Recipe\", edit_recipe_path(@recipe), class: \"btn btn-success pull-right\" %&gt;\n    &lt;h3&gt;&lt;%= @recipe.summary.capitalize %&gt;&lt;/h3&gt;\n    &lt;div class=\"show_recipe\"&gt;\n      &lt;%= image_tag(@recipe.picture.url, size: \"300x200\", class: \"recipe-image\") if @recipe.picture? %&gt;\n    &lt;/div&gt;\n    &lt;div class =\"well recipe-description\"&gt;\n      &lt;p&gt;\n        &lt;strong&gt; Steps:&lt;/strong&gt;\n      &lt;/p&gt;\n        &lt;%= simple_format(@recipe.description) %&gt;\n        &lt;div class=\"pull-right\"&gt;\n          &lt;%= link_to like_recipe_path(@recipe, like: true), method: :post do %&gt;\n            &lt;i class=\"glyphicon glyphicon-thumbs-up\"&gt;&lt;/i&gt;\n          &lt;% end %&gt; &amp;nbsp&amp;nbsp&amp;nbsp&amp;nbsp\n          &lt;%= link_to like_recipe_path(@recipe, like: false), :method =&gt; :post do %&gt;\n            &lt;i class=\"glyphicon glyphicon-thumbs-down\"&gt;&lt;/i&gt;\n          &lt;% end %&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;h5&gt;&lt;%= link_to \"Return to Recipes Listings\", recipes_path, class: \"btn btn-warning btn-small\" %&gt;&lt;/h5&gt;\n</code></pre>\n\n<p>I've explicitly added the HTTP POST request to my html.erb file</p>\n\n<pre><code>%= link_to like_recipe_path(@recipe, like: true), method: :post do %&gt;\n</code></pre>\n\n<p>but rails is complaining that there is no GET route request, which I never created in my routes because I need a POST request for this particular section of the web app.</p>\n\n<p>Rake routes:</p>\n\n<pre><code>     Prefix Verb   URI Pattern                 Controller#Action\n       root GET    /                           pages#home\n       home GET    /home(.:format)             pages#home\nlike_recipe POST   /recipes/:id/like(.:format) recipes#like\n    recipes GET    /recipes(.:format)          recipes#index\n            POST   /recipes(.:format)          recipes#create\n new_recipe GET    /recipes/new(.:format)      recipes#new\nedit_recipe GET    /recipes/:id/edit(.:format) recipes#edit\n     recipe GET    /recipes/:id(.:format)      recipes#show\n            PATCH  /recipes/:id(.:format)      recipes#update\n            PUT    /recipes/:id(.:format)      recipes#update\n            DELETE /recipes/:id(.:format)      recipes#destroy\n</code></pre>\n\n<p>I am honestly lost. It seems that everything is in its right place.</p>\n\n<p>Rails version:</p>\n\n<pre><code>Rails 4.2.5\n</code></pre>\n\n<p>I've defined the action, created the like model, nested the route under recipes, and explicitly requested for a post HTTP request in the html.erb page.</p>\n\n<p>Any ideas would be great!</p>\n\n<p>Cheers!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1478717373, "post_id": 40513373, "comment_id": 68269646, "body": "Can the array contain elements that are not integers (e.g, &quot;cat&quot;)?"}, {"owner": {"reputation": 354, "user_id": 4909929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccfe2b48c23efcea2ada16ce6f29d2ba?s=128&d=identicon&r=PG", "display_name": "Kirill Zhuravlov", "link": "https://stackoverflow.com/users/4909929/kirill-zhuravlov"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1478717858, "post_id": 40513373, "comment_id": 68269866, "body": "In my case - no, but I think the solution with other types of elements will be interesting to all."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1478732023, "post_id": 40513373, "comment_id": 68276348, "body": "Welcome to Stack Overflow. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Instead of asking us all the ways to do it, which is too broad, instead you should ask a specific question about how you did it."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1478716938, "post_id": 40513385, "comment_id": 68269439, "body": "Instead of <code>.find</code>, it&#39;s better to use <code>.any?</code> here :) <code>a.any?(&amp;:positive?)</code> or <code>a.none?(&amp;:negative?)</code>"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1478717069, "post_id": 40513385, "comment_id": 68269504, "body": "@SergioTulentsev I think <code>find</code> will work best here, since will stop iterating once find a positive number. Or is <code>any?</code>&#39;s underhood faster?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1478717143, "post_id": 40513385, "comment_id": 68269545, "body": "<code>.any?</code> short-circuits too, of course. And it reads better. You know, revealing intention, all that."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1478717246, "post_id": 40513385, "comment_id": 68269593, "body": "@SergioTulentsev agree, <code>any?</code> reveals the intention better. Thanks for commenting!"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 15, "last_activity_date": 1478720688, "last_edit_date": 1478720688, "creation_date": 1478715030, "answer_id": 40513385, "question_id": 40513373, "link": "https://stackoverflow.com/questions/40513373/ruby-how-to-check-that-all-elements-in-array-are-negative-integers/40513385#40513385", "title": "Ruby: How to check that all elements in array are negative integers", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.3.1/Enumerable.html#method-i-all-3F\" rel=\"noreferrer\">Enumerable#<code>all?</code></a> here:</p>\n\n<pre><code>[-1,-2,-3,-4].all?(&amp;:negative?)\n#=&gt; true\n</code></pre>\n\n<p>Btw, I think you are confused with what is happening here:</p>\n\n<pre><code>a.select(&amp;:negative?) == true\n</code></pre>\n\n<p>This is not checking whether all elements are negative. What it is in fact is comparing resulting array of negative numbers with <code>false</code>:</p>\n\n<pre><code>[-1,-2,-3,-4] == false\n</code></pre>\n\n<p>Of course, it will always return <code>false</code>, because only <code>false</code> is equal to <code>false</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 354, "user_id": 4909929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccfe2b48c23efcea2ada16ce6f29d2ba?s=128&d=identicon&r=PG", "display_name": "Kirill Zhuravlov", "link": "https://stackoverflow.com/users/4909929/kirill-zhuravlov"}, "edited": false, "score": 0, "creation_date": 1478717984, "post_id": 40514010, "comment_id": 68269927, "body": "This is great answer!"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 354, "user_id": 4909929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccfe2b48c23efcea2ada16ce6f29d2ba?s=128&d=identicon&r=PG", "display_name": "Kirill Zhuravlov", "link": "https://stackoverflow.com/users/4909929/kirill-zhuravlov"}, "edited": false, "score": 1, "creation_date": 1478760079, "post_id": 40514010, "comment_id": 68283502, "body": "@KirillZhuravlov I noticed, you almost never accepted an answer to any of your questions. Please, walk through your past questions and make sure to checkmark the answers, that solved your problems, this way you let the community know that the issue is solved and, also, reward the effort of the user who has given this answer."}, {"owner": {"reputation": 354, "user_id": 4909929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccfe2b48c23efcea2ada16ce6f29d2ba?s=128&d=identicon&r=PG", "display_name": "Kirill Zhuravlov", "link": "https://stackoverflow.com/users/4909929/kirill-zhuravlov"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1478773991, "post_id": 40514010, "comment_id": 68291059, "body": "@AndreyDeineko thank you to your notice, I did it as you suggest."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 6, "last_activity_date": 1478723848, "last_edit_date": 1478723848, "creation_date": 1478717500, "answer_id": 40514010, "question_id": 40513373, "link": "https://stackoverflow.com/questions/40513373/ruby-how-to-check-that-all-elements-in-array-are-negative-integers/40514010#40514010", "title": "Ruby: How to check that all elements in array are negative integers", "body": "<p>You could simply consider the largest value:</p>\n\n<pre><code>arr = [-1,-2,-3,-4]\narr.empty? ? false : arr.max &lt; 0\n  #=&gt; true\n</code></pre>\n\n<p>if the array contains only integers. If the array may contain elements that are not integers, one must first confirm that only integers are present.</p>\n\n<pre><code>arr = [-1,-2,-3,-4, \"cat\", { a:1 }]\nreturn false unless arr.all? { |e| e.is_a?(Fixnum) }\n  #=&gt; false returned\n</code></pre>\n"}], "owner": {"reputation": 354, "user_id": 4909929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ccfe2b48c23efcea2ada16ce6f29d2ba?s=128&d=identicon&r=PG", "display_name": "Kirill Zhuravlov", "link": "https://stackoverflow.com/users/4909929/kirill-zhuravlov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4152, "favorite_count": 0, "accepted_answer_id": 40513385, "answer_count": 2, "score": 3, "last_activity_date": 1478723848, "creation_date": 1478714963, "question_id": 40513373, "link": "https://stackoverflow.com/questions/40513373/ruby-how-to-check-that-all-elements-in-array-are-negative-integers", "title": "Ruby: How to check that all elements in array are negative integers", "body": "<p>I have the arrays <code>a = [-1,-2,-3,-4]</code> and <code>b = [-1,-2,-3,4]</code></p>\n\n<p>How can I make sure that <code>a</code> contains only negative integers? \nI can check that some of elements are negative <code>a.select(&amp;:negative?) == true</code> and <code>b.select(&amp;:negative?) == true</code></p>\n\n<p>But I need to know that <code>b.select(&amp;:negative?).only == true</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1478713082, "post_id": 40512157, "comment_id": 68267558, "body": "Which Ruby version did the project use before? Why are you not using the same version as in the original project? Don&#39;t create more troubles for yourself than you need to create."}, {"owner": {"reputation": 4451, "user_id": 788652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1daf5af7198f084898f5c0d5c4b909d5?s=128&d=identicon&r=PG", "display_name": "Hendrik", "link": "https://stackoverflow.com/users/788652/hendrik"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1478715033, "post_id": 40512157, "comment_id": 68268541, "body": "That was <code>2.0.0-p481</code>. I&#39;ll give that a shot."}, {"owner": {"reputation": 4451, "user_id": 788652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1daf5af7198f084898f5c0d5c4b909d5?s=128&d=identicon&r=PG", "display_name": "Hendrik", "link": "https://stackoverflow.com/users/788652/hendrik"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1478715060, "post_id": 40512157, "comment_id": 68268554, "body": "I remember now why I upgraded: <code>WARNING: ruby-2.0.0-p481 is past its end of life and is now unsupported. It no longer receives bug fixes or critical security updates.</code>"}], "answers": [{"comments": [{"owner": {"reputation": 4451, "user_id": 788652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1daf5af7198f084898f5c0d5c4b909d5?s=128&d=identicon&r=PG", "display_name": "Hendrik", "link": "https://stackoverflow.com/users/788652/hendrik"}, "edited": false, "score": 0, "creation_date": 1478712011, "post_id": 40512469, "comment_id": 68267023, "body": "I downgraded to Ruby 2. Now I get a a lot of other warnings as well. I suspect I have something that does some madness with my tests. <code>(eval):11: warning: instance variable @opening_hours_monday_from not initialized</code> for instance."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 4451, "user_id": 788652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1daf5af7198f084898f5c0d5c4b909d5?s=128&d=identicon&r=PG", "display_name": "Hendrik", "link": "https://stackoverflow.com/users/788652/hendrik"}, "edited": false, "score": 0, "creation_date": 1478712216, "post_id": 40512469, "comment_id": 68267127, "body": "@Hendrik Ouch..sounds complicated :-/"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 2, "creation_date": 1478712255, "post_id": 40512469, "comment_id": 68267149, "body": "You can try running it as <code>RUBYOPT=&quot;-W0&quot; rake test</code>"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1478712344, "post_id": 40512469, "comment_id": 68267190, "body": "@max Thx. See last line of his question."}, {"owner": {"reputation": 4451, "user_id": 788652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1daf5af7198f084898f5c0d5c4b909d5?s=128&d=identicon&r=PG", "display_name": "Hendrik", "link": "https://stackoverflow.com/users/788652/hendrik"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1478712450, "post_id": 40512469, "comment_id": 68267246, "body": "@max why do I have to this? I never had to do this before in other rails projects."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1478712570, "post_id": 40512469, "comment_id": 68267316, "body": "Turning off warnings and downgrading software is a <i>last resort</i>. I hope upgrading is a possibility. You&#39;re exposing yourself to huge amounts of risk here."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 4451, "user_id": 788652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1daf5af7198f084898f5c0d5c4b909d5?s=128&d=identicon&r=PG", "display_name": "Hendrik", "link": "https://stackoverflow.com/users/788652/hendrik"}, "edited": false, "score": 0, "creation_date": 1478712579, "post_id": 40512469, "comment_id": 68267323, "body": "@Hendrik As I explained. You have an old(er) Rails version with a new(er) Ruby version. <code>File.exists?</code> was deprecated, but it&#39;s used in the old Rails version still. Just edit the gem files, that&#39;s what I would do (though this depends on if this project is only a local project or a shared/deployable project. If the project is shared then editing gem files directly is not a good idea)."}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 1, "last_activity_date": 1478712500, "last_edit_date": 1490005097, "creation_date": 1478711494, "answer_id": 40512469, "question_id": 40512157, "link": "https://stackoverflow.com/questions/40512157/my-rails-tests-produce-gibberish-output/40512469#40512469", "title": "My rails tests produce gibberish output", "body": "<p>Three (other) options to get rid of the warning:</p>\n\n<ol>\n<li><p>Downgrade Ruby until the warning goes away. You're using an old version of Rails which was created before Ruby 2.2. <code>File.exists?</code> was deprecated sometime before Ruby 2.2.</p></li>\n<li><p>Manually edit the offending lines in your gem repository. </p></li>\n<li><p>Run a mass search and replace shell command in your gem repository:<br>\n<a href=\"https://superuser.com/questions/428493/how-can-i-do-a-recursive-find-and-replace-from-the-command-line\">https://superuser.com/questions/428493/how-can-i-do-a-recursive-find-and-replace-from-the-command-line</a></p></li>\n</ol>\n\n<p>...and of course the final option: upgrade Rails.</p>\n"}], "owner": {"reputation": 4451, "user_id": 788652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1daf5af7198f084898f5c0d5c4b909d5?s=128&d=identicon&r=PG", "display_name": "Hendrik", "link": "https://stackoverflow.com/users/788652/hendrik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 40512469, "answer_count": 1, "score": 1, "last_activity_date": 1479289922, "creation_date": 1478710405, "last_edit_date": 1479289922, "question_id": 40512157, "link": "https://stackoverflow.com/questions/40512157/my-rails-tests-produce-gibberish-output", "title": "My rails tests produce gibberish output", "body": "<p>I just overtook a new project and the <code>rake test</code> produces a lot of gibberish output. Why is that the case? I tried removing all gems I don't know, but still my output is clouded. I am calling the test suite via <code>bundle exec rake test</code>.</p>\n\n<p>Sample output - it's pages of this kind of stuff.</p>\n\n<pre><code>/Users/hendricius/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/activesupport-3.2.22.5/lib/active_support/file_update_checker.rb:98: warning: File.exists? is a deprecated name,\nuse File.exist? instead\n/Users/hendricius/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/activesupport-3.2.22.5/lib/active_support/file_update_checker.rb:98: warning: File.exists? is a deprecated name,\nuse File.exist? instead\n/Users/hendricius/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/activesupport-3.2.22.5/lib/active_support/file_update_checker.rb:98: warning: File.exists? is a deprecated name,\nuse File.exist? instead\n/Users/hendricius/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/activesupport-3.2.22.5/lib/active_support/file_update_checker.rb:98: warning: File.exists? is a deprecated name,\nuse File.exist? instead\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/mMEms.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mMEms.png\" alt=\"screenshot of the tests running\"></a></p>\n\n<p>The ruby version from the <code>.ruby-version</code> file is <code>2.2.2</code>. The installed rails version is <code>3.2.22.5</code>.</p>\n\n<p>My test gems are:</p>\n\n<pre><code>group :test, :development do\n  # gem 'rack-mini-profiler'\n  # gem 'minitest'\n  gem 'minitest-rails'\n  gem 'test-unit'\n  gem 'shoulda'\n  gem 'shoulda-matchers'\n  gem 'fabrication'\n  gem 'byebug'\nend\n</code></pre>\n\n<p>I then double checked my <code>Rakefile</code>. It has the following content:</p>\n\n<pre><code># Add your own tasks in files placed in lib/tasks ending in .rake,\n# for example lib/tasks/capistrano.rake, and they will automatically be available to Rake.\n\nrequire File.expand_path('../config/application', __FILE__)\n\nWooWoop::Application.load_tasks\n\ntask default: [:test]\n</code></pre>\n\n<p>The only other thing I could imagine would be my <code>test_helper</code>. I pasted the contents below. It looks good.</p>\n\n<pre><code>ENV[\"RAILS_ENV\"] = \"test\"\nrequire File.expand_path(\"../../config/environment\", __FILE__)\nrequire \"rails/test_help\"\nrequire \"minitest/rails\"\nrequire \"minitest/pride\"\nrequire 'shoulda'\nrequire 'shoulda/matchers'\n# $VERBOSE=nil\n\n# ActiveRecord::Migration.check_pending!\nActiveSupport::TestCase.test_order = :random\n# Protractor test or even some dirty debugging in the rails console on test environment\n# might have left some garbage on the DB. Lets make sure we start with a clean state.\n# parses the response and returns it.\n</code></pre>\n\n<p>The only way I can silence the output is if I use <code>RUBYOPT=W0 TEST=test/unit/shop_test.rb be rake test</code>. Is that the only way since I am using rails 3 still?</p>\n\n<p><strong>Update:</strong></p>\n\n<p>I now tried to downgrade to ruby 2.0.0</p>\n\n<p>I still get a lot of strange warnings I have never seen before.</p>\n\n<pre><code>/Users/hendricius/.rbenv/versions/2.0.0-p648/lib/ruby/gems/2.0.0/gems/carrierwave-0.10.0/lib/carrierwave/uploader/configuration.rb:89: warning: instance variable @mount_on not in\nitialized\n/Users/hendricius/.rbenv/versions/2.0.0-p648/lib/ruby/gems/2.0.0/gems/carrierwave-0.10.0/lib/carrierwave/mount.rb:243: warning: instance variable @previous_model_for_showcase_cov\ner_picture not initialized\n/Users/hendricius/.rbenv/versions/2.0.0-p648/lib/ruby/gems/2.0.0/gems/carrierwave-0.10.0/lib/carrierwave/uploader/configuration.rb:89: warning: instance variable @mount_on not in\nitialized\n/Users/hendricius/.rbenv/versions/2.0.0-p648/lib/ruby/gems/2.0.0/gems/carrierwave-0.10.0/lib/carrierwave/mount.rb:243: warning: instance variable @previous_model_for_manager_pict\nure not initialized\n(eval):11: warning: instance variable @opening_hours_monday_from not initialized\n(eval):2: warning: instance variable @opening_hours_monday_to not initialized\n(eval):11: warning: instance variable @opening_hours_tuesday_from not initialized\n(eval):2: warning: instance variable @opening_hours_tuesday_to not initialized\n(eval):11: warning: instance variable @opening_hours_wednesday_from not initialized\n(eval):2: warning: instance variable @opening_hours_wednesday_to not initialized\n(eval):11: warning: instance variable @opening_hours_thursday_from not initialized\n(eval):2: warning: instance variable @opening_hours_thursday_to not initialized\n(eval):11: warning: instance variable @opening_hours_friday_from not initialized\n(eval):2: warning: instance variable @opening_hours_friday_to not initialized\n(eval):11: warning: instance variable @opening_hours_saturday_from not initialized\n(eval):2: warning: instance variable @opening_hours_saturday_to not initialized\n</code></pre>\n\n<p>Edit:</p>\n\n<p>I ultimately ended up upgrading to rails 4. All the warnings are gone.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1478709545, "post_id": 40511824, "comment_id": 68265668, "body": "You have to use <code>case</code> instead of <code>case key_int</code>."}, {"owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1478709656, "post_id": 40511824, "comment_id": 68265739, "body": "Did I miss something? This blog told me otherwise <a href=\"http://blog.honeybadger.io/rubys-case-statement-advanced-techniques/\" rel=\"nofollow noreferrer\">blog.honeybadger.io/rubys-case-statement-advanced-techniques</a>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1478710470, "post_id": 40511824, "comment_id": 68266171, "body": "The blog post uses a lambda and a custom matcher class to compare via <code>==</code> and <code>&lt;</code>."}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 4, "last_activity_date": 1478710344, "creation_date": 1478710344, "answer_id": 40512139, "question_id": 40511824, "link": "https://stackoverflow.com/questions/40511824/why-is-my-case-statement-failing-despite-the-condition-being-true/40512139#40512139", "title": "Why is my case statement failing despite the condition being true?", "body": "<p>If you specify an object right after <code>case</code>, it will be compared against each <code>when</code> pattern via <code>pattern === object</code>.</p>\n\n<p>In this example:</p>\n\n<pre><code>case key_int\nwhen key_int == 2\n  # ...\nend\n</code></pre>\n\n<p>it will compare <code>key_int</code>  against <code>key_int == 2</code> like this:</p>\n\n<pre><code>(key_int == 2) === key_int\n</code></pre>\n\n<p>Assuming that <code>key_int</code> is <code>2</code>, the above becomes:</p>\n\n<pre><code>true === 2\n</code></pre>\n\n<p>which evaluates to <code>false</code>.</p>\n\n<p>To use a <code>case</code> expression like an <code>if-elsif</code> expression, you have to omit the initial object:</p>\n\n<pre><code>case\nwhen key_int == 2\n  # ...\nend\n</code></pre>\n\n<p>See Ruby's documentation on the  <a href=\"http://ruby-doc.org/core-2.3.1/doc/syntax/control_expressions_rdoc.html#label-case+Expression\" rel=\"nofollow noreferrer\"><code>case</code> Expression</a> for another example.</p>\n"}], "owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 40512139, "answer_count": 1, "score": 2, "last_activity_date": 1478710344, "creation_date": 1478709295, "question_id": 40511824, "link": "https://stackoverflow.com/questions/40511824/why-is-my-case-statement-failing-despite-the-condition-being-true", "title": "Why is my case statement failing despite the condition being true?", "body": "<p>I'm working on a kata that tallies scores based on the role of five six sided die. Here is my code so far:</p>\n\n<pre><code>def score( dice )\n    points = []\n    score = {}\n    dice.each do |n|\n      if score.has_key?(n.to_s.to_sym)\n        score[n.to_s.to_sym] += 1\n      else\n        score[n.to_s.to_sym] = 1\n      end\n    end\n\n    score.each do |k,v|\n      key_int = k.to_s.to_i\n\n      case key_int\n      when key_int == 1 &amp;&amp; (v == 3)\n        points &lt;&lt; 1000\n      when key_int == 6 &amp;&amp; (v == 3)\n        points &lt;&lt; 600\n      when key_int == 5 &amp;&amp; (v == 3)\n        points &lt;&lt; 500\n      when key_int == 4 &amp;&amp; (v == 3)\n        points &lt;&lt; 400\n      when key_int == 3 &amp;&amp; (v == 2)\n        points &lt;&lt; 300\n      when key_int == 2 &amp;&amp; (v == 3)\n        puts \"did I get here\"\n      points &lt;&lt; 200\n      when key_int == 1 &amp;&amp; (v &lt; 3)\n        points &lt;&lt; key_int * v\n      when key_int == 5 &amp;&amp; (v &lt; 3)\n        points &lt;&lt; key_int * v\n      else\n      puts \"Default\"\n    end\n  end\n  points\nend\n\nputs score([2, 2, 2, 3, 3]) ==&gt; 200\n</code></pre>\n\n<p>So at a basic level for this example, what's happening is when my each loop hits the hash I get this condition of:</p>\n\n<pre><code>key_int == 2 &amp;&amp; (v == 3)\n</code></pre>\n\n<p>and insert it into the code before the case statement, I get a value of <code>true</code> but I never reach the condition of <code>points &lt;&lt; 200</code>. For simplification I whittled down the code to this for the case logic.</p>\n\n<pre><code>score.each do |k,v|\n  key_int = k.to_s.to_i\n  case key_int\n  when key_int == 2\n    puts \"I reached the condition\"\n  else\n    puts \"default\"\n  end\nend\n</code></pre>\n\n<p>I still get the default and I never reach the <code>when</code> condition. This is confusing me. What am I possibly doing wrong?</p>\n"}, {"tags": ["ruby", "chef-infra", "chef-recipe"], "answers": [{"comments": [{"owner": {"reputation": 929, "user_id": 4575233, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh4.googleusercontent.com/-Iz7MEWiPUZQ/AAAAAAAAAAI/AAAAAAAABFc/LBIcxx0h5qk/photo.jpg?sz=128", "display_name": "Mikyjpeg", "link": "https://stackoverflow.com/users/4575233/mikyjpeg"}, "edited": false, "score": 0, "creation_date": 1478709950, "post_id": 40511689, "comment_id": 68265887, "body": "The { } solved the problem. I didn&#39;t think about that. Thanks!"}, {"owner": {"reputation": 501, "user_id": 4978971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12568bf3b1251cdccebcbcabdc3f241c?s=128&d=identicon&r=PG&f=1", "display_name": "JackChance", "link": "https://stackoverflow.com/users/4978971/jackchance"}, "edited": false, "score": 0, "creation_date": 1478728207, "post_id": 40511689, "comment_id": 68274887, "body": "if you want to do it more Ruby-ish you could also append a conditional to the batch resource call, i.e.  <code>batch &#39;run command&#39; do ... end unless &lt;logic for disabled service&gt;</code>"}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 4, "last_activity_date": 1563193288, "last_edit_date": 1563193288, "creation_date": 1478708834, "answer_id": 40511689, "question_id": 40511525, "link": "https://stackoverflow.com/questions/40511525/can-i-use-guards-to-chef-if-a-windows-service-is-running/40511689#40511689", "title": "Can I use guards to chef if a windows service is running?", "body": "<p>The way you wrote your <code>not_if</code> statement runs the command as a shell script.\nThe shell doesn't know Ruby code, so the whole command will fail.\nNeed to first:</p>\n\n<p><code>require win32/service</code></p>\n\n<p>In order to use <code>not_if</code> with Ruby code you should put it inside a block instead:</p>\n\n<pre><code>not_if { ::Win32::Service.exists?(\"Service name\") }\n</code></pre>\n\n<p>See some more examples here (search for <code>not_if</code> on the page):<br>\n<a href=\"https://docs.chef.io/resource_common.html\" rel=\"nofollow noreferrer\">https://docs.chef.io/resource_common.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 9661308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b16838c6fac76df6e0db33077228d77?s=128&d=identicon&r=PG", "display_name": "Ram Prasad", "link": "https://stackoverflow.com/users/9661308/ram-prasad"}, "is_accepted": false, "score": 1, "last_activity_date": 1534887737, "creation_date": 1534887737, "answer_id": 51957073, "question_id": 40511525, "link": "https://stackoverflow.com/questions/40511525/can-i-use-guards-to-chef-if-a-windows-service-is-running/51957073#51957073", "title": "Can I use guards to chef if a windows service is running?", "body": "<p>Here is the working example (Chef 13)</p>\n\n<pre><code>   require 'win32/service'\n   windows_service \"jenkins\" do\n      action [:stop, :disable]\n      only_if { ::Win32::Service.exists?(\"jenkins\")}\n   end\n</code></pre>\n"}], "owner": {"reputation": 929, "user_id": 4575233, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh4.googleusercontent.com/-Iz7MEWiPUZQ/AAAAAAAAAAI/AAAAAAAABFc/LBIcxx0h5qk/photo.jpg?sz=128", "display_name": "Mikyjpeg", "link": "https://stackoverflow.com/users/4575233/mikyjpeg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1996, "favorite_count": 0, "accepted_answer_id": 40511689, "answer_count": 2, "score": 2, "last_activity_date": 1563193288, "creation_date": 1478708309, "last_edit_date": 1592644375, "question_id": 40511525, "link": "https://stackoverflow.com/questions/40511525/can-i-use-guards-to-chef-if-a-windows-service-is-running", "title": "Can I use guards to chef if a windows service is running?", "body": "<p>I'm writing a chef recipe and on this I need to perform an operation (run a batch) only if a service is not working.\nI use this snippet:</p>\n<pre><code>batch 'run commnad' do\n  cwd target_path + '/bin/win64'\n    code 'command to be executed'\n    not_if '::Win32::Service.exists?(&quot;Service name&quot;)'\nend\n</code></pre>\n<p>But it does not seems to work. After seeing <a href=\"https://stackoverflow.com/questions/20131754/chef-how-do-i-check-to-see-if-a-service-is-installed\">this</a> question I changed the process using an if clause instead of the guard and it works fine:</p>\n<pre><code>if !::Win32::Service.exists?(&quot;Service name&quot;) then\n  batch 'Install zabbix agent' do\n    cwd target_path + '/bin/win64'\n    code 'command to be executed'\n  end\nend\n</code></pre>\n<p>But this should not be, for what I understood, the right way to manage this, so I'm wondering: why is the guard not working properly?</p>\n<p>Thanks,\nMichele.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 1, "creation_date": 1478708447, "post_id": 40511503, "comment_id": 68265028, "body": "I don&#39;t think you want <code>IRB</code>, I think you want <code>rails c</code>"}, {"owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "reply_to_user": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 1, "creation_date": 1478708833, "post_id": 40511503, "comment_id": 68265274, "body": "How embarrassing, Oh well. Early days!"}], "answers": [{"tags": [], "owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "is_accepted": true, "score": 3, "last_activity_date": 1478778585, "creation_date": 1478778585, "answer_id": 40526916, "question_id": 40511503, "link": "https://stackoverflow.com/questions/40511503/irb-does-not-have-access-to-my-models-nameerror-uninitialized-constant/40526916#40526916", "title": "irb does not have access to my models (NameError: uninitialized constant)", "body": "<p><code>irb</code> does not automatically load your Rails environment, which is why it does not have access to your models (or helpers, or database, or anything else).  However, the \"rails console\" is an irb session that does load all of your Rails classes, database connections, etc.</p>\n\n<p>To start the rails console:</p>\n\n<pre><code>rails c\n</code></pre>\n\n<p>Which is shorthand for:</p>\n\n<pre><code>rails console\n</code></pre>\n\n<p>This starts the rails console for your development environment.  You can make it connect to your test environment:</p>\n\n<pre><code>rails c RAILS_ENV=test\n</code></pre>\n\n<p>or to your production environment:</p>\n\n<pre><code>rails c RAILS_ENV=production\n</code></pre>\n"}], "owner": {"reputation": 757, "user_id": 6939256, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/e25b477a55a8048071d22e032ecf22f0?s=128&d=identicon&r=PG&f=1", "display_name": "Benjamints", "link": "https://stackoverflow.com/users/6939256/benjamints"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 810, "favorite_count": 1, "accepted_answer_id": 40526916, "answer_count": 1, "score": 4, "last_activity_date": 1478778585, "creation_date": 1478708264, "last_edit_date": 1478778402, "question_id": 40511503, "link": "https://stackoverflow.com/questions/40511503/irb-does-not-have-access-to-my-models-nameerror-uninitialized-constant", "title": "irb does not have access to my models (NameError: uninitialized constant)", "body": "<p>I am receiving this error when trying to create a new 'Pin' in IRB. For example:</p>\n\n<pre><code>irb(main):001:0&gt; @pin = Pin.first\nNameError: uninitialized constant Pin\n</code></pre>\n\n<p>OR</p>\n\n<pre><code>irb(main):001:0&gt; @pin = Pin.new\nNameError: uninitialized constant Pin\n</code></pre>\n\n<p>I must of changed something as it was working before. Unfortunately, I cannot find the error</p>\n\n<p>Here is my pins controller:</p>\n\n<pre><code>  class PinsController &lt; ApplicationController\n  before_action :authenticate_user!, except: [:index, :show]\n  before_action :correct_user, only: [:edit, :update, :destroy]\n  before_action :set_pin, only: [:show, :edit, :update, :destroy]\n\n  def index\n    @pins = Pin.all\n  end\n\n  def show\n    @pin = Pin.find params[:id]\n  end\n\n  def new\n    @pin = Pin.new\n  end\n\n  def edit\n  end\n\n  def create\n    @pin = Pin.new(pin_params)\n    if @pin.save\n      redirect_to @pin, notice: 'Pin was successfully created.'\n    else\n      render action: 'new'\n    end\n  end\n\n  def update\n    if @pin.update(pin_params)\n      redirect_to @pin, notice: 'Pin was successfully updated.'\n    else\n      render action: 'edit'\n    end\n  end\n\n  def destroy\n    @pin.destroy\n    redirect_to pins_url\n  end\n\n  private\n\n  # Use callbacks to share common setup or constraints between actions.\n  def set_pin\n    @pin = Pin.find(params[:id])\n  end\n\n  def correct_user\n    @pin = current_user.pins.find(params[:id])\n    redirect_to pins_path, notice: \"Not allowed!\" if @pin.nil?\n  end\n\n  # Never trust parameters from the scary internet, only allow the white list through.\n  def pin_params\n    params.require(:pin).permit(:description)\n  end\nend\n</code></pre>\n\n<p>Here is are my associations, pin.rb</p>\n\n<pre><code>class Pin &lt; ApplicationRecord\n  belongs_to :user\nend\n</code></pre>\n\n<p>And my associations for User.rb:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n  has_many :pins\nend\n</code></pre>\n\n<p>and my routes</p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :pins\n  devise_for :users\n  root \"pages#home\"\n\n  get \"about\" =&gt; \"pages#about\"\n\nend  \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "heroku", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "edited": false, "score": 1, "creation_date": 1478707658, "post_id": 40511204, "comment_id": 68264549, "body": "Have you run your migrations on Heroku? Seems that could be the culprit."}, {"owner": {"reputation": 25, "user_id": 4949630, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/998160156868839/picture?type=large", "display_name": "Roman Kanafotskiy", "link": "https://stackoverflow.com/users/4949630/roman-kanafotskiy"}, "reply_to_user": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "edited": false, "score": 0, "creation_date": 1478707772, "post_id": 40511204, "comment_id": 68264620, "body": "@NickM, I did. Also recreated the db on heroku - didn&#39;t work either."}, {"owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 0, "creation_date": 1478716323, "post_id": 40511204, "comment_id": 68269146, "body": "Did you <code>git add .</code> and <code>git commit -m &quot;added mig&quot;</code> your migration so that it can be pushed to heroku and then run <code>heroku run rake db:migrate</code> ?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1478760705, "post_id": 40511204, "comment_id": 68283746, "body": "You can use <code>heroku run rails dbconsole</code> and then use SQL to confirm the column is there"}, {"owner": {"reputation": 25, "user_id": 4949630, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/998160156868839/picture?type=large", "display_name": "Roman Kanafotskiy", "link": "https://stackoverflow.com/users/4949630/roman-kanafotskiy"}, "reply_to_user": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 0, "creation_date": 1478855124, "post_id": 40511204, "comment_id": 68327617, "body": "@diego.greyrobot, yup"}, {"owner": {"reputation": 25, "user_id": 4949630, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/998160156868839/picture?type=large", "display_name": "Roman Kanafotskiy", "link": "https://stackoverflow.com/users/4949630/roman-kanafotskiy"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1479050506, "post_id": 40511204, "comment_id": 68386254, "body": "@maxpleaner, hmm. It turned out it&#39;s not there. But how can the column be missing if it&#39;s on the local db schema pushed to github and deployed to heroku?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1479056631, "post_id": 40511204, "comment_id": 68388326, "body": "when you migrate on localhost, the schema is built to reflect your local db  state and it&#39;s possible for it to be un-synced from production. Perhaps you&#39;ve changed something in a migration, but heroku is still working off the old version. Whether or not Heroku runs a migration is determied by the timestamp in the filename, not the content of the migration. Basically, if you have a deployed app, don&#39;t change old migrations. If you don&#39;t mind destroying all the data in the production database, run <code>heroku pg:reset DATABASE</code> then <code>rake db:migrate</code> again."}, {"owner": {"reputation": 25, "user_id": 4949630, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/998160156868839/picture?type=large", "display_name": "Roman Kanafotskiy", "link": "https://stackoverflow.com/users/4949630/roman-kanafotskiy"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1479125889, "post_id": 40511204, "comment_id": 68412341, "body": "@maxpleaner, wow, thanks! It worked perfectly. Can you write it as the answer so I can mark it as an answered question?"}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 1, "last_activity_date": 1479138274, "last_edit_date": 1495542624, "creation_date": 1479138274, "answer_id": 40592600, "question_id": 40511204, "link": "https://stackoverflow.com/questions/40511204/activemodelmissingattributeerror-cant-write-unknown-attribute-order-id-in/40592600#40592600", "title": "ActiveModel::MissingAttributeError (can&#39;t write unknown attribute `order_id`) in production", "body": "<p>when you migrate on localhost, the schema is built to reflect your local db state and it's possible for it to be un-synced from production. Perhaps you've changed something in a migration, but heroku is still working off the old version. Whether or not Heroku runs a migration is determied by the timestamp in the filename, not the content of the migration. </p>\n\n<p>Basically, if you have a deployed app, don't change old migrations. If you don't mind destroying all the data in the production database, run <code>heroku pg:reset DATABASE</code> then rake <code>db:migrate again</code>. If you can't delete the data, there are still ways to fix the problem - see <a href=\"https://stackoverflow.com/questions/5598221/rails-rake-dbmigrate-has-no-effect\">Rails rake db:migrate has no effect</a></p>\n"}], "owner": {"reputation": 25, "user_id": 4949630, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/998160156868839/picture?type=large", "display_name": "Roman Kanafotskiy", "link": "https://stackoverflow.com/users/4949630/roman-kanafotskiy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 924, "favorite_count": 0, "accepted_answer_id": 40592600, "answer_count": 1, "score": 0, "last_activity_date": 1479138274, "creation_date": 1478707387, "question_id": 40511204, "link": "https://stackoverflow.com/questions/40511204/activemodelmissingattributeerror-cant-write-unknown-attribute-order-id-in", "title": "ActiveModel::MissingAttributeError (can&#39;t write unknown attribute `order_id`) in production", "body": "<p>In development environment everything works fine but in production (when deployed to Heroku) it throws me  MissingAttributeError.</p>\n\n<pre><code>class Order &lt; ApplicationRecord\n  has_many :cart_items, dependent: :destroy\nend\n\nclass CartItem &lt; ApplicationRecord\n  belongs_to :order, optional: true, foreign_key: \"order_id\"\nend\n\ncreate_table \"cart_items\", force: :cascade do |t|\n  t.integer  \"item_id\"\n  t.integer  \"cart_id\"\n  t.integer  \"user_id\"\n  t.integer  \"order_id\"\nend\n</code></pre>\n"}, {"tags": ["ruby", "regex", "sinatra"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1478707583, "post_id": 40510973, "comment_id": 68264486, "body": "This any good: <code>&#47;http:\\&#47;\\&#47;\\S+&#47;</code>? See <a href=\"http://www.rubular.com/r/aHG7BZZAmw\" rel=\"nofollow noreferrer\">here</a> for demo."}, {"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1478709748, "post_id": 40510973, "comment_id": 68265788, "body": "Instead of loading a whole file in a string, read it line by line. In this way, you can quickly discard lines that don&#39;t start with <code>[INFO]</code>. Then check the line with <code>\\bhttp:&#47;&#47;\\S*</code> and parse the url."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1478713280, "post_id": 40510973, "comment_id": 68267654, "body": "You need to state the rules for identifying the string you wish to extract. In your example you show the string you want but don&#39;t tell us <i>why</i> it&#39;s that particular string. It&#39;s like saying you have an array of numbers <code>[3,5,8,12,13,20]</code> and want to know how to select <code>[3,5,13]</code>. Is it because they are odd numbers, prime numbers or something else? You need to begin your question with a statement of the problem, then present an example when appropriate. When you edit to clarify, please don&#39;t add &quot;EDIT:&quot;. Lastly, in future, please boil your examples down to the bare essentials."}, {"owner": {"reputation": 1187, "user_id": 4557537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/098c314fbc6fd463195db73b4da43b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Fadi", "link": "https://stackoverflow.com/users/4557537/fadi"}, "edited": false, "score": 0, "creation_date": 1478713593, "post_id": 40510973, "comment_id": 68267815, "body": "Thanks for the information, well the link is needed because it contains a json which has information that I&#39;m going to need to pull out from that particular json."}], "answers": [{"comments": [{"owner": {"reputation": 1187, "user_id": 4557537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/098c314fbc6fd463195db73b4da43b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Fadi", "link": "https://stackoverflow.com/users/4557537/fadi"}, "edited": false, "score": 0, "creation_date": 1478712308, "post_id": 40511354, "comment_id": 68267172, "body": "This almost works (since the string also contains links before it&#39;s also matching them too).. I modified it to look like this <code>&#47;(http:\\&#47;\\&#47;sonar[\\w\\&#47;.?=-]+)(\\\\n)&#47;</code> but that&#39;s matching another link also (which is in <code>******** -Dsonar.host.url=http:&#47;&#47;sonar.covisintrnd.com\\n[INFO]</code>).. Anyway to tell it that it must contain something like <code>task</code> or <code>id=</code> or something similar?"}, {"owner": {"reputation": 1187, "user_id": 4557537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/098c314fbc6fd463195db73b4da43b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Fadi", "link": "https://stackoverflow.com/users/4557537/fadi"}, "edited": false, "score": 0, "creation_date": 1478712718, "post_id": 40511354, "comment_id": 68267401, "body": "Hmm, weird.. When I tried it on my app, it gave me the following error: <code>ERROR NoMethodError: undefined method &#39;first&#39; for nil:NilClass</code> I&#39;m guessing it&#39;s not returning anything therefore it&#39;s nil.."}, {"owner": {"reputation": 1187, "user_id": 4557537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/098c314fbc6fd463195db73b4da43b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Fadi", "link": "https://stackoverflow.com/users/4557537/fadi"}, "edited": false, "score": 0, "creation_date": 1478713396, "post_id": 40511354, "comment_id": 68267711, "body": "This regex worked (on rubular.com): <code>(http:\\&#47;\\&#47;sonar[\\w\\&#47;.?=-]+)task[\\w\\&#47;.?=-]+(?!.\\\\n)</code> but now it&#39;s actually returning (in the actual ruby app):  <code>[[&quot;http:&#47;&#47;sonar.company.com&#47;api&#47;ce&#47;&quot;]]</code>... hmm"}, {"owner": {"reputation": 1187, "user_id": 4557537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/098c314fbc6fd463195db73b4da43b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Fadi", "link": "https://stackoverflow.com/users/4557537/fadi"}, "edited": false, "score": 0, "creation_date": 1478714112, "post_id": 40511354, "comment_id": 68268068, "body": "Okay so it was a grouping problem, this works for me! <code>(http:\\&#47;\\&#47;sonar[\\w\\&#47;.?=-]+task[\\w\\&#47;.?=-]+(?!.\\\\n))</code>"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "reply_to_user": {"reputation": 1187, "user_id": 4557537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/098c314fbc6fd463195db73b4da43b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Fadi", "link": "https://stackoverflow.com/users/4557537/fadi"}, "edited": false, "score": 1, "creation_date": 1478714414, "post_id": 40511354, "comment_id": 68268221, "body": "So long as the words <code>sonar</code> and <code>task</code> will reliably be present, that looks like a good solution."}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": true, "score": 2, "last_activity_date": 1478715240, "last_edit_date": 1478715240, "creation_date": 1478707829, "answer_id": 40511354, "question_id": 40510973, "link": "https://stackoverflow.com/questions/40510973/how-to-use-a-regex-to-get-a-particular-part-of-a-string/40511354#40511354", "title": "How to use a regex to get a particular part of a string", "body": "<pre><code>&gt;&gt; string = '[your long string here]'\n&gt;&gt; regex = /(http:[\\w\\/.?=-]+)(\\\\n)/\n&gt;&gt; string.scan(regex).first.first\n=&gt; \"http://sonar.company.com/api/ce/task?id=AVhFxTkyob-dgWZqnfIn\"\n</code></pre>\n\n<p>Following the example above, I ended up modifying the regex to the following:</p>\n\n<pre><code>(http:\\/\\/sonar[\\w\\/.?=-]+task[\\w\\/.?=-]+(?!.\\\\n))\n</code></pre>\n\n<p>.. and return it like this:</p>\n\n<pre><code>string.scan(regex).first.first\n</code></pre>\n\n<p>The reason why I modified the regex is because the previous regex, ended up with a lot of results when plugging in the full string rather than the excerpt that's in the OP.</p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1478730385, "last_edit_date": 1478730385, "creation_date": 1478729950, "answer_id": 40516968, "question_id": 40510973, "link": "https://stackoverflow.com/questions/40510973/how-to-use-a-regex-to-get-a-particular-part-of-a-string/40516968#40516968", "title": "How to use a regex to get a particular part of a string", "body": "<p>There are well-tested tools that'll make your task easier. I'd recommend using URI's <code>extract</code> method:</p>\n\n<pre><code>require 'uri'\n\nstr = \"time=18ms\\n[INFO] Calculating CPD for 0 files\\n[INFO] CPD calculation finished\\n[INFO] Analysis report generated in 325ms, dir size=14 KB\\n[INFO] Analysis reports compressed in 187ms, zip size=8 KB\\n[INFO] Analysis report uploaded in 31ms\\n[INFO] ANALYSIS SUCCESSFUL, you can browse http://sonar.company.com/dashboard/index/com.company.paas.maventestproject:MavenTestProject\\n[INFO] Note that you will be able to access the updated dashboard once the server has processed the submitted analysis report\\n[INFO] More about the report processing at http://sonar.company.com/api/ce/task?id=AVhFxTkyob-dgWZqnfIn\\n[INFO] -----------------------------------------------------------------------\"\n\nURI.extract(str)\n# =&gt; [\"http://sonar.company.com/dashboard/index/com.company.paas.maventestproject:MavenTestProject\",\n#     \"http://sonar.company.com/api/ce/task?id=AVhFxTkyob-dgWZqnfIn\"]\n</code></pre>\n\n<p>Then it's a simple matter of finding the link you want and working with it.</p>\n\n<p>You'll also want to pay attention to all the other methods that URI brings to the party as it understands how to tear apart and build URIs according to the RFCs.</p>\n\n<p>Don't roll your own code or regex to do what someone else has done, especially when that code is well tested. You'll avoid pitfalls that others will fall into. The authors/maintainers of URI manage the built-in pattern so we don't have to. And, it's a lot more sophisticated than you'd imagine to meet the RFC, such as:</p>\n\n<pre><code>URI::REGEXP::PATTERN::ABS_URI\n\"[a-zA-Z][\\\\-+.a-zA-Z\\\\d]*:(?:(?://(?:(?:(?:[\\\\-_.!~*'()a-zA-Z\\\\d;:&amp;=+$,]|%[a-fA-F\\\\d]{2})*@)?(?:(?:[a-zA-Z0-9\\\\-.]|%\\\\h\\\\h)+|\\\\d{1,3}\\\\.\\\\d{1,3}\\\\.\\\\d{1,3}\\\\.\\\\d{1,3}|\\\\[(?:(?:[a-fA-F\\\\d]{1,4}:)*(?:[a-fA-F\\\\d]{1,4}|\\\\d{1,3}\\\\.\\\\d{1,3}\\\\.\\\\d{1,3}\\\\.\\\\d{1,3})|(?:(?:[a-fA-F\\\\d]{1,4}:)*[a-fA-F\\\\d]{1,4})?::(?:(?:[a-fA-F\\\\d]{1,4}:)*(?:[a-fA-F\\\\d]{1,4}|\\\\d{1,3}\\\\.\\\\d{1,3}\\\\.\\\\d{1,3}\\\\.\\\\d{1,3}))?)\\\\])(?::\\\\d*)?|(?:[\\\\-_.!~*'()a-zA-Z\\\\d$,;:@&amp;=+]|%[a-fA-F\\\\d]{2})+)(?:/(?:[\\\\-_.!~*'()a-zA-Z\\\\d:@&amp;=+$,]|%[a-fA-F\\\\d]{2})*(?:;(?:[\\\\-_.!~*'()a-zA-Z\\\\d:@&amp;=+$,]|%[a-fA-F\\\\d]{2})*)*(?:/(?:[\\\\-_.!~*'()a-zA-Z\\\\d:@&amp;=+$,]|%[a-fA-F\\\\d]{2})*(?:;(?:[\\\\-_.!~*'()a-zA-Z\\\\d:@&amp;=+$,]|%[a-fA-F\\\\d]{2})*)*)*)?|/(?:[\\\\-_.!~*'()a-zA-Z\\\\d:@&amp;=+$,]|%[a-fA-F\\\\d]{2})*(?:;(?:[\\\\-_.!~*'()a-zA-Z\\\\d:@&amp;=+$,]|%[a-fA-F\\\\d]{2})*)*(?:/(?:[\\\\-_.!~*'()a-zA-Z\\\\d:@&amp;=+$,]|%[a-fA-F\\\\d]{2})*(?:;(?:[\\\\-_.!~*'()a-zA-Z\\\\d:@&amp;=+$,]|%[a-fA-F\\\\d]{2})*)*)*)(?:\\\\?(?:(?:[\\\\-_.!~*'()a-zA-Z\\\\d;/?:@&amp;=+$,\\\\[\\\\]]|%[a-fA-F\\\\d]{2})*))?|(?:[\\\\-_.!~*'()a-zA-Z\\\\d;?:@&amp;=+$,]|%[a-fA-F\\\\d]{2})(?:[\\\\-_.!~*'()a-zA-Z\\\\d;/?:@&amp;=+$,\\\\[\\\\]]|%[a-fA-F\\\\d]{2})*)\"\n</code></pre>\n"}], "owner": {"reputation": 1187, "user_id": 4557537, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/098c314fbc6fd463195db73b4da43b0b?s=128&d=identicon&r=PG&f=1", "display_name": "Fadi", "link": "https://stackoverflow.com/users/4557537/fadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 40511354, "answer_count": 2, "score": 0, "last_activity_date": 1478730385, "creation_date": 1478706660, "last_edit_date": 1478729726, "question_id": 40510973, "link": "https://stackoverflow.com/questions/40510973/how-to-use-a-regex-to-get-a-particular-part-of-a-string", "title": "How to use a regex to get a particular part of a string", "body": "<p>I'm creating a Sinatra-based application, and  am trying to parse a long string using regex to pull out a link from it. </p>\n\n<p>Here's an excerpt of the string with the relevant information that I need to extract:</p>\n\n<pre><code>time=18ms\\n[INFO] Calculating CPD for 0 files\\n[INFO] CPD calculation finished\\n[INFO] Analysis report generated in 325ms, dir size=14 KB\\n[INFO] Analysis reports compressed in 187ms, zip size=8 KB\\n[INFO] Analysis report uploaded in 31ms\\n[INFO] ANALYSIS SUCCESSFUL, you can browse http://sonar.company.com/dashboard/index/com.company.paas.maventestproject:MavenTestProject\\n[INFO] Note that you will be able to access the updated dashboard once the server has processed the submitted analysis report\\n[INFO] More about the report processing at http://sonar.company.com/api/ce/task?id=AVhFxTkyob-dgWZqnfIn\\n[INFO] -----------------------------------------------------------------------\n</code></pre>\n\n<p>I need to be able to pull the following:</p>\n\n<pre><code>http://sonar.company.com/api/ce/task?id=AVhFxTkyob-dgWZqnfIn\n</code></pre>\n\n<p>The closest I got was with <code>/(?=http).[a*-z]*/</code> but that's not close to what I need as it found 615 matches instead of 1.</p>\n\n<p>The problem also is that the id <code>AVhFxTkyob-dgWZqnfIn</code> is not static,  changing per build.</p>\n\n<p>I've been using <a href=\"http://rubular.com\" rel=\"nofollow noreferrer\">Rubular.com</a> to find the proper regex I need to use.</p>\n"}, {"tags": ["javascript", "jquery", "html", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 336, "user_id": 5947615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c5cebb1797a302a08f05b2a59934875?s=128&d=identicon&r=PG&f=1", "display_name": "Tinsten", "link": "https://stackoverflow.com/users/5947615/tinsten"}, "edited": false, "score": 0, "creation_date": 1478706795, "post_id": 40510783, "comment_id": 68263933, "body": "Did you add a script link to the js file? Any errors?"}], "answers": [{"tags": [], "owner": {"reputation": 96, "user_id": 2832261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/01089c264565530a2388538b7772f4d7?s=128&d=identicon&r=PG&f=1", "display_name": "c2willi", "link": "https://stackoverflow.com/users/2832261/c2willi"}, "is_accepted": false, "score": 0, "last_activity_date": 1478707520, "creation_date": 1478707520, "answer_id": 40511254, "question_id": 40510783, "link": "https://stackoverflow.com/questions/40510783/rails-how-to-seperate-jquery-from-html/40511254#40511254", "title": "Rails: How to seperate jquery from html?", "body": "<p>Give the following a try.  </p>\n\n<pre><code>$( document ).ready(function() {\n    $('.checkme').click(function(){\n        // is this checkbox checked\n        // ~~~~~\n        var bChecked = $(this).is(':checked');\n\n        // enable/disable text box based on the checkbox value\n        // ~~~~~\n        $('input[name='+ $(this).attr('value')+']').attr('disabled', !bChecked);\n    });\n\n    // trigger click event on page ready\n    // OR you could remove this line and change the defaults in your \n    // table definition to have the checkboxes checked and the inputs enabled\n    // by default!\n    // ~~~~~\n    $('.checkme').click();\n});\n</code></pre>\n"}], "owner": {"reputation": 438, "user_id": 5356066, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fbc5de86d0f92b9fcef669e6337a127d?s=128&d=identicon&r=PG&f=1", "display_name": "ineedahero", "link": "https://stackoverflow.com/users/5356066/ineedahero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478707520, "creation_date": 1478706078, "last_edit_date": 1478706478, "question_id": 40510783, "link": "https://stackoverflow.com/questions/40510783/rails-how-to-seperate-jquery-from-html", "title": "Rails: How to seperate jquery from html?", "body": "<p>Really simple question.</p>\n\n<p>I'm writing a plugin for Redmine in Ruby on Rails.</p>\n\n<p>I want to do <a href=\"http://jsfiddle.net/xp73Q/3/\" rel=\"nofollow noreferrer\">this</a></p>\n\n<p>I have this in my form.html.rb:</p>\n\n<pre><code>&lt;table&gt;\n    &lt;tr&gt;\n        &lt;td &gt;Specific operations/procedures&lt;/td&gt;\n        &lt;td&gt;\n            &lt;input type=\"checkbox\" value=\"mfi_nam9\" class=\"checkme\"/&gt;Other(please specify)&lt;br/&gt;\n            &lt;input type=\"text\" name=\"mfi_nam9\" disabled=\"true\" &gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;tr&gt;\n        &lt;td &gt;General principles/strategies&lt;/td&gt;\n        &lt;td&gt;\n            &lt;input type=\"checkbox\" value=\"mfi_nam8\" class=\"checkme\"/&gt;Other(please specify):&lt;br/&gt;\n            &lt;input type=\"text\" name=\"mfi_nam8\" disabled=\"true\"&gt;\n        &lt;/td&gt;\n    &lt;/tr&gt;\n&lt;/table&gt;\n\n# compatibility for use as redmine plugin\n&lt;% content_for :header_tags do %&gt;\n  &lt;%= javascript_include_tag 'checkbox_enable', :plugin =&gt; 'students' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I have this in my \"checkbox_enable.js\" file:</p>\n\n<pre><code>$(function() {\n  $('.checkme').attr('checked', true);\n  $('.checkme').click(function(){\n    if($('input[name='+ $(this).attr('value')+']').attr('disabled') == false){\n      $('input[name='+ $(this).attr('value')+']').attr('disabled', true);\n    } else {\n      $('input[name='+ $(this).attr('value')+']').attr('disabled', false);\n    }\n  });\n}\n</code></pre>\n\n<p>Look at my very first line of that file. I don't know if it's right. I don't really understand the difference between javascript and jquery that well. But the javascript has no impact on the html file.</p>\n\n<p>How do I make this work?</p>\n\n<p>EDIT:</p>\n\n<p>I just noticed that the fiddle only works for jquery 1.5. Or it seems that way. Does that mean there's a good chance of it just not working on a lot (most?) browsers? If so, why would anyone use jquery for anything?</p>\n"}, {"tags": ["arrays", "ruby", "concatenation"], "comments": [{"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1478705737, "post_id": 40510579, "comment_id": 68263249, "body": "Have you tried <code>flatten!</code> - it doesn&#39;t create as many intermediary arrays as <code>flatten</code> so should have better performance."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1478705809, "post_id": 40510579, "comment_id": 68263294, "body": "@ReggieB it&#39;s only marginally faster."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1478705822, "post_id": 40510579, "comment_id": 68263304, "body": "What do you mean by <i>&quot;basically inlines the elements which is not very efficient for large arrays&quot;</i>?"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1478706027, "post_id": 40510579, "comment_id": 68263446, "body": "Why <code>[].concat(foo).concat(bar).concat(baz)</code> and not <code>foo.concat(bar).concat(baz)</code>?"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1478706091, "post_id": 40510579, "comment_id": 68263496, "body": "Oh, sorry. you&#39;re right."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1478706275, "post_id": 40510579, "comment_id": 68263616, "body": "@Ursus <code>(foo + bar).concat(baz)</code> would work, but it&#39;s asymmetric \u2013 IMO, the code should not imply that <code>baz</code> is any different from <code>foo</code> or <code>bar</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1478706404, "post_id": 40510579, "comment_id": 68263693, "body": "@ndn doesn&#39;t <code>*</code> convert the array elements to an argument list? It sounds to me like I am creating a (potentially) huge array literal."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1478706654, "post_id": 40510579, "comment_id": 68263843, "body": "Try <code>foo.push(*bar).push(*baz)</code>. Well, it&#39;s asymmetric as well but it could be fast."}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1478706750, "post_id": 40510579, "comment_id": 68263902, "body": "The pretty way to do it is <code>[foo, bar, baz].inject(:+)</code>. But that just runs += on each element. More efficient might be <code>[foo, bar, baz].inject(:&lt;&lt;).flatten</code>, but this will morph <code>foo</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1478706752, "post_id": 40510579, "comment_id": 68263903, "body": "@Ursus that would modify <code>foo</code>"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1478707010, "post_id": 40510579, "comment_id": 68264101, "body": "@Stefan, we can only speculate what <code>*</code> actually does under the hood. It seems like a good candidate to me (supposedly no additional arrays created). We should benchmark it."}, {"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 0, "creation_date": 1478707382, "post_id": 40510579, "comment_id": 68264360, "body": "Do you actually need an <code>Array</code> or a mere <code>Enumerable</code> would suffice? If so, you could build an enumerator that would yield elements of these collections in order as if they were a flat array. Memory consumption would be next to nothing compared to anything building an actual array."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 0, "creation_date": 1478707565, "post_id": 40510579, "comment_id": 68264473, "body": "@D-side those are arrays and I would like to take advantage of that. An enumerator would have to traverse the arrays via <code>each</code> which is probably much slower."}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1478707749, "post_id": 40510579, "comment_id": 68264603, "body": "What wrong with <code>[foo, bar, baz].inject(:concat)</code> ?"}, {"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 0, "creation_date": 1478707875, "post_id": 40510579, "comment_id": 68264685, "body": "@Stefan you&#39;d gain a near-instantaneous build time with little additional memory consumption at the cost of slower traversal, yeah. Your call."}, {"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "reply_to_user": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1478707991, "post_id": 40510579, "comment_id": 68264763, "body": "@AlexGolubenko well, it mutates <code>foo</code> at least. There already is an answer with this approach."}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "reply_to_user": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 0, "creation_date": 1478708378, "post_id": 40510579, "comment_id": 68264983, "body": "@D-side The approach that you can see in the response adds 2 steps as opposed to my. I mean in <code>foo.concat(bar).concat(baz)</code> there are only two steps when <code>Array.new.concat(foo).concat(bar).concat(baz)</code> - is 4."}, {"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "reply_to_user": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1478708487, "post_id": 40510579, "comment_id": 68265049, "body": "@AlexGolubenko ...and mutates <code>foo</code>, which is against the expected result."}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "reply_to_user": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 0, "creation_date": 1478708559, "post_id": 40510579, "comment_id": 68265095, "body": "@D-side yeah, my mistake, sorry"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1478714051, "post_id": 40510579, "comment_id": 68268042, "body": "@AlexGolubenko, <code>[foo, bar, baz].inject([],:concat)</code> does not mutate <code>foo</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1478714897, "post_id": 40510579, "comment_id": 68268473, "body": "Stefan, rather than constructing an array <code>arr</code>, what about creating a simple method <code>m(i, *arrays)</code> which returns the value of (what would be) <code>arr</code> at offset <code>i</code>. Would that work for your app?"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1478715513, "post_id": 40510579, "comment_id": 68268763, "body": "@CarySwoveland yes, I know, I just missed Stefans expected result about <code>without modifying the existing array</code>, I was write about <code>Array.new</code> so I know that it&#39;s didn&#39;t mutate foo :) Anyway, thanks for your answer:)"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1478730924, "post_id": 40510579, "comment_id": 68275923, "body": "The number of comments suggest the question isn&#39;t well defined. &quot;satisfying&quot; means different things to different people. Do you want CPU efficiency? Memory efficiency? Code efficiency? I&#39;d say pick one of the criteria and go with it, or benchmark them a bunch and pick based on the best average time. I agree there should be a class method that is used to concat. We should be free to call it and always know it&#39;s the best because it has the criteria built-in to determine what to do."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1478775361, "post_id": 40510579, "comment_id": 68291967, "body": "@theTinMan you&#39;re right, &quot;satisfying&quot; is subjective. But I don&#39;t think that there is much of a space\u2013time trade off here. Creating a destination array with the required size and copying the arrays into it is probably both, CPU and memory efficient."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1478775970, "post_id": 40510579, "comment_id": 68292356, "body": "@CarySwoveland good idea, but I have to pass the array to another method. In my specific case, I will probably just use <code>+</code> and ignore the inefficiency. But in general, I find the lack of a &quot;proper&quot; (i.e. memory-efficient, blazing-fast, low-level) class method quite disappointing."}], "answers": [{"comments": [{"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 1, "creation_date": 1478710772, "post_id": 40511003, "comment_id": 68266336, "body": "How about <code>[foo, bar, baz].reduce(&amp;:concat)</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 2, "creation_date": 1478711349, "post_id": 40511003, "comment_id": 68266671, "body": "@ReggieB that would use <code>foo</code> as the initial &quot;memo&quot;, thus modifying it."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1478724781, "post_id": 40511003, "comment_id": 68273258, "body": "Any objections to <code>[foo,bar,baz].flat_map(&amp;:itself)</code>? Seems to be essentially the same performance wise (occasionally faster)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 4, "creation_date": 1478783420, "post_id": 40511003, "comment_id": 68296941, "body": "@engineersmnky it is effectively the same \u2013 <code>flat_map</code> calls <code>concat</code> if the argument is an array. I find <code>.reduce([], :concat)</code> easier to understand than <code>.flat_map(&amp;:itself)</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1582136671, "post_id": 40511003, "comment_id": 106676958, "body": "@engineersmnky it is effectively the same \u2013 <code>flat_map</code> calls <code>concat</code> if the argument is an array. I find <code>.flat_map(&amp;:itself)</code> easier to understand than <code>.reduce([], :concat)</code>."}], "tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": true, "score": 25, "last_activity_date": 1478706850, "last_edit_date": 1478706850, "creation_date": 1478706757, "answer_id": 40511003, "question_id": 40510579, "link": "https://stackoverflow.com/questions/40510579/how-to-efficiently-concatenate-multiple-arrays-in-ruby/40511003#40511003", "title": "How to efficiently concatenate multiple arrays in Ruby?", "body": "<p>If you've already determined that multiple concatenation is the fastest method, you can write it nicer using reduce:</p>\n\n<pre><code>[foo, bar, baz].reduce([], :concat)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1478713562, "post_id": 40512676, "comment_id": 68267799, "body": "<code>plus</code> becomes slower as you add more arrays."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1478713733, "post_id": 40512676, "comment_id": 68267889, "body": "The <code>Array.concat</code> class method I was thinking of would create a destination array with the correct size and then copy each array to the appropriate location within the destination array. This can probably only be achieved in C."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1478714217, "post_id": 40512676, "comment_id": 68268114, "body": "Just tried it \u2013 a C implementation would be twice as fast as <code>plus</code>. Maybe I should file a feature request ..."}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1478724892, "post_id": 40512676, "comment_id": 68273320, "body": "@Stefan interesting, could you do it with FFI ? see <a href=\"http://stackoverflow.com/questions/29389334/how-do-i-handle-ruby-arrays-in-ruby-ffi-gem\" title=\"how do i handle ruby arrays in ruby ffi gem\">stackoverflow.com/questions/29389334/&hellip;</a>  I tried this fill existing array method approach in Ruby itself but it is slower. For small arrays push is fastest, then concat, then + but speed is only going to matter with large arrays and/or large number of arrays. You could do a check in concat_all for the array size first and then choose the method to use. You would also need a way to handle mixed and multi-dimensiona arrays."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1478724940, "post_id": 40512676, "comment_id": 68273346, "body": "peter, could you add <code>[a,b,c].flat_map(&amp;:itself)</code> to your benchmark?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1478725422, "post_id": 40512676, "comment_id": 68273611, "body": "@CarySwoveland this seems to be more performant on a regular basis I posted it as a comment on the above (great minds and all that) but in that case the reduction posted in the other answer should also be added"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1478725636, "post_id": 40512676, "comment_id": 68273709, "body": "Stefan, my C is a bit rusty, but I assume you used memcpy(). Correct?"}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1478725885, "post_id": 40512676, "comment_id": 68273836, "body": "added some other methods including the flat_map for cary and with both small and big arrays, seems that all methods that use flatten are a lot slower"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1478737181, "post_id": 40512676, "comment_id": 68277977, "body": "&quot;large&quot; is not definitive try this with a million per array and see the performance difference there. The only 2 that seem to compete in this space are flat_map and reduce. I&#39;m not asking for benchmarks just give it a shot :)"}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1478782203, "post_id": 40512676, "comment_id": 68296189, "body": "@engineersmnky I tried it until the push method had stack level too deep at 30 milion and even with this size the + methos was fastest by far, indeed followed by flat_map but it is clear that one must do his own benchmarks with real data and hardware before making a decision"}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1478783238, "post_id": 40512676, "comment_id": 68296837, "body": "@engineersmnky tried it with jruby and with the 30M and concat is the winner here, on plead more to do your own benchmarks in your situation But the results are surprising in another way: MRI outclasses Jruby by far.. I think I&#39;m gonna ask a question about that"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1478783730, "post_id": 40512676, "comment_id": 68297139, "body": "@CarySwoveland I&#39;ve posted an &quot;answer&quot; including my C code and another benchmark."}], "tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 4, "last_activity_date": 1478781751, "last_edit_date": 1478781751, "creation_date": 1478712238, "answer_id": 40512676, "question_id": 40510579, "link": "https://stackoverflow.com/questions/40510579/how-to-efficiently-concatenate-multiple-arrays-in-ruby/40512676#40512676", "title": "How to efficiently concatenate multiple arrays in Ruby?", "body": "<p>Did some benchmarks and simple + is the most efficient.\nSo i would suggest to neglect the intermediate creation of an array.</p>\n\n<p>You could add a new method concat_all to Array like this, but you would have to take into account mixed and multi-dimensional arrays also.</p>\n\n<pre><code>class Array\n  def concat_all \n    self.reduce([], :+)\n  end\nend\n[a, b, c].concat_all # a huge array\n[a, b, c].concat_all.length #300000\n</code></pre>\n\n<p>Here my benchmarks</p>\n\n<pre><code>require 'Benchmark'\nN = 1000\n\nclass Array\n  def concat_all \n    self.reduce([], :+)\n  end\n  def concat_all2\n    # just a quick test with fixed numbers for the fill method Stephan proposes but in Ruby itself\n    d = Array.new(300_000)\n    d[0..99999] = self[0]\n    d[100_000..199999] = self[1]\n    d[200_000..299999] = self[2]\n    d\n  end\n  def concat_all3\n    self.flatten\n  end\nend\n\n# small arrays\na = (1..10).to_a\nb = (11..20).to_a\nc = (21..30).to_a\n\nBenchmark.bm do |r|\n  r.report('plus       ')  { N.times { a + b + c }}\n  r.report('concat     ') { N.times { [].concat(a).concat(b).concat(c) }}\n  r.report('push       ') { N.times { [].push(*a).push(*b).push(*c) }}\n  r.report('&lt;&lt;         ') { N.times { ([] &lt;&lt; a &lt;&lt; b &lt;&lt; c).flatten}}\n  r.report('splash     ') { N.times {[*a, *b, *c]} }\n  r.report('concat_all ')  { N.times { [a, b, c].concat_all }}\n  r.report('concat_all3')  { N.times { [a, b, c].concat_all3 }}\n  r.report('flat_map   ') { N.times {[a, b, c].flat_map(&amp;:itself)} }\nend\n\n#large arrays\na = (1..100_000).to_a\nb = (100_001..200_000).to_a\nc = (200_001..300_000).to_a\n\nBenchmark.bm do |r|\n  r.report('plus       ')  { N.times { a + b + c }}\n  r.report('concat     ') { N.times { [].concat(a).concat(b).concat(c) }}\n  r.report('push       ') { N.times { [].push(*a).push(*b).push(*c) }}\n  r.report('&lt;&lt;         ') { N.times { ([] &lt;&lt; a &lt;&lt; b &lt;&lt; c).flatten}}\n  r.report('splash     ') { N.times {[*a, *b, *c]} }\n  r.report('concat_all ')  { N.times { [a, b, c].concat_all }}\n  r.report('concat_all2')  { N.times { [a, b, c].concat_all2 }}\n  r.report('concat_all3')  { N.times { [a, b, c].concat_all3 }}\n  r.report('flat_map   ') { N.times {[a, b, c].flat_map(&amp;:itself)} }\nend\n</code></pre>\n\n<p>And here the results</p>\n\n<pre><code># results for small arrays\n       user     system      total        real\nplus         0.000000   0.000000   0.000000 (  0.000416)\nconcat       0.000000   0.000000   0.000000 (  0.000592)\npush         0.000000   0.000000   0.000000 (  0.000441)\n&lt;&lt;           0.000000   0.000000   0.000000 (  0.003387)\nsplash       0.000000   0.000000   0.000000 (  0.000789)\nconcat_all   0.000000   0.000000   0.000000 (  0.001480)\nconcat_all3  0.016000   0.000000   0.016000 (  0.003496)\nflat_map     0.000000   0.000000   0.000000 (  0.001036)\n\n# results for big arrays\n       user     system      total        real\nplus         0.686000   0.671000   1.357000 (  1.351171)\nconcat       0.890000   0.733000   1.623000 (  1.630155)\npush         1.466000   0.624000   2.090000 (  2.092684)\n&lt;&lt;          23.837000   1.045000  24.882000 ( 24.885238)\nsplash       1.029000   1.264000   2.293000 (  2.332560)\nconcat_all   0.687000   0.967000   1.654000 (  1.709321)\nconcat_all2  0.936000   0.780000   1.716000 (  1.730428)\nconcat_all3 24.242000   0.998000  25.240000 ( 25.278264)\nflat_map     0.780000   0.765000   1.545000 (  1.551654)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1478784535, "post_id": 40528373, "comment_id": 68297610, "body": "Thnx for the patch, I suppose you need to recompile everything after that ? I&#39;m on windows with the Ruby installer so I&#39;ll have to pass I guess"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1478784687, "post_id": 40528373, "comment_id": 68297715, "body": "@peter yes, you have to recompile Ruby to get it working. I couldn&#39;t find a way to write a simple extension because the implementation relies on functions and macros that are only available in <code>array.c</code>"}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1478786168, "post_id": 40528373, "comment_id": 68298701, "body": "posted my question about MRI&lt;&gt;jRuby here <a href=\"http://stackoverflow.com/questions/40529208/performance-difference-between-mri-ruby-and-jruby\" title=\"performance difference between mri ruby and jruby\">stackoverflow.com/questions/40529208/&hellip;</a>"}, {"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 0, "creation_date": 1614523854, "post_id": 40528373, "comment_id": 117405582, "body": "I re-ran this without the C extension, using counts of 3, 10 and 20, over arrays of size 5, 10 and 20, using the Mac system ruby (2.3.7) and v2.7.0. What I found was concat is almost always faster on v2.3.7 and plus could get quite slow as the numbers get bigger, but the speed of plus got much better for 2.7, it was about equal between plus and concat until the arrays get above 10 in number - regardless of the size of the array - that&#39;s when plus starts to break down."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 9, "last_activity_date": 1478783922, "last_edit_date": 1478783922, "creation_date": 1478783106, "answer_id": 40528373, "question_id": 40510579, "link": "https://stackoverflow.com/questions/40510579/how-to-efficiently-concatenate-multiple-arrays-in-ruby/40528373#40528373", "title": "How to efficiently concatenate multiple arrays in Ruby?", "body": "<p>I've created another benchmark, comparing <code>+</code>, <code>concat</code> and a custom C extension with a variable number of arrays.</p>\n\n<h3>Result</h3>\n\n<ul>\n<li>the C extension was always fastest and roughly 2-3x faster than <code>concat</code></li>\n<li><code>plus</code> is getting really slow if you concatenate many arrays</li>\n</ul>\n\n<h3>Conclusion</h3>\n\n<p>Although <em>\"2-3x\"</em> sounds like a huge improvement, it's just a few milliseconds in absolute terms. I was expecting a bigger difference by not having to resize the array, but this is apparently not a huge factor.</p>\n\n<p>IMO, <code>concat</code> is a decent performer and I see no urgent need for a C extension.</p>\n\n<hr>\n\n<p>My test arrays contain <code>nil</code> values. Other elements don't seem to produce different results (in relative terms).</p>\n\n<p>I didn't include <code>flat_map</code>, because it is equivalent to <code>concat</code>.</p>\n\n<pre><code>Concatenating 3 arrays of size 100 (10000 times)\n                 user     system      total        real\nplus         0.020000   0.000000   0.020000 (  0.027927)\nconcat       0.020000   0.010000   0.030000 (  0.033204)\nc_extension  0.010000   0.010000   0.020000 (  0.010727)\n\nConcatenating 10 arrays of size 100 (10000 times)\n                 user     system      total        real\nplus         0.110000   0.070000   0.180000 (  0.180417)\nconcat       0.050000   0.020000   0.070000 (  0.065299)\nc_extension  0.010000   0.010000   0.020000 (  0.025475)\n\nConcatenating 10 arrays of size 1000 (10000 times)\n                 user     system      total        real\nplus         0.690000   0.560000   1.250000 (  1.252319)\nconcat       0.180000   0.130000   0.310000 (  0.303365)\nc_extension  0.120000   0.120000   0.240000 (  0.248589)\n</code></pre>\n\n<p><code>plus</code> is excluded from the following results</p>\n\n<pre><code>Concatenating 10 arrays of size 100000 (100 times)\n                 user     system      total        real\nconcat       0.220000   0.340000   0.560000 (  0.568730)\nc_extension  0.130000   0.150000   0.280000 (  0.281354)\n\nConcatenating 100 arrays of size 10000 (100 times)\n                 user     system      total        real\nconcat       0.210000   0.320000   0.530000 (  0.519030)\nc_extension  0.160000   0.140000   0.300000 (  0.304751)\n\nConcatenating 1000 arrays of size 1000 (100 times)\n                 user     system      total        real\nconcat       0.240000   0.330000   0.570000 (  0.563511)\nc_extension  0.150000   0.120000   0.270000 (  0.283546)\n\nConcatenating 10000 arrays of size 100 (100 times)\n                 user     system      total        real\nconcat       0.330000   0.310000   0.640000 (  0.643987)\nc_extension  0.170000   0.120000   0.290000 (  0.286489)\n\nConcatenating 100000 arrays of size 10 (100 times)\n                 user     system      total        real\nconcat       1.300000   0.340000   1.640000 (  1.648687)\nc_extension  0.310000   0.150000   0.460000 (  0.458214)\n</code></pre>\n\n<p>Test code:</p>\n\n<pre><code>require 'benchmark'\n\nvalues = [\n  # small\n  { count: 3,      size: 100,    n: 10000 },\n  { count: 10,     size: 100,    n: 10000 },\n  { count: 10,     size: 1000,   n: 10000 },\n  # large\n  { count: 10,      size: 100000, n: 100 },\n  { count: 100,     size: 10000,  n: 100 },\n  { count: 1000,    size: 1000,   n: 100 },\n  { count: 10000,   size: 100,    n: 100 },\n  { count: 100000,  size: 10,     n: 100 }\n]\n\nvalues.each_with_index do |h, i|\n  count, size, n = h.values_at(:count, :size, :n)\n  arrays = Array.new(count) { Array.new(size) }\n\n  puts\n  puts \"Concatenating #{count} arrays of size #{size} (#{n} times)\"\n  Benchmark.bm(10) do |r|\n    r.report('plus')        { n.times { arrays.reduce(:+) } } if i &lt; 3\n    r.report('concat')      { n.times { arrays.reduce([], :concat) } }\n    r.report('c_extension') { n.times { Array.concat(*arrays) } }\n  end\nend\n</code></pre>\n\n<p>C extension: (a patch actually, I've added this to Ruby's <code>array.c</code>)</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>VALUE\nrb_ary_s_concat(int argc, VALUE *argv, VALUE klass)\n{\n  VALUE ary;\n  long len = 0, i;\n  for (i=0; i&lt;argc; i++) {\n    argv[i] = to_ary(argv[i]);\n    len += RARRAY_LEN(argv[i]);\n  }\n  ary = rb_ary_new2(len);\n  long beg = 0;\n  for (i=0; i&lt;argc; i++) {\n    ary_memcpy(ary, beg, RARRAY_LEN(argv[i]), RARRAY_CONST_PTR(argv[i]));\n    beg += RARRAY_LEN(argv[i]);\n  }\n  ARY_SET_LEN(ary, len);\n  return ary;\n}\n</code></pre>\n\n<p>You have to register this method in <code>Init_Array</code> via:</p>\n\n<pre><code>rb_define_singleton_method(rb_cArray, \"concat\", rb_ary_s_concat, -1);\n</code></pre>\n"}], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9184, "favorite_count": 3, "accepted_answer_id": 40511003, "answer_count": 3, "score": 12, "last_activity_date": 1478783922, "creation_date": 1478705457, "question_id": 40510579, "link": "https://stackoverflow.com/questions/40510579/how-to-efficiently-concatenate-multiple-arrays-in-ruby", "title": "How to efficiently concatenate multiple arrays in Ruby?", "body": "<p>I just wanted to concatenate multiple arrays in Ruby and couldn't find a satisfying way to do so.</p>\n\n<p><strong>Example input:</strong></p>\n\n<pre><code>foo = [1, 2, 3]\nbar = [4, 5, 6]\nbaz = [7, 8, 9]\n</code></pre>\n\n<p><strong>Expected result:</strong> (without modifying the existing arrays)</p>\n\n<pre><code>[1, 2, 3, 4, 5, 6, 7, 8, 9]\n</code></pre>\n\n<p>My actual arrays are <em>much</em> larger, so I'm interested in an efficient solution. There may also be more than three arrays, so a short syntax is preferred.</p>\n\n<h3>What I have tried so far</h3>\n\n<ul>\n<li><p><code>foo + bar + baz</code> is the obvious one, it's concise and clear. But it is evaluated as <code>(foo + bar) + baz</code>. In other words: it creates an intermediate array <code>[1, 2, 3, 4, 5, 6]</code> that is thrown away after the whole operation. As noted in the <a href=\"http://ruby-doc.org/core-2.3.1/Array.html#method-i-2B\" rel=\"noreferrer\">documentation</a>:</p>\n\n<blockquote>\n  <p>repeated use of <code>+=</code> on arrays can be quite inefficient</p>\n</blockquote></li>\n<li><p><code>[*foo, *bar, *baz]</code> basically inlines the elements which is not very efficient for large arrays, either. It also looks more like a hack to me.</p></li>\n<li><p><code>[foo, bar, baz].flatten(1)</code> seems to be even worse than the above, performance wise.</p></li>\n<li><p><code>[].concat(foo).concat(bar).concat(baz)</code> is the fastest, but it looks cumbersome and it needs multiple method invocations.</p></li>\n</ul>\n\n<p>Shouldn't there be a simple class method for such a basic task? Something like:</p>\n\n<pre><code>Array.concat(foo, bar, baz)\n</code></pre>\n\n<p>Am I missing something obvious?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 663, "user_id": 7105559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3007d882cf2470a445998aa88ecad93e?s=128&d=identicon&r=PG&f=1", "display_name": "borbesaur", "link": "https://stackoverflow.com/users/7105559/borbesaur"}, "edited": false, "score": 0, "creation_date": 1478704850, "post_id": 40510232, "comment_id": 68262612, "body": "Where is your product_params variable coming from? I don&#39;t see it defined."}, {"owner": {"reputation": 1998, "user_id": 1920622, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e79e2b4b00afb2d10594b1894cb7df87?s=128&d=identicon&r=PG", "display_name": "Laurent", "link": "https://stackoverflow.com/users/1920622/laurent"}, "reply_to_user": {"reputation": 663, "user_id": 7105559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3007d882cf2470a445998aa88ecad93e?s=128&d=identicon&r=PG&f=1", "display_name": "borbesaur", "link": "https://stackoverflow.com/users/7105559/borbesaur"}, "edited": false, "score": 0, "creation_date": 1478705046, "post_id": 40510232, "comment_id": 68262737, "body": "i added it on my question ;) note : clone doesn&#39;t work either"}], "answers": [{"comments": [{"owner": {"reputation": 1998, "user_id": 1920622, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e79e2b4b00afb2d10594b1894cb7df87?s=128&d=identicon&r=PG", "display_name": "Laurent", "link": "https://stackoverflow.com/users/1920622/laurent"}, "edited": false, "score": 0, "creation_date": 1478708398, "post_id": 40510628, "comment_id": 68264998, "body": "It&#39;s an <code>ActionController::Parameters</code> and I think that might be the reason i was struggling. The hash / string difference is caused by Rails magic so it works anyway. I changed the clone by a <code>to_h</code> to go away from this class and now it seems to works, will write an answer later, but thanks for your input ;)"}, {"owner": {"reputation": 2010, "user_id": 1167828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/333ecc03169c8b11a7664a8eed773abc?s=128&d=identicon&r=PG", "display_name": "Alex Falke", "link": "https://stackoverflow.com/users/1167828/alex-falke"}, "edited": false, "score": 0, "creation_date": 1589387363, "post_id": 40510628, "comment_id": 109276083, "body": "ActionController::Parameters has a deep_dup method: <a href=\"https://api.rubyonrails.org/classes/ActionController/Parameters.html#method-i-deep_dup\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActionController/&hellip;</a>"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 3, "last_activity_date": 1478706679, "last_edit_date": 1478706679, "creation_date": 1478705580, "answer_id": 40510628, "question_id": 40510232, "link": "https://stackoverflow.com/questions/40510232/apparent-issue-with-dup-and-clone-in-rails-params/40510628#40510628", "title": "Apparent issue with dup and clone in Rails params", "body": "<p>If you have a nested hash and want to duplicate everything, you might be interested by <a href=\"http://apidock.com/rails/Hash/deep_dup\" rel=\"nofollow noreferrer\">deep_dup</a></p>\n\n<p>Your product_params is an Array of Hashes of Hash, right?\nYour example had strings as keys, but your code had symbols. Adapt accordingly.</p>\n\n<pre><code>product_params = [{\"name\"=&gt;\"Product 2\",\n                   \"brand\"=&gt;\"Brand 2\",\n                   \"desc\"=&gt;\"Placeat a sunt eos incidunt temporibus.\\r\\n\\r\\nReprehenderit repudiandae amet quibusdam dolorem et. Itaque commodi at.\",\n                   \"hs_code\"=&gt;\"12212121\",\n                   \"options_attributes\"=&gt;\n{\"0\"=&gt;{\"name\"=&gt;\"hkjlVariation 4\", \"suboptions_attributes\"=&gt;{\"0\"=&gt;{\"name\"=&gt;\"Chkjlhoice 0\", \"id\"=&gt;\"582209026b710eded24ecd12\"}}, \"id\"=&gt;\"582209026b710eded24ecd13\"},\n \"1\"=&gt;\n{\"name\"=&gt;\"hhVhariation h5kkk\",\n \"suboptions_attributes\"=&gt;{\"0\"=&gt;{\"name\"=&gt;\"Choice 0kh\", \"id\"=&gt;\"582209026b710eded24ecd14\"}, \"1\"=&gt;{\"name\"=&gt;\"hkjChoice 1\", \"id\"=&gt;\"582209026b710eded24ecd16\"}, \"2\"=&gt;{\"name\"=&gt;\"kkk\"}},\n \"id\"=&gt;\"582209026b710eded24ecd15\"},\n \"2\"=&gt;{\"name\"=&gt;\"lh\", \"suboptions_attributes\"=&gt;{\"0\"=&gt;{\"name\"=&gt;\"klhj\"}}}}}]\n\nrequire 'pp'\n\ncopy = product_params.deep_dup\ncopy.each do |product_param|\n  product_param[\"options_attributes\"].each do |key,option_attribute|\n    option_attribute.delete(\"suboptions_attributes\")\n  end\nend\n\npp product_params\nputs \"--------\"\npp copy\n\n# [{\"name\"=&gt;\"Product 2\",\n#   \"brand\"=&gt;\"Brand 2\",\n#   \"desc\"=&gt;\n#    \"Placeat a sunt eos incidunt temporibus.\\r\\n\\r\\nReprehenderit repudiandae amet quibusdam dolorem et. Itaque commodi at.\",\n#   \"hs_code\"=&gt;\"12212121\",\n#   \"options_attributes\"=&gt;\n#    {\"0\"=&gt;\n#      {\"name\"=&gt;\"hkjlVariation 4\",\n#       \"suboptions_attributes\"=&gt;\n#        {\"0\"=&gt;{\"name\"=&gt;\"Chkjlhoice 0\", \"id\"=&gt;\"582209026b710eded24ecd12\"}},\n#       \"id\"=&gt;\"582209026b710eded24ecd13\"},\n#     \"1\"=&gt;\n#      {\"name\"=&gt;\"hhVhariation h5kkk\",\n#       \"suboptions_attributes\"=&gt;\n#        {\"0\"=&gt;{\"name\"=&gt;\"Choice 0kh\", \"id\"=&gt;\"582209026b710eded24ecd14\"},\n#         \"1\"=&gt;{\"name\"=&gt;\"hkjChoice 1\", \"id\"=&gt;\"582209026b710eded24ecd16\"},\n#         \"2\"=&gt;{\"name\"=&gt;\"kkk\"}},\n#       \"id\"=&gt;\"582209026b710eded24ecd15\"},\n#     \"2\"=&gt;{\"name\"=&gt;\"lh\", \"suboptions_attributes\"=&gt;{\"0\"=&gt;{\"name\"=&gt;\"klhj\"}}}}}]\n# --------\n# [{\"name\"=&gt;\"Product 2\",\n#   \"brand\"=&gt;\"Brand 2\",\n#   \"desc\"=&gt;\n#    \"Placeat a sunt eos incidunt temporibus.\\r\\n\\r\\nReprehenderit repudiandae amet quibusdam dolorem et. Itaque commodi at.\",\n#   \"hs_code\"=&gt;\"12212121\",\n#   \"options_attributes\"=&gt;\n#    {\"0\"=&gt;{\"name\"=&gt;\"hkjlVariation 4\", \"id\"=&gt;\"582209026b710eded24ecd13\"},\n#     \"1\"=&gt;{\"name\"=&gt;\"hhVhariation h5kkk\", \"id\"=&gt;\"582209026b710eded24ecd15\"},\n#     \"2\"=&gt;{\"name\"=&gt;\"lh\"}}}]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1053, "user_id": 1061664, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/zGsvQ.jpg?s=128&g=1", "display_name": "Girish Gupta", "link": "https://stackoverflow.com/users/1061664/girish-gupta"}, "edited": false, "score": 1, "creation_date": 1585304559, "post_id": 40522972, "comment_id": 107717977, "body": "I can still see that original params getting changed"}], "tags": [], "owner": {"reputation": 1998, "user_id": 1920622, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e79e2b4b00afb2d10594b1894cb7df87?s=128&d=identicon&r=PG", "display_name": "Laurent", "link": "https://stackoverflow.com/users/1920622/laurent"}, "is_accepted": true, "score": 4, "last_activity_date": 1478766420, "creation_date": 1478766420, "answer_id": 40522972, "question_id": 40510232, "link": "https://stackoverflow.com/questions/40510232/apparent-issue-with-dup-and-clone-in-rails-params/40522972#40522972", "title": "Apparent issue with dup and clone in Rails params", "body": "<h2>Working solution</h2>\n\n<p>After some investigation, I realized params and its relatives are a <code>ActionController::Parameters</code> class and not a simple hash output, which's logical to manipulate it with <code>require</code>, <code>except</code>, etc. I first thought it would fully act like a hash but it's not the case.</p>\n\n<p>Doing a <code>clone</code>, <code>dup</code>, <code>deep_dup</code> on it will just copy the class and because of the magic of rails, changing anything in this copy will lead to a global change. I don't know the exact reason of this behaviour but I guess there's some <strong>class variables / singleton pattern</strong> going on.</p>\n\n<p>The simplest solution I found was to convert it to a hash via <code>to_h</code> so it cut out this problem. You can do <code>params_hash = params.to_h</code> and then manipulate the hash and it won't have any consequence on the original <code>params</code> object.</p>\n"}, {"tags": [], "owner": {"reputation": 4107, "user_id": 1612469, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/VaKOC.jpg?s=128&g=1", "display_name": "Aleks", "link": "https://stackoverflow.com/users/1612469/aleks"}, "is_accepted": false, "score": 0, "last_activity_date": 1594925512, "creation_date": 1594925512, "answer_id": 62941671, "question_id": 40510232, "link": "https://stackoverflow.com/questions/40510232/apparent-issue-with-dup-and-clone-in-rails-params/62941671#62941671", "title": "Apparent issue with dup and clone in Rails params", "body": "<p>For me applying only <code>.to_h</code> also was causing the original parameters to change.\nThe solution that worked for me was:</p>\n<pre><code>params.to_a.to_h.deep_clone\n</code></pre>\n"}], "owner": {"reputation": 1998, "user_id": 1920622, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e79e2b4b00afb2d10594b1894cb7df87?s=128&d=identicon&r=PG", "display_name": "Laurent", "link": "https://stackoverflow.com/users/1920622/laurent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 844, "favorite_count": 0, "accepted_answer_id": 40522972, "answer_count": 3, "score": 2, "last_activity_date": 1594925512, "creation_date": 1478704355, "last_edit_date": 1478705033, "question_id": 40510232, "link": "https://stackoverflow.com/questions/40510232/apparent-issue-with-dup-and-clone-in-rails-params", "title": "Apparent issue with dup and clone in Rails params", "body": "<p>I'm in a Rails controller. I try to take some <code>params</code> and change some of the datas to update a model, but I also want to keep the original <code>params</code> untouched.</p>\n\n<p>The logical way to go is to use <code>clone</code> or <code>dup</code> but whatever I try, it fails and changes the original hash.</p>\n\n<pre><code># Original product_params which is set as params.require(:product)\n{\"name\"=&gt;\"Product 2\",\n \"brand\"=&gt;\"Brand 2\",\n \"desc\"=&gt;\"Placeat a sunt eos incidunt temporibus.\\r\\n\\r\\nReprehenderit repudiandae amet quibusdam dolorem et. Itaque commodi at.\",\n \"hs_code\"=&gt;\"12212121\",\n \"options_attributes\"=&gt;\n  {\"0\"=&gt;{\"name\"=&gt;\"hkjlVariation 4\", \"suboptions_attributes\"=&gt;{\"0\"=&gt;{\"name\"=&gt;\"Chkjlhoice 0\", \"id\"=&gt;\"582209026b710eded24ecd12\"}}, \"id\"=&gt;\"582209026b710eded24ecd13\"},\n   \"1\"=&gt;\n    {\"name\"=&gt;\"hhVhariation h5kkk\",\n     \"suboptions_attributes\"=&gt;{\"0\"=&gt;{\"name\"=&gt;\"Choice 0kh\", \"id\"=&gt;\"582209026b710eded24ecd14\"}, \"1\"=&gt;{\"name\"=&gt;\"hkjChoice 1\", \"id\"=&gt;\"582209026b710eded24ecd16\"}, \"2\"=&gt;{\"name\"=&gt;\"kkk\"}},\n     \"id\"=&gt;\"582209026b710eded24ecd15\"},\n   \"2\"=&gt;{\"name\"=&gt;\"lh\", \"suboptions_attributes\"=&gt;{\"0\"=&gt;{\"name\"=&gt;\"klhj\"}}}}}\n\n# Method to change the `suboptions_attributes` to `nil`\ndef product_params_without_suboptions\n  copy = product_params.dup\n  copy.tap do |product_param|\n    product_param[:options_attributes].each do |key, option_attribute|\n      unless option_attribute[:suboptions_attributes].nil?\n        option_attribute[:suboptions_attributes] = nil\n      end\n    end\n  end\nend\n\n# We define product_params\ndef product_params\n  params.require(:product).permit!\nend\n</code></pre>\n\n<p>The result of <code>product_params_without_suboptions</code> is correct. It set all the <code>option_attribute</code> to <code>nil</code> but when I try to call <code>params</code> or <code>product_params</code> it also changed there. <strong>Why isn't dup working here ?</strong></p>\n"}, {"tags": ["ruby", "magento", "soap", "savon"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1480432059, "post_id": 40510089, "comment_id": 68953841, "body": "Any update on this?"}, {"owner": {"reputation": 748, "user_id": 3041946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/223e166ce464a1537230c1600c03e71c?s=128&d=identicon&r=PG&f=1", "display_name": "Cremz", "link": "https://stackoverflow.com/users/3041946/cremz"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1480585567, "post_id": 40510089, "comment_id": 69026916, "body": "we found out that it is happening because of a magento plugin, something called  Clang extension. i think in the end the client turned that off and it was fine, but i would really like to know if there is a solution for this issue."}], "owner": {"reputation": 748, "user_id": 3041946, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/223e166ce464a1537230c1600c03e71c?s=128&d=identicon&r=PG&f=1", "display_name": "Cremz", "link": "https://stackoverflow.com/users/3041946/cremz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 246, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1478703948, "creation_date": 1478703948, "question_id": 40510089, "link": "https://stackoverflow.com/questions/40510089/soap-envserver-cannot-use-object-of-type-stdclass-as-array-magento-ruby", "title": "(SOAP-ENV:Server) Cannot use object of type stdClass as array - magento - ruby", "body": "<p>I'm trying to create a customer in magento using soap. I use Savon gem for ruby, make a call like:</p>\n\n<pre><code>@client.call(:customer_customer_create, message: {\n                          session_id: \"id\",\n                          customer_data: {\n                            email: email,\n                            firstname: firstname,\n                            lastname: lastname,\n                            password: SecureRandom.base64,\n                            'store_id' =&gt; @store_id\n                          }\n                        })\n</code></pre>\n\n<p>Getting the error:</p>\n\n<pre><code>(SOAP-ENV:Server) Cannot use object of type stdClass as array\n</code></pre>\n\n<p>on this call. Can't really trace it or know of any other ways of debugging. This is run from a job and it started failing a while ago. Shop owner said that he added Magento patch SUPEE-8788.\nIs there a setting in magento that we need to activate so that the calls work?</p>\n"}, {"tags": ["ruby", "rvm", "ubuntu-16.04"], "comments": [{"owner": {"reputation": 447, "user_id": 599968, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ae53d01012948ed0b96f3c81bb16d35e?s=128&d=identicon&r=PG", "display_name": "kaczor1984", "link": "https://stackoverflow.com/users/599968/kaczor1984"}, "edited": false, "score": 0, "creation_date": 1479309981, "post_id": 40509887, "comment_id": 68504075, "body": "I guess installing <code>libssl-dev</code> will take you a step further ;)     Have you seen this: <code>https:&#47;&#47;rvm.io&#47;rvm&#47;autolibs</code>  You might want to run your command as <code>rvm install ruby-2.2.2 --autolibs=enable</code> or even enable the autolibs for good: <code>rvm autolibs enable</code>"}, {"owner": {"reputation": 3423, "user_id": 853428, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d33937338967ce3d22f719beac559cce?s=128&d=identicon&r=PG", "display_name": "Kresimir Pendic", "link": "https://stackoverflow.com/users/853428/kresimir-pendic"}, "edited": false, "score": 0, "creation_date": 1479331160, "post_id": 40509887, "comment_id": 68517066, "body": "hi, I tried to install it with <code>sudo apt install libssl-dev</code> but I get this: <code>libssl-dev is already the newest version (1.0.2j-1+deb.sury.org~xenial+1)</code> I have also tried with autolibs enable but the error is the same..."}, {"owner": {"reputation": 3423, "user_id": 853428, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d33937338967ce3d22f719beac559cce?s=128&d=identicon&r=PG", "display_name": "Kresimir Pendic", "link": "https://stackoverflow.com/users/853428/kresimir-pendic"}, "reply_to_user": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1479382298, "post_id": 40509887, "comment_id": 68538671, "body": "thank you very much @Wayne for great edit,, this is much clearer!"}], "answers": [{"comments": [{"owner": {"reputation": 3423, "user_id": 853428, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d33937338967ce3d22f719beac559cce?s=128&d=identicon&r=PG", "display_name": "Kresimir Pendic", "link": "https://stackoverflow.com/users/853428/kresimir-pendic"}, "edited": false, "score": 0, "creation_date": 1479386438, "post_id": 40654228, "comment_id": 68541347, "body": "it worked! got it to go over compiling and installing without errors! thanks"}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "reply_to_user": {"reputation": 1464, "user_id": 5935198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e36ba5b69b43af8e8ef7ddcc43d93b27?s=128&d=identicon&r=PG", "display_name": "RousseauAlexandre", "link": "https://stackoverflow.com/users/5935198/rousseaualexandre"}, "edited": false, "score": 0, "creation_date": 1504635819, "post_id": 40654228, "comment_id": 79082650, "body": "@RousseauAlexandre Thank you for that edit.  Did that edit make it work in Linux Mint, or does the problem remain?"}], "tags": [], "owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "is_accepted": true, "score": 3, "last_activity_date": 1504635763, "last_edit_date": 1504635763, "creation_date": 1479383659, "answer_id": 40654228, "question_id": 40509887, "link": "https://stackoverflow.com/questions/40509887/cant-build-ruby-2-2-2-various-sslv3-methods-undeclared/40654228#40654228", "title": "Can&#39;t build ruby 2.2.2 -- various SSLv3_ methods undeclared", "body": "<p>A similar issue was noted for rbenv: <a href=\"https://github.com/rbenv/ruby-build/issues/834\" rel=\"nofollow noreferrer\">Cannot install Ruby 2.2.3 in ubuntu 14.04</a>.</p>\n\n<p>This appears to be an issue with Ruby 2.2.2 and 2.2.3 when built with certain versions of openssl.  If you can, change to a later version of Ruby 2.2.  The latest right now is 2.2.5.</p>\n\n<p>If you must use Ruby 2.2.2, there is still hope.  The <a href=\"https://github.com/rbenv/ruby-build/issues/834\" rel=\"nofollow noreferrer\">rbenv issue</a> suggested <a href=\"https://gist.github.com/mislav/055441129184a1512bb5\" rel=\"nofollow noreferrer\">a patch</a> for Ruby 2.2.2; several users said it worked for them.  Try installing Ruby using that patch:</p>\n\n<pre><code>rvm install ruby-2.2.2 --patch https://gist.githubusercontent.com/mislav/055441129184a1512bb5/raw\n</code></pre>\n"}], "owner": {"reputation": 3423, "user_id": 853428, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d33937338967ce3d22f719beac559cce?s=128&d=identicon&r=PG", "display_name": "Kresimir Pendic", "link": "https://stackoverflow.com/users/853428/kresimir-pendic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 763, "favorite_count": 0, "accepted_answer_id": 40654228, "answer_count": 1, "score": 1, "last_activity_date": 1504635763, "creation_date": 1478703299, "last_edit_date": 1495542283, "question_id": 40509887, "link": "https://stackoverflow.com/questions/40509887/cant-build-ruby-2-2-2-various-sslv3-methods-undeclared", "title": "Can&#39;t build ruby 2.2.2 -- various SSLv3_ methods undeclared", "body": "<p>I'm using rvm to install Ruby, but I have an error that I don't understand.  This is what I get in the console somewhere in the middle of compiling:</p>\n\n<pre><code>derby git:(master) rvm install ruby-2.2.2\nruby-2.2.2 - #removing src/ruby-2.2.2 - please wait\nSearching for binary rubies, this might take some time.\nNo binary rubies available for: ubuntu/16.04/x86_64/ruby-2.2.2.\nContinuing with compilation. Please read 'rvm help mount' to get more information on binary rubies.\nChecking requirements for ubuntu.\nRequirements installation successful.\nInstalling Ruby from source to: /usr/share/rvm/rubies/ruby-2.2.2, this may take a while depending on your cpu(s)...\nruby-2.2.2 - #downloading ruby-2.2.2, this may take a while depending on your connection...\nruby-2.2.2 - #extracting ruby-2.2.2 to /usr/share/rvm/src/ruby-2.2.2 - please wait\nruby-2.2.2 - #applying patch /usr/share/rvm/patches/ruby/2.2.2/fix_installing_bundled_gems.patch - please wait\nruby-2.2.2 - #configuring - please wait\nruby-2.2.2 - #post-configuration - please wait\nruby-2.2.2 - #compiling - please wait\nError running '__rvm_make -j8',\nshowing last 15 lines of /home/krex/.rvm/log/1478709580_ruby-2.2.2/make.log\ncompiling constants.c\nmake[2]: Leaving directory '/usr/share/rvm/src/ruby-2.2.2/ext/openssl'\nexts.mk:202: recipe for target 'ext/openssl/all' failed\nmake[1]: *** [ext/openssl/all] Error 2\nmake[1]: *** Waiting for unfinished jobs....\nlinking shared-object zlib.so\nmake[2]: Leaving directory '/usr/share/rvm/src/ruby-2.2.2/ext/zlib'\nlinking shared-object socket.so\nmake[2]: Leaving directory '/usr/share/rvm/src/ruby-2.2.2/ext/socket'\nlinking shared-object ripper.so\nmake[2]: Leaving directory '/usr/share/rvm/src/ruby-2.2.2/ext/ripper'\nmake[1]: Leaving directory '/usr/share/rvm/src/ruby-2.2.2'\nuncommon.mk:189: recipe for target 'build-ext' failed\nmake: *** [build-ext] Error 2\n+__rvm_make:0&gt; return 2\nThere has been an error while running make. Halting the installation.\n</code></pre>\n\n<p>the openssl version that I have is: <code>OpenSSL 1.0.2j  26 Sep 2016</code> </p>\n\n<p>The <a href=\"http://pastebin.com/raw/AwAvjexv\" rel=\"nofollow noreferrer\">log file /home/krex/.rvm/log/1478709580_ruby-2.2.2/make.log</a> contains this compilation error:</p>\n\n<pre><code>compiling ossl_x509cert.c\nossl_ssl.c:141:27: error: \u2018SSLv3_method\u2019 undeclared here (not in a function)\n     OSSL_SSL_METHOD_ENTRY(SSLv3),\n                           ^\nossl_ssl.c:119:69: note: in definition of macro \u2018OSSL_SSL_METHOD_ENTRY\u2019\n #define OSSL_SSL_METHOD_ENTRY(name) { #name, (SSL_METHOD *(*)(void))name##_method }\n                                                                     ^\nossl_ssl.c:142:27: error: \u2018SSLv3_server_method\u2019 undeclared here (not in a function)\n     OSSL_SSL_METHOD_ENTRY(SSLv3_server),\n                           ^\nossl_ssl.c:119:69: note: in definition of macro \u2018OSSL_SSL_METHOD_ENTRY\u2019\n #define OSSL_SSL_METHOD_ENTRY(name) { #name, (SSL_METHOD *(*)(void))name##_method }\n                                                                     ^\nossl_ssl.c:143:27: error: \u2018SSLv3_client_method\u2019 undeclared here (not in a function)\n     OSSL_SSL_METHOD_ENTRY(SSLv3_client),\n                           ^\nossl_ssl.c:119:69: note: in definition of macro \u2018OSSL_SSL_METHOD_ENTRY\u2019\n #define OSSL_SSL_METHOD_ENTRY(name) { #name, (SSL_METHOD *(*)(void))name##_method }\n                                                                     ^\nMakefile:293: recipe for target 'ossl_ssl.o' failed\nmake[2]: *** [ossl_ssl.o] Error 1\n</code></pre>\n\n<p>I tried the solution from this question, but that didn't help either:\n<a href=\"https://stackoverflow.com/questions/33270840/rbenv-ruby-2-2-2-install-fail-ubuntu-14-04\">Rbenv ruby 2.2.2 install fail Ubuntu 14.04</a></p>\n\n<p>How do I resolve this error and get Ruby installed?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "edited": false, "score": 0, "creation_date": 1478702910, "post_id": 40509670, "comment_id": 68261341, "body": "Do you have the method <code>decent_configuration</code> in <code>application_controller.rb</code>?"}, {"owner": {"reputation": 513, "user_id": 815970, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/pKgoR.jpg?s=128&g=1", "display_name": "Waris Ali", "link": "https://stackoverflow.com/users/815970/waris-ali"}, "reply_to_user": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "edited": false, "score": 0, "creation_date": 1478702947, "post_id": 40509670, "comment_id": 68261365, "body": "Yes. The same copy of code working on local."}], "answers": [{"tags": [], "owner": {"reputation": 984, "user_id": 1825484, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/LBNnm.jpg?s=128&g=1", "display_name": "Ace Dimasuhid", "link": "https://stackoverflow.com/users/1825484/ace-dimasuhid"}, "is_accepted": false, "score": 0, "last_activity_date": 1478703617, "creation_date": 1478703617, "answer_id": 40509971, "question_id": 40509670, "link": "https://stackoverflow.com/questions/40509670/rails-server-exiting-immediately-after-starting-undefined-method/40509971#40509971", "title": "Rails server exiting immediately after starting &lt;Undefined method&gt;", "body": "<p>Perhaps server side updated your <code>decent_exposure</code> into a different version of API (V2 to V3). More details on it \n<a href=\"https://github.com/hashrocket/decent_exposure/wiki/Api-changes-in-version-3\" rel=\"nofollow noreferrer\">here</a> particularly in the <code>Problems you may face upgrading</code> section.</p>\n"}], "owner": {"reputation": 513, "user_id": 815970, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/pKgoR.jpg?s=128&g=1", "display_name": "Waris Ali", "link": "https://stackoverflow.com/users/815970/waris-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 346, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1478703617, "creation_date": 1478702700, "question_id": 40509670, "link": "https://stackoverflow.com/questions/40509670/rails-server-exiting-immediately-after-starting-undefined-method", "title": "Rails server exiting immediately after starting &lt;Undefined method&gt;", "body": "<p>I have a strange issue. I just configured a rails project on a remote server. But immediately after I run 'rails server' command I get this error:</p>\n\n<pre><code>[pediatric-nutri]# rails server\n=&gt; Booting WEBrick\n=&gt; Rails 4.1.16 application starting in development on http://0.0.0.0:3000\n=&gt; Run `rails server -h` for more startup options\n=&gt; Notice: server is listening on all interfaces (0.0.0.0). Consider using 127.0.0.1 (--binding option)\n=&gt; Ctrl-C to shutdown server\nExiting\n/home/lookwhat/rails_apps/pediatric-nutri/app/controllers/application_controller.rb:5:in `&lt;class:ApplicationController&gt;': undefined method `decent_configuration' for ApplicationController:Class (NoMethodError)\n    from /home/lookwhat/rails_apps/pediatric-nutri/app/controllers/application_controller.rb:1:in `&lt;top (required)&gt;'\n    from /usr/local/rvm/gems/ruby-2.3.1/gems/activesupport-4.1.16/lib/active_support/dependencies.rb:443:in `load'\n</code></pre>\n"}, {"tags": ["ruby", "message-queue"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1478703519, "post_id": 40509561, "comment_id": 68261741, "body": "What happens if you put <code>sleep 60</code> at the end of your program with <code>NATS.stop</code> enabled? Do the messages get delivered then?"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1478703788, "post_id": 40509561, "comment_id": 68261929, "body": "Actually I think you need to call <code>NATS.flush</code> before you call <code>stop</code> to ensure processing of all messages."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7037812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e973ed238f19def935eb3e623c235491?s=128&d=identicon&r=PG&f=1", "display_name": "giff", "link": "https://stackoverflow.com/users/7037812/giff"}, "edited": false, "score": 0, "creation_date": 1478719928, "post_id": 40510187, "comment_id": 68270874, "body": "Thank you for that, however the behavior is completely unchanged.  With NATS.stop commented: I get the messages delivered (I&#39;m listening with nats-sub in a different window); With NATS.stop in place, no messages are delivered, though it claims they will be sent.  This is all with the NATS.flush in place as recommended."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 13, "user_id": 7037812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e973ed238f19def935eb3e623c235491?s=128&d=identicon&r=PG&f=1", "display_name": "giff", "link": "https://stackoverflow.com/users/7037812/giff"}, "edited": false, "score": 0, "creation_date": 1478734694, "post_id": 40510187, "comment_id": 68277262, "body": "Ok. Really strange. Don&#39;t know what&#39;s going on then :( Would need to debug it more thoroughly in this case."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "reply_to_user": {"reputation": 13, "user_id": 7037812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e973ed238f19def935eb3e623c235491?s=128&d=identicon&r=PG&f=1", "display_name": "giff", "link": "https://stackoverflow.com/users/7037812/giff"}, "edited": false, "score": 0, "creation_date": 1478734838, "post_id": 40510187, "comment_id": 68277302, "body": "Perhaps raise and issue on github and see if you get help there, then post the solution here."}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": false, "score": 0, "last_activity_date": 1478704238, "creation_date": 1478704238, "answer_id": 40510187, "question_id": 40509561, "link": "https://stackoverflow.com/questions/40509561/ruby-nats-simple-publishing/40510187#40510187", "title": "Ruby NATS simple publishing", "body": "<p>Looking at the code for the library <code>NATS.stop</code> seems to be very aggressive in that it disconnects immediately, without checking if there is still some processing left to do.</p>\n\n<p>Therefore it seems calling <code>NATS.flush</code> before <code>NATS.stop</code> is the solution, because it should ensure all pending events are processed before closing the connection:</p>\n\n<pre><code>NATS.start do\n  ...do your messaging...\n\n  NATS.flush  # Ensure processing of pending messages    \n  NATS.stop   # Immidiate exit\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13, "user_id": 7037812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e973ed238f19def935eb3e623c235491?s=128&d=identicon&r=PG&f=1", "display_name": "giff", "link": "https://stackoverflow.com/users/7037812/giff"}, "edited": false, "score": 1, "creation_date": 1480948573, "post_id": 40940786, "comment_id": 69162598, "body": "This worked perfectly for me, wallyqs, thank you.  With some tinkering, it seems I needed the instance variable &quot;nats&quot; in the loop and the nats.flush/nats.close combination.  Any other combination ended up with the behavior earlier."}], "tags": [], "owner": {"reputation": 5951, "user_id": 9082, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/827fd7206695d35526991c9a2feb5f6a?s=128&d=identicon&r=PG", "display_name": "wallyqs", "link": "https://stackoverflow.com/users/9082/wallyqs"}, "is_accepted": true, "score": 0, "last_activity_date": 1480712569, "creation_date": 1480712569, "answer_id": 40940786, "question_id": 40509561, "link": "https://stackoverflow.com/questions/40509561/ruby-nats-simple-publishing/40940786#40940786", "title": "Ruby NATS simple publishing", "body": "<p>for your example you can give it a try at doing something like so that all lines are published and flushed to the server before stopping the event loop.</p>\n\n<pre><code>require 'nats/client'\n\n$stdout.sync = true\n\nNATS.start(servers: [\"nats://127.0.0.1:4222\"]) do |nats|\n  STDIN.read.each_line do |line|\n    nats.publish(\"hello\", line)\n  end\n  nats.flush do\n    nats.close\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7037812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e973ed238f19def935eb3e623c235491?s=128&d=identicon&r=PG&f=1", "display_name": "giff", "link": "https://stackoverflow.com/users/7037812/giff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 0, "accepted_answer_id": 40940786, "answer_count": 2, "score": 1, "last_activity_date": 1480712569, "creation_date": 1478702365, "question_id": 40509561, "link": "https://stackoverflow.com/questions/40509561/ruby-nats-simple-publishing", "title": "Ruby NATS simple publishing", "body": "<p>I'm learning NATS in Ruby and wanted to create a simple \"cat\" from stdin.  Either I get all the lines and the loop doesn't exit, or nothing gets sent.</p>\n\n<pre><code>!/usr/bin/env ruby\n\nrequire \"nats/client\"\n\nqueue = ARGV.shift\n\nNATS.start do\n  STDIN.each_line do |line|\n    puts \"will send: #{line}\"\n    NATS.publish(queue, line)\n  end\n\n  NATS.stop\nend\n\nputs \"... #{__LINE__}\"\nexit 0\n</code></pre>\n\n<p>And I run with:</p>\n\n<pre><code># cat cat.rb | ./cat.rb myqueue\n</code></pre>\n\n<p>With NATS.stop enabled, nothing shows up on the queue, though it correctly shows each line that it will attempt to send, and the program exits:</p>\n\n<pre><code># cat cat.rb | ./cat.rb myqueue\nwill send: #!/usr/bin/env ruby\nwill send: \nwill send: require \"nats/client\"\nwill send: \nwill send: queue = ARGV.shift\nwill send: \nwill send: NATS.start do\nwill send:   STDIN.each_line do |line|\nwill send:     puts \"will send: #{line}\"\nwill send:     NATS.publish(queue, line)\nwill send:   end\nwill send: \nwill send:   NATS.stop\nwill send: end\nwill send: \nwill send: puts \"... #{__LINE__}\"\nwill send: exit 0\nwill send: \n... 16\n#\n</code></pre>\n\n<p>And with NATS.stop commented out, all the lines are sent to the queue, but the program doesn't exit:</p>\n\n<pre><code># cat cat.rb | ./cat.rb myqueue\nwill send: #!/usr/bin/env ruby\nwill send: \nwill send: require \"nats/client\"\nwill send: \nwill send: queue = ARGV.shift\nwill send: \nwill send: NATS.start do\nwill send:   STDIN.each_line do |line|\nwill send:     puts \"will send: #{line}\"\nwill send:     NATS.publish(queue, line)\nwill send:   end\nwill send: \nwill send:   # NATS.stop\nwill send: end\nwill send: \nwill send: puts \"... #{__LINE__}\"\nwill send: exit 0\nwill send: \n&lt;and program sits here&gt;\n</code></pre>\n\n<p>What am I missing?  Isn't there something easier for just sending a message from Ruby that doesn't involve multi-threading issues?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 984, "user_id": 1825484, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/LBNnm.jpg?s=128&g=1", "display_name": "Ace Dimasuhid", "link": "https://stackoverflow.com/users/1825484/ace-dimasuhid"}, "edited": false, "score": 0, "creation_date": 1478702976, "post_id": 40509291, "comment_id": 68261378, "body": "Hmm I tried it and it appears to be correct. Were you able to save the <code>User</code> file when you added the validations?"}, {"owner": {"reputation": 23312, "user_id": 560215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bb365e8477053edcc55b40c3d27781d8?s=128&d=identicon&r=PG", "display_name": "sevenseacat", "link": "https://stackoverflow.com/users/560215/sevenseacat"}, "edited": false, "score": 0, "creation_date": 1478705450, "post_id": 40509291, "comment_id": 68263045, "body": "so whats the question now? which set of tests? remove the ones that aren&#39;t the problem."}, {"owner": {"reputation": 39, "user_id": 6048440, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/43b99784b7b48ffbb5159451ac9c5f78?s=128&d=identicon&r=PG&f=1", "display_name": "mk4280", "link": "https://stackoverflow.com/users/6048440/mk4280"}, "reply_to_user": {"reputation": 23312, "user_id": 560215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bb365e8477053edcc55b40c3d27781d8?s=128&d=identicon&r=PG", "display_name": "sevenseacat", "link": "https://stackoverflow.com/users/560215/sevenseacat"}, "edited": false, "score": 0, "creation_date": 1478706661, "post_id": 40509291, "comment_id": 68263848, "body": "@sevenseacat removed the old one."}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 6048440, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/43b99784b7b48ffbb5159451ac9c5f78?s=128&d=identicon&r=PG&f=1", "display_name": "mk4280", "link": "https://stackoverflow.com/users/6048440/mk4280"}, "edited": false, "score": 0, "creation_date": 1478706794, "post_id": 40510790, "comment_id": 68263931, "body": "I ran bundle exec rake routes. I restarted my computer and ran Ruby again."}, {"owner": {"reputation": 106, "user_id": 3071525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/077d978040dfccbcb2661d16219a964d?s=128&d=identicon&r=PG&f=1", "display_name": "Vekka", "link": "https://stackoverflow.com/users/3071525/vekka"}, "reply_to_user": {"reputation": 39, "user_id": 6048440, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/43b99784b7b48ffbb5159451ac9c5f78?s=128&d=identicon&r=PG&f=1", "display_name": "mk4280", "link": "https://stackoverflow.com/users/6048440/mk4280"}, "edited": false, "score": 0, "creation_date": 1478707149, "post_id": 40510790, "comment_id": 68264205, "body": "From what i see you have routes defines incorrectly as you can se your prefix is <code>help</code> and it should be <code>static_pages_help</code> . URL pattern should be <code>static_pages&#47;help</code>"}, {"owner": {"reputation": 39, "user_id": 6048440, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/43b99784b7b48ffbb5159451ac9c5f78?s=128&d=identicon&r=PG&f=1", "display_name": "mk4280", "link": "https://stackoverflow.com/users/6048440/mk4280"}, "edited": false, "score": 0, "creation_date": 1478707679, "post_id": 40510790, "comment_id": 68264566, "body": "same problem. i have get &#39;help&#39; =&gt; &#39;static_pages#help&#39;"}, {"owner": {"reputation": 106, "user_id": 3071525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/077d978040dfccbcb2661d16219a964d?s=128&d=identicon&r=PG&f=1", "display_name": "Vekka", "link": "https://stackoverflow.com/users/3071525/vekka"}, "reply_to_user": {"reputation": 39, "user_id": 6048440, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/43b99784b7b48ffbb5159451ac9c5f78?s=128&d=identicon&r=PG&f=1", "display_name": "mk4280", "link": "https://stackoverflow.com/users/6048440/mk4280"}, "edited": false, "score": 0, "creation_date": 1478707933, "post_id": 40510790, "comment_id": 68264724, "body": "i think you should have get &#39;static_pages/help` because this is this &quot;real path that will be used in your app if you would check it on your browser"}, {"owner": {"reputation": 106, "user_id": 3071525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/077d978040dfccbcb2661d16219a964d?s=128&d=identicon&r=PG&f=1", "display_name": "Vekka", "link": "https://stackoverflow.com/users/3071525/vekka"}, "reply_to_user": {"reputation": 39, "user_id": 6048440, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/43b99784b7b48ffbb5159451ac9c5f78?s=128&d=identicon&r=PG&f=1", "display_name": "mk4280", "link": "https://stackoverflow.com/users/6048440/mk4280"}, "edited": false, "score": 0, "creation_date": 1478708340, "post_id": 40510790, "comment_id": 68264961, "body": "You can just past this line that i provided you and check if it would work"}, {"owner": {"reputation": 39, "user_id": 6048440, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/43b99784b7b48ffbb5159451ac9c5f78?s=128&d=identicon&r=PG&f=1", "display_name": "mk4280", "link": "https://stackoverflow.com/users/6048440/mk4280"}, "edited": false, "score": 0, "creation_date": 1478708478, "post_id": 40510790, "comment_id": 68265040, "body": "I tried. It did not solve the problem. I am getting the same result."}, {"owner": {"reputation": 106, "user_id": 3071525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/077d978040dfccbcb2661d16219a964d?s=128&d=identicon&r=PG&f=1", "display_name": "Vekka", "link": "https://stackoverflow.com/users/3071525/vekka"}, "reply_to_user": {"reputation": 39, "user_id": 6048440, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/43b99784b7b48ffbb5159451ac9c5f78?s=128&d=identicon&r=PG&f=1", "display_name": "mk4280", "link": "https://stackoverflow.com/users/6048440/mk4280"}, "edited": false, "score": 0, "creation_date": 1478708724, "post_id": 40510790, "comment_id": 68265209, "body": "After changes did you made ` rake routes` again and did output changed in any way?"}, {"owner": {"reputation": 106, "user_id": 3071525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/077d978040dfccbcb2661d16219a964d?s=128&d=identicon&r=PG&f=1", "display_name": "Vekka", "link": "https://stackoverflow.com/users/3071525/vekka"}, "reply_to_user": {"reputation": 39, "user_id": 6048440, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/43b99784b7b48ffbb5159451ac9c5f78?s=128&d=identicon&r=PG&f=1", "display_name": "mk4280", "link": "https://stackoverflow.com/users/6048440/mk4280"}, "edited": false, "score": 0, "creation_date": 1478709183, "post_id": 40510790, "comment_id": 68265470, "body": "And by the way you need to change in the same way all routes connected with static pages. I&#39;m pretty sure that this should solve problem"}, {"owner": {"reputation": 106, "user_id": 3071525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/077d978040dfccbcb2661d16219a964d?s=128&d=identicon&r=PG&f=1", "display_name": "Vekka", "link": "https://stackoverflow.com/users/3071525/vekka"}, "reply_to_user": {"reputation": 39, "user_id": 6048440, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/43b99784b7b48ffbb5159451ac9c5f78?s=128&d=identicon&r=PG&f=1", "display_name": "mk4280", "link": "https://stackoverflow.com/users/6048440/mk4280"}, "edited": false, "score": 0, "creation_date": 1478709989, "post_id": 40510790, "comment_id": 68265916, "body": "From what i see everything works correctly you just defined 2 routes and you are testing 3 routes. Just add in your <code>config&#47;routes.rb</code> file this line `get &#39;static_pages/home&#39;"}, {"owner": {"reputation": 106, "user_id": 3071525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/077d978040dfccbcb2661d16219a964d?s=128&d=identicon&r=PG&f=1", "display_name": "Vekka", "link": "https://stackoverflow.com/users/3071525/vekka"}, "reply_to_user": {"reputation": 39, "user_id": 6048440, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/43b99784b7b48ffbb5159451ac9c5f78?s=128&d=identicon&r=PG&f=1", "display_name": "mk4280", "link": "https://stackoverflow.com/users/6048440/mk4280"}, "edited": false, "score": 0, "creation_date": 1478710011, "post_id": 40510790, "comment_id": 68265933, "body": "<code>get &#39;static_pages&#47;home&#39; </code>"}, {"owner": {"reputation": 39, "user_id": 6048440, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/43b99784b7b48ffbb5159451ac9c5f78?s=128&d=identicon&r=PG&f=1", "display_name": "mk4280", "link": "https://stackoverflow.com/users/6048440/mk4280"}, "edited": false, "score": 0, "creation_date": 1478710441, "post_id": 40510790, "comment_id": 68266159, "body": "Now it&#39;s givine me a different error. Did you look at my code and try it yourself?"}, {"owner": {"reputation": 39, "user_id": 6048440, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/43b99784b7b48ffbb5159451ac9c5f78?s=128&d=identicon&r=PG&f=1", "display_name": "mk4280", "link": "https://stackoverflow.com/users/6048440/mk4280"}, "edited": false, "score": 0, "creation_date": 1478710963, "post_id": 40510790, "comment_id": 68266454, "body": "You are right. I fixed my problems based on your answers. Thank you!"}, {"owner": {"reputation": 106, "user_id": 3071525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/077d978040dfccbcb2661d16219a964d?s=128&d=identicon&r=PG&f=1", "display_name": "Vekka", "link": "https://stackoverflow.com/users/3071525/vekka"}, "reply_to_user": {"reputation": 39, "user_id": 6048440, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/43b99784b7b48ffbb5159451ac9c5f78?s=128&d=identicon&r=PG&f=1", "display_name": "mk4280", "link": "https://stackoverflow.com/users/6048440/mk4280"}, "edited": false, "score": 0, "creation_date": 1478711084, "post_id": 40510790, "comment_id": 68266530, "body": "No problem. You can approve answer it took some time to fix it"}], "tags": [], "owner": {"reputation": 106, "user_id": 3071525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/077d978040dfccbcb2661d16219a964d?s=128&d=identicon&r=PG&f=1", "display_name": "Vekka", "link": "https://stackoverflow.com/users/3071525/vekka"}, "is_accepted": true, "score": 1, "last_activity_date": 1478707451, "last_edit_date": 1478707451, "creation_date": 1478706107, "answer_id": 40510790, "question_id": 40509291, "link": "https://stackoverflow.com/questions/40509291/ruby-on-rails-error-undefined-local-variable-or-method/40510790#40510790", "title": "Ruby on Rails Error: undefined local variable or method", "body": "<p>Just based on the last error that you got on last tests I would recommend you to run <code>bundle exec rake routes</code> and check if you defined routes correctly like it is on tutorial (you could copy paste it in here so we could check if everything is ok).</p>\n\n<p>Validations are looking ok.</p>\n\n<p>You could also tell if this error occurs randomly, just once or every time?</p>\n\n<p>And what do you mean by restarting Ruby? </p>\n\n<p>Edit.</p>\n\n<p>Check definition of routes in <code>routes.rb</code> if this is correct <code>get  'static_pages/help'</code>. You can try to change it to <code>get  'static_pages/help', as: 'static_pages_help'</code></p>\n"}, {"comments": [{"owner": {"reputation": 155, "user_id": 6297414, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e36e0275a7162d806e9da9df8c62ddd1?s=128&d=identicon&r=PG", "display_name": "Nahua", "link": "https://stackoverflow.com/users/6297414/nahua"}, "edited": false, "score": 0, "creation_date": 1579278267, "post_id": 44195724, "comment_id": 105724753, "body": "Thanks. This helped me on Michael Hartl&#39;s sample-app in Chapter 3!"}], "tags": [], "owner": {"reputation": 160, "user_id": 7771992, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YmU4F.jpg?s=128&g=1", "display_name": "Deep Mistry", "link": "https://stackoverflow.com/users/7771992/deep-mistry"}, "is_accepted": false, "score": 2, "last_activity_date": 1495782707, "creation_date": 1495782707, "answer_id": 44195724, "question_id": 40509291, "link": "https://stackoverflow.com/questions/40509291/ruby-on-rails-error-undefined-local-variable-or-method/44195724#44195724", "title": "Ruby on Rails Error: undefined local variable or method", "body": "<p>@Vekka I totally agree with your answer. Also i have tried a different way in the same example by changing the test. Below i have shown only for home</p>\n\n<pre><code>test \"should get home\" do\n get root_path\n assert_response :success\n assert_select \"title\", \"Ruby on Rails Tutorial Sample App\"\nend\n</code></pre>\n\n<p>I have chosen the url as root_path since in the <strong>rake bundle exec routes</strong> of your question i can see <strong>root</strong> for <strong>'static_pages#home'</strong>.\nWe can change the get url in the test of other pages as well by changing it to help_path and so on.</p>\n\n<p>I hope this answer helps and if does please give it a green tick. Cheers!</p>\n"}], "owner": {"reputation": 39, "user_id": 6048440, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/43b99784b7b48ffbb5159451ac9c5f78?s=128&d=identicon&r=PG&f=1", "display_name": "mk4280", "link": "https://stackoverflow.com/users/6048440/mk4280"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2893, "favorite_count": 0, "accepted_answer_id": 40510790, "answer_count": 2, "score": 1, "last_activity_date": 1495782707, "creation_date": 1478701562, "last_edit_date": 1478709525, "question_id": 40509291, "link": "https://stackoverflow.com/questions/40509291/ruby-on-rails-error-undefined-local-variable-or-method", "title": "Ruby on Rails Error: undefined local variable or method", "body": "<p>I am studying Ruby on Rails Tutorial by Michael Hartl.\nI am working on my user's name and email testing.</p>\n\n<p>Here is my user_test.rb:</p>\n\n<pre><code>require 'test_helper'\n\nclass UserTest &lt; ActiveSupport::TestCase\n\n  def setup\n    @user = User.new(name: \"Example User\", email: \"user@example.com\")\n  end\n\n  test \"should be valid\" do\n    assert @user.valid? # succeds if @user.valid? returns true else returns false\n  end\n\n  test \"name should be present\" do\n    @user.name = \"\"   # returns true if a user name is not a blank string.\n    assert_not @user.valid?\n  end\n\n  test \"email should be present\" do\n    @user.email = \"\"   # returns true if a user email is not a blank string.\n    assert_not @user.valid?\n  end\nend\n</code></pre>\n\n<p>Here is my user.rb:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  validates :name, presence: true   # check name. Go to user_test.rb  line 15\n  validates :email, presence: true  #    //              //           line \nend\n</code></pre>\n\n<p>Here is my Static_pages_ControllerTest.test.rb:</p>\n\n<pre><code>require 'test_helper'\n\nclass StaticPagesControllerTest &lt; ActionDispatch::IntegrationTest\n\n  test \"should get home\" do\n    get static_pages_home_url\n    assert_response :success\n    assert_select \"title\", \"Ruby on Rails Tutorial Sample App\"\n  end\n\n  test \"should get help\" do\n    get static_pages_help_url\n    assert_response :success\n    assert_select \"title\", \"Help | Ruby on Rails Tutorial Sample App\"\n  end\n\n   test \"should get about\" do\n     get static_pages_about_url\n     assert_response :success\n     assert_select \"title\", \"About | Ruby on Rails Tutorial Sample App\"\n   end\n\nend\n</code></pre>\n\n<p>I am supposed to get green when i run <code>bundle exec rake test</code>. However I am getting this error below:</p>\n\n<pre><code>Error:\nStaticPagesControllerTest#test_should_get_home:\nNameError: undefined local variable or method `static_pages_home_url' for #&lt;StaticPagesControllerTest:0x007ff2ea5c3c28&gt;\n    test/controllers/static_pages_controller_test.rb:6:in `block in &lt;class:StaticPagesControllerTest&gt;'\n\n\nbin/rails test test/controllers/static_pages_controller_test.rb:5\n\nE\n\nError:\nStaticPagesControllerTest#test_should_get_about:\nNameError: undefined local variable or method `static_pages_about_url' for #&lt;StaticPagesControllerTest:0x007ff2ec836af8&gt;\n    test/controllers/static_pages_controller_test.rb:18:in `block in &lt;class:StaticPagesControllerTest&gt;'\n\n\nbin/rails test test/controllers/static_pages_controller_test.rb:17\n\nE\n\nError:\nStaticPagesControllerTest#test_should_get_help:\nNameError: undefined local variable or method `static_pages_help_url' for #&lt;StaticPagesControllerTest:0x007ff2e4a294f8&gt;\n    test/controllers/static_pages_controller_test.rb:12:in `block in &lt;class:StaticPagesControllerTest&gt;'\n\n\nbin/rails test test/controllers/static_pages_controller_test.rb:11\n</code></pre>\n\n<p>Here is my <code>bundle exec rake routes</code> :</p>\n\n<pre><code>$bundle exec rake routes\n   Prefix Verb URI Pattern          Controller#Action\nusers_new GET  /users/new(.:format) users#new\n     root GET  /                    static_pages#home\n     help GET  /help(.:format)      static_pages#help\n    about GET  /about(.:format)     static_pages#about\n  contact GET  /contact(.:format)   static_pages#contact\n   signup GET  /signup(.:format)    user#new\n</code></pre>\n\n<p>Here is my github link:<a href=\"https://github.com/maxkim16/RailsError\" rel=\"nofollow noreferrer\">https://github.com/maxkim16/RailsError</a>   Please help.</p>\n"}, {"tags": ["ruby", "xpath", "nokogiri"], "comments": [{"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1478700635, "post_id": 40508495, "comment_id": 68259953, "body": "You provide the url with pure xml. But to try find to find html in it. There is no any html in the document."}, {"owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "reply_to_user": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1478700900, "post_id": 40508495, "comment_id": 68260106, "body": "then how to extract the contents using nokogiri. @Aleksey"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1478726895, "post_id": 40508495, "comment_id": 68274312, "body": "Don&#39;t use complete selectors like <code>&quot;&#47;html&#47;body&#47;div[2]&#47;div[2]&#47;div[1]&#47;h3&#47;a&#47;span&quot;</code>. They&#39;re very error prone. Instead, find the shortest path to the desired node and use it. That way, if the document layout changes the selector will still function. As is, if the page changes a little the odds are good your code will break."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1478727646, "post_id": 40508495, "comment_id": 68274669, "body": "<code>event_name</code> doesn&#39;t exist in the XML document. Accuracy does count m&#39;kay?"}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1478713724, "post_id": 40509324, "comment_id": 68267886, "body": "Removing the namespaces is only recommended when you are sure that the tags without the namespaces will not collide. Using CSS selectors is a more simple way of working with them and is covered in the documentation.  Read from <a href=\"http://www.nokogiri.org/tutorials/searching_a_xml_html_document.html#namespaces\" rel=\"nofollow noreferrer\">nokogiri.org/tutorials/&hellip;</a> to the end of the page."}, {"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1478719169, "post_id": 40509324, "comment_id": 68270530, "body": "@theTinMan thank you for the comment. I didn&#39;t think CSS selectors have such power. I will try to update the answer after reading."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1478726463, "post_id": 40509324, "comment_id": 68274104, "body": "CSS are not as powerful as XPath, however they are usually much more readable, and, with the jQuery extensions that Nokogiri implemented, you can do quite a bit and still understand what the selector means at first glance."}], "tags": [], "owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "is_accepted": true, "score": 1, "last_activity_date": 1478713598, "last_edit_date": 1478713598, "creation_date": 1478701648, "answer_id": 40509324, "question_id": 40508495, "link": "https://stackoverflow.com/questions/40508495/how-to-to-parse-html-contents-of-a-page-using-nokogiri/40509324#40509324", "title": "How to to parse HTML contents of a page using Nokogiri", "body": "<p>The provided link contains XML, so your XPath expressions should work with XML structure.  </p>\n\n<p>The key thing is that the document has namespaces. As I understand all XPath expressions should keep that in mind and specify namespaces too.<br>\nIn order to simply XPath expressions one can use the <code>remove_namespaces!</code> method:  </p>\n\n<pre><code>require 'nokogiri'\nrequire 'open-uri'\nurl = 'https://www.trumba.com/calendars/smithsonian-events.xml'\ndoc = Nokogiri::XML(open(url)); nil # nil is used to avoid huge output\n\ndoc.remove_namespaces!; nil\nevent = doc.xpath('//feed/entry[1]') # it will give you the first event\n\nevent.xpath('./title').text # =&gt; \"Conservation Clinics\"\nevent.xpath('./categories').text # =&gt; \"Demonstrations,Lectures &amp; Discussions\"\n</code></pre>\n\n<p>Most likely you would like to have array of all event hashes.<br>\nYou can do it like:</p>\n\n<pre><code>doc.xpath('//feed/entry').reduce([]) do |memo, event|\n  event_hash = {\n    title: event.xpath('./title').text,\n    categories: event.xpath('./categories').text\n    # all other attributes you need ...\n  }\n  memo &lt;&lt; event_hash\nend\n</code></pre>\n\n<p>It will give you an array like:</p>\n\n<pre><code>[\n  {:title=&gt;\"Conservation Clinics\", :categories=&gt;\"Demonstrations,Lectures &amp; Discussions\"}, \n  {:title=&gt;\"Castle Highlights Tour\", :categories=&gt;\"Gallery Talks &amp; Tours\"}, \n  ...\n]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1478756082, "post_id": 40516807, "comment_id": 68282227, "body": "Thank you for the nice answer. I was struggling with namespaces when I tried to update my answer."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 2, "last_activity_date": 1478729164, "creation_date": 1478729164, "answer_id": 40516807, "question_id": 40508495, "link": "https://stackoverflow.com/questions/40508495/how-to-to-parse-html-contents-of-a-page-using-nokogiri/40516807#40516807", "title": "How to to parse HTML contents of a page using Nokogiri", "body": "<p>Here's how I'd go about doing this:</p>\n\n<pre><code>require 'nokogiri'\ndoc = Nokogiri::XML(open('/Users/gferguson/smithsonian-events.xml'))\nnamespaces = doc.collect_namespaces\n\nentries = doc.search('entry').map { |entry|\n  entry_title = entry.at('title').text\n  entry_time_start, entry_time_end = ['startTime', 'endTime'].map{ |p| \n    entry.at('gd|when', namespaces)[p]\n  }\n  entry_notes = entry.at('gc|notes', namespaces).text\n\n  {\n    title: entry_title,\n    start_time: entry_time_start,\n    end_time: entry_time_end,\n    notes: entry_notes\n  }\n\n}\n</code></pre>\n\n<p>Which, when run, results in <code>entries</code> being an array of hashes:</p>\n\n<pre><code>require 'awesome_print'\nap entries [0, 3]\n\n# &gt;&gt; [\n# &gt;&gt;   [0] {\n# &gt;&gt;     :title      =&gt; \"Conservation Clinics\",\n# &gt;&gt;     :start_time =&gt; \"2016-11-09T14:00:00Z\",\n# &gt;&gt;     :end_time   =&gt; \"2016-11-09T17:00:00Z\",\n# &gt;&gt;     :notes      =&gt; \"Have questions about the condition of a painting, frame, drawing,\\n print, or object that you own? Our conservators are available by\\n appointment to consult with you about the preservation of your art.\\n \\n To request an appointment or to learn more,\\n e-mail DWRCLunder@si.edu and specify CLINIC in the subject line.\"\n# &gt;&gt;   },\n# &gt;&gt;   [1] {\n# &gt;&gt;     :title      =&gt; \"Castle Highlights Tour\",\n# &gt;&gt;     :start_time =&gt; \"2016-11-09T14:00:00Z\",\n# &gt;&gt;     :end_time   =&gt; \"2016-11-09T14:45:00Z\",\n# &gt;&gt;     :notes      =&gt; \"Did you know that the Castle is the Smithsonian\u2019s first and oldest building? Join us as one of our dynamic volunteer docents takes you on a tour to explore the highlights of the Smithsonian Castle. Come learn about the founding and early history of the Smithsonian; its original benefactor, James Smithson; and the incredible history and architecture of the Castle. Here is your opportunity to discover the treasured stories revealed within James Smithson's crypt, the Gre...\n# &gt;&gt;   },\n# &gt;&gt;   [2] {\n# &gt;&gt;     :title      =&gt; \"Exhibition Interpreters/Navigators (throughout the day)\",\n# &gt;&gt;     :start_time =&gt; \"2016-11-09T15:00:00Z\",\n# &gt;&gt;     :end_time   =&gt; \"2016-11-09T15:00:00Z\",\n# &gt;&gt;     :notes      =&gt; \"Museum volunteer interpreters welcome visitors, answer questions, and help visitors navigate exhibitions. Interpreters may be stationed in several of the following exhibitions at various times throughout the day, subject to volunteer interpreter availability. &lt;ul&gt; \\t&lt;li&gt;&lt;em&gt;The David H. Koch Hall of Human Origins: What Does it Mean to be Human?&lt;/em&gt;&lt;/li&gt; \\t&lt;li&gt;&lt;em&gt;The Sant Ocean Hall&lt;/em&gt;&lt;/li&gt; &lt;/ul&gt;\"\n# &gt;&gt;   }\n# &gt;&gt; ]\n</code></pre>\n\n<p>I didn't try to gather the specific information you asked for because <code>event_name</code> doesn't exist and what you're doing is very generic and easily done once you understand a few rules.</p>\n\n<p>XML is generally very repetitive because it represents tables of data. The \"cells\" of the table might vary but there's repetition you can use to help you. In this code</p>\n\n<pre><code>doc.search('entry')\n</code></pre>\n\n<p>loops over the <code>&lt;entry&gt;</code> nodes. Then it's easy to look inside them to find the information needed.</p>\n\n<p>The XML uses namespaces to help avoid tag-name collisions. At first those seem really hard, but Nokogiri provides the <code>collect_namespaces</code> method for the document that returns a hash of all namespaces in the document. If you're looking for a namespaces-tag, pass that hash as the second parameter. </p>\n\n<p>Nokogiri allows us to use XPath and CSS for selectors. I almost always go with CSS for readability. <code>ns|tag</code> is the format to tell Nokogiri to use a CSS-based namespaced tag. Again, pass it the hash of namespaces in the document and Nokogiri will do the rest.</p>\n\n<p>If you're familiar with working with Nokogiri you'll see the above code is very similar to normal code used to pull the content of <code>&lt;td&gt;</code> cells inside <code>&lt;tr&gt;</code> rows in an HTML <code>&lt;table&gt;</code>. </p>\n\n<p>You should be able to modify that code to gather the data you need without risking namespace collisions.</p>\n"}], "owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 464, "favorite_count": 0, "accepted_answer_id": 40509324, "answer_count": 2, "score": 0, "last_activity_date": 1478729164, "creation_date": 1478699083, "last_edit_date": 1478713521, "question_id": 40508495, "link": "https://stackoverflow.com/questions/40508495/how-to-to-parse-html-contents-of-a-page-using-nokogiri", "title": "How to to parse HTML contents of a page using Nokogiri", "body": "<pre><code>require 'rubygems'\nrequire 'nokogiri'\nrequire 'open-uri'\nurl = 'https://www.trumba.com/calendars/smithsonian-events.xml'\ndoc = Nokogiri::XML(open url)\n</code></pre>\n\n<p>I am trying to fetch the basic set of information like:</p>\n\n<pre><code>event_name\ncategories\nsponsor\nvenue\nevent_location\ncost\n</code></pre>\n\n<p>For example, for <code>event_name</code> I have this xpath: </p>\n\n<pre><code>\"/html/body/div[2]/div[2]/div[1]/h3/a/span\"\n</code></pre>\n\n<p>And use it like:</p>\n\n<pre><code>puts doc.xpath \"/html/body/div[2]/div[2]/div[1]/h3/a/span\"\n</code></pre>\n\n<p>This returns nil for <code>event_name</code>.</p>\n\n<p>If I save the URL contents locally then above XPath works.</p>\n\n<p>Along with this, I need above mentioned information as well.  I checked the other XPaths too, but the result turns out to be blank.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "inheritance", "sequel", "class-table-inheritance"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 2777555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1169b94f5c4dea12aab04bddf5d27ac1?s=128&d=identicon&r=PG&f=1", "display_name": "Merry", "link": "https://stackoverflow.com/users/2777555/merry"}, "edited": false, "score": 0, "creation_date": 1478706943, "post_id": 40510400, "comment_id": 68264043, "body": "not the solution unfortunately already tried a whole bunch of settings for the key including that. I dont think associations is what i want - i want to search pages by a custom uri held in the top level table, and have several classes of page to deal with specific behaviour and data. This screams Inheritance to me as there will be a large amount of repeated methods while necessary independence. I dont know why you wouldnt want to load the child from the parent in general anyhow, keeping to the Parent class would be the edge case."}, {"owner": {"reputation": 13, "user_id": 2777555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1169b94f5c4dea12aab04bddf5d27ac1?s=128&d=identicon&r=PG&f=1", "display_name": "Merry", "link": "https://stackoverflow.com/users/2777555/merry"}, "edited": false, "score": 0, "creation_date": 1478707770, "post_id": 40510400, "comment_id": 68264617, "body": "Yeah you were actually correct, i could have sworn i had that set up to begin with (and then changed it while trying to fix stuff due to confusion) then when i tried changing it back the first time. Also it seems when load a Page it returns the child object by default anyway, which is what i wanted i just felt p.child was an easier way to explain it.its not working perfect yet but i hope i am no longer being stupid and i think i can fix it up... maybe. Unfortunately i am a little perplexed by the documentation on this plugin, it could maybe redone but i dont want to sound like an ass. ty."}], "tags": [], "owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "is_accepted": true, "score": 0, "last_activity_date": 1478704903, "creation_date": 1478704903, "answer_id": 40510400, "question_id": 40508471, "link": "https://stackoverflow.com/questions/40508471/sequel-class-table-inheritance/40510400#40510400", "title": "Sequel class table inheritance", "body": "<p>Use <code>:key=&gt;:kind</code> in the plugin call, that should fix your issues.  If you want a <code>p.child</code> method, use associations instead of the class_table_inheritance plugin.</p>\n"}], "owner": {"reputation": 13, "user_id": 2777555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1169b94f5c4dea12aab04bddf5d27ac1?s=128&d=identicon&r=PG&f=1", "display_name": "Merry", "link": "https://stackoverflow.com/users/2777555/merry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 343, "favorite_count": 0, "accepted_answer_id": 40510400, "answer_count": 1, "score": 0, "last_activity_date": 1478704903, "creation_date": 1478699023, "question_id": 40508471, "link": "https://stackoverflow.com/questions/40508471/sequel-class-table-inheritance", "title": "Sequel class table inheritance", "body": "<p>I am hoping to start a project using Multiple/Class table inheritance in Rails. To do this i am planning to use Sequel instead of ActiveRecord. The Docs can be found here - <a href=\"http://sequel.jeremyevans.net/rdoc-plugins/classes/Sequel/Plugins/ClassTableInheritance.html\" rel=\"nofollow noreferrer\">Sequel - class table inheritance</a></p>\n\n<p>I have the Plugin working to an extent, I can call child.first and it will give me the first of the child classes, which is not the first of the parent class, and it includes the data from the child table. The problem is going the other way...</p>\n\n<p>So if i load a db row via the parent class, which happens to be a child2 class  </p>\n\n<pre><code>p = Parent.first &lt;Parent @values = {kind = \"Child2\"}&gt;\n</code></pre>\n\n<p>and then try to get the child data by using the refresh command listed in the docs it SHOULD give me</p>\n\n<pre><code>p.refresh &lt;Parent @values = {kind = \"Child2\", child2data = \"data from child 2 table\"}&gt;\n</code></pre>\n\n<p>but it doesnt, it just returns the unaltered parent</p>\n\n<p>I have included a model map in my parent class</p>\n\n<pre><code> plugin :class_table_inheritance,:key=&gt;\"kind\", :model_map=&gt;{\"Child1\"=&gt;:Child1,\"Child2\"=&gt;:Child2}\n</code></pre>\n\n<p>And i have played about with different values and other nonsense it to try and get it to work, but no success.</p>\n\n<p>What i ideally want is to be able to find the parent and call a method to instance the child class so</p>\n\n<pre><code>p = Parent.first\nc = p.child\nc &lt;Child2 @values = {kind: \"Child2\", Child2data: \"data from child2 table\"&gt;\n</code></pre>\n\n<p>I feel like i can probably hack/add a method to my parent class to do this but it just feels quite simple at this point that i shouldnt have to, also the fact that the refresh method doesnt work worries me and id like that to be resolved</p>\n\n<p>Any one have an answer? ty for reading</p>\n\n<p>p.s. i am using rails 5, the rails-sequel gem, and am working in a project that is more or less blank, i just want to have a decent CTI setup because to me it seems so much more elegant than Polymorphic associations.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1478706490, "post_id": 40508467, "comment_id": 68263732, "body": "This method seems to be doing a lot of things. It&#39;s hard to understand exactly what is happening, which may explain why you aren&#39;t getting a lot of bites on this question. You might start by breaking it up into several pieces, each with one very specific job. This will help both you and others understand your code. For starters, you might do: <code>def other_business_partners; BusinessPartner.active.where.not(id: receiver_id); end</code>. That eliminates the <code>unless</code> condition, (and makes clear that you are comparing an ActiveRecord object to an integer)."}, {"owner": {"reputation": 607, "user_id": 4201809, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jQPMj.png?s=128&g=1", "display_name": "Dimitri de Ruiter", "link": "https://stackoverflow.com/users/4201809/dimitri-de-ruiter"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1478719374, "post_id": 40508467, "comment_id": 68270636, "body": "adjusted the code to simplify. From where do you take I am comparing an ActiveRecord object to an integer? (sender is an association to ActiveRecord object BusinessPartner)"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1478727711, "post_id": 40508467, "comment_id": 68274694, "body": "Your old code included the line: <code>unless business_partner == self.receiver_id</code>. <code>business_partner</code> was a block variable representing each record in an ActiveRecord Relation, whereas (I assume) <code>self.receiver_id</code> returns an integer. I could be wrong."}], "answers": [{"comments": [{"owner": {"reputation": 607, "user_id": 4201809, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jQPMj.png?s=128&g=1", "display_name": "Dimitri de Ruiter", "link": "https://stackoverflow.com/users/4201809/dimitri-de-ruiter"}, "edited": false, "score": 0, "creation_date": 1478764155, "post_id": 40517279, "comment_id": 68285311, "body": "Correct, Document has a <code>belongs_to :sender, class_name: &quot;BusinessPartner&quot;</code> as well as a <code>belongs_to :receiver, class_name: &quot;BusinessPartner&quot;</code> relationship with BusinessPartner. While I think I understand what you are saying / doing (I do like its purity) - use simple to understand methods - it appears to be leading to many, many single / few line methods. Also I now I have a bit of difficulty seeing how to handle the case if no match is found or adding a second match. Again, am new to Rails and Ruby (even to coding ;-) )"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "reply_to_user": {"reputation": 607, "user_id": 4201809, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jQPMj.png?s=128&g=1", "display_name": "Dimitri de Ruiter", "link": "https://stackoverflow.com/users/4201809/dimitri-de-ruiter"}, "edited": false, "score": 0, "creation_date": 1478765304, "post_id": 40517279, "comment_id": 68285885, "body": "Good questions! Yes, this leads to many small methods. That is exactly what you want. It may look strange if you are used to looking at long procedures, but it will greatly simplify your code and make it super easy to extend. As an example, it took me about 60 seconds to add both features you requested. <code>Document#set_sender</code> now returns <code>nil</code> if no match is found, and <code>Document#matching_business_partners</code> returns an array of all matches."}, {"owner": {"reputation": 607, "user_id": 4201809, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jQPMj.png?s=128&g=1", "display_name": "Dimitri de Ruiter", "link": "https://stackoverflow.com/users/4201809/dimitri-de-ruiter"}, "edited": false, "score": 0, "creation_date": 1478766048, "post_id": 40517279, "comment_id": 68286259, "body": "okay understand the many simple methods concept. Still got questions popping up: e.g. I do see many cases (e.g. rails casts) where it is daisy chained. e.g. something like <code>self.sender = matching_business_partners.first.try(:id)</code> - you added an additional method for it. And I need to explain better what I meant with a second match: I have more (unique) criteria that I can use to identify the sender (either or). Next to bank_account, there is vat_id or company_registration. More fuzzy would be internet domain or email addresses. So that should go into account_matches?"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "reply_to_user": {"reputation": 607, "user_id": 4201809, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jQPMj.png?s=128&g=1", "display_name": "Dimitri de Ruiter", "link": "https://stackoverflow.com/users/4201809/dimitri-de-ruiter"}, "edited": false, "score": 0, "creation_date": 1478794099, "post_id": 40517279, "comment_id": 68304045, "body": "Sure--it&#39;s fine to chain methods, and the code will run just fine. If it&#39;s doing what you want it to do, then you&#39;re good. In this case, the code wasn&#39;t doing what you wanted it to do, and it was hard to see why, so I pulled it apart using OO best practices. If you want to see a master working through a similar process, watch <a href=\"https://www.youtube.com/watch?v=8bZh5LMaSmE\" rel=\"nofollow noreferrer\">this</a>. To answer your question, yes, now that you have an <code>account_matches?</code> method, it sounds like that&#39;s a good place for your new match criteria. If <code>account_matches?</code> gets too big, pull it apart as well."}, {"owner": {"reputation": 607, "user_id": 4201809, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jQPMj.png?s=128&g=1", "display_name": "Dimitri de Ruiter", "link": "https://stackoverflow.com/users/4201809/dimitri-de-ruiter"}, "edited": false, "score": 0, "creation_date": 1478816595, "post_id": 40517279, "comment_id": 68315496, "body": "going to watch the master at work at a quiet moment ;-) - remain 2 questions 1) how could I set <code>self.sender</code> to a default value (<code>BusinessPartner.active.default.take</code>) if <code>matching_business_partner.try(:id)</code> is nil? - and 2) how to simplify (DRY) this (the regex for <code>account_matches</code>) : <code>rgx_registrations = &#47;(#{Regexp.escape(business_partner.bank_account.gsub(&#47;\\s+&#47;, &#39;&#39;))})|(#{Regexp.escape(business_partner.registration.gsub(&#47;&zwnj;&#8203;\\s+&#47;, &#39;&#39;))})|(#{Regexp.escape(business_partner.vat_id.gsub(&#47;\\s+&#47;, &#39;&#39;))})&#47;</code> (my line of thinking still too &quot;spaghetti&quot; :-) )"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "reply_to_user": {"reputation": 607, "user_id": 4201809, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jQPMj.png?s=128&g=1", "display_name": "Dimitri de Ruiter", "link": "https://stackoverflow.com/users/4201809/dimitri-de-ruiter"}, "edited": false, "score": 0, "creation_date": 1478817320, "post_id": 40517279, "comment_id": 68315812, "body": "See edits above for the first answer. The double-pipe operator <code>||</code> means, return the first value unless it is nil, in which case return the second value. Ruby is so very nice! You already have the <code>stripped_bank_account</code> method that performs that <code>.gsub</code> action. Make it a generic method: <code>def stripped_text(text); text.gsub(&#47;\\s+&#47;, &#39;&#39;); end</code>. Then call it with <code>stripped_text(business_partner.bank_account)</code> and so on."}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "reply_to_user": {"reputation": 607, "user_id": 4201809, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jQPMj.png?s=128&g=1", "display_name": "Dimitri de Ruiter", "link": "https://stackoverflow.com/users/4201809/dimitri-de-ruiter"}, "edited": false, "score": 0, "creation_date": 1478817480, "post_id": 40517279, "comment_id": 68315897, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/127845/discussion-between-moveson-and-dimitri-de-ruiter\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": true, "score": 2, "last_activity_date": 1478817446, "last_edit_date": 1478817446, "creation_date": 1478731646, "answer_id": 40517279, "question_id": 40508467, "link": "https://stackoverflow.com/questions/40508467/rails-5-iterate-until-field-matches-regex/40517279#40517279", "title": "Rails 5 - iterate until field matches regex", "body": "<p>In Ruby you generally want to avoid loops and <code>#each</code> and long, procedural methods in favor of Enumerable iterators like <code>#map</code>, <code>#find</code>, and <code>#select</code>, and short, descriptive methods that each do a single job. Without knowing more about your project I can't be sure exactly what will work, but I think you want something like this:</p>\n\n<pre><code># /models/document.rb\n\nclass Document &lt; ActiveRecord::Base\n\n  def set_sender\n    self.sender = matching_business_partner.try(:id) || BusinessPartner.active.default.id\n  end\n\n  def matching_business_partners\n    other_business_partners.select { |business_partner| account_matches?(business_partner) }\n  end\n\n  def matching_business_partner\n    matching_business_partners.first\n  end\n\n  def other_business_partners\n    BusinessPartner.excluding_receiver_id(receiver_id)\n  end\n\n  def account_matches?(business_partner)\n    rgx = /(?&lt;!\\w)(#{Regexp.escape(business_partner.stripped_bank_account)})?(?!\\\u200c\u200bw)/\n    data_matches_bank_account?(rgx)\n  end\n\n  def data_matches_bank_account?(rgx)\n    extracted_data.gsub(/\\s+/, '') =~ rgx\n  end\n\nend\n\n# /models/business_partner.rb\n\nclass BusinessPartner &lt; ActiveRecord::Base\n\n  scope :excluding_receiver_id, -&gt; (receiver_id) { where.not(id: receiver_id) }\n\n  def stripped_bank_account\n    bank_account.gsub(/\\s+/, '')\n  end\n\nend\n</code></pre>\n\n<p>Note that I am assigning an integer id, rather than an ActiveRecord object, to <code>self.sender</code>. I think that's what you want. </p>\n\n<p>I didn't try to mess with the database relations here, but it does seem like Document could include a <code>belongs_to :business_partner</code>, which would give you the benefit of Rails methods to help you find one from the other.</p>\n\n<p>EDIT: Added <code>Document#matching_business_partners</code> method and changed <code>Document#set_sender</code> method to return nil if no <code>matching_business_partner</code> exists.</p>\n\n<p>EDIT: Added <code>BusinessPartner.active.default.id</code> as the return value if no <code>matching_business_partner</code> exists.</p>\n"}], "owner": {"reputation": 607, "user_id": 4201809, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jQPMj.png?s=128&g=1", "display_name": "Dimitri de Ruiter", "link": "https://stackoverflow.com/users/4201809/dimitri-de-ruiter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 173, "favorite_count": 0, "accepted_answer_id": 40517279, "answer_count": 1, "score": 0, "last_activity_date": 1478817446, "creation_date": 1478699007, "last_edit_date": 1478785271, "question_id": 40508467, "link": "https://stackoverflow.com/questions/40508467/rails-5-iterate-until-field-matches-regex", "title": "Rails 5 - iterate until field matches regex", "body": "<p>In my app that I am building to learn Rails and Ruby, I have below iteration/loop which is not functioning as it should. </p>\n\n<h2>What am I trying to achieve?</h2>\n\n<p>I am trying to find the business partner (within only the active once (uses a scope)) where the value of the field <code>business_partner.bank_account</code> is contained in the field <code>self_extracted_data</code> and then set the business partner found as self.sender (self here is a <code>Document</code>).</p>\n\n<p>So once a match is found, I want to end the loop. A case exists where no match is found and sender = nil so a user needs to set it manually.</p>\n\n<p>What happens now, is that on which ever record of the object I save (it is called as a callback before_save), it uses the last identified business partner as sender and the method does not execute again.</p>\n\n<h2>Current code:</h2>\n\n<pre><code>def set_sender\n BusinessPartner.active.where.not(id: self.receiver_id).each do |business_partner|\n    bp_bank_account = business_partner.bank_account.gsub(/\\s+/, '')\n    rgx = /(?&lt;!\\w)(#{Regexp.escape(bp_bank_account)})?(?!\\\u200c\u200bw)/\n    if self.extracted_data.gsub(/\\s+/, '') =~ rgx\n      self.sender = business_partner\n    else\n      self.sender = nil\n    end\n end\nend\n</code></pre>\n\n<p>Thanks for helping me understand how to do this kind of case.\np.s. have the pickaxe book here yet this is so much that some help / guidance would be great. The regex works.</p>\n\n<hr>\n\n<p>Using feedback from @moveson, this code works:</p>\n\n<pre><code>def match_with_extracted_data?(rgx_to_match)\n  extracted_data.gsub(/\\s+/, '') =~ rgx_to_match\nend\n\ndef set_sender\n  self.sender_id = matching_business_partner.try(:id) #unless self.sender.id.present? # Returns nil if no matching_business_partner exists\nend\n\ndef matching_business_partner\n  BusinessPartner.active.excluding_receiver(receiver_id).find { |business_partner| sender_matches?(business_partner) }\nend\n\ndef sender_matches?(business_partner)\n  rgx_registrations = /(#{Regexp.escape(business_partner.bank_account.gsub(/\\s+/, ''))})|(#{Regexp.escape(business_partner.registration.gsub(/\\s+/, ''))})|(#{Regexp.escape(business_partner.vat_id.gsub(/\\s+/, ''))})/\n  match_with_extracted_data?(rgx_registrations)\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "edited": false, "score": 0, "creation_date": 1478697392, "post_id": 40507840, "comment_id": 68257977, "body": "Do you have <code>spring</code> in your <code>Gemfile</code> in the development group?"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1478697624, "post_id": 40507840, "comment_id": 68258111, "body": "show the <code>config&#47;database.yml</code> file please."}, {"owner": {"reputation": 9729, "user_id": 4554116, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/cu8de.png?s=128&g=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/4554116/julius"}, "edited": false, "score": 0, "creation_date": 1478697660, "post_id": 40507840, "comment_id": 68258597, "body": "(Psych::SyntaxError) means there is a bug in YAML file"}], "answers": [{"tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 0, "last_activity_date": 1478698020, "last_edit_date": 1495541234, "creation_date": 1478698020, "answer_id": 40508141, "question_id": 40507840, "link": "https://stackoverflow.com/questions/40507840/any-rails-server-doesnt-start/40508141#40508141", "title": "Any rails server doesn&#39;t start", "body": "<p>Seems like you have <code>tabs</code> in your <code>YAML</code> file instead of <code>spaces</code>. </p>\n\n<p>Change them to spaces from your editor settings</p>\n\n<p>Solution for similar question is given <a href=\"https://stackoverflow.com/a/10448969/4758119\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 6215015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1355757237c2adc222345bf08310ff90?s=128&d=identicon&r=PG&f=1", "display_name": "defyay", "link": "https://stackoverflow.com/users/6215015/defyay"}, "is_accepted": false, "score": 0, "last_activity_date": 1478784901, "creation_date": 1478784901, "answer_id": 40528962, "question_id": 40507840, "link": "https://stackoverflow.com/questions/40507840/any-rails-server-doesnt-start/40528962#40528962", "title": "Any rails server doesn&#39;t start", "body": "<p>So not realy sure what's going on but it started OK with 'sudo rails s'.</p>\n"}], "owner": {"reputation": 3, "user_id": 6215015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1355757237c2adc222345bf08310ff90?s=128&d=identicon&r=PG&f=1", "display_name": "defyay", "link": "https://stackoverflow.com/users/6215015/defyay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 253, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1478784901, "creation_date": 1478697068, "question_id": 40507840, "link": "https://stackoverflow.com/questions/40507840/any-rails-server-doesnt-start", "title": "Any rails server doesn&#39;t start", "body": "<p>Getting the same error every time when trying to start ANY project on rails 4 or 5 using ruby 2.2.5 and 2.3.1 even on the fresh projects.</p>\n\n<p>Tried to reinstall rbenv but didn't help. Anybody got a solution?</p>\n\n<pre><code>  fedyay@fedyay-note:~/shit$ rails s\n  =&gt; Booting WEBrick\n  =&gt; Rails 4.2.3 application starting in development on http://localhost:3000\n  =&gt; Run `rails server -h` for more startup options\n  =&gt; Ctrl-C to shutdown server\n  Exiting\n  /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/2.2.0/psych.rb:370:in `parse': (&lt;unknown&gt;): did not find expected alphabetic or numeric character while scanning an alias at line 22 column 20 (Psych::SyntaxError)\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/2.2.0/psych.rb:370:in `parse_stream'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/2.2.0/psych.rb:318:in `parse'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/2.2.0/psych.rb:245:in `load'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/railties-4.2.3/lib/rails/application.rb:391:in `secrets'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/railties-4.2.3/lib/rails/application.rb:178:in `key_generator'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/railties-4.2.3/lib/rails/application.rb:206:in `message_verifier'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/globalid-0.3.7/lib/global_id/railtie.rb:25:in `block (2 levels) in &lt;class:Railtie&gt;'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/activesupport-4.2.3/lib/active_support/lazy_load_hooks.rb:36:in `call'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/activesupport-4.2.3/lib/active_support/lazy_load_hooks.rb:36:in `execute_hook'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/activesupport-4.2.3/lib/active_support/lazy_load_hooks.rb:45:in `block in run_load_hooks'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/activesupport-4.2.3/lib/active_support/lazy_load_hooks.rb:44:in `each'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/activesupport-4.2.3/lib/active_support/lazy_load_hooks.rb:44:in `run_load_hooks'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/railties-4.2.3/lib/rails/application/finisher.rb:62:in `block in &lt;module:Finisher&gt;'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/railties-4.2.3/lib/rails/initializable.rb:30:in `instance_exec'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/railties-4.2.3/lib/rails/initializable.rb:30:in `run'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/railties-4.2.3/lib/rails/initializable.rb:55:in `block in run_initializers'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/2.2.0/tsort.rb:226:in `block in tsort_each'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/2.2.0/tsort.rb:348:in `block (2 levels) in each_strongly_connected_component'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/2.2.0/tsort.rb:429:in `each_strongly_connected_component_from'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/2.2.0/tsort.rb:347:in `block in each_strongly_connected_component'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/2.2.0/tsort.rb:345:in `each'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/2.2.0/tsort.rb:345:in `call'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/2.2.0/tsort.rb:345:in `each_strongly_connected_component'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/2.2.0/tsort.rb:224:in `tsort_each'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/2.2.0/tsort.rb:203:in `tsort_each'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/railties-4.2.3/lib/rails/initializable.rb:54:in `run_initializers'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/railties-4.2.3/lib/rails/application.rb:352:in `initialize!'\n    from /home/fedyay/shit/config/environment.rb:5:in `&lt;top (required)&gt;'\n    from /home/fedyay/shit/config.ru:3:in `require'\n    from /home/fedyay/shit/config.ru:3:in `block in &lt;main&gt;'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/rack-1.6.4/lib/rack/builder.rb:55:in `instance_eval'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/rack-1.6.4/lib/rack/builder.rb:55:in `initialize'\n    from /home/fedyay/shit/config.ru:in `new'\n    from /home/fedyay/shit/config.ru:in `&lt;main&gt;'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/rack-1.6.4/lib/rack/builder.rb:49:in `eval'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/rack-1.6.4/lib/rack/builder.rb:49:in `new_from_string'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/rack-1.6.4/lib/rack/builder.rb:40:in `parse_file'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/rack-1.6.4/lib/rack/server.rb:299:in `build_app_and_options_from_config'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/rack-1.6.4/lib/rack/server.rb:208:in `app'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/railties-4.2.3/lib/rails/commands/server.rb:61:in `app'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/rack-1.6.4/lib/rack/server.rb:336:in `wrapped_app'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/railties-4.2.3/lib/rails/commands/server.rb:139:in `log_to_stdout'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/railties-4.2.3/lib/rails/commands/server.rb:78:in `start'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/railties-4.2.3/lib/rails/commands/commands_tasks.rb:80:in `block in server'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/railties-4.2.3/lib/rails/commands/commands_tasks.rb:75:in `tap'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/railties-4.2.3/lib/rails/commands/commands_tasks.rb:75:in `server'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/railties-4.2.3/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/railties-4.2.3/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n    from /home/fedyay/shit/bin/rails:9:in `require'\n    from /home/fedyay/shit/bin/rails:9:in `&lt;top (required)&gt;'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/spring-2.0.0/lib/spring/client/rails.rb:28:in `load'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/spring-2.0.0/lib/spring/client/rails.rb:28:in `call'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/spring-2.0.0/lib/spring/client/command.rb:7:in `call'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/spring-2.0.0/lib/spring/client.rb:30:in `run'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/spring-2.0.0/bin/spring:49:in `&lt;top (required)&gt;'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/spring-2.0.0/lib/spring/binstub.rb:31:in `load'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/gems/2.2.0/gems/spring-2.0.0/lib/spring/binstub.rb:31:in `&lt;top (required)&gt;'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:69:in `require'\n    from /home/fedyay/.rbenv/versions/2.2.5/lib/ruby/2.2.0/rubygems/core_ext/kernel_require.rb:69:in `require'\n    from /home/fedyay/shit/bin/spring:14:in `&lt;top (required)&gt;'\n    from bin/rails:3:in `load'\n    from bin/rails:3:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 2070, "user_id": 1010826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d926cfe6638d33207f97dbd5a5103ba1?s=128&d=identicon&r=PG", "display_name": "Magnuss", "link": "https://stackoverflow.com/users/1010826/magnuss"}, "edited": false, "score": 1, "creation_date": 1478695557, "post_id": 40507055, "comment_id": 68256852, "body": "Can you post the form where you are rendering the nested attributes?"}, {"owner": {"reputation": 13, "user_id": 5646774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PXJR4.jpg?s=128&g=1", "display_name": "linkinmedo", "link": "https://stackoverflow.com/users/5646774/linkinmedo"}, "reply_to_user": {"reputation": 2070, "user_id": 1010826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d926cfe6638d33207f97dbd5a5103ba1?s=128&d=identicon&r=PG", "display_name": "Magnuss", "link": "https://stackoverflow.com/users/1010826/magnuss"}, "edited": false, "score": 0, "creation_date": 1478695976, "post_id": 40507055, "comment_id": 68257096, "body": "I added it to the question."}], "answers": [{"tags": [], "owner": {"reputation": 300, "user_id": 4481206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/421264bfc22afa5b1e1faf28e8af6c98?s=128&d=identicon&r=PG&f=1", "display_name": "APS", "link": "https://stackoverflow.com/users/4481206/aps"}, "is_accepted": false, "score": 0, "last_activity_date": 1478697588, "creation_date": 1478697588, "answer_id": 40508011, "question_id": 40507055, "link": "https://stackoverflow.com/questions/40507055/why-do-i-get-a-hash-instead-of-an-array-when-using-nested-attributes/40508011#40508011", "title": "why do I get a hash instead of an array when using nested attributes?", "body": "<p>This is default behavior of nested attributes. If you add more questions fields to the form, output will be as :</p>\n\n<pre><code>{\"utf8\"=&gt;\"\u2713\",\n\"authenticity_token\"=&gt;\"oLy4lJyXBgKiUI+TlQgEGIRNLeNOG5WqiHLqYNiZYe1JXC7+/j02ZDsBAnVZCAgeUJw6B5iTXxkzV1XzUIDn+w==\",\n\"form\"=&gt;{\"title\"=&gt;\"test 3\", \"questions_attributes\"=&gt;{\n  \"0\"=&gt;{\"question_text\"=&gt;\"hello what?\"}, \n  \"1\"=&gt;{\"question_text\"=&gt;\"Hi\"},\n  \"2\"=&gt;{\"question_text\"=&gt;\"Hello\"}},\n\"commit\"=&gt;\"Create Form\"}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2889, "user_id": 3079520, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/LfkPU.jpg?s=128&g=1", "display_name": "dnsh", "link": "https://stackoverflow.com/users/3079520/dnsh"}, "is_accepted": true, "score": 2, "last_activity_date": 1478701572, "creation_date": 1478701572, "answer_id": 40509293, "question_id": 40507055, "link": "https://stackoverflow.com/questions/40507055/why-do-i-get-a-hash-instead-of-an-array-when-using-nested-attributes/40509293#40509293", "title": "why do I get a hash instead of an array when using nested attributes?", "body": "<p>I think you have not read whole doc. From <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html\" rel=\"nofollow noreferrer\">documentation</a></p>\n\n<blockquote>\n  <p>Nested attributes for an associated collection can also be passed in\n  the form of a hash of hashes instead of an array of hashes:</p>\n\n<pre><code>Member.create(\n  name: 'joe',\n  posts_attributes: {\n    first:  { title: 'Foo' },\n    second: { title: 'Bar' }\n  }\n)\n</code></pre>\n  \n  <p>has the same effect as</p>\n\n<pre><code>Member.create(\n  name: 'joe',\n  posts_attributes: [\n    { title: 'Foo' },\n    { title: 'Bar' }\n  ]\n)\n</code></pre>\n  \n  <p>The keys of the hash which is the value for :posts_attributes are\n  ignored in this case. However, it is not allowed to use 'id' or :id\n  for one of such keys, otherwise the hash will be wrapped in an array\n  and interpreted as an attribute hash for a single post.</p>\n  \n  <p>Passing attributes for an associated collection in the form of a hash\n  of hashes can be used with hashes generated from HTTP/HTML parameters,\n  where there may be no natural way to submit an array of hashes.</p>\n</blockquote>\n"}], "owner": {"reputation": 13, "user_id": 5646774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PXJR4.jpg?s=128&g=1", "display_name": "linkinmedo", "link": "https://stackoverflow.com/users/5646774/linkinmedo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 669, "favorite_count": 0, "accepted_answer_id": 40509293, "answer_count": 2, "score": 1, "last_activity_date": 1478701572, "creation_date": 1478694543, "last_edit_date": 1478695957, "question_id": 40507055, "link": "https://stackoverflow.com/questions/40507055/why-do-i-get-a-hash-instead-of-an-array-when-using-nested-attributes", "title": "why do I get a hash instead of an array when using nested attributes?", "body": "<p>I'm using nested attributes in may rails project but when I submit a form I get the _attributes as a hash of hashes not an array of hashes like it's said in the documentation, which means rails can't get the params for the new object.</p>\n\n<pre><code>{\"utf8\"=&gt;\"\u2713\",\n\"authenticity_token\"=&gt;\"oLy4lJyXBgKiUI+TlQgEGIRNLeNOG5WqiHLqYNiZYe1JXC7+/j02ZDsBAnVZCAgeUJw6B5iTXxkzV1XzUIDn+w==\",\n\"form\"=&gt;{\"title\"=&gt;\"test 3\", \"questions_attributes\"=&gt;{\"0\"=&gt;{\"question_text\"=&gt;\"hello what?\"}}},\n\"commit\"=&gt;\"Create Form\"}\n</code></pre>\n\n<p>like in the code above :questions_attributes should have been an array not a hash with an element called '0'</p>\n\n<p>the form code:</p>\n\n<pre><code>  = form_for(setup_form(@form)) do |f|\n    = error_messages_for(f.object)\n    = f.label(:title, 'Title')\n    = f.text_field(:title)\n    = f.fields_for(:questions) do |q|\n      = q.label(:question_text, 'Question')\n      = q.text_field(:question_text)\n    = f.submit \"Create Form\", :class =&gt; \"btn btn-lg btn-primary\"\n</code></pre>\n"}, {"tags": ["ruby", "syntax"], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 0, "last_activity_date": 1478693351, "creation_date": 1478693351, "answer_id": 40506693, "question_id": 40506633, "link": "https://stackoverflow.com/questions/40506633/ruby-equal-sign-in-method-call/40506693#40506693", "title": "ruby equal sign in method call", "body": "<p><code>'other'</code> is assigned to the variable <code>more1</code> and the resulting expression is always <code>'other'</code> so that value is passed to the <code>bar</code> method. So why do that? Well, probably <code>more1</code> and <code>more2</code> are used after that call. I don't like it but that's it.</p>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1478693471, "post_id": 40506709, "comment_id": 68255690, "body": "Indeed, nothing to do with kwargs."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1478695008, "post_id": 40506709, "comment_id": 68256538, "body": "<i>&quot;Can be rewritten&quot;</i> \u2013 Can, and should, be rewritten."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1478695958, "post_id": 40506709, "comment_id": 68257080, "body": "@Stefan I see a trail of fighting rubocop\u2019s \u201cmethod body\u2019s too long\u201d cop here :)"}], "tags": [], "owner": {"reputation": 3595, "user_id": 2462524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62bb0f238bf55efdc41c34ad5e315408?s=128&d=identicon&r=PG", "display_name": "phts", "link": "https://stackoverflow.com/users/2462524/phts"}, "is_accepted": false, "score": 4, "last_activity_date": 1478693390, "creation_date": 1478693390, "answer_id": 40506709, "question_id": 40506633, "link": "https://stackoverflow.com/questions/40506633/ruby-equal-sign-in-method-call/40506709#40506709", "title": "ruby equal sign in method call", "body": "<p>This has nothing to do with key arguments.</p>\n\n<p>This is just a shortcut of assigning and passing variables to the method.</p>\n\n<pre><code>Foo.bar 'first_arg', more1='other', more2='another'\n</code></pre>\n\n<p>Can be rewritten as</p>\n\n<pre><code>more1='other'\nmore2='another'\nFoo.bar('first_arg', more1, more2)\n</code></pre>\n"}], "owner": {"reputation": 579, "user_id": 1814682, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/96bb04f9583bbae94c35e65e12e92be1?s=128&d=identicon&r=PG", "display_name": "Ond\u0159ej \u017delazko", "link": "https://stackoverflow.com/users/1814682/ond%c5%99ej-%c5%bdelazko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 40506693, "answer_count": 2, "score": 0, "last_activity_date": 1478693390, "creation_date": 1478693180, "question_id": 40506633, "link": "https://stackoverflow.com/questions/40506633/ruby-equal-sign-in-method-call", "title": "ruby equal sign in method call", "body": "<p>Hi there fellow rubyists!\nI've just came across a weird syntax in method call:</p>\n\n<pre><code>Foo.bar 'first_arg', more1='other', more2='another'\n</code></pre>\n\n<p>but when I test it out <code>'other'</code> is always assigned to the second argument, never mind the word before equal sign. What is this? Why is this in ruby? I'm familiar with ruby 2.0 key-arguments, but this seems to have nothing to do with that.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1478693080, "post_id": 40506436, "comment_id": 68255496, "body": "Yes, I am pretty sure he wants refinements and this is not a misunderstanding."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1478693135, "post_id": 40506436, "comment_id": 68255523, "body": "Perhaps, provide a small snippet of code illustrating how refinements could be used here?"}, {"owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "edited": false, "score": 0, "creation_date": 1478693210, "post_id": 40506436, "comment_id": 68255563, "body": "Yes, a typo of course. A snippet refining the <code>String</code> class would be most welcome"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1478694771, "post_id": 40506436, "comment_id": 68256395, "body": "One thing to mention is that the Rubinius developers are philosophically opposed to Refinements and thus will never implement them. JRuby OTOH has them."}, {"owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "edited": false, "score": 0, "creation_date": 1478695697, "post_id": 40506436, "comment_id": 68256935, "body": "Thanks! One thing worth noting is that <code>using</code> seems to be working only in a &quot;file&quot; scope, meaning it cannot be nested inside a class like you did in the second example. From what I read they changed it right before release and didn&#39;t update the docs."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "edited": false, "score": 0, "creation_date": 1478696733, "post_id": 40506436, "comment_id": 68257576, "body": "@PiotrKruczek both my examples were tested with Ruby 2.3.1, and they work. So I am pretty sure it&#39;s fine to use <code>using</code> inside class."}, {"owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "edited": false, "score": 0, "creation_date": 1478696991, "post_id": 40506436, "comment_id": 68257727, "body": "You&#39;re correct. That&#39;s how it was in Ruby 2.0.0. Thanks!"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "edited": false, "score": 1, "creation_date": 1478783370, "post_id": 40506436, "comment_id": 68296913, "body": "@PiotrKruczek: Refinements are still in a state of flux. They used to be very broad, when they were first tried out, then they were very restricted when they were released (only allowed to be used in script scope, with <code>using</code> only being defined as a singleton method on <code>main</code>), now they are being expanded again, and can also be used at module scope (<code>Module#using</code>)."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 3, "last_activity_date": 1478694914, "last_edit_date": 1478694914, "creation_date": 1478692548, "answer_id": 40506436, "question_id": 40506395, "link": "https://stackoverflow.com/questions/40506395/safely-extending-functionality-of-a-standard-library-class/40506436#40506436", "title": "Safely extending functionality of a standard library class", "body": "<p>What you're looking for is <a href=\"https://ruby-doc.org/core-2.3.1/doc/syntax/refinements_rdoc.html\" rel=\"nofollow noreferrer\">Refinement</a>:</p>\n\n<blockquote>\n  <p>Refinements are designed to reduce the impact of monkey patching on\n  other users of the monkey-patched class. <strong><em>Refinements provide a way to\n  extend a class locally</em></strong>.</p>\n</blockquote>\n\n<pre><code>module Foo\n  refine String do\n    def hello\n      \"hello #{self}!\"\n    end\n  end\nend\n\nputs 'Tom'.hello\n#=&gt; undefined method `hello' for \"Tom\":String\nusing Foo\nputs 'Tom'.hello\n#=&gt; hello Tom!\n</code></pre>\n\n<p>Using refinement inside <code>Bar</code> class:</p>\n\n<pre><code># Without refinement\nclass Bar\n  def greet(name)\n    name.hello\n  end\nend\n\nputs Bar.new.greet('Tom')\n#=&gt; undefined method `hello' for \"Tom\":String\n\n# With refinement\nclass Bar\n  using Foo\n  def greet(name)\n    name.hello\n  end\nend\n\nputs Bar.new.greet('Tom')\n#=&gt; hello Tom!\n</code></pre>\n\n<p>For the complete info about scoping, method lookup and stuff look into docs link I've provided :)</p>\n\n<p>P.S. Be aware, that Rubinius developers are philosophically opposed to Refinements and thus will never implement them (c) J\u00f6rg W Mittag.</p>\n"}, {"tags": [], "owner": {"reputation": 676, "user_id": 1611925, "user_type": "registered", "accept_rate": 15, "profile_image": "https://i.stack.imgur.com/VVlis.jpg?s=128&g=1", "display_name": "Julien Lamarche", "link": "https://stackoverflow.com/users/1611925/julien-lamarche"}, "is_accepted": false, "score": 0, "last_activity_date": 1539373307, "creation_date": 1539373307, "answer_id": 52786060, "question_id": 40506395, "link": "https://stackoverflow.com/questions/40506395/safely-extending-functionality-of-a-standard-library-class/52786060#52786060", "title": "Safely extending functionality of a standard library class", "body": "<p>Write a class of the same name then use <code>require_relative</code> (or similar method) to include it.</p>\n\n<pre><code>class Date\n    def itis\n        puts \"It is \" + self.to_s\n    end\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>[1] pry(main)&gt; require_relative 'date.rb'\n=&gt; true\n[2] pry(main)&gt; require 'date'\n=&gt; true\n[3] pry(main)&gt; Date.new(2018, 10, 9).itis\nIt is 2018-10-09\n=&gt; nil\n</code></pre>\n"}], "owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 248, "favorite_count": 0, "accepted_answer_id": 40506436, "answer_count": 2, "score": 2, "last_activity_date": 1539373307, "creation_date": 1478692438, "last_edit_date": 1478693140, "question_id": 40506395, "link": "https://stackoverflow.com/questions/40506395/safely-extending-functionality-of-a-standard-library-class", "title": "Safely extending functionality of a standard library class", "body": "<p>Is there a simple way to extend a functionality of a standard library class like <code>String</code> inside a module without affecting anything outside of it? Example (won't work):</p>\n\n<pre><code>module Foo\n  class String\n    def hello\n      \"hello #{self}!\"\n    end\n  end\n\n  class Bar\n    def greet name\n      name.hello\n    end\n  end\nend\n</code></pre>\n\n<p>Result I'm looking for:</p>\n\n<pre><code>Foo::Bar.new.greet 'Tom' #=&gt; hello Tom!\n'Tom'.hello #=&gt; NoMethodError\n</code></pre>\n\n<p>I'm aware of solutions like creating <code>MyString &lt; String</code> with desired functionality, but I would rather not call <code>MyString.new('foo')</code> every time I want to use a string inside the module.</p>\n\n<p>I realise this may not be considered good practice, I'm just looking to expand my understanding of the language.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "bundle", "bundler", "devkit"], "owner": {"reputation": 21, "user_id": 7136082, "user_type": "registered", "profile_image": "https://graph.facebook.com/1344490668924284/picture?type=large", "display_name": "Leo Kristopher Piel", "link": "https://stackoverflow.com/users/7136082/leo-kristopher-piel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 581, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1478693965, "creation_date": 1478692167, "last_edit_date": 1478693965, "question_id": 40506297, "link": "https://stackoverflow.com/questions/40506297/ruby-bundle-install-an-error-occurred-while-installing-debug-inspector-0-0-2", "title": "Ruby bundle install: An error occurred while installing debug_inspector (0.0.2)", "body": "<p>I'm trying to run bundle install on my windows 10x64 and I keep getting this error: </p>\n\n<pre><code>Gem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\ncurrent directory:\nC:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/debug_inspector-0.0.2/ext/debug_inspector\nC:/Ruby23-x64/bin/ruby.exe -r ./siteconf20161109-14104-1y5ai00.rb extconf.rb\ncreating Makefile\n\ncurrent directory:\nC:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/debug_inspector-0.0.2/ext/debug_inspector\nmake \"DESTDIR=\" clean\n\ncurrent directory:\nC:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/debug_inspector-0.0.2/ext/debug_inspector\nmake \"DESTDIR=\"\n\nmake failed, uncaught signal 11\n\nGem files will remain installed in\nC:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/debug_inspector-0.0.2 for inspection.\nResults logged to\nC:/Ruby23-x64/lib/ruby/gems/2.3.0/extensions/x64-mingw32/2.3.0/debug_inspector-0.0.2/gem_make.out\n\nAn error occurred while installing debug_inspector (0.0.2), and Bundler cannot\ncontinue.\nMake sure that `gem install debug_inspector -v '0.0.2'` succeeds before\nbundling.\n</code></pre>\n\n<p>I'm using Ruby version 2.3.1. I have installed the right version of Ruby DevKit and rails version '4.2.6'</p>\n\n<p>If I comment out web-console in the Gemfile I get a new error:</p>\n\n<pre><code> Gem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\ncurrent directory:\nC:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/byebug-9.0.6/ext/byebug\nC:/Ruby23-x64/bin/ruby.exe -r ./siteconf20161109-9448-8vnaze.rb extconf.rb\ncreating Makefile\n\ncurrent directory:\nC:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/byebug-9.0.6/ext/byebug\nmake \"DESTDIR=\" clean\n\ncurrent directory:\nC:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/byebug-9.0.6/ext/byebug\nmake \"DESTDIR=\"\n\nmake failed, uncaught signal 11\n\nGem files will remain installed in\nC:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/byebug-9.0.6 for inspection.\nResults logged to\nC:/Ruby23-x64/lib/ruby/gems/2.3.0/extensions/x64-mingw32/2.3.0/byebug-9.0.6/gem_make.out\n\nAn error occurred while installing byebug (9.0.6), and Bundler cannot\ncontinue.\nMake sure that `gem install byebug -v '9.0.6'` succeeds before bundling.\n</code></pre>\n\n<p>After also commenting out 'byebug' gem the bundle install works fine. \nI have reinstalled ruby and devkit and nothing seems to help.</p>\n\n<p>The problem occured after I installed and ,soon after finding out it doesn't work for me, uninstalled ruby 2.2.5 and then reinstalled the 2.3.1 version. After uninstalling ruby 2.2.5 I also deleted the according ruby folder.</p>\n\n<p>My classmates got it working so after spending so many hours on these errors I would also like to know the reason why these errors occure and maybe how to solve them?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "web-scraping", "nokogiri", "open-uri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1478713866, "post_id": 40505127, "comment_id": 68267943, "body": "Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. When asking about code you wrote, we expect the minimal code, and minimal input data, in the question that demonstrates the problem. Not doing that forces us to work from huge HTML files and separate them into the usable and important parts, wasting out time with slows our ability to help you and potentially distracts from the real problem."}], "answers": [{"tags": [], "owner": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "is_accepted": true, "score": 1, "last_activity_date": 1478778742, "last_edit_date": 1478778742, "creation_date": 1478697586, "answer_id": 40508009, "question_id": 40505127, "link": "https://stackoverflow.com/questions/40505127/nokogiri-results-different-from-brower-inspect/40508009#40508009", "title": "Nokogiri results different from brower inspect", "body": "<p>is not that easy, urls are \"obscured\" using a js function, that's why you're getting <code>javascript: void(0)</code> when asking for the hrefs... looking at the html, there are some hidden inputs for each link, and, there is a preview url that you can use to build the job preview url (if that's what you're looking for), so you have this:</p>\n\n<pre><code>&lt;div class=\"result-list-job current-view\"&gt;\n  &lt;input type=\"hidden\" name=\"job_id\" value=\"04375145\"&gt;\n  &lt;input type=\"hidden\" name=\"each_job_title_url\" value=\"barista-senior-barista-\u5496\u5561\u8abf\u914d\u54e1\"&gt;\n  &lt;h2 class=\"job-title\"&gt;&lt;a href=\"javascript:void(0);\"&gt;Barista/ Senior Barista \u5496 \u5561 \u8abf \u914d \u54e1&lt;/a&gt;&lt;/h2&gt;\n  &lt;h3 class=\"job-company\"&gt;&lt;a href=\"/company-jobs/pacific-coffee-company/00028652\" target=\"_blank\"&gt;PACIFIC COFFEE CO. LTD.&lt;/a&gt;&lt;/h3&gt;\n  &lt;div class=\"job-description\"&gt;\n    &lt;ul class=\"job-desc-list clearfix\"&gt;\n      &lt;li class=\"job-desc-loc job-desc-small-icon\"&gt;-&lt;/li&gt;\n      &lt;li class=\"job-desc-work-exp\"&gt;0-1 yr(s)&lt;/li&gt;\n      &lt;li class=\"job-desc-salary job-desc-small-icon\"&gt;-&lt;/li&gt;\n      &lt;li class=\"job-desc-post-date\"&gt;09/11/16&lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/div&gt;\n  &lt;a class=\"job-save-btn\" title=\"save this job\" style=\"display: inline;\"&gt; &lt;/a&gt;\n  &lt;div class=\"job-batch-apply\"&gt;&lt;span class=\"checkbox\" style=\"background-position: 0px 0px;\"&gt;&lt;/span&gt;&lt;input type=\"checkbox\" class=\"styled\" name=\"job_checkbox\" value=\"04375145\"&gt;&lt;/div&gt;\n  &lt;div class=\"job-cat job-cat-de\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>then, you can retrieve each job_id from those inputs, like:</p>\n\n<pre><code> inputs = doc.search('//input[@name=\"job_id\"]')\n</code></pre>\n\n<p>and then build the urls (i found the base url at <code>joblist_preview.js</code>:</p>\n\n<pre><code> urls = inputs.map do |input|\n   \"https://www.ctgoodjobs.hk/english/jobdetails/details.asp?m_jobid=#{input['value']}&amp;joblistmode=previewlist&amp;ga_channel=ct\"\n end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1493059188, "last_edit_date": 1495540949, "creation_date": 1478712818, "answer_id": 40512837, "question_id": 40505127, "link": "https://stackoverflow.com/questions/40505127/nokogiri-results-different-from-brower-inspect/40512837#40512837", "title": "Nokogiri results different from brower inspect", "body": "<p>Take the output of a browser and that of a tool like <code>wget</code>, <code>curl</code> or <code>nokogiri</code> and you will find the HTML the browser presents can differ drastically from the raw HTML. </p>\n\n<p>Browsers these days can process DHTML, Nokogiri doesn't. You can only retrieve the <em>raw</em> HTML using something that lets you see the content without the browser, like the above mentioned tools, then compare that with what you see in a text editor, or what <code>nokogiri</code> shows you. Don't trust the browser - they're known to lie because they want to make you happy.</p>\n\n<p>Here's a quick glimpse into what the raw HTML contains, generated using:</p>\n\n<pre><code>$ nokogiri \"https://www.ctgoodjobs.hk/jobs/part-time\"\n</code></pre>\n\n<p>Nokogiri dropped me into IRB:</p>\n\n<pre><code>Your document is stored in @doc...\nWelcome to NOKOGIRI. You are using ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin15]. Have fun ;)\n</code></pre>\n\n<p>Counting the hits found by the selector returns:</p>\n\n<pre><code>&gt;&gt; @doc.search('.job-title &gt; a').size\n30\n</code></pre>\n\n<p>Displaying the text found shows:</p>\n\n<pre><code>&gt;&gt; @doc.search('.job-title &gt; a').map(&amp;:text)\n[\n  [ 0] \"\u5b30 \u5152 \u5976 \u7c89 \u6c96 \u8abf \u6a5f - \u517c \u8077 \u7522 \u54c1 \u63a8 \u5ee3 \u54e1 Part Time Promoter (\u6642 \u85aa \u9ad8 \u9054 HK$90, \u53e6 \u8a2d \u92b7 \u552e \u4f63 \u91d1 )\",\n...\n  [29] \"Customer Services Representative (Part-time)\"\n]\n</code></pre>\n\n<p>Looking at the actual <code>href</code>:</p>\n\n<pre><code>&gt;&gt; @doc.search('.job-title &gt; a').map{ |n| n['href'] }\n[\n  [ 0] \"javascript:void(0);\",\n...\n  [29] \"javascript:void(0);\"\n]\n</code></pre>\n\n<p>You can tell the HTML doesn't contain anything but what Nokogiri is telling you, so the browser is post-processing the HTML, processing the DHTML and modifying the page you see if you use something to look at the HTML. So, the short fix is, don't trust the browser if you want to know what the server sends to you. </p>\n\n<p>This is why scraping isn't very reliable and you should use an API if at all possible. If you can't, then you're going to have to roll up your sleeves and dig into the JavaScript and manually interpret what it's doing, then retrieve the data and parse it into something useful.</p>\n\n<p>Your code can be cleaned up and simplified. I'd write it much more simply as:</p>\n\n<pre><code>url = \"https://www.ctgoodjobs.hk/jobs/part-time\"\ndoc = Nokogiri::HTML(open(url))\nlinks = doc.search('.job-title &gt; a').map(&amp;:text)\n</code></pre>\n\n<p>The use of <code>search(...).text</code> is a big mistake. <code>text</code>, when applied to a NodeSet, will concatenate the text of each contained node, making it extremely difficult to retrieve the individual text. Consider this:</p>\n\n<pre><code>require 'nokogiri'\ndoc = Nokogiri::HTML(&lt;&lt;EOT)\n&lt;html&gt;\n  &lt;body&gt;\n    &lt;p&gt;foo&lt;/p&gt;\n    &lt;p&gt;bar&lt;/p&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\nEOT\n\ndoc.search('p').class # =&gt; Nokogiri::XML::NodeSet\n\ndoc.search('p').text # =&gt; \"foobar\"\ndoc.search('p').map(&amp;:text) # =&gt; [\"foo\", \"bar\"]\n</code></pre>\n\n<p>The first result <code>foobar</code> would require being split apart to be useful, and unless you have special knowledge of the content, trying to figure out how to do it will be a major pain.</p>\n\n<p>Instead, use <code>map</code> to iterate through the elements and apply <code>&amp;:text</code> to each one, returning an array of each element's text.</p>\n\n<p>See \"<a href=\"https://stackoverflow.com/questions/43594656/how-to-avoid-joining-all-text-from-nodes-when-scraping\">How to avoid joining all text from Nodes when scraping</a>\" and \"<a href=\"https://stackoverflow.com/a/19714636/128421\">Taking apart a DHTML page</a>\" also.</p>\n"}], "owner": {"reputation": 1618, "user_id": 4390569, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/45e5cbdbb0918c604054719dcd4d8e96?s=128&d=identicon&r=PG&f=1", "display_name": "Kelvin", "link": "https://stackoverflow.com/users/4390569/kelvin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 40508009, "answer_count": 2, "score": 0, "last_activity_date": 1493059188, "creation_date": 1478688490, "last_edit_date": 1478713739, "question_id": 40505127, "link": "https://stackoverflow.com/questions/40505127/nokogiri-results-different-from-brower-inspect", "title": "Nokogiri results different from brower inspect", "body": "<p>I am trying to scrape a site but the results returned for just the links is different from when I inspect it with the browser.</p>\n\n<p>In my browser I get normal links but all the a HREF links all become <code>javascript:void(0);</code> from Nokogiri.</p>\n\n<p>Here is the site:</p>\n\n<pre><code>https://www.ctgoodjobs.hk/jobs/part-time\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>url = \"https://www.ctgoodjobs.hk/jobs/part-time\"\nresponse = open(url) rescue nil\nnext unless response\ndoc = Nokogiri::HTML(open(url))\nlinks = doc.search('.job-title &gt; a').text\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "cookies"], "answers": [{"tags": [], "owner": {"reputation": 1568, "user_id": 966100, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/xN0ul.jpg?s=128&g=1", "display_name": "eeeeeean", "link": "https://stackoverflow.com/users/966100/eeeeeean"}, "is_accepted": true, "score": 0, "last_activity_date": 1478734167, "creation_date": 1478734167, "answer_id": 40517721, "question_id": 40505089, "link": "https://stackoverflow.com/questions/40505089/ruby-on-rails-adding-removing-cookie-when-user-is-on-new-post/40517721#40517721", "title": "Ruby on rails - Adding/ Removing cookie when user is on new post", "body": "<p>Is <code>cookies.delete :__nr</code> what you're looking for? You can use a <code>before_action</code> method in your controller to limit which controller actions delete that cookie.</p>\n\n<p>For example:</p>\n\n<pre><code>class SomeController &lt; ApplicationController\n\n  before_action :delete_the_cookie, only: [:new]\n\n  def delete_the_cookie\n    cookies.delete :__nr\n  end\nend\n</code></pre>\n\n<p>That will only delete the cookie for your <code>new</code> controller action.</p>\n"}], "owner": {"reputation": 667, "user_id": 6589814, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/FzUlF.png?s=128&g=1", "display_name": "Rubioli", "link": "https://stackoverflow.com/users/6589814/rubioli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 40517721, "answer_count": 1, "score": 0, "last_activity_date": 1478734167, "creation_date": 1478688342, "question_id": 40505089, "link": "https://stackoverflow.com/questions/40505089/ruby-on-rails-adding-removing-cookie-when-user-is-on-new-post", "title": "Ruby on rails - Adding/ Removing cookie when user is on new post", "body": "<p>I have a gallery-like application where user can add albums. In my application I add a <code>cookie</code> called <code>__nr</code> when user comes to view a album if browser doesn't have <code>__nr</code> cookie.</p>\n\n<p><em>This is how I do it</em></p>\n\n<pre><code>rand = rand(1..999)\ncookies[:__nr] = {value: rand, expires: 10.minutes.from_now} if cookies[:__nr].blank?\n</code></pre>\n\n<p>This works fine, but what I want to achieve is, when they go to a new album/<code>album_path</code> I want to add a new random number as <code>cookie value</code>.</p>\n\n<p>What I have now is <code>expires: 10.minutes.from_now</code>, but I want to change <code>cookie value</code> when they are on a new album path.</p>\n\n<p>I know I can add <code>javascript</code> to remove the cookie when click on some buttons but I don't want to use <code>javascript function</code> and want to handle it from my controller.</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 3, "creation_date": 1478688102, "post_id": 40504996, "comment_id": 68252752, "body": "<a href=\"http://ruby-doc.org/core-2.0.0/Object.html#method-i-hash\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.0.0/Object.html#method-i-hash</a>"}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 8, "last_activity_date": 1478689608, "last_edit_date": 1478689608, "creation_date": 1478688804, "answer_id": 40505221, "question_id": 40504996, "link": "https://stackoverflow.com/questions/40504996/what-is-hash-in-ruby/40505221#40505221", "title": "What is `hash` in ruby?", "body": "<p><strong>TL;DR</strong> \u2013 it's the <a href=\"http://ruby-doc.org/core-2.3.1/Object.html#method-i-hash\" rel=\"noreferrer\"><code>hash</code></a> value for Ruby's <a href=\"https://banisterfiend.wordpress.com/2010/11/23/what-is-the-ruby-top-level/\" rel=\"noreferrer\">top-level</a> object, equivalent to <code>self.hash</code>.</p>\n\n<p>Here's a little debugging help:</p>\n\n<pre><code>irb(main):001:0&gt; hash\n#=&gt; 3220857809431415791\n\nirb(main):002:0&gt; defined? hash\n#=&gt; \"method\"\n\nirb(main):003:0&gt; method(:hash)\n#=&gt; #&lt;Method: Object(Kernel)#hash&gt;\n</code></pre>\n\n<p>You can now lookup <code>Object#hash</code><sup>1</sup> online:</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.3.1/Object.html#method-i-hash\" rel=\"noreferrer\">http://ruby-doc.org/core-2.3.1/Object.html#method-i-hash</a></p>\n\n<p>Or in IRB:</p>\n\n<pre><code>irb(main):004:0&gt; help \"Object#hash\"\n= Object#hash\n\n(from ruby core)\n------------------------------------------------------------------------------\n  obj.hash    -&gt; fixnum\n\n------------------------------------------------------------------------------\n\nGenerates a Fixnum hash value for this object.  This function must have the\nproperty that a.eql?(b) implies a.hash == b.hash.\n\nThe hash value is used along with #eql? by the Hash class to determine if two\nobjects reference the same hash key.  Any hash value that exceeds the capacity\nof a Fixnum will be truncated before being used.\n\nThe hash value for an object may not be identical across invocations or\nimplementations of Ruby.  If you need a stable identifier across Ruby\ninvocations and implementations you will need to generate one with a custom\nmethod.\n\n\n#=&gt; nil\nirb(main):005:0&gt;\n</code></pre>\n\n<hr>\n\n<p><sup>1</sup> <code>Object(Kernel)#hash</code> actually means that <code>hash</code> is defined in <code>Kernel</code>, but as stated in the documentation for <code>Object</code>:</p>\n\n<blockquote>\n  <p>Although the instance methods of Object are defined by the Kernel module, we have chosen to document them here for clarity.</p>\n</blockquote>\n"}], "owner": {"reputation": 545, "user_id": 7009068, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d4dcec8dac0d44459b1a411be4c9df94?s=128&d=identicon&r=PG", "display_name": "Kalsan", "link": "https://stackoverflow.com/users/7009068/kalsan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "accepted_answer_id": 40505221, "answer_count": 1, "score": 6, "last_activity_date": 1478689608, "creation_date": 1478688058, "question_id": 40504996, "link": "https://stackoverflow.com/questions/40504996/what-is-hash-in-ruby", "title": "What is `hash` in ruby?", "body": "<p>Because I forgot an assignment, I read the undefined local variable <code>hash</code> before writing it. Surprise: Instead of getting a NameError, the value was read just fine: It was some FixNum and the program crashed much later.</p>\n\n<p>Investigating on the problem, I did the following:</p>\n\n<ul>\n<li>Open up irb</li>\n<li>type <code>hash</code> and press Enter</li>\n<li>Surprise! the answer is -1831075300640432498 (and surprisingly not NameError, nor 42)</li>\n</ul>\n\n<p>Why is that? Is it a bug or a feature? What am I reading here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash", "ruby-on-rails-5", "ruby-on-rails-6"], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 15, "last_activity_date": 1549213773, "last_edit_date": 1549213773, "creation_date": 1478686035, "answer_id": 40504335, "question_id": 40504296, "link": "https://stackoverflow.com/questions/40504296/using-constant-as-keys-in-ruby-hash/40504335#40504335", "title": "Using constant as keys in ruby hash", "body": "<p><code>KEY1:</code> is the syntax sugar to <code>:KEY1 =&gt;</code>, so you're actually having <strong><em>symbol</em></strong> as key, not constant.</p>\n\n<p>To have actual object as a key, use hash rocket notation: </p>\n\n<pre><code>stories = {\n  KEY1 =&gt; { title: \"The epic run\" },\n  KEY2 =&gt; { title: \"The epic fail\" }\n}\nstories[KEY1]\n#=&gt; {:title=&gt;\"The epic run\"}\n</code></pre>\n"}], "owner": {"reputation": 25556, "user_id": 48062, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/DfKUw.jpg?s=128&g=1", "display_name": "Maxim Veksler", "link": "https://stackoverflow.com/users/48062/maxim-veksler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1871, "favorite_count": 0, "accepted_answer_id": 40504335, "answer_count": 1, "score": 7, "last_activity_date": 1615907945, "creation_date": 1478685934, "last_edit_date": 1615907945, "question_id": 40504296, "link": "https://stackoverflow.com/questions/40504296/using-constant-as-keys-in-ruby-hash", "title": "Using constant as keys in ruby hash", "body": "<p>Assuming I have 2 strings constants </p>\n\n<pre><code>KEY1 = \"Hello\"\nKEY2 = \"World\"\n</code></pre>\n\n<p>I would like to create a hash using these constants as key values. </p>\n\n<p>Trying something like this:</p>\n\n<pre><code>stories = {\n  KEY1: { title: \"The epic run\" },\n  KEY2: { title: \"The epic fail\" }\n}\n</code></pre>\n\n<p>Doesn't seem to work </p>\n\n<pre><code>stories.inspect\n#=&gt; \"{:KEY1=&gt;{:title=&gt;\\\"The epic run\\\"}, :KEY2=&gt;{:title=&gt;\\\"The epic fail\\\"}}\"\n</code></pre>\n\n<p>and <code>stories[KEY1]</code> obviously doesn't work.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1478684578, "post_id": 40503774, "comment_id": 68250584, "body": "Is the value always enclosed with whitespace? Try removing <code>\\s</code> from your pattern. Or replace with <code>\\b</code> (word boundaries). Or replace the first <code>\\s</code> with <code>(?&lt;!\\S)</code> and the last one with <code>(?!\\S)</code>. If you provide sample data, it would be much easier to help you."}, {"owner": {"reputation": 607, "user_id": 4201809, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jQPMj.png?s=128&g=1", "display_name": "Dimitri de Ruiter", "link": "https://stackoverflow.com/users/4201809/dimitri-de-ruiter"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1478686421, "post_id": 40503774, "comment_id": 68251674, "body": "added more info / sample data"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1478686501, "post_id": 40503774, "comment_id": 68251734, "body": "I hope it is not the actual data :)? It seems that you need to replace <code>\\s</code> with <code>\\b</code>. <code>if self.extracted_data =~ &#47;\\b#{Regexp.escape(business_partner.bank_account)}?\\b&#47;i</code>"}, {"owner": {"reputation": 607, "user_id": 4201809, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jQPMj.png?s=128&g=1", "display_name": "Dimitri de Ruiter", "link": "https://stackoverflow.com/users/4201809/dimitri-de-ruiter"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1478687283, "post_id": 40503774, "comment_id": 68252256, "body": "all publicly avail online. tried that one too. May be the ruby code; it always comes with No match on the bank account of 1 specific business partner."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1478687490, "post_id": 40503774, "comment_id": 68252386, "body": "Which one? Try <code>if self.extracted_data =~ &#47;(?&lt;!\\w)#{Regexp.escape(business_partner.bank_account)}?(?!\\&zwnj;&#8203;w)&#47;i</code>"}, {"owner": {"reputation": 607, "user_id": 4201809, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jQPMj.png?s=128&g=1", "display_name": "Dimitri de Ruiter", "link": "https://stackoverflow.com/users/4201809/dimitri-de-ruiter"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1478687763, "post_id": 40503774, "comment_id": 68252564, "body": "the one with bank account 19.83.94.527. When I add that to extracted_data it matches and assigns the sender."}, {"owner": {"reputation": 607, "user_id": 4201809, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jQPMj.png?s=128&g=1", "display_name": "Dimitri de Ruiter", "link": "https://stackoverflow.com/users/4201809/dimitri-de-ruiter"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1478689909, "post_id": 40503774, "comment_id": 68253722, "body": "It works as long as the bank account does not contain any whitespace. e.g. this matches &quot;NL23ABNA0469823526&quot;, where this &quot;NL23 ABNA 0469 8235 26&quot; does not. problem, the last notation/format is normally found in the documents as that is the printed version of IBAN."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1478690190, "post_id": 40503774, "comment_id": 68253879, "body": "You might remove spaces before the regex extraction - <code>if self.extracted_data.gsub(&#47;\\s+&#47;, &#39;&#39;) =~ &#47;\\b#{Regexp.escape(business_partner.bank_account)}?\\b&#47;i</code>"}, {"owner": {"reputation": 607, "user_id": 4201809, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jQPMj.png?s=128&g=1", "display_name": "Dimitri de Ruiter", "link": "https://stackoverflow.com/users/4201809/dimitri-de-ruiter"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1478698973, "post_id": 40503774, "comment_id": 68258931, "body": "Don&#39;t forget to post as answer :)"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1478699145, "post_id": 40503774, "comment_id": 68259057, "body": "Great, I just was not sure it worked well for you. Posted with a bit of an explanation."}, {"owner": {"reputation": 607, "user_id": 4201809, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jQPMj.png?s=128&g=1", "display_name": "Dimitri de Ruiter", "link": "https://stackoverflow.com/users/4201809/dimitri-de-ruiter"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1478699248, "post_id": 40503774, "comment_id": 68259117, "body": "sued the sub also on the bank_account field now ;-) (with regex.escape it strips dash or dot). Now need to fix the iteration (see other question if you got time)"}], "answers": [{"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1478699125, "creation_date": 1478699125, "answer_id": 40508508, "question_id": 40503774, "link": "https://stackoverflow.com/questions/40503774/rails-5-set-value-on-self-based-on-matching-fields-with-a-regex/40508508#40508508", "title": "Rails 5 - set value on self based on matching fields with a Regex", "body": "<p>You may replace the <code>\\s</code> whitespace patterns with word boundaries <code>\\b</code> to avoid requiring whitespace around the pattern (word boundaries are zero-width assertions, and they only match <em>locations</em> in a string, so they are safe to use in the extraction scenario, similarly to lookarounds), and since there are whitespace symbols in the original string, you may just remove them with <code>.gsub(/\\s+/, '')</code> for the sake of regex checking:</p>\n\n<pre><code>if self.extracted_data.gsub(/\\s+/, '') =~ /\\b#{Regexp.escape(business_partner.bank_account)}?\\b/i\n                       ^^^^^^^^^^^^^^^    ^^^                                               ^^^\n</code></pre>\n\n<p>See more  about word boundaries on the <a href=\"http://www.regular-expressions.info/wordboundaries.html\" rel=\"nofollow noreferrer\"><em>Word Boundaries</em> regular-expressions.info</a> Web page.</p>\n"}], "owner": {"reputation": 607, "user_id": 4201809, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/jQPMj.png?s=128&g=1", "display_name": "Dimitri de Ruiter", "link": "https://stackoverflow.com/users/4201809/dimitri-de-ruiter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 40508508, "answer_count": 1, "score": 1, "last_activity_date": 1478699125, "creation_date": 1478684366, "last_edit_date": 1478686389, "question_id": 40503774, "link": "https://stackoverflow.com/questions/40503774/rails-5-set-value-on-self-based-on-matching-fields-with-a-regex", "title": "Rails 5 - set value on self based on matching fields with a Regex", "body": "<p>In the app that I am building to learn Ruby and Rails, I have trouble getting below to work.</p>\n\n<h2>Desired result</h2>\n\n<p>when the content of the field <code>self.extracted_data</code> (here self is object <code>Document</code>) contains the bank account number (<code>bank_account</code>) of a business partner (<code>BusinessPartner</code>), the sender for the document (<code>self.sender_id</code>) needs to equal the BusinessPartner.</p>\n\n<p>What I have so far:</p>\n\n<pre><code>BusinessPartner.active.each do |business_partner|\n   unless business_partner == self.receiver_id\n      if self.extracted_data =~ /\\s#{Regexp.escape(business_partner.bank_account)}?\\s/i # need to fix the RGX\n        self.sender = business_partner\n        self.name = \"match: \" + business_partner.id.to_s + /\\s#{Regexp.escape(business_partner.bank_account)}?\\s/i.to_s # to see RGX used\n      else\n        self.sender = nil\n        self.name = \"NO match: \" + business_partner.id.to_s + /\\s#{Regexp.escape(business_partner.bank_account)}?\\s/i.to_s # to see RGX used\n      end\n  end\nend\n</code></pre>\n\n<p>It always gives me NO MATCH where I do have 100% matching records for business partners. I have been studying the pickaxe book, rails doc etc. for hours now and can find the solution. <strong>All help / advice welcome.</strong></p>\n\n<p>p.s. I could DRY the regex into a variable yet it is used multiple times only temporarily.</p>\n\n<h2>update</h2>\n\n<p>sample data for <strong>business partners</strong>\n<a href=\"https://i.stack.imgur.com/iYEtu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iYEtu.png\" alt=\"enter image description here\"></a></p>\n\n<p>sample data for <strong>extracted_data</strong></p>\n\n<p>could include the bank-account...</p>\n\n<ul>\n<li>enclosed in whitespace eg: ' NL15 INGB 0660 3125 06 '</li>\n<li>enclosed in whitespace and a dot (.) eg: ' GB99 RBS1 0469 7788 99.' </li>\n<li>enclosed in brackets () eg: (NL15 INGB 0660 3125 06)</li>\n<li>although not allowed by the banks, could have special characters; typically dot (.) or dash (-)</li>\n<li>or like so: ' 19.83.94.527 ' (very uncommon; no need to cater.</li>\n</ul>\n\n<p>Note: bank account should adhere to IBAN formatting rules. These will be applied to the business_partner.bank_account field for data quality; yet what is in the extracted_data depends on what it extracted from the file (pdf) attached to the document record.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1478683907, "post_id": 40503528, "comment_id": 68250214, "body": "<code>CSV.open(&#39;output.csv&#39;, &#39;w&#39;) do |csv|   var.each do |result|     csv &lt;&lt; result   end end</code>"}], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 0, "last_activity_date": 1478684388, "creation_date": 1478684388, "answer_id": 40503786, "question_id": 40503528, "link": "https://stackoverflow.com/questions/40503528/ruby-writing-to-a-file-while-iterating-in-a-class/40503786#40503786", "title": "Ruby - writing to a file while iterating in a class", "body": "<p>Here's an example :</p>\n\n<pre><code>def launch_process(io)\n  10.times do |i|\n    sleep 1\n    io.puts i\n    ## Uncomment this line if you want to update the file during every iteration\n    # io.flush\n  end\nend\n\nf = File.open('output.csv','a+')\nlaunch_process(f)\nf.close\n</code></pre>\n\n<p>If you post more code it would be easier to adapt this loop to your example.</p>\n"}], "owner": {"reputation": 6105, "user_id": 1700874, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad36477949cfd7db659cd4420537911c?s=128&d=identicon&r=PG&f=1", "display_name": "The Whiz of Oz", "link": "https://stackoverflow.com/users/1700874/the-whiz-of-oz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478684388, "creation_date": 1478683527, "question_id": 40503528, "link": "https://stackoverflow.com/questions/40503528/ruby-writing-to-a-file-while-iterating-in-a-class", "title": "Ruby - writing to a file while iterating in a class", "body": "<p>Is it possible to write to a file while looping in Ruby? My code looks something like this:</p>\n\n<p>navigator.rb</p>\n\n<pre><code>def launch_process\n  while obj.present?\n    return something while something_else\n  end\nend\n</code></pre>\n\n<p>app.rb # launcher</p>\n\n<pre><code>navigator = Navigator.new(args)\nvar = navigator.launch_process\n\n$file = File.open(\"output.csv\", \"a+\")\nopen($file, 'a+') { |file| file.write(var) } # won't work\n</code></pre>\n\n<p>The idea is to update the CSV file with data that is being gradually returned by the Navigator Object, launch_process method. </p>\n"}, {"tags": ["ruby", "windows", "ocra"], "comments": [{"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1481100695, "post_id": 40503173, "comment_id": 69233421, "body": "You&#39;ll want to <a href=\"https://stackoverflow.com/posts/40503173/edit\">edit</a> your question to follow the guidelines <a href=\"https://stackoverflow.com/help/how-to-ask\">here</a> -- specifically, explain exactly what you want to happen, what&#39;s actually happening, and include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> <i>in the question itself</i>"}, {"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "reply_to_user": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1481102015, "post_id": 40503173, "comment_id": 69234278, "body": "@QPaysTaxes As you can see All details are there code sample is there what elde you think should be added?"}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1481102050, "post_id": 40503173, "comment_id": 69234311, "body": "Please read my comment before responding to it. The whole comment. Every last bit of it. Including the last four words."}, {"owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "reply_to_user": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1481102240, "post_id": 40503173, "comment_id": 69234441, "body": "@QPaysTaxes Yes I did"}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1481102314, "post_id": 40503173, "comment_id": 69234493, "body": "Then you should know that linking to your code isn&#39;t enough. Read the second link."}], "answers": [{"tags": [], "owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "is_accepted": true, "score": 0, "last_activity_date": 1481007217, "creation_date": 1481007217, "answer_id": 40989488, "question_id": 40503173, "link": "https://stackoverflow.com/questions/40503173/ruby-windows-script-with-win32api/40989488#40989488", "title": "Ruby Windows script with Win32API", "body": "<p>Eventually I came up with solution that in running service we can't get benefit of WINAPI, So for I have to use dotnet wrapper (tray app) to run my ruby exe and its running in the Tray, And guess but it is running awesome..</p>\n"}], "owner": {"reputation": 1331, "user_id": 4189633, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/VG5Vp.jpg?s=128&g=1", "display_name": "Vishal G", "link": "https://stackoverflow.com/users/4189633/vishal-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 175, "favorite_count": 0, "accepted_answer_id": 40989488, "answer_count": 1, "score": -3, "last_activity_date": 1481610250, "creation_date": 1478682408, "last_edit_date": 1481610250, "question_id": 40503173, "link": "https://stackoverflow.com/questions/40503173/ruby-windows-script-with-win32api", "title": "Ruby Windows script with Win32API", "body": "<p><strong>Done</strong></p>\n\n<p>I have written a ruby script to capture key presses and print those in file</p>\n\n<p>Code is similar to this</p>\n\n<p><a href=\"https://github.com/bgnash/kopykat/blob/master/kopykat.rb\" rel=\"nofollow noreferrer\">https://github.com/bgnash/kopykat/blob/master/kopykat.rb</a></p>\n\n<p>I have used ocra to make window service </p>\n\n<p><a href=\"http://abstractcoder.com/2013/08/02/create-a-windows-service-with-ruby-part-2.html\" rel=\"nofollow noreferrer\">http://abstractcoder.com/2013/08/02/create-a-windows-service-with-ruby-part-2.html</a></p>\n\n<p><strong>After completion</strong> </p>\n\n<p>When I register this service in windows , service is running but nothing get printed in file</p>\n\n<p><strong>Alternative</strong> </p>\n\n<p>Now I made the exe version of script and again tested in windows now I can see printed key presess names in the file</p>\n\n<p><strong>Issue to fix</strong></p>\n\n<p>I want to run this script in service with working state. Any help??</p>\n\n<p><strong>MY SIMPLE QUESTION IS CAN WE USE WIN32API IN WINDOWS SERVICE</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cloud9"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1478684206, "post_id": 40502968, "comment_id": 68250361, "body": "<a href=\"http://stackoverflow.com/questions/3672586/what-is-the-difference-between-require-relative-and-require-in-ruby\" title=\"what is the difference between require relative and require in ruby\">stackoverflow.com/questions/3672586/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3367, "user_id": 822256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ITN7.png?s=128&g=1", "display_name": "sa77", "link": "https://stackoverflow.com/users/822256/sa77"}, "is_accepted": false, "score": 0, "last_activity_date": 1478686196, "last_edit_date": 1478686196, "creation_date": 1478685387, "answer_id": 40504125, "question_id": 40502968, "link": "https://stackoverflow.com/questions/40502968/cant-call-method-from-other-script/40504125#40504125", "title": "Can&#39;t call method from other script", "body": "<p>you need to use <code>require_relative</code> to make it work </p>\n\n<p>Also, <code>yes</code> method in <code>Parent</code> class is an instance method and you need to instantiate Parent class in order to user it's instance method. </p>\n\n<p>Your <code>test.rb</code> should look like this:</p>\n\n<pre><code>require_relative 'parent.rb'\n\nclass Test &lt; Parent\n  Parent.new.yes\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7135414, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154034147191623/picture?type=large", "display_name": "TSteff", "link": "https://stackoverflow.com/users/7135414/tsteff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1478686507, "creation_date": 1478681639, "last_edit_date": 1478686507, "question_id": 40502968, "link": "https://stackoverflow.com/questions/40502968/cant-call-method-from-other-script", "title": "Can&#39;t call method from other script", "body": "<p>Here a screen of my code and error messages I get<br/></p>\n\n<p><img src=\"https://i.stack.imgur.com/fvo9q.png\" alt=\"Code and error message\">\n<br/></p>\n\n<p>Uninitialized constant CLASS (NameError)</p>\n\n<p>I am using Cloud9, Ruby, Rails server.  I created two simple test scripts.  test.rb and parent.rb</p>\n\n<p>parent.rb has a method 'yes' which displays the word yes...  test is trying to be a child/dependant of parent so that it can access parent's method 'yes'.  But no luck.</p>\n\n<p>I've tried \"class test &lt; parent\"\nI've tried adding \"require 'parent'\"\nI've tried changing parent from class parent to module parent.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-chrome-devtools", "syntax-highlighting"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 2, "creation_date": 1478682128, "post_id": 40502949, "comment_id": 68249282, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/24878978/why-isnt-syntax-highlighting-working-for-ruby-files-erb-in-chrome-devtools\">Why isn&#39;t syntax highlighting working for Ruby files (.erb) in Chrome Devtools?</a>"}, {"owner": {"reputation": 11373, "user_id": 218377, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1528601310/picture?type=large", "display_name": "Luca Romagnoli", "link": "https://stackoverflow.com/users/218377/luca-romagnoli"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1478684538, "post_id": 40502949, "comment_id": 68250560, "body": "I want .rb files not .erb"}, {"owner": {"reputation": 9241, "user_id": 2604748, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/487997f4abce4dd209add4ef3dee9d19?s=128&d=identicon&r=PG", "display_name": "Garbee", "link": "https://stackoverflow.com/users/2604748/garbee"}, "edited": false, "score": 0, "creation_date": 1478728000, "post_id": 40502949, "comment_id": 68274803, "body": "Same concept for both file types since they are ruby files. So this is a duplicate."}], "owner": {"reputation": 11373, "user_id": 218377, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/1528601310/picture?type=large", "display_name": "Luca Romagnoli", "link": "https://stackoverflow.com/users/218377/luca-romagnoli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1478684571, "creation_date": 1478681592, "last_edit_date": 1478684571, "question_id": 40502949, "link": "https://stackoverflow.com/questions/40502949/enable-ruby-syntax-highlighting-in-chrome-devtools", "title": "Enable Ruby syntax highlighting in chrome devtools", "body": "<p>Is there a method for enable ruby syntax highlighting in <strong>.rb</strong> file in chrome devtools?</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "rubocop"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1478681500, "post_id": 40502804, "comment_id": 68249005, "body": "Each language has its own conventions. Rubocop is based on the <a href=\"https://github.com/bbatsov/ruby-style-guide\" rel=\"nofollow noreferrer\">Ruby style guide</a> which only applies to Ruby."}, {"owner": {"reputation": 671, "user_id": 5742949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3912a535b54d364d6922df433db50512?s=128&d=identicon&r=PG&f=1", "display_name": "Shabini Rajadas", "link": "https://stackoverflow.com/users/5742949/shabini-rajadas"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1478682531, "post_id": 40502804, "comment_id": 68249476, "body": "So what is your opinion for html views?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1478682736, "post_id": 40502804, "comment_id": 68249601, "body": "html is not Ruby."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1478684533, "post_id": 40502804, "comment_id": 68250555, "body": "@ShabiniRajadas I&#39;m using double quotes in HTML, but the specification allows both, single quotes and double quotes. You can pick the one you like best."}, {"owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "edited": false, "score": 0, "creation_date": 1478754952, "post_id": 40502804, "comment_id": 68281925, "body": "The setting is configurable, single quotes just happens to be the default, for arbitrary reasons. :-)"}], "answers": [{"comments": [{"owner": {"reputation": 671, "user_id": 5742949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3912a535b54d364d6922df433db50512?s=128&d=identicon&r=PG&f=1", "display_name": "Shabini Rajadas", "link": "https://stackoverflow.com/users/5742949/shabini-rajadas"}, "edited": false, "score": 0, "creation_date": 1478682548, "post_id": 40502935, "comment_id": 68249487, "body": "So for views too? because the views are designed by the UI team. They usually give us designs with classes in Double quotations."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 671, "user_id": 5742949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3912a535b54d364d6922df433db50512?s=128&d=identicon&r=PG&f=1", "display_name": "Shabini Rajadas", "link": "https://stackoverflow.com/users/5742949/shabini-rajadas"}, "edited": false, "score": 0, "creation_date": 1478682625, "post_id": 40502935, "comment_id": 68249539, "body": "@ShabiniRajadas as I say: Rubocop does not check views, so it&#39;s line length, double quotes and so on should not necessarily follow the Ruby style conventions. Why? Because it is not even Ruby, it is html. So be calm when having double quotes in views."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 671, "user_id": 5742949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3912a535b54d364d6922df433db50512?s=128&d=identicon&r=PG&f=1", "display_name": "Shabini Rajadas", "link": "https://stackoverflow.com/users/5742949/shabini-rajadas"}, "edited": false, "score": 0, "creation_date": 1478686275, "post_id": 40502935, "comment_id": 68251589, "body": "@ShabiniRajadas <i>&quot;the views are designed by the UI team&quot;</i> \u2013 then you should ask the UI team."}, {"owner": {"reputation": 671, "user_id": 5742949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3912a535b54d364d6922df433db50512?s=128&d=identicon&r=PG&f=1", "display_name": "Shabini Rajadas", "link": "https://stackoverflow.com/users/5742949/shabini-rajadas"}, "edited": false, "score": 0, "creation_date": 1478686548, "post_id": 40502935, "comment_id": 68251765, "body": "yes, I did ask them. But I wanted to know what happens when it is added to a rails app. So that&#39;s why asked for suggestions. If there is no significant difference in performance, then using any type of quotation is fine I guess."}, {"owner": {"reputation": 671, "user_id": 5742949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3912a535b54d364d6922df433db50512?s=128&d=identicon&r=PG&f=1", "display_name": "Shabini Rajadas", "link": "https://stackoverflow.com/users/5742949/shabini-rajadas"}, "edited": false, "score": 0, "creation_date": 1478717201, "post_id": 40502935, "comment_id": 68269577, "body": "Thanks @AndreyDeineko"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 2, "last_activity_date": 1478686976, "last_edit_date": 1592644375, "creation_date": 1478681519, "answer_id": 40502935, "question_id": 40502804, "link": "https://stackoverflow.com/questions/40502804/double-quotation-marks-for-html-classes/40502935#40502935", "title": "Double Quotation marks for html classes", "body": "<h1>TL;DR</h1>\n<ol>\n<li>Rubocop does not care about views.</li>\n<li>HTML is not Ruby, thus it does not even make sense to follow Ruby conventions in HTML.</li>\n</ol>\n<hr />\n<blockquote>\n<p>Should this also be changed to single quotations?</p>\n</blockquote>\n<p>Rubocop does not check views, so it's up to your preferences.</p>\n<blockquote>\n<p>I just want to know why does Rubocop prefer to use single quotation\nover double quotation.</p>\n</blockquote>\n<p><a href=\"https://www.viget.com/articles/just-use-double-quoted-ruby-strings\" rel=\"nofollow noreferrer\">Today there is no performance difference</a> when using single/double quotes.</p>\n<p>I think it is just a matter of taste. I prefer to use single quotes if there is no need in double ones (interpolation). And it occurs to be the <a href=\"https://github.com/bbatsov/ruby-style-guide\" rel=\"nofollow noreferrer\">opinion of the majority of active members of Ruby community</a>.</p>\n"}], "owner": {"reputation": 671, "user_id": 5742949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3912a535b54d364d6922df433db50512?s=128&d=identicon&r=PG&f=1", "display_name": "Shabini Rajadas", "link": "https://stackoverflow.com/users/5742949/shabini-rajadas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "accepted_answer_id": 40502935, "answer_count": 1, "score": 1, "last_activity_date": 1478686976, "creation_date": 1478680990, "last_edit_date": 1478685898, "question_id": 40502804, "link": "https://stackoverflow.com/questions/40502804/double-quotation-marks-for-html-classes", "title": "Double Quotation marks for html classes", "body": "<p>When using Rubocop, they specify to use single quotation marks rather than double quotation in possible places other than interpolation. So what about the views of a rails app. The classes in the views are written as follows,</p>\n\n<pre><code>&lt;div class=\"row-fluid\"&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Should this also be changed to single quotations? Do that have any performance change? I just want to know why does Rubocop prefer to use single quotation over double quotation.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "shopify"], "answers": [{"tags": [], "owner": {"reputation": 8203, "user_id": 210841, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5adbe9e20522d6a177e76b223b6750ed?s=128&d=identicon&r=PG", "display_name": "David Lazar", "link": "https://stackoverflow.com/users/210841/david-lazar"}, "is_accepted": false, "score": 0, "last_activity_date": 1478813651, "creation_date": 1478813651, "answer_id": 40537403, "question_id": 40502802, "link": "https://stackoverflow.com/questions/40502802/shopify-api-customers-orders-count-rails/40537403#40537403", "title": "Shopify API Customers orders_count Rails", "body": "<p>Can you actually change a valid orders_count? It would be pretty crazy in my mind if Shopify allowed that.</p>\n\n<p>If I were you, and I am not, for sure, I would simply change my algorithm so that it is more of a \"How many orders has this customer placed since last tuesday?\". That way, I reward them if their purchases exceed that threshold of X. </p>\n\n<p>In your case, you are trying to erase their legitimate order history to make your counter work, which I doubt works.</p>\n\n<p>In the meantime, if you can indeed set that count to zero, just loop through all the customers, and for each one, save their count as zero. There is no one shot all customers call in Shopify API, just like there is no one shot anything. Every resource is a one-off. </p>\n"}], "owner": {"reputation": 33, "user_id": 2554860, "user_type": "registered", "profile_image": "https://graph.facebook.com/696855005/picture?type=large", "display_name": "Kelsey Cooper", "link": "https://stackoverflow.com/users/2554860/kelsey-cooper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478813651, "creation_date": 1478680981, "question_id": 40502802, "link": "https://stackoverflow.com/questions/40502802/shopify-api-customers-orders-count-rails", "title": "Shopify API Customers orders_count Rails", "body": "<p>I'm in the process of making an app that will update shipping depending on what your order_count is using ShopifyAPI::Customer.</p>\n\n<p>One main thing I'm trying to accomplish is being able to reset the order_count to zero for all customers.</p>\n\n<p>I have been trying:</p>\n\n<pre><code>order = ShopifyAPI::Customer.all\norder.update_all(:orders_count, \"0\")\n</code></pre>\n\n<p>It works when I'm addressing a single customer, but not Customer.all. Is there a way I can work around this to update all customers in the db at once?</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 6, "creation_date": 1478677925, "post_id": 40502156, "comment_id": 68247614, "body": "Don\u2019t ever try to modify an array while iterating it. Enumerators got crazy."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1478677950, "post_id": 40502156, "comment_id": 68247623, "body": "Don&#39;t modify the same array you are iterating."}, {"owner": {"reputation": 554, "user_id": 5511391, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/OYPNO.jpg?s=128&g=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5511391/marco"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1478678904, "post_id": 40502156, "comment_id": 68247957, "body": "@mudasobwa Thanks, could you let me know the reason"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1478680663, "post_id": 40502156, "comment_id": 68248605, "body": "This has been asked and answered many times before here on this site. The first iteration is at index 0. You delete the element. Now, the element that used to be at index 1 is at index 0, the element that used to be at index 2 is at index 1, and so on. The next iteration is at index 1, which is the element that used to be at index 2. See? The element that used to be at index 1 got skipped. In your case, the whole thing already stops after 1 iteration, because after the first iteration, the size of the array is 1, so there is no index 1 which could be visited in the second iteration."}, {"owner": {"reputation": 554, "user_id": 5511391, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/OYPNO.jpg?s=128&g=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5511391/marco"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1478681193, "post_id": 40502156, "comment_id": 68248828, "body": "@J&#246;rgWMittag Very helpful"}], "answers": [{"comments": [{"owner": {"reputation": 554, "user_id": 5511391, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/OYPNO.jpg?s=128&g=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5511391/marco"}, "edited": false, "score": 0, "creation_date": 1478682150, "post_id": 40502366, "comment_id": 68249294, "body": "Thanks for your help. Very easy to understand."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1478690773, "post_id": 40502366, "comment_id": 68254194, "body": "<code>n.delete(3)</code> ."}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "reply_to_user": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1478691013, "post_id": 40502366, "comment_id": 68254324, "body": "@steenslag Yes - delete is another (and probably better) option."}], "tags": [], "owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "is_accepted": false, "score": 3, "last_activity_date": 1478691183, "last_edit_date": 1478691183, "creation_date": 1478678880, "answer_id": 40502366, "question_id": 40502156, "link": "https://stackoverflow.com/questions/40502156/ruby-can-not-remove-elements-in-array/40502366#40502366", "title": "Ruby can not remove elements in array", "body": "<p>As @steenslag has pointed out, the <code>delete</code> method will do what you want:</p>\n\n<pre><code>n = [1,2,3,3,4,5,6,3,4,5,3,2,1,8]\nn.delete(3)\nn\n</code></pre>\n\n<p>returns: <code>[1, 2, 4, 5, 6, 4, 5, 2, 1, 8]</code></p>\n\n<p>It's worth looking at this alternative to your code:</p>\n\n<pre><code>nums = [3,3]\ndef remove_element(nums, val)\n    nums.each_with_index do |num,index|\n        nums_before_slice = nums.clone\n        if num == val\n            sliced = nums.slice!(index)\n        end\n        puts \"nums: #{nums_before_slice}, index: #{index}, sliced: #{sliced.inspect}\"\n    end\nend\n\nremove_element(nums,3)\n\nputs \"Result: #{nums.inspect}\"\n</code></pre>\n\n<p>The output will be:</p>\n\n<pre><code>nums: [3, 3], index: 0, sliced: 3\nResult: [3]\n</code></pre>\n\n<p>As you can see, the iteration only happens once, because the second element has been removed before it is time to do the second iteration.</p>\n\n<p>Compare that result to this version of the code:</p>\n\n<pre><code>nums = [3,3]\ndef remove_element(nums, val)\n    nums.clone.each_with_index do |num,index|\n        nums_before_slice = nums.clone\n        if num == val\n            sliced = nums.slice!(index)\n        end\n        puts \"nums: #{nums_before_slice}, index: #{index}, sliced: #{sliced.inspect}\"\n    end\nend\n\nremove_element(nums,3)\n\nputs \"Result: #{nums.inspect}\"\n</code></pre>\n\n<p>Which results in:</p>\n\n<pre><code>nums: [3, 3], index: 0, sliced: 3\nnums: [3], index: 1, sliced: nil\nResult: [3]\n</code></pre>\n\n<p>This now runs the iteration over a copy of the original <code>nums</code>, but the result is the same, as on the second iteration - there is no second element to be removed. </p>\n"}, {"comments": [{"owner": {"reputation": 554, "user_id": 5511391, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/OYPNO.jpg?s=128&g=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5511391/marco"}, "edited": false, "score": 0, "creation_date": 1478679122, "post_id": 40502369, "comment_id": 68248044, "body": "Thanks, could you please let me know why iterator stops after deleting the first element"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7135007"}, "reply_to_user": {"reputation": 554, "user_id": 5511391, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/OYPNO.jpg?s=128&g=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5511391/marco"}, "edited": false, "score": 0, "creation_date": 1478679648, "post_id": 40502369, "comment_id": 68248245, "body": "@MarcoSong, I think internally the iterator keep looking for next item to iterate, when you removed the first element, and iterator is on second element but it does not find anything next and returns. check here: <a href=\"http://apidock.com/ruby/Enumerator\" rel=\"nofollow noreferrer\">apidock.com/ruby/Enumerator</a>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7135007"}, "is_accepted": true, "score": 3, "last_activity_date": 1478678892, "creation_date": 1478678892, "answer_id": 40502369, "question_id": 40502156, "link": "https://stackoverflow.com/questions/40502156/ruby-can-not-remove-elements-in-array/40502369#40502369", "title": "Ruby can not remove elements in array", "body": "<p>As rightly commented, you have modified the array while iterating it, due to which it removed the first element, and concluded the iteration. If you put a print statment inside <code>nums.each_with_index</code> loop, you will see it gets printed only once.</p>\n\n<p>A better way to remove an element can be using reject method like following: </p>\n\n<pre><code>nums.reject!{|item| item == 3}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 554, "user_id": 5511391, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/OYPNO.jpg?s=128&g=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5511391/marco"}, "edited": false, "score": 0, "creation_date": 1478684564, "post_id": 40503495, "comment_id": 68250578, "body": "Yes, I saw this solution from leetcode. It is really powerful and clean. But the code not runs very fast, I think the way delete method works might not be very efficient"}, {"owner": {"reputation": 554, "user_id": 5511391, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/OYPNO.jpg?s=128&g=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5511391/marco"}, "edited": false, "score": 0, "creation_date": 1478686428, "post_id": 40503495, "comment_id": 68251681, "body": "Awesome, not slow at all"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "reply_to_user": {"reputation": 554, "user_id": 5511391, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/OYPNO.jpg?s=128&g=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5511391/marco"}, "edited": false, "score": 0, "creation_date": 1478686669, "post_id": 40503495, "comment_id": 68251845, "body": "@MarcoSong I&#39;m glad :) Next time you can check difference between speed of methods by using example in upd :)"}], "tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": false, "score": 2, "last_activity_date": 1478685426, "last_edit_date": 1478685426, "creation_date": 1478683416, "answer_id": 40503495, "question_id": 40502156, "link": "https://stackoverflow.com/questions/40502156/ruby-can-not-remove-elements-in-array/40503495#40503495", "title": "Ruby can not remove elements in array", "body": "<p>What about method <a href=\"http://apidock.com/ruby/Array/delete\" rel=\"nofollow noreferrer\"><code>delete</code></a> ?</p>\n\n<pre><code>nums = [3,3]\ndef remove_element(nums, val)\n    nums.delete(val)\n    nums.length\nend\nremove_element(nums, 3)\n#=&gt; 0\n</code></pre>\n\n<p>or <a href=\"http://apidock.com/ruby/v1_9_3_392/Array/delete_if\" rel=\"nofollow noreferrer\"><code>delete_if</code></a> ?</p>\n\n<pre><code>nums = [3,3]\ndef remove_element(nums, val)\n    nums.delete_if { |element| element == val }\n    nums.length\nend\nremove_element(nums, 3)\n#=&gt; 0\n</code></pre>\n\n<p><strong>UPD</strong></p>\n\n<pre><code>require 'benchmark'\n\narray = Array.new(100000) { rand(5) }\n\nBenchmark.bm do |x|\n  x.report(\"delete: \") { array.delete(5) }\n  x.report(\"delete_if: \") { array.delete_if { |e| e == 5 } }\n  x.report(\"reject: \") { array.reject! { |e| e == 5 } }\nend\n\n#            user       system     total        real\n# delete:    0.000000   0.000000   0.000000 (  0.004230)\n# delete_if: 0.010000   0.000000   0.010000 (  0.006387)\n# reject:    0.010000   0.000000   0.010000 (  0.007543)\n</code></pre>\n"}], "owner": {"reputation": 554, "user_id": 5511391, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/OYPNO.jpg?s=128&g=1", "display_name": "Marco", "link": "https://stackoverflow.com/users/5511391/marco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 40502369, "answer_count": 3, "score": 0, "last_activity_date": 1478691183, "creation_date": 1478677827, "question_id": 40502156, "link": "https://stackoverflow.com/questions/40502156/ruby-can-not-remove-elements-in-array", "title": "Ruby can not remove elements in array", "body": "<p>For the piece of code below.<br>\nI want to remove element which is equals to 3 from an array.\nBut the code only removed the first element. When I debug the code,<br>\nI found that the iterator only loops though the array one time instead of two.<br>\nI am not sure what causes the problem. Any help will be appreciated.</p>\n\n<pre><code>nums = [3,3]\ndef remove_element(nums, val)\n    nums.each_with_index do |num,index|\n        if num == val\n            nums.slice!(index)\n        end\n    end\n    nums.length\nend\n\nremove_element(nums,3)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 747, "user_id": 6477694, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b295a4726fb5094fda67dcb001c90b11?s=128&d=identicon&r=PG&f=1", "display_name": "junk", "link": "https://stackoverflow.com/users/6477694/junk"}, "edited": false, "score": 0, "creation_date": 1478676452, "post_id": 40501770, "comment_id": 68247081, "body": "thank u ,but my password is valid when i create this object , why it is invalid when i update this object?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 747, "user_id": 6477694, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b295a4726fb5094fda67dcb001c90b11?s=128&d=identicon&r=PG&f=1", "display_name": "junk", "link": "https://stackoverflow.com/users/6477694/junk"}, "edited": false, "score": 0, "creation_date": 1478676541, "post_id": 40501770, "comment_id": 68247116, "body": "@junk I have no slightest clue. If Rails says it&#39;s invalid - it is invalid. See the error message it gives you. Maybe the password is weak."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 747, "user_id": 6477694, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b295a4726fb5094fda67dcb001c90b11?s=128&d=identicon&r=PG&f=1", "display_name": "junk", "link": "https://stackoverflow.com/users/6477694/junk"}, "edited": false, "score": 1, "creation_date": 1478678658, "post_id": 40501770, "comment_id": 68247872, "body": "@junk your question was about firing validation and I answered that :)"}, {"owner": {"reputation": 116, "user_id": 809711, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03ace649cf62e06d25e7f1b46e30e264?s=128&d=identicon&r=PG", "display_name": "sssskkk", "link": "https://stackoverflow.com/users/809711/sssskkk"}, "reply_to_user": {"reputation": 747, "user_id": 6477694, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b295a4726fb5094fda67dcb001c90b11?s=128&d=identicon&r=PG&f=1", "display_name": "junk", "link": "https://stackoverflow.com/users/6477694/junk"}, "edited": false, "score": 0, "creation_date": 1478679218, "post_id": 40501770, "comment_id": 68248084, "body": "@junk Password is a virtual attribute so it will be nil unless you set value to the password attribute. When you call <code>model.password</code> it will return nil. If you don&#39;t want password to be validated then do a conditional validation for the password."}, {"owner": {"reputation": 747, "user_id": 6477694, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b295a4726fb5094fda67dcb001c90b11?s=128&d=identicon&r=PG&f=1", "display_name": "junk", "link": "https://stackoverflow.com/users/6477694/junk"}, "edited": false, "score": 0, "creation_date": 1478851223, "post_id": 40501770, "comment_id": 68325667, "body": "@AndreyDeineko yes i have, has_secure_password must skip  validates when update the object."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 747, "user_id": 6477694, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b295a4726fb5094fda67dcb001c90b11?s=128&d=identicon&r=PG&f=1", "display_name": "junk", "link": "https://stackoverflow.com/users/6477694/junk"}, "edited": false, "score": 0, "creation_date": 1478851296, "post_id": 40501770, "comment_id": 68325711, "body": "@junk if my answer was helpful in solving the issue make sure to checkmark it"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 2, "last_activity_date": 1478676204, "last_edit_date": 1478676204, "creation_date": 1478675887, "answer_id": 40501770, "question_id": 40501755, "link": "https://stackoverflow.com/questions/40501755/why-activerecord-validates-all-columns-of-model-when-use-update-attributes-or-sa/40501770#40501770", "title": "Why ActiveRecord validates all columns of Model when use update_attributes or save", "body": "<p>It is expected behaviour.</p>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update\" rel=\"nofollow noreferrer\">ActiveRecord::Persistence#<code>update</code></a>:</p>\n\n<blockquote>\n  <p>Updates the attributes of the model from the passed-in hash and saves\n  the record, all wrapped in a transaction. <strong><em>If the object is invalid,\n  the saving will fail and false will be returned</em></strong>.</p>\n  \n  <p><strong>Also aliased as: <code>update_attributes</code></strong></p>\n</blockquote>\n\n<p>To skip validation one of the options would be using <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Persistence.html#method-i-update_attribute\" rel=\"nofollow noreferrer\"><code>update_attribute</code></a>:</p>\n\n<blockquote>\n  <p>Updates a single attribute and saves the record. This is especially\n  useful for boolean flags on existing records. Also note that</p>\n  \n  <p>Validation is skipped.</p>\n  \n  <p>Callbacks are invoked.</p>\n  \n  <p><code>updated_at</code>/<code>updated_on</code> column is updated if that column is available.</p>\n  \n  <p>Updates all the attributes that are dirty in this object.</p>\n  \n  <p>This method raises an <code>ActiveRecord::ActiveRecordError</code> if the attribute\n  is marked as readonly.</p>\n  \n  <p>Also see <code>update_column</code>.</p>\n</blockquote>\n\n<p>Another option is passing <a href=\"http://guides.rubyonrails.org/v3.2.13/active_record_validations_callbacks.html#skipping-validations\" rel=\"nofollow noreferrer\"><code>validate: false</code></a> as argument.</p>\n"}], "owner": {"reputation": 747, "user_id": 6477694, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b295a4726fb5094fda67dcb001c90b11?s=128&d=identicon&r=PG&f=1", "display_name": "junk", "link": "https://stackoverflow.com/users/6477694/junk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 40501770, "answer_count": 1, "score": 1, "last_activity_date": 1478676303, "creation_date": 1478675828, "last_edit_date": 1478676303, "question_id": 40501755, "link": "https://stackoverflow.com/questions/40501755/why-activerecord-validates-all-columns-of-model-when-use-update-attributes-or-sa", "title": "Why ActiveRecord validates all columns of Model when use update_attributes or save", "body": "<p>I have password validation that its  length must be greater than 6;</p>\n\n<pre><code> has_secure_password\n validates :password, length: {minimum: 6}\n</code></pre>\n\n<p>it works when i save an object;</p>\n\n<p>but it also work when i want to update the object like this:</p>\n\n<pre><code>model.update_attributes(key:value)\n</code></pre>\n\n<p>even i don't want to update password column</p>\n\n<p>is this one of the rails rule?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "edited": false, "score": 0, "creation_date": 1478673461, "post_id": 40501250, "comment_id": 68246041, "body": "Spot on! <code>about 5 hours</code>. But how to get it as <code>5:00:00</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7135007"}, "reply_to_user": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "edited": false, "score": 0, "creation_date": 1478673709, "post_id": 40501250, "comment_id": 68246131, "body": "@Sylar try distance_of_time_in_words((end.to_i - start.to_i) / 1.hour)"}, {"owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "edited": false, "score": 0, "creation_date": 1478673811, "post_id": 40501250, "comment_id": 68246173, "body": "No. I got <code>less than a minute</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7135007"}, "reply_to_user": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "edited": false, "score": 0, "creation_date": 1478674809, "post_id": 40501250, "comment_id": 68246498, "body": "@Sylar <code>(end.to_i - start.to_i) &#47; 1.hour</code> should give you 5.0, you can format using the link I updated in the question."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7135007"}, "is_accepted": false, "score": 0, "last_activity_date": 1478674008, "last_edit_date": 1478674008, "creation_date": 1478673344, "answer_id": 40501250, "question_id": 40501186, "link": "https://stackoverflow.com/questions/40501186/calculate-total-hours-in-rails/40501250#40501250", "title": "Calculate total hours in Rails", "body": "<p>As you need time between start and end, the code you wrote should be:</p>\n\n<pre><code>distance_of_time_in_words(end.to_i - start.to_i)\n</code></pre>\n\n<p>You should be able to format the output using methods described <a href=\"https://hackhands.com/format-datetime-ruby/\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 0, "last_activity_date": 1478673458, "creation_date": 1478673458, "answer_id": 40501273, "question_id": 40501186, "link": "https://stackoverflow.com/questions/40501186/calculate-total-hours-in-rails/40501273#40501273", "title": "Calculate total hours in Rails", "body": "<p><code>end</code> is a keyword. You cannot assign values to it.</p>\n\n<p>Now, getting time difference:</p>\n\n<pre><code>start = \"2000-01-01 07:00:00 UTC\".to_time\nendtime = \"2000-01-01 12:00:00 UTC\".to_time\ndifference = ((endtime - start) / 1.hour)\n# =&gt; 5.0\n</code></pre>\n\n<p>or using helper</p>\n\n<pre><code>distance_of_time_in_words(endtime, start)\n# =&gt; \"about 5 hours\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1478675600, "post_id": 40501568, "comment_id": 68246752, "body": "you like monkeypatching, eh? :)"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1478675733, "post_id": 40501568, "comment_id": 68246817, "body": "@SergioTulentsev not so much, it&#39;s just that I happen to use this one in my current app :)"}, {"owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "edited": false, "score": 0, "creation_date": 1478675822, "post_id": 40501568, "comment_id": 68246841, "body": "Funny thing about all this, Im eating some monkey nuts as I try this out. haha. I&#39;ll confirm."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 4, "last_activity_date": 1478675318, "last_edit_date": 1478675318, "creation_date": 1478674948, "answer_id": 40501568, "question_id": 40501186, "link": "https://stackoverflow.com/questions/40501186/calculate-total-hours-in-rails/40501568#40501568", "title": "Calculate total hours in Rails", "body": "<p>Here is how you'd get the format you want (<code>\"5:00:00\"</code>):</p>\n\n<pre><code># Monkeypatch Integer class to add a new method\nclass Integer\n  def pretty_duration\n    seconds = self % 60\n    minutes = (self / 60) % 60\n    hours   = self / (60 * 60)\n\n    format('%02d:%02d:%02d', hours, minutes, seconds)\n  end\nend\n\n# Get start and end time converted into integers\ntimestart = (Time.now - 5.hours).to_i\ntimeend   = Time.now.to_i\n\n# Use pretty_duration method.\n# P.S. Difference between time objects already gives you a number, but we need Integer\n(timeend - timestart).pretty_duration\n#=&gt; \"05:00:00\"\n</code></pre>\n\n<p>This setup allows you not to be reliant on Rails view helpers (<code>distance_of_time_in_words</code>), because you might be in need to have time formatted somewhere beyond the view.</p>\n\n<blockquote>\n  <p>My question will find an answer to what I'm really trying to achieve\n  (get total of hours worked for the week):</p>\n  \n  <p><code>Foo.pluck(:total_hours_worked).sum(&amp;:to_d)</code> #=> best way? Where\n  <code>:total_hours_worked</code> would be a string, just to make things less\n  complicated.</p>\n</blockquote>\n\n<p>The most efficient way (if you settle with having <code>total_hours_worked</code> as string of correct format) would be summing it up having casted to decimal on the db level:</p>\n\n<pre><code>Foo.sum('total_hours_worked::decimal')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 2609398, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dee195e78e661f190698057e5aa4a21e?s=128&d=identicon&r=PG", "display_name": "Surekha K", "link": "https://stackoverflow.com/users/2609398/surekha-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1478679115, "last_edit_date": 1478679115, "creation_date": 1478675217, "answer_id": 40501618, "question_id": 40501186, "link": "https://stackoverflow.com/questions/40501186/calculate-total-hours-in-rails/40501618#40501618", "title": "Calculate total hours in Rails", "body": "<p>Use the below code to get difference and get the hours in the format as \"5:00:00\"</p>\n\n<pre><code>distance_of_time_in_words(end.to_i - start.to_i).strftime(\"%H%M%S\")\n\nt.strftime(\"%H:%M:%S\") &gt; \"22:49:27\"\n</code></pre>\n"}], "owner": {"reputation": 8519, "user_id": 3581788, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/ghs5V.jpg?s=128&g=1", "display_name": "Sylar", "link": "https://stackoverflow.com/users/3581788/sylar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1046, "favorite_count": 0, "accepted_answer_id": 40501568, "answer_count": 4, "score": 3, "last_activity_date": 1478679799, "creation_date": 1478673049, "last_edit_date": 1495541986, "question_id": 40501186, "link": "https://stackoverflow.com/questions/40501186/calculate-total-hours-in-rails", "title": "Calculate total hours in Rails", "body": "<pre><code>Foo.first = {id: 1, start:2000-01-01 07:00:00 UTC, end: 2000-01-01 12:00:00 UTC, total_hours_worked: nil}\n</code></pre>\n\n<p><strong><code>end</code> is used as an example here.</strong></p>\n\n<p>I've created <code>Foo</code> with <code>t.time</code> for both <code>start</code> and <code>end</code> as I only needed hours/min. I've never worked with Time objects before so bear with me.</p>\n\n<p>I need to get the total hours with minutes with <code>start</code> and <code>end</code>:</p>\n\n<pre><code>start = Foo.find(1).start\nend = Foo.find(1).end\nstart + end #=&gt; errors\nstart.to_i + end.to_i = 1893438000 #=&gt; What's that?\ndistance_of_time_in_words(start.to_i + end.to_i) #=&gt; \"about 60 years\" What?\n</code></pre>\n\n<p>Im expecting <code>5:00:00</code>. Im aware that <code>5:00:00</code> really means 5am but the context will used different.</p>\n\n<p>Doing few searches I've seen <a href=\"https://stackoverflow.com/questions/6784527/calculating-difference-in-time-between-two-time-objects\">this</a>. I'm really trying not to use more gems for this \"should have baked in method\" in Rails/Ruby.</p>\n\n<p>My question will find an answer to what I'm really trying to achieve (get total of hours worked for the week):</p>\n\n<pre><code>Foo.pluck(:total_hours_worked).sum(&amp;:to_d) #=&gt; best way?\n</code></pre>\n\n<p>Where <code>:total_hours_worked</code> would be a string, just to make things less complicated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "edited": false, "score": 0, "creation_date": 1478675040, "post_id": 40501061, "comment_id": 68246577, "body": "Was the information given by me  was helpful?"}, {"owner": {"reputation": 273, "user_id": 6547385, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153614401007371/picture?type=large", "display_name": "Lee Eather", "link": "https://stackoverflow.com/users/6547385/lee-eather"}, "reply_to_user": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "edited": false, "score": 0, "creation_date": 1478678178, "post_id": 40501061, "comment_id": 68247711, "body": "helpful, but not right as far as when I tired it out."}, {"owner": {"reputation": 273, "user_id": 6547385, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153614401007371/picture?type=large", "display_name": "Lee Eather", "link": "https://stackoverflow.com/users/6547385/lee-eather"}, "reply_to_user": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "edited": false, "score": 0, "creation_date": 1478859125, "post_id": 40501061, "comment_id": 68329743, "body": "anyone, have any idea on this?"}, {"owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "edited": false, "score": 0, "creation_date": 1478859907, "post_id": 40501061, "comment_id": 68330236, "body": "are you using devise?"}, {"owner": {"reputation": 273, "user_id": 6547385, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153614401007371/picture?type=large", "display_name": "Lee Eather", "link": "https://stackoverflow.com/users/6547385/lee-eather"}, "reply_to_user": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "edited": false, "score": 0, "creation_date": 1478865279, "post_id": 40501061, "comment_id": 68333276, "body": "I am only following a tutorial <a href=\"https://richonrails.com/articles/facebook-authentication-in-ruby-on-rails\" rel=\"nofollow noreferrer\">richonrails.com/articles/&hellip;</a> and following the Michael Hartl tutorial <a href=\"https://www.railstutorial.org/book\" rel=\"nofollow noreferrer\">railstutorial.org/book</a> but as I am finding out I am having mixed results."}], "answers": [{"comments": [{"owner": {"reputation": 273, "user_id": 6547385, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153614401007371/picture?type=large", "display_name": "Lee Eather", "link": "https://stackoverflow.com/users/6547385/lee-eather"}, "edited": false, "score": 0, "creation_date": 1478676412, "post_id": 40501220, "comment_id": 68247062, "body": "that code is still saying the email cant be blank, password cant be blank.. password cant be blank should atleast be eliminated"}], "tags": [], "owner": {"reputation": 2573, "user_id": 5787849, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0885a24e8501106661f4475a59fe1a0b?s=128&d=identicon&r=PG&f=1", "display_name": "Aniket Shivam Tiwari", "link": "https://stackoverflow.com/users/5787849/aniket-shivam-tiwari"}, "is_accepted": false, "score": 0, "last_activity_date": 1478673235, "creation_date": 1478673235, "answer_id": 40501220, "question_id": 40501061, "link": "https://stackoverflow.com/questions/40501061/skipping-validations-in-rails-how-to-define-each-instance-of-the-class/40501220#40501220", "title": "skipping validations in rails, how to define each instance of the class", "body": "<pre><code> class User &lt; ApplicationRecord\n       attr_accessor :password_confirmation, :skip_password_validation \n       validates :password, :presence =&gt; true ,unless: :skip_password_validation\n  validates_confirmation_of :password, :if =&gt; -&gt;{ password.present? },unless: :skip_password_validation\n\n      def User.digest(string)\n        cost = ActiveModel::SecurePassword.min_cost ? BCrypt::Engine::MIN_COST :\n                                                      BCrypt::Engine.cost\n        BCrypt::Password.create(string, cost: cost)\n    end\n\n      def self.from_omniauth(auth)\n        where(provider: auth.provider, uid: auth.uid).first_or_create do |user|\n          user.provider = auth.provider\n          user.uid = auth.uid\n          user.name = auth.info.name\n          user.oauth_token = auth.credentials.token\n          user.oauth_expires_at = Time.at(auth.credentials.expires_at)\n          user.save!\n        end\n      end\n    end\n\n\n    def create\n       user = User.from_omniauth(env[\"omniauth.auth\"])\n      #######try this #####\n     user.skip_password_validation = true\n ####or try this ####\n    user.from_omniauth.skip_name_validation = true\n\n      unless user.present?\n        user = User.find_by(email: params[:session][:email].downcase)\n         if user &amp;&amp; user.authenticate(params[:session][:password])\n          log_in user\n          redirect_to user\n          # Log the user in and redirect to the user's show page.\n        else\n          # Create an error message.\n          flash.now[:danger] = 'Invalid email/password combination'\n          render 'new'\n        end    \n      else        \n        log_in user\n        redirect_to user\n      end\n    end\n</code></pre>\n"}], "owner": {"reputation": 273, "user_id": 6547385, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10153614401007371/picture?type=large", "display_name": "Lee Eather", "link": "https://stackoverflow.com/users/6547385/lee-eather"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478673235, "creation_date": 1478672405, "question_id": 40501061, "link": "https://stackoverflow.com/questions/40501061/skipping-validations-in-rails-how-to-define-each-instance-of-the-class", "title": "skipping validations in rails, how to define each instance of the class", "body": "<p>I need to add the skip validation methods to my sessions controller but i am unsure what to define omniauth as and basic login as. Ie they are both from class User but in sessions controller do I put </p>\n\n<pre><code>  def create\n   user = User.from_omniauth(env[\"omniauth.auth\"])   \n **user.from_omniauth.skip_name_validation = true**\n   etc etc\n</code></pre>\n\n<p>Then also want to add validate for the methods in the model as put in bold and add that to my sessions controller so both instances of each login are able to be bypassed.</p>\n\n<p>My sessions controller</p>\n\n<pre><code>  def create\n   user = User.from_omniauth(env[\"omniauth.auth\"])\n\n  unless user.present?\n    user = User.find_by(email: params[:session][:email].downcase)\n     if user &amp;&amp; user.authenticate(params[:session][:password])\n      log_in user\n      redirect_to user\n      # Log the user in and redirect to the user's show page.\n    else\n      # Create an error message.\n      flash.now[:danger] = 'Invalid email/password combination'\n      render 'new'\n    end    \n  else        \n    log_in user\n    redirect_to user\n  end\nend\n</code></pre>\n\n<p>My model.rb</p>\n\n<pre><code>class User &lt; ApplicationRecord\n\n  before_save { self.email = email.downcase }\n  validates :name, presence: true, length: { maximum: 50 },\n**unless: :skip_name_validation**\n  VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-.]+\\.[a-z]+\\z/i\n  validates :email, presence: true, length: { maximum: 255 },\n                    format: { with: VALID_EMAIL_REGEX },\n                    uniqueness: { case_sensitive: false },\n                  **unless: :skip_email_validation**\n  has_secure_password\n  validates :password, presence: true, length: { minimum: 6 }, allow_nil:true,\n**unless: :skip_password_validation**\n\n **attr_accessor :skip_name_validation, :skip_email_validation, :skip_password_validation**\n\n **attr_accessor :skip_User, :skip_self**\n\n**validate :User, unless: :skip_User**\n**validate :self, unless: :skip_self**\n\n  def User.digest(string)\n    cost = ActiveModel::SecurePassword.min_cost ? BCrypt::Engine::MIN_COST :\n                                                  BCrypt::Engine.cost\n    BCrypt::Password.create(string, cost: cost)\nend\n\n  def self.from_omniauth(auth)\n    where(provider: auth.provider, uid: auth.uid).first_or_create do |user|\n      user.provider = auth.provider\n      user.uid = auth.uid\n      user.name = auth.info.name\n      user.oauth_token = auth.credentials.token\n      user.oauth_expires_at = Time.at(auth.credentials.expires_at)\n      user.save!\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1478670596, "post_id": 40500713, "comment_id": 68245195, "body": "Did you install bundler too?"}, {"owner": {"reputation": 5494, "user_id": 147637, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/Xr2LR.png?s=128&g=1", "display_name": "Jonesome Reinstate Monica", "link": "https://stackoverflow.com/users/147637/jonesome-reinstate-monica"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1478670630, "post_id": 40500713, "comment_id": 68245203, "body": "Apologies, what is bundler? (ruby is not my party...)"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 1, "creation_date": 1478670750, "post_id": 40500713, "comment_id": 68245244, "body": "Bundler is a Ruby gem package manager. <code>gem install bundler</code>, and then <code>bundle install</code>, and then try to run your script again."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1478670781, "post_id": 40500713, "comment_id": 68245251, "body": "<a href=\"http://bundler.io/\" rel=\"nofollow noreferrer\">bundler.io</a>"}, {"owner": {"reputation": 5494, "user_id": 147637, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/Xr2LR.png?s=128&g=1", "display_name": "Jonesome Reinstate Monica", "link": "https://stackoverflow.com/users/147637/jonesome-reinstate-monica"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1478671413, "post_id": 40500713, "comment_id": 68245418, "body": "@Casper Got it! that solved it!"}], "answers": [{"tags": [], "owner": {"reputation": 412, "user_id": 5947585, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mUkEe.jpg?s=128&g=1", "display_name": "Ishtiaque05", "link": "https://stackoverflow.com/users/5947585/ishtiaque05"}, "is_accepted": true, "score": 2, "last_activity_date": 1478671708, "creation_date": 1478671708, "answer_id": 40500945, "question_id": 40500713, "link": "https://stackoverflow.com/questions/40500713/how-to-get-this-ruby-script-running-tested-on-ruby-2-0-my-system-has-ruby-2-3/40500945#40500945", "title": "How to get this ruby script running? (tested on ruby 2.0, my system has ruby 2.3)", "body": "<p>Go inside your app directory and type: gem install bundler\nIf it does not work try: sudo gem install bundler\n...but generally you can do it without sudo</p>\n\n<p>If it does not fix the case then probably you have multiple ruby version installed.</p>\n\n<p>If you are using RVM, you probably need to run:\nrvm use system\nto set the version of ruby to use.\nSee <a href=\"http://rvm.io/rubies/default\" rel=\"nofollow noreferrer\">http://rvm.io/rubies/default</a>\nruby -v\nwill tell you the version you are currently using.</p>\n"}], "owner": {"reputation": 5494, "user_id": 147637, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/Xr2LR.png?s=128&g=1", "display_name": "Jonesome Reinstate Monica", "link": "https://stackoverflow.com/users/147637/jonesome-reinstate-monica"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 40500945, "answer_count": 1, "score": 0, "last_activity_date": 1478671708, "creation_date": 1478670321, "question_id": 40500713, "link": "https://stackoverflow.com/questions/40500713/how-to-get-this-ruby-script-running-tested-on-ruby-2-0-my-system-has-ruby-2-3", "title": "How to get this ruby script running? (tested on ruby 2.0, my system has ruby 2.3)", "body": "<p>I am not sure how to solve this.</p>\n\n<p>The developer calls for ruby 2.0, and the dante gem.\nMy env has ruby 2.3 and I installed dante.</p>\n\n<p>At run time, it throws as shown below.</p>\n\n<p>How to resolve?</p>\n\n<pre><code>[root@localhost newrelic_redis_plugin-1.0.1]# ./newrelic_redis_agent -d\n/usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- bundler/setup (LoadError)\n        from /usr/local/rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from ./newrelic_redis_agent:4:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord"], "comments": [{"owner": {"reputation": 2889, "user_id": 3079520, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/LfkPU.jpg?s=128&g=1", "display_name": "dnsh", "link": "https://stackoverflow.com/users/3079520/dnsh"}, "edited": false, "score": 0, "creation_date": 1478671274, "post_id": 40500434, "comment_id": 68245375, "body": "Do you really want to check whether subscribers.id == current_user.id. Is this query really useful? <code>where(subscribers: { id: current_user.id })</code> I think you want <code>where(subscribers: { user_id: current_user.id })</code>"}, {"owner": {"reputation": 151, "user_id": 888398, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/25e2f99ea6ae202cd2c5cff6bbf89197?s=128&d=identicon&r=PG", "display_name": "hash12", "link": "https://stackoverflow.com/users/888398/hash12"}, "reply_to_user": {"reputation": 2889, "user_id": 3079520, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/LfkPU.jpg?s=128&g=1", "display_name": "dnsh", "link": "https://stackoverflow.com/users/3079520/dnsh"}, "edited": false, "score": 0, "creation_date": 1478678667, "post_id": 40500434, "comment_id": 68247880, "body": "@dnsh This is actually a has_many :subscribers, through: :subscriptions"}], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 888398, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/25e2f99ea6ae202cd2c5cff6bbf89197?s=128&d=identicon&r=PG", "display_name": "hash12", "link": "https://stackoverflow.com/users/888398/hash12"}, "edited": false, "score": 0, "creation_date": 1478690270, "post_id": 40501337, "comment_id": 68253918, "body": "Thanks, this works well, just wondering if there&#39;s a more performant way than doing 2 separate queries."}], "tags": [], "owner": {"reputation": 655, "user_id": 3440575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a39e2f61465b9973099fd03d380493a?s=128&d=identicon&r=PG&f=1", "display_name": "jamesjaya", "link": "https://stackoverflow.com/users/3440575/jamesjaya"}, "is_accepted": false, "score": 1, "last_activity_date": 1478673800, "creation_date": 1478673800, "answer_id": 40501337, "question_id": 40500434, "link": "https://stackoverflow.com/questions/40500434/how-do-i-preload-an-association-in-rails-based-on-a-condition/40501337#40501337", "title": "How do I preload an association in rails based on a condition", "body": "<p>Try this</p>\n\n<pre><code>Post.includes(:subscribers).where(id: Post.joins(:subscribers).where(subscribers: {id: current_user.id}).select(:id))\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 888398, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/25e2f99ea6ae202cd2c5cff6bbf89197?s=128&d=identicon&r=PG", "display_name": "hash12", "link": "https://stackoverflow.com/users/888398/hash12"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 448, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1478673800, "creation_date": 1478667943, "last_edit_date": 1478673036, "question_id": 40500434, "link": "https://stackoverflow.com/questions/40500434/how-do-i-preload-an-association-in-rails-based-on-a-condition", "title": "How do I preload an association in rails based on a condition", "body": "<p>I am trying to preload an association, say you have <code>Posts</code> and <code>subscribers</code>.</p>\n\n<p>I want to preload all posts where the current user is a <code>subscriber</code>, but at the same time, preload all the <code>subscribers</code> as well.</p>\n\n<p>The query I am using is like this:</p>\n\n<pre><code>Post.includes(:subscribers)\n    .references(:subscribers)\n    .where(subscribers: { id: current_user.id })\n</code></pre>\n\n<p>This gives me the correct list of <code>posts</code> but does not give me all the <code>subscribers</code> for each <code>post</code>, just the current user. Is there a way to get all the <code>subscribers</code> while at the same time scope it to only posts that I can see as a subscriber?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1478669975, "post_id": 40500095, "comment_id": 68245021, "body": "Did you try this answer <a href=\"http://stackoverflow.com/questions/26768608/how-to-render-a-pdf-in-the-browser-that-is-retrieve-via-rails-controller\" title=\"how to render a pdf in the browser that is retrieve via rails controller\">stackoverflow.com/questions/26768608/&hellip;</a>?"}, {"owner": {"reputation": 131, "user_id": 4387204, "user_type": "registered", "accept_rate": 31, "profile_image": "https://graph.facebook.com/1053182142/picture?type=large", "display_name": "Izzuddin Cheras", "link": "https://stackoverflow.com/users/4387204/izzuddin-cheras"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1479012466, "post_id": 40500095, "comment_id": 68377347, "body": "tried already, but still got the binary"}], "owner": {"reputation": 131, "user_id": 4387204, "user_type": "registered", "accept_rate": 31, "profile_image": "https://graph.facebook.com/1053182142/picture?type=large", "display_name": "Izzuddin Cheras", "link": "https://stackoverflow.com/users/4387204/izzuddin-cheras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1529999308, "creation_date": 1478664736, "last_edit_date": 1529999308, "question_id": 40500095, "link": "https://stackoverflow.com/questions/40500095/rails-pdf-suddenly-render-encrypted-text-instead-of-function-to-download-pdf", "title": "rails pdf suddenly render encrypted text instead of function to download pdf", "body": "<p>I have an app that have the function to download pdf. It was working all fine, but after several commit my pdf function just render encrypted text. \nthe function that trigger the pdf link<a href=\"https://i.stack.imgur.com/tMz0q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tMz0q.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>  def print_pdf\n    airwaybill = Airwaybill.find(params[:airwaybill_id])\n    pdf = InvoicePdf.new(airwaybill, current_user)\n    puts \"#{}\"\n    send_data pdf.render, filename: \"Airwaybill(#{airwaybill.airwaybill_no}).pdf\" , type: 'application.pdf'\n  end\n</code></pre>\n\n<p>what could be the most common problem for this issue?</p>\n"}, {"tags": ["ruby", "algorithm"], "answers": [{"tags": [], "owner": {"reputation": 65718, "user_id": 844416, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e39c2364935265593d76247ddc6d07c?s=128&d=identicon&r=PG", "display_name": "MBo", "link": "https://stackoverflow.com/users/844416/mbo"}, "is_accepted": true, "score": 1, "last_activity_date": 1478666727, "last_edit_date": 1478666727, "creation_date": 1478665602, "answer_id": 40500173, "question_id": 40499960, "link": "https://stackoverflow.com/questions/40499960/is-this-the-correct-way-to-calculate-lat-lon-in-all-directions-nsew/40500173#40500173", "title": "Is this the correct way to calculate lat/lon in all directions (NSEW)?", "body": "<p>Formula for meridians (NS) is right, but for parallels is wrong. It is because meridian length is near constant (~40000 km), but parallel length (and km/degree ratio) depends on latitude. 111 km east is equal to 1 degree at equator, and to 1.41 degrees at 45 latitude parallel.</p>\n\n<p>So you have to account for coefficient <code>Cos(lat)</code> like this (don't know ruby syntax for cos function)</p>\n\n<pre><code>lon = (@kilometers/(Math::Cos(lat_in_radians) * EARTH_RAD * (Math::PI/2))) * 90 + lon\n</code></pre>\n\n<p>Don't forget about transit through date change line (180 degrees) for EW, and through equator for NS.</p>\n\n<p>note that <code>90 / (Math::PI/2)</code> is coefficient to translate radians to degrees</p>\n"}], "owner": {"reputation": 1846, "user_id": 2816949, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LPiwD.jpg?s=128&g=1", "display_name": "theartofbeing", "link": "https://stackoverflow.com/users/2816949/theartofbeing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 40500173, "answer_count": 1, "score": 0, "last_activity_date": 1478666727, "creation_date": 1478663411, "question_id": 40499960, "link": "https://stackoverflow.com/questions/40499960/is-this-the-correct-way-to-calculate-lat-lon-in-all-directions-nsew", "title": "Is this the correct way to calculate lat/lon in all directions (NSEW)?", "body": "<p>I've tested this in google maps, and it seems legit. But I'm not quite sure I understand the formula correctly. Does East and West need to be <code>* 180</code> instead of <code>* 90</code> ?</p>\n\n<pre><code>EARTH_RAD = 6378\n...\ndef calculate_distance(lat, lon, direction)\n  case direction\n  when :north\n    lat = (@kilometers/(EARTH_RAD * (Math::PI/2))) * 90 + lat\n    [lat, lon]\n  when :south\n    lat = (lat - (@kilometers/(EARTH_RAD * (Math::PI/2))) * 90)\n    [lat, lon]\n  when :east\n    lon = (@kilometers/(EARTH_RAD * (Math::PI/2))) * 90 + lon\n    [lat, lon]\n  when :west\n    lon = (lon - (@kilometers/(EARTH_RAD * (Math::PI/2))) * 90)\n    [lat, lon]\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "syntax-error"], "answers": [{"tags": [], "owner": {"reputation": 1912, "user_id": 886745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sYeiP.jpg?s=128&g=1", "display_name": "rebagliatte", "link": "https://stackoverflow.com/users/886745/rebagliatte"}, "is_accepted": true, "score": 1, "last_activity_date": 1478662220, "creation_date": 1478662220, "answer_id": 40499849, "question_id": 40499829, "link": "https://stackoverflow.com/questions/40499829/rails-before-action-syntax-error/40499849#40499849", "title": "Rails before action syntax error", "body": "<p>You should have a separate line for each before action:</p>\n\n<pre><code>before_action :set_article, only: [:show, :edit, :update, :destroy]\nbefore_action :classify_article, only: [:create]\n</code></pre>\n"}], "owner": {"reputation": 385, "user_id": 2968505, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ef25ecd148d5d18fa607f116ca2f1083?s=128&d=identicon&r=PG&f=1", "display_name": "user2968505", "link": "https://stackoverflow.com/users/2968505/user2968505"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 40499849, "answer_count": 1, "score": -1, "last_activity_date": 1478664574, "creation_date": 1478662034, "last_edit_date": 1478664574, "question_id": 40499829, "link": "https://stackoverflow.com/questions/40499829/rails-before-action-syntax-error", "title": "Rails before action syntax error", "body": "<pre><code>  before_action :set_article, only: [:show, :edit, :update, :destroy], :classify_article, only: [:create]\n</code></pre>\n\n<p>Why am i getting a syntax error here, it happened after after i added the classify_article function </p>\n"}, {"tags": ["ruby", "methods", "command-line", "optionparser"], "answers": [{"comments": [{"owner": {"reputation": 181, "user_id": 4867470, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fc20f88700f4c0b95393bd3848396504?s=128&d=identicon&r=PG&f=1", "display_name": "yukimoda", "link": "https://stackoverflow.com/users/4867470/yukimoda"}, "edited": false, "score": 0, "creation_date": 1478656988, "post_id": 40499043, "comment_id": 68242526, "body": "Oh, I get it now! Thank you so much!"}], "tags": [], "owner": {"reputation": 3538, "user_id": 693491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f30193798802607aa97082c4529fcc28?s=128&d=identicon&r=PG", "display_name": "Tyler Ferraro", "link": "https://stackoverflow.com/users/693491/tyler-ferraro"}, "is_accepted": true, "score": 2, "last_activity_date": 1478654587, "creation_date": 1478654587, "answer_id": 40499043, "question_id": 40498931, "link": "https://stackoverflow.com/questions/40498931/use-a-command-line-option-to-call-a-method/40499043#40499043", "title": "Use a command line option to call a method", "body": "<p>There are a lot of ways to do this, depending on the use case. The below code is taken from the Ruby <a href=\"https://docs.ruby-lang.org/en/2.1.0/OptionParser.html\" rel=\"nofollow noreferrer\">docs</a> with the extra method added.</p>\n\n<p>Realistically you'd probably want a class that handles the different options and encapsulates the method instead of having them at the file scope.</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire 'optparse'\n\noptions = {}\nOptionParser.new do |opts|\n  opts.banner = \"Usage: example.rb [options]\"\n\n  opts.on(\"-b\", \"Run method 'b'\") do |v|\n    options[:b] = true\n  end\nend.parse!\n\ndef b\n  puts \"Hello Brian\"\nend\n\nif options[:b]\n  b\nend\n</code></pre>\n\n<p>I've also added a shebang at the top that will automatically call ruby. As long as your script file is executable you can call it directly (ie. <code>./mine.rb -b</code>).</p>\n"}], "owner": {"reputation": 181, "user_id": 4867470, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/fc20f88700f4c0b95393bd3848396504?s=128&d=identicon&r=PG&f=1", "display_name": "yukimoda", "link": "https://stackoverflow.com/users/4867470/yukimoda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 0, "accepted_answer_id": 40499043, "answer_count": 1, "score": 1, "last_activity_date": 1478654587, "creation_date": 1478653633, "last_edit_date": 1495540869, "question_id": 40498931, "link": "https://stackoverflow.com/questions/40498931/use-a-command-line-option-to-call-a-method", "title": "Use a command line option to call a method", "body": "<p>So I guess this  is kind of related to my last <a href=\"https://stackoverflow.com/questions/40478655/ruby-calling-a-method-based-on-an-elseif-statement\">question</a>, but I was wondering if there was a way to call a method by using a command line option. Say you had a method like this:</p>\n\n<pre><code>def b\nputs \"Hello brian\"\nend\n</code></pre>\n\n<p>is there a way to write something like this: </p>\n\n<pre><code>ruby mine.rb -b \n</code></pre>\n\n<p>and get this</p>\n\n<pre><code>Hello brian\n</code></pre>\n\n<p>I already tried looking for this online and discovered OptionParser but I have yet to discover anything involving the OptionParser calling a method previously created.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 532, "user_id": 2256370, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0385d51ad69470a8cd4d2f5fc63c7bc6?s=128&d=identicon&r=PG", "display_name": "Amirol Ahmad", "link": "https://stackoverflow.com/users/2256370/amirol-ahmad"}, "edited": false, "score": 0, "creation_date": 1478653717, "post_id": 40498885, "comment_id": 68241870, "body": "You are right.. this method is called before_save callback. Thanks alot Tyler. your code working great.."}], "tags": [], "owner": {"reputation": 3538, "user_id": 693491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f30193798802607aa97082c4529fcc28?s=128&d=identicon&r=PG", "display_name": "Tyler Ferraro", "link": "https://stackoverflow.com/users/693491/tyler-ferraro"}, "is_accepted": true, "score": 1, "last_activity_date": 1478653256, "creation_date": 1478653256, "answer_id": 40498885, "question_id": 40498683, "link": "https://stackoverflow.com/questions/40498683/ruby-update-all-same-object-data-in-hash-array-for-json-parse/40498885#40498885", "title": "Ruby update all same object data in hash array for JSON.parse", "body": "<p>Just to be clear, you're trying to update both the Main-Hall-Staff password and the Main-Hall-Guest password (all passwords) from your record to be the encrypted version of themselves? I'm assuming this method is called in a before_save callback of some sort? If you show more code related to the model I can give you more details.</p>\n\n<pre><code>def encrypt_pass\n  # Changed the name to devises, always use easy to understand naming\n  # Also rescuing from a JSON parse error, this isnt always recommended\n  # as it hides other errors that might be unrelated to parsing\n  devices = JSON.parse(self.value) rescue []\n  crypt = ActiveSupport::MessageEncryptor.new(ENV[\"SECRET_KEY_BASE\"])\n\n  devices.each do |device|\n    # get the actual password\n    password = device['password']\n\n    # encrypt the password\n    encrypted_pass = crypt.encrypt_and_sign(password)\n\n    # Save the encrypted password\n    device['password'] = encrypted_pass\n  end\n\n  self.value = devices.to_json\nend\n</code></pre>\n\n<p>Hopefully you have some logic surrounding when this method is called as you dont want to encrypt an already encrypted password.</p>\n"}], "owner": {"reputation": 532, "user_id": 2256370, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0385d51ad69470a8cd4d2f5fc63c7bc6?s=128&d=identicon&r=PG", "display_name": "Amirol Ahmad", "link": "https://stackoverflow.com/users/2256370/amirol-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 40498885, "answer_count": 1, "score": 0, "last_activity_date": 1478653256, "creation_date": 1478651512, "question_id": 40498683, "link": "https://stackoverflow.com/questions/40498683/ruby-update-all-same-object-data-in-hash-array-for-json-parse", "title": "Ruby update all same object data in hash array for JSON.parse", "body": "<p>So <code>a = first</code> is</p>\n\n<pre><code>=&gt; &lt;Ng::EntityConfiguration id: 15903, entity_id: 1, entity_type: \"Ng::Company\", key: \"wpa2.psk\", value: \"[{\"ssid\":\"Main-Hall-Staff\",\"password\":\"abc123\",\"dhcp\":\"Enabled\"},{\"ssid\":\"Main-Hall-Guest\",\"password\":\"def456\",\"dhcp\":\"Disabled\"}]\", created_at: \"2016-11-08 11:03:51\", updated_at: \"2016-11-08 11:03:51\", name: \"WIFI/Main Hall\"&gt;\n</code></pre>\n\n<p>I have <code>a.value</code> which is will return:</p>\n\n<pre><code>\"[\n  {\\\"ssid\\\":\\\"Main-Hall-Staff\\\",\\\"password\\\":\\\"abc123\\\"},\n  {\\\"ssid\\\":\\\"Main-Hall-Guest\\\",\\\"password\\\":\\\"def456\\\"}\n]\"\n</code></pre>\n\n<p>My question is, how to update both password value and save it?</p>\n\n<pre><code>new_pass1 = 'xyz123'\nnew_pass2 = 'xyz321'\n</code></pre>\n\n<p>I have tried code (below) but this will only update first password if i only have one hash_array.</p>\n\n<p>Here is my full code</p>\n\n<pre><code>def encrypt_pass\n  # get the actual password\n  parse = JSON.parse(self.value)\n  get_pass = parse.last['password']\n\n  # encrypt the password\n  crypt = ActiveSupport::MessageEncryptor.new(ENV[\"SECRET_KEY_BASE\"])\n  encrypted = crypt.encrypt_and_sign(get_pass)\n\n  # save the new encrypted password\n  parse.first['password'] = encrypted\n  encrypt_pass = parse.to_json\n  self.value = encrypt_pass\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "edited": false, "score": 0, "creation_date": 1478651010, "post_id": 40498527, "comment_id": 68241209, "body": "user.like.count gives an error because user isnt set to anything.  User.first.like.count should give you the number of likes for the first user.  Not really sure what you mean about it not being the same for everyone. Current_user would be the current logged in user when using devise.   Also your show action instance variable should probably be singular as youre only finding one user based on the param."}, {"owner": {"reputation": 383, "user_id": 6273382, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10156818603950237/picture?type=large", "display_name": "Omar", "link": "https://stackoverflow.com/users/6273382/omar"}, "reply_to_user": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "edited": false, "score": 0, "creation_date": 1478651257, "post_id": 40498527, "comment_id": 68241260, "body": "Thank you so much for your answer. What I mean was - with &quot;Current_user&quot; its only showing the ranking for the current user and applying it to all the other users because there  is a loop. Its in the index.html.erb file that I just put in the question. So what I&#39;m looking for is how can show the rankings for each user."}, {"owner": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "edited": false, "score": 0, "creation_date": 1478658422, "post_id": 40498527, "comment_id": 68242808, "body": "Id just loop through and not use a partial probably.  Im pretty sure you can just pass <code>locals: {user: user}</code> to use the variable from the loop and not the instance variable from your controller.  You could also change it to use a collection like this <code>&lt;%= render partial: &quot;product&quot;, collection: @products %&gt;</code>  instead of the loop.  checkout the docs on it for a bit more details <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 383, "user_id": 6273382, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10156818603950237/picture?type=large", "display_name": "Omar", "link": "https://stackoverflow.com/users/6273382/omar"}, "reply_to_user": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "edited": false, "score": 0, "creation_date": 1478659463, "post_id": 40498527, "comment_id": 68242987, "body": "It works amazing by passing locals: {user: user} Thank you so much :)"}], "answers": [{"tags": [], "owner": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "is_accepted": true, "score": 0, "last_activity_date": 1478688448, "creation_date": 1478688448, "answer_id": 40505115, "question_id": 40498527, "link": "https://stackoverflow.com/questions/40498527/setting-up-a-like-counter-on-rails-from-scratch/40505115#40505115", "title": "Setting up a Like Counter on Rails from scratch", "body": "<p>Moving comment to answer.</p>\n\n<p>Id just loop through and not use a partial probably. But im  pretty sure you can just pass <code>locals: {user: user}</code> to use the variable from the loop and not the instance variable from your controller. checkout the docs on it for a bit more details <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials</a> </p>\n"}], "owner": {"reputation": 383, "user_id": 6273382, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10156818603950237/picture?type=large", "display_name": "Omar", "link": "https://stackoverflow.com/users/6273382/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 219, "favorite_count": 0, "accepted_answer_id": 40505115, "answer_count": 1, "score": 1, "last_activity_date": 1478688448, "creation_date": 1478650232, "last_edit_date": 1478651313, "question_id": 40498527, "link": "https://stackoverflow.com/questions/40498527/setting-up-a-like-counter-on-rails-from-scratch", "title": "Setting up a Like Counter on Rails from scratch", "body": "<p>Was trying to set up a ranking score for my users depending on their like counts.</p>\n\n<p>I was able to get this to work for <strong>current_user.like.count</strong> but for some reason when I want it to be for <strong>user.like.count</strong> [so that its not the same one for everyone] my app crashes and gives me this error message: \"Undefined method `likes' for nil:NilClass\" I have put all my relevant code below as well as my github for this. Any help would be amazing.</p>\n\n<p>Github Url: <a href=\"https://github.com/OmarZV/TY2\" rel=\"nofollow noreferrer\">https://github.com/OmarZV/TY2</a></p>\n\n<p><strong>_rankings.html.erb</strong></p>\n\n<pre><code>&lt;% if current_user.likes.count &gt;3 %&gt;\nA Ranking\n&lt;% elsif %&gt;\n&lt;% current_user.likes.count == 2%&gt;\nB Ranking\n&lt;% else %&gt;\nC Ranking\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>users_controller.rb</strong></p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  before_action :authenticate_user!\n\n  def index\n    @users = User.all\n  end\n\n  def show\n    @users = User.find(params[:id])\n  end\nend\n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n  devise_for :users, :controllers =&gt; { :omniauth_callbacks =&gt; \"users/omniauth_callbacks\" }\n  resources :users, :controllers =&gt; \"users_controller.rb\"\n  resources :users do\n    resource :ranking, module: :users\n  end\n  resources :posts do\n    resource :like, module: :posts\n  end\n  root to: \"posts#index\"\nend\n</code></pre>\n\n<p><strong>Index.html.erb</strong></p>\n\n<pre><code>&lt;h1 class=\"page-header\"&gt;Platform Users&lt;/h1&gt;\n&lt;% @users.each do |user| %&gt;\n&lt;strong&gt;&lt;%=  user.username %&gt;&lt;/strong&gt;\n&lt;div class=\"round-image-50\"&gt;&lt;%= image_tag(user.avatar.url(:thumb)) %&gt;&lt;/div&gt;\ndiv id=\"user_&lt;%= @user_id%&gt;_rankings\"&gt;\n&lt;%= render partial: \"rankings\", locals: {user: @user} %&gt;\n&lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["c", "ruby", "neural-network", "fann"], "answers": [{"comments": [{"owner": {"reputation": 4312, "user_id": 3880254, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/13dffa84d85f3ed70e7156867822246d?s=128&d=identicon&r=PG&f=1", "display_name": "InQusitive", "link": "https://stackoverflow.com/users/3880254/inqusitive"}, "edited": false, "score": 0, "creation_date": 1478647587, "post_id": 40498128, "comment_id": 68240354, "body": "But I have clearly defined number of inputs 2 and output 1, just that the hidden layers contains 3 neurons, how does it affect?"}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "reply_to_user": {"reputation": 4312, "user_id": 3880254, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/13dffa84d85f3ed70e7156867822246d?s=128&d=identicon&r=PG&f=1", "display_name": "InQusitive", "link": "https://stackoverflow.com/users/3880254/inqusitive"}, "edited": false, "score": 1, "creation_date": 1478647755, "post_id": 40498128, "comment_id": 68240404, "body": "@InQusitive: Read the documentation, the params are <code>(num_of_layers,...)</code> where each param after the first is the size of a layer. You have asked for 4 layer network, and only provided data for 3. Just because you call the variable <code>num_output</code> does not make it the last layer required by the constructor."}], "tags": [], "owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "is_accepted": true, "score": 3, "last_activity_date": 1478647947, "last_edit_date": 1478647947, "creation_date": 1478647448, "answer_id": 40498128, "question_id": 40498055, "link": "https://stackoverflow.com/questions/40498055/fann-error-20-the-number-of-output-neurons-in-the-ann-4196752-and-data-1-do/40498128#40498128", "title": "FANN Error 20: The number of output neurons in the ann (4196752) and data (1) don&#39;t match Epochs", "body": "<p>Here, using <a href=\"http://leenissen.dk/fann/html/files/fann-h.html#fann_create_standard\" rel=\"nofollow noreferrer\">fann_create_standard</a>, the function signature is <code>fann_create_standard(num_layers, layer1_size, layer2_size, layer3_size...)</code>, whilst you are trying to use it differently:</p>\n\n<pre><code>struct fann *ann = fann_create_standard(num_layers, num_input,\n        num_neurons_hidden, num_output);\n</code></pre>\n\n<p>you construct a network with 4 layers, but only provide data for 3. The 4196752 neurons in the output layer are likely coming from an undefined value.</p>\n"}], "owner": {"reputation": 4312, "user_id": 3880254, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/13dffa84d85f3ed70e7156867822246d?s=128&d=identicon&r=PG&f=1", "display_name": "InQusitive", "link": "https://stackoverflow.com/users/3880254/inqusitive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 309, "favorite_count": 0, "accepted_answer_id": 40498128, "answer_count": 1, "score": 0, "last_activity_date": 1478647947, "creation_date": 1478647046, "last_edit_date": 1478647376, "question_id": 40498055, "link": "https://stackoverflow.com/questions/40498055/fann-error-20-the-number-of-output-neurons-in-the-ann-4196752-and-data-1-do", "title": "FANN Error 20: The number of output neurons in the ann (4196752) and data (1) don&#39;t match Epochs", "body": "<p>This is a litle modified sample program I took from FANN website. </p>\n\n<p>The equation I created is c = pow(a,2) + b. </p>\n\n<p><strong>Train.c</strong></p>\n\n<pre><code>#include \"fann.h\"\n\nint main()\n{\n    const unsigned int num_input = 2;\n    const unsigned int num_output = 1;\n    const unsigned int num_layers = 4;\n    const unsigned int num_neurons_hidden = 3;\n    const float desired_error = (const float) 0.001;\n    const unsigned int max_epochs = 500000;\n    const unsigned int epochs_between_reports = 1000;\n\n    struct fann *ann = fann_create_standard(num_layers, num_input,\n        num_neurons_hidden, num_output);\n\n    fann_set_activation_function_hidden(ann, FANN_SIGMOID_SYMMETRIC);\n    fann_set_activation_function_output(ann, FANN_SIGMOID_SYMMETRIC);\n\n    fann_train_on_file(ann, \"sample.data\", max_epochs,\n        epochs_between_reports, desired_error);\n\n    fann_save(ann, \"sample.net\");\n\n    fann_destroy(ann);\n\n    return 0;\n}\n</code></pre>\n\n<p><strong>Result.c</strong></p>\n\n<pre><code>#include &lt;stdio.h&gt;\n#include \"floatfann.h\"\n\nint main()\n{\n    fann_type *calc_out;\n    fann_type input[2];\n\n    struct fann *ann = fann_create_from_file(\"sample.net\");\n\n    input[0] = 1;\n    input[1] = 1;\n    calc_out = fann_run(ann, input);\n\n    printf(\"sample test (%f,%f) -&gt; %f\\n\", input[0], input[1], calc_out[0]);\n\n    fann_destroy(ann);\n    return 0;\n}\n</code></pre>\n\n<p>I created my own dataset</p>\n\n<p>dataset.rb</p>\n\n<pre><code>f= File.open(\"sample.data\",\"w\")\n\nf.write(\"100 2 1\\n\")\n\ni=0\nwhile i&lt;100 do \n    first = rand(0..100)\n    second = rand(0..100)\n    third = first ** 2 + second\n    string1 = \"#{first} #{second}\\n\"\n    string2 = \"#{third}\\n\"\n    f.write(string1)\n    f.write(string2)\n    i=i+1\nend\n\nf.close\n</code></pre>\n\n<p><strong>sample.data</strong></p>\n\n<pre><code>100 2 1\n95  27\n9052\n63  9 \n3978\n38  53\n1497\n31  84\n1045\n28  56\n840\n95  80\n9105\n10  19\n...\n...\n</code></pre>\n\n<p>sample data first line gives number of samples, number of inputs and last number of outputs.</p>\n\n<p>But I am getting an error \n<code>FANN Error 20: The number of output neurons in the ann (4196752) and data (1) don't match Epochs</code></p>\n\n<p>What's the issue here? How does it calculate <code>4196752</code> neurons?</p>\n"}, {"tags": ["ruby", "bash", "command-line-interface", "minitest"], "answers": [{"tags": [], "owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "is_accepted": true, "score": 0, "last_activity_date": 1480138999, "last_edit_date": 1480138999, "creation_date": 1479070273, "answer_id": 40578678, "question_id": 40497676, "link": "https://stackoverflow.com/questions/40497676/hello-world-minitest-cli-example/40578678#40578678", "title": "Hello world minitest cli example", "body": "<p>You can run minitest tests just like ruby files. Just install minitest, write a test, and run like you would a ruby script:</p>\n\n<p>install minitest:</p>\n\n<pre><code>\u279c  ~/D/w/t/hello-minitest  gem install minitest\nSuccessfully installed minitest-5.9.1\nParsing documentation for minitest-5.9.1\nDone installing documentation for minitest after 0 seconds\n1 gem installed\n\u279c  ~/D/w/t/hello-minitest  tree .\n.\n\u251c\u2500\u2500 app.rb\n\u251c\u2500\u2500 foo.rb\n\u2514\u2500\u2500 test\n    \u2514\u2500\u2500 test_foo.rb\n</code></pre>\n\n<p>write foo.rb:</p>\n\n<pre><code>class Foo\n  def bar\n    p \"Hello world!\"\n  end\nend\n</code></pre>\n\n<p>write test:</p>\n\n<pre><code>require 'minitest/autorun'\nrequire_relative '../foo.rb'\n\nclass TestFoo &lt; Minitest::Test\n  def test_it_works\n    assert_equal 1, 1\n  end\n\n  def test_bar\n    assert_equal Foo.new.bar, \"Hello world!\"\n  end\nend\n</code></pre>\n\n<p>run test like ruby script:</p>\n\n<pre><code>\u279c  ~/D/w/t/hello-minitest  ruby test/test_foo.rb\nRun options: --seed 56777\n\n# Running:\n\n\"Hello world!\"\n..\n\nFinished in 0.001085s, 1843.3179 runs/s, 1843.3179 assertions/s.\n\n2 runs, 2 assertions, 0 failures, 0 errors, 0 skips\n</code></pre>\n"}], "owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 233, "favorite_count": 0, "accepted_answer_id": 40578678, "answer_count": 1, "score": -1, "last_activity_date": 1480138999, "creation_date": 1478644885, "last_edit_date": 1479070305, "question_id": 40497676, "link": "https://stackoverflow.com/questions/40497676/hello-world-minitest-cli-example", "title": "Hello world minitest cli example", "body": "<p>Given the following directory structure:</p>\n\n<pre><code>\u279c  ~/D/w/t/foo  tree .\n.\n\u251c\u2500\u2500 app.rb\n\u251c\u2500\u2500 foo.rb\n\u2514\u2500\u2500 test\n    \u2514\u2500\u2500 test_foo.rb\n\n1 directory, 3 files\n</code></pre>\n\n<p>If I run <code>app.rb</code> I get the classic \"Hello world!\" response.</p>\n\n<pre><code>\u279c  ~/D/w/t/foo  ruby app.rb\n\"Hello world!\"\n</code></pre>\n\n<p>Taking a look inside <code>app.rb</code> and <code>foo.rb</code>:</p>\n\n<pre><code>\u279c  ~/D/w/t/foo  cat app.rb\nrequire_relative 'foo.rb'\n\nFoo.new.bar\n\n\u279c  ~/D/w/t/foo  cat foo.rb\nclass Foo\n  def bar\n    p \"Hello world!\"\n  end\nend\n</code></pre>\n\n<p>How would I would I test my <code>Foo</code> class with minitest from the commandline?</p>\n\n<p>I know that it has something to do with the <code>ruby -Ilib</code> command but I'm not sure what the exact switches and flags are, and also I'm not sure what to put inside of <code>test_foo.rb</code>. I'm also not sure if my directory stucture is set up right. Maybe <code>foo.rb</code> needs to go inside of a <code>lib</code> directory?</p>\n\n<p>Would love you guidance :)</p>\n"}, {"tags": ["ruby", "qt", "macos-sierra", "capybara-webkit"], "comments": [{"owner": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 0, "creation_date": 1478644947, "post_id": 40497404, "comment_id": 68239485, "body": "how did you install QT?"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1478650318, "post_id": 40497404, "comment_id": 68241057, "body": "you should be running <code>PATH=&#47;Users&#47;caren&#47;Qt5.5.1&#47;5.5&#47;clang_64&#47;bin:$PATH gem install capybara-webkit</code>  not <code>gem install capybara-webkit PATH=&#47;Users&#47;caren&#47;Qt5.5.1&#47;5.5&#47;clang_64&#47;bin:$PATH gem install capybara-webkit</code> and when/if that fails look at the mkmf.log mentioned in the error message to see what errors are occurring"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1478656223, "post_id": 40497404, "comment_id": 68242380, "body": "<a href=\"http://superuser.com/questions/256232/how-can-i-get-qmake-on-mac-os-x\" title=\"how can i get qmake on mac os x\">superuser.com/questions/256232/how-can-i-get-qmake-on-mac-os&zwnj;&#8203;-x</a>"}, {"owner": {"reputation": 138, "user_id": 5041339, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153511102437009/picture?type=large", "display_name": "Caren Garc&#237;a", "link": "https://stackoverflow.com/users/5041339/caren-garc%c3%ada"}, "reply_to_user": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 0, "creation_date": 1478709260, "post_id": 40497404, "comment_id": 68265514, "body": "@fabersky I installed it from the Qt website."}], "answers": [{"comments": [{"owner": {"reputation": 138, "user_id": 5041339, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153511102437009/picture?type=large", "display_name": "Caren Garc&#237;a", "link": "https://stackoverflow.com/users/5041339/caren-garc%c3%ada"}, "edited": false, "score": 1, "creation_date": 1481172917, "post_id": 40910219, "comment_id": 69271385, "body": "Thanks Mike! Tried your steps and worked out for me. :)"}, {"owner": {"reputation": 9301, "user_id": 60072, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/771f52b5b1d9889ded1391e182b44dbb?s=128&d=identicon&r=PG", "display_name": "Autodidact", "link": "https://stackoverflow.com/users/60072/autodidact"}, "edited": false, "score": 0, "creation_date": 1482827886, "post_id": 40910219, "comment_id": 69885606, "body": "Thanks mate! Took a long time to compile/make but did worked out. Many many Kudos! :)"}, {"owner": {"reputation": 954, "user_id": 4988404, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh3.googleusercontent.com/-huzUqV3f-f4/AAAAAAAAAAI/AAAAAAAAAI0/_GhTu0suTXM/photo.jpg?sz=128", "display_name": "LuAndre", "link": "https://stackoverflow.com/users/4988404/luandre"}, "edited": false, "score": 0, "creation_date": 1503594713, "post_id": 40910219, "comment_id": 78693394, "body": "no kidding about that first command taking a very long time.  all 3 command worked like a charmed! thanks mate!!"}, {"owner": {"reputation": 3380, "user_id": 3757435, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/m8r2q.png?s=128&g=1", "display_name": "Mugur &#39;Bud&#39; Chirica", "link": "https://stackoverflow.com/users/3757435/mugur-bud-chirica"}, "edited": false, "score": 0, "creation_date": 1529497715, "post_id": 40910219, "comment_id": 88894021, "body": "Just a side note that this will break on brew upgrade."}], "tags": [], "owner": {"reputation": 969, "user_id": 2709544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d3301458cc3487b5434f6fa1b487367?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2709544/mike"}, "is_accepted": true, "score": 12, "last_activity_date": 1480593886, "creation_date": 1480593886, "answer_id": 40910219, "question_id": 40497404, "link": "https://stackoverflow.com/questions/40497404/unable-to-install-capybara-webkit-with-os-x-sierra/40910219#40910219", "title": "Unable to install capybara-webkit with OS X Sierra", "body": "<p>The following did the trick for me (using Homebrew):</p>\n\n<pre><code>brew install qt5 --with-qtwebkit\nbrew link --force qt5\ngem install capybara-webkit\n</code></pre>\n\n<p>Note: It will take a while to install the first step, and you'll need to have Xcode installed.</p>\n"}, {"tags": [], "owner": {"reputation": 759, "user_id": 4352003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I0GKg.jpg?s=128&g=1", "display_name": "Yury Matusevich", "link": "https://stackoverflow.com/users/4352003/yury-matusevich"}, "is_accepted": false, "score": 0, "last_activity_date": 1542356722, "creation_date": 1542356722, "answer_id": 53333982, "question_id": 40497404, "link": "https://stackoverflow.com/questions/40497404/unable-to-install-capybara-webkit-with-os-x-sierra/53333982#53333982", "title": "Unable to install capybara-webkit with OS X Sierra", "body": "<p>I hope it will help someone.</p>\n\n<pre><code>brew install qt5 --with-qtwebkit\nbrew install qt@5.5 or brew reinstall qt@5.5\n\necho \u2018export PATH=\u201c/usr/local/opt/qt@5.5/bin:$PATH\u201d\u2019 &gt;&gt; ~/.bash_profile\nsource ~/.bash_profile\n\nbrew unlink qt@5.5 &amp;&amp; brew link --force qt@5.5\n</code></pre>\n"}], "owner": {"reputation": 138, "user_id": 5041339, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153511102437009/picture?type=large", "display_name": "Caren Garc&#237;a", "link": "https://stackoverflow.com/users/5041339/caren-garc%c3%ada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4625, "favorite_count": 2, "accepted_answer_id": 40910219, "answer_count": 2, "score": 9, "last_activity_date": 1542356722, "creation_date": 1478643506, "question_id": 40497404, "link": "https://stackoverflow.com/questions/40497404/unable-to-install-capybara-webkit-with-os-x-sierra", "title": "Unable to install capybara-webkit with OS X Sierra", "body": "<p>I've been trying to install the Capybara-Webkit gem with bundler and after following these instructions: <a href=\"https://github.com/thoughtbot/capybara-webkit/wiki/Installing-Qt-and-compiling-capybara-webkit#macos-sierra-1012\" rel=\"noreferrer\">https://github.com/thoughtbot/capybara-webkit/wiki/Installing-Qt-and-compiling-capybara-webkit#macos-sierra-1012</a></p>\n\n<p>I keep running into the error of the Makefile not being found. I've updated Homebrew, the gem system, and updated Xcode 8 with cli tools to no avail. Would really appreciate any help! </p>\n\n<pre><code>sudo gem install capybara-webkit PATH=/Users/caren/Qt5.5.1/5.5/clang_64/bin:$PATH gem install capybara-webkit\nPassword:\nBuilding native extensions.  This could take a while...\nERROR:  Error installing capybara-webkit:\n    ERROR: Failed to build gem native extension.\n\n    /Users/caren/.rbenv/versions/2.2.3/bin/ruby -r ./siteconf20161108-5610-m00680.rb extconf.rb\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/Users/caren/.rbenv/versions/2.2.3/bin/$(RUBY_BASE_NAME)\n    --with-gl-dir\n    --without-gl-dir\n    --with-gl-include\n    --without-gl-include=${gl-dir}/include\n    --with-gl-lib\n    --without-gl-lib=${gl-dir}/lib\n    --with-zlib-dir\n    --without-zlib-dir\n    --with-zlib-include\n    --without-zlib-include=${zlib-dir}/include\n    --with-zlib-lib\n    --without-zlib-lib=${zlib-dir}/lib\nCommand 'qmake ' not available\n\nextconf failed, exit code 1\n\nGem files will remain installed in /Users/caren/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/capybara-webkit-1.11.1 for inspection.\nResults logged to /Users/caren/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/extensions/x86_64-darwin-15/2.2.0-static/capybara-webkit-1.11.1/gem_make.out\nERROR:  Could not find a valid gem 'PATH=/Users/caren/Qt5.5.1/5.5/clang_64/bin:/Library/Frameworks/Python.framework/Versions/3.5/bin:/Users/caren/.nvm/versions/node/v5.4.0/bin:/Users/caren/.rbenv/shims:/usr/local/opt/coreutils/libexec/gnubin:/usr/local/heroku/bin:/usr/local/bin:/usr/local/sbin:/usr/local/share/npm/bin:/Users/caren/.rbenv/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/opt/X11/bin' (&gt;= 0) in any repository\nERROR:  Could not find a valid gem 'gem' (&gt;= 0) in any repository\nERROR:  Could not find a valid gem 'install' (&gt;= 0) in any repository\nERROR:  Possible alternatives: installr, instant, instana, instacli, instapi\nBuilding native extensions.  This could take a while...\nERROR:  Error installing capybara-webkit:\n    ERROR: Failed to build gem native extension.\n\n    /Users/caren/.rbenv/versions/2.2.3/bin/ruby -r ./siteconf20161108-5610-97n2eh.rb extconf.rb\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/Users/caren/.rbenv/versions/2.2.3/bin/$(RUBY_BASE_NAME)\n    --with-gl-dir\n    --without-gl-dir\n    --with-gl-include\n    --without-gl-include=${gl-dir}/include\n    --with-gl-lib\n    --without-gl-lib=${gl-dir}/lib\n    --with-zlib-dir\n    --without-zlib-dir\n    --with-zlib-include\n    --without-zlib-include=${zlib-dir}/include\n    --with-zlib-lib\n    --without-zlib-lib=${zlib-dir}/lib\nCommand 'qmake ' not available\n\nextconf failed, exit code 1\n\nGem files will remain installed in /Users/caren/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/capybara-webkit-1.11.1 for inspection.\nResults logged to /Users/caren/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/extensions/x86_64-darwin-15/2.2.0-static/capybara-webkit-1.11.1/gem_make.out \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rename", "globalize"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1478643753, "post_id": 40497355, "comment_id": 68239024, "body": "Am I missing something here?... Can you not just do <code>def change; rename_column :news, :name, :title; end</code>?"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1478643817, "post_id": 40497355, "comment_id": 68239050, "body": "That. If it&#39;s actually more complex then there are a number of solutions that boil down to <a href=\"http://stackoverflow.com/q/6135600/438992\">stackoverflow.com/q/6135600/438992</a> somewhere under the covers."}, {"owner": {"reputation": 830, "user_id": 5136200, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gBAqD.jpg?s=128&g=1", "display_name": "Archer", "link": "https://stackoverflow.com/users/5136200/archer"}, "edited": false, "score": 0, "creation_date": 1478643924, "post_id": 40497355, "comment_id": 68239083, "body": "mhh, But I don&#39;t want to rename the News model, just the column."}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1478644273, "post_id": 40497355, "comment_id": 68239233, "body": "<code>rename_column :news, :name</code> means &quot;in the news table, rename the name column&quot; - it won&#39;t rename the table"}], "answers": [{"tags": [], "owner": {"reputation": 1912, "user_id": 886745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sYeiP.jpg?s=128&g=1", "display_name": "rebagliatte", "link": "https://stackoverflow.com/users/886745/rebagliatte"}, "is_accepted": true, "score": 2, "last_activity_date": 1478644244, "creation_date": 1478644244, "answer_id": 40497546, "question_id": 40497355, "link": "https://stackoverflow.com/questions/40497355/rails-rename-globalize-column/40497546#40497546", "title": "Rails: rename globalize column", "body": "<p>Alter the column <strong>on the news translations table</strong> directly:    </p>\n\n<pre><code>def change\n  rename_column :news_translations, :name, :title\nend\n</code></pre>\n"}], "owner": {"reputation": 830, "user_id": 5136200, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/gBAqD.jpg?s=128&g=1", "display_name": "Archer", "link": "https://stackoverflow.com/users/5136200/archer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "accepted_answer_id": 40497546, "answer_count": 1, "score": 2, "last_activity_date": 1478644244, "creation_date": 1478643257, "question_id": 40497355, "link": "https://stackoverflow.com/questions/40497355/rails-rename-globalize-column", "title": "Rails: rename globalize column", "body": "<p>The rails globalize gem  docs are great, but I can't find a solution, what I have to do, when I want to rename a column.</p>\n\n<p>Last Year I did that, to add the translation fields.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>  def up\n    remove_column :news, :name\n    News.add_translation_fields! name: :string\n  end\n\n  def down\n    add_column :news, :name, :string, default: nil\n    remove_column :news_translations, :name\n  end\n</code></pre>\n\n<p>Now I want to rename the column \"name\" to \"title\", without loosing my data and translations. How do I have to write the migration file?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord"], "comments": [{"owner": {"reputation": 3798, "user_id": 2823853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/InKCu.jpg?s=128&g=1", "display_name": "idej", "link": "https://stackoverflow.com/users/2823853/idej"}, "edited": false, "score": 0, "creation_date": 1478643203, "post_id": 40497104, "comment_id": 68238795, "body": "do you have only one foreign key in <code>pool_tournament_match_relationships</code> table?"}, {"owner": {"reputation": 7105, "user_id": 384964, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2d996116590f6bd825002aca034bac4f?s=128&d=identicon&r=PG", "display_name": "okysabeni", "link": "https://stackoverflow.com/users/384964/okysabeni"}, "reply_to_user": {"reputation": 3798, "user_id": 2823853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/InKCu.jpg?s=128&g=1", "display_name": "idej", "link": "https://stackoverflow.com/users/2823853/idej"}, "edited": false, "score": 0, "creation_date": 1478643481, "post_id": 40497104, "comment_id": 68238915, "body": "I added the schema. Looks like there is only one integer for parent_id."}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1478648932, "post_id": 40497104, "comment_id": 68240735, "body": "Your has-many-through relationship will not work unless you have both a <code>parent_id</code> field and a <code>pool_tournament_match_id</code> field. See the example below."}], "answers": [{"comments": [{"owner": {"reputation": 7105, "user_id": 384964, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2d996116590f6bd825002aca034bac4f?s=128&d=identicon&r=PG", "display_name": "okysabeni", "link": "https://stackoverflow.com/users/384964/okysabeni"}, "edited": false, "score": 0, "creation_date": 1478648868, "post_id": 40498287, "comment_id": 68240712, "body": "I do have a couple of has_many through associations and they work for me. This one doesn&#39;t work because I&quot;m assuming it&#39;s a self referential. I&#39;m not connection two entities via a join table. I&#39;m connecting the same entity via a join table and it got confused. Thanks for the answer though."}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "reply_to_user": {"reputation": 7105, "user_id": 384964, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2d996116590f6bd825002aca034bac4f?s=128&d=identicon&r=PG", "display_name": "okysabeni", "link": "https://stackoverflow.com/users/384964/okysabeni"}, "edited": false, "score": 1, "creation_date": 1478649193, "post_id": 40498287, "comment_id": 68240792, "body": "In that case, I think you need to alias the operative class so it can reference itself. I&#39;m not sure how it can work without two foreign key fields in the reference table. How else will the relationship exist?"}, {"owner": {"reputation": 7105, "user_id": 384964, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2d996116590f6bd825002aca034bac4f?s=128&d=identicon&r=PG", "display_name": "okysabeni", "link": "https://stackoverflow.com/users/384964/okysabeni"}, "edited": false, "score": 0, "creation_date": 1478650874, "post_id": 40498287, "comment_id": 68241177, "body": "You are right. I&#39;m weak with RDMS and not sure how rails association really works on that level. I followed this a railscast tutorial and it works. Thanks!"}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": true, "score": 0, "last_activity_date": 1478648560, "creation_date": 1478648560, "answer_id": 40498287, "question_id": 40497104, "link": "https://stackoverflow.com/questions/40497104/rails-self-referential-has-many-through-is-not-adding-the-right-record/40498287#40498287", "title": "Rails self referential has_many through: is not adding the right record", "body": "<p>With has-many-through relationships, you shouldn't have to mess with creating the records for the relationship table or assigning attributes to them. Just use basic operators on the operative classes and let Rails figure out the relationships for you. </p>\n\n<p>The names of your classes are long and I'm not quite straight in my head how they work, so I'll illustrate with some from one of my projects.</p>\n\n<pre><code># app/models/event.rb\n\nclass Event &lt; ActiveRecord::Base\n  has_many :aid_stations, dependent: :destroy\n  has_many :splits, through: :aid_stations\n...\nend\n\n# app/models/split.rb\n\nclass Split &lt; ActiveRecord::Base\n  has_many :aid_stations, dependent: :destroy\n  has_many :events, through: :aid_stations\n...\nend\n\n# app/models/aid_station.rb\n\nclass AidStation &lt; ActiveRecord::Base\n  belongs_to :event\n  belongs_to :split\n...\nend\n\n# app/controllers/events_controller.rb\n\nclass EventsController &lt; ApplicationController\n  before_action :set_event\n  ...\n\n  def associate_split\n    @event.splits &lt;&lt; Split.find(params[:split_id])\n    redirect_to splits_event_path(id: @event.id)\n  end\n\n  def remove_split\n    @event.splits.delete(params[:split_id])\n    redirect_to splits_event_path(@event)\n  end\n\n  private\n\n  def set_event\n    @event = Event.find(params[:id])\n  end\nend\n</code></pre>\n\n<p>Note that <code>associate_split</code> creates an aid_station record and <code>remove_split</code> destroys one, but there is no mention of any aid_stations in the methods. Rails takes care of that behind the scenes.</p>\n\n<p>This would work equally well in the splits_controller if I had chosen to put the <code>associate</code> and <code>remove</code> methods there.</p>\n\n<p>EDIT: Here's the relevant portion of the schema for <code>aid_stations</code>:</p>\n\n<pre><code>  create_table \"aid_stations\", force: :cascade do |t|\n    t.integer  \"event_id\"\n    t.integer  \"split_id\"\n    ...\n  end\n</code></pre>\n"}], "owner": {"reputation": 7105, "user_id": 384964, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2d996116590f6bd825002aca034bac4f?s=128&d=identicon&r=PG", "display_name": "okysabeni", "link": "https://stackoverflow.com/users/384964/okysabeni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 40498287, "answer_count": 1, "score": 0, "last_activity_date": 1478648560, "creation_date": 1478642059, "last_edit_date": 1478643444, "question_id": 40497104, "link": "https://stackoverflow.com/questions/40497104/rails-self-referential-has-many-through-is-not-adding-the-right-record", "title": "Rails self referential has_many through: is not adding the right record", "body": "<p>Been wrecking my brain all day for this. I created a has_many through relationships for a <code>pool_tournament_match</code> so each match can have many other matches. I created a table called \n<code>pool_tournament_match_relationships</code>.</p>\n\n<p><code>\ncreate_table :pool_tournament_match_relationships do |t|\n   t.belongs_to :parent, class_name: 'PoolTournamentMatch', index: true\n   t.timestamps\nend\n</code></p>\n\n<h1>pool_tournament_match.rb</h1>\n\n<p><code>\nhas_many :pool_tournament_match_relationships,\n    class_name: 'PoolTournamentMatchRelationship',\n    foreign_key: :parent_id\nhas_many :parents, through: :pool_tournament_match_relationships\n</code></p>\n\n<p>So, I should be able to do something like <code>match.pool_tournament_match_relationships.create(parent: anotherMatch)</code></p>\n\n<p>However, when I do this, the record added to the relationships table is actually that of <code>match</code> and not <code>anotherMatch</code>. So, for example if match id is 1 and anotherMatch id is 2. 1 will be entered into the relationships table.</p>\n\n<p>Here is the output from the console:</p>\n\n<p><code>m.pool_tournament_match_relationships.create(parent: m2)</code></p>\n\n<p><code>\nINSERT INTO \"pool_tournament_match_relationships\" (\"parent_id\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3) RETURNING \"id\"  [[\"parent_id\", 1], [\"created_at\", 2016-11-08 21:51:29 UTC], [\"updated_at\", 2016-11-08 21:51:29 UTC]]\n</code></p>\n\n<p>Notice that <code>parent_id</code> entered is 1 which is the id of m instead of m2.</p>\n\n<p><code>\nirb(main):012:0&gt; m.id\n=&gt; 1\nirb(main):013:0&gt; m2.id\n=&gt; 5\n</code></p>\n\n<p>I appreciate your help!</p>\n\n<p>EDIT: Add the schema for the relationships table:\n<code>\n  create_table \"pool_tournament_match_relationships\", force: :cascade do |t|\n    t.integer  \"parent_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"parent_id\"], name: \"index_pool_tournament_match_relationships_on_parent_id\", using: :btree\n  end\n</code></p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "image", "file"], "answers": [{"comments": [{"owner": {"reputation": 3909, "user_id": 2757398, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/D7ZKF.jpg?s=128&g=1", "display_name": "Nick Gilbert", "link": "https://stackoverflow.com/users/2757398/nick-gilbert"}, "edited": false, "score": 0, "creation_date": 1478640804, "post_id": 40496682, "comment_id": 68237708, "body": "/blue_logo.png is not found on localhost"}, {"owner": {"reputation": 1912, "user_id": 886745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sYeiP.jpg?s=128&g=1", "display_name": "rebagliatte", "link": "https://stackoverflow.com/users/886745/rebagliatte"}, "reply_to_user": {"reputation": 3909, "user_id": 2757398, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/D7ZKF.jpg?s=128&g=1", "display_name": "Nick Gilbert", "link": "https://stackoverflow.com/users/2757398/nick-gilbert"}, "edited": false, "score": 0, "creation_date": 1478642431, "post_id": 40496682, "comment_id": 68238423, "body": "Oh, sorry about that! Forgot to mention you should move your logos to the public folder. I&#39;ve just updated my answer for clarity."}], "tags": [], "owner": {"reputation": 1912, "user_id": 886745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sYeiP.jpg?s=128&g=1", "display_name": "rebagliatte", "link": "https://stackoverflow.com/users/886745/rebagliatte"}, "is_accepted": false, "score": 0, "last_activity_date": 1478642380, "last_edit_date": 1478642380, "creation_date": 1478640298, "answer_id": 40496682, "question_id": 40496591, "link": "https://stackoverflow.com/questions/40496591/ruby-on-rails-change-source-of-image-with-javascript/40496682#40496682", "title": "Ruby on Rails, change source of image with JavaScript", "body": "<p>Try moving your logos to your <code>public</code> folder and referencing them like this:</p>\n\n<p><code>$('#logo').attr('src', '/blue_logo.png')</code></p>\n\n<p><code>$('#logo').attr('src', '/white_logo.png')</code></p>\n"}, {"comments": [{"owner": {"reputation": 3909, "user_id": 2757398, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/D7ZKF.jpg?s=128&g=1", "display_name": "Nick Gilbert", "link": "https://stackoverflow.com/users/2757398/nick-gilbert"}, "edited": false, "score": 0, "creation_date": 1478641695, "post_id": 40496764, "comment_id": 68238100, "body": "I like this answer, the problem is the browser renders it to plain HTML with double quotes which end up mismatching and throwing a syntax error."}, {"owner": {"reputation": 3909, "user_id": 2757398, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/D7ZKF.jpg?s=128&g=1", "display_name": "Nick Gilbert", "link": "https://stackoverflow.com/users/2757398/nick-gilbert"}, "edited": false, "score": 0, "creation_date": 1478641986, "post_id": 40496764, "comment_id": 68238213, "body": "Actually strike that, I got it to render by switching the double quotes with single quotes. Unfortuately, now the src is set to an image tag. I need to use a different method besides attr"}, {"owner": {"reputation": 5178, "user_id": 2577840, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1520578334/picture?type=large", "display_name": "Micha\u0142 M\u0142o\u017aniak", "link": "https://stackoverflow.com/users/2577840/micha%c5%82-m%c5%82o%c5%baniak"}, "reply_to_user": {"reputation": 3909, "user_id": 2757398, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/D7ZKF.jpg?s=128&g=1", "display_name": "Nick Gilbert", "link": "https://stackoverflow.com/users/2757398/nick-gilbert"}, "edited": false, "score": 0, "creation_date": 1478642323, "post_id": 40496764, "comment_id": 68238375, "body": "Hey @NickGilbert I updated my answer. You need to call <code>asset_path</code> helper instead of <code>image_tag</code>. It will generate plain url."}], "tags": [], "owner": {"reputation": 5178, "user_id": 2577840, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1520578334/picture?type=large", "display_name": "Micha\u0142 M\u0142o\u017aniak", "link": "https://stackoverflow.com/users/2577840/micha%c5%82-m%c5%82o%c5%baniak"}, "is_accepted": true, "score": 1, "last_activity_date": 1478642291, "last_edit_date": 1478642291, "creation_date": 1478640644, "answer_id": 40496764, "question_id": 40496591, "link": "https://stackoverflow.com/questions/40496591/ruby-on-rails-change-source-of-image-with-javascript/40496764#40496764", "title": "Ruby on Rails, change source of image with JavaScript", "body": "<p>Rails is using asset pipeline which adds fingerprints to each js, css and other assets file. So you cannot just fetch file by its name, you need to use the name with fingerprint. <code>image_tag</code> helper will generate correct paths on production, so what you need to do is to somehow inject those paths into javascript.</p>\n\n<p>For example you can do something like this:</p>\n\n<pre><code>javascript:\n  var blueLogoPath = \"#{asset_path('blue_logo.png')}\";\n  var whiteLogoPath = \"#{asset_path('white_logo.png')}\";\n</code></pre>\n\n<p>And then</p>\n\n<pre><code>$('#logo').attr('src', whiteLogoPath);\n</code></pre>\n"}], "owner": {"reputation": 3909, "user_id": 2757398, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/D7ZKF.jpg?s=128&g=1", "display_name": "Nick Gilbert", "link": "https://stackoverflow.com/users/2757398/nick-gilbert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1410, "favorite_count": 0, "accepted_answer_id": 40496764, "answer_count": 2, "score": 2, "last_activity_date": 1478642380, "creation_date": 1478639949, "question_id": 40496591, "link": "https://stackoverflow.com/questions/40496591/ruby-on-rails-change-source-of-image-with-javascript", "title": "Ruby on Rails, change source of image with JavaScript", "body": "<p>I have a JavaScript function which changes one of the images on my web page when the user scrolls down</p>\n\n<pre><code>$(window).scroll(function() {\n    if ($(document).scrollTop() &gt; 0) {\n      switchToStatic();\n    }\n    else {\n      switchToAnimated();\n    }\n}\n\nfunction switchToAnimated() {\n    if ($(window).width() &gt; 768) {\n        $('body').css('padding-top', '0');\n        $('#logo').attr('src', '../assets/blue_logo.png')\n        $('#logo').css('width', '15vw');\n        $('.navbar').css(\"background-color\", 'transparent');\n    }\n}\n\nfunction switchToStatic() {\n    $('body').css('padding-top', '50px');\n    $('#logo').attr('src', '../assets/white_logo.png')\n    $('#logo').css('width', '7.5vw');\n    $('.navbar').css(\"background-color\", '#3B98F2');\n}\n</code></pre>\n\n<p>My application is built on Ruby on Rails. The slim markup looks like this</p>\n\n<pre><code>a href=\"http://www.thisisarealsite.com\" \n    = image_tag(\"white_logo.png\", alt: \"logo\", id: \"logo\")\n</code></pre>\n\n<p>On my localhost the functions work properly but when we launch the site to production the files are missing. I know rails sucks everything into a common directory but I don't know how to fix this to get the image to behave the way I want it to on both localhost and production. I tried taking away the '../assets/' reference and just pointing to the file but that did not work on either localhost or production.</p>\n"}, {"tags": ["ruby", "token"], "comments": [{"owner": {"reputation": 252285, "user_id": 541091, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/cd0165a88a06fc92a36f222606f17a11?s=128&d=identicon&r=PG", "display_name": "Michael Berkowski", "link": "https://stackoverflow.com/users/541091/michael-berkowski"}, "edited": false, "score": 0, "creation_date": 1478639580, "post_id": 40496457, "comment_id": 68237190, "body": "You&#39;re running this file from the command line without passing it to <code>ruby</code>? Sounds then like you need a shebang <a href=\"http://stackoverflow.com/questions/10376206/what-is-the-preferred-bash-shebang\" title=\"what is the preferred bash shebang\">stackoverflow.com/questions/10376206/&hellip;</a>"}, {"owner": {"reputation": 27405, "user_id": 2112633, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c9bf1e5beda923bfc9abb2271c5838e5?s=128&d=identicon&r=PG", "display_name": "usha", "link": "https://stackoverflow.com/users/2112633/usha"}, "edited": false, "score": 2, "creation_date": 1478640089, "post_id": 40496457, "comment_id": 68237406, "body": "you are missing an <code>end</code> in main method"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1478640567, "post_id": 40496457, "comment_id": 68237599, "body": "There&#39;s no need to do <code>*line_array =</code>, that&#39;s an anti-pattern. Just use <code>line_array =</code>. Likewise, don&#39;t define a <code>main</code> method, that&#39;s pointless. It&#39;s understood that Ruby never has such a thing and this bucks convention. You should also use <a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/optparse/rdoc/OptionParser.html\" rel=\"nofollow noreferrer\">OptionParser</a> to handle command-line arguments."}, {"owner": {"reputation": 3779, "user_id": 1302259, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/dTuy4.png?s=128&g=1", "display_name": "Du D.", "link": "https://stackoverflow.com/users/1302259/du-d"}, "edited": false, "score": 0, "creation_date": 1478640605, "post_id": 40496457, "comment_id": 68237615, "body": "Which ver of ruby are you running? the splat &quot;*&quot; only exist in ruby 2.0"}, {"owner": {"reputation": 11, "user_id": 2355836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79065ddb295a1199dc6becfd82f3f68f?s=128&d=identicon&r=PG&f=1", "display_name": "moon", "link": "https://stackoverflow.com/users/2355836/moon"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1478641041, "post_id": 40496457, "comment_id": 68237814, "body": "@tadman I see, I&#39;ve fixed it and when I executed the code, it didn&#39;t return any output. The file poem.txt that I used to test, only contains 3 lines"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 2355836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79065ddb295a1199dc6becfd82f3f68f?s=128&d=identicon&r=PG&f=1", "display_name": "moon", "link": "https://stackoverflow.com/users/2355836/moon"}, "edited": false, "score": 0, "creation_date": 1478639789, "post_id": 40496502, "comment_id": 68237279, "body": "I&#39;ve tried but I got a syntax error, unexpected end-of-input, expecting keyword_end :("}, {"owner": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "edited": false, "score": 2, "creation_date": 1478640227, "post_id": 40496502, "comment_id": 68237458, "body": "&quot;I&#39;ve tried but I got a syntax error, unexpected end-of-input, expecting keyword_end&quot; And rightly so! You <i>are</i> missing a keyword <code>end</code>. So this proves that putting the shebang line at the top causes your script to work <i>correctly</i>! It is parsed as ruby and the ruby parser is telling you something you need to fix."}, {"owner": {"reputation": 11, "user_id": 2355836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79065ddb295a1199dc6becfd82f3f68f?s=128&d=identicon&r=PG&f=1", "display_name": "moon", "link": "https://stackoverflow.com/users/2355836/moon"}, "edited": false, "score": 0, "creation_date": 1478640423, "post_id": 40496502, "comment_id": 68237526, "body": "I&#39;ve put the shebang line at the top, no errors returned, but also there was no output"}, {"owner": {"reputation": 11, "user_id": 6501345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a1b29e761e6b788f31ffa663d3697fa?s=128&d=identicon&r=PG&f=1", "display_name": "chiggins", "link": "https://stackoverflow.com/users/6501345/chiggins"}, "edited": false, "score": 0, "creation_date": 1478641142, "post_id": 40496502, "comment_id": 68237858, "body": "I don&#39;t see anywhere in your code where it would output (ie: with <code>puts</code> or <code>print</code>). If you wanted this to output, you&#39;d either want those methods (<code>backlines</code>, etc) to output your results, or return something to <code>main</code> for it to output. (Did those two options make sense?)"}, {"owner": {"reputation": 11, "user_id": 2355836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79065ddb295a1199dc6becfd82f3f68f?s=128&d=identicon&r=PG&f=1", "display_name": "moon", "link": "https://stackoverflow.com/users/2355836/moon"}, "edited": false, "score": 0, "creation_date": 1478650283, "post_id": 40496502, "comment_id": 68241046, "body": "@chiggins like this?  elsif ARGV[0] == &quot;--backwards&quot;  puts backwards(line_array)"}, {"owner": {"reputation": 11, "user_id": 6501345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a1b29e761e6b788f31ffa663d3697fa?s=128&d=identicon&r=PG&f=1", "display_name": "chiggins", "link": "https://stackoverflow.com/users/6501345/chiggins"}, "edited": false, "score": 0, "creation_date": 1478838872, "post_id": 40496502, "comment_id": 68321369, "body": "I was thinking either outputting something from the method (expedient), or returning something from the method and outputting after the conditionals. So that would be something like <code>def backwards; &quot;backwards!&quot;; end</code> and then have <code>elsif ARGV[0] == &quot;--backwards&quot;; retval = backwards();</code>. Then you&#39;d <code>puts retval</code> at the end of main."}], "tags": [], "owner": {"reputation": 11, "user_id": 6501345, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a1b29e761e6b788f31ffa663d3697fa?s=128&d=identicon&r=PG&f=1", "display_name": "chiggins", "link": "https://stackoverflow.com/users/6501345/chiggins"}, "is_accepted": false, "score": 1, "last_activity_date": 1478639569, "creation_date": 1478639569, "answer_id": 40496502, "question_id": 40496457, "link": "https://stackoverflow.com/questions/40496457/syntax-error-unexpected-token/40496502#40496502", "title": "Syntax error unexpected token &#39;(&#39;", "body": "<p>Have you executed <code>ruby</code> in your script at the top? eg:</p>\n\n<pre><code>#!/usr/bin/ruby\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 2355836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79065ddb295a1199dc6becfd82f3f68f?s=128&d=identicon&r=PG&f=1", "display_name": "moon", "link": "https://stackoverflow.com/users/2355836/moon"}, "edited": false, "score": 0, "creation_date": 1478641123, "post_id": 40496679, "comment_id": 68237850, "body": "Thanks, I think the code worked but it doesnt returned any output. The poem.txt which I used to test, contains three lines."}, {"owner": {"reputation": 4458, "user_id": 130453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9510a3b34bd894d94d4a670ea05662e?s=128&d=identicon&r=PG", "display_name": "corn3lius", "link": "https://stackoverflow.com/users/130453/corn3lius"}, "reply_to_user": {"reputation": 11, "user_id": 2355836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79065ddb295a1199dc6becfd82f3f68f?s=128&d=identicon&r=PG&f=1", "display_name": "moon", "link": "https://stackoverflow.com/users/2355836/moon"}, "edited": false, "score": 0, "creation_date": 1478641212, "post_id": 40496679, "comment_id": 68237886, "body": "you need to do something in your functions.?! @guest12"}, {"owner": {"reputation": 11, "user_id": 2355836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79065ddb295a1199dc6becfd82f3f68f?s=128&d=identicon&r=PG&f=1", "display_name": "moon", "link": "https://stackoverflow.com/users/2355836/moon"}, "edited": false, "score": 0, "creation_date": 1478641414, "post_id": 40496679, "comment_id": 68237971, "body": "When i execute ./program1.rb --backwards poem.txt, it should return output of turning all the lines in the poem.txt to backwards"}, {"owner": {"reputation": 4458, "user_id": 130453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9510a3b34bd894d94d4a670ea05662e?s=128&d=identicon&r=PG", "display_name": "corn3lius", "link": "https://stackoverflow.com/users/130453/corn3lius"}, "reply_to_user": {"reputation": 11, "user_id": 2355836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79065ddb295a1199dc6becfd82f3f68f?s=128&d=identicon&r=PG&f=1", "display_name": "moon", "link": "https://stackoverflow.com/users/2355836/moon"}, "edited": false, "score": 0, "creation_date": 1478641554, "post_id": 40496679, "comment_id": 68238036, "body": "You need to fill in the <code>backwards</code> function it currently does nothing.?"}], "tags": [], "owner": {"reputation": 4458, "user_id": 130453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9510a3b34bd894d94d4a670ea05662e?s=128&d=identicon&r=PG", "display_name": "corn3lius", "link": "https://stackoverflow.com/users/130453/corn3lius"}, "is_accepted": false, "score": 0, "last_activity_date": 1478640281, "creation_date": 1478640281, "answer_id": 40496679, "question_id": 40496457, "link": "https://stackoverflow.com/questions/40496457/syntax-error-unexpected-token/40496679#40496679", "title": "Syntax error unexpected token &#39;(&#39;", "body": "<pre><code>#!/usr/bin/ruby\n\ndef backlines(*line_array)\n\nend\n\ndef backwards(line_array)\n\nend\n\ndef backchars(line_array)\n\nend\n\ndef main\n  puts ARGV\n  # File open not new ... this block requires the end below.\n  File.open(ARGV[1], \"r\") do |file|\n    line_array = file.readlines\n    *line_array = line_array.reverse \n    if ARGV[0] == \"--backlines\"\n      *backwards_poem = backlines(line_array)\n      #you can manipulate \"backwards_poem\" however you want\n    elsif ARGV[0] == \"--backwards\"\n      backwards(line_array)\n    elsif ARGV[0] == \"--backchars\"\n      backchars(line_array)\n    end\n  end\n  # passing a *line_array into a function\nend\n</code></pre>\n\n<p>this should start you off if your call it like <code>./program1.rb --backwards file</code></p>\n\n<p>you also had line-array , line_array and line_Array which should al be one variable i think. </p>\n"}], "owner": {"reputation": 11, "user_id": 2355836, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79065ddb295a1199dc6becfd82f3f68f?s=128&d=identicon&r=PG&f=1", "display_name": "moon", "link": "https://stackoverflow.com/users/2355836/moon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 915, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1478640307, "creation_date": 1478639389, "last_edit_date": 1478640307, "question_id": 40496457, "link": "https://stackoverflow.com/questions/40496457/syntax-error-unexpected-token", "title": "Syntax error unexpected token &#39;(&#39;", "body": "<p>I kept running to this unexpected error token. I wanted the program to run without invoking ruby. For instances, instead of <code>ruby program1.rb</code>, i should be able to <code>program1.rb poem.txt</code>.</p>\n\n<p>This is the error message:</p>\n\n<pre><code> program1.rb --backwards poem.txt\n./program1.rb: line 1: syntax error near unexpected token `('\n./program1.rb: line 1: `def backlines(line_array)'\n</code></pre>\n\n<p>This is my code:</p>\n\n<pre><code>def backlines(*line_array)\n\nend\n\ndef backwards(line_array)\n\nend\n\ndef backchars(line_array)\n\nend\n\ndef main\n  file = File.new(ARGV[1], \"r\") do |file|\n  line_array = file.readlines\n  *line_array = line_array.reverse\n  if ARGV[0] == \"--backlines\"\n    *backwards_poem = backlines(line-array)\n    #you can manipulate \"backwards_poem\" however you want\n  elsif ARGV[0] == \"--backwards\"\n    backwards(line_array)\n  elsif ARGV[0] == \"--backchars\"\n    backchars(line_Array)\n  end\n\n  # passing a *line_array into a function\nend\n\nmain\n</code></pre>\n"}, {"tags": ["ruby", "methods", "splat"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 2, "creation_date": 1478637201, "post_id": 40495812, "comment_id": 68235966, "body": "This might help: <a href=\"http://stackoverflow.com/questions/5249537/naked-asterisk-as-parameter-in-method-definition-def-f\" title=\"naked asterisk as parameter in method definition def f\">stackoverflow.com/questions/5249537/&hellip;</a>"}, {"owner": {"reputation": 10344, "user_id": 1509401, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HiLe4.jpg?s=128&g=1", "display_name": "thank_you", "link": "https://stackoverflow.com/users/1509401/thank-you"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1478637443, "post_id": 40495812, "comment_id": 68236092, "body": "@orde Thanks. But what I want to know is how can I call an argument that is passed into the method. Do I have to define it as <code>def test(*args)</code> then?"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1478638939, "post_id": 40495812, "comment_id": 68236894, "body": "I&#39;ll be honest: first time I&#39;ve seen the naked splat operator. But--if you do something like <code>def foo(*args); puts args; end</code>--then the method arguments are collected into an <code>args</code> array, and you can do <code>foo(1,2) #=&gt; 1 2</code>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1478639056, "post_id": 40495812, "comment_id": 68236952, "body": "Basically, when you see a splat without a name, it means &quot;I don&#39;t care about parameters here&quot;. If you do care, name the parameters."}], "answers": [{"comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 2, "creation_date": 1478639090, "post_id": 40496342, "comment_id": 68236970, "body": "Please add a summary pf the blog post to your answer. At least describe the parts answering the question here. Link-only answers are frowned upon on Stack Overflow since external links tend to deteriorate and vanish quickly."}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "reply_to_user": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1478640310, "post_id": 40496342, "comment_id": 68237489, "body": "Fixed and in production"}, {"owner": {"reputation": 10344, "user_id": 1509401, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HiLe4.jpg?s=128&g=1", "display_name": "thank_you", "link": "https://stackoverflow.com/users/1509401/thank-you"}, "edited": false, "score": 0, "creation_date": 1478640808, "post_id": 40496342, "comment_id": 68237712, "body": "So this part makes sense to me. What I&#39;m confused about is what happens if the args isn&#39;t there? Am I forced to put the args into the method parameters in order to get the parameters I want? I assume so."}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1478641438, "post_id": 40496342, "comment_id": 68237979, "body": "The params in ruby are by default taken in order."}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1478641486, "post_id": 40496342, "comment_id": 68238001, "body": "Sorry I didn&#39;t finish that comment, but there are two solutions.  1. initialize values def go(x = nil, ...)  or"}, {"owner": {"reputation": 10344, "user_id": 1509401, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HiLe4.jpg?s=128&g=1", "display_name": "thank_you", "link": "https://stackoverflow.com/users/1509401/thank-you"}, "edited": false, "score": 0, "creation_date": 1478643563, "post_id": 40496342, "comment_id": 68238951, "body": "What is the or?"}], "tags": [], "owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "is_accepted": false, "score": 1, "last_activity_date": 1478640090, "last_edit_date": 1478640090, "creation_date": 1478638927, "answer_id": 40496342, "question_id": 40495812, "link": "https://stackoverflow.com/questions/40495812/how-to-use-a-splat-as-a-ruby-method-parameter/40496342#40496342", "title": "How to use a splat as a ruby method parameter", "body": "<p>This post has a fairly detailed low level explanation: <a href=\"http://blog.honeybadger.io/ruby-splat-array-manipulation-destructuring/\" rel=\"nofollow noreferrer\">http://blog.honeybadger.io/ruby-splat-array-manipulation-destructuring/</a></p>\n\n<p>To quote the most relevant part:</p>\n\n<pre><code>def go(x, *args, y)\n  puts x # =&gt; 1\n  puts y # =&gt; 5\n  puts args.inspect # =&gt; [2,3,4]\nend\n\ngo(1, 2, 3, 4, 5)\n</code></pre>\n"}], "owner": {"reputation": 10344, "user_id": 1509401, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HiLe4.jpg?s=128&g=1", "display_name": "thank_you", "link": "https://stackoverflow.com/users/1509401/thank-you"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 817, "favorite_count": 0, "closed_date": 1478639260, "answer_count": 1, "score": 3, "last_activity_date": 1478640090, "creation_date": 1478636875, "question_id": 40495812, "link": "https://stackoverflow.com/questions/40495812/how-to-use-a-splat-as-a-ruby-method-parameter", "closed_reason": "Duplicate", "title": "How to use a splat as a ruby method parameter", "body": "<p>I'm looking at a ruby method</p>\n\n<pre><code>def test(*)\n  puts \"hello\"\nend\n</code></pre>\n\n<p>I'm confused about the *. Obviously if I run test it returns \"hello\". But what if I pass an argument into test...</p>\n\n<pre><code>test(\"this argument\")\n</code></pre>\n\n<p>How do I call that method within the test method yet still have the splatter? I'm just awfully confused about having a splatter without a name. How does it work?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "link-to"], "comments": [{"owner": {"reputation": 1538, "user_id": 655650, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/maO3T.jpg?s=128&g=1", "display_name": "Tass", "link": "https://stackoverflow.com/users/655650/tass"}, "edited": false, "score": 0, "creation_date": 1478630684, "post_id": 40494222, "comment_id": 68232542, "body": "When you say it &quot;does not work,&quot; what symptoms are you seeing?"}, {"owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 0, "creation_date": 1478631217, "post_id": 40494222, "comment_id": 68232838, "body": "@Philip7899, when your block has more than one <code>content_tag</code>, you need to <code>concat</code> them, add <code>concat</code> to each <code>content_tag</code> you have in your block. This is an example: <code>concat(content_tag...)</code>"}, {"owner": {"reputation": 502, "user_id": 5784552, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DyhW1dw4T0U/AAAAAAAAAAI/AAAAAAAAAgQ/baMfIvwdbCk/photo.jpg?sz=128", "display_name": "Murad Yusufov", "link": "https://stackoverflow.com/users/5784552/murad-yusufov"}, "edited": false, "score": 0, "creation_date": 1478633368, "post_id": 40494222, "comment_id": 68233958, "body": "Why do you want to use helper and not partial?"}, {"owner": {"reputation": 4159, "user_id": 1959050, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/421de4eb68c9e4a007b0c90f05c15999?s=128&d=identicon&r=PG", "display_name": "Philip7899", "link": "https://stackoverflow.com/users/1959050/philip7899"}, "reply_to_user": {"reputation": 1538, "user_id": 655650, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/maO3T.jpg?s=128&g=1", "display_name": "Tass", "link": "https://stackoverflow.com/users/655650/tass"}, "edited": false, "score": 0, "creation_date": 1478634428, "post_id": 40494222, "comment_id": 68234544, "body": "@Tass I edited my question to show the output of the Ruby helper.  It is only printing the span to the screen but not the i tag."}, {"owner": {"reputation": 4159, "user_id": 1959050, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/421de4eb68c9e4a007b0c90f05c15999?s=128&d=identicon&r=PG", "display_name": "Philip7899", "link": "https://stackoverflow.com/users/1959050/philip7899"}, "reply_to_user": {"reputation": 502, "user_id": 5784552, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DyhW1dw4T0U/AAAAAAAAAAI/AAAAAAAAAgQ/baMfIvwdbCk/photo.jpg?sz=128", "display_name": "Murad Yusufov", "link": "https://stackoverflow.com/users/5784552/murad-yusufov"}, "edited": false, "score": 0, "creation_date": 1478634446, "post_id": 40494222, "comment_id": 68234554, "body": "@MuradYusufov I need to use a helper based on my current architecture"}, {"owner": {"reputation": 4159, "user_id": 1959050, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/421de4eb68c9e4a007b0c90f05c15999?s=128&d=identicon&r=PG", "display_name": "Philip7899", "link": "https://stackoverflow.com/users/1959050/philip7899"}, "reply_to_user": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 0, "creation_date": 1478634499, "post_id": 40494222, "comment_id": 68234577, "body": "@fanta I am getting the error undefined method concat"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1478638473, "post_id": 40496160, "comment_id": 68236651, "body": "I&#39;m pretty sure one needs <code>.html_safe</code> somewhere there."}, {"owner": {"reputation": 1538, "user_id": 655650, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/maO3T.jpg?s=128&g=1", "display_name": "Tass", "link": "https://stackoverflow.com/users/655650/tass"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1478638563, "post_id": 40496160, "comment_id": 68236705, "body": "@SergioTulentsev, we&#39;re attempting to assist the person asking the question, not nit-picking every character in the code we&#39;re working with."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": false, "score": 1, "last_activity_date": 1478638508, "last_edit_date": 1478638508, "creation_date": 1478638183, "answer_id": 40496160, "question_id": 40494222, "link": "https://stackoverflow.com/questions/40494222/trying-to-convert-html-to-a-rails-helper/40496160#40496160", "title": "trying to convert html to a rails helper", "body": "<p><code>link_to</code>, when passed a block, will wrap <code>&lt;a&gt;</code> tags around whatever the block <em>returns</em>. In your code:</p>\n\n<pre><code>link_to home_path(media), class: 'hvr-sweep-to-bottom' do\n  content_tag(:i, class: 'flaticon-insignia') {}\n  content_tag(:span) do \n      menu_item.title\n  end\nend\n</code></pre>\n\n<p>the only thing being <em>returned</em> is the final method call (<code>content_tag(:span) do ... end</code>). There are multiple ways of writing this, such as using <code>String#concat</code>, but here's how I normally do it:</p>\n\n<pre><code>link_to home_path(media), class: 'hvr-sweep-to-bottom' do\n  link_text = content_tag(:i, class: 'flaticon-insignia') {}\n  link_text &lt;&lt; content_tag(:span) do \n      menu_item.title\n  end\nend\n</code></pre>\n\n<p>Note also that in your example, <code>menu_item.title</code> is <code>Home</code> not <code>home</code>; and <code>home_path(media)</code> is <code>/</code> not <code>home.html</code> - so you still won't end up with identical HTML. However, those are both separate issues for you to think about.</p>\n"}, {"tags": [], "owner": {"reputation": 31606, "user_id": 227863, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/AtDIv.jpg?s=128&g=1", "display_name": "stephenmurdoch", "link": "https://stackoverflow.com/users/227863/stephenmurdoch"}, "is_accepted": false, "score": 0, "last_activity_date": 1478638481, "creation_date": 1478638481, "answer_id": 40496224, "question_id": 40494222, "link": "https://stackoverflow.com/questions/40494222/trying-to-convert-html-to-a-rails-helper/40496224#40496224", "title": "trying to convert html to a rails helper", "body": "<p>Concatenate the <strong>content_tags</strong> together, using the <code>+ symbol</code>:</p>\n\n<pre><code>link_to home_path(media), class: 'hvr-sweep-to-bottom' do\n  content_tag(:i, '', class: 'flaticon-insignia') + content_tag(:span, menu_item.title)\nend\n</code></pre>\n\n<p>That should do it</p>\n"}], "owner": {"reputation": 4159, "user_id": 1959050, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/421de4eb68c9e4a007b0c90f05c15999?s=128&d=identicon&r=PG", "display_name": "Philip7899", "link": "https://stackoverflow.com/users/1959050/philip7899"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1478639414, "creation_date": 1478630565, "last_edit_date": 1478634380, "question_id": 40494222, "link": "https://stackoverflow.com/questions/40494222/trying-to-convert-html-to-a-rails-helper", "title": "trying to convert html to a rails helper", "body": "<p>I am trying to convert the following html into a ruby helper:</p>\n\n<pre><code>&lt;a href=\"home.html\" class=\"hvr-sweep-to-bottom\"&gt;\n    &lt;i class=\"flaticon-insignia\"&gt;&lt;/i&gt;\n    &lt;span&gt;home&lt;/span&gt;\n&lt;/a&gt;\n</code></pre>\n\n<p>Here is my code so far that does not work:</p>\n\n<pre><code>link_to home_path(media), class: 'hvr-sweep-to-bottom' do\n  content_tag(:i, class: 'flaticon-insignia') {}\n  content_tag(:span) do \n      menu_item.title\n  end\nend\n</code></pre>\n\n<p>This produces the following output:</p>\n\n<pre><code>&lt;a class=\"hvr-sweep-to-bottom\" href=\"/\"&gt;\n    &lt;span&gt;Home&lt;/span&gt;\n&lt;/a&gt;\n</code></pre>\n\n<p>How do I get this to work?</p>\n"}, {"tags": ["ruby", "regex", "swift"], "comments": [{"owner": {"reputation": 68538, "user_id": 2227743, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OmxV4.jpg?s=128&g=1", "display_name": "Eric Aya", "link": "https://stackoverflow.com/users/2227743/eric-aya"}, "edited": false, "score": 1, "creation_date": 1478630672, "post_id": 40494167, "comment_id": 68232535, "body": "Don&#39;t translate directly. Write down the steps of what your existing Ruby code does, in detail, each one, so that you have a global view of the data flow. Like: &quot;1- Replace comma with dot. 2- Search for an expression, flatten the array of results, then... &quot; etc. Then you can &quot;think in Swift&quot; and write the new Swift code which will follow the thought process you&#39;ve written down."}, {"owner": {"reputation": 1202, "user_id": 6734301, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/68f0e11c94e94983ca8404f1e6a2171c?s=128&d=identicon&r=PG&f=1", "display_name": "Wazza", "link": "https://stackoverflow.com/users/6734301/wazza"}, "reply_to_user": {"reputation": 68538, "user_id": 2227743, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OmxV4.jpg?s=128&g=1", "display_name": "Eric Aya", "link": "https://stackoverflow.com/users/2227743/eric-aya"}, "edited": false, "score": 0, "creation_date": 1478633427, "post_id": 40494167, "comment_id": 68233998, "body": "Thanks for your help, the main part I&#39;m struggling with is translating the regex. I&#39;ve managed to find workarounds, thanks to your help, for the .split, .flatten functions etc but the regex i cant seem to figure out."}, {"owner": {"reputation": 68538, "user_id": 2227743, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OmxV4.jpg?s=128&g=1", "display_name": "Eric Aya", "link": "https://stackoverflow.com/users/2227743/eric-aya"}, "edited": false, "score": 0, "creation_date": 1478633652, "post_id": 40494167, "comment_id": 68234125, "body": "Ah, excellent news! You can lookup &quot;NSRegularExpression&quot; to replace your &quot;scan&quot;. Note that you will have to escape backslashes, like <code>\\\\[([^\\\\]]+)\\\\]</code>, this is one notable difference."}, {"owner": {"reputation": 1202, "user_id": 6734301, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/68f0e11c94e94983ca8404f1e6a2171c?s=128&d=identicon&r=PG&f=1", "display_name": "Wazza", "link": "https://stackoverflow.com/users/6734301/wazza"}, "reply_to_user": {"reputation": 68538, "user_id": 2227743, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OmxV4.jpg?s=128&g=1", "display_name": "Eric Aya", "link": "https://stackoverflow.com/users/2227743/eric-aya"}, "edited": false, "score": 0, "creation_date": 1478635117, "post_id": 40494167, "comment_id": 68234870, "body": "amazing thank you. what do you mean by escape backslashes? e.g replace (/([a-zA-Z])/) for \\&#40;\\&#91;a-z][A-Z])? this i s where i get lost"}, {"owner": {"reputation": 68538, "user_id": 2227743, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OmxV4.jpg?s=128&g=1", "display_name": "Eric Aya", "link": "https://stackoverflow.com/users/2227743/eric-aya"}, "edited": false, "score": 0, "creation_date": 1478635276, "post_id": 40494167, "comment_id": 68234971, "body": "I just meant that whenever there&#39;s <code>\\ </code> it should be actually <code>\\\\ </code> for the regex strings in Swift. :)"}, {"owner": {"reputation": 1202, "user_id": 6734301, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/68f0e11c94e94983ca8404f1e6a2171c?s=128&d=identicon&r=PG&f=1", "display_name": "Wazza", "link": "https://stackoverflow.com/users/6734301/wazza"}, "reply_to_user": {"reputation": 68538, "user_id": 2227743, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OmxV4.jpg?s=128&g=1", "display_name": "Eric Aya", "link": "https://stackoverflow.com/users/2227743/eric-aya"}, "edited": false, "score": 0, "creation_date": 1478635492, "post_id": 40494167, "comment_id": 68235080, "body": "oh right, perfect, thank you so much for your help and patience!"}, {"owner": {"reputation": 1202, "user_id": 6734301, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/68f0e11c94e94983ca8404f1e6a2171c?s=128&d=identicon&r=PG&f=1", "display_name": "Wazza", "link": "https://stackoverflow.com/users/6734301/wazza"}, "reply_to_user": {"reputation": 68538, "user_id": 2227743, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/OmxV4.jpg?s=128&g=1", "display_name": "Eric Aya", "link": "https://stackoverflow.com/users/2227743/eric-aya"}, "edited": false, "score": 0, "creation_date": 1478637401, "post_id": 40494167, "comment_id": 68236066, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/127667/discussion-between-wayne-rumble-and-eric-aya\">continue this discussion in chat</a>."}], "owner": {"reputation": 1202, "user_id": 6734301, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/68f0e11c94e94983ca8404f1e6a2171c?s=128&d=identicon&r=PG&f=1", "display_name": "Wazza", "link": "https://stackoverflow.com/users/6734301/wazza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1478630457, "creation_date": 1478630335, "last_edit_date": 1478630457, "question_id": 40494167, "link": "https://stackoverflow.com/questions/40494167/converting-ruby-regex-to-swift-regex", "title": "converting ruby regex to swift regex", "body": "<p>I've been using swift for 3 months now and am trying to convert a web app into iOS for practice and to progress my knowledge etc. After a bit of googling though, I am struggling to find an elegant way to perform the following functions in swift:</p>\n\n<pre><code>    def search_for_float(line)\n        line.gsub!(',','.')\n        line.scan(/(\\d+[,.]\\d+)/).flatten[0].to_f\n    end\n\n    def search_for_integer(line)\n        line.gsub!(',','.')\n        line.scan(/(\\d+)/).flatten[0].to_i\n    end\n\n    def search_for_words(line)\n        line.split(\" \").select{|word|word.match(/([a-zA-Z])/)}.join(\" \").capitalize\n    end\n</code></pre>\n\n<p>Any help would be great as i'm struggling to find a basic tutorial that i can use to transfer my limited ruby knowledge across too. </p>\n"}, {"tags": ["arrays", "json", "ruby", "loops", "nokogiri"], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1478714037, "post_id": 40493719, "comment_id": 68268038, "body": "Rather than toss out code, also provide an explanation of what the code does. The idea is we&#39;re educating, not just supply a solution. It&#39;s the difference between giving someone a fish or teaching them to fish."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1478714600, "post_id": 40493719, "comment_id": 68268311, "body": "I don&#39;t think the author can&#39;t understand my code. I think usually it&#39;s hard for a beginner/not expert think how to solve a problem but show them a solution doesn&#39;t mean they can&#39;t understand the solution"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1478714715, "post_id": 40493719, "comment_id": 68268371, "body": "And the author can always ask for details or explanation if he wants!"}, {"owner": {"reputation": 1850, "user_id": 5281047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R6JZs.png?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/5281047/gabriel"}, "edited": false, "score": 1, "creation_date": 1478714755, "post_id": 40493719, "comment_id": 68268394, "body": "Answers here are for everyone who came here for a solution, not strictly for OP, and code-only answers are discouraged."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1478714908, "post_id": 40493719, "comment_id": 68268478, "body": "The author didn&#39;t ask for explanation about theory concepts, he wanted this code"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1478714939, "post_id": 40493719, "comment_id": 68268501, "body": "I don&#39;t expect upvote. I don&#39;t expect downvote, it&#39;s very different."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1478717258, "post_id": 40493719, "comment_id": 68269606, "body": "Is better now? Is ok?"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 1, "last_activity_date": 1478717215, "last_edit_date": 1478717215, "creation_date": 1478628638, "answer_id": 40493719, "question_id": 40493525, "link": "https://stackoverflow.com/questions/40493525/how-to-iterate-over-nested-items/40493719#40493719", "title": "How to iterate over nested items", "body": "<p>The idea here is first find the nodes with class <code>date</code> (an array of Nokogiri nodes). And transform this array (with <code>map</code> method) in the structure you want. The result will be an array (because <code>map</code>) of hashes (because is what I return in the external <code>map</code>). To create the structure you want in any hash I use the same concepts: find nokogiri nodes with the <code>css</code> method and <code>map</code> every result in what you want.</p>\n\n<pre><code> date_nodes = nokogiri_object.css('.date')\n date_nodes.map do |date| \n   { \n     date.css('.date-title').text =&gt; { \n       \"films\" =&gt; date.css('.film').map do |film| \n         { \n           \"film\" =&gt; film.css('img.poster').attr('src').value, \n           \"time\" =&gt; film.css('time').text \n         }\n       end \n     }\n   }  \n end\n =&gt; [{\"Today\"=&gt;{\n   \"films\"=&gt;[\n     {\"film\"=&gt;\"film1\", \"time\"=&gt;\"12:00 PM\"}, \n     {\"film\"=&gt;\"film2\", \"time\"=&gt;\"3:00 PM\"}, \n     {\"film\"=&gt;\"film3\", \"time\"=&gt;\"6:00 PM\"}]}}, \n   {\"Tomorrow\"=&gt;{\n   \"films\"=&gt;[\n     {\"film\"=&gt;\"film1\", \"time\"=&gt;\"2:00 PM\"}, \n     {\"film\"=&gt;\"film2\", \"time\"=&gt;\"5:00 PM\"}, \n     {\"film\"=&gt;\"film3\", \"time\"=&gt;\"8:00 PM\"}]}}\n  ] \n</code></pre>\n"}], "owner": {"reputation": 501, "user_id": 994563, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1f43eb8586011f748c914b8abb950a6a?s=128&d=identicon&r=PG", "display_name": "matski", "link": "https://stackoverflow.com/users/994563/matski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 40493719, "answer_count": 1, "score": 1, "last_activity_date": 1478717215, "creation_date": 1478627872, "last_edit_date": 1478713975, "question_id": 40493525, "link": "https://stackoverflow.com/questions/40493525/how-to-iterate-over-nested-items", "title": "How to iterate over nested items", "body": "<p>I have this HTML:</p>\n\n<pre><code>&lt;div class=\"date\"&gt;\n  &lt;h3 class=\"date-title\"&gt;Today&lt;/h3&gt;\n\n  &lt;div class=\"film\"&gt;\n    &lt;img class=\"poster\" src=\"film1\" /&gt;\n      &lt;h4 class=\"title\"&gt;Film 1&lt;/h4&gt;\n    &lt;ul class=\"session-times\"&gt;\n      &lt;li&gt;\n        &lt;a href=\"#\"&gt;\n          &lt;time&gt;12:00 PM&lt;/time&gt;\n        &lt;/a&gt;\n      &lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/div&gt;&lt;!-- /.film --&gt;\n\n  &lt;div class=\"film\"&gt;\n    &lt;img class=\"poster\" src=\"film2\" /&gt;\n      &lt;h4 class=\"title\"&gt;Film 2&lt;/h4&gt;\n    &lt;ul class=\"session-times\"&gt;\n      &lt;li&gt;\n        &lt;a href=\"#\"&gt;\n          &lt;time&gt;3:00 PM&lt;/time&gt;\n        &lt;/a&gt;\n      &lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/div&gt;&lt;!-- /.film --&gt;\n\n  &lt;div class=\"film\"&gt;\n    &lt;img class=\"poster\" src=\"film3\" /&gt;\n      &lt;h4 class=\"title\"&gt;Film 3&lt;/h4&gt;\n    &lt;ul class=\"session-times\"&gt;\n      &lt;li&gt;\n        &lt;a href=\"#\"&gt;\n          &lt;time&gt;6:00 PM&lt;/time&gt;\n        &lt;/a&gt;\n      &lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/div&gt;&lt;!-- /.film --&gt;\n&lt;/div&gt;&lt;!-- /.date --&gt;\n\n&lt;div class=\"date\"&gt;\n  &lt;h3 class=\"date-title\"&gt;Tomorrow&lt;/h3&gt;\n\n  &lt;div class=\"film\"&gt;\n    &lt;img class=\"poster\" src=\"film1\" /&gt;\n      &lt;h4 class=\"title\"&gt;Film 1&lt;/h4&gt;\n    &lt;ul class=\"session-times\"&gt;\n      &lt;li&gt;\n        &lt;a href=\"#\"&gt;\n          &lt;time&gt;2:00 PM&lt;/time&gt;\n        &lt;/a&gt;\n      &lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/div&gt;&lt;!-- /.film --&gt;\n\n  &lt;div class=\"film\"&gt;\n    &lt;img class=\"poster\" src=\"film2\" /&gt;\n      &lt;h4 class=\"title\"&gt;Film 2&lt;/h4&gt;\n    &lt;ul class=\"session-times\"&gt;\n      &lt;li&gt;\n        &lt;a href=\"#\"&gt;\n          &lt;time&gt;5:00 PM&lt;/time&gt;\n        &lt;/a&gt;\n      &lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/div&gt;&lt;!-- /.film --&gt;\n\n  &lt;div class=\"film\"&gt;\n    &lt;img class=\"poster\" src=\"film3\" /&gt;\n      &lt;h4 class=\"title\"&gt;Film 3&lt;/h4&gt;\n    &lt;ul class=\"session-times\"&gt;\n      &lt;li&gt;\n        &lt;a href=\"#\"&gt;\n          &lt;time&gt;8:00 PM&lt;/time&gt;\n        &lt;/a&gt;\n      &lt;/li&gt;\n    &lt;/ul&gt;\n  &lt;/div&gt;&lt;!-- /.film --&gt;\n&lt;/div&gt;&lt;!-- /.date --&gt;\n</code></pre>\n\n<p>and I'm extracting data using this Ruby code:</p>\n\n<pre><code>nokogiri_object.css('.date').each do |d|\n  date = d.css('.date-title').text\n  dates.push(date: date)\n  d.css('.film').each do |film|\n    title = film.css('.title')\n    title_en = title.text.strip\n    time = film.css('.session-times/li/a/time').text\n  end\nend\n</code></pre>\n\n<p>This gives me:</p>\n\n<pre><code>[\n  {\n    \"date\": \"Today\"\n  },\n  {\n    \"date\": \"Tomorrow\"\n  }\n]\n</code></pre>\n\n<p>but I'd like to loop over the three movies <code>n</code> times in each <code>.film</code> section and include them under each date in the output, so it should look more like this:</p>\n\n<pre><code>[\n  {\n    \"Today\": {\n      \"films\": [\n        {\n          \"film\": \"Film1\",\n          \"time\": \"12:00 PM\"\n        },\n        {\n          \"film\": \"Film2\",\n          \"time\": \"15:00 PM\"\n        },\n        {\n          \"film\": \"Film3\",\n          \"time\": \"6:00 PM\"\n        }\n      ]\n  },\n  {\n    \"Tomorrow\": {\n      \"films\": [\n        {\n          \"film\": \"Film1\",\n          \"time\": \"14:00 PM\"\n        },\n        {\n          \"film\": \"Film2\",\n          \"time\": \"5:00 PM\"\n        },\n        {\n          \"film\": \"Film3\",\n          \"time\": \"8:00 PM\"\n        }\n      ]\n  },\n</code></pre>\n\n<p>I can't figure out where to build my array within the nested loop.</p>\n"}, {"tags": ["ruby", "rubygems", "rvm"], "comments": [{"owner": {"reputation": 1030, "user_id": 2100645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c9894864f33c42fffe19330d2e00d1b?s=128&d=identicon&r=PG", "display_name": "Lucas Costa", "link": "https://stackoverflow.com/users/2100645/lucas-costa"}, "edited": false, "score": 0, "creation_date": 1478627403, "post_id": 40493348, "comment_id": 68230886, "body": "Are you entering irb using <code>bundle exec irb</code>?"}, {"owner": {"reputation": 11603, "user_id": 234593, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/8e2ee1b00d372ad8f6ed5e87385ffef5?s=128&d=identicon&r=PG", "display_name": "Kache", "link": "https://stackoverflow.com/users/234593/kache"}, "edited": false, "score": 0, "creation_date": 1478628196, "post_id": 40493348, "comment_id": 68231287, "body": "It sounds like you&#39;ve a copy of metasm in your gem directory for your ruby installation AND a copy of the its source within your probject. If you&#39;ve got the source of the gem in your project folder, you&#39;re not really using it as &quot;a gem&quot;. Does removing the Gemfile declaration and calling <code>require &#39;metasm&#47;metasm&#39;</code> work?"}, {"owner": {"reputation": 7561, "user_id": 362857, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51d065150eba7bfe5b6379e4caaaae88?s=128&d=identicon&r=PG", "display_name": "Chiggins", "link": "https://stackoverflow.com/users/362857/chiggins"}, "reply_to_user": {"reputation": 1030, "user_id": 2100645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c9894864f33c42fffe19330d2e00d1b?s=128&d=identicon&r=PG", "display_name": "Lucas Costa", "link": "https://stackoverflow.com/users/2100645/lucas-costa"}, "edited": false, "score": 0, "creation_date": 1478633767, "post_id": 40493348, "comment_id": 68234197, "body": "@LucasCosta -- If I do that and run <code>require &quot;metasm&quot;</code> it returns <code>false</code>.  @Kache -- Removing the entry from the Gemfile, running <code>bundle install</code>, dropping to <code>irb</code>, and running <code>require &quot;metasm&#47;metasm&quot;</code> returns the same cannot load such file."}, {"owner": {"reputation": 1030, "user_id": 2100645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c9894864f33c42fffe19330d2e00d1b?s=128&d=identicon&r=PG", "display_name": "Lucas Costa", "link": "https://stackoverflow.com/users/2100645/lucas-costa"}, "edited": false, "score": 0, "creation_date": 1478633929, "post_id": 40493348, "comment_id": 68234267, "body": "@Chiggins and after entering the console using <code>bundle exec irb</code> and requiring the module, the gem works as expected?"}, {"owner": {"reputation": 7561, "user_id": 362857, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51d065150eba7bfe5b6379e4caaaae88?s=128&d=identicon&r=PG", "display_name": "Chiggins", "link": "https://stackoverflow.com/users/362857/chiggins"}, "reply_to_user": {"reputation": 1030, "user_id": 2100645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c9894864f33c42fffe19330d2e00d1b?s=128&d=identicon&r=PG", "display_name": "Lucas Costa", "link": "https://stackoverflow.com/users/2100645/lucas-costa"}, "edited": false, "score": 0, "creation_date": 1478634257, "post_id": 40493348, "comment_id": 68234450, "body": "@LucasCosta Huh it seems that way! I just figured that after the require returned false then it&#39;d not be working!"}, {"owner": {"reputation": 1030, "user_id": 2100645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c9894864f33c42fffe19330d2e00d1b?s=128&d=identicon&r=PG", "display_name": "Lucas Costa", "link": "https://stackoverflow.com/users/2100645/lucas-costa"}, "edited": false, "score": 0, "creation_date": 1478634501, "post_id": 40493348, "comment_id": 68234578, "body": "@Chiggins Great! =) I posted an answer to help other people with this problem too."}], "answers": [{"comments": [{"owner": {"reputation": 7561, "user_id": 362857, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51d065150eba7bfe5b6379e4caaaae88?s=128&d=identicon&r=PG", "display_name": "Chiggins", "link": "https://stackoverflow.com/users/362857/chiggins"}, "edited": false, "score": 0, "creation_date": 1478634970, "post_id": 40495220, "comment_id": 68234807, "body": "Worked for me! Thanks Lucas!"}], "tags": [], "owner": {"reputation": 1030, "user_id": 2100645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c9894864f33c42fffe19330d2e00d1b?s=128&d=identicon&r=PG", "display_name": "Lucas Costa", "link": "https://stackoverflow.com/users/2100645/lucas-costa"}, "is_accepted": true, "score": 1, "last_activity_date": 1478634434, "creation_date": 1478634434, "answer_id": 40495220, "question_id": 40493348, "link": "https://stackoverflow.com/questions/40493348/importing-and-working-with-a-ruby-gem/40495220#40495220", "title": "Importing and working with a ruby gem", "body": "<p>You must enter irb using the <code>bundle exec irb</code> command.</p>\n\n<p>As you can see <a href=\"http://bundler.io/man/bundle-exec.1.html\" rel=\"nofollow noreferrer\">here</a>, the <code>bundle exec &lt;command&gt;</code> executes the command making all gems specified in the Gemfile available to require in Ruby programs.</p>\n"}], "owner": {"reputation": 7561, "user_id": 362857, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/51d065150eba7bfe5b6379e4caaaae88?s=128&d=identicon&r=PG", "display_name": "Chiggins", "link": "https://stackoverflow.com/users/362857/chiggins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 40495220, "answer_count": 1, "score": 0, "last_activity_date": 1478634434, "creation_date": 1478627254, "question_id": 40493348, "link": "https://stackoverflow.com/questions/40493348/importing-and-working-with-a-ruby-gem", "title": "Importing and working with a ruby gem", "body": "<p>My title might not accurately reflect what I'm trying to ask, but it's the best that I could come up with really.</p>\n\n<p>What I'm trying to do is make modifications to a library, and to test those modifications in a project. So I've got RVM running, a project folder called <code>project/</code>, a gemset with 2.3.1, and the library git cloned into the folder <code>project/metasm/</code>. I have a file <code>project/Gemfile</code> which has this line in it:</p>\n\n<pre><code>gem \"metasm\", :path =&gt; \"metasm\"\n</code></pre>\n\n<p>And when I run <code>bundle install</code> I get the following:</p>\n\n<pre><code>Using metasm 1.0.2 from source at `metasm`\nUsing bundler 1.13.6\nBundle complete! 1 Gemfile dependency, 2 gems now installed.\nUse `bundle show [gemname]` to see where a bundled gem is installed.\n</code></pre>\n\n<p>Good, so everything seems to work as it should. Awesome. I drop down into <code>irb</code> and go to <code>require</code> the library/gem, but it doesn't seem to work too well for me.</p>\n\n<pre><code>2.3.1 :001 &gt; require \"metasm\"\nLoadError: cannot load such file -- metasm\n    from /home/chiggins/.rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /home/chiggins/.rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from (irb):1\n    from /home/chiggins/.rvm/rubies/ruby-2.3.1/bin/irb:11:in `&lt;main&gt;'\n</code></pre>\n\n<p>Now here's what I'm not really understanding. Why can I not use <code>metasm</code> from where it currently is at, even though <code>bundle install</code> worked as it should?</p>\n\n<p>This was the best way I thought that this would work. What I ideally want to do is be able to make my changes to the <code>metasm</code> library as I see fit and either run <code>irb</code> or a Ruby script to test/validate my changes. Is this a good way to go about it or should I go about it another way?</p>\n\n<p>Thanks for any help!</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 7132958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a500d076cc180abea235be655d429118?s=128&d=identicon&r=PG&f=1", "display_name": "Evelyn St", "link": "https://stackoverflow.com/users/7132958/evelyn-st"}, "edited": false, "score": 0, "creation_date": 1478689841, "post_id": 40493410, "comment_id": 68253686, "body": "It worked just fine. I tried to read these articles, but I&#39;m not sure if I understood correctly. But thank you anyway!"}], "tags": [], "owner": {"reputation": 249, "user_id": 1289662, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe2141c61c2282a9a71ca5118d811bbc?s=128&d=identicon&r=PG", "display_name": "BGuimberteau", "link": "https://stackoverflow.com/users/1289662/bguimberteau"}, "is_accepted": true, "score": 0, "last_activity_date": 1478627477, "creation_date": 1478627477, "answer_id": 40493410, "question_id": 40493097, "link": "https://stackoverflow.com/questions/40493097/ruby-on-rails-how-to-update-the-view-with-a-new-query/40493410#40493410", "title": "Ruby on rails: How to update the view with a new query", "body": "<p>Try this</p>\n\n<p><code>menu_controller.rb</code></p>\n\n<pre><code>class MenuController &lt; ApplicationController\n  helper :all\n\n  def index\n    refresh_table(params[:id])\n  end\n\n  private\n    def refresh_table(id)\n      if id\n        @teste = Menu.find(id)\n        @menus = Menu.where(codigopai: \"#{@teste.codigopai}#{@teste.codigo}\")\n      else\n        @menus = Menu.where(codigopai: nil)\n      end\n    end\nend\n</code></pre>\n\n<p><code>index.html.erb</code></p>\n\n<pre><code>&lt;h1&gt; List all &lt;/h1&gt;\n\n&lt;table&gt;\n  &lt;tr&gt;\n    &lt;th&gt;Codigo&lt;/th&gt;\n    &lt;th&gt;CodigoPai&lt;/th&gt;\n    &lt;th&gt;Descri\u00e7\u00e3o&lt;/th&gt;\n    &lt;th&gt;Conte\u00fado&lt;/th&gt;\n    &lt;th&gt;&lt;/th&gt;\n  &lt;/tr&gt;\n  &lt;% @menus.each do |m| %&gt;\n    &lt;tr&gt;\n      &lt;td&gt;&lt;%= m.codigo %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= m.codigopai %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= m.descricao %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= m.conteudo %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= button_to 'Abrir', menu_index_path(id: m.id), method: :post %&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>I think you can read <a href=\"http://guides.rubyonrails.org/active_record_querying.html\" rel=\"nofollow noreferrer\">Query with Active Record</a> and <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow noreferrer\">routing</a></p>\n"}], "owner": {"reputation": 27, "user_id": 7132958, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a500d076cc180abea235be655d429118?s=128&d=identicon&r=PG&f=1", "display_name": "Evelyn St", "link": "https://stackoverflow.com/users/7132958/evelyn-st"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 40493410, "answer_count": 1, "score": 0, "last_activity_date": 1478627477, "creation_date": 1478626433, "question_id": 40493097, "link": "https://stackoverflow.com/questions/40493097/ruby-on-rails-how-to-update-the-view-with-a-new-query", "title": "Ruby on rails: How to update the view with a new query", "body": "<p>I'm new at Ruby on Rails (I started studying this week by myself) and I'm facing some issues that I cannot solve.</p>\n\n<p>I have created a project called 'projeto_ajuda' and i'm using mysql database. I access the aplication on <a href=\"http://localhost:3000/menu/index\" rel=\"nofollow noreferrer\">http://localhost:3000/menu/index</a>. It shows me a table with 5 columns, and the last one, is for a button.\nWhat I want is: when the button is clicked, it calls a method from the controller that 'refresh' the table with a new select (i add a new condition in where statement).</p>\n\n<p>Ps\u00b9: the view show to filled rows in the table, but when I click on the button, nothing changes on the view, but the URL does: <a href=\"http://localhost:3000/menu/index.%23%3CMenu::ActiveRecord_Relation:0x007f5ce5891608%3E?id=6\" rel=\"nofollow noreferrer\">http://localhost:3000/menu/index.%23%3CMenu::ActiveRecord_Relation:0x007f5ce5891608%3E?id=6</a></p>\n\n<p>Ps\u00b2: If I refresh_table(6) instead of refresh_table(nil) on the index method, it works just fine, selecting what I want from the database.</p>\n\n<p>And if I look at the database, there is a record with the id 6.</p>\n\n<p>menu_controller.rb:</p>\n\n<pre><code>class MenuController &lt; ApplicationController\n  helper :all\n\n  def index\n    refresh_table(nil)\n  end\n\n  def abrir\n      refresh_table(params[:id])\n  end\n\n  private\n    def refresh_table(id)\n\n      if(id.nil?)\n          @menus = Menu.where(\"codigopai IS NULL\")\n      else\n          @teste = Menu.find(id)\n          @menus = Menu.where(\"codigopai = '\" + @teste.codigopai.to_s + @teste.codigo.to_s + \"'\")\n      end\n    end\n\nend\n</code></pre>\n\n<p>index.html.erb:</p>\n\n<pre><code>&lt;h1&gt; List all &lt;/h1&gt;\n\n&lt;table&gt;\n  &lt;tr&gt;\n    &lt;th&gt;Codigo&lt;/th&gt;\n    &lt;th&gt;CodigoPai&lt;/th&gt;\n    &lt;th&gt;Descri\u00e7\u00e3o&lt;/th&gt;\n    &lt;th&gt;Conte\u00fado&lt;/th&gt;\n    &lt;th&gt;&lt;/th&gt;\n  &lt;/tr&gt;\n  &lt;% @menus.each do |m| %&gt;\n    &lt;tr&gt;\n      &lt;td&gt;&lt;%= m.codigo %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= m.codigopai %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= m.descricao %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= m.conteudo %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= button_to 'Abrir', menu_index_path(@menus, :id =&gt; m.id), method: :post %&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>routes.rb:</p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :menus\n\n  post 'menu/index'\n  get 'menu/index'\n\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "imagemagick", "slim-lang"], "answers": [{"comments": [{"owner": {"reputation": 3909, "user_id": 2757398, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/D7ZKF.jpg?s=128&g=1", "display_name": "Nick Gilbert", "link": "https://stackoverflow.com/users/2757398/nick-gilbert"}, "edited": false, "score": 0, "creation_date": 1478639316, "post_id": 40492862, "comment_id": 68237083, "body": "Thanks for your answer but unfortunately it did not work. Without the ! nothing happened and with it I got an error: &quot;Avatar failed to manipulate with MiniMagic, maybe it is not an image? Original Error: <code>mogrify -auto-orient! &#47;tmp&#47;mini_magick20161108.jpg</code> failed with error: mogrify.im6: unrecognized option `- auto-orient!&#39; @ error/mogrify.c/MogrifyImageCommand/3918. [I cant see the rest, it cut off]"}], "tags": [], "owner": {"reputation": 663, "user_id": 7105559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3007d882cf2470a445998aa88ecad93e?s=128&d=identicon&r=PG&f=1", "display_name": "borbesaur", "link": "https://stackoverflow.com/users/7105559/borbesaur"}, "is_accepted": false, "score": 1, "last_activity_date": 1478625591, "last_edit_date": 1495535421, "creation_date": 1478625591, "answer_id": 40492862, "question_id": 40492353, "link": "https://stackoverflow.com/questions/40492353/ruby-on-rails-image-uploads-sideways-from-mobile/40492862#40492862", "title": "Ruby on Rails: Image Uploads Sideways from Mobile", "body": "<p>credit: @lando2319<br>\n<a href=\"https://stackoverflow.com/questions/18519160/exif-image-rotation-issue-using-carrierwave-and-rmagick-to-upload-to-s3\">exif image rotation issue using carrierwave and rmagick to upload to s3</a></p>\n\n<p>try changing your auto_orient method to this:</p>\n\n<pre><code>  def auto_orient\n    manipulate! do |img|\n    img.tap(&amp;:auto_orient!)  #try with and without the ! here.\n    end\n  end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3909, "user_id": 2757398, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/D7ZKF.jpg?s=128&g=1", "display_name": "Nick Gilbert", "link": "https://stackoverflow.com/users/2757398/nick-gilbert"}, "is_accepted": true, "score": 0, "last_activity_date": 1478804592, "creation_date": 1478804592, "answer_id": 40535146, "question_id": 40492353, "link": "https://stackoverflow.com/questions/40492353/ruby-on-rails-image-uploads-sideways-from-mobile/40535146#40535146", "title": "Ruby on Rails: Image Uploads Sideways from Mobile", "body": "<p>Figured it out.</p>\n\n<pre><code>process :auto_orient\n</code></pre>\n\n<p>Needs to be called outside the <code>version: thumb do</code> loop</p>\n\n<p>Full code</p>\n\n<pre><code># encoding: utf-8\n\nclass AvatarUploader &lt; CarrierWave::Uploader::Base\n\n  # Include RMagick or MiniMagick support:\n  # include CarrierWave::RMagick\n  include CarrierWave::MiniMagick\n\n  # In the uploader:\n  def auto_orient\n    manipulate! do |img|\n      img.auto_orient\n      img\n    end\n  end\n\n  # Choose what kind of storage to use for this uploader:\n  # storage :file\n  # storage :fog\n\n  # Override the directory where uploaded files will be stored.\n  # This is a sensible default for uploaders that are meant to be mounted:\n  def store_dir\n    \"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}\"\n  end\n\n  # Provide a default URL as a default if there hasn't been a file uploaded:\n  def default_url\n    ActionController::Base.helpers.asset_path('default_avatar.png')\n  end\n\n  # Process files as they are uploaded:\n  # process :scale =&gt; [200, 300]\n  #\n  # def scale(width, height)\n  #   # do something\n  # end\n\n\n  process :resize_to_fit =&gt; [400, 400]\n  process :auto_orient\n\n  # Create different versions of your uploaded files:\n  version :thumb do\n    process :auto_orient\n    process :resize_to_fit =&gt; [200, 200]\n  end\n\n  # Add a white list of extensions which are allowed to be uploaded.\n  # For images you might use something like this:\n  # def extension_white_list\n  #   %w(jpg jpeg gif png)\n  # end\n\n  # Override the filename of the uploaded files:\n  # Avoid using model.id or version_name here, see uploader/store.rb for details.\n  # def filename\n  #   \"something.jpg\" if original_filename\n  # end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 3909, "user_id": 2757398, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/D7ZKF.jpg?s=128&g=1", "display_name": "Nick Gilbert", "link": "https://stackoverflow.com/users/2757398/nick-gilbert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 722, "favorite_count": 0, "accepted_answer_id": 40535146, "answer_count": 2, "score": 1, "last_activity_date": 1478804592, "creation_date": 1478623996, "last_edit_date": 1495540974, "question_id": 40492353, "link": "https://stackoverflow.com/questions/40492353/ruby-on-rails-image-uploads-sideways-from-mobile", "title": "Ruby on Rails: Image Uploads Sideways from Mobile", "body": "<p>I'm working on a web application that uses CarrierWave and MiniMagick to handle image uploads for account profile pictures. Right now my AvatarUploader class looks like this</p>\n\n<pre><code>class AvatarUploader &lt; CarrierWave::Uploader::Base\n\n  # Include RMagick or MiniMagick support:\n  # include CarrierWave::RMagick\n  include CarrierWave::MiniMagick\n\n  # In the uploader:\n  def auto_orient\n    manipulate! do |img|\n      img = img.auto_orient\n    end\n  end\n\n  # Choose what kind of storage to use for this uploader:\n  # storage :file\n  # storage :fog\n\n  # Override the directory where uploaded files will be stored.\n  # This is a sensible default for uploaders that are meant to be mounted:\n  def store_dir\n    \"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}\"\n  end\n\n  # Provide a default URL as a default if there hasn't been a file uploaded:\n  def default_url\n    ActionController::Base.helpers.asset_path('default_avatar.png')\n  end\n\n  # Process files as they are uploaded:\n  # process :scale =&gt; [200, 300]\n  #\n  # def scale(width, height)\n  #   # do something\n  # end\n\n  # Create different versions of your uploaded files:\n  version :thumb do\n    process :auto_orient\n    process :resize_to_fill =&gt; [200, 200]\n  end\n\n  # Add a white list of extensions which are allowed to be uploaded.\n  # For images you might use something like this:\n  # def extension_white_list\n  #   %w(jpg jpeg gif png)\n  # end\n\n  # Override the filename of the uploaded files:\n  # Avoid using model.id or version_name here, see uploader/store.rb for details.\n  # def filename\n  #   \"something.jpg\" if original_filename\n  # end\n\nend\n</code></pre>\n\n<p>and the field for handling avatar upload in the form looks like this</p>\n\n<pre><code>.row\n  - if f.object.avatar.present?\n    .field\n      = image_tag f.object.avatar.url\n  = f.input :avatar, label: f.object.avatar.present? ? 'Replace Avatar' : 'Avatar'\n</code></pre>\n\n<p>This all works great on the desktop version of my site but when a user uploads a profile pic they take from their mobile phone it gets turned sideways 90 degrees and I can't figure out why. I thought adding the auto_orient code from <a href=\"https://stackoverflow.com/questions/18519160/exif-image-rotation-issue-using-carrierwave-and-rmagick-to-upload-to-s3\">this question</a> would fix the problem but it did not</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 3, "creation_date": 1478623175, "post_id": 40492114, "comment_id": 68228303, "body": "You&#39;re missing an <code>end</code>."}], "answers": [{"comments": [{"owner": {"reputation": 28, "user_id": 7100306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69a1b29185045594fb281a0bc0dc9d94?s=128&d=identicon&r=PG&f=1", "display_name": "CCramer", "link": "https://stackoverflow.com/users/7100306/ccramer"}, "edited": false, "score": 0, "creation_date": 1478623516, "post_id": 40492156, "comment_id": 68228497, "body": "Well this is just a short snippet from the begging of the code I have, looking through everything in Sublime, I can see the end for the Guide class, but it&#39;s like 80 lines down. I didn&#39;t think I should post that much text in the question. Should I post everything? Also, if it were the Guide class missing an end, wouldn&#39;t that show an error down further at the bottom of the code, as opposed to right near the beginning?"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 28, "user_id": 7100306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69a1b29185045594fb281a0bc0dc9d94?s=128&d=identicon&r=PG&f=1", "display_name": "CCramer", "link": "https://stackoverflow.com/users/7100306/ccramer"}, "edited": false, "score": 0, "creation_date": 1478623751, "post_id": 40492156, "comment_id": 68228654, "body": "Yes, normally I would expect the line number to be the last line in that case. If your code is really long you can upload somewhere like <a href=\"https://gist.github.com/\" rel=\"nofollow noreferrer\">gist.github.com</a> or <a href=\"http://pastebin.com/\" rel=\"nofollow noreferrer\">pastebin.com</a>"}, {"owner": {"reputation": 28, "user_id": 7100306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69a1b29185045594fb281a0bc0dc9d94?s=128&d=identicon&r=PG&f=1", "display_name": "CCramer", "link": "https://stackoverflow.com/users/7100306/ccramer"}, "edited": false, "score": 0, "creation_date": 1478623907, "post_id": 40492156, "comment_id": 68228749, "body": "Like this? <a href=\"https://gist.github.com/Cymricz/c406d01571524eecb61cb43274d0f7b6\" rel=\"nofollow noreferrer\">gist.github.com/Cymricz/c406d01571524eecb61cb43274d0f7b6</a>"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 28, "user_id": 7100306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69a1b29185045594fb281a0bc0dc9d94?s=128&d=identicon&r=PG&f=1", "display_name": "CCramer", "link": "https://stackoverflow.com/users/7100306/ccramer"}, "edited": false, "score": 0, "creation_date": 1478624199, "post_id": 40492156, "comment_id": 68228936, "body": "I cannot reproduce the error with that code. My only guess is that the error message is coming from the <code>claim</code> you are requiring, but I would expect that error message to point to that file."}, {"owner": {"reputation": 28, "user_id": 7100306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69a1b29185045594fb281a0bc0dc9d94?s=128&d=identicon&r=PG&f=1", "display_name": "CCramer", "link": "https://stackoverflow.com/users/7100306/ccramer"}, "edited": false, "score": 0, "creation_date": 1478628951, "post_id": 40492156, "comment_id": 68231648, "body": "Oh good, I&#39;m not the only one confused. I will post a link to the claim file when I get home from work then. I would assume the same thing, but I thought maybe the error is indicating the line after the actual mistake?"}, {"owner": {"reputation": 28, "user_id": 7100306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69a1b29185045594fb281a0bc0dc9d94?s=128&d=identicon&r=PG&f=1", "display_name": "CCramer", "link": "https://stackoverflow.com/users/7100306/ccramer"}, "edited": false, "score": 0, "creation_date": 1478639685, "post_id": 40492156, "comment_id": 68237232, "body": "<a href=\"https://gist.github.com/Cymricz/322dab1399f7658f00b15ecf6a5171d6\" rel=\"nofollow noreferrer\">gist.github.com/Cymricz/322dab1399f7658f00b15ecf6a5171d6</a> here is a link to the &#39;claim&#39; file that is being required. Do you think it matters that this code is super incomplete? I just wanted to run it to see if everything works that I have so far."}, {"owner": {"reputation": 28, "user_id": 7100306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69a1b29185045594fb281a0bc0dc9d94?s=128&d=identicon&r=PG&f=1", "display_name": "CCramer", "link": "https://stackoverflow.com/users/7100306/ccramer"}, "edited": false, "score": 0, "creation_date": 1478707033, "post_id": 40492156, "comment_id": 68264120, "body": "Well crap. I guess it really is a mystery. Okie dokey! I&#39;ll look into it, I must have done something wriong."}, {"owner": {"reputation": 28, "user_id": 7100306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69a1b29185045594fb281a0bc0dc9d94?s=128&d=identicon&r=PG&f=1", "display_name": "CCramer", "link": "https://stackoverflow.com/users/7100306/ccramer"}, "edited": false, "score": 0, "creation_date": 1478707111, "post_id": 40492156, "comment_id": 68264178, "body": "Well crap. I guess it really is a mystery. Okie dokey! I&#39;ll look into it, I must have done something wrong. Thanks so much for your help!"}], "tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1478623284, "creation_date": 1478623284, "answer_id": 40492156, "question_id": 40492114, "link": "https://stackoverflow.com/questions/40492114/ruby-mystery-syntax-error/40492156#40492156", "title": "Ruby mystery syntax error", "body": "<p>Fix the formatting and the answer becomes clear</p>\n\n<pre><code>require 'claim'\n\nclass Guide\n   class Config\n      @@actions = ['add', 'list', 'find', 'quit']\n\n      def self.actions\n        @@actions\n      end\n   end\n</code></pre>\n\n<p>Every <code>class</code> and <code>def</code> needs to have a matching <code>end</code>. You are missing one.</p>\n"}, {"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 1, "last_activity_date": 1478623297, "creation_date": 1478623297, "answer_id": 40492162, "question_id": 40492114, "link": "https://stackoverflow.com/questions/40492114/ruby-mystery-syntax-error/40492162#40492162", "title": "Ruby mystery syntax error", "body": "<p>I formatted your code and it seems you missed the <code>end</code> for the <code>Guide</code> class.</p>\n"}, {"tags": [], "owner": {"reputation": 28, "user_id": 7100306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69a1b29185045594fb281a0bc0dc9d94?s=128&d=identicon&r=PG&f=1", "display_name": "CCramer", "link": "https://stackoverflow.com/users/7100306/ccramer"}, "is_accepted": true, "score": 0, "last_activity_date": 1478889256, "creation_date": 1478889256, "answer_id": 40554118, "question_id": 40492114, "link": "https://stackoverflow.com/questions/40492114/ruby-mystery-syntax-error/40554118#40554118", "title": "Ruby mystery syntax error", "body": "<p>In case anybody comes across this question later, I fixed the issue. All I did was copy all the code in the file, delete the file, then make a new file with the same name and paste all the code in. After that it worked. So...I don't really know what the actual problem was, but it's fixed now! </p>\n"}], "owner": {"reputation": 28, "user_id": 7100306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/69a1b29185045594fb281a0bc0dc9d94?s=128&d=identicon&r=PG&f=1", "display_name": "CCramer", "link": "https://stackoverflow.com/users/7100306/ccramer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 40554118, "answer_count": 3, "score": -1, "last_activity_date": 1478889256, "creation_date": 1478623132, "last_edit_date": 1478639418, "question_id": 40492114, "link": "https://stackoverflow.com/questions/40492114/ruby-mystery-syntax-error", "title": "Ruby mystery syntax error", "body": "<p>I'm new to Ruby so I'm afraid this is a dumb question, but I just cannot figure out why I'm getting this error:</p>\n\n<pre><code>init.rb: C:/Users/dmpk/Desktop/warranty-pro/lib/guide.rb:2: syntax error, unexpected end-of-input, expecting keyword_end (SyntaxError)\n</code></pre>\n\n<p>Here is a sample of the file in question</p>\n\n<pre><code>require 'claim'\n\nclass Guide\n\n  class Config\n    @@actions = ['add', 'list', 'find', 'quit']\n\n    def self.actions\n      @@actions\n    end\n  end\n</code></pre>\n\n<p>The first line in the example above is line 1, the last line is line 10.\nSo it says it was expecting 'end' on line 2, and I don't understand why.</p>\n"}, {"tags": ["ruby", "regex", "capture-group"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1478622357, "post_id": 40491839, "comment_id": 68227757, "body": "No, using a simple regex with repeated capturing groups will not work that way. You need to split the second capture with <code>,</code> as a post-process step. Ruby regex engine does not keep the capture stack."}, {"owner": {"reputation": 769, "user_id": 6155692, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0e4ef26e040c1b1fbc5f10777e5b0649?s=128&d=identicon&r=PG&f=1", "display_name": "Zac", "link": "https://stackoverflow.com/users/6155692/zac"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1478622478, "post_id": 40491839, "comment_id": 68227830, "body": "That&#39;s a shame - thanks, anyway"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1478622548, "post_id": 40491839, "comment_id": 68227888, "body": "Very few regex flavors have capture group stack support, only .NET and Python PyPi regex module support them by default. A close pattern would be <a href=\"http://rubular.com/r/BDocFayOkZ\" rel=\"nofollow noreferrer\"><code>&#47;(?:\\G(?!\\A),\\s*|(?&lt;command&gt;[^&lt;&gt;\\s]+)&lt;)(?&lt;args&gt;\\d+)&#47;</code></a> but it uses multiple matching, and if you have more than one occurrences in the input, you might have trouble delimiting them."}, {"owner": {"reputation": 769, "user_id": 6155692, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0e4ef26e040c1b1fbc5f10777e5b0649?s=128&d=identicon&r=PG&f=1", "display_name": "Zac", "link": "https://stackoverflow.com/users/6155692/zac"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1478622954, "post_id": 40491839, "comment_id": 68228155, "body": "I tried that out on <code>print&lt;1, 2, 3&gt;</code> and the <i>args</i> capture was just &#39;1&#39; - it&#39;s fine, anyway - i&#39;m just going to use the splitting thing you mentioned before"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1478623149, "post_id": 40491839, "comment_id": 68228285, "body": "@WiktorStribi\u017cew why answer in the comments? I would have upvoted you."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1478623496, "post_id": 40491839, "comment_id": 68228487, "body": "@Max, I like to post when I have a good solution on hands, now I only have <a href=\"http://ideone.com/fbmnOt\" rel=\"nofollow noreferrer\">ideone.com/fbmnOt</a> and have little time to enhance it."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1478643062, "post_id": 40491839, "comment_id": 68238730, "body": "@Max: Now, posted, when the kids have gone to bed, I could try my hand at it."}], "answers": [{"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1478642937, "creation_date": 1478642937, "answer_id": 40497285, "question_id": 40491839, "link": "https://stackoverflow.com/questions/40491839/how-to-have-an-undefined-amount-of-captures-in-a-regex/40497285#40497285", "title": "How to have an undefined amount of captures in a regex?", "body": "<p>It is not possible to get such an output using a simple regex with repeated capturing groups in Ruby regex as the engine does not keep the capture stack. </p>\n\n<p>You need to split the second capture with <code>,</code> as a post-process step.</p>\n\n<p>See <a href=\"http://ideone.com/orGNBm\" rel=\"nofollow noreferrer\">Ruby demo</a>:</p>\n\n<pre><code>def cmd_split(s)\n    rx = /(?&lt;command&gt;[^&lt;&gt;\\s]+)(&lt;(?&lt;args&gt;(\\d+)+(?:,\\s*\\d+)*)&gt;)?/\n    res = []\n    s.scan(rx) { \n        res &lt;&lt; ($~[:args] != nil ? \n            Hash[\"command\", $~[:command], \"args\", $~[:args].split(/,\\s*/)] : \n            Hash[$~[:command], \"\"]) }\n    return res\nend\n\nputs cmd_split(\"print&lt;1, 2, 3&gt;\") # =&gt; {\"command\"=&gt;\"print\", \"args\"=&gt;[\"1\", \"2\", \"3\"]}\nputs cmd_split(\"disp&lt;1&gt;\")        # =&gt; {\"command\"=&gt;\"disp\", \"args\"=&gt;[\"1\"]}\nputs cmd_split(\"+\")              # =&gt; {\"+\"=&gt;\"\"}\n</code></pre>\n"}], "owner": {"reputation": 769, "user_id": 6155692, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/0e4ef26e040c1b1fbc5f10777e5b0649?s=128&d=identicon&r=PG&f=1", "display_name": "Zac", "link": "https://stackoverflow.com/users/6155692/zac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 40497285, "answer_count": 1, "score": 1, "last_activity_date": 1478642937, "creation_date": 1478622232, "question_id": 40491839, "link": "https://stackoverflow.com/questions/40491839/how-to-have-an-undefined-amount-of-captures-in-a-regex", "title": "How to have an undefined amount of captures in a regex?", "body": "<p>I'm making a simple stack-based language which uses <em>commands</em> to manipulate the stack. When I find a command in the source, I use this regex to separate out the actual command name, such as <em>sum</em>, and the arguments to the command. Arguments are surrounded by triangle brackets and are separated by commas.</p>\n\n<p>Here's the regex I'm currently using:</p>\n\n<pre><code>(?&lt;command&gt;[^&lt;&gt;\\s]+)(\\&lt;(?&lt;args&gt;(\\d+)+(?&gt;,\\s*\\d+)*)\\&gt;)?\n</code></pre>\n\n<p>Now this works fine, and here are some examples of it working:</p>\n\n<pre><code>+              =&gt; command: '+', args: nil\nsum&lt;5&gt;         =&gt; command: 'sum', args: '5'\nprint&lt;1, 2, 3&gt; =&gt; command: 'print', args: '1, 2, 3'\n</code></pre>\n\n<p>This works exactly as I want for each one but the last. My question is, is there a way to capture each argument separately? I mean like this:</p>\n\n<pre><code>print&lt;1, 2, 3&gt; =&gt; command: 'print', args: ['1', '2', '3']\n</code></pre>\n\n<p>By the way, I'm using the latest Ruby regex engine.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cookies", "rspec", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 1244, "user_id": 1042324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bf7d96c6cd1ad77fd77a1331b264819?s=128&d=identicon&r=PG", "display_name": "daniloisr", "link": "https://stackoverflow.com/users/1042324/daniloisr"}, "edited": false, "score": 0, "creation_date": 1478624069, "post_id": 40491466, "comment_id": 68228839, "body": "Can you run your tests with <code>-b</code> flag to enable the full backtrace, and then show us at least 10 lines of the top of the backlog?"}, {"owner": {"reputation": 455, "user_id": 1579356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c080fa6ede6f434a0f1dde852632b7b9?s=128&d=identicon&r=PG", "display_name": "Gabriel Borges Oliveira", "link": "https://stackoverflow.com/users/1579356/gabriel-borges-oliveira"}, "reply_to_user": {"reputation": 1244, "user_id": 1042324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bf7d96c6cd1ad77fd77a1331b264819?s=128&d=identicon&r=PG", "display_name": "daniloisr", "link": "https://stackoverflow.com/users/1042324/daniloisr"}, "edited": false, "score": 0, "creation_date": 1478626201, "post_id": 40491466, "comment_id": 68230177, "body": "Failures:    1) Showroom / Invites Setting the cookies when visiting the join page only sets the referral_code cookie when visiting the general join page      Failure/Error: expect(cookies.signed[&quot;guesstimated_user_type&quot;]).to be nil       NoMethodError:        undefined method <code>secret_token&#39; for #&lt;Rack::Request:0x007fa418df1ad8&gt;      # .&#47;vendor&#47;bundle&#47;ruby&#47;2.3.0&#47;gems&#47;actionpack-5.0.0.1&#47;lib&#47;actio&zwnj;&#8203;n_dispatch&#47;middlewar&zwnj;&#8203;e&#47;cookies.rb:241:in </code>upgrade_legacy_signed_cookies?&#39;      # ./vendor/bundle/ruby/2.3.0/gems/actionpack-5.0.0.1/lib/actio&zwnj;&#8203;n_dispatch/middlewar&zwnj;&#8203;e/cookies.rb:197:in `signed&#39;"}, {"owner": {"reputation": 1244, "user_id": 1042324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bf7d96c6cd1ad77fd77a1331b264819?s=128&d=identicon&r=PG", "display_name": "daniloisr", "link": "https://stackoverflow.com/users/1042324/daniloisr"}, "edited": false, "score": 0, "creation_date": 1478627930, "post_id": 40491466, "comment_id": 68231165, "body": "From which Rails version you are upgrading? Do you have the secrets.yml setup in your app? (<a href=\"http://guides.rubyonrails.org/4_1_release_notes.html#config-secrets-yml\" rel=\"nofollow noreferrer\">see here</a>)"}, {"owner": {"reputation": 455, "user_id": 1579356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c080fa6ede6f434a0f1dde852632b7b9?s=128&d=identicon&r=PG", "display_name": "Gabriel Borges Oliveira", "link": "https://stackoverflow.com/users/1579356/gabriel-borges-oliveira"}, "reply_to_user": {"reputation": 1244, "user_id": 1042324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bf7d96c6cd1ad77fd77a1331b264819?s=128&d=identicon&r=PG", "display_name": "daniloisr", "link": "https://stackoverflow.com/users/1042324/daniloisr"}, "edited": false, "score": 0, "creation_date": 1478628491, "post_id": 40491466, "comment_id": 68231425, "body": "4.2 , yes i have it!"}, {"owner": {"reputation": 1244, "user_id": 1042324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bf7d96c6cd1ad77fd77a1331b264819?s=128&d=identicon&r=PG", "display_name": "daniloisr", "link": "https://stackoverflow.com/users/1042324/daniloisr"}, "edited": false, "score": 0, "creation_date": 1478705201, "post_id": 40491466, "comment_id": 68262844, "body": "And on your secrets.yml you have the key <code>test:</code> ?"}, {"owner": {"reputation": 455, "user_id": 1579356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c080fa6ede6f434a0f1dde852632b7b9?s=128&d=identicon&r=PG", "display_name": "Gabriel Borges Oliveira", "link": "https://stackoverflow.com/users/1579356/gabriel-borges-oliveira"}, "reply_to_user": {"reputation": 1244, "user_id": 1042324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bf7d96c6cd1ad77fd77a1331b264819?s=128&d=identicon&r=PG", "display_name": "daniloisr", "link": "https://stackoverflow.com/users/1042324/daniloisr"}, "edited": false, "score": 0, "creation_date": 1478706385, "post_id": 40491466, "comment_id": 68263677, "body": "yes, with secret_key_base"}, {"owner": {"reputation": 1244, "user_id": 1042324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bf7d96c6cd1ad77fd77a1331b264819?s=128&d=identicon&r=PG", "display_name": "daniloisr", "link": "https://stackoverflow.com/users/1042324/daniloisr"}, "edited": false, "score": 0, "creation_date": 1478710849, "post_id": 40491466, "comment_id": 68266397, "body": "Did you run <code>rake secret</code> and it worked fine?"}, {"owner": {"reputation": 455, "user_id": 1579356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c080fa6ede6f434a0f1dde852632b7b9?s=128&d=identicon&r=PG", "display_name": "Gabriel Borges Oliveira", "link": "https://stackoverflow.com/users/1579356/gabriel-borges-oliveira"}, "reply_to_user": {"reputation": 1244, "user_id": 1042324, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0bf7d96c6cd1ad77fd77a1331b264819?s=128&d=identicon&r=PG", "display_name": "daniloisr", "link": "https://stackoverflow.com/users/1042324/daniloisr"}, "edited": false, "score": 0, "creation_date": 1478774405, "post_id": 40491466, "comment_id": 68291358, "body": "yeap, it generates the secret with no problem"}, {"owner": {"reputation": 5613, "user_id": 2339708, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/dL2a0.jpg?s=128&g=1", "display_name": "Eli Rose", "link": "https://stackoverflow.com/users/2339708/eli-rose"}, "edited": false, "score": 0, "creation_date": 1483649585, "post_id": 40491466, "comment_id": 70195009, "body": "Might this be helpful? <a href=\"https://sikac.hu/reconstruct-a-cookie-jar-and-read-signed-cookie-in-capybara-f71df387f9ff#.nqsa2cwxe\" rel=\"nofollow noreferrer\">sikac.hu/&hellip;</a>"}], "owner": {"reputation": 455, "user_id": 1579356, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c080fa6ede6f434a0f1dde852632b7b9?s=128&d=identicon&r=PG", "display_name": "Gabriel Borges Oliveira", "link": "https://stackoverflow.com/users/1579356/gabriel-borges-oliveira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 517, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1478622701, "creation_date": 1478621134, "last_edit_date": 1478622701, "question_id": 40491466, "link": "https://stackoverflow.com/questions/40491466/no-method-error-using-actiondispatchcookiescookiejar-after-update-to-rails-5", "title": "No method error using ActionDispatch::Cookies::CookieJar after update to Rails 5", "body": "<p>after update my app to Rails 5 i am struggling with the following error.\nI will post a snippet of my rspec test code.</p>\n\n<p>This is my cookies method. </p>\n\n<pre><code> def cookies\n    request = page.driver.request\n\n    ActionDispatch::Cookies::CookieJar.build(request, request.cookies).tap do |jar|\n      jar.update(\n        page.driver.browser.rack_mock_session.cookie_jar.to_hash\n      )\n    end\n  end\n</code></pre>\n\n<p>When i try to call cookies.signed</p>\n\n<pre><code>(byebug) cookies.signed\n*** NoMethodError Exception: undefined method `secret_token' for #&lt;Rack::Request:0x007fd9702b3710&gt;\n</code></pre>\n\n<p>Printscreen of the test error</p>\n\n<p><a href=\"https://i.stack.imgur.com/RKOI8.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/RKOI8.png\" alt=\"enter image description here\"></a></p>\n\n<p>Thanks </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routing"], "answers": [{"tags": [], "owner": {"reputation": 415, "user_id": 3265934, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ce1ee7db0675cee6b81cffa39041195a?s=128&d=identicon&r=PG&f=1", "display_name": "irene", "link": "https://stackoverflow.com/users/3265934/irene"}, "is_accepted": true, "score": 2, "last_activity_date": 1478621342, "last_edit_date": 1478621342, "creation_date": 1478620721, "answer_id": 40491319, "question_id": 40491220, "link": "https://stackoverflow.com/questions/40491220/single-routing-in-rails/40491319#40491319", "title": "Single routing in rails", "body": "<p>You do not say that the method shall take the action \"index\".</p>\n\n<p>Try it like this:</p>\n\n<pre><code> get \"user_posts/index\" =&gt; \"user_posts#index\", :as =&gt; 'user_root'\n</code></pre>\n\n<p>The first string is the link you will have to insert to reach this line, the second is the controller and the action, seperated by #. Controller is here 'UserPosts', action 'index'.</p>\n\n<p>Or if you want to pass your user_profile as a param and have another link:</p>\n\n<pre><code>get \"user_root/:profile\" =&gt; \"user_posts#index\"\n</code></pre>\n\n<p>There is also a good guide on routing for rails:\n<a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/routing.html</a></p>\n"}], "owner": {"reputation": 331, "user_id": 4931720, "user_type": "registered", "accept_rate": 56, "profile_image": "https://lh4.googleusercontent.com/-mosfIn_6OMU/AAAAAAAAAAI/AAAAAAAAABs/6VRfNqKaGcw/photo.jpg?sz=128", "display_name": "Damir Nurgaliev", "link": "https://stackoverflow.com/users/4931720/damir-nurgaliev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 40491319, "answer_count": 1, "score": 0, "last_activity_date": 1478621342, "creation_date": 1478620479, "question_id": 40491220, "link": "https://stackoverflow.com/questions/40491220/single-routing-in-rails", "title": "Single routing in rails", "body": "<p>I create a projects with Users and Posts. I have a posts on user profile. To declare @posts i created UserPosts controller and put this</p>\n\n<pre><code>  def index\n    @posts = current_user.posts \n  end\n</code></pre>\n\n<p>Now i need to write routs to this controller. I did:</p>\n\n<pre><code>get 'users/profile', as: 'user_root', controllers: { profile: \"userposts\" }\n</code></pre>\n\n<p>And got nilNil error. How should I correctly do this according to CRUD?</p>\n"}, {"tags": ["sql-server", "ruby", "macos", "freetds", "unixodbc"], "comments": [{"owner": {"reputation": 1747, "user_id": 2975759, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/93d2e3a997a68d49b307ee3c9be077e3?s=128&d=identicon&r=PG", "display_name": "Andrew Lobban", "link": "https://stackoverflow.com/users/2975759/andrew-lobban"}, "edited": false, "score": 0, "creation_date": 1478730364, "post_id": 40491147, "comment_id": 68275738, "body": "I should mention that this application is already running correctly in Fedora 23 fine. I am trying to run this application natively in OSX without changing the application itself and breaking it for the owners of this app."}], "answers": [{"comments": [{"owner": {"reputation": 1747, "user_id": 2975759, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/93d2e3a997a68d49b307ee3c9be077e3?s=128&d=identicon&r=PG", "display_name": "Andrew Lobban", "link": "https://stackoverflow.com/users/2975759/andrew-lobban"}, "edited": false, "score": 0, "creation_date": 1478730212, "post_id": 40509222, "comment_id": 68275684, "body": "I should mention that this application is already running correctly in Fedora 23 fine. I am trying to run this application natively in OSX without changing the application itself."}], "tags": [], "owner": {"reputation": 11187, "user_id": 1394697, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/658ae7ed330d8fc70df1c173960d27ad?s=128&d=identicon&r=PG", "display_name": "FlipperPA", "link": "https://stackoverflow.com/users/1394697/flipperpa"}, "is_accepted": false, "score": 1, "last_activity_date": 1478701369, "creation_date": 1478701369, "answer_id": 40509222, "question_id": 40491147, "link": "https://stackoverflow.com/questions/40491147/ruby-odbc-transaction-statement-not-updating-table-in-mssql-mac-osx/40509222#40509222", "title": "Ruby-ODBC transaction statement not updating table in MSSQL (Mac OSX)", "body": "<p>If it is anything like using <code>FreeTDS</code> with <code>Python</code> or <code>PHP</code>, you're going to have to set <code>autocommit=True</code> as part of your connection options. Search here for <code>autocommit</code> for more details:</p>\n\n<p><a href=\"http://www.ch-werner.de/rubyodbc/odbc.html\" rel=\"nofollow noreferrer\">http://www.ch-werner.de/rubyodbc/odbc.html</a></p>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 1747, "user_id": 2975759, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/93d2e3a997a68d49b307ee3c9be077e3?s=128&d=identicon&r=PG", "display_name": "Andrew Lobban", "link": "https://stackoverflow.com/users/2975759/andrew-lobban"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1478884356, "creation_date": 1478620302, "last_edit_date": 1478884356, "question_id": 40491147, "link": "https://stackoverflow.com/questions/40491147/ruby-odbc-transaction-statement-not-updating-table-in-mssql-mac-osx", "title": "Ruby-ODBC transaction statement not updating table in MSSQL (Mac OSX)", "body": "<p>I have successfully installed FreeTDS (1.00.15) with unixODBC (2.3.4) and accessed MS SQL Server (2014). I was able to verify that the issue I am currently having doesn't lie with FreeTDS and unixODBC. This is because from within isql client prompt, I am able to execute both select and update queries.  </p>\n\n<p>I am running El Capitan OS X with the Sinatra app which has the ruby-odbc gem, a requirement.</p>\n\n<p>The application is able to query records from the database properly. However, when I try running a ruby method which triggers an update statement, in the logs it says it's successful, but when I check the database nothing has been updated. This is hindering the ruby web app from updating the data source correctly.</p>\n\n<p><strong>New Information</strong></p>\n\n<p>So what I discovered this morning (11-11-2016) is that ruby-odbc doesn't work if the update statement is ran in a transaction block. However, if I comment out the transaction, it works perfectly fine and commits the data. This is the difference in the processing of the code between OS X and Fedora.</p>\n\n<p>Does anyone have a solution for this issue?</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 0, "creation_date": 1478619904, "post_id": 40490815, "comment_id": 68225862, "body": "the same way you added <code>size</code>, look, <code>image_tag</code> takes two arguments, the first one is the path to the image, and the second one is a Hash. So, in the second argument you can pass as many <code>key: value</code> pairs as you want, and those can be HTML attributes, so, simple add: <code>data-zoom-image: &quot;your zoom image path&quot;</code>."}, {"owner": {"reputation": 31, "user_id": 7132462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9543d1791ad5c02af8da3f765fd9b66c?s=128&d=identicon&r=PG&f=1", "display_name": "Kush", "link": "https://stackoverflow.com/users/7132462/kush"}, "reply_to_user": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 0, "creation_date": 1478693733, "post_id": 40490815, "comment_id": 68255819, "body": "thanks for you help much appreciated, I tried adding it in to the below and had no luck, I am not using direct img url&#39;s, please check below  <code>&lt;div class=&quot;sub-title&quot;&gt;          &lt;% if not @product.img_url.blank? %&gt;           &lt;%= link_to (image_tag @product.img_url, size: &quot;200x250&quot;, data-zoom-image: &quot;@product.img_url&quot;)               products_path, :title =&gt; &#39;return to &quot;all&quot; products ...&#39; %&gt;</code> @fanta"}, {"owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 0, "creation_date": 1478701057, "post_id": 40490815, "comment_id": 68260207, "body": "interpolation: &quot;#{@product.img_url}&quot;"}, {"owner": {"reputation": 31, "user_id": 7132462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9543d1791ad5c02af8da3f765fd9b66c?s=128&d=identicon&r=PG&f=1", "display_name": "Kush", "link": "https://stackoverflow.com/users/7132462/kush"}, "reply_to_user": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 0, "creation_date": 1478795869, "post_id": 40490815, "comment_id": 68305196, "body": "Thanks for your help but still does not work, must be an issue with my website. <code>div class=&quot;sub-title&quot;&gt;          &lt;% if not @product.img_url.blank? %&gt;           &lt;%= link_to (image_tag @product.img_url, size: &quot;200x250&quot;, data-zoom-image: &quot;@product.img_url&quot;),               products_path, :title =&gt; &#39;return to &quot;all&quot; products ...&#39; %&gt;          &lt;% else %&gt;           &lt;%= image_tag &quot;no-image.jpg&quot;, :size =&gt; &quot;200x250&quot; %&gt;         &lt;% end %&gt;       &lt;&#47;div&gt; </code>"}], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 10781565, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7ee97501f0b91b8324aa2502f1f18e4?s=128&d=identicon&r=PG&f=1", "display_name": "Eva S.", "link": "https://stackoverflow.com/users/10781565/eva-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1548374396, "creation_date": 1548374396, "answer_id": 54357178, "question_id": 40490815, "link": "https://stackoverflow.com/questions/40490815/how-to-include-data-zoom-image-in-my-image-tag-on-ruby-rails-4-3-4/54357178#54357178", "title": "How to include data-zoom-image in my image_tag on ruby rails 4.3.4", "body": "<p>This is a very old question, but maybe this is useful for some. The dashes (-) need to be changed to underscores (_). You then also won't need the quotation marks. Use:</p>\n\n<pre><code>&lt;%= link_to (image_tag (@product.img_url, size: \"200x250\", data_zoom_image: @product.img_url)) %&gt;\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 7132462, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9543d1791ad5c02af8da3f765fd9b66c?s=128&d=identicon&r=PG&f=1", "display_name": "Kush", "link": "https://stackoverflow.com/users/7132462/kush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 603, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548374396, "creation_date": 1478619380, "question_id": 40490815, "link": "https://stackoverflow.com/questions/40490815/how-to-include-data-zoom-image-in-my-image-tag-on-ruby-rails-4-3-4", "title": "How to include data-zoom-image in my image_tag on ruby rails 4.3.4", "body": "<p>I am trying to get my images to zoom in on my website.</p>\n\n<p>I have added </p>\n\n<pre><code>gem 'elevatezoom-rails'\n</code></pre>\n\n<p>to my GEMFILE,</p>\n\n<p>I have also added </p>\n\n<pre><code>$(\"#zoom_01\").elevateZoom();\n</code></pre>\n\n<p>to my application.js file</p>\n\n<p>I am just abit confused due to being a new use on where to add\n    <strong>data-zoom-image=\"images/large/image1.jpg</strong></p>\n\n<p>In the code below:</p>\n\n<pre><code>  &lt;div class=\"sub-title\"&gt; \n    &lt;% if not @product.img_url.blank? %&gt;\n      &lt;%= link_to (image_tag @product.img_url, size: \"200x250\")\n          products_path, :title =&gt; 'return to \"all\" products ...' %&gt; \n    &lt;% else %&gt;\n      &lt;%= image_tag \"no-image.jpg\", :size =&gt; \"200x250\" %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt; \n</code></pre>\n"}, {"tags": ["css", "ruby-on-rails", "ruby", "twitter-bootstrap", "loops"], "answers": [{"comments": [{"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1478624674, "post_id": 40492473, "comment_id": 68229240, "body": "thank you for your suggestion but both options gives the same result, I&#39;m only seeing the first image <code>index ==0</code> in both options. I&#39;m not able to select between images in the carousel"}, {"owner": {"reputation": 1030, "user_id": 2100645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c9894864f33c42fffe19330d2e00d1b?s=128&d=identicon&r=PG", "display_name": "Lucas Costa", "link": "https://stackoverflow.com/users/2100645/lucas-costa"}, "reply_to_user": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1478624931, "post_id": 40492473, "comment_id": 68229385, "body": "Are you sure that the problem resides in the <code>for</code> loop? Can you see all the images in HTML (using the Chrome inspector, for instance)?"}, {"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1478625033, "post_id": 40492473, "comment_id": 68229451, "body": "Yes the images are there, I can see them by using this code on the same page <code>&lt;% @product.photos.each_with_index do |photo, index| %&gt;           &lt;div class=&quot;row&quot;&gt;       &lt;% if index == 0 %&gt;         &lt;div class=&quot;col-md-6 col-xs-12 center-block&quot;&gt;           &lt;%= image_tag(photo.image.url(:large)) %&gt;                             &lt;&#47;div&gt;       &lt;% else %&gt;       &lt;div class=&quot; col-md-6 col-xs-12 center-block&quot;&gt;         &lt;%= image_tag(photo.image.url(:thumb)) %&gt;            &lt;&#47;div&gt;       &lt;% end %&gt;      &lt;% end %&gt;       \t&lt;&#47;div&gt;</code>"}, {"owner": {"reputation": 1030, "user_id": 2100645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c9894864f33c42fffe19330d2e00d1b?s=128&d=identicon&r=PG", "display_name": "Lucas Costa", "link": "https://stackoverflow.com/users/2100645/lucas-costa"}, "reply_to_user": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1478625575, "post_id": 40492473, "comment_id": 68229818, "body": "Any chance of having some weird CSS style being applied to the <code>carousel-inner</code> or <code>item</code> class? The fact of the code without these classes has work makes me believe that the problem isn&#39;t in the <code>for</code> loop"}, {"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1478626426, "post_id": 40492473, "comment_id": 68230298, "body": "well I haven&#39;t modified any CSS style yet for this. But if I remove the <code>.item</code> or the <code>.carosuel-inner</code> I see all three images piled up on each other.  So could that be a <code>bootstrap</code>problem?"}, {"owner": {"reputation": 1030, "user_id": 2100645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c9894864f33c42fffe19330d2e00d1b?s=128&d=identicon&r=PG", "display_name": "Lucas Costa", "link": "https://stackoverflow.com/users/2100645/lucas-costa"}, "reply_to_user": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1478627210, "post_id": 40492473, "comment_id": 68230779, "body": "Are you using the <a href=\"https://github.com/twbs/bootstrap-sass\" rel=\"nofollow noreferrer\">official bootstrap gem for Rails</a>? Maybe is just a configuration problem, a missing import or other stuff like that."}, {"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1478627904, "post_id": 40492473, "comment_id": 68231146, "body": "I&#39;m using this setup in the <code>gemfile</code>                                                            <code>gem &#39;bootstrap-sass&#39;, &#39;~&gt; 3.3&#39;, &#39;&gt;= 3.3.6&#39; # Use SCSS for stylesheets gem &#39;sass-rails&#39;, &#39;~&gt; 5.0&#39;</code>   this is the setup I&#39;ve always used"}], "tags": [], "owner": {"reputation": 1030, "user_id": 2100645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c9894864f33c42fffe19330d2e00d1b?s=128&d=identicon&r=PG", "display_name": "Lucas Costa", "link": "https://stackoverflow.com/users/2100645/lucas-costa"}, "is_accepted": false, "score": 2, "last_activity_date": 1478624344, "creation_date": 1478624344, "answer_id": 40492473, "question_id": 40490801, "link": "https://stackoverflow.com/questions/40490801/css-not-working-right-when-using-do-loop-in-bootstrap-modal-in-rails-app/40492473#40492473", "title": "CSS not working right when using Do Loop in bootstrap modal in rails app", "body": "<p>The answer depends what you want.</p>\n\n<p><strong>option 1:</strong> you just want to handle the first case (note that here I'm using <code>else</code>)</p>\n\n<pre><code>&lt;% @product.photos.each_with_index do |photo, index| %&gt;\n  &lt;div class=\"carousel-inner\"&gt;\n    &lt;% if index == 0 %&gt;\n      &lt;div class=\"item active\"&gt;\n        &lt;%= image_tag(photo.image.url(:large), class: 'img-responsive') %&gt;\n      &lt;/div&gt;\n    &lt;% else %&gt;\n      &lt;div class=\"item\"&gt;\n        &lt;%= image_tag(photo.image.url(:large), class: 'img-responsive') %&gt;\n      &lt;/div&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>option 2:</strong> you want to handle the first and the second case (note that here I'm using <code>elsif</code> and <code>else</code>)</p>\n\n<pre><code>&lt;% @product.photos.each_with_index do |photo, index| %&gt;\n  &lt;div class=\"carousel-inner\"&gt;\n    &lt;% if index == 0 %&gt;\n      &lt;div class=\"item active\"&gt;\n        &lt;%= image_tag(photo.image.url(:large), class: 'img-responsive') %&gt;\n      &lt;/div&gt;\n    &lt;% elsif index == 1 %&gt;\n      &lt;div class=\"item\"&gt;\n        &lt;%= image_tag(photo.image.url(:large), class: 'img-responsive') %&gt;\n      &lt;/div&gt;\n    &lt;% else %&gt;\n      &lt;%# Your other code here %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1478648927, "post_id": 40498319, "comment_id": 68240733, "body": "Thank you so much @DaudiHell this did the trick for me, now it is working like a charm :("}, {"owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "reply_to_user": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "edited": false, "score": 0, "creation_date": 1478649072, "post_id": 40498319, "comment_id": 68240766, "body": "No problem, glad to help"}], "tags": [], "owner": {"reputation": 1019, "user_id": 5587988, "user_type": "registered", "accept_rate": 82, "profile_image": "https://graph.facebook.com/10207118714582472/picture?type=large", "display_name": "DaudiHell", "link": "https://stackoverflow.com/users/5587988/daudihell"}, "is_accepted": true, "score": 1, "last_activity_date": 1478648769, "creation_date": 1478648769, "answer_id": 40498319, "question_id": 40490801, "link": "https://stackoverflow.com/questions/40490801/css-not-working-right-when-using-do-loop-in-bootstrap-modal-in-rails-app/40498319#40498319", "title": "CSS not working right when using Do Loop in bootstrap modal in rails app", "body": "<p>Ok, by looking at your code the problem seems to be in the first lines of the <code>&lt;!-- Wrapper for slides --&gt;</code></p>\n\n<p>you are writing it like </p>\n\n<pre><code> &lt;% @product.photos.each_with_index do |photo, index| %&gt;\n  &lt;div class=\"carousel-inner\"&gt;\n</code></pre>\n\n<p>but it should be </p>\n\n<pre><code> &lt;div class=\"carousel-inner\"&gt;\n  &lt;% @product.photos.each_with_index do |photo, index| %&gt;\n</code></pre>\n\n<p>Otherwise the loop is inserting <code>.carousel-inner</code> to every image and that breaks the Carousel.</p>\n\n<p>Just switch those two lines and it should work. And remember to also switch the <code>&lt;/div&gt;</code> and the <code>&lt;% end %&gt;</code> at the bottom.</p>\n"}], "owner": {"reputation": 767, "user_id": 6893534, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/udUvu.jpg?s=128&g=1", "display_name": "Slowboy", "link": "https://stackoverflow.com/users/6893534/slowboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 40498319, "answer_count": 2, "score": 0, "last_activity_date": 1478648769, "creation_date": 1478619333, "last_edit_date": 1478647398, "question_id": 40490801, "link": "https://stackoverflow.com/questions/40490801/css-not-working-right-when-using-do-loop-in-bootstrap-modal-in-rails-app", "title": "CSS not working right when using Do Loop in bootstrap modal in rails app", "body": "<p>I'm trying to make product images appear as a carousel in a <code>bootstrap modal</code> window.</p>\n\n<p>As the code is now I'm only able to see the first image. At the moment there are three images for this product, uploaded with active admin.</p>\n\n<p>I have tried <code>else</code> <code>elsif</code> and  <code>index ==1</code>for the <code>else</code>. I have also tried other modification of in the code below. </p>\n\n<p>I'm kind of stuck, can anyone take a look at this and advise me?</p>\n\n<p>** UPDATE see context in comments from @Lucas Costa** </p>\n\n<p>the problem I'm experiencing seems to be because of the <code>CSS</code>, most probably the <code>.carousel-inner</code></p>\n\n<p>Have anyone ever had similar problem?</p>\n\n<pre><code> &lt;div class=\"container text-center\"&gt;\n\n   &lt;h1&gt; Click Me &lt;/h1&gt;\n    &lt;!-- Large modal --&gt;\n    &lt;button class=\"btn btn-default\" data-toggle=\"modal\" data-target=\".bs-example-modal-lg\"&gt;Large modal&lt;/button&gt;\n\n    &lt;div class=\"modal fade bs-example-modal-lg\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myLargeModalLabel\" aria-hidden=\"true\"&gt;\n    &lt;div class=\"modal-dialog modal-lg\"&gt;\n    &lt;div class=\"modal-content\"&gt;\n    &lt;div id=\"carousel-example-generic\" class=\"carousel slide\" data-ride=\"carousel\"&gt;\n\n   &lt;!-- Wrapper for slides --&gt;\n    &lt;% @product.photos.each_with_index do |photo, index| %&gt;\n    &lt;div class=\"carousel-inner\"&gt;\n    &lt;% if index == 0 %&gt;\n    &lt;div class=\"item active\"&gt;\n     &lt;%= image_tag(photo.image.url(:large), class: 'img-responsive') %&gt;\n    &lt;/div&gt;\n    &lt;% elsif index == 1 %&gt;\n    &lt;div class=\"item\"&gt;\n     &lt;%= image_tag(photo.image.url(:large), class: 'img-responsive') %&gt;\n  &lt;/div&gt;\n  &lt;% else index == 2%&gt;\n   &lt;div class=\"item\"&gt;\n     &lt;%= image_tag(photo.image.url(:large), class: 'img-responsive') %&gt;\n   &lt;/div&gt;\n  &lt;% end %&gt;\n &lt;/div&gt;\n&lt;% end %&gt;\n\n\n\n &lt;!-- Controls --&gt;\n  &lt;a class=\"left carousel-control\" href=\"#carousel-example-generic\" role=\"button\" data-slide=\"prev\"&gt;\n  &lt;span class=\"glyphicon glyphicon-chevron-left\"&gt;&lt;/span&gt;\n  &lt;/a&gt;\n  &lt;a class=\"right carousel-control\" href=\"#carousel-example-generic\" role=\"button\" data-slide=\"next\"&gt;\n  &lt;span class=\"glyphicon glyphicon-chevron-right\"&gt;&lt;/span&gt;\n  &lt;/a&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1478621725, "last_edit_date": 1478621725, "creation_date": 1478621287, "answer_id": 40491522, "question_id": 40490584, "link": "https://stackoverflow.com/questions/40490584/ruby-metaprogramming-define-method-drying-code/40491522#40491522", "title": "Ruby - metaprogramming, define_method, DRYing code", "body": "<p>The <code>element</code> class method is used to define new elements.</p>\n\n<p>You want something like</p>\n\n<pre><code>class ExampleClass &lt; Node\n  element :elements1\n  element :elements2\nend\n</code></pre>\n\n<p>Though there is a serious issue with the code your mentor gave you: the element names are stored in a class variable, which means they will be shared among all subclasses of <code>Node</code>. What you want are <em>class instance</em> variables.</p>\n\n<p>Replace this</p>\n\n<pre><code>cattr_accessor :element_names\nself.element_names = []\n</code></pre>\n\n<p>with this</p>\n\n<pre><code>def self.element_names\n  @element_names ||= []\nend\n</code></pre>\n\n<p>that way each subclass stores its own array of element names (and then as a bonus you no longer need any of that <code>ActiveModel</code> cruft).</p>\n"}], "owner": {"reputation": 283, "user_id": 5962592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/09e937e3c5361ac06e5c17d9f0a133db?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/5962592/jes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 40491522, "answer_count": 1, "score": -1, "last_activity_date": 1478621725, "creation_date": 1478618622, "question_id": 40490584, "link": "https://stackoverflow.com/questions/40490584/ruby-metaprogramming-define-method-drying-code", "title": "Ruby - metaprogramming, define_method, DRYing code", "body": "<p>I created project, in which I have many classes, and every class has a similiar structure:</p>\n\n<pre><code>module Project\n  class ExampleClass\n    attr_accessor :title, :body, :elements_1, :elements_2\n\n    def initialize(attributes = {})\n      self.title = attributes[:title]\n      self.body = attributes[:body]\n      self.elements1 = attributes[:elements1] || []\n      self.elements2 = attributes[:elements2] || []\n    end\n\n    def ==(other)\n      title == other.title &amp;&amp; body == other.body &amp;&amp; elements1 == other.elements1 &amp;&amp; elements2 == other.elements2\n    end\n  end\nend\n</code></pre>\n\n<p>Only differences between classes are its name and names of <code>elements1</code> and <code>elements2</code> arrays.\nMy mentor gave me code to DRY my project:</p>\n\n<pre><code>module Project\n  class Node\n    extend ActiveModel::Naming\n    include ActiveModel::Model\n\n    attr_accessor :body, :title\n    cattr_accessor :element_names\n    self.element_names = []\n\n    def element\n      element_names.reduce([]) do |name, memo|\n        memo + send(name)\n      end\n    end\n\n    def ==(other)\n      body == other.body &amp;&amp; title == other.title &amp;&amp; element_names.all? { |name| element_by_name(name) == other.element_by_name(name) }\n    end\n\n    def element_by_name(name)\n      instance_variable_get(\"@#{name}\") || instance_variable_set(\"@#{name}\", [])\n    end\n\n    module ClassMethods\n      def element(name)\n        elements_names &lt;&lt; name\n\n        attr_writer name\n        define_method(name) do\n          element_by_name(name)\n        end\n      end\n    end\n    extend ClassMethods\n  end\nend\n</code></pre>\n\n<p>It's quite above my level, I'm trying to make it work - every class should inherit after <code>Node</code>. I must somehow pass attributes - <code>elements1</code> and <code>elements2</code>. I was experimenting with</p>\n\n<pre><code>class ExampleClass &lt; Node     \n  cattr_accessor :element_names\n  self.element_names = [:elements1, elements2]\nend\n</code></pre>\n\n<p>in my <code>ExampleClass</code> to pass names of arrays.</p>\n\n<p>I also tried with <code>initialize</code>, but I can't make it work. I'll be grateful for any help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "flash-message"], "answers": [{"comments": [{"owner": {"reputation": 10344, "user_id": 1509401, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HiLe4.jpg?s=128&g=1", "display_name": "thank_you", "link": "https://stackoverflow.com/users/1509401/thank-you"}, "edited": false, "score": 0, "creation_date": 1478619404, "post_id": 40490766, "comment_id": 68225495, "body": "I don&#39;t know how I feel about using the <code>try</code> method. It had crossed my mind. I&#39;ll think about it some more. Thanks."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 10344, "user_id": 1509401, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HiLe4.jpg?s=128&g=1", "display_name": "thank_you", "link": "https://stackoverflow.com/users/1509401/thank-you"}, "edited": false, "score": 0, "creation_date": 1478619523, "post_id": 40490766, "comment_id": 68225590, "body": "@jason328 I don&#39;t really understand what your expected behaviour is. Documentation is there, and it definitely does not have <code>.first.last</code> functionality out of the box :)"}, {"owner": {"reputation": 10344, "user_id": 1509401, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HiLe4.jpg?s=128&g=1", "display_name": "thank_you", "link": "https://stackoverflow.com/users/1509401/thank-you"}, "edited": false, "score": 0, "creation_date": 1478619575, "post_id": 40490766, "comment_id": 68225623, "body": "No you&#39;re right. I was just hopeful for something more. C&#39;est la vie."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 1, "last_activity_date": 1478619255, "creation_date": 1478619255, "answer_id": 40490766, "question_id": 40490557, "link": "https://stackoverflow.com/questions/40490557/selecting-the-first-flash-message-in-rails/40490766#40490766", "title": "Selecting the first flash message in Rails", "body": "<p>If you're looking for a way to shorten it, you can use safe navigation:</p>\n\n<pre><code>flash.try(:first).try(:last) # Ruby &lt; 2.3\nflash&amp;.first&amp;.last           # Ruby &gt;= 2.3\n</code></pre>\n\n<p>For list of flash hash methods refer to <a href=\"http://api.rubyonrails.org/classes/ActionDispatch/Flash/FlashHash.html\" rel=\"nofollow noreferrer\"><code>ActionDispatch::Flash::FlashHash</code></a> documentation.</p>\n"}], "owner": {"reputation": 10344, "user_id": 1509401, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HiLe4.jpg?s=128&g=1", "display_name": "thank_you", "link": "https://stackoverflow.com/users/1509401/thank-you"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 40490766, "answer_count": 1, "score": 0, "last_activity_date": 1478623536, "creation_date": 1478618532, "last_edit_date": 1478623536, "question_id": 40490557, "link": "https://stackoverflow.com/questions/40490557/selecting-the-first-flash-message-in-rails", "title": "Selecting the first flash message in Rails", "body": "<p>I only want to grab the first flash message. I have to send this message to an object. So far I have </p>\n\n<pre><code>flash.first.last if flash.present? and flash.first.present?\n</code></pre>\n\n<p>In some cases the flash doesn't exist at all so I have to first check that it exists, then see if it has a message. I honestly don't like it. Does the FlashHash or Rails have a method that does this behavior out-of-the-box? Is there a cleaner way to do this? Thanks.</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7049750, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XZOwemTmsg0/AAAAAAAAAAI/AAAAAAAAABY/5lqPJOAaJ8M/photo.jpg?sz=128", "display_name": "Junnie \u7f52V\u7f52", "link": "https://stackoverflow.com/users/7049750/junnie-%e7%bd%92v%e7%bd%92"}, "edited": false, "score": 0, "creation_date": 1478619069, "post_id": 40490500, "comment_id": 68225257, "body": "Only d3.js .There is no framework @Antonio"}, {"owner": {"reputation": 691, "user_id": 4761914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xyiAo.jpg?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/4761914/antonio"}, "reply_to_user": {"reputation": 13, "user_id": 7049750, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XZOwemTmsg0/AAAAAAAAAAI/AAAAAAAAABY/5lqPJOAaJ8M/photo.jpg?sz=128", "display_name": "Junnie \u7f52V\u7f52", "link": "https://stackoverflow.com/users/7049750/junnie-%e7%bd%92v%e7%bd%92"}, "edited": false, "score": 0, "creation_date": 1478620949, "post_id": 40490500, "comment_id": 68226706, "body": "It&#39;s hard to beat JSON. I would reference the documentation from this point."}], "tags": [], "owner": {"reputation": 691, "user_id": 4761914, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/xyiAo.jpg?s=128&g=1", "display_name": "Antonio", "link": "https://stackoverflow.com/users/4761914/antonio"}, "is_accepted": true, "score": 0, "last_activity_date": 1478618310, "creation_date": 1478618310, "answer_id": 40490500, "question_id": 40490335, "link": "https://stackoverflow.com/questions/40490335/pass-query-result-from-rails-controller-to-javascript/40490500#40490500", "title": "Pass query result from rails controller to javascript", "body": "<p>It depends on how you have the javascript configured to receive payloads. I have no clue how you have the front end shaped to receive it. Are you using a framework such as Angular or Ember?</p>\n"}], "owner": {"reputation": 13, "user_id": 7049750, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XZOwemTmsg0/AAAAAAAAAAI/AAAAAAAAABY/5lqPJOAaJ8M/photo.jpg?sz=128", "display_name": "Junnie \u7f52V\u7f52", "link": "https://stackoverflow.com/users/7049750/junnie-%e7%bd%92v%e7%bd%92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "closed_date": 1478624135, "accepted_answer_id": 40490500, "answer_count": 1, "score": -1, "last_activity_date": 1478618310, "creation_date": 1478617773, "question_id": 40490335, "link": "https://stackoverflow.com/questions/40490335/pass-query-result-from-rails-controller-to-javascript", "closed_reason": "Needs more focus", "title": "Pass query result from rails controller to javascript", "body": "<p>I have a project which is based on ruby on rails and js in front end.In one of the controller I get the query result @sites which consists of many rows like\nid         amount\nNewYork    200\nSeattle    10000\nToronto    30\n...        ....</p>\n\n<p>Now I want to pass this arrays of objects to the front end which is js.In the javascript, I want to get the amount of every id.So what should I do? To make it in json? Or pass it by html?\nThanks so much.</p>\n"}, {"tags": ["javascript", "ruby", "ruby-on-rails-3", "tdd", "web-testing"], "answers": [{"comments": [{"owner": {"reputation": 2227, "user_id": 3942186, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/OnOyW.jpg?s=128&g=1", "display_name": "Emna Ayadi", "link": "https://stackoverflow.com/users/3942186/emna-ayadi"}, "edited": false, "score": 0, "creation_date": 1486243746, "post_id": 42045803, "comment_id": 71264682, "body": "Thanks for your answer :)"}], "tags": [], "owner": {"reputation": 9845, "user_id": 119822, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/wnqih.jpg?s=128&g=1", "display_name": "Andy Waite", "link": "https://stackoverflow.com/users/119822/andy-waite"}, "is_accepted": true, "score": 1, "last_activity_date": 1486243679, "creation_date": 1486243679, "answer_id": 42045803, "question_id": 40489441, "link": "https://stackoverflow.com/questions/40489441/how-to-automate-test-driven-development-tdd-syntax-for-websites-coded-in-ruby/42045803#42045803", "title": "How to automate Test driven development (TDD) syntax for websites coded in Ruby?", "body": "<p>The syntax shown is Gherkin. It can be automated with Cucumber or Spinach.</p>\n\n<p><a href=\"https://github.com/cucumber/cucumber-ruby\" rel=\"nofollow noreferrer\">https://github.com/cucumber/cucumber-ruby</a></p>\n\n<p><a href=\"https://github.com/codegram/spinach\" rel=\"nofollow noreferrer\">https://github.com/codegram/spinach</a></p>\n"}], "owner": {"reputation": 2227, "user_id": 3942186, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/OnOyW.jpg?s=128&g=1", "display_name": "Emna Ayadi", "link": "https://stackoverflow.com/users/3942186/emna-ayadi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 25, "favorite_count": 0, "accepted_answer_id": 42045803, "answer_count": 1, "score": 0, "last_activity_date": 1486243679, "creation_date": 1478615272, "last_edit_date": 1478678057, "question_id": 40489441, "link": "https://stackoverflow.com/questions/40489441/how-to-automate-test-driven-development-tdd-syntax-for-websites-coded-in-ruby", "title": "How to automate Test driven development (TDD) syntax for websites coded in Ruby?", "body": "<p>Having this syntax, how can i automate it and what IDE shall i use ?</p>\n\n<pre><code>When I fill in \"Email\" with \"\"\n  And I press \"Yes \u2013 this is my email address\"\n  Then I should see \"Email must be completed\"\n  When I fill in \"Email\" with \"emna@mail.com\"\n  And I press \"Yes \u2013 this is my email address\"\nThen a new user should exist \n</code></pre>\n\n<p>Shall i use javascript for that ?</p>\n"}, {"tags": ["ruby", "api", "oauth-2.0", "google-calendar-api"], "comments": [{"owner": {"reputation": 204, "user_id": 4405882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/736e12e2f385f177320e4f97efbc4b57?s=128&d=identicon&r=PG&f=1", "display_name": "Marcin O", "link": "https://stackoverflow.com/users/4405882/marcin-o"}, "edited": false, "score": 0, "creation_date": 1478697257, "post_id": 40489209, "comment_id": 68257884, "body": "Are you familiar with Service Accounts?  <a href=\"https://developers.google.com/identity/protocols/OAuth2ServiceAccount\" rel=\"nofollow noreferrer\">developers.google.com/identity/protocols/OAuth2ServiceAccoun&zwnj;&#8203;t</a>"}], "answers": [{"tags": [], "owner": {"reputation": 7155, "user_id": 5996134, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wo73L.jpg?s=128&g=1", "display_name": "KENdi", "link": "https://stackoverflow.com/users/5996134/kendi"}, "is_accepted": true, "score": 1, "last_activity_date": 1478736018, "last_edit_date": 1495541234, "creation_date": 1478736018, "answer_id": 40518005, "question_id": 40489209, "link": "https://stackoverflow.com/questions/40489209/google-api-one-authenticated-user-for-all/40518005#40518005", "title": "Google API: one authenticated user for all", "body": "<p>Maybe you need a <a href=\"https://developers.google.com/identity/protocols/OAuth2#serviceaccount\" rel=\"nofollow noreferrer\">service account</a> here. It is an account that belongs to your application instead of to an individual end-user. Your application calls Google APIs on behalf of the service account, and user consent is not required. (In non-service-account scenarios, your application calls Google APIs on behalf of end-users, and user consent is sometimes required.)</p>\n\n<p>The <a href=\"https://developers.google.com/google-apps/calendar/auth#perform-google-apps-domain-wide-delegation-of-authority\" rel=\"nofollow noreferrer\">Calendar API can use the Delegating domain-wide authority to the service account</a>. For example, an application that uses the Google Calendar API to add events to the calendars of all users in a Google Apps domain would use a service account to access the Google Calendar API on behalf of users.</p>\n\n<p>For more information, check these threads:</p>\n\n<ul>\n<li><p><a href=\"https://developers.google.com/identity/protocols/OAuth2ServiceAccount#delegatingauthority\" rel=\"nofollow noreferrer\">Delegating domain-wide authority to the service account</a> </p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/27117095/how-to-list-google-calendar-events-without-user-authentication\">How to list Google Calendar Events without User Authentication</a></p></li>\n<li><p><a href=\"https://stackoverflow.com/questions/37194135/embed-google-calendar-only-users-logged-into-my-website-not-necessarily-through?rq=1\">Embed Google Calendar only users logged into my website (not necessarily through Google) can see</a></p></li>\n</ul>\n"}], "owner": {"reputation": 378, "user_id": 1954933, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/FpFUs.jpg?s=128&g=1", "display_name": "Eduardo", "link": "https://stackoverflow.com/users/1954933/eduardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 40518005, "answer_count": 1, "score": 2, "last_activity_date": 1479330867, "creation_date": 1478614610, "last_edit_date": 1479330867, "question_id": 40489209, "link": "https://stackoverflow.com/questions/40489209/google-api-one-authenticated-user-for-all", "title": "Google API: one authenticated user for all", "body": "<p>I need to read/insert events into a specific calendar, using Google API. All registered users (in my app) can read and insert events into the calendar. I don't have to authenticate each user with OAuth 2.0, because the app will not read the user data - only specific account data.</p>\n\n<p>I'm a professor and all my students can read and insert in my calendar. So, they do not need to login (Google Account) to do it, because it's a single account's data.</p>\n\n<p>Is there a way to set a unique key for the main account?</p>\n\n<p>OAuth2 doesn't makes me sense.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1478615252, "post_id": 40489013, "comment_id": 68222471, "body": "What is <code>@my_cat</code>? Can you post actual working code (other than the duplicating part)?"}, {"owner": {"reputation": 6105, "user_id": 1700874, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad36477949cfd7db659cd4420537911c?s=128&d=identicon&r=PG&f=1", "display_name": "The Whiz of Oz", "link": "https://stackoverflow.com/users/1700874/the-whiz-of-oz"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1478615409, "post_id": 40489013, "comment_id": 68222597, "body": "that&#39;s a typo. Corrected. The working code looks exactly the same except the variable names."}], "answers": [{"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1478617517, "post_id": 40489500, "comment_id": 68224204, "body": "You cannot be sure that setters are defined, can you?"}, {"owner": {"reputation": 474, "user_id": 5379362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38f95f8ddc8d16b7945bccd6ba76e00?s=128&d=identicon&r=PG&f=1", "display_name": "Fede Bonisconti", "link": "https://stackoverflow.com/users/5379362/fede-bonisconti"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1478617790, "post_id": 40489500, "comment_id": 68224390, "body": "If setters are not defined, you can use <code>d.instance_variable_set(&quot;@#{k}&quot;, v)</code>"}], "tags": [], "owner": {"reputation": 474, "user_id": 5379362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e38f95f8ddc8d16b7945bccd6ba76e00?s=128&d=identicon&r=PG&f=1", "display_name": "Fede Bonisconti", "link": "https://stackoverflow.com/users/5379362/fede-bonisconti"}, "is_accepted": false, "score": 0, "last_activity_date": 1478615433, "creation_date": 1478615433, "answer_id": 40489500, "question_id": 40489013, "link": "https://stackoverflow.com/questions/40489013/ruby-duplicate-an-object-with-modified-params/40489500#40489500", "title": "Ruby duplicate an object with modified params", "body": "<p>You can override dup method to define your custom behavior</p>\n\n<pre><code>def dup(args = {})\n  d = super()\n  args.each do |k, v|\n    d.send(:\"#{k}=\", v)\n  end\n  d\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6105, "user_id": 1700874, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad36477949cfd7db659cd4420537911c?s=128&d=identicon&r=PG&f=1", "display_name": "The Whiz of Oz", "link": "https://stackoverflow.com/users/1700874/the-whiz-of-oz"}, "edited": false, "score": 0, "creation_date": 1478617496, "post_id": 40489701, "comment_id": 68224200, "body": "looks like it solves my problem so I will be stopping at this answer, thanks!"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1478618228, "post_id": 40489701, "comment_id": 68224707, "body": "The <code>:</code> is unnecessary. <code>instance_variable_set</code> accepts a string or a symbol."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1478618663, "post_id": 40489701, "comment_id": 68224987, "body": "Both work fine, yes. From the doc : &quot;If the instance variable name is passed as a string, that string is converted to a symbol.&quot; I might as well send a symbol directly."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 1, "last_activity_date": 1478616020, "creation_date": 1478616020, "answer_id": 40489701, "question_id": 40489013, "link": "https://stackoverflow.com/questions/40489013/ruby-duplicate-an-object-with-modified-params/40489701#40489701", "title": "Ruby duplicate an object with modified params", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.3.1/Object.html#method-i-instance_variable_set\" rel=\"nofollow noreferrer\">Object#instance_variable_set</a> to override older variables.</p>\n\n<pre><code>class Cat\n  attr_reader :name, :type, :age\n  def initialize(args={})\n    @name = args[:name]\n    @age = args[:age]\n    @type = args[:type]\n  end\n\n  def to_s\n    \"#{name} (#{type} - #{age})\"\n  end\n\n  def dup(args={})\n    new_cat = super()\n    args.each do|var, value|\n      new_cat.instance_variable_set(:\"@#{var}\", value)\n    end\n    new_cat\n  end\nend\nmittenz = Cat.new(name: 'Mittenz', age: 3, type: 'cheshire')\n\nputs mittenz\nputs mittenz.dup(type: 'siamese')\n#=&gt; Mittenz (cheshire - 3)\n#   Mittenz (siamese - 3)\n</code></pre>\n"}], "owner": {"reputation": 6105, "user_id": 1700874, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad36477949cfd7db659cd4420537911c?s=128&d=identicon&r=PG&f=1", "display_name": "The Whiz of Oz", "link": "https://stackoverflow.com/users/1700874/the-whiz-of-oz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 40489701, "answer_count": 2, "score": 1, "last_activity_date": 1478616020, "creation_date": 1478614091, "last_edit_date": 1478615448, "question_id": 40489013, "link": "https://stackoverflow.com/questions/40489013/ruby-duplicate-an-object-with-modified-params", "title": "Ruby duplicate an object with modified params", "body": "<p>I have a ruby object say</p>\n\n<pre><code>def initialize(args={})\n  @name = args[:name]\n  ...\nend\n\nmy_cat = Cat.new(name: 'Mittenz', age: 3, type: 'cheshire')\n</code></pre>\n\n<p>I need to duplicate it within another object but with an option to input a different parameter, somehting like this:</p>\n\n<pre><code>Class CatCopyist\n  def initialize(args={})\n    @my_cat = args[:cat] # my_cat object from above passed here\n  end\n\n  def copy_cat\n    another_cat = @my_cat.dup.merge(type: 'siamese')\n    return another_cat\n  end\n  ...\nend\n</code></pre>\n\n<p>I need help with blending the copied object with a new parameter. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "carrierwave", "image-uploading"], "answers": [{"comments": [{"owner": {"reputation": 145, "user_id": 3843071, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4336af5818b18e1047d2d23c148fd5e3?s=128&d=identicon&r=PG&f=1", "display_name": "Codosapien", "link": "https://stackoverflow.com/users/3843071/codosapien"}, "edited": false, "score": 0, "creation_date": 1537247478, "post_id": 43366408, "comment_id": 91702872, "body": "I&#39;m having trouble following your code. It looks like for each  <code>logo_image[x]</code> param provided, it will cache and add the image to a new blank_uploader, then it iterates all the new uploaders and assigns <code>original_filename</code>. So let&#39;s we had 4 images before, and now the user action only sends 3 in params (to represent a deleted image)... how does this prevent the reupload of original 3 images?"}, {"owner": {"reputation": 856, "user_id": 2131983, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3sKfa.jpg?s=128&g=1", "display_name": "khiav reoy", "link": "https://stackoverflow.com/users/2131983/khiav-reoy"}, "reply_to_user": {"reputation": 145, "user_id": 3843071, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4336af5818b18e1047d2d23c148fd5e3?s=128&d=identicon&r=PG&f=1", "display_name": "Codosapien", "link": "https://stackoverflow.com/users/3843071/codosapien"}, "edited": false, "score": 0, "creation_date": 1537254154, "post_id": 43366408, "comment_id": 91705666, "body": "The code can only add or replace images. Let <code>logo_images</code> be <code>[nil, image1, image2]</code> and user upload a new image <code>params[:logo_image3]</code>. If you use <code>add_more_images([params[:logo_image3]])</code>, carrierwave will upload <code>image1</code>, <code>image2</code>, and <code>params[:logo_image3]</code>. But if you use my code, it will only upload <code>params[:logo_image3]</code>."}, {"owner": {"reputation": 856, "user_id": 2131983, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3sKfa.jpg?s=128&g=1", "display_name": "khiav reoy", "link": "https://stackoverflow.com/users/2131983/khiav-reoy"}, "reply_to_user": {"reputation": 145, "user_id": 3843071, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/4336af5818b18e1047d2d23c148fd5e3?s=128&d=identicon&r=PG&f=1", "display_name": "Codosapien", "link": "https://stackoverflow.com/users/3843071/codosapien"}, "edited": false, "score": 0, "creation_date": 1537254504, "post_id": 43366408, "comment_id": 91705872, "body": "I am not sure how to delete image. You could try <code>mounter.uploaders[t]&amp;.remove!</code> to remove image. <code>mounter.uploaders.delete_at(t)</code> to remove uploader. Then iterates all the uploaders and assigns original_filename."}], "tags": [], "owner": {"reputation": 856, "user_id": 2131983, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3sKfa.jpg?s=128&g=1", "display_name": "khiav reoy", "link": "https://stackoverflow.com/users/2131983/khiav-reoy"}, "is_accepted": false, "score": 0, "last_activity_date": 1491991443, "creation_date": 1491991443, "answer_id": 43366408, "question_id": 40488123, "link": "https://stackoverflow.com/questions/40488123/carrierwave-multiple-images-upload-too-slow-when-adding-or-removing-images/43366408#43366408", "title": "Carrierwave - Multiple images upload too slow when adding or removing images", "body": "<p>when you call <code>model.images = remain_images</code>, carrierwave will upload all images. So the more images you stored in a column, the longer it will take.\nSee: <a href=\"https://github.com/carrierwaveuploader/carrierwave/blob/87c37b706c560de6d01816f9ebaa15ce1c51ed58/lib/carrierwave/mount.rb#L300\" rel=\"nofollow noreferrer\">mount.rb#L300</a>, <a href=\"https://github.com/carrierwaveuploader/carrierwave/blob/97c028cc0ee8e6e84a3b60ae60fd4f59703f8a40/lib/carrierwave/mounter.rb#L40\" rel=\"nofollow noreferrer\">mounter.rb#L40</a></p>\n\n<p>I had this problem before, the following is my code:</p>\n\n<pre><code>new_images = self.logo_images.clone\n4.times do |t|\n  next if !(image = params[:\"logo_image#{t + 1}\"])\n  new_images[t] = image\n  changed = true\nend\nself.logo_images = new_images if changed\n...\nself.save if changed\n</code></pre>\n\n<p>And this is the hack... </p>\n\n<p>(works fine with <code>carrierwave 1.0.0</code> and <code>carrierwave-aws 1.1.0</code>)</p>\n\n<pre><code>mounter = self.send(:_mounter, :logo_images)\n4.times do |t|\n  next if !(image = params[:\"logo_image#{t + 1}\"])\n  uploader = mounter.blank_uploader\n  uploader.cache!(image)\n  mounter.uploaders[t] = uploader\n  changed = true\nend\nmounter.uploaders.each{|s| s.send(:original_filename=, s.file.filename) if !s.filename} if changed \n...\nself.save if changed\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 7131650, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YfoPF.jpg?s=128&g=1", "display_name": "An Duong", "link": "https://stackoverflow.com/users/7131650/an-duong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 809, "favorite_count": 2, "answer_count": 1, "score": 4, "last_activity_date": 1491991443, "creation_date": 1478611559, "question_id": 40488123, "link": "https://stackoverflow.com/questions/40488123/carrierwave-multiple-images-upload-too-slow-when-adding-or-removing-images", "title": "Carrierwave - Multiple images upload too slow when adding or removing images", "body": "<p>I'm following this article in CarrierWave Wiki <a href=\"https://github.com/carrierwaveuploader/carrierwave/wiki/How-to%3A-Add-more-files-and-remove-single-file-when-using-default-multiple-file-uploads-feature\" rel=\"nofollow noreferrer\">https://github.com/carrierwaveuploader/carrierwave/wiki/How-to%3A-Add-more-files-and-remove-single-file-when-using-default-multiple-file-uploads-feature</a> to implement adding more images and removing images for a model in my system using CarrierWave Multiple Uploads feature.</p>\n\n<p>The main code in that article is</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>def add_more_images(new_images)\n  images = @gallery.images \n  images += new_images\n  @gallery.images = images\nend\n\ndef remove_image_at_index(index)\n  remain_images = @gallery.images # copy the array\n  deleted_image = remain_images.delete_at(index) # delete the target image\n  deleted_image.try(:remove!) # delete image from S3\n  @gallery.images = remain_images # re-assign back\nend\n</code></pre>\n\n<p>It works. <strong>However, it is too slooooow.</strong> I have looked at the log and the overall processing time is as follow:</p>\n\n<ol>\n<li>Upload 1 image: it takes 5000ms for example</li>\n<li>Add 1 more image: it takes 8500ms (2 images)</li>\n<li>Add 1 more image: it takes 12000ms (3 images)</li>\n<li>Remove 1 image: it takes 8400ms (back to 2 images)</li>\n</ol>\n\n<p>I have tested the sample app of this solution written by the author on my local machine and it was very slow too.</p>\n\n<p><strong>It seems like CarrierWave reuploads and re-processes all images even we only add or remove 1 image. I think because we are re-assigning back new array of images to @gallery so that it treats old images as new ones.</strong></p>\n\n<p>Also there is a related issue here <a href=\"https://github.com/carrierwaveuploader/carrierwave/issues/1704#issuecomment-259106600\" rel=\"nofollow noreferrer\">https://github.com/carrierwaveuploader/carrierwave/issues/1704#issuecomment-259106600</a></p>\n\n<p>Does anyone have any better solution for adding and removing images using CarrierWave multiple upload feature?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby", "python-3.x", "move", "shutil"], "answers": [{"comments": [{"owner": {"reputation": 401, "user_id": 5940636, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/199392f83a3ffd290242732107b18e1a?s=128&d=identicon&r=PG&f=1", "display_name": "Lewis909", "link": "https://stackoverflow.com/users/5940636/lewis909"}, "edited": false, "score": 0, "creation_date": 1478614019, "post_id": 40487778, "comment_id": 68221581, "body": "Thanks for the help, this worked perfectly. I have a question. What does the &quot;r&quot; in front of the path in t_a &amp; t_b mean?"}, {"owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "reply_to_user": {"reputation": 401, "user_id": 5940636, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/199392f83a3ffd290242732107b18e1a?s=128&d=identicon&r=PG&f=1", "display_name": "Lewis909", "link": "https://stackoverflow.com/users/5940636/lewis909"}, "edited": false, "score": 0, "creation_date": 1478619284, "post_id": 40487778, "comment_id": 68225405, "body": "see my edit. It&#39;s to make hardcoded paths easier to write, basically in your case."}], "tags": [], "owner": {"reputation": 126278, "user_id": 6451573, "user_type": "moderator", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/4xczZ.jpg?s=128&g=1", "display_name": "Jean-Fran&#231;ois Fabre", "link": "https://stackoverflow.com/users/6451573/jean-fran%c3%a7ois-fabre"}, "is_accepted": true, "score": 1, "last_activity_date": 1478619266, "last_edit_date": 1478619266, "creation_date": 1478610581, "answer_id": 40487778, "question_id": 40487687, "link": "https://stackoverflow.com/questions/40487687/python-round-robin-file-move/40487778#40487778", "title": "Python - Round Robin file move", "body": "<p><code>dir_a</code> and <code>dir_b</code> are computed at the start of your script so the load is always identical even if you move files in your loop.</p>\n\n<p>Move this in your <code>for</code> loop:</p>\n\n<pre><code>dir_a = os.listdir(r'F:\\Transcoder\\testing\\dir_a')\ndir_b = os.listdir(r'F:\\Transcoder\\testing\\dir_b')\n</code></pre>\n\n<p>fox proposal (with some other small fixes as well, like not repeating paths and using \"raw\" prefix (<code>r\"the\\data\"</code>) to avoid escaping the antislashes.</p>\n\n<pre><code>import shutil\nfrom glob import glob\nimport os.path\n\n\nt_a = r'F:\\Transcoder\\testing\\dir_a'\nt_b = r'F:\\Transcoder\\testing\\dir_b'\n\nprep = glob('F:\\\\Transcoder\\\\testing\\\\prep\\\\*.txt')\nif prep:        \n\n    for file in prep:\n\n        dir_a = os.listdir(t_a)\n        dir_b = os.listdir(t_b)\n        ac = len(dir_a)\n        bc = len(dir_b)\n\n        load = [ac, bc]\n\n        if min(load) == ac:\n\n            print('Moving' + file + 'to DIR A')\n            shutil.move(file, t_a)\n\n        else:\n\n            print('Moving' + file + 'to DIR B')\n            shutil.move(file, t_b)\n\nelse:\n    print('No Files')\n</code></pre>\n"}], "owner": {"reputation": 401, "user_id": 5940636, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/199392f83a3ffd290242732107b18e1a?s=128&d=identicon&r=PG&f=1", "display_name": "Lewis909", "link": "https://stackoverflow.com/users/5940636/lewis909"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 40487778, "answer_count": 1, "score": 0, "last_activity_date": 1478619266, "creation_date": 1478610252, "last_edit_date": 1478611779, "question_id": 40487687, "link": "https://stackoverflow.com/questions/40487687/python-round-robin-file-move", "title": "Python - Round Robin file move", "body": "<p>I am trying to create a Python script that moves files in a round robin into a DIR that has the least amount of files in it so that the files are equally distributed for the source DIR to the two target DIR's.</p>\n\n<p>For example:</p>\n\n<p>If c:\\test contains:</p>\n\n<p>test_1.txt\ntest_2.txt\ntest_3.txt\ntest_4.txt</p>\n\n<p>I want these test_1.txt and test_3.txt to be moved to c:\\test\\dir_a and test_2.txt and test_4.tx to be moved to c:\\test\\dir_b.</p>\n\n<p>I have been able to successfully do this in Ruby, however when i try to do this in Python when the script runs it moves all the files into the DIR with the least least amount of files in it instead of distributing them in a round robin.</p>\n\n<p>Here is my Ruby example:</p>\n\n<pre><code>require 'fileutils'\n\ndef check_file\n\nwatchfolder_1 = 'F:/Transcoder/testing/dir_a/'\nwatchfolder_2 = 'F:/Transcoder/testing/dir_b/'\n\nif !Dir.glob('F:/Transcoder/testing/prep/*.txt').empty?\n\n    Dir['F:/Transcoder/testing/prep/*.txt'].each do |f|\n\n        node_1 = Dir[\"#{watchfolder_1}\"+'*']\n        node_2 = Dir[\"#{watchfolder_2}\"+'*']\n\n        nc_1 =  node_1.count\n        nc_2 =  node_2.count\n\n        loadmin =[nc_1,nc_2].min\n\n        #puts loadmin\n\n        if loadmin == nc_1\n\n            FileUtils.mv Dir.glob(\"#{f}\"), watchfolder_1\n\n            puts \"#{f} moved to DIR A\"\n\n        elsif loadmin == nc_2\n\n            FileUtils.mv Dir.glob(\"#{f}\"), watchfolder_2\n\n            puts \"#{f} moved to DIR B\"\n\n        end\n\n        puts 'Files successfully moved to staging area.'\n\n    end\n\n    else\n       puts 'No valid files found'\n    end\nend\ncheck_file\n</code></pre>\n\n<p>This outputs the following:</p>\n\n<pre><code>C:\\Ruby22-x64\\bin\\ruby.exe -e  $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift)\nF:/ruby/transcode_engine/test.rb\nF:/Transcoder/testing/prep/test_1.txt moved to DIR A\nFiles successfully moved to staging area.\nF:/Transcoder/testing/prep/test_2.txt moved to DIR B\nFiles successfully moved to staging area.\nF:/Transcoder/testing/prep/test_3.txt moved to DIR A\nFiles successfully moved to staging area.\nF:/Transcoder/testing/prep/test_4.txt moved to DIR B\nFiles successfully moved to staging area.\n</code></pre>\n\n<p>The files move as I want them to.</p>\n\n<p>Now here is my Python script:</p>\n\n<pre><code>import shutil\nfrom glob import glob\nimport os.path\n\n\ndir_a = os.listdir('F:\\\\Transcoder\\\\testing\\\\dir_a\\\\')\ndir_b = os.listdir('F:\\\\Transcoder\\\\testing\\\\dir_b\\\\')\nt_a = 'F:\\\\Transcoder\\\\testing\\\\dir_a\\\\'\nt_b = 'F:\\\\Transcoder\\\\testing\\\\dir_b\\\\'\n\n\nif os.listdir('F:\\\\Transcoder\\\\testing\\\\prep\\\\'):\n\n    prep = glob('F:\\\\Transcoder\\\\testing\\\\prep\\\\*.txt')\n\n    for file in prep:\n\n        ac = len(dir_a)\n        bc = len(dir_b)\n\n        load = [ac, bc]\n\n        if min(load) == ac:\n\n            print('Moving' + file + 'to DIR A')\n            shutil.move(file, t_a)\n\n        elif min(load) == bc:\n\n            print('Moving' + file + 'to DIR B')\n            shutil.move(file, t_b)\n\nelse:\n    print('No Files')\n</code></pre>\n\n<p>This script returns this:</p>\n\n<pre><code>C:\\Users\\3A01\\AppData\\Local\\Programs\\Python\\Python35-32\\python.exe   \nF:/Projects/python_transcoder/test_2.py\nMoving F:\\Transcoder\\testing\\prep\\test_1.txt to DIR A\nMoving F:\\Transcoder\\testing\\prep\\test_2.txt to DIR A\nMoving F:\\Transcoder\\testing\\prep\\test_3.txt to DIR A\nMoving F:\\Transcoder\\testing\\prep\\test_4.txt to DIR A\n</code></pre>\n\n<p>Where am I going wrong with the Python script, why is it not moving the files in a round robin?</p>\n"}, {"tags": ["ruby", "rubygems", "gemfile"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1478612594, "post_id": 40487635, "comment_id": 68220582, "body": "It depends on the specified precision: <code>~&gt; 0.6</code> means <code>&gt;= 0.6 and &lt; 1.0</code> whereas <code>~&gt; 0.6.4</code> means <code>&gt;= 0.6.4 and &lt; 0.7</code>. Note that the start is always inclusive (&gt;=) and the end is always exclusive (&lt;)."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1478617135, "post_id": 40487635, "comment_id": 68223932, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/5170547/what-does-tilde-greater-than-mean-in-ruby-gem-dependencies\">What does tilde-greater-than (~&gt;) mean in Ruby gem dependencies?</a>"}], "answers": [{"comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 2, "creation_date": 1478612648, "post_id": 40488468, "comment_id": 68220620, "body": "The short answer is wrong unfortunately. The specification in the question is the same as <code>&gt;= 0.6.4, &lt; 1.0</code>. This is because <code>~&gt; 0.6</code> means <code>&gt;= 0.6, &lt; 1.0</code> which is then further restricted from the bottom to only allow versions <code>&gt;= 0.6.4</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1478613621, "post_id": 40488468, "comment_id": 68221300, "body": "Well, the OP is explicitly referring to <i>&quot;the &#39;~&gt; 0.6&#39; part&quot;</i>"}], "tags": [], "owner": {"reputation": 1030, "user_id": 2100645, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c9894864f33c42fffe19330d2e00d1b?s=128&d=identicon&r=PG", "display_name": "Lucas Costa", "link": "https://stackoverflow.com/users/2100645/lucas-costa"}, "is_accepted": true, "score": 2, "last_activity_date": 1478613230, "last_edit_date": 1478613230, "creation_date": 1478612566, "answer_id": 40488468, "question_id": 40487635, "link": "https://stackoverflow.com/questions/40487635/understanding-the-tilde-operator-in-gemfile-lock/40488468#40488468", "title": "Understanding the tilde operator in Gemfile.lock", "body": "<p>short answer: as pointed by Holger in the comments, <code>~&gt; 0.6, &gt;= 0.6.4</code> means <code>&gt;= 0.6.4 and &lt; 1.0</code>.</p>\n\n<p>The <code>~&gt;</code> operator is called <a href=\"https://robots.thoughtbot.com/rubys-pessimistic-operator\" rel=\"nofollow noreferrer\">pessimistic operator</a> (or twiddle-wakka), and its objective is to guard the gems from potential bugs/failures in future releases.</p>\n\n<p>When you're building a gem, you must create a special <a href=\"http://guides.rubygems.org/specification-reference/\" rel=\"nofollow noreferrer\">Specification Class</a> and put it in a <code>.gemspec</code> file or in a Rakefile. This class contains the information for the gem, like its name, version, license and the dependencies.</p>\n\n<p>And is a good practice specify the dependencies following a pessimistic version constraint. Therefore, notations like <code>~&gt; 0.6, &gt;= 0.6.4</code> are very common.</p>\n\n<p>You can find more information <a href=\"http://guides.rubygems.org/patterns/#declaring-dependencies\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 1005, "user_id": 1446264, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/LIJyD.jpg?s=128&g=1", "display_name": "Nick Shears", "link": "https://stackoverflow.com/users/1446264/nick-shears"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1153, "favorite_count": 0, "accepted_answer_id": 40488468, "answer_count": 1, "score": 1, "last_activity_date": 1478613230, "creation_date": 1478610100, "question_id": 40487635, "link": "https://stackoverflow.com/questions/40487635/understanding-the-tilde-operator-in-gemfile-lock", "title": "Understanding the tilde operator in Gemfile.lock", "body": "<p>I currently have a dependency of the following</p>\n\n<pre><code>i18n (~&gt; 0.6, &gt;= 0.6.4)\n</code></pre>\n\n<p>I've been having a read through of the <a href=\"http://guides.rubygems.org/patterns/#declaring_dependencies\" rel=\"nofollow noreferrer\">Ruby Gems - Declaring Dependency Guide</a></p>\n\n<p>And I've found out that the '~> 0.6' part means anything between 0.6 and 1.0 - correct me if that's wrong.</p>\n\n<p>But I'm still confused, what does this actually mean with a second comma separated value?</p>\n\n<p>A colleague believes it means</p>\n\n<pre><code>&gt;= 0.6.4, &lt;= 0.7\n</code></pre>\n\n<p>But I'm not so sure.</p>\n"}, {"tags": ["ruby", "cucumber", "capybara"], "comments": [{"owner": {"reputation": 8275, "user_id": 4512398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yjm4v.jpg?s=128&g=1", "display_name": "Grasshopper", "link": "https://stackoverflow.com/users/4512398/grasshopper"}, "edited": false, "score": 0, "creation_date": 1478611150, "post_id": 40487444, "comment_id": 68219501, "body": "What is the problem you are having when you use tags? If you add the tag say &quot;@Headless&quot; for features or scenarios for deployment and use the --tags options with the &quot;@Headless&quot; tags. For browser tests no tags options, or if you do not want to run deployment tests negate the &quot;@Headless&quot; option using &quot;~@Headless&quot;."}, {"owner": {"reputation": 2080, "user_id": 1033737, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/iJ3qS.jpg?s=128&g=1", "display_name": "thefabbulus", "link": "https://stackoverflow.com/users/1033737/thefabbulus"}, "edited": false, "score": 0, "creation_date": 1478612468, "post_id": 40487444, "comment_id": 68220482, "body": "does this help? <a href=\"http://stackoverflow.com/questions/29713935/how-to-implement-different-data-for-cucumber-scenarios-based-on-environment\" title=\"how to implement different data for cucumber scenarios based on environment\">stackoverflow.com/questions/29713935/&hellip;</a>"}, {"owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "edited": false, "score": 0, "creation_date": 1478613053, "post_id": 40487444, "comment_id": 68220902, "body": "Thanks fabersky, it&#39;s a good read but it appears to be aimed at java instead of Ruby"}, {"owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "reply_to_user": {"reputation": 8275, "user_id": 4512398, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yjm4v.jpg?s=128&g=1", "display_name": "Grasshopper", "link": "https://stackoverflow.com/users/4512398/grasshopper"}, "edited": false, "score": 0, "creation_date": 1478614324, "post_id": 40487444, "comment_id": 68221816, "body": "@Grasshopper I was finding that when I was tagging &#39;@heading&#39;, I needed something in that hook that would overwrite the default driver from selenium to poltergeist. This would then change the default driver from selenium when I wasn&#39;t using that headless tag.  I&#39;ve posted a solution below."}], "answers": [{"tags": [], "owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "is_accepted": false, "score": 0, "last_activity_date": 1478614223, "creation_date": 1478614223, "answer_id": 40489056, "question_id": 40487444, "link": "https://stackoverflow.com/questions/40487444/cucumber-environment-variable-in-tag/40489056#40489056", "title": "Cucumber Environment variable in tag", "body": "<p>I have identified where I was going wrong.</p>\n\n<p>In my hook, I was using the following:</p>\n\n<pre><code>AfterStep (ENV['headless']) do\n    if page.status_code == 200      \n    check_xss_settings\n   end\nend\n</code></pre>\n\n<p>By doing this, I was able to achieve my result:</p>\n\n<pre><code>AfterStep do\n  if ENV['headless'] == 'true'\n       if page.status_code == 200\n        check_xss_script\n      end\n    end\nend\n</code></pre>\n\n<p>I hope this could be helpful for anyone in a similar position.</p>\n"}], "owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 692, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1478614223, "creation_date": 1478609497, "question_id": 40487444, "link": "https://stackoverflow.com/questions/40487444/cucumber-environment-variable-in-tag", "title": "Cucumber Environment variable in tag", "body": "<p>I have a test pack where the tests run in Selenium_webdriver (Chrome) by default and have an option to run in Poltergeist via <code>ENV['headless']</code> in the env.rb file.  The headless tests get used in deployment (no browser installed on box).</p>\n\n<p>I have some tests that are specific to being run headless such as checking status codes, response headers etc. I was wondering if there is a way I could use a hook to say while <code>headless=true</code> do x, y or z.</p>\n\n<p>I've tried using tags but this interferes with the tests when they are run in browser.</p>\n\n<p>Something like:</p>\n\n<pre><code>AfterStep (ENV['headless']) do\n   if page.status_code == 200      \n    check_xss_settings\n   end\nend\n</code></pre>\n\n<p>Is it possible to do what I want?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["arrays", "regex", "ruby", "nlp", "freeling"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1478608954, "post_id": 40487236, "comment_id": 68217981, "body": "Are you sure the API you are using cannot output the tokens list? Acc. to the docs, try <code>--outf token</code> if you are using a command line."}, {"owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1478609391, "post_id": 40487236, "comment_id": 68218286, "body": "@WiktorStribi\u017cew it doesn&#39;t. &#39;shallow&#39; is one of the result options, if i do the other option called &#39;tagged&#39; it just tags each word/named entity separately and i don&#39;t get the tree for &quot;the book The Grasshopper Lies Heavy&quot;."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1478609859, "post_id": 40487236, "comment_id": 68218537, "body": "With the regex approach, how can you differentiate between a real <code>_</code> and the one introduced by Freeling tree builder? You are now removing all underscores. Or will there be no underscores in the output tree?"}, {"owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1478610283, "post_id": 40487236, "comment_id": 68218837, "body": "@WiktorStribi\u017cew there wont be. but i think that is a minor problem i can do \\w_\\w or something like that. but the main problem is converting the thing to a consumable array."}], "answers": [{"tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": true, "score": 2, "last_activity_date": 1478609445, "creation_date": 1478609445, "answer_id": 40487424, "question_id": 40487236, "link": "https://stackoverflow.com/questions/40487236/how-to-convert-command-line-output-from-freeling-to-consumable-array/40487424#40487424", "title": "How to convert command line output from Freeling to consumable array", "body": "<p>From your solution so far:</p>\n\n<pre><code>result = a.gsub(/.*\\[/,'[').gsub(/.*\\+?\\((\\w+|.) .*/,'\\1').gsub(/\\n| /,\"\").gsub(\"_\",\" \")\nresult.split('][').map { |s| s.gsub(/\\[|\\]/, ' ').strip }     # [\"I\", \"just\", \"read\", \"the book The Grasshopper Lies Heavy\", \".\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "edited": false, "score": 0, "creation_date": 1480506505, "post_id": 40883031, "comment_id": 68988935, "body": "i just did that but it didn&#39;t work: this works ` &quot;#{analyzer_path} -f #{cfg_path} --inpf plain --outf shallow&quot; ` this doesn&#39;t <code>&quot;#{analyzer_path} -f #{cfg_path} --inpf plain --outf shallow --output conll&quot;</code>"}, {"owner": {"reputation": 206, "user_id": 6099791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c500c1d171d600959007d2d96adfa24?s=128&d=identicon&r=PG&f=1", "display_name": "Llu&#237;s Padr&#243;", "link": "https://stackoverflow.com/users/6099791/llu%c3%ads-padr%c3%b3"}, "reply_to_user": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "edited": false, "score": 0, "creation_date": 1487083987, "post_id": 40883031, "comment_id": 71617828, "body": "option &quot;--output conll&quot; only works in version 4.0 newer, and it seems you are using 3.x"}], "tags": [], "owner": {"reputation": 206, "user_id": 6099791, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c500c1d171d600959007d2d96adfa24?s=128&d=identicon&r=PG&f=1", "display_name": "Llu&#237;s Padr&#243;", "link": "https://stackoverflow.com/users/6099791/llu%c3%ads-padr%c3%b3"}, "is_accepted": false, "score": 0, "last_activity_date": 1480492592, "creation_date": 1480492592, "answer_id": 40883031, "question_id": 40487236, "link": "https://stackoverflow.com/questions/40487236/how-to-convert-command-line-output-from-freeling-to-consumable-array/40883031#40883031", "title": "How to convert command line output from Freeling to consumable array", "body": "<p>If you call FreeLing from Ruby via the API, you can get the tree and traverse it at will.</p>\n\n<p>If you are using the output of the command-line program and loading it into Ruby as a string, it may be easier to call it with option \"--output conll\" which will produce a tabular format easier to deal with.</p>\n"}], "owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 40487424, "answer_count": 2, "score": 1, "last_activity_date": 1572277097, "creation_date": 1478608826, "last_edit_date": 1572277097, "question_id": 40487236, "link": "https://stackoverflow.com/questions/40487236/how-to-convert-command-line-output-from-freeling-to-consumable-array", "title": "How to convert command line output from Freeling to consumable array", "body": "<p>I am using Ruby for this. \nFreeling (a NLP tool) has a shallow parser which returns a string like this for the text \"I just read the book, the grasshopper lies heavy\" when I run a shallow parsing command. </p>\n\n<pre><code>a = &lt;&lt;EOT\nS_[\n  sn-chunk_[\n    +(I i PRP -)\n  ]\n  adv_[\n    +(just just RB -)\n  ]\n  vb-chunk_[\n    +(read read VB -)\n  ]\n  sn-chunk_[\n    (the the DT -)\n    +n-chunk_[\n      (book book NN -)\n      +n-chunk_[\n        +(The_Grasshopper_Lies_Heavy the_grasshopper_lies_heavy NP -)\n      ]\n    ]\n  ]\n  st-brk_[\n    +(. . Fp -)\n  ]\n]\n\nEOT\n</code></pre>\n\n<p>I want to get the following array from this:</p>\n\n<pre><code>[\"I\", \"just\", \"read\", \"the book The Grasshopper Lies Heavy\",\".\"]\n</code></pre>\n\n<p>(I want to merge the words that are under a tree and have it as a single array element.)</p>\n\n<p>So far, I have written this much:</p>\n\n<pre><code>b = a.gsub(/.*\\[/,'[').gsub(/.*\\+?\\((\\w+|.) .*/,'\\1').gsub(/\\n| /,\"\").gsub(\"_\",\"\")\n</code></pre>\n\n<p>which returns</p>\n\n<pre><code>[[I][just][read][the[book[The Grasshopper Lies Heavy]]][.]]\n</code></pre>\n\n<p>So, how can i get the desired array?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 1, "creation_date": 1478608715, "post_id": 40487162, "comment_id": 68217779, "body": "can you provide complete expression?"}, {"owner": {"reputation": 309, "user_id": 4019532, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh3.googleusercontent.com/-L0mMe6wqkAk/AAAAAAAAAAI/AAAAAAAAD7Q/SuNXGqTzrew/photo.jpg?sz=128", "display_name": "Simoroshka", "link": "https://stackoverflow.com/users/4019532/simoroshka"}, "reply_to_user": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1478608872, "post_id": 40487162, "comment_id": 68217908, "body": "Is this enough?"}, {"owner": {"reputation": 809, "user_id": 1945990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/edcJw.gif?s=128&g=1", "display_name": "Mike W", "link": "https://stackoverflow.com/users/1945990/mike-w"}, "edited": false, "score": 2, "creation_date": 1478608884, "post_id": 40487162, "comment_id": 68217918, "body": "are you sure it&#39;s not a typo - what output does it give if it&#39;s just one %"}, {"owner": {"reputation": 309, "user_id": 4019532, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh3.googleusercontent.com/-L0mMe6wqkAk/AAAAAAAAAAI/AAAAAAAAD7Q/SuNXGqTzrew/photo.jpg?sz=128", "display_name": "Simoroshka", "link": "https://stackoverflow.com/users/4019532/simoroshka"}, "edited": false, "score": 0, "creation_date": 1478609001, "post_id": 40487162, "comment_id": 68218020, "body": "It is used in other places as well, so I am pretty sure it is not a typo. If I remove one %, I get an exception <code>undefined local variable or method content </code>"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1478609039, "post_id": 40487162, "comment_id": 68218046, "body": "Its explained here in he doc <a href=\"http://apidock.com/ruby/ERB\" rel=\"nofollow noreferrer\">apidock.com/ruby/ERB</a>"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1478609046, "post_id": 40487162, "comment_id": 68218051, "body": "Which version of Rails you are using?"}, {"owner": {"reputation": 309, "user_id": 4019532, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh3.googleusercontent.com/-L0mMe6wqkAk/AAAAAAAAAAI/AAAAAAAAD7Q/SuNXGqTzrew/photo.jpg?sz=128", "display_name": "Simoroshka", "link": "https://stackoverflow.com/users/4019532/simoroshka"}, "edited": false, "score": 0, "creation_date": 1478609178, "post_id": 40487162, "comment_id": 68218136, "body": "I have Rails 4.2.3"}, {"owner": {"reputation": 636, "user_id": 4423221, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6cakp.jpg?s=128&g=1", "display_name": "Hardik Kanjariya \u30c4", "link": "https://stackoverflow.com/users/4423221/hardik-kanjariya-%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1478609289, "post_id": 40487162, "comment_id": 68218206, "body": "It will parse your content and create &lt;%= content %&gt; into your view file"}], "answers": [{"comments": [{"owner": {"reputation": 809, "user_id": 1945990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/edcJw.gif?s=128&g=1", "display_name": "Mike W", "link": "https://stackoverflow.com/users/1945990/mike-w"}, "edited": false, "score": 0, "creation_date": 1478609259, "post_id": 40487347, "comment_id": 68218189, "body": "so instead of <code>&lt;%%=</code> it really should be <code>&lt;%%</code> to generate <code>&lt;%=</code>?"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 809, "user_id": 1945990, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/edcJw.gif?s=128&g=1", "display_name": "Mike W", "link": "https://stackoverflow.com/users/1945990/mike-w"}, "edited": false, "score": 1, "creation_date": 1478609485, "post_id": 40487347, "comment_id": 68218328, "body": "No <code>&lt;%% content %%&gt;</code> will be replaced with <code>&lt;% value of content %&gt;</code>  and <code>&lt;%%= content %%&gt;</code> will be replaced with <code>&lt;%= value of content %&gt;</code>"}, {"owner": {"reputation": 309, "user_id": 4019532, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh3.googleusercontent.com/-L0mMe6wqkAk/AAAAAAAAAAI/AAAAAAAAD7Q/SuNXGqTzrew/photo.jpg?sz=128", "display_name": "Simoroshka", "link": "https://stackoverflow.com/users/4019532/simoroshka"}, "edited": false, "score": 0, "creation_date": 1478609546, "post_id": 40487347, "comment_id": 68218359, "body": "Thanks, it clarified things a bit! (I still have to understand why it is like this in the project, but it is a different question)"}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 4, "last_activity_date": 1478609328, "last_edit_date": 1478609328, "creation_date": 1478609180, "answer_id": 40487347, "question_id": 40487162, "link": "https://stackoverflow.com/questions/40487162/what-is-the-meaning-of-in-ruby-on-rails/40487347#40487347", "title": "What is the meaning of &lt;%%= in Ruby on Rails?", "body": "<p>The ERB dock <a href=\"http://apidock.com/ruby/ERB\" rel=\"nofollow noreferrer\">here</a> says</p>\n\n<pre><code>&lt;% Ruby code -- inline with output %&gt;\n&lt;%= Ruby expression -- replace with result %&gt;\n&lt;%# comment -- ignored -- useful in testing %&gt;\n% a line of Ruby code -- treated as &lt;% line %&gt; (optional -- see ERB.new)\n%% replaced with % if first thing on a line and % processing is used\n&lt;%% or %%&gt; -- replace with &lt;% or %&gt; respectively\n</code></pre>\n\n<p>this means the</p>\n\n<pre><code>&lt;%%= content %&gt;\n</code></pre>\n\n<p>will will be replaced with</p>\n\n<pre><code>&lt;%= value of content %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 309, "user_id": 4019532, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh3.googleusercontent.com/-L0mMe6wqkAk/AAAAAAAAAAI/AAAAAAAAD7Q/SuNXGqTzrew/photo.jpg?sz=128", "display_name": "Simoroshka", "link": "https://stackoverflow.com/users/4019532/simoroshka"}, "edited": false, "score": 0, "creation_date": 1478612882, "post_id": 40487753, "comment_id": 68220786, "body": "I am going to accept this answer instead, thank you."}], "tags": [], "owner": {"reputation": 2599, "user_id": 39223, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/39e19e0acb0d2809f60f57cec9b50512?s=128&d=identicon&r=PG", "display_name": "RJHunter", "link": "https://stackoverflow.com/users/39223/rjhunter"}, "is_accepted": true, "score": 2, "last_activity_date": 1478610507, "creation_date": 1478610507, "answer_id": 40487753, "question_id": 40487162, "link": "https://stackoverflow.com/questions/40487162/what-is-the-meaning-of-in-ruby-on-rails/40487753#40487753", "title": "What is the meaning of &lt;%%= in Ruby on Rails?", "body": "<p>In short, <strong>ERb processes double-percent marks into single-percent marks.</strong></p>\n\n<hr>\n\n<p>It looks like you're using one layer of ERb templates to generate another layer of ERb templates.</p>\n\n<p>The first layer of ERb doesn't need a variable called <code>content</code>, just the <code>t</code> method:\n</p>\n\n<pre><code>&lt;span class=\"option-content\" placeholder=\"&lt;%=t('pages.edit.option')%&gt;\"&gt;\n  &lt;%%= content %&gt;\n&lt;/span&gt;\n</code></pre>\n\n<p>That first layer is rendered to produce the second layer:\n</p>\n\n<pre><code>&lt;span class=\"option-content\" placeholder=\"Edit\"&gt;\n  &lt;%= content %&gt;\n&lt;/span&gt;\n</code></pre>\n\n<p>As you can see, that is also an ERb template. I expect that something else, later on, takes that second ERb and uses it to render something like:\n</p>\n\n<pre><code>&lt;span class=\"option-content\" placeholder=\"Edit\"&gt;\n  Hello, world.\n&lt;/span&gt;\n</code></pre>\n"}], "owner": {"reputation": 309, "user_id": 4019532, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh3.googleusercontent.com/-L0mMe6wqkAk/AAAAAAAAAAI/AAAAAAAAD7Q/SuNXGqTzrew/photo.jpg?sz=128", "display_name": "Simoroshka", "link": "https://stackoverflow.com/users/4019532/simoroshka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1348, "favorite_count": 1, "accepted_answer_id": 40487753, "answer_count": 2, "score": 2, "last_activity_date": 1478610507, "creation_date": 1478608573, "last_edit_date": 1478609402, "question_id": 40487162, "link": "https://stackoverflow.com/questions/40487162/what-is-the-meaning-of-in-ruby-on-rails", "title": "What is the meaning of &lt;%%= in Ruby on Rails?", "body": "<p>I cannot find it anywhere but in the project I am working with. \nIt doesn't work in the same way as <code>&lt;%=</code> (I tried to change), but I can't understand the difference. </p>\n\n<pre><code>&lt;span class=\"option-content\" placeholder=\"&lt;%=t('pages.edit.option')%&gt;\"&gt;\n  &lt;%%= content %&gt;\n&lt;/span&gt;\n</code></pre>\n"}, {"tags": ["ruby", "windows", "redmine", "rmagick"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 5903023, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-j5mEhsf9UuI/AAAAAAAAAAI/AAAAAAAAB0k/Cxke4HKkWjc/photo.jpg?sz=128", "display_name": "Arpit Gupta", "link": "https://stackoverflow.com/users/5903023/arpit-gupta"}, "edited": false, "score": 0, "creation_date": 1478692909, "post_id": 40492057, "comment_id": 68255394, "body": "Thanks Max, I have already installed ImageMagick can you please also share how can I set the executables"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 41, "user_id": 5903023, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-j5mEhsf9UuI/AAAAAAAAAAI/AAAAAAAAB0k/Cxke4HKkWjc/photo.jpg?sz=128", "display_name": "Arpit Gupta", "link": "https://stackoverflow.com/users/5903023/arpit-gupta"}, "edited": false, "score": 0, "creation_date": 1478705076, "post_id": 40492057, "comment_id": 68262764, "body": "See <a href=\"http://stackoverflow.com/questions/9546324/adding-directory-to-path-environment-variable-in-windows\" title=\"adding directory to path environment variable in windows\">stackoverflow.com/questions/9546324/&hellip;</a>"}, {"owner": {"reputation": 41, "user_id": 5903023, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-j5mEhsf9UuI/AAAAAAAAAAI/AAAAAAAAB0k/Cxke4HKkWjc/photo.jpg?sz=128", "display_name": "Arpit Gupta", "link": "https://stackoverflow.com/users/5903023/arpit-gupta"}, "edited": false, "score": 0, "creation_date": 1478758262, "post_id": 40492057, "comment_id": 68282845, "body": "Hello Max, environment variables are already set and I have installed ImageMagick at c:/ImageMagick, Still facing the same issue"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 41, "user_id": 5903023, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-j5mEhsf9UuI/AAAAAAAAAAI/AAAAAAAAB0k/Cxke4HKkWjc/photo.jpg?sz=128", "display_name": "Arpit Gupta", "link": "https://stackoverflow.com/users/5903023/arpit-gupta"}, "edited": false, "score": 0, "creation_date": 1478809048, "post_id": 40492057, "comment_id": 68312017, "body": "Try running ImageMagick commands from the same shell doing the rmagick installation. It could be that whatever is doing the gem installation doesn&#39;t have the same path."}, {"owner": {"reputation": 41, "user_id": 5903023, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-j5mEhsf9UuI/AAAAAAAAAAI/AAAAAAAAB0k/Cxke4HKkWjc/photo.jpg?sz=128", "display_name": "Arpit Gupta", "link": "https://stackoverflow.com/users/5903023/arpit-gupta"}, "edited": false, "score": 1, "creation_date": 1479193352, "post_id": 40492057, "comment_id": 68442612, "body": "Thanks Max, can you please also tell me the commands i need to use for running imagmagick on shell."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 41, "user_id": 5903023, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-j5mEhsf9UuI/AAAAAAAAAAI/AAAAAAAAB0k/Cxke4HKkWjc/photo.jpg?sz=128", "display_name": "Arpit Gupta", "link": "https://stackoverflow.com/users/5903023/arpit-gupta"}, "edited": false, "score": 0, "creation_date": 1479226658, "post_id": 40492057, "comment_id": 68463404, "body": "The binaries I have are <code>animate,compare,composite,conjure,convert,display,identify,i&zwnj;&#8203;mport,mogrify,montag&zwnj;&#8203;e,stream</code>."}, {"owner": {"reputation": 182, "user_id": 3338091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qIygf.jpg?s=128&g=1", "display_name": "Sergio A.", "link": "https://stackoverflow.com/users/3338091/sergio-a"}, "edited": false, "score": 0, "creation_date": 1573038231, "post_id": 40492057, "comment_id": 103748251, "body": "Please can you complete your answer to explain how to solve the issue?"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 182, "user_id": 3338091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qIygf.jpg?s=128&g=1", "display_name": "Sergio A.", "link": "https://stackoverflow.com/users/3338091/sergio-a"}, "edited": false, "score": 0, "creation_date": 1573047966, "post_id": 40492057, "comment_id": 103753626, "body": "@SergioA. there are any number of reasons why ImageMagick might not be found by Ruby. It depends not only on how you installed ImageMagick, but how you installed Ruby. I can&#39;t give a single answer that will resolve the problem for everyone. Ask a separate question with more specific details and you might get help"}, {"owner": {"reputation": 182, "user_id": 3338091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qIygf.jpg?s=128&g=1", "display_name": "Sergio A.", "link": "https://stackoverflow.com/users/3338091/sergio-a"}, "edited": false, "score": 0, "creation_date": 1573127294, "post_id": 40492057, "comment_id": 103784622, "body": "Sorry @Max, I now understand all these tricky combinations needed to get RMagick ready to work. For anyone feeling a bit lost like i did, i recommend this link  which helped me solve my issue: <a href=\"https://medium.com/ruby-on-rails-web-application-development/install-rmagick-gem-on-windows-7-8-10-imagemagick-6-9-4-q16-hdri-5492c3fef202\" rel=\"nofollow noreferrer\">medium.com/ruby-on-rails-web-application-development/&hellip;</a>"}], "tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1573047812, "last_edit_date": 1573047812, "creation_date": 1478622905, "answer_id": 40492057, "question_id": 40486970, "link": "https://stackoverflow.com/questions/40486970/rmagick-gem-is-not-getting-installed-on-windows/40492057#40492057", "title": "rmagick gem is not getting installed on Windows", "body": "<p>rmagick is just a wrapper for <a href=\"http://www.imagemagick.org/script/index.php\" rel=\"nofollow noreferrer\">ImageMagick</a>. <code>extconf.rb</code> is checking for the presence of ImageMagick by running <code>identify</code>, which is one of the programs provided by ImageMagick. It isn't finding it, hence the <code>No such file or directory</code> message.</p>\n\n<p>You need to install ImageMagick and make sure that its executables are in your path.</p>\n\n<p>Make sure that in the same place you run <code>gem install rmagick</code> you can also run <code>identify -version</code> successfully.</p>\n"}, {"tags": [], "owner": {"reputation": 182, "user_id": 3338091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qIygf.jpg?s=128&g=1", "display_name": "Sergio A.", "link": "https://stackoverflow.com/users/3338091/sergio-a"}, "is_accepted": false, "score": 0, "last_activity_date": 1598514574, "creation_date": 1598514574, "answer_id": 63611453, "question_id": 40486970, "link": "https://stackoverflow.com/questions/40486970/rmagick-gem-is-not-getting-installed-on-windows/63611453#63611453", "title": "rmagick gem is not getting installed on Windows", "body": "<p>This topic is kind of hard to solve, due to the problems with ImageMagick can be caused by any number of reasons.</p>\n<p>For anyone feeling a bit lost like i did, i recommend this link which helped me solve my issue: <a href=\"https://medium.com/ruby-on-rails-web-application-development/install-rmagick-gem-on-windows-7-8-10-imagemagick-6-9-4-q16-hdri-5492c3fef202\" rel=\"nofollow noreferrer\">https://medium.com/ruby-on-rails-web-application-development/install-rmagick-gem-on-windows-7-8-10-imagemagick-6-9-4-q16-hdri-5492c3fef202</a></p>\n"}], "owner": {"reputation": 41, "user_id": 5903023, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-j5mEhsf9UuI/AAAAAAAAAAI/AAAAAAAAB0k/Cxke4HKkWjc/photo.jpg?sz=128", "display_name": "Arpit Gupta", "link": "https://stackoverflow.com/users/5903023/arpit-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 634, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1598514574, "creation_date": 1478608052, "last_edit_date": 1478622400, "question_id": 40486970, "link": "https://stackoverflow.com/questions/40486970/rmagick-gem-is-not-getting-installed-on-windows", "title": "rmagick gem is not getting installed on Windows", "body": "<p>I am trying to install all ruby gems ion windows for redmine. Everytime I am getting below exception</p>\n\n<pre><code>C:\\xampp\\htdocs\\dev-ruby\\redmine&gt;gem install rmagick\nTemporarily enhancing PATH to include DevKit...\nBuilding native extensions.  This could take a while...\nERROR:  Error installing rmagick:\nERROR: Failed to build gem native extension.\nC:/xampp/ruby/RailsInstaller/Ruby2.2.0/bin/ruby.exe extconf.rb\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may need configuration options.\nProvided configuration options:\n--with-opt-dir\n--without-opt-dir\n--with-opt-include\n--without-opt-include=${opt-dir}/include\n--with-opt-lib\n--without-opt-lib=${opt-dir}/lib\n--with-make-prog\n--without-make-prog\n--srcdir=.\n--curdir\n--ruby=C:/xampp/ruby/RailsInstaller/Ruby2.2.0/bin/$(RUBY_BASE_NAME)\nextconf.rb:141:in ``': No such file or directory - identify -version (Errno::ENOENT)\nfrom extconf.rb:141:in `configure_compile_options'\nfrom extconf.rb:16:in `initialize'\nfrom extconf.rb:548:in `new'\nfrom extconf.rb:548:in `&lt;main&gt;'\nextconf failed, exit code 1\nGem files will remain installed in C:/xampp/ruby/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/gems/rmagick-2.16.0 for inspection.\nResults logged to C:/xampp/ruby/RailsInstaller/Ruby2.2.0/lib/ruby/gems/2.2.0/extensions/x86-mingw32/2.2.0/rmagick-2.16.0/gem_make.out\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "apple-push-notifications", "jwt"], "comments": [{"owner": {"reputation": 4833, "user_id": 1328513, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/7ae23c0631c6d70fb8e8cb51854a0ff4?s=128&d=identicon&r=PG", "display_name": "Zhenya", "link": "https://stackoverflow.com/users/1328513/zhenya"}, "edited": false, "score": 0, "creation_date": 1488455122, "post_id": 40486652, "comment_id": 72243560, "body": "according to this issue, rpush doesn&#39;t support this as of now: <a href=\"https://github.com/rpush/rpush/issues/322\" rel=\"nofollow noreferrer\">github.com/rpush/rpush/issues/322</a>"}], "answers": [{"comments": [{"owner": {"reputation": 21059, "user_id": 3294226, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/8513ed09979888196c072a2ffe6107c1?s=128&d=identicon&r=PG", "display_name": "Jean Le Moignan", "link": "https://stackoverflow.com/users/3294226/jean-le-moignan"}, "edited": false, "score": 0, "creation_date": 1580507898, "post_id": 43876643, "comment_id": 106133813, "body": "Late at the party but I&#39;m trying to get p8push to work. My notifications are never marked &quot;sent&quot;. But if I test everything with &quot;Push Notifications Tester&quot; and same parameters, I get notifications on my iPhone. My server runs Ubuntu 16.04.6, with all parameters hardcoded in a simple REST (Sinatra) call. Latest p8push version."}], "tags": [], "owner": {"reputation": 4263, "user_id": 148736, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/98ce675339d7e7c8269349943d6a0823?s=128&d=identicon&r=PG", "display_name": "Andrew Arrow", "link": "https://stackoverflow.com/users/148736/andrew-arrow"}, "is_accepted": false, "score": 0, "last_activity_date": 1494352102, "creation_date": 1494352102, "answer_id": 43876643, "question_id": 40486652, "link": "https://stackoverflow.com/questions/40486652/encoding-jwt-key-for-apns-using-rails-rpush-gem/43876643#43876643", "title": "Encoding JWT key for APNS using rails RPUSH gem", "body": "<p>here is ruby gem for new p8 format that uses http2 and jwt <a href=\"https://github.com/andrewarrow/p8push\" rel=\"nofollow noreferrer\">https://github.com/andrewarrow/p8push</a></p>\n"}], "owner": {"reputation": 1634, "user_id": 1662820, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6daebbd6e63595fdd96d5462e87d5eb0?s=128&d=identicon&r=PG", "display_name": "xamenrax", "link": "https://stackoverflow.com/users/1662820/xamenrax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 543, "favorite_count": 2, "answer_count": 1, "score": 3, "last_activity_date": 1494352102, "creation_date": 1478607141, "last_edit_date": 1478612559, "question_id": 40486652, "link": "https://stackoverflow.com/questions/40486652/encoding-jwt-key-for-apns-using-rails-rpush-gem", "title": "Encoding JWT key for APNS using rails RPUSH gem", "body": "<p>I want to use JWT key to send push notifications</p>\n\n<p>I searched for libraries implementing JWT token standard: <a href=\"https://jwt.io/\" rel=\"nofollow noreferrer\">https://jwt.io/</a></p>\n\n<p>So I found ruby-jwt gem: <a href=\"https://github.com/jwt/ruby-jwt\" rel=\"nofollow noreferrer\">https://github.com/jwt/ruby-jwt</a></p>\n\n<p>But it seems that it can't create key with the structure required by Apple:</p>\n\n<pre><code>{\n    \"alg\": \"ES256\",\n    \"kid\": \"ABC123DEFG\"\n}\n{\n    \"iss\": \"DEF123GHIJ\",\n    \"iat\": 1437179036\n }\n</code></pre>\n\n<p>Also, how should I use APNs Auth Key (.p8 mime-type) to generate JWT token?</p>\n\n<p>Any advices are welcome</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Ok, I found out, that it is possible to add custom fields to header\n<a href=\"https://github.com/jwt/ruby-jwt/pull/8/files\" rel=\"nofollow noreferrer\">https://github.com/jwt/ruby-jwt/pull/8/files</a></p>\n\n<p>Anyways, how should I use APNs Auth Key? Does rpush gem supports jwt tokens?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1478605113, "post_id": 40485828, "comment_id": 68215365, "body": "<code>60000 * 60000</code> is the number of <i>micro</i>seconds in one hour."}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1478605453, "post_id": 40485828, "comment_id": 68215582, "body": "@Stefan sorry that was a copy and paste issue. However I still only get minutes and not hours."}], "answers": [{"comments": [{"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "edited": false, "score": 0, "creation_date": 1478605699, "post_id": 40486133, "comment_id": 68215765, "body": "Thanks :) Works perfect!"}], "tags": [], "owner": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "is_accepted": true, "score": 6, "last_activity_date": 1478605626, "creation_date": 1478605626, "answer_id": 40486133, "question_id": 40485828, "link": "https://stackoverflow.com/questions/40485828/convert-milliseconds-to-hours-and-mins-in-ruby/40486133#40486133", "title": "Convert milliseconds to hours and mins in ruby", "body": "<p>You have miscalculated the number of milliseconds in 1 hour and 1 minute. Try the following:</p>\n\n<pre><code>def get_duration_hrs_and_mins(duration)\n  hours = duration / (1000 * 60 * 60)\n  minutes = duration / (1000 * 60) % 60\n  \"#{hours}h #{minutes}m\" \nrescue\n  \"\"\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 5, "last_activity_date": 1478611481, "creation_date": 1478611481, "answer_id": 40488097, "question_id": 40485828, "link": "https://stackoverflow.com/questions/40485828/convert-milliseconds-to-hours-and-mins-in-ruby/40488097#40488097", "title": "Convert milliseconds to hours and mins in ruby", "body": "<p>Your calculations are off:</p>\n\n<ul>\n<li>a second has 1000 milliseconds</li>\n<li>a minute has 1000 \u00d7 60 milliseconds</li>\n<li>an hour has 1000 \u00d7 60 \u00d7 60 milliseconds</li>\n</ul>\n\n<p>To get the number of (full) hours, you have to divide the number of milliseconds by 1000 \u00d7 60 \u00d7 60. The remainder can then be used to calculate the number of minutes in a similar way.</p>\n\n<p>This is what <a href=\"http://ruby-doc.org/core-2.3.1/Numeric.html#method-i-divmod\" rel=\"noreferrer\"><code>divmod</code></a> is for:</p>\n\n<pre><code>def get_duration_hrs_and_mins(milliseconds)\n  return '' unless milliseconds\n\n  hours, milliseconds   = milliseconds.divmod(1000 * 60 * 60)\n  minutes, milliseconds = milliseconds.divmod(1000 * 60)\n  seconds, milliseconds = milliseconds.divmod(1000)\n  \"#{hours}h #{minutes}m #{seconds}s #{milliseconds}ms\"\nend\n\nget_duration_hrs_and_mins(123456789)\n#=&gt; \"34h 17m 36s 789ms\"\n</code></pre>\n\n<p>I've added seconds and milliseconds to the output for demonstration purposes. And I've also replaced the <code>rescue</code> block with a guard clause, assuming that you want to handle <code>nil</code> values.</p>\n"}], "owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4433, "favorite_count": 0, "accepted_answer_id": 40486133, "answer_count": 2, "score": 0, "last_activity_date": 1478611481, "creation_date": 1478604737, "last_edit_date": 1478605426, "question_id": 40485828, "link": "https://stackoverflow.com/questions/40485828/convert-milliseconds-to-hours-and-mins-in-ruby", "title": "Convert milliseconds to hours and mins in ruby", "body": "<p>I have the following Rails helper to convert milliseconds to hours and mins:</p>\n\n<pre><code>def get_duration_hrs_and_mins(duration)\n  hours = duration / (3600000 * 3600000)\n  minutes = (duration / 60000) % 60000\n  \"#{hours}h #{minutes}m\" \nrescue\n  \"\"\nend\n</code></pre>\n\n<p>However it always just returns it in minutes (e.g. 364m) and doesn't show the hours... and keep the minutes under 60.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin"], "comments": [{"owner": {"reputation": 2599, "user_id": 39223, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/39e19e0acb0d2809f60f57cec9b50512?s=128&d=identicon&r=PG", "display_name": "RJHunter", "link": "https://stackoverflow.com/users/39223/rjhunter"}, "edited": false, "score": 1, "creation_date": 1478603198, "post_id": 40485042, "comment_id": 68214233, "body": "Welcome to Stack Overflow! Could you clarify your question to include what you&#39;ve tried so far and what the results were?"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 7131101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086e205fbb0ed2fee50356ac5ee4fe7b?s=128&d=identicon&r=PG&f=1", "display_name": "Waqas", "link": "https://stackoverflow.com/users/7131101/waqas"}, "edited": false, "score": 0, "creation_date": 1478605798, "post_id": 40485482, "comment_id": 68215853, "body": "Thanks, I have now simplified the process and just wan to get a list of all students and just create attendances for them. when I click on create attendance button it just creates one attendance and no student_id or any params are passed?"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 15, "user_id": 7131101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086e205fbb0ed2fee50356ac5ee4fe7b?s=128&d=identicon&r=PG&f=1", "display_name": "Waqas", "link": "https://stackoverflow.com/users/7131101/waqas"}, "edited": false, "score": 0, "creation_date": 1478606305, "post_id": 40485482, "comment_id": 68216174, "body": "Can you show us some of your view and controller code? Only the relevant one."}, {"owner": {"reputation": 15, "user_id": 7131101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086e205fbb0ed2fee50356ac5ee4fe7b?s=128&d=identicon&r=PG&f=1", "display_name": "Waqas", "link": "https://stackoverflow.com/users/7131101/waqas"}, "edited": false, "score": 0, "creation_date": 1478607689, "post_id": 40485482, "comment_id": 68217099, "body": "i just posted the view and for controller thats what I am struggling with, at the moment its just a simple scaffold code"}, {"owner": {"reputation": 15, "user_id": 7131101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086e205fbb0ed2fee50356ac5ee4fe7b?s=128&d=identicon&r=PG&f=1", "display_name": "Waqas", "link": "https://stackoverflow.com/users/7131101/waqas"}, "edited": false, "score": 0, "creation_date": 1478608254, "post_id": 40485482, "comment_id": 68217464, "body": "` def new     @attendance = attendance.new   end    # GET /attendances/1/edit   def edit   end    def create     @attendance = attendance.new(attendance_params)      respond_to do |format|       if @attendance.save         format.html { redirect_to @attendance, notice: &#39;attendance was successfully created.&#39; }         format.json { render :show, status: :created, location: @attendance }       else         format.html { render :new }         format.json { render json: @attendance.errors, status: :unprocessable_entity }       end end end `"}, {"owner": {"reputation": 15, "user_id": 7131101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086e205fbb0ed2fee50356ac5ee4fe7b?s=128&d=identicon&r=PG&f=1", "display_name": "Waqas", "link": "https://stackoverflow.com/users/7131101/waqas"}, "edited": false, "score": 0, "creation_date": 1478608552, "post_id": 40485482, "comment_id": 68217658, "body": "I would really appreciate your help, I am reading up a lot but it will take me some time to fully understand rails and programming."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 15, "user_id": 7131101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086e205fbb0ed2fee50356ac5ee4fe7b?s=128&d=identicon&r=PG&f=1", "display_name": "Waqas", "link": "https://stackoverflow.com/users/7131101/waqas"}, "edited": false, "score": 0, "creation_date": 1478608734, "post_id": 40485482, "comment_id": 68217798, "body": "I think you unintentionally answered your own question instead of editing your question. Ideally you should remove your answer and edit the question to include your controller code and view code. The code i suggested was the pseudo code. It may not work as is. You will have to check the syntax and options for form helpers like <code>checkbox_tag</code>. Read the docs and modify my code. Then, update your question with the errors you are getting."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "reply_to_user": {"reputation": 15, "user_id": 7131101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086e205fbb0ed2fee50356ac5ee4fe7b?s=128&d=identicon&r=PG&f=1", "display_name": "Waqas", "link": "https://stackoverflow.com/users/7131101/waqas"}, "edited": false, "score": 0, "creation_date": 1478608920, "post_id": 40485482, "comment_id": 68217945, "body": "As a process of learning, you should go through the docs in details, and try out as many things as possible. Don&#39;t be afraid of getting errors. Each blocker will help you learn something for the future. Debugger is your best friend. Use it wisely whenever you are stuck."}], "tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1478603728, "creation_date": 1478603728, "answer_id": 40485482, "question_id": 40485042, "link": "https://stackoverflow.com/questions/40485042/generate-attendance-view-form-in-rails-for-all-students/40485482#40485482", "title": "Generate attendance view/form in rails for all students", "body": "<p>You can make an <code>edit</code> action, where you will find the classroom for which you want to mark attendances.</p>\n\n<pre><code>class AttendancesController &lt; ApplicationController\n  def edit\n    @classroom = Classroom.find(&lt;classroom-id&gt;)\n  end\n\n  def update\n  end\nend\n</code></pre>\n\n<p>In your view <code>edit.html.erb</code></p>\n\n<pre><code>&lt;%= form_for(@classroom, url: '/attendances/:id', method: :put) do |f| %&gt;\n  &lt;table&gt;\n    &lt;%- @classroom.students.each do |student| %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;%= student.name %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= checkbox_tag \"attendances[#{student.id}][present]\" %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= checkbox_tag \"attendances[#{student.id}][absent]\" %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= checkbox_tag \"attendances[#{student.id}][halfday]\" %&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;% end %&gt;\n  &lt;/table&gt;\n\n  &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This way, when you submit the form, you will receive these params in your <code>update</code> action:</p>\n\n<pre><code>`{ attendances: { '1' =&gt; { present: false, absent: true, halfday: false }, '2' =&gt; { present: true, absent: false, halfday: false }, ... } }`.\n</code></pre>\n\n<p>Then you can write logic in your action to save these details to database.</p>\n\n<p>Note: This is kind of pseudo code. Please check the syntax and options for different html tags.</p>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 7131101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086e205fbb0ed2fee50356ac5ee4fe7b?s=128&d=identicon&r=PG&f=1", "display_name": "Waqas", "link": "https://stackoverflow.com/users/7131101/waqas"}, "is_accepted": false, "score": 0, "last_activity_date": 1478606525, "creation_date": 1478606525, "answer_id": 40486450, "question_id": 40485042, "link": "https://stackoverflow.com/questions/40485042/generate-attendance-view-form-in-rails-for-all-students/40486450#40486450", "title": "Generate attendance view/form in rails for all students", "body": "<p>Thanks to @Jagdeep Singh for getting me up and running. I have now made the process more simple so I can get my head around. I just want to get the list of all students and create their attendances.</p>\n\n<p>My view:</p>\n\n<pre><code>&lt;% @students = Student.all %&gt;\n\n&lt;%= form_for(:attendances, url: '/admin/attendances/') do |f| %&gt;\n  &lt;table&gt;\n  &lt;%= @today %&gt;\n  &lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Present&lt;/th&gt;&lt;th&gt;Absent&lt;/th&gt;&lt;th&gt;halfday&lt;/th&gt;\n    &lt;%- @students.each do |student| %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;%= student.first_name %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= check_box_tag \"attendances[#{student.id}][present]\" %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= check_box_tag \"attendances[#{student.id}][absent]\" %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= check_box_tag \"attendances[#{student.id}][halfday]\" %&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;% end %&gt;\n  &lt;/table&gt;\n\n  &lt;%= f.submit %&gt;\n&lt;% end %&gt; \n</code></pre>\n\n<p>when I click on create attendance button it just creates just one with record with all default params and.</p>\n\n<p>I am sorry I am still learning but once I get my head around on how I can create attendances for all 10 students i have in one go.</p>\n"}], "owner": {"reputation": 15, "user_id": 7131101, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/086e205fbb0ed2fee50356ac5ee4fe7b?s=128&d=identicon&r=PG&f=1", "display_name": "Waqas", "link": "https://stackoverflow.com/users/7131101/waqas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 698, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1478620134, "creation_date": 1478602338, "last_edit_date": 1478620134, "question_id": 40485042, "link": "https://stackoverflow.com/questions/40485042/generate-attendance-view-form-in-rails-for-all-students", "title": "Generate attendance view/form in rails for all students", "body": "<p>I am new to Rails and I am struggling on something which sounds easy but can not get it to work. I have two models Students and Attendances.</p>\n\n<p>Student model:</p>\n\n<pre><code>name lastname classroom_id\n</code></pre>\n\n<p>Attendance model:</p>\n\n<pre><code>present:boolean absent:boolean halfday:boolean attnd_date:date student_id\n</code></pre>\n\n<p>Students <code>has_many :attendances</code> and attendance <code>belongs_to :student</code>.</p>\n\n<p>I can make an entry for individual student and take their attendance however I want to generate a view where I show all the students (or show all students for a given classroom) and next to each student name I would like to show the three checkboxes so that I can mark who is present and absent in one go rather than one by one and submit the form.</p>\n\n<p>Any help here is much appreciated. Using Rails 4 and ruby 2.2.0</p>\n\n<p>Thanks</p>\n"}]