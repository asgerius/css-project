[{"tags": ["ruby-on-rails", "ruby", "bootstrap-select"], "comments": [{"owner": {"reputation": 7129, "user_id": 5841629, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/N0dOJ.jpg?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5841629/ray"}, "edited": false, "score": 0, "creation_date": 1459991413, "post_id": 36463121, "comment_id": 60541445, "body": "Did you try <code>:&quot;data-live-search&quot; =&gt; &quot;true</code>?"}, {"owner": {"reputation": 51, "user_id": 3849947, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001683159652/picture?type=large", "display_name": "Angel Ac", "link": "https://stackoverflow.com/users/3849947/angel-ac"}, "reply_to_user": {"reputation": 7129, "user_id": 5841629, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/N0dOJ.jpg?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5841629/ray"}, "edited": false, "score": 0, "creation_date": 1460054239, "post_id": 36463121, "comment_id": 60578488, "body": "yes i do, data-live-search but is not working"}, {"owner": {"reputation": 7129, "user_id": 5841629, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/N0dOJ.jpg?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5841629/ray"}, "edited": false, "score": 0, "creation_date": 1460099422, "post_id": 36463121, "comment_id": 60595064, "body": "Well if it did show, then there&#39;s probably something wrong with the JavaScript instead. My guess is Turbolinks. Try changing the body tag to this: <code>&lt;body data-no-turbolink&gt;</code> and hit refresh."}, {"owner": {"reputation": 51, "user_id": 3849947, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001683159652/picture?type=large", "display_name": "Angel Ac", "link": "https://stackoverflow.com/users/3849947/angel-ac"}, "reply_to_user": {"reputation": 7129, "user_id": 5841629, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/N0dOJ.jpg?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5841629/ray"}, "edited": false, "score": 0, "creation_date": 1460660045, "post_id": 36463121, "comment_id": 60858614, "body": "hi, where i can changing???? thanks"}, {"owner": {"reputation": 7129, "user_id": 5841629, "user_type": "registered", "accept_rate": 49, "profile_image": "https://i.stack.imgur.com/N0dOJ.jpg?s=128&g=1", "display_name": "Ray", "link": "https://stackoverflow.com/users/5841629/ray"}, "edited": false, "score": 0, "creation_date": 1460662180, "post_id": 36463121, "comment_id": 60859834, "body": "application.html.erb add <code>data-no-turbolink</code> to the body tag. ex: <code>&lt;body data-no-turbolink&gt;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3020, "user_id": 4493564, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh3.googleusercontent.com/-ZrR5HKgzmQA/AAAAAAAAAAI/AAAAAAAAA2Y/YxH3F9m512U/photo.jpg?sz=128", "display_name": "Petr Gazarov", "link": "https://stackoverflow.com/users/4493564/petr-gazarov"}, "is_accepted": false, "score": 2, "last_activity_date": 1459980668, "creation_date": 1459980668, "answer_id": 36463248, "question_id": 36463121, "link": "https://stackoverflow.com/questions/36463121/how-to-add-data-attribute-in-rails-bootstrap-form-select/36463248#36463248", "title": "How to add data attribute in Rails bootstrap form select?", "body": "<p>This should do it:</p>\n\n<pre><code>&lt;%= f.select :status_cont, [[\"Activo\", \"Activo\"], [\"Inactivo\", \"Inactivo\"]], {:prompt =&gt; \"Elegir\"}, { class: \"form-control\", data: { live_search: 'true' } } %&gt;\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 3849947, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001683159652/picture?type=large", "display_name": "Angel Ac", "link": "https://stackoverflow.com/users/3849947/angel-ac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 804, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1459980668, "creation_date": 1459980039, "question_id": 36463121, "link": "https://stackoverflow.com/questions/36463121/how-to-add-data-attribute-in-rails-bootstrap-form-select", "title": "How to add data attribute in Rails bootstrap form select?", "body": "<p>I found this Bootstrap Select project and its gem for Rails. I want to implement search in the select tag.</p>\n\n<p>I do inspect element and here is the HTML source:</p>\n\n<pre><code>&lt;select class=\"selectpicker\" data-live-search=\"true\"&gt;\n  &lt;option&gt;Hot Dog, Fries and a Soda&lt;/option&gt;\n  &lt;option&gt;Burger, Shake and a Smile&lt;/option&gt;\n  &lt;option&gt;Sugar, Spice and all things nice&lt;/option&gt;\n&lt;/select&gt; \n</code></pre>\n\n<p>How do I add data-live-search=\"true\" inside my form select tag?</p>\n\n<p>My form select</p>\n\n<pre><code>  &lt;%= f.select :status_cont, [[\"Activo\", \"Activo\"], [\"Inactivo\", \"Inactivo\"]], {:prompt =&gt; \"Elegir\"}, { class: \"form-control\", 'live-search' =&gt; 'true' } %&gt;\n</code></pre>\n\n<p>buts its not work\n<a href=\"http://i.stack.imgur.com/p4Ul0.png\" rel=\"nofollow\">enter image description here</a></p>\n"}, {"tags": ["ruby", "sorting", "pathname"], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 4250, "user_id": 129798, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/5cc165c5b9f18bfb64faddb021c82172?s=128&d=identicon&r=PG", "display_name": "Brendon Muir", "link": "https://stackoverflow.com/users/129798/brendon-muir"}, "edited": false, "score": 0, "creation_date": 1460136453, "post_id": 36462894, "comment_id": 60618418, "body": "While I appreciate the vote and all, please read the last paragraph in <a href=\"http://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a>."}, {"owner": {"reputation": 4250, "user_id": 129798, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/5cc165c5b9f18bfb64faddb021c82172?s=128&d=identicon&r=PG", "display_name": "Brendon Muir", "link": "https://stackoverflow.com/users/129798/brendon-muir"}, "edited": false, "score": 0, "creation_date": 1460189987, "post_id": 36462894, "comment_id": 60634597, "body": "I find that a strange policy. I&#39;ve never had a mental link between an accepted answer and gratitude for that answer :)"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 4250, "user_id": 129798, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/5cc165c5b9f18bfb64faddb021c82172?s=128&d=identicon&r=PG", "display_name": "Brendon Muir", "link": "https://stackoverflow.com/users/129798/brendon-muir"}, "edited": false, "score": 0, "creation_date": 1460231046, "post_id": 36462894, "comment_id": 60648511, "body": "It&#39;s not strange when you understand the goal of SO. It&#39;s not a discussion forum and chit-chat/back and forth via comments is discouraged because they&#39;re for clarification and recommendations. There are other mechanisms available for that."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 3, "last_activity_date": 1459978966, "last_edit_date": 1492086990, "creation_date": 1459978966, "answer_id": 36462894, "question_id": 36462680, "link": "https://stackoverflow.com/questions/36462680/ordering-in-ruby-pathname-children/36462894#36462894", "title": "Ordering in Ruby Pathname .children", "body": "<p>Pathname's <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/pathname/rdoc/Pathname.html#method-i-children\" rel=\"nofollow noreferrer\"><code>children</code></a> is actually doing:</p>\n\n<pre><code>def children(with_directory=true)\n  with_directory = false if @path == '.'\n  result = []\n  Dir.foreach(@path) {|e|\n    next if e == '.' || e == '..'\n    if with_directory\n      result &lt;&lt; self.class.new(File.join(@path, e))\n    else\n      result &lt;&lt; self.class.new(e)\n    end\n  }\n  result\nend\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/core-2.3.0/Dir.html#method-c-foreach\" rel=\"nofollow noreferrer\"><code>Dir.foreach</code></a> calls the OS and iterates the directory passed in. There is no provision for telling the OS to sort by a particular order.</p>\n\n<p>\"<a href=\"https://unix.stackexchange.com/q/13451/2071\">What is the \"directory order\" of files in a directory (used by <code>ls -U</code>)?</a>\" is probably of interest to you.</p>\n"}], "owner": {"reputation": 4250, "user_id": 129798, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/5cc165c5b9f18bfb64faddb021c82172?s=128&d=identicon&r=PG", "display_name": "Brendon Muir", "link": "https://stackoverflow.com/users/129798/brendon-muir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "accepted_answer_id": 36462894, "answer_count": 1, "score": 2, "last_activity_date": 1459978966, "creation_date": 1459978023, "question_id": 36462680, "link": "https://stackoverflow.com/questions/36462680/ordering-in-ruby-pathname-children", "title": "Ordering in Ruby Pathname .children", "body": "<p>It seems the order of the filesystem entities returned by Pathname's <code>.children</code> method is arbitrary or at least not alphabetical.</p>\n\n<p>Is there a way to have these returned in alphabetical order via the file system rather than calling <code>.sort</code> on the returned array?</p>\n"}, {"tags": ["ruby", "activesupport"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1459984865, "post_id": 36462354, "comment_id": 60539748, "body": "You could always write your own core extension called <code>try_or_whatever</code>."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1459984899, "post_id": 36462387, "comment_id": 60539756, "body": "The one caveat here is this will stomp <code>false</code> values and any method that legitimately returns <code>nil</code>."}], "tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": true, "score": 3, "last_activity_date": 1459976906, "creation_date": 1459976906, "answer_id": 36462387, "question_id": 36462354, "link": "https://stackoverflow.com/questions/36462354/utility-method-like-activesupporttry-in-ruby-that-returns-a-default-value-if-me/36462387#36462387", "title": "utility method like ActiveSupport#try in ruby that returns a default value if method undefined", "body": "<p>You can use <code>||</code> operator when you want return something instead of <code>nil</code>:</p>\n\n<pre><code>1.try(:not_a_method) || 0\n#=&gt; 0\n</code></pre>\n"}], "owner": {"reputation": 1978, "user_id": 1222355, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/44e0773345e9065b2e012b434370dbbb?s=128&d=identicon&r=PG", "display_name": "David West", "link": "https://stackoverflow.com/users/1222355/david-west"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 36462387, "answer_count": 1, "score": 0, "last_activity_date": 1459979507, "creation_date": 1459976797, "last_edit_date": 1459979507, "question_id": 36462354, "link": "https://stackoverflow.com/questions/36462354/utility-method-like-activesupporttry-in-ruby-that-returns-a-default-value-if-me", "title": "utility method like ActiveSupport#try in ruby that returns a default value if method undefined", "body": "<p>I sometimes use <code>#try</code> from <code>ActiveSupport</code>:</p>\n\n<pre><code>1.try(:not_a_method)\n#=&gt; nil\n</code></pre>\n\n<p>Yaay! No exceptions thrown, but let's say I don't want nil:</p>\n\n<pre><code>1.better_than_try(:not_a_method){0}\n#=&gt; 0\n</code></pre>\n\n<p>Does this exist?</p>\n"}, {"tags": ["ruby", "byebug"], "answers": [{"tags": [], "owner": {"reputation": 2322, "user_id": 4443615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fynBi.jpg?s=128&g=1", "display_name": "Lucas Nelson", "link": "https://stackoverflow.com/users/4443615/lucas-nelson"}, "is_accepted": false, "score": 5, "last_activity_date": 1459979915, "last_edit_date": 1495540424, "creation_date": 1459979326, "answer_id": 36462987, "question_id": 36462112, "link": "https://stackoverflow.com/questions/36462112/how-to-continue-without-breakpoints-in-byebug/36462987#36462987", "title": "How to continue without breakpoints in Byebug", "body": "<p>A <code>byebug</code> method call in your code is not a 'breakpoint' (thinking of the references to breakpoint in the help output).</p>\n\n<p>As per the help output, <code>breakpoint</code>s can be disabled with the <code>disable</code> command. But that does not solve your problem because the next <code>byebug</code> will pause execution again.</p>\n\n<p>Since <code>byebug</code> is just a method call, you can make it conditional:</p>\n\n<pre><code>byebug if SomeModule.byebug?\n</code></pre>\n\n<p>Then, in SomeModule, you could use a global variable to toggle it on/off. You'd either have to do that on all your calls to byebug, or you could monkey-patch the byebug method to do the same, <code>alias_method_chain</code> or something similar.</p>\n\n<p>\"<a href=\"https://stackoverflow.com/questions/30627186/make-byebug-finish-executing-without-exiting-pry/35545808#35545808\">Make Byebug finish executing without exiting Pry</a>\" is a similar answer.</p>\n"}, {"comments": [{"owner": {"reputation": 9149, "user_id": 214812, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/03fb59bf27824bdd9e12b461b5f1c117?s=128&d=identicon&r=PG", "display_name": "ardavis", "link": "https://stackoverflow.com/users/214812/ardavis"}, "edited": false, "score": 0, "creation_date": 1597408704, "post_id": 63391961, "comment_id": 112130337, "body": "This is exactly what I was looking for. Pairs nicely with a temporary before_action in the application controller to turn it back on with every request."}, {"owner": {"reputation": 582, "user_id": 3320084, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/a8f87168e7eff7654e86885bcc7f4773?s=128&d=identicon&r=PG", "display_name": "Vijay Meena", "link": "https://stackoverflow.com/users/3320084/vijay-meena"}, "edited": false, "score": 0, "creation_date": 1599287485, "post_id": 63391961, "comment_id": 112733550, "body": "is there any other way to achieve it ? like --disable-all or something like that ?"}], "tags": [], "owner": {"reputation": 17551, "user_id": 1182464, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e569ac49e984e3a55ee167b14c11cf41?s=128&d=identicon&r=PG", "display_name": "estani", "link": "https://stackoverflow.com/users/1182464/estani"}, "is_accepted": true, "score": 5, "last_activity_date": 1597417824, "last_edit_date": 1597417824, "creation_date": 1597310403, "answer_id": 63391961, "question_id": 36462112, "link": "https://stackoverflow.com/questions/36462112/how-to-continue-without-breakpoints-in-byebug/63391961#63391961", "title": "How to continue without breakpoints in Byebug", "body": "<p>I just found out in the <a href=\"https://github.com/deivid-rodriguez/byebug/blob/e1fb8209d56922f7bafd128af84e61568b6cd6a7/lib/byebug/attacher.rb\" rel=\"nofollow noreferrer\">code</a>, that you can stop byebug altogether using:</p>\n<pre><code>Byebug.mode = :off\n</code></pre>\n<p>You can't turn it back on, since it won't attach on itself any more, but this is handy, e.g. when just debugging a script that you want to finish running.</p>\n"}, {"tags": [], "owner": {"reputation": 3624, "user_id": 5615038, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/wW8mP.jpg?s=128&g=1", "display_name": "fangxing", "link": "https://stackoverflow.com/users/5615038/fangxing"}, "is_accepted": false, "score": 2, "last_activity_date": 1612170494, "creation_date": 1612170494, "answer_id": 65989860, "question_id": 36462112, "link": "https://stackoverflow.com/questions/36462112/how-to-continue-without-breakpoints-in-byebug/65989860#65989860", "title": "How to continue without breakpoints in Byebug", "body": "<p>You can use <code>continue!</code></p>\n<p>see this PR <a href=\"https://github.com/deivid-rodriguez/byebug/pull/546\" rel=\"nofollow noreferrer\">https://github.com/deivid-rodriguez/byebug/pull/546</a></p>\n"}], "owner": {"reputation": 9149, "user_id": 214812, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/03fb59bf27824bdd9e12b461b5f1c117?s=128&d=identicon&r=PG", "display_name": "ardavis", "link": "https://stackoverflow.com/users/214812/ardavis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7104, "favorite_count": 0, "accepted_answer_id": 63391961, "answer_count": 3, "score": 6, "last_activity_date": 1612170494, "creation_date": 1459975951, "last_edit_date": 1459979972, "question_id": 36462112, "link": "https://stackoverflow.com/questions/36462112/how-to-continue-without-breakpoints-in-byebug", "title": "How to continue without breakpoints in Byebug", "body": "<p>Using the <code>byebug</code> gem gives me the ability to <code>continue</code> until the next breakpoint:</p>\n\n<pre><code>(byebug) help\n\n  break      -- Sets breakpoints in the source code\n  catch      -- Handles exception catchpoints\n  condition  -- Sets conditions on breakpoints\n  continue   -- Runs until program ends, hits a breakpoint or reaches a line\n  delete     -- Deletes breakpoints\n  disable    -- Disables breakpoints or displays\n  display    -- Evaluates expressions every time the debugger stops\n  down       -- Moves to a lower frame in the stack trace\n  edit       -- Edits source files\n  enable     -- Enables breakpoints or displays\n  finish     -- Runs the program until frame returns\n  frame      -- Moves to a frame in the call stack\n  help       -- Helps you using byebug\n  history    -- Shows byebug's history of commands\n  info       -- Shows several informations about the program being debugged\n  interrupt  -- Interrupts the program\n  irb        -- Starts an IRB session\n  kill       -- Sends a signal to the current process\n  list       -- Lists lines of source code\n  method     -- Shows methods of an object, class or module\n  next       -- Runs one or more lines of code\n  pry        -- Starts a Pry session\n  ps         -- Evaluates an expression and prettyprints &amp; sort the result\n  quit       -- Exits byebug\n  restart    -- Restarts the debugged program\n  save       -- Saves current byebug session to a file\n  set        -- Modifies byebug settings\n  show       -- Shows byebug settings\n  source     -- Restores a previously saved byebug session\n  step       -- Steps into blocks or methods one or more times\n  thread     -- Commands to manipulate threads\n  tracevar   -- Enables tracing of a global variable\n  undisplay  -- Stops displaying all or some expressions when program stops\n  untracevar -- Stops tracing a global variable\n  up         -- Moves to a higher frame in the stack trace\n  var        -- Shows variables and its values\n  where      -- Displays the backtrace\n</code></pre>\n\n<p>I looked all over and I cannot find a way to \"continue without breakpoints\". The only way I can think of is to remove or comment the <code>byebug</code> statements, quit with <code>q!</code> and restart the test.</p>\n\n<p>How can I continue without stopping at other <code>byebug</code> statements in Ruby?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 1, "creation_date": 1459975929, "post_id": 36462023, "comment_id": 60536042, "body": "you should add <code>end</code>  in the end"}, {"owner": {"reputation": 5, "user_id": 6090497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uGFrX.jpg?s=128&g=1", "display_name": "pHorekka", "link": "https://stackoverflow.com/users/6090497/phorekka"}, "reply_to_user": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1459976163, "post_id": 36462023, "comment_id": 60536195, "body": "thanks for help..let me check this out.."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1459976584, "post_id": 36462023, "comment_id": 60536441, "body": "Also worth noting that <code>animal1</code> is something you&#39;re referring to but never gets defined anywhere."}, {"owner": {"reputation": 5, "user_id": 6090497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uGFrX.jpg?s=128&g=1", "display_name": "pHorekka", "link": "https://stackoverflow.com/users/6090497/phorekka"}, "edited": false, "score": 0, "creation_date": 1459976612, "post_id": 36462023, "comment_id": 60536460, "body": "but let me know , why is there need of an extra &quot;end&quot;"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1459977108, "post_id": 36462023, "comment_id": 60536777, "body": "Why add an &quot;extra&quot; end? Because the language requires it? You have to &quot;end&quot; the class declaration, not only the method definitions. Ruby is telling you that: &quot;syntax error, unexpected end-of-input, expecting keyword_end&quot; means Ruby wants an <code>end</code>. The line number you show us in the error isn&#39;t correct and doesn&#39;t match the code you gave us since it only has 21 lines. Consistency in the errors and the code is really important when asking for help."}, {"owner": {"reputation": 5, "user_id": 6090497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uGFrX.jpg?s=128&g=1", "display_name": "pHorekka", "link": "https://stackoverflow.com/users/6090497/phorekka"}, "edited": false, "score": 0, "creation_date": 1459977368, "post_id": 36462023, "comment_id": 60536916, "body": "thanks @theTinMan..i have got it.."}, {"owner": {"reputation": 5, "user_id": 6090497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uGFrX.jpg?s=128&g=1", "display_name": "pHorekka", "link": "https://stackoverflow.com/users/6090497/phorekka"}, "edited": false, "score": 0, "creation_date": 1460013936, "post_id": 36462023, "comment_id": 60549666, "body": "i could not post all the lines ..so i omitted the half of the lines to make the codes shorter..."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1459983365, "post_id": 36462510, "comment_id": 60539274, "body": "Proper indentation cannot be stressed enough. When you get sloppy with your code mistakes happen and they&#39;re often really silly ones that could have been avoided by keeping things neat."}, {"owner": {"reputation": 5, "user_id": 6090497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uGFrX.jpg?s=128&g=1", "display_name": "pHorekka", "link": "https://stackoverflow.com/users/6090497/phorekka"}, "edited": false, "score": 0, "creation_date": 1460014150, "post_id": 36462510, "comment_id": 60549794, "body": "you&#39;r right @tadman.....and thanks thatway_3 for the reccomending those tutorials..."}], "tags": [], "owner": {"reputation": 383, "user_id": 3425913, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/L4ff7.jpg?s=128&g=1", "display_name": "thatway_3", "link": "https://stackoverflow.com/users/3425913/thatway-3"}, "is_accepted": false, "score": 1, "last_activity_date": 1459977713, "last_edit_date": 1459977713, "creation_date": 1459977387, "answer_id": 36462510, "question_id": 36462023, "link": "https://stackoverflow.com/questions/36462023/i-am-unable-to-execute-this-program/36462510#36462510", "title": "I am unable to execute this program", "body": "<p>Please take care about your indentation while writing ruby you will see where you missed the <code>end</code> keyword. </p>\n\n<p>But in your case the problem is not only about the indentation before start to fix it. You can check some documentation about <a href=\"http://www.railstips.org/blog/archives/2009/05/11/class-and-instance-methods-in-ruby/\" rel=\"nofollow\">Class and Instance Methods in Ruby</a> or <a href=\"http://zetcode.com/lang/rubytutorial/oop2/\" rel=\"nofollow\">this tutorial</a> can help you in your case.</p>\n\n<p>Good luck.</p>\n"}], "owner": {"reputation": 5, "user_id": 6090497, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uGFrX.jpg?s=128&g=1", "display_name": "pHorekka", "link": "https://stackoverflow.com/users/6090497/phorekka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1459977713, "creation_date": 1459975656, "last_edit_date": 1459975992, "question_id": 36462023, "link": "https://stackoverflow.com/questions/36462023/i-am-unable-to-execute-this-program", "title": "I am unable to execute this program", "body": "<blockquote>\n  <p>error:C:\\Users\\RR\\Desktop\\ruby_sandbox>ruby classes.rb classes.rb:44:\n  syntax error, unexpected end-of-input, expecting keyword_end</p>\n</blockquote>\n\n<p>my code is:</p>\n\n<pre><code>class Animal\n\nattr_accessor :name,:age,:sex,:location\n\n\ndef initialize(age=18,sex=\"not available\",location=\"not specified\")\n\n  puts \"details of animal\"\n\n  @age=age\n  @sex=sex\n  @location=location\nend\n\ndef condition(age,name)\n  if animal.age&gt;animal1.age\n    puts \"#{animal.name } is older than #{animal1.name}\"\n  else\n    puts \"animals age are in increasing order\"\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "watir-webdriver"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1459976408, "post_id": 36461802, "comment_id": 60536342, "body": "There is an IE driver bug that describes a similar problem of <a href=\"https://github.com/SeleniumHQ/selenium/issues/1356\" rel=\"nofollow noreferrer\">new window losing the session cookie</a>."}, {"owner": {"reputation": 817, "user_id": 1015666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92c387e284bf68f12794b79ca55d3a14?s=128&d=identicon&r=PG", "display_name": "Sveatoslav", "link": "https://stackoverflow.com/users/1015666/sveatoslav"}, "edited": false, "score": 0, "creation_date": 1460025012, "post_id": 36461802, "comment_id": 60557183, "body": "Try using getNeededURL, then get(getNeededURL) instead of clicking"}, {"owner": {"reputation": 1049, "user_id": 4635750, "user_type": "registered", "accept_rate": 49, "profile_image": "https://graph.facebook.com/847597188612174/picture?type=large", "display_name": "Nodir Nasirov", "link": "https://stackoverflow.com/users/4635750/nodir-nasirov"}, "reply_to_user": {"reputation": 817, "user_id": 1015666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92c387e284bf68f12794b79ca55d3a14?s=128&d=identicon&r=PG", "display_name": "Sveatoslav", "link": "https://stackoverflow.com/users/1015666/sveatoslav"}, "edited": false, "score": 0, "creation_date": 1460041906, "post_id": 36461802, "comment_id": 60570534, "body": "@SveatoslavCircel a click actually triggers ajax request, and there is no  <code>ahref</code> parameter of an element"}, {"owner": {"reputation": 817, "user_id": 1015666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92c387e284bf68f12794b79ca55d3a14?s=128&d=identicon&r=PG", "display_name": "Sveatoslav", "link": "https://stackoverflow.com/users/1015666/sveatoslav"}, "edited": false, "score": 0, "creation_date": 1460105165, "post_id": 36461802, "comment_id": 60598347, "body": "Then try using javascript."}], "owner": {"reputation": 1049, "user_id": 4635750, "user_type": "registered", "accept_rate": 49, "profile_image": "https://graph.facebook.com/847597188612174/picture?type=large", "display_name": "Nodir Nasirov", "link": "https://stackoverflow.com/users/4635750/nodir-nasirov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 130, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459974880, "creation_date": 1459974880, "question_id": 36461802, "link": "https://stackoverflow.com/questions/36461802/how-to-keep-child-browsers-in-the-same-session-in-watir", "title": "How to keep child browsers in the same session in watir?", "body": "<p>I have a web application with strong authentication, and after successful log in to the application, I have a link to click, which opens a task in a child browser. When I perform all this manually in IE 11, everything works fine, but when I perform this using watir-webdriver, a child browser takes me to a authentication page, probably because a browser that was opened by watir does share the same session between parent and child browsers. Does anyone know how to keep all tabs of IE in the same session?\nFYI I am using IEDriverServer 2.49, IE 11, Windows 7</p>\n"}, {"tags": ["arrays", "ruby", "json", "unit-testing", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 1211, "user_id": 5056202, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wq9rr.jpg?s=128&g=1", "display_name": "CheeseFry", "link": "https://stackoverflow.com/users/5056202/cheesefry"}, "edited": false, "score": 0, "creation_date": 1459978690, "post_id": 36462075, "comment_id": 60537560, "body": "This is giving me a count for each cell in the query. So &quot;Bugs&quot; &quot;Bunny&quot; is 2, when I&#39;d like it to be one ROW of data. Thoughts on how to fix this?"}, {"owner": {"reputation": 44, "user_id": 5386356, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/08uCu.jpg?s=128&g=1", "display_name": "matt721", "link": "https://stackoverflow.com/users/5386356/matt721"}, "reply_to_user": {"reputation": 1211, "user_id": 5056202, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wq9rr.jpg?s=128&g=1", "display_name": "CheeseFry", "link": "https://stackoverflow.com/users/5056202/cheesefry"}, "edited": false, "score": 0, "creation_date": 1459979056, "post_id": 36462075, "comment_id": 60537724, "body": "Could you post an example JSON.parse(response.body) is so that I can see what we&#39;re working with?"}, {"owner": {"reputation": 1211, "user_id": 5056202, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wq9rr.jpg?s=128&g=1", "display_name": "CheeseFry", "link": "https://stackoverflow.com/users/5056202/cheesefry"}, "edited": false, "score": 0, "creation_date": 1459979969, "post_id": 36462075, "comment_id": 60538078, "body": "Your code is right. I just realized I&#39;m hitting the wrong thing. I was expecting to only hit my sample data from my factory but I&#39;m actually punching through to my db and pulling data. That&#39;s No Bueno."}, {"owner": {"reputation": 44, "user_id": 5386356, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/08uCu.jpg?s=128&g=1", "display_name": "matt721", "link": "https://stackoverflow.com/users/5386356/matt721"}, "reply_to_user": {"reputation": 1211, "user_id": 5056202, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wq9rr.jpg?s=128&g=1", "display_name": "CheeseFry", "link": "https://stackoverflow.com/users/5056202/cheesefry"}, "edited": false, "score": 0, "creation_date": 1459980587, "post_id": 36462075, "comment_id": 60538319, "body": "Ah okay. Cool. :-)"}], "tags": [], "owner": {"reputation": 44, "user_id": 5386356, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/08uCu.jpg?s=128&g=1", "display_name": "matt721", "link": "https://stackoverflow.com/users/5386356/matt721"}, "is_accepted": true, "score": 1, "last_activity_date": 1459977709, "last_edit_date": 1495542250, "creation_date": 1459975826, "answer_id": 36462075, "question_id": 36461513, "link": "https://stackoverflow.com/questions/36461513/parse-json-to-an-array-in-rails/36462075#36462075", "title": "Parse JSON to an Array in Rails", "body": "<p><code>JSON.parse &lt;string&gt;</code> is probably what you need here. It could look something like this:</p>\n\n<pre><code>test \"works\" do\n  get :method\n\n  result = JSON.parse(response.body)\n\n  assert_equal 1, result.count\nend\n</code></pre>\n\n<p>Check out \"<a href=\"https://stackoverflow.com/questions/8282116/rails-how-to-unit-test-a-json-controller\">How to unit-test a JSON controller?</a>\" and the <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/JSON.html\" rel=\"nofollow noreferrer\">ActiveSupport JSON documention</a>.</p>\n"}], "owner": {"reputation": 1211, "user_id": 5056202, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Wq9rr.jpg?s=128&g=1", "display_name": "CheeseFry", "link": "https://stackoverflow.com/users/5056202/cheesefry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2409, "favorite_count": 0, "accepted_answer_id": 36462075, "answer_count": 1, "score": 0, "last_activity_date": 1459979720, "creation_date": 1459973941, "last_edit_date": 1459979720, "question_id": 36461513, "link": "https://stackoverflow.com/questions/36461513/parse-json-to-an-array-in-rails", "title": "Parse JSON to an Array in Rails", "body": "<p>I am writing a test for a method that is doing an SQL query. For this project they need the response to be JSON. My test is to see that the query returns the expected number of responses. I've run into a road block since my object is JSON instead of an array. How do I convert the JSON to an ARRAY?</p>\n\n<pre><code>  test \"works\" do\n    report = get :method\n    assert_equal 1, report.count\n  end\n</code></pre>\n\n<blockquote>\n  <p>NoMethodError: undefined method `count'...</p>\n</blockquote>\n\n<p>I've tried adding <code>array_report = ActiveSupport::JSON.decode(report)</code> but I get the following error message.</p>\n\n<blockquote>\n  <p>TypeError: no implicit conversion of ActionController::TestResponse\n  into String</p>\n</blockquote>\n\n<p>How can I parse the JSON correctly?</p>\n\n<p><strong>EDIT</strong></p>\n\n<pre><code>  def method\n    sql = \"SELECT MIN(departure_date), ch_invoice.invoice_id\n    FROM ch_invoice\n    INNER JOIN ch_trip\n    ON ch_invoice.invoice_id = ch_trip.invoice_id\n    WHERE departure_date &lt; SYSDATE\n    AND service_rendered = 0\n    AND paid = 1\n    Group By ch_invoice.invoice_id\"\n\n    report = ActiveRecord::Base.connection.exec_query(sql)\n    render json: report\n  end\n</code></pre>\n\n<p><strong>EDIT 2</strong></p>\n\n<p>Sample JSON.parse code. This is what the query giving me.</p>\n\n<pre><code>{\"min(departure_date)\"=&gt;\"2015-03-01T00:00:00.000Z\", \"invoice_id\"=&gt;\"123catfood\"}\n{\"min(departure_date)\"=&gt;\"2015-01-01T00:00:00.000Z\", \"invoice_id\"=&gt;\"123dogfood\"}\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 6317, "user_id": 395146, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4388597df98b5100a4f8ba2137285e06?s=128&d=identicon&r=PG", "display_name": "code-gijoe", "link": "https://stackoverflow.com/users/395146/code-gijoe"}, "edited": false, "score": 0, "creation_date": 1459974185, "post_id": 36461536, "comment_id": 60535023, "body": "Did not find this easily, I&#39;ll try"}], "tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": true, "score": 2, "last_activity_date": 1459974601, "last_edit_date": 1459974601, "creation_date": 1459974015, "answer_id": 36461536, "question_id": 36461458, "link": "https://stackoverflow.com/questions/36461458/how-can-i-get-the-values-of-hash-using-a-key-array/36461536#36461536", "title": "How can I get the values of hash using a key array?", "body": "<p>You should use <code>Hash#values_at</code>:</p>\n\n<pre><code>hash = {:id=&gt;402, :email=&gt;\"tyson@ledner.name\", :organizations_count=&gt;0, :username=&gt;\"admin\"}\narray = [:id, :email]\nhash.values_at(*array)\n#=&gt; [402, \"tyson@ledner.name\"]\n</code></pre>\n\n<p>Passing array with splat operator (*) as argument in this case is same as just <code>hash.values_at(:id, :email)</code></p>\n"}], "owner": {"reputation": 6317, "user_id": 395146, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/4388597df98b5100a4f8ba2137285e06?s=128&d=identicon&r=PG", "display_name": "code-gijoe", "link": "https://stackoverflow.com/users/395146/code-gijoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 36461536, "answer_count": 1, "score": 0, "last_activity_date": 1459974601, "creation_date": 1459973763, "question_id": 36461458, "link": "https://stackoverflow.com/questions/36461458/how-can-i-get-the-values-of-hash-using-a-key-array", "title": "How can I get the values of hash using a key array?", "body": "<p>I want to get all value of a hash using an array containing the keys?</p>\n\n<p>I have this hash:</p>\n\n<pre><code>{:id=&gt;402, :email=&gt;\"tyson@ledner.name\", :organizations_count=&gt;0, :username=&gt;\"admin\"}\n</code></pre>\n\n<p>I have an array :</p>\n\n<pre><code>[:id, :email]\n</code></pre>\n\n<p>So I want to get an array of</p>\n\n<pre><code>[\"402\", \"tyson@ledner.name\"]\n</code></pre>\n\n<p>Is there a cleaver way to do this? I have a loop but I feel ruby can do this in a \"oneliner\" way but can figure out how to do this.</p>\n"}, {"tags": ["ruby", "capybara", "roo", "rubyxl"], "comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1459974393, "post_id": 36461125, "comment_id": 60535131, "body": "Which line is the error occurring on?  (also, please indent your code so it&#39;s readable)"}, {"owner": {"reputation": 47, "user_id": 5859086, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5f3afc00a67f13fbdab18db6d52d804?s=128&d=identicon&r=PG&f=1", "display_name": "RPD", "link": "https://stackoverflow.com/users/5859086/rpd"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1460037316, "post_id": 36461125, "comment_id": 60566728, "body": "@TomWalpole The error is in the line :16"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1460051931, "post_id": 36461125, "comment_id": 60576993, "body": "So Roo starts counting at 1 while RubyXL starts at 0 - so it should be  <code>worksheet1[j-1][k-1].change_fill(&#39;008000&#39;)</code>.  I assume you&#39;re saving the xslx before checking it for the new fill color? Also, is there a good reason why you&#39;re using both Roo and RubyXL to process the document, seems memory inefficient."}, {"owner": {"reputation": 47, "user_id": 5859086, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5f3afc00a67f13fbdab18db6d52d804?s=128&d=identicon&r=PG&f=1", "display_name": "RPD", "link": "https://stackoverflow.com/users/5859086/rpd"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1460126530, "post_id": 36461125, "comment_id": 60612179, "body": "@TomWalpole I use rubyXL to read/ write in XL and roo to access the worksheet in for loop. Yes I&#39;m saving the excel sheet before i start executing.Also in roo i have direct methods like &#39;first column&#39; and &#39;last column&#39;"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1460134712, "post_id": 36461125, "comment_id": 60617492, "body": "With rubyXL you just call #each on the worksheet/row respectively to iterate through the rows/cells -- there is no need for first_column/last_column.  You may have fully valid reasons for needing to use both libraries and try and keep things synched (adjusting offsets, etc), but this code doesn&#39;t really show it.  I wasn&#39;t asking if you are saving before executing this code, I mean are you saving after changing the fill color, and before you reopen the xslx to see if the color has changed, or are you checking the fill color some other way?"}, {"owner": {"reputation": 47, "user_id": 5859086, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5f3afc00a67f13fbdab18db6d52d804?s=128&d=identicon&r=PG&f=1", "display_name": "RPD", "link": "https://stackoverflow.com/users/5859086/rpd"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1460383760, "post_id": 36461125, "comment_id": 60702859, "body": "@TomWalpole I save the changes . So once the script is executed, i open the excel sheet to check whether the cells color is green"}], "owner": {"reputation": 47, "user_id": 5859086, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5f3afc00a67f13fbdab18db6d52d804?s=128&d=identicon&r=PG&f=1", "display_name": "RPD", "link": "https://stackoverflow.com/users/5859086/rpd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 248, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1460037174, "creation_date": 1459972544, "last_edit_date": 1460037174, "question_id": 36461125, "link": "https://stackoverflow.com/questions/36461125/trying-to-color-the-cells-of-an-excel-sheet-once-data-is-verified-in-ruby-capyba", "title": "Trying to color the cells of an excel sheet once data is verified in ruby-capybara", "body": "<p>Below is my code where i try to find the text from the excel sheet and click that 'text' on the application. Once done I want to color that particular cell(where the text is located ) in green color.</p>\n\n<pre><code> require 'rubyXL'\n require 'roo'\n workbook = Roo::Spreadsheet.open(file_name)\n workbook1 = RubyXL::Parser.parse(file_name) workbook.default_sheet='Left navigation'\n worksheet1 = workbook1['Left navigation']\n for j in (workbook.first_row..workbook.last_row)\n   for k in (workbook.first_column..workbook.last_column)\n     if(k==1)\n        choose(\"lookupSearch\", :option =&gt; \"Plan\")\n        fill_in \"searchInput\", :with =&gt; workbook.cell(j,k)\n        find(:xpath, '//*[@id=\"searchicon\"]').click\n     elsif(workbook.cell(j,k)=='.')\n        puts \"Completed\"\n     else\n        find('a', text: workbook.cell(j,k), :match =&gt; :prefer_exact)\n        worksheet1.sheet_data[j][k].change_fill ('008000')\n     end\n   end\n end\n</code></pre>\n\n<p>Error message is \"undefined method `[]' for nil:NilClass (NoMethodError)\"</p>\n\n<p>Note : When I use worksheet1.sheet_data[j-1][k-1].change_fill ('008000') there is no error .But still green color is not there on the cell. Unable to trace . Please Advice</p>\n"}, {"tags": ["ruby", "file", "text", "copy", "chef-infra"], "answers": [{"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1459984472, "creation_date": 1459984472, "answer_id": 36463962, "question_id": 36460222, "link": "https://stackoverflow.com/questions/36460222/have-two-resources-and-append-one-to-another-in-the-chef-remote-file/36463962#36463962", "title": "Have two resources and append one to another in the Chef remote_file", "body": "<p>This is not something Chef supports directly. You could use multiple <code>remote_file</code> resources and either a <code>ruby_block</code> or <code>execute</code> plus <code>cat</code> to implement the concat.</p>\n"}, {"comments": [{"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1460051540, "post_id": 36481305, "comment_id": 60576760, "body": "It is almost always the wrong idea to use <code>Net::HTTP</code> in Chef code. You should be using <code>Chef::HTTP</code> instead."}, {"owner": {"reputation": 3556, "user_id": 506908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84c874984f69ef596764255efcd79113?s=128&d=identicon&r=PG", "display_name": "lamont", "link": "https://stackoverflow.com/users/506908/lamont"}, "edited": false, "score": 0, "creation_date": 1460145313, "post_id": 36481305, "comment_id": 60623397, "body": "yeah this answer is fairly convoluted.  it&#39;d be better to use two remote_file resources to download into the Chef::Config[:file_cache_path] and rely on chef&#39;s idempotency to not re-download on every run.  then construct a file resource where the content concatenated IO.read to the pathnames the remote_fille resources use."}, {"owner": {"reputation": 321, "user_id": 1420832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ad8c05f304c43f673f3137ee45a9480?s=128&d=identicon&r=PG", "display_name": "Eric Herot", "link": "https://stackoverflow.com/users/1420832/eric-herot"}, "edited": false, "score": 0, "creation_date": 1460330702, "post_id": 36481305, "comment_id": 60677030, "body": "Point taken about it being convoluted (although I&#39;d argue that the request is a fairly specific one), but why is calling <code>IO.read</code> any better than calling <code>Net::HTTP</code> (or <code>Chef::HTTP</code>)?"}], "tags": [], "owner": {"reputation": 321, "user_id": 1420832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ad8c05f304c43f673f3137ee45a9480?s=128&d=identicon&r=PG", "display_name": "Eric Herot", "link": "https://stackoverflow.com/users/1420832/eric-herot"}, "is_accepted": false, "score": 0, "last_activity_date": 1460044328, "creation_date": 1460044328, "answer_id": 36481305, "question_id": 36460222, "link": "https://stackoverflow.com/questions/36460222/have-two-resources-and-append-one-to-another-in-the-chef-remote-file/36481305#36481305", "title": "Have two resources and append one to another in the Chef remote_file", "body": "<p><code>remote_file</code> does not support concatenation, so you would not be able to implement this using that resource directly, however you could piece together the desired result using the <code>file</code> resource and <code>Net::HTTP</code> like so:</p>\n\n<pre><code>file_path = '/path/to/your_whole_file'\n\nunless File.exist?(file_path) &amp;&amp;\n       Digest::SHA256.hexdigest(File.read(file_path)) == 'your_file_checksum'\n  file file_path do\n    content(\n      Net::HTTP.get(URI('http://source.url/content1')) +\n      Net::HTTP.get(URI('http://source.url/content2'))\n    )\n    owner 'root'\n    group 'root'\n    mode '0755'\n  end\nend\n</code></pre>\n\n<p>The reason for the <code>Digest::SHA256</code> call at the beginning is to prevent Chef from trying to download both files during every Chef run. Note that you may have to require the <code>net/http</code> and <code>digest</code> gems at the top of your recipe for this to work.</p>\n\n<p>Also, because it's against best practices to put Ruby code directly into your recipes, you may want to wrap the above code in a simple <a href=\"https://docs.chef.io/custom_resources.html\" rel=\"nofollow\">custom resource</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 3556, "user_id": 506908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84c874984f69ef596764255efcd79113?s=128&d=identicon&r=PG", "display_name": "lamont", "link": "https://stackoverflow.com/users/506908/lamont"}, "is_accepted": false, "score": 1, "last_activity_date": 1460156630, "last_edit_date": 1460156630, "creation_date": 1460145664, "answer_id": 36508360, "question_id": 36460222, "link": "https://stackoverflow.com/questions/36460222/have-two-resources-and-append-one-to-another-in-the-chef-remote-file/36508360#36508360", "title": "Have two resources and append one to another in the Chef remote_file", "body": "<p>Something like this is probably a good place to start and then tweak however you like:</p>\n\n<pre><code>cache1 = \"#{Chef::Config[:file_cache_path]}/content1\"\ncache2 = \"#{Chef::Config[:file_cache_path]}/content2\"\n\n# this will not redownload if cache1 exists and has not been updated\nremote_file cache1 do\n  source \"http://source.url/content1\"\nend\n\n# this will not redownload if cache1 exists and has not been updated\nremote_file cache2 do\n  source \"http://source.url/content2\"\nend\n\n# this will not update the file if the contents has not changed\nfile \"/my/combined/file\" do\n  content lazy { IO.read(cache1) + IO.read(cache2) }\nend\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 2423245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a7e190799c066db2b39ad83de56a1d8?s=128&d=identicon&r=PG", "display_name": "amin", "link": "https://stackoverflow.com/users/2423245/amin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 1, "answer_count": 3, "score": 0, "last_activity_date": 1460156630, "creation_date": 1459969589, "question_id": 36460222, "link": "https://stackoverflow.com/questions/36460222/have-two-resources-and-append-one-to-another-in-the-chef-remote-file", "title": "Have two resources and append one to another in the Chef remote_file", "body": "<p>I would like to copy <em><a href=\"http://seapower/spring.txt\" rel=\"nofollow\">http://seapower/spring.txt</a></em> and <em><a href=\"http://seapower/has_sprung.txt\" rel=\"nofollow\">http://seapower/has_sprung.txt</a></em> and append second one to the first one in a new file named src_filepath.txt:</p>\n\n<pre><code>remote_file 'src_filepath.txt' do\n  source 'http://seapower/spring.txt', 'http://seapower/has_sprung.txt'\n  checksum node['nginx']['foo123']['checksum']\n  owner 'root'\n  group 'root'\n  mode '0755'\nend\n</code></pre>\n\n<p>It doesn't work and just copy the first file to src_filepath.txt</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sidekiq"], "comments": [{"owner": {"reputation": 342, "user_id": 2074840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11346f6761befbc4857bca7eb1eb85a1?s=128&d=identicon&r=PG", "display_name": "michal.samluk", "link": "https://stackoverflow.com/users/2074840/michal-samluk"}, "edited": false, "score": 0, "creation_date": 1459969865, "post_id": 36460095, "comment_id": 60532486, "body": "Are you sure you pasted correct code? It should be <code>def perform(mail_id)</code> not <code>perform(mail_id)</code>."}, {"owner": {"reputation": 2042, "user_id": 1767332, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/06eb9d618be938ae3ab626a3fb7dc35d?s=128&d=identicon&r=PG&f=1", "display_name": "kmaci", "link": "https://stackoverflow.com/users/1767332/kmaci"}, "reply_to_user": {"reputation": 342, "user_id": 2074840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11346f6761befbc4857bca7eb1eb85a1?s=128&d=identicon&r=PG", "display_name": "michal.samluk", "link": "https://stackoverflow.com/users/2074840/michal-samluk"}, "edited": false, "score": 0, "creation_date": 1459970324, "post_id": 36460095, "comment_id": 60532767, "body": "My mistake, corrected. But that&#39;s not the problem."}, {"owner": {"reputation": 342, "user_id": 2074840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11346f6761befbc4857bca7eb1eb85a1?s=128&d=identicon&r=PG", "display_name": "michal.samluk", "link": "https://stackoverflow.com/users/2074840/michal-samluk"}, "edited": false, "score": 0, "creation_date": 1459970365, "post_id": 36460095, "comment_id": 60532791, "body": "Any callbacks in the Mail model?"}, {"owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "edited": false, "score": 0, "creation_date": 1459970560, "post_id": 36460095, "comment_id": 60532910, "body": "This should work, a validation may be preventing the delete. What happens if you use <code>delete</code> instad of <code>destroy</code> (skips callbacks)?"}, {"owner": {"reputation": 2042, "user_id": 1767332, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/06eb9d618be938ae3ab626a3fb7dc35d?s=128&d=identicon&r=PG&f=1", "display_name": "kmaci", "link": "https://stackoverflow.com/users/1767332/kmaci"}, "edited": false, "score": 0, "creation_date": 1459970662, "post_id": 36460095, "comment_id": 60532969, "body": "Still doesn&#39;t work, I tried both (delete, destroy). There is no callback in Mail model."}, {"owner": {"reputation": 342, "user_id": 2074840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11346f6761befbc4857bca7eb1eb85a1?s=128&d=identicon&r=PG", "display_name": "michal.samluk", "link": "https://stackoverflow.com/users/2074840/michal-samluk"}, "edited": false, "score": 0, "creation_date": 1459970690, "post_id": 36460095, "comment_id": 60532991, "body": "What do you have in your sidekiq logs? Try <code>Rails.logger.debug mail.inspect</code> within your perform method, before and after calling <code>destroy</code>.  Let&#39;s see what it shows."}, {"owner": {"reputation": 2042, "user_id": 1767332, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/06eb9d618be938ae3ab626a3fb7dc35d?s=128&d=identicon&r=PG&f=1", "display_name": "kmaci", "link": "https://stackoverflow.com/users/1767332/kmaci"}, "edited": false, "score": 0, "creation_date": 1459971628, "post_id": 36460095, "comment_id": 60533546, "body": "Restarting server helped (don&#39;t know why). It&#39;s finally working."}, {"owner": {"reputation": 438, "user_id": 716185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29912acf4124f78d29de7a0f5adf89d0?s=128&d=identicon&r=PG", "display_name": "amalrik maia", "link": "https://stackoverflow.com/users/716185/amalrik-maia"}, "edited": false, "score": 1, "creation_date": 1459979274, "post_id": 36460095, "comment_id": 60537804, "body": "@kmaci this is expected when working with sidekiq. The code is only re-loaded when you restart the server."}], "owner": {"reputation": 2042, "user_id": 1767332, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/06eb9d618be938ae3ab626a3fb7dc35d?s=128&d=identicon&r=PG&f=1", "display_name": "kmaci", "link": "https://stackoverflow.com/users/1767332/kmaci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459970287, "creation_date": 1459969270, "last_edit_date": 1459970287, "question_id": 36460095, "link": "https://stackoverflow.com/questions/36460095/destroy-entity-in-sidekiq-worker", "title": "Destroy entity in Sidekiq worker", "body": "<p>How can I destroy an entity after some action is performed in Sidekiq's worker?</p>\n\n<p>I have following code which doesn't work (mail is not deleted):</p>\n\n<pre><code>class MailingWorker\n  include Sidekiq::Workerdef\n\n  def perform(mail_id)\n     mail = Mail.find mail_id\n     #some logic for sending email\n     mail.destroy\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "regex", "string"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1459971474, "post_id": 36460060, "comment_id": 60533473, "body": "Not clear. Do you want to check if a string contains at least one number, or contains only numbers?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1459972049, "post_id": 36460060, "comment_id": 60533761, "body": "What about empty strings? Where are these regexes supposed to be used, inside Ruby or inside this mysterious database you mention?"}], "answers": [{"comments": [{"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1459970854, "post_id": 36460346, "comment_id": 60533081, "body": "If you have a set number of digits to grab <code>d{1,5}</code> this will grab all digits with a length of one to five"}, {"owner": {"reputation": 2504, "user_id": 1041509, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nC1WT.png?s=128&g=1", "display_name": "alex.bour", "link": "https://stackoverflow.com/users/1041509/alex-bour"}, "edited": false, "score": 0, "creation_date": 1459972075, "post_id": 36460346, "comment_id": 60533776, "body": "This first response seems to work for all my cases."}, {"owner": {"reputation": 4900, "user_id": 5620297, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/o1FhO.png?s=128&g=1", "display_name": "Kaspar Lee", "link": "https://stackoverflow.com/users/5620297/kaspar-lee"}, "reply_to_user": {"reputation": 2504, "user_id": 1041509, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nC1WT.png?s=128&g=1", "display_name": "alex.bour", "link": "https://stackoverflow.com/users/1041509/alex-bour"}, "edited": false, "score": 1, "creation_date": 1459972166, "post_id": 36460346, "comment_id": 60533832, "body": "@alex.bour The RegEx will match on an empty string, as well as one just containing spaces. <a href=\"https://regex101.com/r/tI6bO0/2\" rel=\"nofollow noreferrer\">See the new demo</a>, <b>it does not work correctly</b>"}, {"owner": {"reputation": 2504, "user_id": 1041509, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nC1WT.png?s=128&g=1", "display_name": "alex.bour", "link": "https://stackoverflow.com/users/1041509/alex-bour"}, "edited": false, "score": 0, "creation_date": 1459972347, "post_id": 36460346, "comment_id": 60533939, "body": "I tested on <a href=\"http://rubular.com/r/uScGTmlrgn\" rel=\"nofollow noreferrer\">Rubular</a> and didn&#39;t match an empty string ?"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 2504, "user_id": 1041509, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nC1WT.png?s=128&g=1", "display_name": "alex.bour", "link": "https://stackoverflow.com/users/1041509/alex-bour"}, "edited": false, "score": 1, "creation_date": 1459973797, "post_id": 36460346, "comment_id": 60534791, "body": "@alex.bour: How do you get Rubular to test against an empty string? A quick <code>&#39;&#39; =~ &#47;^[\\d\\s]*$&#47;</code> in irb will tell you the truth."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1459977028, "post_id": 36460346, "comment_id": 60536722, "body": "The question does not say whether the string may contain newlines. If it can, <code>&quot;100\\ncat&quot; =~ &#47;^[\\d\\s]+$&#47; #=&gt; 0</code>. You should use the start-of-string/end-of-string anchors, rather than the start-of-line/end-of-line anchors: <code>&quot;100\\ncat&quot; =~ &#47;\\A[\\d\\s]+\\z&#47; #=&gt; nil</code>. If the string may contain newlines, but they are to be matched, you can write: <code>&quot;100\\n200&quot; =~ &#47;\\A[\\d\\s\\n]+\\z&#47; #=&gt; 0</code>. If there are no newlines, you can use either set of anchors, but when matching an entire string I would suggest always using <code>\\A</code> and <code>\\z</code>."}], "tags": [], "owner": {"reputation": 2486, "user_id": 5967915, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc1ede82b4d6b5af1148a77d874c5396?s=128&d=identicon&r=PG&f=1", "display_name": "Tim007", "link": "https://stackoverflow.com/users/5967915/tim007"}, "is_accepted": true, "score": 3, "last_activity_date": 1459973957, "last_edit_date": 1459973957, "creation_date": 1459969973, "answer_id": 36460346, "question_id": 36460060, "link": "https://stackoverflow.com/questions/36460060/ruby-check-if-a-string-contains-only-multiple-numeric-values/36460346#36460346", "title": "Ruby: check if a string contains only multiple numeric values", "body": "<p>Try this</p>\n\n<pre><code>^[\\d\\s]+$\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/tI6bO0/1\" rel=\"nofollow\">Regex demo</a></p>\n\n<p>Hope this help.</p>\n"}, {"comments": [{"owner": {"reputation": 4900, "user_id": 5620297, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/o1FhO.png?s=128&g=1", "display_name": "Kaspar Lee", "link": "https://stackoverflow.com/users/5620297/kaspar-lee"}, "reply_to_user": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "edited": false, "score": 0, "creation_date": 1459970541, "post_id": 36460393, "comment_id": 60532900, "body": "@JesseSielaff I know. I tried <code>(?!^\\s+$)^[\\d\\s]+$</code>, but it seems it <a href=\"https://regex101.com/r/kF9vP4/1\" rel=\"nofollow noreferrer\">does not work</a>"}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1459970908, "post_id": 36460393, "comment_id": 60533117, "body": "Actually <code>^</code> means \u201cline starts with\u201d and <code>$</code> means \u201cline ends with\u201d. <code>\\A</code> and <code>\\z</code> are \u201cstart/end of string\u201d."}, {"owner": {"reputation": 4900, "user_id": 5620297, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/o1FhO.png?s=128&g=1", "display_name": "Kaspar Lee", "link": "https://stackoverflow.com/users/5620297/kaspar-lee"}, "edited": false, "score": 0, "creation_date": 1459971047, "post_id": 36460393, "comment_id": 60533200, "body": "I am aware, however on the demo I used the multi-line (<code>m</code>) flag, so I could test with multiple stings, one on each line. By changing it to <code>\\A</code> and <code>\\z</code> it does not change"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1459971686, "post_id": 36460393, "comment_id": 60533578, "body": "But your demo is using PHP&#39;s regexes, not Ruby&#39;s or whatever the OP&#39;s database uses."}, {"owner": {"reputation": 4900, "user_id": 5620297, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/o1FhO.png?s=128&g=1", "display_name": "Kaspar Lee", "link": "https://stackoverflow.com/users/5620297/kaspar-lee"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1459971865, "post_id": 36460393, "comment_id": 60533674, "body": "@muistooshort Don&#39;t worry. I work it out. <code>\\s</code> also matched newlines, which meant that the <code>^</code> and <code>$</code> did nothing, and the whole thing was one big match"}, {"owner": {"reputation": 4900, "user_id": 5620297, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/o1FhO.png?s=128&g=1", "display_name": "Kaspar Lee", "link": "https://stackoverflow.com/users/5620297/kaspar-lee"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1459972232, "post_id": 36460393, "comment_id": 60533873, "body": "@muistooshort And the tool doesn&#39;t have an option for Ruby RegEx. It is just to quickly demonstate"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1459973879, "post_id": 36460393, "comment_id": 60534843, "body": "How can you demonstrate a Ruby regex using a tool that doesn&#39;t support Ruby regexes?"}, {"owner": {"reputation": 4900, "user_id": 5620297, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/o1FhO.png?s=128&g=1", "display_name": "Kaspar Lee", "link": "https://stackoverflow.com/users/5620297/kaspar-lee"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1460013604, "post_id": 36460393, "comment_id": 60549426, "body": "@muistooshort I see what you are saying, but most flavors of RegEx are very similar. The RegEx will work it Ruby, and also works in this tool. I put a link because it also has a more detailed explanation of how it works, and highlights the matches. It is better than having no demonstration at all."}], "tags": [], "owner": {"reputation": 4900, "user_id": 5620297, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/o1FhO.png?s=128&g=1", "display_name": "Kaspar Lee", "link": "https://stackoverflow.com/users/5620297/kaspar-lee"}, "is_accepted": false, "score": 2, "last_activity_date": 1461319018, "last_edit_date": 1461319018, "creation_date": 1459970121, "answer_id": 36460393, "question_id": 36460060, "link": "https://stackoverflow.com/questions/36460060/ruby-check-if-a-string-contains-only-multiple-numeric-values/36460393#36460393", "title": "Ruby: check if a string contains only multiple numeric values", "body": "<p>Use this RegEx:</p>\n\n<pre><code>^[\\d\\s]+$\n</code></pre>\n\n<p><kbd><a href=\"https://regex101.com/r/pT9vC2/1\" rel=\"nofollow\"><strong>Live Demo on Regex101</strong></a></kbd></p>\n\n<hr>\n\n<p>How it works:</p>\n\n<pre><code>^          # String starts with ...\n[\\d\\s]     # Digit of Whitespace\n+          # Repeated 1 or more times\n$          # ... String ends with\n</code></pre>\n\n<p>The reason I did not use <code>[\\d\\s]*</code> is because this would match an empty string</p>\n\n<hr>\n\n<p>The above version will match a string full of spaces. You can use this <strong>safer version</strong> to stop that from happening:</p>\n\n<pre><code>(?!^\\s+$)^[\\d\\s]+$\n</code></pre>\n\n<p>This uses a <strong>Negative Lookahead</strong> (<code>(?!)</code>) to check if the string contains only spaces (<code></code>), and the match will fail if it does.</p>\n\n<p><kbd><a href=\"https://regex101.com/r/pT9vC2/1\" rel=\"nofollow\"><strong>Live Demo on Regex101</strong></a></kbd></p>\n"}, {"tags": [], "owner": {"reputation": 44, "user_id": 5386356, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/08uCu.jpg?s=128&g=1", "display_name": "matt721", "link": "https://stackoverflow.com/users/5386356/matt721"}, "is_accepted": false, "score": 1, "last_activity_date": 1459971002, "creation_date": 1459971002, "answer_id": 36460658, "question_id": 36460060, "link": "https://stackoverflow.com/questions/36460060/ruby-check-if-a-string-contains-only-multiple-numeric-values/36460658#36460658", "title": "Ruby: check if a string contains only multiple numeric values", "body": "<p>Be careful with the response that uses [...]* as that will match on nothing.. '*' means 0 or more. <a href=\"http://rubular.com/\" rel=\"nofollow\">Rubular</a> is an outstanding way to test your ruby regexes.</p>\n\n<p>Regexes are great and the one with [...]+ looks good to me. But if you are interested in a non-regex ruby way to do this:</p>\n\n<pre><code>def bad_things\n  [*0..9].map(&amp;:to_s) &lt;&lt; \" \"\nend\n\ndef bad_word?(word)\n  word.chars.all? { |char| bad_things.include?(char) }\nend\n</code></pre>\n\n<p>The first method is just creating an array with \"0\" through \"9\" and a space.</p>\n"}, {"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 2, "last_activity_date": 1459973415, "last_edit_date": 1459973415, "creation_date": 1459972108, "answer_id": 36461003, "question_id": 36460060, "link": "https://stackoverflow.com/questions/36460060/ruby-check-if-a-string-contains-only-multiple-numeric-values/36461003#36461003", "title": "Ruby: check if a string contains only multiple numeric values", "body": "<p>No need to use regex. Use regular string methods:</p>\n\n<pre><code>def should_delete?(string)\n  string.delete('0123456789 ').empty?\nend\n\nshould_delete? \" 3 4  567 \"        # =&gt; true\nshould_delete? \"2 &amp; 3 cheese cake\" # =&gt; false\n</code></pre>\n\n<p>If you want to enforce at least one digit present (which doesn't seem to be the case based on the accepted answer), you can just constraint the original string to not be whitespace only:</p>\n\n<pre><code>def should_delete?(string)\n  string.delete('0123456789 ').empty? and not string.strip.empty?\nend\n</code></pre>\n"}], "owner": {"reputation": 2504, "user_id": 1041509, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nC1WT.png?s=128&g=1", "display_name": "alex.bour", "link": "https://stackoverflow.com/users/1041509/alex-bour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 569, "favorite_count": 0, "closed_date": 1459998989, "accepted_answer_id": 36460346, "answer_count": 4, "score": 0, "last_activity_date": 1461319018, "creation_date": 1459969196, "last_edit_date": 1460393323, "question_id": 36460060, "link": "https://stackoverflow.com/questions/36460060/ruby-check-if-a-string-contains-only-multiple-numeric-values", "closed_reason": "Needs details or clarity", "title": "Ruby: check if a string contains only multiple numeric values", "body": "<p>I need to test if a string contains at least one numeric value.\nI need to create a regex with <code>\\d</code> and other tests.</p>\n\n<p>For example:</p>\n\n<pre><code>\"1\"\n\"2 3\"\n\" 3 4  567 \"\n</code></pre>\n\n<p>need to be removed from my database.\nbut not:</p>\n\n<pre><code>\"1 apple pie\"\n\"2 &amp; 3 cheese cake\" \n</code></pre>\n\n<p>I want to remove records that contains ONLY numbers and spaces.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "actionmailer", "ruby-on-rails-4.1", "ruby-2.1.5"], "comments": [{"owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "edited": false, "score": 0, "creation_date": 1459971630, "post_id": 36459826, "comment_id": 60533547, "body": "Can you get query_trace to output a full stacktrace somehow?"}, {"owner": {"reputation": 2322, "user_id": 4443615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fynBi.jpg?s=128&g=1", "display_name": "Lucas Nelson", "link": "https://stackoverflow.com/users/4443615/lucas-nelson"}, "edited": false, "score": 0, "creation_date": 1459986013, "post_id": 36459826, "comment_id": 60540067, "body": "Please add the content of <code>monitor_mailer&#47;email_importer_errors_found.html.erb</code> to your question and any email layouts and any partials rendered. (trim the static text if you like, interested in the ERB &lt;% %&gt; stuff)"}, {"owner": {"reputation": 65, "user_id": 857064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0affe694761ee518584b026f19e9a55?s=128&d=identicon&r=PG", "display_name": "scottr", "link": "https://stackoverflow.com/users/857064/scottr"}, "edited": false, "score": 0, "creation_date": 1460037776, "post_id": 36459826, "comment_id": 60567141, "body": "After looking at the stacktrace a little deeper (as suggested by shelvacu), it looks like it is an error with the way the Mailkick gem is working.  I have entered an issue on github for it (<a href=\"https://github.com/ankane/mailkick/issues/19\" rel=\"nofollow noreferrer\">github.com/ankane/mailkick/issues/19</a>) and working with the developer to fix it."}], "owner": {"reputation": 65, "user_id": 857064, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0affe694761ee518584b026f19e9a55?s=128&d=identicon&r=PG", "display_name": "scottr", "link": "https://stackoverflow.com/users/857064/scottr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1459968432, "creation_date": 1459968432, "question_id": 36459826, "link": "https://stackoverflow.com/questions/36459826/actionmailer-user-object-injection", "title": "ActionMailer User object injection", "body": "<p>This is frustrating me. For some reason, whenever we are sending an email, ActionMailer insists on checking the User model for a user with that email address.</p>\n\n<p>We have the method defined like this:</p>\n\n<pre><code>class MonitorMailer &lt; ActionMailer::Base\n  default :from =&gt; \"validemail@ourplace.org\"\n  def email_importer_errors_found\n    mail(to: \"validto@ourplace.org\", subject: \"Errors found in import error folder \")\n  end\nend\n</code></pre>\n\n<p>When we call the method, we are getting the following (note Query Trace is from the Active Record Query Trace gem (<a href=\"https://github.com/ruckus/active-record-query-trace\" rel=\"nofollow\">https://github.com/ruckus/active-record-query-trace</a>):</p>\n\n<pre><code>Rendered monitor_mailer/email_importer_errors_found.html.erb (0.2ms)\nUser Load (2.4ms)  SELECT  `users`.* FROM `users`  WHERE `users`.`email` = 'validto@ourplace.org'  ORDER BY `users`.`id` ASC LIMIT 1\nQuery Trace &gt; app/mailers/monitor_mailer.rb:28:in `email_importer_errors_found'\nMysql2::Error: Unknown column 'users.email' in 'where clause': SELECT  `users`.* FROM `users`  WHERE `users`.`email` = 'validto@ourplace.org'  ORDER BY `users`.`id` ASC LIMIT 1\n\nMonitorMailer#email_importer_errors_found: processed outbound mail in 167.3ms\n =&gt; #&lt;Mail::Message:108716380, Multipart: false, Headers: &lt;Date: Wed, 06 Apr 2016 13:56:55 -0400&gt;, ...\n</code></pre>\n\n<p>Why is the ActionMailer trying to look up the User in the Users table? We are using LDAP auth via Devise and our gemfile is:\n    source '<a href=\"http://rubygems.org\" rel=\"nofollow\">http://rubygems.org</a>'</p>\n\n<pre><code>gem 'rails', '4.1.15'\ngem \"mysql2\", '0.3.15'\ngem 'protected_attributes', '~&gt; 1.0.8'\n\ngem 'devise', '~&gt; 3.4.1'\ngem 'net-ldap', '~&gt; 0.3.1'\ngem 'devise_ldap_authenticatable', '0.8.4'\n\ngem 'ruby-oci8', '~&gt; 2.2.1'\ngem 'nokogiri', '~&gt; 1.6', '&gt;= 1.6.7.1'\ngem \"net-sftp\"\ngem 'sshkit', '1.8.1'\n\ngem 'prawn'\ngem \"prawnto_2\", :require =&gt; \"prawnto\"\ngem 'prawn-labels'\ngem 'prawn-table'\n\ngem 'whenever', \"0.9.4\", :require =&gt; false\ngem 'delayed_job', '4.0.1'\ngem 'delayed_job_active_record', '4.0.1'\n\ngem 'mailboxer', \"~&gt; 0.13.0\"\ngem 'mailkick', '~&gt; 0.1.3'\n\ngem \"daemons\", '~&gt; 1.1.9'\n\ngem 'hairtrigger', '0.2.17'\n\ngroup :development do\n  gem 'capistrano', '~&gt; 3.1.0'\n  gem 'capistrano-bundler', '~&gt; 1.1.2'\n  gem 'capistrano-rvm', '~&gt; 0.1.2'\n  gem 'capistrano-rails', '~&gt; 1.1'\n  gem 'capistrano3-delayed-job', '~&gt; 1.0'\n  gem 'brakeman'\n  gem 'quiet_assets'\n  gem 'rack-insight'\n  gem 'active_record_query_trace'\nend\n\ngroup :development, :test do\n  gem 'rspec-rails', '2.14.0'\nend\n\ngem 'paper_trail', '~&gt; 3.0.2'\ngem 'settingslogic'\n\ngem 'cancancan', '1.12.0'\n\ngem 'attr_encrypted', '1.3.5'\n\ngem 'jquery-rails', '~&gt; 3.1.0'\ngem 'jquery-ui-rails'\n\ngem 'sass-rails', '~&gt; 4.0.0'\n\ngem 'uglifier', '&gt;= 1.3.0'\n\ngem 'coffee-rails', '~&gt; 4.0.0'\n</code></pre>\n\n<p>What am I missing here that is causing it to fire that query? I am thinking Devise is trying to be smart here, but I can't figure out where it is injecting itself.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "edited": false, "score": 1, "creation_date": 1459967980, "post_id": 36459621, "comment_id": 60531302, "body": "you don&#39;t actually have to do anything. by default the field is going to be optional unless you have a validation for presence."}, {"owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "edited": false, "score": 0, "creation_date": 1459968845, "post_id": 36459621, "comment_id": 60531812, "body": "Can you look in <code>db&#47;schema.rb</code> and post the lines relevant to <code>free_shipping_amount</code>?"}, {"owner": {"reputation": 819, "user_id": 2499227, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NpTc3.jpg?s=128&g=1", "display_name": "MTarantini", "link": "https://stackoverflow.com/users/2499227/mtarantini"}, "edited": false, "score": 0, "creation_date": 1459969256, "post_id": 36459621, "comment_id": 60532089, "body": "What exactly is the issue/error that you&#39;re facing? You say that you don&#39;t want this field to display as 0. Can you show us the code that is displaying it as 0? An integer column CAN be nil, and it is possible that it IS nil, but is being displayed as 0."}, {"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1459969811, "post_id": 36459621, "comment_id": 60532442, "body": "I updated the question to try and answer everyone&#39;s questions. The record won&#39;t save.. When I pass in a value to that field it saves fine.."}, {"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1459971769, "post_id": 36459621, "comment_id": 60533626, "body": "I updated again.. I have this in the model: validates :free_shipping_amount, numericality: true but I need that to be there.. what to do?"}], "answers": [{"tags": [], "owner": {"reputation": 151, "user_id": 4862498, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-a8Oo0FgYRjA/AAAAAAAAAAI/AAAAAAAANoM/72UmdYds5Cg/photo.jpg?sz=128", "display_name": "Stevan O.", "link": "https://stackoverflow.com/users/4862498/stevan-o"}, "is_accepted": false, "score": 1, "last_activity_date": 1459972210, "last_edit_date": 1459972210, "creation_date": 1459971782, "answer_id": 36460915, "question_id": 36459621, "link": "https://stackoverflow.com/questions/36459621/make-db-column-optional-or-not-required-so-i-can-create-record/36460915#36460915", "title": "Make db column optional or not required so I can create record", "body": "<p>@ToddT I did this migration</p>\n\n<pre><code>class AddFieldToShippingMethods &lt; ActiveRecord::Migration\n  def change\n    add_column :shipping_methods, :free_shippping_amount2, :integer\n  end\nend\n</code></pre>\n\n<p>and this <a href=\"https://secret-springs-85211.herokuapp.com/\" rel=\"nofollow\">demo</a></p>\n\n<p>It's not mandatory set default values on your migrations </p>\n\n<p>[]'s</p>\n"}, {"tags": [], "owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "is_accepted": true, "score": 0, "last_activity_date": 1459972083, "last_edit_date": 1495540937, "creation_date": 1459972083, "answer_id": 36460999, "question_id": 36459621, "link": "https://stackoverflow.com/questions/36459621/make-db-column-optional-or-not-required-so-i-can-create-record/36460999#36460999", "title": "Make db column optional or not required so I can create record", "body": "<p>Arghhhhhhh.. I just found it <a href=\"https://stackoverflow.com/questions/7981351/rails-validation-required-numericality-even-though-presence-is-not-set-to-true\">here</a> It was my model that was jacked.. I have to add this to the validation in order to accept a blank value.</p>\n\n<pre><code>validates :free_shipping_amount, numericality: {allow_blank: true}\n</code></pre>\n\n<p>Thanks for everyone's time and pointing me in the right direction!</p>\n"}], "owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2039, "favorite_count": 0, "accepted_answer_id": 36460999, "answer_count": 2, "score": 3, "last_activity_date": 1459972210, "creation_date": 1459967747, "last_edit_date": 1459971740, "question_id": 36459621, "link": "https://stackoverflow.com/questions/36459621/make-db-column-optional-or-not-required-so-i-can-create-record", "title": "Make db column optional or not required so I can create record", "body": "<p>I have a column on a table that may or may not get populated when a new record is created. Let's call it <code>free_shipping_amount</code> and its type <code>integer</code>, and it resides in the <code>shipping_methods</code> table.</p>\n\n<p>I also have a form that is backed by this <code>ShippingMethods</code> model. So I don't want this field to display as <code>0</code> because its not zero, its just nothing.</p>\n\n<p>How can I make this column either optional, or not required or something other than zero, or an empty string, because its an integer. Seemingly <code>nil</code> and <code>null</code> won't work.</p>\n\n<p>I've tried the following migrations, and they all didn't work:</p>\n\n<pre><code>change_column :shipping_methods, :free_shipping_amount, :integer, \ndefault: \"\"\n\nchange_column_null :shipping_methods, :free_shipping_amount, true\n\nchange_column :shipping_methods, :free_shipping_amount, :integer,    \n:default =&gt; nil\n\nchange_column_default(:shipping_methods, :free_shipping_amount, nil)\n\nchange_column :shipping_methods, :free_shipping_amount, :integer, null: true\n</code></pre>\n\n<p>Then I tried this, but then my model backed form displays the <code>0</code> which is not something I want..</p>\n\n<pre><code>change_column_default(:shipping_methods, :free_shipping_amount, 0)\n</code></pre>\n\n<p>The field on this table looks like this:</p>\n\n<pre><code>t.integer  \"free_shipping_amount\"\n</code></pre>\n\n<p>The problem is that I can't save a record to this table without passing something to this field.</p>\n\n<p>I use strong parameters that look like this:</p>\n\n<pre><code>def shipping_method_params\n  params.require(:shipping_method).permit(:free_shipping_amount) \n  #other values removed for brevity\nend\n</code></pre>\n\n<p>and when I create like this:</p>\n\n<pre><code>@shipping_shop = ShippingMethod.create(shipping_method_params)\n</code></pre>\n\n<p>The record is not created, and the transaction is rolled back.</p>\n\n<p>Oh geez.. I have this in the model.</p>\n\n<pre><code>validates :free_shipping_amount, numericality: true\n</code></pre>\n\n<p>So how can I save this model without passing in a value for this field?? Or can I and still validate numericality?</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1459983307, "post_id": 36459561, "comment_id": 60539260, "body": "What code did you use when trying to make a label? Make sure the <code>for</code> attribute is correctly populated."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1460010530, "post_id": 36459561, "comment_id": 60547601, "body": "And you might want to adjust the <code>&lt;label&gt;</code>&#39;s <code>display</code> to make it fill the whole table cell."}], "owner": {"reputation": 1250, "user_id": 5679985, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/146c3943e20149fbc04a050430f9c99f?s=128&d=identicon&r=PG&f=1", "display_name": "Human Cyborg Relations", "link": "https://stackoverflow.com/users/5679985/human-cyborg-relations"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459967600, "creation_date": 1459967600, "question_id": 36459561, "link": "https://stackoverflow.com/questions/36459561/making-area-around-radio-buttons-clickable-in-rails", "title": "Making area around radio buttons clickable in rails", "body": "<p>I've got a table of radio buttons. I'm trying to make it so that when I click the area around the radio button, the radio button should be selected.</p>\n\n<pre><code>            &lt;% (1..6).each do |i| %&gt;\n                &lt;td style=\"width: 8%\"&gt;\n                    &lt;%= radio_button_tag(question.id, i, false, required: true) %&gt;\n                &lt;/td&gt;\n            &lt;% end %&gt;\n</code></pre>\n\n<p>I've tried wrapping the radio button inside a label, but it just doesn't seem to work.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1459965554, "post_id": 36458823, "comment_id": 60529842, "body": "Does each feed need special handling? If so, it&#39;s not always a bad idea to break out that into different classes and use dependency injection to mix them in."}, {"owner": {"reputation": 653, "user_id": 4230699, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/0VBXh.gif?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/4230699/jonathan"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1459965632, "post_id": 36458823, "comment_id": 60529892, "body": "Most feeds have the same properties and the same JSON response"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1459966588, "post_id": 36458823, "comment_id": 60530458, "body": "Maybe some kind of mapping table is required where you match feed to handler with a safe default for them."}], "answers": [{"tags": [], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "is_accepted": true, "score": 0, "last_activity_date": 1460141698, "creation_date": 1460141698, "answer_id": 36507207, "question_id": 36458823, "link": "https://stackoverflow.com/questions/36458823/use-variable-in-a-rails-model/36507207#36507207", "title": "Use variable in a rails model", "body": "<blockquote>\n  <p>I don't want to start adding individual classes for each feed I want to call.</p>\n</blockquote>\n\n<p>I think you mean individual <strong><em>methods</em></strong>.</p>\n\n<p>You could pass in the URL, but I gather that you don't want to pass <code>/tVv8nTahbhgkyIUW8ByCe0-7/last_ready_run/data?&amp;format=json</code> as a param, with good reason.</p>\n\n<p>You mentioned mapping, so I *think* what you want is a class constant:</p>\n\n<pre><code>class Feed &lt; ActiveRecord::Base\n  FEEDS = { ready_run:'/tVv8nTahbhgkyIUW8ByCe0-7/last_ready_run/data?&amp;format=json',\n           other_feed:'....',\n           ... }\n\n  def boom_for feed\n    response = self.class.get(FEEDS[feed])\n    @elements = response.parsed_response[\"image\"]\n    @parsed = @elements.collect { |e| e['url'] }\n  end\n</code></pre>\n\n<p>To use it,</p>\n\n<pre><code>boom_for :ready_run\n</code></pre>\n\n<blockquote>\n  <p>I'm trying to make a class within my model call the corresponding URL to each feed entry.</p>\n</blockquote>\n\n<p>I think you mean make a <strong><em>method</em></strong>.</p>\n"}], "owner": {"reputation": 653, "user_id": 4230699, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/0VBXh.gif?s=128&g=1", "display_name": "Jonathan", "link": "https://stackoverflow.com/users/4230699/jonathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 1, "accepted_answer_id": 36507207, "answer_count": 1, "score": 1, "last_activity_date": 1460141698, "creation_date": 1459965441, "last_edit_date": 1459965573, "question_id": 36458823, "link": "https://stackoverflow.com/questions/36458823/use-variable-in-a-rails-model", "title": "Use variable in a rails model", "body": "<p>I'm looking to make a dynamic class within my model, a simple explanation of what I'm wanting is below. </p>\n\n<p>I have a model called 'feed' which has a 'url' field within each entry, I'm trying to make a class within my model call the corresponding URL to each feed entry.</p>\n\n<blockquote>\n  <p>e.g. The feed entry 'lolcats' would call the url 'www.lolcats.com'\n  within the class</p>\n</blockquote>\n\n<p>Below is the current class I have within the feed.rb model</p>\n\n<pre><code>  def boom\n    response = self.class.get(\"/tVv8nTahbhgkyIUW8ByCe0-7/last_ready_run/data?&amp;format=json\")\n    @elements = response.parsed_response[\"image\"]\n    @parsed = @elements.collect { |e| e['url'] }\n  end\n</code></pre>\n\n<p>It works perfectly and displays all the data but obviously very static and clunky - as I don't want to start adding individual classes for each feed I want to call.</p>\n\n<p>On my view I have</p>\n\n<pre><code>&lt;% @boom.each do |img| %&gt;\n  &lt;div class=\"grid-item\"&gt;\n    &lt;%= image_tag(img) %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I just don't have a clue how to do it, any help would be brilliant! </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "directory", "mvp"], "answers": [{"comments": [{"owner": {"reputation": 17599, "user_id": 552822, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0ec7a11a127dd10d98e1a9a64fb86f1f?s=128&d=identicon&r=PG", "display_name": "Jonah", "link": "https://stackoverflow.com/users/552822/jonah"}, "edited": false, "score": 1, "creation_date": 1459966418, "post_id": 36458862, "comment_id": 60530345, "body": "As an example, I&#39;ll use presenters to make sure a view can&#39;t perform an n+1 query traversing a model&#39;s relationships. When a view can only access a presenter that&#39;s a great place to make sure required related models are loaded via a single query or to prevent the view from being able to trigger active record queries entirely."}], "tags": [], "owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "is_accepted": true, "score": 7, "last_activity_date": 1459965892, "last_edit_date": 1592644375, "creation_date": 1459965581, "answer_id": 36458862, "question_id": 36458688, "link": "https://stackoverflow.com/questions/36458688/what-is-the-rails-presenters-folder-for/36458862#36458862", "title": "What is the Rails Presenters folder for?", "body": "<p><code>presenters</code> is a design pattern commonly reffered to as Model View Presenter(MVP)</p>\n<p>This is a derivation of the Model View Controller pattern and is used for creating user interfaces.</p>\n<p>It's useful for the Separation of Concerns for making code more DRY.</p>\n<p>Here's how Wikipedia describes it</p>\n<blockquote>\n<p><strong>model</strong> - interface defining the data to be displayed or otherwise acted upon in the user interface.</p>\n<p><strong>presenter</strong> - acts upon the model and the view. It retrieves data from repositories (the model), and formats it for display in the view.</p>\n<p><strong>view</strong> - a passive interface that displays data (the model) and routes user commands (events) to the presenter to act upon that data.</p>\n</blockquote>\n<p><a href=\"https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93presenter\" rel=\"noreferrer\">https://en.wikipedia.org/wiki/Model%E2%80%93view%E2%80%93presenter</a></p>\n<p><strong>Presenters in Ruby on Rails</strong></p>\n<p>Presenters are simple classes that sit between the model and the view and provide provide a nice, DRY object oriented way of working with complex display logic.</p>\n<p>In Rails, the convention is for them to be located in the <code>app/presenters</code> folder</p>\n<p>Here is a userful article that explains the pattern and its use in Ruby on Rails.</p>\n<p><a href=\"https://kpumuk.info/ruby-on-rails/simplifying-your-ruby-on-rails-code/\" rel=\"noreferrer\">https://kpumuk.info/ruby-on-rails/simplifying-your-ruby-on-rails-code/</a></p>\n"}, {"comments": [{"owner": {"reputation": 2662, "user_id": 3396860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/defKI.jpg?s=128&g=1", "display_name": "Stefan Collier", "link": "https://stackoverflow.com/users/3396860/stefan-collier"}, "edited": false, "score": 0, "creation_date": 1571304467, "post_id": 36459364, "comment_id": 103199380, "body": "The link 404&#39;ed \ud83d\ude1e"}, {"owner": {"reputation": 1434, "user_id": 664675, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f463b697306d3bd0d4d7dc6dd562b7c1?s=128&d=identicon&r=PG", "display_name": "rii", "link": "https://stackoverflow.com/users/664675/rii"}, "reply_to_user": {"reputation": 2662, "user_id": 3396860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/defKI.jpg?s=128&g=1", "display_name": "Stefan Collier", "link": "https://stackoverflow.com/users/3396860/stefan-collier"}, "edited": false, "score": 1, "creation_date": 1571340563, "post_id": 36459364, "comment_id": 103218734, "body": "Yep, so it seems. Here is a new one that references that older one <a href=\"https://awead.github.io/2016/03/08/presenters/\" rel=\"nofollow noreferrer\">awead.github.io/2016/03/08/presenters</a>"}], "tags": [], "owner": {"reputation": 1434, "user_id": 664675, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f463b697306d3bd0d4d7dc6dd562b7c1?s=128&d=identicon&r=PG", "display_name": "rii", "link": "https://stackoverflow.com/users/664675/rii"}, "is_accepted": false, "score": 5, "last_activity_date": 1572033287, "last_edit_date": 1572033287, "creation_date": 1459967044, "answer_id": 36459364, "question_id": 36458688, "link": "https://stackoverflow.com/questions/36458688/what-is-the-rails-presenters-folder-for/36459364#36459364", "title": "What is the Rails Presenters folder for?", "body": "<p>The Presenters folder is where your Presenter code would go... I know, obvious, I'll explain... The way I think of Presenters and Decorators is as an abstraction of a Model in order to massage the data attributes before they are given to the view. If you are familiar with helpers, well, Presenters are kind of like helpers in the sense that they are getting some data ready for the view, except helpers usually serve as utility methods for said views, while presenters are more about presenting the actual attributes.</p>\n\n<p>This link explains the difference very well: <a href=\"https://awead.github.io/2016/03/08/presenters/\" rel=\"nofollow noreferrer\">https://awead.github.io/2016/03/08/presenters/</a></p>\n\n<p>hope that helps.</p>\n"}, {"tags": [], "owner": {"reputation": 24560, "user_id": 4880924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d40e83be235d4f70428da0d42e12d427?s=128&d=identicon&r=PG&f=1", "display_name": "BKSpurgeon", "link": "https://stackoverflow.com/users/4880924/bkspurgeon"}, "is_accepted": false, "score": 1, "last_activity_date": 1569280488, "last_edit_date": 1569280488, "creation_date": 1569279251, "answer_id": 58071100, "question_id": 36458688, "link": "https://stackoverflow.com/questions/36458688/what-is-the-rails-presenters-folder-for/58071100#58071100", "title": "What is the Rails Presenters folder for?", "body": "<h3>Presenters de-clutter your views</h3>\n\n<p>When people mention presenters in a rails context (as opposed to discussions of Model-View-Presenter, MVC, MVVM discussions etc) they are referring to a situation where things look really complex in your views: there are plenty of <code>if</code> statements everywhere, and it's difficult to read through it all. </p>\n\n<p>Or to adopt an everyday analogy: imagine you have a really messy house, with stuff piled up everywhere - so that it's difficult to walk through. You can think of a presenter as a large garage where you can neatly organise everything. This makes it much easier to walk through your house, and you still have all the utensils that you need.</p>\n\n<p>Getting back to the rails context: Presenters allow you to remove all that complex logic somewhere else: into the Presenter's folder, so that when you read your views, it will be a lot easier to understand from a higher level. The clutter isn't there, the complexity isn't there: that has been transferred somewhere else. If you want more detail, you will have to go to the relevant folder. The logic need not be contained in a folder called \"Presenters\" but it can be put there by convention. </p>\n"}], "owner": {"reputation": 4397, "user_id": 1945948, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ecf1cdd8eed500e1e1df86d036b69a7?s=128&d=identicon&r=PG&f=1", "display_name": "atw", "link": "https://stackoverflow.com/users/1945948/atw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7161, "favorite_count": 1, "accepted_answer_id": 36458862, "answer_count": 3, "score": 9, "last_activity_date": 1572033287, "creation_date": 1459965104, "last_edit_date": 1551381625, "question_id": 36458688, "link": "https://stackoverflow.com/questions/36458688/what-is-the-rails-presenters-folder-for", "title": "What is the Rails Presenters folder for?", "body": "<p>What is the Rails Presenters folder for? What goes in this folder? Why is this folder needed?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise"], "answers": [{"comments": [{"owner": {"reputation": 141, "user_id": 6010826, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f368bf6a1c64f908dd40905661b0809f?s=128&d=identicon&r=PG&f=1", "display_name": "Giancarlos", "link": "https://stackoverflow.com/users/6010826/giancarlos"}, "edited": false, "score": 0, "creation_date": 1460042050, "post_id": 36462452, "comment_id": 60570638, "body": "thx dude its work, but why the &quot;devise errors&quot; are only shown in &quot;edit.html.haml (account_path) view&quot; ? when i try to update the password with errors(for example the new password and confirmation new password are diferent) it redirect me to &quot;account_path&quot; with the errors in this view."}], "tags": [], "owner": {"reputation": 6846, "user_id": 1753596, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/r9f3k.jpg?s=128&g=1", "display_name": "trh", "link": "https://stackoverflow.com/users/1753596/trh"}, "is_accepted": false, "score": 1, "last_activity_date": 1459977167, "creation_date": 1459977167, "answer_id": 36462452, "question_id": 36458535, "link": "https://stackoverflow.com/questions/36458535/how-to-redirect-to-the-same-url-in-after-update-path-for-with-devise-ruby-on-r/36462452#36462452", "title": "How to redirect to the same url in &#39;after_update_path_for&#39; with devise ruby on rails", "body": "<p>You've got it almost right.  So those path helpers for devise, <code>after_sign_up_path</code>, <code>after_sign_in_path</code>, <code>after_update_path</code> are expecting a URL, specifically, just a string.</p>\n\n<p>For others hitting this page: The keys to making after update work are:</p>\n\n<ol>\n<li>Create a registrations controller to override the after_update_path method (see the docs on how to do this: <a href=\"https://github.com/plataformatec/devise#configuring-controllers\" rel=\"nofollow\">https://github.com/plataformatec/devise#configuring-controllers</a></li>\n<li>Add the method <code>after_update_path</code> in the <code>protected</code> section of your custom registration controller</li>\n<li>Add the path, as a string or stored string as the only outputted element in that method</li>\n</ol>\n\n<p>An example if you want to redirect back to the page you came from:</p>\n\n<pre><code>class RegistrationsController &lt; Devise::RegistrationsController\n # ...\n protected\n def after_update_path_for(resource)\n      request.referrer || edit_user_registration_path\n end\nend\n</code></pre>\n\n<p>So if the user was on edit_password_path, it takes them back there.  However, if a security conscience user has antivirus or no-follow software that removes referrers from their browser, then your back-up is to take the user to the full registration path.</p>\n"}], "owner": {"reputation": 141, "user_id": 6010826, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/f368bf6a1c64f908dd40905661b0809f?s=128&d=identicon&r=PG&f=1", "display_name": "Giancarlos", "link": "https://stackoverflow.com/users/6010826/giancarlos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 491, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1459977167, "creation_date": 1459964679, "last_edit_date": 1459965719, "question_id": 36458535, "link": "https://stackoverflow.com/questions/36458535/how-to-redirect-to-the-same-url-in-after-update-path-for-with-devise-ruby-on-r", "title": "How to redirect to the same url in &#39;after_update_path_for&#39; with devise ruby on rails", "body": "<p>I want to redirect to the same page after updating the password.\nI have two views:</p>\n\n<ul>\n<li><p><code>edit.html.haml</code> (account_path)</p></li>\n<li><p><code>edit_password.html.haml</code> (account_change_password_path)</p></li>\n</ul>\n\n<p>When I update the account(edit or edit_password), it redirects me to root page (I want to re-direct to the same page).</p>\n\n<p>When I try to change the password (with errors) in edit_password view  it shows me the devise errors in \"edit view\" (it should show me the devise errors in edit_password view).</p>\n\n<p>I tried to solve this with:</p>\n\n<pre><code>class RegistrationsController &lt; Devise::RegistrationsController\n # ...\n\n protected\n def after_update_path_for(resource)\n  redirect_to :back\n end\nend\n</code></pre>\n\n<p>but it does not work.</p>\n\n<p>How can I make it redirect to the same url?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 438, "user_id": 716185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29912acf4124f78d29de7a0f5adf89d0?s=128&d=identicon&r=PG", "display_name": "amalrik maia", "link": "https://stackoverflow.com/users/716185/amalrik-maia"}, "edited": false, "score": 0, "creation_date": 1459965150, "post_id": 36458414, "comment_id": 60529550, "body": "can you provide the exactly line of your program that raises this exception?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1459965480, "post_id": 36458414, "comment_id": 60529790, "body": "If you&#39;re getting a hard crash it&#39;s either the fault of Ruby or a gem with C extensions. Does this manifest in the latest version Ruby 2.3.0?"}, {"owner": {"reputation": 71, "user_id": 4222145, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/M75vs.jpg?s=128&g=1", "display_name": "SkipCloud", "link": "https://stackoverflow.com/users/4222145/skipcloud"}, "edited": false, "score": 0, "creation_date": 1459965483, "post_id": 36458414, "comment_id": 60529793, "body": "@amalrikmaiait the output doesn&#39;t tell me which line, it&#39;s as soon as I run it in Terminal."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1459965963, "post_id": 36458414, "comment_id": 60530078, "body": "It looks like you&#39;re using both the built-in Ruby and RVM&#39;s managed Ruby, which shouldn&#39;t happen. Please add the output of <code>gem env</code> and <code>rvm info</code> to your question by copying/pasting the output into the question and formatting it appropriately. It&#39;s not necessary or desirable to add &quot;Edit&quot; or &quot;Update&quot; tags to the question at that point, simply insert the information where you would have put it if you&#39;d added it initially."}, {"owner": {"reputation": 71, "user_id": 4222145, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/M75vs.jpg?s=128&g=1", "display_name": "SkipCloud", "link": "https://stackoverflow.com/users/4222145/skipcloud"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1459966003, "post_id": 36458414, "comment_id": 60530103, "body": "@tadman updated to 2.3.0 and it&#39;s fixed the issue. Thank you."}, {"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1459969799, "post_id": 36458414, "comment_id": 60532435, "body": "This looks like the usual RVM problem. You&#39;re using 2.0.0 but the gems with extension libraries (<code>*.bundle</code>) were compiled against 2.2.1."}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 4222145, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/M75vs.jpg?s=128&g=1", "display_name": "SkipCloud", "link": "https://stackoverflow.com/users/4222145/skipcloud"}, "is_accepted": true, "score": 0, "last_activity_date": 1459966660, "creation_date": 1459966660, "answer_id": 36459226, "question_id": 36458414, "link": "https://stackoverflow.com/questions/36458414/segmentation-fault-when-running-simple-ruby-twitter-bot/36459226#36459226", "title": "Segmentation Fault when running simple Ruby Twitter bot", "body": "<p>I updated to Ruby 2.3.0 as per tadman's comment (I was using 2.0.0 before) and fixed a few errors that RVM warned me about, then made sure my system was using RVMs update to date version. Works fine now.</p>\n"}], "owner": {"reputation": 71, "user_id": 4222145, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/M75vs.jpg?s=128&g=1", "display_name": "SkipCloud", "link": "https://stackoverflow.com/users/4222145/skipcloud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 0, "accepted_answer_id": 36459226, "answer_count": 1, "score": 0, "last_activity_date": 1459966660, "creation_date": 1459964381, "question_id": 36458414, "link": "https://stackoverflow.com/questions/36458414/segmentation-fault-when-running-simple-ruby-twitter-bot", "title": "Segmentation Fault when running simple Ruby Twitter bot", "body": "<p>I've been trying to write my own Twitter bot using Ruby and the <a href=\"https://github.com/sferik/twitter\" rel=\"nofollow\">Twitter</a> gem. When I run the program on my command line I get a Segmentation Fault error and apparently the JSON gem was to blame. I fixed it yesterday by removing and reinstalling Ruby using RVM. However today it's come back with a vengeance. After some googling today I rebuilt all my gems using <code>gem prestine --all</code></p>\n\n<p>When I ran my code again it's now telling me the <code>http_parser</code> gem is to blame, I've uninstalled it and reinstalled it but the problem persists.</p>\n\n<p>Any idea what I can do to fix this?</p>\n\n<p>Here is the output from Terminal</p>\n\n<pre><code>/Users/Skip/.rvm/gems/ruby-2.2.1/gems/http_parser.rb-0.6.0/lib/ruby_http_parser.bundle: [BUG] Segmentation fault\nruby 2.0.0p645 (2015-04-13 revision 50299) [universal.x86_64-darwin15]\n\n-- Crash Report log information --------------------------------------------\n   See Crash Report log file under the one of following:\n     * ~/Library/Logs/CrashReporter\n     * /Library/Logs/CrashReporter\n     * ~/Library/Logs/DiagnosticReports\n     * /Library/Logs/DiagnosticReports\n   the more detail of.\n\n-- Control frame information -----------------------------------------------\nc:0021 p:-17538197654080 s:0105 e:000104 TOP    [FINISH]\nc:0020 p:---- s:0103 e:000102 CFUNC  :require\nc:0019 p:0196 s:0099 e:000098 METHOD /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:73\nc:0018 p:0027 s:0089 e:000088 TOP    /Users/Skip/.rvm/gems/ruby-2.2.1/gems/http_parser.rb-0.6.0/lib/http_parser.rb:2 [FINISH]\nc:0017 p:---- s:0087 e:000086 CFUNC  :require\nc:0016 p:0196 s:0083 e:000082 METHOD /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:73\nc:0015 p:0007 s:0073 e:000072 TOP    /Users/Skip/.rvm/gems/ruby-2.2.1/gems/http_parser.rb-0.6.0/lib/http/parser.rb:1 [FINISH]\nc:0014 p:---- s:0071 e:000070 CFUNC  :require\nc:0013 p:0196 s:0067 e:000066 METHOD /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:73\nc:0012 p:0007 s:0057 e:000056 TOP    /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/streaming/connection.rb:1 [FINISH]\nc:0011 p:---- s:0055 e:000054 CFUNC  :require\nc:0010 p:0196 s:0051 e:000050 METHOD /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:73\nc:0009 p:0039 s:0041 e:000040 TOP    /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/streaming/client.rb:5 [FINISH]\nc:0008 p:---- s:0039 e:000038 CFUNC  :require\nc:0007 p:0196 s:0035 e:000034 METHOD /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:73\nc:0006 p:0207 s:0025 e:000024 TOP    /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter.rb:26 [FINISH]\nc:0005 p:---- s:0023 e:000022 CFUNC  :require\nc:0004 p:0073 s:0019 e:000018 RESCUE /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:135\nc:0003 p:0442 s:0016 e:000015 METHOD /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:144\nc:0002 p:0007 s:0006 E:001788 EVAL   bot.rb:1 [FINISH]\nc:0001 p:0000 s:0002 E:000bc8 TOP    [FINISH]\n\nbot.rb:1:in `&lt;main&gt;'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:144:in `require'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:135:in `rescue in require'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:135:in `require'\n/Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter.rb:26:in `&lt;top (required)&gt;'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n/Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/streaming/client.rb:5:in `&lt;top (required)&gt;'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n/Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/streaming/connection.rb:1:in `&lt;top (required)&gt;'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n/Users/Skip/.rvm/gems/ruby-2.2.1/gems/http_parser.rb-0.6.0/lib/http/parser.rb:1:in `&lt;top (required)&gt;'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n/Users/Skip/.rvm/gems/ruby-2.2.1/gems/http_parser.rb-0.6.0/lib/http_parser.rb:2:in `&lt;top (required)&gt;'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:73:in `require'\n\n-- C level backtrace information -------------------------------------------\n\n-- Other runtime information -----------------------------------------------\n\n* Loaded script: bot.rb\n\n* Loaded features:\n\n    0 enumerator.so\n    1 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/universal-darwin15/enc/encdb.bundle\n    2 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/universal-darwin15/enc/trans/transdb.bundle\n    3 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/universal-darwin15/rbconfig.rb\n    4 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/compatibility.rb\n    5 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/defaults.rb\n    6 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/deprecate.rb\n    7 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/errors.rb\n    8 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/version.rb\n    9 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/requirement.rb\n   10 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/platform.rb\n   11 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/specification.rb\n   12 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/exceptions.rb\n   13 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_gem.rb\n   14 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/thread.rb\n   15 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/monitor.rb\n   16 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb\n   17 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems.rb\n   18 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/path_support.rb\n   19 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/rubygems/dependency.rb\n   20 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/addressable-2.4.0/lib/addressable/version.rb\n   21 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/addressable-2.4.0/lib/addressable/idna/pure.rb\n   22 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/addressable-2.4.0/lib/addressable/idna.rb\n   23 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/addressable-2.4.0/lib/addressable/uri.rb\n   24 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/thread_safe-0.3.5/lib/thread_safe/version.rb\n   25 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/delegate.rb\n   26 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/thread_safe-0.3.5/lib/thread_safe/synchronized_delegator.rb\n   27 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/thread_safe-0.3.5/lib/thread_safe.rb\n   28 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/memoizable-0.4.2/lib/memoizable/instance_methods.rb\n   29 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/memoizable-0.4.2/lib/memoizable/method_builder.rb\n   30 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/memoizable-0.4.2/lib/memoizable/module_methods.rb\n   31 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/memoizable-0.4.2/lib/memoizable/memory.rb\n   32 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/memoizable-0.4.2/lib/memoizable/version.rb\n   33 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/memoizable-0.4.2/lib/memoizable.rb\n   34 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/forwardable.rb\n   35 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/naught-1.1.0/lib/naught/version.rb\n   36 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/naught-1.1.0/lib/naught/basic_object.rb\n   37 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/naught-1.1.0/lib/naught/conversions.rb\n   38 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/naught-1.1.0/lib/naught/null_class_builder.rb\n   39 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/naught-1.1.0/lib/naught/null_class_builder/command.rb\n   40 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/naught-1.1.0/lib/naught/null_class_builder/commands/define_explicit_conversions.rb\n   41 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/naught-1.1.0/lib/naught/null_class_builder/commands/define_implicit_conversions.rb\n   42 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/naught-1.1.0/lib/naught/null_class_builder/commands/pebble.rb\n   43 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/naught-1.1.0/lib/naught/null_class_builder/commands/predicates_return.rb\n   44 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/naught-1.1.0/lib/naught/null_class_builder/commands/singleton.rb\n   45 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/naught-1.1.0/lib/naught/null_class_builder/commands/traceable.rb\n   46 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/naught-1.1.0/lib/naught/null_class_builder/commands/mimic.rb\n   47 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/naught-1.1.0/lib/naught/null_class_builder/commands/impersonate.rb\n   48 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/naught-1.1.0/lib/naught/null_class_builder/commands.rb\n   49 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/naught-1.1.0/lib/naught.rb\n   50 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/null_object.rb\n   51 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/utils.rb\n   52 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/base.rb\n   53 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/thread_safe-0.3.5/lib/thread_safe/non_concurrent_cache_backend.rb\n   54 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/thread_safe-0.3.5/lib/thread_safe/mri_cache_backend.rb\n   55 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/thread_safe-0.3.5/lib/thread_safe/cache.rb\n   56 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/configuration.rb\n   57 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/enumerable.rb\n   58 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/cgi/core.rb\n   59 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/cgi/util.rb\n   60 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/cgi/cookie.rb\n   61 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/cgi.rb\n   62 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/set.rb\n   63 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/timeout.rb\n   64 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/faraday-0.9.2/lib/faraday/utils.rb\n   65 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/faraday-0.9.2/lib/faraday/options.rb\n   66 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/faraday-0.9.2/lib/faraday/connection.rb\n   67 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/faraday-0.9.2/lib/faraday/rack_builder.rb\n   68 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/faraday-0.9.2/lib/faraday/parameters.rb\n   69 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/faraday-0.9.2/lib/faraday/middleware.rb\n   70 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/faraday-0.9.2/lib/faraday/adapter.rb\n   71 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/faraday-0.9.2/lib/faraday/request.rb\n   72 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/faraday-0.9.2/lib/faraday/response.rb\n   73 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/multipart-post-2.0.0/lib/composite_io.rb\n   74 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/multipart-post-2.0.0/lib/parts.rb\n   75 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/universal-darwin15/stringio.bundle\n   76 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/faraday-0.9.2/lib/faraday/upload_io.rb\n   77 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/faraday-0.9.2/lib/faraday/error.rb\n   78 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/faraday-0.9.2/lib/faraday/autoload.rb\n   79 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/faraday-0.9.2/lib/faraday.rb\n   80 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/json-1.8.3/lib/json/version.rb\n   81 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/ostruct.rb\n   82 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/json-1.8.3/lib/json/generic_object.rb\n   83 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/json-1.8.3/lib/json/common.rb\n   84 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/universal-darwin15/enc/utf_16be.bundle\n   85 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/universal-darwin15/enc/utf_16le.bundle\n   86 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/universal-darwin15/enc/utf_32be.bundle\n   87 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/universal-darwin15/enc/utf_32le.bundle\n   88 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/json-1.8.3/lib/json/ext/parser.bundle\n   89 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/json-1.8.3/lib/json/ext/generator.bundle\n   90 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/json-1.8.3/lib/json/ext.rb\n   91 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/json-1.8.3/lib/json.rb\n   92 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/rate_limit.rb\n   93 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/error.rb\n   94 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/base64.rb\n   95 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/universal-darwin15/digest.bundle\n   96 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/digest.rb\n   97 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/universal-darwin15/openssl.bundle\n   98 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/openssl/bn.rb\n   99 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/openssl/cipher.rb\n  100 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/openssl/config.rb\n  101 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/openssl/digest.rb\n  102 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/openssl/x509.rb\n  103 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/openssl/buffering.rb\n  104 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/universal-darwin15/fcntl.bundle\n  105 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/openssl/ssl.rb\n  106 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/openssl.rb\n  107 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/uri/common.rb\n  108 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/uri/generic.rb\n  109 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/uri/ftp.rb\n  110 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/uri/http.rb\n  111 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/uri/https.rb\n  112 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/uri/ldap.rb\n  113 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/uri/ldaps.rb\n  114 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/uri/mailto.rb\n  115 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/uri.rb\n  116 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/simple_oauth-0.3.1/lib/simple_oauth/header.rb\n  117 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/simple_oauth-0.3.1/lib/simple_oauth.rb\n  118 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/headers.rb\n  119 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/rest/request.rb\n  120 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/cursor.rb\n  121 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/universal-darwin15/date_core.bundle\n  122 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/date/format.rb\n  123 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/date.rb\n  124 /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/time.rb\n  125 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/creatable.rb\n  126 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/entity.rb\n  127 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/entity/hashtag.rb\n  128 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/entity/symbol.rb\n  129 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/entity/uri.rb\n  130 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/entity/user_mention.rb\n  131 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/factory.rb\n  132 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/equalizer-0.0.10/lib/equalizer.rb\n  133 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/identity.rb\n  134 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/variant.rb\n  135 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/media/video_info.rb\n  136 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/media/video.rb\n  137 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/media/animated_gif.rb\n  138 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/media/photo.rb\n  139 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/media_factory.rb\n  140 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/entities.rb\n  141 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/direct_message.rb\n  142 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/geo.rb\n  143 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/geo/point.rb\n  144 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/geo/polygon.rb\n  145 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/geo_factory.rb\n  146 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/language.rb\n  147 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/list.rb\n  148 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/metadata.rb\n  149 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/oembed.rb\n  150 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/place.rb\n  151 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/profile_banner.rb\n  152 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/relationship.rb\n  153 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/faraday-0.9.2/lib/faraday/request/url_encoded.rb\n  154 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/faraday-0.9.2/lib/faraday/request/multipart.rb\n  155 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/version.rb\n  156 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/client.rb\n  157 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/arguments.rb\n  158 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/basic_user.rb\n  159 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/profile.rb\n  160 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/user.rb\n  161 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/rest/utils.rb\n  162 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/rest/direct_messages.rb\n  163 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/tweet.rb\n  164 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/rest/favorites.rb\n  165 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/rest/friends_and_followers.rb\n  166 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/rest/help.rb\n  167 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/rest/lists.rb\n  168 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/rest/media.rb\n  169 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/rest/response/parse_json.rb\n  170 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/rest/response/parse_error_json.rb\n  171 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/token.rb\n  172 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/rest/oauth.rb\n  173 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/geo_results.rb\n  174 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/rest/places_and_geo.rb\n  175 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/saved_search.rb\n  176 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/rest/saved_searches.rb\n  177 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/search_results.rb\n  178 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/rest/search.rb\n  179 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/rest/spam_reporting.rb\n  180 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/suggestion.rb\n  181 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/rest/suggested_users.rb\n  182 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/rest/timelines.rb\n  183 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/trend_results.rb\n  184 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/rest/trends.rb\n  185 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/rest/tweets.rb\n  186 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/rest/undocumented.rb\n  187 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/settings.rb\n  188 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/rest/users.rb\n  189 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/rest/api.rb\n  190 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/rest/request/multipart_with_file.rb\n  191 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/rest/response/raise_error.rb\n  192 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/rest/client.rb\n  193 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/size.rb\n  194 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/twitter-5.16.0/lib/twitter/source_user.rb\n  195 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/http-1.0.4/lib/http/errors.rb\n  196 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/http-1.0.4/lib/http/headers/mixin.rb\n  197 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/http-1.0.4/lib/http/headers/known.rb\n  198 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/http-1.0.4/lib/http/headers.rb\n  199 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/http-1.0.4/lib/http/request/writer.rb\n  200 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/http-1.0.4/lib/http/version.rb\n  201 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/http-1.0.4/lib/http/uri.rb\n  202 /Users/Skip/.rvm/gems/ruby-2.2.1/gems/http-1.0.4/lib/http/request.rb\n\n[NOTE]\nYou may have encountered a bug in the Ruby interpreter or extension libraries.\nBug reports are welcome.\nDon't forget to include the above Crash Report log file.\nFor details: http://www.ruby-lang.org/bugreport.html\n\nAbort trap: 6\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 342, "user_id": 2074840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11346f6761befbc4857bca7eb1eb85a1?s=128&d=identicon&r=PG", "display_name": "michal.samluk", "link": "https://stackoverflow.com/users/2074840/michal-samluk"}, "reply_to_user": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "edited": false, "score": 0, "creation_date": 1459969764, "post_id": 36458463, "comment_id": 60532408, "body": "Same error? Please check stacktrace and line of code where the exception is thrown."}], "tags": [], "owner": {"reputation": 342, "user_id": 2074840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/11346f6761befbc4857bca7eb1eb85a1?s=128&d=identicon&r=PG", "display_name": "michal.samluk", "link": "https://stackoverflow.com/users/2074840/michal-samluk"}, "is_accepted": false, "score": 0, "last_activity_date": 1459964519, "creation_date": 1459964519, "answer_id": 36458463, "question_id": 36458339, "link": "https://stackoverflow.com/questions/36458339/how-to-have-follow-and-unfollow-link-is-user-index-page/36458463#36458463", "title": "How to have follow and unfollow link is user index page", "body": "<p>I think you don't have <code>@user</code> instance variable here, but just <code>user</code>. Replace <code>@user</code> with <code>user</code> here.</p>\n"}], "owner": {"reputation": 59, "user_id": 4223641, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/fa0b939364ebb25e8e11a6fd327c14bc?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammed kanyi", "link": "https://stackoverflow.com/users/4223641/muhammed-kanyi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1459968315, "creation_date": 1459964144, "last_edit_date": 1459968315, "question_id": 36458339, "link": "https://stackoverflow.com/questions/36458339/how-to-have-follow-and-unfollow-link-is-user-index-page", "title": "How to have follow and unfollow link is user index page", "body": "<p>am reading micheal hart ruby on rails tutrial and i have the follow and unfollow button working on the user show page but then i try to add it to the user index page index page i get this error</p>\n\n<pre><code>undefined method `id' for nil:NilClass\n</code></pre>\n\n<p>this my form code for the form</p>\n\n<pre><code>&lt;% user ||= current_user %&gt;\n&lt;div id=\"follow_form\"&gt;\n&lt;% if current_user.following? user %&gt;\n&lt;%= form_for(current_user.active_relationships.find_by(followed_id: @user.id),html: { method: :delete },remote: true) do |f| %&gt;\n&lt;%= f.submit \"Unfollow\", class: \"waves-effect waves-light btn\" %&gt;\n&lt;% end %&gt;\n&lt;% else %&gt;\n&lt;%= form_for(current_user.active_relationships.build(followed_id: @user.id), remote: true) do |f| %&gt;\n&lt;div&gt;&lt;%= hidden_field_tag :followed_id, @user.id %&gt;&lt;/div&gt;\n&lt;%= f.submit \"Follow\", class: \"waves-effect waves-light btn\" %&gt;\n&lt;% end %&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p></p>\n\n<p>after adding that i still get the same error. the form is rendere  using this  <code>&lt;%= render @users %&gt;</code> and that partial contain this `\n    \n    \n        </p>\n\n<pre><code>    &lt;/div&gt;\n    &lt;div class=\"user-profile-inner\"&gt;\n        &lt;h6 &gt;\n        &lt;%= link_to user.name, user %&gt;&lt;/h4&gt;\n        &lt;%= gravatar_all user %&gt;\n      &lt;h5&gt;&lt;%= user.position %&gt;&lt;/h5&gt;\n\n        &lt;!-- User button --&gt;\n        &lt;div class=\"user-button\"&gt;\n            &lt;div class=\"row\"&gt;\n\n                  &lt;% if current_user.admin? &amp;&amp; !current_user?(user) %&gt;\n              &lt;div class=\"col m6\"&gt;\n                 &lt;%= link_to \"delete\", user, method: :delete,class: 'waves-effect waves-light btn red darken-4',\n</code></pre>\n\n<p>data: { confirm: \"You sure?\" } %>\n                  </p>\n\n<pre><code>                  &lt;% end %&gt;\n\n\n                &lt;div class=\"col m6\"&gt;\n\n                    &lt;button type=\"button\" class=\"btn btn-default btn-sm btn-block\"&gt;&lt;i class=\"fa fa-user\"&gt;&lt;/i&gt; &lt;%= render \"follow_form_user\"  %&gt;  &lt;/button&gt;\n\n                &lt;/div&gt;\n                     &lt;div class=\"col m6\"&gt;\n                         &lt;% unless current_user == @user %&gt;\n                         &lt;%= link_to 'Send message', new_message_path(to: user.id), class: 'waves-effect waves-light btn' %&gt;\n                         &lt;% end %&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>\n`</p>\n\n<p>anymore code i need to add on it?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "methods", "logic"], "answers": [{"comments": [{"owner": {"reputation": 2327, "user_id": 1253189, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/56aa566c099ed8007c7ecbecb48de061?s=128&d=identicon&r=PG", "display_name": "Tom Pinchen", "link": "https://stackoverflow.com/users/1253189/tom-pinchen"}, "edited": false, "score": 0, "creation_date": 1459963863, "post_id": 36458236, "comment_id": 60528746, "body": "Ha I was literally just trying <code>find_by</code> - this works a treat thanks :)"}], "tags": [], "owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "is_accepted": true, "score": 1, "last_activity_date": 1459963731, "creation_date": 1459963731, "answer_id": 36458236, "question_id": 36458180, "link": "https://stackoverflow.com/questions/36458180/incrementing-basket-items-ruby/36458236#36458236", "title": "Incrementing basket items Ruby", "body": "<p>Try using <code>find_by</code> instead of conditions:</p>\n\n<pre><code>def create  \n   @product = Product.find(params[:product_id])\n   @basket = current_basket\n\n    if @basket.items.exists?(product_id: @product.id)\n        current_basket.items.find_by(product_id: @product.id).increment! :quantity\n    else\n        Item.create!(basket_id: @basket.id, product_id: @product.id, quantity: 1, price: @product.price)\n    end\n\n    redirect_to baskets_show_path\n\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 44, "user_id": 5386356, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/08uCu.jpg?s=128&g=1", "display_name": "matt721", "link": "https://stackoverflow.com/users/5386356/matt721"}, "is_accepted": false, "score": 1, "last_activity_date": 1460041380, "last_edit_date": 1460041380, "creation_date": 1459969570, "answer_id": 36460214, "question_id": 36458180, "link": "https://stackoverflow.com/questions/36458180/incrementing-basket-items-ruby/36460214#36460214", "title": "Incrementing basket items Ruby", "body": "<p><code>first_or_create</code> might be helpful. See <a href=\"http://apidock.com/rails/v3.2.1/ActiveRecord/Relation/first_or_create\" rel=\"nofollow\">API Dock ActiveRecord::Relation first_or_create</a>. Of course, your needs are more complex than what is provided in the doc since the item has multiple identifying criteria.</p>\n\n<p>I tested this out with a model in the app I have open and it seemed to do the trick (the model has a lot of validations I didn't want to mess with so I believe the actual create failed on that).</p>\n\n<pre><code>def create\n  @product = Product.find(params[:product_id])\n  @basket = current_basket\n\n  item = Item.where({basket_id:  @basket.id,\n                     product_id: @product.id,\n                     price:      @product.price})\n             .first_or_create(quantity: 0)\n  item.increment! :quantity\n\n  redirect_to baskets_show_path\nend\n</code></pre>\n\n<p>So basically what's going on is, you set item to the item in the basket if it's there, or create it if it's not with the info you were already seeking, as well as an initial quantity of zero. Then, you increment by 1.</p>\n\n<p>One other note is that you may want to confirm you need both instance variables. If just @basket is needed in the view, consider dropping the @ from all the product references. An explanation of why and how to keep controllers skinny is in <a href=\"http://tutorials.jumpstartlab.com/topics/controllers/slimming_controllers.html\" rel=\"nofollow\">Jumpstart Lab's Slimming Controllers</a>.</p>\n"}], "owner": {"reputation": 2327, "user_id": 1253189, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/56aa566c099ed8007c7ecbecb48de061?s=128&d=identicon&r=PG", "display_name": "Tom Pinchen", "link": "https://stackoverflow.com/users/1253189/tom-pinchen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 36458236, "answer_count": 2, "score": 1, "last_activity_date": 1460041380, "creation_date": 1459963583, "question_id": 36458180, "link": "https://stackoverflow.com/questions/36458180/incrementing-basket-items-ruby", "title": "Incrementing basket items Ruby", "body": "<p>I am trying to write some logic that will evaluate if an item already exists in a basket and if it does increment the items quantity by 1 when the user adds the product and if not create a new record (the creating a new record bit is working well).</p>\n\n<pre><code>def create  \n   @product = Product.find(params[:product_id])\n   @basket = current_basket\n\n    if @basket.items.exists?(product_id: @product.id)\n        current_basket.items.find(conditions: {:product_id =&gt; @product.id}).increment! :quantity\n    else\n        Item.create!(basket_id: @basket.id, product_id: @product.id, quantity: 1, price: @product.price)\n    end\n\n    redirect_to baskets_show_path\n\nend\n</code></pre>\n\n<p>The error I am getting is <code>SQLite3::SQLException: no such column: id.conditions: SELECT \"items\".* FROM \"items\" WHERE \"items\".\"basket_id\" = ? AND \"id\".\"conditions\" = '--- :product_id: 2 ' LIMIT 1</code> </p>\n\n<p>Any help would be much appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 1, "creation_date": 1459963409, "post_id": 36458031, "comment_id": 60528463, "body": "<code>user.params</code> should be <code>user_params</code>"}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 6142801, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3a02fbdecf85bf08f4039ce0c08df6cf?s=128&d=identicon&r=PG&f=1", "display_name": "Mark M", "link": "https://stackoverflow.com/users/6142801/mark-m"}, "edited": false, "score": 1, "creation_date": 1459965423, "post_id": 36458117, "comment_id": 60529760, "body": "I spent about 10 hrs loosing my mind and was awake till about 3AM. It&#39;s always the dumbest mistakes. Thanks"}], "tags": [], "owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "is_accepted": false, "score": 3, "last_activity_date": 1459963405, "creation_date": 1459963405, "answer_id": 36458117, "question_id": 36458031, "link": "https://stackoverflow.com/questions/36458031/undefined-local-variable-or-method-user/36458117#36458117", "title": "undefined local variable or method `user&#39;", "body": "<p>There are a few things wrong with your code. For starters you're calling an undefined variable in your controller. <code>user</code> should be a symbol and user.params should be <code>user_params</code></p>\n\n<pre><code>class ProfileController &lt; ApplicationController\nbefore_action :authenticate_user!\n\ndef index\n  @user = current_user\nend\n\ndef update\n  current_user.update(user_params) \n  redirect_to root_path\nend\n\n\nprivate\n  def user_params\n  params.require(:user).permit(:first_name, :last_name)\n  end\nend\n</code></pre>\n\n<p>You also need to update your routes to support the user actions you described:</p>\n\n<p><strong>Within routes.rb:</strong></p>\n\n<p><code>resources :users</code></p>\n\n<p>Finally, to use the Devise helper methods make sure you have the Devise routes at the top of your routes.rb as well:</p>\n\n<p><code>devise_for :users</code></p>\n"}], "owner": {"reputation": 71, "user_id": 6142801, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/3a02fbdecf85bf08f4039ce0c08df6cf?s=128&d=identicon&r=PG&f=1", "display_name": "Mark M", "link": "https://stackoverflow.com/users/6142801/mark-m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2306, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1459963405, "creation_date": 1459963141, "question_id": 36458031, "link": "https://stackoverflow.com/questions/36458031/undefined-local-variable-or-method-user", "title": "undefined local variable or method `user&#39;", "body": "<p>I am getting this error: undefined local variable or method `user' for # which points to the profiles controller line 9, \"First line after def update method\"  BTW I am using Devise for my User.</p>\n\n<pre><code>class ProfileController &lt; ApplicationController\nbefore_action :authenticate_user!\n\ndef index\n  @user = current_user\nend\n\ndef update\n  current_user.update(user.params) \n  redirect_to root_path\nend\n\n\nprivate\n  def user_params\n  params.require(user).permit(:first_name, :last_name)\n  end\nend\n</code></pre>\n\n<p>Here is my application.html.erb where my editor \"Rubymine\" tells me that user_signed_in?, current_user, destroy_user_session_path, new_user_session_path, and new_user_registration_path CANNOT BE FOUND</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;title&gt;TwitterClone&lt;/title&gt;\n&lt;%= stylesheet_link_tag    'application', media: 'all' %&gt;\n&lt;%= javascript_include_tag 'application' %&gt;\n&lt;!-- Compiled and minified CSS --&gt;\n&lt;link rel=\"stylesheet\" href=\"https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/css/materialize.min.css\"&gt;\n&lt;link href=\"https://fonts.googleapis.com/icon?family=Material+Icons\" rel=\"stylesheet\"&gt;\n&lt;!-- Compiled and minified JavaScript --&gt;\n&lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.6/js/materialize.min.js\"&gt;&lt;/script&gt;\n&lt;%= csrf_meta_tags %&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;div class=\"right\"&gt;\n&lt;% if user_signed_in? %&gt;\n  Welcome &lt;%= current_user.display_name %&gt;,\n    &lt;%= link_to \"Logout\", destroy_user_session_path, method: \"DELETE\" %&gt;\n&lt;% else %&gt;\n  Please\n    &lt;%= link_to \"Login\", new_user_session_path %&gt;\n    or\n    &lt;%= link_to \"Signup\", new_user_registration_path %&gt;\n&lt;% end %&gt;\n&lt;/div&gt;\n&lt;p class=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\n&lt;p class=\"alert\"&gt;&lt;%= alert %&gt;&lt;/p&gt;\n&lt;%= yield %&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>My routes are the ones Devise generates for User plus the ones I have for Profile which are:</p>\n\n<pre><code>profile GET    /profile(.:format)             profile#index\n        PATCH  /profile(.:format)             profile#update\n</code></pre>\n\n<p>Here is the schema Devise generated:</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20160406005549) do\n\n# These are extensions that must be enabled in order to support this database\nenable_extension \"plpgsql\"\n\ncreate_table \"users\", force: :cascade do |t|\n t.string   \"email\",                  default: \"\", null: false\n t.string   \"encrypted_password\",     default: \"\", null: false\n t.string   \"reset_password_token\"\n t.datetime \"reset_password_sent_at\"\n t.datetime \"remember_created_at\"\n t.integer  \"sign_in_count\",          default: 0,  null: false\n t.datetime \"current_sign_in_at\"\n t.datetime \"last_sign_in_at\"\n t.inet     \"current_sign_in_ip\"\n t.inet     \"last_sign_in_ip\"\n t.datetime \"created_at\",                          null: false\n t.datetime \"updated_at\",                          null: false\n t.string   \"first_name\"\n t.string   \"last_name\"\nend\n\nadd_index \"users\", [\"email\"], name: \"index_users_on_email\", unique: true, using: :btree\nadd_index \"users\", [\"reset_password_token\"], name:    \"index_users_on_reset_password_token\", unique: true, using: :btree\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "ruby-on-rails-3", "rspec"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1459962934, "post_id": 36457880, "comment_id": 60528137, "body": "I&#39;m not sure what you&#39;re actually asking."}, {"owner": {"reputation": 953, "user_id": 1094058, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a1300d001490ad5669996c55abcda067?s=128&d=identicon&r=PG", "display_name": "Mike Earley", "link": "https://stackoverflow.com/users/1094058/mike-earley"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1459963711, "post_id": 36457880, "comment_id": 60528661, "body": "Added a sentence to clarify what I&#39;m asking :)"}], "answers": [{"tags": [], "owner": {"reputation": 1333, "user_id": 4654230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14665ec629152ce3c5da96319d92df6c?s=128&d=identicon&r=PG", "display_name": "Kieran Johnson", "link": "https://stackoverflow.com/users/4654230/kieran-johnson"}, "is_accepted": false, "score": 0, "last_activity_date": 1460030102, "creation_date": 1460030102, "answer_id": 36475431, "question_id": 36457880, "link": "https://stackoverflow.com/questions/36457880/rspec-testing-a-controller-method-calling-a-lib-wrapper-that-makes-an-api-call/36475431#36475431", "title": "rspec testing a controller method, calling a lib wrapper that makes an API call", "body": "<p>I would test this at a high level using a feature spec, and also a unit test for the wrapper module.</p>\n\n<p>To help with testing and to stop requests hitting the real API I would use the WebMock gem (<a href=\"https://github.com/bblimke/webmock\" rel=\"nofollow\">https://github.com/bblimke/webmock</a>). With this gem you will be able to stub requests and set the response and status code.</p>\n\n<p>A feature spec using RSpec/Capybara would look something like -</p>\n\n<pre><code>RSpec.feature 'loads response from Baz', type: :feature do\n  scenario 'response if success' do\n    stub_request(:any, 'www.example.com').\n      to_return(:body =&gt; 'blah', :status =&gt; 200)\n\n    visit '/my-url'\n\n    fill_in '#approval_code', with: '123'\n    # ... fill in other fields ...\n\n    click_button 'Load Response'\n\n    # check the page contains whatever you expect as the stringified JSON\n    expect(page).to have_content('blah')\n  end\n\n  # then test the failure scenario\nend\n</code></pre>\n\n<p>You can take this further and write a spec to test that your wrapper requests the correct URL with the expected params.</p>\n\n<p>Using WebMock again you can set expectations on the WebMock module and verify the last request.</p>\n\n<p>e.g.</p>\n\n<pre><code>describe BazWrapper do\n  describe '.get_api_response' do\n    let(params) {\n      {\n        approval_code: 'x'\n      }\n    }\n\n    before do\n      stub_request(:any, 'www.example.com').\n        to_return(:body =&gt; 'blah', :status =&gt; 200)\n    end\n\n    it 'requests the data' do\n      BazWrapper.get_api_response(params)\n\n      expect(WebMock).to have_requested(:post, 'www.example.com').\n        with(query: { approval_code: 'x' })\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 953, "user_id": 1094058, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/a1300d001490ad5669996c55abcda067?s=128&d=identicon&r=PG", "display_name": "Mike Earley", "link": "https://stackoverflow.com/users/1094058/mike-earley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 476, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1460030102, "creation_date": 1459962653, "last_edit_date": 1459963694, "question_id": 36457880, "link": "https://stackoverflow.com/questions/36457880/rspec-testing-a-controller-method-calling-a-lib-wrapper-that-makes-an-api-call", "title": "rspec testing a controller method, calling a lib wrapper that makes an API call", "body": "<p>In the application, the user can fill in 3 fields (and 1 hidden field) and click 'load response', and this will make an ajax API call to an external API. The call to the external API is in a wrapper in lib. This wrapper stores additional required fields that the user doesn't need to enter, but are required by the API.</p>\n\n<p>I've seen a few other posts about testing API calls, but I'm stumped on comparing them to this one and learning something from it, because of that extra wrapper. </p>\n\n<p><strong>What would a test look like, to test this API, based on the system's architecture?</strong></p>\n\n<p>In the view: </p>\n\n<pre><code>data = -&gt;\n  string_ssid = '#{@bar.ssID}'\n  {\n    approval_code: $('#approval_code').val()\n    rejection_code: $('#rejection_code').val()\n    rejection_message: $('#rejection_message').val()\n    ssid: string_ssid\n  }\n\najax_call = -&gt;\n  $('#load_response').on 'click', -&gt;\n    $.ajax\n      url: '/fooview/api_response'\n      data: data()\n      success: (d) -&gt;\n        $('#api_response').html '&lt;p&gt;' + JSON.stringify(d) + '&lt;/p&gt;'\n        return\n      error: (d, status, e) -&gt;\n        $('#api_response').html '&lt;p&gt;Error: ' + e + ', ' + status + '&lt;/p&gt;'\n        return\n    return\n  return\n</code></pre>\n\n<p>Routes:</p>\n\n<pre><code>get '/baz/api_response', to: 'baz#api_response'\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>  def api_response\n    render json: BazWrapper.get_api_response(params)\n  end\n</code></pre>\n\n<p>Wrapper:</p>\n\n<pre><code>module BazWrapper\n\n  @base_url = Enviro.get(:foo) + '/message/json'\n\n  def self.get_api_response(params)\n\n    query_values = {\n    api_key: Enviro.get(:foo, :api_key),\n    approval_code: params[:approval_code],\n    rejection_code: params[:rejection_code],\n    rejection_message: params[:rejection_message],\n    ssid: params[:ssid],\n    (..other required params hard-wired..)\n  }\n\n  HTTParty.post(\n    URI.encode(@base_url),\n    query: query_values\n    )\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "rubocop"], "comments": [{"owner": {"reputation": 36449, "user_id": 2453699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b0a49d160baf7d95b81d798ea0cb65?s=128&d=identicon&r=PG", "display_name": "vee", "link": "https://stackoverflow.com/users/2453699/vee"}, "edited": false, "score": 0, "creation_date": 1459962778, "post_id": 36457669, "comment_id": 60528025, "body": "It&#39;s telling you that you need to have documentation &quot;comment&quot; for a &quot;top-level class&quot; which in this case is <code>WelcomeController</code>. Add a comment above the class definition to prevent this message. There may also be other ways to get rid of this message. See documentation for <a href=\"https://github.com/bbatsov/rubocop/\" rel=\"nofollow noreferrer\">rubocop</a> for details."}, {"owner": {"reputation": 1137, "user_id": 3657027, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9055a18fa1995864d1ce9f718b1a2418?s=128&d=identicon&r=PG&f=1", "display_name": "DreamWalker", "link": "https://stackoverflow.com/users/3657027/dreamwalker"}, "reply_to_user": {"reputation": 36449, "user_id": 2453699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b0a49d160baf7d95b81d798ea0cb65?s=128&d=identicon&r=PG", "display_name": "vee", "link": "https://stackoverflow.com/users/2453699/vee"}, "edited": false, "score": 0, "creation_date": 1459963043, "post_id": 36457669, "comment_id": 60528215, "body": "@vee I tried adding a comment below the class definition. Thanks."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1459966746, "post_id": 36457669, "comment_id": 60530559, "body": "To overcome the need to add a real comment you could add <code>#:nodoc:</code> at the top of the file"}], "answers": [{"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 9, "last_activity_date": 1459964370, "creation_date": 1459964370, "answer_id": 36458407, "question_id": 36457669, "link": "https://stackoverflow.com/questions/36457669/top-level-class-documentation/36458407#36458407", "title": "Top-level class documentation", "body": "<p>From <a href=\"https://github.com/bbatsov/rubocop\" rel=\"noreferrer\">the Rubocop documentation</a>:</p>\n\n<blockquote>\n  <p>RuboCop is a Ruby static code analyzer. Out of the box it will enforce many of the guidelines outlined in the community <a href=\"https://github.com/bbatsov/ruby-style-guide\" rel=\"noreferrer\">Ruby Style Guide</a>.</p>\n</blockquote>\n\n<p>The Ruby Style Guide \"comment\" section doesn't use the phrase \"Missing top-level class documentation comment\" but from reading the guide section on comments, you can quickly infer from the examples that commenting classes and modules is recommended.</p>\n\n<p>The reason is, when using <code>rdoc</code>, the comments for the classes/modules will be used to generate the reference to the code, something that is important whether you're writing code for yourself, for a team or for general release by others.</p>\n"}, {"comments": [{"owner": {"reputation": 222, "user_id": 9359123, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-w3Hn8tcpIX8/AAAAAAAAAAI/AAAAAAAAAGg/pBuBmeZNcxU/photo.jpg?sz=128", "display_name": "Prabin Poudel", "link": "https://stackoverflow.com/users/9359123/prabin-poudel"}, "edited": false, "score": 0, "creation_date": 1597838067, "post_id": 38218293, "comment_id": 112262676, "body": "Why is this not an accepted answer yet? Anyone looking for the answer, you can see the rubocop documentation too, please don&#39;t disable the check though: <a href=\"https://www.rubydoc.info/gems/rubocop/RuboCop/Cop/Style/Documentation\" rel=\"nofollow noreferrer\">rubydoc.info/gems/rubocop/RuboCop/Cop/Style/Documentation</a>"}], "tags": [], "owner": {"reputation": 890, "user_id": 1412133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/703fbc991fd63e0e1db54dca9ea31b53?s=128&d=identicon&r=PG", "display_name": "lab419", "link": "https://stackoverflow.com/users/1412133/lab419"}, "is_accepted": false, "score": 48, "last_activity_date": 1467789632, "creation_date": 1467789632, "answer_id": 38218293, "question_id": 36457669, "link": "https://stackoverflow.com/questions/36457669/top-level-class-documentation/38218293#38218293", "title": "Top-level class documentation", "body": "<p>That said a simple comment like so will do nicely:</p>\n\n<pre><code># This shiny device polishes bared foos\nclass FooBarPolisher\n       ...\n</code></pre>\n\n<p>HTH</p>\n"}, {"comments": [{"owner": {"reputation": 753, "user_id": 10390137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f94eee76877a112cdc2ed1854508fd74?s=128&d=identicon&r=PG", "display_name": "Semih Arslano\u011flu", "link": "https://stackoverflow.com/users/10390137/semih-arslano%c4%9flu"}, "edited": false, "score": 0, "creation_date": 1585554334, "post_id": 56879614, "comment_id": 107790032, "body": "It gives <code>Warning: no department given for Documentation.</code> error. It needs to be <code>Style&#47;Documentation: Enabled: false</code>"}, {"owner": {"reputation": 222, "user_id": 9359123, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-w3Hn8tcpIX8/AAAAAAAAAAI/AAAAAAAAAGg/pBuBmeZNcxU/photo.jpg?sz=128", "display_name": "Prabin Poudel", "link": "https://stackoverflow.com/users/9359123/prabin-poudel"}, "edited": false, "score": 0, "creation_date": 1597837988, "post_id": 56879614, "comment_id": 112262633, "body": "I don&#39;t think we should disable the check since we are adding Rubocop in our app for implementing best practices. It could be as simple as adding single line that could describe what the particular class is doing like in lab419 answer: <a href=\"https://stackoverflow.com/a/38218293/9359123\">stackoverflow.com/a/38218293/9359123</a>"}, {"owner": {"reputation": 2258, "user_id": 5750078, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/d1UkN.jpg?s=128&g=1", "display_name": "Loaderon", "link": "https://stackoverflow.com/users/5750078/loaderon"}, "reply_to_user": {"reputation": 222, "user_id": 9359123, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-w3Hn8tcpIX8/AAAAAAAAAAI/AAAAAAAAAGg/pBuBmeZNcxU/photo.jpg?sz=128", "display_name": "Prabin Poudel", "link": "https://stackoverflow.com/users/9359123/prabin-poudel"}, "edited": false, "score": 0, "creation_date": 1597868359, "post_id": 56879614, "comment_id": 112276972, "body": "@PrabinPoudel it is up to what your team decides: you should configure rubocop to implement only those practices you find needed in your project because each good practice we apply also comes with a cost in time when applying them, some more than others. Besides, Clean Code states that comments should be avoided in a self explaining code, unless you are developing an api. Several classes like &quot;User&quot; are sometimes well understood without an unnecessary comment over them that would say something like &quot;Application user&#180;s model&quot;. But again, is up to you: configure rubocop as you find fit."}, {"owner": {"reputation": 222, "user_id": 9359123, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-w3Hn8tcpIX8/AAAAAAAAAAI/AAAAAAAAAGg/pBuBmeZNcxU/photo.jpg?sz=128", "display_name": "Prabin Poudel", "link": "https://stackoverflow.com/users/9359123/prabin-poudel"}, "edited": false, "score": 0, "creation_date": 1597887026, "post_id": 56879614, "comment_id": 112281584, "body": "I agree. That makes sense. I meant to say in this particular context, the one who is asking question wants to know how comment should be added to the particular class. Personally I came here searching for fixing the error, and found this answer which I found quite misleading since I wanted to fix the error and not disable the check. But that depends on Team decision like you have mentioned. And this could have been avoided if one answer was accepted when it worked for the user asking the question."}, {"owner": {"reputation": 2258, "user_id": 5750078, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/d1UkN.jpg?s=128&g=1", "display_name": "Loaderon", "link": "https://stackoverflow.com/users/5750078/loaderon"}, "edited": false, "score": 0, "creation_date": 1597910521, "post_id": 56879614, "comment_id": 112287836, "body": "Oh I understand. Sure, lab419&#39;s answer would be the best one for DreamWalker&#39;s question. I only added how to disable the check because as I said: I ended up here looking for a way to do it and since that answer was missing I had to improvise. Came back to add it."}], "tags": [], "owner": {"reputation": 2258, "user_id": 5750078, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/d1UkN.jpg?s=128&g=1", "display_name": "Loaderon", "link": "https://stackoverflow.com/users/5750078/loaderon"}, "is_accepted": false, "score": 7, "last_activity_date": 1562203785, "creation_date": 1562203785, "answer_id": 56879614, "question_id": 36457669, "link": "https://stackoverflow.com/questions/36457669/top-level-class-documentation/56879614#56879614", "title": "Top-level class documentation", "body": "<p>I ended up here looking for a way to disable this check, if that's your case, put</p>\n\n<pre><code>Documentation:\n  Enabled: false\n</code></pre>\n\n<p>in your .rubocop.yml file.</p>\n"}], "owner": {"reputation": 1137, "user_id": 3657027, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9055a18fa1995864d1ce9f718b1a2418?s=128&d=identicon&r=PG&f=1", "display_name": "DreamWalker", "link": "https://stackoverflow.com/users/3657027/dreamwalker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23817, "favorite_count": 2, "answer_count": 3, "score": 36, "last_activity_date": 1562203785, "creation_date": 1459962034, "last_edit_date": 1522834237, "question_id": 36457669, "link": "https://stackoverflow.com/questions/36457669/top-level-class-documentation", "title": "Top-level class documentation", "body": "<p>Rubycop outputs messages like:</p>\n\n<pre><code>app/controllers/welcome_controller.rb:1:1: C: Missing top-level class documentation comment.\nclass WelcomeController &lt; ApplicationController\n^^^^^\n</code></pre>\n\n<p>I wonder what does top-level class documentation look like. It's not just a comment, is it? It needs to have a special format, but which one?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundler"], "answers": [{"tags": [], "owner": {"reputation": 1178, "user_id": 3414157, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/liyLh.jpg?s=128&g=1", "display_name": "olleh", "link": "https://stackoverflow.com/users/3414157/olleh"}, "is_accepted": false, "score": 1, "last_activity_date": 1460695262, "creation_date": 1460695262, "answer_id": 36638399, "question_id": 36457514, "link": "https://stackoverflow.com/questions/36457514/bundle-install-fails-when-install-unf-ext-cannot-allocate-memory-error-when-in/36638399#36638399", "title": "Bundle install fails when install unf_ext. &quot;Cannot allocate memory error when installing unf_ext&quot;", "body": "<p>I fixed this issue by upgrading my server, increasing the memory.</p>\n"}, {"comments": [{"owner": {"reputation": 170, "user_id": 8492881, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DQRAARPTD3Y/AAAAAAAAAAI/AAAAAAAAACE/C4ocy6l-w3w/photo.jpg?sz=128", "display_name": "Community", "link": "https://stackoverflow.com/users/8492881/community"}, "edited": false, "score": 0, "creation_date": 1600439453, "post_id": 54060804, "comment_id": 113097963, "body": "this is a life and money saver. thanks bro. Can I just leave it there though?"}, {"owner": {"reputation": 7134, "user_id": 1078969, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1ee458f0818af1b8669af687c277c6a1?s=128&d=identicon&r=PG", "display_name": "whites11", "link": "https://stackoverflow.com/users/1078969/whites11"}, "reply_to_user": {"reputation": 170, "user_id": 8492881, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DQRAARPTD3Y/AAAAAAAAAAI/AAAAAAAAACE/C4ocy6l-w3w/photo.jpg?sz=128", "display_name": "Community", "link": "https://stackoverflow.com/users/8492881/community"}, "edited": false, "score": 0, "creation_date": 1600527748, "post_id": 54060804, "comment_id": 113119160, "body": "I guess you can, sure."}], "tags": [], "owner": {"reputation": 7134, "user_id": 1078969, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/1ee458f0818af1b8669af687c277c6a1?s=128&d=identicon&r=PG", "display_name": "whites11", "link": "https://stackoverflow.com/users/1078969/whites11"}, "is_accepted": false, "score": 3, "last_activity_date": 1546772065, "creation_date": 1546772065, "answer_id": 54060804, "question_id": 36457514, "link": "https://stackoverflow.com/questions/36457514/bundle-install-fails-when-install-unf-ext-cannot-allocate-memory-error-when-in/54060804#54060804", "title": "Bundle install fails when install unf_ext. &quot;Cannot allocate memory error when installing unf_ext&quot;", "body": "<p>Pretty old question, but I can suggest an alternative answer. Instead of upgrading the server resources (and possibly costs), if the server does not have a swap partition you could temporarily create and enable a swap file:</p>\n\n<p>Run as root:</p>\n\n<pre><code># create a 512 Mb file\ndd if=/dev/zero of=/swapfile1 bs=1024 count=524288\n\n# assign the correct permissions\nchown root:root /swapfile1\nchmod 0600 /swapfile1\n\n# initialize the file as a swap file\nmkswap /swapfile1\n\n# enable swap\nswapon /swapfile1\n</code></pre>\n\n<p>Once the build is complete, you can disable the swap file and delete it:</p>\n\n<pre><code>swapoff /swapfile1\nrm /swapfile1\n</code></pre>\n"}], "owner": {"reputation": 1178, "user_id": 3414157, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/liyLh.jpg?s=128&g=1", "display_name": "olleh", "link": "https://stackoverflow.com/users/3414157/olleh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1248, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1546772065, "creation_date": 1459961607, "last_edit_date": 1460022700, "question_id": 36457514, "link": "https://stackoverflow.com/questions/36457514/bundle-install-fails-when-install-unf-ext-cannot-allocate-memory-error-when-in", "title": "Bundle install fails when install unf_ext. &quot;Cannot allocate memory error when installing unf_ext&quot;", "body": "<p>I have this bug that happens on my remote server.</p>\n\n<p>Though this isn't replicable in my local environment.</p>\n\n<p>Installing unf_ext 0.0.7.2 with native extensions</p>\n\n<p>Gem::Ext::BuildError: ERROR: Failed to build gem native extension.</p>\n\n<pre><code>/home/ubuntu/.rbenv/versions/2.1.2/bin/ruby extconf.rb\n</code></pre>\n\n<p>Cannot allocate memory - /home/ubuntu/.rbenv/versions/2.1.2/bin/ruby extconf.rb 2>&amp;1</p>\n\n<pre><code>Gem files will remain installed in /home/ubuntu/switch-web/shared/bundle/ruby/2.1.0/gems/unf_ext-0.0.7.2 for inspection.\nResults logged to /home/ubuntu/switch-web/shared/bundle/ruby/2.1.0/extensions/x86_64-linux/2.1.0-static/unf_ext-0.0.7.2/gem_make.out\nAn error occurred while installing unf_ext (0.0.7.2), and Bundler cannot\ncontinue.\nMake sure that `gem install unf_ext -v '0.0.7.2'` succeeds before bundling.\n</code></pre>\n\n<p>I've checked the ram space for my  server and it's still pretty decent (2gb free).</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "friendly-id"], "answers": [{"comments": [{"owner": {"reputation": 107, "user_id": 5530058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCchZ.png?s=128&g=1", "display_name": "Zonblar", "link": "https://stackoverflow.com/users/5530058/zonblar"}, "edited": false, "score": 0, "creation_date": 1460019054, "post_id": 36458349, "comment_id": 60552863, "body": "tested with this but only got \\tutorial-john. Seems like the title doesn&#39;t get generated by friendly id"}], "tags": [], "owner": {"reputation": 438, "user_id": 716185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29912acf4124f78d29de7a0f5adf89d0?s=128&d=identicon&r=PG", "display_name": "amalrik maia", "link": "https://stackoverflow.com/users/716185/amalrik-maia"}, "is_accepted": false, "score": 2, "last_activity_date": 1459964850, "last_edit_date": 1459964850, "creation_date": 1459964176, "answer_id": 36458349, "question_id": 36456989, "link": "https://stackoverflow.com/questions/36456989/friendly-id-custom-slug/36458349#36458349", "title": "Friendly Id Custom Slug", "body": "<p>I edited the response, sorry.\nIt seems friendly_id expects an array of slug candidates. As you can see <a href=\"https://github.com/norman/friendly_id#what-changed-in-version-50\" rel=\"nofollow\">here</a></p>\n\n<p>please try this:</p>\n\n<pre><code>#post.rb \ndef slug_candidates\n  [ \"#tutorial-#{user.display_name}-#{title}\" ]\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 107, "user_id": 5530058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCchZ.png?s=128&g=1", "display_name": "Zonblar", "link": "https://stackoverflow.com/users/5530058/zonblar"}, "is_accepted": false, "score": 1, "last_activity_date": 1460037927, "creation_date": 1460037927, "answer_id": 36478639, "question_id": 36456989, "link": "https://stackoverflow.com/questions/36456989/friendly-id-custom-slug/36478639#36478639", "title": "Friendly Id Custom Slug", "body": "<p>Understood. The slug was generated before I saved the title. It was therefore generated with a nil title. I had to override the should_generate_new_friendly_id method </p>\n\n<pre><code>def should_generate_new_friendly_id?\n  slug.blank? || title_changed?\nend\n</code></pre>\n"}], "owner": {"reputation": 107, "user_id": 5530058, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCchZ.png?s=128&g=1", "display_name": "Zonblar", "link": "https://stackoverflow.com/users/5530058/zonblar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1779, "favorite_count": 0, "answer_count": 2, "score": 6, "last_activity_date": 1460037927, "creation_date": 1459960142, "last_edit_date": 1459960279, "question_id": 36456989, "link": "https://stackoverflow.com/questions/36456989/friendly-id-custom-slug", "title": "Friendly Id Custom Slug", "body": "<p>I have a Post model </p>\n\n<pre><code>#post.rb   \nextend FriendlyId\nfriendly_id :slug_candidates, use: [:slugged, :history]\n</code></pre>\n\n<p>I'm trying to customize the url for each post like so</p>\n\n<pre><code>#post.rb \ndef slug_candidates\n \"#tutorial-#{user.display_name}-#{title}\"\nend\n</code></pre>\n\n<p>Friendly id keeps generating UUID slugs while I'd like it to generate a comprehensive url </p>\n\n<p>Typically I get \\tutorial-john-49c9938b-ece5-4175-a4a4-0bb2b0f26a27\nInstead of \\tutorial-john-some-comprehensive-title</p>\n\n<p>Thank you </p>\n"}, {"tags": ["ruby", "selenium", "capybara"], "answers": [{"comments": [{"owner": {"reputation": 991, "user_id": 3494005, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/562923750/picture?type=large", "display_name": "Sifnos", "link": "https://stackoverflow.com/users/3494005/sifnos"}, "edited": false, "score": 0, "creation_date": 1459960761, "post_id": 36457038, "comment_id": 60526815, "body": "When I copy xpath for the <code>a</code> tag: <code>&#47;&#47;*[@id=&quot;null&quot;]</code>. For the <code>img</code> inside it I get: <code>&#47;&#47;*[@id=&quot;null&quot;]&#47;img</code>."}], "tags": [], "owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "is_accepted": false, "score": 0, "last_activity_date": 1459960258, "creation_date": 1459960258, "answer_id": 36457038, "question_id": 36456775, "link": "https://stackoverflow.com/questions/36456775/capybara-selenium-is-there-a-way-to-click-a-link-that-was-isolated-but-has-no/36457038#36457038", "title": "Capybara/Selenium - Is there a way to click a link that was isolated but has no unique identifier or content?", "body": "<p>Like the error is hinting, each DOM element can be referenced by its XPath which is similar, but more specific, than standard CSS selectors. You can the Path within the Chrome inspector by right clicking on the specific node.</p>\n\n<p>Be careful testing something that's too specific. It's likely going to be fragile and break often making a test that's hard to maintain.</p>\n\n<p>Relevant capybara doc: <a href=\"http://www.rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Finders\" rel=\"nofollow\">http://www.rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Finders</a></p>\n"}, {"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 0, "last_activity_date": 1459972074, "creation_date": 1459972074, "answer_id": 36460996, "question_id": 36456775, "link": "https://stackoverflow.com/questions/36456775/capybara-selenium-is-there-a-way-to-click-a-link-that-was-isolated-but-has-no/36460996#36460996", "title": "Capybara/Selenium - Is there a way to click a link that was isolated but has no unique identifier or content?", "body": "<p>Since you already have the link element you just have to call <code>click</code> on it - <code>click_link</code> finds links by their id, title, or text contents (also alt attribute of a nested img) - but you have already found them with a normal css query</p>\n\n<pre><code>within(\".map\") do\n  all(\"a.dealer-pin\").each do |link|\n    link.click\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 991, "user_id": 3494005, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/562923750/picture?type=large", "display_name": "Sifnos", "link": "https://stackoverflow.com/users/3494005/sifnos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1459972074, "creation_date": 1459959524, "question_id": 36456775, "link": "https://stackoverflow.com/questions/36456775/capybara-selenium-is-there-a-way-to-click-a-link-that-was-isolated-but-has-no", "title": "Capybara/Selenium - Is there a way to click a link that was isolated but has no unique identifier or content?", "body": "<p>I'm trying to click a link with <strong>Capyabara/Selenium</strong>. </p>\n\n<p>It's a pin link on a Bing map, <a href=\"http://www.astonmartin.com/en/dealers\" rel=\"nofollow\">example can be found here</a>.</p>\n\n<p>I can iterate through the 161 links with the <code>all(\u2026).each</code>:</p>\n\n<pre><code>within(\".map\") do\n  all(\"a.dealer-pin\").each do |link|\n    click_link(link)\n  end\nend\n</code></pre>\n\n<p>But the <code>click_link(link)</code> throws an error:</p>\n\n<pre><code>Capybara::ElementNotFound: \nUnable to find link \n#&lt;Capybara::Node::Element tag=\"a\" \npath=\"/html/body/form/article/div/div/section/div[2]/div/div[2]/div/div[2]/div[2]/div[3]/div/a[1]\"&gt;\n</code></pre>\n\n<p><strong>Those links have neither a unique identifier nor a content (image tag) that is unique or has a unique identifier.</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hyperlink"], "answers": [{"tags": [], "owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "is_accepted": false, "score": 4, "last_activity_date": 1459959342, "creation_date": 1459959342, "answer_id": 36456701, "question_id": 36456594, "link": "https://stackoverflow.com/questions/36456594/how-link-to-works-in-rails/36456701#36456701", "title": "How link_to works in rails?", "body": "<p>You have a syntax error. This:</p>\n\n<pre><code>&lt;%= link to 'New User', new user path %&gt;\n</code></pre>\n\n<p>Should be:</p>\n\n<pre><code>&lt;%= link_to 'New User', new_user_path %&gt;\n</code></pre>\n\n<p>The paths are rails 'helpers.' Start here: <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow\">http://guides.rubyonrails.org/routing.html</a></p>\n\n<p>They are basically shortcut methods that point to a particular url. These urls are defined in your routes.rb file.</p>\n"}, {"tags": [], "owner": {"reputation": 438, "user_id": 716185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29912acf4124f78d29de7a0f5adf89d0?s=128&d=identicon&r=PG", "display_name": "amalrik maia", "link": "https://stackoverflow.com/users/716185/amalrik-maia"}, "is_accepted": false, "score": 1, "last_activity_date": 1459966306, "last_edit_date": 1459966306, "creation_date": 1459959630, "answer_id": 36456806, "question_id": 36456594, "link": "https://stackoverflow.com/questions/36456594/how-link-to-works-in-rails/36456806#36456806", "title": "How link_to works in rails?", "body": "<pre><code>&lt;h1&gt;Listing users&lt;/h1&gt;\n&lt;table&gt;\n&lt;tr&gt;\n&lt;th&gt;Name&lt;/th&gt;\n&lt;th&gt;Email&lt;/th&gt;\n&lt;th&gt;&lt;/th&gt;\n&lt;th&gt;&lt;/th&gt;\n&lt;th&gt;&lt;/th&gt;\n&lt;/tr&gt;\n&lt;% @users.each do |user| %&gt;\n&lt;tr&gt;\n&lt;td&gt;&lt;%= user.name %&gt;&lt;/td&gt;\n&lt;td&gt;&lt;%= user.email %&gt;&lt;/td&gt;\n&lt;td&gt;&lt;%= link_to 'Show', user %&gt;&lt;/td&gt;\n&lt;td&gt;&lt;%= link_to 'Edit', edit_user_path(user) %&gt;&lt;/td&gt;\n&lt;td&gt;&lt;%= link_to 'Destroy', user, confirm: 'Are you sure?',\nmethod: :delete %&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;% end %&gt;\n&lt;/table&gt;\n&lt;br /&gt;\n&lt;%= link_to 'New User', new_user_path %&gt;\n</code></pre>\n\n<p><code>link_to</code> doesn't know anything about paths or URLs. \nThe URLs are generated by Rails' routing helpers like:</p>\n\n<ul>\n<li><code>edit_user_path()</code></li>\n<li><code>new_user_path</code></li>\n</ul>\n\n<p>To see the complete listing of routes go to your terminal and type:</p>\n\n<pre><code>bundle exec rake routes\n</code></pre>\n\n<p>See the <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow\">routing documentation</a> for more information.</p>\n"}], "owner": {"reputation": 43, "user_id": 5720663, "user_type": "registered", "profile_image": "https://graph.facebook.com/945240052234645/picture?type=large", "display_name": "Sandeep Gupta", "link": "https://stackoverflow.com/users/5720663/sandeep-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 475, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1459966306, "creation_date": 1459959066, "last_edit_date": 1459960481, "question_id": 36456594, "link": "https://stackoverflow.com/questions/36456594/how-link-to-works-in-rails", "title": "How link_to works in rails?", "body": "<p>I am a beginner in Ruby on Rails and following The rails tutorial by Michael Hartl's. In chapter 2, I am stuck at the following code in the part where <code>link_to</code> has been used. How does link_to knows which link_to point to, when we haven't explicitly written any URL?</p>\n\n<pre><code>&lt;h1&gt;Listing users&lt;/h1&gt;\n    &lt;table&gt;\n    &lt;tr&gt;\n    &lt;th&gt;Name&lt;/th&gt;\n    &lt;th&gt;Email&lt;/th&gt;\n    &lt;th&gt;&lt;/th&gt;\n    &lt;th&gt;&lt;/th&gt;\n    &lt;th&gt;&lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;% @users.each do |user| %&gt;\n    &lt;tr&gt;\n    &lt;td&gt;&lt;%= user.name %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= user.email %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= link_to 'Show', user %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= link_to 'Edit', edit_user_path(user) %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= link_to 'Destroy', user, confirm: 'Are you sure?',\n    method: :delete %&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n    &lt;% end %&gt;\n    &lt;/table&gt;\n    &lt;br /&gt;\n    &lt;%= link_to 'New User', new_user_path %&gt;\n</code></pre>\n\n<p>Thanks everyone. Somehow I can't comment because JavaScript has been failed to load. Thanks amalrik maia for providing the link.</p>\n\n<p>Solution:\n<a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow\">http://guides.rubyonrails.org/routing.html</a></p>\n\n<p>2.3 Path and URL Helpers</p>\n\n<p>Creating a resourceful route will also expose a number of helpers to the controllers in your application. </p>\n\n<p>In the case of resources :photos:</p>\n\n<p>photos_path returns /photos</p>\n\n<p>new_photo_path returns /photos/new</p>\n\n<p>edit_photo_path(:id) returns /photos/:id/edit (for instance, edit_photo_path(10) returns /photos/10/edit)</p>\n\n<p>photo_path(:id) returns /photos/:id (for instance, photo_path(10) returns /photos/10)</p>\n\n<p>Each of these helpers has a corresponding _url helper (such as photos_url) which returns the same path prefixed with the current host, port and path prefix.</p>\n"}, {"tags": ["html", "ruby", "watir", "watir-webdriver", "page-object-gem"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1459961619, "post_id": 36456054, "comment_id": 60527325, "body": "You might be able to use the <code>parent</code> method to move up (and then down) the DOM.  Check out this blogpost: <a href=\"https://jkotests.wordpress.com/2013/06/20/locating-an-element-based-on-its-siblings/\" rel=\"nofollow noreferrer\">jkotests.wordpress.com/2013/06/20/&hellip;</a>"}, {"owner": {"reputation": 190, "user_id": 3618081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jCF0i.png?s=128&g=1", "display_name": "Mayshar", "link": "https://stackoverflow.com/users/3618081/mayshar"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1459962183, "post_id": 36456054, "comment_id": 60527656, "body": "Ive read that, and moving thru a table is easy, the trouble im having is making sure its ONLY confirming the span specific to the input field. Xpath seems to have a way to do this. Ill post an answer of how i got it to work, and see if anyone has a better solution."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1459962277, "post_id": 36456054, "comment_id": 60527724, "body": "@orde, I also have a <a href=\"https://jkotests.wordpress.com/2013/08/21/locate-a-sibling-from-a-watir-element/\" rel=\"nofollow noreferrer\">post on locating sibling elements</a>."}, {"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1460047868, "post_id": 36456054, "comment_id": 60574665, "body": "this is a good example of where things could be made easier by getting your developers to add an attribute you can use to find the specific error message.  Or maybe restructure to make it a sibling of the select list, so it is a consistent pattern as with other error messages.   Might be worth bringing this to their attention and see what could be done to make it cleaner/easier"}, {"owner": {"reputation": 190, "user_id": 3618081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jCF0i.png?s=128&g=1", "display_name": "Mayshar", "link": "https://stackoverflow.com/users/3618081/mayshar"}, "edited": false, "score": 0, "creation_date": 1460048840, "post_id": 36456054, "comment_id": 60575164, "body": "Yea, that was the first thing done, but because of styling on the select list, they could be under the same div(at least thats what i was told) and as for adding a unique id to each message..well..that requires someone else to do more work. :)"}], "answers": [{"comments": [{"owner": {"reputation": 190, "user_id": 3618081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jCF0i.png?s=128&g=1", "display_name": "Mayshar", "link": "https://stackoverflow.com/users/3618081/mayshar"}, "edited": false, "score": 0, "creation_date": 1459963088, "post_id": 36457699, "comment_id": 60528240, "body": "This is basically what I ended up doing and it seems to work. I used &quot;prop_type_element.parent.span_element(:xpath =&gt; &#39;./following-sibling::span[1]&#39;).visible?&quot; Im not sure how your one line example finds the correct parent."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 190, "user_id": 3618081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jCF0i.png?s=128&g=1", "display_name": "Mayshar", "link": "https://stackoverflow.com/users/3618081/mayshar"}, "edited": false, "score": 0, "creation_date": 1459963292, "post_id": 36457699, "comment_id": 60528389, "body": "In XPath, the parent can be retrieved by the &#39;..&#39;"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 190, "user_id": 3618081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jCF0i.png?s=128&g=1", "display_name": "Mayshar", "link": "https://stackoverflow.com/users/3618081/mayshar"}, "edited": false, "score": 0, "creation_date": 1459963367, "post_id": 36457699, "comment_id": 60528437, "body": "Is the <code>yp-field-error</code> attribute on the span unique? That might be a better solution and avoid having to build a complicated traversal. For example, I would guess that <code>browser.span(xpath: &#39;&#47;&#47;span[@yp-field-error=&quot;editorForm.additionalPropertyType&quot;]&zwnj;&#8203;&#39;)</code> might be sufficient."}, {"owner": {"reputation": 190, "user_id": 3618081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jCF0i.png?s=128&g=1", "display_name": "Mayshar", "link": "https://stackoverflow.com/users/3618081/mayshar"}, "edited": false, "score": 0, "creation_date": 1459965376, "post_id": 36457699, "comment_id": 60529728, "body": "It should be unique yes. each one has the input field name there. Im not very familiar with xpath, didnt know I could use that attribute in an xpath. That would give the span a unique identifier to search for."}, {"owner": {"reputation": 190, "user_id": 3618081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jCF0i.png?s=128&g=1", "display_name": "Mayshar", "link": "https://stackoverflow.com/users/3618081/mayshar"}, "edited": false, "score": 0, "creation_date": 1459966130, "post_id": 36457699, "comment_id": 60530182, "body": "Yes, the solution above also seems to work and is a tad bit cleaner. You can update your answer if you wish."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 190, "user_id": 3618081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jCF0i.png?s=128&g=1", "display_name": "Mayshar", "link": "https://stackoverflow.com/users/3618081/mayshar"}, "edited": false, "score": 0, "creation_date": 1459966713, "post_id": 36457699, "comment_id": 60530538, "body": "@Mayshar, I updated the answer to include that example, as well as an even cleaner solution (ie without XPath)."}, {"owner": {"reputation": 190, "user_id": 3618081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jCF0i.png?s=128&g=1", "display_name": "Mayshar", "link": "https://stackoverflow.com/users/3618081/mayshar"}, "edited": false, "score": 0, "creation_date": 1459968098, "post_id": 36457699, "comment_id": 60531368, "body": "Accepted new answer. Oh, I also wasnt aware it was that easy to add an attribute to search by. Thats Awesome!!"}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 4, "last_activity_date": 1459966646, "last_edit_date": 1459966646, "creation_date": 1459962134, "answer_id": 36457699, "question_id": 36456054, "link": "https://stackoverflow.com/questions/36456054/need-help-locating-a-sibling-element-error-message-to-a-specific-select-list/36457699#36457699", "title": "Need help locating a sibling element error message to a specific select list", "body": "<p><strong>Traversing to Sibling</strong></p>\n\n<p>You can get the sibling of an element by using XPath with <code>following-sibling</code> or <code>preceding-sibling</code>. </p>\n\n<p>In this case, you are trying to find the following span relative to the div:</p>\n\n<pre><code>select_list = browser.select(name: 'additionalPropertyType')\nparent_div = select_list.parent\nsibling_span = parent_div.span(:xpath =&gt; './following-sibling::span')\nsibling_span.text\n#=&gt; Please provide an Additional Property Type.\n</code></pre>\n\n<p>You can combine all of these calls into a single XPath. This will improve performance, but possibly at the cost of code readability.</p>\n\n<pre><code>browser.span(xpath: '//select[@name=\"additionalPropertyType\"]/../following-sibling::span').text\n#=&gt; Please provide an Additional Property Type.\n</code></pre>\n\n<p><strong>Using Unique yp-field-error Attribute</strong></p>\n\n<p>Given that the <code>yp-field-error</code> attribute on the <code>span</code> is unique, you can avoid the above complicated traversal. As this is non-standard HTML attribute, you will need to use XPath or CSS:</p>\n\n<pre><code># Using XPath:\nbrowser.span(xpath: '//span[@yp-field-error=\"editorForm.additionalPropertyType\"]').text\n\n# Using CSS:\nbrowser.span(css: 'span[yp-field-error=\"editorForm.additionalPropertyType\"]').text\n</code></pre>\n\n<p>Given that you have multiple select lists like this, you should add <code>yp_field_error</code> to the searchable attributes. This will allow you to write the usual locators without XPath/CSS. Update where you require Watir-Webdriver to be:</p>\n\n<pre><code>require 'watir-webdriver'\nWatir::HTMLElement.attributes &lt;&lt; :yp_field_error\n</code></pre>\n\n<p>Your code for finding the element then simply becomes:</p>\n\n<pre><code>browser.span(yp_field_error: 'editorForm.additionalPropertyType').text\n</code></pre>\n"}], "owner": {"reputation": 190, "user_id": 3618081, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jCF0i.png?s=128&g=1", "display_name": "Mayshar", "link": "https://stackoverflow.com/users/3618081/mayshar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 36457699, "answer_count": 1, "score": 1, "last_activity_date": 1459966646, "creation_date": 1459957612, "question_id": 36456054, "link": "https://stackoverflow.com/questions/36456054/need-help-locating-a-sibling-element-error-message-to-a-specific-select-list", "title": "Need help locating a sibling element error message to a specific select list", "body": "<p>I have a form with inputs that are usually dependents of divs. Under that div is also a span which will show an error message if the field is required but left empty. </p>\n\n<p>However, on select lists, the span isnt under the same div as the input, its a sibling element to the div. </p>\n\n<p>I am trying to write a test to verify the error message appears on the appropriate input if it is left blank, it was fairly easy on the other inputs as the are under the same parent, but with the select lists, I cant figure out how to confirm the span for the select list shows since its not under the same div as the select list input. Here is an html example of what im dealing with:</p>\n\n<pre><code>&lt;form name=\"editorForm\" novalidate=\"\" class=\"ng-invalid ng-invalid-required ng-dirty ng-valid-parse\" style=\"\"&gt;\n\n   &lt;div class=\"select icon-arrow-down ng-scope\" ng-if=\"!isCurrentSectionReadOnly\"&gt;\n        &lt;select name=\"additionalPropertyType\" ng-model=\"additionalPropertyCtrl.selectedExposure.additionalPropertyTypeExternalId\" ng-options=\"additionalPropertyType.value as additionalPropertyType.text for additionalPropertyType in additionalPropertyCtrl.additionalPropertyTypes\" required=\"\" class=\"ng-pristine ng-invalid ng-invalid-required ng-touched\" style=\"\"&gt;\n\n   &lt;span form-submitted=\"additionalPropertyCtrl.editorSaveAttempted\" yp-field-error=\"editorForm.additionalPropertyType\" class=\"ng-isolate-scope field-validation-error\"&gt;\n       &lt;span name=\"errorMessage\" class=\"\"&gt;Please provide an Additional Property Type.&lt;/span&gt;&lt;/span&gt;\n\n &lt;/form&gt;\n</code></pre>\n\n<p>The span in the example should only be visible when the select list from the previous div is submitted while blank. <strong>How do i verify this specific span is visible without using something brittle such as text or indexing? Is there a way to verify some kind of sibling relationship?</strong></p>\n\n<p>I need a way to confirm the span specific to the select list from the div above it is visible and not just that a span like this is visible as the form may have more then one instance of this and each span has the same name. I want to avoid using specific text(as it may change) or index(also may change) </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "firebird"], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 6029329, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7b60bb6f81924ab25acdc285d3d2ba02?s=128&d=identicon&r=PG&f=1", "display_name": "KacperM", "link": "https://stackoverflow.com/users/6029329/kacperm"}, "edited": false, "score": 0, "creation_date": 1460006900, "post_id": 36455552, "comment_id": 60545878, "body": "This is also my question :)"}], "tags": [], "owner": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "is_accepted": false, "score": 1, "last_activity_date": 1459956276, "creation_date": 1459956276, "answer_id": 36455552, "question_id": 36455334, "link": "https://stackoverflow.com/questions/36455334/firebird-database-with-rails-app/36455552#36455552", "title": "Firebird database with rails app", "body": "<p>You're not the only one having this issue apparently: <a href=\"https://github.com/rowland/activerecord-fb-adapter/issues/67\" rel=\"nofollow\">https://github.com/rowland/activerecord-fb-adapter/issues/67</a>. Seems to be a gem issue.</p>\n"}, {"tags": [], "owner": {"reputation": 75, "user_id": 6029329, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7b60bb6f81924ab25acdc285d3d2ba02?s=128&d=identicon&r=PG&f=1", "display_name": "KacperM", "link": "https://stackoverflow.com/users/6029329/kacperm"}, "is_accepted": true, "score": 0, "last_activity_date": 1460009105, "creation_date": 1460009105, "answer_id": 36467899, "question_id": 36455334, "link": "https://stackoverflow.com/questions/36455334/firebird-database-with-rails-app/36467899#36467899", "title": "Firebird database with rails app", "body": "<p>Ok i just reinstall my ruby do everything from the begining (i need to move fbclient.dll from firebird install folder to Disk:ruby/bin) and now everything works great :)</p>\n"}], "owner": {"reputation": 75, "user_id": 6029329, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7b60bb6f81924ab25acdc285d3d2ba02?s=128&d=identicon&r=PG&f=1", "display_name": "KacperM", "link": "https://stackoverflow.com/users/6029329/kacperm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 368, "favorite_count": 0, "accepted_answer_id": 36467899, "answer_count": 2, "score": 1, "last_activity_date": 1460009105, "creation_date": 1459955740, "question_id": 36455334, "link": "https://stackoverflow.com/questions/36455334/firebird-database-with-rails-app", "title": "Firebird database with rails app", "body": "<p>When i execute <code>rake db:schema:dump</code> i get in schema.rb:\n<em>Could not dump table \"xxx\" because of following NoMethodError<br>\nundefined method `limit' for \"INTEGER\":String</em></p>\n\n<p>This is problem with app because on new database i got this same error.\nIm using flamerobin and i need to use it for creating db.</p>\n\n<p>Im using <a href=\"https://github.com/rowland/activerecord-fb-adapter\" rel=\"nofollow\">https://github.com/rowland/activerecord-fb-adapter</a> to connect to my db.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "spree"], "comments": [{"owner": {"reputation": 1116, "user_id": 4122847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Bhoo3PIj7w/AAAAAAAAAAI/AAAAAAAAAF4/OEnQcnM3iI0/photo.jpg?sz=128", "display_name": "Abdoo Dev", "link": "https://stackoverflow.com/users/4122847/abdoo-dev"}, "edited": false, "score": 0, "creation_date": 1459956143, "post_id": 36455095, "comment_id": 60523424, "body": "can you display the controller method related to your index page (where the products exists)  ?"}, {"owner": {"reputation": 1772, "user_id": 3733369, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tKoY4.jpg?s=128&g=1", "display_name": "Rcordoval", "link": "https://stackoverflow.com/users/3733369/rcordoval"}, "reply_to_user": {"reputation": 1116, "user_id": 4122847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Bhoo3PIj7w/AAAAAAAAAAI/AAAAAAAAAF4/OEnQcnM3iI0/photo.jpg?sz=128", "display_name": "Abdoo Dev", "link": "https://stackoverflow.com/users/4122847/abdoo-dev"}, "edited": false, "score": 0, "creation_date": 1459957193, "post_id": 36455095, "comment_id": 60524226, "body": "Just added it. At the bottom"}], "answers": [{"comments": [{"owner": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "reply_to_user": {"reputation": 1772, "user_id": 3733369, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tKoY4.jpg?s=128&g=1", "display_name": "Rcordoval", "link": "https://stackoverflow.com/users/3733369/rcordoval"}, "edited": false, "score": 0, "creation_date": 1459956068, "post_id": 36455251, "comment_id": 60523376, "body": "Do you have a file called <code>_products.html.erb</code> in <code>&#47;app&#47;views&#47;spree&#47;shared&#47;</code>? If so, could we see it?"}, {"owner": {"reputation": 1772, "user_id": 3733369, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tKoY4.jpg?s=128&g=1", "display_name": "Rcordoval", "link": "https://stackoverflow.com/users/3733369/rcordoval"}, "edited": false, "score": 0, "creation_date": 1459956650, "post_id": 36455251, "comment_id": 60523810, "body": "<code>def show       @taxon = Taxon.friendly.find(params[:id])       return unless @taxon        @searcher = build_searcher(params.merge(taxon: @taxon.id, include_images: true))       @products = @searcher.retrieve_products       @taxonomies = Spree::Taxonomy.includes(root: :children)     end</code>"}, {"owner": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "reply_to_user": {"reputation": 1772, "user_id": 3733369, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tKoY4.jpg?s=128&g=1", "display_name": "Rcordoval", "link": "https://stackoverflow.com/users/3733369/rcordoval"}, "edited": false, "score": 0, "creation_date": 1459956804, "post_id": 36455251, "comment_id": 60523916, "body": "You should <code>binding.pry</code> before the <code>@products</code> part and see if it returns something, cause I suspect it to be empty."}], "tags": [], "owner": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "is_accepted": false, "score": 0, "last_activity_date": 1459956390, "last_edit_date": 1459956390, "creation_date": 1459955537, "answer_id": 36455251, "question_id": 36455095, "link": "https://stackoverflow.com/questions/36455095/cant-display-all-products/36455251#36455251", "title": "Can&#39;t display all products", "body": "<p>First of, your file should be called <code>_products.html.erb</code>.</p>\n\n<blockquote>\n  <p>But it still says \"No products found\"</p>\n</blockquote>\n\n<p>Second, could you please show us this file?</p>\n\n<blockquote>\n  <p>But in my index they are showed.</p>\n</blockquote>\n\n<p>Could you also show us how you render your products in your index?</p>\n\n<p>EDIT: It seems like in <code>Taxons#show</code>, the <code>@products</code> instance variable is not set. Check if you set it in the show action in your <code>TaxonsController</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 1772, "user_id": 3733369, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tKoY4.jpg?s=128&g=1", "display_name": "Rcordoval", "link": "https://stackoverflow.com/users/3733369/rcordoval"}, "edited": false, "score": 0, "creation_date": 1459956817, "post_id": 36455701, "comment_id": 60523924, "body": "<code>@searcher =build_searcher(build_searcher(params.merge(include_images: true)))</code>"}], "tags": [], "owner": {"reputation": 1116, "user_id": 4122847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Bhoo3PIj7w/AAAAAAAAAAI/AAAAAAAAAF4/OEnQcnM3iI0/photo.jpg?sz=128", "display_name": "Abdoo Dev", "link": "https://stackoverflow.com/users/4122847/abdoo-dev"}, "is_accepted": true, "score": 2, "last_activity_date": 1459956852, "last_edit_date": 1459956852, "creation_date": 1459956669, "answer_id": 36455701, "question_id": 36455095, "link": "https://stackoverflow.com/questions/36455095/cant-display-all-products/36455701#36455701", "title": "Can&#39;t display all products", "body": "<p>Go to <code>spree/frontend/app/controllers/spree/taxons_controller.rb</code></p>\n\n<p>make the <code>show</code> method look like this</p>\n\n<pre><code>    def show\n      @taxon = Taxon.friendly.find(params[:id])\n      return unless @taxon\n\n      @searcher = build_searcher(params.merge(include_images: true))\n      @products = @searcher.retrieve_products\n      @taxonomies = Spree::Taxonomy.includes(root: :children)\n    end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 8556206, "user_type": "registered", "profile_image": "https://graph.facebook.com/470717279964518/picture?type=large", "display_name": "Leo Wang", "link": "https://stackoverflow.com/users/8556206/leo-wang"}, "is_accepted": false, "score": -1, "last_activity_date": 1504481355, "creation_date": 1504481355, "answer_id": 46028667, "question_id": 36455095, "link": "https://stackoverflow.com/questions/36455095/cant-display-all-products/46028667#46028667", "title": "Can&#39;t display all products", "body": "<p>Actually I am looking for an answer to \"No products found\"\nHere is my question link:\nSpree Commerce: No Products Found \n<a href=\"https://stackoverflow.com/q/46028566/8556206?sem=2\">Spree Commerce: No Products Found</a></p>\n\n<p>I have just joined stackoverflow.com a couple of minutes, can't add a comment to above answers.</p>\n\n<p>Here is /controllers/spree/taxons_controller.rb:</p>\n\n<pre><code>module Spree\n</code></pre>\n\n<p>class TaxonsController &lt; Spree::StoreController\n    rescue_from ActiveRecord::RecordNotFound, with: :render_404\n    helper 'spree/products'</p>\n\n<pre><code>respond_to :html\n\ndef show\n  @taxon = Taxon.friendly.find(params[:id])\n  return unless @taxon\n\n  @searcher = build_searcher(params.merge(taxon: @taxon.id, include_images: true))\n\n  sorting_scope = params[:order].try(:to_sym) || :ascend_by_updated_at\n\n  @taxonomies = Spree::Taxonomy.includes(root: :children)\n\n  @searcher.retrieve_products\n\n  @products = @searcher.retrieve_products\n\n\n\n  @curr_page = params[:page] || 1\n  @products_per_page = Spree::Config.products_per_page\n\n  @start_no = @curr_page == 1 ? 1 : ((@curr_page.to_i-1)*@products_per_page)+1\n\n  @end_no = @products.length\n\n  if @curr_page.to_i &gt; 1\n     @end_no = ( (@curr_page.to_i-1)*@products_per_page) + @end_no\n  end\n\n # @end_no = @product_count &lt;= @product_count ? @product_count : @products.length+(@curr_page.to_i-1)*@products_per_page\n\nend\n\nprivate\n\ndef accurate_title\n  @taxon.try(:seo_title) || super\nend\n</code></pre>\n\n<p>end\nend</p>\n"}], "owner": {"reputation": 1772, "user_id": 3733369, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/tKoY4.jpg?s=128&g=1", "display_name": "Rcordoval", "link": "https://stackoverflow.com/users/3733369/rcordoval"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 542, "favorite_count": 0, "accepted_answer_id": 36455701, "answer_count": 3, "score": 1, "last_activity_date": 1504481355, "creation_date": 1459955144, "last_edit_date": 1460051597, "question_id": 36455095, "link": "https://stackoverflow.com/questions/36455095/cant-display-all-products", "title": "Can&#39;t display all products", "body": "<p>i'm working on a Rails application with Spree Commerce.</p>\n\n<p>I'm trying to display <strong>all products</strong> in a <strong>taxon</strong> cause i'm using them not as category but as some kind of registry.</p>\n\n<p>So, i'm editing /app/views/spree/taxons/show.html.erb. Especifically this line:</p>\n\n<pre><code>&lt;%= render partial: 'spree/shared/products', locals: { products: @products, taxon: @taxon } %&gt;\n</code></pre>\n\n<p>Changing it for:</p>\n\n<pre><code>&lt;%= render :partial =&gt; 'spree/shared/products', :locals =&gt; { :products =&gt; @products } %&gt;\n</code></pre>\n\n<p>But it still says \"No products found\". But in my index they are showed.</p>\n\n<p>So, How can I properly show all products?</p>\n\n<p>Thanks in advance.</p>\n\n<pre><code>ruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-linux]\nRails 4.2.5\nSpree 3.0.4\n</code></pre>\n\n<p>As requested:</p>\n\n<p>1) This is the show from products</p>\n\n<pre><code>&lt;% @body_id = 'product-details' %&gt;\n\n&lt;% cache [I18n.locale, current_currency, @product, @product.possible_promotions] do %&gt;\n  &lt;div data-hook=\"product_show\" itemscope itemtype=\"https://schema.org/Product\"&gt;\n    &lt;div class=\"col-md-4\" data-hook=\"product_left_part\"&gt;\n      &lt;div data-hook=\"product_left_part_wrap\"&gt;\n        &lt;div id=\"product-images\" data-hook=\"product_images\"&gt;\n          &lt;div id=\"main-image\" class=\"panel panel-default\" data-hook&gt;\n            &lt;div class=\"panel-body text-center\"&gt;\n              &lt;%= render :partial =&gt; 'image' %&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n          &lt;div id=\"thumbnails\" data-hook&gt;\n            &lt;%= render :partial =&gt; 'thumbnails' %&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n\n        &lt;div data-hook=\"product_properties\"&gt;\n          &lt;%= render :partial =&gt; 'properties' %&gt;\n        &lt;/div&gt;\n\n        &lt;div data-hook=\"promotions\"&gt;\n          &lt;%= render :partial =&gt; 'promotions' %&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"col-md-8\" data-hook=\"product_right_part\"&gt;\n      &lt;div data-hook=\"product_right_part_wrap\"&gt;\n        &lt;div id=\"product-description\" data-hook=\"product_description\"&gt;\n          &lt;h1 class=\"product-title\" itemprop=\"name\"&gt;&lt;%= @product.name %&gt;&lt;/h1&gt;\n\n          &lt;div class=\"well\" itemprop=\"description\" data-hook=\"description\"&gt;\n            &lt;%= product_description(@product) rescue Spree.t(:product_has_no_description) %&gt;\n          &lt;/div&gt;\n\n          &lt;div id=\"cart-form\" data-hook=\"cart_form\"&gt;\n            &lt;%= render :partial =&gt; 'cart_form' %&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n\n        &lt;%= render :partial =&gt; 'taxons' %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>2) Show from taxons</p>\n\n<pre><code>&lt;h1 class=\"taxon-title\"&gt;&lt;%= @taxon.name %&gt;&lt;/h1&gt;\n\n&lt;% content_for :sidebar do %&gt;\n  &lt;div data-hook=\"taxon_sidebar_navigation\"&gt;\n    &lt;%= render partial: 'spree/shared/taxonomies' %&gt;\n    &lt;%= render partial: 'spree/shared/filters' if @taxon.leaf? %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n\n&lt;div data-hook=\"taxon_products\"&gt;\n  &lt;%= render partial: 'spree/shared/products', locals: { products: @products, taxon: @taxon } %&gt;\n&lt;/div&gt;\n\n&lt;% unless params[:keywords].present? %&gt;\n  &lt;div data-hook=\"taxon_children\"&gt;\n    &lt;% cache [I18n.locale, @taxon] do %&gt;\n      &lt;%= render partial: 'taxon', collection: @taxon.children %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>3) This is how I render in my index</p>\n\n<pre><code>&lt;div data-hook=\"homepage_products\"&gt;\n  &lt;% cache(cache_key_for_products) do %&gt;\n    &lt;%= render :partial =&gt; 'spree/shared/products', :locals =&gt; { :products =&gt; @products } %&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>4) _products.html.erb</p>\n\n<pre><code>&lt;%\n  paginated_products = @searcher.retrieve_products if params.key?(:keywords)\n  paginated_products ||= products\n%&gt;\n\n&lt;% content_for :head do %&gt;\n  &lt;% if paginated_products.respond_to?(:num_pages) %&gt;\n    &lt;%= rel_next_prev_link_tags paginated_products %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n\n&lt;div data-hook=\"products_search_results_heading\"&gt;\n  &lt;% if products.empty? %&gt;\n    &lt;div data-hook=\"products_search_results_heading_no_results_found\"&gt;\n      &lt;%= Spree.t(:no_products_found) %&gt;\n    &lt;/div&gt;\n  &lt;% elsif params.key?(:keywords) %&gt;\n    &lt;div data-hook=\"products_search_results_heading_results_found\"&gt;\n      &lt;h6 class=\"search-results-title\"&gt;&lt;%= Spree.t(:search_results, keywords: h(params[:keywords])) %&gt;&lt;/h6&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n\n&lt;% if products.any? %&gt;\n  &lt;div id=\"products\" class=\"row\" data-hook&gt;\n    &lt;% products.each do |product| %&gt;\n      &lt;% url = spree.product_url(product, taxon_id: @taxon.try(:id)) %&gt;\n      &lt;div id=\"product_&lt;%= product.id %&gt;\" class=\"col-md-3 col-sm-6 product-list-item\" data-hook=\"products_list_item\" itemscope itemtype=\"https://schema.org/Product\"&gt;\n        &lt;div class=\"panel panel-default\"&gt;\n          &lt;% cache(@taxon.present? ? [I18n.locale, current_currency, @taxon, product] : [I18n.locale, current_currency, product]) do %&gt;\n            &lt;div class=\"panel-body text-center product-body\"&gt;\n              &lt;%= link_to small_image(product, itemprop: \"image\"), url, itemprop: 'url' %&gt;&lt;br/&gt;\n              &lt;%= link_to truncate(product.name, length: 50), url, class: 'info', itemprop: \"name\", title: product.name %&gt;\n            &lt;/div&gt;\n            &lt;div class=\"panel-footer text-center\"&gt;\n              &lt;span itemprop=\"offers\" itemscope itemtype=\"https://schema.org/Offer\"&gt;\n                &lt;span class=\"price selling lead\" itemprop=\"price\"&gt;&lt;%= display_price(product) %&gt;&lt;/span&gt;\n              &lt;/span&gt;\n            &lt;/div&gt;\n          &lt;% end %&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;% end %&gt;\n    &lt;% reset_cycle(\"classes\") %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n\n&lt;% if paginated_products.respond_to?(:num_pages) %&gt;\n  &lt;%= paginate paginated_products, theme: 'twitter-bootstrap-3' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Controller index:</p>\n\n<pre><code>module Spree\n  class HomeController &lt; Spree::StoreController\n    helper 'spree/products'\n    respond_to :html\n\n    def index\n      @searcher = build_searcher(params.merge(include_images: true))\n      @products = @searcher.retrieve_products\n      @taxonomies = Spree::Taxonomy.includes(root: :children)\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv", "ruby-on-rails-4", "rails-postgresql"], "comments": [{"owner": {"reputation": 529, "user_id": 694560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/409676c46084830ea7fbfbd7a736318d?s=128&d=identicon&r=PG", "display_name": "Jozef Vaclavik", "link": "https://stackoverflow.com/users/694560/jozef-vaclavik"}, "edited": false, "score": 0, "creation_date": 1459961746, "post_id": 36454812, "comment_id": 60527409, "body": "Could you post your database.yml file? Also do you import csv in background or directly inside of a controller?"}, {"owner": {"reputation": 285, "user_id": 2970050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6ebb92674288a036a7df33655b85eec0?s=128&d=identicon&r=PG&f=1", "display_name": "user2970050", "link": "https://stackoverflow.com/users/2970050/user2970050"}, "reply_to_user": {"reputation": 529, "user_id": 694560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/409676c46084830ea7fbfbd7a736318d?s=128&d=identicon&r=PG", "display_name": "Jozef Vaclavik", "link": "https://stackoverflow.com/users/694560/jozef-vaclavik"}, "edited": false, "score": 0, "creation_date": 1460049502, "post_id": 36454812, "comment_id": 60575535, "body": "Hi. I added the database.yml.  The User is in the App - clicks on File Upload  (from controller) which then kicks of the worker."}, {"owner": {"reputation": 518, "user_id": 2130053, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RpKRC.jpg?s=128&g=1", "display_name": "Patrick O&#39;Grady", "link": "https://stackoverflow.com/users/2130053/patrick-ogrady"}, "edited": false, "score": 0, "creation_date": 1460146247, "post_id": 36454812, "comment_id": 60623887, "body": "The worker calls csv_file.import!. Can you post the csv_file model?"}], "answers": [{"comments": [{"owner": {"reputation": 285, "user_id": 2970050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6ebb92674288a036a7df33655b85eec0?s=128&d=identicon&r=PG&f=1", "display_name": "user2970050", "link": "https://stackoverflow.com/users/2970050/user2970050"}, "edited": false, "score": 0, "creation_date": 1460049323, "post_id": 36456672, "comment_id": 60575433, "body": "Thanks for your answer as it provides alot of clarity.  For an individual row, this will make it more efficient.  But one thing that I don&#39;t understand is why  ENTIRE CONTACTS dbase is locked while the CSV file is being run?  shouldn&#39;t it just be locking the row &amp; associated contact?"}, {"owner": {"reputation": 285, "user_id": 2970050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6ebb92674288a036a7df33655b85eec0?s=128&d=identicon&r=PG&f=1", "display_name": "user2970050", "link": "https://stackoverflow.com/users/2970050/user2970050"}, "edited": false, "score": 0, "creation_date": 1460171486, "post_id": 36456672, "comment_id": 60630915, "body": "The issue was that the gem state-machine_active_record wraps every state transition inside a transaction by default.  The worker called the parsing service by running csv_file.import!, and triggered a transition on the csv_file state machine, then called CsvParsingService and parsed each row. Since state machine wrapped  everything inside a transaction, nothing committed until the state transition was complete.  By updating the gem to version 0.4.0pre, and adding the option use_transactions: false to the state machine in the CsvFile model, it no longer locks the database when processing."}], "tags": [], "owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "is_accepted": true, "score": 2, "last_activity_date": 1459959282, "creation_date": 1459959282, "answer_id": 36456672, "question_id": 36454812, "link": "https://stackoverflow.com/questions/36454812/csv-worker-is-locking-dbase/36456672#36456672", "title": "CSV Worker is locking dbase", "body": "<p>The full table lock probably has more to do with Postgres enforcing consistency to preserve referential integrity when applying an update across multiple tables.</p>\n\n<p>That said, there are many ways to improve your query from within Ruby/Rails. The <code>create</code> method can create multiple records at once if you pass it an array of Hash objects like so:</p>\n\n<pre><code>User.create([{email: \"joe@example.com\", name: \"Joe\"}, {email: \"Ann\", name: \"Steve\"}])\n</code></pre>\n\n<p>This won't completely dodge the issue of table locks, but should be more efficient.</p>\n\n<p>Also, use <code>find_each</code> instead of <code>each</code> when iteration over <code>ActiveRecord</code> collections. <code>find_each</code> will load collections in batches rather than loading all records at once, which can be much more efficient in memory.</p>\n"}], "owner": {"reputation": 285, "user_id": 2970050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/6ebb92674288a036a7df33655b85eec0?s=128&d=identicon&r=PG&f=1", "display_name": "user2970050", "link": "https://stackoverflow.com/users/2970050/user2970050"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 1, "accepted_answer_id": 36456672, "answer_count": 1, "score": 2, "last_activity_date": 1460056308, "creation_date": 1459954475, "last_edit_date": 1460056308, "question_id": 36454812, "link": "https://stackoverflow.com/questions/36454812/csv-worker-is-locking-dbase", "title": "CSV Worker is locking dbase", "body": "<p>Bit of a newbie and am completely baffled.  </p>\n\n<p>I have a worker that Imports CSV Contacts to save to the Contacts Table (prior to saving, it checks to see if it already exists based on phone or email (in that case, the Contact is not saved but the details are appended). </p>\n\n<p>While the code below logically works (CSV file will process correctly), when this is running the entire dbases get locked (so no User of the App can update (e.g. save a new contact via the app front end) while this job is running)</p>\n\n<p>So my question is this:  Why/What locks <strong>entire</strong> Contacts, Phone and Email dbases? Am I violating some principle of ruby on rails?  What do I need to do to fix this?</p>\n\n<p>key points:</p>\n\n<ul>\n<li><p>when we wrote this code (email and phone were part of the Contact\nModel) and it worked fine.  We then created them as children Models (as we had multiple emails &amp; phone numbers per Contact).  --- is it possible the array\nwithin array causes it to lock? </p></li>\n<li><p>When we first wrote the code, it would save after every smart row was\nchecked (and we could see it incrementing).  Now it seems to be\nsaving all the contacts after the full CSV file is processed.</p></li>\n<li><p>Something else altogether?</p></li>\n</ul>\n\n<p>WORKER:  </p>\n\n<pre><code>class ImportCsvFileWorker\n\n  def self.perform(csv_file_id)\n    csv_file = CsvFile.find(csv_file_id)\n\n    csv_file.import!\n    csv_file.send_report!   end\n\nend\n</code></pre>\n\n<p>class CsvParsingService</p>\n\n<pre><code>      attr_accessor :csv_file, :contact\n\n      def initialize(csv_file)\n        @csv_file = csv_file\n        @contact = nil\n      end\n\n      def perform\n        Rails.logger.info \"[CSV.parsing] Processing new csv file...\"\n        process_csv\n        csv_file.finish_import!\n      end\n\n      def process_csv\n        parser = ::ImportData::SmartCsvParser.new(csv_file.file_url)\n\n        parser.each do |smart_row|\n          csv_file.increment!(:total_parsed_records)\n          begin\n            self.contact = process_row(smart_row)\n          rescue =&gt; e\n            row_parse_error(smart_row, e)\n          end\n        end\n      rescue =&gt; e # parser error or unexpected error\n        csv_file.save_import_error(e)\n      end\n\n      private\n\n      def process_row(smart_row)\n        new_contact, existing_records = smart_row.to_contact\n        self.contact = ContactMergingService.new(csv_file.user, new_contact, existing_records).perform\n        init_contact_info self.contact\n\n        if contact_valid?\n          save_imported_contact(new_contact)\n        else\n          reject_imported_contact(new_contact, smart_row)\n        end\n      end\n\n      def contact_valid?\n        self.contact.first_name || self.contact.last_name ||\n          self.contact.email_addresses.first || self.contact.phone_numbers.first\n      end\n\n      def save_imported_contact(new_contact)\n        self.contact.save!\n        csv_file.increment!(:total_imported_records)\n        log_processed_contacts new_contact\n      end\n\n      def reject_imported_contact(new_contact, smart_row)\n        Rails.logger.info \"[CSV.parsing] Contact rejected. Missing name, email or phone number.\"\n        csv_file.increment!(:total_failed_records)\n        csv_file.invalid_records.create!(\n          original_row: smart_row.row.to_csv,\n          contact_errors: [\"Contact rejected. Missing name, email or phone number\"]\n        )\n        log_processed_contacts new_contact\n        false\n      end\n\n      def row_parse_error(smart_row, e)\n        csv_file.increment!(:total_failed_records)\n        csv_file.invalid_records.create!(\n          original_row: smart_row.row.to_csv,\n          contact_errors: contact.try(:errors).try(:full_messages)\n        )\n      end\n\n      def init_contact_info(contact)\n        unless contact.persisted?\n          contact.user = csv_file.user\n          contact.created_by_user = csv_file.user\n          contact.import_source = csv_file\n        end\n        contact.required_salutations_to_set = true # will be used for envelope/letter saluation\n      end\n\n      def log_processed_contacts(new_contact)\n        Rails.logger.info(\n          \"[CSV.parsing] Records parsed:: parsed: #{csv_file.total_parsed_records}\"\\\n            \" : imported: #{csv_file.total_imported_records} : failed: \"\\\n            \"#{csv_file.total_failed_records}\"\n        )\n        Rails.logger.info(\n          \"[CSV.parsing] Contact- New : #{new_contact.email_addresses.map(&amp;:email)}\"\\\n            \" : #{new_contact.first_name} : #{new_contact.last_name} \"\\\n            \"#{new_contact.phone_numbers.map(&amp;:number)} :: Old : \"\\\n            \"#{self.contact.email_addresses.map(&amp;:email)} :\"\\\n            \"#{self.contact.phone_numbers.map(&amp;:number)}\\n\"\n        )\n      end\n    end\n</code></pre>\n\n<p>The following is the Merge Service </p>\n\n<pre><code>class ContactMergingService\n\n  attr_reader :new_contact, :user\n\n  def initialize(user, new_contact, _existing_records)\n    @user = user\n    @new_contact = new_contact\n    @found_records = matching_emails_and_phone_numbers   end\n\n  def perform\n    Rails.logger.info \"[CSV.merging] Checking if new contact matches existing contact...\"\n    if (existing_contact = existing_contact())\n      Rails.logger.info \"[CSV.merging] Contact match found.\"\n      merge(existing_contact, new_contact)\n      existing_contact\n    else\n      Rails.logger.info \"[CSV.merging] No contact match found.\"\n      binding.pry\n      new_contact\n    end   end\n\n  private\n\n  def existing_contact\n    Rails.logger.info \"[CSV.merging] Found records: #{@found_records.inspect}\"\n    if @found_records.present?\n      @user.contacts.find @found_records.first.owner_id # Fetch first owner\n    end   end\n\n  def merge(existing_contact, new_contact)\n    Rails.logger.info \"[CSV.merging] Merging with existing contact (ID: #{existing_contact.id})...\"\n    merge_records(existing_contact, new_contact)   end\n\n  def merge_records(existing_relation, new_relation)\n    existing_relation.attributes do |field, value|\n      if value.blank? &amp;&amp; new_relation[field].present?\n        existing_relation[field] = new_relation[field]\n      end\n    end\n    new_relation.email_addresses.each do |email_address|\n      Rails.logger.info \"[CSV.merging.emails] Email: #{email_address.inspect}\"\n      if existing_relation.email_addresses.find_by(email: email_address.email)\n        Rails.logger.info \"[CSV.merging.emails] Email address exists.\"\n      else\n        Rails.logger.info \"[CSV.merging.emails] Email does not already exist. Saving...\"\n        email_address.owner = existing_relation\n        email_address.save!\n      end\n    end\n    new_relation.phone_numbers.each do |phone_number|\n      Rails.logger.info \"[CSV.merging.phone] Phone Number: #{phone_number.inspect}\"\n      if existing_relation.phone_numbers.find_by(number: phone_number.number)\n        Rails.logger.info \"[CSV.merging.phone] Phone number exists.\"\n      else\n        Rails.logger.info \"[CSV.merging.phone] Phone Number does not already exist. Saving...\"\n        phone_number.owner = existing_relation\n        phone_number.save!\n      end\n    end   end\n\n  def matching_emails_and_phone_numbers\n    records = []\n    if @user\n      records &lt;&lt; matching_emails\n      records &lt;&lt; matching_phone_numbers\n      Rails.logger.info \"[CSV.merging] merged records: #{records.inspect}\"\n      records.flatten!\n      Rails.logger.info \"[CSV.merging] flattened records: #{records.inspect}\"\n      records.compact!\n      Rails.logger.info \"[CSV.merging] compacted records: #{records.inspect}\"\n    end\n    records   end\n\n  def matching_emails\n    existing_emails = []\n    new_contact_emails = @new_contact.email_addresses\n    Rails.logger.info \"[CSV.merging] new_contact_emails: #{new_contact_emails.inspect}\"\n    new_contact_emails.each do |email|\n      Rails.logger.info \"[CSV.merging] Checking for a match on email: #{email.inspect}...\"\n      if existing_email = @user.contact_email_addresses.find_by(email: email.email, primary: email.primary)\n        Rails.logger.info \"[CSV.merging] Found a matching email\"\n        existing_emails &lt;&lt; existing_email\n      else\n        Rails.logger.info \"[CSV.merging] No match found\"\n        false\n      end\n    end\n    existing_emails   end\n\n  def matching_phone_numbers\n    existing_phone_numbers = []\n    @new_contact.phone_numbers.each do |phone_number|\n      Rails.logger.info \"[CSV.merging] Checking for a match on phone_number: #{phone_number.inspect}...\"\n      if existing_phone_number = @user.contact_phone_numbers.find_by(number: phone_number.number)\n        Rails.logger.info \"[CSV.merging] Found a matching phone number\"\n        existing_phone_numbers &lt;&lt; existing_phone_number\n      else\n        Rails.logger.info \"[CSV.merging] No match found\"\n        false\n      end\n    end\n    existing_phone_numbers   end\n\n  def clean_phone_number(number)\n    number.gsub(/[\\s\\-\\(\\)]+/, \"\")   end\n\nend\n</code></pre>\n\n<p>Smart CSV Parser.rb</p>\n\n<pre><code>require \"fuzzy_match\"\nrequire \"import_data/base_parser\"\n\nmodule ImportData\n  class SmartCsvParser &lt; BaseParser\n\n    def row_class\n      ::ImportData::SmartCsvRow\n    end\n\n    def each_contact\n      each { |row| yield row.to_contact[0] }\n    end\n  end\n\n  class SmartCsvRow &lt; BaseRow\n\n    CONTACT_MAPPING = {\n      \"Name\" =&gt; :name,\n      \"First Name\" =&gt; :first_name,\n      \"Last Name\" =&gt; :last_name,\n      \"Middle Name\" =&gt; \"\",\n      \"Spouse\" =&gt; :spouse,\n      \"Mobile Phone\" =&gt; :mobile_phone,\n      \"Notes\" =&gt; :notes,\n      \"Account\" =&gt; \"\",\n      \"Internet Free Busy\" =&gt; \"\",\n    }\n\n    ADDRESS_MAPPING = {\n      \"Address\" =&gt; :address,\n      \"Address1\" =&gt; :street,\n      \"Street\" =&gt; :street,\n      \"City\" =&gt; :city,\n      \"State\" =&gt; :state,\n      \"Postal Code\" =&gt; :zip,\n      \"Zip\" =&gt; :zip,\n      \"Zip Code\" =&gt; :zip,\n      \"Country\" =&gt; :country,\n      \"Home Address\" =&gt; :address,\n      \"Home Street\" =&gt; :street,\n      \"Home Street 2\" =&gt; :street,\n      \"Home Street 3\" =&gt; :street,\n      \"Home Address PO Box\" =&gt; :street,\n      \"Home City\" =&gt; :city,\n      \"Home State\" =&gt; :state,\n      \"Home Postal Code\" =&gt; :zip,\n      \"Home Country\" =&gt; :country,\n      \"Business Address\" =&gt; :address,\n      \"Business Street\" =&gt; :street,\n      \"Business Street 2\" =&gt; :street,\n      \"Business Street 3\" =&gt; :street,\n      \"Business Address PO Box\" =&gt; :street,\n      \"Business City\" =&gt; :city,\n      \"Business State\" =&gt; :state,\n      \"Business Postal Code\" =&gt; :zip,\n      \"Business Country\" =&gt; :country,\n      \"Other Address\" =&gt; :address,\n      \"Other Street\" =&gt; :street,\n      \"Other Street 2\" =&gt; :street,\n      \"Other Street 3\" =&gt; :street,\n      \"Other Address PO Box\" =&gt; :street,\n      \"Other City\" =&gt; :city,\n      \"Other State\" =&gt; :state,\n      \"Other Postal Code\" =&gt; :zip,\n      \"Other Country\" =&gt; :country,\n    }\n\n    EMAIL_ADDRESS_FIELDS = [\n      \"Email\",\n      \"E-mail Address\",\n      \"Email 2 Address\",\n      \"Email 3 Address\",\n      \"E-mail\",\n      \"E-mail 2 Address\",\n      \"E-mail 3 Address\"\n    ]\n    PHONE_TYPE_MAPPINGS  = {\n      \"Phone\" =&gt; \"Home\",\n      \"Primary Phone\" =&gt; \"Home\",\n      \"Home Phone\" =&gt; \"Home\",\n      \"Home Phone 2\" =&gt; \"Home\",\n      \"Mobile Phone\" =&gt; \"Mobile\",\n      \"Home Fax\" =&gt; \"Fax\",\n      \"Business Phone\" =&gt; \"Work\",\n      \"Business Phone 2\" =&gt; \"Work\",\n      \"Business Fax\" =&gt; \"Fax\",\n      \"Other Phone\" =&gt; \"Other\",\n      \"Other Fax\" =&gt; \"Fax\",\n      \"Company Main Phone\" =&gt; \"Work\",\n    }\n\n    def initialize(headers, row)\n      headers = headers.map { |h| best_match_or_self(h) }\n      super(headers, row)\n    end\n\n    def to_contact\n      existing_emails = existing_phone_numbers = nil\n      contact = Contact.new.tap do |contact|\n        initiate_instance(contact, CONTACT_MAPPING)\n        address = initiate_instance(Address.new, ADDRESS_MAPPING)\n        contact.addresses &lt;&lt; address if address\n        email_addresses, existing_emails = initialize_emails(EMAIL_ADDRESS_FIELDS)\n        contact.email_addresses &lt;&lt; email_addresses\n        phone_numbers, existing_phone_numbers = initialize_phone_numbers(PHONE_TYPE_MAPPINGS)\n        contact.phone_numbers &lt;&lt; phone_numbers\n        contact\n      end\n      existing_records = []\n      existing_records &lt;&lt; existing_emails\n      existing_records &lt;&lt; existing_phone_numbers\n      existing_records.flatten!\n      existing_records.compact!\n      [contact, existing_records]\n    end\n\n    private\n\n    def fetch_phone_type field\n      PHONE_TYPE_MAPPINGS[field]\n    end\n\n    FM = FuzzyMatch.new(CONTACT_MAPPING.keys + ADDRESS_MAPPING.keys + EMAIL_ADDRESS_FIELDS + PHONE_TYPE_MAPPINGS.keys)\n\n    def best_match_or_self(header)\n      # Select if Dice's Coefficient\n      # choose closet by Levenshtein distance\n      candidate = FM.find(header, find_all_with_score: true).\n                  select { |(_text, dice, _lev)| dice &gt; 0.5 }.\n                  max_by { |(_text, _dice, lev)| lev }\n\n      # if cannot find candidate return header\n      candidate ? candidate[0] : header\n    end\n\n  end\n\nend\n</code></pre>\n\n<p>DATABASE YML</p>\n\n<pre><code>&lt;% branch_name = `git symbolic-ref HEAD 2&gt;/dev/null`.chomp.sub('refs/heads/', '') %&gt;\n&lt;% repository_name = `git rev-parse --show-toplevel`.split('/').last.strip %&gt;\n\ndevelopment:\n  adapter: postgresql\n  database: &lt;%= repository_name %&gt;_development\n  host: localhost\n\ntest:\n  adapter: postgresql\n  database: &lt;%= repository_name %&gt;_test\n  host: localhost\n\nproduction:\n  adapter: postgresql\n  database: &lt;%= repository_name %&gt;_production\n  host: localhost\n</code></pre>\n\n<p>WORKER LOGS - initial few lines running</p>\n\n<pre><code>Delayed::Backend::ActiveRecord::Job Load (1.5ms)  UPDATE \"delayed_jobs\" SET locked_at = '2016-04-07 17:59:37.569861', locked_by = 'host:tests-MBP-3.att.net pid:9659' WHERE id IN (SELECT  \"delayed_jobs\".\"id\" FROM \"delayed_jobs\" WHERE ((run_at &lt;= '2016-04-07 17:59:37.568990' AND (locked_at IS NULL OR locked_at &lt; '2016-04-07 16:29:37.569013') OR locked_by = 'host:tests-MBP-3.att.net pid:9659') AND failed_at IS NULL)  ORDER BY priority ASC, run_at ASC LIMIT 1 FOR UPDATE) RETURNING * /*application:AGENTBRIGHT*/\n2016-04-07T13:59:37-0400: [Worker(host:tests-MBP-3.att.net pid:9659)] Job ImportCsvFileWorker.perform (id=19) RUNNING\n  CsvFile Load (0.6ms)  SELECT  \"csv_files\".* FROM \"csv_files\" WHERE \"csv_files\".\"id\" = $1 LIMIT 1 /*application:AGENTBRIGHT*/  [[\"id\", 1]]\n   (0.2ms)  BEGIN /*application:AGENTBRIGHT*/\n  SQL (0.4ms)  UPDATE \"csv_files\" SET \"state\" = $1, \"updated_at\" = $2 WHERE \"csv_files\".\"id\" = $3 /*application:AGENTBRIGHT*/  [[\"state\", \"processing\"], [\"updated_at\", \"2016-04-07 17:59:37.632648\"], [\"id\", 1]]\n[CSV.parsing] Processing new csv file...\n  SQL (0.4ms)  UPDATE \"csv_files\" SET \"total_parsed_records\" = $1, \"updated_at\" = $2 WHERE \"csv_files\".\"id\" = $3 /*application:AGENTBRIGHT*/  [[\"total_parsed_records\", 1], [\"updated_at\", \"2016-04-07 17:59:38.571053\"], [\"id\", 1]]\n[CSV.base_row] Initializing emails...\n[CSV.base_row] \n[CSV.base_row] Email addresses: 0\n[CSV.base_row] Existing emails : 0\n[CSV.base_row] Initializing phone numbers...\n[CSV.base_row] Phone numbers: 0\n[CSV.base_row] Existing phone numbers : []\n  User Load (0.4ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIMIT 1 /*application:AGENTBRIGHT*/  [[\"id\", 1]]\n[CSV.merging] new_contact_emails: #&lt;ActiveRecord::Associations::CollectionProxy []&gt;\n[CSV.merging] merged records: [[], []]\n[CSV.merging] flattened records: []\n[CSV.merging] compacted records: []\n[CSV.merging] Checking if new contact matches existing contact...\n[CSV.merging] Found records: []\n[CSV.merging] No contact match found.\n  SQL (0.7ms)  INSERT INTO \"contacts\" (\"data\", \"first_name\", \"user_id\", \"created_by_user_id\", \"import_source_id\", \"import_source_type\", \"name\", \"envelope_salutation\", \"letter_salutation\", \"created_at\", \"updated_at\", \"avatar_color\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING \"id\" /*application:AGENTBRIGHT*/  [[\"data\", \"\\\"notes\\\"=&gt;\\\"Family Name: and XXXX ail\\r\\nAddress 1: Any Street Point Road\\r\\nCity: Louisville, \\r\\nState: TN \\r\\nZip: 06437\\r\\n# invited: 2\\r\\nAdults: 2\\r\\n\\\"\"], [\"first_name\", \"Mary Joe\"], [\"user_id\", 1], [\"created_by_user_id\", 1], [\"import_source_id\", 1], [\"import_source_type\", \"CsvFile\"], [\"name\", \"Mary Joe Smith\"], [\"envelope_salutation\", \"\"], [\"letter_salutation\", \"Dear Mary Joe,\"], [\"created_at\", \"2016-04-07 17:59:38.763119\"], [\"updated_at\", \"2016-04-07 17:59:38.763119\"], [\"avatar_color\", 10]]\n  SQL (1.0ms)  UPDATE \"users\" SET \"contacts_count\" = COALESCE(\"contacts_count\", 0) + 1 WHERE \"users\".\"id\" = $1 /*application:AGENTBRIGHT*/  [[\"id\", 1]]\n  SQL (0.4ms)  UPDATE \"csv_files\" SET \"total_failed_records\" = $1, \"updated_at\" = $2 WHERE \"csv_files\".\"id\" = $3 /*application:AGENTBRIGHT*/  [[\"total_failed_records\", 1], [\"updated_at\", \"2016-04-07 17:59:38.775598\"], [\"id\", 1]]\n  SQL (1.1ms)  INSERT INTO \"csv_file_invalid_records\" (\"original_row\", \"csv_file_id\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4) RETURNING \"id\" /*application:AGENTBRIGHT*/  [[\"original_row\", \"Mary Joe Smith,,,,,,,,,,,,,\\\"Family Name: XXXX \\r\\nAddress 1: Any Street \\r\\nCity: Louisville, \\r\\nState: TN \\r\\nZip: 37777\\r\\n# invited: 2\\r\\nAdults: 2\\r\\n\\\",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Normal,,My Contacts;Imported 8/13/15 1;Imported 8/13/15,\\n\"], [\"csv_file_id\", 1], [\"created_at\", \"2016-04-07 17:59:38.796886\"], [\"updated_at\", \"2016-04-07 17:59:38.796886\"]]\n  SQL (0.4ms)  UPDATE \"csv_files\" SET \"total_parsed_records\" = $1, \"updated_at\" = $2 WHERE \"csv_files\".\"id\" = $3 /*application:AGENTBRIGHT*/  [[\"total_parsed_records\", 2], [\"updated_at\", \"2016-04-07 17:59:39.744526\"], [\"id\", 1]]\n[CSV.base_row] Initializing emails...\n[CSV.base_row] \n[CSV.base_row] Email addresses: 0\n[CSV.base_row] Existing emails : 0\n[CSV.base_row] Initializing phone numbers...\n[CSV.base_row] Phone numbers: 0\n[CSV.base_row] Existing phone numbers : []\n[CSV.merging] new_contact_emails: #&lt;ActiveRecord::Associations::CollectionProxy []&gt;\n[CSV.merging] merged records: [[], []]\n[CSV.merging] flattened records: []\n[CSV.merging] compacted records: []\n[CSV.merging] Checking if new contact matches existing contact...\n[CSV.merging] Found records: []\n[CSV.merging] No contact match found.\n  SQL (0.5ms)  INSERT INTO \"contacts\" (\"data\", \"first_name\", \"user_id\", \"created_by_user_id\", \"import_source_id\", \"import_source_type\", \"name\", \"envelope_salutation\", \"letter_salutation\", \"created_at\", \"updated_at\", \"avatar_color\") VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10, $11, $12) RETURNING \"id\" /*application:AGENTBRIGHT*/  [[\"data\", \"\\\"notes\\\"=&gt;\\\"Family Name: Xyzlastname\\r\\nAddress 1: 100 Village Drive #C101\\r\\nCity: Somecity, \\r\\nState: MA \\r\\nZip: 07827\\r\\n# invited: 1\\r\\nAdults: 1\\r\\n\\\"\"], [\"first_name\", \"ABC\"], [\"user_id\", 1], [\"created_by_user_id\", 1], [\"import_source_id\", 1], [\"import_source_type\", \"CsvFile\"], [\"name\", \"ABC\"], [\"envelope_salutation\", \"\"], [\"letter_salutation\", \"Dear ABC,\"], [\"created_at\", \"2016-04-07 17:59:39.753055\"], [\"updated_at\", \"2016-04-07 17:59:39.753055\"], [\"avatar_color\", 4]]\n  SQL (0.7ms)  UPDATE \"users\" SET \"contacts_count\" = COALESCE(\"contacts_count\", 0) + 1 WHERE \"users\".\"id\" = $1 /*application:AGENTBRIGHT*/  [[\"id\", 1]]\n  SQL (0.4ms)  UPDATE \"csv_files\" SET \"total_failed_records\" = $1, \"updated_at\" = $2 WHERE \"csv_files\".\"id\" = $3 /*application:AGENTBRIGHT*/  [[\"total_failed_records\", 2], [\"updated_at\", \"2016-04-07 17:59:39.763091\"], [\"id\", 1]]\n  SQL (0.4ms)  INSERT INTO \"csv_file_invalid_records\" (\"original_row\", \"csv_file_id\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4) RETURNING \"id\" /*application:AGENTBRIGHT*/  [[\"original_row\", \"Avi,,,,,,,,,,,,,\\\"Family Name: Xyzlastname\\r\\nAddress 1: 100 Village Drive #C101\\r\\nCity: SomeCity, \\r\\nState: MA \\r\\nZip: 06777\\r\\n# invited: 1\\r\\nAdults: 1\\r\\n\\\",,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,Normal,,My Contacts;Imported 8/13/15 1;Imported 8/13/15,\\n\"], [\"csv_file_id\", 1], [\"created_at\", \"2016-04-07 17:59:39.767706\"], [\"updated_at\", \"2016-04-07 17:59:39.767706\"]]\n  SQL (0.4ms)  UPDATE \"csv_files\" SET \"total_parsed_records\" = $1, \"updated_at\" = $2 WHERE \"csv_files\".\"id\" = $3 /*application:AGENTBRIGHT*/  [[\"total_parsed_records\", 3], [\"updated_at\", \"2016-04-07 17:59:40.761966\"], [\"id\", 1]]\n[CSV.base_row] Initializing emails...\n[CSV.base_row] \n[CSV.base_row] Email addresses: 0\n[CSV.base_ro\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "git", "postgresql", "heroku"], "answers": [{"tags": [], "owner": {"reputation": 6644, "user_id": 1219460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f8e98f29daa5c09c5fd1c2a09f72750?s=128&d=identicon&r=PG", "display_name": "Carlos Ramirez III", "link": "https://stackoverflow.com/users/1219460/carlos-ramirez-iii"}, "is_accepted": true, "score": 2, "last_activity_date": 1459956247, "creation_date": 1459956247, "answer_id": 36455541, "question_id": 36454752, "link": "https://stackoverflow.com/questions/36454752/how-to-run-db-migrations-that-effect-only-on-heroku-fork-app/36455541#36455541", "title": "How to run DB migrations that effect only on heroku fork app", "body": "<p>When you have multiple applications associated with the same codebase, Heroku will ask you which application you want to run the command on.</p>\n\n<p>You'll specify that with the <code>-a</code> or <code>--app</code> flag, so for example</p>\n\n<pre><code>heroku run rake db:migrate --app &lt;APPNAME&gt;\n</code></pre>\n\n<p>This will allow you to run commands on the fork app or the source app. </p>\n"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 36455541, "answer_count": 1, "score": 0, "last_activity_date": 1459956247, "creation_date": 1459954352, "question_id": 36454752, "link": "https://stackoverflow.com/questions/36454752/how-to-run-db-migrations-that-effect-only-on-heroku-fork-app", "title": "How to run DB migrations that effect only on heroku fork app", "body": "<p>On heroku I create fork app using <code>heroku fork --from sourceapp --to targetapp</code></p>\n\n<p>By this I copy an existing application and Heroku Postgres data.</p>\n\n<p>Now I push some migrations on fork app using <code>git push forked master</code>.</p>\n\n<p>How I run these migrations on heroku that it effect only heroku-fork app.</p>\n\n<p>When I run <code>heroku run rake db:migrate</code> , is it effect both or only fork one?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml", "nokogiri", "xml-namespaces"], "answers": [{"tags": [], "owner": {"reputation": 1323, "user_id": 4038282, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ZvYBF.jpg?s=128&g=1", "display_name": "y.bregey", "link": "https://stackoverflow.com/users/4038282/y-bregey"}, "is_accepted": true, "score": 1, "last_activity_date": 1459955158, "creation_date": 1459955158, "answer_id": 36455102, "question_id": 36454730, "link": "https://stackoverflow.com/questions/36454730/create-namespaced-xml-nodes-with-dot-using-nokogiri/36455102#36455102", "title": "Create namespaced XML nodes with dot `.` using Nokogiri", "body": "<p>Solved using <code>#send</code>:</p>\n\n<pre><code>xml.body {\n  xml.send('body.head') {\n    ...\n  }\n}\n\n\n&lt;nitf:body&gt;\n  &lt;nitf:body.head&gt;\n  ...\n  &lt;/nitf:body.head&gt;\n&lt;/nitf:body&gt;\n</code></pre>\n"}], "owner": {"reputation": 1323, "user_id": 4038282, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/ZvYBF.jpg?s=128&g=1", "display_name": "y.bregey", "link": "https://stackoverflow.com/users/4038282/y-bregey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 36455102, "answer_count": 1, "score": 0, "last_activity_date": 1459955158, "creation_date": 1459954306, "last_edit_date": 1459954947, "question_id": 36454730, "link": "https://stackoverflow.com/questions/36454730/create-namespaced-xml-nodes-with-dot-using-nokogiri", "title": "Create namespaced XML nodes with dot `.` using Nokogiri", "body": "<p>I'm using Nokogiri to generate XML:</p>\n\n<pre><code>Nokogiri::XML::Builder.new do |xml|\n  xml['nitf'].nitf('xmlns:nitf' =&gt; 'bar') {\n  // some nodes here\n\n    xml.body {\n      xml.head {\n        //some nodes here\n      }\n    }\n  }\nend\n</code></pre>\n\n<p>The output is </p>\n\n<pre><code>&lt;nitf:nitf xmlns:nitf=\"http://iptc.org/std/NITF/2006-10-18/\"&gt;\n  // some nodes here\n  &lt;nitf:body&gt;\n    &lt;nitf:head&gt;\n      // some nodes here\n    &lt;/nitf:head&gt;\n  &lt;/nitf:body&gt;\n&lt;/nitf:nitf&gt;\n</code></pre>\n\n<p>But I need to have <code>&lt;nitf:body.head&gt;</code> instead of <code>&lt;nitf:head&gt;</code>. How to achieve such a result?</p>\n"}, {"tags": ["python", "ruby", "api", "youtube"], "comments": [{"owner": {"reputation": 11227, "user_id": 1087866, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/52hpI.jpg?s=128&g=1", "display_name": "Jon Cairns", "link": "https://stackoverflow.com/users/1087866/jon-cairns"}, "edited": false, "score": 0, "creation_date": 1459958261, "post_id": 36454586, "comment_id": 60525055, "body": "Try <code>:headers =&gt; headerinfo</code> instead of <code>:header...</code>. That appears to be the correct key, according to <a href=\"https://github.com/jnunemaker/httparty/blob/master/examples/headers_and_user_agents.rb\" rel=\"nofollow noreferrer\">this example</a>"}], "owner": {"reputation": 929, "user_id": 4560015, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/9190fdd256e98c401eeaf26d571e8e05?s=128&d=identicon&r=PG&f=1", "display_name": "B A", "link": "https://stackoverflow.com/users/4560015/b-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1459954015, "creation_date": 1459954015, "question_id": 36454586, "link": "https://stackoverflow.com/questions/36454586/upload-to-youtube-using-api-v3-and-ruby", "title": "Upload to Youtube using API v3 and Ruby", "body": "<p>I am trying to use Ruby to upload a video to youtube using simple http request but it doesn't seem to work for some reason. \nHere's the code:</p>\n\n<pre><code>require 'httparty'\ntoken = 'blahblah'\nfilename = 'video.mp4'\nheaderinfo = {\n    'Host' =&gt; 'www.googleapis.com',\n    'Authorization' =&gt; 'Bearer ' + token,\n    'Content-Type' =&gt; 'application/json; charset=UTF-8',\n    'X-Upload-Content-Length' =&gt; File.size(filename).to_s,\n    'X-Upload-Content-Type'  =&gt; 'video/mp4'\n    }\n\n\nHTTParty.post('https://www.googleapis.com/upload/youtube/v3/videos?part=snippet,status',\n    :header =&gt; headerinfo,\n    :data =&gt;{\n        'snippet' =&gt;{\n            'title' =&gt; 'My test video from Ruby',\n            'description' =&gt; 'nice video'\n        },\n        'status' =&gt;{\n            'embeddable' =&gt; true,\n            'privacyStatus' =&gt; 'public',\n            'license' =&gt; 'youtube'\n        }\n    }.to_json,\n    :media =&gt; (File.open(filename,'rb').read)\n\n    )\n</code></pre>\n\n<p>The error is as follows:</p>\n\n<pre><code>{\"domain\"=&gt;\"global\", \"reason\"=&gt;\"required\", \"message\"=&gt;\"Login Required\", \"locationType\"=&gt;\"header\", \"location\"=&gt;\"Authorization\"}\n</code></pre>\n\n<p>Token is correct as i tested it on another python based application and it works. So what am i doing wrong?</p>\n\n<p>Note: i tried using the google api library as well but couldn't get it to work. It doesn't mention properly regarding where to provide the token id etc. I created client_secrets.json file with all other necessary info but am still not sure where to specify the token. Here is the code provided by Google: <a href=\"https://developers.google.com/youtube/v3/docs/videos/insert\" rel=\"nofollow\">https://developers.google.com/youtube/v3/docs/videos/insert</a></p>\n\n<p>Either should be fine for me but would be great if i could get it to work via a simple post request.</p>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1459953348, "post_id": 36454279, "comment_id": 60521209, "body": "What is your question?"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1459953349, "post_id": 36454279, "comment_id": 60521213, "body": "<code>alias</code> expects the new name first, no? And isn&#39;t alias a keyword taking actual method names, not symbols?"}, {"owner": {"reputation": 10000, "user_id": 1606888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/15a67c5384ba658abc462e0312450728?s=128&d=identicon&r=PG", "display_name": "Thomas Klemm", "link": "https://stackoverflow.com/users/1606888/thomas-klemm"}, "edited": false, "score": 0, "creation_date": 1459953889, "post_id": 36454279, "comment_id": 60521650, "body": "You&#39;re looking for <a href=\"http://devdocs.io/ruby~2.3/module#method-i-alias_method\" rel=\"nofollow noreferrer\"><code>alias_method</code></a>. See the argument ordering there."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 10000, "user_id": 1606888, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/15a67c5384ba658abc462e0312450728?s=128&d=identicon&r=PG", "display_name": "Thomas Klemm", "link": "https://stackoverflow.com/users/1606888/thomas-klemm"}, "edited": false, "score": 2, "creation_date": 1459954037, "post_id": 36454279, "comment_id": 60521763, "body": "@ThomasKlemm: <code>alias</code> works too."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1459954648, "post_id": 36454279, "comment_id": 60522242, "body": "@DaveNewton <code>alias</code> takes either method names or symbols since some version."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1459959390, "post_id": 36454279, "comment_id": 60525889, "body": "@sawa\tAh; good to know--thanks."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1459956531, "post_id": 36454480, "comment_id": 60523714, "body": "Either <code>alias new_name old_name</code> or <code>alias :new_name :old_name</code>"}], "tags": [], "owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "is_accepted": false, "score": 1, "last_activity_date": 1459953871, "last_edit_date": 1459953871, "creation_date": 1459953768, "answer_id": 36454480, "question_id": 36454279, "link": "https://stackoverflow.com/questions/36454279/ruby-bigdecimal-method-error/36454480#36454480", "title": "Ruby BigDecimal method error", "body": "<p>Your alias should be something like this to escape the error</p>\n\n<pre><code>module BigMath\n\n    def log(x, prec)\n      #your code\n    end\n\n\n   alias log_slow log\nend\n</code></pre>\n\n<p>Format:</p>\n\n<pre><code>alias new_name old_name\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 5820477, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3547843aa06053641a230cae985fc5b?s=128&d=identicon&r=PG&f=1", "display_name": "NishantT", "link": "https://stackoverflow.com/users/5820477/nishantt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1459953914, "creation_date": 1459953251, "last_edit_date": 1459953914, "question_id": 36454279, "link": "https://stackoverflow.com/questions/36454279/ruby-bigdecimal-method-error", "title": "Ruby BigDecimal method error", "body": "<p>I created <code>log_slow</code> alias, and it is not working:</p>\n\n<pre><code>require 'bigdecimal'\nrequire 'bigdecimal/math'\nrequire 'bigdecimal/util'\n\nmodule BigMath\n  alias :log :log_slow\n  def log(x, prec)\n    if x &lt;= 0 || prec &lt;= 0\n      raise ArgumentError, \"Zero or negative argument for log\"\n    end\n    return x if x.infinite? || x.nan?\n    sign, fraction, power, exponent = x.split\n    fraction = BigDecimal(\".#{fraction}\")\n    power = power.to_s.to_d\n    log_slow(fraction, prec) + (log_slow(power, prec) * exponent)\n  end\nend\n\ninclude BigMath\nnumber = BigDecimal(\"1234.5678\")\nMath.log(number)\nprec = 50\nputs BigMath.log_slow(number, prec).round(prec).to_s(\"F\")\nputs BigMath.log(number, prec).round(prec).to_s(\"F\")\nputs BigMath.log(number ** 1000, prec).round(prec).to_s(\"F\")\n</code></pre>\n\n<p>I get an error:</p>\n\n<pre><code>in `&lt;module:BigMath&gt;': undefined method `log_slow' for module `BigMath' (NameError)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "activerecord", "activemodel"], "answers": [{"comments": [{"owner": {"reputation": 2545, "user_id": 1808649, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7OGag.jpg?s=128&g=1", "display_name": "Fran Martinez", "link": "https://stackoverflow.com/users/1808649/fran-martinez"}, "reply_to_user": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1461153155, "post_id": 36454696, "comment_id": 61067181, "body": "You should use any? block"}], "tags": [], "owner": {"reputation": 2545, "user_id": 1808649, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7OGag.jpg?s=128&g=1", "display_name": "Fran Martinez", "link": "https://stackoverflow.com/users/1808649/fran-martinez"}, "is_accepted": false, "score": 0, "last_activity_date": 1459954850, "last_edit_date": 1459954850, "creation_date": 1459954266, "answer_id": 36454696, "question_id": 36454051, "link": "https://stackoverflow.com/questions/36454051/active-record-validations-how-to-validate-date-attributes-in-railscustom/36454696#36454696", "title": "# Active record validations : : How to validate date attributes in Rails(custom_validations)?", "body": "<pre><code>def has_leave_for_the_same_month?\n  resident.leaves.any? do |other_leave|\n    other_leave.start_date.month == leave.start_date.month\n  end\nend\n\nerrors.add(...) if has_leave_for_the_same_month?\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1460008217, "post_id": 36455126, "comment_id": 60546456, "body": "it is working but Im getting flash error from my controller : <code>def create     @leave=current_user.resident.leaves.create(leave_params)     if @leave.save       flash[:info] = &quot;Leave successfully marked&quot;       redirect_to leaves_path     else       flash[:danger] = &quot;Mark Your Leave Again (Not  a vaild Leave) !&quot;       redirect_to new_leave_path     end   end</code>   <b>flash[:danger] = &quot;Mark Your Leave Again (Not  a vaild Leave) !&quot;</b> this one error .."}, {"owner": {"reputation": 1116, "user_id": 4122847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Bhoo3PIj7w/AAAAAAAAAAI/AAAAAAAAAF4/OEnQcnM3iI0/photo.jpg?sz=128", "display_name": "Abdoo Dev", "link": "https://stackoverflow.com/users/4122847/abdoo-dev"}, "reply_to_user": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1460014554, "post_id": 36455126, "comment_id": 60550058, "body": "if you want to show the error message added, you can change flash[:danger] to <code>flash[:danger]= @leave.errors.full_messages.first</code>"}, {"owner": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1460022098, "post_id": 36455126, "comment_id": 60555097, "body": "yeah that&#39;s working but when I am creating a leave it is showing me  error --&gt;  <b>You can&#39;t mark leave cause you have already marked leave for this month</b> but the leave is getting stored in database !! how to fix it ?"}, {"owner": {"reputation": 1116, "user_id": 4122847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Bhoo3PIj7w/AAAAAAAAAAI/AAAAAAAAAF4/OEnQcnM3iI0/photo.jpg?sz=128", "display_name": "Abdoo Dev", "link": "https://stackoverflow.com/users/4122847/abdoo-dev"}, "reply_to_user": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1460023701, "post_id": 36455126, "comment_id": 60556274, "body": "ah ok, you need to change <code>current_user.resident.leaves.create(leave_params)</code> to <code>current_user.resident.leaves.new(leave_params)</code> because the leave created can&#39;t be saved twice since it  has already start_date in the same month"}, {"owner": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1460026916, "post_id": 36455126, "comment_id": 60558607, "body": "But <b>before_create</b>  will not work? and if I am changing  it to <b>validates</b> then it is saving leaves with any date difference not by the function made by me: <b>check_correct_leave</b>"}, {"owner": {"reputation": 1116, "user_id": 4122847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Bhoo3PIj7w/AAAAAAAAAAI/AAAAAAAAAF4/OEnQcnM3iI0/photo.jpg?sz=128", "display_name": "Abdoo Dev", "link": "https://stackoverflow.com/users/4122847/abdoo-dev"}, "reply_to_user": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "edited": false, "score": 0, "creation_date": 1460030266, "post_id": 36455126, "comment_id": 60561073, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/108513/discussion-between-abdoo-dev-and-nischay-namdev\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 1116, "user_id": 4122847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Bhoo3PIj7w/AAAAAAAAAAI/AAAAAAAAAF4/OEnQcnM3iI0/photo.jpg?sz=128", "display_name": "Abdoo Dev", "link": "https://stackoverflow.com/users/4122847/abdoo-dev"}, "is_accepted": true, "score": 1, "last_activity_date": 1460034437, "last_edit_date": 1460034437, "creation_date": 1459955205, "answer_id": 36455126, "question_id": 36454051, "link": "https://stackoverflow.com/questions/36454051/active-record-validations-how-to-validate-date-attributes-in-railscustom/36455126#36455126", "title": "# Active record validations : : How to validate date attributes in Rails(custom_validations)?", "body": "<p>You can add another validation method like this</p>\n\n<pre><code>validate :check_leaves_in_same_month\n\n\ndef check_leaves_in_same_month  \n   if self.resident.leaves.where('start_date &gt; ?', self.start_date.beginning_of_month).any? \n       errors.add(\"You can't mark leave cause you have already marked leave for this month\")\n   end\nend\n</code></pre>\n"}], "owner": {"reputation": 476, "user_id": 5682238, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/872df0dc333fcc53aa31a7f681b77051?s=128&d=identicon&r=PG&f=1", "display_name": "Nischay Namdev", "link": "https://stackoverflow.com/users/5682238/nischay-namdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "accepted_answer_id": 36455126, "answer_count": 2, "score": 0, "last_activity_date": 1460034437, "creation_date": 1459952655, "last_edit_date": 1460022752, "question_id": 36454051, "link": "https://stackoverflow.com/questions/36454051/active-record-validations-how-to-validate-date-attributes-in-railscustom", "title": "# Active record validations : : How to validate date attributes in Rails(custom_validations)?", "body": "<p>I have two models...</p>\n\n<p><strong><em>models/Resident.rb</em></strong> : has_many: leaves</p>\n\n<p><strong><em>models/leave.rb</em></strong>: belongs_to: resident</p>\n\n<p>Now  what I want to validate  leave model attributes before they get created..</p>\n\n<p><strong><em>leave.rb</strong> attributes</em> : <strong>start_date,end_date,destination</strong></p>\n\n<p><strong><em>here is my leave model</em></strong>:</p>\n\n<pre><code>class Leave &lt; ActiveRecord::Base\n  belongs_to :resident\n  validates :destination,presence:true\n  validates :end_date,presence: true\n  validates :start_date,presence: true\n  before_create :check_correct_leave\n\n  private\n\n  def check_correct_leave\n\n   if resident.hostel.hostel=='J'\n     (self.end_date - self.start_date).to_i == 4 ||  (self.end_date - self.start_date).to_i == 5\n\n   else\n     errors.add(:start_date, \"Leave are granted only 4 or 5 days\")\n   end\n\n  end\n\nend\n</code></pre>\n\n<p>I want <strong>check_correct_leave</strong> method to also check  --> if  the resident  already  have a leave (stored in a leave model) of that a month (month means jan,feb,etc) then it should generate  an error that:</p>\n\n<p><strong>\"You can't mark leave cause you have already marked leave for this month\"</strong>\nand  model should not store that leave.\nThanks !</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"comments": [{"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1459956860, "post_id": 36455695, "comment_id": 60523957, "body": "I guess that&#39;s where my problem lies... I don&#39;t have a controller to add a <code>confirmation_instructions</code> method to since it&#39;s all devise generated.  Do you know if I can override it with my own somehow?"}, {"owner": {"reputation": 6644, "user_id": 1219460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f8e98f29daa5c09c5fd1c2a09f72750?s=128&d=identicon&r=PG", "display_name": "Carlos Ramirez III", "link": "https://stackoverflow.com/users/1219460/carlos-ramirez-iii"}, "reply_to_user": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1459957122, "post_id": 36455695, "comment_id": 60524167, "body": "The method does not get added to a controller, it goes in the custom mailer (just like you have it) except it needs to be an instance method rather than a class method. See my revised answer above."}], "tags": [], "owner": {"reputation": 6644, "user_id": 1219460, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f8e98f29daa5c09c5fd1c2a09f72750?s=128&d=identicon&r=PG", "display_name": "Carlos Ramirez III", "link": "https://stackoverflow.com/users/1219460/carlos-ramirez-iii"}, "is_accepted": true, "score": 1, "last_activity_date": 1459957068, "last_edit_date": 1459957068, "creation_date": 1459956650, "answer_id": 36455695, "question_id": 36453948, "link": "https://stackoverflow.com/questions/36453948/devise-custom-mailer-smtpapi-headers-sendgrid/36455695#36455695", "title": "Devise custom mailer SMTPAPI headers &amp; Sendgrid", "body": "<p>I believe <code>headers</code> is defined as an instance method, not a class method. Since you are trying to call it within the context of the class (i.e. <code>self.confirmation_instructions</code>), it is undefined. </p>\n\n<p>If you notice in the <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Use-custom-mailer\" rel=\"nofollow\">Devise wiki post</a> on using custom mailers, the instructions reference <code>headers</code> on the instance, not the class. </p>\n\n<hr>\n\n<p>If you just want to add some custom headers / options, the recommended approach is to just override the instance method then call <code>super</code>. For example</p>\n\n<pre><code>class DeviseMailer &lt; Devise::Mailer\n  helper :application\n  include Devise::Controllers::UrlHelpers\n  default template_path: 'devise/mailer'\n\n  def confirmation_instructions(record, token, opts={})\n    # custom header(s)\n    headers[\"X-SMTPAPI\"]= {\n     \"sub\": {\n      \"-user-\" =&gt; [user.name]\n     },\n     \"filters\": {\n      \"templates\": {\n        \"settings\": {\n          \"enable\": 1,\n          \"template_id\": \"f67a241a-b5af-46b3-9e9a-xxxxxxxxx\"\n        }\n      }\n     }\n    }.to_json\n\n    # custom option(s)\n    opts[:from] = 'support@mydomain.com'\n    opts[:reply_to] = 'support@mydomain.com'\n    opts[:to] = \"myemail@mydomain.com\"\n\n    super\n  end\nend\n</code></pre>\n\n<p>I recommend reading the linked blog post, as it talks about overriding the default behavior for mailers in more detail. </p>\n"}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 0, "accepted_answer_id": 36455695, "answer_count": 1, "score": 0, "last_activity_date": 1459957068, "creation_date": 1459952407, "last_edit_date": 1459952435, "question_id": 36453948, "link": "https://stackoverflow.com/questions/36453948/devise-custom-mailer-smtpapi-headers-sendgrid", "title": "Devise custom mailer SMTPAPI headers &amp; Sendgrid", "body": "<p>I'm using a devise custom mailer and have the signup process using my new method, however I'm getting the error <code>undefined local variable or method 'headers' for DeviseMailer:Class</code> when it's attempting to send the email after the signup.  I need to be able to specify SMTPAPI headers to be able to use my Sendgrid template.  I have this working for some other mailers (not devise related), so I've taken the same code and added it to my new devise mailer.</p>\n\n<p><strong>models/devise_mailer.rb</strong></p>\n\n<pre><code>class DeviseMailer &lt; Devise::Mailer\n  helper :application\n  include Devise::Controllers::UrlHelpers\n  default template_path: 'devise/mailer'\n\n  def self.confirmation_instructions(record, token, opts={})\n    new(:confirmation_instructions, record, token, opts)\n\n    headers \"X-SMTPAPI\" =&gt; {\n     \"sub\": {\n      \"-user-\" =&gt; [user.name]\n     },\n     \"filters\": {\n      \"templates\": {\n        \"settings\": {\n          \"enable\": 1,\n          \"template_id\": \"f67a241a-b5af-46b3-9e9a-xxxxxxxxx\"\n        }\n      }\n     }\n    }.to_json\n\n    mail(\n      to: user.email,\n      subject: \"Confirm your account\",\n      template_path: '../views/devise/mailer',\n      template_name: 'confirmation_instructions'\n    )\n\n\n    opts[:from] = 'support@mydomain.com'\n    opts[:reply_to] = 'support@mydomain.com'\n    opts[:to] = \"myemail@mydomain.com\" # just hardcoded right now, remove after testing\n    super\n\n  end\nend\n</code></pre>\n\n<p>What am I missing here?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 3220, "user_id": 1975116, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e6cc642db122cbdcd0afbac71acbe582?s=128&d=identicon&r=PG", "display_name": "Esse", "link": "https://stackoverflow.com/users/1975116/esse"}, "edited": false, "score": 0, "creation_date": 1459951318, "post_id": 36453442, "comment_id": 60519539, "body": "I think you should try to avoid <code>has_and_belongs_to_many</code> in favor of <code>has_many through</code>"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 1, "creation_date": 1459951503, "post_id": 36453442, "comment_id": 60519683, "body": "You have <code>has_many :groups</code> in <code>type</code> model and you have <code>has_one :types</code>  in <code>group</code> model which is wrong and won&#39;t work."}, {"owner": {"reputation": 204, "user_id": 2639165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zNWO2.jpg?s=128&g=1", "display_name": "Divide100", "link": "https://stackoverflow.com/users/2639165/divide100"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1459951594, "post_id": 36453442, "comment_id": 60519753, "body": "@Pavan what would you recommend using instead?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1459951712, "post_id": 36453442, "comment_id": 60519851, "body": "You should change <code>has_one :types</code> to <code>belongs_to :type</code>."}, {"owner": {"reputation": 204, "user_id": 2639165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zNWO2.jpg?s=128&g=1", "display_name": "Divide100", "link": "https://stackoverflow.com/users/2639165/divide100"}, "reply_to_user": {"reputation": 3220, "user_id": 1975116, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e6cc642db122cbdcd0afbac71acbe582?s=128&d=identicon&r=PG", "display_name": "Esse", "link": "https://stackoverflow.com/users/1975116/esse"}, "edited": false, "score": 0, "creation_date": 1459951983, "post_id": 36453442, "comment_id": 60520074, "body": "@Esse if I use has_many through, do I need to define a model for the intersection tables?"}, {"owner": {"reputation": 3160, "user_id": 1266795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7855792dbc5f3b4c365344314e2b1ad6?s=128&d=identicon&r=PG", "display_name": "AndyV", "link": "https://stackoverflow.com/users/1266795/andyv"}, "edited": false, "score": 0, "creation_date": 1459959758, "post_id": 36453442, "comment_id": 60526135, "body": "Yes, define the GroupUser model.  Then User has_many :group_users, has_many :groups, through :group_users.  Depending on your needs, the GroupUser model might also be a better place to associate the GroupUserStatistic model (and this is one of the reasons to favor has_many ... through over has_and_belongs_to_many)."}], "answers": [{"tags": [], "owner": {"reputation": 204, "user_id": 2639165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zNWO2.jpg?s=128&g=1", "display_name": "Divide100", "link": "https://stackoverflow.com/users/2639165/divide100"}, "is_accepted": false, "score": 0, "last_activity_date": 1459962950, "creation_date": 1459962950, "answer_id": 36457964, "question_id": 36453442, "link": "https://stackoverflow.com/questions/36453442/activerecord-associations-am-i-doing-it-right/36457964#36457964", "title": "ActiveRecord associations: am I doing it right?", "body": "<p>I updated my models as per Esse, Pavan and AndyV's comments. Everything seems to be working fine now</p>\n\n<pre><code>class Type &lt; ActiveRecord::Base\n    has_many :groups\nend\n\nclass Role &lt; ActiveRecord::Base\n    has_many :group_users\nend\n\nclass User &lt; ActiveRecord::Base\n    has_many :group_users\n    has_many :groups, through: :group_users\n\n    has_many :group_user_statistics\n    has_many :groups, through: :group_user_statistics\n    has_many :statistics, through: :group_user_statistics\nend\n\nclass Group &lt; ActiveRecord::Base\n    has_many :group_users\n    has_many :users, through: :group_users\n\n    has_many :group_user_statistics\n    has_many :users, through: :group_user_statistics\n    has_many :statistics, through: :group_user_statistics\nend\n\nclass GroupUser &lt; ActiveRecord::Base\n    belongs_to :group\n    belongs_to :user\nend\n\nclass Statistic &lt; ActiveRecord::Base\n    has_many :group_user_statistics\n    has_many :groups, through: :group_user_statistics\n    has_many :users, through: :group_user_statistics\nend\n\nclass GroupUserStatistic &lt; ActiveRecord::Base\n    belongs_to :user\n    belongs_to :group\n    belongs_to :statistic\nend\n</code></pre>\n"}], "owner": {"reputation": 204, "user_id": 2639165, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zNWO2.jpg?s=128&g=1", "display_name": "Divide100", "link": "https://stackoverflow.com/users/2639165/divide100"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459962950, "creation_date": 1459951219, "question_id": 36453442, "link": "https://stackoverflow.com/questions/36453442/activerecord-associations-am-i-doing-it-right", "title": "ActiveRecord associations: am I doing it right?", "body": "<p>I'm working on building a simple Rails application (this is my first rails project) for tracking statistics for users within a group. I've created the tables using a migration script and everything looks alright when I look at it in MySql, but not all of my models return data when I join them into another table.</p>\n\n<p>Does anyone see anything wrong with my models, migration script, or data model?</p>\n\n<p>Here is my migration file script code:</p>\n\n<pre><code>class CreateGroupsUsers &lt; ActiveRecord::Migration\n  def change\n\n    create_table :types do |t|\n      t.string :name\n    end\n\n    create_table :groups do |t|\n      t.string :name\n      t.belongs_to :type, index: true\n    end\n\n    create_table :users do |t|\n      t.string :username\n      t.string :email\n      t.string :first_name\n      t.string :last_name\n      t.string :e_password\n      t.string :salt\n      t.timestamps\n    end\n\n    create_table :roles do |t|\n      t.string :name\n    end\n\n    create_table :groups_users, id: false do |t|\n      t.belongs_to :group, index: true\n      t.belongs_to :user, index: true\n      t.belongs_to :role, index: true\n    end\n\n    create_table :statistics do |t|\n      t.string :name\n    end\n\n    create_table :groups_users_statistics, id: false do |t|\n      t.string :value\n      t.belongs_to :group, index: true\n      t.belongs_to :user, index: true\n      t.belongs_to :statistic, index: true\n    end\n\n  end\nend\n</code></pre>\n\n<p>Here are my my models:</p>\n\n<pre><code>class Type &lt; ActiveRecord::Base\n    has_many :groups\nend\n\nclass Role &lt; ActiveRecord::Base\n    has_many :groups_users\nend\n\nclass User &lt; ActiveRecord::Base\n    has_and_belongs_to_many :groups\n    has_one :roles, through: :groups_users\nend\n\nclass Group &lt; ActiveRecord::Base\n    has_and_belongs_to_many :users\n    has_one :types\nend\n\nclass Statistic &lt; ActiveRecord::Base\n    //i'm not too sure how to define this model\nend\n</code></pre>\n\n<p>and here's my data model</p>\n\n<p><a href=\"https://i.stack.imgur.com/OI4mN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OI4mN.png\" alt=\"Here&#39;s my data model\"></a></p>\n"}, {"tags": ["ruby", "windows"], "comments": [{"owner": {"reputation": 3220, "user_id": 1975116, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e6cc642db122cbdcd0afbac71acbe582?s=128&d=identicon&r=PG", "display_name": "Esse", "link": "https://stackoverflow.com/users/1975116/esse"}, "edited": false, "score": 0, "creation_date": 1459951244, "post_id": 36453339, "comment_id": 60519469, "body": "have you tried ctrl+shift+esc ten <code>kill process tree</code> inside process manager?"}, {"owner": {"reputation": 75, "user_id": 5180866, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1160696737279538/picture?type=large", "display_name": "Tommy Mertell", "link": "https://stackoverflow.com/users/5180866/tommy-mertell"}, "reply_to_user": {"reputation": 3220, "user_id": 1975116, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e6cc642db122cbdcd0afbac71acbe582?s=128&d=identicon&r=PG", "display_name": "Esse", "link": "https://stackoverflow.com/users/1975116/esse"}, "edited": false, "score": 0, "creation_date": 1459951311, "post_id": 36453339, "comment_id": 60519527, "body": "It continues to run, so I can&#39;t even access the Task Manager without it jumping all over the menu options"}, {"owner": {"reputation": 1814, "user_id": 5006469, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7b557baad76e9fca74ff4d0d1aac568a?s=128&d=identicon&r=PG&f=1", "display_name": "rdupz", "link": "https://stackoverflow.com/users/5006469/rdupz"}, "edited": false, "score": 0, "creation_date": 1459951410, "post_id": 36453339, "comment_id": 60519609, "body": "Did you see <a href=\"http://stackoverflow.com/a/14686531/5006469\">this</a>?"}, {"owner": {"reputation": 75, "user_id": 5180866, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1160696737279538/picture?type=large", "display_name": "Tommy Mertell", "link": "https://stackoverflow.com/users/5180866/tommy-mertell"}, "reply_to_user": {"reputation": 1814, "user_id": 5006469, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7b557baad76e9fca74ff4d0d1aac568a?s=128&d=identicon&r=PG&f=1", "display_name": "rdupz", "link": "https://stackoverflow.com/users/5006469/rdupz"}, "edited": false, "score": 0, "creation_date": 1459951523, "post_id": 36453339, "comment_id": 60519697, "body": "@standelaune did I see what? That it went psycho on my Task Manager? Oh yeah, that&#39;s why I forced a log out."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 2, "creation_date": 1459951917, "post_id": 36453339, "comment_id": 60520026, "body": "Why not just make it so your program can be stopped by the user with e.g. Ctrl+C? That&#39;s what <code>trap</code> is for. <a href=\"http://timuruski.net/blog/2014/signals-traps-and-rescues/\" rel=\"nofollow noreferrer\">timuruski.net/blog/2014/signals-traps-and-rescues</a>"}, {"owner": {"reputation": 1814, "user_id": 5006469, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7b557baad76e9fca74ff4d0d1aac568a?s=128&d=identicon&r=PG&f=1", "display_name": "rdupz", "link": "https://stackoverflow.com/users/5006469/rdupz"}, "edited": false, "score": 0, "creation_date": 1459952000, "post_id": 36453339, "comment_id": 60520088, "body": "You miss the link. I&#39;m not sure to understand your problem anyway. Does <code>Ctrl+Pause&#47;Break</code> work ?"}, {"owner": {"reputation": 75, "user_id": 5180866, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1160696737279538/picture?type=large", "display_name": "Tommy Mertell", "link": "https://stackoverflow.com/users/5180866/tommy-mertell"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1459952343, "post_id": 36453339, "comment_id": 60520345, "body": "@Jordan Reading now, will get back to you."}, {"owner": {"reputation": 75, "user_id": 5180866, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1160696737279538/picture?type=large", "display_name": "Tommy Mertell", "link": "https://stackoverflow.com/users/5180866/tommy-mertell"}, "reply_to_user": {"reputation": 1814, "user_id": 5006469, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7b557baad76e9fca74ff4d0d1aac568a?s=128&d=identicon&r=PG&f=1", "display_name": "rdupz", "link": "https://stackoverflow.com/users/5006469/rdupz"}, "edited": false, "score": 0, "creation_date": 1459952791, "post_id": 36453339, "comment_id": 60520724, "body": "@standelaune <code>CTRL+Pause</code> did not work"}, {"owner": {"reputation": 75, "user_id": 5180866, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1160696737279538/picture?type=large", "display_name": "Tommy Mertell", "link": "https://stackoverflow.com/users/5180866/tommy-mertell"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1459952876, "post_id": 36453339, "comment_id": 60520802, "body": "@Jordan tested in code, did not work. Will test it in terminal when it is finished cycling through."}, {"owner": {"reputation": 75, "user_id": 5180866, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1160696737279538/picture?type=large", "display_name": "Tommy Mertell", "link": "https://stackoverflow.com/users/5180866/tommy-mertell"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1459957651, "post_id": 36453339, "comment_id": 60524590, "body": "@Jordan tested it in terminal, did not work"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1459960235, "post_id": 36453339, "comment_id": 60526474, "body": "When writing Ruby, try to use the proper naming convention. That method should be called <code>file_to_array</code>. Capital letters often have significant meaning, so case is something to pay attention to."}, {"owner": {"reputation": 75, "user_id": 5180866, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1160696737279538/picture?type=large", "display_name": "Tommy Mertell", "link": "https://stackoverflow.com/users/5180866/tommy-mertell"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1459961325, "post_id": 36453339, "comment_id": 60527152, "body": "@tadman when did Ruby move away from Camel Casing?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1459961438, "post_id": 36453339, "comment_id": 60527222, "body": "@TommyMertell Ruby&#39;s been advocating <code>ClassName</code>, <code>method_or_variable_name</code> and <code>CONSTANT_NAME</code> for a while now, at least ten years. Pretty much every style guide advocates this."}, {"owner": {"reputation": 75, "user_id": 5180866, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1160696737279538/picture?type=large", "display_name": "Tommy Mertell", "link": "https://stackoverflow.com/users/5180866/tommy-mertell"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1459961587, "post_id": 36453339, "comment_id": 60527311, "body": "@tadman ah, okay. I will keep that in mind in future development."}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 5180866, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1160696737279538/picture?type=large", "display_name": "Tommy Mertell", "link": "https://stackoverflow.com/users/5180866/tommy-mertell"}, "edited": false, "score": 0, "creation_date": 1459961263, "post_id": 36457261, "comment_id": 60527121, "body": "The purpose of the program is to simulate typing. This is why I use the win32ole library as it allows me to send keys to a file and control the speed."}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "reply_to_user": {"reputation": 75, "user_id": 5180866, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1160696737279538/picture?type=large", "display_name": "Tommy Mertell", "link": "https://stackoverflow.com/users/5180866/tommy-mertell"}, "edited": false, "score": 0, "creation_date": 1459964030, "post_id": 36457261, "comment_id": 60528844, "body": "i see, you use sendkeys ? i might have a better solution for that.. but then there is an even better solution for your array problem, i&#39;ll add it to my answer"}, {"owner": {"reputation": 75, "user_id": 5180866, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1160696737279538/picture?type=large", "display_name": "Tommy Mertell", "link": "https://stackoverflow.com/users/5180866/tommy-mertell"}, "edited": false, "score": 0, "creation_date": 1459964314, "post_id": 36457261, "comment_id": 60529016, "body": "I wasn&#39;t aware I had an array problem. I&#39;m switching the code to a case statement to make it a little faster but here is a link to the actual code.  <a href=\"https://github.com/sinithwar/LazyProjects/blob/master/RubyTypingSimulator.rb\" rel=\"nofollow noreferrer\">github.com/sinithwar/LazyProjects/blob/master/&hellip;</a>"}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "reply_to_user": {"reputation": 75, "user_id": 5180866, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1160696737279538/picture?type=large", "display_name": "Tommy Mertell", "link": "https://stackoverflow.com/users/5180866/tommy-mertell"}, "edited": false, "score": 0, "creation_date": 1459968519, "post_id": 36457261, "comment_id": 60531618, "body": "checked your script, you read in a very big char array and use just 1000 first chars, see my last code sample, if you don&#39;t want to use AutoIt (I really recommend it) then at least use the solution for sending the chars"}], "tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1459965133, "last_edit_date": 1459965133, "creation_date": 1459960845, "answer_id": 36457261, "question_id": 36453339, "link": "https://stackoverflow.com/questions/36453339/ultimate-kill-for-ruby-script/36457261#36457261", "title": "Ultimate Kill for Ruby Script", "body": "<p>You read each byte in an array, how long does your array get if you let in run till the end ? Filling an array of hundreds of thousands takes a long time indeed. Should see the rest of your code to decide if there is no better way, and why the win32ole object ? </p>\n\n<p>If the standard windows keys to interrupt the jog don't word (Ctrl-c or Ctrl-break) and you can't use taskmanager, surely the console will still be responsive.</p>\n\n<p>Here a script that does what you do. I put it in an endless loop so that I have to terminate it. The Process.pid shows the process id. \nIn advance you open a console and when you want to terminate the script you enter the following</p>\n\n<pre><code>taskkill /f /pid 5532\n</code></pre>\n\n<p>The /f is for forcing to terminate, the number is the pid you get from your script</p>\n\n<pre><code># encoding:utf-8\nSTDOUT.sync = true\ns1 = File.read __FILE__\nputs Process.pid\nclass String\n    def to_a\n      while true # endless loop just for testing the kill\n        each_byte.inject([]){|result, char| result &lt;&lt; char}\n      end\n    end\nend\n\np s1.to_a\n</code></pre>\n\n<p>Tested with Windows 7 and Ruby MRI 1.9.3</p>\n\n<p>EDIT:\nbased on your comment here another way to send keys to a program\nIf I understand correctly what you want to do you also don't need to split the string in advance.</p>\n\n<pre><code>require 'win32ole'\n#for this script Autoit3 must be installed\n\ns1 = \"a string of thousands of characters\"\n\n# activate the correct window with the appclass\nai.Opt(\"WinTitleMatchMode\", 4)\nappClass = \"[CLASS:xxxxxxxx]\"    # retrieved with AutoIt Window Info \nai = WIN32OLE.new(\"AutoItX3.Control\")\nai.WinActivate(appClass)\n\n# or with the handle\nhandle = \"[HANDLE:#{ai.wingethandle(appClass)}]\" \nai.WinActivate(handle)\n\n# send keys, controlkeys or words to the program\nai.Send('{HOME}') #you can send control keys like that\n\ns1.each_byte{|char| ai.Send(char); sleep 1} #to send everything char after char\n\ns1[0..10].each_byte{|char| ai.Send(char); sleep 1} #to send the first 10 chars\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 5180866, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1160696737279538/picture?type=large", "display_name": "Tommy Mertell", "link": "https://stackoverflow.com/users/5180866/tommy-mertell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459965133, "creation_date": 1459951015, "last_edit_date": 1459954786, "question_id": 36453339, "link": "https://stackoverflow.com/questions/36453339/ultimate-kill-for-ruby-script", "title": "Ultimate Kill for Ruby Script", "body": "<p>I have an unstoppable Ruby script that I need to be able to stop. Here is the following code:</p>\n\n<pre><code>require 'win32ole'\n\nwsh = WIN32OLE.new(\"WScript.Shell\")\n\ndef fileToArray(file)\n    x = []\n    File.foreach(\"#{file}\") do |line|\n        x &lt;&lt; line.to_s.split('')\n    end\n    return x.flatten!\nend\ntests = fileToArray(\"C:\\\\xampp\\\\htdocs\\\\x\\\\Script\\\\includes\\\\classes.php\")\n\nsleep 10\nx = 0\ny = tests.length\nwhile x &lt;= y do\n    send = tests[x]\n    speed = 0.025\n    if x == y\n        print \"Test Complete\"\n        break()\n    #You guys don't need to see this code, it's just detecting what keys are \n    #in the array and reading them to the file. But important to know that it is incrementing based on sent keys\n    else\n        x += 1\n    end\nend\n</code></pre>\n\n<p>My problem is that the classes.php it is reading from is 4,000 lines long and takes a long time to get through. If it messes up, I have to wait until it is finished. There is no way for me to stop this loop from running until it is finished unless I completely log out from everything, <code>CTRL+ALT+DEL</code> Option: <code>Logout</code>. I've tried <code>curses</code> I've tried <code>gets</code> on <code>exit</code>. <code>CTRL^C</code> doesn't work either. I'd much rather have a written in solution, but otherwise I wouldn't mind knowing a few keys to killswitch the process a.k.a. \"Kill it, kill it with keys\"</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "production-environment", "staging"], "comments": [{"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 2, "creation_date": 1459950697, "post_id": 36453168, "comment_id": 60518992, "body": "You should set up your staging site with a different database and a different url.  The whole idea of staging is that anything can break at any moment, or you could do any action while testing, and this won&#39;t affect your users.  If you used the same database then some bug or test could wipe all your real data out."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5496955"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1459950913, "post_id": 36453168, "comment_id": 60519191, "body": "But I want to use same database . Is it possible?"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 1, "creation_date": 1459951064, "post_id": 36453168, "comment_id": 60519328, "body": "Like walking into traffic with your eyes closed, it&#39;s certainly possible but a really terrible idea.  Unless of course you mean that the choice of DBMS (Postgres, Mysql, SQLite), and the data <b>schema</b> is the same, but the actual data is different, in which case that is exactly what you <b>should</b> do."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5496955"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1459951208, "post_id": 36453168, "comment_id": 60519433, "body": "Issue is that I want to use existing database for both cases. I cannot want to refill new database because I contain a lot of database. That&#39;s why I want to use for staging also"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 1, "creation_date": 1459951247, "post_id": 36453168, "comment_id": 60519471, "body": "You can <b>copy</b> the data from your production database to your staging database, but they need to be different databases."}], "answers": [{"tags": [], "owner": {"reputation": 275, "user_id": 5897779, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/475b00cf3d7ff07e35dee5a4e3460a75?s=128&d=identicon&r=PG&f=1", "display_name": "Ozgar", "link": "https://stackoverflow.com/users/5897779/ozgar"}, "is_accepted": false, "score": 0, "last_activity_date": 1459950834, "creation_date": 1459950834, "answer_id": 36453262, "question_id": 36453168, "link": "https://stackoverflow.com/questions/36453168/staging-and-production-environment-on-heroku/36453262#36453262", "title": "Staging and production environment on heroku", "body": "<ol>\n<li>It is a separate database. I cloned the one from production to get a good simulation.</li>\n<li>Not sure if I understand what you mean. But if the question is whether staging and production have the same URL then no. Staging usually looks like \"prod-url\"-staging</li>\n</ol>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5496955"}, "edited": false, "score": 0, "creation_date": 1459951021, "post_id": 36453308, "comment_id": 60519295, "body": "But I want to use same database . Is it possible?"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1459951189, "post_id": 36453308, "comment_id": 60519416, "body": "<b>Why</b> do you want to use the same database, in the face of people more knowledgeable than you telling you not to?"}, {"owner": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "edited": false, "score": 0, "creation_date": 1459951232, "post_id": 36453308, "comment_id": 60519457, "body": "Possible yes, but you do not want to do that at all! The best option would be to make a script that would copy the production database and importing to your staging database, but in general you don&#39;t want to be able to touch the production database everywhere else than in production."}, {"owner": {"user_type": "does_not_exist", "display_name": "user5496955"}, "edited": false, "score": 0, "creation_date": 1459951233, "post_id": 36453308, "comment_id": 60519459, "body": "Issue is that I want to use existing database for both cases. I cannot want to refill new database because I contain a lot of database. That&#39;s why I want to use for staging also"}, {"owner": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "edited": false, "score": 0, "creation_date": 1459951317, "post_id": 36453308, "comment_id": 60519536, "body": "Technically speaking, if you wanted to create a &quot;second production environment&quot; that you&#39;d call staging, you could yes. You&#39;ll need a very good reason to do so though (a data migration for instance)."}], "tags": [], "owner": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "is_accepted": false, "score": 1, "last_activity_date": 1459950943, "creation_date": 1459950943, "answer_id": 36453308, "question_id": 36453168, "link": "https://stackoverflow.com/questions/36453168/staging-and-production-environment-on-heroku/36453308#36453308", "title": "Staging and production environment on heroku", "body": "<ol>\n<li><p>No. Two different databases.</p></li>\n<li><p>Yes it will be different.</p></li>\n</ol>\n\n<p>staging and production are normally on two different hosts, with two different databases, two different url's.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5496955"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1459950943, "creation_date": 1459950633, "question_id": 36453168, "link": "https://stackoverflow.com/questions/36453168/staging-and-production-environment-on-heroku", "title": "Staging and production environment on heroku", "body": "<p>I want to create staging environment on heroku of an existing app. I want to know two things </p>\n\n<p>1) Is it using same database of production or not? If yes then either it requires some settings or not?</p>\n\n<p>2) Is the url's of both staging and production environments change or not?</p>\n\n<p>Please don't give links</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "gibbon"], "answers": [{"comments": [{"owner": {"reputation": 2139, "user_id": 1772521, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7c298ce296763bdd139477c465a2b4e6?s=128&d=identicon&r=PG", "display_name": "dwkns", "link": "https://stackoverflow.com/users/1772521/dwkns"}, "edited": false, "score": 1, "creation_date": 1459954791, "post_id": 36453400, "comment_id": 60522364, "body": "Yeah, until I realised that it does say it in the Readme. I&#39;ve re-written some of the instructions and submitted a Pull request hopefully that will help someone else out."}], "tags": [], "owner": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "is_accepted": false, "score": 1, "last_activity_date": 1459951135, "creation_date": 1459951135, "answer_id": 36453400, "question_id": 36453164, "link": "https://stackoverflow.com/questions/36453164/how-to-access-the-mailchimp-file-manager-files-api-endpoint-using-gibbon/36453400#36453400", "title": "How to access the Mailchimp file-manager/files API endpoint using Gibbon", "body": "<p>I think <a href=\"https://github.com/amro/gibbon/issues/189\" rel=\"nofollow\">you made the right call</a> in issuing an issue on their github page :).</p>\n\n<p>I believe their <a href=\"https://github.com/amro/gibbon/blob/master/lib/gibbon/request.rb#L17\" rel=\"nofollow\">method_missing magic</a> is having a little trouble figuring out this hyphen indeed.</p>\n"}, {"comments": [{"owner": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "edited": false, "score": 0, "creation_date": 1459954913, "post_id": 36454851, "comment_id": 60522454, "body": "Haha, indeed: <a href=\"https://github.com/amro/gibbon/blob/master/lib/gibbon/request.rb#L19\" rel=\"nofollow noreferrer\">github.com/amro/gibbon/blob/master/lib/gibbon/request.rb#L19</a>"}], "tags": [], "owner": {"reputation": 2139, "user_id": 1772521, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7c298ce296763bdd139477c465a2b4e6?s=128&d=identicon&r=PG", "display_name": "dwkns", "link": "https://stackoverflow.com/users/1772521/dwkns"}, "is_accepted": false, "score": 0, "last_activity_date": 1459954562, "creation_date": 1459954562, "answer_id": 36454851, "question_id": 36453164, "link": "https://stackoverflow.com/questions/36453164/how-to-access-the-mailchimp-file-manager-files-api-endpoint-using-gibbon/36454851#36454851", "title": "How to access the Mailchimp file-manager/files API endpoint using Gibbon", "body": "<p>Turns out that Gibbon expects you to use underscores <code>_</code> instead of dashes <code>-</code> in the calls.</p>\n\n<p>The correct call is...</p>\n\n<pre><code>files = gibbon.file_manager.files.retrieve\n</code></pre>\n"}], "owner": {"reputation": 2139, "user_id": 1772521, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/7c298ce296763bdd139477c465a2b4e6?s=128&d=identicon&r=PG", "display_name": "dwkns", "link": "https://stackoverflow.com/users/1772521/dwkns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1459954562, "creation_date": 1459950617, "last_edit_date": 1459952227, "question_id": 36453164, "link": "https://stackoverflow.com/questions/36453164/how-to-access-the-mailchimp-file-manager-files-api-endpoint-using-gibbon", "title": "How to access the Mailchimp file-manager/files API endpoint using Gibbon", "body": "<p>I'm using <a href=\"http://developer.mailchimp.com/documentation/mailchimp/reference/file-manager/files/\" rel=\"nofollow\">Gibbon</a> to access the <a href=\"http://developer.mailchimp.com/documentation/mailchimp/reference/overview/\" rel=\"nofollow\">Mailchimp API</a>.</p>\n\n<p>I've no problem using...</p>\n\n<pre><code>gibbon = Gibbon::Request.new(api_key: \"valid-api-key\")\nlists = gibbon.lists.retrieve\n</code></pre>\n\n<p>And getting back the lists stored in the account.</p>\n\n<p>However I'm struggling with the <a href=\"http://developer.mailchimp.com/documentation/mailchimp/reference/file-manager/files/\" rel=\"nofollow\">file-manager/files</a> API endpoint.</p>\n\n<p>Trying...</p>\n\n<pre><code>files = gibbon.file-manager.files.retrieve\n</code></pre>\n\n<p>throws a <code>undefined local variable or method 'manager' for main:Object (NameError)</code> error. Which suggests that the <code>-</code> sign is not being correctly parsed.  </p>\n\n<p>And...</p>\n\n<pre><code>files = gibbon.filemanager.files.retrieve\n</code></pre>\n\n<p>returns a 404 error as you'd expect.</p>\n\n<p>So my question : Is this a problem with the Gibbon Gem or is there another way to access the file-manager/files endpoint?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", ".htaccess"], "answers": [{"tags": [], "owner": {"reputation": 438, "user_id": 716185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29912acf4124f78d29de7a0f5adf89d0?s=128&d=identicon&r=PG", "display_name": "amalrik maia", "link": "https://stackoverflow.com/users/716185/amalrik-maia"}, "is_accepted": true, "score": 2, "last_activity_date": 1459950784, "last_edit_date": 1495541261, "creation_date": 1459950462, "answer_id": 36453099, "question_id": 36452957, "link": "https://stackoverflow.com/questions/36452957/ruby-in-rails-www-subdomain-redirect/36453099#36453099", "title": "Ruby in Rails www subdomain redirect", "body": "<pre><code>redirect_to(\"#{request.protocol}www.#{request.host_with_port}#{request.fullpath}\",status: 301)\n</code></pre>\n\n<p>I think this kind of redirect is more suited to the web server. These are the rules:</p>\n\n<p><strong>Apache</strong></p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n  ServerName example.com\n  Redirect permanent / http://www.example.com/\n&lt;/VirtualHost&gt;\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/1100343/apache-redirect-from-non-www-to-www\">source</a></p>\n\n<p><strong>NGINX</strong></p>\n\n<pre><code>server {\n    listen 80;\n    server_name www.domain.com;\n    # $scheme will get the http protocol\n    # and 301 is best practice for tablet, phone, desktop and seo\n    return 301 $scheme://domain.com$request_uri;\n</code></pre>\n\n<p>}</p>\n\n<pre><code>server {\n    listen 80;\n    server_name domain.com;\n    # here goes the rest of your config file\n    # example \n    location / {\n\n        rewrite ^/cp/login?$ /cp/login.php last;\n        # etc etc...\n\n    }\n}\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/questions/7947030/nginx-no-www-to-www-and-www-to-no-www\">source</a></p>\n"}], "owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 212, "favorite_count": 0, "accepted_answer_id": 36453099, "answer_count": 1, "score": 0, "last_activity_date": 1459950784, "creation_date": 1459950130, "question_id": 36452957, "link": "https://stackoverflow.com/questions/36452957/ruby-in-rails-www-subdomain-redirect", "title": "Ruby in Rails www subdomain redirect", "body": "<p>Here is my Ruby on Rails code to redirect a request from <code>https://example.com</code> to <code>https://www.example.com</code>:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\nbefore_filter :add_www_subdomain\n\nprivate\n\n    def add_www_subdomain\n      if Rails.env.production?\n        unless /^www/.match(request.host)\n          redirect_to(\"#{request.protocol}www.#{request.host_with_port}\",status: 301)\n        end\n      end\n    end\nend\n</code></pre>\n\n<p>Now the issue is, when someone lands at <code>https://example.com/product/abc</code> they are being redirected to <code>https://www.example.com</code> supposedly, they should go to  <code>https://www.example.com/product/abc</code>. Is there any trick for this? Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"comments": [{"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1459950316, "post_id": 36452593, "comment_id": 60518703, "body": "Ok, that makes sense... so, oddly, there isn&#39;t a <code>def create</code> method in my devise registrations controller.  So, when a user signs up, what drives it?  Is the controller somewhere else or backed into a devise script somewhere else?"}, {"owner": {"reputation": 4107, "user_id": 1612469, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/VaKOC.jpg?s=128&g=1", "display_name": "Aleks", "link": "https://stackoverflow.com/users/1612469/aleks"}, "reply_to_user": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1460013156, "post_id": 36452593, "comment_id": 60549106, "body": "@Godzilla74 The registration controller is located in the Devise itself. We only generate another <code>registration_controller.rb</code> file if we want to override the base functionality which is in the Devise. A bit harder to see it by yourself, other then digging into the Devise, but many users have already done this, so that&#39;s why so many different resources telling how to do something with it."}], "tags": [], "owner": {"reputation": 4107, "user_id": 1612469, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/VaKOC.jpg?s=128&g=1", "display_name": "Aleks", "link": "https://stackoverflow.com/users/1612469/aleks"}, "is_accepted": true, "score": 1, "last_activity_date": 1459949262, "creation_date": 1459949262, "answer_id": 36452593, "question_id": 36452436, "link": "https://stackoverflow.com/questions/36452436/devise-custom-mailer-using-sendgrid/36452593#36452593", "title": "Devise custom mailer using Sendgrid", "body": "<p>Put it here:</p>\n\n<pre><code>class DeviseMailer &lt; Devise::Mailer\n  helper :application\n  include Devise::Controllers::UrlHelpers\n  default template_path: 'devise/mailer'\n\n  def self.confirmation_instructions(record, token, opts={})\n    new(:confirmation_instructions, record, token, opts)\n  end\nend\n</code></pre>\n\n<p>(Note changed method)</p>\n\n<p>And then call it wherever you want from any controller like this:</p>\n\n<pre><code>current_user.send_confirmation_instructions\n</code></pre>\n"}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1020, "favorite_count": 0, "accepted_answer_id": 36452593, "answer_count": 1, "score": 0, "last_activity_date": 1459949262, "creation_date": 1459948829, "last_edit_date": 1459949007, "question_id": 36452436, "link": "https://stackoverflow.com/questions/36452436/devise-custom-mailer-using-sendgrid", "title": "Devise custom mailer using Sendgrid", "body": "<p>I'd like to use a Sendgrid template to send users their welcome email when they signup for my site.  I've checked out: <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Use-custom-mailer\" rel=\"nofollow\">Devise's How-to Use customer mailer</a> and already done the first few steps, however, I'm stuck on where to put the <code>confirmation_instructions</code> method since I need to be able to put in some custom information and substitution variables to pass through.  I'm also using the devise generated controller <code>controllers/users/...</code></p>\n\n<p>This is what I have so far:</p>\n\n<p><strong>Custom Class: models/devise_mailer.rb</strong></p>\n\n<pre><code>class DeviseMailer &lt; Devise::Mailer\n  helper :application\n  include Devise::Controllers::UrlHelpers\n  default template_path: 'devise/mailer'\nend\n</code></pre>\n\n<p><strong>config/initializers/devise.rb</strong></p>\n\n<p>added: <code>config.mailer = \"DeviseMailer\"</code></p>\n\n<p>Now from here, I'm supposed to do something like below, but I don't know where to put that.  Do I need to make a custom controller?  If so, how do I make sure new user registrations use the method?:</p>\n\n<pre><code>def confirmation_instructions(record, token, opts={})\n  headers[\"Custom-header\"] = \"Bar\"\n  super\nend\n</code></pre>\n\n<p>Am I way off here?</p>\n"}, {"tags": ["ruby", "unit-testing", "facade"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1459947445, "post_id": 36451718, "comment_id": 60516395, "body": "And you can omit empty parentheses in both, method definitions and method calls."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1459947590, "post_id": 36451718, "comment_id": 60516506, "body": "You <i>can</i>, that doesn&#39;t mean you <i>should</i>. That&#39;s far more of an opinion/personal choice than the strong preference for snake_case."}], "answers": [{"comments": [{"owner": {"reputation": 23546, "user_id": 43677, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/24cd20295b27bdbf4d62475f651a9cd0?s=128&d=identicon&r=PG", "display_name": "bezmax", "link": "https://stackoverflow.com/users/43677/bezmax"}, "edited": false, "score": 0, "creation_date": 1459950977, "post_id": 36451937, "comment_id": 60519247, "body": "Given I&#39;m using Rspec, where should I mock this service? Am I correct that I should create an instance-double, and write it directly into MyEntity.service_field before running the test? Or should I make some kind of <code>self.initialize_entity_service(service)</code> method as a &quot;setter&quot; for this field? Or, should I make a partial double of my MyEntity class, mocking the whole method <code>self.entity_access_service</code> alltogether?"}, {"owner": {"reputation": 3160, "user_id": 1266795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7855792dbc5f3b4c365344314e2b1ad6?s=128&d=identicon&r=PG", "display_name": "AndyV", "link": "https://stackoverflow.com/users/1266795/andyv"}, "edited": false, "score": 0, "creation_date": 1459960845, "post_id": 36451937, "comment_id": 60526879, "body": "Yes to instance_double!  The answer to how you provide the double really depends on what you want your api to look like.  If you follow the method mentioned above where the class instantiates the access service itself, then you can mock whatever call instantiates the access service and return the instance double.  Alternatively, you could provide a setter for the access service and use a before block to set the value in testing.  I would probably lean towards the class instantiation path; the class setter path likely means a large set of initializers somewhere."}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": true, "score": 1, "last_activity_date": 1459947949, "last_edit_date": 1459947949, "creation_date": 1459947604, "answer_id": 36451937, "question_id": 36451718, "link": "https://stackoverflow.com/questions/36451718/creating-facade-idiomatically-in-ruby/36451937#36451937", "title": "Creating facade idiomatically in Ruby", "body": "<p>Following ActiveRecord's example, you can create a method on your class itself, or on the base class from which your other classes are derived.</p>\n\n<p>ActiveRecord provides a method <code>ActiveRecord::Base.connection</code> which returns the connection object which all models use to access the database. You can do something similar:</p>\n\n<pre><code>class MyEntity\n    ....\n\n    def self.entity_access_service\n      # return your service object\n    end\n\n    def self.find(id)\n        MyEntity.entity_access_service.get_data_for(id)\n        MyEntity.new(data) # Or whatever way to populate my entity\n    end\n\n    def save() \n        MyEntity.entity_access_service.save(@id, @loadedName, @loadedSurname)\n    end\nend\n</code></pre>\n\n<p>As far as initialization goes, you either have to have a initialization step in your app (and test suite) where service credentials are read from config files and passed into your <code>MyEntity</code> object, <em>or</em> your <code>entity_access_service</code> method can lazily create the object it returns on first access using a very common Ruby idiom:</p>\n\n<pre><code>def self.entity_access_service\n  @entity_access_service || = # build entity_access_service object\nend\n</code></pre>\n\n<p>Note that, by wrapping your class-level instance variables in class-level accessor methods, you can avoid the use of <code>@@</code> which is a <a href=\"https://github.com/bbatsov/ruby-style-guide#no-class-vars\" rel=\"nofollow\">recommended best practice</a>.</p>\n"}], "owner": {"reputation": 23546, "user_id": 43677, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/24cd20295b27bdbf4d62475f651a9cd0?s=128&d=identicon&r=PG", "display_name": "bezmax", "link": "https://stackoverflow.com/users/43677/bezmax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 36451937, "answer_count": 1, "score": 0, "last_activity_date": 1459947949, "creation_date": 1459947032, "last_edit_date": 1459947915, "question_id": 36451718, "link": "https://stackoverflow.com/questions/36451718/creating-facade-idiomatically-in-ruby", "title": "Creating facade idiomatically in Ruby", "body": "<p>I'm trying to implement a Facade in idiomatic Ruby while coming from Java. I can see that Rails' <code>ActiveRecord</code> is fond of using class methods for things like <code>find_by(criteria)</code> and does not use Repository pattern for that task.</p>\n\n<p>My Facade wraps a specific webservice with several methods. My original idea was to make it's API similar to <code>ActiveRecord</code> (learning by imitation):</p>\n\n<pre><code>class MyEntity\n  # ....\n\n  def get_name\n    @loaded_name + @loaded_surname\n  end\n\n  def delete\n    @entity_access_service.delete(@id)\n  end\n\n  def save \n    @entity_access_service.save(@id, @loaded_name , @loaded_surname)\n  end\n\n  def self.find(id)\n    data = @entity_access_service.get_data_for(id)\n    MyEntity.new(data) #Or whatever way to populate my entity\n  end\nend\n</code></pre>\n\n<p>This, in theory, would work great:</p>\n\n<pre><code>e = MyEntity.find(10)\np e.get_name\ne.delete\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>e = MyEntity.new(some stuff)\ne.save\n</code></pre>\n\n<p><strong>Question:</strong>\nFor <code>save</code> and <code>delete</code> instance methods to work, I need to somehow get an instance of <code>EntityAccessService</code>. This instance should be mockable to test it in isolated environment. What is the correct way to do it? </p>\n\n<p>I'm expecting my tests to look as simple as possible and without some weird hacks, as what I'm trying to implement seems fairly trivial.</p>\n\n<p>I have thought of several options to do that:</p>\n\n<ol>\n<li><p>Having a class-level variable holding <code>entity_access_service</code> used by all of the entities created in application. In this case, where should I initialize this field? For example:</p>\n\n<pre><code>class MyEntity\n  @@entity_access_service = nil\nend\n\n# Somewhere else (where?):\nMyEntity.entity_access_service = MyEntityService.new(some_params_from_env)\n</code></pre>\n\n<p>This way, in my tests I would have to initialize/mock it at start.</p></li>\n<li><p>Similar to 1 but initialize it in the class. This looks weird, especially if I know that my tests do not have required ENV params populated at all.</p></li>\n<li><p>Have an extra constructor/attribute to set the <code>entity_service</code>. This won't work, as <code>save</code> would not have this field initialized.</p></li>\n<li><p>Create a <code>Repository</code> class. This would work pretty ok, but seems to be not what Ruby people do.</p></li>\n</ol>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "jquery-ui"], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 4126551, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/739432433/picture?type=large", "display_name": "ace", "link": "https://stackoverflow.com/users/4126551/ace"}, "edited": false, "score": 0, "creation_date": 1459950311, "post_id": 36450779, "comment_id": 60518696, "body": "instead of replacing only the {value_to_be_replaced} - that would only work on the first replacement (spinner move), how can I make it to update on any value on the &quot;value&quot; even after the first update? This is working so I already marked the reply as solution!"}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "reply_to_user": {"reputation": 153, "user_id": 4126551, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/739432433/picture?type=large", "display_name": "ace", "link": "https://stackoverflow.com/users/4126551/ace"}, "edited": false, "score": 0, "creation_date": 1459951187, "post_id": 36450779, "comment_id": 60519415, "body": "@ace you can save the link template somewhere before the first assignment"}, {"owner": {"reputation": 153, "user_id": 4126551, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/739432433/picture?type=large", "display_name": "ace", "link": "https://stackoverflow.com/users/4126551/ace"}, "edited": false, "score": 0, "creation_date": 1459952092, "post_id": 36450779, "comment_id": 60520164, "body": "I don&#39;t understand how I can make it, if anyone can help I would appreciate!"}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "reply_to_user": {"reputation": 153, "user_id": 4126551, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/739432433/picture?type=large", "display_name": "ace", "link": "https://stackoverflow.com/users/4126551/ace"}, "edited": false, "score": 0, "creation_date": 1459952268, "post_id": 36450779, "comment_id": 60520281, "body": "@ace for example - <code>$(function(){  $(&#39;a.theButtonClass&#39;).data(&#39;linktemplate&#39;, $(&#39;a.theButtonClass&#39;).attr(&#39;href&#39;)); });</code> and then use <code>$(&#39;a.theButtonClass&#39;).data(&#39;linktemplate&#39;)</code> as a template"}, {"owner": {"reputation": 153, "user_id": 4126551, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/739432433/picture?type=large", "display_name": "ace", "link": "https://stackoverflow.com/users/4126551/ace"}, "edited": false, "score": 0, "creation_date": 1459956433, "post_id": 36450779, "comment_id": 60523635, "body": "spent last hour trying to adapt your solution (for single change) with this without success, if you can edit previous solution with this it would be great since I am unable to make it. sorry I&#39;m very noob in js.."}], "tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": true, "score": 1, "last_activity_date": 1459944713, "creation_date": 1459944713, "answer_id": 36450779, "question_id": 36450279, "link": "https://stackoverflow.com/questions/36450279/rails-4-use-script-variable-as-button-value/36450779#36450779", "title": "Rails 4 - Use Script Variable as Button Value", "body": "<p>Actually using a <code>form</code> for this task looks like a more suitable solution - make the button a <code>submit</code> element and store the slider value in a hidden field.</p>\n\n<p>But in your current code you may just dynamically change the <code>href</code> property of the link (the <code>a</code> element).</p>\n\n<pre><code>&lt;%= link_to \"My Button\", {controller: \"my_controller\", action: \"my_action\", value:'{value_to_be_replaced}' }, class:'theButtonClass'%&gt;\n</code></pre>\n\n<p>And:</p>\n\n<pre><code>$('a.theButtonClass').attr('href',\n  $('a.theButtonClass').attr('href').replace(\n    encodeURIComponent('{value_to_be_replaced}'),\n    encodeURIComponent('your_new_value_here')\n  )\n);\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 4126551, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/739432433/picture?type=large", "display_name": "ace", "link": "https://stackoverflow.com/users/4126551/ace"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 36450779, "answer_count": 1, "score": 0, "last_activity_date": 1459944713, "creation_date": 1459943335, "question_id": 36450279, "link": "https://stackoverflow.com/questions/36450279/rails-4-use-script-variable-as-button-value", "title": "Rails 4 - Use Script Variable as Button Value", "body": "<p>I am using a jquery ui slider (<a href=\"http://jqueryui.com/slider/\" rel=\"nofollow\">http://jqueryui.com/slider/</a>) inside my ruby erb code.</p>\n\n<pre><code>$( \"#slider\" ).slider({\n        range:'min',\n        value:&lt;%= @last_change %&gt;,\n        min: 0.01,\n        max: 98,\n        step: 0.01,\n        slide: function( event, ui ) {\n            $( \"#slider-value\" ).html( ui.value );\n        }\n});\n\n\n$( \"#slider-value\" ).html(  $('#slider').slider('value') );\n</code></pre>\n\n<p>The challenge is put a button using this value updated, with this script variable #slider-value.\nAt the moment I can show this variable to on my erb (outside JS) with the following: </p>\n\n<p><code>&lt;p&gt;Spinner has a value of &lt;span id=\"slider-value\"&gt;&lt;/span&gt;&lt;/p&gt;</code></p>\n\n<p>However my question is, how could I use this value on the following button:</p>\n\n<p><code>&lt;%= link_to \"My Button\", {:controller =&gt; \"my_controller\", :action =&gt; \"my_action\", :value =&gt; **slider_value_from_js** }%&gt;</code></p>\n\n<p>I read and I understand that js is client side and server can't handle client things => many references to use complex ajax, partials and stuff, however I don't think that's the problem here since form requests / buttons always use client inputs and that's just that what I need.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "edited": false, "score": 0, "creation_date": 1459942861, "post_id": 36449880, "comment_id": 60512753, "body": "For your first problem, it would be interesting to investigate why <code>@post.comments</code> is nil. I&#39;d be for debugging with <code>binding.pry</code> here to see what&#39;s the value of a @post.  For your second problem, I would also try to see what are the value of <code>comment</code>"}, {"owner": {"reputation": 413, "user_id": 3385759, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6da655974e22fbe22501ee84b485b824?s=128&d=identicon&r=PG&f=1", "display_name": "OhDaeSu", "link": "https://stackoverflow.com/users/3385759/ohdaesu"}, "reply_to_user": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "edited": false, "score": 0, "creation_date": 1459943568, "post_id": 36449880, "comment_id": 60513280, "body": "For the 2nd problem: When I create a new Post and type into the rails console &gt;Post.last.comments.nil? =&gt; false. So there is automatically a &quot;ghost&quot; comment or is that normal? That&#39;s strange to me. When I then type &gt;Post.last.comments.last.nil? =&gt; true. So my &quot;ghost&quot; comment has no values in it :)? For example I cannot type &lt;Post.last.comments.last.content. This gives me an error message."}, {"owner": {"reputation": 2093, "user_id": 1747295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70b9d5ee5e89974383b7cf856e1dea8?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yawar Ali", "link": "https://stackoverflow.com/users/1747295/muhammad-yawar-ali"}, "edited": false, "score": 0, "creation_date": 1459943853, "post_id": 36449880, "comment_id": 60513513, "body": "share the code for your new form"}, {"owner": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "edited": false, "score": 0, "creation_date": 1459944329, "post_id": 36449880, "comment_id": 60513857, "body": "Just try <code>Post.last.comments</code> to see what&#39;s inside, it will give you better insights, and you can use <code>blank?</code> instead of <code>nil?</code>, as comments would return <code>[]</code> and an empty array would not be considered <code>nil</code>."}, {"owner": {"reputation": 413, "user_id": 3385759, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6da655974e22fbe22501ee84b485b824?s=128&d=identicon&r=PG&f=1", "display_name": "OhDaeSu", "link": "https://stackoverflow.com/users/3385759/ohdaesu"}, "edited": false, "score": 0, "creation_date": 1459946132, "post_id": 36449880, "comment_id": 60515274, "body": "<code>Post.last.comments</code> is giving me &#39;SELECT &quot;comments&quot;.* FROM &quot;comments&quot; WHERE &quot;comments&quot;.&quot;post_id&quot; = ?  [[&quot;post_id&quot;, 46]]  =&gt; #&lt;ActiveRecord::Associations::CollectionProxy []&gt;&#39;"}, {"owner": {"reputation": 413, "user_id": 3385759, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6da655974e22fbe22501ee84b485b824?s=128&d=identicon&r=PG&f=1", "display_name": "OhDaeSu", "link": "https://stackoverflow.com/users/3385759/ohdaesu"}, "reply_to_user": {"reputation": 2093, "user_id": 1747295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70b9d5ee5e89974383b7cf856e1dea8?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yawar Ali", "link": "https://stackoverflow.com/users/1747295/muhammad-yawar-ali"}, "edited": false, "score": 0, "creation_date": 1459946411, "post_id": 36449880, "comment_id": 60515516, "body": "@MuhammadYawarAli I&#39;ve edited the post with the posts#new form :)"}, {"owner": {"reputation": 413, "user_id": 3385759, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6da655974e22fbe22501ee84b485b824?s=128&d=identicon&r=PG&f=1", "display_name": "OhDaeSu", "link": "https://stackoverflow.com/users/3385759/ohdaesu"}, "reply_to_user": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "edited": false, "score": 0, "creation_date": 1459946476, "post_id": 36449880, "comment_id": 60515571, "body": "@born4new: And <code>Post.last.comments.last.blank?</code> results to true."}, {"owner": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "edited": false, "score": 0, "creation_date": 1459946607, "post_id": 36449880, "comment_id": 60515697, "body": "If <code>Post.last.comments.blank?</code> is true, it means your post does not have any comments, which is not actually a problem. It just means you need to add comments to this post."}, {"owner": {"reputation": 413, "user_id": 3385759, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6da655974e22fbe22501ee84b485b824?s=128&d=identicon&r=PG&f=1", "display_name": "OhDaeSu", "link": "https://stackoverflow.com/users/3385759/ohdaesu"}, "edited": false, "score": 0, "creation_date": 1459946829, "post_id": 36449880, "comment_id": 60515877, "body": "Thanks for your reply. But it&#39;s still strange to me, that a &quot;delete&quot;-link appears although this post doesn&#39;t have any comments, mhh."}, {"owner": {"reputation": 413, "user_id": 3385759, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6da655974e22fbe22501ee84b485b824?s=128&d=identicon&r=PG&f=1", "display_name": "OhDaeSu", "link": "https://stackoverflow.com/users/3385759/ohdaesu"}, "edited": false, "score": 0, "creation_date": 1459947452, "post_id": 36449880, "comment_id": 60516401, "body": "1st problem: Instead of <code>render root_path</code> I have tried <code>render &quot;posts&#47;show&quot;</code>. At least now my flash message is showing up, but strangly another empty comment was saved, mhh..."}], "answers": [{"comments": [{"owner": {"reputation": 413, "user_id": 3385759, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6da655974e22fbe22501ee84b485b824?s=128&d=identicon&r=PG&f=1", "display_name": "OhDaeSu", "link": "https://stackoverflow.com/users/3385759/ohdaesu"}, "edited": false, "score": 0, "creation_date": 1459947228, "post_id": 36451619, "comment_id": 60516223, "body": "thanks, I&#39;ve tried it that way, but it gave me an <i>undefined method build</i> error. With <code>@comment = Comment.create(comment_params)</code> it is working similar to my code, though my two problems are still there :("}, {"owner": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "reply_to_user": {"reputation": 413, "user_id": 3385759, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6da655974e22fbe22501ee84b485b824?s=128&d=identicon&r=PG&f=1", "display_name": "OhDaeSu", "link": "https://stackoverflow.com/users/3385759/ohdaesu"}, "edited": false, "score": 0, "creation_date": 1459947371, "post_id": 36451619, "comment_id": 60516323, "body": "Sorry, meant to write <code>new</code> instead of <code>build</code>. I edited my answer accordingly."}, {"owner": {"reputation": 413, "user_id": 3385759, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6da655974e22fbe22501ee84b485b824?s=128&d=identicon&r=PG&f=1", "display_name": "OhDaeSu", "link": "https://stackoverflow.com/users/3385759/ohdaesu"}, "edited": false, "score": 0, "creation_date": 1459948530, "post_id": 36451619, "comment_id": 60517308, "body": "Thanks, I&#39;ve tried your solution with Muhammads solution and changed <code>render root_path</code> to <code>render &quot;posts&#47;show&quot;</code> and now at least my custom flash message &quot;something went wrong&quot; shows up. Do you by chance know a way so that rails validation errors show up (for example: &quot;Content can&#39;t be blank&quot;)? The second problem, that there is still a ghost &quot;delete comment&quot;-link whenever I create a post, is still there"}, {"owner": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "reply_to_user": {"reputation": 413, "user_id": 3385759, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6da655974e22fbe22501ee84b485b824?s=128&d=identicon&r=PG&f=1", "display_name": "OhDaeSu", "link": "https://stackoverflow.com/users/3385759/ohdaesu"}, "edited": false, "score": 0, "creation_date": 1459949218, "post_id": 36451619, "comment_id": 60517835, "body": "Yes, you need to add some code to display the content of the <code>flash</code> hash to your views (check out this rails guide section about this: <a href=\"http://guides.rubyonrails.org/active_record_validations.html#displaying-validation-errors-in-views\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>). About your second problem, what is the return value of the <code>link_to</code> helper? What html does it generate?"}, {"owner": {"reputation": 413, "user_id": 3385759, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6da655974e22fbe22501ee84b485b824?s=128&d=identicon&r=PG&f=1", "display_name": "OhDaeSu", "link": "https://stackoverflow.com/users/3385759/ohdaesu"}, "edited": false, "score": 0, "creation_date": 1459949886, "post_id": 36451619, "comment_id": 60518347, "body": "This is the html which is generated when I create a new post (not a comment): <code>&lt;a data-confirm=&quot;Are you sure?&quot; rel=&quot;nofollow&quot; data-method=&quot;delete&quot; href=&quot;&#47;posts&#47;51&#47;comments&quot;&gt;delete&lt;&#47;a&gt;</code>. In addition to that there are two empty <code>&lt;p&gt;</code> tags which usually belongs to the &quot;name&quot;- and &quot;content&quot;-field of this &quot;ghost&quot;-comment."}, {"owner": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "reply_to_user": {"reputation": 413, "user_id": 3385759, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6da655974e22fbe22501ee84b485b824?s=128&d=identicon&r=PG&f=1", "display_name": "OhDaeSu", "link": "https://stackoverflow.com/users/3385759/ohdaesu"}, "edited": false, "score": 0, "creation_date": 1459950097, "post_id": 36451619, "comment_id": 60518512, "body": "Okay, see my answer below."}], "tags": [], "owner": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "is_accepted": false, "score": 1, "last_activity_date": 1459947346, "last_edit_date": 1459947346, "creation_date": 1459946800, "answer_id": 36451619, "question_id": 36449880, "link": "https://stackoverflow.com/questions/36449880/rails-creating-a-blog-validation-for-comments-belong-to-a-post-does-not-wor/36451619#36451619", "title": "Rails / Creating a Blog: Validation for comments (belong to a post) does not work", "body": "<p>Instead of using <code>@post</code> as the main object in your controller for creating a comment, I would actually do it like so:</p>\n\n<pre><code>@comment = Comment.new(comment_params)\n@comment.post = @post\n\nif @comment.save\n  [...]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 413, "user_id": 3385759, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6da655974e22fbe22501ee84b485b824?s=128&d=identicon&r=PG&f=1", "display_name": "OhDaeSu", "link": "https://stackoverflow.com/users/3385759/ohdaesu"}, "edited": false, "score": 0, "creation_date": 1459948454, "post_id": 36451851, "comment_id": 60517255, "body": "Thanks, I&#39;ve tried your solution, changed <code>render root_path</code> to <code>render &quot;posts&#47;show&quot;</code> and now at least my custom flash message &quot;something went wrong&quot; is showing up. Do you by chance know a way so that rails validation errors show up (for example: &quot;Content can&#39;t be blank&quot;)? The second problem, that there is still a &quot;delete comment&quot;-link whenever I create a post, is still there."}], "tags": [], "owner": {"reputation": 2093, "user_id": 1747295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70b9d5ee5e89974383b7cf856e1dea8?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yawar Ali", "link": "https://stackoverflow.com/users/1747295/muhammad-yawar-ali"}, "is_accepted": false, "score": 1, "last_activity_date": 1459947405, "creation_date": 1459947405, "answer_id": 36451851, "question_id": 36449880, "link": "https://stackoverflow.com/questions/36449880/rails-creating-a-blog-validation-for-comments-belong-to-a-post-does-not-wor/36451851#36451851", "title": "Rails / Creating a Blog: Validation for comments (belong to a post) does not work", "body": "<p>Actually you are not passing <code>post_id</code> to create method and thats why its not saving comment against the post.</p>\n\n<p>Add post_id to your <code>post#new</code> form as hidden field like :</p>\n\n<pre><code>&lt;%= form_for(@post) do |f| %&gt;\n  &lt;% if @post.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= @post.errors.count %&gt; Fehler:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% @post.errors.full_messages.each do |msg| %&gt;\n        &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"image-box\"&gt;\n    &lt;p&gt;&lt;%= f.file_field :image%&gt;&lt;/p&gt;\n  &lt;/div&gt;\n    &lt;div class=\"title-box\"&gt;\n      &lt;p&gt;&lt;%= f.label :title, \"Titel\" %&gt;&lt;/p&gt;\n      &lt;p&gt;&lt;%= f.text_field :title, class: \"title-field\"%&gt;&lt;/p&gt;\n      &lt;%= hidden_field_tag :post_id, @post.id %&gt;\n    &lt;/div&gt;\n     &lt;div class=\"content-box\"&gt;\n      &lt;p&gt;&lt;%= f.label :content, \"Inhalt\" %&gt;&lt;/p&gt;\n      &lt;p&gt;&lt;%= f.text_area :content, class: \"content-field\"%&gt;&lt;/p&gt;\n    &lt;/div&gt;\n    &lt;p&gt;&lt;%= f.submit %&gt;&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This will resolve your issue hopefully.</p>\n\n<p>Or you can allow post_id in <code>CommentsController</code> strong params and send <code>post_id</code> along with comment new form to create method &amp; create will be like :</p>\n\n<pre><code>def create\n    @comment = Comment.new(comment_params)\n    if @comment.save\n      flash[:success] = \"Comment saved!\"\n      redirect_to post_path(@post)\n    else\n      flash[:alert] = \"Something went wrong!\"\n      render root_path             \n    end\nend\n\ndef comment_params \n      params.require(:comment).permit(:name, :email, :content, :post_id)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 413, "user_id": 3385759, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6da655974e22fbe22501ee84b485b824?s=128&d=identicon&r=PG&f=1", "display_name": "OhDaeSu", "link": "https://stackoverflow.com/users/3385759/ohdaesu"}, "edited": false, "score": 0, "creation_date": 1459950726, "post_id": 36453015, "comment_id": 60519019, "body": "Does that mean that there is always one &quot;not saved&quot; comment whenever I create a new post? I&#39;ve tried your solution but the sneaky &quot;no-id-comment&quot; is still showing up, argh!"}, {"owner": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "reply_to_user": {"reputation": 413, "user_id": 3385759, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6da655974e22fbe22501ee84b485b824?s=128&d=identicon&r=PG&f=1", "display_name": "OhDaeSu", "link": "https://stackoverflow.com/users/3385759/ohdaesu"}, "edited": false, "score": 0, "creation_date": 1459950846, "post_id": 36453015, "comment_id": 60519124, "body": "Will correct my answer again (tired today?), I meant <code>comment.persisted?</code>"}, {"owner": {"reputation": 413, "user_id": 3385759, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6da655974e22fbe22501ee84b485b824?s=128&d=identicon&r=PG&f=1", "display_name": "OhDaeSu", "link": "https://stackoverflow.com/users/3385759/ohdaesu"}, "edited": false, "score": 1, "creation_date": 1459951031, "post_id": 36453015, "comment_id": 60519305, "body": "Yay, thanks a lot, the delete-link is gone :) (and sorry, I didn&#39;t mean to sound rude if that was your impression. That wasn&#39;t my intention)."}, {"owner": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "reply_to_user": {"reputation": 413, "user_id": 3385759, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6da655974e22fbe22501ee84b485b824?s=128&d=identicon&r=PG&f=1", "display_name": "OhDaeSu", "link": "https://stackoverflow.com/users/3385759/ohdaesu"}, "edited": false, "score": 1, "creation_date": 1459951155, "post_id": 36453015, "comment_id": 60519387, "body": "Don&#39;t you worry about it :)."}], "tags": [], "owner": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "is_accepted": true, "score": 1, "last_activity_date": 1459950856, "last_edit_date": 1459950856, "creation_date": 1459950243, "answer_id": 36453015, "question_id": 36449880, "link": "https://stackoverflow.com/questions/36449880/rails-creating-a-blog-validation-for-comments-belong-to-a-post-does-not-wor/36453015#36453015", "title": "Rails / Creating a Blog: Validation for comments (belong to a post) does not work", "body": "<p>The issue I see here is that the comment has not been saved in the database, that's the reason why it does not have an id, and that's why you get this html:</p>\n\n<pre><code>&lt;a data-confirm=\"Are you sure?\" rel=\"nofollow\" data-method=\"delete\" href=\"/posts/51/comments\"&gt;delete&lt;/a&gt;\n</code></pre>\n\n<p>The id is missing.</p>\n\n<p>If I were you, I would just check if the comment is present when rendering the view, so that you will only show existing comments to the user:</p>\n\n<pre><code>&lt;% if comment.persisted? %&gt;\n  [...]\n</code></pre>\n"}], "owner": {"reputation": 413, "user_id": 3385759, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6da655974e22fbe22501ee84b485b824?s=128&d=identicon&r=PG&f=1", "display_name": "OhDaeSu", "link": "https://stackoverflow.com/users/3385759/ohdaesu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 987, "favorite_count": 0, "accepted_answer_id": 36453015, "answer_count": 3, "score": 0, "last_activity_date": 1459950856, "creation_date": 1459942352, "last_edit_date": 1459946361, "question_id": 36449880, "link": "https://stackoverflow.com/questions/36449880/rails-creating-a-blog-validation-for-comments-belong-to-a-post-does-not-wor", "title": "Rails / Creating a Blog: Validation for comments (belong to a post) does not work", "body": "<p>I'm trying to build a simple blog, where a post has many comments and the comments are displayed on the posts#show page. </p>\n\n<p>I have two bugs which I cannot figure out:</p>\n\n<ol>\n<li>Validations for my comments are not working. The name and the content of a comment should be present. Whenever I try to submit an \"empty\" comment I got an error message: \"NoMethodError in CommentsController#create: undefined method `empty?' for nil:NilClass\". I suspect that in my comments_controller.rb I have to render a different page in my create action (see below for code)?</li>\n<li>Whenever I create a new post, there is always an empty \"delete\" link belonging to an empty comment (which no one has created. It was created automatically?). This \"delete\" link links to <a href=\"http://localhost:3000/posts/[post_id]/comments\" rel=\"nofollow\">http://localhost:3000/posts/[post_id]/comments</a> (note that after \"/comments\" there is no comment_id like \"/comment/3/\" e.g.)</li>\n</ol>\n\n<p><strong>routes.rb:</strong></p>\n\n<pre><code>resources :posts do\n  resources :comments\nend\n</code></pre>\n\n<p><strong>app/models/post.rb</strong></p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n  has_many :comments, dependent: :destroy\nend\n</code></pre>\n\n<p><strong>app/models/comment.rb</strong></p>\n\n<pre><code>class Comment &lt; ActiveRecord::Base\n  validates :name, presence: true\n  validates :content, presence: true\n\n  belongs_to :post\nend\n</code></pre>\n\n<p><strong>app/controllers/comments_controller.rb</strong></p>\n\n<pre><code>class CommentsController &lt; ApplicationController\n  before_action :set_post\n\n  def create\n    @comment = @post.comments.build(comment_params)\n\n    if @comment.save\n      flash[:success] = \"Comment saved!\"\n      redirect_to post_path(@post)\n    else\n      flash[:alert] = \"Something went wrong!\"\n      render root_path                        # I suspect here is an error?\n    end\n  end\n\n  def destroy\n    @comment = @post.comments.find(params[:id])\n    @comment.destroy\n\n    flash[:success] = \"Comment deleted\"\n    redirect_to post_path(@post)\n  end\n\n  private\n\n    def comment_params \n      params.require(:comment).permit(:name, :email, :content)\n    end\n\n    def set_post\n      @post = Post.find(params[:post_id])\n    end\nend\n</code></pre>\n\n<p><strong>app/views/posts/show.html.erb</strong></p>\n\n<p>Here is the problem that a \"Delete\" link shows up whenever I create a new post. This \"Delete\" link belongs to a comment which is empty and strangely created automatically? </p>\n\n<pre><code>&lt;% unless @post.comments.empty? %&gt;          # I suspect here is an error?\n  &lt;% @post.comments.each do |comment| %&gt;\n    &lt;p&gt;&lt;%= comment.name %&gt;&lt;/p&gt;\n    &lt;p&gt;&lt;%= comment.content %&gt;&lt;/p&gt;\n    &lt;p&gt;&lt;%= link_to \"Delete\",   [comment.post, comment], \n                                method: :delete, \n                                data: { confirm: \"Are you sure?\" } %&gt;&lt;/p&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>app/views/posts/new.html.erb</strong></p>\n\n<pre><code>&lt;%= form_for(@post) do |f| %&gt;\n  &lt;% if @post.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= @post.errors.count %&gt; Fehler:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% @post.errors.full_messages.each do |msg| %&gt;\n        &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"image-box\"&gt;\n    &lt;p&gt;&lt;%= f.file_field :image%&gt;&lt;/p&gt;\n  &lt;/div&gt;\n    &lt;div class=\"title-box\"&gt;\n      &lt;p&gt;&lt;%= f.label :title, \"Titel\" %&gt;&lt;/p&gt;\n      &lt;p&gt;&lt;%= f.text_field :title, class: \"title-field\"%&gt;&lt;/p&gt;\n    &lt;/div&gt;\n     &lt;div class=\"content-box\"&gt;\n      &lt;p&gt;&lt;%= f.label :content, \"Inhalt\" %&gt;&lt;/p&gt;\n      &lt;p&gt;&lt;%= f.text_area :content, class: \"content-field\"%&gt;&lt;/p&gt;\n    &lt;/div&gt;\n    &lt;p&gt;&lt;%= f.submit %&gt;&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 2093, "user_id": 1747295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70b9d5ee5e89974383b7cf856e1dea8?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yawar Ali", "link": "https://stackoverflow.com/users/1747295/muhammad-yawar-ali"}, "is_accepted": false, "score": 0, "last_activity_date": 1459942624, "creation_date": 1459942624, "answer_id": 36449992, "question_id": 36449818, "link": "https://stackoverflow.com/questions/36449818/how-to-validate-overlapping-times-in-rails/36449992#36449992", "title": "How to validate overlapping times in Rails", "body": "<p>In your <code>EventsController#Create</code> &amp; <code>EventsController#Update</code> methods check for new time in between the old times like :</p>\n\n<pre><code>events = Event.where(:departure_date =&gt; event_params[:departure_date])\nevents.each do |event|\n if event_params[:to].between?(event.to, event.from) || event_params[:from].between?(event.to, event.from)\n  flash[:error] = \"Current Slot Time is already taken!\"\n  redirect_to :back\n  return\n end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 809, "user_id": 3785426, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/46574bc7f38d49bbcb8b3e2d752c286d?s=128&d=identicon&r=PG&f=1", "display_name": "SamuraiBlue", "link": "https://stackoverflow.com/users/3785426/samuraiblue"}, "edited": false, "score": 0, "creation_date": 1459947235, "post_id": 36450152, "comment_id": 60516232, "body": "Thank you for your answer, @MurifoX. Although I edited <code>event.rb</code>, <code>NoMethodError (undefined method &quot;from&quot; for 2016-04-06 12:39:00 UTC..2016-04-06 12:40:00 UTC:Range):</code>, <code>app&#47;models&#47;event.rb:17:in &quot;block in &lt;class:Event&gt;&quot;</code>, <code>app&#47;models&#47;event.rb:23:in &quot;cannot_overlap_another_event&quot;</code>, <code>app&#47;controllers&#47;schedules_controller.rb:37:in &quot;create&quot;</code> were displayed when I try to create new schedule. I updated <code>event.rb</code> at the bottom of  my question."}, {"owner": {"reputation": 14364, "user_id": 1023609, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14cd00b085c207261db49ac46be4773c?s=128&d=identicon&r=PG", "display_name": "MurifoX", "link": "https://stackoverflow.com/users/1023609/murifox"}, "reply_to_user": {"reputation": 809, "user_id": 3785426, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/46574bc7f38d49bbcb8b3e2d752c286d?s=128&d=identicon&r=PG&f=1", "display_name": "SamuraiBlue", "link": "https://stackoverflow.com/users/3785426/samuraiblue"}, "edited": false, "score": 0, "creation_date": 1459947389, "post_id": 36450152, "comment_id": 60516342, "body": "@SamuraiBlue Ops, my bad, you should use <code>range.first</code> and <code>range.last</code>, not your model attribute names."}, {"owner": {"reputation": 809, "user_id": 3785426, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/46574bc7f38d49bbcb8b3e2d752c286d?s=128&d=identicon&r=PG&f=1", "display_name": "SamuraiBlue", "link": "https://stackoverflow.com/users/3785426/samuraiblue"}, "edited": false, "score": 0, "creation_date": 1459947823, "post_id": 36450152, "comment_id": 60516705, "body": "Thank you for your quick reply, @MurifoX. Another error <code>SQLite3::SQLException (no such column: start):</code> was displayed. Sorry for asking again before I search the meaning of this error."}, {"owner": {"reputation": 14364, "user_id": 1023609, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14cd00b085c207261db49ac46be4773c?s=128&d=identicon&r=PG", "display_name": "MurifoX", "link": "https://stackoverflow.com/users/1023609/murifox"}, "reply_to_user": {"reputation": 809, "user_id": 3785426, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/46574bc7f38d49bbcb8b3e2d752c286d?s=128&d=identicon&r=PG&f=1", "display_name": "SamuraiBlue", "link": "https://stackoverflow.com/users/3785426/samuraiblue"}, "edited": false, "score": 0, "creation_date": 1459948052, "post_id": 36450152, "comment_id": 60516917, "body": "@SamuraiBlue It is because the query is using <code>where(&#39;(start</code>, in your case the <code>start</code> date is named <code>from</code>. It was because of my copy and paste here, haha. Just change it to <code>from</code> and you are good to go."}, {"owner": {"reputation": 809, "user_id": 3785426, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/46574bc7f38d49bbcb8b3e2d752c286d?s=128&d=identicon&r=PG&f=1", "display_name": "SamuraiBlue", "link": "https://stackoverflow.com/users/3785426/samuraiblue"}, "edited": false, "score": 0, "creation_date": 1459948611, "post_id": 36450152, "comment_id": 60517372, "body": "Thank you for your update, @MurifoX. Next error is <code>SQLite3::SQLException (near &quot;from&quot;: syntax error):</code>. Thank you for your cooperation."}, {"owner": {"reputation": 14364, "user_id": 1023609, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14cd00b085c207261db49ac46be4773c?s=128&d=identicon&r=PG", "display_name": "MurifoX", "link": "https://stackoverflow.com/users/1023609/murifox"}, "reply_to_user": {"reputation": 809, "user_id": 3785426, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/46574bc7f38d49bbcb8b3e2d752c286d?s=128&d=identicon&r=PG&f=1", "display_name": "SamuraiBlue", "link": "https://stackoverflow.com/users/3785426/samuraiblue"}, "edited": false, "score": 1, "creation_date": 1459949035, "post_id": 36450152, "comment_id": 60517695, "body": "@SamuraiBlue maybe your dates are in the wrong format (<a href=\"http://stackoverflow.com/questions/8187288/sql-select-between-dates\" title=\"sql select between dates\">stackoverflow.com/questions/8187288/sql-select-between-date&zwnj;&#8203;s</a>). Also it is a good practice to use other database like <code>postgres</code> in development. This way you don&#39;t have surprises when testing things in production when you use another database that is not SQLite3"}, {"owner": {"reputation": 809, "user_id": 3785426, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/46574bc7f38d49bbcb8b3e2d752c286d?s=128&d=identicon&r=PG&f=1", "display_name": "SamuraiBlue", "link": "https://stackoverflow.com/users/3785426/samuraiblue"}, "edited": false, "score": 0, "creation_date": 1460001228, "post_id": 36450152, "comment_id": 60544029, "body": "Thank you for your comment, @MurifoX. I found out this error appeared because <code>from</code> is SQL keyword.  No error is displayed after using <code>\\&#39;from\\&#39;</code> instead of <code>from</code> for now. I&#39;ll try to rename this column and use postgres later. Although no error is displayed, the validation doesn&#39;t work. It would be appreciated if you could give me a hint."}, {"owner": {"reputation": 809, "user_id": 3785426, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/46574bc7f38d49bbcb8b3e2d752c286d?s=128&d=identicon&r=PG&f=1", "display_name": "SamuraiBlue", "link": "https://stackoverflow.com/users/3785426/samuraiblue"}, "edited": false, "score": 0, "creation_date": 1460030195, "post_id": 36450152, "comment_id": 60561017, "body": "I added <code>development.log</code> at the bottom of my question, @MurifoX. Are these SQL correct?"}, {"owner": {"reputation": 14364, "user_id": 1023609, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14cd00b085c207261db49ac46be4773c?s=128&d=identicon&r=PG", "display_name": "MurifoX", "link": "https://stackoverflow.com/users/1023609/murifox"}, "reply_to_user": {"reputation": 809, "user_id": 3785426, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/46574bc7f38d49bbcb8b3e2d752c286d?s=128&d=identicon&r=PG&f=1", "display_name": "SamuraiBlue", "link": "https://stackoverflow.com/users/3785426/samuraiblue"}, "edited": false, "score": 0, "creation_date": 1460030343, "post_id": 36450152, "comment_id": 60561136, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/108514/discussion-between-murifox-and-samuraiblue\">continue this discussion in chat</a>."}, {"owner": {"reputation": 809, "user_id": 3785426, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/46574bc7f38d49bbcb8b3e2d752c286d?s=128&d=identicon&r=PG&f=1", "display_name": "SamuraiBlue", "link": "https://stackoverflow.com/users/3785426/samuraiblue"}, "edited": false, "score": 0, "creation_date": 1460032620, "post_id": 36450152, "comment_id": 60562837, "body": "Although my question wasn&#39;t solved, I will try postgres."}, {"owner": {"reputation": 809, "user_id": 3785426, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/46574bc7f38d49bbcb8b3e2d752c286d?s=128&d=identicon&r=PG&f=1", "display_name": "SamuraiBlue", "link": "https://stackoverflow.com/users/3785426/samuraiblue"}, "edited": false, "score": 0, "creation_date": 1460468933, "post_id": 36450152, "comment_id": 60749343, "body": "Although I managed to configure postgresql, the result is the same. I created <a href=\"http://stackoverflow.com/questions/36575174/how-to-validate-overlapping-times-in-rails-with-postgresql\">new question</a>. It would be appreciated if you could give me any suggestion, @MurifoX."}], "tags": [], "owner": {"reputation": 14364, "user_id": 1023609, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14cd00b085c207261db49ac46be4773c?s=128&d=identicon&r=PG", "display_name": "MurifoX", "link": "https://stackoverflow.com/users/1023609/murifox"}, "is_accepted": false, "score": 4, "last_activity_date": 1459948069, "last_edit_date": 1459948069, "creation_date": 1459943010, "answer_id": 36450152, "question_id": 36449818, "link": "https://stackoverflow.com/questions/36449818/how-to-validate-overlapping-times-in-rails/36450152#36450152", "title": "How to validate overlapping times in Rails", "body": "<p>Well, if you need a server side validation, you could implement some <code>custom</code> validators in your model class:  </p>\n\n<pre><code>validate :cannot_overlap_another_event\n</code></pre>\n\n<p>Next you need to code this method yourself:  </p>\n\n<pre><code>def cannot_overlap_another_event\n  range = Range.new from, to\n  overlaps = Appointment.exclude_self(id).in_range(range)\n  overlap_error unless overlaps.empty?\nend\n</code></pre>\n\n<p>Explaining what this code do, you create a <code>Range</code> object with your <code>from</code> and <code>to</code> dates. Then it uses the helper scopes to exclude the <code>Event</code> itself and check to see if there's an event in this range.  </p>\n\n<pre><code>scope :in_range, -&gt; range {\n  where('(from BETWEEN ? AND ?)', range.first, range.last)\n}\nscope :exclude_self, -&gt; id { where.not(id: id) }\n</code></pre>\n\n<p>The <code>overlap_error</code> is a method that populates the model's error hash to display on screen:  </p>\n\n<pre><code>def overlap_error\n  errors.add(:overlap_error, 'There is already an event scheduled in this hour!')\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2462, "user_id": 1546785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05d901bdf6801bcc6e75c6d9b7b326a1?s=128&d=identicon&r=PG", "display_name": "Tom Chapin", "link": "https://stackoverflow.com/users/1546785/tom-chapin"}, "edited": false, "score": 1, "creation_date": 1572406482, "post_id": 42956553, "comment_id": 103545829, "body": "That validates_overlap gem was a lifesaver! That should be the real accepted answer! Thanks!"}], "tags": [], "owner": {"reputation": 1519, "user_id": 3511751, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/3e5e2e999dd1b151aba7168209046f8a?s=128&d=identicon&r=PG", "display_name": "Ricardo Vila", "link": "https://stackoverflow.com/users/3511751/ricardo-vila"}, "is_accepted": false, "score": 1, "last_activity_date": 1490197614, "creation_date": 1490197614, "answer_id": 42956553, "question_id": 36449818, "link": "https://stackoverflow.com/questions/36449818/how-to-validate-overlapping-times-in-rails/42956553#42956553", "title": "How to validate overlapping times in Rails", "body": "<p>Take a look at this <a href=\"https://makandracards.com/makandra/984-test-if-two-date-ranges-overlap-in-ruby-or-rails\" rel=\"nofollow noreferrer\">https://makandracards.com/makandra/984-test-if-two-date-ranges-overlap-in-ruby-or-rails</a>. The key is to define one scope to chek for overlapping siblings. Somthing like this:</p>\n\n<pre><code># Return a scope for all interval overlapping the given interval, including the given interval itself\n  named_scope :overlapping, lambda { |interval| {\n    :conditions =&gt; [\"id &lt;&gt; ? AND (DATEDIFF(start_date, ?) * DATEDIFF(?, end_date)) &gt;= 0\", interval.id, interval.end_date, interval.start_date]\n  }}\n</code></pre>\n\n<p>Also you can check this gem: <a href=\"https://github.com/robinbortlik/validates_overlap\" rel=\"nofollow noreferrer\">https://github.com/robinbortlik/validates_overlap</a> I think it can help.</p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 3630282, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c34fa8a2240e57d0732142034b61ab53?s=128&d=identicon&r=PG", "display_name": "Luis Flores", "link": "https://stackoverflow.com/users/3630282/luis-flores"}, "is_accepted": false, "score": 0, "last_activity_date": 1608409718, "last_edit_date": 1608409718, "creation_date": 1608409332, "answer_id": 65374091, "question_id": 36449818, "link": "https://stackoverflow.com/questions/36449818/how-to-validate-overlapping-times-in-rails/65374091#65374091", "title": "How to validate overlapping times in Rails", "body": "<p>I had the same problem for a project, my solution is to include a validation method inside the model, so I have a model for vacation periods taken and I must add periods (lapses) taking care that those lapses are not overlapping; Suppose you have a collection of lapses taken (active_permits) and you just got a new lapse from your form (lapse) then there are only two fundamental rules that will determine if the two periods are overlapping: lapse[:end] must be smaller (that is occurs earlier) than active_permit[:start] OR lapse[:start] must be greater (occurs later) than active_permit[:end], so UNLESS one of these rules are met, the two periods overlap. Code must be something like this:</p>\n<pre><code>def lapse_validation(lapse)\n  error = 0\n  @active_permits.each do |active_permit|\n    unless (lapse[:end] &lt; active_permit[:start] || lapse[:start] &gt; active_permit[:end])\n      error = 1\n      errors.add(:new_permit, &quot;: The dates you entered overlapp an existing leave period&quot;)\n    end\n  end\n  return error\nend\n</code></pre>\n<p>You can find a more detailed discussion on overlapping periods here: <a href=\"https://www.soliantconsulting.com/blog/determining-two-date-ranges-overlap/\" rel=\"nofollow noreferrer\">https://www.soliantconsulting.com/blog/determining-two-date-ranges-overlap/</a></p>\n"}], "owner": {"reputation": 809, "user_id": 3785426, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/46574bc7f38d49bbcb8b3e2d752c286d?s=128&d=identicon&r=PG&f=1", "display_name": "SamuraiBlue", "link": "https://stackoverflow.com/users/3785426/samuraiblue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3052, "favorite_count": 0, "answer_count": 4, "score": 3, "last_activity_date": 1608409718, "creation_date": 1459942190, "last_edit_date": 1495535397, "question_id": 36449818, "link": "https://stackoverflow.com/questions/36449818/how-to-validate-overlapping-times-in-rails", "title": "How to validate overlapping times in Rails", "body": "<p>I have an <code>Event model</code> that has <code>form</code> time and <code>to</code> time in my schedule app and I want to validate the overlapping time before saving.</p>\n\n<p>My view image as followings;</p>\n\n<pre><code>Departure date: Dec 31, 2016\n\nDay1\n07:00 - 07:20 event1\n10:30 - 11:30 event2\n15:40 - 16:10 event3\n[add event button]\n\nDay2\n08:15 - 09:05 event4\n12:08 - 13:04 event5\n14:00 - 14:25 event6\n[add event button]\n\n[save schedule button]\n</code></pre>\n\n<p><code>from</code> time and <code>to</code> time can be changed and added at the same time.</p>\n\n<p>What I'd like to do is to display error if I try to add (or change to) <code>07:05 - 07:30</code> for <code>Day1</code>, for example, <code>13:50 - 14:30</code> for <code>Day2</code> and so on.</p>\n\n<p>Although I tried some codes with <code>overlap</code>, <code>between</code>, <code>cover</code> with referring to  <a href=\"https://stackoverflow.com/questions/28030931/detecting-overlapping-ranges-in-ruby\">this post</a> or <a href=\"https://stackoverflow.com/questions/2682638/finding-records-that-overlap-a-range-in-rails\">this post</a> and so on, I haven't be able to apply them to my code.</p>\n\n<p><strong>schema.rb</strong></p>\n\n<pre><code>  create_table \"events\", force: :cascade do |t|\n    t.time     \"from\"\n    t.time     \"to\"\n    t.integer  \"room_id\"\n    ...\n\n  create_table \"rooms\", force: :cascade do |t|\n    t.integer  \"schedule_id\"\n    ...\n\n  create_table \"schedules\", force: :cascade do |t|\n    t.integer  \"user_id\"\n    t.date     \"departure_date\"\n    ...\n</code></pre>\n\n<p>Give the following <strong>models</strong>:</p>\n\n<pre><code>class Schedule &lt; ActiveRecord::Base\n  belongs_to :user\n  has_many :rooms, inverse_of: :schedule\n  accepts_nested_attributes_for :rooms, allow_destroy: true\n  ...\n\nclass Room &lt; ActiveRecord::Base\n  belongs_to :schedule, inverse_of: :rooms\n  has_many :events, inverse_of: :room\n  accepts_nested_attributes_for :events, allow_destroy: true\n  ...\n\nclass Event &lt; ActiveRecord::Base\n  belongs_to :room, inverse_of: :events\n  has_one :schedule, autosave: false, through: :room\n  ...\n</code></pre>\n\n<p><strong>_schedule_form.html.erb</strong></p>\n\n<pre><code>  &lt;%= render 'shared/error_messages', object: f.object %&gt;\n  &lt;%= f.label :title %&gt;\n  &lt;%= f.text_field :title, class: 'form-control' %&gt;\n  &lt;br&gt;\n    &lt;%= f.label :departure_date %&gt;\n    &lt;div class=\"input-group date\" id=\"datetimepicker\"&gt;\n      &lt;%= f.text_field :departure_date, :value =&gt; (f.object.departure_date.strftime('%b/%d/%Y') if f.object.departure_date), class: 'form-control' %&gt;\n      &lt;span class=\"input-group-addon\"&gt;\n        &lt;span class=\"glyphicon glyphicon-calendar\"&gt;&lt;/span&gt;\n      &lt;/span&gt;\n    &lt;/div&gt;\n  &lt;script type=\"text/javascript\"&gt;\n    $(function () {\n      $('#datetimepicker').datetimepicker({format:'MMM-DD-YYYY'});\n    });\n  &lt;/script&gt;\n  &lt;br&gt;\n  &lt;div id=\"room\"&gt;\n    &lt;%= f.simple_fields_for :rooms do |a| %&gt;\n      &lt;div id=\"room_&lt;%= a.object.object_id %&gt;\"&gt;\n        &lt;p class=\"day-number-element-selector\"&gt;&lt;b&gt;Day&amp;nbsp;&lt;%= a.index.to_i + 1 %&gt;&lt;/b&gt;&lt;/p&gt;\n\n        &lt;%= a.simple_fields_for :events do |e| %&gt;\n          &lt;span class=\"form-inline\"&gt;\n            &lt;p&gt;\n              &lt;%= e.input :from, label: false %&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;-&amp;nbsp;&amp;nbsp;&amp;nbsp;\n              &lt;%= e.input :to, label: false %&gt;\n            &lt;/p&gt;\n          &lt;/span&gt;\n          &lt;%= e.input :title, label: false %&gt;\n        &lt;% end %&gt;\n      &lt;/div&gt;\n\n      &lt;%= a.link_to_add \"Add event\", :events, data: {target: \"#room_#{a.object.object_id}\"}, class: \"btn btn-primary\" %&gt;\n\n      &lt;%= a.input :room %&gt;\n\n    &lt;% end %&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>It would be appreciated if you could give me how to check and display error.</p>\n\n<p><strong>EDIT!</strong></p>\n\n<p>still not work</p>\n\n<p><strong>event.rb</strong></p>\n\n<pre><code>class Event &lt; ActiveRecord::Base\n  before_save :assign_date\n  belongs_to :room, inverse_of: :events\n  has_one :schedule, autosave: false, through: :room\n  validate :cannot_overlap_another_event\n\nscope :in_range, -&gt; range {\n  where('(\\'from\\' BETWEEN ? AND ?)', range.first, range.last)\n}\nscope :exclude_self, -&gt; id { where.not(id: id) }\n\ndef cannot_overlap_another_event\n  range = Range.new from, to\n  overlaps = Event.exclude_self(id).in_range(range)\n  overlap_error unless overlaps.empty?\nend\n\ndef overlap_error\n  errors.add(:overlap_error, 'There is already an event scheduled in this hour!')\nend\n</code></pre>\n\n<p><strong>development.log</strong></p>\n\n<pre><code>....\nStarted POST \"/schedules\" for 218.33.213.91 at 2016-04-07 11:44:59 +0000\nProcessing by SchedulesController#create as HTML\n...\n      [1m[35m (0.5ms)[0m  begin transaction\n      [1m[36m (0.5ms)[0m  [1mSELECT COUNT(*) FROM \"events\" WHERE (\"events\".\"id\" IS NOT NULL) AND (('from' BETWEEN '2016-04-07 07:00:00.000000' AND '2016-04-07 07:20:00.000000'))[0m\n      [1m[35m (0.3ms)[0m  SELECT COUNT(*) FROM \"events\" WHERE (\"events\".\"id\" IS NOT NULL) AND (('from' BETWEEN '2016-04-07 07:05:00.000000' AND '2016-04-07 07:30:00.000000'))\n      [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO \"schedules\" (\"title\", \"departure_date\", \"user_id\", \"created_at\", \"updated_at\") VALUES (?, ?, ?, ?, ?)[0m  [[\"title\", \"test title\"], [\"departure_date\", \"2016-04-10\"], [\"user_id\", 1], [\"created_at\", \"2016-04-07 11:45:00.061460\"], [\"updated_at\", \"2016-04-07 11:45:00.061460\"]]\n...\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1459941077, "post_id": 36449172, "comment_id": 60511397, "body": "Cannot be reproduced."}, {"owner": {"reputation": 41740, "user_id": 12037, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3f719a88bc46c61695a03e624ab5564c?s=128&d=identicon&r=PG", "display_name": "Codebeef", "link": "https://stackoverflow.com/users/12037/codebeef"}, "edited": false, "score": 0, "creation_date": 1459941436, "post_id": 36449172, "comment_id": 60511657, "body": "What ruby version?"}, {"owner": {"reputation": 1242, "user_id": 3252252, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/4V81y.jpg?s=128&g=1", "display_name": "Jesuspc", "link": "https://stackoverflow.com/users/3252252/jesuspc"}, "edited": false, "score": 1, "creation_date": 1459942059, "post_id": 36449172, "comment_id": 60512121, "body": "I&#39;ve reproduced it with 2.2.0p0, 2.1.5p273, 1.9.3-p392"}], "answers": [{"comments": [{"owner": {"reputation": 562, "user_id": 622944, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q8UP6.jpg?s=128&g=1", "display_name": "Axe", "link": "https://stackoverflow.com/users/622944/axe"}, "edited": false, "score": 0, "creation_date": 1459945053, "post_id": 36449939, "comment_id": 60514401, "body": "thanks, nice that answers it. Though, expected, hmmm. documented, hmmm. surprising, yes."}, {"owner": {"reputation": 1242, "user_id": 3252252, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/4V81y.jpg?s=128&g=1", "display_name": "Jesuspc", "link": "https://stackoverflow.com/users/3252252/jesuspc"}, "edited": false, "score": 1, "creation_date": 1459953877, "post_id": 36449939, "comment_id": 60521635, "body": "It still makes no sense to me :S"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1459968087, "post_id": 36449939, "comment_id": 60531361, "body": "&quot;You can handle it by making sure that your path fragments are always complete path fragments with slashes on both sides.&quot; is the key. The trailing <code>&#47;</code> of a path segment tells us that segment is a directory if we&#39;re dealing with a path to a file, which a URL can point to. It doesn&#39;t <i>have</i> to point to a file, but it helps to think of the path that way. A segment of a path that doesn&#39;t end with <code>&#47;</code> would traditionally be a file so the first two examples replace the <code>&#47;foo</code> file with the <code>&#47;bar</code> file. The third adds the <code>bar</code> file to the <code>&#47;foo&#47;</code> directory."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 2, "last_activity_date": 1459942499, "creation_date": 1459942499, "answer_id": 36449939, "question_id": 36449172, "link": "https://stackoverflow.com/questions/36449172/unexpected-behaviour-in-uri-join/36449939#36449939", "title": "Unexpected behaviour in URI.join", "body": "<p>This is expected and <a href=\"http://ruby-doc.org/stdlib/libdoc/uri/rdoc/URI.html#method-c-join\" rel=\"nofollow\">documented behavior</a> (albeit somewhat hidden in the <em>Usage</em> section):</p>\n\n<blockquote>\n<pre><code>p URI.join('http://example.com', '/foo', '/bar')\n# =&gt; #&lt;URI::HTTP:0x01aaf0b0 URL:http://example.com/bar&gt;\n\np URI.join('http://example.com', '/foo', 'bar')\n# =&gt; #&lt;URI::HTTP:0x801a92af0 URL:http://example.com/bar&gt;\n\np URI.join('http://example.com', '/foo/', 'bar')\n# =&gt; #&lt;URI::HTTP:0x80135a3a0 URL:http://example.com/foo/bar&gt;\n</code></pre>\n</blockquote>\n\n<p>You can handle it by making sure that your path fragments are always complete path fragments with slashes on both sides.</p>\n"}], "owner": {"reputation": 1242, "user_id": 3252252, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/4V81y.jpg?s=128&g=1", "display_name": "Jesuspc", "link": "https://stackoverflow.com/users/3252252/jesuspc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 1, "accepted_answer_id": 36449939, "answer_count": 1, "score": 0, "last_activity_date": 1459953807, "creation_date": 1459940492, "last_edit_date": 1459953807, "question_id": 36449172, "link": "https://stackoverflow.com/questions/36449172/unexpected-behaviour-in-uri-join", "title": "Unexpected behaviour in URI.join", "body": "<p><code>URI::join</code> removes everything after a <code>/</code> character in its arguments unless there is a matching <code>/</code>. For instance:</p>\n\n<pre><code>URI::join(\"http://www.example.com/prefix\", \"some_path\").to_s\n#=&gt; \"http://www.example.com/some_path\"\n\nURI::join(\"http://www.example.com/prefix/\", \"some_path\").to_s\n#=&gt; \"http://www.example.com/prefix/some_path\"\n</code></pre>\n\n<p>What's the reason behind it, and how are we supposed to handle this without relying on tools that are not meant to be used in that scenario (such as <code>File.join</code>)? I need to use values of either type for base url.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sqlite"], "comments": [{"owner": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "edited": false, "score": 0, "creation_date": 1459940798, "post_id": 36449043, "comment_id": 60511194, "body": "are you able to insert and update"}, {"owner": {"reputation": 3436, "user_id": 2330905, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/310e0eecea5a8f5c6bcf7ee7be2b5b49?s=128&d=identicon&r=PG", "display_name": "Chinmay235", "link": "https://stackoverflow.com/users/2330905/chinmay235"}, "reply_to_user": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "edited": false, "score": 0, "creation_date": 1459940853, "post_id": 36449043, "comment_id": 60511233, "body": "Yes able to insert and update"}, {"owner": {"reputation": 940, "user_id": 4537473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccdbe6f3dfecb0d497779d656c944ac3?s=128&d=identicon&r=PG", "display_name": "David K-J", "link": "https://stackoverflow.com/users/4537473/david-k-j"}, "edited": false, "score": 1, "creation_date": 1459941140, "post_id": 36449043, "comment_id": 60511429, "body": "Are you sure the <code>link_to ... method: :destroy</code> isn&#39;t supposed to be <code>:delete</code> ? Also, change <code>def destroy</code> to say <code>RubyWinSource.find(params[:id]).destroy</code>"}, {"owner": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "edited": false, "score": 0, "creation_date": 1459941156, "post_id": 36449043, "comment_id": 60511445, "body": "so why you not call set_ruby_win_source method in delete instead of using instant  variable @ruby_win_source"}, {"owner": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "reply_to_user": {"reputation": 940, "user_id": 4537473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccdbe6f3dfecb0d497779d656c944ac3?s=128&d=identicon&r=PG", "display_name": "David K-J", "link": "https://stackoverflow.com/users/4537473/david-k-j"}, "edited": false, "score": 0, "creation_date": 1459941192, "post_id": 36449043, "comment_id": 60511475, "body": "ya right @DavidK-J"}, {"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1459941891, "post_id": 36449043, "comment_id": 60511989, "body": "@Chinu can you please post your <b>routes.rb</b> ?"}, {"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1459942285, "post_id": 36449043, "comment_id": 60512310, "body": "<code>&lt;%= link_to &#39;Destroy&#39;, ruby_win_resource_path(ruby_win_source), method: :delete, data: { confirm: &#39;Are you sure?&#39; } %&gt;</code>  - can you just give it a try ? @Chinu"}, {"owner": {"reputation": 3436, "user_id": 2330905, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/310e0eecea5a8f5c6bcf7ee7be2b5b49?s=128&d=identicon&r=PG", "display_name": "Chinmay235", "link": "https://stackoverflow.com/users/2330905/chinmay235"}, "edited": false, "score": 0, "creation_date": 1459942433, "post_id": 36449043, "comment_id": 60512428, "body": "Error coming - <code>Showing d:&#47;RoR&#47;projects&#47;demo&#47;app&#47;views&#47;ruby_win_sources&#47;index.html.e&zwnj;&#8203;rb where line #23 raised:  undefined method </code>ruby_win_resource_path&#39; for #&lt;#&lt;Class:0x3a2bb80&gt;:0x566d198&gt;`"}, {"owner": {"reputation": 3436, "user_id": 2330905, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/310e0eecea5a8f5c6bcf7ee7be2b5b49?s=128&d=identicon&r=PG", "display_name": "Chinmay235", "link": "https://stackoverflow.com/users/2330905/chinmay235"}, "reply_to_user": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1459942543, "post_id": 36449043, "comment_id": 60512513, "body": "@dkp I have changed <code>ruby_win_resource_path</code> to <code>ruby_win_source_path</code> still not working"}, {"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1459942551, "post_id": 36449043, "comment_id": 60512519, "body": "please change it to <code>ruby_win_source_path</code> - I just misread it."}, {"owner": {"reputation": 3436, "user_id": 2330905, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/310e0eecea5a8f5c6bcf7ee7be2b5b49?s=128&d=identicon&r=PG", "display_name": "Chinmay235", "link": "https://stackoverflow.com/users/2330905/chinmay235"}, "edited": false, "score": 0, "creation_date": 1459942568, "post_id": 36449043, "comment_id": 60512531, "body": "yes i have hanged that"}, {"owner": {"reputation": 3436, "user_id": 2330905, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/310e0eecea5a8f5c6bcf7ee7be2b5b49?s=128&d=identicon&r=PG", "display_name": "Chinmay235", "link": "https://stackoverflow.com/users/2330905/chinmay235"}, "reply_to_user": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1459942572, "post_id": 36449043, "comment_id": 60512534, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/108391/discussion-between-chinu-and-dkp\">continue this discussion in chat</a>."}, {"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1459942670, "post_id": 36449043, "comment_id": 60512619, "body": "@Chinu what error you are getting now ? please add the stack trace."}], "answers": [{"comments": [{"owner": {"reputation": 940, "user_id": 4537473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccdbe6f3dfecb0d497779d656c944ac3?s=128&d=identicon&r=PG", "display_name": "David K-J", "link": "https://stackoverflow.com/users/4537473/david-k-j"}, "edited": false, "score": 0, "creation_date": 1459940919, "post_id": 36449225, "comment_id": 60511281, "body": "What has this to do with the question?"}, {"owner": {"reputation": 3436, "user_id": 2330905, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/310e0eecea5a8f5c6bcf7ee7be2b5b49?s=128&d=identicon&r=PG", "display_name": "Chinmay235", "link": "https://stackoverflow.com/users/2330905/chinmay235"}, "edited": false, "score": 0, "creation_date": 1459941098, "post_id": 36449225, "comment_id": 60511408, "body": "My database is working fine. I have added, updated, View successfully. But only problem is Record not deleted."}], "tags": [], "owner": {"reputation": 700, "user_id": 908957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KPFXF.png?s=128&g=1", "display_name": "JohnPaul", "link": "https://stackoverflow.com/users/908957/johnpaul"}, "is_accepted": false, "score": 0, "last_activity_date": 1459940611, "creation_date": 1459940611, "answer_id": 36449225, "question_id": 36449043, "link": "https://stackoverflow.com/questions/36449043/data-not-deleted-from-the-sqlite3-table/36449225#36449225", "title": "Data not deleted from the sqlite3 table", "body": "<p>You drop your database <code>rake db:drop</code> and then rake <code>db:migrate</code> to create your tables</p>\n"}, {"tags": [], "owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "is_accepted": false, "score": 0, "last_activity_date": 1459941756, "last_edit_date": 1459941756, "creation_date": 1459941280, "answer_id": 36449499, "question_id": 36449043, "link": "https://stackoverflow.com/questions/36449043/data-not-deleted-from-the-sqlite3-table/36449499#36449499", "title": "Data not deleted from the sqlite3 table", "body": "<p>Make a <code>delete</code> request while destroying an object:</p>\n\n<pre><code>&lt;td&gt;&lt;%= link_to 'Destroy', ruby_win_source, method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n</code></pre>\n\n<p>Your controller looks good since you are setting </p>\n\n<pre><code>before_action :set_ruby_win_source, only: [:show, :edit, :update, :destroy]\n</code></pre>\n\n<p>So you already have <code>@ruby_win_source</code> before <code>destroy</code> action gets executed. </p>\n"}, {"comments": [{"owner": {"reputation": 940, "user_id": 4537473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccdbe6f3dfecb0d497779d656c944ac3?s=128&d=identicon&r=PG", "display_name": "David K-J", "link": "https://stackoverflow.com/users/4537473/david-k-j"}, "edited": false, "score": 0, "creation_date": 1459941381, "post_id": 36449525, "comment_id": 60511615, "body": "A bit like my comment, or that answer from @dkp!"}, {"owner": {"reputation": 3436, "user_id": 2330905, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/310e0eecea5a8f5c6bcf7ee7be2b5b49?s=128&d=identicon&r=PG", "display_name": "Chinmay235", "link": "https://stackoverflow.com/users/2330905/chinmay235"}, "edited": false, "score": 0, "creation_date": 1459941597, "post_id": 36449525, "comment_id": 60511783, "body": "No same problem. While I am clicking Destroy link <i>delete confirmaton box</i> not coming. and page redirect to View page."}], "tags": [], "owner": {"reputation": 940, "user_id": 4537473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccdbe6f3dfecb0d497779d656c944ac3?s=128&d=identicon&r=PG", "display_name": "David K-J", "link": "https://stackoverflow.com/users/4537473/david-k-j"}, "is_accepted": false, "score": 0, "last_activity_date": 1459941419, "last_edit_date": 1459941419, "creation_date": 1459941346, "answer_id": 36449525, "question_id": 36449043, "link": "https://stackoverflow.com/questions/36449043/data-not-deleted-from-the-sqlite3-table/36449525#36449525", "title": "Data not deleted from the sqlite3 table", "body": "<p>I think your link_to to delete is incorrect and should be like this:</p>\n\n<pre><code>&lt;%= link_to 'Destroy', ruby_win_source, method: :delete, data: { confirm: 'Are you sure?' } %&gt;\n</code></pre>\n\n<p>Then update your controller <code>destroy</code> method to:</p>\n\n<pre><code># DELETE /ruby_win_sources/1\n# DELETE /ruby_win_sources/1.json\ndef destroy\n    RubyWinSource.find_by_id(params[:id]).destroy\n    respond_to do |format|\n      format.html { redirect_to ruby_win_sources_url, notice: 'Ruby win source was successfully destroyed.' }\n      format.json { head :no_content }\n    end\nend\n</code></pre>\n"}], "owner": {"reputation": 3436, "user_id": 2330905, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/310e0eecea5a8f5c6bcf7ee7be2b5b49?s=128&d=identicon&r=PG", "display_name": "Chinmay235", "link": "https://stackoverflow.com/users/2330905/chinmay235"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1459942038, "creation_date": 1459940186, "last_edit_date": 1459942038, "question_id": 36449043, "link": "https://stackoverflow.com/questions/36449043/data-not-deleted-from-the-sqlite3-table", "title": "Data not deleted from the sqlite3 table", "body": "<p>I am new in ruby. I want to delete record. But unable to delete. Please check my code - </p>\n\n<p><strong>ruby_win_sources/index.html.erb</strong></p>\n\n<pre><code>&lt;table border=\"1\" cellpadding=\"1\" cellspacing=\"1\" width=\"100%\"&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th&gt;Name&lt;/th&gt;\n      &lt;th&gt;Author&lt;/th&gt;\n      &lt;th&gt;Url&lt;/th&gt;\n      &lt;th colspan=\"3\"&gt;Action&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n\n  &lt;tbody&gt;\n    &lt;% @ruby_win_sources.each do |ruby_win_source| %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;%= ruby_win_source.name %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= ruby_win_source.author %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= ruby_win_source.url %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Show', ruby_win_source %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Edit', edit_ruby_win_source_path(ruby_win_source) %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Destroy', ruby_win_source, method: :destroy, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;% end %&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p><strong>ruby_win_sources_controller.rb</strong></p>\n\n<pre><code>class RubyWinSourcesController &lt; ApplicationController\n  before_action :set_ruby_win_source, only: [:show, :edit, :update, :destroy]\n\n  # GET /ruby_win_sources\n  # GET /ruby_win_sources.json\n  def index\n    @ruby_win_sources = RubyWinSource.all\n  end\n\n  # GET /ruby_win_sources/1\n  # GET /ruby_win_sources/1.json\n  def show\n  end\n\n  # GET /ruby_win_sources/new\n  def new\n    @ruby_win_source = RubyWinSource.new\n  end\n\n  # GET /ruby_win_sources/1/edit\n  def edit\n  end\n\n  # POST /ruby_win_sources\n  # POST /ruby_win_sources.json\n  def create\n    @ruby_win_source = RubyWinSource.new(ruby_win_source_params)\n\n    respond_to do |format|\n      if @ruby_win_source.save\n        format.html { redirect_to @ruby_win_source, notice: 'Ruby win source was successfully created.' }\n        format.json { render :show, status: :created, location: @ruby_win_source }\n      else\n        format.html { render :new }\n        format.json { render json: @ruby_win_source.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /ruby_win_sources/1\n  # PATCH/PUT /ruby_win_sources/1.json\n  def update\n    respond_to do |format|\n      if @ruby_win_source.update(ruby_win_source_params)\n        format.html { redirect_to @ruby_win_source, notice: 'Ruby win source was successfully updated.' }\n        format.json { render :show, status: :ok, location: @ruby_win_source }\n      else\n        format.html { render :edit }\n        format.json { render json: @ruby_win_source.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /ruby_win_sources/1\n  # DELETE /ruby_win_sources/1.json\n  def destroy\n    @ruby_win_source.destroy\n    respond_to do |format|\n      format.html { redirect_to ruby_win_sources_url, notice: 'Ruby win source was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_ruby_win_source\n      @ruby_win_source = RubyWinSource.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def ruby_win_source_params\n      params.require(:ruby_win_source).permit(:name, :author, :url)\n    end\nend\n</code></pre>\n\n<p>Delete confirm box not opening.</p>\n\n<p>Please help me</p>\n\n<p>Edit - \n<strong>routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n  resources :ruby_win_sources\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "subdomain", "wildcard-subdomain"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5496955"}, "edited": false, "score": 0, "creation_date": 1459940101, "post_id": 36448968, "comment_id": 60510686, "body": "You mean I buy domain first?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5496955"}, "edited": false, "score": 0, "creation_date": 1459940118, "post_id": 36448968, "comment_id": 60510697, "body": "KIndly ellaborate it please"}, {"owner": {"reputation": 1621, "user_id": 2160595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wYsWC.jpg?s=128&g=1", "display_name": "Tobias Lins", "link": "https://stackoverflow.com/users/2160595/tobias-lins"}, "edited": false, "score": 0, "creation_date": 1459940659, "post_id": 36448968, "comment_id": 60511074, "body": "Yes, you need a custom domain! See their documentation <a href=\"https://devcenter.heroku.com/articles/custom-domains\" rel=\"nofollow noreferrer\">here</a>"}], "tags": [], "owner": {"reputation": 1621, "user_id": 2160595, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wYsWC.jpg?s=128&g=1", "display_name": "Tobias Lins", "link": "https://stackoverflow.com/users/2160595/tobias-lins"}, "is_accepted": false, "score": 1, "last_activity_date": 1459940006, "creation_date": 1459940006, "answer_id": 36448968, "question_id": 36448815, "link": "https://stackoverflow.com/questions/36448815/how-to-set-subdomain-on-heroku/36448968#36448968", "title": "How to set subdomain on heroku", "body": "<p>Subdomains are only available with a custom domain, not with a herokuapp.com domain!</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5496955"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459940006, "creation_date": 1459939635, "question_id": 36448815, "link": "https://stackoverflow.com/questions/36448815/how-to-set-subdomain-on-heroku", "title": "How to set subdomain on heroku", "body": "<p>I have an app which have multiple sub domains and work locally fine.</p>\n\n<pre><code>manager.daycare.no:3000/\nworker.daycare.no:3000/\ndaycare.no:3000/\nadmin.daycare.no:3000/\nparent.daycare.no:3000/\n</code></pre>\n\n<p>When I deploy it on heroku these sub-domains doesn't work.\nHeroku app url is <code>https://polar-harbor-19809.herokuapp.com/</code> . </p>\n\n<p>How I set these subdomains on heroku and please tell me what will be url after subdomain urls?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "actioncontroller"], "comments": [{"owner": {"reputation": 35, "user_id": 5051891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d75e40e641820a4debdc4b8dde4dc0f?s=128&d=identicon&r=PG&f=1", "display_name": "Vikram", "link": "https://stackoverflow.com/users/5051891/vikram"}, "edited": false, "score": 0, "creation_date": 1461065021, "post_id": 36448423, "comment_id": 61019139, "body": "any one know how to do these?"}], "owner": {"reputation": 35, "user_id": 5051891, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d75e40e641820a4debdc4b8dde4dc0f?s=128&d=identicon&r=PG&f=1", "display_name": "Vikram", "link": "https://stackoverflow.com/users/5051891/vikram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 399, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1459941529, "creation_date": 1459938600, "last_edit_date": 1459941529, "question_id": 36448423, "link": "https://stackoverflow.com/questions/36448423/uninitialized-constant-actioncontrollercachingsweeping-nameerror", "title": "uninitialized constant ActionController::Caching::Sweeping (NameError)", "body": "<p>its an api based application </p>\n\n<p>using rails 4.1.13</p>\n\n<p>gem 'rails-observers'</p>\n\n<p>app/config/initializers/base_sweeper.rb</p>\n\n<pre><code>class BaseSweeper &lt; ActionController::Caching::Sweeper\n  observe ActiveRecord::Base\n\n  def after_save(object)\n    # ..... call to version class for record saving purpose\n  end\n\nend\n</code></pre>\n\n<p>application.rb</p>\n\n<pre><code>config.autoload_paths += %W(#{config.root}/services #{config.root}/lib)\n</code></pre>\n\n<p>app/services/version.rb</p>\n\n<pre><code>class Version\n  #some method to store records\nend\n</code></pre>\n\n<p>ChannelController.rb</p>\n\n<pre><code>classs Api::V1::ChannelsController &lt; Api::V1::BaseController\n cache sweeper :base_sweeper, only: [:create, :update]\nend\n\n#channel.rb\nhas_many :channel_logs\n\n#channel_log.rb\nbelongs_to :channel\n\ndevelopment.rb\nconfig.active_record.observers = :base_sweeper\n</code></pre>\n\n<p>I got an error uninitialized constant basesweeper?</p>\n"}, {"tags": ["ruby", "string"], "comments": [{"owner": {"reputation": 1814, "user_id": 5006469, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7b557baad76e9fca74ff4d0d1aac568a?s=128&d=identicon&r=PG&f=1", "display_name": "rdupz", "link": "https://stackoverflow.com/users/5006469/rdupz"}, "edited": false, "score": 0, "creation_date": 1459938784, "post_id": 36448407, "comment_id": 60509782, "body": "You&#39;re trying to implement caesar cipher."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1459942642, "post_id": 36448407, "comment_id": 60512590, "body": "More specifically, <a href=\"https://en.wikipedia.org/wiki/ROT13\" rel=\"nofollow noreferrer\">ROT13</a>"}], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1459940418, "creation_date": 1459940418, "answer_id": 36449142, "question_id": 36448407, "link": "https://stackoverflow.com/questions/36448407/method-in-ruby-to-replace-string-with-characters-in-the-alphabet-index-13/36449142#36449142", "title": "Method in Ruby to replace string with characters in the alphabet + index 13", "body": "<p>I don't understand your entire code, but if that works for the beginning of the alphabets, then you should perhaps change all <code>index + 13</code> to <code>(index + 13) % 26</code>, and it should work.</p>\n"}, {"tags": [], "owner": {"reputation": 967, "user_id": 3721985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4aa381fb6c99cb7b84fdb25e6f6aafb4?s=128&d=identicon&r=PG", "display_name": "Rohit Jangid", "link": "https://stackoverflow.com/users/3721985/rohit-jangid"}, "is_accepted": false, "score": 0, "last_activity_date": 1459940461, "creation_date": 1459940461, "answer_id": 36449160, "question_id": 36448407, "link": "https://stackoverflow.com/questions/36448407/method-in-ruby-to-replace-string-with-characters-in-the-alphabet-index-13/36449160#36449160", "title": "Method in Ruby to replace string with characters in the alphabet + index 13", "body": "<p>You could do this </p>\n\n<pre><code>def rot13(string)\n  string.each_codepoint.map { |c|\n    new_c = c + 13 # Increment in alphabets\n    if ((c.between?('a'.ord, 'z'.ord) &amp;&amp; new_c &gt; 'z'.ord) || (c.between?('A'.ord, 'Z'.ord) &amp;&amp; new_c &gt; 'Z'.ord))\n      new_c -= 26 # This would keep the character within desired range\n    end\n    new_c.chr\n  }.join('')\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 4, "creation_date": 1459942776, "post_id": 36449472, "comment_id": 60512691, "body": "It can even be shortened to <code>str.tr(&#39;a-zA-Z&#39;, &#39;n-za-mN-ZA-M&#39;)</code>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1459942909, "post_id": 36449472, "comment_id": 60512780, "body": "@Stefan: oh, nice :)"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 2, "last_activity_date": 1459941603, "last_edit_date": 1459941603, "creation_date": 1459941227, "answer_id": 36449472, "question_id": 36448407, "link": "https://stackoverflow.com/questions/36448407/method-in-ruby-to-replace-string-with-characters-in-the-alphabet-index-13/36449472#36449472", "title": "Method in Ruby to replace string with characters in the alphabet + index 13", "body": "<p>Here's the simplest thing that can work (utilizing the little-used <a href=\"http://apidock.com/ruby/String/tr\" rel=\"nofollow\"><code>String#tr</code></a>). Gracefully handles non-letters too.</p>\n\n<pre><code>def rot13(str)\n  alphabet     = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ'\n  replacements = 'nopqrstuvwxyzabcdefghijklmNOPQRSTUVWXYZABCDEFGHIJKLM'\n  str.tr(alphabet, replacements)\nend\n\nrot13('abc') # =&gt; \"nop\"\nrot13('nOp 123') # =&gt; \"aBc 123\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 2, "last_activity_date": 1459945736, "creation_date": 1459945736, "answer_id": 36451213, "question_id": 36448407, "link": "https://stackoverflow.com/questions/36448407/method-in-ruby-to-replace-string-with-characters-in-the-alphabet-index-13/36451213#36451213", "title": "Method in Ruby to replace string with characters in the alphabet + index 13", "body": "<p>Based on your \"source\" alphabet:</p>\n\n<pre><code>alphabet = ('a'..'z').to_a\n#=&gt; [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\",\n#    \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\"]\n</code></pre>\n\n<p>You could use <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-rotate\" rel=\"nofollow\"><code>Array#rotate</code></a> to create the \"destination\" alphabet:</p>\n\n<pre><code>alphabet13 = alphabet.rotate(13)\n#=&gt; [\"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \"u\", \"v\", \"w\", \"x\", \"y\", \"z\",\n#    \"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \"k\", \"l\", \"m\"]\n</code></pre>\n\n<p>Build a replacement hash by <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-zip\" rel=\"nofollow\"><code>zip</code></a>-ing both arrays:</p>\n\n<pre><code>replacement = alphabet.zip(alphabet13).to_h\n#=&gt; {\"a\"=&gt;\"n\", \"b\"=&gt;\"o\", \"c\"=&gt;\"p\", \"d\"=&gt;\"q\", \"e\"=&gt;\"r\", \"f\"=&gt;\"s\", \"g\"=&gt;\"t\",\n#    \"h\"=&gt;\"u\", \"i\"=&gt;\"v\", \"j\"=&gt;\"w\", \"k\"=&gt;\"x\", \"l\"=&gt;\"y\", \"m\"=&gt;\"z\",\n#    \"n\"=&gt;\"a\", \"o\"=&gt;\"b\", \"p\"=&gt;\"c\", \"q\"=&gt;\"d\", \"r\"=&gt;\"e\", \"s\"=&gt;\"f\", \"t\"=&gt;\"g\",\n#    \"u\"=&gt;\"h\", \"v\"=&gt;\"i\", \"w\"=&gt;\"j\", \"x\"=&gt;\"k\", \"y\"=&gt;\"l\", \"z\"=&gt;\"m\"}\n</code></pre>\n\n<p>And use <a href=\"http://ruby-doc.org/core-2.3.0/String.html#method-i-gsub\" rel=\"nofollow\"><code>gsub</code></a> to perform the substitution:</p>\n\n<pre><code>'abc xyz'.gsub(/[a-z]/, replacement)\n#=&gt; \"nop klm\"\n</code></pre>\n\n<p>You can also use <code>Regexp.union(replacement.keys)</code> instead of the hard coded <code>/[a-z]/</code>.</p>\n\n<p>Replacing the uppercase characters can be done in a separate step or by incorporating them into the replacement hash. I leave that to you.</p>\n"}, {"tags": [], "owner": {"reputation": 10280, "user_id": 874283, "user_type": "registered", "accept_rate": 34, "profile_image": "https://www.gravatar.com/avatar/8bbcdae54d8cd930405e57162e1522d3?s=128&d=identicon&r=PG&f=1", "display_name": "Zack Xu", "link": "https://stackoverflow.com/users/874283/zack-xu"}, "is_accepted": false, "score": 1, "last_activity_date": 1459964627, "creation_date": 1459964627, "answer_id": 36458511, "question_id": 36448407, "link": "https://stackoverflow.com/questions/36448407/method-in-ruby-to-replace-string-with-characters-in-the-alphabet-index-13/36458511#36458511", "title": "Method in Ruby to replace string with characters in the alphabet + index 13", "body": "<p>You can build a hash first, mapping <code>a</code> to <code>n</code>, <code>n</code> to <code>a</code>, <code>A</code> to <code>N</code>, <code>N</code> to <code>A</code>, etc.</p>\n\n<p>Then you simply remap your letters using this hash.</p>\n\n<pre><code>def remap input\n    a1 = (\"a\"..\"m\").to_a\n    a2 = (\"n\"..\"z\").to_a\n    a3 = (\"A\"..\"M\").to_a\n    a4 = (\"N\"..\"Z\").to_a\n    letter_map = (a1 + a2 + a3 + a4).zip(a2 + a1 + a4 + a3).to_h\n\n    input.split('').map {|x| letter_map[x] || x}.join\nend\n</code></pre>\n\n<p>If there's no mapping for the letter (eg space, punctuation, digits), you simply use the original letter.</p>\n\n<pre><code>2.2.1 :125 &gt; remap 'john smith'\n=&gt; \"wbua fzvgu\"\n2.2.1 :126 &gt; remap 'i love you!'\n=&gt; \"v ybir lbh!\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7517, "user_id": 7641078, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yB95H.png?s=128&g=1", "display_name": "Eduardo Baitello", "link": "https://stackoverflow.com/users/7641078/eduardo-baitello"}, "edited": false, "score": 1, "creation_date": 1573066789, "post_id": 58734208, "comment_id": 103763830, "body": "Code-only answers are generally frowned upon on this site. Could you please edit your answer to include some comments or explanation of your code? Explanations should answer questions like: What does it do? How does it do it? Where does it go? How does it solve OP&#39;s problem? See: <a href=\"https://stackoverflow.com/help/how-to-answer\">How to anwser</a>. Thanks!"}], "tags": [], "owner": {"reputation": 11, "user_id": 8297239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d2487b38689e105be769cfe3a60d46?s=128&d=identicon&r=PG&f=1", "display_name": "Deepak Kumar", "link": "https://stackoverflow.com/users/8297239/deepak-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1573056293, "creation_date": 1573056293, "answer_id": 58734208, "question_id": 36448407, "link": "https://stackoverflow.com/questions/36448407/method-in-ruby-to-replace-string-with-characters-in-the-alphabet-index-13/58734208#58734208", "title": "Method in Ruby to replace string with characters in the alphabet + index 13", "body": "<pre><code>def rot13(str)    \n    str.map{|x| x.tr('a-zA-Z', 'n-za-mN-ZA-M')}   \nend\n</code></pre>\n"}], "owner": {"reputation": 179, "user_id": 6123943, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c509abe9ddae3830a6207769a9cad55e?s=128&d=identicon&r=PG&f=1", "display_name": "Jack_Hardy", "link": "https://stackoverflow.com/users/6123943/jack-hardy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1788, "favorite_count": 1, "accepted_answer_id": 36449472, "answer_count": 6, "score": 1, "last_activity_date": 1613561825, "creation_date": 1459938580, "last_edit_date": 1613561825, "question_id": 36448407, "link": "https://stackoverflow.com/questions/36448407/method-in-ruby-to-replace-string-with-characters-in-the-alphabet-index-13", "title": "Method in Ruby to replace string with characters in the alphabet + index 13", "body": "<p>From a string, I am trying to replace each character with another character, 13 letters ahead in the alphabet. For example, &quot;ABC&quot; would return &quot;NOP&quot;.</p>\n<p>However, when I get to the end of the alphabet, I can't find a way to loop the index, so that it goes from index <code>[-1]</code> to <code>[0]</code> again and onwards. For example - When I type in &quot;XYZ&quot; it returns &quot;&quot;, but it should return &quot;KLM&quot;.</p>\n<p>Can anyone think of a solution to this?</p>\n<pre><code>def rot13(string)   \nalphabet = (&quot;a&quot;..&quot;z&quot;).to_a   \nbig_alphabet = (&quot;A&quot;..&quot;Z&quot;).to_a   \nresult = []   \nsplit_string = string.chars   \nalphabet.each_with_index do |item,index|\n        if string.include?(alphabet[index])\n          result &lt;&lt; alphabet[index+13]\n        elsif string.include?(big_alphabet[index])\n          result &lt;&lt; big_alphabet[index+13]   \nend \nend \nreturn result.join \nend\n    \n</code></pre>\n"}, {"tags": ["ruby", "copy", "amazon-redshift", "pg"], "answers": [{"comments": [{"owner": {"reputation": 1126, "user_id": 2485128, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bcaf0c354d6c448525809dc9bea142ef?s=128&d=identicon&r=PG", "display_name": "Drico", "link": "https://stackoverflow.com/users/2485128/drico"}, "edited": false, "score": 0, "creation_date": 1459951007, "post_id": 36452697, "comment_id": 60519273, "body": "Looks good, one more thing, do you have any idea to get the number of successfully loaded records ? (in this case, 22666, which is printed &#39;I don&#39;t know how&#39;)."}, {"owner": {"reputation": 631, "user_id": 134327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NW2l2.png?s=128&g=1", "display_name": "Mario Carrion", "link": "https://stackoverflow.com/users/134327/mario-carrion"}, "reply_to_user": {"reputation": 1126, "user_id": 2485128, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bcaf0c354d6c448525809dc9bea142ef?s=128&d=identicon&r=PG", "display_name": "Drico", "link": "https://stackoverflow.com/users/2485128/drico"}, "edited": false, "score": 0, "creation_date": 1459951447, "post_id": 36452697, "comment_id": 60519640, "body": "The number of successfully loaded records is the same number of lines in the CSV you&#39;re importing; to my understanding if the COPY command fails nothing gets imported, so you need to fix the &quot;broken&quot; row and retry."}, {"owner": {"reputation": 1126, "user_id": 2485128, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bcaf0c354d6c448525809dc9bea142ef?s=128&d=identicon&r=PG", "display_name": "Drico", "link": "https://stackoverflow.com/users/2485128/drico"}, "edited": false, "score": 0, "creation_date": 1459952292, "post_id": 36452697, "comment_id": 60520304, "body": "By using MAXERROR parameter in a COPY command, you can tell redshift to ignore failures without throwing an error. see <a href=\"http://docs.aws.amazon.com/redshift/latest/dg/copy-parameters-data-load.html#copy-maxerror\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/redshift/latest/dg/&hellip;</a>"}], "tags": [], "owner": {"reputation": 631, "user_id": 134327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NW2l2.png?s=128&g=1", "display_name": "Mario Carrion", "link": "https://stackoverflow.com/users/134327/mario-carrion"}, "is_accepted": true, "score": 2, "last_activity_date": 1459951648, "last_edit_date": 1459951648, "creation_date": 1459949508, "answer_id": 36452697, "question_id": 36448246, "link": "https://stackoverflow.com/questions/36448246/identify-redshift-copy-failing-records-in-ruby/36452697#36452697", "title": "Identify Redshift COPY failing records in Ruby", "body": "<p><code>stl_load_errors</code> is a table in Redshift that (as you may have guessed already) includes all the errors that happen when loading into Redshift. So you can query it by doing something like:</p>\n\n<pre><code>SELECT * FROM stl_load_errors\n</code></pre>\n\n<p>Now, to answer your questions use the following snippet:</p>\n\n<pre><code>database = PG.connect(redshift)\nbegin\n  query = \"COPY %s (%s) FROM 's3://%s/%s' CREDENTIALS 'aws_access_key_id=%s;aws_secret_access_key=%s' CSV GZIP\" %\n[ table, columns, s3_bucket, s3_key, access_key_id, secret_access_key ]\n\n  database.exec(query)\n  puts 'File succesfully imported'\nrescue PG::InternalError\n  res = database.exec(\"SELECT line_number, colname, err_reason FROM pg_catalog.stl_load_errors WHERE filename = 's3://#{s3_bucket}/#{s3_key}'\")\n  res.each do |row|\n    puts \"Importing failed:\\n&gt; Line %s\\n&gt; Column: %s\\n&gt; Reason: %s\" % row.values_at('line_number', 'colname', 'err_reason')\n end\nend\n</code></pre>\n\n<p>That should output all the information you need, recall variables like <code>redshift</code>, <code>table</code>, <code>columns</code>, <code>s3_bucket</code>, <code>s3_key</code>, <code>access_key_id</code>, and <code>secret_access_key</code> depend on your configuration.</p>\n\n<p><strong>UPDATE:</strong> </p>\n\n<p>To answer your comment below, more specifically, you could use a query like this:</p>\n\n<pre><code>\"SELECT lines_scanned FROM pg_catalog.stl_load_commits WHERE filename = 's3://#{s3_bucket}/#{s3_key}' AND errors = -1\"\n</code></pre>\n"}], "owner": {"reputation": 1126, "user_id": 2485128, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bcaf0c354d6c448525809dc9bea142ef?s=128&d=identicon&r=PG", "display_name": "Drico", "link": "https://stackoverflow.com/users/2485128/drico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "accepted_answer_id": 36452697, "answer_count": 1, "score": 1, "last_activity_date": 1459951648, "creation_date": 1459938190, "question_id": 36448246, "link": "https://stackoverflow.com/questions/36448246/identify-redshift-copy-failing-records-in-ruby", "title": "Identify Redshift COPY failing records in Ruby", "body": "<p>When performing a <code>COPY</code> command, a few informations are printed, like :</p>\n\n<pre><code>INFO:  Load into table '&lt;table&gt;' completed, 22666 record(s) loaded successfully.\nINFO:  Load into table '&lt;table&gt;' completed, 1 record(s) could not be loaded.  Check 'stl_load_errors' system table for details.\n</code></pre>\n\n<p>And I need to identify failing records.</p>\n\n<p>Thus I need 2 things :</p>\n\n<ul>\n<li>Determine when there are failing rows: now, it's only printed on screen and I don't know how to get the message in code.</li>\n<li>Determine the failing rows.</li>\n</ul>\n\n<p>One way to do that would be to access to the <code>query</code> identifier that is visible in the table <code>stl_load_errors</code>, but I have no clue how to access it by code.</p>\n\n<p>(I currently use the <code>pg</code> gem to connect to redshift)</p>\n"}, {"tags": ["ruby", "file"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1459937774, "post_id": 36448048, "comment_id": 60509077, "body": "What are <code>ARGV[0]</code> and <code>ARGV[1]</code>?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1459937777, "post_id": 36448048, "comment_id": 60509078, "body": "<code>system(&quot;cp #{ARGV[1]} #{ARGV[0]}&quot;)</code> or something :)"}, {"owner": {"reputation": 309, "user_id": 2353808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQ5yy.jpg?s=128&g=1", "display_name": "A. Romeu", "link": "https://stackoverflow.com/users/2353808/a-romeu"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1459937899, "post_id": 36448048, "comment_id": 60509161, "body": "@sawa Those are file names received on the command line, but they can be any params. I can update the question with file names if needed"}, {"owner": {"reputation": 24791, "user_id": 499214, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PObJM.png?s=128&g=1", "display_name": "John Dvorak", "link": "https://stackoverflow.com/users/499214/john-dvorak"}, "edited": false, "score": 0, "creation_date": 1459937917, "post_id": 36448048, "comment_id": 60509175, "body": "Unclosed files don&#39;t matter too much after your process finishes."}, {"owner": {"reputation": 309, "user_id": 2353808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQ5yy.jpg?s=128&g=1", "display_name": "A. Romeu", "link": "https://stackoverflow.com/users/2353808/a-romeu"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1459937927, "post_id": 36448048, "comment_id": 60509185, "body": "@SergioTulentsev isn&#39;t that cheating a bit? :)"}, {"owner": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 0, "creation_date": 1459938752, "post_id": 36448048, "comment_id": 60509755, "body": "May I ask why you want to do this as a one-liner? This might make your problem less readable."}, {"owner": {"reputation": 309, "user_id": 2353808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQ5yy.jpg?s=128&g=1", "display_name": "A. Romeu", "link": "https://stackoverflow.com/users/2353808/a-romeu"}, "reply_to_user": {"reputation": 2756, "user_id": 5114342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/725caa4188def46b8c6cf9b09eff7e85?s=128&d=identicon&r=PG&f=1", "display_name": "Aziuth", "link": "https://stackoverflow.com/users/5114342/aziuth"}, "edited": false, "score": 0, "creation_date": 1459941157, "post_id": 36448048, "comment_id": 60511447, "body": "@Aziuth that&#39;s true, sometimes is better to write in more lines, I just wanted to know if it was feasible"}], "answers": [{"comments": [{"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1459950087, "post_id": 36448170, "comment_id": 60518507, "body": "I would at least add an understandable error message, if ARGV[0] and/or ARGV[1] are nil or empty...."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 3, "last_activity_date": 1459937984, "creation_date": 1459937984, "answer_id": 36448170, "question_id": 36448048, "link": "https://stackoverflow.com/questions/36448048/one-liner-copy-file-in-ruby/36448170#36448170", "title": "One-liner copy file in ruby", "body": "<pre><code>File.write(ARGV[1], File.read(ARGV[0]))\n</code></pre>\n\n<p>is a bit shorter and will  ensure the files will be closed.</p>\n"}], "owner": {"reputation": 309, "user_id": 2353808, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/gQ5yy.jpg?s=128&g=1", "display_name": "A. Romeu", "link": "https://stackoverflow.com/users/2353808/a-romeu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 36448170, "answer_count": 1, "score": 0, "last_activity_date": 1459938213, "creation_date": 1459937627, "question_id": 36448048, "link": "https://stackoverflow.com/questions/36448048/one-liner-copy-file-in-ruby", "title": "One-liner copy file in ruby", "body": "<p>Is there a one-line way to copy a file to another in Ruby, ensuring the files are closed after the operation finishes?</p>\n\n<p>The best I can come up with is this but I'm not sure the files are closed</p>\n\n<pre><code>open(ARGV[1], 'w').write(open(ARGV[0]).read)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin"], "answers": [{"tags": [], "owner": {"reputation": 850, "user_id": 458860, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8d61f86b768abb955e5b97ed03661372?s=128&d=identicon&r=PG", "display_name": "nicolas", "link": "https://stackoverflow.com/users/458860/nicolas"}, "is_accepted": true, "score": 1, "last_activity_date": 1459940680, "creation_date": 1459940680, "answer_id": 36449268, "question_id": 36448027, "link": "https://stackoverflow.com/questions/36448027/activeadmin-wrong-number-of-arguments-0-for-1-on-member-action/36449268#36449268", "title": "activeadmin : wrong number of arguments (0 for 1) on member_action", "body": "<p>My mistake was to pass a variable to the <code>member_action</code> block, the instance seems to be available via the <code>resource</code> helper</p>\n\n<pre><code>member_action :cancel, method: :patch do\n  resource.cancel!\n  redirect_to admin_deal_path(resource) \nend\n</code></pre>\n"}], "owner": {"reputation": 850, "user_id": 458860, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8d61f86b768abb955e5b97ed03661372?s=128&d=identicon&r=PG", "display_name": "nicolas", "link": "https://stackoverflow.com/users/458860/nicolas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 986, "favorite_count": 0, "accepted_answer_id": 36449268, "answer_count": 1, "score": 1, "last_activity_date": 1480416425, "creation_date": 1459937549, "last_edit_date": 1480416425, "question_id": 36448027, "link": "https://stackoverflow.com/questions/36448027/activeadmin-wrong-number-of-arguments-0-for-1-on-member-action", "title": "activeadmin : wrong number of arguments (0 for 1) on member_action", "body": "<p>i'm building my RoR app admin interface using active admin, got an exception i'm stuck on trying to set up custom actions : </p>\n\n<pre><code>ActiveAdmin.register Deal do\n [:cancel, :release].each do |event|\n   member_action event , method: :patch do |deal|\n    deal.send :\"#{event}!\"\n    redirect_to admin_deal_path(deal), notice: \"Your event was #{deal.current_state}\"\n   end\n\n   action_item event, only: :show do\n     link_to event, url_for(action: event), method: :patch\n   end\n end\nend\n</code></pre>\n\n<p>The event links display well on the page but when clicking on one of them got the following exception : </p>\n\n<pre><code>ArgumentError (wrong number of arguments (0 for 1)):\napp/admin/deal.rb:45:in `block (3 levels) in &lt;top (required)&gt;'\napp/admin/deal.rb:45:in `block (3 levels) in &lt;top (required)&gt;'\n\nactionpack (4.2.6) lib/action_controller/metal/implicit_render.rb:4:in `send_action'\nactionpack (4.2.6) lib/abstract_controller/base.rb:198:in `process_action'\nactionpack (4.2.6) lib/action_controller/metal/rendering.rb:10:in `process_action'\nactionpack (4.2.6) lib/abstract_controller/callbacks.rb:20:in `block in process_action'\nactivesupport (4.2.6) lib/active_support/callbacks.rb:117:in `call'\nactivesupport (4.2.6) lib/active_support/callbacks.rb:117:in `call'\nactivesupport (4.2.6) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'\nactivesupport (4.2.6) lib/active_support/callbacks.rb:505:in `call'\nactivesupport (4.2.6) lib/active_support/callbacks.rb:505:in `call'\nactivesupport (4.2.6) lib/active_support/callbacks.rb:92:in `__run_callbacks__'\nactivesupport (4.2.6) lib/active_support/callbacks.rb:778:in `_run_process_action_callbacks'\nactivesupport (4.2.6) lib/active_support/callbacks.rb:81:in `run_callbacks'\nactionpack (4.2.6) lib/abstract_controller/callbacks.rb:19:in `process_action'\nactionpack (4.2.6) lib/action_controller/metal/rescue.rb:29:in `process_action'\nactionpack (4.2.6) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'\nactivesupport (4.2.6) lib/active_support/notifications.rb:164:in `block in instrument'\nactivesupport (4.2.6)   lib/active_support/notifications/instrumenter.rb:20:in `instrument'\nactivesupport (4.2.6) lib/active_support/notifications.rb:164:in `instrument'\nactionpack (4.2.6) lib/action_controller/metal/instrumentation.rb:30:in `process_action'\nactionpack (4.2.6) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'\nactiverecord (4.2.6)   lib/active_record/railties/controller_runtime.rb:18:in `process_action'\nactionpack (4.2.6) lib/abstract_controller/base.rb:137:in `process'\nactionview (4.2.6) lib/action_view/rendering.rb:30:in `process'\n</code></pre>\n\n<p>Line 46 of <code>admin/deal.rb</code> is the line where <code>member_action</code> is called, it seems the <code>activeadmin</code> method is overided somehow somewhere or there is something else obvious i don't see... </p>\n\n<p><strong>Any idea where it could come from ?</strong> amon other gems I'm using cancancan, devise, and responders. </p>\n\n<p>Thanks in advance</p>\n\n<p>**UPDATED : full stacktrace **</p>\n"}, {"tags": ["ruby", "unicode", "encoding", "io", "arabic"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1465652916, "post_id": 36447724, "comment_id": 62997526, "body": "Can you please add some example name or an example on how the file looks like. Perhaps you can make it a sample available to download somewhere?"}, {"owner": {"reputation": 379, "user_id": 5070754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/841063582643271/picture?type=large", "display_name": "Redouane Red", "link": "https://stackoverflow.com/users/5070754/redouane-red"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1465653690, "post_id": 36447724, "comment_id": 62997738, "body": "for example, this : <a href=\"http://pastebin.com/fhE8Yx0Y\" rel=\"nofollow noreferrer\">pastebin.com/fhE8Yx0Y</a>"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1465654504, "post_id": 36447724, "comment_id": 62998009, "body": "I just tried your file in IRB. <code>string.split(&quot;\\n&quot;).each { |line| puts line }</code> looks fine on my side. Things that might be different in my setup: I use default <code>UTF8</code> (instead of <code>CP850</code> like you do) and I have compiled Ruby with Readline support (see: <a href=\"http://stackoverflow.com/a/37480112/2483313\">stackoverflow.com/a/37480112/2483313</a>)."}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1465655809, "post_id": 36447724, "comment_id": 62998482, "body": "<a href=\"https://en.wikipedia.org/wiki/Code_page_850\" rel=\"nofollow noreferrer\">CP850</a> doesn\u2019t include Arabic characters, so the file can\u2019t be in that encoding. You need to determine the <i>actual</i> encoding of the file, and the encoding of your console (which may not be able to display Arabic)."}, {"owner": {"reputation": 379, "user_id": 5070754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/841063582643271/picture?type=large", "display_name": "Redouane Red", "link": "https://stackoverflow.com/users/5070754/redouane-red"}, "reply_to_user": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1465659273, "post_id": 36447724, "comment_id": 62999606, "body": "@matt Thanks, I&#39;ll try compiling Ruby with Readline support and use the UTF-8 encoding instead of CP850"}], "answers": [{"tags": [], "owner": {"reputation": 387, "user_id": 1333623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/830e8f8f8e67372ce161f803dd550585?s=128&d=identicon&r=PG", "display_name": "larapsodia", "link": "https://stackoverflow.com/users/1333623/larapsodia"}, "is_accepted": false, "score": 0, "last_activity_date": 1471571118, "creation_date": 1471571118, "answer_id": 39029906, "question_id": 36447724, "link": "https://stackoverflow.com/questions/36447724/printing-a-cp850-encoded-string-with-ruby-irb/39029906#39029906", "title": "Printing a CP850 encoded string with Ruby (IRB)", "body": "<p>Change the encoding of the file to utf-8.</p>\n\n<p>I don't know how this is accomplished in Ruby, but Django (the newer ones using Python 3), it's:</p>\n\n<pre><code>open('filename.txt', w, 'utf-8)\n</code></pre>\n\n<p>If you're using Python 2 it will be slightly more difficult. If so, it's worth upgrading to 3 just because it's native unicode and makes doing anything with Arabic a lot easier.</p>\n"}], "owner": {"reputation": 379, "user_id": 5070754, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/841063582643271/picture?type=large", "display_name": "Redouane Red", "link": "https://stackoverflow.com/users/5070754/redouane-red"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 313, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471571118, "creation_date": 1459936748, "last_edit_date": 1459937634, "question_id": 36447724, "link": "https://stackoverflow.com/questions/36447724/printing-a-cp850-encoded-string-with-ruby-irb", "title": "Printing a CP850 encoded string with Ruby (IRB)", "body": "<p>I want to open a text file (test.txt) that contains arabic text (its encoding is CP850), then print its content to STDOUT :</p>\n\n<pre><code># coding : CP850\nSTDOUT.set_encoding(Encoding::CP850); # not sure if it's necessary\nopen('G:/test.txt',?r){|f|\n    f.read.each_char{|c| print c};\n    # or puts f.read;\n}\ngets\n</code></pre>\n\n<p>but it does not print the arabic characters, the output is some symbols and random characters.\nUsing Ruby 2.2.3</p>\n"}, {"tags": ["ruby", "encryption", "random", "cryptography", "aes"], "comments": [{"owner": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 0, "creation_date": 1459971354, "post_id": 36446608, "comment_id": 60533398, "body": "Are you asking how to convert random bytes to random numbers in a specific interval in a uniform fashion?"}, {"owner": {"reputation": 1302, "user_id": 5219277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/15813d725758c9ecd8ffd3c0494b8f59?s=128&d=identicon&r=PG", "display_name": "Michael Andorfer", "link": "https://stackoverflow.com/users/5219277/michael-andorfer"}, "reply_to_user": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 0, "creation_date": 1460199122, "post_id": 36446608, "comment_id": 60637241, "body": "@ArtjomB. yes, exactly I am asking how to generate secure random numbers."}, {"owner": {"reputation": 1302, "user_id": 5219277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/15813d725758c9ecd8ffd3c0494b8f59?s=128&d=identicon&r=PG", "display_name": "Michael Andorfer", "link": "https://stackoverflow.com/users/5219277/michael-andorfer"}, "reply_to_user": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 0, "creation_date": 1460206340, "post_id": 36446608, "comment_id": 60639443, "body": "@ArtjomB. do you have any suggestions how to implement such a functionality (PNGR AES CTR)?"}], "answers": [{"comments": [{"owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "edited": false, "score": 0, "creation_date": 1459940797, "post_id": 36449304, "comment_id": 60511193, "body": "You <i>may</i> have to improve your IV/nonce &amp; buffer handling to use it as primitive for that purpose though."}, {"owner": {"reputation": 58084, "user_id": 1816580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f30e6b41f1e2bd48b058e8e72c1f0f57?s=128&d=identicon&r=PG", "display_name": "Artjom B.", "link": "https://stackoverflow.com/users/1816580/artjom-b"}, "edited": false, "score": 0, "creation_date": 1460199405, "post_id": 36449304, "comment_id": 60637318, "body": "It seems OP wants a DRNG from a DRBG"}, {"owner": {"reputation": 1302, "user_id": 5219277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/15813d725758c9ecd8ffd3c0494b8f59?s=128&d=identicon&r=PG", "display_name": "Michael Andorfer", "link": "https://stackoverflow.com/users/5219277/michael-andorfer"}, "edited": false, "score": 0, "creation_date": 1460199954, "post_id": 36449304, "comment_id": 60637483, "body": "@MaartenBodewes yes, that specification seems to be good in theory, but as I am really new to cryptography it seems to be too advanced for my purposes and knowledge."}], "tags": [], "owner": {"reputation": 79299, "user_id": 589259, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/vJbKg.jpg?s=128&g=1", "display_name": "Maarten Bodewes", "link": "https://stackoverflow.com/users/589259/maarten-bodewes"}, "is_accepted": true, "score": 3, "last_activity_date": 1512423228, "last_edit_date": 1512423228, "creation_date": 1459940793, "answer_id": 36449304, "question_id": 36446608, "link": "https://stackoverflow.com/questions/36446608/random-number-generator-with-aes-counter-mode-ruby/36449304#36449304", "title": "Random Number Generator with AES Counter Mode - Ruby", "body": "<p>You could use AES to build CTR_DRBG as specified in <a href=\"http://csrc.nist.gov/publications/nistpubs/800-90A/SP800-90A.pdf\" rel=\"nofollow noreferrer\">NIST Special Publication 800-90A</a>, section 10.2: 10.2 DRBG Mechanisms Based on Block Ciphers which uses CTR block cipher mode of operation as underlying primitive.</p>\n\n<p>A stream cipher has the disadvantage that it doesn't repeat blocks, which may slightly bias the output. A previous answer mentioned AES-CTR, which has this disadvantage.</p>\n"}], "owner": {"reputation": 1302, "user_id": 5219277, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/15813d725758c9ecd8ffd3c0494b8f59?s=128&d=identicon&r=PG", "display_name": "Michael Andorfer", "link": "https://stackoverflow.com/users/5219277/michael-andorfer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 804, "favorite_count": 0, "accepted_answer_id": 36449304, "answer_count": 1, "score": 1, "last_activity_date": 1512423228, "creation_date": 1459934103, "last_edit_date": 1459945004, "question_id": 36446608, "link": "https://stackoverflow.com/questions/36446608/random-number-generator-with-aes-counter-mode-ruby", "title": "Random Number Generator with AES Counter Mode - Ruby", "body": "<p>my goal is to implement a random number generator based on AES Counter Mode in Ruby. </p>\n\n<p>I have implemented the counter mode myself as follows:</p>\n\n<pre><code>require './aes_helpers'\nrequire 'openssl'\n\nclass AES_CTR_Random\n\n  # Setup basic aes, since a mode is required ecb is used,\n  # which constructs same cipher text blocks for same plain text blocks\n  def intialize_openssl_aes(encrypt_or_decrypt, mode, key, iv, data, bits)\n    key_s = byte_array_to_byte_string(key)\n    data_s = byte_array_to_byte_string(data)\n\n    aes = OpenSSL::Cipher::AES.new(bits, mode)\n    aes.send(encrypt_or_decrypt)\n    aes.padding = 0\n    aes.key = key_s\n    aes.iv = byte_array_to_byte_string(iv) if iv\n    encrypted = aes.update(data_s) + aes.final\n\n    byte_string_to_byte_array(encrypted)\n end\n\n  # Encrypt or decrypt one AES block\n  def process_aes_block(encrypt_or_decrypt, key, block)\n    intialize_openssl_aes(encrypt_or_decrypt, 'ECB', key, nil, block, 128)\nend\n\n  # Generate a stream cipher key using given AES key and initialization vector\n  def generate_aes_ctr_stream_key(key, iv, length)\n    iv = byte_array_to_integer(iv)\n    stream_key = []\n    while stream_key.length &lt; length\n    stream_key += process_aes_block(:encrypt, key, integer_to_byte_array(iv))\n    iv += 1\n    end\n    stream_key.take(length)\n  end\n\n  # Run Cipher Counter Mode\n  def run_ctr(key, iv, data)\n    # Get a properly sized stream cipher key using aes cipher counter mode\n    stream_key = generate_aes_ctr_stream_key(key, iv, data.length)\n\n    # Stream cipher decryption\n    byte_array_xor_byte_array(stream_key, data)\n  end\n\n  # Encrypt plaintext with aes 128 ctr using given key and iv\n  def encrypt_ctr(key, iv, plaintext)\n    key = hexadecimal_string_to_byte_buffer(key)\n    iv = hexadecimal_string_to_byte_buffer(iv)\n    plaintext = byte_string_to_byte_array(plaintext)\n\n    encrypted = run_ctr(key, iv, plaintext)\n\n    byte_buffer_to_hexadecimal_string(iv + encrypted)\n  end\n\n  # Decrypt aes 128 ctr encrypted ciphertext\n  def decrypt_ctr(key, ciphertext)\n    key = hexadecimal_string_to_byte_buffer(key)\n    ciphertext = hexadecimal_string_to_byte_buffer(ciphertext)\n\n    iv = ciphertext.take(16)\n    ciphertext = ciphertext.drop(16)\n\n    plaintext = run_ctr(key, iv, ciphertext)\n\n    byte_array_to_byte_string(plaintext)\n  end\nend\n</code></pre>\n\n<p>But now I do not quite understand how to get random numbers out of this implementation.</p>\n\n<p>Can anyone guide me to a solution?</p>\n"}, {"tags": ["ruby", "roo-gem"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1459950926, "post_id": 36446596, "comment_id": 60519200, "body": "You will need to be more specific about how to reproduce the issue. For example, is the problem with every Excel file you download or just the specific one you are downloading? Is the downloaded Excel file valid - ie can Excel open it?"}, {"owner": {"reputation": 1, "user_id": 6154994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/686a8b69f9c1f9517258e3b9bb2b6ec1?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/6154994/anonymous"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1460006256, "post_id": 36446596, "comment_id": 60545604, "body": "Yes, for all the downloaded excel files which were opened immediately by using &quot;roo&quot;, it throws the error..But if the downloaded file opened manually and saved without doing any change, then works fine with &quot;roo&quot;.."}, {"owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "edited": false, "score": 0, "creation_date": 1460154311, "post_id": 36446596, "comment_id": 60627168, "body": "What are the names of the sheets in the excel-file? Do they contain special characters? Because roo is internally using a regular expression there."}], "owner": {"reputation": 1, "user_id": 6154994, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/686a8b69f9c1f9517258e3b9bb2b6ec1?s=128&d=identicon&r=PG&f=1", "display_name": "Anonymous", "link": "https://stackoverflow.com/users/6154994/anonymous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1460148974, "creation_date": 1459934075, "last_edit_date": 1460148974, "question_id": 36446596, "link": "https://stackoverflow.com/questions/36446596/downloaded-xlsx-files-not-working-with-roo", "title": "Downloaded .xlsx files not working with roo", "body": "<p>In ruby while working with excel worksheets, i am using \"roo\" gem.\nIt is working well with the local files associated with my system.\nBut when i download a new excel file from internet and opening it with 'roo' throws error like </p>\n\n<p>Ruby193/lib/ruby/gems/1.9.1/gems/roo-2.3.2/lib/roo/excelx.rb:364:in <code>block in extract_sheets_in_order': undefined method 'extract' for nil:NilClass (NoMethodError)\n    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/roo-2.3.2/lib/roo/excelx.rb:358:in 'each'\n    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/roo-2.3.2/lib/roo/excelx.rb:358:in 'each_with_index'\n    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/roo-2.3.2/lib/roo/excelx.rb:358:in 'extract_sheets_in_order'\n    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/roo-2.3.2/lib/roo/excelx.rb:400:in 'process_zipfile_entries'\n    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/roo-2.3.2/lib/roo/excelx.rb:379:in 'process_zipfile'\n    from C:/Ruby193/lib/ruby/gems/1.9.1/gems/roo-2.3.2/lib/roo/excelx.rb:48:in 'initialize'\n    from excel1.rb:5:in 'new'\n    from excel1.rb:5:in '&lt;main&gt;</code></p>\n\n<p>roo version => 2.3.2\nOS => Windows 7</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1459933710, "post_id": 36446019, "comment_id": 60505891, "body": "Why is it down voted?"}], "answers": [{"comments": [{"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1459933423, "post_id": 36446232, "comment_id": 60505679, "body": "yeah but thats not the solution. when I&#39;m not logged in I can call domain/users/edit ...  but that should only be possible after a user is logged in .."}, {"owner": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 1, "creation_date": 1459933522, "post_id": 36446232, "comment_id": 60505746, "body": "Absolutely. Then, in your <code>domains_controller</code> for instance, you would be able to skip this validation by using <code>skip_before_action</code>. I&#39;ll edit my answer to make that clearer."}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1459933673, "post_id": 36446232, "comment_id": 60505863, "body": "and thanks for the hint with device. I knew the gem. But I only need minimal function and I want to do It &quot;by my selve&quot; ;)"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1459933753, "post_id": 36446232, "comment_id": 60505915, "body": "the skip_before_action can I define this globally? so that each controller automatically got this line of code?"}, {"owner": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1459933851, "post_id": 36446232, "comment_id": 60505980, "body": "I&#39;d say so. You could try to put this in the <code>ApplicationController</code>, so that all the subclasses with the <code>index</code> and <code>show</code> actions will not enforce a user to be logged in."}], "tags": [], "owner": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "is_accepted": true, "score": 5, "last_activity_date": 1459933642, "last_edit_date": 1459933642, "creation_date": 1459933187, "answer_id": 36446232, "question_id": 36446019, "link": "https://stackoverflow.com/questions/36446019/rails-user-login-only-garant-access-to-pages/36446232#36446232", "title": "Rails user login, only garant access to pages", "body": "<p>First of all, I wouldn't do this myself when gems like <a href=\"https://github.com/plataformatec/devise\" rel=\"nofollow\">Devise</a> could do that for me in the matter of minutes.</p>\n\n<p>Although, If you really do want to do this yourself, I would do a <code>user_logged_in!</code> method in your <code>ApplicationController</code> that would be called before every action (you can choose which action should be checked with <code>before_action</code>):</p>\n\n<pre><code>class ApplicationController &lt; BaseController\n  before_action :user_logged_in!\n\n  protected\n\n  def user_logged_in!\n    # Logic that checks if the user is actually logged in (check in session, etc).\n\n    # If not logged in, redirect the user to the root page with a flash message.\n  end\nend\n</code></pre>\n\n<p>For the actions/controllers where the user does not need to be authenticated, you can use <code>skip_before_action</code>:</p>\n\n<pre><code>class DomainsController &lt; BaseController\n  skip_before_action :user_logged_in!, only: [:index, :show]\nend\n</code></pre>\n"}], "owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 36446232, "answer_count": 1, "score": -2, "last_activity_date": 1459933642, "creation_date": 1459932582, "question_id": 36446019, "link": "https://stackoverflow.com/questions/36446019/rails-user-login-only-garant-access-to-pages", "title": "Rails user login, only garant access to pages", "body": "<p>I've got a rails application and written a simple login script.</p>\n\n<p>Login checks if the entered password is the same like the hashed one in database.</p>\n\n<p>Then I save the user ID into Session. </p>\n\n<p>Now I want that pages are only vissible or only can be access if a user is loged in .. </p>\n\n<p>How can I do achieve this?</p>\n\n<p>thanks for help</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1459933382, "last_edit_date": 1459933382, "creation_date": 1459931938, "answer_id": 36445787, "question_id": 36445332, "link": "https://stackoverflow.com/questions/36445332/instance-variables-belonging-to-class-object-vs-belonging-to-instances/36445787#36445787", "title": "Instance variables: belonging to class Object vs belonging to instances", "body": "<p>Given the assignment:</p>\n\n<pre><code>class MyClass\n  @@class_variable = 3\n  @class_instance_variable = 1\n  def initialize\n    @instance_variable = 2\n  end\nend\n</code></pre>\n\n<p>the visibility is like this:</p>\n\n<pre><code>class MyClass\n  def my_instance_method\n    @@class_variable         # =&gt; Can refer (`3`)\n    @class_instance_variable # =&gt; Cannot refer (`nil`)\n    @instance_variable       # =&gt; Can refer (`2`)\n  end\n  def self.my_singleton_method\n    @@class_variable         # =&gt; Can refer (`3`)\n    @class_instance_variable # =&gt; Can refer (`1`)\n    @instance_variable       # =&gt; Cannot refer (`nil`)\n  end\n  @@class_variable           # =&gt; Can refer (`3`)\n  @class_instance_variable   # =&gt; Can refer (`1`)\n  @instance_variable         # =&gt; Cannot refer (`nil`)\nend\n\nclass SubClass &lt; MyClass\n  def my_instance_method\n    @@class_variable         # =&gt; Can refer (`3`)\n    @class_instance_variable # =&gt; Cannot refer (`nil`)\n    @instance_variable       # =&gt; Cannot refer (`nil`)\n  end\n  def self.my_singleton_method\n    @@class_variable         # =&gt; Can refer (`3`)\n    @class_instance_variable # =&gt; Cannot refer (`nil`)\n    @instance_variable       # =&gt; Cannot refer (`nil`)\n  end\n  @@class_variable           # =&gt; Can refer (`3`)\n  @class_instance_variable   # =&gt; Cannot refer (`nil`)\n  @instance_variable         # =&gt; Cannot refer (`nil`)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 3, "last_activity_date": 1459931949, "creation_date": 1459931949, "answer_id": 36445792, "question_id": 36445332, "link": "https://stackoverflow.com/questions/36445332/instance-variables-belonging-to-class-object-vs-belonging-to-instances/36445792#36445792", "title": "Instance variables: belonging to class Object vs belonging to instances", "body": "<p>Instance variables belong to instances (aka objects). Each object has its own instance variables.</p>\n\n<p>There are two objects in the code above: <code>instance</code> and <code>MyClass</code>. Each of those objects has its own set of instance variables.</p>\n\n<p><code>MyClass</code> has an instance variable called <code>@one</code>, which is initialized to <code>1</code>.</p>\n\n<p>The first time <code>output</code> is called, <code>instance</code> doesn't have an instance variable called <code>@one</code>, but that's okay: un-initialized and undefined instance variables don't raise exceptions, they simply evaluate to <code>nil</code>. When <code>do_something</code> is called, <code>instance</code>'s instance variable <code>@one</code> is created automatically (instance variables magically spring into existence the first time they are assigned) and initialized to <code>2</code>, so that the second time <code>output</code> is called, it now prints <code>2</code>.</p>\n\n<p><code>MyClass</code>'s instance variable <code>@one</code> is a red herring, it is never accessed in the code above (after line 2 where it is created and initialized, of course).</p>\n\n<p><em>Class Variables</em> are denoted with a double-at <code>@@</code> sigil. They belong to a class (actually, a module) and are shared between all subclasses, all instances, all instances of all subclasses, all sub-subclasses, all instances of all sub-subclasses and so on. They should be rather thought of as a (slightly) restricted form of global variables.</p>\n"}], "owner": {"reputation": 20915, "user_id": 392684, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/DXigI.jpg?s=128&g=1", "display_name": "Enrique Moreno Tent", "link": "https://stackoverflow.com/users/392684/enrique-moreno-tent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1459933382, "creation_date": 1459930711, "last_edit_date": 1459931736, "question_id": 36445332, "link": "https://stackoverflow.com/questions/36445332/instance-variables-belonging-to-class-object-vs-belonging-to-instances", "title": "Instance variables: belonging to class Object vs belonging to instances", "body": "<p>I was looking at <a href=\"https://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Classes#Instance_Variables\" rel=\"nofollow\">some Ruby documentation</a>, and I found the following:</p>\n\n<pre><code>class MyClass\n  @one = 1\n\n  def do_something\n    @one = 2\n  end\n\n  def output\n    puts @one\n  end\nend\n\ninstance = MyClass.new\ninstance.output\ninstance.do_something\ninstance.output\n</code></pre>\n\n<p>Surprisingly, this outputs:</p>\n\n<pre><code>nil\n2\n</code></pre>\n\n<p>The explanation in the documentation was following:</p>\n\n<blockquote>\n  <p>This happens (nil in the first output line) because <strong>@one</strong> defined below <strong>class MyClass</strong> is an instance variable belonging to the class object (note this is not the same as a class variable and could not be referred to as <strong>@@one</strong>), whereas <strong>@one</strong> defined inside the <strong>do_something</strong> method is an instance variable belonging to instances of MyClass. They are two distinct variables and the first is accessible only in a class method.</p>\n</blockquote>\n\n<p>I did not understand this explanation... So far all I got is that there are:</p>\n\n<ol>\n<li>Class variables, similar to static attributes in other languages. This is clear.</li>\n<li>Instance variables <em>belonging to the class object</em></li>\n<li>Instance variables <em>belonging to the instances</em></li>\n</ol>\n\n<p>I dont get point <strong>2</strong> &amp; <strong>3</strong></p>\n\n<p>Point <strong>2</strong> sounds like point <strong>1</strong>, except that is says <em>explicitly</em> it is not. Point <strong>3</strong> sounds like the normal <em>class attribute</em>, except that it can't be defined outside a class method (??)</p>\n\n<p>Can someone help me make sense of this, and maybe add some example so I can see the use of the existence of these 3 types of variables?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 6121852, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/640ccd3be23318551ece60d6178a80e2?s=128&d=identicon&r=PG&f=1", "display_name": "Berry Allen", "link": "https://stackoverflow.com/users/6121852/berry-allen"}, "edited": false, "score": 0, "creation_date": 1459931017, "post_id": 36445298, "comment_id": 60504131, "body": "I edited method to permit(:country_id) but now I get an error saying &quot;Validation failed: Country can&#39;t be blank&quot;"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 21, "user_id": 6121852, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/640ccd3be23318551ece60d6178a80e2?s=128&d=identicon&r=PG&f=1", "display_name": "Berry Allen", "link": "https://stackoverflow.com/users/6121852/berry-allen"}, "edited": false, "score": 0, "creation_date": 1459931118, "post_id": 36445298, "comment_id": 60504195, "body": "@BerryAllen Try changing <code>validates :country, presence: true</code> to <code>validates :country_id, presence: true</code> in proposal model."}, {"owner": {"reputation": 21, "user_id": 6121852, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/640ccd3be23318551ece60d6178a80e2?s=128&d=identicon&r=PG&f=1", "display_name": "Berry Allen", "link": "https://stackoverflow.com/users/6121852/berry-allen"}, "edited": false, "score": 0, "creation_date": 1459931381, "post_id": 36445298, "comment_id": 60504338, "body": "Undefined method for &#39;country_id&#39; for Proposal.  Same after adding column in migration file."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 21, "user_id": 6121852, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/640ccd3be23318551ece60d6178a80e2?s=128&d=identicon&r=PG&f=1", "display_name": "Berry Allen", "link": "https://stackoverflow.com/users/6121852/berry-allen"}, "edited": false, "score": 0, "creation_date": 1459931621, "post_id": 36445298, "comment_id": 60504482, "body": "@BerryAllen Thats not right. Create another migration file to add <code>country_id</code> to <code>proposals</code> and do <code>rake db:migrate</code>."}, {"owner": {"reputation": 21, "user_id": 6121852, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/640ccd3be23318551ece60d6178a80e2?s=128&d=identicon&r=PG&f=1", "display_name": "Berry Allen", "link": "https://stackoverflow.com/users/6121852/berry-allen"}, "edited": false, "score": 0, "creation_date": 1459931978, "post_id": 36445298, "comment_id": 60504703, "body": "All changes + new migration = &quot;Validation failed. Country can&#39;t be blank&quot;"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 21, "user_id": 6121852, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/640ccd3be23318551ece60d6178a80e2?s=128&d=identicon&r=PG&f=1", "display_name": "Berry Allen", "link": "https://stackoverflow.com/users/6121852/berry-allen"}, "edited": false, "score": 0, "creation_date": 1459932070, "post_id": 36445298, "comment_id": 60504770, "body": "@BerryAllen Why you changed it <code>&lt;%= f.collection_select(:country, Country.all.order(&#39;name&#39;), :id, :name) %&gt;</code> revert back to initial i.e, <code>country_id</code> instead of <code>country</code>"}, {"owner": {"reputation": 21, "user_id": 6121852, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/640ccd3be23318551ece60d6178a80e2?s=128&d=identicon&r=PG&f=1", "display_name": "Berry Allen", "link": "https://stackoverflow.com/users/6121852/berry-allen"}, "edited": false, "score": 0, "creation_date": 1459932204, "post_id": 36445298, "comment_id": 60504845, "body": "Okay, thank you so much! It is working now. I think it was because I needed that extra migration to add country_id to Proposal table.  Before, it was saying there was no method for &#39;country_id&#39;"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 21, "user_id": 6121852, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/640ccd3be23318551ece60d6178a80e2?s=128&d=identicon&r=PG&f=1", "display_name": "Berry Allen", "link": "https://stackoverflow.com/users/6121852/berry-allen"}, "edited": false, "score": 0, "creation_date": 1459932238, "post_id": 36445298, "comment_id": 60504869, "body": "@BerryAllen Good. Accept the answer :)"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 1, "last_activity_date": 1459930635, "creation_date": 1459930635, "answer_id": 36445298, "question_id": 36445122, "link": "https://stackoverflow.com/questions/36445122/activerecordassociationtypemismatch-in-controller-rails/36445298#36445298", "title": "ActiveRecord::AssociationTypeMismatch in Controller (rails)", "body": "<p>You should change <code>country</code> to <code>country_id</code> in <code>create</code> method</p>\n\n<pre><code>def create\n  @proposal = Proposal.new(params.require(:proposal).permit(:status, :country_id,\n  :q1, \n  :q2,\n  .\n  .        .\n  :q30))\n  @proposal.save!\n  redirect_to home_path\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 529, "user_id": 694560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/409676c46084830ea7fbfbd7a736318d?s=128&d=identicon&r=PG", "display_name": "Jozef Vaclavik", "link": "https://stackoverflow.com/users/694560/jozef-vaclavik"}, "is_accepted": false, "score": 0, "last_activity_date": 1459930638, "creation_date": 1459930638, "answer_id": 36445299, "question_id": 36445122, "link": "https://stackoverflow.com/questions/36445122/activerecordassociationtypemismatch-in-controller-rails/36445299#36445299", "title": "ActiveRecord::AssociationTypeMismatch in Controller (rails)", "body": "<p>One think that I see is wrong in your example is that you permit :country instead of :country_id that you send from form. Let me know if that helped.</p>\n\n<pre><code>@proposal = Proposal.new(params.require(:proposal).permit(:status, :country_id, ...\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 6121852, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/640ccd3be23318551ece60d6178a80e2?s=128&d=identicon&r=PG&f=1", "display_name": "Berry Allen", "link": "https://stackoverflow.com/users/6121852/berry-allen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1316, "favorite_count": 0, "accepted_answer_id": 36445298, "answer_count": 2, "score": 0, "last_activity_date": 1459931060, "creation_date": 1459930155, "last_edit_date": 1459931060, "question_id": 36445122, "link": "https://stackoverflow.com/questions/36445122/activerecordassociationtypemismatch-in-controller-rails", "title": "ActiveRecord::AssociationTypeMismatch in Controller (rails)", "body": "<p>I try to submit a form for a proposal.  The form consists of choosing a model from a collection of countries and entering in a few text boxes.  However, when I go to select the country, Rails says it is getting a string when it expects a country.</p>\n\n<p>Proposal model: </p>\n\n<pre><code>class Proposal &lt; ActiveRecord::Base\n    belongs_to :my_user, class_name: \"User\", foreign_key: \"user_id\"\n    belongs_to :country, class_name: \"Country\", foreign_key: \"country_id\"\n    after_initialize :set_defaults\n\n    validates :status, presence: true\n    validates :country, presence: true\n    validates :q1, length: {maximum: 250}\n    validates :q2, length: {maximum: 250}\n    .\n    .\n    .\n    validates :q30, length: {maximum: 250}\n\n    def set_defaults\n        self.status = \"Pending\"\n    end\nend\n</code></pre>\n\n<p>Proposal controller:</p>\n\n<pre><code>class ProposalsController &lt; ApplicationController\n  before_action :authenticate_user!, only: [:new, :create]\n\n  def index\n    @proposals = Proposal.all\n  end\n\n  def new\n    @proposal = Proposal.new\n  end\n\n  def create\n    @proposal = Proposal.new(params.require(:proposal).permit(:status, :country,  \n    :q1, \n    :q2,\n    .\n    .\n    .\n    :q30))\n    @proposal.save!\n    redirect_to home_path\n  end\n\n  def display\n    @proposal = Proposal.find(params[:id])\n  end\nend\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>&lt;div class=\"container-fluid text-center\"&gt;\n  &lt;div class=\"row content\"&gt;\n    &lt;div class=\"col-sm-12 text-left\"&gt;\n\n       &lt;%= form_for(@proposal) do |f| %&gt;\n          &lt;%= f.collection_select(:country, Country.all.order('name'), :id, :name) %&gt;\n          &lt;br&gt;&lt;p&gt;&lt;%= f.submit %&gt;&lt;/p&gt;&lt;br&gt;\n       &lt;% end %&gt;\n\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Migration:</p>\n\n<pre><code>class CreateProposals &lt; ActiveRecord::Migration\n  def change\n    create_table :proposals do |t|\n      t.string :status, :default =&gt; \"Pending\"\n      t.integer :country_id\n      t.text :q1 \n      t.text :q2 \n      .\n      .\n      .\n      t.text :q30\n\n      t.timestamps null: false\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1459930224, "post_id": 36445120, "comment_id": 60503676, "body": "Well, it&#39;s not &quot;the same&quot; precisely because of the lower precedence. What is your question, again?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1459930299, "post_id": 36445120, "comment_id": 60503715, "body": "Your code has a hidden problem, can you see it?"}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1459930740, "post_id": 36445120, "comment_id": 60503977, "body": "Anyway, you can check Ruby operators precedence here <a href=\"http://stackoverflow.com/questions/21060234/ruby-operator-precedence-table\" title=\"ruby operator precedence table\">stackoverflow.com/questions/21060234/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 13091, "user_id": 385532, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/082cc70175616a7f63b134a741c5d6e3?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/385532/matt"}, "is_accepted": true, "score": 4, "last_activity_date": 1459932096, "last_edit_date": 1459932096, "creation_date": 1459931219, "answer_id": 36445516, "question_id": 36445120, "link": "https://stackoverflow.com/questions/36445120/and-is-the-same-as-but-why-does-and-have-lower-precedence/36445516#36445516", "title": "`and` is the same as `&amp;&amp;` but why does `and` have lower precedence?", "body": "<p>You're absolutely correct that the humanised operators have lower precedence. There is an excellent (and brief!) article on this <a href=\"http://devblog.avdi.org/2010/08/02/using-and-and-or-in-ruby/\" rel=\"nofollow\">here</a> if you want more information.</p>\n\n<p>Simplest answer (from that article): </p>\n\n<blockquote>\n  <p>Properly understood, <code>and</code> and <code>or</code> are control flow operators, not boolean operators.</p>\n</blockquote>\n"}], "owner": {"reputation": 675, "user_id": 3886157, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/73a22d4ddce0d352c07db9a13c9a2e76?s=128&d=identicon&r=PG", "display_name": "feng ce", "link": "https://stackoverflow.com/users/3886157/feng-ce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 36445516, "answer_count": 1, "score": -1, "last_activity_date": 1459932096, "creation_date": 1459930152, "last_edit_date": 1459931255, "question_id": 36445120, "link": "https://stackoverflow.com/questions/36445120/and-is-the-same-as-but-why-does-and-have-lower-precedence", "title": "`and` is the same as `&amp;&amp;` but why does `and` have lower precedence?", "body": "<p>In ruby, <code>and</code> is the same as <code>&amp;&amp;</code>, but why does <code>and</code> have lower precedence?</p>\n\n<pre><code>false and false || true # =&gt; false\nfalse &amp;&amp; false || true # =&gt; true\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1459927378, "post_id": 36443437, "comment_id": 60501930, "body": "Despite the name, RubyMonk exercises seem to cause more confusion than clarity."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1459927690, "post_id": 36443437, "comment_id": 60502122, "body": "i don&#39;t know whyyyyyyyyy nobody told me."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1459927898, "post_id": 36443437, "comment_id": 60502258, "body": "Just replace that line with <code>ClassMethods.new.guitar</code>. It will print &quot;hehe&quot; on one line followed by &quot;gently weeps&quot; on the next line."}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 1, "last_activity_date": 1459927009, "creation_date": 1459927009, "answer_id": 36444042, "question_id": 36443437, "link": "https://stackoverflow.com/questions/36443437/call-method-from-an-included-class-when-a-method-with-same-name-is-defined-in-th/36444042#36444042", "title": "call method from an included class when a method with same name is defined in the class", "body": "<p>That kind of structure is usually used to both, <em>include</em> and <em>extend</em> a Module with a single call to <code>include</code>. It works by setting up an <a href=\"http://ruby-doc.org/core-2.3.0/Module.html#method-i-included\" rel=\"nofollow\"><code>included</code></a> callback that invokes the <a href=\"http://ruby-doc.org/core-2.3.0/Object.html#method-i-extend\" rel=\"nofollow\"><code>extend</code></a> call:</p>\n\n<pre><code>module Foo\n  def self.included(mod)\n    mod.extend(ClassMethods)\n  end\n\n  module ClassMethods\n    def guitar\n      \"gently weeps\"\n    end\n  end\nend\n\nclass Bar\n  include Foo\n\n  def self.guitar\n    puts \"hehe\"\n    super\n  end\nend\n\nputs Bar.guitar\n#=&gt; hehe\n#=&gt; gently weeps\n</code></pre>\n\n<p>The above is equivalent to:</p>\n\n<pre><code>module Foo\n  module ClassMethods\n    def guitar\n      \"gently weeps\"\n    end\n  end\nend\n\nclass Bar\n  include Foo\n  extend Foo::ClassMethods\n\n  def self.guitar\n    puts \"hehe\"\n    super\n  end\nend\n</code></pre>\n\n<p>Of course, <code>include Foo</code> only makes sense if there are instance methods (or constants / module variables). In your example, you only need <code>extend</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user2851669"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 36444042, "answer_count": 1, "score": 0, "last_activity_date": 1459927009, "creation_date": 1459925036, "question_id": 36443437, "link": "https://stackoverflow.com/questions/36443437/call-method-from-an-included-class-when-a-method-with-same-name-is-defined-in-th", "title": "call method from an included class when a method with same name is defined in the class", "body": "<p>I have the following code - (from rubymonks)</p>\n\n<pre><code>module Foo\n  class ClassMethods\n    def guitar\n      \"gently weeps\"\n    end\n  end\nend\n\nclass Bar\n  include Foo\n  def self.guitar\n    puts \"hehe\"\n    #call guitar function from ClassMethods\n  end\nend\n\nputs Bar.guitar\n</code></pre>\n\n<p>Here, how do I call the guitar function from ClassMethods. ClassMethods is not a super class, so can't use super keyword.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2093, "user_id": 1747295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70b9d5ee5e89974383b7cf856e1dea8?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yawar Ali", "link": "https://stackoverflow.com/users/1747295/muhammad-yawar-ali"}, "edited": false, "score": 1, "creation_date": 1459924123, "post_id": 36443120, "comment_id": 60500049, "body": "I don&#39;t think to_s entertain any args."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1459927294, "post_id": 36443120, "comment_id": 60501872, "body": "What is that code supposed to do?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 2093, "user_id": 1747295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70b9d5ee5e89974383b7cf856e1dea8?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yawar Ali", "link": "https://stackoverflow.com/users/1747295/muhammad-yawar-ali"}, "edited": false, "score": 1, "creation_date": 1459932442, "post_id": 36443120, "comment_id": 60505007, "body": "@MuhammadYawarAli: <code>Integer#to_s</code> (or more precisely, the pair of <a href=\"http://ruby-doc.org/core/Bignum.html#method-i-to_s\" rel=\"nofollow noreferrer\"><code>Bignum#to_s</code></a> and <a href=\"http://ruby-doc.org/core/Fixnum.html#method-i-to_s\" rel=\"nofollow noreferrer\"><code>Fixnum#to_s</code></a>) accepts an optional <code>base</code> argument that tells it in which base you want to print the number. The default value is <code>10</code>."}, {"owner": {"reputation": 19, "user_id": 6164388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5694f001678561ccf94375a8665d8f2?s=128&d=identicon&r=PG&f=1", "display_name": "idkwhatamidoing", "link": "https://stackoverflow.com/users/6164388/idkwhatamidoing"}, "edited": false, "score": 0, "creation_date": 1459934895, "post_id": 36443120, "comment_id": 60506819, "body": "Thanks to everyone who tried to help me. What I don&#39;t understand was the input the I get for n is a number, and n2 is basically n. So the type should be a fixnum no? If it is a fixnum why isn&#39;t the to.s working when it works for things like 5.to_s(2) ?"}, {"owner": {"reputation": 19, "user_id": 6164388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5694f001678561ccf94375a8665d8f2?s=128&d=identicon&r=PG&f=1", "display_name": "idkwhatamidoing", "link": "https://stackoverflow.com/users/6164388/idkwhatamidoing"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1459935887, "post_id": 36443120, "comment_id": 60507559, "body": "@sawa Was away just now but I&#39;ve edited the question a bit... The program is supposed to calculate who is the final winner. It starts off with a number (very huge), minus number by the next largest power of 2 if the number is not a power of 2. Else, reduce it by half."}], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1459932387, "post_id": 36443257, "comment_id": 60504955, "body": "<code>Integer#to_s</code> (or more precisely, the pair of <a href=\"http://ruby-doc.org/core/Bignum.html#method-i-to_s\" rel=\"nofollow noreferrer\"><code>Bignum#to_s</code></a> and <a href=\"http://ruby-doc.org/core/Fixnum.html#method-i-to_s\" rel=\"nofollow noreferrer\"><code>Fixnum#to_s</code></a>) accepts an optional <code>base</code> argument that tells it in which base you want to print the number. The default value is <code>10</code>."}, {"owner": {"reputation": 19, "user_id": 6164388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5694f001678561ccf94375a8665d8f2?s=128&d=identicon&r=PG&f=1", "display_name": "idkwhatamidoing", "link": "https://stackoverflow.com/users/6164388/idkwhatamidoing"}, "edited": false, "score": 0, "creation_date": 1459934995, "post_id": 36443257, "comment_id": 60506886, "body": "But if I change it to (n2=n).to_s how will the program know I want to change it to base 2?"}], "tags": [], "owner": {"reputation": 515, "user_id": 3021717, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000281462435/picture?type=large", "display_name": "Sukanta", "link": "https://stackoverflow.com/users/3021717/sukanta"}, "is_accepted": false, "score": -1, "last_activity_date": 1459924378, "creation_date": 1459924378, "answer_id": 36443257, "question_id": 36443120, "link": "https://stackoverflow.com/questions/36443120/ruby-to-s-conversion-to-binary-argument-error/36443257#36443257", "title": "Ruby to_s conversion to binary argument error", "body": "<p>Argument error is coming because you are trying to pass parameter to <strong>to_s</strong> method because to_s method never accept any arguments.</p>\n\n<p>So you should change (n2=n).to_s(2) to</p>\n\n<pre><code>(n2=n).to_s\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 19, "user_id": 6164388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5694f001678561ccf94375a8665d8f2?s=128&d=identicon&r=PG&f=1", "display_name": "idkwhatamidoing", "link": "https://stackoverflow.com/users/6164388/idkwhatamidoing"}, "edited": false, "score": 0, "creation_date": 1459936005, "post_id": 36444524, "comment_id": 60507660, "body": "@idkwhatamidoing: <code>gets</code> is short for &quot;get string&quot;. What did you think it would return? :)"}, {"owner": {"reputation": 19, "user_id": 6164388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5694f001678561ccf94375a8665d8f2?s=128&d=identicon&r=PG&f=1", "display_name": "idkwhatamidoing", "link": "https://stackoverflow.com/users/6164388/idkwhatamidoing"}, "edited": false, "score": 0, "creation_date": 1459936110, "post_id": 36444524, "comment_id": 60507743, "body": "So <code>gets</code> actually takes input as strings? Thanks, this is really helpful! Also, isn&#39;t <code>count()</code> a predefined method? I&#39;m getting an <code>undefined method</code> error for the <code>count()</code>."}, {"owner": {"reputation": 19, "user_id": 6164388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5694f001678561ccf94375a8665d8f2?s=128&d=identicon&r=PG&f=1", "display_name": "idkwhatamidoing", "link": "https://stackoverflow.com/users/6164388/idkwhatamidoing"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1459936291, "post_id": 36444524, "comment_id": 60507872, "body": "@SergioTulentsev Whoops yeah, didn&#39;t think of it. Is there no way to get an input as integer directly? Sorry I&#39;m too used to language with strong types."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 19, "user_id": 6164388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5694f001678561ccf94375a8665d8f2?s=128&d=identicon&r=PG&f=1", "display_name": "idkwhatamidoing", "link": "https://stackoverflow.com/users/6164388/idkwhatamidoing"}, "edited": false, "score": 0, "creation_date": 1459936513, "post_id": 36444524, "comment_id": 60508057, "body": "@idkwhatamidoing: no language with strong types will get you an integer &quot;directly&quot;. Console input is text by nature. All you can do is interpret the string when you get it (parse as integer or whatever)"}], "tags": [], "owner": {"reputation": 1739, "user_id": 2863439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7c95bb944bbbe597543ae8a88987995?s=128&d=identicon&r=PG&f=1", "display_name": "limekin", "link": "https://stackoverflow.com/users/2863439/limekin"}, "is_accepted": true, "score": 0, "last_activity_date": 1459928462, "creation_date": 1459928462, "answer_id": 36444524, "question_id": 36443120, "link": "https://stackoverflow.com/questions/36443120/ruby-to-s-conversion-to-binary-argument-error/36444524#36444524", "title": "Ruby to_s conversion to binary argument error", "body": "<p>I think you are trying to convert a number in Ruby to a string with it's binary representation. This is possible with (if the number is actually a number in Ruby, e.g. Fixnum) :</p>\n\n<pre><code>4.to_s 2\n# =&gt; \"100\"\n</code></pre>\n\n<p>But in your case, what you are getting after calling <code>gets</code> is a string, and the <code>to_s</code> method of the String class simply returns itself, and doesn't take any arguments, hence the error.</p>\n\n<p>You can fix it by calling <code>gets.to_i</code> instead of just <code>gets</code>, so the read string of contents will be converted to an integer in Ruby (you should be sure that you will only be reading numbers at there). </p>\n\n<p>And I believe you are trying to assign the binary representation (as a string) of <code>n</code> into the variable <code>n2</code>, for that you should be doing </p>\n\n<pre><code>n2 = n.to_s(2)\n</code></pre>\n\n<p>If you just do :</p>\n\n<pre><code>(n2=n).to_s\n</code></pre>\n\n<p>Because of the parenthesis, first <code>n2</code> will be assigned the value of <code>n</code>, then <code>to_s</code> will be called on <code>n2</code>, the string version of <code>n2</code> will be returned, and nothing else happens. First thing you should be doing is the conversion, then the assignment.</p>\n\n<p>And also you should pass in a string while calling String#count, i.e. you should call <code>n2.count('2')</code> instead of <code>n2.count(2)</code>.</p>\n"}], "owner": {"reputation": 19, "user_id": 6164388, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5694f001678561ccf94375a8665d8f2?s=128&d=identicon&r=PG&f=1", "display_name": "idkwhatamidoing", "link": "https://stackoverflow.com/users/6164388/idkwhatamidoing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "accepted_answer_id": 36444524, "answer_count": 2, "score": 0, "last_activity_date": 1459935660, "creation_date": 1459923887, "last_edit_date": 1459935660, "question_id": 36443120, "link": "https://stackoverflow.com/questions/36443120/ruby-to-s-conversion-to-binary-argument-error", "title": "Ruby to_s conversion to binary argument error", "body": "<p>I was trying to solve a HackerRank problem which requires binary manipulation. The test cases are extremely huge numbers so I thought better to manipulate them as strings.</p>\n\n<pre><code>t=gets\ndef winner(pturn)\n  if a%2==0 \n    puts \"Richard\\n\"\n  else \n    puts \"Louise\\n\"\n  end\nend            \n\nwhile t != 0\n    turn=1\n    n=gets\n    (n2=n).to_s(2)\n    while n!=1\n        one=\"1\"\n        zero=\"0\"\n        if n2.count(1)&gt;1\n            zero*=(n2.length - 2)\n            one.concat(zero)\n            n-=one.to_i(base=2)\n        else\n            n/=2\n        end\n     turn+=1\n     end \nwinner(turn)\nt-=1\nend\n</code></pre>\n\n<p>It caused an argument error (wrong number of argument) in line as seen below. </p>\n\n<pre><code>(n2=n).to_s(2)\n</code></pre>\n\n<p>I think I'm using <code>to_s</code> wrongly. I can't see the mistake and need someone to point it out.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2093, "user_id": 1747295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70b9d5ee5e89974383b7cf856e1dea8?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yawar Ali", "link": "https://stackoverflow.com/users/1747295/muhammad-yawar-ali"}, "edited": false, "score": 0, "creation_date": 1459924233, "post_id": 36443075, "comment_id": 60500092, "body": "Maybe <code>@products</code> is empty or nil try <code>Product.where(&quot;city ILIKE ANY ( array[?] )&quot;, cities_array) --&gt; []</code> it should return products if matched any."}, {"owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "reply_to_user": {"reputation": 2093, "user_id": 1747295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70b9d5ee5e89974383b7cf856e1dea8?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yawar Ali", "link": "https://stackoverflow.com/users/1747295/muhammad-yawar-ali"}, "edited": false, "score": 0, "creation_date": 1459924332, "post_id": 36443075, "comment_id": 60500154, "body": "@MuhammadYawarAli why use Product.where?"}, {"owner": {"reputation": 2093, "user_id": 1747295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70b9d5ee5e89974383b7cf856e1dea8?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yawar Ali", "link": "https://stackoverflow.com/users/1747295/muhammad-yawar-ali"}, "edited": false, "score": 0, "creation_date": 1459925643, "post_id": 36443075, "comment_id": 60500924, "body": "It will search in whole table."}, {"owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "edited": false, "score": 0, "creation_date": 1459925657, "post_id": 36443075, "comment_id": 60500933, "body": "could you post the <code>schema</code> for <b>Creference</b> and <b>Product</b> model?"}, {"owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "reply_to_user": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "edited": false, "score": 0, "creation_date": 1459926019, "post_id": 36443075, "comment_id": 60501116, "body": "@Emu, check the schema updates"}], "answers": [{"comments": [{"owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "edited": false, "score": 0, "creation_date": 1459926288, "post_id": 36443469, "comment_id": 60501274, "body": "This is the query i get <code>SELECT &quot;products&quot;.* FROM &quot;products&quot; INNER JOIN &quot;users&quot; ON &quot;users&quot;.&quot;id&quot; = &quot;products&quot;.&quot;user_id&quot; WHERE &quot;products&quot;.&quot;step&quot; = 5 AND &quot;products&quot;.&quot;status&quot; = 1 AND (&quot;users&quot;.&quot;merchant_status&quot; = 1 OR &quot;users&quot;.&quot;merchant_status&quot; = 0 AND &quot;products&quot;.&quot;verification&quot; = 1) AND (city ILIKE ANY ( array[&#39;%[&quot;Kuching&quot;, &quot;Kota Kinabalu&quot;]%&#39;] ))</code>"}, {"owner": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "reply_to_user": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "edited": false, "score": 0, "creation_date": 1459926533, "post_id": 36443469, "comment_id": 60501419, "body": "Is the last part valid SQL? I don&#39;t know which DBMS you use, but it looks weird to me. You can take this SQL statement and launch it on your dbms command line, so that you can see if you have a SQL or a Rails problem."}, {"owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "edited": false, "score": 0, "creation_date": 1459926669, "post_id": 36443469, "comment_id": 60501496, "body": "I am using postgres. And yet, it doesnt return anything"}, {"owner": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "reply_to_user": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "edited": false, "score": 0, "creation_date": 1459926714, "post_id": 36443469, "comment_id": 60501517, "body": "Then go to your <code>psql</code> CLI and try to launch the query above."}, {"owner": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "reply_to_user": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "edited": false, "score": 0, "creation_date": 1459926913, "post_id": 36443469, "comment_id": 60501642, "body": "Which is good, you have a valid SQL query. It just does not do what you want...Try to refactor your AR query to make it do what you need (maybe check Emu&#39;s answer below)."}], "tags": [], "owner": {"reputation": 1627, "user_id": 1620195, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95da3726b38bcfcd8c5ec060a47fbb67?s=128&d=identicon&r=PG", "display_name": "born4new", "link": "https://stackoverflow.com/users/1620195/born4new"}, "is_accepted": false, "score": 0, "last_activity_date": 1459925138, "creation_date": 1459925138, "answer_id": 36443469, "question_id": 36443075, "link": "https://stackoverflow.com/questions/36443075/ruby-on-rails-array-not-returning-results/36443469#36443469", "title": "Ruby on Rails array not returning results", "body": "<p>First, check the value of <code>cities_array</code> to see what is returns.</p>\n\n<p>Second, try to append <code>to_sql</code> at the end of the statement and to print it to see what the sql looks like:</p>\n\n<pre><code>puts @products.where(\"city ILIKE ANY ( array[?] )\", cities_array).to_sql\n</code></pre>\n\n<p>Last but not least, <code>Product.count</code> to see that you actually have products in your table :).</p>\n"}, {"tags": [], "owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "is_accepted": true, "score": 2, "last_activity_date": 1459926782, "creation_date": 1459926782, "answer_id": 36443976, "question_id": 36443075, "link": "https://stackoverflow.com/questions/36443075/ruby-on-rails-array-not-returning-results/36443976#36443976", "title": "Ruby on Rails array not returning results", "body": "<p>You can do something like that:</p>\n\n<pre><code>@cref = Creference.where(\"lower(name) LIKE ?\", \"#{@city.downcase}\")\n\n  if @cref.present?\n    cities_array = @cref.collect {|con| con.countries }.flatten \n    #cities_array will return --&gt; [\"Kuching\", \"Kota Kinabalu\"]\n    @products.where(\"city IN (?)\", cities_array) \n    # the IN query will find the city names that are in the cities_array\n    # but in that case your product tables city name should be in lowercase\n    # as you are fetching lowercase city names from Creference\nend\n</code></pre>\n\n<p><strong>N.B.</strong> I've not tested the code above. But it should work. :)</p>\n"}], "owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 36443976, "answer_count": 2, "score": 0, "last_activity_date": 1459926782, "creation_date": 1459923730, "last_edit_date": 1459926003, "question_id": 36443075, "link": "https://stackoverflow.com/questions/36443075/ruby-on-rails-array-not-returning-results", "title": "Ruby on Rails array not returning results", "body": "<p>Following were my query in controller:</p>\n\n<pre><code>@cref = Creference.where(\"lower(name) LIKE ?\", \"#{@city.downcase}\")\n\n  if @cref.present?\n    cities_array = @cref.map {|con| \"%#{con.countries}%\" } \n    #cities_array return --&gt; [\"%[\"Kuching\", \"Kota Kinabalu\"]%\"]\n    @products.where(\"city ILIKE ANY ( array[?] )\", cities_array) --&gt; []\nend\n</code></pre>\n\n<p>The <code>product</code> doesn't return any result despite there is city with above name in Product table. Thanks!!</p>\n\n<p>SCHEMA</p>\n\n<p>product:</p>\n\n<pre><code>create_table \"products\", force: :cascade do |t|\n    t.integer  \"user_id\"\n    t.string   \"name\"\n    t.integer  \"payment_type\",        limit: 2\n    t.datetime \"created_at\",                    precision: 6,             null: false\n    t.datetime \"updated_at\",                    precision: 6,             null: false\n    t.integer  \"product_category_id\"\n    t.integer  \"location_id\"\n    t.text     \"description\"\n    t.text     \"highlight\"\n    t.integer  \"price_cents\"\n    t.integer  \"zip\"\n    t.string   \"country\"\n    t.string   \"state\"\n    t.string   \"city\"\n    t.string   \"address\"\n    t.string   \"apt\"\n    t.integer  \"refund_day\"\n    t.string   \"currency\"\n    t.integer  \"refund_percent\"\n    t.integer  \"refundable\",          limit: 2,               default: 0\n    t.integer  \"step\",                limit: 2,               default: 0\n    t.integer  \"discount\",                                    default: 0\n    t.string   \"slug\"\n    t.integer  \"status\",              limit: 2,               default: 1\n    t.integer  \"verification\",        limit: 2,               default: 0\n  end\n</code></pre>\n\n<p>creference:</p>\n\n<pre><code>  create_table \"creferences\", force: :cascade do |t|\n    t.string   \"name\"\n    t.string   \"countries\",  default: [],              array: true\n    t.datetime \"created_at\",              null: false\n    t.datetime \"updated_at\",              null: false\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 233, "user_id": 5890013, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Vd4YG.jpg?s=128&g=1", "display_name": "DustinRW", "link": "https://stackoverflow.com/users/5890013/dustinrw"}, "is_accepted": true, "score": 0, "last_activity_date": 1460136647, "creation_date": 1460136647, "answer_id": 36505856, "question_id": 36442281, "link": "https://stackoverflow.com/questions/36442281/checkerboard-challenge/36505856#36505856", "title": "Checkerboard challenge", "body": "<p>Figured out my own problem and solution is commented in code below</p>\n\n<pre><code>def checkered_board(dimension)\n\n  return false unless dimension.is_a?(Integer) &amp;&amp; dimension &gt;= 2 \n\n\n  checkboard = nil\n  checker_array = []\n  spacer = \" \"\n  count = dimension\n\n\n\n    while dimension % 2 == 0 &amp;&amp; count &gt; 0 # set-up for even number passed in\n        if count % 2 == 0\n            checkboard = (\"\\u25A1#{spacer}\\u25A0#{spacer}\") * (dimension / 2)\n            checkboard = checkboard[0..-2] + \"\\n\" #solution was here\n            checker_array &lt;&lt; checkboard\n            count -= 1\n        else\n            checkboard = (\"\\u25A0#{spacer}\\u25A1#{spacer}\") * (dimension / 2)\n            if count == 1 #if count is the last number before 0, do not add \\n to pass spec\n                checker_array &lt;&lt; checkboard[0..-2] #solution was here\n            else\n                checkboard = checkboard[0..-2] + \"\\n\" #solution was here\n                checker_array &lt;&lt; checkboard\n            end\n            count -= 1\n        end\n\n    end \n\n    while dimension % 2 == 1 &amp;&amp; count &gt; 0 # set-up for odd number passed in\n\n        if count % 2 == 1  \n            checkboard = (\"\\u25A0#{spacer}\\u25A1#{spacer}\") * (dimension / 2)\n            checkboard += \"\\u25A0\"\n            if count == 1 #if count is the last number before 0, do not add \\n to pass spec\n               checker_array &lt;&lt; checkboard[0..-1] #solution was here\n            else\n               checkboard += \"\\n\"\n               checker_array &lt;&lt; checkboard\n            end\n            count -= 1\n        else\n            checkboard = (\"\\u25A1#{spacer}\\u25A0#{spacer}\") * (dimension / 2)\n            checkboard += \"\\u25A1\"\n            checkboard = checkboard[0..-1] + \"\\n\" #solution was here\n            checker_array &lt;&lt; checkboard\n            count -= 1\n        end\n    end\n\ncheckboard = checker_array.join(\"\")\ncheckboard\n\n\nend\n</code></pre>\n"}], "owner": {"reputation": 233, "user_id": 5890013, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Vd4YG.jpg?s=128&g=1", "display_name": "DustinRW", "link": "https://stackoverflow.com/users/5890013/dustinrw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 36505856, "answer_count": 1, "score": 0, "last_activity_date": 1460136647, "creation_date": 1459920565, "last_edit_date": 1460056114, "question_id": 36442281, "link": "https://stackoverflow.com/questions/36442281/checkerboard-challenge", "title": "Checkerboard challenge", "body": "<p>I'm close to solving this challenge, however, I cannot figure out how to refactor my code to get the following spec to pass.</p>\n\n<p><strong>Spec to pass:</strong></p>\n\n<pre><code>Test.assert_equals(checkered_board(2), \"\\u25A1 \\u25A0\\n\\u25A0 \\u25A1\")\n</code></pre>\n\n<p><strong>My error:</strong></p>\n\n<p><code>Expected: \"\\u25A1 \\u25A0\\n\\u25A0 \\u25A1\", instead got: \"\\u25A1 \\u25A0 \\n\\u25A0 \\u25A1 \"\n</code></p>\n\n<p><strong>My attempt</strong> (via visual on repl.it, everything appears correct)</p>\n\n<pre><code>def checkered_board(dimension)\n\n  return false unless dimension.integer? &amp;&amp; dimension &gt;= 2 \n\n\n  checkboard = nil\n  checker_array = []\n  count = dimension\n\n\n\n    while dimension % 2 == 0 &amp;&amp; count &gt; 0 # set-up for even number passed in\n        if count % 2 == 0\n            checkboard = (\"\\u25A1 \\u25A0 \") * (dimension / 2)\n            checkboard += \"\\n\"\n            checker_array &lt;&lt; checkboard\n            count -= 1\n        else\n            checkboard = (\"\\u25A0 \\u25A1 \") * (dimension / 2)\n            if count == 1 #if count is the last number before 0, do not add \\n to pass spec\n               checker_array &lt;&lt; checkboard\n            else\n               checkboard += \"\\n\"\n               checker_array &lt;&lt; checkboard\n            end\n            count -= 1\n        end\n\n    end \n\n    while dimension % 2 == 1 &amp;&amp; count &gt; 0 # set-up for odd number passed in\n\n        if count % 2 == 1  \n            checkboard = (\"\\u25A0 \\u25A1 \") * (dimension / 2)\n            checkboard += \"\\u25A0\"\n            if count == 1 #if count is the last number before 0, do not add \\n to pass spec\n               checker_array &lt;&lt; checkboard\n            else\n               checkboard += \"\\n\"\n               checker_array &lt;&lt; checkboard\n            end\n            count -= 1\n        else\n            checkboard = (\"\\u25A1 \\u25A0 \") * (dimension / 2)\n            checkboard += \"\\u25A1\"\n            checkboard += \"\\n\"\n            checker_array &lt;&lt; checkboard\n            count -= 1\n        end\n    end\n\ncheckboard = checker_array.join(\"\")\ncheckboard\n\n\nend\n</code></pre>\n\n<p>What should I add/do to pass how the <code>\\n</code> is within the required passing spec?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1459920761, "post_id": 36442277, "comment_id": 60498489, "body": "It doesn&#39;t check for the existence of the class method. It <i>calls</i> the <code>workflow_spec</code> method on the singleton class and, if its return value is truthy, calls it again and returns the value returned by it."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 2, "creation_date": 1459920780, "post_id": 36442277, "comment_id": 60498499, "body": "I can&#39;t see how <code>if workflow_spec</code> is equivalent of <code>if self.class.methods.include? workflow_spec</code>. Wouldn&#39;t this actually <i>invoke</i> the method twice? (i.e. <code>return self.class.workflow_spec() if self.class.workflow.spec()</code>)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1459920874, "post_id": 36442277, "comment_id": 60498546, "body": "@Jordan, Amadan indeed, I need another cup of coffee. Shame on me, fixed."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1459920902, "post_id": 36442277, "comment_id": 60498566, "body": "@Amadan Replace <code>self.class</code> with <code>self.singleton_class</code> and you&#39;re exactly right."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1459920977, "post_id": 36442277, "comment_id": 60498605, "body": "@Jordan: Right, thanks, I was just copy-pasting blindly."}, {"owner": {"reputation": 7710, "user_id": 938363, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/23d75d7db4d98e9004cc9988c4b3a67f?s=128&d=identicon&r=PG", "display_name": "user938363", "link": "https://stackoverflow.com/users/938363/user938363"}, "edited": false, "score": 0, "creation_date": 1459965143, "post_id": 36442277, "comment_id": 60529543, "body": "Here <code>self</code> in ` class &lt;&lt; self` is an instance of a model which has <code>workflow</code> and <code>return workflow_spec if workflow_spec</code> returns the <code>workflow_spec</code> for the model instance  (<code>workflow_spec</code> is a singleton method?) ? thanks for all the comments."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1459920992, "last_edit_date": 1459920992, "creation_date": 1459920554, "answer_id": 36442277, "question_id": 36442207, "link": "https://stackoverflow.com/questions/36442207/a-class-method-inside-another-method/36442277#36442277", "title": "A class method inside another method?", "body": "<p>Nothing is <em>defined</em> in the example above. There is a call to <em>class method</em> <code>workflow_spec</code> and subsequent call to it, if it returned <code>truthy</code>.</p>\n\n<p>Furthermore; this behaviour <em>described in the comment</em> inside the snipped you\u2019ve posted.</p>\n\n<p>The code</p>\n\n<pre><code>  class &lt;&lt; self\n    return workflow_spec if workflow_spec\n  end\n</code></pre>\n\n<p>is [almost] an equivalent of:</p>\n\n<pre><code>  return self.class.workflow_spec if self.class.workflow_spec\n</code></pre>\n\n<p>The difference between the code in <code>workflow</code> and the code above is that <code>workflow</code> gem calls an <a href=\"http://www.integralist.co.uk/posts/eigenclass.html\" rel=\"nofollow\">eigenclass</a>, not a common class.</p>\n\n<p>The exact equivalent would be:</p>\n\n<pre><code>eigenclass = class &lt;&lt; self; self; end\nreturn eigenclass.workflow_spec if eigenclass.workflow_spec\n</code></pre>\n\n<p>or (credits to @Jordan):</p>\n\n<pre><code>return singleton_class.workflow_spec if singleton_class.workflow_spec\n</code></pre>\n"}], "owner": {"reputation": 7710, "user_id": 938363, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/23d75d7db4d98e9004cc9988c4b3a67f?s=128&d=identicon&r=PG", "display_name": "user938363", "link": "https://stackoverflow.com/users/938363/user938363"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 1, "accepted_answer_id": 36442277, "answer_count": 1, "score": 2, "last_activity_date": 1459921105, "creation_date": 1459920228, "question_id": 36442207, "link": "https://stackoverflow.com/questions/36442207/a-class-method-inside-another-method", "title": "A class method inside another method?", "body": "<p>Here is a method definition inside a <code>workflow</code> gem. </p>\n\n<pre><code>   def spec\n      # check the singleton class first\n      class &lt;&lt; self\n        return workflow_spec if workflow_spec\n      end\n\n      c = self.class\n      # using a simple loop instead of class_inheritable_accessor to avoid\n      # dependency on Rails' ActiveSupport\n      until c.workflow_spec || !(c.include? Workflow)\n        c = c.superclass\n      end\n      c.workflow_spec\n    end\n</code></pre>\n\n<p>Is </p>\n\n<pre><code>      class &lt;&lt; self\n        return workflow_spec if workflow_spec\n      end\n</code></pre>\n\n<p>equivalent to (a class method):</p>\n\n<pre><code>     class &lt;&lt; self\n       def workflow_spec\n         return workflow_spec if workflow_spec\n       end\n     end\n</code></pre>\n\n<p>? If <code>workflow_spec</code> is a class method, then what's the purpose to define it inside a <code>method</code>? Is <code>workflow_spec</code> referred as <code>self.spec.workflow_spec</code>? Or just <code>self.workflow_spec</code>. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "session", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 167, "user_id": 2549588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qbr0R.jpg?s=128&g=1", "display_name": "Donald Chiang", "link": "https://stackoverflow.com/users/2549588/donald-chiang"}, "reply_to_user": {"reputation": 3543, "user_id": 2231236, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ZyG2H.jpg?s=128&g=1", "display_name": "Nithin", "link": "https://stackoverflow.com/users/2231236/nithin"}, "edited": false, "score": 0, "creation_date": 1459920101, "post_id": 36441828, "comment_id": 60498246, "body": "Can session store a Cart object? I want to let both <code>session[:cart].clean</code> and <code>@cart.clean</code> works, thanks."}, {"owner": {"reputation": 760, "user_id": 1893784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b6b06692d59846baa2471771d3211f5?s=128&d=identicon&r=PG", "display_name": "Shishir", "link": "https://stackoverflow.com/users/1893784/shishir"}, "edited": false, "score": 1, "creation_date": 1459920841, "post_id": 36441828, "comment_id": 60498529, "body": "Storing object in session is not a good idea see <a href=\"http://stackoverflow.com/questions/1095714/storing-objects-in-a-session-in-rails\" title=\"storing objects in a session in rails\">stackoverflow.com/questions/1095714/&hellip;</a>. This thread discusses the pitfalls of it.  If you insist on storing object in session, you would have to reconstruct it by passing params to Cart.new(session[:cart]) or something similar, since session serializes object and stores it.  Hope this helps."}, {"owner": {"reputation": 167, "user_id": 2549588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qbr0R.jpg?s=128&g=1", "display_name": "Donald Chiang", "link": "https://stackoverflow.com/users/2549588/donald-chiang"}, "reply_to_user": {"reputation": 760, "user_id": 1893784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b6b06692d59846baa2471771d3211f5?s=128&d=identicon&r=PG", "display_name": "Shishir", "link": "https://stackoverflow.com/users/1893784/shishir"}, "edited": false, "score": 0, "creation_date": 1459922407, "post_id": 36441828, "comment_id": 60499217, "body": "@Shishir Thanks for help, I don&#39;t want to store cart items to the database, so I put the cart object to session and the cart object is a small array to store product id and quantity. I don&#39;t understand why I refresh the page I get the different output of session. Please see EDIT 2, thanks."}, {"owner": {"reputation": 760, "user_id": 1893784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b6b06692d59846baa2471771d3211f5?s=128&d=identicon&r=PG", "display_name": "Shishir", "link": "https://stackoverflow.com/users/1893784/shishir"}, "edited": false, "score": 1, "creation_date": 1459922947, "post_id": 36441828, "comment_id": 60499454, "body": "The first render, its on server side, they still ruby objects. On refresh, session is taken from the client side and deserialized. see this <a href=\"http://stackoverflow.com/questions/3804209/what-are-sessions-how-do-they-work\" title=\"what are sessions how do they work\">stackoverflow.com/questions/3804209/&hellip;</a> for more information."}, {"owner": {"reputation": 167, "user_id": 2549588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qbr0R.jpg?s=128&g=1", "display_name": "Donald Chiang", "link": "https://stackoverflow.com/users/2549588/donald-chiang"}, "reply_to_user": {"reputation": 760, "user_id": 1893784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b6b06692d59846baa2471771d3211f5?s=128&d=identicon&r=PG", "display_name": "Shishir", "link": "https://stackoverflow.com/users/1893784/shishir"}, "edited": false, "score": 0, "creation_date": 1459924645, "post_id": 36441828, "comment_id": 60500361, "body": "@Shishir Thank you very much! I totally understand. So how can I store a Cart object without a database table?"}, {"owner": {"reputation": 760, "user_id": 1893784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b6b06692d59846baa2471771d3211f5?s=128&d=identicon&r=PG", "display_name": "Shishir", "link": "https://stackoverflow.com/users/1893784/shishir"}, "edited": false, "score": 0, "creation_date": 1459925701, "post_id": 36441828, "comment_id": 60500957, "body": "Added an answer. was not able to include code here"}], "answers": [{"tags": [], "owner": {"reputation": 760, "user_id": 1893784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b6b06692d59846baa2471771d3211f5?s=128&d=identicon&r=PG", "display_name": "Shishir", "link": "https://stackoverflow.com/users/1893784/shishir"}, "is_accepted": true, "score": 3, "last_activity_date": 1459925666, "creation_date": 1459925666, "answer_id": 36443618, "question_id": 36441828, "link": "https://stackoverflow.com/questions/36441828/rails-session-store-model-object/36443618#36443618", "title": "Rails session store model object", "body": "<p>Always use cart object. initialize it from session, do operations and in the end serialize it back to session.</p>\n\n<pre><code>    class Cart\n      def initialize(params={})\n        @items = params[:items] || []\n      end\n    end\n\n    controller:\n    @cart = Cart.new(session[:cart])\n    //do operations on cart\n\n    session[:cart] = @cart\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 2549588, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qbr0R.jpg?s=128&g=1", "display_name": "Donald Chiang", "link": "https://stackoverflow.com/users/2549588/donald-chiang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1552, "favorite_count": 0, "accepted_answer_id": 36443618, "answer_count": 1, "score": 2, "last_activity_date": 1459925666, "creation_date": 1459918469, "last_edit_date": 1459923129, "question_id": 36441828, "link": "https://stackoverflow.com/questions/36441828/rails-session-store-model-object", "title": "Rails session store model object", "body": "<p>I use session to store my shopping cart object</p>\n\n<p>in my cart model I have</p>\n\n<pre><code>def initialize\n    @items = Array.new\nend\n\ndef clean\n    @items = Array.new\nend \n</code></pre>\n\n<p>I want to use session to store whole cart object so I can use the method above</p>\n\n<p>like this</p>\n\n<pre><code>@cart = session[:cart] ||= Cart.new\n</code></pre>\n\n<p>but my @cart output is strange</p>\n\n<p>first time run it output</p>\n\n<pre><code>&lt;%= @cart %&gt;\n#&lt;Cart:0x007efc844d3af0&gt;\n\n&lt;% @cart.clean %&gt;\ntrue\n</code></pre>\n\n<p>everything is fine, but the second time it output the object's content</p>\n\n<pre><code>&lt;%= @cart %&gt;\n{\"items\"=&gt;[]}\n\n&lt;% @cart.clean %&gt;\nundefined method `clean'\n</code></pre>\n\n<p>Can session store the whole object?</p>\n\n<p>Or there is something I did wrong?</p>\n\n<p>Thanks.</p>\n\n<p>EDIT:</p>\n\n<pre><code>&lt;% session[:cart] = Cart.new %&gt;\n&lt;%= session[:cart] %&gt;\n#&lt;Cart:0x007efc868be0a0&gt;\n\n&lt;% session[:cart] = session[:cart] ||= Cart.new %&gt;\n&lt;%= session[:cart] %&gt;\n#&lt;Cart:0x007efc868be0a0&gt; #Because session[:cart] does not exist\n&lt;% session[:cart] = session[:cart] ||= Cart.new %&gt;\n&lt;%= session[:cart] %&gt;\n{\"items\"=&gt;[]} #Session does not store the cart object but store the cart object's content\n</code></pre>\n\n<p>EDIT 2:</p>\n\n<pre><code>&lt;% @cart = session[:cart] ||= Cart.new %&gt;\n&lt;%= @cart %&gt; #session[:cart] is nil so print Cart.new\n&lt;br&gt;\n&lt;% session[:cart] = Cart.new %&gt;\n&lt;% @cart = session[:cart] ||= Cart.new %&gt;\n&lt;%= @cart %&gt; #session[:cart] isn't nil so print session[:cart]\n</code></pre>\n\n<p>I got both two outputs are Cart object</p>\n\n<p>when I refresh the page and run the same code</p>\n\n<pre><code>&lt;% @cart = session[:cart] ||= Cart.new %&gt;\n</code></pre>\n\n<p>@cart should be the session[:cart] because the session is not nil and the session[:cart] should be Cart object but it output \"{\"items\"=>[]}\"</p>\n\n<p>EDIT 3:</p>\n\n<p>First time:</p>\n\n<pre><code>&lt;%= session[:cart] %&gt;\n-&gt; nil\n&lt;% session[:cart] = Cart.new %&gt;\n&lt;%= session[:cart] %&gt;\n-&gt; &lt;Cart:0x00000007c112c0&gt;\n</code></pre>\n\n<p>Second time:</p>\n\n<pre><code>&lt;%= session[:cart] %&gt;\n-&gt; {\"items\"=&gt;[]} #Why it isn't a Cart object after I refresh?\n&lt;% session[:cart] = Cart.new %&gt;\n&lt;%= session[:cart] %&gt;\n-&gt; &lt;Cart:0x00000007c112c0&gt;\n</code></pre>\n"}, {"tags": ["html", "css", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1459917992, "post_id": 36441318, "comment_id": 60497537, "body": "Your question is unclear. What do you mean by &quot;within Ruby&quot;? ERB doesn&#39;t &quot;load the image,&quot; it just generates HTML. If this is a problem you&#39;d ordinarily solve in HTML and CSS, you&#39;ll solve it Rails by writing ERB that generates that HTML and writing the same CSS. What, specifically, are you having difficulty with?"}, {"owner": {"reputation": 73, "user_id": 5697952, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1009083932465996/picture?type=large", "display_name": "Stanley Roy Chilton", "link": "https://stackoverflow.com/users/5697952/stanley-roy-chilton"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1459925999, "post_id": 36441318, "comment_id": 60501105, "body": "its alright ive already sorted it :)"}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 5697952, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1009083932465996/picture?type=large", "display_name": "Stanley Roy Chilton", "link": "https://stackoverflow.com/users/5697952/stanley-roy-chilton"}, "edited": false, "score": 0, "creation_date": 1459916500, "post_id": 36441374, "comment_id": 60497081, "body": "so i cant use css for that? at all?"}, {"owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "reply_to_user": {"reputation": 73, "user_id": 5697952, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1009083932465996/picture?type=large", "display_name": "Stanley Roy Chilton", "link": "https://stackoverflow.com/users/5697952/stanley-roy-chilton"}, "edited": false, "score": 0, "creation_date": 1459916599, "post_id": 36441374, "comment_id": 60497109, "body": "You don&#39;t need to do. I think this will solve your issue. If you want you can add some black area using background back in banner div. So it all look good for all dimension image."}, {"owner": {"reputation": 73, "user_id": 5697952, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1009083932465996/picture?type=large", "display_name": "Stanley Roy Chilton", "link": "https://stackoverflow.com/users/5697952/stanley-roy-chilton"}, "edited": false, "score": 0, "creation_date": 1459916678, "post_id": 36441374, "comment_id": 60497135, "body": "its just the header is dependant on screensize and so if the image is a fixed size it will go over the edge on some screens"}, {"owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "reply_to_user": {"reputation": 73, "user_id": 5697952, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1009083932465996/picture?type=large", "display_name": "Stanley Roy Chilton", "link": "https://stackoverflow.com/users/5697952/stanley-roy-chilton"}, "edited": false, "score": 0, "creation_date": 1459916858, "post_id": 36441374, "comment_id": 60497197, "body": "No it wont. As per my experience. 100px will calculate on basis of mobile screen, When you use mobile devise. Or use 100% in height element. That will fix the your concern."}], "tags": [], "owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "is_accepted": true, "score": 1, "last_activity_date": 1459916010, "creation_date": 1459916010, "answer_id": 36441374, "question_id": 36441318, "link": "https://stackoverflow.com/questions/36441318/resizing-an-image-within-ruby-to-fit-within-a-div/36441374#36441374", "title": "resizing an image within ruby to fit within a DIV", "body": "<p>You can do it by directly passing size attribute in rails <code>image_tag</code>.</p>\n\n<pre><code>&lt;div id='banner'&gt;&lt;%= image_tag \"banner.png\", :alt=&gt; \"banner\", :size =&gt; '100X100'%&gt;&lt;/div&gt;\n</code></pre>\n\n<p>It might distorted your image dimension. You can also pass only height for that particular <code>image_tag</code> and width will managed automatically by <code>image_tag</code>.</p>\n\n<pre><code>&lt;div id='banner'&gt;&lt;%= image_tag \"banner.png\", :alt=&gt; \"banner\", :height =&gt; '100px' %&gt;&lt;/div&gt;\n</code></pre>\n\n<p>In your banner due add css to align image in center.</p>\n\n<pre><code>#banner{ text-align: centre; }\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 5697952, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1009083932465996/picture?type=large", "display_name": "Stanley Roy Chilton", "link": "https://stackoverflow.com/users/5697952/stanley-roy-chilton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1005, "favorite_count": 0, "accepted_answer_id": 36441374, "answer_count": 1, "score": 0, "last_activity_date": 1459916010, "creation_date": 1459915656, "question_id": 36441318, "link": "https://stackoverflow.com/questions/36441318/resizing-an-image-within-ruby-to-fit-within-a-div", "title": "resizing an image within ruby to fit within a DIV", "body": "<p>I have an image that needs to be within the banner, but because i'm using a html.erb file i have to load the image with ruby so how do i go about resizing the image so it fits. the image needs to fit within the <code>&lt;div id=\"banner\"&gt;&lt;/div&gt;</code> area, i'm not sure how to resize an image to do that though</p>\n\n<p>the html and ruby for the code:</p>\n\n<pre><code>&lt;div id='home_header'&gt;\n&lt;div id='banner'&gt;&lt;%= image_tag(\"banner.png\", :alt=&gt; \"banner\")%&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>the css for the code:</p>\n\n<pre><code>#home_header {\nbackground-color: #20C0CF;\nposition: absolute;\nz-index: 0;\nwidth: 98%;\nheight: 10%;\nleft: 0%;\ntop:0%;\nborder-bottom-style: ridge;\nborder-color: #0099FF;\nborder-bottom-right-radius: 100px;\n}\n#banner{\nbackground-color: #FFFFFF;\nposition: absolute;\nwidth: 30%;\nheight: 90%;\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord", "rails-migrations"], "comments": [{"owner": {"reputation": 3150, "user_id": 3012550, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e2667dc04d27136e29ccb9c9e19cfd3?s=128&d=identicon&r=PG", "display_name": "alexanderbird", "link": "https://stackoverflow.com/users/3012550/alexanderbird"}, "edited": false, "score": 1, "creation_date": 1459923163, "post_id": 36441262, "comment_id": 60499573, "body": "FYI: I did a bunch of digging and am pretty convinced that there is no magic implicit/automatic adding of fk constraints. I thought there may have been a naming convention thing going on, but I haven&#39;t found anything like that. See <a href=\"https://robots.thoughtbot.com/referential-integrity-with-foreign-keys\" rel=\"nofollow noreferrer\">robots.thoughtbot.com/referential-integrity-with-foreign-key&zwnj;&#8203;s</a> which links to <a href=\"https://github.com/rails/rails/pull/15606\" rel=\"nofollow noreferrer\">github.com/rails/rails/pull/15606</a> -- nothing about implicit fk&#39;s. Also the <a href=\"https://github.com/rails/rails/blob/v5.0.0.beta1/activerecord/CHANGELOG.md\" rel=\"nofollow noreferrer\">rails 5 activerecord changelog</a> which also has nothing about implicit fk&#39;s. So I&#39;m pretty sure that&#39;s not it."}, {"owner": {"reputation": 760, "user_id": 1893784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b6b06692d59846baa2471771d3211f5?s=128&d=identicon&r=PG", "display_name": "Shishir", "link": "https://stackoverflow.com/users/1893784/shishir"}, "reply_to_user": {"reputation": 3150, "user_id": 3012550, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e2667dc04d27136e29ccb9c9e19cfd3?s=128&d=identicon&r=PG", "display_name": "alexanderbird", "link": "https://stackoverflow.com/users/3012550/alexanderbird"}, "edited": false, "score": 0, "creation_date": 1459923873, "post_id": 36441262, "comment_id": 60499926, "body": "@alexanderbird +1. it seems AR is infering event_id to be a reference and magically adding the foreign key constraint. I wonder if its one of convention things that blowing up. (event being singular)"}, {"owner": {"reputation": 3150, "user_id": 3012550, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/4e2667dc04d27136e29ccb9c9e19cfd3?s=128&d=identicon&r=PG", "display_name": "alexanderbird", "link": "https://stackoverflow.com/users/3012550/alexanderbird"}, "edited": false, "score": 0, "creation_date": 1459924143, "post_id": 36441262, "comment_id": 60500056, "body": "It does look like it&#39;s inferring it, but from the documentation I couldn&#39;t see any indication that that&#39;s how it does it. If there was any such magic before 4.2, there would be no need for the <a href=\"https://github.com/matthuhiggins/foreigner\" rel=\"nofollow noreferrer\">foreigner gem</a>, and then later the <a href=\"https://github.com/rails/rails/pull/15606\" rel=\"nofollow noreferrer\">pull request to provide this natively</a>. I didn&#39;t read all the change logs since then, but at least the 5.0.0 change log had nothing about adding such magic, nor did my googling show anything. Also I tried it out with mysql2 on rails 4.2.5 and there was no fk added"}], "answers": [{"tags": [], "owner": {"reputation": 760, "user_id": 1893784, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b6b06692d59846baa2471771d3211f5?s=128&d=identicon&r=PG", "display_name": "Shishir", "link": "https://stackoverflow.com/users/1893784/shishir"}, "is_accepted": false, "score": 1, "last_activity_date": 1459922651, "creation_date": 1459922651, "answer_id": 36442783, "question_id": 36441262, "link": "https://stackoverflow.com/questions/36441262/why-does-activerecord-make-an-unwanted-foreign-key-constraint-on-my-new-table/36442783#36442783", "title": "Why does ActiveRecord make an unwanted foreign key constraint on my new table?", "body": "<p>Rails guide documents a different way of writing migration. <a href=\"http://guides.rubyonrails.org/association_basics.html#polymorphic-associations\" rel=\"nofollow\">SEE</a></p>\n\n<pre><code>class CreateReasons &lt; ActiveRecord::Migration\n  def change\n    create_table :reasons do |t|\n      t.string :description\n      t.references :event, polymorphic: true, index: true\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>I have used the way mentioned in your question for earlier version of rails. </p>\n"}, {"comments": [{"owner": {"reputation": 62182, "user_id": 1445366, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1073cfb4a1d76b3ac49e08eff6379a63?s=128&d=identicon&r=PG", "display_name": "Aaron Brager", "link": "https://stackoverflow.com/users/1445366/aaron-brager"}, "edited": false, "score": 0, "creation_date": 1459955573, "post_id": 36444118, "comment_id": 60522973, "body": "Thanks! <code>schema_plus</code> (or, more specifically, <code>schema_auto_foreign_keys</code> which it includes) was the culprit in my case. I added <code>foreign_key: false</code> to my migration and it worked perfectly."}], "tags": [], "owner": {"reputation": 3020, "user_id": 1276552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baa29da52b110cc638a327f75baaf80f?s=128&d=identicon&r=PG", "display_name": "twonegatives", "link": "https://stackoverflow.com/users/1276552/twonegatives"}, "is_accepted": true, "score": 1, "last_activity_date": 1459927564, "last_edit_date": 1495541256, "creation_date": 1459927200, "answer_id": 36444118, "question_id": 36441262, "link": "https://stackoverflow.com/questions/36441262/why-does-activerecord-make-an-unwanted-foreign-key-constraint-on-my-new-table/36444118#36444118", "title": "Why does ActiveRecord make an unwanted foreign key constraint on my new table?", "body": "<p>Your migration seems ok and I can hardly imagine this kind of behaviour provided by <code>ActiveRecord</code> itself. More than that, foreign key automatically generated by <code>Rails</code> would probably be named <code>index_reasons_on_event_id</code>, but not <code>fk_reasons_event_id</code>.</p>\n\n<p>In my opinion, there is something going behind the scenes here, like patching <code>ActiveRecord::ConnectionsAdapters</code>, as was described <a href=\"https://stackoverflow.com/questions/24201039/create-or-override-rails-active-record-macros/24201862#24201862\">here</a>.</p>\n\n<p>I would suggest to check initializer files for some nasty monkeypatching and probably your Gemfile for something alike <code>automatic_foreign_key</code> or <code>schema_plus</code>, which can infer foreign keys from column names and relations automatically.</p>\n"}], "owner": {"reputation": 62182, "user_id": 1445366, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/1073cfb4a1d76b3ac49e08eff6379a63?s=128&d=identicon&r=PG", "display_name": "Aaron Brager", "link": "https://stackoverflow.com/users/1445366/aaron-brager"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 405, "favorite_count": 0, "accepted_answer_id": 36444118, "answer_count": 2, "score": 2, "last_activity_date": 1459927564, "creation_date": 1459915278, "last_edit_date": 1459917188, "question_id": 36441262, "link": "https://stackoverflow.com/questions/36441262/why-does-activerecord-make-an-unwanted-foreign-key-constraint-on-my-new-table", "title": "Why does ActiveRecord make an unwanted foreign key constraint on my new table?", "body": "<p>I am trying to make a polymorphic model in ActiveRecord. It should have a one-to-one relationship with another object of any type. I am following the <a href=\"https://launchschool.com/blog/understanding-polymorphic-associations-in-rails\" rel=\"nofollow\">Understanding Polymorphic Associations in Rails</a> blog post from LaunchSchool.</p>\n\n<p>My migration:</p>\n\n<pre><code># Expresses an explanation for an action or event\nclass CreateReasons &lt; ActiveRecord::Migration\n  def change\n    create_table :reasons do |t|\n      t.string :description\n      t.integer :event_id\n      t.string :event_type\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>Note that I am <em>not</em> calling <code>add_foreign_key</code>.</p>\n\n<p>My model class:</p>\n\n<pre><code># Expresses an explanation for an action or event\nclass Reason &lt; ActiveRecord::Base\n  belongs_to :event, polymorphic: true\nend\n</code></pre>\n\n<p>The same error occurs if I remove this line.</p>\n\n<p>When I run <code>rake db:migrate</code> (with or without <code>bundle exec</code>), I get an error, I think because of a foreign key constraint:</p>\n\n<pre><code>D, [2016-04-05T22:40:41.389615 #45464] DEBUG -- :    (9.7ms)  CREATE TABLE \"reasons\" (\"id\" serial primary key, \"description\" character varying(255), \"event_id\" integer, \"event_type\" character varying(255), \"created_at\" timestamp, \"updated_at\" timestamp, CONSTRAINT fk_reasons_event_id FOREIGN KEY (\"event_id\") REFERENCES \"events\" (\"id\"))\nE, [2016-04-05T22:40:41.390720 #45464] ERROR -- : PG::Error: ERROR:  relation \"events\" does not exist\n: CREATE TABLE \"reasons\" (\"id\" serial primary key, \"description\" character varying(255), \"event_id\" integer, \"event_type\" character varying(255), \"created_at\" timestamp, \"updated_at\" timestamp, CONSTRAINT fk_reasons_event_id FOREIGN KEY (\"event_id\") REFERENCES \"events\" (\"id\"))\nD, [2016-04-05T22:40:41.391245 #45464] DEBUG -- :    (0.2ms)  ROLLBACK\n</code></pre>\n\n<p>I don't know where this constraint came from, and I don't think I want it because this relationship should be polymorphic (the <code>event</code> relationship can be any type). Why is it there? What did I do wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "edited": false, "score": 0, "creation_date": 1459916346, "post_id": 36440922, "comment_id": 60497023, "body": "why are you searching for cities in country&#39;s name?"}], "answers": [{"comments": [{"owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "edited": false, "score": 0, "creation_date": 1459922310, "post_id": 36441270, "comment_id": 60499173, "body": "receive an error <code>NoMethodError (undefined method </code>downcase&#39; for #&lt;Creference:0x007fd1ecc5f308&gt;):`"}], "tags": [], "owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1459915317, "creation_date": 1459915317, "answer_id": 36441270, "question_id": 36440922, "link": "https://stackoverflow.com/questions/36440922/ruby-on-rails-iterate-array-result-into-query/36441270#36441270", "title": "Ruby on Rails iterate array result into query", "body": "<p>You can do it in two ways :</p>\n\n<ol>\n<li><p>Iterate all country record and then add like query.</p>\n\n<pre><code>@product = []\ncountry.each do |con|\n  @products &lt;&lt; @products.where(\"lower(city) LIKE ? or lower(country) like ? or lower(state) LIKE ?\", \"%#{con.downcase}%\", \"%#{con.downcase}%\",\"%#{con.downcase}%\")\nend\n</code></pre></li>\n<li><p>You can use ILIKE syntax of core sql. Which work like this :</p>\n\n<pre><code>select * from table where value ilike any (array['%foo%', '%bar%', '%baz%']);\n\n# in your case\ncountry_array_with_percent = country.map {|con| \"%#{con}%\" }\n@products.where(\"name ILIKE ANY ( array[?] )\", country_array_with_percent)\n</code></pre></li>\n</ol>\n\n<p>You can also make query chaining with or query, More details <a href=\"https://github.com/rails/rails/pull/9052\" rel=\"nofollow\">here</a></p>\n"}], "owner": {"reputation": 2032, "user_id": 1471938, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/0HGZz.jpg?s=128&g=1", "display_name": "d3bug3r", "link": "https://stackoverflow.com/users/1471938/d3bug3r"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459915317, "creation_date": 1459913147, "last_edit_date": 1459913406, "question_id": 36440922, "link": "https://stackoverflow.com/questions/36440922/ruby-on-rails-iterate-array-result-into-query", "title": "Ruby on Rails iterate array result into query", "body": "<p>Following were my output from the query:</p>\n\n<pre><code>unless @slug == 'all'\n  @city = '' if @city.blank?\n  @city = @city.gsub(\"-\", \" \")\n  country = Country.where(\"lower(name) LIKE ?\", \"#{@city.downcase}\")\n  gon.country = country\n  if country.present?\n\n  end\n  if @city.present?\n    @products = @products.where(\"lower(city) LIKE ? or lower(country) like ? or lower(state) LIKE ?\", \"%#{@city.downcase}%\", \"%#{@city.downcase}%\",\"%#{@city.downcase}%\")\n    @city_obj = City.where(\"lower(name) LIKE ?\", \"%#{@city.downcase}%\").first\n  end\nend\n</code></pre>\n\n<p>Here <code>gon.country</code> return result as:</p>\n\n<pre><code>Object\ncountries\n:\nArray[2]\n0\n:\n\"california\"\n1\n:\n\"san francisco\" \n</code></pre>\n\n<p>How can I iterate the <code>countries</code> and pass it to get <code>@products</code> result?</p>\n"}, {"tags": ["ruby", "json", "merge", "duplicates"], "answers": [{"tags": [], "owner": {"reputation": 270444, "user_id": 405017, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2024054e404233ed97b7d9287aff103d?s=128&d=identicon&r=PG", "display_name": "Phrogz", "link": "https://stackoverflow.com/users/405017/phrogz"}, "is_accepted": true, "score": 1, "last_activity_date": 1459914488, "last_edit_date": 1459914488, "creation_date": 1459913289, "answer_id": 36440939, "question_id": 36440683, "link": "https://stackoverflow.com/questions/36440683/merge-duplicate-values-in-json-using-ruby/36440939#36440939", "title": "Merge duplicate values in json using ruby", "body": "<pre><code>json = File.open(path,'r:utf-8',&amp;:read) # in case the JSON uses UTF-8\nitems = JSON.parse(json)['items']\nstock_by_brand = items\n  .group_by{ |h| h['brand'] }\n  .map do |brand,array|\n    [ brand,\n      array\n        .map{ |item| item['stock'] }\n        .inject(:+) ]\n  end\n  .to_h\n#=&gt; {\"LEGO\"=&gt;60, \"Nano Blocks\"=&gt;12}\n</code></pre>\n\n<p>It works like this:</p>\n\n<ul>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-group_by\" rel=\"nofollow\"><code>Enumerable#group_by</code></a> takes the array of items and creates a hash mapping the brand name to an array of all <code>item</code> hashes with that brand</li>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-map\" rel=\"nofollow\"><code>Enumerable#map</code></a> turns each brand/array pair in that hash into an array of the brand (unchanged) followed by:\n\n<ul>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-map\" rel=\"nofollow\"><code>Enumerable#map</code></a> on the array of items picks out just the <code>\"stock\"</code> counts, and then</li>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-inject\" rel=\"nofollow\"><code>Enumerable#inject</code></a> sums them all together</li>\n</ul></li>\n<li><a href=\"http://ruby-doc.org/core-2.2.3/Array.html#method-i-to_h\" rel=\"nofollow\"><code>Array#to_h</code></a> then turns that array of two-value arrays into a hash, mapping the brand to the sum of <code>stock</code> values. </li>\n</ul>\n\n<p>If you want simpler code that's less <em><a href=\"https://en.wikipedia.org/wiki/Functional_programming\" rel=\"nofollow\">functional</a></em> and possibly easier to understand:</p>\n\n<pre><code>stock_by_brand = {}  # an empty hash\nitems.each do |item|\n  stock_by_brand[ item['brand'] ] ||= 0 # initialize to zero if unset\n  stock_by_brand[ item['brand'] ] += item['stock']\nend\np stock_by_brand     #=&gt; {\"LEGO\"=&gt;60, \"Nano Blocks\"=&gt;12}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1459989514, "last_edit_date": 1459989514, "creation_date": 1459923152, "answer_id": 36442916, "question_id": 36440683, "link": "https://stackoverflow.com/questions/36440683/merge-duplicate-values-in-json-using-ruby/36442916#36442916", "title": "Merge duplicate values in json using ruby", "body": "<p>To see what your JSON string looks like, let's create it from your hash, which I've denoted <code>h</code>:</p>\n\n<pre><code>require 'json'\n\nj = JSON.generate(h)\n  #=&gt; \"{\\\"items\\\":[{\\\"brand\\\":\\\"LEGO\\\",\\\"stock\\\":55,\\\"full-price\\\":\\\"22.99\\\"},{\\\"brand\\\":\\\"Nano Blocks\\\",\\\"stock\\\":12,\\\"full-price\\\":\\\"49.99\\\"},{\\\"brand\\\":\\\"LEGO\\\",\\\"stock\\\":5,\\\"full-price\\\":\\\"199.99\\\"}]}\"\n</code></pre>\n\n<p>After reading that from a file, into the variable <code>j</code>, we can now parse it to obtain the value of <code>\"items\"</code>:</p>\n\n<pre><code>arr = JSON.parse(j)[\"items\"]\n  #=&gt; [{\"brand\"=&gt;\"LEGO\", \"stock\"=&gt;55, \"full-price\"=&gt;\"22.99\"},\n  #    {\"brand\"=&gt;\"Nano Blocks\", \"stock\"=&gt;12, \"full-price\"=&gt;\"49.99\"},\n  #    {\"brand\"=&gt;\"LEGO\", \"stock\"=&gt;5, \"full-price\"=&gt;\"199.99\"}]\n</code></pre>\n\n<p>One way to obtain the desired tallies is to use a counting hash:</p>\n\n<pre><code>arr.each_with_object(Hash.new(0)) {|g,h| h.update(g[\"brand\"]=&gt;h[g[\"brand\"]]+g[\"stock\"])}\n  #=&gt; {\"LEGO\"=&gt;60, \"Nano Blocks\"=&gt;12} \n</code></pre>\n\n<p><code>Hash.new(0)</code> creates an empty hash (represented by the block variable <code>h</code>) with  with a default value of zero<sup>1</sup>. That means that <code>h[k]</code> returns zero if the hash does not have a key <code>k</code>.</p>\n\n<p>For the first element of <code>arr</code> (represented by the block variable <code>g</code>) we have:</p>\n\n<pre><code>g[\"brand\"] #=&gt; \"LEGO\"\ng[\"stock\"] #=&gt; 55\n</code></pre>\n\n<p>Within the block, therefore, the calculation is:</p>\n\n<pre><code>g[\"brand\"] =&gt; h[g[\"brand\"]]+g[\"stock\"]\n  #=&gt; \"LEGO\" =&gt; h[\"LEGO\"] + 55\n</code></pre>\n\n<p>Initially <code>h</code> has no keys, so <code>h[\"LEGO\"]</code> returns the default value of zero, resulting in <code>{ \"LEGO\"=&gt;55 }</code> being merged into the hash <code>h</code>. As <code>h</code> now has a key <code>\"LEGO\"</code>, <code>h[\"LEGO\"]</code>, will not return the default value in subsequent calculations.</p>\n\n<p>Another approach is to use the form of <a href=\"http://ruby-doc.org/core-2.2.0/Hash.html#method-i-update\" rel=\"nofollow\">Hash#update</a> (aka <code>merge!</code>) that employs a block to determine the values of keys that are present in both hashes being merged:</p>\n\n<pre><code>arr.each_with_object({}) {|g,h| h.update(g[\"brand\"]=&gt;g[\"stock\"]) {|_,o,n| o+n}}\n  #=&gt; {\"LEGO\"=&gt;60, \"Nano Blocks\"=&gt;12} \n</code></pre>\n\n<p><sup>1 <code>k=&gt;v</code> is shorthand for <code>{ k=&gt;v }</code> when it appears as a method's argument.</sup>  </p>\n"}], "owner": {"reputation": 3, "user_id": 6164353, "user_type": "registered", "profile_image": "https://graph.facebook.com/1184007244957624/picture?type=large", "display_name": "Ramesh Tiwari", "link": "https://stackoverflow.com/users/6164353/ramesh-tiwari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 773, "favorite_count": 0, "accepted_answer_id": 36440939, "answer_count": 2, "score": 0, "last_activity_date": 1459989514, "creation_date": 1459911530, "question_id": 36440683, "link": "https://stackoverflow.com/questions/36440683/merge-duplicate-values-in-json-using-ruby", "title": "Merge duplicate values in json using ruby", "body": "<p>I have the following <strong>item.json</strong> file</p>\n\n<pre><code>{\n    \"items\": [\n      {\n        \"brand\": \"LEGO\",\n        \"stock\": 55,\n        \"full-price\": \"22.99\",\n      },\n      {\n        \"brand\": \"Nano Blocks\",\n        \"stock\": 12,\n        \"full-price\": \"49.99\",\n      },\n      {\n        \"brand\": \"LEGO\",\n        \"stock\": 5,\n        \"full-price\": \"199.99\",\n      }\n    ]\n}\n</code></pre>\n\n<p>There are two items named LEGO and I want to get output for the total number of stock for the individual brand.</p>\n\n<p>In ruby file <strong>item.rb</strong> i have code like:</p>\n\n<pre><code>require 'json'\n\npath = File.join(File.dirname(__FILE__), '../data/products.json')\nfile = File.read(path)\nproducts_hash = JSON.parse(file)\n\nproducts_hash[\"items\"].each do |brand|\nputs \"Stock no: #{brand[\"stock\"]}\"\nend\n</code></pre>\n\n<p>I got output for stock no individually for each brand wherein I need the stock to be summed for two brand name \"LEGO\" displayed as one.\nAnyone has solution for this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1459910728, "post_id": 36440513, "comment_id": 60495488, "body": "I think the <code>LIKE</code> syntax would be as follows: <code>LIKE &#39;%?%&#39;</code> (the <code>%</code> being wildcard)."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1459911659, "post_id": 36440513, "comment_id": 60495750, "body": "This makes no sense. You want an object with <code>example: &quot;the&quot;</code> to appear when somebody searches for &quot;thesaurus&quot;? This isn&#39;t how <code>LIKE</code> works, and you cannot make it work that way."}, {"owner": {"reputation": 110, "user_id": 4271517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/n2UTY.jpg?s=128&g=1", "display_name": "virtual_monk", "link": "https://stackoverflow.com/users/4271517/virtual-monk"}, "edited": false, "score": 0, "creation_date": 1459912048, "post_id": 36440513, "comment_id": 60495847, "body": "Yeah, I&#39;m working with legacy code and the associations I need aren&#39;t there. I&#39;m going to try to use this search to makeshift a few associations between objects with inconsistent data. Do you have a solution for this?"}], "answers": [{"comments": [{"owner": {"reputation": 3289, "user_id": 721631, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/2ed58126d0a452448d14f002391e3a1c?s=128&d=identicon&r=PG", "display_name": "snowangel", "link": "https://stackoverflow.com/users/721631/snowangel"}, "reply_to_user": {"reputation": 3410, "user_id": 1144120, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/263cde71709be665db6ce1d2c0d8e532?s=128&d=identicon&r=PG", "display_name": "Arel", "link": "https://stackoverflow.com/users/1144120/arel"}, "edited": false, "score": 0, "creation_date": 1523806208, "post_id": 36440668, "comment_id": 86701858, "body": "@arel No, it doesn&#39;t: it warns against pure string conditions but this one is escaped with a question mark so it&#39;s OK."}], "tags": [], "owner": {"reputation": 655, "user_id": 4916648, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/cpT8L.png?s=128&g=1", "display_name": "SomeSchmo", "link": "https://stackoverflow.com/users/4916648/someschmo"}, "is_accepted": false, "score": 2, "last_activity_date": 1459911544, "last_edit_date": 1459911544, "creation_date": 1459911389, "answer_id": 36440668, "question_id": 36440513, "link": "https://stackoverflow.com/questions/36440513/activerecord-fuzzy-search/36440668#36440668", "title": "ActiveRecord Fuzzy Search", "body": "<p>I think it should be</p>\n\n<pre><code>params[:search] = \"abcdef\"\nObject.where(\"example LIKE ?\", \"%#{params[:search]}%\")\n</code></pre>\n\n<p>Also might want to use <code>ilike</code> for case insensitive search (if you're using postgres)</p>\n"}, {"comments": [{"owner": {"reputation": 148, "user_id": 5573177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1XVUP.jpg?s=128&g=1", "display_name": "Phillip van Heerden", "link": "https://stackoverflow.com/users/5573177/phillip-van-heerden"}, "reply_to_user": {"reputation": 4839, "user_id": 265683, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9cfc3a929b053ff4abac9fb0e7a0daa8?s=128&d=identicon&r=PG", "display_name": "RenegadeAndy", "link": "https://stackoverflow.com/users/265683/renegadeandy"}, "edited": false, "score": 0, "creation_date": 1569763006, "post_id": 56361674, "comment_id": 102693881, "body": "Unfortunately this is true! :( Updating my answer to reflect this. Thanks for pointing it out :)"}], "tags": [], "owner": {"reputation": 148, "user_id": 5573177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1XVUP.jpg?s=128&g=1", "display_name": "Phillip van Heerden", "link": "https://stackoverflow.com/users/5573177/phillip-van-heerden"}, "is_accepted": false, "score": 1, "last_activity_date": 1569763182, "last_edit_date": 1569763182, "creation_date": 1559136154, "answer_id": 56361674, "question_id": 36440513, "link": "https://stackoverflow.com/questions/36440513/activerecord-fuzzy-search/56361674#56361674", "title": "ActiveRecord Fuzzy Search", "body": "<p><strong>Note: the fuzzily gem does not work with Rails 6. This solution has been deprecated.</strong></p>\n\n<p>The <a href=\"https://github.com/mezis/fuzzily\" rel=\"nofollow noreferrer\">fuzzily</a> gem allows you to do fuzzy searching of ActiveRecord models that you've instrumented appropriately.</p>\n\n<blockquote>\n  <p>Fuzzily finds misspelled, prefix, or partial needles in a haystack of strings. It's a fast, trigram-based, database-backed fuzzy string search/match engine for Rails. </p>\n</blockquote>\n\n<p>Once you've installed the gem, you can instrument your model as follows:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class MyStuff &lt; ActiveRecord::Base\n  # assuming my_stuffs has a 'name' attribute\n  fuzzily_searchable :name\nend\n</code></pre>\n\n<p>You can then perform fuzzy searches as follows:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>MyStuff.find_by_fuzzy_name('Some Name', :limit =&gt; 10)\n# =&gt; records\n</code></pre>\n"}], "owner": {"reputation": 110, "user_id": 4271517, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/n2UTY.jpg?s=128&g=1", "display_name": "virtual_monk", "link": "https://stackoverflow.com/users/4271517/virtual-monk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3631, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1569763182, "creation_date": 1459910322, "question_id": 36440513, "link": "https://stackoverflow.com/questions/36440513/activerecord-fuzzy-search", "title": "ActiveRecord Fuzzy Search", "body": "<p>I'm looking to perform a search to find an object similar to this:</p>\n\n<p><code>Object(id: 1, example: \"abc\")</code></p>\n\n<p>by using a search like this:</p>\n\n<pre><code>params[:search] = \"abcdef\"\nObject.where(\"example LIKE ?\", \"#{params[:search]%\")\n</code></pre>\n\n<p>but am only able to use the above example if my search has less characters than my object, not more. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "postgresql", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 2093, "user_id": 1747295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70b9d5ee5e89974383b7cf856e1dea8?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yawar Ali", "link": "https://stackoverflow.com/users/1747295/muhammad-yawar-ali"}, "reply_to_user": {"reputation": 197, "user_id": 1094706, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bff95328fa83f1471e167587949730d?s=128&d=identicon&r=PG", "display_name": "Manu Kanthan", "link": "https://stackoverflow.com/users/1094706/manu-kanthan"}, "edited": false, "score": 1, "creation_date": 1460031394, "post_id": 36442534, "comment_id": 60561876, "body": "&amp; is just seperating 2 alternates in the answer no need to add it to code"}], "tags": [], "owner": {"reputation": 2093, "user_id": 1747295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a70b9d5ee5e89974383b7cf856e1dea8?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Yawar Ali", "link": "https://stackoverflow.com/users/1747295/muhammad-yawar-ali"}, "is_accepted": true, "score": 2, "last_activity_date": 1459921681, "creation_date": 1459921681, "answer_id": 36442534, "question_id": 36440354, "link": "https://stackoverflow.com/questions/36440354/activerecord-query-to-filter-nested-has-many-associations/36442534#36442534", "title": "ActiveRecord query to filter nested has_many associations", "body": "<p>This should work :</p>\n\n<pre><code>SuperCategory.joins(categories: :books).where(\"books.show_me = ?\", true)\n   &amp;\nSuperCategory.joins(categories: :sub_categories, :books).where(\"books.show_me = ?\", true)\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 1094706, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bff95328fa83f1471e167587949730d?s=128&d=identicon&r=PG", "display_name": "Manu Kanthan", "link": "https://stackoverflow.com/users/1094706/manu-kanthan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1178, "favorite_count": 1, "accepted_answer_id": 36442534, "answer_count": 1, "score": 1, "last_activity_date": 1459921681, "creation_date": 1459909370, "question_id": 36440354, "link": "https://stackoverflow.com/questions/36440354/activerecord-query-to-filter-nested-has-many-associations", "title": "ActiveRecord query to filter nested has_many associations", "body": "<p>I want to take an ActiveRecord model and filter the associations all the way up to the top level so that nested associations conforming to a certain condition prevent their parents from being inside the returned records. </p>\n\n<p>Let me explain this better. I have the following models:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class SuperCategory &lt; ActiveRecord::Base\n  attr_accessible :name\n  has_many :categories\nend\n\nclass Category &lt; ActiveRecord::Base\n  attr_accessible :name\n  belongs_to :super_category\n  has_many :sub_categories\n  has_many :books\nend\n\nclass SubCategory &lt; ActiveRecord::Base\n  attr_accessible :name\n  belongs_to :category\n  has_many :books\nend\n\nclass Book &lt; ActiveRecord::Base\n  belongs_to :sub_category\n  belongs_to :category\n  attr_accessible :show_me #boolean\nend\n</code></pre>\n\n<p>In the SuperCategoriesController, I have:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class SuperCategoriesController &lt; ApplicationController\n  def index\n    @super_categories = SuperCategory.all #here is where I want to query\n    respond_with(@super_categories)\n  end\nend\n</code></pre>\n\n<p>Hitting the <code>/super_categories.json</code> endpoint, I'll get something that looks like this which is the whole tree in JSON format since my .jbuilder partial adds all of the nested associations:</p>\n\n<pre><code>[\n  { \n    name: \"supercategory1\",\n    categories: [\n      { \n        name: \"category1\",\n        books: [\n          { show_me: true },\n          { show_me: true },\n          { show_me: false }\n        ]\n      },\n      {\n        name: \"category2\",\n        sub_categories: [ \n          { \n            name: \"subcategory1\",\n            books:[\n              { show_me: false }\n            ]\n          }\n        ]\n      }\n    ]\n  },\n  {\n    name: \"supercategory2\",\n    categories: [\n      {\n        name: \"category3\",\n        books: [\n          { show_me: false }\n        ]\n      }\n    ]\n  }\n]\n</code></pre>\n\n<p>What I'd like to do in the controller if I pass it a param such that <code>show_me = true</code>, then I'd like to not show any of the Books, SubCategories, Categories and SuperCategories which have books with <code>show_me == false</code>.  Here is what I've tried:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class SuperCategoriesController &lt; ApplicationController\n  def index\n    if params[:show_me] == true\n      @super_categories = SuperCategory.joins(:categories).joins(:sub_categories).where(:books =&gt; { show_me: true })\n    end\n    respond_with(@super_categories)\n  end\nend\n</code></pre>\n\n<p>This produces an error because I don't know how to join <code>:categories</code> to <code>:sub_categories</code> to <code>:books</code>.  What I'd like the result to be:</p>\n\n<pre><code>[\n  { \n    name: \"supercategory1\",\n    categories: [\n      { \n        name: \"category1\",\n        books: [\n          { show_me: true },\n          { show_me: true }\n        ]\n      }\n    ]\n  }\n]\n</code></pre>\n\n<p>Basically, when I call <code>@super_category.categories</code> there should only be those categories which have nested books where <code>show_me == true</code>. Similarly, if there are SubCategories with books where <code>show_me == true</code>, it should return those too. Is there an ActiveRecord combination of <code>.joins</code> and <code>.where</code> that gets me there?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rspec", "rspec-rails"], "answers": [{"comments": [{"owner": {"reputation": 1336, "user_id": 3908551, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/oYCdi.png?s=128&g=1", "display_name": "stoebelj", "link": "https://stackoverflow.com/users/3908551/stoebelj"}, "edited": false, "score": 0, "creation_date": 1459984020, "post_id": 36439991, "comment_id": 60539479, "body": "After some more exploration I found that the code needs to be wrapped in a before block. For reasons I don&#39;t understand it won&#39;t work otherwise."}, {"owner": {"reputation": 71, "user_id": 2533297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/910a9080c2d5b3df3dfd4cf91f8cf390?s=128&d=identicon&r=PG", "display_name": "Jeremiah Heller", "link": "https://stackoverflow.com/users/2533297/jeremiah-heller"}, "reply_to_user": {"reputation": 1336, "user_id": 3908551, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/oYCdi.png?s=128&g=1", "display_name": "stoebelj", "link": "https://stackoverflow.com/users/3908551/stoebelj"}, "edited": false, "score": 0, "creation_date": 1460128769, "post_id": 36439991, "comment_id": 60613775, "body": "Can you post an example of how it is now and how it was before adding it to before block? Whatever&#39;s accessible from the <code>before</code> block should be available within <code>it</code> example blocks as well."}], "tags": [], "owner": {"reputation": 71, "user_id": 2533297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/910a9080c2d5b3df3dfd4cf91f8cf390?s=128&d=identicon&r=PG", "display_name": "Jeremiah Heller", "link": "https://stackoverflow.com/users/2533297/jeremiah-heller"}, "is_accepted": true, "score": 1, "last_activity_date": 1459906937, "creation_date": 1459906937, "answer_id": 36439991, "question_id": 36439834, "link": "https://stackoverflow.com/questions/36439834/adding-helper-module-to-rspec/36439991#36439991", "title": "Adding helper module to Rspec", "body": "<p>You could pass <code>@request</code> in to <code>TestHelper.login_as</code> from the tests. Eg</p>\n\n<pre><code>module TestHelper\n  def self.login_as(user_type, request)\n    ...\n    request.env['devise.mapping'] = Devise.mappings[:user]\n    ...\n  end\nend\n\n...\n\ndescribe 'log in' do\n  it 'works!' do\n    TestHelper.login_as('administrator', @request)\n  end\nend\n</code></pre>\n\n<p>But probably better to follow the macro pattern from the <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Test-controllers-with-Rails-3-and-4-(and-RSpec)\" rel=\"nofollow\">devise wiki</a> if other devise mappings in play.</p>\n"}, {"tags": [], "owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "is_accepted": false, "score": 2, "last_activity_date": 1459959849, "creation_date": 1459959849, "answer_id": 36456883, "question_id": 36439834, "link": "https://stackoverflow.com/questions/36439834/adding-helper-module-to-rspec/36456883#36456883", "title": "Adding helper module to Rspec", "body": "<p>In addition to the other answers, you should consider only including this module for relevant spec types using the following code:</p>\n\n<pre><code>config.include TestHelper, type: :controller  #  Or whatever spec type(s) you're using\n</code></pre>\n"}], "owner": {"reputation": 1336, "user_id": 3908551, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/oYCdi.png?s=128&g=1", "display_name": "stoebelj", "link": "https://stackoverflow.com/users/3908551/stoebelj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 738, "favorite_count": 0, "accepted_answer_id": 36439991, "answer_count": 2, "score": 2, "last_activity_date": 1459962238, "creation_date": 1459905827, "last_edit_date": 1459962238, "question_id": 36439834, "link": "https://stackoverflow.com/questions/36439834/adding-helper-module-to-rspec", "title": "Adding helper module to Rspec", "body": "<p>I would like to add a module that includes a method to help me log in as a user. Here it is:</p>\n\n<pre><code>module TestHelper\n  require 'spec_helper'\n\n  ALL_USERS = [\"administrator\", \"instructor\", \"regular_user\"]\n\n  def self.login_as(user_type)\n    user = User.find_by(global_role_id: GlobalRole.send(user_type))\n    @request.env[\"devise.mapping\"] = Devise.mappings[:user]\n    sign_in user\n  end\nend\n</code></pre>\n\n<p>The spec that's calling it is</p>\n\n<pre><code>require 'spec_helper'\n\nRSpec.describe QuestionsController, :type =&gt; :controller do\n  include Devise::TestHelpers\n  include TestHelper\n\n  describe \"a test\" do\n    it \"works!\" do\n      TestHelper.login_as(\"administrator\")\n    end\n  end\nend\n</code></pre>\n\n<p>And here is the spec_helper</p>\n\n<pre><code>RSpec.configure do |config|\n  config.include TestHelper, :type =&gt; :controller\n</code></pre>\n\n<p>The error I get is: <code>undefined method 'env' for nil:NilClass</code> It looks like my module doesn't have access to <code>@request</code>.</p>\n\n<p>My question is: how do I access and <code>@request</code> in the external Module?</p>\n"}, {"tags": ["ruby", "json", "hash", "substitution"], "answers": [{"tags": [], "owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "is_accepted": false, "score": 0, "last_activity_date": 1459918788, "creation_date": 1459918788, "answer_id": 36441890, "question_id": 36439705, "link": "https://stackoverflow.com/questions/36439705/how-do-i-substitute-elements-in-a-hash-using-ruby/36441890#36441890", "title": "how do I substitute elements in a hash using ruby?", "body": "<p><code>json_element.map { |k,v|  v['$'].replace_hash(hash = @replace_hash) }</code></p>\n\n<p>I played around with the above and got it to work.</p>\n"}], "owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459918788, "creation_date": 1459904851, "question_id": 36439705, "link": "https://stackoverflow.com/questions/36439705/how-do-i-substitute-elements-in-a-hash-using-ruby", "title": "how do I substitute elements in a hash using ruby?", "body": "<p>I have JSON hash of indeterminate key names and field values to which I would want to substitute string or sub-string in the values.  For example:</p>\n\n<p><code>\n{\"COLLECTION\"=&gt;{\"$\"=&gt;\"biblestudy\"},\n \"JSON\"=&gt;{\"$\"=&gt;\"{ \\\"type\\\" : \\\"reaction\\\", \\\"verse_reaction\\\": \\\"That our lives should be one of giving life\\\", \\\"verse_key\\\" : \\\"109dc58b8020681e\\\" }\"},\n \"KEY\"=&gt;{\"$\"=&gt;\"key.verse_reaction\"},\n \"REPLACE-KEY\"=&gt;{\"$\"=&gt;\"replace-key\"}}\n</code></p>\n\n<p>I could want to replace <code>replace-key</code> with some value stored in a has <code>{\"replace-key\" : \"this is the replacement\"}</code></p>\n\n<p>I have tried the following:</p>\n\n<p><code>\njson_element.map { |k,v| v.map { |k1,v1| v1.replace_hash(hash={\"hope\" =&gt; \"life\" })} }\n</code></p>\n\n<p>I created <code>replace_hash</code> as a method for <code>String</code>:</p>\n\n<pre><code> def replace_hash(hash=nil)\n\n  if hash.present?\n\n    hash.each do | key, substitute |\n\n      self.sub! key, substitute\n    end\n\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "helper", "middleman", "middleman-4"], "comments": [{"owner": {"reputation": 3773, "user_id": 991903, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/J12Hi.jpg?s=128&g=1", "display_name": "Meier", "link": "https://stackoverflow.com/users/991903/meier"}, "edited": false, "score": 1, "creation_date": 1460017967, "post_id": 36439508, "comment_id": 60552171, "body": "If there is an error at line 14, please mark the line 14 for us."}], "answers": [{"comments": [{"owner": {"reputation": 925, "user_id": 394419, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4011ba172b1615b0265340e4d88ace2a?s=128&d=identicon&r=PG", "display_name": "Craig", "link": "https://stackoverflow.com/users/394419/craig"}, "edited": false, "score": 0, "creation_date": 1459906267, "post_id": 36439715, "comment_id": 60494323, "body": "So that works (as in no more error) but seems to just output the whole json file"}, {"owner": {"reputation": 925, "user_id": 394419, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4011ba172b1615b0265340e4d88ace2a?s=128&d=identicon&r=PG", "display_name": "Craig", "link": "https://stackoverflow.com/users/394419/craig"}, "edited": false, "score": 0, "creation_date": 1459906850, "post_id": 36439715, "comment_id": 60494461, "body": "Ok, I had misconfigured the actual script tags. This works perfectly. Thanks."}], "tags": [], "owner": {"reputation": 11044, "user_id": 1594980, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/d8b0d9cdd77d0b6b9765d45fdf80632c?s=128&d=identicon&r=PG", "display_name": "Jiri Kremser", "link": "https://stackoverflow.com/users/1594980/jiri-kremser"}, "is_accepted": true, "score": 1, "last_activity_date": 1459904928, "creation_date": 1459904928, "answer_id": 36439715, "question_id": 36439508, "link": "https://stackoverflow.com/questions/36439508/rails-helper-in-middleman-no-implicit-conversion-of-symbol-into-string/36439715#36439715", "title": "Rails helper in Middleman `no implicit conversion of Symbol into String`", "body": "<p>it looks like it fails on this line:</p>\n\n<pre><code> asset_path = type ? File.join(GULP_CONFIG['tasks'][type]['dest'], path) : path\n</code></pre>\n\n<p>The <code>File.join</code> method expect strings so either the <code>GULP_CONFIG['tasks'][type]['dest']</code> or <code>path</code> is not a string but a symbol. Try something like this:</p>\n\n<pre><code>asset_path = type ? File.join(GULP_CONFIG['tasks'][type.to_s]['dest'].to_s, path.to_s) : path.to_s\n</code></pre>\n"}], "owner": {"reputation": 925, "user_id": 394419, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4011ba172b1615b0265340e4d88ace2a?s=128&d=identicon&r=PG", "display_name": "Craig", "link": "https://stackoverflow.com/users/394419/craig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 275, "favorite_count": 0, "accepted_answer_id": 36439715, "answer_count": 1, "score": 0, "last_activity_date": 1460023314, "creation_date": 1459903327, "last_edit_date": 1460023314, "question_id": 36439508, "link": "https://stackoverflow.com/questions/36439508/rails-helper-in-middleman-no-implicit-conversion-of-symbol-into-string", "title": "Rails helper in Middleman `no implicit conversion of Symbol into String`", "body": "<p>I'm porting the Gulp Starter Rails helpers to Middleman but am getting the following error: </p>\n\n<p><code>no implicit conversion of Symbol into String</code> related to <code>Ruby /middleman-gulp-starter/helpers/gulp_asset_helper.rb: in join, line 14</code></p>\n\n<p>I'm not sure of the differences between Rails and Middleman to understand why this isnt working.</p>\n\n<pre><code>module GulpAssetHelper\n  def gulp_asset_path(path, type = nil)\n    rev_manifest = nil\n\n    # In development, check for the manifest every time\n    if !config[:build]\n      rev_manifest = JSON.parse(File.read(REV_MANIFEST_PATH)) if File.exist?(REV_MANIFEST_PATH)\n    # In production, use the manifest cached in initializers/gulp.rb\n    else\n      rev_manifest = REV_MANIFEST if defined?(REV_MANIFEST)\n    end\n\n    root = GULP_CONFIG['root']['dest'].gsub(/(.*)build\\//, '/')\n    asset_path = type ? File.join(GULP_CONFIG['tasks'][type]['dest'], path) : path # LINE 14\n    asset_path = rev_manifest[asset_path] if rev_manifest\n    asset_path = File.join(root, asset_path)\n    File.absolute_path(asset_path, '/')\n  end\n\n  def gulp_js_path(path)\n    gulp_asset_path(path, 'js')\n    GULP_CONFIG\n  end\n\n  def gulp_css_path(path)\n    gulp_asset_path(path, 'css')\n  end\n\n  def gulp_image_path(path)\n    gulp_asset_path(path, 'images')\n  end\n\n  def sprite(id, classes = \"\", viewBox = \"0 0 24 24\")\n    \"&lt;svg class='sprite -#{id} #{classes}' aria-hidden='true' preserveAspectRatio viewBox='#{viewBox}'&gt;&lt;use xlink:href='#{gulp_image_path('sprites.svg')}##{id}' /&gt;&lt;/use&gt;&lt;/svg&gt;\".html_safe\n  end\nend\n</code></pre>\n\n<p>The rev and config import file:</p>\n\n<pre><code>GULP_CONFIG = JSON.parse(File.read('gulpfile.js/config.json'))\nREV_MANIFEST_PATH = File.join(GULP_CONFIG['root']['dest'], 'rev-manifest.json')\n\nif File.exist?(REV_MANIFEST_PATH)\n  REV_MANIFEST = JSON.parse(File.read(REV_MANIFEST_PATH))\nend\n</code></pre>\n\n<p>Example <code>rev-manifest.json</code> file:</p>\n\n<pre><code>{\n  \"images/middleman-logo.svg\": \"images/middleman-logo-2e3d8b5ad1.svg\",\n  \"javascripts/all.js\": \"javascripts/all-92681c51e741e0e1370c.js\",\n  \"stylesheets/site.css\": \"stylesheets/site-9b25f1d1ac.css\"\n}\n</code></pre>\n\n<p>I've output the contents of the gulpfile so know that it is being read correctly.</p>\n\n<p>You can find the full repo here: <a href=\"https://github.com/craigmdennis/middleman-gulp-starter/tree/4_asset-helpers\" rel=\"nofollow\">https://github.com/craigmdennis/middleman-gulp-starter/tree/4_asset-helpers</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "edited": false, "score": 1, "creation_date": 1459900984, "post_id": 36439088, "comment_id": 60492994, "body": "Don&#39;t you want <code>$?</code> and not <code>$!</code>?"}, {"owner": {"reputation": 921, "user_id": 3614753, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/592ffcc80ed487a070be46d2c68ab24e?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lepkin", "link": "https://stackoverflow.com/users/3614753/simon-lepkin"}, "reply_to_user": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "edited": false, "score": 0, "creation_date": 1459901300, "post_id": 36439088, "comment_id": 60493071, "body": "Good catch, edited the mistake away, thanks."}, {"owner": {"reputation": 6272, "user_id": 127508, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/ptOi1.jpg?s=128&g=1", "display_name": "Istvan", "link": "https://stackoverflow.com/users/127508/istvan"}, "edited": false, "score": 0, "creation_date": 1459943342, "post_id": 36439088, "comment_id": 60513100, "body": "What you are missing is a pull request and a reference to the Ruby devs how to handle errors in Unix like operating systems and how to set the exit value of an CLI application like rake :)"}, {"owner": {"reputation": 921, "user_id": 3614753, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/592ffcc80ed487a070be46d2c68ab24e?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lepkin", "link": "https://stackoverflow.com/users/3614753/simon-lepkin"}, "edited": false, "score": 0, "creation_date": 1459958548, "post_id": 36439088, "comment_id": 60525289, "body": "I think this is a problem at the Rails level, not the Ruby level: when a generic raketask fails, it gives a nonzero exit code."}, {"owner": {"reputation": 921, "user_id": 3614753, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/592ffcc80ed487a070be46d2c68ab24e?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lepkin", "link": "https://stackoverflow.com/users/3614753/simon-lepkin"}, "reply_to_user": {"reputation": 6272, "user_id": 127508, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/ptOi1.jpg?s=128&g=1", "display_name": "Istvan", "link": "https://stackoverflow.com/users/127508/istvan"}, "edited": false, "score": 0, "creation_date": 1460138478, "post_id": 36439088, "comment_id": 60619536, "body": "@Istvan: Perhaps I&#39;m missing your point. Did you mean to imply that this is a genuine bug, and that I should submit a fix to Rails? I had assumed there was a good reason for this, that I was overlooking!"}, {"owner": {"reputation": 6272, "user_id": 127508, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/ptOi1.jpg?s=128&g=1", "display_name": "Istvan", "link": "https://stackoverflow.com/users/127508/istvan"}, "edited": false, "score": 0, "creation_date": 1460354821, "post_id": 36439088, "comment_id": 60683692, "body": "I was kind of kidding, you can try to fix it though. What I was trying to say that they do not care about this issue a lot."}], "answers": [{"tags": [], "owner": {"reputation": 6147, "user_id": 4281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6861ac55790144837a856f0559826e97?s=128&d=identicon&r=PG", "display_name": "Kris Kumler", "link": "https://stackoverflow.com/users/4281/kris-kumler"}, "is_accepted": true, "score": 1, "last_activity_date": 1497561228, "last_edit_date": 1497561228, "creation_date": 1460577984, "answer_id": 36608527, "question_id": 36439088, "link": "https://stackoverflow.com/questions/36439088/why-does-rake-dbdrop-have-a-0-exit-status-and-raise-no-error-when-it-fails/36608527#36608527", "title": "Why does `rake db:drop` have a 0 exit status, and raise no error, when it fails?", "body": "<p>This is an issue fixed in Rails 5: <a href=\"https://github.com/rails/rails/pull/19924\" rel=\"nofollow noreferrer\">PR #19924 Explicitly exit with status \"1\" for create and drop failures</a></p>\n\n<p>Best solution would be to use Rails 5. :) Otherwise, you're stuck with one of:</p>\n\n<ul>\n<li>Check that the db was dropped another way (could miss other errors).</li>\n<li>Capture stderr output and inspect</li>\n<li>Monkeypatch ActiveRecord::Tasks::DatabaseTasks::drop</li>\n</ul>\n"}], "owner": {"reputation": 921, "user_id": 3614753, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/592ffcc80ed487a070be46d2c68ab24e?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Lepkin", "link": "https://stackoverflow.com/users/3614753/simon-lepkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 599, "favorite_count": 3, "accepted_answer_id": 36608527, "answer_count": 1, "score": 9, "last_activity_date": 1497561228, "creation_date": 1459900451, "last_edit_date": 1459901293, "question_id": 36439088, "link": "https://stackoverflow.com/questions/36439088/why-does-rake-dbdrop-have-a-0-exit-status-and-raise-no-error-when-it-fails", "title": "Why does `rake db:drop` have a 0 exit status, and raise no error, when it fails?", "body": "<p>I was surprised to discover that, when <code>rake db:drop</code> (and assumedly Rails' other built-in raketasks) fails, the bash status code is 0.</p>\n\n<pre><code>$ rake db:drop\ncould not connect to server: Connection refused\nIs the server running on host \"localhost\" (::1) and accepting\nTCP/IP connections on port 5432?\n...\n$ echo $?\n0\n</code></pre>\n\n<p>Perhaps more surprising, it doesn't even raise an error when the task is invoked from within Rails.</p>\n\n<pre><code>2.3.0 :001 &gt; begin\n2.3.0 :002 &gt;   Rake::Task[\"db:drop\"].invoke\n2.3.0 :003 &gt;   puts \"After raketask invoked\"\n2.3.0 :004 &gt; end\ncould not connect to server: Connection refused\nIs the server running on host \"localhost\" (::1) and accepting\nTCP/IP connections on port 5432?\n...\nAfter raketask invoked\n</code></pre>\n\n<p>Is this intentional? Digging into the <a href=\"https://github.com/rails/rails/blob/master/activerecord/lib/active_record/connection_adapters/postgresql/schema_statements.rb#L68\">source</a>, this seems to simply call <code>execute \"DROP DATABASE IF EXISTS #{quote_table_name(name)}\"</code>. This should <a href=\"https://github.com/rails/rails/blob/a953f7f674997517c5b9580335dda3338840aa84/activerecord/lib/active_record/connection_adapters/postgresql/database_statements.rb#L152\">raise an error</a> on failure. What am I missing?</p>\n"}, {"tags": ["arrays", "ruby", "regex", "sorting", "polynomial-math"], "comments": [{"owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "edited": false, "score": 0, "creation_date": 1459898733, "post_id": 36438736, "comment_id": 60492352, "body": "The main problem is when the coef is 1 (or 0) and isn&#39;t written."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1459919426, "post_id": 36438777, "comment_id": 60497988, "body": "This doesn&#39;t work for <code>str = &quot;2x^3-x^2+x-42&quot;</code>. <code>str.split(&#47;x(?:\\^\\d+)?\\+?&#47;) #=&gt; =&gt; [&quot;2&quot;, &quot;-&quot;, &quot;&quot;, &quot;-42&quot;]</code>. You of course do a post-processing step to convert &quot;-&quot; to &quot;-1&quot; and &quot;&quot; to &quot;1&quot;."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2705585"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1460088544, "post_id": 36438777, "comment_id": 60590968, "body": "@CarySwoveland: True that. A better solution is welcomed."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2705585"}, "is_accepted": true, "score": 2, "last_activity_date": 1459899844, "last_edit_date": 1495540360, "creation_date": 1459898560, "answer_id": 36438777, "question_id": 36438736, "link": "https://stackoverflow.com/questions/36438736/ruby-regex-to-capture-any-numerical-characters-in-a-string/36438777#36438777", "title": "Ruby Regex To Capture Any Numerical Characters In a String", "body": "<p>If you take each equation as a string then this regex will select only coefficients.</p>\n\n<p><strong>Regex:</strong> <code>-?\\d+(?=x|$)</code></p>\n\n<p><strong><a href=\"https://regex101.com/r/kN2qE6/1\" rel=\"nofollow noreferrer\">Regex101 Demo</a></strong></p>\n\n<hr>\n\n<p><strong>Alternative solution</strong></p>\n\n<p>You can split on following regex to extract only coefficients.</p>\n\n<p><strong>Regex:</strong> <code>x(?:\\^\\d+)?\\+?</code></p>\n\n<p><strong><a href=\"https://regex101.com/r/kN2qE6/3\" rel=\"nofollow noreferrer\">Regex101 Demo</a></strong></p>\n\n<hr>\n\n<p>Also check this <a href=\"https://stackoverflow.com/questions/36197468/parsing-a-mathematical-string-expression-in-python-using-regular-expressions/36198028\">answer</a> for <em>Parsing a mathematical string expression.</em></p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1459919486, "last_edit_date": 1459919486, "creation_date": 1459918696, "answer_id": 36441868, "question_id": 36438736, "link": "https://stackoverflow.com/questions/36438736/ruby-regex-to-capture-any-numerical-characters-in-a-string/36441868#36441868", "title": "Ruby Regex To Capture Any Numerical Characters In a String", "body": "<p>I assume the variable is a lowercase letter and there are no spaces (though spaces can be easily removed in a preprocessing step).</p>\n\n<p>Suppose:</p>\n\n<pre><code>str = \"2x^3-x^2+3x-42\"\n</code></pre>\n\n<p>We would like to extract these coefficients:</p>\n\n<pre><code>[2, -1, 3, -42]\n</code></pre>\n\n<p>This is complicated by the fact that \"-1\" is implicit. Rather than attempting to deal with this complication in a single regex, it's easier to first convert the implicit \"1\"s to explicit \"1\"s. We can do that as follows:</p>\n\n<pre><code>r0 = /\n     (?&lt;=\\A|\\+|\\-) # match beginning of string, \"+\" or \"-\" in a positive lookbehind\n     [a-z]         # match a lowercase letter in a positive lookahead\n     /x            # Free-spacing regex definition mode\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>\"x^3-x^2+x-42\".gsub(r0) { |s| \"1\" + s }\n  #=&gt; \"1x^3-1x^2+1x-42\" \n</code></pre>\n\n<p>We are now ready to extract the coefficients.</p>\n\n<pre><code>r1 = /\n    (?:\\A|[^^-])  # match beginning of the string or any character other than\n                  # carat or hyphen in a non-capture group\n    \\K            # forget everything match so far\n    \\-?           # optionally match a hyphen\n    \\d+           # match &gt;= 0 digits\n    /x\n\n\"2x^3-4x^2+5x-42\".scan(r1)\n  #=&gt; [\"2\", \"-4\", \"5\", \"-42\"]\n</code></pre>\n\n<p>Now combine the two steps:</p>\n\n<pre><code>\"2y^3-y^2+y-42\".gsub(r0) { |s| \"1\" + s }.scan(r1)\n  #=&gt; [\"2\", \"-1\", \"1\", \"-42\"] \n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 5310492, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/86e136eeef8dace4fa7f13192944b3fd?s=128&d=identicon&r=PG&f=1", "display_name": "Leshy", "link": "https://stackoverflow.com/users/5310492/leshy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 36438777, "answer_count": 2, "score": 0, "last_activity_date": 1459919486, "creation_date": 1459898314, "last_edit_date": 1459901094, "question_id": 36438736, "link": "https://stackoverflow.com/questions/36438736/ruby-regex-to-capture-any-numerical-characters-in-a-string", "title": "Ruby Regex To Capture Any Numerical Characters In a String", "body": "<p>So, I've done a lot of research, and looked at tons of regex documentation, guides, and regex generators, but nothing I have found can tell me how to do this (not even the links in the StackOverflow popup box that appeared when I typed \"regex\" into the \"Title\" field for this question).</p>\n\n<p>So basically, I'm writing a math program (in Ruby) to solve a very specific type of math problem. There will be two inputs that take strings (via gets.chomp), and one string will take the form of </p>\n\n<pre><code>2x^3+4x^2+5x-42\n</code></pre>\n\n<p>Now, the exponents( the ^3 and ^2) will stay the same, and these can be ignored by the regex, as can any addition and subtraction signs, and any \"x\" characters. </p>\n\n<p>So in essence, I need to figure out how to write a regex that can sort out any numerical characters in a string unless they are preceded by an \"^\" (which denotes an exponent), and push them out into an array. (The strings of numbers in the arrays will be parsed into numerical values later)</p>\n\n<p>So, for example, the ideal regex would take something like </p>\n\n<pre><code>8x^3-4x^2+3x-17\n</code></pre>\n\n<p>and return an array that contains the coefficients from the equation</p>\n\n<pre><code>[\"8\", \"-4\", \"3\", \"-17\"]\n</code></pre>\n\n<p>It is important to retain the negative/subtraction signs where they are present. Another example:</p>\n\n<p>It would take</p>\n\n<pre><code>-6x^3+7x^2-5x+9\n</code></pre>\n\n<p>and return </p>\n\n<pre><code>[\"-6\", \"7\", \"-5\", \"9\"]\n</code></pre>\n\n<p>Any ideas how I might go about doing this? Would it perhaps be easier to apply two separate regexes? Ruby answers only, please.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "smart-listing"], "comments": [{"owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "edited": false, "score": 0, "creation_date": 1459901233, "post_id": 36438527, "comment_id": 60493054, "body": "Are you sure there is a row in your database that is a beer of both types?"}, {"owner": {"reputation": 137, "user_id": 5091603, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/199aa6a5820e394d2d58eb334c563bf4?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/5091603/tim"}, "reply_to_user": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "edited": false, "score": 0, "creation_date": 1459901484, "post_id": 36438527, "comment_id": 60493137, "body": "@shelvacu no I don&#39;t. But I want to be able to tick both &quot;Ales&quot; and &quot;Cream&quot; beer types and it will display all beers that have beer_type &quot;Ales&quot; and all beers that are &quot;Cream&quot;. Not filtering beer with &quot;Ales and Cream&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 5091603, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/199aa6a5820e394d2d58eb334c563bf4?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/5091603/tim"}, "edited": false, "score": 0, "creation_date": 1459990168, "post_id": 36460053, "comment_id": 60541131, "body": "hmm I get what you what you mean. Thanks! However I&#39;m not sure what I&#39;m doing wrong but its not working. Can you point me further to the right direction ?"}], "tags": [], "owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "is_accepted": false, "score": 0, "last_activity_date": 1459969178, "creation_date": 1459969178, "answer_id": 36460053, "question_id": 36438527, "link": "https://stackoverflow.com/questions/36438527/smart-listing-gem-sorting/36460053#36460053", "title": "Smart_listing Gem sorting", "body": "<p>You want OR not AND. When you specify multiple <code>where</code> clauses in  a chain, rails defaults to AND.</p>\n\n<pre><code>q = Beer.where(true)\nq = q.or.where('beer_type ILIKE?', \"%ales%\")  if params[:with_beer_type_ales] == \"1\"\nq = q.or.where('beer_type ILIKE?', \"%cream%\") if params[:with_beer_type_cream] == \"1\"\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 5091603, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/199aa6a5820e394d2d58eb334c563bf4?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/5091603/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 516, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1459969178, "creation_date": 1459897016, "question_id": 36438527, "link": "https://stackoverflow.com/questions/36438527/smart-listing-gem-sorting", "title": "Smart_listing Gem sorting", "body": "<p>Im integrating <a href=\"https://github.com/Sology/smart_listing\" rel=\"nofollow\">Smart_listing</a> gem onto my Rails App. I have a <strong><em>Beer table</em></strong> in my database and a <strong><em>beer_type</em></strong> column. Right now im trying to set up a sorting function where Users can filter different types of beer. Similar to this functionality <a href=\"http://sf.hopsy.beer/menu\" rel=\"nofollow\">example</a>.</p>\n\n<p>Right now it will filter each one type of beer perfectly. However whenever there is more than 1 beer type checked, it would not display the beer types together.</p>\n\n<blockquote>\n  <p>product.rb</p>\n</blockquote>\n\n<pre><code>scope :with_beer_type_ales, -&gt; (product) { where('beer_type ILIKE?', \"%ales%\") }\nscope :with_beer_type_cream, -&gt; (product) { where('beer_type ILIKE?', \"%cream%\") }\nscope :like, -&gt;(args) { where(\"name ILIKE? OR beer_type ILIKE? OR description ILIKE?\", \"%#{args}%\", \"%#{args}%\", \"%#{args}%\")}\n</code></pre>\n\n<blockquote>\n  <p>products_controller.rb</p>\n</blockquote>\n\n<pre><code>def index\n products_scope = Product.all\n # Make users initally sorted by name ascending\n products_scope = products_scope.like(params[:filter]) if params[:filter]\n\n\n products_scope=products_scope.with_beer_type_ales(params[:with_beer_type_ales]) if params[:with_beer_type_ales] == \"1\"\nproducts_scope = products_scope.with_beer_type_cream(params[:with_beer_type_cream]) if  params[:with_beer_type_cream] == \"1\"\n\n @products = smart_listing_create :products, \n                       products_scope, \n                       partial: \"products/list\",\n                       page_sizes: [10, 20, 30], \n                       default_sort: {name: \"asc\"}\nend\n</code></pre>\n\n<blockquote>\n  <p>index.html.erb</p>\n</blockquote>\n\n<pre><code>&lt;%= smart_listing_controls_for(:products, {class: \"form-inline text-left\"}) do %&gt;\n     &lt;div class=\"form-group filter input-append\" id=\"search\"&gt;\n        &lt;%= text_field_tag :filter, '', class: \"search form-control\",  \n          placeholder: \"Search...\", autocomplete: :off %&gt;\n          &lt;button class=\"btn btn-primary disabled\" type=\"&lt;%= :submit %&gt;\"&gt;\n            &lt;span class=\"glyphicon glyphicon-search\"&gt;&lt;/span&gt;\n          &lt;/button&gt;\n      &lt;/div&gt;\n\n        &lt;h4&gt;Sort By Type:&lt;/h4&gt;\n        &lt;ul&gt;\n            &lt;li class=\"checkbox\"&gt;\n                &lt;label class=\"checkbox inline\"&gt;\n              &lt;%= hidden_field_tag :with_beer_type_ales, \"0\" %&gt;\n              &lt;%= check_box_tag :with_beer_type_ales %&gt; Ales\n            &lt;/label&gt;\n            &lt;/li&gt;\n            &lt;li&gt;\n                &lt;label class=\"checkbox inline\"&gt;\n                &lt;%= hidden_field_tag :with_beer_type_cream, \"0\" %&gt;\n              &lt;%= check_box_tag :with_beer_type_cream %&gt; Cream\n            &lt;/label&gt;\n            &lt;/li&gt;\n        &lt;/ul&gt;\n    &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "linux", "rvm", "redhat"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1459899536, "post_id": 36438395, "comment_id": 60492617, "body": "It looks like you&#39;re having connectivity problems. RVM doesn&#39;t require <code>sudo</code>, you can install it as a regular user for yourself. It&#39;s important to note that installing it as root via <code>sudo</code> installs it system wide."}, {"owner": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1459901335, "post_id": 36438395, "comment_id": 60493083, "body": "@tadman I don&#39;t think it&#39;s connectivity problems, see: <a href=\"http://stackoverflow.com/questions/16703647/why-curl-return-and-error-23-failed-writing-body\" title=\"why curl return and error 23 failed writing body\">stackoverflow.com/questions/16703647/&hellip;</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 3655, "user_id": 1267729, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1e487a17a60371229131bb99b7852a48?s=128&d=identicon&r=PG", "display_name": "Shelvacu", "link": "https://stackoverflow.com/users/1267729/shelvacu"}, "edited": false, "score": 0, "creation_date": 1459959723, "post_id": 36438395, "comment_id": 60526117, "body": "@shelvacu That&#39;s interesting insight, but why would the script be crashing out like that?"}], "owner": {"reputation": 8918, "user_id": 1742777, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/ff60602db4c570ec0e48b22eb13f6956?s=128&d=identicon&r=PG", "display_name": "Saqib Ali", "link": "https://stackoverflow.com/users/1742777/saqib-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 610, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1459896315, "creation_date": 1459896315, "question_id": 36438395, "link": "https://stackoverflow.com/questions/36438395/how-to-install-ruby-version-manager-on-red-hat-enterprise-linux", "title": "How to install Ruby Version Manager on Red Hat Enterprise Linux?", "body": "<p>I'm trying to install Ruby Version Manager (RVM) on my Red Hat Enterprise Linux machine which is running in the AWS cloud by following <a href=\"https://rvm.io/rvm/install\" rel=\"nofollow\">these instructions</a>.</p>\n\n<p>But they are not working. Here is what happens:</p>\n\n<pre><code>$ gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3\ngpg: requesting key D39DC0E3 from hkp server keys.gnupg.net\ngpg: key D39DC0E3: \"Michal Papis (RVM signing) &lt;mpapis@gmail.com&gt;\" not changed\ngpg: Total number processed: 1\ngpg:              unchanged: 1\n\n\n$ \\curl -sSL https://get.rvm.io | bash -s stable --ruby\nDownloading https://github.com/rvm/rvm/archive/1.27.0.tar.gz\ncurl: (23) Failed writing body (0 != 783)\n\nCould not download 'https://github.com/rvm/rvm/archive/1.27.0.tar.gz'.\n  curl returned status '23'.\n\nDownloading https://bitbucket.org/mpapis/rvm/get/1.27.0.tar.gz\ncurl: (23) Failed writing body (0 != 1038)\n\nCould not download 'https://bitbucket.org/mpapis/rvm/get/1.27.0.tar.gz'.\n  curl returned status '23'.\n</code></pre>\n\n<p>The instructions are not very good. It's not clear to me if I need to do <code>sudo</code> or not. And it doesn't show me what the response to the commands would be (for the happy path).</p>\n\n<p>Can someone please explain to me how I can get RVM installed? Do I first have to install Ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1459896520, "post_id": 36438346, "comment_id": 60491628, "body": "Thanks a lot, my friend. I opted for the first possibility and it worked really fine. I&#39;ll accept your answer as soon as possible, because SO imposes a delay of ten minutes or so before accepting."}, {"owner": {"reputation": 1704, "user_id": 3723506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wHveY.jpg?s=128&g=1", "display_name": "Rashmirathi", "link": "https://stackoverflow.com/users/3723506/rashmirathi"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 1, "creation_date": 1459897072, "post_id": 36438346, "comment_id": 60491824, "body": "I am glad I could help."}], "tags": [], "owner": {"reputation": 1704, "user_id": 3723506, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wHveY.jpg?s=128&g=1", "display_name": "Rashmirathi", "link": "https://stackoverflow.com/users/3723506/rashmirathi"}, "is_accepted": true, "score": 2, "last_activity_date": 1459896072, "creation_date": 1459896072, "answer_id": 36438346, "question_id": 36438307, "link": "https://stackoverflow.com/questions/36438307/failed-testing-a-hash-with-rspec-rails/36438346#36438346", "title": "Failed testing a hash with rspec-rails", "body": "<p><code>response.body</code> returns a serialized json string whereas <code>{'version':'0.0.1'}</code> is a <code>Hash</code>.</p>\n\n<p>Your expectation should be <code>expect(response.body).to eq({'version':'0.0.1'}.to_json)</code></p>\n\n<p>or</p>\n\n<p><code>expect(JSON.parse(response.body)).to eq({'version':'0.0.1'})</code></p>\n"}], "owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 36438346, "answer_count": 1, "score": -1, "last_activity_date": 1459896072, "creation_date": 1459895881, "question_id": 36438307, "link": "https://stackoverflow.com/questions/36438307/failed-testing-a-hash-with-rspec-rails", "title": "Failed testing a hash with rspec-rails", "body": "<p>I'm building a simple API and one of the features is the fact it must inform the users its version. Then I have a Api controller with a version method</p>\n\n<pre><code>class ApiController &lt; ApplicationController\n  def version\n    render :json =&gt; {version: '0.0.1'}\n  end\nend\n</code></pre>\n\n<p>and I also have a route in my <strong>config/routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n  root 'site#index'\n  get 'api/version'\nend\n</code></pre>\n\n<p>I'm using Rspec and this is the my failing test</p>\n\n<pre><code>it 'returns the correct version number (0.0.1 by now)' do\n  get :version\n  expect(response.body).to eq({'version':'0.0.1'})\nend\n</code></pre>\n\n<p>It happens that my test fails (<a href=\"http://imgur.com/7MPL8RO\" rel=\"nofollow\">http://imgur.com/7MPL8RO</a>)</p>\n\n<pre><code>1) ApiController GET #version returns the correct version number (0.0.1 by now)\nFailure/Error: expect(response.body).to eq(a)\n\n   expected: {:version=&gt;\"0.0.1\"}\n        got: \"{\\\"version\\\":\\\"0.0.1\\\"}\"\n</code></pre>\n\n<p>What is the point here? Should I test against response.body.to_s or something like that? </p>\n\n<p>It seems I'm missing some point, probably an easy one.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 3915, "user_id": 1166183, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/df7b096a1025e50293195fde727fef7f?s=128&d=identicon&r=PG", "display_name": "Ashish Bista", "link": "https://stackoverflow.com/users/1166183/ashish-bista"}, "edited": false, "score": 1, "creation_date": 1459895251, "post_id": 36438159, "comment_id": 60491136, "body": "You have to define <code>@article</code> in your controller."}], "answers": [{"tags": [], "owner": {"reputation": 404, "user_id": 1888553, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/WznXZ.jpg?s=128&g=1", "display_name": "Derrell Durrett", "link": "https://stackoverflow.com/users/1888553/derrell-durrett"}, "is_accepted": false, "score": 1, "last_activity_date": 1459895304, "creation_date": 1459895304, "answer_id": 36438203, "question_id": 36438159, "link": "https://stackoverflow.com/questions/36438159/ruby-on-rails-undefined-method-errors-for-nilnilclass/36438203#36438203", "title": "ruby on rails undefined method `errors&#39; for nil:NilClass", "body": "<p><code>@article</code> doesn't exist. It's probably expected that your controller is setting this variable, and you haven't done that (or it's failing to get a value for some other reason).</p>\n\n<p>Note that the places <code>errors</code> exists in your code snippet are method calls (<code>x.y</code> implies <code>y</code> is a method on the object <code>x</code> in Ruby). This is how to identify this problem in the future.</p>\n"}], "owner": {"reputation": 55, "user_id": 5931828, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/5b2a4c96f15fa14ee2b0db09664aeeea?s=128&d=identicon&r=PG&f=1", "display_name": "stanley wendo", "link": "https://stackoverflow.com/users/5931828/stanley-wendo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 162, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459895304, "creation_date": 1459895097, "question_id": 36438159, "link": "https://stackoverflow.com/questions/36438159/ruby-on-rails-undefined-method-errors-for-nilnilclass", "title": "ruby on rails undefined method `errors&#39; for nil:NilClass", "body": "<p>currently working on my project.and<br>\ni'm trying to create an existing article page but i keep getting this message\n    undefined method `errors' for nil: Nil Class. currently working on my project\n    Edit existing article</p>\n\n<pre><code>&lt;% if@article.errors.any? %&gt;\n&lt;h&gt;The following errors prevented the article from getting created&lt;/h&gt;\n&lt;ul&gt;\n&lt;%@article.errors.full_messages.each do  |msg| %\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "thrift"], "comments": [{"owner": {"reputation": 3915, "user_id": 1166183, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/df7b096a1025e50293195fde727fef7f?s=128&d=identicon&r=PG", "display_name": "Ashish Bista", "link": "https://stackoverflow.com/users/1166183/ashish-bista"}, "edited": false, "score": 0, "creation_date": 1459895133, "post_id": 36438055, "comment_id": 60491101, "body": "Have installed <code>boost</code> and <code>libevent</code>? If not, install them with <code>brew install boost</code> and <code>brew install libevent</code>."}, {"owner": {"reputation": 6345, "user_id": 2917742, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/83796d54d75155fde6134033970c001f?s=128&d=identicon&r=PG", "display_name": "The Nomad", "link": "https://stackoverflow.com/users/2917742/the-nomad"}, "reply_to_user": {"reputation": 3915, "user_id": 1166183, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/df7b096a1025e50293195fde727fef7f?s=128&d=identicon&r=PG", "display_name": "Ashish Bista", "link": "https://stackoverflow.com/users/1166183/ashish-bista"}, "edited": false, "score": 0, "creation_date": 1459895461, "post_id": 36438055, "comment_id": 60491218, "body": "@AshishBista just installed both and ran it again, but same issue."}, {"owner": {"reputation": 2559, "user_id": 80266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/841e6bfb3e7bb9ac4277db240dfca35d?s=128&d=identicon&r=PG", "display_name": "giladbu", "link": "https://stackoverflow.com/users/80266/giladbu"}, "reply_to_user": {"reputation": 12067, "user_id": 499466, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3cc0612ec9a2b6af96500cc6e4bfdc7c?s=128&d=identicon&r=PG", "display_name": "JensG", "link": "https://stackoverflow.com/users/499466/jensg"}, "edited": false, "score": 0, "creation_date": 1460010312, "post_id": 36438055, "comment_id": 60547467, "body": "@JensG this is not a duplicate. I believe it relates to an issue described in <a href=\"https://bugs.freebsd.org/bugzilla/show_bug.cgi?id=202660\" rel=\"nofollow noreferrer\">bugs.freebsd.org/bugzilla/show_bug.cgi?id=202660</a> with ruby.h on ruby versions &lt; 2.2"}, {"owner": {"reputation": 1556, "user_id": 6156030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab58120061222262e44544b199af476?s=128&d=identicon&r=PG&f=1", "display_name": "Laura Paakkinen", "link": "https://stackoverflow.com/users/6156030/laura-paakkinen"}, "edited": false, "score": 6, "creation_date": 1460040839, "post_id": 36438055, "comment_id": 60569756, "body": "The same error seems to have been present in this question <a href=\"http://stackoverflow.com/questions/36378190/cant-install-thrift-gem-on-os-x-el-capitan\">Can&#39;t install thrift gem on OS X El Capitan</a>. There is an answer suggestion in the comments, that worked for me."}, {"owner": {"reputation": 11, "user_id": 6177214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/82129898c72702aadcd01e1f5cabd4c2?s=128&d=identicon&r=PG&f=1", "display_name": "Satish", "link": "https://stackoverflow.com/users/6177214/satish"}, "edited": false, "score": 0, "creation_date": 1460272579, "post_id": 36438055, "comment_id": 60658132, "body": "Please refer the post for answer to the mentioned question : <a href=\"http://stackoverflow.com/questions/36378190/cant-install-thrift-gem-on-os-x-el-capitan\" title=\"cant install thrift gem on os x el capitan\">stackoverflow.com/questions/36378190/&hellip;</a>"}, {"owner": {"reputation": 125, "user_id": 9846711, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-4DMShwjaYSY/AAAAAAAAAAI/AAAAAAAAAAA/m7srYilxdhc/photo.jpg?sz=128", "display_name": "Piyush Singal", "link": "https://stackoverflow.com/users/9846711/piyush-singal"}, "edited": false, "score": 0, "creation_date": 1616658856, "post_id": 36438055, "comment_id": 118073066, "body": "Please try this. It worked for me.                                                                                                       <code>gem install thrift -v 0.9.3 -- --with-cppflags=\\&quot;-D_FORTIFY_SOURCE=0 -Wno-shift-negative-value\\&quot;</code>"}], "owner": {"reputation": 6345, "user_id": 2917742, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/83796d54d75155fde6134033970c001f?s=128&d=identicon&r=PG", "display_name": "The Nomad", "link": "https://stackoverflow.com/users/2917742/the-nomad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 595, "favorite_count": 3, "closed_date": 1464026715, "answer_count": 0, "score": 0, "last_activity_date": 1459894559, "creation_date": 1459894559, "question_id": 36438055, "link": "https://stackoverflow.com/questions/36438055/thrift-install-0-9-3-0-error-failed-to-build-gem-native-extension", "closed_reason": "Duplicate", "title": "Thrift install 0.9.3.0 ERROR: Failed to build gem native extension", "body": "<p>Using <strong>Ruby 2.0.0p648 (2015-12-16 revision 53162) [x86_64-darwin15.4.0]</strong></p>\n\n<p>I am trying to install <code>Thrift</code> but having issues with it</p>\n\n<pre><code>Installing thrift 0.9.3.0 with native extensions\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n    /Users/dericw/.rvm/rubies/ruby-2.0.0-p648/bin/ruby -r ./siteconf20160405-76400-1s15eu8.rb extconf.rb --with-cppflags=-D_FORTIFY_SOURCE=0\nchecking for strlcpy() in string.h... yes\ncreating Makefile\n\nmake \"DESTDIR=\" clean\n\nmake \"DESTDIR=\"\ncompiling binary_protocol_accelerated.c\ncompiling bytes.c\ncompiling compact_protocol.c\ncompact_protocol.c:442:41: error: shifting a negative signed value is undefined [-Werror,-Wshift-negative-value]\n    rb_exc_raise(get_protocol_exception(INT2FIX(-1), rb_str_new2(buf)));\n                                        ^~~~~~~~~~~\n/Users/dericw/.rvm/rubies/ruby-2.0.0-p648/include/ruby-2.0.0/ruby/ruby.h:241:48: note: expanded from macro 'INT2FIX'\n#define INT2FIX(i) ((VALUE)(((SIGNED_VALUE)(i))&lt;&lt;1 | FIXNUM_FLAG))\n                            ~~~~~~~~~~~~~~~~~~~^\ncompact_protocol.c:451:41: error: shifting a negative signed value is undefined [-Werror,-Wshift-negative-value]\n    rb_exc_raise(get_protocol_exception(INT2FIX(-1), rb_str_new2(buf)));\n                                        ^~~~~~~~~~~\n/Users/dericw/.rvm/rubies/ruby-2.0.0-p648/include/ruby-2.0.0/ruby/ruby.h:241:48: note: expanded from macro 'INT2FIX'\n#define INT2FIX(i) ((VALUE)(((SIGNED_VALUE)(i))&lt;&lt;1 | FIXNUM_FLAG))\n                            ~~~~~~~~~~~~~~~~~~~^\n2 errors generated.\nmake: *** [compact_protocol.o] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /Users/dericw/.rvm/gems/ruby-2.0.0-p648/gems/thrift-0.9.3.0 for inspection.\nResults logged to /Users/dericw/.rvm/gems/ruby-2.0.0-p648/extensions/x86_64-darwin-15/2.0.0/thrift-0.9.3.0/gem_make.out\n</code></pre>\n\n<p>I tried to using this command</p>\n\n<pre><code>gem install thrift -- --with-cppflags='-D_FORTIFY_SOURCE=0'\n</code></pre>\n\n<p>and that didn't work so I tried this one,</p>\n\n<pre><code>bundle config build.thrift --with-cppflags='-D_FORTIFY_SOURCE=0'\n</code></pre>\n\n<p>And after I try to <code>bundle install</code> it gives the same error.</p>\n\n<p>I am running this on <strong>Mac OS X El Capitan 10.11.4</strong>. Anyone know how to solve this? Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nomethoderror"], "comments": [{"owner": {"reputation": 25732, "user_id": 93311, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/hgn1T.jpg?s=128&g=1", "display_name": "Trip", "link": "https://stackoverflow.com/users/93311/trip"}, "edited": false, "score": 0, "creation_date": 1459894380, "post_id": 36437848, "comment_id": 60490796, "body": "In the backtrace, what line does the <code>NoMethodError</code> appear on?"}, {"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1459894484, "post_id": 36437848, "comment_id": 60490841, "body": "look at my answer, also this looks like close question to this <a href=\"http://stackoverflow.com/questions/36407790/rails-user-profile-page-only-accessible-to-correct-user/36407884#36407884\" title=\"rails user profile page only accessible to correct user\">stackoverflow.com/questions/36407790/&hellip;</a>"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 25732, "user_id": 93311, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/hgn1T.jpg?s=128&g=1", "display_name": "Trip", "link": "https://stackoverflow.com/users/93311/trip"}, "edited": false, "score": 0, "creation_date": 1459960261, "post_id": 36437848, "comment_id": 60526490, "body": "Clarified question @Trip. It appears for <code>@correct_user</code> in the view because <code>current_user</code> is nil"}, {"owner": {"reputation": 25732, "user_id": 93311, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/hgn1T.jpg?s=128&g=1", "display_name": "Trip", "link": "https://stackoverflow.com/users/93311/trip"}, "edited": false, "score": 0, "creation_date": 1460028753, "post_id": 36437848, "comment_id": 60559950, "body": "That last <code>html.erb</code> bit you have in there <code>if @correct_user</code> shold be your answer. It doesn&#39;t have to be <code>if</code> <code>else</code>, it can also be <code>if !@correct_user</code> and <code>if @correct_user</code>. Could you explain why you&#39;re using the word, <code>correct</code>? I still don&#39;t fully understand what you&#39;re up to here"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 25732, "user_id": 93311, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/hgn1T.jpg?s=128&g=1", "display_name": "Trip", "link": "https://stackoverflow.com/users/93311/trip"}, "edited": false, "score": 0, "creation_date": 1460058083, "post_id": 36437848, "comment_id": 60580731, "body": "I think I got it @trip. I added answer below. You were most on track :]"}], "answers": [{"tags": [], "owner": {"reputation": 2117, "user_id": 3709300, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oqNTQ.png?s=128&g=1", "display_name": "Justin", "link": "https://stackoverflow.com/users/3709300/justin"}, "is_accepted": false, "score": 0, "last_activity_date": 1459893896, "creation_date": 1459893896, "answer_id": 36437894, "question_id": 36437848, "link": "https://stackoverflow.com/questions/36437848/correct-user-without-using-current-user/36437894#36437894", "title": "correct_user without using current_user?", "body": "<p>More than likely <code>current_user</code> is returning nil, and therefore the challenges method can't run and gives you <code>NoMethodError</code></p>\n"}, {"tags": [], "owner": {"reputation": 25732, "user_id": 93311, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/hgn1T.jpg?s=128&g=1", "display_name": "Trip", "link": "https://stackoverflow.com/users/93311/trip"}, "is_accepted": false, "score": 1, "last_activity_date": 1459893912, "creation_date": 1459893912, "answer_id": 36437898, "question_id": 36437848, "link": "https://stackoverflow.com/questions/36437848/correct-user-without-using-current-user/36437898#36437898", "title": "correct_user without using current_user?", "body": "<p>Calling <code>.challenges</code> on <code>current_user</code> if <code>current_user</code> is <code>null</code> will result in your error.</p>\n\n<pre><code>def show\n  if current_user\n    @correct_user = current_user.challenges.find_by(id: params[:id])\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1459959748, "post_id": 36438013, "comment_id": 60526128, "body": "Thanks for your help! Problem is I want non-users to see the show page, but I have a conditional within the view that uses <code>&lt;% if @correct_user %&gt;</code> show stuff to user who made challenge  <code>&lt;% else %&gt;</code> show to everyone else, which would mean logged in users and non logged in users <code>&lt;% end %&gt;</code> Your answer redirects everyone away, which is what I don&#39;t want. I&#39;ll update question. Sorry for confusion!"}], "tags": [], "owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "is_accepted": false, "score": 2, "last_activity_date": 1493065281, "last_edit_date": 1493065281, "creation_date": 1459894396, "answer_id": 36438013, "question_id": 36437848, "link": "https://stackoverflow.com/questions/36437848/correct-user-without-using-current-user/36438013#36438013", "title": "correct_user without using current_user?", "body": "<p>This one should help to detect current_user is correct.</p>\n\n<pre><code>class UsersController &lt; ApplicationController    \n    before_action :set_challenge, only: :show\n    before_action :check_user, only: :show\n\n    private \n\n  def set_ challenge\n     @challenge = Challenge.find(params[:id])\n  end\n\n\n    def check_user\n      if current_user.id != @challenge.user_id\n        redirect_to root_url, alert: \"Sorry, You are not allowed to be here, Bye Bye ))\"\n      end\n    end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25732, "user_id": 93311, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/hgn1T.jpg?s=128&g=1", "display_name": "Trip", "link": "https://stackoverflow.com/users/93311/trip"}, "edited": false, "score": 1, "creation_date": 1460066129, "post_id": 36485713, "comment_id": 60584821, "body": "you could put that into a ternary if you wanted.. just stylistic rewrite <code>@correct_user = current_user ? current_user.challenges.find_by(id: params[:id]) : nil</code> . Glad you worked it out!"}], "tags": [], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "is_accepted": true, "score": 1, "last_activity_date": 1460058105, "creation_date": 1460058105, "answer_id": 36485713, "question_id": 36437848, "link": "https://stackoverflow.com/questions/36437848/correct-user-without-using-current-user/36485713#36485713", "title": "correct_user without using current_user?", "body": "<pre><code>if current_user\n  @correct_user = current_user.challenges.find_by(id: params[:id])\nelse\n  @correct_user = nil\nend\n</code></pre>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "accepted_answer_id": 36485713, "answer_count": 4, "score": 3, "last_activity_date": 1493065281, "creation_date": 1459893682, "last_edit_date": 1459959940, "question_id": 36437848, "link": "https://stackoverflow.com/questions/36437848/correct-user-without-using-current-user", "title": "correct_user without using current_user?", "body": "<p>I want people who are not logged in to be able to see the show page. Right now they get a <code>NoMethodError</code> error for <code>current_user</code>.</p>\n\n<pre><code>def show\n  @correct_user = current_user.challenges.find_by(id: params[:id])\nend\n</code></pre>\n\n<p><strong>sessions_helper</strong></p>\n\n<pre><code>  # Returns the current logged-in user (if any).\n  def current_user\n    if (user_id = session[:user_id])\n      @current_user ||= User.find_by(id: user_id)\n    elsif (user_id = cookies.signed[:user_id])\n      user = User.find_by(id: user_id)\n      if user &amp;&amp; user.authenticated?(:remember, cookies[:remember_token])\n        log_in user\n        @current_user = user\n      end\n    end\n  end\n</code></pre>\n\n<p>I use <code>@correct_user</code> because I only want to show certain things to the creator of the challenge:</p>\n\n<pre><code>&lt;% if @correct_user %&gt;\n  # show stuff to user who made challenge  \n&lt;% else %&gt;\n  # show to everyone else, which would mean logged in users and non logged in users \n&lt;% end %&gt; \n</code></pre>\n\n<p>How can I allow non-logged in users to see the show page, except for what falls within <code>@correct_user</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "oauth-2.0", "doorkeeper"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1459894804, "post_id": 36437646, "comment_id": 60490960, "body": "<code>Redirect URI must be an HTTPS&#47;SSL URI.</code> try adding <code>https:&#47;&#47;</code> to your redirect uri. You might need to install a SSH cert, depending on your platform (done automatically on heroku)."}, {"owner": {"reputation": 881, "user_id": 1011426, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4884d3a937ec7aac3df6aa3b54278111?s=128&d=identicon&r=PG", "display_name": "gregwinn", "link": "https://stackoverflow.com/users/1011426/gregwinn"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1459900465, "post_id": 36437646, "comment_id": 60492854, "body": "That worked! Thank you, if you put that as an answer I will mark it correct! I am using AWS Elastic Beanstalk for my host, looks like i will need to find a way to get the SSH cert on that."}], "answers": [{"comments": [{"owner": {"reputation": 628, "user_id": 4679332, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh3.googleusercontent.com/-6A3_vIZehYw/AAAAAAAAAAI/AAAAAAAACI0/ExTSSO1w_l4/photo.jpg?sz=128", "display_name": "Christopher Warrington", "link": "https://stackoverflow.com/users/4679332/christopher-warrington"}, "edited": false, "score": 0, "creation_date": 1546696055, "post_id": 36439371, "comment_id": 94939467, "body": "This helped solve my issue as I only wanted to disable for localhost testing of a deployed Doorkeeper app. Within the initializer @gregwinn recommends you can uncomment this line <code>force_ssl_in_redirect_uri { |uri| uri.host != &#39;localhost&#39; }</code>. That will force ssl unless it is a localhost uri."}], "tags": [], "owner": {"reputation": 881, "user_id": 1011426, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4884d3a937ec7aac3df6aa3b54278111?s=128&d=identicon&r=PG", "display_name": "gregwinn", "link": "https://stackoverflow.com/users/1011426/gregwinn"}, "is_accepted": false, "score": 5, "last_activity_date": 1459902298, "creation_date": 1459902298, "answer_id": 36439371, "question_id": 36437646, "link": "https://stackoverflow.com/questions/36437646/doorkeeper-application-not-saving/36439371#36439371", "title": "Doorkeeper Application not saving", "body": "<p>I have a solution for NON https uri's. In the doorkeeper.rb config file you have the option to set <code>force_ssl_in_redirect_uri</code> to <code>false</code>.</p>\n\n<pre><code># config/initalizers/doorkeeper.rb\n\nforce_ssl_in_redirect_uri false\n</code></pre>\n\n<p>Turns out this is not an issue but by design :)</p>\n"}, {"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 4, "last_activity_date": 1459906023, "creation_date": 1459906023, "answer_id": 36439855, "question_id": 36437646, "link": "https://stackoverflow.com/questions/36437646/doorkeeper-application-not-saving/36439855#36439855", "title": "Doorkeeper Application not saving", "body": "<p>From the following component of the error:</p>\n\n<pre><code>Redirect URI must be an HTTPS/SSL URI\n</code></pre>\n\n<p>it seems you are using a nonsecure (<code>http</code>, not <code>https</code>) endpoint for the uri. For some platforms (like Heroku), HTTPS support is automatically enabled, so placing <code>https://</code> in the uri should suffice.</p>\n\n<p>For ElasticBeanstalk, it shouldn't be a terribly cumbersome process. See <a href=\"http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/configuring-https.html\" rel=\"nofollow\">their docs</a> to get started. You'll need to purchase a SSL cert from your domain name provider and then find the option in the ElasticBeanstalk web configuration to upload and use a certificate (I think the option may be in the load balancer section). </p>\n"}], "owner": {"reputation": 881, "user_id": 1011426, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/4884d3a937ec7aac3df6aa3b54278111?s=128&d=identicon&r=PG", "display_name": "gregwinn", "link": "https://stackoverflow.com/users/1011426/gregwinn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 722, "favorite_count": 1, "accepted_answer_id": 36439855, "answer_count": 2, "score": 5, "last_activity_date": 1459906023, "creation_date": 1459892753, "last_edit_date": 1459894004, "question_id": 36437646, "link": "https://stackoverflow.com/questions/36437646/doorkeeper-application-not-saving", "title": "Doorkeeper Application not saving", "body": "<p>I have Doorkeeper working locally but once deployed to production I am getting a strange issue. I am not able to create new applications, please see below:</p>\n\n<pre><code>$&gt; app = Doorkeeper::Application.new :name =&gt; 'test', :redirect_uri =&gt; 'http://test.com'\n=&gt; #&lt;Doorkeeper::Application id: nil, name: \"test\", uid: nil, secret: nil, redirect_uri: \"http://test.com\", scopes: \"\", created_at: nil, updated_at: nil&gt;\n\n$&gt; app.save\n   (0.8ms)  BEGIN\n   (0.8ms)  BEGIN\n  Doorkeeper::Application Exists (0.7ms)  SELECT  1 AS one FROM `oauth_applications` WHERE `oauth_applications`.`uid` = BINARY '56bf468e5a1d116e3daef75ecc49b6b6ba313a9a79815b5b4683d56851880c49' LIMIT 1\n  Doorkeeper::Application Exists (0.7ms)  SELECT  1 AS one FROM `oauth_applications` WHERE `oauth_applications`.`uid` = BINARY '56bf468e5a1d116e3daef75ecc49b6b6ba313a9a79815b5b4683d56851880c49' LIMIT 1\n   (0.4ms)  ROLLBACK\n   (0.4ms)  ROLLBACK\n=&gt; false\n</code></pre>\n\n<p>The oauth_applications table is 100% empty.</p>\n\n<p>I am running this on the server (locally it works as expected), please let me know if you need any more information.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>I have also tried:</p>\n\n<pre><code>$&gt;app.save!    \n</code></pre>\n\n<p>and get the following error:</p>\n\n<pre><code>ActiveRecord::RecordInvalid: Validation failed: Redirect URI must be an HTTPS/SSL URI.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "subdomain"], "comments": [{"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1459892826, "post_id": 36437632, "comment_id": 60490113, "body": "did u configure it locally first ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5496955"}, "reply_to_user": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1459893011, "post_id": 36437632, "comment_id": 60490201, "body": "I update my question"}, {"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1459893047, "post_id": 36437632, "comment_id": 60490224, "body": "Do u have <code>daycare.no</code> domain already ?"}, {"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 1, "creation_date": 1459893320, "post_id": 36437632, "comment_id": 60490339, "body": "i have updated my post, look at that"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5496955"}, "edited": false, "score": 0, "creation_date": 1459940677, "post_id": 36437674, "comment_id": 60511091, "body": "I  do this heroku domains:add blog.example.com But when I run blog.example.com it doesn&#39;t work"}, {"owner": {"reputation": 186, "user_id": 4857693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eeb520d937140819ffa77b749d6e7eb?s=128&d=identicon&r=PG&f=1", "display_name": "polskais1", "link": "https://stackoverflow.com/users/4857693/polskais1"}, "edited": false, "score": 1, "creation_date": 1459954949, "post_id": 36437674, "comment_id": 60522485, "body": "Try logging into your Heroku dashboard on heroku.com and check if your domain is listed under the &quot;Custom Domains&quot; section. If so, your next step will be to add the DNS Target to your domain provider. The process varies depending on whoever you have purchased your domain from."}], "tags": [], "owner": {"reputation": 186, "user_id": 4857693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4eeb520d937140819ffa77b749d6e7eb?s=128&d=identicon&r=PG&f=1", "display_name": "polskais1", "link": "https://stackoverflow.com/users/4857693/polskais1"}, "is_accepted": false, "score": 1, "last_activity_date": 1459892899, "creation_date": 1459892899, "answer_id": 36437674, "question_id": 36437632, "link": "https://stackoverflow.com/questions/36437632/how-to-add-subdomains-in-heroku-in-rails/36437674#36437674", "title": "How to add subdomains in heroku in rails", "body": "<p>You can add a subdomain by using the <code>heroku domains:add</code> command.</p>\n\n<p><a href=\"https://devcenter.heroku.com/articles/custom-domains#add-a-custom-domain-with-a-subdomain\" rel=\"nofollow\">https://devcenter.heroku.com/articles/custom-domains#add-a-custom-domain-with-a-subdomain</a></p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5496955"}, "edited": false, "score": 0, "creation_date": 1459940657, "post_id": 36437678, "comment_id": 60511072, "body": "I do this heroku domains:add blog.example.com But when I run blog.example.com it doesn&#39;t work"}, {"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 1, "creation_date": 1459953120, "post_id": 36437678, "comment_id": 60521025, "body": "@haseeb 1st of all, you have to buy yr domain from domain hosters for example &#39;haseebe.com&#39; then after getting domain u have to add it to Heroku with command above like &#39;heroku domains:add haseebe.com&#39; once u add it. There link to youtube it show you everything check that one!"}], "tags": [], "owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "is_accepted": false, "score": 2, "last_activity_date": 1459893283, "last_edit_date": 1459893283, "creation_date": 1459892906, "answer_id": 36437678, "question_id": 36437632, "link": "https://stackoverflow.com/questions/36437632/how-to-add-subdomains-in-heroku-in-rails/36437678#36437678", "title": "How to add subdomains in heroku in rails", "body": "<p>As I know, you cannot choose specific ports for configure your host in Heroku, also Heroku not supports DNS. But you can add custom domains and subdomains, and from your domain hosting settings, redirecting to Heroku app. Here is little shot from youtube <a href=\"https://www.youtube.com/watch?v=sf6GhsVGcTQ\" rel=\"nofollow\">Youtube</a></p>\n\n<p>Heroku Doc says: <a href=\"https://devcenter.heroku.com/articles/custom-domains#custom-subdomains\" rel=\"nofollow\">Docs</a></p>\n\n<pre><code>$ heroku domains:add www.example.com`\nAdding www.example.com to example... done\n&gt;\n$ heroku domains:add blog.example.com`\nAdding blog.example.com to example... done\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5496955"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1111, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1459893283, "creation_date": 1459892699, "last_edit_date": 1459892992, "question_id": 36437632, "link": "https://stackoverflow.com/questions/36437632/how-to-add-subdomains-in-heroku-in-rails", "title": "How to add subdomains in heroku in rails", "body": "<p>I have an app in ruby on rails which have multiple subdomains which on localhost are like this</p>\n\n<pre><code>manager.daycare.no:3000/\nworker.daycare.no:3000/\ndaycare.no:3000/\nadmin.daycare.no:3000/\nparent.daycare.no:3000/\n</code></pre>\n\n<p>Now I want to add these on heroku. How I add these sub domains on heroku?</p>\n\n<p>My heroku-app name is <code>sufa-travels.herokuapp.com/</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1459891830, "post_id": 36437244, "comment_id": 60489593, "body": "did u try <code>sudo gem install nokogiri</code> ?"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 2, "creation_date": 1459892001, "post_id": 36437244, "comment_id": 60489682, "body": "<b>DO NOT USE SUDO</b>  Try reading the debian install tips here: <a href=\"http://www.nokogiri.org/tutorials/installing_nokogiri.html#ubuntu___debian\" rel=\"nofollow noreferrer\">nokogiri.org/tutorials/installing_nokogiri.html#ubuntu___deb&zwnj;&#8203;ian</a>.  Are you using rvm or rbenv?"}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 1, "creation_date": 1459892342, "post_id": 36437244, "comment_id": 60489864, "body": "Nokogiri already installed if you use Rails (check Gemfile.lock)"}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1459892550, "post_id": 36437244, "comment_id": 60489973, "body": "Have you tried without the --use-system-libraries?"}, {"owner": {"reputation": 3930, "user_id": 4613236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wQZcm.jpg?s=128&g=1", "display_name": "Zoran", "link": "https://stackoverflow.com/users/4613236/zoran"}, "edited": false, "score": 0, "creation_date": 1459894071, "post_id": 36437244, "comment_id": 60490653, "body": "Since you&#39;re using a debian-based distro, I would recommend going through the <a href=\"http://www.nokogiri.org/tutorials/installing_nokogiri.html\" rel=\"nofollow noreferrer\">install tutorial</a> from Nokogiri. It has a troubleshooting section on missing development header files. Hope that helps, or at least rules out another possibility :]"}, {"owner": {"reputation": 21, "user_id": 2045078, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f7ff095ba6639a9c3d06c26985fdafc2?s=128&d=identicon&r=PG", "display_name": "E. Browning", "link": "https://stackoverflow.com/users/2045078/e-browning"}, "edited": false, "score": 0, "creation_date": 1459968400, "post_id": 36437244, "comment_id": 60531549, "body": "I&#39;ve tried with and without --use-system-libraries."}], "answers": [{"tags": [], "owner": {"reputation": 3915, "user_id": 1166183, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/df7b096a1025e50293195fde727fef7f?s=128&d=identicon&r=PG", "display_name": "Ashish Bista", "link": "https://stackoverflow.com/users/1166183/ashish-bista"}, "is_accepted": false, "score": 1, "last_activity_date": 1459894135, "creation_date": 1459894135, "answer_id": 36437956, "question_id": 36437244, "link": "https://stackoverflow.com/questions/36437244/nokogiri-gem-failing-to-install/36437956#36437956", "title": "Nokogiri gem failing to install", "body": "<p>In addition to <code>libxml2</code> and <code>libxslt</code>, you also require some additional development libraries. Install them using <code>sudo apt-get install ruby-dev zlib1g-dev liblzma-dev</code>. More at <a href=\"https://github.com/sparklemotion/nokogiri.org-tutorials/blob/master/content/installing_nokogiri.md\" rel=\"nofollow\">https://github.com/sparklemotion/nokogiri.org-tutorials/blob/master/content/installing_nokogiri.md</a>.</p>\n"}], "owner": {"reputation": 21, "user_id": 2045078, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f7ff095ba6639a9c3d06c26985fdafc2?s=128&d=identicon&r=PG", "display_name": "E. Browning", "link": "https://stackoverflow.com/users/2045078/e-browning"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1087, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459894135, "creation_date": 1459891141, "question_id": 36437244, "link": "https://stackoverflow.com/questions/36437244/nokogiri-gem-failing-to-install", "title": "Nokogiri gem failing to install", "body": "<p>I'm trying to install nokogiri v 1.6.7.2 in a new rails project. I'm running Kali Linux (debian-based). Here is the stack trace:</p>\n\n<pre><code>    $ gem install nokogiri -v '1.6.7.2' -- --use-system-libraries\nBuilding native extensions with: '--use-system-libraries'\nThis could take a while...\nERROR:  Error installing nokogiri:\n    ERROR: Failed to build gem native extension.\n\n    /usr/bin/ruby2.2 -r ./siteconf20160405-3609-rdkvif.rb extconf.rb --use-system-libraries\nchecking if the C compiler accepts ... yes\nBuilding nokogiri using system libraries.\nlibxml2 version 2.6.21 or later is required!\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/usr/bin/$(RUBY_BASE_NAME)2.2\n    --help\n    --clean\n    --use-system-libraries\n    --with-zlib-dir\n    --without-zlib-dir\n    --with-zlib-include\n    --without-zlib-include=${zlib-dir}/include\n    --with-zlib-lib\n    --without-zlib-lib=${zlib-dir}/lib\n    --with-xml2-dir\n    --without-xml2-dir\n    --with-xml2-include\n    --without-xml2-include=${xml2-dir}/include\n    --with-xml2-lib\n    --without-xml2-lib=${xml2-dir}/lib\n    --with-libxml-2.0-config\n    --without-libxml-2.0-config\n    --with-pkg-config\n    --without-pkg-config\n    --with-xslt-dir\n    --without-xslt-dir\n    --with-xslt-include\n    --without-xslt-include=${xslt-dir}/include\n    --with-xslt-lib\n    --without-xslt-lib=${xslt-dir}/lib\n    --with-libxslt-config\n    --without-libxslt-config\n    --with-pkg-config\n    --without-pkg-config\n    --with-exslt-dir\n    --without-exslt-dir\n    --with-exslt-include\n    --without-exslt-include=${exslt-dir}/include\n    --with-exslt-lib\n    --without-exslt-lib=${exslt-dir}/lib\n    --with-libexslt-config\n    --without-libexslt-config\n    --with-pkg-config\n    --without-pkg-config\n\nextconf failed, exit code 1\n\nGem files will remain installed in /var/lib/gems/2.2.0/gems/nokogiri-1.6.7.2 for inspection.\nResults logged to /var/lib/gems/2.2.0/extensions/x86_64-linux/2.2.0/nokogiri-1.6.7.2/gem_make.out\n</code></pre>\n\n<p>I've checked I have libxml2 installed:</p>\n\n<pre><code>apt-get install libxml2\nReading package lists... Done\nBuilding dependency tree       \nReading state information... Done\nlibxml2 is already the newest version (2.9.3+dfsg1-1).\n0 upgraded, 0 newly installed, 0 to remove and 0 not upgraded.\n</code></pre>\n\n<p>And I saw in other threads to try using the --use-sytem-libraries flag, but that still causes the same error. What am I missing?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["arrays", "ruby", "scripting"], "answers": [{"tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": true, "score": 1, "last_activity_date": 1459892170, "last_edit_date": 1459892170, "creation_date": 1459891227, "answer_id": 36437269, "question_id": 36437220, "link": "https://stackoverflow.com/questions/36437220/appending-to-the-same-string-with-different-arrays-in-ruby/36437269#36437269", "title": "Appending to the same string with different arrays in Ruby", "body": "<p>You can zip <code>ids</code> array if <code>ids</code>  and <code>ids_desc</code> have same length:</p>\n\n<pre><code>ids.zip(ids_desc).each do |id, desc|\n  str1 &lt;&lt; \"The key for id #{id} has a value of #{desc}\"\nend\n</code></pre>\n\n<p>Or just use <code>Enumerable#each_with_index</code>:</p>\n\n<pre><code>ids.each_with_index do |id, i|\n  str1 &lt;&lt; \"The key for id #{id} has a value of #{ids_desc[i]}\"\nend\n</code></pre>\n\n<p>And you can avoid creating <code>str1</code> array, using <code>Array#map</code>:</p>\n\n<pre><code>ids.zip(ids_desc).map do |id, desc|\n  \"The key for id #{id} has a value of #{desc}\"\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "is_accepted": false, "score": 0, "last_activity_date": 1459893285, "creation_date": 1459893285, "answer_id": 36437762, "question_id": 36437220, "link": "https://stackoverflow.com/questions/36437220/appending-to-the-same-string-with-different-arrays-in-ruby/36437762#36437762", "title": "Appending to the same string with different arrays in Ruby", "body": "<h2>Collect Strings</h2>\n\n<pre><code>ids = [1234, 2345, 3456]\nids_desc = [\"inst1\", \"inst2\", \"inst3\"]\narray = ids.zip(ids_desc).map { |e| \"The key for id '%d' has a value of '%s'\" % e }\n</code></pre>\n\n<h2>Print Collection to Standard Output</h2>\n\n<pre><code>array.map { |e| puts e }\n</code></pre>\n\n<blockquote>\n  <p>The key for id '1234' has a value of 'inst1'<br>\n  The key for id '2345' has a value of 'inst2'<br>\n  The key for id '3456' has a value of 'inst3'</p>\n</blockquote>\n"}], "owner": {"reputation": 157, "user_id": 191807, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/aab17186ea98a3febe621231055c90e3?s=128&d=identicon&r=PG&f=1", "display_name": "TheOneTrueMorty", "link": "https://stackoverflow.com/users/191807/theonetruemorty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 36437269, "answer_count": 2, "score": 0, "last_activity_date": 1459893285, "creation_date": 1459891049, "question_id": 36437220, "link": "https://stackoverflow.com/questions/36437220/appending-to-the-same-string-with-different-arrays-in-ruby", "title": "Appending to the same string with different arrays in Ruby", "body": "<p>Ruby noob here. I have multiple arrays in a ruby script I want to append to create a single string with key values pairs where each value of an id array matches the equivalent value of an id_desc array like this:</p>\n\n<pre><code>ids = [1234, 2345, 3456]\nids_desc = [\"inst1\", \"inst2\", \"inst3\"]\n</code></pre>\n\n<p>How can I build the following string exactly as noted from the above arrays:</p>\n\n<pre><code>\"The key for id '#{id}' has a value of '#{id_desc}'\"\n</code></pre>\n\n<p>which should output:</p>\n\n<pre><code>\"The key for id '1234' has a value of 'inst1'\"\n\"The key for id '2345' has a value of 'inst2'\"\netc. \n</code></pre>\n\n<p>I can do the following easily enough:</p>\n\n<pre><code>str1 = Array.new\nids.each do |id|\n str1 &lt;&lt; \"The key for id '#{id}'\"\nend\n</code></pre>\n\n<p>however, I'm having trouble identifying how to add \"has a value of #{id_desc}\" to the end of each of those key mappings.  Anyone have any suggestions? </p>\n\n<p>Thanks! </p>\n"}, {"tags": ["ruby", "sinatra", "assets", "sprockets"], "answers": [{"comments": [{"owner": {"reputation": 1213, "user_id": 3825408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e6a977bb7d71d35589d3cfa3738e5a46?s=128&d=identicon&r=PG&f=1", "display_name": "zombie_ghast", "link": "https://stackoverflow.com/users/3825408/zombie-ghast"}, "edited": false, "score": 0, "creation_date": 1459893783, "post_id": 36437612, "comment_id": 60490544, "body": "Looks like that&#39;s all I needed. Thank you!"}], "tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": true, "score": 1, "last_activity_date": 1459892626, "creation_date": 1459892626, "answer_id": 36437612, "question_id": 36437146, "link": "https://stackoverflow.com/questions/36437146/sinatra-show-view-example-id-returns-404-error-for-assets-when-using-sprocket/36437612#36437612", "title": "Sinatra show view /example/:id returns 404 error for assets, when using sprockets", "body": "<p>In your layout you have the following lines which define the links to your assets:</p>\n\n<pre><code>link rel=\"stylesheet\" href=\"assets/app.css\"\nscript src=\"assets/app.js\"\n</code></pre>\n\n<p>Since the urls in these elements don\u2019t start with a slash, the browser treats them as relative to the page where they appear. This means that when you visit <code>/example</code> the links go to <code>/assets/app.cs</code> and <code>/assets/app.js</code>. However when you go to e.g <code>example/1</code> the links are treated as relative to the <code>1</code>, so the browser tries to fetch <code>/example/assets/app.cs</code> (and similarly for <code>app.js</code>).</p>\n\n<p>You need to make sure theses links are always treated as absolute. The simplest way would be to just add a <code>/</code> at the start:</p>\n\n<pre><code>link rel=\"stylesheet\" href=\"/assets/app.css\"\nscript src=\"/assets/app.js\"\n</code></pre>\n\n<p>A more robust solution might be to use <a href=\"http://www.sinatrarb.com/intro.html#Generating%20URLs\" rel=\"nofollow\">Sinatra\u2019s <code>url</code> helper</a> to ensure you always create the correct links, as it will take it account mounting the app at different paths on the server:</p>\n\n<pre><code>link rel=\"stylesheet\" href=url(\"/assets/app.css\")\nscript src=url(\"/assets/app.js\")\n</code></pre>\n"}], "owner": {"reputation": 1213, "user_id": 3825408, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e6a977bb7d71d35589d3cfa3738e5a46?s=128&d=identicon&r=PG&f=1", "display_name": "zombie_ghast", "link": "https://stackoverflow.com/users/3825408/zombie-ghast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 36437612, "answer_count": 1, "score": 0, "last_activity_date": 1459892626, "creation_date": 1459890721, "last_edit_date": 1459892325, "question_id": 36437146, "link": "https://stackoverflow.com/questions/36437146/sinatra-show-view-example-id-returns-404-error-for-assets-when-using-sprocket", "title": "Sinatra show view /example/:id returns 404 error for assets, when using sprockets", "body": "<p>When I am accessing:</p>\n\n<pre><code>get \"/example/:id\" do\n  ...\n  slim :'example/show'\nend\n</code></pre>\n\n<p>I am getting this error:</p>\n\n<pre><code>\"GET /example/assets/app.css HTTP/1.1\" 404\n\"GET /example/assets/app.js HTTP/1.1\" 404\n</code></pre>\n\n<hr>\n\n<p>I am suspecting that <code>:id</code> can be a problem here, because \nmy assets setup works when I am accessing:</p>\n\n<pre><code>get \"/example\" do\n  ...\n  slim :'example/index'\nend\n</code></pre>\n\n<p>works:</p>\n\n<pre><code>\"GET /assets/app.css HTTP/1.1\" 304\n\"GET /assets/app.js HTTP/1.1\" 200 \n</code></pre>\n\n<p>My setup for sprockets:</p>\n\n<pre><code>class App &lt; Sinatra::Base\n  set :environment, Sprockets::Environment.new\n\n  environment.append_path \"assets/stylesheets\"\n  environment.append_path \"assets/javascripts\"\n\n  environment.js_compressor  = :uglify\n  environment.css_compressor = :scss\n\n  get \"/assets/*\" do\n    env[\"PATH_INFO\"].sub!(\"/assets\", \"\")\n    settings.environment.call(env)\n  end\n\n  ...\n\nend\n</code></pre>\n\n<p>My full repo but without last changes: <a href=\"https://github.com/aneta-bielska/home-for-paws-app\" rel=\"nofollow\">https://github.com/aneta-bielska/home-for-paws-app</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "date", "activerecord"], "comments": [{"owner": {"reputation": 1609, "user_id": 3241907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea2601af49d5eca9004032bc36d918b?s=128&d=identicon&r=PG&f=1", "display_name": "SunnyMagadan", "link": "https://stackoverflow.com/users/3241907/sunnymagadan"}, "edited": false, "score": 0, "creation_date": 1459925619, "post_id": 36436925, "comment_id": 60500915, "body": "I&#39;ve read your description multiple times and still don&#39;t understand when available_between? should return true and when false. As I see from example it should return true if there are were made appropriate number of bookings each day during date_begin..date_end period. Am I right?"}, {"owner": {"reputation": 1814, "user_id": 5006469, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7b557baad76e9fca74ff4d0d1aac568a?s=128&d=identicon&r=PG&f=1", "display_name": "rdupz", "link": "https://stackoverflow.com/users/5006469/rdupz"}, "reply_to_user": {"reputation": 1609, "user_id": 3241907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea2601af49d5eca9004032bc36d918b?s=128&d=identicon&r=PG&f=1", "display_name": "SunnyMagadan", "link": "https://stackoverflow.com/users/3241907/sunnymagadan"}, "edited": false, "score": 0, "creation_date": 1459931846, "post_id": 36436925, "comment_id": 60504610, "body": "Mmmh I don&#39;t think so. I&#39;ve updated the question with an example and changed the method in order to make it a bit more clear. Thanks."}, {"owner": {"reputation": 1609, "user_id": 3241907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea2601af49d5eca9004032bc36d918b?s=128&d=identicon&r=PG&f=1", "display_name": "SunnyMagadan", "link": "https://stackoverflow.com/users/3241907/sunnymagadan"}, "edited": false, "score": 0, "creation_date": 1459935389, "post_id": 36436925, "comment_id": 60507205, "body": "Thanks, but sample implementation is still confusing and always returns true. It looks like that you missed return statement inside cycle (return false if nb_places_taken_this_day &gt;= self.places). Now I see that your method should return true if the number of bookings each day of this period is less than number of places."}, {"owner": {"reputation": 1814, "user_id": 5006469, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7b557baad76e9fca74ff4d0d1aac568a?s=128&d=identicon&r=PG&f=1", "display_name": "rdupz", "link": "https://stackoverflow.com/users/5006469/rdupz"}, "reply_to_user": {"reputation": 1609, "user_id": 3241907, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ea2601af49d5eca9004032bc36d918b?s=128&d=identicon&r=PG&f=1", "display_name": "SunnyMagadan", "link": "https://stackoverflow.com/users/3241907/sunnymagadan"}, "edited": false, "score": 0, "creation_date": 1459935914, "post_id": 36436925, "comment_id": 60507581, "body": "Oops, the return statement is mandatory you are right."}], "answers": [{"comments": [{"owner": {"reputation": 1814, "user_id": 5006469, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7b557baad76e9fca74ff4d0d1aac568a?s=128&d=identicon&r=PG&f=1", "display_name": "rdupz", "link": "https://stackoverflow.com/users/5006469/rdupz"}, "edited": false, "score": 0, "creation_date": 1459932331, "post_id": 36437558, "comment_id": 60504933, "body": "I don&#39;t think it works. I just add an example. The last execution of <code>available_between?</code> would return false with your implementation because B1 would match your query. You miss the <code>places</code> information. Thanks."}, {"owner": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "reply_to_user": {"reputation": 1814, "user_id": 5006469, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7b557baad76e9fca74ff4d0d1aac568a?s=128&d=identicon&r=PG&f=1", "display_name": "rdupz", "link": "https://stackoverflow.com/users/5006469/rdupz"}, "edited": false, "score": 0, "creation_date": 1459942284, "post_id": 36437558, "comment_id": 60512309, "body": "Sorry, missed the bit about places. Does the newly modified method cover it?"}, {"owner": {"reputation": 1814, "user_id": 5006469, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7b557baad76e9fca74ff4d0d1aac568a?s=128&d=identicon&r=PG&f=1", "display_name": "rdupz", "link": "https://stackoverflow.com/users/5006469/rdupz"}, "edited": false, "score": 0, "creation_date": 1459944683, "post_id": 36437558, "comment_id": 60514121, "body": "Not really. Consider an offer with 2 places and 3 bookings. The bookings are 1 day long and consecutives. A additional booking <i>can</i> be made during these 3 days because there is still one place left (each day). Your query would return 3 conflicting bookings and fail for this additional booking. However there is only <i>one conflicting booking per day</i> in this example."}, {"owner": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "reply_to_user": {"reputation": 1814, "user_id": 5006469, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7b557baad76e9fca74ff4d0d1aac568a?s=128&d=identicon&r=PG&f=1", "display_name": "rdupz", "link": "https://stackoverflow.com/users/5006469/rdupz"}, "edited": false, "score": 0, "creation_date": 1459948001, "post_id": 36437558, "comment_id": 60516863, "body": "Good point. Given then that the concept of a &quot;day&quot; is hard to represent in the SQL data, I think another approach is warranted. I&#39;d suggest grabbing all overlapping bookings in 1 query then doing a loop in ruby to determine if all the days have at least one available place. I&#39;ll post this as a new answer. Is a day the smallest resolution of time that you care about? (i.e. can a booking be for part of a day?)"}, {"owner": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "reply_to_user": {"reputation": 1814, "user_id": 5006469, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7b557baad76e9fca74ff4d0d1aac568a?s=128&d=identicon&r=PG&f=1", "display_name": "rdupz", "link": "https://stackoverflow.com/users/5006469/rdupz"}, "edited": false, "score": 0, "creation_date": 1459948363, "post_id": 36437558, "comment_id": 60517173, "body": "Stack overflow suggested I modify the current answer rather than posting a new one, so I did that instead."}, {"owner": {"reputation": 1814, "user_id": 5006469, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7b557baad76e9fca74ff4d0d1aac568a?s=128&d=identicon&r=PG&f=1", "display_name": "rdupz", "link": "https://stackoverflow.com/users/5006469/rdupz"}, "edited": false, "score": 0, "creation_date": 1459948436, "post_id": 36437558, "comment_id": 60517241, "body": "I like your idea. Yes, one day is the smallest. Actually, only the nights are importants, but we don&#39;t need to go into these kinds of details so don&#39;t care about this ;)."}, {"owner": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "reply_to_user": {"reputation": 1814, "user_id": 5006469, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7b557baad76e9fca74ff4d0d1aac568a?s=128&d=identicon&r=PG&f=1", "display_name": "rdupz", "link": "https://stackoverflow.com/users/5006469/rdupz"}, "edited": false, "score": 0, "creation_date": 1459949821, "post_id": 36437558, "comment_id": 60518285, "body": "To expand upon the edit-rejection, try <code>[1,2,3].all?{|x| puts x; x.odd?}</code> in the console. You&#39;ll see 1 and 2 puts&#39;d, but it never evaluates the 3 in the loop. So :all? gives you the &quot;stop and return false on the first false value&quot; behavior for free."}, {"owner": {"reputation": 1814, "user_id": 5006469, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7b557baad76e9fca74ff4d0d1aac568a?s=128&d=identicon&r=PG&f=1", "display_name": "rdupz", "link": "https://stackoverflow.com/users/5006469/rdupz"}, "edited": false, "score": 0, "creation_date": 1459951020, "post_id": 36437558, "comment_id": 60519293, "body": "Got it, you&#39;re right. <code>all?</code> is nice. What about the count after the select?"}, {"owner": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "reply_to_user": {"reputation": 1814, "user_id": 5006469, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7b557baad76e9fca74ff4d0d1aac568a?s=128&d=identicon&r=PG&f=1", "display_name": "rdupz", "link": "https://stackoverflow.com/users/5006469/rdupz"}, "edited": false, "score": 0, "creation_date": 1459951298, "post_id": 36437558, "comment_id": 60519514, "body": "You&#39;re right! I didn&#39;t see that, good catch. I can&#39;t re-open the previous edit, so if you make another one I can accept it so you get the points for it."}], "tags": [], "owner": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "is_accepted": true, "score": 1, "last_activity_date": 1459951591, "last_edit_date": 1459951591, "creation_date": 1459892417, "answer_id": 36437558, "question_id": 36436925, "link": "https://stackoverflow.com/questions/36436925/how-to-check-if-a-booking-between-two-dates-is-possible/36437558#36437558", "title": "How to check if a booking between two dates is possible", "body": "<p>I don't have easy enough data to test this throughly, but I'm thinking something like this can work. Here I'm building into your query the condition that no booking exists where the start and end dates are not either both before or both after the requested dates. That is, every booking that does exist had better have either start and end before the requested start, or start and end after the requested end. If there exists a booking that does not meet this condition, then the requested dates are not available as a single booking. Does this work?</p>\n\n<p>[EDIT - modified from original broken answer to reflect the actual problem]</p>\n\n<p>This new answer still loops over days, but does so after grabbing all the conflicting bookings in one query. The ruby loop itself will be pretty quick.</p>\n\n<p>(Note that the :all? method will immediately return false on the first false value and will return true if all elements evaluate to true, so adding the <code>return false unless</code> as suggested by the edit I believe is superfluous. In any case I've added a <code>return</code> to the last line to hopefully clarify the intent.)</p>\n\n<pre><code>  def available_between?(date_begin, date_end)\n    conflicting_bookings = self.bookings.where.not(\"(date_begin &lt; :requested_start_date AND date_end &lt; :requested_start_date) OR (date_end &gt; :requested_end_date AND date_end &gt; :requested_end_date)\", requested_start_date: date_begin, requested_end_date: date_end)\n    return (date_begin..date_end).all? do |day|\n      num_bookings_for_day = conflicting_bookings.select{|booking| booking.date_begin &lt;= day &amp;&amp; booking.date_end &gt;= day}.count\n      num_bookings_for_day &lt; self.places\n    end\n  end\n</code></pre>\n"}], "owner": {"reputation": 1814, "user_id": 5006469, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/7b557baad76e9fca74ff4d0d1aac568a?s=128&d=identicon&r=PG&f=1", "display_name": "rdupz", "link": "https://stackoverflow.com/users/5006469/rdupz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 648, "favorite_count": 2, "accepted_answer_id": 36437558, "answer_count": 1, "score": 0, "last_activity_date": 1507124777, "creation_date": 1459889849, "last_edit_date": 1459935927, "question_id": 36436925, "link": "https://stackoverflow.com/questions/36436925/how-to-check-if-a-booking-between-two-dates-is-possible", "title": "How to check if a booking between two dates is possible", "body": "<p>An <code>Offer</code> has a number of <code>places</code>. It means that each day <code>places</code> bookings can be made for this offer. An <code>Offer</code> <code>has_many</code> bookings.  </p>\n\n<p>A <code>Booking</code> has a <code>date_begin</code>, a <code>date_end</code> and <code>belongs_to</code> an <code>Offer</code>. It means that each day between <code>date_begin</code> and <code>date_end</code> one place is used regarding the associated <code>Offer</code>.</p>\n\n<p>Given a requested booking for an offer, how should I check if it can be validated?</p>\n\n<p>Example :</p>\n\n<pre><code>- offer has 2 places (offer.places == 2).\n- offer has currently 3 bookings (offer.bookings.count == 3)\n- First booking B1 is between 01-04-2016 and 10-04-2016\n- Second booking B2 is between 01-04-2016 and 05-04-2016\n- Third booking B3 is between 08-04-2016 and 10-04-2016.\n\noffer.available_between?(\"01-04-2016\", \"10-04-2016\")\n=&gt; false (because of B1 and B2, and because of B1 and B3)\n\noffer.available_between?(\"01-04-2016\", \"05-04-2016\")\n=&gt; false (because of B1 and B2)\n\noffer.available_between?(\"08-04-2016\", \"10-04-2016\")\n=&gt; false (because of B1 and B3)\n\noffer.available_between?(\"06-04-2016\", \"07-04-2016\")\n=&gt; true (because there is only B1 during this period)\n</code></pre>\n\n<p>Here is a try:</p>\n\n<pre><code>class Offer &lt; ActiveRecord::Base\n\n  # True if and only if each day between date_begin and date_end has at least one place left.\n  def available_between?(date_begin, date_end)\n    (date_begin.to_datetime.to_i .. date_end.to_datetime.to_i).step(1.day) do |date|\n      day = Time.at(date)\n      nb_places_taken_this_day = self.bookings.where(\"date_begin &lt;= :date AND date_end &gt;= :date\", date: day).count\n      return false if nb_places_taken_this_day &gt;= self.places\n    end\n    true\n  end\n\nend\n\noffer.available_between?(booking.date_begin, booking.date_end)\n</code></pre>\n\n<p>I don't feel confortable with this at all especially because there are multiple separated SQL queries.</p>\n\n<p>Can you see a better way to achieve this using ActiveRecord more efficiently?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1459890897, "post_id": 36436820, "comment_id": 60489118, "body": "<code>What I don&#39;t understand is that when the test calls the method draw it seems to expect to different returns from the same method.</code> Can you explain more?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6105070"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1459891655, "post_id": 36436820, "comment_id": 60489505, "body": "first it calls draw and  gets : chooses cards from the end Test Passed: Value == [[:clubs, 13]] but after it calls it again and wants a different response so says this: Expected [:clubs, 13] to be a Card chooses cards from the end  I understand now it needs an iff statement but i dont know how to construct it"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1459899384, "post_id": 36436820, "comment_id": 60492567, "body": "It&#39;s brutally inefficient to duplicate data like <code>@rank_hash</code> and <code>@suit_hash</code> inside a method like <code>to_s</code> and still bad form to declare <code>@suit_array</code> for each and every instance of this object. What you should do is split those out as constants like <code>RANK_HASH</code> as they&#39;re not going to change and having multiple copies of those is pointless."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6105070"}, "edited": false, "score": 0, "creation_date": 1459903214, "post_id": 36436820, "comment_id": 60493581, "body": "Im currently being taught to refactor after i get a solution. Criticising code seems a little pointless if your just criticising form and not pointing out errors. I can fix the form when it works. &quot;Your form&quot; doesnt make much sense to me because im not as advanced as you. Thanks for helping tho."}, {"owner": {"reputation": 1011, "user_id": 3891638, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/pqkeX.jpg?s=128&g=1", "display_name": "cozyconemotel", "link": "https://stackoverflow.com/users/3891638/cozyconemotel"}, "edited": false, "score": 0, "creation_date": 1459920302, "post_id": 36436820, "comment_id": 60498329, "body": "If you&#39;ve solved it yourself, make it an answer or delete the question.. don&#39;t leave a solved question hanging without an answer."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6105070"}, "is_accepted": false, "score": 0, "last_activity_date": 1459929448, "creation_date": 1459929448, "answer_id": 36444888, "question_id": 36436820, "link": "https://stackoverflow.com/questions/36436820/trouble-with-classes-in-ruby-and-codewars/36444888#36444888", "title": "Trouble with classes in ruby and codewars", "body": "<p>Issue was with the initialize method. Below fixed the issue.</p>\n\n<pre><code>def initialize\n@cards = []\n@rank_array = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13]\n@suit_array = [:hearts, :diamonds, :spades, :clubs]\n  @suit_array.each do |suit|\n    @rank_array.each do |rank|\n      each_card = Card.new(suit, rank)\n      @cards &lt;&lt; each_card\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6105070"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1459929481, "creation_date": 1459889522, "last_edit_date": 1459929481, "question_id": 36436820, "link": "https://stackoverflow.com/questions/36436820/trouble-with-classes-in-ruby-and-codewars", "title": "Trouble with classes in ruby and codewars", "body": "<p>so i am trying a kata on Codewars: Flexible Card Game</p>\n\n<p><a href=\"http://www.codewars.com/kata/5436fdf34e3d6cb156000350/train/ruby\" rel=\"nofollow\">http://www.codewars.com/kata/5436fdf34e3d6cb156000350/train/ruby</a></p>\n\n<p>the code I have written has passed most tests but trips up at the end giving this:</p>\n\n<pre><code>#draw\nchooses cards from the end\nTest Passed: Value == [[:clubs, 13]]\n\nremoves cards from the deck\nTest Passed: Value == 51\n\nreturns the cards that were drawn\nTest Passed: Value == 1\n\nExpected [:clubs, 13] to be a Card\nchooses cards from the end\n\nTest Passed: Value == [[:clubs, 12], [:clubs, 13]]\nremoves cards from the deck\n\nTest Passed: Value == 50\nreturns the cards that were drawn\n\nTest Passed: Value == 2\nExpected [:clubs, 12] to be a Card\nExpected [:clubs, 13] to be a Card\n</code></pre>\n\n<p>What I don't understand is that when the test calls the method draw it seems to expect to different returns from the same method. I'm sure it's something I've done wrong but I cant see it. Any help would be great. Here is my code:</p>\n\n<pre><code>class Card \n include Comparable\n attr_accessor :suit, :rank\n  def initialize(suit, rank)\n\n      @suit = suit\n      @rank = rank\n\n  end\n\n  def &lt;=&gt; (another_card)\n    if self.rank &lt; another_card.rank\n         -1\n    elsif self.rank &gt; another_card.rank\n          1\n    else\n          0\n    end\n  end\n\n  def face_card?\n    @rank &gt; 10 ? true : false\n  end\n\n  def to_s\n    @rank_hash = {13 =&gt; \"King\", 12 =&gt; \"Queen\", 11 =&gt; \"Jack\", 10 =&gt; \"10\", 9 =&gt; \"9\", 8 =&gt; \"8\", 7 =&gt; \"7\", 6 =&gt; \"6\", 5 =&gt; \"5\", 4 =&gt; \"4\", 3 =&gt; \"3\", 2 =&gt; \"2\", 1 =&gt; \"Ace\"}\n    @suit_hash = {:clubs =&gt; \"Clubs\", :spades =&gt; \"Spades\", :hearts =&gt; \"Hearts\", :diamonds =&gt; \"Diamonds\"}\n    \"#{@rank_hash[@rank]} of #{@suit_hash[@suit]}\"\n  end\n\nend\n\nclass Deck &lt; Card\nattr_accessor :cards\n  def initialize\n\n    @rank_array = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13]\n    @suit_array = [:hearts, :diamonds, :spades, :clubs]\n    @cards = @suit_array.product(@rank_array)\n\n  end\n\n  def count\n    @cards.size\n  end\n\n  def shuffle\n    @cards.shuffle!\n  end\n\n  def draw(n=1)\n  @cards.pop(n)\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 14663, "user_id": 343679, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e65e5b1cd213c3b9c72f2680257d6eaf?s=128&d=identicon&r=PG&f=1", "display_name": "Sharj", "link": "https://stackoverflow.com/users/343679/sharj"}, "edited": false, "score": 0, "creation_date": 1459896180, "post_id": 36436136, "comment_id": 60491494, "body": "Just wondering why would you want to save the local file path without the file?"}, {"owner": {"reputation": 448, "user_id": 1332591, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/db9dd59e4008b44ab26ac3b5a15cc763?s=128&d=identicon&r=PG", "display_name": "MoB", "link": "https://stackoverflow.com/users/1332591/mob"}, "reply_to_user": {"reputation": 14663, "user_id": 343679, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e65e5b1cd213c3b9c72f2680257d6eaf?s=128&d=identicon&r=PG&f=1", "display_name": "Sharj", "link": "https://stackoverflow.com/users/343679/sharj"}, "edited": false, "score": 0, "creation_date": 1459962387, "post_id": 36436136, "comment_id": 60527787, "body": "@Sharj Our app is an internal tool, and we want to have a field that acts as a link to one of our internal network drives."}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1459895075, "last_edit_date": 1495542251, "creation_date": 1459895075, "answer_id": 36438153, "question_id": 36436136, "link": "https://stackoverflow.com/questions/36436136/how-to-have-a-browse-file-field-that-uploads-only-path/36438153#36438153", "title": "how to have a browse file field that uploads only path", "body": "<p>when you visit a website, there is no way for the website to access your filesystem unless they somehow hack you. This isn't specific to Rails sites ... it's a fundemental security precaution of the internet. If you want to access your users' filesystem, you may be able able to do it with Javascript after gettin their permission, but might not be be easy. See <a href=\"https://stackoverflow.com/questions/1087246/can-javascript-access-a-filesystem\">Can javascript access a filesystem?</a></p>\n\n<p>However, if you are building this app for localhost use only, you can use Ruby to manipulate/show the filesystem all you won't. But it's going to be limited to the filesystem running the Ruby program. </p>\n"}, {"comments": [{"owner": {"reputation": 448, "user_id": 1332591, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/db9dd59e4008b44ab26ac3b5a15cc763?s=128&d=identicon&r=PG", "display_name": "MoB", "link": "https://stackoverflow.com/users/1332591/mob"}, "edited": false, "score": 0, "creation_date": 1459962705, "post_id": 36438262, "comment_id": 60527984, "body": "Wouldn&#39;t this save the file path on the Server rather than the file path on the client&#39;s computer?"}, {"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "reply_to_user": {"reputation": 448, "user_id": 1332591, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/db9dd59e4008b44ab26ac3b5a15cc763?s=128&d=identicon&r=PG", "display_name": "MoB", "link": "https://stackoverflow.com/users/1332591/mob"}, "edited": false, "score": 1, "creation_date": 1459964769, "post_id": 36438262, "comment_id": 60529294, "body": "in <code>carriervawe</code> gem u can set where do u want to save it too. Once passing file, it saves image to where ever u set and store <code>url</code> in db."}, {"owner": {"reputation": 448, "user_id": 1332591, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/db9dd59e4008b44ab26ac3b5a15cc763?s=128&d=identicon&r=PG", "display_name": "MoB", "link": "https://stackoverflow.com/users/1332591/mob"}, "edited": false, "score": 0, "creation_date": 1459965411, "post_id": 36438262, "comment_id": 60529748, "body": "@7urk3m3n thank you, but I feel you are misconceiving my question. I don&#39;t want to upload the file. The application and its server would not be able to access the file. The file simply already exists on a network drive. All I want to save is a path, generated by the client, using a file browser. Not a path generated by the application/server. So If I used it, I would save &#39;C:\\Intel\\file.xlsx\\&#39; to the database, a file that is not accessible by the web-server at all."}], "tags": [], "owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "is_accepted": false, "score": 0, "last_activity_date": 1459895568, "creation_date": 1459895568, "answer_id": 36438262, "question_id": 36436136, "link": "https://stackoverflow.com/questions/36436136/how-to-have-a-browse-file-field-that-uploads-only-path/36438262#36438262", "title": "how to have a browse file field that uploads only path", "body": "<p>There few gems able to help you with that. And one of them is called <strong>Carriervawe</strong>. </p>\n\n<p>Gem <a href=\"https://github.com/carrierwaveuploader/carrierwave\" rel=\"nofollow\">LINK</a></p>\n\n<pre><code>u = Site.new\nu.file_link = params[:file] # Assign a file like this, or\n\n# like this\nFile.open('somewhere') do |f|\n  u.file_link = f\nend\n\nu.save!\nu.file_link.url # =&gt; '/url/to/file.png'\nu.file_link.current_path # =&gt; 'path/to/file.png'\nu.file_link_identifier # =&gt; 'file.png'\n</code></pre>\n"}], "owner": {"reputation": 448, "user_id": 1332591, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/db9dd59e4008b44ab26ac3b5a15cc763?s=128&d=identicon&r=PG", "display_name": "MoB", "link": "https://stackoverflow.com/users/1332591/mob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 298, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1459962603, "creation_date": 1459887177, "last_edit_date": 1459962603, "question_id": 36436136, "link": "https://stackoverflow.com/questions/36436136/how-to-have-a-browse-file-field-that-uploads-only-path", "title": "how to have a browse file field that uploads only path", "body": "<p>I have a field on my model <strong>Site</strong> called <strong>file_link</strong>. In the edit form, I want there to be a field for <strong>file_link</strong> with a Browse button next to the field, which pulls up a file browser on their local computer. I want them to be able to select a file, then have rails save the users local Path to the file, not the actual file.</p>\n\n<p>For Example: file_link should save the path: N:\\Projects\\excelfile.xlsx</p>\n\n<p>How can this be achieved?</p>\n"}, {"tags": ["arrays", "ruby", "parsing", "hash", "converter"], "comments": [{"owner": {"reputation": 500, "user_id": 231688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7a35cb58a5673b4d8944a1aad667cf?s=128&d=identicon&r=PG&f=1", "display_name": "Silver Phoenix", "link": "https://stackoverflow.com/users/231688/silver-phoenix"}, "edited": false, "score": 5, "creation_date": 1459886708, "post_id": 36435966, "comment_id": 60486679, "body": "You posted invalid code. I think you misplaced (or inserted) the <code>{}</code>."}, {"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 0, "creation_date": 1459887194, "post_id": 36435966, "comment_id": 60486989, "body": "Maybe <code>eval(&#39;{&#39; + [&quot;:cost=&gt;100&quot;, &quot;:size=&gt;2&quot;].join(&#39;,&#39;) + &#39;}&#39;)</code>?"}, {"owner": {"reputation": 126, "user_id": 4741507, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Nk5Sn.png?s=128&g=1", "display_name": "Alex Sid", "link": "https://stackoverflow.com/users/4741507/alex-sid"}, "edited": false, "score": 0, "creation_date": 1459887319, "post_id": 36435966, "comment_id": 60487057, "body": "Actually no. This is what i get with &quot;puts&quot; command when i try to validate the data visually. And i get the &quot;Array&quot; class when i&#39;m printing the class name of this object with puts(MyClass.class)."}, {"owner": {"reputation": 500, "user_id": 231688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7a35cb58a5673b4d8944a1aad667cf?s=128&d=identicon&r=PG&f=1", "display_name": "Silver Phoenix", "link": "https://stackoverflow.com/users/231688/silver-phoenix"}, "edited": false, "score": 0, "creation_date": 1459887841, "post_id": 36435966, "comment_id": 60487346, "body": "@AlexSid, you mean, if you do <code>you_obj.to_s</code> you get <code>&quot;[{\\&quot;:cost=&gt;100\\&quot;, \\&quot;:size=&gt;2\\&quot;}]&quot;</code>?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1459888053, "post_id": 36435966, "comment_id": 60487466, "body": "You show an array. If it&#39;s a string, show a string (I.e., enclose in single or double quotes)."}, {"owner": {"reputation": 126, "user_id": 4741507, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Nk5Sn.png?s=128&g=1", "display_name": "Alex Sid", "link": "https://stackoverflow.com/users/4741507/alex-sid"}, "reply_to_user": {"reputation": 500, "user_id": 231688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7a35cb58a5673b4d8944a1aad667cf?s=128&d=identicon&r=PG&f=1", "display_name": "Silver Phoenix", "link": "https://stackoverflow.com/users/231688/silver-phoenix"}, "edited": false, "score": 0, "creation_date": 1459889380, "post_id": 36435966, "comment_id": 60488218, "body": "@SilverPhoenix, you perfectly undestood what am i getting. There is escape symbols before double quotes if i try to convert this to string. Also there is no escape symbols if i just use &quot;puts&quot; with this object."}, {"owner": {"reputation": 126, "user_id": 4741507, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Nk5Sn.png?s=128&g=1", "display_name": "Alex Sid", "link": "https://stackoverflow.com/users/4741507/alex-sid"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1459890720, "post_id": 36435966, "comment_id": 60489018, "body": "@CarySwoveland, sorry, probably i&#39;ve not formulated my question specific enough. I have done things with arrays in Ruby before, but i don&#39;t know how to call the print which i&#39;m getting. Because this is the array, but it&#39;s have {} quotes in it. I&#39;m getting this array in legacy project that i have to maintain, so only option for me is to convert this into something useful because i can&#39;t change code that gives me that array."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1459891727, "post_id": 36435966, "comment_id": 60489544, "body": "I meant you should edit to show the string as  <code>&#39;[{&quot;:cost=&gt;100&quot;, &quot;:size=&gt;2&quot;}]&#39;</code>. Perhaps even write <code>&#39;[{&quot;:cost=&gt;100&quot;, &quot;:size=&gt;2&quot;}]&#39;  #=&gt; &quot;[{\\&quot;:cost=&gt;100\\&quot;, \\&quot;:size=&gt;2\\&quot;}]&quot;</code>."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1459971404, "post_id": 36435966, "comment_id": 60533426, "body": "Why can&#39;t you do anything about it? This is something completely broken in whatever is giving you this string."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1459899624, "post_id": 36436153, "comment_id": 60492640, "body": "It&#39;s worth noting that whenever using <code>eval</code> that you should be <b>extra super careful</b> not to execute arbitrary strings. Be absolutely sure this data comes from a trusted source."}], "tags": [], "owner": {"reputation": 500, "user_id": 231688, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7d7a35cb58a5673b4d8944a1aad667cf?s=128&d=identicon&r=PG&f=1", "display_name": "Silver Phoenix", "link": "https://stackoverflow.com/users/231688/silver-phoenix"}, "is_accepted": false, "score": 1, "last_activity_date": 1459888254, "last_edit_date": 1459888254, "creation_date": 1459887237, "answer_id": 36436153, "question_id": 36435966, "link": "https://stackoverflow.com/questions/36435966/how-to-parse-single-string-array-to-hash-in-ruby/36436153#36436153", "title": "How to parse single-string array to hash in Ruby?", "body": "<p>First we need to clean the string to make it look like a valid array:</p>\n\n<pre><code>my_string = my_string[2..-3]\nmy_array = eval(\"[#{my_string}]\")\n</code></pre>\n\n<p>Now you can join the strings, and then eval it into a hash:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>elements = my_array.join(', ')\nmy_hash = eval(\"{ #{ elements } }\")\n</code></pre>\n\n<p>(this can be done in fewer lines, but I separated them for clarity)</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1459971145, "last_edit_date": 1459971145, "creation_date": 1459887862, "answer_id": 36436345, "question_id": 36435966, "link": "https://stackoverflow.com/questions/36435966/how-to-parse-single-string-array-to-hash-in-ruby/36436345#36436345", "title": "How to parse single-string array to hash in Ruby?", "body": "<p>You could use the <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/json/rdoc/JSON.html\" rel=\"nofollow\">JSON</a> module to do that. That would arguably be safer than by using <code>eval</code>.</p>\n\n<p>To see how <code>JSON</code> could be used, let's do some reverse-engineering. You want to create a hash:</p>\n\n<pre><code>h = { :cost=&gt;100, :size=&gt;2 }\n</code></pre>\n\n<p>from the string:</p>\n\n<pre><code>str = '[{\":cost=&gt;100\", \":size=&gt;2\"}]'\n  #=&gt; \"[{\\\":cost=&gt;100\\\", \\\":size=&gt;2\\\"}]\"\n</code></pre>\n\n<p>Let's see how that hash would be encoded as a JSON string:</p>\n\n<pre><code>require 'json'\njstr = JSON.generate(h)\n  #=&gt; \"{\\\"cost\\\":100,\\\"size\\\":2}\" \n</code></pre>\n\n<p>Once we have <code>jstr</code> (which is nothing more than a string) we can extract the desired hash:</p>\n\n<pre><code>JSON.parse(jstr)\n  #=&gt; {\"cost\"=&gt;100, \"size\"=&gt;2}\n</code></pre>\n\n<p>so the task reduces to converting <code>str</code> to <code>jstr</code>:</p>\n\n<pre><code>  \"[{\\\":cost=&gt;100\\\", \\\":size=&gt;2\\\"}]\" =&gt; \"{\\\"cost\\\":100,\\\"size\\\":2}\" \n</code></pre>\n\n<p>Perhaps the easiest way is to first pull out the keys and values, which we can do with a regex:</p>\n\n<pre><code>r = /\n    (       # start capture group 1\n      [a-z] # match a lowercase letter\n      \\w*   # match &gt;= 0 word characters\n    )       # close capture group 1\n    =&gt;      # match characters\n    (-?\\d+) # optionally match a minus sign followed by &gt; 0 digits in\n            # capture group 2\n    /x      # free-spacing regex definition mode\n\narr = str.scan r\n  #=&gt; [[\"cost\", \"100\"], [\"size\", \"2\"]]\n</code></pre>\n\n<p>We can now form <code>jstr</code>:</p>\n\n<pre><code>jstr = \"{#{ arr.map { |k,v| \"\\\"#{k}\\\":#{v}\" }.join(\",\") }}\" \n  #=&gt; \"{\\\"cost\\\":100,\\\"size\\\":2}\"\n</code></pre>\n\n<p>To confirm,</p>\n\n<pre><code>h = JSON.parse(jstr)\n  #=&gt; {\"cost\"=&gt;100, \"size\"=&gt;2}\n</code></pre>\n"}], "owner": {"reputation": 126, "user_id": 4741507, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/Nk5Sn.png?s=128&g=1", "display_name": "Alex Sid", "link": "https://stackoverflow.com/users/4741507/alex-sid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1459971145, "creation_date": 1459886585, "question_id": 36435966, "link": "https://stackoverflow.com/questions/36435966/how-to-parse-single-string-array-to-hash-in-ruby", "title": "How to parse single-string array to hash in Ruby?", "body": "<p>I have a Ruby array (don't ask me why it is not hash already, i can't do anything about it):</p>\n\n<pre><code>[{\":cost=&gt;100\", \":size=&gt;2\"}]\n</code></pre>\n\n<p>What do i need to do to make it the classical Ruby hash with keys and values?\nWhat is my best option? Maybe there is some libraries for this kind of  operations?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes", "param"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1459887647, "post_id": 36435947, "comment_id": 60487235, "body": "Does your user have a nil email? Why pass email rather than id?"}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 5457326, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10207138432832084/picture?type=large", "display_name": "Kendall Weihe", "link": "https://stackoverflow.com/users/5457326/kendall-weihe"}, "edited": false, "score": 0, "creation_date": 1459887459, "post_id": 36436098, "comment_id": 60487135, "body": "still doesn&#39;t send the id param"}, {"owner": {"reputation": 2799, "user_id": 3772982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/91362482c60ebfba88fbdbde79c5fac6?s=128&d=identicon&r=PG&f=1", "display_name": "margo", "link": "https://stackoverflow.com/users/3772982/margo"}, "reply_to_user": {"reputation": 91, "user_id": 5457326, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10207138432832084/picture?type=large", "display_name": "Kendall Weihe", "link": "https://stackoverflow.com/users/5457326/kendall-weihe"}, "edited": false, "score": 0, "creation_date": 1459887973, "post_id": 36436098, "comment_id": 60487418, "body": "Sorry forgot to add, you need to include the method as well."}], "tags": [], "owner": {"reputation": 2799, "user_id": 3772982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/91362482c60ebfba88fbdbde79c5fac6?s=128&d=identicon&r=PG&f=1", "display_name": "margo", "link": "https://stackoverflow.com/users/3772982/margo"}, "is_accepted": false, "score": -1, "last_activity_date": 1459887944, "last_edit_date": 1459887944, "creation_date": 1459887046, "answer_id": 36436098, "question_id": 36435947, "link": "https://stackoverflow.com/questions/36435947/rails-no-route-when-the-rake-routes-shows-it-exists/36436098#36436098", "title": "Rails &quot;No Route&quot; when the rake routes shows it exists", "body": "<p>You need to add the action 'destroy' to your view to match it to the RESTFUL verb. Presumably you do mean to pass the email as the id parameter?</p>\n\n<pre><code>&lt;%= link_to 'Destroy', {:action =&gt; \"destroy :id =&gt; user.email), :method =&gt; :delete, data: { confirm: 'Are you sure?' } %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 91, "user_id": 5457326, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10207138432832084/picture?type=large", "display_name": "Kendall Weihe", "link": "https://stackoverflow.com/users/5457326/kendall-weihe"}, "edited": false, "score": 0, "creation_date": 1459887438, "post_id": 36436147, "comment_id": 60487123, "body": "I get that, but I am overriding the id in my database. I have <code>resources :users</code> in my routes file. if I add the <code>route</code> loop I get a syntax error. also <code>delete users&#47;:id, to: &quot;users#destroy&quot;</code> throws a syntax error"}, {"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "reply_to_user": {"reputation": 91, "user_id": 5457326, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10207138432832084/picture?type=large", "display_name": "Kendall Weihe", "link": "https://stackoverflow.com/users/5457326/kendall-weihe"}, "edited": false, "score": 0, "creation_date": 1459887545, "post_id": 36436147, "comment_id": 60487180, "body": "Sorry about that, I edited. the routes do was a reference to the very first line of the file. What do you mean &quot;I am overriding the id&quot; ?"}, {"owner": {"reputation": 91, "user_id": 5457326, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10207138432832084/picture?type=large", "display_name": "Kendall Weihe", "link": "https://stackoverflow.com/users/5457326/kendall-weihe"}, "edited": false, "score": 0, "creation_date": 1459887604, "post_id": 36436147, "comment_id": 60487206, "body": "adding <code>delete &#39;users&#47;:id&#39;, to: &quot;users#destroy&quot;</code> to the routes file is the same thing as <code>resources :users</code> it just makes two entries in rake routes. in this case it still throws an <code>route not found</code> error. and again, I am overriding the <code>id</code> parameter"}, {"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "reply_to_user": {"reputation": 91, "user_id": 5457326, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10207138432832084/picture?type=large", "display_name": "Kendall Weihe", "link": "https://stackoverflow.com/users/5457326/kendall-weihe"}, "edited": false, "score": 0, "creation_date": 1459887687, "post_id": 36436147, "comment_id": 60487258, "body": "The problem is the way you use the path helper. Don&#39;t use <code>user_path(user, id: ...)</code> but <code>user_path(user.email)</code> if you need to identify users by email"}, {"owner": {"reputation": 91, "user_id": 5457326, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10207138432832084/picture?type=large", "display_name": "Kendall Weihe", "link": "https://stackoverflow.com/users/5457326/kendall-weihe"}, "edited": false, "score": 0, "creation_date": 1459961260, "post_id": 36436147, "comment_id": 60527118, "body": "I believe you are on the correct route, however now when I submit Destroy it just redirects to index.html.erb?"}, {"owner": {"reputation": 91, "user_id": 5457326, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10207138432832084/picture?type=large", "display_name": "Kendall Weihe", "link": "https://stackoverflow.com/users/5457326/kendall-weihe"}, "edited": false, "score": 0, "creation_date": 1459961952, "post_id": 36436147, "comment_id": 60527525, "body": "it turns out I needed to specify <code>:method =&gt; :delete</code> but now I&#39;m getting the same <code>No route matches [DELETE] &quot;&#47;users&quot;</code> even though rake routes is showing I do"}, {"owner": {"reputation": 2799, "user_id": 3772982, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/91362482c60ebfba88fbdbde79c5fac6?s=128&d=identicon&r=PG&f=1", "display_name": "margo", "link": "https://stackoverflow.com/users/3772982/margo"}, "edited": false, "score": 0, "creation_date": 1460035831, "post_id": 36436147, "comment_id": 60565498, "body": "Have you tried &lt;%= link_to &#39;Destroy&#39;, {:action =&gt; &quot;destroy :id =&gt; user.id), :method =&gt; :delete, data: { confirm: &#39;Are you sure?&#39; } %&gt; ? Can you confirm what&#39;s in your routes file? You may want to first see if you can get it working passing the id param and then try passing the email."}], "tags": [], "owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "is_accepted": false, "score": 0, "last_activity_date": 1459963881, "last_edit_date": 1459963881, "creation_date": 1459887206, "answer_id": 36436147, "question_id": 36435947, "link": "https://stackoverflow.com/questions/36435947/rails-no-route-when-the-rake-routes-shows-it-exists/36436147#36436147", "title": "Rails &quot;No Route&quot; when the rake routes shows it exists", "body": "<p>The route <code>\"/users\"</code> doesn't exist and shouldn't. <code>\"/users\"</code> is not the same as <code>\"/users/:id\"</code></p>\n\n<p>In your routes.rb file, to enable CRUD actions on users you should have </p>\n\n<pre><code>Rails.application.routes.draw do\n  ...\n  resources :users\nend\n</code></pre>\n\n<p>Amongst others, the above line is interpreted by rails as</p>\n\n<pre><code>delete 'users/:id', to: \"users#destroy\"\n</code></pre>\n\n<p>Here the <code>:id</code> is part of the route name. So the path helper that is generated takes one argument. Here the method name user_path generates the url <code>users/</code>, and the first parameter is used to determine the rest <code>:id</code></p>\n\n<p>If you don't want to identify resources by their ID, then the resource syntax is quite confusing. I'd rather do something like that</p>\n\n<pre><code>delete 'users/:email', to: 'users#destroy', as: 'delete_user'\n</code></pre>\n\n<p>and you can call the helper like this</p>\n\n<pre><code>&lt;%= link_to 'Destroy', delete_user_path(user.email), method: :delete, data: { confirm: 'Are you sure?' } %&gt;\n</code></pre>\n\n<p>Note that in your controller you'll have to change the way you set the user</p>\n\n<pre><code>@user = User.find(params[:email])\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 5457326, "user_type": "registered", "accept_rate": 38, "profile_image": "https://graph.facebook.com/10207138432832084/picture?type=large", "display_name": "Kendall Weihe", "link": "https://stackoverflow.com/users/5457326/kendall-weihe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 778, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1459963881, "creation_date": 1459886508, "question_id": 36435947, "link": "https://stackoverflow.com/questions/36435947/rails-no-route-when-the-rake-routes-shows-it-exists", "title": "Rails &quot;No Route&quot; when the rake routes shows it exists", "body": "<p>I'm getting a <code>No route matches [DELETE] \"/users\"</code> when rake routes shows:</p>\n\n<pre><code>     user GET    /users/:id(.:format)         users#show\n     PATCH  /users/:id(.:format)         users#update\n     PUT    /users/:id(.:format)         users#update\n     DELETE /users/:id(.:format)         users#destroy\n</code></pre>\n\n<p>In my view I have this link and path:</p>\n\n<pre><code>      &lt;td&gt;&lt;%= link_to 'Destroy', user_path(user, :id =&gt; user.email), data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n</code></pre>\n\n<p>As you can see above, I'm sending an <code>id</code> param.</p>\n\n<p>I can fix this by adding this to routes:</p>\n\n<pre><code>delete 'users' =&gt; 'users#destroy'\n</code></pre>\n\n<p>But then when I check <code>params</code> in the controller, it has no <code>id</code> attribute. I have also tried</p>\n\n<pre><code>delete 'users/:id' =&gt; 'users#destroy'\n</code></pre>\n\n<p>Here's what the params look like:</p>\n\n<pre><code>{\"_method\"=&gt;\"delete\", \"authenticity_token\"=&gt;\"r81EQsF0z2eoIUTIrc3Rd2pQlVRNL6iEcM58DzkkOWCeLg+LLudBwhVvSyM7DTRXm2EGvKaMwCT+orbG8YDuOg==\", \"controller\"=&gt;\"users\", \"action\"=&gt;\"destroy\"}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 871, "user_id": 1525241, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/b79e028e13c4c51daabfb1bcb0ad4d71?s=128&d=identicon&r=PG", "display_name": "ShivamD", "link": "https://stackoverflow.com/users/1525241/shivamd"}, "edited": false, "score": 0, "creation_date": 1459889985, "post_id": 36435898, "comment_id": 60488612, "body": "This answers my question. <a href=\"http://stackoverflow.com/questions/30629680/rails-isnt-running-destroy-callbacks-for-has-many-through-join-model\" title=\"rails isnt running destroy callbacks for has many through join model\">stackoverflow.com/questions/30629680/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1459887584, "creation_date": 1459887584, "answer_id": 36436259, "question_id": 36435898, "link": "https://stackoverflow.com/questions/36435898/after-destroy-not-being-called-on-association-destruction/36436259#36436259", "title": "After destroy not being called on association destruction?", "body": "<p>From the <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#module-ActiveRecord::Associations::ClassMethods-label-Delete+or+destroy-3F\" rel=\"nofollow\">docs for <code>has_many</code></a>:</p>\n\n<blockquote>\n  <p>There is also a <code>clear</code> method which is the same as <code>delete_all</code>, except that it returns the association rather than the records which have been deleted.</p>\n</blockquote>\n\n<p>From the <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Relation.html#method-i-delete_all\" rel=\"nofollow\">docs for <code>delete_all</code></a>:</p>\n\n<blockquote>\n  <p>Deletes the records matching <code>conditions</code> without instantiating the records first, and hence not calling the <code>destroy</code> method nor invoking callbacks. </p>\n</blockquote>\n"}], "owner": {"reputation": 871, "user_id": 1525241, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/b79e028e13c4c51daabfb1bcb0ad4d71?s=128&d=identicon&r=PG", "display_name": "ShivamD", "link": "https://stackoverflow.com/users/1525241/shivamd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 586, "favorite_count": 0, "closed_date": 1459890022, "answer_count": 1, "score": 3, "last_activity_date": 1459887762, "creation_date": 1459886301, "last_edit_date": 1459887762, "question_id": 36435898, "link": "https://stackoverflow.com/questions/36435898/after-destroy-not-being-called-on-association-destruction", "closed_reason": "Duplicate", "title": "After destroy not being called on association destruction?", "body": "<p>I have the following models setup. </p>\n\n<pre><code>class Space\n  has_many :locations, through: :location_spaces\n  has_many :location_spaces, dependent: :destroy, inverse_of: :space\nend\n\nclass Location\n  has_many :spaces, through: :location_spaces\n  has_many :location_spaces, dependent: :destroy, inverse_of: :location\nend\n\nclass LocationSpace\n  belongs_to :location,     inverse_of: :location_spaces\n  belongs_to :space,        inverse_of: :location_spaces\nend\n</code></pre>\n\n<p>If I create a SpaceLocation by modifying the location_ids on the Space model , this also triggers the AFTER_CREATE callback for SpaceLocation.</p>\n\n<p>However when you update the space model, and set the location_ids to [], this deletes the SpaceLocation. However doesn't call the after_destroy callback. Looking at the sql, the destruction is made. </p>\n\n<p>Why isn't the after_destroy callback called? \nI have tried every \"after\" callback, including after_touched, and nothing was called.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "post", "amazon-s3"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1459886833, "post_id": 36435882, "comment_id": 60486754, "body": "maybe post your <code>write_to_file</code> method too."}, {"owner": {"reputation": 205, "user_id": 1442066, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/551579392/picture?type=large", "display_name": "Meschiany", "link": "https://stackoverflow.com/users/1442066/meschiany"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1459888455, "post_id": 36435882, "comment_id": 60487697, "body": "Found a post that answered me perfectly: <a href=\"http://stackoverflow.com/questions/2521053/how-to-read-a-user-uploaded-file-without-saving-it-to-the-database\" title=\"how to read a user uploaded file without saving it to the database\">stackoverflow.com/questions/2521053/&hellip;</a>"}], "owner": {"reputation": 205, "user_id": 1442066, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/551579392/picture?type=large", "display_name": "Meschiany", "link": "https://stackoverflow.com/users/1442066/meschiany"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 648, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1459886954, "creation_date": 1459886233, "last_edit_date": 1459886954, "question_id": 36435882, "link": "https://stackoverflow.com/questions/36435882/how-to-get-file-content-from-post-rails", "title": "How to get file content from post rails", "body": "<p>I have a client in java that sends form post requests with video file.</p>\n\n<p>I get in the server following POST:</p>\n\n<pre><code>Parameters: {\"video\"=&gt;#&lt;ActionDispatch::Http::UploadedFile:0x007f26783b49d0 \n@original_filename=\"video\", @content_type=nil, \n@headers=\"Content-Disposition: form-data; name=\\\"video\\\"; filename=\\\"video\\\"\\r\\n\", \n@tempfile=#&lt;Tempfile:/tmp/RackMultipart20160405-3-106c9nr&gt;&gt;, \"id\"=&gt;\"36\"}\n</code></pre>\n\n<p>I am trying to save the file to s3 using following lines:\nI know the connection and actual saving works because I tried with base64 string as parameter and it worked well.</p>\n\n<pre><code>body = params[:video].tempfile\nvideo_temp_file = write_to_file(body)\nVideoUploader.new.upload_video_to_s3(video_temp_file, params[:id].to_s+'.mp4')\n</code></pre>\n\n<p>I see on s3 empty files or 24 bytes.\nwhere do i do wrong?</p>\n\n<p>Edit: I am using carrierwave:</p>\n\n<pre><code>def write_to_file(content)\n  thumbnail_file = Tempfile.new(['video','.mp4'])\n  thumbnail_file.binmode # note that the tempfile must be in binary mode\n  thumbnail_file.write content\n  thumbnail_file.rewind\n  thumbnail_file\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord", "rails-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 500, "user_id": 3126291, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8f4e5aa2787c65782cf359db90a24a9c?s=128&d=identicon&r=PG", "display_name": "suyesh", "link": "https://stackoverflow.com/users/3126291/suyesh"}, "edited": false, "score": 0, "creation_date": 1459884140, "post_id": 36435223, "comment_id": 60484987, "body": "so i have this object, @contact_prices = @contact.retail_prices.all.order(&quot;created_at DESC&quot;) and that didnt work"}, {"owner": {"reputation": 1092, "user_id": 1645910, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jz1wz.jpg?s=128&g=1", "display_name": "CV-Gate", "link": "https://stackoverflow.com/users/1645910/cv-gate"}, "edited": false, "score": 0, "creation_date": 1459884334, "post_id": 36435223, "comment_id": 60485110, "body": "This will return an array not an AR object"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1459884465, "post_id": 36435223, "comment_id": 60485184, "body": "I would argue that the OP didn&#39;t define that he need a <code>Relation</code> and not an <code>Array</code>."}, {"owner": {"reputation": 1092, "user_id": 1645910, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jz1wz.jpg?s=128&g=1", "display_name": "CV-Gate", "link": "https://stackoverflow.com/users/1645910/cv-gate"}, "edited": false, "score": 0, "creation_date": 1459884566, "post_id": 36435223, "comment_id": 60485248, "body": "He asks for the same type of result than Post.all, doesn&#39;t he?"}, {"owner": {"reputation": 500, "user_id": 3126291, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8f4e5aa2787c65782cf359db90a24a9c?s=128&d=identicon&r=PG", "display_name": "suyesh", "link": "https://stackoverflow.com/users/3126291/suyesh"}, "edited": false, "score": 0, "creation_date": 1459884659, "post_id": 36435223, "comment_id": 60485305, "body": "so if i were to do @posts.all.load[0..Post.count] , the &quot;0&quot; will be the latest record?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 1092, "user_id": 1645910, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jz1wz.jpg?s=128&g=1", "display_name": "CV-Gate", "link": "https://stackoverflow.com/users/1645910/cv-gate"}, "edited": false, "score": 0, "creation_date": 1459884699, "post_id": 36435223, "comment_id": 60485339, "body": "@CV-Gate : Perhaps it is just me, but I don&#39;t understand the OP asking for a specific type."}, {"owner": {"reputation": 500, "user_id": 3126291, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8f4e5aa2787c65782cf359db90a24a9c?s=128&d=identicon&r=PG", "display_name": "suyesh", "link": "https://stackoverflow.com/users/3126291/suyesh"}, "edited": false, "score": 0, "creation_date": 1459884839, "post_id": 36435223, "comment_id": 60485424, "body": "this worked for me @contact_prices = @contact.retail_prices.all.order(&quot;created_at DESC&quot;).load[1..@contact.retail_prices.count] , I was trying to pull all record BUT the very newest one."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 500, "user_id": 3126291, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8f4e5aa2787c65782cf359db90a24a9c?s=128&d=identicon&r=PG", "display_name": "suyesh", "link": "https://stackoverflow.com/users/3126291/suyesh"}, "edited": false, "score": 0, "creation_date": 1459884843, "post_id": 36435223, "comment_id": 60485431, "body": "@suyesh : No in <code>[0..Post.count]</code> <code>0</code> is the first record <code>Post.count</code> will be one record after the last (because Arrays start to count from <code>0</code>). <code>-1</code> is always the last, <code>-2</code> is always up to the second last."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1459884909, "post_id": 36435223, "comment_id": 60485471, "body": "I am surprised, because <code>[1..@contact.retail_prices.count]</code> would skip the first. Than it might be better to just use <code>offset(1)</code>"}, {"owner": {"reputation": 500, "user_id": 3126291, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8f4e5aa2787c65782cf359db90a24a9c?s=128&d=identicon&r=PG", "display_name": "suyesh", "link": "https://stackoverflow.com/users/3126291/suyesh"}, "edited": false, "score": 0, "creation_date": 1459885164, "post_id": 36435223, "comment_id": 60485623, "body": "Offset(1) is what I was looking for. Thank you.  Post it as answer."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 2, "last_activity_date": 1459885298, "last_edit_date": 1459885298, "creation_date": 1459884048, "answer_id": 36435223, "question_id": 36435134, "link": "https://stackoverflow.com/questions/36435134/how-do-i-not-include-latest-record-but-all-record-from-an-object-in-rails/36435223#36435223", "title": "How do i not include latest record but all record from an object in rails?", "body": "<p>I think it is not worth it to try to generate a SQL query that excludes the very last element. Especially a subquery might be slower than just loading all records into an <code>Array</code> and than excluding the last:</p>\n\n<pre><code>@posts = Post.all[0..-2]\n</code></pre>\n\n<p>Your other example from the comments would look like this:</p>\n\n<pre><code>@contact_prices = @contact.retail_prices.all.order(\"created_at DESC\").load[0..-2]\n</code></pre>\n\n<p>Another option (depending on the order of your relation) might be to use <a href=\"http://apidock.com/rails/ActiveRecord/QueryMethods/offset\" rel=\"nofollow\"><code>offset</code></a>:</p>\n\n<pre><code>@contact_prices = @contact.retail_prices.order(\"created_at DESC\").offset(1)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1459884503, "post_id": 36435324, "comment_id": 60485205, "body": "Not really race conditions, just getting a count that&#39;s out of sync. Doesn&#39;t seem too important in this case, but +1 for thoroughness for sure. I think the details of how to implement the transaction depends on how locked down you want it to be (e.g. you could lock it to make sure no Posts get created or deleted in the middle, but I&#39;m thinking that&#39;s too heavy handed). The worst case without ensuring data synchrony is that you get a post you shouldn&#39;t have, or you don&#39;t get one you should have, but that&#39;s the same as if you&#39;d executed the line a moment prior."}], "tags": [], "owner": {"reputation": 3692, "user_id": 2102591, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/18ebe6ebe65a7aff45e6d09e96af9701?s=128&d=identicon&r=PG", "display_name": "Andrew Schwartz", "link": "https://stackoverflow.com/users/2102591/andrew-schwartz"}, "is_accepted": false, "score": 1, "last_activity_date": 1459884769, "last_edit_date": 1459884769, "creation_date": 1459884342, "answer_id": 36435324, "question_id": 36435134, "link": "https://stackoverflow.com/questions/36435134/how-do-i-not-include-latest-record-but-all-record-from-an-object-in-rails/36435324#36435324", "title": "How do i not include latest record but all record from an object in rails?", "body": "<p>This is the most direct way I think of doing what you're trying to do:</p>\n\n<pre><code>Post.limit(Post.count - 1)\n</code></pre>\n\n<p>If you want your query to allow pagination or other LIMIT queries, you could try something like</p>\n\n<pre><code>Post.where(\"id &lt; ?\", Post.last.id)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1092, "user_id": 1645910, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/jz1wz.jpg?s=128&g=1", "display_name": "CV-Gate", "link": "https://stackoverflow.com/users/1645910/cv-gate"}, "is_accepted": false, "score": 0, "last_activity_date": 1459884897, "creation_date": 1459884897, "answer_id": 36435488, "question_id": 36435134, "link": "https://stackoverflow.com/questions/36435134/how-do-i-not-include-latest-record-but-all-record-from-an-object-in-rails/36435488#36435488", "title": "How do i not include latest record but all record from an object in rails?", "body": "<p>One line AR:</p>\n\n<pre><code>Post.where.not(id: Post.last&amp;.id)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4045, "user_id": 1378252, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/d4025b3e5be289ffee5dffbd0a1a7fb5?s=128&d=identicon&r=PG", "display_name": "toddmetheny", "link": "https://stackoverflow.com/users/1378252/toddmetheny"}, "is_accepted": false, "score": 1, "last_activity_date": 1459892983, "creation_date": 1459892983, "answer_id": 36437697, "question_id": 36435134, "link": "https://stackoverflow.com/questions/36435134/how-do-i-not-include-latest-record-but-all-record-from-an-object-in-rails/36437697#36437697", "title": "How do i not include latest record but all record from an object in rails?", "body": "<p>Lots of answers that will do the trick, but throwing out an additional option:</p>\n\n<pre><code>@posts = Post.where(\"id != ?\", Post.last.id)\n</code></pre>\n"}], "owner": {"reputation": 500, "user_id": 3126291, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8f4e5aa2787c65782cf359db90a24a9c?s=128&d=identicon&r=PG", "display_name": "suyesh", "link": "https://stackoverflow.com/users/3126291/suyesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 36435223, "answer_count": 4, "score": 1, "last_activity_date": 1459892983, "creation_date": 1459883740, "question_id": 36435134, "link": "https://stackoverflow.com/questions/36435134/how-do-i-not-include-latest-record-but-all-record-from-an-object-in-rails", "title": "How do i not include latest record but all record from an object in rails?", "body": "<p>For example if i want to pull all @posts using @posts.all but i dont want to include the very last or latest record from that?</p>\n\n<p>here is what i am trying to do, </p>\n\n<p>@posts = Post.all(Without the very very latest record that was created.)</p>\n\n<p>Basically all record but not the very last record.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "selenium", "jenkins", "cucumber"], "answers": [{"tags": [], "owner": {"reputation": 3578, "user_id": 2731545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbaa55683cc693c2e95f63431af00ed0?s=128&d=identicon&r=PG", "display_name": "Thomas Sundberg", "link": "https://stackoverflow.com/users/2731545/thomas-sundberg"}, "is_accepted": false, "score": 0, "last_activity_date": 1459916803, "creation_date": 1459916803, "answer_id": 36441489, "question_id": 36435091, "link": "https://stackoverflow.com/questions/36435091/intermittent-failures-when-jenkins-runs-capybara-cucumber-tests-with-selenium-we/36441489#36441489", "title": "Intermittent Failures when Jenkins runs Capybara/Cucumber tests with Selenium Webdriver in headless state", "body": "<p>There is no well known issue with Jenkins that causes intermittent error when running tests. It is in fact as stable as your test suit is.</p>\n\n<p>I would start looking for differences between the environments. Are there any external services that are unstable and causes your issues?</p>\n"}], "owner": {"reputation": 83, "user_id": 5441472, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/svdiV.png?s=128&g=1", "display_name": "P3rishable", "link": "https://stackoverflow.com/users/5441472/p3rishable"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1459916803, "creation_date": 1459883576, "question_id": 36435091, "link": "https://stackoverflow.com/questions/36435091/intermittent-failures-when-jenkins-runs-capybara-cucumber-tests-with-selenium-we", "title": "Intermittent Failures when Jenkins runs Capybara/Cucumber tests with Selenium Webdriver in headless state", "body": "<p>I have a jenkins server that is running my cucumber tests whenever i push a commit. Is there any known issues where jenkins running selenium will cause intermittent errors? All the tests pass consistently on my local machine. </p>\n"}]