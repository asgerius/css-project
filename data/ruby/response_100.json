[{"tags": ["ruby", "rubygems", "jekyll"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 1, "creation_date": 1481158283, "post_id": 41029351, "comment_id": 69267574, "body": "FWIW: <a href=\"http://rubyinstaller.org/downloads/\" rel=\"nofollow noreferrer\">rubyinstaller.org/downloads</a> states &quot;The 64-bit versions of Ruby are relatively new on the Windows area and not all the packages have been updated to be compatible with it. To use this version you will require some knowledge about compilers and solving dependency issues, which might be too complicated if you just want to play with the language.&quot;  You may want to go the 32-bit route on Windows.  YMMV."}, {"owner": {"reputation": 448, "user_id": 2625592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38VFF.png?s=128&g=1", "display_name": "deveth0", "link": "https://stackoverflow.com/users/2625592/deveth0"}, "edited": false, "score": 0, "creation_date": 1481188572, "post_id": 41029351, "comment_id": 69278626, "body": "Does not seem to be a 64bit issue, works fine for me on win10x64 running ruby-x64"}], "answers": [{"tags": [], "owner": {"reputation": 448, "user_id": 2625592, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/38VFF.png?s=128&g=1", "display_name": "deveth0", "link": "https://stackoverflow.com/users/2625592/deveth0"}, "is_accepted": false, "score": 0, "last_activity_date": 1481265475, "last_edit_date": 1481265475, "creation_date": 1481188682, "answer_id": 41035737, "question_id": 41029351, "link": "https://stackoverflow.com/questions/41029351/error-message-upon-installing-wdm-gem/41035737#41035737", "title": "Error message upon installing wdm gem", "body": "<p>Could you please paste the content of the mkmf.log file and gem_make.out?</p>\n\n<p>I just tried to install the gem on a Win10 running Ruby 64bit and this does not seem to be an issue. </p>\n\n<p>Edit: OK, the error states, that your devkit is not installed correctly. Did you follow the instructions on ruby's website and install the correct version for your ruby version? </p>\n"}], "owner": {"reputation": 51, "user_id": 6679402, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a1397dd4728406a301bf33e0cea47133?s=128&d=identicon&r=PG&f=1", "display_name": "therealnemis", "link": "https://stackoverflow.com/users/6679402/therealnemis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 271, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481265475, "creation_date": 1481154092, "last_edit_date": 1481245004, "question_id": 41029351, "link": "https://stackoverflow.com/questions/41029351/error-message-upon-installing-wdm-gem", "title": "Error message upon installing wdm gem", "body": "<p>I followed this guide here on installing jekyll: labs.sverrirs.com/jekyll/5-wdm-gem.html</p>\n\n<p>But I can't seem to install wdm. I installed Ruby-devkit, and ruby2.3 64bit. However, when I try to type in gem install wdm, it displays:</p>\n\n<p>To see why this extension failed to compile, please check the mkmf.log which can\n be found here:</p>\n\n<pre><code> C:/Ruby23-x64/lib/ruby/gems/2.3.0/extensions/x64-mingw32/2.3.0/wdm-0.1.1/mkmf.\nlog\n\nextconf failed, exit code 1\n\nGem files will remain installed in C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/wdm-0.\n1.1 for inspection.\nResults logged to C:/Ruby23-x64/lib/ruby/gems/2.3.0/extensions/x64-mingw32/2.3.0\n/wdm-0.1.1/gem_make.out\n</code></pre>\n\n<p>The mkmf file says this:</p>\n\n<pre><code>\"x86_64-w64-mingw32-gcc -o conftest.exe -IC:/Ruby23-x64/include/ruby-2.3.0/x64-mingw32 -IC:/Ruby23-x64/include/ruby-2.3.0/ruby/backward -IC:/Ruby23-x64/include/ruby-2.3.0 -I. -DFD_SETSIZE=2048 -D_WIN32_WINNT=0x0501 -D__MINGW_USE_VC2005_COMPAT -D_FILE_OFFSET_BITS=64   -O3 -fno-omit-frame-pointer -fno-fast-math -g -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wunused-variable -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration -Wdeprecated-declarations -Wno-packed-bitfield-compat conftest.c  -L. -LC:/Ruby23-x64/lib -L.      -lx64-msvcrt-ruby230  -lshell32 -lws2_32 -liphlpapi -limagehlp -lshlwapi  \"\nchecked program was:\n/* begin */\n1: #include \"ruby.h\"\n2: \n3: #include &lt;winsock2.h&gt;\n4: #include &lt;windows.h&gt;\n5: int main(int argc, char **argv)\n6: {\n7:   return 0;\n8: }\n/* end */\n</code></pre>\n\n<p>I have no idea what this means, what to do?</p>\n\n<p>The gem file:</p>\n\n<pre><code>    current directory: C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/wdm-0.1.1/ext/wdm\nC:/Ruby23-x64/bin/ruby.exe -r ./siteconf20161205-2832-xgt8yg.rb extconf.rb\nchecking for main() in -lkernel32... *** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=C:/Ruby23-x64/bin/$(RUBY_BASE_NAME)\n    --with-kernel32lib\n    --without-kernel32lib\nC:/Ruby23-x64/lib/ruby/2.3.0/mkmf.rb:456:in `try_do': The compiler failed to generate an executable file. (RuntimeError)\nYou have to install development tools first.\n    from C:/Ruby23-x64/lib/ruby/2.3.0/mkmf.rb:541:in `try_link0'\n    from C:/Ruby23-x64/lib/ruby/2.3.0/mkmf.rb:556:in `try_link'\n    from C:/Ruby23-x64/lib/ruby/2.3.0/mkmf.rb:765:in `try_func'\n    from C:/Ruby23-x64/lib/ruby/2.3.0/mkmf.rb:997:in `block in have_library'\n    from C:/Ruby23-x64/lib/ruby/2.3.0/mkmf.rb:942:in `block in checking_for'\n    from C:/Ruby23-x64/lib/ruby/2.3.0/mkmf.rb:350:in `block (2 levels) in postpone'\n    from C:/Ruby23-x64/lib/ruby/2.3.0/mkmf.rb:320:in `open'\n    from C:/Ruby23-x64/lib/ruby/2.3.0/mkmf.rb:350:in `block in postpone'\n    from C:/Ruby23-x64/lib/ruby/2.3.0/mkmf.rb:320:in `open'\n    from C:/Ruby23-x64/lib/ruby/2.3.0/mkmf.rb:346:in `postpone'\n    from C:/Ruby23-x64/lib/ruby/2.3.0/mkmf.rb:941:in `checking_for'\n    from C:/Ruby23-x64/lib/ruby/2.3.0/mkmf.rb:992:in `have_library'\n    from extconf.rb:19:in `&lt;main&gt;'\n\nTo see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n  C:/Ruby23-x64/lib/ruby/gems/2.3.0/extensions/x64-mingw32/2.3.0/wdm-0.1.1/mkmf.log\n\nextconf failed, exit code 1\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex", "ruby-on-rails-4", "encoding"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1481178693, "post_id": 41028952, "comment_id": 69273576, "body": "Can you give a specific value of <code>phrase</code> that triggers this behaviour? Also, <code>ASCII-8BIT</code> is not meant to hold text, but pure byte-level data; what encoding are you actually using in the content of <code>phrase</code>? The solution should be to force the encoding of <code>phrase</code> to the actual encoding, then encode into UTF-8, then apply the regexp. (I believe the regular expression containing <code>\\p{Space}</code> will be UTF-8. <code>&#47;foo&#47;.encoding</code> is not UTF-8 on my machine.)"}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1481209209, "post_id": 41028952, "comment_id": 69292283, "body": "WHen I ran &#39;puts &quot;#{phrase.encoding}&quot;, the output was &quot;ASCII-8BIT&quot; so althoughh you say &quot;ASCII-8BIT&quot; is not meant to hold text, that is the reality in my example."}, {"owner": {"reputation": 712, "user_id": 4191738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wKXDY.jpg?s=128&g=1", "display_name": "Sculper", "link": "https://stackoverflow.com/users/4191738/sculper"}, "edited": false, "score": 0, "creation_date": 1481227095, "post_id": 41028952, "comment_id": 69303070, "body": "I&#39;ve tried to reproduce this with random ASCII-8BIT data in both 2.3.0 and 2.3.1, to no avail.  Knowing the contents of <code>phrase</code> would be very helpful."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1481246593, "post_id": 41028952, "comment_id": 69310732, "body": "I am saying &quot;not meant to hold text&quot; with a reason. It <i>can</i>, obviously, but if it does, it is almost always a programmer error. ASCII-8BIT is actually &quot;null encoding&quot;, it says &quot;I got these bytes but I don&#39;t know what they mean&quot;. For example, the ASCII-8BIT string <code>&quot;\\xc3\\xa4&quot;</code> is <code>&quot;&#228;&quot;</code> when forced to UTF-8, but <code>&quot;&#195;&#164;&quot;</code> in ISO-8859-1, <code>&quot;\uff83\uff64&quot;</code> in SJIS... You will probably not get any errors as long as you stick to lower half of ASCII, as most encodings are the same up to there, but once you engage that 8th bit, the regexp will need to know the exact encoding before it can know what a &quot;Space&quot; is."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 9974969, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/352b701ae355503415d63f5adbed41d1?s=128&d=identicon&r=PG", "display_name": "Nathan", "link": "https://stackoverflow.com/users/9974969/nathan"}, "is_accepted": false, "score": 0, "last_activity_date": 1529608509, "creation_date": 1529608509, "answer_id": 50976047, "question_id": 41028952, "link": "https://stackoverflow.com/questions/41028952/how-do-i-make-my-ruby-regex-compile-to-the-same-encoding-as-the-variable-to-whic/50976047#50976047", "title": "How do I make my Ruby regEx compile to the same encoding as the variable to which it is being applied?", "body": "<p>I suppose we have a similar problem; putting it in simplest terms:</p>\n\n<pre><code>str = \"Some text\\xC2\\xA0followed by more text.\"\nenc = str.encoding \n\n#  returns ==&gt; #&lt;Encoding:Windows-1252&gt;\n\n# here is my initial attempt, which failed:\nmatches = str.match(/\\xC2\\xA0/)\n# returns ==&gt; Encoding::CompatibilityError \n# (incompatible encoding regexp match (UTF-8 regexp with Windows-1252 string))\n\n# here is my second attempt:\nnewstr = str.encode('UTF_8', 'Windows_1252', invalid: :replace, undef: :replace, replace: ' ')\n\n# returns ==&gt; Encoding::ConverterNotFoundError (code converter not found (Windows_1252 to UTF_8))\n\n# here is my third attempt:\nmatches = str.match('\\xC2\\xA0'.encode(Encoding::Windows_1252))\n\n# returns ==&gt; #&lt;MatchData \"\\xC2\\xA0\"&gt;\n\n# here is my 4th attempt: \nmatches = str.match('(.*)\\xC2\\xA0(.*)'.encode(Encoding::Windows_1252))\nnewstr = matches[1] + ' ' + matches[2]\n\n# returns ==&gt; \"Some text followed by more text.\"\n</code></pre>\n\n<p>Hopefully, that helps.  Only 2 years late...</p>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 530, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1529608509, "creation_date": 1481151861, "last_edit_date": 1495541321, "question_id": 41028952, "link": "https://stackoverflow.com/questions/41028952/how-do-i-make-my-ruby-regex-compile-to-the-same-encoding-as-the-variable-to-whic", "title": "How do I make my Ruby regEx compile to the same encoding as the variable to which it is being applied?", "body": "<p>Please note that this answer \u2014 <a href=\"https://stackoverflow.com/questions/9857443/ruby-regex-error-incompatible-encoding-regexp-match-ascii-8bit-regexp-with-utf\">Ruby Regex Error: incompatible encoding regexp match (ASCII-8BIT regexp with UTF-8 string)</a>, doesn\u2019t apply as I\u2019m already using Ruby > 1.9.  </p>\n\n<p>I\u2019m using Rails 4.2.7 with Ruby 2.3.  I have this expression</p>\n\n<pre><code>phrase = phrase.gsub(/\\A\\p{Space}+|\\p{Space}+\\z/, '') \n</code></pre>\n\n<p>Unfortunately, this dies with the below error if the encoding of the variable \u201cphrase\u201d is \u201cASCII-8BIT\u201d.  Is there any way to write the above in an encoding that matches the encoding of the variable, phrase?  As I understand it, the regular expressions get automatically compiled as UTF-8, even though my variable may not be UTF-8.</p>\n\n<pre><code>Encoding::CompatibilityError: incompatible encoding regexp match (UTF-8 regexp with ASCII-8BIT string)\n    from /Users/davea/Documents/workspace/demoapp/app/services/text_table_to_my_object_time_converter_service.rb:449:in `gsub'\n    from /Users/davea/Documents/workspace/demoapp/app/services/text_table_to_my_object_time_converter_service.rb:449:in `find_header'\n    from /Users/davea/Documents/workspace/demoapp/app/services/text_table_to_my_object_time_converter_service.rb:157:in `block in get_headers_by_line'\n    from /Users/davea/.rvm/gems/ruby-2.3.0/gems/activesupport-4.2.7.1/lib/active_support/core_ext/range/each.rb:7:in `each'\n    from /Users/davea/.rvm/gems/ruby-2.3.0/gems/activesupport-4.2.7.1/lib/active_support/core_ext/range/each.rb:7:in `each_with_time_with_zone'\n    from /Users/davea/Documents/workspace/demoapp/app/services/text_table_to_my_object_time_converter_service.rb:156:in `get_headers_by_line'\n    from /Users/davea/Documents/workspace/demoapp/app/services/text_table_to_my_object_time_converter_service.rb:99:in `get_headers'\n    from /Users/davea/Documents/workspace/demoapp/app/services/text_table_to_my_object_time_converter_service.rb:243:in `block in get_data_hash'\n    from /Users/davea/Documents/workspace/demoapp/app/services/text_table_to_my_object_time_converter_service.rb:242:in `each_line'\n    from /Users/davea/Documents/workspace/demoapp/app/services/text_table_to_my_object_time_converter_service.rb:242:in `get_data_hash'\n    from /Users/davea/Documents/workspace/demoapp/app/services/text_table_to_my_object_time_converter_service.rb:21:in `get_my_object_times'\n    from /Users/davea/Documents/workspace/demoapp/app/services/text_processor_service.rb:33:in `process_page_data'\n    from /Users/davea/Documents/workspace/demoapp/app/services/abstract_import_service.rb:82:in `process_my_object_data'\n    from (irb):8\n    from /Users/davea/.rvm/gems/ruby-2.3.0/gems/railties-4.2.7.1/lib/rails/commands/console.rb:110:in `start'\n    from /Users/davea/.rvm/gems/ruby-2.3.0/gems/railties-4.2.7.1/lib/rails/commands/console.rb:9:in `start'\n    from /Users/davea/.rvm/gems/ruby-2.3.0/gems/railties-4.2.7.1/lib/rails/commands/commands_tasks.rb:68:in `console'\n    from /Users/davea/.rvm/gems/ruby-2.3.0/gems/railties-4.2.7.1/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n    from /Users/davea/.rvm/gems/ruby-2.3.0/gems/railties-4.2.7.1/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n    from bin/rails:4:in `require'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "associations"], "comments": [{"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 2, "creation_date": 1481151779, "post_id": 41028835, "comment_id": 69265374, "body": "\u201c\u2026the query generated by Rails\u2026\u201d \u2014 For what call? What did you do to get this query? You didn&#39;t specify, but it would make it easier to understand at a glance what call you&#39;re trying."}, {"owner": {"reputation": 211, "user_id": 464950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e79430e7d2c06eff4ca4013e08181f1d?s=128&d=identicon&r=PG", "display_name": "Michiel Boekhoff", "link": "https://stackoverflow.com/users/464950/michiel-boekhoff"}, "reply_to_user": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1481152338, "post_id": 41028835, "comment_id": 69265607, "body": "I tried <code>User.first.students</code>."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1481182819, "post_id": 41028835, "comment_id": 69275636, "body": "can you show your attempt to specify the foreign key option?"}, {"owner": {"reputation": 211, "user_id": 464950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e79430e7d2c06eff4ca4013e08181f1d?s=128&d=identicon&r=PG", "display_name": "Michiel Boekhoff", "link": "https://stackoverflow.com/users/464950/michiel-boekhoff"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1481202319, "post_id": 41028835, "comment_id": 69287648, "body": "@maxpleaner Like so:   <code>has_many :students, through: :appointments, foreign_key: :student_id</code> Analogously for the has_many :teachers association."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1481219949, "post_id": 41028835, "comment_id": 69299399, "body": "maybe try adding the foreign key option on the belongs_to associations"}, {"owner": {"reputation": 211, "user_id": 464950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e79430e7d2c06eff4ca4013e08181f1d?s=128&d=identicon&r=PG", "display_name": "Michiel Boekhoff", "link": "https://stackoverflow.com/users/464950/michiel-boekhoff"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1481221170, "post_id": 41028835, "comment_id": 69300066, "body": "@maxpleaner I tried that, too. Unfortunately none of that seems to work."}], "answers": [{"tags": [], "owner": {"reputation": 211, "user_id": 464950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e79430e7d2c06eff4ca4013e08181f1d?s=128&d=identicon&r=PG", "display_name": "Michiel Boekhoff", "link": "https://stackoverflow.com/users/464950/michiel-boekhoff"}, "is_accepted": true, "score": 3, "last_activity_date": 1481498969, "last_edit_date": 1481498969, "creation_date": 1481498432, "answer_id": 41092234, "question_id": 41028835, "link": "https://stackoverflow.com/questions/41028835/multiple-self-referential-has-many-through-associations-in-rails-4/41092234#41092234", "title": "Multiple self-referential has_many :through associations in Rails 4.", "body": "<p>I've managed to solve it. The has_many that the has_many :through is based on, has to have the foreign_key option set. The code became:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :appointments_as_student, foreign_key: :student_id, class_name: Appointment\n  has_many :appointments_as_teacher, foreign_key: :teacher_id, class_name: Appointment\n\n  has_many :students, through: :appointments_as_teacher\n  has_many :teachers, through: :appointments_as_student\nend\n</code></pre>\n\n<p>Thank you everyone for your efforts.</p>\n"}], "owner": {"reputation": 211, "user_id": 464950, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e79430e7d2c06eff4ca4013e08181f1d?s=128&d=identicon&r=PG", "display_name": "Michiel Boekhoff", "link": "https://stackoverflow.com/users/464950/michiel-boekhoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 542, "favorite_count": 0, "accepted_answer_id": 41092234, "answer_count": 1, "score": 3, "last_activity_date": 1481498969, "creation_date": 1481151202, "question_id": 41028835, "link": "https://stackoverflow.com/questions/41028835/multiple-self-referential-has-many-through-associations-in-rails-4", "title": "Multiple self-referential has_many :through associations in Rails 4.", "body": "<p>I'm writing some code that uses multiple self-referential models, that I'd like to be able to match up using a join table as they are related through it. </p>\n\n<p>The models look like</p>\n\n<p>User.rb:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :appointments\n  has_many :students, through: :appointments\n  has_many :teachers, through: :appointments\nend\n</code></pre>\n\n<p>Appointment.rb:</p>\n\n<pre><code>class Appointment &lt; ActiveRecord::Base\n  belongs_to :student, class_name: User\n  belongs_to :teacher, class_name: User\nend\n</code></pre>\n\n<p>Unfortunately, the query generated by Rails is:</p>\n\n<pre><code>SELECT \"users\".* FROM \"users\" INNER JOIN \"appointments\" ON \"users\".\"id\" = \"appointments\".\"student_id\" WHERE \"appointments\".\"user_id\" = $1\n</code></pre>\n\n<p>Which throws an error, because Appointment does not have a user_id parameter.</p>\n\n<p>I've already tried specifying the <code>foreign_key</code> option, but this did nothing. Any other ways I could solve this elegantly?</p>\n\n<p>Thank you very much. </p>\n"}, {"tags": ["ruby", "regex", "overlap"], "answers": [{"comments": [{"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 0, "creation_date": 1481151010, "post_id": 41028635, "comment_id": 69265054, "body": "Works perfectly, also with complex patterns. <code>&quot;abaca&quot;.scan(&#47;(?=(\\w)(?:(?!\\1)(\\w))\\1)&#47;)  #=&gt; [[&quot;a&quot;, &quot;b&quot;], [&quot;a&quot;, &quot;c&quot;]]</code>."}, {"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1481166875, "post_id": 41028635, "comment_id": 69269835, "body": "The inspect seems not only unnecessary, but actually harmful to the end result."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1481174291, "post_id": 41028635, "comment_id": 69271814, "body": "...or positive lookbehind: <code>&quot;a-b-c-d&quot;.scan(&#47;(?&lt;=(\\w-\\w))&#47;).flatten</code>."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 3, "creation_date": 1481182844, "post_id": 41028635, "comment_id": 69275644, "body": "Guys, <code>inspect</code> is only used in the above snippet <b>to print out demo results</b> in the online demo. No one tells to use <code>inspect</code> in real code. I remove it to avoid further confusion."}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 10, "last_activity_date": 1481182983, "last_edit_date": 1481182983, "creation_date": 1481150239, "answer_id": 41028635, "question_id": 41028602, "link": "https://stackoverflow.com/questions/41028602/find-overlapping-regexp-matches/41028635#41028635", "title": "Find overlapping Regexp matches", "body": "<p>Use capturing inside a positive lookahead:</p>\n\n<pre><code>\"a-b-c-d\".scan(/(?=(\\w-\\w))/).flatten\n # =&gt; [\"a-b\", \"b-c\", \"c-d\"]\n</code></pre>\n\n<p>See <a href=\"http://ideone.com/vedrYG\" rel=\"noreferrer\">Ruby demo</a></p>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1481178504, "post_id": 41032128, "comment_id": 69273491, "body": "Your last technique is very very neat."}, {"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 1, "creation_date": 1481180606, "post_id": 41032128, "comment_id": 69274526, "body": "Nice answer, but I was explicitly asking for a regexp. The pattern above was just the simplest one I found to explain my problem. The pattern I actually use, is <code>(\\w)(?:(?!\\1)(\\w))\\1</code>."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 4, "last_activity_date": 1481182904, "last_edit_date": 1481182904, "creation_date": 1481173521, "answer_id": 41032128, "question_id": 41028602, "link": "https://stackoverflow.com/questions/41028602/find-overlapping-regexp-matches/41032128#41032128", "title": "Find overlapping Regexp matches", "body": "<p>I suggest a non-regex solution:</p>\n\n<pre><code>\"a-b-c-d\".delete('-').each_char.each_cons(2).map { |s| s.join('-') }\n  #=&gt; [\"a-b\", \"b-c\", \"c-d\"]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>\"a-b-c-d\".each_char.each_cons(3).select.with_index { |_,i| i.even? }.map(&amp;:join)\n  #=&gt; [\"a-b\", \"b-c\", \"c-d\"]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>enum = \"a-b-c-d\".each_char\na = []\nloop do\n  a &lt;&lt; \"%s%s%s\" % [enum.next, enum.next, enum.peek]\nend\na #=&gt; [\"a-b\", \"b-c\", \"c-d\"]\n</code></pre>\n"}], "owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 565, "favorite_count": 2, "accepted_answer_id": 41028635, "answer_count": 2, "score": 8, "last_activity_date": 1573195998, "creation_date": 1481150084, "last_edit_date": 1573195998, "question_id": 41028602, "link": "https://stackoverflow.com/questions/41028602/find-overlapping-regexp-matches", "title": "Find overlapping Regexp matches", "body": "<p>I want to find all matches within a given string including overlapping matches. How could I achieve it?</p>\n\n<pre><code># Example\n\"a-b-c-d\".???(/\\w-\\w/)  # =&gt; [\"a-b\", \"b-c\", \"c-d\"] expected\n\n# Solution without overlapped results\n\"a-b-c-d\".scan(/\\w-\\w/) # =&gt; [\"a-b\", \"c-d\"], but \"b-c\" is missing\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1481147679, "post_id": 41028054, "comment_id": 69263578, "body": "How can you use the refinement in instance methods?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1481147717, "post_id": 41028054, "comment_id": 69263608, "body": "And do you know of another way to achieve dynamic, scoped patches?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1481151551, "post_id": 41028054, "comment_id": 69265276, "body": "I appreciate your help. I saw that thread, but couldn&#39;t really make sense of it, which is why I posted here! I have 6 &#39;patch classes&#39; and I want to apply them all at once. It looks like refinements are going to be difficult to use. I will have to poke around for something else."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1481152145, "post_id": 41028054, "comment_id": 69265527, "body": "You could ask another question with a better description of your classes and how you&#39;d like to use them."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 5, "last_activity_date": 1481149133, "last_edit_date": 1481149133, "creation_date": 1481147583, "answer_id": 41028054, "question_id": 41027886, "link": "https://stackoverflow.com/questions/41027886/how-to-use-refinements-dynamically/41028054#41028054", "title": "How to use refinements dynamically", "body": "<p>As far as I know, the refinement is active until the end of the script when <code>using</code> is in main, and until the end of the current Class/Module definition when <code>using</code> is in a Class or Module.</p>\n\n<pre><code>module StringPatch\n  refine String do\n    def foo\n      true\n    end\n  end\nend\n\nclass PatchedClass\n  using StringPatch\n  puts \"test\".foo\nend\n\nclass PatchedClass\n  puts \"test\".foo #=&gt; undefined method `foo' for \"test\":String (NoMethodError)\nend\n</code></pre>\n\n<p>This would mean that if you manage to dynamically call <code>using</code> on a Class or Module, its effect will be directly removed.</p>\n\n<p>You cannot use <code>refine</code> in methods, but you can define methods in a Class that has been refined :</p>\n\n<pre><code>class PatchedClass\n  using StringPatch\n  def foo\n    \"test\".foo #=&gt; true\n  end\nend\n\nclass PatchedClass\n  def bar\n    \"test\".foo\n  end\nend\n\npatched = PatchedClass.new\nputs patched.foo  #=&gt; true\nputs patched.bar  #=&gt; undefined method `foo' for \"test\":String (NoMethodError)\n</code></pre>\n\n<p>For your questions, this <a href=\"https://bugs.ruby-lang.org/issues/11779\" rel=\"nofollow noreferrer\">discussion</a> could be interesting. It looks like refinements are restricted on purpose, but I don't know why :</p>\n\n<blockquote>\n  <p>Because refinement activation should be as static as possible.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1481181609, "post_id": 41030174, "comment_id": 69275027, "body": "I tried running the first three code snippets then <code>obj.instance_exec { &quot;&quot;.foo }</code> but got NoMethodError. I&#39;m close to giving up on dynamic, scoped patching of core classes."}, {"owner": {"reputation": 21, "user_id": 1198294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/449efc4ef0e5f9385560e86146ce1aba?s=128&d=identicon&r=PG&f=1", "display_name": "kawikak", "link": "https://stackoverflow.com/users/1198294/kawikak"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1483736100, "post_id": 41030174, "comment_id": 70234395, "body": "If you&#39;re going to use it per instance then you can just <code>obj.extend(YourModuleWithMethods)</code> and <code>obj.foo</code> Depending on what you&#39;re doing though it might not be performant to do it that way. You could see if the Decorator pattern would be enough if your refinements/additions don&#39;t go too deep."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1483736381, "post_id": 41030174, "comment_id": 70234531, "body": "After some more practice with refinements I can now understand what you&#39;re doing in this answer. Specifically with <code>obj.extend(StringPatch)</code>, I at first tried <code>obj.instance { &quot;&quot;.foo }</code> to test it but I now realize that wouldn&#39;t work because of lexical scope. All in all, thanks - this pattern of dual-purpose patches, I&#39;ve incorporated it into my core extensions gems such as <a href=\"http://github.com/maxpleaner/gemmy\" rel=\"nofollow noreferrer\">gemmy</a>"}], "tags": [], "owner": {"reputation": 21, "user_id": 1198294, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/449efc4ef0e5f9385560e86146ce1aba?s=128&d=identicon&r=PG&f=1", "display_name": "kawikak", "link": "https://stackoverflow.com/users/1198294/kawikak"}, "is_accepted": false, "score": 2, "last_activity_date": 1481159756, "creation_date": 1481159756, "answer_id": 41030174, "question_id": 41027886, "link": "https://stackoverflow.com/questions/41027886/how-to-use-refinements-dynamically/41030174#41030174", "title": "How to use refinements dynamically", "body": "<p>Refinements are strictly scoped and can't be used dynamically as it stands. I get around this by structuring modules such that I can use them a refinement or as a monkey patch when needed. There are still limitations to this approach, and with refinements in general, but still handy.</p>\n\n<pre><code>module StringPatch      \n    def foo\n      true\n    end\n\n    refine String do\n      include StringPatch\n    end\n end\n</code></pre>\n\n<p>Used as a refinement</p>\n\n<pre><code>class PatchedClass\n   using StringPatch\nend\n</code></pre>\n\n<p>Used as a single instance patch</p>\n\n<pre><code>obj = PatchedClass.new\nobj.extend(StringPatch)\n</code></pre>\n\n<p>You can of course also extend the whole class as a monkey patch but then you pollute the class forever and for all eternity.</p>\n\n<pre><code>PatchedClass.prepend(StringPatch)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 2, "last_activity_date": 1481184662, "last_edit_date": 1481184662, "creation_date": 1481184332, "answer_id": 41034587, "question_id": 41027886, "link": "https://stackoverflow.com/questions/41027886/how-to-use-refinements-dynamically/41034587#41034587", "title": "How to use refinements dynamically", "body": "<p>I appreciate the other answers but I think I have to add my own.</p>\n\n<p>It seems there's very little leeway with <code>using</code> - the error that it can't be used in methods is serious. The best wiggle room I found is to iteratively call it, passing a variable as argument.</p>\n\n<p>So if I have two patch classes, I can make a constant <code>Patches</code>, a list that includes both. Then in the class/module I want to load the patches, I can run the iterative <code>using</code>.</p>\n\n<pre><code>module StringPatch\n  refine String do\n    def patch; :string_patch; end\n  end\nend\n\nmodule HashPatch\n  refine Hash do\n    def patch; :hash_patch; end\n  end\nend\n\nPatches = [StringPatch, HashPatch]\nclass C\n  Patches.each { |x| using x }\n  def self.test\n    [''.patch, {}.patch]\n    new.test\n  end\n  def test\n    [''.patch, {}.patch]\n  end\nend\n\nC.test\n</code></pre>\n\n<p>The <code>using</code> does make the patches available in both instance and class scope. </p>\n\n<p>The limitation is that there is no way to abstract away the <code>using</code> call.</p>\n\n<p>I can't say <code>Patches.each &amp;method(:using)</code></p>\n\n<p>or move <code>Patches.each { |x| using x }</code> to a method,</p>\n\n<p>or use <code>eval \"Patches.each { |x| using x}\"</code></p>\n"}], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 688, "favorite_count": 1, "accepted_answer_id": 41028054, "answer_count": 3, "score": 4, "last_activity_date": 1481184662, "creation_date": 1481146886, "question_id": 41027886, "link": "https://stackoverflow.com/questions/41027886/how-to-use-refinements-dynamically", "title": "How to use refinements dynamically", "body": "<p>Trying to make sense of this 'refinements' business.</p>\n\n<p>I'm making a module which refines a core class:</p>\n\n<pre><code>module StringPatch\n  refine String do\n    def foo\n      true\n    end\n  end\nend\n</code></pre>\n\n<p>Then a class to use the refinement</p>\n\n<pre><code>class PatchedClass\nend\n\nPatchedClass.send :using, StringPatch\n</code></pre>\n\n<p>I get this error:</p>\n\n<pre><code>RuntimeError: Module#using is not permitted in methods\n</code></pre>\n\n<p>How can I make this work?\nI am trying to dynamically patch core classes in a certain scope only. I want to make the patches available in the class and instance scope. </p>\n"}, {"tags": ["ruby", "instance-variables", "named-parameters"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1481146277, "post_id": 41027681, "comment_id": 69262886, "body": "Using  metaprogramming here is asking for trouble. Your trivial case is the exception, not the rule. If you have a class like this where you really don&#39;t care, it&#39;s just for storing data, use <code>OpenStruct</code> as a base class and call <code>super</code>. That&#39;s an implementation you can trust and it takes one line of code."}, {"owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1481148312, "post_id": 41027681, "comment_id": 69263875, "body": "@tadman Thanks for the duplicate detection. I searched for a similar question but didn&#39;t find this question. Now you detected a nearly similar question. Actually I&#39;m beginning a new project with many parameters and I wanted to research in different directions. OpenStruct will be one option."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1481151184, "post_id": 41027681, "comment_id": 69265137, "body": "It&#39;s a pattern that&#39;s fairly common, but not so common there&#39;s an idiomatic way of doing it. Hope you find the right fit."}], "owner": {"reputation": 25573, "user_id": 676874, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/c8e67ec01dc3e7c402255ff26785863f?s=128&d=identicon&r=PG", "display_name": "knut", "link": "https://stackoverflow.com/users/676874/knut"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "closed_date": 1481146254, "answer_count": 0, "score": 0, "last_activity_date": 1481146051, "creation_date": 1481146051, "question_id": 41027681, "link": "https://stackoverflow.com/questions/41027681/how-to-copy-named-parameters-to-variables", "closed_reason": "Duplicate", "title": "How to copy named parameters to variables?", "body": "<p>Imagine this ruby code:</p>\n\n<pre><code>class Class1\n  def initialize( par1: 1, par2: 2, par3: 3)\n    @par1 = par1\n    @par2 = par2\n    @par3 = par3\n  end\nend\n\np Class1.new ##&lt;Class1:0x00000002e5c930 @par1=1, @par2=2, @par3=3&gt;\np Class1.new(par1: 'one', par2: 'two', par3: 'three') ##&lt;Class1:0x00000002de0308 @par1=\"one\", @par2=\"two\", @par3=\"three\"&gt;\n</code></pre>\n\n<p>How can I simplify the definition of the variables?</p>\n\n<p>I found a solution with <code>local_variables</code> and <code>instance_variable_set</code>:</p>\n\n<pre><code>class Class2\n  def initialize( par1: 1, par2: 2, par3: 3)\n    local_variables.each{|local|\n      #define attribute\n      var = instance_variable_set(\"@#{local}\", binding.local_variable_get(local))\n    }\n  end\nend\n\np Class2.new ##&lt;Class2:0x00000002e5c930 @par1=1, @par2=2, @par3=3&gt;\np Class2.new(par1: 'one', par2: 'two', par3: 'three') ##&lt;Class2:0x00000002de0308 @par1=\"one\", @par2=\"two\", @par3=\"three\"&gt;\n</code></pre>\n\n<p>But is there an easier way?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "soap", "rubygems", "response"], "owner": {"reputation": 11, "user_id": 6124367, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8edb08309fad0a14c8d980d54c9f6de?s=128&d=identicon&r=PG&f=1", "display_name": "Pranay Kolakkar", "link": "https://stackoverflow.com/users/6124367/pranay-kolakkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1481145475, "creation_date": 1481145475, "question_id": 41027548, "link": "https://stackoverflow.com/questions/41027548/washoutsoap-gem-slow-in-rendering-huge-response", "title": "WashOut::SOAP gem slow in rendering huge response", "body": "<p>I have a an array of hash of arrays. \nrender soap: { array_hash_return: response, status: { error_code: error_code, error_string: error_string } }</p>\n\n<p>where response is an array of hash of arrays of almost about 1000 entries takes about 8 seconds to render the response. </p>\n\n<p>Going through the gem files I dont see how I can spin a thread at the side to manually create the response and respond back or if there is a better way to create the soap response. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 1479, "user_id": 2506819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b60435154915157dfd7ebfc04164930?s=128&d=identicon&r=PG", "display_name": "fanta", "link": "https://stackoverflow.com/users/2506819/fanta"}, "edited": false, "score": 2, "creation_date": 1481147015, "post_id": 41027391, "comment_id": 69263251, "body": "I bet you don&#39;t have <a href=\"https://github.com/thoughtbot/shoulda-matchers\" rel=\"nofollow noreferrer\">github.com/thoughtbot/shoulda-matchers</a> gem"}], "answers": [{"tags": [], "owner": {"reputation": 326, "user_id": 5225070, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc7c09734916468b92116a587d808e1b?s=128&d=identicon&r=PG", "display_name": "Pablo Gonzaga", "link": "https://stackoverflow.com/users/5225070/pablo-gonzaga"}, "is_accepted": true, "score": 4, "last_activity_date": 1481215047, "last_edit_date": 1481215047, "creation_date": 1481169055, "answer_id": 41031467, "question_id": 41027391, "link": "https://stackoverflow.com/questions/41027391/rspec-tests-failing-with-undefined-method-validate-uniqueness-of/41031467#41031467", "title": "RSpec tests failing with undefined method `validate_uniqueness_of&#39;", "body": "<p>You have to add the gem to the Gemfile:</p>\n\n<p><strong>Gemfile</strong></p>\n\n<pre><code>group :test do\n  gem 'shoulda-matchers'\nend\n</code></pre>\n\n<p>And include it:</p>\n\n<p><strong>spec/rails_helper.rb</strong></p>\n\n<pre><code>RSpec.configure do |config|\n  config.include(Shoulda::Matchers::ActiveModel, type: :model)\n  config.include(Shoulda::Matchers::ActiveRecord, type: :model)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 673, "user_id": 834242, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9233cdd1a33420350d9290b1772e74e?s=128&d=identicon&r=PG", "display_name": "Eduardo Lago Aguilar", "link": "https://stackoverflow.com/users/834242/eduardo-lago-aguilar"}, "is_accepted": false, "score": 1, "last_activity_date": 1488383911, "creation_date": 1488383911, "answer_id": 42536368, "question_id": 41027391, "link": "https://stackoverflow.com/questions/41027391/rspec-tests-failing-with-undefined-method-validate-uniqueness-of/42536368#42536368", "title": "RSpec tests failing with undefined method `validate_uniqueness_of&#39;", "body": "<p>I made it work by adding this:</p>\n\n<p><strong>Gemfile</strong></p>\n\n<pre><code>group :test do\n  gem 'shoulda-matchers'\nend\n</code></pre>\n\n<p><strong>rails_helper.rb</strong></p>\n\n<pre><code>require 'shoulda/matchers'\n\nShoulda::Matchers.configure do |config|\n  config.integrate do |with|\n    with.test_framework :rspec\n    with.library :rails\n  end\nend\n</code></pre>\n\n<p><strong>.rspec</strong></p>\n\n<pre><code>--color\n--require spec_helper\n--require rails_helper\n</code></pre>\n"}], "owner": {"reputation": 1043, "user_id": 6476080, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b82fc060e266edfb5c9695c9f4202b4d?s=128&d=identicon&r=PG&f=1", "display_name": "alpaca", "link": "https://stackoverflow.com/users/6476080/alpaca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1127, "favorite_count": 0, "accepted_answer_id": 41031467, "answer_count": 2, "score": 5, "last_activity_date": 1488383911, "creation_date": 1481144896, "question_id": 41027391, "link": "https://stackoverflow.com/questions/41027391/rspec-tests-failing-with-undefined-method-validate-uniqueness-of", "title": "RSpec tests failing with undefined method `validate_uniqueness_of&#39;", "body": "<p>With Rails 5 and RSpec 3.5, I'm getting the following error.</p>\n\n<pre><code>  1) User\n     Failure/Error: it { should validate_uniqueness_of(:auth_token)}\n\n     NoMethodError:\n       undefined method `validate_uniqueness_of' for #&lt;RSpec::ExampleGroups::User:0x007fab919f8cf\n8&gt;\n     # ./spec/models/user_spec.rb:14:in `block (2 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>I've googled around for the right syntax but couldn't find the solution. Does anyone have an idea of what to use here? Thanks</p>\n"}, {"tags": ["ruby", "class-variables"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1481143581, "post_id": 41027031, "comment_id": 69261378, "body": "First question: Why are you using class variables? These share information between the class and instances in a way that often leads to a confusion of concerns. <code>self.class.allBooks</code> is better than directly accessing it."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1481143613, "post_id": 41027031, "comment_id": 69261398, "body": "Ruby conventions also strongly recommend that you name things in the style of <code>see_book_shelf</code> with no capitals in variables or method names. Classes have mixed case, leading capital, like you have here."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1481143671, "post_id": 41027031, "comment_id": 69261428, "body": "Due to the way this retains references of any Book instance created this is basically asking for memory problems. You&#39;d be better off creating a BookShelf class that&#39;s specifically intended to store books rather than delegating this responsibility to the Book&#39;s class level."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1481145620, "post_id": 41027031, "comment_id": 69262567, "body": "Perhaps define <code>VARIABLE = @@book_count</code> in the Book class, then use <code>Book::VARIABLE</code> outside of the class. But not sure if this is a recommended technique, so be wary."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1481146002, "post_id": 41027031, "comment_id": 69262749, "body": "@sagarpandya82 Sharing constants is also a messy business. It&#39;s better to have a thin layer of intermediation via a method call so that way you have some isolation and the method&#39;s implementation can change without breaking tons of stuff."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1481146784, "post_id": 41027031, "comment_id": 69263128, "body": "<b>Reader challenge</b>: How could you do this if there were no getter method for <code>@@bookCount</code> and you were not permitted to use the method <a href=\"http://ruby-doc.org/core-2.3.0/Module.html#method-i-class_variable_get\" rel=\"nofollow noreferrer\">Module#class_variable_get</a>?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6225298"}, "edited": false, "score": 0, "creation_date": 1481144223, "post_id": 41027086, "comment_id": 69261788, "body": "Still, directly accessing variables is a bad way of doing it. You should add getters in your class. Or create a new class BookShelf to store all your book."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1481146033, "post_id": 41027086, "comment_id": 69262765, "body": "<code>self.class</code> also works here if this is in an instance method."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6225298"}, "is_accepted": false, "score": 0, "last_activity_date": 1481143708, "creation_date": 1481143708, "answer_id": 41027086, "question_id": 41027031, "link": "https://stackoverflow.com/questions/41027031/how-to-access-a-class-variable-from-the-outside-in-ruby/41027086#41027086", "title": "How to access a class variable from the outside in ruby?", "body": "<p>You have to specify the Class of the variable :</p>\n\n<pre><code>def seeBookShelf\n  if Book.bookCount == 0\n    puts \"Your bookshelf is empty.\"\n  else\n    puts \"You have \" + Book.bookCount + \" books in your bookshelf:\"\n    puts Book.allBooks\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1481146075, "post_id": 41027218, "comment_id": 69262787, "body": "Technically correct, but also ill-advised. The <code>class_variable_get</code> method is intended for reflection purposes, not general purpose programming."}], "tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": false, "score": 11, "last_activity_date": 1481144182, "creation_date": 1481144182, "answer_id": 41027218, "question_id": 41027031, "link": "https://stackoverflow.com/questions/41027031/how-to-access-a-class-variable-from-the-outside-in-ruby/41027218#41027218", "title": "How to access a class variable from the outside in ruby?", "body": "<p>Use <code>class_variable_get</code> to access a class variable outside of a class:</p>\n\n<pre><code>class Foo\n  @@a = 1\nend\n\nFoo.class_variable_get(:@@a)\n=&gt; 1\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1481145259, "post_id": 41027327, "comment_id": 69262368, "body": "almost the same answer as @Gregory did."}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "reply_to_user": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1481152097, "post_id": 41027327, "comment_id": 69265510, "body": "Yeah, we were aswering at the same time, I like to try my answers and publish them as a whole runnable piece, often then I&#39;m beaten by someone faster, I think our solution is better than Ilya&#39;s, have you tried them ? noticed the error when bookcount &gt; 0 ?"}], "tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1481144615, "creation_date": 1481144615, "answer_id": 41027327, "question_id": 41027031, "link": "https://stackoverflow.com/questions/41027031/how-to-access-a-class-variable-from-the-outside-in-ruby/41027327#41027327", "title": "How to access a class variable from the outside in ruby?", "body": "<p>You need a getter to access the class variable, try this code.\nSee <a href=\"http://www.railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby/\" rel=\"nofollow noreferrer\">http://www.railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby/</a> for an explanation.\nYou are also better to use string interpolation otherwise you get a Type error, also it is more Rubyesque.</p>\n\n<pre><code>class Book\n  @@bookCount = 0\n\n  def self.bookCount\n    @@bookCount\n  end\nend\n\ndef seeBookShelf\n  if Book.bookCount == 0\n    puts \"Your bookshelf is empty.\"\n  else\n    puts \"You have #{Book.bookCount} books in your bookshelf:\"\n  end\nend\n\nseeBookShelf # Your bookshelf is empty.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "is_accepted": false, "score": 3, "last_activity_date": 1565810080, "last_edit_date": 1565810080, "creation_date": 1481157170, "answer_id": 41029807, "question_id": 41027031, "link": "https://stackoverflow.com/questions/41027031/how-to-access-a-class-variable-from-the-outside-in-ruby/41029807#41029807", "title": "How to access a class variable from the outside in ruby?", "body": "<p>You can use <a href=\"http://apidock.com/ruby/Module/class_eval\" rel=\"nofollow noreferrer\"><code>class_eval</code></a> to evaluate a block of code within the scope of a specific class:</p>\n\n<pre><code>class Book\n  @@bookCount = 1\nend\n\nBook.class_eval '@@bookCount'\n# =&gt; 1\n</code></pre>\n\n<p>And just for fun... you can actually do all kinds of trickery with <code>class_eval</code> such as define a new method in the class without monkey patching:</p>\n\n<pre><code>Book.class_eval { @@bookCount = 5 }\nBook.class_eval '@@bookCount'\n# =&gt; 5\n\nBook.class_eval do\n  def self.hey_look_a_new_method\n    return \"wow\"\n  end\nend\n\nBook.hey_look_a_new_method\n# =&gt; \"wow\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "is_accepted": false, "score": 3, "last_activity_date": 1481158112, "creation_date": 1481158112, "answer_id": 41029946, "question_id": 41027031, "link": "https://stackoverflow.com/questions/41027031/how-to-access-a-class-variable-from-the-outside-in-ruby/41029946#41029946", "title": "How to access a class variable from the outside in ruby?", "body": "<p>For most cases, class instance variables are preferred to class variables. The latter are prone to all manner of strange behaviour when used with inheritance. </p>\n\n<p>Consider:</p>\n\n<pre><code>class Book\n  @book_count = 0\n  @all_books = []\n\n  class &lt;&lt; self\n    attr_reader :book_count\n    attr_reader :all_books\n  end\n\n  # further code omitted.\n\nend\n</code></pre>\n\n<p>With this code Book.book_count and Book.all_books get the expected data.</p>\n"}], "owner": {"reputation": 105, "user_id": 7264429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3005b703b1c04dd9b13318a8740f7175?s=128&d=identicon&r=PG&f=1", "display_name": "winterwolff", "link": "https://stackoverflow.com/users/7264429/winterwolff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8574, "favorite_count": 0, "answer_count": 5, "score": 8, "last_activity_date": 1565810080, "creation_date": 1481143485, "question_id": 41027031, "link": "https://stackoverflow.com/questions/41027031/how-to-access-a-class-variable-from-the-outside-in-ruby", "title": "How to access a class variable from the outside in ruby?", "body": "<p>I'm trying to access a class variable from a method outside of the class.</p>\n\n<p>This is my class:</p>\n\n<pre><code>class Book\n\n  @@bookCount = 0\n  @@allBooks = []\n\n  def self.allBooks\n    @@allBooks\n  end\n\n  def self.bookCount\n    @@bookCount\n  end\n\n  attr_accessor :name,:author,:date,:genre,:rating\n\n  def initialize(name, author, date, genre, rating)\n      @name = name\n      @author = author\n      @date = date\n      @genre = genre\n      @rating = rating\n      @@bookCount += 1\n      @@allBooks &lt;&lt; self\n  end\n\nend\n</code></pre>\n\n<p>This is the method trying to access the class variable @@bookCount</p>\n\n<pre><code>def seeBookShelf\n  if @@bookCount == 0\n    puts \"Your bookshelf is empty.\"\n  else\n    puts \"You have \" + @bookCount + \" books in your bookshelf:\"\n    puts allBooks\n  end\nend\n</code></pre>\n\n<p>When I try to execute the method I get this:</p>\n\n<pre><code>undefined local variable or method `bookCount' for main:Object (NameError)\n</code></pre>\n\n<p>How can I access bookCount from the outside?</p>\n"}, {"tags": ["ruby", "unicode", "emoji", "irb"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1481144010, "post_id": 41026793, "comment_id": 69261643, "body": "This might depend on the capabilities of your terminal more than Ruby itself. Remember that <code>&quot;\\u{....}&quot;</code> is a valid representation of a UTF-8 character, it&#39;s like <code>\\n</code>. What happens if you <code>puts</code> those?"}, {"owner": {"reputation": 53, "user_id": 5262141, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aoIwEZOZAdg/AAAAAAAAAAI/AAAAAAAAA64/_12w_NA-R2A/photo.jpg?sz=128", "display_name": "Christopher Yammine", "link": "https://stackoverflow.com/users/5262141/christopher-yammine"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1481144325, "post_id": 41026793, "comment_id": 69261848, "body": "@tadman <code>puts &quot;\ud83c\udf2d&quot;</code> does actually print the \ud83c\udf2d to stdout. This may just work for what I&#39;m trying to do then."}], "answers": [{"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 2, "creation_date": 1481145985, "post_id": 41027308, "comment_id": 69262739, "body": "&quot;As emoji are constantly being introduced...&quot; Indeed, both \ud83c\udf2d and \ud83c\udf7e were introduced in Unicode 8.0 (June 2015), which was not supported by Ruby <a href=\"https://github.com/ruby/ruby/blob/v2_3_0/NEWS#L141\" rel=\"nofollow noreferrer\">until version 2.3</a>."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1481144520, "creation_date": 1481144520, "answer_id": 41027308, "question_id": 41026793, "link": "https://stackoverflow.com/questions/41026793/unicode-ruby-expected-behavior/41027308#41027308", "title": "Unicode &amp; Ruby - Expected behavior?", "body": "<p>Ruby may show a string with various <em>backslash</em> encodings for various reasons, one of which is irregular characters. For example:</p>\n\n<pre><code>\"\n\"\n# =&gt; \"\\n\"\n'\"'\n# =&gt; \"\\\"\"\n</code></pre>\n\n<p>This doesn't mean the string contains an actual backslash, but rather that the version shown by <code>inspect</code> contains one. This is a long tradition dating back at least to the era of C in the 1970s where <code>\\n</code> and such have been understood to mean \"newline character\".</p>\n\n<p>In the case of emoji you might find that some are displayed and others aren't. This may be an interaction between the version of Ruby you're using and the terminal settings. As emoji are constantly being introduced you might find older ones display properly but Ruby's not confident enough with new ones to render them as-is, perhaps concerned that's an invalid Unicode character. Rather than showing something blank or the infamous <em>question mark</em> character, it shows the literal code for the character.</p>\n"}], "owner": {"reputation": 53, "user_id": 5262141, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-aoIwEZOZAdg/AAAAAAAAAAI/AAAAAAAAA64/_12w_NA-R2A/photo.jpg?sz=128", "display_name": "Christopher Yammine", "link": "https://stackoverflow.com/users/5262141/christopher-yammine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "accepted_answer_id": 41027308, "answer_count": 1, "score": 1, "last_activity_date": 1481144520, "creation_date": 1481142521, "question_id": 41026793, "link": "https://stackoverflow.com/questions/41026793/unicode-ruby-expected-behavior", "title": "Unicode &amp; Ruby - Expected behavior?", "body": "<p>Ruby Version: ruby 2.2.2p95 (2015-04-13 revision 50295) [x86_64-darwin14]</p>\n\n<p>Readline Version: 6.2</p>\n\n<p>I'm working with some emojis and many of them behave correctly with the exception of 2. The \ud83c\udf2d and \ud83c\udf7e emojis. Here is some terminal output:</p>\n\n<pre><code>(byebug) \"\ud83c\udf2d\"\n\"\\u{1F32D}\"\n(byebug) \"\ud83d\udecd\"\n\"\ud83d\udecd\"\n(byebug) \"\ud83c\udf7e\"\n\"\\u{1F37E}\"\n</code></pre>\n\n<p>Can someone tell me what's going on here? Is it just some encoding screwiness with irb? I might be snow-blind since I've been wrestling with this for so long so if there's any more information required to answer this please let me know.</p>\n"}, {"tags": ["ruby", "modulus"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1481142024, "post_id": 41026507, "comment_id": 69260534, "body": "This is because when i = 6 the loop runs and <code>array[6]</code> is <code>nil</code> use <code>i &lt; array.length</code>"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1481142050, "post_id": 41026507, "comment_id": 69260550, "body": "common off by one error, always have to be careful of those!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6225298"}, "edited": false, "score": 1, "creation_date": 1481142245, "post_id": 41026507, "comment_id": 69260670, "body": "you should use the .even? method instead of using a modulo"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1481144871, "post_id": 41026507, "comment_id": 69262173, "body": "Do you want even or odd? Inquiring minds want to know."}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1481143459, "post_id": 41026668, "comment_id": 69261307, "body": "The question and the method are misleading since the question states <i>&quot;an even index number and an even value&quot;</i> but the method name suggests the opposite (which you have posted) but then the method body is searching even indexes for odd numbers. I have no idea what is going on now but +1 for a reasonable explanation."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1481144103, "post_id": 41026668, "comment_id": 69261709, "body": "The method should be called <code>even_or_odd_or_something</code>"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1481142774, "last_edit_date": 1481142774, "creation_date": 1481142123, "answer_id": 41026668, "question_id": 41026507, "link": "https://stackoverflow.com/questions/41026507/error-in-modulus-method-in-ruby/41026668#41026668", "title": "error in modulus method in ruby", "body": "<p>When <code>i</code> is equal to <code>array.length</code>, <code>array[i]</code> is nil.</p>\n\n<p>What is <code>nil % 2</code>? It is undefined.</p>\n\n<pre><code>def odd_value_and_position(array)\n    newArray=[] #create new array\n    i=0 #i=0\n    while i &lt; array.length #loop while\n        newArray.push(array[i]) if array[i] % 2 != 0\n        i = i + 2\n    end\n\n    return newArray\nend\n\nputs odd_value_and_position([0,1,2,3,4,5]) #=&gt; []\nputs odd_value_and_position([1,2,3,4,5])   #=&gt; [1,3,5]\n</code></pre>\n\n<p>Due to the fact that the first element in a Ruby Array has 0 as index, I'm not sure you get the result you expected. See examples in code.</p>\n\n<p>A more Rubyish example would be :</p>\n\n<pre><code>def odd_value_and_position(array)\n  array.select.with_index(1){|x,i| x.odd? &amp;&amp; i.odd?}\nend\n\nputs odd_value_and_position([1,2,3,4,5]) #=&gt; [1,3,5]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481142817, "post_id": 41026835, "comment_id": 69260989, "body": "Nice. No, let&#39;s see what the OP really wanted. Is the first index odd or even? :)"}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 3, "last_activity_date": 1481142665, "creation_date": 1481142665, "answer_id": 41026835, "question_id": 41026507, "link": "https://stackoverflow.com/questions/41026507/error-in-modulus-method-in-ruby/41026835#41026835", "title": "error in modulus method in ruby", "body": "<p>Another way to do this:</p>\n\n<pre><code>def evens arr\n  arr.select.with_index { |e,i| e.even? &amp;&amp; i.even? }\nend\n\nevens [0,1,2,3,4,5] #=&gt; [0,2,4]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481143842, "post_id": 41027094, "comment_id": 69261535, "body": "3 equivalent answers for this question. But what is the question exactly? That&#39;s the question :D"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481144326, "post_id": 41027094, "comment_id": 69261847, "body": "A little picky are we?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481144718, "post_id": 41027094, "comment_id": 69262082, "body": "Let&#39;s say it&#39;s just a higher standard than for everybody else, due to your reputation and the quality of your answers on other questions. Since Ruby is dynamic, method names are extremely important. Your edit is perfectly fine, now."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1481144302, "last_edit_date": 1481144302, "creation_date": 1481143739, "answer_id": 41027094, "question_id": 41026507, "link": "https://stackoverflow.com/questions/41026507/error-in-modulus-method-in-ruby/41027094#41027094", "title": "error in modulus method in ruby", "body": "<p>If I understand the question right, I'd go with something like:</p>\n\n<pre><code>def some_method_name(array)\n  array.select.with_index { |*ij| \n    ij.all?(&amp;:even?)\n  }\nend\n\nputs some_method_name([0, 1, 2, 3, 4, 5, 10, 13, 21, 22, 30])\n\n# &gt;&gt; 0\n# &gt;&gt; 2\n# &gt;&gt; 4\n# &gt;&gt; 10\n# &gt;&gt; 30\n</code></pre>\n\n<p>Here's what it's doing:</p>\n\n<pre><code>def some_method_name(array)\n  array.select.with_index { |*ij| \n    ij               # =&gt; [0, 0], [1, 1], [2, 2], [3, 3], [4, 4], [5, 5], [10, 6], [13, 7], [21, 8], [22, 9], [30, 10]\n    ij.all?(&amp;:even?) # =&gt; true,   false,  true,   false,  true,   false,  true,    false,   false,   false,   true\n  }\nend\n\nputs some_method_name([0, 1, 2, 3, 4, 5, 10, 13, 21, 22, 30])\n\n# &gt;&gt; 0\n# &gt;&gt; 2\n# &gt;&gt; 4\n# &gt;&gt; 10\n# &gt;&gt; 30\n</code></pre>\n\n<p>There are a couple problems with the original code. </p>\n\n<p>Using <code>while</code> loops easily leads to problems with off-by-one errors, or loops that never trigger, or loops that never end. </p>\n\n<p>To combat that in Ruby, we use <code>each</code> and <code>map</code>, <code>select</code>, <code>reject</code> or similar iterators to loop over the array, and process each element in turn, then base the logic on that. </p>\n\n<p><code>array.select</code> is looking at each element and applying the logic in the block, looking for \"truthy\" results. <code>with_index</code> adds the index of the iteration as a second value passed into the block. <code>*id</code> turns the two values being passed in into an array, making it easy to apply <code>all?</code> and its <code>even?</code> test. If <code>even?</code> returns <code>true</code> to both then <code>all?</code> triggers and returns <code>true</code> again which signals to <code>select</code> to return that element of the array.</p>\n"}], "owner": {"reputation": 81, "user_id": 7188090, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/36c221bf500045cc27bffb1db9978f58?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Math", "link": "https://stackoverflow.com/users/7188090/jonathan-math"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1481144302, "creation_date": 1481141558, "question_id": 41026507, "link": "https://stackoverflow.com/questions/41026507/error-in-modulus-method-in-ruby", "title": "error in modulus method in ruby", "body": "<p>I am trying to write a method that takes in an array as an argument and returns an array of the numbers in the argument that are have both an even index number and an even value. I am not sure why, but it is giving me the error  \"undefined method %\" in line 5. Can someone explain how I can fix this?</p>\n\n<pre><code>def odd_value_and_position(array)\n    newArray=[] #create new array\n    i=0 #i=0\n    while i &lt;= array.length #loop while\n        newArray.push(array[i]) if array[i] % 2 != 0\n        i = i + 2\n    end\n\n    return newArray\nend\n\nputs odd_value_and_position([0,1,2,3,4,5])\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter"], "answers": [{"comments": [{"owner": {"reputation": 236, "user_id": 2107602, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/97734418eb61d832e484aaa67ccd5dde?s=128&d=identicon&r=PG", "display_name": "Bryan White", "link": "https://stackoverflow.com/users/2107602/bryan-white"}, "edited": false, "score": 0, "creation_date": 1481143185, "post_id": 41026398, "comment_id": 69261168, "body": "I had to tweak it a bit (I left some important code out of my example) but now it loops properly. If it breaks, it just loops back around and tries again. Thank you."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6225298"}, "is_accepted": true, "score": 1, "last_activity_date": 1481141187, "creation_date": 1481141187, "answer_id": 41026398, "question_id": 41026299, "link": "https://stackoverflow.com/questions/41026299/how-do-i-run-this-ruby-script-again-if-this-condition-fails/41026398#41026398", "title": "How do I run this ruby script again if this condition fails?", "body": "<p>If i understood, you want to run this piece code everytime that the size of the tweet is superior to 140. I think that the easiest solution is to write it in a loop and exit the loop when the size is valid.</p>\n\n<pre><code>while true\n    tweet_text = new_tweet # Change the text of tge tweet or the loo will loop forever\n    if tweet_text.size &lt;= 140\n        client.update( tweet_text )\n        p \"#{Time.now}: #{tweet_text}\"\n        break\n    else\n        p \"Tweet exceeded 140 characters. Try again.\"\n    end\nend\n</code></pre>\n\n<p>Hope it helped,</p>\n\n<p>Gregory.</p>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 0, "last_activity_date": 1481143496, "creation_date": 1481143496, "answer_id": 41027040, "question_id": 41026299, "link": "https://stackoverflow.com/questions/41026299/how-do-i-run-this-ruby-script-again-if-this-condition-fails/41027040#41027040", "title": "How do I run this ruby script again if this condition fails?", "body": "<p>If you know your loop will converge to a tweet shorter than 140, Gregory's answer is fine.</p>\n\n<p>Otherwise, you might want to remove some substring if the tweet is too long :</p>\n\n<pre><code>if tweet_text.size &lt;= 140\n  client.update( tweet_text )\n  p \"#{Time.now}: #{tweet_text}\"\nelse\n  p \"Tweet exceeded 140 characters. Truncating.\"\n  truncated_tweet = tweet_text[0,69]+\"..\"+tweet_text[-69,69]\n  client.update( truncated_tweet )\n  p \"#{Time.now}: #{truncated_tweet}\"\nend\n</code></pre>\n"}], "owner": {"reputation": 236, "user_id": 2107602, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/97734418eb61d832e484aaa67ccd5dde?s=128&d=identicon&r=PG", "display_name": "Bryan White", "link": "https://stackoverflow.com/users/2107602/bryan-white"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 41026398, "answer_count": 2, "score": 1, "last_activity_date": 1481143496, "creation_date": 1481140840, "question_id": 41026299, "link": "https://stackoverflow.com/questions/41026299/how-do-i-run-this-ruby-script-again-if-this-condition-fails", "title": "How do I run this ruby script again if this condition fails?", "body": "<p>I built a Markov bot in Ruby for yuks and I'm setting up a local chron job to make it tweet four times a day. But my code's a bit slappy and noobish. The returned Markov tweets occasionally exceed 140 characters and if I'm running the script manually, that's fine. I have it set up to fail pleasantly. But if I'm going to automate this, I'd like to set it up so that if it fails because it exceeds the character count, I'd like it to try again until it succeeds. Here's my super basic if statement.</p>\n\n<pre><code>if tweet_text.size &lt;= 140\n    client.update( tweet_text )\n    p \"#{Time.now}: #{tweet_text}\"\nelse\n    p \"Tweet exceeded 140 characters. Try again.\"\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "ruby-on-rails-5", "rspec-rails"], "answers": [{"comments": [{"owner": {"reputation": 750, "user_id": 4032946, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d430e8647c39d6d9f8db1a660e13d49c?s=128&d=identicon&r=PG&f=1", "display_name": "Avir94", "link": "https://stackoverflow.com/users/4032946/avir94"}, "edited": false, "score": 1, "creation_date": 1481219926, "post_id": 41027774, "comment_id": 69299386, "body": "Thank you very much. Worked perfectly."}, {"owner": {"reputation": 440, "user_id": 5770488, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1b55e0b62b3d2dc2ad5aa4fa440c1048?s=128&d=identicon&r=PG&f=1", "display_name": "nrmb", "link": "https://stackoverflow.com/users/5770488/nrmb"}, "edited": false, "score": 0, "creation_date": 1499331010, "post_id": 41027774, "comment_id": 76863540, "body": "I had a similar error and this works perfectly. Thank you too!"}], "tags": [], "owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "is_accepted": true, "score": 3, "last_activity_date": 1481146397, "creation_date": 1481146397, "answer_id": 41027774, "question_id": 41026168, "link": "https://stackoverflow.com/questions/41026168/class-name-must-exist-rails-5-rspec-testing-associations/41027774#41027774", "title": "&quot;[Class_Name] must exist&quot; rails 5 rspec testing associations", "body": "<p>Your spec specifies ids for <code>service_id</code> and <code>request_id</code> here:</p>\n\n<pre><code>request_id: 1, service_id: 3\n</code></pre>\n\n<p>but these don't correspond to actual stored Service/Request models that are in the database - ie there is no Service with an id of 3 or Request with an id of 1. This is what the error message is referring to.</p>\n\n<p>You can actually create these too, and the message will then go away.\neg:</p>\n\n<pre><code>let(:service) { Service.create(&lt;valid service params go here&gt;) }\nlet(:request) { Request.create(&lt;valid request params go here&gt;) }\nsubject {\n  described_class.new(userid: 'bbogus', status: 'new', request_id: request.id, service_id: service.id)\n}\n</code></pre>\n"}], "owner": {"reputation": 750, "user_id": 4032946, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/d430e8647c39d6d9f8db1a660e13d49c?s=128&d=identicon&r=PG&f=1", "display_name": "Avir94", "link": "https://stackoverflow.com/users/4032946/avir94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1085, "favorite_count": 0, "accepted_answer_id": 41027774, "answer_count": 1, "score": 2, "last_activity_date": 1481146397, "creation_date": 1481140377, "last_edit_date": 1481145640, "question_id": 41026168, "link": "https://stackoverflow.com/questions/41026168/class-name-must-exist-rails-5-rspec-testing-associations", "title": "&quot;[Class_Name] must exist&quot; rails 5 rspec testing associations", "body": "<p>In my rails application, I have Service, Request, and ServiceRequest models. </p>\n\n<p>The associations are such that servicerequests belong_to both Service and Request. </p>\n\n<p>When testing servicerequests with rspec, I have this:</p>\n\n<pre><code>require \"rails_helper\"\n\ndescribe Servicerequest, :type =&gt; :model do\n\n  subject {\n    described_class.new(userid: 'bbogus', status: 'new', request_id: 1, service_id: 3)\n  }\n\n  it \"is valid with valid attributes\"  do\n    expect(subject).to be_valid\n  end\n\n  it \"is not valid without a userid\" do\n    subject.userid = nil\n    expect(subject).to_not be_valid\n  end\n\n  it \"is not valid without a status\" do\n    subject.status = nil\n    expect(subject).to_not be_valid\n  end\n\n  it \"is not valid without a request_id\" do\n    subject.request_id = nil\n    expect(subject).to_not be_valid\n  end\n\n  it \"is not valid without a service_id\" do\n    subject.service_id = nil\n    expect(subject).to_not be_valid\n  end\n\n  it { should belong_to(:request)}\n  it { should belong_to(:service)}\nend\n</code></pre>\n\n<p>and in the servicerequest model:</p>\n\n<pre><code>class Servicerequest &lt; ApplicationRecord\n  validates_presence_of :userid, :status, :request_id, :service_id\n\n  belongs_to :request, class_name: \"Request\"\n  belongs_to :service, class_name: \"Service\"\nend\n</code></pre>\n\n<p>Fo some reason, my test fails with this statement:</p>\n\n<pre><code>1) Servicerequest is valid with valid attributes\n  Failure/Error: expect(subject).to be_valid\n    expected #&lt;Servicerequest id: nil, created_at: nil, updated_at: nil, userid: \"bbogus\", status: true, request_id: 1, service_id: 3&gt; to be valid, but got errors: Request must exist, Service must exist\n  # ./spec/models/servicerequest_spec.rb:10:in `block (2 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>How do I make my test pass the <code>Request must exist. Service must exist.</code> portion?</p>\n"}, {"tags": ["ruby", "methods", "file-io", "user-input"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6225298"}, "is_accepted": false, "score": 0, "last_activity_date": 1481206150, "last_edit_date": 1481206150, "creation_date": 1481140919, "answer_id": 41026324, "question_id": 41025756, "link": "https://stackoverflow.com/questions/41025756/explanation-of-gets-method-string-being-printed-without-any-user-input/41026324#41026324", "title": "Explanation of &#39;gets&#39; method: String being printed without any user input?", "body": "<p>Every line in the file are ended with a newline character (<code>\"\\n\"</code>), the method <code>puts</code> displays the string and a newline so it would display the string and two new lines. The chomp method will remove the new line at the end of the string so only one newline will be displayed.</p>\n\n<p>See the doc => <a href=\"https://ruby-doc.org/core-2.2.0/String.html#method-i-chomp\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.2.0/String.html#method-i-chomp</a></p>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 7015958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9JEI.jpg?s=128&g=1", "display_name": "mylesw", "link": "https://stackoverflow.com/users/7015958/mylesw"}, "edited": false, "score": 0, "creation_date": 1481595864, "post_id": 41027535, "comment_id": 69429992, "body": "Thanks! Appreciate your feedback"}], "tags": [], "owner": {"reputation": 380, "user_id": 4781518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jtiKY.jpg?s=128&g=1", "display_name": "ydaniju", "link": "https://stackoverflow.com/users/4781518/ydaniju"}, "is_accepted": false, "score": 0, "last_activity_date": 1481205146, "last_edit_date": 1481205146, "creation_date": 1481145408, "answer_id": 41027535, "question_id": 41025756, "link": "https://stackoverflow.com/questions/41025756/explanation-of-gets-method-string-being-printed-without-any-user-input/41027535#41027535", "title": "Explanation of &#39;gets&#39; method: String being printed without any user input?", "body": "<p>The <code>gets</code> you see there is not for user input. Rather it belongs to the IO class and reads the next line of an IO stream.\nYou can find this in Ruby doc \n<a href=\"https://ruby-doc.org/core-2.3.0/IO.html#method-i-gets\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.3.0/IO.html#method-i-gets</a></p>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1481209399, "post_id": 41041375, "comment_id": 69292424, "body": "ok, deleted erroneous link. Great answer, cleared up the confusion I had as well."}, {"owner": {"reputation": 23, "user_id": 7015958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9JEI.jpg?s=128&g=1", "display_name": "mylesw", "link": "https://stackoverflow.com/users/7015958/mylesw"}, "edited": false, "score": 1, "creation_date": 1481828157, "post_id": 41041375, "comment_id": 69543026, "body": "@SergioTulentsev just did- still getting used to these stackoverflow procedures...thanks again!"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 3, "last_activity_date": 1481210170, "last_edit_date": 1481210170, "creation_date": 1481205885, "answer_id": 41041375, "question_id": 41025756, "link": "https://stackoverflow.com/questions/41025756/explanation-of-gets-method-string-being-printed-without-any-user-input/41041375#41041375", "title": "Explanation of &#39;gets&#39; method: String being printed without any user input?", "body": "<p><code>gets</code> actually has <strong>nothing to do</strong> with user input. Neither in this case, nor in the \"usual\" form you might be used to:</p>\n\n<pre><code>puts \"what's your answer?\"\nanswer = gets.chomp\n</code></pre>\n\n<p>In general, it is a method on IO objects which reads a string (\"string\" being defined as \"all characters from current position up to (and including) a linebreak\").</p>\n\n<p>In your example it's being called on a <code>File</code> object (and, therefore, reads content from the opened file, line by line). The <a href=\"https://ruby-doc.org/core-2.2.3/Kernel.html#method-i-gets\" rel=\"nofollow noreferrer\">\"naked\" form</a> reads lines from files, passed via command line arguments or (if no files were passed) from <a href=\"https://en.wikipedia.org/wiki/Standard_streams#Standard_input_.28stdin.29\" rel=\"nofollow noreferrer\">standard input</a>. Note that standard input is not necessarily read from the keyboard (which is what you'd call \"user input\"). Input data can be <a href=\"https://en.wikipedia.org/wiki/Pipeline_(Unix)\" rel=\"nofollow noreferrer\">piped</a> into your program.</p>\n\n<blockquote>\n  <p>but just using using \"f\" without any attached methods doesn't print the lines from the text file</p>\n</blockquote>\n\n<p><code>f</code> is a reference to a file object. It does not represent any useful printable content. But you can use it to read some content from the file, which you do (<code>f.gets</code>).</p>\n"}], "owner": {"reputation": 23, "user_id": 7015958, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/B9JEI.jpg?s=128&g=1", "display_name": "mylesw", "link": "https://stackoverflow.com/users/7015958/mylesw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 836, "favorite_count": 0, "accepted_answer_id": 41041375, "answer_count": 3, "score": 1, "last_activity_date": 1481210170, "creation_date": 1481138890, "question_id": 41025756, "link": "https://stackoverflow.com/questions/41025756/explanation-of-gets-method-string-being-printed-without-any-user-input", "title": "Explanation of &#39;gets&#39; method: String being printed without any user input?", "body": "<p>I'm running through the Learn Ruby the Hard Way exercises, and have a question about the syntax in Exercise 20</p>\n\n<pre><code>input_file = ARGV.first\n\ndef print_all(f)\n puts f.read\nend\n\ndef rewind(f)\n  f.seek(0)\nend\n\ndef print_a_line(line_count, f)\n  puts \"#{line_count}, #{f.gets.chomp}\"\nend\n\ncurrent_file = open(input_file)\n\nputs \"First let's print the whole file:\\n\"\n\nprint_all(current_file)\n\nputs \"Now let's rewind, kind of like a tape.\"\n\nrewind(current_file)\n\nputs \"Let's print three lines:\"\n\ncurrent_line = 1\nprint_a_line(current_line, current_file)\n\ncurrent_line = current_line + 1\nprint_a_line(current_line, current_file)\n\ncurrent_line = current_line + 1\nprint_a_line(current_line, current_file)\n</code></pre>\n\n<p>in the \"print_a_line\" function, the argument \"f\" if string-interpolated, and the gets.chomp method is called on this argument. This is what appears on the console when the code is run (using a sample text file as ARGV.first, with three lines)</p>\n\n<pre><code>First let's print the whole file:\nThis is Line 1\nThis is Line 2\nThis is Line 3\nNow let's rewind, kind of like a tape.\nLet's print three lines:\n1, This is Line 1\n2, This is Line 2\n3, This is Line 3\n</code></pre>\n\n<p>My question is this: why are we calling the gets.chomp on the \"f\" parameter? Where is the \"gets\" user input coming from? Why does this work, but justing using \"f\" without any attached methods doesn't print the lines from the text file? Thanks!</p>\n"}, {"tags": ["ruby", "string", "gsub"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1481145063, "post_id": 41025482, "comment_id": 69262264, "body": "Please read through the formatting help that&#39;s available in the text entry box. Formatting correctly, for readability and to match the common style, helps the site and helps us help you. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages, along with &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and <a href=\"http://meta.stackoverflow.com/q/261592/128421\">meta.stackoverflow.com/q/261592/128421</a>. We&#39;d like to see what you tried, rather than what your requirements for code are."}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1481145408, "post_id": 41025610, "comment_id": 69262457, "body": "Nokogiri, or a similar parser, is definitely the way to go. Using a pattern to manipulate HTML is very fragile, especially if the HTML generation is owned by someone else."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1481145914, "post_id": 41025610, "comment_id": 69262708, "body": "@theTinMan Absolutely. I just put this out there as a work-around in case someone&#39;s battling Nokogiri which can be, at times, a giant mess to install. When it works, though, it works very well."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1481148184, "post_id": 41025610, "comment_id": 69263824, "body": "Every time I ran into problems with a Nokogiri installation it was due to the libXML stuff on my host. Once I got that straightened out Nokogiri was easily installed. That installation difficulty isn&#39;t limited to Nokogiri, a lot of tools that rely on drivers and shared libraries can be a major pain that way. :-/"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1481138344, "last_edit_date": 1495535412, "creation_date": 1481138344, "answer_id": 41025610, "question_id": 41025482, "link": "https://stackoverflow.com/questions/41025482/gsub-a-substring-with-varying-characters-from-a-string/41025610#41025610", "title": "gsub a substring with varying characters from a string", "body": "<p>Although you probably don't want to do this with a regular expression, the <em>hack</em> way of doing this is:</p>\n\n<pre><code>gsub(/style=\"width:\\s*\\d+px;?\"\\s*/, '')\n</code></pre>\n\n<p>Here the key is <code>\\d+</code> which means <em>one-or-more-digits</em>.</p>\n\n<p>The better way is to use an HTML parser like <a href=\"http://www.nokogiri.org\" rel=\"nofollow noreferrer\">Nokogiri</a> to remove the attribute:</p>\n\n<pre><code>doc = Nokogiri::HTML(source)\ndoc.css('img').each do |img|\n  img.remove_attr('style')\nend\ndoc.to_s\n</code></pre>\n\n<p>There's also ways of <a href=\"https://stackoverflow.com/questions/6096327/strip-style-attributes-with-nokogiri\">stripping all style tags</a>.</p>\n"}], "owner": {"reputation": 127, "user_id": 6003113, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c7775e9f78b27b76ccee0f0efaf9fd95?s=128&d=identicon&r=PG&f=1", "display_name": "Alexander Smith", "link": "https://stackoverflow.com/users/6003113/alexander-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "accepted_answer_id": 41025610, "answer_count": 1, "score": -1, "last_activity_date": 1481138344, "creation_date": 1481137950, "question_id": 41025482, "link": "https://stackoverflow.com/questions/41025482/gsub-a-substring-with-varying-characters-from-a-string", "title": "gsub a substring with varying characters from a string", "body": "<p>I am looking for a method to remove a varying set of numbers from a string.</p>\n\n<p>I have multiple images that have a style=\"\" tag that I want to remove when rendering for an API.</p>\n\n<p>i.e.</p>\n\n<p>&lt; img src=\"https://IMAGE.jpg\" style=\"width: 1398px;\" data-status=\"ok\"></p>\n\n<p>&lt; img src=\"https://IMAGE.jpg\" style=\"width: 1393px;\" data-status=\"ok\"></p>\n\n<p>&lt; img src=\"https://IMAGE.jpg\" style=\"width: 1385px;\" data-status=\"ok\"></p>\n\n<p>I want to remove the style=\"\" tag and I am looking for a gsub or regex method to do this.</p>\n\n<p>Something along the lines.</p>\n\n<p><strong>.gsub('style=\"width: ****px;\"', '')</strong></p>\n\n<p>Where the **** is a solution to any number 0..9 for each digit?</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "email", "html-email"], "comments": [{"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 2, "creation_date": 1481138468, "post_id": 41025472, "comment_id": 69258444, "body": "<a href=\"https://github.com/rgrove/sanitize#allow_comments-boolean\" rel=\"nofollow noreferrer\">github.com/rgrove/sanitize#allow_comments-boolean</a>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1481139131, "post_id": 41025472, "comment_id": 69258808, "body": "You can pass a custom whitelist or create your own scrubber for <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html\" rel=\"nofollow noreferrer\"><code>sanitize</code></a>."}], "owner": {"reputation": 518, "user_id": 2130053, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/RpKRC.jpg?s=128&g=1", "display_name": "Patrick O&#39;Grady", "link": "https://stackoverflow.com/users/2130053/patrick-ogrady"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 242, "favorite_count": 3, "answer_count": 0, "score": 1, "last_activity_date": 1481137937, "creation_date": 1481137937, "question_id": 41025472, "link": "https://stackoverflow.com/questions/41025472/how-do-i-safely-display-the-html-content-of-a-received-email-in-a-rails-app", "title": "How do I safely display the HTML content of a received email in a Rails app?", "body": "<p>In a Rails app, I'm receiving emails via POST request from Mailgun and then saving them to the database. One of the attributes being saved is the stringified HTML content of the email message. I'd like to display this HTML in a view, with its original formatting (or close to it).</p>\n\n<p>How can safely convert and render this HTML, without opening myself up to an XSS attack?</p>\n\n<p>So far I've tried:</p>\n\n<ul>\n<li><code>&lt;%= lead_email.html %&gt;</code> -  just displays the raw HTML markup as a string.</li>\n<li><code>&lt;%= raw lead_email.html %&gt;</code> - renders the HTML, looks great, but I'm not protected.</li>\n<li><code>&lt;%= sanitize lead_email.html %&gt;</code> - removes way too many tags. I tried specifying tags to keep in the sanitize method, but it seems to be having problems with <code>&lt;!-- comments --&gt;</code> as well.</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 5802769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2fad67c35c337460f038c8bc6e475c3?s=128&d=identicon&r=PG&f=1", "display_name": "Marius Zaharie", "link": "https://stackoverflow.com/users/5802769/marius-zaharie"}, "is_accepted": false, "score": 0, "last_activity_date": 1481140558, "last_edit_date": 1481140558, "creation_date": 1481140083, "answer_id": 41026090, "question_id": 41024711, "link": "https://stackoverflow.com/questions/41024711/redirect-to-back-with-alert-not-working-as-expected-in-specific-situation/41026090#41026090", "title": "Redirect_to :back with :alert not working as expected in specific situation", "body": "<p>No need to add the <code>\"_blank\"</code> target to download the file, just let the <code>send_data</code> in the controller action.</p>\n\n<pre><code># your/view.html.erb\n\n&lt;%= form_tag(remessa_individual_boletos_path, :method =&gt; \"get\", ...) do %&gt;\n# ...\n\n# YourController\n\ndef action\n  if valid?\n    send_data ...\n  else\n    redirect_to :back, alert: 'Alert message'\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 379, "user_id": 1377288, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c49f62d90a3e50b237f67e2e1705111a?s=128&d=identicon&r=PG&f=1", "display_name": "Tuma", "link": "https://stackoverflow.com/users/1377288/tuma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 171, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481140558, "creation_date": 1481135266, "question_id": 41024711, "link": "https://stackoverflow.com/questions/41024711/redirect-to-back-with-alert-not-working-as-expected-in-specific-situation", "title": "Redirect_to :back with :alert not working as expected in specific situation", "body": "<p>I have a page with a <code>form_tag</code> to determine parameters for the generation of a plain text file:</p>\n\n<pre><code>&lt;%= form_tag(remessa_individual_boletos_path, :method =&gt; \"get\",  :target =&gt; \"_blank\", :class =&gt; \"form_change_action\", :id =&gt; \"form-remessa\") do %&gt;\n...\n</code></pre>\n\n<p>Once the form is submitted, some things need to be checked and if something goes wrong, I have to inform the user. The way this is done in the rest of the system is by redirecting back and displaying a message in an alert:</p>\n\n<pre><code>redirect_to :back, alert: \"\u00c9 necess\u00e1rio definir o limite de remessas por dia da conta banc\u00e1ria.\"\n</code></pre>\n\n<p>The line of code where the file is actually generated and downloaded is a <code>send_data</code>:</p>\n\n<pre><code>send_data @geraboleto.geraremessaboletoindividual(params[:banco_id], current_user.id), :content_type =&gt; 'text/plain', :filename =&gt; @geraboleto.filename\n</code></pre>\n\n<p>However, when there is in fact an error, instead of simply refreshing the page and displaying the alert, the <code>:target =&gt; \"_blank\"</code> ends up opening a new tab with the same URL as the page where the form is, so the user ends up with two tabs in the same address, but the alert appears on the original tab, which is not visible at this point because the new tab is on the screen, which means that the user may not see the alert and not understand why their file was not generated.</p>\n\n<p>When I remove <code>:target =&gt; \"_blank\"</code> and submit the form, in the case of error the expected behaviour happens: The page refreshes and the alert is shown. However when no errors happen, the file is generated but not downloaded (no prompt to save or open the file either), so I assume I need this bit of code... </p>\n\n<p>To sum it up: I need to be able to download a file via <code>send_data</code>, for which I think I need <code>:target =&gt; \"_blank\"</code>, but I also need to be able to show an alert to the user when an error occurs, in which case <code>:target =&gt; \"_blank\"</code> seems to be a problem. How can I have these two situations work?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "acts-as-taggable-on"], "comments": [{"owner": {"reputation": 2558, "user_id": 3125852, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/T85zH.jpg?s=128&g=1", "display_name": "Alfie", "link": "https://stackoverflow.com/users/3125852/alfie"}, "edited": false, "score": 0, "creation_date": 1481141329, "post_id": 41024606, "comment_id": 69260100, "body": "damn, why didn&#39;t i think of that.. let me give it a try. thanks :)"}, {"owner": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "edited": false, "score": 0, "creation_date": 1481326297, "post_id": 41024606, "comment_id": 69347961, "body": "did you give it a try?"}], "answers": [{"comments": [{"owner": {"reputation": 2558, "user_id": 3125852, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/T85zH.jpg?s=128&g=1", "display_name": "Alfie", "link": "https://stackoverflow.com/users/3125852/alfie"}, "edited": false, "score": 0, "creation_date": 1481337566, "post_id": 41025243, "comment_id": 69350146, "body": "But i&#39;m going to add another answer which would work for all rails versions supported by acts_as_taggable_on."}], "tags": [], "owner": {"reputation": 1224, "user_id": 1170266, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b2db3460298af8f4a585f95cf556874?s=128&d=identicon&r=PG", "display_name": "archana", "link": "https://stackoverflow.com/users/1170266/archana"}, "is_accepted": true, "score": 2, "last_activity_date": 1481137076, "creation_date": 1481137076, "answer_id": 41025243, "question_id": 41024606, "link": "https://stackoverflow.com/questions/41024606/acts-as-taggable-on-multiple-fields-query-using-an-or/41025243#41025243", "title": "acts_as_taggable_on multiple fields query using an OR", "body": "<p>Try <code>or</code> introduced in Rails 5.</p>\n\n<pre><code>scope :by_skills, (lambda do |primary, secondary|\n  if primary.present? &amp;&amp; secondary.present?\n    tagged_with(primary, on: :primary_skills, any: true).or(\n      tagged_with(secondary, on: :secondary_skills, any: true))\n  elsif primary.present?\n    tagged_with(primary, on: :primary_skills, any: true)\n  elsif secondary.present?\n    tagged_with(secondary, on: :secondary_skills, any: true)\n  end\nend)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2558, "user_id": 3125852, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/T85zH.jpg?s=128&g=1", "display_name": "Alfie", "link": "https://stackoverflow.com/users/3125852/alfie"}, "is_accepted": false, "score": 0, "last_activity_date": 1481338226, "creation_date": 1481338226, "answer_id": 41071678, "question_id": 41024606, "link": "https://stackoverflow.com/questions/41024606/acts-as-taggable-on-multiple-fields-query-using-an-or/41071678#41071678", "title": "acts_as_taggable_on multiple fields query using an OR", "body": "<p>I did end up using the <code>or</code> method of ActiveRecord which was introduced in Rails 5 as mentioned by @archana.</p>\n\n<p>But before i got to using that i tried to find out another way to do the same, and looked a bit into how <code>acts_as_taggable_on</code> is designed.</p>\n\n<p>So even if there are two different associations called as <code>primary_skills</code> &amp; <code>secondary_skills</code> both are indeed an association with the same table <code>tags</code> with a through table <code>taggings</code></p>\n\n<p>That means the <code>users</code> table has an association with <code>tags</code> table, figuring that out everything was clearer now. The solution goes like this : </p>\n\n<pre><code>Users.includes(:primary_skills, :secondary_skills).where(tags: { name: (primary + secondary) })\n</code></pre>\n\n<p>This would work for all rails versions where <code>acts_as_taggable_on</code> is supported.</p>\n"}], "owner": {"reputation": 2558, "user_id": 3125852, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/T85zH.jpg?s=128&g=1", "display_name": "Alfie", "link": "https://stackoverflow.com/users/3125852/alfie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 41025243, "answer_count": 2, "score": 1, "last_activity_date": 1481338226, "creation_date": 1481134878, "last_edit_date": 1481136142, "question_id": 41024606, "link": "https://stackoverflow.com/questions/41024606/acts-as-taggable-on-multiple-fields-query-using-an-or", "title": "acts_as_taggable_on multiple fields query using an OR", "body": "<p>So i\u2019m trying to write a query to fetch users based on the skills they have, the implementation goes like this :</p>\n\n<p>A user has primary and secondary skills, both using <code>acts_as_taggable_on</code></p>\n\n<p>this is the scope i\u2019ve got now</p>\n\n<pre><code>scope :by_skills, (lambda do |primary, secondary|\n  if primary.present? &amp;&amp; secondary.present?\n    tagged_with(primary, on: :primary_skills, any: true)\n      .tagged_with(secondary, on: :secondary_skills, any: true)\n  elsif primary.present?\n    tagged_with(primary, on: :primary_skills, any: true)\n  elsif secondary.present?\n    tagged_with(secondary, on: :secondary_skills, any: true)\n  end\nend)\n</code></pre>\n\n<p>problem with this now is that if both primary &amp; secondary is present, the query fired would be an <code>AND</code> i.e primary and secondary,\nI\u2019d like it to be an <code>OR</code>, and in no way am i able to figure that out</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "forms"], "comments": [{"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1481134715, "post_id": 41024333, "comment_id": 69256261, "body": "Explain &quot;don&#39;t work&quot;. What happens?"}, {"owner": {"reputation": 335, "user_id": 6591321, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/4e94cde60d4c12465d9110e7b02fa2d5?s=128&d=identicon&r=PG&f=1", "display_name": "LuisC", "link": "https://stackoverflow.com/users/6591321/luisc"}, "reply_to_user": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1481135334, "post_id": 41024333, "comment_id": 69256601, "body": "@Beartech the serarch form works if it is not inside another form, but when  I put it inside the create form or another form, it does not look for the records"}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 1, "creation_date": 1481135909, "post_id": 41024333, "comment_id": 69256974, "body": "Per the answer below, forms within forms are not standard. Could you put the search field outside the form, but show it in the correct position using CSS? If the search form needs to add info to the containing form, you could do that by having the AJAX returned modify the form."}], "answers": [{"tags": [], "owner": {"reputation": 4978, "user_id": 3033649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d885e80c88f3969d451d513c6a73c802?s=128&d=identicon&r=PG", "display_name": "markets", "link": "https://stackoverflow.com/users/3033649/markets"}, "is_accepted": false, "score": 2, "last_activity_date": 1481135719, "last_edit_date": 1495542293, "creation_date": 1481135719, "answer_id": 41024837, "question_id": 41024333, "link": "https://stackoverflow.com/questions/41024333/rails-form-tag-remote-in-another-form/41024837#41024837", "title": "Rails form_tag remote in another form", "body": "<p>Nested forms (a form inside a form) are unsupported by browsers (not part of the w3c standard) and it could cause unpredictable behavior. </p>\n\n<p>You can read more about this here: </p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/379610/can-you-nest-html-forms\">Can you nest html forms?</a></li>\n<li><a href=\"https://stackoverflow.com/questions/555928/is-it-valid-to-have-a-html-form-inside-another-html-form\">Is it valid to have a html form inside another html form?</a></li>\n</ul>\n"}], "owner": {"reputation": 335, "user_id": 6591321, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/4e94cde60d4c12465d9110e7b02fa2d5?s=128&d=identicon&r=PG&f=1", "display_name": "LuisC", "link": "https://stackoverflow.com/users/6591321/luisc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481135884, "creation_date": 1481133884, "last_edit_date": 1481135884, "question_id": 41024333, "link": "https://stackoverflow.com/questions/41024333/rails-form-tag-remote-in-another-form", "title": "Rails form_tag remote in another form", "body": "<p>I've been following this video <a href=\"http://railscasts.com/episodes/240-search-sort-paginate-with-ajax?autoplay=true\" rel=\"nofollow noreferrer\">http://railscasts.com/episodes/240-search-sort-paginate-with-ajax?autoplay=true</a> and I am trying to search records in another form but don't work, How can I solve this? I need to put the search form in to create form to search records to save. this is my form:</p>\n\n<pre><code>&lt;%= form_for(@cliente, remote: true, html: {class: \"form-horizontal cliente-validado\"}) do |f| %&gt; &lt;!--ajax remote: true--&gt;\n  &lt;div class=\"modal fade\" id=\"mynewcliente\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\"&gt;\n    &lt;div class=\"modal-dialog\" role=\"document\"&gt;\n      &lt;div class=\"modal-content\"&gt;\n        &lt;div class=\"modal-header\"&gt;\n          &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"&gt;&lt;span aria-hidden=\"true\"&gt;&amp;times;&lt;/span&gt;&lt;/button&gt;\n          &lt;h4 class=\"modal-title\" id=\"myModalLabel\"&gt;Agregar cliente&lt;/h4&gt;\n        &lt;/div&gt;\n        &lt;div class=\"modal-body\"&gt;\n\n          &lt;%= f.label :IdCli, \"Clave:\", class: \"control-label col-md-2\" %&gt;\n            &lt;div class=\"col-md-7\"&gt;\n              &lt;%= f.text_field :IdCli, class: \"form-control cliente-idcli\",autofocus: true, minlength: \"1\", required: \"true\"   %&gt;\n            &lt;/div&gt;\n\n&lt;!--the search form--&gt;\n              &lt;%= form_for(\"/busqueda_cp\", method: 'get', remote: true, id:\"cp_search\" ) do |l| %&gt;\n              &lt;p&gt;\n                &lt;%= l.text_field :search, params[:search]%&gt;\n                &lt;%= submit_tag \"Search\", :name =&gt; nil%&gt;\n              &lt;/p&gt;\n              &lt;%end%&gt;\n                &lt;div id=\"cp\"&gt;&lt;%= render 'cp' %&gt;&lt;/div&gt;\n\n          &lt;div class=\"form-group\"&gt;\n            &lt;%= f.label :Status,\"Activo:\", class: \"control-label col-xs-3 col-sm-6 col-md-1 \" %&gt;\n            &lt;div class=\"col-md-1\"&gt;\n              &lt;%= f.check_box :Status, checked: true %&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n\n        &lt;div class=\"modal-footer\"&gt;\n          &lt;button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\" id=\"mynewclienteclose\"&gt;Close&lt;/button&gt;\n          &lt;%= submit_tag \"Create\", class: \"btn btn-primary\", data: { disable_with: 'Creando' }%&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;%end%&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1481132454, "post_id": 41023841, "comment_id": 69254972, "body": "is country another field on this model?"}, {"owner": {"reputation": 258, "user_id": 5372350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bxH_xBs-r9s/AAAAAAAAAAI/AAAAAAAAABg/UYFtw0nAYW8/photo.jpg?sz=128", "display_name": "Sonu Singh", "link": "https://stackoverflow.com/users/5372350/sonu-singh"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1481133576, "post_id": 41023841, "comment_id": 69255658, "body": "Yes, Country is another field in this model. and I want to validate zip code on this basis of each country."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1481137747, "post_id": 41023841, "comment_id": 69258056, "body": "Your question isn&#39;t asked well. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. You should show us the minimum code necessary that demonstrates what you tried. Without that it looks like you want us to do it for you."}], "answers": [{"tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": true, "score": 2, "last_activity_date": 1481139805, "last_edit_date": 1481139805, "creation_date": 1481134234, "answer_id": 41024424, "question_id": 41023841, "link": "https://stackoverflow.com/questions/41023841/how-to-apply-multiple-regular-expression-on-single-field/41024424#41024424", "title": "How to apply multiple regular expression on single field", "body": "<p>You would want to write a method to help you:</p>\n\n<pre><code>  validates :zip, presence: true, with: :zip_validator\n\n  def zip_validator\n    case country\n    when 'AU'\n      # some regex or fail\n    when 'CA'\n      # some other regex or fail\n    when 'UK'\n      # some other regex or fail\n    else\n      # should this fail?\n    end\n  end\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 3, "last_activity_date": 1481136080, "creation_date": 1481136080, "answer_id": 41024942, "question_id": 41023841, "link": "https://stackoverflow.com/questions/41023841/how-to-apply-multiple-regular-expression-on-single-field/41024942#41024942", "title": "How to apply multiple regular expression on single field", "body": "<p>You can give a lambda that returns a Regexp as the <code>:with</code> option for the format validator (<a href=\"http://api.rubyonrails.org/classes/ActiveModel/Validations/HelperMethods.html#method-i-validates_format_of\" rel=\"nofollow noreferrer\">see <code>:with</code></a>), which makes this nice and clean:</p>\n\n<pre><code>ZIP_COUNTRY_FORMATS = {\n  'US' =&gt; /\\A\\d{5}(-\\d{4})?\\z/,\n  'Australia' =&gt; /\\A\\d{4}\\z/,\n  # ...\n}\n\nvalidates :zip, presence: true,\n  format: { with: -&gt;(record){ ZIP_COUNTRY_FORMATS.fetch(record.country) } }\n</code></pre>\n\n<p>Note that uses <code>Hash#fetch</code> instead of <code>Hash#[]</code> so that if a <code>country</code> that doesn't exist is given it will raise a KeyError just as a sanity check. Alternatively you could return a default Regexp that matches anything:</p>\n\n<pre><code>ZIP_COUNTRY_FORMATS.fetch(record.country, //)\n</code></pre>\n\n<p>...or nothing:</p>\n\n<pre><code>ZIP_COUNTRY_FORMATS.fetch(record.country, /.\\A/)\n</code></pre>\n\n<p>...depending on the behavior you want.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1481229195, "last_edit_date": 1481229195, "creation_date": 1481185266, "answer_id": 41034809, "question_id": 41023841, "link": "https://stackoverflow.com/questions/41023841/how-to-apply-multiple-regular-expression-on-single-field/41034809#41034809", "title": "How to apply multiple regular expression on single field", "body": "<p>Suppose we give examples of valid postal codes for each country in a hash such as the following.</p>\n\n<pre><code>example_pcs = {\n  US:  [\"\",   \"98230\", \"98230-1346\"],\n  CAN: [\"*\",  \"V8V 3A2\"],\n  OZ:  [\"!*\", \"NSW 1130\", \"ACT 0255\", \"VIC 3794\", \"QLD 4000\", \"SA 5664\",\n              \"WA 6500\", \"TAS 7430\", \"NT 0874\"]\n}\n</code></pre>\n\n<p>where the first element of each array is a string of codes that will be explained later.</p>\n\n<p>We can construct a regex for each country from this information. (The information would undoubtedly be different in a real application, but I am just presenting the general idea.) For each country we construct a regex for each example postal code, using in part the above-mentioned codes. We then take the union of those regexes to obtain a single regex for that country. Here's one way the regex for an example postal code might be constructed.</p>\n\n<pre><code>def make_regex(str, codes='')\n  rstr = str.each_char.chunk do |c|\n    case c\n    when /\\d/          then :DIGIT\n    when /[[:alpha:]]/ then :ALPHA\n    when /\\s/          then :WHITE\n    else                    :OTHER\n    end\n  end.\n  map do |type, arr|\n    case type\n    when :ALPHA\n      if codes.include?('!')\n        arr\n      elsif arr.size == 1\n        \"[[:alpha:]]\"\n      else \"[[:alpha:]]\\{#{arr.size}\\}\"\n      end\n    when :DIGIT\n      (arr.size == 1) ? \"\\\\d\" : \"\\\\d\\{#{arr.size}\\}\"\n    when :WHITE\n      case codes\n      when /\\*/ then \"\\\\s*\"\n      when /\\+/ then \"\\\\s+\"\n      else (arr.size == 1) ? \"\\\\s\" : \"\\\\s\\{#{arr.size}\\}\"\n      end\n    when :OTHER\n      arr\n    end\n  end.\n  join\n  Regexp.new(\"\\\\A\" &lt;&lt; rstr &lt;&lt; \"\\\\z\")\nend\n</code></pre>\n\n<p>I've made the regex case-insensitive for letters, but that could of course be changed. Also, for some countries, the regex produced may have to be tweaked manually and/or some pre- or post-processing of postal code strings may be called for. For example, some combinations may have the correct format but nonetheless are not valid postal codes. In Australia, for example, the four digits following each region code must fall within specified ranges that vary by region.</p>\n\n<p>Here are some examples.</p>\n\n<pre><code>make_regex(\"12345\")\n  #=&gt; /\\A\\d{5}\\z/\nmake_regex(\"12345-1234\")\n  #=&gt; /\\A\\d{5}-\\d{4}\\z/\nRegexp.union(make_regex(\"12345\"), make_regex(\"12345-1234\"))\n  #=&gt; /(?-mix:\\A\\d{5}\\z)|(?-mix:\\A\\d{5}-\\d{4}\\z)/\n\nmake_regex(\"V8V 3A2\", \"*\")\n  #=&gt; /\\A[[:alpha:]]\\d[[:alpha:]]\\s*\\d[[:alpha:]]\\d\\z/ \n\nmake_regex(\"NSW 1130\", \"!*\")\n  # =&gt; /\\ANSW\\s*\\d{4}\\z/\n</code></pre>\n\n<p>Then, for each country, we take the union of the regexes for each example postal code, saving those results as values in a hash whose keys are country codes.</p>\n\n<pre><code>h = example_pcs.each_with_object({}) { |(country, (codes, *examples)), h|\n  h[country] = Regexp.union(examples.map { |s| make_regex(s, codes) }.uniq) }\n  #=&gt; {:US=&gt;/(?-mix:\\A\\d{5}\\z)|(?-mix:\\A\\d{5}-\\d{4}\\z)/,\n  #    :CAN=&gt;/\\A[[:alpha:]]\\d[[:alpha:]]\\s*\\d[[:alpha:]]\\d\\z/,\n  #    :OZ=&gt;/(?-mix:\\ANSW\\s*\\d{4}\\z)|(?-mix:\\AACT\\s*\\d{4}\\z)|(?-mix:\\AVIC\\s*\\d{4}\\z)|(?-mix:\\AQLD\\s*\\d{4}\\z)|(?-mix:\\ASA\\s*\\d{4}\\z)|(?-mix:\\AWA\\s*\\d{4}\\z)|(?-mix:\\ATAS\\s*\\d{4}\\z)|(?-mix:\\ANT\\s*\\d{4}\\z)/} \n</code></pre>\n\n<p></p> \n\n<pre><code>\"12345\"      =~ h[:US]\n  #=&gt; 0\n\"12345-1234\" =~ h[:US]\n  #=&gt; 0\n\"1234\"       =~ h[:US]\n  #=&gt; nil\n\"12345 1234\" =~ h[:US]\n  #=&gt; nil\n\n\"V8V 3A2\"    =~ h[:CAN]\n  #=&gt; 0\n\"V8V    3A2\" =~ h[:CAN]\n  #=&gt; 0\n\"V8v3a2\"     =~ h[:CAN]\n  #=&gt; 0\n\"3A2 V8V\"    =~ h[:CAN]\n  #=&gt; nil\n\n\"NSW 1132\"   =~ h[:OZ]\n   #=&gt; 0\n\"NSW   1132\" =~ h[:OZ]\n   #=&gt; 0\n\"NSW1132\"    =~ h[:OZ]\n   #=&gt; 0\n\"NSW113\"     =~ h[:OZ]\n   #=&gt; nil\n\"QLD\"        =~ h[:OZ]\n   #=&gt; nil\n\"CAT 1132\"   =~ h[:OZ]\n   #=&gt; nil\n</code></pre>\n\n<p>The steps performed in <code>make_regex</code> for</p>\n\n<pre><code>str = \"V8V 3A2\"\ncodes = \"*+\"\n</code></pre>\n\n<p>are as follows.</p>\n\n<pre><code>e = str.each_char.chunk do |c|\n      case c\n      when /\\d/          then :DIGIT\n      when /[[:alpha:]]/ then :ALPHA\n      when /\\s/          then :WHITE\n      else                    :OTHER\n      end\nend\n    #=&gt; #&lt;Enumerator: #&lt;Enumerator::Generator:0x007f9ff201a330&gt;:each&gt;\n</code></pre>\n\n<p>We can see the values that will be generated by this enumerator by converting it to an array.</p>\n\n<pre><code>e.to_a\n  #=&gt; [[:ALPHA, [\"V\"]], [:DIGIT, [\"8\"]], [:ALPHA, [\"V\"]], [:WHITE, [\" \"]],\n  #    [:DIGIT, [\"3\"]], [:ALPHA, [\"A\"]], [:DIGIT, [\"2\"]]] \n</code></pre>\n\n<p>Continuing,</p>\n\n<pre><code>a = e.map do |type, arr|\n    case type\n    when :ALPHA\n      if codes.include?('!')\n        arr\n      elsif arr.size == 1\n        \"[[:alpha:]]\"\n      else \"[[:alpha:]]\\{#{arr.size}\\}\"\n      end\n    when :DIGIT\n      (arr.size == 1) ? \"\\\\d\" : \"\\\\d\\{#{arr.size}\\}\"\n    when :WHITE\n      case codes\n      when /\\*/ then \"\\\\s*\"\n      when /\\+/ then \"\\\\s+\"\n      else (arr.size == 1) ? \"\\\\s\" : \"\\\\s\\{#{arr.size}\\}\"\n      end\n    when :OTHER\n      arr\n    end\n  end\n    #=&gt; [\"[[:alpha:]]\", \"\\\\d\", \"[[:alpha:]]\", \"\\\\s*\", \"\\\\d\", \"[[:alpha:]]\", \"\\\\d\"]\nrstr = a.join\n  #=&gt; \"[[:alpha:]]\\\\d[[:alpha:]]\\\\s*\\\\d[[:alpha:]]\\\\d\" \nt = \"\\\\A\" &lt;&lt; rstr &lt;&lt; \"\\\\z\"\n  #=&gt; \"\\\\A[[:alpha:]]\\\\d[[:alpha:]]\\\\s*\\\\d[[:alpha:]]\\\\d\\\\z\" \nputs t\n  #=&gt; \\A[[:alpha:]]\\d[[:alpha:]]\\s*\\d[[:alpha:]]\\d\\z\nRegexp.new(t)\n  #=&gt; /\\A[[:alpha:]]\\d[[:alpha:]]\\s*\\d[[:alpha:]]\\d\\z/ \n</code></pre>\n"}], "owner": {"reputation": 258, "user_id": 5372350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bxH_xBs-r9s/AAAAAAAAAAI/AAAAAAAAABg/UYFtw0nAYW8/photo.jpg?sz=128", "display_name": "Sonu Singh", "link": "https://stackoverflow.com/users/5372350/sonu-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 41024424, "answer_count": 3, "score": 1, "last_activity_date": 1481229195, "creation_date": 1481132076, "last_edit_date": 1481137663, "question_id": 41023841, "link": "https://stackoverflow.com/questions/41023841/how-to-apply-multiple-regular-expression-on-single-field", "title": "How to apply multiple regular expression on single field", "body": "<p>Currently I have a regular expression for zip-codes for the U.S.:</p>\n\n<pre><code>validates :zip,\n          presence: true, \n          format: { with: /\\A\\d{5}(-\\d{4})?\\z/ }\n</code></pre>\n\n<p>I want to use different regular expressions for other countries on the same  zip-code so the regular expression should be used according to the country:</p>\n\n<ul>\n<li>For Australia 4 digits</li>\n<li>For Canada 6 digits alphanumeric</li>\n<li>For UK 6-7 digits alphanumeric  </li>\n</ul>\n\n<p>Can someone suggest how can I full fill my requirement?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5084534"}, "edited": false, "score": 0, "creation_date": 1481132164, "post_id": 41023778, "comment_id": 69254787, "body": "Thank you for the answer but this is not my case. Hidden params do exists in my case with keyword, <code>teacher</code> or <code>personal_teacher</code>"}], "tags": [], "owner": {"reputation": 905, "user_id": 5119244, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203221141608724/picture?type=large", "display_name": "Argonus", "link": "https://stackoverflow.com/users/5119244/argonus"}, "is_accepted": false, "score": 0, "last_activity_date": 1481132655, "last_edit_date": 1481132655, "creation_date": 1481131864, "answer_id": 41023778, "question_id": 41023528, "link": "https://stackoverflow.com/questions/41023528/how-to-skip-multiple-validation-ruby-on-rails/41023778#41023778", "title": "How to skip multiple validation ruby on rails", "body": "<p>I see two ways for this:</p>\n\n<ol>\n<li><p>Some hidden param in form and <code>attr_accesor</code> in model to turn off validation.</p></li>\n<li><p>Use <code>save(validate: false)</code> for save from that second form.</p></li>\n<li><p>Next, you can do it like this</p>\n\n<p><code>if validate_object?\n    validates :email, presence: true\n    validates :variant, presence: true\n  end</code></p></li>\n<li>You can use some patterns like <a href=\"https://www.reinteractive.net/posts/158-form-objects-in-rails\" rel=\"nofollow noreferrer\">form object</a>.</li>\n</ol>\n\n<p>But you have to remember that this object will be invalid in future too. </p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5084534"}, "edited": false, "score": 0, "creation_date": 1481135039, "post_id": 41024464, "comment_id": 69256434, "body": "Thank you for in detail reply but now a days people do hack form by inspecting forms and remove required fields :) Also when people will do that, it will crash everything in terms of security :) I am checking both thing means in forms i have required and in model i have validations. A safety check :D Problem is I am unable to use them when needed :("}], "tags": [], "owner": {"reputation": 218, "user_id": 2188182, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/x5bMj.png?s=128&g=1", "display_name": "Sam Morgan", "link": "https://stackoverflow.com/users/2188182/sam-morgan"}, "is_accepted": false, "score": 0, "last_activity_date": 1481134410, "creation_date": 1481134410, "answer_id": 41024464, "question_id": 41023528, "link": "https://stackoverflow.com/questions/41023528/how-to-skip-multiple-validation-ruby-on-rails/41024464#41024464", "title": "How to skip multiple validation ruby on rails", "body": "<p>If you want different validations of data in different circumstances, you should not be validating on the model. You should validate elsewhere: either in the view using <a href=\"https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Forms/Data_form_validation\" rel=\"nofollow noreferrer\">HTML form validation</a>, or in the controller using Rails' <a href=\"https://github.com/rails/strong_parameters\" rel=\"nofollow noreferrer\">Strong Params</a>.</p>\n\n<p>I think you should use HTML form validation to manage this, because you're worried about the record <em>missing</em> attributes. Strong Params is more useful in case you are worried about people supplying <em>forbidden</em> values for record attributes.</p>\n\n<p>Here is how you would use HTML form validation to manage this (example using HAML):</p>\n\n<pre><code>= form_for @model do |f|\n  = f.text_input(:teacher_number, required: true)\n  ...all your other inputs...\n  = f.submit 'Submit Form'\n</code></pre>\n\n<p>Here is how you would use Strong Params to constrain the number of things you can get:</p>\n\n<pre><code>class ModelsController &lt; ApplicationController\n  def form_action_1\n    Model.create(form_1_params)\n  end\n\n  def form_action_2\n    Model.create(form_2_params)\n  end\n\n  private\n\n  def form_1_params\n    # let's permit all the things you want for the first form\n    params.require(:model).permit(:teacher_number, :title, ...)\n  end\n\n  def form_2_params\n    # let's permit only the few things you want in the second form\n    params.require(:model).permit(:only, :a, :few, :things)\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5084534"}, "edited": false, "score": 0, "creation_date": 1481138358, "post_id": 41025084, "comment_id": 69258389, "body": "Somehow you got it right way. Let me explain you. Say, I have form 1 with 10 fields and form 2 with 2 fields. upon submitting form 2 it says your 8 other fields are empty and fill them in. I want to bypass all these 8 validations for form 2. What do you say? I have no create method in controller. Any idea?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user5084534"}, "edited": false, "score": 0, "creation_date": 1481139329, "post_id": 41025084, "comment_id": 69258903, "body": "Updated my question"}], "tags": [], "owner": {"reputation": 359, "user_id": 3109926, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r7ymx.png?s=128&g=1", "display_name": "Lencho Reyes", "link": "https://stackoverflow.com/users/3109926/lencho-reyes"}, "is_accepted": false, "score": 0, "last_activity_date": 1481136942, "last_edit_date": 1481136942, "creation_date": 1481136536, "answer_id": 41025084, "question_id": 41023528, "link": "https://stackoverflow.com/questions/41023528/how-to-skip-multiple-validation-ruby-on-rails/41025084#41025084", "title": "How to skip multiple validation ruby on rails", "body": "<p>I'm not sure exactly what you're asking, but perhaps this approach would work. Write your validations like this:</p>\n\n<pre><code>validates :teacher_number,\n  :title,\n  :name,\n  :gender,\n  :location,\n  :dob,\n  :contact_mobile,\n  :contact_home,\n  :street,\n  :city,\n  :state,\n  :zip_code,\n  :country, \n  presence: true,\n  on: :form2\nvalidates :teacher_number, uniqueness: {scope: :school_id}\nvalidate  :teacher_number_existance, :on =&gt; :create\nvalidate  :school_existance, :on =&gt; :create\n</code></pre>\n\n<p>The <code>on: :form2</code> near the bottom of the first validator means the validations will only run if you explicitly ask them to run.</p>\n\n<p>So in your controller action for saving form2, you would have to do this:</p>\n\n<pre><code>if valid?(:form2) &amp;&amp; @model.save\n</code></pre>\n\n<p>The other validators will run when you save, as normal. Using the <code>on:</code> parameter of <code>validates</code> for your own symbols (as opposed to the built-in ones) is covered in the Rails Guide for validations, but it's easy to miss. I didn't notice it myself until recently. I hope this helps.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user5084534"}, "is_accepted": true, "score": 0, "last_activity_date": 1481215018, "creation_date": 1481215018, "answer_id": 41044434, "question_id": 41023528, "link": "https://stackoverflow.com/questions/41023528/how-to-skip-multiple-validation-ruby-on-rails/41044434#41044434", "title": "How to skip multiple validation ruby on rails", "body": "<p>Finally, after so going back and forth below solution worked well for me. </p>\n\n<pre><code>before_validation :strip_validations\n\ndef strip_validations\n     ['teacher_number', 'title', 'name', 'gender', 'location', 'dob', 'contact_mobile', 'contact_home', 'street', 'city', 'state', 'zip_code', 'country'].each do |attr|\n     errors.add(\"Teacher\", {attr =&gt; \" #{attr} can't be blank\"}) if send(attr.to_sym) &amp;&amp; send(attr.to_sym).blank?\n    end\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5084534"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 332, "favorite_count": 0, "accepted_answer_id": 41044434, "answer_count": 4, "score": 0, "last_activity_date": 1481215018, "creation_date": 1481131060, "last_edit_date": 1481139313, "question_id": 41023528, "link": "https://stackoverflow.com/questions/41023528/how-to-skip-multiple-validation-ruby-on-rails", "title": "How to skip multiple validation ruby on rails", "body": "<p>I have 2 forms. </p>\n\n<p>Form 1 I have 10 fields which I am validating. </p>\n\n<p>Form 2 but it only contains 2 fields.</p>\n\n<p>The model is same.</p>\n\n<p>What I need to do is:</p>\n\n<p>To validate fields when they are submitted by forms. If I am not posting any fields it should not validate in model. If I post 5 fields it should validate 5 fields. If I post 2 fields it should validate only 2 not all of them.</p>\n\n<p>So form 1 all 10 should be validated, form 2 only 2 should validate not rest of 8.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>validates :teacher_number, :title, :name, :gender, :location, :dob,\n:contact_mobile, :contact_home, :street, :city, :state, :zip_code, :country, \npresence: true\nvalidates :teacher_number, uniqueness: {scope: :school_id}\nvalidate  :teacher_number_existance, :on =&gt; :create\nvalidate  :school_existance, :on =&gt; :create\n</code></pre>\n\n<p>Below is my attempt which successfully works fine but its bulk of code that somewhat a bad practice.</p>\n\n<pre><code> validates :teacher_number, presence: true, if: \"teacher_number &amp;&amp; teacher_number.blank?\"\n  validates :title, presence: true, if: \"title &amp;&amp; title.blank?\"\n  validates :name, presence: true, if: \"name &amp;&amp; name.blank?\"\n  validates :gender, presence: true, if: \"gender &amp;&amp; gender.blank?\"\n  validates :location, presence: true, if: \"location &amp;&amp; location.blank?\"\n  validates :dob, presence: true, if: \"dob &amp;&amp; dob.blank?\"\n  validates :contact_mobile, presence: true, if: \"contact_mobile &amp;&amp; contact_mobile.blank?\"\n  validates :contact_home, presence: true, if: \"contact_home &amp;&amp; contact_home.blank?\"\n  validates :street, presence: true, if: \"street &amp;&amp; street.blank?\"\n  validates :city, presence: true, if: \"city &amp;&amp; city.blank?\"\n  validates :state, presence: true, if: \"state &amp;&amp; state.blank?\"\n  validates :zip_code, presence: true, if: \"zip_code &amp;&amp; zip_code.blank?\"\n  validates :country, presence: true, if: \"country &amp;&amp; country.blank?\"\n  validates :teacher_number, uniqueness: {scope: :school_id}, if: \"teacher_number &amp;&amp; teacher_number.blank?\"\n  validate  :teacher_number_existance, :on =&gt; :create, if: \"self.teacher_number &amp;&amp; self.teacher_number.blank?\"\n  validate  :school_existance, :on =&gt; :create, if: \"self.teacher_number &amp;&amp; self.teacher_number.blank?\"\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p><strong>UPDATED MY QUESTION.</strong></p>\n"}, {"tags": ["ruby", "instance-eval", "class-eval"], "comments": [{"owner": {"reputation": 17582, "user_id": 280143, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/46ac5380f2c25f9901f83964916c0226?s=128&d=identicon&r=PG", "display_name": "casraf", "link": "https://stackoverflow.com/users/280143/casraf"}, "edited": false, "score": 0, "creation_date": 1481129825, "post_id": 41022993, "comment_id": 69253339, "body": "<code>new</code> in classes in Ruby is actually defined using <code>initialize</code>. Try replacing <code>:new</code> with <code>:initialize</code>"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 17582, "user_id": 280143, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/46ac5380f2c25f9901f83964916c0226?s=128&d=identicon&r=PG", "display_name": "casraf", "link": "https://stackoverflow.com/users/280143/casraf"}, "edited": false, "score": 0, "creation_date": 1481137124, "post_id": 41022993, "comment_id": 69257720, "body": "@casraf That&#39;s not correct. <code>new</code> is defined by Class (the superclass of all classes) and does two things (from <a href=\"https://ruby-doc.org/core-2.3.1/Class.html#method-c-new\" rel=\"nofollow noreferrer\">the docs</a>): &quot;Calls <code>allocate</code> to create a new object of <i>class</i>\u2019s class, then invokes that object\u2019s <code>initialize</code> method, passing it <i>args</i>. This is the method that ends up getting called whenever an object is constructed using .new.&quot; When you define (override) <code>initialize</code> in a class it does not define or change <code>new</code>, and <code>new</code> can be overridden like any other class method (though I can&#39;t think of a reason to)."}, {"owner": {"reputation": 17582, "user_id": 280143, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/46ac5380f2c25f9901f83964916c0226?s=128&d=identicon&r=PG", "display_name": "casraf", "link": "https://stackoverflow.com/users/280143/casraf"}, "edited": false, "score": 0, "creation_date": 1481191178, "post_id": 41022993, "comment_id": 69280415, "body": "My bad. Thanks for clarifying :)"}], "answers": [{"tags": [], "owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "is_accepted": false, "score": 0, "last_activity_date": 1481134520, "last_edit_date": 1481134520, "creation_date": 1481132261, "answer_id": 41023898, "question_id": 41022993, "link": "https://stackoverflow.com/questions/41022993/deep-into-ruby-class-eval-and-instance-eval/41023898#41023898", "title": "Deep into Ruby class_eval and instance_eval", "body": "<p>Lets take a peek into what self is here:</p>\n\n<pre><code>class A\n  puts self.inspect\n\n  class &lt;&lt; self\n    puts self.inspect\n  end\nend\n\nA.class_eval {\n  puts self.inspect\n\n  class &lt;&lt; self\n    puts self.inspect\n  end\n}\n\nA.instance_eval{\n  puts self.inspect\n\n  class &lt;&lt; self\n    puts self.inspect\n  end\n}\n</code></pre>\n\n<p>We get the following output:</p>\n\n<pre><code>A\n#&lt;Class:A&gt;\nA\n#&lt;Class:A&gt;\nA\n#&lt;Class:A&gt;\n</code></pre>\n\n<p>The class_eval method is defined for modules (and thus classes) and evaluates within the context of the module (class). The instance_eval method evaluates within the context of a BasicObject. It seems that in these cases the two (three actually) are the same thing.</p>\n\n<p>However, I know for a fact that if methods are <em>created</em> inside the eval block that class_eval creates instance methods and instance_eval creates class methods. There is already an excellent posting for that observation:</p>\n"}], "owner": {"reputation": 101, "user_id": 6029983, "user_type": "registered", "profile_image": "https://graph.facebook.com/998858476852253/picture?type=large", "display_name": "bernstein7", "link": "https://stackoverflow.com/users/6029983/bernstein7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1481134520, "creation_date": 1481129361, "question_id": 41022993, "link": "https://stackoverflow.com/questions/41022993/deep-into-ruby-class-eval-and-instance-eval", "title": "Deep into Ruby class_eval and instance_eval", "body": "<p><code>class_eval</code> and <code>instance_eval</code> are quite predictable in such cases like defining methods. I also understand the difference between class's instance and class's singleton (aka eigenclass).</p>\n\n<p>BUT</p>\n\n<p>I cannot figure out the only thing like following:\nLet's say, for some strage purposes, we want make existing class to be singleton.</p>\n\n<pre><code>class A; end\nclass B; end\n\nA.class_eval do\n  private :new\nend\n\nB.instance_eval do\n  private :new\nend\n</code></pre>\n\n<p>in both cases got </p>\n\n<pre><code>NameError: undefined method 'new' for class\nDid you mean?  new\n</code></pre>\n\n<p>yes, I mean exactly this method.</p>\n\n<p>Moreover, these two variants give the same result, like <code>self</code> points at class object in both cases</p>\n\n<pre><code>A.class_eval do\n  class &lt;&lt; self\n    private :new\n  end\nend\n\nA.new\n=&gt; NoMethodError: private method 'new' called for A:Class\n\nB.instance_eval do\n  class &lt;&lt; self\n    private :new\n  end\nend\n\nB.new\n=&gt; NoMethodError: private method 'new' called for B:Class\n</code></pre>\n\n<p>How come? Can anybody shed the light on this?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1481142396, "post_id": 41022956, "comment_id": 69260758, "body": "As an aside, <a href=\"https://ruby-doc.org/core-2.3.1/IO.html#method-i-puts\" rel=\"nofollow noreferrer\"><code>file.puts(tweet_text)</code></a> is usually preferable to <code>file.write(&quot;#{tweet_text}\\n&quot;)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "reply_to_user": {"reputation": 236, "user_id": 2107602, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/97734418eb61d832e484aaa67ccd5dde?s=128&d=identicon&r=PG", "display_name": "Bryan White", "link": "https://stackoverflow.com/users/2107602/bryan-white"}, "edited": false, "score": 1, "creation_date": 1481130739, "post_id": 41023337, "comment_id": 69253887, "body": "Sure thing. Ruby <a href=\"https://ruby-doc.org/core-2.3.3/Enumerable.html\" rel=\"nofollow noreferrer\">Enumerable</a> and <a href=\"https://ruby-doc.org/core-2.3.3/Array.html\" rel=\"nofollow noreferrer\">Array</a> methods are pretty awesome."}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": true, "score": 1, "last_activity_date": 1481130423, "creation_date": 1481130423, "answer_id": 41023337, "question_id": 41022956, "link": "https://stackoverflow.com/questions/41022956/regex-how-do-i-delete-all-but-every-fourth-word-in-a-text-file/41023337#41023337", "title": "Regex: How do I delete all but every fourth word in a text file?", "body": "<p>I don't know about a regex solution specifically, but you could to this:</p>\n\n<pre><code>File.open(PATH_TO_TWEETS_CLEAN, 'w') do |file|\n  csv_text.reverse.each do |row|\n    clean_text = row[5].gsub(/(?:f|ht)tps?:\\/[^\\s]+/, '').gsub(/\\n/,' ')\n    tweet_text = clean_text.split.select.with_index { |_, i| i % 4 == 0 }.join(' ')\n    file.write(\"#{tweet_text}\\n\")\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1481133232, "post_id": 41023492, "comment_id": 69255457, "body": "Yes, that works as well. Might as well do <code>map(&amp;:first)</code> in that case."}], "tags": [], "owner": {"reputation": 12996, "user_id": 23855, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/7e01724270741126f0d814d028078dff?s=128&d=identicon&r=PG", "display_name": "chills42", "link": "https://stackoverflow.com/users/23855/chills42"}, "is_accepted": false, "score": 0, "last_activity_date": 1481135843, "last_edit_date": 1481135843, "creation_date": 1481130965, "answer_id": 41023492, "question_id": 41022956, "link": "https://stackoverflow.com/questions/41022956/regex-how-do-i-delete-all-but-every-fourth-word-in-a-text-file/41023492#41023492", "title": "Regex: How do I delete all but every fourth word in a text file?", "body": "<p>I'd probably do it using <a href=\"https://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-each_slice\" rel=\"nofollow noreferrer\">each_slice</a>:</p>\n\n<pre><code>File.open(PATH_TO_TWEETS_CLEAN, 'w') do |file|\n  csv_text.reverse.each do |row|\n    tweet_text = row[5].gsub(/(?:f|ht)tps?:\\/[^\\s]+/, '').gsub(/\\n/,' ')\n    tweet_text = tweet_text.split.each_slice(4).map(&amp;:first).join(' ')\n    file.write(\"#{tweet_text}\\n\")\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 0, "last_activity_date": 1481143898, "creation_date": 1481143898, "answer_id": 41027133, "question_id": 41022956, "link": "https://stackoverflow.com/questions/41022956/regex-how-do-i-delete-all-but-every-fourth-word-in-a-text-file/41027133#41027133", "title": "Regex: How do I delete all but every fourth word in a text file?", "body": "<p>The accepted answer is fine, but since you asked about regular expressions, I thought I'd show you how it can be done. Here's a Regexp to start with:</p>\n\n<pre><code>/((\\S+\\s+){3})\\S+\\s*/\n</code></pre>\n\n<p>I've chosen to take \"word\" to mean any sequence of non-whitespace characters. This matches any word (<code>\\S+</code>) followed by one or more whitespace characters (<code>\\s+</code>), three times, followed by any word and zero or more whitespace characters (zero so it can match the last word in the string). Here's how you would use it:</p>\n\n<pre><code>tweet_text = \"I'm doing a rather chaotic experiment with a goofy Markov Chain twitter bot.\"\ntweet_text.gsub(/((\\S+\\s+){3})\\S+\\s*/, '\\1')\n# =&gt; I'm doing a chaotic experiment with goofy Markov Chain bot.\n</code></pre>\n"}], "owner": {"reputation": 236, "user_id": 2107602, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/97734418eb61d832e484aaa67ccd5dde?s=128&d=identicon&r=PG", "display_name": "Bryan White", "link": "https://stackoverflow.com/users/2107602/bryan-white"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 41023337, "answer_count": 3, "score": 1, "last_activity_date": 1481143898, "creation_date": 1481129229, "question_id": 41022956, "link": "https://stackoverflow.com/questions/41022956/regex-how-do-i-delete-all-but-every-fourth-word-in-a-text-file", "title": "Regex: How do I delete all but every fourth word in a text file?", "body": "<p>I'm doing a rather chaotic experiment with a goofy Markov Chain twitter bot. The current version of the bot opens a CSV file of my tweet archive, strips out things like links and whatnot and leaves only plain text. Works like a charm. Love it!</p>\n\n<pre><code>PATH_TO_TWEETS_CSV   = 'tweets.csv'\nPATH_TO_TWEETS_CLEAN = 'liber_markov.txt'\n\ncsv_text = CSV.parse(File.read(PATH_TO_TWEETS_CSV))\n\nFile.open(PATH_TO_TWEETS_CLEAN, 'w') do |file|\n  csv_text.reverse.each do |row|\n    tweet_text = row[5].gsub(/(?:f|ht)tps?:\\/[^\\s]+/, '').gsub(/\\n/,' ')\n    file.write(\"#{tweet_text}\\n\")\n  end\nend\n</code></pre>\n\n<p>However.</p>\n\n<p>I'd like to take an insane step forward and sift through the file a second time, stripping out all but every fourth word, effectively removing 75% of the content. Is there a regex that can handle that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "puma"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1481129622, "post_id": 41022731, "comment_id": 69253213, "body": "if you kill the fork does it close the connection?  I&#39;m not able to try right this second.  ie <code>pid = fork { Process.daemon }</code> then <code>Process.kill(&quot;HUP&quot;, pid)</code>"}, {"owner": {"reputation": 31, "user_id": 2842410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e93d63da7ae537a909ede516b7df46?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/2842410/tom"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1481131720, "post_id": 41022731, "comment_id": 69254509, "body": "it doesn&#39;t help. I think that <code>pid = fork { Process.daemon; sleep }</code> just terminates itself - the part in <code>pid</code>"}, {"owner": {"reputation": 38170, "user_id": 57135, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/S9roh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/57135/joe"}, "edited": false, "score": 0, "creation_date": 1481137233, "post_id": 41022731, "comment_id": 69257782, "body": "Is using <code>spawn</code> an option vs <code>fork</code>?"}], "owner": {"reputation": 31, "user_id": 2842410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94e93d63da7ae537a909ede516b7df46?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/2842410/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 270, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1481128624, "creation_date": 1481128624, "question_id": 41022731, "link": "https://stackoverflow.com/questions/41022731/how-to-close-all-puma-server-connections-in-ruby", "title": "How to close all Puma server connections in Ruby?", "body": "<p>I have Rails app with Puma as a server from which I fork a process as a daemon</p>\n\n<p>example:</p>\n\n<pre><code>fork do\n  Process.daemon # to detach from terminal\n  sleep\nend\n</code></pre>\n\n<p>The problem is that forked process inherits all Puma connections to ports or unix sockets.\nAnybody knows how to close all those Puma connections?</p>\n"}, {"tags": ["ruby", "rake", "jekyll", "github-pages"], "comments": [{"owner": {"reputation": 14101, "user_id": 139117, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f327e79d803f7372c952f0023983195d?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad the Impala", "link": "https://stackoverflow.com/users/139117/vlad-the-impala"}, "edited": false, "score": 0, "creation_date": 1481133418, "post_id": 41022520, "comment_id": 69255560, "body": "How do you run the script? You need to pass the env var when you run it, like: <code>JEKYLL_ENV=production ruby myscript.rb</code>."}, {"owner": {"reputation": 8803, "user_id": 3867406, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2953c91f637b80205241c00c3e215b9a?s=128&d=identicon&r=PG&f=1", "display_name": "ted", "link": "https://stackoverflow.com/users/3867406/ted"}, "reply_to_user": {"reputation": 14101, "user_id": 139117, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/f327e79d803f7372c952f0023983195d?s=128&d=identicon&r=PG&f=1", "display_name": "Vlad the Impala", "link": "https://stackoverflow.com/users/139117/vlad-the-impala"}, "edited": false, "score": 0, "creation_date": 1481198669, "post_id": 41022520, "comment_id": 69285326, "body": "I run it with ` rake publish ` so it would be  <code>JEKYLL_ENV=production  rake publish </code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 3, "last_activity_date": 1481147248, "creation_date": 1481147248, "answer_id": 41027974, "question_id": 41022520, "link": "https://stackoverflow.com/questions/41022520/add-jekyll-env-production-to-rakefile/41027974#41027974", "title": "Add JEKYLL_ENV=production to rakefile", "body": "<p>In Ruby, environment variables can be accessed in <a href=\"https://ruby-doc.org/core-2.3.1/ENV.html\" rel=\"nofollow noreferrer\"><code>ENV</code></a>, so if for some reason you can't specify it on the command line when you run your script, I think it will work to just specify it there:</p>\n\n<pre><code>ENV[\"JEKYLL_ENV\"] = \"production\"\n</code></pre>\n\n<p>You ought to be able to put this anywhere in the Rakefile before the tasks.</p>\n"}], "owner": {"reputation": 8803, "user_id": 3867406, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2953c91f637b80205241c00c3e215b9a?s=128&d=identicon&r=PG&f=1", "display_name": "ted", "link": "https://stackoverflow.com/users/3867406/ted"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 41027974, "answer_count": 1, "score": 1, "last_activity_date": 1481147248, "creation_date": 1481128080, "question_id": 41022520, "link": "https://stackoverflow.com/questions/41022520/add-jekyll-env-production-to-rakefile", "title": "Add JEKYLL_ENV=production to rakefile", "body": "<p>I have this script that builds my Jekyll static webstite ready to be used on Github Pages. <strong>I need to pass <code>JEKYLL_ENV=production</code> to the build arguments</strong> to be sure that I can use google analytics (there is a <code>{% if jekyll.environment == 'production' %}</code> tag in my template).</p>\n\n<p>For instance if I did not use this script to publish I would build the site with <code>JEKYLL_ENV=production jekyll build</code></p>\n\n<p>I however have no knowledge of Ruby and Rakefiles...</p>\n\n<p>I understand what it does but don't know where to put the modifications. I feel like it would look like (wrong code) </p>\n\n<pre><code>Jekyll::Site.new(Jekyll.configuration({\n    \"source\"      =&gt; \".\",\n    \"destination\" =&gt; \"_site\"\n  }).build({\n    \"JEKYLL_ENV\" =&gt; \"production\"\n  })).process\n</code></pre>\n\n<p>Here is the original script, thanks!</p>\n\n<pre><code>require \"rubygems\"\nrequire \"tmpdir\"\n\nrequire \"bundler/setup\"\nrequire \"jekyll\"\n\nGITHUB_REPONAME = \"my_reponame\"\n\n\ndesc \"Generate blog files\"\ntask :generate do\n  Jekyll::Site.new(Jekyll.configuration({\n    \"source\"      =&gt; \".\",\n    \"destination\" =&gt; \"_site\"\n  })).process\nend\n\n\ndesc \"Generate and publish blog to gh-pages\"\ntask :publish =&gt; [:generate] do\n  Dir.mktmpdir do |tmp|\n    cp_r \"_site/.\", tmp\n\n    pwd = Dir.pwd\n    Dir.chdir tmp\n\n    system \"git init\"\n    system \"git add .\"\n    message = \"Site updated at #{Time.now.utc}\"\n    system \"git commit -m #{message.inspect}\"\n    system \"git remote add origin git@github.com:#{GITHUB_REPONAME}.git\"\n    system \"git push origin master --force\"\n\n    Dir.chdir pwd\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "sequel"], "answers": [{"tags": [], "owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "is_accepted": true, "score": 3, "last_activity_date": 1492465496, "last_edit_date": 1492465496, "creation_date": 1481138033, "answer_id": 41025503, "question_id": 41022176, "link": "https://stackoverflow.com/questions/41022176/ordering-of-sequel-gem-subqueries/41025503#41025503", "title": "Ordering of Sequel (gem) subqueries", "body": "<p>You probably want something like:</p>\n\n<pre><code>User.where(:a=&gt;3).where(Sequel.~(:b=&gt;[0.25, 0.31, 0.78]) | {:b=&gt;nil})\n</code></pre>\n"}], "owner": {"reputation": 643, "user_id": 1463572, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/01bfce085158b21e02684c6531fc364b?s=128&d=identicon&r=PG", "display_name": "tpei", "link": "https://stackoverflow.com/users/1463572/tpei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 41025503, "answer_count": 1, "score": 1, "last_activity_date": 1492465496, "creation_date": 1481127066, "question_id": 41022176, "link": "https://stackoverflow.com/questions/41022176/ordering-of-sequel-gem-subqueries", "title": "Ordering of Sequel (gem) subqueries", "body": "<p>I am looking for a way to concatenate subqueries with a specific ordering.</p>\n\n<p>The following query:</p>\n\n<pre><code>User.where(a: 3).where(#&lt;Sequel::SQL::BooleanExpression @op=&gt;:\"NOT IN\", @args=&gt;[:b, [0.25, 0.31, 0.78]]&gt;).or(b: nil)\n</code></pre>\n\n<p>groups like so:</p>\n\n<pre><code>(((a == 3) AND (b != [...]))\nOR (b == nil))\n</code></pre>\n\n<p>However what I am trying to achieve is</p>\n\n<pre><code>((a == 3) \nAND ((b != [...]) OR (b == nil))\n</code></pre>\n\n<p>Any ideas how one can achieve this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 5422842, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/481281de1a8909a0d772c77874d552b7?s=128&d=identicon&r=PG&f=1", "display_name": "SumLare", "link": "https://stackoverflow.com/users/5422842/sumlare"}, "edited": false, "score": 0, "creation_date": 1481219859, "post_id": 41026388, "comment_id": 69299346, "body": "It return actually, I return events by particular ids in that class method"}], "tags": [], "owner": {"reputation": 41, "user_id": 7263375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de57fea423749843584cfb3bbb246140?s=128&d=identicon&r=PG&f=1", "display_name": "\u0414\u0435\u043d\u0438\u0441 \u041f\u0440\u0435\u043f\u0435\u043b\u0438\u0446\u0430", "link": "https://stackoverflow.com/users/7263375/%d0%94%d0%b5%d0%bd%d0%b8%d1%81-%d0%9f%d1%80%d0%b5%d0%bf%d0%b5%d0%bb%d0%b8%d1%86%d0%b0"}, "is_accepted": false, "score": 0, "last_activity_date": 1481141142, "creation_date": 1481141142, "answer_id": 41026388, "question_id": 41021386, "link": "https://stackoverflow.com/questions/41021386/rails-different-sql-between-scope-and-explicit-join/41026388#41026388", "title": "Rails different sql between scope and explicit join", "body": "<p>I think problem in that \"class methods\" do not returns active relation. In your sample self.available_for(user) runs method ids and it runs pluck method that do request to DB and returns array of ids.</p>\n"}], "owner": {"reputation": 35, "user_id": 5422842, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/481281de1a8909a0d772c77874d552b7?s=128&d=identicon&r=PG&f=1", "display_name": "SumLare", "link": "https://stackoverflow.com/users/5422842/sumlare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481141142, "creation_date": 1481124738, "question_id": 41021386, "link": "https://stackoverflow.com/questions/41021386/rails-different-sql-between-scope-and-explicit-join", "title": "Rails different sql between scope and explicit join", "body": "<p>I have models with these associations:</p>\n\n<pre><code>class Event &lt; ActiveRecord::Base\n  has_many :memberships, dependent: :destroy\n  has_many :users, through: :memberships\nend\n\nclass Membership &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :event\nend\n</code></pre>\n\n<p>And following methods:</p>\n\n<pre><code>#In Membership\nscope :available_for, -&gt; (user) { joins(:event).merge(Event.available_for(user)) }\n\n#In Event\ndef self.available_for(user)\n  ...\n  joins(:memberships).where('memberships.user_id': user.id).ids\n  ...\nend\n</code></pre>\n\n<p>So in controller when I call:</p>\n\n<pre><code>@memberships = @user.memberships.available_for(current_user)\n</code></pre>\n\n<p>Apparently is not the same as:</p>\n\n<pre><code>@memberships = @user.memberships.joins(:event).merge(Event.available_for(current_user))\n</code></pre>\n\n<p>In first case it works not as expected, it adds extra AND while join in sql:</p>\n\n<pre><code>SELECT \"events\".id FROM \"events\" INNER JOIN \"memberships\" ON \"events\".\"id\" = \"memberships\".\"event_id\" WHERE \"memberships\".\"user_id\" = $1 AND \"memberships\".\"user_id\" = $2\n</code></pre>\n\n<p>In second it has no AND:</p>\n\n<pre><code>SELECT \"events\".\"id\" FROM \"events\" INNER JOIN \"memberships\" ON \"memberships\".\"event_id\" = \"events\".\"id\" WHERE \"memberships\".\"user_id\" = $1\n</code></pre>\n\n<p>I can't get why this is happening, any guess?</p>\n\n<p>Moreover if I change this:</p>\n\n<pre><code>@memberships = @user.memberships.available_for(current_user)\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>@memberships = Membership.available_for(current_user).where(user_id: 1)\n</code></pre>\n\n<p>It will work as expected as I added join explicitly as above</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "connection"], "comments": [{"owner": {"reputation": 380, "user_id": 4781518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jtiKY.jpg?s=128&g=1", "display_name": "ydaniju", "link": "https://stackoverflow.com/users/4781518/ydaniju"}, "edited": false, "score": 0, "creation_date": 1481125114, "post_id": 41021148, "comment_id": 69250070, "body": "Is there somewhere in your code where you are making connections? Perhaps the connections are being left open perpetually?"}, {"owner": {"reputation": 380, "user_id": 4781518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jtiKY.jpg?s=128&g=1", "display_name": "ydaniju", "link": "https://stackoverflow.com/users/4781518/ydaniju"}, "edited": false, "score": 0, "creation_date": 1481125530, "post_id": 41021148, "comment_id": 69250389, "body": "<a href=\"http://stackoverflow.com/questions/2757549/org-postgresql-util-psqlexception-fatal-sorry-too-many-clients-already\" title=\"org postgresql util psqlexception fatal sorry too many clients already\">stackoverflow.com/questions/2757549/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "edited": false, "score": 0, "creation_date": 1481135771, "post_id": 41021708, "comment_id": 69256894, "body": "Thanks @Laurenz for your answer. Is rails automatically closing connections as I don&#39;t remember to have written any loops which should let me active connections"}], "tags": [], "owner": {"reputation": 125670, "user_id": 6464308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/12PVX.jpg?s=128&g=1", "display_name": "Laurenz Albe", "link": "https://stackoverflow.com/users/6464308/laurenz-albe"}, "is_accepted": true, "score": 1, "last_activity_date": 1481125669, "creation_date": 1481125669, "answer_id": 41021708, "question_id": 41021148, "link": "https://stackoverflow.com/questions/41021148/kill-postgre-connection-in-rails-console/41021708#41021708", "title": "Kill postgre connection in rails console", "body": "<p>As a PostgreSQL superuser, you can use the function <code>pg_terminate_backend</code> to kill a session. You can get a list of backend process IDs from the <code>pg_stat_activity</code> view.</p>\n\n<p>So the query could look like this:</p>\n\n<pre><code>SELECT pg_terminate_backend(pid)\nFROM pg_stat_activity\nWHERE pid &lt;&gt; pg_backend_pid();\n</code></pre>\n\n<p>To be less disruptive, you could add <code>AND state = 'idle'</code>.</p>\n\n<p>Make sure your application does not connect as superuser, then there will always be <code>superuser_reserved_connections</code> (default 3) connections left that can be used by a superuser.</p>\n\n<p>All that said, your application should really not exceed a maximum number of connections. If you can't guarantee that, use a connection pooler like pgBouncer.</p>\n"}, {"tags": [], "owner": {"reputation": 218, "user_id": 2188182, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/x5bMj.png?s=128&g=1", "display_name": "Sam Morgan", "link": "https://stackoverflow.com/users/2188182/sam-morgan"}, "is_accepted": false, "score": 0, "last_activity_date": 1481133608, "creation_date": 1481133608, "answer_id": 41024246, "question_id": 41021148, "link": "https://stackoverflow.com/questions/41021148/kill-postgre-connection-in-rails-console/41024246#41024246", "title": "Kill postgre connection in rails console", "body": "<p>You cannot use the <code>rails console</code> to kill Postgres processes.</p>\n\n<p>You should restart Postgres however you started it (either from the command-line or e.g. from the PostgresApp application) and it will clear the current connections.</p>\n\n<p>As a side note - you shouldn't be exceeding the number of connections Postgres can offer inside a Rails app. You'd either need a <em>lot</em> of concurrent users, or some really problematic loop somewhere.</p>\n"}], "owner": {"reputation": 630, "user_id": 4913220, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/NjkLC.jpg?s=128&g=1", "display_name": "Vlad Balanescu", "link": "https://stackoverflow.com/users/4913220/vlad-balanescu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 714, "favorite_count": 1, "accepted_answer_id": 41021708, "answer_count": 2, "score": 0, "last_activity_date": 1481133608, "creation_date": 1481123969, "question_id": 41021148, "link": "https://stackoverflow.com/questions/41021148/kill-postgre-connection-in-rails-console", "title": "Kill postgre connection in rails console", "body": "<p>How can I kill all postgre connections using rails console? I am getting this: </p>\n\n<pre><code>PG::ConnectionBad\nFATAL: sorry, too many clients already FATAL: sorry, too many clients already\n\nRails.root: C:/Users/IBM_ADMIN/Desktop/Work/Extreme Blue Summer Internship/extreme-blue\n\nApplication Trace | Framework Trace | Full Trace\nactiverecord (4.2.7.1) lib/active_record/connection_adapters/postgresql_adapter.rb:651:in `initialize'\nactiverecord (4.2.7.1) lib/active_record/connection_adapters/postgresql_adapter.rb:651:in `new'\nactiverecord (4.2.7.1) lib/active_record/connection_adapters/postgresql_adapter.rb:651:in `connect'\nactiverecord (4.2.7.1) lib/active_record/connection_adapters/pos\n</code></pre>\n\n<p>The thing is I don't want to drop the database, but just to kill all the connections to it? Any help will be kindly appreciated!</p>\n\n<p>tgresql_adapter.rb:242:in `initialize'</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481126119, "post_id": 41020908, "comment_id": 69250800, "body": "Note: <code>Time.now.to_s.byteslice(-3)</code> only works for positive Timezone numbers between 0 and 9."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1481126633, "post_id": 41020908, "comment_id": 69251181, "body": "If your timezone was <code>+1200</code>, would you expect <code>2</code> or <code>12</code>? And what&#39;s the expected result for <code>+05:45</code>? <code>5</code> (truncated), <code>6</code> (rounded) or <code>5.75</code> (its decimal representation)"}, {"owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "edited": false, "score": 0, "creation_date": 1481127628, "post_id": 41020908, "comment_id": 69251849, "body": "If my timezone was <code>+1200</code>, I want get <code>12</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1481128094, "post_id": 41020908, "comment_id": 69252156, "body": "@\u5b59\u609f\u7a7a And if your timezone was <code>-1200</code>, do you want <code>12</code> as well or <code>-12</code>?"}, {"owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1481128807, "post_id": 41020908, "comment_id": 69252668, "body": "@Stefan In this case, I perfer <code>-12</code>, I saw that the funciton <code>strftime(&#39;%:z&#39;)</code> return a number and sens(+ or -) as well. that&#39;s what I&#39;m looking for. Thank you."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1481129421, "post_id": 41020908, "comment_id": 69253098, "body": "<code>strftime(&#39;%:z&#39;)</code> returns the <i>string</i> <code>&quot;-12:00&quot;</code>, not a number."}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 1, "creation_date": 1481135014, "post_id": 41020908, "comment_id": 69256419, "body": "The english you are looking for is &quot;timezone offset&quot;. The offset is how many hours the timezone is off, negative or positive, from UTC. While it is a whole number, it is normally expressed in the &quot;06:00&quot; format."}, {"owner": {"reputation": 17060, "user_id": 1015483, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2794b93b993e339f7838fea4f5041f4b?s=128&d=identicon&r=PG", "display_name": "Robbie", "link": "https://stackoverflow.com/users/1015483/robbie"}, "edited": false, "score": 0, "creation_date": 1481153682, "post_id": 41020908, "comment_id": 69266108, "body": "Plenty of places use a 30 minute timezone offset. Relying on a whole number is folly."}], "answers": [{"comments": [{"owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "edited": false, "score": 0, "creation_date": 1481123950, "post_id": 41021032, "comment_id": 69249197, "body": "Thank you for your fast answer. it point me to find my final answer : <code>Time.now.strftime(&#39;%:z&#39;)</code>."}, {"owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "edited": false, "score": 0, "creation_date": 1481124118, "post_id": 41021032, "comment_id": 69249334, "body": "<code>%:z - hour and minute offset from UTC with a colon (e.g. +09:00)</code>"}, {"owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "edited": false, "score": 0, "creation_date": 1481124133, "post_id": 41021032, "comment_id": 69249348, "body": "<code>%::z - hour, minute and second offset from UTC (e.g. +09:00:00)</code>"}], "tags": [], "owner": {"reputation": 905, "user_id": 5119244, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203221141608724/picture?type=large", "display_name": "Argonus", "link": "https://stackoverflow.com/users/5119244/argonus"}, "is_accepted": true, "score": 5, "last_activity_date": 1481123585, "creation_date": 1481123585, "answer_id": 41021032, "question_id": 41020908, "link": "https://stackoverflow.com/questions/41020908/how-to-get-timezone-offset-from-time-now/41021032#41021032", "title": "How to get timezone offset from Time.now", "body": "<p>You can use it</p>\n\n<pre><code>Time.now.strftime('%z')\n</code></pre>\n"}], "owner": {"reputation": 1047, "user_id": 2936733, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/eaecbfee79e2b901ccfc23d4d77ac50e?s=128&d=identicon&r=PG&f=1", "display_name": "\u5b59\u609f\u7a7a", "link": "https://stackoverflow.com/users/2936733/%e5%ad%99%e6%82%9f%e7%a9%ba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 496, "favorite_count": 0, "accepted_answer_id": 41021032, "answer_count": 1, "score": 2, "last_activity_date": 1481188011, "creation_date": 1481123301, "last_edit_date": 1481188011, "question_id": 41020908, "link": "https://stackoverflow.com/questions/41020908/how-to-get-timezone-offset-from-time-now", "title": "How to get timezone offset from Time.now", "body": "<pre><code>Time.now   #=&gt; 2007-11-19 08:27:30 -0600\n</code></pre>\n\n<p>I want get timezone offset <strong>+0600</strong> from Time.now. A Native ruby function is welcome if it exist.</p>\n\n<p>What i tried :</p>\n\n<pre><code>Time.now.to_s.byteslice(-5..-1) #=&gt; \"-0600\" as String\n</code></pre>\n\n<p>It works for my timezone(GET+1) but I want to find a better way.</p>\n"}, {"tags": ["ruby", "naming"], "answers": [{"tags": [], "owner": {"reputation": 3363, "user_id": 2876504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f861d39e1561dc8147fc6442d1235e8?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro C.", "link": "https://stackoverflow.com/users/2876504/alejandro-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1481122930, "creation_date": 1481122930, "answer_id": 41020775, "question_id": 41020723, "link": "https://stackoverflow.com/questions/41020723/bad-practice-to-set-parameter-variable-name-of-method-to-the-name-of-the-data-ty/41020775#41020775", "title": "Bad practice to set parameter variable name of method to the name of the data type in Ruby?", "body": "<p>It is poor practice, because it's usually not very descriptive. Additionally, since Ruby doesn't actually care that you're passing a <code>string</code> it could be misleading.</p>\n"}, {"comments": [{"owner": {"reputation": 111, "user_id": 7071657, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/2db130e1e31ec25830e701b0ee7a4aea?s=128&d=identicon&r=PG&f=1", "display_name": "David Sawatske", "link": "https://stackoverflow.com/users/7071657/david-sawatske"}, "edited": false, "score": 0, "creation_date": 1481123824, "post_id": 41021022, "comment_id": 69249097, "body": "Thanks for the insight!"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 111, "user_id": 7071657, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/2db130e1e31ec25830e701b0ee7a4aea?s=128&d=identicon&r=PG&f=1", "display_name": "David Sawatske", "link": "https://stackoverflow.com/users/7071657/david-sawatske"}, "edited": false, "score": 1, "creation_date": 1481123883, "post_id": 41021022, "comment_id": 69249145, "body": "@DavidSawatske, yw. Naming things is one of the two hardest things in programming. The other being cache validation and off-by-one errors. xd"}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 3, "last_activity_date": 1481123836, "last_edit_date": 1481123836, "creation_date": 1481123563, "answer_id": 41021022, "question_id": 41020723, "link": "https://stackoverflow.com/questions/41020723/bad-practice-to-set-parameter-variable-name-of-method-to-the-name-of-the-data-ty/41021022#41021022", "title": "Bad practice to set parameter variable name of method to the name of the data type in Ruby?", "body": "<p>Depends. You want to be using names as close as possible to the problem domain.</p>\n\n<p>In your case, a more appropriate name for the parameter would be <code>uncapitalized_title</code>, <code>raw_title</code>, <code>unformatted_title</code>, simply <code>title</code> or something similar.</p>\n\n<p>On the other hand, if you were writing a gem that extends <code>String</code> or does something with generic strings, then <code>string</code> is likely the right name.</p>\n"}], "owner": {"reputation": 111, "user_id": 7071657, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/2db130e1e31ec25830e701b0ee7a4aea?s=128&d=identicon&r=PG&f=1", "display_name": "David Sawatske", "link": "https://stackoverflow.com/users/7071657/david-sawatske"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1481123836, "creation_date": 1481122771, "last_edit_date": 1481123745, "question_id": 41020723, "link": "https://stackoverflow.com/questions/41020723/bad-practice-to-set-parameter-variable-name-of-method-to-the-name-of-the-data-ty", "title": "Bad practice to set parameter variable name of method to the name of the data type in Ruby?", "body": "<p>Is it poor practice to name the variable in a method a lowercase version of the class name?</p>\n\n<p>In the case below: <code>string.class</code> ==> <code>String</code></p>\n\n<pre><code>def title=(string)\n  @title = string.split(' ').map.with_index do |word, i|\n    i == 0 ? word.capitalize : title_form(word)\n  end.join(' ')\nend\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 4587, "user_id": 3447827, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n08Vz.jpg?s=128&g=1", "display_name": "durbnpoisn", "link": "https://stackoverflow.com/users/3447827/durbnpoisn"}, "edited": false, "score": 1, "creation_date": 1481122872, "post_id": 41020695, "comment_id": 69248477, "body": "Like any other language, it&#39;s a matter of nested loops.  Start at 0, count to 2.  Then start at 3, count to 6, and so on."}, {"owner": {"reputation": 5579, "user_id": 3970701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a937016807c66d89d0a62d7a1b235533?s=128&d=identicon&r=PG", "display_name": "Amin Shah Gilani", "link": "https://stackoverflow.com/users/3970701/amin-shah-gilani"}, "reply_to_user": {"reputation": 4587, "user_id": 3447827, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n08Vz.jpg?s=128&g=1", "display_name": "durbnpoisn", "link": "https://stackoverflow.com/users/3447827/durbnpoisn"}, "edited": false, "score": 0, "creation_date": 1481122980, "post_id": 41020695, "comment_id": 69248538, "body": "@durbnpoisn I&#39;m actually experimenting with a loop-de-loop function right now, but I know there&#39;s a much more efficient way of doing it since I know other people have done this in very few LOC. If a better solution isn&#39;t presented, and if my solution works, I&#39;ll just post that and mark it as closed."}, {"owner": {"reputation": 4587, "user_id": 3447827, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n08Vz.jpg?s=128&g=1", "display_name": "durbnpoisn", "link": "https://stackoverflow.com/users/3447827/durbnpoisn"}, "edited": false, "score": 0, "creation_date": 1481123042, "post_id": 41020695, "comment_id": 69248570, "body": "I think you should post what you&#39;ve got as part of the question.  If there are improvements to be made, that&#39;s where people will chime in."}, {"owner": {"reputation": 5579, "user_id": 3970701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a937016807c66d89d0a62d7a1b235533?s=128&d=identicon&r=PG", "display_name": "Amin Shah Gilani", "link": "https://stackoverflow.com/users/3970701/amin-shah-gilani"}, "reply_to_user": {"reputation": 4587, "user_id": 3447827, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n08Vz.jpg?s=128&g=1", "display_name": "durbnpoisn", "link": "https://stackoverflow.com/users/3447827/durbnpoisn"}, "edited": false, "score": 0, "creation_date": 1481123096, "post_id": 41020695, "comment_id": 69248593, "body": "@durbnpoisn, oh I&#39;m still experimenting with it. The loop within a loop occurred to me after posting the question. If it works, I&#39;ll certainly post it."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 4587, "user_id": 3447827, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n08Vz.jpg?s=128&g=1", "display_name": "durbnpoisn", "link": "https://stackoverflow.com/users/3447827/durbnpoisn"}, "edited": false, "score": 0, "creation_date": 1481126600, "post_id": 41020695, "comment_id": 69251157, "body": "@durbnpoisn : You can write Fortran in any language, it doesn&#39;t mean it&#39;s a good idea to do so with Ruby ;)"}, {"owner": {"reputation": 4587, "user_id": 3447827, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/n08Vz.jpg?s=128&g=1", "display_name": "durbnpoisn", "link": "https://stackoverflow.com/users/3447827/durbnpoisn"}, "edited": false, "score": 0, "creation_date": 1481133758, "post_id": 41020695, "comment_id": 69255755, "body": "I sometimes forget how different an animal Ruby is.  But that&#39;s why I gave a generic comment rather than an answer I didn&#39;t have.;"}], "answers": [{"comments": [{"owner": {"reputation": 5579, "user_id": 3970701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a937016807c66d89d0a62d7a1b235533?s=128&d=identicon&r=PG", "display_name": "Amin Shah Gilani", "link": "https://stackoverflow.com/users/3970701/amin-shah-gilani"}, "edited": false, "score": 2, "creation_date": 1481125022, "post_id": 41021269, "comment_id": 69250002, "body": "Ofcourse! <code>each_slice</code>! I knew there was a Ruby way of doing it, I just knew there was!"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 5, "last_activity_date": 1481139259, "last_edit_date": 1481139259, "creation_date": 1481124310, "answer_id": 41021269, "question_id": 41020695, "link": "https://stackoverflow.com/questions/41020695/how-do-i-split-a-9x9-array-into-9-3x3-components/41021269#41021269", "title": "How do I split a 9x9 array into 9 3x3 components", "body": "<p>That was a fun exercise!</p>\n\n<h1>Answer</h1>\n\n<pre><code>game.each_slice(3).map{|stripe| stripe.transpose.each_slice(3).map{|chunk| chunk.transpose}}.flatten(1)\n</code></pre>\n\n<p>It would be cumbersome and not needed to define every <code>chunk_1, chunk_2, ...</code>.</p>\n\n<p>If you want <code>chunk_2</code>, you can use <code>extract_chunks(game)[1]</code></p>\n\n<p>It outputs <code>[chunk_1, chunk_2, chunk_3, ..., chunk_9]</code>, so it's an Array of Arrays of Arrays :</p>\n\n<pre><code>1 3 2\n4 9 8\n7 5 6\n\n5 7 9\n2 6 1\n3 8 4\n\n4 6 8\n3 7 5\n2 1 9\n\n6 4 3\n5 2 1\n...\n</code></pre>\n\n<p>You can define a method to check if this grid is valid (it is) :</p>\n\n<pre><code>def extract_chunks(game)\n  game.each_slice(3).map{|stripe| stripe.transpose.each_slice(3).map{|chunk| chunk.transpose}}.flatten(1)\nend\n\nclass Array # NOTE: Use refinements if you don't want to patch Array\n  def has_nine_unique_elements?\n    self.flatten(1).uniq.size == 9\n  end\nend\n\ndef valid?(game)\n  game.has_nine_unique_elements? &amp;&amp;\n  game.all?{|row| row.has_nine_unique_elements? } &amp;&amp;\n  game.all?{|column| column.has_nine_unique_elements? } &amp;&amp;\n  extract_chunks(game).all?{|chunk| chunk.has_nine_unique_elements? }\nend\n\nputs valid?(game) #=&gt; true\n</code></pre>\n\n<h1>Theory</h1>\n\n<ul>\n<li>The big grid can be <a href=\"https://ruby-doc.org/core-2.3.3/Enumerable.html#method-i-each_slice\" rel=\"nofollow noreferrer\">sliced</a> in 3 stripes, each containing 3 rows of 9 cells.</li>\n<li>The first stripe will contain chunk_1, chunk_2 and chunk_3.</li>\n<li>We need to cut the strip vertically into 3 chunks. To do so :\n\n<ul>\n<li>We <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-transpose\" rel=\"nofollow noreferrer\">transpose</a> the strip,</li>\n<li>Cut it horizontally with <a href=\"https://ruby-doc.org/core-2.3.3/Enumerable.html#method-i-each_slice\" rel=\"nofollow noreferrer\"><code>each_slice</code></a>,</li>\n<li><a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-transpose\" rel=\"nofollow noreferrer\">transpose</a> back again.</li>\n</ul></li>\n<li>We do the <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-map\" rel=\"nofollow noreferrer\">same</a> for stripes #2 and #3.</li>\n<li>To avoid returning an Array of Stripes of Chunks of Rows of Cells, we use <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-flatten\" rel=\"nofollow noreferrer\"><code>flatten(1)</code></a> to remove one level and return an Array of Chunks of Rows of Cells. :)</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 5579, "user_id": 3970701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a937016807c66d89d0a62d7a1b235533?s=128&d=identicon&r=PG", "display_name": "Amin Shah Gilani", "link": "https://stackoverflow.com/users/3970701/amin-shah-gilani"}, "edited": false, "score": 0, "creation_date": 1481130088, "post_id": 41023185, "comment_id": 69253518, "body": "This takes the cake. I&#39;m going to look into this now."}, {"owner": {"reputation": 5579, "user_id": 3970701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a937016807c66d89d0a62d7a1b235533?s=128&d=identicon&r=PG", "display_name": "Amin Shah Gilani", "link": "https://stackoverflow.com/users/3970701/amin-shah-gilani"}, "edited": false, "score": 0, "creation_date": 1481130144, "post_id": 41023185, "comment_id": 69253539, "body": "Also, since you&#39;re checking the validity, you must ensure that all rows and columns add up to 45."}, {"owner": {"reputation": 5579, "user_id": 3970701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a937016807c66d89d0a62d7a1b235533?s=128&d=identicon&r=PG", "display_name": "Amin Shah Gilani", "link": "https://stackoverflow.com/users/3970701/amin-shah-gilani"}, "edited": false, "score": 1, "creation_date": 1481133518, "post_id": 41023185, "comment_id": 69255628, "body": "....that didn&#39;t even occur to me! Off-topic but how long have you been coding? I&#39;m only asking since I&#39;ve been using Ruby for almost a year now and while I&#39;m fairly proficient, I&#39;m trying to calculate the time i have left until I reach Godlike status in general coding."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 5579, "user_id": 3970701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a937016807c66d89d0a62d7a1b235533?s=128&d=identicon&r=PG", "display_name": "Amin Shah Gilani", "link": "https://stackoverflow.com/users/3970701/amin-shah-gilani"}, "edited": false, "score": 0, "creation_date": 1481133729, "post_id": 41023185, "comment_id": 69255737, "body": "@amingilani Checking that all 9 values are unique makes it possible to have a sudoku with <code>a,b,c,...</code> instead of <code>1,2,3</code>. Plus I&#39;m not sure that <code>sum==45</code> is enough for a Sudoku to be valid."}, {"owner": {"reputation": 5579, "user_id": 3970701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a937016807c66d89d0a62d7a1b235533?s=128&d=identicon&r=PG", "display_name": "Amin Shah Gilani", "link": "https://stackoverflow.com/users/3970701/amin-shah-gilani"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481133791, "post_id": 41023185, "comment_id": 69255779, "body": "@EricDuminil it is if you&#39;re playing a standard 9x9 grid, but you&#39;re right, checking for uniqueness is a much better approach."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 5579, "user_id": 3970701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a937016807c66d89d0a62d7a1b235533?s=128&d=identicon&r=PG", "display_name": "Amin Shah Gilani", "link": "https://stackoverflow.com/users/3970701/amin-shah-gilani"}, "edited": false, "score": 0, "creation_date": 1481141776, "post_id": 41023185, "comment_id": 69260392, "body": "@amingilani : A grid full of 5&#39;s would have a sum of 45 everywhere."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481141938, "post_id": 41023185, "comment_id": 69260478, "body": "@CarySwoveland <code>sub3x3</code> doesn&#39;t return the correct chunk, so <code>valid?</code> returns a false negative on the provided example. On top of that, <code>valid?</code> doesn&#39;t use enough tests and can also return false positives."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481143862, "post_id": 41023185, "comment_id": 69261550, "body": "@EricDuminil, I&#39;ll look into that in awhile. I was in a rush when I posted the answer so didn&#39;t do thorough testing, but <code>valid?</code> does check each row, each column and each of the nine 3x3&#39;s."}, {"owner": {"reputation": 5579, "user_id": 3970701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a937016807c66d89d0a62d7a1b235533?s=128&d=identicon&r=PG", "display_name": "Amin Shah Gilani", "link": "https://stackoverflow.com/users/3970701/amin-shah-gilani"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481171360, "post_id": 41023185, "comment_id": 69270956, "body": "@EricDuminil, my bad, it was very late in my timezone when i read it and didn&#39;t check it until now. For now, I&#39;m switching the correct answer back to yours for completeness&#39; sake."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481171583, "post_id": 41023185, "comment_id": 69271013, "body": "@Eric, actually, there were several errors. I hope I&#39;ve corrected all of them. Thanks for the heads up."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 5579, "user_id": 3970701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a937016807c66d89d0a62d7a1b235533?s=128&d=identicon&r=PG", "display_name": "Amin Shah Gilani", "link": "https://stackoverflow.com/users/3970701/amin-shah-gilani"}, "edited": false, "score": 1, "creation_date": 1481172572, "post_id": 41023185, "comment_id": 69271288, "body": "@amingilani, assuming your &quot;Godlike&quot; question was addressed to me, I began tinkering with Ruby about six years ago, well after I retired from the labour force. I think <a href=\"https://en.wikipedia.org/wiki/Yukihiro_Matsumoto\" rel=\"nofollow noreferrer\">Matz</a> is the only Rubiest with &quot;Godlike status&quot;. He released the first version of Ruby 21 years ago this month. There are many others, however, who have &quot;proficient&quot; status."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481190722, "post_id": 41023185, "comment_id": 69280117, "body": "@CarySwoveland : your <code>valid?</code> still doesn&#39;t check enough. Hint : there are an infinity of grids for which your method returns a false positive."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481213826, "post_id": 41023185, "comment_id": 69295646, "body": "@Eric, I&#39;m at a loss. The only requirements for a <a href=\"https://en.m.wikipedia.org/wiki/Sudoku\" rel=\"nofollow noreferrer\">Soduko</a> solution to be valid are that each row, column and 3x3 grid contain all of the numbers 1-9. I am of course assuming that the code demands that players enter a number between 1 and 9 (and nothing else) in each open cell of the grid and that <code>valid?</code> is not applied until entries have been made for all open cells. What am I missing?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481222266, "post_id": 41023185, "comment_id": 69300650, "body": "Sudoku can be filled with letters, colors and basically any object (<a href=\"http://www.tomphillips.co.uk/images/stories/News/colour_sudoku-blog.jpg\" rel=\"nofollow noreferrer\">tomphillips.co.uk/images/stories/News/colour_sudoku-blog.jp&zwnj;&#8203;g</a>). So I&#39;d say it&#39;s important that exactly 9 objects are used for the whole grid. <code>(1..9).map{(1..9).map{Object.new}}</code> is a valid grid with your code."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481229797, "post_id": 41023185, "comment_id": 69304467, "body": "@Eric, as I indicated in my comment above, I&#39;ve used the Wiki description of the game, in which the only valid entries are the digits 1-9, and have assumed the code enforces that requirement when players enter values into cells. I&#39;ll edit to make that clear."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 5, "last_activity_date": 1481230037, "last_edit_date": 1481230037, "creation_date": 1481129917, "answer_id": 41023185, "question_id": 41020695, "link": "https://stackoverflow.com/questions/41020695/how-do-i-split-a-9x9-array-into-9-3x3-components/41023185#41023185", "title": "How do I split a 9x9 array into 9 3x3 components", "body": "<p>The method <a href=\"http://ruby-doc.org/stdlib-2.3.0/libdoc/matrix/rdoc/Matrix.html#method-i-minor\" rel=\"nofollow noreferrer\">Matrix#minor</a> is tailor-made for this:</p>\n\n<pre><code>require 'matrix'\n\ndef sub3x3(game, i, j)\n  Matrix[*game].minor(3*i, 3, 3*j, 3).to_a\nend\n\nchunk1 = sub3x3(game, 0, 0)\n  #=&gt; [[1, 3, 2], [4, 9, 8], [7, 5, 6]] \nchunk2 = sub3x3(game, 0, 1)\n  #=&gt; [[5, 7, 9], [2, 6, 1], [3, 8, 4]] \nchunk3 = sub3x3(game, 0, 2)\n  #=&gt; [[4, 6, 8], [3, 7, 5], [2, 1, 9]] \nchunk4 = sub3x3(game, 1, 0)\n  #=&gt; [[6, 4, 3], [5, 2, 1], [9, 8, 7]]\n...\nchunk9 = sub3x3(game, 2, 2)\n  #=&gt; [[6, 8, 7], [9, 2, 4], [1, 5, 3]] \n</code></pre>\n\n<p>Ruby has not concept of \"rows\" and \"columns\" of arrays. For convenience, therefore, I will refer to the 3x3 \"subarray\" of <code>game</code>, at offsets <code>i</code> and <code>j</code> (<code>i = 0,1,2</code>, <code>j = 0,1,2</code>), as the 3x3 submatrix of <code>m = Matrix[*game]</code> whose upper left value is at row offset <code>3*i</code> and column offset <code>3*j</code> of <code>m</code>, converted to an array.</p>\n\n<p>This is relatively inefficient as a new matrix is created for the calculation of each \"chunk\". Considering the size of the array, this is not a problem, but rather than making that more efficient you really need to rethink the overall design. Creating nine local variables (rather than, say, an array of nine arrays) is not the way to go.</p>\n\n<p>Here's a suggestion for checking the validity of <code>game</code> (that uses the method <code>sub3x3</code> above) once all the open cells have been filled. Note that I've used the <a href=\"https://en.m.wikipedia.org/wiki/Sudoku\" rel=\"nofollow noreferrer\">Wiki description of the game</a>, in which the only valid entries are the digits 1-9, and I have assumed the code enforces that requirement when players enter values into cells.</p>\n\n<pre><code>def invalid_vector_index(game)\n  game.index { |vector| vector.uniq.size &lt; 9 }\nend\n\ndef sub3x3_invalid?(game, i, j)\n  sub3x3(game, i, j).flatten.uniq.size &lt; 9\nend\n\ndef valid?(game)\n  i = invalid_vector_index(game)\n  return [:ROW_ERR, i] if i\n  j = invalid_vector_index(game.transpose)\n  return [:COL_ERR, j] if j\n  m = Matrix[*game]\n  (0..2).each do |i|\n    (0..2).each do |j|\n      return [:SUB_ERR, i, j] if sub3x3_invalid?(game, i, j)\n    end\n  end\n  true\nend\n\nvalid?(game)\n  #=&gt; true\n</code></pre>\n\n<p>Notice this either returns <code>true</code>, meaning <code>game</code> is valid, or an array that both signifies that the solution is not valid and contains information that can be used to inform the player of the reason.</p>\n\n<p>Now try</p>\n\n<pre><code>game[5], game[6] = game[6], game[5]\n</code></pre>\n\n<p>so</p>\n\n<pre><code>game\n  #=&gt; [[1, 3, 2,   5, 7, 9,   4, 6, 8],\n  #    [4, 9, 8,   2, 6, 1,   3, 7, 5],\n  #    [7, 5, 6,   3, 8, 4,   2, 1, 9],\n\n  #    [6, 4, 3,   1, 5, 8,   7, 9, 2],\n  #    [5, 2, 1,   7, 9, 3,   8, 4, 6],\n  #    [2, 1, 4,   9, 3, 5,   6, 8, 7],\n\n  #    [9, 8, 7,   4, 2, 6,   5, 3, 1],\n  #    [3, 6, 5,   8, 1, 7,   9, 2, 4],\n  #    [8, 7, 9,   6, 4, 2,   1, 5, 3]] \n\nvalid?(game)\n  #=&gt; [:SUB_ERR, 1, 0]\n</code></pre>\n\n<p>The rows and columns are obviously still valid, but this return value indicates that at least one 3x3 subarray is invalid and the array</p>\n\n<pre><code>[[6, 4, 3],\n [5, 2, 1],\n [2, 1, 4]]\n</code></pre>\n\n<p>was the first found to be invalid.</p>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 12384459, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/452cfe03771516b2f886a4d66d659f30?s=128&d=identicon&r=PG&f=1", "display_name": "PhiAgent", "link": "https://stackoverflow.com/users/12384459/phiagent"}, "is_accepted": false, "score": 0, "last_activity_date": 1594313344, "creation_date": 1594313344, "answer_id": 62819787, "question_id": 41020695, "link": "https://stackoverflow.com/questions/41020695/how-do-i-split-a-9x9-array-into-9-3x3-components/62819787#62819787", "title": "How do I split a 9x9 array into 9 3x3 components", "body": "<p>You could create a method that generates a single 3X3 chunk from a given index. since the sudoku board is of length 9, that will produce 9 3X3 chunks for you. see below.</p>\n<pre><code>#steps\n#you'll loop through each index of the board\n#to get the x value\n#you divide the index by 3 and multiply by 3\n#to get the y value\n#you divide the index by 3, take remainder and multiply by 3\n#for each x value, you can get 3 y values\n#this will give you a single 3X3 box from one index so\n\ndef three_by3(index, sudoku)\n  #to get x value\n  x=(index/3)*3\n  #to get y value\n  y=(index%3)*3\n  (x...x+3).each_with_object([]) do |x,arr|\n    (y...y+3).each do |y|\n      arr&lt;&lt;sudoku[x][y]\n    end\n  end\nend\nsudoku = [ [1,2,3,4,5,6,7,8,9],\n          [2,3,4,5,6,7,8,9,1],\n          [3,4,5,6,7,8,9,1,2],\n          [1,2,3,4,5,6,7,8,9],\n          [2,3,4,5,6,7,8,9,1],\n          [3,4,5,6,7,8,9,1,2],\n          [1,2,3,4,5,6,7,8,9],\n          [2,3,4,5,6,7,8,9,1],\n          [3,4,5,6,7,8,9,1,2]]\n\np (0...sudoku.length).map {|i| three_by3(i,sudoku)}\n#output:\n#[[1, 2, 3, 2, 3, 4, 3, 4, 5], \n# [4, 5, 6, 5, 6, 7, 6, 7, 8], \n# [7, 8, 9, 8, 9, 1, 9, 1, 2], \n# [1, 2, 3, 2, 3, 4, 3, 4, 5], \n# [4, 5, 6, 5, 6, 7, 6, 7, 8], \n# [7, 8, 9, 8, 9, 1, 9, 1, 2], \n# [1, 2, 3, 2, 3, 4, 3, 4, 5], \n# [4, 5, 6, 5, 6, 7, 6, 7, 8], \n# [7, 8, 9, 8, 9, 1, 9, 1, 2]]\n</code></pre>\n"}], "owner": {"reputation": 5579, "user_id": 3970701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a937016807c66d89d0a62d7a1b235533?s=128&d=identicon&r=PG", "display_name": "Amin Shah Gilani", "link": "https://stackoverflow.com/users/3970701/amin-shah-gilani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1675, "favorite_count": 0, "accepted_answer_id": 41021269, "answer_count": 3, "score": 1, "last_activity_date": 1594313344, "creation_date": 1481122701, "question_id": 41020695, "link": "https://stackoverflow.com/questions/41020695/how-do-i-split-a-9x9-array-into-9-3x3-components", "title": "How do I split a 9x9 array into 9 3x3 components", "body": "<p>I have a 9x9 multidimensional array that represents a sudoku game. I need to break it into it's 9 3x3 many components. How would this be done? I have absolutely no idea where to begin, here.</p>\n\n<pre><code>game = [\n[1, 3, 2, 5, 7, 9, 4, 6, 8],\n[4, 9, 8, 2, 6, 1, 3, 7, 5],\n[7, 5, 6, 3, 8, 4, 2, 1, 9],\n[6, 4, 3, 1, 5, 8, 7, 9, 2],\n[5, 2, 1, 7, 9, 3, 8, 4, 6],\n[9, 8, 7, 4, 2, 6, 5, 3, 1],\n[2, 1, 4, 9, 3, 5, 6, 8, 7],\n[3, 6, 5, 8, 1, 7, 9, 2, 4],\n[8, 7, 9, 6, 4, 2, 1, 5, 3]\n]\n</code></pre>\n\n<p>Split into chunks, it becomes</p>\n\n<pre><code>chunk_1 = [\n[1, 3, 2],\n[4, 9, 8],\n[7, 5, 6]\n]\n\nchunk_2 = [\n[5, 7, 9],\n[2, 6, 1],\n[3, 8, 4]\n]\n\n...and so on\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 357, "user_id": 7053699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kfwzm.png?s=128&g=1", "display_name": "brianyates", "link": "https://stackoverflow.com/users/7053699/brianyates"}, "is_accepted": true, "score": 0, "last_activity_date": 1481143263, "creation_date": 1481143263, "answer_id": 41026979, "question_id": 41020496, "link": "https://stackoverflow.com/questions/41020496/cant-see-nested-fields-in-view-when-using-accepts-nested-attributes-for-method/41026979#41026979", "title": "Can&#39;t see nested fields in view when using accepts_nested_attributes_for method while using Ruby 2.3, Rails 5.0, Windows (32-bit)", "body": "<p>I figured it out... I didn't set up the proper relationship between the exercise and workout model.</p>\n"}], "owner": {"reputation": 357, "user_id": 7053699, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kfwzm.png?s=128&g=1", "display_name": "brianyates", "link": "https://stackoverflow.com/users/7053699/brianyates"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 41026979, "answer_count": 1, "score": 0, "last_activity_date": 1481143263, "creation_date": 1481122179, "question_id": 41020496, "link": "https://stackoverflow.com/questions/41020496/cant-see-nested-fields-in-view-when-using-accepts-nested-attributes-for-method", "title": "Can&#39;t see nested fields in view when using accepts_nested_attributes_for method while using Ruby 2.3, Rails 5.0, Windows (32-bit)", "body": "<p>I'm trying to build a workout application where you submit a workout that consists of several exercises in rails. I was trying to create a \"new\" workout view where you can submit a new workout along with nested exercises but my \"new\" view is only showing the workout form fields, but not the exercise form fields. Btw I'm using Ruby 2.3 and Rails 5.0. Can anyone see what I'm doing wrong?</p>\n\n<p>Workout Model (workout.rb)</p>\n\n<pre><code>class Workout &lt; ActiveRecord::Base\n    has_many :exercises, :dependent =&gt; :destroy\n    accepts_nested_attributes_for :exercises\nend\n</code></pre>\n\n<p>Exercise Model (exercise.rb)</p>\n\n<pre><code>class Exercise &lt; ActiveRecord::Base\n    belongs_to :workout\nend\n</code></pre>\n\n<p>Workouts Controller (workouts_controller.rb)</p>\n\n<pre><code>class WorkoutsController &lt; ApplicationController\n    def new\n        @workout = Workout.new\n        @workout.exercises.build\n    end\nend\n</code></pre>\n\n<p>New Workout View (views\\workouts\\new.html.erb)</p>\n\n<pre><code>&lt;h1&gt;Create New Workout&lt;/h1&gt;\n\n&lt;%= form_for(@workout) do |f| %&gt;\n  &lt;%= f.number_field :workout_length, :placeholder =&gt; \"Workout length   (minutes)\" %&gt; &lt;br&gt;\n  &lt;%= f.text_field :workout_description, :placeholder =&gt; \"Workout description\" %&gt; &lt;br&gt;\n\n&lt;% f.fields_for :exercises do |builder| %&gt;\n&lt;p&gt;\n    &lt;%= builder.text_field :exercise_description %&gt;\n&lt;/p&gt;\n&lt;% end %&gt;\n  &lt;%= f.submit \"SUBMIT WORKOUT\" %&gt;\n</code></pre>\n\n\n\n<p>Schema (schema.rb)</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20161207040053) do\n  create_table \"exercises\", force: :cascade do |t|\n    t.string   \"exercise_description\"\n    t.integer  \"workout_id\"\n    t.datetime \"created_at\",           null: false\n    t.datetime \"updated_at\",           null: false\n    t.index [\"workout_id\"], name: \"index_exercises_on_workout_id\"\n  end\n\n  create_table \"workouts\", force: :cascade do |t|\n    t.integer  \"workout_length\"\n    t.string   \"workout_description\"\n    t.datetime \"created_at\",          null: false\n    t.datetime \"updated_at\",          null: false\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 699, "user_id": 391460, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f144efa2d61c13ab20ce5eee5f061904?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/391460/peter"}, "edited": false, "score": 0, "creation_date": 1481122505, "post_id": 41020390, "comment_id": 69248239, "body": "So a &quot;connection pool&quot; is actually individual connections to the database?"}, {"owner": {"reputation": 27405, "user_id": 2112633, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c9bf1e5beda923bfc9abb2271c5838e5?s=128&d=identicon&r=PG", "display_name": "usha", "link": "https://stackoverflow.com/users/2112633/usha"}, "reply_to_user": {"reputation": 699, "user_id": 391460, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f144efa2d61c13ab20ce5eee5f061904?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/391460/peter"}, "edited": false, "score": 1, "creation_date": 1481122791, "post_id": 41020390, "comment_id": 69248424, "body": "yes and they are kept open for a certain period based on the configuration"}, {"owner": {"reputation": 699, "user_id": 391460, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f144efa2d61c13ab20ce5eee5f061904?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/391460/peter"}, "edited": false, "score": 0, "creation_date": 1481123155, "post_id": 41020390, "comment_id": 69248632, "body": "Thank you for clearing that up for me. Also, if you were using MongoDB it has its own internal connection pool so ActiveRecord&#39;s connection pool isn&#39;t necessary here, right?"}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "reply_to_user": {"reputation": 699, "user_id": 391460, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f144efa2d61c13ab20ce5eee5f061904?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/391460/peter"}, "edited": false, "score": 1, "creation_date": 1481129337, "post_id": 41020390, "comment_id": 69253043, "body": "@Peter since establishing a new connection to a database takes significant time, and web systems are stateless, the framework would always need to keep connections open with the database. Although the database itself might provide connection pooling internally (Oracle can do the same), the primary purpose here is to keep connections between app and database constantly available."}], "tags": [], "owner": {"reputation": 27405, "user_id": 2112633, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c9bf1e5beda923bfc9abb2271c5838e5?s=128&d=identicon&r=PG", "display_name": "usha", "link": "https://stackoverflow.com/users/2112633/usha"}, "is_accepted": true, "score": 2, "last_activity_date": 1481123215, "last_edit_date": 1481123215, "creation_date": 1481121882, "answer_id": 41020390, "question_id": 41020220, "link": "https://stackoverflow.com/questions/41020220/does-activerecord-make-a-new-database-connection-per-model/41020390#41020390", "title": "Does ActiveRecord make a new database connection per model", "body": "<p><code>ActiveRecord</code> uses a connection pool. When you try to interact with the database, a connection is acquired from the pool, query is made and connection is returned to pool after the query. All this is handled by <code>ActiveRecord</code> in the background. \nYou can adjust the number of connections in the pool in your database configuration</p>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/ConnectionPool.html\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/classes/ActiveRecord/ConnectionAdapters/ConnectionPool.html</a></p>\n\n<p>You can test this easily. Execute a query in controller action that takes couple of minutes. Issue multiple requests to the action and you would be able to see out of connection errors</p>\n"}], "owner": {"reputation": 699, "user_id": 391460, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/f144efa2d61c13ab20ce5eee5f061904?s=128&d=identicon&r=PG", "display_name": "Peter", "link": "https://stackoverflow.com/users/391460/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 460, "favorite_count": 1, "accepted_answer_id": 41020390, "answer_count": 1, "score": 0, "last_activity_date": 1481128905, "creation_date": 1481121426, "last_edit_date": 1481128905, "question_id": 41020220, "link": "https://stackoverflow.com/questions/41020220/does-activerecord-make-a-new-database-connection-per-model", "title": "Does ActiveRecord make a new database connection per model", "body": "<p>I'm trying to understand how ActiveRecord connects to a database on a per model basis. So lets assume we have 2 models and one database. When you do a simple <code>Model.find</code> on both models does this create a new database connection for each model so it has its own defined connection or is there a single connection to the database that has been initialised that is shared across the 2 models. Does anyone know where it's doing this in the <a href=\"https://github.com/rails/rails/tree/master/activerecord\" rel=\"nofollow noreferrer\" title=\"code\">code?</a></p>\n\n<p>I am trying to understand how ActiveRecord achieves this.</p>\n"}, {"tags": ["ruby", "file"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 7262542, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210007823345506/picture?type=large", "display_name": "Vetle Ottem Frantzvaag", "link": "https://stackoverflow.com/users/7262542/vetle-ottem-frantzvaag"}, "edited": false, "score": 0, "creation_date": 1481120615, "post_id": 41019827, "comment_id": 69246866, "body": "Thanks for the reply Sergio! I am very new to Ruby, so I don&#39;t know exactly how to do this... Could you please help me a bit more?:)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 25, "user_id": 7262542, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210007823345506/picture?type=large", "display_name": "Vetle Ottem Frantzvaag", "link": "https://stackoverflow.com/users/7262542/vetle-ottem-frantzvaag"}, "edited": false, "score": 0, "creation_date": 1481120705, "post_id": 41019827, "comment_id": 69246947, "body": "@VetleOttemFrantzvaag: being new is not an excuse for not using search. Take a look at this one: <a href=\"http://stackoverflow.com/questions/2777802/how-to-write-to-file-in-ruby\" title=\"how to write to file in ruby\">stackoverflow.com/questions/2777802/&hellip;</a>"}, {"owner": {"reputation": 25, "user_id": 7262542, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210007823345506/picture?type=large", "display_name": "Vetle Ottem Frantzvaag", "link": "https://stackoverflow.com/users/7262542/vetle-ottem-frantzvaag"}, "edited": false, "score": 0, "creation_date": 1481120878, "post_id": 41019827, "comment_id": 69247078, "body": "Bad formulation by me. My problem is not writing a file, but how I would go through selecting each line from the file, except the one I searched for."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 25, "user_id": 7262542, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210007823345506/picture?type=large", "display_name": "Vetle Ottem Frantzvaag", "link": "https://stackoverflow.com/users/7262542/vetle-ottem-frantzvaag"}, "edited": false, "score": 0, "creation_date": 1481121996, "post_id": 41019827, "comment_id": 69247897, "body": "@VetleOttemFrantzvaag Ah, that&#39;s easy. Use <code>reject</code> instead of <code>select</code>."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 1, "last_activity_date": 1481120459, "creation_date": 1481120459, "answer_id": 41019827, "question_id": 41019749, "link": "https://stackoverflow.com/questions/41019749/deleting-a-line-in-a-textfile-based-on-keyword-in-ruby/41019827#41019827", "title": "Deleting a line in a textfile based on keyword in RUBY", "body": "<p>So you can already identify the line(s) you want to remove? That's 70% of the work. Almost there!</p>\n\n<p>Now all you need to do is create a new file and write to it all lines from the existing file, except the ones you don't need. After you're done writing the new file, you can copy it over the old one.</p>\n"}, {"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1481147543, "post_id": 41020648, "comment_id": 69263515, "body": "It&#39;s a bit unfortunate to read the entire file into memory when it&#39;s not necessary."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 0, "last_activity_date": 1481150010, "last_edit_date": 1495540378, "creation_date": 1481122552, "answer_id": 41020648, "question_id": 41019749, "link": "https://stackoverflow.com/questions/41019749/deleting-a-line-in-a-textfile-based-on-keyword-in-ruby/41020648#41020648", "title": "Deleting a line in a textfile based on keyword in RUBY", "body": "<p>With the least amount of modification from your code :</p>\n\n<pre><code>keyword    = File.readlines('skier_info.txt')\nno_matches = keyword.reject { |name| name[/#{search}/i] }\n\nFile.open('new_skier_info.txt','w+'){|out| out.puts no_matches}\n</code></pre>\n\n<p><a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-reject\" rel=\"nofollow noreferrer\">reject</a> is the opposite of <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-select\" rel=\"nofollow noreferrer\">select</a> :</p>\n\n<pre><code>(1..10).reject{|x| x.even?}\n=&gt; [1, 3, 5, 7, 9]\n</code></pre>\n\n<p>If your input file is big and you don't want to read it all in memory :</p>\n\n<pre><code>File.open('new_skier_info.txt','w+') do |out| \n  File.foreach('skier_info.txt') do |line|\n    out.puts line unless line =~ /#{search}/i\n  end\nend\n</code></pre>\n\n<p>You could also use <a href=\"https://stackoverflow.com/questions/3548453/negative-matching-using-grep-match-lines-that-do-not-contain-foo\"><code>grep -v</code></a> in terminal ;)</p>\n"}], "owner": {"reputation": 25, "user_id": 7262542, "user_type": "registered", "profile_image": "https://graph.facebook.com/10210007823345506/picture?type=large", "display_name": "Vetle Ottem Frantzvaag", "link": "https://stackoverflow.com/users/7262542/vetle-ottem-frantzvaag"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 41020648, "answer_count": 2, "score": 1, "last_activity_date": 1481150010, "creation_date": 1481120252, "last_edit_date": 1481121290, "question_id": 41019749, "link": "https://stackoverflow.com/questions/41019749/deleting-a-line-in-a-textfile-based-on-keyword-in-ruby", "title": "Deleting a line in a textfile based on keyword in RUBY", "body": "<p>I am working on creating a program which stores users in a textfile, and would love to delete/modify a line based on a keyword. This is the code I have right now for searching a keyword, which in return will print the whole line containing the keyword:</p>\n\n<pre><code>        keyword = File.readlines('skier_info.txt')\n        matches = keyword.select { |name| name[/#{search}/i] }\n</code></pre>\n\n<p>I'm wondering how I can use this small bit of code to write every line from the textfile over to a new one, except for the one line I get from the \"matches\" variable.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "edited": false, "score": 0, "creation_date": 1481121322, "post_id": 41019540, "comment_id": 69247399, "body": "this question has a couple unknowns, and you will need to think about what you want the feature to work.  Is it only the user and an admin type role that will be able to view the messages. Or is there going to be a way for the user to give a set of other users the ability to see this message (either explicit, or part of say some shared group, etc...?)  These have different solutions.  You should be looking into authorization systems (you have the authentication, part already). Authorization systems(I like <code>Pundit</code>) will allow you to control who can see, modify, delete what exactly."}, {"owner": {"reputation": 587, "user_id": 1473641, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2e1f431cce8a104400fc6ef5f3da497a?s=128&d=identicon&r=PG", "display_name": "Prox", "link": "https://stackoverflow.com/users/1473641/prox"}, "reply_to_user": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "edited": false, "score": 0, "creation_date": 1481123861, "post_id": 41019540, "comment_id": 69249130, "body": "Thank you, I&#39;ll check into Pundit.  It started out as me really just wanting to be  the only user to edit information for a personal app.  But I think I will expand it just for learning purposes."}], "answers": [{"tags": [], "owner": {"reputation": 905, "user_id": 5119244, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203221141608724/picture?type=large", "display_name": "Argonus", "link": "https://stackoverflow.com/users/5119244/argonus"}, "is_accepted": false, "score": 0, "last_activity_date": 1481119906, "creation_date": 1481119906, "answer_id": 41019631, "question_id": 41019540, "link": "https://stackoverflow.com/questions/41019540/how-do-i-only-let-a-certain-username-views-messages-on-my-website-in-ruby-on-rai/41019631#41019631", "title": "How do I only let a certain username views messages on my website in Ruby on Rails?", "body": "<p>Name is not good idea, better make boolean <code>:is_admin</code> in user and then you can do something like <code>if is_admin?</code> (like current_user).</p>\n\n<pre><code>&lt;%= if current_user &amp;&amp; current_user.is_admin? %&gt;\n</code></pre>\n\n<p>Also you can use roles.</p>\n"}, {"comments": [{"owner": {"reputation": 587, "user_id": 1473641, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2e1f431cce8a104400fc6ef5f3da497a?s=128&d=identicon&r=PG", "display_name": "Prox", "link": "https://stackoverflow.com/users/1473641/prox"}, "edited": false, "score": 0, "creation_date": 1481123017, "post_id": 41019641, "comment_id": 69248554, "body": "So if I go with Solution 2 and set up an admin boolean, how do I go about creating an admin account?  Do I just go through the standard Create User form and use admin as the name?"}, {"owner": {"reputation": 905, "user_id": 5119244, "user_type": "registered", "profile_image": "https://graph.facebook.com/10203221141608724/picture?type=large", "display_name": "Argonus", "link": "https://stackoverflow.com/users/5119244/argonus"}, "edited": false, "score": 0, "creation_date": 1481123103, "post_id": 41019641, "comment_id": 69248598, "body": "You can set first admin from console and then let only admins change this value. It is easies solution."}, {"owner": {"reputation": 587, "user_id": 1473641, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2e1f431cce8a104400fc6ef5f3da497a?s=128&d=identicon&r=PG", "display_name": "Prox", "link": "https://stackoverflow.com/users/1473641/prox"}, "edited": false, "score": 0, "creation_date": 1481123647, "post_id": 41019641, "comment_id": 69248963, "body": "Sorry, I&#39;m really new.  Could you give me an example of this?  I&#39;m thinking...                                                                                                       AdminUser.create!(:name =&gt; &#39;namehere&#39;, :email =&gt; &#39;admin@example.com&#39;, :password =&gt; &#39;password&#39;, :password_confirmation =&gt; &#39;password&#39;"}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 1, "last_activity_date": 1481129165, "last_edit_date": 1481129165, "creation_date": 1481119941, "answer_id": 41019641, "question_id": 41019540, "link": "https://stackoverflow.com/questions/41019540/how-do-i-only-let-a-certain-username-views-messages-on-my-website-in-ruby-on-rai/41019641#41019641", "title": "How do I only let a certain username views messages on my website in Ruby on Rails?", "body": "<p><strong>Solution 1: (If you are looking to extend the project )</strong></p>\n\n<ul>\n<li>You can use <a href=\"https://github.com/plataformatec/devise\" rel=\"nofollow noreferrer\"><strong><code>Devise</code></strong></a> and add a new admin role and make the user admin </li>\n</ul>\n\n<p><strong>Solution 2: (Easy to go)</strong></p>\n\n<ul>\n<li><p>If you don't want to handle roles just add a boolean field <code>admin</code> and you will get <code>admin?</code> method on <code>User</code> instance</p>\n\n<pre><code>&lt;% if current_user &amp;&amp; current_user.admin? %&gt;\n</code></pre>\n\n<ol>\n<li><p>Add a boolean field</p>\n\n<pre><code>rails g migration AddAdminToUsers admin:boolean\n</code></pre></li>\n<li><p>Add default value of admin field to <code>false</code></p>\n\n<pre><code>class AddAdminToUsers &lt; ActiveRecord::Migration\n  def change\n    add_column :users, :admin, :boolean, default: false\n  end\nend\n</code></pre></li>\n<li><p>Create first admin user through <code>rails console</code>, <code>script</code> or <code>seed</code></p>\n\n<pre><code>User.create(\n  name: 'Admin User Name', \n  email: 'admin@example.com', \n  password: 'password', \n  admin: true)\n</code></pre></li>\n<li><p>Now you can check if the user is admin or not using <code>admin?</code> method</p>\n\n<pre><code>@user = User.find(1)\n@user.admin?\n#=&gt; true\n</code></pre></li>\n</ol></li>\n</ul>\n"}], "owner": {"reputation": 587, "user_id": 1473641, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2e1f431cce8a104400fc6ef5f3da497a?s=128&d=identicon&r=PG", "display_name": "Prox", "link": "https://stackoverflow.com/users/1473641/prox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1481131084, "creation_date": 1481119684, "last_edit_date": 1481131084, "question_id": 41019540, "link": "https://stackoverflow.com/questions/41019540/how-do-i-only-let-a-certain-username-views-messages-on-my-website-in-ruby-on-rai", "title": "How do I only let a certain username views messages on my website in Ruby on Rails?", "body": "<p>I created a model under:</p>\n\n<pre><code>rails generate model user name email password_digest\n</code></pre>\n\n<p>My UsersController allows a username to be created:</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n\n  def new\n  end\n\n  def create\n    user = User.new(user_params)\n    if user.save\n      session[:user_id] = user.id\n      redirect_to '/'\n    else\n      redirect_to '/signup'\n    end\n  end\n\nprivate\n\n  def user_params\n    params.require(:user).permit(:name, :email, :password, :password_confirmation)\n  end\nend\n</code></pre>\n\n<p>I can allow any user that is logged in to view a message but I was wondering how to specify which users.  How can I make a name called \"Admin\" only be able to view the message?</p>\n\n<pre><code>&lt;% if current_user %&gt;\n  Signed in as &lt;%= current_user.name %&gt; | &lt;%= link_to \"Logout\", '/logout' %&gt;\n&lt;% else %&gt;\n  &lt;%= link_to 'Login', '/login' %&gt; | &lt;%= link_to 'Signup', '/signup' %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1481119461, "post_id": 41019360, "comment_id": 69246064, "body": "Did you add the new field to the <code>campanha_params</code> method in your controller?"}, {"owner": {"reputation": 3, "user_id": 6565809, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nz6ZlmqqptE/AAAAAAAAAAI/AAAAAAAAAC8/1gSgrHWGjF0/photo.jpg?sz=128", "display_name": "Eduardo Mendon&#231;a", "link": "https://stackoverflow.com/users/6565809/eduardo-mendon%c3%a7a"}, "reply_to_user": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1481119950, "post_id": 41019360, "comment_id": 69246393, "body": "Yes, my params like that.      def campanha_params       params.require(:campanha).permit(:titulo, :data_inicio_venda, :data_termino_venda, :data_limite_boleto,          :suporte_versao_app, :meio_pagamento, :salvar_endereco, :auto_accepts_solicitation,          :enviar_voucher, :enviar_sms, :enviar_push_notification,         :nome_moeda, :copiar_premios, :is_dup, :campanha_id, :copiar_ingressos, :pedido_emitido_instrucoes,         :titulo_voucher1, :titulo_voucher2, :descricao_voucher1, :descricao_voucher2)         .merge(slug: nil)     end"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6565809, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nz6ZlmqqptE/AAAAAAAAAAI/AAAAAAAAAC8/1gSgrHWGjF0/photo.jpg?sz=128", "display_name": "Eduardo Mendon&#231;a", "link": "https://stackoverflow.com/users/6565809/eduardo-mendon%c3%a7a"}, "edited": false, "score": 0, "creation_date": 1481121537, "post_id": 41019822, "comment_id": 69247565, "body": "Resolvi o problema mudando o nome da vari&#225;vel, eu realmente n&#227;o imagino porque esse nome causou esse problema."}], "tags": [], "owner": {"reputation": 2765, "user_id": 5864985, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/UlhbW.jpg?s=128&g=1", "display_name": "Ronan Lopes", "link": "https://stackoverflow.com/users/5864985/ronan-lopes"}, "is_accepted": false, "score": 0, "last_activity_date": 1481120447, "creation_date": 1481120447, "answer_id": 41019822, "question_id": 41019360, "link": "https://stackoverflow.com/questions/41019360/rails-sending-null-parameter-in-post/41019822#41019822", "title": "Rails sending null parameter in post", "body": "<p>ENGLISH:\nThere's must be something wrong with your checkbox input. Try some alternative syntax. If you're using simple_form and your attribute is boolean, only f.input :attribute should do the trick.</p>\n\n<p>PORTUGUESE:\nAqui quem te escreve \u00e9 um brasileiro!\nProvavelmente \u00e9 algo errado com o checkbox. Voc\u00ea est\u00e1 usando simple form?\nSe sim, e o campo for booleano, basta fazer f.input :atributo. Ser\u00e1 exibido como checkbox e acredito que o valor ser\u00e1 enviado corretamente...</p>\n\n<p>Hope it helps!</p>\n"}], "owner": {"reputation": 3, "user_id": 6565809, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nz6ZlmqqptE/AAAAAAAAAAI/AAAAAAAAAC8/1gSgrHWGjF0/photo.jpg?sz=128", "display_name": "Eduardo Mendon&#231;a", "link": "https://stackoverflow.com/users/6565809/eduardo-mendon%c3%a7a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481120447, "creation_date": 1481119134, "question_id": 41019360, "link": "https://stackoverflow.com/questions/41019360/rails-sending-null-parameter-in-post", "title": "Rails sending null parameter in post", "body": "<p>I created a migration to add a new boolean value to my form, but when i send the form the hash value send a null value for my new field. I made the migration like i made the others boolean fiels. Can someone help me in this?</p>\n\n<p>This is the result hash.</p>\n\n<pre><code>Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"gMxerNn+jYk39ADC1EfIio6fqsfdcvtfnlkUOK7WNgmZrIyzRh2VsxBF9E9fAfT0W3oiHX2UYhYJ+MtfnHxtBg==\", \"campanha\"=&gt;{\"titulo\"=&gt;\"Teste App\", \"data_termino_venda\"=&gt;\"22/12/2016 14:19\", \"data_limite_boleto\"=&gt;\"22/12/2016 14:19\", \"suporte_versao_app\"=&gt;\"1.0\", \"meio_pagamento\"=&gt;\"iugu\", \"enviar_voucher\"=&gt;\"1\", \"enviar_sms\"=&gt;\"0\", \"enviar_push_notification\"=&gt;\"1\", \"salvar_endereco\"=&gt;\"0\", \"auto_accepts_solicitation\"=&gt;\"\", \"nome_moeda\"=&gt;\"Coins\", \"pedido_emitido_instrucoes\"=&gt;\"&lt;ul&gt;&lt;li&gt;1&lt;/li&gt;&lt;li&gt;d&lt;/li&gt;&lt;li&gt;sas&lt;/li&gt;&lt;li&gt;ads&lt;/li&gt;&lt;li&gt;dsa&lt;/li&gt;&lt;li&gt;sd&lt;/li&gt;&lt;li&gt;as&lt;/li&gt;&lt;li&gt;dsa&lt;/li&gt;&lt;li&gt;das&lt;/li&gt;&lt;li&gt;a&lt;/li&gt;&lt;/ul&gt;&lt;p&gt;&lt;br&gt;&lt;/p&gt;\", \"titulo_voucher1\"=&gt;\"juquinha\", \"descricao_voucher1\"=&gt;\"&lt;div&gt;&lt;b&gt;olea uhaeus hueau usahue a&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;euahush usah&amp;nbsp;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;euauseuhas&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;&lt;br&gt;&lt;/b&gt;&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;&lt;b&gt;Ut sumo virtute vim, cum vide definitionem eu. Ex agam velit eam, nam antiopam mediocrem an, mei everti iudicabit voluptatibus ea. Audire aliquando ex quo, id has vidit nonumy gloriatur, tollit persius vituperata at vel. Mollis reprimique eu nec. Sea prima labores at, mei magna detracto in, nam deserunt philosophia te. Ex nec decore honestatis omittantur.&lt;/b&gt;&lt;/div&gt;\", \"titulo_voucher2\"=&gt;\"juquinha\", \"descricao_voucher2\"=&gt;\"&lt;h3 style=\\\"margin: 15px 0px; padding: 0px; font-weight: 700; font-size: 14px; color: rgb(0, 0, 0); font-family: &amp;quot;Open Sans&amp;quot;, Arial, sans-serif;\\\"&gt;Se\u00e7\u00e3o 1.10.32 de \\\"de Finibus Bonorum et Malorum\\\", escrita por C\u00edcero em 45 AC&lt;/h3&gt;&lt;p style=\\\"margin-bottom: 15px; padding: 0px; text-align: justify; color: rgb(0, 0, 0); font-family: &amp;quot;Open Sans&amp;quot;, Arial, sans-serif; font-size: 14px;\\\"&gt;\\\"Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore et dolore magnam aliquam quaerat voluptatem. Ut enim ad minima veniam, quis nostrum exercitationem ullam corporis suscipit laboriosam, nisi ut aliquid ex ea commodi consequatur? Quis autem vel eum iure reprehenderit qui in ea voluptate velit esse quam nihil molestiae consequatur, vel illum qui dolorem eum fugiat quo voluptas nulla pariatur?\\\"&lt;/p&gt;\"}, \"files\"=&gt;\"\", \"commit\"=&gt;\"Salvar\", \"id\"=&gt;\"teste-app\"}\n</code></pre>\n\n<p>This is my view field.</p>\n\n<pre><code>  &lt;div class=\"form-group\"&gt;\n&lt;%= f.label 'AtivarSolicita\u00e7\u00e3o autom\u00e1tica de ingresso' %&gt;&lt;br&gt;\n&lt;%= f.check_box :auto_accepts_solicitation, class: 'input-switch bootstrap-switch-primary' %&gt;\n</code></pre>\n\n<p></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 4789434, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ffaf2b72851661e21f34d85662e151a7?s=128&d=identicon&r=PG&f=1", "display_name": "Lucasio", "link": "https://stackoverflow.com/users/4789434/lucasio"}, "edited": false, "score": 0, "creation_date": 1481120407, "post_id": 41019635, "comment_id": 69246712, "body": "It works. Thanks for the suggestion and for the answer!"}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 1, "last_activity_date": 1481120386, "last_edit_date": 1481120386, "creation_date": 1481119928, "answer_id": 41019635, "question_id": 41019336, "link": "https://stackoverflow.com/questions/41019336/merge-subarrays-into-single-one-and-remove-duplicates-if-they-have-same-id-using/41019635#41019635", "title": "Merge subarrays into single one and remove duplicates if they have same id using ruby on rails", "body": "<pre><code>array.group_by(&amp;:first).map do |id, records|\n  names  = records.map(&amp;:second).join(', ')\n  values = records.map(&amp;:last).join(', ')\n\n  [id, names, values]\nend\n</code></pre>\n\n<hr>\n\n<p>As you asked the reversed question recently, I suggest you to read the <a href=\"https://ruby-doc.org/core-2.3.3/Enumerable.html\" rel=\"nofollow noreferrer\"><code>Enumerable</code></a>, <a href=\"https://ruby-doc.org/core-2.3.3/Array.html\" rel=\"nofollow noreferrer\"><code>Array</code></a>, <a href=\"https://ruby-doc.org/core-2.3.3/Hash.html\" rel=\"nofollow noreferrer\"><code>Hash</code></a> and <a href=\"https://ruby-doc.org/core-2.3.3/String.html\" rel=\"nofollow noreferrer\"><code>String</code></a> documentations. It will give you an instant boost in expressiveness and understanding of how to do common tasks with Ruby.</p>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 0, "last_activity_date": 1481123730, "creation_date": 1481123730, "answer_id": 41021081, "question_id": 41019336, "link": "https://stackoverflow.com/questions/41019336/merge-subarrays-into-single-one-and-remove-duplicates-if-they-have-same-id-using/41021081#41021081", "title": "Merge subarrays into single one and remove duplicates if they have same id using ruby on rails", "body": "<p>Just for fun, here's a one-liner :</p>\n\n<pre><code>array.group_by(&amp;:first).map{|i, arrays| [i] + arrays.transpose.drop(1).map{|v| v.join(', ') } }\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 4789434, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ffaf2b72851661e21f34d85662e151a7?s=128&d=identicon&r=PG&f=1", "display_name": "Lucasio", "link": "https://stackoverflow.com/users/4789434/lucasio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 41019635, "answer_count": 2, "score": 0, "last_activity_date": 1481123730, "creation_date": 1481119043, "last_edit_date": 1481122471, "question_id": 41019336, "link": "https://stackoverflow.com/questions/41019336/merge-subarrays-into-single-one-and-remove-duplicates-if-they-have-same-id-using", "title": "Merge subarrays into single one and remove duplicates if they have same id using ruby on rails", "body": "<p>I have an array of arrays like this:</p>\n\n<pre><code>array = [[1, 'Something', '123456321'], [2, 'Something', '123456321'], [2, 'Something', '1234563212']]\n</code></pre>\n\n<p>And I want to merge the subarrays that have same id and get this result:</p>\n\n<pre><code>array = [[1, 'Something', '123456321'], [2, 'Something, Something', '123456321, 1234563212']]\n</code></pre>\n\n<p>Can anyone help me? Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "controllers"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1481119052, "post_id": 41019290, "comment_id": 69245769, "body": "have you tried reading out the object? <a href=\"https://aws.amazon.com/blogs/developer/downloading-objects-from-amazon-s3-using-the-aws-sdk-for-ruby/\" rel=\"nofollow noreferrer\">aws.amazon.com/blogs/developer/&hellip;</a>"}, {"owner": {"reputation": 1180, "user_id": 6157949, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/YBymK.png?s=128&g=1", "display_name": "catch22", "link": "https://stackoverflow.com/users/6157949/catch22"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1481119418, "post_id": 41019290, "comment_id": 69246036, "body": "I&#39;ve checked that link countless times this morning and I can&#39;t make my controller work... .read doesn&#39;t work."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1481119920, "post_id": 41019290, "comment_id": 69246374, "body": "have you tried writing the object to a temp file and then using send_file? I have found that to be highly effective. and what do you mean read doesn&#39;t work?"}, {"owner": {"reputation": 31012, "user_id": 25398, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3690dee254e9aa9d98ff964a70e89f23?s=128&d=identicon&r=PG", "display_name": "Cody Caughlan", "link": "https://stackoverflow.com/users/25398/cody-caughlan"}, "edited": false, "score": 0, "creation_date": 1481149008, "post_id": 41019290, "comment_id": 69264210, "body": "I&#39;d consider sending an HTTP 302 to the S3 url and having the client download the object directly from S3. By having your app server proxy the response it means your rails app processes are going to be tied up while they buffer the object from s3 and then have to send it down the pipe"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6404280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6192b2097eaba859636baa44d3eae6a3?s=128&d=identicon&r=PG&f=1", "display_name": "Arisah Ijeoma", "link": "https://stackoverflow.com/users/6404280/arisah-ijeoma"}, "is_accepted": false, "score": 0, "last_activity_date": 1481148871, "creation_date": 1481148871, "answer_id": 41028348, "question_id": 41019290, "link": "https://stackoverflow.com/questions/41019290/rails-download-objects-from-amazon-bucket-s3-aws-sdk/41028348#41028348", "title": "Rails download objects from amazon bucket s3 aws-sdk", "body": "<p>Try using <code>send_file</code> instead of <code>send_data</code></p>\n"}, {"tags": [], "owner": {"reputation": 31012, "user_id": 25398, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3690dee254e9aa9d98ff964a70e89f23?s=128&d=identicon&r=PG", "display_name": "Cody Caughlan", "link": "https://stackoverflow.com/users/25398/cody-caughlan"}, "is_accepted": false, "score": 0, "last_activity_date": 1481149053, "creation_date": 1481149053, "answer_id": 41028394, "question_id": 41019290, "link": "https://stackoverflow.com/questions/41019290/rails-download-objects-from-amazon-bucket-s3-aws-sdk/41028394#41028394", "title": "Rails download objects from amazon bucket s3 aws-sdk", "body": "<p>I'd consider sending an HTTP 302 to the S3 url and having the client download the object directly from S3. By having your app server proxy the response it means your rails app processes are going to be tied up while they buffer the object from s3 and then have to send it down the pipe. If security (and not wanting to expose the s3 objects publicliy) is a concern then keep them private and generate a signed URL to the objects with a short-ish expiration date.</p>\n"}, {"tags": [], "owner": {"reputation": 4457, "user_id": 5281693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5fN4R.jpg?s=128&g=1", "display_name": "Alexander Luna", "link": "https://stackoverflow.com/users/5281693/alexander-luna"}, "is_accepted": false, "score": 0, "last_activity_date": 1481312664, "creation_date": 1481312664, "answer_id": 41067749, "question_id": 41019290, "link": "https://stackoverflow.com/questions/41019290/rails-download-objects-from-amazon-bucket-s3-aws-sdk/41067749#41067749", "title": "Rails download objects from amazon bucket s3 aws-sdk", "body": "<p>The easiest option would be to create a link with the source of the file. When they click on that link, it will open in a new tap and download automatically from S3. </p>\n\n<p>The other option would be to work with the download functionality but I didn't read the docs yet. </p>\n"}], "owner": {"reputation": 1180, "user_id": 6157949, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/YBymK.png?s=128&g=1", "display_name": "catch22", "link": "https://stackoverflow.com/users/6157949/catch22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 768, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1481312664, "creation_date": 1481118900, "last_edit_date": 1481275515, "question_id": 41019290, "link": "https://stackoverflow.com/questions/41019290/rails-download-objects-from-amazon-bucket-s3-aws-sdk", "title": "Rails download objects from amazon bucket s3 aws-sdk", "body": "<p>I'm new to RoR. </p>\n\n<p>I'm creating a small app that uploads, deletes and downloads mp3 objects from an s3 bucket. (using aws-sdk gem).</p>\n\n<p>I can't manage to create the right download controller. My app is downloading a text file called download with the Object reference from s3 ( Aws::S3::Object:0x007feb59782368 ).</p>\n\n<p>All help will be appreciated!</p>\n\n<p>This is my code:</p>\n\n<p>controller ></p>\n\n<pre><code>  def download\n    bucket = S3.bucket(S3_BUCKET.name)\n    obj = bucket.object(params[:song])\n    byebug\n    send_data obj\n  end\n</code></pre>\n\n<p>view ></p>\n\n<pre><code>&lt;%= link_to \"download\", \"songs/download/?song=\" + song.name %&gt;\n</code></pre>\n\n<p>And the response from byebug:</p>\n\n<pre><code>(byebug) send_data obj\n  Rendering text template\n  Rendered text template (0.0ms)\nSent data  (2.2ms)\n\"#&lt;Aws::S3::Object:0x007fc3b1323c60&gt;\"\n(byebug) \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7124710, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/617e9f11bb991e894cf1b278e0ea764c?s=128&d=identicon&r=PG&f=1", "display_name": "Narayanan", "link": "https://stackoverflow.com/users/7124710/narayanan"}, "edited": false, "score": 0, "creation_date": 1481197505, "post_id": 41022544, "comment_id": 69284564, "body": "Thanks for the suggestion.. there is any other  API to do that integration."}], "tags": [], "owner": {"reputation": 41, "user_id": 7263375, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de57fea423749843584cfb3bbb246140?s=128&d=identicon&r=PG&f=1", "display_name": "\u0414\u0435\u043d\u0438\u0441 \u041f\u0440\u0435\u043f\u0435\u043b\u0438\u0446\u0430", "link": "https://stackoverflow.com/users/7263375/%d0%94%d0%b5%d0%bd%d0%b8%d1%81-%d0%9f%d1%80%d0%b5%d0%bf%d0%b5%d0%bb%d0%b8%d1%86%d0%b0"}, "is_accepted": false, "score": 0, "last_activity_date": 1481128135, "creation_date": 1481128135, "answer_id": 41022544, "question_id": 41018154, "link": "https://stackoverflow.com/questions/41018154/how-to-integrate-the-alfersco-with-already-existing-rails-application/41022544#41022544", "title": "how to integrate the alfersco with already existing rails application?", "body": "<p>you can use RESTapi and integrate own modules to alfersco</p>\n"}], "owner": {"reputation": 11, "user_id": 7124710, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/617e9f11bb991e894cf1b278e0ea764c?s=128&d=identicon&r=PG&f=1", "display_name": "Narayanan", "link": "https://stackoverflow.com/users/7124710/narayanan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1481128135, "creation_date": 1481115570, "question_id": 41018154, "link": "https://stackoverflow.com/questions/41018154/how-to-integrate-the-alfersco-with-already-existing-rails-application", "title": "how to integrate the alfersco with already existing rails application?", "body": "<p>I will try to integrate my application with alfersco for use some functionalities like documentation .. from alfersco to my rails application.</p>\n"}, {"tags": ["javascript", "ruby", "typescript", "npm", "typescript2.0"], "answers": [{"tags": [], "owner": {"reputation": 461, "user_id": 1062572, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f71b2d2a30c816a006d16b4577833221?s=128&d=identicon&r=PG", "display_name": "dynamokaj", "link": "https://stackoverflow.com/users/1062572/dynamokaj"}, "is_accepted": false, "score": 0, "last_activity_date": 1481184625, "last_edit_date": 1481184625, "creation_date": 1481139602, "answer_id": 41025940, "question_id": 41018005, "link": "https://stackoverflow.com/questions/41018005/typescript-import-class-from-another-project-module/41025940#41025940", "title": "TypeScript import class from another project / module?", "body": "<p>I guess I just needed to read up on how module resolving works.</p>\n\n<p>I solved it by adding vsts-tasks as dependency in package.json:</p>\n\n<pre><code>\"dependencies\": {\n    \"vsts-task-lib\": \"^0.9.7\",\n    \"vsts-tasks\": \"Microsoft/vsts-tasks\"\n  },\n</code></pre>\n\n<p>Then I changed the require path to the following:</p>\n\n<pre><code>import sign = require('Agent.Tasks/Tasks/Common/ios-signing-common/ios-signing-common');\n</code></pre>\n\n<p>And it works!</p>\n\n<p><strong>EDIT</strong> - It could compile, but doesn't seem to work when I run it. It fails in the script because it can't find <code>Agent.Tasks/Tasks/Common/ios-signing-common/ios-signing-common</code>.</p>\n"}], "owner": {"reputation": 461, "user_id": 1062572, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/f71b2d2a30c816a006d16b4577833221?s=128&d=identicon&r=PG", "display_name": "dynamokaj", "link": "https://stackoverflow.com/users/1062572/dynamokaj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1158, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1481184625, "creation_date": 1481115163, "question_id": 41018005, "link": "https://stackoverflow.com/questions/41018005/typescript-import-class-from-another-project-module", "title": "TypeScript import class from another project / module?", "body": "<p>I am trying to alter the following build task written in Typescript in the following project:\n<a href=\"https://github.com/Microsoft/app-store-vsts-extension/blob/master/Tasks/app-store-promote/app-store-promote.ts\" rel=\"nofollow noreferrer\">https://github.com/Microsoft/app-store-vsts-extension/blob/master/Tasks/app-store-promote/app-store-promote.ts</a></p>\n\n<p>I need an import like the one shown below (or something else that lets me uses the methods in the <code>ios-signing-common</code> module):</p>\n\n<pre><code>import sign = require('ios-signing-common/ios-signing-common');\n</code></pre>\n\n<p>That import is used in another file in another project:\n<a href=\"https://github.com/Microsoft/vsts-tasks/blob/master/Tasks/XamariniOS/xamarinios.ts\" rel=\"nofollow noreferrer\">https://github.com/Microsoft/vsts-tasks/blob/master/Tasks/XamariniOS/xamarinios.ts</a>, however that project is also the same as the ios-signing-common exists in.\n<a href=\"https://github.com/Microsoft/vsts-tasks/blob/master/Tasks/Common/ios-signing-common/ios-signing-common.ts\" rel=\"nofollow noreferrer\">https://github.com/Microsoft/vsts-tasks/blob/master/Tasks/Common/ios-signing-common/ios-signing-common.ts</a></p>\n\n<p>So is it possible to import the <code>ios-signing-common</code> module into the <code>app-store-promote</code> file?</p>\n\n<p>I have tried adding the github path \"Microsoft/vsts-tasks\" as dependency in package.json, and it downloads it to node_modules, but I still can't resolve the <code>ios-signing-common</code> module.</p>\n\n<p>I hope that any of you can lead me to a solution. :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "ruby-on-rails-4", "model"], "comments": [{"owner": {"reputation": 173, "user_id": 6370395, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A6rkat_BTlE/AAAAAAAAAAI/AAAAAAAAAAs/lVQ0YZWz-Q8/photo.jpg?sz=128", "display_name": "Atul Shukla", "link": "https://stackoverflow.com/users/6370395/atul-shukla"}, "edited": false, "score": 0, "creation_date": 1481115274, "post_id": 41017950, "comment_id": 69243037, "body": "Add your  association also."}, {"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1481115366, "post_id": 41017950, "comment_id": 69243104, "body": "Your <code>show</code> page has a line <code>&lt;td&gt;&lt;%= submission.student.id %&gt;&lt;&#47;td&gt;</code>, if that is working, why you are not trying <code>&lt;%= submission.student.name %&gt;</code>. Assuming, <code>name</code> is an attribute of <code>Student</code>."}, {"owner": {"reputation": 13, "user_id": 6673373, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1028660663908472/picture?type=large", "display_name": "Giovanni Pecchio", "link": "https://stackoverflow.com/users/6673373/giovanni-pecchio"}, "reply_to_user": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1481117005, "post_id": 41017950, "comment_id": 69244283, "body": "@dp7 both of them are not working"}, {"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 1, "creation_date": 1481117686, "post_id": 41017950, "comment_id": 69244802, "body": "@GiovanniPecchio You need to use <code>accepts_nested_attributes_for</code> (<a href=\"http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/&hellip;</a>&zwnj;&#8203;) in Submission model for students. Just have a look at the documentation, you will get idea how to proceed further."}, {"owner": {"reputation": 13, "user_id": 6673373, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1028660663908472/picture?type=large", "display_name": "Giovanni Pecchio", "link": "https://stackoverflow.com/users/6673373/giovanni-pecchio"}, "reply_to_user": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1481120285, "post_id": 41017950, "comment_id": 69246622, "body": "@dp7 I trying everything that I can find on the internet, but I don&#39;t get if I have to add something to my controllers or whatever..."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6673373, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1028660663908472/picture?type=large", "display_name": "Giovanni Pecchio", "link": "https://stackoverflow.com/users/6673373/giovanni-pecchio"}, "edited": false, "score": 0, "creation_date": 1481128977, "post_id": 41020092, "comment_id": 69252785, "body": "I created a scaffold student with student_name and student_id"}, {"owner": {"reputation": 1225, "user_id": 5724342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0fc4bbc261a7a2a233a196a0b655fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gurmukh Singh", "link": "https://stackoverflow.com/users/5724342/gurmukh-singh"}, "reply_to_user": {"reputation": 13, "user_id": 6673373, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1028660663908472/picture?type=large", "display_name": "Giovanni Pecchio", "link": "https://stackoverflow.com/users/6673373/giovanni-pecchio"}, "edited": false, "score": 0, "creation_date": 1481144877, "post_id": 41020092, "comment_id": 69262177, "body": "Im not sure how you intend to build your application, but it would make more sense to have a student which has_many :submissions and submission belongs to a user. This would make more sense."}], "tags": [], "owner": {"reputation": 1225, "user_id": 5724342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0fc4bbc261a7a2a233a196a0b655fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gurmukh Singh", "link": "https://stackoverflow.com/users/5724342/gurmukh-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1481121120, "creation_date": 1481121120, "answer_id": 41020092, "question_id": 41017950, "link": "https://stackoverflow.com/questions/41017950/show-student-name-on-submission-show-table-rails/41020092#41020092", "title": "Show student_name on submission show table rails", "body": "<p>When you created your submission, did you create a student_id in your migration?</p>\n\n<p>An example would be when creating your scaffold:</p>\n\n<pre><code>rails g Scaffold Student student_name:string submission:references\n</code></pre>\n\n<p>This should link your submission and student </p>\n"}], "owner": {"reputation": 13, "user_id": 6673373, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1028660663908472/picture?type=large", "display_name": "Giovanni Pecchio", "link": "https://stackoverflow.com/users/6673373/giovanni-pecchio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481121120, "creation_date": 1481114992, "last_edit_date": 1481116988, "question_id": 41017950, "link": "https://stackoverflow.com/questions/41017950/show-student-name-on-submission-show-table-rails", "title": "Show student_name on submission show table rails", "body": "<p>I need to show the student name that I selected in the submission form through a dropdown in my show submission table. </p>\n\n<p>show submission:</p>\n\n<pre><code>&lt;h1&gt;&lt;%= @form.title %&gt;&lt;/h1&gt;\n&lt;p&gt;\n  &lt;%= image_tag @form.image.url(:medium) %&gt;\n&lt;/p&gt;\n\n&lt;table class=\"table table-responsive table-hover\"&gt;\n  &lt;% if user_signed_in? %&gt;\n    &lt;% if @submissions.blank? %&gt;\n      &lt;h4&gt;No submission just yet&lt;/h4&gt;\n    &lt;% else %&gt;\n    &lt;thead&gt;\n      &lt;th&gt;Conflict&lt;/th&gt;\n      &lt;th&gt;Computer&lt;/th&gt;\n      &lt;th&gt;Extra time&lt;/th&gt;\n      &lt;th&gt;AM or PM&lt;/th&gt;\n    &lt;/thead&gt;\n\n    &lt;tbody&gt;\n      &lt;% @submissions.each do |submission| %&gt;\n        &lt;tr&gt;\n          &lt;td&gt;&lt;%= submission.conflict %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= submission.computer %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= submission.extra_time %&gt;%&lt;/td&gt;\n          &lt;td&gt;&lt;%= submission.am_pm %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= submission.student.id %&gt;&lt;/td&gt;\n          &lt;!-- Need to add Edit, Delete --&gt;\n        &lt;/tr&gt;\n      &lt;% end %&gt;\n    &lt;/tbody&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n&lt;/table&gt;\n\n&lt;%= link_to 'New Submission', new_form_submission_path(@form) %&gt;\n&lt;br&gt;\n&lt;%= link_to 'Edit', edit_form_path(@form) %&gt; |\n&lt;%= link_to 'Back', forms_path %&gt;\n</code></pre>\n\n<p>submission form:</p>\n\n<pre><code>&lt;%= form_for([@form, @submission]) do |f| %&gt;\n&lt;% if @submission.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(@submission.errors.count, \"error\") %&gt; prohibited this submission from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n        &lt;% @submission.errors.full_messages.each do |message| %&gt;\n          &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n        &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :conflict %&gt;&lt;br /&gt;\n    &lt;%= f.radio_button :conflict, :Yes, required: :true %&gt; Yes&lt;br&gt;\n    &lt;%= f.radio_button :conflict, :No, required: :true %&gt; No\n  &lt;/div&gt;\n  &lt;br&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :computer %&gt;&lt;br /&gt;\n    &lt;%= f.radio_button :computer, :Yes, required: :true %&gt; Yes&lt;br&gt;\n    &lt;%= f.radio_button :computer, :No, required: :true %&gt; No\n  &lt;/div&gt;\n  &lt;br&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :am_pm %&gt;&lt;br /&gt;\n    &lt;%= f.radio_button :am_pm, :Am, required: :true %&gt; Am&lt;br&gt;\n    &lt;%= f.radio_button :am_pm, :Pm, required: :true %&gt; Pm\n  &lt;/div&gt;\n  &lt;br&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label \"Student\" %&gt;&lt;br /&gt;\n    &lt;%= collection_select(:student, :student_id, Student.all, :id, :student_name, prompt: true) %&gt;\n  &lt;/div&gt;\n  &lt;br&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :extra_time %&gt;&lt;br /&gt;\n    &lt;%= f.radio_button :extra_time, 25, required: :true %&gt; 25%&lt;br&gt;\n    &lt;%= f.radio_button :extra_time, 50, required: :true %&gt; 50%\n  &lt;/div&gt;\n  &lt;br&gt;\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit \"Submit\", class: \"btn btn-primary\" %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>submission_controller.rb:</p>\n\n<pre><code>class SubmissionsController &lt; ApplicationController\nbefore_action :set_submission, only: [:show, :edit, :update, :destroy]\n  before_action :set_form\n\n  # GET /submissions/new\n  def new\n    @submission = Submission.new\n  end\n\n  # GET /submissions/1/edit\n  def edit\n  end\n\n  # POST /submissions\n  # POST /submissions.json\n  def create\n    @submission = Submission.new(submission_params)\n    @submission.form_id = @form.id\n\n    respond_to do |format|\n      if @submission.save\n        format.html { redirect_to @form, notice: 'Submission was successfully created.' }\n        format.json { render :show, status: :created, location: @submission }\n      else\n        format.html { render :new }\n        format.json { render json: @submission.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /submissions/1\n  # PATCH/PUT /submissions/1.json\n  def update\n    respond_to do |format|\n      if @submission.update(submission_params)\n        format.html { redirect_to @submission, notice: 'Submission was successfully updated.' }\n        format.json { render :show, status: :ok, location: @submission }\n      else\n        format.html { render :edit }\n        format.json { render json: @submission.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /submissions/1\n  # DELETE /submissions/1.json\n  def destroy\n    @submission.destroy\n    respond_to do |format|\n      format.html { redirect_to submissions_url, notice: 'Submission was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_submission\n      @submission = Submission.find(params[:id])\n    end\n\n    def set_form\n      @form = Form.find(params[:form_id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def submission_params\n      params.require(:submission).permit(:conflict, :computer, :extra_time, :am_pm)\n    end\nend\n</code></pre>\n\n<p>student_controller.rb:</p>\n\n<pre><code>class StudentsController &lt; ApplicationController\nbefore_action :set_student, only: [:show, :edit, :update, :destroy]\n\n  # GET /students\n  # GET /students.json\n  def index\n    @students = Student.all\n  end\n\n  # GET /students/1\n  # GET /students/1.json\n  def show\n  end\n\n  # GET /students/new\n  def new\n    @student = Student.new\n  end\n\n  # GET /students/1/edit\n  def edit\n  end\n\n  # POST /students\n  # POST /students.json\n  def create\n    @student = Student.new(student_params)\n\n    respond_to do |format|\n      if @student.save\n        format.html { redirect_to @student, notice: 'Student was successfully created.' }\n        format.json { render :show, status: :created, location: @student }\n      else\n        format.html { render :new }\n        format.json { render json: @student.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /students/1\n  # PATCH/PUT /students/1.json\n  def update\n    respond_to do |format|\n      if @student.update(student_params)\n        format.html { redirect_to @student, notice: 'Student was successfully updated.' }\n        format.json { render :show, status: :ok, location: @student }\n      else\n        format.html { render :edit }\n        format.json { render json: @student.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /students/1\n  # DELETE /students/1.json\n  def destroy\n    @student.destroy\n    respond_to do |format|\n      format.html { redirect_to students_url, notice: 'Student was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_student\n      @student = Student.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def student_params\n      params.require(:student).permit(:student_name)\n    end\nend\n</code></pre>\n\n<p>submission.rb:</p>\n\n<pre><code>class Submission &lt; ActiveRecord::Base\n  belongs_to :form\n  has_one :student\nend\n</code></pre>\n\n<p>student.rb:</p>\n\n<pre><code>class Student &lt; ActiveRecord::Base\n  belongs_to :submission\nend\n</code></pre>\n\n<p>The problem is that if I try to see the last submission in the console, there is nothing that correlates to the username I chose.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1481114329, "post_id": 41017632, "comment_id": 69242374, "body": "<code>Friendship</code> model has <code>attr_accessor :status</code> - <code>status</code> looks like a virtual attribute. Do you have a column called <code>status</code> ?"}, {"owner": {"reputation": 81, "user_id": 6513027, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ec277bb373975eea2c0037fd5f8fabfe?s=128&d=identicon&r=PG&f=1", "display_name": "antonyCas", "link": "https://stackoverflow.com/users/6513027/antonycas"}, "reply_to_user": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1481114413, "post_id": 41017632, "comment_id": 69242426, "body": "Yeah i have a status column, but it is only set to pending/requested when i create the friendship from the command line. Is that to do with the attr_accessor then?"}, {"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 2, "creation_date": 1481114539, "post_id": 41017632, "comment_id": 69242508, "body": "Yes, why do you have <code>attr_accessor :status</code> ? When you have a column named as <code>status</code>, ActiveRecord already creates getter setter methods for it."}, {"owner": {"reputation": 81, "user_id": 6513027, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ec277bb373975eea2c0037fd5f8fabfe?s=128&d=identicon&r=PG&f=1", "display_name": "antonyCas", "link": "https://stackoverflow.com/users/6513027/antonycas"}, "reply_to_user": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1481114683, "post_id": 41017632, "comment_id": 69242609, "body": "Thanks alot that solved it. So when i added the accessor did that overwrite the methods that active_record had created?"}], "answers": [{"tags": [], "owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "is_accepted": true, "score": 1, "last_activity_date": 1481114788, "creation_date": 1481114788, "answer_id": 41017895, "question_id": 41017632, "link": "https://stackoverflow.com/questions/41017632/creating-record-in-database-not-working-properly-in-rails/41017895#41017895", "title": "Creating record in database not working properly in rails", "body": "<p><code>Friendship</code> model has <code>attr_accessor :status</code>, which overrides the default getter setter methods provided by <code>ActiveRecord</code> for your <code>status</code> column.</p>\n"}], "owner": {"reputation": 81, "user_id": 6513027, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ec277bb373975eea2c0037fd5f8fabfe?s=128&d=identicon&r=PG&f=1", "display_name": "antonyCas", "link": "https://stackoverflow.com/users/6513027/antonycas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 41017895, "answer_count": 1, "score": 0, "last_activity_date": 1481114788, "creation_date": 1481114071, "last_edit_date": 1481114389, "question_id": 41017632, "link": "https://stackoverflow.com/questions/41017632/creating-record-in-database-not-working-properly-in-rails", "title": "Creating record in database not working properly in rails", "body": "<p>I am creating an instance of a friendship between two users. When I create it in the rails console everything works as planned, however, when I actually create the friendship through the site the status column is left blank. If anyone can tell me why it would be really appreciated.</p>\n\n<p>here is the model I have:</p>\n\n<pre><code>class Friendship &lt; ApplicationRecord\n\n  attr_accessor :status, :accepted_at\n\n  belongs_to :user\n  belongs_to :friend, :class_name =&gt; \"User\"\n\n  def self.request(user,friend)\n    unless user == friend or Friendship.exists?(user: user, friend: friend)\n      transaction do\n        create(:user =&gt; user, :friend =&gt; friend, :status =&gt; 'pending')\n        create(:user =&gt; friend, :friend =&gt; user, :status =&gt; 'requested')\n      end\n    end\n  end\n\n  def self.accept(user,friend)\n    transaction do\n      accepted_at = Time.now\n      accept_one_side(user,friend,accepted_at)\n      accept_one_side(friend,user,accepted_at)\n    end\n  end\n\n  def self.accept_one_side(user,friend,accepted_at)\n    request = Friendship.where(\"user_id = #{user.id} AND friend_id = #{friend.id}\")\n    request.update_all(:status =&gt; 'accepted', :accepted_at =&gt; accepted_at)\n  end\nend\n</code></pre>\n\n<p>and this is my controller</p>\n\n<pre><code>class FriendshipsController &lt; ApplicationController\n  def create\n    friend = User.where(email: params[:friend_email]).first\n    Friendship.request(current_user,friend)\n    redirect_to user_profile_path(current_user)\n  end\n\n  def friendship_params\n    params.require(:friendship).permit(:friend_email)\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "heroku"], "comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1481112918, "post_id": 41017136, "comment_id": 69241437, "body": "What error messages do you get? How do you expect us to help without information?"}, {"owner": {"reputation": 31, "user_id": 6890429, "user_type": "registered", "profile_image": "https://graph.facebook.com/1140396046025653/picture?type=large", "display_name": "Victor Hugo Rocha", "link": "https://stackoverflow.com/users/6890429/victor-hugo-rocha"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1481113569, "post_id": 41017136, "comment_id": 69241871, "body": "There isn&#39;t erro message. That&#39;s the problem. But I&#39;m resolve just using <code>heroku ps:scale web=1</code>   Ty all guys. :D"}], "owner": {"reputation": 31, "user_id": 6890429, "user_type": "registered", "profile_image": "https://graph.facebook.com/1140396046025653/picture?type=large", "display_name": "Victor Hugo Rocha", "link": "https://stackoverflow.com/users/6890429/victor-hugo-rocha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 311, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1481113471, "creation_date": 1481112636, "last_edit_date": 1481113471, "question_id": 41017136, "link": "https://stackoverflow.com/questions/41017136/how-can-i-run-a-ruby-script-telegram-bot-on-a-heroku-server", "title": "How can I run a Ruby script (Telegram Bot) on a Heroku server?", "body": "<p>These are my Procfile, Gemfile and Heroku logs.</p>\n\n<p><strong>Procfile</strong></p>\n\n<pre><code>worker: bundle exec ruby devzbot-all.rb\n</code></pre>\n\n<p><strong>Gemfile</strong> </p>\n\n<pre><code>source 'https://rubygems.org' do\n  ruby '2.3.1'\n  gem 'telegram-bot-ruby'\nend\n</code></pre>\n\n<p><strong>Heroku Logs</strong></p>\n\n<pre><code>2016-12-07T11:10:40.111097+00:00 heroku[slug-compiler]: Slug compilation started\n2016-12-07T11:10:40.111102+00:00 heroku[slug-compiler]: Slug compilation finished\n2016-12-07T11:15:48.787092+00:00 heroku[slug-compiler]: Slug compilation started\n2016-12-07T11:15:48.787102+00:00 heroku[slug-compiler]: Slug compilation finished\n2016-12-07T11:44:05.999908+00:00 heroku[slug-compiler]: Slug compilation started\n2016-12-07T11:44:05.999918+00:00 heroku[slug-compiler]: Slug compilation finished\n</code></pre>\n\n<p>My bot works fine on localhost.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1481113668, "post_id": 41016974, "comment_id": 69241937, "body": "The three examples do very different things. You could instead ask what is the difference between the three. On the other hand, if you just want different syntaxes for the same, you can get quite a lot, but what is the point?"}, {"owner": {"reputation": 271, "user_id": 6929856, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b914dd226ff7b648e0820d82dcd6a02e?s=128&d=identicon&r=PG&f=1", "display_name": "ankur", "link": "https://stackoverflow.com/users/6929856/ankur"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1481114570, "post_id": 41016974, "comment_id": 69242541, "body": "I was learning how to include a module inside a class .Every time I am seeing I am getting a different way .So my question is why there are 3 ways made to do one small thing.."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481117502, "post_id": 41016974, "comment_id": 69244654, "body": "<a href=\"http://ruby-doc.org/core-2.0.0/Module.html#method-i-prepend\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.0.0/Module.html#method-i-prepend</a> is another possibility."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1481143510, "post_id": 41016974, "comment_id": 69261339, "body": "Those three things have exactly zero to do with each other. Also, what does this have to do with Rails 4?"}], "answers": [{"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 1, "last_activity_date": 1481115378, "last_edit_date": 1495542271, "creation_date": 1481115378, "answer_id": 41018078, "question_id": 41016974, "link": "https://stackoverflow.com/questions/41016974/how-many-ways-to-include-or-inherit-module-inside-a-class/41018078#41018078", "title": "How many ways to include or inherit module inside a class", "body": "<p>Out of the three, only the last one includes a module into the class. That is, it adds the methods from the module to the class.</p>\n\n<hr>\n\n<p>The first one is called refinement. If instead of refining <code>Fixnum</code> you just added a <code>#minutes</code> method to it, <code>Fixnum</code> will have that method for everyone that uses it, as long as your code is loaded. This might cause conflicts with other implementations of the same method (for example active record's <code>#minutes</code>) and leads to obscure, hard to debug issues. Instead, you can refine the <code>Fixnum</code> class and it will have that method only in the scope where you added the refinement with <code>using</code>.</p>\n\n<p>It has some issues and it's not very widely used. But for the purposes of this question, the differences between including a module and using a refinement are:</p>\n\n<ul>\n<li>including will add methods to the class where you do the inclusion, while refinements make other classes behave differently in the context where they are used</li>\n<li>including is semantical (all objects will have the new included methods), while refinements are lexical (after you close the class, if you reopen it again, you won't see the refined methods)</li>\n</ul>\n\n<hr>\n\n<p>The second one is scoping the class inside the module. This doesn't add methods anywhere. It is just due to the way constants are searched that if the constant (in this case <code>VAL</code>) isn't found in the current class, it is searched further up the tree. It's not that simple actually, if you want more details, you can read <a href=\"https://stackoverflow.com/a/40893577/2423164\">here</a>.</p>\n"}], "owner": {"reputation": 271, "user_id": 6929856, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b914dd226ff7b648e0820d82dcd6a02e?s=128&d=identicon&r=PG&f=1", "display_name": "ankur", "link": "https://stackoverflow.com/users/6929856/ankur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 41018078, "answer_count": 1, "score": -1, "last_activity_date": 1481116150, "creation_date": 1481112221, "last_edit_date": 1481116150, "question_id": 41016974, "link": "https://stackoverflow.com/questions/41016974/how-many-ways-to-include-or-inherit-module-inside-a-class", "title": "How many ways to include or inherit module inside a class", "body": "<p>I am trying to understand concepts of including or inheriting a module inside a class. Whenever I read i get new ways to include or inherit a module inside a class. So just want to know how many ways are there. Here are the examples I am sharing:</p>\n\n<p><strong>Example 1</strong></p>\n\n<pre><code>module TimeExtensions\n  refine Fixnum do\n    def minutes; self * 60; end\n  end\nend\n\nclass MyApp\n  using TimeExtensions\n\n  def initialize\n    p 2.minutes\n  end\nend\n</code></pre>\n\n<p><strong>Example 2</strong></p>\n\n<pre><code>VAL = 'Global'\n\nmodule Foo\n  VAL = 'Foo Local'\n\n  class Bar\n    def value1\n      VAL\n    end\n  end\nend\n\nclass Foo::Bar\n  def value2\n    VAL\n  end\nend\n</code></pre>\n\n<p><strong>Example 3</strong></p>\n\n<pre><code>module Foo\n  def foo\n    puts 'heyyyyoooo!'\n  end\nend\n\nclass Bar\n  include Foo\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "bing-api", "bing-search"], "comments": [{"owner": {"reputation": 4365, "user_id": 3275167, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/2d5b6485571a870043f694cfb979eefa?s=128&d=identicon&r=PG&f=1", "display_name": "coderz", "link": "https://stackoverflow.com/users/3275167/coderz"}, "edited": false, "score": 0, "creation_date": 1481110920, "post_id": 41016346, "comment_id": 69240193, "body": "Please show your code."}, {"owner": {"reputation": 6220, "user_id": 268847, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2685d5bc8e51e598fcd291189c340f63?s=128&d=identicon&r=PG", "display_name": "rlandster", "link": "https://stackoverflow.com/users/268847/rlandster"}, "edited": false, "score": 0, "creation_date": 1481125681, "post_id": 41016346, "comment_id": 69250484, "body": "Improved formatting."}], "owner": {"reputation": 1, "user_id": 7261936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/533e787db009e171eda68df1cf99c028?s=128&d=identicon&r=PG&f=1", "display_name": "Yogendra V", "link": "https://stackoverflow.com/users/7261936/yogendra-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1546912815, "creation_date": 1481110269, "last_edit_date": 1481371511, "question_id": 41016346, "link": "https://stackoverflow.com/questions/41016346/need-configurations-for-integrating-latest-version-of-bing-search-api-in-ruby-on", "title": "Need configurations for integrating latest version of Bing search api in Ruby on rails application", "body": "<p>Getting error:</p>\n\n<blockquote>\n  <p>Geocoding API error: 401 Unauthorized<br>\n      Invalid Bing API key. </p>\n</blockquote>\n\n<p>After putting Bing search api primary key in geokit_config.rb and geocoder.rb in Ruby on rails application. Do I need any other configurations for integrate Bing search api (part of Microsoft cognitive search) in Ruby on rails application?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "model", "collection-select"], "comments": [{"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1481110132, "post_id": 41016070, "comment_id": 69239709, "body": "You want to submit some data, where is your form ? Add your controller code.   Seeing your <code>collection_select</code> , it looks you are trying to show <code>title</code> of <code>Submission</code> ? But you have mentioned you need a dropdown that shows students !!"}], "answers": [{"tags": [], "owner": {"reputation": 696, "user_id": 3101782, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/a7f2da739317a5199362dd7b998ad967?s=128&d=identicon&r=PG", "display_name": "Disha", "link": "https://stackoverflow.com/users/3101782/disha"}, "is_accepted": false, "score": 0, "last_activity_date": 1481110185, "creation_date": 1481110185, "answer_id": 41016317, "question_id": 41016070, "link": "https://stackoverflow.com/questions/41016070/dropdown-with-name-from-another-model-rails/41016317#41016317", "title": "DropDown with name from another model rails", "body": "<p>I am assuming that you have a form for Submission and you want Students dropdown below it.</p>\n\n<p>If that is the case, do the following - </p>\n\n<pre><code>&lt;%= f.select(:student_id, Student.all.collect { |s| [s.name, s.id] }, {:include_blank =&gt; true, :selected =&gt; f.object.student_id}) %&gt;\n</code></pre>\n\n<p>BY doing the above, name will be displayed in the dropdown and id will be binded with option tag.</p>\n\n<p>For more details, please check this - <a href=\"http://apidock.com/rails/ActionView/Helpers/FormBuilder/select\" rel=\"nofollow noreferrer\">http://apidock.com/rails/ActionView/Helpers/FormBuilder/select</a></p>\n"}, {"tags": [], "owner": {"reputation": 13, "user_id": 6673373, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1028660663908472/picture?type=large", "display_name": "Giovanni Pecchio", "link": "https://stackoverflow.com/users/6673373/giovanni-pecchio"}, "is_accepted": false, "score": 0, "last_activity_date": 1481112394, "creation_date": 1481112394, "answer_id": 41017028, "question_id": 41016070, "link": "https://stackoverflow.com/questions/41016070/dropdown-with-name-from-another-model-rails/41017028#41017028", "title": "DropDown with name from another model rails", "body": "<p>I found the answer:</p>\n\n<pre><code>&lt;%= collection_select(:student, :student_id, Student.all, :id, :student_name, prompt: true) %&gt;\n</code></pre>\n\n<p>Thanks everybody</p>\n"}], "owner": {"reputation": 13, "user_id": 6673373, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1028660663908472/picture?type=large", "display_name": "Giovanni Pecchio", "link": "https://stackoverflow.com/users/6673373/giovanni-pecchio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 284, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1481112394, "creation_date": 1481109452, "last_edit_date": 1481110656, "question_id": 41016070, "link": "https://stackoverflow.com/questions/41016070/dropdown-with-name-from-another-model-rails", "title": "DropDown with name from another model rails", "body": "<p>I have students that belong to a submission and I need a drop down that shows the students so the user can choose one of them.\nI tried to use this but it's not working:</p>\n\n<pre><code>&lt;%= collection_select(:student_name, :submission_id, Submission.all, :form_id, :title) %&gt;\n</code></pre>\n\n<p>submission.rb:</p>\n\n<pre><code>class Submission &lt; ActiveRecord::Base\n  belongs_to :form\n  has_one :student\nend\n</code></pre>\n\n<p>student.rb:</p>\n\n<pre><code>class Student &lt; ActiveRecord::Base\n  belongs_to :submission\nend\n</code></pre>\n\n<p>submission_controller.rb:</p>\n\n<pre><code>class SubmissionsController &lt; ApplicationController\n  before_action :set_submission, only: [:show, :edit, :update, :destroy]\n  before_action :set_form\n\n  # GET /submissions/new\n  def new\n    @submission = Submission.new\n  end\n\n  # GET /submissions/1/edit\n  def edit\n  end\n\n  # POST /submissions\n  # POST /submissions.json\n  def create\n    @submission = Submission.new(submission_params)\n    @submission.form_id = @form.id\n\n    respond_to do |format|\n      if @submission.save\n        format.html { redirect_to @form, notice: 'Submission was successfully created.' }\n        format.json { render :show, status: :created, location: @submission }\n      else\n        format.html { render :new }\n        format.json { render json: @submission.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /submissions/1\n  # PATCH/PUT /submissions/1.json\n  def update\n    respond_to do |format|\n      if @submission.update(submission_params)\n        format.html { redirect_to @submission, notice: 'Submission was successfully updated.' }\n        format.json { render :show, status: :ok, location: @submission }\n      else\n        format.html { render :edit }\n        format.json { render json: @submission.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /submissions/1\n  # DELETE /submissions/1.json\n  def destroy\n    @submission.destroy\n    respond_to do |format|\n      format.html { redirect_to submissions_url, notice: 'Submission was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_submission\n      @submission = Submission.find(params[:id])\n    end\n\n    def set_form\n      @form = Form.find(params[:form_id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def submission_params\n      params.require(:submission).permit(:conflict, :computer, :extra_time, :am_pm)\n    end\nend\n</code></pre>\n\n<p>student_controller.rb:</p>\n\n<pre><code>class StudentsController &lt; ApplicationController\n  before_action :set_student, only: [:show, :edit, :update, :destroy]\n\n  # GET /students\n  # GET /students.json\n  def index\n    @students = Student.all\n  end\n\n  # GET /students/1\n  # GET /students/1.json\n  def show\n  end\n\n  # GET /students/new\n  def new\n    @student = Student.new\n  end\n\n  # GET /students/1/edit\n  def edit\n  end\n\n  # POST /students\n  # POST /students.json\n  def create\n    @student = Student.new(student_params)\n\n    respond_to do |format|\n      if @student.save\n        format.html { redirect_to @student, notice: 'Student was successfully created.' }\n        format.json { render :show, status: :created, location: @student }\n      else\n        format.html { render :new }\n        format.json { render json: @student.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /students/1\n  # PATCH/PUT /students/1.json\n  def update\n    respond_to do |format|\n      if @student.update(student_params)\n        format.html { redirect_to @student, notice: 'Student was successfully updated.' }\n        format.json { render :show, status: :ok, location: @student }\n      else\n        format.html { render :edit }\n        format.json { render json: @student.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /students/1\n  # DELETE /students/1.json\n  def destroy\n    @student.destroy\n    respond_to do |format|\n      format.html { redirect_to students_url, notice: 'Student was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_student\n      @student = Student.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def student_params\n      params.require(:student).permit(:student_name)\n    end\nend\n</code></pre>\n\n<p>submission form:</p>\n\n<pre><code>&lt;%= form_for([@form, @submission]) do |f| %&gt;\n  &lt;% if @submission.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(@submission.errors.count, \"error\") %&gt; prohibited this submission from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n        &lt;% @submission.errors.full_messages.each do |message| %&gt;\n          &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n        &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :conflict %&gt;&lt;br /&gt;\n    &lt;%= f.radio_button :conflict, :Yes, required: :true %&gt; Yes&lt;br&gt;\n    &lt;%= f.radio_button :conflict, :No, required: :true %&gt; No\n  &lt;/div&gt;\n  &lt;br&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :computer %&gt;&lt;br /&gt;\n    &lt;%= f.radio_button :computer, :Yes, required: :true %&gt; Yes&lt;br&gt;\n    &lt;%= f.radio_button :computer, :No, required: :true %&gt; No\n  &lt;/div&gt;\n  &lt;br&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :am_pm %&gt;&lt;br /&gt;\n    &lt;%= f.radio_button :am_pm, :Am, required: :true %&gt; Am&lt;br&gt;\n    &lt;%= f.radio_button :am_pm, :Pm, required: :true %&gt; Pm\n  &lt;/div&gt;\n  &lt;br&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label \"Student\" %&gt;&lt;br /&gt;\n    &lt;%= collection_select(:student_name, :submission_id, Submission.all, :form_id, :title) %&gt;\n  &lt;/div&gt;\n  &lt;br&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :extra_time %&gt;&lt;br /&gt;\n    &lt;%= f.radio_button :extra_time, 25, required: :true %&gt; 25%&lt;br&gt;\n    &lt;%= f.radio_button :extra_time, 50, required: :true %&gt; 50%\n  &lt;/div&gt;\n  &lt;br&gt;\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit \"Submit\", class: \"btn btn-primary\" %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Hope to find an answer! Thanks</p>\n"}, {"tags": ["ruby", "intellij-idea", "configuration"], "answers": [{"tags": [], "owner": {"reputation": 79983, "user_id": 147024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b35432f97606c0a31da17084d2414966?s=128&d=identicon&r=PG", "display_name": "yole", "link": "https://stackoverflow.com/users/147024/yole"}, "is_accepted": true, "score": 1, "last_activity_date": 1481112490, "creation_date": 1481112490, "answer_id": 41017072, "question_id": 41015412, "link": "https://stackoverflow.com/questions/41015412/intellij-idea-2016-3-ruby-sdk-and-gems-not-shown-in-settings/41017072#41017072", "title": "Intellij IDEA 2016.3 Ruby SDK and Gems not shown in Settings", "body": "<p>The UI for configuring the Ruby SDK is different between RubyMine and the IntelliJ IDEA Ruby plugin. To configure a Ruby SDK in IntelliJ IDEA, you need to go to the Project Structure dialog, select the SDKs page, press the + button and select the Ruby SDK type from the popup.</p>\n"}], "owner": {"reputation": 1498, "user_id": 2650481, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/s3CqA.jpg?s=128&g=1", "display_name": "Adam Boczek", "link": "https://stackoverflow.com/users/2650481/adam-boczek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 711, "favorite_count": 0, "accepted_answer_id": 41017072, "answer_count": 1, "score": 0, "last_activity_date": 1481112490, "creation_date": 1481107653, "question_id": 41015412, "link": "https://stackoverflow.com/questions/41015412/intellij-idea-2016-3-ruby-sdk-and-gems-not-shown-in-settings", "title": "Intellij IDEA 2016.3 Ruby SDK and Gems not shown in Settings", "body": "<p>I have new Intellij IDEA 2016.3 installed and just wanted to configure a Ruby SDK for my project. I have installed Ruby Plugin (editor support works as expected) but I cannot find a menu in Settings for \"Ruby SDK and Gems\" (as I know this from RubyMine that I had before). Shift+Ctrl+A does not deliver any other places for that. Have I overseen something?</p>\n"}, {"tags": ["ruby", "email", "smtp"], "answers": [{"comments": [{"owner": {"reputation": 545, "user_id": 2400756, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ls4jp.jpg?s=128&g=1", "display_name": "The Rookie", "link": "https://stackoverflow.com/users/2400756/the-rookie"}, "edited": false, "score": 0, "creation_date": 1481109069, "post_id": 41015384, "comment_id": 69239043, "body": "I edited my question so if I interpolate it somehow sends an attachment"}], "tags": [], "owner": {"reputation": 28716, "user_id": 828193, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/pmNlX.png?s=128&g=1", "display_name": "user000001", "link": "https://stackoverflow.com/users/828193/user000001"}, "is_accepted": false, "score": 1, "last_activity_date": 1481107566, "last_edit_date": 1495539958, "creation_date": 1481107566, "answer_id": 41015384, "question_id": 41015343, "link": "https://stackoverflow.com/questions/41015343/ruby-i-am-trying-to-send-an-array-in-the-email-body-but-it-does-not-send-the/41015384#41015384", "title": "Ruby: I am trying to send an array in the email {body} but it does not send the array rather just text &#39;body&#39; is send", "body": "<p>Heredocs can accept variables like a normal string, using the <code>#{var}</code> syntax:</p>\n\n<pre><code>message = &lt;&lt;MESSAGE_END\nFrom: Private Person &lt;me@fromdomain.com&gt;\nTo: A Test User &lt;test@todomain.com&gt;\nSubject: #{a}\n\nThis is a test e-mail message.\nMESSAGE_END\n</code></pre>\n\n<p>Source: <a href=\"https://stackoverflow.com/a/3332901\">https://stackoverflow.com/a/3332901</a></p>\n"}], "owner": {"reputation": 545, "user_id": 2400756, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ls4jp.jpg?s=128&g=1", "display_name": "The Rookie", "link": "https://stackoverflow.com/users/2400756/the-rookie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1481108521, "creation_date": 1481107452, "last_edit_date": 1481108521, "question_id": 41015343, "link": "https://stackoverflow.com/questions/41015343/ruby-i-am-trying-to-send-an-array-in-the-email-body-but-it-does-not-send-the", "title": "Ruby: I am trying to send an array in the email {body} but it does not send the array rather just text &#39;body&#39; is send", "body": "<p>Here is the code I tried</p>\n\n<pre><code>a = [1,2,3,4,5]\n\nrequire 'net/smtp'\n\nmessage = &lt;&lt;MESSAGE_END\nFrom: Private Person &lt;me@fromdomain.com&gt;\nTo: A Test User &lt;test@todomain.com&gt;\nSubject: Something\n\n\"#{a}\" This is a test e-mail message.\nMESSAGE_END\n\nNet::SMTP.start('localhost') do |smtp|\n  smtp.send_message message, 'me@fromdomain.com', \n                             'test@todomain.com'\nend\n</code></pre>\n\n<p>I have figured a way around this </p>\n\n<pre><code>message =%Q(\nSubject: Test suite result\n#{a}\n)\nsmtp = Net::SMTP.new 'smtp.gmail.com', 587\n smtp.enable_starttls\n  smtp.start('smtp.gmail.com', 'from@mail.com', 'password', :plain) do |smtp|\n    smtp.send_message message, 'from@mail.com',\n                                   'to@mail.com'\n  end\n</code></pre>\n\n<p>But if I use above approach I am only able to send the body and cannot send subject and the to address.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 4538, "user_id": 809830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdd9801d2717096282258b192edc7793?s=128&d=identicon&r=PG", "display_name": "Alex Kojin", "link": "https://stackoverflow.com/users/809830/alex-kojin"}, "is_accepted": true, "score": 0, "last_activity_date": 1481105954, "creation_date": 1481105954, "answer_id": 41014807, "question_id": 41014607, "link": "https://stackoverflow.com/questions/41014607/simple-captcha-error/41014807#41014807", "title": "Simple Captcha Error", "body": "<p>Looks like latest commit to \"simple_captcha\" repository was 3 years ago. It's outdated and maybe it will be not worked with Rails 5.</p>\n\n<p>You can use Recaptcha from Google <a href=\"https://github.com/ambethia/recaptcha\" rel=\"nofollow noreferrer\">https://github.com/ambethia/recaptcha</a> </p>\n"}, {"comments": [{"owner": {"reputation": 724, "user_id": 7180882, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/562911101614/picture?type=large", "display_name": "Ryan Murphy", "link": "https://stackoverflow.com/users/7180882/ryan-murphy"}, "edited": false, "score": 0, "creation_date": 1481189458, "post_id": 41017877, "comment_id": 69279206, "body": "Thanks got Recaptcha working fine.  Will keep my eye out for the age of these repositories in the future."}], "tags": [], "owner": {"reputation": 1122, "user_id": 3283795, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/satrn.jpg?s=128&g=1", "display_name": "kajal ojha", "link": "https://stackoverflow.com/users/3283795/kajal-ojha"}, "is_accepted": false, "score": 0, "last_activity_date": 1481114761, "creation_date": 1481114761, "answer_id": 41017877, "question_id": 41014607, "link": "https://stackoverflow.com/questions/41014607/simple-captcha-error/41017877#41017877", "title": "Simple Captcha Error", "body": "<p>You can use Recaptcha gem as advised by Alex</p>\n\n<p>There is nice tutorial for this <a href=\"https://www.sitepoint.com/quick-tip-add-recaptcha-to-your-rails-application/\" rel=\"nofollow noreferrer\">https://www.sitepoint.com/quick-tip-add-recaptcha-to-your-rails-application/</a></p>\n"}], "owner": {"reputation": 724, "user_id": 7180882, "user_type": "registered", "accept_rate": 76, "profile_image": "https://graph.facebook.com/562911101614/picture?type=large", "display_name": "Ryan Murphy", "link": "https://stackoverflow.com/users/7180882/ryan-murphy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 41014807, "answer_count": 2, "score": 0, "last_activity_date": 1481114761, "creation_date": 1481105354, "last_edit_date": 1481106664, "question_id": 41014607, "link": "https://stackoverflow.com/questions/41014607/simple-captcha-error", "title": "Simple Captcha Error", "body": "<p>I am trying to use the simple-captcha gem with</p>\n\n<pre><code>gem \"galetahub-simple_captcha\", :require =&gt; \"simple_captcha\".\n</code></pre>\n\n<p>I am running Rails 5.0.0.1 and Ruby 2.3.2.</p>\n\n<p>I couldn't get it to work in my app so I created a clean skin, <code>rails new</code>, <code>rails generate scaffold User</code>, <code>rake db:migrate</code> etc.  As soon as I add the gem, I can <code>bundle install</code> fine, but as soon as I run <code>rails test</code> or <code>rails generate</code> or anything I get this error:</p>\n\n<pre><code>user/.rvm/gems/ruby-2.3.3/gems/galetahub-simple_captcha-0.1.5/lib/simple_captcha/form_builder.rb:7:in `included': uninitialized constant Sprockets::Helpers (NameError)\n</code></pre>\n\n<p>I have tried following the setup instructions for the gem, which says to run <code>rails generate captcha</code> after installing the gem, but as soon as I have installed the gem I get the error.</p>\n\n<p>Any help would be appreciated.</p>\n\n<p>On the other hand if anyone thinks there is a better captcha I should be using for form submission, let me know.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cancan", "cancancan"], "answers": [{"tags": [], "owner": {"reputation": 1903, "user_id": 2578693, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3a7a908dd876ba5168b5ba618ccae256?s=128&d=identicon&r=PG&f=1", "display_name": "Engr. Hasanuzzaman Sumon", "link": "https://stackoverflow.com/users/2578693/engr-hasanuzzaman-sumon"}, "is_accepted": false, "score": 0, "last_activity_date": 1481111656, "creation_date": 1481111656, "answer_id": 41016774, "question_id": 41014445, "link": "https://stackoverflow.com/questions/41014445/allow-creation-of-a-limited-user-only-with-cancancan/41016774#41016774", "title": "Allow creation of a limited user only with CanCanCan", "body": "<p>Use <code>cannot</code> with in <code>admin</code> block like <code>cannot :creat, User, :role_id =&gt; 1 # let 1 is super admin role id</code>. You can get more info about combine ability <a href=\"https://github.com/ryanb/cancan/wiki/Defining-Abilities#combining-abilities\" rel=\"nofollow noreferrer\">at here</a></p>\n"}], "owner": {"reputation": 133, "user_id": 3116554, "user_type": "registered", "accept_rate": 42, "profile_image": "https://graph.facebook.com/100000605101370/picture?type=large", "display_name": "Ghias", "link": "https://stackoverflow.com/users/3116554/ghias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1481111656, "creation_date": 1481104877, "question_id": 41014445, "link": "https://stackoverflow.com/questions/41014445/allow-creation-of-a-limited-user-only-with-cancancan", "title": "Allow creation of a limited user only with CanCanCan", "body": "<p>I want the Admin user to not have the ability to create users with the role of Super Admin but still be able to create other Admins and Regular Users. How do I accomplish this? Here is my Ability.rb:</p>\n\n<pre><code>class Ability\n  include CanCan::Ability\n\n  def initialize(user)\n    if user.super_admin?\n      can :manage, :all\n    elsif user.admin?\n      can :manage, [Article, Comment]\n      can [:destroy, :update], User, :role_id =&gt; 2 # If Admin\n      can [:destroy, :update], User, :role_id =&gt; 3 # If User\n      can :read, User\n      can :create, User\n    elsif user.user_regular?\n      #cannot :read, ActiveAdmin::Page, :name =&gt; \"Dashboard\"\n      #can :manage, :all\n\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1481105111, "post_id": 41013823, "comment_id": 69236308, "body": "This would work for the class Class:)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1481143796, "post_id": 41013823, "comment_id": 69261497, "body": "What is a &quot;self method&quot;?"}, {"owner": {"reputation": 22804, "user_id": 1494454, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8d217ea08ad2ba4271911e960acfe118?s=128&d=identicon&r=PG", "display_name": "totymedli", "link": "https://stackoverflow.com/users/1494454/totymedli"}, "edited": false, "score": 1, "creation_date": 1550916374, "post_id": 41013823, "comment_id": 96454456, "body": "This took me too much time to find, so for future googlers: this is the answer to &quot;Ruby/Rails how to call a static method from a static method.&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 2, "last_activity_date": 1481103298, "creation_date": 1481103298, "answer_id": 41013885, "question_id": 41013823, "link": "https://stackoverflow.com/questions/41013823/how-to-call-another-method-from-a-self-method-with-ruby/41013885#41013885", "title": "How to call another method from a self method with ruby?", "body": "<p>It does not work because <code>method2</code> is not defined for <code>Product</code> object.</p>\n\n<p><code>method2</code> is an instance method, and can be called only on the instance of <code>Product</code> class.</p>\n"}, {"comments": [{"owner": {"reputation": 3865, "user_id": 4540175, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a789c8057fed1368f96c15cfbdba6421?s=128&d=identicon&r=PG&f=1", "display_name": "gates", "link": "https://stackoverflow.com/users/4540175/gates"}, "edited": false, "score": 0, "creation_date": 1481103590, "post_id": 41013898, "comment_id": 69235345, "body": "So class methods are restricted to interacting with other class methods .. what if class methods wants to talk to the private methods? should they also be declared as private def self.bla end ?"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 3865, "user_id": 4540175, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a789c8057fed1368f96c15cfbdba6421?s=128&d=identicon&r=PG&f=1", "display_name": "gates", "link": "https://stackoverflow.com/users/4540175/gates"}, "edited": false, "score": 0, "creation_date": 1481103867, "post_id": 41013898, "comment_id": 69235522, "body": "Yes, and a private self.bla is a class method, not an instance method. But a class method might instanciate an object and call an instance method on it, if it makes sense."}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1481107650, "post_id": 41013898, "comment_id": 69238054, "body": "(1) The receiver of a method call (which is actually a message send, hence the name of the <code>send</code> method) is the object receiving the message, i.e. the object &quot;owning&quot; the method. (2) &quot;Class methods&quot; (which technically are instance methods of the class&#39;s singleton class; Ruby has no actual class methods at all) also have a receiver: the singleton class of the <code>Product</code> class object. In fact, you can only ever call methods on a receiver, even if it&#39;s just the implicit <code>self</code>. This stems from Ruby&#39;s &quot;everything is an object&quot; premise."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1481107729, "post_id": 41013898, "comment_id": 69238101, "body": "You&#39;re right. I did not know how to write this shortly. There are books for these concepts."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1481143652, "post_id": 41013898, "comment_id": 69261420, "body": "&quot;first one is a class method, the latter was an instance method&quot; \u2013 That&#39;s misleading. Yes, we sometimes use the term &quot;class method&quot; in Ruby, when talking to people who already understand Ruby. But the OP clearly doesn&#39;t, so that term should best be avoided. There are no class methods in Ruby. There are only instance methods. <code>method1</code> is an instance method of the singleton class of <code>Product</code>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1481143743, "post_id": 41013898, "comment_id": 69261460, "body": "&quot;Class methods don&#39;t need a receiver (an object who call them)&quot; \u2013 This is doubly wrong. First, the receiver is not the caller, it&#39;s the callee. Second, of course, class methods have a receiver: the class."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1481143777, "post_id": 41013898, "comment_id": 69261483, "body": "@J&#246;rgWMittag would you like to correct my answer? :)"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 11, "last_activity_date": 1550505177, "last_edit_date": 1550505177, "creation_date": 1481103331, "answer_id": 41013898, "question_id": 41013823, "link": "https://stackoverflow.com/questions/41013823/how-to-call-another-method-from-a-self-method-with-ruby/41013898#41013898", "title": "How to call another method from a self method with ruby?", "body": "<pre><code>class Product &lt; ApplicationRecord\n  def self.method1(param1)\n    # Here I want to call method2 with a parameter\n    method2(param2)\n  end\n\n  def self.method2(param2)\n    # Do something\n  end\nend\n</code></pre>\n\n<p>Explanation: first one is a class method, the latter was an instance method. Class methods don't need a receiver (an object who call them), instance methods need it. So, you can't call an instance method from a class method because you don't know if you have a receiver (an instanciated object who call it).</p>\n"}, {"tags": [], "owner": {"reputation": 1903, "user_id": 2578693, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3a7a908dd876ba5168b5ba618ccae256?s=128&d=identicon&r=PG&f=1", "display_name": "Engr. Hasanuzzaman Sumon", "link": "https://stackoverflow.com/users/2578693/engr-hasanuzzaman-sumon"}, "is_accepted": false, "score": 0, "last_activity_date": 1481112393, "creation_date": 1481112393, "answer_id": 41017027, "question_id": 41013823, "link": "https://stackoverflow.com/questions/41013823/how-to-call-another-method-from-a-self-method-with-ruby/41017027#41017027", "title": "How to call another method from a self method with ruby?", "body": "<p>Of course @Ursus and @Andrey Deineko answers are right solution of this problem. Besides that, if anyone want to know how we can call <code>instance</code> method with in <code>class method(though this is not actually class method in ruby)</code> for those <code>self.new.instance_method</code>. </p>\n"}], "owner": {"reputation": 607, "user_id": 6785635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b3f4f269a077d438fb5a9a9297726095?s=128&d=identicon&r=PG&f=1", "display_name": "s_zhang", "link": "https://stackoverflow.com/users/6785635/s-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5900, "favorite_count": 1, "accepted_answer_id": 41013898, "answer_count": 3, "score": 8, "last_activity_date": 1550505177, "creation_date": 1481103112, "last_edit_date": 1481104560, "question_id": 41013823, "link": "https://stackoverflow.com/questions/41013823/how-to-call-another-method-from-a-self-method-with-ruby", "title": "How to call another method from a self method with ruby?", "body": "<pre><code># app/models/product.rb\nclass Product &lt; ApplicationRecord\n  def self.method1(param1)\n    # Here I want to call method2 with a parameter\n    method2(param2)\n  end\n\n  def method2(param2)\n    # Do something\n  end\nend\n</code></pre>\n\n<p>I call method1 from controller. When I run the program. I got an error:</p>\n\n<pre><code>method_missing(at line method2(param2))\n.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activerecord-5.0.0/lib/active_record/relation/batches.rb:59:in `block (2 levels) in find_each\n...\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "timezone"], "comments": [{"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1481102048, "post_id": 41013333, "comment_id": 69234309, "body": "<code>date &gt; number_of_working_days</code> =&gt; <code>0 &gt; number_of_working_days</code>"}], "answers": [{"comments": [{"owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "edited": false, "score": 0, "creation_date": 1481102825, "post_id": 41013461, "comment_id": 69234822, "body": "Indeed the <code>&gt;</code> was in the wrong way ! This way should work. But my console turn for ever and nothing happen as if it were in an infinity loop."}], "tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": true, "score": 0, "last_activity_date": 1481105114, "last_edit_date": 1481105114, "creation_date": 1481102130, "answer_id": 41013461, "question_id": 41013333, "link": "https://stackoverflow.com/questions/41013333/how-to-get-a-future-date-thanks-to-number-of-working-days-in-ruby/41013461#41013461", "title": "How to get a future date thanks to number of working days in ruby?", "body": "<p>With minimum changes it should looks like:</p>\n\n<pre><code>def ending_date(start_date, number_of_working_days)\n  date = 0\n  while date &lt; number_of_working_days\n    start_date += 1\n    unless start_date.saturday? || start_date.sunday?\n      finish = start_date\n      date += 1\n    end\n  end\n  finish\nend\n\n#&gt; ending_date(Date.today, 5)\n#=&gt; #&lt;Date: 2016-12-14 ((2457737j,0s,0n),+0s,2299161j)&gt;\n</code></pre>\n\n<p>But I prefer to write this method like something this:</p>\n\n<pre><code>def ending_date(date, number_of_working_days)\n  result = []\n  while result.size &lt; number_of_working_days\n    date += 1\n    unless [6,0].include? date.wday\n      result &lt;&lt; date\n    end\n  end\n  result \nend\n\n# To take all the working dates\n#&gt; ending_date(Date.today, 5)\n#=&gt; [#&lt;Date: 2016-12-08 ((2457731j,0s,0n),+0s,2299161j)&gt;, #&lt;Date: 2016-12-09 ((2457732j,0s,0n),+0s,2299161j)&gt;, #&lt;Date: 2016-12-12 ((2457735j,0s,0n),+0s,2299161j)&gt;, #&lt;Date: 2016-12-13 ((2457736j,0s,0n),+0s,2299161j)&gt;, #&lt;Date: 2016-12-14 ((2457737j,0s,0n),+0s,2299161j)&gt;]\n\n# To take last working date\n#&gt; ending_date(Date.today, 5).last\n#=&gt; #&lt;Date: 2016-12-14 ((2457737j,0s,0n),+0s,2299161j)&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "edited": false, "score": 0, "creation_date": 1481106001, "post_id": 41013967, "comment_id": 69236912, "body": "According to my code, I just realize that I better do this method in javascript ! :( I&#39;m going to publish your solution in a new question for translating it in js! Feel free to help. Thanks again"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "edited": false, "score": 0, "creation_date": 1481106091, "post_id": 41013967, "comment_id": 69236974, "body": "See my other answer. It should be pretty straightforward to implement it in javascript."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1481104455, "last_edit_date": 1481104455, "creation_date": 1481103542, "answer_id": 41013967, "question_id": 41013333, "link": "https://stackoverflow.com/questions/41013333/how-to-get-a-future-date-thanks-to-number-of-working-days-in-ruby/41013967#41013967", "title": "How to get a future date thanks to number of working days in ruby?", "body": "<p>Enumerator seems to do the job, and it can give you much more information than just a date :</p>\n\n<pre><code>require 'date'\n\ndef future_working_days(start_date = Date.today)\n  date = start_date\n  Enumerator.new do |yielder|\n    loop do\n      date += 1 # NOTE: Should start_date be included?\n      yielder &lt;&lt; date unless date.saturday? || date.sunday?\n    end\n  end\nend\n\ndef ending_date(number_of_working_days, start_date = Date.today)\n  future_working_days(start_date).find.with_index(1) { |_, i| i == number_of_working_days }\nend\n\n# Show the next 10 working days :\nputs future_working_days.take(10).map(&amp;:to_s).join('-&gt;') # 2016-12-08-&gt;2016-12-09-&gt;2016-12-12-&gt;2016-12-13-&gt;2016-12-14-&gt;2016-12-15-&gt;2016-12-16-&gt;2016-12-19-&gt;2016-12-20-&gt;2016-12-21\n\n# Date after 5 working days :\nputs ending_date(5) #=&gt; 2016-12-14\n\n# How many working days until the next Friday the 13th of a leap year\nputs future_working_days.find_index{|date| date.friday? &amp;&amp; date.day == 13 &amp;&amp; Date.leap?(date.year)} #=&gt; 851\n</code></pre>\n\n<p>Notes :</p>\n\n<ul>\n<li>Parameters of <code>ending_date</code> have been switched to allow default date for start_date</li>\n<li><code>future_working_days</code> is an infinite Enumerator. Don't try <code>future_working_days.to_a</code>! <a href=\"http://patshaughnessy.net/2013/4/3/ruby-2-0-works-hard-so-you-can-be-lazy\" rel=\"nofollow noreferrer\">Lazy</a> could be helpful.</li>\n<li>Should today be included in <code>future_working_days</code>?</li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "edited": false, "score": 0, "creation_date": 1481106515, "post_id": 41014837, "comment_id": 69237265, "body": "I prefer this solution, a bit easier to read ! However my start date format is <code>ActiveSupport::TimeWithZone</code> so it doesn&#39;t work, do you know what do I had to change ? I feel very confused with date format, it&#39;s not an easy thing"}, {"owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "edited": false, "score": 0, "creation_date": 1481107537, "post_id": 41014837, "comment_id": 69237981, "body": "Thank you for your help !"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1481107135, "last_edit_date": 1481107135, "creation_date": 1481106029, "answer_id": 41014837, "question_id": 41013333, "link": "https://stackoverflow.com/questions/41013333/how-to-get-a-future-date-thanks-to-number-of-working-days-in-ruby/41014837#41014837", "title": "How to get a future date thanks to number of working days in ruby?", "body": "<p>It's also possible to calculate the <code>ending_date</code> directly, without any loop. Every 5 working days comes a week-end! I wrote the code for a Sunday as a start_date, and modified it with <code>start_date.wday</code> for the other days of the week. Saturday is a special case.</p>\n\n<pre><code>def ending_date(number_of_working_days, start_date = Date.today)\n  if start_date.wday == 6 # Saturday is a special case\n    start_date + number_of_working_days + (number_of_working_days-1)/5*2 + 1\n  else\n    start_date + number_of_working_days + (number_of_working_days-1+start_date.wday)/5*2\n  end\nend\n</code></pre>\n\n<p>I tested it for many <code>start_dates</code> and many <code>number_of_working_days</code>, and it seems to work fine.</p>\n\n<p>I couldn't find a way to remove the if statement, though.</p>\n\n<p>EDIT: If you work with <code>ActiveSupport::TimeWithZone</code> objects, just call <code>to_date</code> before calling <code>ending_date</code> :</p>\n\n<pre><code>time = Time.zone.local(2016, 10, 15, 15, 30, 45)\nputs time.class                   #=&gt; ActiveSupport::TimeWithZone\nputs ending_date(5, time.to_date) #=&gt; 2016-10-21\n</code></pre>\n"}], "owner": {"reputation": 814, "user_id": 5479076, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/ebf84ecaf15f684b53f18b9313cd1325?s=128&d=identicon&r=PG&f=1", "display_name": "Orsay", "link": "https://stackoverflow.com/users/5479076/orsay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 217, "favorite_count": 0, "accepted_answer_id": 41013461, "answer_count": 3, "score": 1, "last_activity_date": 1481107566, "creation_date": 1481101773, "last_edit_date": 1481107566, "question_id": 41013333, "link": "https://stackoverflow.com/questions/41013333/how-to-get-a-future-date-thanks-to-number-of-working-days-in-ruby", "title": "How to get a future date thanks to number of working days in ruby?", "body": "<p>I would like to calculate the ending date from the starting date.\nI have the number of workings days (so without sunday and saturday).\nThis is my function : </p>\n\n<pre><code>def ending_date(start_date, number_of_working_days)\n  date = 0\n  ending_date = start_date\n   while date &gt; number_of_working_days\n    next if ending_date.sunday? || ending_date.saturday?\n     finish = ending_date + 1.day unless date.saturday? or date.sunday?\n     date += 1\n   end\n   finish\nend\n</code></pre>\n\n<p>And I get <code>nil</code>. I don't know why.\nIf somedoby can help me with this please :)</p>\n"}, {"tags": ["ruby", "spotify"], "comments": [{"owner": {"reputation": 4332, "user_id": 1008748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19feZ.jpg?s=128&g=1", "display_name": "Michael Thelin", "link": "https://stackoverflow.com/users/1008748/michael-thelin"}, "edited": false, "score": 0, "creation_date": 1481408399, "post_id": 41013144, "comment_id": 69367927, "body": "Is it possible that you&#39;re accidentally escaping twice - i.e. escaping the <code>%</code>? Are you able to see the exact HTTP request made by the RSpotify client?"}, {"owner": {"reputation": 517, "user_id": 4200859, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/72fe764d26ac6cb9d3a5bbeaa45fc1be?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/4200859/max"}, "reply_to_user": {"reputation": 4332, "user_id": 1008748, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/19feZ.jpg?s=128&g=1", "display_name": "Michael Thelin", "link": "https://stackoverflow.com/users/1008748/michael-thelin"}, "edited": false, "score": 0, "creation_date": 1481408473, "post_id": 41013144, "comment_id": 69367946, "body": "I&#39;ve been trying to read the RSpotify source to see what&#39;s going on... unfortunately the code is a bit confusing (I&#39;m not very knowledgable about some of the ways they&#39;ve structured their code). However, if I don&#39;t escape the userID, it&#39;s showing the URI as completely unescaped.. so the only thing I can think of is if RSpotify uses an incorrect or buggy escape method."}], "owner": {"reputation": 517, "user_id": 4200859, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/72fe764d26ac6cb9d3a5bbeaa45fc1be?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/4200859/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1481101159, "creation_date": 1481101159, "question_id": 41013144, "link": "https://stackoverflow.com/questions/41013144/username-formatting-issue-when-using-spotify-api-rspotify-gem", "title": "Username formatting issue when using Spotify API + RSpotify gem", "body": "<p>I'm running into a strange issue with the Spotify API, specifically the Playlist search (using <code>RSpotify::Playlist.find()</code>). I'm providing a playlist ID and the owner's ID, but in some cases the owner's username has characters that require escaping.</p>\n\n<p>This user for example: <a href=\"https://open.spotify.com/user/andy%3F%21\" rel=\"nofollow noreferrer\">https://open.spotify.com/user/andy%3F%21</a></p>\n\n<p>Their username is <code>andy?!</code>, which, when escaped, turns to <code>andy%3F%21</code>. However, when I try and retrieve one his playlists using the Playlist search, I'm getting a 404 error, <code>Invalid username</code>. I've triple checked, and I'm definitely providing the escaped character version of the username (using <code>CGI.escape</code>).</p>\n\n<p>I also tried going to the Spotify Web API Console and <code>andy%3F%21</code> works correctly there. Is this some bug with the RSpotify gem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "is_accepted": true, "score": 2, "last_activity_date": 1481101838, "last_edit_date": 1481101838, "creation_date": 1481101284, "answer_id": 41013189, "question_id": 41013032, "link": "https://stackoverflow.com/questions/41013032/passing-values-from-one-model-to-anothers-form/41013189#41013189", "title": "Passing values from one model to another&#39;s form", "body": "<p>Pass service id to the <code>new_booking_path</code> :</p>\n\n<pre><code>&lt;%= link_to \"Book Now\", new_booking_path(service_id: @service.id) %&gt;\n</code></pre>\n\n<p>within your <code>new</code> action in <code>BookingsController</code>, get the service:</p>\n\n<pre><code>def new\n @service = Service.find_by_id(params[:service_id])\n #your code goes here\nend\n</code></pre>\n\n<p>Then you can do <code>&lt;%= @service.title %&gt;</code> in your form view page.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6659397"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 41013189, "answer_count": 1, "score": 0, "last_activity_date": 1481101838, "creation_date": 1481100810, "last_edit_date": 1481101111, "question_id": 41013032, "link": "https://stackoverflow.com/questions/41013032/passing-values-from-one-model-to-anothers-form", "title": "Passing values from one model to another&#39;s form", "body": "<p>I have three models, <code>User</code>, <code>Service</code> and <code>Booking</code>. A user can book a service and this is done via a form under the <code>Booking</code> model.</p>\n\n<p>I have a page for each service available for booking, with a link that says \"Book Now\" and redirects to the <code>new_bookings_path</code> so that a user can make a booking.</p>\n\n<p>I want when the \"Book Now\" link is clicked, to be able to transfer the values of the service that are stored as records in the database (title, price etc), to the new booking form. So when a user is filling out a booking form, the are able to see which service they are actually booking.</p>\n\n<p>This is my <code>_form.htm.erb</code> for the booking:</p>\n\n<pre><code>&lt;%= simple_form_for (@booking) do |f| %&gt;\n    Booking Date: &lt;%= f.datetime_select :date %&gt;\n    &lt;br&gt;\n    Time start&lt;%= f.time_select :timestart %&gt;\n    &lt;br&gt;\n    Time end &lt;%= f.time_select :timeend %&gt;\n    &lt;%= f.input :address, label: \"Address\" %&gt;\n    &lt;%= f.input :postcode, label: \"Postcode\" %&gt;\n    &lt;%= f.input :suburb, label: \"Suburb\" %&gt;\n    &lt;br&gt;\n    &lt;br&gt;\n\n    &lt;br&gt;&lt;br&gt;\n    &lt;%= f.button :submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>What I want to be able to do is place something like</p>\n\n<pre><code>&lt;%= @service.title %&gt; \n</code></pre>\n\n<p>at the bottom of the booking, although I am not sure how to access the title of the service that the user has clicked \"Book Now\" on. </p>\n\n<p>Is it possible to get values of the service, and somehow access them under the bookings controller/_form when the \"Book Now\" link is clicked?</p>\n\n<p>This is the \"Book Now\" Link:</p>\n\n<pre><code>&lt;%= link_to \"Book Now\", new_booking_path %&gt;\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 14135, "user_id": 427146, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PuoOb.jpg?s=128&g=1", "display_name": "sabithpocker", "link": "https://stackoverflow.com/users/427146/sabithpocker"}, "edited": false, "score": 2, "creation_date": 1481097129, "post_id": 41011962, "comment_id": 69231510, "body": "The javascript required can be summarised as: <code>change</code> event handler on checkbox, <code>form.submit()</code> and <code>$(&#39;input[type=checkbox]&#39;).is(&#39;:checked&#39;).length</code>"}, {"owner": {"reputation": 14135, "user_id": 427146, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/PuoOb.jpg?s=128&g=1", "display_name": "sabithpocker", "link": "https://stackoverflow.com/users/427146/sabithpocker"}, "edited": false, "score": 1, "creation_date": 1481097411, "post_id": 41011962, "comment_id": 69231637, "body": "IMHO the UX is not that great as I am not left with the chance of reviewing my choices and may be change them before submitting. But yeah I have no idea of what your goals are!"}, {"owner": {"reputation": 71114, "user_id": 1059101, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7Mdb.png?s=128&g=1", "display_name": "Jai", "link": "https://stackoverflow.com/users/1059101/jai"}, "edited": false, "score": 0, "creation_date": 1481097428, "post_id": 41011962, "comment_id": 69231646, "body": "Yes! bind an event of <code>change</code> get the <code>checked</code> checkboxes length and if gets to 5 then explicitly submit the form with <code>form.submit()</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1481098117, "post_id": 41012187, "comment_id": 69231927, "body": "Thank you! I&#39;m checking the 5 boxes, but then nothing submits. I also tried by changing <code>form</code> to <code>.home-panels</code> and put the div class outside <code>&lt;% @inspirations.each do |inspiration| </code>"}], "tags": [], "owner": {"reputation": 746, "user_id": 3671880, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/22a868e9c1a57801061872545dbec969?s=128&d=identicon&r=PG&f=1", "display_name": "rosuandreimihai", "link": "https://stackoverflow.com/users/3671880/rosuandreimihai"}, "is_accepted": false, "score": 1, "last_activity_date": 1481097898, "last_edit_date": 1481097898, "creation_date": 1481097736, "answer_id": 41012187, "question_id": 41011962, "link": "https://stackoverflow.com/questions/41011962/how-to-automatically-submit-all-forms-with-checked-check-box/41012187#41012187", "title": "How to automatically submit all forms with checked check_box?", "body": "<p>Maybe you could try something like this:</p>\n\n<pre><code>&lt;script&gt;\n  $(document).on('change', 'input[type=checkbox]', function() {\n    if ($('input[type=checkbox]').is(':checked').length == 5) {\n       $('form').submit(); // form should be selected as DOM element\n    }\n  })\n&lt;/script&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1481099540, "post_id": 41012300, "comment_id": 69232694, "body": "Okay it submits so that&#39;s a big step, but it only saves the first checked inspiration, not the other 4 of the pack."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1481101340, "post_id": 41012300, "comment_id": 69233838, "body": "Thank you! Been trying to figure out how to fix this error: <code>ActionController::ParameterMissing (param is missing or the value is empty: inspiration):</code>"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1481101383, "post_id": 41012300, "comment_id": 69233872, "body": "This is what my params looks like: <code>def inspiration_params     params.require(:inspiration).permit(:name, :image, :conceal, :tag_list, :content, :commentable, :comment, :like, :image_file_name, :image_content_type, :image_file_size, :image_updated_at)   end</code>"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1481101553, "post_id": 41012300, "comment_id": 69233978, "body": "I was also getting a <code>size</code> is <code>nil</code> answer so I put above it <code>if params[:inspiration_ids]</code> which got rid of that error. I also put your chunk of code in the controller method <code>def fast_track_one</code>."}, {"owner": {"reputation": 1205, "user_id": 6742278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2UIeh.jpg?s=128&g=1", "display_name": "codyeatworld", "link": "https://stackoverflow.com/users/6742278/codyeatworld"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1481101748, "post_id": 41012300, "comment_id": 69234106, "body": "I&#39;m guessing the error was from passing <code>inspiration</code> to <code>create</code>, trying using the <code>&lt;&lt;</code> operator instead of create. I&#39;ve updated the controller portion of the answer."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1481102177, "post_id": 41012300, "comment_id": 69234399, "body": "Sorry I didn&#39;t realize this would be so tricky. Still getting the error <code>ActionController::ParameterMissing (param is missing or the value is empty: inspiration):</code> You sure it&#39;s <code>inspiration_ids</code> and not <code>id</code> or <code>ids</code> or <code>inspiration_id</code>? idk"}, {"owner": {"reputation": 1205, "user_id": 6742278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2UIeh.jpg?s=128&g=1", "display_name": "codyeatworld", "link": "https://stackoverflow.com/users/6742278/codyeatworld"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1481102282, "post_id": 41012300, "comment_id": 69234462, "body": "Please post your current controller/view code. :) @AnthonyGalli.com"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1481102553, "post_id": 41012300, "comment_id": 69234655, "body": "Posted the whole enchilada"}, {"owner": {"reputation": 1205, "user_id": 6742278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2UIeh.jpg?s=128&g=1", "display_name": "codyeatworld", "link": "https://stackoverflow.com/users/6742278/codyeatworld"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1481102864, "post_id": 41012300, "comment_id": 69234850, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/129987/discussion-between-codyeatworld-and-anthonygalli-com\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 1205, "user_id": 6742278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2UIeh.jpg?s=128&g=1", "display_name": "codyeatworld", "link": "https://stackoverflow.com/users/6742278/codyeatworld"}, "is_accepted": true, "score": 0, "last_activity_date": 1481101595, "last_edit_date": 1481101595, "creation_date": 1481098180, "answer_id": 41012300, "question_id": 41011962, "link": "https://stackoverflow.com/questions/41011962/how-to-automatically-submit-all-forms-with-checked-check-box/41012300#41012300", "title": "How to automatically submit all forms with checked check_box?", "body": "<p>Use a rails form helper for a check box tag.</p>\n\n<pre><code>&lt;%= simple_form_for(current_user.inspirations.build) do |f| %&gt;\n  &lt;% @inspirations.each do |inspiration| \n    &lt;%= check_box_tag 'inspiration_ids[]', inspiration.id %&gt;\n    &lt;%= inspiration.name %&gt;\n  &lt;% end %&gt;\n  &lt;% f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Access in the controller with:</p>\n\n<pre><code>if params[:inspiration_ids].present? &amp;&amp; params[:inspiration_ids].size == 5\n  @inspirations = Inspiration.where(id: params[:inspiration_ids])\n  @inspirations.each do |inspiration|\n    current_user.inspirations &lt;&lt; inspiration\n  end\nend\n</code></pre>\n\n<p>Javascript:</p>\n\n<pre><code>$(document).on('click', 'input[name=\"inspiration_ids[]\"]', function() {\n  var count = $('input[name=\"inspiration_ids[]\"]:checked').length;\n  if (count === 5) {\n    $('#new_inspiration').trigger('submit.rails');\n  }\n});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1481099123, "post_id": 41012456, "comment_id": 69232446, "body": "I copy and pasted your code into mine, but nothing happened when I checked the 5 checkboxes. Thanks for the thoughtful answer tho :)"}, {"owner": {"reputation": 1414, "user_id": 3458314, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/0gRzO.jpg?s=128&g=1", "display_name": "hgsongra", "link": "https://stackoverflow.com/users/3458314/hgsongra"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1481099260, "post_id": 41012456, "comment_id": 69232520, "body": "debug the on change event of checkbox and verify that you are able to get the DOM&#39;s form element for submitting the form."}, {"owner": {"reputation": 1414, "user_id": 3458314, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/0gRzO.jpg?s=128&g=1", "display_name": "hgsongra", "link": "https://stackoverflow.com/users/3458314/hgsongra"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1481099974, "post_id": 41012456, "comment_id": 69232960, "body": "Nothing happened means what? Are you not able to submit the <code>form</code> or not getting the <code>values</code> of <code>checkbox</code> after submitting the <code>form</code>?"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1481099999, "post_id": 41012456, "comment_id": 69232975, "body": "form is not submitting."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1481100043, "post_id": 41012456, "comment_id": 69233000, "body": "I am able to submit with codyeatworld&#39;s answer, but only 1 of the 5 is saving to the database."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1481100134, "post_id": 41012456, "comment_id": 69233065, "body": "Yes sir. And I used it with @codyeatworld&#39;s version too <code>$(document).on(&#39;click&#39;, &#39;input[name=&quot;inspiration[check]&quot;]&#39;, function() {</code>"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1481100152, "post_id": 41012456, "comment_id": 69233084, "body": "Btw I meant to say codyeatworld&#39;s answer not rosuandreimihai&#39;s answer"}], "tags": [], "owner": {"reputation": 1414, "user_id": 3458314, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/0gRzO.jpg?s=128&g=1", "display_name": "hgsongra", "link": "https://stackoverflow.com/users/3458314/hgsongra"}, "is_accepted": false, "score": 0, "last_activity_date": 1481099130, "last_edit_date": 1481099130, "creation_date": 1481098863, "answer_id": 41012456, "question_id": 41011962, "link": "https://stackoverflow.com/questions/41011962/how-to-automatically-submit-all-forms-with-checked-check-box/41012456#41012456", "title": "How to automatically submit all forms with checked check_box?", "body": "<p>Your actual code was as below:</p>\n\n<pre><code>&lt;% @inspirations.each do |inspiration| # this line should be inside simple_form_for tag\n  &lt;%= simple_form_for(current_user.inspirations.build) do |f| %&gt;\n    &lt;%= f.check_box :check %&gt;\n    &lt;%= inspiration.name %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>which generate form multiple times, instead of your code replace below code which generates only one form with multiple checkboxes.</p>\n\n<p>So here is the final code with JS. Hope this will solve your issue.</p>\n\n<pre><code>&lt;%= simple_form_for(current_user.inspirations.build) do |f| %&gt;\n    &lt;% @inspirations.each do |inspiration| \n        &lt;%= f.check_box :check %&gt;\n        &lt;%= inspiration.name %&gt;\n    &lt;% end %&gt;\n&lt;% end %&gt;\n\n&lt;script&gt;\n  $(document).on('change', 'input[type=checkbox]', function() {\n    if ($('input[type=checkbox]').is(':checked').length == 5) {\n       $('form').submit(); // form should be selected as DOM element or form id or form class like: $('.fomaClass') or $('#formId')\n    }\n  });\n&lt;/script&gt;\n</code></pre>\n\n<p>Refer <a href=\"http://apidock.com/rails/ActionView/Helpers/FormHelper/check_box\" rel=\"nofollow noreferrer\">check_box API doc</a> form set value in a checkbox, So when you submit the form you will get the value.</p>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 347, "favorite_count": 0, "accepted_answer_id": 41012300, "answer_count": 3, "score": 0, "last_activity_date": 1481102525, "creation_date": 1481096923, "last_edit_date": 1481102525, "question_id": 41011962, "link": "https://stackoverflow.com/questions/41011962/how-to-automatically-submit-all-forms-with-checked-check-box", "title": "How to automatically submit all forms with checked check_box?", "body": "<p>A user is given the command \"Choose 5 Inspirations\"</p>\n\n<p>A list of 20+ <code>inspirations</code> are shown.</p>\n\n<p>There is a <code>check_box</code> on the top right hand corner of each inspirational panel.</p>\n\n<pre><code>&lt;% @inspirations.each do |inspiration| \n  &lt;%= simple_form_for(current_user.inspirations.build) do |f| %&gt;\n    &lt;%= f.check_box :check %&gt;\n    &lt;%= inspiration.name %&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n\n&lt;script&gt;\n  # How to make script where once a 5th check_box is checked then submit all forms with :check automatically?\n  # Below is work in progress...\n  $(function () {\n    $('input[type=checkbox]').is(':checked').length;\n    form.submit();\n  })\n&lt;/script&gt;\n</code></pre>\n\n<p>What javascript is needed to make this work?</p>\n\n<h2>UPDATE</h2>\n\n<p><strong>fast_track_one.html.erb</strong></p>\n\n<pre><code>&lt;%= simple_form_for(current_user.inspirations.build) do |f| %&gt;\n  &lt;% @inspirations.each do |inspiration| %&gt;\n    &lt;%= check_box_tag 'inspiration_ids[]', inspiration.id %&gt;\n    &lt;%= inspiration.name %&gt;\n  &lt;% end %&gt;\n  &lt;% f.submit %&gt;\n&lt;% end %&gt;\n\n&lt;script&gt;\n    $(document).on('click', 'input[name=\"inspiration_ids[]\"]', function() {\n      var count = $('input[name=\"inspiration_ids[]\"]:checked').length;\n      if (count === 5) {\n        $('#new_inspiration').trigger('submit.rails');\n      }\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p><strong>inspirations_controller.rb</strong></p>\n\n<pre><code>class InspirationsController &lt; ApplicationController\n  respond_to :html, :json\n  before_action :set_inspiration, only: [:show, :like]\n  before_action :correct_user, only: [:edit, :update, :destroy]\n\n  def fast_track_one\n    @suggestions_user = User.find(1)\n    @inspirations = @suggestions_user.inspirations\n    if params[:inspiration_ids].present? &amp;&amp; params[:inspiration_ids].size == 5\n      @inspirations = Inspiration.where(id: params[:inspiration_ids])\n      @inspirations.each do |inspiration|\n        current_user.inspirations &lt;&lt; inspiration\n      end\n    end\n  end\n\n  def index\n    if params[:tag]\n      @inspirations = Inspiration.tagged_with(params[:tag])\n    else\n      @inspirations = current_user.inspirations.order(\"created_at DESC\") if current_user.inspirations.present?\n    end\n  end\n\n  def show\n    @commentable = @inspiration\n    @comments = @commentable.comments\n    @comment = Comment.new\n    @notable = @inspiration\n    @notes = @notable.notes\n    @note = Note.new\n    if current_user\n      @correct_user = current_user.inspirations.find_by(id: params[:id])\n    else\n      @correct_user = nil\n    end\n  end\n\n  def new\n    @suggestions_user = User.find(21) #1 in Development\n    @inspirations = @suggestions_user.inspirations.top_6\n    @maximum_length = Inspiration.validators_on( :name ).first.options[:maximum]\n    existing_inspiration = Inspiration.find_by_id params[:inspiration_id]\n    if existing_inspiration\n      @inspiration = existing_inspiration.dup\n    elsif params[:inspiration].try(:[], :name)\n      @inspiration = Inspiration.new(inspiration_params) \n    else\n      @inspiration = current_user.inspirations.build\n    end\n    respond_modal_with @inspiration\n  end\n\n  def edit\n    @suggestions_user = User.find(21)\n    @maximum_length = Inspiration.validators_on( :name ).first.options[:maximum]\n    @inspirations = @suggestions_user.inspirations.order(\"created_at DESC\")\n    existing_inspiration = Inspiration.find_by_id params[:inspiration_id]\n    if existing_inspiration\n      @inspiration = existing_inspiration.dup\n      @inspiration.image_file_name = existing_inspiration.image_file_name\n    end\n    respond_modal_with @inspiration\n  end\n\n  def create\n    #@suggestions_user = User.find(21)\n    #@inspirations = @suggestions_user.inspirations.order(\"created_at DESC\")\n    if current_user == nil\n      # If there is no user, store the lifetime values to the session.\n      session[:inspiration_name] = inspiration_params[:name]\n      session[:inspiration_image] = inspiration_params[:image]\n      redirect_to signup_path\n    else\n      #@inspiration.image_remote_url = params[:inspiration_image]\n      @inspiration = current_user.inspirations.build(inspiration_params)\n      if @inspiration.conceal == true\n        @inspiration.save\n        if current_user.inspirations.count &lt; 5\n          redirect_to root_url\n        else\n          respond_modal_with @inspiration\n        end\n        flash[:info] = 'INSPIRATION SECRETLY SAVED. YOUR INSPIRATIONS ARE RANDOMIZED ON YOUR HOME PAGE TO GIVE YOU A FRESH SPARK OF INSPIRATION - EVERY TIME!'\n      elsif\n        @inspiration.save\n        track_activity @inspiration\n        if current_user.inspirations.count &lt; 5\n          redirect_to root_url\n        else\n          respond_modal_with @inspiration\n        end\n        flash[:info] = 'INSPIRATION SAVED. YOUR INSPIRATIONS ARE RANDOMIZED ON YOUR HOME PAGE TO GIVE YOU A FRESH SPARK OF INSPIRATION - EVERY TIME!'\n      else\n        respond_modal_with @inspiration\n      end\n    end\n  end\n\n  def update\n    if @inspiration.update(inspiration_params)\n      respond_modal_with @inspiration, location: root_path\n      flash[:info] = 'INSPIRATION UPDATED'\n    else\n      respond_modal_with @inspiration\n    end\n  end\n\n  def destroy\n    @inspiration.destroy\n    redirect_to root_path\n    flash[:alert] = 'INSPIRATION DELETED'\n  end\n\n  def like\n    if current_user\n      @inspiration_like = current_user.inspiration_likes.build(inspiration: @inspiration)\n      if @inspiration_like.save\n        @inspiration.increment!(:likes)\n        flash[:info] = 'THANKS FOR LIKING!'\n      else\n        flash[:alert] = 'TWO MANY LIKES!'\n      end  \n        redirect_to(:back)\n    else \n      redirect_to root_path\n      flash[:alert] = \"PLEASE SIGN IN FIRST\"\n    end\n  end\n\nprivate\n\n  def set_inspiration\n    @inspiration = Inspiration.find(params[:id])\n    #redirect_to root_url unless @inspiration.user_id == current_user.id or @inspiration.conceal == false\n  end\n\n  def correct_user\n    @inspiration = current_user.inspirations.find_by(id: params[:id])\n    redirect_to root_url, notice:  \"NOT AUTHORIZED TO INSPIRATION\" if @inspiration.nil?\n  end\n\n  def inspiration_params\n    params.require(:inspiration).permit(:name, :image, :conceal, :tag_list, :content, :commentable, :comment, :like, :check, :image_file_name, :image_content_type, :image_file_size, :image_updated_at)\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "sinatra"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 2, "creation_date": 1481095413, "post_id": 41011541, "comment_id": 69230660, "body": "In what line is that error raised? Can you please post the full stack trace?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481108271, "post_id": 41011541, "comment_id": 69238527, "body": "+1, please show the complete error log. Is the first script you show called <code>Names.rb</code>? Ruby filenames are usually written in lowercase. <code>require &#39;.&#47;Names&#39;</code> probably should be the last require, after &#39;rubygems&#39; and &#39;data_mapper&#39;."}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1481141982, "post_id": 41011541, "comment_id": 69260508, "body": "what is shown when you <code>p params</code> just before <code>my_data = Names.new params</code>"}], "owner": {"reputation": 1209, "user_id": 1398834, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/01306631daad680668f9dfc75d97824c?s=128&d=identicon&r=PG", "display_name": "FlameDra", "link": "https://stackoverflow.com/users/1398834/flamedra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1481095256, "creation_date": 1481095256, "question_id": 41011541, "link": "https://stackoverflow.com/questions/41011541/getting-a-nomethoderror-when-trying-to-write-to-sqlite-database", "title": "Getting a NoMethodError when trying to write to SQLite database", "body": "<p>I'm working with Sinatra to create a method to get data from a line separated text file and store them in a SQLite database. I'm using DataMapper to create my class, which looks as follows:</p>\n\n<pre><code>require 'dm-core'\nrequire 'dm-migrations'\n\n\nDataMapper.setup(:default, \"sqlite3://#{Dir.pwd}/development.db\")\n\nclass Names\n  include DataMapper::Resource\n  property :id, Serial\n  property :name, String\n  property :value1, Integer\n  property :value2, Integer\n  property :value3, Integer\n  property :value4, Integer\n  property :value5, Integer\n  property :value6, Integer\n  property :value7, Integer\n  property :value8, Integer\n  property :value9, Integer\n  property :value10, Integer\n  property :value11, Integer\nend\n\nDataMapper.finalize\nDataMapper.auto_upgrade!\n</code></pre>\n\n<p>In my app.rb I am running the following code:</p>\n\n<pre><code>require 'sinatra'\nrequire './Names'\nrequire 'rubygems'\nrequire 'data_mapper'\n # persist the resource\n\nget '/' do\n  File.foreach(\"names-data.txt\").each do |line|\n    name, *values = line.split\n    params = {:name =&gt; name}\n    values.each_with_index do |value, i|\n      params[:\"value#{i+1}\"] = value\n    end\n    my_data = Names.new params\n    my_data.save\n  end\nend\n</code></pre>\n\n<p>The text files are in the following format:</p>\n\n<pre><code>Cat 3 24 2 2 4 6 4 7 6 0 0\nDog 18 0 8 2 42 6 6 4 5 8 0 \nMouse 8 1 2 2 4 6 4 7 6 0 0\nRabbit 8 10 8 26 46 2 6 7 6 10 0\n</code></pre>\n\n<p>When I run my code, it creates a database with the proper columns, but does not populate the rows. Instead, it gives me the following error:</p>\n\n<blockquote>\n  <p>NoMethodError at / undefined method `validators' for Names:Class Did\n  you mean? validatable?</p>\n</blockquote>\n\n<p>What does it mean and how do I fix it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "slack-api"], "comments": [{"owner": {"reputation": 4137, "user_id": 2162900, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/40406f662c0f784c9252e1538a1f494c?s=128&d=identicon&r=PG", "display_name": "Wilhelm Klopp", "link": "https://stackoverflow.com/users/2162900/wilhelm-klopp"}, "edited": false, "score": 0, "creation_date": 1481150366, "post_id": 41011332, "comment_id": 69264784, "body": "The syntax is <code>slack:&#47;&#47;user?team={TEAM_ID}&amp;id={USER_ID}</code>, but you still need to provide an id as detailed <a href=\"https://api.slack.com/docs/deep-linking\" rel=\"nofollow noreferrer\">here</a>."}], "answers": [{"tags": [], "owner": {"reputation": 596, "user_id": 5048945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iG5i7.png?s=128&g=1", "display_name": "mmike", "link": "https://stackoverflow.com/users/5048945/mmike"}, "is_accepted": true, "score": 2, "last_activity_date": 1481544745, "creation_date": 1481544745, "answer_id": 41100676, "question_id": 41011332, "link": "https://stackoverflow.com/questions/41011332/how-to-start-slack-chat-with-user-by-channel/41100676#41100676", "title": "How to start slack chat with user by channel", "body": "<p>So, after tons of searching I founded the solution for this case:</p>\n\n<pre><code>slack://user?team=#{TEAM_ID}&amp;id=#{user.slack_id}\n</code></pre>\n\n<p>For this case I got user's id's from Slack...</p>\n"}], "owner": {"reputation": 596, "user_id": 5048945, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iG5i7.png?s=128&g=1", "display_name": "mmike", "link": "https://stackoverflow.com/users/5048945/mmike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 41100676, "answer_count": 1, "score": 1, "last_activity_date": 1481544745, "creation_date": 1481094361, "last_edit_date": 1481095773, "question_id": 41011332, "link": "https://stackoverflow.com/questions/41011332/how-to-start-slack-chat-with-user-by-channel", "title": "How to start slack chat with user by channel", "body": "<p>I know that we have link to chat with user like this: </p>\n\n<pre><code>slack://channel?id=&lt;CHANNEL-ID&gt;&amp;team=&lt;TEAM-ID&gt;\n</code></pre>\n\n<p>But I have just user's channel like <code>@mmike</code> and no <code>ID</code> of user in Slack.</p>\n\n<p>How to write link with <code>@channel</code> of user?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "edited": false, "score": 0, "creation_date": 1572223586, "post_id": 41010630, "comment_id": 103483354, "body": "Thank you for this. Turns out with <code>shoulda-matchers</code> 3+, they scoped the matchers to their type of specs. So Controller specs would get the Controller matchers and not the Model matcher, etc. <code>respond_with</code> is a Controller matcher. So if you are running an assertion outside of the Controller specs then it will not be available to you and you should use <code>have_http_status</code> instead. Again, thanks!"}], "tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": true, "score": 3, "last_activity_date": 1578277435, "last_edit_date": 1578277435, "creation_date": 1481091322, "answer_id": 41010630, "question_id": 41010610, "link": "https://stackoverflow.com/questions/41010610/rspec-tests-failing-with-undefined-method-respond-with/41010630#41010630", "title": "RSpec tests failing with undefined method `respond_with&#39;", "body": "<p>As mentioned <a href=\"https://www.relishapp.com/rspec/rspec-rails/docs/controller-specs\" rel=\"nofollow noreferrer\">here</a>, instead of:</p>\n\n<pre><code>it { should respond_with 422 }\n</code></pre>\n\n<p>Try this:</p>\n\n<pre><code>it { expect(response).to have_http_status(422) }\n</code></pre>\n"}], "owner": {"reputation": 1043, "user_id": 6476080, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b82fc060e266edfb5c9695c9f4202b4d?s=128&d=identicon&r=PG&f=1", "display_name": "alpaca", "link": "https://stackoverflow.com/users/6476080/alpaca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "accepted_answer_id": 41010630, "answer_count": 1, "score": 2, "last_activity_date": 1578277435, "creation_date": 1481091235, "last_edit_date": 1495542273, "question_id": 41010610, "link": "https://stackoverflow.com/questions/41010610/rspec-tests-failing-with-undefined-method-respond-with", "title": "RSpec tests failing with undefined method `respond_with&#39;", "body": "<p>I'm working on a <a href=\"http://apionrails.icalialabs.com/book/chapter_three\" rel=\"nofollow noreferrer\">Rails API Tutorial</a> and facing an error. Whenever I run my tests, I get</p>\n\n<pre><code>  1) Api::V1::UsersController PUT/PATCH #update when is not created\n     Failure/Error: it { should respond_with 422 }\n\n     NoMethodError:\n       undefined method `respond_with' for #&lt;RSpec::ExampleGroups::ApiV1UsersController::PUTPATCH\nUpdate::WhenIsNotCreated:0x007f860e070eb8&gt;\n       Did you mean?  respond_to\n</code></pre>\n\n<p>I found two other posts (<a href=\"https://stackoverflow.com/questions/39030916/rspec-controller-test-failing-with-rails-api-undefined-method-helpers\">this</a> and <a href=\"https://stackoverflow.com/questions/38647346/rspec-undefined-method-helpers-for-actiondispatch-routing\">this</a>) that are pointing to a very similar problem, but both of them are not solved. Does anyone have a solution to this? Thanks!</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "ruby-on-rails-5", "google-search-api"], "comments": [{"owner": {"reputation": 380, "user_id": 4781518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jtiKY.jpg?s=128&g=1", "display_name": "ydaniju", "link": "https://stackoverflow.com/users/4781518/ydaniju"}, "edited": false, "score": 0, "creation_date": 1481090574, "post_id": 41010259, "comment_id": 69228616, "body": "What result do you expect? It seems to me that the results are just fine."}, {"owner": {"reputation": 271, "user_id": 6929856, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b914dd226ff7b648e0820d82dcd6a02e?s=128&d=identicon&r=PG&f=1", "display_name": "ankur", "link": "https://stackoverflow.com/users/6929856/ankur"}, "reply_to_user": {"reputation": 380, "user_id": 4781518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jtiKY.jpg?s=128&g=1", "display_name": "ydaniju", "link": "https://stackoverflow.com/users/4781518/ydaniju"}, "edited": false, "score": 0, "creation_date": 1481090667, "post_id": 41010259, "comment_id": 69228659, "body": "No results are not fine it is showing me wrong result let me update the question and show you what actually  google is giving"}, {"owner": {"reputation": 271, "user_id": 6929856, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b914dd226ff7b648e0820d82dcd6a02e?s=128&d=identicon&r=PG&f=1", "display_name": "ankur", "link": "https://stackoverflow.com/users/6929856/ankur"}, "reply_to_user": {"reputation": 380, "user_id": 4781518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jtiKY.jpg?s=128&g=1", "display_name": "ydaniju", "link": "https://stackoverflow.com/users/4781518/ydaniju"}, "edited": false, "score": 0, "creation_date": 1481090931, "post_id": 41010259, "comment_id": 69228781, "body": "I have updated my questions .I have shown what google is giving.I need those results but unable to do ."}, {"owner": {"reputation": 380, "user_id": 4781518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jtiKY.jpg?s=128&g=1", "display_name": "ydaniju", "link": "https://stackoverflow.com/users/4781518/ydaniju"}, "edited": false, "score": 0, "creation_date": 1481091442, "post_id": 41010259, "comment_id": 69228978, "body": "So you want to display places? If yes, try <a href=\"https://developers.google.com/places/web-service/search\" rel=\"nofollow noreferrer\">Google places</a> and <a href=\"https://github.com/qpowell/google_places\" rel=\"nofollow noreferrer\">google places wrapper</a>"}], "owner": {"reputation": 271, "user_id": 6929856, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b914dd226ff7b648e0820d82dcd6a02e?s=128&d=identicon&r=PG&f=1", "display_name": "ankur", "link": "https://stackoverflow.com/users/6929856/ankur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1481090876, "creation_date": 1481089656, "last_edit_date": 1481090876, "question_id": 41010259, "link": "https://stackoverflow.com/questions/41010259/integrate-google-search", "title": "Integrate google search", "body": "<p>I am trying to integrate google search results with my rails application but unable to get proper response. I am following this link </p>\n\n<pre><code>https://github.com/wiseleyb/google_custom_search_api\n</code></pre>\n\n<p>Here is my code </p>\n\n<pre><code>class UsersController &lt; ApplicationController\n\n\n  def index\n      results = GoogleCustomSearchApi.search(\"restaurant near sector 2 noida\")\n\n        results[\"items\"].each do |item|\n            puts item[\"title\"], item[\"link\"]\n        end\n  end\nend\n</code></pre>\n\n<p>The response which I am getting is this </p>\n\n<pre><code>Youth Thrash Restaurant Owner In Noida | Full Video - YouTube\nhttps://www.youtube.com/watch?v=4PSKUacsmnY\nKarim's Hotel Restaurant - Delhi - YouTube\nhttps://www.youtube.com/watch?v=AKqOlthRO2w\nBikanervala Bliss Fine Dine Restaurant at Noida Sec-18 - YouTube\nhttps://www.youtube.com/watch?v=s9J4R-sC3-w\nTop 5 | Fine Dining Restaurants In Noida - YouTube\nhttps://www.youtube.com/watch?v=DLXno_bYhRY\nDev's Bar &amp; Restaurant, Sector-62, Noida - YouTube\nhttps://www.youtube.com/watch?v=4KZ2pz_azFA\nNoida Kids- Sector 38 McDonalds - YouTube\nhttps://www.youtube.com/watch?v=L-JCZF1FkCc\nReview of Theos, Noida | Bakery &amp; Cake Shops Restaurants- Italian ...\nhttps://www.youtube.com/watch?v=G1LFabXPeks\nBistro 37, Noida | Coffee Shops/Cafes /Restaurants- Continental ...\nhttps://www.youtube.com/watch?v=7pVstxQ0EvQ\nReview of Desi Vibes, Noida | Restaurants- North Indian ...\nhttps://www.youtube.com/watch?v=ZRwJPuv8vC4\nsector 62 noida\nhttps://www.google.com/mymaps/viewer?mid=1Y_e1x5df5tCuGjKOCRzx3bXBv9w&amp;hl=en\n</code></pre>\n\n<p>Which is giving me wrong result .So there any way i can integrate google search which can give me proper answers </p>\n\n<p>I should get these results as showing in google <a href=\"https://i.stack.imgur.com/3fist.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/3fist.png\" alt=\"google results\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1481088837, "post_id": 41010056, "comment_id": 69227972, "body": "You can trigger an <code>ajax</code> call upon <code>keyup</code> to check the <code>name</code> or <code>email</code>. If true, you can display an error immediately."}], "answers": [{"comments": [{"owner": {"reputation": 587, "user_id": 1473641, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2e1f431cce8a104400fc6ef5f3da497a?s=128&d=identicon&r=PG", "display_name": "Prox", "link": "https://stackoverflow.com/users/1473641/prox"}, "edited": false, "score": 0, "creation_date": 1481089175, "post_id": 41010101, "comment_id": 69228100, "body": "How exactly do I add that?  $ rails g migration add_validates_to_user validates :email, uniqueness: true        Then run rake db:migrate?"}, {"owner": {"reputation": 380, "user_id": 4781518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jtiKY.jpg?s=128&g=1", "display_name": "ydaniju", "link": "https://stackoverflow.com/users/4781518/ydaniju"}, "reply_to_user": {"reputation": 587, "user_id": 1473641, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2e1f431cce8a104400fc6ef5f3da497a?s=128&d=identicon&r=PG", "display_name": "Prox", "link": "https://stackoverflow.com/users/1473641/prox"}, "edited": false, "score": 0, "creation_date": 1481089213, "post_id": 41010101, "comment_id": 69228114, "body": "Just copy any one of the two to your User model"}, {"owner": {"reputation": 380, "user_id": 4781518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jtiKY.jpg?s=128&g=1", "display_name": "ydaniju", "link": "https://stackoverflow.com/users/4781518/ydaniju"}, "reply_to_user": {"reputation": 587, "user_id": 1473641, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2e1f431cce8a104400fc6ef5f3da497a?s=128&d=identicon&r=PG", "display_name": "Prox", "link": "https://stackoverflow.com/users/1473641/prox"}, "edited": false, "score": 0, "creation_date": 1481090345, "post_id": 41010101, "comment_id": 69228527, "body": "I&#39;m glad it works. Please like the answer and accept it since it does."}], "tags": [], "owner": {"reputation": 380, "user_id": 4781518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jtiKY.jpg?s=128&g=1", "display_name": "ydaniju", "link": "https://stackoverflow.com/users/4781518/ydaniju"}, "is_accepted": true, "score": 2, "last_activity_date": 1481088822, "creation_date": 1481088822, "answer_id": 41010101, "question_id": 41010056, "link": "https://stackoverflow.com/questions/41010056/how-do-i-check-if-name-or-email-exists-and-if-it-does-stop-current-action-ruby/41010101#41010101", "title": "How do I check if name or email exists and if it does, stop current action? Ruby on Rails", "body": "<p>All you need to do is to validate email ensuring uniqueness true. By so doing, any attempt to create a user with that email will throw an error.</p>\n\n<p>Add to your user model:</p>\n\n<p><code>validates_uniqueness_of :email</code> or <code>validates :email, uniqueness: true</code></p>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 2, "last_activity_date": 1597517003, "last_edit_date": 1597517003, "creation_date": 1481093810, "answer_id": 41011209, "question_id": 41010056, "link": "https://stackoverflow.com/questions/41010056/how-do-i-check-if-name-or-email-exists-and-if-it-does-stop-current-action-ruby/41011209#41011209", "title": "How do I check if name or email exists and if it does, stop current action? Ruby on Rails", "body": "<p>Might be worth it noting that <code>validates :email, uniqueness: true</code> only works if it is the only validation in your model.</p>\n<p>If you, for example, ask for a nickname too and require the nickname to be present (<code>validates :nickname, presence: true</code>) than the validation might fail, because the nickname is missing although the email is unique. That might lead to unexpected behavior.</p>\n<p>I recommend using a uniqueness validation in your model, just to be safe. But to answer if a user with a certain email already exists, I would suggest asking the User model exactly that:</p>\n<pre><code>if User.exists?(email: params[:user][:email])\n  # ...\n</code></pre>\n"}], "owner": {"reputation": 587, "user_id": 1473641, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2e1f431cce8a104400fc6ef5f3da497a?s=128&d=identicon&r=PG", "display_name": "Prox", "link": "https://stackoverflow.com/users/1473641/prox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1291, "favorite_count": 0, "accepted_answer_id": 41010101, "answer_count": 2, "score": 1, "last_activity_date": 1597517003, "creation_date": 1481088548, "question_id": 41010056, "link": "https://stackoverflow.com/questions/41010056/how-do-i-check-if-name-or-email-exists-and-if-it-does-stop-current-action-ruby", "title": "How do I check if name or email exists and if it does, stop current action? Ruby on Rails", "body": "<p>I set up authentication using this guide...\n<a href=\"https://gist.github.com/thebucknerlife/10090014\" rel=\"nofollow noreferrer\">https://gist.github.com/thebucknerlife/10090014</a></p>\n\n<p>I want to verify if name or email already exists.\nIf it does not exist, I want it to go ahead and create user.\nIf it does exist, I want it to stop and do something else.</p>\n\n<p>I do not want to create duplicate users.</p>\n\n<p>I set up a model with this:\n    rails generate model user name email password_digest</p>\n\n<p>I have this in my users controller:</p>\n\n<pre><code>  def create\n    user = User.new(user_params)\n    if user.save\n      session[:user_id] = user.id\n      redirect_to '/'\n    else\n      redirect_to '/signup'\n    end\n  end\n</code></pre>\n\n<p>Here is my /users/new.html.erb</p>\n\n<h1>Signup!</h1>\n\n<pre><code>&lt;%= form_for :user, url: '/users' do |f| %&gt;\n\n  Name: &lt;%= f.text_field :name %&gt;\n  Email: &lt;%= f.text_field :email %&gt;\n  Password: &lt;%= f.password_field :password %&gt;\n  Password Confirmation: &lt;%= f.password_field :password_confirmation %&gt;\n  &lt;%= f.submit \"Submit\" %&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>I have tried some things like this in my users controller with no luck:</p>\n\n<pre><code>  def create\n    if Users.where?(:name =&gt; user)\n      redirect_to 'articles'\n    else\n      user = User.new(user_params)\n      if user.save\n        session[:user_id] = user.id\n        redirect_to '/'\n      else\n        redirect_to '/signup'\n      end\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "edited": false, "score": 0, "creation_date": 1481086299, "post_id": 41009442, "comment_id": 69227104, "body": "What is in <code>root_path</code>? Can you show the code?"}, {"owner": {"reputation": 21010, "user_id": 2019247, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MnZYd.jpg?s=128&g=1", "display_name": "31piy", "link": "https://stackoverflow.com/users/2019247/31piy"}, "edited": false, "score": 0, "creation_date": 1481086815, "post_id": 41009442, "comment_id": 69227269, "body": "I don&#39;t think that the <code>root_path</code> receives any parameters here. Do you have any path like <code>show_object</code>, which receives the <code>object_id</code> as a parameter?"}, {"owner": {"reputation": 79, "user_id": 7260304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2debe2c0055c8c9880c2affaabe0b2f4?s=128&d=identicon&r=PG&f=1", "display_name": "Dok Nabaku", "link": "https://stackoverflow.com/users/7260304/dok-nabaku"}, "edited": false, "score": 0, "creation_date": 1481087005, "post_id": 41009442, "comment_id": 69227333, "body": "No, I need to do on index page only, I cant to use show page."}, {"owner": {"reputation": 12493, "user_id": 106906, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d246a4b19295137980d6c6f831eba665?s=128&d=identicon&r=PG", "display_name": "Dogweather", "link": "https://stackoverflow.com/users/106906/dogweather"}, "edited": false, "score": 0, "creation_date": 1481095655, "post_id": 41009442, "comment_id": 69230807, "body": "You shouldn&#39;t limit the results to 1 on the index page."}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 7260304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2debe2c0055c8c9880c2affaabe0b2f4?s=128&d=identicon&r=PG&f=1", "display_name": "Dok Nabaku", "link": "https://stackoverflow.com/users/7260304/dok-nabaku"}, "edited": false, "score": 0, "creation_date": 1481145428, "post_id": 41010404, "comment_id": 69262471, "body": "return this error: Couldn&#39;t find Object with &#39;id&#39;=object_id in this line: @objects = Object.find(session[:comment_object_id])"}, {"owner": {"reputation": 380, "user_id": 4781518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jtiKY.jpg?s=128&g=1", "display_name": "ydaniju", "link": "https://stackoverflow.com/users/4781518/ydaniju"}, "reply_to_user": {"reputation": 79, "user_id": 7260304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2debe2c0055c8c9880c2affaabe0b2f4?s=128&d=identicon&r=PG&f=1", "display_name": "Dok Nabaku", "link": "https://stackoverflow.com/users/7260304/dok-nabaku"}, "edited": false, "score": 0, "creation_date": 1481147255, "post_id": 41010404, "comment_id": 69263382, "body": "Are you sure you used <code>:comment_object_id</code> to set the session in your create action?"}, {"owner": {"reputation": 380, "user_id": 4781518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jtiKY.jpg?s=128&g=1", "display_name": "ydaniju", "link": "https://stackoverflow.com/users/4781518/ydaniju"}, "reply_to_user": {"reputation": 79, "user_id": 7260304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2debe2c0055c8c9880c2affaabe0b2f4?s=128&d=identicon&r=PG&f=1", "display_name": "Dok Nabaku", "link": "https://stackoverflow.com/users/7260304/dok-nabaku"}, "edited": false, "score": 0, "creation_date": 1481147412, "post_id": 41010404, "comment_id": 69263457, "body": "I guess I know where the problem is, I&#39;d edit the create action. You need just <code>id</code> and not <code>object_id</code>."}], "tags": [], "owner": {"reputation": 380, "user_id": 4781518, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/jtiKY.jpg?s=128&g=1", "display_name": "ydaniju", "link": "https://stackoverflow.com/users/4781518/ydaniju"}, "is_accepted": false, "score": 1, "last_activity_date": 1481147466, "last_edit_date": 1481147466, "creation_date": 1481090287, "answer_id": 41010404, "question_id": 41009442, "link": "https://stackoverflow.com/questions/41009442/how-can-i-redirect-to-the-object-in-an-array/41010404#41010404", "title": "How can I redirect to the object in an array", "body": "<p>If <code>params['type']</code> is true, <code>Object.order(\"RANDOM()\").limit(1)</code> will always br reevaluated and usually return a new object. To ensure you return to the same object, you might want to store it in session and then check first in your index if there is a liked comment in your sessions, if so, <code>@objects = Object.find(session[:comment_object_id])</code></p>\n\n<pre><code>def index\n  if session[:comment_object_id]\n    @objects = Object.find(session[:comment_object_id])\n    session.delete(:comment_object_id) # delete the session after use\n  elsif params['type'] == 'random'\n    @objects = Object.order(\"RANDOM()\").limit(1)\n  else\n    @objects = Object.all.limit(1)\n  end\nend\n\n\ndef create\n   object = Object.find(params[:id])\n   comment = object.comments.create(params[:comment].permit(:body))\n\n  respond_to do |format|\n    format.html \n    format.js #ajax\n  end\n\n  if comment.save\n    session[:comment_object_id] = :object_id # set the session here\n    redirect_to root_path # should work now\n  else\n    flash[:error] = comment.errors.full_messages[0]\n    redirect_to root_path #should work now\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12493, "user_id": 106906, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/d246a4b19295137980d6c6f831eba665?s=128&d=identicon&r=PG", "display_name": "Dogweather", "link": "https://stackoverflow.com/users/106906/dogweather"}, "is_accepted": false, "score": 0, "last_activity_date": 1481095801, "creation_date": 1481095801, "answer_id": 41011677, "question_id": 41009442, "link": "https://stackoverflow.com/questions/41009442/how-can-i-redirect-to-the-object-in-an-array/41011677#41011677", "title": "How can I redirect to the object in an array", "body": "<p>This is pretty easy, and you're very close.</p>\n\n<p>Inside your <code>create</code> method, you've got the <code>object</code> you want to redirect to. So just use it directly inside the <code>if comment.save</code> like:</p>\n\n<p><code>redirect_to object_path(object)</code></p>\n\n<p>You can get a list of all these <code>path</code> \"helpers\" via the command:</p>\n\n<p><code>rake routes</code></p>\n\n<p>And in that listing, you should see, by the way, that <code>root_path</code> does not accept any arguments ... for future reference.</p>\n"}], "owner": {"reputation": 79, "user_id": 7260304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2debe2c0055c8c9880c2affaabe0b2f4?s=128&d=identicon&r=PG&f=1", "display_name": "Dok Nabaku", "link": "https://stackoverflow.com/users/7260304/dok-nabaku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1481147466, "creation_date": 1481085023, "last_edit_date": 1481086850, "question_id": 41009442, "link": "https://stackoverflow.com/questions/41009442/how-can-i-redirect-to-the-object-in-an-array", "title": "How can I redirect to the object in an array", "body": "<p>I have action <code>index</code>:</p>\n\n<pre><code>def index\n  if params['type'] == 'random'\n    @objects = Object.order(\"RANDOM()\").limit(1)\n  else\n    @objects = Object.all.limit(1)\n  end\nend\n</code></pre>\n\n<p>and <code>create</code> action:</p>\n\n<pre><code>def create\n  object = Object.find(params[:object_id])\n  comment = object.comments.create(params[:comment].permit(:body))\n\n  respond_to do |format|\n    format.html \n    format.js #ajax\n  end\n\n  if comment.save\n    redirect_to root_path(params[:object_id]) #doesn't work\n  else\n    flash[:error] = comment.errors.full_messages[0]\n    redirect_to root_path(params[:object_id]) #doesn't work\n  end\nend\n</code></pre>\n\n<p>I can comment an object in my <code>index</code> page. When I put a comment, I want to redirect to the object that was commented.</p>\n\n<p>With my code, the page is reloaded, but the next object is displayed, and I cannot see the comment. How can I redirect to the same object?</p>\n\n<p>My <code>root_path</code> </p>\n\n<pre><code>&lt;span class=\"random-icon\"&gt;&lt;%= link_to icon('random'), \"http://localhost:3000/?type=random\" %&gt;&lt;/span&gt;\n\n&lt;div class=\"inner-container\"&gt;\n    &lt;% @objects.each do |object| %&gt;\n      &lt;h1 class=\"title\"&gt;&lt;%= object.title %&gt;&lt;/h1&gt;\n      &lt;p class=\"obj\"&gt;&lt;%= object.body %&gt;&lt;/p&gt;\n      &lt;h3 class=\"comments-title\"&gt;Comments:&lt;/h3&gt;\n      &lt;div id=\"comments\"&gt;  \n        &lt;% object.comments.each do |comment| %&gt;\n          &lt;div class=\"comments\"&gt; &lt;%= comment.body %&gt; \n            &lt;span class=\"time-to-now\"&gt;&lt;%= distance_of_time_in_words_to_now(comment.created_at) %&gt; ago&lt;/span&gt;\n          &lt;/div&gt;\n        &lt;% end %&gt;\n      &lt;/div&gt;\n\n        &lt;div id=\"error\"&gt;&lt;%= flash[:error] %&gt;&lt;/div&gt;\n        &lt;%= form_for([object, object.comments.build], remote: true) do |f| %&gt;\n          &lt;%= f.text_area :body, class: \"text-area\" %&gt; \n          &lt;p class=\"char-limit\"&gt;255 characters limit&lt;/p&gt;\n          &lt;%= f.submit \"Comment\", class: 'button' %&gt;\n        &lt;% end %&gt;\n    &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby", "cucumber"], "answers": [{"tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 0, "last_activity_date": 1481826876, "last_edit_date": 1481826876, "creation_date": 1481826033, "answer_id": 41170846, "question_id": 41009138, "link": "https://stackoverflow.com/questions/41009138/why-is-the-line-number-appended-to-a-cucumber-command-line-user-variable/41170846#41170846", "title": "Why is the line number appended to a cucumber command line user variable?", "body": "<p>The problem is in the parsing of the CLI arguments. This appears to have been like this since the <a href=\"https://github.com/cucumber/cucumber-ruby/commit/49cee3723b4b9ea3e5112087a7573714ed40b27b\" rel=\"nofollow noreferrer\">original implementation of the lines option</a>. You can see the following in the <a href=\"https://github.com/cucumber/cucumber-ruby/blob/b02e28388bb72eb4d193c1f257e6f3d71d965bce/lib/cucumber/cli/options.rb#L142-L144\" rel=\"nofollow noreferrer\"><code>Cucumber::Cli::Options</code> on Line 142-144</a>:</p>\n\n<pre><code>@args.map! { |a| \"#{a}:#{@options[:lines]}\" } if @options[:lines]\n\nextract_environment_variables\n</code></pre>\n\n<p>This <code>map!</code> statement adds the line number to each of the remaining arguments, which includes:</p>\n\n<ol>\n<li>The specified feature file, <code>features/xxx.feature</code> (good)</li>\n<li>Each environment variable (bad)</li>\n</ol>\n\n<p>The <code>extract_environment_variables</code> needs to come before the <code>map!</code> so that the environment variables are not included in <code>@args</code> when it is mapped.</p>\n\n<p>Aside from waiting for the bug to be fixed in Cucumber, which I have opened in <a href=\"https://github.com/cucumber/cucumber-ruby/issues/1064\" rel=\"nofollow noreferrer\">Issue 1064</a>, your only option appears to use the <code>FILE:LINE</code> syntax rather than the <code>-l</code> option:</p>\n\n<pre><code>cucumber features/xxx.feature:409 ENVIRONMENT=LOCAL BROWSER=true\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 1638480, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0948bd9b44cfc3fcf5d9d57beb28099?s=128&d=identicon&r=PG", "display_name": "Sagar Varule", "link": "https://stackoverflow.com/users/1638480/sagar-varule"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 41170846, "answer_count": 1, "score": 1, "last_activity_date": 1481826876, "creation_date": 1481082911, "last_edit_date": 1481086177, "question_id": 41009138, "link": "https://stackoverflow.com/questions/41009138/why-is-the-line-number-appended-to-a-cucumber-command-line-user-variable", "title": "Why is the line number appended to a cucumber command line user variable?", "body": "<p>Here is my cucumber command</p>\n\n<pre><code>cucumber features/xxx.feature -l 409 ENVIRONMENT=LOCAL BROWSER=true\n</code></pre>\n\n<p>When I do <code>puts ENV['ENVIRONMENT']</code>, the value is <code>LOCAL:409</code>. It is the same with <code>ENV['BROWSER']</code>.</p>\n\n<p>Because of this, my scripts are failing as this append is not expected.</p>\n"}, {"tags": ["ruby", "time", "bigdecimal"], "comments": [{"owner": {"reputation": 23477, "user_id": 660921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3d53595cb2a89131fb3be7b55b3a9ef0?s=128&d=identicon&r=PG", "display_name": "Martin Tournoij", "link": "https://stackoverflow.com/users/660921/martin-tournoij"}, "edited": false, "score": 0, "creation_date": 1481079323, "post_id": 41008339, "comment_id": 69225315, "body": "What sort of output do you expect? A UNIX timestamp? What is the part after the <code>;</code> (<code>;16</code>)?"}, {"owner": {"reputation": 607, "user_id": 6785635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b3f4f269a077d438fb5a9a9297726095?s=128&d=identicon&r=PG&f=1", "display_name": "s_zhang", "link": "https://stackoverflow.com/users/6785635/s-zhang"}, "reply_to_user": {"reputation": 23477, "user_id": 660921, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/3d53595cb2a89131fb3be7b55b3a9ef0?s=128&d=identicon&r=PG", "display_name": "Martin Tournoij", "link": "https://stackoverflow.com/users/660921/martin-tournoij"}, "edited": false, "score": 0, "creation_date": 1481079496, "post_id": 41008339, "comment_id": 69225358, "body": "@Carpetsmoker I expect data like this format: <code>1543.123</code>(It&#39;s not the right value)."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1481079894, "post_id": 41008339, "comment_id": 69225457, "body": "It would be helpful to show the result you want for your example string."}], "answers": [{"comments": [{"owner": {"reputation": 607, "user_id": 6785635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b3f4f269a077d438fb5a9a9297726095?s=128&d=identicon&r=PG&f=1", "display_name": "s_zhang", "link": "https://stackoverflow.com/users/6785635/s-zhang"}, "edited": false, "score": 0, "creation_date": 1481089014, "post_id": 41009100, "comment_id": 69228050, "body": "Thank you very much. It is what I want. Thought it looks a little complexity, I can use it now:)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1481093827, "post_id": 41009100, "comment_id": 69229937, "body": "...and use <a href=\"https://ruby-doc.org/stdlib-2.3.0/libdoc/bigdecimal/rdoc/BigDecimal.html#method-c-new\" rel=\"nofollow noreferrer\">BigDecimal::new</a> to return a Big Decimal: <code>require &#39;bigdecimal&#39;; BigDecimal.new(h * 3600 + m * 60 + s + ms&#47;1000) #=&gt; #&lt;BigDecimal:7fad011a9e50,&#39;0.1523016E4&#39;,18(36)&gt;</code>."}, {"owner": {"reputation": 607, "user_id": 6785635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b3f4f269a077d438fb5a9a9297726095?s=128&d=identicon&r=PG&f=1", "display_name": "s_zhang", "link": "https://stackoverflow.com/users/6785635/s-zhang"}, "edited": false, "score": 0, "creation_date": 1481269499, "post_id": 41009100, "comment_id": 69317646, "body": "Sorry, here <code>;16</code> means timecode.  So do you know how to change it to second?"}, {"owner": {"reputation": 215, "user_id": 1700004, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/bb5a7a86087ae12fe044c5cbe09789ed?s=128&d=identicon&r=PG", "display_name": "Diganta", "link": "https://stackoverflow.com/users/1700004/diganta"}, "edited": false, "score": 0, "creation_date": 1485082537, "post_id": 41009100, "comment_id": 70768886, "body": "can anybody explain how to do it in java?"}], "tags": [], "owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "is_accepted": true, "score": 2, "last_activity_date": 1481082627, "creation_date": 1481082627, "answer_id": 41009100, "question_id": 41008339, "link": "https://stackoverflow.com/questions/41008339/how-to-convert-time-to-bigdecimal-with-ruby/41009100#41009100", "title": "How to convert time to bigdecimal with ruby?", "body": "<p>Assuming the <code>;16</code> means milliseconds then maybe you are looking for this?</p>\n\n<pre><code>&gt; str = \"00:25:23;16\"\n=&gt; \"00:25:23;16\"\n&gt; h, m, s, ms = str.split(/[:;]/).map(&amp;:to_f)\n=&gt; [0.0, 25.0, 23.0, 16.0]\n&gt; h * 3600 + m * 60 + s + ms/1000\n=&gt; 1523.016\n</code></pre>\n"}], "owner": {"reputation": 607, "user_id": 6785635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b3f4f269a077d438fb5a9a9297726095?s=128&d=identicon&r=PG&f=1", "display_name": "s_zhang", "link": "https://stackoverflow.com/users/6785635/s-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "accepted_answer_id": 41009100, "answer_count": 1, "score": 0, "last_activity_date": 1481082627, "creation_date": 1481077136, "last_edit_date": 1481079840, "question_id": 41008339, "link": "https://stackoverflow.com/questions/41008339/how-to-convert-time-to-bigdecimal-with-ruby", "title": "How to convert time to bigdecimal with ruby?", "body": "<p>For example, I have a time data with string format:</p>\n\n<pre><code>00:25:23;16\n</code></pre>\n\n<p>I want to convert it to <code>BigDecimal</code> and tried:</p>\n\n<pre><code>a = '00:25:23;16'.to_d\n=&gt; #&lt;BigDecimal:96cb548,'0.0',9(18)&gt;\n</code></pre>\n\n<p>When I check a:</p>\n\n<pre><code>a.floor\n=&gt; 0\n</code></pre>\n\n<p>It looks not the true value. Then how to convert it the right way?</p>\n\n<h1>Addition</h1>\n\n<p>I expect the bigdecimal value like this(Maybe not a right value):</p>\n\n<pre><code>1543.123\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1481091184, "post_id": 41008059, "comment_id": 69228895, "body": "I think you need to permit <code>item_images_attributes</code> also in your controller"}], "answers": [{"tags": [], "owner": {"reputation": 34, "user_id": 6583765, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cbb32015c2d9e48bfa20add634f97cd?s=128&d=identicon&r=PG&f=1", "display_name": "shimroz ahemed", "link": "https://stackoverflow.com/users/6583765/shimroz-ahemed"}, "is_accepted": true, "score": 1, "last_activity_date": 1481100594, "creation_date": 1481100594, "answer_id": 41012959, "question_id": 41008059, "link": "https://stackoverflow.com/questions/41008059/rails-paperclip-gem-saving-multiple-attachments-per-model-instance/41012959#41012959", "title": "Rails Paperclip Gem Saving Multiple Attachments per Model instance", "body": "<p>Try this in strong parameters in Items controller</p>\n\n<p><code>params.require(:item).permit(:title, :description, :price, :available, :sort_shop, :sort_gallery, :item_type, :size,item_images_attributes: [:image ])</code></p>\n\n<p>than in ItemImage.rb add this line \n<code>belongs_to :item, optional: true</code>,</p>\n\n<p>and remove this line from Item.rb</p>\n\n<p>:reject_if => lambda { |t| t['item_image'].nil? }\n `\nIf you get any error please reply</p>\n"}], "owner": {"reputation": 496, "user_id": 2332309, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2a70bf66549b8673723a7d9d4422932a?s=128&d=identicon&r=PG", "display_name": "Kevin Custer", "link": "https://stackoverflow.com/users/2332309/kevin-custer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 1, "accepted_answer_id": 41012959, "answer_count": 1, "score": 1, "last_activity_date": 1481100594, "creation_date": 1481075144, "question_id": 41008059, "link": "https://stackoverflow.com/questions/41008059/rails-paperclip-gem-saving-multiple-attachments-per-model-instance", "title": "Rails Paperclip Gem Saving Multiple Attachments per Model instance", "body": "<p>I'm very new to Rails development and having a problem saving multiple images/attachments to a model.  My problem is that the code below is not actually saving to the item_images table when I submit the form.  I am following <a href=\"https://sleekd.com/general/adding-multiple-images-to-a-rails-model-with-paperclip/\" rel=\"nofollow noreferrer\">This Article</a> as a guide, though it seems to be a bit out of date.  I feel I'm in a little over my head at this point so I hope someone can point out what I'm missing.  Thanks!</p>\n\n<p>I have the following models:</p>\n\n<p><strong>item.rb</strong></p>\n\n<pre><code>class Item &lt; ActiveRecord::Base\n    has_many :item_images, :dependent =&gt; :destroy\n\n    accepts_nested_attributes_for :item_images, :reject_if =&gt; lambda { |t| t['item_image'].nil? }\nend\n</code></pre>\n\n<p><strong>item_image.rb</strong></p>\n\n<pre><code>class ItemImage &lt; ActiveRecord::Base\n    belongs_to :item\n    has_attached_file :image,\n                      :styles =&gt; { thumb: \"100x100#\", small: \"400x400#\", large: \"700x700\" }\n    validates_attachment_content_type :image, :content_type =&gt; /\\Aimage\\/.*\\Z/\nend\n</code></pre>\n\n<p>My controller looks like this:</p>\n\n<p><strong>items_controller.rb</strong></p>\n\n<pre><code>class ItemsController &lt; ApplicationController\n  before_action :set_item, only: [:show, :edit, :update, :destroy]\n\n  # GET /items\n  # GET /items.json\n  def index\n    @items = Item.all\n  end\n\n  # GET /items/1\n  # GET /items/1.json\n  def show\n  end\n\n  # GET /items/new\n  def new\n    @item = Item.new\n    4.times {@item.item_images.build}\n  end\n\n  # GET /items/1/edit\n  def edit\n    4.times {@item.item_images.build}\n  end\n\n  # POST /items\n  # POST /items.json\n  def create\n    @item = Item.new(item_params)\n\n    respond_to do |format|\n      if @item.save\n        format.html { redirect_to @item, notice: 'Item was successfully created.' }\n        format.json { render :show, status: :created, location: @item }\n      else\n        format.html { render :new }\n        format.json { render json: @item.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /items/1\n  # PATCH/PUT /items/1.json\n  def update\n    respond_to do |format|\n      if @item.update(item_params)\n        format.html { redirect_to @item, notice: 'Item was successfully updated.' }\n        format.json { render :show, status: :ok, location: @item }\n      else\n        format.html { render :edit }\n        format.json { render json: @item.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /items/1\n  # DELETE /items/1.json\n  def destroy\n    @item.destroy\n    respond_to do |format|\n      format.html { redirect_to items_url, notice: 'Item was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_item\n      @item = Item.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def item_params\n      params.require(:item).permit(:title, :description, :price, :available, :sort_shop, :sort_gallery, :item_type, :size)\n    end\nend\n</code></pre>\n\n<p><strong>form.html.erb</strong></p>\n\n<pre><code>&lt;%= form_for @item, html: { multipart: true } do |f| %&gt;\n  &lt;% if @item.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(@item.errors.count, \"error\") %&gt; prohibited this item from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% @item.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :title %&gt;&lt;br&gt;\n    &lt;%= f.text_field :title %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :description %&gt;&lt;br&gt;\n    &lt;%= f.text_area :description %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :price %&gt;&lt;br&gt;\n    &lt;%= f.text_field :price %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :available %&gt;&lt;br&gt;\n    &lt;%= f.check_box :available %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :sort_shop %&gt;&lt;br&gt;\n    &lt;%= f.number_field :sort_shop %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :sort_gallery %&gt;&lt;br&gt;\n    &lt;%= f.number_field :sort_gallery %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :item_type %&gt;&lt;br&gt;\n    &lt;%= f.text_field :item_type %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :size %&gt;&lt;br&gt;\n    &lt;%= f.text_field :size %&gt;\n  &lt;/div&gt;\n\n  &lt;%= f.fields_for :item_images do |builder| %&gt;\n\n    &lt;% if builder.object.new_record? %&gt;\n\n    &lt;div class=\"field\"&gt;\n    &lt;%= builder.label :image, \"Image File\" %&gt;\n    &lt;%= builder.file_field :image %&gt;\n    &lt;/div&gt;\n\n    &lt;% end %&gt;\n\n  &lt;% end %&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ios", "objective-c", "ruby", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 842, "user_id": 5614386, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/86959ebe03b2e26c372690d178a6bce8?s=128&d=identicon&r=PG&f=1", "display_name": "Minimi", "link": "https://stackoverflow.com/users/5614386/minimi"}, "is_accepted": true, "score": 1, "last_activity_date": 1482530082, "creation_date": 1482530082, "answer_id": 41308254, "question_id": 41007746, "link": "https://stackoverflow.com/questions/41007746/ios-equivalent-to-ruby-vcr-cassettes-recording-server-http-response-ios/41308254#41308254", "title": "iOS equivalent to Ruby VCR Cassettes / recording server http response iOS", "body": "<p>I ended up using SWHttpTrafficRecorder to record traffic, but I had to implement method swizzling to record network requests from AFNetworking. Here's the link to the repo I forked off that has method swizzling implemented:</p>\n\n<p><a href=\"https://github.com/Amindv1/SWHttpTrafficRecorder\" rel=\"nofollow noreferrer\">https://github.com/Amindv1/SWHttpTrafficRecorder</a></p>\n\n<p>For stubbing I used OHHTTPStubs. These two pods are compatible, I've tested them and can confirm they work together. I also don't recommend using them for more than testing, I only include them in my test target.</p>\n"}], "owner": {"reputation": 842, "user_id": 5614386, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/86959ebe03b2e26c372690d178a6bce8?s=128&d=identicon&r=PG&f=1", "display_name": "Minimi", "link": "https://stackoverflow.com/users/5614386/minimi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 41308254, "answer_count": 1, "score": 2, "last_activity_date": 1482530082, "creation_date": 1481072971, "last_edit_date": 1481329487, "question_id": 41007746, "link": "https://stackoverflow.com/questions/41007746/ios-equivalent-to-ruby-vcr-cassettes-recording-server-http-response-ios", "title": "iOS equivalent to Ruby VCR Cassettes / recording server http response iOS", "body": "<p>I'm trying to record my http responses so my tests run faster. Ruby has a cool framework called VCR that you can use to record responses and load them for faster testing. Does iOS have anything similar? These are two pods that I've found but I was wondering if there was anything else (maybe native?)?</p>\n\n<p><a href=\"https://github.com/venmo/DVR\" rel=\"nofollow noreferrer\">https://github.com/venmo/DVR</a></p>\n\n<p><a href=\"https://github.com/Velhotes/Vinyl\" rel=\"nofollow noreferrer\">https://github.com/Velhotes/Vinyl</a></p>\n\n<p>Thanks in advance!</p>\n\n<p>Update:</p>\n\n<p>So it turns out that you can't use DVR with AFNetworking. So instead I'm using OHHTTPStubs to stub the requests and SWHttpTrafficRecorder to try and record the traffic into files to be loaded later. But I'm having issues getting SWHttpTrafficRecorder to record the requests sent with AFHTTPSessionManager. I'm slowly coming to the conclusion that SWGtpTrafficRecorder and AFNetworking aren't compatible. Does anyone else have any suggestions for recording http requests?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "console", "capistrano"], "answers": [{"tags": [], "owner": {"reputation": 345, "user_id": 4791519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fa0c3ff97dfb9e65fc9686eab6df0aa?s=128&d=identicon&r=PG", "display_name": "dwaskowski", "link": "https://stackoverflow.com/users/4791519/dwaskowski"}, "is_accepted": false, "score": 0, "last_activity_date": 1487176514, "creation_date": 1487176514, "answer_id": 42255065, "question_id": 41007349, "link": "https://stackoverflow.com/questions/41007349/capistrano-railsconsole/42255065#42255065", "title": "Capistrano rails:console", "body": "<p>you can set remote user name into role</p>\n\n<pre><code>role :app, \"my_remote_server_user_name@server_ip\"\n</code></pre>\n\n<p>and use that role inside of your command(<strong>on release_roles :app</strong>) or that will be use automatically if you use <strong>on release_roles :all</strong></p>\n"}], "owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 163, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1487176514, "creation_date": 1481070233, "question_id": 41007349, "link": "https://stackoverflow.com/questions/41007349/capistrano-railsconsole", "title": "Capistrano rails:console", "body": "<p>My server deployed via Capistrano.</p>\n\n<p>Well I need to enter <code>rails console</code> on remote server. I know one of the possible way is <em>GEM</em> called <code>capistrano-console</code> and all you need to do is to type on local machine <code>bundle exec cap production rails:console</code> and it really starting to connect to remote server, but it start to connect with wrong user name.</p>\n\n<p>I mean after <code>bundle exec cap production rails:console</code> it start:</p>\n\n<pre><code>my_local_user_name@server_ip\n</code></pre>\n\n<p>But I need it to do:</p>\n\n<pre><code>my_remote_server_user_name@server_ip\n</code></pre>\n\n<p>Can someone tell why it's happening?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "rspec"], "comments": [{"owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "edited": false, "score": 0, "creation_date": 1481118760, "post_id": 41007296, "comment_id": 69245584, "body": "can you please add the output of <code>bundle exec rake routes</code> to the end of your question?"}, {"owner": {"reputation": 3, "user_id": 7254882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c627e5f23e0be352fb09d31c3a1d7aa2?s=128&d=identicon&r=PG&f=1", "display_name": "kavin", "link": "https://stackoverflow.com/users/7254882/kavin"}, "reply_to_user": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "edited": false, "score": 0, "creation_date": 1481124296, "post_id": 41007296, "comment_id": 69249493, "body": "@sixty4bit Added."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7254882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c627e5f23e0be352fb09d31c3a1d7aa2?s=128&d=identicon&r=PG&f=1", "display_name": "kavin", "link": "https://stackoverflow.com/users/7254882/kavin"}, "edited": false, "score": 0, "creation_date": 1481073130, "post_id": 41007439, "comment_id": 69223799, "body": "I tried but I am getting same error. I also tried with <code>describe ItemsController</code>"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1481090480, "post_id": 41007439, "comment_id": 69228569, "body": "This answer looks correct to me. Are you still getting exactly this: <code>No route matches {:controller=&gt;&quot;items&#47;items&quot;, :action=&gt;&quot;&#47;items&#47;get_serialized_copy_of_item&#47;dfsdf&quot;}</code> ?"}, {"owner": {"reputation": 3, "user_id": 7254882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c627e5f23e0be352fb09d31c3a1d7aa2?s=128&d=identicon&r=PG&f=1", "display_name": "kavin", "link": "https://stackoverflow.com/users/7254882/kavin"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1481121195, "post_id": 41007439, "comment_id": 69247309, "body": "@JagdeepSingh, yes  <code>ActionController::RoutingError:        No route matches {:id=&gt;&quot;sdf&quot;, :controller=&gt;&quot;items&#47;items&quot;, :action=&gt;&quot;get_serialized_copy_of_item&quot;}</code>"}, {"owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "reply_to_user": {"reputation": 3, "user_id": 7254882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c627e5f23e0be352fb09d31c3a1d7aa2?s=128&d=identicon&r=PG&f=1", "display_name": "kavin", "link": "https://stackoverflow.com/users/7254882/kavin"}, "edited": false, "score": 0, "creation_date": 1481121701, "post_id": 41007439, "comment_id": 69247687, "body": "@kavin that is definitely not the same error as before. notice the problem is still the <code>:controller</code> part: it says no route is matching the controller <code>items&#47;items</code>. so something is wrong in your routing and/or namespacing of things"}, {"owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "reply_to_user": {"reputation": 3, "user_id": 7254882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c627e5f23e0be352fb09d31c3a1d7aa2?s=128&d=identicon&r=PG&f=1", "display_name": "kavin", "link": "https://stackoverflow.com/users/7254882/kavin"}, "edited": false, "score": 0, "creation_date": 1481125222, "post_id": 41007439, "comment_id": 69250160, "body": "@kavin I&#39;ve added more to the end of my answer about how you can fix your routing"}], "tags": [], "owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "is_accepted": true, "score": 3, "last_activity_date": 1481125151, "last_edit_date": 1481125151, "creation_date": 1481070853, "answer_id": 41007439, "question_id": 41007296, "link": "https://stackoverflow.com/questions/41007296/i-need-help-to-write-the-rspec-test-in-rails/41007439#41007439", "title": "I need help to write the rspec test in rails", "body": "<p>RSpec assumes the controller name from the name of the test. Note the example in <a href=\"https://relishapp.com/rspec/rspec-rails/v/2-3/docs/controller-specs/controller-spec\" rel=\"nofollow noreferrer\">this doc</a>: </p>\n\n<pre><code>describe WidgetsController do\n  describe \"GET index\" do\n    it \"has a 200 status code\" do\n      get :index\n      response.code.should eq(\"200\")\n    end\n  end\nend\n</code></pre>\n\n<p>Here RSpec already knows the <code>widgets</code> part of the path because of <code>describe WidgetsController</code>, so the <code>get</code> method only takes <code>:index</code> as an argument.</p>\n\n<p>To translate that to your case:</p>\n\n<pre><code>describe Items::ItemsController do\n  describe \"GET get_serialized_copy_of_item\" do\n     it \"renders 204 status code\" do\n      get :get_serialized_copy_of_item, id: 'sdf'\n\n      expect(response.status).to eq(204)\n    end\n  end\nend\n</code></pre>\n\n<ol>\n<li>You only need to pass the name of the action to the <code>get()</code> method, not the entire path.</li>\n<li>You need to include the <code>:id</code> param as a second argument to <code>get()</code></li>\n<li>It seems like <code>namespace</code> is the wrong way to do the routing here. Try changing your route definitions to this:</li>\n</ol>\n\n<blockquote>\n<pre><code>resources :items do \n  member do \n    get :get_serialized_copy\n  end\nend\n</code></pre>\n</blockquote>\n\n<p>This will generate the following route:</p>\n\n<pre><code>\u279c  bundle exec rake routes\n   Prefix Verb   URI Pattern     \n\n    Controller#Action\nget_serialized_copy_item GET    /items/:id/get_serialized_copy(.:format) items#get_serialized_copy\n</code></pre>\n\n<p>For this you want to have your <code>ItemsController</code> in <code>app/controllers/items_controller.rb</code></p>\n"}, {"tags": [], "owner": {"reputation": 229, "user_id": 3470982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59a8f7bda4881e46dd4341e9fe34ee5b?s=128&d=identicon&r=PG&f=1", "display_name": "tywhang", "link": "https://stackoverflow.com/users/3470982/tywhang"}, "is_accepted": false, "score": 0, "last_activity_date": 1481070941, "creation_date": 1481070941, "answer_id": 41007452, "question_id": 41007296, "link": "https://stackoverflow.com/questions/41007296/i-need-help-to-write-the-rspec-test-in-rails/41007452#41007452", "title": "I need help to write the rspec test in rails", "body": "<p>From what I can see there isn't any nesting.</p>\n\n<p>If so, you should be calling <code>ItemsController</code> instead of <code>Items::ItemsController</code>.</p>\n\n<p><strong>items_controller_spec:</strong></p>\n\n<pre><code>require 'spec_helper'\n\ndescribe ItemsController do\n  describe \"GET #get_serialized_copy_of_item\" do\n     it \"renders 204 status code\" do\n      get \"/items/get_serialized_copy_of_item/dfsdf\"\n      expect(last_response.status).to eq(204)\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 7254882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c627e5f23e0be352fb09d31c3a1d7aa2?s=128&d=identicon&r=PG&f=1", "display_name": "kavin", "link": "https://stackoverflow.com/users/7254882/kavin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 41007439, "answer_count": 2, "score": 0, "last_activity_date": 1481125151, "creation_date": 1481069904, "last_edit_date": 1481124245, "question_id": 41007296, "link": "https://stackoverflow.com/questions/41007296/i-need-help-to-write-the-rspec-test-in-rails", "title": "I need help to write the rspec test in rails", "body": "<p>I have a items_controller.rb</p>\n\n<pre><code>  def get_serialized_copy_of_item\n    @item= Item.find_by_id(params[:id]) \n    if @item.nil?\n      head :no_content\n    else\n      respond_to do |format|\n      serialized_item = @item.as_json(include: [:test1, :test2, :test3, :test4])\n      format.html\n      format.json { render json: serialized_item }  \n      end\n    end\n  end\n</code></pre>\n\n<p>routes.rb</p>\n\n<pre><code>namespace :items do\n  get '/get_serialized_copy_of_item/:id', to:'items#get_serialized_copy_of_item'\nend\n</code></pre>\n\n<p>I want to write a rspec test</p>\n\n<ol>\n<li>submit incorrect item id and make sure that 204 is returned</li>\n</ol>\n\n<p>I have done</p>\n\n<pre><code>require 'spec_helper'\n\ndescribe Items::ItemsController do\n  describe \"GET items#get_serialized_copy_of_item\" do\n     it \"renders 204 status code\" do\n      get \"/items/get_serialized_copy_of_item/dfsdf\"\n      expect(last_response.status).to eq(204)\n    end\n  end\nend\n</code></pre>\n\n<p>Error: I am getting routing error</p>\n\n<pre><code>F\n\nFailures:\n\n  1) Items::ItemsController GET items#item renders 204 status code\n     Failure/Error: get \"/items/get_serialized_copy_of_item/dfsdf\"\n     ActionController::RoutingError:\n       No route matches {:controller=&gt;\"items/items\", :action=&gt;\"/items/get_serialized_copy_of_item/dfsdf\"}\n     # ./spec/controllers/items/items_controller_spec.rb:6:in `block (3 levels) in &lt;top (required)&gt;'\n\nFinished in 0.01576 seconds\n1 example, 1 failure\n\nFailed examples:\n\nrspec ./spec/controllers/items/items_controller_spec.rb:5 # Items::itemsController GET items#item renders 204 status code\n</code></pre>\n\n<p>bundle exec rake routes</p>\n\n<pre><code>                                       GET    `items/get_serialized_copy_of_item/:id(.:format)                            items/items#get_serialized_copy_of_item`\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "file-io"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1481068199, "post_id": 41007016, "comment_id": 69222516, "body": "<code>open(ARGV.first)</code> reopens the file each time. where as <code>current_file = open(input_file)</code> opens the file once and stores the file in its open state in the variable <code>current_file</code>"}, {"owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "edited": false, "score": 1, "creation_date": 1481069663, "post_id": 41007016, "comment_id": 69222923, "body": "^^ is this an answer? if so, why not leave it as an answer?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 2, "creation_date": 1481072234, "post_id": 41007016, "comment_id": 69223573, "body": "This has to do with mutable object. <code>open(ARGV.first)</code> is mutable because you can call <code>.gets</code> multiple times and get different results. But each time you run <code>open(ARGV.first)</code> you get a <i>fresh</i> mutable object in the <i>initial state</i>."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 3, "creation_date": 1481072442, "post_id": 41007016, "comment_id": 69223621, "body": "Look at it this way: &quot;get a new boyfriend; tell dad about him; tell dad about him; tell dad about him&quot; is quite different from &quot;get a new boyfriend and tell dad about him; get a new boyfriend and tell dad about him; get a new boyfriend and tell dad about him&quot;. Phrasing matters :)"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1481084660, "post_id": 41007016, "comment_id": 69226692, "body": "How would you ever think that Ruby creates any connection between an IO object <code>a = open(input_file)</code> and <code>b = open(input_file)</code> so that when you had read up to line <code>n</code> in <code>a</code>, the next time you read from <code>b</code>, it reads from line <code>n + 1</code>? That does not make sense."}], "owner": {"reputation": 508, "user_id": 2476604, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/HZVR2.png?s=128&g=1", "display_name": "clockworkpc", "link": "https://stackoverflow.com/users/2476604/clockworkpc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1481068052, "creation_date": 1481068052, "question_id": 41007016, "link": "https://stackoverflow.com/questions/41007016/ruby-why-does-openargv-first-in-a-function-not-move-to-the-next-line-in-subse", "title": "RUBY: Why does open(ARGV.first) in a function not move to the next line in subsequent runs?", "body": "<p>I am working through Exercise 20 of <a href=\"https://learnrubythehardway.org/book/ex20.html\" rel=\"nofollow noreferrer\">Learn Ruby the Hard Way</a>, and am trying to make sense of the difference in output between defining the variable \"current_file\" and simply using open(ARGV.first):</p>\n\n<p>Here is the input file test.txt:</p>\n\n<pre><code>This is line 1\nThis is line 2\nThis is line 3\n</code></pre>\n\n<p>Here is the beginning of the script:</p>\n\n<pre><code>input_file = ARGV.first\n\ndef print_a_line(f)\n  puts \"#{f.gets}\"\nend\n\ncurrent_file = open(input_file)\n</code></pre>\n\n<p>When I call the print_a_line with the declared variable:</p>\n\n<pre><code>print_a_line(current_file)\nprint_a_line(current_file)\nprint_a_line(current_file)\n</code></pre>\n\n<p>Then f.gets tracks to the new line each time:</p>\n\n<pre><code>This is line 1\nThis in line 2\nThis is line 3\n</code></pre>\n\n<p>However, if I call the function with ARGV.first:</p>\n\n<pre><code>print_a_line(open(ARGV.first))\nprint_a_line(open(ARGV.first))\nprint_a_line(open(ARGV.first))\n</code></pre>\n\n<p>Then f.gets does not track to the new line and remains on line 1:</p>\n\n<pre><code>This is line 1\nThis is line 1\nThis is line 1\n</code></pre>\n\n<p>And the same even with input_file:</p>\n\n<pre><code>print_a_line(open(input_file))\nprint_a_line(open(input_file))\nprint_a_line(open(input_file))\n</code></pre>\n\n<p>f.get still doesn't track to the next line:</p>\n\n<pre><code>This is line 1\nThis is line 1\nThis is line 1\n</code></pre>\n\n<p>Obviously, I would declare and use variables -- I understand the basics of writing neat, readable code.</p>\n\n<p>My question is why does f.get track to the next line when the function is called with a declared variable and not track to the next line when called with the open(ARGV.first) or open(input_file)?</p>\n\n<p>Why do I have to declare the variable again?</p>\n\n<pre><code>current_file = open(input_file)\n</code></pre>\n"}, {"tags": ["ruby", "amazon-web-services", "amazon-data-pipeline"], "answers": [{"tags": [], "owner": {"reputation": 400, "user_id": 5834816, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-QWRrj5A7kN4/AAAAAAAAAAI/AAAAAAAAABc/6ItlZrFZA3A/photo.jpg?sz=128", "display_name": "Brian R Armstrong", "link": "https://stackoverflow.com/users/5834816/brian-r-armstrong"}, "is_accepted": false, "score": 1, "last_activity_date": 1481255914, "creation_date": 1481255914, "answer_id": 41052854, "question_id": 41006921, "link": "https://stackoverflow.com/questions/41006921/aws-datapipeline-to-ruby-code/41052854#41052854", "title": "AWS Datapipeline to Ruby Code", "body": "<p>Datapipeline supports a JSON definition format. The format is described in these links:</p>\n\n<ul>\n<li><a href=\"http://docs.aws.amazon.com/datapipeline/latest/DeveloperGuide/dp-writing-pipeline-definition.html\" rel=\"nofollow noreferrer\">Pipeline Definition File Syntax</a></li>\n<li><a href=\"http://docs.aws.amazon.com/datapipeline/latest/DeveloperGuide/dp-pipeline-objects.html\" rel=\"nofollow noreferrer\">Pipeline Object Reference</a></li>\n</ul>\n\n<p>From the Architect, you can export your existing pipelines as JSON by following the instructions <a href=\"http://docs.aws.amazon.com/datapipeline/latest/DeveloperGuide/dp-view-definition.html\" rel=\"nofollow noreferrer\">here</a>.  </p>\n\n<p>Commit these JSON files to your source control, and run/migrate/deploy them using the AWS CLI like this:</p>\n\n<pre><code>aws datapipeline create-pipeline --name mydpl --unique-id mydpl\naws datapipeline put-pipeline-definition --pipeline-id df-xxxxxxxxxx --pipeline-definition file:///mydpl.json\naws datapipeline activate-pipeline --pipeline-id df-xxxxxxxxxx\n</code></pre>\n"}], "owner": {"reputation": 752, "user_id": 628396, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/221ae71884cf612349a80db923c6d55c?s=128&d=identicon&r=PG", "display_name": "RidingRails", "link": "https://stackoverflow.com/users/628396/ridingrails"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481255914, "creation_date": 1481067492, "question_id": 41006921, "link": "https://stackoverflow.com/questions/41006921/aws-datapipeline-to-ruby-code", "title": "AWS Datapipeline to Ruby Code", "body": "<p>I am in the process of taking over a set of data pipelines on AWS.  They are all built using the AWS graphical editor tool.  The pipelines are getting complex and my goal is move them to code and have them versioned.  We are a ruby shop so besides of the AWS ruby gem is there another tool or framework I should use to do this?  Any resources, blogs, docs I can follow that would be helpful and easy to follow (aws docs could be better).</p>\n"}, {"tags": ["ruby", "rounding"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1481066187, "post_id": 41006519, "comment_id": 69221816, "body": "Searching Google for &quot;round number to next hundred&quot; returns a number of hits, including some on SO, which help explain it such as <a href=\"http://stackoverflow.com/q/19621455/128421\">stackoverflow.com/q/19621455/128421</a>, <a href=\"http://stackoverflow.com/q/8866046/128421\">stackoverflow.com/q/8866046/128421</a>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1481066801, "post_id": 41006519, "comment_id": 69222033, "body": "Another way: <code>def roundup(n) 100*(1+((n-1)&#47;100)) end; roundup(248) #=&gt; 300; roundup(400) #=&gt; 400; roundup(-240) #=&gt; -200; roundup(-200) #=&gt; -200</code>."}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1481107771, "post_id": 41006519, "comment_id": 69238130, "body": "Tin Man, several items on Google, whilst INCLUDING &quot;Ruby&quot;, ran me into nothing but dead ends.  It&#39;s why I included the version number here.  Also, Ruby is not Javascript and has different methods and approaches.  Same with Python."}], "answers": [{"comments": [{"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "edited": false, "score": 0, "creation_date": 1481107847, "post_id": 41006589, "comment_id": 69238183, "body": "I was close.  The significant figure is what would respect the remainder.  Thank you."}], "tags": [], "owner": {"reputation": 3363, "user_id": 2876504, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4f861d39e1561dc8147fc6442d1235e8?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro C.", "link": "https://stackoverflow.com/users/2876504/alejandro-c"}, "is_accepted": true, "score": 13, "last_activity_date": 1481065572, "creation_date": 1481065572, "answer_id": 41006589, "question_id": 41006519, "link": "https://stackoverflow.com/questions/41006519/ruby-round-up-to-next-hundred/41006589#41006589", "title": "Ruby Round Up to Next Hundred", "body": "<p>Divide by 100 first then multiply back.  </p>\n\n<pre><code>(48/100.0).ceil * 100\n</code></pre>\n"}], "owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1753, "favorite_count": 0, "accepted_answer_id": 41006589, "answer_count": 1, "score": 0, "last_activity_date": 1481065572, "creation_date": 1481065311, "question_id": 41006519, "link": "https://stackoverflow.com/questions/41006519/ruby-round-up-to-next-hundred", "title": "Ruby Round Up to Next Hundred", "body": "<p>How can I round up to the next hundred?  Using Ruby 2.3.2.</p>\n\n<p><code>48 -&gt; 100\n52 -&gt; 100\n112 -&gt; 200</code></p>\n\n<p>Tried <code>48.round(-2)</code> but that rounds down.  Trialed some BigDecimal values, but that got me nowhere.  </p>\n"}, {"tags": ["ruby", "string", "slice"], "answers": [{"tags": [], "owner": {"reputation": 6367, "user_id": 4451732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/UQN4l.jpg?s=128&g=1", "display_name": "Franklin Yu", "link": "https://stackoverflow.com/users/4451732/franklin-yu"}, "is_accepted": false, "score": 0, "last_activity_date": 1481068884, "last_edit_date": 1481068884, "creation_date": 1481064805, "answer_id": 41006424, "question_id": 41006230, "link": "https://stackoverflow.com/questions/41006230/how-to-do-string-slicing-in-ruby/41006424#41006424", "title": "How to do string slicing in Ruby", "body": "<pre><code>output_array = input.split(\" \").each do |word|\n\n  i=0\n  while !['a', 'e', 'i', 'o', 'u'].include?(word[i])\n    i += 1\n  end\n\n  unless i == 0 \n    word &lt;&lt; word[0..i-1] # Good\n    word = word[i..-1] # Bad\n  end\n\n  word &lt;&lt; \"ay\"\n\nend\n</code></pre>\n\n<p>The line</p>\n\n<pre><code>word &lt;&lt; word[0..i-1]\n</code></pre>\n\n<p>changes the string in place, while </p>\n\n<pre><code>word = word[i..-1]\n</code></pre>\n\n<p>creates a new string and assigns the new string to <code>word</code>. Changing the new string does not affect the old string in the array, so the words in the array stay what they were after</p>\n\n<pre><code>word &lt;&lt; word[0..i-1]\n</code></pre>\n\n<p>Do every modification in-place (like what you did in solution 1), or use <a href=\"https://ruby-doc.org/core-2.3.3/Array.html#method-i-map\" rel=\"nofollow noreferrer\"><code>Array#map</code></a> which is more Ruby-like.</p>\n\n<p>This is off-topic, but your <code>while</code> loop can be replaced by</p>\n\n<pre><code>i = word.index(/[aeiou]/)\n</code></pre>\n\n<p>if you happen to know regular expressions.</p>\n"}], "owner": {"reputation": 1, "user_id": 7259465, "user_type": "registered", "profile_image": "https://graph.facebook.com/1813907282224638/picture?type=large", "display_name": "Yuan Gao", "link": "https://stackoverflow.com/users/7259465/yuan-gao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1144, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481069109, "creation_date": 1481063893, "last_edit_date": 1481069109, "question_id": 41006230, "link": "https://stackoverflow.com/questions/41006230/how-to-do-string-slicing-in-ruby", "title": "How to do string slicing in Ruby", "body": "<p>This is a <a href=\"https://en.wikipedia.org/wiki/Pig_Latin\" rel=\"nofollow noreferrer\">Pig Latin translate practice</a> in Ruby.</p>\n\n<p>Why am I getting different results from these two versions of code? In other words, why is <code>word = word[i..-1]</code> not taking effect in the second code block?</p>\n\n<pre><code>def translate(input)\n    output_array = input.split(\" \").each do |word|\n\n      i=0\n      while !['a', 'e', 'i', 'o', 'u'].include?(word[i])\n        i += 1\n      end\n\n      unless i == 0 \n        word &lt;&lt; word[0..i-1]\n        word[0..i-1] = ''\n      end\n\n      word &lt;&lt; \"ay\"\n\n  end\n  return output_array.join(\" \")\nend\n\nputs translate('apple')\nputs translate('banana')\nputs translate('trash')\nputs translate('eat pie')\n</code></pre>\n\n<p>which outputs:</p>\n\n<pre><code>appleay\nananabay\nashtray\neatay iepay\n</code></pre>\n\n<p>And:</p>\n\n<pre><code>def translate(input)\n    output_array = input.split(\" \").each do |word|\n\n      i=0\n      while !['a', 'e', 'i', 'o', 'u'].include?(word[i])\n        i += 1\n      end\n\n      unless i == 0 \n        word &lt;&lt; word[0..i-1]\n        word = word[i..-1]\n      end\n\n      word &lt;&lt; \"ay\"\n\n  end\n  return output_array.join(\" \")\nend\n\nputs translate('apple')\nputs translate('banana')\nputs translate('trash')\nputs translate('eat pie')\n</code></pre>\n\n<p>prints out:</p>\n\n<pre><code>appleay\nbananab\ntrashtr\neatay piep\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1481066996, "post_id": 41005942, "comment_id": 69222111, "body": "Welcome to Stack Overflow. It&#39;s not necessary, or especially desirable, that you use &quot;edit&quot; or &quot;update&quot; tags. Instead incorporate the change as if you&#39;d put it there initially so the content makes sense and flows. We can see what changed if we&#39;re interested."}], "answers": [{"comments": [{"owner": {"reputation": 1209, "user_id": 1398834, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/01306631daad680668f9dfc75d97824c?s=128&d=identicon&r=PG", "display_name": "FlameDra", "link": "https://stackoverflow.com/users/1398834/flamedra"}, "edited": false, "score": 0, "creation_date": 1481064127, "post_id": 41006221, "comment_id": 69221107, "body": "Thank you, it was what I was looking for. How exactly is it storing it? If I put it in a def block, will it return it as a hash or something else?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 1209, "user_id": 1398834, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/01306631daad680668f9dfc75d97824c?s=128&d=identicon&r=PG", "display_name": "FlameDra", "link": "https://stackoverflow.com/users/1398834/flamedra"}, "edited": false, "score": 0, "creation_date": 1481064813, "post_id": 41006221, "comment_id": 69221337, "body": "See update. You can create your MyData objects directly inside the loop."}, {"owner": {"reputation": 1209, "user_id": 1398834, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/01306631daad680668f9dfc75d97824c?s=128&d=identicon&r=PG", "display_name": "FlameDra", "link": "https://stackoverflow.com/users/1398834/flamedra"}, "edited": false, "score": 0, "creation_date": 1481065803, "post_id": 41006221, "comment_id": 69221681, "body": "I tried that along with the code I edited into my post, but the database is created but not populated for some reason. Its using Sinatra in case it helps."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1481067307, "post_id": 41006221, "comment_id": 69222218, "body": "Instead of using <code>readlines</code>, which slurps the content and can cause scalability problems, use <code>foreach</code>. It&#39;s extremely fast and will work with <code>with_index</code> if you need the line number, though <code>$.</code>, AKA <code>$INPUT_LINE_NUMBER</code> will do the same. See the <a href=\"http://ruby-doc.org/stdlib-2.3.3/libdoc/English/rdoc/English.html\" rel=\"nofollow noreferrer\">English</a> module."}, {"owner": {"reputation": 1209, "user_id": 1398834, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/01306631daad680668f9dfc75d97824c?s=128&d=identicon&r=PG", "display_name": "FlameDra", "link": "https://stackoverflow.com/users/1398834/flamedra"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1481067902, "post_id": 41006221, "comment_id": 69222424, "body": "@theTinMan I tried foreach instead of readlines, and am still getting a  NoMethodError - undefined method `validators&#39; for Names:Class. error ."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481099631, "post_id": 41006221, "comment_id": 69232760, "body": "Rename <code>class Data</code> to <code>class Names</code>."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1481100777, "last_edit_date": 1481100777, "creation_date": 1481063862, "answer_id": 41006221, "question_id": 41005942, "link": "https://stackoverflow.com/questions/41005942/save-data-from-text-file-to-sql-database/41006221#41006221", "title": "Save data from text file to SQL database", "body": "<p>This is a start :</p>\n\n<pre><code>File.readlines('data.txt').each_with_index do |line, i|\n  name, *values = line.split\n  values.map!{|v| v.to_i}\n  puts i\n  puts name\n  puts values.inspect\nend\n</code></pre>\n\n<p>You get the index, the name and the values for each row.</p>\n\n<p>It returns :</p>\n\n<pre><code>0\nCat\n[3, 24, 2, 2, 4, 6, 4, 7, 6, 0, 0]\n\n1\nDog\n[18, 0, 8, 2, 42, 6, 6, 4, 5, 8, 0]\n\n2\nMouse\n[8, 1, 2, 2, 4, 6, 4, 7, 6, 0, 0]\n\n3\nRabbit\n[8, 10, 8, 26, 46, 2, 6, 7, 6, 10, 0]\n</code></pre>\n\n<p>Now that you have the desired variables, you can write them into your database.\nTo do so, you can create a params Hash with the expected attributes for your Data :</p>\n\n<pre><code>File.readlines('data.txt').each do |line|\n  name, *values = line.split\n  params = {:name =&gt; name}\n  values.each_with_index do |value, i|\n    params[:\"value#{i+1}\"] = value\n  end\n  my_data = MyData.new params\n  my_data.save\nend\n\nputs MyData.count # =&gt; 4\n</code></pre>\n\n<p><strong>NOTE</strong>: Do not call your class Data, it is already defined in Ruby and you will get weird errors.</p>\n\n<h1>Stand-alone Example</h1>\n\n<p>Everything put together :</p>\n\n<pre><code>require 'dm-core'\nrequire 'dm-migrations'\n\n# Initialize Database\n\nDataMapper.setup(:default, \"sqlite3://#{Dir.pwd}/development.db\")\n\nclass MyData\n  include DataMapper::Resource\n  property :id, Serial\n  property :name, String\n  property :value1, Integer\n  property :value2, Integer\n  property :value3, Integer\n  property :value4, Integer\n  property :value5, Integer\n  property :value6, Integer\n  property :value7, Integer\n  property :value8, Integer\n  property :value9, Integer\n  property :value10, Integer\n  property :value11, Integer\nend\n\nDataMapper.finalize\nDataMapper.auto_upgrade!\n\n# Parse file and save data in DB\n\nFile.foreach('data.txt') do |line|\n  name, *values = line.split\n  params = { name: name }\n  values.each_with_index do |value, i|\n    params[:\"value#{i + 1}\"] = value\n  end\n  MyData.create params\nend\n\nputs MyData.count # =&gt; 4, then 8, then 12, ...\n</code></pre>\n"}], "owner": {"reputation": 1209, "user_id": 1398834, "user_type": "registered", "accept_rate": 13, "profile_image": "https://www.gravatar.com/avatar/01306631daad680668f9dfc75d97824c?s=128&d=identicon&r=PG", "display_name": "FlameDra", "link": "https://stackoverflow.com/users/1398834/flamedra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1481100777, "creation_date": 1481062479, "last_edit_date": 1481066633, "question_id": 41005942, "link": "https://stackoverflow.com/questions/41005942/save-data-from-text-file-to-sql-database", "title": "Save data from text file to SQL database", "body": "<p>I have some data in a text file in the following format:</p>\n\n<pre><code>Cat 3 24 2 2 4 6 4 7 6 0 0\nDog 18 0 8 2 42 6 6 4 5 8 0 \nMouse 8 1 2 2 4 6 4 7 6 0 0\nRabbit 8 10 8 26 46 2 6 7 6 10 0\n</code></pre>\n\n<p>I would like to write a Ruby script which can take this data and store it in SQLite database where the table's columns will be : Name, Value1, Value2, Value3,...., Value11. And the rows are each piece of data on every line of the file, so the first row of the table will be: Cat, 3, 24, 2, 2, 4, 6, 4, 7, 6, 0, 0.</p>\n\n<p>I have my class for Data set up as follows:</p>\n\n<pre><code>require 'dm-core'\nrequire 'dm-migrations'\n\n\nDataMapper.setup(:default, \"sqlite3://#{Dir.pwd}/development.db\")\n\nclass Data\n  include DataMapper::Resource\n  property :id, Serial\n  property :name, String\n  property :value1, Integer\n  property :value2, Integer\n  property :value3, Integer\n  property :value4, Integer\n  property :value5, Integer\n  property :value6, Integer\n  property :value7, Integer\n  property :value8, Integer\n  property :value9, Integer\n  property :value10, Integer\n  property :value11, Integer\nend\n\nDataMapper.finalize\nDataMapper.auto_upgrade!\n</code></pre>\n\n<p>In my app.rb I'm trying to write down the logic that can parse this data and create and write it to the database. I'm also using Sinatra for this. How do I go about doing that?</p>\n\n<p>EDIT: Updated app.rb file</p>\n\n<pre><code>require 'sinatra'\nrequire 'slim'\nrequire 'sass'\nrequire './Names'\nrequire 'rubygems'\nrequire 'data_mapper'\n\nget '/' do\n\n  File.readlines(\"data.txt\").each do |line|\n    name, *values = line.split\n    params = {:name =&gt; name}\n    values.each_with_index do |value, i|\n      params[:\"value#{i+1}\"] = value\n    end\n    my_data = Names.new params #class renamed to Names\n    my_data.save\n  end\n\nend\n</code></pre>\n\n<p>When I do this I get a NoMethodError - undefined method `validators' for Names:Class.</p>\n"}, {"tags": ["ruby", "image", "imagemagick", "gif"], "comments": [{"owner": {"reputation": 144829, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1481095510, "post_id": 41005816, "comment_id": 69230714, "body": "Sorry, I cannot read Ruby, but I am guessing your <code>newavatar</code> may not contain anything because you may not have specified aa size when drawing it - try writing it out on its own maybe."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 5913534, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TTlKsYarWCg/AAAAAAAAAAI/AAAAAAAAPsU/mEoP-uAVrfA/photo.jpg?sz=128", "display_name": "Cyan101", "link": "https://stackoverflow.com/users/5913534/cyan101"}, "edited": false, "score": 0, "creation_date": 1481211768, "post_id": 41012022, "comment_id": 69294187, "body": "Worked very well, thanks for the help :) i was just stuck because i ran into that &quot;no <code>cur_image</code> error and was unsure at what to do. I think i infact tried <code>composite!</code> but i may have had issues due to not assigning the gravity :s"}], "tags": [], "owner": {"reputation": 924, "user_id": 106813, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9904b127bff836c939152dcd300ea9ea?s=128&d=identicon&r=PG", "display_name": "VxJasonxV", "link": "https://stackoverflow.com/users/106813/vxjasonxv"}, "is_accepted": true, "score": 1, "last_activity_date": 1481097119, "creation_date": 1481097119, "answer_id": 41012022, "question_id": 41005816, "link": "https://stackoverflow.com/questions/41005816/how-do-i-paste-an-image-onto-every-frame-in-a-gif-in-ruby-with-rmagick/41012022#41012022", "title": "How do i paste an image onto every frame in a gif in ruby with rmagick", "body": "<p>I'm going to be completely honest, I have no idea why this isn't erroring as written. I can tell you Ruby'isms on why things aren't working, but the more I try and explain the behavior, the more I fail to prove it.</p>\n\n<p>Anyway, here's what I think I know:</p>\n\n<pre><code>newavatar.composite(20, 20, 40, 40, image)\n</code></pre>\n\n<p>This is drawing the gif <em>on top of</em> the avatar. But you can't just swap the variables. That blows up with \"no <code>cur_image</code> defined\".</p>\n\n<pre><code>giflist.each { |image| newavatar.composite(20, 20, 40, 40, image) }\n</code></pre>\n\n<p>Either each of the frames are being returned into <code>newavatar</code>, or they're just being thrown away since there's no assignment happening (<code>image = giflist.each { \u2026 }</code>). But again, no matter which way I try and put it together, I get a variety of errors.</p>\n\n<p>This is the solution I came up with:</p>\n\n<pre><code>require 'rmagick'\nrequire 'open-uri'\ninclude Magick\n\ngiflist = Magick::ImageList.new('pewpewpew.gif')\nopen('avatar.jpg', 'wb') do |file|\n  file &lt;&lt; open('https://cdn.discordapp.com/avatars/120571255635181568/8e37daf54a9c631afe659ebcb87af959.jpg').read\nend\n\navatar = Magick::Image.read('avatar.jpg').first\n\ngiflist.each { |image| image.composite!(avatar, NorthWestGravity, 40, 40, OverCompositeOp) }\ngiflist.write('newgif.gif')\n</code></pre>\n\n<p>And more importantly, the result:</p>\n\n<p><a href=\"https://i.stack.imgur.com/37afF.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/37afF.gif\" alt=\"Avatar overlaid on gif\"></a></p>\n\n<p>You'll note the use of <code>composite!</code>, which replaces the frames in place (still in the <code>giflist</code> variable).</p>\n\n<p>The last part you have to do is reduce the size of the avatar to 40x40, which should only be a single line, and I'm pretty sure that's all that's left.</p>\n\n<p>Much simpler, no?</p>\n"}], "owner": {"reputation": 19, "user_id": 5913534, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TTlKsYarWCg/AAAAAAAAAAI/AAAAAAAAPsU/mEoP-uAVrfA/photo.jpg?sz=128", "display_name": "Cyan101", "link": "https://stackoverflow.com/users/5913534/cyan101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 41012022, "answer_count": 1, "score": 0, "last_activity_date": 1481097119, "creation_date": 1481061991, "question_id": 41005816, "link": "https://stackoverflow.com/questions/41005816/how-do-i-paste-an-image-onto-every-frame-in-a-gif-in-ruby-with-rmagick", "title": "How do i paste an image onto every frame in a gif in ruby with rmagick", "body": "<pre><code>require 'rmagick'\nrequire 'open-uri'\ninclude Magick\n\ngiflist = Magick::ImageList.new('pewpewpew.gif')\nopen('avatar.jpg', 'wb') do |file|\n  file &lt;&lt; open('https://cdn.discordapp.com/avatars/120571255635181568/8e37daf54a9c631afe659ebcb87af959.jpg').read\nend\n\navatar = Magick::Image.read('avatar.jpg').first\n\nnewavatar = Draw.new {\n  self.fill = 'black'\n  self.stroke = 'transparent'\n  self.tile = avatar\n  self.fill_pattern = avatar\n  self.stroke_pattern = avatar\n  self.gravity = NorthGravity\n}\ngiflist.each { |image| newavatar.composite(20, 20, 40, 40, image) }# x, y, width, height, image\ngiflist.write('newgif.gif')\n</code></pre>\n\n<p>So basically i'm trying to paste this jpg onto a gif, but for some reason nothings happening and i'm not getting any errors. the image is downloaded properly so i know thats not an issue</p>\n\n<p>gif -> <a href=\"https://cdn.discordapp.com/attachments/225375815087554563/255817574137200640/pewpewpew.gif\" rel=\"nofollow noreferrer\">Gif Link</a></p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "activerecord", "rspec-rails", "rspec3"], "comments": [{"owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "edited": false, "score": 0, "creation_date": 1481071013, "post_id": 41005617, "comment_id": 69223284, "body": "this is unrelated to the question but <code>&quot;#{username}&quot;</code> is redundant. All you&#39;re interpolating is the variable itself, so it just needs to be <code>username: username</code> etc. Interpolation is for when the string contains more than just dynamic Ruby code."}, {"owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "edited": false, "score": 0, "creation_date": 1481071140, "post_id": 41005617, "comment_id": 69223309, "body": "also can you please add the contents of the <code>#restore_disabled_account</code> method and try removing the bang <code>!</code> from <code>let!</code>?"}, {"owner": {"reputation": 515, "user_id": 259638, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b844245246ce6e0a9977b02c9572fa0e?s=128&d=identicon&r=PG", "display_name": "Warren", "link": "https://stackoverflow.com/users/259638/warren"}, "reply_to_user": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "edited": false, "score": 0, "creation_date": 1481117153, "post_id": 41005617, "comment_id": 69244375, "body": "I&#39;ve added the code you asked for. Removing the bang did not change the results unfortunately."}, {"owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "edited": false, "score": 0, "creation_date": 1481122836, "post_id": 41005617, "comment_id": 69248452, "body": "Thanks. Just looking up some things online and found that <code>update_attributes</code> is deprecated (removed?) in 4.1: <a href=\"http://edgeguides.rubyonrails.org/4_1_release_notes.html\" rel=\"nofollow noreferrer\">edgeguides.rubyonrails.org/4_1_release_notes.html</a>. Can you try changing the method to <code>update</code>? Also, stop again before the <code>reload</code> statement and call <code>valid?</code> on the object. The API docs say that <code>false</code> will be returend (so no Exception) if the object is invalid when it tries to save: <a href=\"http://apidock.com/rails/ActiveRecord/Persistence/update\" rel=\"nofollow noreferrer\">apidock.com/rails/ActiveRecord/Persistence/update</a>"}, {"owner": {"reputation": 515, "user_id": 259638, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b844245246ce6e0a9977b02c9572fa0e?s=128&d=identicon&r=PG", "display_name": "Warren", "link": "https://stackoverflow.com/users/259638/warren"}, "reply_to_user": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "edited": false, "score": 0, "creation_date": 1481123714, "post_id": 41005617, "comment_id": 69249015, "body": "I hadn&#39;t noticed that deprecation yet. Changing update_attributes to update did not, however, change the results. I&#39;ll add one other note. When running this test, I&#39;ve seen an UPDATE query run in the test.log which restores the original values when the m3_user.reload step is executed."}, {"owner": {"reputation": 515, "user_id": 259638, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b844245246ce6e0a9977b02c9572fa0e?s=128&d=identicon&r=PG", "display_name": "Warren", "link": "https://stackoverflow.com/users/259638/warren"}, "reply_to_user": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "edited": false, "score": 1, "creation_date": 1481126693, "post_id": 41005617, "comment_id": 69251219, "body": "It turns out that ActiveRecord 4.1 changed the <code>reload</code> method to call a new private method called <code>reset_changes</code>. My User class also had a <code>reset_changes</code> method so my method overrode what should have been called. I&#39;ve changed it to <code>undo_changes</code> and my specs are green. Thanks for looking at this."}, {"owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "edited": false, "score": 1, "creation_date": 1481126834, "post_id": 41005617, "comment_id": 69251307, "body": "Definitely add that as an answer! Tricky one"}], "answers": [{"tags": [], "owner": {"reputation": 515, "user_id": 259638, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b844245246ce6e0a9977b02c9572fa0e?s=128&d=identicon&r=PG", "display_name": "Warren", "link": "https://stackoverflow.com/users/259638/warren"}, "is_accepted": false, "score": 0, "last_activity_date": 1481142565, "creation_date": 1481142565, "answer_id": 41026807, "question_id": 41005617, "link": "https://stackoverflow.com/questions/41005617/reloading-an-activerecord-object-in-rspec-updates-the-database-record-instead-of/41026807#41026807", "title": "Reloading an activerecord object in rspec updates the database record instead of reloading the object from the db", "body": "<p>The short answer: It turns out that ActiveRecord 4.1 changed the <code>reload</code> method to call a new private method called <code>reset_changes</code>. My User class also had a <code>reset_changes</code> method so my method overrode what should have been called. </p>\n\n<p>The long answer: The more I looked at this, the more I suspected something unique to my User model. Other tests using <code>reload</code> performed as expected. I then came across a <code>reset_changes</code> method in User. After seeing what it did (update the db record with the previous values), I dropped a puts statement into it so I would see if it was called. Once that was confirmed, I dumped the caller backtrace which pointed me to <a href=\"https://github.com/rails/rails/blob/4-1-stable/activerecord/lib/active_record/attribute_methods/dirty.rb#L37\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/4-1-stable/activerecord/lib/active_record/attribute_methods/dirty.rb#L37</a></p>\n\n<p>I've changed my User model method to <code>undo_changes</code> and my specs are green.</p>\n"}], "owner": {"reputation": 515, "user_id": 259638, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b844245246ce6e0a9977b02c9572fa0e?s=128&d=identicon&r=PG", "display_name": "Warren", "link": "https://stackoverflow.com/users/259638/warren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1505, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1481142565, "creation_date": 1481061232, "last_edit_date": 1481116891, "question_id": 41005617, "link": "https://stackoverflow.com/questions/41005617/reloading-an-activerecord-object-in-rspec-updates-the-database-record-instead-of", "title": "Reloading an activerecord object in rspec updates the database record instead of reloading the object from the db", "body": "<p>I am upgrading my app from Rails 4.0 to 4.1 (on my way to 4.2) and have tests like this that are failing:</p>\n\n<pre><code>describe \"#restore_disabled_account\" do\n  let(:username) { 'username' }\n  let(:email) { 'email@domain.com' }\n  let(:m3_user) { create(:user, username: username,\n                                   email: email,\n                                archived: false,\n                  propagate_in_test_mode: true) }\n  let(:m2_user) { Maestro2::User.where(UserID: m3_user.id).first }\n\n  before do\n    m3_user.disable_account\n  end\n\n  it \"unarchives the account\" do\n    m3_user.restore_disabled_account\n    m3_user.reload\n    expect(m3_user.archived).to be_falsey\n  end\nend\n</code></pre>\n\n<p>I have verified that the database contains a record with the expected attributes at the beginning of this test. When debugging the test and I stop before the reload statement, I see that the db record has been updated as expected (archived is false and other attributes are updated as expected). I can also see that the m3_user object has been updated with the same attributes. When I step forward to run the reload step and query the db, I can see the record has returned to its original state, as has the object in memory. The test then fails because m3_user.archived is true.</p>\n\n<p>Can anybody tell me why? All tests in my suite were passing before starting the upgrade. The app is currently using Ruby 2.2.4, Rails 4.1.16, rspec 3.5.3 and rspec-rails 3.5.2</p>\n\n<p>For reference, the two User class method calls are below:</p>\n\n<pre><code>def disable_account\n  self.update_attributes(username: \"disabled_#{id}_#{username}\",\n                            email: \"disabled_#{id}_#{email}\",\n                         archived: true)\nend\n\ndef restore_disabled_account\n  self.update_attributes(username: username.gsub(/^disabled_#{id}_/, ''),\n                            email: email.gsub(/^disabled_#{id}_/, ''),\n                         archived: false)\nend\n</code></pre>\n"}, {"tags": ["ruby", "xpath", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1481060982, "post_id": 41005257, "comment_id": 69219720, "body": "Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. It really helps when you supply the minimum input data to demonstrate the problem you&#39;re having. As is, you&#39;re asking us to create that data which will be different for everyone trying to help you."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1481061516, "post_id": 41005257, "comment_id": 69219999, "body": "This isn&#39;t a Ruby or Nokogiri question as much as it is an XPath question. You can find more information on the internet about this by searching for &quot;<code>xpath all nodes containing attribute</code>&quot;. You&#39;d find it much easier to solve the question if you used the CSS selector <code>&#39;.trow1&#39;</code>. This is one of the times that knowing both CSS and XPath helps."}, {"owner": {"reputation": 17608, "user_id": 661624, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/347231f8387561ef324e25b48b96ba16?s=128&d=identicon&r=PG&f=1", "display_name": "Henley Chiu", "link": "https://stackoverflow.com/users/661624/henley-chiu"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1481081817, "post_id": 41005257, "comment_id": 69225952, "body": "of course a css selector is the best choice (obviously) but what if the class is &quot; trow1&quot; (yes a space before trow1). the css selextor doesnt always extract it"}], "owner": {"reputation": 17608, "user_id": 661624, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/347231f8387561ef324e25b48b96ba16?s=128&d=identicon&r=PG&f=1", "display_name": "Henley Chiu", "link": "https://stackoverflow.com/users/661624/henley-chiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "closed_date": 1481061434, "answer_count": 0, "score": 0, "last_activity_date": 1481059793, "creation_date": 1481059793, "question_id": 41005257, "link": "https://stackoverflow.com/questions/41005257/xpath-without-specificy-the-tag", "closed_reason": "Duplicate", "title": "xpath without specificy the tag?", "body": "<p>Is there a way to use XPath in Ruby without specifying the tag?</p>\n\n<p>For example, I want to get <strong><em>all</em></strong> elements whose class contains 'trow1'.\nNot just tr, as the code below is doing:</p>\n\n<pre><code>doc.xpath(\"//tr[contains(@class,'trow1')]\")\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "authentication", "devise"], "answers": [{"comments": [{"owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "edited": false, "score": 0, "creation_date": 1481122521, "post_id": 41006030, "comment_id": 69248255, "body": "I think the the problem is in line 5 of the User model, because the error persisted after I incorporated your suggestions. It seems like for Dropbox it somehow cannot find a url."}, {"owner": {"reputation": 90, "user_id": 5472341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf5dbe2071e88de9580a9e7c97b46880?s=128&d=identicon&r=PG&f=1", "display_name": "James.Oliver", "link": "https://stackoverflow.com/users/5472341/james-oliver"}, "reply_to_user": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "edited": false, "score": 0, "creation_date": 1481127646, "post_id": 41006030, "comment_id": 69251859, "body": "So, the same principle applies. You are calling <code>.first</code> on <code>auth.info.urls</code> which means it&#39;s either empty or doesn&#39;t exist. do debug use pry or byebug to stop your program right before this line and check what the auth is actually returning, then shape your code accordingly."}], "tags": [], "owner": {"reputation": 90, "user_id": 5472341, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf5dbe2071e88de9580a9e7c97b46880?s=128&d=identicon&r=PG&f=1", "display_name": "James.Oliver", "link": "https://stackoverflow.com/users/5472341/james-oliver"}, "is_accepted": false, "score": 1, "last_activity_date": 1481062860, "creation_date": 1481062860, "answer_id": 41006030, "question_id": 41004912, "link": "https://stackoverflow.com/questions/41004912/rails-4-user-authentication-nomethoderror/41006030#41006030", "title": "Rails 4: User Authentication - NoMethodError", "body": "<p>To answer your question directly:\n    The <code>undefined method \"first\" for nil::NilClass</code> is happening because  you are attempting to call the method <code>first</code> on an empty, or nil object.</p>\n\n<p>It's probably in your user model where you are attempting to find a User from a current_user.</p>\n\n<p><code>\n  if authorization.user.blank?\n    user = current_user.nil? ? User.where('email = ?', auth['info']['email']).first : current_user\n    #This will cause the error that you are describing if both the current_user is nil and there is no User whose email is auth['info']['email']\n</code></p>\n\n<p>Now, There's a few things wrong with this. If they are attempting to log in to your application, then current_user at this stage should be unset.</p>\n\n<p>You could try changing this to </p>\n\n<p><code>user = User.where(email: auth['info']['email']).first_or_create</code></p>\n\n<p>Which will create a new instance of User, if one does not exist with the email provided in the Authorization.\nThen you can continue with </p>\n\n<p><code>user.persisted?</code>\nwhich returns true for an existing user, and false for a new instance of User</p>\n"}], "owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481062860, "creation_date": 1481058396, "last_edit_date": 1481058799, "question_id": 41004912, "link": "https://stackoverflow.com/questions/41004912/rails-4-user-authentication-nomethoderror", "title": "Rails 4: User Authentication - NoMethodError", "body": "<p>I've setup a moreless simple social user authentification on top of devise using <em>Google, Linkedin, Dropbox</em> and <em>Github</em>.<br><br>The <em>Dropbox</em> authentication does not work, instead it gives that error on the callback URL<br>(<a href=\"http://localhost:3000/users/auth/dropbox/callback\" rel=\"nofollow noreferrer\">http://localhost:3000/users/auth/dropbox/callback</a>):</p>\n\n<pre><code>NoMethodError in Users::OmniauthCallbacksController#dropbox\nundefined method `first' for nil:NilClass\n</code></pre>\n\n<p><em>Issue:</em> User Model (line 8)<br><br><br>\n<strong>My Code:</strong></p>\n\n<p><em>Callbacks Controller:</em></p>\n\n<pre><code>class Users::OmniauthCallbacksController &lt; Devise::OmniauthCallbacksController\n\n    def all\n        user = User.from_omniauth(env['omniauth.auth'], current_user)\n        if user.persisted?\n            sign_in user\n            flash[:notice] = t('devise.omniauth_callbacks.success', :kind =&gt; User::SOCIALS[params[:action].to_sym])\n            if user.sign_in_count == 1\n                redirect_to edit_user_registration_path\n            else\n                redirect_to root_path\n            end\n        else\n            session['devise.user_attributes'] = user.attributes\n            redirect_to new_user_registration_url\n        end\n    end\n\n    User::SOCIALS.each do |k, _|\n        alias_method k, :all\n    end\n\nend\n</code></pre>\n\n<p><em>User Model:</em></p>\n\n<pre><code># omniauth Gem\ndef self.from_omniauth(auth, current_user)\n    authorization = Authorization.where(:provider =&gt; auth.provider, :uid =&gt; auth.uid.to_s,\n                                        :token =&gt; auth.credentials.token,\n                                        :secret =&gt; auth.credentials.secret).first_or_initialize\n    authorization.profile_page = auth.info.urls.first.last unless authorization.persisted?\n    if authorization.user.blank?\n        user = current_user.nil? ? User.where('email = ?', auth['info']['email']).first : current_user\n        if user.blank?\n            user = User.new\n            user.skip_confirmation!\n            user.password = Devise.friendly_token[0, 20]\n            user.fetch_details(auth)\n            user.save\n        end\n        authorization.user = user\n        authorization.save\n    end\n    authorization.user\nend\n\ndef fetch_details(auth)\n    self.email = auth.info.email\n    self.username = auth.info.name\n    self.avatar = URI.parse(auth.info.image)\nend\n</code></pre>\n\n<p>I appreciate each help! Thanks in advance.</p>\n"}, {"tags": ["ruby", "copy-constructor"], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 4440020, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6221be03f9dcb06d4d4ebae9e9e1cde8?s=128&d=identicon&r=PG&f=1", "display_name": "Bechma", "link": "https://stackoverflow.com/users/4440020/bechma"}, "edited": false, "score": 0, "creation_date": 1481058605, "post_id": 41004742, "comment_id": 69218557, "body": "In C++... you can use ie: Player(const Player &amp; p){ .... } Is there any method like this in ruby?"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1481057804, "creation_date": 1481057804, "answer_id": 41004742, "question_id": 41004493, "link": "https://stackoverflow.com/questions/41004493/how-to-copy-the-super-class-into-the-inherited-class-in-ruby/41004742#41004742", "title": "How to copy the super class into the inherited class in Ruby", "body": "<p>You cannot do it that way, because your <code>Player#new</code> method doesn't accept the same kind arguments and it doesn't accept a player as argument. </p>\n\n<p>But you can change the <code>initalize</code> method and the <code>super</code> call in the subclass to make it work:</p>\n\n<p>Change <code>player.rb</code>:</p>\n\n<pre><code>attr_reader :name, :level, :treasures, :quests # if you don't have getter methods\n\ndef initialize(name, level, treasures = nil, quests = nil)\n  @name      = name\n  @level     = level\n  @treasures = treasures || []\n  @quests    = quests || []\nend\n</code></pre>\n\n<p>and <code>cultist_player.rb</code>:</p>\n\n<pre><code>def initialize(player, cultist)\n  super(player.name, player.level, player.treasures, player.quests)\n  @my_cultist_card = cultist\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 268, "user_id": 2338984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05ae3478316058f15a307e78b936822a?s=128&d=identicon&r=PG", "display_name": "sig", "link": "https://stackoverflow.com/users/2338984/sig"}, "is_accepted": false, "score": 0, "last_activity_date": 1481060700, "last_edit_date": 1481060700, "creation_date": 1481059759, "answer_id": 41005247, "question_id": 41004493, "link": "https://stackoverflow.com/questions/41004493/how-to-copy-the-super-class-into-the-inherited-class-in-ruby/41005247#41005247", "title": "How to copy the super class into the inherited class in Ruby", "body": "<p>I'm not sure that \"transform\" is the best architectural approach. But if you really need it you can try to write like this:</p>\n\n<pre><code>class CultistPlayer &lt; Player\n def initialize(player, cultist)\n   copy_variables(player)\n   @my_cultist_card = cultist\n end\n\n def copy_variables player\n   player.instance_variables.each do |name|\n     instance_variable_set(name, player.instance_variable_get(name))\n   end\n end\nend\n\n#usage:\nsimple_player = Player.new('Ben', 10)\ncultist = CultistPlayer.new(simple_player, 'some cultist card')\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 4440020, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6221be03f9dcb06d4d4ebae9e9e1cde8?s=128&d=identicon&r=PG&f=1", "display_name": "Bechma", "link": "https://stackoverflow.com/users/4440020/bechma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 41004742, "answer_count": 2, "score": 0, "last_activity_date": 1481062222, "creation_date": 1481056965, "last_edit_date": 1481062222, "question_id": 41004493, "link": "https://stackoverflow.com/questions/41004493/how-to-copy-the-super-class-into-the-inherited-class-in-ruby", "title": "How to copy the super class into the inherited class in Ruby", "body": "<p>I have a problem copying these two classes:</p>\n\n<pre><code>module NapakalakiGame\n  class Player\n\n  def initialize(name, level)\n    @name = name\n    @level = level\n    @treasures = Array.new\n    @quests = Array.new\n  end\n...\nend\n</code></pre>\n\n<p>And I want to copy an instance of the above class here:</p>\n\n<pre><code>module NapakalakiGame\n  class CultistPlayer &lt; Player\n\n  def initialize(player, cultist)\n    super\n    @my_cultist_card = cultist\n  end\n...\nend\n</code></pre>\n\n<p>I need to transform the Player into a cultist, so I need to copy all the attributes he has. The constructor of the CultistPlayer receives the Player who wants to be transformed and one cultist card.</p>\n\n<p>For example, if I have a Player named John that has level 30, 5 kinds of treasures and 20 completed quests, when he becomes a cultist I need to keep it all.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2765, "user_id": 5864985, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/UlhbW.jpg?s=128&g=1", "display_name": "Ronan Lopes", "link": "https://stackoverflow.com/users/5864985/ronan-lopes"}, "edited": false, "score": 3, "creation_date": 1481053272, "post_id": 41003483, "comment_id": 69215759, "body": "Add more infos to the question... what method exactly are you calling, how are you calling then on console and what are the outputs?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1481053799, "post_id": 41003483, "comment_id": 69216025, "body": "I have a feeling that the first error is for a method inside your method and then the second error is when calling your method."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1481053866, "post_id": 41003483, "comment_id": 69216062, "body": "When you call <i>what</i> method? How are you calling it? What is the exact stack trace?"}, {"owner": {"reputation": 81, "user_id": 6513027, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ec277bb373975eea2c0037fd5f8fabfe?s=128&d=identicon&r=PG&f=1", "display_name": "antonyCas", "link": "https://stackoverflow.com/users/6513027/antonycas"}, "edited": false, "score": 0, "creation_date": 1481054392, "post_id": 41003483, "comment_id": 69216322, "body": "Sorry I wasnt very clear there i hae updated the question now"}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 2, "last_activity_date": 1481055907, "creation_date": 1481055907, "answer_id": 41004201, "question_id": 41003483, "link": "https://stackoverflow.com/questions/41003483/ruby-method-expecting-wrong-number-of-arguments/41004201#41004201", "title": "Ruby method expecting wrong number of arguments", "body": "<p>It is <code>Friendship.exists?(user,friend)</code> that raises the error. <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-exists-3F\" rel=\"nofollow noreferrer\"><code>exists?</code></a> is a finder method that takes only one argument.</p>\n\n<p>Instead you will need to write something like this:</p>\n\n<pre><code>Friendship.exists?(user_id: user.id, friend_id: friend.id)\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 6513027, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/ec277bb373975eea2c0037fd5f8fabfe?s=128&d=identicon&r=PG&f=1", "display_name": "antonyCas", "link": "https://stackoverflow.com/users/6513027/antonycas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "accepted_answer_id": 41004201, "answer_count": 1, "score": 0, "last_activity_date": 1481062400, "creation_date": 1481053190, "last_edit_date": 1481062400, "question_id": 41003483, "link": "https://stackoverflow.com/questions/41003483/ruby-method-expecting-wrong-number-of-arguments", "title": "Ruby method expecting wrong number of arguments", "body": "<p>I found some strange behaviour with a method I wrote in Ruby. When I call the method with two arguments the console says that it was expecting <code>0..1</code> but when I pass one argument it says it's expecting two. Can anyone explain to me why?</p>\n\n<pre><code>class Friendship &lt; ApplicationRecord\n    belongs_to :user\n    belongs_to :friend, :class_name =&gt; \"User\"\n\n    def self.request(user,friend)\n        unless user == friend or Friendship.exists?(user,friend)\n            transaction do\n                create(:user =&gt; user, :friend =&gt; friend, :status =&gt; 'pending')\n                create(:user =&gt; friend, :friend =&gt; user, :status =&gt; 'requested')\n            end\n        end\n    end\n\n    def self.accept(user,friend)\n        transaction do\n            accepted_at = Time.now\n            accept_one_side(user,friend,accepted_at)\n            accept_one_side(friend,user,accepted_at)\n        end\n    end\n\n    def self.accept_one_side(user,friend,accepted_at)\n        request = find_by_user_id_and_friend_id(user,friend)\n        request.status = 'accepted'\n        request.accepted_at = accepted_at\n        request.save!\n    end\nend\n</code></pre>\n\n<p>It is the request method I am calling in the console like so:</p>\n\n<pre><code>Friendship.request(user1,user2)\n</code></pre>\n\n<p>where <code>user1</code> and <code>user2</code> are the first and second users in my database. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-geocoder"], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 7201911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/18dc9e75ad8173d095a09bbbf32fa145?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Pierce", "link": "https://stackoverflow.com/users/7201911/chris-pierce"}, "is_accepted": false, "score": 0, "last_activity_date": 1481059155, "creation_date": 1481059155, "answer_id": 41005113, "question_id": 41002781, "link": "https://stackoverflow.com/questions/41002781/rails-geocoder-near/41005113#41005113", "title": "Rails geocoder near", "body": "<p>As a partial answer, I believe the method is <code>nearbys</code>, not <code>nearby</code>. That might explain the undefined method error you mentioned. I don't know why you aren't getting results for the <code>near</code> function. The code you posted for the <code>near</code> method looks okay to me.</p>\n"}], "owner": {"reputation": 326, "user_id": 4954795, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/9d5a6a4729a786805054a118296d8bc5?s=128&d=identicon&r=PG&f=1", "display_name": "teresa", "link": "https://stackoverflow.com/users/4954795/teresa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 309, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481084700, "creation_date": 1481050587, "last_edit_date": 1495541324, "question_id": 41002781, "link": "https://stackoverflow.com/questions/41002781/rails-geocoder-near", "title": "Rails geocoder near", "body": "<p>I want to return a list of job postings that are near a location (based on [latitude, longitude]). I am using <a href=\"https://github.com/alexreisner/geocoder\" rel=\"nofollow noreferrer\" title=\"geocoder\">geocoder</a> and it seems to be working. I can import a CSV file with a list of addresses and <code>geocoder</code> populates the latitude and the longitude columns. </p>\n\n<p>But I can't seem to get the <code>near</code> or <code>nearby</code> functions to work. It returns a <code>undefined method</code> error. I've tried following this: <a href=\"https://stackoverflow.com/questions/7620235/rails-geocoder-still-learning\">Rails Geocoder - Still learning</a> which explains that nearby is a model function. But the example there did not work for me either. </p>\n\n<p>This is what I have in my show.html.erb: </p>\n\n<pre><code>&lt;%= @jobposting.latitude %&gt;, &lt;%= @jobposting.longitude %&gt;\n</code></pre>\n\n<p>40.7494011, -73.9389437</p>\n\n<pre><code>&lt;% @location = Jobposting.near([@jobposting.latitude, @jobposting.longitude], 150) %&gt;\n&lt;%= @location.inspect %&gt;\n</code></pre>\n\n<p>It does not error but returns a empty array: <code>#&lt;ActiveRecord::Relation []&gt;</code> when there are points within 10 miles of the latitude and longitude.</p>\n\n<p>I'm unsure if I am calling it incorrectly, based on the documentation it looks like <code>near</code> is used with the model but not limited to calling it in the model.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "associations", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 463, "user_id": 6245540, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7185f4c58a44314c141b64177966c804?s=128&d=identicon&r=PG&f=1", "display_name": "V. D&#233;haye", "link": "https://stackoverflow.com/users/6245540/v-d%c3%a9haye"}, "edited": false, "score": 0, "creation_date": 1481051919, "post_id": 41002822, "comment_id": 69215024, "body": "Turning around your answer (which was great but I didn&#39;t express my needs well), I found the solution. I will post it in a few minutes. Thank you for your help !"}], "tags": [], "owner": {"reputation": 423, "user_id": 7251206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d20c518bbff6b670982173729c6ad1?s=128&d=identicon&r=PG&f=1", "display_name": "M. Stavnycha", "link": "https://stackoverflow.com/users/7251206/m-stavnycha"}, "is_accepted": false, "score": 1, "last_activity_date": 1481050733, "creation_date": 1481050733, "answer_id": 41002822, "question_id": 41002385, "link": "https://stackoverflow.com/questions/41002385/rails-has-many-through-association-access-linking-record-values/41002822#41002822", "title": "Rails has_many :through association access linking record values", "body": "<p>Do you actually want to display in json all tagging pairs of a card?</p>\n\n<p>Maybe that can help:</p>\n\n<pre><code>json.tags(card.taggings.includes(:tag)) do |t|\n  json.id t.tag_id\n  json.name t.tag.name\n  json.tagging_id t.id\n  json.tagging_created_at t.created_at\nend\n</code></pre>\n\n<p>includes(:tag) will fetch all tags in one request, so it won't affect the performance.</p>\n"}, {"tags": [], "owner": {"reputation": 463, "user_id": 6245540, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7185f4c58a44314c141b64177966c804?s=128&d=identicon&r=PG&f=1", "display_name": "V. D&#233;haye", "link": "https://stackoverflow.com/users/6245540/v-d%c3%a9haye"}, "is_accepted": false, "score": 0, "last_activity_date": 1481052083, "creation_date": 1481052083, "answer_id": 41003180, "question_id": 41002385, "link": "https://stackoverflow.com/questions/41002385/rails-has-many-through-association-access-linking-record-values/41003180#41003180", "title": "Rails has_many :through association access linking record values", "body": "<p>I found a very simple solution to my problem :</p>\n\n<pre><code>json.tags(card.taggings) do |t|\n  json.id t.tag.id\n  json.name t.tag.name\n  json.tagging_id t.id\n  json.tagging_created_at t.created_at\nend\n</code></pre>\n\n<p>I was overthinking it !</p>\n"}, {"comments": [{"owner": {"reputation": 463, "user_id": 6245540, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7185f4c58a44314c141b64177966c804?s=128&d=identicon&r=PG&f=1", "display_name": "V. D&#233;haye", "link": "https://stackoverflow.com/users/6245540/v-d%c3%a9haye"}, "edited": false, "score": 0, "creation_date": 1481124616, "post_id": 41003284, "comment_id": 69249719, "body": "Thank you for your answer, it is a good solution. However, I realized that my problem was more simple than I thought, and I solved it in an easier way (see <a href=\"http://stackoverflow.com/a/41003180/6245540\">stackoverflow.com/a/41003180/6245540</a>). Yours would have solved my problem too so I accept it for other people to see this more universal one instead of mine :)"}], "tags": [], "owner": {"reputation": 2765, "user_id": 5864985, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/UlhbW.jpg?s=128&g=1", "display_name": "Ronan Lopes", "link": "https://stackoverflow.com/users/5864985/ronan-lopes"}, "is_accepted": true, "score": 1, "last_activity_date": 1481052452, "creation_date": 1481052452, "answer_id": 41003284, "question_id": 41002385, "link": "https://stackoverflow.com/questions/41002385/rails-has-many-through-association-access-linking-record-values/41003284#41003284", "title": "Rails has_many :through association access linking record values", "body": "<p>You can use the <code>includes</code> method as already answered for eager load, so if you access any attribute through the relationship without doing additional requests to db. Also, you can use <code>delegate</code> on your model. So, for example, on your model card:</p>\n\n<pre><code>delegate :attribute_name, to: :tagging, prefix: :tagging\n</code></pre>\n\n<p>This way, you can access your attribute on a card_object:</p>\n\n<pre><code>card_object.tagging_attribute_name\n</code></pre>\n\n<p>The prefix is optional, to avoid ambiguous attributes names.\nHope this helps!</p>\n"}], "owner": {"reputation": 463, "user_id": 6245540, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7185f4c58a44314c141b64177966c804?s=128&d=identicon&r=PG&f=1", "display_name": "V. D&#233;haye", "link": "https://stackoverflow.com/users/6245540/v-d%c3%a9haye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 41003284, "answer_count": 3, "score": 0, "last_activity_date": 1481052452, "creation_date": 1481049119, "question_id": 41002385, "link": "https://stackoverflow.com/questions/41002385/rails-has-many-through-association-access-linking-record-values", "title": "Rails has_many :through association access linking record values", "body": "<p>I have two models linked via a many-to-many association through a third one. The models are the following : </p>\n\n<pre><code>class Tag &lt; ApplicationRecord\n has_many :taggings\n has_many :cards, through: :taggings, inverse_of: :tags\nend\n\nclass Card &lt; ApplicationRecord\n has_many :taggings\n has_many :tags, through: :taggings, inverse_of: :cards\nend\n\nclass Tagging &lt; ApplicationRecord\n  belongs_to :card\n  belongs_to :tag\nend\n</code></pre>\n\n<p>I need to generate something like that in my _card.json.jbuilder partial :</p>\n\n<pre><code>json.tags(card.tags) do |t|\n  json.id t.id\n  json.name t.name\n  json.tagging_id ?\n  json.tagging_created_at ?\nend\n</code></pre>\n\n<p>I don't want to use another request like </p>\n\n<pre><code>json.tagging_id = Tagging.find_by(card_id: card.id, tag_id: t.id).id\n</code></pre>\n\n<p>because I assume this would deteriorate the performance, making the request longer. </p>\n\n<p>My question is : how to access the attributes of the record linking this card to this tag via the association, if it is possible ?</p>\n\n<p>Thank you in advance for your help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "datetime"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1481049137, "post_id": 41002182, "comment_id": 69213575, "body": "Do you have a question?"}, {"owner": {"reputation": 75, "user_id": 7221332, "user_type": "registered", "profile_image": "https://graph.facebook.com/1366907816675748/picture?type=large", "display_name": "Bruno Lopes Bacelar", "link": "https://stackoverflow.com/users/7221332/bruno-lopes-bacelar"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1481049456, "post_id": 41002182, "comment_id": 69213737, "body": "@Jordan how can I separate my start_time in date and time. And with the time I want to select a range between 08:00 .. 18:00?"}, {"owner": {"reputation": 516, "user_id": 5401931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09d32000a5fe68f84ce025cb8f39aee0?s=128&d=identicon&r=PG", "display_name": "jlesse", "link": "https://stackoverflow.com/users/5401931/jlesse"}, "edited": false, "score": 0, "creation_date": 1481055104, "post_id": 41002182, "comment_id": 69216702, "body": "Can you provide and example of the form you are using? We can&#39;t help you if we can&#39;t see the code you are attempting to make work."}], "owner": {"reputation": 75, "user_id": 7221332, "user_type": "registered", "profile_image": "https://graph.facebook.com/1366907816675748/picture?type=large", "display_name": "Bruno Lopes Bacelar", "link": "https://stackoverflow.com/users/7221332/bruno-lopes-bacelar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1481049405, "creation_date": 1481048296, "last_edit_date": 1481049405, "question_id": 41002182, "link": "https://stackoverflow.com/questions/41002182/datetime-picker-range-of-time", "title": "Datetime picker - Range of time", "body": "<p>I have this model:</p>\n\n<pre><code>create_table \"schedules\", force: :cascade do |t|\nt.datetime \"start_time\"\nt.datetime \"end_time\"\nt.integer  \"property_id\"\nt.string   \"name\"\nt.datetime \"created_at\",  null: false\nt.datetime \"updated_at\",  null: false\nt.string   \"phone\"\nt.string   \"email\"\nt.index [\"property_id\"], name: \"index_schedules_on_property_id\"\n</code></pre>\n\n<p>end</p>\n\n<p>And I wanna separate my start_time in date and time.\nWith the time I want to select a range between 08:00 .. 18:00.</p>\n\n<p>eg: a select box with [08:00, 09:00, 10:00]</p>\n\n<p>Because when I save the date and time, it will not be allowed to choose again the same time to that day.</p>\n\n<p>Did I make myself clear?</p>\n"}, {"tags": ["ruby", "postgresql", "activerecord", "ruby-on-rails-5", "has-many"], "answers": [{"comments": [{"owner": {"reputation": 392, "user_id": 992620, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/210d24eb9c73f9ec5a0aa594e78e182e?s=128&d=identicon&r=PG", "display_name": "Ben Scheib", "link": "https://stackoverflow.com/users/992620/ben-scheib"}, "edited": false, "score": 0, "creation_date": 1481054176, "post_id": 41002512, "comment_id": 69216230, "body": "Thanks. This seems to work. Definitely slows things down though because with sunspot solr I can&#39;t do an :includes anymore with relationships defined this way."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 392, "user_id": 992620, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/210d24eb9c73f9ec5a0aa594e78e182e?s=128&d=identicon&r=PG", "display_name": "Ben Scheib", "link": "https://stackoverflow.com/users/992620/ben-scheib"}, "edited": false, "score": 0, "creation_date": 1481055467, "post_id": 41002512, "comment_id": 69216894, "body": "@BenScheib hmmm that&#39;s a little tougher. might have to dig into rails source to find a solution"}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 0, "last_activity_date": 1481049603, "creation_date": 1481049603, "answer_id": 41002512, "question_id": 41001861, "link": "https://stackoverflow.com/questions/41001861/rails-5-dynamic-conditions-for-has-many/41002512#41002512", "title": "Rails 5 Dynamic Conditions for has_many", "body": "<p>You could just make it an instance method instead. e.g. </p>\n\n<pre><code>def region_location  \n  RegionLocation.find_by_site_id(self.current_site.id) if self.current_site\nend \n</code></pre>\n\n<p>and the second part could just be </p>\n\n<pre><code>delegate :region, to: :region_location, allow_nil: true\n</code></pre>\n\n<p>That should solve this issue for you while maintaining the same functionality</p>\n"}], "owner": {"reputation": 392, "user_id": 992620, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/210d24eb9c73f9ec5a0aa594e78e182e?s=128&d=identicon&r=PG", "display_name": "Ben Scheib", "link": "https://stackoverflow.com/users/992620/ben-scheib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 805, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1481049603, "creation_date": 1481047118, "last_edit_date": 1495542321, "question_id": 41001861, "link": "https://stackoverflow.com/questions/41001861/rails-5-dynamic-conditions-for-has-many", "title": "Rails 5 Dynamic Conditions for has_many", "body": "<p>Been looking everywhere for an answer to this. </p>\n\n<pre><code>has_one :region_location, -&gt;(location)  { where(\"region_locations.site_id = ?\", location.current_site.id) if location.current_site }\n</code></pre>\n\n<p>This code is generating the following exception in my development environment. </p>\n\n<blockquote>\n  <p>\"The association scope 'region_location' is instance dependent (the\n  scope block takes an argument). Preloading instance dependent scopes\n  is not supported.\"</p>\n</blockquote>\n\n<p>It seems like something that was possible in Rails 4 but not in 5 (<a href=\"https://stackoverflow.com/questions/2462203/rails-has-many-with-dynamic-conditions\">Rails has_many with dynamic conditions</a>)? Any suggestions would be greatly appreciated. I thought about making it an instance method instead however I also use the association below.</p>\n\n<pre><code>has_one :region, :through =&gt; :region_location\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "ruby-on-rails-3.2"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 7168458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23f20233e56f4aa9382fa04ce4b7340?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin77", "link": "https://stackoverflow.com/users/7168458/kevin77"}, "edited": false, "score": 0, "creation_date": 1481047566, "post_id": 41001891, "comment_id": 69212786, "body": "if I want the ids can I write: current_user.followed_books.pluck(:author).id ?"}, {"owner": {"reputation": 1116, "user_id": 4122847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Bhoo3PIj7w/AAAAAAAAAAI/AAAAAAAAAF4/OEnQcnM3iI0/photo.jpg?sz=128", "display_name": "Abdoo Dev", "link": "https://stackoverflow.com/users/4122847/abdoo-dev"}, "reply_to_user": {"reputation": 5, "user_id": 7168458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23f20233e56f4aa9382fa04ce4b7340?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin77", "link": "https://stackoverflow.com/users/7168458/kevin77"}, "edited": false, "score": 0, "creation_date": 1481047950, "post_id": 41001891, "comment_id": 69213001, "body": "i edited my answer in case &#39;author&#39; is an object, and the table in your db called &#39;authors&#39;"}, {"owner": {"reputation": 5, "user_id": 7168458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23f20233e56f4aa9382fa04ce4b7340?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin77", "link": "https://stackoverflow.com/users/7168458/kevin77"}, "edited": false, "score": 0, "creation_date": 1481048085, "post_id": 41001891, "comment_id": 69213066, "body": "oh ! You&#39;re very skilled ! Author is string. last question, please :) And if I want all the books of that author ? current_user.followed_books.includes(:author).pluck(&quot;authors&zwnj;&#8203;.book&quot;) ?"}, {"owner": {"reputation": 1116, "user_id": 4122847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Bhoo3PIj7w/AAAAAAAAAAI/AAAAAAAAAF4/OEnQcnM3iI0/photo.jpg?sz=128", "display_name": "Abdoo Dev", "link": "https://stackoverflow.com/users/4122847/abdoo-dev"}, "reply_to_user": {"reputation": 5, "user_id": 7168458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23f20233e56f4aa9382fa04ce4b7340?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin77", "link": "https://stackoverflow.com/users/7168458/kevin77"}, "edited": false, "score": 0, "creation_date": 1481048262, "post_id": 41001891, "comment_id": 69213148, "body": "if &#39;author&#39; is a string , you can just filter books by author <code>Book.where(author: &quot;author_name&quot;)</code>"}, {"owner": {"reputation": 1116, "user_id": 4122847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Bhoo3PIj7w/AAAAAAAAAAI/AAAAAAAAAF4/OEnQcnM3iI0/photo.jpg?sz=128", "display_name": "Abdoo Dev", "link": "https://stackoverflow.com/users/4122847/abdoo-dev"}, "reply_to_user": {"reputation": 5, "user_id": 7168458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23f20233e56f4aa9382fa04ce4b7340?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin77", "link": "https://stackoverflow.com/users/7168458/kevin77"}, "edited": false, "score": 0, "creation_date": 1481048371, "post_id": 41001891, "comment_id": 69213208, "body": "in that case <code>current_user.followed_books.where(author: &quot;author_name&quot;)</code>"}], "tags": [], "owner": {"reputation": 1116, "user_id": 4122847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Bhoo3PIj7w/AAAAAAAAAAI/AAAAAAAAAF4/OEnQcnM3iI0/photo.jpg?sz=128", "display_name": "Abdoo Dev", "link": "https://stackoverflow.com/users/4122847/abdoo-dev"}, "is_accepted": true, "score": 0, "last_activity_date": 1481047865, "last_edit_date": 1481047865, "creation_date": 1481047253, "answer_id": 41001891, "question_id": 41001776, "link": "https://stackoverflow.com/questions/41001776/how-can-i-have-the-names-of-the-authors-of-my-followed-books/41001891#41001891", "title": "How can I have the names of the authors of my followed books?", "body": "<p>if 'author' is an attribute that represents the name of the author you can just access the names like this:</p>\n\n<pre><code>current_user.followed_books.pluck(:author)\n</code></pre>\n\n<p>if 'author' is an object:</p>\n\n<pre><code>current_user.followed_books.includes(:author).pluck(\"authors.name\")\n</code></pre>\n\n<p>if you want the ids</p>\n\n<pre><code>current_user.followed_books.includes(:author).pluck(\"authors.id\")\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 7168458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f23f20233e56f4aa9382fa04ce4b7340?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin77", "link": "https://stackoverflow.com/users/7168458/kevin77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 0, "accepted_answer_id": 41001891, "answer_count": 1, "score": 0, "last_activity_date": 1481047865, "creation_date": 1481046809, "question_id": 41001776, "link": "https://stackoverflow.com/questions/41001776/how-can-i-have-the-names-of-the-authors-of-my-followed-books", "title": "How can I have the names of the authors of my followed books?", "body": "<p>In user.rb (models) I have this :\nhas_many :followed, class_name: Following\nhas_many :followed_books, through: :followed, source: :book</p>\n\n<p>In followed.rb, I have the books' id and the users' id.\nIn book.rb, I have also the author (with the author's name)</p>\n\n<p>How can I have the names of the authors of my followed books ?</p>\n\n<p>Is this correct: current_user.followed_books(:author) \nor just current_user.followed_books.author ?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3.2"], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1481048533, "post_id": 41001843, "comment_id": 69213281, "body": "To be on the safe side, maybe <code>split(&#47;\\s*,\\s*&#47;)</code>."}, {"owner": {"reputation": 29, "user_id": 4789434, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ffaf2b72851661e21f34d85662e151a7?s=128&d=identicon&r=PG&f=1", "display_name": "Lucasio", "link": "https://stackoverflow.com/users/4789434/lucasio"}, "edited": false, "score": 0, "creation_date": 1481118047, "post_id": 41001843, "comment_id": 69245087, "body": "Can you also help me to reverse this? From <code>array = [[1, &#39;Something&#39;, &#39;123456321&#39;], [2, &#39;Something&#39;, &#39;123456321&#39;], [2, &#39;Something&#39;, 1234563212&#39;]]</code> to <code>array = [[1, &#39;Something&#39;, &#39;123456321&#39;], [2, &#39;Something, Something&#39;, &#39;123456321, 1234563212&#39;]]</code>"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 29, "user_id": 4789434, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ffaf2b72851661e21f34d85662e151a7?s=128&d=identicon&r=PG&f=1", "display_name": "Lucasio", "link": "https://stackoverflow.com/users/4789434/lucasio"}, "edited": false, "score": 0, "creation_date": 1481118444, "post_id": 41001843, "comment_id": 69245376, "body": "@Lucasio, could you open a new question. The answer is long and different enough that I wouldn&#39;t be able to write it as a comment in a comprehensive way."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 3, "last_activity_date": 1481047037, "creation_date": 1481047037, "answer_id": 41001843, "question_id": 41001763, "link": "https://stackoverflow.com/questions/41001763/copy-a-subarray-inside-an-array-based-on-its-values-using-ruby-on-rails/41001843#41001843", "title": "Copy a subarray inside an array based on it&#39;s values using ruby on rails", "body": "<pre><code>array.flat_map do |id, names, values|\n  parsed_names  = names.split(', ')\n  parsed_values = values.split(', ')\n\n  parsed_names.zip(parsed_values).map { |name, value| [id, name, value] }\nend\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 4789434, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ffaf2b72851661e21f34d85662e151a7?s=128&d=identicon&r=PG&f=1", "display_name": "Lucasio", "link": "https://stackoverflow.com/users/4789434/lucasio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 135, "favorite_count": 0, "accepted_answer_id": 41001843, "answer_count": 1, "score": -1, "last_activity_date": 1481051790, "creation_date": 1481046744, "last_edit_date": 1481051790, "question_id": 41001763, "link": "https://stackoverflow.com/questions/41001763/copy-a-subarray-inside-an-array-based-on-its-values-using-ruby-on-rails", "title": "Copy a subarray inside an array based on it&#39;s values using ruby on rails", "body": "<p>I have an array of arrays like this:</p>\n\n<pre><code>array = [[1, 'Something', '123456321'], [2, 'Something, Something', '123456321, 1234563212']]\n</code></pre>\n\n<p>I want to loop the subarrays and if the second element of each array contains the comma I want to split that element by comma and then make a copy of that subarray in the array but with single values without comma. So I want to get this result:</p>\n\n<pre><code>array = [[1, 'Something', '123456321'], [2, 'Something', '123456321'], [2, 'Something', 1234563212']]\n</code></pre>\n\n<p>I want to note that if the second element of array it's made of two or more elements like this <em>'Something, Something'</em> then the third element will automatically have the same structure <em>'123456321, 1234563212'</em>. So my question is if it is possible to do something like this using ruby on rails?\nThank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "email", "devise"], "comments": [{"owner": {"reputation": 1127, "user_id": 436112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/301b3c350bcbbd99ea65ee2c467d38e9?s=128&d=identicon&r=PG", "display_name": "Sascha Kaestle", "link": "https://stackoverflow.com/users/436112/sascha-kaestle"}, "edited": false, "score": 1, "creation_date": 1481043836, "post_id": 41000735, "comment_id": 69210550, "body": "this may help:  <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Use-case-insensitive-emails\" rel=\"nofollow noreferrer\">github.com/plataformatec/devise/wiki/&hellip;</a>  appareantly you need to use: <code>User.find_for_authentication(email: params[:email])</code> instead of <code>User.where(email: email)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 273, "user_id": 3826864, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c4a9310554bdfe3de2843227377b55f0?s=128&d=identicon&r=PG", "display_name": "user3826864", "link": "https://stackoverflow.com/users/3826864/user3826864"}, "edited": false, "score": 0, "creation_date": 1481044584, "post_id": 41000884, "comment_id": 69211066, "body": "Thanks! this worked for me and your answer makes sense!"}], "tags": [], "owner": {"reputation": 268, "user_id": 2338984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05ae3478316058f15a307e78b936822a?s=128&d=identicon&r=PG", "display_name": "sig", "link": "https://stackoverflow.com/users/2338984/sig"}, "is_accepted": true, "score": 2, "last_activity_date": 1481044208, "last_edit_date": 1481044208, "creation_date": 1481043732, "answer_id": 41000884, "question_id": 41000735, "link": "https://stackoverflow.com/questions/41000735/rails-capitalized-email-addresses-cause-errors-no-matter-what-i-try/41000884#41000884", "title": "Rails - Capitalized Email Addresses cause errors no matter what I try", "body": "<p>Try to add <code>.downcase</code> here:<br/>\n<code>new_user = User.find_by_email(params[:user][:email].downcase)</code></p>\n\n<p>I suppose that in database you have stored lowercase email value, but in controller in <code>params[:user][:email]</code> you have \"Fjsdlkjs@FLFklsd.com\". Thats why <code>User.find_by_email(params[:user][:email])</code> returns <code>nil</code>, and you cant call <code>uuid</code> method on a nil object.</p>\n"}, {"tags": [], "owner": {"reputation": 47, "user_id": 3505718, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/55e7fa9b3e49ba7bafd9f30b837a0202?s=128&d=identicon&r=PG&f=1", "display_name": "Shuiei", "link": "https://stackoverflow.com/users/3505718/shuiei"}, "is_accepted": false, "score": 0, "last_activity_date": 1481044262, "creation_date": 1481044262, "answer_id": 41001063, "question_id": 41000735, "link": "https://stackoverflow.com/questions/41000735/rails-capitalized-email-addresses-cause-errors-no-matter-what-i-try/41001063#41001063", "title": "Rails - Capitalized Email Addresses cause errors no matter what I try", "body": "<p>Why are you checking manually if the email already exists? Devise normally do that for you. (did you specify the good user table name?</p>\n\n<p>To lower the case in your controller to lower the params you can do</p>\n\n<pre><code>before_action :downcase_email, if: -&gt; { params[:user][:email].present? }\n\ndef downcase_email\n  params[:user][:email].downcase!\nend\n</code></pre>\n\n<p>Btw you could refacto this method <code>check_email</code> into:</p>\n\n<pre><code>def check_email\n  return unless params[:email].present?\n\n  user = User.find_by_email(params[:email].downcase)\n  return 'taken' if Recurly::Account.find(user)\n  'available'\nend\n</code></pre>\n\n<p>Something like that. You don't need to use begin/rescue</p>\n"}, {"tags": [], "owner": {"reputation": 273, "user_id": 3826864, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c4a9310554bdfe3de2843227377b55f0?s=128&d=identicon&r=PG", "display_name": "user3826864", "link": "https://stackoverflow.com/users/3826864/user3826864"}, "is_accepted": false, "score": 1, "last_activity_date": 1481044666, "creation_date": 1481044666, "answer_id": 41001182, "question_id": 41000735, "link": "https://stackoverflow.com/questions/41000735/rails-capitalized-email-addresses-cause-errors-no-matter-what-i-try/41001182#41001182", "title": "Rails - Capitalized Email Addresses cause errors no matter what I try", "body": "<p>Although, I already marked the correct answer above, I wanted to mention that a little javascript onchange event also fixed the problem as well!</p>\n\n<pre><code>&lt;%= f.input_field :email,  placeholder: \"Email\", id:\"email\", onchange: \"this.value=this.value.toLowerCase();\" %&gt;\n</code></pre>\n"}], "owner": {"reputation": 273, "user_id": 3826864, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c4a9310554bdfe3de2843227377b55f0?s=128&d=identicon&r=PG", "display_name": "user3826864", "link": "https://stackoverflow.com/users/3826864/user3826864"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 615, "favorite_count": 0, "accepted_answer_id": 41000884, "answer_count": 3, "score": 1, "last_activity_date": 1481044666, "creation_date": 1481043348, "last_edit_date": 1481043782, "question_id": 41000735, "link": "https://stackoverflow.com/questions/41000735/rails-capitalized-email-addresses-cause-errors-no-matter-what-i-try", "title": "Rails - Capitalized Email Addresses cause errors no matter what I try", "body": "<p>I have a relatively simple Rails app with a form using the Devise gem. The form does not require username but does require email address. Everything works fine and the page directs the user to the next page when their email address is all lowercase. However, when the user enters an email address with an uppercase character in the string, I receive the following error from Rails:</p>\n\n<pre><code>NoMethodError at /users\nundefined method `uuid' for nil:NilClass\n\nRegistrationsController#create\napp/controllers/registrations_controller.rb, line 81\n</code></pre>\n\n<p>On line 81 (<code>email:    new_user.email,</code>):</p>\n\n<pre><code>account         = Account.create(user: resource)\nnew_user        = User.find_by_email(params[:user][:email])\nrecurly_account = Recurly::Account.create(\n        account_code: new_user.uuid,\n        email:        new_user.email,\n        first_name:   new_user.first_name,\n        last_name:    new_user.last_name\n)\nsign_in new_user\n</code></pre>\n\n<p>Request Parameters:</p>\n\n<pre><code>{\"utf8\"=&gt;\"\u2713\",\n \"authenticity_token\"=&gt;\"ySBGjHGNwiyeBqGh9nv0N5a8fIJO51bi1nIByev6a21Zh+ncMx5d99cTGKbKWpPvdYmGiBfLX9Gya0qmglrBWg==\",\n \"plan\"=&gt;\"10day-fmf\",\n \"disc\"=&gt;\"firstmonthfree10day\",\n \"user\"=&gt;{\"first_name\"=&gt;\"asdf\", \"last_name\"=&gt;\"asdfsadf\", \"email\"=&gt;\"Fjsdlkjs@FLFklsd.com\", \"password\"=&gt;\"lsdkjlfkjlskjdf\"},\n \"commit\"=&gt;\"TRY RISK FREE!\",\n \"controller\"=&gt;\"registrations\",\n \"action\"=&gt;\"create\"}\n</code></pre>\n\n<p>--note the email address with uppercase letters</p>\n\n<p>I have researched this problem extensively and found that it has something to do with the email address not being downcased properly. Thus, based on my research I added the following code to various files:</p>\n\n<pre><code># Devise.rb\nconfig.case_insensitive_keys = [:email]\n</code></pre>\n\n\n\n<pre><code># User.rb\ndef downcase_email\n  self.email.downcase!\nend\n\n#registrations_controller.rb\ndef check_email\n  email = params[:email].downcase\n  check = User.where(email: email).first\n\n  begin\n    check_recurly = Recurly::Account.find(email)\n\n    if check_recurly\n      recurly_email = \"taken\"\n    end\n  rescue Recurly::Resource::NotFound =&gt; e\n    recurly_email = \"available\"\n  end\n</code></pre>\n\n<p>However, despite all my attempts at downcasing the email addresses inputted by the user, uppercase letters still cause errors! Any help anyone could give me would be much appreciated!\nThanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1481041876, "post_id": 41000168, "comment_id": 69209194, "body": "Are you in production environment? Because you shouldn&#39;t see info logging as default there."}, {"owner": {"reputation": 1127, "user_id": 436112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/301b3c350bcbbd99ea65ee2c467d38e9?s=128&d=identicon&r=PG", "display_name": "Sascha Kaestle", "link": "https://stackoverflow.com/users/436112/sascha-kaestle"}, "edited": false, "score": 0, "creation_date": 1481043160, "post_id": 41000168, "comment_id": 69210062, "body": "anything can happen if you rescue <code>Exception</code>. You should catch <code>StandardError</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1481043464, "post_id": 41000168, "comment_id": 69210294, "body": "<i>&quot;not working&quot;</i> is rather vague, can you be more specific?"}, {"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "edited": false, "score": 0, "creation_date": 1481044203, "post_id": 41000168, "comment_id": 69210807, "body": "Ok, I&#39;ll update it too <code>StandardError</code> see what happens.. And &quot;not working&quot; is vague, that&#39;s really my problem. I don&#39;t know why, but the process in the <code>begin</code> section doesn&#39;t send to the remote API. But I don&#39;t know why."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1481045577, "post_id": 41000168, "comment_id": 69211731, "body": "How does <code># do some stuff</code> look like?"}, {"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 0, "creation_date": 1481047230, "post_id": 41000168, "comment_id": 69212639, "body": "There isn&#39;t really enough info to answer this; the problem would seem to be that your <code>begin</code> block is never reached (perhaps due to an unhandled exception further up the call chain)."}, {"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "reply_to_user": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 0, "creation_date": 1481050959, "post_id": 41000168, "comment_id": 69214500, "body": "@ChrisHeald hmm, good point.."}], "answers": [{"tags": [], "owner": {"reputation": 268, "user_id": 2338984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05ae3478316058f15a307e78b936822a?s=128&d=identicon&r=PG", "display_name": "sig", "link": "https://stackoverflow.com/users/2338984/sig"}, "is_accepted": false, "score": 0, "last_activity_date": 1481041906, "creation_date": 1481041906, "answer_id": 41000288, "question_id": 41000168, "link": "https://stackoverflow.com/questions/41000168/is-it-possible-for-begin-rescue-to-not-catch-an-exception/41000288#41000288", "title": "Is it possible for begin .. rescue to NOT catch an exception?", "body": "<p>Maybe you can temporary comment rescue block:</p>\n\n<pre><code>#begin\n  ...\n#rescue Exception =&gt; e\n #Rails.logger.info \"#{e.response.message}\"\n</code></pre>\n\n<p>or you can raise raise this exception in rescue:</p>\n\n<pre><code>begin\n  do some stuff\nrescue Exception =&gt; e\n  Rails.logger.info \"#{e.response.message}\"\n  raise e\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1481045806, "last_edit_date": 1495539958, "creation_date": 1481045806, "answer_id": 41001479, "question_id": 41000168, "link": "https://stackoverflow.com/questions/41000168/is-it-possible-for-begin-rescue-to-not-catch-an-exception/41001479#41001479", "title": "Is it possible for begin .. rescue to NOT catch an exception?", "body": "<p>Just use :</p>\n\n<pre><code># do some stuff\n</code></pre>\n\n<p>without any begin/rescue block, and see which Error comes out. Let's say it is <code>NoMethodError</code>. Maybe you have a typo in some of your code, like <code>\"abc\".spilt</code>.\nCorrect it. Try again, maybe you get <code>Errno::ECONNRESET</code>.</p>\n\n<p>Try :</p>\n\n<pre><code>begin\n  # do some stuff\nrescue Errno::ECONNRESET =&gt; e\n  Rails.logger.info \"#{e.message}\"\nend\n</code></pre>\n\n<p>Rinse and repeat, but start from scratch. <code>rescue Exception</code> is just <a href=\"https://stackoverflow.com/questions/10048173/why-is-it-bad-style-to-rescue-exception-e-in-ruby\">too much</a>.</p>\n"}], "owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 915, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1481045806, "creation_date": 1481041551, "last_edit_date": 1481043959, "question_id": 41000168, "link": "https://stackoverflow.com/questions/41000168/is-it-possible-for-begin-rescue-to-not-catch-an-exception", "title": "Is it possible for begin .. rescue to NOT catch an exception?", "body": "<p>I have a process that is within a <code>begin</code> <code>rescue</code> loop, that looks like this:</p>\n\n<pre><code>begin\n  # do some stuff\nrescue Exception =&gt; e\n  Rails.logger.info \"#{e.response.message}\"\nend\n</code></pre>\n\n<p>Is it possible for this to NOT catch an exception? For some reason my process is running, not throwing errors, but randomly not working.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rvm", "chruby"], "answers": [{"tags": [], "owner": {"reputation": 1127, "user_id": 436112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/301b3c350bcbbd99ea65ee2c467d38e9?s=128&d=identicon&r=PG", "display_name": "Sascha Kaestle", "link": "https://stackoverflow.com/users/436112/sascha-kaestle"}, "is_accepted": false, "score": 0, "last_activity_date": 1481043510, "creation_date": 1481043510, "answer_id": 41000800, "question_id": 41000031, "link": "https://stackoverflow.com/questions/41000031/chruby-and-rvm-i-dont-recall-ever-installing-chruby-but-im-consistently-getti/41000800#41000800", "title": "Chruby and RVM I don&#39;t recall ever installing Chruby, but I&#39;m consistently getting this message chruby: unknown Ruby: ruby-2.3.3", "body": "<p>You don't need <code>chruby</code> if you have <code>rvm</code> or <code>rbenv</code>. </p>\n\n<p>I would consider uninstalling <code>chruby</code> &amp; <code>rvm</code> (and any other ruby version manager that may be lurking around on your system) and go for a fresh install of <code>rvm</code> or <code>rbenv</code></p>\n\n<p><a href=\"https://rvm.io/workflow/chruby\" rel=\"nofollow noreferrer\">https://rvm.io/workflow/chruby</a> (how rvm and chruby are supposed to run side-by-side)\n<a href=\"https://github.com/postmodern/chruby#uninstall\" rel=\"nofollow noreferrer\">https://github.com/postmodern/chruby#uninstall</a> (how to uninstall chruby)</p>\n"}], "owner": {"reputation": 311, "user_id": 2718180, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/HYXB3.png?s=128&g=1", "display_name": "Lenocam", "link": "https://stackoverflow.com/users/2718180/lenocam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 273, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481043510, "creation_date": 1481041165, "question_id": 41000031, "link": "https://stackoverflow.com/questions/41000031/chruby-and-rvm-i-dont-recall-ever-installing-chruby-but-im-consistently-getti", "title": "Chruby and RVM I don&#39;t recall ever installing Chruby, but I&#39;m consistently getting this message chruby: unknown Ruby: ruby-2.3.3", "body": "<p>I've done some reading here and I'm not sure I understand the distinction or the necessity of Chruby if I already have RVM. I don't ever remember specifically installing it and the more I read about it the more I'm confused by what it actually is supposed to do for me. </p>\n\n<p>I recently re-installed RVM and updated to Ruby 2.3.3 which is when I started seeing the <code>chruby: unknown Ruby: ruby-2.3.3</code> warning. As I read about Chruby, if I'm understanding this correctly, it holds the same function as RVM in that it switches between rubies, however, it does not install them. </p>\n\n<p>What I don't understand is if RVM can do both of those things why do I need Chruby and why should it also be installed at the same time as RVM? Is there some sort of conflict between the two similarly functioning pieces of software over who is in charge of setting the current ruby? How did it get on my system? Should I do something about chruby and/or rvm?</p>\n"}, {"tags": ["ruby", "internals"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1481060023, "post_id": 40999969, "comment_id": 69219253, "body": "It would help the Ruby authors tremendously, if you could point out <i>exactly</i> which part of the <code>size</code> method&#39;s documentation you don&#39;t understand, so that they can improve it for future readers."}], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 4840474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88b9685b5ecedfa95ef26343edb0f2f6?s=128&d=identicon&r=PG&f=1", "display_name": "Vivak kumar", "link": "https://stackoverflow.com/users/4840474/vivak-kumar"}, "edited": false, "score": 0, "creation_date": 1481041679, "post_id": 41000057, "comment_id": 69209051, "body": "Can you tell me what is the action done by the size function?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 175, "user_id": 4840474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88b9685b5ecedfa95ef26343edb0f2f6?s=128&d=identicon&r=PG&f=1", "display_name": "Vivak kumar", "link": "https://stackoverflow.com/users/4840474/vivak-kumar"}, "edited": false, "score": 0, "creation_date": 1481041765, "post_id": 41000057, "comment_id": 69209116, "body": "@Vivakkumar it basically says how much memory (in bytes) is used to store the number."}, {"owner": {"reputation": 175, "user_id": 4840474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88b9685b5ecedfa95ef26343edb0f2f6?s=128&d=identicon&r=PG&f=1", "display_name": "Vivak kumar", "link": "https://stackoverflow.com/users/4840474/vivak-kumar"}, "edited": false, "score": 0, "creation_date": 1481041910, "post_id": 41000057, "comment_id": 69209224, "body": "Is it returning bitwise memory representation?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 175, "user_id": 4840474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88b9685b5ecedfa95ef26343edb0f2f6?s=128&d=identicon&r=PG&f=1", "display_name": "Vivak kumar", "link": "https://stackoverflow.com/users/4840474/vivak-kumar"}, "edited": false, "score": 0, "creation_date": 1481041959, "post_id": 41000057, "comment_id": 69209256, "body": "@Vivakkumar, no, only how many bytes it requires to be stored."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 4, "last_activity_date": 1481041627, "last_edit_date": 1481041627, "creation_date": 1481041235, "answer_id": 41000057, "question_id": 40999969, "link": "https://stackoverflow.com/questions/40999969/size-function-for-ruby-fixnum-class/41000057#41000057", "title": "Size function for ruby Fixnum class", "body": "<p>Ruby internally uses two different structures for storing integers - <code>Fixnum</code> and <code>Bignum</code>. The first one is used for smaller number and maps directly to a long integer on the host architecture. It's faster and constant in size, but limited on how much it can store. The latter is used for storring arbitrarily large numbers and its size depends on how big the number is.</p>\n\n<pre><code>1000000.class              # =&gt; Fixnum\n99999999999999999999.class # =&gt; Bignum\n</code></pre>\n\n<p>The conversion is done internally. In fact with ruby 2.4.0, there will be only one class - <code>Integer</code>.</p>\n"}], "owner": {"reputation": 175, "user_id": 4840474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88b9685b5ecedfa95ef26343edb0f2f6?s=128&d=identicon&r=PG&f=1", "display_name": "Vivak kumar", "link": "https://stackoverflow.com/users/4840474/vivak-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 41000057, "answer_count": 1, "score": 1, "last_activity_date": 1481041684, "creation_date": 1481040957, "last_edit_date": 1481041684, "question_id": 40999969, "link": "https://stackoverflow.com/questions/40999969/size-function-for-ruby-fixnum-class", "title": "Size function for ruby Fixnum class", "body": "<p>Why the ruby size function for the number returning output like this?</p>\n\n<pre><code>1000000.size              # =&gt; 8\n99999999999999999999.size # =&gt; 9\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "scaffold"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "edited": false, "score": 1, "creation_date": 1481038385, "post_id": 40998831, "comment_id": 69206773, "body": "do you have some error message? One thing you need to do for the has_many declarations is to use the plural (e.g. has_many :submissionstudents \\ has_many :submissions, through: :submissionstudents)"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6673373, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1028660663908472/picture?type=large", "display_name": "Giovanni Pecchio", "link": "https://stackoverflow.com/users/6673373/giovanni-pecchio"}, "edited": false, "score": 0, "creation_date": 1481038680, "post_id": 40999088, "comment_id": 69206986, "body": "Sorry but I am new at ruby on rails, what will the name change do? Thanks"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 13, "user_id": 6673373, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1028660663908472/picture?type=large", "display_name": "Giovanni Pecchio", "link": "https://stackoverflow.com/users/6673373/giovanni-pecchio"}, "edited": false, "score": 0, "creation_date": 1481038968, "post_id": 40999088, "comment_id": 69207201, "body": "ever heard convention over configuration? <a href=\"https://en.wikibooks.org/wiki/Ruby_on_Rails/Getting_Started/Convention_Over_Configuration\" rel=\"nofollow noreferrer\">en.wikibooks.org/wiki/Ruby_on_Rails/Getting_Started/&hellip;</a>"}, {"owner": {"reputation": 13, "user_id": 6673373, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1028660663908472/picture?type=large", "display_name": "Giovanni Pecchio", "link": "https://stackoverflow.com/users/6673373/giovanni-pecchio"}, "edited": false, "score": 0, "creation_date": 1481045316, "post_id": 40999088, "comment_id": 69211558, "body": "and what should I put instead of this? Thanks  &lt;td&gt;&lt;%= student.submission.pluck(:name).join(&#39; - &#39;) %&gt;&lt;/td&gt;"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 13, "user_id": 6673373, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1028660663908472/picture?type=large", "display_name": "Giovanni Pecchio", "link": "https://stackoverflow.com/users/6673373/giovanni-pecchio"}, "edited": false, "score": 0, "creation_date": 1481046448, "post_id": 40999088, "comment_id": 69212209, "body": "<code>&lt;td&gt;&lt;%= student.submissions.pluck(:name).join(&#39; - &#39;) %&gt;&lt;&#47;td&gt;</code> or <code>&lt;td&gt;&lt;%= student.submissions.map(&amp;:name).join(&#39; - &#39;) %&gt;&lt;&#47;td&gt;</code>"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 13, "user_id": 6673373, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1028660663908472/picture?type=large", "display_name": "Giovanni Pecchio", "link": "https://stackoverflow.com/users/6673373/giovanni-pecchio"}, "edited": false, "score": 0, "creation_date": 1481046500, "post_id": 40999088, "comment_id": 69212232, "body": "It should be <code>submissions</code> : plural because the association is <code>student has_many :submissions</code>"}, {"owner": {"reputation": 13, "user_id": 6673373, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1028660663908472/picture?type=large", "display_name": "Giovanni Pecchio", "link": "https://stackoverflow.com/users/6673373/giovanni-pecchio"}, "edited": false, "score": 0, "creation_date": 1481046922, "post_id": 40999088, "comment_id": 69212465, "body": "it tells me:  uninitialized constant Student::StudentSubmission"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 13, "user_id": 6673373, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1028660663908472/picture?type=large", "display_name": "Giovanni Pecchio", "link": "https://stackoverflow.com/users/6673373/giovanni-pecchio"}, "edited": false, "score": 0, "creation_date": 1481050098, "post_id": 40999088, "comment_id": 69214059, "body": "You haven&#39;t created the association properly"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "reply_to_user": {"reputation": 13, "user_id": 6673373, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1028660663908472/picture?type=large", "display_name": "Giovanni Pecchio", "link": "https://stackoverflow.com/users/6673373/giovanni-pecchio"}, "edited": false, "score": 0, "creation_date": 1481050161, "post_id": 40999088, "comment_id": 69214094, "body": "please check if you have replaced associations as per suggested even if a single <code>s</code> is missing from the association that will cause an issue"}, {"owner": {"reputation": 13, "user_id": 6673373, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1028660663908472/picture?type=large", "display_name": "Giovanni Pecchio", "link": "https://stackoverflow.com/users/6673373/giovanni-pecchio"}, "edited": false, "score": 0, "creation_date": 1481055045, "post_id": 40999088, "comment_id": 69216668, "body": "I checked everything and it&#39;s still not working, any ideas?"}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": false, "score": 0, "last_activity_date": 1481038904, "last_edit_date": 1481038904, "creation_date": 1481038423, "answer_id": 40999088, "question_id": 40998831, "link": "https://stackoverflow.com/questions/40998831/connect-student-id-to-submission-id-in-rails/40999088#40999088", "title": "Connect student_id to submission_id in Rails", "body": "<p>You might need to change the association_name, table_name, model_name and file_names as per the best practices and I am sure it will work</p>\n\n<ul>\n<li>Model name: Singular CamelCase e.g <code>StudentSubmission</code></li>\n<li>Model file name: singular snake_case (_ seperated) e.g. <code>student_submission</code></li>\n<li>Table name: plural <code>submissions</code></li>\n<li>Join table name: plural e.g. <code>students_submissions</code> # table name in alphabetical order student will come first submission later</li>\n<li>has_many association: plural e.g. <code>student_submissions</code></li>\n<li>belongs_to and has_one association: Singular e.g. <code>submission</code></li>\n</ul>\n\n<p><strong>student.rb:</strong></p>\n\n<pre><code>class Student &lt; ActiveRecord::Base\n  has_many :student_submissions\n  has_many :submissions, :through =&gt; :student_submissions\nend\n</code></pre>\n\n<p><strong>submission.rb:</strong></p>\n\n<pre><code>class Submission &lt; ActiveRecord::Base\n  belongs_to :form\n\n  has_many :student_submissions\n  has_many :students, :through =&gt; :student_submissions\nend\n</code></pre>\n\n<p><strong>student_submission.rb:</strong></p>\n\n<pre><code>class StudentSubmission &lt; ActiveRecord::Base\n  # join_table_name: students_submissions\n  belongs_to :submission\n  belongs_to :student\nend\n</code></pre>\n\n<p>also you will need to change the associations where ever you are using them</p>\n\n<pre><code>@student_submission = @submission.student_submissions.build\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6673373, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/1028660663908472/picture?type=large", "display_name": "Giovanni Pecchio", "link": "https://stackoverflow.com/users/6673373/giovanni-pecchio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481038904, "creation_date": 1481037712, "question_id": 40998831, "link": "https://stackoverflow.com/questions/40998831/connect-student-id-to-submission-id-in-rails", "title": "Connect student_id to submission_id in Rails", "body": "<p>I was trying to connect my student_id to the submission_id, but it's not working. I have a join table which is called submissionstudent. </p>\n\n<p>Student Controller.rb:</p>\n\n<pre><code>class StudentsController &lt; ApplicationController\nbefore_action :set_student, only: [:show, :edit, :update, :destroy]\n\n  # GET /students\n  # GET /students.json\n  def index\n    @students = Student.all\n  end\n\n  # GET /students/1\n  # GET /students/1.json\n  def show\n  end\n\n  # GET /students/new\n  def new\n    @student = Student.new\n  end\n\n  # GET /students/1/edit\n  def edit\n  end\n\n  # POST /students\n  # POST /students.json\n  def create\n    @student = Student.new(student_params)\n\n    respond_to do |format|\n      if @student.save\n        format.html { redirect_to @student, notice: 'Student was successfully created.' }\n        format.json { render :show, status: :created, location: @student }\n      else\n        format.html { render :new }\n        format.json { render json: @student.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /students/1\n  # PATCH/PUT /students/1.json\n  def update\n    respond_to do |format|\n      if @student.update(student_params)\n        format.html { redirect_to @student, notice: 'Student was successfully updated.' }\n        format.json { render :show, status: :ok, location: @student }\n      else\n        format.html { render :edit }\n        format.json { render json: @student.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /students/1\n  # DELETE /students/1.json\n  def destroy\n    @student.destroy\n    respond_to do |format|\n      format.html { redirect_to students_url, notice: 'Student was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_student\n      @student = Student.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def student_params\n      params.require(:student).permit(:name)\n    end\nend\n</code></pre>\n\n<p>Submission Controller.rb:</p>\n\n<pre><code>class SubmissionsController &lt; ApplicationController\nbefore_action :set_submission, only: [:show, :edit, :update, :destroy]\n  before_action :set_form\n\n  # GET /submissions/new\n  def new\n    @submission = Submission.new\n\n    @all_students = Student.all\n\n    @submission_student = @submission.submissionstudent.build\n  end\n\n  # GET /submissions/1/edit\n  def edit\n  end\n\n  # POST /submissions\n  # POST /submissions.json\n  def create\n    @submission = Submission.new(submission_params)\n    @submission.form_id = @form.id\n\n    respond_to do |format|\n      if @submission.save\n        format.html { redirect_to @form, notice: 'Submission was successfully created.' }\n        format.json { render :show, status: :created, location: @submission }\n      else\n        format.html { render :new }\n        format.json { render json: @submission.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /submissions/1\n  # PATCH/PUT /submissions/1.json\n  def update\n    respond_to do |format|\n      if @submission.update(submission_params)\n        format.html { redirect_to @submission, notice: 'Submission was successfully updated.' }\n        format.json { render :show, status: :ok, location: @submission }\n      else\n        format.html { render :edit }\n        format.json { render json: @submission.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /submissions/1\n  # DELETE /submissions/1.json\n  def destroy\n    @submission.destroy\n    respond_to do |format|\n      format.html { redirect_to submissions_url, notice: 'Submission was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_submission\n      @submission = Submission.find(params[:id])\n    end\n\n    def set_form\n      @form = Form.find(params[:form_id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def submission_params\n      params.require(:submission).permit(:conflict, :computer, :extra_time, :am_pm)\n    end\nend\n</code></pre>\n\n<p>Model Student.rb:</p>\n\n<pre><code>class Student &lt; ActiveRecord::Base\n  has_many :submissionstudent\n  has_many :submissions, :through =&gt; :submissionstudent\nend\n</code></pre>\n\n<p>Model Submission.rb:</p>\n\n<pre><code>class Submission &lt; ActiveRecord::Base\n  belongs_to :form\n\n  has_many :submissionstudent\n  has_many :students, :through =&gt; :submissionstudent\nend\n</code></pre>\n\n<p>Join table model Studentsubmission.rb:</p>\n\n<pre><code>class Submissionstudent &lt; ActiveRecord::Base\n  belongs_to :submission\n  belongs_to :student\nend\n</code></pre>\n\n<p>Tell me if you need any more code,\nThanks for your help</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "html-email", "pony"], "answers": [{"comments": [{"owner": {"reputation": 215, "user_id": 4834392, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/61c81bd8dd891d47ae3c9c676c2d145a?s=128&d=identicon&r=PG&f=1", "display_name": "Hakan Kara", "link": "https://stackoverflow.com/users/4834392/hakan-kara"}, "edited": false, "score": 0, "creation_date": 1481090936, "post_id": 41000036, "comment_id": 69228783, "body": "Hi , I have already tried this method, but when I display mail , it shows pure string with img tag like &quot;&lt;img src=&quot;data:image/png;base64,iV2312_encoding_string&quot;/&gt;&quot;"}, {"owner": {"reputation": 3187, "user_id": 162034, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/VG5pY.jpg?s=128&g=1", "display_name": "Constant Meiring", "link": "https://stackoverflow.com/users/162034/constant-meiring"}, "reply_to_user": {"reputation": 215, "user_id": 4834392, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/61c81bd8dd891d47ae3c9c676c2d145a?s=128&d=identicon&r=PG&f=1", "display_name": "Hakan Kara", "link": "https://stackoverflow.com/users/4834392/hakan-kara"}, "edited": false, "score": 0, "creation_date": 1481099589, "post_id": 41000036, "comment_id": 69232730, "body": "Ah. You need to set the content type to HTML in the header, else it&#39;ll handle it as text. Looking at your original question, it seems that the content type is currently set as <code>text&#47;plain</code>. I&#39;ve updated the question to add this."}, {"owner": {"reputation": 215, "user_id": 4834392, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/61c81bd8dd891d47ae3c9c676c2d145a?s=128&d=identicon&r=PG&f=1", "display_name": "Hakan Kara", "link": "https://stackoverflow.com/users/4834392/hakan-kara"}, "edited": false, "score": 0, "creation_date": 1481102717, "post_id": 41000036, "comment_id": 69234766, "body": "As you said I added headers option, but the result is the same for me. Like this pure string &#39;&#39;&lt;img src=&quot;data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAYABgAAD/ASD.&zwnj;&#8203;../&gt; :("}, {"owner": {"reputation": 2408, "user_id": 81328, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a1a853094a29f01f7dcf078d361a5bae?s=128&d=identicon&r=PG", "display_name": "Rafa de Castro", "link": "https://stackoverflow.com/users/81328/rafa-de-castro"}, "edited": false, "score": 0, "creation_date": 1543588746, "post_id": 41000036, "comment_id": 93984595, "body": "GMail strips imgs with the data embedded."}], "tags": [], "owner": {"reputation": 3187, "user_id": 162034, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/VG5pY.jpg?s=128&g=1", "display_name": "Constant Meiring", "link": "https://stackoverflow.com/users/162034/constant-meiring"}, "is_accepted": false, "score": 0, "last_activity_date": 1481099582, "last_edit_date": 1481099582, "creation_date": 1481041176, "answer_id": 41000036, "question_id": 40998085, "link": "https://stackoverflow.com/questions/40998085/sending-mail-with-embedded-image-in-ruby/41000036#41000036", "title": "Sending mail with embedded image in Ruby", "body": "<p>You should be able to BASE64 encode the image, and use the resulting string as the <code>src</code> of the <code>img</code> tag.</p>\n\n<p>For example:</p>\n\n<pre><code>&lt;img src=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAWQAAAD8CAYAAAB...\"/&gt;\n</code></pre>\n\n<p>Also make sure that your content type is set as <code>text/html</code> instead of <code>text/plain</code>. Looking at the mail, it seems that it's set to the latter, hence why images don't render and tags render as text. Add the following to your arguments to use <code>text/html</code> content type:</p>\n\n<p><code>:headers =&gt; { 'Content-Type' =&gt; 'text/html' }</code></p>\n"}], "owner": {"reputation": 215, "user_id": 4834392, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/61c81bd8dd891d47ae3c9c676c2d145a?s=128&d=identicon&r=PG&f=1", "display_name": "Hakan Kara", "link": "https://stackoverflow.com/users/4834392/hakan-kara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1189, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481099582, "creation_date": 1481035616, "question_id": 40998085, "link": "https://stackoverflow.com/questions/40998085/sending-mail-with-embedded-image-in-ruby", "title": "Sending mail with embedded image in Ruby", "body": "<p>I want to send a mail with an attached image and embed this image in html. As a source for  tag , What should I write and is there any missing header parts such a content_type ? </p>\n\n<p>When I am doing real test, I send to a mail to my gmail account. I can see there is an attachment with name \"unnamed\" and I could not display image even when I download.</p>\n\n<p>Gem: Pony</p>\n\n<pre><code>require 'pony'\nPony.override_options = { :via =&gt; :test }\nPony.mail(\n    :to =&gt; 'foo@bar',\n    :from =&gt; 'abc@abc.com',\n    :subject =&gt; 'test123',\n    :body =&gt;   \"&lt;h1&gt;&lt;strong&gt;Dear X, check the newsletter ,&lt;br&gt;&lt;/strong&gt;&lt;/h1&gt; &lt;img src='attached image' /&gt;\",\n    :attachments =&gt; {\"happy_image.jpg\" =&gt; File.read(\"happy_image.jpg\")}\n)\nputs Mail::TestMailer.deliveries\n</code></pre>\n\n<p>output: </p>\n\n<pre><code>Date: Tue, 06 Dec 2016 17:23:05 +0300\n\nFrom: abc@abc.com\n\nTo: foo@bar\n\nMessage-ID: &lt;5846c9ca183d6_5983c9fd899060@MW7BIQ12TKYHQC.mail&gt;\n\nSubject: test123\n\nMime-Version: 1.0\n\nContent-Type: multipart/mixed;\n\nboundary=\"--==_mimepart_5846c9caf15a_5983c9fd8989e5\";\n\ncharset=UTF-8\n\nContent-Transfer-Encoding: 7bit\n\n\n\n\n\n----==_mimepart_5846c9caf15a_5983c9fd8989e5\n\nContent-Type: text/plain;\n\ncharset=UTF-8\n\nContent-Transfer-Encoding: 7bit\n\n\n\n&lt;h1&gt;&lt;strong&gt;Dear X, check the newsletter ,&lt;br&gt;&lt;/strong&gt;&lt;/h1&gt; &lt;img src='' /&gt;\n\n----==_mimepart_5846c9caf15a_5983c9fd8989e5\n\nContent-Type: image/jpeg;\n\n filename=happy_image.jpg\n\nContent-Transfer-Encoding: base64\n\nContent-Disposition: attachment;\n\nfilename=happy_image.jpg\n\nContent-ID: &lt;happy_image.jpg@MW7BIQ12TKYHQC&gt;\n\n\n\n/9j/4AAQSkZJRgABAQEAYABgAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQE\n\nBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/\n\n2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU\n\nFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wAARCAHiAuMDASIAAhEBAxEB/8QA\n\nHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUF\n\nBAQAAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkK\n\nFhcYGQ==\n\n\n\n----==_mimepart_5846c9caf15a_5983c9fd8989e5--\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "join", "crud"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 6671346, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f21d6e3bc590444a3207db372de47468?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Leung", "link": "https://stackoverflow.com/users/6671346/joe-leung"}, "edited": false, "score": 0, "creation_date": 1481077797, "post_id": 40998128, "comment_id": 69225000, "body": "Thanks for your suggestion. Have tried and updated in the question, but with no luck..., I thought the critical point may be the difference of #save and #update(params). Do you have any thought about this? Big thanks."}, {"owner": {"reputation": 2765, "user_id": 5864985, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/UlhbW.jpg?s=128&g=1", "display_name": "Ronan Lopes", "link": "https://stackoverflow.com/users/5864985/ronan-lopes"}, "reply_to_user": {"reputation": 91, "user_id": 6671346, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f21d6e3bc590444a3207db372de47468?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Leung", "link": "https://stackoverflow.com/users/6671346/joe-leung"}, "edited": false, "score": 0, "creation_date": 1481117308, "post_id": 40998128, "comment_id": 69244482, "body": "well, have you tried to call save instead of update? save command can be used for updating as well..."}, {"owner": {"reputation": 2765, "user_id": 5864985, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/UlhbW.jpg?s=128&g=1", "display_name": "Ronan Lopes", "link": "https://stackoverflow.com/users/5864985/ronan-lopes"}, "reply_to_user": {"reputation": 91, "user_id": 6671346, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f21d6e3bc590444a3207db372de47468?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Leung", "link": "https://stackoverflow.com/users/6671346/joe-leung"}, "edited": false, "score": 0, "creation_date": 1481118020, "post_id": 40998128, "comment_id": 69245066, "body": "Also, try to debug on your update action what is coming from the group_params (logger.debug group_params.to_h). I believe that forum_id is coming nil. Also, debug all params, like logger.debug params.to_unsafe_h (that way it shows all params, ignoring strong params), so we can see better if the problem is on the params being passed to update or if the values are not coming from the form..."}, {"owner": {"reputation": 91, "user_id": 6671346, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f21d6e3bc590444a3207db372de47468?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Leung", "link": "https://stackoverflow.com/users/6671346/joe-leung"}, "edited": false, "score": 0, "creation_date": 1481173245, "post_id": 40998128, "comment_id": 69271491, "body": "have tried #save, but it didn&#39;t update the record. And for the debug, I have read some doc about it but not really understand how to use it. I have used puts params.inspect and puts group_params.inspect instead, and updated in the question. Again, million thanks for your help."}], "tags": [], "owner": {"reputation": 2765, "user_id": 5864985, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/UlhbW.jpg?s=128&g=1", "display_name": "Ronan Lopes", "link": "https://stackoverflow.com/users/5864985/ronan-lopes"}, "is_accepted": false, "score": 0, "last_activity_date": 1481035736, "creation_date": 1481035736, "answer_id": 40998128, "question_id": 40997889, "link": "https://stackoverflow.com/questions/40997889/the-standard-way-to-update-extra-attribute-of-join-model-rails/40998128#40998128", "title": "The standard way to update extra attribute of join model - Rails", "body": "<p>I'm only making a guess here, but I think you have to add</p>\n\n<pre><code>accepts_nested_attributes_for :group_users\n</code></pre>\n\n<p>on your group model. Also, believe you have to add the permited params to your controller. Something like:</p>\n\n<pre><code>params.require(:group).permit(:name, user_ids: [], group_users_attributes: [:id, :attribute1, :attribute2, :_destroy])\n</code></pre>\n\n<p>That's kinda how I do that. In that case, <code>:_destroy</code> attribute is only needed if you're using cocoon gem. Replace attribute1, attribute2 for the ones that you wanna update. In that case, I believe it's only <code>forum_id</code>.</p>\n\n<p>Hope this helps you someway...</p>\n"}], "owner": {"reputation": 91, "user_id": 6671346, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f21d6e3bc590444a3207db372de47468?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Leung", "link": "https://stackoverflow.com/users/6671346/joe-leung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 368, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1481173154, "creation_date": 1481035039, "last_edit_date": 1495540905, "question_id": 40997889, "link": "https://stackoverflow.com/questions/40997889/the-standard-way-to-update-extra-attribute-of-join-model-rails", "title": "The standard way to update extra attribute of join model - Rails", "body": "<p>here comes to the newbie of rails again.</p>\n\n<p>Actually I have asked a similar question in this:<a href=\"https://stackoverflow.com/questions/40958416/having-trouble-in-updating-join-model-extra-attributes-in-has-many-through-assoc\">Having trouble in updating join model extra attributes in has_many through association - Rails</a>, but thought that I have asked in a wrong direction and a complicated way, so would like to open a new question that ask in a simpler and more precise way.</p>\n\n<p>Would like to know when I have an extra attribute in the join model of <code>has_many through:</code>, <strong>what is the standard way to save and update the extra attribute of the join model</strong>. Below is just an example and what I have tried:</p>\n\n<p>In a <code>Forum</code>, A <code>User</code> has many <code>Group</code>; A <code>Group</code> has many <code>User</code>, through <code>GroupUser</code>.</p>\n\n<pre><code>class User &lt; ApplicationRecord\n    has_many :group_users\n    has_many :groups, through: :group_users\nend\n\nclass Group &lt; ApplicationRecord\n    belongs_to :forum\n\n    has_many :group_users\n    has_many :users, through: :group_users\nend\n\nclass GroupUser &lt; ApplicationRecord\n    belongs_to :group\n    belongs_to :user\nend\n\nclass Forum &lt; ApplicationRecord\n    has_many :groups\nend\n</code></pre>\n\n<p>Due to some reason, I may want to add an extra attribute <code>forum_id</code>to the join model<code>GroupUser</code>so it becomes like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/I2cRg.png\" rel=\"nofollow noreferrer\">UML diagram</a></p>\n\n<p>What would be the correct way to do the <code>create</code> and <code>update</code> in the controller?</p>\n\n<p>I have tried something like:</p>\n\n<pre><code>def create\n    @forum = Forum.find(params[:forum_id])\n    @group = @forum.groups.build(group_params)\n    @group.group_users.each do |join|\n        join.forum_id = @group.forum_id\n    end\n    @group.save\nend\n\ndef update\n    @group = Group.find(params[:id])\n    @group.group_users.each do |join|\n        join.forum_id = @group.forum_id\n    end\n    @group.update(group_params)\nend\n\nprivate\ndef group_params\n    params.require(:group).permit(:name, user_ids: [])\nend\n</code></pre>\n\n<p>I can save the <code>forum_id</code> in the <code>create</code>; however, the <code>forum_id</code> will be nil when doing an <code>update</code> in the association. It has bordered me for more than twenty hours already, I really want to know the <strong>standard way to save and update the extra attribute of the join model</strong>.</p>\n\n<p>Thanks for reading my words. Appreciate any comments. Every suggestion will alleviate my headache right now. Thanks.</p>\n\n<hr>\n\n<p><strong>Updated 10:17AM +8, 7 Dec</strong></p>\n\n<p>I have tried the <code>accepted_nested_attributes_for</code> solution with no luck, which I can still insert the <code>forum_id</code> in <code>save</code>, but still not inserting <code>forum_id</code> in <code>update</code>, which the record updated will get a <code>forum_id: nil</code></p>\n\n<p>The changes is as following:</p>\n\n<p>Model:</p>\n\n<pre><code>class Group &lt; ApplicationRecord\n  belongs_to :forum\n\n  has_many :group_users, inverse_of: :group\n  has_many :users, through: :group_users\n\n  accepts_nested_attributes_for :group_users\nend\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>def group_params\n    params.require(:group).permit(:name, user_ids: [], group_users_attributes: [:id, :forum_id])\nend\n</code></pre>\n\n<p>I have actually created a project which you can download here: <a href=\"https://github.com/kan1011/rails-101-demo\" rel=\"nofollow noreferrer\">https://github.com/kan1011/rails-101-demo</a> (If you want to run it, you need to create the first forum in rails c, by <code>f = Forum.new</code> and <code>f.save</code>)</p>\n\n<hr>\n\n<p><strong>Updated 12:53pm +8, 8/12/2016</strong></p>\n\n<p>Have tried to use <code>save</code> instead of <code>update(params)</code>, but it didn't update at all, which the record will be the same after submit the update form.</p>\n\n<p>Have tried to use <code>puts params.inspect</code> and <code>puts group_params.inspect</code>, and it comes out the following:</p>\n\n<p><em>params</em></p>\n\n<pre><code>  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"s8l+wWzTci7hD1AoyLN9sIjFu296ooU0VwWgCFIP4yvJaR7I3HS9E3ja4VXcFQv1QadyeJspef3dBD1XzVaF+Q==\", \"group\"=&gt;{\"name\"=&gt;\"fff\", \"user_ids\"=&gt;[\"\", \"1\", \"2\", \"3\"]}, \"commit\"=&gt;\"Submit\", \"id\"=&gt;\"8\"}\n</code></pre>\n\n<p>\"\u2713\", \"_method\"=>\"put\", \"authenticity_token\"=>\"s8l+wWzTci7hD1AoyLN9sIjFu296ooU0VwWgCFIP4yvJaR7I3HS9E3ja4VXcFQv1QadyeJspef3dBD1XzVaF+Q==\", \"group\"=>{\"name\"=>\"fff\", \"user_ids\"=>[\"\", \"1\", \"2\", \"3\"]}, \"commit\"=>\"Submit\", \"controller\"=>\"groups\", \"action\"=>\"update\", \"id\"=>\"8\"} permitted: false></p>\n\n<p><em>group_params</em></p>\n\n<pre><code>&lt;ActionController::Parameters {\"name\"=&gt;\"fff\", \"user_ids\"=&gt;[\"\", \"1\", \"2\", \"3\"]} permitted: true&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-2.3"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1481035248, "post_id": 40997145, "comment_id": 69204338, "body": "Can the hash keys be anything, or is there some restriction  e.g. <code>a-zA-Z0-9_</code>?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1481035766, "post_id": 40997145, "comment_id": 69204734, "body": "For that matter, are the hash keys always symbols?"}, {"owner": {"reputation": 208, "user_id": 5629127, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153351616801275/picture?type=large", "display_name": "Abhishek Jain", "link": "https://stackoverflow.com/users/5629127/abhishek-jain"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1481036309, "post_id": 40997145, "comment_id": 69205161, "body": "It can be anything"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1481036554, "post_id": 40997145, "comment_id": 69205349, "body": "In that case, none of the answers below will work (although they&#39;re excellent for limited input) and you&#39;re going to have a difficult time coming up with one that works safely for &quot;anything.&quot;"}, {"owner": {"reputation": 208, "user_id": 5629127, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153351616801275/picture?type=large", "display_name": "Abhishek Jain", "link": "https://stackoverflow.com/users/5629127/abhishek-jain"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1481036975, "post_id": 40997145, "comment_id": 69205690, "body": "@Jordan Yes. To begin with I can restrict hash to symbol or index but later on I will need to find a solution for it."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1481038423, "post_id": 40997145, "comment_id": 69206799, "body": "You&#39;re basically going to build a Ruby parser, then. Also, I just noticed your question is inconsistent. In <code>hash</code> you use symbol keys (<code>{&quot;c&quot;: &quot;d&quot;}</code> is equivalent to <code>{:c =&gt; &quot;d&quot;}</code>) but in <code>string</code> you have a string key <code>&#39;c&#39;</code>. How is that supposed to work?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1481097390, "post_id": 40997145, "comment_id": 69231626, "body": "If you could write <code>string = &quot;[:a][0][:c]&quot;</code>, which arguably is more appropriate than what you have, and you trust your data, you could write <code>eval (&quot;hash&quot; &lt;&lt; string) #=&gt; &quot;d&quot;</code>. Note that <code>&quot;c&quot;: &quot;d&quot;</code> is the same as <code>c: &quot;d&quot;</code> or <code>:c =&gt; &quot;d&quot;</code>, so you don&#39;t need the quotes with the keys (unless you want to permit multiword keys, such as <code>:&quot;my key&quot;</code>). If you can&#39;t change the string format you could easily convert it to the above format in your code."}], "answers": [{"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1481034117, "post_id": 40997477, "comment_id": 69203643, "body": "<code>{ &quot;Hash keys aren&#39;t so \\&quot;predictable\\&quot;&quot; =&gt; 1 }</code>"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1481034509, "post_id": 40997477, "comment_id": 69203908, "body": "You&#39;re totally right, it won&#39;t work in this case. I fear that with a more restricted syntax, not many users, if any, would be able to use this key. Should the code be always correct but hard to use, or often correct and more forgiving of user input? That&#39;s for the OP to decide."}, {"owner": {"reputation": 208, "user_id": 5629127, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153351616801275/picture?type=large", "display_name": "Abhishek Jain", "link": "https://stackoverflow.com/users/5629127/abhishek-jain"}, "edited": false, "score": 0, "creation_date": 1481035033, "post_id": 40997477, "comment_id": 69204228, "body": "@EricDuminil The thing is user will input in a same way. Like user will be given a hash and he has to input the path to reach a particular value."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1481035482, "post_id": 40997477, "comment_id": 69204514, "body": "@EricDuminil You&#39;re right, although the hash syntax is fine in Ruby 2.2+\u2014<code>{&quot;a&quot;: 1} == {a: 1} == {:a =&gt; 1}</code>. There&#39;s not really a good solution here if arbitrary hash keys are allowed. P.S. <code>\\w</code> includes <code>_</code>, so <code>[\\w_]</code> is redundant."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1481035722, "post_id": 40997477, "comment_id": 69204690, "body": "@Jordan : Thanks a lot. You&#39;re right, the hash syntax is correct for Ruby 2.3.1, but not Ruby 2.1.5."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 208, "user_id": 5629127, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153351616801275/picture?type=large", "display_name": "Abhishek Jain", "link": "https://stackoverflow.com/users/5629127/abhishek-jain"}, "edited": false, "score": 0, "creation_date": 1481035765, "post_id": 40997477, "comment_id": 69204730, "body": "@AbhishekJain: I don&#39;t understand your comment. Is there anything wrong with my answer?"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1481035600, "last_edit_date": 1481035600, "creation_date": 1481033793, "answer_id": 40997477, "question_id": 40997145, "link": "https://stackoverflow.com/questions/40997145/ruby-hash-access-value-from-string-array/40997477#40997477", "title": "Ruby hash access value from string array", "body": "<p>You could do this :</p>\n\n<pre><code>hash = { 'a' =&gt; [{ 'c' =&gt; 'd', 'e' =&gt; 'f' }] }\n\nstring = \"a[0]['c']\"\n\ndef nested_access(object, string)\n  string.scan(/\\w+/).inject(object) do |hash_or_array, i|\n    case hash_or_array\n    when Array then hash_or_array[i.to_i]\n    when Hash then hash_or_array[i] || hash_or_array[i.to_sym]\n    end\n  end\nend\n\nputs nested_access(hash, string) # =&gt; \"d\"\n</code></pre>\n\n<p>The input string is scanned for letters, underscores and digits. Everything else is ignored :</p>\n\n<pre><code>puts nested_access(hash, \"a/0/c\") #=&gt; \"d\"\nputs nested_access(hash, \"a 0 c\") #=&gt; \"d\"\nputs nested_access(hash, \"a;0;c\") #=&gt; \"d\"\n</code></pre>\n\n<p>An incorrect access value will return nil.</p>\n\n<p>It also works with symbol as keys :</p>\n\n<pre><code>hash = {a: [{c: \"d\", e: \"f\"}]}\nputs nested_access(hash, \"['a'][0]['c']\")\n</code></pre>\n\n<p>It brings the advantage of being not too strict about user input, but it does have the drawback of not recognizing keys with spaces.</p>\n"}, {"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481035904, "post_id": 40997819, "comment_id": 69204838, "body": "Interesting example. I didn&#39;t know dig could iterate through a mix of Arrays and Hashes."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1481036021, "post_id": 40997819, "comment_id": 69204932, "body": "@EricDuminil, yea, it&#39;s awesome like that. It also works for structs. I really hope they add an <code>Indexible</code> module, where you have to implement <code>#[]</code> and it gives you other goodies like <code>#dig</code>."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1481037381, "post_id": 40997819, "comment_id": 69206016, "body": "@ndn You got me to wondering if <code>dig</code> will &quot;dig&quot; into any object that responds to <code>dig</code>\u2014indeed it will! <a href=\"https://eval.in/691998\" rel=\"nofollow noreferrer\">eval.in/691998</a> That&#39;s handy."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1481037495, "post_id": 40997819, "comment_id": 69206096, "body": "@Jordan, this is pretty much how it&#39;s implemented in the existing classes too. That is why I was hoping for an <code>Indexible</code> module in the future. (:"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481046213, "post_id": 40997819, "comment_id": 69212079, "body": "@ndn: I think your avatar is misleading. Maybe that&#39;s the goal, but your posts are good enough not to require this trick. My $0.02."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481048179, "post_id": 40997819, "comment_id": 69213115, "body": "@EricDuminil, is there a scenario where I get to have a tick sign as an avatar and that is not a bad thing?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481048284, "post_id": 40997819, "comment_id": 69213163, "body": "Sorry, I don&#39;t understand the question."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481049102, "post_id": 40997819, "comment_id": 69213556, "body": "@EricDuminil, can&#39;t a person just be a tick sign (\u2714)? :)"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481050269, "post_id": 40997819, "comment_id": 69214150, "body": "It doesn&#39;t make sense. I just find it suspiciously similar to the accepted answer sign."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481050997, "post_id": 40997819, "comment_id": 69214525, "body": "@EricDuminil, that moment when your joke fails... In all seriousness, why does the tick sign avatar bother you?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1481051073, "post_id": 40997819, "comment_id": 69214566, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/129938/discussion-between-eric-duminil-and-ndn\">continue this discussion in chat</a>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1481060691, "post_id": 40997819, "comment_id": 69219563, "body": "@ndn: <a href=\"https://bugs.ruby-lang.org/issues/11262#Related\" rel=\"nofollow noreferrer\">Here&#39;s a start.</a>"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1481061234, "post_id": 40997819, "comment_id": 69219850, "body": "@J&#246;rgWMittag, awesome suggestion!"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1481109910, "post_id": 40997819, "comment_id": 69239583, "body": "@J&#246;rgWMittag: Very interesting suggestion. I think you should find a better example than <code>%i[ruby c cplusplus scala java perl].select(&amp;allowed_languages)</code> because it just does <code>%i[ruby c cplusplus scala java perl] &amp; [:ruby, :python, :scala, :scheme]</code> with added complexity."}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 2, "last_activity_date": 1481034813, "creation_date": 1481034813, "answer_id": 40997819, "question_id": 40997145, "link": "https://stackoverflow.com/questions/40997145/ruby-hash-access-value-from-string-array/40997819#40997819", "title": "Ruby hash access value from string array", "body": "<p>Assuming that the user inputs numbers for array indices and words for hash keys:</p>\n\n<pre><code>keys = string.scan(/(\\d+)|(\\w+)/).map do |number, string|\n  number&amp;.to_i || string.to_sym\nend\n\nhash.dig(*keys) # =&gt; \"d\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 208, "user_id": 5629127, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153351616801275/picture?type=large", "display_name": "Abhishek Jain", "link": "https://stackoverflow.com/users/5629127/abhishek-jain"}, "edited": false, "score": 2, "creation_date": 1481035289, "post_id": 40997863, "comment_id": 69204362, "body": "Thanks for the reply. But, it is not necessary that the second argument is an integer. Above one is just an example and hash and input string can be in any form."}], "tags": [], "owner": {"reputation": 3367, "user_id": 822256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ITN7.png?s=128&g=1", "display_name": "sa77", "link": "https://stackoverflow.com/users/822256/sa77"}, "is_accepted": false, "score": 0, "last_activity_date": 1481034945, "creation_date": 1481034945, "answer_id": 40997863, "question_id": 40997145, "link": "https://stackoverflow.com/questions/40997145/ruby-hash-access-value-from-string-array/40997863#40997863", "title": "Ruby hash access value from string array", "body": "<p>you can use <code>gsub</code> to clean other characters into an array and use that array to access your hash</p>\n\n<pre><code>hash = {\"a\": [{\"c\": \"d\", \"e\": \"f\"}] }\n\nstring = \"a[0]['c']\"\n\ntmp = string.gsub(/[\\[\\]\\']/, '').split('')\n#=&gt; [\"a\", \"0\", \"c\"]\n\nhash[tmp[0].to_sym][tmp[1].to_i][tmp[2].to_sym]\n#=&gt; \"d\"\n</code></pre>\n"}], "owner": {"reputation": 208, "user_id": 5629127, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153351616801275/picture?type=large", "display_name": "Abhishek Jain", "link": "https://stackoverflow.com/users/5629127/abhishek-jain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1092, "favorite_count": 0, "accepted_answer_id": 40997819, "answer_count": 3, "score": 0, "last_activity_date": 1481035600, "creation_date": 1481032819, "question_id": 40997145, "link": "https://stackoverflow.com/questions/40997145/ruby-hash-access-value-from-string-array", "title": "Ruby hash access value from string array", "body": "<p>I have an hash like below:</p>\n\n<pre><code>hash = {\"a\": [{\"c\": \"d\", \"e\": \"f\"}] }\n</code></pre>\n\n<p>Normally we can access it like <code>hash[\"a\"][0][\"c\"]</code>.</p>\n\n<p>But, I have a string like:</p>\n\n<pre><code>string = \"a[0]['c']\"\n</code></pre>\n\n<p>(This can change depending upon user input)</p>\n\n<p>Is there any easy way to access hash using above string values?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481036022, "post_id": 40996747, "comment_id": 69204933, "body": "Are you trying every permutation of every possible question with the same structure but different objects?"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481036255, "post_id": 40996747, "comment_id": 69205123, "body": "While the topic was similar the given responses are completely different. Some people replying took the time to give answers, one of which has helped me greatly."}], "answers": [{"tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": false, "score": 1, "last_activity_date": 1481031841, "creation_date": 1481031841, "answer_id": 40996836, "question_id": 40996747, "link": "https://stackoverflow.com/questions/40996747/ruby-substituting-characters-in-a-string-with-sequential-elements-of-an-array/40996836#40996836", "title": "Ruby - substituting characters in a string with sequential elements of an array", "body": "<p>You can use method <a href=\"https://ruby-doc.org/core-2.2.0/String.html#method-i-sub\" rel=\"nofollow noreferrer\"><code>sub</code></a>   </p>\n\n<pre><code>a = 'bla \\n bla \\n bla \\n'\nb = ['1', '2', '3']\nb.each { |i| a.sub!('\\n', i) }\n#&gt; a\n#=&gt; \"bla 1 bla 2 bla 3\" \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1481032150, "post_id": 40996872, "comment_id": 69202417, "body": "I thinking about it, nice!)"}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 5, "last_activity_date": 1481031964, "creation_date": 1481031964, "answer_id": 40996872, "question_id": 40996747, "link": "https://stackoverflow.com/questions/40996747/ruby-substituting-characters-in-a-string-with-sequential-elements-of-an-array/40996872#40996872", "title": "Ruby - substituting characters in a string with sequential elements of an array", "body": "<p><code>String#gsub</code> with a block makes short work of this:</p>\n\n<pre><code>a.gsub('\\n') { b.shift }\n</code></pre>\n\n<p>Note that <code>Array#shift</code> modifies the original array. Make a copy of it first (<code>b.dup</code>) if that's a problem.</p>\n"}, {"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481036112, "post_id": 40998134, "comment_id": 69205000, "body": "It looks like the best answer to me. Short, to the point and non-destructive. Sorry, I&#39;m all out of votes."}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 1, "last_activity_date": 1481035758, "creation_date": 1481035758, "answer_id": 40998134, "question_id": 40996747, "link": "https://stackoverflow.com/questions/40996747/ruby-substituting-characters-in-a-string-with-sequential-elements-of-an-array/40998134#40998134", "title": "Ruby - substituting characters in a string with sequential elements of an array", "body": "<p>Just one more way using <code>String#split</code> and <code>Array#zip</code></p>\n\n<pre><code>a.split('\\n').zip(b).join\n#=&gt; \"bla 1 bla 2 bla 3\"\n</code></pre>\n"}], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 40996872, "answer_count": 3, "score": 1, "last_activity_date": 1481035758, "creation_date": 1481031492, "question_id": 40996747, "link": "https://stackoverflow.com/questions/40996747/ruby-substituting-characters-in-a-string-with-sequential-elements-of-an-array", "title": "Ruby - substituting characters in a string with sequential elements of an array", "body": "<p>I have a string:</p>\n\n<pre><code>a = 'bla \\n bla \\n bla \\n'\n</code></pre>\n\n<p>And an array:</p>\n\n<pre><code>b = ['1', '2', '3']\n</code></pre>\n\n<p>I want to search through the string, and replace every nth instance of \\n with the (n-1)th element from the array, resulting in:</p>\n\n<pre><code>a = 'bla 1 bla 2 bla 3'\n</code></pre>\n\n<p>What is the simplest way for me to do this?</p>\n"}, {"tags": ["ruby", "debugging", "redis", "redis-cli"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1481032307, "post_id": 40996500, "comment_id": 69202517, "body": "Perhaps relevant: <a href=\"https://gist.github.com/epicserve/5699837#gistcomment-1579250\" rel=\"nofollow noreferrer\">gist.github.com/epicserve/5699837#gistcomment-1579250</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2402, "user_id": 485107, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/38a56c3adc693239bbaddaabefc4d17a?s=128&d=identicon&r=PG", "display_name": "evgeniy44", "link": "https://stackoverflow.com/users/485107/evgeniy44"}, "is_accepted": true, "score": 2, "last_activity_date": 1481035047, "creation_date": 1481035047, "answer_id": 40997893, "question_id": 40996500, "link": "https://stackoverflow.com/questions/40996500/error-err-unknown-command-debug/40997893#40997893", "title": "(error) ERR unknown command &#39;debug&#39;", "body": "<p>Redis is running as an Amazon ElastiCache node, thus debug command is restricted due to <a href=\"http://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/ClientConfig.RestrictedCommands.html\" rel=\"nofollow noreferrer\">http://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/ClientConfig.RestrictedCommands.html</a></p>\n"}], "owner": {"reputation": 2402, "user_id": 485107, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/38a56c3adc693239bbaddaabefc4d17a?s=128&d=identicon&r=PG", "display_name": "evgeniy44", "link": "https://stackoverflow.com/users/485107/evgeniy44"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1132, "favorite_count": 0, "accepted_answer_id": 40997893, "answer_count": 1, "score": 4, "last_activity_date": 1481035047, "creation_date": 1481030744, "question_id": 40996500, "link": "https://stackoverflow.com/questions/40996500/error-err-unknown-command-debug", "title": "(error) ERR unknown command &#39;debug&#39;", "body": "<p>Redis version: redis_version:2.8.19</p>\n\n<p>I'm trying to launch this tool: <a href=\"https://github.com/snmaynard/redis-audit\" rel=\"nofollow noreferrer\">https://github.com/snmaynard/redis-audit</a>\nBut it fails with the following error:</p>\n\n<pre><code>/var/lib/gems/2.1.0/gems/redis-3.3.2/lib/redis/pipeline.rb:129:in `value': ERR unknown command 'debug' (Redis::CommandError)\n    from /var/lib/gems/2.1.0/gems/redis-3.3.2/lib/redis/pipeline.rb:121:in `_set'\n    from /var/lib/gems/2.1.0/gems/redis-3.3.2/lib/redis/pipeline.rb:67:in `block in finish'\n    from /var/lib/gems/2.1.0/gems/redis-3.3.2/lib/redis/pipeline.rb:66:in `each'\n    from /var/lib/gems/2.1.0/gems/redis-3.3.2/lib/redis/pipeline.rb:66:in `each_with_index'\n    from /var/lib/gems/2.1.0/gems/redis-3.3.2/lib/redis/pipeline.rb:66:in `each'\n    from /var/lib/gems/2.1.0/gems/redis-3.3.2/lib/redis/pipeline.rb:66:in `map'\n    from /var/lib/gems/2.1.0/gems/redis-3.3.2/lib/redis/pipeline.rb:66:in `finish'\n    from /var/lib/gems/2.1.0/gems/redis-3.3.2/lib/redis/client.rb:157:in `block in call_pipeline'\n    from /var/lib/gems/2.1.0/gems/redis-3.3.2/lib/redis/client.rb:293:in `with_reconnect'\n    from /var/lib/gems/2.1.0/gems/redis-3.3.2/lib/redis/client.rb:155:in `call_pipeline'\n    from /var/lib/gems/2.1.0/gems/redis-3.3.2/lib/redis.rb:2258:in `block in pipelined'\n    from /var/lib/gems/2.1.0/gems/redis-3.3.2/lib/redis.rb:58:in `block in synchronize'\n    from /usr/lib/ruby/2.1.0/monitor.rb:211:in `mon_synchronize'\n    from /var/lib/gems/2.1.0/gems/redis-3.3.2/lib/redis.rb:58:in `synchronize'\n    from /var/lib/gems/2.1.0/gems/redis-3.3.2/lib/redis.rb:2254:in `pipelined'\n    from ./redis-audit.rb:120:in `audit_key'\n    from ./redis-audit.rb:99:in `block in audit_keys'\n    from ./redis-audit.rb:97:in `times'\n    from ./redis-audit.rb:97:in `audit_keys'\n    from ./redis-audit.rb:356:in `&lt;main&gt;'\n</code></pre>\n\n<p>When I execute debug object command from redis-cli I get the same error:</p>\n\n<pre><code>(error) ERR unknown command 'debug'\n</code></pre>\n\n<p>Can anybody please give me an advice how to fix it?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "metaprogramming"], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 2, "last_activity_date": 1481031350, "creation_date": 1481031350, "answer_id": 40996703, "question_id": 40996493, "link": "https://stackoverflow.com/questions/40996493/how-to-pass-service-objects-modules-as-arguments-in-ruby/40996703#40996703", "title": "How to pass service objects/modules as arguments in ruby", "body": "<p>I don't see when this can ever be used in real life, but...:</p>\n\n<pre><code>['any'].each &amp;PrintAny.instance_method(:call).bind(Object)\n#=&gt; any\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 7, "last_activity_date": 1481031567, "last_edit_date": 1481031567, "creation_date": 1481031487, "answer_id": 40996746, "question_id": 40996493, "link": "https://stackoverflow.com/questions/40996493/how-to-pass-service-objects-modules-as-arguments-in-ruby/40996746#40996746", "title": "How to pass service objects/modules as arguments in ruby", "body": "<p>Almost. You can make your module convertable to proc and use it that way:</p>\n\n<pre><code>module PrintAny\n  def self.print(text)\n    puts text\n  end\n\n  def self.to_proc\n    method(:print).to_proc\n  end\nend\n\n[\"any\"].each &amp;PrintAny # =&gt; prints \"any\"\n</code></pre>\n\n<p><code>Enumerable#each</code> requires you to pass a block, the ampersand operator (<code>&amp;</code>) converts an object to block by first calling <code>to_proc</code> on that object. And modules are just objects, hence if they have a method <code>to_proc</code>, this will work.</p>\n"}], "owner": {"reputation": 16802, "user_id": 1007043, "user_type": "registered", "accept_rate": 54, "profile_image": "https://i.stack.imgur.com/QQ2rK.gif?s=128&g=1", "display_name": "gayavat", "link": "https://stackoverflow.com/users/1007043/gayavat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 1, "accepted_answer_id": 40996746, "answer_count": 2, "score": 2, "last_activity_date": 1481031567, "creation_date": 1481030695, "question_id": 40996493, "link": "https://stackoverflow.com/questions/40996493/how-to-pass-service-objects-modules-as-arguments-in-ruby", "title": "How to pass service objects/modules as arguments in ruby", "body": "<p>Is it possible to use Module or objects as arguments for each method in ruby?</p>\n\n<p>I need something like.</p>\n\n<pre><code>module PrintAny\n  def call(text)\n    puts text\n   end\nend\n\n[\"any\"].each PrintAny\n</code></pre>\n"}, {"tags": ["ruby", "xml", "multithreading", "nokogiri"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481058238, "post_id": 40996270, "comment_id": 69218366, "body": "Just curious. What is this file? I looked for the node, and found a danish list of motor parts. Or something."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1481067579, "post_id": 40996270, "comment_id": 69222307, "body": "Trying to slurp a big file will kill any language. Instead, when parsing XML you need to use a <a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/SAX\" rel=\"nofollow noreferrer\">SAX parser, which Nokogiri does implement</a>. I&#39;d suggest reading up on how to use that."}], "answers": [{"comments": [{"owner": {"reputation": 380, "user_id": 686227, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/168ea52dda0f06e5b8d753b0dcf3a3c0?s=128&d=identicon&r=PG", "display_name": "walt_die", "link": "https://stackoverflow.com/users/686227/walt-die"}, "edited": false, "score": 0, "creation_date": 1481054347, "post_id": 40998461, "comment_id": 69216303, "body": "hi @eric-duminil - so good of you to chime in :)  do you mean to say that the counter += 1 &#39;messes&#39; with the counter variable before Thread.new is setup and calls add_vehicle?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 380, "user_id": 686227, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/168ea52dda0f06e5b8d753b0dcf3a3c0?s=128&d=identicon&r=PG", "display_name": "walt_die", "link": "https://stackoverflow.com/users/686227/walt-die"}, "edited": false, "score": 0, "creation_date": 1481057070, "post_id": 40998461, "comment_id": 69217735, "body": "@walt_die : exactly. It&#39;s called a race condition : <a href=\"http://stackoverflow.com/questions/34510/what-is-a-race-condition\" title=\"what is a race condition\">stackoverflow.com/questions/34510/what-is-a-race-condition</a> and well, it sucks."}, {"owner": {"reputation": 380, "user_id": 686227, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/168ea52dda0f06e5b8d753b0dcf3a3c0?s=128&d=identicon&r=PG", "display_name": "walt_die", "link": "https://stackoverflow.com/users/686227/walt-die"}, "edited": false, "score": 0, "creation_date": 1481105525, "post_id": 40998461, "comment_id": 69236581, "body": "your code had me moving on - which is great :) I&#39;ve seen race conditions <i>en masse</i> in my career; I never actually planned to be the culprit myself :) Here&#39;s to <i>by reference</i>  perhaps your DSL could marry <a href=\"https://github.com/ohler55/ox\" rel=\"nofollow noreferrer\">github.com/ohler55/ox</a> and have a phenomenally fast and monumentally elegant <i>baby</i> :D"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 1, "last_activity_date": 1481039453, "last_edit_date": 1481039453, "creation_date": 1481036627, "answer_id": 40998461, "question_id": 40996270, "link": "https://stackoverflow.com/questions/40996270/why-does-ruby-thread-act-up-in-this-example-effectively-missing-files/40998461#40998461", "title": "why does Ruby Thread act up in this example - effectively missing files", "body": "<p>Okay, you have a problem because your file is huge, and you want to use multithreading.</p>\n\n<p>Now have you. problemstwo</p>\n\n<p>On a more serious note, I've had very good experience with this <a href=\"https://gist.github.com/kmile/827475\" rel=\"nofollow noreferrer\">code</a>.</p>\n\n<p>It parsed 20GB xml files with almost no memory use.</p>\n\n<p>Download the mentioned code, save it as <code>xml_parser.rb</code> and this script should work :</p>\n\n<pre><code>require_relative 'xml_parser.rb'\n\nfile = \"../ess2.xml\"\n\ndef add_vehicle index, str\n  filename = \"ess_#{index}.xml\"\n  File.open(filename,'w+'){|out| out.puts str}\n  puts format(\"%s has been written with %d lines\", filename, str.each_line.count)\nend\n\ni=0\nXml::Parser.new(Nokogiri::XML::Reader(open(file))) do\n  for_element 'ns:Statistik' do\n    i+=1\n    add_vehicle(i,@node.outer_xml)\n  end\nend\n\n#=&gt; ess_1.xml has been written with 102 lines\n#=&gt; ess_2.xml has been written with 102 lines\n#=&gt; ...\n</code></pre>\n\n<p>It will take time, but it should work without error and without using much memory.</p>\n\n<p>By the way, here is the reason why your code missed some files :</p>\n\n<pre><code>threads = []\ncounter = 1\nthreads &lt;&lt; Thread.new { puts counter }\ncounter += 1\nthreads.each { |thr| thr.join }\n#=&gt; 2\n\nthreads = []\ncounter = 1\nthreads &lt;&lt; Thread.new { puts counter }\nsleep(1)\ncounter += 1\nthreads.each { |thr| thr.join }\n#=&gt; 1\n</code></pre>\n\n<p><code>counter += 1</code> was faster than the <code>add_vehicle</code> call. So your <code>add_vehicle</code> was often called with the wrong counter. With many millions node, some might get 0 offset, some might get 1 offset. When 2 <code>add_vehicle</code> are called with the same id, they overwrite each other, and a file is missing.</p>\n\n<p>You have the same problem with <code>record</code>, with lines getting written in the wrong file.</p>\n"}, {"comments": [{"owner": {"reputation": 380, "user_id": 686227, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/168ea52dda0f06e5b8d753b0dcf3a3c0?s=128&d=identicon&r=PG", "display_name": "walt_die", "link": "https://stackoverflow.com/users/686227/walt-die"}, "edited": false, "score": 0, "creation_date": 1481105607, "post_id": 40999474, "comment_id": 69236636, "body": "thx so much for your suggestions - and the Ox parser does indeed look promising!"}], "tags": [], "owner": {"reputation": 268, "user_id": 2338984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05ae3478316058f15a307e78b936822a?s=128&d=identicon&r=PG", "display_name": "sig", "link": "https://stackoverflow.com/users/2338984/sig"}, "is_accepted": false, "score": 1, "last_activity_date": 1481041599, "last_edit_date": 1481041599, "creation_date": 1481039428, "answer_id": 40999474, "question_id": 40996270, "link": "https://stackoverflow.com/questions/40996270/why-does-ruby-thread-act-up-in-this-example-effectively-missing-files/40999474#40999474", "title": "why does Ruby Thread act up in this example - effectively missing files", "body": "<p>Perhabs you should try to synchronize <code>counter += 1</code> with Mutex.\nFor example: \n<code>\n@lock = Mutex.new\n@counter = 0\ndef add_vehicle str\n     @lock.synchronize do\n        @counter += 1\n        IO.write \"ess_#{@counter}.xml\", str\n     end \nend\n</code>\nMutex implements a simple semaphore that can be used to coordinate access to shared data from multiple concurrent threads. </p>\n\n<p>Or you can go another way from the start and use <a href=\"https://github.com/ohler55/ox\" rel=\"nofollow noreferrer\">Ox</a>. It is way faster than Nokogiri, take a look on a <a href=\"http://www.ohler.com/dev/xml_with_ruby/xml_with_ruby.html\" rel=\"nofollow noreferrer\">comparison</a>. For a huge files <a href=\"http://www.ohler.com/ox/Ox/Sax.html\" rel=\"nofollow noreferrer\">Ox::Sax</a></p>\n"}], "owner": {"reputation": 380, "user_id": 686227, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/168ea52dda0f06e5b8d753b0dcf3a3c0?s=128&d=identicon&r=PG", "display_name": "walt_die", "link": "https://stackoverflow.com/users/686227/walt-die"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "accepted_answer_id": 40998461, "answer_count": 2, "score": 0, "last_activity_date": 1481067377, "creation_date": 1481029961, "last_edit_date": 1481067377, "question_id": 40996270, "link": "https://stackoverflow.com/questions/40996270/why-does-ruby-thread-act-up-in-this-example-effectively-missing-files", "title": "why does Ruby Thread act up in this example - effectively missing files", "body": "<p>I have a 50+ GB XML file which I initially tried to (man)handle with Nokogiri :)</p>\n\n<p>Got <code>killed: 9</code> - obviously :)</p>\n\n<p>Now I'm into muddy Ruby threaded waters with this stab (at it):</p>\n\n<pre><code>#!/usr/bin/env ruby\n\ndef add_vehicle index, str\n  IO.write \"ess_#{index}.xml\", str\n  #file_name = \"ess_#{index}.xml\"\n  #fd = File.new file_name, \"w\"\n  #fd.write str\n  #fd.close\n  #puts file_name\nend\n\nbegin\n\n  record = []\n  threads = []\n  counter = 1\n  file = File.new(\"../ess2.xml\", \"r\")\n  while (line = file.gets)\n    case line\n    when /&lt;ns:Statistik/                           \n      record = []\n      record &lt;&lt; line\n    when /&lt;\\/ns:Statistik/                         \n      record &lt;&lt; line\n      puts \"file - %s\" % counter\n      threads &lt;&lt; Thread.new { add_vehicle counter, record.join }\n      counter += 1\n    else\n      record &lt;&lt; line\n    end\n  end\n  file.close\n  threads.each { |thr| thr.join }\nrescue =&gt; err\n    puts \"Exception: #{err}\"\n    err\nend\n</code></pre>\n\n<p>Somehow this code 'skips' one or two files when writing the result files - hmmm!?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 2889, "user_id": 3079520, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/LfkPU.jpg?s=128&g=1", "display_name": "dnsh", "link": "https://stackoverflow.com/users/3079520/dnsh"}, "edited": false, "score": 0, "creation_date": 1481029543, "post_id": 40995964, "comment_id": 69200683, "body": "What is the data type of <code>value</code>? Is it integer or float or string?"}, {"owner": {"reputation": 873, "user_id": 2320239, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/daef5b7116143c14162b242bf0b1a35a?s=128&d=identicon&r=PG", "display_name": "user2320239", "link": "https://stackoverflow.com/users/2320239/user2320239"}, "reply_to_user": {"reputation": 2889, "user_id": 3079520, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/LfkPU.jpg?s=128&g=1", "display_name": "dnsh", "link": "https://stackoverflow.com/users/3079520/dnsh"}, "edited": false, "score": 0, "creation_date": 1481029656, "post_id": 40995964, "comment_id": 69200760, "body": "It&#39;s a date type."}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 7255713, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d58a049ef94a8def717a36b4aa609b8?s=128&d=identicon&r=PG&f=1", "display_name": "ravi kanth", "link": "https://stackoverflow.com/users/7255713/ravi-kanth"}, "is_accepted": false, "score": 0, "last_activity_date": 1481031093, "creation_date": 1481031093, "answer_id": 40996607, "question_id": 40995964, "link": "https://stackoverflow.com/questions/40995964/combining-queries-into-an-activerecord-associationrelation/40996607#40996607", "title": "Combining queries into an ActiveRecord_AssociationRelation", "body": "<p>results.order(\"pos_or_neg ASC,case when pos_or_neg=\"neg\" then value else -1*value end DESC\")</p>\n"}, {"comments": [{"owner": {"reputation": 873, "user_id": 2320239, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/daef5b7116143c14162b242bf0b1a35a?s=128&d=identicon&r=PG", "display_name": "user2320239", "link": "https://stackoverflow.com/users/2320239/user2320239"}, "edited": false, "score": 0, "creation_date": 1481033659, "post_id": 40997340, "comment_id": 69203337, "body": "Unfortunately the project isn&#39;t using rails 5"}], "tags": [], "owner": {"reputation": 1315, "user_id": 7133623, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oTRkmNT7RVY/AAAAAAAAAAI/AAAAAAAABjU/A9o9mSGxL60/photo.jpg?sz=128", "display_name": "cdimitroulas", "link": "https://stackoverflow.com/users/7133623/cdimitroulas"}, "is_accepted": false, "score": 0, "last_activity_date": 1481033445, "creation_date": 1481033445, "answer_id": 40997340, "question_id": 40995964, "link": "https://stackoverflow.com/questions/40995964/combining-queries-into-an-activerecord-associationrelation/40997340#40997340", "title": "Combining queries into an ActiveRecord_AssociationRelation", "body": "<p>I believe using merge is the equivalent of an AND query in SQL. What you are looking for is an OR query.\nSince Rails 5 this is one of the Active Record query methods that you can use!\n<a href=\"http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-or\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/classes/ActiveRecord/QueryMethods.html#method-i-or</a></p>\n\n<p>Try to replace your .merge with .or and see if that works better</p>\n"}], "owner": {"reputation": 873, "user_id": 2320239, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/daef5b7116143c14162b242bf0b1a35a?s=128&d=identicon&r=PG", "display_name": "user2320239", "link": "https://stackoverflow.com/users/2320239/user2320239"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 227, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1481033445, "creation_date": 1481029012, "question_id": 40995964, "link": "https://stackoverflow.com/questions/40995964/combining-queries-into-an-activerecord-associationrelation", "title": "Combining queries into an ActiveRecord_AssociationRelation", "body": "<p>Hi I'm working on a project and I need to take result of two database queries and combine them into one ActiveRecord_AssociationRelation, at the moment I have:</p>\n\n<pre><code>results.where(pos_or_neg: \"neg\").order(\"value DESC\") + (results.where(pos_or_neg: \"pos\").order(\"value ASC\"))\n</code></pre>\n\n<p>However this returns an array which doesn't work as I need to do more processing afterwards. I've tried:</p>\n\n<pre><code>results.where(pos_or_neg: \"neg\").order(\"value DESC\").merge(results.where(pos_or_neg: \"pos\").order(\"value ASC\"))\n</code></pre>\n\n<p>but this only seems to return the half of the results.</p>\n\n<p>Thanks </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "argument-error"], "comments": [{"owner": {"reputation": 131, "user_id": 7068409, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b6d842dc40dba7077f68f7aeadab2c32?s=128&d=identicon&r=PG&f=1", "display_name": "HAYATO SHIBA", "link": "https://stackoverflow.com/users/7068409/hayato-shiba"}, "edited": false, "score": 0, "creation_date": 1481028815, "post_id": 40995886, "comment_id": 69200154, "body": "Sorry, I did  rake db:migrate:reset RAILS_ENV=production --trace."}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1481030181, "post_id": 40995886, "comment_id": 69201145, "body": "if it wasn&#39;t a n issue just delete the question :)"}], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 7068409, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b6d842dc40dba7077f68f7aeadab2c32?s=128&d=identicon&r=PG&f=1", "display_name": "HAYATO SHIBA", "link": "https://stackoverflow.com/users/7068409/hayato-shiba"}, "edited": false, "score": 0, "creation_date": 1481030149, "post_id": 40996053, "comment_id": 69201116, "body": "Sorry, I did rake db:setup RAILS_ENV=production, but I accept the same error. I can&#39;t find where Argumenterror is. If you know how to find Argumenterror, please show me."}], "tags": [], "owner": {"reputation": 173, "user_id": 6370395, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-A6rkat_BTlE/AAAAAAAAAAI/AAAAAAAAAAs/lVQ0YZWz-Q8/photo.jpg?sz=128", "display_name": "Atul Shukla", "link": "https://stackoverflow.com/users/6370395/atul-shukla"}, "is_accepted": true, "score": 0, "last_activity_date": 1481029313, "creation_date": 1481029313, "answer_id": 40996053, "question_id": 40995886, "link": "https://stackoverflow.com/questions/40995886/argumenterror-wrong-number-of-arguments-given-0-expected-1-2/40996053#40996053", "title": "ArgumentError: wrong number of arguments (given 0, expected 1..2)", "body": "<pre><code>rake db:setup RAILS_ENV=production\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 7068409, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/b6d842dc40dba7077f68f7aeadab2c32?s=128&d=identicon&r=PG&f=1", "display_name": "HAYATO SHIBA", "link": "https://stackoverflow.com/users/7068409/hayato-shiba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2408, "favorite_count": 0, "accepted_answer_id": 40996053, "answer_count": 1, "score": -1, "last_activity_date": 1481030120, "creation_date": 1481028761, "last_edit_date": 1481030120, "question_id": 40995886, "link": "https://stackoverflow.com/questions/40995886/argumenterror-wrong-number-of-arguments-given-0-expected-1-2", "title": "ArgumentError: wrong number of arguments (given 0, expected 1..2)", "body": "<pre><code>  ** Invoke db:migrate:reset (first_time)\n  ** Invoke db:drop (first_time)\n  ** Invoke db:load_config (first_time)\n  ** Execute db:load_config\n  ** Execute db:drop\n  ** Invoke db:create (first_time)\n  ** Invoke db:load_config \n  ** Execute db:create\n  ** Invoke db:migrate (first_time)\n  ** Invoke environment (first_time)\n  ** Execute environment\n  rake aborted!\n  ArgumentError: wrong number of arguments (given 0, expected 1..2)\n    /usr/local/rvm/gems/ruby-2.3.3/gems/activesupport-4.2.5/lib/active_support/cache/file_store.rb:20:in `initialize'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/activesupport-4.2.5/lib/active_support/cache.rb:60:in `new'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/activesupport-4.2.5/lib/active_support/cache.rb:60:in `lookup_store'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/railties-4.2.5/lib/rails/application/bootstrap.rb:76:in `block in &lt;module:Bootstrap&gt;'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/railties-4.2.5/lib/rails/initializable.rb:30:in `instance_exec'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/railties-4.2.5/lib/rails/initializable.rb:30:in `run'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/railties-4.2.5/lib/rails/initializable.rb:55:in `block in run_initializers'\n    /usr/local/rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:228:in `block in tsort_each'\n    /usr/local/rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'\n    /usr/local/rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:431:in `each_strongly_connected_component_from'\n    /usr/local/rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:349:in `block in each_strongly_connected_component'\n    /usr/local/rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:347:in `each'\n    /usr/local/rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:347:in `call'\n    /usr/local/rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:347:in `each_strongly_connected_component'\n    /usr/local/rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:226:in `tsort_each'\n    /usr/local/rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/tsort.rb:205:in `tsort_each'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/railties-4.2.5/lib/rails/initializable.rb:54:in `run_initializers'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/railties-4.2.5/lib/rails/application.rb:352:in `initialize!'\n    /home/ubuntu/workspace/config/environment.rb:5:in `&lt;top (required)&gt;'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/activesupport-4.2.5/lib/active_support/dependencies.rb:274:in `require'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/activesupport-4.2.5/lib/active_support/dependencies.rb:274:in `block in require'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/activesupport-4.2.5/lib/active_support/dependencies.rb:240:in `load_dependency'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/activesupport-4.2.5/lib/active_support/dependencies.rb:274:in `require'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/railties-4.2.5/lib/rails/application.rb:328:in `require_environment!'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/railties-4.2.5/lib/rails/application.rb:457:in `block in run_tasks_blocks'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/rake-11.3.0/lib/rake/task.rb:248:in `block in execute'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/rake-11.3.0/lib/rake/task.rb:243:in `each'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/rake-11.3.0/lib/rake/task.rb:243:in `execute'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/rake-11.3.0/lib/rake/task.rb:187:in `block in invoke_with_call_chain'\n    /usr/local/rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/rake-11.3.0/lib/rake/task.rb:180:in `invoke_with_call_chain'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/rake-11.3.0/lib/rake/task.rb:209:in `block in invoke_prerequisites'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/rake-11.3.0/lib/rake/task.rb:207:in `each'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/rake-11.3.0/lib/rake/task.rb:207:in `invoke_prerequisites'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/rake-11.3.0/lib/rake/task.rb:186:in `block in invoke_with_call_chain'\n    /usr/local/rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/rake-11.3.0/lib/rake/task.rb:180:in `invoke_with_call_chain'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/rake-11.3.0/lib/rake/task.rb:209:in `block in invoke_prerequisites'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/rake-11.3.0/lib/rake/task.rb:207:in `each'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/rake-11.3.0/lib/rake/task.rb:207:in `invoke_prerequisites'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/rake-11.3.0/lib/rake/task.rb:186:in `block in invoke_with_call_chain'\n    /usr/local/rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/rake-11.3.0/lib/rake/task.rb:180:in `invoke_with_call_chain'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/rake-11.3.0/lib/rake/task.rb:173:in `invoke'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/rake-11.3.0/lib/rake/application.rb:152:in `invoke_task'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/rake-11.3.0/lib/rake/application.rb:108:in `block (2 levels) in top_level'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/rake-11.3.0/lib/rake/application.rb:108:in `each'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/rake-11.3.0/lib/rake/application.rb:108:in `block in top_level'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/rake-11.3.0/lib/rake/application.rb:117:in `run_with_threads'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/rake-11.3.0/lib/rake/application.rb:102:in `top_level'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/rake-11.3.0/lib/rake/application.rb:80:in `block in run'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/rake-11.3.0/lib/rake/application.rb:178:in `standard_exception_handling'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/rake-11.3.0/lib/rake/application.rb:77:in `run'\n    /usr/local/rvm/gems/ruby-2.3.3/gems/rake-11.3.0/exe/rake:27:in `&lt;top (required)&gt;'\n    /usr/local/rvm/gems/ruby-2.3.3/bin/rake:22:in `load'\n    /usr/local/rvm/gems/ruby-2.3.3/bin/rake:22:in `&lt;main&gt;'\n    /usr/local/rvm/gems/ruby-2.3.3/bin/ruby_executable_hooks:15:in `eval'\n    /usr/local/rvm/gems/ruby-2.3.3/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n    Tasks: TOP =&gt; db:migrate:reset =&gt; db:migrate =&gt; environment\n</code></pre>\n\n<p>I can't find where the error comes from.\nPlease help me.</p>\n"}, {"tags": ["ruby", "chef-infra", "chef-recipe"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1481025036, "post_id": 40994646, "comment_id": 69197757, "body": "How do you terminate your shell script?"}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1481027069, "post_id": 40994646, "comment_id": 69199030, "body": "How do you call your recipe ? What is the purpose of wrapping the chef run within a shell script ? This sounds like a <a href=\"http://meta.stackexchange.com/questions/66377/what-is-the-xy-problem\">XY problem</a>"}], "answers": [{"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1481040608, "creation_date": 1481040608, "answer_id": 40999832, "question_id": 40994646, "link": "https://stackoverflow.com/questions/40994646/is-there-a-way-to-send-chef-exit-code-to-shell/40999832#40999832", "title": "Is there a way to send chef exit code to shell", "body": "<p>This is not supported. Chef's exit code have specific meanings which you can find documented at <a href=\"https://github.com/chef/chef-rfc/blob/master/rfc062-exit-status.md#exit-codes-in-use\" rel=\"nofollow noreferrer\">https://github.com/chef/chef-rfc/blob/master/rfc062-exit-status.md#exit-codes-in-use</a></p>\n"}, {"tags": [], "owner": {"reputation": 382, "user_id": 4337452, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/1446292513/picture?type=large", "display_name": "Guy Mazuz", "link": "https://stackoverflow.com/users/4337452/guy-mazuz"}, "is_accepted": false, "score": 0, "last_activity_date": 1481213710, "creation_date": 1481213710, "answer_id": 41043980, "question_id": 40994646, "link": "https://stackoverflow.com/questions/40994646/is-there-a-way-to-send-chef-exit-code-to-shell/41043980#41043980", "title": "Is there a way to send chef exit code to shell", "body": "<p>It's abit hacky, try using export/set_env param ...</p>\n\n<pre><code>begin\n    &lt;yourcode&gt;\nrescue\n    env 'error_code' do\n      value '5'\n    end\nend\n</code></pre>\n\n<p>and then access that env param and delete it.</p>\n"}], "owner": {"reputation": 3, "user_id": 4146062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/485b0a2fb46836b774b1eb4d15359106?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/4146062/surya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1481213710, "creation_date": 1481024884, "last_edit_date": 1481025169, "question_id": 40994646, "link": "https://stackoverflow.com/questions/40994646/is-there-a-way-to-send-chef-exit-code-to-shell", "title": "Is there a way to send chef exit code to shell", "body": "<p>We are currently calling a chef recipe from a shell script. The chef fails with a custom exit code, something like below. But the shell script gets the exit code as <code>1</code>. So can I make shell script fail with this custom exit code.</p>\n\n<pre><code>FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 5)\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481027605, "post_id": 40994500, "comment_id": 69199403, "body": "Use @sawa&#39;s answer : <code>x = a.each_with_object(Hash.new(0)) {|e, h| h[e] += 1}</code>"}], "owner": {"reputation": 1394, "user_id": 4214184, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/8b4c95b51ca86c3a27f1a6515b11557e?s=128&d=identicon&r=PG", "display_name": "anemaria20", "link": "https://stackoverflow.com/users/4214184/anemaria20"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "closed_date": 1481024768, "answer_count": 0, "score": 1, "last_activity_date": 1481024702, "creation_date": 1481024423, "question_id": 40994500, "link": "https://stackoverflow.com/questions/40994500/ruby-group-unique-array-elements-by-how-many-times-each-element-occurs", "closed_reason": "Duplicate", "title": "Ruby - Group unique array elements by how many times each element occurs", "body": "<p>Say I have this array:</p>\n\n<pre><code>a = [1,2,3,1,4,5]\n</code></pre>\n\n<p>I want to group each unique element by how many times it's been used in the array.</p>\n\n<p>So far I tried this, but I'm pretty sure there's a more efficient, Rubyist way:</p>\n\n<pre><code>b = Hash.new\na.uniq.each { |x| b[x] = a.count[x] }\n# { 1 =&gt; 2, 2 =&gt; 1, 3 =&gt; 1, 4 =&gt; 1, 5 =&gt; 1 }\n</code></pre>\n"}]