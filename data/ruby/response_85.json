[{"tags": ["ruby", "ruby-on-rails-4", "railsinstaller-windows"], "answers": [{"tags": [], "owner": {"reputation": 43, "user_id": 4181931, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/727673334/picture?type=large", "display_name": "bent al7egaz", "link": "https://stackoverflow.com/users/4181931/bent-al7egaz"}, "is_accepted": true, "score": 0, "last_activity_date": 1472149231, "creation_date": 1472149231, "answer_id": 39152267, "question_id": 39134734, "link": "https://stackoverflow.com/questions/39134734/the-puma-native-gem-requires-installed-build-tools/39152267#39152267", "title": "The &#39;puma&#39; native gem requires installed build tools", "body": "<p>I solved the problem by following these instruction: </p>\n\n<ul>\n<li><p>download devkit from here.</p></li>\n<li><p>Install the file in DevKit folder</p></li>\n<li><p>open cmd and navigate to the folder</p></li>\n<li><p>Copy the path of the ruby folder you installed in C drive and paste it in the DevKit\\config.yml. Change \u2018/\u2019 in the path to \u2018\\\u2019. </p></li>\n</ul>\n\n<p>It should look like this:</p>\n\n<pre><code># Example:\n#\n# ---\n# - C:/ruby19trunk\n# - C:/ruby192dev\n#\n---\n- C:\\Ruby22\n</code></pre>\n\n<ul>\n<li>Run <code>ruby dk.rb install</code></li>\n<li>Back to your rails folder, run <code>bundle install</code> and you should not have any errors</li>\n</ul>\n"}], "owner": {"reputation": 43, "user_id": 4181931, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/727673334/picture?type=large", "display_name": "bent al7egaz", "link": "https://stackoverflow.com/users/4181931/bent-al7egaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "accepted_answer_id": 39152267, "answer_count": 1, "score": 0, "last_activity_date": 1472149231, "creation_date": 1472083179, "question_id": 39134734, "link": "https://stackoverflow.com/questions/39134734/the-puma-native-gem-requires-installed-build-tools", "title": "The &#39;puma&#39; native gem requires installed build tools", "body": "<p>I have got this error when running bundle install </p>\n\n<pre><code>Gem::InstallError: The 'puma' native gem requires installed build tools.\n\nPlease update your PATH to include build tools or download the DevKit\nfrom 'http://rubyinstaller.org/downloads' and follow the instructions\nat 'http://github.com/oneclick/rubyinstaller/wiki/Development-Kit'\n</code></pre>\n\n<p>I'm using RailsInstaller which already has DevKit. </p>\n\n<p>I didn't have this problem before but I seem to get it after I changes the ruby version from 2.2.4 to 2.2.5. I'm using a windows computer. Any idea how to solve this issue?</p>\n"}, {"tags": ["ruby", "activerecord", "interface", "sinatra"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1472081226, "post_id": 39134458, "comment_id": 65614237, "body": "Using the term &quot;Abstract&quot; in a module is really going to confuse people. That has a specific meaning and it relates to classes, though Ruby doesn&#39;t really use that term at all since there&#39;s no standard method for expressing an abstract base class. Also it&#39;s really not clear what the problem is here."}, {"owner": {"reputation": 485, "user_id": 3699672, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/de7910fbb4b15bd89e7604b7ac021649?s=128&d=identicon&r=PG&f=1", "display_name": "chipmunk", "link": "https://stackoverflow.com/users/3699672/chipmunk"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1472081475, "post_id": 39134458, "comment_id": 65614309, "body": "@tadman: Sorry, I should&#39;ve changed it to <code>class</code> ?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1472081542, "post_id": 39134458, "comment_id": 65614326, "body": "No, I mean it&#39;s fine that it&#39;s a mixin module, but calling it &quot;Abstract&quot; is misleading. Why not call it <code>Model::CollectionMethods</code> or <code>Model::CollectionValidations</code> or something like that?"}, {"owner": {"reputation": 485, "user_id": 3699672, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/de7910fbb4b15bd89e7604b7ac021649?s=128&d=identicon&r=PG&f=1", "display_name": "chipmunk", "link": "https://stackoverflow.com/users/3699672/chipmunk"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1472081650, "post_id": 39134458, "comment_id": 65614352, "body": "ah, got it. done. I am calling it <code>collections</code> as it has both methods and fields. Is that ok?"}], "answers": [{"comments": [{"owner": {"reputation": 485, "user_id": 3699672, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/de7910fbb4b15bd89e7604b7ac021649?s=128&d=identicon&r=PG&f=1", "display_name": "chipmunk", "link": "https://stackoverflow.com/users/3699672/chipmunk"}, "edited": false, "score": 0, "creation_date": 1472146799, "post_id": 39134996, "comment_id": 65646595, "body": "Thank you, that did help in clearing up a lot of concepts!"}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": true, "score": 2, "last_activity_date": 1472086200, "last_edit_date": 1472086200, "creation_date": 1472085461, "answer_id": 39134996, "question_id": 39134458, "link": "https://stackoverflow.com/questions/39134458/ruby-interface-collection-of-objects/39134996#39134996", "title": "Ruby Interface, Collection of Objects", "body": "<p>I saw that you come from Java world, and I guess you want to bring Java's generics to Ruby. But, at first place, why Java has generics? Let's have a history lesson.</p>\n\n<p>In early Java (before 1.5), there are no generic types, so the programmers have to write code like this:</p>\n\n<pre><code>List list = new ArrayList();\n// add some strings to the list\nlist.add(\"foo\");\nlist.add(\"bar\");\n\n// we have to iterate over each element as an Object\nfor (Object obj : list) {\n  // and then cast it to String\n  String str = (String) obj;\n  // in order to call String methods on it.\n  String uppercased = str.toUpperCase();\n\n  // ...\n}\n</code></pre>\n\n<p>This is certainly not DRY. To ease the pain of casting, Java 1.5 introduces generics.</p>\n\n<pre><code>List&lt;String&gt; list = new ArrayList&lt;String&gt;();\n// add some strings to the list\nlist.add(\"foo\");\nlist.add(\"bar\");\n\n// now we can iterate over the elements as strings\nfor (String str : list) {\n  // no more casting, yay!\n  String uppercased = str.toUpperCase();\n\n  // ...\n}\n</code></pre>\n\n<p>But wait, where does the non-generic version go wrong in the first place?</p>\n\n<p>In Java, the variable type determines which methods can be called on the object, not the object itself. If you declare the variable in a more general type (i.e. a superclass), you can't call methods that belongs to a more special type (i.e. a subclass). If you want to call those methods, you have to cast.</p>\n\n<p>But what if the object itself can decide which methods can be called on it? Suddenly generics become useless. Ruby and many many other dynamic languages follow this way. Rubyists call it <strong>duck typing</strong> - if something walks like a duck and quacks like a duck, it is a duck.</p>\n\n<pre><code>list = ['foo', 'bar']\nlist.each do |str|\n  # we don't care what type str is,\n  # as long as it has the method upcase.\n  str.upcase if str.respond_to?(:upcase)\nend\n</code></pre>\n\n<p>So rubyists usually don't define container classes, they just use arrays. If type restriction should be applied, they just apply it when the object is added to the array.</p>\n\n<pre><code>list = []\nlist &lt;&lt; something if something.is_a? Portfolio\n</code></pre>\n\n<p>Another reason to stick to arrays is that arrays have awesome literals like <code>['foo', 'bar']</code> and <code>%w(foo bar)</code> and <code>%i(foo bar)</code>, which custom container types don't have.</p>\n"}], "owner": {"reputation": 485, "user_id": 3699672, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/de7910fbb4b15bd89e7604b7ac021649?s=128&d=identicon&r=PG&f=1", "display_name": "chipmunk", "link": "https://stackoverflow.com/users/3699672/chipmunk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 39134996, "answer_count": 1, "score": 0, "last_activity_date": 1472086200, "creation_date": 1472081019, "last_edit_date": 1472082787, "question_id": 39134458, "link": "https://stackoverflow.com/questions/39134458/ruby-interface-collection-of-objects", "title": "Ruby Interface, Collection of Objects", "body": "<p>I have created an interface called <code>Collection</code> to hold in a collection of any objects from my project's models. I want this collection vs an array as I want other fields in <code>Collection</code>.</p>\n\n<pre><code>    module Collection\n      def self.included(klass)\n        klass.attr_writer :list, type: Array\n        klass.attr_writer :class_type,   type: Class\n        # Other fields go in here, along with their validations\n        klass.validate :validate_list\n\n        def validate_list\n          self.list.each { |o|\n            if(!o.instance_of? self.class_type)\n              klass.errors.add :list, 'Objects in list must be of the same type'\n              return\n            end\n          }\n        end\n      end\n    end\n</code></pre>\n\n<p>I want to use this <code>Collection</code> to hold a list of Models::Company 's objects, apart from other lists which I will add to Portfolio Model in the future. I want this list of companies to be only a part of the Portfolio Model.</p>\n\n<pre><code>class Portfolio\n  include Model::Collection\n\n  @schema = {\n      'type' =&gt; 'object',\n      'properties' =&gt; {\n          'id'                       =&gt; { 'type' =&gt; 'string' },\n          'title'                    =&gt; { 'type' =&gt; 'string'  },\n          'description'              =&gt; { 'type' =&gt; 'string'  },\n          'companies_list'          =&gt;  {'type' =&gt; '?'}, # 1. Should this be array or Collections?\n      }\n  }\n  @modelName      = 'portfolios'\n  @collectionName = 'portfolios'\n\n\n  store_in collection: 'portfolios'\n\n  field :title,                     type: String\n  field :description,               type: String\n  field :companies_list,            type: Array # 2. Should this be array or array of Collections?\n\n  embeds_many :companies\n\nend\n</code></pre>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["ruby", "coffeescript", "sinatra", "dashing"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1472072082, "post_id": 39132764, "comment_id": 65611025, "body": "Be careful using color to signify state/status. Being colorblind can affect how a user would interact with the page, especially when combined with the overall page color."}], "answers": [{"tags": [], "owner": {"reputation": 449, "user_id": 5075269, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--iBQlspvqeQ/AAAAAAAAAAI/AAAAAAAAAJg/5QUKuWNGSt4/photo.jpg?sz=128", "display_name": "Dallan", "link": "https://stackoverflow.com/users/5075269/dallan"}, "is_accepted": true, "score": 1, "last_activity_date": 1472435218, "creation_date": 1472435218, "answer_id": 39197476, "question_id": 39132764, "link": "https://stackoverflow.com/questions/39132764/dynamically-change-background-colour-of-a-dashing-widget/39197476#39197476", "title": "Dynamically change background colour of a Dashing widget", "body": "<p>You are correct about needing code in the coffeescript. I suggest something like the following:</p>\n\n<pre><code>class Dashing.List extends Dashing.List\n\ncolor: () -&gt; \n  data = @get('items')\n  status = # code to process color from your data (I'm not sure exactly your format)\n  switch status\n    when \"Good\" then \"#33cc33\" # green\n    when \"Average\" then \"#ffff00\" # yellow\n    when \"Poor\" then \"#ff0000\" # red\n    else \"#000000\"\n\nonData: (data) -&gt;\n  # change the background color every time that new data is sent\n  $(@get('node')).css 'background-color', @color()\n</code></pre>\n"}], "owner": {"reputation": 1097, "user_id": 472673, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/3d4a6896f964b03e9495a0c5f16100a1?s=128&d=identicon&r=PG", "display_name": "Mark", "link": "https://stackoverflow.com/users/472673/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 927, "favorite_count": 0, "accepted_answer_id": 39197476, "answer_count": 1, "score": 0, "last_activity_date": 1472435218, "creation_date": 1472071656, "question_id": 39132764, "link": "https://stackoverflow.com/questions/39132764/dynamically-change-background-colour-of-a-dashing-widget", "title": "Dynamically change background colour of a Dashing widget", "body": "<p>I've built a dashboard using the ruby based Dashing framework and all seems to be running well but I'd like to be able to change the background colour of one of my List widgets (<em>mywidget</em>) based on one of the values in the list.</p>\n\n<p>My updatelist.rb job file currently looks like:</p>\n\n<pre><code>hashdata = Hash.new({ value: 0 })\n\nSCHEDULER.every '10s' do\n\n  File.open('xxx.txt').each do |line|\n    field = line.split(;).first\n    value = line.split(;).last\n\n    if ['Status', 'Active', 'Duration].include? field\n     hashdata[field] = { label: field, value: value }\n    end\n  end\n  send_event('mywidget', { items: hashdata.values })\nend\n</code></pre>\n\n<p>The file it is reading (<em>xxx.txt</em>) is formatted like:</p>\n\n<pre><code>Status; Good\nActive; No\nDuration; 1000\n</code></pre>\n\n<p>I'd like change the background colour of the list widget based on the value of Status i.e. Good=green, Average=yellow, Poor=red.</p>\n\n<p>How can I do this? Adding something to the coffee script seems the obvious solution but I can't see how to achieve it</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "authentication", "devise"], "answers": [{"tags": [], "owner": {"reputation": 156, "user_id": 6596077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/163290b321671a258dace685f3fe8c20?s=128&d=identicon&r=PG&f=1", "display_name": "peaches", "link": "https://stackoverflow.com/users/6596077/peaches"}, "is_accepted": false, "score": 0, "last_activity_date": 1472072120, "creation_date": 1472072120, "answer_id": 39132869, "question_id": 39132403, "link": "https://stackoverflow.com/questions/39132403/devise-token-auth-cant-verify-csrf-token-authenticity/39132869#39132869", "title": "Devise token auth can&#39;t verify CSRF token authenticity", "body": "<p>This is actually considered a feature of Rails to protect you from CSRF attacks. Devise probably implements some form of forgery protection so you can't make non-GET requests without a proper token (this token is added to requests made from Rails itself but not Curl). You can look at the rails documentation for \"protect_from_forgery\". I would include a link but I am not sure which version of Rails you are using.</p>\n"}, {"tags": [], "owner": {"reputation": 4835, "user_id": 68194, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/baf4184ea594b57be1e57a0b7a679c05?s=128&d=identicon&r=PG", "display_name": "Matthew", "link": "https://stackoverflow.com/users/68194/matthew"}, "is_accepted": true, "score": 2, "last_activity_date": 1472072236, "creation_date": 1472072236, "answer_id": 39132894, "question_id": 39132403, "link": "https://stackoverflow.com/questions/39132403/devise-token-auth-cant-verify-csrf-token-authenticity/39132894#39132894", "title": "Devise token auth can&#39;t verify CSRF token authenticity", "body": "<p>The CSRF token authenticity check is originating from your Rails Application Controller.</p>\n\n<pre><code># Prevent CSRF attacks by raising an exception.\n# For APIs, you may want to use :null_session instead.\nprotect_from_forgery with: :exception\n</code></pre>\n\n<p>There are a variety of ways you can handle the situation, but from the rails guide, they <a href=\"http://guides.rubyonrails.org/security.html#csrf-countermeasures\" rel=\"nofollow\">suggest adding a header</a>:</p>\n\n<blockquote>\n  <p>By default, Rails includes jQuery and an unobtrusive scripting adapter\n  for jQuery, which adds a header called X-CSRF-Token on every non-GET\n  Ajax call made by jQuery with the security token. Without this header,\n  non-GET Ajax requests won't be accepted by Rails. When using another\n  library to make Ajax calls, it is necessary to add the security token\n  as a default header for Ajax calls in your library. To get the token,\n  have a look at  tag\n  printed by &lt;%= csrf_meta_tags %> in your application view.</p>\n</blockquote>\n"}], "owner": {"reputation": 39, "user_id": 6301314, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c70b0f6821a149906503450af79cae17?s=128&d=identicon&r=PG&f=1", "display_name": "Marek Michalik", "link": "https://stackoverflow.com/users/6301314/marek-michalik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2433, "favorite_count": 0, "accepted_answer_id": 39132894, "answer_count": 2, "score": 1, "last_activity_date": 1472072236, "creation_date": 1472070059, "question_id": 39132403, "link": "https://stackoverflow.com/questions/39132403/devise-token-auth-cant-verify-csrf-token-authenticity", "title": "Devise token auth can&#39;t verify CSRF token authenticity", "body": "<p>I try to create app in rails, which would be regular web application and also an api for mobile application written in react native. I take advantage of \"devise token auth\" gem along wiht \"devise\". \nI added  gems to Gemfile and ran bundle. Next I ran\n<code>rails g devise_token_auth:install User auth</code>. Finally I changed routes:</p>\n\n<pre><code>Rails.application.routes.draw do\n  devise_for :users\n\n  namespace :api do\n    scope :v1 do\n      mount_devise_token_auth_for 'User', at: 'auth'\n    end\n  end\nend\n</code></pre>\n\n<p>Fortunately regular sign_in and sign_up work for web app, however when I try to send request to api using curl:</p>\n\n<pre><code>curl -H \"Content-Type: application/json\" -X POST -d '{\"email\":\"test123@gmail.com\",\"password\":\"aaaaaaaa\"}' http://localhost:3000/api/v1/auth/sign_in\n</code></pre>\n\n<p>I get message \"can't verify CSRF token authenticity\"</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redirect", "hyperlink", "routes"], "answers": [{"tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": false, "score": 2, "last_activity_date": 1472070731, "creation_date": 1472070731, "answer_id": 39132565, "question_id": 39132271, "link": "https://stackoverflow.com/questions/39132271/how-can-i-redirect-to-a-specific-controller-action-with-similar-routes/39132565#39132565", "title": "How can I redirect to a specific controller/action with similar routes?", "body": "<p>You didn't specify different properties, both routes look's identical for Rails. The <code>match</code> method expect any string(or id) in the <code>':clube_id'</code> or <code>':project_id'</code>, for example:</p>\n\n<pre><code> host_name/soho_project or host_name/1\n</code></pre>\n\n<p>How is Rails can recognize for a which model it's related?  It can be a <code>Project</code> or <code>Club</code>. I suggest add something like the <em>anchor</em> to a <code>match</code> method.</p>\n\n<pre><code>match 'club/:clube_id' =&gt; 'clubes#show', :as =&gt; 'clean_cluble', via: [:get]\nmatch 'project/:project_id' =&gt; 'projects#show', :as =&gt; 'clean_project',via: [:get] \n</code></pre>\n\n<p>and helpers:</p>\n\n<pre><code>= link_to 'Project', clean_project_path(:project_id=&gt;'xxxxx')\n= link_to 'Clube', clean_cluble_path(:clube_id=&gt;'cccc')\n</code></pre>\n\n<p><sub>Read more about routes from the Rails <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow\">guides</a>.</sub></p>\n"}], "owner": {"reputation": 1, "user_id": 4771420, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153021645813876/picture?type=large", "display_name": "Carlos Torres", "link": "https://stackoverflow.com/users/4771420/carlos-torres"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 345, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472071073, "creation_date": 1472069495, "last_edit_date": 1472071073, "question_id": 39132271, "link": "https://stackoverflow.com/questions/39132271/how-can-i-redirect-to-a-specific-controller-action-with-similar-routes", "title": "How can I redirect to a specific controller/action with similar routes?", "body": "<p>My routes are redirecting to the same controller even when I specified different properties inside my routes.rb file.</p>\n\n<p>These are my routes.</p>\n\n<pre><code>match ':clube_id' =&gt; 'clubes#show', :as =&gt; 'clean_cluble', via: [:get]\nmatch ':project_id' =&gt; 'projects#show', :as =&gt; 'clean_project',via: [:get] \n</code></pre>\n\n<p>These are the links that I am using.</p>\n\n<pre><code>=link_to 'Project', :controller =&gt; \"projects\", :action =&gt; \"show\", :project_id=&gt;'xxxxx'\n=link_to 'Clube', :controller =&gt; \"clubes\", :action =&gt; \"show\", :id=&gt;'cccc'\n</code></pre>\n\n<p>The link for projects works well, but the linl for clubes is redirecting to projects controller. that is the problem.</p>\n\n<p>The URLs that I spect are:</p>\n\n<pre><code>http://host_name/project_name\nhttp://host_name/clube_name\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 2, "creation_date": 1472067964, "post_id": 39131752, "comment_id": 65609008, "body": "Why would you want to? You can pull the non-web parts you need into a CLI app. That said: the ability to interact over an API is nothing to sneeze at, even if you don&#39;t realize it yet."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1472072279, "post_id": 39131752, "comment_id": 65611111, "body": "You can, but you&#39;re wasting a huge amount of Rails&#39; functionality, which is web-based, so why? You can easily build CLI apps with DB integration using an ORM such as <a href=\"http://sequel.jeremyevans.net\" rel=\"nofollow noreferrer\">Sequel</a>, and <a href=\"http://edgeguides.rubyonrails.org/active_support_core_extensions.html\" rel=\"nofollow noreferrer\">cherry-pick parts of ActiveSupport</a> if needed, and end up with an app that is much smaller."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1472072599, "post_id": 39131752, "comment_id": 65611259, "body": "As @DaveNewton was saying, building a backend that uses a REST interface via HTTP could be done with Rails. Then the command-line clients could use HTTP clients to talk to the back end. It depends on if you want a distributed system or not. If you&#39;re new to Ruby, then jumping into Rails is a steep learning curve, because Rails takes advantage of a lot of Ruby&#39;s deep magic; Looking at that code without understanding what is happening can leave you bewildered. A straight Ruby CLI app tends to be much simpler and easier to implement."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1472069590, "post_id": 39131980, "comment_id": 65609850, "body": "It depends on what sort of a command-line app you&#39;re creating. If it&#39;s literally a series of commands used by the shell, MVC doesn&#39;t always apply. If it&#39;s something interactive with <a href=\"https://en.wikipedia.org/wiki/Curses_(programming_library)\" rel=\"nofollow noreferrer\">curses</a> it might have a UI and MVC comes back into play, but not the Rails one."}, {"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1472073247, "post_id": 39131980, "comment_id": 65611561, "body": "Oh, definitely. I was assuming, perhaps incorrectly, that the reason the OP was interested in using Rails was for the database stuff. I recently wrote a CLI that lives inside our Rails app space so my thinking might have been biased unconsciously."}], "tags": [], "owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "is_accepted": true, "score": 3, "last_activity_date": 1472068421, "creation_date": 1472068421, "answer_id": 39131980, "question_id": 39131752, "link": "https://stackoverflow.com/questions/39131752/is-it-possible-to-buld-a-cli-app-using-ruby-on-rails/39131980#39131980", "title": "Is it possible to buld a CLI app using Ruby on Rails?", "body": "<p>Yes, you can definitely use a Rails app. That's the short answer.</p>\n\n<p>As Controllers and Views are likely unneeded in a CLI application, a large chunk of the Rails framework will be obviated entirely. But Rails models, ActiveRecord, Arel and the database management aspects are really powerful. How nice it would be to just leverage those.</p>\n\n<p><em>SHOULD</em> you? Outside the scope of your question and highly dependent on your requirements &amp; personal preference, which I'm not privy to, of course.</p>\n"}], "owner": {"reputation": 3522, "user_id": 544864, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2146b632c41a02a62279aed5b4ab57d7?s=128&d=identicon&r=PG", "display_name": "Ken J", "link": "https://stackoverflow.com/users/544864/ken-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 39131980, "answer_count": 1, "score": 0, "last_activity_date": 1472068421, "creation_date": 1472067522, "question_id": 39131752, "link": "https://stackoverflow.com/questions/39131752/is-it-possible-to-buld-a-cli-app-using-ruby-on-rails", "title": "Is it possible to buld a CLI app using Ruby on Rails?", "body": "<p>I'm new to Ruby and I'm looking to write a CLI app. My app is not suited for a web app. I'm running Ruby 2.2.2 on OSX and Ubuntu. </p>\n\n<p><strong>Can I use Rails to build an app that is strictly interacting via the CLI (not via HTTP)?</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ruby-on-rails-5", "actioncable"], "comments": [{"owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1472069634, "post_id": 39131726, "comment_id": 65609870, "body": "Not familiar with action_cable, but it seems that it expects <code>channel</code> as the key for channel name, not <code>ChatroomsChannel</code> as you have."}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 6404786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f571c04dd8d477b500f2daac8cad44fe?s=128&d=identicon&r=PG&f=1", "display_name": "\u0424\u0438\u043b", "link": "https://stackoverflow.com/users/6404786/%d0%a4%d0%b8%d0%bb"}, "is_accepted": false, "score": 1, "last_activity_date": 1496584603, "last_edit_date": 1496584603, "creation_date": 1496583029, "answer_id": 44354617, "question_id": 39131726, "link": "https://stackoverflow.com/questions/39131726/nomethoderror-undefined-method-safe-constantize-for-nilnilclass/44354617#44354617", "title": "NoMethodError - undefined method `safe_constantize&#39; for nil:NilClass", "body": "<p>in <code>assets/javascripts/channels/chatroom.coffee</code></p>\n\n<p>If you need to assign <code>params</code>, channel name must be in params hash too:</p>\n\n<pre><code>App['chatroom' + roomId] = App.cable.subscriptions.create {\n  channel: 'ChatroomChannel',\n  room_id: roomId\n}, {\n  received: -&gt;\n    ...\n}\n</code></pre>\n\n<p>And only if you don't need <code>params</code>, you can write channel name without hash:</p>\n\n<pre><code>App.chatroom = App.cable.subscriptions.create 'ChatroomChannel',\n  received: -&gt;\n    ...\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 3786322, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1118514890/picture?type=large", "display_name": "Mathias Spurr", "link": "https://stackoverflow.com/users/3786322/mathias-spurr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 682, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1496584603, "creation_date": 1472067436, "question_id": 39131726, "link": "https://stackoverflow.com/questions/39131726/nomethoderror-undefined-method-safe-constantize-for-nilnilclass", "title": "NoMethodError - undefined method `safe_constantize&#39; for nil:NilClass", "body": "<p>I am trying to create an ActionCable chatroom following the actioncable guide on GoRails.com.</p>\n\n<p>As I am trying to connect to ActionCable I get following error:\nNoMethodError - undefined method `safe_constantize' for nil:NilClass</p>\n\n<pre><code>[ActionCable] [User 1] Could not execute command from \n{\"command\"=&gt;\"subscribe\", \"identifier\"=&gt;\"\n{\\\"ChatroomsChannel\\\":\\\"ChatroomsChannel\\\",\\\"room_id\\\":1}\"}) \n[NoMethodError - undefined method `safe_constantize' for \nnil:NilClass]: /Users/Mathias/.rvm/gems/ruby-\n2.2.3@chatroomv1/gems/actioncable-\n5.0.0.rc2/lib/action_cable/connection/subscriptions.rb:29:in `add' | \n/Users/Mathias/.rvm/gems/ruby-2.2.3@chatroomv1/gems/actioncable-\n5.0.0.rc2/lib/action_cable/connection/subscriptions.rb:15:in \n`execute_command' | /Users/Mathias/.rvm/gems/ruby-\n2.2.3@chatroomv1/gems/actioncable-\n5.0.0.rc2/lib/action_cable/connection/base.rb:88:in \n`dispatch_websocket_message' | /Users/Mathias/.rvm/gems/ruby-\n2.2.3@chatroomv1/gems/actioncable-\n5.0.0.rc2/lib/action_cable/server/worker.rb:54:in `block in invoke' | \n/Users/Mathias/.rvm/gems/ruby-2.2.3@chatroomv1/gems/actioncable-\n5.0.0.rc2/lib/action_cable/server/worker.rb:39:in `block in work'\n</code></pre>\n\n<p>My app/channels/chatrooms_channel.rb looks like this:</p>\n\n<pre><code>def subscribed\n   @chatroom = Chatroom.find(params[:room_id])\n   #puts params[:room_id]\n   #current_user.join_room(@chatroom)\n   stream_from \"chatrooms:#{@chatroom.id}\"\n   # stream_from \"some_channel\"\nend\n</code></pre>\n\n<p>Maybe it is worth mentioning that I upgraded to rails 5.0.0.rc2 from rails 4.</p>\n\n<p>Thank you,</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1472067497, "post_id": 39131700, "comment_id": 65608797, "body": "Have you tried something? What&#39;s can be more elegant than a loop?"}, {"owner": {"reputation": 7878, "user_id": 630780, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fskbD.png?s=128&g=1", "display_name": "Carl Markham", "link": "https://stackoverflow.com/users/630780/carl-markham"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1472067598, "post_id": 39131700, "comment_id": 65608844, "body": "Therein lies my question. I have it working with the loop but wondering if there is a better way"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1472067629, "post_id": 39131700, "comment_id": 65608858, "body": "Better than what? Could you share your solution?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1472072718, "post_id": 39131700, "comment_id": 65611309, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; including the linked pages and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. We&#39;d like to see what you tried toward solving this, either as what pages you searched and why those didn&#39;t work, or your code attempt and why it&#39;s not doing what you want. Without those it looks like you&#39;re asking for us to do your work for you. &quot;<a href=\"http://meta.stackoverflow.com/a/261593/128421\">How much research effort is expected of Stack Overflow users?</a>&quot; will help you."}], "answers": [{"tags": [], "owner": {"reputation": 42085, "user_id": 3444240, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/OjOru.jpg?s=128&g=1", "display_name": "potashin", "link": "https://stackoverflow.com/users/3444240/potashin"}, "is_accepted": true, "score": 5, "last_activity_date": 1472069002, "creation_date": 1472069002, "answer_id": 39132136, "question_id": 39131700, "link": "https://stackoverflow.com/questions/39131700/merge-hashes-with-value/39132136#39132136", "title": "Merge hashes with value", "body": "<p>You can try with <code>map</code> and <code>sum</code> (<em>since you are using rails</em>):</p>\n\n<pre><code>arr.group_by{|x| x[:created]}.map{|date, x|\n  {\n    created: date,\n    amount: x.sum{|xx| xx[:amount]}\n  } \n}\n\n# =&gt; {:created=&gt;\"11/11/86\", :amount=&gt;30}, {:created=&gt;\"12/11/86\", :amount=&gt;4}]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1472087930, "creation_date": 1472087930, "answer_id": 39135288, "question_id": 39131700, "link": "https://stackoverflow.com/questions/39131700/merge-hashes-with-value/39135288#39135288", "title": "Merge hashes with value", "body": "<pre><code>arr = [\n  {\n    created: '11/11/86',\n    amount: 10,\n  },\n  {\n    created: '11/11/86',\n    amount: 20,\n  },\n  {\n    created: '12/11/86',\n    amount: 4,\n  }\n]\n\narr.each_with_object(Hash.new(0)) { |g,h| h[g[:created]] += g[:amount] }.\n  map { |k,v| { created: k, amount: v } }\n  #=&gt; [{:created=&gt;\"11/11/86\", :amount=&gt;30}, {:created=&gt;\"12/11/86\", :amount=&gt;4}]\n</code></pre>\n\n<p>The first step is:</p>\n\n<pre><code>arr.each_with_object(Hash.new(0)) { |g,h| h[g[:created]] += g[:amount] }\n  #=&gt; {\"11/11/86\"=&gt;30, \"12/11/86\"=&gt;4} \n</code></pre>\n\n<p><code>Hash.new(0)</code> is sometimes referred to as a <em>counting hash</em>. See the class method <a href=\"http://ruby-doc.org/core-2.3.0/Hash.html#method-c-new\" rel=\"nofollow\">Hash::new</a>.  </p>\n"}], "owner": {"reputation": 7878, "user_id": 630780, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fskbD.png?s=128&g=1", "display_name": "Carl Markham", "link": "https://stackoverflow.com/users/630780/carl-markham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "closed_date": 1472184198, "accepted_answer_id": 39132136, "answer_count": 2, "score": -2, "last_activity_date": 1472087930, "creation_date": 1472067337, "last_edit_date": 1472068107, "question_id": 39131700, "link": "https://stackoverflow.com/questions/39131700/merge-hashes-with-value", "closed_reason": "Needs more focus", "title": "Merge hashes with value", "body": "<p>Say I have the following array of hashes</p>\n\n<pre><code>[\n  {\n    created: '11/11/86',\n    amount: 10,\n  },\n  {\n    created: '11/11/86',\n    amount: 20,\n  },\n  {\n    created: '12/11/86',\n    amount: 4,\n  }\n]\n</code></pre>\n\n<p>I want to merge all hashes with the same <code>created</code> key so the result would be:</p>\n\n<pre><code>[\n  {\n    created: '11/11/86',\n    amount: 30,\n  },\n  {\n    created: '12/11/86',\n    amount: 4,\n  }\n]\n</code></pre>\n\n<p>I realise I can use loops but I am looking for something more elegant.</p>\n\n<p>The hashes could have more keys, but I only care about these 2.</p>\n"}, {"tags": ["ruby", "tcp"], "comments": [{"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 1, "creation_date": 1472064546, "post_id": 39130917, "comment_id": 65607247, "body": "You should add some logging and pipe STDERR to some file which can tell you why it broke."}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 1, "creation_date": 1472064582, "post_id": 39130917, "comment_id": 65607273, "body": "you may want to add monitoring (God, Monit etc) to bring back the service in case it goes down (if that&#39;s your use case)"}, {"owner": {"reputation": 1070, "user_id": 2963716, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/818579164/picture?type=large", "display_name": "Acacia", "link": "https://stackoverflow.com/users/2963716/acacia"}, "reply_to_user": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1472064597, "post_id": 39130917, "comment_id": 65607282, "body": "@kiddorails, i could use an example!"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 1, "creation_date": 1472064690, "post_id": 39130917, "comment_id": 65607339, "body": "To pipe STDERR and STDOUT - <a href=\"http://unix.stackexchange.com/a/45915\">unix.stackexchange.com/a/45915</a> Monit - <a href=\"http://railscasts.com/episodes/375-monit\" rel=\"nofollow noreferrer\">railscasts.com/episodes/375-monit</a>  God - <a href=\"http://railscasts.com/episodes/130-monitoring-with-god\" rel=\"nofollow noreferrer\">railscasts.com/episodes/130-monitoring-with-god</a>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1472072886, "post_id": 39130917, "comment_id": 65611395, "body": "We can&#39;t really guess what&#39;s killing the server. You need to supply some (heavily) filtered log and/or stack-trace output, plus the bare minimum code that demonstrates the problem. Without that information we have to give answers which might help the symptom but won&#39;t fix the problem. Read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; including the linked pages, and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1472065642, "creation_date": 1472065642, "answer_id": 39131251, "question_id": 39130917, "link": "https://stackoverflow.com/questions/39130917/ruby-tcp-server-closes/39131251#39131251", "title": "Ruby TCP server closes", "body": "<p>You should wrap your process in a <a href=\"https://www.ruby-toolbox.com/categories/daemonizing\" rel=\"nofollow\">daemon handler</a> so it gets restarted automatically.</p>\n\n<p>You make a launcher script called something like <code>launcher.rb</code> that looks like this:</p>\n\n<pre><code>require 'daemons'\n\nDaemons.run('myserver.rb')\n</code></pre>\n\n<p>Then, <a href=\"https://github.com/thuehlinger/daemons\" rel=\"nofollow\">as per the documentation</a>:</p>\n\n<pre><code>ruby launcher.rb start\n</code></pre>\n"}], "owner": {"reputation": 1070, "user_id": 2963716, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/818579164/picture?type=large", "display_name": "Acacia", "link": "https://stackoverflow.com/users/2963716/acacia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "closed_date": 1472920968, "accepted_answer_id": 39131251, "answer_count": 1, "score": 0, "last_activity_date": 1472065642, "creation_date": 1472064474, "question_id": 39130917, "link": "https://stackoverflow.com/questions/39130917/ruby-tcp-server-closes", "closed_reason": "Needs details or clarity", "title": "Ruby TCP server closes", "body": "<p>I have a TCP server I start with the following command;</p>\n\n<pre><code>nohup ruby ./server.rb &amp;\n</code></pre>\n\n<p>However, after a couple of days, this process is just closed and cannot trace the point when it breaks,</p>\n\n<p>How do i keep the TCP server alive for ever until stopped.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 865, "user_id": 3126997, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4667a92ad2291ff86852cd5dccb36818?s=128&d=identicon&r=PG&f=1", "display_name": "patrick", "link": "https://stackoverflow.com/users/3126997/patrick"}, "edited": false, "score": 0, "creation_date": 1472064593, "post_id": 39130854, "comment_id": 65607279, "body": "Thank you very much. I will accept your answer once I can."}], "tags": [], "owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "is_accepted": true, "score": 3, "last_activity_date": 1472064246, "creation_date": 1472064246, "answer_id": 39130854, "question_id": 39130805, "link": "https://stackoverflow.com/questions/39130805/rails-4-why-does-this-code-not-save-contact-and-company-to-database/39130854#39130854", "title": "Rails 4: Why does this code not save Contact and Company to database?", "body": "<p>It seems you forgot to save you <code>@contact</code> and <code>@compnay</code> Object.</p>\n\n<pre><code>def create\n   @company = Company.new(company_params)\n   @contact = Contact.new(contact_params) \n\n respond_to do |format|\n  if @company.valid? &amp;&amp; @contact.valid?\n    # Save your Object here like\n    @company = @company.save \n    @contact = @contact.save\n\n    # SuggestionMailer.newcompany_email(@company, @contact.email, @contact.name).deliver_now\n\n    format.html { redirect_to @company, notice: 'Company was successfully submitted.' }\n    format.json { render :show, status: :created, location: @company }\n  else\n    format.html { render :new }\n    format.json { render json: @company.errors, status: :unprocessable_entity }\n  end\n end\nend\n</code></pre>\n"}], "owner": {"reputation": 865, "user_id": 3126997, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4667a92ad2291ff86852cd5dccb36818?s=128&d=identicon&r=PG&f=1", "display_name": "patrick", "link": "https://stackoverflow.com/users/3126997/patrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 39130854, "answer_count": 1, "score": 1, "last_activity_date": 1480659879, "creation_date": 1472064068, "last_edit_date": 1480659879, "question_id": 39130805, "link": "https://stackoverflow.com/questions/39130805/rails-4-why-does-this-code-not-save-contact-and-company-to-database", "title": "Rails 4: Why does this code not save Contact and Company to database?", "body": "<p>I am currently stuck with probably an easy question that somehow though keeps me a bit confused.</p>\n\n<p>Why is Contact and Company not saved to my database in this controller method? I am calling this very same method in another Rails 5 project and \n@company = Company.new(company_params) seems to work just fine.</p>\n\n<pre><code>def create\n   @company = Company.new(company_params)\n   @contact = Contact.new(contact_params) \n\n respond_to do |format|\n  if @company.valid? &amp;&amp; @contact.valid?\n\n    # SuggestionMailer.newcompany_email(@company, @contact.email, @contact.name).deliver_now\n\n    format.html { redirect_to @company, notice: 'Company was successfully submitted.' }\n    format.json { render :show, status: :created, location: @company }\n  else\n    format.html { render :new }\n    format.json { render json: @company.errors, status: :unprocessable_entity }\n  end\n end\nend\n</code></pre>\n\n<p>These are the referenced methods:</p>\n\n<pre><code>def company_params\n  params.require(:company).permit(:name, :location, :founded_date,  :category, :sub_category,\n                                  :business_model, :target_client, :description, :main_url, \n                                  :twitter_url, :angellist_url, :crunchbase_url, :employee_count, \n                                  :all_tags, :category_id, :sub_category_id, :target_client_id, \n                                  :business_model_id)\nend\n\ndef contact_params\n  params.require(:contact).permit(:name, :email)\nend\n</code></pre>\n\n<p>I would very much appreciate a short feedback here. Thank you!</p>\n"}, {"tags": ["ruby", "file", "rename"], "answers": [{"comments": [{"owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "edited": false, "score": 2, "creation_date": 1472064002, "post_id": 39130648, "comment_id": 65606934, "body": "<code>File.rename(path, dest_path)</code> instead of shelling out. Also, <code>gsub(&#47;\\.tif\\Z&#47;, &#39;.png&#39;)</code> not to accidentally rename something other than the extension."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1472064941, "post_id": 39130648, "comment_id": 65607477, "body": "That should be <code>\\z</code>, as I&#39;m sure you know."}, {"owner": {"reputation": 500, "user_id": 3126291, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8f4e5aa2787c65782cf359db90a24a9c?s=128&d=identicon&r=PG", "display_name": "suyesh", "link": "https://stackoverflow.com/users/3126291/suyesh"}, "edited": false, "score": 0, "creation_date": 1472069286, "post_id": 39130648, "comment_id": 65609700, "body": "I tried that. i still have duplicate .tiff and also the path for new png files was outside of the folder"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1472081436, "post_id": 39130648, "comment_id": 65614294, "body": "<code>gsub</code> is a tiny bit misguided since you should have only <i>one</i> file extension: use <code>sub</code> instead."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1472065569, "last_edit_date": 1472065569, "creation_date": 1472063529, "answer_id": 39130648, "question_id": 39130473, "link": "https://stackoverflow.com/questions/39130473/how-to-loop-through-folders-and-rename-files/39130648#39130648", "title": "How to loop through folders and rename files", "body": "<p><code>Dir.glob</code> returns the full path.</p>\n\n<p>Step 1: gsub <code>.tif</code> to <code>.png</code></p>\n\n<p>Step 2: Check the new name isn't a duplicate</p>\n\n<p>Step 3: Use <code>mv</code></p>\n\n<hr>\n\n<pre><code>Dir.glob('./**/*.tif').each do |path|\n  dest_path = path.gsub(\".tif\", \".png\")\n  unless File.exists?(dest_path)\n    `mv \"#{path}\" \"#{dest_path}\"`\n  end\nend\n</code></pre>\n\n<hr>\n\n<p>edited with suggestion from comment</p>\n\n<pre><code>Dir.glob('./**/*.tif').each do |path|\n  dest_path = path.gsub(/\\.tif\\z/, '.png')\n  unless File.exists?(dest_path)\n    File.rename(path, dest_path)\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1472081405, "post_id": 39130783, "comment_id": 65614285, "body": "Worth splitting that up onto multiple lines so what&#39;s going on is more clear."}], "tags": [], "owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "is_accepted": false, "score": 0, "last_activity_date": 1472063995, "creation_date": 1472063995, "answer_id": 39130783, "question_id": 39130473, "link": "https://stackoverflow.com/questions/39130473/how-to-loop-through-folders-and-rename-files/39130783#39130783", "title": "How to loop through folders and rename files", "body": "<p>This should do it:</p>\n\n<pre><code>Dir.glob('./**/*.tif').each { |img| File.rename(img, img.gsub(/tif$/, 'png')) unless File.exists?(img.gsub(/tif$/, 'png')) }\n</code></pre>\n"}], "owner": {"reputation": 500, "user_id": 3126291, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8f4e5aa2787c65782cf359db90a24a9c?s=128&d=identicon&r=PG", "display_name": "suyesh", "link": "https://stackoverflow.com/users/3126291/suyesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 376, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1472065569, "creation_date": 1472062891, "last_edit_date": 1472063301, "question_id": 39130473, "link": "https://stackoverflow.com/questions/39130473/how-to-loop-through-folders-and-rename-files", "title": "How to loop through folders and rename files", "body": "<p>I am looping in folder like this </p>\n\n<pre><code>Dir.glob('**/*.tif').each do |image_file|\n</code></pre>\n\n<p>I get <code>images/SW/SW-9.tif</code> , i want to change to <code>images/SW/SW-9.png</code> and not duplicate, the .tif file should be deleted.</p>\n\n<p>I want to rename all that files from .tif to .png</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1599, "user_id": 617090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66NEM.jpg?s=128&g=1", "display_name": "kcdragon", "link": "https://stackoverflow.com/users/617090/kcdragon"}, "edited": false, "score": 0, "creation_date": 1472063650, "post_id": 39130452, "comment_id": 65606746, "body": "What do you new and edit views look like? What you labelled &quot;invoice_form&quot; looks like a partial so we need to see what is causing the partial."}, {"owner": {"reputation": 866, "user_id": 5768081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NGa7y.jpg?s=128&g=1", "display_name": "luissimo", "link": "https://stackoverflow.com/users/5768081/luissimo"}, "reply_to_user": {"reputation": 1599, "user_id": 617090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66NEM.jpg?s=128&g=1", "display_name": "kcdragon", "link": "https://stackoverflow.com/users/617090/kcdragon"}, "edited": false, "score": 0, "creation_date": 1472063801, "post_id": 39130452, "comment_id": 65606829, "body": "The new and edit views are just rendering the &#39;_form&#39; partial"}], "answers": [{"comments": [{"owner": {"reputation": 866, "user_id": 5768081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NGa7y.jpg?s=128&g=1", "display_name": "luissimo", "link": "https://stackoverflow.com/users/5768081/luissimo"}, "edited": false, "score": 0, "creation_date": 1472064258, "post_id": 39130795, "comment_id": 65607080, "body": "Oh wow, i totally overlooked on that one.. thanks man it&#39;s working now!"}], "tags": [], "owner": {"reputation": 1269, "user_id": 5531936, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/zpdEy.jpg?s=128&g=1", "display_name": "Ren", "link": "https://stackoverflow.com/users/5531936/ren"}, "is_accepted": true, "score": 1, "last_activity_date": 1472080028, "last_edit_date": 1472080028, "creation_date": 1472064042, "answer_id": 39130795, "question_id": 39130452, "link": "https://stackoverflow.com/questions/39130452/nested-form-working-in-new-but-not-showing-up-in-edit-rails/39130795#39130795", "title": "Nested form working in new but not showing up in edit Rails", "body": "<p>In the invoices controller try changing <code>customers_attributes</code> to <code>customer_attributes</code> in your strong params:</p>\n\n<pre><code>customer_attributes: [:id, :company_name, :address_line_1, :zip_code, :_destroy]\n</code></pre>\n\n<p>I suspect this is an issue where your customer nested attributes are not being properly saved, so when you go to the edit view that part of the form isn't being rendered because there isn't any customer saved for your invoice</p>\n"}], "owner": {"reputation": 866, "user_id": 5768081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NGa7y.jpg?s=128&g=1", "display_name": "luissimo", "link": "https://stackoverflow.com/users/5768081/luissimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 548, "favorite_count": 0, "accepted_answer_id": 39130795, "answer_count": 1, "score": 1, "last_activity_date": 1472080028, "creation_date": 1472062814, "last_edit_date": 1472063687, "question_id": 39130452, "link": "https://stackoverflow.com/questions/39130452/nested-form-working-in-new-but-not-showing-up-in-edit-rails", "title": "Nested form working in new but not showing up in edit Rails", "body": "<p>I'm making a invoice application where i have the @invoice form and inside it i have nested forms for customers, products, and company information. The products form is working fine in all views but the customer form isn't. When i fill in the customer information and create a new invoice it works. But when i try to edit that invoice the entire form is gone.</p>\n\n<p><strong>invoice/_form</strong></p>\n\n<pre><code>&lt;%= form_for @invoice do |f| %&gt;\n&lt;% if @invoice.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(@invoice.errors.count, \"error\") %&gt; prohibited this invoice from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% @invoice.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n    &lt;%= f.fields_for :customer do |customer| %&gt;\n    &lt;div class=\"field\"&gt;\n    &lt;%= customer.label 'Bedrijfsnaam ontvanger' %&gt;&lt;br/&gt;\n    &lt;%= customer.text_field :company_name, placeholder: 'bedrijfsnaam', class: 'form-control' %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"field\"&gt;\n    &lt;%= customer.label 'Adres ontvanger' %&gt;&lt;br&gt;\n    &lt;%= customer.text_field :address_line_1, placeholder: 'adres ontvanger', class: 'form-control' %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"field\"&gt;\n    &lt;%= customer.label 'Postcode &amp; stad' %&gt;&lt;br&gt;\n    &lt;%= customer.text_field :zip_code, placeholder: '1234AB Rotterdam', class: 'form-control' %&gt;\n    &lt;/div&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p><strong>Invoices_controller.rb</strong></p>\n\n<pre><code>class InvoicesController &lt; ApplicationController\n  before_action :set_invoice, only: [:show, :edit, :update, :destroy]\n\n  # GET /invoices\n  # GET /invoices.json\n  def index\n    @invoices = Invoice.all\n  end\n\n  # GET /invoices/1\n  # GET /invoices/1.json\n  def show\n  end\n\n  # GET /invoices/new\n  def new\n    @invoice = Invoice.new\n    @invoice.products.build\n    @invoice.build_customer\n  end\n\n  # GET /invoices/1/edit\n  def edit\n  end\n\n  # POST /invoices\n  # POST /invoices.json\n  def create\n    @invoice = Invoice.new(invoice_params)\n\n    respond_to do |format|\n      if @invoice.save\n        format.html { redirect_to @invoice, notice: 'Invoice was successfully created.' }\n        format.json { render :show, status: :created, location: @invoice }\n      else\n        format.html { render :new }\n        format.json { render json: @invoice.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /invoices/1\n  # PATCH/PUT /invoices/1.json\n  def update\n    respond_to do |format|\n      if @invoice.update(invoice_params)\n        format.html { redirect_to @invoice, notice: 'Invoice was successfully updated.' }\n        format.json { render :show, status: :ok, location: @invoice }\n      else\n        format.html { render :edit }\n        format.json { render json: @invoice.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /invoices/1\n  # DELETE /invoices/1.json\n  def destroy\n    @invoice.destroy\n    respond_to do |format|\n      format.html { redirect_to invoices_url, notice: 'Invoice was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_invoice\n      @invoice = Invoice.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def invoice_params\n      params.require(:invoice).permit(:number, :currency, :date, :duedate, :btwtotal,\n                                      :subtotal, :total, :footer, customers_attributes: [:id, :company_name, :address_line_1, :zip_code, :_destroy],\n                                      companies_attributes: [:id, :btw_number, :iban_number, :kvk_number, :company_name, :_destroy],\n                                      products_attributes: [:id, :quantity, :description, :unitprice, :btw, :total])\n    end\nend\n</code></pre>\n\n<p><strong>Invoice.rb - (model)</strong></p>\n\n<pre><code>class Invoice &lt; ActiveRecord::Base\n\n  has_one :company\n  has_one :customer\n  has_many :products\n\n  accepts_nested_attributes_for :customer, reject_if: :all_blank, allow_destroy: true\n  accepts_nested_attributes_for :products, reject_if: :all_blank, allow_destroy: true\n  validates :number, :currency, :date, :duedate, :btwtotal, :subtotal, :total, presence: true\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1599, "user_id": 617090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66NEM.jpg?s=128&g=1", "display_name": "kcdragon", "link": "https://stackoverflow.com/users/617090/kcdragon"}, "edited": false, "score": 0, "creation_date": 1472064453, "post_id": 39130295, "comment_id": 65607196, "body": "Can you add the queries that are currently being used? That will give us a baseline for reducing the number of queries."}, {"owner": {"reputation": 1599, "user_id": 617090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66NEM.jpg?s=128&g=1", "display_name": "kcdragon", "link": "https://stackoverflow.com/users/617090/kcdragon"}, "edited": false, "score": 0, "creation_date": 1472064914, "post_id": 39130295, "comment_id": 65607464, "body": "It would be better to add to the question for future users who come along. It might get deleted from imgur. It is also impossible to copy and paste if we need to."}, {"owner": {"reputation": 63, "user_id": 3579614, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/64bc7dde9b9ff83bcbbe1ad4ba0be435?s=128&d=identicon&r=PG&f=1", "display_name": "user3579614", "link": "https://stackoverflow.com/users/3579614/user3579614"}, "reply_to_user": {"reputation": 1599, "user_id": 617090, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/66NEM.jpg?s=128&g=1", "display_name": "kcdragon", "link": "https://stackoverflow.com/users/617090/kcdragon"}, "edited": false, "score": 0, "creation_date": 1472065249, "post_id": 39130295, "comment_id": 65607646, "body": "Thank you for the advice, I&#39;ve updated question."}, {"owner": {"reputation": 1266, "user_id": 2977636, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/9f51b0e43d761ea1c8d8d0f498783462?s=128&d=identicon&r=PG&f=1", "display_name": "user2977636", "link": "https://stackoverflow.com/users/2977636/user2977636"}, "edited": false, "score": 0, "creation_date": 1472066505, "post_id": 39130295, "comment_id": 65608242, "body": "Are you intending to display any data on the player? I noticed that you are first fetching the player and then getting the players stats. If all you need are the player&#39;s stats, you could just iterate over those."}, {"owner": {"reputation": 63, "user_id": 3579614, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/64bc7dde9b9ff83bcbbe1ad4ba0be435?s=128&d=identicon&r=PG&f=1", "display_name": "user3579614", "link": "https://stackoverflow.com/users/3579614/user3579614"}, "edited": false, "score": 0, "creation_date": 1472067093, "post_id": 39130295, "comment_id": 65608580, "body": "I do plan to include data on the player and stats. I would iterate other the player stats like I am currently doing but that way, every player would have a new query causing a n+1 problems. I think loading the season id and player id in the initial controller query would fix that? But not sure how to do that."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 3579614, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/64bc7dde9b9ff83bcbbe1ad4ba0be435?s=128&d=identicon&r=PG&f=1", "display_name": "user3579614", "link": "https://stackoverflow.com/users/3579614/user3579614"}, "edited": false, "score": 1, "creation_date": 1472087516, "post_id": 39132096, "comment_id": 65615623, "body": "I&#39;ve got it working temporally with; \t\t@players = @season.players.includes(:stats).where(stats: {season: @season})"}, {"owner": {"reputation": 4433, "user_id": 3390279, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/679111419/picture?type=large", "display_name": "karns", "link": "https://stackoverflow.com/users/3390279/karns"}, "edited": false, "score": 0, "creation_date": 1602686275, "post_id": 39132096, "comment_id": 113799790, "body": "DAn, would be nice to actually post a solution relating to the OP&#39;s question."}], "tags": [], "owner": {"reputation": 1161, "user_id": 2056117, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/93f3bba48b2683a41e9a2625934e6148?s=128&d=identicon&r=PG", "display_name": "Dan", "link": "https://stackoverflow.com/users/2056117/dan"}, "is_accepted": false, "score": 0, "last_activity_date": 1472068833, "creation_date": 1472068833, "answer_id": 39132096, "question_id": 39130295, "link": "https://stackoverflow.com/questions/39130295/includes-association/39132096#39132096", "title": "Includes association", "body": "<p>Have you tried <code>preload</code> or <code>eager_load</code> instead of <code>includes</code>?</p>\n\n<p>Lots of good info about various joins and such can be found here: <a href=\"http://blog.bigbinary.com/2013/07/01/preload-vs-eager-load-vs-joins-vs-includes.html\" rel=\"nofollow\">http://blog.bigbinary.com/2013/07/01/preload-vs-eager-load-vs-joins-vs-includes.html</a></p>\n"}], "owner": {"reputation": 63, "user_id": 3579614, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/64bc7dde9b9ff83bcbbe1ad4ba0be435?s=128&d=identicon&r=PG&f=1", "display_name": "user3579614", "link": "https://stackoverflow.com/users/3579614/user3579614"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2026, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1472068833, "creation_date": 1472062311, "last_edit_date": 1472065220, "question_id": 39130295, "link": "https://stackoverflow.com/questions/39130295/includes-association", "title": "Includes association", "body": "<p>How can I load this from fewer queries? </p>\n\n<p>Current code;\nController;</p>\n\n<pre><code>@players = @season.players.includes(:stats)\n</code></pre>\n\n<p>Views; </p>\n\n<pre><code>&lt;% @players.each do |player| %&gt;\n    &lt;%= player.stats.where(season: @season).each do |stat| %&gt;\n    &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Queries;</p>\n\n<pre><code> Season Load (0.1ms)  SELECT  \"seasons\".* FROM \"seasons\" WHERE \"seasons\".\"id\" = ? LIMIT 1  [[\"id\", 1]]\n  Player Load (0.2ms)  SELECT \"players\".* FROM \"players\" INNER JOIN \"player_seasons\" ON \"players\".\"id\" = \"player_seasons\".\"player_id\" WHERE \"player_seasons\".\"season_id\" = ?  [[\"season_id\", 1]]\n  Stat Load (0.3ms)  SELECT \"stats\".* FROM \"stats\" WHERE \"stats\".\"player_id\" IN (1, 2)\n  Stat Load (0.1ms)  SELECT \"stats\".* FROM \"stats\" WHERE \"stats\".\"player_id\" = ? AND \"stats\".\"season_id\" = 1  [[\"player_id\", 1]]\n  Stat Load (0.1ms)  SELECT \"stats\".* FROM \"stats\" WHERE \"stats\".\"player_id\" = ? AND \"stats\".\"season_id\" = 1  [[\"player_id\", 2]]\n  Rendered seasons/show.html.erb within layouts/application (5.4ms)\n</code></pre>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1472060768, "post_id": 39129751, "comment_id": 65605135, "body": "the colon is a shorthand for when keys are symbols. Will not have any effect from Rails 4 =&gt; 5 - this is a ruby language thing"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1472060943, "post_id": 39129751, "comment_id": 65605237, "body": "Technically the first is identical to <code>post &quot;examples&#47;&quot; :to =&gt; &quot;examples#index&quot;</code> The <code>post</code> method accepts a number of definitions, including a simple hash."}], "answers": [{"tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": true, "score": 10, "last_activity_date": 1472061346, "last_edit_date": 1472061346, "creation_date": 1472060730, "answer_id": 39129875, "question_id": 39129751, "link": "https://stackoverflow.com/questions/39129751/what-is-the-difference-between-to-and-in-rails/39129875#39129875", "title": "What is the difference between :to and =&gt; in rails", "body": "<p>In context of Rails routes:</p>\n\n<ul>\n<li>Is there a difference between these two statements?</li>\n</ul>\n\n<p>There is no difference.</p>\n\n<ul>\n<li>If so why is one better than the other?</li>\n</ul>\n\n<p>No, it's the same.</p>\n\n<ul>\n<li>Why is the rails community switching to the \":\" notation (or are\nthey)?</li>\n</ul>\n\n<p>Just a more readable, <code>'from' =&gt; 'to'</code> and <code>'from', to: 'to'</code></p>\n\n<ul>\n<li>Moving forward with rails 4 and soon 5, are both formats still\nacceptable?</li>\n</ul>\n\n<p>Yes.</p>\n\n<p>The <code>=&gt;</code> notation it's a hash ruby feature, and related to the <code>:symbol</code>. \nYou can write symbols by two ways <code>:key =&gt; value</code> and <code>key: value</code>.</p>\n"}], "owner": {"reputation": 843, "user_id": 742197, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/GJsd1.jpg?s=128&g=1", "display_name": "alex_milhouse", "link": "https://stackoverflow.com/users/742197/alex-milhouse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2636, "favorite_count": 3, "closed_date": 1472061136, "accepted_answer_id": 39129875, "answer_count": 1, "score": 4, "last_activity_date": 1472061346, "creation_date": 1472060315, "question_id": 39129751, "link": "https://stackoverflow.com/questions/39129751/what-is-the-difference-between-to-and-in-rails", "closed_reason": "Duplicate", "title": "What is the difference between :to and =&gt; in rails", "body": "<p>I have been noticing that the rails community has been moving towards using the \":\" notation for more things. And now recently I received a comment in a code review that this: </p>\n\n<pre><code>post 'examples/', to: 'examples#index'\n</code></pre>\n\n<p>was better than this:</p>\n\n<pre><code>post \"examples/\" =&gt; \"examples#index\"\n</code></pre>\n\n<p>My questions are:</p>\n\n<ol>\n<li>Is there a difference between these two statements? </li>\n<li>If so why is one better than the other? </li>\n<li>Why is the rails community switching to the \":\" notation (or are they)? </li>\n<li>Moving forward with rails 4 and soon 5, are both formats still acceptable? </li>\n</ol>\n"}, {"tags": ["ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 2678, "user_id": 5699206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b779af6a871be4c7cd891113f722f62?s=128&d=identicon&r=PG&f=1", "display_name": "Joseph Young", "link": "https://stackoverflow.com/users/5699206/joseph-young"}, "edited": false, "score": 0, "creation_date": 1472058973, "post_id": 39129354, "comment_id": 65604174, "body": "Literally almost the exact same name"}, {"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 1, "creation_date": 1472059013, "post_id": 39129354, "comment_id": 65604196, "body": "Google is your best friend, my friend. ;)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1472059466, "post_id": 39129354, "comment_id": 65604435, "body": "Ruby: Programming language. Ruby on Rails: A software development kit <i>for</i> Ruby. You should get a <a href=\"https://pragprog.com/book/rails4/agile-web-development-with-rails-4\" rel=\"nofollow noreferrer\">good reference book</a> to understand how they two relate."}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1472059513, "post_id": 39129354, "comment_id": 65604456, "body": "I am mystified why this attracted votes for being &quot;too broad.&quot;  It is answered succinctly in the exemplar that the question is now linked to as a duplicate."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 1, "creation_date": 1472060836, "post_id": 39129354, "comment_id": 65605175, "body": "@WayneConrad because of this: <code>How do you develop an application - what does an application structure look like utilising Ruby on Rails.</code>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1472061231, "post_id": 39129354, "comment_id": 65605397, "body": "Also, &quot;where would you use Ruby?&quot; is extremely broad. The questions asked could have been answered by searching and reading."}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1472066628, "post_id": 39129354, "comment_id": 65608318, "body": "@theTinMan That was poor reading comprehension on my part.  I&#39;m now only mystified that I missed that when I &quot;read&quot; the question."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1472071965, "post_id": 39129354, "comment_id": 65610972, "body": "Eh, I do it all the time. I blame age, stress and being tired."}, {"owner": {"reputation": 1, "user_id": 6426665, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154207582538688/picture?type=large", "display_name": "Roxanne Davids", "link": "https://stackoverflow.com/users/6426665/roxanne-davids"}, "edited": false, "score": 0, "creation_date": 1472140731, "post_id": 39129354, "comment_id": 65643091, "body": "Thank you for the answers thus far, The title is from a quora questions asked here,  I did not know how to succintly ask for guidance on how to develop a learning structure around how to learn the framework rails and to understand what Ruby does.  <a href=\"https://www.quora.com/What-is-the-difference-between-Ruby-and-Ruby-on-Rails-web-framework\" rel=\"nofollow noreferrer\">quora.com/&hellip;</a>"}], "owner": {"reputation": 1, "user_id": 6426665, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154207582538688/picture?type=large", "display_name": "Roxanne Davids", "link": "https://stackoverflow.com/users/6426665/roxanne-davids"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "closed_date": 1472059182, "answer_count": 0, "score": 0, "last_activity_date": 1472058869, "creation_date": 1472058869, "question_id": 39129354, "link": "https://stackoverflow.com/questions/39129354/what-is-the-difference-between-ruby-and-ruby-on-rails-web-framework", "closed_reason": "Duplicate", "title": "What is the difference between Ruby and Ruby on Rails (web framework)?", "body": "<p>I would like to know more about the Ruby and Ruby on Rails.</p>\n\n<p>How do you develop an application - what does an application structure look like utilising Ruby on Rails.</p>\n\n<p>Where would you use Ruby?</p>\n"}, {"tags": ["html", "css", "ruby", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1472073043, "post_id": 39129327, "comment_id": 65611469, "body": "Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Your HTML is invalid; Please make sure that closing tags are in the right places. Without those Nokogiri will put them where it thinks they should be, which can vary wildly from what you think. What is your expected output?"}], "answers": [{"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1493057945, "last_edit_date": 1495542355, "creation_date": 1472074198, "answer_id": 39133329, "question_id": 39129327, "link": "https://stackoverflow.com/questions/39129327/using-nokogiris-css-method-to-get-all-elements-within-an-alt-tag/39133329#39133329", "title": "Using Nokogiri&#39;s CSS method to get all elements within an alt tag", "body": "<p>Your desired output isn't clear and the HTML is broken. </p>\n\n<p>Start with this:</p>\n\n<pre><code>require 'nokogiri'\n\ndoc = Nokogiri::HTML('&lt;html&gt;&lt;body&gt;&lt;div class=\"consultant\"&gt;&lt;img alt=\"foo\"/&gt;&lt;img alt=\"bar\" /&gt;&lt;/div&gt;&lt;/body&gt;&lt;/html&gt;')\ndoc.search('div.consultant img').map{ |img| img['alt'] } # =&gt; [\"foo\", \"bar\"]\n</code></pre>\n\n<p>Using <code>text</code> on the output of <code>css</code> isn't a good idea. <code>css</code> returns a NodeSet. <code>text</code> against a NodeSet results in all text being concatenated, which often results in mangled text content forcing you to figure out how to pull it apart again, which, in the end, is horrible code:</p>\n\n<pre><code>doc = Nokogiri::HTML('&lt;html&gt;&lt;body&gt;&lt;p&gt;foo&lt;/p&gt;&lt;p&gt;bar&lt;/p&gt;&lt;/body&gt;&lt;/html&gt;')\ndoc.search('p').text # =&gt; \"foobar\"\n</code></pre>\n\n<p>This behavior is documented in <a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/NodeSet:text\" rel=\"nofollow noreferrer\">NodeSet#text</a>:</p>\n\n<blockquote>\n  <p>Get the inner text of all contained Node objects</p>\n</blockquote>\n\n<p>Instead, use <a href=\"http://www.rubydoc.info/github/sparklemotion/nokogiri/Nokogiri/XML/Node:content\" rel=\"nofollow noreferrer\"><code>text</code></a> (AKA <code>inner_text</code> or <code>content</code>) against the individual nodes, resulting in the exact text for that node, that you can then join as you want:</p>\n\n<blockquote>\n  <p>Returns the content for this Node</p>\n</blockquote>\n\n<pre><code>doc.search('p').map(&amp;:text) # =&gt; [\"foo\", \"bar\"]\n</code></pre>\n\n<p>See \"<a href=\"https://stackoverflow.com/questions/43594656/how-to-avoid-joining-all-text-from-nodes-when-scraping\">How to avoid joining all text from Nodes when scraping</a>\" also.</p>\n"}], "owner": {"reputation": 4717, "user_id": 1913389, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/QKwb2.png?s=128&g=1", "display_name": "theGreenCabbage", "link": "https://stackoverflow.com/users/1913389/thegreencabbage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 298, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1493057945, "creation_date": 1472058770, "last_edit_date": 1472079334, "question_id": 39129327, "link": "https://stackoverflow.com/questions/39129327/using-nokogiris-css-method-to-get-all-elements-within-an-alt-tag", "title": "Using Nokogiri&#39;s CSS method to get all elements within an alt tag", "body": "<p>I am trying to use Nokogiri's CSS method to get some names from my HTML.</p>\n\n<p>This is an example of the HTML:</p>\n\n<pre><code>&lt;section class=\"container partner-customer padding-bottom--60\"&gt;\n    &lt;div&gt;\n        &lt;div&gt;\n            &lt;a id=\"technologies\"&gt;&lt;/a&gt;\n            &lt;h4 class=\"center-align\"&gt;The Team&lt;/h4&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"consultant list-across wrap\"&gt;\n        &lt;div class=\"engineering\"&gt;\n            &lt;img class=\"\" src=\"https://v0001.jpg\" alt=\"Person 1\"/&gt;\n            &lt;p&gt;Person 1&lt;br&gt;Founder, Chairman &amp;amp; CTO&lt;/p&gt;\n        &lt;/div&gt;\n        &lt;div class=\"engineering\"&gt;\n            &lt;img class=\"\" src=\"https://v0002.png\" alt=\"Person 2\"/&gt;&lt;/a&gt;\n            &lt;p&gt;Person 2&lt;br&gt;Founder, VP of Engineering&lt;/p&gt;\n        &lt;/div&gt;\n        &lt;div class=\"product\"&gt;\n            &lt;img class=\"\" src=\"https://v0003.jpg\" alt=\"Person 3\"/&gt;&lt;/a&gt;\n            &lt;p&gt;Person 3&lt;br&gt;Product&lt;/p&gt;\n        &lt;/div&gt;\n        &lt;div class=\"Human Resources &amp;amp; Admin\"&gt;\n            &lt;img class=\"\" src=\"https://v0004.jpg\" alt=\"Person 4\"/&gt;&lt;/a&gt;\n            &lt;p&gt;Person 4&lt;br&gt;People &amp;amp; Places&lt;/p&gt;\n        &lt;/div&gt;\n        &lt;div class=\"alliances\"&gt;\n            &lt;img class=\"\" src=\"https://v0005.jpg\" alt=\"Person 5\"/&gt;&lt;/a&gt;\n            &lt;p&gt;Person 5&lt;br&gt;VP of Alliances&lt;/p&gt;\n        &lt;/div&gt;\n</code></pre>\n\n<p>What I have so far in my <code>people.rake</code> file is the following:</p>\n\n<pre><code>  staff_site = Nokogiri::HTML(open(\"https://www.website.com/company/team-all\"))\n  all_hands = staff_site.css(\"div.consultant\").map(&amp;:text).map(&amp;:squish)\n</code></pre>\n\n<p>I am having a little trouble getting all elements within the <code>alt=\"\"</code> tag (the name of the person), as it is nested under a few divs.</p>\n\n<p>Currently, using <code>div.consultant</code>, it gets all the names + the roles, i.e. <code>Person 1Founder, Chairman; CTO</code>, instead of just the person's name in <code>alt=</code>.</p>\n\n<p>How could I simply get the element within <code>alt</code>?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 4275, "user_id": 5739288, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mRf6m.jpg?s=128&g=1", "display_name": "Iggy", "link": "https://stackoverflow.com/users/5739288/iggy"}, "edited": false, "score": 0, "creation_date": 1472061568, "post_id": 39129297, "comment_id": 65605587, "body": "Woops! Typo there. Thanks for noticing! You are correct. It&#39;s supposed to be [&quot;hash&quot;]. I will edit it. Thanks @sln!"}], "answers": [{"tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": false, "score": 1, "last_activity_date": 1472061588, "last_edit_date": 1472061588, "creation_date": 1472058837, "answer_id": 39129344, "question_id": 39129297, "link": "https://stackoverflow.com/questions/39129297/remove-a-string-pattern-and-symbols-from-string/39129344#39129344", "title": "Remove a string pattern and symbols from string", "body": "<p>You can use this regex to solve your problem. I tested and it works for all of your test cases. </p>\n\n<pre><code>/^\\s*#*(not)*/\n</code></pre>\n\n<ul>\n<li><code>^</code> means match start of string</li>\n<li><code>\\s*</code> matches any space at the start</li>\n<li><code>#*</code> matches 0 or more #</li>\n<li><code>(not)*</code> matches the phrase \"not\" zero or more times. </li>\n</ul>\n\n<p><em>Note: this regex won't work for cases where \"not\" comes before \"#\", such as <code>not#hash</code> would return <code>#hash</code></em></p>\n"}, {"comments": [{"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 1, "creation_date": 1472059523, "post_id": 39129380, "comment_id": 65604461, "body": "you don&#39;t need to escape <code>#</code> in a normal regex expression. The time you need to do that is when you use the <code>\\x</code> option, which ignores all white spaces and allow use of comments with <code>#</code>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1472061843, "post_id": 39129380, "comment_id": 65605728, "body": "The answer is incorrect. As @davidhu2000 says, only when the <code>x</code> flag is used. <code>&quot;#foo&quot;.sub(&#47;#&#47;, &quot;&quot;) # =&gt; &quot;foo&quot;</code> works without escaping."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1472062491, "post_id": 39129380, "comment_id": 65606086, "body": "The answer is <i>NOT</i> incorrect. The pound sign can be escaped to mean a literal in either expanded //x or not // regexes."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1472063612, "post_id": 39129380, "comment_id": 65606720, "body": "But you did say, &quot;...you have to escape it...&quot;. Is that not incorrect?"}], "tags": [], "owner": {"reputation": 636, "user_id": 1253311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21acab710c6e17104c2af7bf8390a9d5?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1253311/matt"}, "is_accepted": false, "score": 1, "last_activity_date": 1472065690, "last_edit_date": 1472065690, "creation_date": 1472058944, "answer_id": 39129380, "question_id": 39129297, "link": "https://stackoverflow.com/questions/39129297/remove-a-string-pattern-and-symbols-from-string/39129380#39129380", "title": "Remove a string pattern and symbols from string", "body": "<p>Ruby regular expressions <a href=\"https://ruby-doc.org/core-1.9.3/Regexp.html#class-Regexp-label-Free-Spacing+Mode+and+Comments\" rel=\"nofollow\">allow comments</a>, so to match the octothorpe (<code>#</code>) you can escape it:</p>\n\n<pre><code>\"#foo\".sub(/\\#/, \"\") #=&gt; \"foo\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1472062056, "post_id": 39129594, "comment_id": 65605845, "body": "seems &quot;one,two&quot; should be [&quot;one&quot;,&quot;two&quot;] base on the expectations."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1472062475, "post_id": 39129594, "comment_id": 65606075, "body": "Thanks, @engineersmnky, I missed that."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 3, "last_activity_date": 1472148898, "last_edit_date": 1472148898, "creation_date": 1472059721, "answer_id": 39129594, "question_id": 39129297, "link": "https://stackoverflow.com/questions/39129297/remove-a-string-pattern-and-symbols-from-string/39129594#39129594", "title": "Remove a string pattern and symbols from string", "body": "<pre><code>arr = [\"not12345\", \"   notabc\", \"notone, nottwo\", \"notCAPSLOCK\",\n       \"##doublehash:\", \"h#a#s#h\", \"#notswaggerest\"].\n\narr.flat_map { |str| str.downcase.split(',').map { |s| s.gsub(/#|not|\\s+/,\"\") } }\n  #=&gt; [\"12345\", \"abc\", \"one\", \"two\", \"capslock\", \"doublehash:\", \"hash\", \"swaggerest\"]\n</code></pre>\n\n<p>When the block variable <code>str</code> is set to <code>\"notone, nottwo\"</code>,</p>\n\n<pre><code>s = str.downcase\n  #=&gt; \"notone, nottwo\" \na = s.split(',')\n  #=&gt; [\"notone\", \" nottwo\"] \nb = a.map { |s| s.gsub(/#|not|\\s+/,\"\") }\n  #=&gt; [\"one\", \"two\"] \n</code></pre>\n\n<p>Because I used <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-flat_map\" rel=\"nofollow\">Enumerable#flat_map</a>, <code>\"one\"</code> and <code>\"two\"</code> are added to the array being returned. When <code>str #=&gt; \"notCAPSLOCK\"</code>,</p>\n\n<pre><code>s = str.downcase\n  #=&gt; \"notcapslock\" \na = s.split(',')\n  #=&gt; [\"notcapslock\"] \nb = a.map { |s| s.gsub(/#|not|\\s+/,\"\") }\n  #=&gt; [\"capslock\"] \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11718, "user_id": 1827631, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/I24JN.png?s=128&g=1", "display_name": "hirolau", "link": "https://stackoverflow.com/users/1827631/hirolau"}, "is_accepted": false, "score": 1, "last_activity_date": 1472063802, "creation_date": 1472063802, "answer_id": 39130717, "question_id": 39129297, "link": "https://stackoverflow.com/questions/39129297/remove-a-string-pattern-and-symbols-from-string/39130717#39130717", "title": "Remove a string pattern and symbols from string", "body": "<p>Fun problem because it can use the most common string functions in Ruby:</p>\n\n<pre><code>result = values.map do |string|\n string.strip      # Remove spaces in front and back.\n   .tr('#','')     # Transform single characters. In this case remove #\n   .gsub('not','') # Substitute patterns\n   .split(', ')    # Split into arrays.\nend\n\np result #=&gt;[[\"12345\"], [\"abc\"], [\"one\", \"two\"], [\"CAPSLOCK\"], [\"doublehash\"], [\"hash\"], [\"swaggerest\"]]\n</code></pre>\n\n<p>I prefer this way rather than a regexp as it is easy to understand the logic of each line.</p>\n"}, {"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 2, "last_activity_date": 1472066793, "creation_date": 1472066793, "answer_id": 39131542, "question_id": 39129297, "link": "https://stackoverflow.com/questions/39129297/remove-a-string-pattern-and-symbols-from-string/39131542#39131542", "title": "Remove a string pattern and symbols from string", "body": "<p>Here is one more solution that uses a different technique of capturing what you want rather than dropping what you don't want: (for the most part) </p>\n\n<pre><code>a = [\"not12345\", \"   notabc\", \"notone, nottwo\", \n \"notCAPSLOCK\", \"##doublehash:\",\"h#a#s#h\", \"#notswaggerest\"]\na.map do |s|\n     s.downcase.delete(\"#\").scan(/(?&lt;=not)\\w+|^[^not]\\w+/)\nend \n#=&gt; [[\"12345\"], [\"abc\"], [\"one\", \"two\"], [\"capslock\"], [\"doublehash\"], [\"hash\"], [\"swaggerest\"]]\n</code></pre>\n\n<p>Had to delete the <code>#</code> because of <code>h#a#s#h</code> otherwise delete could have been avoided with a regex like <code>/(?&lt;=not|^#[^not])\\w+/</code> </p>\n"}], "owner": {"reputation": 4275, "user_id": 5739288, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mRf6m.jpg?s=128&g=1", "display_name": "Iggy", "link": "https://stackoverflow.com/users/5739288/iggy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 729, "favorite_count": 1, "accepted_answer_id": 39129594, "answer_count": 5, "score": 2, "last_activity_date": 1472148898, "creation_date": 1472058620, "last_edit_date": 1472061596, "question_id": 39129297, "link": "https://stackoverflow.com/questions/39129297/remove-a-string-pattern-and-symbols-from-string", "title": "Remove a string pattern and symbols from string", "body": "<p>I need to clean up a string from the phrase <code>\"not\"</code> and hashtags(<code>#</code>). <em>(I also have to get rid of spaces and capslock and return them in arrays, but I got the latter three taken care of.)</em></p>\n\n<p>Expectation: </p>\n\n<pre><code>\"not12345\"       #=&gt; [\"12345\"]\n\"   notabc  \"    #=&gt; [\"abc\"]\n\"notone, nottwo\" #=&gt; [\"one\", \"two\"]\n\"notCAPSLOCK\"    #=&gt; [\"capslock\"]\n\"##doublehash\"   #=&gt; [\"doublehash\"]\n\"h#a#s#h\"        #=&gt; [\"hash\"]\n\"#notswaggerest\" #=&gt; [\"swaggerest\"]\n</code></pre>\n\n<p>This is the code I have </p>\n\n<pre><code>def some_method(string)\n    string.split(\", \").map{|n| n.sub(/(not)/,\"\").downcase.strip}\nend\n</code></pre>\n\n<p>All of the above test does what I need to do except for the hash ones. I don't know how to get rid of the hashes; I have tried modifying the regex part: <code>n.sub(/(#not)/)</code>, <code>n.sub(/#(not)/)</code>, <code>n.sub(/[#]*(not)/)</code> to no avail. How can I make Regex to remove <code>#</code>?</p>\n"}, {"tags": ["ruby", "oop"], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 6, "last_activity_date": 1501729149, "last_edit_date": 1501729149, "creation_date": 1472058735, "answer_id": 39129321, "question_id": 39129101, "link": "https://stackoverflow.com/questions/39129101/how-can-i-determine-if-an-object-is-a-poro-or-not/39129321#39129321", "title": "How can I determine if an object is a PORO or not?", "body": "<p>There's really no such thing as a \"plain old Ruby object\" as everything, literally everything is an object anyway, so there's no concept of \"plain\". How would you define non-plain?</p>\n\n<p>This is unlike JavaScript where there are simple object primitives and then others that are more formally declared using things like the ES6 <code>class</code> construct. A JavaScript object being passed around as a container is a common pattern. The equivalent in Ruby would be passing a complex data structure like a Hash with potentially nested elements.</p>\n\n<p>If you want to know the class of an object:</p>\n\n<pre><code>@a_form.class\n</code></pre>\n\n<p>If you want to know what this inherits from:</p>\n\n<pre><code>@a_form.superclass # Immediate parent\n@a_form.class.ancestors # All base classes and mixin modules\n</code></pre>\n\n<p>There are <em>anonymous classes</em> in Ruby, those made with <code>Class.new</code>, and objects created with those are about as plain as you can get, but they're still first-class objects.</p>\n"}, {"tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": false, "score": 10, "last_activity_date": 1594283614, "last_edit_date": 1594283614, "creation_date": 1472059243, "answer_id": 39129461, "question_id": 39129101, "link": "https://stackoverflow.com/questions/39129101/how-can-i-determine-if-an-object-is-a-poro-or-not/39129461#39129461", "title": "How can I determine if an object is a PORO or not?", "body": "<p>The distinction between a PORO (which stands for Plain Old Ruby Object) and a not-PORO is not a technical one. All objects are technically Ruby objects.</p>\n<p>Instead, the term PORO is sometimes used when talking about large frameworks like Rails which tend to use &quot;big&quot;, &quot;complex&quot; objects like ActiveRecord models for much of its logic. These large objects tend to contain a large amount of logic and (often implicitly) defined behavior and conventions.</p>\n<p>When talking about POROs, it's generally done to differentiate from these large objects and to encourage instead to use smaller, specific classes/objects to build your business logic which may look more simple. These objects often don't need to be backed by stable storage as ActiveRecord models generally are but just contain in-flight data and define business logic (what you generally call the behavior of your application) without using much tooling from a complex framework.</p>\n<p>But again, this is not a strict technical distinction or even one with clear boundaries. It is a social distinction one which generally aims to encourage thinking outside of the single framework.</p>\n<p>As for the term itself, it is relatively new and (you probably guessed it by now) pretty devoid of any actual hard meaning. It got popular recently with people complaining about the structure some large Rails apps tend to have nowadays (such as lean controller, fat model where you are putting the whole business logic into ActiveRecord models. The term thus mostly just serves as a distinction from these fat models.</p>\n"}], "owner": {"reputation": 6929, "user_id": 4909076, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/73808a90d5413f6f9dfd6e4090c02bda?s=128&d=identicon&r=PG&f=1", "display_name": "tim_xyz", "link": "https://stackoverflow.com/users/4909076/tim-xyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5502, "favorite_count": 2, "accepted_answer_id": 39129321, "answer_count": 2, "score": 5, "last_activity_date": 1594283614, "creation_date": 1472057911, "last_edit_date": 1472059398, "question_id": 39129101, "link": "https://stackoverflow.com/questions/39129101/how-can-i-determine-if-an-object-is-a-poro-or-not", "title": "How can I determine if an object is a PORO or not?", "body": "<p>When I look at an object (in the terminal or rails console), how can I determine if it is PORO or not?</p>\n\n<p>I understand it means an object is just Ruby (does not rely on Rails). But I don't understand in a practical sense.</p>\n\n<p>For example, when I print <code>puts @a_form.inspect</code> to the console, is it PORO?</p>\n\n<pre><code>#&lt;AForm:0x007fdbf9b33468 @a=#&lt;A id: 1,...\n</code></pre>\n\n<p>I've done lots of googling but haven't found a simpler answer with examples comparing to non-PORO objects.</p>\n\n<p>Can anyone give a practical comparison?</p>\n\n<p>Apologies in advance if this is a super newbie question.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 219, "user_id": 4325180, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EdrS-4y3wKg/AAAAAAAAAAI/AAAAAAAABvM/b0A5f7hhe_s/photo.jpg?sz=128", "display_name": "PoloniculMov", "link": "https://stackoverflow.com/users/4325180/poloniculmov"}, "edited": false, "score": 1, "creation_date": 1472056976, "post_id": 39128749, "comment_id": 65603093, "body": "What is the error, on what line does it happen?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user3246933"}, "reply_to_user": {"reputation": 219, "user_id": 4325180, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EdrS-4y3wKg/AAAAAAAAAAI/AAAAAAAABvM/b0A5f7hhe_s/photo.jpg?sz=128", "display_name": "PoloniculMov", "link": "https://stackoverflow.com/users/4325180/poloniculmov"}, "edited": false, "score": 0, "creation_date": 1472058346, "post_id": 39128749, "comment_id": 65603838, "body": "@PoloniculMov job = Job.opportunity.new do |j| is where the error occurs."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3246933"}, "edited": false, "score": 0, "creation_date": 1472059111, "post_id": 39129229, "comment_id": 65604249, "body": "Thank you, I will give this a shot. This is all code I did not write, so I am having to clean it all up and make it work properly. Thanks again, I appreciate it."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3246933"}, "edited": false, "score": 0, "creation_date": 1472069782, "post_id": 39129229, "comment_id": 65609928, "body": "I have come to realize the associations in the project need some major attention. Thanks again."}], "tags": [], "owner": {"reputation": 1318, "user_id": 5586783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/060731280703cb6c69bff0df57eb8898?s=128&d=identicon&r=PG", "display_name": "Andy Gauge", "link": "https://stackoverflow.com/users/5586783/andy-gauge"}, "is_accepted": false, "score": 1, "last_activity_date": 1472139304, "last_edit_date": 1472139304, "creation_date": 1472058380, "answer_id": 39129229, "question_id": 39128749, "link": "https://stackoverflow.com/questions/39128749/nomethoderror-in-jobscontrollernew/39129229#39129229", "title": "NoMethodError in JobsController#new", "body": "<p>Your associations need some attention.  In your Job model, you have both opportunity and opportunities.  That is not how this should work.  You can have a primary_opportunity that is in the opportunities collection, but with a property set.</p>\n\n<p>First of all, this is wrong:</p>\n\n<pre><code>  def Job\n    has_many :opportunities\n  end\n</code></pre>\n\n<p><s>There should not be a method named Job (capital J), words that start with a capital letter are classes and constants, not methods.</s>\nClass Methods (def Job) do not have the instance scope.  This is not a place for associations.  Put methods inside your <code>def Job</code> to create methods accessible before instantiation.  Associations should reside inside the instance methods definition (outside <code>def Job</code>)  Remove the def Job and end.  This will give you the model:</p>\n\n<pre><code>class Job &lt; ActiveRecord::Base\n  mount_uploader :file1, AttachmentUploader\n  belongs_to :cost_proposal\n  belongs_to :opportunity\n  has_many :opportunities \nend\n</code></pre>\n\n<p>From there, you need to determine if you want to have a <code>belongs_to :opportunity</code> or a <code>has_many :opportunities</code> relationship.  If each Job has many of them, remove the <code>belongs_to</code>.</p>\n\n<p>Second, your <code>@job = Job.opportunity.new do |j|</code> line is calling a method on a constant rather than an instance.  Change this line to:</p>\n\n<pre><code>@job = Job.new\n@job.opportunties.new do |j|\n</code></pre>\n\n<p>The above code is assuming you use the <code>has_many</code> variant of your duplicated associations.</p>\n\n<p>Hope that helps.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user3246933"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472139304, "creation_date": 1472056638, "question_id": 39128749, "link": "https://stackoverflow.com/questions/39128749/nomethoderror-in-jobscontrollernew", "title": "NoMethodError in JobsController#new", "body": "<p>Getting a no method error when trying to create a new job in my CRM project. I took this project over when I started at the company a month ago, have reviewed the codebase a few times and am not seeing the issue or where things are not adding up. I feel as if I am overlooking it due to being frustrated so I am asking for help from some seasoned Rails developers. Thanks in advance!</p>\n\n<p><strong>Relevant section of Jobs Controller where error occurs:</strong>  </p>\n\n<pre><code>  # GET /jobs/new\n  def new\n    @job = Job.opportunity.new do |j|\n      if params[:opportunity_id].present?\n        j.opportunity_id = params[:opportunity_id]\n      end\n</code></pre>\n\n<p><strong>Jobs/new view:</strong></p>\n\n<pre><code>&lt;% @job[:opportunity_id] = params[:opportunity_id] %&gt;\n&lt;% title \"New #{@job.opportunity.name} Job\"%&gt;\n\n&lt;%\n@job[:name] = @job.opportunity.name\n@pm = @job.opportunity.pm_id\n\n\n%&gt;\n\n&lt;br&gt;&lt;br&gt;\n&lt;%= render 'form' %&gt;\n</code></pre>\n\n<p><strong>Jobs model:</strong></p>\n\n<pre><code>class Job &lt; ActiveRecord::Base\n  mount_uploader :file1, AttachmentUploader\n  belongs_to :cost_proposal\n  belongs_to :opportunity\n\n  def Job\n    has_many :opportunities\n  end\nend\n</code></pre>\n\n<p><strong>Jobs table in schema.rb:</strong></p>\n\n<pre><code>  create_table 'jobs', force: true do |t|\n    t.integer  'cost_proposal_id'\n    t.string   'number'\n    t.string   'name'\n    t.date     'flight_date'\n    t.string   'flight_sub'\n    t.string   'camera'\n    t.string   'roll'\n    t.string   'map_type'\n    t.integer  'plan_only'\n    t.integer  'lab_only'\n    t.integer  'est_hrs_model'\n    t.date     'due_date'\n    t.integer  'edge_job_id'\n    t.integer  'custom_trans'\n    t.integer  'comp_inhouse'\n    t.date     'delivered_date'\n    t.integer  'done'\n    t.date     'control_in'\n    t.string   'control_status'\n    t.date     'at_date'\n    t.string   'control_results'\n    t.integer  'control_check'\n    t.string   'scan_staff'\n    t.date     'scan_date'\n    t.integer  'scan_check'\n    t.string   'comp_staff'\n    t.date     'comp_date'\n    t.integer  'comp_check'\n    t.string   'comp_sub'\n    t.date     'comp_sub_due_date'\n    t.integer  'comp_sub_rec'\n    t.string   'img_staff'\n    t.date     'img_date'\n    t.integer  'img_check'\n    t.string   'edit_staff'\n    t.date     'edit_date'\n    t.integer  'edit_check'\n    t.text     'notes'\n    t.string   'file1'\n    t.string   'file2'\n    t.string   'file3'\n    t.string   'file4'\n    t.string   'file5'\n    t.string   'add_files'\n    t.datetime 'created_at'\n    t.datetime 'updated_at'\n    t.integer  'flown'\n    t.integer  'cust_trans'\n    t.integer  'delivered'\n    t.string   'at_staff'\n    t.integer  'at_check'\n    t.integer  'opportunity_id'\n  end\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1472055823, "post_id": 39127601, "comment_id": 65602454, "body": "Why not try a simpler solution? e.g. <code>a.map.with_index {|_,i| a[0..i].reduce(:+) }</code> this will map into an array by reducing the current element and all preceding elements or even <code>sum = 0; a.map {|e| sum += e}</code>"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1472060293, "post_id": 39127821, "comment_id": 65604899, "body": "<code>results.last || 0</code> would do the job of that gnarly <code>if ... then</code> stuff."}, {"owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1472062806, "post_id": 39127821, "comment_id": 65606255, "body": "Good point, edited.  I started with <code>results.empty? ? 0 : ...</code> but that was still gnarly..."}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1472077770, "post_id": 39127821, "comment_id": 65613301, "body": "Nice answer, very slick!"}], "tags": [], "owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "is_accepted": false, "score": 1, "last_activity_date": 1472062779, "last_edit_date": 1472062779, "creation_date": 1472053740, "answer_id": 39127821, "question_id": 39127601, "link": "https://stackoverflow.com/questions/39127601/why-do-i-get-a-typeerror-when-using-inject-in-ruby/39127821#39127821", "title": "Why do I get a &#39;typeerror&#39; when using inject in Ruby?", "body": "<p>The return value of the <code>inject</code> block is passed as the first argument the next time the block is called, so those have to match. In your code, you're passing an array as an intital value, and then returning an array; so far, so good. But inside the code block you treat that array parameter (<code>sum</code>) as a number, which won't work. Try this:</p>\n\n<pre><code>def running_totals(myarray)\n  myarray.inject([]) do |results,n|\n    results &lt;&lt; n + (results.last || 0)\n  end\nend\n</code></pre>\n\n<p>The <code>[]</code> passed as an argument to <code>inject</code> becomes the first value of <code>results</code>; the first array element (<code>1</code> in your example) becomes the first value of <code>n</code>. Since <code>results</code> is empty, <code>results.last</code> is <code>nil</code> and the result of <code>(results.last || 0)</code> is <code>0</code>, which we add to <code>n</code> to get 1, which we push onto <code>results</code> and then return that newly-modified array value from the block.</p>\n\n<p>The second time into the block, <code>results</code> is the array we just returned from the first pass, <code>[1]</code>, and <code>n</code> is <code>2</code>.  This time <code>results.last</code> is <code>1</code> instead of <code>nil</code>, so we add <code>1</code> to <code>2</code> to get <code>3</code> and push that onto the array, returning <code>[1,3]</code>.</p>\n\n<p>The third time into the block, <code>results</code> is <code>[1,3]</code>, and <code>n</code> is <code>3</code>, so it returns <code>[1,3,6]</code>. And so on.</p>\n"}, {"tags": [], "owner": {"reputation": 11718, "user_id": 1827631, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/I24JN.png?s=128&g=1", "display_name": "hirolau", "link": "https://stackoverflow.com/users/1827631/hirolau"}, "is_accepted": false, "score": 3, "last_activity_date": 1472054233, "creation_date": 1472054233, "answer_id": 39127969, "question_id": 39127601, "link": "https://stackoverflow.com/questions/39127601/why-do-i-get-a-typeerror-when-using-inject-in-ruby/39127969#39127969", "title": "Why do I get a &#39;typeerror&#39; when using inject in Ruby?", "body": "<p>In the first iteration <code>sum</code> will be an array (as you specified an array as the default when calling <code>inject([])</code>) and you try to add a number to it. in the <code>results &lt;&lt; sum + n</code> statement</p>\n\n<p>Instead, set the initial value to <code>0</code>, then add, then add the result to the array, then make sure you let <code>sum</code> get passed into the next iteration of inject.</p>\n\n<pre><code>def running_totals(myarray)\n  results = []\n  myarray.inject(0) do |sum,n| # First iteration sum will be 0.\n    sum += n # Add value to sum.\n    results &lt;&lt; sum # Push to the result array.\n    sum # Make sure sum is passed to next iteration.\n  end\n  results\nend\n\np running_totals([1,2,3,4,5]) #=&gt; [1, 3, 6, 10, 15]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 2, "last_activity_date": 1472054305, "creation_date": 1472054305, "answer_id": 39127994, "question_id": 39127601, "link": "https://stackoverflow.com/questions/39127601/why-do-i-get-a-typeerror-when-using-inject-in-ruby/39127994#39127994", "title": "Why do I get a &#39;typeerror&#39; when using inject in Ruby?", "body": "<p>The result of <code>results &lt;&lt; sum + n</code> is an array <code>results</code> and it's this that's replacing the <code>sum</code> value and so the next iteration you're trying to add a fixnum <code>n</code> into an array <code>sum</code> ... plus it doesn't help that you're initializing the value of <code>sum</code> to be an array. </p>\n\n<p>Make sure that the last executed statement in your inject block is what you want the accumulated value to be.</p>\n\n<pre><code>def running_totals(myarray)\n  results = []\n  results &lt;&lt; myarray.inject do |sum, n|\n    results &lt;&lt; sum\n    sum + n\n  end\n  results\nend\n\np running_totals([1,2,3,4,5])\n=&gt; [1, 3, 6, 10, 15]\n</code></pre>\n\n<p>Note that I moved the result of the inject into results array as well, so that the final value is also included, otherwise you'd only have the four values and would be missing the final (15) value.</p>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1472060262, "post_id": 39128139, "comment_id": 65604884, "body": "Quoting the documentation verbatim is kind of a lazy way to answer things."}], "tags": [], "owner": {"reputation": 147, "user_id": 3072002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe8a6b19de31e3108fc6822dd59c2be7?s=128&d=identicon&r=PG&f=1", "display_name": "pabloduo", "link": "https://stackoverflow.com/users/3072002/pabloduo"}, "is_accepted": false, "score": 0, "last_activity_date": 1472054704, "creation_date": 1472054704, "answer_id": 39128139, "question_id": 39127601, "link": "https://stackoverflow.com/questions/39127601/why-do-i-get-a-typeerror-when-using-inject-in-ruby/39128139#39128139", "title": "Why do I get a &#39;typeerror&#39; when using inject in Ruby?", "body": "<p>According to ri, you have to return result of the computation from inject's block.</p>\n\n<pre><code>From: enum.c (C Method):\nOwner: Enumerable\nVisibility: public\nSignature: inject(*arg1)\nNumber of lines: 31\n\nCombines all elements of enum by applying a binary\noperation, specified by a block or a symbol that names a\nmethod or operator.\n\nIf you specify a block, then for each element in enum\nthe block is passed an accumulator value (memo) and the element.\nIf you specify a symbol instead, then each element in the collection\nwill be passed to the named method of memo.\nIn either case, the result becomes the new value for memo.\nAt the end of the iteration, the final value of memo is the\nreturn value for the method.\n\nIf you do not explicitly specify an initial value for memo,\nthen uses the first element of collection is used as the initial value\nof memo.\n\nExamples:\n\n   # Sum some numbers\n   (5..10).reduce(:+)                            #=&gt; 45\n   # Same using a block and inject\n   (5..10).inject {|sum, n| sum + n }            #=&gt; 45\n   # Multiply some numbers\n   (5..10).reduce(1, :*)                         #=&gt; 151200\n   # Same using a block\n   (5..10).inject(1) {|product, n| product * n } #=&gt; 151200\n   # find the longest word\n   longest = %w{ cat sheep bear }.inject do |memo,word|\n     memo.length &gt; word.length ? memo : word\n   end\n   longest\n</code></pre>\n\n<p>So your sample would work if you return computation result for each iteration, something like this:</p>\n\n<pre><code>def running_totals(myarray)\n  results = []\n  myarray.inject do |sum,n|\n    results &lt;&lt; sum + n\n    results.last # return computation result back to Array's inject\n  end\n  results\nend\n</code></pre>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 281, "user_id": 2461224, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/250b5a5119a4f872ecd012ef78f414d5?s=128&d=identicon&r=PG", "display_name": "arsenalist", "link": "https://stackoverflow.com/users/2461224/arsenalist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 39127994, "answer_count": 4, "score": 0, "last_activity_date": 1472062779, "creation_date": 1472053061, "question_id": 39127601, "link": "https://stackoverflow.com/questions/39127601/why-do-i-get-a-typeerror-when-using-inject-in-ruby", "title": "Why do I get a &#39;typeerror&#39; when using inject in Ruby?", "body": "<p>I am using this inject method to make a running total of values into an array. I am trying to figure out why I am getting an error.</p>\n\n<pre><code>def running_totals(myarray)\n results = []\n  myarray.inject([]) do |sum,n|\n    results &lt;&lt; sum + n\n  end\n  results\nend\n\np running_totals([1,2,3,4,5])\n</code></pre>\n\n<p>I am getting the error </p>\n\n<pre><code>in `+': no implicit conversion of Fixnum into Array (TypeError)\n</code></pre>\n\n<p>When breaking this method down, isn't this the same as adding two integers and adding that into an array? I'm a bit confused here. Thanks for the help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nokogiri"], "comments": [{"owner": {"reputation": 9806, "user_id": 382982, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9ZaxF.jpg?s=128&g=1", "display_name": "pdoherty926", "link": "https://stackoverflow.com/users/382982/pdoherty926"}, "edited": false, "score": 0, "creation_date": 1472052762, "post_id": 39127267, "comment_id": 65600507, "body": "I believe you&#39;ll need to lowercase the values passed to <code>require</code>. After doing that, this code worked for me."}, {"owner": {"reputation": 426, "user_id": 6075414, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/88da80c1fa9924757e7c07475d56e6de?s=128&d=identicon&r=PG", "display_name": "NeyLive", "link": "https://stackoverflow.com/users/6075414/neylive"}, "reply_to_user": {"reputation": 9806, "user_id": 382982, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9ZaxF.jpg?s=128&g=1", "display_name": "pdoherty926", "link": "https://stackoverflow.com/users/382982/pdoherty926"}, "edited": false, "score": 0, "creation_date": 1472053338, "post_id": 39127267, "comment_id": 65600873, "body": "I just did as you recommended. I&#39;m still getting the same error."}, {"owner": {"reputation": 426, "user_id": 6075414, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/88da80c1fa9924757e7c07475d56e6de?s=128&d=identicon&r=PG", "display_name": "NeyLive", "link": "https://stackoverflow.com/users/6075414/neylive"}, "reply_to_user": {"reputation": 9806, "user_id": 382982, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9ZaxF.jpg?s=128&g=1", "display_name": "pdoherty926", "link": "https://stackoverflow.com/users/382982/pdoherty926"}, "edited": false, "score": 0, "creation_date": 1472053733, "post_id": 39127267, "comment_id": 65601118, "body": "That&#39;s exactly what I&#39;ve got, also Ruby 2.3.1. Which version of Nokogiri do you have installed?"}, {"owner": {"reputation": 9806, "user_id": 382982, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9ZaxF.jpg?s=128&g=1", "display_name": "pdoherty926", "link": "https://stackoverflow.com/users/382982/pdoherty926"}, "edited": false, "score": 0, "creation_date": 1472054162, "post_id": 39127267, "comment_id": 65601384, "body": "I&#39;m using Nokogiri 1.6.8. Is it possible that you&#39;re being rate-limited by nike.com and not getting back the response body you&#39;re code is expecting?"}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1472054298, "post_id": 39127267, "comment_id": 65601494, "body": "pasted your code into a console and it worked just fine."}, {"owner": {"reputation": 426, "user_id": 6075414, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/88da80c1fa9924757e7c07475d56e6de?s=128&d=identicon&r=PG", "display_name": "NeyLive", "link": "https://stackoverflow.com/users/6075414/neylive"}, "edited": false, "score": 0, "creation_date": 1472054444, "post_id": 39127267, "comment_id": 65601612, "body": "I thought about that and highly suspected that might be the case, and tried it on a different site but I get the same error there too."}, {"owner": {"reputation": 426, "user_id": 6075414, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/88da80c1fa9924757e7c07475d56e6de?s=128&d=identicon&r=PG", "display_name": "NeyLive", "link": "https://stackoverflow.com/users/6075414/neylive"}, "edited": false, "score": 0, "creation_date": 1472054494, "post_id": 39127267, "comment_id": 65601641, "body": "There must be my something off with my system then."}, {"owner": {"reputation": 426, "user_id": 6075414, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/88da80c1fa9924757e7c07475d56e6de?s=128&d=identicon&r=PG", "display_name": "NeyLive", "link": "https://stackoverflow.com/users/6075414/neylive"}, "edited": false, "score": 0, "creation_date": 1472056163, "post_id": 39127267, "comment_id": 65602651, "body": "Yep, my local dev environment seems to be broken. This sucks. Well, thanks for letting me know that it&#39;s not the code. I would have been at this all day otherwise."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1472078097, "post_id": 39127267, "comment_id": 65613416, "body": "Your code is very awkward. You need to dig into the HTML and find the parent node for the data you want. Once there extracting will flow cleanly. Also, it&#39;s also important to understand that scraping violates the TOS for most commercial sites, so you run a risk of being banned, receiving a cease and desist notice, or being sued. How to be an good network citizen, and/or avoid those things are entirely different questions. The first <i>might</i> be on-topic whereas the second would be off-topic."}], "answers": [{"comments": [{"owner": {"reputation": 426, "user_id": 6075414, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/88da80c1fa9924757e7c07475d56e6de?s=128&d=identicon&r=PG", "display_name": "NeyLive", "link": "https://stackoverflow.com/users/6075414/neylive"}, "edited": false, "score": 0, "creation_date": 1472054215, "post_id": 39127902, "comment_id": 65601418, "body": "It is part of a rails project. I just tried it without the require and got uninitialized constant errors in addition to the previous error, so I guess it is necessary."}, {"owner": {"reputation": 3331, "user_id": 994210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32122073312c9c8b4c6a05f4c1257516?s=128&d=identicon&r=PG", "display_name": "Tom L", "link": "https://stackoverflow.com/users/994210/tom-l"}, "reply_to_user": {"reputation": 426, "user_id": 6075414, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/88da80c1fa9924757e7c07475d56e6de?s=128&d=identicon&r=PG", "display_name": "NeyLive", "link": "https://stackoverflow.com/users/6075414/neylive"}, "edited": false, "score": 0, "creation_date": 1472054382, "post_id": 39127902, "comment_id": 65601557, "body": "Be sure to add the gems to your Gemfile and run bundle install."}, {"owner": {"reputation": 426, "user_id": 6075414, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/88da80c1fa9924757e7c07475d56e6de?s=128&d=identicon&r=PG", "display_name": "NeyLive", "link": "https://stackoverflow.com/users/6075414/neylive"}, "edited": false, "score": 0, "creation_date": 1472055183, "post_id": 39127902, "comment_id": 65602071, "body": "I have them added in the Gemfile, and have run bundle install."}, {"owner": {"reputation": 3331, "user_id": 994210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32122073312c9c8b4c6a05f4c1257516?s=128&d=identicon&r=PG", "display_name": "Tom L", "link": "https://stackoverflow.com/users/994210/tom-l"}, "reply_to_user": {"reputation": 426, "user_id": 6075414, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/88da80c1fa9924757e7c07475d56e6de?s=128&d=identicon&r=PG", "display_name": "NeyLive", "link": "https://stackoverflow.com/users/6075414/neylive"}, "edited": false, "score": 0, "creation_date": 1472056087, "post_id": 39127902, "comment_id": 65602613, "body": "If you&#39;re getting uninitialized constant errors after including the gems in the Gemfile and running <code>bundle install</code> then the only thing I can think of is that you need to reload the environment. If you&#39;re in console, exit out and go back in. And I mean rails console, not an irb session."}, {"owner": {"reputation": 426, "user_id": 6075414, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/88da80c1fa9924757e7c07475d56e6de?s=128&d=identicon&r=PG", "display_name": "NeyLive", "link": "https://stackoverflow.com/users/6075414/neylive"}, "edited": false, "score": 0, "creation_date": 1472056790, "post_id": 39127902, "comment_id": 65603002, "body": "I have exited out and gone back in, a few times actually. The only way that I don&#39;t get the uninitialized constant errors is with the requires in the scraper file."}, {"owner": {"reputation": 426, "user_id": 6075414, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/88da80c1fa9924757e7c07475d56e6de?s=128&d=identicon&r=PG", "display_name": "NeyLive", "link": "https://stackoverflow.com/users/6075414/neylive"}, "edited": false, "score": 0, "creation_date": 1472056925, "post_id": 39127902, "comment_id": 65603067, "body": "However I have now  discovered that my local dev environment has, for lack of a better word, broken. And I&#39;ll have to figure out what exactly broke, fix that if I can then try this again later."}], "tags": [], "owner": {"reputation": 3331, "user_id": 994210, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/32122073312c9c8b4c6a05f4c1257516?s=128&d=identicon&r=PG", "display_name": "Tom L", "link": "https://stackoverflow.com/users/994210/tom-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1472054258, "last_edit_date": 1472054258, "creation_date": 1472054010, "answer_id": 39127902, "question_id": 39127267, "link": "https://stackoverflow.com/questions/39127267/why-am-i-getting-this-undefined-method-error-with-ruby-and-nokogiri/39127902#39127902", "title": "Why am I getting this undefined method error with Ruby and Nokogiri?", "body": "<p>This question is tagged as [ruby-on-rails]. If it's part of a Rails project then you just need to put httparty and nokogiri in your Gemfile and there is no need to require.</p>\n\n<p>This worked for me inside of a Rails project (lib/scraper.rb):</p>\n\n<pre><code>class Scraper\n\n  attr_accessor :parse_page\n\n  def initialize\n    doc = HTTParty.get(\"http://store.nike.com/us/en_us/pw/mens-nikeid-lifestyle-shoes/1k9Z7puZoneZoi3\")\n    @parse_page ||= Nokogiri::HTML(doc) #memoized @parse_page so it only gets assigned once.\n  end\n\n  def get_names\n    names = item_container.css(\".product-name\").css(\"p\").children.map { |name| name.text }.compact\n  end\n\n  def get_prices\n    prices = item_container.css(\".product-price\").css(\"span.local\").children.map { |price| price.text }.compact\n  end\n\n  private\n\n  def item_container\n    parse_page.css(\".grid-item-info\")\n  end\n\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1472078387, "last_edit_date": 1472078387, "creation_date": 1472077331, "answer_id": 39133894, "question_id": 39127267, "link": "https://stackoverflow.com/questions/39127267/why-am-i-getting-this-undefined-method-error-with-ruby-and-nokogiri/39133894#39133894", "title": "Why am I getting this undefined method error with Ruby and Nokogiri?", "body": "<p>Mediate on this:</p>\n\n<pre><code>require 'httparty'\nrequire 'nokogiri'\n\nclass Scraper\n\n  attr_accessor :parse_page\n  attr_reader :url\n\n  def initialize(url)\n    @url ||= url\n    @parse_page ||= Nokogiri::HTML(HTTParty.get(url))\n  end\n\n  def names_and_prices\n    @parse_page.search('div.product-name').map{ |shoe|\n      shoe_parent = shoe.parent\n      name = shoe_parent.at('p.product-display-name').text\n\n      product_prices = shoe_parent.at('div.prices')\n      override_price = product_prices.at('span.overridden').text\n      price = product_prices.at('span.local').text\n\n      {\n        name: name,\n        price: price,\n        override_price: override_price\n      }\n    }\n  end\n\nend\n\nscraper = Scraper.new('http://store.nike.com/us/en_us/pw/mens-nikeid-lifestyle-shoes/1k9Z7puZoneZoi3')\n\nscraper.names_and_prices.each_with_index do |shoe, index|\n  puts \"#{index + 1}: Name: #{shoe[:name]} | Price: #{shoe[:price]} | Override price: #{shoe[:override_price]}\"\nend\n</code></pre>\n\n<p>Which results in output like this:</p>\n\n<pre><code>1: Name: Nike Sock Dart iD | Price: $170 | Override price:\n2: Name: Nike Air Max 1 Ultra Flyknit iD | Price: $200 | Override price:\n3: Name: Nike Air Max 1 Premium iD | Price: $175 | Override price:\n4: Name: Nike Air Max 90 Premium iD | Price: $175 | Override price:\n5: Name: Nike Air Force 1 High Premium iD | Price: $175 | Override price:\n6: Name: Nike Air Force 1 Mid Premium iD | Price: $170 | Override price:\n...\n</code></pre>\n\n<p><code>scraper.names_and_prices</code> returns an array-of-hashes which looks like:</p>\n\n<pre><code>[\n  [0] {\n    :name           =&gt; \"Nike Sock Dart iD\",\n    :price          =&gt; \"$170\",\n    :override_price =&gt; \"\"\n  },\n  [1] {\n    :name           =&gt; \"Nike Air Max 1 Ultra Flyknit iD\",\n    :price          =&gt; \"$200\",\n    :override_price =&gt; \"\"\n  }\n]\n</code></pre>\n\n<p>When scraping, you need to dig into the HTML to find the best landmarks in the markup that allow you to quickly find your desired content. <code>div.product-name</code> is actually one level deeper than I'd want, so <code>shoe.parent</code> backs up one level to the parent node that contains the desired information. The result is the code is able to cleanly retrieve the information for each shoe. Using <code>.grid-item-info</code> to navigate resulted in at least one false-positive along with an attending set of nils for the inner selectors.</p>\n"}], "owner": {"reputation": 426, "user_id": 6075414, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/88da80c1fa9924757e7c07475d56e6de?s=128&d=identicon&r=PG", "display_name": "NeyLive", "link": "https://stackoverflow.com/users/6075414/neylive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 286, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1472079324, "creation_date": 1472052016, "last_edit_date": 1472079324, "question_id": 39127267, "link": "https://stackoverflow.com/questions/39127267/why-am-i-getting-this-undefined-method-error-with-ruby-and-nokogiri", "title": "Why am I getting this undefined method error with Ruby and Nokogiri?", "body": "<p>I am making a web scraper just so I can learn how. When I run it in Terminal, I am getting an error message that states:</p>\n\n<p>scraper.rb:23:in 'item_container': undefined method 'css' for nil:NilClass (NoMethodError)</p>\n\n<p>Here is my code in scraper.rb</p>\n\n<pre><code>require 'HTTParty'\nrequire 'Nokogiri'\n\nclass Scraper\n\n  attr_accessor :parse_page\n\n  def initialize\n    doc = HTTParty.get(\"http://store.nike.com/us/en_us/pw/mens-nikeid-lifestyle-shoes/1k9Z7puZoneZoi3\")\n    @parse_page ||= Nokogiri::HTML(doc) #memoized @parse_page so it only gets assigned once.\n  end\n\n  def get_names\n    names = item_container.css(\".product-name\").css(\"p\").children.map { |name| name.text }.compact\n  end\n\n  def get_prices\n    prices = item_container.css(\".product-price\").css(\"span.local\").children.map { |price| price.text }.compact\n  end\n\n  private\n  def item_container\n    parse_page.css(\".grid-item-info\")\n  end\n\n  scraper = Scraper.new\n  names = scraper.get_names\n  prices = scraper.get_prices\n\n  (0...prices.size).each do |index|\n    puts \"- - - index: #{index + 1} - - -\"\n    puts \"Name: #{names[index]} | Price: #{prices[index]}\"\n  end\nend\n</code></pre>\n\n<p>Can anyone tell me why I am getting this error? How can I fix it? Thanks in advance.</p>\n"}, {"tags": ["ruby", "hash"], "answers": [{"comments": [{"owner": {"reputation": 1720, "user_id": 6471733, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e96b247d3862d042b84490a62d42e?s=128&d=identicon&r=PG", "display_name": "Muntasir Alam", "link": "https://stackoverflow.com/users/6471733/muntasir-alam"}, "edited": false, "score": 0, "creation_date": 1472053257, "post_id": 39127597, "comment_id": 65600826, "body": "Very nice. A recursive solution was indeed something I was trying on my own. +1. Lets see what other rubyists can come up with :)"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1472057136, "post_id": 39127597, "comment_id": 65603184, "body": "This will not work in the other direction as requested in the OP. <code>{&quot;a&quot;=&gt;{&quot;b&quot;=&gt;&quot;c&quot;}}</code> converted to <code>{{&quot;c&quot;=&gt;&quot;b&quot;}=&gt;&quot;a&quot;}</code>"}, {"owner": {"reputation": 636, "user_id": 1253311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21acab710c6e17104c2af7bf8390a9d5?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1253311/matt"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1472057821, "post_id": 39127597, "comment_id": 65603550, "body": "@engineersmnky It will if values of the hash are inverted too, as mentioned (and as implemented in your answer)."}, {"owner": {"reputation": 378, "user_id": 6757245, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/f324b8903d6c8ceae5f7f1897c8080af?s=128&d=identicon&r=PG&f=1", "display_name": "bill", "link": "https://stackoverflow.com/users/6757245/bill"}, "edited": false, "score": 0, "creation_date": 1472221355, "post_id": 39127597, "comment_id": 65679426, "body": "Hi, I am new to ruby and found this question interesting. What does it mean when we put (k,v) in .each_with_object, I thought it two arguents, how do we know what k and v mean here?"}], "tags": [], "owner": {"reputation": 636, "user_id": 1253311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21acab710c6e17104c2af7bf8390a9d5?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1253311/matt"}, "is_accepted": true, "score": 5, "last_activity_date": 1472053048, "creation_date": 1472053048, "answer_id": 39127597, "question_id": 39127165, "link": "https://stackoverflow.com/questions/39127165/what-are-some-nice-ways-to-reverse-a-nested-hash/39127597#39127597", "title": "What are some nice ways to reverse a nested hash?", "body": "<p>This can be accomplished with a recursive method for inverting the keys of the hash (and values, if desired). For example:</p>\n\n<pre><code>hsh = {{\"c\"=&gt;\"b\"}=&gt;\"a\"}\ndef recursive_invert(hsh)\n    hsh.each_with_object({}) do |(k, v), inverted_hsh|\n        if k.is_a? Hash\n            k = recursive_invert(k)\n        end\n        inverted_hsh[v] = k \n    end\nend\nrecursive_invert(hsh) # {\"a\"=&gt;{\"b\"=&gt;\"c\"}}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 4, "last_activity_date": 1472057397, "creation_date": 1472057397, "answer_id": 39128979, "question_id": 39127165, "link": "https://stackoverflow.com/questions/39127165/what-are-some-nice-ways-to-reverse-a-nested-hash/39128979#39128979", "title": "What are some nice ways to reverse a nested hash?", "body": "<p>Here's A recursive solution that will work in both directions. </p>\n\n<pre><code>def deep_invert(h)\n    h.each_with_object({}) do |(k,v),obj|\n        k = deep_invert(k) if k.is_a?(Hash)\n        v = deep_invert(v) if v.is_a?(Hash)\n        obj[v] = k\n    end\nend\n</code></pre>\n\n<p>Example: </p>\n\n<pre><code>a = {\"a\"=&gt;{\"b\"=&gt;\"c\"}}\ndeep_invert(a) \n#=&gt; {{\"c\"=&gt;\"b\"}=&gt;\"a\"}\ndeep_invert(deep_invert(a)) == a \n#=&gt; true\n</code></pre>\n"}], "owner": {"reputation": 1720, "user_id": 6471733, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e96b247d3862d042b84490a62d42e?s=128&d=identicon&r=PG", "display_name": "Muntasir Alam", "link": "https://stackoverflow.com/users/6471733/muntasir-alam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 286, "favorite_count": 1, "accepted_answer_id": 39127597, "answer_count": 2, "score": 3, "last_activity_date": 1472057397, "creation_date": 1472051665, "question_id": 39127165, "link": "https://stackoverflow.com/questions/39127165/what-are-some-nice-ways-to-reverse-a-nested-hash", "title": "What are some nice ways to reverse a nested hash?", "body": "<p>Suppose we have</p>\n\n<pre><code>b = {\"b\"=&gt;\"c\"}\n</code></pre>\n\n<p>By doing <code>b.invert</code>we can easily obtain the result of</p>\n\n<pre><code>{\"c\"=&gt;\"b\"}\n</code></pre>\n\n<p>Thats when I thought of trying something pretty cool. Suppose we have</p>\n\n<pre><code>a = {\"a\"=&gt;{\"b\"=&gt;\"c\"}}\n</code></pre>\n\n<p>Whats a fairly efficient way to make this <code>{{\"c\"=&gt;\"b\"}=&gt;\"a\"}</code> (Here we reverse the most inner <code>hash</code> and work our way out)</p>\n\n<p>Of course it would be best to extend this to <code>n</code> amount of hashes within each other. I've been looking for some other questions similar but haven't found any. </p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 2037, "user_id": 4531835, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/02f4959a0a3436daa0a07526ac6a3551?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Saleba", "link": "https://stackoverflow.com/users/4531835/andrey-saleba"}, "edited": false, "score": 0, "creation_date": 1472051092, "post_id": 39126866, "comment_id": 65599338, "body": "This table is already exist in database. You need to drop it or rename. Or not to rename anything but in new migration to drop old table and then recreate it. 2nd way is much better because it is safe for the future"}], "answers": [{"comments": [{"owner": {"reputation": 10344, "user_id": 1509401, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HiLe4.jpg?s=128&g=1", "display_name": "thank_you", "link": "https://stackoverflow.com/users/1509401/thank-you"}, "edited": false, "score": 0, "creation_date": 1472051564, "post_id": 39126961, "comment_id": 65599679, "body": "I swear that I read a Stackoverflow answer explaining why you can do such a thing and it had 30+ points. I wish I could find it. I honestly believe you. The funny thing is is that my original idea was working at one point but due to a git issue I lost a file or two that blew everything up. I&#39;m glad this is sorted out now."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1472051695, "post_id": 39126961, "comment_id": 65599778, "body": "&quot;so you can introduce a new migration with the same name&quot; - migration name includes timestamp, so deleting previous one is not necessary, as well as making a unique name."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 10344, "user_id": 1509401, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HiLe4.jpg?s=128&g=1", "display_name": "thank_you", "link": "https://stackoverflow.com/users/1509401/thank-you"}, "edited": false, "score": 0, "creation_date": 1472051716, "post_id": 39126961, "comment_id": 65599795, "body": "@jason328 There might be missing context, but I can tell you with absolute certainty that changing an old migration will have absolutely no effect unless you explicit re-run that migration using <code>rake db:migrate:redo VERSION=&lt;ID of migration&gt;</code>, and if you try to run that for the migration you describe, it will fail as it will first try to drop a table called <code>old_likes</code>, which does not yet exist."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1472051755, "post_id": 39126961, "comment_id": 65599829, "body": "@SergioTulentsev No, the string after the digits must be unique. You cannot have a migration called <code>001_stuff.rb</code> and <code>002_stuff.rb</code>, the <code>_stuff</code> must be unique. I invite you try try this yourself."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1472051791, "post_id": 39126961, "comment_id": 65599851, "body": "Hmm. I blame mongoid and its lack of migrations. I obviously lost contact with reality in this area. :)"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1472051834, "post_id": 39126961, "comment_id": 65599880, "body": "@SergioTulentsev The issue is that the migration name maps directly to the class it defines. <code>create_stuff</code> must define a migration class called <code>CreateStuff</code>. Two migrations with the same name would necessarily define the same class, which would blow things up. The later class would clobber the methods of the earlier class, or you&#39;d potentially wind up with the first class defining <code>up&#47;down</code> and the second class defining <code>change</code> yielding some weird undefined behavior. Rails side-steps this mess by enforcing uniqueness on on the migration name."}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": true, "score": 4, "last_activity_date": 1472052039, "last_edit_date": 1472052039, "creation_date": 1472051052, "answer_id": 39126961, "question_id": 39126866, "link": "https://stackoverflow.com/questions/39126866/recreating-a-table-in-rails/39126961#39126961", "title": "Recreating a table in Rails", "body": "<p>Old migrations don't run when you change their content, and you <em>should not rename them</em>. Even if they did run, changing the <code>create_table :likes</code> to <code>create_table :old_likes</code> cannot possibly change the name of an existing table. That isn't what <code>create_table</code> does. At best, re-running that migration will now cause a new table to be created called <code>old_likes</code>, with no content, while leaving your old <code>likes</code> table unaffected. In actuality re-running that migration will simply fail, as it will attempt to <em>undo</em> the migration first, dropping the table <code>old_likes</code> which does not yet exist.</p>\n\n<p>What you need to do is create a new migration called <code>rename_likes_to_old_likes</code>, which actually renames the table, using <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Migration.html\" rel=\"nofollow\"><code>rename_table</code></a>. Then, either:</p>\n\n<ul>\n<li>delete the old migration entirely, so you can introduce a new migration with the same name</li>\n</ul>\n\n<p>OR</p>\n\n<ul>\n<li>create a new migration with a unique name such as <code>create_new_likes_table</code> or the like, and introduce your new table there.</li>\n</ul>\n"}], "owner": {"reputation": 10344, "user_id": 1509401, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HiLe4.jpg?s=128&g=1", "display_name": "thank_you", "link": "https://stackoverflow.com/users/1509401/thank-you"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1069, "favorite_count": 0, "accepted_answer_id": 39126961, "answer_count": 1, "score": 2, "last_activity_date": 1472052039, "creation_date": 1472050799, "question_id": 39126866, "link": "https://stackoverflow.com/questions/39126866/recreating-a-table-in-rails", "title": "Recreating a table in Rails", "body": "<p>I'm using Rails and Postgres. I currently have a Like table created. I need to drop this table and re-create it. Here's what I've done so far.</p>\n\n<p>1) Rename <code>create_likes</code> migration file to <code>create_likes_old</code> so there is no conflict with file names within migrations.</p>\n\n<p>2) Change the name of the table inside the migration from <code>create_table :likes</code> to <code>create_table :likes_old</code>.</p>\n\n<p>3) Generate new <code>create_likes</code> migration that creates a table called Like.</p>\n\n<p>Currently I'm running into the following issue when I run <code>rake db:migrate</code>:</p>\n\n<pre><code>PG::DuplicateTable: ERROR:  relation \"likes\" already exists\n</code></pre>\n\n<p>This makes it seems like the Like table was never renamed to LikeOld. What's wrong and how do I fix this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash"], "comments": [{"owner": {"reputation": 779, "user_id": 1010746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f12532c1224ff2ab2260e853258deddb?s=128&d=identicon&r=PG", "display_name": "neongrau", "link": "https://stackoverflow.com/users/1010746/neongrau"}, "edited": false, "score": 0, "creation_date": 1472051593, "post_id": 39126588, "comment_id": 65599696, "body": "Your code seems quite straightforward. Not much you can do with a nested hash. Since your task is pretty easy while i&#39;d still go with you initial solution this would also work ;)      new_hash = JSON.parse(old_hash.to_json.gsub(/(&quot;amount&quot;:&quot;)(\\d+)(&quot;)/, &#39;\\1-\\2\\3&#39;))"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1472057089, "post_id": 39126588, "comment_id": 65603153, "body": "Please pare down examples to their bare essentials. For hashes, that means eliminating extraneous key-value pairs and shortening keys and values. Also, it&#39;s helpful to assign a variable to each input object so that readers can refer to those variables in text and code without having to define them. Your entire hash could be, for example,  <code>h = { &quot;name&quot;=&gt;&quot;abc&quot;, attr1=&gt;{ 123=&gt;{ :month=&gt;1, :day=&gt;2 }, attr2=&gt;{ &quot;310&quot;=&gt;{&quot;room&quot;=&gt;&quot;7&quot;, &quot;amount&quot;=&gt;15}, &quot;314&quot;=&gt;{&quot;room&quot;=&gt;&quot;98&quot;, &quot;amount&quot;=&gt;25} } } }</code>. Among other things, readers will now be able to read your code without the need for horizontal scrolling."}, {"owner": {"reputation": 934, "user_id": 3663124, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/dd2b3438ed3252dce5c184b4eace56ba?s=128&d=identicon&r=PG&f=1", "display_name": "fedest", "link": "https://stackoverflow.com/users/3663124/fedest"}, "edited": false, "score": 0, "creation_date": 1472140686, "post_id": 39126588, "comment_id": 65643058, "body": "Thank you for the suggestion, will do it shortly"}], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 6702161, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9aa7c6d2437062f3d7cf7ef92dd266c8?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Barth", "link": "https://stackoverflow.com/users/6702161/nick-barth"}, "is_accepted": false, "score": 0, "last_activity_date": 1472052866, "creation_date": 1472052866, "answer_id": 39127533, "question_id": 39126588, "link": "https://stackoverflow.com/questions/39126588/ruby-modify-elements-of-nested-hashes/39127533#39127533", "title": "Ruby modify elements of nested hashes", "body": "<p>There's not much you can do with hashes but loop through them.</p>\n\n<p>However, if you're guaranteed that the category_rate_requests hash will always be one element (arguments about whether that's a good idea aside), you can skip that loop with something like</p>\n\n<pre><code>rate_params[\"category_rate_requests_attributes\"].values.first[\"room_category_rates_attributes\"].each{|key, room_category_rate| room_category_rate[\"amount\"] = room_category_rate[\"amount\"].to_i * -1}\n</code></pre>\n\n<p>This assumes that hash is always the same structure, but if that's the case, you can grab <code>category_rate_requests_attributes</code> directly. Knowing it's always a one-element hash, use <code>values</code> to get an array of it's values, take the <code>first</code> (and only) element of that array, and loop through the resulting hash to invert the amounts.</p>\n\n<p>I'm not sure it's any \"nicer\", but it's another path anyway.</p>\n"}], "owner": {"reputation": 934, "user_id": 3663124, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/dd2b3438ed3252dce5c184b4eace56ba?s=128&d=identicon&r=PG&f=1", "display_name": "fedest", "link": "https://stackoverflow.com/users/3663124/fedest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 942, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1472142283, "creation_date": 1472050119, "last_edit_date": 1472142283, "question_id": 39126588, "link": "https://stackoverflow.com/questions/39126588/ruby-modify-elements-of-nested-hashes", "title": "Ruby modify elements of nested hashes", "body": "<p>I have a RoR application in which at some point I recieve some params in the form of a hash. There's a field <code>amount</code> repeated within the hash. I want the value of these fields inverted.\nThis is an example of the nested hash:</p>\n\n<pre><code>{\"name\"=&gt;\"asdasd\", \"rate_type\"=&gt;\"DependantRate\",\n \"category_rate_requests_attributes\"=&gt;{\n   \"0\"=&gt;{\n     \"date_from\"=&gt;\"2016-08-03\", \"date_to\"=&gt;\"2016-08-03\",\n     \"room_category_rates_attributes\"=&gt;{\n       \"0\"=&gt;{\"r_id\"=&gt;\"7\", \"amount\"=&gt;\"5\"},\n       \"1\"=&gt;{\"r_id\"=&gt;\"98\", \"amount\"=&gt;\"15\"},\n       \"2\"=&gt;{\"r_id\"=&gt;\"3\", \"amount\"=&gt;\"25\"},\n       \"3\"=&gt;{\"r_id\"=&gt;\"1\", \"amount\"=&gt;\"35\"},\n       \"4\"=&gt;{\"r_id\"=&gt;\"115\", \"amount\"=&gt;\"45\"},\n       \"5\"=&gt;{\"r_id\"=&gt;\"116\", \"amount\"=&gt;\"55\"},\n       \"6\"=&gt;{\"r_id\"=&gt;\"117\", \"amount\"=&gt;\"65\"}\n     }\n   },\n   \"1\"=&gt;{\n     \"date_from\"=&gt;\"2016-08-05\", \"date_to\"=&gt;\"2016-08-07\",\n     \"room_category_rates_attributes\"=&gt;{\n       \"0\"=&gt;{\"r_id\"=&gt;\"7\", \"amount\"=&gt;\"3\"},\n       \"1\"=&gt;{\"r_id\"=&gt;\"98\", \"amount\"=&gt;\"13\"},\n       \"2\"=&gt;{\"r_id\"=&gt;\"3\", \"amount\"=&gt;\"23\"},\n       \"3\"=&gt;{\"r_id\"=&gt;\"1\", \"amount\"=&gt;\"33\"},\n       \"4\"=&gt;{\"r_id\"=&gt;\"115\", \"amount\"=&gt;\"43\"},\n       \"5\"=&gt;{\"r_id\"=&gt;\"116\", \"amount\"=&gt;\"53\"},\n       \"6\"=&gt;{\"r_id\"=&gt;\"117\", \"amount\"=&gt;\"63\"}\n     }\n   }\n }\n}\n</code></pre>\n\n<p>And I want to obtain a new hash which has that <code>amount</code>field with the same values but negative, as in:</p>\n\n<pre><code>{\"name\"=&gt;\"asdasd\", \"rate_type\"=&gt;\"DependantRate\",\n \"category_rate_requests_attributes\"=&gt;{\n   \"0\"=&gt;{\n     \"date_from\"=&gt;\"2016-08-03\", \"date_to\"=&gt;\"2016-08-03\",\n     \"room_category_rates_attributes\"=&gt;{\n       \"0\"=&gt;{\"r_id\"=&gt;\"7\", \"amount\"=&gt;-5},\n       \"1\"=&gt;{\"r_id\"=&gt;\"98\", \"amount\"=&gt;-15},\n       \"2\"=&gt;{\"r_id\"=&gt;\"3\", \"amount\"=&gt;-25},\n       \"3\"=&gt;{\"r_id\"=&gt;\"1\", \"amount\"=&gt;-35},\n       \"4\"=&gt;{\"r_id\"=&gt;\"115\", \"amount\"=&gt;-45},\n       \"5\"=&gt;{\"r_id\"=&gt;\"116\", \"amount\"=&gt;-55},\n       \"6\"=&gt;{\"r_id\"=&gt;\"117\", \"amount\"=&gt;-65}\n     }\n   },\n   \"1\"=&gt;{\n     \"date_from\"=&gt;\"2016-08-05\", \"date_to\"=&gt;\"2016-08-07\",\n     \"room_category_rates_attributes\"=&gt;{\n       \"0\"=&gt;{\"r_id\"=&gt;\"7\", \"amount\"=&gt;-3},\n       \"1\"=&gt;{\"r_id\"=&gt;\"98\", \"amount\"=&gt;-13},\n       \"2\"=&gt;{\"r_id\"=&gt;\"3\", \"amount\"=&gt;-23},\n       \"3\"=&gt;{\"r_id\"=&gt;\"1\", \"amount\"=&gt;-33},\n       \"4\"=&gt;{\"r_id\"=&gt;\"115\", \"amount\"=&gt;-43},\n       \"5\"=&gt;{\"r_id\"=&gt;\"116\", \"amount\"=&gt;-53},\n       \"6\"=&gt;{\"r_id\"=&gt;\"117\", \"amount\"=&gt;-63}\n     }\n   }\n }\n}\n</code></pre>\n\n<p>(yes, the values are now numbers but it doesn't really matter if they are strings or numbers as long as they are negative).</p>\n\n<p>This is what I've came up with:</p>\n\n<pre><code>rate_params[:category_rate_requests_attributes].try(:each) do |_key1, category_rate_request|\n  category_rate_request[:room_category_rates_attributes].each do |_key2, room_category_rate|\n    room_category_rate[:amount] = room_category_rate[:amount].to_i * -1\n  end\nend\n</code></pre>\n\n<p>But it's far from nice code.</p>\n\n<p>Any suggestions on what would be the best way to do this?</p>\n"}, {"tags": ["ruby", "maps", "combinations"], "comments": [{"owner": {"reputation": 105, "user_id": 6752839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdcb87627c42b221af73853bc0086d2c?s=128&d=identicon&r=PG&f=1", "display_name": "Raamish Malik", "link": "https://stackoverflow.com/users/6752839/raamish-malik"}, "edited": false, "score": 0, "creation_date": 1472132918, "post_id": 39125247, "comment_id": 65637927, "body": "why was this downvoted ?"}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 6752839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdcb87627c42b221af73853bc0086d2c?s=128&d=identicon&r=PG&f=1", "display_name": "Raamish Malik", "link": "https://stackoverflow.com/users/6752839/raamish-malik"}, "edited": false, "score": 1, "creation_date": 1472048078, "post_id": 39125534, "comment_id": 65597083, "body": "Thank you so much for such a clear and prompt reply. Edit - Oh yes repeated_permutations was exactly what i was searching, thanks a ton."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 1, "last_activity_date": 1472048466, "last_edit_date": 1472048466, "creation_date": 1472047445, "answer_id": 39125534, "question_id": 39125247, "link": "https://stackoverflow.com/questions/39125247/how-to-extract-each-individual-combination-from-a-flat-map/39125534#39125534", "title": "How to extract each individual combination from a flat_map?", "body": "<p><code>(6..6).flat_map { |n| ... }</code> doesn't do much. Your code is equivalent to:</p>\n\n<pre><code>puts ('a'..'z').to_a.combination(6).map(&amp;:join)\n</code></pre>\n\n<p>To process the values one by one, you can pass a block to <a href=\"http://ruby-doc.org/core-2.3.1/Array.html#method-i-combination\" rel=\"nofollow\"><code>combination</code></a>:</p>\n\n<pre><code>('a'..'z').to_a.combination(6) do |combo|\n  puts combo.join\nend\n</code></pre>\n\n<p>If no block is given, <code>combination</code> returns an <code>Enumerator</code> that can be iterated by calling <a href=\"http://ruby-doc.org/core-2.3.1/Enumerator.html#method-i-next\" rel=\"nofollow\"><code>next</code></a>:</p>\n\n<pre><code>enum = ('a'..'z').to_a.combination(6)\n#=&gt; #&lt;Enumerator: [\"a\", \"b\", \"c\", ..., \"w\", \"x\", \"y\", \"z\"]:combination(6)&gt;\n\nenum.next\n#=&gt; [\"a\", \"b\", \"c\", \"d\", \"e\", \"f\"]\n\nenum.next\n#=&gt; [\"a\", \"b\", \"c\", \"d\", \"e\", \"g\"]\n\nenum.next\n#=&gt; [\"a\", \"b\", \"c\", \"d\", \"e\", \"h\"]\n</code></pre>\n\n<p>Note that <code>('a'..'z').to_a.combination(6)</code> will \"only\" yield 230,230 combinations:</p>\n\n<pre><code>('a'..'z').to_a.combination(6).size\n#=&gt; 230230\n</code></pre>\n\n<p>As opposed to 26 ^ 6 = 308,915,776. You are probably looking for <a href=\"http://ruby-doc.org/core-2.3.1/Array.html#method-i-repeated_permutation\" rel=\"nofollow\"><code>repeated_permutation</code></a>:</p>\n\n<pre><code>('a'..'z').to_a.repeated_permutation(6).size\n#=&gt; 308915776\n</code></pre>\n\n<p>Another way to iterate from <code>\"aaaaaa\"</code> to <code>\"zzzzzz\"</code> is a simple range:</p>\n\n<pre><code>('aaaaaa'..'zzzzzz').each do |combo|\n   puts combo\nend\n</code></pre>\n\n<p>Or manually by calling <a href=\"http://ruby-doc.org/core-2.3.1/String.html#method-i-succ\" rel=\"nofollow\"><code>String#succ</code></a>: (this is what <a href=\"http://ruby-doc.org/core-2.3.1/Range.html#method-i-each\" rel=\"nofollow\"><code>Range#each</code></a> does under the hood)</p>\n\n<pre><code>'aaaaaa'.succ #=&gt; \"aaaaab\"\n'aaaaab'.succ #=&gt; \"aaaaac\"\n\n'aaaaaz'.succ #=&gt; \"aaaaba\"\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 6752839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdcb87627c42b221af73853bc0086d2c?s=128&d=identicon&r=PG&f=1", "display_name": "Raamish Malik", "link": "https://stackoverflow.com/users/6752839/raamish-malik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 327, "favorite_count": 1, "accepted_answer_id": 39125534, "answer_count": 1, "score": 0, "last_activity_date": 1472048466, "creation_date": 1472046759, "last_edit_date": 1472047145, "question_id": 39125247, "link": "https://stackoverflow.com/questions/39125247/how-to-extract-each-individual-combination-from-a-flat-map", "title": "How to extract each individual combination from a flat_map?", "body": "<p>I'm fairly new to ruby and it's my first question here on stackoverflow so pardon me if I'm being a complete noob.</p>\n\n<p>The code which i am working with contains this line -</p>\n\n<pre><code>puts (6..6).flat_map{|n| ('a'..'z').to_a.combination(n).map(&amp;:join)}\n</code></pre>\n\n<p>What the code does is that its starts printing each of the combinations starting from \"abcdef\" and continues till the end (which i have never seen as it has  26^6 combinations).</p>\n\n<p>Of course having an array of that size (26^6) is unimaginable hence I was wondering if there is any way by which i can get next combination in a variable, work with it, and then continue on to the next combination ?</p>\n\n<p>For example I calculate the first combination as \"abcdef\" and store it in a variable 'combo' and use that variable somewhere and then the next combination is calculated and \"abcdeg\" is stored in 'combo' and hence the loop continues ?</p>\n\n<p>Thanks </p>\n"}, {"tags": ["ruby", "rake", "bundler", "redmine", "bitnami"], "comments": [{"owner": {"reputation": 5178, "user_id": 2577840, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1520578334/picture?type=large", "display_name": "Micha\u0142 M\u0142o\u017aniak", "link": "https://stackoverflow.com/users/2577840/micha%c5%82-m%c5%82o%c5%baniak"}, "edited": false, "score": 1, "creation_date": 1472055996, "post_id": 39125206, "comment_id": 65602557, "body": "Can you run <code>bundle list</code>? Do you have rake on the list?"}, {"owner": {"reputation": 4220, "user_id": 386703, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/t2I8i.png?s=128&g=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/386703/brandon"}, "reply_to_user": {"reputation": 5178, "user_id": 2577840, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1520578334/picture?type=large", "display_name": "Micha\u0142 M\u0142o\u017aniak", "link": "https://stackoverflow.com/users/2577840/micha%c5%82-m%c5%82o%c5%baniak"}, "edited": false, "score": 0, "creation_date": 1472056894, "post_id": 39125206, "comment_id": 65603054, "body": "I couldn&#39;t run <code>bundle</code> anything. I may have figured it out (Ruby versions/locations).... I have to do a few more things on this server to test and I&#39;ll answer if it works"}], "answers": [{"comments": [{"owner": {"reputation": 4220, "user_id": 386703, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/t2I8i.png?s=128&g=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/386703/brandon"}, "edited": false, "score": 0, "creation_date": 1472214953, "post_id": 39154203, "comment_id": 65675164, "body": "The rake gem was in the Gemfile. It kept saying it couldn&#39;t find it."}], "tags": [], "owner": {"reputation": 81, "user_id": 3874133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942a7823d02954c9eadc1cccd4fea8bd?s=128&d=identicon&r=PG&f=1", "display_name": "wafcio", "link": "https://stackoverflow.com/users/3874133/wafcio"}, "is_accepted": false, "score": 1, "last_activity_date": 1472156800, "creation_date": 1472156800, "answer_id": 39154203, "question_id": 39125206, "link": "https://stackoverflow.com/questions/39125206/why-cant-bundler-find-rake-when-its-obviously-installed/39154203#39154203", "title": "Why can&#39;t bundler find rake when it&#39;s obviously installed?", "body": "<p>There are two things:</p>\n\n<ul>\n<li>ruby gems available via <code>gem list</code></li>\n<li>ruby gems availbale via bundler</li>\n</ul>\n\n<p>When you are using <code>bundle</code> then bundler is looking for gem from <code>Gemfile</code>. You can have multiple gems installed in your system, but when you are using Gemfile then gem version will be taken from <code>Gemfile.lock</code></p>\n\n<p>Summing up:</p>\n\n<ul>\n<li><code>$ bundle exec rake ...</code></li>\n</ul>\n\n<p>require to have rake gem inside Gemfile</p>\n\n<ul>\n<li><code>$ rake ...</code></li>\n</ul>\n\n<p>it will take the newest version of rake gem installed in system</p>\n\n<p>I hope it helps you.</p>\n"}, {"comments": [{"owner": {"reputation": 4220, "user_id": 386703, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/t2I8i.png?s=128&g=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/386703/brandon"}, "edited": false, "score": 0, "creation_date": 1472215079, "post_id": 39163705, "comment_id": 65675263, "body": "I don&#39;t know what this <code>.&#47;use_redmine</code> is, but your answer was basically what the problem was. I&#39;m going to answer with the full description of what I had to do, but I&#39;ll mark yours because it&#39;s technically correct."}], "tags": [], "owner": {"reputation": 181, "user_id": 6411050, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qw2DQ.jpg?s=128&g=1", "display_name": "Jos&#233; Andr&#233;s", "link": "https://stackoverflow.com/users/6411050/jos%c3%a9-andr%c3%a9s"}, "is_accepted": true, "score": 1, "last_activity_date": 1472205984, "creation_date": 1472205984, "answer_id": 39163705, "question_id": 39125206, "link": "https://stackoverflow.com/questions/39125206/why-cant-bundler-find-rake-when-its-obviously-installed/39163705#39163705", "title": "Why can&#39;t bundler find rake when it&#39;s obviously installed?", "body": "<p>You are probably using the wrong <code>ruby</code> binary. Note that, the installers for Bitnami Stacks are completely self-contained and run independently of the rest of the software or libraries installed on your system.</p>\n\n<p>Also, taking a look at the screenshots you have shared, you were using ruby 1.9.3 when you have executed <code>ruby -v</code> and the Redmine Bitnami Stacks uses ruby 2.1.9. Probably this is the reason of the issue you are having.</p>\n\n<p>If you want to use the ruby (and the other components) shipped with the Bitnami Stack you need to run the following command:</p>\n\n<pre><code>cd *INSTALLDIR*\n./use_redmine\n</code></pre>\n\n<p>This command will open a new console session with the environment configured to use the stack.</p>\n"}, {"tags": [], "owner": {"reputation": 4220, "user_id": 386703, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/t2I8i.png?s=128&g=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/386703/brandon"}, "is_accepted": false, "score": 0, "last_activity_date": 1472218699, "last_edit_date": 1495541215, "creation_date": 1472218699, "answer_id": 39167715, "question_id": 39125206, "link": "https://stackoverflow.com/questions/39125206/why-cant-bundler-find-rake-when-its-obviously-installed/39167715#39167715", "title": "Why can&#39;t bundler find rake when it&#39;s obviously installed?", "body": "<p>This is how I finally got my Redmine upgraded:</p>\n\n<p>A version of ruby outside of the one provided by Bitnami somehow got installed on this machine as well as another version of bundler. The first thing I did was uninstall the <code>apt-get</code> version of bundler. I had to manually remove <code>/usr/bin/bundler</code> and <code>/usr/bin/bundle</code> for <code>$ which bundle</code> to stop finding bundler even after the removal.</p>\n\n<p>I saw that the Bitnami stack's ruby was version 2.1.x but found Ruby 1.9.3 was installed to <code>/usr/bin/ruby1.9.3/</code> with <code>$ which ruby</code>. I took <a href=\"https://stackoverflow.com/a/22753859/386703\">the commands from here</a> and removed that version of Ruby. </p>\n\n<p>Running <code>$ ruby -v</code> now gave me nothing as Ruby wasn't installed anymore (even though it was in the Bitnami stack). Bitnami's Ruby then had to be (re?)added to my path  in <code>~/.profile</code>. <code>$ ruby -v</code> now gives me the correct version.</p>\n\n<p><code>$ gem list</code> was no longer telling me that rake was installed. I tried running <code>$ bundle install</code> where <code>Gemfile</code> is but was complaining about <code>mime-types</code> being locked at a lower version and wouldn't do anything. I got around that with <code>$ bundle update</code> but then ran into the infamous <code>nokogiri</code> problem where it complains that everything required by <code>nokogiri</code> isn't installed. </p>\n\n<p>Since I'd dealt with this before (many many times) I went over to <a href=\"http://www.nokogiri.org/tutorials/installing_nokogiri.html\" rel=\"nofollow noreferrer\">the Nokogiri Website's install page</a> and followed the instructions for troubleshooting on Ubuntu:</p>\n\n<pre><code>sudo apt-get install build-essential patch\nsudo apt-get install ruby-dev zlib1g-dev liblzma-dev\n</code></pre>\n\n<p>and now <code>$ bundle update</code> worked on my <code>Gemfile</code>. Redmine upgraded and my users are about as happy as users can get.</p>\n"}], "owner": {"reputation": 4220, "user_id": 386703, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/t2I8i.png?s=128&g=1", "display_name": "Brandon", "link": "https://stackoverflow.com/users/386703/brandon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1090, "favorite_count": 0, "accepted_answer_id": 39163705, "answer_count": 3, "score": 1, "last_activity_date": 1472218699, "creation_date": 1472046672, "last_edit_date": 1472047295, "question_id": 39125206, "link": "https://stackoverflow.com/questions/39125206/why-cant-bundler-find-rake-when-its-obviously-installed", "title": "Why can&#39;t bundler find rake when it&#39;s obviously installed?", "body": "<p>I'm trying to migrate a version of Redmine from backup to a new server; I'm migrating from Redmine 3.2.3 to 3.3.0. I installed the new version of Redmine (from Bitnami Stack) on my new server and everything loads properly. When I move my old database into the new version, I have to run </p>\n\n<p><code>bundle exec rake db:migrate</code></p>\n\n<p>to migrate my database. But... bundler can't find rake somehow even though <code>gem list</code> shows it clearly installed. Can I force bundler to use the version of rake that I have installed that it says I don't?</p>\n\n<p><a href=\"https://i.stack.imgur.com/H2uzw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/H2uzw.png\" alt=\"enter image description here\"></a></p>\n\n<p>I should mention I've done no customization at all, haven't installed any gems, or changed ruby versions or done anything. This is out of the box Redmine.</p>\n\n<p>I noticed after I made the question that I had two versions of rake installed. I removed both and reinstalled rake 11.1.2 and have the same problem.</p>\n"}, {"tags": ["ruby", "curl", "newrelic"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 2, "creation_date": 1472045258, "post_id": 39124589, "comment_id": 65594836, "body": "What problem do you face? Is there an error message? Can you please post your attempt."}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 1, "creation_date": 1472047667, "post_id": 39124589, "comment_id": 65596789, "body": "Stack Overflow is not a code translation service."}, {"owner": {"reputation": 163, "user_id": 3371795, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6368731915cac6f09e0e525f60d61684?s=128&d=identicon&r=PG", "display_name": "Narayana", "link": "https://stackoverflow.com/users/3371795/narayana"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1472047797, "post_id": 39124589, "comment_id": 65596902, "body": "@spickermann Sorry Im a linux admin, Busy playing around with stuff, I put my ruby code in but I have no idea about anything ruby really."}], "answers": [{"tags": [], "owner": {"reputation": 167, "user_id": 6421446, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/9ddc6555e8a1e939d28cdc97919987ad?s=128&d=identicon&r=PG&f=1", "display_name": "Sessho", "link": "https://stackoverflow.com/users/6421446/sessho"}, "is_accepted": false, "score": 1, "last_activity_date": 1472046469, "last_edit_date": 1472046469, "creation_date": 1472045995, "answer_id": 39124950, "question_id": 39124589, "link": "https://stackoverflow.com/questions/39124589/translate-curl-to-ruby-new-relic-api/39124950#39124950", "title": "Translate Curl to Ruby (New Relic API)", "body": "<p>In Ruby, you can simply get the output of a command by using backticks (<code>`</code>), you only had to escape the special characters, like in every other string. So it would be: </p>\n\n<pre><code>`curl -X GET 'https://api.newrelic.com/v2/servers.json' -H 'X-Api-Key:12345689' -i -G -d 'filter[host]=server1'`\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 163, "user_id": 3371795, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6368731915cac6f09e0e525f60d61684?s=128&d=identicon&r=PG", "display_name": "Narayana", "link": "https://stackoverflow.com/users/3371795/narayana"}, "edited": false, "score": 0, "creation_date": 1472047986, "post_id": 39125281, "comment_id": 65597015, "body": "Hey man, Thanks for you answer, I have tried your code and get the following error. <code>&#47;System&#47;Library&#47;Frameworks&#47;Ruby.framework&#47;Versions&#47;2.0&#47;usr&#47;l&zwnj;&#8203;ib&#47;ruby&#47;2.0.0&#47;net&#47;pr&zwnj;&#8203;otocol.rb:153:in </code>read_nonblock&#39;: end of file reached (EOFError) `"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 163, "user_id": 3371795, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6368731915cac6f09e0e525f60d61684?s=128&d=identicon&r=PG", "display_name": "Narayana", "link": "https://stackoverflow.com/users/3371795/narayana"}, "edited": false, "score": 0, "creation_date": 1472054943, "post_id": 39125281, "comment_id": 65601916, "body": "ah that&#39;s usually an ssl issue - I updated my answer."}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": true, "score": 2, "last_activity_date": 1472054930, "last_edit_date": 1472054930, "creation_date": 1472046853, "answer_id": 39125281, "question_id": 39124589, "link": "https://stackoverflow.com/questions/39124589/translate-curl-to-ruby-new-relic-api/39125281#39125281", "title": "Translate Curl to Ruby (New Relic API)", "body": "<p>Should look something like this:</p>\n\n<pre><code>require 'net/http'\n\nuri = URI('https://api.newrelic.com/v2/servers.json')\nuri.query = URI.encode_www_form({ 'filter[host]' =&gt; 'server1' })\nreq = Net::HTTP::Get.new(uri)\nreq['X-Api-Key'] = '123456789'\n\nhttp = Net::HTTP.new(uri.hostname, uri.port)\nhttp.use_ssl = true\nresponse =  http.request(req)\np response.read_body\n</code></pre>\n"}], "owner": {"reputation": 163, "user_id": 3371795, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/6368731915cac6f09e0e525f60d61684?s=128&d=identicon&r=PG", "display_name": "Narayana", "link": "https://stackoverflow.com/users/3371795/narayana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 39125281, "answer_count": 2, "score": 0, "last_activity_date": 1472054930, "creation_date": 1472045004, "last_edit_date": 1472047758, "question_id": 39124589, "link": "https://stackoverflow.com/questions/39124589/translate-curl-to-ruby-new-relic-api", "title": "Translate Curl to Ruby (New Relic API)", "body": "<p>I am extremly new to ruby, but I am playing around with it. Could someone help me translate this curl command to Ruby ?</p>\n\n<p>I have been having a difficult time trying to adapt other ruby examples to fit my needs.</p>\n\n<pre><code>  curl -X GET 'https://api.newrelic.com/v2/servers.json' \\\n     -H 'X-Api-Key:12345689' -i \\\n     -G -d 'filter[host]=server1' \n</code></pre>\n\n<p>Ruby Code:</p>\n\n<pre><code>require 'net/http'\n\nuri = URI.parse('https://api.newrelic.com/v2/servers.json')\nrequest = Net::HTTP::Get.new uri.request_uri\n\nres = Net::HTTP.start(uri.host, uri.port,\n     :use_ssl =&gt; uri.scheme == 'https') {|http| http.request request}\n\nrequest.initialize_http_header({'X-Api-Key' =&gt; '12345689'})\nrequest.initialize_http_header({'Accept' =&gt; 'application/json'})\nrequest.initialize_http_header({'Content-Type' =&gt; 'application/json'})\nrequest.set_form_data({\"filter[host]\" =&gt; \"server1\"})\n\n\nresponse = res.request(request)\n</code></pre>\n\n<p>Error Message:</p>\n\n<pre><code>test.rb:16:in `&lt;main&gt;': undefined method `request' for #&lt;Net::HTTPUnauthorized 401 Unauthorized readbody=true&gt; (NoMethodError)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 3, "creation_date": 1472046195, "post_id": 39124491, "comment_id": 65595532, "body": "what&#39;s in this file? <code>config&#47;initializers&#47;errbit.rb</code>"}, {"owner": {"reputation": 115, "user_id": 6642855, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ivpLm.jpg?s=128&g=1", "display_name": "Sachin", "link": "https://stackoverflow.com/users/6642855/sachin"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1472101530, "post_id": 39124491, "comment_id": 65618705, "body": "I have added errbit.rb also. Please check it"}, {"owner": {"reputation": 115, "user_id": 6642855, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ivpLm.jpg?s=128&g=1", "display_name": "Sachin", "link": "https://stackoverflow.com/users/6642855/sachin"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1472300990, "post_id": 39124491, "comment_id": 65703662, "body": "Rails.application.initialize! command in environment.rb is loading files twice in the initializer and also routes.rb .I found its not the issue of errbit.rb . Issue occured as Airbrake is configured twice(as I said all files in initailizer is loading twice)"}], "owner": {"reputation": 115, "user_id": 6642855, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/ivpLm.jpg?s=128&g=1", "display_name": "Sachin", "link": "https://stackoverflow.com/users/6642855/sachin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 160, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472288602, "creation_date": 1472044744, "last_edit_date": 1472288602, "question_id": 39124491, "link": "https://stackoverflow.com/questions/39124491/rspec-test-in-rails-error", "title": "Rspec test in rails error", "body": "<p>I am newbie in rspec test.</p>\n\n<p>I have a file <strong>/spec/models/class_spec.rb</strong>. The content of the file is</p>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe Class, :type =&gt; :model do\n  #pending \"add some examples to (or delete) #{__FILE__}\"\n  before(:each) do\n    @my_class=Factory.create(:class, params)\n  end\nend\n</code></pre>\n\n<p>I also have a <strong>/spec/rails_helper</strong> file. When I run rspec in command line</p>\n\n<pre><code>command : rspec spec/models/class_spec.rb\n</code></pre>\n\n<p>I gets the following error</p>\n\n<pre><code>/usr/local/rvm/gems/ruby-2.3.1/gems/airbrake-ruby-1.4.4/lib/airbrake-ruby.rb:102:in `configure': the 'default' notifier was already configured (Airbrake::Error)\nfrom /home/akhil/test-prjct/ver3/this_prjct/config/initializers/errbit.rb:1:in `&lt;top (required)&gt;'\nfrom /usr/local/rvm/gems/ruby-2.3.1/gems/activesupport-4.2.1/lib/active_support/dependencies.rb:268:in `load'\nfrom /usr/local/rvm/gems/ruby-2.3.1/gems/activesupport-4.2.1/lib/active_support/dependencies.rb:268:in `block in load'\nfrom /usr/local/rvm/gems/ruby-2.3.1/gems/activesupport-4.2.1/lib/active_support/dependencies.rb:240:in `load_dependency'\nfrom /usr/local/rvm/gems/ruby-2.3.1/gems/activesupport-4.2.1/lib/active_support/dependencies.rb:268:in `load'\n</code></pre>\n\n<p>Can someone tell me about issue and also give a link to a tutorial for learning to write test codes using rspec. Thanks in advance</p>\n\n<p>My gem list is </p>\n\n<pre><code>group :development, :test do\n  gem \"rails-erd\"\n  gem 'letter_opener'\n  gem 'spring'\n  gem 'faker'\n  gem 'pry-rails'\n  gem 'pry-byebug'\n  gem 'rspec-rails'\n  gem 'factory_girl_rails'\nend\n</code></pre>\n\n<p>errbit.rb file has following content</p>\n\n<pre><code>Airbrake.configure do |config|\n   config.host = 'https://192.168.2.143:3000'\n   config.project_id = -1\n   config.project_key = '76068df1155420d2658i35a75o95gk26'\n   config.environment = Rails.env\n   config.ignore_environments = %w(development test)\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes", "acts-as-votable"], "comments": [{"owner": {"reputation": 784, "user_id": 4800709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IG6C4.jpg?s=128&g=1", "display_name": "Navin", "link": "https://stackoverflow.com/users/4800709/navin"}, "edited": false, "score": 0, "creation_date": 1472044011, "post_id": 39124124, "comment_id": 65593876, "body": "In your controller upvote method @post is nil that&#39;s why you got this error."}, {"owner": {"reputation": 33, "user_id": 6709102, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/98e12d242f1a0f44d48fa9c9f375a023?s=128&d=identicon&r=PG&f=1", "display_name": "Bikal", "link": "https://stackoverflow.com/users/6709102/bikal"}, "reply_to_user": {"reputation": 784, "user_id": 4800709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IG6C4.jpg?s=128&g=1", "display_name": "Navin", "link": "https://stackoverflow.com/users/4800709/navin"}, "edited": false, "score": 0, "creation_date": 1472044533, "post_id": 39124124, "comment_id": 65594297, "body": "Thanks everyone for the quick response, really appreciate your help."}], "answers": [{"tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 0, "last_activity_date": 1472044182, "creation_date": 1472044182, "answer_id": 39124277, "question_id": 39124124, "link": "https://stackoverflow.com/questions/39124124/nomethoderror-in-postscontrollerupvote-undefined-method-upvote-by-for-nilnil/39124277#39124277", "title": "NoMethodError in PostsController#upvote undefined method `upvote_by&#39; for nil:NilClass", "body": "<blockquote>\n  <p>NoMethodError in PostsController#upvote undefined method `upvote_by'\n  for nil:NilClass</p>\n</blockquote>\n\n<p>The error is because you didn't initialized <code>@post</code> in <code>upvote</code> method so <code>@post</code> is <em>nil</em></p>\n\n<pre><code>def upvote\n  @post = Post.find(params[:id])\n  @post.upvote_by current_user\n  redirect_to :back\nend\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 6709102, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/98e12d242f1a0f44d48fa9c9f375a023?s=128&d=identicon&r=PG&f=1", "display_name": "Bikal", "link": "https://stackoverflow.com/users/6709102/bikal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 227, "favorite_count": 0, "accepted_answer_id": 39124277, "answer_count": 1, "score": 0, "last_activity_date": 1472044182, "creation_date": 1472043790, "question_id": 39124124, "link": "https://stackoverflow.com/questions/39124124/nomethoderror-in-postscontrollerupvote-undefined-method-upvote-by-for-nilnil", "title": "NoMethodError in PostsController#upvote undefined method `upvote_by&#39; for nil:NilClass", "body": "<p><a href=\"http://i.stack.imgur.com/VHaji.png\" rel=\"nofollow\">screenshot</a></p>\n\n<blockquote>\n  <p>Currently I'm using acts_as_votable gem along with bootstrp-sass gem,I want to upvote the post when glyphicon icon is clicked, instead it throws me above errors.\n  This is my posts_controller.rb file</p>\n</blockquote>\n\n<pre><code>class PostsController &lt; ApplicationController\nbefore_action :authenticate_user!, except: [:index, :show]\n\n  def search\n    if params[:search].present?\n        @posts = Post.search(params[:search])\n    else\n        @posts = Post.all\n    end \n  end\n\n  def index\n    @posts = Post.all.order('created_at DESC')      \n  end\n\n  def new   \n    @post = Post.new    \n  end\n\n  def create\n    @post = Post.new(post_params)\n\n    if @post.save   \n        redirect_to @post\n    else\n        render 'new'\n    end\n  end\n\n  def show\n    @post = Post.find(params[:id])      \n  end\n\n  def edit\n    @post = Post.find(params[:id])      \n  end\n\n  def update\n    @post = Post.find(params[:id])\n\n    if @post.update(params[:post].permit(:title, :date, :time, :location))\n        redirect_to @post\n    else\n        render 'edit'\n    end \n  end\n\n  def destroy\n    @post = Post.find(params[:id])\n    @post.destroy\n\n    redirect_to root_path       \n  end\n\n  def upvote\n    @post.upvote_by current_user\n    redirect_to :back\n  end\n\n  private\n  def post_params\n    params.require(:post).permit(:title, :date, :time, :location)\n  end\nend\n</code></pre>\n\n<blockquote>\n  <p>This is my show.html.erb file</p>\n</blockquote>\n\n<pre><code>&lt;div id=\"post_content\"&gt;\n&lt;h1 class=\"title\"&gt;\n    &lt;%= @post.title %&gt;\n&lt;/h1&gt;\n\n&lt;p class=\"date\"&gt;\n    Submitted &lt;%= time_ago_in_words(@post.created_at) %&gt; Ago\n    &lt;% if user_signed_in? %&gt;\n    | &lt;%= link_to 'Edit', edit_post_path(@post) %&gt;\n    | &lt;%= link_to 'Delete', post_path(@post), method: :delete, data: { confirm: 'Are you sure?' } %&gt;\n    &lt;% end %&gt;\n&lt;/p&gt;\n\n&lt;p class=\"date\"&gt;\n    &lt;%= @post.date %&gt;\n&lt;/p&gt;\n\n&lt;p class=\"time\"&gt;\n    &lt;%= @post.time %&gt;\n&lt;/p&gt;\n\n&lt;p class=\"location\"&gt;\n    &lt;%= @post.location %&gt;\n&lt;/p&gt;\n\n&lt;div id=\"comments\"&gt;\n\n  &lt;div class=\"btn-group pull-left\"&gt;\n    &lt;%= link_to like_post_path(@post), method: :put, class: \"btn btn-default\" do %&gt;\n      &lt;span class=\"glyphicon glyphicon-heart\"&gt;&lt;/span&gt;\n      &lt;%= @post.get_upvotes.size %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n\n    &lt;h2&gt;&lt;%= @post.comments.count %&gt; Comments&lt;/h2&gt; \n    &lt;%= render @post.comments %&gt;\n\n    &lt;h3&gt;Add a comment:&lt;/h3&gt;\n    &lt;%= render \"comments/form\" %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<blockquote>\n  <p>This is my routes.rb file</p>\n</blockquote>\n\n<pre><code>    Rails.application.routes.draw do\n\n    mount RailsAdmin::Engine =&gt; '/admin', as: 'rails_admin'\n    devise_for :users\n      resources :posts do\n       resources :comments\n       collection do\n         get 'search'\n       end\n\n       member do\n            put \"like\", to: \"posts#upvote\"\n       end\n    end\n\n   root \"posts#index\"\n\n   get '/about', to: 'pages#about'\nend\n</code></pre>\n\n<blockquote>\n  <p>And this is my post model</p>\n</blockquote>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n\n   acts_as_votable\n   searchkick\n   has_many :comments, dependent: :destroy\n   validates :title, presence: true, length: {minimum: 5}\n   validates :date, :time, :location, presence: true\n   belongs_to :user\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 5181996, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/s8ALP.jpg?s=128&g=1", "display_name": "anti-k", "link": "https://stackoverflow.com/users/5181996/anti-k"}, "edited": false, "score": 0, "creation_date": 1472044597, "post_id": 39124074, "comment_id": 65594349, "body": "Ok I&#39;ll try!! I&#39;m so tired, thanks for helping!Should I also add turbolinks cause I removed them or jquery-turbolinks is enough? Sorry saw in your answer you require turbolinks"}, {"owner": {"reputation": 197, "user_id": 5181996, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/s8ALP.jpg?s=128&g=1", "display_name": "anti-k", "link": "https://stackoverflow.com/users/5181996/anti-k"}, "edited": false, "score": 0, "creation_date": 1472045120, "post_id": 39124074, "comment_id": 65594713, "body": "No that did not help ((("}, {"owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "reply_to_user": {"reputation": 197, "user_id": 5181996, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/s8ALP.jpg?s=128&g=1", "display_name": "anti-k", "link": "https://stackoverflow.com/users/5181996/anti-k"}, "edited": false, "score": 1, "creation_date": 1472045553, "post_id": 39124074, "comment_id": 65595048, "body": "see <code>turbolinks</code> is concept  that makes navigating your web application faster <a href=\"https://github.com/turbolinks/turbolinks\" rel=\"nofollow noreferrer\">Turbolinks</a>. and about other thing Give me some time. will revert to you."}, {"owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "reply_to_user": {"reputation": 197, "user_id": 5181996, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/s8ALP.jpg?s=128&g=1", "display_name": "anti-k", "link": "https://stackoverflow.com/users/5181996/anti-k"}, "edited": false, "score": 1, "creation_date": 1472047200, "post_id": 39124074, "comment_id": 65596410, "body": "will you please check my answer"}, {"owner": {"reputation": 197, "user_id": 5181996, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/s8ALP.jpg?s=128&g=1", "display_name": "anti-k", "link": "https://stackoverflow.com/users/5181996/anti-k"}, "edited": false, "score": 0, "creation_date": 1472048739, "post_id": 39124074, "comment_id": 65597548, "body": "FILNALLY! It worked! Thanks a lot !! It was the third Way!!! There is till one small question, I&#39;ve edited my question, could you have a glance on it?"}], "tags": [], "owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "is_accepted": true, "score": 1, "last_activity_date": 1472051261, "last_edit_date": 1472051261, "creation_date": 1472043664, "answer_id": 39124074, "question_id": 39123949, "link": "https://stackoverflow.com/questions/39123949/request-ajax-is-not-changing-a-page/39124074#39124074", "title": "request ajax is not changing a page", "body": "<p>you need to add <code>gem 'turbolinks'</code> and add <code>//= require turbolinks</code> in <code>app/assets/javascripts/application.js</code></p>\n\n<p><strong>First way:</strong> Not only we need to listen for <code>DOM ready</code> but we need also to listen for <code>'page\"load'</code> as well. As my answer is respect to Jquery as I don't know <code>Coffee-Script</code> but you could change accordingly.</p>\n\n<pre><code>function initialize(){\n    $('#your_id').click( function(){\n    });\n}\n$(document).ready(initialize);\n$(document).on('page:load', initialize);\n</code></pre>\n\n<hr>\n\n<p><strong>Second way:</strong></p>\n\n<p><strong>1:</strong> You have to require <code>jquery-turbolinks gem</code> in your <code>Gemfile</code>.</p>\n\n<p><strong>2:</strong> Edit you <code>app/assets/javascripts/application.js</code> file</p>\n\n<pre><code>//= require jquery\n//= require jquery.turbolinks\n//= require turbolinks\n</code></pre>\n\n<p>N.B: You just add <code>jquery.turbolinks</code> right after <code>jquery</code> in the js file.</p>\n\n<hr>\n\n<p><strong>Third Way:</strong> bind event on <code>Document</code> object. </p>\n\n<pre><code>function checkAlert(){\n        // ...\n    }\n$(document).on('click', '#owner_active', checkAlert);\n</code></pre>\n\n<p>Hope this help you!</p>\n"}], "owner": {"reputation": 197, "user_id": 5181996, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/s8ALP.jpg?s=128&g=1", "display_name": "anti-k", "link": "https://stackoverflow.com/users/5181996/anti-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 39124074, "answer_count": 1, "score": 0, "last_activity_date": 1480786561, "creation_date": 1472043346, "last_edit_date": 1480786561, "question_id": 39123949, "link": "https://stackoverflow.com/questions/39123949/request-ajax-is-not-changing-a-page", "title": "request ajax is not changing a page", "body": "<p>I do have a problem. Turbolinks are off\nhere I create a post</p>\n\n<pre><code>$ -&gt;\n  createBooks = (res)-&gt;\n    result = JST[\"templates/create_book\"]\n             title: res.book.title\n             author: res.book.author\n             description: res.book.description\n             id: res.book.id\n    result\n\n $('.new_book').bind 'ajax:success', (e, data, status, xhr) -&gt;    \n    res = $.parseJSON(xhr.responseText)    \n    result = createBooks(res)                           \n    $('.drafts').append(result)\n</code></pre>\n\n<p>everything works ok. I get a link like this on my page </p>\n\n<pre><code> &lt;a class=\"unpublish\"  data-method=\"post\" rel=\"nofollow\" data-remote=\"true\" data-id=\"#{@id}\" href=\"/books/14/unpublish\" &gt;Draft&lt;/a&gt;\n</code></pre>\n\n<p>here is my skim template</p>\n\n<pre><code>&lt;hr&gt;\n&lt;p&gt;#{@title}&lt;/p&gt;\n&lt;p&gt;#{@author}&lt;/p&gt;\n&lt;p&gt;#{@description}&lt;/p&gt;\n&lt;div class=\"publishing\" id=\"book_#{@id}\"\"\n  &lt;a class=\"publish\" href=\"/books/#{@id}/publish\" data-method=\"post\"  rel=\"nofollow\"  data-remote=\"true\" data-id=\"#{@id}\"&gt;Publish&lt;/a&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>But then when I try to click on this link nothing visible happens on the page, but xhr is sent with a propper status, no errors. Its a mystery for me.\nHer is my listener</p>\n\n<pre><code>  $('.publish').bind 'ajax:success', (e, data, status, xhr) -&gt; \n    e.preventDefault()    \n    res = $.parseJSON(xhr.responseText)\n    result = publishBooks(res)\n    alert(result)\n    book_id = \"#book_\" + $(this).data('id')\n    $(book_id).html(result)\n</code></pre>\n\n<p>I dersperatly need some help. Any help. When I reload the page everything again works ok</p>\n\n<p>Thaks to monsieur VKatz\nI finally have a working ecsample!!!\nlook like this</p>\n\n<pre><code>ready = -&gt;\n   createBooks = (res)-&gt;\n      result = JST[\"templates/create_book\"]\n         title: res.book.title\n         author: res.book.author\n         description: res.book.description\n         id: res.book.id\n    result\n\n  publishBooks = (res)-&gt; \n    result = JST[\"templates/publish\"]  \n      time: res.book.published_at\n      id: res.book.id\n    result\n\n  unpublishBooks = (res)-&gt; \n    result = JST[\"templates/unpublish\"]      \n      id: res.book.id\n    result\n\n  $('.new_book').bind 'ajax:success', (e, data, status, xhr) -&gt;    \n    res = $.parseJSON(xhr.responseText)    \n    result = createBooks(res)                           \n    $('.drafts').append(result)\n\n  $('.publish').bind 'ajax:success', (e, data, status, xhr) -&gt;     \n    res = $.parseJSON(xhr.responseText)\n    result = publishBooks(res)    \n    book_id = \"#book_\" + $(this).data('id')\n    $(book_id).html(result)\n\n  $('.unpublish').bind 'ajax:success', (e, data, status, xhr) -&gt;\n     e.preventDefault()\n     alert('okko okko') \n\n$(document).ready(ready)\n$(document).on('page:load', ready)\n$(document).on('page:update', ready)\n$(document).on('click', '.unpublish', ready);\n</code></pre>\n\n<p>now its working but only for class unpublished? should I set this stuff for every class like \"published\" etc ???</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "rubygems"], "comments": [{"owner": {"reputation": 1185, "user_id": 2099148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d451ee2c3307e3419d6a3b2cc2d2c31d?s=128&d=identicon&r=PG", "display_name": "M_G", "link": "https://stackoverflow.com/users/2099148/m-g"}, "edited": false, "score": 0, "creation_date": 1472041110, "post_id": 39123071, "comment_id": 65591729, "body": "Could you post your session controller code?"}, {"owner": {"reputation": 229, "user_id": 5620542, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2d10a49df5fb38ec8a4bfa4a3bb3d6f1?s=128&d=identicon&r=PG&f=1", "display_name": "aschmid", "link": "https://stackoverflow.com/users/5620542/aschmid"}, "reply_to_user": {"reputation": 1185, "user_id": 2099148, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d451ee2c3307e3419d6a3b2cc2d2c31d?s=128&d=identicon&r=PG", "display_name": "M_G", "link": "https://stackoverflow.com/users/2099148/m-g"}, "edited": false, "score": 0, "creation_date": 1472041281, "post_id": 39123071, "comment_id": 65591856, "body": "i generated this with rails generate devise:controllers. and the authorize lines are from myself (for cancancan)"}, {"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1472044236, "post_id": 39123071, "comment_id": 65594058, "body": "There&#39;s plenty documentation on how to do this on devise wiki page"}, {"owner": {"reputation": 1195, "user_id": 1201917, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2bfbfc7322e119a59b09eefd2775e05e?s=128&d=identicon&r=PG", "display_name": "user1201917", "link": "https://stackoverflow.com/users/1201917/user1201917"}, "edited": false, "score": 0, "creation_date": 1472044964, "post_id": 39123071, "comment_id": 65594598, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3546289/override-devise-registrations-controller\">Override devise registrations controller</a>"}, {"owner": {"reputation": 1033, "user_id": 4759794, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-zX1a_FExhuM/AAAAAAAAAAI/AAAAAAAAAPM/4ZwB931MXzE/photo.jpg?sz=128", "display_name": "Augusto Samam&#233; Barrientos", "link": "https://stackoverflow.com/users/4759794/augusto-samam%c3%a9-barrientos"}, "edited": false, "score": 0, "creation_date": 1499794969, "post_id": 39123071, "comment_id": 77056710, "body": "Were you able to solve this? I have the exact same issue with the edit action in the registrations_controller. The controllers are overridden properly, that&#39;s not the issue. The issue is that the cancancan authorizations on these overridden controllers seem to have no effect."}], "owner": {"reputation": 229, "user_id": 5620542, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2d10a49df5fb38ec8a4bfa4a3bb3d6f1?s=128&d=identicon&r=PG&f=1", "display_name": "aschmid", "link": "https://stackoverflow.com/users/5620542/aschmid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1835, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1499812733, "creation_date": 1472040948, "last_edit_date": 1472043665, "question_id": 39123071, "link": "https://stackoverflow.com/questions/39123071/how-can-i-override-the-devise-controller", "title": "how can I override the devise controller", "body": "<p>I am trying to override the devise controller but my changes don't have any affects.</p>\n\n<p>this is my sessions_controller.rb for example</p>\n\n<pre><code>class Users::SessionsController &lt; Devise::SessionsController\n  # before_action :configure_sign_in_params, only: [:create]\n\n  # GET /resource/sign_in\n   def new\n     super\n     authorize! :new, @user\n   end\n\n  # POST /resource/sign_in\n   def create\n     super\n     authorize! :create, @user\n   end\n\n  # DELETE /resource/sign_out\n  # def destroy\n  #   super\n  # end\n\n  # protected\n\n  # If you have extra params to permit, append them to the sanitizer.\n  # def configure_sign_in_params\n  #   devise_parameter_sanitizer.permit(:sign_in, keys: [:attribute])\n  # end\nend\n</code></pre>\n\n<p>this should take the def new of the 'normal' sessions controller and add the 2nd line to it.</p>\n\n<p>the link of the original session_controller on <a href=\"https://github.com/plataformatec/devise/blob/master/app/controllers/devise/sessions_controller.rb\" rel=\"nofollow\">github</a></p>\n\n<p>and this is my routes.rb</p>\n\n<pre><code>    Rails.application.routes.draw do\n  resources :sessions\n  resources :corsin_lists\n  resources :fileuploads do\n    collection { post :import }\n  end\n\n  root 'documents#index'\n  resources :documents\n  resources :entries\n\n  resources :documents do\n    member do\n      get :entries\n    end\n  end\n  devise_for :users, :controllers =&gt; {:sessions =&gt; \"users_sessions\"}\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "serialization", "yaml", "rails-activerecord"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1472040846, "post_id": 39122966, "comment_id": 65591535, "body": "JFYI, parentheses are not a part of syntax for ranges. Can be just <code>MyModel.create(my_column: 0..2)</code>"}, {"owner": {"reputation": 853, "user_id": 3083321, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b89a0aec6a8d868f2d37ae7e2d911e24?s=128&d=identicon&r=PG&f=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/3083321/mat"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1472041276, "post_id": 39122966, "comment_id": 65591850, "body": "@SergioTulentsev : indeed, I just have this habit of putting them for readability."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1472041653, "post_id": 39122966, "comment_id": 65592092, "body": "Yep, won&#39;t hurt. :)"}], "owner": {"reputation": 853, "user_id": 3083321, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b89a0aec6a8d868f2d37ae7e2d911e24?s=128&d=identicon&r=PG&f=1", "display_name": "Mat", "link": "https://stackoverflow.com/users/3083321/mat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1472041828, "creation_date": 1472040663, "last_edit_date": 1472041828, "question_id": 39122966, "link": "https://stackoverflow.com/questions/39122966/rails-serialize-ruby-range", "title": "Rails : serialize Ruby range", "body": "<p>I'm running Rails 3.2.17 (also tried it with 3.2.22).\nI have trouble with serialization of a ruby Range in my model:</p>\n\n<pre><code>class MyModel &lt; ActiveRecord::Base\n  attr_accessible :my_column\n  serialize :my_column, Range\nend\n</code></pre>\n\n<p>When I try to create an record like this:</p>\n\n<pre><code>MyModel.create()\n# Or like this\nMyModel.create({my_column: (0..2)})\n</code></pre>\n\n<p>I have this error:</p>\n\n<pre><code>ArgumentError: wrong number of arguments (0 for 2..3)\n</code></pre>\n\n<p>How can I solve this?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I have found a way like this:</p>\n\n<pre><code>class MyModel &lt; ActiveRecord::Base\n  attr_accessible :my_column\n  # NO MORE SERIALIZE\n\n  def my_column=(val)\n    self[:my_column] = YAML.dump(val)\n  end\n\n  def my_column\n    YAML.load(super || YAML.dump(nil))\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1472040413, "post_id": 39122685, "comment_id": 65591216, "body": "How are you going to use this?"}, {"owner": {"reputation": 11713, "user_id": 1153747, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/df9d48b6e2ae6cdedf4c39c2e58df851?s=128&d=identicon&r=PG", "display_name": "Boris Stitnicky", "link": "https://stackoverflow.com/users/1153747/boris-stitnicky"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1472479733, "post_id": 39122685, "comment_id": 65755536, "body": "Like this: <code>$ ruby -e &#39;require &quot;sy&quot;; puts 42.kWh.in :MJ&#39;</code> And while I can&#39;t avoid requiring <code>sy</code> gem, I&#39;d like to avoid writing <code>puts</code>..."}, {"owner": {"reputation": 11713, "user_id": 1153747, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/df9d48b6e2ae6cdedf4c39c2e58df851?s=128&d=identicon&r=PG", "display_name": "Boris Stitnicky", "link": "https://stackoverflow.com/users/1153747/boris-stitnicky"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1472479862, "post_id": 39122685, "comment_id": 65755628, "body": "I encourage more answer to this question..."}], "answers": [{"comments": [{"owner": {"reputation": 11713, "user_id": 1153747, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/df9d48b6e2ae6cdedf4c39c2e58df851?s=128&d=identicon&r=PG", "display_name": "Boris Stitnicky", "link": "https://stackoverflow.com/users/1153747/boris-stitnicky"}, "edited": false, "score": 0, "creation_date": 1472040806, "post_id": 39122924, "comment_id": 65591502, "body": "Thanks. Just to be sure, so <code>&#47;usr&#47;local&#47;bin</code> is the right place to put this sorts of scripts in?"}, {"owner": {"reputation": 11713, "user_id": 1153747, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/df9d48b6e2ae6cdedf4c39c2e58df851?s=128&d=identicon&r=PG", "display_name": "Boris Stitnicky", "link": "https://stackoverflow.com/users/1153747/boris-stitnicky"}, "edited": false, "score": 0, "creation_date": 1472041090, "post_id": 39122924, "comment_id": 65591714, "body": "Also, what if I wanted to pass further command options to my <code>rubyoneliner</code> script?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 11713, "user_id": 1153747, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/df9d48b6e2ae6cdedf4c39c2e58df851?s=128&d=identicon&r=PG", "display_name": "Boris Stitnicky", "link": "https://stackoverflow.com/users/1153747/boris-stitnicky"}, "edited": false, "score": 0, "creation_date": 1472041367, "post_id": 39122924, "comment_id": 65591906, "body": "<code>&#47;usr&#47;local&#47;bin</code> is fine, yes. Personal scripts are usually stored in <code>~&#47;bin</code>, but the latter is not included to the <code>$PATH</code> by default on all distros. The second question: if there are other options to be specifically treated, you probably should slice the last parameter in <code>rubyoneliner</code> and construct the call to <code>ruby</code> more carefully."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1472040550, "creation_date": 1472040550, "answer_id": 39122924, "question_id": 39122685, "link": "https://stackoverflow.com/questions/39122685/how-to-shirk-print-puts-in-ruby-oneliners/39122924#39122924", "title": "How to shirk print / puts in Ruby oneliners?", "body": "<p>It is impossible with ruby command line switches, but it\u2019s easily achievable with shell:</p>\n\n<pre><code>\u2b80 cat /usr/local/bin/rubyoneliner\n#!/bin/sh\nruby -e \"puts $@\"\n\n\u2b80 rubyoneliner '1 + 1'\n2\n</code></pre>\n\n<p>or with bash/zsh function.</p>\n"}], "owner": {"reputation": 11713, "user_id": 1153747, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/df9d48b6e2ae6cdedf4c39c2e58df851?s=128&d=identicon&r=PG", "display_name": "Boris Stitnicky", "link": "https://stackoverflow.com/users/1153747/boris-stitnicky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 39122924, "answer_count": 1, "score": 0, "last_activity_date": 1472040550, "creation_date": 1472039838, "question_id": 39122685, "link": "https://stackoverflow.com/questions/39122685/how-to-shirk-print-puts-in-ruby-oneliners", "title": "How to shirk print / puts in Ruby oneliners?", "body": "<p>Consider oneliner</p>\n\n<pre><code>$ ruby -e 'puts 1 + 1'\n</code></pre>\n\n<p>which uses <code>ruby</code> as a command-line calculator. I would like to write the expression without <code>puts</code>. Is there a switch for it in <code>ruby</code> command?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "gemfile"], "comments": [{"owner": {"reputation": 779, "user_id": 1010746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f12532c1224ff2ab2260e853258deddb?s=128&d=identicon&r=PG", "display_name": "neongrau", "link": "https://stackoverflow.com/users/1010746/neongrau"}, "edited": false, "score": 1, "creation_date": 1472039036, "post_id": 39122339, "comment_id": 65590181, "body": "look at the backtrace and the line number of the first file of your own code (model or controller i&#39;d assume). and then post that line if you can&#39;t figure it out."}, {"owner": {"reputation": 73, "user_id": 2039356, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fe6300cac22c23e5b68ab95b210447b6?s=128&d=identicon&r=PG", "display_name": "Ritesh", "link": "https://stackoverflow.com/users/2039356/ritesh"}, "reply_to_user": {"reputation": 779, "user_id": 1010746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f12532c1224ff2ab2260e853258deddb?s=128&d=identicon&r=PG", "display_name": "neongrau", "link": "https://stackoverflow.com/users/1010746/neongrau"}, "edited": false, "score": 0, "creation_date": 1472039273, "post_id": 39122339, "comment_id": 65590344, "body": "user_monitor.rb:6:in `alias_method&#39; Line is :- alias_method :create_without_user, :create"}, {"owner": {"reputation": 779, "user_id": 1010746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f12532c1224ff2ab2260e853258deddb?s=128&d=identicon&r=PG", "display_name": "neongrau", "link": "https://stackoverflow.com/users/1010746/neongrau"}, "edited": false, "score": 0, "creation_date": 1472039324, "post_id": 39122339, "comment_id": 65590393, "body": "and what code is in that file at that line?"}, {"owner": {"reputation": 73, "user_id": 2039356, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fe6300cac22c23e5b68ab95b210447b6?s=128&d=identicon&r=PG", "display_name": "Ritesh", "link": "https://stackoverflow.com/users/2039356/ritesh"}, "reply_to_user": {"reputation": 779, "user_id": 1010746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f12532c1224ff2ab2260e853258deddb?s=128&d=identicon&r=PG", "display_name": "neongrau", "link": "https://stackoverflow.com/users/1010746/neongrau"}, "edited": false, "score": 0, "creation_date": 1472039369, "post_id": 39122339, "comment_id": 65590422, "body": "Line is :- alias_method :create_without_user, :create"}, {"owner": {"reputation": 73, "user_id": 2039356, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fe6300cac22c23e5b68ab95b210447b6?s=128&d=identicon&r=PG", "display_name": "Ritesh", "link": "https://stackoverflow.com/users/2039356/ritesh"}, "reply_to_user": {"reputation": 779, "user_id": 1010746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f12532c1224ff2ab2260e853258deddb?s=128&d=identicon&r=PG", "display_name": "neongrau", "link": "https://stackoverflow.com/users/1010746/neongrau"}, "edited": false, "score": 0, "creation_date": 1472039948, "post_id": 39122339, "comment_id": 65590830, "body": "neongrau any luck?"}, {"owner": {"reputation": 779, "user_id": 1010746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f12532c1224ff2ab2260e853258deddb?s=128&d=identicon&r=PG", "display_name": "neongrau", "link": "https://stackoverflow.com/users/1010746/neongrau"}, "edited": false, "score": 0, "creation_date": 1472040270, "post_id": 39122339, "comment_id": 65591092, "body": "not really. maybe add the full code of user_monitor.rb to your question"}, {"owner": {"reputation": 779, "user_id": 1010746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f12532c1224ff2ab2260e853258deddb?s=128&d=identicon&r=PG", "display_name": "neongrau", "link": "https://stackoverflow.com/users/1010746/neongrau"}, "edited": false, "score": 0, "creation_date": 1472040494, "post_id": 39122339, "comment_id": 65591282, "body": "there seems to be a change with that in rails 4.2 -&gt; <a href=\"http://stackoverflow.com/questions/24962480/where-has-create-create-record-gone-in-activerecord\" title=\"where has create create record gone in activerecord\">stackoverflow.com/questions/24962480/&hellip;</a>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1472061330, "post_id": 39122339, "comment_id": 65605448, "body": "<a href=\"http://apidock.com/rails/ActiveRecord/Base/create/class\" rel=\"nofollow noreferrer\">ActiveRecord::Base.create</a> has been replaced with <a href=\"http://apidock.com/rails/ActiveRecord/Relation/create\" rel=\"nofollow noreferrer\">ActiveRecord::Relation.create</a>"}, {"owner": {"reputation": 73, "user_id": 2039356, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fe6300cac22c23e5b68ab95b210447b6?s=128&d=identicon&r=PG", "display_name": "Ritesh", "link": "https://stackoverflow.com/users/2039356/ritesh"}, "edited": false, "score": 0, "creation_date": 1472115793, "post_id": 39122339, "comment_id": 65626270, "body": "@maxpleaner..Somehow create method od AR:Relation.create is not getting called. Any idea how to check the exact create method under Active REcord?"}], "owner": {"reputation": 73, "user_id": 2039356, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fe6300cac22c23e5b68ab95b210447b6?s=128&d=identicon&r=PG", "display_name": "Ritesh", "link": "https://stackoverflow.com/users/2039356/ritesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472038996, "creation_date": 1472038836, "last_edit_date": 1472038996, "question_id": 39122339, "link": "https://stackoverflow.com/questions/39122339/rails-version-migration", "title": "Rails version migration", "body": "<p>I'm trying to upgrade my rails app from <code>Rails 3 to Rails 4.2</code>.\nSeems like many changes have been incorporated and due to which i'm getting following error:-</p>\n\n<pre><code>Uncaught exception: undefined method `create' for class `ActiveRecord::Base'\n</code></pre>\n\n<p>Unable to figure out a fix for it.</p>\n\n<p>Any help would be highly appreciated.</p>\n"}, {"tags": ["mysql", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 22293, "user_id": 767881, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/zFYAF.png?s=128&g=1", "display_name": "Ravinder Reddy", "link": "https://stackoverflow.com/users/767881/ravinder-reddy"}, "edited": false, "score": 0, "creation_date": 1472039927, "post_id": 39122278, "comment_id": 65590816, "body": "post your table structure ..."}], "answers": [{"comments": [{"owner": {"reputation": 5156, "user_id": 609959, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/WwYtC.jpg?s=128&g=1", "display_name": "loganathan", "link": "https://stackoverflow.com/users/609959/loganathan"}, "edited": false, "score": 0, "creation_date": 1472102043, "post_id": 39122932, "comment_id": 65618862, "body": "is their any way to calculate the time difference between the Up &amp; down records, based on the timestamp column &quot;created_at&quot; in the table?"}, {"owner": {"reputation": 1288, "user_id": 6455274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WTkMz.jpg?s=128&g=1", "display_name": "zakhefron", "link": "https://stackoverflow.com/users/6455274/zakhefron"}, "reply_to_user": {"reputation": 5156, "user_id": 609959, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/WwYtC.jpg?s=128&g=1", "display_name": "loganathan", "link": "https://stackoverflow.com/users/609959/loganathan"}, "edited": false, "score": 0, "creation_date": 1472102927, "post_id": 39122932, "comment_id": 65619157, "body": "Could you explain it"}, {"owner": {"reputation": 5156, "user_id": 609959, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/WwYtC.jpg?s=128&g=1", "display_name": "loganathan", "link": "https://stackoverflow.com/users/609959/loganathan"}, "edited": false, "score": 0, "creation_date": 1472105526, "post_id": 39122932, "comment_id": 65620131, "body": "I want to display the service up timings and down timings for given date range. For example total up time is sum of uptime time difference and down time is sum of total down  time based on the timestamp column &quot;created_at&quot;."}, {"owner": {"reputation": 1288, "user_id": 6455274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WTkMz.jpg?s=128&g=1", "display_name": "zakhefron", "link": "https://stackoverflow.com/users/6455274/zakhefron"}, "reply_to_user": {"reputation": 5156, "user_id": 609959, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/WwYtC.jpg?s=128&g=1", "display_name": "loganathan", "link": "https://stackoverflow.com/users/609959/loganathan"}, "edited": false, "score": 0, "creation_date": 1472105767, "post_id": 39122932, "comment_id": 65620235, "body": "Group by uptime and downtime and find the corresponding sums and find the difference."}], "tags": [], "owner": {"reputation": 1288, "user_id": 6455274, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WTkMz.jpg?s=128&g=1", "display_name": "zakhefron", "link": "https://stackoverflow.com/users/6455274/zakhefron"}, "is_accepted": false, "score": 0, "last_activity_date": 1472040575, "creation_date": 1472040575, "answer_id": 39122932, "question_id": 39122278, "link": "https://stackoverflow.com/questions/39122278/how-to-calculate-time-based-on-particular-column/39122932#39122932", "title": "how to calculate time based on particular column", "body": "<pre><code>SELECT \n voltage,\n (CASE \n WHEN NULLIF(voltage,'') IS NULL THEN 'Service is down'\n ELSE 'Service is up'\n END) as service\nFROM services;\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>SELECT \n voltage,\n IF(voltage, 'Service is up', 'Service is down') as service\nFROM services;\n</code></pre>\n\n<blockquote>\n  <p><a href=\"http://sqlfiddle.com/#!9/f696d4/2\" rel=\"nofollow\">SQL Demo</a></p>\n</blockquote>\n"}], "owner": {"reputation": 5156, "user_id": 609959, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/WwYtC.jpg?s=128&g=1", "display_name": "loganathan", "link": "https://stackoverflow.com/users/609959/loganathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472040575, "creation_date": 1472038672, "question_id": 39122278, "link": "https://stackoverflow.com/questions/39122278/how-to-calculate-time-based-on-particular-column", "title": "how to calculate time based on particular column", "body": "<p>I have a column called \"voltage\" in \"services\" table, and the value will be vary from 0 to 100.</p>\n\n<p>Based on the voltage value I have to display the uptime/downtim line chart. For example if the voltage is NIL/0 then the service is down. If the voltage > 0, then the service is up. What is the best logic to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "authentication", "devise", "warden"], "comments": [{"owner": {"reputation": 331, "user_id": 2423894, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8d77a61bba378fa7f3edd86260be5b59?s=128&d=identicon&r=PG", "display_name": "tmn4jq", "link": "https://stackoverflow.com/users/2423894/tmn4jq"}, "edited": false, "score": 0, "creation_date": 1472037569, "post_id": 39121841, "comment_id": 65589200, "body": "Can it help? <a href=\"http://stackoverflow.com/questions/23793597/how-to-access-devise-current-user-in-a-rspec-feature-test\" title=\"how to access devise current user in a rspec feature test\">stackoverflow.com/questions/23793597/&hellip;</a>"}, {"owner": {"reputation": 564, "user_id": 1063998, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c63266bcec44bdb115df81ddfc67fca?s=128&d=identicon&r=PG", "display_name": "user1063998", "link": "https://stackoverflow.com/users/1063998/user1063998"}, "reply_to_user": {"reputation": 331, "user_id": 2423894, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/8d77a61bba378fa7f3edd86260be5b59?s=128&d=identicon&r=PG", "display_name": "tmn4jq", "link": "https://stackoverflow.com/users/2423894/tmn4jq"}, "edited": false, "score": 0, "creation_date": 1472205500, "post_id": 39121841, "comment_id": 65669844, "body": "I&#39;m afraid I don&#39;t think that helps. I&#39;m not having trouble calling current_user."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1473101145, "post_id": 39121841, "comment_id": 66003597, "body": "is <code>.current_user</code> a method that attempts to log the user in, or is it an attr_reader for an instance variable? If the former, then it seems what you&#39;re describing is the expected behavior."}, {"owner": {"reputation": 564, "user_id": 1063998, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c63266bcec44bdb115df81ddfc67fca?s=128&d=identicon&r=PG", "display_name": "user1063998", "link": "https://stackoverflow.com/users/1063998/user1063998"}, "edited": false, "score": 0, "creation_date": 1473287982, "post_id": 39121841, "comment_id": 66087923, "body": "<code>current_user</code> is a method that will attempt to log the user in. If you run the test I outlined in the question with a completely empty controller action, the test will still pass"}, {"owner": {"reputation": 2537, "user_id": 5371321, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ZFyVo.jpg?s=128&g=1", "display_name": "Narasimha Reddy - Geeker", "link": "https://stackoverflow.com/users/5371321/narasimha-reddy-geeker"}, "edited": false, "score": 0, "creation_date": 1473324840, "post_id": 39121841, "comment_id": 66099813, "body": "How you are handling sessions in controller? are you using rails <code>session</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 564, "user_id": 1063998, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c63266bcec44bdb115df81ddfc67fca?s=128&d=identicon&r=PG", "display_name": "user1063998", "link": "https://stackoverflow.com/users/1063998/user1063998"}, "edited": false, "score": 0, "creation_date": 1473440227, "post_id": 39385562, "comment_id": 66157434, "body": "Thanks for the response. I do believe that <code>current_user</code> can update the state of the user. I&#39;ve added a sample test in my original question that I believe illustrates the issue."}, {"owner": {"reputation": 564, "user_id": 1063998, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c63266bcec44bdb115df81ddfc67fca?s=128&d=identicon&r=PG", "display_name": "user1063998", "link": "https://stackoverflow.com/users/1063998/user1063998"}, "edited": false, "score": 0, "creation_date": 1473445647, "post_id": 39385562, "comment_id": 66160141, "body": "I just had a thought, maybe there is a before_action/filter that is doing something, but I can&#39;t check right now. Perhaps you are right"}, {"owner": {"reputation": 1247, "user_id": 4465690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bKh0W.jpg?s=128&g=1", "display_name": "Olli", "link": "https://stackoverflow.com/users/4465690/olli"}, "reply_to_user": {"reputation": 564, "user_id": 1063998, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c63266bcec44bdb115df81ddfc67fca?s=128&d=identicon&r=PG", "display_name": "user1063998", "link": "https://stackoverflow.com/users/1063998/user1063998"}, "edited": false, "score": 0, "creation_date": 1473690626, "post_id": 39385562, "comment_id": 66226811, "body": "@user1063998: have you had a chance to test my suggestion? I have invested quite a bit of time to come up with the solution (at least I think, it is the solution). In any case, it was a good exercise, but I would prefer it to have it checked by the person who has asked."}], "tags": [], "owner": {"reputation": 1247, "user_id": 4465690, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bKh0W.jpg?s=128&g=1", "display_name": "Olli", "link": "https://stackoverflow.com/users/4465690/olli"}, "is_accepted": false, "score": 2, "last_activity_date": 1473778308, "last_edit_date": 1495542271, "creation_date": 1473321566, "answer_id": 39385562, "question_id": 39121841, "link": "https://stackoverflow.com/questions/39121841/rails-test-checking-if-user-is-signed-in-with-devise/39385562#39385562", "title": "Rails test - checking if user is signed in with Devise", "body": "<p><strong>Solution with minimal changes to proposed code in the question:</strong></p>\n\n<p>You need to initialize the system before the test starts. Try prepending following code before your i<code>t 'must be able to sign in a user' do</code> code:</p>\n\n<pre><code>before (:each) do\n  user = FactoryGirl.create(:user)\n  sign_out user\nend\n</code></pre>\n\n<p>This should turn your test into a valid test for your post controller. </p>\n\n<p><strong>Explanation:</strong></p>\n\n<p>My assumption is, that your test above always succeeds, because the user is already signed in (by other tests run before this one). You could verify this by using <code>byebug</code> in the line after <code>it</code> and run <code>current_user</code> in <code>bybug's</code> console. If it is not <code>nil</code>, the user is already signed in, which is invalidating your test. </p>\n\n<p>Note, that (different from what is discussed above in the comments), <code>current_user</code> does not change the status of the user; it is a read-only function.</p>\n\n<p><strong>Shorter/cleaner solution:</strong></p>\n\n<p>In my opinion, there is a a cleaner way to perform such a test like follows:</p>\n\n<pre><code>def sign_in_via_post(user)\n  post :create, format: :js, user: {email: user.email, password: user.password, remember_me: 0}\nend\n\n...\n\nbefore (:each) do\n  user = FactoryGirl.create(:user)\n  sign_out user\nend\n\nit 'must be able to sign in a user' do\n   { sign_in_via_post user }.should change { current_user }.from(nil).to(user)\nend\n</code></pre>\n\n<p>With the <code>should change from nil to user</code> statement, you verify, that the user was logged out before the test begins and that the user is logged in, after the test has been performed.</p>\n\n<p>Note, that the part </p>\n\n<pre><code>   { sign_in_via_post user }.should change { current_user }.from(nil).to(user)\n</code></pre>\n\n<p>is equivalent to the (maybe easier to understand) code</p>\n\n<pre><code>   { sign_in_via_post user }.should change { user_signed_in? }.from(false).to(true)\n</code></pre>\n\n<p>as discussed <a href=\"https://stackoverflow.com/questions/34042117/devise-rails-current-user-vs-user-signed-in\">here</a>.</p>\n"}], "owner": {"reputation": 564, "user_id": 1063998, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/4c63266bcec44bdb115df81ddfc67fca?s=128&d=identicon&r=PG", "display_name": "user1063998", "link": "https://stackoverflow.com/users/1063998/user1063998"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3251, "favorite_count": 1, "answer_count": 1, "score": 9, "last_activity_date": 1473778308, "creation_date": 1472037391, "last_edit_date": 1473440165, "question_id": 39121841, "link": "https://stackoverflow.com/questions/39121841/rails-test-checking-if-user-is-signed-in-with-devise", "title": "Rails test - checking if user is signed in with Devise", "body": "<p>I am trying to test that someone is able to login to my site by making a POST request to my <code>SessionsController</code>. I've seen this way recommended in a few places:</p>\n\n<pre><code>it 'must be able to sign in a user' do\n  user = create(:user)\n  post :create, format: :js, user: {email: user.email, password: user.password, remember_me: 0}\n  assert_response :success\n  @controller.current_user.must_equal user\nend\n</code></pre>\n\n<p>But this test is not correct. Calling <code>@controller.current_user</code> will attempt to authenticate the user using the posted parameters and will return <code>user</code> if the supplied email/password is correct. There is no guarantee that the <code>create</code> action is actually calling <code>sign_in</code> or <code>current_user</code>.</p>\n\n<p>Even if I re-write the test to check that these methods are called, it's possible that other methods could be called e.g. <code>sign_out</code>.</p>\n\n<p>Is there a more definitive way to ultimately check if a user is logged in, and if so, who the user is?</p>\n\n<p>EDIT -</p>\n\n<p>For example, the following test will pass</p>\n\n<pre><code>it 'must sign in a user' do\n   @controller.current_user.must_equal nil\n   post :create, format: :js, user: {email: @user.email, password: @user.password, remember_me: 0}\n   assert_response :success\n   @controller.current_user.must_equal @user\nend\n</code></pre>\n\n<p>when the SessionsController#create action is:</p>\n\n<pre><code>def create\n  respond_to do |format|\n      format.js {\n        render nothing: true, status: 200\n      }\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "windows"], "comments": [{"owner": {"reputation": 182, "user_id": 3605817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c278ac0b45517a82558f2aa745e93583?s=128&d=identicon&r=PG&f=1", "display_name": "nloveladyallen", "link": "https://stackoverflow.com/users/3605817/nloveladyallen"}, "edited": false, "score": 0, "creation_date": 1473099267, "post_id": 39121644, "comment_id": 66002936, "body": "What do the log files say?"}], "owner": {"reputation": 21, "user_id": 6751760, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-3F7SJyL8nlc/AAAAAAAAAAI/AAAAAAAAABk/jB0eI1RjRwg/photo.jpg?sz=128", "display_name": "Gowthami Ravi", "link": "https://stackoverflow.com/users/6751760/gowthami-ravi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1472232766, "creation_date": 1472036876, "last_edit_date": 1472232766, "question_id": 39121644, "link": "https://stackoverflow.com/questions/39121644/ruby-version-2-3-1-the-bundle-install-shows-error", "title": "Ruby version 2.3.1 the bundle install shows error", "body": "<pre><code>  C:\\Sites\\addfee&gt;rails s\n</code></pre>\n\n<p>Could not find gem 'rails (= 4.2.5.1) x64-mingw32' in any of the gem sources        in your Gemfile or available on this machine.\n    Run <code>bundle install</code> to install missing gems.</p>\n\n<pre><code>then I did this\nC:\\Sites\\addfee&gt;bundle install\nFetching gem metadata from https://rubygems.org/\nFetching version metadata from https://rubygems.org/\nFetching dependency metadata from https://rubygems.org/\nResolving dependencies.............................................\nUsing rake 11.2.2\nUsing i18n 0.7.0\nUsing json 1.8.3\nUsing minitest 5.9.0\nUsing thread_safe 0.3.5\nUsing builder 3.2.2\nUsing erubis 2.7.0\nUsing mini_portile2 2.1.0\nUsing pkg-config 1.1.7\nUsing rack 1.6.4\nUsing mime-types-data 3.2016.0521\nUsing arel 6.0.3\nInstalling debug_inspector 0.0.2 with native extensions\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\n C:/Ruby23-x64/bin/ruby.exe extconf.rb\n Invalid argument - C:/Ruby23-x64/bin/ruby.exe extconf.rb 2&gt;&amp;1\n\n Gem files will remain installed in C:/Ruby23-x64/lib/ruby/gems/2.3.0/gems/debug_inspector-0.0.2 for inspection.\n Results logged to C:/Ruby23-x64/lib/ruby/gems/2.3.0/extensions/x64-mingw32/2.3.0/debug_inspector-0.0.2/gem_make.out\nUsing bundler 1.12.5\nInstalling byebug 9.0.5 with native extensions\n\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\nC:/Ruby23-x64/bin/ruby.exe extconf.rb\nInvalid argument - C:/Ruby23-x64/bin/ruby.exe extconf.rb 2&gt;&amp;1\n\nGem files will remain installed in C:/Ruby23-lib/ruby/gems/2.3.0/gems/byebug-9.0.5 for inspection.\nResults logged to C:/Ruby23-x64/lib/ruby/gems/2.3.0/extensions/x64-mingw32/2.3.0/byebug-9.0.5/gem_make.out\nUsing coffee-script-source 1.10.0\nUsing execjs 2.7.0\nUsing thor 0.19.1\nUsing concurrent-ruby 1.0.2\nUsing multi_json 1.12.1\nUsing sass 3.4.22\nUsing tilt 2.0.5\nUsing sqlite3 1.3.11\nUsing turbolinks-source 5.0.0\nUsing rdoc 4.2.2\nUsing tzinfo 1.2.2\nUsing nokogiri 1.6.8\nUsing rack-test 0.6.3\nUsing mime-types 3.1\nAn error occurred while installing debug_inspector (0.0.2), and Bundler    cannot continue.\nMake sure that `gem install debug_inspector -v '0.0.2'` succeeds before bundling.\n</code></pre>\n"}, {"tags": ["ruby", "ruby-2.3"], "comments": [{"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 4, "creation_date": 1472038618, "post_id": 39121532, "comment_id": 65589942, "body": "Works for me. I&#39;d guess that copying your code to the online IDE changes whitespace somewhere. Can you save your code in the online IDE and show us a link that reproduces the problem, or better yet copy your code to the online IDE and back and reproduce the problem on your machine?"}], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 5524147, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/50a6d6e745da37098243f20ca4cdcc25?s=128&d=identicon&r=PG&f=1", "display_name": "san A", "link": "https://stackoverflow.com/users/5524147/san-a"}, "edited": false, "score": 0, "creation_date": 1472040047, "post_id": 39121821, "comment_id": 65590915, "body": "Its very neat, however I have to understand how it works.  But it does not answer my question. I want to know the reason for the behavior that I was getting ?"}], "tags": [], "owner": {"reputation": 17582, "user_id": 280143, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/46ac5380f2c25f9901f83964916c0226?s=128&d=identicon&r=PG", "display_name": "casraf", "link": "https://stackoverflow.com/users/280143/casraf"}, "is_accepted": false, "score": -2, "last_activity_date": 1472037312, "creation_date": 1472037312, "answer_id": 39121821, "question_id": 39121532, "link": "https://stackoverflow.com/questions/39121532/different-output-for-same-ruby-code/39121821#39121821", "title": "Different output for same Ruby Code?", "body": "<p>This code could be a lot simpler... Try something like this (I didn't bother pasting the <code>morse_dict</code> global) (p.s. try to avoid using global vars like this):</p>\n\n<pre><code>def decode_morse(morse_code)\n  morse_dict = { ... } # placeholder, use your actual map here\n  out = []\n  morse_code.split('       ').each do |w|\n    w.split(' ').each do |l|\n      out.push morse_dict.invert[l] # actual letter\n    end\n    out.push ' ' # after each word\n  end\n  out.join.strip # final output\nend\n</code></pre>\n"}], "owner": {"reputation": 179, "user_id": 5524147, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/50a6d6e745da37098243f20ca4cdcc25?s=128&d=identicon&r=PG&f=1", "display_name": "san A", "link": "https://stackoverflow.com/users/5524147/san-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472037935, "creation_date": 1472036586, "question_id": 39121532, "link": "https://stackoverflow.com/questions/39121532/different-output-for-same-ruby-code", "title": "Different output for same Ruby Code?", "body": "<p>I have written a code to convert morse code into characters. The thing is when I run this code on terminal, and through IRB, I get output as expected, but when I run  the same code on online IDE, I get different output.</p>\n\n<p>Code:</p>\n\n<pre><code>$morse_dict = {\n  \"a\" =&gt; \".-\",\n  \"b\" =&gt; \"-...\",\n  \"c\" =&gt; \"-.-.\",\n  \"d\" =&gt; \"-..\",\n  \"e\" =&gt; \".\",\n  \"f\" =&gt; \"..-.\",\n  \"g\" =&gt; \"--.\",\n  \"h\" =&gt; \"....\",\n  \"i\" =&gt; \"..\",\n  \"j\" =&gt; \".---\",\n  \"k\" =&gt; \"-.-\",\n  \"l\" =&gt; \".-..\",\n  \"m\" =&gt; \"--\",\n  \"n\" =&gt; \"-.\",\n  \"o\" =&gt; \"---\",\n  \"p\" =&gt; \".--.\",\n  \"q\" =&gt; \"--.-\",\n  \"r\" =&gt; \".-.\",\n  \"s\" =&gt; \"...\",\n  \"t\" =&gt; \"-\",\n  \"u\" =&gt; \"..-\",\n  \"v\" =&gt; \"...-\",\n  \"w\" =&gt; \".--\",\n  \"x\" =&gt; \"-..-\",\n  \"y\" =&gt; \"-.--\",\n  \"z\" =&gt; \"--..\",\n  \" \" =&gt; \" \",\n  \"1\" =&gt; \".----\",\n  \"2\" =&gt; \"..---\",\n  \"3\" =&gt; \"...--\",\n  \"4\" =&gt; \"....-\",\n  \"5\" =&gt; \".....\",\n  \"6\" =&gt; \"-....\",\n  \"7\" =&gt; \"--...\",\n  \"8\" =&gt; \"---..\",\n  \"9\" =&gt; \"----.\",\n  \"0\" =&gt; \"-----\"\n}\n\ndef decodeMorse(morseCode)\n  words = morseCode.split('       ')\n  i=0\n  sentence = []\n  while i &lt; words.length\n    word = words[i].split(' ')\n    j = 0 \n    while j &lt; word.length\n      sentence.push($morse_dict.key(word[j]))\n      if word.length - j == 1\n        sentence.push(' ')  \n      end\n    j += 1\n  end\n  i += 1\n  end\n  sentence = sentence.join().upcase\n  return sentence  \nend\n\nsentence= decodeMorse('.... . -.--       .--- ..- -.. .')\nputs sentence\n</code></pre>\n\n<p>Output I get in console and IRB: <code>HEY JUDE</code>\nOutput I get in online editors: <code>HEYJUDE </code></p>\n\n<p>I dont understand why the in-space(HEY(space)JUDE) gets deleted and its appended at end in online editors(HEYJUDE(space)).</p>\n\n<p>To check my code further, I put some checks as <code> Iteration #{j} </code> in inner while loop, and I got very weird behavior. What I got in output was: </p>\n\n<pre><code>Iteration 1\nIteration 2\nIteration 3\nIteration 4\nIteration 5\nIteration 6\nIteration 7\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>Iteration 1\nIteration 2\nIteration 3\n\nIteration 1\nIteration 2\nIteration 3\nIteration 4 \n</code></pre>\n\n<p>Why this behavior ?\nI've tried my best to follow ruby syntax style, but I'm new!</p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": true, "score": 3, "last_activity_date": 1472044326, "creation_date": 1472044326, "answer_id": 39124327, "question_id": 39120840, "link": "https://stackoverflow.com/questions/39120840/how-to-share-rspec-let-variables-between-shared-contexts/39124327#39124327", "title": "How to share RSpec let variables between shared contexts?", "body": "<p>I'm not aware of a way to refer to the currently defined value of a <code>let</code> variable in a <code>let</code> block. (When I try it I get \"stack level too deep\".) I'd do what you're trying to do this way:</p>\n\n<pre><code>Rspec.shared_context 'JSON request' do\n  let(:common_headers) do\n    {\n      'Accept' =&gt; 'application/json'\n    }\n  end\n  let(:headers) { common_headers }\nend\n\nRspec.shared_context 'Authenticated request' do\n  let(:headers) do\n    common_headers.merge('Authorization' =&gt; \"Bearer #{token}\")\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "is_accepted": false, "score": 0, "last_activity_date": 1588696262, "creation_date": 1588696262, "answer_id": 61618161, "question_id": 39120840, "link": "https://stackoverflow.com/questions/39120840/how-to-share-rspec-let-variables-between-shared-contexts/61618161#61618161", "title": "How to share RSpec let variables between shared contexts?", "body": "<p>You can use <code>super()</code> to get the value of a predefined <code>let</code>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>RSpec.shared_context 'common' do\n  let(:foo) { 'foo' }\nend\n\nRSpec.describe 'test' do\n  include_context 'common'\n\n  context 'reversed' do\n    let(:foo) { super().reverse }\n\n    it 'works' do\n      expect(foo).to eq('oof')\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 10496, "user_id": 1971165, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/83df8da53f9c237578c95b0ac91c979c?s=128&d=identicon&r=PG", "display_name": "Marc Greenstock", "link": "https://stackoverflow.com/users/1971165/marc-greenstock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1120, "favorite_count": 1, "accepted_answer_id": 39124327, "answer_count": 2, "score": 2, "last_activity_date": 1588696262, "creation_date": 1472034724, "last_edit_date": 1472044428, "question_id": 39120840, "link": "https://stackoverflow.com/questions/39120840/how-to-share-rspec-let-variables-between-shared-contexts", "title": "How to share RSpec let variables between shared contexts?", "body": "<p>I'm trying to DRY my RSpec request specs by using shared contexts. I'd like to share <code>let</code> variables between shared contexts so that they inherit and extend from one another.</p>\n\n<pre><code>Rspec.shared_context 'JSON request' do\n  let(:headers) do\n    {\n      'Accept' =&gt; 'application/json'\n    }\n  end\nend\n\nRspec.shared_context 'Authenticated request' do\n  let(:headers) do\n    super().merge('Authorization' =&gt; \"Bearer #{token}\")\n  end\nend\n\nRspec.describe 'user management' do\n  let(:token) { create(:oauth_token) }\n\n  include_context 'JSON request'\n  include_context 'Authenticated request'\n\n  it 'responds with a 200 ok' do\n    get '/user', headers: headers\n    expect(response).to have_http_status(:ok)\n  end\nend\n</code></pre>\n\n<p>Declaring <code>token</code> works as expected, but using <code>super()</code> to override <code>headers</code> returns a <code>NoMethodError</code> suggesting <code>super()</code> is nil.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1472033191, "post_id": 39120003, "comment_id": 65586287, "body": "Is this method new? Did you restart the server after you added it? Maybe code reloading didn&#39;t quite work back then. Aside from this, I have no clues. Need repro."}, {"owner": {"reputation": 10274, "user_id": 930207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oy7Q3.png?s=128&g=1", "display_name": "mcfinnigan", "link": "https://stackoverflow.com/users/930207/mcfinnigan"}, "edited": false, "score": 0, "creation_date": 1472033586, "post_id": 39120003, "comment_id": 65586560, "body": "Dumb question, but what happens if you rename one of the methods so the names don&#39;t clash - does the issue persist?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1472034161, "post_id": 39120003, "comment_id": 65586948, "body": "I can see you are calling <code>Region.service_managers</code> but there no <b>class method</b> <code>service_managers</code> in <code>Region</code> model. The one that <code>Region</code> model has is <b>instance method</b> <code>def service_managers</code>."}, {"owner": {"reputation": 1, "user_id": 6751697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/276d190884e649732c9b9993d1110260?s=128&d=identicon&r=PG&f=1", "display_name": "Starjams", "link": "https://stackoverflow.com/users/6751697/starjams"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1472034263, "post_id": 39120003, "comment_id": 65587014, "body": "@SergioTulentsev This is all legacy code that has inexplicably broken somehow so I&#39;m currently picking up the pieces lol"}, {"owner": {"reputation": 1, "user_id": 6751697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/276d190884e649732c9b9993d1110260?s=128&d=identicon&r=PG&f=1", "display_name": "Starjams", "link": "https://stackoverflow.com/users/6751697/starjams"}, "edited": false, "score": 0, "creation_date": 1472034275, "post_id": 39120003, "comment_id": 65587021, "body": "@micfinnigan Yeah, tried that as well actually and it yields the same result (I&#39;ll edit and add it)"}, {"owner": {"reputation": 1, "user_id": 6751697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/276d190884e649732c9b9993d1110260?s=128&d=identicon&r=PG&f=1", "display_name": "Starjams", "link": "https://stackoverflow.com/users/6751697/starjams"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1472034534, "post_id": 39120003, "comment_id": 65587198, "body": "@Pavan There are two versions; using <code>class &lt;&lt; self</code> and then defining methods is the same as using <code>def self.method_name</code>, they both make class methods"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1472034534, "post_id": 39120003, "comment_id": 65587199, "body": "@Pavan: huh? There clearly <i>is</i> a class method. Read closer."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1472034695, "post_id": 39120003, "comment_id": 65587312, "body": "@Starjams: from your list of attempted things, we can clearly see that nothing affects the server. Is it possible that you restart one server, but actually exercise another?"}, {"owner": {"reputation": 1, "user_id": 6751697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/276d190884e649732c9b9993d1110260?s=128&d=identicon&r=PG&f=1", "display_name": "Starjams", "link": "https://stackoverflow.com/users/6751697/starjams"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1472034846, "post_id": 39120003, "comment_id": 65587423, "body": "@SergioTulentsev My changes do affect the server, if I change my code the server will display new text or if I remove code the server will crash etc so changes are definitely going through."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1472034997, "post_id": 39120003, "comment_id": 65587524, "body": "@Starjams: all the weirder then :)"}, {"owner": {"reputation": 1, "user_id": 6751697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/276d190884e649732c9b9993d1110260?s=128&d=identicon&r=PG&f=1", "display_name": "Starjams", "link": "https://stackoverflow.com/users/6751697/starjams"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1472035082, "post_id": 39120003, "comment_id": 65587598, "body": "@SergioTulentsev You&#39;re telling me!... I have no idea how this could be happening"}, {"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1472036738, "post_id": 39120003, "comment_id": 65588701, "body": "If you try adding a brand new method with a different name, right at the top of the <code>Region</code> class e.g <code>def new_thing</code>... is that method available from the debugger?"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1472039922, "post_id": 39120003, "comment_id": 65590812, "body": "Try this: Before the call, check whether <code>region.class.instance_methods.include?(:service_managers)</code> is true, and if it isn&#39;t, list the contents of <code>region.class.instance_methods</code>."}, {"owner": {"reputation": 1, "user_id": 6751697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/276d190884e649732c9b9993d1110260?s=128&d=identicon&r=PG&f=1", "display_name": "Starjams", "link": "https://stackoverflow.com/users/6751697/starjams"}, "reply_to_user": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1472054726, "post_id": 39120003, "comment_id": 65601794, "body": "@mikej Good call, I tried doing this and got the same no method error! The mystery deepens..."}, {"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1472054893, "post_id": 39120003, "comment_id": 65601884, "body": "intriguing mystery! it does sound like it&#39;s not using the <code>Region</code> class you think it is..."}, {"owner": {"reputation": 1, "user_id": 6751697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/276d190884e649732c9b9993d1110260?s=128&d=identicon&r=PG&f=1", "display_name": "Starjams", "link": "https://stackoverflow.com/users/6751697/starjams"}, "reply_to_user": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1472054911, "post_id": 39120003, "comment_id": 65601898, "body": "@user1934428 Did this and it was false. I listed all instance methods and noticed that it didn&#39;t include some of the other methods defined in <code>region.rb</code>! I tried <code>region.class.instance_methods.include?</code> and passed in a load of the instance methods defined and it always returned false. Consider me officially confused"}, {"owner": {"reputation": 1, "user_id": 6751697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/276d190884e649732c9b9993d1110260?s=128&d=identicon&r=PG&f=1", "display_name": "Starjams", "link": "https://stackoverflow.com/users/6751697/starjams"}, "reply_to_user": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1472054993, "post_id": 39120003, "comment_id": 65601959, "body": "@mikej That was one of my first thoughts but there is no other <code>Region</code> class in the whole project so I have no idea where it could be coming from"}, {"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1472055192, "post_id": 39120003, "comment_id": 65602077, "body": "have you got the code up on GitHub? I can take a quick look, just to see if I can spot anything?"}, {"owner": {"reputation": 1, "user_id": 6751697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/276d190884e649732c9b9993d1110260?s=128&d=identicon&r=PG&f=1", "display_name": "Starjams", "link": "https://stackoverflow.com/users/6751697/starjams"}, "reply_to_user": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 1, "creation_date": 1472055543, "post_id": 39120003, "comment_id": 65602288, "body": "@mikej I wish I could but it&#39;s code a project owned by my workplace so I don&#39;t think they would appreciate me putting it up publicly lol..."}, {"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1472057062, "post_id": 39120003, "comment_id": 65603137, "body": "Are there any methods on <code>Region</code> that give any clues where it&#39;s coming from? e.g. <code>region.class.instance_methods - Object.instance_methods</code>?"}, {"owner": {"reputation": 4288, "user_id": 527152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c784b2e1c3fb28d8bad8f50ca0282b4?s=128&d=identicon&r=PG", "display_name": "Azolo", "link": "https://stackoverflow.com/users/527152/azolo"}, "edited": false, "score": 0, "creation_date": 1472070256, "post_id": 39120003, "comment_id": 65610142, "body": "This seems like a weird <code>autoload</code> issue to to me, especially mentioning an older version of Rails. I don&#39;t remember how exactly the initialization process works earlier versions of Rails, but can you try putting in <code>require &quot;#{RAILS_ROOT}&#47;app&#47;models&#47;region&quot;</code> in the end of the initializer? Also, that will break reloading the file per request."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1472106136, "post_id": 39120003, "comment_id": 65620398, "body": "@Starjams: Methods can be dynamically added and removed from a class. Is the class <code>Region</code> defined in only one place, or is it opened and modified again somewhere? Alternatively: Do you have two versions of the <code>rb</code> file which you <code>require</code> to get the class loaded in your LOADPATH, and by chance the one picked up doesn&#39;t have this method defined?"}, {"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1472474995, "post_id": 39120003, "comment_id": 65752323, "body": "@Starjams did you ever manage to get to the bottom of this?"}, {"owner": {"reputation": 1, "user_id": 6751697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/276d190884e649732c9b9993d1110260?s=128&d=identicon&r=PG&f=1", "display_name": "Starjams", "link": "https://stackoverflow.com/users/6751697/starjams"}, "reply_to_user": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1472567595, "post_id": 39120003, "comment_id": 65797633, "body": "@mikej I haven&#39;t yet... I passed it on to a more senior colleague and I&#39;ll see if he solved it and get back with an answer if I find one. This being on Rails 1/Ruby 1.8.7 I imagine this is some kind of bug that has been long since fixed."}], "owner": {"reputation": 1, "user_id": 6751697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/276d190884e649732c9b9993d1110260?s=128&d=identicon&r=PG&f=1", "display_name": "Starjams", "link": "https://stackoverflow.com/users/6751697/starjams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 501, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472056844, "creation_date": 1472032478, "last_edit_date": 1472056844, "question_id": 39120003, "link": "https://stackoverflow.com/questions/39120003/nomethoderror-undefined-method-on-correct-class-when-method-does-exist", "title": "NoMethodError: undefined method on correct class when method DOES exist", "body": "<p>As the title describes I am having an error in Rails where it is throwing a <code>NoMethodError</code> on a an instance of a class where the method DOES in fact exist.</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>NoMethodError in My#payroll_charts\n\nShowing app/views/my/payroll_charts.rhtml where line #9 raised:\nundefined method `service_managers' for #&lt;Region:0x7f6cab0243a0&gt;\n</code></pre>\n\n<p>As you can see this is not for a <code>NilClass</code> and is an instance of the class I DO want, the <code>Region</code> class.</p>\n\n<p>The exact code causing the error in the view is:</p>\n\n<p><code>app/views/my/payroll_charts.rhtml</code></p>\n\n<pre class=\"lang-erb prettyprint-override\"><code>&lt;% region = @login.real_region %&gt;\n&lt;% if region %&gt;\n  &lt;% @service_managers = region.service_managers %&gt;\n&lt;% else %&gt;\n  &lt;% @service_managers = Region.service_managers %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>And finally, here is the <code>Region</code> class:</p>\n\n<p><code>app/models/region.rb</code></p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>class Region &lt; ActiveRecord::Base\n\n#... skiping lines for brevity ...\n\ndef service_managers\n  return self.service_mgrs.collect(&amp;:staff).compact\nend\n\n#... brevity ...\n\nclass &lt;&lt; self\n  #... other class methods ...\n  def service_managers\n    r = Region.find(:all)\n    return r.collect(&amp;:service_mgrs).flatten.collect(&amp;:staff).compact\n  end\n  #... other class methods ...\nend\n</code></pre>\n\n<p>As you can see there are two versions of the method, the class one and the instance one.<br>\nThe class level method works, eg the view code doesn't throw an error and the view renders as it should when <code>@login.real_region</code> in <code>nil</code> and <code>Region.service_managers</code> runs.<br>\nIt is the instance level method that is not found.</p>\n\n<p>FYI the <code>@login</code> object is an instance of the <code>Staff</code> class and <code>real_region</code> points to the <code>Region</code> class:</p>\n\n<p><code>app/models/staff.rb:</code></p>\n\n<pre><code>has_one :real_region, :class_name =&gt; \"Region\"\n</code></pre>\n\n<p>Things I have tried:</p>\n\n<ul>\n<li>I have looked for other places in the project where the class may have been reopened and didn't find any</li>\n<li>I have also looked for different <code>Region</code> classes in different Modules which I didn't find either.</li>\n<li>Accessing the <code>region</code> object in the console while the view is running using <code>&lt;% debugger %&gt;</code>, and it still couldn't access the <code>service_managers</code> method</li>\n<li>Checking if the method exists when running <code>region.methods</code>, it didn't</li>\n<li>Swapping the order of the class and instance level methods in <code>region.rb</code> in case they were interfering with each other, no change</li>\n<li>Multiple server restarts</li>\n<li>Renaming both of the methods in all instances so they aren't named the same</li>\n<li>Deleting the whole <code>region.rb</code> and re-adding it (just in case changes weren't being detected)</li>\n<li>Computer restart</li>\n<li>Removing <code>class &lt;&lt; self</code> and renaming all methods within it to <code>self.method_name</code> to make sure <code>class &lt;&lt; self</code> was working as expected</li>\n<li>Some other things I probably can't remember now</li>\n</ul>\n\n<p>This is all from some legacy code running on <code>Rails 1.2.3</code> and <code>Ruby 1.8.7</code>.</p>\n\n<p>Any help would be veeeery much appreciated, thank you.</p>\n\n<p>--- Update ---</p>\n\n<p>After accessing the <code>region</code> object in the console while the view is running using <code>&lt;% debugger %&gt;</code> I tried using <code>region.class.instance_methods - ActiveRecord::Base.instance_methods</code> to essentially find which instance methods are accessible from the <code>region</code> instance and are not ones originating from <code>ActiveRecord::Base</code><br>\nThe result:</p>\n\n<pre><code>=&gt; []\n</code></pre>\n\n<p>..................... So apparently zero instance methods are available that are not the ones inherited from <code>ActiveRecord::Base</code>. The mystery deepens.</p>\n"}, {"tags": ["ruby", "shell", "ssh"], "owner": {"reputation": 83, "user_id": 4484720, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ea3a126fc858051c65c991e37627470?s=128&d=identicon&r=PG&f=1", "display_name": "racunarix", "link": "https://stackoverflow.com/users/4484720/racunarix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1472032455, "creation_date": 1472032455, "question_id": 39119994, "link": "https://stackoverflow.com/questions/39119994/ruby-net-ssh-with-proxy-connection-to-router-channel-hangs", "title": "Ruby, net/ssh with proxy connection to router, channel hangs", "body": "<p>My current network setup is like this: \nLocalMachine &lt;---SSH---> Server &lt;---Telnet---> Router.\nI am trying to connect to the Router from LocalMachine via Server (direct connection is not possible, Server acts as sort of proxy). Ruby's net/ssh gem is used for the ssh connection to the Server.</p>\n\n<pre><code>require 'net/ssh'\n\n\n@hostname = \"10.16.96.40\"\n@username = \"server_username\"\n@password = \"server_password\"\n\nNet::SSH::start(@hostname, @username, :password =&gt; @password) do |session|\n    session.open_channel do |channel|\n        channel.send_channel_request \"shell\" do |ch, success|\n            if success\n                puts \"user shell started successfully\"\n            else\n                puts \"could not start user shell\"\n            end\n        end\n\n        channel.send_data(\"telnet 192.168.11.201\\n\")\n        channel.send_data(\"router_username\\n\")\n        channel.send_data(\"router_password\\n\")\n        channel.send_data(\"sh ip int brief\\n\")    \n\n    channel.on_data do |ch, data|\n            print data\n        end   \n    end     \n    session.loop\nend \n</code></pre>\n\n<p>The script gets connected to the router. It gets the printout. But then the session hangs when expected it to be closed. </p>\n\n<p>When I stop script execution manually with Ctrl+C I get the following message:</p>\n\n<pre><code>^C/usr/local/lib/ruby/gems/2.2.0/gems/net-ssh-3.2.0/lib/net/ssh/ruby_compat.rb:25:in `select': Interrupt\n    from /usr/local/lib/ruby/gems/2.2.0/gems/net-ssh-3.2.0/lib/net/ssh/ruby_compat.rb:25:in `io_select'\n    from /usr/local/lib/ruby/gems/2.2.0/gems/net-ssh-3.2.0/lib/net/ssh/connection/session.rb:210:in `process'\n    from /usr/local/lib/ruby/gems/2.2.0/gems/net-ssh-3.2.0/lib/net/ssh/connection/session.rb:170:in `block in loop'\n    from /usr/local/lib/ruby/gems/2.2.0/gems/net-ssh-3.2.0/lib/net/ssh/connection/session.rb:170:in `loop'\n    from /usr/local/lib/ruby/gems/2.2.0/gems/net-ssh-3.2.0/lib/net/ssh/connection/session.rb:170:in `loop'\n    from 25_net_ssh_channel_shell.rb:33:in `block in &lt;main&gt;'\n    from /usr/local/lib/ruby/gems/2.2.0/gems/net-ssh-3.2.0/lib/net/ssh.rb:240:in `start'\n    from 25_net_ssh_channel_shell.rb:9:in `&lt;main&gt;'\n</code></pre>\n\n<p>Any idea how to close the channel/session and get rid of the blinking cursor?</p>\n"}, {"tags": ["ruby", "web-applications", "automation", "watir", "watir-webdriver"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 2, "creation_date": 1472045852, "post_id": 39118994, "comment_id": 65595283, "body": "Based on the HTML you have provided, you do not have a select list. <code>select_list</code> is for interacting with <code>&lt;select&gt;</code> elements. You have a <code>div</code> and <code>a</code> elements that are styled to <i>look</i> like a select list."}], "answers": [{"comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 2, "creation_date": 1472066081, "post_id": 39129479, "comment_id": 65608038, "body": "Except that--as Justin pointed out in the comments--there is no <code>&lt;select&gt;</code> tag in the sample HTML."}, {"owner": {"reputation": 19, "user_id": 6384345, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/887bf738d76fcc749a5cd50fa26a7c87?s=128&d=identicon&r=PG&f=1", "display_name": "Hardik Bhatt", "link": "https://stackoverflow.com/users/6384345/hardik-bhatt"}, "edited": false, "score": 0, "creation_date": 1472205974, "post_id": 39129479, "comment_id": 65670134, "body": "In my HTML code there is no Select list so I am not able to write the script."}], "tags": [], "owner": {"reputation": 1720, "user_id": 6471733, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/be4e96b247d3862d042b84490a62d42e?s=128&d=identicon&r=PG", "display_name": "Muntasir Alam", "link": "https://stackoverflow.com/users/6471733/muntasir-alam"}, "is_accepted": true, "score": 0, "last_activity_date": 1472059346, "creation_date": 1472059346, "answer_id": 39129479, "question_id": 39118994, "link": "https://stackoverflow.com/questions/39118994/how-can-i-select-drop-down-menu-and-click-on-the-drop-down-item-with-watir-webdr/39129479#39129479", "title": "How can I select drop down menu and click on the drop down item with watir webdriver", "body": "<p>You need to use <code>select_list</code> for elements within a <code>select</code> tag as per the ruby docs suggest</p>\n\n<p>See more here\n<a href=\"http://www.rubydoc.info/github/watir/watir-classic/Watir/SelectList\" rel=\"nofollow\">Class::Watir::SelectList</a></p>\n"}], "owner": {"reputation": 19, "user_id": 6384345, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/887bf738d76fcc749a5cd50fa26a7c87?s=128&d=identicon&r=PG&f=1", "display_name": "Hardik Bhatt", "link": "https://stackoverflow.com/users/6384345/hardik-bhatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 544, "favorite_count": 0, "accepted_answer_id": 39129479, "answer_count": 1, "score": 0, "last_activity_date": 1472059346, "creation_date": 1472029667, "question_id": 39118994, "link": "https://stackoverflow.com/questions/39118994/how-can-i-select-drop-down-menu-and-click-on-the-drop-down-item-with-watir-webdr", "title": "How can I select drop down menu and click on the drop down item with watir webdriver", "body": "<p>My code to click on the Drop Down:</p>\n\n<pre><code>browser.select_list(:class =&gt; \"ui-select-match\").click\n</code></pre>\n\n<p>My Code to select from the list:</p>\n\n<pre><code>browser.select_list(:name =&gt; \"system-parameter\").clear\nputs browser.select_list(:name =&gt; \"system-parameter\").options\nbrowser.select_list(:name =&gt; \"system-parameter\").select(\"Brand\")\n</code></pre>\n\n<p>HTML to click on Drop down menu:</p>\n\n<pre><code>&lt;div class=\"ui-select-match\" ng-hide=\"$select.open\" ng-disabled=\"$select.disabled\" ng-class=\"{'btn-default-focus':$select.focus}\" placeholder=\"Select System Parameter\"&gt;\n    &lt;span tabindex=\"-1\" class=\"btn btn-default form-control ui-select-toggle\" aria-label=\"Select box activate\" ng-disabled=\"$select.disabled\" ng-click=\"$select.activate()\" style=\"outline: 0;\"&gt;\n    &lt;span ng-show=\"$select.isEmpty()\" class=\"ui-select-placeholder text-muted ng-binding\"&gt;Select System Parameter&lt;/span&gt; \n    &lt;span ng-hide=\"$select.isEmpty()\" class=\"ui-select-match-text pull-left ng-hide\" ng-class=\"{'ui-select-allow-clear': $select.allowClear &amp;amp;&amp;amp; !$select.isEmpty()}\" ng-transclude=\"\"&gt;\n    &lt;span class=\"ng-binding ng-scope\"&gt;&lt;/span&gt;\n    &lt;/span&gt; &lt;i class=\"caret pull-right\" ng-click=\"$select.toggle($event)\"&gt;\n    &lt;/i&gt; &lt;a ng-show=\"$select.allowClear &amp;amp;&amp;amp; !$select.isEmpty()\" aria-label=\"Select box clear\" style=\"margin-right: 10px\" ng-click=\"$select.clear($event)\" class=\"btn btn-xs btn-link pull-right ng-hide\"&gt;\n    &lt;i class=\"glyphicon glyphicon-remove\" aria-hidden=\"true\"&gt;\n    &lt;/i&gt;\n    &lt;/a&gt;\n    &lt;/span&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>HTML code to select from the list:</p>\n\n<pre><code>&lt;a href=\"javascript:void(0)\" class=\"ui-select-choices-row-inner\" uis-transclude-append=\"\"&gt;\n&lt;div ng-bind-html=\"constant.Value | highlight: $select.search\" name=\"Brand\" class=\"ng-binding ng-scope\"&gt;Brand&lt;/div&gt;\n&lt;/a&gt;\n\n&lt;a href=\"javascript:void(0)\" class=\"ui-select-choices-row-inner\" uis-transclude-append=\"\"&gt;\n&lt;div ng-bind-html=\"constant.Value | highlight: $select.search\" name=\"Group\" class=\"ng-binding ng-scope\"&gt;Group&lt;/div&gt;\n&lt;/a&gt;\n\n&lt;a href=\"javascript:void(0)\" class=\"ui-select-choices-row-inner\" uis-transclude-append=\"\"&gt;\n&lt;div ng-bind-html=\"constant.Value | highlight: $select.search\" name=\"Unit\" class=\"ng-binding ng-scope\"&gt;Unit&lt;/div&gt;\n&lt;/a&gt;\n</code></pre>\n\n<p>I am trying to click on the Drop-Down list and not able to select also from the list.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rspec-rails"], "answers": [{"comments": [{"owner": {"reputation": 552, "user_id": 2126997, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZzktY.jpg?s=128&g=1", "display_name": "Bungus", "link": "https://stackoverflow.com/users/2126997/bungus"}, "edited": false, "score": 0, "creation_date": 1472036727, "post_id": 39120723, "comment_id": 65588693, "body": "Thanks Stefan. This is what I ended up doing."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 1, "last_activity_date": 1472034378, "creation_date": 1472034378, "answer_id": 39120723, "question_id": 39118816, "link": "https://stackoverflow.com/questions/39118816/is-there-an-idiomatic-way-to-dry-up-repeated-method-calls-in-rspec/39120723#39120723", "title": "Is there an idiomatic way to dry up repeated method calls in RSpec", "body": "<p>You could use <a href=\"https://www.relishapp.com/rspec/rspec-core/v/3-5/docs/helper-methods/let-and-let\" rel=\"nofollow\"><code>let!</code></a> to define a memoized helper that is executed before each example:</p>\n\n<pre><code>RSpec.describe Grant do\n  let(:grant) { Grant.make }\n\n  describe \"#exchange!\" do\n    let!(:result) { grant.exchange! }\n\n    it \"destroys token\" do\n      expect(grant).to be_destroyed\n    end\n\n    it \"returns a Token\" do\n      expect(result).to be_a(Token)\n    end\n  end\nend\n</code></pre>\n\n<p>However, I personally prefer to call the method explicitly from within the example, just like in your code. It makes it easier to deal with the state before and after the invocation.</p>\n"}], "owner": {"reputation": 552, "user_id": 2126997, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZzktY.jpg?s=128&g=1", "display_name": "Bungus", "link": "https://stackoverflow.com/users/2126997/bungus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 39120723, "answer_count": 1, "score": 0, "last_activity_date": 1472034378, "creation_date": 1472029133, "last_edit_date": 1472030649, "question_id": 39118816, "link": "https://stackoverflow.com/questions/39118816/is-there-an-idiomatic-way-to-dry-up-repeated-method-calls-in-rspec", "title": "Is there an idiomatic way to dry up repeated method calls in RSpec", "body": "<p>When the same call is made repeatedly in the same describe block e.g.</p>\n\n<pre><code>RSpec.describe Grant do\n  let(:grant) { Grant.make }\n\n  describe \"#exchange!\" do\n    it \"destroys token\" do\n      grant.exchange! # dry me up!\n      expect(grant).to be_destroyed\n    end\n    it \"returns a Token\" do\n      expect(grant.exchange!).to be_a(Token) # dry me up!\n    end\n  end\nend\n</code></pre>\n\n<p>I want to dry up <code>grant.exchange!</code></p>\n\n<p>I've worked out how to do it with <code>subject</code>, but I know explicit subjects are smelly.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "foreign-keys", "migration"], "answers": [{"comments": [{"owner": {"reputation": 5017, "user_id": 2047418, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1d49bccfa9d2c633db6f854e67b88362?s=128&d=identicon&r=PG", "display_name": "Filip Bartuzi", "link": "https://stackoverflow.com/users/2047418/filip-bartuzi"}, "edited": false, "score": 1, "creation_date": 1508846917, "post_id": 39118751, "comment_id": 80766833, "body": "also: if column is already populated with data don&#39;t forget to migrate data as well (i.e. select all and then insert all)"}, {"owner": {"reputation": 5017, "user_id": 2047418, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1d49bccfa9d2c633db6f854e67b88362?s=128&d=identicon&r=PG", "display_name": "Filip Bartuzi", "link": "https://stackoverflow.com/users/2047418/filip-bartuzi"}, "reply_to_user": {"reputation": 788, "user_id": 2561325, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004097377441/picture?type=large", "display_name": "Ricardo Green", "link": "https://stackoverflow.com/users/2561325/ricardo-green"}, "edited": false, "score": 1, "creation_date": 1565683143, "post_id": 39118751, "comment_id": 101419062, "body": "@RicardoGreen what I would do: 1. rename column (admin_id -&gt; admin_id_copy); 2. add new column with name &quot;admin_id&quot;, this time with constraint. 3. Copy data from admin_id_copy to admin_id column (you can just iterate in migration through collection :) but remember it will take a while for big DB). 4. drop admin_id_copy table"}, {"owner": {"reputation": 1200, "user_id": 440811, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e8a7f9d6b81eb09628815eaefb28818?s=128&d=identicon&r=PG", "display_name": "Malte", "link": "https://stackoverflow.com/users/440811/malte"}, "edited": false, "score": 0, "creation_date": 1617463532, "post_id": 39118751, "comment_id": 118313108, "body": "Is migrating the data really necessary? I think this drops just the contraint, not the whole column (data). An alternative approach I used is to do everything directly in SQL (Postgres specific): <a href=\"https://stackoverflow.com/questions/10356484/how-to-add-on-delete-cascade-constraints\" title=\"how to add on delete cascade constraints\">stackoverflow.com/questions/10356484/&hellip;</a>"}], "tags": [], "owner": {"reputation": 5017, "user_id": 2047418, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1d49bccfa9d2c633db6f854e67b88362?s=128&d=identicon&r=PG", "display_name": "Filip Bartuzi", "link": "https://stackoverflow.com/users/2047418/filip-bartuzi"}, "is_accepted": true, "score": 12, "last_activity_date": 1472028960, "creation_date": 1472028960, "answer_id": 39118751, "question_id": 39118672, "link": "https://stackoverflow.com/questions/39118672/add-on-delete-to-already-existing-foreign-key-in-rails-migration/39118751#39118751", "title": "Add :on_delete to already existing foreign_key in rails migration", "body": "<p>You can remove and add foreign key in next migration:</p>\n\n<pre><code>class ChangeForgeinKeyOnUsersTable &lt; ActiveRecord::Migration[5.0]\n  def change\n    remove_foreign_key :users, column: :admin_id\n    add_foreign_key :users, :admins, column: :admin_id, on_delete: :nullify\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 5017, "user_id": 2047418, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/1d49bccfa9d2c633db6f854e67b88362?s=128&d=identicon&r=PG", "display_name": "Filip Bartuzi", "link": "https://stackoverflow.com/users/2047418/filip-bartuzi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1474, "favorite_count": 0, "accepted_answer_id": 39118751, "answer_count": 1, "score": 9, "last_activity_date": 1472028960, "creation_date": 1472028754, "question_id": 39118672, "link": "https://stackoverflow.com/questions/39118672/add-on-delete-to-already-existing-foreign-key-in-rails-migration", "title": "Add :on_delete to already existing foreign_key in rails migration", "body": "<p>I have already existing foreign key in database created this way:</p>\n\n<pre><code>class CreateUser &lt; ActiveRecord::Migration\n  def change\n    create_table do ... end\n    add_foreign_key :users, :admins, column: :admin_id\n  end\nend\n</code></pre>\n\n<p>but forgot to add <code>on_delete: :nullify</code>. Migration is already pushed &amp; used on production. I want to add new migration which will add cascale deleting for this PK constraint. How to achieve that? </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1472028828, "post_id": 39118625, "comment_id": 65583487, "body": "<code>a || b &amp;&amp; c</code> will evaluate <code>a</code> in the first place as well. Precedence matters if and only we are talking about <i>operations themselves</i>. Operands are evaluated from left to right in any case."}, {"owner": {"reputation": 3669, "user_id": 348987, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MBs6M.jpg?s=128&g=1", "display_name": "Christoph Petschnig", "link": "https://stackoverflow.com/users/348987/christoph-petschnig"}, "edited": false, "score": 1, "creation_date": 1472030453, "post_id": 39118625, "comment_id": 65584503, "body": "You are much better off using brackets <code>()</code> for explicit precedence than mixing <code>||</code> and <code>or</code> in the same expression. Otherwise it will be much harder to debug your code."}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1472030543, "post_id": 39118625, "comment_id": 65584566, "body": "Simple rule: don&#39;t use <code>and</code> and <code>or</code> for logical operations."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1472031029, "post_id": 39118625, "comment_id": 65584858, "body": "@pascalbetz: better rule: don&#39;t use and/or ever. :)"}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1472043214, "post_id": 39118625, "comment_id": 65593250, "body": "@SergioTulentsev which might be a bit hard for logical operation?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1472044982, "post_id": 39118625, "comment_id": 65594611, "body": "@pascalbetz: huh? What you mean?"}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1472131810, "post_id": 39118625, "comment_id": 65637109, "body": "@SergioTulentsev misunderstood your comment, sorry."}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 6, "last_activity_date": 1472032117, "last_edit_date": 1472032117, "creation_date": 1472030819, "answer_id": 39119403, "question_id": 39118625, "link": "https://stackoverflow.com/questions/39118625/logical-or-order-of-operations-precedence-not-as-expected/39119403#39119403", "title": "Logical OR order of operations/precedence not as expected", "body": "<p>In Ruby, <code>&amp;&amp;</code>, <code>and</code>, <code>||</code>, and <code>or</code> are <a href=\"https://en.wikipedia.org/wiki/Short-circuit_evaluation\" rel=\"nofollow\">short-circuit operators</a>:</p>\n\n<blockquote>\n  <p>[...] the second argument is executed or evaluated only if the first argument does not suffice to determine the value of the expression: when the first argument of the <code>AND</code> function evaluates to <code>false</code>, the overall value must be <code>false</code>; and when the first argument of the <code>OR</code> function evaluates to <code>true</code>, the overall value must be <code>true</code>. </p>\n</blockquote>\n\n<p>In your example:</p>\n\n<pre><code>a or b || c\n</code></pre>\n\n<p>Ruby evaluates <code>a</code>, sees a <em>truthy</em> value and immediately returns it, without evaluating <code>b || c</code>.</p>\n\n<p><code>or</code>'s lower precedence means that the expression is evaluated as:</p>\n\n<pre><code>a or (b || c)\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>(a or b) || c\n</code></pre>\n\n<p>Just like</p>\n\n<pre><code>1 + 2 * 3\n</code></pre>\n\n<p>is evaluated as:</p>\n\n<pre><code>1 + (2 * 3)\n</code></pre>\n\n<p>because <code>+</code> has lower precedence than <code>*</code>.</p>\n\n<p>But it doesn't change the order of evaluation. <code>1</code> is still evaluated before <code>2 * 3</code>.</p>\n\n<p>Also note that due to <code>or</code>'s very low precedence</p>\n\n<pre><code>p a or b || c\n</code></pre>\n\n<p>is evaluated as:</p>\n\n<pre><code>(p a) or (b || c)\n</code></pre>\n\n<p>Neither <code>b</code> nor <code>c</code> will ever be printed this way.</p>\n\n<p>Further readings:</p>\n\n<ul>\n<li><a href=\"http://www.virtuouscode.com/2010/08/02/using-and-and-or-in-ruby/\" rel=\"nofollow\">Using \u201cand\u201d and \u201cor\u201d in Ruby</a></li>\n<li><a href=\"http://www.virtuouscode.com/2014/08/26/how-to-use-rubys-english-andor-operators-without-going-nuts/\" rel=\"nofollow\">How to use Ruby\u2019s English and/or operators without going nuts</a></li>\n<li><a href=\"http://www.prestonlee.com/2010/08/04/ruby-on-the-perl-origins-of-and-versus-and-and-or/\" rel=\"nofollow\">Ruby: On The Perl Origins Of \u201c&amp;&amp;\u201d And \u201c||\u201d Versus \u201cand\u201d And \u201cor\u201d.</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1472045236, "last_edit_date": 1472045236, "creation_date": 1472031961, "answer_id": 39119803, "question_id": 39118625, "link": "https://stackoverflow.com/questions/39118625/logical-or-order-of-operations-precedence-not-as-expected/39119803#39119803", "title": "Logical OR order of operations/precedence not as expected", "body": "<p><em>Sidenote</em>: In your code there are lines that basically do nothing: <code>a.include? 'string'</code> is silently returning <code>truthy</code>, having no impact at all on the running code. These three functions might be rewritten as:</p>\n\n<pre><code>def atest\n  \"string #{__callee__[0]}\"\nend\nalias :btest :atest\nalias :ctest :atest\n</code></pre>\n\n<p>You are confusing operator precedence with normal execution flow. Operator precedence is about what operation to execute in advance when we have two operations applied to the same operand. Otherwise, the execution order is left-to-right. E.g.</p>\n\n<pre><code>a + b * c\n</code></pre>\n\n<p>is executed as:</p>\n\n<pre><code>a\nb\n# oh! ambiguity: lookup the precedence table: will do multiplication\nc # (otherwise a + b)\n*\n+\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6732385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0363bdae89c704b374d01fb0badf0a71?s=128&d=identicon&r=PG&f=1", "display_name": "jd77", "link": "https://stackoverflow.com/users/6732385/jd77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 39119403, "answer_count": 2, "score": 1, "last_activity_date": 1472045236, "creation_date": 1472028639, "last_edit_date": 1472038329, "question_id": 39118625, "link": "https://stackoverflow.com/questions/39118625/logical-or-order-of-operations-precedence-not-as-expected", "title": "Logical OR order of operations/precedence not as expected", "body": "<p><a href=\"https://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Operators#Logical_Or\" rel=\"nofollow\">https://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Operators#Logical_Or</a><a href=\"https://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Operators#Logical_Or\" rel=\"nofollow\"></a></p>\n\n<blockquote>\n  <p>The binary \"or\" operator will return the logical disjunction of its\n  two operands. <strong>It is the same as \"||\" but with a lower precedence</strong></p>\n</blockquote>\n\n<p>As I understand it, as || has a higher precedence than \"or\", the code below will first test if 'b' is true, then 'c', and then if both are false will test 'a'. I would like to witness this but am not sure if my understanding is incorrect, or simply my test.</p>\n\n<pre><code>a = true\nb = false\nc = false\np a or b || c\n==&gt; true #but were b and c checked as expected?\n</code></pre>\n\n<p>My attempt to test this is as follows..</p>\n\n<pre><code>def atest\n  a = \"string a\"\n  a.include? 'string'\n  a\nend\n\ndef btest\n  b = \"string b\"\n  b.include? 'string'\n  b\nend\n\ndef ctest\n  c = \"string c\"\n  c.include? 'string'\n  c\nend\n\nputs \"#{atest or btest || ctest}\"\n==&gt; string a\n</code></pre>\n\n<p>I expected 'string b' to be returned... I'm completely new to programming since a week ago so I'm not sure, is my code wrong or is my understanding of the quote wrong?</p>\n\n<p>edit: Appreciation on its own seems to be discouraged in responses, so I'll hide it here. Cheers for all the answers/further reading/code cleanup, it's clear now where I was going wrong.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "encoding"], "comments": [{"owner": {"reputation": 2296, "user_id": 494789, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/af6d4d35f206a198925f080014bcbcbe?s=128&d=identicon&r=PG", "display_name": "Christian-G", "link": "https://stackoverflow.com/users/494789/christian-g"}, "edited": false, "score": 0, "creation_date": 1472026636, "post_id": 39117893, "comment_id": 65582064, "body": "What&#39;s your ruby and Rails version?"}, {"owner": {"reputation": 41, "user_id": 5980930, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-VXPSXy0_hpI/AAAAAAAAAAI/AAAAAAAAADk/Dpu_l2o_Iag/photo.jpg?sz=128", "display_name": "Prakadeessh Arunachalam", "link": "https://stackoverflow.com/users/5980930/prakadeessh-arunachalam"}, "reply_to_user": {"reputation": 2296, "user_id": 494789, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/af6d4d35f206a198925f080014bcbcbe?s=128&d=identicon&r=PG", "display_name": "Christian-G", "link": "https://stackoverflow.com/users/494789/christian-g"}, "edited": false, "score": 0, "creation_date": 1472026964, "post_id": 39117893, "comment_id": 65582307, "body": "Rails - 4.2 &amp; Ruby - 2.3"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1472027187, "post_id": 39117893, "comment_id": 65582446, "body": "\u201cWhen I append <code>.force_encoding(Encoding::UTF_8)</code>\u201d\u2014append <i>where</i>?"}, {"owner": {"reputation": 2296, "user_id": 494789, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/af6d4d35f206a198925f080014bcbcbe?s=128&d=identicon&r=PG", "display_name": "Christian-G", "link": "https://stackoverflow.com/users/494789/christian-g"}, "edited": false, "score": 0, "creation_date": 1472027303, "post_id": 39117893, "comment_id": 65582529, "body": "Ruby &gt; 2.0.0 interprets all source files as utf-8, so not sure what you are trying to achieve"}, {"owner": {"reputation": 41, "user_id": 5980930, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-VXPSXy0_hpI/AAAAAAAAAAI/AAAAAAAAADk/Dpu_l2o_Iag/photo.jpg?sz=128", "display_name": "Prakadeessh Arunachalam", "link": "https://stackoverflow.com/users/5980930/prakadeessh-arunachalam"}, "edited": false, "score": 0, "creation_date": 1472027349, "post_id": 39117893, "comment_id": 65582561, "body": "object.attribute.force_encoding(Encoding::UTF_8) in the .haml file"}, {"owner": {"reputation": 41, "user_id": 5980930, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-VXPSXy0_hpI/AAAAAAAAAAI/AAAAAAAAADk/Dpu_l2o_Iag/photo.jpg?sz=128", "display_name": "Prakadeessh Arunachalam", "link": "https://stackoverflow.com/users/5980930/prakadeessh-arunachalam"}, "reply_to_user": {"reputation": 2296, "user_id": 494789, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/af6d4d35f206a198925f080014bcbcbe?s=128&d=identicon&r=PG", "display_name": "Christian-G", "link": "https://stackoverflow.com/users/494789/christian-g"}, "edited": false, "score": 0, "creation_date": 1472027975, "post_id": 39117893, "comment_id": 65582958, "body": "@Christian-G It does not support characters that are non-english"}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1472070328, "post_id": 39117893, "comment_id": 65610173, "body": "are these objects coming from your database? If so the. having to use force_encoding suggests a configuration issue with the db connection or bad data in your database (or both)"}], "owner": {"reputation": 41, "user_id": 5980930, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-VXPSXy0_hpI/AAAAAAAAAAI/AAAAAAAAADk/Dpu_l2o_Iag/photo.jpg?sz=128", "display_name": "Prakadeessh Arunachalam", "link": "https://stackoverflow.com/users/5980930/prakadeessh-arunachalam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472027196, "creation_date": 1472026414, "question_id": 39117893, "link": "https://stackoverflow.com/questions/39117893/force-encodingencodingutf-8-in-one-central-location", "title": "force_encoding(Encoding::UTF_8) in one central location", "body": "<p>I am building a rails app. I have options to export to Word.</p>\n\n<p>When I append <strong>.force_encoding(Encoding::UTF_8)</strong> , it works fine.</p>\n\n<p>Is there a way to write this in one central place instead of specifying it in all the places?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "forms"], "comments": [{"owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "edited": false, "score": 0, "creation_date": 1472024762, "post_id": 39117002, "comment_id": 65580873, "body": "on change of the <code>selection</code> you can trigger an <code>ajax</code> request to your controller and fetch the <code>last_price</code>. Then update the <code>buy_price</code> field."}], "answers": [{"tags": [], "owner": {"reputation": 129, "user_id": 6564641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-bSQaV7d5t48/AAAAAAAAAAI/AAAAAAAAACM/0OZHDHYsV94/photo.jpg?sz=128", "display_name": "Ioana Surdu Bob", "link": "https://stackoverflow.com/users/6564641/ioana-surdu-bob"}, "is_accepted": false, "score": 1, "last_activity_date": 1472027737, "creation_date": 1472027737, "answer_id": 39118310, "question_id": 39117002, "link": "https://stackoverflow.com/questions/39117002/ruby-on-rails-filling-in-form-for-field-depending-on-selection-in-other-field/39118310#39118310", "title": "Ruby on Rails: Filling in form_for field depending on selection in other field", "body": "<p>So, first you should give some class names to the fields you need to modify:</p>\n\n<pre><code>&lt;%= f.select :stock_id, options_from_collection_for_select(Stock.all, :id, :symbol), prompt: 'Please select a stock...', {class: 'stock'} %&gt;\n\n&lt;%= f.number_field :buy_price, class: \"buyprice\" %&gt;\n</code></pre>\n\n<p>Then, to edit those fields you need to escape javascript many times, so what I used to change ruby variables was CDATA. My indentation might be wrong though (i've been using haml and i have to put tabs only inside ruby loops). You can't put a javascript variable inside escape javascript so you should make a loop and check for the value, then with it you change the value of the field you want to change. You could also make it read only or hidden, if you want the user not to change the input.</p>\n\n<pre><code>&lt;script&gt;\n  \\//&lt;![CDATA[\n  $(document).ready(function(){\n  $(\".stock\").change(function(){\n  stockval = $(this).val();\n  &lt;%- Stock.pluck(:id).each do |stock| %&gt;\n    if($(this).val() == \"#{stock}\") {\n    $(\".buyprice\").val(\"#{Stock.find(stock).last_price)}\");\n    }\n  &lt;%- end %&gt;\n  });\n  });\n  \\//]]&gt;\n&lt;/script&gt;\n</code></pre>\n\n<p>I am not sure this is completely correct, but I hope this helps :).</p>\n"}], "owner": {"reputation": 503, "user_id": 5057085, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/hDmH7.jpg?s=128&g=1", "display_name": "Coder_Nick", "link": "https://stackoverflow.com/users/5057085/coder-nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 226, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472027737, "creation_date": 1472023785, "question_id": 39117002, "link": "https://stackoverflow.com/questions/39117002/ruby-on-rails-filling-in-form-for-field-depending-on-selection-in-other-field", "title": "Ruby on Rails: Filling in form_for field depending on selection in other field", "body": "<p>I have a Transaction model that handles the buying and selling of Stocks in a Portfolio. When determine which Stock I want to buy/sell I have a drop down using options_for_collection_for_select. Depending on which Stock Symbol I select, I want the buy_price field to fill in with the last_price associated with that Stock resource.\nIs there a way to store the selection from the f.select :stock_id and use it to autofill the buy_price field. Either with Rails or JavaScript.</p>\n\n<pre><code>&lt;%= form_for([@portfolio, @transaction]) do |f| %&gt;\n  &lt;% if @transaction.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(@transaction.errors.count, \"error\") %&gt; prohibited this transaction from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% @transaction.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :symbol %&gt;&lt;br&gt;\n    &lt;%= f.select :stock_id, options_from_collection_for_select(Stock.all, :id, :symbol), prompt: 'Please select a stock...' %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :quantity %&gt;&lt;br&gt;\n    &lt;%= f.number_field :num_of_shares %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :buy_price %&gt;&lt;br&gt;\n    &lt;%= f.number_field :buy_price %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :buy_date %&gt;&lt;br&gt;\n    &lt;%= f.datetime_field :buy_date, :value =&gt; DateTime.now %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit class: 'btn btn-success' %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "intellij-idea", "ruby-debug-ide"], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 964440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19631ba8bcb5c1484e56607f0868cbbe?s=128&d=identicon&r=PG", "display_name": "fanfan1609", "link": "https://stackoverflow.com/users/964440/fanfan1609"}, "edited": false, "score": 0, "creation_date": 1566261500, "post_id": 45971866, "comment_id": 101592263, "body": "Great!! Thanks for your help."}], "tags": [], "owner": {"reputation": 91, "user_id": 3642874, "user_type": "registered", "profile_image": "https://graph.facebook.com/617106524/picture?type=large", "display_name": "user3642874", "link": "https://stackoverflow.com/users/3642874/user3642874"}, "is_accepted": false, "score": 4, "last_activity_date": 1504159550, "last_edit_date": 1504159550, "creation_date": 1504142545, "answer_id": 45971866, "question_id": 39116558, "link": "https://stackoverflow.com/questions/39116558/ruby-debug-ide-failed-to-build-gem-native-extention-in-windows/45971866#45971866", "title": "ruby-debug-ide failed to build gem native extention in Windows", "body": "<p>I finally managed to solve this:</p>\n\n<ol>\n<li>Download the source from <a href=\"https://github.com/ruby-debug/ruby-debug-ide\" rel=\"nofollow noreferrer\">https://github.com/ruby-debug/ruby-debug-ide</a></li>\n<li>Edit <code>ruby-debug-ide.gemspec</code> and remove the line <code>spec.extensions &lt;&lt; \"ext/mkrf_conf.rb\" unless ENV['NO_EXT']</code></li>\n<li><code>gem build ruby-debug-ide.gemspec</code></li>\n<li><code>gem install ruby-debug-ide-0.6.1.beta8.gem</code></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 351, "user_id": 6874134, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/567f862b8ec9ed658245f6e813bd1a0d?s=128&d=identicon&r=PG&f=1", "display_name": "&#193;. M&#225;rton", "link": "https://stackoverflow.com/users/6874134/%c3%81-m%c3%a1rton"}, "is_accepted": false, "score": 0, "last_activity_date": 1598019443, "creation_date": 1598019443, "answer_id": 63524588, "question_id": 39116558, "link": "https://stackoverflow.com/questions/39116558/ruby-debug-ide-failed-to-build-gem-native-extention-in-windows/63524588#63524588", "title": "ruby-debug-ide failed to build gem native extention in Windows", "body": "<p>For me the problem was that the ruby executable was installed in a directory which had a space in its absolute path. Reinstalling in another location fixed it instantly. Ruby 2.6.something, windows.</p>\n"}], "owner": {"reputation": 41, "user_id": 6747136, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e9edc0170c23cee2cc769f06c82fb386?s=128&d=identicon&r=PG&f=1", "display_name": "Rebecca", "link": "https://stackoverflow.com/users/6747136/rebecca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2307, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1598019443, "creation_date": 1472022359, "last_edit_date": 1472117676, "question_id": 39116558, "link": "https://stackoverflow.com/questions/39116558/ruby-debug-ide-failed-to-build-gem-native-extention-in-windows", "title": "ruby-debug-ide failed to build gem native extention in Windows", "body": "<p>I have installed debase, but when I try to gem install ruby-debug-ide, it still failed to build gem native extention:</p>\n\n<pre><code>ERROR:  Error installing ruby-debug-ide-0.6.1.beta2.gem:\n        ERROR: Failed to build gem native extension.\n\n    C:/Ruby22-x64/bin/ruby.exe mkrf_conf.rb\nInstalling base gem\nUnable to resolve dependency: user requested 'debase (&gt; 0)'\nC:/Ruby22-x64/lib/ruby/2.2.0/rubygems/resolver.rb:439:in `resolve_for_zero'\nC:/Ruby22-x64/lib/ruby/2.2.0/rubygems/resolver.rb:350:in `resolve_for'\nC:/Ruby22-x64/lib/ruby/2.2.0/rubygems/resolver.rb:196:in `resolve'\nC:/Ruby22-x64/lib/ruby/2.2.0/rubygems/request_set.rb:358:in `resolve'\nC:/Ruby22-x64/lib/ruby/2.2.0/rubygems/dependency_installer.rb:473:in `resolve_dependencies'\nC:/Ruby22-x64/lib/ruby/2.2.0/rubygems/dependency_installer.rb:373:in `install'\nmkrf_conf.rb:35:in `rescue in &lt;main&gt;'\nmkrf_conf.rb:28:in `&lt;main&gt;'\n\nrake failed, exit code 1\n\nGem files will remain installed in C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/ruby-debug-ide-0.6.1.beta2 for inspection.\nResults logged to C:/Ruby22-x64/lib/ruby/gems/2.2.0/extensions/x64-mingw32/2.2.0/ruby-debug-ide-0.6.1.beta2/gem_make.out`}\n</code></pre>\n\n<p>I really have installed debase.<br></p>\n\n<pre><code>*** LOCAL GEMS ***\nactioncable (5.0.0.1)\nactionmailer (5.0.0.1)\nactionpack (5.0.0.1)\nactionview (5.0.0.1)\nactivejob (5.0.0.1)\nactivemodel (5.0.0.1)\nactiverecord (5.0.0.1)\nactivesupport (5.0.0.1)\narel (7.1.1)\nbigdecimal (1.2.6)\nbuilder (3.2.2)\nbundler (1.12.5)\ncoffee-rails (4.2.1)\ncoffee-script (2.4.1)\ncoffee-script-source (1.10.0, 1.8.0)\nconcurrent-ruby (1.0.2)\ndebase (0.2.2.beta8)\ndebase-ruby_core_source (0.9.1)\ndebug_inspector (0.0.2)\nerubis (2.7.0)\nexecjs (2.7.0)\nglobalid (0.3.7)\nhttpclient (2.8.2.2)\ni18n (0.7.0)\nio-console (0.4.3)\njbuilder (2.6.0)\njquery-rails (4.2.1)\njson (1.8.1)\nloofah (2.0.3)\nmail (2.6.4)\nmethod_source (0.8.2)\nmime-types (3.1)\nmime-types-data (3.2016.0521)\nmini_portile2 (2.1.0)\nminitest (5.9.0, 5.4.3)\nmulti_json (1.12.1)\nnio4r (1.2.1)\nnokogiri (1.6.8 x64-mingw32)\npkg-config (1.1.7)\npower_assert (0.2.2)\npsych (2.0.8)\npuma (3.6.0)\nrack (2.0.1)\nrack-test (0.6.3)\nrails (5.0.0.1)\nrails-dom-testing (2.0.1)\nrails-html-sanitizer (1.0.3)\nrailties (5.0.0.1)\nrake (11.2.2, 10.4.2)\nrdoc (4.2.0)\nsass (3.4.22)\nsass-rails (5.0.6)\nsoap4r (1.5.8)\nsprockets (3.7.0)\nsprockets-rails (3.1.1)\nsqlite3 (1.3.11 x64-mingw32)\ntest-unit (3.0.8)\nthor (0.19.1)\nthread_safe (0.3.5)\ntilt (2.0.5)\nturbolinks (5.0.1)\nturbolinks-source (5.0.0)\ntzinfo (1.2.2)\ntzinfo-data (1.2016.6)\nuglifier (3.0.1)\nweb-console (3.3.1)\nwebsocket-driver (0.6.4)\nwebsocket-extensions (0.1.2)\n</code></pre>\n\n<p>What should I do to solve the problem? Do I need to install a specific version of debase?<br>\nThanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "shell"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1472025114, "post_id": 39116451, "comment_id": 65581061, "body": "Are you using a framework or is this your own DSL?"}, {"owner": {"reputation": 81, "user_id": 1221251, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/bfcbc4e4058b06acdf56a521960be20e?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/1221251/pradeep"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1472028075, "post_id": 39116451, "comment_id": 65583025, "body": "No.. we are not using any framework"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1472029093, "post_id": 39116451, "comment_id": 65583615, "body": "The best way is probably to change <code>Import.sh</code> in a way that allows username and password to be passed either as arguments or via a prompt."}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1472062271, "creation_date": 1472062271, "answer_id": 39130283, "question_id": 39116451, "link": "https://stackoverflow.com/questions/39116451/auto-input-credentials-when-prompted-in-ruby/39130283#39130283", "title": "Auto input credentials when prompted in ruby", "body": "<p>You can use <code>open3</code> in the ruby standard library:</p>\n\n<pre><code>download_dir = \"./test/dir\"\nshell_command = \"./Import.sh #{download_dir}\"\nusername = \"username\"\npassword = \"password\"\n\nOpen3.popen3(\"shell_command\") do |input, output, error, thread|\n  input.puts(username) # answers the username prompt\n  input.puts(password) # answers the password prompt\n  puts output.read # prints the output of the script so far\nend\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 1221251, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/bfcbc4e4058b06acdf56a521960be20e?s=128&d=identicon&r=PG", "display_name": "Pradeep", "link": "https://stackoverflow.com/users/1221251/pradeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472062271, "creation_date": 1472022028, "last_edit_date": 1472024681, "question_id": 39116451, "link": "https://stackoverflow.com/questions/39116451/auto-input-credentials-when-prompted-in-ruby", "title": "Auto input credentials when prompted in ruby", "body": "<p>I am a newbie to ruby. We have our install process automated in ruby. I am facing an issue on making ruby script adapt to changes in shell script.</p>\n\n<pre><code>execute \"update_imports\" do\ncwd import_home\ncommand \"./Import.sh #{download_dir}/#{import_file} #{user} #{Shellwords.escape(password)}\"\naction :run\nend\n</code></pre>\n\n<p>The Import.sh is modified such that now it asks for username and password (doesn't take username and password as arguments as earlier)</p>\n\n<pre><code>Earlier:\n./Import.sh /tmp/importTest.xml test1 password\n\nNow:\n./Import.sh /tmp/importTest.xml\nusername: test1\npassword:\n</code></pre>\n\n<p>I want to modify the ruby file to adapt to this change. Can you suggest the best way to do so? I tried to do some searching and learning but being pretty new to ruby, I am clueless. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 18643, "user_id": 1737909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/058573b71875bc70b5a4e30140c94040?s=128&d=identicon&r=PG", "display_name": "Ven", "link": "https://stackoverflow.com/users/1737909/ven"}, "edited": false, "score": 1, "creation_date": 1472018013, "post_id": 39115305, "comment_id": 65577460, "body": "Where&#39;s <code>Rails.application.secrets.json_web_token_secret</code> defined?"}, {"owner": {"reputation": 1673, "user_id": 2658568, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/1066828315/picture?type=large", "display_name": "Louis Cruz", "link": "https://stackoverflow.com/users/2658568/louis-cruz"}, "reply_to_user": {"reputation": 18643, "user_id": 1737909, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/058573b71875bc70b5a4e30140c94040?s=128&d=identicon&r=PG", "display_name": "Ven", "link": "https://stackoverflow.com/users/1737909/ven"}, "edited": false, "score": 0, "creation_date": 1472018945, "post_id": 39115305, "comment_id": 65577790, "body": "That secret is defined in a <code>local_env.yml</code> that is hidden git ignored. In the rails console, if I try to access the variable through <code>Rails.application.secrets</code> it works just fine."}, {"owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "edited": false, "score": 1, "creation_date": 1472019532, "post_id": 39115305, "comment_id": 65578032, "body": "@LouisCruz, can you post the code in your <code>user.rb</code> model?"}, {"owner": {"reputation": 1673, "user_id": 2658568, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/1066828315/picture?type=large", "display_name": "Louis Cruz", "link": "https://stackoverflow.com/users/2658568/louis-cruz"}, "reply_to_user": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "edited": false, "score": 0, "creation_date": 1472020489, "post_id": 39115305, "comment_id": 65578500, "body": "@ArunKumar, of course! Thought I already had it there. It&#39;s up now."}, {"owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "edited": false, "score": 1, "creation_date": 1472022528, "post_id": 39115305, "comment_id": 65579593, "body": "What kind of <code>before_action</code>s are in <code>ApplicationController</code>?"}, {"owner": {"reputation": 1673, "user_id": 2658568, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/1066828315/picture?type=large", "display_name": "Louis Cruz", "link": "https://stackoverflow.com/users/2658568/louis-cruz"}, "reply_to_user": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "edited": false, "score": 0, "creation_date": 1472022773, "post_id": 39115305, "comment_id": 65579741, "body": "@fylooi, I have two possibly relevant things: the first is <code>protect_from_forgery with: :null_session, only: Proc.new { |c| c.request.format.json? }</code>, and the second is <code>include ActionController::RequestForgeryProtection</code>. There are no <code>before_action</code> calls."}, {"owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "edited": false, "score": 1, "creation_date": 1472023746, "post_id": 39115305, "comment_id": 65580296, "body": "Hmm. I would guess that something is invoking <code>logged_in?</code> somewhere. Add <code>puts caller</code> to the top of your <code>current_user</code> method and see whether that provides any clarity?"}, {"owner": {"reputation": 1673, "user_id": 2658568, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/1066828315/picture?type=large", "display_name": "Louis Cruz", "link": "https://stackoverflow.com/users/2658568/louis-cruz"}, "reply_to_user": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "edited": false, "score": 0, "creation_date": 1472060993, "post_id": 39115305, "comment_id": 65605268, "body": "@fylooi, <code>logged_in?</code> is never called, but when I place a <code>p caller</code> on the <code>current_user</code> method, I get a very long response that begins with <code>[&quot;&#47;Users&#47;louisstephancruz&#47;.rvm&#47;gems&#47;ruby-2.2.4&#47;bundler&#47;gems&#47;&zwnj;&#8203;active_model_seriali&zwnj;&#8203;zers-532828b4dad4&#47;li&zwnj;&#8203;b&#47;action_controller&#47;&zwnj;&#8203;serialization.rb:25:&zwnj;&#8203;in </code>serialization_scope&#39;&quot;,<code>. Also, when I try to put a </code>p caller` on my <code>user_serializer.rb</code>, it is never called."}], "answers": [{"comments": [{"owner": {"reputation": 622, "user_id": 3912172, "user_type": "registered", "accept_rate": 73, "profile_image": "https://lh5.googleusercontent.com/-ew7buDv25h8/AAAAAAAAAAI/AAAAAAAAad4/u7xhG9Yx9F8/photo.jpg?sz=128", "display_name": "andyrue", "link": "https://stackoverflow.com/users/3912172/andyrue"}, "edited": false, "score": 1, "creation_date": 1563889980, "post_id": 39131979, "comment_id": 100845196, "body": "Alternatively, you can add <code>serialization_scope :view_context</code> to the controller that you don&#39;t want to call current_user. I was having this problem trying to create an authentication token at login. It was calling <code>current_user</code> before I could even log somebody in."}], "tags": [], "owner": {"reputation": 1673, "user_id": 2658568, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/1066828315/picture?type=large", "display_name": "Louis Cruz", "link": "https://stackoverflow.com/users/2658568/louis-cruz"}, "is_accepted": false, "score": 6, "last_activity_date": 1472068416, "creation_date": 1472068416, "answer_id": 39131979, "question_id": 39115305, "link": "https://stackoverflow.com/questions/39115305/why-is-current-user-called-on-render-in-controller/39131979#39131979", "title": "Why is current_user called on render in controller?", "body": "<p>It turns out that current_user was in fact being called since it is the default scope_name for Active Model Serializers. I changed the name of my <code>current_user</code> method to avoid this conflict. <a href=\"https://github.com/rails-api/active_model_serializers/blob/61059e900cdba72a88970fc790f73984c6bc2e99/docs/general/serializers.md#scope\" rel=\"noreferrer\">Here are the relevant docs.</a></p>\n"}], "owner": {"reputation": 1673, "user_id": 2658568, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/1066828315/picture?type=large", "display_name": "Louis Cruz", "link": "https://stackoverflow.com/users/2658568/louis-cruz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 943, "favorite_count": 1, "answer_count": 1, "score": 6, "last_activity_date": 1472068416, "creation_date": 1472017679, "last_edit_date": 1472020459, "question_id": 39115305, "link": "https://stackoverflow.com/questions/39115305/why-is-current-user-called-on-render-in-controller", "title": "Why is current_user called on render in controller?", "body": "<p>I'm getting the following error when trying access the log in method of my <code>sessions</code> controller:</p>\n\n<pre><code>JWT::DecodeError (Nil JSON web token):\n\nlib/json_web_token.rb:11:in `decode'\napp/helpers/sessions_helper.rb:15:in `current_user'\napp/controllers/api/sessions_controller.rb:11:in `create'\n</code></pre>\n\n<p>If I comment out my <code>render json: user</code> in my controller response, all is good, except I need to respond with the user...Why on earth is the <code>current_user</code> method called on through line 11 of the <code>sessions_controller.rb</code>. Here's the relevant code:</p>\n\n<p><strong>lib/json_web_token.rb</strong></p>\n\n<pre><code>require 'jwt'\n\nclass JsonWebToken\n  def self.encode(payload, expiration = 24.hours.from_now)\n    payload = payload.dup\n    payload['exp'] = expiration.to_i\n    JWT.encode(payload, Rails.application.secrets.json_web_token_secret)\n  end\n\n  def self.decode(token)\n    JWT.decode(token, Rails.application.secrets.json_web_token_secret).first\n  end\nend\n</code></pre>\n\n<p><strong>sessions_helper.rb</strong></p>\n\n<pre><code>require 'json_web_token'\n\nmodule SessionsHelper\n  def create_session(user)\n    session[:user_id] = user.id\n  end\n\n  def current_user\n    auth_token = request.headers[\"Authorization\"]\n    if auth_token\n      auth_token = auth_token.split(\" \").last\n      begin\n        decoded_token = JsonWebToken.decode auth_token\n      rescue JWT::ExpiredSignature\n        return\n      end\n      @current_user ||= User.find_by(auth_token: auth_token)\n    end\n  end\n\n  def log_out(user)\n    logged_in? ? user.generate_authentication_token! : user.destroy_token!\n    auth_token = user.auth_token\n    user.update_attribute(:auth_token, auth_token)\n  end\n\n  def logged_in?\n    current_user.present?\n  end\n\n  def authenticate_with_token!\n    render json: { errors: \"Not authenticated\" }, status: :unauthorized unless logged_in?\n  end\n\n  def log_in(user)\n    create_session(user)\n    user.generate_authentication_token!\n    user.update_attribute(:auth_token, user.auth_token)\n  end\n\n  def authenticate_as_self_or_admin!\n    render json: { errors: \"Not authorized\" }, status: :unauthorized unless is_self? || is_admin?\n  end\n\n  def is_self?\n    user = User.find(params[:id])\n    auth_token = request.headers[\"Authorization\"]\n    auth_token = auth_token.split(\" \").last if auth_token\n    user.auth_token != auth_token\n  end\n\n  def is_admin?\n    if logged_in? &amp;&amp; current_user.authenticate(params[:password])\n      current_user.admin\n    end\n  end\nend\n</code></pre>\n\n<p><strong>sessions_controller.rb</strong></p>\n\n<pre><code>class Api::SessionsController &lt; ApplicationController\n  before_action :authenticate_with_token!, only: [:destroy]\n  def new\n  end\n\n  def create\n    user = User.find_by(email: params[:session][:email].downcase)\n\n    if user &amp;&amp; user.authenticate(params[:session][:password])\n      log_in user\n      render json: user, status: :created\n    else\n      render json: user, status: :unprocessable_entity\n    end\n  end\n\n  def destroy\n    log_out current_user\n    render status: 204\n  end\nend\n</code></pre>\n\n<p><strong>user.rb</strong></p>\n\n<pre><code>require 'json_web_token'\n\nclass User &lt; ApplicationRecord\n  attr_reader :current_password\n\n  before_save { email.downcase! }\n  before_create :generate_authentication_token!\n  before_update :reset_confirmed!, :if =&gt; :email_changed?\n  has_secure_password\n  has_many :posts\n  has_many :comments\n  has_many :votes\n  VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-]+(\\.[a-z\\d\\-]+)*\\.[a-z]+\\z/i\n  validates :email, presence: true, length: { maximum: 255 }, format: { with: VALID_EMAIL_REGEX }, uniqueness: { case_sensitive: false }\n  validates :username, presence: true, length: { maximum: 24 }, uniqueness: { case_sensitive: false }\n  validates :password, presence: true, length: { minimum: 8 }\n  validates :auth_token, uniqueness: true\n\n  def generate_authentication_token!\n    begin\n      self.auth_token = JsonWebToken.encode('id' =&gt; self.id, 'username' =&gt; self.username, 'email' =&gt; self.email, 'bio' =&gt; self.bio, 'confirmed' =&gt; self.confirmed, 'admin' =&gt; self.admin, 'points' =&gt; self.points)\n    end while self.class.exists?(auth_token: auth_token)\n  end\n\n  def destroy_token!\n    self.auth_token = nil\n  end\n\n  def reset_confirmed!\n    self.confirmed = false\n  end\n\n  def upvotes\n    self.votes.where(polarity: 1)\n  end\n\n  def downvotes\n    self.votes.where(polarity: -1)\n  end\n\n  def update_with_password(user_params)\n    current_password = user_params.delete(:current_password)\n    user_params[:password] = current_password if user_params[:password].nil?\n\n    if self.authenticate(current_password)\n      self.update(user_params)\n    else\n      self.errors.add(:current_password, current_password.blank? ? :blank : :invalid)\n      false\n    end\n  end\nend\n</code></pre>\n\n<p>No, I am not using devise.\nI'm really hoping my eyes are just tired here...</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 542, "user_id": 1927604, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f35d9ed3f19ded110e123899c2a0f0ab?s=128&d=identicon&r=PG", "display_name": "darkginger", "link": "https://stackoverflow.com/users/1927604/darkginger"}, "edited": false, "score": 0, "creation_date": 1472016030, "post_id": 39114891, "comment_id": 65576675, "body": "This looks promising, and I am looking at the documentation now. Weirdly enough, even with the <code>limit</code> parameter, it is returning all of the results in the table (all 9 results when I run locally). I have tried running it with both <code>Post.order(created_at: :desc).offset(5).limit(3)</code> and <code>Post.order(created_at: :desc).limit(3).offset(5)</code> (in case it was a relational problem), but no luck. Any idea why?"}, {"owner": {"reputation": 2895, "user_id": 214759, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0a643cb8407049539331506124310d20?s=128&d=identicon&r=PG", "display_name": "Jimmy Baker", "link": "https://stackoverflow.com/users/214759/jimmy-baker"}, "reply_to_user": {"reputation": 542, "user_id": 1927604, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f35d9ed3f19ded110e123899c2a0f0ab?s=128&d=identicon&r=PG", "display_name": "darkginger", "link": "https://stackoverflow.com/users/1927604/darkginger"}, "edited": false, "score": 0, "creation_date": 1472016173, "post_id": 39114891, "comment_id": 65576729, "body": "If you&#39;ve got a default scope set on the model it might be interfering with your query. What sql query is being executed? You can see this in your console or in your logs when you run the command. Paste it here if you can&#39;t figure out what&#39;s going on and I&#39;ll have a better idea."}, {"owner": {"reputation": 2895, "user_id": 214759, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0a643cb8407049539331506124310d20?s=128&d=identicon&r=PG", "display_name": "Jimmy Baker", "link": "https://stackoverflow.com/users/214759/jimmy-baker"}, "reply_to_user": {"reputation": 542, "user_id": 1927604, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f35d9ed3f19ded110e123899c2a0f0ab?s=128&d=identicon&r=PG", "display_name": "darkginger", "link": "https://stackoverflow.com/users/1927604/darkginger"}, "edited": false, "score": 0, "creation_date": 1472016216, "post_id": 39114891, "comment_id": 65576745, "body": "If it ends up being a default scope problem you can just do <code>Post.unscoped.order(created_at: :desc).limit(3).offset(5)</code>"}, {"owner": {"reputation": 542, "user_id": 1927604, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f35d9ed3f19ded110e123899c2a0f0ab?s=128&d=identicon&r=PG", "display_name": "darkginger", "link": "https://stackoverflow.com/users/1927604/darkginger"}, "edited": false, "score": 0, "creation_date": 1472016523, "post_id": 39114891, "comment_id": 65576873, "body": "Good idea. The <code>.unscoped</code> didn&#39;t fix it, but here&#39;s the new output in the console:  <code>Post Load (0.8ms)  SELECT  &quot;posts&quot;.* FROM &quot;posts&quot;  ORDER BY created_at DESC LIMIT 5   Post Load (0.4ms)  SELECT  &quot;posts&quot;.* FROM &quot;posts&quot;  ORDER BY &quot;posts&quot;.&quot;created_at&quot; DESC LIMIT 3 OFFSET 5</code>. Weird that it is rendering all of them even though it&#39;s executing the offset."}, {"owner": {"reputation": 2895, "user_id": 214759, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0a643cb8407049539331506124310d20?s=128&d=identicon&r=PG", "display_name": "Jimmy Baker", "link": "https://stackoverflow.com/users/214759/jimmy-baker"}, "reply_to_user": {"reputation": 542, "user_id": 1927604, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f35d9ed3f19ded110e123899c2a0f0ab?s=128&d=identicon&r=PG", "display_name": "darkginger", "link": "https://stackoverflow.com/users/1927604/darkginger"}, "edited": false, "score": 0, "creation_date": 1472016740, "post_id": 39114891, "comment_id": 65576952, "body": "Why is the query executing twice? Is this postgres, mysql or sqlite?"}, {"owner": {"reputation": 542, "user_id": 1927604, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f35d9ed3f19ded110e123899c2a0f0ab?s=128&d=identicon&r=PG", "display_name": "darkginger", "link": "https://stackoverflow.com/users/1927604/darkginger"}, "edited": false, "score": 0, "creation_date": 1472016926, "post_id": 39114891, "comment_id": 65577038, "body": "That&#39;s PG. And good question. I think the first is for <code>@posts</code> and the second is for <code>@texts</code>."}], "tags": [], "owner": {"reputation": 2895, "user_id": 214759, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0a643cb8407049539331506124310d20?s=128&d=identicon&r=PG", "display_name": "Jimmy Baker", "link": "https://stackoverflow.com/users/214759/jimmy-baker"}, "is_accepted": false, "score": 1, "last_activity_date": 1472015609, "creation_date": 1472015609, "answer_id": 39114891, "question_id": 39114881, "link": "https://stackoverflow.com/questions/39114881/retrieving-only-the-sixth-and-seventh-matching-results-in-a-rails-table/39114891#39114891", "title": "Retrieving only the sixth and seventh matching results in a Rails table", "body": "<p>Yes. You'll want to use offset to get them. Here's the documentation on offset: <a href=\"http://apidock.com/rails/ActiveRecord/QueryMethods/offset\" rel=\"nofollow\">http://apidock.com/rails/ActiveRecord/QueryMethods/offset</a></p>\n\n<p><code>Post.order(created_at: :desc).limit(3).offset(5)</code></p>\n"}, {"comments": [{"owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "edited": false, "score": 0, "creation_date": 1472025330, "post_id": 39117344, "comment_id": 65581229, "body": "Bad idea. DB queries are much faster than Ruby code execution."}, {"owner": {"reputation": 779, "user_id": 1010746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f12532c1224ff2ab2260e853258deddb?s=128&d=identicon&r=PG", "display_name": "neongrau", "link": "https://stackoverflow.com/users/1010746/neongrau"}, "reply_to_user": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "edited": false, "score": 0, "creation_date": 1472025820, "post_id": 39117344, "comment_id": 65581543, "body": "quick benchmark says otherwise for such a simple thing:"}, {"owner": {"reputation": 779, "user_id": 1010746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f12532c1224ff2ab2260e853258deddb?s=128&d=identicon&r=PG", "display_name": "neongrau", "link": "https://stackoverflow.com/users/1010746/neongrau"}, "reply_to_user": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "edited": false, "score": 0, "creation_date": 1472025828, "post_id": 39117344, "comment_id": 65581550, "body": "0.094000   0.000000   0.094000 (  0.125000)         ==================================================           0.000000   0.000000   0.000000 (  0.015621)"}], "tags": [], "owner": {"reputation": 779, "user_id": 1010746, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f12532c1224ff2ab2260e853258deddb?s=128&d=identicon&r=PG", "display_name": "neongrau", "link": "https://stackoverflow.com/users/1010746/neongrau"}, "is_accepted": false, "score": -1, "last_activity_date": 1472024840, "creation_date": 1472024840, "answer_id": 39117344, "question_id": 39114881, "link": "https://stackoverflow.com/questions/39114881/retrieving-only-the-sixth-and-seventh-matching-results-in-a-rails-table/39117344#39117344", "title": "Retrieving only the sixth and seventh matching results in a Rails table", "body": "<p>Save some DB time and do it in a single query like this</p>\n\n<pre><code>@texts = Post.order('created_at DESC').limit(8).to_a\n@posts = @texts.shift(5) # takes the first 5 records from @texts leaving the remaining 3 \n</code></pre>\n"}], "owner": {"reputation": 542, "user_id": 1927604, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f35d9ed3f19ded110e123899c2a0f0ab?s=128&d=identicon&r=PG", "display_name": "darkginger", "link": "https://stackoverflow.com/users/1927604/darkginger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1472024840, "creation_date": 1472015546, "question_id": 39114881, "link": "https://stackoverflow.com/questions/39114881/retrieving-only-the-sixth-and-seventh-matching-results-in-a-rails-table", "title": "Retrieving only the sixth and seventh matching results in a Rails table", "body": "<p>I am working on a Rails app, and I am hitting a roadblock: I need to return several items in a table that are, say, the 6th-8th matching items. Ironically, Rails has a <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-find_nth\" rel=\"nofollow\">helper method</a> shown here for <code>.first</code> through <code>.fifth.</code> </p>\n\n<p>My question is: how can you find these results when the n you are searching for is only 6,7,8 and so on without calling all of the 1st through 8th items?</p>\n\n<p>Here's why I am doing this. I am making a home page for a blog. At the top, I want to show the 5 most recent posts (which will be shown with an image). Underneath them, I want to show an additional three links to posts as text. </p>\n\n<p>Currently, I am doing the first part fine. In my <code>blog.controller.rb</code>: </p>\n\n<pre><code>    @posts = Post.order('created_at DESC').first(5)\n</code></pre>\n\n<p>I then iterate through Posts in the view, and that shows my first five most recent results. I now want to show the 6th-8th, and I will try and store them in a new method. I change the controller to: </p>\n\n<pre><code>    @posts = Post.order('created_at DESC').first(5)\n    @texts = Post.order('created_at DESC').limit(8) \n</code></pre>\n\n<p>This returns the 8 most recent posts instead of, say, just the 8th. </p>\n\n<p>Is it possible for me to limit <code>@texts</code> to show only the matching 6th, 7th, and 8th results? </p>\n"}, {"tags": ["ruby", "excel", "csv", "filtering", "spreadsheet"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1472013499, "post_id": 39114419, "comment_id": 65575813, "body": "Did you consider loading the data into a database? Feels like SQL might be a better choice than Ruby and a big array."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1472013571, "post_id": 39114419, "comment_id": 65575834, "body": "Show us your attempt."}, {"owner": {"reputation": 24120, "user_id": 5159168, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/r0oiE.jpg?s=128&g=1", "display_name": "Andreas", "link": "https://stackoverflow.com/users/5159168/andreas"}, "edited": false, "score": 0, "creation_date": 1472013795, "post_id": 39114419, "comment_id": 65575877, "body": "Why can you only filter on one thing in Excel? Do you have some limited version of Excel?"}], "answers": [{"tags": [], "owner": {"reputation": 49, "user_id": 4544763, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a66d41ba127724fa6d7e99e826bc72ba?s=128&d=identicon&r=PG&f=1", "display_name": "lest96", "link": "https://stackoverflow.com/users/4544763/lest96"}, "is_accepted": false, "score": 0, "last_activity_date": 1472014451, "creation_date": 1472014451, "answer_id": 39114673, "question_id": 39114419, "link": "https://stackoverflow.com/questions/39114419/how-do-i-filter-data-from-a-csv-file-in-excel-or-with-ruby/39114673#39114673", "title": "How do I filter data from a CSV file in Excel or with Ruby?", "body": "<p>Wanted to post this as a comment but I don't have enough rep. Anyways:</p>\n\n<p>I have converted CSV/xls files to JSON in the past with the help of some nodejs packages and uploaded them to my couchbase database. Within couchbase I can query with N1ql (really just SQL) which will allow you to achieve your goal of filtering multiple criterias. Like spickermann said, a database will solve your problem. </p>\n\n<p>Edit:\nMy-Sql also supports importing a CSV file to a My-SQL table. Will be easier than the CSV to JSON to Couchbase</p>\n\n<p>Csv-to-json \n<a href=\"https://github.com/cparker15/csv-to-json/blob/master/README.md\" rel=\"nofollow\">https://github.com/cparker15/csv-to-json/blob/master/README.md</a></p>\n"}, {"tags": [], "owner": {"reputation": 5730, "user_id": 667987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c00249587cb5aa0ceb5765dc811faa7?s=128&d=identicon&r=PG", "display_name": "seph", "link": "https://stackoverflow.com/users/667987/seph"}, "is_accepted": false, "score": 1, "last_activity_date": 1472023626, "last_edit_date": 1472023626, "creation_date": 1472023025, "answer_id": 39116755, "question_id": 39114419, "link": "https://stackoverflow.com/questions/39114419/how-do-i-filter-data-from-a-csv-file-in-excel-or-with-ruby/39116755#39116755", "title": "How do I filter data from a CSV file in Excel or with Ruby?", "body": "<p>I downloaded the data so I could play with it. You can get the record count pretty easily in Ruby. I just did it in irb:</p>\n\n<pre><code>require 'csv'\n\ndetails = []\nCSV.foreach(\"StormEvents_details-ftp_v1.0_d2015_c20160818.csv\") do |row|\n  details &lt;&lt; row\nend\n\nresults = details.select do |field|\n  [field[-2], field[-3]].any? { |el| el[/\\btree\\b/i] } &amp;&amp; field[8] == \"CALIFORNIA\"\nend\n\nresults.count\n =&gt; 125\n</code></pre>\n\n<p>I just used array indices. You could zip things together and make hashes for better readability.</p>\n"}], "owner": {"reputation": 31, "user_id": 6750628, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48be045874c48be2de5ce27388e25186?s=128&d=identicon&r=PG&f=1", "display_name": "lenchok", "link": "https://stackoverflow.com/users/6750628/lenchok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1215, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1472764837, "creation_date": 1472012728, "last_edit_date": 1472151104, "question_id": 39114419, "link": "https://stackoverflow.com/questions/39114419/how-do-i-filter-data-from-a-csv-file-in-excel-or-with-ruby", "title": "How do I filter data from a CSV file in Excel or with Ruby?", "body": "<p>I have a huge CSV file (over 57,000 rows and 50 columns) that I need to analyze. </p>\n\n<p>Edit: Hi guys, thanks for your answers and comments, but I am still really confused about how to do this in Ruby, and I have no idea how to use MySQL. I will try to be more specific:</p>\n\n<p>The CSV files: </p>\n\n<p><a href=\"https://application.adadevelopersacademy.org/assets/2015_c20160810.csv-da99899293733c7536ba143cbe776239.gz\" rel=\"nofollow\">CSV on Storm Data Details for 2015</a></p>\n\n<p><a href=\"https://application.adadevelopersacademy.org/assets/2000_c20160223.csv-efe96cf76f088697cd76b0820093f8c6.gz\" rel=\"nofollow\">CSV on Storm Data Details for 2000</a></p>\n\n<p>The questions:\nPrior to question start, for all answers, exclude all rows that have a County/Parish, Zone, or Marine name that begins with the letters A, B, or C. </p>\n\n<ol>\n<li>Find the month in 2015 where the State of Washington had the largest number of storm events. How many days of storm-free weather occurred in that month?</li>\n<li>How many storms impacting trees happened between 8PM EST and 8AM EST in 2000?</li>\n<li>In which year (2000 or 2015) did storms have a higher monetary impact within the boundaries of the 13 original colonies?</li>\n</ol>\n\n<p>The problems:</p>\n\n<p>1) I was able to use filters in Excel to determine that the most \"Thunderstorm Wind\" events in Washington happened in July (6 entries), and there were 27 days of storm-free weather. However, when I tried to check my work in Spotfire, I got completely different results. (7 entries in May, and 28 days of storm-free weather in May. Excel only found two Thunderstorm Wind events in May.) Do you know what could be causing this discrepancy?</p>\n\n<p>2) There are two columns where damage to trees might be mentioned: Event_Narrative and Episode_Narrative. Would it be possible to search both columns for \"tree\" and filter the spreadsheet down to only those results? Multiple-column filtering is apparently impossible in Excel. I would also need to find a way to omit the word \"street\" in the results (because it contains the word \"tree\"). </p>\n\n<p>The method I came up with for the time range is to filter to only EST and AST results, then filter Begin_Time to 2000 to 2359 and 0 to 759 and repeat those ranges to filter End_Time. This appears to work.</p>\n\n<p>3) I was able to filter the states to Delaware, Pennsylvania, New Jersey, Georgia, Connecticut, Massachusetts, Maryland, South Carolina, New Hampshire, Virginia, New York, North Carolina, and Rhode Island. It seems like a simple task to add all the values in Columns Y and Z (Damage_Property, Damage_Crops) and compare between the two years, but the values are written in the form \"32.79K\" and I cannot figure out how to make the adding equation work in that format or convert the values into integers. </p>\n\n<p>Also, the question is asking for the original territory of the colonies, which is not the same as the territory those states now occupy. Do you know of a way to resolve this issue? Even if I had the time to look up each city listed, there does not seem to be a database of cities in the original 13 colonies online, and even if there was, the names of the cities may now be different. </p>\n\n<hr>\n\n<p>I am learning Ruby and some people have suggested that I try to use the Ruby CSV library to put the data into an array. I have looked at some tutorials that sort of describe how to do that, but I still don't understand how I would filter the data down to only what I need. </p>\n\n<p>Can anyone help?</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby", "devise"], "answers": [{"tags": [], "owner": {"reputation": 6936, "user_id": 445144, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d0b6279eb192f0e53affd0061011e47d?s=128&d=identicon&r=PG", "display_name": "scaryguy", "link": "https://stackoverflow.com/users/445144/scaryguy"}, "is_accepted": true, "score": 2, "last_activity_date": 1472883799, "creation_date": 1472883799, "answer_id": 39303887, "question_id": 39114255, "link": "https://stackoverflow.com/questions/39114255/cannot-migrate-devise-token-auth-project/39303887#39303887", "title": "Cannot migrate Devise Token Auth project", "body": "<p>This is unbelievable but it's all about a typo (or something like that?) at the migration file which is generated by the generator.</p>\n\n<p>See the <code>..._devise_token_auth_create_users.rb</code> file at <code>db/migrate</code> directory. You will see that at the first line of the migration file there is an odd <code>[4.2]</code> string.</p>\n\n<pre><code>class DeviseTokenAuthCreateUsers &lt; ActiveRecord::Migration[4.2]\n</code></pre>\n\n<p>Just remove that odd <code>[4.2]</code> string from that line and voila.</p>\n\n<p>However, I must admit that, this experience made me think twice about using this gem at my project.</p>\n"}], "owner": {"reputation": 45, "user_id": 4348377, "user_type": "registered", "accept_rate": 33, "profile_image": "https://lh5.googleusercontent.com/-WWoVhKmowOM/AAAAAAAAAAI/AAAAAAAABEU/uDfj_7jyBkE/photo.jpg?sz=128", "display_name": "Andros Yang", "link": "https://stackoverflow.com/users/4348377/andros-yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 39303887, "answer_count": 1, "score": 1, "last_activity_date": 1472883799, "creation_date": 1472011618, "question_id": 39114255, "link": "https://stackoverflow.com/questions/39114255/cannot-migrate-devise-token-auth-project", "title": "Cannot migrate Devise Token Auth project", "body": "<pre><code>NoMethodError: undefined method `[]' for #&lt;ActiveRecord::Migration:0x00000001fe0fa0&gt;\n</code></pre>\n\n<p>This pops up whenever I try running rake:db migrate</p>\n\n<p><a href=\"http://www.developingandrails.com/2015/02/api-authentication-with-devisetokenauth.html\" rel=\"nofollow\">I've been following this guide word for word</a></p>\n\n<p>I'm having tremendous trouble interpreting the stacktrace as well\n<a href=\"http://pastebin.com/pE1n8XRx\" rel=\"nofollow\">Pastebin</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "vbscript"], "comments": [{"owner": {"reputation": 14608, "user_id": 692942, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2e501358dbf183e074c2f9a7896fbff?s=128&d=identicon&r=PG&f=1", "display_name": "user692942", "link": "https://stackoverflow.com/users/692942/user692942"}, "edited": false, "score": 0, "creation_date": 1472038642, "post_id": 39113881, "comment_id": 65589961, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/956362/how-to-run-a-file-using-visualbasicscript-vbs\">How to run a file using VisualBasicScript (.vbs)</a>"}, {"owner": {"reputation": 14608, "user_id": 692942, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2e501358dbf183e074c2f9a7896fbff?s=128&d=identicon&r=PG&f=1", "display_name": "user692942", "link": "https://stackoverflow.com/users/692942/user692942"}, "edited": false, "score": 0, "creation_date": 1472039115, "post_id": 39113881, "comment_id": 65590233, "body": "Better match for possible duplciate - <a href=\"http://stackoverflow.com/q/28088237/692942\">stackoverflow.com/q/28088237/692942</a>"}, {"owner": {"reputation": 14608, "user_id": 692942, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2e501358dbf183e074c2f9a7896fbff?s=128&d=identicon&r=PG&f=1", "display_name": "user692942", "link": "https://stackoverflow.com/users/692942/user692942"}, "edited": false, "score": 0, "creation_date": 1472039294, "post_id": 39113881, "comment_id": 65590367, "body": "I would suggest before posting anymore questions go and read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>. This is just another duplicate of a question that&#39;s been asked time after time. It takes a minute to lookup the <a href=\"https://msdn.microsoft.com/en-us/library/d5fk67ky%28v=vs.84%29.aspx?f=255&amp;MSPPError=-2147217396\" rel=\"nofollow noreferrer\"><code>WScript.Shell</code> <code>Run()</code> method in the MSDN Library documentation</a>."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 5773015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd1cf87b2153d7bd668d1253c2288dcd?s=128&d=identicon&r=PG&f=1", "display_name": "Vibha", "link": "https://stackoverflow.com/users/5773015/vibha"}, "edited": false, "score": 0, "creation_date": 1472033081, "post_id": 39114857, "comment_id": 65586224, "body": "hey, suppose i want to pass variables as my parameters, is it possible? example:  newva =  10 obj = newobj.Run(&quot;%comspec% /c ruby E:\\rubyfile.rb  newva &gt; D:\\newdoc.txt&quot;, 1, true) ? is this possible?  because the variable which i pass as parameter is changing frequently so i cannot pass a argument to the function."}, {"owner": {"reputation": 14608, "user_id": 692942, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c2e501358dbf183e074c2f9a7896fbff?s=128&d=identicon&r=PG&f=1", "display_name": "user692942", "link": "https://stackoverflow.com/users/692942/user692942"}, "edited": false, "score": 0, "creation_date": 1472039159, "post_id": 39114857, "comment_id": 65590269, "body": "Carbon copy of yet another duplicate answer you&#39;ve given before - <a href=\"http://stackoverflow.com/a/28088558/692942\">stackoverflow.com/a/28088558/692942</a>"}], "tags": [], "owner": {"reputation": 37163, "user_id": 603855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91b541c001a51839aebfb1da088861b9?s=128&d=identicon&r=PG", "display_name": "Ekkehard.Horner", "link": "https://stackoverflow.com/users/603855/ekkehard-horner"}, "is_accepted": true, "score": 1, "last_activity_date": 1472015745, "last_edit_date": 1472015745, "creation_date": 1472015401, "answer_id": 39114857, "question_id": 39113881, "link": "https://stackoverflow.com/questions/39113881/call-ruby-from-a-vbscript/39114857#39114857", "title": "Call Ruby from a VBScript", "body": "<p>You need a shell (<code>%comspec% /c</code>) to get a shell's feature like <code>&gt;</code> redirection. So change</p>\n\n<pre><code>obj = newobj.Run(\"ruby E:\\rubyfile.rb &gt; D:\\newdoc.txt\",1,true)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>nRet = newobj.Run(\"%comspec% /c ruby E:\\rubyfile.rb &gt; D:\\newdoc.txt\",1,true)\n</code></pre>\n\n<p>(Study the <a href=\"https://msdn.microsoft.com/en-us/library/d5fk67ky(v=vs.84).aspx\" rel=\"nofollow\">docs for .Run</a> to see the reason for <code>nRet</code> instead of <code>obj</code> and spend a thought on the lousy-ness of the name \"newobj\")</p>\n"}], "owner": {"reputation": 31, "user_id": 5773015, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd1cf87b2153d7bd668d1253c2288dcd?s=128&d=identicon&r=PG&f=1", "display_name": "Vibha", "link": "https://stackoverflow.com/users/5773015/vibha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "accepted_answer_id": 39114857, "answer_count": 1, "score": 0, "last_activity_date": 1472020307, "creation_date": 1472008945, "last_edit_date": 1472020307, "question_id": 39113881, "link": "https://stackoverflow.com/questions/39113881/call-ruby-from-a-vbscript", "title": "Call Ruby from a VBScript", "body": "<p>Hey I have been working with <code>ruby</code> and <code>vbscript</code> lately. There is a scenario where I need to call a ruby script from another <code>vbscript</code> and I am stuck there. I tried this code,</p>\n\n<pre><code>Set newobj = CreateObject(\"WScript.shell\")\nobj = newobj.Run(\"ruby E:\\rubyfile.rb &gt; D:\\newdoc.txt\",1,true)\n</code></pre>\n\n<p>but the ruby script is not giving the result. Am I doing it right or is there some other way to do it? \nIf the ruby script is executed separately then the results are generated, so the problem is not with the ruby script. </p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 3073, "user_id": 4127542, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6a49e7f884f0e5abe66ec87101956457?s=128&d=identicon&r=PG&f=1", "display_name": "phani", "link": "https://stackoverflow.com/users/4127542/phani"}, "edited": false, "score": 0, "creation_date": 1472015231, "post_id": 39114572, "comment_id": 65576369, "body": "Added &quot;socket:  E:/xampp/mysql/mysql.sock&quot;. did not work"}], "tags": [], "owner": {"reputation": 325, "user_id": 4643690, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9_dmW_kS7R0/AAAAAAAAAAI/AAAAAAAAAAw/AeA0aY62T0w/photo.jpg?sz=128", "display_name": "bk chovatiya", "link": "https://stackoverflow.com/users/4643690/bk-chovatiya"}, "is_accepted": false, "score": 0, "last_activity_date": 1472013775, "creation_date": 1472013775, "answer_id": 39114572, "question_id": 39113547, "link": "https://stackoverflow.com/questions/39113547/rails-mysql-activerecordconnectionnotestablished/39114572#39114572", "title": "Rails Mysql ActiveRecord::ConnectionNotEstablished", "body": "<p>Have a look at your /etc/mysql/my.cnf and check for the binding address of the mysql deamon. It probably doesnt bind to any ip. Then it will use unix sockets which are by the way faster then ip connections,...</p>\n\n<p>Option name for the bind address is bind-address if theres no match it wont bind to any address. Also have a look for socket which specifies the path to the unix socket. You can use the socket like this in your database.yml</p>\n\n<pre><code>development:\n  adapter: mysql2\n  encoding: utf8\n  database: simple_cms_development\n  username: root\n  password: root\n  host: 127.0.0.1\n  pool: 5\n  socket: /path/to/the/socket/mysql.sock\n</code></pre>\n\n<p>That should do it for you,</p>\n"}], "owner": {"reputation": 3073, "user_id": 4127542, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/6a49e7f884f0e5abe66ec87101956457?s=128&d=identicon&r=PG&f=1", "display_name": "phani", "link": "https://stackoverflow.com/users/4127542/phani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472013775, "creation_date": 1472006246, "question_id": 39113547, "link": "https://stackoverflow.com/questions/39113547/rails-mysql-activerecordconnectionnotestablished", "title": "Rails Mysql ActiveRecord::ConnectionNotEstablished", "body": "<p>I created a new rails application, when i started server an tried to connect it gave this server</p>\n\n<p><strong>error</strong></p>\n\n<pre><code>activerecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:546:in `retrieve_connection'\nactiverecord (4.0.0) lib/active_record/connection_handling.rb:79:in `retrieve_connection'\nactiverecord (4.0.0) lib/active_record/connection_handling.rb:53:in `connection'\nactiverecord (4.0.0) lib/active_record/query_cache.rb:51:in `restore_query_cache_settings'\nactiverecord (4.0.0) lib/active_record/query_cache.rb:43:in `rescue in call'\nactiverecord (4.0.0) lib/active_record/query_cache.rb:32:in `call'\nactiverecord (4.0.0) lib/active_record/connection_adapters/abstract/connection_pool.rb:626:in `call'\nactiverecord (4.0.0) lib/active_record/migration.rb:369:in `call'\nactionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\nactivesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__713349442__call__callbacks'\nactivesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'\nactionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'\nactionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'\nactionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'\nactionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'\nactionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\nrailties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'\nrailties (4.0.0) lib/rails/rack/logger.rb:21:in `block in call'\nactivesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `block in tagged'\nactivesupport (4.0.0) lib/active_support/tagged_logging.rb:25:in `tagged'\nactivesupport (4.0.0) lib/active_support/tagged_logging.rb:67:in `tagged'\nrailties (4.0.0) lib/rails/rack/logger.rb:21:in `call'\nactionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'\nrack (1.5.5) lib/rack/methodoverride.rb:21:in `call'\nrack (1.5.5) lib/rack/runtime.rb:17:in `call'\nactivesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'\nrack (1.5.5) lib/rack/lock.rb:17:in `call'\nactionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'\nrailties (4.0.0) lib/rails/engine.rb:511:in `call'\nrailties (4.0.0) lib/rails/application.rb:97:in `call'\nrack (1.5.5) lib/rack/lock.rb:17:in `call'\nrack (1.5.5) lib/rack/content_length.rb:14:in `call'\nrack (1.5.5) lib/rack/handler/webrick.rb:60:in `service'\nC:/Ruby23/lib/ruby/2.3.0/webrick/httpserver.rb:140:in `service'\nC:/Ruby23/lib/ruby/2.3.0/webrick/httpserver.rb:96:in `run'\nC:/Ruby23/lib/ruby/2.3.0/webrick/server.rb:296:in `block in start_thread'\n</code></pre>\n\n<p><strong>database.yml</strong></p>\n\n<pre><code>development:\n  adapter: mysql2\n  encoding: utf8\n  database: simple_cms_development\n  pool: 5\n  username: root\n  password: root\n  host: 127.0.0.1\n</code></pre>\n\n<p>Mysql is running and the password is correct. I tried connecting from command line</p>\n\n<pre><code>G:\\simple_cms&gt;mysql -uroot -proot simple_cms_development\nWarning: Using a password on the command line interface can be insecure.\nWelcome to the MySQL monitor.  Commands end with ; or \\g.\nYour MySQL connection id is 7\nServer version: 5.6.21 MySQL Community Server (GPL)\n\nCopyright (c) 2000, 2014, Oracle and/or its affiliates. All rights reserved.\n\nOracle is a registered trademark of Oracle Corporation and/or its\naffiliates. Other names may be trademarks of their respective\nowners.\n\nType 'help;' or '\\h' for help. Type '\\c' to clear the current input statement.\n\nmysql&gt;\n</code></pre>\n\n<p>Can someone tell me what might be the possible cause for that error</p>\n"}, {"tags": ["c", "ruby", "mri"], "comments": [{"owner": {"reputation": 279, "user_id": 6366047, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/986546a4d07bc47d42c714e762082a51?s=128&d=identicon&r=PG", "display_name": "csTroubled", "link": "https://stackoverflow.com/users/6366047/cstroubled"}, "reply_to_user": {"reputation": 52633, "user_id": 3155639, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d254eedd932f950213109aa3706aba74?s=128&d=identicon&r=PG", "display_name": "Alexander O&#39;Mara", "link": "https://stackoverflow.com/users/3155639/alexander-omara"}, "edited": false, "score": 0, "creation_date": 1472006050, "post_id": 39113492, "comment_id": 65574179, "body": "@AlexanderO&#39;Mara No, it&#39;s not, this define seems to be referencing the enum."}, {"owner": {"reputation": 52633, "user_id": 3155639, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d254eedd932f950213109aa3706aba74?s=128&d=identicon&r=PG", "display_name": "Alexander O&#39;Mara", "link": "https://stackoverflow.com/users/3155639/alexander-omara"}, "edited": false, "score": 0, "creation_date": 1472006188, "post_id": 39113492, "comment_id": 65574199, "body": "It&#39;s not a multi-line macro: <a href=\"http://stackoverflow.com/questions/16685211/c-define-multiline-macro\" title=\"c define multiline macro\">stackoverflow.com/questions/16685211/c-define-multiline-macr&zwnj;&#8203;o</a>"}, {"owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "edited": false, "score": 1, "creation_date": 1472006675, "post_id": 39113492, "comment_id": 65574299, "body": "Duplicate of: <a href=\"http://stackoverflow.com/q/6830602\">stackoverflow.com/q/6830602</a>"}, {"owner": {"reputation": 34061, "user_id": 616460, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/Yiloe.png?s=128&g=1", "display_name": "Jason C", "link": "https://stackoverflow.com/users/616460/jason-c"}, "edited": false, "score": 0, "creation_date": 1472009915, "post_id": 39113492, "comment_id": 65574955, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/6830602/redefining-enum-enumerators-with-define\">Redefining enum enumerators with #define</a>"}], "answers": [{"tags": [], "owner": {"reputation": 199706, "user_id": 1566221, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ce3ea4ffd1023d4382f397312352726d?s=128&d=identicon&r=PG", "display_name": "rici", "link": "https://stackoverflow.com/users/1566221/rici"}, "is_accepted": false, "score": 0, "last_activity_date": 1472006042, "creation_date": 1472006042, "answer_id": 39113526, "question_id": 39113492, "link": "https://stackoverflow.com/questions/39113492/what-does-the-define-robject-embed-len-max-robject-embed-len-max-do/39113526#39113526", "title": "What does the #define ROBJECT_EMBED_LEN_MAX ROBJECT_EMBED_LEN_MAX do?", "body": "<p>The <code>#define</code>s make it possible to test for the existence of the definition at compile-time using <code>#ifdef</code>. (You cannot test for the existence of an enum at compile-time.)</p>\n\n<p>Since the C preprocessor doesn't do recursive substitution, defining a symbol as itself effectively does nothing; the symbol is replaced once with itself, and then passed normally to the compiler.</p>\n"}], "owner": {"reputation": 279, "user_id": 6366047, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/986546a4d07bc47d42c714e762082a51?s=128&d=identicon&r=PG", "display_name": "csTroubled", "link": "https://stackoverflow.com/users/6366047/cstroubled"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1472006578, "creation_date": 1472005748, "question_id": 39113492, "link": "https://stackoverflow.com/questions/39113492/what-does-the-define-robject-embed-len-max-robject-embed-len-max-do", "title": "What does the #define ROBJECT_EMBED_LEN_MAX ROBJECT_EMBED_LEN_MAX do?", "body": "<p>Browsing through MRI's code, I found these <code>#define</code>s I don't understand: </p>\n\n<pre><code>#define ROBJECT_EMBED_LEN_MAX ROBJECT_EMBED_LEN_MAX\n#define ROBJECT_EMBED ROBJECT_EMBED\nenum {\n    ROBJECT_EMBED_LEN_MAX = 3,\n    ROBJECT_EMBED = RUBY_FL_USER1,\n\n    ROBJECT_ENUM_END\n};\n</code></pre>\n\n<p>What's the point of those <code>#define</code>s? They seem to do nothing...</p>\n\n<p>This code is found in the <code>ruby/include/ruby/ruby.h</code> file in the ruby github repo.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "capybara"], "comments": [{"owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "edited": false, "score": 0, "creation_date": 1472005091, "post_id": 39113397, "comment_id": 65573954, "body": "please remove the <code>Steps needed</code> section from the question. Its irrelevant"}, {"owner": {"reputation": 1038, "user_id": 6484276, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/bAeIC.png?s=128&g=1", "display_name": "kareem_emad", "link": "https://stackoverflow.com/users/6484276/kareem-emad"}, "reply_to_user": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "edited": false, "score": 0, "creation_date": 1472005185, "post_id": 39113397, "comment_id": 65573976, "body": "but I&#39;m not able to run those steps on windows , i just want the rspec files to work on the assignment"}, {"owner": {"reputation": 1038, "user_id": 6484276, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/bAeIC.png?s=128&g=1", "display_name": "kareem_emad", "link": "https://stackoverflow.com/users/6484276/kareem-emad"}, "reply_to_user": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "edited": false, "score": 0, "creation_date": 1472005280, "post_id": 39113397, "comment_id": 65573989, "body": "i have asked before for a solution ,but no one have answered ."}, {"owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "edited": false, "score": 0, "creation_date": 1472005387, "post_id": 39113397, "comment_id": 65574010, "body": "@KarremEmad. Look at my answer and see if it helps. And btw, read <a href=\"http://stackoverflow.com/help/how-to-ask\">this</a> to know how to ask a good question. Everyone is busy and you can&#39;t ask them to read a very long question. Please remove the <code>Steps needed</code>  section if you want to get answers."}, {"owner": {"reputation": 1038, "user_id": 6484276, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/bAeIC.png?s=128&g=1", "display_name": "kareem_emad", "link": "https://stackoverflow.com/users/6484276/kareem-emad"}, "reply_to_user": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "edited": false, "score": 0, "creation_date": 1472005774, "post_id": 39113397, "comment_id": 65574116, "body": "If I could get a solution  , i won&#39;t have asked for this . thanks  , Arun . I will remove the whole question  , it seems that no one have an answer ,"}], "answers": [{"comments": [{"owner": {"reputation": 1038, "user_id": 6484276, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/bAeIC.png?s=128&g=1", "display_name": "kareem_emad", "link": "https://stackoverflow.com/users/6484276/kareem-emad"}, "edited": false, "score": 0, "creation_date": 1472005472, "post_id": 39113441, "comment_id": 65574032, "body": "yes , I have tried this and it works for running rails generate rspec:install   ,,,,but rspec command don&#39;t work because this version  2.8 don&#39;t create all necessary as the newer versions do"}, {"owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "reply_to_user": {"reputation": 1038, "user_id": 6484276, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/bAeIC.png?s=128&g=1", "display_name": "kareem_emad", "link": "https://stackoverflow.com/users/6484276/kareem-emad"}, "edited": false, "score": 0, "creation_date": 1472005593, "post_id": 39113441, "comment_id": 65574067, "body": "@KareemEmad, If you tried that, you should have included that in the question."}, {"owner": {"reputation": 1038, "user_id": 6484276, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/bAeIC.png?s=128&g=1", "display_name": "kareem_emad", "link": "https://stackoverflow.com/users/6484276/kareem-emad"}, "edited": false, "score": 0, "creation_date": 1472005937, "post_id": 39113441, "comment_id": 65574154, "body": "ok, I will re-create it ,just waiting for bundle update to finish"}, {"owner": {"reputation": 1038, "user_id": 6484276, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/bAeIC.png?s=128&g=1", "display_name": "kareem_emad", "link": "https://stackoverflow.com/users/6484276/kareem-emad"}, "edited": false, "score": 0, "creation_date": 1472006615, "post_id": 39113441, "comment_id": 65574288, "body": "I couldn&#39;t embed images in my post anymore  , so i have upload it <a href=\"http://www.mediafire.com/download/50u1hbs51bacgu4/55.png\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "reply_to_user": {"reputation": 1038, "user_id": 6484276, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/bAeIC.png?s=128&g=1", "display_name": "kareem_emad", "link": "https://stackoverflow.com/users/6484276/kareem-emad"}, "edited": false, "score": 0, "creation_date": 1472006777, "post_id": 39113441, "comment_id": 65574318, "body": "@KareemEmad, Find a file which <code>requires</code> <code>rails_helper</code> and replace it with <code>spec_helper</code>. Let me know if this solves the issue"}, {"owner": {"reputation": 1038, "user_id": 6484276, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/bAeIC.png?s=128&g=1", "display_name": "kareem_emad", "link": "https://stackoverflow.com/users/6484276/kareem-emad"}, "edited": false, "score": 0, "creation_date": 1472007341, "post_id": 39113441, "comment_id": 65574427, "body": "yes , I found the file  ,but I could find that require statement  ,the error log points to line  54  in the file  which is   return gem_original_require(path)   , i will upload this file for you if you want to look at"}, {"owner": {"reputation": 1038, "user_id": 6484276, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/bAeIC.png?s=128&g=1", "display_name": "kareem_emad", "link": "https://stackoverflow.com/users/6484276/kareem-emad"}, "edited": false, "score": 0, "creation_date": 1472007705, "post_id": 39113441, "comment_id": 65574494, "body": "*could  not  find"}], "tags": [], "owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "is_accepted": false, "score": 0, "last_activity_date": 1472005321, "creation_date": 1472005321, "answer_id": 39113441, "question_id": 39113397, "link": "https://stackoverflow.com/questions/39113397/cannot-create-the-rspec-files-on-windows-rails-app/39113441#39113441", "title": "cannot create the rspec files on windows &#39;rails app&quot;", "body": "<p>The problem is that rspec versions > 2.8.0 don't go well with <code>Windows</code>. Can you try to install an older version of <code>rspec-rails</code>? Include this in your Gemfile.</p>\n\n<pre><code>gem 'rspec-rails', '~&gt; 2.8'\n</code></pre>\n\n<p>Run <code>bundle install</code> and then try</p>\n\n<pre><code>rails g rspec:install\n</code></pre>\n"}], "owner": {"reputation": 1038, "user_id": 6484276, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/bAeIC.png?s=128&g=1", "display_name": "kareem_emad", "link": "https://stackoverflow.com/users/6484276/kareem-emad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1472005321, "creation_date": 1472004896, "question_id": 39113397, "link": "https://stackoverflow.com/questions/39113397/cannot-create-the-rspec-files-on-windows-rails-app", "title": "cannot create the rspec files on windows &#39;rails app&quot;", "body": "<p>I'm running on windows 7 and I cannot install/create the rspec files and capybara  which is needed to work on the assignment .</p>\n\n<p>If you could finish the simple setup steps listed below  and give me a link to the empty app repository  so I could download to finish the assignment , I will be so gratefull to you .</p>\n\n<p>by the way , I 'm getting the following errors in step 4 if someone could help . I have asked before but no one have answered ;(\n<a href=\"https://i.stack.imgur.com/c595O.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/c595O.png\" alt=\"enter image description here\"></a>\n<a href=\"https://i.stack.imgur.com/fNPfo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fNPfo.png\" alt=\"enter image description here\"></a></p>\n\n<p>Steps needed :</p>\n\n<ol>\n<li><p>Create a new Rails application called todolists</p></li>\n<li><p>Add the following specification to your Gemfile</p>\n\n<p>group :test do</p>\n\n<p>gem 'rspec-rails', '~> 3.0'</p>\n\n<p>gem 'capybara'</p>\n\n<p>end</p></li>\n<li><p>Run the bundle command to resolve new gems</p></li>\n<li><p>From the todolists application root directory, initialize the rspec tests using the rails generate</p></li>\n</ol>\n\n<p>rspec:install command</p>\n\n<pre><code>[todolists]$ rails generate rspec:install\n\ncreate .rspec\n\ncreate spec\n\ncreate spec/spec_helper.rb\n\ncreate spec/rails_helper.rb\n</code></pre>\n\n<p>Add the following line to .rspec to add verbose output to test results.</p>\n\n<pre><code>--format documentation\n</code></pre>\n\n<ol start=\"5\">\n<li><p>Download and extract the starter set of bootstrap files.</p>\n\n<p>1</p>\n\n<p>|-- Gemfile</p>\n\n<p>|-- db</p>\n\n<p>| \u2018-- seed.rb</p>\n\n<p>\u2018-- spec</p>\n\n<p>\u2018-- features</p>\n\n<p>\u2018-- module3_action_pack_spec.rb</p></li>\n</ol>\n\n<p>\u2022 overwrite your existing Gemfile with the Gemfile from the bootstrap fileset. They should be nearly identical,</p>\n\n<p>but this is done to make sure the gems and versions you use in your solution can be processed by the</p>\n\n<p>automated Grader when you submit. Any submission should be tested with this version of the file.</p>\n\n<p>\u2022 overwrite your existing db/seed.rb file using the seeds.rb provided with the bootstrap fileset. The</p>\n\n<p>bootstrap seeds.rb file contains some test data that will be useful during development and unit tests.</p>\n\n<p>\u2022 add the spec/features/module3_action_pack_spec.rb file provided with the bootstrap fileset to your</p>\n\n<p>todolists application. Within your application root directory, you will first need to create a corresponding</p>\n\n<p>spec/features sub-directory to place the module3_action_pack_spec.rb file. This file contains tests that</p>\n\n<p>will help determine whether you have completed the assignment.</p>\n\n<p>6-run rspec</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "edited": false, "score": 0, "creation_date": 1472003214, "post_id": 39113174, "comment_id": 65573564, "body": "why you use redirect two times in action <code>like</code>"}, {"owner": {"reputation": 83, "user_id": 4282244, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9d8545d620a27003a570b704c36a86df?s=128&d=identicon&r=PG&f=1", "display_name": "Deez Nuuts", "link": "https://stackoverflow.com/users/4282244/deez-nuuts"}, "reply_to_user": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "edited": false, "score": 0, "creation_date": 1472003500, "post_id": 39113174, "comment_id": 65573634, "body": "oh i see thats my error"}, {"owner": {"reputation": 83, "user_id": 4282244, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9d8545d620a27003a570b704c36a86df?s=128&d=identicon&r=PG&f=1", "display_name": "Deez Nuuts", "link": "https://stackoverflow.com/users/4282244/deez-nuuts"}, "reply_to_user": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "edited": false, "score": 0, "creation_date": 1472003551, "post_id": 39113174, "comment_id": 65573643, "body": "i dont have error now but the alert not working?"}, {"owner": {"reputation": 83, "user_id": 4282244, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9d8545d620a27003a570b704c36a86df?s=128&d=identicon&r=PG&f=1", "display_name": "Deez Nuuts", "link": "https://stackoverflow.com/users/4282244/deez-nuuts"}, "reply_to_user": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "edited": false, "score": 0, "creation_date": 1472003652, "post_id": 39113174, "comment_id": 65573659, "body": "uzaif can i feed you back?"}, {"owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "edited": false, "score": 0, "creation_date": 1472003654, "post_id": 39113174, "comment_id": 65573660, "body": "@GeromeJohnPangan, Inspect the network tab and see if the XHR was successful."}, {"owner": {"reputation": 3309, "user_id": 3786332, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R33iW.jpg?s=128&g=1", "display_name": "uzaif", "link": "https://stackoverflow.com/users/3786332/uzaif"}, "edited": false, "score": 0, "creation_date": 1472004176, "post_id": 39113174, "comment_id": 65573768, "body": "@GeromeJohnPangan what is file  name of <code>js.erb</code>"}, {"owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "edited": false, "score": 0, "creation_date": 1472004253, "post_id": 39113174, "comment_id": 65573785, "body": "@GeromeJohnPangan Updated the answer. See if it helps."}], "answers": [{"tags": [], "owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "is_accepted": true, "score": 3, "last_activity_date": 1472004182, "last_edit_date": 1472004182, "creation_date": 1472003551, "answer_id": 39113230, "question_id": 39113174, "link": "https://stackoverflow.com/questions/39113174/rendering-js-erb-in-rails/39113230#39113230", "title": "Rendering js.erb in rails", "body": "<p>In a controller action, neither <code>render</code> nor <code>redirect_to</code> stops the execution of the action. That is why you're getting a <code>DoubleRenderError</code>. Remove the first <code>redirect_to</code> and everything should be fine.</p>\n\n<pre><code>def like\n  @user = current_user\n  @post.liked_by(@user) # I am unsure what you're trying to accomplish here\n  respond_to do |format|\n    format.html { redirect_to posts_path }\n    format.js { render :stablelike }\n  end\nend\n</code></pre>\n\n<p>If this doesn't work, probably you have not setup <code>stablelike</code> action to respond to <code>xhr</code> requests. You can do that by</p>\n\n<pre><code>def stablelike\n  respond_to  do |format|\n    # other formats\n    format.js # by default looks for `stablelike.js.erb`\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 4282244, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9d8545d620a27003a570b704c36a86df?s=128&d=identicon&r=PG&f=1", "display_name": "Deez Nuuts", "link": "https://stackoverflow.com/users/4282244/deez-nuuts"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1235, "favorite_count": 0, "accepted_answer_id": 39113230, "answer_count": 1, "score": 0, "last_activity_date": 1472004182, "creation_date": 1472003115, "question_id": 39113174, "link": "https://stackoverflow.com/questions/39113174/rendering-js-erb-in-rails", "title": "Rendering js.erb in rails", "body": "<p>i want to try my js.erb if it is working?</p>\n\n<p>here my view posts/index to trigger</p>\n\n<pre><code> &lt;%= link_to \"Like\", {:controller =&gt; 'post', :id =&gt; post , :action =&gt;'like'}, class: \"btn btn-danger btn-xs\", remote: true %&gt;\n</code></pre>\n\n<p>my post controller </p>\n\n<pre><code>def like\n@user = current_user\n@post.liked_by(@user)\nredirect_to posts_path\nrespond_to do |format|\n  format.html {redirect_to posts_path}\n  format.js { render :action =&gt; 'stablelike' }\n\nend\nend\n</code></pre>\n\n<p>and this is my js.erb to test </p>\n\n<pre><code>alert(\"working\");\n</code></pre>\n\n<p>and this is my error: when i inspect my Chrome</p>\n\n<h1>AbstractController::DoubleRenderError at /post/like/85</h1>\n\n<blockquote>\n  <p>Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like \"redirect_to(...) and return\".</p>\n</blockquote>\n\n<h2>app/controllers/posts_controller.rb, line 83</h2>\n\n<pre><code> ``` ruby\n 78       @user = current_user\n 79       @post.liked_by(@user)\n 80       redirect_to posts_path\n 81       respond_to do |format|\n 82         format.html {redirect_to posts_path}\n</code></pre>\n\n<blockquote>\n  <p>83         format.js { render :action => 'stablelike' }\n       84<br>\n       85       end\n       86     end\n       87   </p>\n</blockquote>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 3851, "user_id": 1136342, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/d7fb3970505d9f22496189667a0fefe8?s=128&d=identicon&r=PG", "display_name": "user1136342", "link": "https://stackoverflow.com/users/1136342/user1136342"}, "edited": false, "score": 0, "creation_date": 1473025368, "post_id": 39112684, "comment_id": 65975461, "body": "Is it common to have an attr_accessor and then only use self to assign values while just directly using the value otherwise? Or do people generally use self for both assigning and reading to make it less confusing and have less chances of missing a self? @kallax"}], "tags": [], "owner": {"reputation": 1128, "user_id": 3973117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f52a78aa4cf83a8372e28a27ce3511c?s=128&d=identicon&r=PG", "display_name": "jan.zikan", "link": "https://stackoverflow.com/users/3973117/jan-zikan"}, "is_accepted": false, "score": 1, "last_activity_date": 1471998742, "creation_date": 1471998742, "answer_id": 39112684, "question_id": 39112629, "link": "https://stackoverflow.com/questions/39112629/cant-always-access-value-of-instance-variable-without-even-with-attr-accessor/39112684#39112684", "title": "Can&#39;t always access value of instance variable without @ even with attr_accessor", "body": "<p>When you are assigning value to instance variable through accessor / writer, you have to use <code>self</code>, otherwise Ruby interpreter thinks it is a local variable. In your case, the testFn code should look like this:</p>\n\n<pre><code>def testFn\n  puts test\n  self.test = test + 1\nend\n</code></pre>\n"}], "owner": {"reputation": 3851, "user_id": 1136342, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/d7fb3970505d9f22496189667a0fefe8?s=128&d=identicon&r=PG", "display_name": "user1136342", "link": "https://stackoverflow.com/users/1136342/user1136342"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "closed_date": 1471998926, "answer_count": 1, "score": 0, "last_activity_date": 1471998742, "creation_date": 1471998232, "question_id": 39112629, "link": "https://stackoverflow.com/questions/39112629/cant-always-access-value-of-instance-variable-without-even-with-attr-accessor", "closed_reason": "Duplicate", "title": "Can&#39;t always access value of instance variable without @ even with attr_accessor", "body": "<p>How come I get the error <code>NoMethodError: undefined method '+' for nil:NilClass</code> but the line with <code>puts test</code> prints out a 1 so we know that the value is initialized?</p>\n\n<pre><code>class TestClass\n  attr_accessor :test\n  def initialize()\n    @test = 1\n  end\n\n  def testFn\n    puts test\n    test = test + 1\n  end\nend\n\nt = TestClass.new\nt.testFn\n</code></pre>\n\n<p>It also works if I change <code>test</code> to <code>@test</code> but I thought I didn't have to if I had <code>attr_accessor :test</code></p>\n"}, {"tags": ["html", "css", "ruby", "xml", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1472078469, "post_id": 39112620, "comment_id": 65613503, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/39129327/using-nokogiris-css-method-to-get-all-elements-within-an-alt-tag\">Using Nokogiri&#39;s CSS method to get all elements within an alt tag</a>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1472078536, "post_id": 39112620, "comment_id": 65613518, "body": "Please don&#39;t duplicate questions. Ask it once, well, and you&#39;ll get help. Asking repeatedly will only get you into trouble."}], "owner": {"reputation": 4717, "user_id": 1913389, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/QKwb2.png?s=128&g=1", "display_name": "theGreenCabbage", "link": "https://stackoverflow.com/users/1913389/thegreencabbage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472079314, "creation_date": 1471998140, "last_edit_date": 1472079314, "question_id": 39112620, "link": "https://stackoverflow.com/questions/39112620/using-nokogiris-css-method-to-get-all-names-within-a-team-page", "title": "Using Nokogiri&#39;s CSS method to get all names within a team page", "body": "<p>I am trying to use Nokogiri's CSS method to get some names from my HTML.</p>\n\n<p>This is an example of the HTML:</p>\n\n<pre><code>&lt;section class=\"container partner-customer padding-bottom--60\"&gt;\n    &lt;div&gt;\n        &lt;div&gt;\n            &lt;a id=\"technologies\"&gt;&lt;/a&gt;\n            &lt;h4 class=\"center-align\"&gt;The Team&lt;/h4&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"consultant list-across wrap\"&gt;\n        &lt;div class=\"engineering\"&gt;\n            &lt;img class=\"\" src=\"https://v0001.jpg\" alt=\"Person 1\"/&gt;\n            &lt;p&gt;Person 1&lt;br&gt;Founder, Chairman &amp;amp; CTO&lt;/p&gt;\n        &lt;/div&gt;\n        &lt;div class=\"engineering\"&gt;\n            &lt;img class=\"\" src=\"https://v0002.png\" alt=\"Person 2\"/&gt;&lt;/a&gt;\n            &lt;p&gt;Person 2&lt;br&gt;Founder, VP of Engineering&lt;/p&gt;\n        &lt;/div&gt;\n        &lt;div class=\"product\"&gt;\n            &lt;img class=\"\" src=\"https://v0003.jpg\" alt=\"Person 3\"/&gt;&lt;/a&gt;\n            &lt;p&gt;Person 3&lt;br&gt;Product&lt;/p&gt;\n        &lt;/div&gt;\n        &lt;div class=\"Human Resources &amp;amp; Admin\"&gt;\n            &lt;img class=\"\" src=\"https://v0004.jpg\" alt=\"Person 4\"/&gt;&lt;/a&gt;\n            &lt;p&gt;Person 4&lt;br&gt;People &amp;amp; Places&lt;/p&gt;\n        &lt;/div&gt;\n        &lt;div class=\"alliances\"&gt;\n            &lt;img class=\"\" src=\"https://v0005.jpg\" alt=\"Person 5\"/&gt;&lt;/a&gt;\n            &lt;p&gt;Person 5&lt;br&gt;VP of Alliances&lt;/p&gt;\n        &lt;/div&gt;\n</code></pre>\n\n<p>What I have so far in my <code>people.rake</code> file is the following:</p>\n\n<pre><code>  staff_site = Nokogiri::HTML(open(\"https://www.website.com/company/team-all\"))\n  all_hands = staff_site.css(\"\").map(&amp;:text).map(&amp;:squish)\n</code></pre>\n\n<p>I am having a little trouble getting all elements within the <code>alt=\"\"</code> tag (the name of the person), as it is nested under a few divs. I was wondering if anyone could give me some assistance on this? </p>\n"}, {"tags": ["ruby", "regex"], "answers": [{"tags": [], "owner": {"reputation": 4700, "user_id": 1686604, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/0yN8A.jpg?s=128&g=1", "display_name": "Archonic", "link": "https://stackoverflow.com/users/1686604/archonic"}, "is_accepted": false, "score": 1, "last_activity_date": 1471999608, "creation_date": 1471999608, "answer_id": 39112775, "question_id": 39112615, "link": "https://stackoverflow.com/questions/39112615/detect-specific-format-of-version-number-using-regex/39112775#39112775", "title": "Detect specific format of version number using regex", "body": "<p>Ah hah! I knew I was close.</p>\n\n<p><code>haystack.select{ |i| i[/(?&lt;=^| )(\\d+)(\\.\\d+)+(?=$| )/] }</code></p>\n\n<p>The asterisk at the end of <code>(\\.\\d+)*</code> was allowing that pattern to repeat any number of times, including zero times. You can limit that with <code>(\\.\\d+){x,y}</code> where x and y are the min and max times. You can also only identify a minimum with <code>(\\.\\d+){x,}</code>. In my case I wanted a minimum of once, which would be <code>(\\.\\d+){1,}</code>, however that's synonymous with <code>(\\.\\d+)+</code>. That only took half the day to figure out...</p>\n"}, {"comments": [{"owner": {"reputation": 4700, "user_id": 1686604, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/0yN8A.jpg?s=128&g=1", "display_name": "Archonic", "link": "https://stackoverflow.com/users/1686604/archonic"}, "edited": false, "score": 0, "creation_date": 1472251226, "post_id": 39113036, "comment_id": 65693310, "body": "Thanks for the detail!"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1472009615, "last_edit_date": 1472009615, "creation_date": 1472001847, "answer_id": 39113036, "question_id": 39112615, "link": "https://stackoverflow.com/questions/39112615/detect-specific-format-of-version-number-using-regex/39113036#39113036", "title": "Detect specific format of version number using regex", "body": "<p>This is only a slight variant of Archonic's answer.</p>\n\n<pre><code>r = /\n    (?&lt;=\\A|\\s) # match the beginning of the string or a space in a positive lookbehind\n    (?:\\d+\\.)+ # match &gt;= 1 digits followed by a period in a non-capture group, &gt;= 1 times \n    \\d+        # match &gt;= 1 digits\n    (?=\\s|\\z)  # match a space or the end of the string in a positive lookahead\n    /x         # free-spacing regex definition mode\n\nhaystack = [\"10.10 Thingy\", \"Thingy 10.10.5\", \"Whatever 4\", \"Whatever 4.x\"]\n\nhaystack.select { |str| str =~ r }\n  #=&gt; [\"10.10 Thingy\", \"Thingy 10.10.5\"]\n</code></pre>\n\n<p>The question was not to return the version information, but to to return the strings that have correct version information. As a result there is no need for the lookarounds:</p>\n\n<pre><code>r = /\n    [\\A\\s\\]    # match the beginning of the string or a space\n    (?:\\d+\\.)+ # match &gt;= 1 digits followed by a period in a non-capture group, &gt;= 1 times \n    \\d+        # match &gt;= 1 digits\n    [\\s\\z]     # match a space or the end of the string in a positive lookahead\n    /x         # free-spacing regex definition mode\n\nhaystack.select { |str| str =~ r }\n  #=&gt; [\"10.10 Thingy\", \"Thingy 10.10.5\"]\n</code></pre>\n\n<p>Suppose one wanted to obtain both the strings that contain valid versions and the versions contained in those strings. One could write the following:</p>\n\n<pre><code>r = /\n    (?&lt;=\\A|\\s\\) # match the beginning of string or a space in a pos lookbehind\n    (?:\\d+\\.)+  # match &gt;= 1 digits then a period in non-capture group, &gt;= 1 times \n    \\d+         # match &gt;= 1 digits\n    (?=\\s|\\z)   # match a space or end of string in a pos lookahead\n    /x          # free-spacing regex definition mode\n\nhaystack.each_with_object({}) do |str,h|\n  version = str[r]\n  h[str] = version if version\nend\n  # =&gt; {\"10.10 Thingy\"=&gt;\"10.10\", \"Thingy 10.10.5\"=&gt;\"10.10.5\"}\n</code></pre>\n"}], "owner": {"reputation": 4700, "user_id": 1686604, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/0yN8A.jpg?s=128&g=1", "display_name": "Archonic", "link": "https://stackoverflow.com/users/1686604/archonic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 39113036, "answer_count": 2, "score": 1, "last_activity_date": 1472009615, "creation_date": 1471998107, "question_id": 39112615, "link": "https://stackoverflow.com/questions/39112615/detect-specific-format-of-version-number-using-regex", "title": "Detect specific format of version number using regex", "body": "<p>I'm looking to extract elements of an array containing a version number, where a version number is either at the start or end of a string or padded by spaces, and is a series of digits and periods but does not start or end with a period. For example \"10.10 Thingy\" and \"Thingy 10.10.5\" is valid, but \"Whatever 4\" is not.</p>\n\n<pre><code>haystack = [\"10.10 Thingy\", \"Thingy 10.10.5\", \"Whatever 4\", \"Whatever 4.x\"]\nhaystack.select{ |i| i[/(?&lt;=^| )(\\d+)(\\.\\d+)*(?=$| )/] }\n=&gt; [\"10.10 Thingy\", \"Thingy 10.10.5\", \"Whatever 4\"]\n</code></pre>\n\n<p>I'm not sure how to modify the regex to require at least one period so that \"Whatever 4\" is not in the results.</p>\n"}, {"tags": ["ruby", "ocra"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1472008373, "post_id": 39112430, "comment_id": 65574642, "body": "it might be that you need to downgrade ruby or rubygems, From the ocra readme: <code>Ruby 1.8.7, 1.9.3, 2.0.0 and 2.1.5 support</code> whereas you&#39;re using 2.4.  By the way this line <code>require &#39;rubygems&#39;</code> hasn&#39;t been necessary since 1.9"}, {"owner": {"reputation": 59, "user_id": 6750003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45321a429cc82aa16395ef33f9b1abc8?s=128&d=identicon&r=PG", "display_name": "AkechiShiro", "link": "https://stackoverflow.com/users/6750003/akechishiro"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1473795610, "post_id": 39112430, "comment_id": 66274823, "body": "I&#39;ve got same error here it is with Ruby 2.0.0 <code>&#47;home&#47;xxxx&#47;.rvm&#47;gems&#47;ruby-2.0.0-p648&#47;gems&#47;ocra-1.3.6&#47;bin&#47;ocr&zwnj;&#8203;a:41:in &#39;relative_path_from&#39;: undefined method &#39;path&#39; for &quot;&#47;home&#47;xxxx&#47;.rvm&#47;gems&#47;ruby-2.0.0-p648@global&quot;:String (NoMethodError)</code>"}, {"owner": {"reputation": 59, "user_id": 6750003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45321a429cc82aa16395ef33f9b1abc8?s=128&d=identicon&r=PG", "display_name": "AkechiShiro", "link": "https://stackoverflow.com/users/6750003/akechishiro"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1474036650, "post_id": 39112430, "comment_id": 66382499, "body": "Also maybe this can help when I run <code>ocra --version</code> it give me this warning: <code>&#47;home&#47;xxxx&#47;.rvm&#47;gems&#47;ruby-2.0.0-p648&#47;gems&#47;ocra-1.3.6&#47;bin&#47;ocr&zwnj;&#8203;a:19: warning: already initialized constant File::ALT_SEPARATOR</code> <code>Ocra 1.3.6</code>"}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 1, "last_activity_date": 1474064086, "creation_date": 1474064086, "answer_id": 39540815, "question_id": 39112430, "link": "https://stackoverflow.com/questions/39112430/building-a-ruby-script-with-ocra-for-cross-platform-uses-but-i-get-the-relative/39540815#39540815", "title": "Building a ruby script with Ocra for cross platform uses but i get the &#39;relative_path_form&#39; with a stacktrace", "body": "<p>Ocra doesn't work on Linux currently.</p>\n\n<p>Doing a google search for </p>\n\n<pre><code>ocra undefined method `path'\n</code></pre>\n\n<p>Linked <a href=\"https://github.com/larsch/ocra/issues/96\" rel=\"nofollow\">here</a>, an issues page on the Ocra github which shows many people have had the same problem. This in turns links <a href=\"https://github.com/larsch/ocra/issues/98\" rel=\"nofollow\">here</a>, where the project maintainer says that Ocra does not work on Linux, though it may be worth a shot with Wine. </p>\n"}], "owner": {"reputation": 59, "user_id": 6750003, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45321a429cc82aa16395ef33f9b1abc8?s=128&d=identicon&r=PG", "display_name": "AkechiShiro", "link": "https://stackoverflow.com/users/6750003/akechishiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 759, "favorite_count": 2, "accepted_answer_id": 39540815, "answer_count": 1, "score": 2, "last_activity_date": 1474064086, "creation_date": 1471996768, "question_id": 39112430, "link": "https://stackoverflow.com/questions/39112430/building-a-ruby-script-with-ocra-for-cross-platform-uses-but-i-get-the-relative", "title": "Building a ruby script with Ocra for cross platform uses but i get the &#39;relative_path_form&#39; with a stacktrace", "body": "<p>I'm trying to build a .exe to execute my script on Windows without any ruby installation.\nI'm using Ocra for that but i have a stack trace.</p>\n\n<p>Also note that there are two files that runs the whole sc and that I use currently RVM and I didn't do any sudo gem install since I use RVM.</p>\n\n<p>Gems used in the first file : </p>\n\n<pre><code>require 'rubygems'\nrequire 'nokogiri'\nrequire 'open-uri'\nrequire 'colorize'\nrequire 'colorized_string'\n</code></pre>\n\n<p>Gems used in the second file :</p>\n\n<pre><code>require 'libnotify'\nrequire './firstfile'\nrequire 'os'\nrequire 'twilio-ruby'\n</code></pre>\n\n<p>Here is what Ocra gives me:</p>\n\n<pre><code>&gt;ocra --output test.exe firstfile.rb secondfile.rb\n/home/xxxx/.rvm/gems/ruby-head/gems/ocra-1.3.6/bin/ocra:41:in `relative_path_from': undefined method `path' for \"/home/xxxx/.rvm/gems/ruby-head@global\":String (NoMethodError)\nfrom /home/xxxx/.rvm/gems/ruby-head/gems/ocra-1.3.6/bin/ocra:779:in `block in build_exe'\nfrom /home/xxxx/.rvm/gems/ruby-head/gems/ocra-1.3.6/bin/ocra:762:in `each'\nfrom /home/xxxx/.rvm/gems/ruby-head/gems/ocra-1.3.6/bin/ocra:762:in `build_exe'\nfrom /home/xxxx/.rvm/gems/ruby-head/gems/ocra-1.3.6/bin/ocra:1177:in `block in &lt;top (required)&gt;'\n</code></pre>\n\n<p>Here is more info about my rvm and my ruby version it's the exact output of 'rvm info'</p>\n\n<pre><code>  system:\nuname:       \"Linux xxxx 4.7.1-1-ARCH #1 SMP PREEMPT Wed Aug 17 08:13:35 CEST 2016 x86_64 GNU/Linux\"\nsystem:      \"arch/libc-2.24/x86_64\"\nbash:        \"/usr/bin/bash =&gt; GNU bash, version 4.3.46(1)-release (x86_64-unknown-linux-gnu)\"\nzsh:         \" =&gt; not installed\"\n\n\n\nrvm:\nversion:      \"rvm 1.27.0 (latest) by Wayne E. Seguin &lt;wayneeseguin@gmail.com&gt;, Michal Papis &lt;mpapis@gmail.com&gt; [https://rvm.io/]\"\nupdated:      \"1 day 23 hours 44 minutes 51 seconds ago\"\npath:         \"/home/xxxx/.rvm\"\n\n\n\nruby:\ninterpreter:  \"ruby\"\nversion:      \"2.4.0dev\"\ndate:         \"2016-05-20\"\nplatform:     \"x86_64-linux\"\npatchlevel:   \"2016-05-20 trunk 55077\"\nfull_version: \"ruby 2.4.0dev (2016-05-20 trunk 55077) [x86_64-linux]\"\n\n  homes:\ngem:          \"/home/xxxx/.rvm/gems/ruby-head\"\nruby:         \"not set\"\n\n  binaries:\nruby:         \"/home/xxxx/.rvm/rubies/ruby-head/bin/ruby\"\nirb:          \"/home/xxxx/.rvm/rubies/ruby-head/bin/irb\"\ngem:          \"/home/xxxx/.rvm/rubies/ruby-head/bin/gem\"\nrake:         \"/home/xxxx/.rvm/gems/ruby-head/bin/rake\"\n\n  environment:\nPATH:         \"/home/xxxx/.rvm/gems/ruby-head/bin:/home/xxxx/.rvm/gems/ruby-head@global/bin:/home/xxxx/.rvm/rubies/ruby-head/bin:/home/xxxx/.rvm/bin:/usr/bin\"\nGEM_HOME:     \"/home/xxxx/.rvm/gems/ruby-head\"\nGEM_PATH:     \"/home/xxxx/.rvm/gems/ruby-head:/home/xxxx/.rvm/gems/ruby-head@global\"\nMY_RUBY_HOME: \"\"\nIRBRC:        \"\"\nRUBYOPT:      \"\"\ngemset:       \"\"\n</code></pre>\n\n<p>My script parse an HTML page and also has to create a file inside the folder it is, write/read to this file and also Libnotify has to set a this i don't know how to exactly explain it but it's some kind of path :</p>\n\n<pre><code>Libnotify.icon_dirs &lt;&lt; '/home/' + ENV['USER'] + '/Downloads/NotificationIcons/'\n</code></pre>\n\n<p>So maybe one of those is what Ocra means by relative path but I'm not sure a 100% that's why I'd like to understand what 'relative path' explicitly means and also why do I have this stack trace with this error.</p>\n\n<p>PS: The 'xxxx' are just here for privacy !</p>\n\n<p>Thanks for any help in advance I'm currently stuck in packaging my project to cross-platforms for now I'm just trying to get it on Windows.</p>\n\n<p>If you need anymore information just ask for it, also be gentle if I made any mistakes as this is my first question asked on Stack Overflow.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "edited": false, "score": 0, "creation_date": 1476985327, "post_id": 39112302, "comment_id": 67590940, "body": "did you ever solve this?"}], "answers": [{"comments": [{"owner": {"reputation": 789, "user_id": 5030271, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94768f7cf8157dc056a26b95991e2b3d?s=128&d=identicon&r=PG&f=1", "display_name": "DNorthrup", "link": "https://stackoverflow.com/users/5030271/dnorthrup"}, "edited": false, "score": 0, "creation_date": 1472030098, "post_id": 39112473, "comment_id": 65584257, "body": "Thanks so much for all of your info, you led me on a goose-chase that has me very close. I wasn&#39;t aware of the html_safe (or sanitize function I found related). I&#39;m quite closer now, if you could take a look at the update I&#39;m about to post, I&#39;d greatly appreciate it."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 2, "last_activity_date": 1471997044, "creation_date": 1471997044, "answer_id": 39112473, "question_id": 39112302, "link": "https://stackoverflow.com/questions/39112302/rails-4-flash-alert-with-plain-text-and-erb/39112473#39112473", "title": "Rails 4 - flash-alert with plain text and ERB", "body": "<p>With the following code:</p>\n\n<pre><code>    message += \n      \"...\"\" +\n      &lt;%= link_to \"here\", :controller =&gt; :user, :action =&gt; :resend_email  %&gt; + \n      \"...\"\n</code></pre>\n\n<p>You're trying to use ERB tags in regular ruby - that won't work. You can only use ERB in templates.</p>\n\n<p>Normally I'd advise using Ruby's standard <code>#{}</code> string interpolation but that won't actually solve the problem here.</p>\n\n<p><code>link_to</code> is only available to views by default, although you can get access to it via the <code>view_context</code> object:</p>\n\n<pre><code>link = \"#{view_context.link_to 'here', :controller =&gt; :user, :action =&gt; :resend_email}\"\n</code></pre>\n\n<p>By the way, it possible to use ERB in controllers if you compile it yourself:</p>\n\n<pre><code>link = ERB.new(\"&lt;%= view_context.link_to(...) %&gt;\").result(binding)\n</code></pre>\n\n<p>You can change the variables/methods available to ERB by invoking it in a different context, i.e.:</p>\n\n<pre><code>link = view_context.instance_exec do\n  ERB.new(\"&lt;%= link_to(...) %&gt;\").result(binding)\nend\n</code></pre>\n\n<p>This works with the standard <code>#{}</code> string interpolation too:</p>\n\n<pre><code>link = view_context.instance_exec do\n  \"#{link_to(...)}\"\nend\n</code></pre>\n\n<p>It's worth mentioning that if you make a custom html string in the controller (like you are doing here with flash), when you display the text on the view you will need to add some custom methods to make the html display as real html:</p>\n\n<pre><code># in controller\nflash[:test] = \"&lt;span&gt;some html&lt;/span&gt;\"\n\n# in view\n&lt;%= raw flash[:test].html_safe %&gt;\n</code></pre>\n\n<p>This way only the text <code>some html</code> would be displayed, and not the entire string <code>&lt;span&gt;some html&lt;/span&gt;</code></p>\n\n<p>There's a reason <code>raw</code> and <code>html_safe</code> is necessary, and that's because printing html has security risks and Rails is designed to make it more difficult. </p>\n\n<p>Say your user sets their username as <code>\"&lt;script&gt;alert(\"hacked\")&lt;/script&gt;\"</code> and this string somehow makes it on to the page as true html. You would have just exposed your users to XSS (Cross Site Scripting), which you don't want to do. So make sure that when you use <code>raw &lt;string&gt;.html_safe</code> you are <strong>not</strong> displaying anything user-generated. </p>\n"}, {"tags": [], "owner": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "is_accepted": false, "score": 0, "last_activity_date": 1477269238, "creation_date": 1477269238, "answer_id": 40209217, "question_id": 39112302, "link": "https://stackoverflow.com/questions/39112302/rails-4-flash-alert-with-plain-text-and-erb/40209217#40209217", "title": "Rails 4 - flash-alert with plain text and ERB", "body": "<p>The reason why your route is telling you that <code>id = nil</code> is because your <code>:activation_token</code> is the <code>id</code> in that route and it is not stored in the database, it is created virtually with <code>attr_accessor</code>. Instead, store <code>:activation_token</code> as a column in your database. </p>\n"}], "owner": {"reputation": 789, "user_id": 5030271, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94768f7cf8157dc056a26b95991e2b3d?s=128&d=identicon&r=PG&f=1", "display_name": "DNorthrup", "link": "https://stackoverflow.com/users/5030271/dnorthrup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 700, "favorite_count": 0, "accepted_answer_id": 39112473, "answer_count": 2, "score": 1, "last_activity_date": 1477269238, "creation_date": 1471995605, "last_edit_date": 1472032064, "question_id": 39112302, "link": "https://stackoverflow.com/questions/39112302/rails-4-flash-alert-with-plain-text-and-erb", "title": "Rails 4 - flash-alert with plain text and ERB", "body": "<p>I'm unsure if the way I'm treating it is the issue, or the ERB.</p>\n\n<p>Right now when a user registers, I sent an activation email. If they haven't activated, and try to log back in, they're prompted \"Sorry, you're not authorized.\" I want to modify it to so it offers them to be resent the email, as well.</p>\n\n<p><strong>SessionsController</strong></p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n  def new\n  end\n\n  def create\n    user = User.find_by(email: params[:session][:email].downcase)\n    if user &amp;&amp; user.authenticate(params[:session][:password])\n      if user.activated?\n        log_in user\n        params[:session][:remember_me] == '1' ? remember(user) : forget(user)\n        redirect_back_or user\n      else\n        message  = \"Account not activated. \"\n        message += \"Check your email for the activation link, or click\" + &lt;%= link_to \"here\", :controller =&gt; :user, :action =&gt; :resend_email  %&gt;+ \"to have it resent!\"\n        flash[:warning] = message\n        redirect_to root_url\n      end\n    else\n      flash.now[:danger] = 'Invalid email/password combination'\n      render 'new'\n    end\n  end\n\n  def destroy\n    log_out if logged_in?\n    redirect_to root_url\n  end\n\nend\n</code></pre>\n\n<p>Within the Users controller I made a 'resend_email' function. Essentially just majority of the create one, so a bit redundant. </p>\n\n<p><strong>UsersController</strong></p>\n\n<pre><code>class UsersController &lt; ApplicationController\n    before_action :logged_in_user, only: [:index, :edit, :update, :destroy]\n    before_action :correct_user,   only: [:edit, :update]\n    before_action :admin_user,     only: :destroy\n\n  def index\n    @users = User.where(activated: true).paginate(page: params[:page])\n  end\n\n  def show\n    @user = User.find(params[:id])\n    redirect_to root_url and return unless @user.activated?\n  end\n\n  def new\n    @user = User.new\n  end\n\n  def create\n    @user = User.new(user_params)\n    if @user.save\n      @user.send_activation_email\n      flash[:info] = \"Please check your email to activate your account.\"\n      redirect_to root_url\n    else\n      render 'new'\n    end\n  end\n\n  def resend_email\n     @user.send_activation_email\n     flash[:info] = \"Please check your email to activate your account.\"\n     redirect_to root_url\n  else\n\n  def edit\n    @user = User.find(params[:id])\n  end\n\n  def update\n    @user = User.find(params[:id])\n    if @user.update_attributes(user_params)\n      flash[:success] = \"Profile updated\"\n      redirect_to @user\n    else\n      render 'edit'\n    end\n  end\n\n  def destroy\n    User.find(params[:id]).destroy\n    flash[:success] = \"User deleted\"\n    redirect_to users_url\n  end\n\n  private\n\n    def user_params\n      params.require(:user).permit(:name, :email, :password,\n                                   :password_confirmation)\n    end\n\n    # Before filters\n\n    # Confirms a logged-in user.\n    def logged_in_user\n      unless logged_in?\n        store_location\n        flash[:danger] = \"Please log in.\"\n        redirect_to login_url\n      end\n    end\n\n    # Confirms the correct user.\n    def correct_user\n      @user = User.find(params[:id])\n      redirect_to(root_url) unless current_user?(@user)\n    end\n\n    def admin_user\n      redirect_to(root_url) unless current_user.admin?\n    end\n\nend\n</code></pre>\n\n<p>I've tried modifying the 'message' to several different versions and each time I get a response similar to </p>\n\n<pre><code>/home/ubuntu/workspace/sample_app/app/controllers/sessions_controller.rb:16: syntax error, unexpected '&lt;' &lt;%= link_to \"here\", :controlle... ^ /home/ubuntu/workspace/sample_app/app/controllers/sessions_controller.rb:16: syntax error, unexpected ',', expecting keyword_end ...o \"here\", :controller =&gt; :user, :action =&gt; :resend_email %&gt; ... ^ /home/ubuntu/workspace/sample_app/app/controllers/sessions_controller.rb:16: syntax error, unexpected '&gt;' ...r, :action =&gt; :resend_email %&gt; ... ^\n</code></pre>\n\n<p>I got this syntax from previous experience, and people with similar needs to mine.</p>\n\n<p>So I'm wondering what's the best way to do this, without a gem (I did find Devise functionality, but I'm trying to learn how to do it on my own)</p>\n\n<p>I also read that sometimes ERB and plain text don't work well. However, I also get an error with message is only <code>&lt;%= link_to \"here\", :controller =&gt; :user, :action =&gt; :resend_email  %&gt;</code> as well.</p>\n\n<p>I'm unsure if any other controllers are needed.</p>\n\n<p><strong>EDIT INFO</strong></p>\n\n<p>Leaving original copy for other people with the issue.\nAfter reading what max provided in his answer below, I have modified a few things.</p>\n\n<p><strong>Changes to SessionsController</strong></p>\n\n<pre><code>link = view_context.instance_exec do\n  ERB.new(\"&lt;%= link_to 'here', :controller =&gt; :users, :action =&gt; :resend_activation %&gt;\").result(binding)\nend\nmessage  = \"Account not activated. \"\nmessage += \"Check your email for the activation.\" \nmessage += link  # This is for demo purposes, just needed an output\n</code></pre>\n\n<p><strong>User Controller</strong></p>\n\n<p>def resend_activation\n     @user = User.find(params[:email])\n     @user.send_activation_email\n     flash[:info] = \"Please check your email to activate your account.\"\n     redirect_to root_url\n  end</p>\n\n<p><strong>Partial View for Warnings</strong></p>\n\n<pre><code>  &lt;% flash.each do |message_type, message| %&gt;\n    &lt;%= content_tag(:div, sanitize(message), class: \"alert alert-#{message_type}\") %&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>Up to this point I am now seeing the link I expected, and my issue is when I click it.</p>\n\n<p><code>Couldn't find User with 'id'=</code> - I've tried different uses of <code>User</code> and even told it re-search based on the email params.</p>\n\n<p>So I tried updating my routes to </p>\n\n<p><strong>Routes</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n\n  root 'static_pages#home'\n  get '/home', to: 'static_pages#home'\n  get '/help', to: 'static_pages#help'\n  get '/about', to: 'static_pages#about'\n  get '/contact', to: 'static_pages#contact'\n  get '/signup', to: 'users#new'\n  post '/signup', to: 'users#create'\n  get    '/login',   to: 'sessions#new'\n  post   '/login',   to: 'sessions#create'\n  delete '/logout',  to: 'sessions#destroy'\n  resources :users\n  resources :account_activations, only: [:edit]\n  post '/resend_activation:email'  =&gt;  'account_activations#resend_activation',\n                                        :constraints =&gt; { :email =&gt; /[^\\/]+/ }\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\nend\n</code></pre>\n\n<p>Which made progress (I think), and it now prompts me \"no get resource found\". I'm doing research on when to use get vs post, and I thought I went the right method. But why is it trying to reference that path if right after it sends the email, it's supposed to go back to root_url?</p>\n\n<p>Thanks again.</p>\n\n<p><strong>Update # 2</strong>:</p>\n\n<p>I was able to get the errors to stop by adding in route switches, and modifying my <em>sessions_controller</em> to </p>\n\n<pre><code>  def create\n    user = User.find_by(email: params[:session][:email].downcase)\n    if user &amp;&amp; user.authenticate(params[:session][:password])\n      if user.activated?\n        log_in user\n        params[:session][:remember_me] == '1' ? remember(user) : forget(user)\n        redirect_back_or user\n      else\n        message  = \"Account not activated. \"\n        message += \"Check your email for the activation.\" \n        message += \" #{view_context.link_to \"Resend Activation E-Mail\", { action: \"resend_activation\",\n        controller: \"account_activations\", email: user.email }, method: :post}\"\n        flash[:warning] = message\n        redirect_to root_url\n      end\n    else\n      flash.now[:danger] = 'Invalid email/password combination'\n      render 'new'\n    end\n  end\n</code></pre>\n\n<p>But now no emails are going out, everything just routes back to login.</p>\n\n<p><code>heroku logs --tail</code></p>\n\n<p>Tells me</p>\n\n<p><strong>Heroku Logs</strong></p>\n\n<pre><code>2016-08-24T09:44:48.990703+00:00 app[web.1]: I, [2016-08-24T09:44:48.990609 #5]  INFO -- : [8cfcee3c-133c-489e-8877-523578821d67] Started GET \"/resend_activation/test@example.com\" for 100.15.65.126 at 2016-08-24 09:44:48 +0000\n2016-08-24T09:44:48.992317+00:00 app[web.1]: I, [2016-08-24T09:44:48.992217 #5]  INFO -- : [8cfcee3c-133c-489e-8877-523578821d67] Processing by StaticPagesController#home as \n2016-08-24T09:44:48.992394+00:00 app[web.1]: I, [2016-08-24T09:44:48.992349 #5]  INFO -- : [8cfcee3c-133c-489e-8877-523578821d67]   Parameters: {\"email\"=&gt;\"test@example.com\"}\n2016-08-24T09:44:48.997712+00:00 app[web.1]: I, [2016-08-24T09:44:48.997648 #5]  INFO -- : [8cfcee3c-133c-489e-8877-523578821d67]   Rendering static_pages/home.html.erb within layouts/application\n2016-08-24T09:44:48.999032+00:00 app[web.1]: I, [2016-08-24T09:44:48.998965 #5]  INFO -- : [8cfcee3c-133c-489e-8877-523578821d67]   Rendered static_pages/home.html.erb within layouts/application (1.1ms)\n2016-08-24T09:44:49.010260+00:00 app[web.1]: I, [2016-08-24T09:44:49.010186 #5]  INFO -- : [8cfcee3c-133c-489e-8877-523578821d67]   Rendered layouts/_shim.html.erb (0.4ms)\n2016-08-24T09:44:49.010516+00:00 app[web.1]: I, [2016-08-24T09:44:49.010461 #5]  INFO -- : [8cfcee3c-133c-489e-8877-523578821d67]   Rendered layouts/_shim.html.erb (0.0ms)\n2016-08-24T09:44:49.010642+00:00 app[web.1]: I, [2016-08-24T09:44:49.010591 #5]  INFO -- : [8cfcee3c-133c-489e-8877-523578821d67]   Rendered layouts/_headElement.html.erb (7.6ms)\n2016-08-24T09:44:49.020206+00:00 app[web.1]: D, [2016-08-24T09:44:49.020136 #5] DEBUG -- : [8cfcee3c-133c-489e-8877-523578821d67]   User Load (1.8ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIMIT $2  [[\"id\", 103], [\"LIMIT\", 1]]\n2016-08-24T09:44:49.020630+00:00 app[web.1]: I, [2016-08-24T09:44:49.020565 #5]  INFO -- : [8cfcee3c-133c-489e-8877-523578821d67]   Rendered layouts/_header.html.erb (3.8ms)\n2016-08-24T09:44:49.025024+00:00 app[web.1]: I, [2016-08-24T09:44:49.024957 #5]  INFO -- : [8cfcee3c-133c-489e-8877-523578821d67]   Rendered layouts/_footer.html.erb (0.7ms)\n2016-08-24T09:44:49.025337+00:00 app[web.1]: I, [2016-08-24T09:44:49.025273 #5]  INFO -- : [8cfcee3c-133c-489e-8877-523578821d67] Completed 200 OK in 33ms (Views: 26.1ms | ActiveRecord: 1.8ms)\n</code></pre>\n\n<p>It finds the member, and renders it, but is no longer mailing. I think it's because of the get route I had to establish to make it 'work'?</p>\n"}, {"tags": ["ruby", "multithreading", "thread-safety"], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 5534535, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/094c4ab3367251eee26c8f059ea15cf0?s=128&d=identicon&r=PG", "display_name": "Bruno Vezoli", "link": "https://stackoverflow.com/users/5534535/bruno-vezoli"}, "edited": false, "score": 0, "creation_date": 1472071128, "post_id": 39112313, "comment_id": 65610597, "body": "thanks once again, yeah it kind of looked wrong but It was the only way of deleting the keys at the exact time. But what are a few seconds more compared to not having a hundred threads running"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 103, "user_id": 5534535, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/094c4ab3367251eee26c8f059ea15cf0?s=128&d=identicon&r=PG", "display_name": "Bruno Vezoli", "link": "https://stackoverflow.com/users/5534535/bruno-vezoli"}, "edited": false, "score": 1, "creation_date": 1472071610, "post_id": 39112313, "comment_id": 65610791, "body": "It&#39;s highly unlikely to be lagging behind more than a handful of milliseconds if you do this right."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1471995700, "creation_date": 1471995700, "answer_id": 39112313, "question_id": 39111551, "link": "https://stackoverflow.com/questions/39111551/correct-way-to-schedule-a-task/39112313#39112313", "title": "Correct way to schedule a task", "body": "<p>That's going to create a crazy number of threads in a very short time if this is put under load. What you really want is a priority queue where the elements are sorted by expiration time and a periodic timer that checks if the first entry is expired, processes it, and repeats that until there's nothing left to expire, then goes back to sleep briefly.</p>\n\n<p>There's a few Ruby gems that implement this sort of thing, any one that performs adequately will do, or you could write your own, it's not too hard, using <a href=\"https://ruby-doc.org/core-2.3.1/Array.html#method-i-bsearch_index\" rel=\"nofollow\"><code>bsearch_index</code></a> to quickly find the insertion point.</p>\n\n<p>I think you'll find a single queue with one thread will work much better than potentially thousands of threads. Each thread carries a fairly significant amount of overhead so it's best to keep these to a minimum.</p>\n"}], "owner": {"reputation": 103, "user_id": 5534535, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/094c4ab3367251eee26c8f059ea15cf0?s=128&d=identicon&r=PG", "display_name": "Bruno Vezoli", "link": "https://stackoverflow.com/users/5534535/bruno-vezoli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 39112313, "answer_count": 1, "score": 1, "last_activity_date": 1471995700, "creation_date": 1471990691, "question_id": 39111551, "link": "https://stackoverflow.com/questions/39111551/correct-way-to-schedule-a-task", "title": "Correct way to schedule a task", "body": "<p>I'm coding a cache server in Ruby and I need to make expiration times for the data I'm storing. So when the user stores data under the key <code>foo</code> for example he also sets an expiration time in seconds. The data needs to be deleted at that moment so what I thought for this scheduling is to create a thread and put it to sleep until that time comes.</p>\n\n<pre><code>Thread.new(@options[:exp_time], key) do |t, k|\n    exp = Time.now + t\n    sleep(t)\n    if @data.key?(k) &amp;&amp; @data[k][:exp_time] &lt;= exp #check if it hasn't been updated\n        @data.delete(k)\n    end\nend\n</code></pre>\n\n<p>t is the time that the user sent and key is the key under which the data is stored. The expiration time could also be changed if a user replaces the data stored at the key so I check it. I was wondering if this a good use of threads or if it consumes too much resources or there's an easier way. I can't use gems or libraries of any type. Thanks in advance for any help</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1472024186, "post_id": 39111472, "comment_id": 65580576, "body": "Could you provide some context? The syntax is invalid."}], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1471994298, "post_id": 39111569, "comment_id": 65571420, "body": "To me, they both look like <code>SyntaxError</code>s, so they are exactly equivalent in that sense."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1471994881, "post_id": 39111569, "comment_id": 65571577, "body": "@J&#246;rgWMittag One person&#39;s line noise is another&#39;s code."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1471991352, "last_edit_date": 1471991352, "creation_date": 1471990774, "answer_id": 39111569, "question_id": 39111472, "link": "https://stackoverflow.com/questions/39111472/ruby-curly-brackets-for-set-value/39111569#39111569", "title": "Ruby Curly Brackets for &quot;set&quot; value", "body": "<p>Although they look superficially similar they're actually two completely different things.</p>\n\n<p>The first is a simple string, the second is a <code>Proc</code> which <em>returns</em> a string. Many methods in the Ruby world take both, the Proc version is a way of deferring evaluation of something until if and when it's needed.</p>\n\n<p>The <code>-&gt; { ... }</code> notation is shorthand for <code>lambda { ... }</code>, it's called the <em>stabby-lambda</em> operator.</p>\n"}], "owner": {"reputation": 1877, "user_id": 985968, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4bb31649a4f6328831f589b749f31ae0?s=128&d=identicon&r=PG", "display_name": "christian", "link": "https://stackoverflow.com/users/985968/christian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 39111569, "answer_count": 1, "score": 0, "last_activity_date": 1471991352, "creation_date": 1471990298, "last_edit_date": 1471990779, "question_id": 39111472, "link": "https://stackoverflow.com/questions/39111472/ruby-curly-brackets-for-set-value", "title": "Ruby Curly Brackets for &quot;set&quot; value", "body": "<p>What's the difference between these two variations in Ruby</p>\n\n<pre><code>set: example1, \"/random/string\"\n</code></pre>\n\n<p>and</p>\n\n<pre><code>set: example2, -&gt; {\"random/string\"}\n</code></pre>\n\n<p>Do they both have the same effect?</p>\n"}, {"tags": ["ruby", "cucumber", "google-api-ruby-client"], "comments": [{"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1472039106, "post_id": 39111025, "comment_id": 65590223, "body": "It doesn&#39;t sound like you&#39;re using bundler. I suggest writing a Gemfile that includes all of the gems you need (without nonessential version specifications) and seeing whether bundler can find a set of mutually compatible versions."}, {"owner": {"reputation": 1, "user_id": 6490865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BDNgW.jpg?s=128&g=1", "display_name": "R. Leverette", "link": "https://stackoverflow.com/users/6490865/r-leverette"}, "reply_to_user": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 1, "creation_date": 1472047992, "post_id": 39111025, "comment_id": 65597021, "body": "This is the closest that I could find:  <a href=\"http://stackoverflow.com/questions/4579465/managing-conflicting-versions-of-ruby-gems\" title=\"managing conflicting versions of ruby gems\">stackoverflow.com/questions/4579465/&hellip;</a>  Did some more digging into my dependencies and it turns out I&#39;m not actually using the older versions and was able to delete them."}], "owner": {"reputation": 1, "user_id": 6490865, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BDNgW.jpg?s=128&g=1", "display_name": "R. Leverette", "link": "https://stackoverflow.com/users/6490865/r-leverette"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1472484744, "creation_date": 1471987992, "last_edit_date": 1472484744, "question_id": 39111025, "link": "https://stackoverflow.com/questions/39111025/google-apiruby-causing-gem-conflict-errors", "title": "Google API(ruby) causing gem conflict errors", "body": "<p>I'm getting the following error when trying to run a cucumber script:</p>\n\n<pre><code>Unable to activate google-api-client-0.9.12, because httpclient-2.6.0.1 conflicts with httpclient (~&gt; 2.7) (Gem::ConflictError)\n</code></pre>\n\n<p>I have three versions of httpclient:</p>\n\n<pre><code>httpclient (2.8.2.2, 2.6.0.1, 2.3.4.1)\n</code></pre>\n\n<p>All have other dependencies, I've tried deleting individual versions. \ne.g.  </p>\n\n<pre><code>You have requested to uninstall the gem:\n    httpclient-2.6.0.1\n\nrally_api-1.2.1 depends on httpclient (= 2.6.0.1)\nIf you remove this gem, these dependencies will not be met.\n\nYou have requested to uninstall the gem:\n    httpclient-2.3.4.1\n\ncalabash-android-0.4.21 depends on httpclient (~&gt; 2.3.2)\ncalabash-cucumber-0.9.169 depends on httpclient (~&gt; 2.3.3)\nIf you remove this gem, these dependencies will not be met.\n\nYou have requested to uninstall the gem:\n    httpclient-2.8.2.2\n\ngoogle-api-client-0.9.12 depends on httpclient (~&gt; 2.7)\nIf you remove this gem, these dependencies will not be met.\n</code></pre>\n\n<p>How can I get the google API to work with my existing code?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "country"], "comments": [{"owner": {"reputation": 2412, "user_id": 1253504, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ba0b6bef219b34fa4f2d014046ff987?s=128&d=identicon&r=PG", "display_name": "kasperite", "link": "https://stackoverflow.com/users/1253504/kasperite"}, "edited": false, "score": 0, "creation_date": 1471996942, "post_id": 39110416, "comment_id": 65572066, "body": "why are you defining <code>country</code> as <code>attr_accessor</code>?what you are saying indicates <code>country</code> is not saved properly, checking rails log to see if its param is passed through controller will be helpful"}, {"owner": {"reputation": 2296, "user_id": 494789, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/af6d4d35f206a198925f080014bcbcbe?s=128&d=identicon&r=PG", "display_name": "Christian-G", "link": "https://stackoverflow.com/users/494789/christian-g"}, "edited": false, "score": 0, "creation_date": 1472046894, "post_id": 39110416, "comment_id": 65596137, "body": "Does it actually persist the country? check in your rails console (<code>rails console</code>) with: <code>Article.pluck(:country)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 2254488, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c23ed234fbebf5076c33e6a24c5fe8d0?s=128&d=identicon&r=PG", "display_name": "user2254488", "link": "https://stackoverflow.com/users/2254488/user2254488"}, "edited": false, "score": 0, "creation_date": 1472067364, "post_id": 39125499, "comment_id": 65608728, "body": "Haha.. Jesus. Yeah, you&#39;re absolutely right. Get rid of attr_accessor. I did it because my select wouldn&#39;t work if I didn&#39;t. So I checked the model at github. Everything works now. Have no idea why it didn&#39;t in the first place.  Thanks a lot!"}], "tags": [], "owner": {"reputation": 2296, "user_id": 494789, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/af6d4d35f206a198925f080014bcbcbe?s=128&d=identicon&r=PG", "display_name": "Christian-G", "link": "https://stackoverflow.com/users/494789/christian-g"}, "is_accepted": true, "score": 1, "last_activity_date": 1472048110, "last_edit_date": 1472048110, "creation_date": 1472047347, "answer_id": 39125499, "question_id": 39110416, "link": "https://stackoverflow.com/questions/39110416/rails-save-country-select-to-database/39125499#39125499", "title": "Rails: Save country_select to database", "body": "<p>First, get rid of <code>attr_accessor :country</code> as <strong>attr_accessor is used to define an attribute for object of Model which is not mapped with any column in database.</strong> </p>\n\n<p>To answer your question \"<em>But I don\u2019t really know, where to put that line of code.. I have tried to put it in my create, show, and params..</em> \"</p>\n\n<p>You have to put that line of code in your form view. The first attribute is the name of the model (article in your case) and the second is the name of your attribute (country in your case). You have already properly done this however with: </p>\n\n<p><code>&lt;%= f.country_select :country %&gt;</code></p>\n\n<p>You have to make sure that this form is actually for an <code>Article</code> so it should be:</p>\n\n<pre><code>&lt;%= form_for @article do |f| %&gt;\n  &lt;div&gt;\n  &lt;%= f.country_select :country %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 2254488, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/c23ed234fbebf5076c33e6a24c5fe8d0?s=128&d=identicon&r=PG", "display_name": "user2254488", "link": "https://stackoverflow.com/users/2254488/user2254488"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "accepted_answer_id": 39125499, "answer_count": 1, "score": 0, "last_activity_date": 1472048110, "creation_date": 1471985320, "question_id": 39110416, "link": "https://stackoverflow.com/questions/39110416/rails-save-country-select-to-database", "title": "Rails: Save country_select to database", "body": "<p>I\u2019m working on a form where user can pick country and there choice will be shown and show.html.erb.</p>\n\n<p>I have added country_select in my form like this</p>\n\n<pre><code>&lt;div class=\"col-md-4\"&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= f.country_select :country %&gt;\n &lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<p>My model article.rb looks like this:</p>\n\n<pre><code>class Article &lt; ActiveRecord::Base\n    belongs_to :author\n    has_many :article_article_categories\n    has_many :categories, through: :article_article_categories\n\n    validates :title, presence: true, length: { minimum: 3, maximum: 50 }\n    validates :description, presence: true, length: { minimum: 10, maximum: 500 }\n    validates :author_id, presence: true\n\n    attr_accessor :country\nend\n</code></pre>\n\n<p>The select works and the user can select country.. Perfect!</p>\n\n<p>But it won\u2019t show up in my view/show.html.erb.. I have tried like this: </p>\n\n<pre><code>&lt;%= @article.country %&gt;\n</code></pre>\n\n<p>So therefor I generated a migration:</p>\n\n<pre><code>class AddCountryToArticles &lt; ActiveRecord::Migration[5.0]\n  def change\n    add_column :article, :country, :string\n  end\nend\n</code></pre>\n\n<p>And ran the migration.</p>\n\n<p>In my controller I added this to my params:</p>\n\n<pre><code>def article_params\n  params.require(:article).permit(:country, :title, :description, article_article_categories_ids: [])\nend\n</code></pre>\n\n<p>But I get nothing.. \nAt country_select documentation, under usage:\n\"Simple use supplying model and attribute as parameters:\ncountry_select(\"user\", \"country\")\"</p>\n\n<p>But I don\u2019t really know, where to put that line of code..\nI have tried to put it in my create, show, and params.. And updated with (\u201carticle\u201d, \"country\")</p>\n\n<p>Can someone help me to get a step closer? \nI also devise installed.. Maybe that could cause some trouble?\nI'm working with rails 5.0.0</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1471983113, "post_id": 39109728, "comment_id": 65567124, "body": "Remember that <code>.</code> is a special character inside of regular expressions."}], "answers": [{"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1471985288, "post_id": 39109867, "comment_id": 65568204, "body": "More succinctly: <code>s.gsub(&#47;...&#47;) { $1 || &quot;_&quot; }</code>."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1471985619, "post_id": 39109867, "comment_id": 65568369, "body": "@Jordan: Yes, the logic stays the same: either Group 1 or - if it is not matched - use <code>_</code> replacement."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1471986091, "post_id": 39109867, "comment_id": 65568614, "body": "Yes... that&#39;s why I posted a comment to that effect."}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1471985676, "last_edit_date": 1495535327, "creation_date": 1471982961, "answer_id": 39109867, "question_id": 39109728, "link": "https://stackoverflow.com/questions/39109728/how-do-i-find-any-space-before/39109867#39109867", "title": "How do I find any space before &quot;.&quot;", "body": "<p>Use  an <code>rstrip</code>ped <code>File.basename(filename,File.extname(filename))</code> and replace spaces with underscores inside it then add an <code>extname</code>:</p>\n\n<pre><code>File.basename(filename,File.extname(filename)).rstrip.gsub(\" \", \"_\") + File.extname(filename)\n</code></pre>\n\n<p>See the <a href=\"http://ideone.com/4xZJU6\" rel=\"nofollow noreferrer\">Ruby demo</a></p>\n\n<p><em>Details</em>:</p>\n\n<ul>\n<li><code>File.basename(filename,File.extname(filename))</code> - get file name without extension</li>\n<li><code>.rstrip</code> - remove whitespace before the extension</li>\n<li><code>.gsub(\" \", \"_\")</code> - replaces spaces (use <code>/\\s+/</code> regex to remove any whitespaces) with underscores</li>\n<li><code>File.extname(filename)</code> - a file extension.</li>\n</ul>\n\n<p>If you prefer a regex way:</p>\n\n<pre><code>s = 'some example 2 .png'\nputs s.gsub(/\\s+(\\.[^.]+\\z)|\\s/) { \n    Regexp.last_match(1) ?  \n        Regexp.last_match(1) :\n        \"_\"\n}\n</code></pre>\n\n<p>(<a href=\"http://ideone.com/O5MpWb\" rel=\"nofollow noreferrer\">can be shortened</a> to <code>s.gsub(/\\s+(\\.[^.]+\\z)|\\s/) { $1 || \"_\" }</code> (see <a href=\"https://stackoverflow.com/questions/39109728/how-do-i-find-any-space-before/39109867?noredirect=1#comment65568204_39109867\">Jordan's remark</a>)). \nSee <a href=\"http://ideone.com/wVdTFq\" rel=\"nofollow noreferrer\">this Ruby demo</a>.</p>\n\n<p>Here, the pattern matches:</p>\n\n<ul>\n<li><code>\\s+(\\.[^.]+\\z)</code> - 1 or more whitespaces (<code>\\s+</code>) before the extension (<code>\\.[^.]+</code> - a dot followed with 1+ chars other than a dot before the end of string <code>\\z</code>), while <em>capturing the extension into Group 1</em></li>\n<li><code>|</code> - or</li>\n<li><code>\\s</code>  - any other whitespace symbol (add <code>+</code> after it if you need to replace whole whitespace chunks with underscores).</li>\n</ul>\n\n<p>In the <code>gsub</code> block, a check is performed to test Group 1, and if it matched, only the extension is inserted into the result. Else, a whitespace is replaced with an underscore.</p>\n"}], "owner": {"reputation": 500, "user_id": 3126291, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/8f4e5aa2787c65782cf359db90a24a9c?s=128&d=identicon&r=PG", "display_name": "suyesh", "link": "https://stackoverflow.com/users/3126291/suyesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 39109867, "answer_count": 1, "score": 1, "last_activity_date": 1471985676, "creation_date": 1471982400, "last_edit_date": 1471983192, "question_id": 39109728, "link": "https://stackoverflow.com/questions/39109728/how-do-i-find-any-space-before", "title": "How do I find any space before &quot;.&quot;", "body": "<p>I have names \"example .png\" and \"example 2.png\". I am trying to convert any space to \"_\" and any space before \".\" should be removed.</p>\n\n<p>So far I am doing it like this:</p>\n\n<pre><code>file.gsub(\" .\",\".\").gsub(\" \", \"_\").gsub(\".tif\", \"\")\n</code></pre>\n"}, {"tags": ["ruby", "linux"], "comments": [{"owner": {"reputation": 3986, "user_id": 5237806, "user_type": "registered", "accept_rate": 24, "profile_image": "https://i.stack.imgur.com/Zwf7v.jpg?s=128&g=1", "display_name": "chenchuk", "link": "https://stackoverflow.com/users/5237806/chenchuk"}, "edited": false, "score": 0, "creation_date": 1471983359, "post_id": 39109656, "comment_id": 65567246, "body": "try this <a href=\"http://www.rubydoc.info/gems/ethernet/0.1.3/Ethernet/Devices\" rel=\"nofollow noreferrer\">rubydoc.info/gems/ethernet/0.1.3/Ethernet/Devices</a>"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1471995929, "post_id": 39111852, "comment_id": 65571833, "body": "If you&#39;re still using Ruby 1.9 you&#39;re living on borrowed time, it&#39;s no longer receiving updates. Usually upgrading from 1.9 to 2.x is relatively painless, but you&#39;ll have to try and see how much friction you get."}], "tags": [], "owner": {"reputation": 3087, "user_id": 5278432, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/PgZfk.jpg?s=128&g=1", "display_name": "Alberto Rivera", "link": "https://stackoverflow.com/users/5278432/alberto-rivera"}, "is_accepted": false, "score": 4, "last_activity_date": 1471992971, "last_edit_date": 1471992971, "creation_date": 1471992425, "answer_id": 39111852, "question_id": 39109656, "link": "https://stackoverflow.com/questions/39109656/get-ip-address-for-a-specific-network-interface-on-ruby/39111852#39111852", "title": "Get IP Address for a specific network interface on Ruby", "body": "<p><strong>Please let me know if there's a way to get this information using Ruby 1.9.X</strong></p>\n\n<p>I updated Ruby to 2.3 version and then used <code>Socket.getifaddrs</code> (available since Ruby 2.1). </p>\n\n<pre><code>require 'socket'\naddr_infos = Socket.getifaddrs\naddr_infos.each do |addr_info|\n    if addr_info.addr\n        puts \"#{addr_info.name} has address #{addr_info.addr.ip_address}\" if addr_info.addr.ipv4?\n    end\nend\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>$ ruby2.3 getInterfaces.rb \nlo has address 127.0.0.1\nwlan0 has address 192.168.13.175\ndocker0 has address 172.17.0.1\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user246672"}, "is_accepted": false, "score": 1, "last_activity_date": 1549276282, "creation_date": 1549276282, "answer_id": 54514260, "question_id": 39109656, "link": "https://stackoverflow.com/questions/39109656/get-ip-address-for-a-specific-network-interface-on-ruby/54514260#54514260", "title": "Get IP Address for a specific network interface on Ruby", "body": "<h3>One-liner</h3>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'socket'; Socket.getifaddrs.map(&amp;:addr).select(&amp;:ipv4?).map(&amp;:ip_address).select { |x| x !~ /\\A127/ }\n</code></pre>\n"}], "owner": {"reputation": 3087, "user_id": 5278432, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/PgZfk.jpg?s=128&g=1", "display_name": "Alberto Rivera", "link": "https://stackoverflow.com/users/5278432/alberto-rivera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1884, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1549276282, "creation_date": 1471982116, "last_edit_date": 1471992575, "question_id": 39109656, "link": "https://stackoverflow.com/questions/39109656/get-ip-address-for-a-specific-network-interface-on-ruby", "title": "Get IP Address for a specific network interface on Ruby", "body": "<p>I need to get the IP address for each of my network interfaces. The issue is that the standard ruby method <code>Socket.ip_address_list</code> only returns to me the adress list, but no information about which interface corresponds to the IP address.</p>\n\n<pre><code>#&lt;Addrinfo: 127.0.0.1&gt;\n#&lt;Addrinfo: 192.168.13.175&gt;\n#&lt;Addrinfo: 172.17.0.1&gt;\n#&lt;Addrinfo: ::1&gt;\n#&lt;Addrinfo: fe80::4685:ff:fe0d:c406%wlan0&gt;\n</code></pre>\n\n<p>I am basically looking for the equivalent of NodeJS <code>os.networkInterfaces()[interfaceName]</code>.</p>\n\n<p>How can I know the IP address for a specific network interface? </p>\n"}, {"tags": ["ruby", "operator-precedence"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1471982033, "post_id": 39109455, "comment_id": 65566555, "body": "It has higher precedence but it still only affects its immediate tokens, not something as distant as the <code>=</code> in this example. I think it&#39;s like the trailing <code>if</code> condition, it affects the entire line. Inline rescues are often trouble and best avoided, especially a blind rescue."}, {"owner": {"reputation": 3118, "user_id": 1253415, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/87096d37b6aed093f1b142c6a9bfae91?s=128&d=identicon&r=PG", "display_name": "jcai", "link": "https://stackoverflow.com/users/1253415/jcai"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1471984007, "post_id": 39109455, "comment_id": 65567608, "body": "But why would (4) <code>x = raise(&quot;z&quot;) rescue 2</code> act differently then?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1471984201, "post_id": 39109455, "comment_id": 65567704, "body": "You&#39;re really into some obscure parsing quirks here. Trailing conditions like <code>if</code>/<code>unless</code> and <code>rescue</code> are special cases and I&#39;m not sure they&#39;re as predictably intuitive as the others."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1471985824, "post_id": 39109455, "comment_id": 65568483, "body": "I think you might have stumbled into this bug: <a href=\"https://bugs.ruby-lang.org/issues/12402\" rel=\"nofollow noreferrer\">bugs.ruby-lang.org/issues/12402</a> (fix merged for Ruby 2.4.0)."}, {"owner": {"reputation": 3118, "user_id": 1253415, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/87096d37b6aed093f1b142c6a9bfae91?s=128&d=identicon&r=PG", "display_name": "jcai", "link": "https://stackoverflow.com/users/1253415/jcai"}, "edited": false, "score": 0, "creation_date": 1471987665, "post_id": 39109455, "comment_id": 65569343, "body": "That certainly looks like the same issue. Nice searching."}], "owner": {"reputation": 3118, "user_id": 1253415, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/87096d37b6aed093f1b142c6a9bfae91?s=128&d=identicon&r=PG", "display_name": "jcai", "link": "https://stackoverflow.com/users/1253415/jcai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1471981347, "creation_date": 1471981347, "question_id": 39109455, "link": "https://stackoverflow.com/questions/39109455/precedence-of-assignment-and-inline-rescue", "title": "Precedence of assignment = and inline rescue", "body": "<p>Using Ruby 2.3.1, I'm getting unintuitive behavior related to the relative precedence of</p>\n\n<ul>\n<li>assignment <code>=</code></li>\n<li>inline <code>rescue</code> (so-called <code>modifier-rescue</code>)</li>\n<li><code>raise</code></li>\n</ul>\n\n<p>This expression (1):</p>\n\n<pre><code>x = raise \"z\" rescue 2    # evaluates to 2, BUT x still has previous value\n</code></pre>\n\n<p>Behaves like (2):</p>\n\n<pre><code>(x = raise \"z\") rescue 2  # evaluates to 2, BUT x still has previous value\n</code></pre>\n\n<p>But these all work as I expected (3-5):</p>\n\n<pre><code>x = (raise \"z\" rescue 2)  # evaluates to 2, x now equals 2\nx = raise(\"z\") rescue 2   # evaluates to 2, x now equals 2\nx = (raise \"z\") rescue 2  # evaluates to 2, x now equals 2\n</code></pre>\n\n<p>According to <a href=\"https://ruby-doc.org/core-2.3.1/doc/syntax/precedence_rdoc.html\" rel=\"nofollow\">this RDoc</a>, <code>modifier-rescue</code> has higher precedence than assignment <code>=</code>. I can't see any way that (1) could parenthesize to (2) but not to any of (3-5). What's going on here?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "hash"], "answers": [{"tags": [], "owner": {"reputation": 11718, "user_id": 1827631, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/I24JN.png?s=128&g=1", "display_name": "hirolau", "link": "https://stackoverflow.com/users/1827631/hirolau"}, "is_accepted": false, "score": 0, "last_activity_date": 1471981675, "last_edit_date": 1471981675, "creation_date": 1471980834, "answer_id": 39109337, "question_id": 39109026, "link": "https://stackoverflow.com/questions/39109026/deduplicate-and-merge-hash-attributes-in-ruby-array-of-hashes/39109337#39109337", "title": "Deduplicate and merge hash attributes in ruby array of hashes", "body": "<p>This seems like a complicated solution. Maybe someone else can come up with something simpler:</p>\n\n<pre><code>x = [\n{:first_name =&gt; \"john\", :last_name =&gt; \"doe\", :items_purchased =&gt; 1, :price =&gt; 5}, \n{:first_name =&gt; \"john\", :last_name =&gt; \"doe\", :items_purchased =&gt; 4, :price =&gt; 20}, \n{:first_name =&gt; \"john\", :last_name =&gt; \"doe\", :items_purchased =&gt; 4, :price =&gt; 20}, \n{:first_name =&gt; \"jane\", :last_name =&gt; \"doe\", :items_purchased =&gt; 2, :price =&gt; 7},\n{:first_name =&gt; \"jane\", :last_name =&gt; \"doe\", :items_purchased =&gt; 3, :price =&gt; 14},\n{:first_name =&gt; \"test\", :last_name =&gt; \"user\", :items_purchased =&gt; 1, :price =&gt; 4}\n]\n\n# Set the keys to group on:\ngroup_keys = [:first_name,:last_name]\n\n# For each group:\nresult =  x.group_by{|x| x.values_at(*group_keys)}.map do |k,v|\n  # Create a hash:\n  result_hash = Hash.new\n  # For the group keys just add the vaules of the group by\n  group_keys.zip(k).each{|x,y| result_hash[x] = y }\n\n  # For the rest of the keys just add up the vaulus using inject:\n  (v.first.keys-group_keys).each{|key| result_hash[key] = v.map{|x| x[key]}.inject(:+) }\n\n  #return result_hash\n  result_hash\n\nend\n\np result #=&gt; [{:first_name=&gt;\"john\", :last_name=&gt;\"doe\", :items_purchased=&gt;9, :price=&gt;45}, {:first_name=&gt;\"jane\", :last_name=&gt;\"doe\", :items_purchased=&gt;5, :price=&gt;21}, {:first_name=&gt;\"test\", :last_name=&gt;\"user\", :items_purchased=&gt;1, :price=&gt;4}]\n</code></pre>\n\n<p>If you do not care if the result looks exactly the same I would do:</p>\n\n<pre><code>group_keys = [:first_name,:last_name]\nresult = Hash.new{|h,k| h[k] = Hash.new{0} }\n\nx.each do |hash_in_list|\n  hash_in_list.each do |key,value|\n    next if group_keys.include? key\n    result[hash_in_list.values_at(*group_keys)][key] += hash_in_list[key]\n  end\nend\n\np result #=&gt; {[\"john\", \"doe\"]=&gt;{:items_purchased=&gt;9, :price=&gt;45}, [\"jane\", \"doe\"]=&gt;{:items_purchased=&gt;5, :price=&gt;21}, [\"test\", \"user\"]=&gt;{:items_purchased=&gt;1, :price=&gt;4}}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11718, "user_id": 1827631, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/I24JN.png?s=128&g=1", "display_name": "hirolau", "link": "https://stackoverflow.com/users/1827631/hirolau"}, "edited": false, "score": 0, "creation_date": 1471981988, "post_id": 39109456, "comment_id": 65566533, "body": "This solution would produce incorrect results for something like <code>{:first_name =&gt; &quot;john x&quot;, :last_name =&gt; &quot;doe&quot;}</code> and <code>{:first_name =&gt; &quot;john&quot;, :last_name =&gt; &quot;x doe&quot;}</code>. Probably not a porblem in small datasets but still good to keep in mind. Better to just <code>group_by{|x| x.values_at(:first_name,:last_name)}</code>."}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "reply_to_user": {"reputation": 11718, "user_id": 1827631, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/I24JN.png?s=128&g=1", "display_name": "hirolau", "link": "https://stackoverflow.com/users/1827631/hirolau"}, "edited": false, "score": 0, "creation_date": 1471983687, "post_id": 39109456, "comment_id": 65567442, "body": "@hirolau If that&#39;s a consideration of the dataset, sure. Otherwise it&#39;s just making the code more difficult to reason about."}], "tags": [], "owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "is_accepted": false, "score": 0, "last_activity_date": 1471981676, "last_edit_date": 1471981676, "creation_date": 1471981350, "answer_id": 39109456, "question_id": 39109026, "link": "https://stackoverflow.com/questions/39109026/deduplicate-and-merge-hash-attributes-in-ruby-array-of-hashes/39109456#39109456", "title": "Deduplicate and merge hash attributes in ruby array of hashes", "body": "<p>You can use <code>group_by</code> with a block to group by the full name: </p>\n\n<pre><code>grouped_data = data.group_by { |u| \"#{u[:first_name]} #{u[:last_name]}\" }\n</code></pre>\n\n<p>Then you can iterate through each of the values to sum anything together you'd like with a <code>reduce</code>:</p>\n\n<pre><code>grouped_data.map do |full_name, entries|\n  entries.reduce(Hash.new(0)) do |output, entry|\n    output[:items_purchased] += entry[:items_purchased]\n    output[:price] += entry[:price]\n    output\n  end.merge(entries.first.slice(:first_name, :last_name))\nend\n</code></pre>\n\n<p>Which will output data like you want:</p>\n\n<pre><code>[\n  {:items_purchased=&gt;9, :price=&gt;45, :first_name=&gt;\"john\", :last_name=&gt;\"doe\"},\n  {:items_purchased=&gt;5, :price=&gt;21, :first_name=&gt;\"jane\", :last_name=&gt;\"doe\"},\n  {:items_purchased=&gt;1, :price=&gt;4, :first_name=&gt;\"test\", :last_name=&gt;\"user\"}\n] \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11718, "user_id": 1827631, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/I24JN.png?s=128&g=1", "display_name": "hirolau", "link": "https://stackoverflow.com/users/1827631/hirolau"}, "edited": false, "score": 0, "creation_date": 1471982223, "post_id": 39109636, "comment_id": 65566649, "body": "This is how I would do it."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 11718, "user_id": 1827631, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/I24JN.png?s=128&g=1", "display_name": "hirolau", "link": "https://stackoverflow.com/users/1827631/hirolau"}, "edited": false, "score": 0, "creation_date": 1471982341, "post_id": 39109636, "comment_id": 65566716, "body": "@hirolau Thanks. The concept is very similar to yours but you did ask for simpler implementation so I thought I would give it the old college try. :)"}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 1, "last_activity_date": 1472000885, "last_edit_date": 1472000885, "creation_date": 1471982070, "answer_id": 39109636, "question_id": 39109026, "link": "https://stackoverflow.com/questions/39109026/deduplicate-and-merge-hash-attributes-in-ruby-array-of-hashes/39109636#39109636", "title": "Deduplicate and merge hash attributes in ruby array of hashes", "body": "<p>Yet one more way to skin a cat:</p>\n\n<pre><code> x = [\n    {:first_name =&gt; \"john\", :last_name =&gt; \"doe\", :items_purchased =&gt; 1, :price =&gt; 5}, \n    {:first_name =&gt; \"john\", :last_name =&gt; \"doe\", :items_purchased =&gt; 4, :price =&gt; 20}, \n    {:first_name =&gt; \"john\", :last_name =&gt; \"doe\", :items_purchased =&gt; 4, :price =&gt; 20}, \n    {:first_name =&gt; \"jane\", :last_name =&gt; \"doe\", :items_purchased =&gt; 2, :price =&gt; 7},\n    {:first_name =&gt; \"jane\", :last_name =&gt; \"doe\", :items_purchased =&gt; 3, :price =&gt; 14},\n    {:first_name =&gt; \"test\", :last_name =&gt; \"user\", :items_purchased =&gt; 1, :price =&gt; 4}\n]\n\ngroup_keys = [:first_name,:last_name]\n\nx.group_by{|h| h.values_at(*group_keys)}.map do |_,a|\n     a.reduce do |memo,obj|\n        memo.merge(obj){|k,v1,v2| group_keys.include?(k) ? v1 : v1 + v2}\n    end\nend\n</code></pre>\n\n<p>First we <code>group_by</code> the appropriate keys then add the other items using <code>Enumerable#reduce</code></p>\n\n<p>Since you said rails if you can explain where this data came from there might be a simpler database way to handle this. </p>\n"}], "owner": {"reputation": 13, "user_id": 6749430, "user_type": "registered", "profile_image": "https://graph.facebook.com/963756266979707/picture?type=large", "display_name": "Nathan Berg", "link": "https://stackoverflow.com/users/6749430/nathan-berg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 39109636, "answer_count": 3, "score": 1, "last_activity_date": 1472000885, "creation_date": 1471979585, "question_id": 39109026, "link": "https://stackoverflow.com/questions/39109026/deduplicate-and-merge-hash-attributes-in-ruby-array-of-hashes", "title": "Deduplicate and merge hash attributes in ruby array of hashes", "body": "<p>Suppose I have the following array of hashes:</p>\n\n<pre><code>[\n{:first_name =&gt; \"john\", :last_name =&gt; \"doe\", :items_purchased =&gt; 1, :price =&gt; 5}, \n{:first_name =&gt; \"john\", :last_name =&gt; \"doe\", :items_purchased =&gt; 4, :price =&gt; 20}, \n{:first_name =&gt; \"john\", :last_name =&gt; \"doe\", :items_purchased =&gt; 4, :price =&gt; 20}, \n{:first_name =&gt; \"jane\", :last_name =&gt; \"doe\", :items_purchased =&gt; 2, :price =&gt; 7},\n{:first_name =&gt; \"jane\", :last_name =&gt; \"doe\", :items_purchased =&gt; 3, :price =&gt; 14},\n{:first_name =&gt; \"test\", :last_name =&gt; \"user\", :items_purchased =&gt; 1, :price =&gt; 4}\n]\n</code></pre>\n\n<p>I want to deduplicate based on certain attributes (<code>first_name</code> and <code>last_name</code> in this case) then add the <code>items_purchased</code> and <code>price</code> together to receive the following output</p>\n\n<pre><code>[\n{:first_name =&gt; \"john\", :last_name =&gt; \"doe\", :items_purchased =&gt; 9, :price =&gt; 45}, \n{:first_name =&gt; \"jane\", :last_name =&gt; \"doe\", :items_purchased =&gt;5, :price =&gt; 21},\n{:first_name =&gt; \"test\", :last_name =&gt; \"user\", :items_purchased =&gt; 1, :price =&gt; 4}\n]\n</code></pre>\n\n<p>Is there an easy way to accomplish this in rails? I\u2019ve been getting my mind tangled with the <code>group_by</code> and <code>merge</code> methods and need some assistance.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 5164, "user_id": 1461269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f5507a725df760d1a9b0dd88505f8bd1?s=128&d=identicon&r=PG", "display_name": "arjabbar", "link": "https://stackoverflow.com/users/1461269/arjabbar"}, "edited": false, "score": 1, "creation_date": 1471980870, "post_id": 39109015, "comment_id": 65565994, "body": "I think this Code Review would be a more appropriate site for this one: <a href=\"http://codereview.stackexchange.com/\">codereview.stackexchange.com</a>"}, {"owner": {"reputation": 654, "user_id": 2596140, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100000411131240/picture?type=large", "display_name": "Pedro Bernardes", "link": "https://stackoverflow.com/users/2596140/pedro-bernardes"}, "reply_to_user": {"reputation": 5164, "user_id": 1461269, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f5507a725df760d1a9b0dd88505f8bd1?s=128&d=identicon&r=PG", "display_name": "arjabbar", "link": "https://stackoverflow.com/users/1461269/arjabbar"}, "edited": false, "score": 0, "creation_date": 1472061102, "post_id": 39109015, "comment_id": 65605322, "body": "I didn&#39;t know this site! Thank you."}], "answers": [{"tags": [], "owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "is_accepted": false, "score": 0, "last_activity_date": 1471989390, "creation_date": 1471989390, "answer_id": 39111296, "question_id": 39109015, "link": "https://stackoverflow.com/questions/39109015/how-to-dry-up-this-rspec-controller-spec/39111296#39111296", "title": "How to DRY up this RSpec controller spec?", "body": "<p>you don't. voila, you are welcome.</p>\n"}, {"comments": [{"owner": {"reputation": 654, "user_id": 2596140, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100000411131240/picture?type=large", "display_name": "Pedro Bernardes", "link": "https://stackoverflow.com/users/2596140/pedro-bernardes"}, "edited": false, "score": 0, "creation_date": 1472060936, "post_id": 39124727, "comment_id": 65605235, "body": "Yeah, I was hopping there was some DSL-like way to achieve this, perhaps using shared_examples or something like that."}, {"owner": {"reputation": 654, "user_id": 2596140, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100000411131240/picture?type=large", "display_name": "Pedro Bernardes", "link": "https://stackoverflow.com/users/2596140/pedro-bernardes"}, "edited": false, "score": 0, "creation_date": 1472060945, "post_id": 39124727, "comment_id": 65605238, "body": "Thanks anyway :)  Just for the record, I wanted to be more concise on my question (removing the &quot;I think it is a silly question&quot; but SO wouldn&#39;t allow me to post it without more text :("}, {"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "reply_to_user": {"reputation": 654, "user_id": 2596140, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100000411131240/picture?type=large", "display_name": "Pedro Bernardes", "link": "https://stackoverflow.com/users/2596140/pedro-bernardes"}, "edited": false, "score": 0, "creation_date": 1472062062, "post_id": 39124727, "comment_id": 65605846, "body": "I answered since I think Ruby methods often do a better (more readable, less mysterious) job of DRYing up specs than RSpec features. Shared examples and such quickly get hard to follow. Didn&#39;t know that about questions; I&#39;ll have to experiment sometime."}, {"owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1472077166, "post_id": 39124727, "comment_id": 65613093, "body": "i don&#39;t think that this makes it more dry. it adds more lines of code and it makes it harder to understand because of the unnecessary indirection."}, {"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1472078650, "post_id": 39124727, "comment_id": 65613544, "body": "It unquestionably has less duplication (DRY), which is what was asked. Whether it&#39;s easier to understand than the original, now, that&#39;s a different question. I&#39;m not sure I&#39;d do this if I only had these three tests. I&#39;d definitely do it if I had 8 or 10. YMMV."}], "tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": true, "score": 0, "last_activity_date": 1472045359, "creation_date": 1472045359, "answer_id": 39124727, "question_id": 39109015, "link": "https://stackoverflow.com/questions/39109015/how-to-dry-up-this-rspec-controller-spec/39124727#39124727", "title": "How to DRY up this RSpec controller spec?", "body": "<p>You could extract some methods:</p>\n\n<pre><code>describe Api::TasksController, type: :controller do\n  it 'allows the creator of a task to destroy it' do\n    expect_delete_to_succeed @user\n  end\n\n  it 'does not allow the assignee of a task to destroy it' do\n    expect_delete_to_be_forbidden @assignee\n  end\n\n  it 'does not allow anyone unrelated to a task to destroy it' do\n    expect_delete_to_be_forbidden @spy\n  end\n\n  def expect_delete_to_succeed(requester)\n    delete_task requester\n    expect(response).to be_success\n    expect(Task.count).to eq 0\n  end\n\n  def expect_delete_to_be_forbidden(requester)\n    delete_task requester\n    expect(response).to be_forbidden\n    expect(Task.count).to eq 1\n  end\n\n  def delete_task(requester)\n    set_request_auth_header requester\n    delete :destroy, id: @task.id\n  end\n\nend\n</code></pre>\n\n<p>Side notes:</p>\n\n<ul>\n<li>Using instance (@) variables is not current standard practice in RSpec. Look into <a href=\"https://www.relishapp.com/rspec/rspec-core/docs/helper-methods/let-and-let\" rel=\"nofollow\"><code>let</code> 'variables'</a>.</li>\n<li><code>Task.exists? @task.id</code> seems like a clearer way of checking the deletion than checking <code>Task.count</code>.</li>\n</ul>\n"}], "owner": {"reputation": 654, "user_id": 2596140, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100000411131240/picture?type=large", "display_name": "Pedro Bernardes", "link": "https://stackoverflow.com/users/2596140/pedro-bernardes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 39124727, "answer_count": 2, "score": 1, "last_activity_date": 1472045438, "creation_date": 1471979559, "last_edit_date": 1472045438, "question_id": 39109015, "link": "https://stackoverflow.com/questions/39109015/how-to-dry-up-this-rspec-controller-spec", "title": "How to DRY up this RSpec controller spec?", "body": "<p>How can I DRY this spec up?</p>\n\n<pre><code>describe Api::TasksController, type: :controller do\n  it 'allows the creator of a task to destroy it' do\n    set_request_auth_header @user\n    delete :destroy, id: @task.id\n    expect(response).to be_success\n    expect(Task.count).to eq 0\n  end\n\n  it 'does not allow the assignee of a task to destroy it' do\n    set_request_auth_header @assignee\n    delete :destroy, id: @task.id\n    expect(response).to be_forbidden\n    expect(Task.count).to eq 1\n  end\n\n  it 'does not allow anyone unrelated to a task to destroy it' do\n    set_request_auth_header @spy\n    delete :destroy, id: @task.id\n    expect(response).to be_forbidden\n    expect(Task.count).to eq 1\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "acts-as-votable"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1471982743, "post_id": 39108937, "comment_id": 65566922, "body": "the core functionality is simple - you find the posts via an active record query, then call <code>destroy_all</code>. Beyond that it depends on how your app is specifically put together - impossible to know without showing your attempt thus far."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6749385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3823dcef020606fde6a3cb5874f0f81?s=128&d=identicon&r=PG", "display_name": "arminmon", "link": "https://stackoverflow.com/users/6749385/arminmon"}, "edited": false, "score": 0, "creation_date": 1472046519, "post_id": 39111040, "comment_id": 65595802, "body": "Sorry I should&#39;ve provided my codes earlier. I&#39;m noob with RoR atm. I just added my pins_controller. It&#39;d be great if you could walk me through it with both the controller and the view. Thanks"}], "tags": [], "owner": {"reputation": 960, "user_id": 4109592, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/7Sip6.jpg?s=128&g=1", "display_name": "Nick Schwaderer", "link": "https://stackoverflow.com/users/4109592/nick-schwaderer"}, "is_accepted": false, "score": 0, "last_activity_date": 1471988035, "creation_date": 1471988035, "answer_id": 39111040, "question_id": 39108937, "link": "https://stackoverflow.com/questions/39108937/how-to-destroy-all-votes-for-a-model-using-acts-as-votable-in-ruby-on-rails/39111040#39111040", "title": "How to destroy all votes for a model using acts_as_votable in Ruby on Rails", "body": "<p>I don't know your code layout but something I would do would roughly be having the button pass in the post_id params to the controller,</p>\n\n<pre><code>post = Post.find(permitted_params[:post][:id])\nVote.where(\"post_id = ?\", post.id).destroy_all\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6749385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3823dcef020606fde6a3cb5874f0f81?s=128&d=identicon&r=PG", "display_name": "arminmon", "link": "https://stackoverflow.com/users/6749385/arminmon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1472046476, "creation_date": 1471979327, "last_edit_date": 1472046476, "question_id": 39108937, "link": "https://stackoverflow.com/questions/39108937/how-to-destroy-all-votes-for-a-model-using-acts-as-votable-in-ruby-on-rails", "title": "How to destroy all votes for a model using acts_as_votable in Ruby on Rails", "body": "<p>I have implemented like and dislike functions for my posts already and they work just fine. In this phase I'm trying to provide some admin powers and privileges for my app. One of them is having the admin being able to reset votes for a post. A simple button that when clicked, the <strong>vote count will be reset to zero</strong> or better to say all <strong>votes get destroyed</strong>; that's it.</p>\n\n<p>The app is a pinterest clone.\nThis is pins_controller</p>\n\n<pre><code>class PinsController &lt; ApplicationController\nbefore_action :find_pin, only: [:show, :pinner, :edit, :update, :destroy, :upvote, :downvote]\nbefore_action :authenticate_user!, except: [:index, :show]\n\ndef index\n    @pins = Pin.all.order(\"created_at DESC\")\nend\n\ndef show \nend\n\ndef new\n    @pin = current_user.pins.build\nend\n\ndef create\n    @pin = current_user.pins.build(pin_params)\n\n    if @pin.save\n        redirect_to @pin, notice: \"Successfully created new Pin\"\n    else\n        render 'new'\n    end\nend\n\ndef edit\nend\n\ndef update\n    if @pin.update(pin_params)\n        redirect_to @pin, notice: \"Pin was successfully updated!\"\n    else\n        render 'edit'\n    end\nend\n\ndef destroy\n    @pin.destroy\n    redirect_to root_path\nend\n\ndef upvote\n    @pin.upvote_by current_user\n    redirect_to :back\nend\n\ndef downvote\n    @pin.downvote_by current_user\n    redirect_to :back\nend\n\nprivate\n\ndef pin_params\n    params.require(:pin).permit(:title, :description, :image, :extlink)\nend\n\ndef find_pin\n    @pin = Pin.find(params[:id])\nend\n\nend\n</code></pre>\n\n<p><a href=\"http://i.stack.imgur.com/fX6Af.jpg\" rel=\"nofollow\">This is how the app looks</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "carrierwave"], "answers": [{"tags": [], "owner": {"reputation": 69, "user_id": 1154796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f9ad233ab33ed43090a9aece758d02a0?s=128&d=identicon&r=PG", "display_name": "gnycl", "link": "https://stackoverflow.com/users/1154796/gnycl"}, "is_accepted": false, "score": 0, "last_activity_date": 1471981499, "creation_date": 1471981499, "answer_id": 39109491, "question_id": 39108932, "link": "https://stackoverflow.com/questions/39108932/carrierwave-not-uploading-image-for-model-through-different-controller/39109491#39109491", "title": "Carrierwave not uploading image for model through different controller", "body": "<p>The solution was to add <code>enctype: \"multipart/form-data\"</code> to the <code>form_tag</code> like so: <code>&lt;%= form_tag({:action =&gt; 'save_configuration'}, enctype: \"multipart/form-data\", id: 'form-save') do %&gt;</code></p>\n"}], "owner": {"reputation": 69, "user_id": 1154796, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f9ad233ab33ed43090a9aece758d02a0?s=128&d=identicon&r=PG", "display_name": "gnycl", "link": "https://stackoverflow.com/users/1154796/gnycl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 489, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471981499, "creation_date": 1471979315, "question_id": 39108932, "link": "https://stackoverflow.com/questions/39108932/carrierwave-not-uploading-image-for-model-through-different-controller", "title": "Carrierwave not uploading image for model through different controller", "body": "<p>I'm trying to upload a file with Carrierwave with a form and controller that's separate from the model Carrierwave is mounted on.</p>\n\n<p>My uploader LogoUploader is mounted on the <code>:logo</code> attribute of the Setting model.</p>\n\n<pre><code>class Setting &lt; ActiveRecord::Base\n  validates :name, presence: true, uniqueness: true\n\n  mount_uploader :logo, LogoUploader\nend\n</code></pre>\n\n<p>Migration: </p>\n\n<pre><code>class AddLogoToSettings &lt; ActiveRecord::Migration\n  def change\n    add_column :settings, :logo, :string\n  end\nend\n</code></pre>\n\n<p>I have a form at <code>views/feedback/configure.html.erb</code> for handling the image upload through the <code>FeedbackController</code>:</p>\n\n<pre><code>  &lt;%= form_tag({:action =&gt; 'save_configuration'}, id: 'form-save') do %&gt;\n&lt;div class=\"form-group\"&gt;\n      &lt;%= file_field_tag \"settings[cac_hlogo]\" %&gt;\n      &lt;%= image_tag(@cac_hlogo.logo.url) if @cac_hlogo.logo? %&gt;\n    &lt;/div&gt;\n\n    &lt;div class=\"form-actions\"&gt;\n      &lt;%= submit_tag t('save').titlecase, class: 'btn btn-primary' %&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>FeedbackController:</p>\n\n<pre><code>class FeedbackController &lt; ApplicationController\n  def configure\n    @cac_hlogo = Setting.find_or_create_by(name: 'cac_hlogo')\n  end\n\n  def save_configuration\n    cac_hlogo = Setting.find_or_create_by(name: 'cac_hlogo')\n    cac_hlogo.logo = params[:settings][:cac_hlogo]\n\n    respond_to do |format|\n      if cac_hlogo.save\n        format.html { redirect_to configure_feedback_index_path, notice: 'Configuration Saved.' }\n      else\n        format.html { redirect_to root_path, notice: 'There was a problem saving configuration.'}\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>I permit the <code>:logo</code> attribute to be updated in the <code>SettingsController</code>: </p>\n\n<pre><code>class SettingsController &lt; ApplicationController\n  before_action :authenticate_user!\n  load_and_authorize_resource\n\n  def setting_params\n    params.require(:setting).permit(:logo)\n  end\n\nend\n</code></pre>\n\n<p>For some reason the file never actually uploads and I have no idea why. The parameters I'm passing in the form seem all right, but nothing actually gets uploaded. What am I missing? Note: I am using local storage and all my other Carrierwave uploaders in the application work fine.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "if-statement", "refactoring", "code-structure"], "comments": [{"owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "edited": false, "score": 2, "creation_date": 1471978986, "post_id": 39108816, "comment_id": 65565048, "body": "use <a href=\"http://ruby-doc.org/docs/keywords/1.9/Object.html#method-i-case\" rel=\"nofollow noreferrer\">case</a> statements."}, {"owner": {"reputation": 4710, "user_id": 934739, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/RtwIb.png?s=128&g=1", "display_name": "Gerard Roche", "link": "https://stackoverflow.com/users/934739/gerard-roche"}, "edited": false, "score": 0, "creation_date": 1471981469, "post_id": 39108816, "comment_id": 65566287, "body": "Possible duplicate <a href=\"http://stackoverflow.com/questions/35275608/ruby-refactoring-if-else-statement\" title=\"ruby refactoring if else statement\">stackoverflow.com/questions/35275608/&hellip;</a>"}, {"owner": {"reputation": 4710, "user_id": 934739, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/RtwIb.png?s=128&g=1", "display_name": "Gerard Roche", "link": "https://stackoverflow.com/users/934739/gerard-roche"}, "edited": false, "score": 0, "creation_date": 1471981496, "post_id": 39108816, "comment_id": 65566306, "body": "Try searching stackoverflow <a href=\"http://stackoverflow.com/search?q=%5Bruby-on-rails%5D+refactoring+if+else\">stackoverflow.com/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 3262, "user_id": 5273921, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/kvzQp.jpg?s=128&g=1", "display_name": "Mike", "link": "https://stackoverflow.com/users/5273921/mike"}, "is_accepted": false, "score": 0, "last_activity_date": 1471979093, "creation_date": 1471979093, "answer_id": 39108877, "question_id": 39108816, "link": "https://stackoverflow.com/questions/39108816/what-is-an-efficient-way-to-refactor-a-heavy-if-statement-in-ruby-on-rails/39108877#39108877", "title": "What is an efficient way to refactor a heavy if statement in Ruby on Rails?", "body": "<p>You can use <code>case</code></p>\n\n<pre><code>&lt;% case @user.plan_id %&gt;\n&lt;% when 1 %&gt;\n    &lt;span class=\"label label-info\"&gt;CONTRIBUTOR&lt;/span&gt;\n&lt;% when 2 %&gt;\n    &lt;span class=\"label label-warning\"&gt;ELITE CONTRIBUTOR&lt;/span&gt;\n&lt;% when 3 %&gt;\n     &lt;span class=\"label label-info\"&gt;TECHNICIAN&lt;/span&gt;\n&lt;% when 4 %&gt;\n     &lt;span class=\"label label-warning\"&gt;ELITE TECHNICIAN&lt;/span&gt;\n&lt;% when 5 %&gt;\n     &lt;span class=\"label label-info\"&gt;CENTER&lt;/span&gt;\n&lt;% when 6 %&gt;\n     &lt;span class=\"label label-warning\"&gt;ELITE CENTER&lt;/span&gt;\n&lt;% when 7 %&gt;\n     &lt;span class=\"label label-info\"&gt;AFFAIR&lt;/span&gt;   \n&lt;% when 8 %&gt;\n      &lt;span class=\"label label-warning\"&gt;ELITE AFFAIR&lt;/span&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5250, "user_id": 5154683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae81933dce5ced9ec019414bbd4f0f4?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Nubel", "link": "https://stackoverflow.com/users/5154683/robert-nubel"}, "is_accepted": false, "score": 2, "last_activity_date": 1471979101, "creation_date": 1471979101, "answer_id": 39108880, "question_id": 39108816, "link": "https://stackoverflow.com/questions/39108816/what-is-an-efficient-way-to-refactor-a-heavy-if-statement-in-ruby-on-rails/39108880#39108880", "title": "What is an efficient way to refactor a heavy if statement in Ruby on Rails?", "body": "<p>Does <code>plan_id</code> reference a <code>Plan</code> model? If not, I'd suggest creating one, with a <code>label</code> attribute and an <code>elite</code> flag. Then, your statement would be:</p>\n\n<pre><code>&lt;span class=\"label label-&lt;%= @user.plan.elite ? 'warning' : 'info' %&gt;}\"&gt;\n  &lt;%= @user.plan.label %&gt;\n&lt;/span&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1595, "user_id": 2036529, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/007cbcdc3a14a31360dbec80be3ae5ad?s=128&d=identicon&r=PG", "display_name": "Utsav Kesharwani", "link": "https://stackoverflow.com/users/2036529/utsav-kesharwani"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1471979879, "post_id": 39108946, "comment_id": 65565493, "body": "If there is some correlation between the <code>klass</code>, and <code>description</code>, I can refactor the helper method. Since the user hasn&#39;t specified anything as such, I have kept it to be plain and simple. :)"}], "tags": [], "owner": {"reputation": 1595, "user_id": 2036529, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/007cbcdc3a14a31360dbec80be3ae5ad?s=128&d=identicon&r=PG", "display_name": "Utsav Kesharwani", "link": "https://stackoverflow.com/users/2036529/utsav-kesharwani"}, "is_accepted": false, "score": 0, "last_activity_date": 1471979352, "creation_date": 1471979352, "answer_id": 39108946, "question_id": 39108816, "link": "https://stackoverflow.com/questions/39108816/what-is-an-efficient-way-to-refactor-a-heavy-if-statement-in-ruby-on-rails/39108946#39108946", "title": "What is an efficient way to refactor a heavy if statement in Ruby on Rails?", "body": "<p>Define a helper method:</p>\n\n<pre><code>def plan_hash\n  {\n    1 =&gt; { :klass =&gt; \"label-info\",    :description =&gt; \"Plan1\" },\n    2 =&gt; { :klass =&gt; \"label-warning\", :description =&gt; \"Plan2\" },\n    3 =&gt; { :klass =&gt; \"label-info\",    :description =&gt; \"Plan3\" },\n    4 =&gt; { :klass =&gt; \"label-warning\", :description =&gt; \"Plan4\" },\n    5 =&gt; { :klass =&gt; \"label-info\",    :description =&gt; \"Plan5\" },\n    6 =&gt; { :klass =&gt; \"label-warning\", :description =&gt; \"Plan6\" },\n    7 =&gt; { :klass =&gt; \"label-info\",    :description =&gt; \"Plan7\" },\n    8 =&gt; { :klass =&gt; \"label-warning\", :description =&gt; \"Plan8\" }\n  }\nend\n</code></pre>\n\n<p>Then, in your view:</p>\n\n<pre><code>&lt;span class=\"label &lt;%= plan_hash[@user.plan_id][:klass] %&gt;\"&gt;&lt;%= plan_hash[@user.plan_id][:description] %&gt;&lt;/span&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1595, "user_id": 2036529, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/007cbcdc3a14a31360dbec80be3ae5ad?s=128&d=identicon&r=PG", "display_name": "Utsav Kesharwani", "link": "https://stackoverflow.com/users/2036529/utsav-kesharwani"}, "edited": false, "score": 0, "creation_date": 1471980040, "post_id": 39109105, "comment_id": 65565594, "body": "Small question: what&#39;s the purpose/benefit of adding <code>yield</code> to <code>plan_details</code> method?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1595, "user_id": 2036529, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/007cbcdc3a14a31360dbec80be3ae5ad?s=128&d=identicon&r=PG", "display_name": "Utsav Kesharwani", "link": "https://stackoverflow.com/users/2036529/utsav-kesharwani"}, "edited": false, "score": 0, "creation_date": 1471981720, "post_id": 39109105, "comment_id": 65566413, "body": "@UtsavKesharwani It means you can structure it as <code>plan_details(...) do</code> with a block inside rather than having to create local variables."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1471982185, "post_id": 39109105, "comment_id": 65566630, "body": "<code>yield</code> seems to be oddly underutilized outside of framework-level code in Ruby. Or maybe it is just the code I&#39;ve ended looking at."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1471982991, "post_id": 39109105, "comment_id": 65567042, "body": "@muistooshort I use it all the time, but I do like to lean more heavily on the quasi-functional programming you can do with it."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1471983254, "post_id": 39109105, "comment_id": 65567190, "body": "Same here. And lots of lambdas to make my <code>Enumerable</code> chains easier to read. I&#39;ve even been know to write my own classes rather than relying on the mess of nested hashes and arrays that everyone seems to like :)"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 3, "last_activity_date": 1471979884, "creation_date": 1471979884, "answer_id": 39109105, "question_id": 39108816, "link": "https://stackoverflow.com/questions/39108816/what-is-an-efficient-way-to-refactor-a-heavy-if-statement-in-ruby-on-rails/39109105#39109105", "title": "What is an efficient way to refactor a heavy if statement in Ruby on Rails?", "body": "<p>This is a job for a helper module, something like this:</p>\n\n<pre><code>module UserPlanHelper\n  PLANS = {\n    1 =&gt; [ \"info\", \"Plan1\" ],\n    2 =&gt; [ \"warning\", \"Plan2\" ],\n    3 =&gt; [ \"info\", \"Plan3\" ],\n    4 =&gt; [ \"warning\", \"Plan4\" ],\n    5 =&gt; [ \"info\", \"Plan5\" ],\n    6 =&gt; [ \"warning\", \"Plan6\" ],\n    7 =&gt; [ \"info\", \"Plan7\" ],\n    8 =&gt; [ \"warning\", \"Plan8\" ]\n  }\n\n  def plan_details(plan_id)\n    yield(PLANS[plan_id])\n  end\nend\n</code></pre>\n\n<p>If used in your controller this simplifies your code to something like:</p>\n\n<pre><code>&lt;%= plan_details(@user.plan_id) do |label_class, label| %&gt;\n  &lt;span class=\"label label-&lt;%= label_class %&gt;\"&gt;&lt;%= label %&gt;&lt;/span&gt;\n&lt;%- end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 551, "user_id": 3260603, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/WHzXB.jpg?s=128&g=1", "display_name": "tekina", "link": "https://stackoverflow.com/users/3260603/tekina"}, "is_accepted": false, "score": 0, "last_activity_date": 1471981338, "creation_date": 1471981338, "answer_id": 39109452, "question_id": 39108816, "link": "https://stackoverflow.com/questions/39108816/what-is-an-efficient-way-to-refactor-a-heavy-if-statement-in-ruby-on-rails/39109452#39109452", "title": "What is an efficient way to refactor a heavy if statement in Ruby on Rails?", "body": "<pre><code>&lt;span class=\"label label-&lt;%= @user.add_warning? ? 'warning' : 'info' %&gt;\"&gt;\n  Plan&lt;%= @user.plan_id.to_s %&gt;\n&lt;/span&gt;\n</code></pre>\n\n<p>Use this method in your user model:</p>\n\n<pre><code>def add_warning?\n  self.plan_id.in?([2, 4, 6, 8])\nend\n</code></pre>\n"}], "owner": {"reputation": 379, "user_id": 6567055, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-54co2AZ0T6Q/AAAAAAAAAAI/AAAAAAAASWI/ArbHxGqzEeo/photo.jpg?sz=128", "display_name": "Nathaniel Rand", "link": "https://stackoverflow.com/users/6567055/nathaniel-rand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "accepted_answer_id": 39109105, "answer_count": 5, "score": 0, "last_activity_date": 1511228939, "creation_date": 1471978786, "last_edit_date": 1511228939, "question_id": 39108816, "link": "https://stackoverflow.com/questions/39108816/what-is-an-efficient-way-to-refactor-a-heavy-if-statement-in-ruby-on-rails", "title": "What is an efficient way to refactor a heavy if statement in Ruby on Rails?", "body": "<p><strong>What is an efficient way to refactor a heavy if statement?</strong></p>\n\n<p><em>All suggestions are encouraged...</em></p>\n\n<pre><code>&lt;% if @user.plan_id == 1 %&gt;\n      &lt;span class=\"label label-info\"&gt;Plan1&lt;/span&gt;\n  &lt;% elsif @user.plan_id == 2 %&gt;\n      &lt;span class=\"label label-warning\"&gt;Plan2&lt;/span&gt;\n  &lt;% elsif @user.plan_id == 3 %&gt;\n      &lt;span class=\"label label-info\"&gt;Plan3&lt;/span&gt;\n  &lt;% elsif @user.plan_id == 4 %&gt;\n      &lt;span class=\"label label-warning\"&gt;Plan4&lt;/span&gt;\n  &lt;% elsif @user.plan_id == 5 %&gt;\n      &lt;span class=\"label label-info\"&gt;Plan5&lt;/span&gt;\n  &lt;% elsif @user.plan_id == 6 %&gt;\n      &lt;span class=\"label label-warning\"&gt;Plan6&lt;/span&gt;\n  &lt;% elsif @user.plan_id == 7 %&gt;\n      &lt;span class=\"label label-info\"&gt;Plan7&lt;/span&gt;   \n  &lt;% elsif @user.plan_id == 8 %&gt;\n      &lt;span class=\"label label-warning\"&gt;Plan8&lt;/span&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 636, "user_id": 1253311, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21acab710c6e17104c2af7bf8390a9d5?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1253311/matt"}, "edited": false, "score": 0, "creation_date": 1471978992, "post_id": 39108701, "comment_id": 65565051, "body": "It looks like <a href=\"https://github.com/rails/spring\" rel=\"nofollow noreferrer\">spring</a> is running in the background. You might not have intended to run it. Have you tried killing the spring process (<code>kill -9 81129</code>; the process id is from the error message)  and then running <code>rails c</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 551, "user_id": 6656137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24c37e948e8ffcbc3a7e01ea72066e3c?s=128&d=identicon&r=PG", "display_name": "rmhunter", "link": "https://stackoverflow.com/users/6656137/rmhunter"}, "is_accepted": false, "score": 1, "last_activity_date": 1471979459, "creation_date": 1471979459, "answer_id": 39108984, "question_id": 39108701, "link": "https://stackoverflow.com/questions/39108701/trouble-starting-ruby-console/39108984#39108984", "title": "Trouble starting Ruby console", "body": "<p>Does it still let you use the console? The <code>irb(main):001:0&gt;</code> at the end suggests that it is indeed working, you're just getting a warning about your terminal type setting being missing.</p>\n\n<p>To fix the warning...If you're using a 3rd party terminal emulator, I'd reinstall that and see if that fixes it. Otherwise you can manually set your terminal type using <code>export TERM=xxx</code> in your <code>~/.bashrc</code> file.</p>\n"}, {"tags": [], "owner": {"reputation": 184, "user_id": 3827689, "user_type": "registered", "profile_image": "https://graph.facebook.com/686872831/picture?type=large", "display_name": "Will Schenk", "link": "https://stackoverflow.com/users/3827689/will-schenk"}, "is_accepted": false, "score": 4, "last_activity_date": 1489762285, "creation_date": 1489762285, "answer_id": 42860600, "question_id": 39108701, "link": "https://stackoverflow.com/questions/39108701/trouble-starting-ruby-console/42860600#42860600", "title": "Trouble starting Ruby console", "body": "<p>to fix this, you need to stop all rails processes and stop spring (bin/spring stop) and then make sure that you start up spring with an attached terminal.  </p>\n\n<p>There are basically three ways where spring would get started: bundle exec rails server, bundle exec rails console, or something like bundle exec guard or some other testing thing.  If you start up rails through foreman, then it will run one of these commands, basically.</p>\n\n<p>Starting the console will attach a input to the process, and this is where it will figure out the \"terminal\" type.  Do that first, before everything thing else.  Once that's loaded in memory, then its configured correctly, and starting up server or whatever will work find.</p>\n\n<p>Server then console will give you the crazy error that you see.  console then server will not.</p>\n"}, {"comments": [{"owner": {"reputation": 517, "user_id": 685925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/422edb85483488003d865dece1acac92?s=128&d=identicon&r=PG", "display_name": "Vala", "link": "https://stackoverflow.com/users/685925/vala"}, "edited": false, "score": 0, "creation_date": 1503654524, "post_id": 43647479, "comment_id": 78715732, "body": "For iTerm you can find the Terminal setting in Preferences -&gt; Profiles -&gt; Terminal -&gt; Report Terminal Type  You&#39;ll need to start a new terminal session (tab) for changes to take effect"}], "tags": [], "owner": {"reputation": 1329, "user_id": 1033197, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/6e0ed765699d27f1302adff76bc18b0e?s=128&d=identicon&r=PG", "display_name": "Khoa Nguyen", "link": "https://stackoverflow.com/users/1033197/khoa-nguyen"}, "is_accepted": false, "score": 5, "last_activity_date": 1493259250, "last_edit_date": 1493259250, "creation_date": 1493258820, "answer_id": 43647479, "question_id": 39108701, "link": "https://stackoverflow.com/questions/39108701/trouble-starting-ruby-console/43647479#43647479", "title": "Trouble starting Ruby console", "body": "<p>On MacOS Sierra, check TERM in Terminal.app</p>\n\n<pre><code>$ echo $TERM\nxterm-256color\n$ bin/spring stop\n$ bin/rails c\nNo entry for terminal type \"local/var/ry/rubies\";\nusing dumb terminal settings.\nirb&gt; exit\n$ bin/rails c\nCannot read termcap database;\nusing dumb terminal settings.\n</code></pre>\n\n<p>You can change TERM via Terminal > Preference > Profiles > Advanced > Terminfo > Declare terminal as: xterm.</p>\n\n<p>Open new Terminal.</p>\n\n<pre><code>$ echo $TERM\nxterm\n$ bin/rails c\nirb&gt;    \n</code></pre>\n\n<p>All sweet no warnings.</p>\n\n<p>Now I leave it to someone with greater knowledge to explain why.</p>\n"}], "owner": {"reputation": 1740, "user_id": 6749371, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/1fb6335a13491c2ead854c6c24a81771?s=128&d=identicon&r=PG&f=1", "display_name": "J Seabolt", "link": "https://stackoverflow.com/users/6749371/j-seabolt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2542, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1536794600, "creation_date": 1471978374, "question_id": 39108701, "link": "https://stackoverflow.com/questions/39108701/trouble-starting-ruby-console", "title": "Trouble starting Ruby console", "body": "<p>I am fairly new to Ruby. I am have a problem getting my console to start a second time. I created my app (JacksApp) and created a model for it. I then shut down the app tried to restart the console a second time. When I type \"rails c\" I get this:</p>\n\n<p>Running via Spring preloader in process 81129\nLoading development environment (Rails 5.0.0.1)\nNo entry for terminal type \"1.0.0/libexec:/Users/johnseabolt/.rbenv/shims:/Library/Frameworks/Python.framework/Versions/3.5/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin\";\nusing dumb terminal settings.\nirb(main):001:0> </p>\n\n<p>I don't understand what's going on. Can someone help? I am in the directory for the app. I'm confused. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "audio", "google-speech-api"], "comments": [{"owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1471977569, "post_id": 39108357, "comment_id": 65564293, "body": "Recommending third party resources is off topic for Stack Overflow -- you&#39;ll have to find another way to phrase your request or this question is likely to be closed. Also, does it really make sense to convert from a lossy format to a lossless format?"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1471979215, "post_id": 39108357, "comment_id": 65565159, "body": "FWIW: <a href=\"http://superuser.com/questions/457548/how-can-i-convert-an-mp3-to-flac/457549\" title=\"how can i convert an mp3 to flac\">superuser.com/questions/457548/how-can-i-convert-an-mp3-to-f&zwnj;&#8203;lac/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "edited": false, "score": 0, "creation_date": 1472029799, "post_id": 39109903, "comment_id": 65584056, "body": "Yeah, I got that far after reading through the code in the gem.  Just seems like an utter ballache. Will need to somehow integrate an ffmpeg buildpack into heroku to be able to do it. Don&#39;t know why google can&#39;t just allow formats that people actually use..."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "edited": false, "score": 0, "creation_date": 1472032215, "post_id": 39109903, "comment_id": 65585667, "body": "this one seems to work: <a href=\"https://elements.heroku.com/buildpacks/jonathanong/heroku-buildpack-ffmpeg-latest\" rel=\"nofollow noreferrer\">elements.heroku.com/buildpacks/jonathanong/&hellip;</a> ... after you add it you need to commit some arbitrary code change and <code>git push heroku master</code> to trigger a new build, then <code>heroku run &quot;ffmpeg --version&quot;</code> should work"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 2, "last_activity_date": 1471983097, "creation_date": 1471983097, "answer_id": 39109903, "question_id": 39108357, "link": "https://stackoverflow.com/questions/39108357/convert-mp3-to-flac-files/39109903#39109903", "title": "Convert mp3 to flac files", "body": "<p>@orde linked to an exiting question which recommends the following:</p>\n\n<pre><code>ffmpeg -i input.mp3 output.flac\n</code></pre>\n\n<p>This is not a ruby command, it is a system command (i.e. unix or windows) </p>\n\n<p>To call a system command from ruby, you can use backticks or <code>system</code>.</p>\n\n<p>For example, after you've installed <code>ffmpeg</code> to your system</p>\n\n<pre><code>def convert_mp3_to_flac(mp3_path)\n  flac_path = mp3_path.gsub(\".mp3\", \".flac\")\n  system(\"ffmpeg -i #{mp3_path} #{flac_path}\")\nend \n</code></pre>\n"}], "owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1368, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471983097, "creation_date": 1471977053, "question_id": 39108357, "link": "https://stackoverflow.com/questions/39108357/convert-mp3-to-flac-files", "title": "Convert mp3 to flac files", "body": "<p>I'm trying to find a way of easily converting mp3 to flac files using ruby (preferably) server-side. \nI have a horde of audio that I would like to transcribe using the google speech api but it only accepts flac. (among other things). \nCan find a flac2mp3 convertor that will work on a laptop, went through the code and unfortunately seems to be just calling a system command which requires having the codecs installed locally. .</p>\n\n<p>Is there an api maybe that will do this for me? \nOr an easy way to install the codecs and run this sort of command on heroku. </p>\n"}, {"tags": ["ruby", "internet-explorer", "internet-explorer-11", "watir", "watir-webdriver"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 3, "creation_date": 1471978915, "post_id": 39108176, "comment_id": 65564994, "body": "Try the 32-bit version of IEDriverServer.  FWIW: <a href=\"https://github.com/seleniumhq/selenium-google-code-issue-archive/issues/5116\" rel=\"nofollow noreferrer\">github.com/seleniumhq/selenium-google-code-issue-archive/iss&zwnj;&#8203;ues/&hellip;</a>"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1471979357, "post_id": 39108176, "comment_id": 65565231, "body": "Some have had luck by changing the <code>requireWindowFocus</code> setting - see <a href=\"http://stackoverflow.com/a/32691070/1200545\">stackoverflow.com/a/32691070/1200545</a>"}, {"owner": {"reputation": 879, "user_id": 406470, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/07ac9d851e863e74ee0b8cee1af4ae2a?s=128&d=identicon&r=PG", "display_name": "redcodefinal", "link": "https://stackoverflow.com/users/406470/redcodefinal"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1471979767, "post_id": 39108176, "comment_id": 65565432, "body": "@orde Fixed it! Thank you so much the six seconds a char was driving me nuts."}, {"owner": {"reputation": 2024, "user_id": 497811, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/78b8855846f0ad24c680199d5361c3ca?s=128&d=identicon&r=PG", "display_name": "adam reed", "link": "https://stackoverflow.com/users/497811/adam-reed"}, "edited": false, "score": 0, "creation_date": 1472569504, "post_id": 39108176, "comment_id": 65799034, "body": "You can also object.value = &quot;ABCDEFG&quot; and set the whole field at once rather than typing."}], "owner": {"reputation": 879, "user_id": 406470, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/07ac9d851e863e74ee0b8cee1af4ae2a?s=128&d=identicon&r=PG", "display_name": "redcodefinal", "link": "https://stackoverflow.com/users/406470/redcodefinal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "closed_date": 1471980000, "answer_count": 0, "score": 0, "last_activity_date": 1471977601, "creation_date": 1471976384, "last_edit_date": 1495535351, "question_id": 39108176, "link": "https://stackoverflow.com/questions/39108176/ruby-watir-webdriver-typing-speed-is-insanely-slow", "closed_reason": "Duplicate", "title": "ruby - watir-webdriver - Typing speed is INSANELY slow", "body": "<pre><code>require 'watir-webdriver'\nb = Watir::Browser.new :ie\nb.goto \"google.com\"\nb.text_field(title: \"Search\").set \"ABCDEFG\"\n</code></pre>\n\n<p>When running the above code I run into an issue where Watir takes SIX seconds to type one character, and then takes SIX seconds to type the next character and so on. This happens every time. I've searched up and down in the documentation for Watir and haven't found a way to increase this typing speed. There used to be a <code>Watir::Browser#speed</code> method but I've searched through the source code and found no references to <code>speed</code>.</p>\n\n<p>I looked at <a href=\"https://stackoverflow.com/questions/34456906/how-to-control-test-execution-speed-in-watir-webdriver-with-the-watirbrowsers\">this question</a> but it's no longer helpful :&lt;</p>\n\n<p>I must use internet exploder for this, because of DCOM :&lt;</p>\n\n<pre><code>RUBY_VERSION =&gt; 2.3.1\nWatir::VERSION =&gt; 0.9.3\nIE Version =&gt; 11.494\nIEDriverServer =&gt; 2.53_1 x64\n</code></pre>\n"}, {"tags": ["ruby", "bash", "nginx", "docker", "sinatra"], "answers": [{"comments": [{"owner": {"reputation": 1359, "user_id": 105127, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8520c294ab34f7141949731129e9b564?s=128&d=identicon&r=PG", "display_name": "RooSoft", "link": "https://stackoverflow.com/users/105127/roosoft"}, "edited": false, "score": 0, "creation_date": 1471978216, "post_id": 39108626, "comment_id": 65564641, "body": "Yeah, starting to understand that Docker is all about single process apps. Thus, running a sinatra app seems to be a complete use case for a container. I am thinking about running nginx on the server itself."}], "tags": [], "owner": {"reputation": 3422, "user_id": 3807510, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hroEi.jpg?s=128&g=1", "display_name": "Dirk Grappendorf", "link": "https://stackoverflow.com/users/3807510/dirk-grappendorf"}, "is_accepted": false, "score": 1, "last_activity_date": 1471978072, "creation_date": 1471978072, "answer_id": 39108626, "question_id": 39107759, "link": "https://stackoverflow.com/questions/39107759/nginx-seems-to-crash-on-sinatra-app-in-docker/39108626#39108626", "title": "Nginx seems to crash on Sinatra app in Docker", "body": "<p>You can't have multiple <code>CMD</code> statements in a single Dockerfile (<a href=\"https://docs.docker.com/engine/reference/builder/#/cmd\" rel=\"nofollow\">https://docs.docker.com/engine/reference/builder/#/cmd</a>). If you look at the output of <code>docker build</code>, you can see that every <code>CMD</code> creates a new image. Each <code>CMD</code> overwrites the one specified in the previous image.</p>\n\n<p>If you want to run multiple processes in a Docker container, you could use a process manager like <a href=\"http://supervisord.org/\" rel=\"nofollow\">supervisord</a>. supervisord also helps you to automatically restart the processes in case of a failure. A tutorial on how this is done can be found here:</p>\n\n<p><a href=\"https://docs.docker.com/engine/admin/using_supervisord/\" rel=\"nofollow\">https://docs.docker.com/engine/admin/using_supervisord/</a></p>\n\n<p>Another (and IMHO more cleaner) solution is to start two containers. One for the Sinatra app and one for Nginx. Simply link both containers together (<code>docker create --link ...</code>) or setup a network (<code>docker network create ...</code>) and connect both containers to it (<code>docker create --network ...</code>).</p>\n"}], "owner": {"reputation": 1359, "user_id": 105127, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/8520c294ab34f7141949731129e9b564?s=128&d=identicon&r=PG", "display_name": "RooSoft", "link": "https://stackoverflow.com/users/105127/roosoft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1471978072, "creation_date": 1471974635, "question_id": 39107759, "link": "https://stackoverflow.com/questions/39107759/nginx-seems-to-crash-on-sinatra-app-in-docker", "title": "Nginx seems to crash on Sinatra app in Docker", "body": "<p>Dockerfile:</p>\n\n<pre><code>FROM ruby:2.3.1-slim\nMAINTAINER Marc Lacoursiere &lt;marc@roosoft.com&gt;\n\nRUN apt-get update &amp;&amp; apt-get install -yq nginx\n\nRUN rm /etc/nginx/sites-enabled/default\nADD docker/sinatra.conf /etc/nginx/sites-enabled/sinatra.conf\n\nRUN adduser app --gecos \"First Last,RoomNumber,WorkPhone,HomePhone\" --disabled-password\nRUN mkdir /home/app/webapp\n\nWORKDIR /tmp\nCOPY app/Gemfile /tmp/\nCOPY app/Gemfile.lock /tmp/\nRUN bundle install\n\nCOPY app /home/app/webapp\nRUN chown -R app:app /home/app\n\nCMD [\"nginx\", \"-g\", \"daemon off;\"]\nCMD [\"ruby\", \"/home/app/webapp/app.rb\"]\n</code></pre>\n\n<p>Sinatra.conf:</p>\n\n<pre><code>upstream app {\n    server 127.0.0.1:4000;\n}\n\nserver {\n    listen 80 default_server;\n    server_name localhost;\n\n    error_log /var/log/nginx/localhost.error_log info;\n\n    location / {\n        proxy_pass http://app;\n    }\n}\n</code></pre>\n\n<p>app.rb</p>\n\n<pre><code>require 'sinatra'\nrequire 'sinatra/json'\n\nset :port, 4000\n\nget '/' do\n  json 'Hello World!'\nend\n</code></pre>\n\n<p>Gemfile:</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'sinatra', '1.4.6'\ngem 'sinatra-contrib', '~&gt; 1.4.2'\n</code></pre>\n\n<p>How it gets executed in bash</p>\n\n<pre><code>docker run -p 4444:80 roosoft/sinatra-example\n</code></pre>\n\n<p>Simply said, I am supposed to get a sinatra app answering the container's port 4000. Nginx is listening to the container's port 80 and returns what it finds on port 4000, which is the sinatra app. The container's port 80 is redirected to the local port 4444. But port 4444 returns:</p>\n\n<pre><code>curl: (52) Empty reply from server\n</code></pre>\n\n<p>At that point, for some obscure reason, nginx is not running in the container. To fix it, I simply have to login into the container, type <code>service nginx start</code> and everything's fine. I can log out from the container and the local port 4444 returns what's expected.</p>\n\n<p>If I comment out the last Dockerfile line, rebuild and restart the container, there is no sinatra app running in the container's port 4000, but nginx is running this time! Seems like nginx gets killed when I run sinatra.</p>\n\n<p>What am I doing wrong? I obviously want both to run simultaneously...</p>\n"}, {"tags": ["ruby", "function", "random"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1472403791, "post_id": 39107363, "comment_id": 65727964, "body": "If you find any of the answers helpful please consider selecting the one you liked best."}], "answers": [{"tags": [], "owner": {"reputation": 9160, "user_id": 1300194, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/oBkyV.jpg?s=128&g=1", "display_name": "Awlad Liton", "link": "https://stackoverflow.com/users/1300194/awlad-liton"}, "is_accepted": true, "score": 0, "last_activity_date": 1471973684, "creation_date": 1471973684, "answer_id": 39107504, "question_id": 39107363, "link": "https://stackoverflow.com/questions/39107363/generating-evaluating-then-re-generating-random-numbers-in-ruby/39107504#39107504", "title": "Generating, Evaluating, then Re-generating Random Numbers in Ruby", "body": "<p>Try this:</p>\n\n<pre><code>    x = rand(1...9)\n    y = rand(1...9)\n    z = rand(1...9)\n\nwhile x - y - z &gt; 0\n    x = rand(1...9)\n    y = rand(1...9)\n    z = rand(1...9)\nend\n\nputs \"x: #{x}, y: #{y}, z: #{z}\"\n</code></pre>\n\n<p>More generic way may be using method like this:</p>\n\n<pre><code>def generate \n    x = rand(1...9)\n    y = rand(1...9)\n    z = rand(1...9)\n    [x,y,z]\nend \nx,y,z = generate()\n\nwhile x - y - z &gt; 0\n    x,y,z = generate()\nend\n\nputs \"x: #{x}, y: #{y}, z: #{z}\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1471974088, "post_id": 39107511, "comment_id": 65562337, "body": "Why not use <code>while values.inject(&amp;:-) &lt;= 0</code>?"}, {"owner": {"reputation": 5, "user_id": 6500298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a670bd8c7126320e5c191fe05c80dc2a?s=128&d=identicon&r=PG&f=1", "display_name": "old_dog_new_tricks", "link": "https://stackoverflow.com/users/6500298/old-dog-new-tricks"}, "edited": false, "score": 0, "creation_date": 1471974132, "post_id": 39107511, "comment_id": 65562366, "body": "Thanks very much tadman. So, later in the script, outside this function, I can call those values from the array? i.e. puts values[0]  or  puts  values[0] + values[1]?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1471974248, "post_id": 39107511, "comment_id": 65562426, "body": "@pjs Actually that&#39;s a better way of doing it, I&#39;ll change it. Thanks!"}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "reply_to_user": {"reputation": 5, "user_id": 6500298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a670bd8c7126320e5c191fe05c80dc2a?s=128&d=identicon&r=PG&f=1", "display_name": "old_dog_new_tricks", "link": "https://stackoverflow.com/users/6500298/old-dog-new-tricks"}, "edited": false, "score": 0, "creation_date": 1471974267, "post_id": 39107511, "comment_id": 65562430, "body": "@old_dog_new_tricks - Outside the function they won&#39;t be called <code>values</code>, they&#39;ll be called whatever variable name you assigned the function return:  <code>foo = random_values</code> would give you the values in <code>foo</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1471974282, "post_id": 39107511, "comment_id": 65562434, "body": "Perhaps generalize to pass a proc or block that evaluates the condition that must be satisfied by the random numbers."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 5, "user_id": 6500298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a670bd8c7126320e5c191fe05c80dc2a?s=128&d=identicon&r=PG&f=1", "display_name": "old_dog_new_tricks", "link": "https://stackoverflow.com/users/6500298/old-dog-new-tricks"}, "edited": false, "score": 0, "creation_date": 1471974372, "post_id": 39107511, "comment_id": 65562483, "body": "@old_dog_new_tricks You can expand the results if you want like <code>x, y, z = random_values</code> and you&#39;ll get whatever names you want. By default you&#39;ll get an array if you specify only one value on the <i>left-side</i> of the assignment."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1471974557, "post_id": 39107511, "comment_id": 65562599, "body": "@CarySwoveland I put in an example using an Enumerator which makes the validation logic a lot easier to inline."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1471983045, "post_id": 39107511, "comment_id": 65567072, "body": "@CarySwoveland You should at least give people a hint about <a href=\"https://ruby-doc.org/core-2.3.1/Proc.html#method-i-arity\" rel=\"nofollow noreferrer\"><code>arity</code></a> otherwise that will seem like dark magic."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1471983083, "post_id": 39107511, "comment_id": 65567097, "body": "Shhh! They should be able to find it. Extra points for an answer that doesn&#39;t use the method mentioned by tadman."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1471983738, "post_id": 39107511, "comment_id": 65567468, "body": "Readers, here&#39;s an exercise for you: construct a method <code>doit</code> such that <code>doit(1..9) { |x,y,z| x-y-z &gt; 0 } #=&gt; [9, 3, 3]; doit(1..9) { |x,y| x-y &gt; 0 } #=&gt; [6, 4]</code>.  ."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 4, "last_activity_date": 1471974329, "last_edit_date": 1471974329, "creation_date": 1471973729, "answer_id": 39107511, "question_id": 39107363, "link": "https://stackoverflow.com/questions/39107363/generating-evaluating-then-re-generating-random-numbers-in-ruby/39107511#39107511", "title": "Generating, Evaluating, then Re-generating Random Numbers in Ruby", "body": "<p>There's a number of patterns in programming, and Ruby in particular, that you'll see time and time again. This <em>generate-and-verify-on-fail-redo</em> type pattern is fairly common, and common enough Ruby has a <code>begin ... end while (cond)</code> structure for it.</p>\n\n<p>One thing that's working against you here is having three variables. This violates the <a href=\"http://en.wikipedia.org/wiki/Zero_one_infinity_rule\" rel=\"nofollow\">Zero, One or Infinity Rule</a> which is essential to having organized code. When dealing with more than \"one\" thing, consider using a data structure like an array.</p>\n\n<p>Taking all that into account here's a simple approach:</p>\n\n<pre><code>def random_values(count = 3)\n  begin\n    values = Array.new(count) { rand(1...9) }\n  end while (values.inject(&amp;:-) &lt;= 0)\n\n  values\nend\n</code></pre>\n\n<p>This keeps generating lists until you find one that meets your criteria. The <code>inject</code> call is a quick way of performing the subtraction on the numbers in a particular set by iterating through the list and subtracting one element from the next, then using that result in the subsequent loop.</p>\n\n<p>The <code>Array</code> constructor is given two arguments, one is the number of elements to pre-allocate to it, the second is a block that defines how those elements should be produced. This is a quick way of making a N length array of random values.</p>\n\n<p>Now a slightly more Ruby way of doing this is to define a generator of random number sets:</p>\n\n<pre><code>random_values = Enumerator.new do |y|\n  loop do\n    y &lt;&lt; Array.new(3) { rand(1...9) }\n  end\nend\n</code></pre>\n\n<p>This allows you to apply the <a href=\"http://ruby-doc.org/core-2.3.1/Enumerable.html\" rel=\"nofollow\">Enumerable</a> library to the problem and <code>find</code> the first entry matching your criteria. Here you can expand the variables in the array within this local test block to keep the code simple:</p>\n\n<pre><code>first = random_values.find do |x, y, z|\n  x - y - z &gt; 0\nend\n</code></pre>\n\n<p>The advantage of this approach is you can chain things together and get things like this:</p>\n\n<pre><code>selection = random_values.lazy.select do |x, y, z|\n  x - y - z &gt; 0\nend.first(10)\n</code></pre>\n\n<p>This will \"lazy\" enumerate arrays, that is it will produce them on-demand instead if running that loop until completion, and will pull out the first 10 that match and save those in an array called <code>selection</code>.</p>\n"}], "owner": {"reputation": 5, "user_id": 6500298, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a670bd8c7126320e5c191fe05c80dc2a?s=128&d=identicon&r=PG&f=1", "display_name": "old_dog_new_tricks", "link": "https://stackoverflow.com/users/6500298/old-dog-new-tricks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 39107504, "answer_count": 2, "score": 0, "last_activity_date": 1471974329, "creation_date": 1471973190, "last_edit_date": 1471973336, "question_id": 39107363, "link": "https://stackoverflow.com/questions/39107363/generating-evaluating-then-re-generating-random-numbers-in-ruby", "title": "Generating, Evaluating, then Re-generating Random Numbers in Ruby", "body": "<p>I need to generate random values for a few variables. And then, if those values meet certain characteristics, I need to trash them and re-generate (re-define the value of the variable?).</p>\n\n<p>I probably need to do this with a function but I'm just learning those and not sure how to escape the \"locality\" of variables created in a function (I'll need to call them later in the script).</p>\n\n<p>So let's say I have:</p>\n\n<pre><code>x = rand(1...9)\ny = rand(1...9)\nz = rand(1...9)\n</code></pre>\n\n<p>Afterward I need something like</p>\n\n<pre><code>if x - y - z &lt; 0\nthen **start over** until x - y - z &gt; 0\nend\n</code></pre>\n\n<p>It seems like this must have a \"simple\" solution that I just don't have the experience/knowledge to see. Any ideas appreciated!</p>\n"}, {"tags": ["ruby", "ubuntu", "cloud-foundry", "gist", "bosh-deployer"], "answers": [{"tags": [], "owner": {"reputation": 3924, "user_id": 402149, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2xTAq.jpg?s=128&g=1", "display_name": "Dan Higham", "link": "https://stackoverflow.com/users/402149/dan-higham"}, "is_accepted": true, "score": 1, "last_activity_date": 1472369271, "creation_date": 1472369271, "answer_id": 39188947, "question_id": 39106872, "link": "https://stackoverflow.com/questions/39106872/bosh-stemcell-ubuntu-ruby-in-conflict-with-var-vcap-bosh-lib-ruby-loaderror/39188947#39188947", "title": "Bosh stemcell Ubuntu Ruby, in conflict with /var/vcap/bosh/lib/ruby (LoadError)", "body": "<p>If you run the gist-paste command as a user other than root, it should work fine. I tested this myself on stemcell 1.3232.0</p>\n"}], "owner": {"reputation": 2271, "user_id": 1140727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/VAyCK.jpg?s=128&g=1", "display_name": "Ivanov", "link": "https://stackoverflow.com/users/1140727/ivanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 39188947, "answer_count": 1, "score": 0, "last_activity_date": 1472369271, "creation_date": 1471971464, "question_id": 39106872, "link": "https://stackoverflow.com/questions/39106872/bosh-stemcell-ubuntu-ruby-in-conflict-with-var-vcap-bosh-lib-ruby-loaderror", "title": "Bosh stemcell Ubuntu Ruby, in conflict with /var/vcap/bosh/lib/ruby (LoadError)", "body": "<p>I tried to install <code>gist</code> tool in Bosh VM</p>\n\n<blockquote>\n  <p>Synopsis\n         The  gist  gem provides a gist-paste command that you can use from your\n         terminal to upload content to <a href=\"https://gist.github.com/\" rel=\"nofollow\">https://gist.github.com/</a>.</p>\n</blockquote>\n\n<p>version</p>\n\n<pre><code>stemcells:\n- name: bosh-openstack-kvm-ubuntu-trusty-go_agent\n  version: 3232.2\n</code></pre>\n\n<p>Ubuntu package installation and release:</p>\n\n<pre><code># apt-get install gist\n# cat /etc/lsb-release\nDISTRIB_ID=Ubuntu\nDISTRIB_RELEASE=14.04\nDISTRIB_CODENAME=trusty\nDISTRIB_DESCRIPTION=\"Ubuntu 14.04.4 LTS\"\n# dpkg -l gist\nDesired=Unknown/Install/Remove/Purge/Hold\n| Status=Not/Inst/Conf-files/Unpacked/halF-conf/Half-inst/trig-aWait/Trig-pend\n|/ Err?=(none)/Reinst-required (Status,Err: uppercase=bad)\n||/ Name                                   Version                  Architecture             Description\n+++-======================================-========================-========================-==================================================================================\nii  gist                                   4.2.0-1                  all                      Upload gists to gist.github.com\n</code></pre>\n\n<p>error message I receive</p>\n\n<pre><code># gist-paste -p mongodb.log*\n/var/vcap/bosh/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require': cannot load such file -- gist (LoadError)\n        from /var/vcap/bosh/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb:36:in `require'\n        from /usr/bin/gist-paste:7:in `&lt;main&gt;'\n</code></pre>\n\n<p>There is some conflict with Ubuntu provided Ruby and the one from <code>/var/vcap/bosh/lib/ruby/site_ruby/1.9.1/rubygems</code>. Any idea howto use the Right ruby gem?</p>\n"}, {"tags": ["c++", "ruby", "swig", "undefined-symbol"], "answers": [{"comments": [{"owner": {"reputation": 144829, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1472043168, "post_id": 39122769, "comment_id": 65593215, "body": "Is this an answer? Or another question? Or a clarification?"}, {"owner": {"reputation": 29, "user_id": 4938261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c89365a47ef8a9407e7b6dfa1ec78719?s=128&d=identicon&r=PG&f=1", "display_name": "satj", "link": "https://stackoverflow.com/users/4938261/satj"}, "reply_to_user": {"reputation": 144829, "user_id": 2836621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/suHg4.jpg?s=128&g=1", "display_name": "Mark Setchell", "link": "https://stackoverflow.com/users/2836621/mark-setchell"}, "edited": false, "score": 0, "creation_date": 1472202577, "post_id": 39122769, "comment_id": 65668053, "body": "@Mark It&#39;s an answer."}], "tags": [], "owner": {"reputation": 29, "user_id": 4938261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c89365a47ef8a9407e7b6dfa1ec78719?s=128&d=identicon&r=PG&f=1", "display_name": "satj", "link": "https://stackoverflow.com/users/4938261/satj"}, "is_accepted": true, "score": 0, "last_activity_date": 1472040090, "creation_date": 1472040090, "answer_id": 39122769, "question_id": 39106587, "link": "https://stackoverflow.com/questions/39106587/swig-undefined-symbols/39122769#39122769", "title": "SWIG undefined symbols", "body": "<p>When creating the shared library, it didn't know where the object files of the source code were, therefore it never knew the definitions of whatever was declared in the header files.</p>\n\n<p>For me, all the object files were created in the same folder as the interface file where I was compiling everything, and I added this:</p>\n\n<pre><code>g++ -shared Class.o mymodule_wrap.o -o mymodule.so\n</code></pre>\n\n<p>to my compile shell script. Before I was using the extconf makefile creating script, and I am not sure where it searched for the object files.</p>\n"}], "owner": {"reputation": 29, "user_id": 4938261, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c89365a47ef8a9407e7b6dfa1ec78719?s=128&d=identicon&r=PG&f=1", "display_name": "satj", "link": "https://stackoverflow.com/users/4938261/satj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 839, "favorite_count": 0, "accepted_answer_id": 39122769, "answer_count": 1, "score": 0, "last_activity_date": 1472040090, "creation_date": 1471970414, "last_edit_date": 1472038028, "question_id": 39106587, "link": "https://stackoverflow.com/questions/39106587/swig-undefined-symbols", "title": "SWIG undefined symbols", "body": "<p>I am using SWIG to wrap C++ code in Ruby.</p>\n\n<p>I have eight classes defined in eight separate files in a specific location. I had two approaches to wrapping them in Ruby.</p>\n\n<p>In the first approach, I put all the classes in one file, placed that file in the same directory as the SWIG interface file and everything is okay. </p>\n\n<p>I am, however, requested to link to the original location of the files, and have my interface file in a different directory. When I compile, I compile all the files in their directory plus the wrapper code and there are no errors produced. However, I get undefined symbols. </p>\n\n<p>A part of my compile shell script is:</p>\n\n<pre><code>g++ -std=c++11 -fPIC -c ../../dir1/dir2/Class.cpp\ng++ -std=c++11 -fPIC -c mymodule_wrap.cxx -I/usr/include/ruby-1.9.1 -I/usr/include/ruby-1.9.1/x86_64-linux\n</code></pre>\n\n<p>I compile all the other seven files in the same way as the \"File.cpp\" one. No compilation errors.</p>\n\n<p>Then, when I try the following</p>\n\n<pre><code>require 'mymodule'\nc = Mymodule::Class.new\n</code></pre>\n\n<p>I get an undefined symbol for the Class' constructor (I demangled the undefined symbol using c++filt), which is declared and defined. </p>\n\n<p>Is there something wrong in the way I compile? Or are there some problems when it comes to different locations of the header/source files and the SWIG interface file? Because this is in no way different from when I have all the classes in one file, except for the location.</p>\n\n<p>EDIT:\nIf i move the definitions of the declared functions in the header files I get no undefined symbols. That means that it actually doesn't even reach the definitions in the cpp files. But why? When I had all classes unseparated I still kept the definitions in a cpp files and the declarations in a header file...</p>\n"}, {"tags": ["ruby", "url"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 4, "creation_date": 1471969203, "post_id": 39106228, "comment_id": 65559498, "body": "Main question is why on the Earth do you need to encode the dot?"}, {"owner": {"reputation": 461, "user_id": 2513815, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c21e7e60342efaedad4ed9c04447fcd1?s=128&d=identicon&r=PG", "display_name": "gipsh", "link": "https://stackoverflow.com/users/2513815/gipsh"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1471969373, "post_id": 39106228, "comment_id": 65559602, "body": "in rails routes the dot is a valid separator."}, {"owner": {"reputation": 17529, "user_id": 398606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9922e981f96ab7d809dfdc02c723fd41?s=128&d=identicon&r=PG", "display_name": "Sunil D.", "link": "https://stackoverflow.com/users/398606/sunil-d"}, "edited": false, "score": 0, "creation_date": 1471969525, "post_id": 39106228, "comment_id": 65559690, "body": "If those methods aren&#39;t encoding the period, then I think it&#39;s safe to assume it&#39;s not supposed to be encoded... and perhaps you can fix your problem w/the routes some other way. Maybe add an example of the problematic route to your question?"}, {"owner": {"reputation": 461, "user_id": 2513815, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c21e7e60342efaedad4ed9c04447fcd1?s=128&d=identicon&r=PG", "display_name": "gipsh", "link": "https://stackoverflow.com/users/2513815/gipsh"}, "edited": false, "score": 0, "creation_date": 1471969619, "post_id": 39106228, "comment_id": 65559750, "body": "im able to solve it in many different ways actually i alredy did, it is only i wanted to understand the reason"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1471969650, "post_id": 39106228, "comment_id": 65559777, "body": "\u201cin rails routes the dot is a valid separator\u201d\u2014not in the query string."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1471969996, "post_id": 39106228, "comment_id": 65559963, "body": "If a dot in a URL is causing routing problems then you have a problem with your route constraints, not a URL encoding problem. And if that&#39;s the case then a little bit of <a href=\"https://www.google.ca/search?client=safari&amp;rls=en&amp;q=rails+routes+dot+in+id&amp;ie=UTF-8&amp;oe=UTF-8&amp;gfe_rd=cr&amp;ei=Onq8V_LgIsne8Af4x5ngDQ\" rel=\"nofollow noreferrer\">googling</a> will point out lots of solutions."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 5, "creation_date": 1471973302, "post_id": 39106228, "comment_id": 65561931, "body": "If it&#39;s a route like <code>&#47;send&#47;:email</code> then you&#39;ll have problems, but <code>send?email=xxx</code> will not have the same issues. Not everything is best expressed as a URI path component."}, {"owner": {"reputation": 461, "user_id": 2513815, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c21e7e60342efaedad4ed9c04447fcd1?s=128&d=identicon&r=PG", "display_name": "gipsh", "link": "https://stackoverflow.com/users/2513815/gipsh"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1471974672, "post_id": 39106228, "comment_id": 65562654, "body": "@tadman thanks. i agree."}], "answers": [{"tags": [], "owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "is_accepted": true, "score": 2, "last_activity_date": 1471977271, "creation_date": 1471977271, "answer_id": 39108415, "question_id": 39106228, "link": "https://stackoverflow.com/questions/39106228/is-there-a-function-to-url-encode-dot-in-ruby/39108415#39108415", "title": "Is there a function to url encode dot (&#39;.&#39;) in ruby", "body": "<p>You actually don't need to encode the dot. After the <code>?</code> in the url, <code>/</code> and <code>.</code> don't have any specific meaning.</p>\n"}, {"tags": [], "owner": {"reputation": 103, "user_id": 4062992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/86eca5247806361b24c39dc6285a4b5d?s=128&d=identicon&r=PG", "display_name": "norydev", "link": "https://stackoverflow.com/users/4062992/norydev"}, "is_accepted": false, "score": 3, "last_activity_date": 1489390808, "creation_date": 1489390808, "answer_id": 42758534, "question_id": 39106228, "link": "https://stackoverflow.com/questions/39106228/is-there-a-function-to-url-encode-dot-in-ruby/42758534#42758534", "title": "Is there a function to url encode dot (&#39;.&#39;) in ruby", "body": "<p>As tadman pointed <a href=\"https://stackoverflow.com/questions/39106228/is-there-a-function-to-url-encode-dot-in-ruby#comment65561931_39106228\">here</a>, you will have a problem with dots if the route is something like <code>get \"users/:email\"</code>. Because rails considers dots as separators. As pointed in <a href=\"http://guides.rubyonrails.org/v5.0.2/routing.html#dynamic-segments\" rel=\"nofollow noreferrer\">the docs</a>, you will then need to add a constraint like:</p>\n\n<pre><code>get \"users/:email\", to: \"users#show\", constraints: { email: /.*/ }\n</code></pre>\n\n<p>And with that you don't need to escape dots in the url.</p>\n"}, {"tags": [], "owner": {"reputation": 40105, "user_id": 28278, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/1cc9e6fee8abccebed1d4f7a88f0b9cb?s=128&d=identicon&r=PG", "display_name": "CodingWithSpike", "link": "https://stackoverflow.com/users/28278/codingwithspike"}, "is_accepted": false, "score": 1, "last_activity_date": 1568144416, "creation_date": 1568144416, "answer_id": 57877260, "question_id": 39106228, "link": "https://stackoverflow.com/questions/39106228/is-there-a-function-to-url-encode-dot-in-ruby/57877260#57877260", "title": "Is there a function to url encode dot (&#39;.&#39;) in ruby", "body": "<p>You can escape characters that wouldn't normally be escaped by providing a regex as the 2nd argument to <code>URI.escape</code></p>\n\n<pre><code>URI.escape('a@b.c', /\\./)\n =&gt; \"a@b%2Ec\"\n</code></pre>\n\n<p>(keep in mind that providing your own regex overrides the default, so now nothing but <code>.</code> will be encoded)</p>\n"}], "owner": {"reputation": 461, "user_id": 2513815, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c21e7e60342efaedad4ed9c04447fcd1?s=128&d=identicon&r=PG", "display_name": "gipsh", "link": "https://stackoverflow.com/users/2513815/gipsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1020, "favorite_count": 0, "accepted_answer_id": 39108415, "answer_count": 3, "score": 2, "last_activity_date": 1568144416, "creation_date": 1471969079, "question_id": 39106228, "link": "https://stackoverflow.com/questions/39106228/is-there-a-function-to-url-encode-dot-in-ruby", "title": "Is there a function to url encode dot (&#39;.&#39;) in ruby", "body": "<p>I need to send an email as a parameter in the query string. </p>\n\n<p>Non of the standard functions i have tried is able to encode the '.' (dot). </p>\n\n<pre><code>CGI.escape('my.fake@email.com')\n =&gt; \"my.fake%40email.com\" \n\nURI.escape('my.fake@email.com')\n =&gt; \"my.fake@email.com\" \n\nURI.encode('my.fake@email.com')\n =&gt; \"my.fake@email.com\" \n\nERB::Util.url_encode('my.fake@email.com')\n =&gt; \"my.fake%40email.com\" \n</code></pre>\n\n<p>I can easily do a function myself, but i just wanted to know if is there already any method. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ancestry"], "owner": {"reputation": 125, "user_id": 2292060, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/RLQ5N.png?s=128&g=1", "display_name": "Haytham.Breaka", "link": "https://stackoverflow.com/users/2292060/haytham-breaka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1471965376, "creation_date": 1471965376, "question_id": 39104993, "link": "https://stackoverflow.com/questions/39104993/direct-parent-change-callback-using-ancestry-gem-in-ruby", "title": "Direct parent change callback using ancestry gem in ruby", "body": "<p>I am trying to check if the direct parent of any record changed to do some stuff. I have searched a lot but I didn't find <code>node.parent_changed?</code>. I only found <code>node.ancestry_changed?</code>. But the problem with that is, it returns any node that has any changes in the path of ancestors. </p>\n\n<p>My question is, how can I check only on direct parent changes in my <code>before_save</code> callback?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 1, "creation_date": 1471964694, "post_id": 39104568, "comment_id": 65556339, "body": "The linkage is really just the http form parameters. You have to format the form id and name in such a way that they get picked up by the controller correctly. Try looking at your log file and see what params are being passed in...that will show you what names they are using."}, {"owner": {"reputation": 13, "user_id": 6528568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9da00cafcda5f62e4d9dc5017ace58d9?s=128&d=identicon&r=PG&f=1", "display_name": "btezergil", "link": "https://stackoverflow.com/users/6528568/btezergil"}, "reply_to_user": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1471986434, "post_id": 39104568, "comment_id": 65568786, "body": "I can see that the form gets the parameter correctly and it also updates the instance variable correctly. However, the instantiate action in the controller can&#39;t get access to that name somehow. POST action is correctly done with the name, but the name can&#39;t be used and the @site_name instance the controller tries to use is nil, which suggests that it was never updated/initialized."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6528568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9da00cafcda5f62e4d9dc5017ace58d9?s=128&d=identicon&r=PG&f=1", "display_name": "btezergil", "link": "https://stackoverflow.com/users/6528568/btezergil"}, "edited": false, "score": 0, "creation_date": 1471986116, "post_id": 39104726, "comment_id": 65568629, "body": "As I said I am new to the web development, I actually don&#39;t know the real difference/distinction between GET/POST etc. and when to/ not to use them. The form also tried to use POST and I&#39;ve added a post action to routes.rb for that. I&#39;ll try what you have suggested. Thanks!"}], "tags": [], "owner": {"reputation": 86, "user_id": 5162152, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Nt0CN.jpg?s=128&g=1", "display_name": "Robert", "link": "https://stackoverflow.com/users/5162152/robert"}, "is_accepted": true, "score": 0, "last_activity_date": 1471964692, "creation_date": 1471964692, "answer_id": 39104726, "question_id": 39104568, "link": "https://stackoverflow.com/questions/39104568/ruby-on-rails-how-to-pass-an-instance-variable-from-a-controller-to-another-con/39104726#39104726", "title": "Ruby on Rails: how to pass an instance variable from a controller to another controller via a form", "body": "<p>Any reason why you are using a GET to post a form? Change it to a post and grab the name via params[:name] in the action the post is being routed to. You instantiate the instance variable initially and you are actually posting to your method instantiate.</p>\n"}], "owner": {"reputation": 13, "user_id": 6528568, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9da00cafcda5f62e4d9dc5017ace58d9?s=128&d=identicon&r=PG&f=1", "display_name": "btezergil", "link": "https://stackoverflow.com/users/6528568/btezergil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 674, "favorite_count": 0, "accepted_answer_id": 39104726, "answer_count": 1, "score": 1, "last_activity_date": 1471964692, "creation_date": 1471964246, "question_id": 39104568, "link": "https://stackoverflow.com/questions/39104568/ruby-on-rails-how-to-pass-an-instance-variable-from-a-controller-to-another-con", "title": "Ruby on Rails: how to pass an instance variable from a controller to another controller via a form", "body": "<p>I am new to rails and web development, so please bear with me.\nI have been trying to build an automated deployment system of sorts for a site.  I have a form in my home page which gets a name field for a site_name model, and I am trying to pass this name (and also site_name instance) to another controller which makes the deployment. However, I couldn't manage to pass the name correctly. How can I pass an instance variable from a from to another controller?</p>\n\n<p>These are the files I use FYI</p>\n\n<p>home.html.erb</p>\n\n<pre><code>&lt;div class=\"center jumbotron\"&gt;\n  &lt;h1&gt;Welcome to the Sample App&lt;/h1&gt;\n\n  &lt;div class=\"input-group\"&gt;\n    &lt;%= form_for @site_name, url: {action: \"instantiate\", controller: \"script_execute\"}, html: {method: \"get\"} do |f| %&gt;\n\n    &lt;%= f.label :name %&gt;\n    &lt;%= f.text_field :name, class: 'form-control' %&gt;\n\n    &lt;%= f.submit \"Create my account\", class: \"btn btn-primary\" %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n  &lt;%= link_to \"Sign up now!\", instantiate_path, class: \"btn btn-lg btn-primary\" %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>script_execute_controller.rb (which contains instantiate action)</p>\n\n<pre><code>class ScriptExecuteController &lt; ApplicationController\n\n  def instantiate\n    site_name = @site_name.name\n    @hostname = 'myhostname'\n    @username = 'myusername'\n    @password = 'mypassword'\n    @cmd = \"yes #{site_name} | ./denemescr.sh\"\n    begin\n      ssh = Net::SSH.start(@hostname, @username, :password =&gt; @password)\n      res = ssh.exec!(@cmd)\n      ssh.close\n      puts res\n    end\n    redirect_to root_url\n  end\nend\n</code></pre>\n\n<p>static_pages_controller.rb (controller for the home page)</p>\n\n<pre><code>class StaticPagesController &lt; ApplicationController\n  def home\n    @site_name = SiteName.new\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 1, "creation_date": 1471964032, "post_id": 39104345, "comment_id": 65555878, "body": "can you post the <code>full_title</code> method? it is hard to figure out what is wrong if we are just seeing the tests."}, {"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1471993818, "post_id": 39104345, "comment_id": 65571298, "body": "I mean show us the <code>full_title</code> method you wrote in the <code>ApplicationHelper</code>"}, {"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1471993921, "post_id": 39104345, "comment_id": 65571322, "body": "Also, it would be helpful to show one of the static pages (the help, about, or contact page)"}, {"owner": {"reputation": 45, "user_id": 5577154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3pCAH.jpg?s=128&g=1", "display_name": "jdm79", "link": "https://stackoverflow.com/users/5577154/jdm79"}, "reply_to_user": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1471994392, "post_id": 39104345, "comment_id": 65571445, "body": "Cheers. I&#39;ve edited above, added ApplicationHelper module."}, {"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1471995619, "post_id": 39104345, "comment_id": 65571756, "body": "i can&#39;t find anything on your code so far, the only difference between yours and mine is i used explicit return in the <code>full_title</code> method."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 5577154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3pCAH.jpg?s=128&g=1", "display_name": "jdm79", "link": "https://stackoverflow.com/users/5577154/jdm79"}, "edited": false, "score": 0, "creation_date": 1471996271, "post_id": 39112346, "comment_id": 65571903, "body": "thanks, was going to ask for that. i&#39;m AFK for the night (London time) but will test this out in the morning. much appreciated, David"}, {"owner": {"reputation": 45, "user_id": 5577154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3pCAH.jpg?s=128&g=1", "display_name": "jdm79", "link": "https://stackoverflow.com/users/5577154/jdm79"}, "edited": false, "score": 1, "creation_date": 1472035200, "post_id": 39112346, "comment_id": 65587678, "body": "all working fine now - using your code did the job. upvoted (but not showing as I&#39;m still unworthy)"}], "tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": false, "score": 1, "last_activity_date": 1471995989, "creation_date": 1471995989, "answer_id": 39112346, "question_id": 39104345, "link": "https://stackoverflow.com/questions/39104345/hartls-railstutorial-org-chapter-5-exercise-2/39112346#39112346", "title": "Hartl&#39;s railstutorial.org Chapter 5, exercise 2", "body": "<p>Here is my <code>full_title</code> method. </p>\n\n<pre><code>module ApplicationHelper\n\n  def full_title(page_title = \"\")\n    base_title = \"Ruby on Rails Tutorial Sample App\"\n\n    line = page_title.empty? ? \"\" : \" | \"\n\n    return \"#{page_title}#{line}#{base_title}\"\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 5577154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3pCAH.jpg?s=128&g=1", "display_name": "jdm79", "link": "https://stackoverflow.com/users/5577154/jdm79"}, "edited": false, "score": 0, "creation_date": 1472035048, "post_id": 39113562, "comment_id": 65587564, "body": "&quot;Help | Ruby on Rails Tutorial Sample App&quot; is coming up in the title bar - all good now. the tutorial&#39;s getting interesting now!"}], "tags": [], "owner": {"reputation": 46, "user_id": 1281814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06a53390517a6932cce4165cfc936fab?s=128&d=identicon&r=PG", "display_name": "lowphive", "link": "https://stackoverflow.com/users/1281814/lowphive"}, "is_accepted": true, "score": 1, "last_activity_date": 1472006372, "creation_date": 1472006372, "answer_id": 39113562, "question_id": 39104345, "link": "https://stackoverflow.com/questions/39104345/hartls-railstutorial-org-chapter-5-exercise-2/39113562#39113562", "title": "Hartl&#39;s railstutorial.org Chapter 5, exercise 2", "body": "<p>I'm working on the same book, and am at the same chapter as you! I see the following:</p>\n\n<pre><code>--- expected\n+++ actual\n@@ -1 +1 @@\n-\"Help | Ruby on Rails Tutorial Sample App\"\n+\"Ruby on Rails Tutorial Sample App\"\n</code></pre>\n\n<p>Rearranged:</p>\n\n<pre><code>--- expected\n-\"Help | Ruby on Rails Tutorial Sample App\"\n\n+++ actual\n+\"Ruby on Rails Tutorial Sample App\"\n</code></pre>\n\n<p>The test expected \"Help | Ruby on Rails Tutorial Sample App\", but actually got \"Ruby on Rails Tutorial Sample App\".</p>\n\n<p>If you look at the help page in a browser, what shows up in the title bar? The help.html.erb looks right to me. </p>\n\n<p>I also have the following for my app/helpers/application_helper.rb, is a little different from yours:</p>\n\n<pre><code>module ApplicationHelper\n  # Returns the full title on a per-page basis\n  def full_title(page_title = '')\n    base_title = \"Ruby on Rails Tutorial Sample App\"\n    if page_title.empty?\n      base_title\n    else\n      page_title + \" | \" + base_title\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 5577154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3pCAH.jpg?s=128&g=1", "display_name": "jdm79", "link": "https://stackoverflow.com/users/5577154/jdm79"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 486, "favorite_count": 0, "accepted_answer_id": 39113562, "answer_count": 2, "score": 1, "last_activity_date": 1472006372, "creation_date": 1471963605, "last_edit_date": 1471994352, "question_id": 39104345, "link": "https://stackoverflow.com/questions/39104345/hartls-railstutorial-org-chapter-5-exercise-2", "title": "Hartl&#39;s railstutorial.org Chapter 5, exercise 2", "body": "<p>I'm ploughing through Michael Hartl's Ruby on Rails Tutorial (<a href=\"https://www.railstutorial.org/book/filling_in_the_layout\" rel=\"nofollow\">https://www.railstutorial.org/book/filling_in_the_layout</a>) right now and found an issue I can't google fix.</p>\n\n<p>Upon creating this file: <code>test/helpers/application_helper_test.rb</code>, and running:</p>\n\n<pre><code>'rails test'\n</code></pre>\n\n<p>I'm getting this failure:</p>\n\n<pre><code>AIL[\"test_full_title_helper\", ApplicationHelperTest, 0.7209667120041559]\n test_full_title_helper#ApplicationHelperTest (0.72s)\n        --- expected\n        +++ actual\n        @@ -1 +1 @@\n        -\"Help | Ruby on Rails Tutorial Sample App\"\n        +\"Ruby on Rails Tutorial Sample App\"\n        test/helpers/application_helper_test.rb:6:in `block in    &lt;class:ApplicationHelperTest&gt;'\n</code></pre>\n\n<p>Having browsed similar questions, albeit questions over a year old (and using older Rails code), I'm none the wiser as to how to rectify this failure.</p>\n\n<p>I am clearly a Ruby noobie, so please be gentle :) any help would be greatly appreciated</p>\n\n<p><strong>static_pages_controller_test.rb:</strong></p>\n\n<pre><code>require 'test_helper'\n\nclass StaticPagesControllerTest &lt; ActionDispatch::IntegrationTest\n\n  test \"should get home\" do\n    get root_path\n    assert_response :success\n    assert_select \"title\", \"Ruby on Rails Tutorial Sample App\"\n  end\n\n  test \"should get help\" do\n    get help_path\n    assert_response :success\n    assert_select \"title\", \"Help | Ruby on Rails Tutorial Sample App\"\n  end\n\n  test \"should get about\" do\n    get about_path\n    assert_response :success\n    assert_select \"title\", \"About | Ruby on Rails Tutorial Sample App\"\n  end\n\n  test \"should get contact\" do\n    get contact_path\n    assert_response :success\n    assert_select \"title\", \"Contact | Ruby on Rails Tutorial Sample App\"\n  end\nend\n</code></pre>\n\n<p>and the offending file:</p>\n\n<pre><code>require 'test_helper'\n\nclass ApplicationHelperTest &lt; ActionView::TestCase\n  test \"full title helper\" do\n    assert_equal full_title,         \"Ruby on Rails Tutorial Sample App\"\n    assert_equal full_title(\"Help\"), \"Help | Ruby on Rails Tutorial Sample App\"\n  end\nend\n</code></pre>\n\n<p>and the site_layout_test.rb</p>\n\n<pre><code>require 'test_helper'\n\nclass SiteLayoutTest &lt; ActionDispatch::IntegrationTest\n\n  test \"layout links\" do\n    get root_path\n    assert_template 'static_pages/home'\n    assert_select \"a[href=?]\", root_path, count: 2\n    assert_select \"a[href=?]\", help_path\n    assert_select \"a[href=?]\", about_path\n    assert_select \"a[href=?]\", contact_path\n    get contact_path\n    assert_select \"title\", full_title(\"Contact\")\n  end\nend\n</code></pre>\n\n<p>and the code for the application_helper:</p>\n\n<pre><code>module ApplicationHelper\n  # Returns the full title on a per-page basis.\n    def full_title(page_title = '')\n      base_title = \"Ruby on Rails Tutorial Sample App\"\n      if page_title.empty?\n        base_title\n      else\n        page_title + \" | \" + base_title\n      end\n    end\n  end\n</code></pre>\n\n<p>help.html.erb static_page:</p>\n\n<pre><code>&lt;% provide(:title, \"Help\") %&gt;\n&lt;h1&gt;Help&lt;/h1&gt;\n&lt;p&gt;\n  Get help on the Ruby on Rails Tutorial at the\n  &lt;a href=\"http://www.railstutorial.org/help\"&gt;Rails Tutorial help section&lt;/a&gt;.\n  To get help on this sample app, see the\n  &lt;a href=\"http://www.railstutorial.org/book\"&gt;&lt;em&gt;Ruby on Rails  Tutorial&lt;/em&gt;\n  book&lt;/a&gt;.\n&lt;/p&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 219, "user_id": 4325180, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EdrS-4y3wKg/AAAAAAAAAAI/AAAAAAAABvM/b0A5f7hhe_s/photo.jpg?sz=128", "display_name": "PoloniculMov", "link": "https://stackoverflow.com/users/4325180/poloniculmov"}, "edited": false, "score": 2, "creation_date": 1471963214, "post_id": 39104115, "comment_id": 65555240, "body": "Do you get an error or what? What&#39;s your actual problem?"}, {"owner": {"reputation": 41, "user_id": 6672708, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/g0T9d.png?s=128&g=1", "display_name": "Martin Rails", "link": "https://stackoverflow.com/users/6672708/martin-rails"}, "reply_to_user": {"reputation": 219, "user_id": 4325180, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EdrS-4y3wKg/AAAAAAAAAAI/AAAAAAAABvM/b0A5f7hhe_s/photo.jpg?sz=128", "display_name": "PoloniculMov", "link": "https://stackoverflow.com/users/4325180/poloniculmov"}, "edited": false, "score": 0, "creation_date": 1471963301, "post_id": 39104115, "comment_id": 65555309, "body": "Oh yeah my bad, actually, when i click on the link , it&#39;s generating a new game for the list, and not just adding a game to the user. That&quot;s why i think i got a problem of path or route ;) the &quot;favorite&quot; action is not happening."}, {"owner": {"reputation": 219, "user_id": 4325180, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EdrS-4y3wKg/AAAAAAAAAAI/AAAAAAAABvM/b0A5f7hhe_s/photo.jpg?sz=128", "display_name": "PoloniculMov", "link": "https://stackoverflow.com/users/4325180/poloniculmov"}, "edited": false, "score": 0, "creation_date": 1471963495, "post_id": 39104115, "comment_id": 65555440, "body": "Can you show me what <code>rake routes</code> outputs? My guess is that POST to <code>games_path</code> goes somewhere else"}, {"owner": {"reputation": 41, "user_id": 6672708, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/g0T9d.png?s=128&g=1", "display_name": "Martin Rails", "link": "https://stackoverflow.com/users/6672708/martin-rails"}, "reply_to_user": {"reputation": 219, "user_id": 4325180, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EdrS-4y3wKg/AAAAAAAAAAI/AAAAAAAABvM/b0A5f7hhe_s/photo.jpg?sz=128", "display_name": "PoloniculMov", "link": "https://stackoverflow.com/users/4325180/poloniculmov"}, "edited": false, "score": 0, "creation_date": 1471963602, "post_id": 39104115, "comment_id": 65555524, "body": "Yes i got 2 &quot;POST&quot; &gt;  POST   /games(.:format)                games#create and the other one    POST   /games/:id(.:format)            games#favorite"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 6672708, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/g0T9d.png?s=128&g=1", "display_name": "Martin Rails", "link": "https://stackoverflow.com/users/6672708/martin-rails"}, "edited": false, "score": 0, "creation_date": 1471964227, "post_id": 39104488, "comment_id": 65556020, "body": "Thanks it&#39;s seems to work , my &quot;notice&quot; is not taking the name of the game (renders  &#39;You favorited #{@game.name}&#39;  I hope he&#39;s taking an ID, but anyway, thank you very much ;)  , great answer"}, {"owner": {"reputation": 219, "user_id": 4325180, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EdrS-4y3wKg/AAAAAAAAAAI/AAAAAAAABvM/b0A5f7hhe_s/photo.jpg?sz=128", "display_name": "PoloniculMov", "link": "https://stackoverflow.com/users/4325180/poloniculmov"}, "reply_to_user": {"reputation": 41, "user_id": 6672708, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/g0T9d.png?s=128&g=1", "display_name": "Martin Rails", "link": "https://stackoverflow.com/users/6672708/martin-rails"}, "edited": false, "score": 0, "creation_date": 1471964435, "post_id": 39104488, "comment_id": 65556170, "body": "You have to use <code>&quot; </code> Strings for interpolation to work. Change it to <code>flash[:notice] = &quot;You favorited #{@game.name}&quot;</code>"}, {"owner": {"reputation": 41, "user_id": 6672708, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/g0T9d.png?s=128&g=1", "display_name": "Martin Rails", "link": "https://stackoverflow.com/users/6672708/martin-rails"}, "edited": false, "score": 0, "creation_date": 1471965477, "post_id": 39104488, "comment_id": 65556899, "body": "Thanks PoloniculMov , I will try this ;) . I also added the uniqueness of the relationship between games and users  Thanks again"}], "tags": [], "owner": {"reputation": 219, "user_id": 4325180, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-EdrS-4y3wKg/AAAAAAAAAAI/AAAAAAAABvM/b0A5f7hhe_s/photo.jpg?sz=128", "display_name": "PoloniculMov", "link": "https://stackoverflow.com/users/4325180/poloniculmov"}, "is_accepted": true, "score": 1, "last_activity_date": 1471963992, "creation_date": 1471963992, "answer_id": 39104488, "question_id": 39104115, "link": "https://stackoverflow.com/questions/39104115/rails-add-games-association-to-users/39104488#39104488", "title": "Rails - Add games Association to users", "body": "<p>You're calling <code>games_path</code> in your <code>link_to</code> method, but that will give you <code>games#create</code> instead of <code>favorite</code>. You need to tell Rails what name you'd like to use, with a named route: <code>post \"games/:id/\" =&gt; 'games#favorite', as: :favorite_game</code> and use <code>favorite_game_path(game)</code> in your view.</p>\n"}], "owner": {"reputation": 41, "user_id": 6672708, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/g0T9d.png?s=128&g=1", "display_name": "Martin Rails", "link": "https://stackoverflow.com/users/6672708/martin-rails"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 39104488, "answer_count": 1, "score": 0, "last_activity_date": 1478533386, "creation_date": 1471962940, "last_edit_date": 1471964463, "question_id": 39104115, "link": "https://stackoverflow.com/questions/39104115/rails-add-games-association-to-users", "title": "Rails - Add games Association to users", "body": "<p>I'm building an association between Users and Games, Users can favorite or associate Games to their profile. But I got an issue with the routes or the link (I guess, maybe its something else).</p>\n\n<p>I have a join table between Users and Games :</p>\n\n<blockquote>\n  <p>Game_User with games ID and User ID</p>\n</blockquote>\n\n<p>The association is working fine in the console when I do this. </p>\n\n<pre><code>@user = User.find(session[:user_id])\n@game = Game.find(params[:id])\n@user.games &lt;&lt; @game\n</code></pre>\n\n<p><strong>games_controller.rb:</strong></p>\n\n<pre><code>def favorite\n  game = Game.find(params[:id])\n  current_user.games &lt;&lt; game\n  flash[:notice] = 'You favorited #{@game.name}'\n  redirect_to games_url\nend\n</code></pre>\n\n<p><strong>routes.rb</strong> </p>\n\n<pre><code>get \"games\" =&gt; \"games#index\"\npost \"games/:id\" =&gt; 'games#favorite'\n</code></pre>\n\n<p>And I would like to do the same with my link.</p>\n\n<p>Here is the list of the games, and for each a link to favorite them : </p>\n\n<pre><code>&lt;% if current_user %&gt;\n    &lt;% @games.each do |game| %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;%= game.name %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= game.plateform %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= game.typegame %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Show', game %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Edit', edit_game_path(game) %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Destroy', game, method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n        &lt;td&gt;  &lt;%= link_to \"favorite\", games_path, type: \"favorite\", method: :post %&gt; &lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>My problem is : Creating the association between user and game(s) , when i click on the link Favorite, it's generating a new Game (def create game.new ... ) </p>\n"}, {"tags": ["ruby", "logstash"], "comments": [{"owner": {"reputation": 33, "user_id": 6577900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1cc85a945d7b6c9d79a0dcf725bdbd25?s=128&d=identicon&r=PG&f=1", "display_name": "crisx", "link": "https://stackoverflow.com/users/6577900/crisx"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1471959291, "post_id": 39102693, "comment_id": 65552013, "body": "i have a field in logstash with this text"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 1, "creation_date": 1471959299, "post_id": 39102693, "comment_id": 65552019, "body": "And if this is a string, then <code>str = str.sub(&#39;T&#39;, &#39;&#39;)</code>?"}, {"owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1471959388, "post_id": 39102693, "comment_id": 65552100, "body": "Just to add to understanding, the <code>g</code> in <code>gsub</code> means &quot;global,&quot; so if you used <code>gsub</code>, you&#39;d be replacing both &quot;T&quot; characters in the string. <code>sub</code> is the way to go."}, {"owner": {"reputation": 33, "user_id": 6577900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1cc85a945d7b6c9d79a0dcf725bdbd25?s=128&d=identicon&r=PG&f=1", "display_name": "crisx", "link": "https://stackoverflow.com/users/6577900/crisx"}, "edited": false, "score": 0, "creation_date": 1471959457, "post_id": 39102693, "comment_id": 65552148, "body": "ok i can use ruby like this ruby  \t\t{ \t\tcode =&gt; &quot;event[&#39;logTime&#39;] = event[&#39;logTime&#39;].chop&quot; \t\t}"}, {"owner": {"reputation": 33, "user_id": 6577900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1cc85a945d7b6c9d79a0dcf725bdbd25?s=128&d=identicon&r=PG&f=1", "display_name": "crisx", "link": "https://stackoverflow.com/users/6577900/crisx"}, "edited": false, "score": 0, "creation_date": 1471959602, "post_id": 39102693, "comment_id": 65552272, "body": "But this dont work ruby  \t\t{ \t\tcode =&gt; &quot;event[&#39;message&#39;] = event[&#39;message&#39;].sub(&#39;T&#39;, &#39;&#39;)&quot; \t\t}"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1471959866, "post_id": 39102693, "comment_id": 65552476, "body": "Just try: ` { code =&gt; event[&#39;message&#39;].sub(&#39;T&#39;, &#39;&#39;) }`"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1471967272, "post_id": 39102807, "comment_id": 65558184, "body": "Semantically better would be to use <code>str.delete!(&#39;T&#39;)</code>."}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1471968647, "post_id": 39102807, "comment_id": 65559142, "body": "@mudasobwa: No. That will delete all occurrences of &#39;T&#39;. @crisx just wants to delete the first occurence. <code>delete!</code> is only valid for gsub in this case."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1471968804, "post_id": 39102807, "comment_id": 65559251, "body": "Oh, indeed, sorry."}], "tags": [], "owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "is_accepted": false, "score": 1, "last_activity_date": 1471959434, "creation_date": 1471959434, "answer_id": 39102807, "question_id": 39102693, "link": "https://stackoverflow.com/questions/39102693/how-remove-first-match-in-gsub/39102807#39102807", "title": "How remove first match in gsub?", "body": "<p>This will <a href=\"http://apidock.com/ruby/String/sub\" rel=\"nofollow\">substitute</a> the first 'T' in string with anything you want:</p>\n\n<pre><code>str = str.sub('T', '')\n</code></pre>\n\n<p>If you wish to substitute all occurrence of any substring or regex, use <a href=\"https://ruby-doc.org/core-2.2.0/String.html#method-i-gsub\" rel=\"nofollow\"><code>gsub</code></a></p>\n"}], "owner": {"reputation": 33, "user_id": 6577900, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1cc85a945d7b6c9d79a0dcf725bdbd25?s=128&d=identicon&r=PG&f=1", "display_name": "crisx", "link": "https://stackoverflow.com/users/6577900/crisx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 789, "favorite_count": 0, "closed_date": 1471959576, "answer_count": 1, "score": 0, "last_activity_date": 1471971470, "creation_date": 1471959141, "last_edit_date": 1471971470, "question_id": 39102693, "link": "https://stackoverflow.com/questions/39102693/how-remove-first-match-in-gsub", "closed_reason": "Duplicate", "title": "How remove first match in gsub?", "body": "<p>I have this </p>\n\n<pre><code>2016-05-20T13:36:29.835, CTF3D57C\n</code></pre>\n\n<p>and I want this</p>\n\n<pre><code>2016-05-2013:36:29.835, CTF3D57C\n</code></pre>\n\n<p>I just want to remove the first <code>T</code> character. How do I do this?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "json", "ruby", "netldap"], "comments": [{"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1471958788, "post_id": 39102380, "comment_id": 65551605, "body": "it looks like an array, you can just do <code>entry.cn[0]</code> to access it."}, {"owner": {"reputation": 3, "user_id": 5935858, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-L2RBQ-NPj6s/AAAAAAAAAAI/AAAAAAAAAcc/qVCD47S5NoQ/photo.jpg?sz=128", "display_name": "Bruno Kinoshita", "link": "https://stackoverflow.com/users/5935858/bruno-kinoshita"}, "reply_to_user": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1471969919, "post_id": 39102380, "comment_id": 65559922, "body": "@davidhu2000 It works. Thank you!!"}], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 6748183, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-APVHRSZJmNQ/AAAAAAAAAAI/AAAAAAAAAGI/D9Mj_hhPDCM/photo.jpg?sz=128", "display_name": "Bassem Shaker", "link": "https://stackoverflow.com/users/6748183/bassem-shaker"}, "is_accepted": true, "score": 2, "last_activity_date": 1471972326, "last_edit_date": 1471972326, "creation_date": 1471959235, "answer_id": 39102733, "question_id": 39102380, "link": "https://stackoverflow.com/questions/39102380/getting-value-formatted-as-example/39102733#39102733", "title": "Getting value formatted as [&quot;example&quot;]", "body": "<p><code>[\"example\"]</code> means that you've got an array with one string. </p>\n\n<p>To get the first element of an array in Rails you can call:</p>\n\n<pre><code>[\"example\"].first\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5935858, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-L2RBQ-NPj6s/AAAAAAAAAAI/AAAAAAAAAcc/qVCD47S5NoQ/photo.jpg?sz=128", "display_name": "Bruno Kinoshita", "link": "https://stackoverflow.com/users/5935858/bruno-kinoshita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 39102733, "answer_count": 1, "score": 0, "last_activity_date": 1471972326, "creation_date": 1471958290, "last_edit_date": 1471972282, "question_id": 39102380, "link": "https://stackoverflow.com/questions/39102380/getting-value-formatted-as-example", "title": "Getting value formatted as [&quot;example&quot;]", "body": "<p>I'm working with NET-LDAP API using Ruby on Rails:</p>\n\n<pre><code>@ldap.search( :base =&gt; @treebase, :filter =&gt; @filter ) do |entry|\n  entry.cn\n</code></pre>\n\n<p>When I get the <code>entry.cn</code> value it comes formatted as <code>[\"example\"]</code>\nHow do I get this value without the characters <code>[\" \"]</code>?</p>\n"}, {"tags": ["ruby", "regex", "hash"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 4, "creation_date": 1471958032, "post_id": 39102221, "comment_id": 65551025, "body": "Both hash versions are identical in Ruby. Why to you want to change this? What do you try to achieve? About the array in the string, it is save to assume that the <code>data</code> string always includes valid JSON?"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1471958044, "post_id": 39102221, "comment_id": 65551037, "body": "<code>hash[:data] = eval(hash[:data])</code> ? However, eval is not a safe operation and can lead to many malicious attacks."}, {"owner": {"reputation": 609, "user_id": 493356, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eCSAB.jpg?s=128&g=1", "display_name": "Sudhir Vishwakarma", "link": "https://stackoverflow.com/users/493356/sudhir-vishwakarma"}, "edited": false, "score": 0, "creation_date": 1471958544, "post_id": 39102221, "comment_id": 65551402, "body": "i want to deploy the value with the second format in a highchart column chart ."}, {"owner": {"reputation": 609, "user_id": 493356, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eCSAB.jpg?s=128&g=1", "display_name": "Sudhir Vishwakarma", "link": "https://stackoverflow.com/users/493356/sudhir-vishwakarma"}, "edited": false, "score": 0, "creation_date": 1471958565, "post_id": 39102221, "comment_id": 65551419, "body": "the series block requires the value in the second format"}, {"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1471959186, "post_id": 39102221, "comment_id": 65551930, "body": "@sudhirVishwakarma: In addition to my earlier <code>eval</code>, you need to parse it in json for highcharts: <code>hash = hash.to_json</code>"}, {"owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "edited": false, "score": 1, "creation_date": 1471959753, "post_id": 39102221, "comment_id": 65552386, "body": "Do you need JSON as output? Could you state so in the question?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1471965033, "post_id": 39102221, "comment_id": 65556587, "body": "@spickermann, I don&#39;t know if it was intentional, but the value of <code>:data</code> is a string in the first case and an array in the latter."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1471972540, "post_id": 39102221, "comment_id": 65561500, "body": "Welcome to Stack Overflow. Your question isn&#39;t asked well. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; including the linked pages. We&#39;d like to see what you tried; Did you search and not find anything? If so, where and why didn&#39;t the pages help? Did you write code? If so, we&#39;d like to see the minimum necessary to show what you tried. Without those things it looks like you want us to do your work. &quot;<a href=\"http://meta.stackoverflow.com/a/261593/128421\">How much research effort is expected of Stack Overflow users?</a>&quot; will help you understand the process too."}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 3, "last_activity_date": 1471960364, "creation_date": 1471960364, "answer_id": 39103146, "question_id": 39102221, "link": "https://stackoverflow.com/questions/39102221/how-do-i-convert-hash-symbols/39103146#39103146", "title": "How do I convert hash symbols", "body": "<p>It feels to me like you want to translate your Ruby array to JavaScript:</p>\n\n<pre><code>require 'json'\n\n# parse the string to get the included JSON\nhash = { :name =&gt; \"testname\", :data =&gt; \"[209.04, 110.97, 38.83, 234.18]\" }\nhash[:data] = JSON.parse(hash[:data])\n\n# hash look like this now\n# { :name =&gt; \"testname\" , :data =&gt; [209.04, 110.97, 38.83, 234.18] }\n\n# translate to json to use with highchart:\nhash.to_json\n#=&gt; { \"name\": \"testname\", \"data\": [209.04,110.97,38.83,234.18] }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": false, "score": 1, "last_activity_date": 1471960734, "creation_date": 1471960734, "answer_id": 39103295, "question_id": 39102221, "link": "https://stackoverflow.com/questions/39102221/how-do-i-convert-hash-symbols/39103295#39103295", "title": "How do I convert hash symbols", "body": "<p>When you say that you want to create something like </p>\n\n<pre><code>[209.04, 110.97, 38.83, 234.18]\n</code></pre>\n\n<p>you need first to decide, what data type you want the numbers to have. If you just write in Ruby <code>209.04</code>, the type is <code>Float</code>, but depending on what you are going to do with the data, you might consider to use a <code>BigDecimal</code> instead.</p>\n\n<p>Here is a solution for getting an array of floats:</p>\n\n<pre><code>myhash = {:name=&gt;\"testname\", :data=&gt;\"[209.04, 110.97, 38.83, 234.18]\"}\nmyhash[:data] = myhash[:data][1..-2].split(/,\\s*/).map(&amp;:to_f)\n</code></pre>\n\n<p>If you prefer BigDecimal instead, it would go like this:</p>\n\n<pre><code>require 'bigdecimal'\nmyhash = {:name=&gt;\"testname\", :data=&gt;\"[209.04, 110.97, 38.83, 234.18]\"}\nmyhash[:data] = myhash[:data][1..-2].split(/,\\s*/).map { |string| BigDecimal.new(string) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1471973482, "last_edit_date": 1471973482, "creation_date": 1471973182, "answer_id": 39107361, "question_id": 39102221, "link": "https://stackoverflow.com/questions/39102221/how-do-i-convert-hash-symbols/39107361#39107361", "title": "How do I convert hash symbols", "body": "<p>Your question isn't overly clear, and it looks like you don't understand Ruby's hashes and how they're displayed. Mediate on these:</p>\n\n<pre><code>hash = {a:1}\nhash # =&gt; {:a=&gt;1}\n</code></pre>\n\n<p><code>hash</code> has a symbol <code>:a</code> for its key. When inspected, Ruby displays hashes using <code>=&gt;</code> notation, so <code>{a:1}</code> is displayed as <code>{:a =&gt; 1}</code>. It's the same hash, just the second is the original way of displaying them that works for symbol and non-symbol keys:</p>\n\n<pre><code>hash = {a:1, 'b' =&gt; 2}\nhash # =&gt; {:a=&gt;1, \"b\"=&gt;2}\n</code></pre>\n\n<p>Moving on...</p>\n\n<p>Converting the <code>:data</code> value can be done many ways, but I'd do this:</p>\n\n<pre><code>hash = {name: \"testname\", data: \"[209.04, 110.97, 38.83, 234.18]\"}\nhash[:data] # =&gt; \"[209.04, 110.97, 38.83, 234.18]\"\n\nrequire 'json'\nJSON[hash[:data]] # =&gt; [209.04, 110.97, 38.83, 234.18]\n</code></pre>\n\n<p>The data looks like it's a JSON encoded array of floats, so treat it that way.</p>\n\n<p>Putting that all together:</p>\n\n<pre><code>hash[:data] = JSON[hash[:data]]\nhash # =&gt; {:name=&gt;\"testname\", :data=&gt;[209.04, 110.97, 38.83, 234.18]}\n</code></pre>\n\n<p>At this point <code>hash</code> is equivalent to:</p>\n\n<pre><code>{name: \"testname\", data: [209.04, 110.97, 38.83, 234.18]} # =&gt; {:name=&gt;\"testname\", :data=&gt;[209.04, 110.97, 38.83, 234.18]}\n</code></pre>\n"}], "owner": {"reputation": 609, "user_id": 493356, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eCSAB.jpg?s=128&g=1", "display_name": "Sudhir Vishwakarma", "link": "https://stackoverflow.com/users/493356/sudhir-vishwakarma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "closed_date": 1472016889, "answer_count": 3, "score": -1, "last_activity_date": 1471973482, "creation_date": 1471957908, "last_edit_date": 1471972404, "question_id": 39102221, "link": "https://stackoverflow.com/questions/39102221/how-do-i-convert-hash-symbols", "closed_reason": "Needs more focus", "title": "How do I convert hash symbols", "body": "<p>I have a hash:</p>\n\n<pre><code>{:name=&gt;\"testname\", :data=&gt;\"[209.04, 110.97, 38.83, 234.18]\"}\n</code></pre>\n\n<p>I want to convert this to:</p>\n\n<pre><code>{name: \"testname\", data: [209.04, 110.97, 38.83, 234.18]}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "shell", "rubygems", "ruby-overcommit"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 6733334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62407f2d66062d2eb2fd2a77cf54e60c?s=128&d=identicon&r=PG&f=1", "display_name": "\u5e06\u5208\u5927\u6a39", "link": "https://stackoverflow.com/users/6733334/%e5%b8%86%e5%88%88%e5%a4%a7%e6%a8%b9"}, "edited": false, "score": 0, "creation_date": 1472088897, "post_id": 39102118, "comment_id": 65615872, "body": "Thanks for the answer, Steven. Unfortunately the error message didn&#39;t change with that. I also tried and putting the script in .git-hook/bin/ and it didn&#39;t work. tried just placing it on root dir, which didn&#39;t work."}, {"owner": {"reputation": 3, "user_id": 6733334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62407f2d66062d2eb2fd2a77cf54e60c?s=128&d=identicon&r=PG&f=1", "display_name": "\u5e06\u5208\u5927\u6a39", "link": "https://stackoverflow.com/users/6733334/%e5%b8%86%e5%88%88%e5%a4%a7%e6%a8%b9"}, "edited": false, "score": 0, "creation_date": 1472104841, "post_id": 39102118, "comment_id": 65619842, "body": "I was not sure if I should have done it, but I asked in the repository&#39;s issue page and got the answer from the author. Your answer was (sort of) exactly the problem. Apparently, it is necessary to put the script in .git-hooks directory and define so in .overcommit.yml as so: <code>required_executable: &#39;.&#47;.git-hook&#47;custom-script.sh</code>."}, {"owner": {"reputation": 3, "user_id": 6733334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62407f2d66062d2eb2fd2a77cf54e60c?s=128&d=identicon&r=PG&f=1", "display_name": "\u5e06\u5208\u5927\u6a39", "link": "https://stackoverflow.com/users/6733334/%e5%b8%86%e5%88%88%e5%a4%a7%e6%a8%b9"}, "edited": false, "score": 0, "creation_date": 1472105314, "post_id": 39102118, "comment_id": 65620032, "body": "One, I must have tried it so somewhere in the process, but I guess I didn&#39;t add <code>.&#47;</code> part. Two at the point of posting this, I was thinking the <code>plugin_directory</code> line was already specifying that the script is in .git-hook directory, but was just doing some other stuff."}], "tags": [], "owner": {"reputation": 5428, "user_id": 482382, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/9fe6eecd0900f0e779711f091fec8b3b?s=128&d=identicon&r=PG", "display_name": "Steven Shaw", "link": "https://stackoverflow.com/users/482382/steven-shaw"}, "is_accepted": true, "score": 1, "last_activity_date": 1471957623, "creation_date": 1471957623, "answer_id": 39102118, "question_id": 39101418, "link": "https://stackoverflow.com/questions/39101418/cant-add-custom-script-in-overcommit-gem/39102118#39102118", "title": "can&#39;t add custom script in overcommit gem", "body": "<p>From the error message, it seems that the <code>custom-hook</code> must be relative to the root directory of your git repository. Perhaps try putting that one into <code>./bin/custom-hook</code>?</p>\n"}], "owner": {"reputation": 3, "user_id": 6733334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62407f2d66062d2eb2fd2a77cf54e60c?s=128&d=identicon&r=PG&f=1", "display_name": "\u5e06\u5208\u5927\u6a39", "link": "https://stackoverflow.com/users/6733334/%e5%b8%86%e5%88%88%e5%a4%a7%e6%a8%b9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 491, "favorite_count": 0, "accepted_answer_id": 39102118, "answer_count": 1, "score": 0, "last_activity_date": 1549852695, "creation_date": 1471955802, "last_edit_date": 1549852695, "question_id": 39101418, "link": "https://stackoverflow.com/questions/39101418/cant-add-custom-script-in-overcommit-gem", "title": "can&#39;t add custom script in overcommit gem", "body": "<p>I'm not sure if this is something I should post in the official repository issue(I sometimes see 'question' tag there). But if you think this is the appropriate place to ask this, would be great if someone could help me out. </p>\n\n<hr>\n\n<p>I've been trying to add a custom script in overcommit gem with no luck. \nWhat it says in the official document is to add lines in .overcommit.yml:</p>\n\n<pre><code> PostCheckout:\n  CustomScript:\n    enabled: true\n    required_executable: './bin/custom-script'\n</code></pre>\n\n<p>(so I've done so:)</p>\n\n<pre><code>PrePush:      \n    customHook:\n      enabled: true\n      required_executable: 'custom-hook'\n</code></pre>\n\n<p>and to put the script in .git-hooks directory in the project root. So I put  this script in .git-hook dir for test:</p>\n\n<pre><code>#custom-hook.sh    \necho hey\n</code></pre>\n\n<p>Here's the sweet error message:</p>\n\n<pre><code>Hook must specify a `required_executable` or `command` that is tracked by git (i.e. is a path relative to the root of the repository) so that it can be signed\n/Users/hiroki/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/overcommit-0.34.2/lib/overcommit/hook_signer.rb:39:in `hook_path'\n/Users/hiroki/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/overcommit-0.34.2/lib/overcommit/hook_signer.rb:92:in `hook_contents'\n/Users/hiroki/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/overcommit-0.34.2/lib/overcommit/hook_signer.rb:88:in `signature'\n/Users/hiroki/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/overcommit-0.34.2/lib/overcommit/hook_signer.rb:61:in `signature_changed?'\n/Users/hiroki/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/overcommit-0.34.2/lib/overcommit/hook_loader/plugin_hook_loader.rb:51:in `select'\n/Users/hiroki/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/overcommit-0.34.2/lib/overcommit/hook_loader/plugin_hook_loader.rb:51:in `modified_plugins'\n/Users/hiroki/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/overcommit-0.34.2/lib/overcommit/hook_loader/plugin_hook_loader.rb:55:in `check_for_modified_plugins'\n/Users/hiroki/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/overcommit-0.34.2/lib/overcommit/hook_loader/plugin_hook_loader.rb:8:in `load_hooks'\n/Users/hiroki/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/overcommit-0.34.2/lib/overcommit/hook_runner.rb:195:in `load_hooks'\n/Users/hiroki/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/overcommit-0.34.2/lib/overcommit/hook_runner.rb:32:in `block in run'\n/Users/hiroki/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/overcommit-0.34.2/lib/overcommit/interrupt_handler.rb:84:in `isolate_from_interrupts'\n/Users/hiroki/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/overcommit-0.34.2/lib/overcommit/hook_runner.rb:28:in `run'\n.git/hooks/pre-push:79:in `&lt;main&gt;'\n</code></pre>\n\n<p>Obviously, it complains it can't find the executable so I'm guessing the format isn't right, but there are little information out there and I'm stuck. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf", "wicked-pdf"], "comments": [{"owner": {"reputation": 101, "user_id": 3989368, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dtd28.png?s=128&g=1", "display_name": "Rahul Kumar Das", "link": "https://stackoverflow.com/users/3989368/rahul-kumar-das"}, "edited": false, "score": 0, "creation_date": 1471952605, "post_id": 39099953, "comment_id": 65546979, "body": "try to add format.html as well after ... |format|"}], "answers": [{"tags": [], "owner": {"reputation": 1794, "user_id": 4121597, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/yRRXR.jpg?s=128&g=1", "display_name": "Wraithseeker", "link": "https://stackoverflow.com/users/4121597/wraithseeker"}, "is_accepted": false, "score": 0, "last_activity_date": 1471952512, "creation_date": 1471952512, "answer_id": 39100212, "question_id": 39099953, "link": "https://stackoverflow.com/questions/39099953/how-to-convert-existing-html-file-to-pdfs-in-rails-4/39100212#39100212", "title": "How to convert existing html file to pdfs in rails 4?", "body": "<p>I assume your <code>order_invoice</code> file has a format of <code>order_invoice.html.erb</code> instead of <code>order_invoice.pdf.erb</code> which should be the correct format.</p>\n"}, {"comments": [{"owner": {"reputation": 663, "user_id": 5110480, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/210fea696d0260204d18a7a7d54bf2dd?s=128&d=identicon&r=PG&f=1", "display_name": "Mahesh Mesta", "link": "https://stackoverflow.com/users/5110480/mahesh-mesta"}, "edited": false, "score": 0, "creation_date": 1471952945, "post_id": 39100277, "comment_id": 65547218, "body": "Actually I have to use the file generate_invoice.html.erb here. Also now that I tried the code, it throws this error for the controller  :                 Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like &quot;redirect_to(...) and return&quot;."}], "tags": [], "owner": {"reputation": 101, "user_id": 3989368, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Dtd28.png?s=128&g=1", "display_name": "Rahul Kumar Das", "link": "https://stackoverflow.com/users/3989368/rahul-kumar-das"}, "is_accepted": false, "score": 0, "last_activity_date": 1471952690, "creation_date": 1471952690, "answer_id": 39100277, "question_id": 39099953, "link": "https://stackoverflow.com/questions/39099953/how-to-convert-existing-html-file-to-pdfs-in-rails-4/39100277#39100277", "title": "How to convert existing html file to pdfs in rails 4?", "body": "<pre><code>respond_to do |format|\n  format.html\n  format.pdf do\n    render pdf: \"order_invoice\"   \n  end\nend\n</code></pre>\n\n<p>and I hope you already have the view file \"order_invoice.html.erb\"</p>\n"}], "owner": {"reputation": 663, "user_id": 5110480, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/210fea696d0260204d18a7a7d54bf2dd?s=128&d=identicon&r=PG&f=1", "display_name": "Mahesh Mesta", "link": "https://stackoverflow.com/users/5110480/mahesh-mesta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 405, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1471952690, "creation_date": 1471951794, "last_edit_date": 1471951898, "question_id": 39099953, "link": "https://stackoverflow.com/questions/39099953/how-to-convert-existing-html-file-to-pdfs-in-rails-4", "title": "How to convert existing html file to pdfs in rails 4?", "body": "<p>I have an html file generate_invoice.html.erb. I have to provide a button on the same file to convert generate_invoice.html.erb into a downloadable pdf.I have tried using wicked pdf gem and gem 'wkhtmltopdf-binary'</p>\n\n<p>then I also created the config/initializers/wicked_pdf.rb and set the mime types to pdf</p>\n\n<p>my routes is as follows:</p>\n\n<pre><code>match 'orders/:id/invoice'      =&gt; 'orders#order_invoice', as:   \n'order_invoice', via: [:put,:post,:get]\n</code></pre>\n\n<p>My order_controller is as follows</p>\n\n<pre><code> def order_invoice\n  @base_url = ENV['base_url']\n  @order = Order.includes(:status, :user, payment: \n  [:status]).where(id: params[:id]).first\n  if (['Notary', 'Attestation','Franking'].include? \n  @order.service.name)\n    @no_of_copies = ((@order.answers.where(question_id: \n    [37,15]).length\n    &gt; 0) ? @order.answers.where(question_id: [37,15]).first.body : \n    0).to_i \n  else\n    @no_of_copies = ((@order.answers.where(question_id: \n    [37,15]).length \n    &gt; 0) ? @order.answers.where(question_id: [37,15]).first.body : \n    0).to_i + 1\n  end\n\n  render 'order_mailer/generate_invoice',layout: false\n  respond_to do |format|\n   format.pdf do\n     render pdf: \"order_invoice\"\n  end \nend\n</code></pre>\n\n<p>end</p>\n\n<p>it however throws this error</p>\n\n<pre><code>ActionController::UnknownFormat at /admin/orders/131/invoice\nActionController::UnknownFormat\n</code></pre>\n\n<p>basically it is pointing at <strong>respond_to do |format|</strong> line</p>\n\n<p>What am I doing wrong.Please help me rectify this.Also please let me know the next course of action to achieve the pdf format</p>\n"}, {"tags": ["ruby", "cucumber", "capybara"], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 0, "last_activity_date": 1471985576, "last_edit_date": 1471985576, "creation_date": 1471954287, "answer_id": 39100832, "question_id": 39099691, "link": "https://stackoverflow.com/questions/39099691/capybara-cucumber-matchers/39100832#39100832", "title": "Capybara Cucumber matchers", "body": "<p>The :prefer_exact match option has no effect on the :text option ( neither does <code>exact: true</code> - they only affects selectors that use the <code>XPath.is</code> method - selectors like :field, :label, :button, etc which take a string to potentially match against label text ).  To do exact matching with the :text option you need to pass a Regexp.  That said, it shouldn't be matching just B when you pass B1, have you printed out the text of the found elements to confirm which elements it's actually finding, and that it's not an issue with your click handler?</p>\n"}], "owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1471985576, "creation_date": 1471951051, "last_edit_date": 1471951414, "question_id": 39099691, "link": "https://stackoverflow.com/questions/39099691/capybara-cucumber-matchers", "title": "Capybara Cucumber matchers", "body": "<p>I've been asked by a colleague to help with his problem but I too, am becoming stuck on it.</p>\n\n<p>He wants to find a clickable element by the text on it from a list he's got.</p>\n\n<p>The list contains:</p>\n\n<pre><code>list = [ 'cat : B',\n         'cat : B1',\n         'cat : BE'\n       ]\n</code></pre>\n\n<p>When he iterates over the list, the first iteration clicks on <code>cat : B</code> as expected. The next iteration also clicks on <code>cat : B</code> instead of <code>B1</code>.</p>\n\n<p>the code used is:</p>\n\n<pre><code>list.each do |cat_item|\nfind('li.category', text: cat_item, :match =&gt; :prefer_exact).click\n</code></pre>\n\n<p>It's looks as though Capybara is only matching as far as the first B and thinking it's found the element, instead of matching to B1 or BE.</p>\n\n<p>Is there a way around this? I've tried several ways</p>\n"}, {"tags": ["ruby", "enumerable"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 4, "creation_date": 1471950837, "post_id": 39099557, "comment_id": 65545747, "body": "Sounds like <a href=\"http://ruby-doc.org/core-2.3.1/Enumerable.html#method-i-all-3F\" rel=\"nofollow noreferrer\"><code>Enumerable#all?</code></a>"}, {"owner": {"reputation": 106761, "user_id": 1450, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3b687a35025c05dbc7627af428dff0da?s=128&d=identicon&r=PG", "display_name": "John Topley", "link": "https://stackoverflow.com/users/1450/john-topley"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1471951200, "post_id": 39099557, "comment_id": 65545981, "body": "I can&#39;t believe I missed that one - thanks!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1471951488, "post_id": 39099557, "comment_id": 65546160, "body": "You&#39;re welcome ;-) I&#39;ve found a similar question and closed this as a duplicate."}, {"owner": {"reputation": 106761, "user_id": 1450, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3b687a35025c05dbc7627af428dff0da?s=128&d=identicon&r=PG", "display_name": "John Topley", "link": "https://stackoverflow.com/users/1450/john-topley"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1471951594, "post_id": 39099557, "comment_id": 65546242, "body": "Thanks @Stefan. I couldn&#39;t find any similar questions, but that&#39;s just because of the way I expressed mine."}], "answers": [{"tags": [], "owner": {"reputation": 425, "user_id": 1583603, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nU3gz.jpg?s=128&g=1", "display_name": "dskecse", "link": "https://stackoverflow.com/users/1583603/dskecse"}, "is_accepted": false, "score": 2, "last_activity_date": 1471950985, "creation_date": 1471950985, "answer_id": 39099668, "question_id": 39099557, "link": "https://stackoverflow.com/questions/39099557/together-method-invocations-for-enumerable-elements-in-ruby/39099668#39099668", "title": "&amp;&amp; together method invocations for Enumerable elements in Ruby", "body": "<p>You're looking for <a href=\"http://ruby-doc.org/core-2.3.1/Enumerable.html#method-i-all-3F\" rel=\"nofollow\">Enumerable#all?</a>.</p>\n"}], "owner": {"reputation": 106761, "user_id": 1450, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/3b687a35025c05dbc7627af428dff0da?s=128&d=identicon&r=PG", "display_name": "John Topley", "link": "https://stackoverflow.com/users/1450/john-topley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "closed_date": 1471951405, "answer_count": 1, "score": 1, "last_activity_date": 1471950985, "creation_date": 1471950633, "question_id": 39099557, "link": "https://stackoverflow.com/questions/39099557/together-method-invocations-for-enumerable-elements-in-ruby", "closed_reason": "Duplicate", "title": "&amp;&amp; together method invocations for Enumerable elements in Ruby", "body": "<p>Is there an elegant Ruby way to invoke a method (that returns a boolean) for each element of an Enumerable, but &amp;&amp; the results together? A bit like <code>Array#collect</code> but returning an overall boolean result rather than an array.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "elasticsearch"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user5900658"}, "edited": false, "score": 0, "creation_date": 1479733521, "post_id": 39101588, "comment_id": 68668568, "body": "hi Billy. how do you show aggregations in index if you have any and also what do you have in your form that allows sector name and service name to be selected? thanks man"}], "tags": [], "owner": {"reputation": 255, "user_id": 4833080, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/396ff0ca536f8ccb84116a5e99887214?s=128&d=identicon&r=PG&f=1", "display_name": "BillyBib", "link": "https://stackoverflow.com/users/4833080/billybib"}, "is_accepted": false, "score": 1, "last_activity_date": 1471956255, "creation_date": 1471956255, "answer_id": 39101588, "question_id": 39099513, "link": "https://stackoverflow.com/questions/39099513/date-range-query-in-searchkick-elastic-search/39101588#39101588", "title": "Date range query in SearchKick (elastic search)", "body": "<p>Worked it out.</p>\n\n<pre><code>def index\n  query = params[:j].presence || \"*\"\n  conditions = {start_date: {\"gte\": \"now/d\"}}\n  conditions[:sector_name] = params[:sector_name] if params[:sector_name].present?\n  conditions[:service_name] = params[:service_name] if params[:service_name].present?\n  conditions[:start_date] = params[:start_date] if params[:start_date].present?\n  @events = Event.search query, where: conditions, aggs: [:sector_name, :service_name], order: {start_date: {order: \"asc\", unmapped_type: \"long\"}}, page: params[:page], per_page: 10\nend\n</code></pre>\n\n<p>I simply passed <code>start_date: {\"gte\": \"now/d\"}</code> into the conditions hash. This means it now works in conjunctions with my aggs search.</p>\n"}], "owner": {"reputation": 255, "user_id": 4833080, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/396ff0ca536f8ccb84116a5e99887214?s=128&d=identicon&r=PG&f=1", "display_name": "BillyBib", "link": "https://stackoverflow.com/users/4833080/billybib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 825, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1471956255, "creation_date": 1471950488, "question_id": 39099513, "link": "https://stackoverflow.com/questions/39099513/date-range-query-in-searchkick-elastic-search", "title": "Date range query in SearchKick (elastic search)", "body": "<p>I have a Rails 5 app that lists a collection of events. I have SearchKick set up nicely and I am now trying to add functionality that only displays the events from today onwards but I'm struggling with the implementation. I currently have the following:</p>\n\n<p><code>events_controller.rb</code></p>\n\n<pre><code>class EventsController &lt; ApplicationController\n\n    def index\n      query = params[:j].presence || \"*\"\n      conditions = {}\n      conditions[:sector_name] = params[:sector_name] if params[:sector_name].present?\n      conditions[:service_name] = params[:service_name] if params[:service_name].present?\n      conditions[:start_date] = params[:start_date] if params[:start_date].present?\n      @events = Event.search query, where: conditions, aggs: [:sector_name, :service_name], range: {start_date: {\"gte\": \"now/d\"}}, order: {start_date: {order: \"asc\", unmapped_type: \"long\"}}, page: params[:page], per_page: 10\n    end\n  ...\nend\n</code></pre>\n\n<p><code>start_date</code> is of <code>date</code> type in my postgres db.</p>\n\n<p>When I go to <code>index.html.erb</code> I'm still seeing events with a <code>start_date</code> before today's date.</p>\n"}, {"tags": ["ruby", "variables", "tablename"], "answers": [{"tags": [], "owner": {"reputation": 24667, "user_id": 797303, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DahZJ.jpg?s=128&g=1", "display_name": "Maxim Krizhanovsky", "link": "https://stackoverflow.com/users/797303/maxim-krizhanovsky"}, "is_accepted": false, "score": 5, "last_activity_date": 1471951068, "creation_date": 1471951068, "answer_id": 39099697, "question_id": 39099498, "link": "https://stackoverflow.com/questions/39099498/ruby-variable-as-tablename/39099697#39099697", "title": "Ruby: Variable as tablename", "body": "<p>To instantiate an object based on a class name that is in a variable, you can use <code>Object.const_get(wrktablename).new</code></p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 5168333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bc39e3be64c898116440facdabfd48b?s=128&d=identicon&r=PG&f=1", "display_name": "Cokiehh", "link": "https://stackoverflow.com/users/5168333/cokiehh"}, "edited": false, "score": 0, "creation_date": 1471972877, "post_id": 39100031, "comment_id": 65561687, "body": "I do not see a variable here? What is the syntax with a variable? Is it like <code>wrktablename.constantize.new</code>"}, {"owner": {"reputation": 1128, "user_id": 3973117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f52a78aa4cf83a8372e28a27ce3511c?s=128&d=identicon&r=PG", "display_name": "jan.zikan", "link": "https://stackoverflow.com/users/3973117/jan-zikan"}, "reply_to_user": {"reputation": 53, "user_id": 5168333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bc39e3be64c898116440facdabfd48b?s=128&d=identicon&r=PG&f=1", "display_name": "Cokiehh", "link": "https://stackoverflow.com/users/5168333/cokiehh"}, "edited": false, "score": 0, "creation_date": 1471975704, "post_id": 39100031, "comment_id": 65563231, "body": "Exactly as you write."}], "tags": [], "owner": {"reputation": 1128, "user_id": 3973117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f52a78aa4cf83a8372e28a27ce3511c?s=128&d=identicon&r=PG", "display_name": "jan.zikan", "link": "https://stackoverflow.com/users/3973117/jan-zikan"}, "is_accepted": false, "score": 2, "last_activity_date": 1471951980, "creation_date": 1471951980, "answer_id": 39100031, "question_id": 39099498, "link": "https://stackoverflow.com/questions/39099498/ruby-variable-as-tablename/39100031#39100031", "title": "Ruby: Variable as tablename", "body": "<p>If you are using Ruby on Rails, you can do it this way:</p>\n\n<pre><code>\"class name\".constantize.new\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 5168333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bc39e3be64c898116440facdabfd48b?s=128&d=identicon&r=PG&f=1", "display_name": "Cokiehh", "link": "https://stackoverflow.com/users/5168333/cokiehh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1471973122, "creation_date": 1471950450, "last_edit_date": 1471973122, "question_id": 39099498, "link": "https://stackoverflow.com/questions/39099498/ruby-variable-as-tablename", "title": "Ruby: Variable as tablename", "body": "<p>I am looking for a way to get a variable being used as a tablename.</p>\n\n<p>As example actually it looks like this:</p>\n\n<pre><code>@user = User.new\n</code></pre>\n\n<p><em>but</em>, can I do this like</p>\n\n<pre><code>wrktablename = \"User\"\n@my_table = wrktablename.new\n</code></pre>\n\n<p>Please note, that <em>wrktablename</em> really can be different values for the table name.</p>\n\n<p>And in addition just to mention: I do not have the model name or the table name outside the variable.\nBut I need to use all functions like <code>wrktablename.new</code>and <code>wrktablename.find</code>and so on.</p>\n"}, {"tags": ["android", "ruby-on-rails", "ruby", "ruby-on-rails-3", "server"], "comments": [{"owner": {"reputation": 2367, "user_id": 3178454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IgqNg.jpg?s=128&g=1", "display_name": "ddb", "link": "https://stackoverflow.com/users/3178454/ddb"}, "edited": false, "score": 0, "creation_date": 1471949516, "post_id": 39099127, "comment_id": 65544851, "body": "are you testing on simulator or real device?"}, {"owner": {"reputation": 6426, "user_id": 577180, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BkAMJ.jpg?s=128&g=1", "display_name": "ChuckJHardy", "link": "https://stackoverflow.com/users/577180/chuckjhardy"}, "edited": false, "score": 0, "creation_date": 1471949578, "post_id": 39099127, "comment_id": 65544887, "body": "Check your development logs are actually getting hit."}, {"owner": {"reputation": 2367, "user_id": 3178454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IgqNg.jpg?s=128&g=1", "display_name": "ddb", "link": "https://stackoverflow.com/users/3178454/ddb"}, "edited": false, "score": 0, "creation_date": 1471949659, "post_id": 39099127, "comment_id": 65544947, "body": "I think the problem is that the host (at 10.0.2.2) is in a network that is not reachable from device network"}, {"owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "edited": false, "score": 1, "creation_date": 1471959868, "post_id": 39099127, "comment_id": 65552481, "body": "check the output of <code>rake routes</code> in your rails app"}, {"owner": {"reputation": 683, "user_id": 5131441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/787106924736589/picture?type=large", "display_name": "Trieu Nguyen", "link": "https://stackoverflow.com/users/5131441/trieu-nguyen"}, "reply_to_user": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1472009148, "post_id": 39099127, "comment_id": 65574775, "body": "@MladenJablanovi\u0107 It is like this:                GET    /tests(.:format)          tests#index           POST   /tests(.:format)          tests#create"}, {"owner": {"reputation": 683, "user_id": 5131441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/787106924736589/picture?type=large", "display_name": "Trieu Nguyen", "link": "https://stackoverflow.com/users/5131441/trieu-nguyen"}, "reply_to_user": {"reputation": 2367, "user_id": 3178454, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IgqNg.jpg?s=128&g=1", "display_name": "ddb", "link": "https://stackoverflow.com/users/3178454/ddb"}, "edited": false, "score": 0, "creation_date": 1472009237, "post_id": 39099127, "comment_id": 65574794, "body": "@ddb i have tried with localhost and 127.0.0.1, they all give me exception, only this 10.0.2.2 not give me anything."}], "answers": [{"tags": [], "owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "is_accepted": true, "score": 0, "last_activity_date": 1472045167, "creation_date": 1472045167, "answer_id": 39124657, "question_id": 39099127, "link": "https://stackoverflow.com/questions/39099127/sending-post-request-from-android-to-ror-app-but-cannot-find-the-right-url/39124657#39124657", "title": "Sending POST request from android to RoR app, but cannot find the right URL", "body": "<p>It's hard to tell the reason for the failure you have. Your routes seem OK. You can check couple other things:</p>\n\n<ul>\n<li>Is your Rails server listening on the right interface and port?</li>\n<li>Is there any network problem between the machine your client is working on and the server?</li>\n<li>Instead of going through the cycle of edit-compile-deploy-run of Android, simply use <code>curl</code> or a similar tool to try the POST request from the console.</li>\n</ul>\n\n<p>When you pinpoint the place of the problem, then you can ask another question, or, more likely, already find the answer online.</p>\n"}], "owner": {"reputation": 683, "user_id": 5131441, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/787106924736589/picture?type=large", "display_name": "Trieu Nguyen", "link": "https://stackoverflow.com/users/5131441/trieu-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 39124657, "answer_count": 1, "score": 0, "last_activity_date": 1472045167, "creation_date": 1471949443, "question_id": 39099127, "link": "https://stackoverflow.com/questions/39099127/sending-post-request-from-android-to-ror-app-but-cannot-find-the-right-url", "title": "Sending POST request from android to RoR app, but cannot find the right URL", "body": "<p>I am not able to reach the create Method in tests_controller.rb with this code.</p>\n\n<pre><code>String newUrl = \"http://10.0.2.2:3000/tests\";\n\n        httpcon = (HttpURLConnection) ((new URL(newUrl).openConnection()));\n        httpcon.setDoOutput(true);\n        httpcon.setRequestProperty(\"Content-Type\", \"application/json\");\n        httpcon.setRequestProperty(\"Accept\", \"application/json\");\n        httpcon.setRequestMethod(\"POST\");\n        httpcon.connect();\n</code></pre>\n\n<p>And here is my routes.rb (I use model scaffold to create the RoR app).</p>\n\n<pre><code>resources :tests\n</code></pre>\n\n<p>Am i wrong in routing or something. When i run this code in Android, the create method is not run at all.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 346, "user_id": 5924670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/078f04b25621a4370b694b95875a846b?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Arslan", "link": "https://stackoverflow.com/users/5924670/muhammad-arslan"}, "edited": false, "score": 0, "creation_date": 1471948842, "post_id": 39098902, "comment_id": 65544385, "body": "this is my first experience in rub on rails"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1471973672, "post_id": 39098902, "comment_id": 65562110, "body": "Please read &quot;<a href=\"http://meta.stackoverflow.com/a/261593/128421\">How much research effort is expected of Stack Overflow users?</a>&quot;. How to do this is part of any Rails tutorial, of which there are probably hundreds out there."}], "answers": [{"comments": [{"owner": {"reputation": 346, "user_id": 5924670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/078f04b25621a4370b694b95875a846b?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Arslan", "link": "https://stackoverflow.com/users/5924670/muhammad-arslan"}, "edited": false, "score": 0, "creation_date": 1471956047, "post_id": 39100147, "comment_id": 65549439, "body": "mysql client is missing. Check your installation of MySQL or Connector/C, and try again."}], "tags": [], "owner": {"reputation": 1128, "user_id": 3973117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f52a78aa4cf83a8372e28a27ce3511c?s=128&d=identicon&r=PG", "display_name": "jan.zikan", "link": "https://stackoverflow.com/users/3973117/jan-zikan"}, "is_accepted": false, "score": 0, "last_activity_date": 1471973806, "last_edit_date": 1471973806, "creation_date": 1471952323, "answer_id": 39100147, "question_id": 39098902, "link": "https://stackoverflow.com/questions/39098902/i-have-a-complete-ruby-project-on-my-system-but-how-do-i-run-it/39100147#39100147", "title": "I have a complete ruby project on my system but how do I run it?", "body": "<p>To run your Ruby on Rails application, use the following command:</p>\n\n<pre><code>rails server\n</code></pre>\n\n<p>This will start the server and you will be able to access the application in your browser at <code>http://localhost:3000</code>. Port 3000 is default and you can change it in the application settings.</p>\n\n<p>To run a Ruby script use:</p>\n\n<pre><code>ruby name_of_script.rb\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1037, "user_id": 3366016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4721c96622c2e1798f6cfece8a0f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user3366016", "link": "https://stackoverflow.com/users/3366016/user3366016"}, "is_accepted": false, "score": 0, "last_activity_date": 1471974795, "creation_date": 1471974795, "answer_id": 39107791, "question_id": 39098902, "link": "https://stackoverflow.com/questions/39098902/i-have-a-complete-ruby-project-on-my-system-but-how-do-i-run-it/39107791#39107791", "title": "I have a complete ruby project on my system but how do I run it?", "body": "<p>You should check out various resources and tutorials on getting started with rails. </p>\n\n<p>As you say in your comment this is your first experience with Ruby on Rails, I think you should follow through chapter 1 and 2 (at least) of <a href=\"https://www.railstutorial.org/book/beginning\" rel=\"nofollow\">Ruby on Rails Tutorial</a>. After that you should have a better understanding of how you start up a rails app and configure the DB. You also need a bunch of other libraries and software such as mysql from the sounds of it.</p>\n\n<p>You should also read <a href=\"http://guides.rubyonrails.org/getting_started.html\" rel=\"nofollow\">Getting Started with Rails</a>.  Section 4 covers how to start the default rails server.</p>\n\n<p>Here is a guide on <a href=\"https://gorails.com/setup/windows/10\" rel=\"nofollow\">setting up a Rails environment for Windows</a>, which is one of many guides, that shows you some of the needed steps to get a fully working environment.</p>\n"}], "owner": {"reputation": 346, "user_id": 5924670, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/078f04b25621a4370b694b95875a846b?s=128&d=identicon&r=PG&f=1", "display_name": "Muhammad Arslan", "link": "https://stackoverflow.com/users/5924670/muhammad-arslan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 186, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1471977906, "creation_date": 1471948805, "last_edit_date": 1471977906, "question_id": 39098902, "link": "https://stackoverflow.com/questions/39098902/i-have-a-complete-ruby-project-on-my-system-but-how-do-i-run-it", "title": "I have a complete ruby project on my system but how do I run it?", "body": "<p>I have a complete ruby project on my system that I downloaded from github.com and I want to run it on my Windows machine.</p>\n\n<p>I have already installed Ruby and Rails on my system, but I have no idea how to run this project. The directory of this project is something like:</p>\n\n<pre><code>C:\\Users\\{username}\\Desktop\\BitcoinFundi\\BitcoinFundi\n</code></pre>\n\n<p>How would I run this project on my system?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sidekiq"], "answers": [{"tags": [], "owner": {"reputation": 1205, "user_id": 6742278, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2UIeh.jpg?s=128&g=1", "display_name": "codyeatworld", "link": "https://stackoverflow.com/users/6742278/codyeatworld"}, "is_accepted": false, "score": 0, "last_activity_date": 1471948868, "creation_date": 1471948868, "answer_id": 39098933, "question_id": 39098427, "link": "https://stackoverflow.com/questions/39098427/requiring-a-model-file-in-sidekiq-worker/39098933#39098933", "title": "Requiring a model file in sidekiq worker", "body": "<p>One of the reasons why you got an error when calling <code>Abc.some_method</code> is it wasn't defined on <code>self.</code>.</p>\n\n<pre><code>class Abc \n  def self.some_method\n    puts \"Meow\"\n  end\n\n  def some_other_method\n    puts \"Woof\"\n  end\nend\n\nAbc.some_method           # =&gt; Meow\nAbc.some_other_method     # =&gt; undefined method `some_other_method' for Abc:Class\nAbc.new.some_other_method # =&gt; Woof\n</code></pre>\n\n<p>You shouldn't have to require any model files.</p>\n\n<p><a href=\"https://github.com/mperham/sidekiq/wiki/Best-Practices\" rel=\"nofollow\">https://github.com/mperham/sidekiq/wiki/Best-Practices</a></p>\n"}, {"tags": [], "owner": {"reputation": 360, "user_id": 5782310, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a7796118fedfdee029ea025d0034b643?s=128&d=identicon&r=PG&f=1", "display_name": "Sushant Bajracharya", "link": "https://stackoverflow.com/users/5782310/sushant-bajracharya"}, "is_accepted": true, "score": 0, "last_activity_date": 1471949845, "creation_date": 1471949845, "answer_id": 39099269, "question_id": 39098427, "link": "https://stackoverflow.com/questions/39098427/requiring-a-model-file-in-sidekiq-worker/39099269#39099269", "title": "Requiring a model file in sidekiq worker", "body": "<p>I have made a blunder mistake. I mistyped the method name.</p>\n"}], "owner": {"reputation": 360, "user_id": 5782310, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/a7796118fedfdee029ea025d0034b643?s=128&d=identicon&r=PG&f=1", "display_name": "Sushant Bajracharya", "link": "https://stackoverflow.com/users/5782310/sushant-bajracharya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 0, "accepted_answer_id": 39099269, "answer_count": 2, "score": 0, "last_activity_date": 1471952504, "creation_date": 1471947496, "last_edit_date": 1471952504, "question_id": 39098427, "link": "https://stackoverflow.com/questions/39098427/requiring-a-model-file-in-sidekiq-worker", "title": "Requiring a model file in sidekiq worker", "body": "<p>I have a model file 'abc.rb' inside model directory. </p>\n\n<pre><code>class Abc\n  class &lt;&lt; self\n     //codes\n   end\nend\n</code></pre>\n\n<p>There are certain methods in the <code>abc.rb</code> file that I want to call to in my <code>workers/bulk_uploader.rb</code> file. I got an error while calling it like <code>Abc.some_method</code>. </p>\n\n<p>I also required the file <code>require '../models/abc.rb'</code> but i got an error in sidekiq console </p>\n\n<blockquote>\n  <p>No such file to load -- ../models/abc (LoadError)</p>\n</blockquote>\n"}, {"tags": ["ruby", "testing", "hash", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 4606308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d01c458130e5560464b42f6a2bfc5dc?s=128&d=identicon&r=PG&f=1", "display_name": "Suley Mahmoud", "link": "https://stackoverflow.com/users/4606308/suley-mahmoud"}, "edited": false, "score": 0, "creation_date": 1471948408, "post_id": 39098707, "comment_id": 65544107, "body": "Thanks a million I was just about to delete this as I found the answer but I will leave it others."}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1471949724, "last_edit_date": 1471949724, "creation_date": 1471948245, "answer_id": 39098707, "question_id": 39098226, "link": "https://stackoverflow.com/questions/39098226/accessing-key-value-pairs-in-a-hash-within-a-hash-with-ruby/39098707#39098707", "title": "Accessing key value pairs in a hash within a hash with Ruby", "body": "<p>If</p>\n\n<pre><code>hash = { \"Offer\"=&gt; { \"href\"      =&gt; \"http://xyz\",\n                     \"links\"     =&gt;  nil,\n                     \"Id\"        =&gt; \"1501507\",\n                     \"Count\"     =&gt; \"5\",\n                     \"Collected\" =&gt; \"3\",\n                     \"Status\"    =&gt; \"INPROGRESS\" } }\n</code></pre>\n\n<p>Then you can use this sort of notation:</p>\n\n<pre><code>hash[\"Offer\"][\"href\"] #=&gt; \"http://xyz\"\n</code></pre>\n\n<p>Or define a new hash and use regular hash access:</p>\n\n<pre><code>new_hash = hash[\"Offer\"]\nnew_hash #=&gt;\n# { \"href\"      =&gt; \"http://xyz\",\n#   \"links\"     =&gt; nil,\n#   \"Id\"        =&gt; \"1501507\",\n#   \"Count\"     =&gt; \"5\",\n#   \"Collected\" =&gt; \"3\",\n#   \"Status\"    =&gt; \"INPROGRESS\" }\n\nnew_hash[\"href\"] #=&gt; \"http://xyz\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 35, "user_id": 4606308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d01c458130e5560464b42f6a2bfc5dc?s=128&d=identicon&r=PG&f=1", "display_name": "Suley Mahmoud", "link": "https://stackoverflow.com/users/4606308/suley-mahmoud"}, "edited": false, "score": 0, "creation_date": 1471957094, "post_id": 39099256, "comment_id": 65550311, "body": "Thanks for the help"}], "tags": [], "owner": {"reputation": 6426, "user_id": 577180, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BkAMJ.jpg?s=128&g=1", "display_name": "ChuckJHardy", "link": "https://stackoverflow.com/users/577180/chuckjhardy"}, "is_accepted": false, "score": 1, "last_activity_date": 1471949797, "creation_date": 1471949797, "answer_id": 39099256, "question_id": 39098226, "link": "https://stackoverflow.com/questions/39098226/accessing-key-value-pairs-in-a-hash-within-a-hash-with-ruby/39099256#39099256", "title": "Accessing key value pairs in a hash within a hash with Ruby", "body": "<p>There is also <code>#dig</code> <a href=\"http://ruby-doc.org/core-2.3.0_preview1/Hash.html#method-i-dig\" rel=\"nofollow\">http://ruby-doc.org/core-2.3.0_preview1/Hash.html#method-i-dig</a></p>\n\n<pre><code>hash = {\n  \"Offer\"=&gt; { \n    \"href\"      =&gt; \"http://xyz\",\n    \"links\"     =&gt;  nil,\n    \"Id\"        =&gt; \"1501507\",\n    \"Count\"     =&gt; \"5\",\n    \"Collected\" =&gt; \"3\",\n    \"Status\"    =&gt; \"INPROGRESS\" \n  } \n}\n\nputs hash.dig(\"Offer\", \"href\")\n# =&gt; http://xyz\n</code></pre>\n"}], "owner": {"reputation": 35, "user_id": 4606308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d01c458130e5560464b42f6a2bfc5dc?s=128&d=identicon&r=PG&f=1", "display_name": "Suley Mahmoud", "link": "https://stackoverflow.com/users/4606308/suley-mahmoud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 599, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1471949797, "creation_date": 1471946920, "question_id": 39098226, "link": "https://stackoverflow.com/questions/39098226/accessing-key-value-pairs-in-a-hash-within-a-hash-with-ruby", "title": "Accessing key value pairs in a hash within a hash with Ruby", "body": "<p>I'm writing a test against a API XML response that I converted to a hash. The hash however is nested so it seems to behave like \"Offer\" is the key and everything else is the value. (Shown below)</p>\n\n<p>I would like to be able to access the key-value pairs within this hash so I can assert using rspec tests against \"Id\", \"Count\" etc. Thanks</p>\n\n<pre><code>{\"Offer\"=&gt;\n  {\"href\"=&gt;\"http://xyz\",\n   \"links\"=&gt;nil,\n   \"Id\"=&gt;\"1501507\",\n   \"Count\"=&gt;\"5\",\n   \"Collected\"=&gt;\"3\",\n   \"Status\"=&gt;\"INPROGRESS\"}}\n</code></pre>\n"}]