[{"tags": ["ruby-on-rails", "ruby", "unix", "caching", "rake"], "answers": [{"tags": [], "owner": {"reputation": 3046, "user_id": 227403, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3f149861a296511ce45656426643ce68?s=128&d=identicon&r=PG", "display_name": "Travis", "link": "https://stackoverflow.com/users/227403/travis"}, "is_accepted": false, "score": 0, "last_activity_date": 1432852259, "creation_date": 1432852259, "answer_id": 30518135, "question_id": 30362094, "link": "https://stackoverflow.com/questions/30362094/rake-cacheclear-says-its-removing-files-but-it-is-not/30518135#30518135", "title": "rake cache:clear says it&#39;s removing files but it is not", "body": "<p>The resolution was to use</p>\n\n<pre><code>rake tmp:clear \n</code></pre>\n"}], "owner": {"reputation": 3046, "user_id": 227403, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3f149861a296511ce45656426643ce68?s=128&d=identicon&r=PG", "display_name": "Travis", "link": "https://stackoverflow.com/users/227403/travis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 768, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432852259, "creation_date": 1432164748, "last_edit_date": 1432851497, "question_id": 30362094, "link": "https://stackoverflow.com/questions/30362094/rake-cacheclear-says-its-removing-files-but-it-is-not", "title": "rake cache:clear says it&#39;s removing files but it is not", "body": "<p>In cron and the command prompt I run <code>bundle exec rake cache:clear</code> and it logs all the files in my cache directory and that it's removing them but it is not. \nThe files are still there and I can remove them with a remove command. I've confirmed it has file permissions. What else could it be?</p>\n\n<pre><code>    About your application's environment\nRuby version              2.1.2 (x86_64-linux)\nRubyGems version          2.2.2\nRack version              1.5\nRails version             4.0.9\nJavaScript Runtime        Node.js (V8)\nActive Record version     4.0.9\nAction Pack version       4.0.9\nAction Mailer version     4.0.9\nActive Support version    4.0.9\nMiddleware                Airbrake::UserInformer, Rack::Sendfile, ActionDispatch::Static, Rack::Lock, Refraction, #&lt;ActiveSupport::Cache::Strategy::LocalCache::Middleware:0x007ffa821bb0c8&gt;, Rack::Runtime, Rack::MethodOverride, ActionDispatch::RequestId, Rails::Rack::Logger, ActionDispatch::ShowExceptions, ActionDispatch::DebugExceptions, Airbrake::Rails::Middleware, ActionDispatch::RemoteIp, ActionDispatch::Reloader, ActionDispatch::Callbacks, ActiveRecord::Migration::CheckPending, ActiveRecord::ConnectionAdapters::ConnectionManagement, ActiveRecord::QueryCache, ActionDispatch::Cookies, ActionDispatch::Session::CookieStore, ActionDispatch::Flash, ActionDispatch::ParamsParser, Rack::Head, Rack::ConditionalGet, Rack::ETag\nApplication root          /mnt/www/ride/releases/20150519225426\nEnvironment               development\nDatabase adapter          mysql\n</code></pre>\n\n<p>The user is deploy in the deploy group.</p>\n\n<pre><code>$ ls -l\ntotal 18216\n-rw-r--r-- 1 deploy deploy    415 May 27 16:25 03eea388375a06041afe40e5eb9585b5e4af182e.cache\n-rw-r--r-- 1 deploy deploy   5424 May 27 16:25 04601c02ebf36c331e3908c4cf06771d6fab1f84.cache\n-rw-r--r-- 1 deploy deploy   5416 May 27 16:25 052678a2ef02de2e241574857f17927afc4ed3fb.cache\n...\n</code></pre>\n\n<p>This is the user that runs the cron job. Here is the output of the command:</p>\n\n<pre><code>RAILS_ENV=production bundle exec rake cache:clear --silent\n\n***** initializing cache clear *****\n\n***** deleting /social *****\n\n\n\n***** deleting main cache *****\n\n/var/www/site/tmp/cache/81d0fc6f96d4c6c957a26c932e3f2b471a56bc82.cache\n/var/www/site/tmp/cache/1db90a7553f8440babe0f23932a674096184feb2.cache\n/var/www/site/tmp/cache/b6d4cb2a18a5599605fec8880fc08d8604cbba07.cache\n</code></pre>\n\n<hr>\n\n<p>I can log in as the deploy user and reproduce this behavior. Performing the rake tasks lists out the files but wont delete them. Using the rm command I can successfully remove them. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "comments": [{"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1432170288, "post_id": 30361685, "comment_id": 48817135, "body": "Do you mean you want to do this: <code>Order.all.group(:fish_id).sum(:qty_ordered)</code> ?"}, {"owner": {"reputation": 353, "user_id": 1100979, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/dda3ae89842c33df747540608b58ab54?s=128&d=identicon&r=PG", "display_name": "mosquito242", "link": "https://stackoverflow.com/users/1100979/mosquito242"}, "reply_to_user": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1432236477, "post_id": 30361685, "comment_id": 48854508, "body": "I ended up getting it by doing <code>Order.joins(:catch).group(:fish_id).sum(:qty_ordered)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 353, "user_id": 1100979, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/dda3ae89842c33df747540608b58ab54?s=128&d=identicon&r=PG", "display_name": "mosquito242", "link": "https://stackoverflow.com/users/1100979/mosquito242"}, "edited": false, "score": 1, "creation_date": 1432236550, "post_id": 30363902, "comment_id": 48854545, "body": "I didn&#39;t want to use group_by because that&#39;s significantly slower than doing it within an ActiveRecord Query - I ended up solving it with <code>Order.joins(:catch).group(:fish_id).sum(:qty_ordered)</code>"}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "reply_to_user": {"reputation": 353, "user_id": 1100979, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/dda3ae89842c33df747540608b58ab54?s=128&d=identicon&r=PG", "display_name": "mosquito242", "link": "https://stackoverflow.com/users/1100979/mosquito242"}, "edited": false, "score": 0, "creation_date": 1432256838, "post_id": 30363902, "comment_id": 48862820, "body": "Of course, good call. I focused on what you were asking rather than even thinking of a join!"}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "reply_to_user": {"reputation": 353, "user_id": 1100979, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/dda3ae89842c33df747540608b58ab54?s=128&d=identicon&r=PG", "display_name": "mosquito242", "link": "https://stackoverflow.com/users/1100979/mosquito242"}, "edited": false, "score": 0, "creation_date": 1485281909, "post_id": 30363902, "comment_id": 70857654, "body": "Yay, another down vote on an old answer. What douchenozzle does that? If someone would like to point out what is wrong with this answer I&#39;d love to hear it. SMH"}], "tags": [], "owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "is_accepted": false, "score": 1, "last_activity_date": 1432177893, "creation_date": 1432177893, "answer_id": 30363902, "question_id": 30361685, "link": "https://stackoverflow.com/questions/30361685/group-and-count-by-nested-association-in-rails/30363902#30363902", "title": "group and count by nested association in rails", "body": "<p>You are doing this: Order.all.group(:catch_id).sum(:qty_ordered)</p>\n\n<p>and it works because Order has a field called <code>catch_id</code>, so you can group by that field.</p>\n\n<p>If you want to group by <code>fish_id</code> you would have to have a column <code>fish_id</code> in Orders and Orders would have a <code>belongs_to :fish</code> association.</p>\n\n<p>To group_by another related column it would be something like this:</p>\n\n<pre><code>Order.all.group_by {|order| order.catch.fish}\n</code></pre>\n\n<p>This is not the same <code>group</code> function, this is the Enumerable function <code>group_by</code>. Since your query returns an enumerable, it can be used. It will return a hash with each key being a Fish object, and the value being an array of Order objects that have that fish in them. This may not be the dataset you are looking for. Also you will not be able to just chain a <code>.sum</code> onto it. </p>\n\n<p>You need to look at your model relations and either use a relation that exists to get the data you want, or create more associations to be able to pull the data you want. An example of the exact data set you want would help determine your needs. </p>\n\n<p>An aside, using Order as a model may not be the best form. Rails has a method <code>.order</code> and you might find a conflict somewhere along the way. </p>\n"}], "owner": {"reputation": 353, "user_id": 1100979, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/dda3ae89842c33df747540608b58ab54?s=128&d=identicon&r=PG", "display_name": "mosquito242", "link": "https://stackoverflow.com/users/1100979/mosquito242"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2708, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1432177893, "creation_date": 1432162114, "question_id": 30361685, "link": "https://stackoverflow.com/questions/30361685/group-and-count-by-nested-association-in-rails", "title": "group and count by nested association in rails", "body": "<p>So I have the following associations (An Order comes from a Catch that is of a fish).</p>\n\n<p>I want to, group a set of orders by the fish they are of, and then sum the quantity ordered attribute within order for each group.</p>\n\n<p>I can do it for each catch with </p>\n\n<p>Order.all.group(:catch_id).sum(:qty_ordered)</p>\n\n<p>but not for the fish.</p>\n\n<pre><code>class Order &lt; ActiveRecord::Base\n    belongs_to :user\n    belongs_to :catch\nend\n\nclass Catch &lt; ActiveRecord::Base\n    has_many :orders\n    belongs_to :fish\nend\n\nclass Fish &lt; ActiveRecord::Base\n    has_many :catches\nend\n</code></pre>\n\n<p>Any tips?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432161568, "post_id": 30361540, "comment_id": 48814703, "body": "Question?  Am I initiating transaction from checking to savings or am I creating it? and that 50 is transfered to which account?"}, {"owner": {"reputation": 3738, "user_id": 2530089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a4973420ed95a43d4a63718685b9a94b?s=128&d=identicon&r=PG", "display_name": "Alex Pan", "link": "https://stackoverflow.com/users/2530089/alex-pan"}, "reply_to_user": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 1, "creation_date": 1432161734, "post_id": 30361540, "comment_id": 48814755, "body": "Transaction is a class and you are creating an instance of it. The 50 is transferred from your checking (1st argument) to your saving (2nd argument). You can test this by running your code then running <code>savings.balance</code> and <code>checking.balance</code> to see the new balances."}, {"owner": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432165527, "post_id": 30361540, "comment_id": 48815914, "body": "Could you explain me whats happening at: <code>def debit(account, amount)     account.balance -= amount   end</code> cant I do <code>savings.debit</code> to check it?"}, {"owner": {"reputation": 3738, "user_id": 2530089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a4973420ed95a43d4a63718685b9a94b?s=128&d=identicon&r=PG", "display_name": "Alex Pan", "link": "https://stackoverflow.com/users/2530089/alex-pan"}, "reply_to_user": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432165655, "post_id": 30361540, "comment_id": 48815948, "body": "You are creating a method called <code>debit</code> which has two arguments: <code>account</code> and <code>amount</code>. This will set the account instance object&#39;s balance to the current balance minus the amount passed in as a second argument."}, {"owner": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432166080, "post_id": 30361540, "comment_id": 48816043, "body": "Alex, you are doing your best to explain me...but I am not understanding anything at all.  <code>savings = Account.new (100) checking = Account.new (200)</code>  does it mean savings have balance of 100 and checking have balance of 200? please tell me I got that right?  Is this saving and checking connected to <code>@amount_a</code> and <code>amount_b</code>?  why is there a need to do savings.balance to find their value?"}, {"owner": {"reputation": 3738, "user_id": 2530089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a4973420ed95a43d4a63718685b9a94b?s=128&d=identicon&r=PG", "display_name": "Alex Pan", "link": "https://stackoverflow.com/users/2530089/alex-pan"}, "reply_to_user": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432166161, "post_id": 30361540, "comment_id": 48816067, "body": "Yes, you are correct. You are creating new Account instances, which takes a balance as an argument."}, {"owner": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432166242, "post_id": 30361540, "comment_id": 48816088, "body": "Is this saving and checking created by &#39;savings = Account.new&#39; connected to @amount_a and amount_b? why is there a need to do savings.balance to find their value"}, {"owner": {"reputation": 3738, "user_id": 2530089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a4973420ed95a43d4a63718685b9a94b?s=128&d=identicon&r=PG", "display_name": "Alex Pan", "link": "https://stackoverflow.com/users/2530089/alex-pan"}, "reply_to_user": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432166424, "post_id": 30361540, "comment_id": 48816130, "body": "No. The instance variables @amount_a and @amount_b are assigned by creating a new instance of the Transaction class. So when you call <code>trans = Transaction.new(checking, savings)</code>, the instance variables are assigned like so: <code>@amount_a = checking, @amount_b = savings</code>"}, {"owner": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432166535, "post_id": 30361540, "comment_id": 48816155, "body": "Things are becoming very clear to me now. why do I have to do savings.balance to see their value...is there an alternate way?"}, {"owner": {"reputation": 3738, "user_id": 2530089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a4973420ed95a43d4a63718685b9a94b?s=128&d=identicon&r=PG", "display_name": "Alex Pan", "link": "https://stackoverflow.com/users/2530089/alex-pan"}, "reply_to_user": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432166686, "post_id": 30361540, "comment_id": 48816188, "body": "There isn&#39;t an alternative to access the balance. The balance attribute (attr) is what stores the balance value in the Account class. You see where it says <code>attr_accessor :balance</code>? This allows you to set/get the balance of an Account instance."}, {"owner": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432166800, "post_id": 30361540, "comment_id": 48816214, "body": "Make lots of sense! you are a Yoda! I think I am getting @account_1 and actual savings getting mixed up....STUPID ME!"}, {"owner": {"reputation": 3738, "user_id": 2530089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a4973420ed95a43d4a63718685b9a94b?s=128&d=identicon&r=PG", "display_name": "Alex Pan", "link": "https://stackoverflow.com/users/2530089/alex-pan"}, "reply_to_user": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432167023, "post_id": 30361540, "comment_id": 48816271, "body": "Glad to help! Since you&#39;re new here, please don&#39;t forget to accepted the answer which helped most in solving the problem."}, {"owner": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432167157, "post_id": 30361540, "comment_id": 48816310, "body": "Its telling me that I need 15 rep to put this up :( how can I do this?"}, {"owner": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432167450, "post_id": 30361540, "comment_id": 48816400, "body": "One last question... <code>amount</code> in <code>def transfer(amount)</code> how come we can insert a value to it without doing the <code>attr_accessor</code> thing?"}, {"owner": {"reputation": 3738, "user_id": 2530089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a4973420ed95a43d4a63718685b9a94b?s=128&d=identicon&r=PG", "display_name": "Alex Pan", "link": "https://stackoverflow.com/users/2530089/alex-pan"}, "reply_to_user": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432179538, "post_id": 30361540, "comment_id": 48819405, "body": "You could simply create setter/getter methods in the Account class. <code>attr_accessor</code> is a shortcut for creating setter/getter methods for attributes."}, {"owner": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432229136, "post_id": 30361540, "comment_id": 48850202, "body": "How come we were able to insert the value 50 without having the setter/getter in it?"}, {"owner": {"reputation": 3738, "user_id": 2530089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a4973420ed95a43d4a63718685b9a94b?s=128&d=identicon&r=PG", "display_name": "Alex Pan", "link": "https://stackoverflow.com/users/2530089/alex-pan"}, "reply_to_user": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432229254, "post_id": 30361540, "comment_id": 48850269, "body": "Like I said, <code>attr_accessor</code> is a shortcut for creating the setter/getter methods. It creates a method called <code>balance</code> which will read the value of that attribute and a method called <code>balance=</code> which will set the value of that attribute."}], "tags": [], "owner": {"reputation": 3738, "user_id": 2530089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a4973420ed95a43d4a63718685b9a94b?s=128&d=identicon&r=PG", "display_name": "Alex Pan", "link": "https://stackoverflow.com/users/2530089/alex-pan"}, "is_accepted": true, "score": 0, "last_activity_date": 1432161605, "last_edit_date": 1432161605, "creation_date": 1432161453, "answer_id": 30361540, "question_id": 30361525, "link": "https://stackoverflow.com/questions/30361525/basic-ruby-questions/30361540#30361540", "title": "Basic Ruby questions", "body": "<p>In the second to last line, you are initializing a new Transaction from your <code>checking</code> account to your <code>savings</code> account. Then in the last line, you are transferring 50.</p>\n\n<p>You cannot print the value of trans because there is no value associated with it. You can print out the balance of your initialized accounts though, by calling <code>savings.balance</code> and <code>checking.balance</code></p>\n"}, {"comments": [{"owner": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432166469, "post_id": 30361607, "comment_id": 48816140, "body": "The checking and savings associated with @account_a and @account_b. are they same as <code>savings=Account.new</code>?"}], "tags": [], "owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "is_accepted": false, "score": 0, "last_activity_date": 1432161717, "creation_date": 1432161717, "answer_id": 30361607, "question_id": 30361525, "link": "https://stackoverflow.com/questions/30361525/basic-ruby-questions/30361607#30361607", "title": "Basic Ruby questions", "body": "<p>When you create <code>trans</code> using <code>Transaction.new</code> then references to <code>checking</code> and <code>savings</code> are stored inside the transaction object as <code>@account_a</code> and <code>@account_b</code></p>\n\n<p>The <code>transfer</code> method calls <code>debit</code> with <code>@account_a</code> and <code>credit</code> with <code>@account_b</code> so decreasing the balance of <code>a</code> by the amount and increasing the balance of <code>b</code> by the same amount, in effect transferring from checking to savings.</p>\n"}], "owner": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 30361540, "answer_count": 2, "score": -1, "last_activity_date": 1432163599, "creation_date": 1432161307, "last_edit_date": 1432163599, "question_id": 30361525, "link": "https://stackoverflow.com/questions/30361525/basic-ruby-questions", "title": "Basic Ruby questions", "body": "<p>My understanding is that <code>checking</code> and <code>savings</code> are saved under <code>account_a</code> and <code>account_b</code>. Can someone explain what's happening in the last two lines?</p>\n\n<pre><code>class Account\n  attr_accessor :balance\n  def initialize(balance)\n    @balance = balance\n  end\nend\n\nclass Transaction\n  def initialize(account_a,account_b)\n    @account_a = account_a\n    @account_b = account_b\n  end\n  private\n  def debit(account, amount)\n    account.balance -= amount\n  end\n  def credit(account,amount)\n    account.balance += amount\n  end\n  public\n  def transfer(amount)\n    debit(@account_a, amount)\n    credit(@account_b, amount)\n  end\nend\n\nsavings = Account.new (100)\nchecking = Account.new (200)\ntrans = Transaction.new(checking, savings)\ntrans.transfer(50)\n</code></pre>\n\n<p>How do I print the value of <code>trans</code>?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 2752, "user_id": 1238737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f12344b1086944a8189571259e2ede1?s=128&d=identicon&r=PG", "display_name": "snkashis", "link": "https://stackoverflow.com/users/1238737/snkashis"}, "is_accepted": false, "score": 1, "last_activity_date": 1432161340, "last_edit_date": 1432161340, "creation_date": 1432161188, "answer_id": 30361502, "question_id": 30361471, "link": "https://stackoverflow.com/questions/30361471/looping-through-array-and-add-to-model/30361502#30361502", "title": "Looping through array and add to model", "body": "<p>Your <code>i</code> is inside the loop's scope. Use <code>each_with_index { |x,i|</code> and drop your <code>i=0</code> and <code>i=i+1</code> statements.</p>\n"}, {"comments": [{"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1432162970, "post_id": 30361688, "comment_id": 48815124, "body": "This works, but a couple of points. You don&#39;t need an instance variable here, you just need a variable that is initialised outside of the loop e.g. <code>i = 0</code> would work fine. When you were initialising <code>i</code> inside your <code>each</code> loop then the variable was local to the block and so was being reset each time the block was called (leading to it being 0 each time.) All that said, an approach using <code>each_with_index</code> as suggested is much more idiomatic Ruby."}, {"owner": {"reputation": 1263, "user_id": 4459026, "user_type": "registered", "accept_rate": 34, "profile_image": "https://graph.facebook.com/1633800036/picture?type=large", "display_name": "TABISH KHAN", "link": "https://stackoverflow.com/users/4459026/tabish-khan"}, "reply_to_user": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1432168940, "post_id": 30361688, "comment_id": 48816759, "body": "would i use the each_with_index on the array or the model ? , as i have two collections which i need to loop through - or would i need two each_with_index calls ?"}, {"owner": {"reputation": 1263, "user_id": 4459026, "user_type": "registered", "accept_rate": 34, "profile_image": "https://graph.facebook.com/1633800036/picture?type=large", "display_name": "TABISH KHAN", "link": "https://stackoverflow.com/users/4459026/tabish-khan"}, "reply_to_user": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1432169079, "post_id": 30361688, "comment_id": 48816795, "body": "also ive tried initiallized i=0 outside that dosn&#39;t work... it gives me: NoMethodError: undefined method `[]&#39; for nil:NilClass"}], "tags": [], "owner": {"reputation": 1263, "user_id": 4459026, "user_type": "registered", "accept_rate": 34, "profile_image": "https://graph.facebook.com/1633800036/picture?type=large", "display_name": "TABISH KHAN", "link": "https://stackoverflow.com/users/4459026/tabish-khan"}, "is_accepted": false, "score": -1, "last_activity_date": 1432162131, "creation_date": 1432162131, "answer_id": 30361688, "question_id": 30361471, "link": "https://stackoverflow.com/questions/30361471/looping-through-array-and-add-to-model/30361688#30361688", "title": "Looping through array and add to model", "body": "<p>after playing around with it a bit more, here is what worked: ( i just used instance variables)</p>\n\n<pre><code>@i=0\n\nn.each {|x| x.update_attributes(numbera:array[@i][0], numberb:array[@i][1]);@i=@i+1;}\n</code></pre>\n"}], "owner": {"reputation": 1263, "user_id": 4459026, "user_type": "registered", "accept_rate": 34, "profile_image": "https://graph.facebook.com/1633800036/picture?type=large", "display_name": "TABISH KHAN", "link": "https://stackoverflow.com/users/4459026/tabish-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1432164061, "creation_date": 1432160979, "last_edit_date": 1432164061, "question_id": 30361471, "link": "https://stackoverflow.com/questions/30361471/looping-through-array-and-add-to-model", "title": "Looping through array and add to model", "body": "<p>I have an array:</p>\n\n<pre><code>array  = [ [1,2], [2,3], [33,33], [2l,2]  ]\n</code></pre>\n\n<p>and a model called numbers with columns <code>numbera</code> and <code>numberb</code>. I want to fill <code>numbera</code> with the first value in array and <code>number b</code> [sic] with the second value in array like this:</p>\n\n<pre><code>Numbers Table\nnumbera        numberb\n1              2\n2              3\n33             33\n21             2\n</code></pre>\n\n<p>How would I do this? This is what I am trying to do:</p>\n\n<pre><code>n = Number.all\nn.each do { |x| i=0; x.update_attributes(numbera:array[i][0], numberb:array[i][1]);i=i+1}\n</code></pre>\n\n<p>but it is not working. The <code>i</code> value does not increment in my solution. Help please.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "braintree"], "comments": [{"owner": {"reputation": 2752, "user_id": 1238737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f12344b1086944a8189571259e2ede1?s=128&d=identicon&r=PG", "display_name": "snkashis", "link": "https://stackoverflow.com/users/1238737/snkashis"}, "edited": false, "score": 1, "creation_date": 1432160970, "post_id": 30361443, "comment_id": 48814526, "body": "Their docs(<a href=\"https://developers.braintreepayments.com/ios+ruby/reference/response/customer#payment_methods\" rel=\"nofollow noreferrer\">developers.braintreepayments.com/ios+ruby/reference/res&zwnj;&#8203;ponse/&hellip;</a>) indicate that should work, so yes. What response do you get?"}, {"owner": {"reputation": 5794, "user_id": 850224, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/65b467905691337e208944fcb34c7f57?s=128&d=identicon&r=PG", "display_name": "Artem Kalinchuk", "link": "https://stackoverflow.com/users/850224/artem-kalinchuk"}, "reply_to_user": {"reputation": 2752, "user_id": 1238737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f12344b1086944a8189571259e2ede1?s=128&d=identicon&r=PG", "display_name": "snkashis", "link": "https://stackoverflow.com/users/1238737/snkashis"}, "edited": false, "score": 0, "creation_date": 1432161378, "post_id": 30361443, "comment_id": 48814653, "body": "Ah, I see it has a <code>default?</code> method. If I inspect the response, it doesn&#39;t give me that information. Thanks for the pointer."}, {"owner": {"reputation": 147647, "user_id": 500584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02cbc0104ac1794c222b2d3e11d325e4?s=128&d=identicon&r=PG", "display_name": "agf", "link": "https://stackoverflow.com/users/500584/agf"}, "edited": false, "score": 0, "creation_date": 1432239732, "post_id": 30361443, "comment_id": 48856301, "body": "I work at Braintree. Yep, <code>default?</code> is what you want. Since you&#39;ve figured it out, I suggest you post it as an answer (and let me know so I can upvote it)."}], "answers": [{"tags": [], "owner": {"reputation": 5794, "user_id": 850224, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/65b467905691337e208944fcb34c7f57?s=128&d=identicon&r=PG", "display_name": "Artem Kalinchuk", "link": "https://stackoverflow.com/users/850224/artem-kalinchuk"}, "is_accepted": false, "score": 1, "last_activity_date": 1432330489, "creation_date": 1432330489, "answer_id": 30406218, "question_id": 30361443, "link": "https://stackoverflow.com/questions/30361443/braintree-determine-if-payment-method-is-the-default-one/30406218#30406218", "title": "Braintree - Determine If Payment Method Is The Default One", "body": "<p>Thanks to @snkashis, I was able to figure it out. The following will determine if the current payment method is the default one:</p>\n\n<pre><code>payment_method.default?\n</code></pre>\n"}], "owner": {"reputation": 5794, "user_id": 850224, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/65b467905691337e208944fcb34c7f57?s=128&d=identicon&r=PG", "display_name": "Artem Kalinchuk", "link": "https://stackoverflow.com/users/850224/artem-kalinchuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1432330489, "creation_date": 1432160810, "question_id": 30361443, "link": "https://stackoverflow.com/questions/30361443/braintree-determine-if-payment-method-is-the-default-one", "title": "Braintree - Determine If Payment Method Is The Default One", "body": "<p>I'm currently using the Ruby <code>braintree</code> gem to get all the payment methods for a customer. Is there a way to determine if a payment method is the default payment method? Does Braintree provide that information through their API?</p>\n\n<pre><code>customer = Braintree::Customer.find(token)\npayment_methods = customer.payment_methods\n</code></pre>\n"}, {"tags": ["mysql", "ruby", "windows-7", "gem", "rubygems"], "comments": [{"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1432160734, "post_id": 30361280, "comment_id": 48814447, "body": "let&#39;s try: <code>install libmysqlclient-dev</code> after: <code>gem install mysql</code>"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1432160956, "post_id": 30361280, "comment_id": 48814520, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/19014117/ruby-mysql2-gem-installation-on-windows-7\">Ruby MYSQL2 gem installation on windows 7</a>"}, {"owner": {"reputation": 16590, "user_id": 640205, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UUIk1.jpg?s=128&g=1", "display_name": "MacGyver", "link": "https://stackoverflow.com/users/640205/macgyver"}, "reply_to_user": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1432161587, "post_id": 30361280, "comment_id": 48814712, "body": "@Alex - I chose &quot;Repair&quot; when I ran your command.  Then re-ran gem install mysql, and it gave the same errors."}, {"owner": {"reputation": 16590, "user_id": 640205, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UUIk1.jpg?s=128&g=1", "display_name": "MacGyver", "link": "https://stackoverflow.com/users/640205/macgyver"}, "reply_to_user": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1432245502, "post_id": 30361280, "comment_id": 48859317, "body": "trying to decipher this.  <a href=\"https://github.com/oneclick/rubyinstaller/issues/191\" rel=\"nofollow noreferrer\">github.com/oneclick/rubyinstaller/issues/191</a>"}, {"owner": {"reputation": 16590, "user_id": 640205, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UUIk1.jpg?s=128&g=1", "display_name": "MacGyver", "link": "https://stackoverflow.com/users/640205/macgyver"}, "reply_to_user": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1432245615, "post_id": 30361280, "comment_id": 48859361, "body": "this post was good.  I&#39;ll try installing x86 (32 bit) Ruby.  luislavena commented on Aug 30, 2013"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1432246045, "post_id": 30361280, "comment_id": 48859554, "body": "are you trying instruction from <a href=\"http://stackoverflow.com/questions/19014117/ruby-mysql2-gem-installation-on-windows-7\">this</a> question?"}, {"owner": {"reputation": 16590, "user_id": 640205, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UUIk1.jpg?s=128&g=1", "display_name": "MacGyver", "link": "https://stackoverflow.com/users/640205/macgyver"}, "reply_to_user": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1432246849, "post_id": 30361280, "comment_id": 48859894, "body": "yes, but see my edit.  It didn&#39;t work."}, {"owner": {"reputation": 16590, "user_id": 640205, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UUIk1.jpg?s=128&g=1", "display_name": "MacGyver", "link": "https://stackoverflow.com/users/640205/macgyver"}, "reply_to_user": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1432253420, "post_id": 30361280, "comment_id": 48861962, "body": "Alex - there must be a good reason why nobody installs the x64 bit version of Ruby.  See this video.  They also tell you NOT to choose the x64 bit version.  It&#39;s obviously broken, and nobody ever fixed it.  <a href=\"https://www.youtube.com/watch?v=ih4txNf7w_U\" rel=\"nofollow noreferrer\">youtube.com/watch?v=ih4txNf7w_U</a>"}], "answers": [{"comments": [{"owner": {"reputation": 16590, "user_id": 640205, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UUIk1.jpg?s=128&g=1", "display_name": "MacGyver", "link": "https://stackoverflow.com/users/640205/macgyver"}, "edited": false, "score": 0, "creation_date": 1432661709, "post_id": 30385474, "comment_id": 49010942, "body": "This is useful for those reading.  <a href=\"https://github.com/sparklemotion/nokogiri/issues/1256\" rel=\"nofollow noreferrer\">github.com/sparklemotion/nokogiri/issues/1256</a>"}], "tags": [], "owner": {"reputation": 16590, "user_id": 640205, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UUIk1.jpg?s=128&g=1", "display_name": "MacGyver", "link": "https://stackoverflow.com/users/640205/macgyver"}, "is_accepted": true, "score": 2, "last_activity_date": 1432668229, "last_edit_date": 1495542771, "creation_date": 1432247747, "answer_id": 30385474, "question_id": 30361280, "link": "https://stackoverflow.com/questions/30361280/mysql-ruby-gem-not-installing-on-windows-7/30385474#30385474", "title": "mysql ruby gem not installing on Windows 7", "body": "<blockquote>\n  <p>The 'mysql' and 'mysql2' packages/extensions/gems don't work with the\n  x64 bit version of Ruby on Windows 7 (or any 64 bit version of\n  Windows).  You need to install the x86 (32) bit version of Ruby for\n  them to work.</p>\n</blockquote>\n\n<p>So I repeated step 3 in my question, and installed version 1.9 instead taking the advice from my comment in my question (on issue 191) by luislavena on August 30, 2013.  This is the x86 (32 bit) version.  Got it from here.</p>\n\n<p><a href=\"http://rubyinstaller.org/downloads/\" rel=\"nofollow noreferrer\">http://rubyinstaller.org/downloads/</a></p>\n\n<p>Looks like the file's name is \"rubyinstaller-1.9.3-p551.exe\".</p>\n\n<p>Then completed step 4.  The Ruby developers must have fixed their scripts to modify the config.yml file automatically for the x86 version.  I didn't have to edit this time.</p>\n\n<p>Then for step 5, I installed this devkit exe, because the newer version of Ruby didn't have a dev kit that was x86.  </p>\n\n<p>For step 6, I placed into it's own folder.  It still extracts files in the exe root, not a folder of the exe root.  Then ran all the commands except for the last one.  It still threw the error.</p>\n\n<p>\"DevKit-tdm-32-4.5.2-20111229-1559-sfx.exe\"</p>\n\n<p>Then for step 7, I ran this.</p>\n\n<pre><code>gem install mysql\n</code></pre>\n\n<p>It installed the x86 version of mysql gem, because I can see the gem, by running this.  It's very shiny and looks expensive!</p>\n\n<pre><code>gem list\n</code></pre>\n\n<hr>\n\n<p><strong>5/26/2015 update:</strong></p>\n\n<blockquote>\n  <p>Latest version of Ruby when installed on Windows that allows you to\n  start the Rails server is 2.1.6.</p>\n</blockquote>\n\n<p>Starting the rails server didn't work by running \"rails s\".  I had to go back and uninstall old versions of Ruby.  See my answer here.  Ignore the other answers if you are on Windows.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/3663504/remove-older-versions-of-ruby-on-windows/30466540#30466540\">Remove older versions of Ruby (on Windows)</a></p>\n\n<p>The only stable version of Ruby on Windows that allows you to start the rails server is \"rubyinstaller-2.1.6.exe\".  \"rubyinstaller-2.2.2.exe\" throws the following error:</p>\n\n<pre><code>C:/row/Ruby22/lib/ruby/gems/2.2.0/gems/nokogiri-1.6.6.2-x86-mingw32/lib/nokogiri\n.rb:29:in `require': cannot load such file -- nokogiri/nokogiri (LoadError)\n        from C:/row/Ruby22/lib/ruby/gems/2.2.0/gems/nokogiri-1.6.6.2-x86-mingw32\n/lib/nokogiri.rb:29:in `rescue in &lt;top (required)&gt;'\n... \n... continued\n</code></pre>\n"}], "owner": {"reputation": 16590, "user_id": 640205, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/UUIk1.jpg?s=128&g=1", "display_name": "MacGyver", "link": "https://stackoverflow.com/users/640205/macgyver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1865, "favorite_count": 0, "accepted_answer_id": 30385474, "answer_count": 1, "score": 2, "last_activity_date": 1432668229, "creation_date": 1432159951, "last_edit_date": 1495541303, "question_id": 30361280, "link": "https://stackoverflow.com/questions/30361280/mysql-ruby-gem-not-installing-on-windows-7", "title": "mysql ruby gem not installing on Windows 7", "body": "<blockquote>\n  <p>Not a duplicate.  This question is mysql gem and the other question is mysql2 gem.  They do have the same answer though, but the other question's answer doesn't tell what the solution is explicitly.  The answer is hidden in the comments.  See yellow text of the answer for this question contains the solution.</p>\n</blockquote>\n\n<p>Below is an error I'm receiving when trying to install the mysql gem on Windows.</p>\n\n<pre><code>C:\\&gt;gem install mysql\nTemporarily enhancing PATH to include DevKit...\nBuilding native extensions.  This could take a while...\nERROR:  Error installing mysql:\n        ERROR: Failed to build gem native extension.\n\n    C:/Ruby22-x64/bin/ruby.exe -r ./siteconf20150520-7968-hbly9l.rb extconf.rb\nchecking for main() in -llibmysql... no\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n        --with-opt-dir\n        --without-opt-dir\n        --with-opt-include\n        --without-opt-include=${opt-dir}/include\n        --with-opt-lib\n        --without-opt-lib=${opt-dir}/lib\n        --with-make-prog\n        --without-make-prog\n        --srcdir=.\n        --curdir\n        --ruby=C:/Ruby22-x64/bin/$(RUBY_BASE_NAME)\n        --with-mysql-dir\n        --without-mysql-dir\n        --with-mysql-include\n        --without-mysql-include=${mysql-dir}/include\n        --with-mysql-lib\n        --without-mysql-lib=${mysql-dir}/lib\n        --with-libmysqllib\n        --without-libmysqllib\n\nextconf failed, exit code 1\n\nGem files will remain installed in C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/mysql-\n2.9.1 for inspection.\nResults logged to C:/Ruby22-x64/lib/ruby/gems/2.2.0/extensions/x64-mingw32/2.2.0\n/mysql-2.9.1/gem_make.out\n</code></pre>\n\n<h1>How did I get to this point?</h1>\n\n<ol>\n<li>Installed MySQL for Windows.</li>\n</ol>\n\n<p><a href=\"http://dev.mysql.com/downloads/windows/installer/\" rel=\"nofollow noreferrer\">http://dev.mysql.com/downloads/windows/installer/</a></p>\n\n<ol start=\"2\">\n<li>Installed Python for Windows.  This step probably has nothing to do with my error, but I'm including it since it is required for the build I'm deploying.</li>\n</ol>\n\n<p><a href=\"https://www.python.org/downloads/\" rel=\"nofollow noreferrer\">https://www.python.org/downloads/</a></p>\n\n<ol start=\"3\">\n<li>Installed Ruby for Windows.  Looks like I downloaded the \"rubyinstaller-2.2.2-x64.exe and installed that.</li>\n</ol>\n\n<p><a href=\"http://rubyinstaller.org/downloads/\" rel=\"nofollow noreferrer\">http://rubyinstaller.org/downloads/</a></p>\n\n<ol start=\"4\">\n<li>Installed Ruby Gems.  Looks like I downloaded and extracted \"rubygems-2.4.7.zip\".  </li>\n</ol>\n\n<p><a href=\"https://rubygems.org/pages/download\" rel=\"nofollow noreferrer\">https://rubygems.org/pages/download</a></p>\n\n<p>Then ran these commands from the Windows command prompt:</p>\n\n<pre><code>gem update --system\n</code></pre>\n\n<p>... was installed in C:/Ruby22-x64/bin/gem</p>\n\n<pre><code>gem install rubygems-update\n\nupdate_rubygems\n</code></pre>\n\n<p>... then cd {folder extracted zip to}</p>\n\n<pre><code>ruby setup.rb\n</code></pre>\n\n<ol start=\"5\">\n<li><p>Then I tried installing the mysql gem like so.  And got an error.</p>\n\n<p>C:>gem install mysql\nFetching: mysql-2.9.1.gem (100%)\nERROR:  Error installing mysql:\n        The 'mysql' native gem requires installed build tools.</p>\n\n<p>Please update your PATH to include build tools or download the DevKit\nfrom '<a href=\"http://rubyinstaller.org/downloads\" rel=\"nofollow noreferrer\">http://rubyinstaller.org/downloads</a>' and follow the instructions\nat '<a href=\"http://github.com/oneclick/rubyinstaller/wiki/Development-Kit\" rel=\"nofollow noreferrer\">http://github.com/oneclick/rubyinstaller/wiki/Development-Kit</a>'</p></li>\n<li><p>So I followed the instructions.  I went to that page (<a href=\"http://rubyinstaller.org/downloads\" rel=\"nofollow noreferrer\">http://rubyinstaller.org/downloads</a>).  Looks like I downloaded \"DevKit-mingw64-64-4.7.2-20130224-1432-sfx.exe\".  When I extracted the stupid extractor put the files in the same directory with everything else.  So make sure you make a new folder after downloading, and before extracting.</p></li>\n</ol>\n\n<p>Then I ran this command.</p>\n\n<pre><code>ruby dk.rb init\n</code></pre>\n\n<p>Then I ran this command, and got an error.  </p>\n\n<pre><code>ruby dk.rb install\n</code></pre>\n\n<p>I had to make sure the \"config.yml\" file pointed to the C:\\Ruby22-x64 folder on my machine for where Ruby was installed.  I removed the comment and change the path.  Then reran the command, and it worked.</p>\n\n<pre><code>ruby dk.rb install\n</code></pre>\n\n<p>Then ran this command.</p>\n\n<pre><code>gem install rdiscount --platform=ruby\n</code></pre>\n\n<ol start=\"7\">\n<li><p>Then tried to re-install the mysql gem.  And got the error in my question.  What a gem!  \"I got you jewels Betty, jewels!\"</p>\n\n<p>gem install mysql</p></li>\n</ol>\n\n<h1>EDIT 5/21/2015:</h1>\n\n<p>Per the question below, I'm getting a new error.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/19014117/ruby-mysql2-gem-installation-on-windows-7\">Ruby MYSQL2 gem installation on windows 7</a></p>\n\n<pre><code>C:\\&gt;gem install mysql2 --platform=ruby -- '--with-mysql-lib=\"C:\\mysql-connector\\\nlib\" --with-mysql-include=\"C:\\mysql-connector\\include\" --with-mysql-dir=\"C:\\mysq\nl-connector\"'\nTemporarily enhancing PATH to include DevKit...\nBuilding native extensions with: '--with-mysql-lib=\"C:\\mysql-connector\\lib\" --wi\nth-mysql-include=\"C:\\mysql-connector\\include\" --with-mysql-dir=\"C:\\mysql-connect\nor\"'\nThis could take a while...\nERROR:  Error installing mysql2:\n        ERROR: Failed to build gem native extension.\n\n    C:/Ruby22-x64/bin/ruby.exe -r ./siteconf20150521-10824-1plgdr8.rb extconf.rb\n --with-mysql-lib=\"C:\\mysql-connector\\lib\" --with-mysql-include=\"C:\\mysql-connec\ntor\\include\" --with-mysql-dir=\"C:\\mysql-connector\"\nchecking for ruby/thread.h... yes\nchecking for rb_thread_call_without_gvl() in ruby/thread.h... yes\nchecking for rb_thread_blocking_region()... no\nchecking for rb_wait_for_single_fd()... yes\nchecking for rb_hash_dup()... yes\nchecking for rb_intern3()... yes\n-----\nUsing --with-mysql-dir=C:\\mysql-connector\\include;C:\\mysql-connector\\include;C:\\\nmysql-connector\n-----\nchecking for mysql.h... yes\nchecking for errmsg.h... yes\nchecking for mysqld_error.h... yes\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n        --with-opt-dir\n        --without-opt-dir\n        --with-opt-include\n        --without-opt-include=${opt-dir}/include\n        --with-opt-lib\n        --without-opt-lib=${opt-dir}/lib\n        --with-make-prog\n        --without-make-prog\n        --srcdir=.\n        --curdir\n        --ruby=C:/Ruby22-x64/bin/$(RUBY_BASE_NAME)\n        --with-mysql-dir\n        --with-mysql-include=${mysql-dir}/include\n        --with-mysql-lib=${mysql-dir}/lib\nC:/Ruby22-x64/lib/ruby/2.2.0/rake/task_manager.rb:62:in `[]': Don't know how to\nbuild task 'C:/mysql-connector/lib;C:/mysql-connector/lib;C:/mysql-connector/lib\n/libmysql.lib' (RuntimeError)\n        from C:/Ruby22-x64/lib/ruby/2.2.0/rake/task.rb:57:in `lookup_prerequisit\ne'\n        from C:/Ruby22-x64/lib/ruby/2.2.0/rake/task.rb:53:in `block in prerequis\nite_tasks'\n        from C:/Ruby22-x64/lib/ruby/2.2.0/rake/task.rb:53:in `map'\n        from C:/Ruby22-x64/lib/ruby/2.2.0/rake/task.rb:53:in `prerequisite_tasks\n'\n        from C:/Ruby22-x64/lib/ruby/2.2.0/rake/task.rb:199:in `invoke_prerequisi\ntes'\n        from C:/Ruby22-x64/lib/ruby/2.2.0/rake/task.rb:178:in `block in invoke_w\nith_call_chain'\n        from C:/Ruby22-x64/lib/ruby/2.2.0/monitor.rb:211:in `mon_synchronize'\n        from C:/Ruby22-x64/lib/ruby/2.2.0/rake/task.rb:172:in `invoke_with_call_\nchain'\n        from C:/Ruby22-x64/lib/ruby/2.2.0/rake/task.rb:165:in `invoke'\n        from extconf.rb:117:in `&lt;main&gt;'\n\nextconf failed, exit code 1\n\nGem files will remain installed in C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/mysql2\n-0.3.18 for inspection.\nResults logged to C:/Ruby22-x64/lib/ruby/gems/2.2.0/extensions/x64-mingw32/2.2.0\n/mysql2-0.3.18/gem_make.out\n\nC:\\&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 319, "user_id": 1650158, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bfbcf7905facb8e600217ad097541564?s=128&d=identicon&r=PG", "display_name": "Bob Wassermann", "link": "https://stackoverflow.com/users/1650158/bob-wassermann"}, "edited": false, "score": 0, "creation_date": 1432190702, "post_id": 30361601, "comment_id": 48823695, "body": "Nope, prints all SVGs in every <code>div</code>"}, {"owner": {"reputation": 2752, "user_id": 1238737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f12344b1086944a8189571259e2ede1?s=128&d=identicon&r=PG", "display_name": "snkashis", "link": "https://stackoverflow.com/users/1238737/snkashis"}, "reply_to_user": {"reputation": 319, "user_id": 1650158, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bfbcf7905facb8e600217ad097541564?s=128&d=identicon&r=PG", "display_name": "Bob Wassermann", "link": "https://stackoverflow.com/users/1650158/bob-wassermann"}, "edited": false, "score": 0, "creation_date": 1432308314, "post_id": 30361601, "comment_id": 48888538, "body": "and sorry - can you show us the entire ruby code that produces this as well?"}], "tags": [], "owner": {"reputation": 2752, "user_id": 1238737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f12344b1086944a8189571259e2ede1?s=128&d=identicon&r=PG", "display_name": "snkashis", "link": "https://stackoverflow.com/users/1238737/snkashis"}, "is_accepted": false, "score": 0, "last_activity_date": 1432161683, "creation_date": 1432161683, "answer_id": 30361601, "question_id": 30361174, "link": "https://stackoverflow.com/questions/30361174/rails-list-all-images/30361601#30361601", "title": "Rails list all images", "body": "<p>Wouldn't you need to choose which index of the <code>.split</code> you want interpolated into your string,and reverse the order of the parts as well? Like <code>\"styles/#{s}/#{image.split('/')[-1]}\"</code>?</p>\n"}], "owner": {"reputation": 319, "user_id": 1650158, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/bfbcf7905facb8e600217ad097541564?s=128&d=identicon&r=PG", "display_name": "Bob Wassermann", "link": "https://stackoverflow.com/users/1650158/bob-wassermann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 153, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432161683, "creation_date": 1432159399, "question_id": 30361174, "link": "https://stackoverflow.com/questions/30361174/rails-list-all-images", "title": "Rails list all images", "body": "<p>I want to list all images in a certain folder, based on the iteration.</p>\n\n<p>In my controller I declared something similar to this</p>\n\n<pre><code>@styles = ['one', 'two', 'three']\n</code></pre>\n\n<p>And render it in the view with</p>\n\n<pre><code>&lt;% @styles.each do |s| %&gt;&lt;div&gt;\n  &lt;%= s %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Each <code>@styles</code> got its own directory, for instance: <code>app/assets/images/styles/one/</code> with several SVG files in it.</p>\n\n<p>Now I want to render all SVG files in each folder inside a separate <code>div</code>. Something like</p>\n\n<pre><code>@stylesExample = Dir.glob('app/assets/images/styles/**/*.svg')\n</code></pre>\n\n<p>with the view</p>\n\n<pre><code>&lt;% @stylesExample.each do |image| %&gt;\n  &lt;%= image_tag \"#{image.split('/')}/#{s}/\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This obviously doesn't work. What would be the best way to pass in a variable in a controller action to list all the SVGs?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "unirest"], "answers": [{"tags": [], "owner": {"reputation": 482, "user_id": 5100490, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b24f72d3931d92a25e7f9c457bd70613?s=128&d=identicon&r=PG", "display_name": "BamBam22", "link": "https://stackoverflow.com/users/5100490/bambam22"}, "is_accepted": true, "score": 2, "last_activity_date": 1452194672, "creation_date": 1452194672, "answer_id": 34663484, "question_id": 30361001, "link": "https://stackoverflow.com/questions/30361001/passing-complex-object-to-rails-action-via-unirest/34663484#34663484", "title": "Passing complex object to rails action via Unirest", "body": "<p>When working with hashes the second key value will overwrite the first. <code>foo: 2</code> gets read last and is the last assignment for foo. If you want the first item to appear you should rename it to <code>[{\"foo1\":\"1\"}, {\"foo2\": 2}]</code></p>\n"}], "owner": {"reputation": 7054, "user_id": 88696, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/53e20180f0c292fcb589f77f738ed402?s=128&d=identicon&r=PG", "display_name": "Jesse Aldridge", "link": "https://stackoverflow.com/users/88696/jesse-aldridge"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 424, "favorite_count": 0, "accepted_answer_id": 34663484, "answer_count": 1, "score": 0, "last_activity_date": 1452194672, "creation_date": 1432158600, "question_id": 30361001, "link": "https://stackoverflow.com/questions/30361001/passing-complex-object-to-rails-action-via-unirest", "title": "Passing complex object to rails action via Unirest", "body": "<p>I have a simple controller:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  def test_action\n    render plain: \"OK\"\n  end\nend\n</code></pre>\n\n<p>And I'm posting to the action via a separate ruby file using Unirest:</p>\n\n<pre><code>require 'unirest'\n\nresp = Unirest.post \"localhost:3000/test_action.json\", \n                    headers:{ \"Accept\" =&gt; \"application/json\" }, \n                    parameters:{ foo: 1, my_list: [{foo: 1}, {foo: 2}] }\n\nputs resp.body\n</code></pre>\n\n<p>When I run this I see the following in my rails console:</p>\n\n<pre><code>Parameters: {\"foo\"=&gt;\"1\", \"my_list\"=&gt;{\"foo\"=&gt;\"2\"}}\n</code></pre>\n\n<p>Why is the first item in my_list missing?  How can I get it to appear?  Should I be using something other than Unirest for this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "rvm", "gnupg"], "comments": [{"owner": {"reputation": 17880, "user_id": 2155313, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fp9tO.jpg?s=128&g=1", "display_name": "errata", "link": "https://stackoverflow.com/users/2155313/errata"}, "edited": false, "score": 0, "creation_date": 1432165511, "post_id": 30360977, "comment_id": 48815908, "body": "have you seen this: <a href=\"https://www.gnupg.org/gph/en/manual/x334.html\" rel=\"nofollow noreferrer\">gnupg.org/gph/en/manual/x334.html</a>"}, {"owner": {"reputation": 403, "user_id": 1376020, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1e7c424a12100b9aa571e5dbaf4293bc?s=128&d=identicon&r=PG", "display_name": "CarlGammaSagan", "link": "https://stackoverflow.com/users/1376020/carlgammasagan"}, "reply_to_user": {"reputation": 17880, "user_id": 2155313, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fp9tO.jpg?s=128&g=1", "display_name": "errata", "link": "https://stackoverflow.com/users/2155313/errata"}, "edited": false, "score": 0, "creation_date": 1432236057, "post_id": 30360977, "comment_id": 48854275, "body": "Thanks. Good technical background reading for people who have time, haha."}], "answers": [{"tags": [], "owner": {"reputation": 17880, "user_id": 2155313, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fp9tO.jpg?s=128&g=1", "display_name": "errata", "link": "https://stackoverflow.com/users/2155313/errata"}, "is_accepted": false, "score": 1, "last_activity_date": 1432159105, "creation_date": 1432159105, "answer_id": 30361113, "question_id": 30360977, "link": "https://stackoverflow.com/questions/30360977/rvm-installation-gpg-key-warning/30361113#30361113", "title": "rvm installation gpg key warning", "body": "<p>It's fine. I don't <em>think</em> you actually need to use SSL anyway but if you do so as per the instructions on the rvm page, make sure you add the key first.</p>\n\n<pre><code>gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3\n\n\\curl -sSL https://get.rvm.io | bash -s stable\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 403, "user_id": 1376020, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1e7c424a12100b9aa571e5dbaf4293bc?s=128&d=identicon&r=PG", "display_name": "CarlGammaSagan", "link": "https://stackoverflow.com/users/1376020/carlgammasagan"}, "edited": false, "score": 0, "creation_date": 1432235928, "post_id": 30368847, "comment_id": 48854205, "body": "Thanks. The key (409B 6B17 96C2 7546 2A17 0311 3804 BB82 D39D C0E3) matches the website so I guess there is nothing to worry about."}], "tags": [], "owner": {"reputation": 33721, "user_id": 695343, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KX04R.jpg?s=128&g=1", "display_name": "Jens Erat", "link": "https://stackoverflow.com/users/695343/jens-erat"}, "is_accepted": true, "score": 2, "last_activity_date": 1432198281, "creation_date": 1432198281, "answer_id": 30368847, "question_id": 30360977, "link": "https://stackoverflow.com/questions/30360977/rvm-installation-gpg-key-warning/30368847#30368847", "title": "rvm installation gpg key warning", "body": "<p>GnuPG does more than verifying a hash sum, it can also help you at verifying who issued a signature.</p>\n\n<p>This line tells you, that the signature is valid (file is untampered) and was made using a certain key.</p>\n\n<pre><code>gpg: Good signature from \"Michal Papis (RVM signing) &lt;mpapis@gmail.com&gt;\"\n</code></pre>\n\n<p>Simply having a key locally does not help you at deciding whom it really belongs to:</p>\n\n<pre><code>gpg: WARNING: This key is not certified with a trusted signature!\ngpg:          There is no indication that the signature belongs to the owner.\nPrimary key fingerprint: 409B 6B17 96C2 7546 2A17  0311 3804 BB82 D39D C0E3\n</code></pre>\n\n<p>GnuPG requires a <strong>trust path</strong> from a key owned by you to the key you want to validate, similarly to the chain of trust for X.509 (as used in HTTPS ...).</p>\n\n<p>A basic approach to verifying the key manually would be comparing its fingerprint against the one provided on the TLS-secured download page (<a href=\"https://rvm.io/rvm/install\" rel=\"nofollow\">https://rvm.io/rvm/install</a>), which hopefully are equal (don't care whether there are spaces or not in-between, that's just for readability). This way, you'll have to trust the web page, but not care for the rather complex OpenPGP trust idea. Using the OpenPGP web of trust to validate key ownership, you can probably be <em>more certain</em> of the issuer, you have to decide on your own how much effort you put into the validation.</p>\n"}], "owner": {"reputation": 403, "user_id": 1376020, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1e7c424a12100b9aa571e5dbaf4293bc?s=128&d=identicon&r=PG", "display_name": "CarlGammaSagan", "link": "https://stackoverflow.com/users/1376020/carlgammasagan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1147, "favorite_count": 0, "accepted_answer_id": 30368847, "answer_count": 2, "score": 2, "last_activity_date": 1432198281, "creation_date": 1432158524, "question_id": 30360977, "link": "https://stackoverflow.com/questions/30360977/rvm-installation-gpg-key-warning", "title": "rvm installation gpg key warning", "body": "<p>To install rvm, I use the command provided on the rvm website (<a href=\"https://rvm.io/rvm/install\" rel=\"nofollow\">https://rvm.io/rvm/install</a>) to install stable versions of rvm:</p>\n\n<pre><code>\\curl -sSL https://get.rvm.io | bash -s stable --ruby\n</code></pre>\n\n<p>I am a little concerned about the warning I get from gpg: \"There is no indication that the signature belongs to the owner.\" Is this gpg just being a bit too picky? The primary key fingerprint (409B 6B17 96C2 7546 2A17  0311 3804 BB82 D39D C0E3) matches Michal Papis so that is re-assuring. </p>\n\n<p>But then why does gpg warn that \"This key is not certified with a trusted signature! There is no indication that the signature belongs to the owner\"? This reminds me of Certificate Authorities (CAs) and not paying a CA, but doesn't gpg work differently?</p>\n\n<p>Output during installation:</p>\n\n<pre><code>Downloading https://github.com/rvm/rvm/archive/1.26.11.tar.gz\nDownloading https://github.com/rvm/rvm/releases/download/1.26.11/1.26.11.tar.gz.asc\ngpg: Signature made Mon Mar 30 14:52:13 2015 PDT using RSA key ID BF04FF17\ngpg: Good signature from \"Michal Papis (RVM signing) &lt;mpapis@gmail.com&gt;\"\ngpg: WARNING: This key is not certified with a trusted signature!\ngpg:          There is no indication that the signature belongs to the owner.\nPrimary key fingerprint: 409B 6B17 96C2 7546 2A17  0311 3804 BB82 D39D C0E3\nSubkey fingerprint: 62C9 E5F4 DA30 0D94 AC36  166B E206 C29F BF04 FF17\nGPG verified '/Users/MyHome/.rvm/archives/rvm-1.26.11.tgz'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "associations", "strong-parameters"], "comments": [{"owner": {"reputation": 8545, "user_id": 2856441, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ca44efe87577e6c75bc508b38131072f?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Kennedy", "link": "https://stackoverflow.com/users/2856441/joe-kennedy"}, "edited": false, "score": 0, "creation_date": 1432157723, "post_id": 30360779, "comment_id": 48813317, "body": "Can you add your <code>User</code>, <code>UserEntity</code>, and <code>Entity</code> models to your question?"}, {"owner": {"reputation": 15480, "user_id": 229688, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FVcL0.jpg?s=128&g=1", "display_name": "Arnaud", "link": "https://stackoverflow.com/users/229688/arnaud"}, "edited": false, "score": 0, "creation_date": 1432157805, "post_id": 30360779, "comment_id": 48813354, "body": "+ how do you define @user_entity? You have a typo &quot;eser_entity&quot; above, I guess it&#39;s just here and not in your actual code?"}, {"owner": {"reputation": 10005, "user_id": 724036, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/6VXVJ.jpg?s=128&g=1", "display_name": "zishe", "link": "https://stackoverflow.com/users/724036/zishe"}, "edited": false, "score": 0, "creation_date": 1432157857, "post_id": 30360779, "comment_id": 48813373, "body": "Mistype: <code>@eser_entity</code> instead <code>@user_entity</code>"}], "answers": [{"comments": [{"owner": {"reputation": 833, "user_id": 3915892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/CMVW5.jpg?s=128&g=1", "display_name": "DanielsV", "link": "https://stackoverflow.com/users/3915892/danielsv"}, "edited": false, "score": 0, "creation_date": 1432158936, "post_id": 30360877, "comment_id": 48813816, "body": "Also, it is just a sample. in reality i use one work, so it won&#39;t be the solution. here is the tutorial i&#39;m stuck at <a href=\"http://www.gitmatt.com/posts/5\" rel=\"nofollow noreferrer\">gitmatt.com/posts/5</a> problem is i can&#39;t use <code>attr_accessible</code> with rails 4. those strong params are making this error. At least i think so."}], "tags": [], "owner": {"reputation": 31, "user_id": 3426657, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hplaq.jpg?s=128&g=1", "display_name": "garrettqmartin8", "link": "https://stackoverflow.com/users/3426657/garrettqmartin8"}, "is_accepted": false, "score": 0, "last_activity_date": 1432158514, "last_edit_date": 1432158514, "creation_date": 1432157939, "answer_id": 30360877, "question_id": 30360779, "link": "https://stackoverflow.com/questions/30360779/has-many-through-rails-4-instance-variable-not-working/30360877#30360877", "title": "Has_many :through Rails 4 Instance variable not working", "body": "<p>It looks like you misspelled <code>&lt;%= @eser_entity.user.name %&gt;</code></p>\n\n<p>It should be <code>&lt;%= @user_entity.user.name %&gt;</code></p>\n\n<p><strong>Edit:</strong></p>\n\n<p>In /models/user_entity.rb you used <code>class User_entity</code> for your model's class name. Class names are expect to be CamelCased:</p>\n\n<pre><code>class UserEntity &lt; ActiveRecord::Base\n  ...\nend\n</code></pre>\n"}], "owner": {"reputation": 833, "user_id": 3915892, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/CMVW5.jpg?s=128&g=1", "display_name": "DanielsV", "link": "https://stackoverflow.com/users/3915892/danielsv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1432158514, "creation_date": 1432157556, "last_edit_date": 1432158172, "question_id": 30360779, "link": "https://stackoverflow.com/questions/30360779/has-many-through-rails-4-instance-variable-not-working", "title": "Has_many :through Rails 4 Instance variable not working", "body": "<p>I have problem with strong params in <code>Ruby on Rails 4</code>. \nI have 3 models <code>Entity</code>, <code>user</code>, <code>user_entity</code>.</p>\n\n<p><code>User_entity</code> ties together <code>entity</code> and <code>user</code> with <code>has_many :through</code> association. </p>\n\n<p>Here is code that works perfectly!</p>\n\n<p>/views/user_entity/show.html.erb</p>\n\n<pre><code>&lt;p&gt;\n  &lt;strong&gt;User:&lt;/strong&gt;\n  &lt;%= @user_entity.user_id %&gt;\n&lt;/p&gt;\n</code></pre>\n\n<p>And here when I modify it it doesn't!</p>\n\n<pre><code>&lt;p&gt;\n  &lt;strong&gt;User:&lt;/strong&gt;\n  &lt;%= @user_entity.user.name %&gt;\n&lt;/p&gt;\n</code></pre>\n\n<p>Error I get is this:</p>\n\n<blockquote>\n  <p>undefined method `user' for # Extracted\n  source (around line #433):<br>\n        else\n          match = match_attribute_method?(method.to_s)\n          match ? attribute_missing(match, *args, &amp;block) : super\n        end\n      end</p>\n</blockquote>\n\n<p>I think it is because of <code>strong params</code> not allowing me to access data from <code>user</code> controller, but i have no idea how to whitelist that data to <code>user_entity</code> model.</p>\n\n<p>Please help.</p>\n\n<p>/models/entity.rb</p>\n\n<pre><code>class Entity &lt; ActiveRecord::Base\n  accepts_nested_attributes_for :user_entities\n  has_many :user_entities\n  has_many :users, :through =&gt; :user_entities\nend\n</code></pre>\n\n<p>/models/user.rb</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  accepts_nested_attributes_for :user_entities\n  has_many :user_entities\n  has_many :entities, :through =&gt; :user_entities\nend\n</code></pre>\n\n<p>/models/user_entity.rb</p>\n\n<pre><code>class User_entity &lt; ActiveRecord::Base\n  belongs_to :entities\n  belongs_to :users\nend\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1432157323, "post_id": 30360688, "comment_id": 48813134, "body": "&quot;Forrest&quot; or &quot;forest&quot;? How did you create your <code>OakTree</code> record? Did you save it? You may only have the <code>id</code> populated during the <code>build</code> call, it&#39;s part of the create scope."}, {"owner": {"reputation": 2105, "user_id": 1500195, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Tc5kv.png?s=128&g=1", "display_name": "6ft Dan", "link": "https://stackoverflow.com/users/1500195/6ft-dan"}, "edited": false, "score": 0, "creation_date": 1432167359, "post_id": 30360688, "comment_id": 48816374, "body": "What data type is height expected to be?  Perhaps you should be using a string &quot;tall&quot; instead of :tall.  Also you haven&#39;t shown it here but the forest instance must exist before you build the oak_trees on it."}, {"owner": {"reputation": 14303, "user_id": 29493, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7bb15b284510700d32de5a68f190c6dc?s=128&d=identicon&r=PG", "display_name": "Tim Scott", "link": "https://stackoverflow.com/users/29493/tim-scott"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1432171328, "post_id": 30360688, "comment_id": 48817391, "body": "@tadman I&#39;m not sure what you&#39;re asking. The <code>build</code> method instantiates an OakTree and adds it to the <code>oak_trees</code> collection of the forrest instance. It should also set the <code>forrest</code> of the new OakTree to that same instance of forrest, completing the bi-directional association in memory."}, {"owner": {"reputation": 14303, "user_id": 29493, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7bb15b284510700d32de5a68f190c6dc?s=128&d=identicon&r=PG", "display_name": "Tim Scott", "link": "https://stackoverflow.com/users/29493/tim-scott"}, "reply_to_user": {"reputation": 2105, "user_id": 1500195, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/Tc5kv.png?s=128&g=1", "display_name": "6ft Dan", "link": "https://stackoverflow.com/users/1500195/6ft-dan"}, "edited": false, "score": 0, "creation_date": 1432171516, "post_id": 30360688, "comment_id": 48817434, "body": "@6ft Dan The type of height is not relevant here. The problem is that the forrest of the new oak tree is nil. Yes, in my code example, <code>forrest</code> is not nil. It is a persisted instance. I updated the question to make that clear."}], "answers": [{"comments": [{"owner": {"reputation": 14303, "user_id": 29493, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7bb15b284510700d32de5a68f190c6dc?s=128&d=identicon&r=PG", "display_name": "Tim Scott", "link": "https://stackoverflow.com/users/29493/tim-scott"}, "edited": false, "score": 0, "creation_date": 1432159161, "post_id": 30360768, "comment_id": 48813912, "body": "Although these might &quot;work&quot; the system would remain broken because <code>#build</code> and <code>#create</code> would not behave as expected. I prefer not to leave a huge landmine like this for future developers. On a more practical note, I would have to litter my tests with this special handing in dozens of places replacing simple factory calls."}, {"owner": {"reputation": 5286, "user_id": 455770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mMHwz.jpg?s=128&g=1", "display_name": "Rots", "link": "https://stackoverflow.com/users/455770/rots"}, "edited": false, "score": 0, "creation_date": 1432161272, "post_id": 30360768, "comment_id": 48814620, "body": "I believe this works because <code>height=</code> is not an attribute, it&#39;s a method. <code>#build</code> expects attributes."}, {"owner": {"reputation": 14303, "user_id": 29493, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7bb15b284510700d32de5a68f190c6dc?s=128&d=identicon&r=PG", "display_name": "Tim Scott", "link": "https://stackoverflow.com/users/29493/tim-scott"}, "edited": false, "score": 0, "creation_date": 1432171095, "post_id": 30360768, "comment_id": 48817332, "body": "When you create get and set methods named the same as an attribute, ActiveRecord uses those instead of <code>write_attribute</code> and <code>read_attribute</code>. <a href=\"http://stackoverflow.com/a/10465235/29493\">stackoverflow.com/a/10465235/29493</a>"}, {"owner": {"reputation": 5286, "user_id": 455770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mMHwz.jpg?s=128&g=1", "display_name": "Rots", "link": "https://stackoverflow.com/users/455770/rots"}, "reply_to_user": {"reputation": 14303, "user_id": 29493, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7bb15b284510700d32de5a68f190c6dc?s=128&d=identicon&r=PG", "display_name": "Tim Scott", "link": "https://stackoverflow.com/users/29493/tim-scott"}, "edited": false, "score": 0, "creation_date": 1432197104, "post_id": 30360768, "comment_id": 48827423, "body": "@TimScott Yes but you must define the attribute, which you haven&#39;t done. eg: <code>attr_accessible: :height </code>. That allows mass assignment of attributes: <a href=\"http://stackoverflow.com/questions/3136420/difference-between-attr-accessor-and-attr-accessible\" title=\"difference between attr accessor and attr accessible\">stackoverflow.com/questions/3136420/&hellip;</a>"}, {"owner": {"reputation": 14303, "user_id": 29493, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7bb15b284510700d32de5a68f190c6dc?s=128&d=identicon&r=PG", "display_name": "Tim Scott", "link": "https://stackoverflow.com/users/29493/tim-scott"}, "reply_to_user": {"reputation": 5286, "user_id": 455770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mMHwz.jpg?s=128&g=1", "display_name": "Rots", "link": "https://stackoverflow.com/users/455770/rots"}, "edited": false, "score": 0, "creation_date": 1432217920, "post_id": 30360768, "comment_id": 48842379, "body": "@Rots Sorry, yes, it&#39;s accessible. I omitted that for simplicity since setting the the attribute is not the issue but access to forrest while setting it."}, {"owner": {"reputation": 20658, "user_id": 584713, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d43dc36474bd0a252ed907d46511ded7?s=128&d=identicon&r=PG", "display_name": "Robin", "link": "https://stackoverflow.com/users/584713/robin"}, "reply_to_user": {"reputation": 5286, "user_id": 455770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mMHwz.jpg?s=128&g=1", "display_name": "Rots", "link": "https://stackoverflow.com/users/455770/rots"}, "edited": false, "score": 0, "creation_date": 1432242120, "post_id": 30360768, "comment_id": 48857688, "body": "@Rots but in rails 4, the concern of mass assignment has been moved to the controller away from the model, so attr_accessible isn&#39;t needed."}], "tags": [], "owner": {"reputation": 20658, "user_id": 584713, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d43dc36474bd0a252ed907d46511ded7?s=128&d=identicon&r=PG", "display_name": "Robin", "link": "https://stackoverflow.com/users/584713/robin"}, "is_accepted": false, "score": 0, "last_activity_date": 1432157513, "creation_date": 1432157513, "answer_id": 30360768, "question_id": 30360688, "link": "https://stackoverflow.com/questions/30360688/parent-is-nil-in-association-build/30360768#30360768", "title": "Parent is nil in association.build", "body": "<p>It's a guess, but maybe rails sets the attributes you pass before setting the parent.</p>\n\n<p>So, does this work?</p>\n\n<pre><code>oak = forrest.oak_trees.build\noak.height = :tall\n</code></pre>\n\n<p>Also try the version with a block</p>\n\n<pre><code>forrest.oak_trees.build { |o| o.height = :tall }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 14303, "user_id": 29493, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7bb15b284510700d32de5a68f190c6dc?s=128&d=identicon&r=PG", "display_name": "Tim Scott", "link": "https://stackoverflow.com/users/29493/tim-scott"}, "edited": false, "score": 0, "creation_date": 1432242926, "post_id": 30378141, "comment_id": 48858086, "body": "Sorry, my example was wrong. The <code>forrest</code> is indeed persisted, and yet it does not work. I have updated my question."}, {"owner": {"reputation": 14303, "user_id": 29493, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7bb15b284510700d32de5a68f190c6dc?s=128&d=identicon&r=PG", "display_name": "Tim Scott", "link": "https://stackoverflow.com/users/29493/tim-scott"}, "edited": false, "score": 0, "creation_date": 1432243645, "post_id": 30378141, "comment_id": 48858438, "body": "The workaround you suggest does work. That is, <code>forrest</code> is populated in the <code>height</code> setter. However, if you move <code>forrest</code> after <code>height</code> in the parameter list, then <code>forrest</code> is nil. Devs don&#39;t (and shouldn&#39;t) expect order of parameters to matter, so I&#39;m not sure I can leave behind such a nasty landmine."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 14303, "user_id": 29493, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7bb15b284510700d32de5a68f190c6dc?s=128&d=identicon&r=PG", "display_name": "Tim Scott", "link": "https://stackoverflow.com/users/29493/tim-scott"}, "edited": false, "score": 0, "creation_date": 1432244096, "post_id": 30378141, "comment_id": 48858651, "body": "@TimScott The options are applied in the order they&#39;re given, so if you need to defer something, you&#39;ll need to have a hook like <code>before_validation</code> or <code>before_save</code> which triggers the desired behaviour."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1432222202, "creation_date": 1432222202, "answer_id": 30378141, "question_id": 30360688, "link": "https://stackoverflow.com/questions/30360688/parent-is-nil-in-association-build/30378141#30378141", "title": "Parent is nil in association.build", "body": "<p>Unsaved models are not accessible in this manner. The relationship between them isn't formalized, the associated model doesn't exist yet.</p>\n\n<p>ActiveRecord is usually pretty good about filling in the gaps, but the way the information on creation scope is passed down is via ID, not object, and as your Forest record isn't saved, it doesn't exist yet.</p>\n\n<p>The way ActiveRecord handles this is by keeping unsaved records in the <code>oak_trees</code> cache structure. On save they're baked out properly.</p>\n\n<p>This will work:</p>\n\n<pre><code>forest = Forest.create\ntree = forest.oak_trees.build(height: tall)\n</code></pre>\n\n<p>If you need access prior to saving you might have to hack around a lot, or you can create them this way:</p>\n\n<pre><code>forest = Forest.new\ntree = OakTree.new(forest: forest, height: tall)\n</code></pre>\n"}], "owner": {"reputation": 14303, "user_id": 29493, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7bb15b284510700d32de5a68f190c6dc?s=128&d=identicon&r=PG", "display_name": "Tim Scott", "link": "https://stackoverflow.com/users/29493/tim-scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1432242860, "creation_date": 1432157191, "last_edit_date": 1432242860, "question_id": 30360688, "link": "https://stackoverflow.com/questions/30360688/parent-is-nil-in-association-build", "title": "Parent is nil in association.build", "body": "<p>Model are like:</p>\n\n<pre><code>class Forrest &lt; ActiveRecord::Base\n  has_many :trees, inverse_of: :forrest\n  has_many :oak_trees, inverse_of: :forrest\n  has_many :palm_trees, inverse_of: :forrest\nend\n\nclass Tree &lt; ActiveRecord::Base\n  belongs_to :forrest, inverse_of: :trees\nend\n\nclass OakTree &lt; Tree\n  def height=(value)\n    # Stuff\n  end\nend\n</code></pre>\n\n<p>Then this:</p>\n\n<pre><code>forrest = Forrest.create\nforrest.oak_trees.build(height: :tall)\n</code></pre>\n\n<p>In the <code>height=</code> method I need <code>forrest</code>, but it's nil. I assume there must be some way to correct this. </p>\n\n<p>I tried moving the <code>belongs_to</code> from <code>Tree</code> to the subclasses and adding like <code>inverse_of: oak_trees</code>.</p>\n\n<p>But I cannot figure out how to make it work.</p>\n"}, {"tags": ["ruby", "parsing", "bnf", "treetop"], "answers": [{"comments": [{"owner": {"reputation": 1048, "user_id": 144345, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a9c8035dc335d61235e2aa025924c903?s=128&d=identicon&r=PG", "display_name": "soulnafein", "link": "https://stackoverflow.com/users/144345/soulnafein"}, "edited": false, "score": 0, "creation_date": 1432246644, "post_id": 30372922, "comment_id": 48859812, "body": "Clifford, I believe you&#39;ve put me on the right track but I think it would be useful if you could write all the rules to make that code parse. I will then accept your answer. I&#39;ve edited the question to fix the mistake you&#39;ve pointed out."}, {"owner": {"reputation": 2278, "user_id": 1772828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7831a9963c2207377c46468f6e797a?s=128&d=identicon&r=PG", "display_name": "cliffordheath", "link": "https://stackoverflow.com/users/1772828/cliffordheath"}, "reply_to_user": {"reputation": 1048, "user_id": 144345, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a9c8035dc335d61235e2aa025924c903?s=128&d=identicon&r=PG", "display_name": "soulnafein", "link": "https://stackoverflow.com/users/144345/soulnafein"}, "edited": false, "score": 0, "creation_date": 1432254578, "post_id": 30372922, "comment_id": 48862307, "body": "Note that I didn&#39;t address your double-quote situation because you didn&#39;t define that part of the problem very well. But this should get you going, it&#39;s easy to add quoting."}, {"owner": {"reputation": 1048, "user_id": 144345, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a9c8035dc335d61235e2aa025924c903?s=128&d=identicon&r=PG", "display_name": "soulnafein", "link": "https://stackoverflow.com/users/144345/soulnafein"}, "edited": false, "score": 0, "creation_date": 1432411959, "post_id": 30372922, "comment_id": 48920192, "body": "Thanks Clifford. What are var: and value: ?"}, {"owner": {"reputation": 2278, "user_id": 1772828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7831a9963c2207377c46468f6e797a?s=128&d=identicon&r=PG", "display_name": "cliffordheath", "link": "https://stackoverflow.com/users/1772828/cliffordheath"}, "reply_to_user": {"reputation": 1048, "user_id": 144345, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a9c8035dc335d61235e2aa025924c903?s=128&d=identicon&r=PG", "display_name": "soulnafein", "link": "https://stackoverflow.com/users/144345/soulnafein"}, "edited": false, "score": 0, "creation_date": 1432502703, "post_id": 30372922, "comment_id": 48941809, "body": "They&#39;re labels, Documented here: <a href=\"http://cjheath.github.io/treetop/semantic_interpretation.html\" rel=\"nofollow noreferrer\">cjheath.github.io/treetop/semantic_interpretation.html</a>"}], "tags": [], "owner": {"reputation": 2278, "user_id": 1772828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7831a9963c2207377c46468f6e797a?s=128&d=identicon&r=PG", "display_name": "cliffordheath", "link": "https://stackoverflow.com/users/1772828/cliffordheath"}, "is_accepted": true, "score": 1, "last_activity_date": 1432254269, "last_edit_date": 1432254269, "creation_date": 1432209050, "answer_id": 30372922, "question_id": 30360633, "link": "https://stackoverflow.com/questions/30360633/treetop-grammar-line-continuation/30372922#30372922", "title": "Treetop grammar line continuation", "body": "<p>If you define the sequence \"_\\n\" as if it was a single white-space character, and ensure that you test for that before you accept an end-of-line, your VB-style line continuation should just drop out. In VB, the newline \"\\n\" is not white-space per se, but is a distinct statement termination character. You probably also need to deal with carriage returns, depending on your input character processing rules. I would write the white-space rule like this:</p>\n\n<pre><code>rule white\n  ( [ \\t] / \"_\\n\" \"\\r\"? )+\nend\n</code></pre>\n\n<p>Then your statement rule looks like this:</p>\n\n<pre><code>rule variable_assignment\n  white* var:([[:alpha:]]+) white* \"=\" white* value:((white / !\"\\n\" .)*) \"\\n\"\nend\n</code></pre>\n\n<p>and your top rule:</p>\n\n<pre><code>rule top\n    variable_assignment*\nend\n</code></pre>\n\n<p>Your language doesn't seem to have any more apparent structure than that.</p>\n"}], "owner": {"reputation": 1048, "user_id": 144345, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/a9c8035dc335d61235e2aa025924c903?s=128&d=identicon&r=PG", "display_name": "soulnafein", "link": "https://stackoverflow.com/users/144345/soulnafein"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "accepted_answer_id": 30372922, "answer_count": 1, "score": 0, "last_activity_date": 1432254269, "creation_date": 1432156979, "last_edit_date": 1432246689, "question_id": 30360633, "link": "https://stackoverflow.com/questions/30360633/treetop-grammar-line-continuation", "title": "Treetop grammar line continuation", "body": "<p>I'm trying to create a grammar for a language like the following</p>\n\n<pre><code>someVariable = This is a string, I know it doesn't have double quotes\nanotherString = This string has a continuation _\n      this means I can write it on multiple line _\n      like this\nanotherVariable = \"This string is surrounded by quotes\"\n</code></pre>\n\n<p>What are the correct Treetop grammar rules that parse the previous code correctly?</p>\n\n<p>I should be able to extract the following values for the three variables</p>\n\n<ul>\n<li>This is a string, I know it doesn't have double quotes</li>\n<li>This string has a continuation this means I can write it on multiple line like this</li>\n<li>This string is surrounded by quotes</li>\n</ul>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby", "csv"], "comments": [{"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1432156060, "post_id": 30360287, "comment_id": 48812508, "body": "you probably want to learn to format code  :)"}], "answers": [{"comments": [{"owner": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432156188, "post_id": 30360366, "comment_id": 48812571, "body": "Could you elaborate?  what would happen if header:false?  what does row [&quot;ISBN&quot;] means?"}], "tags": [], "owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "is_accepted": false, "score": 0, "last_activity_date": 1432156017, "creation_date": 1432156017, "answer_id": 30360366, "question_id": 30360287, "link": "https://stackoverflow.com/questions/30360287/csv-code-in-ruby/30360366#30360366", "title": "CSV code in Ruby", "body": "<p>header: true tells the CSV parser that you have a header row in your file.\nfor example:</p>\n\n<pre><code>col1, col2, col3\n1, 3, 4\n3, 4, 2\n</code></pre>\n\n<p>has a header.</p>\n\n<p><code>@books_in_stock &lt;&lt;</code> adds whatever comes after &lt;&lt; to the @books_in_stock array</p>\n"}, {"comments": [{"owner": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432156430, "post_id": 30360411, "comment_id": 48812695, "body": "Can I do header:true do |column|?  row[&quot;ISBN&quot;] why I need to use row? cant I use column here too?"}, {"owner": {"reputation": 1781, "user_id": 864549, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2271f7211035a67a52c8ce9ed6a0dfba?s=128&d=identicon&r=PG", "display_name": "dbarnes", "link": "https://stackoverflow.com/users/864549/dbarnes"}, "reply_to_user": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432156498, "post_id": 30360411, "comment_id": 48812727, "body": "Well you can row is just a variable name, but row is just a representation of each row in the CSV file. If you want to loop over the columns you&#39;ll probably have to use a different function."}, {"owner": {"reputation": 1781, "user_id": 864549, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2271f7211035a67a52c8ce9ed6a0dfba?s=128&d=identicon&r=PG", "display_name": "dbarnes", "link": "https://stackoverflow.com/users/864549/dbarnes"}, "reply_to_user": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432156682, "post_id": 30360411, "comment_id": 48812826, "body": "Maybe this will help <a href=\"http://www.tutorialspoint.com/ruby/ruby_iterators.htm\" rel=\"nofollow noreferrer\">tutorialspoint.com/ruby/ruby_iterators.htm</a>. That is just a foreach loop, I&#39;m guessing you&#39;re new to programming."}, {"owner": {"reputation": 1781, "user_id": 864549, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2271f7211035a67a52c8ce9ed6a0dfba?s=128&d=identicon&r=PG", "display_name": "dbarnes", "link": "https://stackoverflow.com/users/864549/dbarnes"}, "reply_to_user": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432156968, "post_id": 30360411, "comment_id": 48812965, "body": "Updated the answer to hopefully help."}, {"owner": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432157115, "post_id": 30360411, "comment_id": 48813055, "body": "Here is where I got got confused? isnt all the information are on column? can we use |var| instead of |row|?"}, {"owner": {"reputation": 1781, "user_id": 864549, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2271f7211035a67a52c8ce9ed6a0dfba?s=128&d=identicon&r=PG", "display_name": "dbarnes", "link": "https://stackoverflow.com/users/864549/dbarnes"}, "reply_to_user": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432157210, "post_id": 30360411, "comment_id": 48813090, "body": "<code>row</code> is just a variable name. It could be <code>mydata</code> it doesn&#39;t really matter, it is just a way to make your code clear as to what you are trying to do."}, {"owner": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432157375, "post_id": 30360411, "comment_id": 48813170, "body": "You took time to explain. I really appreciate it."}, {"owner": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432157417, "post_id": 30360411, "comment_id": 48813191, "body": "One last question.  The reason why its saving &quot;ISBN&quot; is because of the header or its saving cause its the key?"}, {"owner": {"reputation": 1781, "user_id": 864549, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2271f7211035a67a52c8ce9ed6a0dfba?s=128&d=identicon&r=PG", "display_name": "dbarnes", "link": "https://stackoverflow.com/users/864549/dbarnes"}, "reply_to_user": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432157497, "post_id": 30360411, "comment_id": 48813233, "body": "I&#39;m assuming all header information in CSV&#39;s are keys for the row object. If you were to have a different CSV with no ISBN in it this code will not work."}, {"owner": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432157750, "post_id": 30360411, "comment_id": 48813327, "body": "Interesting. Life is easy and you make it easier my friend!"}], "tags": [], "owner": {"reputation": 1781, "user_id": 864549, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/2271f7211035a67a52c8ce9ed6a0dfba?s=128&d=identicon&r=PG", "display_name": "dbarnes", "link": "https://stackoverflow.com/users/864549/dbarnes"}, "is_accepted": false, "score": 1, "last_activity_date": 1432156941, "last_edit_date": 1495542607, "creation_date": 1432156211, "answer_id": 30360411, "question_id": 30360287, "link": "https://stackoverflow.com/questions/30360287/csv-code-in-ruby/30360411#30360411", "title": "CSV code in Ruby", "body": "<blockquote>\n  <p>@book &lt;&lt; BookInSTOCK.new</p>\n</blockquote>\n\n<p>Adds a new <code>BookInSTOCK</code> object into the <code>@book</code> variable <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#3C-3C-method\" rel=\"nofollow noreferrer\">docs</a></p>\n\n<blockquote>\n  <p>CSV.foreach(csv_file_name, header: true) do |row|</p>\n</blockquote>\n\n<p><code>header:true</code> is a <a href=\"https://stackoverflow.com/questions/15308163/named-parameters-in-ruby-2\">named parameter</a>\nIn this case it says there is a header in the <code>csv_file_name</code>, and here you are looping over each row in the csv file and I'm guessing you will want to get data from each row. </p>\n\n<p>That's where:</p>\n\n<blockquote>\n  <p>row [\"ISBN\"]</p>\n</blockquote>\n\n<p>Is a way to see what the ISBN is in the specific row. Based on the CSV there is most likely other information you can look up in that row.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Based on the comments below I will add some more context</p>\n\n<p>Let's assume a csv that looks like this</p>\n\n<pre><code>ISBN, AMOUNT\n1, $30\n2, $50\n3, $60\n</code></pre>\n\n<p>then let's assume we have this code(It's very close to yours.</p>\n\n<pre><code>CSV.foreach(csv_file_name, header: true) do |row|\n  puts row[\"ISBN\"]\nend\n</code></pre>\n\n<p>Then the output will be:</p>\n\n<pre><code>1\n2\n3\n</code></pre>\n\n<p>As you can see we are <a href=\"http://www.tutorialspoint.com/ruby/ruby_iterators.htm\" rel=\"nofollow noreferrer\">looping</a> over each row and printing out the information. I hope this helps.</p>\n"}, {"comments": [{"owner": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "edited": false, "score": 0, "creation_date": 1432168315, "post_id": 30362561, "comment_id": 48816589, "body": "I really appreciate you taking your time to answer my question. I am going to bookmark it till everything becomes a second nature."}], "tags": [], "owner": {"reputation": 3502, "user_id": 128351, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/171de85d4d79cb7afe725174fb099137?s=128&d=identicon&r=PG", "display_name": "Overbryd", "link": "https://stackoverflow.com/users/128351/overbryd"}, "is_accepted": true, "score": 1, "last_activity_date": 1432167932, "creation_date": 1432167932, "answer_id": 30362561, "question_id": 30360287, "link": "https://stackoverflow.com/questions/30360287/csv-code-in-ruby/30362561#30362561", "title": "CSV code in Ruby", "body": "<p>Reading the comments, I think you should first make yourself familiar with the basic building blocks and the syntax of Ruby.</p>\n\n<p>I know, in the beginning I had tons of similar questions.\nI found a very basic and playful approach to learn the basics of the Ruby programming language <a href=\"http://mislav.uniqpath.com/poignant-guide/\" rel=\"nofollow\">in this book</a>.</p>\n\n<p><strong>To answer your question:</strong></p>\n\n<p><code>CSV.foreach(csv_file_name, header: true)</code> is a method call to <code>CSV</code>. The method <code>foreach</code> in this case receives two arguments.</p>\n\n<ol>\n<li><p><code>csv_file_name</code> is a variable that is being defined as the first argument of the outer method <code>read_in_csv_data</code>.</p>\n\n<p>So if you call <code>CsvReader.new.read_in_csv_data(\"file.csv\")</code> it will pass the string <code>\"file.csv\"</code> down to <code>CSV.foreach(\"file.csv\", ...</code>.</p></li>\n<li><p><code>header: true</code> is basically a Hash, but this style is commonly known as named arguments. Very useful and readable if you want to pass down options to a method that are very specific.</p>\n\n<p><strong>How does <code>CSV.foreach</code> receive <code>header: true</code>?</strong><br>\nThat is easy to find out, open up a <code>$ irb</code> session on your local machine, and define the following method:</p>\n\n<pre><code>def foo(arg1, arg2)\n  p arg1\n  p arg2\n  nil\nend\n</code></pre>\n\n<p>Now play around by calling <code>foo</code> with different arguments.</p>\n\n<pre><code>&gt; foo(\"string\", 123)\n\"string\"\n123\n=&gt; nil\n&gt; foo(\"string\", named: \"argument\")\n\"string\"\n{:named=&gt;\"argument}\n=&gt; nil\n&gt; foo(\"string\", { named: \"argument\" })\n\"string\"\n{:named=&gt;\"argument}\n=&gt; nil\n</code></pre>\n\n<p>Doing this you might grasp how Ruby handles named arguments or hash arguments. As you see, the latter examples above show that you can specify a Hash without <code>{}</code> as the last argument on any method in Ruby.<br>\n<code>header: true</code> represents a Hash, ie <code>{:header =&gt; true}</code>.</p>\n\n<p><strong>What does <code>header: true</code> trigger?</strong><br>\nThis has to be read up in the documentation for <code>CSV::foreach</code>. You you do a Google search for \"ruby csv foreach\" you will quickly find a documentation. <a href=\"http://docs.ruby-lang.org/en/2.2.0/CSV.html#method-c-foreach\" rel=\"nofollow\">Here is a direct link to <code>CSV::foreach</code></a>.\nThere you can read <em>\"The options parameter can be anything ::new understands.\"</em>. So you gotta look for the <a href=\"http://docs.ruby-lang.org/en/2.2.0/CSV.html#method-c-new\" rel=\"nofollow\">documentation of <code>CSV::new</code></a>. This leads you to a nice description of each option you can pass to <code>CSV::new</code> or <code>CSV::foreach</code>.</p>\n\n<p><strong>What does the documentation say?</strong></p>\n\n<blockquote>\n  <p><strong>:headers</strong> If set to <strong>:first_row</strong> or <strong>true</strong>, the initial row of the CSV file\n  will be treated as a row of headers. If set to an Array, the contents\n  will be used as the headers. If set to a String, the String is run\n  through a call of ::parse_line with the same :col_sep, :row_sep, and\n  :quote_char as this instance to produce an Array of headers. This\n  setting causes #shift to return rows as CSV::Row objects instead of\n  Arrays and #read to return CSV::Table objects instead of an Array of\n  Arrays.</p>\n</blockquote></li>\n</ol>\n\n<p><strong>Your other questions:</strong></p>\n\n<p>You are welcome to ask questions, but I also think it would be very good for you to get someone to help you directly. Maybe find yourself a <a href=\"http://rubyusergroups.org/\" rel=\"nofollow\">local Ruby user group</a>. People there are usually very friendly and helpful.</p>\n\n<p><strong>Having said that, I will now explain what <code>row[\"ISBN\"]</code> means:</strong></p>\n\n<p><code>CSV::foreach</code> is a method that <em>yields</em> a block. This block is somewhat similar to a function, and per definition of <code>CSV::foreach</code> it lets you do something with <em>each</em> row of the csv file.</p>\n\n<p><code>row</code> itself is just a variable name defined in the <em>block arguments</em> (ie <code>|row|</code>).</p>\n\n<p>Maybe its time for you to open up another <code>$ irb</code> and play around with blocks yourself:</p>\n\n<pre><code>def foo\n  yield 123\nend\n</code></pre>\n\n<p>Try calling foo the same way as you do <code>CSV::foreach</code>, just that you print the output.</p>\n\n<pre><code>&gt; foo do |row| puts row end\n123\n=&gt; nil\n&gt; foo { |arg1| puts arg1 }\n123\n=&gt; nil\n</code></pre>\n\n<p>As you see <code>yield 123</code> is passing <code>123</code> as the first argument of the block. You take the first argument in a variable (eg <code>row</code> or <code>arg1</code>) and you can do something with it in the block. Also note that you can create these blocks with <code>do |arg1| ... end</code> but also <code>{ |arg1| ... }</code>.</p>\n\n<p><strong>So what is it with this <code>[\"ISBN\"]</code>??</strong></p>\n\n<p><code>row</code> itself is just a variable, but is also an object so you can call methods on it. In Ruby you might have already encountered a hash.\nThe contents of a hash in Ruby can be accessed by calling <code>[]</code> on the hash.</p>\n\n<p>The same way each row of the CSV is represented. Just that each row (since you told <code>CSV</code> to use <strong>:headers</strong>) is being represented as a hash-like object.</p>\n\n<p>If you omit <strong>:headers</strong> each row will be an array of arrays.</p>\n\n<p>Maybe its time for you to open up an <code>$ irb</code> and play around with <code>CSV</code> directly. For that create yourself a simple csv file like the following, and save it to disk:</p>\n\n<pre><code>id,name\n1,Overbryd\n2,Boniface\n3,Poignant\n</code></pre>\n\n<p>Then, open up a <code>$ irb -r csv</code>.</p>\n\n<pre><code>&gt; CSV.foreach(\"test.csv\") { |r| p r }\n[\"id\", \"name\"]\n[\"1\", \"Overbryd\"]\n[\"2\", \"Boniface\"]\n[\"3\", \"Poignant\"]\n=&gt; nil\n&gt; CSV.foreach(\"test.csv\", headers: true) { |r| p r }\n#&lt;CSV::Row \"id\":\"1\" \"name\":\"Overbryd\"&gt;\n#&lt;CSV::Row \"id\":\"2\" \"name\":\"Boniface\"&gt;\n#&lt;CSV::Row \"id\":\"3\" \"name\":\"Poignant\"&gt;\n=&gt; nil\n&gt; CSV.foreach(\"test.csv\", headers: true) do |row|\n  puts row[\"id\"]\nend\n1\n2\n3\n=&gt; nil\n</code></pre>\n\n<p>Also, please accept one of the given answers. People take time to answer your questions, their only reward is if you accept one of their answers.</p>\n"}], "owner": {"reputation": 467, "user_id": 4917916, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/Q2cPI.jpg?s=128&g=1", "display_name": "boniface316", "link": "https://stackoverflow.com/users/4917916/boniface316"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 30362561, "answer_count": 3, "score": 0, "last_activity_date": 1432167932, "creation_date": 1432155626, "last_edit_date": 1432164740, "question_id": 30360287, "link": "https://stackoverflow.com/questions/30360287/csv-code-in-ruby", "title": "CSV code in Ruby", "body": "<p>What does <code>header:true do |row|</code>, <code>@book&lt;&lt;BookInSTOCK.new</code>, <code>row [\"ISBN\"]</code> mean in the following code?</p>\n\n<pre><code>class CsvReader\n  def initialize\n    @book_in_stock = []\n  end\n  def read_in_csv_data(csv_file_name)\n    # enter code here\n    CSV.foreach(csv_file_name, header: true) do |row|\n      @books_in_stock &lt;&lt; BoookInStock.new (row[\"ISBN\"], row [\"Amount\"])\n    end\n   end\n end\n</code></pre>\n"}, {"tags": ["css", "ruby-on-rails", "ruby", "erb"], "comments": [{"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1432155706, "post_id": 30360263, "comment_id": 48812294, "body": "define that rule in a css class and then wrap it around your user.comment line"}, {"owner": {"reputation": 805, "user_id": 4472094, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aYQD4.jpg?s=128&g=1", "display_name": "Gundam Meister", "link": "https://stackoverflow.com/users/4472094/gundam-meister"}, "reply_to_user": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1432155952, "post_id": 30360263, "comment_id": 48812455, "body": "I just tried this. Doesn&#39;t seem to work. &lt;span style=&quot;max-width:300px;&quot;&gt;Comment: &lt;%= user.comment  %&gt;&lt;/span&gt;"}, {"owner": {"reputation": 805, "user_id": 4472094, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aYQD4.jpg?s=128&g=1", "display_name": "Gundam Meister", "link": "https://stackoverflow.com/users/4472094/gundam-meister"}, "edited": false, "score": 1, "creation_date": 1432156676, "post_id": 30360263, "comment_id": 48812824, "body": "I figured it out. style=&quot;white-space:normal;&quot; did the trick."}, {"owner": {"reputation": 20658, "user_id": 584713, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/d43dc36474bd0a252ed907d46511ded7?s=128&d=identicon&r=PG", "display_name": "Robin", "link": "https://stackoverflow.com/users/584713/robin"}, "edited": false, "score": 0, "creation_date": 1432157227, "post_id": 30360263, "comment_id": 48813098, "body": "Just so you know, a span is <code>display: inline</code> by default, so setting its size wont do much."}], "answers": [{"tags": [], "owner": {"reputation": 805, "user_id": 4472094, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aYQD4.jpg?s=128&g=1", "display_name": "Gundam Meister", "link": "https://stackoverflow.com/users/4472094/gundam-meister"}, "is_accepted": false, "score": 0, "last_activity_date": 1432157093, "creation_date": 1432157093, "answer_id": 30360668, "question_id": 30360263, "link": "https://stackoverflow.com/questions/30360263/rails-erb-variable-not-responding-to-css/30360668#30360668", "title": "Rails ERB variable not responding to CSS", "body": "<p>I figured it out. <code>style=\"white-space:normal;\"</code> did the trick.</p>\n"}], "owner": {"reputation": 805, "user_id": 4472094, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aYQD4.jpg?s=128&g=1", "display_name": "Gundam Meister", "link": "https://stackoverflow.com/users/4472094/gundam-meister"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432157093, "creation_date": 1432155544, "question_id": 30360263, "link": "https://stackoverflow.com/questions/30360263/rails-erb-variable-not-responding-to-css", "title": "Rails ERB variable not responding to CSS", "body": "<p>There is a &lt;%= user.comment %> which is 3 sentences long comment. I am trying to display this comment in a 300px wide div. However, it is not responding to css. (i set the div to a max-width:300px;) The comment was display as a one long line of text, extending way beyond the div. Any suggestion?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "answers": [{"tags": [], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "is_accepted": true, "score": 3, "last_activity_date": 1432154489, "last_edit_date": 1495541659, "creation_date": 1432154489, "answer_id": 30359992, "question_id": 30359867, "link": "https://stackoverflow.com/questions/30359867/create-a-deep-copy-of-a-record/30359992#30359992", "title": "Create a deep copy of a record?", "body": "<p>You may want to give the <a href=\"https://rubygems.org/gems/amoeba\" rel=\"nofollow noreferrer\">Amoeba</a> gem a try.</p>\n\n<p>Reference: <a href=\"https://stackoverflow.com/a/9485672/336920\">https://stackoverflow.com/a/9485672/336920</a></p>\n\n<p>Also <a href=\"https://github.com/moiristo/deep_cloneable\" rel=\"nofollow noreferrer\">deep_clonable</a>.</p>\n\n<p>They both work with Rails 4 and have been updated recently.</p>\n"}], "owner": {"reputation": 47363, "user_id": 146780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48ea519fede5177604945a5c430e6e19?s=128&d=identicon&r=PG", "display_name": "jmasterx", "link": "https://stackoverflow.com/users/146780/jmasterx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 1, "accepted_answer_id": 30359992, "answer_count": 1, "score": 3, "last_activity_date": 1432154489, "creation_date": 1432154070, "question_id": 30359867, "link": "https://stackoverflow.com/questions/30359867/create-a-deep-copy-of-a-record", "title": "Create a deep copy of a record?", "body": "<p>I need to be able to copy a record. By that I mean that: All the references need to be deep copied.</p>\n\n<p>For example, if I have a Case and it has a patient_id linking to a patient, to copy a case would mean to create a copy of the patient too.</p>\n\n<p>Therefore, what would be a 'best practices' way to do this. My first thought was to make a create_copy method for all my models and each of these calls that for all their dependencies to create a cascading deep copy.</p>\n\n<p>I am just wondering if there is a more 'rails' way to do this where I could add on to the clone function?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1432153602, "post_id": 30359673, "comment_id": 48811120, "body": "<code>pool</code> should be an integer that represents the size of the pool, not the pool to connect to.  Example: <code>pool: 5</code>. The reason it cannot parse your code is that you&#39;ve got mismatched single and double quotes."}, {"owner": {"reputation": 17608, "user_id": 661624, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/347231f8387561ef324e25b48b96ba16?s=128&d=identicon&r=PG&f=1", "display_name": "Henley Chiu", "link": "https://stackoverflow.com/users/661624/henley-chiu"}, "reply_to_user": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1432153729, "post_id": 30359673, "comment_id": 48811186, "body": "OK, it&#39;s still an environment variable though. How do I do what I want?"}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1432153737, "post_id": 30359673, "comment_id": 48811194, "body": "You\u2019ve got your quotes mixed up, should be <code>ENV[&quot;POOL1&quot;]</code> (you have an <code>&quot;</code> and an <code>&#39;</code>)."}], "answers": [{"tags": [], "owner": {"reputation": 11018, "user_id": 703019, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/27105a4873af6ef3a8291467896968d2?s=128&d=identicon&r=PG&f=1", "display_name": "Waynn Lue", "link": "https://stackoverflow.com/users/703019/waynn-lue"}, "is_accepted": false, "score": 0, "last_activity_date": 1432168239, "creation_date": 1432168239, "answer_id": 30362613, "question_id": 30359673, "link": "https://stackoverflow.com/questions/30359673/how-to-have-2-diff-environment-variables-in-database-yml/30362613#30362613", "title": "How to have 2 diff. environment variables in database.yml?", "body": "<p>You can check for the existence of <code>ENV</code> variables the same way you check for any other variables.</p>\n\n<pre><code>irb(main):003:0&gt; ENV[\"foo\"] = \"1\"\n=&gt; \"1\"\nirb(main):004:0&gt; ENV[\"bar\"] || ENV[\"foo\"]\n=&gt; \"1\"\n</code></pre>\n\n<p>So in your code, this should work.</p>\n\n<pre><code>pool: &lt;%= ENV[\"POOL1\"] || ENV[\"POOL2\"] %&gt;\n</code></pre>\n"}], "owner": {"reputation": 17608, "user_id": 661624, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/347231f8387561ef324e25b48b96ba16?s=128&d=identicon&r=PG&f=1", "display_name": "Henley Chiu", "link": "https://stackoverflow.com/users/661624/henley-chiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1432168263, "creation_date": 1432153369, "last_edit_date": 1432168263, "question_id": 30359673, "link": "https://stackoverflow.com/questions/30359673/how-to-have-2-diff-environment-variables-in-database-yml", "title": "How to have 2 diff. environment variables in database.yml?", "body": "<p>In my production <code>database.yml</code>, I want the DB pool to be read from the environment variable <code>POOL1</code> if it exists. Otherwise, use <code>POOL2</code>. I tried the following but it doesn't seem to work, as it can't be parsed:</p>\n\n<pre><code>production:\n  adapter: postgresql\n  timeout: 20000\n  encoding: unicode\n  database: db\n  pool: &lt;%= ENV[\"POOL1'] or ENV['POOL2'] %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": false, "score": 2, "last_activity_date": 1432153421, "creation_date": 1432153421, "answer_id": 30359693, "question_id": 30359560, "link": "https://stackoverflow.com/questions/30359560/rails-range-make-reverse/30359693#30359693", "title": "RAILS range make reverse", "body": "<p>This produces the options in reverse order:</p>\n\n<pre><code>options_for_select((1920..2015).to_a.reverse)\n\n=&gt; \"&lt;option value=\\\"2015\\\"&gt;2015&lt;/option&gt;\\n&lt;option value=\\\"2014\\\"&gt;2014&lt;/option&gt;\\n&lt;option value=\\\"2013\\\"&gt;2013&lt;/option&gt;\\n&lt;option value=\\\"2012\\\"&gt;2012&lt;/option&gt;\\n&lt;option value=\\\"2011\\\"&gt;2011&lt;/option&gt;\\n&lt;option value=\\\"2010\\\"&gt;2010&lt;/option&gt;\\n&lt;option value=\\\"2009\\\"&gt;2009&lt;/option&gt;\\n&lt;option value=\\\"2008\\\"&gt;2008&lt;/option&gt;\\n&lt;option value=\\\"2007\\\"&gt;2007&lt;/option&gt;\\n&lt;option value=\\\"2006\\\"&gt;2006&lt;/option&gt;\\n&lt;option value=\\\"2005\\\"&gt;2005&lt;/option&gt;\\n&lt;option value=\\\"2004\\\"&gt;2004&lt;/option&gt;\\n&lt;option value=\\\"2003\\\"&gt;2003&lt;/option&gt;\\n&lt;option value=\\\"2002\\\"&gt;2002&lt;/option&gt;\\n&lt;option value=\\\"2001\\\"&gt;2001&lt;/option&gt;\\n&lt;option value=\\\"2000\\\"&gt;2000&lt;/option&gt;\\n&lt;option value=\\\"1999\\\"&gt;1999&lt;/option&gt;\\n&lt;option value=\\\"1998\\\"&gt;1998&lt;/option&gt;\\n&lt;option value=\\\"1997\\\"&gt;1997&lt;/option&gt;\\n&lt;option value=\\\"1996\\\"&gt;1996&lt;/option&gt;\\n&lt;option value=\\\"1995\\\"&gt;1995&lt;/option&gt;\\n&lt;option value=\\\"1994\\\"&gt;1994&lt;/option&gt;\\n&lt;option value=\\\"1993\\\"&gt;1993&lt;/option&gt;\\n&lt;option value=\\\"1992\\\"&gt;1992&lt;/option&gt;\\n&lt;option value=\\\"1991\\\"&gt;1991&lt;/option&gt;\\n&lt;option value=\\\"1990\\\"&gt;1990&lt;/option&gt;\\n&lt;option value=\\\"1989\\\"&gt;1989&lt;/option&gt;\\n&lt;option value=\\\"1988\\\"&gt;1988&lt;/option&gt;\\n&lt;option value=\\\"1987\\\"&gt;1987&lt;/option&gt;\\n&lt;option value=\\\"1986\\\"&gt;1986&lt;/option&gt;\\n&lt;option value=\\\"1985\\\"&gt;1985&lt;/option&gt;\\n&lt;option value=\\\"1984\\\"&gt;1984&lt;/option&gt;\\n&lt;option value=\\\"1983\\\"&gt;1983&lt;/option&gt;\\n&lt;option value=\\\"1982\\\"&gt;1982&lt;/option&gt;\\n&lt;option value=\\\"1981\\\"&gt;1981&lt;/option&gt;\\n&lt;option value=\\\"1980\\\"&gt;1980&lt;/option&gt;\\n&lt;option value=\\\"1979\\\"&gt;1979&lt;/option&gt;\\n&lt;option value=\\\"1978\\\"&gt;1978&lt;/option&gt;\\n&lt;option value=\\\"1977\\\"&gt;1977&lt;/option&gt;\\n&lt;option value=\\\"1976\\\"&gt;1976&lt;/option&gt;\\n&lt;option value=\\\"1975\\\"&gt;1975&lt;/option&gt;\\n&lt;option value=\\\"1974\\\"&gt;1974&lt;/option&gt;\\n&lt;option value=\\\"1973\\\"&gt;1973&lt;/option&gt;\\n&lt;option value=\\\"1972\\\"&gt;1972&lt;/option&gt;\\n&lt;option value=\\\"1971\\\"&gt;1971&lt;/option&gt;\\n&lt;option value=\\\"1970\\\"&gt;1970&lt;/option&gt;\\n&lt;option value=\\\"1969\\\"&gt;1969&lt;/option&gt;\\n&lt;option value=\\\"1968\\\"&gt;1968&lt;/option&gt;\\n&lt;option value=\\\"1967\\\"&gt;1967&lt;/option&gt;\\n&lt;option value=\\\"1966\\\"&gt;1966&lt;/option&gt;\\n&lt;option value=\\\"1965\\\"&gt;1965&lt;/option&gt;\\n&lt;option value=\\\"1964\\\"&gt;1964&lt;/option&gt;\\n&lt;option value=\\\"1963\\\"&gt;1963&lt;/option&gt;\\n&lt;option value=\\\"1962\\\"&gt;1962&lt;/option&gt;\\n&lt;option value=\\\"1961\\\"&gt;1961&lt;/option&gt;\\n&lt;option value=\\\"1960\\\"&gt;1960&lt;/option&gt;\\n&lt;option value=\\\"1959\\\"&gt;1959&lt;/option&gt;\\n&lt;option value=\\\"1958\\\"&gt;1958&lt;/option&gt;\\n&lt;option value=\\\"1957\\\"&gt;1957&lt;/option&gt;\\n&lt;option value=\\\"1956\\\"&gt;1956&lt;/option&gt;\\n&lt;option value=\\\"1955\\\"&gt;1955&lt;/option&gt;\\n&lt;option value=\\\"1954\\\"&gt;1954&lt;/option&gt;\\n&lt;option value=\\\"1953\\\"&gt;1953&lt;/option&gt;\\n&lt;option value=\\\"1952\\\"&gt;1952&lt;/option&gt;\\n&lt;option value=\\\"1951\\\"&gt;1951&lt;/option&gt;\\n&lt;option value=\\\"1950\\\"&gt;1950&lt;/option&gt;\\n&lt;option value=\\\"1949\\\"&gt;1949&lt;/option&gt;\\n&lt;option value=\\\"1948\\\"&gt;1948&lt;/option&gt;\\n&lt;option value=\\\"1947\\\"&gt;1947&lt;/option&gt;\\n&lt;option value=\\\"1946\\\"&gt;1946&lt;/option&gt;\\n&lt;option value=\\\"1945\\\"&gt;1945&lt;/option&gt;\\n&lt;option value=\\\"1944\\\"&gt;1944&lt;/option&gt;\\n&lt;option value=\\\"1943\\\"&gt;1943&lt;/option&gt;\\n&lt;option value=\\\"1942\\\"&gt;1942&lt;/option&gt;\\n&lt;option value=\\\"1941\\\"&gt;1941&lt;/option&gt;\\n&lt;option value=\\\"1940\\\"&gt;1940&lt;/option&gt;\\n&lt;option value=\\\"1939\\\"&gt;1939&lt;/option&gt;\\n&lt;option value=\\\"1938\\\"&gt;1938&lt;/option&gt;\\n&lt;option value=\\\"1937\\\"&gt;1937&lt;/option&gt;\\n&lt;option value=\\\"1936\\\"&gt;1936&lt;/option&gt;\\n&lt;option value=\\\"1935\\\"&gt;1935&lt;/option&gt;\\n&lt;option value=\\\"1934\\\"&gt;1934&lt;/option&gt;\\n&lt;option value=\\\"1933\\\"&gt;1933&lt;/option&gt;\\n&lt;option value=\\\"1932\\\"&gt;1932&lt;/option&gt;\\n&lt;option value=\\\"1931\\\"&gt;1931&lt;/option&gt;\\n&lt;option value=\\\"1930\\\"&gt;1930&lt;/option&gt;\\n&lt;option value=\\\"1929\\\"&gt;1929&lt;/option&gt;\\n&lt;option value=\\\"1928\\\"&gt;1928&lt;/option&gt;\\n&lt;option value=\\\"1927\\\"&gt;1927&lt;/option&gt;\\n&lt;option value=\\\"1926\\\"&gt;1926&lt;/option&gt;\\n&lt;option value=\\\"1925\\\"&gt;1925&lt;/option&gt;\\n&lt;option value=\\\"1924\\\"&gt;1924&lt;/option&gt;\\n&lt;option value=\\\"1923\\\"&gt;1923&lt;/option&gt;\\n&lt;option value=\\\"1922\\\"&gt;1922&lt;/option&gt;\\n&lt;option value=\\\"1921\\\"&gt;1921&lt;/option&gt;\\n&lt;option value=\\\"1920\\\"&gt;1920&lt;/option&gt;\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 269, "user_id": 3956916, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d8cf7cb0fe1b4286665943c2e00f940e?s=128&d=identicon&r=PG&f=1", "display_name": "Bebbs", "link": "https://stackoverflow.com/users/3956916/bebbs"}, "is_accepted": false, "score": 1, "last_activity_date": 1432216806, "creation_date": 1432216806, "answer_id": 30375997, "question_id": 30359560, "link": "https://stackoverflow.com/questions/30359560/rails-range-make-reverse/30375997#30375997", "title": "RAILS range make reverse", "body": "<p>Reversing a range doesn't really make sense. You could use <code>options_for_select(2015.downto(1920))</code>, as <code>downto</code> returns an Enumerator which is a valid parameter for <code>options_for_select</code>.</p>\n"}], "owner": {"reputation": 19, "user_id": 4666863, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/43b369d4d94c023451894302e9fd61f9?s=128&d=identicon&r=PG&f=1", "display_name": "Bayram Muhiyew", "link": "https://stackoverflow.com/users/4666863/bayram-muhiyew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "closed_date": 1432225038, "answer_count": 2, "score": 0, "last_activity_date": 1432216806, "creation_date": 1432152982, "question_id": 30359560, "link": "https://stackoverflow.com/questions/30359560/rails-range-make-reverse", "closed_reason": "Duplicate", "title": "RAILS range make reverse", "body": "<pre><code>options_for_select(1920..2015)\n</code></pre>\n\n<p>Howa can get this range in reverse type, 2015..1920 doesn't work, \nI think my question is pretty understandable, but this form wants me to write more, so excuse me)))Please help </p>\n"}, {"tags": ["ruby", "redis"], "answers": [{"tags": [], "owner": {"reputation": 551, "user_id": 211716, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/be443b085eb5281638d369c5241f641d?s=128&d=identicon&r=PG", "display_name": "Peter Giacomo Lombardo", "link": "https://stackoverflow.com/users/211716/peter-giacomo-lombardo"}, "is_accepted": false, "score": 0, "last_activity_date": 1432152899, "creation_date": 1432152899, "answer_id": 30359533, "question_id": 30358664, "link": "https://stackoverflow.com/questions/30358664/nomethoderror-undefined-method-slice-for-nilnilclass-from-redis-call/30359533#30359533", "title": "NoMethodError (undefined method `slice!&#39; for nil:NilClass) from Redis call", "body": "<p>This looks like this could be an issue with the ruby redis client.</p>\n\n<p>You could try downgrading a version and/or filing an issue for the redis team <a href=\"https://github.com/redis/redis-rb/issues\" rel=\"nofollow\">in the Github repository</a>.</p>\n"}], "owner": {"reputation": 4296, "user_id": 1152054, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c20ad27b681bc191a309dd60f2ade6b0?s=128&d=identicon&r=PG", "display_name": "Dan Friedman", "link": "https://stackoverflow.com/users/1152054/dan-friedman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 676, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1432226178, "creation_date": 1432149871, "last_edit_date": 1432226178, "question_id": 30358664, "link": "https://stackoverflow.com/questions/30358664/nomethoderror-undefined-method-slice-for-nilnilclass-from-redis-call", "title": "NoMethodError (undefined method `slice!&#39; for nil:NilClass) from Redis call", "body": "<p>I'm randomly getting the following error message. Does anyone have any ideas what could be causing this?</p>\n\n<pre><code>NoMethodError (undefined method `slice!' for nil:NilClass):\n vendor/bundle/ruby/2.1.0/gems/redis-3.2.1/lib/redis/connection/ruby.rb:274:in `read'\n vendor/bundle/ruby/2.1.0/gems/redis-3.2.1/lib/redis/client.rb:248:in `block in read'\n vendor/bundle/ruby/2.1.0/gems/redis-3.2.1/lib/redis/client.rb:236:in `io'\n vendor/bundle/ruby/2.1.0/gems/redis-3.2.1/lib/redis/client.rb:247:in `read'\n vendor/bundle/ruby/2.1.0/gems/redis-3.2.1/lib/redis/client.rb:112:in `block in call'\n vendor/bundle/ruby/2.1.0/gems/redis-3.2.1/lib/redis/client.rb:217:in `block (2 levels) in process'\n vendor/bundle/ruby/2.1.0/gems/redis-3.2.1/lib/redis/client.rb:353:in `ensure_connected'\n vendor/bundle/ruby/2.1.0/gems/redis-3.2.1/lib/redis/client.rb:207:in `block in process'\n vendor/bundle/ruby/2.1.0/gems/redis-3.2.1/lib/redis/client.rb:292:in `logging'\n vendor/bundle/ruby/2.1.0/gems/redis-3.2.1/lib/redis/client.rb:206:in `process'\n vendor/bundle/ruby/2.1.0/gems/redis-3.2.1/lib/redis/client.rb:112:in `call'\n vendor/bundle/ruby/2.1.0/gems/redis-3.2.1/lib/redis.rb:789:in `block in get'\n vendor/bundle/ruby/2.1.0/gems/redis-3.2.1/lib/redis.rb:37:in `block in synchronize'\n /usr/local/ruby-2.1.5/lib/ruby/2.1.0/monitor.rb:211:in `mon_synchronize'\n vendor/bundle/ruby/2.1.0/gems/redis-3.2.1/lib/redis.rb:37:in `synchronize'\n vendor/bundle/ruby/2.1.0/gems/redis-3.2.1/lib/redis.rb:788:in `get'\n vendor/bundle/ruby/2.1.0/gems/redis-store-1.1.4/lib/redis/store/interface.rb:5:in `get'\n vendor/bundle/ruby/2.1.0/gems/redis-store-1.1.4/lib/redis/store/marshalling.rb:17:in `get'\n vendor/bundle/ruby/2.1.0/gems/redis-activesupport-4.0.0/lib/active_support/cache/redis_store.rb:169:in `read_entry'\n vendor/bundle/ruby/2.1.0/gems/activesupport-4.1.9/lib/active_support/cache.rb:312:in `block in read'\n vendor/bundle/ruby/2.1.0/gems/activesupport-4.1.9/lib/active_support/cache.rb:548:in `instrument'\n vendor/bundle/ruby/2.1.0/gems/activesupport-4.1.9/lib/active_support/cache.rb:311:in `read'\n /var/www/apps/13712/shared/vendor_bundle/ruby/2.1.0/bundler/gems/spree-13f1df56d58f/core/app/models/spree/preferences/store.rb:34:in `get'\n /var/www/apps/13712/shared/vendor_bundle/ruby/2.1.0/bundler/gems/spree-13f1df56d58f/core/app/models/spree/preferences/scoped_store.rb:13:in `fetch'\n /var/www/apps/13712/shared/vendor_bundle/ruby/2.1.0/bundler/gems/spree-13f1df56d58f/core/app/models/spree/preferences/preferable_class_methods.rb:13:in `block in preference'\n /var/www/apps/13712/shared/vendor_bundle/ruby/2.1.0/bundler/gems/spree-13f1df56d58f/core/app/models/spree/preferences/preferable.rb:43:in `get_preference'\n vendor/bundle/ruby/2.1.0/bundler/gems/spree-13f1df56d58f/core/lib/spree/core/controller_helpers/ssl.rb:8:in `block (2 levels) in &lt;module:SSL&gt;'\n</code></pre>\n\n<p>The <a href=\"https://github.com/spree/spree/blob/13f1df56d58f0ff14b7c6597554dd41f6e50b492/core/app/models/spree/preferences/store.rb#L34-L36\" rel=\"nofollow\">last place</a> Spree is hit before calling redis-rb:</p>\n\n<pre><code>  unless (val = @cache.read(key)).nil? \n     return val \n   end \n</code></pre>\n\n<p>where <code>@cache = Rails.cache</code></p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I am using this gem with this <a href=\"https://github.com/MisinformedDNA/redis-rb-ssl\" rel=\"nofollow\">SSL plugin</a>, so the error may be related to the plugin.</p>\n\n<p>The error happens when <code>line = @sock.gets</code> is <code>nil</code>. Here's the locals right after that is determined to be true.</p>\n\n<pre><code>[1] pry(#&lt;Redis::Connection::Ruby&gt;)&gt; line\n=&gt; nil\n[2] pry(#&lt;Redis::Connection::Ruby&gt;)&gt; @sock\n=&gt; #&lt;OpenSSL::SSL::SSLSocket:0x007fdab2688730\n @callback_state=nil,\n @context=\n  #&lt;OpenSSL::SSL::SSLContext:0x007fdab2688758\n   @ca_file=nil,\n   @ca_path=nil,\n   @cert=nil,\n   @cert_store=nil,\n   @client_ca=nil,\n   @client_cert_cb=nil,\n   @extra_chain_cert=nil,\n   @key=nil,\n   @npn_protocols=nil,\n   @npn_select_cb=nil,\n   @options=nil,\n   @renegotiation_cb=nil,\n   @servername_cb=nil,\n   @session_get_cb=nil,\n   @session_id_context=nil,\n   @session_new_cb=nil,\n   @session_remove_cb=nil,\n   @timeout=nil,\n   @tmp_dh_callback=nil,\n   @verify_callback=nil,\n   @verify_depth=nil,\n   @verify_mode=nil&gt;,\n @eof=true,\n @hostname=nil,\n @io=#&lt;Redis::Connection::TCPSocket:fd 11&gt;,\n @rbuffer=\"\",\n @sync=true,\n @sync_close=false,\n @wbuffer=\"\"&gt;\n[3] pry(#&lt;Redis::Connection::Ruby&gt;)&gt; @sock.closed?\n=&gt; false\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "git", "gem", "spree"], "comments": [{"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 3, "creation_date": 1432150281, "post_id": 30358616, "comment_id": 48809253, "body": "The error message is pretty self explanatory.  You will either need to remove the version number from <code>spree</code> and let the bundler send you back the dark ages at/around version <code>1.0.0</code> or drop the requirement for <code>spree_braintree</code>.  Why are you specifying <code>github</code> repositories for each of these and not just letting the bundler get the latest/stable version?"}, {"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 1, "creation_date": 1432151231, "post_id": 30358616, "comment_id": 48809760, "body": "I experimented a bit and it seems like those last three gems are going to be a challenge.  I took off the version number for <code>spree</code> and removed the git repository links for the next two, but even the latest versions of these two are so old that they are pulling in incompatible stuff (at least with some of your other gems).  I couldn&#39;t remove the git requirement for the very last gem, which means it doesn&#39;t exist in the &quot;Ruby Gems&quot; system.  If you really need these three, you may need to roll back to Rails 3.1 or something."}, {"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1432164365, "post_id": 30358616, "comment_id": 48815566, "body": "what a mess. seems that spree_braintree hasn&#39;t been updated in more than 3 years. if you really need to use this, what I would so is fork the github repo, update the gem spec to something that is recent and give it a shot"}, {"owner": {"reputation": 640, "user_id": 2326613, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5f0821b3c32c0537c027a657ec7e977b?s=128&d=identicon&r=PG", "display_name": "JosephK", "link": "https://stackoverflow.com/users/2326613/josephk"}, "edited": false, "score": 0, "creation_date": 1447404618, "post_id": 30358616, "comment_id": 55149771, "body": "The latest &quot;instructions&quot; from Spree, supposed to work with Rails 4.2, create this problem - even if you touch/add nothing.  Even the few lines they give in the &quot;how to&quot; do not even work, so you have to improvise.  If you upgrade Rails, then StateMachine fails, because those guys made changes that break working code (typical, in this community).  Add their &quot;fix&quot; line, and that crashes your app.  Huge mess - hope there is an alternative to Spree."}], "owner": {"reputation": 21, "user_id": 4195670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c766149dbc82250fe2055e0b7fcd2d1?s=128&d=identicon&r=PG&f=1", "display_name": "Bits", "link": "https://stackoverflow.com/users/4195670/bits"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 907, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1432149717, "creation_date": 1432149717, "question_id": 30358616, "link": "https://stackoverflow.com/questions/30358616/bundler-could-not-find-compatible-versions-for-gem-spree-core", "title": "Bundler could not find compatible versions for gem \u201cspree_core&quot;", "body": "<p>I\u2019m trying to install spree_braintree gem to integrate braintree gateway with spree 3.0.1. When I run \u201cbundle install\u201d, I get this error \u201cBundler could not find compatible versions for gem \u201cspree_core\u201d\". This is my Gemfile. </p>\n\n<pre>\n\n    source 'https://rubygems.org'\n    # Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\n    gem 'rails', '4.2.1'\n    # Use sqlite3 as the database for Active Record\n    gem 'sqlite3'\n    # Use SCSS for stylesheets\n    gem 'sass-rails', '~> 5.0'\n    # Use Uglifier as compressor for JavaScript assets\n    gem 'uglifier', '>= 1.3.0'\n    # Use CoffeeScript for .coffee assets and views\n    gem 'coffee-rails', '~> 4.1.0'\n    # See https://github.com/rails/execjs#readme for more supported runtimes\n    # gem 'therubyracer', platforms: :ruby\n\n    # Use jquery as the JavaScript library\n    gem 'jquery-rails'\n    # Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\n    gem 'turbolinks'\n    # Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\n    gem 'jbuilder', '~> 2.0'\n    # bundle exec rake doc:rails generates the API under doc/api.\n    gem 'sdoc', '~> 0.4.0', group: :doc\n\n    # Use ActiveModel has_secure_password\n    # gem 'bcrypt', '~> 3.1.7'\n\n    # Use Unicorn as the app server\n    # gem 'unicorn'\n\n    # Use Capistrano for deployment\n    # gem 'capistrano-rails', group: :development\n\n    group :development, :test do\n      # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n      gem 'byebug'\n\n      # Access an IRB console on exception pages or by using  in views\n      gem 'web-console', '~> 2.0'\n\n      # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n      gem 'spring'\n    end\n\n\n    gem 'spree', '3.0.1'\n    gem 'spree_gateway', github: 'spree/spree_gateway', branch: '3-0-stable'\n    gem 'spree_auth_devise', github: 'spree/spree_auth_devise', branch: '3-0-stable'\n    gem 'spree_braintree', :git => 'git://github.com/rortechie/spree-braintree.git\n\n'\n    </pre>\n\n<pre><code>Error message:\n&lt;pre&gt;\nBundler could not find compatible versions for gem \"spree_core\":\n  In Gemfile:\n    spree_braintree (&gt;= 0) ruby depends on\n      spree_core (~&gt; 1.0.0) ruby\n\n    spree (= 3.0.1) ruby depends on\n      spree_sample (= 3.0.1) ruby depends on\n        spree_core (3.0.1)\n</code></pre>\n\n<p></p>\n\n<p>I also tried to remove Gemfile.lock and run bundle install but it didn't help.I am using ruby 2.2.2 and rails 4.2.1.</p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 3518, "user_id": 3384609, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/1cb30cda6294521f9c6e60277504c5c2?s=128&d=identicon&r=PG", "display_name": "Clintm", "link": "https://stackoverflow.com/users/3384609/clintm"}, "edited": false, "score": 4, "creation_date": 1536602359, "post_id": 30358655, "comment_id": 91474014, "body": "rails not mentioned"}, {"owner": {"reputation": 15839, "user_id": 74089, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/3TdS8.jpg?s=128&g=1", "display_name": "Nikita Fedyashev", "link": "https://stackoverflow.com/users/74089/nikita-fedyashev"}, "edited": false, "score": 0, "creation_date": 1603454309, "post_id": 30358655, "comment_id": 114049478, "body": "jruby is not a gem"}], "tags": [], "owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "is_accepted": false, "score": -1, "last_activity_date": 1432149842, "creation_date": 1432149842, "answer_id": 30358655, "question_id": 30358612, "link": "https://stackoverflow.com/questions/30358612/how-to-create-a-gemfile/30358655#30358655", "title": "How to create a Gemfile?", "body": "<p>A gemfile is automatically created when you start a new rails application.</p>\n\n<p>type <code>rails new appName</code> and then it will be generated automatically. It will also be populated with some gems.</p>\n\n<p>To install the gems run <code>bundle install</code> or simply <code>bundle</code></p>\n\n<p>Make sure you are requiring the gems you need. specifically <code>rspec</code> and <code>jruby</code></p>\n\n<pre><code>group :development, :test do\n  gem 'rspec-rails', '~&gt; 3.0'\nend\n</code></pre>\n\n<p>Look at this website for more information</p>\n\n<p><a href=\"http://bundler.io/\" rel=\"nofollow\">http://bundler.io/</a></p>\n"}, {"comments": [{"owner": {"reputation": 12725, "user_id": 1549700, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/lrTq5.jpg?s=128&g=1", "display_name": "Machado", "link": "https://stackoverflow.com/users/1549700/machado"}, "edited": false, "score": 1, "creation_date": 1495463545, "post_id": 30358688, "comment_id": 75250437, "body": "I took so long to realize that all I need was to create a file named &quot;Gemfile&quot; with no extension. I thought I was creating a gem at this point."}], "tags": [], "owner": {"reputation": 12694, "user_id": 1174001, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/b27f05489e2cebe5948277c2ca561a93?s=128&d=identicon&r=PG", "display_name": "CDub", "link": "https://stackoverflow.com/users/1174001/cdub"}, "is_accepted": true, "score": 56, "last_activity_date": 1572880222, "last_edit_date": 1572880222, "creation_date": 1432149961, "answer_id": 30358688, "question_id": 30358612, "link": "https://stackoverflow.com/questions/30358612/how-to-create-a-gemfile/30358688#30358688", "title": "How to create a Gemfile?", "body": "<p>The Gemfile is just a text file within your project which contains a list of gems for use in your application.</p>\n\n<p>If you do not have one in your application, you can create the file using an editor of your choice, saving it as <code>Gemfile</code> (with no extension), and in your example, containing:</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'rspec'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 957, "user_id": 4616851, "user_type": "registered", "profile_image": "https://graph.facebook.com/890622630981581/picture?type=large", "display_name": "Saurabh Juneja", "link": "https://stackoverflow.com/users/4616851/saurabh-juneja"}, "edited": false, "score": 0, "creation_date": 1432151267, "post_id": 30358834, "comment_id": 48809785, "body": "Thanks for your answer"}, {"owner": {"reputation": 1386, "user_id": 1661186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/A1yBT.png?s=128&g=1", "display_name": "Darlan D.", "link": "https://stackoverflow.com/users/1661186/darlan-d"}, "edited": false, "score": 0, "creation_date": 1479219229, "post_id": 30358834, "comment_id": 68458137, "body": "Great! Thanks Dude!"}], "tags": [], "owner": {"reputation": 9845, "user_id": 119822, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/wnqih.jpg?s=128&g=1", "display_name": "Andy Waite", "link": "https://stackoverflow.com/users/119822/andy-waite"}, "is_accepted": false, "score": 139, "last_activity_date": 1603455243, "last_edit_date": 1603455243, "creation_date": 1432150455, "answer_id": 30358834, "question_id": 30358612, "link": "https://stackoverflow.com/questions/30358612/how-to-create-a-gemfile/30358834#30358834", "title": "How to create a Gemfile?", "body": "<p><a href=\"https://bundler.io/man/bundle-init.1.html\" rel=\"noreferrer\">bundle init</a> generates a Gemfile into the current working directory.</p>\n<pre class=\"lang-sh prettyprint-override\"><code>$ bundle init\nWriting new Gemfile to /app/Gemfile\n\n$ cat Gemfile \n# frozen_string_literal: true\n\nsource &quot;https://rubygems.org&quot;\n\ngit_source(:github) {|repo_name| &quot;https://github.com/#{repo_name}&quot; }\n\n# gem &quot;rails&quot;\n</code></pre>\n"}], "owner": {"reputation": 957, "user_id": 4616851, "user_type": "registered", "profile_image": "https://graph.facebook.com/890622630981581/picture?type=large", "display_name": "Saurabh Juneja", "link": "https://stackoverflow.com/users/4616851/saurabh-juneja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50782, "favorite_count": 10, "accepted_answer_id": 30358688, "answer_count": 3, "score": 66, "last_activity_date": 1603455243, "creation_date": 1432149696, "last_edit_date": 1603454712, "question_id": 30358612, "link": "https://stackoverflow.com/questions/30358612/how-to-create-a-gemfile", "title": "How to create a Gemfile?", "body": "<p>I'm very new to Ruby.</p>\n<p>I was following a blog post that says that in order to install a required dependencies I need to create a Gemfile.</p>\n<p>How do I create a Gemfile with <code>rspec</code> as a dependency?</p>\n"}, {"tags": ["ruby", "finite-automata"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1432149576, "post_id": 30358493, "comment_id": 48808840, "body": "What is your question?"}], "answers": [{"tags": [], "owner": {"reputation": 4103, "user_id": 4271125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VQnWR.jpg?s=128&g=1", "display_name": "djaszczurowski", "link": "https://stackoverflow.com/users/4271125/djaszczurowski"}, "is_accepted": false, "score": 0, "last_activity_date": 1432149853, "creation_date": 1432149853, "answer_id": 30358658, "question_id": 30358493, "link": "https://stackoverflow.com/questions/30358493/compute-transition-function-error/30358658#30358658", "title": "Compute transition function error", "body": "<p>the problem is with <code>c</code> I suppose. Alphabet suggests mi it is an array of string, am I correct? If so, you will always get error as String does not implement <code>+</code> method. Probably you should convert (ASCII number?) those strings into numbers.</p>\n"}, {"tags": [], "owner": {"reputation": 551, "user_id": 211716, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/be443b085eb5281638d369c5241f641d?s=128&d=identicon&r=PG", "display_name": "Peter Giacomo Lombardo", "link": "https://stackoverflow.com/users/211716/peter-giacomo-lombardo"}, "is_accepted": false, "score": 0, "last_activity_date": 1432151789, "last_edit_date": 1432151789, "creation_date": 1432151333, "answer_id": 30359101, "question_id": 30358493, "link": "https://stackoverflow.com/questions/30358493/compute-transition-function-error/30359101#30359101", "title": "Compute transition function error", "body": "<p>Without getting into the details of the function, to fix this error:</p>\n\n<pre><code>`+': String can't be coerced into Fixnum (TypeError)\n</code></pre>\n\n<p>You need to convert your Strings into Fixnums using <code>to_i</code> before attempting addition (<code>+</code>).  Since there isn't enough code to know what datatypes are in use, a possible code change may be (assuming that <code>c</code> is a string):</p>\n\n<pre><code>while pattern[q+c.to_i][-k] != pattern[k]\n  k -= 1\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4920464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/145dbe432cf0fcd58fa6b9166468d71d?s=128&d=identicon&r=PG&f=1", "display_name": "kuat", "link": "https://stackoverflow.com/users/4920464/kuat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1432151789, "creation_date": 1432149303, "last_edit_date": 1432149619, "question_id": 30358493, "link": "https://stackoverflow.com/questions/30358493/compute-transition-function-error", "title": "Compute transition function error", "body": "<p>I'm trying to implement this transition function algorithm in ruby. </p>\n\n<p>Here is the algorithm:</p>\n\n<pre><code>Compute-Transition-Function(P, \u03a3);\n  m := |P|\n  for q=0 to m\n    for each a\u2208\u03a3\n      k := min(m + 1, q + 2)\n      repeat\n        k=k\u22121\n      until (Pk \u2290 Pqa)\n      \u03b4(q, a) := k\nreturn \u03b4\n</code></pre>\n\n<p>And here is what I've done so far in ruby:</p>\n\n<pre><code>def compute_transition_function(pattern, alphabet)\n  m = pattern.length\n  transition = Array.new()\n\n  m.times do |q|\n    alphabet.each do |c|\n      k = [m+1, q+2].min\n      while pattern[q+c][-k] != pattern[k]\n        k -= 1\n      end\n      transition[q][c] = k\n    end\n  end\n\n  return transition\nend\n</code></pre>\n\n<p>This is what I get when I compiled.</p>\n\n<pre><code>finiteautomatamatcher.rb:54:in `+': String can't be coerced into Fixnum (TypeError)\nfrom project.rb:54:in `block (2 levels) in compute_transition_function'\nfrom project.rb:52:in `each'\nfrom project.rb:52:in `block in compute_transition_function'\nfrom project.rb:51:in `times'\nfrom project.rb:51:in `compute_transition_function'\nfrom project.rb:82:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "jekyll", "github-pages"], "answers": [{"tags": [], "owner": {"reputation": 551, "user_id": 211716, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/be443b085eb5281638d369c5241f641d?s=128&d=identicon&r=PG", "display_name": "Peter Giacomo Lombardo", "link": "https://stackoverflow.com/users/211716/peter-giacomo-lombardo"}, "is_accepted": false, "score": 1, "last_activity_date": 1432151680, "creation_date": 1432151680, "answer_id": 30359196, "question_id": 30358376, "link": "https://stackoverflow.com/questions/30358376/github-pages-gem-failing-even-though-i-have-ruby-version-2-1-2/30359196#30359196", "title": "github-pages gem failing even though I have Ruby version 2.1.2", "body": "<p>There is a possible lack of important information here.  Looking at your Ruby version, are you using rbenv or rvm?</p>\n\n<p>I could imagine this happening if you use rbenv or rvm and then <code>su</code> or <code>sudo</code> to gem install github-pages.  rbenv and rvm are specific to your user account and your shell environment.  If you <code>su</code> or <code>sudo</code> to root, rbenv and rvm are no longer active.</p>\n\n<p>The other possibility is that you are running it inside of a Bundler managed app that specifies another Ruby version in the <code>Gemfile</code> using the <code>ruby x.x.x</code> syntax.</p>\n\n<p>If neither of these is the case, try running <code>gem env</code> to see what exactly rubygems thinks the story is.  Also post the exact commands you are using to get this error.</p>\n"}], "owner": {"reputation": 31, "user_id": 4921889, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc84d2a5b29056e8d3c21a6ed794945b?s=128&d=identicon&r=PG&f=1", "display_name": "dm8", "link": "https://stackoverflow.com/users/4921889/dm8"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 149, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1432151680, "creation_date": 1432148910, "question_id": 30358376, "link": "https://stackoverflow.com/questions/30358376/github-pages-gem-failing-even-though-i-have-ruby-version-2-1-2", "title": "github-pages gem failing even though I have Ruby version 2.1.2", "body": "<p>I'm trying to install github pages gem on my Mac OS X (yosemite). </p>\n\n<p>I get following error: </p>\n\n<pre><code>Gem::InstallError: github-pages requires Ruby version ~&gt; 2.0.0.\nAn error occurred while installing github-pages (4), and Bundler cannot continue.\nMake sure that `gem install github-pages -v '4'` succeeds before bundling.\n</code></pre>\n\n<p>I checked my Ruby version by running following command -  </p>\n\n<pre><code>ruby --version\n</code></pre>\n\n<p>And it says </p>\n\n<pre><code>ruby 2.1.2p95 (2014-05-08 revision 45877) [x86_64-darwin13.0]\n</code></pre>\n\n<p>So I definitely have Ruby version ~> 2.0.0</p>\n\n<p>Any assistance on this issue would be greatly appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "number-to-currency"], "answers": [{"tags": [], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "is_accepted": false, "score": 0, "last_activity_date": 1432145695, "creation_date": 1432145695, "answer_id": 30357391, "question_id": 30357277, "link": "https://stackoverflow.com/questions/30357277/rails-number-to-currency-delete-trailing-zeroes-right-of-decimal/30357391#30357391", "title": "Rails number_to_currency delete trailing zeroes right of decimal", "body": "<pre><code>number_to_currency(33.95,:precision =&gt; 2)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": false, "score": 0, "last_activity_date": 1432145745, "creation_date": 1432145745, "answer_id": 30357409, "question_id": 30357277, "link": "https://stackoverflow.com/questions/30357277/rails-number-to-currency-delete-trailing-zeroes-right-of-decimal/30357409#30357409", "title": "Rails number_to_currency delete trailing zeroes right of decimal", "body": "<p>Since <code>number_to_currency</code> returns a String, you can use <code>.remove(/0+$/)</code> to remove any trailing zeros:</p>\n\n<pre><code>number_to_currency(33.95,:precision =&gt; 4).remove(/0+$/)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 483, "user_id": 2990577, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/78cd1d73f39ed2dca2395cd6b91ad8a9?s=128&d=identicon&r=PG", "display_name": "dandlezzz", "link": "https://stackoverflow.com/users/2990577/dandlezzz"}, "is_accepted": false, "score": 1, "last_activity_date": 1432145815, "creation_date": 1432145815, "answer_id": 30357429, "question_id": 30357277, "link": "https://stackoverflow.com/questions/30357277/rails-number-to-currency-delete-trailing-zeroes-right-of-decimal/30357429#30357429", "title": "Rails number_to_currency delete trailing zeroes right of decimal", "body": "<p>The default for this method is 2. So you simply need </p>\n\n<p><code>number_to_currency(33.95)</code></p>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_currency\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActionView/Helpers/NumberHelper.html#method-i-number_to_currency</a></p>\n"}, {"comments": [{"owner": {"reputation": 2065, "user_id": 963080, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7f31d2d7ddcce97ad943689e6f09001d?s=128&d=identicon&r=PG", "display_name": "ctilley79", "link": "https://stackoverflow.com/users/963080/ctilley79"}, "edited": false, "score": 0, "creation_date": 1432146589, "post_id": 30357431, "comment_id": 48807129, "body": "Thank you!  This answer met my requirements since number_to_currency is inside a loop."}], "tags": [], "owner": {"reputation": 366, "user_id": 4921596, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9dmll.jpg?s=128&g=1", "display_name": "andreanne.wintheiser", "link": "https://stackoverflow.com/users/4921596/andreanne-wintheiser"}, "is_accepted": true, "score": 23, "last_activity_date": 1432145817, "creation_date": 1432145817, "answer_id": 30357431, "question_id": 30357277, "link": "https://stackoverflow.com/questions/30357277/rails-number-to-currency-delete-trailing-zeroes-right-of-decimal/30357431#30357431", "title": "Rails number_to_currency delete trailing zeroes right of decimal", "body": "<p>Try to specify <code>strip_insignificant_zeros</code> option:</p>\n\n<pre><code>number_to_currency(33.95, precision: 4, strip_insignificant_zeros: true)\n</code></pre>\n\n<p>It should remove zeros after decimal separator. <a href=\"https://github.com/rails/rails/blob/e6f9468e221999e5ea8342f8e72578e1f0a0ec09/activesupport/lib/active_support/number_helper/number_converter.rb#L31\">Here</a> is description of this option.</p>\n"}, {"tags": [], "owner": {"reputation": 1885, "user_id": 2288538, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/W96yd.jpg?s=128&g=1", "display_name": "Shalev Shalit", "link": "https://stackoverflow.com/users/2288538/shalev-shalit"}, "is_accepted": false, "score": 0, "last_activity_date": 1432148844, "last_edit_date": 1432148844, "creation_date": 1432146358, "answer_id": 30357594, "question_id": 30357277, "link": "https://stackoverflow.com/questions/30357277/rails-number-to-currency-delete-trailing-zeroes-right-of-decimal/30357594#30357594", "title": "Rails number_to_currency delete trailing zeroes right of decimal", "body": "<p>Try using <code>round</code> before <code>number_to_currency</code>:</p>\n\n<pre><code>number_to_currency(33.95.round(4)) # $33.95\nnumber_to_currency(0.0375.round(4)) # $0.0375\n</code></pre>\n"}], "owner": {"reputation": 2065, "user_id": 963080, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/7f31d2d7ddcce97ad943689e6f09001d?s=128&d=identicon&r=PG", "display_name": "ctilley79", "link": "https://stackoverflow.com/users/963080/ctilley79"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3585, "favorite_count": 1, "accepted_answer_id": 30357431, "answer_count": 5, "score": 9, "last_activity_date": 1432148844, "creation_date": 1432145319, "question_id": 30357277, "link": "https://stackoverflow.com/questions/30357277/rails-number-to-currency-delete-trailing-zeroes-right-of-decimal", "title": "Rails number_to_currency delete trailing zeroes right of decimal", "body": "<p>I have a dynamically generated table that multiplies price * qty.  Some of the prices are in partial cents. For example</p>\n\n<p>if the price of an item is 0.0375 I can display that in my table as</p>\n\n<pre><code>number_to_currency(0.0375,:precision =&gt; 4)\n=&gt; $0.0375\n</code></pre>\n\n<p>but on quantities where the price is a standard 2 decimal number I get</p>\n\n<pre><code>number_to_currency(33.95,:precision =&gt; 4)\n  =&gt; $39.9500\n</code></pre>\n\n<p>I need a way to trim the trailing zeroes of a decimal value.  Keep in mind that the output is in a Model.each block so I'm uncertain I can modify the precision parameter conditionally.</p>\n"}, {"tags": ["arrays", "ruby", "infinite-loop"], "answers": [{"tags": [], "owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "is_accepted": true, "score": 1, "last_activity_date": 1432147178, "last_edit_date": 1432147178, "creation_date": 1432145047, "answer_id": 30357197, "question_id": 30356947, "link": "https://stackoverflow.com/questions/30356947/ruby-infinite-while-loop/30357197#30357197", "title": "Ruby Infinite While Loop", "body": "<p>Your issue is on assigning <code>tmp</code> with <code>arr</code>. They are the same object as you can see here:</p>\n\n<pre><code>&gt; arr = [1,2,3]\n=&gt; [1, 2, 3]\n&gt; tmp = arr\n=&gt; [1, 2, 3]\n&gt; arr.concat([4,5,6])\n=&gt; [1, 2, 3, 4, 5, 6]\n&gt; tmp\n=&gt; [1, 2, 3, 4, 5, 6]\n</code></pre>\n\n<p>You'd need to make a copy of the array by using <code>dup</code> or <code>clone</code> pending on your needs</p>\n\n<p>if you do <code>tmp = arr.dup</code> it should fix your issue. </p>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 1, "last_activity_date": 1432145069, "creation_date": 1432145069, "answer_id": 30357205, "question_id": 30356947, "link": "https://stackoverflow.com/questions/30356947/ruby-infinite-while-loop/30357205#30357205", "title": "Ruby Infinite While Loop", "body": "<p><code>arr</code> and <code>tmp</code> are the same object. While adding to <code>arr</code> , <code>tmp</code> grows, so there are new subarrays for <code>tmp.each</code> to process.</p>\n"}, {"tags": [], "owner": {"reputation": 3290, "user_id": 1214951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/313ce4fdeb46839023cc31357b72710b?s=128&d=identicon&r=PG", "display_name": "chad_", "link": "https://stackoverflow.com/users/1214951/chad"}, "is_accepted": false, "score": 0, "last_activity_date": 1432148857, "last_edit_date": 1432148857, "creation_date": 1432148457, "answer_id": 30358231, "question_id": 30356947, "link": "https://stackoverflow.com/questions/30356947/ruby-infinite-while-loop/30358231#30358231", "title": "Ruby Infinite While Loop", "body": "<p>Your infinite loop is happening because you're adding items to the array in a second loop inside it, so subsequent iterations are acting on the previously added entries. Also, you are not making a copy of arr when you do 'tmp = arr', you are setting a reference.  Check this out and see if it helps:</p>\n\n<pre><code>&gt; arr = ['test','test1','test2']\n=&gt; [\"test\", \"test1\", \"test2\"]\n&gt; tmp = arr\n=&gt; [\"test\", \"test1\", \"test2\"]\n&gt; arr &lt;&lt; 'test3'\n=&gt; [\"test\", \"test1\", \"test2\", \"test3\"]\n&gt; tmp\n=&gt; [\"test\", \"test1\", \"test2\", \"test3\"]\n&gt; tmp = arr.dup\n=&gt; [\"test\", \"test1\", \"test2\", \"test3\"]\n&gt; arr &lt;&lt; 'test3'\n=&gt; [\"test\", \"test1\", \"test2\", \"test3\", \"test3\"]\n&gt; tmp\n=&gt; [\"test\", \"test1\", \"test2\", \"test3\"]\n</code></pre>\n\n<p>With that in mind, maybe you could try something like:</p>\n\n<pre><code>total = 4\noriginal_arr = Array.new(1) { Array.new(3, 127.5)}\nnew_arr = []\ntotal.times do |i|\n  original_arr.each do |v|\n    new_arr &lt;&lt; Array.new(12, v)\n    puts i\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8055, "user_id": 1461862, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Xk6rm.jpg?s=128&g=1", "display_name": "Mauricio Gracia Gutierrez", "link": "https://stackoverflow.com/users/1461862/mauricio-gracia-gutierrez"}, "edited": false, "score": 0, "creation_date": 1432166694, "post_id": 30361255, "comment_id": 48816190, "body": "providing the answer help, but answering why is creating a infinite loop will make it much better"}, {"owner": {"reputation": 24609, "user_id": 1974224, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/rQQMq.png?s=128&g=1", "display_name": "Cristik", "link": "https://stackoverflow.com/users/1974224/cristik"}, "edited": false, "score": 0, "creation_date": 1432183513, "post_id": 30361255, "comment_id": 48820645, "body": "Then you&#39;re not answering the question"}, {"owner": {"reputation": 195, "user_id": 1298928, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/60f7486464bf9418b6bfbdc3f0b3f439?s=128&d=identicon&r=PG", "display_name": "emvee", "link": "https://stackoverflow.com/users/1298928/emvee"}, "edited": false, "score": 0, "creation_date": 1432209828, "post_id": 30361255, "comment_id": 48836243, "body": "The questioned was already marked as answered and I don&#39;t have enough points to comment.."}], "tags": [], "owner": {"reputation": 195, "user_id": 1298928, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/60f7486464bf9418b6bfbdc3f0b3f439?s=128&d=identicon&r=PG", "display_name": "emvee", "link": "https://stackoverflow.com/users/1298928/emvee"}, "is_accepted": false, "score": -1, "last_activity_date": 1432159840, "creation_date": 1432159840, "answer_id": 30361255, "question_id": 30356947, "link": "https://stackoverflow.com/questions/30356947/ruby-infinite-while-loop/30361255#30361255", "title": "Ruby Infinite While Loop", "body": "<p>just use </p>\n\n<pre><code>arr += new_arr\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>arr.concat new_arr\n</code></pre>\n"}], "owner": {"reputation": 1936, "user_id": 949598, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/PaL8j.jpg?s=128&g=1", "display_name": "Choylton B. Higginbottom", "link": "https://stackoverflow.com/users/949598/choylton-b-higginbottom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 30357197, "answer_count": 4, "score": 0, "last_activity_date": 1432159840, "creation_date": 1432144246, "last_edit_date": 1432147777, "question_id": 30356947, "link": "https://stackoverflow.com/questions/30356947/ruby-infinite-while-loop", "title": "Ruby Infinite While Loop", "body": "<p>My goal is to take each element in multidimensional array, create 12 copies that will be processed (without changing the original value), append the processed values to the array, and repeat if necessary to meet the total number of desired values:</p>\n\n<pre><code>total = 4\narr = Array.new(1) { Array.new(3, 127.5) }\n\nwhile arr.count &lt; total\n  tmp = arr\n\n  tmp.each do |item|\n    new_arr = Array.new(12, item)\n    #processing the 12 arrays I just created would happen here\n    arr.concat new_arr\n    puts arr.count \n  end \nend\n</code></pre>\n\n<p>This portion of the code creates an infinite loop.  I can not understand why.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 976, "user_id": 3213313, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/59ba364004f1e00b6fbf239d2891064d?s=128&d=identicon&r=PG&f=1", "display_name": "BarFooBar", "link": "https://stackoverflow.com/users/3213313/barfoobar"}, "reply_to_user": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1432146689, "post_id": 30357082, "comment_id": 48807183, "body": "Edited. Sometimes I forget that versions aren&#39;t real decimals."}], "tags": [], "owner": {"reputation": 976, "user_id": 3213313, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/59ba364004f1e00b6fbf239d2891064d?s=128&d=identicon&r=PG&f=1", "display_name": "BarFooBar", "link": "https://stackoverflow.com/users/3213313/barfoobar"}, "is_accepted": true, "score": 1, "last_activity_date": 1432146656, "last_edit_date": 1432146656, "creation_date": 1432144680, "answer_id": 30357082, "question_id": 30356923, "link": "https://stackoverflow.com/questions/30356923/could-not-find-activesupport-when-3-versions-installed/30357082#30357082", "title": "&quot;Could not find activesupport&quot; when 3 versions installed", "body": "<p><a href=\"http://guides.rubygems.org/patterns/\" rel=\"nofollow\">http://guides.rubygems.org/patterns/</a></p>\n\n<p>The <code>~&gt;</code>or 'twiddle-waka' is a ruby gems shortcut to specify the earliest version of the gem you can use without letting you go up to the next major release. </p>\n\n<p>Your gem is being a bit unorthodox and also specifying a patch level.\nSo the gem_specification you're working with (<code>activesupport' (~&gt; 2.3.5)</code>) really means minimum version of 2.3.5 maximum of the last patch released before 2.4.0. </p>\n\n<p>The activesupport versions you have installed are all for subsequent major releases and won't work. Install something between 2.3.5 and 2.4.0 and you should be good to go.</p>\n"}, {"comments": [{"owner": {"reputation": 1049, "user_id": 3251199, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bf61d317161fc12eb6c9b74c546be321?s=128&d=identicon&r=PG&f=1", "display_name": "nicholas79171", "link": "https://stackoverflow.com/users/3251199/nicholas79171"}, "edited": false, "score": 0, "creation_date": 1432146445, "post_id": 30357230, "comment_id": 48807029, "body": "I was afraid I&#39;d run into issues with the old gem, but it was the best thing I could find for an interface with CareerBuilder&#39;s API. Thanks for the info."}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "reply_to_user": {"reputation": 1049, "user_id": 3251199, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bf61d317161fc12eb6c9b74c546be321?s=128&d=identicon&r=PG&f=1", "display_name": "nicholas79171", "link": "https://stackoverflow.com/users/3251199/nicholas79171"}, "edited": false, "score": 1, "creation_date": 1432146790, "post_id": 30357230, "comment_id": 48807229, "body": "Yes, I see it is the only gem for Career Builder. Since it is a REST API, you may want to use an HTTP client gem. I have used HTTParty and would recommend it. See <a href=\"https://www.ruby-toolbox.com/categories/http_clients\" rel=\"nofollow noreferrer\">ruby-toolbox.com/categories/http_clients</a> for other HTTP client gems."}, {"owner": {"reputation": 1049, "user_id": 3251199, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bf61d317161fc12eb6c9b74c546be321?s=128&d=identicon&r=PG&f=1", "display_name": "nicholas79171", "link": "https://stackoverflow.com/users/3251199/nicholas79171"}, "edited": false, "score": 0, "creation_date": 1432147951, "post_id": 30357230, "comment_id": 48807882, "body": "I&#39;ll be sure to take a look at that as well as HTTP clients in Python. Thanks again for the help."}], "tags": [], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "is_accepted": false, "score": 1, "last_activity_date": 1432145493, "last_edit_date": 1495541160, "creation_date": 1432145149, "answer_id": 30357230, "question_id": 30356923, "link": "https://stackoverflow.com/questions/30356923/could-not-find-activesupport-when-3-versions-installed/30357230#30357230", "title": "&quot;Could not find activesupport&quot; when 3 versions installed", "body": "<p>Yes. It does require Active Support version >= 2.3.5 and &lt; 2.4.0. All of your Active Support versions are > 2.4.0.</p>\n\n<p><code>~&gt;</code> is called the spermy operator. See <a href=\"https://stackoverflow.com/questions/3414337/meaning-of-tilde-greater-than-in-version-requirement\">Meaning of tilde-greater-than (~&gt;) in version requirement?</a></p>\n\n<p>The gem has not been updated in 4 years, so it uses Rails 2.</p>\n\n<p>FWIW, I don't think you'll have much luck getting it to work, so you may want to find a similar gem that works with Rails 4 and has been updated within the last few months.</p>\n"}], "owner": {"reputation": 1049, "user_id": 3251199, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/bf61d317161fc12eb6c9b74c546be321?s=128&d=identicon&r=PG&f=1", "display_name": "nicholas79171", "link": "https://stackoverflow.com/users/3251199/nicholas79171"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 660, "favorite_count": 0, "accepted_answer_id": 30357082, "answer_count": 2, "score": 1, "last_activity_date": 1432146656, "creation_date": 1432144197, "question_id": 30356923, "link": "https://stackoverflow.com/questions/30356923/could-not-find-activesupport-when-3-versions-installed", "title": "&quot;Could not find activesupport&quot; when 3 versions installed", "body": "<p>I'm just trying to use the simple <a href=\"https://github.com/mguterl/career_builder\" rel=\"nofollow\"><code>career_builder</code> gem</a> and just get it imported by running the simple script:</p>\n\n<pre><code>require 'career_builder'\n\nputs 'Hello world!'\n</code></pre>\n\n<p>and yet get the following error: <code>/Library/Ruby/Site/2.0.0/rubygems/dependency.rb:315:in 'to_specs': Could not find 'activesupport' (~&gt; 2.3.5) - did find: [activesupport-4.2.1,activesupport-3.1.12,activesupport-3.0.3] (Gem::LoadError)</code></p>\n\n<p>I installed the gem with <code>gem install career_builder</code> and ran <code>bundle install</code> and even updated <code>activesupport</code> to the most recent version, but for some reason, the program can't find the newer version of <code>activesupport</code>. Does the gem require version <code>2.3.5</code>?</p>\n"}, {"tags": ["ruby", "r", "shell"], "comments": [{"owner": {"reputation": 17690, "user_id": 3204250, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b9bff153828ae0d1323d2aa5d6ab70ae?s=128&d=identicon&r=PG&f=1", "display_name": "cdeterman", "link": "https://stackoverflow.com/users/3204250/cdeterman"}, "edited": false, "score": 1, "creation_date": 1432146871, "post_id": 30356864, "comment_id": 48807257, "body": "I know you said Ruby is in your system path variables but can you verify that you see ruby in the <code>PATH</code> environmental variable in R with <code>Sys.getenv(&quot;PATH&quot;)</code>?"}, {"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1432147504, "post_id": 30356864, "comment_id": 48807645, "body": "what shell are you using? what happens if you specify the shell in the shell command.  try setting intern=FALSE, wait=TRUE and see what the output is in the console"}, {"owner": {"reputation": 899, "user_id": 2948944, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/00e73386ad27338d4262e4cccf59a1d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Calverley", "link": "https://stackoverflow.com/users/2948944/nathan-calverley"}, "reply_to_user": {"reputation": 17690, "user_id": 3204250, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b9bff153828ae0d1323d2aa5d6ab70ae?s=128&d=identicon&r=PG&f=1", "display_name": "cdeterman", "link": "https://stackoverflow.com/users/3204250/cdeterman"}, "edited": false, "score": 0, "creation_date": 1432219872, "post_id": 30356864, "comment_id": 48844007, "body": "@cdeterman Thank you, that was the issue. I didn&#39;t even know R had an internal path environment variable. I added the Ruby /bin directory via the Sys.setenv() function and I now get the proper output of the Ruby version from the shell() command. Thanks!!"}, {"owner": {"reputation": 17690, "user_id": 3204250, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b9bff153828ae0d1323d2aa5d6ab70ae?s=128&d=identicon&r=PG&f=1", "display_name": "cdeterman", "link": "https://stackoverflow.com/users/3204250/cdeterman"}, "edited": false, "score": 0, "creation_date": 1432220424, "post_id": 30356864, "comment_id": 48844457, "body": "@NathanCalverley, I will add answer below so we can close this question."}], "answers": [{"tags": [], "owner": {"reputation": 17690, "user_id": 3204250, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b9bff153828ae0d1323d2aa5d6ab70ae?s=128&d=identicon&r=PG&f=1", "display_name": "cdeterman", "link": "https://stackoverflow.com/users/3204250/cdeterman"}, "is_accepted": true, "score": 1, "last_activity_date": 1432220404, "creation_date": 1432220404, "answer_id": 30377478, "question_id": 30356864, "link": "https://stackoverflow.com/questions/30356864/running-ruby-script-via-shell-function/30377478#30377478", "title": "Running Ruby Script via shell() function", "body": "<p>You need to confirm that the ruby path is within <code>PATH</code> environmental variable using <code>Sys.getenv(\"PATH\")</code>.  If it isn't, you can always add it as you stated above with <code>Sys.setenv</code>.</p>\n\n<p>Here is a way to simply append the <code>PATH</code> variable with a new directory.</p>\n\n<pre><code>Sys.setenv(PATH = paste(Sys.getenv(\"PATH\"), \"/my/ruby/dir/bin\", sep=\":\"))\n</code></pre>\n\n<p>I'm not aware of a more concise way to append a path to an existing environmental variable from within R.</p>\n"}], "owner": {"reputation": 899, "user_id": 2948944, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/00e73386ad27338d4262e4cccf59a1d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Calverley", "link": "https://stackoverflow.com/users/2948944/nathan-calverley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 30377478, "answer_count": 1, "score": 1, "last_activity_date": 1432220404, "creation_date": 1432144038, "last_edit_date": 1432144694, "question_id": 30356864, "link": "https://stackoverflow.com/questions/30356864/running-ruby-script-via-shell-function", "title": "Running Ruby Script via shell() function", "body": "<p>I'm trying to (eventually) execute a ruby script via R by calling the shell() function. As a first step though, I am simply trying to verify that I can call the ruby compiler via this function, and I am getting an error. Here is my code:</p>\n\n<pre><code>dir &lt;- shell(\"ruby -v\", intern=TRUE) \n</code></pre>\n\n<p>This throws a warning: Warning message: running command   </p>\n\n<pre><code>'C:\\WINDOWS\\system32\\cmd.exe /c ruby -v' had status 1\n</code></pre>\n\n<p>And the 'dir' variable is blank. I have verified that the command \"ruby -v\" works when run in a command prompt, and that Ruby is included in my system path variables. </p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1432147313, "post_id": 30356856, "comment_id": 48807528, "body": "This has absolutely nothing whatsoever to do with <code>Symbol#to_proc</code>. <code>Enumerable#inject</code> simply takes the name of the method to use as a <code>Symbol</code>, just like, say, <code>attr_accessor</code> or <code>define_method</code> or <code>send</code>."}], "tags": [], "owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "is_accepted": false, "score": 0, "last_activity_date": 1432144019, "creation_date": 1432144019, "answer_id": 30356856, "question_id": 30356668, "link": "https://stackoverflow.com/questions/30356668/im-learning-ruby-and-i-dont-clearly-understand-what-means-in-inject/30356856#30356856", "title": "I&#39;m learning Ruby and I don&#39;t clearly understand what :* means in inject(:*)", "body": "<p>It means <code>symbol to proc</code> and it's a shortcut. Typically you would write something like </p>\n\n<pre><code>array.map { |e| e.join }\n</code></pre>\n\n<p>with symbol to proc, the shorthand would be</p>\n\n<pre><code>array.map(&amp;:join)\n</code></pre>\n\n<p><code>inject</code> and <code>reduce</code> are similar, but you don't need the <code>&amp;</code> in those cases</p>\n\n<p>For example, if you have an array of numbers called <code>numbers</code></p>\n\n<p>To sum the numbers, you could do</p>\n\n<pre><code>numbers.inject(&amp;:+) \n</code></pre>\n\n<p>or you could leave off the ampersand</p>\n\n<pre><code>numbers.inject(:+)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 976, "user_id": 3213313, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/59ba364004f1e00b6fbf239d2891064d?s=128&d=identicon&r=PG&f=1", "display_name": "BarFooBar", "link": "https://stackoverflow.com/users/3213313/barfoobar"}, "is_accepted": false, "score": 0, "last_activity_date": 1432144167, "creation_date": 1432144167, "answer_id": 30356910, "question_id": 30356668, "link": "https://stackoverflow.com/questions/30356668/im-learning-ruby-and-i-dont-clearly-understand-what-means-in-inject/30356910#30356910", "title": "I&#39;m learning Ruby and I don&#39;t clearly understand what :* means in inject(:*)", "body": "<p><a href=\"http://ruby-doc.org/core-2.2.2/Enumerable.html#method-i-inject\" rel=\"nofollow\">http://ruby-doc.org/core-2.2.2/Enumerable.html#method-i-inject</a></p>\n\n<p>Inject is a method on enumerable that combines the elements of said enumerable using a symbol (as in your case) or a block (as in your proposed longhand).</p>\n\n<p>For example: </p>\n\n<p><code>(5..10).reduce(:*)</code> is equivalent to <code>(5..10).inject { |prod, n| prod + n }</code></p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 4921592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12b7dd22f5dcdf958fa6ebafc53a588?s=128&d=identicon&r=PG&f=1", "display_name": "JMAnderson", "link": "https://stackoverflow.com/users/4921592/jmanderson"}, "edited": false, "score": 0, "creation_date": 1432160346, "post_id": 30356913, "comment_id": 48814320, "body": "So, when you use a symbol, your accumulator is implied, so it really is just a shorter way of saying the same thing."}, {"owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "reply_to_user": {"reputation": 41, "user_id": 4921592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12b7dd22f5dcdf958fa6ebafc53a588?s=128&d=identicon&r=PG&f=1", "display_name": "JMAnderson", "link": "https://stackoverflow.com/users/4921592/jmanderson"}, "edited": false, "score": 0, "creation_date": 1432160754, "post_id": 30356913, "comment_id": 48814467, "body": "Yes, from the documentation the symbol which is just a method name is sent to the <code>memo</code> with <code>obj</code> as the argument."}], "tags": [], "owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "is_accepted": false, "score": 2, "last_activity_date": 1432144169, "creation_date": 1432144169, "answer_id": 30356913, "question_id": 30356668, "link": "https://stackoverflow.com/questions/30356668/im-learning-ruby-and-i-dont-clearly-understand-what-means-in-inject/30356913#30356913", "title": "I&#39;m learning Ruby and I don&#39;t clearly understand what :* means in inject(:*)", "body": "<p><code>:*</code> is simply the method name for <code>*</code> of the method for <code>inject</code> to execute. If you look at the documentation for <code>inject</code> <a href=\"http://ruby-doc.org/core-2.2.2/Enumerable.html#method-i-inject\" rel=\"nofollow\">http://ruby-doc.org/core-2.2.2/Enumerable.html#method-i-inject</a></p>\n\n<p>It states that </p>\n\n<blockquote>\n  <p>If you specify a symbol instead, then each element in the collection will be passed to the named method of memo. In either case, the result becomes the new value for memo. At the end of the iteration, the final value of memo is the return value for the method.</p>\n</blockquote>\n\n<p>So taken that <code>inject { |memo, obj| block }</code></p>\n\n<p>The following are equal</p>\n\n<pre><code>ary = [1,2,3]\nary.inject(:*)\n#=&gt; 6\nary.inject { |memo, obj| memo.*(obj) }\n#=&gt; 6\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 51929, "user_id": 1084774, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/13403db744d8aa130bb317576cc1df30?s=128&d=identicon&r=PG", "display_name": "PSkocik", "link": "https://stackoverflow.com/users/1084774/pskocik"}, "is_accepted": false, "score": 2, "last_activity_date": 1432160302, "last_edit_date": 1592644375, "creation_date": 1432144242, "answer_id": 30356945, "question_id": 30356668, "link": "https://stackoverflow.com/questions/30356668/im-learning-ruby-and-i-dont-clearly-understand-what-means-in-inject/30356945#30356945", "title": "I&#39;m learning Ruby and I don&#39;t clearly understand what :* means in inject(:*)", "body": "<h1>Short explanation</h1>\n<p><code>:*</code> is a symbol. Symbols are immutable strings. <code>:*</code> is like <code>&quot;*&quot;</code> except it's immutable.</p>\n<p>In ruby, multiplication is a method invocation too. It's equivalent invoking the <code>.*(second)</code> method of the first multiplier with the second multiplier as an argument. In fact, you can type <code>3.*(4)</code> instead of <code>3*4</code>. <code>3*4</code> is just syntactic sugar as far as ruby is concerned.</p>\n<p>Method invocation in ruby can be invoked by <code>public_send</code>ing symbol messages to objects. <code>3.public_send(:*, 4)</code> will also work just like <code>3*4</code>.</p>\n<p>The argument to inject is interpreted as what type of message should be <code>public_senT</code>, that is, what method should be invoked from the internals of the inject method.</p>\n<h1>Longer explanation</h1>\n<p>You can think of</p>\n<pre><code>[ 1, 2, 3, 4 ].inject(:*)\n</code></pre>\n<p>as injecting '*' between each adjacent pair of each enumerable object that <code>inject</code> is invoked on:</p>\n<pre><code>[ 1, 2, 3, 4 ].inject(:*) == 1 * 2 * 3 * 4\n</code></pre>\n<p>Of course <code>1 * 2 * 3 * 4</code> is equivalent to going from left to right, and applying :* on your running tally and the next number to get your next tally, and then returning the final tally.</p>\n<pre><code>module Enumerable\n  def inject_asterisk\n     tally = first\n     rest = slice(1, length - 1)\n     rest.each  do |next_num|\n       tally = tally * next_num\n     end\n     return tally\n  end\nend\n[2, 3, 5].inject_asterisk #=&gt; 30\n</code></pre>\n<p>You can generalize this by making the operation that combines the <code>tally</code> and <code>next_number</code> to get your next <code>tally</code> an argument function. Blocks in ruby serve basically as argument functions that always have a reserved spot.</p>\n<pre><code>module Enumerable\n  def inject_block(&amp;block)\n     tally = first\n     rest = slice(1, length - 1)\n     rest.each  do |next_num|\n       tally = block.call(tally, next_num)\n     end\n     return tally\n  end\nend\n[2, 3, 5].inject_block {|tally, next_num| tally + next_num } #=&gt; 10\n</code></pre>\n<p>If your block is always going to be of the form</p>\n<pre><code>{|tally, next_num| tally.method_of_tally(next_num) }\n</code></pre>\n<p>as it is in this case (remember <code>tally + next_num</code> &lt;==&gt; <code>tally.+(next_num)</code> &lt;==&gt; <code>tally.public_send(:+,next_num)</code>, you can decide to only pass <code>:method_of_tally</code> as the argument and imply the block.</p>\n<pre><code> module Enumerable\n  def my_inject(method_of_tally_symbol, &amp;block)\n\n     if method_of_tally_symbol\n        block = Proc.new  { |tally, next_num| \n               tally.public_send(method_of_tally_symbol, next_num) \n               }\n     end\n     \n     tally = first\n     rest = slice(1, length - 1)\n     rest.each  do |next_num|\n       tally = block.call(tally, next_num)\n     end\n     return tally\n  end\nend\n[2, 3, 5].my_inject(:+) #=&gt; 10\n</code></pre>\n<p>It's all about extracting repeated patterns into reusable components so that you don't have to type as much.</p>\n"}], "owner": {"reputation": 41, "user_id": 4921592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b12b7dd22f5dcdf958fa6ebafc53a588?s=128&d=identicon&r=PG&f=1", "display_name": "JMAnderson", "link": "https://stackoverflow.com/users/4921592/jmanderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "closed_date": 1432147214, "answer_count": 4, "score": 4, "last_activity_date": 1432160302, "creation_date": 1432143441, "last_edit_date": 1432143644, "question_id": 30356668, "link": "https://stackoverflow.com/questions/30356668/im-learning-ruby-and-i-dont-clearly-understand-what-means-in-inject", "closed_reason": "Duplicate", "title": "I&#39;m learning Ruby and I don&#39;t clearly understand what :* means in inject(:*)", "body": "<p>I'm writing a method for calculating the factorial of a number and I found something similar to this in my search. </p>\n\n<pre><code>def factorial(number)\n  (1..number).inject(:*) || 1\nend\n</code></pre>\n\n<p>It works and I understand what the inject function is doing, but I don't clearly understand what the <code>(:\\*)</code> part really means. </p>\n\n<p>I know it must be a shorthand version of writing <code>{|num, prod| num*prod}</code>, but I would love a clear explanation.  Thanks!!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1956, "user_id": 2733436, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e128e2222f838003de04114979843ff3?s=128&d=identicon&r=PG&f=1", "display_name": "user1010101", "link": "https://stackoverflow.com/users/2733436/user1010101"}, "edited": false, "score": 0, "creation_date": 1432158317, "post_id": 30356781, "comment_id": 48813550, "body": "I tried your approach and i never saw flash saying &quot;no address entered &quot; is there something else I need to do?"}, {"owner": {"reputation": 616, "user_id": 4685699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94104871d02b317ef507a0a366c41f72?s=128&d=identicon&r=PG", "display_name": "Clark", "link": "https://stackoverflow.com/users/4685699/clark"}, "reply_to_user": {"reputation": 1956, "user_id": 2733436, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e128e2222f838003de04114979843ff3?s=128&d=identicon&r=PG&f=1", "display_name": "user1010101", "link": "https://stackoverflow.com/users/2733436/user1010101"}, "edited": false, "score": 0, "creation_date": 1432215231, "post_id": 30356781, "comment_id": 48840272, "body": "There shouldn&#39;t be, no. The default layout should handle all flash messages. Unless you changed the default layout <code>application.html.erb</code> and how it renders flashes it should work, for example telling it to only show <code>flash[:error]</code> you&#39;d need to set the name of the flash in your controller to <code>[:error]</code> instead of <code>[:address_error]</code>."}], "tags": [], "owner": {"reputation": 616, "user_id": 4685699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94104871d02b317ef507a0a366c41f72?s=128&d=identicon&r=PG", "display_name": "Clark", "link": "https://stackoverflow.com/users/4685699/clark"}, "is_accepted": false, "score": 1, "last_activity_date": 1432145365, "last_edit_date": 1432145365, "creation_date": 1432143789, "answer_id": 30356781, "question_id": 30356398, "link": "https://stackoverflow.com/questions/30356398/proper-way-to-handle-a-form-when-user-provides-no-inputs/30356781#30356781", "title": "Proper way to handle a form when user provides no inputs", "body": "<p>Inside of <code>def create ...</code></p>\n\n<pre><code>if params[:address].blank? || params[:destaddress].blank? # Checks if it is nil or = \"\"\n  flash[:address_error] = \"No address entered\"\n  render 'new' and return # render new shows the form again, return makes sure we\n                          # don't do anything else in the action\n                          # you can also do redirect_to, but this will be a little\n                          # faster since you have no logic the new action\nend\n</code></pre>\n\n<p>You should do this early in the action, so you don't waste time doing other things in the action.</p>\n\n<p>As Sharvy Ahmed mentioned front-end validation is an option as well, and a good idea. An alternative to the HTML5 method he showed is JQuery, which rails uses by default. That might looks something like this.</p>\n\n<pre><code>$('form').submit(function() {  //When a form is submitted...\n  $('input').each(function() { //Check each input...\n    if ($(this).val() == \"\") { //To see if it is empty...\n      alert(\"Missing address\");//Say that it is\n      return false;            //Don't submit the form\n    }\n  });\n  return;                      //If we made it this far, all is well, submit the form\n});\n</code></pre>\n\n<p>However you should not rely on client side validation, as a user can manually go to the url, bypassing the page with the validation.</p>\n"}, {"tags": [], "owner": {"reputation": 6602, "user_id": 3425360, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D0hYGNyMGPo/AAAAAAAAAAI/AAAAAAAAA1c/wVJzgXu5zZI/photo.jpg?sz=128", "display_name": "Sharvy Ahmed", "link": "https://stackoverflow.com/users/3425360/sharvy-ahmed"}, "is_accepted": false, "score": 1, "last_activity_date": 1432146227, "last_edit_date": 1432146227, "creation_date": 1432144443, "answer_id": 30357009, "question_id": 30356398, "link": "https://stackoverflow.com/questions/30356398/proper-way-to-handle-a-form-when-user-provides-no-inputs/30357009#30357009", "title": "Proper way to handle a form when user provides no inputs", "body": "<p>First of all validations can be checked in front-end as well as in back-end. </p>\n\n<p>You can use html5 <code>required</code> to make the input field mandatory and no one can proceed unless they write something.</p>\n\n<pre><code>&lt;%= text_field_tag(\"address\", params['address'], :class =&gt; 'form-control'), :required =&gt; true %&gt;\n</code></pre>\n\n<p>For back-end validation, you can check if the fields are not <code>nil</code> like this:</p>\n\n<pre><code>if curAddress &amp;&amp; destAddress\n  # Do your work here ...\nend\n</code></pre>\n\n<hr>\n\n<p>By the way, you will have to refactor the code a lot. A simple refactoring could be declaring a private method to get the nearest location ids by distance like this:</p>\n\n<pre><code>private\ndef nearest_by_distance(address, n)\n  Stop.by_distance(:origin =&gt; address).limit(n).pluck(:id)\nend\n</code></pre>\n\n<p>Then in your <code>create</code> action you can do:</p>\n\n<pre><code>current_address = params[:address]\ndestination_address = params[:destaddress]\n\n@start_from_location_ids = nearest_by_distance(current_address, 2)\n@end_to_location_ids = nearest_by_distance(destination_address, 2)\n</code></pre>\n\n<p>Hope you got the idea?</p>\n"}], "owner": {"reputation": 1956, "user_id": 2733436, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e128e2222f838003de04114979843ff3?s=128&d=identicon&r=PG&f=1", "display_name": "user1010101", "link": "https://stackoverflow.com/users/2733436/user1010101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1432146227, "creation_date": 1432142580, "question_id": 30356398, "link": "https://stackoverflow.com/questions/30356398/proper-way-to-handle-a-form-when-user-provides-no-inputs", "title": "Proper way to handle a form when user provides no inputs", "body": "<p>I have a simple application that will ask user to enter their start and end address and once they do that they can hit submit and get a list of the next 3 buses/trains to their destinations. However I am not able to handle the case where the user does not enter anything at all and hits submit button.</p>\n\n<p>Here is the code of the simple form</p>\n\n<pre><code>   &lt;%= form_tag(\"/welcome/index\", method: \"post\") do %&gt;\n  &lt;div class =\"input-group\"&gt;\n  &lt;label&gt;Current Location&lt;/label&gt;\n  &lt;%= text_field_tag(\"address\", params['address'], :class =&gt; 'form-control') %&gt;\n&lt;/div&gt;&lt;br/&gt;\n&lt;div class =\"input-group\"&gt;\n  &lt;label&gt;Destination Location&lt;/label&gt;\n  &lt;%= text_field_tag(\"destaddress\", params['destaddress'], :class =&gt; 'form-control') %&gt;\n  &lt;/div&gt;\n\n\n  &lt;p&gt;\n    &lt;br/&gt;\n&lt;%= submit_tag \"\", :value =&gt; \"Find Buses\", :class =&gt; \"btn btn-default\" %&gt;  &lt;/p&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>Here is my controller where i capture user's input and run my logic to give the list of buses.</p>\n\n<pre><code>class WelcomeController &lt; ApplicationController\n  # displays the form, so change the name of the form you have now to new.html.erb\n  def new\n  end\n\n  # the form will pass to this action to perform logic on longitude and latitude\n  def create\n    curAddress = params[:address]\n    destAddress = params[:destaddress]\n\n\n\n    #2 close stops to current location\n    @currentList = Stop.by_distance(:origin =&gt; curAddress).limit(2)\n\n    if @currentList.length == 0\n      flash[:error] = \"Somethig is wrong\"\n    end\n    #2 closest stops to destination location\n    @destList = Stop.by_distance(:origin =&gt; destAddress).limit(2)\n\n    @startIds = Array.new\n    2.times do |i|\n      @startIds.push(@currentList[i].id)\n    end\n\n    @endIds = Array.new\n    2.times do |i|\n      @endIds.push(@destList[i].id)\n    end\n\n\n    @currentStop = Stop.closest(:origin =&gt; curAddress)\n    @destinationStop = Stop.closest(:origin =&gt; destAddress)\n\n\n\n         @timeNow = Time.now.in_time_zone(\"EST\") + 1.hour\n    @finalTime = @timeNow.strftime(\"%H:%M:%S\")\n\n    startStopId = @currentStop.first.id\n    endStopId = @destinationStop.first.id\n\n     #update it based on succeed\n    @cStop = Stop.find(startStopId)\n    @dStop = Stop.find(endStopId)\n\n\n\n\n    testMethod(startStopId,endStopId)  \n\n\n    render :index\n  end\n</code></pre>\n\n<p>Above what i do is basically take user's input and then try to use a gem called Geokit to find the two closest stops for some given address by user and store their ids in <code>@currentList and @destList</code></p>\n\n<p>So obviously if the user has not given any input than those 2 lists should be empty right. So using that logic I tried this</p>\n\n<pre><code> if @currentList.length == 0\n      flash[:error] = \"Somethig is wrong\"\n    end\n</code></pre>\n\n<p>However I am not able to handle the case where user gives no input. So i was wondering how to handle it? Ideally I want to display a message on the form saying \"No inputs entered\" so user will retry to enter some input and then hit submit. I am extremely new to ruby on rails , for instance I know in java i could throw exception or something.</p>\n"}, {"tags": ["ruby", "gem"], "comments": [{"owner": {"reputation": 3640, "user_id": 1591957, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5f8f7f625b8466f0f163f4c55c30538c?s=128&d=identicon&r=PG", "display_name": "Rebs", "link": "https://stackoverflow.com/users/1591957/rebs"}, "edited": false, "score": 0, "creation_date": 1461209623, "post_id": 30355907, "comment_id": 61097549, "body": "I had every single gem install failing, even <code>gem update --system</code>. I think my router did something retarded. Rebooted everything and problem was &quot;resolved&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 551, "user_id": 211716, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/be443b085eb5281638d369c5241f641d?s=128&d=identicon&r=PG", "display_name": "Peter Giacomo Lombardo", "link": "https://stackoverflow.com/users/211716/peter-giacomo-lombardo"}, "is_accepted": false, "score": 1, "last_activity_date": 1432152398, "creation_date": 1432152398, "answer_id": 30359379, "question_id": 30355907, "link": "https://stackoverflow.com/questions/30355907/no-such-name-error-on-all-gem-install-attempts/30359379#30359379", "title": "&#39;no such name&#39; error on all gem install attempts", "body": "<p>It's possible that one of the gems that you installed declares an invalid dependency such as <code>&lt;gemname&gt;</code> (specifically).</p>\n\n<p>To validate this, open an <code>irb</code> or <code>pry</code> console and run <code>Gem.loaded_specs</code> to see if the string <code>&lt;gemname&gt;</code> shows up anywhere.</p>\n\n<p>You could also try updating your rubygems with <code>gem update --system</code>.</p>\n\n<p>And finally, you could also try to run <code>gem check</code> to validate all installed gems.</p>\n\n<p>Unfortunately, this appears to be an issue that needs to be investigated to get to the root cause.</p>\n"}, {"tags": [], "owner": {"reputation": 1184, "user_id": 3056720, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/311fc7bcd7da31aa021605e190a3e7ee?s=128&d=identicon&r=PG&f=1", "display_name": "Aeradriel", "link": "https://stackoverflow.com/users/3056720/aeradriel"}, "is_accepted": false, "score": 1, "last_activity_date": 1489597167, "creation_date": 1489597167, "answer_id": 42816176, "question_id": 30355907, "link": "https://stackoverflow.com/questions/30355907/no-such-name-error-on-all-gem-install-attempts/42816176#42816176", "title": "&#39;no such name&#39; error on all gem install attempts", "body": "<p>I ran into the same issue before figuring out my session was fucked up. Indeed the command <code>whoami</code> was displaying an id and not my username. I logged out and logged in again and everything was solved.</p>\n"}], "owner": {"reputation": 243, "user_id": 2901181, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5f5197597a513f438cff1456c135f52f?s=128&d=identicon&r=PG&f=1", "display_name": "user2901181", "link": "https://stackoverflow.com/users/2901181/user2901181"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1355, "favorite_count": 1, "answer_count": 2, "score": 3, "last_activity_date": 1489597167, "creation_date": 1432140876, "question_id": 30355907, "link": "https://stackoverflow.com/questions/30355907/no-such-name-error-on-all-gem-install-attempts", "title": "&#39;no such name&#39; error on all gem install attempts", "body": "<p>I just installed Ruby 2.2.2 on a Windows 7 64-bit VM. Every <code>gem install &lt;gemname&gt;</code> attempt fails with the following error:</p>\n\n<blockquote>\n<pre><code>ERROR: Could not find a valid gem '&lt;gemname&gt;' ()= 0), here is why:\nUnable to download data from https://rubygems.org/ - no such name\n(https://api.rubygems.org/specs.4.8.gz)\n</code></pre>\n</blockquote>\n\n<p>However, the list generated by the <code>gem list</code> contains the gem that I thought failed. Is it actually installed or not? I assume it isn't but even if it is, the error concerns me. </p>\n\n<p>I know that I am working behind a proxy so I've tried appending <code>--http-proxy</code> but that hasn't helped either. </p>\n\n<p>Any ideas to troubleshoot this? Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord", "ngresource"], "answers": [{"comments": [{"owner": {"reputation": 2688, "user_id": 164237, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5290492d327de6973c0f52e82d9cbf35?s=128&d=identicon&r=PG", "display_name": "bschaeffer", "link": "https://stackoverflow.com/users/164237/bschaeffer"}, "edited": false, "score": 0, "creation_date": 1432142625, "post_id": 30355976, "comment_id": 48804825, "body": "That <code>permit</code> call will actually not allow the JSON payload you show as an example. <code>user_permissions_attributes</code> will be allowed, but not <code>user_permissions</code>."}], "tags": [], "owner": {"reputation": 3593, "user_id": 613256, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JuDL2.jpg?s=128&g=1", "display_name": "Stanislav Mekhonoshin", "link": "https://stackoverflow.com/users/613256/stanislav-mekhonoshin"}, "is_accepted": false, "score": 1, "last_activity_date": 1432142830, "last_edit_date": 1432142830, "creation_date": 1432141139, "answer_id": 30355976, "question_id": 30355890, "link": "https://stackoverflow.com/questions/30355890/rails-permit-nested-array/30355976#30355976", "title": "Rails permit nested array", "body": "<p>Well, you post an array of <em>hashes</em>, not a hash.</p>\n\n<p>So this code</p>\n\n<pre><code>user_permissions_attributes: [ :user_id, :resource_id, :can_read, :can_update, :can_create, :can_delete ]\n</code></pre>\n\n<p>will permit such structure</p>\n\n<pre><code> {\n  \"id\": 10,\n  \"first_name\": \"Joe\",\n  \"last_name\": \"Shmoe\",\n  \"user_permissions_attributes\": [    \n      \"organization_resource_id\": 20,\n      \"user_id\": 10,\n      \"can_update\": true,\n      \"can_read\": true\n  ]\n}\n</code></pre>\n\n<p>Try to whitelist all params at \"user_permissions\"</p>\n\n<pre><code>user_permissions_attributes: []\n</code></pre>\n\n<p>Or check out this article, to learn how to build advanced whitelists with StrongParams\n<a href=\"http://patshaughnessy.net/2014/6/16/a-rule-of-thumb-for-strong-parameters\" rel=\"nofollow\">http://patshaughnessy.net/2014/6/16/a-rule-of-thumb-for-strong-parameters</a></p>\n"}, {"tags": [], "owner": {"reputation": 2688, "user_id": 164237, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5290492d327de6973c0f52e82d9cbf35?s=128&d=identicon&r=PG", "display_name": "bschaeffer", "link": "https://stackoverflow.com/users/164237/bschaeffer"}, "is_accepted": false, "score": 1, "last_activity_date": 1432142716, "last_edit_date": 1432142716, "creation_date": 1432142158, "answer_id": 30356276, "question_id": 30355890, "link": "https://stackoverflow.com/questions/30355890/rails-permit-nested-array/30356276#30356276", "title": "Rails permit nested array", "body": "<p>Strong params expects <code>user_permissions_attributes</code>, and you're submitting <code>user_permissions</code>.</p>\n\n<p>Strong params is separate from <code>accepts_nested_attributes_for</code> (in fact, it has nothing to do with it), so however you define your <code>require!</code>/<code>permit</code> calls is exactly how your attributes should be submitted.</p>\n\n<p><strong>ProTip:</strong> To save you some future frustration, if you plan on updating through accepts nested attributes, you probably want to permit <code>:id</code> as well.</p>\n"}, {"tags": [], "owner": {"reputation": 130, "user_id": 2017708, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e608a3d0ac1e4b37df99428b746979f?s=128&d=identicon&r=PG", "display_name": "Ravindra", "link": "https://stackoverflow.com/users/2017708/ravindra"}, "is_accepted": false, "score": 0, "last_activity_date": 1432202458, "last_edit_date": 1432202458, "creation_date": 1432145982, "answer_id": 30357480, "question_id": 30355890, "link": "https://stackoverflow.com/questions/30355890/rails-permit-nested-array/30357480#30357480", "title": "Rails permit nested array", "body": "<p>user_permissions_attributes: [ :user_id, :id, :can_read, :can_update, :can_create, :can_delete ]) permit :id and submitting hashes with index value..</p>\n\n<p>JSON format submitting to the serve</p>\n\n<pre><code>\"user\": {\n   \"id\": 10,\n   \"first_name\": \"Joe\",\n   \"last_name\": \"Shmoe\",\n   \"user_permissions\": {\n     \"0\": {\n       \"id\": 20,\n       \"user_id\": 10,\n       \"can_update\": true,\n       \"can_read\": true\n      },\n      \"1\": {\n        \"id\": 21,\n        \"user_id\": 10,\n        \"can_create\": true,\n        \"can_read\": true\n      }\n   }\n}\n</code></pre>\n"}], "owner": {"reputation": 6422, "user_id": 2847302, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/JyU5e.jpg?s=128&g=1", "display_name": "Cumulo Nimbus", "link": "https://stackoverflow.com/users/2847302/cumulo-nimbus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 236, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1432202458, "creation_date": 1432140794, "question_id": 30355890, "link": "https://stackoverflow.com/questions/30355890/rails-permit-nested-array", "title": "Rails permit nested array", "body": "<p>I am trying to use <strong>accepts_nested_attributes_for</strong> in conjunction with a <strong>has_many</strong> association and having a lot of trouble...</p>\n\n<p>Here is a simplified version of my <strong>user.rb</strong>:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  ...\n  has_many :user_permissions\n  accepts_nested_attributes_for :user_permissions\n  ...\nend\n</code></pre>\n\n<p>My <strong>user_permission.rb</strong>:</p>\n\n<pre><code>class UserPermission &lt; ActiveRecord::Base\n  belongs_to :user\n  ...\nend\n</code></pre>\n\n<p>And my <strong>users_controller.rb</strong>:</p>\n\n<pre><code>class UsersController &lt; ApiController\n  ...    \n  def update\n    @user.assign_attributes user_params\n    if @user.save\n      render partial: 'user', locals: { user: @user }\n    else\n      render json: {errors: @user.errors}.to_json, status: 500\n    end\n  end  \n  ...\nprivate\n  def user_params\n    params.require(:user).permit(:first_name, :last_name, user_permissions_attributes: [ :user_id, :resource_id, :can_read, :can_update, :can_create, :can_delete ])\n  end\nend\n</code></pre>\n\n<p>I am referencing <a href=\"http://edgeapi.rubyonrails.org/classes/ActionController/StrongParameters.html\" rel=\"nofollow\">this rails documentation</a> on how to use accepts_nested_attributes_for with Strong Parameters.</p>\n\n<p>However, when I '<em>puts user_params</em>' from inside the users_controller this is all I see (no reference to the user_permissions):</p>\n\n<pre><code>{\"first_name\"=&gt;\"Joe\", \"last_name\"=&gt;\"Shmoe\"}\n</code></pre>\n\n<p>Here is an example of JSON I am submitting to the server (via angular $resource):</p>\n\n<pre><code>{\n  \"id\": 10,\n  \"first_name\": \"Joe\",\n  \"last_name\": \"Shmoe\",\n  \"user_permissions\": [\n    {\n      \"organization_resource_id\": 20,\n      \"user_id\": 10,\n      \"can_update\": true,\n      \"can_read\": true\n    },\n    {\n      \"organization_resource_id\": 21,\n      \"user_id\": 10,\n      \"can_create\": true,\n      \"can_read\": true\n    }\n  ],\n}\n</code></pre>\n\n<p>Which returns this JSON:</p>\n\n<pre><code>{\n  \"id\": 10,\n  \"first_name\": \"Joe\",\n  \"last_name\": \"Shmoe\",\n  \"user_permissions\": [],\n}\n</code></pre>\n\n<p>I am fairly confident this is an issue in my rails layer, but just for reference here is the angular <strong>User.js</strong> service I created to perform this RESTful interaction with the server:</p>\n\n<pre><code>angular.module('slics').service('User', [\n  '$resource', function($resource) {\n    return $resource('/api/users/:id', {\n      id: '@id'\n    }, {\n      update: {\n        method: 'PUT',\n        isArray: false\n      }\n    });\n  }\n]);\n</code></pre>\n\n<p>Really not sure what I am missing here. It does not seem like it should be this difficult to submit nested attributes... but the more research I do the more I realize this does seem to be a pretty common Rails frustration.</p>\n\n<p>Please feel free to comment if any additional context/information would be useful to include in my problem description to help troubleshoot this problem and I would be happy to provide it!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sqlite", "rails-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 4900464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cb611f673471a6211b0afd51e6b35aa?s=128&d=identicon&r=PG&f=1", "display_name": "Munizart", "link": "https://stackoverflow.com/users/4900464/munizart"}, "edited": false, "score": 0, "creation_date": 1432156919, "post_id": 30359708, "comment_id": 48812941, "body": "Thanks @aaron, just a bit more info: <code>hour(created_at)</code> won&#39;t work on SQLite, a workaround is <code>strftime(&#39;%H&#39;, created_at)</code>. Also, its possible to parse the hour and date at the same subquery that we get the <code>hourly_counts</code> and in outer query we can take the <code>hour_created_at</code> and <code>group by</code> it. So as result we&#39;ll got a set of <code>hour_created_at =&gt; average_count_all</code>."}], "tags": [], "owner": {"reputation": 6588, "user_id": 251543, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/4WDDh.png?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/251543/aaron"}, "is_accepted": true, "score": 1, "last_activity_date": 1432153482, "creation_date": 1432153482, "answer_id": 30359708, "question_id": 30355841, "link": "https://stackoverflow.com/questions/30355841/average-per-hour-inverval-rails/30359708#30359708", "title": "Average per hour inverval - Rails", "body": "<p>You could use a nested raw SQL query:</p>\n\n<pre><code>SELECT\n  AVG(hourly_count) as average_count_all\nFROM\n  (\n    SELECT\n      count(*) as hourly_count,\n      date_created_at,\n      hour_created_at\n    FROM\n      (\n        SELECT\n          date(created_at) as date_created_at,\n          hour(created_at) as hour_created_at\n        FROM\n          tweet\n      ) as hours\n    GROUP BY\n      date_created_at,\n      hour_created_at\n  ) as hourly_counts\n</code></pre>\n\n<p>This is untested, but the idea is this:</p>\n\n<ol>\n<li>Parse out the date and hour (in <code>hours</code> subquery)</li>\n<li>Get the total hourly counts (in <code>hourly_counts</code> subquery)</li>\n<li>Average the hourly counts (in outer query)</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 43, "user_id": 4900464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cb611f673471a6211b0afd51e6b35aa?s=128&d=identicon&r=PG&f=1", "display_name": "Munizart", "link": "https://stackoverflow.com/users/4900464/munizart"}, "is_accepted": false, "score": 0, "last_activity_date": 1432156288, "last_edit_date": 1495539825, "creation_date": 1432156288, "answer_id": 30360431, "question_id": 30355841, "link": "https://stackoverflow.com/questions/30355841/average-per-hour-inverval-rails/30360431#30360431", "title": "Average per hour inverval - Rails", "body": "<p>I solved my problem using the query of this <a href=\"https://stackoverflow.com/a/10739815/4900464\">answer</a>:<br>\nI edited the table name, removed where clause, changed <code>date(from_unixtime('date'))</code> to <code>date(created_at)</code> and changed <code>hour(from_unixtime('date'))</code> to <code>strftime('%H', created_at)</code> (SQLite does not have a <code>hour()</code> function) </p>\n\n<p>So I got something like:  </p>\n\n<pre><code>select the_hour,avg(the_count) from(\n    select date(created_at) as the_day, strftime('%H', created_at) as the_hour, count(*) as the_count\n    from tweet group by the_day,the_hour\n) s group by the_hour\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 4900464, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6cb611f673471a6211b0afd51e6b35aa?s=128&d=identicon&r=PG&f=1", "display_name": "Munizart", "link": "https://stackoverflow.com/users/4900464/munizart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 408, "favorite_count": 0, "accepted_answer_id": 30359708, "answer_count": 2, "score": 4, "last_activity_date": 1432157046, "creation_date": 1432140646, "last_edit_date": 1432157046, "question_id": 30355841, "link": "https://stackoverflow.com/questions/30355841/average-per-hour-inverval-rails", "title": "Average per hour inverval - Rails", "body": "<p>[Info: Ubuntu 14.02, ruby 2.2.3p110, Rails 4.2.1]<br>\nI need a rake task to fetch the average inserts per one hour range [like 00:00 to 00:59] from the DB (SQLite).<br>\nI was trying to do something like:  </p>\n\n<pre><code>    namespace :db do\n        task results: :environment do\n            tweet = Tweet.group('date(created_at)').group('hour(created_at)').average()\n            puts \"#{tweet}\"\n        end\n\n    end\n</code></pre>\n\n<p>But this throw me this exception </p>\n\n<pre><code>    ActiveRecord::StatementInvalid: SQLite3::SQLException: misuse of aggregate function count(): SELECT AVG(count(*)) AS average_count_all, date(created_at) AS date_created_at, hour(created_at) AS hour_created_at FROM \"tweet\" GROUP BY date(created_at), hour(created_at)\n</code></pre>\n\n<p>Is there a way to get this average per hour using ActiveRecord?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1432140605, "post_id": 30355725, "comment_id": 48803724, "body": "Is there any special reason to not use Active Record?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1432140726, "post_id": 30355725, "comment_id": 48803798, "body": "<code>SELECT sum(goals) FROM players GROUP BY team_id</code> would do the trick. Or, if you want exactly what stupid AR does: <code>SELECT sum(goals) FROM players WHERE team_id IN (SELECT id FROM teams)</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1432140800, "post_id": 30355725, "comment_id": 48803845, "body": "@BSeven The snippet on how AR does it, posted by OP, is a perfect answer on \u201cwhy not to use AR.\u201d"}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1432140903, "post_id": 30355725, "comment_id": 48803903, "body": "@mudasobwa - What do you mean by &quot;The snipped&quot;? What exactly is wrong with AR?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1432141025, "post_id": 30355725, "comment_id": 48803971, "body": "@BSeven typo: snippet. Anyway, AR does \u201cN+1 select\u201d aka \u201cN+1 query.\u201d Google for that."}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1432141163, "post_id": 30355725, "comment_id": 48804040, "body": "@mudasobwa - I am familiar with the N+1 problem. It is well documented at <a href=\"http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>. Wouldn&#39;t eager loading solve it in this case?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1432141258, "post_id": 30355725, "comment_id": 48804084, "body": "@BSeven Eager loading solves anything, save for resources :) I bet the task of OP came from homework or like, that\u2019s why actually AR is out of scope."}, {"owner": {"reputation": 454, "user_id": 2895291, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7226366b61afec813362d5cf3b8b427f?s=128&d=identicon&r=PG&f=1", "display_name": "Richardlonesteen", "link": "https://stackoverflow.com/users/2895291/richardlonesteen"}, "edited": false, "score": 0, "creation_date": 1432141264, "post_id": 30355725, "comment_id": 48804089, "body": "SELECT sum(goals) FROM players GROUP BY team_id &lt;&lt; this works fine I just need to get name as well with it. SELECT name, sum(goals) FROM players GROUP BY team_id"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1432141336, "post_id": 30355725, "comment_id": 48804131, "body": "@Richardlonesteen Of course it works fine. Whether you needed a name, you should note that in your question. AR output you\u2019ve posted misses a name."}], "answers": [{"comments": [{"owner": {"reputation": 454, "user_id": 2895291, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7226366b61afec813362d5cf3b8b427f?s=128&d=identicon&r=PG&f=1", "display_name": "Richardlonesteen", "link": "https://stackoverflow.com/users/2895291/richardlonesteen"}, "edited": false, "score": 0, "creation_date": 1432143279, "post_id": 30356175, "comment_id": 48805160, "body": "the name trows an error, and it would get players name. When I need the teams name, thats why I been selecting all teams. THANK you"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1432144945, "last_edit_date": 1432144945, "creation_date": 1432141834, "answer_id": 30356175, "question_id": 30355725, "link": "https://stackoverflow.com/questions/30355725/rails-iterated-query-to-sql-statement/30356175#30356175", "title": "Rails iterated query to SQL statement", "body": "<pre><code>SELECT sum(goals) FROM players GROUP BY team_id \n</code></pre>\n\n<p>would do the trick. Or, if you want exactly what stupid AR does: </p>\n\n<pre><code>SELECT sum(goals) \nFROM players \nWHERE team_id IN (SELECT id FROM teams)\n</code></pre>\n\n<p>or, with a name of team to be returned as well:</p>\n\n<pre><code>SELECT teams.name, sum(players.goals) \nFROM players \n  JOIN teams ON (players.team_id = teams.id)\nGROUP BY team_id \n</code></pre>\n"}], "owner": {"reputation": 454, "user_id": 2895291, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7226366b61afec813362d5cf3b8b427f?s=128&d=identicon&r=PG&f=1", "display_name": "Richardlonesteen", "link": "https://stackoverflow.com/users/2895291/richardlonesteen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1432144945, "creation_date": 1432140288, "last_edit_date": 1432142219, "question_id": 30355725, "link": "https://stackoverflow.com/questions/30355725/rails-iterated-query-to-sql-statement", "title": "Rails iterated query to SQL statement", "body": "<p>I'm trying to convert ruby query to sql here is what I got so far:</p>\n\n<pre><code>sql2 = \"SELECT teams.* FROM teams, (SELECT sum(goals) FROM players WHERE team_id = team_id);\"\nconnection.execute(sql2)\n</code></pre>\n\n<p>and this is what I'm trying to write:</p>\n\n<pre><code>  Team Load (0.6ms)  SELECT \"teams\".* FROM \"teams\"\n   (0.5ms)  SELECT SUM(\"players\".\"goals\") FROM \"players\" WHERE \"players\".\"team_id\" = $1  [[\"team_id\", 1]]\n   (0.5ms)  SELECT SUM(\"players\".\"goals\") FROM \"players\" WHERE \"players\".\"team_id\" = $1  [[\"team_id\", 2]]\n</code></pre>\n\n<p>the above was created with : <code>Team.all.map {|t| puts \"#{t.name} and #{t.players.sum(:goals)}\"}</code></p>\n\n<p>a simple loop trough players, getting team name and summing team.players.goals</p>\n\n<p>Ideas would be appreciated </p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "tar", "gzip"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1432139598, "post_id": 30355389, "comment_id": 48803058, "body": "<code>TarReader</code> is <code>Enumerable</code>, returning <a href=\"http://ruby-doc.org/stdlib-1.9.3/libdoc/rubygems/rdoc/Gem/Package/TarReader/Entry.html\" rel=\"nofollow noreferrer\"><code>Entry</code></a>. So, you\u2019d need to <code>uncompressed_file.detect { |f| f.fullname == &#39;base_folder&#47;file_i_need.txt&#39; }.read</code>."}, {"owner": {"reputation": 1004, "user_id": 1361193, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/852a09b9b32539fb9358cc062dcbabbb?s=128&d=identicon&r=PG", "display_name": "tomr", "link": "https://stackoverflow.com/users/1361193/tomr"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1432140156, "post_id": 30355389, "comment_id": 48803427, "body": "thanks. makes total sense - no idea why I didn&#39;t get to that myself. If you want the points post it as the answer :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1432140386, "post_id": 30355389, "comment_id": 48803584, "body": "Since the problem was solved, I posted it as an answer."}], "answers": [{"comments": [{"owner": {"reputation": 1004, "user_id": 1361193, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/852a09b9b32539fb9358cc062dcbabbb?s=128&d=identicon&r=PG", "display_name": "tomr", "link": "https://stackoverflow.com/users/1361193/tomr"}, "edited": false, "score": 0, "creation_date": 1432140385, "post_id": 30355746, "comment_id": 48803582, "body": "Thanks a lot. I got stuck!"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 6, "last_activity_date": 1432140345, "creation_date": 1432140345, "answer_id": 30355746, "question_id": 30355389, "link": "https://stackoverflow.com/questions/30355389/read-from-a-tar-gz-file-without-saving-the-unpacked-version/30355746#30355746", "title": "Read from a tar.gz file without saving the unpacked version", "body": "<p><code>TarReader</code> is <code>Enumerable</code>, returning <a href=\"http://ruby-doc.org/stdlib-1.9.3/libdoc/rubygems/rdoc/Gem/Package/TarReader/Entry.html\"><code>Entry</code></a>. </p>\n\n<p>That said, to retrieve the text content from the file by it\u2019s name one might</p>\n\n<pre><code>uncompressed = Gem::Package::TarReader.new(Zlib::GzipReader.open(file))\ntext = uncompressed.detect do |f| \n  f.fullname == 'base_folder/file_i_need.txt'\nend.read\n#\u21d2 Hello, I\u2019m content of the text file, located inside gzipped tar\n</code></pre>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 1004, "user_id": 1361193, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/852a09b9b32539fb9358cc062dcbabbb?s=128&d=identicon&r=PG", "display_name": "tomr", "link": "https://stackoverflow.com/users/1361193/tomr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 850, "favorite_count": 0, "accepted_answer_id": 30355746, "answer_count": 1, "score": 3, "last_activity_date": 1432140345, "creation_date": 1432139241, "question_id": 30355389, "link": "https://stackoverflow.com/questions/30355389/read-from-a-tar-gz-file-without-saving-the-unpacked-version", "title": "Read from a tar.gz file without saving the unpacked version", "body": "<p>I have a tar.gz file saved on disk and I want to leave it packed there, but I need to open one file within the archive, read from it and save some information somewhere.</p>\n\n<pre><code>File structure:\nbase_folder\n  file_i_need.txt\n  other_folder\n  other_file\n</code></pre>\n\n<p>code (it is not much - I tried 10mio different ways and this is what is left)</p>\n\n<pre><code>def self.open_file(file)\n    uncompressed_file = Gem::Package::TarReader.new(Zlib::GzipReader.open(file))\nuncompressed_file.rewind\nend\n</code></pre>\n\n<p>When I run it in a console I get</p>\n\n<pre><code>&lt;Gem::Package::TarReader:0x007fbaac178090&gt;\n</code></pre>\n\n<p>and I can run commands on the entries. I just haven't figured out how to open an entry and read from it without saving it unpacked to disk. I mainly need the string from the text file.</p>\n\n<p>Any help appreciated. I might just be missing something...</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1432138473, "post_id": 30355068, "comment_id": 48802379, "body": "Show this method <code>appointment_params</code> and the console log file output to show the error......."}, {"owner": {"reputation": 377, "user_id": 4889203, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/570411a6f466da4236eb2f2d97ff3e3a?s=128&d=identicon&r=PG&f=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/4889203/noah"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1432138534, "post_id": 30355068, "comment_id": 48802411, "body": "params.require(:appointment).permit(:field1, :field2, :etc)"}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1432138597, "post_id": 30355068, "comment_id": 48802451, "body": "No.. show me the actual file.. if you didn&#39;t white-list this param.. it should not come.. and also console log to show the error..........."}, {"owner": {"reputation": 377, "user_id": 4889203, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/570411a6f466da4236eb2f2d97ff3e3a?s=128&d=identicon&r=PG&f=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/4889203/noah"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1432138813, "post_id": 30355068, "comment_id": 48802580, "body": "I have <code>appointment_id</code> in my strong params list, but it&#39;s in a nested attributes definition.  Other than that it&#39;s just fields.  Console log what?  This is Rails, not javascript."}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1432139793, "post_id": 30355068, "comment_id": 48803204, "body": "I know this is Rails, that&#39;s why I opened your question here. Are you aware of <code>developement.log</code>.. <code>production.log</code>.. <code>test.log</code> files.. which are inside the <code>log&#47;</code> directory...? When you do <code>rails s</code>, in developement mode.. what you see in your terminal is the content of <code>development.log</code> file......."}], "answers": [{"comments": [{"owner": {"reputation": 377, "user_id": 4889203, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/570411a6f466da4236eb2f2d97ff3e3a?s=128&d=identicon&r=PG&f=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/4889203/noah"}, "edited": false, "score": 0, "creation_date": 1432142913, "post_id": 30355891, "comment_id": 48804972, "body": "That&#39;s not the problem."}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "reply_to_user": {"reputation": 377, "user_id": 4889203, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/570411a6f466da4236eb2f2d97ff3e3a?s=128&d=identicon&r=PG&f=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/4889203/noah"}, "edited": false, "score": 0, "creation_date": 1432143136, "post_id": 30355891, "comment_id": 48805081, "body": "Can you add the table from the schema.rb?"}, {"owner": {"reputation": 377, "user_id": 4889203, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/570411a6f466da4236eb2f2d97ff3e3a?s=128&d=identicon&r=PG&f=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/4889203/noah"}, "edited": false, "score": 0, "creation_date": 1432144003, "post_id": 30355891, "comment_id": 48805591, "body": "It says specifically, &quot;unknown attribute: appointment_id&quot; when this is the data I&#39;m sending in the PUT request: <code>{&quot;appointment&quot;:{&quot;appointment_hierarchies_attributes&quot;:[{&quot;pare&zwnj;&#8203;nt_id&quot;:&quot;1848&quot;,&quot;child&zwnj;&#8203;_id&quot;:&quot;159&quot;}]}}</code>"}], "tags": [], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "is_accepted": false, "score": 0, "last_activity_date": 1432140804, "creation_date": 1432140804, "answer_id": 30355891, "question_id": 30355068, "link": "https://stackoverflow.com/questions/30355068/rails-obscure-activerecord-unknownattribute-error/30355891#30355891", "title": "Rails obscure ActiveRecord UnknownAttribute error", "body": "<p>According to your comment, </p>\n\n<pre><code>def appointment_params\n  params.require(:appointment).permit(:field1, :field2, :etc) \nend\n</code></pre>\n\n<p><code>ActiveRecord::UnknownAttributeError</code> means that <code>:field1</code>, <code>:field2</code> or <code>:etc</code> are not in your database.</p>\n\n<p>If you look at your schema.rb file, at least one of those fields should be missing from the <code>appointments</code> table.</p>\n\n<p>FWIW, after you do Rails for 8 hours a day for a few years, this error will no longer be obscure.</p>\n"}], "owner": {"reputation": 377, "user_id": 4889203, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/570411a6f466da4236eb2f2d97ff3e3a?s=128&d=identicon&r=PG&f=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/4889203/noah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432215789, "creation_date": 1432138335, "question_id": 30355068, "link": "https://stackoverflow.com/questions/30355068/rails-obscure-activerecord-unknownattribute-error", "title": "Rails obscure ActiveRecord UnknownAttribute error", "body": "<p>When running the below in my Rails app, I'm getting an Unknown Attribute error.</p>\n\n<pre><code>@appointment = Appointment.find(params[:id])\n\n@appointment.update_attributes(appointment_params)\n</code></pre>\n\n<p>I'm getting a <code>ActiveRecord::UnknownAttributeError</code>.  The unknown attribute is <code>appointment_id</code> on the Appointment model.</p>\n\n<p>I've removed this field, removed the association on the model.rb, removed it from the strong params definition, and everywhere else I can think of.</p>\n\n<p>I am not POSTing/PUTing the <code>appointment_id</code> to the server when creating or updating and I've verified this by returning <code>appointment_params</code> and it still does not come back.</p>\n\n<p>What could be causing this error to be thrown?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 8243, "user_id": 1629262, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/F9Q4g.jpg?s=128&g=1", "display_name": "doptimusprime", "link": "https://stackoverflow.com/users/1629262/doptimusprime"}, "edited": false, "score": 0, "creation_date": 1432221566, "post_id": 30355420, "comment_id": 48845314, "body": "I moved this test case to controller test case."}], "tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": true, "score": 4, "last_activity_date": 1432139313, "creation_date": 1432139313, "answer_id": 30355420, "question_id": 30354815, "link": "https://stackoverflow.com/questions/30354815/controller-is-nil-in-rspec-test/30355420#30355420", "title": "controller is Nil in rspec test", "body": "<p>This is a request spec (which is basically a rails integration test) which is designed to span multiple requests, possibly across controllers. </p>\n\n<p>The <code>controller</code> variable is set by the request methods that integration testing provides (<code>get</code>, <code>put</code>, <code>post</code> etc.)</p>\n\n<p>If instead you use the capybara DSL (visit, click etc.) then the integration test methods never get called and accordingly <code>controller</code> will be nil. When using capybara you don't have access to individual controller instances so you can't test things such as what <code>signed_in?</code> returns - you have to test a higher level behaviour (e.g. what is on the page).</p>\n"}], "owner": {"reputation": 8243, "user_id": 1629262, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/F9Q4g.jpg?s=128&g=1", "display_name": "doptimusprime", "link": "https://stackoverflow.com/users/1629262/doptimusprime"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 509, "favorite_count": 0, "accepted_answer_id": 30355420, "answer_count": 1, "score": 0, "last_activity_date": 1432139313, "creation_date": 1432137656, "last_edit_date": 1432138321, "question_id": 30354815, "link": "https://stackoverflow.com/questions/30354815/controller-is-nil-in-rspec-test", "title": "controller is Nil in rspec test", "body": "<p>I have following RSpec test:</p>\n\n<pre><code>require 'rails_helper'\nrequire 'spec_helper'\n\nRSpec.describe \"Users\", type: :request do  \n\n\n  describe \"sign in/out\" do\n\n    describe \"success\" do\n      it \"should sign a user in and out\" do\n        attr = {:name=&gt;\"Test1\",\n        :email =&gt; \"dmishra@test.org\",\n        :password =&gt; \"foobar\",\n        :password_confirmation =&gt; \"foobar\"\n        }\n        user = User.create(attr)\n          visit signin_path\n        fill_in \"Email\", :with =&gt; user.email\n        fill_in \"Password\", :with =&gt; user.password\n        puts page.body\n        click_button \"Sign in\"\n        controller.should be_signed_in\n        click_link \"Sign out\"\n        controller.should_not be_signed_in\n      end\n    end\n  end\n\nend\n</code></pre>\n\n<p>I am getting the following error:</p>\n\n<pre><code> Failure/Error: controller.should be_signed_in\n   expected  to respond to `signed_in?\n</code></pre>\n\n<p>This is because <code>controller</code> is <code>nil</code>. What is wrong here which causes <code>controller</code> to be <code>nil</code>?</p>\n\n<p>Controller class is:</p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n  def new\n    @title = \"Sign in\"\n  end\n  def create\n    user = User.authenticate(params[:session][:email],\n                             params[:session][:password])\n    if user.nil?\n      flash.now[:error] = \"Invalid email/password combination.\"\n      @title = \"Sign in\"\n      render 'new'\n    else\n      sign_in user\n      redirect_to user\n    end\n  end\n  def destroy\n    sign_out\n    redirect_to root_path\n  end\nend\n</code></pre>\n\n<p><code>signed_in</code> method is defined in session helper which is included.</p>\n\n<p>Ruby platform information:\nRuby: 2.0.0p643\nRails: 4.2.1\nRSpec: 3.2.2</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "readline"], "answers": [{"comments": [{"owner": {"reputation": 1095, "user_id": 4287620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a16bec1cfb9f438b56aacfe204c13244?s=128&d=identicon&r=PG", "display_name": "Abraar Arique Diganto", "link": "https://stackoverflow.com/users/4287620/abraar-arique-diganto"}, "edited": false, "score": 0, "creation_date": 1432137856, "post_id": 30354478, "comment_id": 48801936, "body": "Great! My Rails server is up and running now... Your solution is working. Thanks!"}, {"owner": {"reputation": 12345, "user_id": 429758, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ff984622cd3a9ca31bd0e7e034fc8b17?s=128&d=identicon&r=PG", "display_name": "Prakash Murthy", "link": "https://stackoverflow.com/users/429758/prakash-murthy"}, "reply_to_user": {"reputation": 1095, "user_id": 4287620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a16bec1cfb9f438b56aacfe204c13244?s=128&d=identicon&r=PG", "display_name": "Abraar Arique Diganto", "link": "https://stackoverflow.com/users/4287620/abraar-arique-diganto"}, "edited": false, "score": 0, "creation_date": 1432137960, "post_id": 30354478, "comment_id": 48802006, "body": "Awesome. You can come back to <code>byebug</code> / other options for debugging in a rails app later on when you need it."}, {"owner": {"reputation": 475, "user_id": 2685127, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6726e9eb019ed4cce5acd4a8554e66bb?s=128&d=identicon&r=PG", "display_name": "Neeraj Verma", "link": "https://stackoverflow.com/users/2685127/neeraj-verma"}, "edited": false, "score": 0, "creation_date": 1443296329, "post_id": 30354478, "comment_id": 53439680, "body": "Its working in my case as well. But I want to know why it is not working before as I have done what error says. I have installed the required package and then reinstalled ruby using &#39;rbenv&#39; and by compiling from source as well but nothing works for me."}, {"owner": {"reputation": 357, "user_id": 1644355, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/cUHei.png?s=128&g=1", "display_name": "Przemek Mroczek", "link": "https://stackoverflow.com/users/1644355/przemek-mroczek"}, "edited": false, "score": 11, "creation_date": 1475218264, "post_id": 30354478, "comment_id": 66864406, "body": "this is not a solution to problem and why would beginner rails developer wouldn&#39;t need debugging, what if he comes from other language and is not a total newbie."}, {"owner": {"reputation": 2770, "user_id": 1341825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83689df8baed7dbaebb1587fbbffb95a?s=128&d=identicon&r=PG", "display_name": "theUtherSide", "link": "https://stackoverflow.com/users/1341825/theutherside"}, "edited": false, "score": 0, "creation_date": 1476842211, "post_id": 30354478, "comment_id": 67512625, "body": "Agreed with prior comment.  Not a solution.  And, <code>byebug</code> is VERY useful, especially for beginners!"}], "tags": [], "owner": {"reputation": 12345, "user_id": 429758, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ff984622cd3a9ca31bd0e7e034fc8b17?s=128&d=identicon&r=PG", "display_name": "Prakash Murthy", "link": "https://stackoverflow.com/users/429758/prakash-murthy"}, "is_accepted": true, "score": 2, "last_activity_date": 1432136817, "creation_date": 1432136817, "answer_id": 30354478, "question_id": 30354162, "link": "https://stackoverflow.com/questions/30354162/rails-server-giving-readline-support-error/30354478#30354478", "title": "Rails server giving Readline support error", "body": "<p><a href=\"https://github.com/deivid-rodriguez/byebug\" rel=\"nofollow\">byebug</a> is a gem used for debugging. </p>\n\n<p>The new app generator for rails includes it by default in the development &amp; test environments with the <a href=\"https://github.com/rails/rails/blob/45786be516e13d55a1fca9a4abaddd5781209103/railties/lib/rails/generators/rails/app/templates/Gemfile#L24-L27\" rel=\"nofollow\">following lines</a>:</p>\n\n<pre><code>group :development, :test do\n&lt;% if RUBY_ENGINE == 'ruby' -%&gt;\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug'\n</code></pre>\n\n<p>I don't think it is important for a newcomer to be able to use it. I would recommend commenting out that line in the Gemfile, run <code>bundle install</code> and continue with your rails learning adventure. </p>\n"}, {"tags": [], "owner": {"reputation": 764, "user_id": 3930758, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/2d20d71ca93a31bf75a5fd36f302babe?s=128&d=identicon&r=PG&f=1", "display_name": "Balaji Radhakrishnan", "link": "https://stackoverflow.com/users/3930758/balaji-radhakrishnan"}, "is_accepted": false, "score": 1, "last_activity_date": 1477544043, "creation_date": 1477544043, "answer_id": 40276387, "question_id": 30354162, "link": "https://stackoverflow.com/questions/30354162/rails-server-giving-readline-support-error/40276387#40276387", "title": "Rails server giving Readline support error", "body": "<p>If you are in a hurry,</p>\n\n<p>Open your byebug's history.rb</p>\n\n<pre><code>/Users/user/.rvm/gems/ruby-2.1.5@rails/gems/byebug-9.0.5/lib/byebug/history.rb\n</code></pre>\n\n<p>and comment out the following line,</p>\n\n<pre><code>require 'readline'\n</code></pre>\n\n<p>But, It is recommended to use byebug to debug.</p>\n"}, {"tags": [], "owner": {"reputation": 449, "user_id": 4947562, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/4ac2105f2bf55900c5916e83a078d997?s=128&d=identicon&r=PG&f=1", "display_name": "dom", "link": "https://stackoverflow.com/users/4947562/dom"}, "is_accepted": false, "score": 5, "last_activity_date": 1477909981, "creation_date": 1477909981, "answer_id": 40340415, "question_id": 30354162, "link": "https://stackoverflow.com/questions/30354162/rails-server-giving-readline-support-error/40340415#40340415", "title": "Rails server giving Readline support error", "body": "<p>I solved the issue by (commands for mac with homebrew and rbenv): </p>\n\n<ul>\n<li>installing readline <code>brew install readline</code></li>\n<li>reinstalling / recompiling ruby <code>rbenv install 2.3.1</code></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 524, "user_id": 1416301, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Xh5JU.jpg?s=128&g=1", "display_name": "Gambai", "link": "https://stackoverflow.com/users/1416301/gambai"}, "edited": false, "score": 1, "creation_date": 1491163968, "post_id": 40990285, "comment_id": 73420108, "body": "Thank you! I read about Zero&#39;s answer, but this one did the trick for me"}, {"owner": {"reputation": 509, "user_id": 971748, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/573bc164441fd3d93a84b0e8915d5c07?s=128&d=identicon&r=PG", "display_name": "Maruccio", "link": "https://stackoverflow.com/users/971748/maruccio"}, "edited": false, "score": 0, "creation_date": 1551296409, "post_id": 40990285, "comment_id": 96592915, "body": "I changed libreadline.6.dylib with libreadline.7.dylib and it did the trick for me"}], "tags": [], "owner": {"reputation": 201, "user_id": 882693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/728d1cbe236eaa242e4a237e90cb6e22?s=128&d=identicon&r=PG", "display_name": "Abhinav Mehta", "link": "https://stackoverflow.com/users/882693/abhinav-mehta"}, "is_accepted": false, "score": 17, "last_activity_date": 1481010490, "creation_date": 1481010490, "answer_id": 40990285, "question_id": 30354162, "link": "https://stackoverflow.com/questions/30354162/rails-server-giving-readline-support-error/40990285#40990285", "title": "Rails server giving Readline support error", "body": "<p>To fix this (for OSX, tested on Sierra), run following command in your shell -  </p>\n\n<p><code>ln -s  /usr/local/opt/readline/lib/libreadline.dylib  /usr/local/opt/readline/lib/libreadline.6.dylib</code></p>\n"}, {"tags": [], "owner": {"reputation": 586, "user_id": 4111990, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b66d336448045d8a643a3546bc1a469b?s=128&d=identicon&r=PG&f=1", "display_name": "Zero", "link": "https://stackoverflow.com/users/4111990/zero"}, "is_accepted": false, "score": 2, "last_activity_date": 1481861797, "creation_date": 1481861797, "answer_id": 41177202, "question_id": 30354162, "link": "https://stackoverflow.com/questions/30354162/rails-server-giving-readline-support-error/41177202#41177202", "title": "Rails server giving Readline support error", "body": "<p>I resolved it by follwing way</p>\n\n<pre><code>brew unlink readline \nbrew link readline --force\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 829, "user_id": 5680832, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-isvYmggm3Oc/AAAAAAAAAAI/AAAAAAAAAKY/InixBA2Rhe8/photo.jpg?sz=128", "display_name": "Faisal Raza", "link": "https://stackoverflow.com/users/5680832/faisal-raza"}, "is_accepted": false, "score": 3, "last_activity_date": 1551782732, "creation_date": 1551782732, "answer_id": 55000966, "question_id": 30354162, "link": "https://stackoverflow.com/questions/30354162/rails-server-giving-readline-support-error/55000966#55000966", "title": "Rails server giving Readline support error", "body": "<p>I was facing the following error:</p>\n\n<pre><code>Sorry, you can't use byebug without Readline\n</code></pre>\n\n<p>Reinstalling ruby resolved this for me (using rvm):</p>\n\n<pre><code>rvm reinstall 2.1.5\n</code></pre>\n\n<p>You can replace ruby version ie, 2.1.5 with the one you want to reinstall.</p>\n"}, {"tags": [], "owner": {"reputation": 401, "user_id": 7824640, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ImUAfD7p5hw/AAAAAAAAAAI/AAAAAAAABNo/YB8fbLxMUhY/photo.jpg?sz=128", "display_name": "Hidehiro NAGAOKA", "link": "https://stackoverflow.com/users/7824640/hidehiro-nagaoka"}, "is_accepted": false, "score": 3, "last_activity_date": 1552468779, "creation_date": 1552468779, "answer_id": 55138185, "question_id": 30354162, "link": "https://stackoverflow.com/questions/30354162/rails-server-giving-readline-support-error/55138185#55138185", "title": "Rails server giving Readline support error", "body": "<p>Add this to the development group of gem.</p>\n\n<pre><code>gem 'rb-readline'\n</code></pre>\n\n<p><a href=\"https://github.com/deivid-rodriguez/byebug/issues/289#issuecomment-251383465\" rel=\"nofollow noreferrer\">https://github.com/deivid-rodriguez/byebug/issues/289#issuecomment-251383465</a></p>\n"}, {"tags": [], "owner": {"reputation": 5696, "user_id": 7588447, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/8FNQo.jpg?s=128&g=1", "display_name": "Ahmed Elkoussy", "link": "https://stackoverflow.com/users/7588447/ahmed-elkoussy"}, "is_accepted": false, "score": 8, "last_activity_date": 1562158354, "creation_date": 1562158354, "answer_id": 56870614, "question_id": 30354162, "link": "https://stackoverflow.com/questions/30354162/rails-server-giving-readline-support-error/56870614#56870614", "title": "Rails server giving Readline support error", "body": "<h2>July 2019 on Mac</h2>\n\n<p>I faced this same issue on my machine &amp; running the following command solved it, note that even if you have version 8 of readline you still need to link to version 7 as shown:</p>\n\n<pre><code>ln -s /usr/local/opt/readline/lib/libreadline.dylib /usr/local/opt/readline/lib/libreadline.7.dylib\n</code></pre>\n"}], "owner": {"reputation": 1095, "user_id": 4287620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a16bec1cfb9f438b56aacfe204c13244?s=128&d=identicon&r=PG", "display_name": "Abraar Arique Diganto", "link": "https://stackoverflow.com/users/4287620/abraar-arique-diganto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6467, "favorite_count": 0, "accepted_answer_id": 30354478, "answer_count": 8, "score": 9, "last_activity_date": 1562158354, "creation_date": 1432135938, "question_id": 30354162, "link": "https://stackoverflow.com/questions/30354162/rails-server-giving-readline-support-error", "title": "Rails server giving Readline support error", "body": "<p>I'm new to Ruby on Rails and I'm trying to start the RoR server. But when I run the command <code>rails server</code> it gives me the following error:</p>\n\n<pre><code>Sorry, you can't use byebug without Readline. To solve this, you need to\n    rebuild Ruby with Readline support. If using Ubuntu, try `sudo apt-get\n    install libreadline-dev` and then reinstall your Ruby.\nbin/rails:6: warning: already initialized constant APP_PATH\n/home/abraar/ror/bin/rails:6: warning: previous definition of     APP_PATH     was here\nUsage: rails COMMAND [ARGS]\n</code></pre>\n\n<p>I'm using rbenv with Ruby 2.2.2 and Rails 4.2.1\nI tried following the instructions on this blog post <a href=\"http://vvv.tobiassjosten.net/ruby/readline-in-ruby-with-rbenv/\" rel=\"noreferrer\">http://vvv.tobiassjosten.net/ruby/readline-in-ruby-with-rbenv/</a> but it's not working.</p>\n\n<p>Any solutions?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "postgresql"], "answers": [{"comments": [{"owner": {"reputation": 8055, "user_id": 1461862, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/Xk6rm.jpg?s=128&g=1", "display_name": "Mauricio Gracia Gutierrez", "link": "https://stackoverflow.com/users/1461862/mauricio-gracia-gutierrez"}, "edited": false, "score": 0, "creation_date": 1432138597, "post_id": 30354070, "comment_id": 48802452, "body": "This seems right but a little explanation could help"}], "tags": [], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "is_accepted": true, "score": 2, "last_activity_date": 1432139000, "last_edit_date": 1432139000, "creation_date": 1432135690, "answer_id": 30354070, "question_id": 30353963, "link": "https://stackoverflow.com/questions/30353963/rails-query-to-sql-statement/30354070#30354070", "title": "Rails query to SQL statement", "body": "<p>You don't need to add <code>\\\"</code> in sql statement, just remove them. </p>\n\n<pre><code>def sql_search\n    sql = \"SELECT sum(goals) FROM players WHERE team_id = #{self.id};\"\n    connection.execute(sql);\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 432, "user_id": 5113832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/991ef57603f1d1c2358d5beee3f8a521?s=128&d=identicon&r=PG", "display_name": "bideowego", "link": "https://stackoverflow.com/users/5113832/bideowego"}, "is_accepted": false, "score": 0, "last_activity_date": 1459485772, "creation_date": 1459485772, "answer_id": 36348207, "question_id": 30353963, "link": "https://stackoverflow.com/questions/30353963/rails-query-to-sql-statement/36348207#36348207", "title": "Rails query to SQL statement", "body": "<p>Is there some reason that you want to hard code the SQL query? It's generally bad practice to use string interpolation to insert parameters to SQL queries because of <a href=\"http://guides.rubyonrails.org/security.html#sql-injection\" rel=\"nofollow\">SQL injection attacks</a>. Instead it's recommended to use ActiveRecord's SQL query parameter binding like this:</p>\n\n<pre><code>user_input = 5\nPlayer.where('team_id = ?', user_input).sum(:goals)\n</code></pre>\n\n<p>Basically what this does is insert the parameter <code>5</code> after sanitization. This means you're safe from attacks where a hacker attempts to insert arbitrary SQL into parameter variables attempting to return sensitive data or delete data entirely!</p>\n"}], "owner": {"reputation": 454, "user_id": 2895291, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7226366b61afec813362d5cf3b8b427f?s=128&d=identicon&r=PG&f=1", "display_name": "Richardlonesteen", "link": "https://stackoverflow.com/users/2895291/richardlonesteen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "accepted_answer_id": 30354070, "answer_count": 2, "score": 2, "last_activity_date": 1459485772, "creation_date": 1432135424, "last_edit_date": 1432136195, "question_id": 30353963, "link": "https://stackoverflow.com/questions/30353963/rails-query-to-sql-statement", "title": "Rails query to SQL statement", "body": "<p>I'm trying to write an write this:</p>\n\n<pre><code>Team.last.players.sum(\"goals\")\n</code></pre>\n\n<p>erb:</p>\n\n<pre><code>SELECT SUM(\"players\".\"goals\") \nFROM \"players\" \nWHERE \"players\".\"team_id\" = $1  [[\"team_id\", 2]]\n</code></pre>\n\n<p>how to rewrite this so that I could use it in a method:</p>\n\n<pre><code>def sql_search\n  sql = \"SELECT SUM \\\"players\\\".\\\"goals\\\" FROM \\\"players\\\" WHERE \\\"players\\\".\\\"team_id\\\" = $1 [[\\\"team_id\\\", #{self.id}\"\n  connection.execute(sql);\nend\n</code></pre>\n\n<p>keep getting this error: </p>\n\n<pre><code>PG::SyntaxError: ERROR:  syntax error at or near \".\"\nLINE 1: SELECT SUM \"players\".\"goals\" FROM \"players\" WHERE \"players\"....\n</code></pre>\n\n<p>Any ideas would be appreciated </p>\n"}, {"tags": ["ruby", "scp"], "answers": [{"comments": [{"owner": {"reputation": 3842, "user_id": 2216929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1cfa9e99112a82bc03a57d97d09e7217?s=128&d=identicon&r=PG", "display_name": "kaybee99", "link": "https://stackoverflow.com/users/2216929/kaybee99"}, "edited": false, "score": 0, "creation_date": 1432137069, "post_id": 30354125, "comment_id": 48801414, "body": "Ok thanks. According to your link, using <code>upload!</code> is &quot;<i>identical to calling upload and then calling the wait method on the channel object</i>&quot; so adding <code>wait</code> is superfluous in this instance."}], "tags": [], "owner": {"reputation": 551, "user_id": 211716, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/be443b085eb5281638d369c5241f641d?s=128&d=identicon&r=PG", "display_name": "Peter Giacomo Lombardo", "link": "https://stackoverflow.com/users/211716/peter-giacomo-lombardo"}, "is_accepted": true, "score": 1, "last_activity_date": 1432135842, "creation_date": 1432135842, "answer_id": 30354125, "question_id": 30353500, "link": "https://stackoverflow.com/questions/30353500/upload-file-to-server-and-delete-original-using-netscp-gem-in-ruby/30354125#30354125", "title": "Upload file to server and delete original using NET::SCP gem in Ruby", "body": "<p>Net::SCP doesn't have any such parameter:</p>\n\n<p><a href=\"https://github.com/net-ssh/net-scp/blob/master/lib/net/scp.rb#L259-L267\" rel=\"nofollow\">https://github.com/net-ssh/net-scp/blob/master/lib/net/scp.rb#L259-L267</a></p>\n\n<p>Since the only difference between a copy and a move is just a final deletion of the source, you should do this manually after <code>upload!</code>.</p>\n\n<pre><code>File.delete(local_path)\n</code></pre>\n\n<p>You most likely will want to make sure that Net::SCP has finished before doing so:</p>\n\n<pre><code>require 'net/ssh'\nrequire 'net/scp'\n\nchannel = Net::SCP.upload!(10.125.0.0,\n                user,\n                local_path,\n                remote_dir,\n                :ssh =&gt; { :password =&gt; psw,\n                          :key_data =&gt; keys})\nchannel.wait\nFile.delete(local_path)\n</code></pre>\n"}], "owner": {"reputation": 3842, "user_id": 2216929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1cfa9e99112a82bc03a57d97d09e7217?s=128&d=identicon&r=PG", "display_name": "kaybee99", "link": "https://stackoverflow.com/users/2216929/kaybee99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 1, "accepted_answer_id": 30354125, "answer_count": 1, "score": 0, "last_activity_date": 1432195727, "creation_date": 1432134121, "last_edit_date": 1432195727, "question_id": 30353500, "link": "https://stackoverflow.com/questions/30353500/upload-file-to-server-and-delete-original-using-netscp-gem-in-ruby", "title": "Upload file to server and delete original using NET::SCP gem in Ruby", "body": "<p>I'm using the <code>net/scp</code> gem to upload a file from my machine to a remote Linux server.</p>\n\n<pre><code>require 'net/ssh'\nrequire 'net/scp'\n\nNet::SCP.upload!(10.125.0.0,\n                user,\n                local_path,\n                remote_dir,\n                :ssh =&gt; { :password =&gt; psw,\n                          :key_data =&gt; keys})\n</code></pre>\n\n<p>This works perfectly, however I'd like to be able to 'move' the file instead of effectively copying it across.</p>\n\n<p>Is there some <code>scp</code>parameter that will delete the original file?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "carrierwave", "form-for"], "comments": [{"owner": {"reputation": 1142, "user_id": 148410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6df52d66587c2fa8cf9178b20869a843?s=128&d=identicon&r=PG", "display_name": "Chris O&#39;Sullivan", "link": "https://stackoverflow.com/users/148410/chris-osullivan"}, "edited": false, "score": 0, "creation_date": 1432142855, "post_id": 30353417, "comment_id": 48804940, "body": "I see you&#39;re using cloudinary module mixed in - can you confirm if it works without this? Also, are there any error messages when you upload an image?"}, {"owner": {"reputation": 581, "user_id": 3972931, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/T0ruW.jpg?s=128&g=1", "display_name": "Shion  Yamaguchi", "link": "https://stackoverflow.com/users/3972931/shion-yamaguchi"}, "reply_to_user": {"reputation": 1142, "user_id": 148410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6df52d66587c2fa8cf9178b20869a843?s=128&d=identicon&r=PG", "display_name": "Chris O&#39;Sullivan", "link": "https://stackoverflow.com/users/148410/chris-osullivan"}, "edited": false, "score": 0, "creation_date": 1432204916, "post_id": 30353417, "comment_id": 48832739, "body": "Thank you. It worked for me. However, as I am using heroku, I think I need somewhere to host pictures and videos. Could you tell me what was wrong with cloudinary ? If you know"}, {"owner": {"reputation": 1142, "user_id": 148410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6df52d66587c2fa8cf9178b20869a843?s=128&d=identicon&r=PG", "display_name": "Chris O&#39;Sullivan", "link": "https://stackoverflow.com/users/148410/chris-osullivan"}, "edited": false, "score": 0, "creation_date": 1432208555, "post_id": 30353417, "comment_id": 48835284, "body": "I haven&#39;t tried cloudinary sorry, but I was wondering if you tried this locally uploading files to the local file system and see if you still have the problems."}], "owner": {"reputation": 581, "user_id": 3972931, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/T0ruW.jpg?s=128&g=1", "display_name": "Shion  Yamaguchi", "link": "https://stackoverflow.com/users/3972931/shion-yamaguchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 177, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1432133938, "creation_date": 1432133938, "question_id": 30353417, "link": "https://stackoverflow.com/questions/30353417/only-be-able-to-see-the-url-of-the-pictures-carrierwave", "title": "Only be able to see the url of the pictures CarrierWave", "body": "<p>I'm struggling with CarrierWave.\nIt worked 1 month ago.\nHowever, it became unwell suddenly, and  I can't see any pictures which I've uploaded in browzer!!</p>\n\n<p>Could you tell me the reason ?</p>\n\n<blockquote>\n  <p>index.html.slim</p>\n</blockquote>\n\n<pre><code>...\nh4.h4-title.glyphicon.glyphicon-globe Psara Medical News\n- @posts.each do |post|\n  .container.well\n    .row\n      .col-lg-6\n        .input-group\n          span.input-group-btn\n            h5.well.boy\n              = post.subject\n              small.pull-right= post.date\n            - if post.picture.present?\n              .img-responsive.well alt=\"Responsive image\"\n                = link_to image_tag post.picture.thumb.url\n            - if post.video.present?\n              .img-responsive.well alt=\"Responsive image\"\n                = link_to @post.video_url.to_s { image_tag(@post.video_url(:screenshot).to_s, id: \"video\", :alt =&gt; \"screenshot\") }\n            .img-responsive.well alt=\"Responsive image\"\n            - if post.body.present?\n              p.post_text.well\n                strong= post.body\n...\n</code></pre>\n\n<blockquote>\n  <p>show.html.slim</p>\n</blockquote>\n\n<pre><code>...\np#notice= notice\n.container\n  .row.well\n    .col-md-6.well\n      h4.input-group= @post.subject\n      h5.input-group= @post.date\n    - if @post.picture.present?\n      .col-md-6.well\n        .input-group= image_tag(@post.picture_url)\n    - if @post.video.present?  \n      .col-md-6.well\n        .input-group= link_to @post.video_url.to_s { image_tag(@post.video_url(:screenshot).to_s, id: \"video\", :alt =&gt; \"screenshot\") }\n    .col-md-6.well\n      input-group= @post.body\n...\n</code></pre>\n\n<blockquote>\n  <p>video_uploader.rb</p>\n</blockquote>\n\n<pre><code># encoding: utf-8\nrequire 'streamio-ffmpeg'\nrequire 'carrierwave'\nclass VideoUploader &lt; CarrierWave::Uploader::Base\n\n  include Cloudinary::CarrierWave\n\n  storage :file\n\n  def store_dir\n    \"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}\"\n  end\n\n  def extension_white_list\n    %w(jpg jpeg gif png mov wmv mp4 flv avi)\n  end\n\n  version :screenshot do\n    process :screenshot\n    def full_filename (for_file = model.logo.file)\n      \"screenshot.jpg\"\n    end\n  end\n\n  def screenshot\n    tmpfile = File.join(File.dirname(current_path), \"tmpfile\")\n    File.rename(current_path, tmpfile)\n    movie = FFMPEG::Movie.new(tmpfile)\n    movie.screenshot(current_path + \".jpg\", preserve_aspect_ratio: :width)\n    File.rename(current_path + \".jpg\", current_path)\n    File.delete(tmpfile)\n  end\nend\n</code></pre>\n\n<blockquote>\n  <p>picture_uploader.rb</p>\n</blockquote>\n\n<pre><code># encoding: utf-8\n\nrequire 'carrierwave'\nclass PictureUploader &lt; CarrierWave::Uploader::Base\n\n  include Cloudinary::CarrierWave]\n\n  storage :file\n\n  def store_dir\n    \"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}\"\n  end\n\n  process :resize_to_limit =&gt; [700, 700]\n  process :convert =&gt; 'jpg'\n\n  version :thumb do\n    process :resize_to_limit =&gt; [300, 300]\n  end\n\n  def filename\n    time = Time.now\n    name = time.strftime('%Y%m%d%H%M%S') + '.jpg'\n    name.downcase\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "gem", "rvm"], "answers": [{"comments": [{"owner": {"reputation": 6320, "user_id": 1814446, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/wS47p.gif?s=128&g=1", "display_name": "Holly", "link": "https://stackoverflow.com/users/1814446/holly"}, "edited": false, "score": 0, "creation_date": 1432137159, "post_id": 30353956, "comment_id": 48801484, "body": "It does seem to be using the wrong path.  See my update in the question. How can I fix this?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 6320, "user_id": 1814446, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/wS47p.gif?s=128&g=1", "display_name": "Holly", "link": "https://stackoverflow.com/users/1814446/holly"}, "edited": false, "score": 0, "creation_date": 1432141738, "post_id": 30353956, "comment_id": 48804359, "body": "Make sure <code>rvm.sh</code> is properly imported into your environment. It may be missing or skipped for some reason. Normally you&#39;ll see <code>source rvm.sh</code> somewhere in <code>~&#47;.bashrc</code> or <code>~&#47;.profile</code> or something equivalent."}, {"owner": {"reputation": 6320, "user_id": 1814446, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/wS47p.gif?s=128&g=1", "display_name": "Holly", "link": "https://stackoverflow.com/users/1814446/holly"}, "edited": false, "score": 0, "creation_date": 1432201866, "post_id": 30353956, "comment_id": 48830709, "body": "thanks.  That seemed to fix rvm, the correct ruby version is now showing but I still get the same error when I try to install html5-boilerplate gem?  I updated my question again."}, {"owner": {"reputation": 223, "user_id": 2033562, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c8e518c6df4759ef7cf5175fb15d529?s=128&d=identicon&r=PG", "display_name": "Sonja Leaf", "link": "https://stackoverflow.com/users/2033562/sonja-leaf"}, "edited": false, "score": 0, "creation_date": 1432219638, "post_id": 30353956, "comment_id": 48843800, "body": "Have you tried not using <code>sudo</code> to install the Gem? Using <code>sudo</code> installs the gem to the ruby version for the super user, or root user on a system. This is not necessary with RVM. Just <code>gem install html5-boilerplate</code> should work."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1432135403, "creation_date": 1432135403, "answer_id": 30353956, "question_id": 30353356, "link": "https://stackoverflow.com/questions/30353356/rvm-and-ruby-version-not-working-as-expected/30353956#30353956", "title": "RVM and Ruby version not working as expected", "body": "<p>Having RVM and having RVM installed correctly are two different things. The most common cause of a mismatch like this is that your system Ruby has priority in your <code>PATH</code>.</p>\n\n<p>In a POSIX shell, <code>which ruby</code> will tell you which one is getting executed. It is probably the wrong one.</p>\n\n<p>RVM does its magic by manipulating which Ruby shows up in the RVM bin path, often <code>~/.rvm/bin</code> or something similar. To get it to work correctly you'll need to ensure that path is first in your <code>$PATH</code>.</p>\n\n<p>You may want to try reinstalling the RVM stub, or check that it's correctly loaded into your environment.</p>\n"}], "owner": {"reputation": 6320, "user_id": 1814446, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/wS47p.gif?s=128&g=1", "display_name": "Holly", "link": "https://stackoverflow.com/users/1814446/holly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 437, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1432202970, "creation_date": 1432133806, "last_edit_date": 1432202970, "question_id": 30353356, "link": "https://stackoverflow.com/questions/30353356/rvm-and-ruby-version-not-working-as-expected", "title": "RVM and Ruby version not working as expected", "body": "<p>I want to install the compass <a href=\"https://github.com/sporkd/compass-html5-boilerplate\" rel=\"nofollow\">html5 boilerplate</a> gem.  When I try to install it I get the following error.</p>\n\n<pre><code>$ sudo gem install html5-boilerplate\nERROR:  Error installing html5-boilerplate:\ncompass-h5bp requires Ruby version ~&gt; 2.0.\n</code></pre>\n\n<p>Then when I check my ruby version it says:</p>\n\n<pre><code>$ ruby -v\nruby 1.9.3p484 (2013-11-22 revision 43786) [x86_64-linux]\n</code></pre>\n\n<p>But I used RVM before so I thought I could just change version but when I check it says I'm using ruby-2.2.0 already.</p>\n\n<pre><code>$ rvm list\n\nrvm rubies\n\n=* ruby-2.2.0 [ x86_64 ]\n\n# =&gt; - current\n# =* - current &amp;&amp; default\n#  * - default\n</code></pre>\n\n<p>I think I must be missing something obhvious, it's been a while since I've worked with Ruby and RVM.</p>\n\n<p><strong>Update 1</strong></p>\n\n<p>I ran the below commands as suggested by @tadman and it does seem the wrong path is being used.</p>\n\n<pre><code>~:$ cd ~/.rvm/bin\nbin:$ ls\nruby-rvm-env  rvm  rvm-auto-ruby  rvm-exec  rvm-prompt  rvm-shebang-ruby  rvm-shell  rvm-smile  rvmsudo\nbin:$ which ruby\n/usr/bin/ruby\n</code></pre>\n\n<h2>UPDATE 2</h2>\n\n<p>After correcting the path in my <code>.bash_profile</code> the ruby version seems correct but I'm still getting the same error when trying to install the html5-boilerplate gem??</p>\n\n<pre><code>$ sudo gem install html5-boilerplate\nERROR:  Error installing html5-boilerplate:\n    compass-h5bp requires Ruby version ~&gt; 2.0.\n$ ruby -v\nruby 2.2.0p0 (2014-12-25 revision 49005) [x86_64-linux]\n$ rvm list\n\nrvm rubies\n\n=* ruby-2.2.0 [ x86_64 ]\n\n# =&gt; - current\n# =* - current &amp;&amp; default\n#  * - default\n\n$ compass -v\nCompass 1.0.3 (Polaris)\nCopyright (c) 2008-2015 Chris Eppstein\nReleased under the MIT License.\nCompass is charityware.\nPlease make a tax deductable donation for a worthy cause: http://umdf.org/compass\n</code></pre>\n\n<p>Also i have the compass gem installed on both Ruby 1.9.1 and RVM's ruby 2.2.0.  Could this have something to do with it?</p>\n\n<pre><code>$ pwd\n/var/lib/gems/1.9.1/gems/compass-1.0.3\n$ cd /home/ross/.rvm/gems/ruby-2.2.0/gems/compass-1.0.3\n$ pwd\n/home/ross/.rvm/gems/ruby-2.2.0/gems/compass-1.0.3\n</code></pre>\n\n<p>Is there a way to check which ruby version compass is using?</p>\n"}, {"tags": ["ruby", "garbage-collection", "fork", "shared-memory", "copy-on-write"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1432136447, "post_id": 30353272, "comment_id": 48800956, "body": "That\u2019s amazingly cute. What is the question after all?"}, {"owner": {"reputation": 6706, "user_id": 569374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/948f8031e9110f7fc6d53ccb9abddb5f?s=128&d=identicon&r=PG", "display_name": "Michael Papile", "link": "https://stackoverflow.com/users/569374/michael-papile"}, "edited": false, "score": 2, "creation_date": 1432140209, "post_id": 30353272, "comment_id": 48803462, "body": "Why the troll-like comment? The question is the first line of the post."}, {"owner": {"reputation": 1568, "user_id": 3957977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KVs29.jpg?s=128&g=1", "display_name": "Eugene Petrov", "link": "https://stackoverflow.com/users/3957977/eugene-petrov"}, "edited": false, "score": 0, "creation_date": 1432145687, "post_id": 30353272, "comment_id": 48806615, "body": "Very interesting question, just thought maybe this due to lots of bitmap tables changing during gc... so it happens that every malloc page contains it and thus being copied on write. Will play with it later."}, {"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 0, "creation_date": 1432225518, "post_id": 30353272, "comment_id": 48847919, "body": "See <a href=\"http://patshaughnessy.net/2012/1/4/never-create-ruby-strings-longer-than-23-characters\" rel=\"nofollow noreferrer\">Never create Ruby strings longer than 23 characters</a> - you may be getting bit by the fact that Ruby stores string values on strings &lt;24 bytes long directly on the RValue, rather than on the heap. That might explain why your larger strings remain shared while smaller ones get copied."}, {"owner": {"reputation": 17846, "user_id": 1664443, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/EGaoL.png?s=128&g=1", "display_name": "Dan Beaulieu", "link": "https://stackoverflow.com/users/1664443/dan-beaulieu"}, "edited": false, "score": 0, "creation_date": 1434463608, "post_id": 30353272, "comment_id": 49781346, "body": "excellent first question thomas, welcome to stack"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1475084678, "post_id": 30353272, "comment_id": 66804637, "body": "See also the older question by Thomas, <a href=\"http://stackoverflow.com/questions/29900458/ruby-forking-and-cow-running-gc-are-killing-the-performance\">Ruby forking and CoW running GC are killing the performance</a>.  It is marked as a duplicate of this one."}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 4838453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83ca14ff412ceb5a33649a03c3a2005?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Kalmus", "link": "https://stackoverflow.com/users/4838453/thomas-kalmus"}, "edited": false, "score": 0, "creation_date": 1432279700, "post_id": 30363718, "comment_id": 48869893, "body": "Seems like this little clean up helps a bit. But if we create a memory object in the child process now, for instance like this memory_object( 1000 * 1000 * 10), then the memory will still be duplicated. Any idea why ? It happens even if we simply call the above method without assigning the output to a variable."}, {"owner": {"reputation": 1568, "user_id": 3957977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KVs29.jpg?s=128&g=1", "display_name": "Eugene Petrov", "link": "https://stackoverflow.com/users/3957977/eugene-petrov"}, "reply_to_user": {"reputation": 111, "user_id": 4838453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83ca14ff412ceb5a33649a03c3a2005?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Kalmus", "link": "https://stackoverflow.com/users/4838453/thomas-kalmus"}, "edited": false, "score": 0, "creation_date": 1432293804, "post_id": 30363718, "comment_id": 48878430, "body": "just did some tests - if I allocate to <code>big_memory2</code> the memory stays almost shared: <code>31&#47;24</code> (priv/shared pages), same for call without assignment: <code>27&#47;24</code>, if i overwrite <code>big_memory</code> first GC starts cleaning up old references(that was shared during forking) so it results to <code>50&#47;1</code>, almost nothing shared. So it seems ruby marking objects as free and pages as &quot;tomb&quot;, this memory will be reused when you will allocate further object. Look at this <a href=\"https://www.diffchecker.com/ovoji4f7\" rel=\"nofollow noreferrer\">diff</a>"}, {"owner": {"reputation": 1568, "user_id": 3957977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KVs29.jpg?s=128&g=1", "display_name": "Eugene Petrov", "link": "https://stackoverflow.com/users/3957977/eugene-petrov"}, "reply_to_user": {"reputation": 111, "user_id": 4838453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83ca14ff412ceb5a33649a03c3a2005?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Kalmus", "link": "https://stackoverflow.com/users/4838453/thomas-kalmus"}, "edited": false, "score": 0, "creation_date": 1432294310, "post_id": 30363718, "comment_id": 48878744, "body": "By allocating to <code>big_memory</code> in the child, then running gc and allocating to <code>big_memory2</code> same amount of memory, i&#39;ve got <code>56&#47;1</code>, so about 21 out of 27 pages was reused for new allocation."}, {"owner": {"reputation": 1568, "user_id": 3957977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KVs29.jpg?s=128&g=1", "display_name": "Eugene Petrov", "link": "https://stackoverflow.com/users/3957977/eugene-petrov"}, "reply_to_user": {"reputation": 111, "user_id": 4838453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83ca14ff412ceb5a33649a03c3a2005?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Kalmus", "link": "https://stackoverflow.com/users/4838453/thomas-kalmus"}, "edited": false, "score": 0, "creation_date": 1432295070, "post_id": 30363718, "comment_id": 48879280, "body": "So just be careful when removing references to the data that was allocated before fork - it will be copied before actual release of memory - either free it partially and gradually, or select data that won&#39;t need to be discarded."}, {"owner": {"reputation": 1568, "user_id": 3957977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KVs29.jpg?s=128&g=1", "display_name": "Eugene Petrov", "link": "https://stackoverflow.com/users/3957977/eugene-petrov"}, "reply_to_user": {"reputation": 111, "user_id": 4838453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83ca14ff412ceb5a33649a03c3a2005?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Kalmus", "link": "https://stackoverflow.com/users/4838453/thomas-kalmus"}, "edited": false, "score": 0, "creation_date": 1432296867, "post_id": 30363718, "comment_id": 48880563, "body": "With <code>option=0</code> i&#39;m getting <code>11&#47;63</code> normally, and <code>97&#47;1</code> if i allocate to <code>big_memory</code>, then free and allocate to <code>big_memory2</code>. But for call without assignment no - <code>87&#47;4</code>... will dig in later."}, {"owner": {"reputation": 111, "user_id": 4838453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83ca14ff412ceb5a33649a03c3a2005?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Kalmus", "link": "https://stackoverflow.com/users/4838453/thomas-kalmus"}, "edited": false, "score": 0, "creation_date": 1432298014, "post_id": 30363718, "comment_id": 48881366, "body": "So beside this RUBY_GC_HEAP_INIT_SLOTS value, have you made any other changes to the code ?"}, {"owner": {"reputation": 1568, "user_id": 3957977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KVs29.jpg?s=128&g=1", "display_name": "Eugene Petrov", "link": "https://stackoverflow.com/users/3957977/eugene-petrov"}, "reply_to_user": {"reputation": 111, "user_id": 4838453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83ca14ff412ceb5a33649a03c3a2005?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Kalmus", "link": "https://stackoverflow.com/users/4838453/thomas-kalmus"}, "edited": false, "score": 0, "creation_date": 1432298462, "post_id": 30363718, "comment_id": 48881672, "body": "no, <code>pp GC.stat</code> several times, get option from command line, <a href=\"http://pastebin.com/1m0HK8rM\" rel=\"nofollow noreferrer\">here&#39;s</a> what i have now."}, {"owner": {"reputation": 111, "user_id": 4838453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83ca14ff412ceb5a33649a03c3a2005?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Kalmus", "link": "https://stackoverflow.com/users/4838453/thomas-kalmus"}, "edited": false, "score": 0, "creation_date": 1432309700, "post_id": 30363718, "comment_id": 48889474, "body": "I played with these GC parameters. Indeed, it can solve the problem but at the cost of speed, so it actually comes down to the same. I guess I will just notify ruby developers about the issue and wait for a new version."}, {"owner": {"reputation": 1568, "user_id": 3957977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KVs29.jpg?s=128&g=1", "display_name": "Eugene Petrov", "link": "https://stackoverflow.com/users/3957977/eugene-petrov"}, "reply_to_user": {"reputation": 111, "user_id": 4838453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83ca14ff412ceb5a33649a03c3a2005?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Kalmus", "link": "https://stackoverflow.com/users/4838453/thomas-kalmus"}, "edited": false, "score": 0, "creation_date": 1432310558, "post_id": 30363718, "comment_id": 48890031, "body": "yes, they are certainly able to deliver a better solution by completely separating flags and objects in memory."}, {"owner": {"reputation": 1568, "user_id": 3957977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KVs29.jpg?s=128&g=1", "display_name": "Eugene Petrov", "link": "https://stackoverflow.com/users/3957977/eugene-petrov"}, "reply_to_user": {"reputation": 111, "user_id": 4838453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83ca14ff412ceb5a33649a03c3a2005?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Kalmus", "link": "https://stackoverflow.com/users/4838453/thomas-kalmus"}, "edited": false, "score": 0, "creation_date": 1432311557, "post_id": 30363718, "comment_id": 48890653, "body": "By the way there was an <a href=\"https://bugs.ruby-lang.org/issues/10559\" rel=\"nofollow noreferrer\">issue</a> with similar situation."}, {"owner": {"reputation": 111, "user_id": 4838453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83ca14ff412ceb5a33649a03c3a2005?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Kalmus", "link": "https://stackoverflow.com/users/4838453/thomas-kalmus"}, "edited": false, "score": 0, "creation_date": 1432621733, "post_id": 30363718, "comment_id": 48983255, "body": "Thanks @EugenePetrov for taking care of the problem. I actually came up with the same theory, so I&#39;m glad that it&#39;s confirmed now."}], "tags": [], "owner": {"reputation": 1568, "user_id": 3957977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KVs29.jpg?s=128&g=1", "display_name": "Eugene Petrov", "link": "https://stackoverflow.com/users/3957977/eugene-petrov"}, "is_accepted": false, "score": 2, "last_activity_date": 1432556025, "last_edit_date": 1432556025, "creation_date": 1432176562, "answer_id": 30363718, "question_id": 30353272, "link": "https://stackoverflow.com/questions/30353272/garbage-collector-in-ruby-2-2-provokes-unexpected-cow/30363718#30363718", "title": "Garbage collector in Ruby 2.2 provokes unexpected CoW", "body": "<h2>UPD2</h2>\n\n<p>Suddenly figured out why all the memory is going private if you format the string -- you generate garbage during formatting, having GC disabled, then enable GC, and you've got holes of released objects in your generated data. Then you fork, and new garbage starts to occupy these holes, the more garbage - more private pages.</p>\n\n<p>So i added a cleanup function to run GC each 2000 cycles (just enabling lazy GC didn't help):</p>\n\n<pre><code>count.times do |i|\n  cleanup(i)\n  result &lt;&lt; \"%20.18f\" % rand\nend\n\n#......snip........#\n\ndef cleanup(i)\n      if ((i%2000).zero?)\n        GC.enable; GC.start; GC.disable\n      end\nend   \n\n##### main #####\n</code></pre>\n\n<p>Which resulted in(with generating <code>memory_object( 1000 * 1000 * 10)</code> after fork):</p>\n\n<pre><code>RUBY_GC_HEAP_INIT_SLOTS=600000 ruby gc-test.rb 0\nruby version 2.2.0\n proces   pid log          priv_dirty shared_dirty\n Parent  2501 post alloc           35          0\n Parent  2501 4 fork                0         35\n Child   2503 4 initial             0         35\n Child   2503 8 empty GC           28         22\n</code></pre>\n\n<p>Yes, it affects performance, but only before forking, i.e. increase load time in your case.</p>\n\n<hr>\n\n<h2>UPD1</h2>\n\n<p>Just found <a href=\"https://github.com/ruby/ruby/blob/trunk/gc.c#L962\" rel=\"nofollow\">criteria</a> by which ruby 2.2 sets old object bits, it's 3 GC's, so if you add following before forking:</p>\n\n<pre><code>GC.enable; 3.times {GC.start}; GC.disable\n# start the forking\n</code></pre>\n\n<p>you will get(the option is <code>1</code> in command line):</p>\n\n<pre><code>$ RUBY_GC_HEAP_INIT_SLOTS=600000 ruby gc-test.rb 1\nruby version 2.2.0\n proces   pid log          priv_dirty shared_dirty\n Parent  2368 post alloc           31          0\n Parent  2368 4 fork                1         34\n Child   2370 4 initial             1         34\n Child   2370 8 empty GC            2         32\n</code></pre>\n\n<p><em>But this needs to be further tested concerning the behavior of such objects on future GC's, at least after 100 GC's <code>:old_objects</code> remains constant, so i suppose it should be OK</em></p>\n\n<p>Log with <code>GC.stat</code> is <a href=\"http://pastebin.com/TvYHADg2\" rel=\"nofollow\">here</a></p>\n\n<hr>\n\n<p>By the way there's also option <a href=\"https://github.com/ruby/ruby/blob/trunk/gc.c#L232\" rel=\"nofollow\"><code>RGENGC_OLD_NEWOBJ_CHECK</code></a> to create old objects from the beginning, but i doubt it's a good idea, but may be useful for a particular case.</p>\n\n<h2>First answer</h2>\n\n<p>My proposition in the comment above was wrong, actually bitmap tables are the savior.</p>\n\n<pre><code>(option = 1)\n\nruby version 2.0.0\n proces   pid log          priv_dirty shared_dirty\n Parent 14807 post alloc           27          0\n Parent 14807 4 fork                0         27\n Child  14809 4 initial             0         27\n Child  14809 8 empty GC            6         25 # &lt;&lt; almost everything stays shared &lt;&lt;\n</code></pre>\n\n<p>Also had by hand and tested Ruby Enterprise Edition it's only half better than worst cases.</p>\n\n<pre><code>ruby version 1.8.7\n proces   pid log          priv_dirty shared_dirty\n Parent 15064 post alloc           86          0\n Parent 15064 4 fork                2         84\n Child  15065 4 initial             2         84\n Child  15065 8 empty GC           40         46\n</code></pre>\n\n<hr>\n\n<p>(I made the script run strictly 1 GC, by increasing <code>RUBY_GC_HEAP_INIT_SLOTS</code> to 600k)</p>\n"}], "owner": {"reputation": 111, "user_id": 4838453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d83ca14ff412ceb5a33649a03c3a2005?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Kalmus", "link": "https://stackoverflow.com/users/4838453/thomas-kalmus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 653, "favorite_count": 1, "answer_count": 1, "score": 10, "last_activity_date": 1432556025, "creation_date": 1432133609, "last_edit_date": 1432293313, "question_id": 30353272, "link": "https://stackoverflow.com/questions/30353272/garbage-collector-in-ruby-2-2-provokes-unexpected-cow", "title": "Garbage collector in Ruby 2.2 provokes unexpected CoW", "body": "<p>How do I prevent the GC from provoking copy-on-write, when I fork my process ? I have recently been analyzing the garbage collector's  behavior in Ruby, due to some memory issues that I encountered in my program (I run out of memory on my 60core 0.5Tb machine even for fairly small tasks). For me this really limits the usefulness of ruby for running programs on multicore servers. I would like to present my experiments and results here.</p>\n\n<p>The issue arises when the garbage collector runs during forking. I have investigated three cases that illustrate the issue.</p>\n\n<p>Case 1: We allocate a lot of objects (strings no longer than 20 bytes) in the memory using an array. The strings are created using a random number and string formatting. When the process forks and we force the GC to run in the child, all the shared memory goes private, causing a duplication of the initial memory.</p>\n\n<p>Case 2: We allocate a lot of objects (strings) in the memory using an array, but the string is created using the rand.to_s function, hence we remove the formatting of the data compared to the previous case. We end up with a smaller amount of memory being used, presumably due to less garbage. When the process forks and we force the GC to run in the child, only part of the memory goes private. We have a duplication of the initial memory, but to a smaller extent.</p>\n\n<p>Case 3: We allocate fewer objects compared to before, but the objects are bigger, such that the amount of memory allocated stays the same as in the previous cases. When the process forks and we force the GC to run in the child all the memory stays shared, i.e. no memory duplication.</p>\n\n<p>Here I paste the Ruby code that has been used for these experiments. To switch between cases you only need to change the \u201coption\u201d value in the memory_object function. The code was tested using Ruby 2.2.2, 2.2.1, 2.1.3, 2.1.5 and 1.9.3 on an Ubuntu 14.04 machine.</p>\n\n<p>Sample output for case 1:</p>\n\n<pre><code>ruby version 2.2.2 \n proces   pid log                   priv_dirty   shared_dirty \n Parent  3897 post alloc                   38            0 \n Parent  3897 4 fork                        0           37 \n Child   3937 4 initial                     0           37 \n Child   3937 8 empty GC                   35            5 \n</code></pre>\n\n<p>The exact same code has been written in Python and in all cases the CoW works perfectly fine.</p>\n\n<p>Sample output for case 1:</p>\n\n<pre><code>python version 2.7.6 (default, Mar 22 2014, 22:59:56) \n[GCC 4.8.2] \n proces   pid log                   priv_dirty shared_dirty \n Parent  4308 post alloc                35             0 \n Parent  4308 4 fork                     0            35 \n Child   4309 4 initial                  0            35 \n Child   4309 10 empty GC                1            34 \n</code></pre>\n\n<p>Ruby code</p>\n\n<pre><code>$start_time=Time.new\n\n# Monitor use of Resident and Virtual memory.\nclass Memory\n\n    shared_dirty = '.+?Shared_Dirty:\\s+(\\d+)'\n    priv_dirty = '.+?Private_Dirty:\\s+(\\d+)'\n    MEM_REGEXP = /#{shared_dirty}#{priv_dirty}/m\n\n    # get memory usage\n    def self.get_memory_map( pids)\n        memory_map = {}\n        memory_map[ :pids_found] = {}\n        memory_map[ :shared_dirty] = 0\n        memory_map[ :priv_dirty] = 0\n\n        pids.each do |pid|\n            begin\n                lines = nil\n                lines = File.read( \"/proc/#{pid}/smaps\")\n            rescue\n                lines = nil\n            end\n            if lines\n                lines.scan(MEM_REGEXP) do |shared_dirty, priv_dirty|\n                    memory_map[ :pids_found][pid] = true\n                    memory_map[ :shared_dirty] += shared_dirty.to_i\n                    memory_map[ :priv_dirty] += priv_dirty.to_i\n                end\n            end\n        end\n        memory_map[ :pids_found] = memory_map[ :pids_found].keys\n        return memory_map\n    end\n\n    # get the processes and get the value of the memory usage\n    def self.memory_usage( )\n        pids   = [ $$]\n        result = self.get_memory_map( pids)\n\n        result[ :pids]   = pids\n        return result\n    end\n\n    # print the values of the private and shared memories\n    def self.log( process_name='', log_tag=\"\")\n        if process_name == \"header\"\n            puts \" %-6s %5s %-12s %10s %10s\\n\" % [\"proces\", \"pid\", \"log\", \"priv_dirty\", \"shared_dirty\"]\n        else\n            time = Time.new - $start_time\n            mem = Memory.memory_usage( )\n            puts \" %-6s %5d %-12s %10d %10d\\n\" % [process_name, $$, log_tag, mem[:priv_dirty]/1000, mem[:shared_dirty]/1000]\n        end\n    end\nend\n\n# function to delay the processes a bit\ndef time_step( n)\n    while Time.new - $start_time &lt; n\n        sleep( 0.01)\n    end\nend\n\n# create an object of specified size. The option argument can be changed from 0 to 2 to visualize the behavior of the GC in various cases\n#\n# case 0 (default) : we make a huge array of small objects by formatting a string\n# case 1 : we make a huge array of small objects without formatting a string (we use the to_s function)\n# case 2 : we make a smaller array of big objects\ndef memory_object( size, option=1)\n    result = []\n    count = size/20\n\n    if option &gt; 3 or option &lt; 1\n        count.times do\n            result &lt;&lt; \"%20.18f\" % rand\n        end\n    elsif option == 1\n        count.times do\n            result &lt;&lt; rand.to_s\n        end\n    elsif option == 2\n        count = count/10\n        count.times do\n            result &lt;&lt; (\"%20.18f\" % rand)*30\n        end\n    end\n\n    return result\nend\n\n##### main #####\n\nputs \"ruby version #{RUBY_VERSION}\"\n\nGC.disable\n\n# print the column headers and first line\nMemory.log( \"header\")\n\n# Allocation of memory\nbig_memory = memory_object( 1000 * 1000 * 10)\n\nMemory.log( \"Parent\", \"post alloc\")\n\nlab_time = Time.new - $start_time\nif lab_time &lt; 3.9\n    lab_time = 0\nend\n\n# start the forking\npid = fork do\n    time = 4\n    time_step( time + lab_time)\n    Memory.log( \"Child\", \"#{time} initial\")\n\n    # force GC when nothing happened\n    GC.enable; GC.start; GC.disable\n\n    time = 8\n    time_step( time + lab_time)\n    Memory.log( \"Child\", \"#{time} empty GC\")\n\n    sleep( 1)\n    STDOUT.flush\n    exit!\nend\n\ntime = 4\ntime_step( time + lab_time)\nMemory.log( \"Parent\", \"#{time} fork\")\n\n# wait for the child to finish\nProcess.wait( pid)\n</code></pre>\n\n<p>Python code</p>\n\n<pre><code>import re\nimport time\nimport os\nimport random\nimport sys\nimport gc\n\nstart_time=time.time()\n\n# Monitor use of Resident and Virtual memory.\nclass Memory:   \n\n    def __init__(self):\n        self.shared_dirty = '.+?Shared_Dirty:\\s+(\\d+)'\n        self.priv_dirty = '.+?Private_Dirty:\\s+(\\d+)'\n        self.MEM_REGEXP = re.compile(\"{shared_dirty}{priv_dirty}\".format(shared_dirty=self.shared_dirty, priv_dirty=self.priv_dirty), re.DOTALL)\n\n    # get memory usage\n    def get_memory_map(self, pids):\n        memory_map = {}\n        memory_map[ \"pids_found\" ] = {}\n        memory_map[ \"shared_dirty\" ] = 0\n        memory_map[ \"priv_dirty\" ] = 0\n\n        for pid in pids:\n            try:\n                lines = None\n\n                with open( \"/proc/{pid}/smaps\".format(pid=pid), \"r\" ) as infile:\n                    lines = infile.read()\n            except:\n                lines = None\n\n            if lines:\n                for shared_dirty, priv_dirty in re.findall( self.MEM_REGEXP, lines ):\n                    memory_map[ \"pids_found\" ][pid] = True\n                    memory_map[ \"shared_dirty\" ] += int( shared_dirty )\n                    memory_map[ \"priv_dirty\" ] += int( priv_dirty )     \n\n        memory_map[ \"pids_found\" ] = memory_map[ \"pids_found\" ].keys()\n        return memory_map\n\n    # get the processes and get the value of the memory usage   \n    def memory_usage( self):\n        pids   = [ os.getpid() ]\n        result = self.get_memory_map( pids)\n\n        result[ \"pids\" ]   = pids\n\n        return result\n\n    # print the values of the private and shared memories\n    def log( self, process_name='', log_tag=\"\"):\n        if process_name == \"header\":\n            print \" %-6s %5s %-12s %10s %10s\" % (\"proces\", \"pid\", \"log\", \"priv_dirty\", \"shared_dirty\")\n        else:\n            global start_time\n            Time = time.time() - start_time\n            mem = self.memory_usage( )\n            print \" %-6s %5d %-12s %10d %10d\" % (process_name, os.getpid(), log_tag, mem[\"priv_dirty\"]/1000, mem[\"shared_dirty\"]/1000)\n\n# function to delay the processes a bit\ndef time_step( n):\n    global start_time\n    while (time.time() - start_time) &lt; n:\n        time.sleep( 0.01)\n\n# create an object of specified size. The option argument can be changed from 0 to 2 to visualize the behavior of the GC in various cases\n#\n# case 0 (default) : we make a huge array of small objects by formatting a string\n# case 1 : we make a huge array of small objects without formatting a string (we use the to_s function)\n# case 2 : we make a smaller array of big objects                                       \ndef memory_object( size, option=2):\n    count = size/20\n\n    if option &gt; 3 or option &lt; 1:\n        result = [ \"%20.18f\"% random.random() for i in xrange(count) ]\n\n    elif option == 1:\n        result = [ str( random.random() ) for i in xrange(count) ]\n\n    elif option == 2:\n        count = count/10\n        result = [ (\"%20.18f\"% random.random())*30 for i in xrange(count) ]\n\n    return result\n\n##### main #####\n\nprint \"python version {version}\".format(version=sys.version)\n\nmemory = Memory()\n\ngc.disable()\n\n# print the column headers and first line\nmemory.log( \"header\")   # Print the headers of the columns\n\n# Allocation of memory\nbig_memory = memory_object( 1000 * 1000 * 10)   # Allocate memory\n\nmemory.log( \"Parent\", \"post alloc\")\n\nlab_time = time.time() - start_time\nif lab_time &lt; 3.9:\n    lab_time = 0\n\n# start the forking\npid = os.fork()     # fork the process\nif pid == 0:\n    Time = 4\n    time_step( Time + lab_time)\n    memory.log( \"Child\", \"{time} initial\".format(time=Time))\n\n    # force GC when nothing happened\n    gc.enable(); gc.collect(); gc.disable();\n\n    Time = 10\n    time_step( Time + lab_time)\n    memory.log( \"Child\", \"{time} empty GC\".format(time=Time))\n\n    time.sleep( 1)\n\n    sys.exit(0)\n\nTime = 4\ntime_step( Time + lab_time)\nmemory.log( \"Parent\", \"{time} fork\".format(time=Time))\n\n# Wait for child process to finish\nos.waitpid( pid, 0)\n</code></pre>\n\n<h1>EDIT</h1>\n\n<p>Indeed, calling the GC several times before forking the process solves the issue and I am quite surprised. I have also run the code using Ruby 2.0.0 and the issue doesn't even appear, so it must be related to this generational GC just like you mentioned.\nHowever, if I call the memory_object function without assigning the output to any variables (I am only creating garbage), then the memory is duplicated. The amount of memory that is copied depends on the amount of garbage that I create - the more garbage, the more memory becomes private.</p>\n\n<p>Any ideas how I can prevent this ?</p>\n\n<p>Here are some results</p>\n\n<p>Running the GC in 2.0.0</p>\n\n<pre><code>ruby version 2.0.0\n proces   pid log          priv_dirty shared_dirty\n Parent  3664 post alloc           67          0\n Parent  3664 4 fork                1         69\n Child   3700 4 initial             1         69\n Child   3700 8 empty GC            6         65\n</code></pre>\n\n<p>Calling memory_object( 1000*1000) in the child</p>\n\n<pre><code>ruby version 2.0.0\n proces   pid log          priv_dirty shared_dirty\n Parent  3703 post alloc           67          0\n Parent  3703 4 fork                1         70\n Child   3739 4 initial             1         70\n Child   3739 8 empty GC           15         56\n</code></pre>\n\n<p>Calling memory_object( 1000*1000*10)</p>\n\n<pre><code>ruby version 2.0.0\n proces   pid log          priv_dirty shared_dirty\n Parent  3743 post alloc           67          0\n Parent  3743 4 fork                1         69\n Child   3779 4 initial             1         69\n Child   3779 8 empty GC           89          5\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "import", "xlsx", "roo"], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 4346866, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9e5a43f34e6b8b2dc24bd8462803992b?s=128&d=identicon&r=PG&f=1", "display_name": "dogg", "link": "https://stackoverflow.com/users/4346866/dogg"}, "edited": false, "score": 0, "creation_date": 1432137701, "post_id": 30354160, "comment_id": 48801826, "body": "Thanks for your help! When I do this I get the following error &quot;string contains null byte&quot;, when I look on google many answers says it about a bug with rails 4.0.2 but I don&#39;t think it must be the case, any idea where this comes from?"}, {"owner": {"reputation": 118, "user_id": 3532150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/392ebd7d59ecd1ec1c88d2721d07c0a0?s=128&d=identicon&r=PG&f=1", "display_name": "Luc", "link": "https://stackoverflow.com/users/3532150/luc"}, "reply_to_user": {"reputation": 127, "user_id": 4346866, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9e5a43f34e6b8b2dc24bd8462803992b?s=128&d=identicon&r=PG&f=1", "display_name": "dogg", "link": "https://stackoverflow.com/users/4346866/dogg"}, "edited": false, "score": 0, "creation_date": 1432202548, "post_id": 30354160, "comment_id": 48831151, "body": "@dogg You probably have null bytes (zeros) in your input file. You should remove them (see <a href=\"http://stackoverflow.com/questions/11910040/exec-string-contains-null-byte-argumenterror\" title=\"exec string contains null byte argumenterror\">stackoverflow.com/questions/11910040/&hellip;</a>)."}], "tags": [], "owner": {"reputation": 118, "user_id": 3532150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/392ebd7d59ecd1ec1c88d2721d07c0a0?s=128&d=identicon&r=PG&f=1", "display_name": "Luc", "link": "https://stackoverflow.com/users/3532150/luc"}, "is_accepted": false, "score": 1, "last_activity_date": 1432135933, "creation_date": 1432135933, "answer_id": 30354160, "question_id": 30353196, "link": "https://stackoverflow.com/questions/30353196/how-to-map-data-imported-via-xlsx-with-no-headers-in-rails-4/30354160#30354160", "title": "How to map data imported via xlsx with no headers in rails 4", "body": "<p>It seems like you need to read the contents of the uploaded file into a String object first:</p>\n\n<pre><code>xlsx = Roo::Excelx.new(file.read)\n</code></pre>\n\n<p>You can refer to <a href=\"http://guides.rubyonrails.org/form_helpers.html#uploading-files\" rel=\"nofollow\">the relevant Rails guide</a> for details on how this works.</p>\n"}], "owner": {"reputation": 127, "user_id": 4346866, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9e5a43f34e6b8b2dc24bd8462803992b?s=128&d=identicon&r=PG&f=1", "display_name": "dogg", "link": "https://stackoverflow.com/users/4346866/dogg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 214, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432135933, "creation_date": 1432133433, "question_id": 30353196, "link": "https://stackoverflow.com/questions/30353196/how-to-map-data-imported-via-xlsx-with-no-headers-in-rails-4", "title": "How to map data imported via xlsx with no headers in rails 4", "body": "<p>I want to add an import function for the users of my rails app, however the files that they will import won't have a header and the interesting data will start at row 8. In the rows I only need 2 fields\nHere is an example of a line in the xlsx file : </p>\n\n<pre><code>751,\"01/17/2015\",\"11:17:32\",\"60\",\"TDFSRDSK\",\"2\",\"10\",\"-1\",\"0\",\"3\",\"\",\"26\",\"3\",\"\",\"\",\"1\",\"0\"  \n</code></pre>\n\n<p>I'll only need the date and the number in 4th field (60) and add them to an SQL table\nI have a problem with the mapping and how to do it. I've tried to do it based on the railscast tutorial and roo doc but I can't manage to make it work. </p>\n\n<pre><code>def self.import(file)\n xlsx = Roo::Excelx.new(file)\n xlsx.each_row do |row|\n  date = row[2]\n  value = row[4]\n  user_id = current_user.id\n  product.create(:date =&gt; date, :valeur =&gt; value, :user_id =&gt; user_id)\n end\nend\n</code></pre>\n\n<p>And the error I get : </p>\n\n<pre><code>no implicit conversion of ActionDispatch::Http::UploadedFile into String\n</code></pre>\n\n<p>I'm really new to rails/ruby so I'm not even sure the mapping code is supposed to be like that.</p>\n"}, {"tags": ["ruby", "csv"], "answers": [{"tags": [], "owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "is_accepted": false, "score": 0, "last_activity_date": 1432160460, "last_edit_date": 1432160460, "creation_date": 1432134218, "answer_id": 30353533, "question_id": 30352575, "link": "https://stackoverflow.com/questions/30352575/changing-information-in-a-csv-file/30353533#30353533", "title": "Changing information in a CSV file", "body": "<p>Given that you don't appear to be doing anything that draws on CSV capabilities, I'd recommend using Ruby's \"in-place\" option variable <a href=\"http://ruby-doc.org/docs/ruby-doc-bundle/Manual/man-1.4/variable.html#opt_i\" rel=\"nofollow\"><code>$-i</code></a>.</p>\n\n<p>Some of the stats software I use wants just the data, and can't deal with a header line.  Here's a script I wrote a while back to (appear to) strip the first line out of one or more data files specified on the command-line.</p>\n\n<pre><code>#! /usr/bin/env ruby -w\n#\n# User supplies the name of one or more files to be \"stripped\"\n# on the command-line.\n#\n# This script ignores the first line of each file.\n# Subsequent lines of the file are copied to the new version.\n#\n# The operation saves each original input file with a suffix of\n# \".orig\" and then operates in-place on the specified files.\n\n$-i = \".orig\"   # specify backup suffix\n\noldfilename = \"\"\n\nARGF.each do |line|\n  if ARGF.filename == oldfilename   # If it's an old file\n    puts line                       # copy lines through.\n  else                              # If it's a new file remember it\n    oldfilename = ARGF.filename     # but don't copy the first line.\n  end\nend\n</code></pre>\n\n<p>Obviously you'd want to change the <code>puts line</code> pass-through to whatever edit operations you want to perform.</p>\n\n<p>I like this solution because even if you screw it up, you've preserved your original file as its original name with <code>.orig</code> (or whatever suffix you choose) appended.</p>\n"}, {"comments": [{"owner": {"reputation": 551, "user_id": 2963406, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/771786349450c08965537c5c7ee6f776?s=128&d=identicon&r=PG&f=1", "display_name": "Luminusss", "link": "https://stackoverflow.com/users/2963406/luminusss"}, "edited": false, "score": 0, "creation_date": 1432233174, "post_id": 30361749, "comment_id": 48852537, "body": "I had thought about doing something like that, but didn&#39;t think to use <code>File</code> over <code>CSV</code>. I think that will get me going thanks so much for the help!"}], "tags": [], "owner": {"reputation": 366, "user_id": 2585056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb3859e90d1b02a0e8b02d140e055860?s=128&d=identicon&r=PG", "display_name": "chrisdurheim", "link": "https://stackoverflow.com/users/2585056/chrisdurheim"}, "is_accepted": true, "score": 1, "last_activity_date": 1432222421, "last_edit_date": 1432222421, "creation_date": 1432162539, "answer_id": 30361749, "question_id": 30352575, "link": "https://stackoverflow.com/questions/30352575/changing-information-in-a-csv-file/30361749#30361749", "title": "Changing information in a CSV file", "body": "<p>Depending on the size if the file, you might consider loading the contents of the file into a local variable and then manipulating that, overwriting the original file.</p>\n\n<pre><code>lines = CSV.read(path)\n\nFile.open(path, \"wb\") do |file|\n  lines.each do |line|\n    text = line[0].to_s\n    line[0] = \"test:#{text}\" # Replace this with your editing logic\n    file.write CSV.generate_line(line)\n  end\nend\n</code></pre>\n\n<p>Alternately, if the file is big, you could write each modified line to a new file along the way and then replace the old file with the new one at the end.</p>\n"}], "owner": {"reputation": 551, "user_id": 2963406, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/771786349450c08965537c5c7ee6f776?s=128&d=identicon&r=PG&f=1", "display_name": "Luminusss", "link": "https://stackoverflow.com/users/2963406/luminusss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 30361749, "answer_count": 2, "score": 0, "last_activity_date": 1432222421, "creation_date": 1432131969, "question_id": 30352575, "link": "https://stackoverflow.com/questions/30352575/changing-information-in-a-csv-file", "title": "Changing information in a CSV file", "body": "<p>I'm trying to write a ruby script that will read through a CSV file and prepend information to certain cells (for instance adding a path to a file). I am able to open and mutate the text just fine, but am having issues writing back to the CSV without overriding everything. This is a sample of what I have so far:</p>\n\n<pre><code>CSV.foreach(path) { |row|\n    text = row[0].to_s\n    new_text = \"test:#{text}\"\n}\n</code></pre>\n\n<p>I would like to add something within that block that would then write <code>new_text</code>back to the same reference cell(<code>row</code>) in the file. The only way I have to found to write to a file is </p>\n\n<pre><code> CSV.open(path, \"wb\") { |row|\n     row &lt;&lt; new_text\n }\n</code></pre>\n\n<p>But I think that is bad practice since you are reopening the file within the file block already. Is there a better way I could do this?</p>\n\n<p>EX: I have a CSV file that looks something like:</p>\n\n<pre><code>file,destination\ntest.txt,A101\n</code></pre>\n\n<p>and need it to be:</p>\n\n<pre><code>file,destination\npath/test.txt,id:A101\n</code></pre>\n\n<p>Hope that makes sense. Thanks in advance!</p>\n"}, {"tags": ["ruby", "button", "selenium", "upload"], "answers": [{"tags": [], "owner": {"reputation": 3026, "user_id": 3932942, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/ea692da698891091e138bc7cc52ec647?s=128&d=identicon&r=PG&f=1", "display_name": "Stan E", "link": "https://stackoverflow.com/users/3932942/stan-e"}, "is_accepted": false, "score": 1, "last_activity_date": 1432138379, "creation_date": 1432138379, "answer_id": 30355092, "question_id": 30352369, "link": "https://stackoverflow.com/questions/30352369/uploading-files-using-ruby-selenium/30355092#30355092", "title": "Uploading files using ruby / Selenium", "body": "<p>As I have no your code, assume we are testing <a href=\"https://encodable.com/uploaddemo/\" rel=\"nofollow\">https://encodable.com/uploaddemo/</a></p>\n\n<pre><code>@driver.navigate.to \"https://encodable.com/uploaddemo/\"\nelement = @driver.find_element(:css, 'input[type=file]')\nelement.send_keys   \"/full/path/to/file.jpg\"\n@driver.find_element(:css, 'input[type=button]').click\n</code></pre>\n\n<p>So, you should send the full path to the input field and press the \"submit\" button</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5759935, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2oov3o4eIx8/AAAAAAAAAAI/AAAAAAAAACE/A1vS-GU6f1w/photo.jpg?sz=128", "display_name": "M-Ria", "link": "https://stackoverflow.com/users/5759935/m-ria"}, "is_accepted": false, "score": 0, "last_activity_date": 1464201719, "last_edit_date": 1464201719, "creation_date": 1464199047, "answer_id": 37444488, "question_id": 30352369, "link": "https://stackoverflow.com/questions/30352369/uploading-files-using-ruby-selenium/37444488#37444488", "title": "Uploading files using ruby / Selenium", "body": "<p>I know this is coming a year late but I just started writing a script in Selenium/Ruby and it took me some time to figure it out so wanted to post my solution (and it was as simple as 2 lines!):</p>\n\n<p>*the first line inserts the file path WITHOUT clicking on the browse button, key is to separate directories using double back slashes <code>\\\\</code></p>\n\n<p>*the second line clicks on the Save/Upload button</p>\n\n<pre><code>driver.find_element(id: \"Document_upload\").send_keys(\"C:\\\\Users\\\\me\\\\Desktop\\\\my_file.txt\")\ndriver.find_element(id: \"save\").click\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 3531858, "user_type": "registered", "accept_rate": 44, "profile_image": "https://graph.facebook.com/1364070204/picture?type=large", "display_name": "user3531858", "link": "https://stackoverflow.com/users/3531858/user3531858"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2701, "favorite_count": 1, "answer_count": 2, "score": 1, "last_activity_date": 1464201719, "creation_date": 1432131451, "last_edit_date": 1432302296, "question_id": 30352369, "link": "https://stackoverflow.com/questions/30352369/uploading-files-using-ruby-selenium", "title": "Uploading files using ruby / Selenium", "body": "<p>I am writing a script where I click on a button (Select Photo) which opens up a file upload (explorer) box.  How am I to set my file name?</p>\n\n<p>This is the code I'm using to click on the Select Photo button (ruby)</p>\n\n<pre><code>driver.find_element(:id, \"fileUploadButton\").click\n</code></pre>\n\n<p>I've seen some posts that says I do not need to click on the button but to send the path to the file/image I want to upload.  So how would I upload a file on c:\\temp\\mypicture.jpg?</p>\n\n<p>Here's my full and simple code.</p>\n\n<pre><code>driver.navigate.to \"http://blah blah\"  #the real site is an internal site\ndriver.find_element(:id, \"claimGiftButtonDesktop\").click\nsleep 5\ndriver.find_element(:id, \"fileUploadButton\").click\n</code></pre>\n\n<p>After clicking the fileUploadButton, that's when the explorer window will show.  If I manually click on Open or double click on it, then a loading modal shows and the image is shown on the website.</p>\n\n<p>Here is an IDE recording which works.  I'm just having problems translating this into ruby.</p>\n\n<pre><code>open /PromoSite\nclick id=claimGiftButtonDesktop\nclick id=fileUploadButton\ntype  id=fileInputElem     #Value C:\\\\temp\\\\file.jpg\nclick id=viewProductPreviewButton\n</code></pre>\n\n<p>I've also added a screen shot.  I click the button and the File Upload shows up.  This should be something easy, so I must not be focusing on the correct id.\n<img src=\"https://i.stack.imgur.com/B4jTR.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1432132149, "post_id": 30352310, "comment_id": 48797654, "body": "You shouldn&#39;t <code>break</code> in your loop since you won&#39;t get past <code>test_2</code> in that case. Are you just wanting to collect their path names into the <code>@files</code> array? I don&#39;t &quot;see the struggle&quot; (other than the <code>break</code> problem) because it&#39;s unclear what your end goal is. You might want to look at <a href=\"http://ruby-doc.org/core-2.2.0/Dir.html#method-c-glob\" rel=\"nofollow noreferrer\"><code>Dir.glob</code></a>."}, {"owner": {"reputation": 494, "user_id": 2248005, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7417975bab1cece8af8b5bf02523b2da?s=128&d=identicon&r=PG", "display_name": "Zero", "link": "https://stackoverflow.com/users/2248005/zero"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1432132623, "post_id": 30352310, "comment_id": 48798008, "body": "yeah already got an answer. But the struggle was that if in this case test_3 file isnt found it breaks. But without the break it runs 10 times also if he doesnt find anything"}], "answers": [{"comments": [{"owner": {"reputation": 494, "user_id": 2248005, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7417975bab1cece8af8b5bf02523b2da?s=128&d=identicon&r=PG", "display_name": "Zero", "link": "https://stackoverflow.com/users/2248005/zero"}, "edited": false, "score": 0, "creation_date": 1432131830, "post_id": 30352400, "comment_id": 48797355, "body": "Wow thanks that was easy. Is there a way to sort them?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 494, "user_id": 2248005, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7417975bab1cece8af8b5bf02523b2da?s=128&d=identicon&r=PG", "display_name": "Zero", "link": "https://stackoverflow.com/users/2248005/zero"}, "edited": false, "score": 1, "creation_date": 1432132050, "post_id": 30352400, "comment_id": 48797566, "body": "It&#39;s an array of strings. Sort them however you like."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 10, "last_activity_date": 1432131525, "creation_date": 1432131525, "answer_id": 30352400, "question_id": 30352310, "link": "https://stackoverflow.com/questions/30352310/ruby-rails-find-file-with-name-like/30352400#30352400", "title": "Ruby / Rails find file with name like", "body": "<p><a href=\"http://ruby-doc.org/core-1.9.3/Dir.html#method-c-5B-5D\" rel=\"noreferrer\">Globbing</a> is the way to go. This will return an array of filenames matching your pattern.</p>\n\n<pre><code>Dir[\"/test/files/example/test_*.wav\"]\n</code></pre>\n"}], "owner": {"reputation": 494, "user_id": 2248005, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/7417975bab1cece8af8b5bf02523b2da?s=128&d=identicon&r=PG", "display_name": "Zero", "link": "https://stackoverflow.com/users/2248005/zero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3130, "favorite_count": 0, "accepted_answer_id": 30352400, "answer_count": 1, "score": 4, "last_activity_date": 1432131525, "creation_date": 1432131338, "question_id": 30352310, "link": "https://stackoverflow.com/questions/30352310/ruby-rails-find-file-with-name-like", "title": "Ruby / Rails find file with name like", "body": "<p>i try to find all files in a directory which has a name like \"test\".</p>\n\n<p>So in my directory (/test/files/example) i got following files:</p>\n\n<ul>\n<li>test_1 </li>\n<li>test_2 </li>\n<li>test_5 </li>\n<li>test_9</li>\n</ul>\n\n<p>How can i get all the files with the File Class in Ruby? I do this but i think you see the struggle</p>\n\n<pre><code>10.times do |count|\n  file_path = \"/test/files/example/test_#{count}.wav\"\n  if File.exist?(file_path)\n    @files[count] = file_path\n    next\n  end\n  break\nend\n</code></pre>\n"}, {"tags": ["mysql", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "fedora"], "answers": [{"tags": [], "owner": {"reputation": 52, "user_id": 4912987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7f411dfef857ff67b9471d6d39599e82?s=128&d=identicon&r=PG&f=1", "display_name": "cevado", "link": "https://stackoverflow.com/users/4912987/cevado"}, "is_accepted": false, "score": 3, "last_activity_date": 1436911747, "last_edit_date": 1436911747, "creation_date": 1432132453, "answer_id": 30352775, "question_id": 30352136, "link": "https://stackoverflow.com/questions/30352136/unable-to-install-the-scrypt-gem-on-fedora-21-machine/30352775#30352775", "title": "Unable to install the scrypt gem on fedora 21 machine", "body": "<p>The errors accused by GCC are about the flags used, -msse and -msse2, they are for x86 architectures but your kernel is arm.</p>\n\n<p>Edit:\nIf you're using rvm with ruby 2.1.3 the cflags for scrypt gem are set in the Rakefile:\n.rvm/gems/ruby-2.1.3@yourgemset/gems/scrypt-1.2.1/ext/scrypt/Rakefile</p>\n\n<p>You should remove the flags -msse and -msee2, I'm not entirely sure of the consequences. Maybe you'll need to change the -arch flag too, it probably is set to x86_64.</p>\n"}], "owner": {"reputation": 2448, "user_id": 2621389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/uiNbQ.jpg?s=128&g=1", "display_name": "Bharat soni", "link": "https://stackoverflow.com/users/2621389/bharat-soni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1436911747, "creation_date": 1432130911, "question_id": 30352136, "link": "https://stackoverflow.com/questions/30352136/unable-to-install-the-scrypt-gem-on-fedora-21-machine", "title": "Unable to install the scrypt gem on fedora 21 machine", "body": "<p>I am stuck about the issues, Which coming on my fedora 21 server. Every thing is working like successfully installed the following..</p>\n\n<ol>\n<li>RVM</li>\n<li>Ruby 2.1.3</li>\n<li>Mysql</li>\n</ol>\n\n<p>When I am going to run command</p>\n\n<pre><code>bundle install\n</code></pre>\n\n<p>In the middle of the bundle, It abort with the message like please refer the attached image for the same.</p>\n\n<p><img src=\"https://i.stack.imgur.com/teFXc.png\" alt=\"enter image description here\"></p>\n\n<p>Please help me to get resolved the issue.</p>\n"}, {"tags": ["ruby", "middleman"], "answers": [{"tags": [], "owner": {"reputation": 5188, "user_id": 3560614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e54072123df6b051682d95e76d4bd748?s=128&d=identicon&r=PG", "display_name": "Kostas Rousis", "link": "https://stackoverflow.com/users/3560614/kostas-rousis"}, "is_accepted": false, "score": 0, "last_activity_date": 1432132811, "creation_date": 1432132811, "answer_id": 30352915, "question_id": 30352098, "link": "https://stackoverflow.com/questions/30352098/how-can-i-automatically-update-all-of-the-filenames-for-my-middlman-blog-posts-a/30352915#30352915", "title": "How can I automatically update all of the filenames for my middlman blog posts after rewriting the titles?", "body": "<p>I am not aware of any built-in option that does what you need. </p>\n\n<p>You would have to use your favorite language to build something quick and dirty that does that for you. In pseudocode:</p>\n\n<ul>\n<li>Iterate over all blog files and for each file:\n<ul>\n<li>Read the file's contents and extract the new and nice title from the front matter using a regular expression</li>\n<li>Rename the file according to your desired naming scheme. You could include the original date (if present), make titles URL friendly etc.</li>\n</ul></li>\n</ul>\n\n<p>Whether that would be more efficient than manually renaming all files it depends of course on the number of blog posts as well as you programming experience!</p>\n"}], "owner": {"reputation": 13585, "user_id": 693349, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/b030858982f80cfd886667ec36074da4?s=128&d=identicon&r=PG", "display_name": "Matt Gibson", "link": "https://stackoverflow.com/users/693349/matt-gibson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432132811, "creation_date": 1432130801, "question_id": 30352098, "link": "https://stackoverflow.com/questions/30352098/how-can-i-automatically-update-all-of-the-filenames-for-my-middlman-blog-posts-a", "title": "How can I automatically update all of the filenames for my middlman blog posts after rewriting the titles?", "body": "<p>I have a whole load of blog posts in middleman and have just worked on improving the titles, which are written in the frontmatter section at the top of the markdown file. However, the filenames are all still set to the old titles, and retyping them is a pain. Is there a quick way to either regenerate all the filenames from the current title, or get middleman to ignore the filename at build time and create a new filename for the generated HTML based on the current title?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ip"], "answers": [{"comments": [{"owner": {"reputation": 423, "user_id": 3385136, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100005355848045/picture?type=large", "display_name": "user3385136", "link": "https://stackoverflow.com/users/3385136/user3385136"}, "edited": false, "score": 0, "creation_date": 1432197170, "post_id": 30355478, "comment_id": 48827459, "body": "I&#39;m actually working on that approach now. The Cookie request header actually has the server id coded into it. I&#39;m now trying to figure out how to get this information. Can get the header responses with response[&#39;Cache-Control&#39;] but any and all attempts to get request header has failed. Any suggestions?"}], "tags": [], "owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "is_accepted": false, "score": 0, "last_activity_date": 1432139453, "creation_date": 1432139453, "answer_id": 30355478, "question_id": 30352038, "link": "https://stackoverflow.com/questions/30352038/get-server-ip-behind-load-balancer/30355478#30355478", "title": "Get server ip behind load balancer", "body": "<p>Unless the server sets an HTTP header with the information you can't.  That's the whole point of the load balancer, right?</p>\n"}], "owner": {"reputation": 423, "user_id": 3385136, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100005355848045/picture?type=large", "display_name": "user3385136", "link": "https://stackoverflow.com/users/3385136/user3385136"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1795, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1432139453, "creation_date": 1432130639, "question_id": 30352038, "link": "https://stackoverflow.com/questions/30352038/get-server-ip-behind-load-balancer", "title": "Get server ip behind load balancer", "body": "<p>I am trying to test which server serves a request however the setup has a load balancer between the server and client. How would i go about getting the IP address of the server rather than the load balancer. So far on the local machine i have tried although i know the middle two are for the client ip</p>\n\n<pre><code>  ip1 = @env['REMOTE_ADDR']           -- returns 127.0.0.1:3000\n  ip2 = request.ip                    -- returns 10.0.2.2\n  ip3 = request.host_with_port        -- returns 10.0.2.2\n  ip4 = Socket.gethostname            -- returns precise32 (vm name)\n</code></pre>\n\n<p>Don't want to test this live until i am sure. Apologies if there's any detail lacking. If any more information is required just say the word.</p>\n"}, {"tags": ["ruby", "xml"], "comments": [{"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1432130270, "post_id": 30351790, "comment_id": 48796092, "body": "And also this <a href=\"https://groups.google.com/forum/#!topic/nokogiri-talk/K9ndhI_BBUY\" rel=\"nofollow noreferrer\">link</a> will help you.. :)"}, {"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1432130862, "post_id": 30351790, "comment_id": 48796551, "body": "Take a look at the <a href=\"http://www.nokogiri.org/tutorials/parsing_an_html_xml_document.html#from_a_file\" rel=\"nofollow noreferrer\">Nokogiri</a> documentation on how to parse through a HTML/XML File"}], "owner": {"reputation": 1769, "user_id": 7404985, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/5af90c0ebf26f5ddfc448b2779ab8a57?s=128&d=identicon&r=PG", "display_name": "Sascha Manns", "link": "https://stackoverflow.com/users/7404985/sascha-manns"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "closed_date": 1432130189, "answer_count": 0, "score": 0, "last_activity_date": 1432146041, "creation_date": 1432129999, "last_edit_date": 1432146041, "question_id": 30351790, "link": "https://stackoverflow.com/questions/30351790/replacing-a-content-of-a-xml-tag", "closed_reason": "Duplicate", "title": "Replacing a content of a XML Tag", "body": "<p>Actually i'm working on a tool for simplify revisions.</p>\n\n<p>So i have a given XML file which have a version field like:</p>\n\n<pre><code>&lt;productnumber&gt;MyNumber&lt;/productnumber&gt;. \n</code></pre>\n\n<p>My tool asks for a revision number and adds the revision to a Revision_History.xml. Now it should use the given revision number to replace it in the other XML file.</p>\n\n<p>What is the best way to do this job? On that time where i using the tool, i don't know what exactly is \"MyNumber\".</p>\n\n<p>Is parsing the XML and changing with gsub a good way?</p>\n\n<p>I tried out now:</p>\n\n<pre><code>def self.update_productnumber(revnumber, edition, language)\n    if File.exist?(\"#{language}/Article_Info.xml\")\n      info = \"#{language}/Article_Info.xml\"\n    else\n      info = \"#{language}/Book_Info.xml\"\n    end\n    f = File.open(\"#{info}\", 'w')\n    xml = Nokogiri::XML(f)\n    query = Nokogiri::XML::Node.new 'productnumber', xml\n    query['productnumber'] = \"#{revnumber}\"\n    query.parent = xml.root\n    f.write(xml)\n    f.close\n  end\n</code></pre>\n\n<p>That one gives me back a empty XML file and that warnings:</p>\n\n<pre><code>/home/smanns/.rvm/gems/ruby-2.2.1/gems/nokogiri-1.6.6.2/lib/nokogiri/xml/document.rb:267:in `eof?': not opened for reading (IOError)\n    from /home/smanns/.rvm/gems/ruby-2.2.1/gems/nokogiri-1.6.6.2/lib/nokogiri/xml/document.rb:267:in `empty_doc?'\n    from /home/smanns/.rvm/gems/ruby-2.2.1/gems/nokogiri-1.6.6.2/lib/nokogiri/xml/document.rb:48:in `parse'\n    from /home/smanns/.rvm/gems/ruby-2.2.1/gems/nokogiri-1.6.6.2/lib/nokogiri/xml.rb:34:in `XML'\n</code></pre>\n\n<p>I now found a solution:</p>\n\n<pre><code>def self.replace_productnumber(revision, edition, language)\n    puts 'Replacing the productnumber'.color(:yellow)\n    if File.exist?(\"#{language}/Article_Info.xml\")\n      info = \"#{language}/Article_Info.xml\"\n    else\n      info = \"#{language}/Book_Info.xml\"\n    end\n    doc = Nokogiri::XML(IO.read(info))\n    doc.search('productnumber').each do |node|\n      node.content = \"#{revision}\"\n    end\n    doc.search('edition').each do |node|\n      node.content = \"#{edition}\"\n    end\n    IO.write(info, doc.to_xml)\n  end\n</code></pre>\n\n<p>Thanks for all helpers.</p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1432131462, "post_id": 30352305, "comment_id": 48797010, "body": "Cool, thanks for your response and your awesome work on RSpec!"}], "tags": [], "owner": {"reputation": 20292, "user_id": 29262, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/42d4590355a1404230fbc9aff4dd377b?s=128&d=identicon&r=PG", "display_name": "Myron Marston", "link": "https://stackoverflow.com/users/29262/myron-marston"}, "is_accepted": true, "score": 1, "last_activity_date": 1432131330, "creation_date": 1432131330, "answer_id": 30352305, "question_id": 30351780, "link": "https://stackoverflow.com/questions/30351780/can-rspec-be-configured-to-fail-any-example-which-does-not-contain-any-expectati/30352305#30352305", "title": "Can RSpec be configured to fail any example which does not contain any expectations?", "body": "<p>There isn't a built-in way, but it's a <a href=\"https://github.com/rspec/rspec-core/issues/759\" rel=\"nofollow\">feature I'd like to see added at some point</a>.</p>\n\n<p>In the meantime, it's not too hard to add yourself:</p>\n\n<p><a href=\"http://blog.sorah.jp/2012/12/17/rspec-warn-for-no-expectations\" rel=\"nofollow\">http://blog.sorah.jp/2012/12/17/rspec-warn-for-no-expectations</a></p>\n"}], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "accepted_answer_id": 30352305, "answer_count": 1, "score": 0, "last_activity_date": 1432131330, "creation_date": 1432129970, "question_id": 30351780, "link": "https://stackoverflow.com/questions/30351780/can-rspec-be-configured-to-fail-any-example-which-does-not-contain-any-expectati", "title": "Can RSpec be configured to fail any example which does not contain any expectations?", "body": "<p>I know that in RSpec you can easily mark an example as incomplete by omitting the block:</p>\n\n<pre><code>it 'is not a complete example'\n</code></pre>\n\n<p>But is it possible to get RSpec to fail any example which does not contain any expectations? </p>\n\n<p>IE. RSpec will happily pass this example:</p>\n\n<pre><code>it 'does not have any expectations but still passes' do\nend\n</code></pre>\n\n<p>I want to emulate the behavior of PHPUnit which fails any test not containing any assertions.</p>\n"}, {"tags": ["ruby", "cassandra", "cequel"], "answers": [{"tags": [], "owner": {"reputation": 2645, "user_id": 229341, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b9d9bb37949ba87a2bb8cf0f3cfbee22?s=128&d=identicon&r=PG", "display_name": "pr4n", "link": "https://stackoverflow.com/users/229341/pr4n"}, "is_accepted": false, "score": 1, "last_activity_date": 1469259104, "last_edit_date": 1469259104, "creation_date": 1469258674, "answer_id": 38539284, "question_id": 30351718, "link": "https://stackoverflow.com/questions/30351718/how-to-create-cassandra-tables-with-cequel-without-using-rails/38539284#38539284", "title": "How to create Cassandra tables with cequel (without using rails)", "body": "<p>The tables can be created by calling the method <code>synchronize_schema</code> on the class. So, in your case, you should execute <code>Project.synchronize_schema</code> before actually attempting to read/write into it.</p>\n\n<p>Given that you are building a broader project, you can consider using Rake tasks for it. You also need to migrate so that the tables are <strong>actually</strong> created in Cassandra. You can use <code>rake cequel:migrate</code> for that. There are more tasks which you can see via <code>rake --tasks</code>. </p>\n\n<p>If you are creating your custom project with custom places for models, you probably need to hack the rake migration task a little. This is an implementation that I did for my project <a href=\"https://github.com/octoai/gems/blob/master/octo-core/Rakefile#L75\" rel=\"nofollow\">https://github.com/octoai/gems/blob/master/octo-core/Rakefile#L75</a>. Also take a look at how models are defined <a href=\"https://github.com/octoai/gems/tree/master/octo-core/lib/octocore/models\" rel=\"nofollow\">https://github.com/octoai/gems/tree/master/octo-core/lib/octocore/models</a></p>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 101, "user_id": 3107598, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/2e09f3668124f4d27de6c70076255fb6?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel82", "link": "https://stackoverflow.com/users/3107598/daniel82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1469259104, "creation_date": 1432129821, "question_id": 30351718, "link": "https://stackoverflow.com/questions/30351718/how-to-create-cassandra-tables-with-cequel-without-using-rails", "title": "How to create Cassandra tables with cequel (without using rails)", "body": "<p>I am using Cequel as ORM for Cassandra without rails.<br>\nI have a problem when trying to create a simple list of projects.\nFirst I defined the model with three columns which should belong to a compound key.</p>\n\n<pre><code>class Project\n  include Cequel::Record\n\n  key :client, :text, { partition: true }\n  key :type, :text, { partition: true }\n  key :dep, :text, { partition: true }\n\nend\n</code></pre>\n\n<p>Later when I try to create the Project via  </p>\n\n<pre><code>project = Project.create!({client: \"test\", type: \"test\", dep: \"test\"})\n</code></pre>\n\n<p>I get an error that the table does not exist.\nThe tables are not created automatically with <code>Project.create!</code> but I have to create the table manually first:</p>\n\n<pre><code>  connection.schema.create_table(:projects) do \n    partition_key :client, :text\n    partition_key :type, :text\n    partition_key :dept, :text\n  end\n</code></pre>\n\n<p>But this syntax is different from the documented Record definition and I only found it by sifting through the source code. But this creates two problems.</p>\n\n<ul>\n<li>Code overhead</li>\n<li>I don't know the syntax for <code>has_many</code> and <code>belongs_to</code> so I cannot create the table correctly if the Record includes this</li>\n</ul>\n\n<p>Am I overlooking a method to create the table automatically from the <code>Project</code> class definition?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "answers": [{"tags": [], "owner": {"reputation": 9917, "user_id": 100342, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/af270ac26bf744c2ef2534a138bf7f67?s=128&d=identicon&r=PG", "display_name": "janfoeh", "link": "https://stackoverflow.com/users/100342/janfoeh"}, "is_accepted": false, "score": 2, "last_activity_date": 1432129536, "creation_date": 1432129536, "answer_id": 30351585, "question_id": 30351498, "link": "https://stackoverflow.com/questions/30351498/foreign-key-is-allowed-to-be-null/30351585#30351585", "title": "Foreign key is allowed to be NULL?", "body": "<p>Add a foreign key constraint in your migration through</p>\n\n<pre><code>add_foreign_key :table, :column\n</code></pre>\n\n<p>See the <a href=\"http://guides.rubyonrails.org/active_record_migrations.html#foreign-keys\" rel=\"nofollow\">ActiveRecord::Migration guide</a> for more information.</p>\n"}, {"comments": [{"owner": {"reputation": 47363, "user_id": 146780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48ea519fede5177604945a5c430e6e19?s=128&d=identicon&r=PG", "display_name": "jmasterx", "link": "https://stackoverflow.com/users/146780/jmasterx"}, "edited": false, "score": 0, "creation_date": 1432135453, "post_id": 30353718, "comment_id": 48800264, "body": "The problem is I use SQLite so I cannot use add_foreign_key"}, {"owner": {"reputation": 36, "user_id": 4668764, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-g2TvRCBNaAk/AAAAAAAAAAI/AAAAAAAAAC4/rAmSqykocJA/photo.jpg?sz=128", "display_name": "cristiancvanega", "link": "https://stackoverflow.com/users/4668764/cristiancvanega"}, "reply_to_user": {"reputation": 47363, "user_id": 146780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48ea519fede5177604945a5c430e6e19?s=128&d=identicon&r=PG", "display_name": "jmasterx", "link": "https://stackoverflow.com/users/146780/jmasterx"}, "edited": false, "score": 0, "creation_date": 1432136290, "post_id": 30353718, "comment_id": 48800841, "body": "I happen to be validated before sending medical_intervention_id."}], "tags": [], "owner": {"reputation": 36, "user_id": 4668764, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-g2TvRCBNaAk/AAAAAAAAAAI/AAAAAAAAAC4/rAmSqykocJA/photo.jpg?sz=128", "display_name": "cristiancvanega", "link": "https://stackoverflow.com/users/4668764/cristiancvanega"}, "is_accepted": true, "score": 2, "last_activity_date": 1432135291, "last_edit_date": 1432135291, "creation_date": 1432134732, "answer_id": 30353718, "question_id": 30351498, "link": "https://stackoverflow.com/questions/30351498/foreign-key-is-allowed-to-be-null/30353718#30353718", "title": "Foreign key is allowed to be NULL?", "body": "<p>For add foreign key, you add first the name of table (not the model name), this as first parameter, and as second parameter the name of foreign table(not the model name).\nThe table as first parameter should have a column with a name specific as follow: name_foreign_model_id.\nExample:\nForeign model</p>\n\n<pre><code>class CreateGrades &lt; ActiveRecord::Migration\n  def change\n    create_table :grades do |t|\n      t.string :name, limit: 20\n      t.integer :level, limit: 2\n      t.string :next, limit: 20\n\n      t.timestamps null: false\n    end\n  end\nend\n</code></pre>\n\n<p>And,</p>\n\n<pre><code>class CreateGoals &lt; ActiveRecord::Migration\n  def change\n    create_table :goals do |t|\n      t.integer :dimension, limit: 2, null: false\n    **t.integer :grade_id, null: false**\n      t.string :description, limit: 1024, null: false\n\n      t.timestamps null: false\n    end\n    **add_foreign_key :goals, :grades**\n  end\nend\n</code></pre>\n\n<p>Also you can add foreign key in a separate migration.</p>\n\n<p>With this, not should accept null foreign key.</p>\n"}], "owner": {"reputation": 47363, "user_id": 146780, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/48ea519fede5177604945a5c430e6e19?s=128&d=identicon&r=PG", "display_name": "jmasterx", "link": "https://stackoverflow.com/users/146780/jmasterx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4036, "favorite_count": 0, "accepted_answer_id": 30353718, "answer_count": 2, "score": 5, "last_activity_date": 1432135291, "creation_date": 1432129359, "question_id": 30351498, "link": "https://stackoverflow.com/questions/30351498/foreign-key-is-allowed-to-be-null", "title": "Foreign key is allowed to be NULL?", "body": "<p>I have a table which MUST have a case_id that is valid and exists, and the record should not be created unless it exists. I should not be able to pass a NULL case_id.</p>\n\n<p>It looks like:</p>\n\n<pre><code># == Schema Information\n#\n# Table name: medical_intervention_expert_answers\n#\n#  id                      :integer          not null, primary key\n#  case_id                 :integer\n#  problem_id              :integer\n#  medical_intervention_id :integer\n#  created_at              :datetime\n#  updated_at              :datetime\n#  pti                     :boolean\n#\n\nclass MedicalInterventionExpertAnswer &lt; ActiveRecord::Base\n    belongs_to :case\n    belongs_to :problem\n    belongs_to :medical_intervention\n\n    def self.create_from_data(case_id, problem_id, medical_intervention_id, is_pti)\n        answer = self.create(case_id: case_id, problem_id: problem_id, medical_intervention_id: medical_intervention_id, \n            pti: is_pti)\n\n        return answer\n    end\nend\n</code></pre>\n\n<p>If I pass in a case_id that is null or pass in a case_id that does not exist, the 'answer' variable should be nil and the database should be unmodified.</p>\n\n<p>What must I do to have this sort of relation?</p>\n"}, {"tags": ["ruby", "git", "github", "hook", "assembla"], "answers": [{"tags": [], "owner": {"reputation": 1598, "user_id": 1104534, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/ad2bdd8c4d37364f52e6ab7aa92ef570?s=128&d=identicon&r=PG", "display_name": "Calin", "link": "https://stackoverflow.com/users/1104534/calin"}, "is_accepted": false, "score": 0, "last_activity_date": 1434992218, "last_edit_date": 1434992218, "creation_date": 1434984641, "answer_id": 30983075, "question_id": 30351464, "link": "https://stackoverflow.com/questions/30351464/need-assistance-with-creating-a-git-client-side-commit-msg-hook/30983075#30983075", "title": "Need assistance with creating a Git client-side &#39;commit-msg&#39; hook", "body": "<p>You can try this <a href=\"https://www.npmjs.com/package/commit-msg\" rel=\"nofollow\">commit-msg</a> validator. It's not ruby but you can easily configure it for your needs and you can even write <a href=\"https://github.com/clns/node-commit-msg#custom-references\" rel=\"nofollow\">your own Assembla reference</a> to validate ticket numbers against their API. See the repo README for more details.</p>\n\n<p>Here is a starting point for your custom reference, and its associated test file. I haven't tested it thoroughly but it should be pretty easy to change as you wish, since it's basically JavaScript.</p>\n\n\n\n<p><strong>lib/references/assembla.js</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>'use strict';\n\nvar exec = require('child_process').exec;\nvar https = require('https');\nvar util = require('util');\n\n// HOOK PARAMS\nvar space = 'space-wiki-name';\nvar apiKey = 'user-api-key';\nvar apiSecret = 'user-api-secret';\n\nfunction Ticket(ticket, match) {\n    this.allowInSubject = true;\n    this.match = match;\n\n    this._ticket = ticket;\n}\n\nTicket.prototype.toString = function() {\n    return '#' + this._ticket;\n}\n\nTicket.prototype.isValid = function(cb) {\n\n    var options = {\n        hostname: 'api.assembla.com',\n        path: util.format('/v1/spaces/%s/tickets/%s.json', space, this._ticket),\n        headers: {\n            'Content-Type'  : 'application/json',\n            'X-Api-Key'     : apiKey,\n            'X-Api-Secret'  : apiSecret\n        }\n    };\n    https.get(options, function(res) {\n        if (res.statusCode === 404) {\n            return cb(null, false); // invalid\n        }\n\n        var body = '';\n        res.on('data', function(chunk) {\n            body += chunk.toString();\n        });\n\n        res.on('end', function () {\n            var response = body ? JSON.parse(body) : false;\n\n            if (res.statusCode &lt; 300 &amp;&amp; response) {\n                return cb(null, true); // valid?\n            }\n\n            console.error('warning: Reference check failed with status code %d',\n                res.statusCode,\n                response &amp;&amp; response.message ? ('; reason: ' + response.message) : '');\n\n            cb(null, false); // request errored out?\n        });\n    });\n}\n\n// Fake class that requires the existence of a ticket # in every commit\nfunction TicketRequired() {\n    Ticket.call(this);\n    this.error = new Error('Commit should include an Assembla ticket #');\n}\n\nutil.inherits(TicketRequired, Ticket);\n\nTicketRequired.prototype.isValid = function(cb) {\n    cb(null, false);\n}\n\nTicket.parse = function(text) {\n    var instances = [];\n    var cb = function(match, ticket) {\n        instances.push( new Ticket(ticket, match) );\n    };\n    text.replace(/#(-?\\d+)\\b/gi, cb);\n    if (!instances.length) {\n        // maybe should skip merge commits here\n        instances.push(new TicketRequired());\n    }\n    return instances;\n}\n\nmodule.exports = Ticket;\n</code></pre>\n\n<p><strong>test/references/assembla.js</strong></p>\n\n<pre class=\"lang-js prettyprint-override\"><code>'use strict';\n\nvar assert = require('assert');\nvar Ticket = require('../../lib/references/assembla');\n\ndescribe('references/assembla', function() {\n\n    it('should validate correctly using the API', function(done) {\n        this.timeout(5000); // allow enough time\n\n        var tickets = Ticket.parse('Change functionality\\n\\nFixes #13 and #9999 (invalid)');\n\n        var ct = 0;\n        var checkDone = function() {\n            if (++ct == tickets.length) done();\n        };\n        var valid = [true, false];\n\n        valid.forEach(function(val, idx) {\n            tickets[idx].isValid(function(err, valid) {\n                assert.equal(valid, val, tickets[idx].toString());\n                checkDone();\n            });\n        });\n    });\n\n    it('should require a ticket #', function() {\n        var tickets = Ticket.parse('Commit message without any ticket ref #');\n\n        assert.equal(tickets.length, 1);\n        assert.equal(tickets[0].error.message, 'Commit should include an Assembla ticket #');\n    });\n});\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 4919905, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-VdRxH_zk1B0/AAAAAAAAAAI/AAAAAAAAADY/lTkExFU0YQI/photo.jpg?sz=128", "display_name": "Andrew Dick", "link": "https://stackoverflow.com/users/4919905/andrew-dick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 168, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1434992218, "creation_date": 1432129285, "last_edit_date": 1432130845, "question_id": 30351464, "link": "https://stackoverflow.com/questions/30351464/need-assistance-with-creating-a-git-client-side-commit-msg-hook", "title": "Need assistance with creating a Git client-side &#39;commit-msg&#39; hook", "body": "<p>I have installed the 'ticket_status.rb' server-side hook on Assembla. Although this is exactly what I'm looking for (in theory), it does not flag until the developer attempts to push to the server. If they have made several commits before pushing, it becomes incredibly frustrating to go back through their history and edit any invalid commit messages.</p>\n\n<p>I am looking to create a client-side hook that will reject a developer's commit if an open ticket in Assembla is not referenced in the commit message. I assume that since it is client-side, it will not be able to check if the ticket is open in the Assembla project space. However, if the hook could at least check that '#n' has been included in the commit message (where 0 &lt; n &lt; 10,000), it should catch the majority of invalid commit messages.</p>\n\n<p>GitHub has provided sample code for a client-side 'commit-msg' hook. I would like assistance in modifying the code below to instead search for a ticket number (#n) in the commit message (or an open ticket in the Assembla project space, if possible):</p>\n\n<pre><code>#!/bin/sh\n#\n# An example hook script to check the commit log message.\n# Called by \"git commit\" with one argument, the name of the file\n# that has the commit message.  The hook should exit with non-zero\n# status after issuing an appropriate message if it wants to stop the\n# commit.  The hook is allowed to edit the commit message file.\n#\n# To enable this hook, rename this file to \"commit-msg\".\n\n# Uncomment the below to add a Signed-off-by line to the message.\n# Doing this in a hook is a bad idea in general, but the prepare-commit-msg\n# hook is more suited to it.\n#\n# SOB=$(git var GIT_AUTHOR_IDENT | sed -n 's/^\\(.*&gt;\\).*$/Signed-off-by: \\1/p')\n# grep -qs \"^$SOB\" \"$1\" || echo \"$SOB\" &gt;&gt; \"$1\"\n\n# This example catches duplicate Signed-off-by lines.\n\ntest \"\" = \"$(grep '^Signed-off-by: ' \"$1\" |\n     sort | uniq -c | sed -e '/^[   ]*1[    ]/d')\" || {\n    echo &gt;&amp;2 Duplicate Signed-off-by lines.\n    exit 1\n} \n</code></pre>\n\n<p>I have also provided the source code for the server-side hook that rejects the commit if it does not contain a valid open ticket number in the commit message (ticket_status.rb):</p>\n\n<pre><code>#!/usr/bin/env ruby\n# -*- encoding : utf-8 -*-\n\n#\n# Reject a push to a branch if it has commits that do refer a ticket in open state\n#\n\n# ref = ARGV[0]\nsha_start = ARGV[1]\nsha_end = ARGV[2]\n\n# HOOK PARAMS\nspace = 'space-wiki-name'\napi_key = 'user-api-key'\napi_secret = 'user-api-secret'\n# HOOK START, end of params block\n\nrequire \"net/https\"\nrequire \"uri\"\nbegin\n  require \"json\"\nrescue LoadError\n  require 'rubygems'\n  require 'json'\nend\n\n# Check referred tickets that are in open stage\nclass TicketValidator\n  API_URL = \"https://api.assembla.com\"\n\n  attr_accessor :space, :api_key, :api_secret\n\n  def initialize()\n    @ticket_statuses = []\n    @tickets = {}\n  end\n\n  def init\n    init_http\n    load_statuses\n  end\n\n  def check(sha, comment)\n    comment.to_s.scan(/#\\d+/).each do |t|\n      ticket = t.tr('#', '')\n      # Do not check it twice\n      next if @tickets[ticket]\n      ticket_js = api_call \"/v1/spaces/#{space}/tickets/#{ticket}.json\"\n\n      error = nil\n\n      if ticket_js['error'].nil?\n        unless @ticket_statuses.include? ticket_js['status'].downcase\n          error = \"Ticket #{t} is not open!\"\n        end\n      else\n        error = ticket_js['error']\n      end\n\n      if error\n        @tickets[ticket] = {:error =&gt; error, :sha =&gt; sha}\n      else\n        @tickets[ticket] = :ok\n      end\n    end\n  end\n\n  def load_statuses\n    statuses = api_call \"/v1/spaces/#{space}/tickets/statuses.json\"\n    statuses.each do |status|\n      if status[\"state\"] == 1 # open\n        @ticket_statuses &lt;&lt; status[\"name\"].downcase\n      end\n    end\n  end\n\n  def api_call(uri)\n    request = Net::HTTP::Get.new(uri,\n                                 {'Content-Type' =&gt; 'application/json',\n                                  'X-Api-Key' =&gt; api_key,\n                                  'X-Api-Secret' =&gt; api_secret})\n    result = @http.request(request)\n    JSON.parse(result.body)\n  end\n\n  def init_http\n    uri = URI.parse(API_URL)\n    @http = Net::HTTP.new(uri.host, uri.port)\n    @http.use_ssl = true\n    @http.verify_mode = OpenSSL::SSL::VERIFY_NONE\n  end\n\n  def show_decision!\n    @tickets.reject! {|_, value| value == :ok }\n\n    unless @tickets.empty?\n      puts \"You have references to tickets in closed state\"\n\n      @tickets.each do |ticket, details|\n        puts \"\\t#{details[:sha]} - ##{ticket} #{details[:error]}\"\n      end\n\n      puts \"Valid statuses: #{@ticket_statuses.join(', ')}\"\n      exit 1\n    end\n  end\nend\n\nclass Parser\n  def initialize(text, validator)\n    @text = text\n    @validator = validator\n  end\n\n  def parse\n    commit = nil\n    comment = nil\n\n    @validator.init\n\n    @text.to_s.split(\"\\n\").each do |line|\n      if line =~ /^commit: ([a-z0-9]+)$/i\n        new_commit = $1\n\n        if comment\n          @validator.check(commit, comment)\n          comment = nil\n        end\n\n        commit = new_commit\n      else\n        comment = comment.to_s + line + \"\\n\"\n      end\n    end\n\n    # Check last commit\n    @validator.check(commit, comment) if comment\n  end\nend\n\ntext = `git log --pretty='format:commit: %h%n%B' #{sha_start}..#{sha_end}`\n\n@validator = TicketValidator.new\n@validator.space = space\n@validator.api_key = api_key\n@validator.api_secret = api_secret\n\nParser.new(text, @validator).parse\n@validator.show_decision!\n</code></pre>\n\n<p>Any help is much appreciated. Thanks</p>\n"}, {"tags": ["ruby", "rest", "ruby-on-rails-4", "joomla3.0", "joomla-extensions"], "answers": [{"tags": [], "owner": {"reputation": 185, "user_id": 5361267, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HEORg.jpg?s=128&g=1", "display_name": "Steve Tsiopanos", "link": "https://stackoverflow.com/users/5361267/steve-tsiopanos"}, "is_accepted": false, "score": 0, "last_activity_date": 1446937301, "last_edit_date": 1495539873, "creation_date": 1446937301, "answer_id": 33588827, "question_id": 30351243, "link": "https://stackoverflow.com/questions/30351243/ruby-integration-for-joomla-using-com-api/33588827#33588827", "title": "Ruby integration for Joomla using com_api", "body": "<p>I have developed a commercial Joomla package which combines an admin component with an extensible plugin architecture to expand service capabilities. You may refer to may other responses for more information:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/26340885/rest-api-for-joomla-3-0/32706378#32706378\">REST API for Joomla 3.0</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/32755023/how-to-install-and-use-joomla-rest-api-step-by-step/32851826#32851826\">How to Install and use joomla rest api step by step</a></p>\n\n<p>A key feature of this extension is that it is built upon the Slim PHP micro-framework in order to take advantage of a robust, standards-compliant service route architecture. This allows Joomla to take care of login authentication and group permissions, while Slim exposes routes for GET, POST, PUT, DELETE, etc. Another advantage is that Joomla allows for selective activation and permissioning for different web service plugins.</p>\n\n<p>Installation, configuration and API docs can be found here:</p>\n\n<p><a href=\"http://learn.getcapi.org\" rel=\"nofollow noreferrer\">http://learn.getcapi.org</a></p>\n\n<p>For a general product overview, please visit <a href=\"http://getcapi.org\" rel=\"nofollow noreferrer\">http://getcapi.org</a>.</p>\n"}], "owner": {"reputation": 600, "user_id": 3962760, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3036b6597a3ac345fd62dd73cee3fb1c?s=128&d=identicon&r=PG&f=1", "display_name": "Nishant Upadhyay", "link": "https://stackoverflow.com/users/3962760/nishant-upadhyay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 2, "answer_count": 1, "score": 1, "last_activity_date": 1446937301, "creation_date": 1432128786, "question_id": 30351243, "link": "https://stackoverflow.com/questions/30351243/ruby-integration-for-joomla-using-com-api", "title": "Ruby integration for Joomla using com_api", "body": "<p>I am creating an application which uses REST API to access web-services of WordPress and Joomla. </p>\n\n<p>I got success to do this with <code>WordPress</code> but I am unable to do this with <code>Joomla-3</code>. </p>\n\n<p>I want to make a REST API call using <code>Ruby Net::Http</code> to access <code>Joomla</code> powered site. I want to access content of <code>Joomla-3</code> enabled site using REST API. I found <a href=\"https://github.com/techjoomla/com_api\" rel=\"nofollow\">com_api</a> but I don't know how to use it. </p>\n\n<p>Please can anyone help me how to connect <code>Ruby on Rails</code> and Joomla 3 with each other.</p>\n"}, {"tags": ["ruby", "sonarqube", "aix", "i18n-gem"], "comments": [{"owner": {"reputation": 4949, "user_id": 229031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0908a480bd47161fd82f38c4ba55bb69?s=128&d=identicon&r=PG", "display_name": "Simon Brandhof - SonarSource", "link": "https://stackoverflow.com/users/229031/simon-brandhof-sonarsource"}, "edited": false, "score": 0, "creation_date": 1432153225, "post_id": 30350949, "comment_id": 48810893, "body": "Could you provide the full logs please ? You can use gist.github.com."}, {"owner": {"reputation": 68, "user_id": 490998, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6305d396ed8c07aa16d93231fe8303d1?s=128&d=identicon&r=PG", "display_name": "AlfonsSocken", "link": "https://stackoverflow.com/users/490998/alfonssocken"}, "reply_to_user": {"reputation": 4949, "user_id": 229031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0908a480bd47161fd82f38c4ba55bb69?s=128&d=identicon&r=PG", "display_name": "Simon Brandhof - SonarSource", "link": "https://stackoverflow.com/users/229031/simon-brandhof-sonarsource"}, "edited": false, "score": 0, "creation_date": 1432191988, "post_id": 30350949, "comment_id": 48824385, "body": "<a href=\"https://gist.github.com/e067aeda55e7e929ed32.git\" rel=\"nofollow noreferrer\">gist.github.com/e067aeda55e7e929ed32.git</a>"}, {"owner": {"reputation": 68, "user_id": 490998, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6305d396ed8c07aa16d93231fe8303d1?s=128&d=identicon&r=PG", "display_name": "AlfonsSocken", "link": "https://stackoverflow.com/users/490998/alfonssocken"}, "reply_to_user": {"reputation": 4949, "user_id": 229031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0908a480bd47161fd82f38c4ba55bb69?s=128&d=identicon&r=PG", "display_name": "Simon Brandhof - SonarSource", "link": "https://stackoverflow.com/users/229031/simon-brandhof-sonarsource"}, "edited": false, "score": 0, "creation_date": 1432194032, "post_id": 30350949, "comment_id": 48825599, "body": "<a href=\"https://gist.github.com/alfonssocken/e067aeda55e7e929ed32\" rel=\"nofollow noreferrer\">gist.github.com/alfonssocken/e067aeda55e7e929ed32</a>"}, {"owner": {"reputation": 4949, "user_id": 229031, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0908a480bd47161fd82f38c4ba55bb69?s=128&d=identicon&r=PG", "display_name": "Simon Brandhof - SonarSource", "link": "https://stackoverflow.com/users/229031/simon-brandhof-sonarsource"}, "edited": false, "score": 0, "creation_date": 1432279576, "post_id": 30350949, "comment_id": 48869826, "body": "I can&#39;t find the reason why JRuby is not correctly initialized. Of course it&#39;s impossible for me to reproduce the issue on AIX with IBM JRE. I can only suggest to wait until drop of JRuby (no planned release yet)"}], "answers": [{"comments": [{"owner": {"reputation": 68, "user_id": 490998, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6305d396ed8c07aa16d93231fe8303d1?s=128&d=identicon&r=PG", "display_name": "AlfonsSocken", "link": "https://stackoverflow.com/users/490998/alfonssocken"}, "edited": false, "score": 0, "creation_date": 1433230504, "post_id": 30368789, "comment_id": 49249039, "body": "Thank you. Although it is not officially supported, I thought it would be somehow possible to run Sonarqube on AIX. As stated on <a href=\"http://docs.sonarqube.org/display/SONAR/Installing+SonarQube+on+AIX,+HPUX+or+Solaris\" rel=\"nofollow noreferrer\">SonarQube 5.0 documentation</a> one possible way could be JSW, but this is not an option to me. In this <a href=\"http://stackoverflow.com/questions/28492366/running-sonarqube-on-solaris-using-jsvc\">answer on Stackoverflow</a> they say it is possible to run Sonarqube without JSW. I added <i>./lib:./lib/*.jar:./lib/jsw/*.jar</i> to my classpath, but got the same error again."}], "tags": [], "owner": {"reputation": 409, "user_id": 4919399, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5veKFTb7lkM/AAAAAAAAAAI/AAAAAAAAAEQ/3I5Q15E5T1I/photo.jpg?sz=128", "display_name": "Alexandre - SonarSource", "link": "https://stackoverflow.com/users/4919399/alexandre-sonarsource"}, "is_accepted": false, "score": 0, "last_activity_date": 1432198133, "creation_date": 1432198133, "answer_id": 30368789, "question_id": 30350949, "link": "https://stackoverflow.com/questions/30350949/running-sonarqube-on-aix/30368789#30368789", "title": "Running Sonarqube on AIX", "body": "<p>First, you must be sure to use a JDK that is compatible with SonarQube. Check this page for more details : <a href=\"http://docs.sonarqube.org/display/SONAR/Requirements\" rel=\"nofollow\">http://docs.sonarqube.org/display/SONAR/Requirements</a>\nYou will see IBM JDK is not supported.\nAlso by running \"java -jar ./sonarqube-5.1/lib/sonar-application-5.1.jar\" you are not taken into account all the jar that must be in your classpath to run SQ.\nCheck conf/wrapper.conf to know which directories must be in your classpath.</p>\n"}], "owner": {"reputation": 68, "user_id": 490998, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6305d396ed8c07aa16d93231fe8303d1?s=128&d=identicon&r=PG", "display_name": "AlfonsSocken", "link": "https://stackoverflow.com/users/490998/alfonssocken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 397, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432198133, "creation_date": 1432128060, "last_edit_date": 1432128442, "question_id": 30350949, "link": "https://stackoverflow.com/questions/30350949/running-sonarqube-on-aix", "title": "Running Sonarqube on AIX", "body": "<p>Here is my setup</p>\n\n<ul>\n<li>AIX Version 7.1</li>\n<li>SonarQube 5.1</li>\n<li>Java71_64</li>\n</ul>\n\n<p>I try to start up sonarqube with</p>\n\n<pre><code>/usr/java71_64/bin/java -jar ./sonarqube-5.1/lib/sonar-application-5.1.jar\n</code></pre>\n\n<p>all seems good and I get following output:</p>\n\n<pre><code>/usr/java71_64/bin/java -jar ./sonarqube-5.1/lib/sonar-application-5.1.jar\n2015.05.20 14:55:10 INFO  app[o.s.p.m.JavaProcessLauncher] Launch process[search]: /usr/java71_64/jre/bin/java -Djava.awt.headless=true -Xmx1G -Xms256m -Xss256k -Djava.net.preferIPv4Stack=true -XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:CMSInitiatingOccupancyFraction=75 -XX:+UseCMSInitiatingOccupancyOnly -XX:+HeapDumpOnOutOfMemoryError -Djava.io.tmpdir=/server/sonarqube-5.1/temp -cp ./lib/common/*:./lib/search/* org.sonar.search.SearchServer /tmp/sq-process8605905139828216720properties\n2015.05.20 14:55:22 INFO  app[o.s.p.m.Monitor] Process[search] is up\n2015.05.20 14:55:22 INFO  app[o.s.p.m.JavaProcessLauncher] Launch process[web]: /usr/java71_64/jre/bin/java -Djava.awt.headless=true -Dfile.encoding=UTF-8 -Djruby.management.enabled=false -Djruby.compile.invokedynamic=false -Xmx768m -XX:MaxPermSize=160m -XX:+HeapDumpOnOutOfMemoryError -Djava.net.preferIPv4Stack=true -Djava.io.tmpdir=/server/sonarqube-5.1/temp -cp ./lib/common/*:./lib/server/*:/server/sonarqube-5.1/lib/jdbc/h2/h2-1.3.176.jar org.sonar.server.app.WebServer /tmp/sq-process8098035030120374349properties\n2015.05.20 14:55:52 INFO  app[o.s.p.m.Monitor] Process[web] is up\n</code></pre>\n\n<p>But when i try to open [ip]:9000 in my browser i get:</p>\n\n<pre><code>org.jruby.rack.RackInitializationException: uninitialized constant I18n\n    from org/jruby/RubyModule.java:2689:in const_missing'\n    from /server/sonarqube-5.1/web/WEB-INF/gems/gems/activerecord-2.3.15/lib/active_record.rb:83:in (root)'\n    from org/jruby/RubyKernel.java:1075:in require'\n    from jar:file:/server/sonarqube-5.1/lib/server/jruby-complete-1.7.9.jar!/META-INF/jruby.home/lib/ruby/shared/rubygems/core_ext/kernel_require.rb:55:in require'\n    from jar:file:/server/sonarqube-5.1/lib/server/jruby-complete-1.7.9.jar!/META-INF/jruby.home/lib/ruby/shared/rubygems/core_ext/kernel_require.rb:53:in require'\n    from /server/sonarqube-5.1/web/WEB-INF/gems/gems/rails-2.3.15/lib/initializer.rb:1:in (root)'\n    from org/jruby/RubyArray.java:1613:in each'\n    from /server/sonarqube-5.1/web/WEB-INF/gems/gems/rails-2.3.15/lib/initializer.rb:268:in require_frameworks'\n    from /server/sonarqube-5.1/web/WEB-INF/gems/gems/rails-2.3.15/lib/initializer.rb:268:in require_frameworks'\n    from file:/server/sonarqube-5.1/lib/server/jruby-rack-1.1.13.2.jar!/jruby/rack/rails/environment2.rb:51:in require_frameworks_with_servlet_env'\n    from org/jruby/RubyKernel.java:2223:in send'\n    from /server/sonarqube-5.1/web/WEB-INF/gems/gems/rails-2.3.15/lib/initializer.rb:134:in process'\n    from /server/sonarqube-5.1/web/WEB-INF/gems/gems/rails-2.3.15/lib/initializer.rb:113:in run'\n    from org/jruby/RubyKernel.java:1094:in load'\n    from /server/sonarqube-5.1/web/WEB-INF/config/environment.rb:55:in (root)'\n    from file:/server/sonarqube-5.1/lib/server/jruby-rack-1.1.13.2.jar!/jruby/rack/rails/environment2.rb:1:in (root)'\n    from file:/server/sonarqube-5.1/lib/server/jruby-rack-1.1.13.2.jar!/jruby/rack/rails/environment2.rb:25:in load_environment'\n    at org.jruby.rack.RackInitializationException.wrap(RackInitializationException.java:29)\n    at org.jruby.rack.RackApplicationFactoryDecorator.init(RackApplicationFactoryDecorator.java:98)\n    at org.jruby.rack.RackServletContextListener.contextInitialized(RackServletContextListener.java:50)\n    at org.apache.catalina.core.StandardContext.listenerStart(StandardContext.java:4720)\n    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5154)\n    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1409)\n    at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1399)\n    at java.util.concurrent.FutureTask.run(FutureTask.java:274)\n    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1157)\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:627)\n    at java.lang.Thread.run(Thread.java:809)\nCaused by: org.jruby.exceptions.RaiseException: (NameError) uninitialized constant I18n\n    at org.jruby.RubyModule.const_missing(org/jruby/RubyModule.java:2689)\n    at RUBY.(root)(/server/sonarqube-5.1/web/WEB-INF/gems/gems/activerecord-2.3.15/lib/active_record.rb:83)\n    at org.jruby.RubyKernel.require(org/jruby/RubyKernel.java:1075)\n    at Kernel.require(jar:file:/server/sonarqube-5.1/lib/server/jruby-complete-1.7.9.jar!/META-INF/jruby.home/lib/ruby/shared/rubygems/core_ext/kernel_require.rb:55)\n    at Kernel.require(jar:file:/server/sonarqube-5.1/lib/server/jruby-complete-1.7.9.jar!/META-INF/jruby.home/lib/ruby/shared/rubygems/core_ext/kernel_require.rb:53)\n    at RUBY.(root)(/server/sonarqube-5.1/web/WEB-INF/gems/gems/rails-2.3.15/lib/initializer.rb:1)\n    at org.jruby.RubyArray.each(org/jruby/RubyArray.java:1613)\n    at RUBY.require_frameworks(/server/sonarqube-5.1/web/WEB-INF/gems/gems/rails-2.3.15/lib/initializer.rb:268)\n    at RUBY.require_frameworks(/server/sonarqube-5.1/web/WEB-INF/gems/gems/rails-2.3.15/lib/initializer.rb:268)\n    at RUBY.require_frameworks_with_servlet_env(file:/server/sonarqube-5.1/lib/server/jruby-rack-1.1.13.2.jar!/jruby/rack/rails/environment2.rb:51)\n    at org.jruby.RubyKernel.send(org/jruby/RubyKernel.java:2223)\n    at RUBY.process(/server/sonarqube-5.1/web/WEB-INF/gems/gems/rails-2.3.15/lib/initializer.rb:134)\n    at RUBY.run(/server/sonarqube-5.1/web/WEB-INF/gems/gems/rails-2.3.15/lib/initializer.rb:113)\n    at org.jruby.RubyKernel.load(org/jruby/RubyKernel.java:1094)\n    at RUBY.(root)(/server/sonarqube-5.1/web/WEB-INF/config/environment.rb:55)\n    at RUBY.(root)(file:/server/sonarqube-5.1/lib/server/jruby-rack-1.1.13.2.jar!/jruby/rack/rails/environment2.rb:1)\n    at RUBY.load_environment(file:/server/sonarqube-5.1/lib/server/jruby-rack-1.1.13.2.jar!/jruby/rack/rails/environment2.rb:25)\n</code></pre>\n\n<p>Until now I couldn\u00b4t figure out a solution, so any help is appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "amazon-s3", "railstutorial.org"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1432136571, "post_id": 30350785, "comment_id": 48801053, "body": "How does this relate to the error in your title? I think you&#39;ll need to write either a bucket policy or an IAM policy granting access to your user - see <a href=\"http://docs.aws.amazon.com/AmazonS3/latest/dev/access-control-overview.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/AmazonS3/latest/dev/&hellip;</a>"}, {"owner": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1432136859, "post_id": 30350785, "comment_id": 48801272, "body": "Thanks, I changed the title. The thing is I&#39;m following the steps of railstutorial.org. I think it should be pretty straightforward. Therefore, I&#39;m a bit hesitant whether any customization should be necessary. Wouldn&#39;t normally a user created in IAM be available to grant permissions to for a bucket? So, might that not be what&#39;s going wrong?"}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 1, "creation_date": 1432137050, "post_id": 30350785, "comment_id": 48801398, "body": "The tutorial doesn&#39;t tell you how to grant access at all - it just says &quot;read the docs&quot;."}, {"owner": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1432142590, "post_id": 30350785, "comment_id": 48804809, "body": "I guess that&#39;s true. I only see two standard policies for S3: AmazonS3FullAccess and AmazonS3ReadOnlyAccess. Having added the (key) credentials of the user in the Rails application, I gave the user AmazonS3FullAccess and than it indeed worked. With only AmazonS3ReadOnlyAccess the user can&#39;t upload it&#39;s avatar image (only read it). The user basically only needs 2 rights: upload its own avatar image and read the avatar image. Do you think I should (somehow) write my own custom policy or is it safe to use AmazonS3FullAccess?"}], "answers": [{"tags": [], "owner": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "is_accepted": true, "score": 1, "last_activity_date": 1432200133, "last_edit_date": 1495541349, "creation_date": 1432200133, "answer_id": 30369613, "question_id": 30350785, "link": "https://stackoverflow.com/questions/30350785/trying-to-set-up-amazons-s3-bucket-403-forbidden-error-setting-permissions/30369613#30369613", "title": "Trying to set up Amazon&#39;s S3 bucket: 403 Forbidden error &amp; setting permissions", "body": "<p>The root of the problem indeed turned out to be the permissions. It was necessary to write a custom policy and set the CORS configuration on the bucket. For any future users that want to implement this chapter of the rails tutorial, see <a href=\"https://stackoverflow.com/questions/30358220/writing-an-iam-policy-and-cors-configuration-for-amazon-s3\">Writing an IAM policy and CORS configuration for Amazon S3</a> for the necessary code.</p>\n"}, {"tags": [], "owner": {"reputation": 71, "user_id": 1753441, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh6.googleusercontent.com/-rsLyCE2fMM4/AAAAAAAAAAI/AAAAAAAAACI/sNJ9SIOvtXw/photo.jpg?sz=128", "display_name": "Ben", "link": "https://stackoverflow.com/users/1753441/ben"}, "is_accepted": false, "score": 0, "last_activity_date": 1433792467, "creation_date": 1433792467, "answer_id": 30717693, "question_id": 30350785, "link": "https://stackoverflow.com/questions/30350785/trying-to-set-up-amazons-s3-bucket-403-forbidden-error-setting-permissions/30717693#30717693", "title": "Trying to set up Amazon&#39;s S3 bucket: 403 Forbidden error &amp; setting permissions", "body": "<p>I had the same problem, the thing is Amazon changed their layout so now creating a user policy is a bit different than before. So once you create a policy remember to attach the policy to the user in question or you will get the 403 forbidden error</p>\n"}, {"tags": [], "owner": {"reputation": 1090, "user_id": 2667984, "user_type": "registered", "profile_image": "https://graph.facebook.com/1247854657/picture?type=large", "display_name": "Nuno Costa", "link": "https://stackoverflow.com/users/2667984/nuno-costa"}, "is_accepted": false, "score": 1, "last_activity_date": 1448014906, "creation_date": 1448014906, "answer_id": 33824218, "question_id": 30350785, "link": "https://stackoverflow.com/questions/30350785/trying-to-set-up-amazons-s3-bucket-403-forbidden-error-setting-permissions/33824218#33824218", "title": "Trying to set up Amazon&#39;s S3 bucket: 403 Forbidden error &amp; setting permissions", "body": "<p>In my case <code>s3:PutObjectAcl</code> was the permission that was missing</p>\n"}, {"tags": [], "owner": {"reputation": 271, "user_id": 1873872, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5ae0c113339aeb55e833184a8cccda9e?s=128&d=identicon&r=PG", "display_name": "Steven Moffat", "link": "https://stackoverflow.com/users/1873872/steven-moffat"}, "is_accepted": false, "score": 0, "last_activity_date": 1455099012, "last_edit_date": 1455099012, "creation_date": 1455098529, "answer_id": 35312021, "question_id": 30350785, "link": "https://stackoverflow.com/questions/30350785/trying-to-set-up-amazons-s3-bucket-403-forbidden-error-setting-permissions/35312021#35312021", "title": "Trying to set up Amazon&#39;s S3 bucket: 403 Forbidden error &amp; setting permissions", "body": "<p>I had both the issues from the tutorial -</p>\n\n<p>Look in your heroku logs -</p>\n\n<p>Forbidden</p>\n\n<p>and</p>\n\n<p>Socket Error</p>\n\n<p>Going round trying to resolve this over a day I basically reset back to basics, Recreated a new IAM user and a new s3 bucket but this time left the REGION as US standard - the only s3 authority I could find to attach as the policy was full access - nothing else - so attached that</p>\n\n<p>Also retyping and confirming ENV variables on heroku as well as COPY AND PASTING the carrier_wave.rb from tutorial - to be sure to be sure .)</p>\n\n<p>first time round I was fiddling and unsure what to do so i might of clicked a few different things- adding groups and permissions, viewing wrong things - sometimes a RESET and STEP through everything especially after exploring AWS and IMS and s3 for the first time.</p>\n\n<p>Interesting that in heroku they INSTRUCT to set the bucket region as US standard and post a warning - Be sure to create a bucket in the same region as your app to take advantage of AWS\u2019s free in-region data transfer rates.</p>\n\n<p>good read for heroku to s3 configuration here ->\n<a href=\"https://devcenter.heroku.com/articles/s3\" rel=\"nofollow\">https://devcenter.heroku.com/articles/s3</a></p>\n"}, {"comments": [{"owner": {"reputation": 534, "user_id": 1055045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3bea0eb5ce2333ae2839f56c198ff4?s=128&d=identicon&r=PG", "display_name": "dft", "link": "https://stackoverflow.com/users/1055045/dft"}, "edited": false, "score": 1, "creation_date": 1480013522, "post_id": 38312108, "comment_id": 68808251, "body": "Thanks for tip on top-level. I had to do that, then was able to get Excon not to puke up. Adding the <code>Principle</code> was not valid and allowed in the policy for S3."}], "tags": [], "owner": {"reputation": 467, "user_id": 412256, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f5bb7b87e9ccfeb023a151ac2411f9dd?s=128&d=identicon&r=PG", "display_name": "Dr. Ernie", "link": "https://stackoverflow.com/users/412256/dr-ernie"}, "is_accepted": false, "score": 6, "last_activity_date": 1476498969, "last_edit_date": 1476498969, "creation_date": 1468255476, "answer_id": 38312108, "question_id": 30350785, "link": "https://stackoverflow.com/questions/30350785/trying-to-set-up-amazons-s3-bucket-403-forbidden-error-setting-permissions/38312108#38312108", "title": "Trying to set up Amazon&#39;s S3 bucket: 403 Forbidden error &amp; setting permissions", "body": "<p>To enable S3 file Uploads, I had to:</p>\n\n<ul>\n<li>specify my region (us-west)</li>\n<li>create an IAM user</li>\n<li>add a Bucket Policy specifying that user as a Principal</li>\n</ul>\n\n\n\n<pre><code>{\n    \"Version\": \"2008-10-17\",\n    \"Statement\": [\n        {\n            \"Sid\": \"AllowFileUpload\",\n            \"Effect\": \"Allow\",\n            \"Principal\": {\n                \"AWS\": \"arn:aws:iam::XXXXXXX:user/instaswan\"\n            },\n            \"Action\": [\n                \"s3:GetObject\",\n                \"s3:PutObject\",\n                \"s3:PutObjectAcl\"\n            ],\n            \"Resource\": [\n                \"arn:aws:s3:::instaswan-dev\",\n                \"arn:aws:s3:::instaswan-dev/*\"\n            ]\n        }\n    ]\n}\n</code></pre>\n\n<p>Be sure to include both the top-level and \"/*\" Resource, and include any other \"Action\" attributes you need.</p>\n"}, {"tags": [], "owner": {"reputation": 391, "user_id": 2460854, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XEfIe.png?s=128&g=1", "display_name": "bartoindahouse", "link": "https://stackoverflow.com/users/2460854/bartoindahouse"}, "is_accepted": false, "score": 1, "last_activity_date": 1469540167, "creation_date": 1469540167, "answer_id": 38591419, "question_id": 30350785, "link": "https://stackoverflow.com/questions/30350785/trying-to-set-up-amazons-s3-bucket-403-forbidden-error-setting-permissions/38591419#38591419", "title": "Trying to set up Amazon&#39;s S3 bucket: 403 Forbidden error &amp; setting permissions", "body": "<p>You may be missing a step which is to set your IAM policy if using an IAM user to configure your bucket.</p>\n\n<p>Go to IAM console, select your user, go to the <code>permissions tab</code>, click the <code>attach policy</code> button and add <code>administrator access</code>.</p>\n\n<p>After that the error should go away and you can upload files with no problem ;)</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7434092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/51c5d04b25183dad46585cde59ab9dc7?s=128&d=identicon&r=PG&f=1", "display_name": "Saul Payne", "link": "https://stackoverflow.com/users/7434092/saul-payne"}, "is_accepted": false, "score": 1, "last_activity_date": 1545948539, "creation_date": 1545948539, "answer_id": 53951360, "question_id": 30350785, "link": "https://stackoverflow.com/questions/30350785/trying-to-set-up-amazons-s3-bucket-403-forbidden-error-setting-permissions/53951360#53951360", "title": "Trying to set up Amazon&#39;s S3 bucket: 403 Forbidden error &amp; setting permissions", "body": "<p>I had the same problem. Tried many solutions including S3@FullAccess, creating users, writing custom policies. If someone encounters the problem, then check bucket permissions. Go to bucketname > Permissions > Public Access Settings, then change two ACLs settings from True to False.</p>\n"}], "owner": {"reputation": 2754, "user_id": 4499505, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2d1e61c81e3933b4ff09de01b9ff81d4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/4499505/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8913, "favorite_count": 3, "accepted_answer_id": 30369613, "answer_count": 7, "score": 5, "last_activity_date": 1545948539, "creation_date": 1432127657, "last_edit_date": 1495541349, "question_id": 30350785, "link": "https://stackoverflow.com/questions/30350785/trying-to-set-up-amazons-s3-bucket-403-forbidden-error-setting-permissions", "title": "Trying to set up Amazon&#39;s S3 bucket: 403 Forbidden error &amp; setting permissions", "body": "<p>I'm following Hartl's railstutorial.org and have arrived at <a href=\"https://www.railstutorial.org/book/user_microposts#sec-image_upload_in_production\" rel=\"nofollow noreferrer\">11.4.4: Image upload in production</a>. What I've done:</p>\n\n<ul>\n<li>Signed up for Amazon Web Services</li>\n<li>In Amazon Identity and Access Management I created a user. The user was created succesfully.</li>\n<li>In Amazon S3 I created a new bucket. </li>\n<li>Set permissions on the new bucket:</li>\n</ul>\n\n<p><strong>Permissions:</strong>\nThe tutorial instructs to \"grant read and write permission to the user created in the previous step\". However, under 'Permissons' for the bucket the new user's name is not mentioned. I could only choose between Everyone, Authenticated users, Log delivery, Me, and a username Amazon seems to have created itself from my name + a number. I have tried it by selecting Authenticated users and checked the boxes for Upload/Delete and View permissions (and not selecting List and Edit permissions). I also tried it by selecting Everyone and checked all the four boxes. The results were the same.</p>\n\n<ul>\n<li>I implemented in my Rails application following the instructions of the tutorial (I don't belief anything wen't wrong there, so I haven't included those steps here to not make it too long).</li>\n</ul>\n\n<p>The initializer <code>carrier_wave.rb</code> is set to the code below. I've added <code>region: 'eu-west-1'</code> to the initializer (an idea I got from <a href=\"https://stackoverflow.com/questions/16659691\">here</a>) to get rid of the message <code>connecting to the matching region will be more performant</code>.</p>\n\n<pre><code>if Rails.env.production?\n  CarrierWave.configure do |config|\n    config.fog_credentials = {\n      # Configuration for Amazon S3\n      :provider              =&gt; 'AWS',\n      :aws_access_key_id     =&gt; ENV['S3_ACCESS_KEY'],           # Set these key's using heroku config:set S3_ACCESS_KEY=&lt;access key&gt;\n      :aws_secret_access_key =&gt; ENV['S3_SECRET_KEY'],\n      :region                =&gt; 'eu-west-1'\n    }\n    config.fog_directory     =  ENV['S3_BUCKET']\n  end\nend\n</code></pre>\n\n<ul>\n<li>It worked in development and I pushed to Heroku.</li>\n</ul>\n\n<p><strong>Error:</strong>\nWhen using the uploader in production to upload an image, I get the error <code>We're sorry, but something went wrong.</code> The Heroku server log says:</p>\n\n<pre><code>app[web.1]:   SQL (1.7ms)  UPDATE \"users\" SET \"avatar\" = $1, \"updated_at\" = $2 WHERE \"users\".\"id\" = $3  [[\"avatar\", \"animaatjes.png.gif\"], [\"updated_at\", \"2015-05-20 12:37:56.683858\"], [\"id\", 18]]\nheroku[router]: at=info method=POST path=\"/users/18\" host=xxx.herokuapp.com request_id=xxx-7f9f-4580-89ba-xxx fwd=\"xx.xxx.xx.xxx\" dyno=web.1 connect=0ms service=3461ms status=500 bytes=1714\napp[web.1]: Completed 500 Internal Server Error in 3317ms (ActiveRecord: 13.0ms)\napp[web.1]:    (1.4ms)  ROLLBACK\napp[web.1]: Excon::Errors::Forbidden (Expected(200) &lt;=&gt; Actual(403 Forbidden)\napp[web.1]: excon.error.response\napp[web.1]:   :body          =&gt; \"&lt;?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?&gt;\\n&lt;Error&gt;&lt;Code&gt;AccessDenied&lt;/Code&gt;&lt;Message&gt;Access Denied&lt;/Message&gt;&lt;RequestId&gt;F8xxxD89&lt;/RequestId&gt;&lt;HostId&gt;MdB5iSMgxxx1vqE+Q=&lt;/HostId&gt;&lt;/Error&gt;\"\napp[web.1]:   :headers       =&gt; {\napp[web.1]:     \"Connection\"       =&gt; \"close\"\napp[web.1]:     \"Content-Type\"     =&gt; \"application/xml\"\napp[web.1]:     \"Date\"             =&gt; \"Wed, 20 May 2015 12:37:57 GMT\"\napp[web.1]:     \"Server\"           =&gt; \"AmazonS3\"\napp[web.1]:     \"x-amz-id-2\"       =&gt; \"MdB5iSMg***K1vqdP+E+Q=\"\napp[web.1]:     \"x-amz-request-id\" =&gt; \"F80A**C58\"\napp[web.1]:   }\napp[web.1]:   :local_address =&gt; \"***.**.**.**\"\napp[web.1]:   :local_port    =&gt; *****\napp[web.1]:   :reason_phrase =&gt; \"Forbidden\"\napp[web.1]:   :remote_ip     =&gt; \"**.***.***.***\"\napp[web.1]:   :status        =&gt; 403\napp[web.1]:   :status_line   =&gt; \"HTTP/1.1 403 Forbidden\\r\\n\"\napp[web.1]:   app/controllers/users_controller.rb:46:in 'update'\napp[web.1]: Completed 500 Internal Server Error in 6151ms (ActiveRecord: 60.7ms)\u2003\n</code></pre>\n\n<p>What have I done wrong? I seems to have something to do with the permissions?</p>\n\n<hr>\n\n<p><strong>Update:</strong>\nThe cause turned out to be the policies granted to the user. If I grant the user standard AmazonS3FullAccess then it works. It doesn't work with just AmazonS3ReadOnlyAccess, since then the user can't save a new image. In my application the user basically only needs 2 rights: upload its own avatar image and read the avatar image. <strong>Would it be safe to use AmazonS3FullAccess or should I write my own custom policy?</strong></p>\n\n<p>I tried the custom policy below, which should give the application read and write rights (adopted from <a href=\"http://blogs.aws.amazon.com/security/post/Tx3VRSWZ6B3SHAV/Writing-IAM-Policies-How-to-grant-access-to-an-Amazon-S3-bucket\" rel=\"nofollow noreferrer\">here</a>) but that still generated the <code>403 Forbidden</code> error.</p>\n\n<pre><code>{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\"s3:ListBucket\"],\n      \"Resource\": [\"arn:aws:s3:::mybucket\"]\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n        \"s3:PutObject\",\n        \"s3:GetObject\",\n        \"s3:DeleteObject\"\n      ],\n      \"Resource\": [\"arn:aws:s3:::mybucket/*\"]\n    }\n  ]\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "openssl", "bundler", "puma"], "comments": [{"owner": {"reputation": 3013, "user_id": 527741, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/8aa91965bd1df9476e5c64588f9d7d96?s=128&d=identicon&r=PG", "display_name": "Christian A. Str&#248;mmen", "link": "https://stackoverflow.com/users/527741/christian-a-str%c3%b8mmen"}, "edited": false, "score": 0, "creation_date": 1442070054, "post_id": 30350458, "comment_id": 52937628, "body": "Did you ever figure this out? Having the same problem here on a machine running El Capitan."}, {"owner": {"reputation": 116, "user_id": 3384989, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/100002093712338/picture?type=large", "display_name": "Giovani Barcelos", "link": "https://stackoverflow.com/users/3384989/giovani-barcelos"}, "reply_to_user": {"reputation": 3013, "user_id": 527741, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/8aa91965bd1df9476e5c64588f9d7d96?s=128&d=identicon&r=PG", "display_name": "Christian A. Str&#248;mmen", "link": "https://stackoverflow.com/users/527741/christian-a-str%c3%b8mmen"}, "edited": false, "score": 0, "creation_date": 1442160175, "post_id": 30350458, "comment_id": 52959105, "body": "What I had to do was delete the puma gem dependency and use the built-in rails server command"}], "answers": [{"comments": [{"owner": {"reputation": 116, "user_id": 3384989, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/100002093712338/picture?type=large", "display_name": "Giovani Barcelos", "link": "https://stackoverflow.com/users/3384989/giovani-barcelos"}, "edited": false, "score": 0, "creation_date": 1432127508, "post_id": 30350651, "comment_id": 48793832, "body": "When I do that i get the same error: checking for SSL_CTX_new() in -lssl... no checking for SSL_CTX_new() in -lssleay32... no *** extconf.rb failed *** Could not create Makefile due to some reason, probably lack of necessary libraries and/or headers.  Check the mkmf.log file for more details.  You may need configuration options.  Provided configuration options:         ... extconf failed, exit code 1"}, {"owner": {"reputation": 9993, "user_id": 2128691, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/YV6xv.jpg?s=128&g=1", "display_name": "dax", "link": "https://stackoverflow.com/users/2128691/dax"}, "reply_to_user": {"reputation": 116, "user_id": 3384989, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/100002093712338/picture?type=large", "display_name": "Giovani Barcelos", "link": "https://stackoverflow.com/users/3384989/giovani-barcelos"}, "edited": false, "score": 0, "creation_date": 1432127750, "post_id": 30350651, "comment_id": 48794010, "body": "you do have some pretty funny config options going on - i&#39;d check into those."}], "tags": [], "owner": {"reputation": 9993, "user_id": 2128691, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/YV6xv.jpg?s=128&g=1", "display_name": "dax", "link": "https://stackoverflow.com/users/2128691/dax"}, "is_accepted": false, "score": -3, "last_activity_date": 1432127283, "creation_date": 1432127283, "answer_id": 30350651, "question_id": 30350458, "link": "https://stackoverflow.com/questions/30350458/ruby-imported-project-is-asking-for-puma/30350651#30350651", "title": "Ruby imported project is asking for Puma", "body": "<p>I think the answer is in your error message:  </p>\n\n<pre><code>An error occurred while installing puma (2.9.2), and Bundler cannot continue.\nMake sure that `gem install puma -v '2.9.2'` succeeds before bundling.\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 963, "user_id": 790141, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/hDQ1m.png?s=128&g=1", "display_name": "Bob Roberts", "link": "https://stackoverflow.com/users/790141/bob-roberts"}, "is_accepted": false, "score": 18, "last_activity_date": 1454884516, "creation_date": 1454884516, "answer_id": 35260000, "question_id": 30350458, "link": "https://stackoverflow.com/questions/30350458/ruby-imported-project-is-asking-for-puma/35260000#35260000", "title": "Ruby imported project is asking for Puma", "body": "<p>I just ran into the same issue.  This <a href=\"https://github.com/puma/puma/issues/783\">issue</a>helped me to figure it out.</p>\n\n<p>I first tried the brew install openssl &amp;&amp; brew link --force openssl but I already had it installed.</p>\n\n<p>The fix for me was to run:</p>\n\n<pre><code>gem install puma -v '2.9.2' -- --with-opt-dir=/usr/local/opt/openssl\n</code></pre>\n\n<p>Hope this works for you as well.</p>\n"}], "owner": {"reputation": 116, "user_id": 3384989, "user_type": "registered", "accept_rate": 55, "profile_image": "https://graph.facebook.com/100002093712338/picture?type=large", "display_name": "Giovani Barcelos", "link": "https://stackoverflow.com/users/3384989/giovani-barcelos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2737, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1454884516, "creation_date": 1432126880, "last_edit_date": 1432127712, "question_id": 30350458, "link": "https://stackoverflow.com/questions/30350458/ruby-imported-project-is-asking-for-puma", "title": "Ruby imported project is asking for Puma", "body": "<p>I just got into a new project where I have to learn Ruby. I did some tutorials and everything went fine. I was even able to create a Webserver for my newborn application.\n<br/>But, when I imported the project(using GIT) and tried to run it, I find myself unable to start the WEBrick Server (using <code>rails server</code>).<br/><br/>\nThis is the error message:<br/></p>\n\n<p>C:\\Projects\\BookRosa\\bin>rails server<br/>\nCould not find puma-2.9.2 in any of the sources<br/>\nRun <code>bundle install</code> to install missing gems.<br/></p>\n\n<p>And when I run bundle install:</p>\n\n<pre><code>C:\\Projects\\BookRosa\\bin&gt;bundle install\nFetching gem metadata from https://rubygems.org/............\nFetching version metadata from https://rubygems.org/...\nFetching dependency metadata from https://rubygems.org/..\nResolving dependencies........\nUsing rake 10.3.2\nUsing i18n 0.6.11\nUsing minitest 4.7.5\nUsing multi_json 1.10.1\nUsing thread_safe 0.3.4\nUsing tzinfo 0.3.42\nUsing activesupport 4.0.3\nUsing builder 3.1.4\nUsing erubis 2.7.0\nUsing rack 1.5.2\nUsing rack-test 0.6.2\nUsing actionpack 4.0.3\nUsing mime-types 1.25.1\nUsing polyglot 0.3.5\nUsing treetop 1.4.15\nUsing mail 2.5.4\nUsing actionmailer 4.0.3\nUsing arbre 1.0.2\nUsing sass 3.2.19\nUsing thor 0.19.1\nUsing bourbon 3.2.3\nUsing coffee-script-source 1.8.0\nUsing execjs 2.2.2\nUsing coffee-script 2.3.0\nUsing railties 4.0.3\nUsing coffee-rails 4.0.1\nUsing formtastic 3.0.0\nUsing formtastic_i18n 0.1.1\nUsing has_scope 0.6.0.rc\nUsing responders 1.1.2\nUsing inherited_resources 1.5.1\nUsing jquery-rails 3.1.2\nUsing jquery-ui-rails 5.0.2\nUsing kaminari 0.16.1\nUsing activemodel 4.0.3\nUsing activerecord-deprecated_finders 1.0.3\nUsing arel 4.0.2\nUsing activerecord 4.0.3\nUsing bundler 1.10.0.rc\nUsing hike 1.2.3\nUsing tilt 1.4.1\nUsing sprockets 2.11.3\nUsing sprockets-rails 2.0.1\nUsing rails 4.0.3\nUsing polyamorous 1.1.0\nUsing ransack 1.5.1\nUsing sass-rails 4.0.4\nUsing activeadmin 1.0.0.pre from git://github.com/activeadmin/activeadmin.git (a\nt master)\nUsing bcrypt 3.1.9\nUsing climate_control 0.0.3\nUsing cocaine 0.5.4\nUsing orm_adapter 0.5.0\nUsing warden 1.2.3\nUsing devise 3.4.1\nUsing devise-i18n 0.11.2\nUsing jbuilder 1.5.3\nUsing json 1.8.1\nUsing paperclip 4.2.0\nwith native extensions\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\nC:/Ruby21/bin/ruby.exe extconf.rb\nchecking for SSL_CTX_new() in -lssl... no\nchecking for SSL_CTX_new() in -lssleay32... no\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n        --with-opt-dir\n        --without-opt-dir\n        --with-opt-include\n        --without-opt-include=${opt-dir}/include\n        --with-opt-lib\n        --without-opt-lib=${opt-dir}/lib\n        --with-make-prog\n        --without-make-prog\n        --srcdir=.\n        --curdir\n        --ruby=C:/Ruby21/bin/ruby\n        --with-puma_http11-dir\n        --without-puma_http11-dir\n        --with-puma_http11-include\n        --without-puma_http11-include=${puma_http11-dir}/include\n        --with-puma_http11-lib\n        --without-puma_http11-lib=${puma_http11-dir}/lib\n        --with-ssllib\n        --without-ssllib\n        --with-ssleay32lib\n        --without-ssleay32lib\n\nextconf failed, exit code 1\n\nGem files will remain installed in C:/Ruby21/lib/ruby/gems/2.1.0/gems/puma-2.9.2\n for inspection.\nResults logged to C:/Ruby21/lib/ruby/gems/2.1.0/extensions/x86-mingw32/2.1.0/pum\na-2.9.2/gem_make.out\nAn error occurred while installing puma (2.9.2), and Bundler cannot continue.\nMake sure that `gem install puma -v '2.9.2'` succeeds before bundling.\n</code></pre>\n\n<p>I've tried both http and https sources, installing devkit, installing openssl and the error won't go away. I don't have to use puma, but I can't take it off either. The app i just created works fine, so I have no ideia where the problem is since I'm newbie to Ruby</p>\n\n<p>Running <code>gem install puma -v '2.9.2'</code> returns the following:</p>\n\n<pre><code>checking for SSL_CTX_new() in -lssl... \nno checking for SSL_CTX_new() in -lssleay32... \nno *** extconf.rb failed *** \nCould not create Makefile due to some reason, probably lack of necessary libraries and/or headers. \nCheck the mkmf.log file for more details. \nYou may need configuration options. \nProvided configuration options: ... \nextconf failed, exit code 1\n</code></pre>\n"}, {"tags": ["javascript", "ruby", "selenium", "safari", "incognito-mode"], "comments": [{"owner": {"reputation": 8707, "user_id": 3124333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MCMEh.jpg?s=128&g=1", "display_name": "SiKing", "link": "https://stackoverflow.com/users/3124333/siking"}, "edited": false, "score": 0, "creation_date": 1432831664, "post_id": 30350326, "comment_id": 49100297, "body": "Can&#39;t you just run your tests in normal mode, and afterwards check if anything is in local storage using normal file I/O in ruby - forget Selenium?"}, {"owner": {"reputation": 5116, "user_id": 920599, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/07e30f4ee2a1866357ddae4581c85a22?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/920599/zack"}, "reply_to_user": {"reputation": 8707, "user_id": 3124333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MCMEh.jpg?s=128&g=1", "display_name": "SiKing", "link": "https://stackoverflow.com/users/3124333/siking"}, "edited": false, "score": 0, "creation_date": 1432902285, "post_id": 30350326, "comment_id": 49132522, "body": "The normal operation of the page is to save some data in local storage.  Consequently, the JavaScript crashes if a user visits the page using Safari in Private mode.  I want an automated test (think CI) that will verify that the page works in Safari&#39;s Private mode.  The automated part is important so that if, a year from now, another developer forgets that you cant write to local storage when in private browsing mode, the automated test will catch the oversight."}, {"owner": {"reputation": 5116, "user_id": 920599, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/07e30f4ee2a1866357ddae4581c85a22?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/920599/zack"}, "reply_to_user": {"reputation": 8707, "user_id": 3124333, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/MCMEh.jpg?s=128&g=1", "display_name": "SiKing", "link": "https://stackoverflow.com/users/3124333/siking"}, "edited": false, "score": 0, "creation_date": 1432902363, "post_id": 30350326, "comment_id": 49132578, "body": "Also, for clarification, by &quot;local storage&quot;, I mean the HTML5 local storage (<a href=\"http://www.w3schools.com/html/html5_webstorage.asp\" rel=\"nofollow noreferrer\">w3schools.com/html/html5_webstorage.asp</a>), not file on the local file system."}], "answers": [{"comments": [{"owner": {"reputation": 5116, "user_id": 920599, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/07e30f4ee2a1866357ddae4581c85a22?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/920599/zack"}, "edited": false, "score": 1, "creation_date": 1433259569, "post_id": 30559589, "comment_id": 49269589, "body": "The script is very helpful, thank you.  Now, how do I apply it to the particular instance of Safari that is being driven by selenium?"}, {"owner": {"reputation": 5116, "user_id": 920599, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/07e30f4ee2a1866357ddae4581c85a22?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/920599/zack"}, "edited": false, "score": 3, "creation_date": 1433335866, "post_id": 30559589, "comment_id": 49307215, "body": "Selenium is not equivalent to turning on Private Browsing.  If I turn on Private browsing in Safari, then this line of JavaScript will throw a QuotaExceededError:  &#39;localStorage.setItem(&quot;key&quot;, &quot;value&quot;)&#39;.  That doesn&#39;t happen simply by using Selenium."}, {"owner": {"reputation": 4809, "user_id": 4423545, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/dRPDg.jpg?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4423545/andrew"}, "reply_to_user": {"reputation": 5116, "user_id": 920599, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/07e30f4ee2a1866357ddae4581c85a22?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/920599/zack"}, "edited": false, "score": 0, "creation_date": 1433348727, "post_id": 30559589, "comment_id": 49317237, "body": "QuotaExceededError shown because of browser&#39;s fail of saving information locally. In case of selenium -- items will be not saved not because of they blocked by browser, but because of they will be deleted by selenium before next session will be started. So in some sense they are equivalent -- as this data will be not used on the next session. If you still need to run exactly in incognito mode, I think there are exist ability to change script above for running incognito for some specific profile. In this case you will be needed to create this profile and to use it on selenium start."}, {"owner": {"reputation": 1150, "user_id": 1251309, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/02d753f45ef41e670c41a6a81c8abb14?s=128&d=identicon&r=PG", "display_name": "Levi Roberts", "link": "https://stackoverflow.com/users/1251309/levi-roberts"}, "edited": false, "score": 0, "creation_date": 1452418647, "post_id": 30559589, "comment_id": 57153671, "body": "Add in the fact that that when you use SafariDriver, simply navigating to any page you&#39;re already logged in, will still be logged in. Private browsing will start you with absolutely no session information. This is what brought me to the question."}], "tags": [], "owner": {"reputation": 4809, "user_id": 4423545, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/dRPDg.jpg?s=128&g=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/4423545/andrew"}, "is_accepted": false, "score": 3, "last_activity_date": 1433089985, "last_edit_date": 1433089985, "creation_date": 1433088791, "answer_id": 30559589, "question_id": 30350326, "link": "https://stackoverflow.com/questions/30350326/configure-selenium-to-drive-safari-in-private-mode/30559589#30559589", "title": "Configure Selenium to drive Safari in Private mode", "body": "<p>Lets look on the definition of Private Browsing here:\n<a href=\"https://support.apple.com/kb/PH19216?locale=en_US\" rel=\"nofollow\">https://support.apple.com/kb/PH19216?locale=en_US</a></p>\n\n<blockquote>\n  <p>When you use Private Browsing windows, Safari doesn\u2019t save your browsing history, and it asks websites you visit not to track you.</p>\n</blockquote>\n\n<p>and here:<a href=\"http://en.wikipedia.org/wiki/Privacy_mode\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Privacy_mode</a></p>\n\n<blockquote>\n  <p>Privacy mode or \"private browsing\" or \"incognito mode\"[1] is a privacy feature in some web browsers to disable browsing history and the web cache. This allows a person to browse the Web without storing local data that could be retrieved at a later date. Privacy mode will also disable the storage of data in cookies and Flash cookies. This privacy protection is only on the local computing device as it is still possible to identify frequented websites by associating the IP address at the web server.</p>\n</blockquote>\n\n<p>So this means that Selenium is equivalent to turning on Private Browsing. Every time you start any driver via Selenium it creates a brand new anonymous profile, you are actually browsing privately. (if you do not use already created profile of safari)</p>\n\n<p>BUT! If you still think that you need to run safari in incognito mode, you can use the following hack:</p>\n\n<p>you can automate the process of enabling the Private Browsing option with AppleScript. Like so.</p>\n\n<ol>\n<li><p>First, launch the Universal Access system preference and enable the Enable Access for Assistive Devices option.</p></li>\n<li><p>Launch Script Editor (within the AppleScript folder inside the Applications folder) and enter the following script: </p></li>\n</ol>\n\n<blockquote>\n<pre><code>tell application \"Safari\"\n  activate\nend tell\n\ntell application \"System Events\"\n  tell process \"Safari\"\n      tell menu bar 1\n          tell menu bar item \"Safari\"\n              tell menu \"Safari\"\n                  click menu item \"Private Browsing\"\n              end tell\n          end tell\n      end tell\n  end tell\nend tell\n</code></pre>\n</blockquote>\n\n<p>Info from here: <a href=\"http://www.macworld.com/article/1139714/enableprivatebrowsing.html\" rel=\"nofollow\">http://www.macworld.com/article/1139714/enableprivatebrowsing.html</a></p>\n"}], "owner": {"reputation": 5116, "user_id": 920599, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/07e30f4ee2a1866357ddae4581c85a22?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/920599/zack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1708, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1433089985, "creation_date": 1432126563, "last_edit_date": 1432301977, "question_id": 30350326, "link": "https://stackoverflow.com/questions/30350326/configure-selenium-to-drive-safari-in-private-mode", "title": "Configure Selenium to drive Safari in Private mode", "body": "<p>How to I configure Selenium to drive Safari in Private mode?  (I'm using the Ruby interface).</p>\n\n<p>For context, here is why it is important to run tests in Safari's Private mode:  Attempting to write to the local storage will raise an error in Safari's Private mode.  Therefore, I want automated tests that verify that my code avoids writing to local storage when in Private mode.  (And, perhaps more importantly, will bring future errors to the attention of developers </p>\n"}, {"tags": ["ruby", "boolean", "computer-science"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1432130360, "post_id": 30350197, "comment_id": 48796163, "body": "What is treehouse? You need to describe that."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1432130880, "post_id": 30350197, "comment_id": 48796562, "body": "@sawa, treehouse is some kind of a portal where you can subscribe to tutorials/video/learning materials"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 2296134, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a5c1fd126c00d6b38d1d0e663fffbf08?s=128&d=identicon&r=PG", "display_name": "QRiz", "link": "https://stackoverflow.com/users/2296134/qriz"}, "edited": false, "score": 0, "creation_date": 1432130235, "post_id": 30350336, "comment_id": 48796064, "body": "ahh, that makes perfect sense now"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 0, "last_activity_date": 1432126584, "creation_date": 1432126584, "answer_id": 30350336, "question_id": 30350197, "link": "https://stackoverflow.com/questions/30350197/why-is-nil-discussed-as-boolean-by-treehouse/30350336#30350336", "title": "Why is `nil` discussed as boolean by treehouse?", "body": "<p>Every expression in Ruby is being evaluated to an object and every object has a boolean value.</p>\n\n<p>Many expressions can have a <code>false</code> value, but the only two objects in Ruby to have a boolean value of <code>false</code> are <strong><code>nil</code></strong> and <strong><code>false</code></strong>. That's why.</p>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1432130249, "creation_date": 1432130249, "answer_id": 30351875, "question_id": 30350197, "link": "https://stackoverflow.com/questions/30350197/why-is-nil-discussed-as-boolean-by-treehouse/30351875#30351875", "title": "Why is `nil` discussed as boolean by treehouse?", "body": "<p>What would be Ruby's counterpart to \"true\" and \"false\" in your quote are <code>true</code> and <code>false</code>, but as far as boolean logic in Ruby is concerned, <code>nil</code> behaves the same as <code>false</code>, and since only <code>nil</code> behaves like that besides <code>false</code> itself, <code>nil</code> is often assimilated with <code>false</code>.</p>\n"}], "owner": {"reputation": 31, "user_id": 2296134, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a5c1fd126c00d6b38d1d0e663fffbf08?s=128&d=identicon&r=PG", "display_name": "QRiz", "link": "https://stackoverflow.com/users/2296134/qriz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 30350336, "answer_count": 2, "score": 0, "last_activity_date": 1432130249, "creation_date": 1432126218, "last_edit_date": 1432130038, "question_id": 30350197, "link": "https://stackoverflow.com/questions/30350197/why-is-nil-discussed-as-boolean-by-treehouse", "title": "Why is `nil` discussed as boolean by treehouse?", "body": "<p>Why is <code>nil</code> considered a boolean or represented as a boolean value in the boolean tutorial for ruby? By definition, a boolean in computer science is a:</p>\n\n<blockquote>\n  <p>data type, having two values (usually denoted true and false),\n  intended to represent the truth values of logic and Boolean algebra.</p>\n</blockquote>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1432135354, "post_id": 30349875, "comment_id": 48800177, "body": "Do you mean <code>I don&#39;t know how to get the matches</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 867, "user_id": 2586729, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9262331e0039fe6a7cd3fe0d899cd5f0?s=128&d=identicon&r=PG", "display_name": "neo", "link": "https://stackoverflow.com/users/2586729/neo"}, "edited": false, "score": 0, "creation_date": 1432128167, "post_id": 30350283, "comment_id": 48794331, "body": "Thanks Shivam. is it not possible to match the complete line using regex in  the question and then extract the value."}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "reply_to_user": {"reputation": 867, "user_id": 2586729, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9262331e0039fe6a7cd3fe0d899cd5f0?s=128&d=identicon&r=PG", "display_name": "neo", "link": "https://stackoverflow.com/users/2586729/neo"}, "edited": false, "score": 0, "creation_date": 1432128447, "post_id": 30350283, "comment_id": 48794560, "body": "yeah its possible but this approach is much cleaner."}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 1, "last_activity_date": 1432126462, "creation_date": 1432126462, "answer_id": 30350283, "question_id": 30349875, "link": "https://stackoverflow.com/questions/30349875/extract-string-matching-regex/30350283#30350283", "title": "Extract string matching regex", "body": "<p>You can <code>scan</code> it like this:</p>\n\n<pre><code>str.each_line{ |line|\n  a = line.scan(/@(.*):(.*)$/)\n  puts a[0].inspect if !a.empty?\n}\n# [\"7789347\", \" 4444\"]\n# [\" 7789348 \", \" 666,555\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4551, "user_id": 3790360, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ef9805061faba2c8d3d95a1929702294?s=128&d=identicon&r=PG&f=1", "display_name": "Andie2302", "link": "https://stackoverflow.com/users/3790360/andie2302"}, "is_accepted": false, "score": 1, "last_activity_date": 1432126464, "creation_date": 1432126464, "answer_id": 30350286, "question_id": 30349875, "link": "https://stackoverflow.com/questions/30349875/extract-string-matching-regex/30350286#30350286", "title": "Extract string matching regex", "body": "<p>To get the values you can use: <code>@\\s*(.*?)\\s*:\\s*(\\d+(?:,\\d+)*)</code></p>\n\n<pre><code>if line =~ /@\\s*(.*?)\\s*:\\s*(\\d+(?:,\\d+)*)/\n   match1 = $~[1]\n   match2 = $~[2]\nelse\n   match = \"\"\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3401, "user_id": 3138755, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c37befa524517347239dfc372ded2553?s=128&d=identicon&r=PG&f=1", "display_name": "Rahul", "link": "https://stackoverflow.com/users/3138755/rahul"}, "is_accepted": false, "score": 1, "last_activity_date": 1432126635, "creation_date": 1432126635, "answer_id": 30350357, "question_id": 30349875, "link": "https://stackoverflow.com/questions/30349875/extract-string-matching-regex/30350357#30350357", "title": "Extract string matching regex", "body": "<p>Below Regex may help you:</p>\n\n<pre><code>@\\s*(\\d+)\\s*:\\s*([0-9,]*)\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/kJ2wT5/2\" rel=\"nofollow\">DEMO</a></p>\n"}, {"comments": [{"owner": {"reputation": 867, "user_id": 2586729, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9262331e0039fe6a7cd3fe0d899cd5f0?s=128&d=identicon&r=PG", "display_name": "neo", "link": "https://stackoverflow.com/users/2586729/neo"}, "edited": false, "score": 0, "creation_date": 1432128077, "post_id": 30350365, "comment_id": 48794258, "body": "Thanks for the reply. is it not possible to match complete string in format &quot;Text@7789347: 4444&quot; using regex than extract the value 7789347 and 4444 from it instead of just parsing digits? There can be other instance which can contain digits without &quot;Text&quot; in starting of line."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 867, "user_id": 2586729, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9262331e0039fe6a7cd3fe0d899cd5f0?s=128&d=identicon&r=PG", "display_name": "neo", "link": "https://stackoverflow.com/users/2586729/neo"}, "edited": false, "score": 0, "creation_date": 1432128251, "post_id": 30350365, "comment_id": 48794401, "body": "You still want to extract just the numbers, right? Only the paragraph must start with &quot;Text&quot;? But what is the ending delimiter?"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 867, "user_id": 2586729, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9262331e0039fe6a7cd3fe0d899cd5f0?s=128&d=identicon&r=PG", "display_name": "neo", "link": "https://stackoverflow.com/users/2586729/neo"}, "edited": false, "score": 0, "creation_date": 1432128489, "post_id": 30350365, "comment_id": 48794597, "body": "Without knowing where to stop, knowing just the starting delimiter will not help."}, {"owner": {"reputation": 867, "user_id": 2586729, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9262331e0039fe6a7cd3fe0d899cd5f0?s=128&d=identicon&r=PG", "display_name": "neo", "link": "https://stackoverflow.com/users/2586729/neo"}, "edited": false, "score": 0, "creation_date": 1432128686, "post_id": 30350365, "comment_id": 48794760, "body": "yes, you are right. &quot;Text&quot; will be there in starting. There will be nothing at the end of the line. For eg: after 4444 or 666,555 there will be nothing in the same line."}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1432128932, "last_edit_date": 1432128932, "creation_date": 1432126664, "answer_id": 30350365, "question_id": 30349875, "link": "https://stackoverflow.com/questions/30349875/extract-string-matching-regex/30350365#30350365", "title": "Extract string matching regex", "body": "<p>In case you have to match only floating digits, you can use the <code>/(?mi)^\\s*\\btext\\b.*?@\\s*(\\d+(?:,\\d+)?)\\s*:\\s*(\\d+(?:,\\d+)?)$/</code> regex:</p>\n\n<pre><code>str=\"\"\"this is some text\n\nText@7789347: 4444\nsome text \n  text   @ 7789348 : 666,555\nsome text\n\"\"\"\nputs str.scan(/(?mi)^\\s*\\btext\\b.*?@\\s*(\\d+(?:,\\d+)?)\\s*:\\s*(\\d+(?:,\\d+)?)$/)\n</code></pre>\n\n<p>Output of <a href=\"https://ideone.com/yR62zl\" rel=\"nofollow\">the demo</a>:</p>\n\n<pre><code>7789347\n4444\n7789348\n666,555\n</code></pre>\n"}], "owner": {"reputation": 867, "user_id": 2586729, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9262331e0039fe6a7cd3fe0d899cd5f0?s=128&d=identicon&r=PG", "display_name": "neo", "link": "https://stackoverflow.com/users/2586729/neo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 1, "accepted_answer_id": 30350365, "answer_count": 4, "score": 0, "last_activity_date": 1432130003, "creation_date": 1432125481, "last_edit_date": 1432130003, "question_id": 30349875, "link": "https://stackoverflow.com/questions/30349875/extract-string-matching-regex", "title": "Extract string matching regex", "body": "<p>I wanted to extract the value between <code>\"@\"</code> and <code>\":\"</code> as well as after <code>\":\"</code> within the following string:</p>\n\n<pre><code>str = \n\"this is some text\n\nText@7789347: 4444\nsome text \n  text   @ 7789348 : 666,555\nsome text\n\"\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>\"7789347\", \" 4444\"\n\"7789348\", \" 666,555\"\n</code></pre>\n\n<p>I am using the following regex:</p>\n\n<pre><code>(\\s)*[t|T][e|E][x|X][t|T](\\s)*@(\\s)*(\\d)*(\\s)*:.*\n</code></pre>\n\n<p>I can select the required field, but I don't know how to get the values.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes"], "comments": [{"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1432125091, "post_id": 30349553, "comment_id": 48791878, "body": "where are you using <code>to_param</code> method exactly? It&#39;ll be called by <code>url_for</code> method when you&#39;re trying to generate show/edit link using rails&#39; view helper."}, {"owner": {"reputation": 1918, "user_id": 3994821, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/efmpH.jpg?s=128&g=1", "display_name": "teoreda", "link": "https://stackoverflow.com/users/3994821/teoreda"}, "edited": false, "score": 0, "creation_date": 1432125259, "post_id": 30349553, "comment_id": 48791997, "body": "try a solution like this one: <a href=\"https://stackoverflow.com/questions/21517431/rails-rspec-request-spec-fails-because-unexpected-2f-added-to-redirect-response\" title=\"rails rspec request spec fails because unexpected 2f added to redirect response\">stackoverflow.com/questions/21517431/&hellip;</a>"}, {"owner": {"reputation": 83, "user_id": 1481190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4f6cc5b14e145a9b6458a8d5ee09521?s=128&d=identicon&r=PG", "display_name": "jesus.jackson.sena", "link": "https://stackoverflow.com/users/1481190/jesus-jackson-sena"}, "reply_to_user": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1432125837, "post_id": 30349553, "comment_id": 48792482, "body": "I&#39;m not calling it explicitly @Surya, just calling helpers like property_path."}, {"owner": {"reputation": 83, "user_id": 1481190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4f6cc5b14e145a9b6458a8d5ee09521?s=128&d=identicon&r=PG", "display_name": "jesus.jackson.sena", "link": "https://stackoverflow.com/users/1481190/jesus-jackson-sena"}, "reply_to_user": {"reputation": 1918, "user_id": 3994821, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/efmpH.jpg?s=128&g=1", "display_name": "teoreda", "link": "https://stackoverflow.com/users/3994821/teoreda"}, "edited": false, "score": 0, "creation_date": 1432126021, "post_id": 30349553, "comment_id": 48792629, "body": "@teoreda that solution seem to me like a monkey patching. Isn&#39;t there any other way to maintain my old URL&#39;s without resorting to this?"}], "owner": {"reputation": 83, "user_id": 1481190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4f6cc5b14e145a9b6458a8d5ee09521?s=128&d=identicon&r=PG", "display_name": "jesus.jackson.sena", "link": "https://stackoverflow.com/users/1481190/jesus-jackson-sena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 478, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1432125923, "creation_date": 1432124604, "last_edit_date": 1432125923, "question_id": 30349553, "link": "https://stackoverflow.com/questions/30349553/after-rails-4-upgrade-2f-being-escaped-on-the-url", "title": "After rails 4 upgrade %2F Being escaped on the URL", "body": "<p>we are currently upgrade to rails 4 (specifically 4.2.1). On our Rails 3 version we have SEO friendly URL's that are being generated overriding the <em>to_param</em> method.</p>\n\n<pre><code>def to_param\n[\n  (city||\"all\").to_url.capitalize,\n  (property_type||\"apartment\").to_url,\n  [\n    id,\n    (self.title(:en) || \"No title\").to_url.tr(\"`\",\"\")\n  ].join(\"-\")\n].join(\"/\") \nend\n</code></pre>\n\n<p>And on Rails 3 it used to generate the following URL:</p>\n\n<pre><code>city/type/id-title\n</code></pre>\n\n<p>But now it's generating</p>\n\n<pre><code>city%2Ftype%2Fid-title\n</code></pre>\n\n<p>We can't seem to find an answer to that. It's even causing a collision with another route. Thanks in advance.</p>\n\n<p>UPDATE:\nI'm including routes to make it clearer. I didn't change anything there, it was working fine before upgrade.</p>\n\n<pre><code>scope \"rentals\" do\nget \"/\", to: \"frontpage#index\"\nget \"/new\", to: \"properties#new\", as: \"new_property\"\nget \"/(:destination)/(:type)\", to: \"searches#show\", as: \"search\"\n\nresources :properties, path: \"\", constraints: { id: /[a-zA-Z0-9\\-\\.][\\/]+/}, except: [:index, :new] do\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "answers": [{"comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1432124730, "post_id": 30349579, "comment_id": 48791556, "body": "It is not an appropriate explanation. <code>(?&lt;=\\d)</code> is not checking for a digit at the end since it is a <i>look-behind</i>."}, {"owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1432124972, "post_id": 30349579, "comment_id": 48791773, "body": "@stribizhev when regex engine matches the last character it checks if it is digit or not."}, {"owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1432125233, "post_id": 30349579, "comment_id": 48791978, "body": "@stribizhev the lookbehind is placed after consuming the last character.So once the match is complete then regex enigne tries to lookfor integer.In short the last match should be a digit"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1432125236, "post_id": 30349579, "comment_id": 48791985, "body": "I mean this part <i>after the last match</i> is not appropriate. It checks <i>before</i>."}, {"owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1432125292, "post_id": 30349579, "comment_id": 48792027, "body": "@stribizhev the regex engine will do it after the last match is consumed.Please use <code>regex101.com</code> and watch debugger perfomr"}], "tags": [], "owner": {"reputation": 62965, "user_id": 3679490, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/70f98fb23b16862298ea208aedfd18ae?s=128&d=identicon&r=PG&f=1", "display_name": "vks", "link": "https://stackoverflow.com/users/3679490/vks"}, "is_accepted": false, "score": 1, "last_activity_date": 1432124904, "last_edit_date": 1432124904, "creation_date": 1432124667, "answer_id": 30349579, "question_id": 30349518, "link": "https://stackoverflow.com/questions/30349518/ruby-regular-expression-match/30349579#30349579", "title": "Ruby Regular expression match", "body": "<pre><code>(?&lt;!\\S)[^\\s]*[aeiou][^\\s]*(?&lt;=\\d)(?!\\S)\n\n                          ^^^^^^^ \n</code></pre>\n\n<p>Because of the <code>lookbehind</code> which makes regex engine look for <code>integer</code> after the last match which is not present in <code>123test</code></p>\n\n<p>For your needs you can simply use</p>\n\n<pre><code>\\b(?=[a-zA-Z0-9]*[0-9])(?=[a-zA-Z0-9]*[aeiou])[a-zA-Z0-9]+\\b\n</code></pre>\n\n<p>See demo.</p>\n\n<p><a href=\"https://www.regex101.com/r/fJ6cR4/27\" rel=\"nofollow\">https://www.regex101.com/r/fJ6cR4/27</a></p>\n"}, {"tags": [], "owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "is_accepted": true, "score": 5, "last_activity_date": 1432125283, "last_edit_date": 1432125283, "creation_date": 1432124683, "answer_id": 30349591, "question_id": 30349518, "link": "https://stackoverflow.com/questions/30349518/ruby-regular-expression-match/30349591#30349591", "title": "Ruby Regular expression match", "body": "<blockquote>\n  <p>i want to match a word which must have a vowel and digit</p>\n</blockquote>\n\n<pre><code>(?&lt;!\\S)\\S*(?:[aeiou]\\S*\\d|\\d\\S*[aeiou])\\S*(?!\\S)\n</code></pre>\n\n<p>This part in your regex,</p>\n\n<pre><code>(?&lt;=\\d)(?!\\S)\n</code></pre>\n\n<p>will look for a digit to be present which must not be followed by a non-space character. In this <code>test123</code>, because 3 present at the last satisfies this condition where 3 is not followed by a non-space character. So your regex matches <code>test123</code> and fails to match <code>123test</code> because all the digits present in this input is followed by a non-space character. And also your regex asserts that there must be an vowel exists before the digit. This is also a reason.</p>\n"}, {"tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 0, "last_activity_date": 1432125184, "creation_date": 1432125184, "answer_id": 30349764, "question_id": 30349518, "link": "https://stackoverflow.com/questions/30349518/ruby-regular-expression-match/30349764#30349764", "title": "Ruby Regular expression match", "body": "<p>Alternative way of doing this:</p>\n\n<pre><code>def vowel_and_num?(str)\n !(str.scan(/[aeiou]/).empty? || str.scan(/[0-9]/).empty?)\nend\n\nvowel_and_num?(\"test123\")\n# =&gt; true\n\nvowel_and_num?(\"123test\")\n# =&gt; true\n\nvowel_and_num?(\"test\")\n# =&gt; false\n\nvowel_and_num?(\"123\")\n# =&gt; false \n</code></pre>\n"}], "owner": {"reputation": 1698, "user_id": 4587148, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjBAv.jpg?s=128&g=1", "display_name": "Sajan", "link": "https://stackoverflow.com/users/4587148/sajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 30349591, "answer_count": 3, "score": 1, "last_activity_date": 1432125838, "creation_date": 1432124509, "question_id": 30349518, "link": "https://stackoverflow.com/questions/30349518/ruby-regular-expression-match", "title": "Ruby Regular expression match", "body": "<p>why this regexp</p>\n\n<pre><code>(?&lt;!\\S)[^\\s]*[aeiou][^\\s]*(?&lt;=\\d)(?!\\S)\n</code></pre>\n\n<p>match test123 but not 123test</p>\n\n<p>i want to match a word which must have a vowel and digit .As i am new to this i dont understand all methods completely. maybe thats causing problem.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1432124951, "post_id": 30349488, "comment_id": 48791751, "body": "you defined the <code>to_s</code> method, but Why not use\uff1f"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1432125026, "post_id": 30349488, "comment_id": 48791821, "body": "@pangpang because <code>to_s</code> is called implicitly by some methods outputting objects into stdout. For example by <code>puts</code>."}, {"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1432125376, "post_id": 30349488, "comment_id": 48792101, "body": "wow, it is really\uff0cthanks for your explanation\uff01"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1432125814, "post_id": 30349488, "comment_id": 48792464, "body": "OP: Did my answer help you?"}], "answers": [{"comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1432124835, "post_id": 30349523, "comment_id": 48791653, "body": "Wow, I had no idea p used <code>.inspect</code> natively, very nice!"}, {"owner": {"reputation": 83, "user_id": 4733151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-u1_yCzl8mis/AAAAAAAAAAI/AAAAAAAAABQ/8nbrkkOsXVI/photo.jpg?sz=128", "display_name": "Vitalik Andrysha", "link": "https://stackoverflow.com/users/4733151/vitalik-andrysha"}, "edited": false, "score": 0, "creation_date": 1432129416, "post_id": 30349523, "comment_id": 48795362, "body": "@Marek Lipka, <b>Anyway not working</b> <code>puts cart</code> <b>in the console</b> <code>E:\\work\\storeapp3\\app\\storeapp\\shop&gt;ruby init.rb #&lt;Cart:0x25818f0&gt;</code>"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 83, "user_id": 4733151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-u1_yCzl8mis/AAAAAAAAAAI/AAAAAAAAABQ/8nbrkkOsXVI/photo.jpg?sz=128", "display_name": "Vitalik Andrysha", "link": "https://stackoverflow.com/users/4733151/vitalik-andrysha"}, "edited": false, "score": 0, "creation_date": 1432129590, "post_id": 30349523, "comment_id": 48795518, "body": "@VitalikAndrysha are you sure you overwrote <code>to_s</code> method of <code>Cart</code> class?"}, {"owner": {"reputation": 83, "user_id": 4733151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-u1_yCzl8mis/AAAAAAAAAAI/AAAAAAAAABQ/8nbrkkOsXVI/photo.jpg?sz=128", "display_name": "Vitalik Andrysha", "link": "https://stackoverflow.com/users/4733151/vitalik-andrysha"}, "edited": false, "score": 0, "creation_date": 1432129893, "post_id": 30349523, "comment_id": 48795772, "body": "@Marek Lipka, <b>This project see:</b> <a href=\"https://github.com/Wallsays/LearnRuby/blob/master/storeapp/app/item.rb\" rel=\"nofollow noreferrer\">https://github.com/Wallsays/LearnRuby/blob/master/storeapp/a&zwnj;&#8203;pp/item.rb</a>"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 83, "user_id": 4733151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-u1_yCzl8mis/AAAAAAAAAAI/AAAAAAAAABQ/8nbrkkOsXVI/photo.jpg?sz=128", "display_name": "Vitalik Andrysha", "link": "https://stackoverflow.com/users/4733151/vitalik-andrysha"}, "edited": false, "score": 0, "creation_date": 1432130123, "post_id": 30349523, "comment_id": 48795962, "body": "@VitalikAndrysha ok you defined <code>to_s</code> method for <code>Item</code> class. Why do you expect <code>Cart</code> instances to use it?"}, {"owner": {"reputation": 83, "user_id": 4733151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-u1_yCzl8mis/AAAAAAAAAAI/AAAAAAAAABQ/8nbrkkOsXVI/photo.jpg?sz=128", "display_name": "Vitalik Andrysha", "link": "https://stackoverflow.com/users/4733151/vitalik-andrysha"}, "edited": false, "score": 0, "creation_date": 1432130647, "post_id": 30349523, "comment_id": 48796365, "body": "@Marek Lipka, <b>Did sonvertuvatys product is not yet in Item ? I only can not understand this, it works on video lessons, and I not working</b>"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 83, "user_id": 4733151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-u1_yCzl8mis/AAAAAAAAAAI/AAAAAAAAABQ/8nbrkkOsXVI/photo.jpg?sz=128", "display_name": "Vitalik Andrysha", "link": "https://stackoverflow.com/users/4733151/vitalik-andrysha"}, "edited": false, "score": 0, "creation_date": 1432130736, "post_id": 30349523, "comment_id": 48796436, "body": "@VitalikAndrysha I don&#39;t understand your question."}, {"owner": {"reputation": 83, "user_id": 4733151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-u1_yCzl8mis/AAAAAAAAAAI/AAAAAAAAABQ/8nbrkkOsXVI/photo.jpg?sz=128", "display_name": "Vitalik Andrysha", "link": "https://stackoverflow.com/users/4733151/vitalik-andrysha"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1432131184, "post_id": 30349523, "comment_id": 48796790, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/78332/discussion-between-vitalik-andrysha-and-marek-lipka\">continue this discussion in chat</a>."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 83, "user_id": 4733151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-u1_yCzl8mis/AAAAAAAAAAI/AAAAAAAAABQ/8nbrkkOsXVI/photo.jpg?sz=128", "display_name": "Vitalik Andrysha", "link": "https://stackoverflow.com/users/4733151/vitalik-andrysha"}, "edited": false, "score": 0, "creation_date": 1432131645, "post_id": 30349523, "comment_id": 48797182, "body": "@VitalikAndrysha I&#39;m glad. :)"}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 5, "last_activity_date": 1432124522, "creation_date": 1432124522, "answer_id": 30349523, "question_id": 30349488, "link": "https://stackoverflow.com/questions/30349488/why-are-not-displayed-string/30349523#30349523", "title": "Why are not displayed string?", "body": "<p>It's because <a href=\"http://ruby-doc.org/core-2.2.2/Kernel.html#method-i-p\" rel=\"noreferrer\"><code>p</code></a> displays the result of calling <code>inspect</code> method on object. You can use <code>puts</code> instead. </p>\n"}], "owner": {"reputation": 83, "user_id": 4733151, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-u1_yCzl8mis/AAAAAAAAAAI/AAAAAAAAABQ/8nbrkkOsXVI/photo.jpg?sz=128", "display_name": "Vitalik Andrysha", "link": "https://stackoverflow.com/users/4733151/vitalik-andrysha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 1, "accepted_answer_id": 30349523, "answer_count": 1, "score": 0, "last_activity_date": 1432124522, "creation_date": 1432124422, "question_id": 30349488, "link": "https://stackoverflow.com/questions/30349488/why-are-not-displayed-string", "title": "Why are not displayed string?", "body": "<p><strong>I created method \"to_s\" :</strong></p>\n\n<pre><code>  def to_s\n    \"#{self.name}:#{self.price}:#{self.weight}\"\n  end\n</code></pre>\n\n<p><strong>When I add products to the cart by \"cart.add_item\"</strong></p>\n\n<pre><code>@items = []\n@items &lt;&lt; AntiqueItem.new({:price =&gt; 111, :weight =&gt; 100, :name =&gt; 'car'})\n@items &lt;&lt; RealItem.new({:price =&gt; 111, :weight =&gt; 100, :name =&gt; 'kettle'})\n@items &lt;&lt; RealItem.new({:price =&gt; 200, :weight =&gt; 100, :name =&gt; 'dishwasher'})\n\ncart = Cart.new('vitalik')\n\ncart.add_item RealItem.new({:price =&gt; 111, :weight =&gt; 100, :name =&gt; 'car'})\ncart.add_item RealItem.new({:price =&gt; 121, :weight =&gt; 100, :name =&gt; 'car'})\ncart.add_item RealItem.new({:price =&gt; 151, :weight =&gt; 100, :name =&gt; 'kettle'})\n\np cart\n</code></pre>\n\n<p><strong>In the console information is not displayed string</strong></p>\n\n<pre><code>E:\\work\\storeapp3\\app\\storeapp\\shop&gt;ruby init.rb\n#&lt;Cart:0x2685888 @items=[#&lt;RealItem:0x2685828 @weight=100, @real_price=111, @name=\"car\"&gt;, #&lt;RealItem:0x2685738 @weight=100, @real_price=121, @name=\"car\"&gt;, #&lt;RealItem:0x2685648 @wei\nght=100, @real_price=151, @name=\"kettle\"&gt;], @owner=\"vitalik\"&gt;\n</code></pre>\n\n<p><strong>Maybe I made a mistake somewhere?</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx", "capistrano", "bundler"], "comments": [{"owner": {"reputation": 10113, "user_id": 895487, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/336ae3b2e846448b71eb7d69e3d96a75?s=128&d=identicon&r=PG&f=1", "display_name": "malcoauri", "link": "https://stackoverflow.com/users/895487/malcoauri"}, "reply_to_user": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 0, "creation_date": 1432123766, "post_id": 30349166, "comment_id": 48790867, "body": "My application works, how it can work without Rails ??"}], "answers": [{"comments": [{"owner": {"reputation": 10113, "user_id": 895487, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/336ae3b2e846448b71eb7d69e3d96a75?s=128&d=identicon&r=PG&f=1", "display_name": "malcoauri", "link": "https://stackoverflow.com/users/895487/malcoauri"}, "edited": false, "score": 0, "creation_date": 1432124006, "post_id": 30349255, "comment_id": 48791029, "body": "Thanks it works! How can I remove need to add &#39;bundle exec&#39; to each command? Thanks !"}, {"owner": {"reputation": 7329, "user_id": 1232447, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/001bb9923606697c5edf6b88955c73e8?s=128&d=identicon&r=PG&f=1", "display_name": "maximus \u30c4", "link": "https://stackoverflow.com/users/1232447/maximus-%e3%83%84"}, "reply_to_user": {"reputation": 10113, "user_id": 895487, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/336ae3b2e846448b71eb7d69e3d96a75?s=128&d=identicon&r=PG&f=1", "display_name": "malcoauri", "link": "https://stackoverflow.com/users/895487/malcoauri"}, "edited": false, "score": 0, "creation_date": 1432124208, "post_id": 30349255, "comment_id": 48791168, "body": "adding <code>bundle exec</code> actually good as it uses the gems specified in the <code>gemfile</code> without which your command will use global gems. If you reluctant to use <code>bundle exec</code> then you need to install gem  to global namespace which can be accessible outside the bundler context."}, {"owner": {"reputation": 10113, "user_id": 895487, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/336ae3b2e846448b71eb7d69e3d96a75?s=128&d=identicon&r=PG&f=1", "display_name": "malcoauri", "link": "https://stackoverflow.com/users/895487/malcoauri"}, "edited": false, "score": 0, "creation_date": 1432124481, "post_id": 30349255, "comment_id": 48791365, "body": "ok thanks! But how I can install gems globally? On my local machine I use RVM &amp; Ruby, but I don&#39;t execute &#39;bundle exec&#39; for each command"}, {"owner": {"reputation": 7329, "user_id": 1232447, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/001bb9923606697c5edf6b88955c73e8?s=128&d=identicon&r=PG&f=1", "display_name": "maximus \u30c4", "link": "https://stackoverflow.com/users/1232447/maximus-%e3%83%84"}, "reply_to_user": {"reputation": 10113, "user_id": 895487, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/336ae3b2e846448b71eb7d69e3d96a75?s=128&d=identicon&r=PG&f=1", "display_name": "malcoauri", "link": "https://stackoverflow.com/users/895487/malcoauri"}, "edited": false, "score": 0, "creation_date": 1432124519, "post_id": 30349255, "comment_id": 48791396, "body": "You can install gems globally with Capistrano, check this out <a href=\"http://paulgoscicki.com/archives/2011/10/tell-bundler-to-install-gems-globally-when-using-capistrano/\" rel=\"nofollow noreferrer\">paulgoscicki.com/archives/2011/10/&hellip;</a>"}], "tags": [], "owner": {"reputation": 7329, "user_id": 1232447, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/001bb9923606697c5edf6b88955c73e8?s=128&d=identicon&r=PG&f=1", "display_name": "maximus \u30c4", "link": "https://stackoverflow.com/users/1232447/maximus-%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1432124609, "last_edit_date": 1432124609, "creation_date": 1432123784, "answer_id": 30349255, "question_id": 30349166, "link": "https://stackoverflow.com/questions/30349166/rails-gem-is-absent-after-capistrano-deploy/30349255#30349255", "title": "Rails gem is absent after Capistrano deploy", "body": "<p>You need to use,</p>\n\n<pre><code>bundle exec rails c production\n</code></pre>\n\n<p>This is because your are using <code>rvm</code> which bundles the gems inside namespace (inside <code>/vendor</code> on production) which won't be available outside the bundle context.</p>\n\n<p><strong>Note:</strong></p>\n\n<p>Gems can be installed outside the bundler context with Capistrano (<a href=\"http://paulgoscicki.com/archives/2011/10/tell-bundler-to-install-gems-globally-when-using-capistrano/\" rel=\"nofollow\">http://paulgoscicki.com/archives/2011/10/tell-bundler-to-install-gems-globally-when-using-capistrano/</a>)</p>\n"}], "owner": {"reputation": 10113, "user_id": 895487, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/336ae3b2e846448b71eb7d69e3d96a75?s=128&d=identicon&r=PG&f=1", "display_name": "malcoauri", "link": "https://stackoverflow.com/users/895487/malcoauri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1432124609, "creation_date": 1432123518, "question_id": 30349166, "link": "https://stackoverflow.com/questions/30349166/rails-gem-is-absent-after-capistrano-deploy", "title": "Rails gem is absent after Capistrano deploy", "body": "<p>I'm trying to deploy my application on Ubuntu server. I installed Nginx/Phusion Passenger and deployed my application with Capistrano, it works (I can open URL and look at project). I use RVM and only one version of Ruby I installed before (ruby 2.0.0p643). But when I go to my project folder and try to execute 'rails c production' I get the following error:</p>\n\n<pre><code>The program 'rails' can be found in the following packages:\n * ruby-railties-3.2\n * ruby-railties-4.0\nTry: sudo apt-get install &lt;selected package&gt;\n</code></pre>\n\n<p>I don't understand what does mean this error - I uploaded my Rails app, it works, I see rendered HTML page, but this error tells me something other :). Also, if I execute 'gem list' I get the following list:</p>\n\n<pre><code>*** LOCAL GEMS ***\n\nbigdecimal (1.2.0)\nbundler (1.9.9)\nbundler-unload (1.0.2)\nexecutable-hooks (1.3.2)\ngem-wrappers (1.2.7)\nio-console (0.4.2)\njson (1.7.7)\nminitest (4.3.2)\npsych (2.0.0)\nrake (0.9.6)\nrdoc (4.0.0)\nrubygems-bundler (1.4.4)\nrvm (1.11.3.9)\ntest-unit (2.0.0.0)\n</code></pre>\n\n<p>I don't see 'rails' in this list, but as I said before my application works!!! Please, tell me, what I did wrong. Thanks in advance! </p>\n"}, {"tags": ["ruby", "linux", "installation", "compass-sass", "offline"], "comments": [{"owner": {"reputation": 3842, "user_id": 2216929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1cfa9e99112a82bc03a57d97d09e7217?s=128&d=identicon&r=PG", "display_name": "kaybee99", "link": "https://stackoverflow.com/users/2216929/kaybee99"}, "edited": false, "score": 0, "creation_date": 1432123574, "post_id": 30349086, "comment_id": 48790732, "body": "Are you able to access the internet otherwise?"}, {"owner": {"reputation": 5188, "user_id": 3560614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e54072123df6b051682d95e76d4bd748?s=128&d=identicon&r=PG", "display_name": "Kostas Rousis", "link": "https://stackoverflow.com/users/3560614/kostas-rousis"}, "edited": false, "score": 1, "creation_date": 1432123594, "post_id": 30349086, "comment_id": 48790746, "body": "<a href=\"http://stackoverflow.com/questions/4758541/gem-install-xyz-locally-without-connection-to-the-internet?rq=1\" title=\"gem install xyz locally without connection to the internet\">stackoverflow.com/questions/4758541/&hellip;</a>"}, {"owner": {"reputation": 8517, "user_id": 504612, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/547d34a3d35a2de241fe186198d3b898?s=128&d=identicon&r=PG", "display_name": "sisko", "link": "https://stackoverflow.com/users/504612/sisko"}, "reply_to_user": {"reputation": 3842, "user_id": 2216929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1cfa9e99112a82bc03a57d97d09e7217?s=128&d=identicon&r=PG", "display_name": "kaybee99", "link": "https://stackoverflow.com/users/2216929/kaybee99"}, "edited": false, "score": 0, "creation_date": 1432124263, "post_id": 30349086, "comment_id": 48791219, "body": "@kaybee99: yes. Access is limited due to proxy/firewall restrictions"}], "answers": [{"tags": [], "owner": {"reputation": 551, "user_id": 211716, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/be443b085eb5281638d369c5241f641d?s=128&d=identicon&r=PG", "display_name": "Peter Giacomo Lombardo", "link": "https://stackoverflow.com/users/211716/peter-giacomo-lombardo"}, "is_accepted": false, "score": 2, "last_activity_date": 1432138466, "creation_date": 1432138466, "answer_id": 30355125, "question_id": 30349086, "link": "https://stackoverflow.com/questions/30349086/install-rubygems-without-internet-connection/30355125#30355125", "title": "Install Rubygems without internet connection", "body": "<p>If it's a firewall issue, you can also download gems directly via browser:</p>\n\n<ul>\n<li><a href=\"https://rubygems.org/gems/compass\" rel=\"nofollow\">https://rubygems.org/gems/compass</a></li>\n<li><a href=\"https://rubygems.org/gems/compass_radix\" rel=\"nofollow\">https://rubygems.org/gems/compass_radix</a></li>\n</ul>\n\n<p>Note that you will need those gems' runtime dependencies as well.</p>\n\n<p>The other alternative is to download them from a computer where you do have internet access using <code>gem fetch</code></p>\n\n<pre><code>gem fetch compass\ngem fetch compass_radix\n</code></pre>\n\n<p>If the second scenario, put those files on a USB key and bring them over to the other computer without internet and install using the format</p>\n\n<pre><code>cd &lt;directory where gemfiles are&gt;\ngem install ./compass-x.x.x.gem\ngem install ./compass_radix-x.x.x.gem\n</code></pre>\n\n<p>You should store all gems in the same directory (compass, compass_radix and all runtime dependencies) before attempting <code>gem install &lt;gemfile&gt;</code>.</p>\n"}], "owner": {"reputation": 8517, "user_id": 504612, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/547d34a3d35a2de241fe186198d3b898?s=128&d=identicon&r=PG", "display_name": "sisko", "link": "https://stackoverflow.com/users/504612/sisko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2106, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1485940163, "creation_date": 1432123333, "last_edit_date": 1485940163, "question_id": 30349086, "link": "https://stackoverflow.com/questions/30349086/install-rubygems-without-internet-connection", "title": "Install Rubygems without internet connection", "body": "<p>Is there a way to install <strong>compass</strong> and <strong>compass_radix</strong> offline?</p>\n\n<p>I get the following when I attempt a command line installation:</p>\n\n<pre><code>sudo gem install compass\nWARNING:  Error fetching data: bad response Service Unavailable 503 (http://rubygems.org/latest_specs.4.8.gz)\nWARNING:  Error fetching data: bad response Service Unavailable 503 (http://rubygems.org/specs.4.8.gz)\n    Compass is charityware. If you love it, please donate on our behalf at http://umdf.org/compass Thanks!\nSuccessfully installed compass-1.0.3\n1 gem installed\nInstalling ri documentation for compass-1.0.3...\nInstalling RDoc documentation for compass-1.0.3...\n\nsudo gem install compass_radix\nWARNING:  Error fetching data: bad response Service Unavailable 503 (http://rubygems.org/latest_specs.4.8.gz)\nERROR:  Could not find a valid gem 'compass_radix' (&gt;= 0) in any repository\nERROR:  Possible alternatives: compass_radix\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 7389, "user_id": 2235594, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/4MssP.jpg?s=128&g=1", "display_name": "davegson", "link": "https://stackoverflow.com/users/2235594/davegson"}, "edited": false, "score": 1, "creation_date": 1432122478, "post_id": 30348726, "comment_id": 48789966, "body": "could you show us what array you are building? Now you&#39;d count <code>s1+s2+..+s6</code> into a single element, leaving <code>arr = [ n ]</code>"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1432122481, "post_id": 30348726, "comment_id": 48789973, "body": "what is s1, s2, s3,etc... ? Is that string or object? are you trying to add all objects?"}, {"owner": {"reputation": 299, "user_id": 4263820, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fae12d17d6a02d0d7cf958a226f62467?s=128&d=identicon&r=PG&f=1", "display_name": "harvey", "link": "https://stackoverflow.com/users/4263820/harvey"}, "edited": false, "score": 0, "creation_date": 1432122622, "post_id": 30348726, "comment_id": 48790061, "body": "each of them is a string"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1432123104, "post_id": 30348726, "comment_id": 48790401, "body": "@harvey : This way array of string not defined. correct it with <code>arr = [&quot;s1&quot;, &quot; s2&quot;, &quot;s3&quot;, &quot;s4&quot;, &quot;s5&quot;, &quot;s6&quot;]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 1, "last_activity_date": 1432123021, "last_edit_date": 1432123021, "creation_date": 1432122710, "answer_id": 30348882, "question_id": 30348726, "link": "https://stackoverflow.com/questions/30348726/newlines-within-an-array/30348882#30348882", "title": "Newlines within an array", "body": "<p>You can use <code>Array#each_slice</code>:</p>\n\n<pre><code>arr = [\"s1\" , \"s2\" , \"s3\" , \"s4\" , \"s5\" , \"s6\"]\narr.each_slice(2) { |a| p a }\n# [\"s1\", \"s2\"]\n# [\"s3\", \"s4\"]\n# [\"s5\", \"s6\"]\n</code></pre>\n\n<p>Or more accurately:</p>\n\n<pre><code>file = File.open(\"abc.html\", \"w\")\narr.each_slice(2) { |a| file.puts a.first + \" + \" + a.last }\nfile.close\n\nFile.read(\"abc\")\n# s1 + s2\n# s3 + s4\n# s5 + s6\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3842, "user_id": 2216929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1cfa9e99112a82bc03a57d97d09e7217?s=128&d=identicon&r=PG", "display_name": "kaybee99", "link": "https://stackoverflow.com/users/2216929/kaybee99"}, "is_accepted": false, "score": 0, "last_activity_date": 1432122868, "creation_date": 1432122868, "answer_id": 30348935, "question_id": 30348726, "link": "https://stackoverflow.com/questions/30348726/newlines-within-an-array/30348935#30348935", "title": "Newlines within an array", "body": "<p>I'll assume you mean <code>arr = [s1, s2, s3, s4, s5, s6]</code></p>\n\n<p>Try</p>\n\n<pre><code>your_file.puts arr[0] + \" + \" + arr[1]\nyour_file.puts\nyour_file.puts arr[2]  + \" + \" +  arr[3]\nyour_file.puts\nyour_file.puts arr[4]  + \" + \" +  arr[5]\n</code></pre>\n\n<p>The blank <code>puts</code>s will add newlines between each row</p>\n"}, {"tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 1, "last_activity_date": 1432123439, "last_edit_date": 1432123439, "creation_date": 1432122968, "answer_id": 30348970, "question_id": 30348726, "link": "https://stackoverflow.com/questions/30348726/newlines-within-an-array/30348970#30348970", "title": "Newlines within an array", "body": "<pre><code>&gt; arr = [\"s1\" , \"s2\" , \"s3\" , \"s4\" , \"s5\" , \"s6\"]\n&gt; arr.each_slice(2){|a| p \"#{a[0]} + #{a[1]}\"}\n#output:\n\"s1 + s2\"\n\"s3 + s4\"\n\"s5 + s6\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "is_accepted": false, "score": 0, "last_activity_date": 1432123372, "creation_date": 1432123372, "answer_id": 30349103, "question_id": 30348726, "link": "https://stackoverflow.com/questions/30348726/newlines-within-an-array/30349103#30349103", "title": "Newlines within an array", "body": "<pre><code>arr = %w(s1 s2 s3 s4 s5 s6)\nwhile arr.length != 0\n    puts arr.shift(2).join(\"+\")\nend\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>s1+s2\ns3+s4\ns5+s6\n</code></pre>\n"}], "owner": {"reputation": 299, "user_id": 4263820, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fae12d17d6a02d0d7cf958a226f62467?s=128&d=identicon&r=PG&f=1", "display_name": "harvey", "link": "https://stackoverflow.com/users/4263820/harvey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 1, "answer_count": 4, "score": 0, "last_activity_date": 1432123439, "creation_date": 1432122301, "question_id": 30348726, "link": "https://stackoverflow.com/questions/30348726/newlines-within-an-array", "title": "Newlines within an array", "body": "<p>I build an array as this :</p>\n\n<pre><code>arr = [s1 + s2 + s3 + s4 + s5 + s6]\n</code></pre>\n\n<p>I want to write that array into an HTML file. If I do, all elements of the array will be printed in line.</p>\n\n<p>Now, I would like them to be written with new lines in between, like this :</p>\n\n<p>s1 + s2</p>\n\n<p>s3 + s4</p>\n\n<p>s5 + s6</p>\n"}, {"tags": ["ruby", "file", "http", "upload", "multipart"], "comments": [{"owner": {"reputation": 551, "user_id": 211716, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/be443b085eb5281638d369c5241f641d?s=128&d=identicon&r=PG", "display_name": "Peter Giacomo Lombardo", "link": "https://stackoverflow.com/users/211716/peter-giacomo-lombardo"}, "edited": false, "score": 0, "creation_date": 1432138920, "post_id": 30348673, "comment_id": 48802641, "body": "What&#39;s the error when you are using a json string?"}, {"owner": {"reputation": 261, "user_id": 770255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30d7287dbaa10d94e9b414acdef2e596?s=128&d=identicon&r=PG", "display_name": "Adam Musial-Bright", "link": "https://stackoverflow.com/users/770255/adam-musial-bright"}, "reply_to_user": {"reputation": 551, "user_id": 211716, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/be443b085eb5281638d369c5241f641d?s=128&d=identicon&r=PG", "display_name": "Peter Giacomo Lombardo", "link": "https://stackoverflow.com/users/211716/peter-giacomo-lombardo"}, "edited": false, "score": 0, "creation_date": 1432139659, "post_id": 30348673, "comment_id": 48803095, "body": "sadly I just get a INTERNAL_SERVER_ERROR from the webservice, so no real hint, sorry"}], "answers": [{"tags": [], "owner": {"reputation": 261, "user_id": 770255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30d7287dbaa10d94e9b414acdef2e596?s=128&d=identicon&r=PG", "display_name": "Adam Musial-Bright", "link": "https://stackoverflow.com/users/770255/adam-musial-bright"}, "is_accepted": false, "score": 0, "last_activity_date": 1432139538, "creation_date": 1432139538, "answer_id": 30355510, "question_id": 30348673, "link": "https://stackoverflow.com/questions/30348673/post-multipart-file-upload-with-json-text-and-files-binary-as-parts-in-ruby/30355510#30355510", "title": "Post Multipart file upload with json (text) and files (binary) as parts in Ruby", "body": "<p>I did find a solution myself by using <strong>StringIO</strong>:</p>\n\n<pre><code>metadata_file = StringIO.new(metadata_as_json_string)\n\nFile.open(file_path) do |image|\n  request = Net::HTTP::Post::Multipart.new(\n  url.path,\n  'metadata' =&gt; UploadIO.new(metadata_file, \"application/json\"),\n  'attachment' =&gt; UploadIO.new(image, \"image/jpeg\", \"image.jpg\")\n)\n</code></pre>\n\n<p>Anyway thank you for your time</p>\n"}], "owner": {"reputation": 261, "user_id": 770255, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/30d7287dbaa10d94e9b414acdef2e596?s=128&d=identicon&r=PG", "display_name": "Adam Musial-Bright", "link": "https://stackoverflow.com/users/770255/adam-musial-bright"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 544, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432139538, "creation_date": 1432122169, "question_id": 30348673, "link": "https://stackoverflow.com/questions/30348673/post-multipart-file-upload-with-json-text-and-files-binary-as-parts-in-ruby", "title": "Post Multipart file upload with json (text) and files (binary) as parts in Ruby", "body": "<p>I'm almost done with a multipart file upload but not quite. The API I am using requires two parts: a meta description (Json) and a file (File).</p>\n\n<p>Here some of the Code:</p>\n\n<pre><code>File.open(file_path) do |image|\n  request = Net::HTTP::Post::Multipart.new(\n    url.path,\n    'metadata' =&gt; metadata_as_json_string,\n    'attachment' =&gt; UploadIO.new(image, \"image/jpeg\", \"image.jpg\")\n  )\n</code></pre>\n\n<p>The trouble I am having is with the 'metadata' part (metadata_as_json_string). Without it everything works fine, but the API requires meta information as json. It works if I save the json content in a file and use it as metadata-part. But my content is not coming from a file. </p>\n\n<p>Any ideas how to provide the metadata without previously saving it in a file?</p>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex"], "comments": [{"owner": {"reputation": 11682, "user_id": 794380, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tLc9e.jpg?s=128&g=1", "display_name": "Idan Arye", "link": "https://stackoverflow.com/users/794380/idan-arye"}, "edited": false, "score": 0, "creation_date": 1432123827, "post_id": 30348645, "comment_id": 48790909, "body": "It won&#39;t find <code>ipc-zhb790-r-br-01</code> because the regex is <code>\\bzhb\\b</code> so it&#39;s looking for a word boundary after <code>zhb</code> but find <code>7</code> instead."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4919563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3309b4d3df41e6966bad6a6536e3049f?s=128&d=identicon&r=PG&f=1", "display_name": "orcaninja", "link": "https://stackoverflow.com/users/4919563/orcaninja"}, "edited": false, "score": 0, "creation_date": 1432125159, "post_id": 30349471, "comment_id": 48791923, "body": "ok thanks but i got also something like wip or sgl and more how can i filter them without an if loop for every word"}, {"owner": {"reputation": 13, "user_id": 4919563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3309b4d3df41e6966bad6a6536e3049f?s=128&d=identicon&r=PG&f=1", "display_name": "orcaninja", "link": "https://stackoverflow.com/users/4919563/orcaninja"}, "edited": false, "score": 0, "creation_date": 1432126036, "post_id": 30349471, "comment_id": 48792640, "body": "i got something like that in the txt file  zhb440 zhb440 izhh550 and im looking for the zhb&#39;s and just want to print the zhb&#39;s out how can i do that?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1432143545, "post_id": 30349471, "comment_id": 48805316, "body": "This is very heavily Perl-accented Ruby here. A more Ruby solution would be <code>match  = line[&#47;...&#47;].to_s</code> which avoids a lot of the <code>if</code>, <code>=~</code> and bizarro <code>$~</code> stuff."}], "tags": [], "owner": {"reputation": 4551, "user_id": 3790360, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/ef9805061faba2c8d3d95a1929702294?s=128&d=identicon&r=PG&f=1", "display_name": "Andie2302", "link": "https://stackoverflow.com/users/3790360/andie2302"}, "is_accepted": false, "score": 0, "last_activity_date": 1432126969, "last_edit_date": 1432126969, "creation_date": 1432124381, "answer_id": 30349471, "question_id": 30348645, "link": "https://stackoverflow.com/questions/30348645/switch-case-with-regex-in-ruby/30349471#30349471", "title": "Switch case with regex in Ruby?", "body": "<p>To match all words containing <code>zhb</code> in:<br>  <code>zhb440 zhb440 izhh550 ipc-zhb790-r-br-01</code><br>you can use:<br></p>\n\n<pre><code>\\S*?(?:zhb)\\S*\n\nif line =~ /\\S*?(?:zhb)\\S*/\n    match = $~[1]\nelse\n    match = \"\"\nend\n</code></pre>\n\n<p><a href=\"http://rubular.com/r/z1qWIrDYSU\" rel=\"nofollow\">See the DEMO</a></p>\n"}, {"comments": [{"owner": {"reputation": 195, "user_id": 1298928, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/60f7486464bf9418b6bfbdc3f0b3f439?s=128&d=identicon&r=PG", "display_name": "emvee", "link": "https://stackoverflow.com/users/1298928/emvee"}, "edited": false, "score": 0, "creation_date": 1432147975, "post_id": 30356497, "comment_id": 48807899, "body": "Also you can use an array to hold your other search criteria instead of only one from the user input. Then nest a each loop that will grep each search criteria from the array."}], "tags": [], "owner": {"reputation": 195, "user_id": 1298928, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/60f7486464bf9418b6bfbdc3f0b3f439?s=128&d=identicon&r=PG", "display_name": "emvee", "link": "https://stackoverflow.com/users/1298928/emvee"}, "is_accepted": true, "score": 0, "last_activity_date": 1432146601, "last_edit_date": 1432146601, "creation_date": 1432142888, "answer_id": 30356497, "question_id": 30348645, "link": "https://stackoverflow.com/questions/30348645/switch-case-with-regex-in-ruby/30356497#30356497", "title": "Switch case with regex in Ruby?", "body": "<p>Is this what you were looking for? this searches all strings by user given input in regex form that is case insensitive..</p>\n\n<pre><code>words = []\n\nprint \"Please enter a word to search the braslist: \"\ninput = gets.chomp\n\n#Open text file in read mode \nFile.open(\"braslist.txt\", \"r+\") do |f| \n    f.each do |line| \n        words += line.split(\" \").grep(/#{input}/i)\n    end\nend \n\nputs \"#{words.length} words found!\"\nputs words\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4919563, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3309b4d3df41e6966bad6a6536e3049f?s=128&d=identicon&r=PG&f=1", "display_name": "orcaninja", "link": "https://stackoverflow.com/users/4919563/orcaninja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "accepted_answer_id": 30356497, "answer_count": 2, "score": 1, "last_activity_date": 1432197208, "creation_date": 1432122090, "last_edit_date": 1432197208, "question_id": 30348645, "link": "https://stackoverflow.com/questions/30348645/switch-case-with-regex-in-ruby", "title": "Switch case with regex in Ruby?", "body": "<p>I made a Ruby script which uses a regex to cut line from a file and paste it in a new file. That part works fine. Now I want to enter a region into the console and the output should show me just the region which i typed in before.</p>\n\n<p>For example I'm looking for this \"ipc-abc-01\" and type abc in, now it should show me all entries with abc. </p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>found = 0\nwords = [] \n\nputs \"Please enter a word to search the list\"\ninput = gets.chomp\n\n#Open text file in read mode \nFile.open(\"list.txt\", \"r+\") do |f|\n\n  f.each do |line|\n   if m = line.match( /\\b#{input}\\b/i )\n      puts \"#{m[0]} \"\n      # ... etc.\n      found = 1\n    end\n  end\nend \n</code></pre>\n"}, {"tags": ["ruby", "feed", "feedjira"], "answers": [{"tags": [], "owner": {"reputation": 4890, "user_id": 3751845, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4b51d8d32d17d1d0a4200f68e5941517?s=128&d=identicon&r=PG&f=1", "display_name": "NaN", "link": "https://stackoverflow.com/users/3751845/nan"}, "is_accepted": true, "score": 1, "last_activity_date": 1438174741, "creation_date": 1438174741, "answer_id": 31701123, "question_id": 30348596, "link": "https://stackoverflow.com/questions/30348596/feedjira-feed-update-returns-duplicates/31701123#31701123", "title": "Feedjira: Feed update returns duplicates", "body": "<p>The updated functionality was removed from feedjira due to serious problems. See </p>\n\n<ul>\n<li>(commit) <a href=\"https://github.com/feedjira/feedjira/commit/6f56516934a9bdb8691f2bbe98be0f2b7c25b7ea\" rel=\"nofollow\">https://github.com/feedjira/feedjira/commit/6f56516934a9bdb8691f2bbe98be0f2b7c25b7ea</a></li>\n<li>(discussion) <a href=\"https://github.com/feedjira/feedjira/issues/218\" rel=\"nofollow\">https://github.com/feedjira/feedjira/issues/218</a></li>\n</ul>\n"}], "owner": {"reputation": 4890, "user_id": 3751845, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4b51d8d32d17d1d0a4200f68e5941517?s=128&d=identicon&r=PG&f=1", "display_name": "NaN", "link": "https://stackoverflow.com/users/3751845/nan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 31701123, "answer_count": 1, "score": 1, "last_activity_date": 1438174741, "creation_date": 1432121983, "last_edit_date": 1432122345, "question_id": 30348596, "link": "https://stackoverflow.com/questions/30348596/feedjira-feed-update-returns-duplicates", "title": "Feedjira: Feed update returns duplicates", "body": "<p>I am trying to print rss/atom feed updates using ruby. Feedjira seems to be the best bet for this. Unfortunately the update feature does not seem to work properly. I get duplicate entries.</p>\n\n<p>Here is a simple example that produces the problem:</p>\n\n<pre><code>require 'feedjira'\nrequire 'pp'\n\nfeed = Feedjira::Feed.fetch_and_parse \"http://lorem-rss.herokuapp.com/feed?unit=second&amp;interval=10\"\nloop do\n    feed = Feedjira::Feed.update(feed)\n    pp feed.new_entries\n    sleep 20\nend\n</code></pre>\n\n<p>Any suggestions? Maybe other libraries? Or am I missing something important when using Feedjira?</p>\n\n<p>There a several questions around this topic for Feedzirra the former name for Feedjira, but the update feature seems to be a new feature: <a href=\"http://feedjira.com/updating-feeds.html\" rel=\"nofollow\">http://feedjira.com/updating-feeds.html</a></p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 1378, "user_id": 1079225, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b008a4a10da1412e3fcf64c4de6ab76f?s=128&d=identicon&r=PG&f=1", "display_name": "zuba", "link": "https://stackoverflow.com/users/1079225/zuba"}, "edited": false, "score": 0, "creation_date": 1432128043, "post_id": 30348707, "comment_id": 48794233, "body": "Ok, I see that it works for Foo::Bar, but it doesn&#39;t for ActiveRecord::Base <code>irb(main):001:0&gt; ActiveRecord.send(:remove_const, :Base) NameError: uninitialized constant ActiveRecord::Core::ClassMethods::Base</code> or <code>irb(main):002:0&gt; Object.const_get(:ActiveRecord).send(:const_delete, :Base) NoMethodError: undefined method &#39;const_delete&#39; for ActiveRecord:Module</code> Is that happens because ActiveRecord undefines :const_delete method?"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "reply_to_user": {"reputation": 1378, "user_id": 1079225, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b008a4a10da1412e3fcf64c4de6ab76f?s=128&d=identicon&r=PG&f=1", "display_name": "zuba", "link": "https://stackoverflow.com/users/1079225/zuba"}, "edited": false, "score": 0, "creation_date": 1432130305, "post_id": 30348707, "comment_id": 48796116, "body": "Well, ActiveRecord is actually a rather complex thing. It includes other modules and heavily uses meta-programming. As such, it can be difficult to manipulate. As for the typo in my answer (the <code>const_delete</code>), I just fixed it."}], "tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 11, "last_activity_date": 1432128975, "last_edit_date": 1432128975, "creation_date": 1432122250, "answer_id": 30348707, "question_id": 30348581, "link": "https://stackoverflow.com/questions/30348581/how-to-undefine-namespaced-class-in-ruby/30348707#30348707", "title": "How to undefine namespaced class in Ruby?", "body": "<p>Constants are defined in their respective parent module, with top-level constants being defined on the <code>Object</code> class.</p>\n\n<p>Thus, <code>ActiveRecord::Base</code> is a constant(<code>Base</code>) which is defined on the <code>ActiveRecord</code> module. Now, in order to remove this constant, you have to call the <code>remove_const</code> method on the <code>ActiveRecord</code> module:</p>\n\n<pre><code>ActiveRecord.send(:remove_const, :Base)\n</code></pre>\n\n<p>Alternatively, you could also traverse the path directly from <code>Object</code>, i.e.</p>\n\n<pre><code>Object.const_get(:ActiveRecord).send(:remove_const, :Base)\n</code></pre>\n"}], "owner": {"reputation": 1378, "user_id": 1079225, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b008a4a10da1412e3fcf64c4de6ab76f?s=128&d=identicon&r=PG&f=1", "display_name": "zuba", "link": "https://stackoverflow.com/users/1079225/zuba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1022, "favorite_count": 1, "accepted_answer_id": 30348707, "answer_count": 1, "score": 3, "last_activity_date": 1432128975, "creation_date": 1432121929, "last_edit_date": 1495541799, "question_id": 30348581, "link": "https://stackoverflow.com/questions/30348581/how-to-undefine-namespaced-class-in-ruby", "title": "How to undefine namespaced class in Ruby?", "body": "<p>I can undefine Bar (<a href=\"https://stackoverflow.com/questions/11503558/how-to-undefine-class-in-ruby\">How to undefine class in Ruby?</a>), but how to undefine Foo::Bar ?</p>\n\n<pre><code>irb(main):266:0&gt; Object.send :remove_const, :ActiveRecord::Base\nTypeError: :ActiveRecord is not a class/module\n\nirb(main):267:0&gt; Object.send :remove_const, :\"ActiveRecord::Base\"\nNameError: `ActiveRecord::Base' is not allowed as a constant name\n\nirb(main):269:0&gt; module ActiveRecord; Object.send :remove_const, :Base; end\nNameError: constant Object::Base not defined\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1432121933, "post_id": 30348469, "comment_id": 48789565, "body": "is purchasedate on the controller params?"}, {"owner": {"reputation": 39, "user_id": 4844684, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/D2J2T.jpg?s=128&g=1", "display_name": "kirankumar", "link": "https://stackoverflow.com/users/4844684/kirankumar"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1432123276, "post_id": 30348469, "comment_id": 48790503, "body": "not updated in controller params"}], "answers": [{"tags": [], "owner": {"reputation": 591, "user_id": 4920274, "user_type": "registered", "accept_rate": 24, "profile_image": "https://lh5.googleusercontent.com/-haQrzJocSP0/AAAAAAAAAAI/AAAAAAAACEY/ZJXZhmgRYys/photo.jpg?sz=128", "display_name": "Sathibabu P", "link": "https://stackoverflow.com/users/4920274/sathibabu-p"}, "is_accepted": false, "score": 0, "last_activity_date": 1432127061, "last_edit_date": 1432127061, "creation_date": 1432123566, "answer_id": 30349187, "question_id": 30348469, "link": "https://stackoverflow.com/questions/30348469/i-want-purchasedate-in-date-field-in-edit-form/30349187#30349187", "title": "I want Purchasedate in Date field in Edit form", "body": "<p><code>&lt;%= f.text_field :purchasedate ,:value =&gt; @purchasedate %&gt;</code></p>\n\n<p>use <code>:value =&gt;  @user.purchasedate</code> instead of <code>:value =&gt; @purchasedate</code></p>\n"}], "owner": {"reputation": 39, "user_id": 4844684, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/D2J2T.jpg?s=128&g=1", "display_name": "kirankumar", "link": "https://stackoverflow.com/users/4844684/kirankumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 22, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432127061, "creation_date": 1432121609, "last_edit_date": 1432122267, "question_id": 30348469, "link": "https://stackoverflow.com/questions/30348469/i-want-purchasedate-in-date-field-in-edit-form", "title": "I want Purchasedate in Date field in Edit form", "body": "<p>The below fields \n1.Name\n2.gender\n3.price\n4.email\n5.payment </p>\n\n<p>All are stored in database. But Purchase date is not stored in database. The all fields are showed in Edit user form, except purchase date is not showed.</p>\n\n<p><strong>_form.html.erb</strong></p>\n\n<pre><code>      &lt;%= form_for(@user, :html =&gt; {:multipart =&gt; true}) do |f| %&gt;\n  &lt;% if @user.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(@user.errors.count, \"error\") %&gt; prohibited this user from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% @user.errors.full_messages.each do |msg| %&gt;\n        &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n&lt;div class=\"container-fluid\"&gt;\n  &lt;div class=\"content\"&gt;\n\n    &lt;div class=\"row\"&gt;\n           &lt;div class=\"col-md-6\"&gt;\n            &lt;div class=\"well well-sm\"&gt;\n\n                &lt;form class=\"form-inline\" role=\"form\"&gt;\n                    &lt;fieldset&gt;\n                        &lt;legend class=\"text-center header\"&gt;New user&lt;/legend&gt;\n\n                        &lt;div class=\"form-group\"&gt;\n\n                            &lt;div class=\"col-md-8\"&gt;\n                              &lt;%= f.label :name %&gt;\n                              &lt;%= f.text_field :name %&gt;\n                            &lt;/div&gt;\n                          &lt;/div&gt;\n                        &lt;div class=\"form-group\"&gt;\n\n                            &lt;div class=\"col-md-8\"&gt;\n                              &lt;%= f.label :email %&gt;\n                              &lt;%= f.text_field :email %&gt;\n                           &lt;/div&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"form-group\"&gt;\n                               &lt;div class=\"col-md-8\"&gt;\n                              &lt;%= f.label :price %&gt;\n                              &lt;%= f.text_field :price %&gt;\n                            &lt;/div&gt;    \n                        &lt;/div&gt;   \n                &lt;div class=\"form-group\"&gt;\n                   &lt;div class=\"col-md-8 gender\"&gt;\n                          Gender:&lt;br&gt; \n                           &lt;%= f.radio_button(:gender, \"Male\")%&gt;\n                          &lt;%= f.label(:gender_option1, \"Male\") %&gt;\n                            &lt;%= f.radio_button(:gender, \"Female\")%&gt;\n                            &lt;%= f.label(:gender_option2, \"Female\") %&gt;\n                        &lt;/div&gt;\n                &lt;/div&gt;\n              &lt;div class=\"form-group\"&gt;\n\n                          &lt;div class=\"col-md-8 gender\"&gt;\n                             Payment:&lt;br&gt; \n                            &lt;%= f.check_box(:payment) %&gt;\n                            &lt;%= f.label(:Debitcard )%&gt;\n                            &lt;%= f.check_box(:payment)%&gt;\n                            &lt;%= f.label(:Creditcard) %&gt;\n                            &lt;%= f.check_box(:payment) %&gt;\n                            &lt;%= f.label(:cashondelivery)%&gt; \n                          &lt;/div&gt;\n              &lt;/div&gt;\n            &lt;div class=\"form-group\"&gt;\n\n                            &lt;div class=\"col-md-8\"&gt;\n                                &lt;%= f.label :image %&gt;&lt;br /&gt;\n                                 &lt;%= f.file_field :image %&gt;\n                            &lt;/div&gt;\n                &lt;/div&gt;\n            &lt;div class=\"form-group\"&gt;\n\n                  &lt;div class=\"col-md-8\"&gt;\n                        &lt;%= f.label :purchasedate %&gt;&lt;br /&gt;\n                        &lt;%= f.text_field :purchasedate ,:value =&gt; @purchasedate %&gt;\n                  &lt;/div&gt;\n            &lt;/div&gt;\n              &lt;div class=\"form-group\"&gt;\n                      &lt;div class=\"col-md-12 text-center\"&gt;\n                           &lt;%= f.submit %&gt;\n                       &lt;/div&gt;\n               &lt;/div&gt;\n                  &lt;/fieldset&gt;\n                &lt;/form&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>schema.rb</strong></p>\n\n<pre><code>    create_table \"users\", :force =&gt; true do |t|\n    t.string   \"name\"\n    t.string   \"email\"\n    t.datetime \"created_at\",         :null =&gt; false\n    t.datetime \"updated_at\",         :null =&gt; false\n    t.string   \"image_file_name\"\n    t.string   \"image_content_type\"\n    t.integer  \"image_file_size\"\n    t.datetime \"image_updated_at\"\n    t.string   \"gender\"\n    t.integer  \"price\"\n    t.string   \"payment\"\n    t.date     \"purchasedate\"\n   end\nend\n</code></pre>\n\n<p>**Purchase date **</p>\n\n<pre><code>&lt;div class=\"col-md-8\"&gt;\n   &lt;%= f.label :purchasedate %&gt;&lt;br /&gt;\n   &lt;%= f.text_field :purchasedate ,:value =&gt; @purchasedate %&gt;\n![enter image description here][1] &lt;/div&gt;\n</code></pre>\n\n<p>I want to store purchase date in database and it's value displayed in Edit user form. Please help me.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms"], "comments": [{"owner": {"reputation": 1133, "user_id": 4840615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ObOwb.jpg?s=128&g=1", "display_name": "Gaurav Gupta", "link": "https://stackoverflow.com/users/4840615/gaurav-gupta"}, "edited": false, "score": 0, "creation_date": 1432122990, "post_id": 30348189, "comment_id": 48790335, "body": "Could you show your users_controller code."}, {"owner": {"reputation": 2333, "user_id": 695701, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/26b26b7d446ad5248e330f8ac42e19d7?s=128&d=identicon&r=PG", "display_name": "fes", "link": "https://stackoverflow.com/users/695701/fes"}, "reply_to_user": {"reputation": 1133, "user_id": 4840615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ObOwb.jpg?s=128&g=1", "display_name": "Gaurav Gupta", "link": "https://stackoverflow.com/users/4840615/gaurav-gupta"}, "edited": false, "score": 0, "creation_date": 1432123473, "post_id": 30348189, "comment_id": 48790648, "body": "I added them but they&#39;re basically empty and not implemented. I am just testing the output upon submission. The ProfileController is where I display these attributes and not on the User creation/edit page."}, {"owner": {"reputation": 1133, "user_id": 4840615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ObOwb.jpg?s=128&g=1", "display_name": "Gaurav Gupta", "link": "https://stackoverflow.com/users/4840615/gaurav-gupta"}, "edited": false, "score": 0, "creation_date": 1432124178, "post_id": 30348189, "comment_id": 48791145, "body": "You are using &lt;%= form_for(@user) do |f| %&gt; when you submit this, this will look for users update action in users_controller but it is empty, firstly set up your users_controller"}, {"owner": {"reputation": 2333, "user_id": 695701, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/26b26b7d446ad5248e330f8ac42e19d7?s=128&d=identicon&r=PG", "display_name": "fes", "link": "https://stackoverflow.com/users/695701/fes"}, "reply_to_user": {"reputation": 1133, "user_id": 4840615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ObOwb.jpg?s=128&g=1", "display_name": "Gaurav Gupta", "link": "https://stackoverflow.com/users/4840615/gaurav-gupta"}, "edited": false, "score": 0, "creation_date": 1432134051, "post_id": 30348189, "comment_id": 48799186, "body": "When you mentioned this comment, I had a think about what was going on  so I adjusted my UserController and moved everything to user and it worked the way I had wanted. The answer below is not really the accepted answer. However is there anyway to do have a profile route in user which also acts as an update? From what I have seen the only way I could possibly do this is to have edit?form=profile and have templates in there."}], "answers": [{"comments": [{"owner": {"reputation": 2333, "user_id": 695701, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/26b26b7d446ad5248e330f8ac42e19d7?s=128&d=identicon&r=PG", "display_name": "fes", "link": "https://stackoverflow.com/users/695701/fes"}, "edited": false, "score": 0, "creation_date": 1432125009, "post_id": 30349545, "comment_id": 48791800, "body": "I don&#39;t want it in the user controller but instead in the profile controller. I just want to update their attributes and none of their user details. Can the user be wrapped in the ProfileController instead? I&#39;ve set the route to be get       &#39;profile/:id&#39;        =&gt;  &#39;profile#edit&#39;"}, {"owner": {"reputation": 1133, "user_id": 4840615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ObOwb.jpg?s=128&g=1", "display_name": "Gaurav Gupta", "link": "https://stackoverflow.com/users/4840615/gaurav-gupta"}, "reply_to_user": {"reputation": 2333, "user_id": 695701, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/26b26b7d446ad5248e330f8ac42e19d7?s=128&d=identicon&r=PG", "display_name": "fes", "link": "https://stackoverflow.com/users/695701/fes"}, "edited": false, "score": 0, "creation_date": 1432125454, "post_id": 30349545, "comment_id": 48792173, "body": "You can do this by your profile controller just define url in your &#39;form_for&#39; that should be a url for your update action of profiles_controller and also you need to save(update) user to save your profiles."}], "tags": [], "owner": {"reputation": 1133, "user_id": 4840615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ObOwb.jpg?s=128&g=1", "display_name": "Gaurav Gupta", "link": "https://stackoverflow.com/users/4840615/gaurav-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1432124578, "creation_date": 1432124578, "answer_id": 30349545, "question_id": 30348189, "link": "https://stackoverflow.com/questions/30348189/rails-4-nested-form-many-to-many/30349545#30349545", "title": "Rails 4 - Nested Form (many to many)", "body": "<p>You can do like this :</p>\n\n<p>move form to your <strong>users/edit.html.erb</strong> and modify your users_controller as below</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  before_action :set_user, only: [:show, :edit, :update, :destroy]\n\n  def edit\n    @user.profiles.build\n  end\n\n\n  def update\n     if @user.update(user_params)\n       #redirect user where you want\n     end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_user\n      @user = User.find(params[:id])\n    end\n\n    def user_params\n      #permit user attributes along with profile attributes\n    end\n\n end\n</code></pre>\n"}], "owner": {"reputation": 2333, "user_id": 695701, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/26b26b7d446ad5248e330f8ac42e19d7?s=128&d=identicon&r=PG", "display_name": "fes", "link": "https://stackoverflow.com/users/695701/fes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432124578, "creation_date": 1432120910, "last_edit_date": 1432123410, "question_id": 30348189, "link": "https://stackoverflow.com/questions/30348189/rails-4-nested-form-many-to-many", "title": "Rails 4 - Nested Form (many to many)", "body": "<p>I have the following schema:</p>\n\n<pre><code>attribute\n----------\nid\nname\n\nprofile\n----------\nuser_id\nattribute_id\nvalue\n\nuser\n----------\nid\nname\n</code></pre>\n\n<p>What I am trying to do is display all the attributes and then for any attribute that the user does have in the profile it fills it in and an update can be performed. My background isn't ruby but I'm testing this framework for a proof of concept before possibly migrating an app.</p>\n\n<p>I have mapped the association like that on the guides on rubyonrails.org (the appointments example)</p>\n\n<pre><code>class Attribute &lt; ActiveRecord::Base\n    has_many :profiles\n    has_many :users, through: :profiles\nend\n\nclass Profile &lt; ActiveRecord::Base\n    belongs_to :attribute\n    belongs_to :user\nend\n\nclass User &lt; ActiveRecord::Base\n    has_many :profiles\n    has_many :attributes, through: :profiles\n\n    accepts_nested_attributes_for :profiles\nend\n</code></pre>\n\n<p>I took the approach of using nested forms but unable to pass the model through even though the accepts_nested_attributes_for has been set.</p>\n\n<pre><code>&lt;%= form_for(@user) do |f| %&gt;\n     &lt;% Attribute.all.each do |attribute| %&gt;\n            &lt;div&gt;\n                &lt;%= attribute.name %&gt;\n            &lt;/div&gt;\n            &lt;div&gt;\n                &lt;%= f.fields_for :profiles do |upp| %&gt;\n                    &lt;%= upp.hidden_field :user_id, :value =&gt; @user.id %&gt;\n                    &lt;%= upp.hidden_field :attribute_id, :value =&gt; @attribute.id %&gt;\n                    &lt;%= upp.text_field :value %&gt;\n                &lt;% end %&gt;\n            &lt;/div&gt;\n    &lt;% end %&gt;\n    &lt;div&gt;\n    &lt;%= f.submit %&gt;\n    &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>e.g</p>\n\n<pre><code>Attributes\nA\nB\nC\n</code></pre>\n\n<p>User has attribute A </p>\n\n<pre><code>A [\"hello world\"]\nB [             ]\nC [             ]\n</code></pre>\n\n<p>Attributes are dynamic, so if 2 new attributes are added, D and E would be shown as well</p>\n\n<pre><code>A [\"hello world\"]\nB [             ]\nC [             ]\nD [             ]\nE [             ]\n</code></pre>\n\n<p>How can I setup this form correctly so that it can be passed through as a model for saving? I assume the json would be something like</p>\n\n<pre><code>profile_attributes { [user_id:1 attribute_id:1 value:'hello world'], [user_id:1 attribute_id:2 value:''] }\n</code></pre>\n\n<p>I know the above form setup is not quite right but that is just one of several attempts I tried to see what it renders. </p>\n\n<p>I tried:</p>\n\n<pre><code>&lt;%= f.fields_for @user.profiles do |pp| %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I even tried manually setting the field as arrays (similiar to asp.net mvc):</p>\n\n<pre><code>id=user[profiles][user_id]\nid=user[profiles][attribute_id]\n</code></pre>\n\n<p>Controllers (they're empty shells at the moment, I just wanted to see the json output in the console)</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  before_action :set_user, only: [:show, :edit, :update, :destroy]\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_user\n      @user = User.find(params[:id])\n    end\nend\n\nclass ProfileController &lt; ApplicationController\n    def edit\n        @user = User.find(params[:id])\n    end\n\n    def update\n        respond_to do |format|\n         @user = User.find(params[:id])\n    end\n\n    private\n        def user_params\n            params.require(:user).permit(profiles_attributes: [:user_id, :attribute_id, :value])\n        end\n  end\nend\n</code></pre>\n\n<p>I've tried many different approaches but with no success. Sometimes the form shows duplicated fields with same values, sometimes the form is shown but value is blank and upon submission complains about unpermitted parameter yet it was set in the controller.</p>\n\n<p>Of course all the above can be done using javascript but I wanted to see if it was possible just using the model approach and nesting it.</p>\n"}, {"tags": ["ruby", "regex", "replace", "parentheses"], "answers": [{"tags": [], "owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "is_accepted": false, "score": 1, "last_activity_date": 1432119305, "creation_date": 1432119305, "answer_id": 30347604, "question_id": 30347456, "link": "https://stackoverflow.com/questions/30347456/regexp-replace-everything-between-parenthes/30347604#30347604", "title": "Regexp replace everything between parenthes", "body": "<p>Regex:</p>\n\n<pre><code>\\b(grouping\\()(?:\\([^()]*\\)|[^()])*\\)\n</code></pre>\n\n<p>Replacement string:</p>\n\n<pre><code>\\1foo)\n</code></pre>\n\n<p><a href=\"https://regex101.com/r/qM6hP2/1\" rel=\"nofollow\">DEMO</a></p>\n"}, {"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1432120653, "last_edit_date": 1432120653, "creation_date": 1432119466, "answer_id": 30347669, "question_id": 30347456, "link": "https://stackoverflow.com/questions/30347456/regexp-replace-everything-between-parenthes/30347669#30347669", "title": "Regexp replace everything between parenthes", "body": "<p>You can match balanced parentheses in Ruby with conditionals:</p>\n\n<pre><code>\\bgrouping(\\((?&gt;[^()]|(\\g&lt;1&gt;))*+\\))\n</code></pre>\n\n<p>See <a href=\"http://rubular.com/r/y2hgrkLKv5\" rel=\"nofollow\">demo</a></p>\n\n<p>Here is how you can do it in Ruby:</p>\n\n<pre><code>rx = /\\bgrouping(\\((?&gt;[^()]|(\\g&lt;1&gt;))*+\\))/\ntxt = \"grouping(elllo)\\n\\ngrouping(function() {\\n   console.log(\\\"hello\\\")\\n})\"\nputs txt.gsub(rx) { |m| m.gsub($~[1], '(NEWTEXT)') }\n</code></pre>\n\n<p>See <a href=\"https://ideone.com/Kil2aZ\" rel=\"nofollow\">IDEONE demo</a></p>\n"}], "owner": {"reputation": 57, "user_id": 2139779, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c869ad7215b04f62fef7beef094732fe?s=128&d=identicon&r=PG", "display_name": "user2139779", "link": "https://stackoverflow.com/users/2139779/user2139779"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 30347669, "answer_count": 2, "score": 1, "last_activity_date": 1432121921, "creation_date": 1432118917, "last_edit_date": 1432121921, "question_id": 30347456, "link": "https://stackoverflow.com/questions/30347456/regexp-replace-everything-between-parenthes", "title": "Regexp replace everything between parenthes", "body": "<p>I would like to know if anyone can help me figuring out a regex that replaces everything within parentheses.</p>\n\n<p>My examples are:</p>\n\n<pre><code>grouping(elllo)\n\ngrouping(function() {\n   console.log(\"hello\")\n})\n</code></pre>\n\n<p>So, I would like to replace everything inside <code>()</code> matching the <code>grouping</code>.</p>\n\n<p>I only went to this stage:</p>\n\n<pre><code>\\bgrouping(\\(([^)]+)\\))\n</code></pre>\n\n<p>However, it doesn't match all the newlines and stops on the first <code>)</code>.</p>\n"}, {"tags": ["ruby", "regex"], "answers": [{"comments": [{"owner": {"reputation": 1698, "user_id": 4587148, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjBAv.jpg?s=128&g=1", "display_name": "Sajan", "link": "https://stackoverflow.com/users/4587148/sajan"}, "edited": false, "score": 0, "creation_date": 1432119841, "post_id": 30347475, "comment_id": 48788121, "body": "It worked, is there anyway i can exclude the word containg any number like &quot;test1234&quot; ? i guess w means all except those \\n \\r etc"}, {"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "reply_to_user": {"reputation": 1698, "user_id": 4587148, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjBAv.jpg?s=128&g=1", "display_name": "Sajan", "link": "https://stackoverflow.com/users/4587148/sajan"}, "edited": false, "score": 0, "creation_date": 1432119969, "post_id": 30347475, "comment_id": 48788198, "body": "<code>\\w</code> means word character.ie a-z, A-Z, 0-9, _ . To exclude numbers, you could use <code>[a-zA-Z]*[aeiou][a-zA-Z]*</code>"}, {"owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "reply_to_user": {"reputation": 1698, "user_id": 4587148, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjBAv.jpg?s=128&g=1", "display_name": "Sajan", "link": "https://stackoverflow.com/users/4587148/sajan"}, "edited": false, "score": 0, "creation_date": 1432120231, "post_id": 30347475, "comment_id": 48788355, "body": "try <code>(?&lt;!\\S)[^\\d\\s]*[aeiou][^\\d\\s]*(?!\\S)</code>"}], "tags": [], "owner": {"reputation": 159902, "user_id": 3297613, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/KHhzd.jpg?s=128&g=1", "display_name": "Avinash Raj", "link": "https://stackoverflow.com/users/3297613/avinash-raj"}, "is_accepted": false, "score": 2, "last_activity_date": 1432118967, "creation_date": 1432118967, "answer_id": 30347475, "question_id": 30347434, "link": "https://stackoverflow.com/questions/30347434/ruby-regular-expression-not-matching-properly/30347475#30347475", "title": "Ruby Regular expression not matching properly", "body": "<p>You could use the below regex.</p>\n\n<pre><code>\\S*[aeiou]\\S*\n</code></pre>\n\n<p><code>\\S*</code> matches zero or more non-space characters. </p>\n\n<p>or</p>\n\n<pre><code>\\w*[aeiou]\\w*\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2902, "user_id": 374262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3849bbcdd7b248ee576805a2f2fa9f2?s=128&d=identicon&r=PG", "display_name": "yoavmatchulsky", "link": "https://stackoverflow.com/users/374262/yoavmatchulsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1432119143, "creation_date": 1432119143, "answer_id": 30347539, "question_id": 30347434, "link": "https://stackoverflow.com/questions/30347434/ruby-regular-expression-not-matching-properly/30347539#30347539", "title": "Ruby Regular expression not matching properly", "body": "<p>Try this:</p>\n\n<pre><code>\\b\\w*[aeiou]\\w*\\b\n</code></pre>\n\n<p><code>\\b</code> denotes a word boundry, so this regexp matches word bounty, zero or more letters, a vowel, zero or more letters and another word boundry</p>\n"}, {"comments": [{"owner": {"reputation": 1698, "user_id": 4587148, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjBAv.jpg?s=128&g=1", "display_name": "Sajan", "link": "https://stackoverflow.com/users/4587148/sajan"}, "edited": false, "score": 0, "creation_date": 1432119308, "post_id": 30347548, "comment_id": 48787752, "body": "I knew this but i wanted a RegExp. Thanks"}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "reply_to_user": {"reputation": 1698, "user_id": 4587148, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjBAv.jpg?s=128&g=1", "display_name": "Sajan", "link": "https://stackoverflow.com/users/4587148/sajan"}, "edited": false, "score": 0, "creation_date": 1432119355, "post_id": 30347548, "comment_id": 48787786, "body": "sure, this was just an alternative way to achieve what you wanted. :)"}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": true, "score": 2, "last_activity_date": 1432119167, "creation_date": 1432119167, "answer_id": 30347548, "question_id": 30347434, "link": "https://stackoverflow.com/questions/30347434/ruby-regular-expression-not-matching-properly/30347548#30347548", "title": "Ruby Regular expression not matching properly", "body": "<p>Alternatively you can also do something like:</p>\n\n<pre><code>\"test is 1234 and sky fly test1234\".split.find_all { |a| a =~ /[aeiou]/ }\n# =&gt; [\"test\", \"is\", \"and\", \"test1234\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 931, "user_id": 2751621, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QOZRK.jpg?s=128&g=1", "display_name": "emartinelli", "link": "https://stackoverflow.com/users/2751621/emartinelli"}, "is_accepted": false, "score": 1, "last_activity_date": 1432120089, "last_edit_date": 1432120089, "creation_date": 1432119508, "answer_id": 30347685, "question_id": 30347434, "link": "https://stackoverflow.com/questions/30347434/ruby-regular-expression-not-matching-properly/30347685#30347685", "title": "Ruby Regular expression not matching properly", "body": "<p>It will solve:</p>\n\n<pre><code>\\b\\w*[aeiou]+\\w*\\b\n</code></pre>\n\n<p><a href=\"https://www.debuggex.com/r/O-fU394iC5ErcSs7\" rel=\"nofollow\">https://www.debuggex.com/r/O-fU394iC5ErcSs7</a></p>\n\n<hr>\n\n<p>or you can substitute <code>\\w</code> by <code>\\S</code></p>\n\n<pre><code>\\b\\S*[aeiou]+\\S*\\b\n</code></pre>\n\n<p><a href=\"https://www.debuggex.com/r/RNE6Y6q1q5yPJbe-\" rel=\"nofollow\">https://www.debuggex.com/r/RNE6Y6q1q5yPJbe-</a></p>\n\n<hr>\n\n<p><code>\\b</code> - a word boundary</p>\n\n<p><code>\\w</code> - same as <code>[_a-zA-Z0-9]</code></p>\n\n<p><code>\\S</code> - a non-whitespace character</p>\n"}], "owner": {"reputation": 1698, "user_id": 4587148, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjBAv.jpg?s=128&g=1", "display_name": "Sajan", "link": "https://stackoverflow.com/users/4587148/sajan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 30347548, "answer_count": 4, "score": 0, "last_activity_date": 1432120089, "creation_date": 1432118856, "question_id": 30347434, "link": "https://stackoverflow.com/questions/30347434/ruby-regular-expression-not-matching-properly", "title": "Ruby Regular expression not matching properly", "body": "<p>I am trying to creat a RegEx to find words that contains any vowel.\nso far i have tried this </p>\n\n<pre><code>/(.*?\\S[aeiou].*?[\\s|\\.])/i\n</code></pre>\n\n<p>but i have not used RegEx much so its not working properly.\nfor example if i input \"test is 1234 and sky fly test1234\"\nit should match test , is, and, test1234 but showing\ntest, is,1234 and\nif put something else then different output.</p>\n"}, {"tags": ["ruby", "date"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1432226359, "post_id": 30346767, "comment_id": 48848429, "body": "Note this raises an exception when <code>d</code> is in January."}], "answers": [{"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": true, "score": 7, "last_activity_date": 1432118382, "creation_date": 1432118382, "answer_id": 30347244, "question_id": 30346767, "link": "https://stackoverflow.com/questions/30346767/ruby-iterate-over-days-in-previous-month/30347244#30347244", "title": "Ruby: Iterate over days in previous month", "body": "<pre><code>require 'date'\n\nd = Date.today &lt;&lt; 1 # &lt;&lt; 1 is one month earlier\n(Date.new(d.year, d.month, 1)..Date.new(d.year, d.month,-1)).each{|date| p date}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3842, "user_id": 2216929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1cfa9e99112a82bc03a57d97d09e7217?s=128&d=identicon&r=PG", "display_name": "kaybee99", "link": "https://stackoverflow.com/users/2216929/kaybee99"}, "edited": false, "score": 0, "creation_date": 1432119856, "post_id": 30347770, "comment_id": 48788134, "body": "Oh I see, as opposed to <code>..</code> which would include it? I think I&#39;d prefer to reference to date explicitly rather than just &#39;missing&#39; the first day of the month. Seems mistakes could me made quite easily"}, {"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "reply_to_user": {"reputation": 3842, "user_id": 2216929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1cfa9e99112a82bc03a57d97d09e7217?s=128&d=identicon&r=PG", "display_name": "kaybee99", "link": "https://stackoverflow.com/users/2216929/kaybee99"}, "edited": false, "score": 0, "creation_date": 1432120438, "post_id": 30347770, "comment_id": 48788490, "body": "This is optional, as long as you understand how it works, you can use anyone."}], "tags": [], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "is_accepted": false, "score": 2, "last_activity_date": 1432195051, "last_edit_date": 1432195051, "creation_date": 1432119699, "answer_id": 30347770, "question_id": 30346767, "link": "https://stackoverflow.com/questions/30346767/ruby-iterate-over-days-in-previous-month/30347770#30347770", "title": "Ruby: Iterate over days in previous month", "body": "<p>You also can use <code>...</code> exclude the end value.</p>\n\n<p>For example:</p>\n\n<pre><code>(1..5).to_a\n=&gt; [1, 2, 3, 4, 5]\n(1...5).to_a\n=&gt; [1, 2, 3, 4]\n</code></pre>\n\n<p>so you can write like this:</p>\n\n<pre><code>if d.month != 1\n   from_date = Date.new(d.year, d.month - 1, 1)\nelse\n   from_date = Date.new(d.year-1, -1)\nend\nto_date = Date.new(d.year, d.month)\n\n(from_date...to_date).map { |day| puts day}\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>2015-04-01\n2015-04-02\n2015-04-03\n......\n2015-04-29\n2015-04-30\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3842, "user_id": 2216929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1cfa9e99112a82bc03a57d97d09e7217?s=128&d=identicon&r=PG", "display_name": "kaybee99", "link": "https://stackoverflow.com/users/2216929/kaybee99"}, "is_accepted": false, "score": 0, "last_activity_date": 1432120687, "creation_date": 1432120687, "answer_id": 30348110, "question_id": 30346767, "link": "https://stackoverflow.com/questions/30346767/ruby-iterate-over-days-in-previous-month/30348110#30348110", "title": "Ruby: Iterate over days in previous month", "body": "<p>The <code>prev_day</code> function can also be used:</p>\n\n<pre><code>require 'date'\n\nd = Date.today\n\nfrom_date = Date.new(d.year, d.month - 1, 1)\nto_date = Date.new(d.year, d.month, 1).prev_day\n\nfrom_date..to_date.each do |day|\n    #Do stuff with day\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1432194257, "creation_date": 1432194257, "answer_id": 30367570, "question_id": 30346767, "link": "https://stackoverflow.com/questions/30346767/ruby-iterate-over-days-in-previous-month/30367570#30367570", "title": "Ruby: Iterate over days in previous month", "body": "<p>I would do it like this:</p>\n\n<pre><code>require 'date'\n\nd = Date.today &lt;&lt; 1\nstart = Date.new(d.year, d.month)\n(start...(start &gt;&gt; 1)).each { |d| p d }\n  #-&gt; #&lt;Date: 2015-04-01 ((2457114j,0s,0n),+0s,2299161j)&gt;\n  #   #&lt;Date: 2015-04-02 ((2457115j,0s,0n),+0s,2299161j)&gt;\n  #   ...\n  #   #&lt;Date: 2015-04-30 ((2457143j,0s,0n),+0s,2299161j)&gt;\n</code></pre>\n"}], "owner": {"reputation": 3842, "user_id": 2216929, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1cfa9e99112a82bc03a57d97d09e7217?s=128&d=identicon&r=PG", "display_name": "kaybee99", "link": "https://stackoverflow.com/users/2216929/kaybee99"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 748, "favorite_count": 0, "accepted_answer_id": 30347244, "answer_count": 4, "score": 1, "last_activity_date": 1432195051, "creation_date": 1432116997, "question_id": 30346767, "link": "https://stackoverflow.com/questions/30346767/ruby-iterate-over-days-in-previous-month", "title": "Ruby: Iterate over days in previous month", "body": "<p>I need to be able to loop through all days of the previous month and do something with the parsed day. This is what I have so far:</p>\n\n<pre><code>def dateTest\n\n    d = Date.parse(Time.now.to_s)\n\n    from_date = Date.new(d.year, d.month - 1, 1)\n    to_date = Date.new(d.year, d.month, -1)\n\n    from_date..to_date.each do |day|\n        #Do stuff with day\n    end\n\nend\n</code></pre>\n\n<p>My issue is I can't seem to get <code>to_date</code> to equal the last day of the previous month. I've read many similar questions but most of them seem more geared towards Rails, which won't help me in this case.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-4", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 2729, "user_id": 1856513, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a66ca1982dc4160d1a1129dbe9f6d31b?s=128&d=identicon&r=PG", "display_name": "Abhi", "link": "https://stackoverflow.com/users/1856513/abhi"}, "edited": false, "score": 0, "creation_date": 1432117927, "post_id": 30346551, "comment_id": 48786878, "body": "Yes. But this method is using in other models also. So statically I can&#39;t change the where statement. I updated the Qn with this.I need something like   where(:state_id =&gt; ?, nil) || ...something ?"}, {"owner": {"reputation": 2698, "user_id": 1845837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce8100e14c5b9dba0fc05df2d9aecda7?s=128&d=identicon&r=PG", "display_name": "uma", "link": "https://stackoverflow.com/users/1845837/uma"}, "reply_to_user": {"reputation": 2729, "user_id": 1856513, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a66ca1982dc4160d1a1129dbe9f6d31b?s=128&d=identicon&r=PG", "display_name": "Abhi", "link": "https://stackoverflow.com/users/1856513/abhi"}, "edited": false, "score": 0, "creation_date": 1432118188, "post_id": 30346551, "comment_id": 48787026, "body": "In this case you should use child_class.attribute_name which you are using to join with other model also."}], "tags": [], "owner": {"reputation": 2698, "user_id": 1845837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce8100e14c5b9dba0fc05df2d9aecda7?s=128&d=identicon&r=PG", "display_name": "uma", "link": "https://stackoverflow.com/users/1845837/uma"}, "is_accepted": false, "score": 3, "last_activity_date": 1432116446, "creation_date": 1432116446, "answer_id": 30346551, "question_id": 30346241, "link": "https://stackoverflow.com/questions/30346241/rails-postgres-error-activerecordstatementinvalid-exception-pgambiguouscol/30346551#30346551", "title": "Rails postgres error: ActiveRecord::StatementInvalid Exception: PG::AmbiguousColumn: ERROR: column reference &quot;sample_id&quot; is ambiguous", "body": "<p>Since you have sample id in users and projects both table that's why there is problem of ambiguity.</p>\n\n<p>I think that the following code will help you:</p>\n\n<pre><code>return where(\"users.sample_id IS NULL OR users.sample_id NOT IN (?)\", inactive_sample_ids)\n</code></pre>\n\n<p>or</p>\n\n<pre><code> return where(\"projects.sample_id IS NULL OR projects.sample_id NOT IN (?)\", inactive_sample_ids)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2729, "user_id": 1856513, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a66ca1982dc4160d1a1129dbe9f6d31b?s=128&d=identicon&r=PG", "display_name": "Abhi", "link": "https://stackoverflow.com/users/1856513/abhi"}, "is_accepted": true, "score": 1, "last_activity_date": 1432271046, "creation_date": 1432271046, "answer_id": 30388700, "question_id": 30346241, "link": "https://stackoverflow.com/questions/30346241/rails-postgres-error-activerecordstatementinvalid-exception-pgambiguouscol/30388700#30388700", "title": "Rails postgres error: ActiveRecord::StatementInvalid Exception: PG::AmbiguousColumn: ERROR: column reference &quot;sample_id&quot; is ambiguous", "body": "<p>Finally I managed to get rid of the ambiguity by using Arel.</p>\n\n<p>I changed my query as follows: </p>\n\n<pre><code>item_table = klass.arel_table # klass be User, Project etc\nwhere(item_table[:sample_id].eq(nil).or(item_table[:sample_id].not_in inactive_sample_ids).or(item_table[:sample_id].in active_sample_ids)) \n</code></pre>\n\n<p>Now actually what happens is Arel take care of the query by adding table_name.coulmn name itself according to which model I am calling the scope.</p>\n"}], "owner": {"reputation": 2729, "user_id": 1856513, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a66ca1982dc4160d1a1129dbe9f6d31b?s=128&d=identicon&r=PG", "display_name": "Abhi", "link": "https://stackoverflow.com/users/1856513/abhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1259, "favorite_count": 0, "accepted_answer_id": 30388700, "answer_count": 2, "score": 0, "last_activity_date": 1432271086, "creation_date": 1432115629, "last_edit_date": 1432271086, "question_id": 30346241, "link": "https://stackoverflow.com/questions/30346241/rails-postgres-error-activerecordstatementinvalid-exception-pgambiguouscol", "title": "Rails postgres error: ActiveRecord::StatementInvalid Exception: PG::AmbiguousColumn: ERROR: column reference &quot;sample_id&quot; is ambiguous", "body": "<p>I have a scope in the Rails User model (this scope is using every model):</p>\n\n<pre><code>scope :only_sample,                       -&gt; { only_sample_items }\n</code></pre>\n\n<p>and 'only_sample_items' method is:</p>\n\n<pre><code>return where(\"sample_id IS NULL OR sample_id NOT IN (?) OR sample_id IN (?)\", inactive_sample_ids, active_sample_ids)\n</code></pre>\n\n<p>When I am joining User with Projects table and getting this error. I know that sample_id is there in both users and projects table. This causes the ambiguity. </p>\n\n<p>Can anyone tell me for avoiding this error how can I modify the 'only_sample_items' method ?</p>\n"}, {"tags": ["ruby", "pdf", "command-line", "ubuntu-14.04", "pdfbox"], "answers": [{"comments": [{"owner": {"reputation": 163, "user_id": 1204887, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/e39855bf69e447bd20d707d1b9206458?s=128&d=identicon&r=PG", "display_name": "Subrahmanyam Konduri", "link": "https://stackoverflow.com/users/1204887/subrahmanyam-konduri"}, "edited": false, "score": 0, "creation_date": 1432118881, "post_id": 30346272, "comment_id": 48787488, "body": "Thanks Kurt Pfeifle for detailed answer. I tried your suggestions but still I am not able to extract images from the PDF I am checking (attached in question). I really don&#39;t have idea on how PDF stores images. I would appreciate if you could provide some references to worth looking."}, {"owner": {"reputation": 77029, "user_id": 1729265, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VMMeP.jpg?s=128&g=1", "display_name": "mkl", "link": "https://stackoverflow.com/users/1729265/mkl"}, "edited": false, "score": 0, "creation_date": 1432129510, "post_id": 30346272, "comment_id": 48795447, "body": "You talk about extracting images. Most people then assume you are talking about bitmap images. The images in your file are (at least partially) vector graphics."}, {"owner": {"reputation": 14213, "user_id": 398863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CNtJ.png?s=128&g=1", "display_name": "Amit Patel", "link": "https://stackoverflow.com/users/398863/amit-patel"}, "edited": false, "score": 0, "creation_date": 1432186029, "post_id": 30346272, "comment_id": 48821529, "body": "@Kurt Pfeifle nicely explained. Would you please suggest any other opensource solution other than mentioned tools/utilities which are more powerful in a sense that can extract text and images close to the PDF content?"}, {"owner": {"reputation": 77676, "user_id": 359307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/332a3083f92c35e7b0a5dd86a66df9f7?s=128&d=identicon&r=PG", "display_name": "Kurt Pfeifle", "link": "https://stackoverflow.com/users/359307/kurt-pfeifle"}, "reply_to_user": {"reputation": 14213, "user_id": 398863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CNtJ.png?s=128&g=1", "display_name": "Amit Patel", "link": "https://stackoverflow.com/users/398863/amit-patel"}, "edited": false, "score": 0, "creation_date": 1432193858, "post_id": 30346272, "comment_id": 48825476, "body": "@AmitPatel: Sorry, I do not understand your question. I don&#39;t know what you mean by <i>&quot;are more powerful in a sense that can extract text and images close to the PDF content&quot;</i>. Also, the comments section is not a place to ask a new, possibly unrelated question. If you have a question of your own, just start a new one and ask it."}, {"owner": {"reputation": 14213, "user_id": 398863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CNtJ.png?s=128&g=1", "display_name": "Amit Patel", "link": "https://stackoverflow.com/users/398863/amit-patel"}, "edited": false, "score": 0, "creation_date": 1432549072, "post_id": 30346272, "comment_id": 48955278, "body": "@Kurt Pfeifle I mean any alternate solution/tool that can give better results. Also could you please suggest what command with options should we use to get optimal result to extract text from <a href=\"https://www.dropbox.com/s/j6puqwubuj8qxf4/FEATURE_TOP.pdf?dl=0\" rel=\"nofollow noreferrer\">Sample 1</a> and <a href=\"https://www.dropbox.com/s/uo4zhou4571khka/SNARFS_AUSTIN.pdf?dl=0\" rel=\"nofollow noreferrer\">Sample 2</a>"}, {"owner": {"reputation": 77676, "user_id": 359307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/332a3083f92c35e7b0a5dd86a66df9f7?s=128&d=identicon&r=PG", "display_name": "Kurt Pfeifle", "link": "https://stackoverflow.com/users/359307/kurt-pfeifle"}, "reply_to_user": {"reputation": 14213, "user_id": 398863, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CNtJ.png?s=128&g=1", "display_name": "Amit Patel", "link": "https://stackoverflow.com/users/398863/amit-patel"}, "edited": false, "score": 0, "creation_date": 1432565015, "post_id": 30346272, "comment_id": 48964020, "body": "@AmitPatel: As I said -- please ask a new question!"}], "tags": [], "owner": {"reputation": 77676, "user_id": 359307, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/332a3083f92c35e7b0a5dd86a66df9f7?s=128&d=identicon&r=PG", "display_name": "Kurt Pfeifle", "link": "https://stackoverflow.com/users/359307/kurt-pfeifle"}, "is_accepted": true, "score": 4, "last_activity_date": 1432135504, "last_edit_date": 1432135504, "creation_date": 1432115702, "answer_id": 30346272, "question_id": 30345709, "link": "https://stackoverflow.com/questions/30345709/unable-to-extract-text-and-images-from-specific-pdf/30346272#30346272", "title": "Unable to extract text and images from specific PDF", "body": "<h1>1.</h1>\n\n<p><strong>Extracting text:</strong></p>\n\n<pre><code>pdftotext -layout the.pdf -\n</code></pre>\n\n<p>Extract all pages' text to <code>&lt;stdout&gt;</code>.</p>\n\n<pre><code>pdftotext -layout -nopgbrk the.pdf the-3-5.txt\n</code></pre>\n\n<p>Extract all pages' text to file <code>the.txt</code>, and don't insert these pesky <strong><code>^L</code></strong> characters signifying new pages.</p>\n\n<pre><code>pdftotext -f 3 -l 5 -layout the.pdf -\n</code></pre>\n\n<p>Extract pages' 3--5 text to the-3-5.txt.</p>\n\n<h1>2.</h1>\n\n<p><strong>Extracting images</strong></p>\n\n<pre><code>pdfimages -f 4 -l 7 -j the.pdf myprefix--\n</code></pre>\n\n<p>Extract all images from pages 4 through 7 as JPEGs (if possible!) and name them with the prefix <code>myprefix---</code>.</p>\n\n<p>If extracting as JPEGs is not possible, the images will be extracted as pure raster <code>PPM</code> or <code>PGM</code>.</p>\n\n<p>The latest versions of <code>pdfimages</code> (Poppler fork) lets you specify <code>-png</code> (and more) to get all images as PNGs.</p>\n\n<p>Using the latest version of <code>pdfimages</code> gives you these options:</p>\n\n<pre><code>$ pdfimages -h\n\n   pdfimages version 0.33.0\n   Copyright 2005-2015 The Poppler Developers - http://poppler.freedesktop.org\n   Copyright 1996-2011 Glyph &amp; Cog, LLC\n   Usage: pdfimages [options] &lt;PDF-file&gt; &lt;image-root&gt;\n     -f &lt;int&gt;       : first page to convert\n     -l &lt;int&gt;       : last page to convert\n     -png           : change the default output format to PNG\n     -tiff          : change the default output format to TIFF\n     -j             : write JPEG images as JPEG files\n     -jp2           : write JPEG2000 images as JP2 files\n     -jbig2         : write JBIG2 images as JBIG2 files\n     -ccitt         : write CCITT images as CCITT files\n     -all           : equivalent to -png -tiff -j -jp2 -jbig2 -ccitt\n     -list          : print list of images instead of saving\n     -opw &lt;string&gt;  : owner password (for encrypted files)\n     -upw &lt;string&gt;  : user password (for encrypted files)\n     -p             : include page numbers in output file names\n     -q             : don't print any messages or errors\n     [....]\n</code></pre>\n\n<p>What more image formats do you want? If you need other formats use ImageMagick's <code>convert</code> command.</p>\n\n<p>Also, there are no other \"formats\" embedded in PDFs.</p>\n\n<p>Basically, the only compression methods for images embedded in PDFs are:</p>\n\n<ul>\n<li>JPEG (then <code>/DCTDEcode</code> filter is mentioned as uncompression hint to the PDF viewer),</li>\n<li>JBIG2 (<code>/JBIG2Encode</code>),</li>\n<li>Fax compression (<code>CCITTFaxDecode</code>) and</li>\n<li>JPEG2000 (<code>JPXDecode</code>).</li>\n</ul>\n\n<p>All other images embedded in PDFs basically are pure raster data anyway (<code>PPM</code> or <code>PGM</code>), and their PDF-internal compression is one of the <em>other</em> standard compression methods available for general stream compression:</p>\n\n<ul>\n<li><code>/FlateDecode</code> (ZIP/Deflate algorithm),</li>\n<li><code>/LZWDecode</code> (Lempel-Ziv-Welch algorithm) and</li>\n<li><code>/RunLengthDecode</code>.</li>\n</ul>\n\n<hr>\n\n<h2>Update</h2>\n\n<p>I only now had time to look at your linked sample PDF, sorry.</p>\n\n<p>As @mkl wrote in his comment, what <em>looks</em> like an image <strong><em>isn't</em></strong> always an image in PDF technical parlance. For example, on your PDF's page 7 there is the (famous) tiger head. This is completely composed from vector elements, which are placed inline into the page's <code>/Contents</code> stream. \nThe same is true for the depicted chess board.</p>\n\n<p>I believe the tiger image was designed with the help some vector graphics program a few decades ago (Adobe Illustator?) when it had freshly been released, and exported to EPS. A PDF viewer in may cases has now way to identify inline vector elements (which could be simple horizontal lines) from other contents. Unless these vector elements are \"grouped\" into an XObject (which <code>pdfimages</code> would no be able to extract either, but which would help with manual isolation and extraction...)</p>\n\n<p>These vector elements cannot be automatically extracted by any (Free and Open Source Software, or gratis closed source software) tool I know.</p>\n\n<p>A \"real\" image in PDF parlance is a rectangle of pixel data. These are the only type of images which can be extracted by a tool like <code>pdfimages</code>.</p>\n"}], "owner": {"reputation": 163, "user_id": 1204887, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/e39855bf69e447bd20d707d1b9206458?s=128&d=identicon&r=PG", "display_name": "Subrahmanyam Konduri", "link": "https://stackoverflow.com/users/1204887/subrahmanyam-konduri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1431, "favorite_count": 1, "accepted_answer_id": 30346272, "answer_count": 1, "score": 2, "last_activity_date": 1432135504, "creation_date": 1432114244, "last_edit_date": 1432118679, "question_id": 30345709, "link": "https://stackoverflow.com/questions/30345709/unable-to-extract-text-and-images-from-specific-pdf", "title": "Unable to extract text and images from specific PDF", "body": "<p>Can anyone please let me know how I can extract all the text and images from a PDF. I am able to extract images in scenario like, which I created a PDF with few lines of text and 2 png images using Google Docs. But, I am unable to extract images from a sample <a href=\"https://www.dropbox.com/s/jgl1l1ytsfjngnv/example.pdf?dl=0\" rel=\"nofollow\">pdf</a>.</p>\n\n<p>I have tried with the following:</p>\n\n<p>In Ruby:</p>\n\n<p>1) \"pdf-reader\" gem, it is supporting extraction of only few formats of images.</p>\n\n<p>2) \"docsplit\" gem, it is only able to extract text and unable to extract images.</p>\n\n<p>Command-line utility:</p>\n\n<p>1) \"pdfimages\" tool, it is supporting extraction of only few formats of images.</p>\n\n<p>Java library:</p>\n\n<p>1) \"pdfbox\" library, it is supporting extraction of only few formats of images.</p>\n"}, {"tags": ["ruby", "selenium-webdriver", "cucumber", "capybara"], "answers": [{"tags": [], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "is_accepted": false, "score": 2, "last_activity_date": 1432113686, "last_edit_date": 1495539873, "creation_date": 1432113686, "answer_id": 30345472, "question_id": 30345180, "link": "https://stackoverflow.com/questions/30345180/cant-access-new-window-in-capybara/30345472#30345472", "title": "Can&#39;t access new window in Capybara", "body": "<p>So I found the answer, turns out it was a lot simpler than i was trying, credit goes to <a href=\"https://stackoverflow.com/users/2386548/keiran-betteley\">Keiran Betteley</a> and <a href=\"https://stackoverflow.com/questions/28416002/opening-a-new-tab-in-capybara-poltergeist?lq=1\">this</a> post</p>\n\n<pre><code>@session_1.open_new_window\n@session_1.switch_to_window(@session_1.windows.last)\n@session_1.visit(\"url\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 1, "last_activity_date": 1447206454, "creation_date": 1447206454, "answer_id": 33642945, "question_id": 30345180, "link": "https://stackoverflow.com/questions/30345180/cant-access-new-window-in-capybara/33642945#33642945", "title": "Can&#39;t access new window in Capybara", "body": "<p>Capybara has a number of methods for dealing with windows, and open_new_window returns the window it opened so there's no need to go looking through the list of all windows</p>\n\n<pre><code>@session1.within_window(@session_1.open_new_window) do\n  @sessuion1.visit(\"url\")\n  ... more actions performed in the new window\nend\n</code></pre>\n"}], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 999, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1534328449, "creation_date": 1432112973, "last_edit_date": 1534328449, "question_id": 30345180, "link": "https://stackoverflow.com/questions/30345180/cant-access-new-window-in-capybara", "title": "Can&#39;t access new window in Capybara", "body": "<p>I've been trying to access a new window (well tab) when using Capybara, but keep getting</p>\n\n<pre><code>Selenium::WebDriver::Error::NoSuchWindowError: no such window\n</code></pre>\n\n<p>My process and understanding so far is</p>\n\n<pre><code>@session_1 = Capybara::Session.new(:chrome)\n@session_1.visit(\"www.google.com\")\n</code></pre>\n\n<p>So at this stage i have google open. Now lets say i want to open google in a new tab/window</p>\n\n<pre><code>@session_1.open_new_window\n</code></pre>\n\n<p>This opens a new window, and to access those windows I can do</p>\n\n<pre><code>@session_1.windows\n</code></pre>\n\n<p>which returns an array of windows</p>\n\n<pre><code>[#&lt;Window @handle=\"CDwindow-09B6E81E-7874-4686-86A9-8BFB917E0F4F\"&gt;,\n#&lt;Window @handle=\"CDwindow-5DA14173-8D63-422A-BF98-39B7C2A5D2DB\"&gt;]\n</code></pre>\n\n<p>So as a test I wanted to check that latest windows url matches <code>about:blank</code></p>\n\n<pre><code>@new_tab = @session_1.windows.last\n# @new_tab = #&lt;Window @handle=\"CDwindow-5DA14173-8D63-422A-BF98-39B7C2A5D2DB\"&gt;\n\npage.within_window @new_tab do \n  expect(current_url).to eq('about:blank')\nend\n</code></pre>\n\n<p>It's here I get the error.</p>\n\n<p>What I would like to know is</p>\n\n<p>1) How to select the new tab</p>\n\n<p>2) how to open a new url within the new tab</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "render", "partials"], "answers": [{"comments": [{"owner": {"reputation": 2552, "user_id": 2558252, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/lW99E.jpg?s=128&g=1", "display_name": "nobe4", "link": "https://stackoverflow.com/users/2558252/nobe4"}, "edited": false, "score": 0, "creation_date": 1432113214, "post_id": 30345227, "comment_id": 48783364, "body": "all my files are in the <code>application</code> folder, I&#39;ve seen that this way they would be accessible without specifying the folder ..."}, {"owner": {"reputation": 4397, "user_id": 1945948, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ecf1cdd8eed500e1e1df86d036b69a7?s=128&d=identicon&r=PG&f=1", "display_name": "atw", "link": "https://stackoverflow.com/users/1945948/atw"}, "reply_to_user": {"reputation": 2552, "user_id": 2558252, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/lW99E.jpg?s=128&g=1", "display_name": "nobe4", "link": "https://stackoverflow.com/users/2558252/nobe4"}, "edited": false, "score": 0, "creation_date": 1432113999, "post_id": 30345227, "comment_id": 48783917, "body": "Actually, <code>lista</code> is not a partial. You are thinking of your page <code>lista.html.erb</code>. That is why you are getting the error. I updated my answer."}, {"owner": {"reputation": 2552, "user_id": 2558252, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/lW99E.jpg?s=128&g=1", "display_name": "nobe4", "link": "https://stackoverflow.com/users/2558252/nobe4"}, "edited": false, "score": 0, "creation_date": 1432114207, "post_id": 30345227, "comment_id": 48784062, "body": "yes those 3, because I use them at differents places"}, {"owner": {"reputation": 4397, "user_id": 1945948, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ecf1cdd8eed500e1e1df86d036b69a7?s=128&d=identicon&r=PG&f=1", "display_name": "atw", "link": "https://stackoverflow.com/users/1945948/atw"}, "reply_to_user": {"reputation": 2552, "user_id": 2558252, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/lW99E.jpg?s=128&g=1", "display_name": "nobe4", "link": "https://stackoverflow.com/users/2558252/nobe4"}, "edited": false, "score": 0, "creation_date": 1432114255, "post_id": 30345227, "comment_id": 48784097, "body": "Hey @Nobe4, cool, I updated my answer. <code>lista</code> is not a partial."}, {"owner": {"reputation": 4397, "user_id": 1945948, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ecf1cdd8eed500e1e1df86d036b69a7?s=128&d=identicon&r=PG&f=1", "display_name": "atw", "link": "https://stackoverflow.com/users/1945948/atw"}, "reply_to_user": {"reputation": 2552, "user_id": 2558252, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/lW99E.jpg?s=128&g=1", "display_name": "nobe4", "link": "https://stackoverflow.com/users/2558252/nobe4"}, "edited": false, "score": 0, "creation_date": 1432114306, "post_id": 30345227, "comment_id": 48784139, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/78296/discussion-between-adrianmann-and-nobe4\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 4397, "user_id": 1945948, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ecf1cdd8eed500e1e1df86d036b69a7?s=128&d=identicon&r=PG&f=1", "display_name": "atw", "link": "https://stackoverflow.com/users/1945948/atw"}, "is_accepted": true, "score": 2, "last_activity_date": 1432114645, "last_edit_date": 1432114645, "creation_date": 1432113092, "answer_id": 30345227, "question_id": 30345116, "link": "https://stackoverflow.com/questions/30345116/render-partial-from-controller-and-from-view/30345227#30345227", "title": "Render partial from controller and from view", "body": "<p><code>lista.html.erb</code> is a page, not a partial. Your code is looking for a partial called <code>lista</code> but it does not exist.</p>\n\n<p>I really think you should create a new partial called <code>_lista</code>, you can render it in <code>lista.html.erb</code> and <code>listb.html.erb</code>. Your controller can still <code>render 'lista'</code> which will render the partial <code>_lista</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 467, "user_id": 1838219, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/1e546902a0a96a15a37065b354b9de43?s=128&d=identicon&r=PG", "display_name": "Gaurav Sharma", "link": "https://stackoverflow.com/users/1838219/gaurav-sharma"}, "is_accepted": false, "score": 1, "last_activity_date": 1432113876, "creation_date": 1432113876, "answer_id": 30345551, "question_id": 30345116, "link": "https://stackoverflow.com/questions/30345116/render-partial-from-controller-and-from-view/30345551#30345551", "title": "Render partial from controller and from view", "body": "<p>You need to create <code>_list.html.erb</code> <strong>partial</strong> (any file name) file for access it with in <code>lista.html.erb</code> or <code>listb.html.erb</code> after that you can access as you want.</p>\n\n<p>For example:-</p>\n\n<pre><code># lista.html.erb\n&lt;%= render 'listb' %&gt;\n</code></pre>\n\n<p>In <code>lista.html.erb</code> we can call <code>listb</code> (<i>_listb.html.erb</i>) file that are in current directory.</p>\n"}, {"comments": [{"owner": {"reputation": 2552, "user_id": 2558252, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/lW99E.jpg?s=128&g=1", "display_name": "nobe4", "link": "https://stackoverflow.com/users/2558252/nobe4"}, "edited": false, "score": 0, "creation_date": 1432114261, "post_id": 30345614, "comment_id": 48784103, "body": "if I want to keep the pages and not the partials, can I render them from a view ?"}, {"owner": {"reputation": 2698, "user_id": 1845837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce8100e14c5b9dba0fc05df2d9aecda7?s=128&d=identicon&r=PG", "display_name": "uma", "link": "https://stackoverflow.com/users/1845837/uma"}, "reply_to_user": {"reputation": 2552, "user_id": 2558252, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/lW99E.jpg?s=128&g=1", "display_name": "nobe4", "link": "https://stackoverflow.com/users/2558252/nobe4"}, "edited": false, "score": 0, "creation_date": 1432115185, "post_id": 30345614, "comment_id": 48784792, "body": "I don&#39;t think that you can do it in this way as you said. you should use partial to render data in rails according to rails norm."}], "tags": [], "owner": {"reputation": 2698, "user_id": 1845837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce8100e14c5b9dba0fc05df2d9aecda7?s=128&d=identicon&r=PG", "display_name": "uma", "link": "https://stackoverflow.com/users/1845837/uma"}, "is_accepted": false, "score": 1, "last_activity_date": 1432114011, "creation_date": 1432114011, "answer_id": 30345614, "question_id": 30345116, "link": "https://stackoverflow.com/questions/30345116/render-partial-from-controller-and-from-view/30345614#30345614", "title": "Render partial from controller and from view", "body": "<p>you should create a partial with name <strong>_lista.html.erb</strong> or you can change your file name from <strong>lista.html.erb</strong> to <strong>_lista.html.erb</strong>.</p>\n\n<p>currently file lista.html.erb is not a partial that's why when you try to render <strong>lista</strong> partial, rails produce a error for you</p>\n\n<pre><code>#lista.html.erb\n##assuming list is in lista/list.html.erb \n&lt;%= render 'lista/list' %&gt;\n</code></pre>\n"}], "owner": {"reputation": 2552, "user_id": 2558252, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/lW99E.jpg?s=128&g=1", "display_name": "nobe4", "link": "https://stackoverflow.com/users/2558252/nobe4"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 630, "favorite_count": 0, "accepted_answer_id": 30345227, "answer_count": 3, "score": 0, "last_activity_date": 1432114877, "creation_date": 1432112807, "last_edit_date": 1432114877, "question_id": 30345116, "link": "https://stackoverflow.com/questions/30345116/render-partial-from-controller-and-from-view", "title": "Render partial from controller and from view", "body": "<p>In my Rails app, I get to render an erb file from a controller and from another erb file like so: </p>\n\n<pre><code># a_controller.rb\nclass AController &lt; ApplicationController\ndef index\n    render 'lista'\nend\n\n# b_controller.rb\nclass BController &lt; ApplicationController\ndef index\n    render 'listb'\nend\n\n# lista.html.erb\n&lt;%= render 'list' %&gt;\n\n# listb.html.erb\nSome content that I want to keep\n&lt;%= render 'list' %&gt;\n\n# _list.html.erb\nHello\n</code></pre>\n\n<p>As you can see lista is only rendering the partial <code>_list</code>.\nWhat I wanted to do was to call <code>&lt;%= render 'lista' %&gt;</code> from within <code>listb.html.erb</code>.\nBut when I do so, I get an error message saying that the partial <code>_lista</code> is not found.</p>\n\n<p>Do you have an ideas? </p>\n"}, {"tags": ["ruby", "class"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 4, "creation_date": 1432111961, "post_id": 30344736, "comment_id": 48782426, "body": "<code>Integer #\u21d2 Integer &lt; Numeric</code>. Class inheritance chains may consist of more than one link. Answering your question: <code>Numeric</code> is the base for both <code>Fixnum</code> and <code>Float</code>. After all, what is the problem with reading docs on <code>Numeric</code> instead of immediately post the question here?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1432112177, "post_id": 30344736, "comment_id": 48782573, "body": "<code>Numeric</code> is quite general: it is ancestor to <code>Complex</code>, <code>Rational</code>, <code>Bignum</code>, <code>Float</code>, <code>Fixnum</code>, <code>Integer</code>, <code>Date::Infinity</code>."}, {"owner": {"reputation": 2359, "user_id": 405454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/IDzwW.png?s=128&g=1", "display_name": "mhutter", "link": "https://stackoverflow.com/users/405454/mhutter"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1432112411, "post_id": 30344736, "comment_id": 48782727, "body": "In support of @mudasobwa : Learn to read some Docs: <a href=\"https://ruby-doc.org/core\" rel=\"nofollow noreferrer\">ruby-doc.org/core</a>"}], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 3, "last_activity_date": 1432112352, "creation_date": 1432112352, "answer_id": 30344916, "question_id": 30344736, "link": "https://stackoverflow.com/questions/30344736/ruby-numeric-vs-integer/30344916#30344916", "title": "Ruby Numeric vs Integer", "body": "<pre><code>Numeric.descendants\n#=&gt; [BigDecimal, Date::Infinity, Integer, Fixnum, Float, Bignum, Rational, Complex]\n</code></pre>\n\n<p>So if you need to define a method for both <code>Fixnum</code> and <code>Float</code> you can do it in Numeric (not talking about the  open classes monkeypatching issues)</p>\n"}], "owner": {"reputation": 2997, "user_id": 519680, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/474288f408c5950862a4b346b60201a1?s=128&d=identicon&r=PG", "display_name": "shajin", "link": "https://stackoverflow.com/users/519680/shajin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1176, "favorite_count": 0, "accepted_answer_id": 30344916, "answer_count": 1, "score": 0, "last_activity_date": 1432112352, "creation_date": 1432111886, "question_id": 30344736, "link": "https://stackoverflow.com/questions/30344736/ruby-numeric-vs-integer", "title": "Ruby Numeric vs Integer", "body": "<p>In ruby,</p>\n\n<pre><code>115.class =&gt; Fixnum &lt; Integer\n115.0.class =&gt; Float &lt; Numeric\n</code></pre>\n\n<p>Can someone point of the difference between Integer class and Numeric class?<br>\nalso, if I want to write some common instance function between Fixnum and Float, in which class I should write?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "macos", "command-line", "sqlite"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1432111979, "post_id": 30344719, "comment_id": 48782439, "body": "Please describe more specifically your problem. If you have already created the database, the only Rails configuration you need is the <code>database.yml</code> file (and the appropriate model classes); there is no commands to use in the command line."}, {"owner": {"reputation": 681, "user_id": 1117660, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/ha2St.png?s=128&g=1", "display_name": "amtest", "link": "https://stackoverflow.com/users/1117660/amtest"}, "edited": false, "score": 0, "creation_date": 1432112028, "post_id": 30344719, "comment_id": 48782478, "body": "Configure means, there is a one file in rails project, /config/database.yml, put the details there and refer  <a href=\"http://guides.rubyonrails.org/\" rel=\"nofollow noreferrer\">guides.rubyonrails.org</a>"}, {"owner": {"reputation": 11, "user_id": 4865762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/410e150ee03b214db3817c06845f0893?s=128&d=identicon&r=PG", "display_name": "Cathrin", "link": "https://stackoverflow.com/users/4865762/cathrin"}, "edited": false, "score": 0, "creation_date": 1432112304, "post_id": 30344719, "comment_id": 48782653, "body": "Thanks for this peeps! Then I actually had done it already!"}], "answers": [{"tags": [], "owner": {"reputation": 10770, "user_id": 381874, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/k7VRE.jpg?s=128&g=1", "display_name": "Sachin R", "link": "https://stackoverflow.com/users/381874/sachin-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1432112508, "creation_date": 1432112508, "answer_id": 30344989, "question_id": 30344719, "link": "https://stackoverflow.com/questions/30344719/how-to-configure-a-database-in-sqlite3-with-a-ruby-on-rails-project/30344989#30344989", "title": "How to configure a Database in sqlite3 with a Ruby on Rails project", "body": "<p>Open <code>config/database.yml</code></p>\n\n<p>Edit setting:  change username/password and database name for the <strong>development</strong> environment with you Sqlite database\nand restart server</p>\n\n<p>Eg:</p>\n\n<pre><code>  development:\n    adapter: sqlite3\n    encoding: utf8\n    database: [DB name]\n    username: [your username]\n    password: [your password]\n    host: [host name]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1461, "user_id": 2059047, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5e1327cb46137894ca902795db2111ac?s=128&d=identicon&r=PG", "display_name": "Prashant4224", "link": "https://stackoverflow.com/users/2059047/prashant4224"}, "is_accepted": false, "score": 0, "last_activity_date": 1432112938, "creation_date": 1432112938, "answer_id": 30345162, "question_id": 30344719, "link": "https://stackoverflow.com/questions/30344719/how-to-configure-a-database-in-sqlite3-with-a-ruby-on-rails-project/30345162#30345162", "title": "How to configure a Database in sqlite3 with a Ruby on Rails project", "body": "<p>Make sure that gem file contains <strong>gem 'sqlite3'</strong></p>\n\n<p>In config/database.yml</p>\n\n<pre><code> development:\n   adapter: sqlite3\n   database: db/development.sqlite3\n   pool: 5\n   timeout: 5000\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2698, "user_id": 1845837, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ce8100e14c5b9dba0fc05df2d9aecda7?s=128&d=identicon&r=PG", "display_name": "uma", "link": "https://stackoverflow.com/users/1845837/uma"}, "is_accepted": false, "score": 1, "last_activity_date": 1432114463, "creation_date": 1432114463, "answer_id": 30345819, "question_id": 30344719, "link": "https://stackoverflow.com/questions/30344719/how-to-configure-a-database-in-sqlite3-with-a-ruby-on-rails-project/30345819#30345819", "title": "How to configure a Database in sqlite3 with a Ruby on Rails project", "body": "<p>A 'sqlite3' gem should be in gemfile, By default rails added a gem 'sqlite3' in your gem file, when we generate a new rails app.</p>\n\n<p>put the following code in your config/database.yml file :</p>\n\n<pre><code>development:\n  adapter: sqlite3\n  database: db/development.sqlite3\n  pool: 5\n  timeout: 5000\ntest:\n  adapter: sqlite3\n  database: db/test.sqlite3\n  pool: 5\n  timeout: 5000\nproduction:\n  adapter: sqlite3\n  database: db/production.sqlite3\n  pool: 5\n  timeout: 5000\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 4865762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/410e150ee03b214db3817c06845f0893?s=128&d=identicon&r=PG", "display_name": "Cathrin", "link": "https://stackoverflow.com/users/4865762/cathrin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1621, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1432114463, "creation_date": 1432111852, "question_id": 30344719, "link": "https://stackoverflow.com/questions/30344719/how-to-configure-a-database-in-sqlite3-with-a-ruby-on-rails-project", "title": "How to configure a Database in sqlite3 with a Ruby on Rails project", "body": "<p>I am trying to configure a database created in sqlite3 with a Ruby on Rails project that I just started. Anyone that can help me? So the database have already been created in the Command line. </p>\n\n<p>Cannot find the right commands to use in the command line!\nNew to this.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf"], "comments": [{"owner": {"reputation": 3692, "user_id": 1065738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47ef9be34cf2f299fd5b092971a0d0f5?s=128&d=identicon&r=PG", "display_name": "Amit Thawait", "link": "https://stackoverflow.com/users/1065738/amit-thawait"}, "edited": false, "score": 0, "creation_date": 1432112573, "post_id": 30343808, "comment_id": 48782839, "body": "Are you able to get the data inside the PDF while serving it from the disk ? like you mention using : <code>send_file &quot;&#47;path&#47;to&#47;file.pdf&quot;, :filename =&gt; &quot;download.pdf&quot;, :type =&gt; &quot;application&#47;pdf&quot;</code> OR is there some issue with PDF creation using the encoded data you have ?"}, {"owner": {"reputation": 1306, "user_id": 2788532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f924141a65413e072e8a2e953608a70?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/2788532/mark"}, "reply_to_user": {"reputation": 3692, "user_id": 1065738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47ef9be34cf2f299fd5b092971a0d0f5?s=128&d=identicon&r=PG", "display_name": "Amit Thawait", "link": "https://stackoverflow.com/users/1065738/amit-thawait"}, "edited": false, "score": 0, "creation_date": 1432112744, "post_id": 30343808, "comment_id": 48782989, "body": "No, serving from the disk does not yield any results. I suspect the problem may lie with the server configuration, rather than the code. I&#39;m setting up a separate virtual machine to troubleshoot."}, {"owner": {"reputation": 3692, "user_id": 1065738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47ef9be34cf2f299fd5b092971a0d0f5?s=128&d=identicon&r=PG", "display_name": "Amit Thawait", "link": "https://stackoverflow.com/users/1065738/amit-thawait"}, "edited": false, "score": 0, "creation_date": 1432112987, "post_id": 30343808, "comment_id": 48783189, "body": "Have you registered the Mime::Type for PDF ?"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1432113318, "post_id": 30343808, "comment_id": 48783431, "body": "What middleware are you using? PDF files are very sensitive to added/removed bytes, even changes in the EOL marker..."}], "answers": [{"tags": [], "owner": {"reputation": 1306, "user_id": 2788532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f924141a65413e072e8a2e953608a70?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/2788532/mark"}, "is_accepted": true, "score": 0, "last_activity_date": 1432630768, "creation_date": 1432630768, "answer_id": 30454017, "question_id": 30343808, "link": "https://stackoverflow.com/questions/30343808/serving-pdf-file-using-ruby-on-rails-blank-white-pages-in-the-downloaded-file/30454017#30454017", "title": "Serving PDF file using Ruby on Rails - blank/white pages in the downloaded file", "body": "<p>After some extensive debugging, I've found that the problem wasn't actually caused by my Rails app or its configuration. To ease the development process, we used Grunt for running and watching tasks, which shipped with its own HTTP server (Grunt was listening on port <code>9000</code>, while RoR listened on <code>3000</code>).</p>\n\n<p>Deconfiguring the Grunt server by using the default Rails WEBRick server worked. It turns out that Grunt has some kind of problem with passing on the correct <code>Content-Length</code> headers, which caused the problem. Since we're only using Grunt for development, this will not affect us in production, so I'm closing the question.</p>\n\n<p>I hope this helps somebody at some point.</p>\n"}], "owner": {"reputation": 1306, "user_id": 2788532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f924141a65413e072e8a2e953608a70?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/2788532/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "accepted_answer_id": 30454017, "answer_count": 1, "score": 0, "last_activity_date": 1432630768, "creation_date": 1432109272, "question_id": 30343808, "link": "https://stackoverflow.com/questions/30343808/serving-pdf-file-using-ruby-on-rails-blank-white-pages-in-the-downloaded-file", "title": "Serving PDF file using Ruby on Rails - blank/white pages in the downloaded file", "body": "<p>For the brevity of this question let's assume that I have a properly generated PDF file stored in memory and encoded in Base64 (generated outside of Ruby), such as this one:</p>\n\n<pre><code>JVBERi0xLjQKJcOkw7zDtsOfCjIgMCBvYmoKPDwvTGVuZ3RoIDMgMCBSL0ZpbHRlci9GbGF0ZURlY29kZT4+CnN0cmVhbQp4nCWKsQoCMRAF+/2KVwsmu2vinRBSiKdgF1ywEDv1Oo/LFf6+EXnNDPPYCT40g8GN4i46RR/E9ahPuq7w/re2OtLeKG5b6rrQzvaAPwpEYa9bYsmaWLMk3uS1/vxuZxqMChXM8MPpEjEu8FYDDhMKfQFvKRtXCmVuZHN0cmVhbQplbmRvYmoKCjMgMCBvYmoKMTE4CmVuZG9iagoKNCAwIG9iago8PC9UeXBlL1hPYmplY3QKL1N1YnR5cGUvRm9ybQovQkJveFsgLTExMiA0MjAgNzA4IDQyMC4xIF0KL0dyb3VwPDwvUy9UcmFuc3BhcmVuY3kvQ1MvRGV2aWNlUkdCL0sgdHJ1ZT4+Ci9MZW5ndGggOAovRmlsdGVyL0ZsYXRlRGVjb2RlCj4+CnN0cmVhbQp4nAMAAAAAAQplbmRzdHJlYW0KZW5kb2JqCgo1IDAgb2JqCjw8L0NBIDAuNQogICAvY2EgMC41Cj4+CmVuZG9iagoKNyAwIG9iago8PC9MZW5ndGggOCAwIFIvRmlsdGVyL0ZsYXRlRGVjb2RlL0xlbmd0aDEgNjU2MD4+CnN0cmVhbQp4nOVYfWwb53l/3jt+SZRF0pZo2bTFo8+UJfNLFi1LchSLkkiK+rBFfdAh5cgmJZ5EOpLIkpRcO8mstE3q0fHipZ0TN0aTFNsQrAV8tNtCKdJYBVoMA5akQ1F0WePUwAoMWK3Z8+ZgSGNrz3s8yZKbD2AdsD92Iu+e5/f8no/3ed/3eKdcZlaAMpgHFjzj07F0BVEwAPD3AGTj+FyOW+7wcCjfAGCME+nJ6Vr3r/8NgP0vALVycurkxDPp288AaNGFrU0Isbi9ia0HKK9FYF8CgZ77J9WoR1HfmZjOffkT8l4p6l9DXT+VGo/VkAqC+jdRL52OfTn9HdVpBeqvoc7NxKaFg8LraCtfBND0pVPZXBx2LgNsLqP2dEZI3x15SYO6HevLIUbwjx5oJyqqMyz8vz6U56ASAspHQQdp6bzuYL8HW+h1+eb68/2+5Y//N6vQFC8vw1/D9+EcvA+jssEPQUjCLCJrj5/APyBKjyCMwN9A/jPCfg8W0F7kReEFuPgZvCC8BFfhb9dlCcI0PIm1/ADeJ3vg73CppOAO0cAz8DOMegexg58WiinH04QkTqxBfw2vMGehh/ktKhephXExevgpXCJHMXIOx3ludcStfxD06/A0nocgAXMoS4fy0U/+CUqW/wNH9TT0wFegHabWeLxFXmVxH7HD8Cr29CcS5loxqgPsceaHDHPvG6j8OUziN0Zw7Mw5th28SgP5PoDHFwmHhocGB4L9hw729fZ0B7r8Pm9nR7un7cCjrY/sb2lu2te4p97ldNhrd9VYd/I7LOaqCoNeV75BW1qiUauUCpYhYPfx/ign1kRFRQ0fCDiozscQiK0BoiKHkH89R+SiEo1bz/Qgc+IhpqfI9KwyiZ5rhVaHnfPxnPiOl+cWyMhAGOVzXj7CiUuSfFCSFTWSsgEViwU9OF9VwsuJJMr5RP9cIu+LejFeQVvayXcKpQ47FEq1KGpREmv5dIHUHiCSwNT69hcY0GygaUXW6ovFxeBA2Oc1WSwRh71bLOe9kgk6pZCiqlNUSyG5JC0dznIF+2L++QU9jEVtZXE+Hns8LLIx9M2zvnz+66LBJtbxXrHu1G+rcOSCaOe9PtFGo/YOrubpfZCSiEqrnufydwGHwy/dXI/EZERl1d8FKvqxvfm8n+f8+Wg+trA8P8Zzej5fKCvLp33YYQiG0Wth+UdnTaL/+YiojybIfnmw/sFecdPAkbDIWP1cIoYIftp4S7PJYoiscIKfZQZsBLYDe2qx0IGfXfDAGCri/EC4qHMwZroCHpctIjJRallcsVSGqGV+xbLqHuVxNnuHwnlRYe2O8z7s8dmYOD+G6+k4nQpeL5Z/ZLLw+Y0GrsUVkbgcVtUdT3Kisgbbgl5rHXClUJe8XlLKPypelkyYoMawkWvhMQyN4+N9Ufkzl6jCAJzDLgZsxakfDoseLwqemDxHvkK9Cz1iUZyipFeaPtHFp8UKvmN1PmlZvuRQWHKR3cSKThGi47KX6PJ5aWbOl496iyXQWPxA+E1wL98o7OVMV92wFyJeSjZ24rqq8eXD8QnRHDXFcadNcGGTRfREcIIjfFiI0IWGHaq7geksUkaR6RwO9w7xvQMj4Wa5kKKBhlNYfQ+F4cOmYhhccqLGquHCjImNIFGPAOdHge9oxbOotmrwq8eGSyhdqh2tXJiYYIWNZYh1nE/wyjyqrwuqpMupM7ASTUVVjNMZMFkiluLhsDNo5uTE6KGhTQ2smFgr3gkQYzCMBNFeVtE1z4V5gY/wCU70BMN0bLQ9UpflZkg9l+dqeJ22plnYJrCgeUWhzRT9NtPa5opdkr6qBh4yd6+YubyG7x3K0+C8HBCw8m4R6BL2NBtM0u6n+5n3x3AT446W9nO+4PHQvZyg2zbPd8fz/FC4VWLjHeRp0ymaayP0kt7hDocdb2YdBZ6cGSh4yJmhkfCbenykOjMcvsIQpjPaESnsRFv4TQ5/KySUoSgFqcJRhUYaREUj8U1vegDmJatCAiR9fIGAhGlWMALjC0wR069gDGKKIuaRMHrgLFUlsMd4//ZxcTo/T0US+WiErnEwYkfwQ0TCH8Du8AcKhFGViaW80CFq+Q6Kt1G8rYirKK7GlUGMxGE/ldf7+LtVDumnG7x4iitD+ASsBmeBgKv1ilqhWWooqJQftF5hGRShwFJYSeEralXJJ61XCMXdBovBajFYvAx3fyd5+X5CGfr4u17FO0CfRCuWbzIOxTP4hPWYp4Vp1hgCChW5bCKLJtJm6jcxpeVdbLAiWsFUVKiB1bMcy2pYRVmwxFNSHihRa3WVhgEwQtuSu839rm2pgbiOjrrdrlH9UsPoaGZP/ahNuaOm0cA3thF3pbuSN1QY3Q37mirLWXIoeuzJp4W2X/3qkXprt1m355GOiswk8w3Hrl/+cvje6faOUlV7aYWutDj+4PJN1s/+DMywG3Iex59WkJc3Ee2ms5sYo6nGxJRUbamqq7pYpdDUBMxardkOdnJg3v6a/badtS8sL17t7AnQq2fzbmfASgJnjMQIQatVxQW36FUDBjqCtqWNLa4l4hpdarDZvnR0VP9ug0u/tKf+6Cg9SGVFNeNuOMDQ2vkdTqZx7z53QzWznZAd5UylZa+TIYrKtsxodUfHga2b2w+FHbOvx+3vXuv96ljL/ZeaBxq3kBcNtgB5f2P3c5OPKjWlqmadybjB8yc/OvnRndqj354bJJdch5/s63vysPSQRGAY5+YXOOZGeN2zs6ch38A8Vfl8JbPf2GM8ZcwbFUrsqNXNtm7t2/rU1ue3KpiF5X/0bC7ZEKiuKikLWD36yoDVuskPTVwTaaKDr6+2BPqbjjVdbmId/m1a7bZNDuXuoGVvjbeGqamx6PVB5V6tV/uXWpbTEq1WiV3BqcS5bJNmdGNLC3G5sSejti/pP1xyu2x76m22UZDaU1HO0K7sanRvriY4xY17narGvQewZcbNlfwuJ+F3qLCFKuYXu4afPeo6cmj/Bsce81jHqLDb+9iRx7y7nUNZn/crra7dW0fcA6HdvvDjYd9uomlL9tZpdXrlv3x1W+1AqKHdvr26pnWk0xP38pvK3pneXBX0Oh+pq+bqPI+D9F5FDL8z9P6r/5iu9S6Yi8/07+avkwePpXQl4U6iD/yMDKFVbbnvg8dWSWv40qFgboKXaYEK9hwE2e0wjJgd30g/Jt+U2QrYJ8djQI/PufjMr9CqWnDHUnQbObwaM7oanyAzKssM7uy0LLNgghOyrEDOi7KshHL4jiyr8D1JlGU1nIJrsqyBCtIiyyVQTg7KshZrOLL65ukkK/E3QIr8lSyXwwGmArMTRQlqi8ygLBPg2I2yzEA52yDLLOxjPbKsQM6cLCthG3tBllVQzV6RZTX8J/tzWdZAreKnslwC2xQ3ZVkLzUqNLJfB48qV+BvgQ+UlWS6Hp1SnOlPpk5nkZCLH1Y7XcQ319U3coBDnArGcneueGXdy7VNTnETIchkhK2TmhLiT6+vu8A22D3f3H+KSWXzkz2VicWE6lnmCS02s9+9LjgmZWC6ZmuGGhExyYlCYnJ2KZdqz48JMXMhwDu5hxsP6YSGTpcoeZ32T0/3A+jD5CwrB6ieT2ZyQQTA5w4WcQ04uGMsJMzkuNhPnhlcd+ycmkuOCBI4LmVwMyalcAks9PptJZuPJcZot61wdQWcqk07JJeWEOYE7GMvlhGxqJpHLpfe7XCdOnHDGZPI4cp3jqWnX59lyJ9NCXMgmJ2dw5M5EbnqqDwuayWLhs1JGrGZt1/ypGZycqSLHzmUFgaPhsxh/QohjaelM6rgwnnOmMpOuE8knkq5ivOTMpOtBGBpFzvPHeUMnpHAPnoQMvtlP4ptuDjiohXGow2sD1ONfE0qDIEAcrwGIIcOOUjfMIMuJEn0DnsLrgwhZSRPwKuB1TvKlzD706gAfRmvHu0k39MMhRJMSP4bfHLJjyBVgGq8ZeAKxFL61f17+PvQfk/JQSxL5M2gdkpAk+lLPSZjFCmnEdsw1jsiMlCWDTIdU1+fH+CL7YUnKrlr2YF20b05wf6rvF0X+4zpS7P2kFCUnxS4yk1LsEDKGJFZQ8qS9yEnZZiTW8Kdk7MeME+hPO/eAOS7FzqFejJxCOSF39Th2PCNVEJf8VsaWxcx/OAd0DWZwFaYe6hKtbk7KeVDCc9KaoraEpKVhP/7quPB3g/45kbM+8rgc1ylJ08j8n/rlcIekpT4K0jxPIrc4504p5jSurz65QzPSuqcdml0zxmJvPmut+aVrcedMrYtDZ5Zeqe9K9Vm5/gkpT7FraTynsO+C1G2nhE5KY0ziHCZRWlsfnbFJGXu4mpVa1o/n/zK3/L/iZQtm/JSjUBJ9m6jxF7tNOl8jCk+E3LhH3rtHuHvk9O9J8Pdk/s75O8y/364zX7597TbTf+vYrcu32PpbRHeLaGBJvxRcii6ll15bUpXqbpIy+B0x/PONZvNv3NdDH7o/CMF10hq8Pn9dvM7Sh8qR6xqt/zphQx+wRrN+kVusX0wvzi/+fPHG4u1Fzfzb599mfvyWy6x7y/wWY77af/X0VTb6BtG9YX6DCb4SfYU5f4noLpkvuS6x37roNF/sqja/dGGX+caF2xcYGr7xwgaD/9hfkNMvvvAik35u/rnzz7Hzz55/lrk8d22OyQbrzKkZm3mma7d5i7sqpHazIRW7bKae3jFrrT96zGM+hqQjI/Xmka468yb3xpASi1UgUcea2Ta2n02xL7DXWLVmMFhtHsDvjeDtIKPrN/e7+nGENzyxXgsG6kn3zPew3f46c6Cr2azrMne5ut7r+k3XrS7VsS7yKn78l/3X/KzHX+fye/zVFv+2gClkdFeG9G5diCEQIm4IuXTLOkanO6Y7rWN10AbMvJEoyQI5Xxgestl6F9TLg72iJnhEJGdE6xA9ewZGRNUZEUIjR8IFQv4s8uy5c9CxvVdsGAqL0e2RXjGOgocK8yjotxeM0BHJZnM2ehCbDcVZPINtFqGj2SIIthUz2LIkm4VsltioTRIRgayNwhShPgQ9j2aBnqjVJrGolM1WHf1vLm3N/wplbmRzdHJlYW0KZW5kb2JqCgo4IDAgb2JqCjM3OTEKZW5kb2JqCgo5IDAgb2JqCjw8L1R5cGUvRm9udERlc2NyaXB0b3IvRm9udE5hbWUvQkFBQUFBK0xpYmVyYXRpb25TZXJpZgovRmxhZ3MgNAovRm9udEJCb3hbLTE3NiAtMzAzIDEwMDUgOTgxXS9JdGFsaWNBbmdsZSAwCi9Bc2NlbnQgODkxCi9EZXNjZW50IC0yMTYKL0NhcEhlaWdodCA5ODEKL1N0ZW1WIDgwCi9Gb250RmlsZTIgNyAwIFIKPj4KZW5kb2JqCgoxMCAwIG9iago8PC9MZW5ndGggMjM1L0ZpbHRlci9GbGF0ZURlY29kZT4+CnN0cmVhbQp4nF1Qu27EIBDs+YotL8UJbOfRWEini05ykYfi5AMwrB2kGBDGhf8+C74kUgrQDDOzGpafu8fO2cRfo9c9JhitMxEXv0aNMOBkHatqMFanKyu3nlVgnLL9tiScOzf6tmX8jbQlxQ0OJ+MHvGH8JRqM1k1w+Dj3xPs1hC+c0SUQTEowONKcJxWe1Yy8pI6dIdmm7UiRP8P7FhDqwqu9ivYGl6A0RuUmZK0QEtrLRTJ05p/W7Ilh1J8qkrMipxAPt5JwXfD9XcbN/t6UGVd3npa/+9MS9BojNSw7KdVyKevwd23Bh5wq5xve7nIWCmVuZHN0cmVhbQplbmRvYmoKCjExIDAgb2JqCjw8L1R5cGUvRm9udC9TdWJ0eXBlL1RydWVUeXBlL0Jhc2VGb250L0JBQUFBQStMaWJlcmF0aW9uU2VyaWYKL0ZpcnN0Q2hhciAwCi9MYXN0Q2hhciAzCi9XaWR0aHNbMzY1IDI3NyA0NDMgMzg5IF0KL0ZvbnREZXNjcmlwdG9yIDkgMCBSCi9Ub1VuaWNvZGUgMTAgMCBSCj4+CmVuZG9iagoKMTIgMCBvYmoKPDwvRjEgMTEgMCBSCj4+CmVuZG9iagoKMTMgMCBvYmoKPDwvRm9udCAxMiAwIFIKL1hPYmplY3Q8PC9UcjQgNCAwIFI+PgovRXh0R1N0YXRlPDwvRUdTNSA1IDAgUj4+Ci9Qcm9jU2V0Wy9QREYvVGV4dC9JbWFnZUMvSW1hZ2VJL0ltYWdlQl0KPj4KZW5kb2JqCgoxIDAgb2JqCjw8L1R5cGUvUGFnZS9QYXJlbnQgNiAwIFIvUmVzb3VyY2VzIDEzIDAgUi9NZWRpYUJveFswIDAgNTk1IDg0Ml0vR3JvdXA8PC9TL1RyYW5zcGFyZW5jeS9DUy9EZXZpY2VSR0IvSSB0cnVlPj4vQ29udGVudHMgMiAwIFI+PgplbmRvYmoKCjYgMCBvYmoKPDwvVHlwZS9QYWdlcwovUmVzb3VyY2VzIDEzIDAgUgovTWVkaWFCb3hbIDAgMCA1OTUgODQyIF0KL0tpZHNbIDEgMCBSIF0KL0NvdW50IDE+PgplbmRvYmoKCjE0IDAgb2JqCjw8L1R5cGUvQ2F0YWxvZy9QYWdlcyA2IDAgUgovT3BlbkFjdGlvblsxIDAgUiAvWFlaIG51bGwgbnVsbCAwXQovTGFuZyhlbi1VUykKPj4KZW5kb2JqCgoxNSAwIG9iago8PC9BdXRob3I8RkVGRjAwNkQwMDYxMDA3MjAwNjMwMDZDMDAyMD4KL0NyZWF0b3I8RkVGRjAwNTcwMDcyMDA2OTAwNzQwMDY1MDA3Mj4KL1Byb2R1Y2VyPEZFRkYwMDRDMDA2OTAwNjIwMDcyMDA2NTAwNEYwMDY2MDA2NjAwNjkwMDYzMDA2NTAwMjAwMDM0MDAyRTAwMzI+Ci9DcmVhdGlvbkRhdGUoRDoyMDE1MDUxOTE2MzMxOCswMicwMCcpPj4KZW5kb2JqCgp4cmVmCjAgMTYKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDA1MTc0IDAwMDAwIG4gCjAwMDAwMDAwMTkgMDAwMDAgbiAKMDAwMDAwMDIwOCAwMDAwMCBuIAowMDAwMDAwMjI4IDAwMDAwIG4gCjAwMDAwMDA0MDcgMDAwMDAgbiAKMDAwMDAwNTMxNyAwMDAwMCBuIAowMDAwMDAwNDQ3IDAwMDAwIG4gCjAwMDAwMDQzMjIgMDAwMDAgbiAKMDAwMDAwNDM0MyAwMDAwMCBuIAowMDAwMDA0NTM4IDAwMDAwIG4gCjAwMDAwMDQ4NDMgMDAwMDAgbiAKMDAwMDAwNTAxNiAwMDAwMCBuIAowMDAwMDA1MDQ5IDAwMDAwIG4gCjAwMDAwMDU0MTYgMDAwMDAgbiAKMDAwMDAwNTUxMyAwMDAwMCBuIAp0cmFpbGVyCjw8L1NpemUgMTYvUm9vdCAxNCAwIFIKL0luZm8gMTUgMCBSCi9JRCBbIDxGQkE3OEI5RkI5QzcwRDVBMzlGOENDNkJBMjk3MTgyRj4KPEZCQTc4QjlGQjlDNzBENUEzOUY4Q0M2QkEyOTcxODJGPiBdCi9Eb2NDaGVja3N1bSAvREJEN0U3QTI2RDYxMTQ1NDVBODdGRjNGQ0FEQjQzRDgKPj4Kc3RhcnR4cmVmCjU3MjYKJSVFT0YK\n</code></pre>\n\n<p>My initial attempts (slightly refactored after a bit of googling around) looked like this:</p>\n\n<pre><code>send_data Base64.decode64(pdf).force_encoding(Encoding::BINARY), filename: \"download.pdf\", type: \"application/pdf\", disposition: \"inline\"\n</code></pre>\n\n<p>While the same code works for other file types (CSV, Excel spreadsheets) it's binary PDF files that seem to draw a blank (pun intended). Oddly enough when I have a PDF file with several pages, the right amount of pages is included in the file but they're all blank.</p>\n\n<p>I've also tried serving a PDF from the disk (I generated the PDF using LibreOffice):</p>\n\n<pre><code>send_file \"/path/to/file.pdf\", :filename =&gt; \"download.pdf\", :type =&gt; \"application/pdf\"\n</code></pre>\n\n<p>But the result is the same. I'm running out of ideas, so I'd be grateful for any tips.</p>\n\n<p><strong>Note:</strong> I am not generating the PDF files using Ruby/RoR, so suggestions such as using Prawn are out of place. The files themselves are generated independently and stored as base64. I know for a fact that there isn't a problem with the generation process as the base-encoded PDF I've included above is valid (I've checked it using online decoders and using other programming languages).</p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "is_accepted": false, "score": 3, "last_activity_date": 1432110714, "last_edit_date": 1432110714, "creation_date": 1432109370, "answer_id": 30343846, "question_id": 30343799, "link": "https://stackoverflow.com/questions/30343799/printing-an-array-in-ruby/30343846#30343846", "title": "Printing an array in ruby", "body": "<p>you just need to use <code>puts</code> method. <code>puts</code> can add a newline to the end of the output. </p>\n\n<pre><code>[1, 2, 3, 4, 5].each do |i|\n    puts i\nend\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>1\n2\n3\n4\n5\n</code></pre>\n\n<p>or puts array directly.</p>\n\n<pre><code>a= [1, 2, 3, 4, 5]\nputs a\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>1\n2\n3\n4\n5\n</code></pre>\n\n<p>You also can use <code>print</code> method, but it does not add a newline, but you can add line break manually( for your requirement, I think it is not necessary)</p>\n\n<pre><code>[1, 2, 3, 4, 5].each { |i| print i; puts \"\\n\" }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2322, "user_id": 3088748, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/544821277/picture?type=large", "display_name": "AJFaraday", "link": "https://stackoverflow.com/users/3088748/ajfaraday"}, "edited": false, "score": 0, "creation_date": 1432111483, "post_id": 30343966, "comment_id": 48782145, "body": "I don&#39;t know why you&#39;d use anything but the second option here if you&#39;re doing nothing more complex than printing each member on a new line."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1432111721, "post_id": 30343966, "comment_id": 48782306, "body": "Using <code>map</code> is insane here."}, {"owner": {"reputation": 18308, "user_id": 1375209, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dweAo.png?s=128&g=1", "display_name": "toro2k", "link": "https://stackoverflow.com/users/1375209/toro2k"}, "edited": false, "score": 0, "creation_date": 1432135548, "post_id": 30343966, "comment_id": 48800324, "body": "You should use <code>each</code> not <code>map</code> here. Using <code>map</code> to produce just some side effect during iteration is, at least, confusing!"}], "tags": [], "owner": {"reputation": 17880, "user_id": 2155313, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fp9tO.jpg?s=128&g=1", "display_name": "errata", "link": "https://stackoverflow.com/users/2155313/errata"}, "is_accepted": false, "score": 1, "last_activity_date": 1432145092, "last_edit_date": 1432145092, "creation_date": 1432109693, "answer_id": 30343966, "question_id": 30343799, "link": "https://stackoverflow.com/questions/30343799/printing-an-array-in-ruby/30343966#30343966", "title": "Printing an array in ruby", "body": "<p>Simplest approach:</p>\n\n<pre><code>puts [1, 2, 3, 4, 5]\n</code></pre>\n\n<p>Also works:</p>\n\n<pre><code> [1, 2, 3, 4, 5].each{|x| p x}\n</code></pre>\n\n<p>This works although it has been called insane and I accept that.</p>\n\n<pre><code>[1, 2, 3, 4, 5].map{|x| p x}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1568, "user_id": 3957977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KVs29.jpg?s=128&g=1", "display_name": "Eugene Petrov", "link": "https://stackoverflow.com/users/3957977/eugene-petrov"}, "is_accepted": false, "score": 0, "last_activity_date": 1432120954, "creation_date": 1432120954, "answer_id": 30348208, "question_id": 30343799, "link": "https://stackoverflow.com/questions/30343799/printing-an-array-in-ruby/30348208#30348208", "title": "Printing an array in ruby", "body": "<p>Another way is to use a splat:</p>\n\n<pre><code>p *[1,2,3,4,5]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 366, "user_id": 2585056, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb3859e90d1b02a0e8b02d140e055860?s=128&d=identicon&r=PG", "display_name": "chrisdurheim", "link": "https://stackoverflow.com/users/2585056/chrisdurheim"}, "is_accepted": false, "score": 0, "last_activity_date": 1432212655, "last_edit_date": 1432212655, "creation_date": 1432158756, "answer_id": 30361031, "question_id": 30343799, "link": "https://stackoverflow.com/questions/30343799/printing-an-array-in-ruby/30361031#30361031", "title": "Printing an array in ruby", "body": "<p>Another option is as follows.  This pulls each array element out to one string with newlines for vertical display then prints it</p>\n\n<pre><code>puts [1, 2, 3, 4, 5].join(\"\\n\")\n</code></pre>\n\n<p>I ran a quick performance test to see how this compares to the other options.  On a 100 integer array, I got the following performance:</p>\n\n<ul>\n<li><p>puts arr took 1.08 seconds</p></li>\n<li><p>arr.each took 1.22 seconds</p></li>\n<li><p>arr.map took 1.24 seconds</p></li>\n<li><p>puts *arr took 1.08 seconds</p></li>\n<li><p>puts arr.join(\"\\n\") took 0.44 seconds</p></li>\n</ul>\n\n<p>Based on this, it looks like join is about 40-60% faster than the other options.  Granted performance may not be important to your usage :)</p>\n"}], "owner": {"reputation": 299, "user_id": 4263820, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/fae12d17d6a02d0d7cf958a226f62467?s=128&d=identicon&r=PG&f=1", "display_name": "harvey", "link": "https://stackoverflow.com/users/4263820/harvey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1432212655, "creation_date": 1432109260, "last_edit_date": 1432122370, "question_id": 30343799, "link": "https://stackoverflow.com/questions/30343799/printing-an-array-in-ruby", "title": "Printing an array in ruby", "body": "<p>I have an array as such :</p>\n\n<pre><code>[1, 2, 3, 4, 5]\n</code></pre>\n\n<p>How would I do to have my array printed vertically ? (1 on the first line, 2 on the second line etc...)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx", "passenger"], "comments": [{"owner": {"reputation": 9323, "user_id": 1047207, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/2U8wC.jpg?s=128&g=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/1047207/raj"}, "edited": false, "score": 0, "creation_date": 1432109598, "post_id": 30343774, "comment_id": 48780951, "body": "In which ruby version and gemset you want to install your gems? You need to specify that"}, {"owner": {"reputation": 10113, "user_id": 895487, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/336ae3b2e846448b71eb7d69e3d96a75?s=128&d=identicon&r=PG&f=1", "display_name": "malcoauri", "link": "https://stackoverflow.com/users/895487/malcoauri"}, "reply_to_user": {"reputation": 9323, "user_id": 1047207, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/2U8wC.jpg?s=128&g=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/1047207/raj"}, "edited": false, "score": 0, "creation_date": 1432109893, "post_id": 30343774, "comment_id": 48781134, "body": "I install RVM, install ruby 2.0, set this version and install bundler gem. As I understang gemset is default right? Where should I point ruby version? Thanks in advance!"}], "answers": [{"tags": [], "owner": {"reputation": 9323, "user_id": 1047207, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/2U8wC.jpg?s=128&g=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/1047207/raj"}, "is_accepted": true, "score": 0, "last_activity_date": 1432113577, "last_edit_date": 1432113577, "creation_date": 1432110566, "answer_id": 30344265, "question_id": 30343774, "link": "https://stackoverflow.com/questions/30343774/why-i-must-install-gems-manually-after-deploy-using-capistrano/30344265#30344265", "title": "Why I must install gems manually after deploy using Capistrano", "body": "<p>You need to specify the rvm ruby version &amp; gemset in your <code>deploy.rb</code> as follow:</p>\n\n<pre><code>set :rvm_ruby_version, '2.0.xx@mygemset'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2391, "user_id": 1581358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LpxS1.jpg?s=128&g=1", "display_name": "Karan Purohit", "link": "https://stackoverflow.com/users/1581358/karan-purohit"}, "is_accepted": false, "score": 0, "last_activity_date": 1432116211, "creation_date": 1432116211, "answer_id": 30346458, "question_id": 30343774, "link": "https://stackoverflow.com/questions/30343774/why-i-must-install-gems-manually-after-deploy-using-capistrano/30346458#30346458", "title": "Why I must install gems manually after deploy using Capistrano", "body": "<p>ssh into your server and type <code>which bundler</code></p>\n\n<p>it will return something like this:(your ubuntu user and ruby version will be different)</p>\n\n<p><code>/home/ubuntu_user/.rvm/gems/ruby-1.9.3-p327@global/bin/bundle</code></p>\n\n<p>copy this line and in your local - config/deploy/production:</p>\n\n<p><code>set :bundle_cmd, /home/ubuntu_user/.rvm/gems/ruby-1.9.3-p327@global/bin/bundle</code></p>\n\n<p>Add following lines in the same file:</p>\n\n<p><code>depend :remote, :gem, \"bundler\", \"&gt;=1.1.5\"</code></p>\n\n<p>(Also paste the lines written below and change, \"user\" to your ubuntu user and ruby version to the version you are using )</p>\n\n<p><code>set :default_environment, {\n    'BUNDLE_PATH' =&gt; '/home/user/.rvm/gems/ruby-1.9.3-p327@global/bin/',\n    'GEM_HOME' =&gt; '/home/user/.rvm/gems/ruby-1.9.3-p327',\n    'GEM_PATH'=&gt;'/home/user/.rvm/gems/ruby-1.9.3-p327:/home/user/.rvm/gems/ruby-1.9.3-p327@global',\n    'PATH'=&gt;'/home/user/.rvm/gems/ruby-1.9.3-p327/bin:/home/user/.rvm/gems/ruby-1.9.3-p327@global/bin:/home/user/.rvm/rubies/ruby-1.9.3-p327/bin:/home/user/.rvm/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games'\n}</code></p>\n"}], "owner": {"reputation": 10113, "user_id": 895487, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/336ae3b2e846448b71eb7d69e3d96a75?s=128&d=identicon&r=PG&f=1", "display_name": "malcoauri", "link": "https://stackoverflow.com/users/895487/malcoauri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1190, "favorite_count": 0, "accepted_answer_id": 30344265, "answer_count": 2, "score": 0, "last_activity_date": 1432116211, "creation_date": 1432109184, "question_id": 30343774, "link": "https://stackoverflow.com/questions/30343774/why-i-must-install-gems-manually-after-deploy-using-capistrano", "title": "Why I must install gems manually after deploy using Capistrano", "body": "<p>Ubuntu server, production mode. Install RVM with ruby (2.0) and Bundler. Capfile:</p>\n\n<pre><code># Load DSL and Setup Up Stages\nrequire 'capistrano/setup'\n\n# Includes default deployment tasks\nrequire 'capistrano/deploy'\n\n# Includes tasks from other gems included in your Gemfile\n#\n# For documentation on these, see for example:\n#\n#   https://github.com/capistrano/rvm\n#   https://github.com/capistrano/rbenv\n#   https://github.com/capistrano/chruby\n#   https://github.com/capistrano/bundler\n#   https://github.com/capistrano/rails\n#\nrequire 'capistrano/rvm'\n# require 'capistrano/rbenv'\n# require 'capistrano/chruby'\nrequire 'capistrano/bundler'\nrequire 'capistrano/rails/assets'\nrequire 'capistrano/rails/migrations'\n\n# Loads custom tasks from `lib/capistrano/tasks' if you have any defined.\nDir.glob('lib/capistrano/tasks/*.rake').each { |r| import r }\n</code></pre>\n\n<p>config/deploy/production:</p>\n\n<pre><code># Simple Role Syntax\n# ==================\n# Supports bulk-adding hosts to roles, the primary server in each group\n# is considered to be the first unless any hosts have the primary\n# property set.  Don't declare `role :all`, it's a meta role.\n\n# Extended Server Syntax\n# ======================\n# This can be used to drop a more detailed server definition into the\n# server list. The second argument is a, or duck-types, Hash and is\n# used to set extended properties on the server.\n\nset :stage, :production\nset :branch, 'master'\nset :deploy_to, 'xxxx'\nset :rails_env, 'production'\nset :deploy_via, :copy\n\nserver 'xxxx', user: 'xxxx', roles: %w{app web db}\n\n# Custom SSH Options\n# ==================\n# You may pass any option but keep in mind that net/ssh understands a\n# limited set of options, consult[net/ssh documentation](http://net-ssh.github.io/net-ssh/classes/Net/SSH.html#method-c-start).\n#\n# Global options\n# --------------\n#  set :ssh_options, {\n#    keys: %w(/home/rlisowski/.ssh/id_rsa),\n#    forward_agent: false,\n#    auth_methods: %w(password)\n#  }\n#\n# And/or per server (overrides global)\n# ------------------------------------\n# server 'example.com',\n#   user: 'user_name',\n#   roles: %w{web app},\n#   ssh_options: {\n#     user: 'user_name', # overrides user setting above\n#     keys: %w(/home/user_name/.ssh/id_rsa),\n#     forward_agent: false,\n#     auth_methods: %w(publickey password)\n#     # password: 'please use keys'\n#   }\n</code></pre>\n\n<p>deploy.rb:</p>\n\n<pre><code># config valid only for Capistrano 3.1\nlock '3.2.1'\n\nset :application, 'voting_app'\nset :scm,         :git\nset :repo_url,    'git@bitbucket.org:xxxx/xxxx_app.git'\n\n# Default branch is :master\n# ask :branch, proc { `git rev-parse --abbrev-ref HEAD`.chomp }.call\n\n# Default deploy_to directory is /var/www/my_app\n# set :deploy_to, '/var/www/my_app'\n\n# Default value for :scm is :git\n# set :scm, :git\n\n# Default value for :format is :pretty\n# set :format, :pretty\n\n# Default value for :log_level is :debug\n# set :log_level, :debug\n\n# Default value for :pty is false\n# set :pty, true\n\n# Default value for :linked_files is []\n# set :linked_files, %w{config/database.yml}\n\n# Default value for linked_dirs is []\n# set :linked_dirs, %w{bin log tmp/pids tmp/cache tmp/sockets vendor/bundle public/system}\n\n# Default value for default_env is {}\n# set :default_env, { path: \"/opt/ruby/bin:$PATH\" }\n\n# Default value for keep_releases is 5\n# set :keep_releases, 5\n\nnamespace :deploy do\n\n  desc 'Restart application'\n  task :restart do\n    on roles(:app), in: :sequence, wait: 5 do\n      # Your restart mechanism here, for example:\n      execute :mkdir, '-p', \"#{ release_path }/tmp\"\n      execute :touch, release_path.join('tmp/restart.txt')\n    end\n  end\n\n  after :publishing, :restart\n\n  after :restart, :clear_cache do\n    on roles(:web), in: :groups, limit: 3, wait: 10 do\n      # Here we can do anything such as:\n      # within release_path do\n      #   execute :rake, 'cache:clear'\n      # end\n    end\n  end\n\nend\n</code></pre>\n\n<p>Gemfile:</p>\n\n<pre><code>source 'https://rubygems.org'\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.1.6'\n# Use SLIM for HTML\ngem 'slim'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 4.0.3'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .js.coffee assets and views\ngem 'coffee-rails', '~&gt; 4.0.0'\n# See https://github.com/sstephenson/execjs#readme for more supported runtimes\ngem 'therubyracer',  platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.0',          group: :doc\n\n# Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\ngem 'spring',        group: :development\n\n# Bootstrap\ngem 'bootstrap-sass', '~&gt; 3.3.4'\n\n# Pagination\ngem 'will_paginate-bootstrap'\n\n# Authentication\ngem 'clearance'\ngem 'omniauth'\ngem 'omniauth-facebook'\ngem 'omniauth-vkontakte'\n\n# Database\ngem 'pg'\n\n# Elasticsearch\ngem 'elasticsearch-model'\ngem 'elasticsearch-rails'\n\n# Async tasks\ngem 'sidekiq'\n\n# Production deploy\ngroup :development do\n  gem 'capistrano',  '~&gt; 3.2.0'\n  gem 'capistrano-rails'\n  gem 'capistrano-bundler'\n  gem 'capistrano-rvm'\nend\n\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use unicorn as the app server\n# gem 'unicorn'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\n# Use debugger\n# gem 'debugger', group: [:development, :test]\n</code></pre>\n\n<p>After deploy capistrano runs migrations, but don't execute 'bundle install', because I see error:</p>\n\n<pre><code>It looks like Bundler could not find a gem. Maybe you didn't install all the gems that this application needs. To install your gems, please run:\n\nbundle install\n\n-------- The exception is as follows: -------\n\nCould not find rake-10.4.2 in any of the sources (Bundler::GemNotFound)\n</code></pre>\n\n<p>What does it mean? What I do wrong? Thanks in advance! </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "facebook", "facebook-graph-api", "post"], "comments": [{"owner": {"reputation": 9323, "user_id": 1047207, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/2U8wC.jpg?s=128&g=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/1047207/raj"}, "edited": false, "score": 0, "creation_date": 1432109002, "post_id": 30343674, "comment_id": 48780602, "body": "What&#39;s the error/issue?"}, {"owner": {"reputation": 1, "user_id": 4919282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/269ae9b56c02cf45994164f26e31c832?s=128&d=identicon&r=PG&f=1", "display_name": "hopeless", "link": "https://stackoverflow.com/users/4919282/hopeless"}, "reply_to_user": {"reputation": 9323, "user_id": 1047207, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/2U8wC.jpg?s=128&g=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/1047207/raj"}, "edited": false, "score": 0, "creation_date": 1432109104, "post_id": 30343674, "comment_id": 48780667, "body": "type: FacebookApiException, code: 100, error_subcode: 1349125, message: Invalid parameter [HTTP 500]"}, {"owner": {"reputation": 9323, "user_id": 1047207, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/2U8wC.jpg?s=128&g=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/1047207/raj"}, "edited": false, "score": 0, "creation_date": 1432109390, "post_id": 30343674, "comment_id": 48780833, "body": "Try <code>facebook.put_wall_post(@message)</code>. One message at a time, instead of an array of msgs"}, {"owner": {"reputation": 1, "user_id": 4919282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/269ae9b56c02cf45994164f26e31c832?s=128&d=identicon&r=PG&f=1", "display_name": "hopeless", "link": "https://stackoverflow.com/users/4919282/hopeless"}, "reply_to_user": {"reputation": 9323, "user_id": 1047207, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/2U8wC.jpg?s=128&g=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/1047207/raj"}, "edited": false, "score": 0, "creation_date": 1432109540, "post_id": 30343674, "comment_id": 48780916, "body": "I get the same error again"}, {"owner": {"reputation": 3232, "user_id": 2689002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zIvab.jpg?s=128&g=1", "display_name": "Amit Sharma", "link": "https://stackoverflow.com/users/2689002/amit-sharma"}, "edited": false, "score": 0, "creation_date": 1432109949, "post_id": 30343674, "comment_id": 48781173, "body": "have you tried this? <code>facebook.put_connections(&quot;me&quot;, &quot;feed&quot;, :message =&gt; &quot;I am writing on my wall!&quot;)</code>"}, {"owner": {"reputation": 1, "user_id": 4919282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/269ae9b56c02cf45994164f26e31c832?s=128&d=identicon&r=PG&f=1", "display_name": "hopeless", "link": "https://stackoverflow.com/users/4919282/hopeless"}, "edited": false, "score": 0, "creation_date": 1432110277, "post_id": 30343674, "comment_id": 48781389, "body": "Yes I have but I want the user to define his own post."}, {"owner": {"reputation": 3232, "user_id": 2689002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zIvab.jpg?s=128&g=1", "display_name": "Amit Sharma", "link": "https://stackoverflow.com/users/2689002/amit-sharma"}, "edited": false, "score": 0, "creation_date": 1432110590, "post_id": 30343674, "comment_id": 48781562, "body": "Please check the value of <code>@messege</code> variable. You can replace <code>:message =&gt; &quot;I am writing on my wall!&quot;</code> with <code>:message =&gt; &quot;#{@message}&quot;</code>"}, {"owner": {"reputation": 3232, "user_id": 2689002, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zIvab.jpg?s=128&g=1", "display_name": "Amit Sharma", "link": "https://stackoverflow.com/users/2689002/amit-sharma"}, "edited": false, "score": 0, "creation_date": 1432110745, "post_id": 30343674, "comment_id": 48781657, "body": "please post your controller code of <code>auth_facebook_callback</code> method"}, {"owner": {"reputation": 1, "user_id": 4919282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/269ae9b56c02cf45994164f26e31c832?s=128&d=identicon&r=PG&f=1", "display_name": "hopeless", "link": "https://stackoverflow.com/users/4919282/hopeless"}, "edited": false, "score": 0, "creation_date": 1432111438, "post_id": 30343674, "comment_id": 48782119, "body": "This is my routes.rb file     Rails.application.routes.draw do    get &#39;auth/facebook/callback&#39;, to: &#39;users#login&#39;   post &#39;auth/facebook/callback&#39;, to: &#39;users#login&#39; end"}], "owner": {"reputation": 1, "user_id": 4919282, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/269ae9b56c02cf45994164f26e31c832?s=128&d=identicon&r=PG&f=1", "display_name": "hopeless", "link": "https://stackoverflow.com/users/4919282/hopeless"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1432108952, "creation_date": 1432108952, "question_id": 30343674, "link": "https://stackoverflow.com/questions/30343674/how-to-post-on-facebook-wall-using-facebookapi-with-users-text-by-choice-on-rub", "title": "How to post on Facebook wall using FacebookApi with user&#39;s text by choice on ruby on rails 4", "body": "<p>I was searching for tutorial how to post on facebook wall some text by user's choice. Here is my login.html.erb file</p>\n\n<pre><code>&lt;p&gt;\n  &lt;%= form_for :koala,url: auth_facebook_callback_path,method: :post do |f| %&gt;\n    &lt;%= f.text_field @message %&gt; &lt;br /&gt;\n    &lt;%= f.submit \"Post!\" %&gt;\n  &lt;% end %&gt;\n&lt;/p&gt;\n</code></pre>\n\n<p>This is my user.rb model</p>\n\n<pre><code>def self.koala(auth)\n    access_token = auth['token']\n    facebook = Koala::Facebook::API.new(access_token)\n    facebook.get_object(\"me?fields=name,picture\")\n    facebook.put_wall_post([\"#{@message}\"])\n  end\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 14776, "user_id": 507423, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ecee09b51d6a3d476e100119299fd01b?s=128&d=identicon&r=PG", "display_name": "lukad", "link": "https://stackoverflow.com/users/507423/lukad"}, "is_accepted": false, "score": 1, "last_activity_date": 1432146434, "last_edit_date": 1432146434, "creation_date": 1432119935, "answer_id": 30347847, "question_id": 30343414, "link": "https://stackoverflow.com/questions/30343414/size-occupied-by-an-array-of-nil/30347847#30347847", "title": "size occupied by an array of nil", "body": "<p>Arrays with size smaller than or equal to <a href=\"https://github.com/ruby/ruby/blob/fdb957925f2f3053a0cd45aecb5cd6d65482a79e/include/ruby/ruby.h#L884\" rel=\"nofollow\"><code>RARRAY_EMBED_LEN_MAX</code></a> (default is 3) will be embedded to improve performance for small arrays. Basically, an array with 3 items or less <a href=\"https://github.com/ruby/ruby/blob/fdb957925f2f3053a0cd45aecb5cd6d65482a79e/array.c#L476\" rel=\"nofollow\">will not be allocated on the heap</a>.</p>\n\n<p>This explains the confusing output of your example.</p>\n\n<pre><code>require 'objspace'\n(1..10).to_a.each { |i| p [nil] * i, ObjectSpace.memsize_of([nil] * i) }\n[nil]\n0\n[nil, nil]\n0\n[nil, nil, nil]\n0\n[nil, nil, nil, nil]\n32\n[nil, nil, nil, nil, nil]\n40\n[nil, nil, nil, nil, nil, nil]\n48\n[nil, nil, nil, nil, nil, nil, nil]\n56\n[nil, nil, nil, nil, nil, nil, nil, nil]\n64\n[nil, nil, nil, nil, nil, nil, nil, nil, nil]\n72\n[nil, nil, nil, nil, nil, nil, nil, nil, nil, nil]\n80\n=&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n</code></pre>\n\n<p>Note that <code>ObjectSpace.memsize_of(array)</code> will only give you the size of the array object itself excluding its items.</p>\n"}], "owner": {"reputation": 954, "user_id": 1246368, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2nq6I.jpg?s=128&g=1", "display_name": "Vignesh Jayavel", "link": "https://stackoverflow.com/users/1246368/vignesh-jayavel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1432146434, "creation_date": 1432108102, "last_edit_date": 1432129201, "question_id": 30343414, "link": "https://stackoverflow.com/questions/30343414/size-occupied-by-an-array-of-nil", "title": "size occupied by an array of nil", "body": "<p>I have an array of nil, say</p>\n\n<pre><code>a = [nil,nil,nil]\n</code></pre>\n\n<p>what is the size (in bytes) of array a?</p>\n\n<p>I use ruby 1.9.3p484</p>\n\n<p>I tried ObjectSpace.memsize_of() method, but the output is quite confusing.</p>\n\n<pre><code>&gt;&gt; a = [nil,nil,nil]\n=&gt; [nil, nil, nil]\n&gt;&gt; ObjectSpace.memsize_of(a)\n=&gt; 0\n&gt;&gt; a = [nil,nil,nil,nil]\n=&gt; [nil, nil, nil, nil]\n&gt;&gt; ObjectSpace.memsize_of(a)\n=&gt; 32\n&gt;&gt; a = [nil,nil,nil,nil,nil]\n=&gt; [nil, nil, nil, nil, nil]\n&gt;&gt; ObjectSpace.memsize_of(a)\n=&gt; 40\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 9786, "user_id": 485864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34b46a9a4723bdbc6e1fdcf71b08517?s=128&d=identicon&r=PG", "display_name": "vgoff", "link": "https://stackoverflow.com/users/485864/vgoff"}, "edited": false, "score": 0, "creation_date": 1432105207, "post_id": 30342215, "comment_id": 48778219, "body": "Right now you are simply outputting each item from the enumerator that is returned from the <code>foreach</code> method.  If you use the <code>read</code> method from <code>CSV</code> library you will have an array that is returned that holds in each element an array that holds each item of the row.  This will help you pursue it further."}], "answers": [{"comments": [{"owner": {"reputation": 479, "user_id": 1127716, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/af2693a82bd1cccd61efade19c88beba?s=128&d=identicon&r=PG", "display_name": "Archana", "link": "https://stackoverflow.com/users/1127716/archana"}, "edited": false, "score": 0, "creation_date": 1432107171, "post_id": 30342408, "comment_id": 48779504, "body": "Thanks Taryn for replying. How to convert                                                     [&quot;1&quot;, &quot;2&quot;, &quot;4&quot;, &quot;67&quot;, &quot;100&quot;, &quot;41&quot;, &quot;234&quot;]                                                            to display as                                                                                                        [1,2,4,67,100,41,234]"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "reply_to_user": {"reputation": 479, "user_id": 1127716, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/af2693a82bd1cccd61efade19c88beba?s=128&d=identicon&r=PG", "display_name": "Archana", "link": "https://stackoverflow.com/users/1127716/archana"}, "edited": false, "score": 0, "creation_date": 1432107330, "post_id": 30342408, "comment_id": 48779598, "body": "I add that. Are they always going to be numbers or possibly other strings?"}, {"owner": {"reputation": 479, "user_id": 1127716, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/af2693a82bd1cccd61efade19c88beba?s=128&d=identicon&r=PG", "display_name": "Archana", "link": "https://stackoverflow.com/users/1127716/archana"}, "edited": false, "score": 0, "creation_date": 1432122489, "post_id": 30342408, "comment_id": 48789982, "body": "The output is like this                                                                                        John: [1,2,4,67,100,41,234 ]  Matt: [45,23,67,67,300,250]                                                                                                                              I need a bit more help     I need to store the outputs  to variables and i will have to use them into a google chart                                                          1.a Legend1 = John 1.b Legend2 = Maria 2.a Data_array1 = [1,2,4,67,100,41,234] 2.b Data_array2 = [45,23,67,a,67,300,250]"}, {"owner": {"reputation": 479, "user_id": 1127716, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/af2693a82bd1cccd61efade19c88beba?s=128&d=identicon&r=PG", "display_name": "Archana", "link": "https://stackoverflow.com/users/1127716/archana"}, "edited": false, "score": 0, "creation_date": 1432125265, "post_id": 30342408, "comment_id": 48792001, "body": "I found the resolution for this . Thanks."}], "tags": [], "owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "is_accepted": true, "score": 0, "last_activity_date": 1432167392, "last_edit_date": 1432167392, "creation_date": 1432105054, "answer_id": 30342408, "question_id": 30342215, "link": "https://stackoverflow.com/questions/30342215/extract-the-contents-from-csv-into-an-array/30342408#30342408", "title": "Extract the contents from CSV into an array", "body": "<p>I would recommend not using CSV.read for this it's too simple for that - instead, use File.open and read each line and treat it as a big string.</p>\n\n<p>eg:</p>\n\n<pre><code># this turns the file into an array of lines\n# eg you now have: [\"John,1,2,4,67,100,41,234\", \"Maria,45,23,67,a,67,300,250\"]\nlines = File.readlines('samples/linechart.csv')\n\n# if you want to do this for each line, just iterate over this array:\nlines.each do |line|\n\n  # now split each line by the commas to turn it into an array of strings\n  # eg you have: [\"john\",\"1\",\"2\",\"4\",\"67\",\"100\",\"41\",\"234\"]\n   values = line.split(',')\n\n  # now, grab the first one as you name and the rest of them as an array of strings\n  legend = values[0]        # \"john\"\n  data_array = values[1..-1]  # [\"1\",\"2\",\"4\",\"67\",\"100\",\"41\",\"234\"]\n\n  # now do what you need to do with the name/numbers eg\n  puts \"#{legend}: [#{data_array.join(',')}]\"\n\n  # if you want the second array to be actual numbers instead of strings, you can convert them to numbers using to_i (or to_f if you want floats instead of integers)\n  # the following says \"take each value and call to_i on it and return the set of new values\"\n  data_array = data_array.map(&amp;:to_i)\n\nend # end of iterating over the array\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 0, "last_activity_date": 1432105098, "creation_date": 1432105098, "answer_id": 30342429, "question_id": 30342215, "link": "https://stackoverflow.com/questions/30342215/extract-the-contents-from-csv-into-an-array/30342429#30342429", "title": "Extract the contents from CSV into an array", "body": "<p>First get the data out of csv like:</p>\n\n<pre><code>require 'csv'   \ncsv_text = File.read('/tmp/a.csv')\ncsv = CSV.parse(csv_text)\n# =&gt; [[\"John\", \"1\", \"2\", \"4\", \"67\", \"100\", \"41\", \"234\"], [\"Maria\", \"45\", \"23\", \"67\", \"a\", \"67\", \"300\", \"250\"]] \n</code></pre>\n\n<p>Now you can format output as per your requirements. Eg:</p>\n\n<pre><code>csv.each.with_index(1){ |a, i|\n  puts \"Legend#{i.to_s} = #{a[0]}\"\n}\n# Legend1 = John\n# Legend2 = Maria\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6838, "user_id": 680001, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7a1ec53845532ff7ab726ea809cffa74?s=128&d=identicon&r=PG", "display_name": "Sayuj", "link": "https://stackoverflow.com/users/680001/sayuj"}, "is_accepted": false, "score": 0, "last_activity_date": 1432105605, "last_edit_date": 1432105605, "creation_date": 1432105218, "answer_id": 30342463, "question_id": 30342215, "link": "https://stackoverflow.com/questions/30342215/extract-the-contents-from-csv-into-an-array/30342463#30342463", "title": "Extract the contents from CSV into an array", "body": "<p>You may looking for this,</p>\n\n<pre><code>csv = CSV.new(body)\ncsv.to_a\n</code></pre>\n\n<p>You can have a look at <a href=\"http://technicalpickles.com/posts/parsing-csv-with-ruby/\" rel=\"nofollow\">http://technicalpickles.com/posts/parsing-csv-with-ruby/</a></p>\n\n<p>Reference <a href=\"http://snippets.aktagon.com/snippets/246-how-to-parse-csv-data-with-ruby\" rel=\"nofollow\">this</a>, too, if needed.</p>\n"}, {"comments": [{"owner": {"reputation": 479, "user_id": 1127716, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/af2693a82bd1cccd61efade19c88beba?s=128&d=identicon&r=PG", "display_name": "Archana", "link": "https://stackoverflow.com/users/1127716/archana"}, "edited": false, "score": 0, "creation_date": 1432106977, "post_id": 30342955, "comment_id": 48779369, "body": "Thanks for replying. How to convert [&quot;1&quot;, &quot;2&quot;, &quot;4&quot;, &quot;67&quot;, &quot;100&quot;, &quot;41&quot;, &quot;234&quot;] to [1,2,4,67,100,41,234]"}, {"owner": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "reply_to_user": {"reputation": 479, "user_id": 1127716, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/af2693a82bd1cccd61efade19c88beba?s=128&d=identicon&r=PG", "display_name": "Archana", "link": "https://stackoverflow.com/users/1127716/archana"}, "edited": false, "score": 1, "creation_date": 1432107357, "post_id": 30342955, "comment_id": 48779610, "body": "try this: <code>array.map(&amp;:to_i)</code>. Assuming array holds that array."}], "tags": [], "owner": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "is_accepted": false, "score": 0, "last_activity_date": 1432107495, "last_edit_date": 1432107495, "creation_date": 1432106719, "answer_id": 30342955, "question_id": 30342215, "link": "https://stackoverflow.com/questions/30342215/extract-the-contents-from-csv-into-an-array/30342955#30342955", "title": "Extract the contents from CSV into an array", "body": "<p>Over-engineered version ;)</p>\n\n<pre><code>class Lines\n  class Line\n    attr_reader :legend, :array\n\n    def initialize(line)\n      @line = line\n      parse\n    end\n\n    private\n\n    def parse\n      @legend, *array = @line.strip.split(\",\")\n      @array = array.map(&amp;:to_i)\n    end\n  end\n\n  def self.parse(file_name)\n    File.readlines(file_name).map do |line|\n      Line.new(line)\n    end\n  end\nend\n\nLines.parse(\"file_name.csv\").each do |o|\n  p o.legend\n  p o.array\n  puts\nend\n\n# Result:\n#\n# \"John\"\n# [1, 2, 4, 67, 100, 41, 234]\n#\n# \"Maria\"\n# [45, 23, 67, 68, 300, 250]\n</code></pre>\n\n<p><strong>Notes</strong>:</p>\n\n<ol>\n<li>Basically, <code>Lines.parse(\"file_name.csv\")</code> will give you an array of objects that will respond to the methods: <code>legend</code> and <code>array</code>; which holds the <em>name</em> and <em>array of numbers</em> respectively.</li>\n<li>Jokes aside, I think OO will help maintainability.</li>\n</ol>\n"}], "owner": {"reputation": 479, "user_id": 1127716, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/af2693a82bd1cccd61efade19c88beba?s=128&d=identicon&r=PG", "display_name": "Archana", "link": "https://stackoverflow.com/users/1127716/archana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 30342408, "answer_count": 4, "score": 0, "last_activity_date": 1432167392, "creation_date": 1432104441, "last_edit_date": 1432107744, "question_id": 30342215, "link": "https://stackoverflow.com/questions/30342215/extract-the-contents-from-csv-into-an-array", "title": "Extract the contents from CSV into an array", "body": "<p>I have a CSV file with contents:</p>\n\n<pre><code>John,1,2,4,67,100,41,234\nMaria,45,23,67,68,300,250\n</code></pre>\n\n<p>I need to read this content and separate these data into two sections:</p>\n\n<pre><code>1.a Legend1 = John\n1.b Legend2 = Maria\n2.a Data_array1 = [1,2,4,67,100,41,234]\n2.b Data_array2 = [45,23,67,a,67,300,250]\n</code></pre>\n\n<p>Here is my code; it reads the contents and separates the contents from <code>','</code>.</p>\n\n<pre><code>testsample = CSV.read('samples/linechart.csv')\nCSV.foreach('samples/linechart.csv') do |row|\n  puts row\nend\n</code></pre>\n\n<p>Its output results in a class of array elements. I am stuck in pursuing it further.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 9323, "user_id": 1047207, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/2U8wC.jpg?s=128&g=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/1047207/raj"}, "edited": false, "score": 3, "creation_date": 1432104472, "post_id": 30342194, "comment_id": 48777725, "body": "SO is not a code writing service provider :) Try to R&amp;D. Post specific errors for better help. Not sure if <a href=\"https://github.com/thoughtbot/griddler\" rel=\"nofollow noreferrer\">github.com/thoughtbot/griddler</a> can help you"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 1, "creation_date": 1432105284, "post_id": 30342194, "comment_id": 48778273, "body": "hi and welcome to stack overflow. Here we expect you to research your topic first, try out any tutorials on the subject, and come back to us then show us the code you have written (even if it is not working), and explain what the error is that you&#39;re getting and what you were expecting yourself. We won&#39;t write or design your code for you. We won&#39;t help you find tutorials or libraries when you can use google for that."}], "answers": [{"comments": [{"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1432200622, "post_id": 30342658, "comment_id": 48829864, "body": "that looks great. Gonna test it. Is there a possibility to check if a mail is read or not in pop mailbox?"}], "tags": [], "owner": {"reputation": 6838, "user_id": 680001, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/7a1ec53845532ff7ab726ea809cffa74?s=128&d=identicon&r=PG", "display_name": "Sayuj", "link": "https://stackoverflow.com/users/680001/sayuj"}, "is_accepted": true, "score": 2, "last_activity_date": 1432105723, "creation_date": 1432105723, "answer_id": 30342658, "question_id": 30342194, "link": "https://stackoverflow.com/questions/30342194/checking-mail-bock-with-rails/30342658#30342658", "title": "Checking Mail Bock with Rails", "body": "<p><a href=\"https://github.com/mikel/mail\" rel=\"nofollow\">Mail Gem</a> may helps you.</p>\n\n<p>You can configure Mail to receive email using <code>retriever_method</code> within <code>Mail.defaults</code>:</p>\n\n<pre><code>Mail.defaults do\nretriever_method :pop3, :address    =&gt; \"pop.gmail.com\",\n                      :port       =&gt; 995,\n                      :user_name  =&gt; '&lt;username&gt;',\n                      :password   =&gt; '&lt;password&gt;',\n                      :enable_ssl =&gt; true\nend\n</code></pre>\n\n<p>You can access incoming email in a number of ways.</p>\n\n<p>The most recent email:</p>\n\n<pre><code>Mail.all    #=&gt; Returns an array of all emails\nMail.first  #=&gt; Returns the first unread email\nMail.last   #=&gt; Returns the last unread email\n</code></pre>\n"}], "owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 30342658, "answer_count": 1, "score": 0, "last_activity_date": 1432105723, "creation_date": 1432104383, "question_id": 30342194, "link": "https://stackoverflow.com/questions/30342194/checking-mail-bock-with-rails", "title": "Checking Mail Bock with Rails", "body": "<p>is there any possibility to check a normal mail box with rails? </p>\n\n<p>I want to check if there are new incoming mails, I want to open those and read the text to find a special string in it.</p>\n\n<p>Is this possible? and how?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "sum"], "comments": [{"owner": {"reputation": 1473, "user_id": 3173665, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e4f32eea9b60872a87bf1a04847ce267?s=128&d=identicon&r=PG&f=1", "display_name": "bhanu", "link": "https://stackoverflow.com/users/3173665/bhanu"}, "edited": false, "score": 0, "creation_date": 1432103875, "post_id": 30341897, "comment_id": 48777332, "body": "you might need to create a separate table in you database to track <code>xoi_qb</code> values when ever it is updated."}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 4813757, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1e7b33aec8f57da2012bfaaa344a7818?s=128&d=identicon&r=PG&f=1", "display_name": "cwayne2", "link": "https://stackoverflow.com/users/4813757/cwayne2"}, "edited": false, "score": 0, "creation_date": 1432178702, "post_id": 30342196, "comment_id": 48819175, "body": "But how do I define &quot;xoi_qb_was&quot;? I&#39;m getting the error   <code>undefined method </code>xoi_qb_was&#39;`"}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "reply_to_user": {"reputation": 93, "user_id": 4813757, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1e7b33aec8f57da2012bfaaa344a7818?s=128&d=identicon&r=PG&f=1", "display_name": "cwayne2", "link": "https://stackoverflow.com/users/4813757/cwayne2"}, "edited": false, "score": 0, "creation_date": 1432179336, "post_id": 30342196, "comment_id": 48819350, "body": "Its a Rails feature. <code>_was</code> appended to an attribute returns its previous value."}, {"owner": {"reputation": 93, "user_id": 4813757, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1e7b33aec8f57da2012bfaaa344a7818?s=128&d=identicon&r=PG&f=1", "display_name": "cwayne2", "link": "https://stackoverflow.com/users/4813757/cwayne2"}, "edited": false, "score": 0, "creation_date": 1432179715, "post_id": 30342196, "comment_id": 48819450, "body": "Ok...why do you think I&#39;m getting the &quot;undefined method error?&quot; It looks like &quot;last_xoi_qb&quot; would need to be defined as well, no? (And thank you so much for your help!!! I must be close) Could it be because of this in the controller?...    <code>@quarterback = QbPlayer.find(params[:id])     # Update the object     if  @quarterback.update_attributes(quarterback_params)       # If update succeeds, redirect to the index action       flash[:notice] = &quot;Player updated successfully.&quot;       redirect_to(:action =&gt; &#39;show&#39;, :id =&gt; @quarterback.id)</code>"}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "reply_to_user": {"reputation": 93, "user_id": 4813757, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1e7b33aec8f57da2012bfaaa344a7818?s=128&d=identicon&r=PG&f=1", "display_name": "cwayne2", "link": "https://stackoverflow.com/users/4813757/cwayne2"}, "edited": false, "score": 0, "creation_date": 1432180029, "post_id": 30342196, "comment_id": 48819526, "body": "Oh because you need to <code>include ActiveModel::Dirty</code>. <a href=\"http://api.rubyonrails.org/classes/ActiveModel/Dirty.html\" rel=\"nofollow noreferrer\">Here</a>"}, {"owner": {"reputation": 93, "user_id": 4813757, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1e7b33aec8f57da2012bfaaa344a7818?s=128&d=identicon&r=PG&f=1", "display_name": "cwayne2", "link": "https://stackoverflow.com/users/4813757/cwayne2"}, "edited": false, "score": 0, "creation_date": 1432188319, "post_id": 30342196, "comment_id": 48822418, "body": "Include ActiveModel::Dirty in the Controller, correct?"}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 0, "last_activity_date": 1432104390, "creation_date": 1432104390, "answer_id": 30342196, "question_id": 30341897, "link": "https://stackoverflow.com/questions/30341897/saving-repeated-iterations-to-database/30342196#30342196", "title": "Saving Repeated Iterations to Database", "body": "<p>You can use <code>before_save</code> callback in your corresponding model followed by accessing previous value as <code>_was</code></p>\n\n<p>Is should look something like:</p>\n\n<pre><code>before_save :store_last_xoi_qb\n\ndef store_last_xoi_qb\n  last_xoi_qb = self.xoi_qb_was\n  # do your things\nend\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 4813757, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/1e7b33aec8f57da2012bfaaa344a7818?s=128&d=identicon&r=PG&f=1", "display_name": "cwayne2", "link": "https://stackoverflow.com/users/4813757/cwayne2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432111891, "creation_date": 1432103426, "last_edit_date": 1432111891, "question_id": 30341897, "link": "https://stackoverflow.com/questions/30341897/saving-repeated-iterations-to-database", "title": "Saving Repeated Iterations to Database", "body": "<p>I'm pretty new to rails. </p>\n\n<p>I have multiple datapoints that I am saving in my database for a subject called \"quarterback\". All of those datapoints are added together to for the value \"xoi_qb\". This calculation is performed in my model:</p>\n\n<pre><code>  def xoi_qb\n    sum=0\n    sum+= passing_yards|| 0\n    sum+= passing_yards|| 0\n    sum+= qb_rushing|| 0\n</code></pre>\n\n<p>Each value will change over time, and so the total of the sum, \"xoi_qb\", will change over time. Currently, the total for \"xoi_qb\" just updates and the previous total is lost.</p>\n\n<p>What I'd like to do is save each iteration of that total, every time it's changed. I don't want to do a \"cron job\", because I don't want to create a time-based schedule that performs a rake to see if any changes were made...I just want that total for each \"quarterback\" value \"xoi_qb\" to be saved to the database <strong><em>each time</em></strong> that I make a change. </p>\n\n<p>That way, each \"quarterback\" will end up with many \"xoi_qb\" values that go up and down in value. Right now, I just want to solve this and then eventually I'd like to plot the datapoints in a chart (with Highcharts or something similar). But for now, I just need to know how to save each \"xoi_qb\" total with each change.</p>\n\n<p>I have no idea how to do this. </p>\n"}, {"tags": ["arrays", "ruby", "class", "instance", "instance-variables"], "comments": [{"owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "edited": false, "score": 0, "creation_date": 1432100671, "post_id": 30341060, "comment_id": 48775786, "body": "When you call <code>puts</code>, you are implicitly calling the <code>to_s</code> method of the object.  By default it prints the instance&#39;s address. Steffen&#39;s answer will do the trick for you."}], "answers": [{"comments": [{"owner": {"reputation": 70, "user_id": 4918874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/415770034c06fdef1ec13baee042edf9?s=128&d=identicon&r=PG", "display_name": "Sasori_Zero", "link": "https://stackoverflow.com/users/4918874/sasori-zero"}, "edited": false, "score": 0, "creation_date": 1432101252, "post_id": 30341147, "comment_id": 48776015, "body": "Worked like a charm, good to know the casts can be overloaded."}], "tags": [], "owner": {"reputation": 5075, "user_id": 1183192, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/4864143354683a8fd5360e8c57897445?s=128&d=identicon&r=PG", "display_name": "stevecross", "link": "https://stackoverflow.com/users/1183192/stevecross"}, "is_accepted": true, "score": 1, "last_activity_date": 1432100466, "creation_date": 1432100466, "answer_id": 30341147, "question_id": 30341060, "link": "https://stackoverflow.com/questions/30341060/ruby-can-an-instance-variable-be-printed-instead-of-the-instance-address/30341147#30341147", "title": "Ruby can an instance variable be printed instead of the instance address?", "body": "<p>Just override the <code>to_s</code> method like this:</p>\n\n<pre><code>def to_s\n  wName\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4530, "user_id": 3259320, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83a84c55be5441370dbd6273169048c6?s=128&d=identicon&r=PG", "display_name": "Rob Wise", "link": "https://stackoverflow.com/users/3259320/rob-wise"}, "is_accepted": false, "score": 0, "last_activity_date": 1432100562, "creation_date": 1432100562, "answer_id": 30341169, "question_id": 30341060, "link": "https://stackoverflow.com/questions/30341060/ruby-can-an-instance-variable-be-printed-instead-of-the-instance-address/30341169#30341169", "title": "Ruby can an instance variable be printed instead of the instance address?", "body": "<p>If you want to have an output like <code>[\"M16\"]</code> just by using a single <code>puts</code>, I would use the <code>.map</code> method of <code>Array</code> like this:</p>\n\n<pre><code>namesArray = vA.map do |weapon|\n  weapon.wName\nend\n\nputs namesArray\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 626, "user_id": 3633622, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448bd082428a74ed8eee386fb50834ca?s=128&d=identicon&r=PG", "display_name": "gordonturibamwe", "link": "https://stackoverflow.com/users/3633622/gordonturibamwe"}, "is_accepted": false, "score": 1, "last_activity_date": 1432102652, "creation_date": 1432102652, "answer_id": 30341687, "question_id": 30341060, "link": "https://stackoverflow.com/questions/30341060/ruby-can-an-instance-variable-be-printed-instead-of-the-instance-address/30341687#30341687", "title": "Ruby can an instance variable be printed instead of the instance address?", "body": "<pre><code>class WeaponItem  \n  attr_reader :wName  \n  def initialize(wName,mPower,mxPower)    \n    @wName = wName\n    @mP = mPower\n    @mxP = mxPower\n  end\n\n  def getStats\n    puts \"Weapon\"\n    puts \"Name: #{@wName}\"\n    puts \"Damage: #{@mP}~#{@mxP}\"\n  end\n\n  def calculateDamage()\n    rMAX = @mxP/@mP\n    rMAX\n  end \nend\n\nvA = Array.new\nwP = WeaponItem.new(\"M16A1\", 5, 15)\nvA.push(wP.wName)\nprint vA\n#=&gt; [\"M16A1\"]\n</code></pre>\n"}], "owner": {"reputation": 70, "user_id": 4918874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/415770034c06fdef1ec13baee042edf9?s=128&d=identicon&r=PG", "display_name": "Sasori_Zero", "link": "https://stackoverflow.com/users/4918874/sasori-zero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 30341147, "answer_count": 3, "score": 1, "last_activity_date": 1432182967, "creation_date": 1432100111, "last_edit_date": 1432182967, "question_id": 30341060, "link": "https://stackoverflow.com/questions/30341060/ruby-can-an-instance-variable-be-printed-instead-of-the-instance-address", "title": "Ruby can an instance variable be printed instead of the instance address?", "body": "<p>I was recently experimenting in ruby and came across a snag. I want to push a class instance to an array and instead of it output this when the array elements are printed:\n[#&lt; WeaponItem:0x00000002a28058 @wName=\"M16A1\", @mP=5, @mxP=35 >]</p>\n\n<p>I instead want it to output:</p>\n\n<blockquote>\n  <p>[\"M16A1\"]</p>\n</blockquote>\n\n<p>but symbols and instance variables (self.variable, self.class.variable) don't have the intended effect and I can't hammer just the right method so I was wondering if this is even a possible endeavor.</p>\n\n<p>Code:</p>\n\n<pre><code>class WeaponItem  \n  attr_reader :wName  \n  def initialize(wName,mPower,mxPower)    \n    @wName = wName\n    @mP = mPower\n    @mxP = mxPower\n  end\n\n  def getStats\n    puts \"Weapon\"\n    puts \"Name: #{@wName}\"\n    puts \"Damage: #{@mP}~#{@mxP}\"\n  end\n\n  def calculateDamage()\n    rMAX = @mxP/@mP\n    rMAX\n  end  \nend\n\nvA = Array.new(3){0}\nwP = WeaponItem.new(\"M16A1\", 5, 15)\nvA.push(wP)\nprint vA\n</code></pre>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise", "http-authentication"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 3727630, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f2230897febffd13f9770edc0e0f1acc?s=128&d=identicon&r=PG&f=1", "display_name": "hrrf", "link": "https://stackoverflow.com/users/3727630/hrrf"}, "edited": false, "score": 0, "creation_date": 1432152171, "post_id": 30341392, "comment_id": 48810348, "body": "This didn&#39;t work either, still getting the same 401 on the route defined at <code>&#39;&#47;my-chosen-path&#39;</code>, so I&#39;m looking to see what else could be conflicting."}], "tags": [], "owner": {"reputation": 9323, "user_id": 1047207, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/2U8wC.jpg?s=128&g=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/1047207/raj"}, "is_accepted": false, "score": 0, "last_activity_date": 1432101541, "creation_date": 1432101541, "answer_id": 30341392, "question_id": 30340231, "link": "https://stackoverflow.com/questions/30340231/bypassing-devise-when-using-a-gem-that-mounts-an-engine-in-rails/30341392#30341392", "title": "Bypassing devise when using a gem that mounts an engine in rails", "body": "<p>You can specify the routes for that devise should not authenticate:</p>\n\n<pre><code>unauthenticated do\n  mount anEngine, at: '/my-chosen-path' # provide a custom path\nend\n</code></pre>\n\n<p>Source: <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Define-resource-actions-that-require-authentication-using-routes.rb\" rel=\"nofollow\">Devise Wiki</a></p>\n\n<p>Further reading:\n<a href=\"https://github.com/plataformatec/devise/issues/2393\" rel=\"nofollow\">https://github.com/plataformatec/devise/issues/2393</a></p>\n"}], "owner": {"reputation": 33, "user_id": 3727630, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f2230897febffd13f9770edc0e0f1acc?s=128&d=identicon&r=PG&f=1", "display_name": "hrrf", "link": "https://stackoverflow.com/users/3727630/hrrf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 139, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1432101541, "creation_date": 1432095830, "question_id": 30340231, "link": "https://stackoverflow.com/questions/30340231/bypassing-devise-when-using-a-gem-that-mounts-an-engine-in-rails", "title": "Bypassing devise when using a gem that mounts an engine in rails", "body": "<p>I'm using a gem that loads an engine to simplify my handing of webhooks.</p>\n\n<pre><code># config/routes.rb\nmount anEngine, at: '/my-chosen-path' # provide a custom path\n</code></pre>\n\n<p>My problem is that <code>ApplicationController</code> is implementing devise for authentication on all routes.  I'd like for the route provided by this engine to only be HTTP basic authentication, and to bypass devise completely.</p>\n\n<p>I'm not sure what to do.  Help?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 12345, "user_id": 429758, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ff984622cd3a9ca31bd0e7e034fc8b17?s=128&d=identicon&r=PG", "display_name": "Prakash Murthy", "link": "https://stackoverflow.com/users/429758/prakash-murthy"}, "edited": false, "score": 1, "creation_date": 1432094523, "post_id": 30340012, "comment_id": 48773732, "body": "That should work fine; what error do you get? Or what&#39;s the resulting url? You could also try string interpolation -  <code>&quot;http:&#47;&#47;maps.google.com&#47;maps?saddr=#{location.start}&amp;daddr=#&zwnj;&#8203;{location.end}&amp;hl=en&zwnj;&#8203;&quot;</code>"}, {"owner": {"reputation": 1781, "user_id": 3277633, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d4a27cdac076e1e488208b60677242e0?s=128&d=identicon&r=PG&f=1", "display_name": "user3277633", "link": "https://stackoverflow.com/users/3277633/user3277633"}, "reply_to_user": {"reputation": 12345, "user_id": 429758, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/ff984622cd3a9ca31bd0e7e034fc8b17?s=128&d=identicon&r=PG", "display_name": "Prakash Murthy", "link": "https://stackoverflow.com/users/429758/prakash-murthy"}, "edited": false, "score": 0, "creation_date": 1432094753, "post_id": 30340012, "comment_id": 48773799, "body": "The error I&#39;m getting is &quot;no implicit conversion of nil into String&quot;. I tried string interpolation, but for some reason that simply replaces starting to #{location.start}, and not the actual start string"}, {"owner": {"reputation": 740, "user_id": 1528703, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b79a44057a2a603ce63d669394825958?s=128&d=identicon&r=PG", "display_name": "Rohan Pujari", "link": "https://stackoverflow.com/users/1528703/rohan-pujari"}, "edited": false, "score": 1, "creation_date": 1432096040, "post_id": 30340012, "comment_id": 48774140, "body": "&quot;no implicit conversion of nil into String&quot; might occur because either location.start or location.end is nil. Try this in console &#39;str&#39; + nil same error will be returned. Check location.start.nil? and location.end.nil? before using the link"}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1432102238, "post_id": 30340012, "comment_id": 48776455, "body": "if location.read_attribute(:start) shows your string but location.start doesn&#39;t then something is overwriting the accessor generated by activerecord"}], "answers": [{"tags": [], "owner": {"reputation": 1193, "user_id": 4687420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1925494165bbab5d1872309328311d5f?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/4687420/kevin"}, "is_accepted": false, "score": 0, "last_activity_date": 1432098772, "creation_date": 1432098772, "answer_id": 30340746, "question_id": 30340012, "link": "https://stackoverflow.com/questions/30340012/in-rails-how-to-add-ruby-syntax-to-a-string-in-link-to/30340746#30340746", "title": "In rails, how to add ruby syntax to a string in link_to?", "body": "<p>You can use string interpolation:</p>\n\n<pre><code>= link_to 'Get Driving Directions!', \"http://maps.google.com/maps?saddr=#{location.start}&amp;daddr=#{location.end}&amp;hl=en\"\n</code></pre>\n\n<p>Note that I've used <code>\"</code> (quotes) instead of <code>'</code> (single quotes) when using string interpolation otherwise it won't work.</p>\n"}, {"tags": [], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "is_accepted": false, "score": 0, "last_activity_date": 1432100179, "last_edit_date": 1432100179, "creation_date": 1432099504, "answer_id": 30340916, "question_id": 30340012, "link": "https://stackoverflow.com/questions/30340012/in-rails-how-to-add-ruby-syntax-to-a-string-in-link-to/30340916#30340916", "title": "In rails, how to add ruby syntax to a string in link_to?", "body": "<p>You can use <code>to_params</code> method.</p>\n\n<pre><code>params = {\"saddr\" =&gt; \"starting\", \"daddr\" =&gt; \"ending\", \"hl\" =&gt; \"en\"}.to_param\n=&gt; \"daddr=ending&amp;hl=en&amp;saddr=starting\"\n\nurl = 'http://maps.google.com/maps?' + params\n=&gt; \"http://maps.google.com/maps?daddr=ending&amp;hl=en&amp;saddr=starting\"\n</code></pre>\n\n<p>or use <a href=\"http://ruby-doc.org/stdlib-1.9.3/libdoc/uri/rdoc/URI.html\" rel=\"nofollow\">uri</a>. </p>\n\n<pre><code>require 'uri'\nuri = URI.parse('http://maps.google.com/maps')\nuri.query = URI.encode_www_form(\"saddr\" =&gt; \"starting\", \"daddr\" =&gt; \"ending\", \"hl\" =&gt; \"en\")\n#uri.query = URI.encode_www_form(\"saddr\" =&gt; \"#{location.start}\", \"daddr\" =&gt; \"#{location.end}\", \"hl\" =&gt; \"en\")\n=&gt; \"saddr=starting&amp;daddr=ending&amp;hl=en\"\n\nuri.to_s\n=&gt; \"http://maps.google.com/maps?saddr=starting&amp;daddr=ending&amp;hl=en\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1130, "user_id": 3125190, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/097fe994b490c19a8666a06e380ce148?s=128&d=identicon&r=PG", "display_name": "TarunJadhwani", "link": "https://stackoverflow.com/users/3125190/tarunjadhwani"}, "is_accepted": true, "score": 1, "last_activity_date": 1432104829, "creation_date": 1432104829, "answer_id": 30342340, "question_id": 30340012, "link": "https://stackoverflow.com/questions/30340012/in-rails-how-to-add-ruby-syntax-to-a-string-in-link-to/30342340#30342340", "title": "In rails, how to add ruby syntax to a string in link_to?", "body": "<p>If you are getting \"no implicit conversion of nil into String\" error, it means that your location.start or location.end is nil. So you should add a conditional check:</p>\n\n<pre><code>- if location.start.present? &amp; location.end.present?\n   = link_to 'Get Driving Directions!', 'http://maps.google.com/maps?saddr=' + location.start+ '&amp;daddr=' + location.end + '&amp;hl=en'\n- elsif !location.start.present? &amp; location.end.present?\n   = link_to 'Get Driving Directions!', 'http://maps.google.com/maps?saddr=defaultstart' + '&amp;daddr=' + location.end + '&amp;hl=en'\n- else\n   = link_to 'Get Driving Directions!', 'http://maps.google.com/maps?saddr=defaultstart&amp;daddr=defaultend&amp;hl=en'\n</code></pre>\n\n<p>Where defaultstart and defaultend can be replaced by default values.</p>\n"}], "owner": {"reputation": 1781, "user_id": 3277633, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/d4a27cdac076e1e488208b60677242e0?s=128&d=identicon&r=PG&f=1", "display_name": "user3277633", "link": "https://stackoverflow.com/users/3277633/user3277633"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 30342340, "answer_count": 3, "score": 0, "last_activity_date": 1432104829, "creation_date": 1432094216, "last_edit_date": 1432095087, "question_id": 30340012, "link": "https://stackoverflow.com/questions/30340012/in-rails-how-to-add-ruby-syntax-to-a-string-in-link-to", "title": "In rails, how to add ruby syntax to a string in link_to?", "body": "<p>I have the following link_to</p>\n\n<pre><code>= link_to 'Get Driving Directions!', 'http://maps.google.com/maps?saddr=starting&amp;daddr=ending&amp;hl=en'\n</code></pre>\n\n<p>I want to replace the <strong>starting</strong> and <strong>ending</strong> with ruby syntax, <strong>location.start</strong> and <strong>location.end</strong></p>\n\n<p>I've tried </p>\n\n<pre><code>= link_to 'Get Driving Directions!', 'http://maps.google.com/maps?saddr=' + location.start+ '&amp;daddr=' + location.end + '&amp;hl=en'\n</code></pre>\n\n<p>but that does not seem to work. What is the best way to do this?</p>\n\n<p>Edit: After playing around, it appears that although <strong>location.start</strong> and <strong>location.end</strong> are strings in the database, they are not when I try to add them on to other strings. In order to do so, Im must explicitly specify <strong>.to_string</strong> to both <strong>location.start</strong> and <strong>location.end</strong></p>\n\n<p>However, when I do this, the strings no longer appears on the show page. What is going on here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sorting", "ancestry"], "comments": [{"owner": {"reputation": 740, "user_id": 1528703, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b79a44057a2a603ce63d669394825958?s=128&d=identicon&r=PG", "display_name": "Rohan Pujari", "link": "https://stackoverflow.com/users/1528703/rohan-pujari"}, "edited": false, "score": 0, "creation_date": 1432096211, "post_id": 30339992, "comment_id": 48774192, "body": "post the schema of Project model so that the question can be better understood"}], "answers": [{"comments": [{"owner": {"reputation": 869, "user_id": 3719453, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9cdf8e5efd8c55b9cd12ee91c358ff42?s=128&d=identicon&r=PG&f=1", "display_name": "sonalkr132", "link": "https://stackoverflow.com/users/3719453/sonalkr132"}, "edited": false, "score": 0, "creation_date": 1432115816, "post_id": 30340893, "comment_id": 48785287, "body": "There is no children table. The parent child relationship is defined in same class &#39;project&#39;. Ancestry just adds an ancestry string column to the project and stores the parent_id in it, kinda like how one would make a tree."}, {"owner": {"reputation": 617, "user_id": 4244982, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/hYZVT.jpg?s=128&g=1", "display_name": "sheepdog", "link": "https://stackoverflow.com/users/4244982/sheepdog"}, "reply_to_user": {"reputation": 869, "user_id": 3719453, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9cdf8e5efd8c55b9cd12ee91c358ff42?s=128&d=identicon&r=PG&f=1", "display_name": "sonalkr132", "link": "https://stackoverflow.com/users/3719453/sonalkr132"}, "edited": false, "score": 0, "creation_date": 1432133012, "post_id": 30340893, "comment_id": 48798326, "body": "@sonalkr132  the numbers in the ancestry column represent the <code>id</code>s of their parents?"}, {"owner": {"reputation": 869, "user_id": 3719453, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9cdf8e5efd8c55b9cd12ee91c358ff42?s=128&d=identicon&r=PG&f=1", "display_name": "sonalkr132", "link": "https://stackoverflow.com/users/3719453/sonalkr132"}, "edited": false, "score": 0, "creation_date": 1432154403, "post_id": 30340893, "comment_id": 48811607, "body": "yup! I can&#39;t tell you the details of the gem but thats what it is."}], "tags": [], "owner": {"reputation": 617, "user_id": 4244982, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/hYZVT.jpg?s=128&g=1", "display_name": "sheepdog", "link": "https://stackoverflow.com/users/4244982/sheepdog"}, "is_accepted": true, "score": 0, "last_activity_date": 1432133651, "last_edit_date": 1432133651, "creation_date": 1432099427, "answer_id": 30340893, "question_id": 30339992, "link": "https://stackoverflow.com/questions/30339992/ancestry-sorting-on-number-of-children/30340893#30340893", "title": "Ancestry: sorting on number of children", "body": "<p>This should definitely be possible, you just need to join the two tables in order to use the <code>COUNT</code> of the <code>Project</code>s children.  </p>\n\n<p>Because you didn't include your schema, I made some assumptions about class names and foreign key/primary key names.  My solution assumes the child class has a table name of children, primary key of id, and a foreign key of project_id which references the Project class/projects table.</p>\n\n<p><code>Project.joins(\"LEFT OUTER JOIN children on projects.id = children.project_id\")\n        .group(\"projects.id\")\n        .order(\"count(children.id) desc\")</code></p>\n\n<p>It's necessary to use a <code>LEFT OUTER JOIN</code> in order to include the <code>Project</code>s with zero children.</p>\n\n<p>(edit: please add the schema for the child class as well as the class definitions of Project and its child class)</p>\n\n<h3>EDIT Wed May 20 07:34:58 PDT 2015</h3>\n\n<p>If ancestry holds the id of a <code>Project</code>s child <code>Project</code>, a self join would work.<br>\nWhat is the result of <code>Project.find(6).child_ids</code>?<br>\nWhat is the result of <code>Project.find(7).child_ids</code>?<br>\nI would expect <code>2</code> and <code>3</code> respectively.</p>\n\n<p><code>Project.joins(\"LEFT OUTER JOIN projects p1 on projects.id = p1.ancestry\n        .group(\"projects.id\")\n        .order(\"count(p1.ancestry) desc\")</code></p>\n"}], "owner": {"reputation": 869, "user_id": 3719453, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/9cdf8e5efd8c55b9cd12ee91c358ff42?s=128&d=identicon&r=PG&f=1", "display_name": "sonalkr132", "link": "https://stackoverflow.com/users/3719453/sonalkr132"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 429, "favorite_count": 0, "accepted_answer_id": 30340893, "answer_count": 1, "score": 0, "last_activity_date": 1432133651, "creation_date": 1432094111, "last_edit_date": 1432115368, "question_id": 30339992, "link": "https://stackoverflow.com/questions/30339992/ancestry-sorting-on-number-of-children", "title": "Ancestry: sorting on number of children", "body": "<p>I want to sort my parent object on basis of number of children it has. <a href=\"https://github.com/stefankroes/ancestry\" rel=\"nofollow noreferrer\">Ancestory</a> has this method 'child_ids' which return all the children ids. Is there a way I can use that to sort my parent objects?</p>\n\n<pre><code> Project.order(child_ids.count)\n</code></pre>\n\n<p>or </p>\n\n<pre><code> Project.order(Project.child_ids.count)\n</code></pre>\n\n<p>don't work. I guess that is obvious. Any other way to sort on basis of children can work too. Thanks!</p>\n\n<p><strong>EDIT:</strong>\nlook at ancestry column.Project id 2 has two children 6 and 9, both project 1 and 3 has one. I need to sort on basic of no of children, ie 2, 1, 3, rest...\n<img src=\"https://i.stack.imgur.com/QoH2H.png\" alt=\"enter image description here\"></p>\n"}, {"tags": ["ruby", "enumerable"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1432094188, "post_id": 30339915, "comment_id": 48773630, "body": "Hi and welcome to Stack Overflow. So - you&#39;ve got an answer, but to help you write better question sin future, i should say that it&#39;s unclear what you&#39;re mystified about. It would probably help us if you explained what you do know, and what you don&#39;t know - just dumping a line of code and saying &quot;i&#39;m mystified&quot; leads me to think &quot;so am I&quot; ;) My questions would be &quot;what are you mystified about? why do you need to know this? what have you tried when you played with it in &#39;irb&#39;?"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1432094221, "post_id": 30339915, "comment_id": 48773637, "body": "do you understand similar kinds of methods (eg find/select/reject) too, or is there something specific about detect that is a problem? is it just <i>this specific usage</i> of detect that you don&#39;t understand, or have you seen simpler versions that do make sense? etc etc any way that you can narrow down from &quot;I&#39;m mystified&quot; to an actual question will help us to help you in future :)"}, {"owner": {"reputation": 1, "user_id": 4839673, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AG3typ26VEA/AAAAAAAAAAI/AAAAAAAAAJc/Pk7EDeCxKPU/photo.jpg?sz=128", "display_name": "sulu fiti", "link": "https://stackoverflow.com/users/4839673/sulu-fiti"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 1, "creation_date": 1432095483, "post_id": 30339915, "comment_id": 48773986, "body": "Hi Taryn, thanks for taking the time out to help with my question and also for the advice on how to pose questions on S.O. in the future. Sorry, I should have elaborated further in my initial question - I was not sure how &#39;6&#39; was returned from the code that I supplied. I understand it perfectly now thanks to the answer from @squiguy. Thank you so much people. Much appreciated."}, {"owner": {"reputation": 1926, "user_id": 4854861, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ffVsG.jpg?s=128&g=1", "display_name": "Ritesh  Karwa", "link": "https://stackoverflow.com/users/4854861/ritesh-karwa"}, "edited": false, "score": 0, "creation_date": 1432097767, "post_id": 30339915, "comment_id": 48774672, "body": "detect will return first occurrence of result match"}, {"owner": {"reputation": 1, "user_id": 4839673, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AG3typ26VEA/AAAAAAAAAAI/AAAAAAAAAJc/Pk7EDeCxKPU/photo.jpg?sz=128", "display_name": "sulu fiti", "link": "https://stackoverflow.com/users/4839673/sulu-fiti"}, "edited": false, "score": 0, "creation_date": 1434768988, "post_id": 30339915, "comment_id": 49933507, "body": "Also thanks to all who those down voted my very first question on SO. Way to make a guy feel welcome."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4839673, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AG3typ26VEA/AAAAAAAAAAI/AAAAAAAAAJc/Pk7EDeCxKPU/photo.jpg?sz=128", "display_name": "sulu fiti", "link": "https://stackoverflow.com/users/4839673/sulu-fiti"}, "edited": false, "score": 0, "creation_date": 1432095564, "post_id": 30339938, "comment_id": 48774007, "body": "Thanks so much for answering my query. You explained it perfectly for me :)"}, {"owner": {"reputation": 28990, "user_id": 1114966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af8712b05e5cfb862323a07c83749054?s=128&d=identicon&r=PG", "display_name": "squiguy", "link": "https://stackoverflow.com/users/1114966/squiguy"}, "reply_to_user": {"reputation": 1, "user_id": 4839673, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AG3typ26VEA/AAAAAAAAAAI/AAAAAAAAAJc/Pk7EDeCxKPU/photo.jpg?sz=128", "display_name": "sulu fiti", "link": "https://stackoverflow.com/users/4839673/sulu-fiti"}, "edited": false, "score": 0, "creation_date": 1432096588, "post_id": 30339938, "comment_id": 48774304, "body": "@sulufiti Great, I&#39;m glad :)."}], "tags": [], "owner": {"reputation": 28990, "user_id": 1114966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af8712b05e5cfb862323a07c83749054?s=128&d=identicon&r=PG", "display_name": "squiguy", "link": "https://stackoverflow.com/users/1114966/squiguy"}, "is_accepted": true, "score": 2, "last_activity_date": 1432093765, "creation_date": 1432093765, "answer_id": 30339938, "question_id": 30339915, "link": "https://stackoverflow.com/questions/30339915/understanding-detect-method/30339938#30339938", "title": "Understanding `detect` method", "body": "<p>According to the <a href=\"http://ruby-doc.org/core-2.2.2/Enumerable.html#method-i-detect\" rel=\"nofollow\">documentation</a> this method returns the first element in the enumerable object that the block returns true.</p>\n\n<p>Therefore, the first number in that range that is both divisible by 2 and 3 is 6 and thus it is returned. If this were not the case and no number was divisible by both 2 and 3, then the method will return <code>nil</code>.</p>\n\n<p>It's a way to \"detect\" the first object that makes the block true.</p>\n"}], "owner": {"reputation": 1, "user_id": 4839673, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-AG3typ26VEA/AAAAAAAAAAI/AAAAAAAAAJc/Pk7EDeCxKPU/photo.jpg?sz=128", "display_name": "sulu fiti", "link": "https://stackoverflow.com/users/4839673/sulu-fiti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 30339938, "answer_count": 1, "score": -3, "last_activity_date": 1432101681, "creation_date": 1432093595, "last_edit_date": 1432101681, "question_id": 30339915, "link": "https://stackoverflow.com/questions/30339915/understanding-detect-method", "title": "Understanding `detect` method", "body": "<p>I have trouble understanding the <code>detect</code> method in <code>Enumerable</code>. I tried with the sample code:</p>\n\n<pre><code>(1..6).detect  { |i| i % 2 == 0 and i % 3 == 0 }\n#=&gt; 6\n</code></pre>\n\n<p>But I'm still mystified. Any help would be much appreciated.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 1986287, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3N6Bu.jpg?s=128&g=1", "display_name": "Red", "link": "https://stackoverflow.com/users/1986287/red"}, "edited": false, "score": 0, "creation_date": 1432097914, "post_id": 30339909, "comment_id": 48774713, "body": "I think this is exactly what I was looking for. Thank you."}], "tags": [], "owner": {"reputation": 159, "user_id": 4901229, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72e2d9a8327e86d597cc5313d5831369?s=128&d=identicon&r=PG", "display_name": "nbeck", "link": "https://stackoverflow.com/users/4901229/nbeck"}, "is_accepted": true, "score": 0, "last_activity_date": 1432093544, "creation_date": 1432093544, "answer_id": 30339909, "question_id": 30339756, "link": "https://stackoverflow.com/questions/30339756/parsing-a-text-file-of-ip-addresses-into-an-array-with-ruby/30339909#30339909", "title": "Parsing a Text File of IP addresses into an Array with Ruby?", "body": "<p>I think this will do what you want</p>\n\n<pre><code>#!/usr/bin/env ruby\n\ndef parse(input)\n  ip_list = []\n\n  File.open(input, \"r\") do |infile|\n    while (line = infile.gets)\n      current_ip = line.strip\n      # push in ip_list if not already present in ip_list\n      ip_list &lt;&lt; current_ip if !ip_list.include?(current_ip) \n    end\n  end\n\n  return ip_list\nend\n\nprintf \"Enter your list file: \"\ninput = gets.chomp\nputs parse(input)\n</code></pre>\n\n<p>Let me know if it is not what you are asking.</p>\n"}], "owner": {"reputation": 3, "user_id": 1986287, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3N6Bu.jpg?s=128&g=1", "display_name": "Red", "link": "https://stackoverflow.com/users/1986287/red"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 30339909, "answer_count": 1, "score": 0, "last_activity_date": 1432106187, "creation_date": 1432092336, "last_edit_date": 1432106187, "question_id": 30339756, "link": "https://stackoverflow.com/questions/30339756/parsing-a-text-file-of-ip-addresses-into-an-array-with-ruby", "title": "Parsing a Text File of IP addresses into an Array with Ruby?", "body": "<p>I need to parse a text file of IP addresses into an array, all on separate lines, and remove duplicate IP addresses. I'm not exactly sure how I'd do it, but this is how I would start to do it:</p>\n\n<pre><code>printf \"Enter your list file: \"\ninput = gets.chomp\n\ndef parse(input)\n    list = File.open(input)\n    array = []\n    #some code to load the file into the array\n    #with the IP addresses on separate lines\n    #and remove duplicate IP addresses\nend\n</code></pre>\n\n<p>If anyone could point me in the right direction or show me some example code, I'd greatly appreciate it. </p>\n"}, {"tags": ["ruby", "ohai-gem"], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 2879893, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/16b76a0bfafe7b3546d423d5544a8bc3?s=128&d=identicon&r=PG&f=1", "display_name": "Creede", "link": "https://stackoverflow.com/users/2879893/creede"}, "is_accepted": false, "score": 2, "last_activity_date": 1432138503, "creation_date": 1432138503, "answer_id": 30355136, "question_id": 30339750, "link": "https://stackoverflow.com/questions/30339750/ohai-thinks-my-plugin-is-version-6-why/30355136#30355136", "title": "Ohai thinks my plugin is version 6. Why?", "body": "<p>Note to self: Next time you do this, don't try to test from the directory your plugin is in and add \".\" to your plugin_path. Moving to a different directory and adding the absolute path to the plugin solved the problem.</p>\n\n<p>I plan to leave this up in case someone else has this happen to them.</p>\n"}], "owner": {"reputation": 121, "user_id": 2879893, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/16b76a0bfafe7b3546d423d5544a8bc3?s=128&d=identicon&r=PG&f=1", "display_name": "Creede", "link": "https://stackoverflow.com/users/2879893/creede"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 498, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432138503, "creation_date": 1432092296, "question_id": 30339750, "link": "https://stackoverflow.com/questions/30339750/ohai-thinks-my-plugin-is-version-6-why", "title": "Ohai thinks my plugin is version 6. Why?", "body": "<p>I'm trying to write a plugin for ohai. It seems like a pretty straightforward task:</p>\n\n<pre><code>Ohai.plugin(:Uname) do\n  provides 'uname'\n  depends 'kernel'\n\n  collect_data do\n    uname Mash.new\n    uname[:message] = `uname -a`\n  end\nend\n</code></pre>\n\n<p>To me this looks like the online examples provided by Opscode, O'Reilly and others. But here's what happens when I try to test it:</p>\n\n<pre><code> % irb -rohai\nirb(main):001:0&gt; Ohai::Config[:plugin_path] &lt;&lt; \".\"\n=&gt; [\"/home/ll0359/.rbenv/versions/2.2.1/lib/ruby/gems/2.2.0/gems/ohai-8.3.0/lib/ohai/plugins\", \".\"]\nirb(main):002:0&gt; o = Ohai::System.new\n=&gt; #&lt;Ohai::System:0x007fed82e43078 @plugin_path=\"\", @data={}, @provides_map=#&lt;Ohai::ProvidesMap:0x007fed82e42fd8 @map={}&gt;, @v6_dependency_solver={}, @d82e42f38 @controller=#&lt;Ohai::System:0x007fed82e43078 ...&gt;, @v6_plugin_classes=[], @v7_plugin_classes=[]&gt;, @runner=#&lt;Ohai::Runner:0x007fed82e42ec0 @prp:0x007fed82e42fd8 @map={}&gt;, @safe_run=true&gt;&gt;\n\nirb(main):003:0&gt; o.all_plugins\n</code></pre>\n\n<p>And here's where the fun begins. I get this output, over and over and over:</p>\n\n<pre><code>[2015-05-20T03:13:09+00:00] WARN: Plugin Definition Error: &lt;./ohai_uname.rb&gt;: collect_data already defined on platform default\n[2015-05-20T03:13:09+00:00] WARN: [DEPRECATION] Plugin at ./test_ohai.rb is a version 6 plugin. Version 6 plugins will not be supported in future releases....\nyour plugin to version 7 plugin syntax. For more information visit here: docs.chef.io/ohai_custom.html\n</code></pre>\n\n<p>(the text on my second line was clipped by my screen but you get the idea)</p>\n\n<p>I've tried running this code with and without the 'depends' line. Same result.</p>\n\n<p>I've tried running this code with and without the Mash line, substituing 'uname <code>uname -a</code>' for the assignment line. Same result.</p>\n\n<p>I've tried running with and without passing \":linux\" as a parameter to collect_data. The only difference is I get a warning about collect_data(:linux) already being defined instead of :default.</p>\n\n<p>I've tried renaming the plugin to a random 8 character identifier just in case it was tripping over being called :Uname. Same result.</p>\n\n<p>I've tried passing \"uname\" (capital and lower) as a parameter to o.all_plugins. Same result.</p>\n\n<p>So my questions are:</p>\n\n<ol>\n<li><p>Why does ohai (8.3, running under Ruby 2.2.1) think this is a version 6 plugin? I can't see anything in it that would make it look like it's not version 7.</p></li>\n<li><p>How can I get this working?</p></li>\n</ol>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "delegates", "metaprogramming"], "answers": [{"tags": [], "owner": {"reputation": 6881, "user_id": 477047, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Qh2bO.gif?s=128&g=1", "display_name": "David Unric", "link": "https://stackoverflow.com/users/477047/david-unric"}, "is_accepted": true, "score": 5, "last_activity_date": 1432512964, "creation_date": 1432512964, "answer_id": 30429712, "question_id": 30339579, "link": "https://stackoverflow.com/questions/30339579/why-is-a-delegated-method-public-when-declared-in-a-private-section/30429712#30429712", "title": "Why is a delegated method public when declared in a private section?", "body": "<p>Yes, the issue is with <code>module_eval</code> because it explicitly sets public visibility before evaling passed string.\nIt behaves in the same way in CRuby and JRuby. For example, incriminated code for CRuby is in <a href=\"http://rxr.whitequark.org/mri/source/vm_eval.c#1534\" rel=\"noreferrer\">eval_under</a> function.</p>\n\n<p>As you've figured out, when you pass <code>def_delegate</code> to <code>private</code> method it becomes private. <code>def_delegate</code> first defines passed method as public (by the underlying module_eval), then is <em>reset</em> by <code>private</code> to private visibility.</p>\n\n<p>It's not 100% clear if current <code>Module.module_eval</code>'s behavior is correct one or there is a bug in <code>Forwardable.def_instance_delegator</code>. <code>module_eval</code> examples in documentation guide to use it outside concerned class/module and it does not expect visibility argument so it seems logical it sets method's visibility to public.</p>\n\n<p>The solution would be either <code>Module.module_eval</code> handle optional visibility argument <em>and</em> respect current visibility when sent to implicit or explicit <code>self</code> (doubt if possible) or fix <code>Forwardable.def_instance_delegator</code> implementation to define method with more appropriate <code>Module.define_method</code> instead of <code>module_eval</code>.\nIn any case this is a good candidate for filling a bug report on <a href=\"http://bugs.ruby-lang.org\" rel=\"noreferrer\">http://bugs.ruby-lang.org</a> .</p>\n"}, {"tags": [], "owner": {"reputation": 17424, "user_id": 278842, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/df6877d3f05e542ca5975b4670600f2e?s=128&d=identicon&r=PG", "display_name": "Christopher Oezbek", "link": "https://stackoverflow.com/users/278842/christopher-oezbek"}, "is_accepted": false, "score": 0, "last_activity_date": 1432814676, "creation_date": 1432814676, "answer_id": 30506092, "question_id": 30339579, "link": "https://stackoverflow.com/questions/30339579/why-is-a-delegated-method-public-when-declared-in-a-private-section/30506092#30506092", "title": "Why is a delegated method public when declared in a private section?", "body": "<p>I think this is as it is supposed to work. I always consider that visibility modifiers are affecting the scope they are written in and not any calls originating from there. In this sense the call to module_eval does not know that it is inside a private section (could it?).</p>\n"}, {"tags": [], "owner": {"reputation": 47, "user_id": 585959, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NVoP2.jpg?s=128&g=1", "display_name": "Margaret Dax", "link": "https://stackoverflow.com/users/585959/margaret-dax"}, "is_accepted": false, "score": 0, "last_activity_date": 1432924817, "creation_date": 1432924817, "answer_id": 30536814, "question_id": 30339579, "link": "https://stackoverflow.com/questions/30339579/why-is-a-delegated-method-public-when-declared-in-a-private-section/30536814#30536814", "title": "Why is a delegated method public when declared in a private section?", "body": "<p>It looks like the second option works while the first doesn't because Rails is saying \"module_eval this specific line\". So, when you have private on the same line it understands that it should begin treating it as a private method definition. This seems like something that should be fixed by the Rails maintainers, create an issue for them.</p>\n"}], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 734, "favorite_count": 4, "accepted_answer_id": 30429712, "answer_count": 3, "score": 14, "last_activity_date": 1432924817, "creation_date": 1432091102, "last_edit_date": 1432193531, "question_id": 30339579, "link": "https://stackoverflow.com/questions/30339579/why-is-a-delegated-method-public-when-declared-in-a-private-section", "title": "Why is a delegated method public when declared in a private section?", "body": "<p>I can make <code>attr_reader</code> (and the related <code>attr_writer</code> and <code>attr_accessor</code>) method(s) private by putting the declaration in a <code>private</code> section:</p>\n\n<pre><code>class Foo\nprivate\n  attr_reader :b\nend\n\nFoo.new.b # =&gt; NoMethodError: private method `b' called for #&lt;Foo:&gt;\n</code></pre>\n\n<p>However, Rails' <a href=\"http://apidock.com/rails/v4.2.1/Module/delegate\" rel=\"noreferrer\"><code>delegate</code></a> and the Ruby standard library's <a href=\"http://ruby-doc.org/stdlib-2.2.2/libdoc/forwardable/rdoc/Forwardable.html#method-i-def_delegator\" rel=\"noreferrer\"><code>def_delegate</code></a> do not work this way. These delegated methods are always public.</p>\n\n<pre><code>class Foo\n  attr_reader :b\n  def initialize\n    @b = 'b'\n  end\nend\n\nrequire 'forwardable'\nclass Bar\n  attr_reader :foo\n  def initialize\n    @foo = Foo.new\n  end\n  extend Forwardable\nprivate\n  def_delegator :foo, :b\nend\n\nBar.new.b # =&gt; \"b\"\n</code></pre>\n\n<p>Making the delegation private is easily done by changing it to:</p>\n\n<pre><code>private def_delegator :foo, :b\n</code></pre>\n\n<p>but I expected a <code>NoMethodError</code> error for <code>Bar.new.b</code> above. Why isn't the delegation private?</p>\n\n<p>The method definition of <code>def_delegator</code> (alias for <code>def_instance_delegator</code>) is just <code>rescue</code> (blocks removed):</p>\n\n<pre><code>def def_instance_delegator(accessor, method, ali = method)\n  line_no = __LINE__; str = %Q{\n    def #{ali}(*args, &amp;block)\n      #{accessor}.__send__(:#{method}, *args, &amp;block)\n    end\n  }\n  module_eval(str, __FILE__, line_no)\nend\n</code></pre>\n\n<p>That means <code>module_eval</code> does not respect that it was called in a <code>private</code> section. Why?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "devise", "gem"], "comments": [{"owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 1, "creation_date": 1432087905, "post_id": 30339088, "comment_id": 48772073, "body": "Did you see this error? &quot;Errno::EACCES: Permission denied @ rb_sysopen - /Users/jonathanmusso/.rvm/rubies/ruby-2.2.1/lib/ruby/gems/2.&zwnj;&#8203;2.0/gems/pg-0.18.1/.&zwnj;&#8203;gemtest&quot; You have a permissions issue. Who owns that directory? Your current login or some other (maybe root) account?"}, {"owner": {"reputation": 646, "user_id": 4553034, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/aLeXg.jpg?s=128&g=1", "display_name": "MAC", "link": "https://stackoverflow.com/users/4553034/mac"}, "edited": false, "score": 0, "creation_date": 1432088628, "post_id": 30339088, "comment_id": 48772254, "body": "can you post your gemfile codes?"}, {"owner": {"reputation": 1366, "user_id": 133059, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1dce9f8ba8935e237da5890ffe6714a?s=128&d=identicon&r=PG", "display_name": "Jonathan Musso", "link": "https://stackoverflow.com/users/133059/jonathan-musso"}, "reply_to_user": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1432089224, "post_id": 30339088, "comment_id": 48772434, "body": "Gemfile added. I own the directory @MarsAtomic. I tried with Sudo and it still does not work."}, {"owner": {"reputation": 2541, "user_id": 1162683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8e05cd764cc2ecba1884b309e9dd5df5?s=128&d=identicon&r=PG", "display_name": "penner", "link": "https://stackoverflow.com/users/1162683/penner"}, "edited": false, "score": 0, "creation_date": 1432089485, "post_id": 30339088, "comment_id": 48772498, "body": "try: rails s -e development"}], "answers": [{"comments": [{"owner": {"reputation": 2541, "user_id": 1162683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8e05cd764cc2ecba1884b309e9dd5df5?s=128&d=identicon&r=PG", "display_name": "penner", "link": "https://stackoverflow.com/users/1162683/penner"}, "edited": false, "score": 0, "creation_date": 1432088271, "post_id": 30339183, "comment_id": 48772169, "body": "pg is in the Gemfile, thats where the bundle install fails"}, {"owner": {"reputation": 73, "user_id": 4840008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jVZx9.jpg?s=128&g=1", "display_name": "Elle", "link": "https://stackoverflow.com/users/4840008/elle"}, "reply_to_user": {"reputation": 2541, "user_id": 1162683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8e05cd764cc2ecba1884b309e9dd5df5?s=128&d=identicon&r=PG", "display_name": "penner", "link": "https://stackoverflow.com/users/1162683/penner"}, "edited": false, "score": 1, "creation_date": 1432088656, "post_id": 30339183, "comment_id": 48772265, "body": "try to run this first &#39;bundle config build.pg --with-pg-config=/usr/pgsql-9.1/bin/pg_config&#39; before running the &#39;bundle install&#39;."}], "tags": [], "owner": {"reputation": 73, "user_id": 4840008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jVZx9.jpg?s=128&g=1", "display_name": "Elle", "link": "https://stackoverflow.com/users/4840008/elle"}, "is_accepted": false, "score": 1, "last_activity_date": 1432088131, "creation_date": 1432088131, "answer_id": 30339183, "question_id": 30339088, "link": "https://stackoverflow.com/questions/30339088/rails-s-and-bundle-install-error-with-pg-gem/30339183#30339183", "title": "Rails s and bundle install error with pg gem?", "body": "<p>Add 'pg' gem into your gemfile instead installing it manually in your terminal and run 'bundle install'. \nAdd this in your gemfile: \n`gem 'pg'</p>\n"}, {"comments": [{"owner": {"reputation": 1366, "user_id": 133059, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1dce9f8ba8935e237da5890ffe6714a?s=128&d=identicon&r=PG", "display_name": "Jonathan Musso", "link": "https://stackoverflow.com/users/133059/jonathan-musso"}, "edited": false, "score": 0, "creation_date": 1432089860, "post_id": 30339186, "comment_id": 48772597, "body": "I believe this worked. Everything has installed. Although my rails server shuts off immediately due to another issue now ;) Thanks !"}], "tags": [], "owner": {"reputation": 2741, "user_id": 1768861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f761fc85a1215df94d191c940b5fb8bc?s=128&d=identicon&r=PG", "display_name": "Marcos Serpa", "link": "https://stackoverflow.com/users/1768861/marcos-serpa"}, "is_accepted": true, "score": 3, "last_activity_date": 1432088168, "creation_date": 1432088168, "answer_id": 30339186, "question_id": 30339088, "link": "https://stackoverflow.com/questions/30339088/rails-s-and-bundle-install-error-with-pg-gem/30339186#30339186", "title": "Rails s and bundle install error with pg gem?", "body": "<p>Have you updated your OSX recently? Maybe you need to update your xcode/xcode tools and then reinstall postgres.</p>\n\n<p>Have you installed postgres by homebrew? If yes, try to reinstall running</p>\n\n<blockquote>\n  <p>brew uninstall postgresql</p>\n</blockquote>\n\n<p>and then</p>\n\n<blockquote>\n  <p>brew install postgresql</p>\n</blockquote>\n\n<p>Then, try again to run \"bundle install\".</p>\n"}, {"tags": [], "owner": {"reputation": 2541, "user_id": 1162683, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8e05cd764cc2ecba1884b309e9dd5df5?s=128&d=identicon&r=PG", "display_name": "penner", "link": "https://stackoverflow.com/users/1162683/penner"}, "is_accepted": false, "score": 0, "last_activity_date": 1432088638, "creation_date": 1432088638, "answer_id": 30339254, "question_id": 30339088, "link": "https://stackoverflow.com/questions/30339088/rails-s-and-bundle-install-error-with-pg-gem/30339254#30339254", "title": "Rails s and bundle install error with pg gem?", "body": "<p>Might be heavy handed</p>\n\n<pre><code>chown -R jonathanmusso:staff /Users/jonathanmusso/.rvm\n</code></pre>\n\n<p>If you've used sudo with rvm you might have broken the install. Try updating rvm.</p>\n"}, {"comments": [{"owner": {"reputation": 821, "user_id": 5965865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TNJ20.png?s=128&g=1", "display_name": "YCode", "link": "https://stackoverflow.com/users/5965865/ycode"}, "edited": false, "score": 0, "creation_date": 1533957909, "post_id": 49521875, "comment_id": 90549614, "body": "Can you elaborate on the <code>-ls</code>, <code>-la</code> part? And how does one find directories &quot;owned by root&quot;? And how does one get rid of such directories? I&#39;ve been struggling with <code>pg</code> gem and finally concluded the inconsistent installations were the issue, but have no clue how to fix them (esp. when I used to think global (root, in my mind) installation was the way to go."}, {"owner": {"reputation": 2280, "user_id": 99640, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e77da0763a57c0b993029b75227bee71?s=128&d=identicon&r=PG", "display_name": "Chuck Wilbur", "link": "https://stackoverflow.com/users/99640/chuck-wilbur"}, "reply_to_user": {"reputation": 821, "user_id": 5965865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/TNJ20.png?s=128&g=1", "display_name": "YCode", "link": "https://stackoverflow.com/users/5965865/ycode"}, "edited": false, "score": 1, "creation_date": 1534435448, "post_id": 49521875, "comment_id": 90713819, "body": "Taking the OP&#39;s example of <code>&#47;Users&#47;jonathanmusso&#47;.rvm&#47;rubies&#47;ruby-2.2.1&#47;lib&#47;ruby&#47;gems&#47;2.&zwnj;&#8203;2.0&#47;gems&#47;pg-0.18.1&#47;.&zwnj;&#8203;gemtest</code> from his error message, you would cd down into <code>&#47;Users&#47;jonathanmusso&#47;.rvm&#47;rubies&#47;ruby-2.2.1&#47;lib&#47;ruby&#47;gems&#47;2.&zwnj;&#8203;2.0&#47;gems</code> and do <code>ls -la</code> which lists all subdirectories and their owners. You would find that <code>pg-0.18.1</code> is owned by root, so you would <code>sudo rm -rf pg-0.18.1</code> then try the installation again. If it fails again, the directory it flags as the problem should be different, so cd down into that one, rinse and repeat the above until the installation works."}], "tags": [], "owner": {"reputation": 2280, "user_id": 99640, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e77da0763a57c0b993029b75227bee71?s=128&d=identicon&r=PG", "display_name": "Chuck Wilbur", "link": "https://stackoverflow.com/users/99640/chuck-wilbur"}, "is_accepted": false, "score": 1, "last_activity_date": 1522182502, "creation_date": 1522182502, "answer_id": 49521875, "question_id": 30339088, "link": "https://stackoverflow.com/questions/30339088/rails-s-and-bundle-install-error-with-pg-gem/49521875#49521875", "title": "Rails s and bundle install error with pg gem?", "body": "<p>A slightly less heavy handed version of penner's answer, I had the same problem and after some digging discovered that the <code>pg-0.18.1</code> directory in <code>lib/ruby/gems/2.2.0/gems/</code> was owned by root (probably due to a mistaken use of <code>sudo</code> as he notes). I <code>rm -rf</code>ed that directory (and an <code>extensions</code> one that failed the install after the <code>gems</code> one was cleaned up) and after that the install worked.</p>\n\n<p>Short answer: <code>ls -la</code> your way down through that long path the error gives you, and when you find any directories owned by root, get rid of them.</p>\n"}], "owner": {"reputation": 1366, "user_id": 133059, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1dce9f8ba8935e237da5890ffe6714a?s=128&d=identicon&r=PG", "display_name": "Jonathan Musso", "link": "https://stackoverflow.com/users/133059/jonathan-musso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2684, "favorite_count": 0, "accepted_answer_id": 30339186, "answer_count": 4, "score": 0, "last_activity_date": 1522182502, "creation_date": 1432087417, "last_edit_date": 1432089185, "question_id": 30339088, "link": "https://stackoverflow.com/questions/30339088/rails-s-and-bundle-install-error-with-pg-gem", "title": "Rails s and bundle install error with pg gem?", "body": "<p>I am trying to install Ruby on Rails on my MacBook Pro running Yosemite 10.10 for my school program. I have installed everything successfully but now when I run rails s I get this error. I have tried to continue with bundle install to solve the issue but as you can see it does not work. What is going on here? I proceeded to try with sudo but it failed as well.</p>\n\n<pre><code>\u25b6 rails s\nCould not find pg-0.18.1 in any of the sources\nRun `bundle install` to install missing gems.\n\n~/code/Bloccit  master \u2714                                                                                                                                              2d  \u2349\n\u25b6 bundle install\nFetching gem metadata from https://rubygems.org/...........\nFetching version metadata from https://rubygems.org/...\nFetching dependency metadata from https://rubygems.org/..\nUsing rake 10.4.2\nUsing CFPropertyList 2.3.1\nUsing i18n 0.7.0\nUsing json 1.8.2\nUsing minitest 5.6.0\nUsing thread_safe 0.3.5\nUsing tzinfo 1.2.2\nUsing activesupport 4.2.1\nUsing builder 3.2.2\nUsing erubis 2.7.0\nUsing mini_portile 0.6.2\nUsing nokogiri 1.6.6.2\nUsing rails-deprecated_sanitizer 1.0.3\nUsing rails-dom-testing 1.0.6\nUsing loofah 2.0.1\nUsing rails-html-sanitizer 1.0.2\nUsing actionview 4.2.1\nUsing rack 1.6.0\nUsing rack-test 0.6.3\nUsing actionpack 4.2.1\nUsing globalid 0.3.5\nUsing activejob 4.2.1\nUsing mime-types 2.4.3\nUsing mail 2.6.3\nUsing actionmailer 4.2.1\nUsing activemodel 4.2.1\nUsing arel 6.0.0\nUsing activerecord 4.2.1\nUsing execjs 2.5.2\nUsing autoprefixer-rails 5.1.9\nUsing bcrypt 3.1.10\nUsing coderay 1.1.0\nUsing better_errors 2.1.1\nUsing debug_inspector 0.0.2\nUsing binding_of_caller 0.7.2\nUsing sass 3.4.13\nUsing bootstrap-sass 3.3.4.1\nUsing columnize 0.9.0\nUsing byebug 4.0.5\nUsing carrierwave 0.10.0\nUsing coffee-script-source 1.9.1.1\nUsing coffee-script 2.4.1\nUsing thor 0.19.1\nUsing railties 4.2.1\nUsing coffee-rails 4.1.0\nUsing orm_adapter 0.5.0\nUsing responders 2.1.0\nUsing warden 1.2.3\nUsing devise 3.4.1\nUsing excon 0.45.3\nUsing faker 1.4.3\nUsing figaro 1.1.0\nUsing fission 0.5.0\nUsing formatador 0.2.5\nUsing net-ssh 2.9.2\nUsing net-scp 1.2.1\nUsing fog-core 1.30.0\nUsing fog-xml 0.1.2\nUsing fog-atmos 0.1.0\nUsing multi_json 1.11.0\nUsing fog-json 1.0.1\nUsing ipaddress 0.8.0\nUsing fog-aws 0.1.2\nUsing inflecto 0.0.2\nUsing fog-brightbox 0.7.1\nUsing fog-ecloud 0.1.1\nUsing fog-local 0.2.1\nUsing fog-powerdns 0.1.1\nUsing fog-profitbricks 0.0.2\nUsing fog-radosgw 0.0.4\nUsing fog-riakcs 0.1.0\nUsing fog-sakuracloud 1.0.1\nUsing fog-serverlove 0.1.2\nUsing fog-softlayer 0.4.5\nUsing fog-storm_on_demand 0.1.1\nUsing fog-terremark 0.1.0\nUsing fog-vmfusion 0.1.0\nUsing fog-voxel 0.1.0\nUsing fog 1.29.0\nUsing jbuilder 2.2.13\nUsing jquery-rails 4.0.3\nUsing method_source 0.8.2\nUsing mini_magick 4.2.3\n\nErrno::EACCES: Permission denied @ rb_sysopen - /Users/jonathanmusso/.rvm/rubies/ruby-2.2.1/lib/ruby/gems/2.2.0/gems/pg-0.18.1/.gemtest\nAn error occurred while installing pg (0.18.1), and Bundler cannot continue.\nMake sure that `gem install pg -v '0.18.1'` succeeds before bundling.\n\n~/code/Bloccit  master \u2714                                                                                                                                              2d  \u2349\n\u25b6 gem install pg -v '0.18.1'\nERROR:  While executing gem ... (Errno::EACCES)\n    Permission denied @ rb_sysopen - /Users/jonathanmusso/.rvm/rubies/ruby-2.2.1/lib/ruby/gems/2.2.0/gems/pg-0.18.1/.gemtest\n</code></pre>\n\n<p>Edit: Updated with gemfile.</p>\n\n<pre><code>source 'https://rubygems.org'\n\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.2.1'\n# Use sqlite3 as the database for Active Record\ngroup :production do\n  gem 'pg'\n  gem 'rails_12factor'\nend\n\ngroup :development do\n  gem 'binding_of_caller'\n  gem 'better_errors'\n  gem 'sqlite3'\nend\n\n# Use will_paginate\ngem 'will_paginate', '~&gt; 3.0.5'\n\n# Use Fog\ngem 'fog'\n\n# Use CarrierWave and MiniMagick\ngem 'carrierwave'\ngem 'mini_magick'\n\n# Use Redcarpet\ngem 'redcarpet'\n\n# Use Pundit\ngem 'pundit'\n\n# Use Figaro\ngem 'figaro'\n\n# Use Devise\ngem 'devise'\n\n# Use Bootstrap-Sass Gem\ngem 'bootstrap-sass'\n\n# Use pry-rails\ngem 'pry-rails'\n\n# Faker gem\ngem 'faker'\n\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.1.0'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\ngem 'turbolinks'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use Unicorn as the app server\n# gem 'unicorn'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug'\n\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views\n  gem 'web-console', '~&gt; 2.0'\n\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1956, "user_id": 2733436, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e128e2222f838003de04114979843ff3?s=128&d=identicon&r=PG&f=1", "display_name": "user1010101", "link": "https://stackoverflow.com/users/2733436/user1010101"}, "edited": false, "score": 0, "creation_date": 1432134851, "post_id": 30339315, "comment_id": 48799788, "body": "In your case you are creating a new user but how do i check if user has not put any input in the form and pressed submit ?"}], "tags": [], "owner": {"reputation": 17880, "user_id": 2155313, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fp9tO.jpg?s=128&g=1", "display_name": "errata", "link": "https://stackoverflow.com/users/2155313/errata"}, "is_accepted": true, "score": 2, "last_activity_date": 1432089040, "creation_date": 1432089040, "answer_id": 30339315, "question_id": 30338943, "link": "https://stackoverflow.com/questions/30338943/proper-way-to-handle-exceptions-in-ruby-on-rails/30339315#30339315", "title": "Proper way to handle exceptions in Ruby on Rails", "body": "<p>In rails you will want to use Active Record Validations on your model. <a href=\"http://guides.rubyonrails.org/active_record_validations.html\" rel=\"nofollow\">http://guides.rubyonrails.org/active_record_validations.html</a></p>\n\n<pre><code>validates :name, presence: true\n</code></pre>\n\n<p>There are various way to do this, and I usually submit forms with angularjs and return errors as JSON but since it looks like you are using standard html form actions, here is an example of a \"user\" creation form,</p>\n\n<pre><code>def create\n  user = User.create(user_params)\n  if @user.save\n    flash[:notice] = \"User has been created\"\n    redirect_to user_path(@user)\n  else\n    flash[:error] = \"Somethig is wrong\"\n    render :new\n  end\nend\n\n\n\n&lt;% form_for @user do |f| %&gt;\n  &lt;%= f.error_messages %&gt;\n  &lt;%= f.label :name, \"Enter your name:\" %&gt;&lt;br&gt;\n  &lt;%= f.text_field :name %&gt;&lt;br&gt;\n  &lt;%= submit_tag \"Send\" $&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4711, "user_id": 83729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5071d40db06ac987180c40e675b7193b?s=128&d=identicon&r=PG", "display_name": "msergeant", "link": "https://stackoverflow.com/users/83729/msergeant"}, "is_accepted": false, "score": 0, "last_activity_date": 1432089824, "creation_date": 1432089824, "answer_id": 30339425, "question_id": 30338943, "link": "https://stackoverflow.com/questions/30338943/proper-way-to-handle-exceptions-in-ruby-on-rails/30339425#30339425", "title": "Proper way to handle exceptions in Ruby on Rails", "body": "<p>You can check if either field is nil in your create method:</p>\n\n<pre><code>def create\n    longitude = params[:longitude]\n    latitude = params[:latitude]\n    if(longitude.blank? || latitude.blank?)\n      # render something here to display the error\n    else\n      @stops = Stop.where(\"longitude = ? AND latitude = ?\", longitude, latitude)\n      render :index\n    end\n  end\n</code></pre>\n"}], "owner": {"reputation": 1956, "user_id": 2733436, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/e128e2222f838003de04114979843ff3?s=128&d=identicon&r=PG&f=1", "display_name": "user1010101", "link": "https://stackoverflow.com/users/2733436/user1010101"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 30339315, "answer_count": 2, "score": 0, "last_activity_date": 1432104034, "creation_date": 1432086320, "last_edit_date": 1432104034, "question_id": 30338943, "link": "https://stackoverflow.com/questions/30338943/proper-way-to-handle-exceptions-in-ruby-on-rails", "title": "Proper way to handle exceptions in Ruby on Rails", "body": "<p>I have a simple form where I collect user inputs for two fields. I have pasted the code below to display the form. </p>\n\n<pre><code>&lt;%= form_tag(\"/welcome/index\", method: \"post\") do %&gt;\n  &lt;%= label_tag :longitude %&gt;&lt;br&gt;\n  &lt;%= text_field_tag :longitude %&gt;\n  &lt;br&gt;\n  &lt;br&gt;\n  &lt;%= label_tag :latitude %&gt;&lt;br&gt;\n  &lt;%= text_field_tag :latitude %&gt;\n  &lt;p&gt;\n    &lt;%= submit_tag(\"Submit\") %&gt;\n  &lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>In the controller, I capture the user's input and display relevant information.</p>\n\n<pre><code>class WelcomeController &lt; ApplicationController\n  # displays the form, so change the name of the form you have now to new.html.erb\n  def new\n  end\n\n  # the form will pass to this action to perform logic on longitude and latitude\n  def create\n    longitude = params[:longitude]\n    latitude = params[:latitude]\n    @stops = Stop.where(\"longitude = ? AND latitude = ?\", longitude, latitude)\n    render :index\n  end\n\n  # if it renders from the create action, @stops will be available to use here\n  def index\n  end\nend\n</code></pre>\n\n<p>There can be some cases where the user does not fill anything in the form and hits submit. I was wondering how do I properly handle such a case in Ruby on Rails. I am fairly new to Ruby on Rails. For instance in Java I would throw exception saying </p>\n\n<blockquote>\n  <p>No input provided</p>\n</blockquote>\n\n<p>So I would like to display some message on such cases. I would appreciate if someone can show me how this can be done.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "sprockets"], "answers": [{"comments": [{"owner": {"reputation": 443, "user_id": 1660609, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/efe340234d96432aa6a659fa0ab5d328?s=128&d=identicon&r=PG", "display_name": "Abliamit", "link": "https://stackoverflow.com/users/1660609/abliamit"}, "edited": false, "score": 0, "creation_date": 1432819251, "post_id": 30338861, "comment_id": 49091142, "body": "I also had the same issue for old version of uglifier"}], "tags": [], "owner": {"reputation": 1701, "user_id": 1730536, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/BOZbc.png?s=128&g=1", "display_name": "Winston Kotzan", "link": "https://stackoverflow.com/users/1730536/winston-kotzan"}, "is_accepted": false, "score": 12, "last_activity_date": 1432085847, "creation_date": 1432085847, "answer_id": 30338861, "question_id": 30338860, "link": "https://stackoverflow.com/questions/30338860/heroku-push-error-nameerror-uninitialized-constant-uglifierversion-on-rake/30338861#30338861", "title": "Heroku push error: &quot;NameError: uninitialized constant Uglifier::VERSION&quot; on rake assets:precompile", "body": "<p>The problem seemed to be an incompatibility between Sprockets 3.1 and the Uglifier compressor version I was using, 2.1. Upgrading Uglifier by putting this line in my Gemfile resolved the issue:</p>\n\n<pre><code>gem 'uglifier', '~&gt; 2.7'\n</code></pre>\n"}], "owner": {"reputation": 1701, "user_id": 1730536, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/BOZbc.png?s=128&g=1", "display_name": "Winston Kotzan", "link": "https://stackoverflow.com/users/1730536/winston-kotzan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3169, "favorite_count": 0, "answer_count": 1, "score": 8, "last_activity_date": 1432085847, "creation_date": 1432085847, "question_id": 30338860, "link": "https://stackoverflow.com/questions/30338860/heroku-push-error-nameerror-uninitialized-constant-uglifierversion-on-rake", "title": "Heroku push error: &quot;NameError: uninitialized constant Uglifier::VERSION&quot; on rake assets:precompile", "body": "<p>I'm receiving the following error when trying to push to production. Here's the result of the push:</p>\n\n<pre><code>$ git push production master\nCounting objects: 124, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (118/118), done.\nWriting objects: 100% (124/124), 19.73 KiB | 0 bytes/s, done.\nTotal 124 (delta 66), reused 1 (delta 0)\nremote: Compressing source files... done.\nremote: Building source:\nremote:\nremote: -----&gt; Ruby app detected\nremote: -----&gt; Compiling Ruby/Rails\nremote: -----&gt; Using Ruby version: ruby-2.2.2\nremote: -----&gt; Installing dependencies using 1.9.7\nremote:        Ruby version change detected. Clearing bundler cache.\nremote:        Old: ruby 2.0.0p645 (2015-04-13 revision 50299) [x86_64-linux]\nremote:        New: ruby 2.2.2p95 (2015-04-13 revision 50295) [x86_64-linux]\nremote:        Running: bundle install --without development:test --path                       vendor/bundle --binstubs vendor/bundle/bin -j4 --deployment\nremote:        Fetching gem metadata... &lt;omitted&gt;\nremote:        Installing... &lt;omitted&gt;\nremote:        Bundle complete! 33 Gemfile dependencies, 70 gems now installed.\nremote:        Gems in the groups development and test were not installed.\nremote:        Bundled gems are installed into ./vendor/bundle.\n\n    ...&lt;misc post install notifications omitted&gt;...\n\nremote:        Bundle completed (93.05s)\nremote:        Cleaning up the bundler cache.\nremote: -----&gt; Preparing app for Rails asset pipeline\nremote:        Running: rake assets:precompile\nremote:        rake aborted!\nremote:        NameError: uninitialized constant Uglifier::VERSION\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/uglifier_compressor.rb:48:in `initialize'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/uglifier_compressor.rb:24:in `new'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/uglifier_compressor.rb:24:in `instance'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/uglifier_compressor.rb:28:in `call'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/processor_utils.rb:75:in `call_processor'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/processor_utils.rb:57:in `block in call_processors'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/processor_utils.rb:56:in `reverse_each'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/processor_utils.rb:56:in `call_processors'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/loader.rb:86:in `load_asset_by_uri'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/loader.rb:45:in `block in load'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/loader.rb:156:in `fetch_asset_from_dependency_cache'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/loader.rb:38:in `load'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/cached_environment.rb:20:in `block in initialize'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/cached_environment.rb:47:in `yield'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/cached_environment.rb:47:in `load'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/base.rb:63:in `find_asset'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/base.rb:70:in `find_all_linked_assets'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/manifest.rb:138:in `block in find'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/legacy.rb:114:in `block (2 levels) in logical_paths'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/path_utils.rb:223:in `block in stat_tree'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/path_utils.rb:207:in `block in stat_directory'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/path_utils.rb:204:in `each'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/path_utils.rb:204:in `stat_directory'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/path_utils.rb:222:in `stat_tree'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/legacy.rb:105:in `each'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/legacy.rb:105:in `block in logical_paths'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/legacy.rb:104:in `each'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/legacy.rb:104:in `logical_paths'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/manifest.rb:136:in `find'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/sprockets/manifest.rb:162:in `compile'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-rails-2.3.1/lib/sprockets/rails/task.rb:70:in `block (3 levels) in define'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-3.1.0/lib/rake/sprocketstask.rb:147:in `with_logger'\nremote:        /tmp/build_1185918c8fd4fbf904b3d7c2f09505d5/vendor/bundle/ruby/2.2.0/gems/sprockets-rails-2.3.1/lib/sprockets/rails/task.rb:69:in `block (2 levels) in define'\nremote:        Tasks: TOP =&gt; assets:precompile\nremote:        (See full trace by running task with --trace)\nremote:  !\nremote:  !     Precompiling assets failed.\nremote:  !\nremote:\nremote:  !     Push rejected, failed to compile Ruby app\n</code></pre>\n"}]