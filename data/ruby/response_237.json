[{"tags": ["ruby", "metaprogramming"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11666817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f94bfbc906f8ac86327d3f953cea3315?s=128&d=identicon&r=PG&f=1", "display_name": "Abhinav Kannojia", "link": "https://stackoverflow.com/users/11666817/abhinav-kannojia"}, "is_accepted": true, "score": -1, "last_activity_date": 1564082687, "creation_date": 1564082687, "answer_id": 57208921, "question_id": 57192401, "link": "https://stackoverflow.com/questions/57192401/i-am-trying-hard-to-achieve-expected-output-but-failing-to-create-a-reusable-co/57208921#57208921", "title": "I am trying hard to achieve expected output, but failing to create a reusable code for below problem statement. Any suggestions?", "body": "<p>Found one solution to this problem. I will be glad if this can help someone, who is struggling with meta-programming like me.</p>\n\n<pre><code>class MethodCreator\n  def initialize(class_name)\n    @klass = Class.new\n    Object.const_set(class_name, @klass)\n  end\n  def new_method(method_name, code_str)\n    @klass.instance_eval do\n        define_method(method_name) { instance_eval(code_str)}\n    end\n  end\n  def call(method_name)\n    @klass.new.send(method_name)\n  end\nend\n\nputs \"Please enter the class name:\"\nclass_name = gets.chomp\nputs \"Please enter the method name you wish to define:\"\nmethod_name = gets.chomp\nputs \"Please enter the method's code:\"\ncode_str = gets.chomp\n\nobj = MethodCreator.new(class_name)\n\nobj.new_method(method_name, code_str)\nputs obj.call(method_name)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 11666817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f94bfbc906f8ac86327d3f953cea3315?s=128&d=identicon&r=PG&f=1", "display_name": "Abhinav Kannojia", "link": "https://stackoverflow.com/users/11666817/abhinav-kannojia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 57208921, "answer_count": 1, "score": -2, "last_activity_date": 1564126234, "creation_date": 1564010249, "last_edit_date": 1564126234, "question_id": 57192401, "link": "https://stackoverflow.com/questions/57192401/i-am-trying-hard-to-achieve-expected-output-but-failing-to-create-a-reusable-co", "title": "I am trying hard to achieve expected output, but failing to create a reusable code for below problem statement. Any suggestions?", "body": "<p>Define a class dynamically. Class name should be taken from user by standard input(command line)\nThen prompt user for a method name and a single line of code. This method should be defined as instance method in the class above dynamically with the code entered by user.\nTell user that the class and method is defined.\nThen call this instance method and display the result</p>\n\n<p>What I am trying to do is - \n\"Making a class with initialize method which takes the dynamic class name method and then creating class there, after that creating an instance of that class there only in initialize method.Then assigning it to a class instance variable and calling the greet method/ dynamic method on that instance.\"\nBut failing in this process.\nI want to do this with OOPS and main problem is accepting user input and assigning it to dynamic method and class.</p>\n\n<pre><code>class MethodCreator\n  @my_class_instance_var = \"\"\n\n  class &lt;&lt; self\n    attr_accessor :my_class_instance_var\n   end\n\n  def initialize(class_name)\n    cl = Class.new\n    @my_class_instance_var = Object.const_set(class_name, cl)\n  end\n  def create_method(method_name, code_str)\n    self.class.define_method(method_name, code_str)\n  end\nend\n\nputs \"Please enter the class name:\"\nclass_name = gets.chomp\nputs \"Please enter the method name you wish to define:\"\nmethod_name = gets.chomp\nputs \"Please enter the method's code:\"\ncode_str = gets.chomp\n\nobj = MethodCreator.new(class_name)\n\nobj.my_class_instance_var.method_name\n</code></pre>\n\n<p>Expected :</p>\n\n<pre><code>Please enter the class name: User\nPlease enter the method name you wish to define: greet\nPlease enter the method's code: \"Welcome from #{self.class} class. I am #{self}\"\n\n--- Result ---\nHello, Your class User with method greet is ready. Calling: User.new.greet:\n\"Welcome from User class. I am &lt;User#123456&gt;\"\n</code></pre>\n"}, {"tags": ["ruby", "bundler"], "answers": [{"comments": [{"owner": {"reputation": 88, "user_id": 7842706, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/34fee7b848d57276c1dd0192894e0171?s=128&d=identicon&r=PG&f=1", "display_name": "jaibhavaya", "link": "https://stackoverflow.com/users/7842706/jaibhavaya"}, "edited": false, "score": 0, "creation_date": 1564067048, "post_id": 57192671, "comment_id": 100917119, "body": "Version 1.17 is included with the base ruby install now and it will not allow me to remove it."}, {"owner": {"reputation": 88, "user_id": 7842706, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/34fee7b848d57276c1dd0192894e0171?s=128&d=identicon&r=PG&f=1", "display_name": "jaibhavaya", "link": "https://stackoverflow.com/users/7842706/jaibhavaya"}, "edited": false, "score": 0, "creation_date": 1564067715, "post_id": 57192671, "comment_id": 100917479, "body": "This is also not an option because this docker image needs to be able to handle both versions, as again, bundler documentation says it should be able to.  I have read that it absolutely should be smart enough to utilized a different version of bundler based on the version the Gemfile.lock was created with. <a href=\"https://bundler.io/v2.0/guides/bundler_2_upgrade.html#version-autoswitch\" rel=\"nofollow noreferrer\">bundler.io/v2.0/guides/&hellip;</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 88, "user_id": 7842706, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/34fee7b848d57276c1dd0192894e0171?s=128&d=identicon&r=PG&f=1", "display_name": "jaibhavaya", "link": "https://stackoverflow.com/users/7842706/jaibhavaya"}, "edited": false, "score": 0, "creation_date": 1564073640, "post_id": 57192671, "comment_id": 100920332, "body": "Usually Docker images are focused on one thing, so seeing two versions of one dependency is especially odd. You could try with <a href=\"https://rvm.io/gemsets/basics\" rel=\"nofollow noreferrer\">RVM gemsets</a> if this is a real issue for you."}, {"owner": {"reputation": 88, "user_id": 7842706, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/34fee7b848d57276c1dd0192894e0171?s=128&d=identicon&r=PG&f=1", "display_name": "jaibhavaya", "link": "https://stackoverflow.com/users/7842706/jaibhavaya"}, "edited": false, "score": 0, "creation_date": 1564077817, "post_id": 57192671, "comment_id": 100922159, "body": "This is a docker image that is running in concourse, and is used for our build pipelines.  As such it handles building our ruby projects.  My question is moreso just why this isn&#39;t operating as bundler says it should be."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 88, "user_id": 7842706, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/34fee7b848d57276c1dd0192894e0171?s=128&d=identicon&r=PG&f=1", "display_name": "jaibhavaya", "link": "https://stackoverflow.com/users/7842706/jaibhavaya"}, "edited": false, "score": 0, "creation_date": 1564078395, "post_id": 57192671, "comment_id": 100922416, "body": "It&#39;s because you can only have one <code>bundler</code> command installed at a time. If RVM gemsets doesn&#39;t work for you, consider specifying the full path to the <code>bundler</code> executable you&#39;re trying to engage, like <code>gem contents bundler</code> will tell you more."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 88, "user_id": 7842706, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/34fee7b848d57276c1dd0192894e0171?s=128&d=identicon&r=PG&f=1", "display_name": "jaibhavaya", "link": "https://stackoverflow.com/users/7842706/jaibhavaya"}, "edited": false, "score": 0, "creation_date": 1564078461, "post_id": 57192671, "comment_id": 100922453, "body": "If you look at how Travis handles this, they just use the old bundler and you can selectively install the new one with <a href=\"https://docs.travis-ci.com/user/languages/ruby/#bundler-20\" rel=\"nofollow noreferrer\">a <code>before_install</code> directive</a>. They have the same problems you do and this is their solution."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1564013087, "creation_date": 1564013087, "answer_id": 57192671, "question_id": 57191795, "link": "https://stackoverflow.com/questions/57191795/bundler-version-not-autoswitching-in-the-presence-of-gemfile-lock/57192671#57192671", "title": "Bundler Version not AutoSwitching in the Presence of Gemfile.lock", "body": "<p><code>bundle -v</code> tells you which one you're using now, and if it isn't 2.0 then you'll get this error.</p>\n\n<p>It's not (yet?) smart enough to load a different version of <code>bundler</code> depending on the <code>Gemfile</code>. Normally you'd make it mach with <code>bundle exec</code>, but you've got a chicken-and-egg problem here then, as that command must succeed before the correct Bundler version can load, but it can't because it errors out early.</p>\n\n<p>Remove all versions of Bundler and reinstall just 2.x.</p>\n"}, {"tags": [], "owner": {"reputation": 88, "user_id": 7842706, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/34fee7b848d57276c1dd0192894e0171?s=128&d=identicon&r=PG&f=1", "display_name": "jaibhavaya", "link": "https://stackoverflow.com/users/7842706/jaibhavaya"}, "is_accepted": false, "score": 0, "last_activity_date": 1564092830, "creation_date": 1564092830, "answer_id": 57210762, "question_id": 57191795, "link": "https://stackoverflow.com/questions/57191795/bundler-version-not-autoswitching-in-the-presence-of-gemfile-lock/57210762#57210762", "title": "Bundler Version not AutoSwitching in the Presence of Gemfile.lock", "body": "<p>It turns out this was an issue with the ruby docker image we used.  It utilizes the environment variable $BUNDLER_VERSION which overrides the bundler auto switching.  This was solved by upgrading to a newer image.</p>\n\n<p>It could have also been solved by explicitly setting BUNDLER_VERSION to the version needed for the Gemfile.</p>\n"}], "owner": {"reputation": 88, "user_id": 7842706, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/34fee7b848d57276c1dd0192894e0171?s=128&d=identicon&r=PG&f=1", "display_name": "jaibhavaya", "link": "https://stackoverflow.com/users/7842706/jaibhavaya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1564092830, "creation_date": 1564005654, "question_id": 57191795, "link": "https://stackoverflow.com/questions/57191795/bundler-version-not-autoswitching-in-the-presence-of-gemfile-lock", "title": "Bundler Version not AutoSwitching in the Presence of Gemfile.lock", "body": "<p>After upgrading bundler, I am receiving an error of:</p>\n\n<pre><code>You must use Bundler 2 or greater with this lockfile.\n</code></pre>\n\n<p>I have both version 1.17.3 and 2.0.2 installed locally.  I was under the impression based on what I have read that this is supposed to auto switch the version based on what the Gemfile.lock denotes.  This doesn't appear to be happening.</p>\n\n<p>Below is some useful info about my environment.</p>\n\n<pre><code># cat Gemfile.lock \nGEM\n  remote: https://rubygems.org/\n  specs:\n    domain_name (0.5.20190701)\n      unf (&gt;= 0.0.5, &lt; 1.0.0)\n    http-cookie (1.0.3)\n      domain_name (~&gt; 0.5)\n    mime-types (3.2.2)\n      mime-types-data (~&gt; 3.2015)\n    mime-types-data (3.2019.0331)\n    netrc (0.11.0)\n    pp (0.1.1)\n    rest-client (2.0.2)\n      http-cookie (&gt;= 1.0.2, &lt; 2.0)\n      mime-types (&gt;= 1.16, &lt; 4.0)\n      netrc (~&gt; 0.8)\n    terminal-table (1.8.0)\n      unicode-display_width (~&gt; 1.1, &gt;= 1.1.1)\n    unf (0.1.4)\n      unf_ext\n      unf_ext (0.0.7.6)\n    unicode-display_width (1.6.0)\n\nPLATFORMS\n  ruby\n\nDEPENDENCIES\n  pp (~&gt; 0.1.1)\n  rest-client (~&gt; 2.0)\n  terminal-table (~&gt; 1.8)\n\nBUNDLED WITH\n   2.0.2\n# bundle install\nYou must use Bundler 2 or greater with this lockfile.\n# gem list | grep bundler\nbundler (2.0.2, default: 1.17.3, 1.16.6)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "intellij-idea", "comments", "keyword"], "answers": [{"tags": [], "owner": {"reputation": 3559, "user_id": 8203759, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cm-tuL0Mjvw/AAAAAAAAAAI/AAAAAAAAATw/hihlo0AbAoY/photo.jpg?sz=128", "display_name": "Konstantin Annikov", "link": "https://stackoverflow.com/users/8203759/konstantin-annikov"}, "is_accepted": false, "score": 0, "last_activity_date": 1564033478, "creation_date": 1564033478, "answer_id": 57195074, "question_id": 57191478, "link": "https://stackoverflow.com/questions/57191478/how-do-i-remove-keyword-highlighting-within-comments-in-intellij/57195074#57195074", "title": "How do I remove keyword highlighting within comments in Intellij?", "body": "<p>Please uncheck option <strong>Settings | Editor | General| Appearance-> Highlight RDoc and ruby syntax in comments</strong> and restart IntelliJ IDEA.</p>\n"}], "owner": {"reputation": 1481, "user_id": 3835653, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/00763a70467aa3e5fa0920f34fa42a90?s=128&d=identicon&r=PG&f=1", "display_name": "ThePumpkinMaster", "link": "https://stackoverflow.com/users/3835653/thepumpkinmaster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564035826, "creation_date": 1564003616, "last_edit_date": 1564035826, "question_id": 57191478, "link": "https://stackoverflow.com/questions/57191478/how-do-i-remove-keyword-highlighting-within-comments-in-intellij", "title": "How do I remove keyword highlighting within comments in Intellij?", "body": "<p><img src=\"https://i.imgur.com/4rAcKNa.png\" alt=\"https://imgur.com/4rAcKNa\"></p>\n\n<p>I have a keyword \"end\" within a comment in Ruby. How do I disable highlighting of keywords when in a comment?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564003231, "post_id": 57191372, "comment_id": 100892378, "body": "So, the question can be distilled down to &quot;how to get the fractional part of a float&quot;?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564003309, "post_id": 57191372, "comment_id": 100892415, "body": "&quot; I cannot tell my code to compare price[-2..-1]&quot; - you actually can. Just convert it into a string. :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564003394, "post_id": 57191372, "comment_id": 100892451, "body": "A few options are listed here: <a href=\"https://stackoverflow.com/questions/12406032/get-fraction-part-of-a-decimal-number\" title=\"get fraction part of a decimal number\">stackoverflow.com/questions/12406032/&hellip;</a>"}, {"owner": {"reputation": 1, "user_id": 11473180, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BQCrwWCHfVc/AAAAAAAAAAI/AAAAAAAAGDs/vQXnSxv-3c8/photo.jpg?sz=128", "display_name": "StarPerfect", "link": "https://stackoverflow.com/users/11473180/starperfect"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564003844, "post_id": 57191372, "comment_id": 100892582, "body": "That did give me some progress - by comparing as a string[-2..-1] my output is: [11.0, 7.9, 10.01, 3.02, 9.91] . Thank you!"}, {"owner": {"reputation": 2169, "user_id": 974936, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/92bf3deb0a4fa650b44e7706b0736adb?s=128&d=identicon&r=PG", "display_name": "watzon", "link": "https://stackoverflow.com/users/974936/watzon"}, "edited": false, "score": 1, "creation_date": 1564005559, "post_id": 57191372, "comment_id": 100893051, "body": "Just a pro-tip since you&#39;re learning. Don&#39;t ever do financial calculations with floats. Floating point operations are not precise and can lead to major errors. Instead represent monetary values as whole numbers and insert the decimal point before displaying :)"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1564005696, "post_id": 57191372, "comment_id": 100893099, "body": "I&#39;m confused, why can&#39;t you just do a <code>&gt;</code> / <code>&lt;</code> (greater/less than) comparison?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1564005724, "post_id": 57191372, "comment_id": 100893106, "body": "Do you want something like the following: <code>price = 23.67; dollars = price.to_i #=&gt; 23; cents = (100 * (price - dollars)).round #=&gt; 67</code>? When working with currency you should be using <a href=\"https://ruby-doc.org/stdlib-2.6.3/libdoc/bigdecimal/rdoc/BigDecimal.html\" rel=\"nofollow noreferrer\">BigDecimal</a> to avoid problems with round-off errors."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1564045222, "post_id": 57191372, "comment_id": 100904586, "body": "@maxpleaner: apparently, they want to sort only by fractional part. For whatever reasons."}], "owner": {"reputation": 1, "user_id": 11473180, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-BQCrwWCHfVc/AAAAAAAAAAI/AAAAAAAAGDs/vQXnSxv-3c8/photo.jpg?sz=128", "display_name": "StarPerfect", "link": "https://stackoverflow.com/users/11473180/starperfect"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564002991, "creation_date": 1564002991, "question_id": 57191372, "link": "https://stackoverflow.com/questions/57191372/float-sorting-comparisons", "title": "Float Sorting &amp; Comparisons", "body": "<p>I am doing some exercises to help with understanding how various enumerables work under the hood. To do so I have to solve a problem using .each then solve the same problem with the enum that I'm working on, in this case .sort_by. I have everything figured out with the exception of how to actually compare the cents aka the decimal places in these float numbers.</p>\n\n<p>In my code transformed will be an array of arrays. Each array inside transformed will consist of the actual data being compared along with the price that data came from. Because this is an each iteration, I cannot hardcode the data to compare. Because it's a float instead and not a string or array, I cannot tell my code to compare price[-2..-1] as I might with a string/array. I can't multiply each price by 100 and compare those because that would compare the entire amount, not just the cents as required.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>  def test_sort_by_number_of_cents\n    prices = [3.02, 9.91, 7.9, 10.01, 11.0]\n    transformed = []\n    prices.each do |price|\n      transformed &lt;&lt; [X, price]\n    end\n    transformed = transformed.sort \n    sorted = []\n    transformed.each do |sort_key, price|\n      sorted &lt;&lt; price \n    end \n    assert_equal [11.0, 10.01, 3.02, 7.9, 9.91], sorted\n  end\n</code></pre>\n\n<p>The expected result can be seen in the assertion: [11.0, 10.01, 3.02, 7.9, 9.91]</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1563999876, "post_id": 57189775, "comment_id": 100891212, "body": "Not sure what whoever gave you this task meant by &quot;DSL&quot;, but I&#39;d argue there&#39;s none of that here."}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564000064, "post_id": 57190556, "comment_id": 100891264, "body": "And I have a few other suggestions too, but it&#39;s not you who asked for improvements :)"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564000505, "post_id": 57190556, "comment_id": 100891439, "body": "Yes @SergioTulentsev I left the <code>store</code> reader there for OP, just in case.. :) Suggestions always welcome :))"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564000846, "post_id": 57190556, "comment_id": 100891578, "body": "Well, here you go: 1) Enumerable#sum accepts a block. 2) that available_products check is veeeery inefficient (creates a temp array each time. Why not use the hash directly?) and yes, 3) use your readers :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564002696, "post_id": 57190556, "comment_id": 100892214, "body": "BTW, check out <a href=\"https://exercism.io/\" rel=\"nofollow noreferrer\">exercism</a>, if you haven&#39;t already."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564002700, "post_id": 57190556, "comment_id": 100892215, "body": "Grrr, I cannot get what you mean :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564002849, "post_id": 57190556, "comment_id": 100892265, "body": "Oh? See definition of <code>cart_total</code>, for example. See using the readers there? I too do not :)"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564003725, "post_id": 57190556, "comment_id": 100892541, "body": "Oh I get it. But I considered instance variable or reader the same. Using instance vars allows to just delete a symbol from the code, in case deciding of not using readers later. But I feel I&#39;m missing something. Is your suggestion for a good practice or something different? (I&#39;m cleaning up my comments)."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1564004055, "post_id": 57190556, "comment_id": 100892658, "body": "&quot; in case deciding of not using readers later&quot; - this hadn&#39;t happen to me even once. You either remove the whole thing or you don&#39;t. Using readers everywhere, even privately, allows for more stable code. Say, you wanted to add a lazy initialization to your <code>store</code> accessor. If you were using methods everywhere, you simply replace <code>attr_reader</code> with a full method which does memoization or what-have-you. And the rest of the code stays exactly the same. Now imagine the code that uses instance variables."}, {"owner": {"reputation": 1, "user_id": 11666817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f94bfbc906f8ac86327d3f953cea3315?s=128&d=identicon&r=PG&f=1", "display_name": "Abhinav Kannojia", "link": "https://stackoverflow.com/users/11666817/abhinav-kannojia"}, "edited": false, "score": 0, "creation_date": 1564011408, "post_id": 57190556, "comment_id": 100894326, "body": "@iGian Thanks alot for such quick turnaround. Your solution is really very helpful."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": true, "score": 0, "last_activity_date": 1564004102, "last_edit_date": 1564004102, "creation_date": 1563998988, "answer_id": 57190556, "question_id": 57189775, "link": "https://stackoverflow.com/questions/57189775/can-i-improve-this-code-using-advance-ruby-concepts-and-i-also-wanted-to-print-t/57190556#57190556", "title": "Can I improve this code using advance ruby concepts and I also wanted to print the list with item values?", "body": "<p>It's a quite broad question and it shouldn't, but I'd like to give my view on this anyway.</p>\n\n<ul>\n<li>Initialize empty Hash with default values (<a href=\"https://ruby-doc.org/core-2.6.3/Hash.html#method-c-new\" rel=\"nofollow noreferrer\">Hash#new</a>)</li>\n<li>Don't forget <code>attr_reader</code> for accessing instance variable (<a href=\"https://ruby-doc.org/core-2.6.3/Module.html#method-i-attr_reader\" rel=\"nofollow noreferrer\">Module#attr_reader</a>)</li>\n<li>Check the docs for the method used here (<a href=\"https://ruby-doc.org/core-2.6.3/Hash.html\" rel=\"nofollow noreferrer\">Hash</a>, <a href=\"https://ruby-doc.org/core-2.6.3/Array.html\" rel=\"nofollow noreferrer\">Array</a>, <a href=\"https://ruby-doc.org/core-2.6.3/Enumerable.html\" rel=\"nofollow noreferrer\">Enumerable</a>)</li>\n</ul>\n\n<p>Here is a possible refactor:</p>\n\n<pre><code>class Store\n\n    attr_reader :cart, :products # you need to access the variables\n\n    def initialize\n        @cart = Hash.new(0) # initilize the Hash with default value\n        @products = Hash.new\n    end\n\n    def add_to_cart(item, quantity)\n        # increase by quantity, thanks to default value of the Hash,\n        # only if the product is available\n        if products.has_key? item # products thanks to the attr_reader, then see Hash docs\n            cart[item] += quantity\n            true\n        else\n            false\n        end\n    end\n\n    def add_product(item, price)\n        products[item] = price\n    end\n\n    def cart_total\n        cart.sum { |k, v| products[k] * v }\n    end\n\n    def products_list\n        products.keys\n    end\nend\n</code></pre>\n\n<p>So, you can use this class as follows:</p>\n\n<pre><code>store = Store.new\nstore.add_product(\"Apple\", 10.0 )\nstore.add_product(\"Lemon\", 12.0 )\nstore.add_product(\"Melon\", 20.0 )\n\nstore.products_list\n#=&gt; [\"Apple\", \"Lemon\", \"Melon\"]\nstore.products\n#=&gt; {\"Apple\"=&gt;10.0, \"Lemon\"=&gt;12.0, \"Melon\"=&gt;20.0}\n\nstore.add_to_cart('Apple', 4) #=&gt; true\nstore.add_to_cart('Melon', 5) #=&gt; true\nstore.add_to_cart('Carrot', 1)  #=&gt; false # not available, not added\n\nstore.cart # thanks to attr_reader\n#=&gt; {\"Apple\"=&gt;4, \"Melon\"=&gt;2}\n\nstore.cart_total\n#=&gt; 140.0\n</code></pre>\n\n<p>You could think also to define a <code>Cart</code> class...</p>\n"}], "owner": {"reputation": 1, "user_id": 11666817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f94bfbc906f8ac86327d3f953cea3315?s=128&d=identicon&r=PG&f=1", "display_name": "Abhinav Kannojia", "link": "https://stackoverflow.com/users/11666817/abhinav-kannojia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 57190556, "answer_count": 1, "score": -1, "last_activity_date": 1564004102, "creation_date": 1563995564, "question_id": 57189775, "link": "https://stackoverflow.com/questions/57189775/can-i-improve-this-code-using-advance-ruby-concepts-and-i-also-wanted-to-print-t", "title": "Can I improve this code using advance ruby concepts and I also wanted to print the list with item values?", "body": "<p>Write a simple DSL for creating a shopping list. We should be able to specify the item name and quantity..\nSomething like.</p>\n\n<p>My code works for pre-defined hash map, but once I take user input for creating a hash map it fails and also I want to improve my code by using more advanced concepts to achieve this result. Any suggestions ?</p>\n\n<pre><code>class Store\n    def initialize(item, quantity)\n       @products = { \"item\" =&gt; quantity }\n       @cart = []\n    end\n\n    def add_to_cart( item )\n        @cart &lt;&lt; item\n    end\n\n    def add_product( item, price )\n        @products[item] = price\n    end\n\n    def cart_total\n        @cart.inject(0){|sum, item| sum + @products[item]}\n    end\n\n    def items\n        @products.join(', ')\n    end\nend\n\nputs \"Please provide item name\"\nitem = gets.chomp\nputs \"Please provide quantity associated with item\"\nquantity = gets.chomp.to_i\nstore = Store.new(item, quantity)\nstore.add_to_cart(item)\n\nputs store.cart       \nprintf \"$%6.2f\", store.cart_total \n</code></pre>\n\n<p>Expected Result:</p>\n\n<p>s1.list  #Should print complete list of the item and values added</p>\n\n<p>sl.total # Should list the total price value for shopping done.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "graphql", "mongoid"], "comments": [{"owner": {"reputation": 497, "user_id": 3276790, "user_type": "registered", "profile_image": "https://graph.facebook.com/792085488/picture?type=large", "display_name": "jasmo2", "link": "https://stackoverflow.com/users/3276790/jasmo2"}, "edited": false, "score": 0, "creation_date": 1570936661, "post_id": 57188799, "comment_id": 103072752, "body": "Did you manage to solve it?"}, {"owner": {"reputation": 3024, "user_id": 496080, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/fa85d9c407a20bef042b86f764df8cfa?s=128&d=identicon&r=PG", "display_name": "Chris Edwards", "link": "https://stackoverflow.com/users/496080/chris-edwards"}, "edited": false, "score": 0, "creation_date": 1615999640, "post_id": 57188799, "comment_id": 117868118, "body": "@Sunil did you manage to do this?"}], "owner": {"reputation": 3344, "user_id": 835009, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b993da4af90825d5b07d60b59e75757c?s=128&d=identicon&r=PG", "display_name": "Sunil", "link": "https://stackoverflow.com/users/835009/sunil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1563991256, "creation_date": 1563991256, "question_id": 57188799, "link": "https://stackoverflow.com/questions/57188799/return-mongodb-dynamic-attributes-in-graphql-query", "title": "Return mongodb dynamic attributes in graphql query", "body": "<p>I have the following graphql type </p>\n\n<pre><code>class Types::UserListType &lt; Types::BaseObject\n  field :id, ID, null: false\n  field :name, String, null: false\n  field :email, String, null: false\nend\n</code></pre>\n\n<p>Now I have added a new attribute, custom_attributes, in the user table which is stored as a Hash in mongoid. It will have dynamic key/value pairs in the database. How do I return this data back in the graphql query for users. </p>\n\n<p>Looking for something like this, </p>\n\n<pre><code>class Types::UserListType &lt; Types::BaseObject\n  field :id, ID, null: false\n  field :name, String, null: false\n  field :email, String, null: false\n  field :custom_attributes, Hash, null: true\nend\n</code></pre>\n\n<p>How do I even do something like this? </p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "is_accepted": true, "score": 6, "last_activity_date": 1563989413, "creation_date": 1563989413, "answer_id": 57188368, "question_id": 57188180, "link": "https://stackoverflow.com/questions/57188180/ruby-why-are-all-coordinates-getting-updated-in-an-array-of-arrays/57188368#57188368", "title": "Ruby: Why are all coordinates getting updated in an array of arrays?", "body": "<p>The problem is that you are placing the same instance in the row multiple times.  To make each item in the array a new object change your array definition to the following: </p>\n\n<pre><code>arr = Array.new(5){ Array.new(5) {Case.new}   }\n</code></pre>\n\n<p>See this question for more info: <a href=\"https://stackoverflow.com/questions/20184717/how-to-create-array-of-objects\">How to create array of objects?</a></p>\n"}, {"tags": [], "owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "is_accepted": false, "score": 1, "last_activity_date": 1564046057, "creation_date": 1564046057, "answer_id": 57198341, "question_id": 57188180, "link": "https://stackoverflow.com/questions/57188180/ruby-why-are-all-coordinates-getting-updated-in-an-array-of-arrays/57198341#57198341", "title": "Ruby: Why are all coordinates getting updated in an array of arrays?", "body": "<p>The issue is caused by the way you create the array:</p>\n\n<pre><code>arr = Array.new(5){ Array.new(5, Case.new) }\n</code></pre>\n\n<p><code>arr</code> is an array of 5 arrays (<code>Array.new(5) {...}</code>), each of them containing 5 references to the same instance of the <code>Case</code> class (<code>Array.new(5, Case.new)</code>).</p>\n\n<p>There inner arrays and the outer arrays are created in different ways.</p>\n\n<h3>The outer array</h3>\n\n<pre><code>Array.new(5){ ... }\n</code></pre>\n\n<p>This code fragment creates an array of 5 elements using a block to initialize each element. The block is executed 5 times (once for each array element). The block creates and returns a new array each time (the inner arrays).</p>\n\n<h3>The inner arrays</h3>\n\n<pre><code>Array.new(5, Case.new)\n</code></pre>\n\n<p>This code fragment creates an array of 5 elements and initialize each of them with the same value. The value, returned by calling <code>Case.new</code> once, before <code>Array.new()</code> is an object an Ruby puts 5 references to it into the array returned by <code>Array.new()</code>.</p>\n\n<h2>The solution</h2>\n\n<p>I hope it is clear now how to create an array of 5 different arrays that contain 5 different values. One way is to create the inner arrays the same way as the outer array: by calling <code>Array.new()</code> with one argument (the number of elements) and a block to be executed to initialize each element:</p>\n\n<pre><code>arr = Array.new(5){ Array.new(5) { Case.new } }\n</code></pre>\n\n<hr>\n\n<p>Read about <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-c-new\" rel=\"nofollow noreferrer\"><code>Array.new()</code></a> in the Ruby documentation.</p>\n"}], "owner": {"reputation": 119, "user_id": 11347906, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qoAGArQpAPQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reVLjRNnqCXF01NVMsS2UXMwZJKCg/mo/photo.jpg?sz=128", "display_name": "Y.Z", "link": "https://stackoverflow.com/users/11347906/y-z"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 1, "accepted_answer_id": 57188368, "answer_count": 2, "score": 2, "last_activity_date": 1564046057, "creation_date": 1563988654, "last_edit_date": 1563989182, "question_id": 57188180, "link": "https://stackoverflow.com/questions/57188180/ruby-why-are-all-coordinates-getting-updated-in-an-array-of-arrays", "title": "Ruby: Why are all coordinates getting updated in an array of arrays?", "body": "<p>I'm trying to change a specific coordinate, but an array is getting all updated.</p>\n\n<p>The goal is to change the <code>fixed</code> attribute to a single coordinate.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Case\n  attr_accessor :fixed\n\n  def initialize\n    self.fixed = false\n  end\n\n  def fixed?\n    !!fixed\n  end\nend\n\ndef display(arr)\n  5.times do |x|\n    5.times do |y|\n      print arr[x][y].fixed?\n      print ' '\n    end\n\n    puts\n  end\nend\n\n# Defining array\narr = Array.new(5){ Array.new(5, Case.new) }\n\n# Displaying the arrays\ndisplay(arr)\n\n# Changing value of a single coord\narr[2][3].fixed = true\n\n# Displaying the arrays\ndisplay(arr)\n\n</code></pre>\n\n<p>Here is the result for the first display call</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>false false false false false \nfalse false false false false \nfalse false false false false \nfalse false false false false \nfalse false false false false \n</code></pre>\n\n<p>And second display</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>false false false false false \nfalse false false false false \ntrue true true true true \nfalse false false false false \nfalse false false false false \n</code></pre>\n\n<p>The expected result is:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>false false false false false \nfalse false false false false \nfalse false false true false \nfalse false false false false \nfalse false false false false \n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1563987243, "post_id": 57187762, "comment_id": 100885791, "body": "Can you provide a &quot;testable/isolated&quot; example? It&#39;s hard to reproduce your scenario without the Play class and different unavailable methods."}, {"owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1563987867, "post_id": 57187762, "comment_id": 100886032, "body": "@SebastianPalma I copied and pasted what I have right now. This will get the job done right now before I clean it up. but if you remove the <code>self.turn_tracker += 1</code> to <code>turn_tracker += 1</code> it will fail."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1563988093, "post_id": 57187762, "comment_id": 100886131, "body": "&quot;I don&#39;t see why <code>turn_tracker</code> should need the self call&quot; - without it, writing value of <code>turn_tracker</code> creates a local variable, which shadows your getter. See the linked posts."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1563988249, "post_id": 57187762, "comment_id": 100886206, "body": "@SebastianPalma: no need for MCVE here, it&#39;s the same old question :)"}, {"owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "edited": false, "score": 0, "creation_date": 1563988702, "post_id": 57187762, "comment_id": 100886423, "body": "Thanks, guys. I&#39;ll take a look at that question. Appreciate the help"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1563988792, "post_id": 57187762, "comment_id": 100886461, "body": "Thanks @SergioTulentsev. Nice catch."}], "owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "closed_date": 1563987994, "answer_count": 0, "score": 0, "last_activity_date": 1563988169, "creation_date": 1563986776, "last_edit_date": 1563988012, "question_id": 57187762, "link": "https://stackoverflow.com/questions/57187762/why-is-my-attr-accessor-variable-returning-nil", "closed_reason": "Duplicate", "title": "Why is my attr_accessor variable returning nil?", "body": "<p>I am practicing my ruby skills after a long while from backpacking and I think I am way rustier than I thought. The following code below is a connect 4 game that I am trying to implement for Code Wars. While doing coding this, I am having a problem with the <code>attr_accessor: turn_counter</code>.</p>\n\n<p>I have declared this variable as such, so I can increment it but when I call <code>turn_tracker.odd?</code> I receive a value of nil. Why is that? All my other variables are able to read/write respectively. For example, the <code>grid</code> is able to be called and returns the expected value. I don't see why turn_tracker should need the <code>self</code> call. The other variables don't need to. Can I get a refresher as to why that is? Thanks.   </p>\n\n<pre><code>class Connect4\n\n\nattr_reader :player_one, :player_two\n  attr_accessor :turn_tracker, :grid\n\n  def initialize\n    @player_one = Player.new(\"Player 1\")\n    @player_two = Player.new(\"Player 2\")\n    @turn_tracker = 1\n    @grid = [[],[],[],[],[],[]]\n  end\n\n  def play(column)\n\n    ######### Problem ##############\n    if turn_tracker.odd?\n      self.turn_tracker += 1\n    ################################    \n\n      player_one.makes_a_move(grid[column])\n      win?(grid[column], player_one)\n    else\n      self.turn_tracker += 1\n      player_two.makes_a_move(grid[column])\n      win?(grid[column], player_two)\n    end\n  end\n\n  private\n\n  def win?(grid, player)\n    #vertical\n    if grid.count(player) == 4\n      player_indexes = grid.each_index.select do |i|\n        grid[i].name == player.name\n      end\n\n      one = (player_indexes[0].next == player_indexes[1])\n      two = (player_indexes[1].next == player_indexes[2])\n      three = (player_indexes[2].next == player_indexes[3])\n\n      if (one &amp;&amp; two &amp;&amp; three)\n        \"#{player.name} wins!\"\n      elsif column_full?(grid)\n        \"Column full!\"\n      else\n        \"#{player.name} has a turn\"\n      end\n    else\n      \"#{player.name} has a turn\"\n    end\n  end\n\n  def column_full?(grid)\n    grid.size == 7\n  end\nend\n\nclass Player\n  attr_reader :name\n\n  def initialize(name)\n    @name = name\n  end\n\n  def makes_a_move(grid)\n    grid &lt;&lt; self\n  end\nend\n\nputs \"New game!\"\ngame = Connect4.new\nputs game.play(0) #\"Should return 'Player 1 has a turn'\nputs game.play(0) #\"Should return 'Player 2 has a turn'\n\nputs \"New game!\"\ngame = Connect4.new\n\nputs game.play(0) #\"Should return 'Player 1 has a turn'\nputs game.play(1) #\"Should return 'Player 2 has a turn'\nputs game.play(0) #\"Should return 'Player 1 has a turn'\nputs game.play(1) #\"Should return 'Player 2 has a turn'\nputs game.play(0) #\"Should return 'Player 1 has a turn'\nputs game.play(1) #\"Should return 'Player 2 has a turn'\nputs game.play(0) #\"Player 1 wins!\", \"Player 1 wins!'\n\n\nputs \"New game\"\ngame = Connect4.new\nputs game.play(4) #\"Player 1 has a turn\"\nputs game.play(4) #\"Player 2 has a turn\"\nputs game.play(4) #\"Player 1 has a turn\"\nputs game.play(4) #\"Player 2 has a turn\"\nputs game.play(4) #\"Player 1 has a turn\"\nputs game.play(4) #\"Player 2 has a turn\"\nputs game.play(4) # \"Column full!\"\n</code></pre>\n"}, {"tags": ["ruby", "gitlab"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1563977556, "post_id": 57184849, "comment_id": 100880392, "body": "You don&#39;t need to know much ruby to do this. Just a tiny bit. Mostly it&#39;s about gitlab&#39;s API/DSL."}, {"owner": {"reputation": 1, "user_id": 5435654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e48b92183e438205231048ae3c43ae0?s=128&d=identicon&r=PG&f=1", "display_name": "KostyaBorisenko", "link": "https://stackoverflow.com/users/5435654/kostyaborisenko"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1563978450, "post_id": 57184849, "comment_id": 100880950, "body": "I still need help to write this pseudo code in RUBY &quot;If (user == &quot;autoreleaser&quot;) enable :read_pipeline&quot;"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1563978835, "post_id": 57184849, "comment_id": 100881233, "body": "Yes, that&#39;s what I meant by &quot;you need to know gitlab&#39;s api/dsl&quot;. Should be similar to how ghost users are treated. <code>rule { subject_autoreleaser }.enable :read_pipeline</code>. You might need to add method <code>User#autoreleaser?</code> if it&#39;s not yet available."}], "owner": {"reputation": 1, "user_id": 5435654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3e48b92183e438205231048ae3c43ae0?s=128&d=identicon&r=PG&f=1", "display_name": "KostyaBorisenko", "link": "https://stackoverflow.com/users/5435654/kostyaborisenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563978928, "creation_date": 1563977082, "last_edit_date": 1563978928, "question_id": 57184849, "link": "https://stackoverflow.com/questions/57184849/add-specific-policy-rule-to-concrete-user-in-gitlab-using-user-policy-rb", "title": "Add specific policy rule to concrete user in gitlab using user_policy.rb", "body": "<p>I need autoreleaser (name of one user) be able to read pipelines (secret variables) in GIT.\nI'm trying to solve that using policies in <code>/opt/gitlab/embedded/service/gitlab-rails/app/policies/user_policy.rb</code></p>\n\n<p>I don't know Ruby, but it should look like:</p>\n\n<pre><code>If (user == \"autoreleaser\") enable :read_pipeline\n</code></pre>\n\n<p>This is code in <code>user_policy.rb</code></p>\n\n<pre><code>    class UserPolicy &lt; BasePolicy\n      desc \"The current user is the user in question\"\n      condition(:user_is_self, score: 0) { @subject == @user }\n\n\n      desc \"This is the ghost user\"\n      condition(:subject_ghost, scope: :subject, score: 0) { @subject.ghost? }\n\n      rule { ~restricted_public_level }.enable :read_user\n      rule { ~anonymous }.enable :read_user\n\n      rule { user_is_self | admin }.enable :destroy_user\n      rule { subject_ghost }.prevent :destroy_user\n\n    end\n</code></pre>\n"}, {"tags": ["c++", "ruby", "cout", "inspect"], "comments": [{"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1563977159, "post_id": 57184838, "comment_id": 100880164, "body": "No C++ does not have Reflection. I heard there were plans to add it though."}, {"owner": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "reply_to_user": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 1, "creation_date": 1563977196, "post_id": 57184838, "comment_id": 100880181, "body": "@Slava for the last 20 years, I recon"}, {"owner": {"reputation": 3572, "user_id": 770627, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f60b4f21d3929d8195bfae6fe8f68694?s=128&d=identicon&r=PG", "display_name": "Albert.Qing", "link": "https://stackoverflow.com/users/770627/albert-qing"}, "edited": false, "score": 0, "creation_date": 1563977254, "post_id": 57184838, "comment_id": 100880221, "body": "it seems good news"}, {"owner": {"reputation": 40276, "user_id": 432358, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/D931H.png?s=128&g=1", "display_name": "Slava", "link": "https://stackoverflow.com/users/432358/slava"}, "edited": false, "score": 0, "creation_date": 1563977341, "post_id": 57184838, "comment_id": 100880275, "body": "You may use debug information but that would be compiler specific and maybe available only in specific cases."}, {"owner": {"reputation": 3572, "user_id": 770627, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f60b4f21d3929d8195bfae6fe8f68694?s=128&d=identicon&r=PG", "display_name": "Albert.Qing", "link": "https://stackoverflow.com/users/770627/albert-qing"}, "reply_to_user": {"reputation": 55924, "user_id": 5245033, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/6dbfd37ccb940fd2afcd49e966ad97e4?s=128&d=identicon&r=PG&f=1", "display_name": "SergeyA", "link": "https://stackoverflow.com/users/5245033/sergeya"}, "edited": false, "score": 0, "creation_date": 1563977749, "post_id": 57184838, "comment_id": 100880506, "body": "@SergeyA thanks for your edit"}], "owner": {"reputation": 3572, "user_id": 770627, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f60b4f21d3929d8195bfae6fe8f68694?s=128&d=identicon&r=PG", "display_name": "Albert.Qing", "link": "https://stackoverflow.com/users/770627/albert-qing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "closed_date": 1563977180, "answer_count": 0, "score": 0, "last_activity_date": 1563977058, "creation_date": 1563977058, "last_edit_date": 1592644375, "question_id": 57184838, "link": "https://stackoverflow.com/questions/57184838/how-to-print-an-objects-member-in-c-without-override-operator", "closed_reason": "Duplicate", "title": "How to print an object&#39;s member in c++ without override operator &lt;&lt;?", "body": "<p>I know in ruby language there is a method called  <a href=\"https://apidock.com/ruby/Object/inspect\" rel=\"nofollow noreferrer\"><strong>object.inspect</strong></a>\ncan print all member's in object without override\ntoString(Java) &lt;&lt;(in cpp),it's very usefull for debug print.</p>\n<p>I want to know How to implment these function in c++ or is there has any library to do this? I'm newer to learn c++, hate to write too much templates for many diffent complex classes!</p>\n<p>Thanks for any advise!</p>\n"}, {"tags": ["ruby", "sublimetext3"], "comments": [{"owner": {"reputation": 238, "user_id": 2440476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SNFzq.jpg?s=128&g=1", "display_name": "Mishal Zaman", "link": "https://stackoverflow.com/users/2440476/mishal-zaman"}, "edited": false, "score": 0, "creation_date": 1563976223, "post_id": 57184383, "comment_id": 100879516, "body": "Have you looked at this: <a href=\"http://ilkinulas.github.io/programming/2016/02/05/sublime-text-syntax-highlighting.html\" rel=\"nofollow noreferrer\">ilkinulas.github.io/programming/2016/02/05/&hellip;</a> . You could set a regex that matches for <code>@</code>, E.g. <code>^@</code>"}, {"owner": {"reputation": 16941, "user_id": 814803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUo4b.png?s=128&g=1", "display_name": "OdatNurd", "link": "https://stackoverflow.com/users/814803/odatnurd"}, "edited": false, "score": 0, "creation_date": 1564016100, "post_id": 57184383, "comment_id": 100895102, "body": "Is the <code>Ruby</code> package you&#39;re using the one that ships with Sublime? If so, a color scheme tweak should probably be enough, I think."}, {"owner": {"reputation": 34222, "user_id": 881559, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/K8wbX.png?s=128&g=1", "display_name": "Abram", "link": "https://stackoverflow.com/users/881559/abram"}, "edited": false, "score": 0, "creation_date": 1564062776, "post_id": 57184383, "comment_id": 100914614, "body": "I tried a bunch of color schemes. Know a good one?"}], "owner": {"reputation": 34222, "user_id": 881559, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/K8wbX.png?s=128&g=1", "display_name": "Abram", "link": "https://stackoverflow.com/users/881559/abram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563975721, "creation_date": 1563975721, "question_id": 57184383, "link": "https://stackoverflow.com/questions/57184383/ruby-instance-variable-correct-syntax-highlighting-in-sublime", "title": "Ruby instance variable correct syntax highlighting in sublime", "body": "<p>I am using \"Spacegrey Eighties\" theme with \"Monokai - Spacegray\" UI color scheme. I'm also using packages \"Ruby\" and \"SublimeLinter-ruby\" ... </p>\n\n<p>I'd like to see the <code>@</code> the same color as the rest of the instance variable. Thanks.</p>\n\n<p><a href=\"https://i.stack.imgur.com/6yMKq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6yMKq.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "reactjs", "webpacker", "react-rails"], "answers": [{"tags": [], "owner": {"reputation": 238, "user_id": 2440476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/SNFzq.jpg?s=128&g=1", "display_name": "Mishal Zaman", "link": "https://stackoverflow.com/users/2440476/mishal-zaman"}, "is_accepted": true, "score": 1, "last_activity_date": 1563975657, "creation_date": 1563975657, "answer_id": 57184360, "question_id": 57184046, "link": "https://stackoverflow.com/questions/57184046/import-react-library-ruby-on-rails/57184360#57184360", "title": "Import React library Ruby On Rails", "body": "<p>Did you follow the instructions on how to set up React and Webpack through this repo: <a href=\"https://github.com/reactjs/react-rails\" rel=\"nofollow noreferrer\">https://github.com/reactjs/react-rails</a></p>\n\n<p>If so, you can install SemanticUI from this documentation (<a href=\"https://react.semantic-ui.com/usage/\" rel=\"nofollow noreferrer\">https://react.semantic-ui.com/usage/</a>) using Yarn.</p>\n"}], "owner": {"reputation": 205, "user_id": 11441594, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bffdd1fc04040a40266c589e3fa48960?s=128&d=identicon&r=PG&f=1", "display_name": "mamenejr", "link": "https://stackoverflow.com/users/11441594/mamenejr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 57184360, "answer_count": 1, "score": -2, "last_activity_date": 1563975657, "creation_date": 1563974701, "question_id": 57184046, "link": "https://stackoverflow.com/questions/57184046/import-react-library-ruby-on-rails", "title": "Import React library Ruby On Rails", "body": "<p>Having knowledge of Ruby, I decided to start developing a web application with RoR.Since I didn't find a front-end framework for RoR, I decided to go for React.\nThat's how I found the gem <code>react-rails</code>.</p>\n\n<p>However, I don't know how to import a React library into my RoR application. I would like to import the <code>SemanticUI</code> library.</p>\n\n<p>How do I proceed to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pg-search"], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 10949610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1d982aec95597146d6b75148e090cdd?s=128&d=identicon&r=PG", "display_name": "user2369480", "link": "https://stackoverflow.com/users/10949610/user2369480"}, "edited": false, "score": 0, "creation_date": 1563969923, "post_id": 57182462, "comment_id": 100875761, "body": "rake pg_search:multisearch:rebuild[Client] rake aborted! ActiveRecord::StatementInvalid: PG::UndefinedTable: ERROR:  relation &quot;pg_search_documents&quot; does not exist LINE 8:                WHERE a.attrelid = &#39;&quot;pg_search_documents&quot;&#39;::r..."}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "reply_to_user": {"reputation": 71, "user_id": 10949610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1d982aec95597146d6b75148e090cdd?s=128&d=identicon&r=PG", "display_name": "user2369480", "link": "https://stackoverflow.com/users/10949610/user2369480"}, "edited": false, "score": 0, "creation_date": 1563970402, "post_id": 57182462, "comment_id": 100876048, "body": "Can you run it with <code>Company</code> first, instead of <code>Client</code> and see if you see the same error?"}, {"owner": {"reputation": 71, "user_id": 10949610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1d982aec95597146d6b75148e090cdd?s=128&d=identicon&r=PG", "display_name": "user2369480", "link": "https://stackoverflow.com/users/10949610/user2369480"}, "edited": false, "score": 0, "creation_date": 1563971114, "post_id": 57182462, "comment_id": 100876447, "body": "I tried  Company.first.clients.search(name: &quot;Vasja B&quot;)  and it&#39;s return 15 records..."}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "reply_to_user": {"reputation": 71, "user_id": 10949610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1d982aec95597146d6b75148e090cdd?s=128&d=identicon&r=PG", "display_name": "user2369480", "link": "https://stackoverflow.com/users/10949610/user2369480"}, "edited": false, "score": 0, "creation_date": 1563971264, "post_id": 57182462, "comment_id": 100876547, "body": "I mean the rake task: <code>rake pg_search:multisearch:rebuild[Company]</code>. The error you posted as a response makes me think there&#39;s either a migration missing or a <code>pg_search_scope</code> configuration issue"}], "tags": [], "owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "is_accepted": false, "score": 0, "last_activity_date": 1563969767, "creation_date": 1563969767, "answer_id": 57182462, "question_id": 57182322, "link": "https://stackoverflow.com/questions/57182322/gem-pgsearch-find-a-wrong-client-by-name/57182462#57182462", "title": "gem PgSearch find a wrong client by name", "body": "<p>Your indexes may need to be <a href=\"https://github.com/Casecommons/pg_search#rebuilding-search-documents-for-a-given-class\" rel=\"nofollow noreferrer\">rebuilt</a></p>\n\n<p>The documentation lists scenarios where they might get out of sync along with commands on how to rebuild them.</p>\n\n<pre><code>$ rake pg_search:multisearch:rebuild[Client]\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 10949610, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1d982aec95597146d6b75148e090cdd?s=128&d=identicon&r=PG", "display_name": "user2369480", "link": "https://stackoverflow.com/users/10949610/user2369480"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1563969767, "creation_date": 1563969326, "last_edit_date": 1592644375, "question_id": 57182322, "link": "https://stackoverflow.com/questions/57182322/gem-pgsearch-find-a-wrong-client-by-name", "title": "gem PgSearch find a wrong client by name", "body": "<p>I have a strange exceptional error. And I don't know why it happened. Can you help me and describe what I did wrong?</p>\n<p>I have a simple pgsearch.</p>\n<h1>client.rb</h1>\n<pre><code>pg_search_scope :search,\n   against: %i[name phone_number],\n   associated_against: {\n    month_payments: [:payment_note],\n      addresses: %i[address_1 town state zip_code]\n      },\n    using: { tsearch: { prefix: true, any_word: true } }\n</code></pre>\n<p>Here's my console output:</p>\n<pre><code>c = Company.find(172)\nc.clients.search(name: &quot;Vasja B&quot;)\n=&gt; [#&lt;Client id: 2210, company_id: 172, name: &quot;Client 2&quot;, email: &quot;&quot;, variety: &quot;residential&quot;, created_at: &quot;2019-07-23 13:19:36&quot;, updated_at: &quot;2019-07-24 11:48:19&quot;, phone_number: &quot;&quot;, organisation: &quot;&quot;, office_note: &quot;&quot;, special_note: &quot;&quot;, status: &quot;active&quot;, mowing: true, landscaping: false, fertilizing: false, leaf_removal: true&gt;]&gt;\n\n2.5.3 :016 &gt; c.clients.count\n(1.2ms)  SELECT COUNT(*) FROM &quot;clients&quot; WHERE &quot;clients&quot;.&quot;company_id&quot; = $1  [[&quot;company_id&quot;, 172]]\n=&gt; 2 \n\n2.5.3 :017 &gt; c.clients.last\nClient Load (1.0ms)  SELECT  &quot;clients&quot;.* FROM &quot;clients&quot; WHERE \n&quot;clients&quot;.&quot;company_id&quot; = $1 ORDER BY &quot;clients&quot;.&quot;id&quot; DESC LIMIT $2  [[&quot;company_id&quot;, 172], [&quot;LIMIT&quot;, 1]]\n=&gt; #&lt;Client id: 2210, company_id: 172, name: &quot;Client 2&quot;, email: &quot;&quot;, variety: &quot;residential&quot;, created_at: &quot;2019-07-23 13:19:36&quot;, updated_at: &quot;2019-07-24 11:48:19&quot;, phone_number: &quot;&quot;, organisation: &quot;&quot;, office_note: &quot;&quot;, special_note: &quot;&quot;, status: &quot;active&quot;, mowing: true, landscaping: false, fertilizing: false, leaf_removal: true&gt; \n\n2.5.3 :018 &gt; c.clients.first\nClient Load (0.3ms)  SELECT  &quot;clients&quot;.* FROM &quot;clients&quot; WHERE &quot;clients&quot;.&quot;company_id&quot; = $1 ORDER BY &quot;clients&quot;.&quot;id&quot; ASC LIMIT $2  [[&quot;company_id&quot;, 172], [&quot;LIMIT&quot;, 1]]\n=&gt; #&lt;Client id: 2209, company_id: 172, name: &quot;Client 1&quot;, email: &quot;&quot;, variety: &quot;residential&quot;, created_at: &quot;2019-07-23 13:19:11&quot;, updated_at: &quot;2019-07-24 11:48:19&quot;, phone_number: &quot;&quot;, organisation: &quot;&quot;, office_note: &quot;&quot;, special_note: &quot;&quot;, status: &quot;active&quot;, mowing: true, landscaping: false, fertilizing: false, leaf_removal: false&gt; \n</code></pre>\n<p>Why pgsearch find a Client 2 instead of not existing record? :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1563967351, "post_id": 57181442, "comment_id": 100874350, "body": "<code>args[:tabs].to_s.split(&#39; &#39;).last</code> no?"}, {"owner": {"reputation": 1, "user_id": 11829875, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k4OHTBz-CrM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfZYZMhpO1DsRllmImJEswUuzh-IQ/photo.jpg?sz=128", "display_name": "plamen terziev", "link": "https://stackoverflow.com/users/11829875/plamen-terziev"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1563968180, "post_id": 57181442, "comment_id": 100874820, "body": "I get LoadError: cannot load such file --  auth_switch/setup.rb &quot;bogus&quot;"}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1563968378, "post_id": 57181442, "comment_id": 100874930, "body": "Why are you showing us the <code>setup.rb</code>? You are starting that file from the <code>export</code> task? How? Where can&#39;t you access the third parameter: inside the rake-task or inside the <code>setup.rb</code> file?"}, {"owner": {"reputation": 1, "user_id": 11829875, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k4OHTBz-CrM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfZYZMhpO1DsRllmImJEswUuzh-IQ/photo.jpg?sz=128", "display_name": "plamen terziev", "link": "https://stackoverflow.com/users/11829875/plamen-terziev"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1563968598, "post_id": 57181442, "comment_id": 100875066, "body": "@nathanvda I&#39;m starting the file from <code>export task. I can&#39;t access the third parameter  inside </code>setup.rb` file."}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1563968751, "post_id": 57181442, "comment_id": 100875156, "body": "Please show us how you start/load the <code>setup.rb</code> file. Maybe also explain <i>why</i> you are using a <code>setup.rb</code> which should be run as a script (and then wrap it in a rake-task) and not just extract the actual code to a class/library and then let both setup.rb and your rake-task use that instead?"}, {"owner": {"reputation": 1, "user_id": 11829875, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k4OHTBz-CrM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfZYZMhpO1DsRllmImJEswUuzh-IQ/photo.jpg?sz=128", "display_name": "plamen terziev", "link": "https://stackoverflow.com/users/11829875/plamen-terziev"}, "edited": false, "score": 0, "creation_date": 1563969033, "post_id": 57181442, "comment_id": 100875286, "body": "see here <a href=\"https://pastebin.com/fAX4enEx\" rel=\"nofollow noreferrer\">pastebin.com/fAX4enEx</a>"}], "owner": {"reputation": 1, "user_id": 11829875, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-k4OHTBz-CrM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rfZYZMhpO1DsRllmImJEswUuzh-IQ/photo.jpg?sz=128", "display_name": "plamen terziev", "link": "https://stackoverflow.com/users/11829875/plamen-terziev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563966299, "creation_date": 1563966299, "question_id": 57181442, "link": "https://stackoverflow.com/questions/57181442/read-command-line-arguments-into-rb-file", "title": "Read command line arguments into rb file", "body": "<p>I have this ruby rake task:</p>\n\n<pre><code>namespace :auth_switch do\n\n  task :generate, [:clean_up, :tabs, :gateway] =&gt; [:environment] do |t, args|\n    tabs = args[:tabs].to_s.split(' ')\n\n    tabs.each do |tab|   \n        require_relative \"auth_switch/#{tab}.rb\"\n      end\n    end\n  end\n\n  task :export, [:clean_up, :tabs, :gateway] =&gt; :generate do |t, args|\n\n  end\nend\n</code></pre>\n\n<p>setub.rb file</p>\n\n<pre><code>require 'factory_girl'\ninclude FactoryGirl::Syntax::Methods\ninclude FactoryGirl::Syntax::Default\n\np '~~~~~~~~~~~~~~~'\np gateway = ARGV[0]\nargs[:gateway]\nbinding.pry\n</code></pre>\n\n<p>I use this command to execute the rake:</p>\n\n<pre><code>bundle exec rake auth_switch:export\\[true,'moto setup', bogus]\n</code></pre>\n\n<p>I want to get only the variable for 'bogus' which is number 3:</p>\n\n<pre><code>[1] pry(main)&gt; gateway\n=&gt; \"auth_switch:export[true, moto setup, bogus]\"\n</code></pre>\n\n<p>How I can do this?</p>\n"}, {"tags": ["ruby", "rspec", "capybara"], "comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1563982778, "post_id": 57178742, "comment_id": 100883497, "body": "This seems like a bug in Capybara with the reloading behavior of ancestor elements. What exactly does clicking on the &#39;.marked&#39; element do?"}, {"owner": {"reputation": 70, "user_id": 3552254, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100002283336511/picture?type=large", "display_name": "SugarOnBacon", "link": "https://stackoverflow.com/users/3552254/sugaronbacon"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1563993087, "post_id": 57178742, "comment_id": 100888429, "body": "Makes some requests and after they are done removes the ccs &#39;.marked&#39;. So for as far as Capybara is concerned, executes some javascript, and removes &#39;.marked&#39; css after a delay. But it seems you already found the cause of this problem."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1564095505, "post_id": 57178742, "comment_id": 100928351, "body": "FYI: This should now be fixed in the Capybara master branch if you want to give that a try"}], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1564095547, "last_edit_date": 1564095547, "creation_date": 1563991694, "answer_id": 57188902, "question_id": 57178742, "link": "https://stackoverflow.com/questions/57178742/multiple-chained-finders-result-in-selecting-root-node/57188902#57188902", "title": "Multiple chained finders result in selecting root node", "body": "<p><strong>Update:</strong> The original issue should be fixed in the Capybara master branch as of 7/25/2019</p>\n\n<p>I've confirmed there is a bug in Capybaras <code>ancestor</code> method if the node originally returned ever needs to be reloaded. You can temporarily work around that by using xpath queries rather than <code>ancestor</code> with something like </p>\n\n<p>element = find('example').find(:xpath, './/ancestor::*'. class: 'ancestor')</p>\n"}], "owner": {"reputation": 70, "user_id": 3552254, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100002283336511/picture?type=large", "display_name": "SugarOnBacon", "link": "https://stackoverflow.com/users/3552254/sugaronbacon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 57188902, "answer_count": 1, "score": 0, "last_activity_date": 1564095547, "creation_date": 1563957721, "last_edit_date": 1563969881, "question_id": 57178742, "link": "https://stackoverflow.com/questions/57178742/multiple-chained-finders-result-in-selecting-root-node", "title": "Multiple chained finders result in selecting root node", "body": "<p>I need to be able to execute code on part of the page within an ancestor of an unique element. </p>\n\n<p>I have the following code:</p>\n\n<pre><code>find('div', text: 'text').ancestor('ancestor').find('desired').click\n</code></pre>\n\n<p>and I'm sometimes getting the following error on the second or third appearance of the above line in a test case:</p>\n\n<pre><code>Ambiguous match, found 2 elements matching visible css \"desired\" \nwithin #&lt;Capybara::Node::Element tag=\"html\" path=\"/HTML\"&gt;\n</code></pre>\n\n<p>This also happens more regularly when executing the following:</p>\n\n<pre><code>element = find('div', text: 'text').ancestor('ancestor')\nelement.find('desired').click\nexpect(element).to have_content('stuff')\n</code></pre>\n\n<p>I can not use <code>first</code> or <code>all</code> since I think they are the cause of stale element reference error on a dynamic page. The stale element error disappears by using this. </p>\n\n<p>In the second example reinitiating <code>element</code> after click does not help. </p>\n\n<p>I don't know how to use ancestor with <code>within</code> and even then I would have to use within every time I switch between this element and root, which is often. </p>\n\n<p>Note that this is a potential duplicate of a unanswered <a href=\"https://stackoverflow.com/questions/54138364/capybara-selecting-root-node-rather-than-specified-node\">question</a>, but I created a new question because of the much newer version of capybara (I use 3.15.0) this is happening in. The issue is happening both locally and remote in this case.</p>\n\n<p>EDIT: I found an example that always replicates the error:</p>\n\n<pre><code>element = find('example').ancestor(:css, '.ancestor')\nelement.find(:css, '.marked').click\nputs element.path\nexpect(element).to have_no_css('.marked')\n</code></pre>\n\n<p>The path on line 3 will be correctly printed to console but the example will fail with the above error. If I put <code>sleep 2</code> between <code>puts ...</code> and <code>expect ...</code> there will be no error. I suppose this is not expected capybara behaviour?</p>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 0, "creation_date": 1563971115, "post_id": 57175697, "comment_id": 100876450, "body": "Have you tried using an <code>after(:all)</code> block to clean the data up when you&#39;re done? It sounds like you have a <code>before(:all)</code> working where it&#39;s setup, and you only need the tear down. This is what&#39;s mentioned in the first answer below, but using the different alias (<code>:context</code> instead of <code>:all</code>)"}], "answers": [{"tags": [], "owner": {"reputation": 8462, "user_id": 405865, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e29f04f339715955060858e0e65e1311?s=128&d=identicon&r=PG", "display_name": "fphilipe", "link": "https://stackoverflow.com/users/405865/fphilipe"}, "is_accepted": false, "score": 3, "last_activity_date": 1563948069, "creation_date": 1563948069, "answer_id": 57176194, "question_id": 57175697, "link": "https://stackoverflow.com/questions/57175697/rspec-run-before-block-once-before-multiple-it-blocks/57176194#57176194", "title": "Rspec run before block once before multiple it blocks", "body": "<p>Since RSpec 3 these are officially named <code>before/after(:{example,context})</code> (see <a href=\"https://relishapp.com/rspec/rspec-core/v/3-8/docs/hooks/before-and-after-hooks\" rel=\"nofollow noreferrer\">docs</a>).</p>\n\n<p>What you want to accomplish can be done with a <code>before(:context)</code> where you set up the data and an <code>after(:context)</code> where you clean it up.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>RSpec.describe Thing do\n  before(:context) do\n    @thing = Thing.new\n  end\n\n  after(:context) do\n    @thing.delete\n  end\n\n  it \"has 0 widgets\" do\n    expect(@thing.widgets.count).to eq(0)\n  end\n\n  it \"can accept new widgets\" do\n    @thing.widgets &lt;&lt; Object.new\n  end\n\n  it \"shares state across examples\" do\n    expect(@thing.widgets.count).to eq(1)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 3502, "user_id": 2558108, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/DUiG3.jpg?s=128&g=1", "display_name": "Qwertie", "link": "https://stackoverflow.com/users/2558108/qwertie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1563948069, "creation_date": 1563945369, "question_id": 57175697, "link": "https://stackoverflow.com/questions/57175697/rspec-run-before-block-once-before-multiple-it-blocks", "title": "Rspec run before block once before multiple it blocks", "body": "<p>I have a <code>context</code> block in rspec with multiple <code>it</code> blocks inside it. I want to run a before block to set up data for the <code>it</code> blocks but this data takes a long time to set up and is being used to read only. rspec <code>before(:each)</code> creates and deletes this data after every it block which takes a long time. <code>before(:all)</code> creates the data at the start of all the tests and doesn't delete it. </p>\n\n<p>Is there any way I can have this data created just within the <code>context</code> block and deleted after?</p>\n"}, {"tags": ["ruby", "jekyll"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1563945544, "post_id": 57175665, "comment_id": 100863433, "body": "Please show <code>gem info jekyll</code> and <code>echo $PATH</code>."}, {"owner": {"reputation": 75, "user_id": 11522261, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CMpqpXim-7w/AAAAAAAAAAI/AAAAAAAAA6E/wPgk2tyElIE/photo.jpg?sz=128", "display_name": "MattNewtonian", "link": "https://stackoverflow.com/users/11522261/mattnewtonian"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1563949843, "post_id": 57175665, "comment_id": 100865005, "body": "OK. I am having a hard time just adding this stuff and formatting it properly &lt;i&gt;*sigh*&lt;/i&gt; but I added it to my original post!"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1563955733, "post_id": 57175665, "comment_id": 100867907, "body": "Your <code>jekyll</code> executable should be in <code>&#47;usr&#47;local&#47;lib&#47;ruby&#47;gems&#47;2.6.0&#47;bin</code>, I believe. Adding that directory to the <code>PATH</code> should allow you to run it. Or you can run it directly as <code>&#47;usr&#47;local&#47;lib&#47;ruby&#47;gems&#47;2.6.0&#47;bin&#47;jekyll</code>."}, {"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1563969967, "post_id": 57175665, "comment_id": 100875783, "body": "It doesn&#39;t look like you&#39;re using a ruby version manager, so that&#39;s one reasons you might see path errors like this. Highly recommend picking one (asdf + asdf-ruby, rvm, rbenv are my favorites in order). With a ruby version manager it should set the paths and such relatively automatically. If you type <code>which jekyll</code> you should see that it&#39;s not in any of the paths you listed, so you&#39;ll need to add it per @Amadan"}, {"owner": {"reputation": 75, "user_id": 11522261, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CMpqpXim-7w/AAAAAAAAAAI/AAAAAAAAA6E/wPgk2tyElIE/photo.jpg?sz=128", "display_name": "MattNewtonian", "link": "https://stackoverflow.com/users/11522261/mattnewtonian"}, "edited": false, "score": 0, "creation_date": 1563986971, "post_id": 57175665, "comment_id": 100885672, "body": "OK thanks for the recommendations I will try it! If I want to learn more about how to add directories to the PATH is this a good link? <a href=\"http://osxdaily.com/2014/08/14/add-new-path-to-path-command-line/\" rel=\"nofollow noreferrer\">osxdaily.com/2014/08/14/add-new-path-to-path-command-line</a> feel free to suggest another resource I was just googling :)"}], "owner": {"reputation": 75, "user_id": 11522261, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CMpqpXim-7w/AAAAAAAAAAI/AAAAAAAAA6E/wPgk2tyElIE/photo.jpg?sz=128", "display_name": "MattNewtonian", "link": "https://stackoverflow.com/users/11522261/mattnewtonian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564020592, "creation_date": 1563945229, "last_edit_date": 1564020592, "question_id": 57175665, "link": "https://stackoverflow.com/questions/57175665/how-to-install-jekyll", "title": "How to install Jekyll?", "body": "<p>I've been trying to install Jekyll for two days now but don't understand why it doesn't work.</p>\n\n<p>I've updated my ruby development environment and have homebrew and bundler installed. </p>\n\n<p>When I type <code>gem install jekyll</code> it seems to work, but when I try to use jekyll, it doesn't work</p>\n\n<pre><code>macs-MBP-2:~ mac$ which ruby\n/usr/local/opt/ruby/bin/ruby\nmacs-MBP-2:~ mac$ ruby -v\nruby 2.6.3p62 (2019-04-16 revision 67580) [x86_64-darwin17]\nmacs-MBP-2:~ mac$ gem install bundler\nSuccessfully installed bundler-2.0.2\nParsing documentation for bundler-2.0.2\nDone installing documentation for bundler after 2 seconds\n1 gem installed\nmacs-MBP-2:~ mac$ gem install jekyll\nSuccessfully installed jekyll-3.8.6\nParsing documentation for jekyll-3.8.6\nDone installing documentation for jekyll after 0 seconds\n1 gem installed\nmacs-MBP-2:~ mac$ jekyll new\n-bash: jekyll: command not found\n\n\nmacs-MBP-2:~ mac$ gem info jekyll    \n*** LOCAL GEMS ***    \njekyll (3.8.6)\n    Author: Tom Preston-Werner\n    Homepage: https://github.com/jekyll/jekyll\n    License: MIT\n    Installed at: /usr/local/lib/ruby/gems/2.6.0\n    A simple, blog aware, static site generator.\n\nmacs-MBP-2:~ mac$ echo $PATH\n/usr/local/bin:/usr/local/opt/ruby/bin:/usr/local/bin:/usr/local/bin:/Library/Frameworks/Python.framework/Versions/3.7/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/go/bin:/usr/local/share/dotnet:/Users/mac/.dotnet/tools:/Library/Frameworks/Mono.framework/Versions/Current/Commands\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "helper"], "answers": [{"comments": [{"owner": {"reputation": 6315, "user_id": 5411198, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/FabOI.jpg?s=128&g=1", "display_name": "sergio MAGA", "link": "https://stackoverflow.com/users/5411198/sergio-maga"}, "edited": false, "score": 0, "creation_date": 1563944655, "post_id": 57175446, "comment_id": 100863209, "body": "using  <code>map</code> solved the problem. I changed the helper to: <code>User.find_each.map { |u| u.name }</code> and the view to: <code>&lt;%= get_users.join(&#39; &#39;) %&gt;</code>."}], "tags": [], "owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "is_accepted": true, "score": 2, "last_activity_date": 1563943708, "creation_date": 1563943708, "answer_id": 57175446, "question_id": 57175389, "link": "https://stackoverflow.com/questions/57175389/rails-helper-method-return-nilclass/57175446#57175446", "title": "Rails helper method return NilClass", "body": "<p>Your helper method implicitly returns the result of calling <code>find_each</code>, which is different than returning a collection of user names. </p>\n\n<p>Think of it like running <code>5.times { |n| puts n }</code>: what's the value of that? Not \"0 1 2 3 4\", but \"5\", because <code>times</code> returns what it was called on, not what's run in its block.</p>\n\n<p>Your original code, by the way, returns the exact same thing--you are relying on a side effect inside the <code>find_each</code> block, i.e., appending <code>user.name</code> to the response.</p>\n\n<p>If you want to return a collection of the users' names you'd want to <code>map</code>/etc. and grab each user's name. Or, IIRC, you can do a find and a pluck so you only get back the users' names instead of all user fields.</p>\n"}, {"tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 1, "last_activity_date": 1563961630, "creation_date": 1563961630, "answer_id": 57179980, "question_id": 57175389, "link": "https://stackoverflow.com/questions/57175389/rails-helper-method-return-nilclass/57179980#57179980", "title": "Rails helper method return NilClass", "body": "<p>You can use as below also,</p>\n\n<pre><code>  &lt;%= User.all.map(&amp;:name).join(' ') %&gt;\n</code></pre>\n"}], "owner": {"reputation": 6315, "user_id": 5411198, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/FabOI.jpg?s=128&g=1", "display_name": "sergio MAGA", "link": "https://stackoverflow.com/users/5411198/sergio-maga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 57175446, "answer_count": 2, "score": 1, "last_activity_date": 1563961630, "creation_date": 1563943300, "last_edit_date": 1563943663, "question_id": 57175389, "link": "https://stackoverflow.com/questions/57175389/rails-helper-method-return-nilclass", "title": "Rails helper method return NilClass", "body": "<p>I have this code in <code>User#index</code> view:</p>\n\n<pre><code>&lt;%= User.find_each do |user| %&gt;\n  &lt;%= user.name %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>which returns the user names:</p>\n\n<pre><code>user1 user2 user3 ...\n</code></pre>\n\n<p>Then I move this code to the <code>UserHelper</code>:</p>\n\n<pre><code>module UserHelper\n  def get_users\n    User.find_each do |user|\n      user.name\n    end\n  end\nend\n</code></pre>\n\n<p>And call it from the <code>User#index</code> view with:</p>\n\n<pre><code>&lt;%= get_users %&gt;\n</code></pre>\n\n<p>The problem is that this is not returning any user. If I use <code>&lt;%= get_users.class %&gt;</code> it outputs <code>NilClass</code>. Why is the helper method not returning the user names?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 28433, "user_id": 1565525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2e3a5d0911464ffa3d7ac48475cf98d?s=128&d=identicon&r=PG", "display_name": "Fabio", "link": "https://stackoverflow.com/users/1565525/fabio"}, "edited": false, "score": 0, "creation_date": 1563943470, "post_id": 57175375, "comment_id": 100862876, "body": "<i>it looks like some java developers coded this app</i> - no this is rails developers &quot;signature&quot; :). There are no specific reason for it, maybe just blindly following conventions of the team."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1563943964, "post_id": 57175375, "comment_id": 100862999, "body": "I am also someone who prefers class methods, but a lot of people are just used to using instance methods. They often declare instance variables in initialize that they can use from the other method without passing arguments around. This is not necessarily a bad thing, although it can make it more difficult to follow if there&#39;s too much internal state being changed in a bunch of places"}, {"owner": {"reputation": 160, "user_id": 2301887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8b38328a1422b619af8a6cad602d1ab?s=128&d=identicon&r=PG", "display_name": "Vijay Raghavan Aravamudhan", "link": "https://stackoverflow.com/users/2301887/vijay-raghavan-aravamudhan"}, "reply_to_user": {"reputation": 28433, "user_id": 1565525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2e3a5d0911464ffa3d7ac48475cf98d?s=128&d=identicon&r=PG", "display_name": "Fabio", "link": "https://stackoverflow.com/users/1565525/fabio"}, "edited": false, "score": 0, "creation_date": 1563963368, "post_id": 57175375, "comment_id": 100872066, "body": "@Fabio - when I said &quot;Java developers&quot;, I have seen a lot of devs who are rooted in spring to use injected instances - and in those cases, it does seem like <code>Klass.new.do_foo</code> - thus the assumption/guess."}], "answers": [{"comments": [{"owner": {"reputation": 160, "user_id": 2301887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8b38328a1422b619af8a6cad602d1ab?s=128&d=identicon&r=PG", "display_name": "Vijay Raghavan Aravamudhan", "link": "https://stackoverflow.com/users/2301887/vijay-raghavan-aravamudhan"}, "edited": false, "score": 0, "creation_date": 1563963419, "post_id": 57176113, "comment_id": 100872091, "body": "as i mentioned - there is no state in these classes (neither class nor instance state)."}, {"owner": {"reputation": 28433, "user_id": 1565525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2e3a5d0911464ffa3d7ac48475cf98d?s=128&d=identicon&r=PG", "display_name": "Fabio", "link": "https://stackoverflow.com/users/1565525/fabio"}, "edited": false, "score": 1, "creation_date": 1563965453, "post_id": 57176113, "comment_id": 100873322, "body": "Noticed that in most cases when I tried to <i>save brain juice on this decision ..</i>, I spent more juice on explanations to others or to later myself ;)"}, {"owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "reply_to_user": {"reputation": 28433, "user_id": 1565525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2e3a5d0911464ffa3d7ac48475cf98d?s=128&d=identicon&r=PG", "display_name": "Fabio", "link": "https://stackoverflow.com/users/1565525/fabio"}, "edited": false, "score": 0, "creation_date": 1563976861, "post_id": 57176113, "comment_id": 100879944, "body": "@Fabio That one is at the bottom for a reason, and do note the team assessment / decision part :)"}, {"owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "reply_to_user": {"reputation": 160, "user_id": 2301887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8b38328a1422b619af8a6cad602d1ab?s=128&d=identicon&r=PG", "display_name": "Vijay Raghavan Aravamudhan", "link": "https://stackoverflow.com/users/2301887/vijay-raghavan-aravamudhan"}, "edited": false, "score": 0, "creation_date": 1563977213, "post_id": 57176113, "comment_id": 100880192, "body": "@VijayRaghavanAravamudhan Noted indeed, and pointed out non-immediate benefits of this convention on top."}, {"owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "edited": false, "score": 0, "creation_date": 1564027192, "post_id": 57176113, "comment_id": 100896925, "body": "The comments in this article are pretty good too: <a href=\"https://avdi.codes/service-objects/\" rel=\"nofollow noreferrer\">avdi.codes/service-objects</a>"}], "tags": [], "owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "is_accepted": false, "score": 2, "last_activity_date": 1563947664, "creation_date": 1563947664, "answer_id": 57176113, "question_id": 57175375, "link": "https://stackoverflow.com/questions/57175375/abcservice-new-do-foo-why-not-a-class-method/57176113#57176113", "title": "ABCService.new.do_foo - why not a class method?", "body": "<p>Making service objects stateful as a convention has its benefits: </p>\n\n<ul>\n<li>Minimal refactoring when one of them requires state </li>\n<li>Easy to mock in tests without messing around with constants</li>\n<li>Save brain juice on this decision when implementing a new service object </li>\n</ul>\n\n<p>That being said, whether this is beneficial for your codebase is something you / your team need to assess as part of defining your own architectural / code style conventions.</p>\n\n<p>It can be quite irritating to always have to call <code>Klass.new.do_something</code>. You can wrap it in a class method, eg:</p>\n\n<pre><code>class Service\n  class &lt;&lt; self\n    def do_something\n      new.do_something\n    end\n  end\n\n  def do_something\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 160, "user_id": 2301887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8b38328a1422b619af8a6cad602d1ab?s=128&d=identicon&r=PG", "display_name": "Vijay Raghavan Aravamudhan", "link": "https://stackoverflow.com/users/2301887/vijay-raghavan-aravamudhan"}, "edited": false, "score": 0, "creation_date": 1563977584, "post_id": 57181074, "comment_id": 100880411, "body": "Thanks - I&#39;m also leaning towards refactoring them to be class-methods."}], "tags": [], "owner": {"reputation": 28433, "user_id": 1565525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2e3a5d0911464ffa3d7ac48475cf98d?s=128&d=identicon&r=PG", "display_name": "Fabio", "link": "https://stackoverflow.com/users/1565525/fabio"}, "is_accepted": false, "score": 1, "last_activity_date": 1563965132, "creation_date": 1563965132, "answer_id": 57181074, "question_id": 57175375, "link": "https://stackoverflow.com/questions/57175375/abcservice-new-do-foo-why-not-a-class-method/57181074#57181074", "title": "ABCService.new.do_foo - why not a class method?", "body": "<p>\"Right tool for the job\"</p>\n\n<p>Having only class method, will explicitly tell other developers/readers of your code, that this service doesn't have state.<br>\nEven better, use module instead of class, then your intentions would be clear for others and for later you.</p>\n\n<p>When you need state, use instance method.<br>\nFor example you can have service which accepts two arguments, first one is argument which should be used for all calls of this service, but second can be change for every call.</p>\n\n<pre><code>class AddTax\n  def initialize(tax_rate)\n    @tax_rate = tax_rate\n  end\n\n  def to(amount)\n    amount * (1.0 + @tax_rate)\n  end\nend\n\n# Usage\n\nprices = [20, 100, 50, 49, 50]\n\nadd_tax = AddTax.new(0.24);\nwith_taxes = prices.map { |price| add_tax.to(price) }\n</code></pre>\n"}], "owner": {"reputation": 160, "user_id": 2301887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8b38328a1422b619af8a6cad602d1ab?s=128&d=identicon&r=PG", "display_name": "Vijay Raghavan Aravamudhan", "link": "https://stackoverflow.com/users/2301887/vijay-raghavan-aravamudhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1563965132, "creation_date": 1563943206, "question_id": 57175375, "link": "https://stackoverflow.com/questions/57175375/abcservice-new-do-foo-why-not-a-class-method", "title": "ABCService.new.do_foo - why not a class method?", "body": "<p>I just inherited an RoR codebase, and in many of the controllers I see the following style of code:</p>\n\n<pre><code>ABCService.new.do_foo\n</code></pre>\n\n<p>I have been working on RoR codebases for quite a long time, but I fail to understand why the <code>.new.</code> style is used. The service classes in question do not hold any state (even with class-level variables) and the same can be achieved with <code>self</code> (ie class-level) methods - so, any explanation of why this style is better? To me, it looks like some java developers coded this app and \"ported over\" some coding paradigms from that language.</p>\n"}, {"tags": ["ruby", "bundler", "dependency-management"], "comments": [{"owner": {"reputation": 318, "user_id": 3664194, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001800281383/picture?type=large", "display_name": "Michael Kosyk", "link": "https://stackoverflow.com/users/3664194/michael-kosyk"}, "edited": false, "score": 0, "creation_date": 1563964217, "post_id": 57174513, "comment_id": 100872603, "body": "Why are you using <code>bundler</code> command?"}, {"owner": {"reputation": 315, "user_id": 6641026, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/61cc92c91ca7cad1b0c76fce0e2eb9e2?s=128&d=identicon&r=PG", "display_name": "namesake22", "link": "https://stackoverflow.com/users/6641026/namesake22"}, "reply_to_user": {"reputation": 318, "user_id": 3664194, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001800281383/picture?type=large", "display_name": "Michael Kosyk", "link": "https://stackoverflow.com/users/3664194/michael-kosyk"}, "edited": false, "score": 0, "creation_date": 1563969112, "post_id": 57174513, "comment_id": 100875332, "body": "Should i always use bundle? Any reason from the bundler team provided? @MichaelKosyk"}, {"owner": {"reputation": 318, "user_id": 3664194, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001800281383/picture?type=large", "display_name": "Michael Kosyk", "link": "https://stackoverflow.com/users/3664194/michael-kosyk"}, "edited": false, "score": 0, "creation_date": 1564045926, "post_id": 57174513, "comment_id": 100905013, "body": "?? The documentation states that you should use the command <code>bundle</code> not <code>bundler</code> so there is no reason to use <code>bundler</code>"}], "answers": [{"comments": [{"owner": {"reputation": 315, "user_id": 6641026, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/61cc92c91ca7cad1b0c76fce0e2eb9e2?s=128&d=identicon&r=PG", "display_name": "namesake22", "link": "https://stackoverflow.com/users/6641026/namesake22"}, "edited": false, "score": 0, "creation_date": 1564232023, "post_id": 57198325, "comment_id": 100967311, "body": "i only see that it says <code>bundle install</code> in their example, nowhere it says don&#39;t use <code>bundler install</code>"}, {"owner": {"reputation": 318, "user_id": 3664194, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001800281383/picture?type=large", "display_name": "Michael Kosyk", "link": "https://stackoverflow.com/users/3664194/michael-kosyk"}, "reply_to_user": {"reputation": 315, "user_id": 6641026, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/61cc92c91ca7cad1b0c76fce0e2eb9e2?s=128&d=identicon&r=PG", "display_name": "namesake22", "link": "https://stackoverflow.com/users/6641026/namesake22"}, "edited": false, "score": 0, "creation_date": 1564396210, "post_id": 57198325, "comment_id": 101003728, "body": "Hmm, how do you think technical documentation works?"}], "tags": [], "owner": {"reputation": 318, "user_id": 3664194, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001800281383/picture?type=large", "display_name": "Michael Kosyk", "link": "https://stackoverflow.com/users/3664194/michael-kosyk"}, "is_accepted": false, "score": 0, "last_activity_date": 1564045990, "creation_date": 1564045990, "answer_id": 57198325, "question_id": 57174513, "link": "https://stackoverflow.com/questions/57174513/bundler-install-throwing-gemnoutfound-error-while-bundle-install-works-fine/57198325#57198325", "title": "`bundler install` throwing GemNoutFound error while `bundle install` works fine on same Gemfile", "body": "<p>Don't use <code>bundler</code> - use <code>bundle</code>. It's in the Bundler documentation, on the landing page of their site.</p>\n"}], "owner": {"reputation": 315, "user_id": 6641026, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/61cc92c91ca7cad1b0c76fce0e2eb9e2?s=128&d=identicon&r=PG", "display_name": "namesake22", "link": "https://stackoverflow.com/users/6641026/namesake22"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 199, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1564045990, "creation_date": 1563936163, "last_edit_date": 1563936550, "question_id": 57174513, "link": "https://stackoverflow.com/questions/57174513/bundler-install-throwing-gemnoutfound-error-while-bundle-install-works-fine", "title": "`bundler install` throwing GemNoutFound error while `bundle install` works fine on same Gemfile", "body": "<p>I have am trying to run <code>bundler</code> and/or <code>bundle</code> commands against a Gemfile. </p>\n\n<p>Whenever I try any of the <code>bundler</code> commands, it throws an error. For example, if I run <code>bundler install</code>, I get the following error</p>\n\n<p><strong>Could not find gem <code>gem_name</code> in any of the gem sources listed in your Gemfile.</strong></p>\n\n<p>But if I run any of the <code>bundle</code> commands, like <code>bundle install</code>, it will execute successfully. And I cannot figure out the reason behind this..</p>\n\n<p>So here is what my Gemfile looks like.</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'byebug'\n\n</code></pre>\n\n<p>Here is my <code>bundler env</code> output.</p>\n\n<pre><code>## Environment\n\nBundler 2.0.2\n   Platforms ruby, x86_64-darwin-18\nRuby      2.6.3.p62 (2019-04-16 revision 67580) [x86_64-darwin18]\n   Full Path /path/to/home/.rvm/rubies/ruby-2.6.3/bin/ruby\n   Config Dir /path/to/home/.rvm/rubies/ruby-2.6.3/etc\n\nRubyGems  3.0.4\n   Gem Home   /path/to/home/.rvm/gems/ruby-2.6.3\n   Gem Path   /path/to/home/.rvm/gems/ruby-2.6.3:/path/to/home/gems/ruby-2.6.3@global\n   User Path  /path/to/home/.gem/ruby/2.6.0\n   Bin Dir    /path/to/home/.rvm/gems/ruby-2.6.3/bin\nTools\n   Git    2.20.1 (Apple Git-118)\n   RVM    1.29.9 (latest)\n   rbenv  not installed\n   chruby not installed\n   rubygems-bundler (1.4.5)\n\n.. some other info and no Gemfile.lock found since I don't have it yet  \n\n</code></pre>\n\n<p>My <code>bundle env</code> output is obviously the same as above.</p>\n\n<p>So I did a lot of digging around <code>bundler</code> source code and figured some things out. </p>\n\n<p>When I run <code>bundle lock</code>, I eventually reach the file <code>ruby_executable_hooks.rb</code> in <code>Bin Path</code> above. </p>\n\n<p>Then <code>Gem::ExecutableHooks.run($0)</code> gets run and eventually reaches the file <code>noexec.rb</code> which returns to <code>ruby_executable_hooks.rb</code> saying<br>\n<strong>Noexec - skipped binary: bundle</strong>.<br>\nNote here that no @index is set for <code>Bundler::Definition</code> object, since we never move out of the file <code>noexec.rb</code>. This is because we never get past the if-check that reads<br>\n<code>if %w(bundle rubygems-bundler-uninstaller).includes?(bin)</code>.</p>\n\n<p>Now the control will move down <code>ruby_executable_hooks.rb</code> and run<br>\n<code>eval content, binding, $0</code> and try to run the command. This time, @allowed_remote is true in <code>rubygems.rb</code> and Bundler::Index instances actually communicate with remote <code>rubygems.org</code> to get the info it is looking for.<br>\nAfter that things go smoothly and <code>Gemfile.lock</code> is generated.</p>\n\n<p>But when I run <code>bundler lock</code>, things start out the same until we reach <code>noexec.rb</code>. Here we get past the if check that ended the flow for <code>bundle lock</code> and call the <code>setup</code> method defined in <code>noexec.rb</code>, which calls the <code>candidate?</code> method. This dispatches the control flow to <code>specs</code> method defined in <code>definition.rb</code>. </p>\n\n<p>It follows the same flow that <code>bundle lock</code> went through in its <code>eval...</code> call, except that now we entered <code>specs</code> method straight without calling <code>resolve_remotely!</code>, which sets the @allowed_remote instance variable to <code>true</code> for <code>Bundler::Source</code> objects.</p>\n\n<p>So when <code>specs</code> method of <code>rubygems.rb</code> is called as <code>source.specs</code> inside <code>index</code> method of <code>defintion.rb</code>, we are not allowed to fetch things remotely and add them to the Bundler::index object.</p>\n\n<p>Eventually, calling <code>search</code> method on the index object doesn't return what it would for <code>bundle lock</code> and we never make it past <code>verify_gemfile_dependencies_are_found</code> method in <code>resolver.rb</code>. This method raises the exact error statement I put above near line 280-ish in <code>resolver.rb</code>. When it is raised, we return to <code>ruby_executable_hooks</code> again.</p>\n\n<p>Then we go the <code>eval..</code> route as <code>bundle lock</code> command did. This time, <code>@allow_remote</code> is <code>true</code>. But we are prevented from modifying @index variable inside <code>index</code> method defined in <code>definition.rb</code> because it is already built in the previous run. We never make it past the code<br>\n<code>@index ||= Index.build do ..</code> since @index is not <code>nil</code>.</p>\n\n<p>Rest is the same as our first run that got stopped at <code>verify_gemfile_dependencies_are_found</code>.</p>\n\n<p>I am very confused because I always thought <code>bundler</code> just loads <code>bundle</code> bin and takes the same route from there. But apparently that is not the case and there are indeed subtle differences. </p>\n\n<p>Am I not setting something correctly in my environment? Please help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 11628125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b82a5a9b191778e94705aa7e28fec3ba?s=128&d=identicon&r=PG&f=1", "display_name": "NomadCoder87", "link": "https://stackoverflow.com/users/11628125/nomadcoder87"}, "edited": false, "score": 0, "creation_date": 1563943556, "post_id": 57174542, "comment_id": 100862898, "body": "Genius!!! it&#39;s working, thanks for the improvement in my code,i&#39;m using postgres, to format the date: to_char(date, &#39;YYYY/MM&#39;)"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 2, "last_activity_date": 1563936853, "last_edit_date": 1563936853, "creation_date": 1563936466, "answer_id": 57174542, "question_id": 57174426, "link": "https://stackoverflow.com/questions/57174426/undefined-method-error-in-helper-for-a-model/57174542#57174542", "title": "undefined method error in helper for a model", "body": "<p>You need to <code>extend</code> instead of <code>include</code> because the method you want to call it from is a <em>class method</em>. </p>\n\n<p>Also, just a side note, your <code>self.quantity_this_month</code> loads <em>all</em> the Expense records into memory, but it's possible to do the date filtering and counting all within a single SQL query. The below is how it's done in MySQL, this might be slightly different with other databases:</p>\n\n<pre><code>class Expense &lt; ApplicationRecord\n  extend Helpers # &lt;~~~~~~~ changed to extend\n  def self.quantity_this_month\n    where(\n      \"DATE_FORMAT(date, '%Y/%m') = ?\",\n      year_month(Date.today)\n    ).count\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11628125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b82a5a9b191778e94705aa7e28fec3ba?s=128&d=identicon&r=PG&f=1", "display_name": "NomadCoder87", "link": "https://stackoverflow.com/users/11628125/nomadcoder87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 57174542, "answer_count": 1, "score": 1, "last_activity_date": 1563936853, "creation_date": 1563935372, "last_edit_date": 1563935517, "question_id": 57174426, "link": "https://stackoverflow.com/questions/57174426/undefined-method-error-in-helper-for-a-model", "title": "undefined method error in helper for a model", "body": "<p>I'm trying to call a global method in a file in the <code>lib/</code> directory from a model. I've already tried with concerns and the problem persists.</p>\n\n<p>The app is developed in Ruby on Rails 5.2.1 and Ruby 2.5.3</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># Expense model\nclass Expense &lt; ApplicationRecord\n  include Helpers\n  def self.quantity_this_month\n    select { |e| year_month(e.date) == year_month(Date.today) \n     }.count\n  end\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code># Helper in lib/ directory\nmodule Helpers\n  def year_month(date)\n    date.strftime('%Y/%m')\n  end\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code># in console\nExpense.quantity_this_month\n</code></pre>\n\n<p>Implementing the code of the helper directly in the model method gives the expected result, but right now it shows this error:</p>\n\n<pre><code>undefined method `year_month' for #&lt;Class:0x00007f2f6f0e4b88&gt;\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["regex", "ruby", "selenium", "capybara", "capybara-webkit"], "comments": [{"owner": {"reputation": 1845, "user_id": 574923, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YGvbp.jpg?s=128&g=1", "display_name": "Nils_e", "link": "https://stackoverflow.com/users/574923/nils-e"}, "reply_to_user": {"reputation": 14672, "user_id": 8967612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EEhyd.png?s=128&g=1", "display_name": "41686d6564", "link": "https://stackoverflow.com/users/8967612/41686d6564"}, "edited": false, "score": 0, "creation_date": 1563935008, "post_id": 57174194, "comment_id": 100861278, "body": "@ahmedAbdelhameed thanks, just tried and doesn&#39;t change anything"}, {"owner": {"reputation": 1845, "user_id": 574923, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YGvbp.jpg?s=128&g=1", "display_name": "Nils_e", "link": "https://stackoverflow.com/users/574923/nils-e"}, "reply_to_user": {"reputation": 14672, "user_id": 8967612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EEhyd.png?s=128&g=1", "display_name": "41686d6564", "link": "https://stackoverflow.com/users/8967612/41686d6564"}, "edited": false, "score": 0, "creation_date": 1563935020, "post_id": 57174194, "comment_id": 100861280, "body": "I tried <code>^(?!asdf).*$</code>"}, {"owner": {"reputation": 14672, "user_id": 8967612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EEhyd.png?s=128&g=1", "display_name": "41686d6564", "link": "https://stackoverflow.com/users/8967612/41686d6564"}, "edited": false, "score": 0, "creation_date": 1563935436, "post_id": 57174194, "comment_id": 100861349, "body": "Try <code>^(?:(?!sdfg).)*$</code>. See it here: <a href=\"https://rubular.com/r/owVTZzw6y4Fws0\" rel=\"nofollow noreferrer\">rubular.com/r/owVTZzw6y4Fws0</a>. Or <code>^(?!.*sdfg).*$</code>. Please refer to <a href=\"https://stackoverflow.com/a/37988661/4934172\">this answer</a> for more. Always check other answers; don&#39;t just look at the accepted/most-upvoted one."}, {"owner": {"reputation": 1845, "user_id": 574923, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YGvbp.jpg?s=128&g=1", "display_name": "Nils_e", "link": "https://stackoverflow.com/users/574923/nils-e"}, "reply_to_user": {"reputation": 14672, "user_id": 8967612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EEhyd.png?s=128&g=1", "display_name": "41686d6564", "link": "https://stackoverflow.com/users/8967612/41686d6564"}, "edited": false, "score": 0, "creation_date": 1563935680, "post_id": 57174194, "comment_id": 100861388, "body": "@ahmedabdelhameed thanks again, it still doesn&#39;t work. I don&#39;t think this is a regex issue. I didn&#39;t only look at the most upvoted. If you check my link, my regex works too, but it doesn&#39;t work in Capybara. So I am thinking this is a Capybara issue not specific to regex"}, {"owner": {"reputation": 14672, "user_id": 8967612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EEhyd.png?s=128&g=1", "display_name": "41686d6564", "link": "https://stackoverflow.com/users/8967612/41686d6564"}, "edited": false, "score": 0, "creation_date": 1563935790, "post_id": 57174194, "comment_id": 100861413, "body": "No, your regex does match &quot;asdf&quot;. At any case, I don&#39;t really have experience in Capybara so hopefully, someone else can help you. Good luck :)"}, {"owner": {"reputation": 1845, "user_id": 574923, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YGvbp.jpg?s=128&g=1", "display_name": "Nils_e", "link": "https://stackoverflow.com/users/574923/nils-e"}, "reply_to_user": {"reputation": 14672, "user_id": 8967612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EEhyd.png?s=128&g=1", "display_name": "41686d6564", "link": "https://stackoverflow.com/users/8967612/41686d6564"}, "edited": false, "score": 0, "creation_date": 1563935839, "post_id": 57174194, "comment_id": 100861422, "body": "<a href=\"https://rubular.com/r/iKZiHXDy7buiPP\" rel=\"nofollow noreferrer\">rubular.com/r/iKZiHXDy7buiPP</a> thanks"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1563938428, "post_id": 57174194, "comment_id": 100861840, "body": "Note: <a href=\"https://gist.github.com/twalpole/8c791de49dcb0c6c95e011707c3e8090\" rel=\"nofollow noreferrer\">gist.github.com/twalpole/8c791de49dcb0c6c95e011707c3e8090</a> shows Capybara working with the regex you&#39;re showing for text content containing <code>asdf</code> so to figure out exactly why it&#39;s not working for you it would be good to have the actual text content of the element it&#39;s matching."}, {"owner": {"reputation": 1845, "user_id": 574923, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YGvbp.jpg?s=128&g=1", "display_name": "Nils_e", "link": "https://stackoverflow.com/users/574923/nils-e"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1563938566, "post_id": 57174194, "comment_id": 100861864, "body": "@thomaswalpole the actual text content is: <code>&lt;div&gt;&lt;label class=&quot;contributing-editor-label&quot;&gt;Contributing Editor&lt;&#47;label&gt;&lt;&#47;div&gt;</code>  I tried <code>^(?!.*\\bContributing Editor\\b).*$</code> as the regex and it doesn&#39;t work.  There are multiple <code>div</code> without <code>Contributing Editor</code> too"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1563938660, "post_id": 57174194, "comment_id": 100861885, "body": "@Nils_e the content got escaped away so it&#39;s unreadable"}, {"owner": {"reputation": 1845, "user_id": 574923, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YGvbp.jpg?s=128&g=1", "display_name": "Nils_e", "link": "https://stackoverflow.com/users/574923/nils-e"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1563938950, "post_id": 57174194, "comment_id": 100861935, "body": "@thomasWalpole try now"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 1, "creation_date": 1563939199, "post_id": 57174194, "comment_id": 100861970, "body": "@Nils_e I updated the linked gist to use that HTML and regex - and it works fine too - so not really sure what you&#39;re doing differently."}, {"owner": {"reputation": 1845, "user_id": 574923, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YGvbp.jpg?s=128&g=1", "display_name": "Nils_e", "link": "https://stackoverflow.com/users/574923/nils-e"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1563939832, "post_id": 57174194, "comment_id": 100862097, "body": "@thomaswalpole you are right! I think it had to do with the fact that i assumed it was working similarly to <code>text</code> which matches the displayed case sensitive text. Even though the HTML is <code>CONTRIBUTING EDITOR</code> the css/js manipulates it to <code>Contributing Editor</code> and that is what <code>text</code> matches. I thought regex would be the same... so I wrote out Contributing Editor when in fact I should have wrote CONTRIBUTING EDITOR. I got it to match once I made that regex adjustment <code>^(?!.*\\bCONTRIBUTING EDITOR\\b).*$</code>"}, {"owner": {"reputation": 1845, "user_id": 574923, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YGvbp.jpg?s=128&g=1", "display_name": "Nils_e", "link": "https://stackoverflow.com/users/574923/nils-e"}, "edited": false, "score": 0, "creation_date": 1563940059, "post_id": 57174194, "comment_id": 100862147, "body": "Thats what i get for trying to simplify a problem for explanation purposes"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 1, "creation_date": 1563940656, "post_id": 57174194, "comment_id": 100862278, "body": "@Nils_e It should actually be comparing against the same text - however I&#39;m guessing optimization is getting in the way.  In order to speed up element finding on the first attempt Capybara will disassemble a regex and add the text fragments  into the generated xpath - this would get applied against the unmodified text and wouldn&#39;t generally be an issue since if it didn&#39;t match it would just retry without the optimization. However with a negative lookup and CSS case adjustment this may not work as expected.  I&#39;ll have to look into this later this week."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1563946267, "post_id": 57174194, "comment_id": 100863676, "body": "@Nils_e unless you were running with the rack test driver which doesn\u2019t process CSS?"}], "answers": [{"comments": [{"owner": {"reputation": 1845, "user_id": 574923, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YGvbp.jpg?s=128&g=1", "display_name": "Nils_e", "link": "https://stackoverflow.com/users/574923/nils-e"}, "edited": false, "score": 1, "creation_date": 1563936739, "post_id": 57174550, "comment_id": 100861561, "body": "Let me give this a try now"}, {"owner": {"reputation": 1845, "user_id": 574923, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YGvbp.jpg?s=128&g=1", "display_name": "Nils_e", "link": "https://stackoverflow.com/users/574923/nils-e"}, "edited": false, "score": 1, "creation_date": 1563937249, "post_id": 57174550, "comment_id": 100861645, "body": "Thank you. This is really useful and I think it would help in finding the text, but for some reason it still doesn&#39;t work in capybara. Thank you though"}, {"owner": {"reputation": 1845, "user_id": 574923, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YGvbp.jpg?s=128&g=1", "display_name": "Nils_e", "link": "https://stackoverflow.com/users/574923/nils-e"}, "edited": false, "score": 1, "creation_date": 1563939948, "post_id": 57174550, "comment_id": 100862128, "body": "this turned out to be the right answer actually. Capybara is working as expected and I need to adjust my regex. I was simplifying the regex for purposes of this example, but that create a layer of confusion.  The actual expression was <code>^(?!.*\\bCONTRIBUTING EDITOR\\b).*$</code> and it worked great. This string doesn&#39;t match with my original <code>^(?!CONTRIBUTING EDITOR)</code>.  Thank you!"}], "tags": [], "owner": {"reputation": 1, "user_id": 6553328, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/omcAX.jpg?s=128&g=1", "display_name": "Emma", "link": "https://stackoverflow.com/users/6553328/emma"}, "is_accepted": true, "score": 0, "last_activity_date": 1563936568, "last_edit_date": 1592644375, "creation_date": 1563936568, "answer_id": 57174550, "question_id": 57174194, "link": "https://stackoverflow.com/questions/57174194/how-to-find-an-element-that-doesnt-match-a-specific-text-with-capybara/57174550#57174550", "title": "How to find an element that doesn&#39;t match a specific text with Capybara?", "body": "<p>Not sure about Capybara, just guessing that you might be trying to design an expression that would exclude <code>asdf</code> with word boundaries in a string, maybe close to:</p>\n<pre><code>^(?!.*\\basdf\\b).*$\n</code></pre>\n<p>The expression is explained on the top right panel of <a href=\"https://regex101.com/r/hgfjD5/1\" rel=\"nofollow noreferrer\">regex101.com</a>, if you wish to explore/simplify/modify it, and in <a href=\"https://regex101.com/r/hgfjD5/1debugger\" rel=\"nofollow noreferrer\">this link</a>, you can watch how it would match against some sample inputs, if you like.</p>\n<h3>Test</h3>\n<pre><code>re = /^(?!.*\\basdf\\b).*$/s\nstr = 'some content before, then asdf as a word, some after\nsome content before, then noasdf as a word, some after'\n\nstr.scan(re) do |match|\n    puts match.to_s\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 1, "creation_date": 1563937446, "post_id": 57174568, "comment_id": 100861675, "body": "Use a filter block passed to the finder rather than select because it gets evaluated inside the retry loop.  Doing it like this answer shows is open to multiple race conditions"}], "tags": [], "owner": {"reputation": 1845, "user_id": 574923, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YGvbp.jpg?s=128&g=1", "display_name": "Nils_e", "link": "https://stackoverflow.com/users/574923/nils-e"}, "is_accepted": false, "score": 1, "last_activity_date": 1563936710, "creation_date": 1563936710, "answer_id": 57174568, "question_id": 57174194, "link": "https://stackoverflow.com/questions/57174194/how-to-find-an-element-that-doesnt-match-a-specific-text-with-capybara/57174568#57174568", "title": "How to find an element that doesn&#39;t match a specific text with Capybara?", "body": "<p>My current workaround for this:</p>\n\n<pre><code>selected_element = \n   (all('div').select do |d|\n      d.has_no_text?('asdf', wait: false)\n   end).first\n</code></pre>\n\n<p>It will return <code>nil</code> if none are found.</p>\n"}, {"comments": [{"owner": {"reputation": 1845, "user_id": 574923, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YGvbp.jpg?s=128&g=1", "display_name": "Nils_e", "link": "https://stackoverflow.com/users/574923/nils-e"}, "edited": false, "score": 0, "creation_date": 1563937045, "post_id": 57174589, "comment_id": 100861614, "body": "I had no idea you could pass a block into finders. This is good to know"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 1845, "user_id": 574923, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YGvbp.jpg?s=128&g=1", "display_name": "Nils_e", "link": "https://stackoverflow.com/users/574923/nils-e"}, "edited": false, "score": 0, "creation_date": 1563937289, "post_id": 57174589, "comment_id": 100861650, "body": "@Nils_e Finders and matchers both support a filter block. It&#39;s generally better from a performance (and readability) perspective to use the builtin options when they will do what you need, but the flexibility is there when necessary - <a href=\"https://www.rubydoc.info/gems/capybara/Capybara/Node/Finders#find-instance_method\" rel=\"nofollow noreferrer\">rubydoc.info/gems/capybara/Capybara/Node/&hellip;</a>"}, {"owner": {"reputation": 1845, "user_id": 574923, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YGvbp.jpg?s=128&g=1", "display_name": "Nils_e", "link": "https://stackoverflow.com/users/574923/nils-e"}, "edited": false, "score": 0, "creation_date": 1563938484, "post_id": 57174589, "comment_id": 100861850, "body": "Marking as the answer since it finds the element without causing too much overhead or further issues like race conditions"}, {"owner": {"reputation": 1845, "user_id": 574923, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YGvbp.jpg?s=128&g=1", "display_name": "Nils_e", "link": "https://stackoverflow.com/users/574923/nils-e"}, "edited": false, "score": 0, "creation_date": 1563940011, "post_id": 57174589, "comment_id": 100862138, "body": "@thomswalpole this is a great solution and good knowledge to share. I moved the marked correct answer to the Regex solution by Emma"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 1, "last_activity_date": 1563937578, "last_edit_date": 1563937578, "creation_date": 1563936957, "answer_id": 57174589, "question_id": 57174194, "link": "https://stackoverflow.com/questions/57174194/how-to-find-an-element-that-doesnt-match-a-specific-text-with-capybara/57174589#57174589", "title": "How to find an element that doesn&#39;t match a specific text with Capybara?", "body": "<p>Without knowing what the text content is of the actual element being returned it's tough to say what's wrong, but negative regexes get complicated (especially if the element has multiple lines of content) so it's pretty safe to assume the issue is your regex. In cases like this sometimes it's easier to just use a filter block </p>\n\n<pre><code>first('div') do |element|\n  !element.text.include?('asdf')\nend\n</code></pre>\n\n<p>Note: Capybara can't optimize this so it may not be as efficient, but for occasional use that's not always important.</p>\n"}], "owner": {"reputation": 1845, "user_id": 574923, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YGvbp.jpg?s=128&g=1", "display_name": "Nils_e", "link": "https://stackoverflow.com/users/574923/nils-e"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 1, "closed_date": 1563977725, "accepted_answer_id": 57174550, "answer_count": 3, "score": 0, "last_activity_date": 1582534116, "creation_date": 1563933139, "question_id": 57174194, "link": "https://stackoverflow.com/questions/57174194/how-to-find-an-element-that-doesnt-match-a-specific-text-with-capybara", "closed_reason": "Duplicate", "title": "How to find an element that doesn&#39;t match a specific text with Capybara?", "body": "<p>With Capybara I am used to searching <code>first('div', text: 'asdf')</code>, but is there a way to search for elements that do not have the text?</p>\n\n<p>I tried <code>first('div', text: /^(?!asdf)/)</code> and it still matches on div with 'asdf' text.</p>\n\n<p>I checked to make sure my regex is right though: <a href=\"https://rubular.com/r/CN6MYKJNahiohD\" rel=\"nofollow noreferrer\">https://rubular.com/r/CN6MYKJNahiohD</a></p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["jquery", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 5019, "user_id": 592795, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/913acc75c0777600b8c85ae549b099df?s=128&d=identicon&r=PG", "display_name": "marimaf", "link": "https://stackoverflow.com/users/592795/marimaf"}, "edited": false, "score": 0, "creation_date": 1563932720, "post_id": 57174126, "comment_id": 100860913, "body": "You are making an AJAX call, correct? when you get the result back you can call <code>$(&#39;#favorite_link&#39;).text(&quot;&lt;%= favorite_text %&gt;&quot;);</code> so your text gets updated"}, {"owner": {"reputation": 1, "user_id": 10090086, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MgTnCQlGesc/AAAAAAAAAAI/AAAAAAAAAIg/q9f9rXH1ITM/photo.jpg?sz=128", "display_name": "Eduardo Frota", "link": "https://stackoverflow.com/users/10090086/eduardo-frota"}, "reply_to_user": {"reputation": 5019, "user_id": 592795, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/913acc75c0777600b8c85ae549b099df?s=128&d=identicon&r=PG", "display_name": "marimaf", "link": "https://stackoverflow.com/users/592795/marimaf"}, "edited": false, "score": 0, "creation_date": 1563933137, "post_id": 57174126, "comment_id": 100860968, "body": "ok, but how do i replace and &quot;Favorite and Unfavorite&quot; with one image, when i click on the image it should be replaced with a different image. I am a beginner and so I have many difficulties"}, {"owner": {"reputation": 5019, "user_id": 592795, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/913acc75c0777600b8c85ae549b099df?s=128&d=identicon&r=PG", "display_name": "marimaf", "link": "https://stackoverflow.com/users/592795/marimaf"}, "edited": false, "score": 0, "creation_date": 1563933481, "post_id": 57174126, "comment_id": 100861022, "body": "posted an answer that might help. You made a few edits to your question in the mean time, but I think you will get the idea"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10090086, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MgTnCQlGesc/AAAAAAAAAAI/AAAAAAAAAIg/q9f9rXH1ITM/photo.jpg?sz=128", "display_name": "Eduardo Frota", "link": "https://stackoverflow.com/users/10090086/eduardo-frota"}, "edited": false, "score": 0, "creation_date": 1563934556, "post_id": 57174198, "comment_id": 100861193, "body": "Ok,   in controller to change the text &quot;Favorite&quot;, can I use the method like this image_tag (&quot;my image.png&quot;)? like that @favorite_exists ? imag_tag (&quot;UnFavorite.png&quot;): image_tag (&quot;Favorite.png&quot;)"}, {"owner": {"reputation": 5019, "user_id": 592795, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/913acc75c0777600b8c85ae549b099df?s=128&d=identicon&r=PG", "display_name": "marimaf", "link": "https://stackoverflow.com/users/592795/marimaf"}, "reply_to_user": {"reputation": 1, "user_id": 10090086, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MgTnCQlGesc/AAAAAAAAAAI/AAAAAAAAAIg/q9f9rXH1ITM/photo.jpg?sz=128", "display_name": "Eduardo Frota", "link": "https://stackoverflow.com/users/10090086/eduardo-frota"}, "edited": false, "score": 0, "creation_date": 1563944979, "post_id": 57174198, "comment_id": 100863291, "body": "@EduardoFrota if you want to do that you have to call the helper like this: <code>ActionController::Base.helpers.image_tag(&quot;image.png&quot;)</code>"}, {"owner": {"reputation": 1, "user_id": 10090086, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MgTnCQlGesc/AAAAAAAAAAI/AAAAAAAAAIg/q9f9rXH1ITM/photo.jpg?sz=128", "display_name": "Eduardo Frota", "link": "https://stackoverflow.com/users/10090086/eduardo-frota"}, "edited": false, "score": 0, "creation_date": 1563973556, "post_id": 57174198, "comment_id": 100877962, "body": "I can&#39;t, can you help me build this method, at the moment mine is like this: <code>class ApplicationController &lt; ActionController::Base   def favorite_text     return @favorite_exists ? &quot;UnFavorite&quot; : &quot;Favorite&quot;   end   helper_method :favorite_text end&#39;</code>"}, {"owner": {"reputation": 5019, "user_id": 592795, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/913acc75c0777600b8c85ae549b099df?s=128&d=identicon&r=PG", "display_name": "marimaf", "link": "https://stackoverflow.com/users/592795/marimaf"}, "reply_to_user": {"reputation": 1, "user_id": 10090086, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MgTnCQlGesc/AAAAAAAAAAI/AAAAAAAAAIg/q9f9rXH1ITM/photo.jpg?sz=128", "display_name": "Eduardo Frota", "link": "https://stackoverflow.com/users/10090086/eduardo-frota"}, "edited": false, "score": 0, "creation_date": 1564080099, "post_id": 57174198, "comment_id": 100923165, "body": "Did you try what I wrote in the answer above?"}], "tags": [], "owner": {"reputation": 5019, "user_id": 592795, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/913acc75c0777600b8c85ae549b099df?s=128&d=identicon&r=PG", "display_name": "marimaf", "link": "https://stackoverflow.com/users/592795/marimaf"}, "is_accepted": false, "score": 0, "last_activity_date": 1563933173, "creation_date": 1563933173, "answer_id": 57174198, "question_id": 57174126, "link": "https://stackoverflow.com/questions/57174126/swap-text-for-an-image-with-jquery-and-rails/57174198#57174198", "title": "Swap text for an image with Jquery and rails", "body": "<p>Modify your controller a little:</p>\n\n<pre><code>def favorite_text\n  @favorite_text = @favorite_exists ? \"UnFavorite\" : \"Favorite\"\nend\n</code></pre>\n\n<p>Then you need to create a view under your controller name like this: <code>favorite_text.js.erb</code></p>\n\n<p>This view will be called when your controller returns, so you need this to call the javascript code to update your code, you can do this to update the text and image:</p>\n\n<pre><code>$('#favorite_link').text(\"&lt;%= @favorite_text %&gt;\");\n$(\"#favorite_image\").attr('src',\"&lt;%= @favorite_text %&gt;.png\");\n</code></pre>\n\n<p>Here I am assuming your images are named like the favorite/unfavorite text.</p>\n\n<p>You can also use <a href=\"https://github.com/gazay/gon\" rel=\"nofollow noreferrer\">gon gem</a> to share rails variables with javascript</p>\n"}], "owner": {"reputation": 1, "user_id": 10090086, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-MgTnCQlGesc/AAAAAAAAAAI/AAAAAAAAAIg/q9f9rXH1ITM/photo.jpg?sz=128", "display_name": "Eduardo Frota", "link": "https://stackoverflow.com/users/10090086/eduardo-frota"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1581480519, "creation_date": 1563932342, "last_edit_date": 1563932755, "question_id": 57174126, "link": "https://stackoverflow.com/questions/57174126/swap-text-for-an-image-with-jquery-and-rails", "title": "Swap text for an image with Jquery and rails", "body": "<p>So .. I have an application that saves posts as a favorite, currently clicking \"Favorite\" it makes the change without reloading the page for \"Unfavorite\", my question is how do I exchange the text for an image?</p>\n\n<p>Helper</p>\n\n<pre><code>   def favorite_text\n     return @favorite_exists ? \"UnFavorite\" : \"Favorite\"\n   end\n</code></pre>\n\n<p>View</p>\n\n<pre><code>&lt;%= link_to favorite_text, favorites_update_path(post: @post), id: 'favorite_link', remote: true %&gt;\n</code></pre>\n\n<p>update.js</p>\n\n<pre><code>$('#favorite_link').text(\"&lt;%= favorite_text %&gt;\");\n</code></pre>\n"}, {"tags": ["ruby", "git", "heroku", "ruby-on-rails-5", "git-lfs"], "answers": [{"tags": [], "owner": {"reputation": 30588, "user_id": 8705432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14e0f95975d80525786e419222821ff4?s=128&d=identicon&r=PG&f=1", "display_name": "bk2204", "link": "https://stackoverflow.com/users/8705432/bk2204"}, "is_accepted": false, "score": 1, "last_activity_date": 1563927922, "creation_date": 1563927922, "answer_id": 57173738, "question_id": 57173682, "link": "https://stackoverflow.com/questions/57173682/upgraded-to-rails-5-2-and-now-when-i-push-to-heroku-why-is-it-being-prevented/57173738#57173738", "title": "Upgraded to rails 5.2, and now when I push to heroku, why is it being prevented because of git-LFS (which I&#39;d never heard of before today)?", "body": "<p>Git LFS is an extension to Git that provides better handling of large files than native Git. When you use it in a repository, it installs hooks to ensure that the LFS files are pushed when you push your repository.</p>\n\n<p>You should check your repository for a <code>.gitattributes</code> file. If there is one, and it contains entries that say <code>filter=lfs</code>, then your repository is using it to store large files. If not, then you can fix this by removing the hook in <code>.git/hooks/pre-push</code>, as the message says.</p>\n\n<p>You haven't specified what operating system you're using or where you get your software from, so I can't tell you how it likely got installed, but it is currently removed from your system, which is why you see the message. It may have been installed through your system package manager, such as dpkg or Homebrew. If you're running on Windows, it's shipped as a standard part of Git for Windows.</p>\n"}, {"comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1563933982, "post_id": 57173899, "comment_id": 100861105, "body": "Files and directories absolutely can start with a period. That makes them hidden on UNIX-like systems. And remember, your git repository is tracked through the .git directory; GitHub is just a fancy way of visualizing that with a few value-add components."}], "tags": [], "owner": {"reputation": 63, "user_id": 7196011, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh6.googleusercontent.com/-58PaEMxBrFQ/AAAAAAAAAAI/AAAAAAAAEtc/hiAzHw6lfY8/photo.jpg?sz=128", "display_name": "Nick", "link": "https://stackoverflow.com/users/7196011/nick"}, "is_accepted": false, "score": 0, "last_activity_date": 1563929736, "creation_date": 1563929736, "answer_id": 57173899, "question_id": 57173682, "link": "https://stackoverflow.com/questions/57173682/upgraded-to-rails-5-2-and-now-when-i-push-to-heroku-why-is-it-being-prevented/57173899#57173899", "title": "Upgraded to rails 5.2, and now when I push to heroku, why is it being prevented because of git-LFS (which I&#39;d never heard of before today)?", "body": "<p>I'm on a Mac. It really was as simple as deleting that file. It didn't occur to me at first that it was literally just a file in a folder on my hard drive because files and folders don't start with a period. And everything I'd read said to delete it from my repository; I read that and I'm thinking it's on github somewhere, not my local drive. Then I looked in my app's folder and saw a .git folder at the top, and from there it was obvious.</p>\n"}], "owner": {"reputation": 63, "user_id": 7196011, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh6.googleusercontent.com/-58PaEMxBrFQ/AAAAAAAAAAI/AAAAAAAAEtc/hiAzHw6lfY8/photo.jpg?sz=128", "display_name": "Nick", "link": "https://stackoverflow.com/users/7196011/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1577925547, "creation_date": 1563927393, "last_edit_date": 1577925547, "question_id": 57173682, "link": "https://stackoverflow.com/questions/57173682/upgraded-to-rails-5-2-and-now-when-i-push-to-heroku-why-is-it-being-prevented", "title": "Upgraded to rails 5.2, and now when I push to heroku, why is it being prevented because of git-LFS (which I&#39;d never heard of before today)?", "body": "<p>\"This repository is configured for Git LFS but 'git-lfs' was not found on your path. If you no longer wish to use Git LFS, remove this hook by deleting .git/hooks/pre-push.\"</p>\n\n<p>I've never heard of git-LFS, much less installed it, before. This repository was pushing to heroku just fine for 2+ years. </p>\n\n<p>I recently made a new fork so I could try upgrading to <code>rails 5.2</code> and <code>ruby 2.4</code>. I got it all sorted and pulled my master FROM that fork, so my master is now <code>rails 5.2</code> and <code>ruby 2.4</code>.</p>\n\n<p>But I can't push it to heroku because of the above error.</p>\n\n<p>I have no idea where git-LFS came from. I never installed it, and now I don't know how to get rid of it.</p>\n\n<p>If anyone knows why I can't push to heroku, or how to disable this git-LFS (that feels like malware), please let me know! I've been searching for hours :(</p>\n"}, {"tags": ["ruby", "email", "smtp", "mail-gem"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1563934191, "post_id": 57173606, "comment_id": 100861132, "body": "Who knows? You haven\u2019t provided any code to reproduce the error or any information about your MX records or other DNS security records."}, {"owner": {"reputation": 4584, "user_id": 2066546, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/3daf2b8c705c431f105aeff9880df470?s=128&d=identicon&r=PG", "display_name": "fiedl", "link": "https://stackoverflow.com/users/2066546/fiedl"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1563943018, "post_id": 57173606, "comment_id": 100862774, "body": "Thank you for requesting specific information that could help narrowing the issue down rather than downvoting."}], "answers": [{"comments": [{"owner": {"reputation": 4584, "user_id": 2066546, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/3daf2b8c705c431f105aeff9880df470?s=128&d=identicon&r=PG", "display_name": "fiedl", "link": "https://stackoverflow.com/users/2066546/fiedl"}, "edited": false, "score": 0, "creation_date": 1564013031, "post_id": 57187498, "comment_id": 100894618, "body": "Thank you for your suggestion. Unfortunately, changing the message id does not resolve the issue. In fact, the message id created by <code>sendemail</code> (which leads to a delivery without error) is also not corresponding to the domain of the smtp server: <code>Message-ID: &lt;908248.570139648-sendEmail@fiedl-mbp&gt;</code>. The message id does not appear to be the problem."}], "tags": [], "owner": {"reputation": 2139, "user_id": 208769, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7678cf457f3bcd08972a960104761cf9?s=128&d=identicon&r=PG", "display_name": "user208769", "link": "https://stackoverflow.com/users/208769/user208769"}, "is_accepted": false, "score": 0, "last_activity_date": 1563986049, "last_edit_date": 1563986049, "creation_date": 1563985666, "answer_id": 57187498, "question_id": 57173606, "link": "https://stackoverflow.com/questions/57173606/sending-smtp-email-via-mail-gem-results-in-554-5-7-0-reject/57187498#57187498", "title": "Sending smtp email via mail gem results in 554 5.7.0 Reject", "body": "<p>Firstly, it's worth checking <code>message.to_s</code></p>\n\n<pre><code>Date: Wed, 24 Jul 2019 17:15:08 +0100\nFrom: foo@fiedlschuster.de\nTo: bar@example.com\nMessage-ID: &lt;5d38840ce52e9_5a6a2af20734c5b418642@my-machine-name.mail&gt;\nSubject: Test\nMime-Version: 1.0\nContent-Type: text/plain;\n charset=UTF-8\n Content-Transfer-Encoding: 7bit\n\nThis is a test.\n</code></pre>\n\n<p>The only thing that screams out at me is the Message-ID - it uses your machine name. It's possible that some spam filters compare this to the sender's domain name, and if they don't match, assume that you are a bot? </p>\n\n<p>(I don't know what <code>sendemail</code> does here, but my Thunderbird certainly uses my domain name)</p>\n\n<p>So I'd try:</p>\n\n<pre><code>message = Mail.new(to: \"bar@example.com\", from: \"foo@fiedlschuster.de\",\n    subject: \"Test\", body: \"This is a test.\", message_id: \"#{Mail.random_tag}@fiedlschuster.de\")\n</code></pre>\n"}], "owner": {"reputation": 4584, "user_id": 2066546, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/3daf2b8c705c431f105aeff9880df470?s=128&d=identicon&r=PG", "display_name": "fiedl", "link": "https://stackoverflow.com/users/2066546/fiedl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 950, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563986049, "creation_date": 1563926593, "last_edit_date": 1563942904, "question_id": 57173606, "link": "https://stackoverflow.com/questions/57173606/sending-smtp-email-via-mail-gem-results-in-554-5-7-0-reject", "title": "Sending smtp email via mail gem results in 554 5.7.0 Reject", "body": "<p>I'm trying to send emails from a rails application using smtp. Sending the emails does not cause problems, but some recipients do not receive the emails. Instead, delivery notices (\"Undelivered Mail Returned to Sender\") are returned with:</p>\n\n<pre><code>Diagnostic-Code: smtp; 554 5.7.0 Reject, id=04635-09 - spam: This message was\n   blocked for security reasons\n</code></pre>\n\n<p>Now the strange part:</p>\n\n<ul>\n<li>Sending a test mail through a mail client via smtp (TLS/SSL true, port 465, auth: password) works. The recipient receives the email without error.</li>\n<li>Sending the email via <code>sendemail -o tls=yes -f foo@fiedlschuster.de -t bar@example.com -s 212-227-10-158.benjaminkant.de -xu foo@fiedlschuster.de -xp password -u \"Hello from sendemail\" -m \"This is a test.\" -vvvv</code> works. The recipient receives the email without error.</li>\n<li><p>Sending the email through the <a href=\"https://github.com/mikel/mail\" rel=\"nofollow noreferrer\">mail gem</a> (which is what I want to achieve) using the same smtp account works, but the recipient does not receive the email. Instead, \"Undelivered Mail Returned to Sender\" is sent to the sender address.</p>\n\n<pre><code>require 'mail'\n\noptions = {address: \"212-227-10-158.benjaminkant.de\", user_name: \"foo@fiedlschuster.de\",\n    password: \"...\", authentication: \"login\"}\n\nMail.defaults { delivery_method :smtp, options }\n\nmessage = Mail.new(to: \"bar@example.com\", from: \"foo@fiedlschuster.de\",\n    subject: \"Test\", body: \"This is a test.\")\nmessage.deliver\n</code></pre>\n\n<p>Also, I've tried these options, resulting in the same issue:</p>\n\n<pre><code>options = {address: \"212-227-10-158.benjaminkant.de\", user_name: \"foo@fiedlschuster.de\",\n    password: \"...\", authentication: \"login\"}\n\noptions = {address: \"212-227-10-158.benjaminkant.de\", user_name: \"foo@fiedlschuster.de\",\n    password: \"...\", authentication: \"login\",\n    enable_starttls_auto: true}\n\noptions = {address: \"212-227-10-158.benjaminkant.de\", user_name: \"foo@fiedlschuster.de\",\n    password: \"...\", authentication: \"login\",\n    port: 465, enable_starttls_auto: false, ssl: true}\n\noptions = {address: \"212-227-10-158.benjaminkant.de\", user_name: \"foo@fiedlschuster.de\",\n    password: \"...\"}\n</code></pre></li>\n</ul>\n\n<p>Does this make sense to anyone?</p>\n\n<h2>Additional information</h2>\n\n<h3>MX records</h3>\n\n<pre><code>\u25b6 host -t MX fiedlschuster.de\nfiedlschuster.de mail is handled by 10 mail.fiedlschuster.de.\n\n\u25b6 host -t MX 212-227-10-158.benjaminkant.de\n212-227-10-158.benjaminkant.de has no MX record\n</code></pre>\n"}, {"tags": ["ruby", "dynamic", "metaprogramming"], "comments": [{"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 1, "creation_date": 1564084148, "post_id": 57173053, "comment_id": 100924856, "body": "This question switches between your voice (what you are saying) and quotes from your homework (essentially your lecturer&#39;s voice). I have added some quotes to help decipher this, but it is still confusing. For the &quot;Result&quot; section, is that the &quot;Actual result&quot;, to be contrasted against the &quot;Expected Result&quot;?"}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1564084234, "post_id": 57173053, "comment_id": 100924892, "body": "You have &quot;Hello, Your class User with method greet is ready&quot; as actual output, but this could not have come from your code, as that does not contain those strings."}, {"owner": {"reputation": 18763, "user_id": 472495, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/4rtxd.png?s=128&g=1", "display_name": "halfer", "link": "https://stackoverflow.com/users/472495/halfer"}, "edited": false, "score": 0, "creation_date": 1564084371, "post_id": 57173053, "comment_id": 100924942, "body": "It would be a good idea to clarify the title, so that it is more specific. Please read <a href=\"https://meta.stackoverflow.com/questions/284236/why-is-can-someone-help-me-not-an-actual-question\">Why is \u201cCan someone help me?\u201d not an actual question?</a>."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1563947981, "post_id": 57173276, "comment_id": 100864288, "body": "I can see now that I have not gone far enough in answering the question, though I think what I&#39;ve written so far may be of some help to the OP and possibly other readers. The reference to <code>DynamicClass</code> makes the question rather challenging, particularly the need for <code>self</code> to be an instance of <code>User</code>, and not <code>User</code> itself (very odd, that). I may work on it some more, but maybe not."}, {"owner": {"reputation": 1, "user_id": 11666817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f94bfbc906f8ac86327d3f953cea3315?s=128&d=identicon&r=PG&f=1", "display_name": "Abhinav Kannojia", "link": "https://stackoverflow.com/users/11666817/abhinav-kannojia"}, "edited": false, "score": 0, "creation_date": 1563996386, "post_id": 57173276, "comment_id": 100889787, "body": "Sir I had a small query ... can we take user input in below format."}, {"owner": {"reputation": 1, "user_id": 11666817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f94bfbc906f8ac86327d3f953cea3315?s=128&d=identicon&r=PG&f=1", "display_name": "Abhinav Kannojia", "link": "https://stackoverflow.com/users/11666817/abhinav-kannojia"}, "edited": false, "score": 0, "creation_date": 1563996413, "post_id": 57173276, "comment_id": 100889799, "body": "class_name  = gets.chomp,   method_name = gets.chomp,   code_str    = gets.chomp"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1, "user_id": 11666817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f94bfbc906f8ac86327d3f953cea3315?s=128&d=identicon&r=PG&f=1", "display_name": "Abhinav Kannojia", "link": "https://stackoverflow.com/users/11666817/abhinav-kannojia"}, "edited": false, "score": 0, "creation_date": 1563996667, "post_id": 57173276, "comment_id": 100889912, "body": "Yes, recognizing that if, for <code>code_str</code>, the user inputs <code>&quot;Welcome from #{self.class} class. I am #{self}&quot;</code>, <code>code_str</code> will equal <code>&quot;Welcome from Object class. I am main&quot;</code>. I&#39;m curious where this question came from. The reference to <code>DynamicClass</code> suggests that it&#39;s from a Ruby metaprogramming course, intended for advanced Rubyests."}, {"owner": {"reputation": 1, "user_id": 11666817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f94bfbc906f8ac86327d3f953cea3315?s=128&d=identicon&r=PG&f=1", "display_name": "Abhinav Kannojia", "link": "https://stackoverflow.com/users/11666817/abhinav-kannojia"}, "edited": false, "score": 0, "creation_date": 1563997066, "post_id": 57173276, "comment_id": 100890080, "body": "Reference: Programming Ruby By: Dave Thomas, Chad Fowler, and Andy Hunt From: The Pragmatic Programmers Edition: Fourth Edition  *Reference: Metaprogramming Ruby 2 *"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1564005022, "post_id": 57173276, "comment_id": 100892915, "body": "Abhinav, I couldn&#39;t find the problem in either of the two references. If it&#39;s there could you tell me which reference it&#39;s in and the page number?"}, {"owner": {"reputation": 1, "user_id": 11666817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f94bfbc906f8ac86327d3f953cea3315?s=128&d=identicon&r=PG&f=1", "display_name": "Abhinav Kannojia", "link": "https://stackoverflow.com/users/11666817/abhinav-kannojia"}, "edited": false, "score": 0, "creation_date": 1564085347, "post_id": 57173276, "comment_id": 100925343, "body": "No Sir.. I meant to say concepts are referred from that book. These questions was just randomly created from one among those concepts."}, {"owner": {"reputation": 1, "user_id": 11666817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f94bfbc906f8ac86327d3f953cea3315?s=128&d=identicon&r=PG&f=1", "display_name": "Abhinav Kannojia", "link": "https://stackoverflow.com/users/11666817/abhinav-kannojia"}, "reply_to_user": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "edited": false, "score": 0, "creation_date": 1564085699, "post_id": 57173276, "comment_id": 100925477, "body": "@ArupRakshit Yes sir.. certainly. I have just started reading this book and learning these concepts."}, {"owner": {"reputation": 1, "user_id": 11666817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f94bfbc906f8ac86327d3f953cea3315?s=128&d=identicon&r=PG&f=1", "display_name": "Abhinav Kannojia", "link": "https://stackoverflow.com/users/11666817/abhinav-kannojia"}, "edited": false, "score": 0, "creation_date": 1564085762, "post_id": 57173276, "comment_id": 100925503, "body": "@CarySwoveland Sir your solutions inspire me a lot. Thanks for providing me clarity in this beginner phase."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1564088554, "post_id": 57173276, "comment_id": 100926526, "body": "I&#39;m glad to help, Abhinav. This is a tough question for a beginner."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1563928348, "last_edit_date": 1563928348, "creation_date": 1563923414, "answer_id": 57173276, "question_id": 57173053, "link": "https://stackoverflow.com/questions/57173053/how-to-write-the-dynamic-method-calling-code-below/57173276#57173276", "title": "How to write the dynamic method calling code below?", "body": "<p>Let's just look at the core problem, not obtaining input from the user or displaying information to be read by the user. We obtain the following from the user:</p>\n\n<pre><code>class_name  = \"User\"\nmethod_name = \"greet\"\ncode_str    = \"Welcome from #{self.class} class. I am #{self}\"\n  #=&gt; \"Welcome from Object class. I am main\"\n</code></pre>\n\n<p>Create a class:</p>\n\n<pre><code>cl = Class.new\n  #=&gt; #&lt;Class:0x0000563cd2e3d748&gt; \n</code></pre>\n\n<p>Name the class:</p>\n\n<pre><code>Object.const_set(class_name, cl)\n  #=&gt; User\n</code></pre>\n\n<p>Create an instance method for the class:</p>\n\n<pre><code>cl.define_method(method_name) { code_str }\n  #=&gt; :greet \n</code></pre>\n\n<p>Confirm the class has been created and list the instance methods owned by that class:</p>\n\n<pre><code>User.is_a? Class\n  #=&gt; true\n\nUser.instance_methods(false)\n  #=&gt; [:greet]\n</code></pre>\n\n<p>Execute the class' instance method<sup>1</sup>:</p>\n\n<pre><code>User.new.greet\n  #=&gt; \"Welcome from Object class. I am main\"\n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.6.3/Class.html#method-c-new\" rel=\"nofollow noreferrer\">Class::new</a> and <a href=\"https://ruby-doc.org/core-2.6.3/Module.html#method-i-const_set\" rel=\"nofollow noreferrer\">Module#const_set</a>, <a href=\"https://ruby-doc.org/core-2.6.3/Module.html#method-i-define_method\" rel=\"nofollow noreferrer\">Module#define_method</a> and <a href=\"https://ruby-doc.org/core-2.6.3/Module.html#method-i-instance_methods\" rel=\"nofollow noreferrer\">Module#instance_methods</a>.</p>\n\n<p><sup>1. The setter of the question may have wanted <code>User.new.greet</code> to return <code>\"Welcome from User class. I am #&lt;User:0x00005cb777dca6f0&gt; \"</code>, but that is not possible as <code>#{self}</code> was evaluated to its current value when <code>code_str</code> was assigned, as shown above.</sup></p>\n"}], "owner": {"reputation": 1, "user_id": 11666817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f94bfbc906f8ac86327d3f953cea3315?s=128&d=identicon&r=PG&f=1", "display_name": "Abhinav Kannojia", "link": "https://stackoverflow.com/users/11666817/abhinav-kannojia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 1, "accepted_answer_id": 57173276, "answer_count": 1, "score": -1, "last_activity_date": 1564126682, "creation_date": 1563921347, "last_edit_date": 1564126682, "question_id": 57173053, "link": "https://stackoverflow.com/questions/57173053/how-to-write-the-dynamic-method-calling-code-below", "title": "How to write the dynamic method calling code below?", "body": "<blockquote>\n  <p>Define a class dynamically. Class name should be taken from user by standard input (command line)</p>\n  \n  <p>Then prompt user for a method name and a single line of code. This method should be defined as instance method in the class above dynamically with the code entered by user.</p>\n  \n  <p>Tell user that the class and method is defined. Then call this instance method and display the result.</p>\n</blockquote>\n\n<p>I am able to create the class dynamically but after that I am not able to proceed.</p>\n\n<pre><code>class Ancestor; end\nSomeClass = Class.new(Ancestor) do\n  def initialize(var)\n     print \"#{self.class} initialized with #{var}\"\n  end\nend\n\nclass &lt;&lt; self\n define_method :new_dynamic_method do\n    \"content goes here\"\n end\nend\n\nputs a = SomeClass.new(ARGV[0])\n</code></pre>\n\n<p>Code should be object oriented. </p>\n\n<p>Expected Result :</p>\n\n<blockquote>\n  <p>Please enter the class name: User</p>\n  \n  <p>Please enter the method name you wish to define: greet</p>\n  \n  <p>Please enter the method's code: \"Welcome from #{self.class} class. I am #{self}\"</p>\n</blockquote>\n\n<p>--- Result ---</p>\n\n<blockquote>\n  <p>Hello, Your class User with method greet is ready. Calling: User.new.greet: \"Welcome from User class. I am \"</p>\n</blockquote>\n\n<p>Calling API should look something like:</p>\n\n<pre><code>my_class = DynamicClass.new(class_name)\nmy_class.def_method(method_name, method_body)\nmy_class.def_method(another_method_name, method_body)\n...\n...\n\nmy_class.call(method_name)\nmy_class.call(another_method_name)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1563921865, "post_id": 57172750, "comment_id": 100859183, "body": "What if you do one string, then 1000 several times? There may be a startup penalty calling <code>parameterize</code> the first time."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 2, "creation_date": 1563925560, "post_id": 57172750, "comment_id": 100859845, "body": "<code>parameterize</code> <a href=\"https://github.com/rails/rails/blob/b9ca94caea2ca6a6cc09abaffaad67b447134079/activesupport/lib/active_support/inflector/transliterate.rb#L94\" rel=\"nofollow noreferrer\">calls <code>transliterate</code></a>, which <a href=\"https://github.com/rails/rails/blob/b9ca94caea2ca6a6cc09abaffaad67b447134079/activesupport/lib/active_support/inflector/transliterate.rb#L64\" rel=\"nofollow noreferrer\">in turn calls</a> <code>I18n.transliterate</code>. Maybe something in I18n is causing the issue?"}], "answers": [{"tags": [], "owner": {"reputation": 631, "user_id": 8157532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64bde8f29e12331c4a81c873acfc77cc?s=128&d=identicon&r=PG&f=1", "display_name": "ucpuzz", "link": "https://stackoverflow.com/users/8157532/ucpuzz"}, "is_accepted": true, "score": 3, "last_activity_date": 1563972370, "last_edit_date": 1563972370, "creation_date": 1563949053, "answer_id": 57176392, "question_id": 57172750, "link": "https://stackoverflow.com/questions/57172750/why-parameterize-is-extremely-slow-the-first-time-it-is-executed/57176392#57176392", "title": "Why parameterize is extremely slow the first time it is executed", "body": "<p><strong>Short answer</strong>: \n   The first invocation of ActiveSupport::Inflector#parametrize ends up loading unicode database <a href=\"https://github.com/rails/rails/blob/v5.2.3/activesupport/lib/active_support/multibyte/unicode.rb#L340\" rel=\"nofollow noreferrer\">here</a>. This adds 70 plus milliseconds overhead, and the main reason why first invocation was slower.</p>\n\n<p><strong>Long Answer:</strong>\nThe first invocation of <code>\"Book Author Title\u201d.parametrize</code> is slow due to following reasons: </p>\n\n<ol>\n<li>Loading the unicode database plus normalize takes 70 plus\nmilliseconds         </li>\n<li>I18n.transliterate(\"Book Author Title\") on first invocation translates in 10-15 milliseconds and cache the response. Subsequent calls return cached value, which takes 0.002 milliseconds.</li>\n</ol>\n\n<p>Below are the sequence of calls that load unicode database:</p>\n\n<pre><code>ActiveSupport::Inflector.parametrize -&gt;\n ActiveSupport::Inflector.transliterate -&gt;\n  ActiveSupport::Multibyte::Unicode.normalize -&gt;\n   https://github.com/rails/rails/blob/v5.2.3/activesupport/lib/active_support/multibyte/unicode.rb#L340\n</code></pre>\n\n<p>Try the below snippet to verify.</p>\n\n<pre><code>require 'active_support'\nrequire 'active_support/core_ext'\ndef benchmark_normalize(s)\n  st = Time.now\n  ts = ActiveSupport::Multibyte::Unicode.normalize(s, :c)\n  et = Time.now\n  p \"takes #{'%.4f' % ((et - st)*1000)} milliseconds\"\nend\nbenchmark_normalize(\"Book Author Title\")\n</code></pre>\n"}], "owner": {"reputation": 1909, "user_id": 7003310, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/93c4c71ac8fb2188d6e0f481b9b88a9d?s=128&d=identicon&r=PG&f=1", "display_name": "qichao_he", "link": "https://stackoverflow.com/users/7003310/qichao-he"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 1, "accepted_answer_id": 57176392, "answer_count": 1, "score": 5, "last_activity_date": 1563972370, "creation_date": 1563919186, "question_id": 57172750, "link": "https://stackoverflow.com/questions/57172750/why-parameterize-is-extremely-slow-the-first-time-it-is-executed", "title": "Why parameterize is extremely slow the first time it is executed", "body": "<p>I have the following code that basically times the execution time for parameterize:</p>\n\n<pre><code>require 'active_support'\nrequire 'active_support/core_ext'\n\nfor x in 0..10\n  ss = Array.new(1000, \"Book Author Title\")\n  st = Time.now\n  ss = ss.map {|s| s.parameterize}\n  et = Time.now\n  p \"parameterize 1000 simple strings takes #{'%.4f' % ((et - st)*1000)} milliseconds\"\nend\n# p ss\n</code></pre>\n\n<p>However I got the output, like:</p>\n\n<pre><code>\"parameterize 1000 simple strings takes 219.5780 milliseconds\"\n\"parameterize 1000 simple strings takes 74.3870 milliseconds\"\n\"parameterize 1000 simple strings takes 73.9830 milliseconds\"\n\"parameterize 1000 simple strings takes 76.3160 milliseconds\"\n\"parameterize 1000 simple strings takes 65.7620 milliseconds\"\n\"parameterize 1000 simple strings takes 78.5280 milliseconds\"\n\"parameterize 1000 simple strings takes 89.2950 milliseconds\"\n\"parameterize 1000 simple strings takes 90.6750 milliseconds\"\n\"parameterize 1000 simple strings takes 93.8500 milliseconds\"\n\"parameterize 1000 simple strings takes 74.2330 milliseconds\"\n\"parameterize 1000 simple strings takes 86.2160 milliseconds\"\n</code></pre>\n\n<p>The first time it is executed cost so much more than the following, I want to understand why is that.</p>\n\n<p>Thanks everyone!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "docker", "aws-fargate"], "answers": [{"tags": [], "owner": {"reputation": 8371, "user_id": 1094339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Cibe3.png?s=128&g=1", "display_name": "Deekor", "link": "https://stackoverflow.com/users/1094339/deekor"}, "is_accepted": false, "score": 1, "last_activity_date": 1563916326, "creation_date": 1563916326, "answer_id": 57172286, "question_id": 57171936, "link": "https://stackoverflow.com/questions/57171936/rails-app-on-aws-fargate-cant-connect-via-browser/57172286#57172286", "title": "rails app on aws fargate, cant connect via browser", "body": "<p>binding '0.0.0.0' fixed it</p>\n\n<p><code>rails s -p 80 -b '0.0.0.0'</code></p>\n"}], "owner": {"reputation": 8371, "user_id": 1094339, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/Cibe3.png?s=128&g=1", "display_name": "Deekor", "link": "https://stackoverflow.com/users/1094339/deekor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563916326, "creation_date": 1563914719, "question_id": 57171936, "link": "https://stackoverflow.com/questions/57171936/rails-app-on-aws-fargate-cant-connect-via-browser", "title": "rails app on aws fargate, cant connect via browser", "body": "<p>I'm trying to launch a simple rails app on Fargate. I've been following this tutorial: <a href=\"https://scoutapm.com/blog/deploying-to-aws-part-i-running-a-rails-app-on-fargate\" rel=\"nofollow noreferrer\">https://scoutapm.com/blog/deploying-to-aws-part-i-running-a-rails-app-on-fargate</a></p>\n\n<p>I can see the puma server running in the logs listening on <code>localhost:80</code> but when I navigate to the public IP of the ENI I can't connect to the server.</p>\n\n<p>Any suggestions on what the issue could be? I've made sure the security group is open to all traffic both inbound and outbound.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5", "active-model-serializers"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1563918185, "post_id": 57171815, "comment_id": 100858274, "body": "can you post your serializer class definition?"}, {"owner": {"reputation": 11, "user_id": 6612087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6f45edac0f49b23ba75491c58be0152?s=128&d=identicon&r=PG&f=1", "display_name": "kellenkyros", "link": "https://stackoverflow.com/users/6612087/kellenkyros"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1563940019, "post_id": 57171815, "comment_id": 100862139, "body": "@lacostenycoder: I have updated my post with ApplicationSerializer &amp; PostSerializer. Thanks!"}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1564027720, "post_id": 57171815, "comment_id": 100897045, "body": "Is this unexpected behavior according to the ActiveModel Serializer documentation? Where is <code>@post</code> being set? Is it <code>nil</code>? What happens if you set <code>@post = {}</code> first?"}], "owner": {"reputation": 11, "user_id": 6612087, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6f45edac0f49b23ba75491c58be0152?s=128&d=identicon&r=PG&f=1", "display_name": "kellenkyros", "link": "https://stackoverflow.com/users/6612087/kellenkyros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 232, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1563939954, "creation_date": 1563914097, "last_edit_date": 1563939954, "question_id": 57171815, "link": "https://stackoverflow.com/questions/57171815/activemodel-serializer-ignores-root-key-when-posts-or-post-is-empty-or-nil", "title": "ActiveModel serializer ignores root key when posts or post is empty or nil", "body": "<p>I am using active model serializer V0.10.0 with Rails 5 api only application. During implementation I noticed the AMS is completely ignoring the root key when the posts/post is empty or nil respectively. This behavior actually breaks my mobile app as it always expects root key data in all response.</p>\n\n<p>So what I want to achieve here is no matter what I always want <code>data</code> as root element of my Rails app response for all requests.</p>\n\n<p>Response for SHOW API when the post is empty</p>\n\n<pre><code>SHOW render json: @post, root: 'data'\n</code></pre>\n\n<p>Expected</p>\n\n<pre><code>{\n  \"data\": {}\n}\n</code></pre>\n\n<p>Actual</p>\n\n<pre><code>null\n</code></pre>\n\n<p>Response for INDEX API when the posts are empty</p>\n\n<pre><code>INDEX render json: @posts, root: 'data'\n</code></pre>\n\n<p>Expected</p>\n\n<pre><code>{\n  \"data\": []\n}\n</code></pre>\n\n<p>Actual</p>\n\n<pre><code>{\n  \"posts\": []\n}\n</code></pre>\n\n<pre><code>class ApplicationSerializer &lt; ActiveModel::Serializer\n  include Rails.application.routes.url_helpers\n  ActiveModelSerializers.config.adapter = :json\n  def host\n    Rails.application.secrets.dig(:host_url)\n  end\nend\n</code></pre>\n\n<pre><code>class PostSerializer &lt; ApplicationSerializer\n  attributes :id\n  has_many :comments\nend\n</code></pre>\n"}, {"tags": ["ruby", "linux", "shell", "terminal"], "answers": [{"comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 2, "creation_date": 1563912669, "post_id": 57171230, "comment_id": 100856289, "body": "This is Ruby&#39;s &quot;fault&quot;, because it sets the blocking flag. Many programs will fail after you run <code>read_nonblock</code>. Just try a simple <code>cat</code> on the command line and it will fail too. STDIN is just not supposed to be O_NONBLOCK."}], "tags": [], "owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "is_accepted": false, "score": 2, "last_activity_date": 1564189980, "last_edit_date": 1564189980, "creation_date": 1563911362, "answer_id": 57171230, "question_id": 57170899, "link": "https://stackoverflow.com/questions/57170899/stdin-read-nonblock-messes-up-other-programs-after-ruby-exits/57171230#57171230", "title": "STDIN.read_nonblock messes up other programs after Ruby exits", "body": "<p>When you use <code>STDIN.read_nonblock</code>, Ruby uses the <code>fcntl</code> system call to set the <code>O_NONBLOCK</code> flag on its standard input file descriptor (2), and it never changes it back.  That descriptor is apparently shared with other processes, like your shell.</p>\n\n<p>Unfortunately, git doesn't seem to turn off this flag, so it gets bad results when it tries to read user input from the terminal and the standard input is still in non-blocking mode.</p>\n\n<p>I'm not sure if this is Git's fault or Ruby's fault, but you can fix it easily enough in the Ruby code by making a <em>new file descriptor</em> pointing to the standard input, and using that for all your non-blocking reads:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>$stdin_nonblock ||= (File.open('/dev/stdin') rescue STDIN)\n$stdin_nonblock.read_nonblock(256)\n</code></pre>\n\n<p>Warning: Unfortunately, you will not always have permission to open <code>/dev/stdin</code> (and you typically do not if you are a running in a shell started with <code>su</code>).  That is why I added <code>rescue STDIN</code> to the code.  I suspect <code>dup</code> would be a more reliable system call to use instead of <code>open</code>, if it works at all.</p>\n"}, {"tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": false, "score": 2, "last_activity_date": 1563912498, "last_edit_date": 1563912498, "creation_date": 1563912039, "answer_id": 57171382, "question_id": 57170899, "link": "https://stackoverflow.com/questions/57170899/stdin-read-nonblock-messes-up-other-programs-after-ruby-exits/57171382#57171382", "title": "STDIN.read_nonblock messes up other programs after Ruby exits", "body": "<p>In addition to your own answer, there is a way to reset O_NONBLOCK on the descriptor back to blocking. This also fixes the issue:</p>\n\n<pre><code>require 'fcntl'\n\nflags = STDIN.fcntl(Fcntl::F_GETFL, 0)\nSTDIN.fcntl(Fcntl::F_SETFL, flags &amp; ~Fcntl::O_NONBLOCK)\n</code></pre>\n\n<p>You have to run this code in an <code>ensure</code> block, because <code>read_nonblock</code> will not reset the flag back in any circumstances.</p>\n"}, {"tags": [], "owner": {"reputation": 16460, "user_id": 341730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc4ac3bee5a31e114112c0222eef62e0?s=128&d=identicon&r=PG", "display_name": "univerio", "link": "https://stackoverflow.com/users/341730/univerio"}, "is_accepted": false, "score": 0, "last_activity_date": 1615477918, "creation_date": 1615477918, "answer_id": 66585942, "question_id": 57170899, "link": "https://stackoverflow.com/questions/57170899/stdin-read-nonblock-messes-up-other-programs-after-ruby-exits/66585942#66585942", "title": "STDIN.read_nonblock messes up other programs after Ruby exits", "body": "<p>As an alternative to bit-twiddling with <code>fcntl</code>, you can use <a href=\"https://ruby-doc.org/stdlib-2.7.0/libdoc/io/nonblock/rdoc/IO.html\" rel=\"nofollow noreferrer\"><code>io/nonblock</code></a> to clear <code>O_NONBLOCK</code>:</p>\n<pre class=\"lang-rb prettyprint-override\"><code>require 'io/nonblock'\n$stdin.nonblock {$stdin.read_nonblock(256)}\nputs $stdin.nonblock? # false\n</code></pre>\n<p><code>io/nonblock</code> is part of the <a href=\"https://github.com/ruby/ruby/tree/v2_7_0/ext/io/nonblock\" rel=\"nofollow noreferrer\">Ruby source tree</a> so it should always be available.</p>\n"}], "owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1615477918, "creation_date": 1563909743, "last_edit_date": 1563910692, "question_id": 57170899, "link": "https://stackoverflow.com/questions/57170899/stdin-read-nonblock-messes-up-other-programs-after-ruby-exits", "title": "STDIN.read_nonblock messes up other programs after Ruby exits", "body": "<p>I am writing an interactive terminal program in Ruby that sometimes runs <code>STDIN.read_nonblock(256)</code> to flush any buffered input from the user.</p>\n\n<p>After running my Ruby program, if I run <code>git add -p</code> (another interactive program) in the same terminal and shell, then git malfunctions: it doesn't spend any time waiting for user input and instead just shows all of its prompts immediately and then exits.</p>\n\n<p>Here is a shell session showing how I can reproduce this using Ubuntu 18.04, Ruby 2.6.3, and git 2.17.1:</p>\n\n<pre><code>$ mkdir testrepo &amp;&amp; cd testrepo &amp;&amp; git init .\nInitialized empty Git repository in /home/david/tmp/testrepo/.git/\n$ touch foo.txt\n$ git add foo.txt\n$ echo hi &gt; foo.txt\n$ git add -p  # works fine\ndiff --git a/foo.txt b/foo.txt\nindex e69de29..45b983b 100644\n--- a/foo.txt\n+++ b/foo.txt\n@@ -0,0 +1 @@\n+hi\nStage this hunk [y,n,q,a,d,e,?]? q\n\n$ ruby -v -e 'STDIN.read_nonblock(256)'\nruby 2.6.3p62 (2019-04-16 revision 67580) [x86_64-linux]\nTraceback (most recent call last):\n    2: from -e:1:in `&lt;main&gt;'\n    1: from &lt;internal:prelude&gt;:73:in `read_nonblock'\n&lt;internal:prelude&gt;:73:in `__read_nonblock': Resource temporarily unavailable - read would block (IO::EAGAINWaitReadable)\n$ git add -p  # bad: exits before waiting for input\ndiff --git a/foo.txt b/foo.txt\nindex e69de29..45b983b 100644\n--- a/foo.txt\n+++ b/foo.txt\n@@ -0,0 +1 @@\n+hi\nStage this hunk [y,n,q,a,d,e,?]? \n$ git --version\ngit version 2.17.1\n</code></pre>\n\n<p>Is there any workaround I can put in my Ruby program to prevent this from happening?  (I'm also interested in any insight about what might be happening.)</p>\n\n<p>By the way, I noticed that a messed up terminal can be fixed by running <code>bash</code> to start a new shell, and then typing Ctrl+D exit that new shell.</p>\n"}, {"tags": ["html", "css", "ruby", "sinatra"], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 2, "last_activity_date": 1563913088, "creation_date": 1563913088, "answer_id": 57171615, "question_id": 57170876, "link": "https://stackoverflow.com/questions/57170876/how-to-store-selected-button-in-params/57171615#57171615", "title": "How to store selected button in params?", "body": "<p>You can put a hidden field in each of the forms, like:</p>\n\n<pre><code>&lt;input type=\"hidden\" name=\"choice\" value=\"rock\" /&gt;\n</code></pre>\n\n<p>Then in your <code>post '/choice'</code> function you can access it with <code>params[:choice]</code>. </p>\n"}], "owner": {"reputation": 51, "user_id": 10733969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/275ce55f9c4b54e214d2bd92069d3eb2?s=128&d=identicon&r=PG&f=1", "display_name": "mbbm9", "link": "https://stackoverflow.com/users/10733969/mbbm9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 57171615, "answer_count": 1, "score": 0, "last_activity_date": 1563913088, "creation_date": 1563909651, "question_id": 57170876, "link": "https://stackoverflow.com/questions/57170876/how-to-store-selected-button-in-params", "title": "How to store selected button in params?", "body": "<p>I'm pretty new to programming ,  I'm writing a simple Rock Paper Scissors game. there are 3 buttons with pictures, depending on which one is clicked by the player, the next page should show that picture. In other words, If the player clicks the \"rock\" button, then it should be shown on the next page.\nThe problem is that I can't figure out how to store the selected button so that it can show up in '/results' rout.</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>\n(play.erb)\n\n        &lt;div class=\"pbox-1\"&gt;\n        &lt;form action=/choice method=\"post\"&gt;\n          &lt;input type=\"image\" src=\"images/rock.jpg\"  name=\"rock\" /&gt;\n        &lt;/form&gt;\n        &lt;/div&gt;\n        &lt;div class=\"pbox-2\"&gt;\n        &lt;form action=/choice method=\"post\"&gt;\n          &lt;input type=\"image\" src=\"images/paper.jpg\"  name=\"paper\" /&gt;\n        &lt;/form&gt;\n        &lt;/div&gt;\n        &lt;div class=\"pbox-3\"&gt;\n        &lt;form action=/choice method=\"post\"&gt;\n          &lt;input type=\"image\" src=\"images/scissors.jpg\"  name=\"scissors\" /&gt;\n        &lt;/form&gt;\n        &lt;/div&gt;\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>(controller)\n\nrequire 'sinatra/base'\nrequire './lib/game'\nrequire './lib/player'\n\nclass Rps &lt; Sinatra::Base\n    enable :sessions\n\n    get '/play' do\n        erb :play\n    end\n\n    post '/choice' do\n        redirect '/results'\n    end\n\n    get '/results' do\n        erb :results\n    end\n\n    run! if app_file == $0\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>(Player class)\n\nrequire_relative 'game'\n\nclass Player\n    attr_reader :name, :choice\n    def initialize(name)\n        @name = name\n        @choice = nil\n    end\n    def make_choice(player_choice)\n        @choice = player_choice\n    end\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>(Game class)\n\nrequire_relative 'player'\n\nclass Game\n    attr_reader :players \n    def initialize(player_1)\n        @players = player_1\n    end\n    def player_1\n        @players\n    end\n    def player_1_choice\n        player_1.choice\n    end\nend\n\n</code></pre>\n"}, {"tags": ["ruby", "github", "rubygems", "jekyll"], "answers": [{"comments": [{"owner": {"reputation": 61, "user_id": 10849900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-g2hhWLRiRwg/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYyy3CJ1L8c8jKMLAYkb43ya6qpRw/mo/photo.jpg?sz=128", "display_name": "Alex Jang", "link": "https://stackoverflow.com/users/10849900/alex-jang"}, "edited": false, "score": 0, "creation_date": 1563961082, "post_id": 57172655, "comment_id": 100870752, "body": "Thanks for your answer! but even after I did &#39;gem install bundler -v 1.12&#39;, it still shows the same msg. maybe should I completely remove the latest version on my windows? or what should I do?"}, {"owner": {"reputation": 2198, "user_id": 3842598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/468955b0edcf30e61a2937cb8b754a1a?s=128&d=identicon&r=PG&f=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/3842598/christian"}, "reply_to_user": {"reputation": 61, "user_id": 10849900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-g2hhWLRiRwg/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYyy3CJ1L8c8jKMLAYkb43ya6qpRw/mo/photo.jpg?sz=128", "display_name": "Alex Jang", "link": "https://stackoverflow.com/users/10849900/alex-jang"}, "edited": false, "score": 0, "creation_date": 1563965427, "post_id": 57172655, "comment_id": 100873305, "body": "I have updated my answer. You need to run <code>bundle _1.12_ install </code> afterwards."}, {"owner": {"reputation": 61, "user_id": 10849900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-g2hhWLRiRwg/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYyy3CJ1L8c8jKMLAYkb43ya6qpRw/mo/photo.jpg?sz=128", "display_name": "Alex Jang", "link": "https://stackoverflow.com/users/10849900/alex-jang"}, "edited": false, "score": 0, "creation_date": 1564059658, "post_id": 57172655, "comment_id": 100912706, "body": "Thank you so much! after following your answer, <code>bundle install</code> worked. But then entered <code>npm install</code>, it says <code>gyp ERR! configure error gyp ERR! stack Error: Command failed: C:\\Program Files (x86)\\Python36-32\\python.EXE -c import sys; print &quot;%s.%s.%s&quot; % sys.version_info[:3]; gyp ERR! stack   File &quot;&lt;string&gt;&quot;, line 1 gyp ERR! stack     import sys; print &quot;%s.%s.%s&quot; % sys.version_info[:3];</code>"}, {"owner": {"reputation": 2198, "user_id": 3842598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/468955b0edcf30e61a2937cb8b754a1a?s=128&d=identicon&r=PG&f=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/3842598/christian"}, "reply_to_user": {"reputation": 61, "user_id": 10849900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-g2hhWLRiRwg/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYyy3CJ1L8c8jKMLAYkb43ya6qpRw/mo/photo.jpg?sz=128", "display_name": "Alex Jang", "link": "https://stackoverflow.com/users/10849900/alex-jang"}, "edited": false, "score": 0, "creation_date": 1564063708, "post_id": 57172655, "comment_id": 100915154, "body": "No idea, your question was related to ruby and bundler. Sorry. Somehow related to note gyp but I have no clue at all."}, {"owner": {"reputation": 2198, "user_id": 3842598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/468955b0edcf30e61a2937cb8b754a1a?s=128&d=identicon&r=PG&f=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/3842598/christian"}, "reply_to_user": {"reputation": 61, "user_id": 10849900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-g2hhWLRiRwg/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYyy3CJ1L8c8jKMLAYkb43ya6qpRw/mo/photo.jpg?sz=128", "display_name": "Alex Jang", "link": "https://stackoverflow.com/users/10849900/alex-jang"}, "edited": false, "score": 0, "creation_date": 1564185776, "post_id": 57172655, "comment_id": 100960518, "body": "I googled ... found this: Rebuilding native node modules requires node-gyp, which requires Python 2. Install Python 2 and make sure it&#39;s first in %PATH% (i.e., before Python 2.7 that you have installed) so node-gyp can find it."}], "tags": [], "owner": {"reputation": 2198, "user_id": 3842598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/468955b0edcf30e61a2937cb8b754a1a?s=128&d=identicon&r=PG&f=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/3842598/christian"}, "is_accepted": false, "score": 5, "last_activity_date": 1583547701, "last_edit_date": 1583547701, "creation_date": 1563918535, "answer_id": 57172655, "question_id": 57170296, "link": "https://stackoverflow.com/questions/57170296/bundler-could-not-find-compatible-versions-for-gem-bundler-in-gemfile/57172655#57172655", "title": "Bundler could not find compatible versions for gem &quot;bundler&quot;: In Gemfile:", "body": "<p>Version 2.0.2 comes from <code>gem install bundler</code>, but the project uses bundler version 1.12. </p>\n\n<p>To fix your issue run  </p>\n\n<ol>\n<li><code>gem install bundler -v 1.12</code>  </li>\n<li><code>bundle _1.12_ install</code>   </li>\n</ol>\n\n<p>To start Jekyll run <code>jekyll serve</code> or <code>bundle exec jekyll serve</code>.</p>\n"}], "owner": {"reputation": 61, "user_id": 10849900, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-g2hhWLRiRwg/AAAAAAAAAAI/AAAAAAAAAAA/AKxrwcYyy3CJ1L8c8jKMLAYkb43ya6qpRw/mo/photo.jpg?sz=128", "display_name": "Alex Jang", "link": "https://stackoverflow.com/users/10849900/alex-jang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1885, "favorite_count": 1, "answer_count": 1, "score": 5, "last_activity_date": 1617734296, "creation_date": 1563906977, "last_edit_date": 1617734296, "question_id": 57170296, "link": "https://stackoverflow.com/questions/57170296/bundler-could-not-find-compatible-versions-for-gem-bundler-in-gemfile", "title": "Bundler could not find compatible versions for gem &quot;bundler&quot;: In Gemfile:", "body": "<p>I'm making GitHub blog page with Jekyll. I've failed like numerous times and just forked new one and followed README on the repository.</p>\n<p>It's <a href=\"https://github.com/janczizikow/sleek/blob/master/README.md\" rel=\"nofollow noreferrer\">https://github.com/janczizikow/sleek/blob/master/README.md</a>\nand I tried to run  inside the directory(master) but this msg keeps coming out.</p>\n<p>I tried 'gem install bundler' 'gem cleanup' and similar solutions on the internet but still can't fix it. I get that I need another version which is lower one, then how can I remove the current one and install the version I need?</p>\n<p>I've never used Ruby so I'm SO lost. A little advice will mean a lot.</p>\n<pre><code>bundle install\nFetching gem metadata from https://rubygems.org/...........\nFetching gem metadata from https://rubygems.org/.\nResolving dependencies...\nBundler could not find compatible versions for gem &quot;bundler&quot;:\n  In Gemfile:\n    bundler (~&gt; 1.12) x64-mingw32\n\n  Current Bundler version:\n    bundler (2.0.2)\nThis Gemfile requires a different version of Bundler.\nPerhaps you need to update Bundler by running `gem install bundler`?\n\nCould not find gem 'bundler (~&gt; 1.12)' in any of the relevant sources:\n  the local ruby installation\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "firebase", "devise"], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 9444582, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Michael Hemmelgarn", "link": "https://stackoverflow.com/users/9444582/michael-hemmelgarn"}, "is_accepted": true, "score": 2, "last_activity_date": 1563908866, "creation_date": 1563908866, "answer_id": 57170718, "question_id": 57169901, "link": "https://stackoverflow.com/questions/57169901/how-to-view-email-username-in-devise-session-controller/57170718#57170718", "title": "How to view email/username in devise session controller", "body": "<p>It turns out that its accesable through params. Didn't realize this earlier.</p>\n\n<p>params[:user][:email] got me my email.</p>\n"}], "owner": {"reputation": 61, "user_id": 9444582, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Michael Hemmelgarn", "link": "https://stackoverflow.com/users/9444582/michael-hemmelgarn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 57170718, "answer_count": 1, "score": 0, "last_activity_date": 1563908866, "creation_date": 1563905121, "question_id": 57169901, "link": "https://stackoverflow.com/questions/57169901/how-to-view-email-username-in-devise-session-controller", "title": "How to view email/username in devise session controller", "body": "<p>I am attempting to create dual authentication using firebase and devise for ruby on rails. I already have the devise session controller extended and I am accessing firebase. It is based on whitelisted locations. (Probably not very secure but its mostly for a fun proof of concept project.) I want to get the username/email from the devise login page so i can find that user in the firebase database to look for the params associated with that name. I have already tried to look through documentation but i might have missed something.\nIf anyone could tell me how to grab the username in the deviseSessions_controller. I would be grateful. </p>\n\n<p>Thank you ahead of time.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "oci8"], "answers": [{"tags": [], "owner": {"reputation": 58, "user_id": 2691597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AIM7e.jpg?s=128&g=1", "display_name": "inouire", "link": "https://stackoverflow.com/users/2691597/inouire"}, "is_accepted": true, "score": 2, "last_activity_date": 1564049434, "creation_date": 1564049434, "answer_id": 57199483, "question_id": 57169764, "link": "https://stackoverflow.com/questions/57169764/can-i-use-activerecord-without-mapping-all-the-tables/57199483#57199483", "title": "Can i use Activerecord without mapping all the tables", "body": "<p>I'm not an expert in Active Records but I see what you're trying to do. After a quick search I don't find any mention of ways to make queries on \"unmapped\" tables in Active Records.</p>\n\n<p>If you have the ability to pick your gems, I think that Sequel would be a good fit for your needs. You don't need to map anything to get started, because the database schema is parsed by Sequel itself.</p>\n\n<p>Let's say if you have 3 tables <code>stuff_1</code>, <code>stuff_2</code>, and <code>foo</code> you can simply access them and do some queries without declaring anything in your code, like that:</p>\n\n<pre><code>DB[:stuff_1].where(:is_cool =&gt; true, :group =&gt; \"test\").each do |stuff_1|\n  # stuff_1 is a hash containing the information of the row, indexed by the table column names \nend\n\nDB[:stuff_2].where(:is_archived =&gt; true).count\n\nDB[:foo].all\n</code></pre>\n\n<p>Sequel calls that datasets, and this is very flexible. More information on datasets here: <a href=\"http://sequel.jeremyevans.net/rdoc/files/doc/dataset_basics_rdoc.html\" rel=\"nofollow noreferrer\">http://sequel.jeremyevans.net/rdoc/files/doc/dataset_basics_rdoc.html</a></p>\n\n<p>Full Sequel documentation: <a href=\"http://sequel.jeremyevans.net/documentation.html\" rel=\"nofollow noreferrer\">http://sequel.jeremyevans.net/documentation.html</a></p>\n"}], "owner": {"reputation": 23, "user_id": 7054853, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ix5-XO7Zxvk/AAAAAAAAAAI/AAAAAAAAAFE/KmkQBmfsRLc/photo.jpg?sz=128", "display_name": "thabata almeida", "link": "https://stackoverflow.com/users/7054853/thabata-almeida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 57199483, "answer_count": 1, "score": 0, "last_activity_date": 1564049434, "creation_date": 1563904549, "last_edit_date": 1563905056, "question_id": 57169764, "link": "https://stackoverflow.com/questions/57169764/can-i-use-activerecord-without-mapping-all-the-tables", "title": "Can i use Activerecord without mapping all the tables", "body": "<p>I do automated testing of a large system, I need to validate many tables at different databases. I'm thinking of using Active Record, but all the examples I've seen in research show that the tables to use are mapped first and used as model. Is there any way to use active record without mapping? if so which ones?\nI am currently using OCI8</p>\n\n<p>If for a simple validation of this I map each table will be very time consuming, are the winnings really so high?</p>\n"}, {"tags": ["php", "ruby-on-rails", "ruby", "webhooks"], "answers": [{"tags": [], "owner": {"reputation": 570, "user_id": 2048680, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh3.googleusercontent.com/-ZNA8X0AjzPk/AAAAAAAAAAI/AAAAAAAAABg/H5jHKT7CRdk/photo.jpg?sz=128", "display_name": "Conor", "link": "https://stackoverflow.com/users/2048680/conor"}, "is_accepted": true, "score": 6, "last_activity_date": 1564163688, "creation_date": 1564163688, "answer_id": 57224954, "question_id": 57169486, "link": "https://stackoverflow.com/questions/57169486/how-to-require-php-serialize-to-be-able-to-verify-a-webhook-ruby-on-rails-5/57224954#57224954", "title": "How to require PHP.serialize to be able to verify a webhook? (Ruby on Rails 5)", "body": "<p>It looks like the Fixnum deprecated warning was fixed in a PR <a href=\"https://github.com/jqr/php-serialize/pull/15\" rel=\"noreferrer\">here</a>. The latest release 1.2 is behind master and doesn't contain a couple changes.</p>\n\n<p>If you are worried about the warning, one option is that you can just get the latest by the ref in the gemfile.</p>\n\n<p><a href=\"https://bundler.io/guides/git.html\" rel=\"noreferrer\">How to Install gems from git repositories</a></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>   gem 'php-serialize', git: 'https://github.com/jqr/php-serialize.git', ref: '31dde87'\n</code></pre>\n\n<p>Other than that, I'm not seeing much wrong with the PHP-Serialize gem on some quick tests. Do you have any specific issues with the code snippet? Can you provide additional details/errors?</p>\n"}, {"tags": [], "owner": {"reputation": 2198, "user_id": 3842598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/468955b0edcf30e61a2937cb8b754a1a?s=128&d=identicon&r=PG&f=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/3842598/christian"}, "is_accepted": false, "score": 1, "last_activity_date": 1564270419, "last_edit_date": 1564270419, "creation_date": 1564269848, "answer_id": 57236794, "question_id": 57169486, "link": "https://stackoverflow.com/questions/57169486/how-to-require-php-serialize-to-be-able-to-verify-a-webhook-ruby-on-rails-5/57236794#57236794", "title": "How to require PHP.serialize to be able to verify a webhook? (Ruby on Rails 5)", "body": "<p>The pull request which should fix the deprecation warning has been merged to master on September 4th, 2018 but the Gem release has not been updated which is pretty sad.</p>\n\n<p>Connor explained well how to use a github source for a gem, but I would maybe use not the specific commit but the current master instead: </p>\n\n<pre><code>gem 'php-serialize', :github =&gt; 'jqr/php-serialize', :branch =&gt; 'master'`\n</code></pre>\n\n<p>If you wanna try another gem, try one of those, found by  </p>\n\n<p><code>gem search -r php|grep serial</code></p>\n\n<blockquote>\n  <p>php-serial (0.9.5)<br>\n  php-serialization (1.0.0)<br>\n  php-serialize (1.2.0)<br>\n  php-serialize4ruby (0.0.0)<br>\n  php-serialize_ryan (1.1.1)<br>\n  php_serialize (1.2)<br>\n  php_serializer (0.2.0)<br>\n  viva-php_serialize (1.1.3)  </p>\n</blockquote>\n\n<p>The gem search trick has been found <a href=\"https://stackoverflow.com/questions/14375983/ruby-gem-for-parsing-serialized-php-array\">here</a>. Some of the gems seem to have received updates in the meantime.</p>\n\n<p>Not sure if any of them is rails 5 compatible but you can surely check them out yourself.</p>\n"}], "owner": {"reputation": 1223, "user_id": 3016477, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/zqvoO.png?s=128&g=1", "display_name": "userden", "link": "https://stackoverflow.com/users/3016477/userden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 210, "favorite_count": 1, "accepted_answer_id": 57224954, "answer_count": 2, "score": 4, "last_activity_date": 1564270419, "creation_date": 1563903377, "last_edit_date": 1564158498, "question_id": 57169486, "link": "https://stackoverflow.com/questions/57169486/how-to-require-php-serialize-to-be-able-to-verify-a-webhook-ruby-on-rails-5", "title": "How to require PHP.serialize to be able to verify a webhook? (Ruby on Rails 5)", "body": "<p>I'm using Ruby on Rails 5, and ruby -v 2.5.3. I'm trying to verify a <a href=\"https://paddle.com/docs/reference-verifying-webhooks/#!\" rel=\"nofollow noreferrer\">webhook, and the example says: </a></p>\n\n<pre><code>require 'base64'\nrequire 'php_serialize'\nrequire 'openssl'\n\n\npublic_key = '-----BEGIN PUBLIC KEY-----\nMIICIjANBgkqh...'\n\n# 'data' represents all of the POST fields sent with the request.\n# Get the p_signature parameter &amp; base64 decode it.\nsignature = Base64.decode64(data['p_signature'])\n\n# Remove the p_signature parameter\ndata.delete('p_signature')\n\n# Ensure all the data fields are strings\ndata.each {|key, value|data[key] = String(value)}\n\n# Sort the data\ndata_sorted = data.sort_by{|key, value| key}\n\n# and serialize the fields\n# serialization library is available here: https://github.com/jqr/php-serialize\ndata_serialized = PHP.serialize(data_sorted, true)\n\n# verify the data\ndigest    = OpenSSL::Digest::SHA1.new\npub_key   = OpenSSL::PKey::RSA.new(public_key).public_key\nverified  = pub_key.verify(digest, signature, data_serialized)\n\nif verified\n    puts \"Yay! Signature is valid!\"\nelse\n    puts \"The signature is invalid!\"\nend\n</code></pre>\n\n<p>My problem is the <em>php.serialize</em>, I tried to use the gem: <a href=\"https://github.com/jqr/php-serialize\" rel=\"nofollow noreferrer\">https://github.com/jqr/php-serialize</a>, but that doesn't support ruby -v 2.5.3. (For example due to: <a href=\"https://github.com/jqr/php-serialize/issues/16\" rel=\"nofollow noreferrer\">https://github.com/jqr/php-serialize/issues/16</a>)</p>\n\n<p>How can I require 'php_serialize' in my Rails app?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "twitter", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1563902461, "post_id": 57169252, "comment_id": 100851924, "body": "There&#39;s no reference to <code>each_byte</code> here so you may need to dig down some more."}, {"owner": {"reputation": 2204, "user_id": 4003349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jyMqf.jpg?s=128&g=1", "display_name": "Legendary", "link": "https://stackoverflow.com/users/4003349/legendary"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1563902710, "post_id": 57169252, "comment_id": 100852045, "body": "@tadman thats the only reference =( cmd+f in log for each_byte are present only in the error message"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1563902740, "post_id": 57169252, "comment_id": 100852056, "body": "It&#39;s in the <code>rfc2396_parser.rb</code> file on line 308."}, {"owner": {"reputation": 2204, "user_id": 4003349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jyMqf.jpg?s=128&g=1", "display_name": "Legendary", "link": "https://stackoverflow.com/users/4003349/legendary"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1563902948, "post_id": 57169252, "comment_id": 100852166, "body": "@tadman added to question"}], "answers": [{"tags": [], "owner": {"reputation": 2204, "user_id": 4003349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jyMqf.jpg?s=128&g=1", "display_name": "Legendary", "link": "https://stackoverflow.com/users/4003349/legendary"}, "is_accepted": false, "score": 1, "last_activity_date": 1563903173, "creation_date": 1563903173, "answer_id": 57169438, "question_id": 57169252, "link": "https://stackoverflow.com/questions/57169252/ruby-twitter-gem-undefined-method-each-byte-for-nilnilclass-on-twitter-clien/57169438#57169438", "title": "Ruby Twitter gem: undefined method `each_byte&#39; for nil:NilClass on twitter_client.update", "body": "<p>Im very sorry, problem was in tweet_text - it CANNOT HAVE special symbols. I hope this helps someone someday... I spent 4 hrs.</p>\n"}], "owner": {"reputation": 2204, "user_id": 4003349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jyMqf.jpg?s=128&g=1", "display_name": "Legendary", "link": "https://stackoverflow.com/users/4003349/legendary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563903173, "creation_date": 1563902257, "last_edit_date": 1563902935, "question_id": 57169252, "link": "https://stackoverflow.com/questions/57169252/ruby-twitter-gem-undefined-method-each-byte-for-nilnilclass-on-twitter-clien", "title": "Ruby Twitter gem: undefined method `each_byte&#39; for nil:NilClass on twitter_client.update", "body": "<p>I have wierd problem with gem. It is working perfectly fine in rails console, but from lib/ it isnt</p>\n\n<p>undefined method `each_byte' for nil:NilClass\nin a row</p>\n\n<pre><code>twitter_client.update(tweet_text.to_s)\ndef twitter_client\n  Twitter::REST::Client.new do |config|\n    config.consumer_key = credentials[:consumer_key]\n    config.consumer_secret = credentials[:consumer_secret]\n    config.access_token = credentials[:access_token]\n    config.access_token_secret = credentials[:access_token_secret]\n    config.user_agent = \"TwitterRubyGem/6.2.0\"\n  end\nend\n</code></pre>\n\n<p>full_trace:</p>\n\n<pre><code>| 2019-07-23T16:53:21.793Z 64165 TID-oxprcg2np WARN: NoMethodError: undefined method `each_byte' for nil:NilClass\n | 2019-07-23T16:53:21.793Z 64165 TID-oxprcg2np WARN: /Users/DekaKisaLove/.rvm/rubies/ruby-2.6.1/lib/ruby/2.6.0/uri/rfc2396_parser.rb:308:in `block in escape'\n | /Users/DekaKisaLove/.rvm/gems/ruby-2.6.1@closedwon/gems/activesupport-5.2.3/lib/active_support/core_ext/string/output_safety.rb:230:in `gsub'\n | /Users/DekaKisaLove/.rvm/gems/ruby-2.6.1@closedwon/gems/activesupport-5.2.3/lib/active_support/core_ext/string/output_safety.rb:230:in `gsub'\n | /Users/DekaKisaLove/.rvm/rubies/ruby-2.6.1/lib/ruby/2.6.0/uri/rfc2396_parser.rb:305:in `escape'\n | /Users/DekaKisaLove/.rvm/gems/ruby-2.6.1@closedwon/gems/simple_oauth-0.3.1/lib/simple_oauth/header.rb:32:in `escape'\n | /Users/DekaKisaLove/.rvm/gems/ruby-2.6.1@closedwon/gems/simple_oauth-0.3.1/lib/simple_oauth/header.rb:114:in `block (2 levels) in normalized_params'\n | /Users/DekaKisaLove/.rvm/gems/ruby-2.6.1@closedwon/gems/simple_oauth-0.3.1/lib/simple_oauth/header.rb:114:in `collect'\n | /Users/DekaKisaLove/.rvm/gems/ruby-2.6.1@closedwon/gems/simple_oauth-0.3.1/lib/simple_oauth/header.rb:114:in `block in normalized_params'\n | /Users/DekaKisaLove/.rvm/gems/ruby-2.6.1@closedwon/gems/simple_oauth-0.3.1/lib/simple_oauth/header.rb:114:in `collect'\n | /Users/DekaKisaLove/.rvm/gems/ruby-2.6.1@closedwon/gems/simple_oauth-0.3.1/lib/simple_oauth/header.rb:114:in `normalized_params'\n | /Users/DekaKisaLove/.rvm/gems/ruby-2.6.1@closedwon/gems/simple_oauth-0.3.1/lib/simple_oauth/header.rb:110:in `signature_base'\n | /Users/DekaKisaLove/.rvm/gems/ruby-2.6.1@closedwon/gems/simple_oauth-0.3.1/lib/simple_oauth/header.rb:101:in `hmac_sha1_signature'\n | /Users/DekaKisaLove/.rvm/gems/ruby-2.6.1@closedwon/gems/simple_oauth-0.3.1/lib/simple_oauth/header.rb:97:in `signature'\n | /Users/DekaKisaLove/.rvm/gems/ruby-2.6.1@closedwon/gems/simple_oauth-0.3.1/lib/simple_oauth/header.rb:77:in `signed_attributes'\n | /Users/DekaKisaLove/.rvm/gems/ruby-2.6.1@closedwon/gems/simple_oauth-0.3.1/lib/simple_oauth/header.rb:83:in `normalized_attributes'\n | /Users/DekaKisaLove/.rvm/gems/ruby-2.6.1@closedwon/gems/simple_oauth-0.3.1/lib/simple_oauth/header.rb:65:in `to_s'\n | /Users/DekaKisaLove/.rvm/gems/ruby-2.6.1@closedwon/gems/twitter-6.2.0/lib/twitter/headers.rb:39:in `auth_header'\n | /Users/DekaKisaLove/.rvm/gems/ruby-2.6.1@closedwon/gems/twitter-6.2.0/lib/twitter/headers.rb:30:in `request_headers'\n | /Users/DekaKisaLove/.rvm/gems/ruby-2.6.1@closedwon/gems/twitter-6.2.0/lib/twitter/rest/request.rb:62:in `set_multipart_options!'\n | /Users/DekaKisaLove/.rvm/gems/ruby-2.6.1@closedwon/gems/twitter-6.2.0/lib/twitter/rest/request.rb:28:in `initialize'\n | /Users/DekaKisaLove/.rvm/gems/ruby-2.6.1@closedwon/gems/twitter-6.2.0/lib/twitter/rest/utils.rb:50:in `new'\n | /Users/DekaKisaLove/.rvm/gems/ruby-2.6.1@closedwon/gems/twitter-6.2.0/lib/twitter/rest/utils.rb:50:in `perform_request'\n | /Users/DekaKisaLove/.rvm/gems/ruby-2.6.1@closedwon/gems/twitter-6.2.0/lib/twitter/rest/utils.rb:72:in `perform_request_with_object'\n | /Users/DekaKisaLove/.rvm/gems/ruby-2.6.1@closedwon/gems/twitter-6.2.0/lib/twitter/rest/utils.rb:64:in `perform_post_with_object'\n | /Users/DekaKisaLove/.rvm/gems/ruby-2.6.1@closedwon/gems/twitter-6.2.0/lib/twitter/rest/tweets.rb:155:in `update!'\n | /Users/DekaKisaLove/.rvm/gems/ruby-2.6.1@closedwon/gems/twitter-6.2.0/lib/twitter/rest/tweets.rb:126:in `update'\n</code></pre>\n\n<p>rfc2396_parser.rb:308</p>\n\n<pre><code>  def escape(str, unsafe = @regexp[:UNSAFE])\n  unless unsafe.kind_of?(Regexp)\n    # perhaps unsafe is String object\n    unsafe = Regexp.new(\"[#{Regexp.quote(unsafe)}]\", false)\n  end\n  str.gsub(unsafe) do\n    us = $&amp;\n    tmp = ''\n    us.each_byte do |uc|\n      tmp &lt;&lt; sprintf('%%%02X', uc)\n    end\n    tmp\n  end.force_encoding(Encoding::US_ASCII)\nend\n</code></pre>\n"}, {"tags": ["ruby", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 835, "user_id": 1026901, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6d43afae270038a0a826f25f29183ce4?s=128&d=identicon&r=PG", "display_name": "Btuman", "link": "https://stackoverflow.com/users/1026901/btuman"}, "is_accepted": true, "score": 0, "last_activity_date": 1563902119, "creation_date": 1563902119, "answer_id": 57169218, "question_id": 57169217, "link": "https://stackoverflow.com/questions/57169217/how-to-require-chained-local-gems-in-a-ruby-appliction/57169218#57169218", "title": "How to require chained local gems in a ruby appliction", "body": "<p>The fix is adding a line in <code>Gem A</code>'s <code>Gemfile</code> requiring the local version of <code>Gem C</code>. </p>\n"}], "owner": {"reputation": 835, "user_id": 1026901, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/6d43afae270038a0a826f25f29183ce4?s=128&d=identicon&r=PG", "display_name": "Btuman", "link": "https://stackoverflow.com/users/1026901/btuman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11, "favorite_count": 0, "accepted_answer_id": 57169218, "answer_count": 1, "score": 0, "last_activity_date": 1563902119, "creation_date": 1563902119, "question_id": 57169217, "link": "https://stackoverflow.com/questions/57169217/how-to-require-chained-local-gems-in-a-ruby-appliction", "title": "How to require chained local gems in a ruby appliction", "body": "<p>I am working on developing multiple interdependent gems. Usually I use <a href=\"https://stackoverflow.com/questions/4487948/how-can-i-specify-a-local-gem-in-my-gemfile\">this method</a> for using a local version of <code>Gem B</code>, which <code>Gem A</code> depends on. When I was working on some changes that also changed part of <code>Gem C</code> which is a <code>Gem B</code> dependency I got the following error when trying to run <code>Gem A</code>:</p>\n\n<p><code>'require': cannot load such file -- Gem C</code></p>\n\n<p><code>Gem B</code> has that local version required. </p>\n\n<p>How can I get around this error?</p>\n"}, {"tags": ["ruby", "jruby", "win32ole"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1563901558, "post_id": 57169038, "comment_id": 100851575, "body": "You could make a split application but that sounds pretty ugly. Why not just use MRI if you&#39;re constrained?"}, {"owner": {"reputation": 292, "user_id": 1487479, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1aa899e9772cdd977b9d0f60e1ba9daf?s=128&d=identicon&r=PG", "display_name": "Nathan", "link": "https://stackoverflow.com/users/1487479/nathan"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1564021102, "post_id": 57169038, "comment_id": 100895934, "body": "Database drivers are written in Java"}], "owner": {"reputation": 292, "user_id": 1487479, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1aa899e9772cdd977b9d0f60e1ba9daf?s=128&d=identicon&r=PG", "display_name": "Nathan", "link": "https://stackoverflow.com/users/1487479/nathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563901352, "creation_date": 1563901352, "question_id": 57169038, "link": "https://stackoverflow.com/questions/57169038/call-jruby-from-mri", "title": "Call JRuby from MRI?", "body": "<p>I have a script that uses Win32OLE gem interact with a Microsoft Excel Spreadsheet but also needs to connect to Java database connection (JDBC).  </p>\n\n<p>The JRuby Win32OLE gem has several open issues (<a href=\"https://github.com/enebo/jruby-win32ole/issues\" rel=\"nofollow noreferrer\">https://github.com/enebo/jruby-win32ole/issues</a>) that doesn't allow me connect to Excel spreadsheet so I am wondering is it possible to write my Excel interaction with plain Ruby (MRI) and just call JRuby when I need to do my database interaction?</p>\n"}, {"tags": ["ruby", "ssh"], "comments": [{"owner": {"reputation": 4916, "user_id": 1507691, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/NRfxQ.jpg?s=128&g=1", "display_name": "Zak", "link": "https://stackoverflow.com/users/1507691/zak"}, "edited": false, "score": 0, "creation_date": 1563899038, "post_id": 57168441, "comment_id": 100850463, "body": "Don&#39;t <code>cd</code> -- Just run <code>&#47;home&#47;csrhub&#47;git&#47;csrhub-api&#47;bin&#47;restart</code>"}, {"owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "reply_to_user": {"reputation": 4916, "user_id": 1507691, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/NRfxQ.jpg?s=128&g=1", "display_name": "Zak", "link": "https://stackoverflow.com/users/1507691/zak"}, "edited": false, "score": 0, "creation_date": 1563899159, "post_id": 57168441, "comment_id": 100850514, "body": "@Zak Same, still doesn&#39;t work. I get the same error :("}, {"owner": {"reputation": 4343, "user_id": 202914, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qXW6e.jpg?s=128&g=1", "display_name": "phil pirozhkov", "link": "https://stackoverflow.com/users/202914/phil-pirozhkov"}, "edited": false, "score": 0, "creation_date": 1563901806, "post_id": 57168441, "comment_id": 100851669, "body": "Check what is in the <code>.bashrc</code> on your server, it might have something ruby-specific. Replicate that to <code>.bash_profile</code>. There&#39;s a difference between running interactively and non-interactively."}, {"owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "reply_to_user": {"reputation": 4343, "user_id": 202914, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/qXW6e.jpg?s=128&g=1", "display_name": "phil pirozhkov", "link": "https://stackoverflow.com/users/202914/phil-pirozhkov"}, "edited": false, "score": 0, "creation_date": 1563904208, "post_id": 57168441, "comment_id": 100852734, "body": "@philpirozhkov  <a href=\"https://docs.google.com/document/d/1NVhu3Wju6m4LpB_0EUwH9Gp7wnIbkXABq_DonR4oBvM/edit?usp=sharing\" rel=\"nofollow noreferrer\">docs.google.com/document/d/&hellip;</a>  <a href=\"https://docs.google.com/document/d/1I0rZw38WQBERqBIOGHbIK-za5bQB19h64MEjmH2vr1A/edit?usp=sharing\" rel=\"nofollow noreferrer\">docs.google.com/document/d/&hellip;</a>"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1563904453, "post_id": 57168441, "comment_id": 100852841, "body": "Seems like a <code>PATH</code> issue. The <code>PATH</code> for your <code>ssh-net</code> shell session is not the same as for your Putty session. This may be the reason the <code>bundle</code> command can not be found."}, {"owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1563904690, "post_id": 57168441, "comment_id": 100852950, "body": "@Casper Yes, you  are right. But where does this difference come from and how to fix it?"}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1563904799, "post_id": 57168441, "comment_id": 100852994, "body": "This should get you running again: <a href=\"https://stackoverflow.com/questions/6854055/net-ssh-and-remote-environment\" title=\"net ssh and remote environment\">stackoverflow.com/questions/6854055/&hellip;</a>"}, {"owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1563906228, "post_id": 57168441, "comment_id": 100853638, "body": "@Casper  Still don&#39;t know how to load the missing paths to the PATH var. And how putty somehow loads it."}], "answers": [{"tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 2, "last_activity_date": 1563918730, "last_edit_date": 1563918730, "creation_date": 1563907045, "answer_id": 57170311, "question_id": 57168441, "link": "https://stackoverflow.com/questions/57168441/cant-run-ruby-script-via-gem-ssh-net/57170311#57170311", "title": "Cant run Ruby script via gem &quot;ssh-net&quot;", "body": "<p>The problem is in your <code>ssh.exec!</code> call. <code>Net::SSH</code> does not use a <em>login shell</em> to run your commands. A login shell is <a href=\"https://stackoverflow.com/a/416931/823617\">required for Bash to execute <code>.bash_profile</code></a>.</p>\n\n<p>Since your rbenv setup is in <code>.bash_profile</code>, your <code>exec!</code> call will be missing your full Ruby environment, and therefore running <code>bundle</code> later in you <code>restart</code> script will fail.</p>\n\n<p>The solution should be to manually execute <code>.bash_profile</code>, so that rbenv gets loaded:</p>\n\n<pre><code>output = ssh.exec!(\"source ~/.bash_profile; ...rest of commands...\")\n</code></pre>\n\n<p>More information and other proposals here:<br>\n<a href=\"https://stackoverflow.com/questions/6854055/net-ssh-and-remote-environment\">net-ssh and remote environment</a></p>\n"}], "owner": {"reputation": 2181, "user_id": 5598574, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/aUJPQ.jpg?s=128&g=1", "display_name": "Hairi", "link": "https://stackoverflow.com/users/5598574/hairi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 57170311, "answer_count": 1, "score": 1, "last_activity_date": 1563918730, "creation_date": 1563898884, "last_edit_date": 1563904782, "question_id": 57168441, "link": "https://stackoverflow.com/questions/57168441/cant-run-ruby-script-via-gem-ssh-net", "title": "Cant run Ruby script via gem &quot;ssh-net&quot;", "body": "<p>I am using gem <a href=\"http://net-ssh.github.io/net-ssh/\" rel=\"nofollow noreferrer\">net-ssh</a>.</p>\n\n<p>The connection is established. I am able to run some simple scripts(like \"pwd\", \"ls\", etc.) successfully, but when I run the \"restart\" script I get an error.</p>\n\n<p>Here is a snippet:</p>\n\n<pre><code>output = ssh.exec!(\"cd /home/csrhub/git/csrhub-api; ./bin/restart\")\nputs \"#{output}\"\n</code></pre>\n\n<p>And the output:</p>\n\n<blockquote>\n  <p>./bin/restart:7:in <code>exec': No such file or directory - bundle (Errno::ENOENT)\n          from ./bin/restart:7:in</code>'\n  Environment determined as \"development\" based on the .environment file.\n  Loading application.yml</p>\n</blockquote>\n\n<p>And here is the script where the error occurs.</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire 'yaml'\nrequire_relative '../app/models/environment.rb'\nconfig = Environment.config('application')\n\nexec \"bundle exec pumactl --control-url tcp://127.0.0.1:#{config['control_port']} --control-token #{config['control_token']} phased-restart\"\n</code></pre>\n\n<p>Connecting via <a href=\"https://www.putty.org/\" rel=\"nofollow noreferrer\">Putty</a>, when I run the same command it gets executed without any problems.</p>\n\n<p><em>EDIT</em></p>\n\n<p>The PATH variable is different when I Putty:</p>\n\n<blockquote>\n  <p>/home/csrhub/.rbenv/shims:/home/csrhub/.rbenv/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin</p>\n</blockquote>\n\n<p>And when I run with net-ssh PATH is:</p>\n\n<blockquote>\n  <p>/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "activeadmin"], "comments": [{"owner": {"reputation": 1141, "user_id": 1404905, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/IYSNE.jpg?s=128&g=1", "display_name": "beniutek", "link": "https://stackoverflow.com/users/1404905/beniutek"}, "edited": false, "score": 0, "creation_date": 1563896032, "post_id": 57167274, "comment_id": 100848885, "body": "do you have any custom controllers related to devise? (like sessions_controller.rb) If so, please post them as well"}, {"owner": {"reputation": 1141, "user_id": 1404905, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/IYSNE.jpg?s=128&g=1", "display_name": "beniutek", "link": "https://stackoverflow.com/users/1404905/beniutek"}, "edited": false, "score": 0, "creation_date": 1563896105, "post_id": 57167274, "comment_id": 100848933, "body": "also seems like this question might help you: <a href=\"https://stackoverflow.com/questions/30249740/how-do-i-use-devise-and-activeadmin-for-the-same-user-model\" title=\"how do i use devise and activeadmin for the same user model\">stackoverflow.com/questions/30249740/&hellip;</a>"}, {"owner": {"reputation": 47, "user_id": 11825504, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ipTIegEK8fY/AAAAAAAAAAI/AAAAAAAAAV0/x9WJ6eBOyIM/photo.jpg?sz=128", "display_name": "Amal T S", "link": "https://stackoverflow.com/users/11825504/amal-t-s"}, "reply_to_user": {"reputation": 1141, "user_id": 1404905, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/IYSNE.jpg?s=128&g=1", "display_name": "beniutek", "link": "https://stackoverflow.com/users/1404905/beniutek"}, "edited": false, "score": 0, "creation_date": 1563896716, "post_id": 57167274, "comment_id": 100849299, "body": "@beniutek no i don&#39;t have any other custom controller i have a users_controller but there is no code in it."}, {"owner": {"reputation": 47, "user_id": 11825504, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ipTIegEK8fY/AAAAAAAAAAI/AAAAAAAAAV0/x9WJ6eBOyIM/photo.jpg?sz=128", "display_name": "Amal T S", "link": "https://stackoverflow.com/users/11825504/amal-t-s"}, "reply_to_user": {"reputation": 1141, "user_id": 1404905, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/IYSNE.jpg?s=128&g=1", "display_name": "beniutek", "link": "https://stackoverflow.com/users/1404905/beniutek"}, "edited": false, "score": 0, "creation_date": 1563896848, "post_id": 57167274, "comment_id": 100849367, "body": "@beniutek that question seems to be helpful. Thanks i will get back to you after trying this tomorrow."}, {"owner": {"reputation": 47, "user_id": 11825504, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ipTIegEK8fY/AAAAAAAAAAI/AAAAAAAAAV0/x9WJ6eBOyIM/photo.jpg?sz=128", "display_name": "Amal T S", "link": "https://stackoverflow.com/users/11825504/amal-t-s"}, "reply_to_user": {"reputation": 1141, "user_id": 1404905, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/IYSNE.jpg?s=128&g=1", "display_name": "beniutek", "link": "https://stackoverflow.com/users/1404905/beniutek"}, "edited": false, "score": 0, "creation_date": 1563940462, "post_id": 57167274, "comment_id": 100862238, "body": "@beniutek I want to implement roles in it can you suggest a way on how to achieve that ? i want hr,admin,manager to go to the admin panel."}, {"owner": {"reputation": 1141, "user_id": 1404905, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/IYSNE.jpg?s=128&g=1", "display_name": "beniutek", "link": "https://stackoverflow.com/users/1404905/beniutek"}, "edited": false, "score": 0, "creation_date": 1564042974, "post_id": 57167274, "comment_id": 100903314, "body": "My first guess would be to use can can gem, check out this link on the devise wiki on how to approach this problem: <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Integrate-with-CanCan-for-roles-management\" rel=\"nofollow noreferrer\">github.com/plataformatec/devise/wiki/&hellip;</a>"}], "owner": {"reputation": 47, "user_id": 11825504, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ipTIegEK8fY/AAAAAAAAAAI/AAAAAAAAAV0/x9WJ6eBOyIM/photo.jpg?sz=128", "display_name": "Amal T S", "link": "https://stackoverflow.com/users/11825504/amal-t-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 141, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1563894766, "creation_date": 1563894766, "question_id": 57167274, "link": "https://stackoverflow.com/questions/57167274/how-to-seperate-two-devise-logins-from-user-and-admin", "title": "How to seperate two devise logins from user and admin", "body": "<p>I have a User model which i have used devise for authentication and then i installed active admin gem. It creates another login. My problem is that when i try to go into localhost:3000/admin it first redirects me to the first devise i created for the User model(users/sign_in) after i give a valid email and password then it will redirect me to the active admin login . I have used the default AdminUser model with active admin.</p>\n\n<p>I am new so don't know how to configure the routes.</p>\n\n<pre><code> Rails.application.routes.draw do\n      devise_for :admin_users, ActiveAdmin::Devise.config\n      ActiveAdmin.routes(self)\n      devise_for :users\n      get 'activities/index'\n      get 'projects/index'\n      get 'activities/new'\n      resources :activities\n      # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\n      root 'dashboard#index'\n    end\n</code></pre>\n\n<p>First i need to stop redirecting to users/sign_in on page load. If i give localhost:3000/admin in browser path and don't redirect to user dashboard when logged in as admin.Thanks.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": true, "score": 2, "last_activity_date": 1563894571, "creation_date": 1563894571, "answer_id": 57167208, "question_id": 57167012, "link": "https://stackoverflow.com/questions/57167012/what-does-dir-do/57167208#57167208", "title": "What does Dir [ ] do?", "body": "<p><code>Dir[]</code> will return array of paths which is similar to <code>Dir.glob</code></p>\n\n<p>You can read more about it <a href=\"https://ruby-doc.org/core-2.5.1/Dir.html#method-c-glob\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 102, "user_id": 7570287, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/764290a2566c6de8e8c45991f8bff495?s=128&d=identicon&r=PG&f=1", "display_name": "MondQ", "link": "https://stackoverflow.com/users/7570287/mondq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 57167208, "answer_count": 1, "score": 0, "last_activity_date": 1563894571, "creation_date": 1563893954, "question_id": 57167012, "link": "https://stackoverflow.com/questions/57167012/what-does-dir-do", "title": "What does Dir [ ] do?", "body": "<p>I need to change some functionality in a Ruby script that somebody else wrote. I have never used Ruby before, but am very familiar with Python, which makes some things easier, however, I am struggling with the below code.</p>\n\n<p>I am familiar with join, and I figured out that *.mdb gets all files ending in .mdb, but can't figure out what the enclosing Dir[] does.</p>\n\n<p>Upon removing of Dir[] the output changes from a list of files simply to the string 'c:/*.mdb'.</p>\n\n<p>Would anybody be able to explain please?</p>\n\n<p><code>mdb_files = Dir[::File.join('C:/', '*.mdb')]</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1563892039, "post_id": 57166201, "comment_id": 100846493, "body": "What is the url of the page this form is showing on when producing this error?"}, {"owner": {"reputation": 874, "user_id": 8465412, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JiveN.jpg?s=128&g=1", "display_name": "Achy97", "link": "https://stackoverflow.com/users/8465412/achy97"}, "reply_to_user": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1563892692, "post_id": 57166201, "comment_id": 100846885, "body": "<a href=\"http://localhost:3000/user_crud/new\" rel=\"nofollow noreferrer\">localhost:3000/user_crud/new</a>"}], "answers": [{"comments": [{"owner": {"reputation": 874, "user_id": 8465412, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JiveN.jpg?s=128&g=1", "display_name": "Achy97", "link": "https://stackoverflow.com/users/8465412/achy97"}, "edited": false, "score": 0, "creation_date": 1563892131, "post_id": 57166309, "comment_id": 100846555, "body": "where and how should I add that ,I am a complete beginner in rails, modified code will be very helpful"}, {"owner": {"reputation": 132, "user_id": 2399744, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-G_DebSR9o7c/AAAAAAAAAAI/AAAAAAAAAog/ONbrqgeZvCA/photo.jpg?sz=128", "display_name": "Marcelo Barreto", "link": "https://stackoverflow.com/users/2399744/marcelo-barreto"}, "reply_to_user": {"reputation": 874, "user_id": 8465412, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JiveN.jpg?s=128&g=1", "display_name": "Achy97", "link": "https://stackoverflow.com/users/8465412/achy97"}, "edited": false, "score": 0, "creation_date": 1563892455, "post_id": 57166309, "comment_id": 100846750, "body": "How are your routes.rb?"}, {"owner": {"reputation": 874, "user_id": 8465412, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JiveN.jpg?s=128&g=1", "display_name": "Achy97", "link": "https://stackoverflow.com/users/8465412/achy97"}, "edited": false, "score": 0, "creation_date": 1563892723, "post_id": 57166309, "comment_id": 100846896, "body": "added routes content"}, {"owner": {"reputation": 132, "user_id": 2399744, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-G_DebSR9o7c/AAAAAAAAAAI/AAAAAAAAAog/ONbrqgeZvCA/photo.jpg?sz=128", "display_name": "Marcelo Barreto", "link": "https://stackoverflow.com/users/2399744/marcelo-barreto"}, "reply_to_user": {"reputation": 874, "user_id": 8465412, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JiveN.jpg?s=128&g=1", "display_name": "Achy97", "link": "https://stackoverflow.com/users/8465412/achy97"}, "edited": false, "score": 0, "creation_date": 1563892961, "post_id": 57166309, "comment_id": 100847042, "body": "Try something like, <code>form_for(@users, url: users_crud_path)</code>"}, {"owner": {"reputation": 874, "user_id": 8465412, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JiveN.jpg?s=128&g=1", "display_name": "Achy97", "link": "https://stackoverflow.com/users/8465412/achy97"}, "edited": false, "score": 0, "creation_date": 1563893049, "post_id": 57166309, "comment_id": 100847104, "body": "Now it gives -- No route matches {:action=&gt;&quot;show&quot;, :controller=&gt;&quot;user_crud&quot;}, missing required keys: [:id]"}, {"owner": {"reputation": 874, "user_id": 8465412, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JiveN.jpg?s=128&g=1", "display_name": "Achy97", "link": "https://stackoverflow.com/users/8465412/achy97"}, "edited": false, "score": 0, "creation_date": 1563893492, "post_id": 57166309, "comment_id": 100847365, "body": "Its working with url:&quot;/user_crud/&quot; but what is the url helper for that?"}, {"owner": {"reputation": 132, "user_id": 2399744, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-G_DebSR9o7c/AAAAAAAAAAI/AAAAAAAAAog/ONbrqgeZvCA/photo.jpg?sz=128", "display_name": "Marcelo Barreto", "link": "https://stackoverflow.com/users/2399744/marcelo-barreto"}, "reply_to_user": {"reputation": 874, "user_id": 8465412, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JiveN.jpg?s=128&g=1", "display_name": "Achy97", "link": "https://stackoverflow.com/users/8465412/achy97"}, "edited": false, "score": 0, "creation_date": 1563893822, "post_id": 57166309, "comment_id": 100847574, "body": "My mistake, try <code>user_crud_path</code>, Rails provides the paths to you, giving a string param is not a good pratice at all.  the command rails routes will show you all your application routes"}], "tags": [], "owner": {"reputation": 132, "user_id": 2399744, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-G_DebSR9o7c/AAAAAAAAAAI/AAAAAAAAAog/ONbrqgeZvCA/photo.jpg?sz=128", "display_name": "Marcelo Barreto", "link": "https://stackoverflow.com/users/2399744/marcelo-barreto"}, "is_accepted": false, "score": 0, "last_activity_date": 1563891785, "creation_date": 1563891785, "answer_id": 57166309, "question_id": 57166201, "link": "https://stackoverflow.com/questions/57166201/nomethoderror-in-usercrudnew-while-trying-to-create-new-record/57166309#57166309", "title": "NoMethodError in UserCrud#new while trying to create new record", "body": "<p>The error is on the form, you are not specifying the correct path. When not setting this option, Rails will look for the \"default path\", which in this case is <code>user_cruds_path</code></p>\n"}, {"tags": [], "owner": {"reputation": 874, "user_id": 8465412, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JiveN.jpg?s=128&g=1", "display_name": "Achy97", "link": "https://stackoverflow.com/users/8465412/achy97"}, "is_accepted": false, "score": 0, "last_activity_date": 1563894849, "last_edit_date": 1563894849, "creation_date": 1563893579, "answer_id": 57166882, "question_id": 57166201, "link": "https://stackoverflow.com/questions/57166201/nomethoderror-in-usercrudnew-while-trying-to-create-new-record/57166882#57166882", "title": "NoMethodError in UserCrud#new while trying to create new record", "body": "<p>form_for(@users, url: \"/user_crud/\") works , but it would be great if anyone suggests what is the suitable url helper <code>\"/user_crud/\"</code></p>\n\n<p>Edit:</p>\n\n<p>I got it from Marcelo's Comment and found the routes by command <code>rails routes</code>\nAnd found the url helper to be  <code>user_crud_index_url</code> for <code>\"/user_crud/\"</code></p>\n\n<p>So the final answer is:</p>\n\n<pre><code>form_for(@users,url: user_crud_index_url)\n</code></pre>\n"}], "owner": {"reputation": 874, "user_id": 8465412, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/JiveN.jpg?s=128&g=1", "display_name": "Achy97", "link": "https://stackoverflow.com/users/8465412/achy97"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1563894849, "creation_date": 1563891412, "last_edit_date": 1563892652, "question_id": 57166201, "link": "https://stackoverflow.com/questions/57166201/nomethoderror-in-usercrudnew-while-trying-to-create-new-record", "title": "NoMethodError in UserCrud#new while trying to create new record", "body": "<p>Hi I am running into problems while trying to new record its showing an error message which error is not present in my code-\nTHe error message-</p>\n\n<pre><code>undefined method `user_cruds_path' for #&lt;#&lt;Class:0x00007f403e3162f0&gt;:0x00007f403e3527a0&gt;\nDid you mean?  user_crud_path\nExtracted source (around line #8):       \n  &lt;h2&gt;Create User&lt;/h2&gt;\n\n  &lt;%= form_for(@users) do |f| %&gt;\n\n    &lt;%= render(:partial =&gt; 'form', :locals =&gt; {:f =&gt; f}) %&gt;\n\n\nRails.root: /home/ayan/Desktop/ror/q\n\nApplication Trace | Framework Trace | Full Trace\napp/views/user_crud/new.html.erb:8:in `_app_views_user_crud_new_html_erb___1837862909000615994_69956949154020'\nRequest\nParameters:\n\nNone\nToggle session dump\n_csrf_token: \"DChk63/c8Jl1+JamtZiB03rFYMC/kybhyZr0/JixXDo=\"\nflash: {\"discard\"=&gt;[], \"flashes\"=&gt;{\"notice\"=&gt;\"UserCrud updated successfully.\"}}\nsession_id: \"aa128a12236d1d8d94061ed5de21d7f1\"\n</code></pre>\n\n<p>Which is surprisingly some other request message , but the intended method call with url path helper <strong>\"user_cruds_path\"</strong> is not present-Its already corrected.\nI have already restarted the server but same problem</p>\n\n<blockquote>\n  <p>Here is my controller class-</p>\n</blockquote>\n\n<pre><code>class UserCrudController &lt; ApplicationController\n\n  def create\n    # Instantiate a new object using form parameters\n    @users = UserCrud.new(users_params)\n    #@users=UserCrud.new(:name=&gt;\"Ayan\",:email=&gt;\"ac@gmail.com\")\n    # Save the object\n    if @users.save\n      # If save succeeds, redirect to the index action\n      flash[:notice] = \"UserCrud created successfully.\"\n      redirect_to(\"/user_crud/index/\")\n    else\n      # If save fails, redisplay the form so user can fix problems\n      render('new')\n    end\n  end\n  def new\n    @users = UserCrud.new({:name =&gt; 'Default',:email=&gt;'deault@domain.ext'})\n  end\n</code></pre>\n\n<blockquote>\n  <p>My view for new Record creation:(new.html.erb)</p>\n</blockquote>\n\n<pre><code>&lt;% @page_title = \"New User\" %&gt;\n\n&lt;%= link_to(\"&lt;&lt; Back to List\", \"/user_crud/\", :class =&gt; 'back-link') %&gt;\n\n&lt;div class=\"users new\"&gt;\n  &lt;h2&gt;Create User&lt;/h2&gt;\n\n  &lt;%= form_for(@users) do |f| %&gt;\n\n    &lt;%= render(:partial =&gt; 'form', :locals =&gt; {:f =&gt; f}) %&gt;\n\n    &lt;div class=\"form-buttons\"&gt;\n      &lt;%= f.submit(\"Create User\") %&gt;\n    &lt;/div&gt;\n\n\n\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>routees.rb</strong></p>\n\n<pre><code>      resources :user_crud do\n    member do\n      get :delete\n    end\n  end\n</code></pre>\n\n<p>Its aweird to see the error message referring to a path name that is not present at all-\nAny help is very much appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin"], "answers": [{"tags": [], "owner": {"reputation": 1148, "user_id": 6591347, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/muykQ.png?s=128&g=1", "display_name": "Oleksii Filonenko", "link": "https://stackoverflow.com/users/6591347/oleksii-filonenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1563893004, "last_edit_date": 1563893004, "creation_date": 1563892482, "answer_id": 57166542, "question_id": 57165777, "link": "https://stackoverflow.com/questions/57165777/rails-5-2-active-admin-add-links-to-index-page/57166542#57166542", "title": "Rails 5.2, Active Admin add links to index page", "body": "<p>Let's try a naive solution.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>resource.aasm.events({ permitted: true }, current_user).map(&amp;:name).each do |event|\n  item event, polymorphic_path([current_user.role, resource], action: event)\nend &amp;&amp; nil\n</code></pre>\n"}], "owner": {"reputation": 2036, "user_id": 1066183, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/71845161952bbfcb58f4e474164453ef?s=128&d=identicon&r=PG", "display_name": "user1066183", "link": "https://stackoverflow.com/users/1066183/user1066183"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563893004, "creation_date": 1563890061, "question_id": 57165777, "link": "https://stackoverflow.com/questions/57165777/rails-5-2-active-admin-add-links-to-index-page", "title": "Rails 5.2, Active Admin add links to index page", "body": "<p>Using Rails 5.2.3, ActiveAdmin 2.1.0 and aasm 5.0.5 I want to create links for the permitted events for a resource managed by aasm.\nI want to show the links for the status change in the index page, it works with this code: </p>\n\n<pre><code>  index do\n    id_column\n    column :status\n\n    actions do |resource|\n      item 'pdf', pdf_master_fine_path(resource)\n\n      resource.aasm.events({ permitted: true }, current_user).map(&amp;:name).each do |event|\n        item event, polymorphic_path([current_user.role, resource], action: event)\n      end\n    end\n</code></pre>\n\n<p>In the picture I show the result: the links are created but is printed the entire array.</p>\n\n<p><a href=\"https://i.stack.imgur.com/yO87S.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yO87S.jpg\" alt=\"enter image description here\"></a></p>\n\n<p>How can I solve? I don't want to print the entire array.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 42, "user_id": 10115402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fb9a3bf8c29c933f0207ea05a026be7?s=128&d=identicon&r=PG", "display_name": "user9185187", "link": "https://stackoverflow.com/users/10115402/user9185187"}, "edited": false, "score": 0, "creation_date": 1563889266, "post_id": 57165106, "comment_id": 100844739, "body": "yes it works, but same question what exactly to put there with respect to my view and controller code"}], "tags": [], "owner": {"reputation": 1322, "user_id": 11801415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/639b82f4bb7b8d9545d0fbc725cfcd36?s=128&d=identicon&r=PG&f=1", "display_name": "Lyzard Kyng", "link": "https://stackoverflow.com/users/11801415/lyzard-kyng"}, "is_accepted": false, "score": 2, "last_activity_date": 1563887953, "creation_date": 1563887953, "answer_id": 57165106, "question_id": 57164982, "link": "https://stackoverflow.com/questions/57164982/param-is-missing-or-the-value-is-empty-name-what-exact-value-to-put-in-require/57165106#57165106", "title": "param is missing or the value is empty: name -what exact value to put in require", "body": "<pre class=\"lang-rb prettyprint-override\"><code>def user_params\n  params.require(:user_crud).permit(:name, :email,:created_at,:updated_at)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 42, "user_id": 10115402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fb9a3bf8c29c933f0207ea05a026be7?s=128&d=identicon&r=PG", "display_name": "user9185187", "link": "https://stackoverflow.com/users/10115402/user9185187"}, "edited": false, "score": 0, "creation_date": 1563889197, "post_id": 57165226, "comment_id": 100844703, "body": "it works-can you please clarify exactly what parameter to put there , docs are confusing me ?"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 42, "user_id": 10115402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fb9a3bf8c29c933f0207ea05a026be7?s=128&d=identicon&r=PG", "display_name": "user9185187", "link": "https://stackoverflow.com/users/10115402/user9185187"}, "edited": false, "score": 0, "creation_date": 1563889540, "post_id": 57165226, "comment_id": 100844912, "body": "@user9185187 Your model is <code>UserCrud</code> so form will submit params inside key <code>user_crud</code> which is needed to be permitted using <code>params.require(:user_crud)</code>"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 42, "user_id": 10115402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fb9a3bf8c29c933f0207ea05a026be7?s=128&d=identicon&r=PG", "display_name": "user9185187", "link": "https://stackoverflow.com/users/10115402/user9185187"}, "edited": false, "score": 0, "creation_date": 1563889609, "post_id": 57165226, "comment_id": 100844955, "body": "@user9185187 You can use <code>params.require(:user_crud).permit!</code> if you are sure to permit all fields to be permitted."}, {"owner": {"reputation": 42, "user_id": 10115402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fb9a3bf8c29c933f0207ea05a026be7?s=128&d=identicon&r=PG", "display_name": "user9185187", "link": "https://stackoverflow.com/users/10115402/user9185187"}, "edited": false, "score": 0, "creation_date": 1563890111, "post_id": 57165226, "comment_id": 100845292, "body": "ok , that means I need to give the current model name in require()? and if the model name is multi-word then I need to break it down with underscores- Have I understood it correctly?"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 42, "user_id": 10115402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fb9a3bf8c29c933f0207ea05a026be7?s=128&d=identicon&r=PG", "display_name": "user9185187", "link": "https://stackoverflow.com/users/10115402/user9185187"}, "edited": false, "score": 0, "creation_date": 1563890175, "post_id": 57165226, "comment_id": 100845332, "body": "@user9185187 yes correct, no need to break, it mostly look like its conventional table name or you can inspect it through params :)"}, {"owner": {"reputation": 1322, "user_id": 11801415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/639b82f4bb7b8d9545d0fbc725cfcd36?s=128&d=identicon&r=PG&f=1", "display_name": "Lyzard Kyng", "link": "https://stackoverflow.com/users/11801415/lyzard-kyng"}, "edited": false, "score": 1, "creation_date": 1563891943, "post_id": 57165226, "comment_id": 100846438, "body": "@ray no, there&#39;s no use of model name. Controller knows nothing about the model when submitting a form, so hash name in <code>params</code> is constructed after controller&#39;s name, you can read details <a href=\"https://api.rubyonrails.org/classes/ActionController/ParamsWrapper.html\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 42, "user_id": 10115402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fb9a3bf8c29c933f0207ea05a026be7?s=128&d=identicon&r=PG", "display_name": "user9185187", "link": "https://stackoverflow.com/users/10115402/user9185187"}, "reply_to_user": {"reputation": 1322, "user_id": 11801415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/639b82f4bb7b8d9545d0fbc725cfcd36?s=128&d=identicon&r=PG&f=1", "display_name": "Lyzard Kyng", "link": "https://stackoverflow.com/users/11801415/lyzard-kyng"}, "edited": false, "score": 0, "creation_date": 1563896906, "post_id": 57165226, "comment_id": 100849397, "body": "ok that means it is the controller&#39;s name (divided by underscore in case of multi word) to be put in require() method , right? @LyzardKyng"}, {"owner": {"reputation": 1322, "user_id": 11801415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/639b82f4bb7b8d9545d0fbc725cfcd36?s=128&d=identicon&r=PG&f=1", "display_name": "Lyzard Kyng", "link": "https://stackoverflow.com/users/11801415/lyzard-kyng"}, "edited": false, "score": 0, "creation_date": 1563898667, "post_id": 57165226, "comment_id": 100850297, "body": "yes, but let me clarify a bit. Rails uses <a href=\"https://en.wikibooks.org/wiki/Ruby_on_Rails/Getting_Started/Convention_Over_Configuration\" rel=\"nofollow noreferrer\">Convention over Configuration paradigm</a>, so it requires less code when you follow the rules. Controller name should be in plural form, so in your case (<i>I think</i>, it&#39;s up to you of course) controller should be named simply <code>UsersController</code>, its source then should be in <code>users_controller.rb</code>, model will be <code>User</code> and db table <code>users</code>. Then <code>params</code> submitted by the view will include <code>user</code> hash (in singular) because you edit and update single entity."}, {"owner": {"reputation": 1322, "user_id": 11801415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/639b82f4bb7b8d9545d0fbc725cfcd36?s=128&d=identicon&r=PG&f=1", "display_name": "Lyzard Kyng", "link": "https://stackoverflow.com/users/11801415/lyzard-kyng"}, "edited": false, "score": 0, "creation_date": 1563899380, "post_id": 57165226, "comment_id": 100850619, "body": "<i>continued</i> Controller actions that operate with single object (new, edit, update) and corresponding view/partial should use <code>@user</code> variable, whilst index action should use <code>@users</code>. The former <code>find</code> looks up model by <code>:id</code> and, because it is a primary key, there&#39;ll be no more than one user. The latter usually use <code>Model.all</code>. So <i>programming</i> language resembles very close to <i>natural</i> language."}], "tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": true, "score": 4, "last_activity_date": 1563888366, "creation_date": 1563888366, "answer_id": 57165226, "question_id": 57164982, "link": "https://stackoverflow.com/questions/57164982/param-is-missing-or-the-value-is-empty-name-what-exact-value-to-put-in-require/57165226#57165226", "title": "param is missing or the value is empty: name -what exact value to put in require", "body": "<p>Just make following changes in your controller,</p>\n\n<pre><code>def user_params\n  params.require(:user_crud).permit(:name, :email)\nend\n</code></pre>\n\n<p>As your <code>params</code> contains form inputs under <code>user_crud</code> key.</p>\n"}, {"tags": [], "owner": {"reputation": 16, "user_id": 4783474, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2lkm56VLRMk/AAAAAAAAAAI/AAAAAAAAAgo/Rg9io6HSsw0/photo.jpg?sz=128", "display_name": "Tibor Kreiter", "link": "https://stackoverflow.com/users/4783474/tibor-kreiter"}, "is_accepted": false, "score": 0, "last_activity_date": 1563889737, "last_edit_date": 1563889737, "creation_date": 1563889389, "answer_id": 57165549, "question_id": 57164982, "link": "https://stackoverflow.com/questions/57164982/param-is-missing-or-the-value-is-empty-name-what-exact-value-to-put-in-require/57165549#57165549", "title": "param is missing or the value is empty: name -what exact value to put in require", "body": "<p>You have to change this code:</p>\n\n<pre><code>def users_params\n  params.require(:name).permit(\n    :name, :email,:created_at,:updated_at\n  )\nend\n</code></pre>\n\n<p>to</p>\n\n<pre><code>private\ndef user_params\n  params.require(:user_crud).permit(:name, :email)\nend\n</code></pre>\n\n<p>in your controller.</p>\n"}, {"tags": [], "owner": {"reputation": 132, "user_id": 2399744, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-G_DebSR9o7c/AAAAAAAAAAI/AAAAAAAAAog/ONbrqgeZvCA/photo.jpg?sz=128", "display_name": "Marcelo Barreto", "link": "https://stackoverflow.com/users/2399744/marcelo-barreto"}, "is_accepted": false, "score": 0, "last_activity_date": 1563891564, "creation_date": 1563891564, "answer_id": 57166244, "question_id": 57164982, "link": "https://stackoverflow.com/questions/57164982/param-is-missing-or-the-value-is-empty-name-what-exact-value-to-put-in-require/57166244#57166244", "title": "param is missing or the value is empty: name -what exact value to put in require", "body": "<p>Just to explain, when setting your \"resource_params\", requiring a param will search for the root of your json. For example:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def resource_params\n  params.require(:foo).permit(:bar)\nend\n</code></pre>\n\n<p>Your JSON should looks like this:</p>\n\n<pre><code>{\n  \"foo\": {\n    \"bar\": 123\n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 42, "user_id": 10115402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fb9a3bf8c29c933f0207ea05a026be7?s=128&d=identicon&r=PG", "display_name": "user9185187", "link": "https://stackoverflow.com/users/10115402/user9185187"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 0, "accepted_answer_id": 57165226, "answer_count": 4, "score": 0, "last_activity_date": 1563891564, "creation_date": 1563887509, "last_edit_date": 1563888450, "question_id": 57164982, "link": "https://stackoverflow.com/questions/57164982/param-is-missing-or-the-value-is-empty-name-what-exact-value-to-put-in-require", "title": "param is missing or the value is empty: name -what exact value to put in require", "body": "<p>I know there is so much docs regarding <code>params.require()</code> and I have indeed tried every possible ways to debug the error but its unavoidable -whatever I put in <code>require</code>, it still gives the same error!</p>\n\n<blockquote>\n  <p>Here is the error,</p>\n</blockquote>\n\n<pre><code>ActionController::ParameterMissing in UserCrudController#update\n\nRequest\nParameters:\n\n{\"utf8\"=&gt;\"\u2713\",\n \"_method\"=&gt;\"patch\",\n \"authenticity_token\"=&gt;\"QknxMRZg8aFEkOatw9uxulLUSiEUXgBFQ4iFbbJHIfgvGCtTq2oI3FI7W8eq5Eqeo3Z3dEPWK2IK2XH96f4faQ==\",\n \"user_crud\"=&gt;{\"name\"=&gt;\"Chow\", \"email\"=&gt;\"ac@gmail.com\"},\n \"commit\"=&gt;\"Update User\",\n \"id\"=&gt;\"4\"}\n</code></pre>\n\n<blockquote>\n  <p>And my Controller section:</p>\n</blockquote>\n\n<pre><code>class UserCrudController &lt; ApplicationController\n\n  def update\n    # Find a new object using form parameters\n    @users = UserCrud.find(params[:id])\n\n    # Update the object\n    if @users.update_attributes(users_params)\n      # If save succeeds, redirect to the show action\n      flash[:notice] = \"UserCrud updated successfully.\"\n      redirect_to(user_crud_path(@users))\n    else\n      # If save fails, redisplay the form so user can fix problems\n      render('edit')\n    end\n  end\n\n  def edit\n    @users=UserCrud.find(params[:id])\n  end\n\n  def users_params\n    params.require(:name).permit(:name, :email,:created_at,:updated_at)\n  end\n</code></pre>\n\n<blockquote>\n  <p>I am using the model as:</p>\n</blockquote>\n\n<pre><code>class UserCrud &lt; ApplicationRecord\n    validates_presence_of :name\n    validates_presence_of :email\nend\n</code></pre>\n\n<blockquote>\n  <p>Now the View is (edit.html.erb):</p>\n</blockquote>\n\n<pre><code>&lt;% @page_title = \"Update User\" %&gt;\n\n&lt;%= link_to(\"&lt;&lt; Back to List\", user_crud_path, :class =&gt; 'back-link') %&gt;\n\n&lt;div class=\"users edit\"&gt;\n  &lt;h2&gt;Update User&lt;/h2&gt;\n\n  &lt;%= form_for(@users) do |f| %&gt;\n\n    &lt;%= render(:partial =&gt; 'form', :locals =&gt; {:f =&gt; f}) %&gt;\n\n    &lt;div class=\"form-buttons\"&gt;\n      &lt;%= f.submit(\"Update User\") %&gt;\n    &lt;/div&gt;\n\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "gitlab", "gitlab-ci"], "comments": [{"owner": {"reputation": 13756, "user_id": 567762, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/908c9abc72ab86111a153b11cb584f26?s=128&d=identicon&r=PG", "display_name": "Jared Beck", "link": "https://stackoverflow.com/users/567762/jared-beck"}, "edited": false, "score": 0, "creation_date": 1563918500, "post_id": 57164699, "comment_id": 100858358, "body": "The error message says &quot;revspec &#39;origin/master&#39; not found&quot;. Do you have a remote named &quot;origin&quot;? Can you include the output of <code>git remote -v</code> in your question please?"}], "answers": [{"tags": [], "owner": {"reputation": 1040, "user_id": 2364710, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEABx.jpg?s=128&g=1", "display_name": "VorteXavier", "link": "https://stackoverflow.com/users/2364710/vortexavier"}, "is_accepted": false, "score": 4, "last_activity_date": 1566417357, "creation_date": 1566417357, "answer_id": 57598424, "question_id": 57164699, "link": "https://stackoverflow.com/questions/57164699/how-to-fix-ruggedreferenceerror-revspec-origin-master-not-found-on-gitlab/57598424#57598424", "title": "How to fix &#39;Rugged::ReferenceError: revspec &#39;origin/master&#39; not found&#39; on Gitlab CI", "body": "<p>I don't know if this is the best solution, but this worked for me:</p>\n\n<ul>\n<li>In your gitlab repo, go to settings -> CI/CD</li>\n<li><p>In the section General pipelines -> Git strategy for pipelines, mark the option <code>git clone</code> instead of <code>git fetch</code>\n<a href=\"https://i.stack.imgur.com/ddXYf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ddXYf.png\" alt=\"git clone\"></a></p></li>\n<li><p>I also had to add a <code>git fetch</code> command just above the <code>pronto</code> invocation:</p></li>\n</ul>\n\n<pre><code>pronto:\n  script:\n    - git fetch\n    - bundle exec pronto run -c origin/master --exit-code\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 6306308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45545788ffd820da848fb91d3f23872d?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Pavlovich", "link": "https://stackoverflow.com/users/6306308/roman-pavlovich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 951, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1566417357, "creation_date": 1563886633, "last_edit_date": 1563918350, "question_id": 57164699, "link": "https://stackoverflow.com/questions/57164699/how-to-fix-ruggedreferenceerror-revspec-origin-master-not-found-on-gitlab", "title": "How to fix &#39;Rugged::ReferenceError: revspec &#39;origin/master&#39; not found&#39; on Gitlab CI", "body": "<p>I'm trying to setup pronto for Gitlab CI, locally everything works fine, but when pronto runs on Gitlab CI \"Rugged::ReferenceError: revspec 'origin/master' not found\" error raising</p>\n\n<pre><code>cache:\n  paths:\n    - vendor/\n\nservices:\n  - name: mysql:8.0\n    command: [\"mysqld\", \"--character-set-server=utf8mb4\", \"--collation-server=utf8mb4_unicode_ci\", \"--default-authentication-plugin=mysql_native_password\"]\n\nvariables:\n  MYSQL_DATABASE: $MYSQL_DATABASE\n  MYSQL_ROOT_PASSWORD: $MYSQL_ROOT_PASSWORD\n  DB_USERNAME: $DB_USERNAME\n  DB_HOST: $DB_HOST\n  DISABLE_SPRING: 1\n\n\nbefore_script:\n  - cp config/database.yml.example config/database.yml\n  - apt-get update -qq &amp;&amp; apt-get install -y -qq cmake\n  - gem install bundler --no-document\n  - bundle check || bundle install --path vendor --jobs $(nproc)  \"${FLAGS[@]}\"\n\nspec:\n  script:\n    - bundle exec rspec\n\npronto:\n  script:\n    - bundle exec pronto run -c origin/master --exit-code\n\n</code></pre>\n\n<pre><code>Rugged::ReferenceError: revspec 'origin/master' not found\n  vendor/ruby/2.6.0/gems/pronto-0.10.0/lib/pronto/git/repository.rb:87:in `merge_base'\n  vendor/ruby/2.6.0/gems/pronto-0.10.0/lib/pronto/git/repository.rb:87:in `merge_base'\n  vendor/ruby/2.6.0/gems/pronto-0.10.0/lib/pronto/git/repository.rb:17:in `diff'\n  vendor/ruby/2.6.0/gems/pronto-0.10.0/lib/pronto.rb:62:in `run'\n  vendor/ruby/2.6.0/gems/pronto-0.10.0/lib/pronto/cli.rb:66:in `block in run'\n  vendor/ruby/2.6.0/gems/pronto-0.10.0/lib/pronto/cli.rb:64:in `chdir'\n  vendor/ruby/2.6.0/gems/pronto-0.10.0/lib/pronto/cli.rb:64:in `run'\n  vendor/ruby/2.6.0/gems/thor-0.20.3/lib/thor/command.rb:27:in `run'\n  vendor/ruby/2.6.0/gems/thor-0.20.3/lib/thor/invocation.rb:126:in `invoke_command'\n  vendor/ruby/2.6.0/gems/thor-0.20.3/lib/thor.rb:387:in `dispatch'\n  vendor/ruby/2.6.0/gems/thor-0.20.3/lib/thor/base.rb:466:in `start'\n  vendor/ruby/2.6.0/gems/pronto-0.10.0/bin/pronto:6:in `&lt;top (required)&gt;'\n  vendor/ruby/2.6.0/bin/pronto:23:in `load'\n  vendor/ruby/2.6.0/bin/pronto:23:in `&lt;top (required)&gt;'\n</code></pre>\n\n<p>I expect to run pronto on gitlab without Exceptions</p>\n"}, {"tags": ["ruby", "simple-form", "ruby-on-rails-6"], "comments": [{"owner": {"reputation": 1175, "user_id": 2861567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GRa02.jpg?s=128&g=1", "display_name": "quyetdc", "link": "https://stackoverflow.com/users/2861567/quyetdc"}, "edited": false, "score": 0, "creation_date": 1563928629, "post_id": 57164428, "comment_id": 100860336, "body": "what does current code show on your page after executing the js file?"}, {"owner": {"reputation": 27, "user_id": 9502649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a2ab484896b7d1f001b27e6f72245b2?s=128&d=identicon&r=PG&f=1", "display_name": "Eduardo", "link": "https://stackoverflow.com/users/9502649/eduardo"}, "reply_to_user": {"reputation": 1175, "user_id": 2861567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GRa02.jpg?s=128&g=1", "display_name": "quyetdc", "link": "https://stackoverflow.com/users/2861567/quyetdc"}, "edited": false, "score": 0, "creation_date": 1563972680, "post_id": 57164428, "comment_id": 100877462, "body": "I think I didn&#39;t understand your comment, it loads list o companies with checkboxes"}], "owner": {"reputation": 27, "user_id": 9502649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a2ab484896b7d1f001b27e6f72245b2?s=128&d=identicon&r=PG&f=1", "display_name": "Eduardo", "link": "https://stackoverflow.com/users/9502649/eduardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 26, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563892170, "creation_date": 1563885671, "last_edit_date": 1563892170, "question_id": 57164428, "link": "https://stackoverflow.com/questions/57164428/is-there-any-way-to-include-simple-form-fields-after-a-request", "title": "Is there any way to include simple form fields after a request?", "body": "<p>I'm using simple_form when the page loads the form is created, but I need and additional operation, I have to load a partial with multiple checkboxes, these correspond to data from a database, and the partial is rendered after the user click a button. </p>\n\n<p>To do this I'm using js.erb with escape javascript, to render the partial. I already tried load with simple form directly, but I realize it didn't work as I expected.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>$('.table-responsive.'+&lt;%=@category_id%&gt;).\n  html(\n    \"&lt;%= escape_javascript(render partial: 'backend/research_participants/research_participants',\n      locals: {companies: companies, category_id: category_id } ) %&gt;\"\n  )\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;% for company in @companies %&gt;\n  &lt;tr&gt;\n    &lt;td&gt;\n      &lt;%= check_box_tag \"#{category_id}company#{company.id}\",\n        company.id,\n        checked = false,\n        class: \"companies_check_#{category_id}\" %&gt;\n    &lt;/td&gt;\n    &lt;td&gt;&lt;%= company.trade_name %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= company.cnpj %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= company.contact&amp;.email %&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ruby-on-rails-5", "left-join"], "comments": [{"owner": {"reputation": 1257, "user_id": 4108555, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e4b39206bd7e7e23b3faa85b7cb1373c?s=128&d=identicon&r=PG&f=1", "display_name": "NN796", "link": "https://stackoverflow.com/users/4108555/nn796"}, "edited": false, "score": 0, "creation_date": 1563885798, "post_id": 57164427, "comment_id": 100842671, "body": "Share your code which you have tried."}, {"owner": {"reputation": 1257, "user_id": 4108555, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e4b39206bd7e7e23b3faa85b7cb1373c?s=128&d=identicon&r=PG&f=1", "display_name": "NN796", "link": "https://stackoverflow.com/users/4108555/nn796"}, "edited": false, "score": 0, "creation_date": 1563886224, "post_id": 57164427, "comment_id": 100842894, "body": "Table name is <code>product_clicks</code> or <code>product_counts</code>?"}, {"owner": {"reputation": 1266, "user_id": 7619578, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c4b8b0d6308975901d498601dc6ffc7f?s=128&d=identicon&r=PG&f=1", "display_name": "Int&#39;l Man Of Coding Mystery", "link": "https://stackoverflow.com/users/7619578/intl-man-of-coding-mystery"}, "edited": false, "score": 0, "creation_date": 1563895127, "post_id": 57164427, "comment_id": 100848358, "body": "Would something like this work? <code>Product.joins(:product_clicks).select(&#39;products.*, COALESCE(COUNT(product_clicks),0) AS click_count&#39;).where(product_clicks: {user_id: current_user.id }).order(&#39;click_count DESC&#39;)</code>. I had an instructor that told us to start on the model we want returned. So this way you could start on the product model in order to have products returned without having to use <code>#map</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1563888860, "post_id": 57164624, "comment_id": 100844466, "body": "I recall that a <code>where</code> query does not necessarily maintain the id order. Do you have docs that suggest it does? I could be wrong or out of date."}, {"owner": {"reputation": 1257, "user_id": 4108555, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e4b39206bd7e7e23b3faa85b7cb1373c?s=128&d=identicon&r=PG&f=1", "display_name": "NN796", "link": "https://stackoverflow.com/users/4108555/nn796"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1563889798, "post_id": 57164624, "comment_id": 100845082, "body": "@jvillian <code>order</code> clause needs to be mentioned separately. <a href=\"https://apidock.com/rails/ActiveRecord/QueryMethods/order\" rel=\"nofollow noreferrer\">apidock.com/rails/ActiveRecord/QueryMethods/order</a>"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1563890411, "post_id": 57164624, "comment_id": 100845478, "body": "So, this: <code>Product.where(id: p_ids)</code> may not maintain the order of <code>p_ids</code> and <code>products</code>, therefore, may not be ordered as intended. Yes? No?"}, {"owner": {"reputation": 1257, "user_id": 4108555, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e4b39206bd7e7e23b3faa85b7cb1373c?s=128&d=identicon&r=PG&f=1", "display_name": "NN796", "link": "https://stackoverflow.com/users/4108555/nn796"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1563890631, "post_id": 57164624, "comment_id": 100845606, "body": "@jvillian No. Thanks for the correction. I will update my answer shortly."}, {"owner": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "edited": false, "score": 0, "creation_date": 1563955436, "post_id": 57164624, "comment_id": 100867750, "body": "@NN796 It giving an only product which current user clicked not those who was never clicked. ex: if I have 100 product and I clicked only 10 of them then list only shows 10 product and not rest of them."}, {"owner": {"reputation": 1257, "user_id": 4108555, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e4b39206bd7e7e23b3faa85b7cb1373c?s=128&d=identicon&r=PG&f=1", "display_name": "NN796", "link": "https://stackoverflow.com/users/4108555/nn796"}, "reply_to_user": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "edited": false, "score": 0, "creation_date": 1563955895, "post_id": 57164624, "comment_id": 100868000, "body": "@AnshulRiyal You are saying: <code>if I have 100 product and I clicked only 10 of them then list only shows 10 product and not rest of them</code> Please clear your requirement and paste the query you are using?"}, {"owner": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "edited": false, "score": 0, "creation_date": 1563959731, "post_id": 57164624, "comment_id": 100870039, "body": "I&#39;m using this <code>ProductCount.joins(:product).where(user_id: current_user.id).order(count: :desc).map(&amp;:product)</code>  and yes its not showing rest of them thou its sorting what it giving."}, {"owner": {"reputation": 1257, "user_id": 4108555, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e4b39206bd7e7e23b3faa85b7cb1373c?s=128&d=identicon&r=PG&f=1", "display_name": "NN796", "link": "https://stackoverflow.com/users/4108555/nn796"}, "reply_to_user": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "edited": false, "score": 0, "creation_date": 1563970567, "post_id": 57164624, "comment_id": 100876145, "body": "@AnshulRiyal your requirement does not make sense to me. Your requirement was to show products which have click on them. But now you are saying that you want to show the products which have clicks plus the products which do not have clicks. Right?"}, {"owner": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "edited": false, "score": 0, "creation_date": 1563971214, "post_id": 57164624, "comment_id": 100876516, "body": "@NN796 It&#39;s mention in the question.. i need all the products but sorted in such a manner that most clicked but user comes. What exactly you didn&#39;t get?"}, {"owner": {"reputation": 1257, "user_id": 4108555, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e4b39206bd7e7e23b3faa85b7cb1373c?s=128&d=identicon&r=PG&f=1", "display_name": "NN796", "link": "https://stackoverflow.com/users/4108555/nn796"}, "reply_to_user": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "edited": false, "score": 0, "creation_date": 1563972740, "post_id": 57164624, "comment_id": 100877504, "body": "@AnshulRiyal you mentioned <code>Sort product on the basis of current user most clicks?</code>. If you want to show clicked and un-clicked products then can you please tell me if there is a relationship of the user(in your case <code>current_user</code>)  with the product table?"}, {"owner": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "edited": false, "score": 0, "creation_date": 1563975806, "post_id": 57164624, "comment_id": 100879238, "body": "@NN796 exactly, i want to sort product. This might help you <a href=\"https://stackoverflow.com/q/56669484/8662236\">stackoverflow.com/q/56669484/8662236</a> Thanks for your time thou :) Glad to see any optimized query for this."}], "tags": [], "owner": {"reputation": 1257, "user_id": 4108555, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e4b39206bd7e7e23b3faa85b7cb1373c?s=128&d=identicon&r=PG&f=1", "display_name": "NN796", "link": "https://stackoverflow.com/users/4108555/nn796"}, "is_accepted": false, "score": 1, "last_activity_date": 1563890790, "last_edit_date": 1563890790, "creation_date": 1563886406, "answer_id": 57164624, "question_id": 57164427, "link": "https://stackoverflow.com/questions/57164427/rails-sort-product-on-the-basis-of-current-user-most-clicks/57164624#57164624", "title": "&quot;Rails&quot; Sort product on the basis of current user most clicks?", "body": "<p>Here is a working query which will be faster:</p>\n\n<pre><code>ProductCount.joins(:product).where(user_id: current_user.id).order(count: :desc).map(&amp;:product)\n</code></pre>\n\n<p>or</p>\n\n<pre><code>ProductCount.includes(:product).where(user_id: current_user.id).order(count: :desc).map(&amp;:product)\n</code></pre>\n\n<p>The query with <code>includes</code> will be faster. Here is a <strong><a href=\"https://stackoverflow.com/questions/1208636/rails-include-vs-joins\">guide</a></strong> for difference between <code>joins</code> &amp; <code>includes</code>.</p>\n\n<p>Let me know if it worked.</p>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "edited": false, "score": 0, "creation_date": 1565159115, "post_id": 57165735, "comment_id": 101259170, "body": "This query didn&#39;t give all the products. suppose if i have 10 products and i and some other user clicked any 6 then it reject rest 4 products and provide only 6  products"}], "tags": [], "owner": {"reputation": 802, "user_id": 8728218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/376ec53188ea3ec0271198a862516657?s=128&d=identicon&r=PG&f=1", "display_name": "Dyaniyal Wilson", "link": "https://stackoverflow.com/users/8728218/dyaniyal-wilson"}, "is_accepted": false, "score": 1, "last_activity_date": 1563889957, "creation_date": 1563889957, "answer_id": 57165735, "question_id": 57164427, "link": "https://stackoverflow.com/questions/57164427/rails-sort-product-on-the-basis-of-current-user-most-clicks/57165735#57165735", "title": "&quot;Rails&quot; Sort product on the basis of current user most clicks?", "body": "<p>If you have ProductCount model then the below query should work.</p>\n\n<pre><code>ProductCount.includes(:product).where(user_id: user.id).order(counts: :desc).map(&amp;:product)\n</code></pre>\n"}], "owner": {"reputation": 121, "user_id": 8662236, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-KWTVuL7YyAY/AAAAAAAAAAI/AAAAAAAAABk/qbaw7pIIIqc/photo.jpg?sz=128", "display_name": "Anshul Riyal", "link": "https://stackoverflow.com/users/8662236/anshul-riyal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 172, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1563890790, "creation_date": 1563885668, "last_edit_date": 1563885948, "question_id": 57164427, "link": "https://stackoverflow.com/questions/57164427/rails-sort-product-on-the-basis-of-current-user-most-clicks", "title": "&quot;Rails&quot; Sort product on the basis of current user most clicks?", "body": "<p>Here I want to sort product list as per current user.\u2028\nThe user clicked the product most comes first in list and sort accordingly.</p>\n\n<p>\u2028Here I have table <code>product_counts</code> which store <code>user_id</code> <code>product_id</code> and <code>counts</code>.</p>\n\n<p>I tried this, but it taking a lot of queries to run which isn't good.</p>\n\n<pre><code>Product.all.sort_by{ |r|  r.product_clicks.where(user_id: user.id).first.try(:count).to_i }.reverse!\n</code></pre>\n"}, {"tags": ["ruby", "image-processing", "libgosu"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1563885855, "post_id": 57164403, "comment_id": 100842700, "body": "Any ruby binding to <a href=\"https://imagemagick.org\" rel=\"nofollow noreferrer\"><code>imagemagick</code></a> would do."}, {"owner": {"reputation": 689, "user_id": 10280525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ar3KN.jpg?s=128&g=1", "display_name": "Nifriz", "link": "https://stackoverflow.com/users/10280525/nifriz"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1563886612, "post_id": 57164403, "comment_id": 100843094, "body": "@AlekseiMatiushkin, this is perfect. Thank you!"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1563891273, "post_id": 57164403, "comment_id": 100845994, "body": "do you have any code example of your implementation you can post?  This question might be more useful with an answer instead of only a comment with link to a library."}], "answers": [{"tags": [], "owner": {"reputation": 689, "user_id": 10280525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ar3KN.jpg?s=128&g=1", "display_name": "Nifriz", "link": "https://stackoverflow.com/users/10280525/nifriz"}, "is_accepted": true, "score": 0, "last_activity_date": 1563953837, "creation_date": 1563953837, "answer_id": 57177615, "question_id": 57164403, "link": "https://stackoverflow.com/questions/57164403/map-image-and-get-pixel-color/57177615#57177615", "title": "Map image and get pixel color", "body": "<p>At the end I choose this GEM <code>chunky_png</code>, because it has no dependency from other gems or library and it's perfect to my needs:</p>\n\n<pre><code>@map_image = ChunkyPNG::Image.from_file('map_shape.png')                  \n\n# Test pixel color\nif @map_image[mouse_x - @main_image_x, mouse_y - @main_image_y] == ChunkyPNG::Color.rgb(255, 0,0)\n # Do something\nend\n</code></pre>\n"}], "owner": {"reputation": 689, "user_id": 10280525, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ar3KN.jpg?s=128&g=1", "display_name": "Nifriz", "link": "https://stackoverflow.com/users/10280525/nifriz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 57177615, "answer_count": 1, "score": 0, "last_activity_date": 1563953837, "creation_date": 1563885555, "question_id": 57164403, "link": "https://stackoverflow.com/questions/57164403/map-image-and-get-pixel-color", "title": "Map image and get pixel color", "body": "<p>I have 2 images, with same dimension and same picture, a shape.\nIn the first image (that I show on screen), the shape is monocromatic, in the second image, shape is mapped with different color.</p>\n\n<p>When I move the mouse, on the image, I want to show different text based on the color mapped on second (hidden) image. </p>\n\n<p>I don't want to map square area, but irregular areas, this is my problem.</p>\n\n<p>For example, when mouse cursor is on head (right image), I get color red on the left image (cached but not visualized) and I put a specific text.</p>\n\n<p><a href=\"https://i.stack.imgur.com/HzA7c.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HzA7c.png\" alt=\"Example Image\"></a></p>\n\n<p>How can I load second image an get pixel color? Gosu doesn't permit to get image info (only width and height).</p>\n\n<p>Any ideas? </p>\n"}, {"tags": ["json", "ruby", "puppet", "consul", "consul-kv"], "comments": [{"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1564096317, "post_id": 57163991, "comment_id": 100928522, "body": "It&#39;s unclear what manner of transformation you want to perform, for there is no clear mapping directly from Puppet DSL to JSON. Do you mean you want to generate a Puppet catalog, and express <i>that</i> in JSON format?  Such an endeavor often involves multiple files, and it is not well categorized as a conversion."}, {"owner": {"reputation": 417, "user_id": 3698532, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b5028dc3e9496571ce6d78c58a34f3a6?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Patsev", "link": "https://stackoverflow.com/users/3698532/anton-patsev"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1564117554, "post_id": 57163991, "comment_id": 100932201, "body": "Thanks for commented. I want to migrate from puppet variable to consul kv."}, {"owner": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1564142818, "post_id": 57163991, "comment_id": 100943694, "body": "Ok, I have added appropriate tags. But I&#39;m afraid that doesn&#39;t help me actually answer the question.  In particular, although Puppet manifests typically have high data content, they are not fundamentally data objects.  Rather, they are expressions of an imperative programming language.  It&#39;s not clear to me what correspondance you want between the contents of your site.pp and the JSON file you want to produce."}, {"owner": {"reputation": 417, "user_id": 3698532, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b5028dc3e9496571ce6d78c58a34f3a6?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Patsev", "link": "https://stackoverflow.com/users/3698532/anton-patsev"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1564159281, "post_id": 57163991, "comment_id": 100952497, "body": "I want to migrate from puppet variable to consul kv. I dont know how. May be write script for parse site.pp."}], "owner": {"reputation": 417, "user_id": 3698532, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b5028dc3e9496571ce6d78c58a34f3a6?s=128&d=identicon&r=PG&f=1", "display_name": "Anton Patsev", "link": "https://stackoverflow.com/users/3698532/anton-patsev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 148, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1564142518, "creation_date": 1563884068, "last_edit_date": 1564142518, "question_id": 57163991, "link": "https://stackoverflow.com/questions/57163991/how-convert-puppet-site-pp-to-json-on-ruby", "title": "How convert puppet site.pp to json on ruby?", "body": "<p>I have site.pp in puppet 3.8\nI want to convert site.pp to JSON.</p>\n\n<p>I found <a href=\"https://gist.github.com/atdt/3704340/be33cc0d1671dcbe8c4d4ede4cde3e0953546edf\" rel=\"nofollow noreferrer\">https://gist.github.com/atdt/3704340/be33cc0d1671dcbe8c4d4ede4cde3e0953546edf</a></p>\n\n<p><a href=\"https://www.gavinmogan.com/2012/03/14/output-pretty-json-puppet\" rel=\"nofollow noreferrer\">https://www.gavinmogan.com/2012/03/14/output-pretty-json-puppet</a></p>\n\n<p>But, i dont know how to convert site.pp to JSON</p>\n\n<pre><code>$commons                                           = hiera('commons', {})\n\n$post_repo_fqdn                                    = $commons['post_repo_fqdn']\n\n$team_frontend_proxy_exclusions = 'localhost|127.0.0.1|10.2.*|*.dev.local|*.local|*-dev.local|*-test.local'\n$use_team_frontend_proxy = true\n$team_frontend_proxy_host = '10.2.53.213'\n$update_history_job_delay_min = 10\n$enot_test_mode = true\n\n$team_frontend_web_client_external_url = 'team_frontend-web.local'\n$team_frontend_url='https://team_frontend-web.local/help'\n$team_frontend_admin_status_timeout = 30000\n\n$returns_ttl = 120\n\n$team_frontend_servers = {\n  rest_api =&gt; { server_port =&gt; $team_frontend['rest_api']['ports'], size =&gt; 20 },\n  web_app  =&gt; { server_port =&gt; $team_frontend['webapp']['ports'],   size =&gt; 20 },\n}\n</code></pre>\n\n<p>commons.yaml:</p>\n\n<pre><code>commons:\n  post_repo_fqdn                 : test-deploy1\n</code></pre>\n\n<p>if run (<a href=\"https://gist.github.com/atdt/3704340/be33cc0d1671dcbe8c4d4ede4cde3e0953546edf\" rel=\"nofollow noreferrer\">https://gist.github.com/atdt/3704340/be33cc0d1671dcbe8c4d4ede4cde3e0953546edf</a>) ruby punch.rb site.pp, then get error:</p>\n\n<pre><code>/usr/share/ruby/vendor_ruby/puppet/resource/type_collection_helper.rb:5:in `known_resource_types': undefined method `known_resource_types' for \"\":String (NoMethodError)\n    from /usr/share/ruby/vendor_ruby/puppet/parser/parser_support.rb:120:in `import'\n    from punch.rb:92:in `&lt;main&gt;'\n</code></pre>\n\n<p>write test ruby script:</p>\n\n<pre><code>test.rb \nrequire 'json'\nrequire 'pp'\n\ndata = File.read(\"/etc/puppet/environments/team_frontend/manifests/site.pp\")\n\npp ap(JSON.parse(data.to_json))\n</code></pre>\n\n<p>And get error</p>\n\n<pre><code>/usr/share/ruby/json/common.rb:155:in `parse': 757: unexpected token at '\"$commons                                           = hiera('commons', {})\\n\\n$post_repo_fqdn                                    = $commons['post_repo_fqdn']\\n\\n$team_frontend_proxy_exclusions = 'localhost|127.0.0.1|10.2.*|*.dev.local|*.local|*-dev.local|*-test.local'\\n$use_team_frontend_proxy = true\\n$team_frontend_proxy_host = '10.2.53.213'\\n$update_history_job_delay_min = 10\\n$enot_test_mode = true\\n\\n$team_frontend_web_client_external_url = 'team_frontend-web.local'\\n$team_frontend_url='https://team_frontend-web.local/help'\\n$team_frontend_admin_status_timeout = 30000\\n\\n$returns_ttl = 120\\n\\n$team_frontend_servers = {\\n  rest_api =&gt; { server_port =&gt; $team_frontend['rest_api']['ports'], size =&gt; 20 },\\n  web_app  =&gt; { server_port =&gt; $team_frontend['webapp']['ports'],   size =&gt; 20 },\\n}\\n\\n\"' (JSON::ParserError)\n    from /usr/share/ruby/json/common.rb:155:in `parse'\n    from test.rb:6:in `&lt;main&gt;'\n</code></pre>\n\n<p>How convert puppet site.pp to json?\nThanks for commented. I want to migrate from puppet variable to consul kv.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "metaprogramming"], "comments": [{"owner": {"reputation": 52334, "user_id": 702638, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/892f65bc0a8a0949ab88598de7d83cab?s=128&d=identicon&r=PG", "display_name": "Hunter McMillen", "link": "https://stackoverflow.com/users/702638/hunter-mcmillen"}, "edited": false, "score": 0, "creation_date": 1563883147, "post_id": 57163720, "comment_id": 100841096, "body": "I think these answers will be helpful to you: <a href=\"https://stackoverflow.com/questions/3163641/get-a-class-by-name-in-ruby\" title=\"get a class by name in ruby\">stackoverflow.com/questions/3163641/get-a-class-by-name-in-r&zwnj;&#8203;uby</a>"}], "answers": [{"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 1, "last_activity_date": 1563886937, "last_edit_date": 1563886937, "creation_date": 1563883302, "answer_id": 57163807, "question_id": 57163720, "link": "https://stackoverflow.com/questions/57163720/adding-a-method-to-several-classes-in-ruby/57163807#57163807", "title": "Adding a method to several classes in ruby", "body": "<p>Use <a href=\"https://ruby-doc.org/core-2.5.1/Module.html#method-i-const_get\" rel=\"nofollow noreferrer\"><code>const_get</code></a> and <a href=\"https://ruby-doc.org/core-2.5.1/Module.html#method-i-class_eval\" rel=\"nofollow noreferrer\"><code>class_eval</code></a>:</p>\n\n<pre><code>class A; \n  def a; \n    puts :a; \n  end; \nend\nKernel.const_get(\"A\").class_eval { def b; puts :b; end  }\n\npry(main)&gt; A.new.b\nb\n=&gt; nil\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 3, "last_activity_date": 1563884406, "last_edit_date": 1563884406, "creation_date": 1563884049, "answer_id": 57163984, "question_id": 57163720, "link": "https://stackoverflow.com/questions/57163720/adding-a-method-to-several-classes-in-ruby/57163984#57163984", "title": "Adding a method to several classes in ruby", "body": "<p>Adding the functionality to several classes is usually made with mixins. <a href=\"https://ruby-doc.org/core/Module.html#method-i-prepend\" rel=\"nofollow noreferrer\"><code>Module#prepend</code></a> is your friend here. That way one gets an ability to call <code>super</code> if the method <em>overrides</em> the existing one from the extended class.</p>\n\n<pre><code>[\"Class1\", \"Class2\"].each do |klass|\n  Kernel.const_get(klass).prepend(Module.new do\n    def my_new_method\n      ....\n    end\n  end)\nend\n</code></pre>\n\n<hr>\n\n<p>Or, alternatively, you might declare this module upfront and call <code>prepend</code> passing a module name there.</p>\n\n<pre><code>Mixin =\n  Module.new do\n    def my_new_method\n      ....\n    end\n  end\n\n[\"Class1\", \"Class2\"].each do |klass|\n  Kernel.const_get(klass).prepend(Mixin)\nend\n</code></pre>\n\n<hr>\n\n<p>Or, </p>\n\n<pre><code>module Mixin\n  def my_new_method\n    ....\n  end\nend\n\n[\"Class1\", \"Class2\"].each do |klass|\n  Kernel.const_get(klass).prepend(Mixin)\nend\n</code></pre>\n"}], "owner": {"reputation": 26124, "user_id": 972789, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/4Y8VM.jpg?s=128&g=1", "display_name": "Nick Ginanto", "link": "https://stackoverflow.com/users/972789/nick-ginanto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 57163807, "answer_count": 2, "score": 2, "last_activity_date": 1563886937, "creation_date": 1563882987, "question_id": 57163720, "link": "https://stackoverflow.com/questions/57163720/adding-a-method-to-several-classes-in-ruby", "title": "Adding a method to several classes in ruby", "body": "<p>I want to add a method to several classes. But I am missing some thing that I don't know how to call it so I can't search for it</p>\n\n<p>I want to do something like</p>\n\n<pre><code>[\"Class1\", \"Class2\"].each do |klass|\n class klass.constantize\n  def my_new_method\n   ....\n  end\n end\nend\n</code></pre>\n\n<p>obviously the code doesn't work, but you get the point. How do I make klass be a class name so I can declare the method? </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1257, "user_id": 4108555, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e4b39206bd7e7e23b3faa85b7cb1373c?s=128&d=identicon&r=PG&f=1", "display_name": "NN796", "link": "https://stackoverflow.com/users/4108555/nn796"}, "edited": false, "score": 0, "creation_date": 1563883063, "post_id": 57163712, "comment_id": 100841021, "body": "Is this input is in a form?"}, {"owner": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "reply_to_user": {"reputation": 1257, "user_id": 4108555, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e4b39206bd7e7e23b3faa85b7cb1373c?s=128&d=identicon&r=PG&f=1", "display_name": "NN796", "link": "https://stackoverflow.com/users/4108555/nn796"}, "edited": false, "score": 0, "creation_date": 1563883224, "post_id": 57163712, "comment_id": 100841164, "body": "@NN796 Yes its input field to upload file."}], "answers": [{"comments": [{"owner": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "edited": false, "score": 0, "creation_date": 1563884047, "post_id": 57163774, "comment_id": 100841676, "body": "I tried with your code but now it&#39;s not uploading a single file and I am restricted to use jquery file upload not want to use any other gem. <a href=\"https://blueimp.github.io/jQuery-File-Upload/\" rel=\"nofollow noreferrer\">blueimp.github.io/jQuery-File-Upload</a>"}, {"owner": {"reputation": 1257, "user_id": 4108555, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e4b39206bd7e7e23b3faa85b7cb1373c?s=128&d=identicon&r=PG&f=1", "display_name": "NN796", "link": "https://stackoverflow.com/users/4108555/nn796"}, "reply_to_user": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "edited": false, "score": 0, "creation_date": 1563884413, "post_id": 57163774, "comment_id": 100841884, "body": "@VarinderSohal it should work. Source: <a href=\"https://stackoverflow.com/questions/17451482/blueimp-file-upload-single-file-upload\" title=\"blueimp file upload single file upload\">stackoverflow.com/questions/17451482/&hellip;</a>  Can you please post your params in logs after you submit the file?"}, {"owner": {"reputation": 1257, "user_id": 4108555, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e4b39206bd7e7e23b3faa85b7cb1373c?s=128&d=identicon&r=PG&f=1", "display_name": "NN796", "link": "https://stackoverflow.com/users/4108555/nn796"}, "reply_to_user": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "edited": false, "score": 0, "creation_date": 1563884834, "post_id": 57163774, "comment_id": 100842112, "body": "@VarinderSohal A working JS fiddle <a href=\"http://jsfiddle.net/nabeeln796/g6mqrbd2/\" rel=\"nofollow noreferrer\">jsfiddle.net/nabeeln796/g6mqrbd2</a>"}, {"owner": {"reputation": 1257, "user_id": 4108555, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e4b39206bd7e7e23b3faa85b7cb1373c?s=128&d=identicon&r=PG&f=1", "display_name": "NN796", "link": "https://stackoverflow.com/users/4108555/nn796"}, "reply_to_user": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "edited": false, "score": 0, "creation_date": 1564127329, "post_id": 57163774, "comment_id": 100935715, "body": "@VarinderSohal is this fixed your problem?"}], "tags": [], "owner": {"reputation": 1257, "user_id": 4108555, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e4b39206bd7e7e23b3faa85b7cb1373c?s=128&d=identicon&r=PG&f=1", "display_name": "NN796", "link": "https://stackoverflow.com/users/4108555/nn796"}, "is_accepted": false, "score": 1, "last_activity_date": 1563884857, "last_edit_date": 1563884857, "creation_date": 1563883175, "answer_id": 57163774, "question_id": 57163712, "link": "https://stackoverflow.com/questions/57163712/upload-only-one-file-using-jquery-fileupload-in-ruby-on-rails/57163774#57163774", "title": "Upload only one file using jquery fileupload in ruby on rails", "body": "<p>I think you should try this:\n<code>%input#primary-file-uploads{type: \"file\", name: \"upload\", class: \"file-input\"}\n</code></p>\n\n<p>I think <code>upload[upload]</code> is forcing it to take multiple files. <a href=\"https://stackoverflow.com/questions/17451482/blueimp-file-upload-single-file-upload\">Source</a></p>\n\n<p>A <a href=\"https://gist.github.com/tveimo/6922245b057a7930e2d8\" rel=\"nofollow noreferrer\">guide</a> present to upload a single file. And here is a working <a href=\"http://jsfiddle.net/nabeeln796/g6mqrbd2/\" rel=\"nofollow noreferrer\">JSFiddle</a>.</p>\n\n<p>By the way, you can use <a href=\"https://github.com/JangoSteve/remotipart\" rel=\"nofollow noreferrer\">remotipart gem</a></p>\n"}], "owner": {"reputation": 738, "user_id": 8206178, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-20kpbzWvNqw/AAAAAAAAAAI/AAAAAAAAAAs/qNar8diO6Ms/photo.jpg?sz=128", "display_name": "Varinder Sohal", "link": "https://stackoverflow.com/users/8206178/varinder-sohal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563884857, "creation_date": 1563882958, "question_id": 57163712, "link": "https://stackoverflow.com/questions/57163712/upload-only-one-file-using-jquery-fileupload-in-ruby-on-rails", "title": "Upload only one file using jquery fileupload in ruby on rails", "body": "<p>I am working on a live project and there is a requirement to upload only one file and then forced to a user to submit the form.</p>\n\n<pre><code>%input#primary-file-uploads{type: \"file\", name: \"upload[upload]\", class: \"file-input\"}\n</code></pre>\n\n<p>I removed <code>multiple:\"multiple\"</code> attribute from input tag but it's still uploading multiple files. how can I approach it to complete my task</p>\n"}, {"tags": ["ruby", "lambda", "parameters", "codeblocks"], "answers": [{"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 8, "last_activity_date": 1564030711, "last_edit_date": 1564030711, "creation_date": 1564003347, "answer_id": 57191433, "question_id": 57163086, "link": "https://stackoverflow.com/questions/57163086/why-is-to-ary-called-from-a-double-splatted-parameter-in-a-code-block/57191433#57191433", "title": "Why is `to_ary` called from a double-splatted parameter in a code block?", "body": "<p>I don't have full answers to your questions, but I'll share what I've found out.</p>\n\n<h2>Short version</h2>\n\n<p>Procs allow to be called with number of arguments different than defined in the signature. If the argument list doesn't match the definition, <code>#to_ary</code> is called to make implicit conversion. Lambdas and methods require number of args matching their signature. No conversions are performed and that's why <code>#to_ary</code> is not called.</p>\n\n<h2>Long version</h2>\n\n<p>What you describe is a difference between handling params by lambdas (and methods) and procs (and blocks). Take a look at this example:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>obj = Object.new\ndef obj.to_ary; \"baz\" end\nlambda{|**foo| print foo}.call(obj)   \n# &gt;&gt; ArgumentError: wrong number of arguments (given 1, expected 0)\nproc{|**foo| print foo}.call(obj)\n# &gt;&gt; TypeError: can't convert Object to Array (Object#to_ary gives String)\n</code></pre>\n\n<p><code>Proc</code> doesn't require the same number of args as it defines, and <code>#to_ary</code> is called (as you probably know):</p>\n\n<blockquote>\n  <p>For procs created using <code>lambda</code> or <code>-&gt;()</code>, an error is generated if wrong number of parameters are passed to the proc. For procs created using <code>Proc.new</code> or <code>Kernel.proc</code>, extra parameters are silently discarded and missing parameters are set to <code>nil</code>. (<a href=\"https://ruby-doc.org/core-2.6/Proc.html\" rel=\"noreferrer\">Docs</a>)</p>\n</blockquote>\n\n<p>What is more, <code>Proc</code> adjusts passed arguments to fit the signature:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>proc{|head, *tail| print head; print tail}.call([1,2,3])\n# &gt;&gt; 1[2, 3]=&gt; nil\n</code></pre>\n\n<p>Sources: <a href=\"https://makandracards.com/makandra/20641-careful-when-calling-a-ruby-block-with-an-array\" rel=\"noreferrer\">makandra</a>, <a href=\"https://stackoverflow.com/questions/23945533/why-do-ruby-procs-blocks-with-splat-arguments-behave-differently-than-methods-an\">SO question</a>.</p>\n\n<p><code>#to_ary</code> is used for this adjustment (and it's reasonable, as <code>#to_ary</code> is for implicit conversions):</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>obj2 = Class.new{def to_ary; [1,2,3]; end}.new\nproc{|head, *tail| print head; print tail}.call(obj2)\n# &gt;&gt; 1[2, 3]=&gt; nil\n</code></pre>\n\n<p>It's described in detail in <a href=\"https://bugs.ruby-lang.org/issues/6039\" rel=\"noreferrer\">a ruby tracker</a>.</p>\n\n<p>You can see that <code>[1,2,3]</code> was split to <code>head=1</code> and <code>tail=[2,3]</code>. It's the same behaviour as in multi assignment:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>head, *tail = [1, 2, 3]\n# =&gt; [1, 2, 3]\ntail\n# =&gt; [2, 3]\n</code></pre>\n\n<p>As you have noticed, <code>#to_ary</code> is also called when when a proc has double-splatted keyword args:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>proc{|head, **tail| print head; print tail}.call(obj2)\n# &gt;&gt; 1{}=&gt; nil\nproc{|**tail| print tail}.call(obj2)\n# &gt;&gt; {}=&gt; nil\n</code></pre>\n\n<p>In the first case, an array of <code>[1, 2, 3]</code> returned by <code>obj2.to_ary</code> was split to <code>head=1</code> and empty tail, as <code>**tail</code> wasn't able to match an array of<code>[2, 3]</code>.</p>\n\n<p>Lambdas and methods don't have this behaviour. They require strict number of params. There is no implicit conversion, so <code>#to_ary</code> is not called.  </p>\n\n<p>I think that this difference is implemented in <a href=\"https://github.com/ruby/ruby/blob/547f574b639cd8586568ebb8570c51faf102c313/vm.c#L1096-L1097\" rel=\"noreferrer\">these two lines</a> of the Ruby soruce:</p>\n\n<pre class=\"lang-c prettyprint-override\"><code>    opt_pc = vm_yield_setup_args(ec, iseq, argc, sp, passed_block_handler,\n(is_lambda ? arg_setup_method : arg_setup_block));\n</code></pre>\n\n<p>and in <a href=\"https://github.com/ruby/ruby/blob/d7fdf45a4ae1bcb6fac30a24b025d4f20149ba0a/vm_insnhelper.c#L2895\" rel=\"noreferrer\">this function</a>.  I guess <code>#to_ary</code> is called somewhere in <a href=\"https://github.com/ruby/ruby/blob/d7fdf45a4ae1bcb6fac30a24b025d4f20149ba0a/vm_insnhelper.c#L2866-L2879\" rel=\"noreferrer\">vm_callee_setup_block_arg_arg0_splat</a>, most probably in <code>RARRAY_AREF</code>. I would love to read a commentary of this code to understand what happens inside.</p>\n"}], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 103, "favorite_count": 2, "accepted_answer_id": 57191433, "answer_count": 1, "score": 3, "last_activity_date": 1564030711, "creation_date": 1563881032, "last_edit_date": 1563941593, "question_id": 57163086, "link": "https://stackoverflow.com/questions/57163086/why-is-to-ary-called-from-a-double-splatted-parameter-in-a-code-block", "title": "Why is `to_ary` called from a double-splatted parameter in a code block?", "body": "<p>It seems that a double-splatted block parameter calls <code>to_ary</code> on an object that is passed, which does not happen with lambda parameters and method parameters. This was confirmed as follows.</p>\n\n<p>First, I prepared an object <code>obj</code> on which a method <code>to_ary</code> is defined, which returns something other than an array (i.e., a string).</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>obj = Object.new\ndef obj.to_ary; \"baz\" end\n</code></pre>\n\n<p>Then, I passed this <code>obj</code> to various constructions that have a double splatted parameter:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>instance_exec(obj){|**foo|}\n# &gt;&gt; TypeError: can't convert Object to Array (Object#to_ary gives String)\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>-&gt;(**foo){}.call(obj)\n# &gt;&gt; ArgumentError: wrong number of arguments (given 1, expected 0)\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def bar(**foo); end; bar(obj)\n# &gt;&gt; ArgumentError: wrong number of arguments (given 1, expected 0)\n</code></pre>\n\n<p>As can be observed above, only code block tries to convert <code>obj</code> to an array by calling a (potential) <code>to_ary</code> method.</p>\n\n<p>Why does a double-splatted parameter for a code block behave differently from those for a lambda expression or a method definition?</p>\n"}, {"tags": ["ruby", "nokogiri"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1563879713, "post_id": 57162645, "comment_id": 100839051, "body": "An <code>Element</code> <b>is</b> a <code>Node</code>. (Not every <code>Node</code> is an <code>Element</code>.) Imagine &quot;I went to a pet store to get some animals, but they sold me <i>kittens</i>, not animals!&quot;"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1563880469, "post_id": 57162645, "comment_id": 100839519, "body": "<a href=\"https://nokogiri.org/rdoc/Nokogiri/XML/Element.html\" rel=\"nofollow noreferrer\">nokogiri.org/rdoc/Nokogiri/XML/Element.html</a>"}, {"owner": {"reputation": 121, "user_id": 4463128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc238c028d016e88d5f3a4007c9a6bea?s=128&d=identicon&r=PG&f=1", "display_name": "David McNeill", "link": "https://stackoverflow.com/users/4463128/david-mcneill"}, "edited": false, "score": 0, "creation_date": 1563881120, "post_id": 57162645, "comment_id": 100839888, "body": "Thanks. I couldn&#39;t do Nodey things on my Element like .parent, but your clarification confirms it must be other bugs in my code.  Would you like to convert your comment to answer?"}], "answers": [{"tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 0, "last_activity_date": 1563938077, "creation_date": 1563938077, "answer_id": 57174718, "question_id": 57162645, "link": "https://stackoverflow.com/questions/57162645/why-does-xpath-each-return-an-element-instead-of-a-node/57174718#57174718", "title": "Why does xpath.each return an element instead of a node?", "body": "<p>Converted from comments per request:</p>\n\n<p>An <code>Element</code> <strong>is</strong> a <code>Node</code>. (Not every <code>Node</code> is an <code>Element</code>.)</p>\n\n<pre><code># is Element a kind of a Node?\nNokogiri::XML::Element &lt; Nokogiri::XML::Node\n# =&gt; true\n\n# is every node I get from xpath a Node?\nxmldoc.xpath(\"//xmlns:value\").all? { |node| node.is_a?(Nokogiri::XML::Node) }\n# =&gt; true\n\n# can I get a parent from each node I get from xpath?\nxmldoc.xpath(\"//xmlns:value\").map { |node| node.parent.name }\n# =&gt; [\"item\", \"item\"]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 4463128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc238c028d016e88d5f3a4007c9a6bea?s=128&d=identicon&r=PG&f=1", "display_name": "David McNeill", "link": "https://stackoverflow.com/users/4463128/david-mcneill"}, "edited": false, "score": 0, "creation_date": 1564260687, "post_id": 57227042, "comment_id": 100974282, "body": "Very helpful, thank you. Your contribution should find a place in the sparse  Nokogiri <a href=\"https://github.com/sparklemotion/nokogiri/wiki/Cheat-sheet\" rel=\"nofollow noreferrer\">docs</a>."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 121, "user_id": 4463128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc238c028d016e88d5f3a4007c9a6bea?s=128&d=identicon&r=PG&f=1", "display_name": "David McNeill", "link": "https://stackoverflow.com/users/4463128/david-mcneill"}, "edited": false, "score": 0, "creation_date": 1564347352, "post_id": 57227042, "comment_id": 100990391, "body": "The docs are pretty good, but they&#39;re very much oriented to experienced Ruby programmers. The tutorials and cheat-sheet are also, so it makes it difficult for beginners just learning how to deal with parsers and searching XML/HTML. I started with much more primitive ones then migrated to Ruby&#39;s early on, so to me it wasn&#39;t a big step, just a lot more robust."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 2, "last_activity_date": 1564175381, "creation_date": 1564175381, "answer_id": 57227042, "question_id": 57162645, "link": "https://stackoverflow.com/questions/57162645/why-does-xpath-each-return-an-element-instead-of-a-node/57227042#57227042", "title": "Why does xpath.each return an element instead of a node?", "body": "<p>This might help clarify what's happening:</p>\n\n<pre><code>require 'nokogiri'\n\ntypes = {\n  1 =&gt; 'ELEMENT_NODE',\n  2 =&gt; 'ATTRIBUTE_NODE',\n  3 =&gt; 'TEXT_NODE',\n  4 =&gt; 'CDATA_SECTION_NODE',\n  5 =&gt; 'ENTITY_REF_NODE',\n  6 =&gt; 'ENTITY_NODE',\n  7 =&gt; 'PI_NODE',\n  8 =&gt; 'COMMENT_NODE',\n  9 =&gt; 'DOCUMENT_NODE',\n  10 =&gt; 'DOCUMENT_TYPE_NODE',\n  11 =&gt; 'DOCUMENT_FRAG_NODE',\n  12 =&gt; 'NOTATION_NODE',\n  13 =&gt; 'HTML_DOCUMENT_NODE',\n  14 =&gt; 'DTD_NODE',\n  15 =&gt; 'ELEMENT_DECL',\n  16 =&gt; 'ATTRIBUTE_DECL',\n  17 =&gt; 'ENTITY_DECL',\n  18 =&gt; 'NAMESPACE_DECL',\n  19 =&gt; 'XINCLUDE_START',\n  20 =&gt; 'XINCLUDE_END',\n  21 =&gt; 'DOCB_DOCUMENT_NODE',\n}\n\ndoc = Nokogiri::XML.parse(&lt;&lt;EOT)\n&lt;xml&gt;\n  &lt;t1&gt;foo&lt;/t1&gt;\n  bar\n&lt;/xml&gt;\nEOT\n\ndoc.xpath('//.').each do |n|\n  puts \"'%s' is a %s containing \\\"%s\\\"\" % [n.name, types[n.type], n.content]\nend\n</code></pre>\n\n<p>Which results in:</p>\n\n<pre><code># &gt;&gt; 'document' is a DOCUMENT_NODE containing \"\n# &gt;&gt;   foo\n# &gt;&gt;   bar\n# &gt;&gt; \"\n# &gt;&gt; 'xml' is a ELEMENT_NODE containing \"\n# &gt;&gt;   foo\n# &gt;&gt;   bar\n# &gt;&gt; \"\n# &gt;&gt; 'text' is a TEXT_NODE containing \"\n# &gt;&gt;   \"\n# &gt;&gt; 't1' is a ELEMENT_NODE containing \"foo\"\n# &gt;&gt; 'text' is a TEXT_NODE containing \"foo\"\n# &gt;&gt; 'text' is a TEXT_NODE containing \"\n# &gt;&gt;   bar\n# &gt;&gt; \"\n</code></pre>\n\n<p>A parser like <a href=\"http://www.xmlsoft.org\" rel=\"nofollow noreferrer\">libxml2</a>, which lives under Nokogiri, breaks down the XML or HTML into a variety of different types of nodes, and that is then passed back to Nokogiri.</p>\n\n<p>Depending on the search accessor, you could get any of the various types but usually the most usable are the tags in the document:</p>\n\n<pre><code>doc.xpath('//t1').each do |n|\n  puts \"'%s' is a %s containing \\\"%s\\\"\" % [n.name, types[n.type], n.content]\nend\n# &gt;&gt; 't1' is a ELEMENT_NODE containing \"foo\"\n</code></pre>\n\n<p>With those we can search or navigate the document finding nodes of interest, find and extract their content or isolate sections and move, alter or delete them, or insert new content.</p>\n\n<p>Occasionally we care about the text nodes because we want intervening text or to mangle the formatting:</p>\n\n<pre><code>doc.xpath('//text()').each do |n|\n  puts \"'%s' is a %s containing %s\" % [n.name, types[n.type], n.content.inspect]\nend\n# &gt;&gt; 'text' is a TEXT_NODE containing \"\\n  \"\n# &gt;&gt; 'text' is a TEXT_NODE containing \"foo\"\n# &gt;&gt; 'text' is a TEXT_NODE containing \"\\n  bar\\n\"\n</code></pre>\n\n<p>That might help 'splain what you're seeing and pique your curiosity about what else is under the hood.</p>\n"}], "owner": {"reputation": 121, "user_id": 4463128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc238c028d016e88d5f3a4007c9a6bea?s=128&d=identicon&r=PG&f=1", "display_name": "David McNeill", "link": "https://stackoverflow.com/users/4463128/david-mcneill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 57174718, "answer_count": 2, "score": 0, "last_activity_date": 1564262160, "creation_date": 1563879613, "last_edit_date": 1564262160, "question_id": 57162645, "link": "https://stackoverflow.com/questions/57162645/why-does-xpath-each-return-an-element-instead-of-a-node", "title": "Why does xpath.each return an element instead of a node?", "body": "<p>I'd like to iterate the results of an <code>xpath</code> search, so I can do stuff with the nodes. Nokogiri's docs and examples say that <code>xpath</code> returns a NodeSet and <code>NodeSet.each</code> returns a Node, which is what I want however I am getting an Element. What have I done wrong?</p>\n\n<p>This simplified code highlights the issue. There are many related questions on StackOverflow, although they are domain specific, obscuring the issue, and no exact match to this question.</p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"no\"?&gt;\n&lt;root xmlns=\"http://example.org/1\"&gt;\n\n  &lt;item&gt;\n    &lt;value&gt;One&lt;/value&gt;\n  &lt;/item&gt;\n\n  &lt;item&gt;\n    &lt;value&gt;Two&lt;/value&gt;\n  &lt;/item&gt;\n&lt;/root&gt;\n</code></pre>\n\n<pre><code>#!/usr/bin/ruby -w\n\nrequire 'nokogiri'\n\nxmlfile = File.open(\"testfile.xml\")\nxmldoc = Nokogiri::XML(xmlfile)\n\nxmldoc.xpath(\"//xmlns:value\").each do |node|\n    if (node.nil?) then\n        next\n    end\n    puts \"node is a #{node.class}\"\nend\n</code></pre>\n\n<pre><code>node is a Nokogiri::XML::Element\nnode is a Nokogiri::XML::Element\n</code></pre>\n"}, {"tags": ["ruby", "x-callback-url"], "answers": [{"tags": [], "owner": {"reputation": 398, "user_id": 3238281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10c6741f76c752f94aaf5f80bb195947?s=128&d=identicon&r=PG&f=1", "display_name": "JGC", "link": "https://stackoverflow.com/users/3238281/jgc"}, "is_accepted": false, "score": 0, "last_activity_date": 1564008235, "creation_date": 1564008235, "answer_id": 57192162, "question_id": 57161971, "link": "https://stackoverflow.com/questions/57161971/how-to-make-x-callback-url-call-to-local-app-in-ruby/57192162#57192162", "title": "How to make x-callback-url call to local app in Ruby?", "body": "<p>Well, I've found a way, though I regard it a hack, not a good answer.</p>\n\n<p><code>response = %x[open \"#{uri}\"]</code></p>\n\n<p>i.e. call the <code>open</code> command in a new shell.</p>\n\n<p>I still hope someone can provide a better answer.</p>\n"}], "owner": {"reputation": 398, "user_id": 3238281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10c6741f76c752f94aaf5f80bb195947?s=128&d=identicon&r=PG&f=1", "display_name": "JGC", "link": "https://stackoverflow.com/users/3238281/jgc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 182, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1564008235, "creation_date": 1563877452, "question_id": 57161971, "link": "https://stackoverflow.com/questions/57161971/how-to-make-x-callback-url-call-to-local-app-in-ruby", "title": "How to make x-callback-url call to local app in Ruby?", "body": "<p>I have a local app (NotePlan) installed on macOS, and it publishes an <a href=\"https://noteplan.co/faq/General/X-Callback-Url%20Scheme/\" rel=\"nofollow noreferrer\">x-callback-url scheme</a>. I'm simply trying to call it from a ruby script, but can't find help on this. (Plenty of help available for HTTP calls, but this is to a <em>local</em> app.)</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'open-uri'\ntitle = \"note title\"\nuri = \"noteplan://x-callback-url/openNote?noteTitle=#{title}\"\nuriEncoded = URI.escape(uri)\nresponse = open(uriEncoded).read\n</code></pre>\n\n<p>It returns this error:</p>\n\n<pre><code>No such file or directory @ rb_sysopen - noteplan://x-callback-url/openNote?noteTitle=note%20title (Errno::ENOENT)\n</code></pre>\n\n<p>From the command line calling <code>open \"noteplan://x-callback-url/openNote?noteTitle=note%20title\"</code> does the expected thing, so the basic mechanism appears to work.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "firebird"], "comments": [{"owner": {"reputation": 14940, "user_id": 976391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a20cdd68e2d66033d22408a925a5761a?s=128&d=identicon&r=PG", "display_name": "Arioch &#39;The", "link": "https://stackoverflow.com/users/976391/arioch-the"}, "edited": false, "score": 0, "creation_date": 1563880244, "post_id": 57161657, "comment_id": 100839365, "body": "Firebird 3 has native boolean type. Firebird 2 soon to be deprecated. Is a patch to simulate boolean really needed?"}, {"owner": {"reputation": 14940, "user_id": 976391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a20cdd68e2d66033d22408a925a5761a?s=128&d=identicon&r=PG", "display_name": "Arioch &#39;The", "link": "https://stackoverflow.com/users/976391/arioch-the"}, "edited": false, "score": 0, "creation_date": 1563880476, "post_id": 57161657, "comment_id": 100839526, "body": "<code>But it seems that this is used only after the data is fetched</code> I do not know about Ruby, but the general SQL execution of query is three-staged: 1) creating a source text of query, 2) &quot;query preparation&quot; - that is passing the sources to server to compile it into its internal executive language, 3) query execution (fetching data by running the compiled &quot;prepared&quot; query). The data types are returned by Firebird after &quot;preparation&quot; phase and before &quot;fetching&quot; phase. OTOH that data can be <code>SQL DOMAIN</code> - that is an explicitly created named data type, declared outside of the column itself"}, {"owner": {"reputation": 14940, "user_id": 976391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a20cdd68e2d66033d22408a925a5761a?s=128&d=identicon&r=PG", "display_name": "Arioch &#39;The", "link": "https://stackoverflow.com/users/976391/arioch-the"}, "edited": false, "score": 0, "creation_date": 1563880652, "post_id": 57161657, "comment_id": 100839614, "body": "Example from official docs: <code>CREATE DOMAIN D_BOOLEAN AS CHAR(3) CHECK (VALUE IN (&#39;Yes&#39;, &#39;No&#39;));</code> and then <code>CREATE TABLE ( X D_BOOLEAN )</code>"}, {"owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "reply_to_user": {"reputation": 14940, "user_id": 976391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a20cdd68e2d66033d22408a925a5761a?s=128&d=identicon&r=PG", "display_name": "Arioch &#39;The", "link": "https://stackoverflow.com/users/976391/arioch-the"}, "edited": false, "score": 0, "creation_date": 1563880669, "post_id": 57161657, "comment_id": 100839622, "body": "@Arioch&#39;The Although we upgraded to Firebird 3 we still have many columns that are using a domain for boolean. So, I will need it for sure"}, {"owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "reply_to_user": {"reputation": 14940, "user_id": 976391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a20cdd68e2d66033d22408a925a5761a?s=128&d=identicon&r=PG", "display_name": "Arioch &#39;The", "link": "https://stackoverflow.com/users/976391/arioch-the"}, "edited": false, "score": 0, "creation_date": 1563880786, "post_id": 57161657, "comment_id": 100839706, "body": "The problem I have is that ActiveRecord is not recognizing the colum - in our case a char with limit 1 and domain boolean - as a boolean but as a string. Therefore the type casting is wrong and the genereated sql is not working. This is the reason why I am searching for a method to tell the adapter that the column is of a different type."}, {"owner": {"reputation": 14940, "user_id": 976391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a20cdd68e2d66033d22408a925a5761a?s=128&d=identicon&r=PG", "display_name": "Arioch &#39;The", "link": "https://stackoverflow.com/users/976391/arioch-the"}, "edited": false, "score": 0, "creation_date": 1563880919, "post_id": 57161657, "comment_id": 100839776, "body": "You would have to find the place where it does type detection, it is should be somewhere after calling <code>dsql_prepare</code> Firebird functions family. Unless AR is so basic a library that it only calls <code>dsql_execute_immediate</code>, then preparation occurs inside Firebird engine, opaquely"}], "answers": [{"comments": [{"owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "edited": false, "score": 0, "creation_date": 1572428184, "post_id": 57177018, "comment_id": 103552732, "body": "I managed to do this in a configuration for my Rails adapter. It now knows too when a field is boolean and how to query the database with the right char/int"}, {"owner": {"reputation": 80989, "user_id": 466862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=128&d=identicon&r=PG", "display_name": "Mark Rotteveel", "link": "https://stackoverflow.com/users/466862/mark-rotteveel"}, "reply_to_user": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "edited": false, "score": 0, "creation_date": 1572431403, "post_id": 57177018, "comment_id": 103554536, "body": "@Shimu Good to hear. Consider posting an answer with the changes you made to get it to work. It might be useful for others as well."}], "tags": [], "owner": {"reputation": 80989, "user_id": 466862, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d873f397779db38cd510d9ee5416fd43?s=128&d=identicon&r=PG", "display_name": "Mark Rotteveel", "link": "https://stackoverflow.com/users/466862/mark-rotteveel"}, "is_accepted": false, "score": 1, "last_activity_date": 1563951704, "creation_date": 1563951704, "answer_id": 57177018, "question_id": 57161657, "link": "https://stackoverflow.com/questions/57161657/firebird-domain-as-rails-type/57177018#57177018", "title": "Firebird domain as Rails type", "body": "<p>Firebird doesn't communicate information about the domain of a column in the bind information of a prepared query. It only communicates the basic underlying datatype information. So if you have defined a domain <code>X</code> with underlying type <code>CHAR(1)</code>, then Firebird will communicate it as a <code>CHAR(1)</code>, not as <code>X</code>.</p>\n\n<p>There is no option to obtain the domain, except by querying the metadata tables for additional information. So, what you want to achieve is either not possible, or at least it will be complicated.</p>\n"}], "owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1563951704, "creation_date": 1563876479, "question_id": 57161657, "link": "https://stackoverflow.com/questions/57161657/firebird-domain-as-rails-type", "title": "Firebird domain as Rails type", "body": "<p>I am working on a patch for a firebird rails adapter. My goal is to make it possible to define a column as the type boolean if the domain of the column has a defined name.  </p>\n\n<p>I found the <code>SqlTypeMetadata</code> class which I am using to create <code>FirebirdColumns</code> in the method <code>fetch_type_metadata</code> in the module <code>SchemaStatements</code>.  </p>\n\n<p>But it seems that this is used only after the data is fetched so it doesn't use the defined true/false values in the query. So, right now, I am looking for a way to tell ActiveRecord the type of a column on an adapter basis. I read the files schema_definitions and schema_statements several times in case I am missing something but I couldn't find a method there... .</p>\n\n<p>Where is a method that I can overwrite to make the typecasting correct?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1257, "user_id": 4108555, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/e4b39206bd7e7e23b3faa85b7cb1373c?s=128&d=identicon&r=PG&f=1", "display_name": "NN796", "link": "https://stackoverflow.com/users/4108555/nn796"}, "edited": false, "score": 0, "creation_date": 1563875180, "post_id": 57161255, "comment_id": 100836571, "body": "You can do this in view. There is no need to do this in your controller."}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 11539591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f70196f5d8b372232969cea4f7ae28?s=128&d=identicon&r=PG&f=1", "display_name": "developing", "link": "https://stackoverflow.com/users/11539591/developing"}, "edited": false, "score": 0, "creation_date": 1563895464, "post_id": 57161332, "comment_id": 100848558, "body": "<code>&lt;%= link_to(&#39;Cancel&#39;,       order_path(@order.shopify_id), class: &#39;btn btn-danger&#39;,       data: {         disable_with: &quot;Order Cancelled&quot;       }, method: :delete     )     %&gt; </code>"}, {"owner": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "reply_to_user": {"reputation": 105, "user_id": 11539591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f70196f5d8b372232969cea4f7ae28?s=128&d=identicon&r=PG&f=1", "display_name": "developing", "link": "https://stackoverflow.com/users/11539591/developing"}, "edited": false, "score": 0, "creation_date": 1563910600, "post_id": 57161332, "comment_id": 100855448, "body": "I&#39;m glad you got your solution. Please accept the answer if it solved your issue :)"}], "tags": [], "owner": {"reputation": 1049, "user_id": 5832250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2SnJA.jpg?s=128&g=1", "display_name": "Gagan Gupta", "link": "https://stackoverflow.com/users/5832250/gagan-gupta"}, "is_accepted": true, "score": 1, "last_activity_date": 1563875297, "creation_date": 1563875297, "answer_id": 57161332, "question_id": 57161255, "link": "https://stackoverflow.com/questions/57161255/rails-disabled-button-on-a-canceled-condition/57161332#57161332", "title": "Rails disabled button on a canceled condition", "body": "<pre><code>&lt;div class=\"card-body\"&gt;\n  &lt;%= link_to 'Cancel', order_path(@order.shopify_id), method: :delete, class: 'btn btn-danger', disabled: @order.sent? %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Change your view code to this. It will disable it when it's already sent.</p>\n"}], "owner": {"reputation": 105, "user_id": 11539591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f70196f5d8b372232969cea4f7ae28?s=128&d=identicon&r=PG&f=1", "display_name": "developing", "link": "https://stackoverflow.com/users/11539591/developing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 57161332, "answer_count": 1, "score": 1, "last_activity_date": 1563875297, "creation_date": 1563875054, "question_id": 57161255, "link": "https://stackoverflow.com/questions/57161255/rails-disabled-button-on-a-canceled-condition", "title": "Rails disabled button on a canceled condition", "body": "<p>I am trying to do a canceled logic around a button when the item is sent, the button will be disabled.</p>\n\n<pre><code>  if order.sent?\n\n    else \n\n  order.cancel\n\n  respond_to do |format|\n\n    format.html { redirect_to request.referer.include? \"cancel\" ? request.referer : order_path(order.shopify_id), notice: 'Order cancelled successfully!' }\n\n    end\n  end\nend\n\n</code></pre>\n\n<pre><code>&lt;div class=\"card-body\"&gt;\n\n      &lt;%= link_to 'Cancel', order_path(@order.shopify_id), method: :delete, class: 'btn btn-danger' %&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>I was wondering should I do it the if statement with the view or controller?</p>\n"}, {"tags": ["ruby", "amazon-web-services", "amazon-s3", "aws-lambda"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1563871282, "post_id": 57159643, "comment_id": 100834282, "body": "What <code>file.data</code> returns?"}, {"owner": {"reputation": 171, "user_id": 10034431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPDRY.jpg?s=128&g=1", "display_name": "Ivan Raszl", "link": "https://stackoverflow.com/users/10034431/ivan-raszl"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1563889486, "post_id": 57159643, "comment_id": 100844883, "body": "Great lead! file.data[:content_type] includes the file type. Thank you!"}], "answers": [{"tags": [], "owner": {"reputation": 171, "user_id": 10034431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPDRY.jpg?s=128&g=1", "display_name": "Ivan Raszl", "link": "https://stackoverflow.com/users/10034431/ivan-raszl"}, "is_accepted": true, "score": 0, "last_activity_date": 1563900684, "creation_date": 1563900684, "answer_id": 57168900, "question_id": 57159643, "link": "https://stackoverflow.com/questions/57159643/how-do-i-get-the-file-metadata-from-an-aws-s3-file-with-ruby/57168900#57168900", "title": "How do I get the file metadata from an AWS S3 file with Ruby?", "body": "<p>As Aleksei Matiushkin suggested <code>file.data[:content_type]</code> will give the file type.</p>\n"}], "owner": {"reputation": 171, "user_id": 10034431, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mPDRY.jpg?s=128&g=1", "display_name": "Ivan Raszl", "link": "https://stackoverflow.com/users/10034431/ivan-raszl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 0, "accepted_answer_id": 57168900, "answer_count": 1, "score": 0, "last_activity_date": 1563900684, "creation_date": 1563869704, "question_id": 57159643, "link": "https://stackoverflow.com/questions/57159643/how-do-i-get-the-file-metadata-from-an-aws-s3-file-with-ruby", "title": "How do I get the file metadata from an AWS S3 file with Ruby?", "body": "<p>I'm trying to simply retrieve the meta data from a file uploaded to S3. Specifically I need to the content type.</p>\n\n<p>I know the file has metadata, because I can see it in S3 console. But I'm unable to get it programmatically. I must have some syntax error.</p>\n\n<p>See the code below, the file.key returns the file name correctly. But the file.metadata doesn't seem to return an array with data.</p>\n\n<pre><code>s3 = Aws::S3::Resource.new(region: ENV['REGION'])\nfile = s3.bucket(sourceS3Bucket).object(sourceS3Key)\nputs file.key # this works!\nputs file.metadata # this returns an empty array {}\nputs file.metadata['content-type'] # empty\n</code></pre>\n"}, {"tags": ["regex", "ruby", "string"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1563868648, "post_id": 57158801, "comment_id": 100832918, "body": "<code>&quot;foo-bar -baz - blerp blorp&quot;.gsub(&#47;\\s+(?=-)|(?&lt;=-)\\s+&#47;, &amp;:strip) #\u21d2 &quot;foo-bar-baz-blerp blorp&quot;</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1563869287, "post_id": 57158801, "comment_id": 100833279, "body": "All of the answers use some variant of <code>str.gsub(&#47;\\s*-\\s*&#47;, &#39;-&#39;)</code>, but suppose <code>str = &quot;my - oh-\\n my&quot;</code>.   Then <code>str.gsub(&#47;\\s*-\\s*&#47;, &#39;-&#39;) #=&gt; &quot;my-oh-my&quot;</code>, which is incorrect. If you wish to remove spaces around hyphens remove spaces, not whitespaces: <code>str.gsub(&#47; *- *&#47;, &#39;-&#39;) #=&gt; &quot;my-oh-\\n my&quot;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1563880455, "post_id": 57158951, "comment_id": 100839507, "body": "Why <code>&#47;[ ]*&#47;</code> and not <code>&#47; *&#47;</code>? I&#39;d understand if you were using <code>&#47;x</code>... Readability?"}, {"owner": {"reputation": 2090, "user_id": 642978, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WpQgb.jpg?s=128&g=1", "display_name": "mroach", "link": "https://stackoverflow.com/users/642978/mroach"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1563887543, "post_id": 57158951, "comment_id": 100843639, "body": "Yes, readability. It&#39;s a habit I got into as I often use <code>&#47;x</code> to separate complex parts of a regex and even add comments if helpful. <code>[ ]</code> feels more explicit and obvious, which is usually my preference."}], "tags": [], "owner": {"reputation": 2090, "user_id": 642978, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/WpQgb.jpg?s=128&g=1", "display_name": "mroach", "link": "https://stackoverflow.com/users/642978/mroach"}, "is_accepted": false, "score": 4, "last_activity_date": 1563867233, "creation_date": 1563867233, "answer_id": 57158951, "question_id": 57158801, "link": "https://stackoverflow.com/questions/57158801/remove-spaces-around-hyphen-in-ruby/57158951#57158951", "title": "Remove spaces around hyphen in Ruby", "body": "<p>The quick and effective way is with a regular expression:</p>\n\n<pre><code>\"foo-bar -baz - blerp blorp\".gsub(/\\s*-\\s*/, \"-\")\n=&gt; \"foo-bar-baz-blerp blorp\"\n</code></pre>\n\n<p>The <code>\\s*</code> means \"zero or more whitespace characters\". Note that this will match tabs as well as spaces. If you only want to match spaces, use <code>[ ]*</code> instead.</p>\n"}, {"tags": [], "owner": {"reputation": 318, "user_id": 3664194, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001800281383/picture?type=large", "display_name": "Michael Kosyk", "link": "https://stackoverflow.com/users/3664194/michael-kosyk"}, "is_accepted": false, "score": 2, "last_activity_date": 1563867433, "creation_date": 1563867433, "answer_id": 57159000, "question_id": 57158801, "link": "https://stackoverflow.com/questions/57158801/remove-spaces-around-hyphen-in-ruby/57159000#57159000", "title": "Remove spaces around hyphen in Ruby", "body": "<p>Use regular expressions. I believe you regular expression should eq to something like this: </p>\n\n<pre><code>regex = /\\s*-\\s*/\n\ntest_strings = [\"foo-bar baz\", \"foo - bar baz\", \"foo -bar\"]\n\ntest_strings.map do |test_string|\n  test_string.gsub(regex, \"-\")\nend\n# =&gt; [\"foo-bar baz\", \"foo-bar baz\", \"foo-bar\"]\n</code></pre>\n\n<p>A bonus tip, here is a great app to construct your regular expressions: <a href=\"https://rubular.com/\" rel=\"nofollow noreferrer\">https://rubular.com/</a></p>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1563868549, "post_id": 57159129, "comment_id": 100832867, "body": "<code>&quot;foo-bar -baz - blerp blorp&quot;.gsub(&#47;\\s*-\\s*&#47;, &amp;:strip)</code>"}], "tags": [], "owner": {"reputation": 1322, "user_id": 11801415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/639b82f4bb7b8d9545d0fbc725cfcd36?s=128&d=identicon&r=PG&f=1", "display_name": "Lyzard Kyng", "link": "https://stackoverflow.com/users/11801415/lyzard-kyng"}, "is_accepted": false, "score": 2, "last_activity_date": 1563867909, "creation_date": 1563867909, "answer_id": 57159129, "question_id": 57158801, "link": "https://stackoverflow.com/questions/57158801/remove-spaces-around-hyphen-in-ruby/57159129#57159129", "title": "Remove spaces around hyphen in Ruby", "body": "<p>More universal variant (without repeating delimiter):</p>\n\n<pre><code>\"foo-bar -baz - blerp blorp\".gsub(/\\s*-\\s*/) { |part| part.strip }\n =&gt; \"foo-bar-baz-blerp blorp\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1563876336, "creation_date": 1563876336, "answer_id": 57161612, "question_id": 57158801, "link": "https://stackoverflow.com/questions/57158801/remove-spaces-around-hyphen-in-ruby/57161612#57161612", "title": "Remove spaces around hyphen in Ruby", "body": "<p>If you're looking for a solution without regex, you could simply split the string at every <code>'-'</code>, strip the substrings and join them again:</p>\n\n<pre><code>\"foo - bar -baz\".split('-').map(&amp;:strip).join('-')\n# =&gt; \"foo-bar-baz\"\n</code></pre>\n"}], "owner": {"reputation": 119, "user_id": 6345124, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/TcKGD.jpg?s=128&g=1", "display_name": "ruby_dev", "link": "https://stackoverflow.com/users/6345124/ruby-dev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "answer_count": 4, "score": 3, "last_activity_date": 1563876336, "creation_date": 1563866722, "question_id": 57158801, "link": "https://stackoverflow.com/questions/57158801/remove-spaces-around-hyphen-in-ruby", "title": "Remove spaces around hyphen in Ruby", "body": "<p>I have the next strings:</p>\n\n<p>'foo-bar'</p>\n\n<p>'foo - bar'</p>\n\n<p>'foo -bar'</p>\n\n<p>'foo- bar'</p>\n\n<p>'foo- bar-baz'</p>\n\n<p>'foo - bar -baz'</p>\n\n<p>'foo- bar baz'</p>\n\n<p>etc.</p>\n\n<p>What is the best way in ruby to make them all without spaces around hyphens? \nSpaces between words without hyphens should stay.</p>\n\n<p>Example of expected result:\n'foo-bar'\n'foo-bar-baz'\n'foo-bar baz'</p>\n"}, {"tags": ["ruby", "elasticsearch", "kibana"], "comments": [{"owner": {"reputation": 101, "user_id": 9956025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d221c0ee6d242947d7d5d8b6c76b9b6a?s=128&d=identicon&r=PG&f=1", "display_name": "Hrithik Manchanda", "link": "https://stackoverflow.com/users/9956025/hrithik-manchanda"}, "edited": false, "score": 0, "creation_date": 1563865941, "post_id": 57158487, "comment_id": 100831564, "body": "on what criteria or field you want your records to be unique"}, {"owner": {"reputation": 55, "user_id": 7768571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b13f227615045903c1d993ad0a7efd3?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh Raju", "link": "https://stackoverflow.com/users/7768571/ganesh-raju"}, "reply_to_user": {"reputation": 101, "user_id": 9956025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d221c0ee6d242947d7d5d8b6c76b9b6a?s=128&d=identicon&r=PG&f=1", "display_name": "Hrithik Manchanda", "link": "https://stackoverflow.com/users/9956025/hrithik-manchanda"}, "edited": false, "score": 0, "creation_date": 1563866336, "post_id": 57158487, "comment_id": 100831748, "body": "@Hrithik Manchanda  i just updated my question."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 7768571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b13f227615045903c1d993ad0a7efd3?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh Raju", "link": "https://stackoverflow.com/users/7768571/ganesh-raju"}, "edited": false, "score": 0, "creation_date": 1563867209, "post_id": 57158823, "comment_id": 100832191, "body": "uniq_id different for every record. above get request passing through postdate (postdate will common for record not uniq_id)."}, {"owner": {"reputation": 101, "user_id": 9956025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d221c0ee6d242947d7d5d8b6c76b9b6a?s=128&d=identicon&r=PG&f=1", "display_name": "Hrithik Manchanda", "link": "https://stackoverflow.com/users/9956025/hrithik-manchanda"}, "reply_to_user": {"reputation": 55, "user_id": 7768571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b13f227615045903c1d993ad0a7efd3?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh Raju", "link": "https://stackoverflow.com/users/7768571/ganesh-raju"}, "edited": false, "score": 0, "creation_date": 1563871288, "post_id": 57158823, "comment_id": 100834286, "body": "if you have unique uniq_id then how can you get multiple records?"}, {"owner": {"reputation": 55, "user_id": 7768571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b13f227615045903c1d993ad0a7efd3?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh Raju", "link": "https://stackoverflow.com/users/7768571/ganesh-raju"}, "edited": false, "score": 0, "creation_date": 1563871940, "post_id": 57158823, "comment_id": 100834622, "body": "Because, postdate_yyyymmdd is common in records not uniq id. In get request searching through postdate_yyyymmdd (you can see it on question)."}, {"owner": {"reputation": 101, "user_id": 9956025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d221c0ee6d242947d7d5d8b6c76b9b6a?s=128&d=identicon&r=PG&f=1", "display_name": "Hrithik Manchanda", "link": "https://stackoverflow.com/users/9956025/hrithik-manchanda"}, "reply_to_user": {"reputation": 55, "user_id": 7768571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b13f227615045903c1d993ad0a7efd3?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh Raju", "link": "https://stackoverflow.com/users/7768571/ganesh-raju"}, "edited": false, "score": 0, "creation_date": 1563873547, "post_id": 57158823, "comment_id": 100835584, "body": "so you need records for a particular date as unique?"}, {"owner": {"reputation": 55, "user_id": 7768571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b13f227615045903c1d993ad0a7efd3?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh Raju", "link": "https://stackoverflow.com/users/7768571/ganesh-raju"}, "edited": false, "score": 0, "creation_date": 1563875074, "post_id": 57158823, "comment_id": 100836519, "body": "Yes, single uniq record in every get request. Note: I did this with back end. More happy if some suggestions to solve this. Thank you."}], "tags": [], "owner": {"reputation": 101, "user_id": 9956025, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d221c0ee6d242947d7d5d8b6c76b9b6a?s=128&d=identicon&r=PG&f=1", "display_name": "Hrithik Manchanda", "link": "https://stackoverflow.com/users/9956025/hrithik-manchanda"}, "is_accepted": false, "score": 0, "last_activity_date": 1563866801, "creation_date": 1563866801, "answer_id": 57158823, "question_id": 57158487, "link": "https://stackoverflow.com/questions/57158487/get-uniq-results-from-elastic-search/57158823#57158823", "title": "Get uniq results from elastic search", "body": "<p>For this you have to aggregate your results on the basis of aggregation.\nAs you said you want records based on uniq_id and I am assuming that you might have multiple records for this one id in your index and you want to return only one record for each uniq_id</p>\n\n<p>You can refer to elastic search aggregations documentation. \nyou can sort records by newest and fetch top_hits in your aggregation. specifying the size of top_hits as 1 would get you 1 record for your uniq_id</p>\n\n<p>Refer to documentation for aggregation instructions</p>\n\n<p><a href=\"https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-metrics-top-hits-aggregation.html\" rel=\"nofollow noreferrer\">Top_Hits Aggregation</a></p>\n"}], "owner": {"reputation": 55, "user_id": 7768571, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b13f227615045903c1d993ad0a7efd3?s=128&d=identicon&r=PG&f=1", "display_name": "Ganesh Raju", "link": "https://stackoverflow.com/users/7768571/ganesh-raju"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563872007, "creation_date": 1563865601, "last_edit_date": 1563872007, "question_id": 57158487, "link": "https://stackoverflow.com/questions/57158487/get-uniq-results-from-elastic-search", "title": "Get uniq results from elastic search", "body": "<p>Get single record in given date. If it have multiple records then return single uniq record in every request (If it have single record it can be return same retult).</p>\n\n<pre><code>      \"query\": {\n        \"bool\": {\n            \"must\": [\n                {\n                    \"match\": {\n                        \"site_name\": \"blog_new_post\"\n                    }\n                },\n\n                {\n                    \"match\": {\n                        \"postdate_yyyymmdd\": \"20190715\"\n                    }\n                }\n            ]\n\n        }\n\n      },\n      \"size\": 1\n    }\n</code></pre>\n\n<p>I tried with size. So, size returning same record at some times.</p>\n\n<pre><code>{\n    \"took\": 152,\n    \"timed_out\": false,\n    \"_shards\": {\n        \"total\": 1180,\n        \"successful\": 1180,\n        \"failed\": 0\n    },\n    \"hits\": {\n        \"total\": 6624,\n        \"max_score\": 3.6852486,\n        \"hits\": [\n            {\n                \"_index\": \"some-*\",\n                \"_type\": \"data-*\",\n                \"_id\": \"8a9e351e92e6b9b26c8d8fb0173cadd9\",\n                \"_score\": 3.6852486,\n                \"_source\": {\n                    \"uniq_id\": \"8a9e351e92e6b9b26c8d8fb0173cadd9\",\n                    \"postdate_yyyymmdd\": \"20190715\"\n\n      }\n    }]\n   }\n}\n</code></pre>\n\n<p>Uniq record based on uniq_id. Uniq id is different for every record.</p>\n"}, {"tags": ["ruby", "postgresql", "amazon-web-services", "amazon-ec2", "amazon-elastic-beanstalk"], "comments": [{"owner": {"reputation": 13101, "user_id": 6059896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiTP.gif?s=128&g=1", "display_name": "tukan", "link": "https://stackoverflow.com/users/6059896/tukan"}, "edited": false, "score": 0, "creation_date": 1563864159, "post_id": 57158066, "comment_id": 100830766, "body": "Show us your postgres configuration.  Where does it run on what port?"}, {"owner": {"reputation": 55, "user_id": 1847420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c739ddcc8d779eee574cdb6d935beeb?s=128&d=identicon&r=PG", "display_name": "Khtty", "link": "https://stackoverflow.com/users/1847420/khtty"}, "reply_to_user": {"reputation": 13101, "user_id": 6059896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiTP.gif?s=128&g=1", "display_name": "tukan", "link": "https://stackoverflow.com/users/6059896/tukan"}, "edited": false, "score": 0, "creation_date": 1563864999, "post_id": 57158066, "comment_id": 100831137, "body": "where is configuration located?"}, {"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 0, "creation_date": 1563870444, "post_id": 57158066, "comment_id": 100833853, "body": "<a href=\"http://blog.blackninjadojo.com/aws/elastic-beanstalk/2019/01/28/adding-a-database-to-your-rails-application-on-elastic-beanstalk-using-rds.html\" rel=\"nofollow noreferrer\">blog.blackninjadojo.com/aws/elastic-beanstalk/2019/01/28/&hellip;</a> - change MySQL for Postgresql."}, {"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 0, "creation_date": 1563870886, "post_id": 57158066, "comment_id": 100834073, "body": "If you want to test your RDS connection you should pass all necessary options(like host, port, user, password and database name) to <code>psql</code>."}, {"owner": {"reputation": 13101, "user_id": 6059896, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PQiTP.gif?s=128&g=1", "display_name": "tukan", "link": "https://stackoverflow.com/users/6059896/tukan"}, "edited": false, "score": 0, "creation_date": 1563871358, "post_id": 57158066, "comment_id": 100834313, "body": "That depends where you installed it (did you actually install it?).  Your <code>yml</code> file suggests that you should have local instance for the DEV env and for the production you have an instance probably on some other server."}, {"owner": {"reputation": 1393, "user_id": 6347891, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Ifyt4.jpg?s=128&g=1", "display_name": "Joel Hoelting", "link": "https://stackoverflow.com/users/6347891/joel-hoelting"}, "edited": false, "score": 0, "creation_date": 1589515091, "post_id": 57158066, "comment_id": 109331164, "body": "@Khtty Did you ever figure this out?"}], "owner": {"reputation": 55, "user_id": 1847420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c739ddcc8d779eee574cdb6d935beeb?s=128&d=identicon&r=PG", "display_name": "Khtty", "link": "https://stackoverflow.com/users/1847420/khtty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 671, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1563863995, "creation_date": 1563863995, "question_id": 57158066, "link": "https://stackoverflow.com/questions/57158066/pgconnectionbad-could-not-connect-to-server", "title": "PG::ConnectionBad: could not connect to server", "body": "<p>I am trying to deploy my project to aws. after typing <code>eb create appname</code> I get following error message in log.</p>\n\n<pre><code>intializing git\n  rake aborted!\n  PG::ConnectionBad: could not connect to server: No such file or directory\n        Is the server running locally and accepting\n        connections on Unix domain socket \"/var/run/postgresql/.s.PGSQL.5432\"?\n\n</code></pre>\n\n<p>my gemfile</p>\n\n<pre><code>source 'https://rubygems.org'\n\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '~&gt; 5.0.0', '&gt;= 5.0.0.1'\n\n\n# sqlite3 fails on heroku\n# group :development do\n#    gem 'sqlite3'    #gem to use in development environment\n# end\n# gem 'sqlite3'\n# group :production do\ngem 'pg', '~&gt; 0.20.0'         #gem to use in production environment\n# end\ngem 'will_paginate', '~&gt; 3.1.0'\ngem 'simple_form'\ngem 'bootstrap-sass'\ngem 'devise'\ngem 'nested_scaffold'\n# Use Puma as the app server\ngem 'puma', '~&gt; 3.0'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.2'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks\ngem 'turbolinks', '~&gt; 5'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.5'\n# Use Redis adapter to run Action Cable in production\n# gem 'redis', '~&gt; 3.0'\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug', platform: :mri\nend\n\ngroup :development do\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; anywhere in the code.\n  gem 'web-console'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n\ngem 'activeadmin'\n</code></pre>\n\n<p>database.yml</p>\n\n<pre><code>development:\n    adapter: postgresql\n    host: localhost\n    username: jusi\n    database: odpdev\n\n\nproduction:\n  adapter: postgresql\n  encoding: utf8\n  database: &lt;%= ENV['RDS_DB_NAME'] %&gt;  \n  username: &lt;%= ENV['RDS_USERNAME'] %&gt;  \n  password: \"&lt;%= ENV['RDS_PASSWORD'] %&gt;\" \n  host: &lt;%= ENV['RDS_HOSTNAME'] %&gt;  \n  port: &lt;%= ENV['RDS_PORT'] %&gt;\n</code></pre>\n\n<p>can anyone please troubleshoot. When I ssh to aws and type <code>psql</code> I get same error message. Result of <code>which postgres</code></p>\n\n<blockquote>\n  <p>/usr/bin/which: no postgres in (/home/ec2-user/.gem/ruby/2.6.3/bin:/opt/rubies/ruby-2.6.3/lib/ruby/gems/2.6.0/bin:/opt/rubies/ruby-2.6.3/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/opt/aws/bin:/home/ec2-user/.local/bin:/home/ec2-user/bin)</p>\n</blockquote>\n"}, {"tags": ["ruby", "terminal", "jekyll"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1563858983, "post_id": 57157066, "comment_id": 100828881, "body": "Have you noticed the part that says &quot;To see why this extension failed to compile, please check the mkmf.log which can be found here: ...&quot;? Look through it, and see where it says ERROR."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1563861732, "post_id": 57157066, "comment_id": 100829736, "body": "Put these updates into your post, not comments."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1563874881, "post_id": 57157066, "comment_id": 100836397, "body": "That&#39;s just an excerpt; I don&#39;t think the problem is in <code>conftest.c</code>, as that is used by the configuration script to find out whether or not things are installed. I believe the relevant error is one of the ones you didn&#39;t post."}, {"owner": {"reputation": 2198, "user_id": 3842598, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/468955b0edcf30e61a2937cb8b754a1a?s=128&d=identicon&r=PG&f=1", "display_name": "Christian", "link": "https://stackoverflow.com/users/3842598/christian"}, "edited": false, "score": 0, "creation_date": 1563918205, "post_id": 57157066, "comment_id": 100858285, "body": "why sudo? I usually set rights for the current user and just run <code>gem install jekyll</code>."}], "answers": [{"tags": [], "owner": {"reputation": 585, "user_id": 5920835, "user_type": "registered", "profile_image": "https://graph.facebook.com/10208996003325528/picture?type=large", "display_name": "Cezar Azevedo de Faveri", "link": "https://stackoverflow.com/users/5920835/cezar-azevedo-de-faveri"}, "is_accepted": false, "score": 0, "last_activity_date": 1563981779, "creation_date": 1563981779, "answer_id": 57186351, "question_id": 57157066, "link": "https://stackoverflow.com/questions/57157066/cant-install-jekyll-sudo-gem-install-bundler-jekyll-fails-every-time-macos/57186351#57186351", "title": "Can&#39;t install jekyll! &quot;sudo gem install bundler jekyll&quot; fails every time (MacOS High Sierra 10.13)", "body": "<p>Maybe you have <code>libffi</code> installed or your homebrew isn't up to date. See if it's related to this <a href=\"https://github.com/conan-io/conan/issues/752\" rel=\"nofollow noreferrer\">https://github.com/conan-io/conan/issues/752</a></p>\n"}], "owner": {"reputation": 75, "user_id": 11522261, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CMpqpXim-7w/AAAAAAAAAAI/AAAAAAAAA6E/wPgk2tyElIE/photo.jpg?sz=128", "display_name": "MattNewtonian", "link": "https://stackoverflow.com/users/11522261/mattnewtonian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 277, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563981779, "creation_date": 1563858687, "last_edit_date": 1563866942, "question_id": 57157066, "link": "https://stackoverflow.com/questions/57157066/cant-install-jekyll-sudo-gem-install-bundler-jekyll-fails-every-time-macos", "title": "Can&#39;t install jekyll! &quot;sudo gem install bundler jekyll&quot; fails every time (MacOS High Sierra 10.13)", "body": "<p>I can't seem to install Jekyll for some reason. Ruby is installed, as is the package managers, permissions for the directory should be fixed, but I still can't seem to install Jekyll. I'm attaching a rather large code block below, apologies. It's just all the error messages I'm getting in my terminal.</p>\n\n<p>Command \"sudo gem install bundler jekyll\" fails every time. </p>\n\n<pre><code>    `macs-MBP-2:~ mac$ jekyll -v\n-bash: jekyll: command not found\nmacs-MBP-2:~ mac$ sudo gem install bundler jekyll\nSuccessfully installed bundler-2.0.2\nParsing documentation for bundler-2.0.2\nDone installing documentation for bundler after 5 seconds\nBuilding native extensions.  This could take a while...\nERROR:  Error installing jekyll:\n    ERROR: Failed to build gem native extension.\n\n    current directory: /Library/Ruby/Gems/2.3.0/gems/ffi-1.11.1/ext/ffi_c\n/System/Library/Frameworks/Ruby.framework/Versions/2.3/usr/bin/ruby -r ./siteconf20190722-66637-luvw3l.rb extconf.rb\nchecking for ffi.h... no\nchecking for ffi.h in /usr/local/include,/usr/include/ffi... yes\nchecking for ffi_call() in -lffi... yes\nchecking for ffi_closure_alloc()... no\nchecking for shlwapi.h... no\nchecking for rb_thread_call_without_gvl()... yes\nchecking for ruby_native_thread_p()... yes\nchecking for ruby_thread_has_gvl_p()... yes\ncreating extconf.h\ncreating Makefile\n\nTo see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n  /Library/Ruby/Gems/2.3.0/extensions/universal-darwin-17/2.3.0/ffi-1.11.1/mkmf.log\n\ncurrent directory: /Library/Ruby/Gems/2.3.0/gems/ffi-1.11.1/ext/ffi_c\nmake \"DESTDIR=\" clean\n\ncurrent directory: /Library/Ruby/Gems/2.3.0/gems/ffi-1.11.1/ext/ffi_c\nmake \"DESTDIR=\"\nmkdir -p \nGem files will remain installed in /Library/Ruby/Gems/2.3.0/gems/ffi-1.11.1 for inspection.\nResults logged to /Library/Ruby/Gems/2.3.0/extensions/universal-darwin-17/2.3.0/ffi-1.11.1/gem_make.out\n</code></pre>\n\n<p>Here's where it says ERROR (15 times) in the file mkmf.log: </p>\n\n<p><code>conftest.c:13:57: error: use of undeclared identifier 'ruby_thread_has_gvl_p' int t(void) { void ((*volatile p)()); p = (void ((*)()))ruby_thread_has_gvl_p; return !p; } 1 error generated. checked program was: /* begin */ 1: #include \"ruby.h\" 2: 3: /*top*/ 4: extern int t(void); 5: int main(int argc, char **argv) 6: { 7: if (argc &gt; 1000000) { 8: printf(\"%p\", &amp;t); 9: } 10: 11: return 0; 12: } 13: int t(void) { void ((*volatile p)()); p = (void ((*)()))ruby_thread_has_gvl_p; return !p; \u2013<br>\nAlso: conftest.c:3:10: fatal error: 'ffi.h' file not found #include &lt;ffi.h&gt; ^~~~~~~ 1 error generated. checked program was: /* begin */ 1: #include \"ruby.h\" 2: 3: #include &lt;ffi.h&gt; /* end */ \u2013 \nconftest.c:13:57: error: use of undeclared identifier 'ffi_closure_alloc' int t(void) { void ((*volatile p)()); p = (void ((*)()))ffi_closure_alloc; return !p; }</code></p>\n"}, {"tags": ["ruby", "jekyll", "github-pages"], "comments": [{"owner": {"reputation": 11172, "user_id": 74243, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ddcb67dc4378c7d82d4ea8de932f541e?s=128&d=identicon&r=PG", "display_name": "Martin Peck", "link": "https://stackoverflow.com/users/74243/martin-peck"}, "edited": false, "score": 0, "creation_date": 1563854896, "post_id": 57156526, "comment_id": 100827831, "body": "When you build it locally, does that asset get copied over to the _site folder? Is the image part of a published article? I.e. is the markdown file it\u2019s associated with set up with a publish date in the past?"}, {"owner": {"reputation": 11172, "user_id": 74243, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ddcb67dc4378c7d82d4ea8de932f541e?s=128&d=identicon&r=PG", "display_name": "Martin Peck", "link": "https://stackoverflow.com/users/74243/martin-peck"}, "edited": false, "score": 0, "creation_date": 1563855047, "post_id": 57156526, "comment_id": 100827855, "body": "Also, worth checking out answers to this <a href=\"https://stackoverflow.com/questions/22185926/image-not-copied-by-jekyll-assets\" title=\"image not copied by jekyll assets\">stackoverflow.com/questions/22185926/&hellip;</a>"}, {"owner": {"reputation": 194, "user_id": 2034069, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/296c93c8026ece906a2c7a4905ded301?s=128&d=identicon&r=PG", "display_name": "Zach Herring", "link": "https://stackoverflow.com/users/2034069/zach-herring"}, "reply_to_user": {"reputation": 11172, "user_id": 74243, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ddcb67dc4378c7d82d4ea8de932f541e?s=128&d=identicon&r=PG", "display_name": "Martin Peck", "link": "https://stackoverflow.com/users/74243/martin-peck"}, "edited": false, "score": 0, "creation_date": 1563890552, "post_id": 57156526, "comment_id": 100845569, "body": "@MartinPeck Thanks for the response. It is a part of a published article, but it is not getting copied over to _site folder."}, {"owner": {"reputation": 194, "user_id": 2034069, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/296c93c8026ece906a2c7a4905ded301?s=128&d=identicon&r=PG", "display_name": "Zach Herring", "link": "https://stackoverflow.com/users/2034069/zach-herring"}, "reply_to_user": {"reputation": 11172, "user_id": 74243, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/ddcb67dc4378c7d82d4ea8de932f541e?s=128&d=identicon&r=PG", "display_name": "Martin Peck", "link": "https://stackoverflow.com/users/74243/martin-peck"}, "edited": false, "score": 0, "creation_date": 1563890816, "post_id": 57156526, "comment_id": 100845716, "body": "@MartinPeck Just checked the question linked - these images are very different though, only thing similar is the naming convention. I&#39;ve also tried adding completely unrelated images, also not compiling those to _site."}], "answers": [{"comments": [{"owner": {"reputation": 194, "user_id": 2034069, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/296c93c8026ece906a2c7a4905ded301?s=128&d=identicon&r=PG", "display_name": "Zach Herring", "link": "https://stackoverflow.com/users/2034069/zach-herring"}, "edited": false, "score": 0, "creation_date": 1564064408, "post_id": 57169637, "comment_id": 100915559, "body": "Ah cool, it was a boneheaded mistake on my end. Eeesh.  What&#39;s the difference between <code>_includes&#47;assets</code> and <code>assets&#47;</code> ?"}], "tags": [], "owner": {"reputation": 4449, "user_id": 7681659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bc1a3b7231505d61b7f80642bc1a14?s=128&d=identicon&r=PG&f=1", "display_name": "ashmaroli", "link": "https://stackoverflow.com/users/7681659/ashmaroli"}, "is_accepted": false, "score": 1, "last_activity_date": 1563904007, "creation_date": 1563904007, "answer_id": 57169637, "question_id": 57156526, "link": "https://stackoverflow.com/questions/57156526/jekyll-image-breaking-no-new-images-will-load/57169637#57169637", "title": "Jekyll Image Breaking - No New Images Will Load", "body": "<p>Your \"old\" images (e.g. <code>assets/chapter-one/p1.jpg</code>) are inside the <code>assets/</code> directory at the root of the repository.</p>\n\n<p>The \"newer\" images (e.g. <code>assets/chapter-three/p1.jpg</code>) are inside the <code>_includes/assets/</code> directory.<br>\nMove these \"newer\" images into the <code>assets</code> directory at the root and all images shall get rendered as expected.</p>\n"}], "owner": {"reputation": 194, "user_id": 2034069, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/296c93c8026ece906a2c7a4905ded301?s=128&d=identicon&r=PG", "display_name": "Zach Herring", "link": "https://stackoverflow.com/users/2034069/zach-herring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563904007, "creation_date": 1563854540, "last_edit_date": 1563854844, "question_id": 57156526, "link": "https://stackoverflow.com/questions/57156526/jekyll-image-breaking-no-new-images-will-load", "title": "Jekyll Image Breaking - No New Images Will Load", "body": "<p>Using Github Pages to serve a comic book project I'm working on. The next is releasing Wednesday aaaaannd of course, Jekyll is deciding to not serve/recognize any <em>new</em> images. And that's key; it's only <em>new</em> images that Jekyll isn't recognizing. </p>\n\n<p>Go to issue 1's image folder, <a href=\"https://abductedthecomic.com/assets/chapter-one/p1.jpg\" rel=\"nofollow noreferrer\">assets/chapter-one/p1.jpg</a>, and it loads just fine</p>\n\n<p>Go to <a href=\"https://abductedthecomic.com/assets/chapter-three/p1.jpg\" rel=\"nofollow noreferrer\">assets/chapter-three/p1.jpg</a> and you get a 404.</p>\n\n<p>And <a href=\"https://github.com/zherring/abducted-thecomic/blob/master/_includes/assets/chapter-three/p1.jpg\" rel=\"nofollow noreferrer\">it's <em>definitely</em> in the repo.</a></p>\n\n<p>I've tried copying files from chapter-one over to chapter-three. No luck. I've also tried adding new images downloaded from the internet (so it's not any of the image compression algos I'm using etc)...still no dice. It loads on the old images, it 404/breaks on anything new.</p>\n\n<p>Any idea on what's the matter? I'm utterly baffled by what's going on here. I've updated Jekyll to run on the most current, updated my gems etc. with no dice. Help?</p>\n\n<p>Thanks in advance, all.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rspec-rails"], "comments": [{"owner": {"reputation": 28433, "user_id": 1565525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2e3a5d0911464ffa3d7ac48475cf98d?s=128&d=identicon&r=PG", "display_name": "Fabio", "link": "https://stackoverflow.com/users/1565525/fabio"}, "edited": false, "score": 0, "creation_date": 1563852997, "post_id": 57156309, "comment_id": 100827481, "body": "In the sample you provided there no another user created before each test?"}, {"owner": {"reputation": 28433, "user_id": 1565525, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f2e3a5d0911464ffa3d7ac48475cf98d?s=128&d=identicon&r=PG", "display_name": "Fabio", "link": "https://stackoverflow.com/users/1565525/fabio"}, "edited": false, "score": 3, "creation_date": 1563853069, "post_id": 57156309, "comment_id": 100827493, "body": "<code>save!</code> will raise an error if user not valid, so <code>expect</code> will never be executed when user is not valid."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1563854752, "post_id": 57156309, "comment_id": 100827803, "body": "^^ What Fabio said ,... I think you can just remove the <code>@user.save!</code> line entirelly"}, {"owner": {"reputation": 135, "user_id": 9011983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71412d045963c1fdaa41d46073e6e17b?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9011983/daniel"}, "edited": false, "score": 0, "creation_date": 1563891263, "post_id": 57156309, "comment_id": 100845985, "body": "Thanks all, will definitely give that a try!  Fabio-- I am not creating any other users before each test, I thought creating only one would be sufficient.  Would another user need to be created for this scenario?"}], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 9011983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71412d045963c1fdaa41d46073e6e17b?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9011983/daniel"}, "edited": false, "score": 0, "creation_date": 1563937524, "post_id": 57156556, "comment_id": 100861689, "body": "Checking whether it\u2019s falsey makes sense in this context.  I tried using the syntax you provided and the test is still returning true when it should be false.  The two users have the same username output when the test is run, and I\u2019m wondering if it\u2019s still true because the users aren\u2019t actually being saved to the db.  If that\u2019s the case would it make more sense to use a conditional to force the proper result?"}], "tags": [], "owner": {"reputation": 149, "user_id": 6843054, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6539be961385a57301cc3b1efd2d3ff3?s=128&d=identicon&r=PG&f=1", "display_name": "SujoyD", "link": "https://stackoverflow.com/users/6843054/sujoyd"}, "is_accepted": true, "score": 3, "last_activity_date": 1563875041, "last_edit_date": 1563875041, "creation_date": 1563854846, "answer_id": 57156556, "question_id": 57156309, "link": "https://stackoverflow.com/questions/57156309/testing-rails-model-uniqueness-with-duplicate-entry/57156556#57156556", "title": "Testing Rails model uniqueness with duplicate entry", "body": "<p>As fabio said, you dont have second Registration object to check uniquness. \nYou just checked your saved @user is valid or not which is always valid and saved in DB. To check your uniqueness validation you can do something like this - </p>\n\n<pre><code>RSpec.describe Registration, type: :model do\n  before do\n    @user = Registration.create(\n      username: '1234',\n      password: 'abcdeF7#',\n      email: 'test@test.com',\n      name: 'One'\n    )\n    @invalid_user = @user.dup\n    @invalid_user.email = \"test1@test.com\"\n  end\n  it 'should not be valid if the username is already taken' do\n    expect(@invalid_user.valid?).should be_falsey\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 805, "user_id": 4544219, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/CLo94.jpg?s=128&g=1", "display_name": "Mosaaleb", "link": "https://stackoverflow.com/users/4544219/mosaaleb"}, "is_accepted": false, "score": 1, "last_activity_date": 1563874669, "creation_date": 1563874669, "answer_id": 57161145, "question_id": 57156309, "link": "https://stackoverflow.com/questions/57156309/testing-rails-model-uniqueness-with-duplicate-entry/57161145#57161145", "title": "Testing Rails model uniqueness with duplicate entry", "body": "<p><code>@user.save!</code> will raise an error even before reaching the expect as mentioned in comments by Fabio </p>\n\n<p>Also, if it is important to you to test db level constraint you can do:</p>\n\n<pre><code>expect { @user.save validate: false }.to raise_error(ActiveRecord::RecordNotUnique)\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 9011983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/71412d045963c1fdaa41d46073e6e17b?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel", "link": "https://stackoverflow.com/users/9011983/daniel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 411, "favorite_count": 0, "accepted_answer_id": 57156556, "answer_count": 2, "score": 1, "last_activity_date": 1563875041, "creation_date": 1563852663, "question_id": 57156309, "link": "https://stackoverflow.com/questions/57156309/testing-rails-model-uniqueness-with-duplicate-entry", "title": "Testing Rails model uniqueness with duplicate entry", "body": "<p>I have a restriction on my Rails DB to force unique usernames, and I create a user at the start of each of my model tests.  I'm trying to create a second user with the same username as the first and I expect this to not be valid, but it is returning as valid. </p>\n\n<p>I've tried tweaking the code to use the new, save, and create methods when generating new users but with no success.</p>\n\n<p>Registration Model:</p>\n\n<pre><code>class Registration &lt; ApplicationRecord\n  @username_length = (3..20)\n  @password_requirements = /\\A\n    (?=.{8,}) # Password must be at least 8 characters\n    (?=.*\\d) # Password must contain at least one number\n    (?=.*[a-z]) # Password must contain at least one lowercase letter\n    (?=.*[A-Z]) # Password must contain at least one capital letter\n    # Password must have special character\n    (?=.*[['!', '@', '#', '$', '%', '^', '&amp;']])\n  /x\n\n  validates :username, length: @username_length, uniqueness: true\n  validates :password, format: @password_requirements\n  validates :email, uniqueness: true\n  has_secure_password\n  has_secure_token :auth_token\n\n  def invalidate_token\n    self.update_columns(auth_token: nil)\n  end\n\n  def self.validate_login(username, password)\n    user = Registration.find_by(username: username)\n    if user &amp;&amp; user.authenticate(password)\n      user\n    end\n  end\nend\n\n</code></pre>\n\n<p>Registration Tests:</p>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe Registration, type: :model do\n  before do\n    @user = Registration.new(\n      username: '1234',\n      password: 'abcdeF7#',\n      email: 'test@test.com',\n      name: 'One'\n    )\n  end\n  it 'should not be valid if the username is already taken' do\n    @user.save!(username: '1234')\n    expect(@user).not_to be_valid\n  end\nend\n\n</code></pre>\n\n<p>I would expect this test to pass due to it being a duplicate username.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1459, "user_id": 1612744, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NRaQy.jpg?s=128&g=1", "display_name": "magni-", "link": "https://stackoverflow.com/users/1612744/magni"}, "edited": false, "score": 0, "creation_date": 1563845413, "post_id": 57155363, "comment_id": 100826201, "body": "Your method takes in two arguments, and then immediately overrides those with hard-coded arrays? You then call your method with only one argument. Furthermore, <code>Array#length</code> returns an <code>Integer</code>, so <code>arr1.length &gt; 5</code> is valid, but `arr1.length == &#39;y&#39; is not."}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1563845504, "post_id": 57155363, "comment_id": 100826216, "body": "You should use a regex to do matching."}, {"owner": {"reputation": 3, "user_id": 11819975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c86ec1a5bc495ccf9e2a021f2456ceeb?s=128&d=identicon&r=PG&f=1", "display_name": "samibacon", "link": "https://stackoverflow.com/users/11819975/samibacon"}, "reply_to_user": {"reputation": 1459, "user_id": 1612744, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NRaQy.jpg?s=128&g=1", "display_name": "magni-", "link": "https://stackoverflow.com/users/1612744/magni"}, "edited": false, "score": 0, "creation_date": 1563846824, "post_id": 57155363, "comment_id": 100826452, "body": "Ohh okay, no wonder. @magni"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1563850807, "post_id": 57155363, "comment_id": 100827112, "body": "You will agree that the string &quot;quickly&quot;, because it has 7 letters and ends in &quot;y&quot;, should be included in the array you return. The strings &quot;QUICKLY&quot; and &quot;quicklY&quot; are different strings, both ending in a capital wye. You should check whether case matters when applying your inclusion criteria.  If capital wye&#39;s qualify, you could determine if the last character of a word is &quot;y&quot; or &quot;Y&quot; or <i>downcase</i> the word and check if its last character is &quot;y&quot; (<code>word.downcase[-1] == &#39;y&#39;</code>). See <a href=\"https://ruby-doc.org/core-2.6.3/String.html#method-i-downcase\" rel=\"nofollow noreferrer\">String#downcase</a>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1563865948, "post_id": 57155363, "comment_id": 100831565, "body": "&quot;I could not get to it&quot; is not a precise enough error description for us to help you. <i>What</i> doesn&#39;t work? <i>How</i> doesn&#39;t it work? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 11819975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c86ec1a5bc495ccf9e2a021f2456ceeb?s=128&d=identicon&r=PG&f=1", "display_name": "samibacon", "link": "https://stackoverflow.com/users/11819975/samibacon"}, "edited": false, "score": 0, "creation_date": 1563846779, "post_id": 57155585, "comment_id": 100826437, "body": "Okay I will give it a try! Thanks for explaining what regex does."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1563851333, "post_id": 57155585, "comment_id": 100827204, "body": "Good answer, one regex for both conditions. I suggest <code>word.match? &#47;.{4}y\\z&#47;</code>, <a href=\"https://ruby-doc.org/core-2.6.3/String.html#method-i-match-3F\" rel=\"nofollow noreferrer\">String#match?</a> (new in Ruby 2.4) possibly being more descriptive, no need for a start-of-string anchor or <code>,</code> after <code>4</code> and <code>\\z</code> being an end-of-string anchor (although the end-of-line anchor <code>$</code> does work here). OP hasn&#39;t told us if you need <code>&#47;i</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1563854491, "post_id": 57155585, "comment_id": 100827753, "body": "Using <code>^</code> and <code>$</code> on unpredicted input is extremely dangerous due to chances to produce false positives (when carriage returns are there in the input.) Always use <code>\\A</code> and <code>\\z</code> matchers unless you are sure you need <code>^</code> and <code>$</code>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1563866090, "post_id": 57155585, "comment_id": 100831627, "body": "<code>Enumerable#select</code> with a predicate object that responds to <code>===</code> is usually better expressed using <code>Enumerable#grep</code>, i.e. <code>words.grep(&#47;\\A.{4,}y\\z&#47;)</code>"}, {"owner": {"reputation": 1459, "user_id": 1612744, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NRaQy.jpg?s=128&g=1", "display_name": "magni-", "link": "https://stackoverflow.com/users/1612744/magni"}, "edited": false, "score": 0, "creation_date": 1563938900, "post_id": 57155585, "comment_id": 100861922, "body": "I did not know about <code>Enumerable#grep</code>! And I somehow have gone seven years writing Ruby without using <code>\\A</code> and <code>\\z</code>... (granted writing regexes is not a daily thing either). Editing both in. More info on <code>\\A</code> and <code>\\z</code> vs <code>^</code> and <code>$</code> <a href=\"https://stackoverflow.com/questions/577653/difference-between-a-z-and-in-ruby-regular-expressions\">here</a>"}], "tags": [], "owner": {"reputation": 1459, "user_id": 1612744, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NRaQy.jpg?s=128&g=1", "display_name": "magni-", "link": "https://stackoverflow.com/users/1612744/magni"}, "is_accepted": false, "score": 2, "last_activity_date": 1563939161, "last_edit_date": 1563939161, "creation_date": 1563845858, "answer_id": 57155585, "question_id": 57155363, "link": "https://stackoverflow.com/questions/57155363/ruby-how-to-write-a-method-that-returns-an-array-of-strings/57155585#57155585", "title": "Ruby - How to write a method that returns an array of strings?", "body": "<p>If I'm understanding your question correctly, you want to return a subset of the passed in array matching your conditions (length \u2265 5 and last character = 'y'). In that case:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def phrases(words)\n  words.grep(/.{4}y\\z/)\nend\n</code></pre>\n\n<p>What that regex does:</p>\n\n<ul>\n<li><code>.{4}</code> means 4 of any character</li>\n<li><code>y</code> is the letter <code>y</code></li>\n<li><code>\\z</code> is the end of the string, so we don't match in the middle of a long word</li>\n</ul>\n\n<p>The docs for <code>Enumerable#select</code> are <a href=\"https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-select\" rel=\"nofollow noreferrer\">here</a> (an Array is an Enumerable).</p>\n\n<p>Output:</p>\n\n<pre><code>&gt; phrases([\"funny\", \"tidy\", \"fish\", \"foogiliously\"])\n=&gt; [\"funny\", \"foogiliously\"]\n&gt; phrases([\"happily\", \"lovely\", \"hello\", \"multivitaminly\"])\n=&gt; [\"happily\", \"lovely\", \"multivitaminly\"]\n</code></pre>\n\n<p>If you only want word characters, rather than any character, you'd use this regex instead: <code>/\\A.{4,}y\\z/</code>. In that case, <code>\\A</code> means the start of the string, and <code>\\w{4,}</code> means at least 4 word characters.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1563851761, "post_id": 57155676, "comment_id": 100827272, "body": "Rather than make two passes with <code>select</code> consider doing just one."}, {"owner": {"reputation": 3, "user_id": 11819975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c86ec1a5bc495ccf9e2a021f2456ceeb?s=128&d=identicon&r=PG&f=1", "display_name": "samibacon", "link": "https://stackoverflow.com/users/11819975/samibacon"}, "edited": false, "score": 0, "creation_date": 1563893471, "post_id": 57155676, "comment_id": 100847350, "body": "Okay thanks! I&#39;m going to experiment and try each different way."}, {"owner": {"reputation": 1477, "user_id": 262707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bf48ce51b35fa383042a3b22accdb99?s=128&d=identicon&r=PG", "display_name": "maro", "link": "https://stackoverflow.com/users/262707/maro"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1563911625, "post_id": 57155676, "comment_id": 100855859, "body": "@CarySwoveland, there&#39;s a trade-off between readability and &quot;performance&quot;. Unless there&#39;s a significant (and measured, preferably) performance hit, I&#39;d rather make it more readable. In other words - first make it readable, then optimize as needed."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1563912951, "post_id": 57155676, "comment_id": 100856406, "body": "I can&#39;t disagree in general, but here I would judge the two a toss-up in readability. In ordinary conversion would one say, &quot;select elements that have length of five or more and then from those select those that end in wye&quot; or &quot;select elements that have length of five or more and end in wye&quot;?"}, {"owner": {"reputation": 1477, "user_id": 262707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bf48ce51b35fa383042a3b22accdb99?s=128&d=identicon&r=PG", "display_name": "maro", "link": "https://stackoverflow.com/users/262707/maro"}, "edited": false, "score": 0, "creation_date": 1563914454, "post_id": 57155676, "comment_id": 100857085, "body": "It&#39;s obviously a matter of preference, but by having a chain of simple selects you have greater flexibility in adjusting bits and pieces later on, reusing parts of it somewhere else and utilizing all that block/Proc related goodness that Ruby gives us.   As a side note, the logic of defining the elements in question (&quot;that have length of five or more and end in &#39;y&#39;&quot;) could be extracted to a separate method to get a simple <code>list.select{|s| s.is_what_i_want?}</code> or <code>list.select(&amp;:is_what_i_want?)</code> for short."}], "tags": [], "owner": {"reputation": 1477, "user_id": 262707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bf48ce51b35fa383042a3b22accdb99?s=128&d=identicon&r=PG", "display_name": "maro", "link": "https://stackoverflow.com/users/262707/maro"}, "is_accepted": false, "score": 0, "last_activity_date": 1563846785, "creation_date": 1563846785, "answer_id": 57155676, "question_id": 57155363, "link": "https://stackoverflow.com/questions/57155363/ruby-how-to-write-a-method-that-returns-an-array-of-strings/57155676#57155676", "title": "Ruby - How to write a method that returns an array of strings?", "body": "<p>You may want to spend some time reading about the methods in the core library, especially <a href=\"https://ruby-doc.org/core-2.6.3/String.html#method-i-end_with-3F\" rel=\"nofollow noreferrer\">String#end_with?</a> and <a href=\"https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-select\" rel=\"nofollow noreferrer\">Enumerable#select</a>. You could then write a method that'd contain something like this:</p>\n\n<pre><code>['abc', 'qwerty', 'asdfghjk', 'y'].select{|s| s.length &gt;= 5}.select{|s| s.end_with? 'y'}\n\n#=&gt; [\"qwerty\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1563851651, "last_edit_date": 1563851651, "creation_date": 1563849739, "answer_id": 57155966, "question_id": 57155363, "link": "https://stackoverflow.com/questions/57155363/ruby-how-to-write-a-method-that-returns-an-array-of-strings/57155966#57155966", "title": "Ruby - How to write a method that returns an array of strings?", "body": "<p>If, when given an array and inclusion criterion, one wishes to construct an array that contains those elements of the first array that satisfy the inclusion criterion, one generally uses the method <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-select\" rel=\"nofollow noreferrer\">Array#select</a> or <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-reject\" rel=\"nofollow noreferrer\">Array#reject</a>, whichever is more more convenient.</p>\n\n<p>Suppose <code>arr</code> is a variable that holds the given array and <code>include_element?</code> is a method that takes one argument, an element of <code>arr</code>, and returns <code>true</code> or <code>false</code>, depending on whether the inclusion criterion is satisified for that element. For example, say the array comprises the integers <code>1</code> through <code>6</code> and the inclusion criterion is that the number is even (<code>2</code>, <code>4</code> and <code>6</code>). We could write:</p>\n\n<pre><code>arr = [1,2,3,4,5,6]\n\ndef include_element?(e)\n  e.even?\nend\n\ninclude_element?(2)\n  #=&gt; true \ninclude_element?(3)\n  #=&gt; false \n\narr.select { |e| include_element?(e) }\n  #=&gt; [2, 4, 6]\n</code></pre>\n\n<p>The method <code>include_element?</code> is so short we probably would substitute it out and just write:</p>\n\n<pre><code>arr.select { |e| e.even? }\n</code></pre>\n\n<p><a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-select\" rel=\"nofollow noreferrer\">Array#select</a> passes each element of its receiver, <code>arr</code>, to <code>select</code>'s block, assigns the <em>block variable</em> <code>e</code> to that value and evaluates the expression in the block (which could be many lines, of course). Here that expresssion is just <code>e.even?</code>, which returns <code>true</code> or <code>false</code>. (See <a href=\"https://ruby-doc.org/core-2.6.3/Integer.html#method-i-even-3F\" rel=\"nofollow noreferrer\">Integer#even?</a> and <a href=\"https://ruby-doc.org/core-2.6.3/Integer.html#method-i-odd-3F\" rel=\"nofollow noreferrer\">Integer#odd?</a>.)</p>\n\n<p>If that expression evaluates as a <em>truthy</em> value, the element <code>e</code> is to be included in the array that is returned; if it evaluates as a <em>falsy</em> value, <code>e</code> is not to be included. <em>Falsy</em> values (logical false) are <code>nil</code> and <code>false</code>; <em>truthy</em> values (logical true) are all other Ruby objects, which of course includes <code>true</code>.</p>\n\n<p>Notice that we could instead write:</p>\n\n<pre><code>arr.reject { |e| e.odd? }\n</code></pre>\n\n<p>Sometimes the inclusion criterion consists of a compound expression. For example, suppose the inclusion criterion were to keep elements of <code>arr</code> that are both even numbers and are at least <code>4</code>. We would write:</p>\n\n<pre><code>arr.select { |e| e.even? &amp;&amp; e &gt;= 4 }\n  #=&gt; [4, 6]\n</code></pre>\n\n<p>With other criteria we might write:</p>\n\n<pre><code>arr.select { |e| e.even? || e &gt;= 4 }\n  #=&gt; [2, 4, 5, 6]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>arr.select { |e| e &lt; 2 || (e &gt; 3 &amp;&amp; e &lt; 6) }\n  #=&gt; [1, 4, 5]\n</code></pre>\n\n<p><code>&amp;&amp;</code> (logical 'and') and <code>||</code> (logical 'or') are <a href=\"https://ruby-doc.org/docs/ruby-doc-bundle/Manual/man-1.4/syntax.html\" rel=\"nofollow noreferrer\">operators</a> (search \"operator expressions\"). As explained at the link, most Ruby operators are actually methods, but these two are among a few that are not.</p>\n\n<p>Your problem now reduces to the following:</p>\n\n<pre><code>arr.select { |str| &lt;length of str is at least 5&gt; &amp;&amp; &lt;last character of str is 'y'&gt; }\n</code></pre>\n\n<p>You should be able to supply code for the <code>&lt;...&gt;</code> bits.</p>\n"}, {"comments": [{"owner": {"reputation": 3, "user_id": 11819975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c86ec1a5bc495ccf9e2a021f2456ceeb?s=128&d=identicon&r=PG&f=1", "display_name": "samibacon", "link": "https://stackoverflow.com/users/11819975/samibacon"}, "edited": false, "score": 0, "creation_date": 1563893399, "post_id": 57157874, "comment_id": 100847303, "body": "Ah, arr[-1] == &#39;y&#39;. I didn&#39;t think about going backwards.Will do, thanks!"}], "tags": [], "owner": {"reputation": 5790, "user_id": 3384193, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b2855af30769fe8d0b43b58b5c468265?s=128&d=identicon&r=PG&f=1", "display_name": "kchak", "link": "https://stackoverflow.com/users/3384193/kchak"}, "is_accepted": true, "score": 0, "last_activity_date": 1564040034, "last_edit_date": 1564040034, "creation_date": 1563863252, "answer_id": 57157874, "question_id": 57155363, "link": "https://stackoverflow.com/questions/57155363/ruby-how-to-write-a-method-that-returns-an-array-of-strings/57157874#57157874", "title": "Ruby - How to write a method that returns an array of strings?", "body": "<p>You are trying to write a function that should work on a single array at a time I think. Also, you are taking in an array, and retaining only those elements that satisfy your conditions: <em>at least 5 characters long, and ends with y</em>. This is a filtering operation. Read about the methods available for ruby's Array class <a href=\"https://ruby-doc.org/core-2.6.3/Array.html\" rel=\"nofollow noreferrer\">here</a></p>\n\n<pre><code>def phrases(array)\n  ...\n  filtered_array\nend\n</code></pre>\n\n<p>Now the condition you are using is this <code>arr1.length &gt; 5 &amp;&amp; arr1.length == \"y\"</code>.\nThe first half should check if the string length is greater than 5, not the array length itself. The second half is an indexing operation, and your code for that is incorrect. basically you are checking if the last character in the string is <code>y</code>. </p>\n\n<p>Usually strings are indexed in this manner: <code>string[index]</code>. In your case you can use <code>string[-1]=='y'</code> or <code>string[string.length - 1]=='y'</code>. This because arrays and strings are zero indexed in ruby. The first element has index of 0, the second has an index of 1, and the last one, therefore, will have an index of <code>length-1</code>. If you use negative indexes then the array is indexed from the end, so <code>string[-1]</code> is a quick way to get to the last element.</p>\n\n<p>Considering this, the function will take the following structure:</p>\n\n<pre><code>def phrases(array)\n  filtered_array = [] # an empty array\n  loop through the input array\n  for each element check for the condition element.length &gt; 5 &amp;&amp; element[-1]=='y'\n    if true: push the element into the filtered_array\n  once the loop is done, return the filtered array\nend\n</code></pre>\n\n<p>Read about ruby arrays, the methods push, filter and select in the above linked documentation to get a better idea. I'd also recommend the codeacademy ruby tutorial.</p>\n\n<p>Edit: Both halves of the condition are incorrect. I had overlooked a mistake in my earlier answer. <code>arr1.length</code> refers to the length of the array. You want to check the length of each string in the array. So in your for loop you should check the length of the loop variable, if that is greater than 5.</p>\n"}], "owner": {"reputation": 3, "user_id": 11819975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c86ec1a5bc495ccf9e2a021f2456ceeb?s=128&d=identicon&r=PG&f=1", "display_name": "samibacon", "link": "https://stackoverflow.com/users/11819975/samibacon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2312, "favorite_count": 0, "accepted_answer_id": 57157874, "answer_count": 4, "score": -1, "last_activity_date": 1564040034, "creation_date": 1563843541, "last_edit_date": 1563854320, "question_id": 57155363, "link": "https://stackoverflow.com/questions/57155363/ruby-how-to-write-a-method-that-returns-an-array-of-strings", "title": "Ruby - How to write a method that returns an array of strings?", "body": "<p>I've tried different ways and this is probably the closest that I got to it. I am trying to write a method that takes in an array of strings and returns it containing the strings that are at least 5 characters long and end with \"y\". </p>\n\n<p>I'm a beginner and this is my second problem I've come across with, and I've tried multiple if statements and using a while loop, however I could not get to it and now this is where I am at. Thank you! </p>\n\n<pre><code>def phrases(arr1, arr2)\n  arr1 = [\"funny\", \"tidy\", \"fish\", \"foogiliously\"]\n  arr2 = [\"happily\", \"lovely\", \"hello\", \"multivitaminly\"]\n\n  if (arr1.length &gt; 5 &amp;&amp; arr1.length == \"y\")\n    return arr1\n  elsif (arr2.length &gt; 5 &amp;&amp; arr2.length == \"y\")\n    return arr2\n  end\nend\n\nputs phrases([\"funny\", \"tidy\", \"fish\", \"foogiliously\"])\nputs phrases([\"happily\", \"lovely\", \"hello\", \"multivitaminly\"])\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1563844881, "last_edit_date": 1563844881, "creation_date": 1563832360, "answer_id": 57154215, "question_id": 57153880, "link": "https://stackoverflow.com/questions/57153880/method-to-pull-specific-lines-from-an-external-text-file/57154215#57154215", "title": "Method to pull specific lines from an external text file?", "body": "<p>Let <code>target?</code> be a method that takes a line from the file as an argument and returns <code>true</code> or <code>false</code>, depending upon whether the lines meets the matching criterion.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def doit(fname)\n  arr = []\n  File.foreach(fname).with_object([]) do |line, a|\n    arr.shift if arr.size == 8\n    arr &lt;&lt; line    \n    if target?(line) &amp;&amp; arr.size == 8\n      a &lt;&lt; arr\n      arr = []        \n    end\n  end\nend\n</code></pre>\n\n<p><strong>Example</strong></p>\n\n<p>Let's create a test file.</p>\n\n<pre><code>TARGET_LINES = [\"Mary had a little lamb\", \"whose fleece was\", \"white as snow\"]\na = (1..28).map { |i| \"line #{i}\" } \nb = [*a[0,7],  TARGET_LINES[1],\n     *a[8,10], TARGET_LINES[2],\n     *a[18,9], TARGET_LINES[0],\n     a[27]]\nFName = 'test'\nFile.write(FName, b.join(\"\\n\"))\n  #=&gt; 261 \n</code></pre>\n\n<p>See what we have (skipping some lines).</p>\n\n<pre><code>puts File.read(FName)\nline 1\nline 2\n...\nline 7\nwhose fleece was\nline 9\nline 10\n...\nline 18\nwhite as snow\nline 19\nline 20\n...\nline 27\nMary had a little lamb\nline 28\n</code></pre>\n\n<p>Now create a <code>target?</code> method:</p>\n\n<pre><code>def target?(line)\n  TARGET_LINES.include?(line.chomp)\nend\n</code></pre>\n\n<p>and execute <code>doit</code>:</p>\n\n<pre><code>puts doit(FName)\nline 1\nline 2\n...\nline 7\nwhose fleece was\nline 12\nline 13\n...\nline 18\nwhite as snow\nline 21\nline 22\n...\nline 27\nMary had a little lamb\n</code></pre>\n\n<p>See the docs <a href=\"https://ruby-doc.org/core-2.6.3/IO.html#method-c-foreach\" rel=\"nofollow noreferrer\">IO::foreach</a> and <a href=\"https://ruby-doc.org/core-2.6.3/Enumerator.html#method-i-with_object\" rel=\"nofollow noreferrer\">Enumerator#with_object</a> and <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-rotate\" rel=\"nofollow noreferrer\">Array#rotate</a>. Note that <code>IO</code> class methods such as <code>foreach</code> are often invoked with the receiver <code>File</code>. This is permitted because <code>File</code> is a subclass of <code>IO</code>. (<code>File &lt; IO #=&gt; true</code>).</p>\n"}, {"tags": [], "owner": {"reputation": 1477, "user_id": 262707, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6bf48ce51b35fa383042a3b22accdb99?s=128&d=identicon&r=PG", "display_name": "maro", "link": "https://stackoverflow.com/users/262707/maro"}, "is_accepted": false, "score": 0, "last_activity_date": 1563847315, "creation_date": 1563847315, "answer_id": 57155735, "question_id": 57153880, "link": "https://stackoverflow.com/questions/57153880/method-to-pull-specific-lines-from-an-external-text-file/57155735#57155735", "title": "Method to pull specific lines from an external text file?", "body": "<p>I know this is supposed to be a Ruby question, but sometimes other tools make it easier to get the results.</p>\n\n<p>Did you know about <a href=\"https://linux.die.net/man/1/grep\" rel=\"nofollow noreferrer\">grep</a>? :</p>\n\n<pre><code>$ cat long_file.txt\nline 1\nline 2\nline 3\nline 4\nline 5\nline 6\nline 7\nline 8\nline 9\nline 10\ntarget\nline 11\nline 12\nline 13\nline 14\n\n$ grep -B 7 target long_file.txt\nline 4\nline 5\nline 6\nline 7\nline 8\nline 9\nline 10\ntarget\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 11821310, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-BIeR8kkKGWw/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reGVaZWbTAu0PDDTmyka3EDfTzrsw/photo.jpg?sz=128", "display_name": "Suleyman Kiani", "link": "https://stackoverflow.com/users/11821310/suleyman-kiani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1563847315, "creation_date": 1563830324, "last_edit_date": 1563830935, "question_id": 57153880, "link": "https://stackoverflow.com/questions/57153880/method-to-pull-specific-lines-from-an-external-text-file", "title": "Method to pull specific lines from an external text file?", "body": "<p>I am given a text file containing hundreds of line of information, and am tasked with pulling lines with a specific strings out. The issue is that after the line with the string being searched for is found, I also need to pull the 7 lines above it as-well. </p>\n\n<p>I know this solution works for pulling specific line number. However I don't know what line number needs to be pulled, just the string on the line, along with 7 lines above the line, with the string I need.</p>\n\n<pre><code>file = File.open \"file.txt\"\n\nn.times{ file.gets }\np $_\n\nfile.close\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "attributes"], "comments": [{"owner": {"reputation": 592, "user_id": 3154739, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d97daffaa6bbae78c66c7d431bf6dcf?s=128&d=identicon&r=PG&f=1", "display_name": "don_Bigote", "link": "https://stackoverflow.com/users/3154739/don-bigote"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1563827709, "post_id": 57153291, "comment_id": 100821847, "body": "you are right. my typo."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1563828415, "post_id": 57153291, "comment_id": 100822123, "body": "What database are you using?"}], "answers": [{"tags": [], "owner": {"reputation": 1322, "user_id": 11801415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/639b82f4bb7b8d9545d0fbc725cfcd36?s=128&d=identicon&r=PG&f=1", "display_name": "Lyzard Kyng", "link": "https://stackoverflow.com/users/11801415/lyzard-kyng"}, "is_accepted": false, "score": 0, "last_activity_date": 1563886128, "creation_date": 1563886128, "answer_id": 57164553, "question_id": 57153291, "link": "https://stackoverflow.com/questions/57153291/how-do-i-get-the-count-of-nil-and-not-nil-values-from-a-list-of-specific-attribu/57164553#57164553", "title": "How do I get the count of nil and not nil values from a list of specific attributes from a table in a Rails 5 app?", "body": "<p>If I understand the question correctly, given a <code>volunteer</code> as <code>User</code> object having <code>profile_attributes</code> method:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># not nil\n(volunteer.profile_attributes.select { |attr| !volunteer.send(attr).nil? }).count\n# nil\n(volunteer.profile_attributes.select { |attr| volunteer.send(attr).nil? }).count\n\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1564172510, "post_id": 57171920, "comment_id": 100957317, "body": "Do you fill comfortable doing SQL queries in your view? I&#39;m pretty sure you can do something better in your case."}], "tags": [], "owner": {"reputation": 592, "user_id": 3154739, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d97daffaa6bbae78c66c7d431bf6dcf?s=128&d=identicon&r=PG&f=1", "display_name": "don_Bigote", "link": "https://stackoverflow.com/users/3154739/don-bigote"}, "is_accepted": true, "score": -1, "last_activity_date": 1563914672, "creation_date": 1563914672, "answer_id": 57171920, "question_id": 57153291, "link": "https://stackoverflow.com/questions/57153291/how-do-i-get-the-count-of-nil-and-not-nil-values-from-a-list-of-specific-attribu/57171920#57171920", "title": "How do I get the count of nil and not nil values from a list of specific attributes from a table in a Rails 5 app?", "body": "<p>It was actually pretty obvious. I probably didn't explain myself well in the question. The way to do this is just to add select. So, you would have the following:</p>\n\n<pre><code>&lt;% User.select(:name, :cel, :city, :state).each do |user| %&gt;\n  Nil count\n  &lt;%= user.attributes.values.count { |v| v.nil? } %&gt;\n\n  Not nil count\n  &lt;%= user.attributes.values.count { |v| !v.nil? } %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 592, "user_id": 3154739, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4d97daffaa6bbae78c66c7d431bf6dcf?s=128&d=identicon&r=PG&f=1", "display_name": "don_Bigote", "link": "https://stackoverflow.com/users/3154739/don-bigote"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 57171920, "answer_count": 2, "score": 0, "last_activity_date": 1563914672, "creation_date": 1563827318, "last_edit_date": 1563827759, "question_id": 57153291, "link": "https://stackoverflow.com/questions/57153291/how-do-i-get-the-count-of-nil-and-not-nil-values-from-a-list-of-specific-attribu", "title": "How do I get the count of nil and not nil values from a list of specific attributes from a table in a Rails 5 app?", "body": "<p>Rails 5 app, User model is set up with Devise</p>\n\n<p>I have a User model that was created with the Devise gem. I want to get the count of specific columns in the model that are nil and also not nil. For example, I am using this to get the count of ALL of the columns:</p>\n\n<p>Nil: <code>&lt;%= user.attributes.values.count { |v| v.nil? } %&gt;</code></p>\n\n<p>Not Nil: <code>&lt;%= user.attributes.values.count { |v| !v.nil? } %&gt;</code></p>\n\n<p>But, I only want to find the count for certain attributes. I only want</p>\n\n<ul>\n<li>name</li>\n<li>cel</li>\n<li>city</li>\n<li>state</li>\n</ul>\n\n<p>If I create a model method like this</p>\n\n<pre><code>def profile_attributes\n  [:name, :cel, :city, :state]\nend \n</code></pre>\n\n<p>Then in my view:\n<code>= volunteer.profile_attributes.count</code> => 4</p>\n\n<p>Now, if <code>city</code> and <code>state</code> are <code>nil</code> I would want => 2</p>\n\n<p>How do I get this to work?</p>\n"}, {"tags": ["ruby", "serialization", "struct"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1563860925, "creation_date": 1563860925, "answer_id": 57157442, "question_id": 57152459, "link": "https://stackoverflow.com/questions/57152459/ruby-serialize-and-deserialize-struct/57157442#57157442", "title": "Ruby Serialize and DeSerialize Struct", "body": "<p>The issue is you dump <em>objects</em> resulting in several lines in the <code>yaml</code> file, but you load back <em>lines</em> deserializing <em>lines</em>. Each line does not obviously contain the whole object, that\u2019s why you get an array hashes (one per line) back.</p>\n\n<p>You need to collect lines until the new object marker is there <em>or</em> to read the whole file content, split it into objects with e. g. regular expression and load split objects.</p>\n\n<p>The first approach would be like:</p>\n\n<pre><code>File.readlines(FILE).\n    each_with_object([[], []]) do |line, (inner_acc, outer_acc)|\n  if line.start_with?('---')\n    outer_acc &lt;&lt; YAML.load(inner_acc.join) unless inner_acc.empty?\n    inner_acc.clear &lt;&lt; line\n  else\n    inner_acc &lt;&lt; line\n  end\nend.tap do |inner_acc, outer_acc|\n  break outer_acc &lt;&lt; YAML.load(inner_acc.join) # last chunk\nend\n</code></pre>\n\n<p>With regular expression, it should be even simpler.</p>\n"}], "owner": {"reputation": 128, "user_id": 11744097, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/--_CSWfqF3tQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdzBBPcl2w1PZhBaW5zcKAhfur-_Q/photo.jpg?sz=128", "display_name": "Ken Jenney", "link": "https://stackoverflow.com/users/11744097/ken-jenney"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1563860925, "creation_date": 1563823125, "last_edit_date": 1563823765, "question_id": 57152459, "link": "https://stackoverflow.com/questions/57152459/ruby-serialize-and-deserialize-struct", "title": "Ruby Serialize and DeSerialize Struct", "body": "<p>I'm trying to serialize an S3 Object so that I can deserialize at a later time. Deserialization is failing to grab the Object's class and is not grouping the object's variables. Here's my current code:</p>\n\n<pre><code>require 'yaml'\ndef serialize_array_of_objects(array, filename)\n  unless array.empty?\n    File.open(filename, \"w+\") do |f|\n      array.each { |element|\n        serialized_object = YAML::dump(element)\n        f.write(serialized_object)\n      }\n    end\n  end\nend\n</code></pre>\n\n<p>Here's the contents of the file (redacted):</p>\n\n<pre><code>--- !ruby/struct:Aws::S3::Types::Object\nkey: file1.csv\nlast_modified: 2019-03-24 17:24:41.000000000 Z\netag: '\"REDACTED\"'\nsize: 41248\nstorage_class: STANDARD\nowner:\n--- !ruby/struct:Aws::S3::Types::Object\nkey: file2.csv\nlast_modified: 2019-04-24 15:30:41.000000000 Z\netag: '\"REDACTED\"'\nsize: 33527\nstorage_class: STANDARD\nowner:\n</code></pre>\n\n<p>To deserialize the objects I'm using this code:</p>\n\n<pre><code>def serialized_file_to_array(filename)\n  array = []\n  File.open(filename, \"r\").each { |line|\n    array &lt;&lt; YAML::load(line)\n  }\n  return array\nend\n</code></pre>\n\n<p>My problem is that the object get's distorted on load. Here's the array now:</p>\n\n<pre><code>[nil, {\"key\"=&gt;\"file1.csv\"}, {\"last_modified\"=&gt;2019-03-24 17:24:41 UTC}, {\"etag\"=&gt;\"\\\"REDACTED\\\"\"}, {\"size\"=&gt;41248}, {\"storage_class\"=&gt;\"STANDARD\"}, {\"owner\"=&gt;nil}, nil, {\"key\"=&gt;\"file2.csv\"}, {\"last_modified\"=&gt;2019-04-24 15:30:41 UTC}, {\"etag\"=&gt;\"\\\"REDACTED\\\"\"}, {\"size\"=&gt;33527}, {\"storage_class\"=&gt;\"STANDARD\"}, {\"owner\"=&gt;nil}]\n</code></pre>\n\n<p>I need to be able to pull the object key values in the deserialized version.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1563817886, "last_edit_date": 1563817886, "creation_date": 1563817333, "answer_id": 57151193, "question_id": 57150873, "link": "https://stackoverflow.com/questions/57150873/how-to-delete-a-range-of-characters-from-a-string-by-their-hex-value/57151193#57151193", "title": "how to delete a range of characters from a string by their hex value", "body": "<p>If, as in the example, the hex range covers no number greater than <code>0xFF</code>, you can do the following.</p>\n\n<pre><code>a = \"foo\" + ['9c'].pack('H*') + \"bar\" + ['FF'].pack('H*')\n  #=&gt; \"foo\\x9Cbar\\xFF\"\nrange = 0x9c..0xff\n  #=&gt; 156..255 \n\nb = a.gsub(/./) { |c| range.cover?(c.ord) ? '' : c }\n  #=&gt; \"foobar\" \n</code></pre>\n\n<p>Note:</p>\n\n<pre><code>a.chars.map(&amp;:ord)\n  #=&gt; [102, 111, 111, 156, 98, 97, 114, 255]\nb.chars.map(&amp;:ord)\n  #=&gt; [102, 111, 111, 98, 97, 114]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1563817512, "creation_date": 1563817512, "answer_id": 57151223, "question_id": 57150873, "link": "https://stackoverflow.com/questions/57150873/how-to-delete-a-range-of-characters-from-a-string-by-their-hex-value/57151223#57151223", "title": "how to delete a range of characters from a string by their hex value", "body": "<p>I am positive it\u2019s an <em>XY Problem</em>, but if needed it might be accomplished by force-converting the input into ASCII and producing the regex out of ASCII chars.</p>\n\n<pre><code>a = \"foo\" + ['9c'].pack('H*') + \"bar\" + ['FF'].pack('H*')\n\na.\n  force_encoding(Encoding::ASCII_8BIT).\n  gsub(/[#{0x9C.chr}-#{0xFF.chr}]/, '')\n#\u21d2 \"foobar\"\n</code></pre>\n"}], "owner": {"reputation": 141, "user_id": 10448260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/77f54ffe3b35f720649c203e202ca478?s=128&d=identicon&r=PG&f=1", "display_name": "DumbNewbie", "link": "https://stackoverflow.com/users/10448260/dumbnewbie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 57151223, "answer_count": 2, "score": 0, "last_activity_date": 1563817886, "creation_date": 1563816022, "last_edit_date": 1563817031, "question_id": 57150873, "link": "https://stackoverflow.com/questions/57150873/how-to-delete-a-range-of-characters-from-a-string-by-their-hex-value", "title": "how to delete a range of characters from a string by their hex value", "body": "<p>I have a string, and I want to delete all characters in a specific hex range, for example 0x9c-0xff.  I figured I can do this with a single character using sub.  How do I do this with a range of hex characters?</p>\n\n<p>I can get it to work using a single value and gsub, but a range doesn't work.</p>\n\n<p>Here's some broken code I pulled from memory.  I don't have ruby on this computer.</p>\n\n<pre><code>a = \"foo\" + ['9c'].pack('H*') + \"bar\" + ['FF'].pack('H*')\n\nb = a.gsub([\\x9c-\\xff],'')\n\nputs b\n</code></pre>\n\n<p>I would like to see the string just be \"foo\" and \"bar\" without the other characters I added for testing the removal.</p>\n\n<p>Edit: the wizard for question asking on this site asks all kinds of questions, saying things like \"enter what you tried\", or \"explain xyz\" and then it rams it all together into one giant mass that doesn't make any sense.  Is there a way to report the wizard as being horribly buggy?</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1563815040, "post_id": 57150651, "comment_id": 100816599, "body": "It would be a kindness if you were to pretty print your objects rather than making us do it for you."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1563819691, "post_id": 57150738, "comment_id": 100818491, "body": "No need for <code>values.</code> since it is followed by <code>map</code>."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1563815347, "creation_date": 1563815347, "answer_id": 57150738, "question_id": 57150651, "link": "https://stackoverflow.com/questions/57150651/ruby-array-of-hashes-group-by-based-on-similar-hash-key/57150738#57150738", "title": "Ruby - array of hashes group by based on similar hash key", "body": "<p>You need to <code>group_by</code> and then <code>reduce</code> values merging them.</p>\n\n<pre><code>input.\n  group_by { |h| h[\"PROJECT\"] }.\n  values.\n  map do |v|\n    v.reduce({}) do |acc, h|\n      acc.merge(h) { |_, v1, v2| v1 == v2 ? v1 : [*v1, *v2] }\n    end\n  end\n\n#\u21d2 [{\"PROJECT\"=&gt;\"awesome_project1\",\n#    \"VERSION\"=&gt;[128, 64],\n#    \"STATUS\"=&gt;[\"not required\", \"scheduled\"]},\n#   {\"PROJECT\"=&gt;\"awesome_project2\",\n#    \"VERSION\"=&gt;32,\n#    \"STATUS\"=&gt;\"finished\"}]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1563822188, "creation_date": 1563822188, "answer_id": 57152267, "question_id": 57150651, "link": "https://stackoverflow.com/questions/57150651/ruby-array-of-hashes-group-by-based-on-similar-hash-key/57152267#57152267", "title": "Ruby - array of hashes group by based on similar hash key", "body": "<p>You can always solve problems of this kind in one of two ways. The first is to use <a href=\"https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-group_by\" rel=\"nofollow noreferrer\">Enumerable#group_by</a>, as @Aleksei (aka mudsie) has done. The other way is to create a hash whose keys are the values over which the aggregation is being done (here the values of <code>\"PROJEXT\"</code>), then at the end extract the values of that hash. That's the approach I've taken below.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def doit(arr)\n  arr.each_with_object({}) do |g,h|\n    h.update(g[\"PROJECT\"]=&gt;(g.merge(\"STATUS\"=&gt;[g[\"STATUS\"]]))) do |_,o1,n1|\n      o1.merge(n1) { |k2,o2,n2| k2==\"STATUS\" ? (o2+n2) : o2 }  \n    end\n  end.values\nend\n</code></pre>\n\n<p><strong>Example</strong></p>\n\n<pre><code>arr = [\n  {\"PROJECT\"=&gt;\"awesome_project1\", \"VERSION\"=&gt;128, \"STATUS\"=&gt;\"not required\"},\n  {\"PROJECT\"=&gt;\"awesome_project2\", \"VERSION\"=&gt; 32, \"STATUS\"=&gt;\"finished\"},\n  {\"PROJECT\"=&gt;\"awesome_project1\", \"VERSION\"=&gt; 64, \"STATUS\"=&gt;\"scheduled\"}\n]\n\ndoit arr\n  #=&gt; [{\"PROJECT\"=&gt;\"awesome_project1\", \"VERSION\"=&gt;128,\n  #       \"STATUS\"=&gt;[\"not required\", \"scheduled\"]},\n  #    {\"PROJECT\"=&gt;\"awesome_project2\", \"VERSION\"=&gt;32,\n  #       \"STATUS\"=&gt;[\"finished\"]}] \n</code></pre>\n\n<p>This is not quite the return value you asked for. In the second hash you wanted <code>\"STATUS\"=&gt;\"finished\"</code>, not <code>\"STATUS\"=&gt;[\"finished\"]</code>. I intentionally made the value an array, however, as it nearly always saves trouble down-the-line by making all values instances of the same class (here arrays). If it must be <code>\"STATUS\"=&gt;\"finished\"</code>, let me know and I will edit my answer.</p>\n\n<p><strong>Explanation</strong></p>\n\n<p>...under construction</p>\n"}], "owner": {"reputation": 1035, "user_id": 4146283, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5ee6027e8e0c4d815f5d9741371eacde?s=128&d=identicon&r=PG", "display_name": "disastrous-charly", "link": "https://stackoverflow.com/users/4146283/disastrous-charly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 57150738, "answer_count": 2, "score": 1, "last_activity_date": 1563822188, "creation_date": 1563814927, "last_edit_date": 1563815126, "question_id": 57150651, "link": "https://stackoverflow.com/questions/57150651/ruby-array-of-hashes-group-by-based-on-similar-hash-key", "title": "Ruby - array of hashes group by based on similar hash key", "body": "<p>I have an array of hashes who looks like : </p>\n\n<pre><code>[{\"PROJECT\"=&gt;\"awesome_project1\",\"VERSION\"=&gt;128, \"STATUS\"=&gt;\"not required\"},\n {\"PROJECT\"=&gt;\"awesome_project2\", \"VERSION\"=&gt;32, \"STATUS\"=&gt;\"finished\"},\n {\"PROJECT\"=&gt;\"awesome_project1\", \"VERSION\"=&gt;64, \"STATUS\"=&gt;\"scheduled\"}]\n</code></pre>\n\n<p>And I'm trying to merge the hashes based on one of the hask key, knowing that the key to group_by can change. So if I want to group_by \"PROJECT\" it would looks like : </p>\n\n<pre><code>[{\"PROJECT\"=&gt;\"awesome_project1\",\"VERSION\"=&gt;[128,64], \"STATUS\"=&gt;[\"not required\",\"scheduled\"]},\n {\"PROJECT\"=&gt;\"awesome_project2\", \"VERSION\"=&gt;32, \"STATUS\"=&gt;\"finished\"}]\n</code></pre>\n\n<p>For the moment the closest I am to the result is by using group_by.</p>\n\n<p>Do you have an idea on how to do it ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 0, "last_activity_date": 1563812288, "creation_date": 1563812288, "answer_id": 57150041, "question_id": 57149988, "link": "https://stackoverflow.com/questions/57149988/rspec-test-of-update-cannot-update-some-parameters/57150041#57150041", "title": "RSPEC test of #update cannot update some parameters", "body": "<p>You need to reload the <code>user</code> object.</p>\n\n<pre><code>patch :update, ...\n\nuser.reload # \u21d0 THIS\n\nexpect(user.firstname).to ...\n</code></pre>\n\n<p>Without reloading you have the stale object in your test and Rails has no ability to magically understand the object in the database has changed.</p>\n"}], "owner": {"reputation": 27, "user_id": 11820157, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-fTI5cES5o_g/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reE2h2O6FB8JhnGR3zHrCygoLhvaw/photo.jpg?sz=128", "display_name": "SquirrelProject", "link": "https://stackoverflow.com/users/11820157/squirrelproject"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 57150041, "answer_count": 1, "score": 1, "last_activity_date": 1563812530, "creation_date": 1563812103, "last_edit_date": 1563812530, "question_id": 57149988, "link": "https://stackoverflow.com/questions/57149988/rspec-test-of-update-cannot-update-some-parameters", "title": "RSPEC test of #update cannot update some parameters", "body": "<p>I try testing my #UPDATE method in my Users Controller. The update of my fields (firstname, lastname, email, phone_number) works totally fine on my localhost but I can't make my test pass. Here is my code </p>\n\n<p>I have this in my Users Controller : </p>\n\n<pre><code>def update\n@user = User.find(params[:id])\nauthorize(@user)\n@user.skip_reconfirmation! if @user.is_a_customer?\nrespond_to do |format|\n  if @user.update(user_params)\n    format.html { redirect_to user_account_path, notice: \n      I18n.t('User_was_successfully_updated') }\n             format.json { render json: @user, status: :ok}\n  else\n    format.html { render :edit }\n    format.json { render json: @user.errors, status: \n                 :unprocessable_entity }\n  end\nend\n</code></pre>\n\n<p>and here is my RSPEC test : </p>\n\n<pre><code> RSpec.describe UsersController, type: :controller do\n  describe \"PATCH update\" do\n    let(:user)        { create(:customer_user) }\n\n    before :each do\n      sign_in user\n    end\n\n    it \"update the user information\" do\n      allow(User).to receive(:find_by).and_return(user)\n\n      new_attributes = {\n          firstname: 'Roger',\n          lastname: 'Rabbit',\n          email: 'roger.rabbit@lapin.fr',\n          mobile_phone_number: '0606060606',\n          gender: 'female',\n      }\n      patch :update, params: { locale: I18n.locale,\n                                      id: user.id,\n                                      user: new_attributes\n                                    }\n      expect(user.firstname).to eq(new_attributes['firstname'])\n      expect(user.lastname).to eq(new_attributes['lastname'])\n      expect(user.email).to eq(new_attributes[:email])\n      expect(user.mobile_phone_number).to \n         eq(new_attributes[:mobile_phone_number])\n    end\n</code></pre>\n\n<p>Finally, here is the error message : </p>\n\n<pre><code>  0) UsersController PATCH update user is a user update the user information\n Failure/Error: expect(user.email).to eq(new_attributes[:email])\n\n   expected: \"roger.rabbit@lapin.fr\"\n        got: \"customer@ecity.fr\"\n\n   (compared using ==)\n # ./spec/controllers/users_controller_spec.rb:29:in `block (4 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>Two more things : \n- the test pass for firstname and lastname\n- new_attributes['email'] and new_attributes['mobile_phone_number'] return nils ; that's why I symbolized key for the two last expectations</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1563812505, "post_id": 57149684, "comment_id": 100815544, "body": "why would you redirect to <code>request.referer</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1563812802, "creation_date": 1563812802, "answer_id": 57150169, "question_id": 57149684, "link": "https://stackoverflow.com/questions/57149684/rails-request-referer-didnt-redirect-to-the-previous-url/57150169#57150169", "title": "Rails request.referer didnt redirect to the previous url", "body": "<p>You should carefully check the operator precedence as well as warnings you get while Ruby is executing your code.</p>\n\n<p>Consider this snippet.</p>\n\n<pre><code>\"cancel_foo_bar\".include? \"cancel\" ? \"foo\" : \"bar\"\n(pry):1: warning: string literal in condition\n#\u21d2 true\n</code></pre>\n\n<p>It returns <code>true</code> because it\u2019s actually equivalent to:</p>\n\n<pre><code>\"cancel_foo_bar\".include?(\"cancel\" ? \"foo\" : \"bar\")\n</code></pre>\n\n<p>The same in your condition, <code>include?</code> receives the result of ternary operator execution, not <code>\"cancel\"</code> string. This probably would work:</p>\n\n<pre><code>format.html do\n  redirect_url =\n    if request.referer.include?(\"cancel\")\n      request.referer\n    else\n      order_path(order.shopify_id)\n    end\n  redirect_to(redirect_url,\n    notice: 'Order cancelled successfully!')\nend\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 11406245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16fc1b844539d3afeb0d3afa7d35c912?s=128&d=identicon&r=PG&f=1", "display_name": "gina", "link": "https://stackoverflow.com/users/11406245/gina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563812802, "creation_date": 1563810936, "last_edit_date": 1563812466, "question_id": 57149684, "link": "https://stackoverflow.com/questions/57149684/rails-request-referer-didnt-redirect-to-the-previous-url", "title": "Rails request.referer didnt redirect to the previous url", "body": "<p>I am trying to redirect the canceled page to the previous one when the item's been canceled but at the moment the codes below don't work - can you help?</p>\n\n<pre><code>def destroy\n  order.cancel\n\n  respond_to do |format|\n    format.html { redirect_to request.referer.include? \"cancel\" ? request.referer : order_path(order.shopify_id), notice: 'Order cancelled successfully!' }\n  end\nend\n\ndef cancel\n  shopify_order.cancel\n\n  fulfilment_orders.each do |fo|\n    fo.update!(state: :cancelled) unless fo.state.in?(%i[shipped delivered could_not_deliver])\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1563809505, "post_id": 57149156, "comment_id": 100814048, "body": "What&#39;s wrong with your solution?"}, {"owner": {"reputation": 3, "user_id": 11819975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c86ec1a5bc495ccf9e2a021f2456ceeb?s=128&d=identicon&r=PG&f=1", "display_name": "samibacon", "link": "https://stackoverflow.com/users/11819975/samibacon"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1563809889, "post_id": 57149156, "comment_id": 100814264, "body": "It works, but I&#39;m trying to make my output into an array."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 1, "creation_date": 1563809978, "post_id": 57149156, "comment_id": 100814311, "body": "The product result in this case is a Numeric, not an array. Anyway, maybe like this? <code>[nums.reject(&amp;:negative?).inject(:*)]</code>"}, {"owner": {"reputation": 3, "user_id": 11819975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c86ec1a5bc495ccf9e2a021f2456ceeb?s=128&d=identicon&r=PG&f=1", "display_name": "samibacon", "link": "https://stackoverflow.com/users/11819975/samibacon"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1563810225, "post_id": 57149156, "comment_id": 100814438, "body": "[Solved] Omg. Thank you! I did try that, but I forgot to switch puts into print!!"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1563822083, "post_id": 57149156, "comment_id": 100819550, "body": "Voted to close since this is solved. You can consider making your own answer."}], "owner": {"reputation": 3, "user_id": 11819975, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c86ec1a5bc495ccf9e2a021f2456ceeb?s=128&d=identicon&r=PG&f=1", "display_name": "samibacon", "link": "https://stackoverflow.com/users/11819975/samibacon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563809036, "creation_date": 1563809036, "question_id": 57149156, "link": "https://stackoverflow.com/questions/57149156/how-to-write-a-method-that-accepts-and-returns-an-array-with-conditions", "title": "How to write a method that accepts and returns an array with conditions", "body": "<p>I am trying to write a method that accepts and returns an array of the total product of all positive numbers only. Thank you!</p>\n\n<pre><code>def positive_product(nums)\n\n    nums.reject(&amp;:negative?).inject(:*)\n\nend\n\n\nputs positive_product([5, 4, 3])\nputs positive_product([-1, 2, -4, 2])\nputs positive_product([-2, 4, 1])\nputs positive_product([2, 1])\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord", "associations"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1563808325, "post_id": 57148764, "comment_id": 100813326, "body": "<code>Ticket.joins(&#39;LEFT JOIN ON tickets.id = purchases.ticket_id&#39;).where(purchases: {ticket_id: nil}</code> you forgot to specify the table name e.g. <code>Ticket.joins(&#39;LEFT JOIN purchases ON tickets.id = purchases.ticket_id&#39;).where(purchases: {ticket_id: nil}</code>"}], "answers": [{"comments": [{"owner": {"reputation": 28, "user_id": 5278140, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207810309322310/picture?type=large", "display_name": "BiggeekTX", "link": "https://stackoverflow.com/users/5278140/biggeektx"}, "edited": false, "score": 1, "creation_date": 1563809466, "post_id": 57149115, "comment_id": 100814029, "body": "Did not notice at first that your Ticket model has a <code>has_one</code> relationship with purchase. For a <code>has_one</code> the include needs to use singular, but the where uses plural. Fixed this in the answer just now."}], "tags": [], "owner": {"reputation": 28, "user_id": 5278140, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207810309322310/picture?type=large", "display_name": "BiggeekTX", "link": "https://stackoverflow.com/users/5278140/biggeektx"}, "is_accepted": true, "score": 1, "last_activity_date": 1563809354, "last_edit_date": 1563809354, "creation_date": 1563808869, "answer_id": 57149115, "question_id": 57148764, "link": "https://stackoverflow.com/questions/57148764/rails-except-query-filter-out-records-present-in-a-joint-table/57149115#57149115", "title": "Rails EXCEPT query (filter out records present in a joint table)", "body": "<p>If you're just trying to get the list of <code>Ticket</code> records with no associated purchases, use <code>.includes</code> instead. In my experience a <code>join</code> will fail with no associated records, and this will keep you from needing to write any actual SQL.</p>\n\n<p><code>Ticket.includes(:purchase).where(purchases: { ticket_id: nil} )</code></p>\n\n<p>The generated SQL query is a bit more difficult to read as a human, but I've used it several times and not seen any real difference in performance.</p>\n"}], "owner": {"reputation": 47, "user_id": 10197892, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3yPxc.jpg?s=128&g=1", "display_name": "Tommy5230", "link": "https://stackoverflow.com/users/10197892/tommy5230"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 57149115, "answer_count": 1, "score": 2, "last_activity_date": 1563809354, "creation_date": 1563807656, "question_id": 57148764, "link": "https://stackoverflow.com/questions/57148764/rails-except-query-filter-out-records-present-in-a-joint-table", "title": "Rails EXCEPT query (filter out records present in a joint table)", "body": "<p>I'm trying to list the model instances that do not have the association with another model created yet.</p>\n\n<p>Here is how my models are related:</p>\n\n<p>Ticket.rb:</p>\n\n<pre><code>has_one :purchase\nhas_one :user, through: :purchase\n</code></pre>\n\n<p>User.rb:</p>\n\n<pre><code>has_many :purchases\nhas_many :tickets, through: :purchases\n</code></pre>\n\n<p>Purchase.rb:</p>\n\n<pre><code>belongs_to :ticket\nbelongs_to :user\n</code></pre>\n\n<p>I have an SQL query but have troubles when translating it to rails:</p>\n\n<pre><code>SELECT id FROM tickets\nEXCEPT\nSELECT ticket_id FROM purchases;\n</code></pre>\n\n<p>It works great as it returns all ids of the tickets that are not purchased yet.</p>\n\n<p>I've tried this:</p>\n\n<pre><code>Ticket.joins('LEFT JOIN ON tickets.id = purchases.ticket_id').where(purchases: {ticket_id: nil})\n</code></pre>\n\n<p>but it seems not to be the right direction.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "capistrano", "puma"], "comments": [{"owner": {"reputation": 1651, "user_id": 4414956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a7ff9df014e5c92697372747c15d77?s=128&d=identicon&r=PG&f=1", "display_name": "nuaky", "link": "https://stackoverflow.com/users/4414956/nuaky"}, "edited": false, "score": 0, "creation_date": 1563806387, "post_id": 57147862, "comment_id": 100812187, "body": "what is your Uglifier gem version?"}, {"owner": {"reputation": 71, "user_id": 11756281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090ea26c11c757c33832e5bc20f01b4d?s=128&d=identicon&r=PG&f=1", "display_name": "Yozuu", "link": "https://stackoverflow.com/users/11756281/yozuu"}, "reply_to_user": {"reputation": 1651, "user_id": 4414956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a7ff9df014e5c92697372747c15d77?s=128&d=identicon&r=PG&f=1", "display_name": "nuaky", "link": "https://stackoverflow.com/users/4414956/nuaky"}, "edited": false, "score": 0, "creation_date": 1563806670, "post_id": 57147862, "comment_id": 100812368, "body": "gem &#39;uglifier&#39;, &#39;~&gt; 4.1&#39;, &#39;&gt;= 4.1.20&#39;"}, {"owner": {"reputation": 1651, "user_id": 4414956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a7ff9df014e5c92697372747c15d77?s=128&d=identicon&r=PG&f=1", "display_name": "nuaky", "link": "https://stackoverflow.com/users/4414956/nuaky"}, "edited": false, "score": 0, "creation_date": 1563807090, "post_id": 57147862, "comment_id": 100812601, "body": "this error can be misleading. It could also mean that there is some syntax error somewhere in your js code. If solution with <code>Uglifier.new(harmony: true)</code> not working, try to look for some syntax errors in js files maybe"}, {"owner": {"reputation": 71, "user_id": 11756281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090ea26c11c757c33832e5bc20f01b4d?s=128&d=identicon&r=PG&f=1", "display_name": "Yozuu", "link": "https://stackoverflow.com/users/11756281/yozuu"}, "reply_to_user": {"reputation": 1651, "user_id": 4414956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a7ff9df014e5c92697372747c15d77?s=128&d=identicon&r=PG&f=1", "display_name": "nuaky", "link": "https://stackoverflow.com/users/4414956/nuaky"}, "edited": false, "score": 0, "creation_date": 1563807322, "post_id": 57147862, "comment_id": 100812731, "body": "I delete the file that is mentioned. I said it above so I have no error js. It&#39;s really weird"}], "owner": {"reputation": 71, "user_id": 11756281, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/090ea26c11c757c33832e5bc20f01b4d?s=128&d=identicon&r=PG&f=1", "display_name": "Yozuu", "link": "https://stackoverflow.com/users/11756281/yozuu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563807100, "creation_date": 1563804536, "last_edit_date": 1563807100, "question_id": 57147862, "link": "https://stackoverflow.com/questions/57147862/error-in-cap-production-deploy-with-assetsprecompile", "title": "Error in &quot;cap production deploy&quot; with assets:precompile", "body": "<p>I deploy my application rails with capistrano and I encounter an error when I type \"cap production deploy\". When I type this command at the beginning it works well but it is from assets: precompile that it bug</p>\n\n<p>I have been looking for hours for solutions but none works.\nI tried to change</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>config.assets.js_compressor = :uglifier\n</code></pre>\n\n<p>To</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>config.assets.js_compressor = Uglifier.new(harmony: true)\n</code></pre>\n\n<p>In production.rb but no results.\nThe worst is that the name that the error shows me is no longer in my project</p>\n\n<p>This is the error.</p>\n\n<pre><code>Uglifier::Error: Unexpected token: name (CarouselTouchPlugin). To use ES6 syntax, harmony mode must be enabled with Uglifier.new(:harmony =&gt; true).\n</code></pre>\n\n<p>I'm so desperate aha I do not understand why it does not work\nHere the full error message <a href=\"https://pastebin.com/FXaSF2iR\" rel=\"nofollow noreferrer\">https://pastebin.com/FXaSF2iR</a></p>\n"}, {"tags": ["c#", "ruby", "process"], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 2667827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/743d9d5ae47dec7f2ccd55fa6f89d3ce?s=128&d=identicon&r=PG", "display_name": "Yucel Daglar", "link": "https://stackoverflow.com/users/2667827/yucel-daglar"}, "is_accepted": false, "score": 0, "last_activity_date": 1563859652, "creation_date": 1563859652, "answer_id": 57157216, "question_id": 57147458, "link": "https://stackoverflow.com/questions/57147458/calling-a-ruby-script-from-c-process-not-exit/57157216#57157216", "title": "Calling a ruby script from c#, process not exit", "body": "<p>Finally I figured it out. If I send .rb filename as an argument, everthing works fine.</p>\n"}], "owner": {"reputation": 51, "user_id": 2667827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/743d9d5ae47dec7f2ccd55fa6f89d3ce?s=128&d=identicon&r=PG", "display_name": "Yucel Daglar", "link": "https://stackoverflow.com/users/2667827/yucel-daglar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1563859652, "creation_date": 1563803297, "question_id": 57147458, "link": "https://stackoverflow.com/questions/57147458/calling-a-ruby-script-from-c-process-not-exit", "title": "Calling a ruby script from c#, process not exit", "body": "<p>I try to execute a .rb file from c#. Process never exits.</p>\n\n<pre><code>       var result = new Process\n       {\n           StartInfo = new ProcessStartInfo()\n           {\n               FileName = \"ruby \\\"someRubyFile.rb\\\"\",\n               UseShellExecute = false,\n               CreateNoWindow = true\n           }\n       };\n       result.Start();\n       result.WaitForExit();\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "omnicontacts-gem"], "owner": {"reputation": 599, "user_id": 11544569, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xEqDN.jpg?s=128&g=1", "display_name": "RomanOks", "link": "https://stackoverflow.com/users/11544569/romanoks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1563797731, "creation_date": 1563797731, "question_id": 57145864, "link": "https://stackoverflow.com/questions/57145864/omnicontacts-rails", "title": "OmniContacts Rails", "body": "<p>Task: import contacts from Gmail.</p>\n\n<p>I use gem omnicontacts.</p>\n\n<p><em>omnicontacts.rb:</em></p>\n\n<pre><code>Rails.application.middleware.use OmniContacts::Builder do\n  importer :gmail, ENV['API_KEY'], ENV['API_SECRET'], {:redirect_path =&gt; '/contacts/gmail/callback'}\n</code></pre>\n\n<p><em>My controller:</em></p>\n\n<pre><code>def callback\n    provider = params[:importer]\n    @contacts = request.env['omnicontacts.contacts']\n    @user = request.env['omnicontacts.user']\n    if @contacts.nil?\n      session[:message] = {\n          :text =&gt; \"Sorry, we didn't find any of your friends at this time. Please try again later.\",\n          :type =&gt; 'notice'\n      }\n    else\n    ...\nend\n</code></pre>\n\n<p><em>My routes.rb:</em></p>\n\n<pre><code>get '/contacts/:importer'  =&gt; 'contacts_importer#callback', as: :import_contacts\nget '/contacts/:importer/callback' =&gt; 'contacts_importer#callback'\nget '/contacts/failure' =&gt; 'contacts_importer#failure'\n</code></pre>\n\n<p>I do everything as indicated in the documentation <a href=\"https://github.com/Diego81/omnicontacts\" rel=\"nofollow noreferrer\">https://github.com/Diego81/omnicontacts</a></p>\n\n<p>But <em>@contacts</em> and <em>@user</em> is always nil.</p>\n\n<p>Why?</p>\n"}, {"tags": ["ruby", "treetop"], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 11818400, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8BDu1RGjfqo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reJU93Q_pRWQsxqDxtFxVeRUUqGxg/photo.jpg?sz=128", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/11818400/sebastian"}, "edited": false, "score": 0, "creation_date": 1564132078, "post_id": 57173081, "comment_id": 100937885, "body": "Thank you very much for your answer! This solved my problem."}], "tags": [], "owner": {"reputation": 2278, "user_id": 1772828, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b7831a9963c2207377c46468f6e797a?s=128&d=identicon&r=PG", "display_name": "cliffordheath", "link": "https://stackoverflow.com/users/1772828/cliffordheath"}, "is_accepted": true, "score": 0, "last_activity_date": 1563921616, "creation_date": 1563921616, "answer_id": 57173081, "question_id": 57144903, "link": "https://stackoverflow.com/questions/57144903/how-do-you-handle-no-nonterminal-node-in-a-0-or-more-statement-when-using-elemen/57173081#57173081", "title": "How do you handle no nonterminal node in a 0 or more statement when using elements.map in Ruby Treetop?", "body": "<p>The SyntaxNode at offset 16 contains an empty array of children, for the iterated sub-rule. It is needed for the packrat parsing algorithm to work. You should not just call to_array on an arbitrary SyntaxNode, but should handle it specially. The best way is to label it and ask if the labelled is empty before iterating over its elements:</p>\n\n<pre><code>rule textStructure\n  beginDoc twoOrMoreNewLines nested:(block twoOrMoreNewLines)* endDoc &lt;Structure&gt;\nend\n</code></pre>\n\n<p>...</p>\n\n<pre><code>class Structure &lt; Treetop::Runtime::SyntaxNode\n  def to_array\n    return nested.empty? ? [] : nested.elements.map {|x| x.to_array}\n  end\nend\n</code></pre>\n\n<p>or something like that.</p>\n"}], "owner": {"reputation": 5, "user_id": 11818400, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8BDu1RGjfqo/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reJU93Q_pRWQsxqDxtFxVeRUUqGxg/photo.jpg?sz=128", "display_name": "Sebastian", "link": "https://stackoverflow.com/users/11818400/sebastian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 57173081, "answer_count": 1, "score": 0, "last_activity_date": 1563921616, "creation_date": 1563794184, "question_id": 57144903, "link": "https://stackoverflow.com/questions/57144903/how-do-you-handle-no-nonterminal-node-in-a-0-or-more-statement-when-using-elemen", "title": "How do you handle no nonterminal node in a 0 or more statement when using elements.map in Ruby Treetop?", "body": "<p>I am trying to create a custom syntax node class that maps all its nonterminal nodes. The problem is that one of the nodes does not necessary have to be there which creates a problem when using the elements.map in the custom syntax node class, as the syntax node tree creates the SyntaxNode: \"\" for it instead, which I have not created a class for.</p>\n\n<pre><code>grammar Foo\n  rule textStructure\n    beginDoc twoOrMoreNewLines (block twoOrMoreNewLines)* endDoc &lt;Structure&gt;\n  end\n\n  rule beginDoc\n    'begin document' &lt;BeginLine&gt;\n  end\n\n  rule twoOrMoreNewLines\n    \"\\n\" 2.. &lt;NewLine&gt;\n  end\n\n  rule block\n    !beginDoc information:((!\"\\n\" .)+) &lt;BlockLine&gt;\n  end\n\n  rule endDoc\n    'end document' &lt;EndLine&gt;\n  end\nend\n\n# On a different file\n\n\nmodule Foo\n  class Structure &lt; Treetop::Runtime::SyntaxNode\n    def to_array\n      return self.elements.map {|x| x.to_array}\n    end\n  end\n\n  class BeginLine &lt; Treetop::Runtime::SyntaxNode\n    def to_array\n      return self.text_value\n    end\n  end\n\n  class NewLine &lt; Treetop::Runtime::SyntaxNode\n    def to_array\n      return self.text_value\n    end\n  end\n\n  class BlockLine &lt; Treetop::Runtime::SyntaxNode\n    def to_array\n      return self.information.text_value\n    end\n  end\n\n  class EndLine &lt; Treetop::Runtime::SyntaxNode\n    def to_array\n      return self.text_value\n    end\n  end\nend\n</code></pre>\n\n<p>For example if I try to parse: \"begin document\\n\\nend document\". Then I would expect this as an output: [\"begin document\", \"\\n\\n\", \"end document\"], but instead I get the error message: <code>block in to_array': undefined method</code>to_array' for SyntaxNode offset=16, \"\":Treetop::Runtime::SyntaxNode (NoMethodError).</p>\n\n<p>So I did some further investigation and discovered that the syntax node tree does indeed contain a SyntaxNode \"\" at offset=16, which I believe is due to (block twoOrMoreNewLines)* not being there.</p>\n\n<p>How do I handle this problem? Is there a way to avoid SyntaxNode \"\" from being created?</p>\n"}, {"tags": ["ruby", "git", "jenkins", "jenkins-plugins"], "answers": [{"comments": [{"owner": {"reputation": 353, "user_id": 10641015, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rb6K-6eC5TI/AAAAAAAAAAI/AAAAAAAAAGw/E-daD0VOiz0/photo.jpg?sz=128", "display_name": "jadejoe", "link": "https://stackoverflow.com/users/10641015/jadejoe"}, "edited": false, "score": 0, "creation_date": 1564796315, "post_id": 57152423, "comment_id": 101159299, "body": "Thanks comment   so tell me about how to export shell/job  I tried exprot jenkins shell but not sucess  thanks"}, {"owner": {"reputation": 353, "user_id": 10641015, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rb6K-6eC5TI/AAAAAAAAAAI/AAAAAAAAAGw/E-daD0VOiz0/photo.jpg?sz=128", "display_name": "jadejoe", "link": "https://stackoverflow.com/users/10641015/jadejoe"}, "edited": false, "score": 0, "creation_date": 1565054216, "post_id": 57152423, "comment_id": 101221347, "body": "add shell that command  ``` export PATH=&quot;/var/lib/jenkins/.rbenv/bin:$PATH&quot; eval &quot;$(rbenv init -)&quot; ```  resolved this issue  thanks"}, {"owner": {"reputation": 356, "user_id": 7141267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a294584e2eb117859a2497c098caa7e1?s=128&d=identicon&r=PG&f=1", "display_name": "piyush sachdeva", "link": "https://stackoverflow.com/users/7141267/piyush-sachdeva"}, "reply_to_user": {"reputation": 353, "user_id": 10641015, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rb6K-6eC5TI/AAAAAAAAAAI/AAAAAAAAAGw/E-daD0VOiz0/photo.jpg?sz=128", "display_name": "jadejoe", "link": "https://stackoverflow.com/users/10641015/jadejoe"}, "edited": false, "score": 0, "creation_date": 1565100554, "post_id": 57152423, "comment_id": 101240424, "body": "I am glad that it worked out for you, you can support my answer by an up vote if you think it was helpful!"}], "tags": [], "owner": {"reputation": 356, "user_id": 7141267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a294584e2eb117859a2497c098caa7e1?s=128&d=identicon&r=PG&f=1", "display_name": "piyush sachdeva", "link": "https://stackoverflow.com/users/7141267/piyush-sachdeva"}, "is_accepted": true, "score": 0, "last_activity_date": 1563822947, "creation_date": 1563822947, "answer_id": 57152423, "question_id": 57144724, "link": "https://stackoverflow.com/questions/57144724/jenkins-ruby-command-not-found-for-build/57152423#57152423", "title": "Jenkins: ruby command not found for build", "body": "<p>Since you are exporting ruby path in the PATH variable, you need to source .bash_profile at the beginning of your jenkins job so that it will export the variables for that shell/job.</p>\n\n<p>Thanks,\nPiyush</p>\n"}], "owner": {"reputation": 353, "user_id": 10641015, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-rb6K-6eC5TI/AAAAAAAAAAI/AAAAAAAAAGw/E-daD0VOiz0/photo.jpg?sz=128", "display_name": "jadejoe", "link": "https://stackoverflow.com/users/10641015/jadejoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 397, "favorite_count": 0, "accepted_answer_id": 57152423, "answer_count": 1, "score": 0, "last_activity_date": 1563842651, "creation_date": 1563793602, "last_edit_date": 1563842651, "question_id": 57144724, "link": "https://stackoverflow.com/questions/57144724/jenkins-ruby-command-not-found-for-build", "title": "Jenkins: ruby command not found for build", "body": "<p>I tried build ruby application using jenkins</p>\n\n<p>but, occuered error </p>\n\n<pre><code>/tmp/jenkins#############.sh: line : ruby: command not found\nBuild step 'Execute shell' marked build as failure\n</code></pre>\n\n<p>Make sure there is no ruby \u200b\u200bin the jenkins server</p>\n\n<pre><code>$ ruby -v\nruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-linux]\n\n$which ruby\n~/.rbenv/shims/ruby\n</code></pre>\n\n<p>I searched some issue but my problem not fix </p>\n\n<p>Since jenkins is installed from vps and not set from 0, I do not know the neighborhood well.</p>\n\n<p>Put .bash_profile for reference</p>\n\n<pre><code># .bash_profile\n\n# Get the aliases and functions\nif [ -f ~/.bashrc ]; then\n        . ~/.bashrc\nfi\n\n# User specific environment and startup programs\n\nPATH=$PATH:$HOME/.local/bin:$HOME/bin\n\nexport PATH\nexport PATH=\"$HOME/.rbenv/bin:$PATH\"\neval \"$(rbenv init -)\"\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3"], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 11539591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f70196f5d8b372232969cea4f7ae28?s=128&d=identicon&r=PG&f=1", "display_name": "developing", "link": "https://stackoverflow.com/users/11539591/developing"}, "edited": false, "score": 0, "creation_date": 1563795860, "post_id": 57145025, "comment_id": 100805654, "body": "hi thanks for you reply! but it threw back undefined method &quot;back&quot;"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 105, "user_id": 11539591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f70196f5d8b372232969cea4f7ae28?s=128&d=identicon&r=PG&f=1", "display_name": "developing", "link": "https://stackoverflow.com/users/11539591/developing"}, "edited": false, "score": 1, "creation_date": 1563801136, "post_id": 57145025, "comment_id": 100808729, "body": "@developing <code>:back</code> is a symbol not a method. Make sure you include the colon in front."}, {"owner": {"reputation": 33, "user_id": 3599799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8108f0af4c408db9c3d9f36c556c4eb2?s=128&d=identicon&r=PG&f=1", "display_name": "Hassan Akbar", "link": "https://stackoverflow.com/users/3599799/hassan-akbar"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1563883728, "post_id": 57145025, "comment_id": 100841482, "body": "@engineersmnky is right. You need to use back as a symbol.  inline <code>:back </code>"}], "tags": [], "owner": {"reputation": 33, "user_id": 3599799, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8108f0af4c408db9c3d9f36c556c4eb2?s=128&d=identicon&r=PG&f=1", "display_name": "Hassan Akbar", "link": "https://stackoverflow.com/users/3599799/hassan-akbar"}, "is_accepted": false, "score": 0, "last_activity_date": 1563883512, "last_edit_date": 1563883512, "creation_date": 1563794610, "answer_id": 57145025, "question_id": 57144487, "link": "https://stackoverflow.com/questions/57144487/redirect-to-the-previous-pagesame-pagewith-destroy-method/57145025#57145025", "title": "Redirect to the previous page(same page)with destroy method", "body": "<p>Have you tried :back? i.e. in controller</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>\nrespond_to do |format|\n  format.html { redirect_to :back }\nend\n\n</code></pre>\n\n<p>It will redirect to the page from where the request has arrived.</p>\n"}], "owner": {"reputation": 105, "user_id": 11539591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15f70196f5d8b372232969cea4f7ae28?s=128&d=identicon&r=PG&f=1", "display_name": "developing", "link": "https://stackoverflow.com/users/11539591/developing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563883512, "creation_date": 1563792927, "last_edit_date": 1563793649, "question_id": 57144487, "link": "https://stackoverflow.com/questions/57144487/redirect-to-the-previous-pagesame-pagewith-destroy-method", "title": "Redirect to the previous page(same page)with destroy method", "body": "<p>I am creating a cancel order page where customers can click on the cancel button and the page will render \"order canceled successfully\" and stay on the cancel page with the button disabled.\nI've googled and searched through it still not too sure how to achieve that.</p>\n\n<p>My destroy method:</p>\n\n<pre><code>def destroy\n  order.cancel\n  redirect_to order_path(order.shopify_id), notice: 'Order cancelled'\nend\n</code></pre>\n\n<p>My view:</p>\n\n<pre><code>&lt;/div&gt;\n  &lt;%= link_to 'Cancel Here', order_path(@order.shopify_id), method: :delete, class: 'btn btn-danger ' %&gt;\n\n\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "reactjs", "react-rails"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1563799212, "post_id": 57143857, "comment_id": 100807614, "body": "<code>remote: true</code> just adds a <code>data-remote</code> attribute to the form. jQuery Rails adds an ajax event handler to forms (and links) with the <code>data-remote</code> attribute. As \u0417\u0435\u043b\u0451\u043d\u044b\u0439 pointed out - its not magic. And its not something you want to use if you are using React as it will just get in the way."}], "answers": [{"tags": [], "owner": {"reputation": 4538, "user_id": 809830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdd9801d2717096282258b192edc7793?s=128&d=identicon&r=PG", "display_name": "Alex Kojin", "link": "https://stackoverflow.com/users/809830/alex-kojin"}, "is_accepted": false, "score": 0, "last_activity_date": 1563791423, "creation_date": 1563791423, "answer_id": 57144065, "question_id": 57143857, "link": "https://stackoverflow.com/questions/57143857/how-to-implement-remote-true-for-react-rails/57144065#57144065", "title": "How to implement remote: true for react (rails)?", "body": "<p>You need to use <code>rails-ujs</code> library.</p>\n\n<pre><code>import Rails from 'rails-ujs'; // for webpack\n</code></pre>\n\n<p>To submit a form run the next command:</p>\n\n<pre><code>Rails.fire(document.getElementByID('FORM-ID'), 'submit');\n</code></pre>\n"}], "owner": {"reputation": 485, "user_id": 7399323, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/64e3a4116517813a2042aed29f841ede?s=128&d=identicon&r=PG&f=1", "display_name": "evans", "link": "https://stackoverflow.com/users/7399323/evans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 159, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563791572, "creation_date": 1563790718, "last_edit_date": 1563791100, "question_id": 57143857, "link": "https://stackoverflow.com/questions/57143857/how-to-implement-remote-true-for-react-rails", "title": "How to implement remote: true for react (rails)?", "body": "<p>I create the form in this way:</p>\n\n<pre><code>= form_for Review.new do |f|\n  = react_component \"Popups/ReviewPopup\", {name: \"review-popup\"}\n</code></pre>\n\n<p>Inside the <code>Popup/PreviewPopup</code> I have a form field with the desired <code>name</code>.  </p>\n\n<p>And when click on the submit occurs:</p>\n\n<pre><code>const SendButton = ({ onSubmit }) =&gt; (\n  &lt;button\n    onSubmit={e =&gt; {\n      e.preventDefault();\n      onSubmit(e);\n\n    }}\n    className=\"button popup-footer__button\"\n  &gt;\n    Send\n  &lt;/button&gt;\n);\n</code></pre>\n\n<p>After that, without rebooting, data from the form should be sent and the message should appear in the browser.</p>\n\n<p>During a normal send  everything works perfectly.</p>\n\n<p>How to implement <code>remote: true</code>? I want to implement a <code>remote: true</code> and not to catch data from fields when the user click and send them using the <code>axios</code> to the server.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "firebird"], "comments": [{"owner": {"reputation": 14940, "user_id": 976391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a20cdd68e2d66033d22408a925a5761a?s=128&d=identicon&r=PG", "display_name": "Arioch &#39;The", "link": "https://stackoverflow.com/users/976391/arioch-the"}, "edited": false, "score": 0, "creation_date": 1563792785, "post_id": 57143350, "comment_id": 100803920, "body": "that is one crazy code, <code>... in ( null )</code>. Albeit there is yet more insane option <code>...not in ( null )</code>. See <a href=\"https://stackoverflow.com/questions/6362112/in-clause-with-null-or-is-null\" title=\"in clause with null or is null\">stackoverflow.com/questions/6362112/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 14940, "user_id": 976391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a20cdd68e2d66033d22408a925a5761a?s=128&d=identicon&r=PG", "display_name": "Arioch &#39;The", "link": "https://stackoverflow.com/users/976391/arioch-the"}, "edited": false, "score": 0, "creation_date": 1563794398, "post_id": 57144495, "comment_id": 100804822, "body": "this lib is broken (or we may say not polished yet) anyway if it manages to generate queries with <code>X in (null)</code> kinds of predicates. But that is FLOSS afterall, any FLOSS lib becomes part of <i>your</i> program that you just didn&#39;t write from scratch but took half-written. Does not relieve recipient from the second half of the work on your program, including on that now yours FLOSS lib."}, {"owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "edited": false, "score": 0, "creation_date": 1563795204, "post_id": 57144495, "comment_id": 100805260, "body": "Although it might not be suitable to do a <code>in (null)</code> but the firebird doesn&#39;t complaint about that and even gives back the right rows."}, {"owner": {"reputation": 14940, "user_id": 976391, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a20cdd68e2d66033d22408a925a5761a?s=128&d=identicon&r=PG", "display_name": "Arioch &#39;The", "link": "https://stackoverflow.com/users/976391/arioch-the"}, "reply_to_user": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "edited": false, "score": 0, "creation_date": 1563805817, "post_id": 57144495, "comment_id": 100811834, "body": "@shimu what do you mean by &quot;right rows&quot; ? and of course it would not complain. It also would not complain about <code>delete from tablename -- where....</code> - a syntactically valid construct, albeit clearly a lapse turning deletion of a small rowset into uncontrollable wipe of the whole table. Here is the script: it does not return 3 but only 2! <code>Select count(*) from ( select 1 as id, &#39;aaa&#39; as payload from rdb$database union all select 2, &#39;bbbbb&#39; from rdb$database union all select null, &#39;cc&#39; from rdb$database union all select 3, &#39;dddddd&#39; from rdb$database ) d  where d.id in (2,3,5, null)</code>"}], "tags": [], "owner": {"reputation": 21, "user_id": 10004749, "user_type": "registered", "profile_image": "https://graph.facebook.com/1801505883236342/picture?type=large", "display_name": "Mihai C", "link": "https://stackoverflow.com/users/10004749/mihai-c"}, "is_accepted": false, "score": 0, "last_activity_date": 1563792936, "creation_date": 1563792936, "answer_id": 57144495, "question_id": 57143350, "link": "https://stackoverflow.com/questions/57143350/problem-with-boolean-fields-in-active-record-with-firebird-database/57144495#57144495", "title": "Problem with boolean fields in active record with firebird database", "body": "<p>Normally, you can create a query like so <code>model.where(\"field IN (?)\", ['F', 'T'])</code> if you want to pass an array to look for, or just one value, like so: <code>model.where(\"field = ?\", 'T')</code>.</p>\n\n<p>I do not recommend meddling with internals of ActiveRecord. Do it at your own risk.</p>\n"}], "owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1563792936, "creation_date": 1563789008, "question_id": 57143350, "link": "https://stackoverflow.com/questions/57143350/problem-with-boolean-fields-in-active-record-with-firebird-database", "title": "Problem with boolean fields in active record with firebird database", "body": "<p>I'm upgrading a Rails application from 4.2 to 5.x. We are using a firebird database and recently found a <a href=\"https://github.com/FabioMR/firebird_adapter\" rel=\"nofollow noreferrer\">new adapter</a> that can be used with Rails 5 as well.<br>\nAfter testing  the application most of the stuff is working. But I have a problem with columns that are marked as a char field with the length of 1 - we are using this columns as boolean fields. 'F' means false and  'T' means true.</p>\n\n<p>In our application we query the database for such fields like this: </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>model.where(inaktiv: [false, nil]\n</code></pre>\n\n<p>Which results in an sql statement like this:</p>\n\n<blockquote>\n  <p>select * from model where inaktiv in ('f', null)</p>\n</blockquote>\n\n<p>The problem I have is the lowercase f. I searched in the active record gem where the mapping to string happens but I can't find the place. Where is this done?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "activesupport"], "comments": [{"owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "edited": false, "score": 0, "creation_date": 1563789491, "post_id": 57142654, "comment_id": 100801976, "body": "Did you restart your server / console and Spring"}, {"owner": {"reputation": 1322, "user_id": 11801415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/639b82f4bb7b8d9545d0fbc725cfcd36?s=128&d=identicon&r=PG&f=1", "display_name": "Lyzard Kyng", "link": "https://stackoverflow.com/users/11801415/lyzard-kyng"}, "edited": false, "score": 0, "creation_date": 1563970204, "post_id": 57142654, "comment_id": 100875929, "body": "Please clarify what error do you have now: <code>ArgumentError</code> or <code>LoadError</code> or both?"}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 10004749, "user_type": "registered", "profile_image": "https://graph.facebook.com/1801505883236342/picture?type=large", "display_name": "Mihai C", "link": "https://stackoverflow.com/users/10004749/mihai-c"}, "reply_to_user": {"reputation": 1271, "user_id": 6015670, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/900baefc5c7d81efc949c24d6e00ec7d?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo", "link": "https://stackoverflow.com/users/6015670/hugo"}, "edited": false, "score": 0, "creation_date": 1563791148, "post_id": 57143009, "comment_id": 100802920, "body": "If you restarted spring and rails and still get the error, it means your app still has references to the old version. It is possible you are autoloading something. A complete stack trace would be helpful. Either way, you can try like this: <code>class ::Api::V2::UsersController &lt; ApplicationController</code>."}, {"owner": {"reputation": 1271, "user_id": 6015670, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/900baefc5c7d81efc949c24d6e00ec7d?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo", "link": "https://stackoverflow.com/users/6015670/hugo"}, "edited": false, "score": 0, "creation_date": 1563791755, "post_id": 57143009, "comment_id": 100803297, "body": "Thanks but the problem persists."}, {"owner": {"reputation": 21, "user_id": 10004749, "user_type": "registered", "profile_image": "https://graph.facebook.com/1801505883236342/picture?type=large", "display_name": "Mihai C", "link": "https://stackoverflow.com/users/10004749/mihai-c"}, "reply_to_user": {"reputation": 1271, "user_id": 6015670, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/900baefc5c7d81efc949c24d6e00ec7d?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo", "link": "https://stackoverflow.com/users/6015670/hugo"}, "edited": false, "score": 0, "creation_date": 1563793280, "post_id": 57143009, "comment_id": 100804191, "body": "After your edit, are you sure the you still version your API? <code>LoadError - Unable to autoload constant Api::UsersController, expected ...&#47;app&#47;controllers&#47;api&#47;users_controller.rb to define it:</code> means it is supposed to be <code>class Api::UsersController &lt; ApplicationController</code> under <code>&#47;controllers&#47;api</code> and <code>application_controller.rb</code> under <code>&#47;controllers</code> folder"}, {"owner": {"reputation": 1271, "user_id": 6015670, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/900baefc5c7d81efc949c24d6e00ec7d?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo", "link": "https://stackoverflow.com/users/6015670/hugo"}, "edited": false, "score": 0, "creation_date": 1563968589, "post_id": 57143009, "comment_id": 100875058, "body": "Yes, that&#39;s the case."}], "tags": [], "owner": {"reputation": 21, "user_id": 10004749, "user_type": "registered", "profile_image": "https://graph.facebook.com/1801505883236342/picture?type=large", "display_name": "Mihai C", "link": "https://stackoverflow.com/users/10004749/mihai-c"}, "is_accepted": false, "score": 1, "last_activity_date": 1563787790, "creation_date": 1563787790, "answer_id": 57143009, "question_id": 57142654, "link": "https://stackoverflow.com/questions/57142654/argumenterror-a-copy-of-apiv2-has-been-removed-from-the-module-tree-but-is-s/57143009#57143009", "title": "ArgumentError - A copy of Api::V2 has been removed from the module tree but is still active!:", "body": "<p>In order for <code>class Api::V2::UsersController &lt; ApplicationController</code> to work, your folder structure should be <code>/controllers/api/v2/users_controller.rb</code> and the <code>application_controller.rb</code> file should be under <code>/controllers</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1322, "user_id": 11801415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/639b82f4bb7b8d9545d0fbc725cfcd36?s=128&d=identicon&r=PG&f=1", "display_name": "Lyzard Kyng", "link": "https://stackoverflow.com/users/11801415/lyzard-kyng"}, "is_accepted": false, "score": 0, "last_activity_date": 1563903475, "creation_date": 1563903475, "answer_id": 57169508, "question_id": 57142654, "link": "https://stackoverflow.com/questions/57142654/argumenterror-a-copy-of-apiv2-has-been-removed-from-the-module-tree-but-is-s/57169508#57169508", "title": "ArgumentError - A copy of Api::V2 has been removed from the module tree but is still active!:", "body": "<p>Ruby class names' parts divided by <code>::</code> are namespaces and should be embraced by <code>module</code> keyword, so class <code>Api::V2::UsersController</code> should be defined as</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>module Api\n  module V2\n    class UsersController &lt; ApplicationController\n#or\nclass Api::V2::UsersController &lt; ApplicationController\n</code></pre>\n\n<p>and placed, as @MihaiColceriu said, under <code>/controllers/api/v2/users_controller.rb</code></p>\n\n<p>If you have <strong>/controllers/api/users_controller.rb</strong> it should define <code>Api::UsersController</code> class</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>module Api\n  class UsersController &lt; ApplicationController\n</code></pre>\n\n<p>Please pay special attention that class name with namespaces and filename with directories should be consistent and uniquely match each other</p>\n"}], "owner": {"reputation": 1271, "user_id": 6015670, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/900baefc5c7d81efc949c24d6e00ec7d?s=128&d=identicon&r=PG&f=1", "display_name": "Hugo", "link": "https://stackoverflow.com/users/6015670/hugo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1563903475, "creation_date": 1563786619, "last_edit_date": 1563791861, "question_id": 57142654, "link": "https://stackoverflow.com/questions/57142654/argumenterror-a-copy-of-apiv2-has-been-removed-from-the-module-tree-but-is-s", "title": "ArgumentError - A copy of Api::V2 has been removed from the module tree but is still active!:", "body": "<p>I must have messed up with my api in some ways. I'm now getting the following error message:</p>\n\n<blockquote>\n  <p>ArgumentError - A copy of Api::V2 has been removed from the module\n  tree but is still active!:</p>\n</blockquote>\n\n<p>I'm not sure how to solve this. Some of my Api controllers looks like this:</p>\n\n<pre><code>class Api::V2::UsersController &lt; ApplicationController\n</code></pre>\n\n<p>But it used to be like this:</p>\n\n<pre><code>module Api\n  module V2\n    class Api::V2::UsersController &lt; ApplicationController\n</code></pre>\n\n<p>What's the correct format and how can I solve this issue? Thank you.</p>\n\n<p>EDIT:</p>\n\n<pre><code>.../active_support/dependencies.rb:457: warning: already initialized constant Api\n.../active_support/dependencies.rb:457: warning: previous definition of Api was here\n\nLoadError - Unable to autoload constant Api::UsersController, expected .../app/controllers/api/users_controller.rb to define it:\n</code></pre>\n\n<p>I also have both <strong>api/users_controller.rb</strong> and <strong>api/v2/users_controller.rb</strong> and both seem to have the same issue.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 1, "creation_date": 1563784056, "post_id": 57141836, "comment_id": 100799083, "body": "<code>your_string[1...-1]</code> should be enough."}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1563784413, "post_id": 57141836, "comment_id": 100799242, "body": "Where are you getting this string from and what have you tried? If you could add some context that would be great - it would make it a lot easier for others to help get a solution :)"}, {"owner": {"reputation": 71, "user_id": 11205087, "user_type": "registered", "profile_image": "https://graph.facebook.com/901939949837556/picture?type=large", "display_name": "Umesh Kushwaha", "link": "https://stackoverflow.com/users/11205087/umesh-kushwaha"}, "edited": false, "score": 0, "creation_date": 1563784415, "post_id": 57141836, "comment_id": 100799244, "body": "Getting this &quot;&#39;5&#39;, &#39;6&#39;, &#39;12&#39;&quot; instead of this [&#39;5&#39;, &#39;6&#39;, &#39;12&#39;]"}, {"owner": {"reputation": 71, "user_id": 11205087, "user_type": "registered", "profile_image": "https://graph.facebook.com/901939949837556/picture?type=large", "display_name": "Umesh Kushwaha", "link": "https://stackoverflow.com/users/11205087/umesh-kushwaha"}, "edited": false, "score": 0, "creation_date": 1563784508, "post_id": 57141836, "comment_id": 100799284, "body": "Srack- I am getting this string in params."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1563784528, "post_id": 57141836, "comment_id": 100799297, "body": "Ok, now I get it, you want to convert string into an array, right?"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1563784580, "post_id": 57141836, "comment_id": 100799320, "body": "Thanks Umesh - I&#39;d suggest having a look at your form then, to ensure the data comes through directly and avoid having to convert. Might be useful to update your question to reflect this and include the code for the form itself."}, {"owner": {"reputation": 71, "user_id": 11205087, "user_type": "registered", "profile_image": "https://graph.facebook.com/901939949837556/picture?type=large", "display_name": "Umesh Kushwaha", "link": "https://stackoverflow.com/users/11205087/umesh-kushwaha"}, "edited": false, "score": 0, "creation_date": 1563784777, "post_id": 57141836, "comment_id": 100799409, "body": "It&#39;s an angular + rails based application so I can&#39;t change the front end part... I have to handle the given params."}], "answers": [{"tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": false, "score": 0, "last_activity_date": 1563785552, "last_edit_date": 1563785552, "creation_date": 1563784858, "answer_id": 57142151, "question_id": 57141836, "link": "https://stackoverflow.com/questions/57141836/how-to-remove-double-quote-from-array-string-in-ruby/57142151#57142151", "title": "How to remove double quote from array string in Ruby?", "body": "<p>It's very dangerous, but this does what you want:</p>\n\n<pre><code>eval \"['5', '6', '12']\"\n# =&gt; [\"5\", \"6\", \"12\"]\n</code></pre>\n\n<p><strong>I wouldn't recommend this, at all</strong> - I'd recommend working on a complete solution so the form data comes through in a manner that works with your backend.</p>\n\n<p>With this approach, if someone manually updated the form field to contain, for example, <code>\"User.destroy_all\"</code>, that would be executed. Hence why I'd <em>strongly</em> recommend you look at a full solution to this that includes ensuring you receive the data in the correct format.</p>\n\n<p>I've written this answer hoping it provides a use case in some manner, ideally to get your team to correct the data you're receiving so you can handle it safely :) Hope it's useful!</p>\n"}, {"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 5, "last_activity_date": 1563784862, "creation_date": 1563784862, "answer_id": 57142152, "question_id": 57141836, "link": "https://stackoverflow.com/questions/57141836/how-to-remove-double-quote-from-array-string-in-ruby/57142152#57142152", "title": "How to remove double quote from array string in Ruby?", "body": "<p>Given the actual input you've provided (i.e. not valid JSON), this won't quite work...</p>\n\n<p>But usually, what I <em>expect</em> the correct answer to be in situations like this is - You should parse the JSON:</p>\n\n<pre><code>require 'json'\n\nJSON.parse '[\"5\", \"6\", \"12\"]'\n  #=&gt; [\"5\", \"6\", \"12\"]\n</code></pre>\n\n<p>If you're in control of the input, I would suggest ensuring you're providing valid JSON data.</p>\n"}], "owner": {"reputation": 71, "user_id": 11205087, "user_type": "registered", "profile_image": "https://graph.facebook.com/901939949837556/picture?type=large", "display_name": "Umesh Kushwaha", "link": "https://stackoverflow.com/users/11205087/umesh-kushwaha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 101, "favorite_count": 0, "closed_date": 1563797359, "accepted_answer_id": 57142152, "answer_count": 2, "score": -4, "last_activity_date": 1563785552, "creation_date": 1563783867, "last_edit_date": 1563784243, "question_id": 57141836, "link": "https://stackoverflow.com/questions/57141836/how-to-remove-double-quote-from-array-string-in-ruby", "closed_reason": "Not suitable for this site", "title": "How to remove double quote from array string in Ruby?", "body": "<p>I am getting the array in this form <code>\"['5', '6', '12']\"</code> and I want to remove the double quote and get this array <code>['5', '6', '12']</code> in this form.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "is_accepted": true, "score": 5, "last_activity_date": 1563780107, "creation_date": 1563780107, "answer_id": 57140945, "question_id": 57140800, "link": "https://stackoverflow.com/questions/57140800/what-object-does-env-return-in-ruby/57140945#57140945", "title": "What object does ENV return in Ruby?", "body": "<p>It's a custom Object with Hash-like functionality mostly implemented in C.</p>\n\n<p><a href=\"https://github.com/ruby/ruby/blob/trunk/hash.c#L4944\" rel=\"noreferrer\">https://github.com/ruby/ruby/blob/trunk/hash.c#L4944</a></p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 3, "last_activity_date": 1563791412, "creation_date": 1563791412, "answer_id": 57144061, "question_id": 57140800, "link": "https://stackoverflow.com/questions/57140800/what-object-does-env-return-in-ruby/57144061#57144061", "title": "What object does ENV return in Ruby?", "body": "<p>There is nothing in the Ruby Language Specification that requires <code>ENV</code> to be implemented in any particular way. As long as it responds to the right messages in the right way, it can be anything it wants.</p>\n\n<p>For example, in Rubinius, <code>ENV</code> is implemented in a class called <code>Rubinius::EnvironmentVariables</code> that implements part of the <code>Hash</code> protocol and also mixes in <code>Enumerable</code>: <a href=\"https://github.com/rubinius/rubinius/blob/master/core/env.rb\" rel=\"nofollow noreferrer\">https://github.com/rubinius/rubinius/blob/master/core/env.rb</a> .</p>\n"}], "owner": {"reputation": 1341, "user_id": 11089758, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQ5gw.jpg?s=128&g=1", "display_name": "S.Goswami", "link": "https://stackoverflow.com/users/11089758/s-goswami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 57140945, "answer_count": 2, "score": 3, "last_activity_date": 1563791412, "creation_date": 1563779579, "question_id": 57140800, "link": "https://stackoverflow.com/questions/57140800/what-object-does-env-return-in-ruby", "title": "What object does ENV return in Ruby?", "body": "<p>There's an ENV variable we all know. It returns an Object. But the return value of ENV is visually similar to a Hash. But it's really not. </p>\n\n<p>For example:</p>\n\n<pre><code>&gt; ENV\n=&gt; {\"SHELL\"=&gt;\"/bin/bash\", \"SESSION_MANAGER\"=&gt;\"local/archlinux:@/tmp/.ICE-unix/613,unix/archlinux:/tmp/.ICE-unix/613\", \"COLORTERM\"=&gt;\"truecolor\", \"XDG_CONFIG_DIRS\"=&gt;\"/etc/xdg\", \"XDG_MENU_PREFIX\"=&gt;\"xfce-\", \"SSH_AUTH_SOCK\"=&gt;\"/tmp/ssh-Al0pdO1R5970/agent.622\", \"DESKTOP_SESSION\"=&gt;\"Xfce Session\", \"SSH_AGENT_PID\"=&gt;\"623\", \"GTK_MODULES\"=&gt;\"canberra-gtk-module:canberra-gtk-module\", \"XDG_SEAT\"=&gt;\"seat0\", \"PWD\"=&gt;\"/home/sourav\", \"LOGNAME\"=&gt;\"sourav\", \"XDG_SESSION_TYPE\"=&gt;\"x11\", \"XAUTHORITY\"=&gt;\"/home/sourav/.Xauthority\", \"HOME\"=&gt;\"/home/sourav\", \"LANG\"=&gt;\"en_GB.UTF-8\", \"XDG_CURRENT_DESKTOP\"=&gt;\"XFCE\", \"VTE_VERSION\"=&gt;\"5603\", \"INVOCATION_ID\"=&gt;\"6d4dc7a91cc141e691436cb850e18f8d\", \"GLADE_CATALOG_PATH\"=&gt;\":\", \"XDG_SESSION_CLASS\"=&gt;\"user\", \"TERM\"=&gt;\"xterm-256color\", \"USER\"=&gt;\"sourav\", \"DISPLAY\"=&gt;\":0.0\", \"SHLVL\"=&gt;\"2\", \"XDG_VTNR\"=&gt;\"1\", \"XDG_SESSION_ID\"=&gt;\"1\", \"TILIX_ID\"=&gt;\"f2480263-263e-408f-be36-8105e71256a6\", \"MOZ_PLUGIN_PATH\"=&gt;\"/usr/lib/mozilla/plugins\", \"GLADE_MODULE_PATH\"=&gt;\":\", \"XDG_RUNTIME_DIR\"=&gt;\"/run/user/1000\", \"GLADE_PIXMAP_PATH\"=&gt;\":\", \"JOURNAL_STREAM\"=&gt;\"9:25041\", \"XDG_DATA_DIRS\"=&gt;\"/usr/local/share:/usr/share\", \"PATH\"=&gt;\"/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl:/home/sourav/.rvm/bin:/home/sourav/.rvm/bin:/home/sourav/.gem/ruby/2.6.0/bin\", \"DBUS_SESSION_BUS_ADDRESS\"=&gt;\"unix:path=/run/user/1000/bus\", \"MAIL\"=&gt;\"/var/spool/mail/sourav\", \"_\"=&gt;\"/home/sourav/.irb\", \"LINES\"=&gt;\"24\", \"COLUMNS\"=&gt;\"80\"}\n</code></pre>\n\n<p>Which looks similar to:</p>\n\n<pre><code>&gt; ENV.to_h\n=&gt; {\"SHELL\"=&gt;\"/bin/bash\", \"SESSION_MANAGER\"=&gt;\"local/archlinux:@/tmp/.ICE-unix/613,unix/archlinux:/tmp/.ICE-unix/613\", \"COLORTERM\"=&gt;\"truecolor\", \"XDG_CONFIG_DIRS\"=&gt;\"/etc/xdg\", \"XDG_MENU_PREFIX\"=&gt;\"xfce-\", \"SSH_AUTH_SOCK\"=&gt;\"/tmp/ssh-Al0pdO1R5970/agent.622\", \"DESKTOP_SESSION\"=&gt;\"Xfce Session\", \"SSH_AGENT_PID\"=&gt;\"623\", \"GTK_MODULES\"=&gt;\"canberra-gtk-module:canberra-gtk-module\", \"XDG_SEAT\"=&gt;\"seat0\", \"PWD\"=&gt;\"/home/sourav\", \"LOGNAME\"=&gt;\"sourav\", \"XDG_SESSION_TYPE\"=&gt;\"x11\", \"XAUTHORITY\"=&gt;\"/home/sourav/.Xauthority\", \"HOME\"=&gt;\"/home/sourav\", \"LANG\"=&gt;\"en_GB.UTF-8\", \"XDG_CURRENT_DESKTOP\"=&gt;\"XFCE\", \"VTE_VERSION\"=&gt;\"5603\", \"INVOCATION_ID\"=&gt;\"6d4dc7a91cc141e691436cb850e18f8d\", \"GLADE_CATALOG_PATH\"=&gt;\":\", \"XDG_SESSION_CLASS\"=&gt;\"user\", \"TERM\"=&gt;\"xterm-256color\", \"USER\"=&gt;\"sourav\", \"DISPLAY\"=&gt;\":0.0\", \"SHLVL\"=&gt;\"2\", \"XDG_VTNR\"=&gt;\"1\", \"XDG_SESSION_ID\"=&gt;\"1\", \"TILIX_ID\"=&gt;\"f2480263-263e-408f-be36-8105e71256a6\", \"MOZ_PLUGIN_PATH\"=&gt;\"/usr/lib/mozilla/plugins\", \"GLADE_MODULE_PATH\"=&gt;\":\", \"XDG_RUNTIME_DIR\"=&gt;\"/run/user/1000\", \"GLADE_PIXMAP_PATH\"=&gt;\":\", \"JOURNAL_STREAM\"=&gt;\"9:25041\", \"XDG_DATA_DIRS\"=&gt;\"/usr/local/share:/usr/share\", \"PATH\"=&gt;\"/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/lib/jvm/default/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl:/home/sourav/.rvm/bin:/home/sourav/.rvm/bin:/home/sourav/.gem/ruby/2.6.0/bin\", \"DBUS_SESSION_BUS_ADDRESS\"=&gt;\"unix:path=/run/user/1000/bus\", \"MAIL\"=&gt;\"/var/spool/mail/sourav\", \"_\"=&gt;\"/home/sourav/.irb\", \"LINES\"=&gt;\"24\", \"COLUMNS\"=&gt;\"80\"}\n</code></pre>\n\n<p>But:</p>\n\n<pre><code>&gt; ENV.to_h.eql?(ENV)\n=&gt; false\n</code></pre>\n\n<p>So what kind of object does ENV return?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1563787033, "post_id": 57140749, "comment_id": 100800633, "body": "There is no <code>json</code> type in Ruby."}, {"owner": {"reputation": 168, "user_id": 744722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/408fcc225278132c9b712ee866d989b0?s=128&d=identicon&r=PG", "display_name": "Quang Quach", "link": "https://stackoverflow.com/users/744722/quang-quach"}, "edited": false, "score": 0, "creation_date": 1563791349, "post_id": 57140749, "comment_id": 100803040, "body": "You might need to give more detail of your input data, I assume it has been badly formatted."}], "owner": {"reputation": 3, "user_id": 11664067, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YOe41ShpUy4/AAAAAAAAAAI/AAAAAAAAABQ/DiX-DV3yhoU/photo.jpg?sz=128", "display_name": "Tushar Vaniya", "link": "https://stackoverflow.com/users/11664067/tushar-vaniya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563779608, "creation_date": 1563779350, "last_edit_date": 1563779608, "question_id": 57140749, "link": "https://stackoverflow.com/questions/57140749/taking-whole-json-of-translations-language-in-en-language", "title": "Taking whole json of translations language in en language", "body": "<p>I have rest_name attribute of <code>json</code> type and I am storing <code>json</code> of languages in it like <code>{\"de\": \"abc\", \"en\": \"abc\"......}</code>\nbut when I create a new record it stores whole above <code>json</code> like\n<code>{\"en\": {\"de\": \"abc\", \"en\": \"abc\"......}}</code></p>\n\n<p>in model I have written like,</p>\n\n<pre><code>extend Mobility\ntranslates :restaurant_name_translations, type: :string, fallbacks: {fr: :en, de: :en, es: :en, nl: :en, sv: :en, tr: :en, zh: :en, \"en-GB\": :en, \"de-DE\": :en, \"fr-FR\": :en, \"es-ES\": :en, \"nl-NL\": :en, \"sv-SE\": :en, \"tr-TR\": :en, \"zh-Hans\": :en}\n\n\n# I want only to store like {\"de\": \"abc\", \"en\": \"abc\"......} in database\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1563807704, "post_id": 57140624, "comment_id": 100812980, "body": "In 0.3.8 <a href=\"https://github.com/mina-deploy/mina/blob/v0.3.8/lib/mina/helpers.rb#L233\" rel=\"nofollow noreferrer\">Mina::Helpers#isolate</a> however it appears <code>1.0.0</code> is a complete rewrite with a new DSL <a href=\"https://github.com/mina-deploy/mina/blob/master/docs/migrating.md\" rel=\"nofollow noreferrer\">Migrating from 0.3.X to 1.0</a> does not even mention <code>isolate</code>"}, {"owner": {"reputation": 983, "user_id": 1874794, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g8GIw.jpg?s=128&g=1", "display_name": "Mothirajha", "link": "https://stackoverflow.com/users/1874794/mothirajha"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1564113736, "post_id": 57140624, "comment_id": 100931317, "body": "@engineersmnky yes mina 1.0 has been rewritten, wondering why isolate has been removed.  Did that have the same support on a different method ?"}], "owner": {"reputation": 983, "user_id": 1874794, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/g8GIw.jpg?s=128&g=1", "display_name": "Mothirajha", "link": "https://stackoverflow.com/users/1874794/mothirajha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1580904445, "creation_date": 1563778746, "last_edit_date": 1580904445, "question_id": 57140624, "link": "https://stackoverflow.com/questions/57140624/mina-0-3-8-migration-to-mina-1-2-3-nomethoderror-undefined-method-isolate-fo", "title": "Mina 0.3.8 migration to Mina 1.2.3, NoMethodError: undefined method `isolate&#39; for main:Object", "body": "<p>While migrating from mina 0.3.8 to 1.2.3 the below code is giving error as \nNoMethodError: undefined method `isolate' for main:Object</p>\n\n<p>RUBY version - 2.6.2</p>\n\n<pre><code>task :deploy_all do\n  isolate do\n    domains.each do |domain|\n      set :domain, domain\n      invoke :deploy\n      run!\n    end\n  end\nend\n</code></pre>\n\n<p>I have checked the source code, could not find isolate method which is available on 0.3.8.</p>\n\n<p>Any suggestion on how to fix the issue ?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ajax"], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 10460154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S2abW.jpg?s=128&g=1", "display_name": "Mario Lorenzo", "link": "https://stackoverflow.com/users/10460154/mario-lorenzo"}, "edited": false, "score": 0, "creation_date": 1563847726, "post_id": 57142845, "comment_id": 100826623, "body": "Hi, thanks for your answer! Since it contains a ruby part, should I add it to my index.js.erb ? But when I add it to the file, that section is not being examined. looking forward for your further answer!"}, {"owner": {"reputation": 1175, "user_id": 2861567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GRa02.jpg?s=128&g=1", "display_name": "quyetdc", "link": "https://stackoverflow.com/users/2861567/quyetdc"}, "reply_to_user": {"reputation": 9, "user_id": 10460154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S2abW.jpg?s=128&g=1", "display_name": "Mario Lorenzo", "link": "https://stackoverflow.com/users/10460154/mario-lorenzo"}, "edited": false, "score": 0, "creation_date": 1563870529, "post_id": 57142845, "comment_id": 100833883, "body": "how can it examine the code the append the photos but it cannot run this part. I updated my code"}], "tags": [], "owner": {"reputation": 1175, "user_id": 2861567, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GRa02.jpg?s=128&g=1", "display_name": "quyetdc", "link": "https://stackoverflow.com/users/2861567/quyetdc"}, "is_accepted": false, "score": 1, "last_activity_date": 1563870564, "last_edit_date": 1563870564, "creation_date": 1563787218, "answer_id": 57142845, "question_id": 57139592, "link": "https://stackoverflow.com/questions/57139592/hide-load-more-buttons-when-all-items-have-been-rendered-in-ruby-on-rails/57142845#57142845", "title": "Hide Load More buttons when all items have been rendered in Ruby on Rails", "body": "<p>You can hide the load more part when the controller action return empty <code>@scroll_photos</code></p>\n\n<pre><code># in your javascript file\n\n&lt;% if @scroll_photos.empty? %&gt;\n  $('.load-more-container').hide()\n&lt;% else %&gt;\n  $('.cust-cont').append('&lt;%= escape_javascript(render(:partial =&gt; @scroll_photos)) %&gt;')\n&lt;% end %&gt;\n\n\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 10460154, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/S2abW.jpg?s=128&g=1", "display_name": "Mario Lorenzo", "link": "https://stackoverflow.com/users/10460154/mario-lorenzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563870564, "creation_date": 1563772965, "question_id": 57139592, "link": "https://stackoverflow.com/questions/57139592/hide-load-more-buttons-when-all-items-have-been-rendered-in-ruby-on-rails", "title": "Hide Load More buttons when all items have been rendered in Ruby on Rails", "body": "<p>I'm currently trying to implement the Load More button in Ruby on Rails. I've managed to implement it. However, the Load More button still appears even though there is no more photos left to be rendered.</p>\n\n<p>Here are the lists of codes:\nindex.html.erb</p>\n\n<pre><code>&lt;div class = 'container'&gt;\n        &lt;div class = 'section-header'&gt;\n            &lt;h2&gt; Let's Rewind! &lt;/h2&gt;\n        &lt;/div&gt;\n        &lt;div class='row'&gt;\n            &lt;div class = 'container'&gt;\n                &lt;div class='cust-cont'&gt;\n                    &lt;%= render @scroll_photos %&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=\"load-more-container\"&gt;\n            &lt;%= image_tag \"ajax-loader.gif\", style: \"display:none;\", class: \"loading-gif\" %&gt;\n            &lt;%= link_to \"Load More\", scroll_photos_path, class: \"load-more\" %&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>_scroll_photo.html.erb</p>\n\n<pre><code>&lt;div class=\"col-lg-12 col-md-4 col-xs-12\"&gt;\n  &lt;div class=\"image-box-4-3\"&gt;\n        &lt;div class=\"record\" data-year=\"&lt;%= scroll_photo.year %&gt;\"&gt;\n            &lt;div class=\"image-content\"&gt;\n                &lt;%= image_tag(scroll_photo.image_link, width: \"100%\") %&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>and the controller</p>\n\n<pre><code>if params[:year]\n      # get all records with id less than 'our last id'\n      # and limit the results to 5\n      @scroll_photos = ScrollPhoto.where('year &lt; ?', params[:year]).limit(2)\n    else\n      @scroll_photos = ScrollPhoto.limit(2)\n    end\n    respond_to do |format|\n      format.html\n      format.js\n    end\n</code></pre>\n\n<p>the javascript</p>\n\n<pre><code>$(document).ready(function(){\n    // when the load more link is clicked\n    $('a.load-more').click(function(e){\n\n      // prevent the default click action\n      e.preventDefault();\n\n          // hide load more link\n          $('.load-more').hide();\n\n          // show loading gif\n          $('.loading-gif').show();\n\n      // get the last id and save it in a variable 'last-id'\n          var last_year = $('.record').last().attr('data-year');\n\n          // make an ajax call passing along our last user id\n          $.ajax({\n\n            // make a get request to the server\n              type: \"GET\",\n              // get the url from the href attribute of our link\n              url: $(this).attr('year'),\n              // send the last id to our rails app\n              data: { year: last_year },\n              // the response will be a script\n              dataType: \"script\",\n\n              // upon success \n              success: function(){\n                  // hide the loading gif\n                  $('.loading-gif').hide();\n                  // show our load more link\n                  $('.load-more').show();\n              }\n\n          });\n\n    });\n  });\n</code></pre>\n\n<p>index.js.erb</p>\n\n<pre><code>$('.cust-cont').append('&lt;%= escape_javascript(render(:partial =&gt; @scroll_photos)) %&gt;')\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1563766960, "post_id": 57138885, "comment_id": 100793411, "body": "Why are you trying to &quot;sort a hash&quot;? Ruby hashes, at least now, are &quot;sorted&quot; by insertion order. If you want something with arbitrary order, use something that&#39;s designed to preserve (or create) order. <code>sort_by</code> will let you sort by anything you want; if you want to create an array you&#39;d need to feed it a function that sorts the <i>inner</i> hash. But presumably you <i>also</i> want to sort by year, so you&#39;re likely better off converting it to a more-appropriate structure."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1563806569, "post_id": 57138885, "comment_id": 100812309, "body": "As written, <code>game_1</code> (etc.) is a method or variable, whose value is unstated. It may be clearer to change them to literals (e.g., <code>:game_1</code> or <code>&quot;game_1&quot;</code>), as has been done in  the answers."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 11817029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/049acacb8a110684982b812f04e2a116?s=128&d=identicon&r=PG&f=1", "display_name": "HashNotAdam", "link": "https://stackoverflow.com/users/11817029/hashnotadam"}, "is_accepted": false, "score": 0, "last_activity_date": 1563767195, "creation_date": 1563767195, "answer_id": 57138954, "question_id": 57138885, "link": "https://stackoverflow.com/questions/57138885/how-to-sort-a-hash-within-a-hash/57138954#57138954", "title": "How to sort a hash within a hash?", "body": "<p>Hashes return keys in the order they are inserted so I believe you'll essentially need to rewrite the nested hash.</p>\n\n<p>For example:</p>\n\n<pre><code>hash.each { |(key, nested_hash)| hash[key] = nested_hash.sort.to_h }\n</code></pre>\n\n<p>This is rather inefficient, however, so you'd be better to see if you can ensure they are always entered in that order or somehow extract them in the order you desire.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 7358797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d354124ffebdc8f3d9ca5ece9d904bc?s=128&d=identicon&r=PG&f=1", "display_name": "MackHalliday", "link": "https://stackoverflow.com/users/7358797/mackhalliday"}, "edited": false, "score": 0, "creation_date": 1563769904, "post_id": 57139105, "comment_id": 100793942, "body": "thank you! this works :) If I wanted regularseason first, how would I do that?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 15, "user_id": 7358797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d354124ffebdc8f3d9ca5ece9d904bc?s=128&d=identicon&r=PG&f=1", "display_name": "MackHalliday", "link": "https://stackoverflow.com/users/7358797/mackhalliday"}, "edited": false, "score": 0, "creation_date": 1563770045, "post_id": 57139105, "comment_id": 100793976, "body": "Of course, it does. If you want some specific ordering, you\u2019d need to use <code>#sort_by</code> and implement the sorter on your own."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1563768819, "creation_date": 1563768819, "answer_id": 57139105, "question_id": 57138885, "link": "https://stackoverflow.com/questions/57138885/how-to-sort-a-hash-within-a-hash/57139105#57139105", "title": "How to sort a hash within a hash?", "body": "<p>Use <a href=\"https://ruby-doc.org/core/Hash.html#method-i-transform_values\" rel=\"nofollow noreferrer\"><code>Hash#transform_values</code></a> to sort values:</p>\n\n<pre><code>hash.transform_values { |v| v.sort.to_h }\n#\u21d2 {2012=&gt;{\"post_season\"=&gt;[:game_4, :game_5],\n#          \"regularseason\"=&gt;[:game_1, :game_2, :game_3]},\n#   2013=&gt;{\"post_season\"=&gt;[:game_9, :game_10],\n#          \"regularseason\"=&gt;[:game_6, :game_7, :game_8]},\n#   2014=&gt;{\"post_season\"=&gt;[:game_11, :game_12, :game_13],\n#          \"regularseason\"=&gt;[:game_14, :game_15]}}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1563815177, "last_edit_date": 1563815177, "creation_date": 1563805819, "answer_id": 57148214, "question_id": 57138885, "link": "https://stackoverflow.com/questions/57138885/how-to-sort-a-hash-within-a-hash/57148214#57148214", "title": "How to sort a hash within a hash?", "body": "<p>Given a hash with keys that include <code>k</code>, we can return a new hash with the same key/value pairs, with <code>k</code> being the first key inserted, and the remaining keys maintaining their original relative order, as follows: </p>\n\n<pre><code>def reorder_key(h, key)\n  { key=&gt;h[key] }.merge h\nend   \n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>h = { 1=&gt;2, :a=&gt;:b, \"c\"=&gt;\"d\" }\nreorder_key(h, :a)\n  #=&gt; {:a=&gt;:b, 1=&gt;2, \"c\"=&gt;\"d\"}\n</code></pre>\n\n<p>We can use this method to obtain the desired hash in the present problem.</p>\n\n<pre><code>hash.transform_values { |h| reorder_key(h, \"post_season\") }\n  #=&gt; {2012=&gt;{\"post_season\"  =&gt;[:game_4, :game_5], \n  #           \"regularseason\"=&gt;[:game_1, :game_2, :game_3]},\n  #    2013=&gt;{\"post_season\"  =&gt;[:game_9, :game_10],\n  #           \"regularseason\"=&gt;[:game_6, :game_7, :game_8]},\n  #    2014=&gt;{\"post_season\"  =&gt;[:game_11, :game_12, :game_13],\n  #           \"regularseason\"=&gt;[:game_14, :game_15]}} \n</code></pre>\n\n<p>This approach does not depend on <code>\"post_season\"</code> coincidentally preceding <code>\"regularseason\"</code> lexicographically. If, for example, it were decided to add the key <code>\"spring_training\"</code> and make that the first key to appear for each year in the returned hash, it would only be necessary to change the value of the second argument of <code>reorder_key</code> to <code>\"spring_training\"</code>.</p>\n"}], "owner": {"reputation": 15, "user_id": 7358797, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d354124ffebdc8f3d9ca5ece9d904bc?s=128&d=identicon&r=PG&f=1", "display_name": "MackHalliday", "link": "https://stackoverflow.com/users/7358797/mackhalliday"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 81, "favorite_count": 1, "accepted_answer_id": 57139105, "answer_count": 3, "score": 1, "last_activity_date": 1563815177, "creation_date": 1563766492, "question_id": 57138885, "link": "https://stackoverflow.com/questions/57138885/how-to-sort-a-hash-within-a-hash", "title": "How to sort a hash within a hash?", "body": "<p>I'm trying to sort a hash within a hash. I'd like to sort the hash by the sub-key. I'm using ruby. </p>\n\n<p>I've tried using the sort_by method and iterating the over the hash to reorganize the sub-key. I received the error \"ArgumentError: comparison of Hash with Hash failed\"</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>\nhash = {2012 =&gt; {\"regularseason\" =&gt; [game_1, game_2, game_3],\n                 \"post_season\" =&gt; [game_4, game_5] \n                 },\n        2013 =&gt; {\"regularseason\" =&gt; [game_6, game_7, game_8],\n                 \"post_season\" =&gt; [game_9, game_10] \n                 },\n        2014 =&gt; {\"post_season\" =&gt; [game_11, game_12, game_13],\n                 \"regularseason\" =&gt; [game_14, game_15] \n                 }\n                 }\n</code></pre>\n\n<p>Desired Result:\nI would like to sort this hash so sub-key post_season will always appear before sub-key regularseason.</p>\n"}, {"tags": ["ruby", "reactjs", "ruby-on-rails-5", "google-maps-react"], "comments": [{"owner": {"reputation": 16246, "user_id": 2875348, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZYAH1.jpg?s=128&g=1", "display_name": "ravibagul91", "link": "https://stackoverflow.com/users/2875348/ravibagul91"}, "edited": false, "score": 0, "creation_date": 1563760912, "post_id": 57138342, "comment_id": 100792430, "body": "Is your component redirected to <code>&#47;user_home&#47;opentabs</code> every time?"}, {"owner": {"reputation": 16246, "user_id": 2875348, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZYAH1.jpg?s=128&g=1", "display_name": "ravibagul91", "link": "https://stackoverflow.com/users/2875348/ravibagul91"}, "edited": false, "score": 0, "creation_date": 1563761191, "post_id": 57138342, "comment_id": 100792476, "body": "Also post your <code>MapContainer</code> component."}, {"owner": {"reputation": 1, "user_id": 11816710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1829b855e4cd97e1a98462f14940e89?s=128&d=identicon&r=PG&f=1", "display_name": "lhosb", "link": "https://stackoverflow.com/users/11816710/lhosb"}, "reply_to_user": {"reputation": 16246, "user_id": 2875348, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZYAH1.jpg?s=128&g=1", "display_name": "ravibagul91", "link": "https://stackoverflow.com/users/2875348/ravibagul91"}, "edited": false, "score": 0, "creation_date": 1563766921, "post_id": 57138342, "comment_id": 100793407, "body": "@ravibagul91it only redirects when a certain fetch is successful"}, {"owner": {"reputation": 119, "user_id": 10116149, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-btfjr_LBdDg/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pDgjcLENkKeWFdM9gJvYk1KX6Knw/mo/photo.jpg?sz=128", "display_name": "muceyMuce", "link": "https://stackoverflow.com/users/10116149/muceymuce"}, "edited": false, "score": 0, "creation_date": 1581900662, "post_id": 57138342, "comment_id": 106580570, "body": "Did you ever figure out why this was happening? I&#39;ve been stuck on the same problem for a while Btw I believe it is coming from this line in google-maps-react&#39;s codebase <code>var _typeof = typeof Symbol === &quot;function&quot; &amp;&amp; _typeof(Symbol.iterator) === &quot;symbol&quot; ? function (obj) {</code>"}, {"owner": {"reputation": 1, "user_id": 11816710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1829b855e4cd97e1a98462f14940e89?s=128&d=identicon&r=PG&f=1", "display_name": "lhosb", "link": "https://stackoverflow.com/users/11816710/lhosb"}, "reply_to_user": {"reputation": 119, "user_id": 10116149, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-btfjr_LBdDg/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pDgjcLENkKeWFdM9gJvYk1KX6Knw/mo/photo.jpg?sz=128", "display_name": "muceyMuce", "link": "https://stackoverflow.com/users/10116149/muceymuce"}, "edited": false, "score": 0, "creation_date": 1581988799, "post_id": 57138342, "comment_id": 106613118, "body": "@muceyMuce No update. Have not touched this project in quite some time and dont plan to. But I am also curious if there&#39;s a fix out there."}, {"owner": {"reputation": 119, "user_id": 10116149, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-btfjr_LBdDg/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7pDgjcLENkKeWFdM9gJvYk1KX6Knw/mo/photo.jpg?sz=128", "display_name": "muceyMuce", "link": "https://stackoverflow.com/users/10116149/muceymuce"}, "edited": false, "score": 0, "creation_date": 1581998234, "post_id": 57138342, "comment_id": 106614975, "body": "@ihosb if you check my comment below I found a fix"}], "owner": {"reputation": 1, "user_id": 11816710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1829b855e4cd97e1a98462f14940e89?s=128&d=identicon&r=PG&f=1", "display_name": "lhosb", "link": "https://stackoverflow.com/users/11816710/lhosb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1581903325, "creation_date": 1563760422, "last_edit_date": 1563766866, "question_id": 57138342, "link": "https://stackoverflow.com/questions/57138342/trouble-rendering-react-components-that-import-google-maps-react-on-heroku-only", "title": "Trouble rendering react components that import google-maps-react on Heroku only", "body": "<p>I have a react-in-rails application that utilizes the google-maps-react api. The app works fine locally but when deployed to heroku, any component that imports google-maps-react does not render. Since this is generally the landing page for most users, the app is not accessible at all. </p>\n\n<p>When all the components that import or render google-maps-react are removed, the app deploys correctly. </p>\n\n<pre><code>import React from \"react\"\nimport MapContainer from \"./MapContainer\"\nimport StoreList from './StoreList'\n\nclass FindBar extends React.Component {\n  render () {\n    const {stores, openTab, success} = this.props\n    return (\n      &lt;div className=\"findbar\" &gt;\n        &lt;div className=\"mapcomponent\"&gt;\n          &lt;MapContainer\n            stores={stores}\n            openTab={openTab}\n            success={success}\n          /&gt;\n        &lt;/div&gt;\n        &lt;br/&gt;\n        &lt;StoreList\n          stores={stores}\n          openTab={openTab}\n        /&gt;\n        {this.props.success &amp;&amp;\n            &lt;Redirect to=\"/user_home/opentabs\" /&gt;\n        }\n      &lt;/div&gt;\n    );\n  }\n}\n\nexport default FindBar\n</code></pre>\n\n<hr>\n\n<pre><code>import React, { Component } from 'react';\nimport { Button, Card } from 'reactstrap';\nimport { Map, GoogleApiWrapper, Marker, InfoWindow } from 'google-maps-react';\n\nimport UserHome from './UserHome.js'\nimport StoreMarkerWindow from './StoreMarkerWindow.js'\nimport InfoWindowEx from './InfoWindowEx.js'\n\nconst mapStyles = {\n  width: '100%',\n  height: '100vh',\n};\n\nclass MapContainer extends Component {\n    constructor(props) {\n        super(props)\n          this.state = {\n            showingInfoWindow: false,\n            activeMarker: {},\n            selectedPlace: {},\n            address: [], \n            location: {},\n            displayMarkers: [],\n            success: false,\n          }\n    }\n\n    componentDidMount = () =&gt; {\n     this.fetchMarkers()  \n    }\n\n    componentDidUpdate = (prevProps) =&gt; {\n      if (prevProps.stores === this.props.stores){\n        return true\n      }\n      this.fetchMarkers()\n    }\n\n    openTab = () =&gt; {\n      console.log(this.state.selectedPlace.storeId)\n      // this.props.openTab(this.state.selectedPlace.storeId)\n    }\n\n    onClick = (props, marker, e) =&gt; {\n      this.setState({\n        selectedPlace: props,\n        activeMarker: marker,\n        showingInfoWindow: true\n      })\n    }\n\n    onClose = props =&gt; {\n      if (this.state.showingInfoWindow) {\n        this.setState({\n          showingInfoWindow: false,\n          activeMarker: null\n        });\n      }\n    }\n\n\n\n    fetchMarkers = () =&gt; {\n      const newMarkers = []\n      this.props.stores.map((store, index) =&gt; {\n        const location = `${store.address1}, ${store.city}, ${store.state}, ${store.zip}`\n        this.geocodeAddress(location)\n        .then((geoco)=&gt;{\n           newMarkers.push({lat: geoco.lat, \n                            lng: geoco.lng, \n                            storeId: store.id, \n                            name: store.establishmentname,\n                            location: location,\n                            info: store.additionalinfo,\n\n           })\n           this.setState({ displayMarkers:newMarkers})\n       })\n      })\n    }\n\n    // create a function that maps stores.address, stores.city, stores.state, stores.zipcode\n    // and returns it to the geocodeAddress and then geocodeAddress returns it to \n    // the displayMarkers \n\n    geocodeAddress = (address) =&gt; {\n      const  geocoder = new google.maps.Geocoder()\n      return new Promise((resolve, reject) =&gt; {\n        geocoder.geocode({'address': address}, function(results, status) {\n        if (status === google.maps.GeocoderStatus.OK) {\n          resolve(results[0].geometry.location.toJSON())\n         } else {\n          reject()\n          }\n      })\n      })\n\n    }\n\n\n  render() {\n    const{\n           activeMarker,\n           showingInfoWindow,\n           selectedPlace,\n           onMapOver,\n    }=this.props\n\n    return (\n      &lt;div className=\"mapContainer\" style={mapStyles}&gt;\n        &lt;Map\n          google={this.props.google}\n          onMouseover={this.onMapOver}\n          zoom={14}\n          style={mapStyles}\n          initialCenter={{\n           lat: 32.7091,\n           lng: -117.1580\n          }}\n        &gt;    \n        {this.state.displayMarkers.map((coordinates, index) =&gt; {\n          const{storeId, lat, lng, name, location, info} = coordinates\n          return (\n            &lt;Marker onClick={this.onClick}\n              key={index}\n              id={storeId}\n              name={name}\n              position = {{lat, lng}}\n              location={location}\n              info= {info}\n            &gt;\n            &lt;/Marker&gt;\n          )\n        })}\n        &lt;InfoWindowEx\n          marker={this.state.activeMarker}\n          visible={this.state.showingInfoWindow}\n          onClose={this.onClose}\n        &gt;\n          &lt;div&gt;\n            &lt;StoreMarkerWindow \n              name={this.state.selectedPlace.name}\n              location={this.state.selectedPlace.location}\n              info={this.state.selectedPlace.info}\n              id={this.state.selectedPlace.id}\n              openTab={this.props.openTab}\n              /&gt;\n          &lt;/div&gt;\n        &lt;/InfoWindowEx&gt;\n        &lt;/Map&gt;\n      &lt;/div&gt;\n    );\n  }\n}\n\nexport default GoogleApiWrapper({\n  apiKey: 'xxxx'\n})(MapContainer);\n</code></pre>\n\n<hr>\n\n<pre><code>TypeError: t is not a function\n    at Object.a (windowOrGlobal.js:18)\n    at Object.&lt;anonymous&gt; (windowOrGlobal.js:5)\n    at Object.&lt;anonymous&gt; (windowOrGlobal.js:5)\n    at n (bootstrap:19)\n    at Object.&lt;anonymous&gt; (ScriptCache.js:3)\n    at n (bootstrap:19)\n    at Object.&lt;anonymous&gt; (GoogleApiComponent.js:5)\n    at n (bootstrap:19)\n    at Object.&lt;anonymous&gt; (index.js:5)\n    at n (bootstrap:19)\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 981, "user_id": 8896337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uI5ps.jpg?s=128&g=1", "display_name": "B-M", "link": "https://stackoverflow.com/users/8896337/b-m"}, "edited": false, "score": 0, "creation_date": 1563765197, "post_id": 57137291, "comment_id": 100793098, "body": "Please add your code in a way that we can reproduce your problem. With the code you posted, we cannot."}, {"owner": {"reputation": 19, "user_id": 11611452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48f68b72a69b4340bac658d897cdb0c2?s=128&d=identicon&r=PG&f=1", "display_name": "Mikerich94", "link": "https://stackoverflow.com/users/11611452/mikerich94"}, "reply_to_user": {"reputation": 981, "user_id": 8896337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uI5ps.jpg?s=128&g=1", "display_name": "B-M", "link": "https://stackoverflow.com/users/8896337/b-m"}, "edited": false, "score": 0, "creation_date": 1563829454, "post_id": 57137291, "comment_id": 100822534, "body": "@B-M I updated the post to include my full code for those files. Is that enough to replicate?"}, {"owner": {"reputation": 19, "user_id": 11611452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48f68b72a69b4340bac658d897cdb0c2?s=128&d=identicon&r=PG&f=1", "display_name": "Mikerich94", "link": "https://stackoverflow.com/users/11611452/mikerich94"}, "reply_to_user": {"reputation": 981, "user_id": 8896337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uI5ps.jpg?s=128&g=1", "display_name": "B-M", "link": "https://stackoverflow.com/users/8896337/b-m"}, "edited": false, "score": 0, "creation_date": 1563986281, "post_id": 57137291, "comment_id": 100885298, "body": "@b-m can you look at my code now if you had a few minutes?"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 11611452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48f68b72a69b4340bac658d897cdb0c2?s=128&d=identicon&r=PG&f=1", "display_name": "Mikerich94", "link": "https://stackoverflow.com/users/11611452/mikerich94"}, "edited": false, "score": 0, "creation_date": 1564181736, "post_id": 57188665, "comment_id": 100959895, "body": "thank you so much. Adding the button class fixed it. Also helped with keeping the format for all 3 buttons the same. You rock!"}, {"owner": {"reputation": 981, "user_id": 8896337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uI5ps.jpg?s=128&g=1", "display_name": "B-M", "link": "https://stackoverflow.com/users/8896337/b-m"}, "reply_to_user": {"reputation": 19, "user_id": 11611452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48f68b72a69b4340bac658d897cdb0c2?s=128&d=identicon&r=PG&f=1", "display_name": "Mikerich94", "link": "https://stackoverflow.com/users/11611452/mikerich94"}, "edited": false, "score": 0, "creation_date": 1564182161, "post_id": 57188665, "comment_id": 100959979, "body": "No problem, @Mikerich94. If this helped, mark the answer as correct : )"}], "tags": [], "owner": {"reputation": 981, "user_id": 8896337, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uI5ps.jpg?s=128&g=1", "display_name": "B-M", "link": "https://stackoverflow.com/users/8896337/b-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1563990737, "creation_date": 1563990737, "answer_id": 57188665, "question_id": 57137291, "link": "https://stackoverflow.com/questions/57137291/adding-dropdown-menu-changed-order-of-links-on-navbar-and-other-formatting/57188665#57188665", "title": "Adding dropdown menu changed order of links on navbar and other formatting", "body": "<p>I couldn't really reproduce your example, however, this code worked for me:</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>\n&lt;nav class=\"navbar navbar-expand-lg navbar-light bg-light sticky-top\"&gt;\n  &lt;a class=\"navbar-brand\" href=\"&lt;%= root_path %&gt;\"&gt;&lt;i class=\"fa fa-group\"&gt;&lt;/i&gt;C. R. Communication Strategies&lt;/a&gt;\n  &lt;button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarSupportedContent\" aria-controls=\"navbarSupportedContent\" aria-expanded=\"false\" aria-label=\"Toggle navigation\"&gt;\n    &lt;span class=\"navbar-toggler-icon\"&gt;&lt;/span&gt;\n  &lt;/button&gt;\n  &lt;div class=\"collapse navbar-collapse\" id=\"navbarSupportedContent\"&gt;\n    &lt;ul class=\"navbar-nav ml-auto\"&gt;\n      &lt;button class=\"dropbtn\"&gt;&lt;li&gt;&lt;%= link_to \"About\", about_path %&gt;&lt;/li&gt;&lt;/button&gt;\n      &lt;div class=\"dropdown mx-auto\"&gt;\n        &lt;button class=\"dropbtn\"&gt;&lt;li&gt;&lt;%= link_to \"Offerings\", offerings_path %&gt;&lt;/li&gt;&lt;/button&gt;\n        &lt;div class=\"dropdown-content\"&gt;\n          &lt;li&gt;&lt;%= link_to \"Public Speaking\", pages_public_speaking_path %&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;%= link_to \"Nonverbal Communication\", nonverbal_path %&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;%= link_to \"Group Dynamics\", group_dynamics_path %&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;%= link_to \"Intercultural Communication\", intercultural_communication_path %&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;%= link_to \"Editing\", editing_path %&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;%= link_to \"Interviewing\", interviewing_path %&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;%= link_to \"Business Etiquette\", business_etiquette_path %&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;%= link_to \"Business Writing\", business_writing_path %&gt;&lt;/li&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n      &lt;button class=\"dropbtn\"&gt;&lt;li&gt;&lt;%= link_to \"Contact Form\", new_contact_path %&gt;&lt;/li&gt;&lt;/button&gt;\n    &lt;/ul&gt;\n  &lt;/div&gt;\n&lt;/nav&gt;\n\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 11611452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/48f68b72a69b4340bac658d897cdb0c2?s=128&d=identicon&r=PG&f=1", "display_name": "Mikerich94", "link": "https://stackoverflow.com/users/11611452/mikerich94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 95, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1563990737, "creation_date": 1563746510, "last_edit_date": 1563986055, "question_id": 57137291, "link": "https://stackoverflow.com/questions/57137291/adding-dropdown-menu-changed-order-of-links-on-navbar-and-other-formatting", "title": "Adding dropdown menu changed order of links on navbar and other formatting", "body": "<p>I need some help figuring out why adding a dropdown menu changed the order of buttons on my navbar. </p>\n\n<p>I added a dropdown menu that opens when a user hovers on the button by following the \"CSS Dropdown\" guide on w3schools.  </p>\n\n<p>For whatever reason, implementing this code rearranged my buttons on the Navbar. It used to consist of About Me-> Workshop offerings-> Contact Us. Now, it is About Me-> Contact Us-> Workshop Offerings. </p>\n\n<p>I went back to check the CSS for anything overriding code but was unable to find anything. </p>\n\n<p>I also noticed that the class of the button was changed from a <li> to  for a hyperlink (the button text color changed and had an underline like a normal hyperlink. I since removed that formatting but it got me thinking what could have changed all this.)</p>\n\n<p>Does anyone know how to troubleshoot adding a responsive button that would change the order of navbar items as well as overriding the <li> formatting?</p>\n\n<p>I have tried adding color:white overrides to replace the text color and text-color when hovering. I ended up creating a .navbar a {} class that fixed the problem...however I was unable to fix the navbar order. I would like to fix the overriding on the colors so I don't have unnecessary code too.</p>\n\n<p>My application.html.erb code:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Saasapp&lt;/title&gt;\n    &lt;%= csrf_meta_tags %&gt;\n\n    &lt;link href=\"//fonts.googleapis.com/css?family=Open+Sans:400,700,800\" rel=\"stylesheet\"&gt;\n    &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %&gt;\n    &lt;%= javascript_include_tag \"https://js.stripe.com/v2/\", type: 'text/javascript' %&gt;\n    &lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %&gt;\n    &lt;%= tag :meta, :name =&gt; \"stripe-key\", :content =&gt; STRIPE_PUBLIC_KEY %&gt;\n  &lt;/head&gt;\n\n  &lt;body&gt;\n\n    &lt;nav class=\"navbar navbar-default navbar-static-top\" role=\"navigation\"&gt;\n  &lt;div class='container'&gt;\n    &lt;div class=\"navbar-header\"&gt;\n      &lt;button type=\"button\" class=\"navbar-toggle\" data-toggle=\"collapse\" data-target=\"#main-nav-collapse\"&gt;\n        &lt;span class=\"sr-only\"&gt;Toggle navigation&lt;/span&gt;\n        &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n        &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n        &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n      &lt;/button&gt;\n\n     &lt;%= link_to root_path, class: \"navbar-brand\" do %&gt;\n       &lt;i class=\"fa fa-group\"&gt;&lt;/i&gt;\n       C. R. Communication Strategies\n      &lt;% end %&gt;\n\n    &lt;/div&gt;\n\n    &lt;ul class=\"nav navbar-nav navbar-right\"&gt;\n      &lt;li&gt;&lt;%= link_to \"About\", about_path %&gt;&lt;/li&gt;\n\n      &lt;div class=\"dropdown\"&gt;\n        &lt;button class=\"dropbtn\"&gt;&lt;li&gt;&lt;%= link_to \"Offerings\", offerings_path %&gt;&lt;/li&gt;&lt;/button&gt;\n\n        &lt;div class=\"dropdown-content\"&gt;\n          &lt;li&gt;&lt;%= link_to \"Public Speaking\", pages_public_speaking_path %&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;%= link_to \"Nonverbal Communication\", nonverbal_path %&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;%= link_to \"Group Dynamics\", group_dynamics_path %&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;%= link_to \"Intercultural Communication\", intercultural_communication_path %&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;%= link_to \"Editing\", editing_path %&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;%= link_to \"Interviewing\", interviewing_path %&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;%= link_to \"Business Etiquette\", business_etiquette_path %&gt;&lt;/li&gt;\n          &lt;li&gt;&lt;%= link_to \"Business Writing\", business_writing_path %&gt;&lt;/li&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n\n      &lt;li&gt;&lt;%= link_to \"Contact Form\", new_contact_path %&gt;&lt;/li&gt;\n\n    &lt;/ul&gt;\n\n    &lt;/div&gt;&lt;!-- /.navbar-collapse --&gt;\n  &lt;/div&gt;\n&lt;/nav&gt;\n\n  &lt;div class=\"container flash-container\"&gt;\n    &lt;% flash.each do |type, msg| %&gt;\n      &lt;%= content_tag :div, msg, class: \"alert alert-#{type}\" %&gt;\n    &lt;% end %&gt;  \n  &lt;/div&gt;    \n\n\n    &lt;%= yield %&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n\n</code></pre>\n\n<p>My application.css.scss code: </p>\n\n<pre><code>/*\n* This is a manifest file that'll be compiled into application.css, which will include all the files\n* listed below.\n*\n* Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,\n* or any plugin's vendor/assets/stylesheets directory can be referenced here using a relative path.\n*\n* You're free to add application-wide styles to this file and they'll appear at the bottom of the\n* compiled file so the styles you add here take precedence over styles defined in any other CSS/SCSS\n* files in this directory. Styles in this file should be added after the last require_* statement.\n* It is generally better to create a new file per style scope.\n*\n*= require_tree .\n*= require_self\n*/\n\n@import 'bootstrap-sprockets';\n@import 'bootstrap';\n@import 'font-awesome-sprockets';\n@import 'font-awesome';\n\n//Typography Styles\nh1, h2, h3  {\nfont-family: 'Open Sans', 'sans-serif'\n}\n\n// Background Gradient\n.navbar, .home-callout {\n    //Gradient provided by @i_ghosh at uiGradients.com\n    background: #000046;  /* fallback for old browsers */\n    background: -webkit-linear-gradient(to right, #1CB5E0, #000046);  /* Chrome 10-25, Safari 5.1-6 */\n    background: linear-gradient(to right, #1CB5E0, #000046); /* W3C, IE 10+/ Edge, Firefox 16+, Chrome 26+, Opera 12+, Safari 7+ */\n\n//Nav Styles\n}\n\n.navbar {\n  border: none;\n}\n\n// Color of hyperlinks on navbar (Offerings)\n.navbar a {\n  color:white;\n  &amp;:hover {\n    color: white;\n    opacity: 0.75;\n    text-decoration:none;\n  }\n}\n\n.navbar-brand {\n  font-family: 'Open Sans', sans-serif;\n  font-weight: 800;\n}\n\n.navbar-default .navbar-toggle .icon-bar {\n  background-color: white;\n}\n\n.navbar-default .navbar-toggle {\n    border: 2px solid white;\n    &amp;:hover, &amp;:focus {\n  background-color: #1CB5E0;\n  }\n}\n\n/* Dropdown Button */\n.dropbtn {\n  background-color: transparent;\n  color: white;\n  padding: 16px;\n  border: none;\n  cursor: pointer;\n}\n\n/* The container &lt;div&gt; - needed to position the dropdown content */\n.dropdown {\n  position: relative;\n  display: inline-block;\n}\n\n\n/* Dropdown Content (Hidden by Default) */\n.dropdown-content {\n  display: none;\n  position: absolute;\n  background-color: #f1f1f1;\n  min-width: 160px;\n  box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.2);\n  z-index: 1;\n}\n\n/* Links inside the dropdown */\n.dropdown-content a {\n  color: black;\n  padding: 12px 16px;\n  text-decoration: none;\n  display: block;\n}\n\n/* Change color of dropdown links on hover */\n.dropdown-content a:hover {\n  background-color: #ddd;\n  color: black;\n}\n\n/* Show the dropdown menu on hover */\n.dropdown:hover .dropdown-content {display: block;}\n\n// Home Page Styles\n.navbar-default .navbar-brand,\n.navbar-default .navbar-nav &gt; li &gt; a {\n  color:white;\n  &amp;:hover {\n    color: white;\n    opacity: 0.75;\n  }\n}\n\n\n// Margin between navbar and rest of the page\n .home-signup-links {\n   margin-top: 05px;\n }\n\n\n// Styles for upper text and image on home page\n.header-box {\n  font-family: 'Montserrat',sans-serif !important;\n  position: relative;\n  margin-top: 50px;\n  padding: 0;\n}\n\n.header-box h1 {\n  display: inline-block;\n  line-height: 40px;\n}\n\n.header-box img {\n  display: inline-block;\n  position: absolute;\n  top: 8px;\n  margin-left: 750px;\n  border-radius: 50%;\n  width: 500px;\n}\n\n//Large header across center of the page\n.text-upper {\n  font-size: 32px;\n  font-weight: bold;\n  text-transform: uppercase;\n  width: 100%;\n  display: block;\n  box-sizing: border-box;\n  line-height: 1.3 !important;\n  margin: 60px 0 20px 0;\n}\n\n//Style for second header \n.paragraph-upper {\n  font-size: 24px;\n  font-weight: 400;\n  width: 100%;\n  display: block;\n  box-sizing: border-box;\n  line-height: 1.3 !important;\n  margin: 0px 0 60px 0;\n}\n\n.button {\n  width: 30%;\n  padding-left: 190px;\n  font-weight: bold;\n}\n\n\n// This is just buffer to push the page down\n.button p {\n    display: block;\n    margin-block-start: 1em;\n    margin-block-end: 1em;\n    margin-inline-start: 0px;\n    margin-inline-end: 0px;\n    padding-bottom: 100px;\n}\n\n.lower-page {\n  background-color: #efefef;\n  width: 100%;\n\n}\n\n.lower-page-content {\n  font-family: 'Montserrat',sans-serif !important;\n  padding-left: 40px;\n}\n.lower-heading {\n  font-size: 26px;\n  font-weight: 700;\n}\n\n.lower-paragraph {\n  padding-bottom: 30px;\n}\n\n.home-callout{\n  color:white;\n  margin-top: -20px;\n  padding-top: 0px;\n  padding-bottom: 0px;\n}\n\n.flash-container {\n  position: absolute;\n  width: 100%;\n}\n\n.alert-notice, .alert-alert {\n  text-align: center;\n  background: rgba(255, 255, 255, 0.3);\n  border-color: rgba(255, 255, 255, 0.5);\n  margin-top: -14px;\n}\n\n\n.class {\n  margin-left: auto;\n  margin-right: auto;\n  width: 50%;\n}\n\n//About Me\n\n.about-image {\n  display: block;\n  width: 50%;\n  margin-top: 20;\n  margin-left: auto;\n  margin-right: auto;\n}\n\n// Offerings Page\n\n.row-fluid {\n  text-align:center;\n  width: 100%;\n  *zoom: 1;\n}\n\n.header {\n  font-family: 'Open Sans',Arial,sans-serif !important;\n  font-size: 32px;\n  color: #000;\n  font-weight: bold;\n  display: block;\n  text-rendering: auto;\n  line-height: 1.3 !important;\n  margin: 0 0 .75em 0 !important;\n  padding: 0;\n  margin-block-start: 0.67em;\n  margin-block-end: 0.67em;\n  margin-inline-start: 0px;\n  margin-inline-end: 0px; \n}\n\n//Horizantal Line Style\nhr {\n\n  width: 50%;\n    border-top: 1px solid #8c8b8b;\n}\n\n.top-paragraph {\n  font-family: 'Open Sans',Arial,sans-serif !important;\n  font-size: 16px;\n  text-align: center;\n}\n\n.offerings-row {\n width: 100%; \n}\n\n.course-image {\n  width: 400px;\n  height: 300px;\n  padding-right: 20px;\n}\n\n.blue-header {\n  font-family: 'Open Sans',Arial,sans-serif !important;\n  color: #075dab;\n  font-weight: bold;\n  font-size: 20px;\n  text-align: left;\n  padding-right: 20px;\n  margin: 5px;\n}\n\n.offerings-info {\n  font-family: 'Open Sans',Arial,sans-serif !important;\n  font-size: 16px;\n  text-align: left;\n  padding-right: 20px;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  margin: 5px;\n}\n\n// Public Speaking\n\n.workshop-image {\n  width: 400px;\n  height: 300px;\n  margin-left: auto;\n  margin-right: auto;\n}\n\n.course-summary {\n  font-family: 'Open Sans',Arial,sans-serif !important;\n  font-size: 16px;\n  text-align: left;\n  text-align: center;\n}\n</code></pre>\n\n<p>Please let me know if this code is sufficient, or if I should add other file code to allow anyone helping to replicate the scenario.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2019, "user_id": 9595653, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jNAfm9c6bRo/AAAAAAAAAAI/AAAAAAAAABA/2JGGWk6fJl8/photo.jpg?sz=128", "display_name": "Clara", "link": "https://stackoverflow.com/users/9595653/clara"}, "edited": false, "score": 0, "creation_date": 1563771978, "post_id": 57136631, "comment_id": 100794409, "body": "I think I saw this error before, and it might be in assets/javascript/application.js could you comment out bootsnap there if it exists?"}, {"owner": {"reputation": 33, "user_id": 11816151, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ce3X1PHHNDM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re_cV07Szs2LOqwoAI6-MhpY-BOnA/photo.jpg?sz=128", "display_name": "Ahmed Gaber", "link": "https://stackoverflow.com/users/11816151/ahmed-gaber"}, "reply_to_user": {"reputation": 2019, "user_id": 9595653, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jNAfm9c6bRo/AAAAAAAAAAI/AAAAAAAAABA/2JGGWk6fJl8/photo.jpg?sz=128", "display_name": "Clara", "link": "https://stackoverflow.com/users/9595653/clara"}, "edited": false, "score": 0, "creation_date": 1565797103, "post_id": 57136631, "comment_id": 101465519, "body": "Hello, thank you for the suggestion. Unfortunately this happens for every rails app I create. Even when I use <code>--api</code> and there is no javascript folder in assets."}], "owner": {"reputation": 33, "user_id": 11816151, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-Ce3X1PHHNDM/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3re_cV07Szs2LOqwoAI6-MhpY-BOnA/photo.jpg?sz=128", "display_name": "Ahmed Gaber", "link": "https://stackoverflow.com/users/11816151/ahmed-gaber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 690, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1563739812, "creation_date": 1563739812, "question_id": 57136631, "link": "https://stackoverflow.com/questions/57136631/bootsnap-setup-load-error-on-all-rails-apps", "title": "bootsnap/setup load error on all rails apps", "body": "<p>No matter which rails app I try to run <code>rails s</code> on, I get this error below. This error started occurring after following this tutorial:</p>\n\n<p><a href=\"https://hackernoon.com/make-a-slideshow-using-ruby-on-rails-in-50-lines-of-code-and-no-javascript-9fdf0a88ec9d\" rel=\"nofollow noreferrer\">https://hackernoon.com/make-a-slideshow-using-ruby-on-rails-in-50-lines-of-code-and-no-javascript-9fdf0a88ec9d</a></p>\n\n<p>and after I installed the gem fie.</p>\n\n<p>I was finally able to get <code>rails s</code> to work by commenting out require bootsnap in the config/boot.rb file. That was after a lot of cleanup and resetting spring. I've Googled this every way and can't find an answer. I removed my tmp folder and all kinds of other tactics to no avail. Please help me, I want to know how I messed up my gems and why it is not working! Thank you!</p>\n\n<pre><code>    15: from bin/rails:3:in `&lt;main&gt;'\n    14: from bin/rails:3:in `load'\n    13: from /Users/flatironschool/Playful/fun_with_rails_through_students_and_schools/bin/spring:15:in `&lt;top (required)&gt;'\n    12: from /Users/flatironschool/.rvm/rubies/ruby-2.6.1/lib/ruby/site_ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    11: from /Users/flatironschool/.rvm/rubies/ruby-2.6.1/lib/ruby/site_ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    10: from /Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/spring-2.1.0/lib/spring/binstub.rb:11:in `&lt;top (required)&gt;'\n     9: from /Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/spring-2.1.0/lib/spring/binstub.rb:11:in `load'\n     8: from /Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/spring-2.1.0/bin/spring:49:in `&lt;top (required)&gt;'\n     7: from /Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/spring-2.1.0/lib/spring/client.rb:30:in `run'\n     6: from /Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/spring-2.1.0/lib/spring/client/command.rb:7:in `call'\n     5: from /Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/spring-2.1.0/lib/spring/client/rails.rb:28:in `call'\n     4: from /Users/flatironschool/.rvm/gems/ruby-2.6.1/gems/spring-2.1.0/lib/spring/client/rails.rb:28:in `load'\n     3: from /Users/flatironschool/Playful/fun_with_rails_through_students_and_schools/bin/rails:8:in `&lt;top (required)&gt;'\n     2: from /Users/flatironschool/Playful/fun_with_rails_through_students_and_schools/bin/rails:8:in `require_relative'\n     1: from /Users/flatironschool/Playful/fun_with_rails_through_students_and_schools/config/boot.rb:4:in `&lt;top (required)&gt;'\n/Users/flatironschool/Playful/fun_with_rails_through_students_and_schools/config/boot.rb:4:in `require': cannot load such file -- bootsnap/setup (LoadError)```\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "docker"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1563739509, "post_id": 57136538, "comment_id": 100788818, "body": "What platform are you running on? macOS for example is <a href=\"https://github.com/docker/for-mac/issues/2659\" rel=\"nofollow noreferrer\">notoriously slow</a> for filesystem operations, and that could easily explain this."}, {"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1563740132, "post_id": 57136538, "comment_id": 100788946, "body": "Yes, I am on OSX."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1563740433, "post_id": 57136538, "comment_id": 100789011, "body": "Then I recommend Googling &quot;macOS Docker file system slow&quot; and attempting any of the many many workarounds. I usually install Linux through Virtual Machine and run Docker within that rather than directly on macOS."}, {"owner": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "edited": false, "score": 0, "creation_date": 1563740763, "post_id": 57136538, "comment_id": 100789088, "body": "I&#39;d suggest removing the <code>volumes:</code> line that mounts your application code into the container.  This avoids the aforementioned performance issue, and means that the container you&#39;re running locally is identical to what you&#39;ll run in production; it doesn&#39;t depend on your local source tree at all."}], "answers": [{"tags": [], "owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "is_accepted": false, "score": 0, "last_activity_date": 1563805021, "last_edit_date": 1563805021, "creation_date": 1563803494, "answer_id": 57147528, "question_id": 57136538, "link": "https://stackoverflow.com/questions/57136538/why-is-a-rails-app-loading-extremely-slow-with-docker/57147528#57147528", "title": "Why is a Rails app loading extremely slow with Docker?", "body": "<p>I run docker on Mac with no issues and suspect that it's your Dockerfile running bundler and reinstalling your gemlist every time you run <code>docker-compose up</code>.  Separate copying the gemfile and copying the rest of your app because Docker will cache it thus preventing recopying the gemfile everytime you make a change and rebuild the app. It will only reinstall gems when you change the gemfile and rebuild.  Also, use \"COPY\" instead of \"ADD\" whenever possible because \"ADD\" does some extra magic like unpacking Tar files and fetching files from remote urls etc.</p>\n\n<pre><code>RUN gem install bundler\nCOPY Gemfile Gemfile.lock ./\nRUN bundle install --binstubs\n\n#Left dot signifies copies everything from workstation in current directory of the Dockerfile.  Right dot means it will be copied into the current containers working directory.  It also checks for a file called .dockerignore and will skip copying anything inside those folders.\nCOPY . .\n</code></pre>\n\n<p><strong>For a reference</strong>, I commented up a dockerfile for a local app I built.</p>\n\n<pre><code>FROM ruby:2.3-slim\n\nMAINTAINER Brian &lt;wasup@gmail.com&gt;\n\n#Always run apt-get update and apt-get install in same line because the update can be cached and thus may not run on second build.\nRUN apt-get update &amp;&amp; apt-get install -qq -y build-essential wkhtmltopdf libxrender1 libxext6 libfontconfig1 imagemagick nodejs libpq-dev postgresql-client-9.4 --fix-missing --no-install-recommends\n\nENV INSTALL_PATH /kunzig\n\n#the p flag allows for installing into a sub-path which isnt necessary here\nRUN mkdir -p $INSTALL_PATH\n\n#All commands run after this run in the context of this work path\nWORKDIR $INSTALL_PATH\n\n#Left hand side is gemfile from workstation, right hand side is path in docker container (in this case kunzig/Gemfile since workdir is /kunzig already we can just do Gemfile)\nRUN gem install bundler\nCOPY Gemfile Gemfile.lock ./\nRUN bundle install --binstubs\n\n#Left dot signifies copies everything from workstation in current directory of the Dockerfile.  Right dot means it will be copied into the current containers working directory (kunzig).  It also checks for a file called .dockerignore and will skip copying anything inside those folders.\nCOPY . .\n\n#Note:  Always separate copying the gemfile and copying the rest because Docker will cache it thus preventing recopying the gemfile everytime you make a change and rebuild the app. and only reinstall gems when you change the gemfile and rebuild!\n\n#When running this from Docker it needs dummy filler for the db and token so just made some stuff up so it doesnt error...\nRUN bundle exec rake RAILS_ENV=production DATABASE_URL='postgresql://kunzig:bjkbjk@postgres:5432/kunzig?encoding=utf8&amp;pool=5&amp;timeout=5000' SECRET_KEY_BASE=somejdfkpicksomething assets:precompile\n\n#This volume will allow us to expose our assets in the public folder to nginx since nginx will be sitting in front of the rails app and serve our assets.  Volume creation must go LAST on the dockerfile since everything after isn't run except CMD.\nVOLUME [\"$INSTALL_PATH/public\"]\n\n#Can swap in Puma via this one line if desired\nCMD bundle exec puma -C config/puma.rb\n</code></pre>\n"}], "owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1393, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1563805021, "creation_date": 1563739209, "question_id": 57136538, "link": "https://stackoverflow.com/questions/57136538/why-is-a-rails-app-loading-extremely-slow-with-docker", "title": "Why is a Rails app loading extremely slow with Docker?", "body": "<p>I am exploring the world of Docker and decided to test it for an empty Rails app.</p>\n\n<p>Here's my <code>Dockerize</code> file:</p>\n\n<pre><code>FROM ruby:alpine\n\nRUN apk add --update build-base postgresql-dev tzdata nodejs yarn\nRUN gem install rails -v '5.1.6'\n\nWORKDIR /app\nADD Gemfile Gemfile.lock /app/\nRUN bundle install\nRUN yarn install\n</code></pre>\n\n<p>here the <code>docker-compose.yml</code> file:</p>\n\n<pre><code>version: '3.6'\n\nservices:\n  web:\n    build: .\n    volumes:\n      - ./:/app\n    working_dir: /app\n    command: puma\n    ports:\n      - 3003:3003\n    depends_on:\n      - db\n    environment:\n      DATABASE_URL: postgres://postgres@db\n  db:\n    image: postgres:10.3-alpine\n</code></pre>\n\n<p>and here the <code>Gemfile</code>:</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngit_source(:github) do |repo_name|\n  repo_name = \"#{repo_name}/#{repo_name}\" unless repo_name.include?(\"/\")\n  \"https://github.com/#{repo_name}.git\"\nend\n\ngem 'rails', '~&gt; 5.1.6'\ngem 'pg', '&gt;= 0.18', '&lt; 2.0'\ngem 'puma', '~&gt; 3.7'\ngem 'sass-rails', '~&gt; 5.0'\ngem 'uglifier', '&gt;= 1.3.0'\n\ngem 'webpacker'\n\ngem 'coffee-rails', '~&gt; 4.2'\ngem 'turbolinks', '~&gt; 5'\n\ngem 'jbuilder', '~&gt; 2.5'\ngem 'react-rails'\n\ngroup :development, :test do\n  gem 'byebug', platforms: [:mri, :mingw, :x64_mingw]\n  gem 'capybara', '~&gt; 2.13'\n  gem 'selenium-webdriver'\nend\n\ngroup :development do\n  gem 'web-console', '&gt;= 3.3.0'\n  gem 'listen', '&gt;= 3.0.5', '&lt; 3.2'\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n</code></pre>\n\n<p>I was used to that when I wanted to start a Rails app, I ran the following in the terminal tab: <code>rails s -p 3003</code>. Now, with Docker, I run this:\n<code>docker-compose up</code> or <code>docker-compose up -d</code> and go to <code>0.0.0.0:3003</code>and after 20-50 seconds (!) is loaded this page. Why is the loading time so slow? Can I somehow speed it up?</p>\n\n<p>The app is literarily empty, it's only connected to PSQL and there's a controller with a <code>Hello World</code> action.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1563739225, "post_id": 57136528, "comment_id": 100788761, "body": "Indeed, there&#39;s no method <code>expense</code> on Owner."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1563739257, "post_id": 57136528, "comment_id": 100788770, "body": "There&#39;s no &#39;expense&#39;, owners have expenses, plural--just like the error message says."}, {"owner": {"reputation": 13, "user_id": 11628125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b82a5a9b191778e94705aa7e28fec3ba?s=128&d=identicon&r=PG&f=1", "display_name": "NomadCoder87", "link": "https://stackoverflow.com/users/11628125/nomadcoder87"}, "edited": false, "score": 0, "creation_date": 1563739529, "post_id": 57136528, "comment_id": 100788822, "body": "I changed for plural, now i&#39;m getting this error:  undefined method `list_of_this_month&#39; for #&lt;ActiveRecord::Associations::CollectionProxy []&gt;"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1563739588, "post_id": 57136528, "comment_id": 100788836, "body": "@NomadCoder87: that&#39;s to be expected too. A collection of expenses doesn&#39;t have this method. Individual expenses do (but its definition suggests that it  <i>should</i> be a class method or a scope)."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1563739662, "post_id": 57136528, "comment_id": 100788856, "body": "@NomadCoder87: you forgot to ask a question, btw."}, {"owner": {"reputation": 13, "user_id": 11628125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b82a5a9b191778e94705aa7e28fec3ba?s=128&d=identicon&r=PG&f=1", "display_name": "NomadCoder87", "link": "https://stackoverflow.com/users/11628125/nomadcoder87"}, "edited": false, "score": 0, "creation_date": 1563739714, "post_id": 57136528, "comment_id": 100788866, "body": "Solved adding converting the class method in an instance method:  self.def list_of_this_month     select { |e| e.day_month == DateTime.current.strftime(&#39;%Y-m&#39;) }   end"}, {"owner": {"reputation": 13, "user_id": 11628125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b82a5a9b191778e94705aa7e28fec3ba?s=128&d=identicon&r=PG&f=1", "display_name": "NomadCoder87", "link": "https://stackoverflow.com/users/11628125/nomadcoder87"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1563740112, "post_id": 57136528, "comment_id": 100788943, "body": "@sergio-tulentsev well i just want to error that i specified disapear, it obvious, thanks for the Help Sergio was very usefull, really thanks."}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 11628125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b82a5a9b191778e94705aa7e28fec3ba?s=128&d=identicon&r=PG&f=1", "display_name": "NomadCoder87", "link": "https://stackoverflow.com/users/11628125/nomadcoder87"}, "is_accepted": false, "score": 0, "last_activity_date": 1563935624, "last_edit_date": 1563935624, "creation_date": 1563740264, "answer_id": 57136693, "question_id": 57136528, "link": "https://stackoverflow.com/questions/57136528/undefined-local-variable-or-method-error-using-delegate/57136693#57136693", "title": "undefined local variable or method error using delegate", "body": "<p>Following the suggestions, I changed \"expense\" for \"expenses\" and convert the class method in instance method</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def self.list_of_this_month\n  select { |e| e.day_month == DateTime.current.strftime('%Y-m') }\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11628125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b82a5a9b191778e94705aa7e28fec3ba?s=128&d=identicon&r=PG&f=1", "display_name": "NomadCoder87", "link": "https://stackoverflow.com/users/11628125/nomadcoder87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1563935624, "creation_date": 1563739138, "last_edit_date": 1563935611, "question_id": 57136528, "link": "https://stackoverflow.com/questions/57136528/undefined-local-variable-or-method-error-using-delegate", "title": "undefined local variable or method error using delegate", "body": "<p>Ihave some code and i'm using delegate function this way:</p>\n\n<p>I'm using Ruby On rails '5.2.1' and ruby '2.5.3'</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>#Owner model\nclass Owner &lt; ApplicationRecord\n  has_many :expenses\n  delegate :list_of_this_month, to: :expense, prefix: true\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>#Expense model\nclass Expense &lt; ApplicationRecord\n  belongs_to :owner\n\n  def list_of_this_month\n    select { |e| e.day_month == DateTime.current.strftime('%Y-m') }\n  end\n\n  def day_month\n    date.strftime('%Y-m')\n  end\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>#Expenses Controller\nclass ExpensesController &lt; ApplicationController\n  def index\n    @expenses = current_owner.expense_list_of_this_month\n  end\nend\n</code></pre>\n\n<p>In the view when i call</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>  #{current_owner.expense_quantity_of_this_month}\n</code></pre>\n\n<p>Instead of the list of the current month and year expenses of the logged Owner, I'm getting this error:</p>\n\n<p>--> undefined local variable or method `expense' for # Did you mean? expenses expenses=</p>\n\n<p>So, how this error can be fixed?</p>\n"}, {"tags": ["arrays", "ruby", "hash", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 1459, "user_id": 1612744, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/NRaQy.jpg?s=128&g=1", "display_name": "magni-", "link": "https://stackoverflow.com/users/1612744/magni"}, "is_accepted": false, "score": 0, "last_activity_date": 1563762982, "creation_date": 1563762982, "answer_id": 57138545, "question_id": 57136335, "link": "https://stackoverflow.com/questions/57136335/comparing-array-of-hashes-with-regex-in-ruby/57138545#57138545", "title": "Comparing array of hashes with regex in ruby", "body": "<p>Use a double:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>let(:id_double) { double('id') }\nlet(:expected) do\n  [\n    { var1: nil, action: 'open', Run: 'App', Id: id_double },\n    { var1: nil, Id: id_double }\n  ]\nend\n\nbefore do\n  allow(id_double).to receive(:==) do |other_id|\n    other_id =~ /^[A-Z]\\d{3}-[A-Z]\\d{3}-[A-Z]\\d{3}$/\n  end\nend\n\nit 'works' do\n  actual = # ...\n  expect(actual).to match_array(expected)\nend\n</code></pre>\n"}], "owner": {"reputation": 1516, "user_id": 1118854, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/Oi3YF.jpg?s=128&g=1", "display_name": "rohitkadam19", "link": "https://stackoverflow.com/users/1118854/rohitkadam19"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1563762982, "creation_date": 1563737629, "question_id": 57136335, "link": "https://stackoverflow.com/questions/57136335/comparing-array-of-hashes-with-regex-in-ruby", "title": "Comparing array of hashes with regex in ruby", "body": "<p>I have two array of hashes. Actual array is one I'm getting through my test and I have expected array stored somewhere in files with which I compare the actual one.</p>\n\n<ul>\n<li><p>Actual array</p>\n\n<p><code>[\n  {:var1=&gt;nil, :action=&gt;\"open\", :Run=&gt;\"App\", :Id=&gt;\"A123-B456-C789\"}, \n  {:var1=&gt;nil, :Id=&gt;\"P987-Q654-R321\"}\n]</code></p></li>\n<li><p>Expected array</p>\n\n<p><code>[\n  {:var1=&gt;nil, :action=&gt;\"open\", :Run=&gt;\"App\", :Id=&gt;\"A123-B456-C789\"},\n  {:var1=&gt;nil, :Id=&gt;\"P987-Q654-R321\"}\n ]</code></p></li>\n</ul>\n\n<p>Currently, I am using Rspec::Matcher <a href=\"https://relishapp.com/rspec/rspec-expectations/docs/built-in-matchers/contain-exactly-matcher\" rel=\"nofollow noreferrer\">match_array</a> to compare and it is working perfectly:</p>\n\n<pre><code>expect(actual).to match_array(expected)\n</code></pre>\n\n<p><strong>Problem</strong>:</p>\n\n<p><strong>Id</strong> in actual array in every hash is dynamic. So, I can not compare it with expected value. Here, I would like compare if it is not nil or check pattern with some regex. Something like this:</p>\n\n<pre><code>{:var1=&gt;nil, :Id=&gt; !nil or /some-regex/}\n</code></pre>\n\n<p>Not sure if it's doable with Rspec Matcher or I need to change matcher library?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redis", "digital-ocean", "sidekiq"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1563739795, "post_id": 57136207, "comment_id": 100788882, "body": "<a href=\"https://github.com/mperham/sidekiq/issues/4029\" rel=\"nofollow noreferrer\">This</a> may help some with troubleshooting this issue."}, {"owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 1, "creation_date": 1563814270, "post_id": 57136207, "comment_id": 100816262, "body": "I&#39;d guess either you are out of RAM or out of file handles. <a href=\"https://www.cyberciti.biz/tips/linux-procfs-file-descriptors.html\" rel=\"nofollow noreferrer\">cyberciti.biz/tips/linux-procfs-file-descriptors.html</a>"}, {"owner": {"reputation": 31, "user_id": 1153705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de3ffb4670bdab1327d3a3d728a8bc6?s=128&d=identicon&r=PG", "display_name": "martio", "link": "https://stackoverflow.com/users/1153705/martio"}, "reply_to_user": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "edited": false, "score": 0, "creation_date": 1563830196, "post_id": 57136207, "comment_id": 100822801, "body": "@MikePerham, probably RAM. As for file handles, see:   $ sysctl fs.file-nr fs.file-nr = 11296      0       811562"}], "owner": {"reputation": 31, "user_id": 1153705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5de3ffb4670bdab1327d3a3d728a8bc6?s=128&d=identicon&r=PG", "display_name": "martio", "link": "https://stackoverflow.com/users/1153705/martio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 224, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1563736151, "creation_date": 1563736151, "question_id": 57136207, "link": "https://stackoverflow.com/questions/57136207/sidekiq-exception-occurred-cant-alloc-thread", "title": "Sidekiq: &quot;Exception occurred: can&#39;t alloc thread&quot;", "body": "<p>An error occurs every now and then while the Sidekiq is running. What could be the reason? I use the Digital Ocean and:</p>\n\n<p>Ubuntu 18.04.1 LTS </p>\n\n<p>rails - 5.1.7\nredis - 4.1.0\nsidekiq - 5.2.7</p>\n\n<p>sidekiq: 3 queues, 3 processes</p>\n\n<p>redis_version: 4.0.9</p>\n\n<p>Digital Ocean: CPU Optimized Droplets 8 GB, 4 vCPUs, 50 GB</p>\n\n<p>From sidekiq.log:</p>\n\n<pre><code>E, [2019-07-20T22:53:30.849239 #9392] ERROR -- : Exception occurred: can't alloc thread\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/instrumental_agent-2.1.0/lib/instrumental/agent.rb:392:in `new'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/instrumental_agent-2.1.0/lib/instrumental/agent.rb:392:in `start_connection_worker'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/instrumental_agent-2.1.0/lib/instrumental/agent.rb:298:in `send_command'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/instrumental_agent-2.1.0/lib/instrumental/agent.rb:97:in `gauge'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/metrician-0.1.0/lib/metrician.rb:75:in `gauge'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/metrician-0.1.0/lib/metrician/reporters/redis.rb:20:in `ensure in call_with_metrician_time'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/metrician-0.1.0/lib/metrician/reporters/redis.rb:23:in `call_with_metrician_time'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/redis-4.1.0/lib/redis/client.rb:212:in `block in call_with_timeout'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/redis-4.1.0/lib/redis/client.rb:285:in `with_socket_timeout'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/redis-4.1.0/lib/redis/client.rb:211:in `call_with_timeout'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/redis-4.1.0/lib/redis.rb:1179:in `block in _bpop'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/redis-4.1.0/lib/redis.rb:50:in `block in synchronize'\n/home/martio/.rvm/rubies/ruby-2.6.3/lib/ruby/2.6.0/monitor.rb:230:in `mon_synchronize'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/redis-4.1.0/lib/redis.rb:50:in `synchronize'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/redis-4.1.0/lib/redis.rb:1176:in `_bpop'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/redis-4.1.0/lib/redis.rb:1221:in `brpop'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/fetch.rb:36:in `block in retrieve_work'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq.rb:97:in `block in redis'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/connection_pool-2.2.2/lib/connection_pool.rb:65:in `block (2 levels) in with'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/connection_pool-2.2.2/lib/connection_pool.rb:64:in `handle_interrupt'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/connection_pool-2.2.2/lib/connection_pool.rb:64:in `block in with'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/connection_pool-2.2.2/lib/connection_pool.rb:61:in `handle_interrupt'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/connection_pool-2.2.2/lib/connection_pool.rb:61:in `with'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq.rb:94:in `redis'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/fetch.rb:36:in `retrieve_work'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/processor.rb:89:in `get_one'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/processor.rb:99:in `fetch'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/processor.rb:82:in `process_one'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/processor.rb:71:in `run'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/util.rb:16:in `watchdog'\n/home/xxx/apps/xxx/shared/bundle/ruby/2.6.0/gems/sidekiq-5.2.7/lib/sidekiq/util.rb:25:in `block in safe_thread'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sidekiq"], "answers": [{"tags": [], "owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "is_accepted": false, "score": 1, "last_activity_date": 1563729991, "creation_date": 1563729991, "answer_id": 57135450, "question_id": 57135007, "link": "https://stackoverflow.com/questions/57135007/how-to-set-specific-sidekiq-queue-to-run-one-task-at-the-time/57135450#57135450", "title": "How to set specific sidekiq queue to run one task at the time?", "body": "<p>It sounds like you are trying to use Sidekiq for a usecase it is not designed for.  Consider using a different tool altogether.</p>\n\n<p><a href=\"https://github.com/mperham/sidekiq/wiki/Best-Practices#3-embrace-concurrency\" rel=\"nofollow noreferrer\">https://github.com/mperham/sidekiq/wiki/Best-Practices#3-embrace-concurrency</a></p>\n"}], "owner": {"reputation": 401, "user_id": 7156757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8768142e36048bf7d98b346110611ebc?s=128&d=identicon&r=PG&f=1", "display_name": "O.Vykhor", "link": "https://stackoverflow.com/users/7156757/o-vykhor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 277, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563729991, "creation_date": 1563726381, "question_id": 57135007, "link": "https://stackoverflow.com/questions/57135007/how-to-set-specific-sidekiq-queue-to-run-one-task-at-the-time", "title": "How to set specific sidekiq queue to run one task at the time?", "body": "<p>I have a module which retrieves data from the instagram (with cookies, i.e. with logged in user), but instagram prevents to send a lot of requests at the time, so I'm looking for solution to perform one worker's task at the time (without parallel tasks of the same worker). From similar topics I did found a few solutions, like set concurrency to 1 or use gem <a href=\"https://github.com/brainopia/sidekiq-limit_fetch\" rel=\"nofollow noreferrer\">https://github.com/brainopia/sidekiq-limit_fetch</a>, but I don't want to reduce concurrency for all queues because of specific one, and also <code>sidekiq-limit_fetch</code> is not helps.</p>\n"}, {"tags": ["ruby", "net-sftp"], "answers": [{"comments": [{"owner": {"reputation": 279, "user_id": 3531954, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35bf3b3f78e7d5c3006f57cfaa279460?s=128&d=identicon&r=PG&f=1", "display_name": "Lasse Kliemann", "link": "https://stackoverflow.com/users/3531954/lasse-kliemann"}, "edited": false, "score": 0, "creation_date": 1563774799, "post_id": 57135713, "comment_id": 100795121, "body": "Thanks. I started with Ruby yesterday and it seems I misunderstood the function/block construction. I thought the functions is called, and then the block. Now I understand that this is not true."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 279, "user_id": 3531954, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35bf3b3f78e7d5c3006f57cfaa279460?s=128&d=identicon&r=PG&f=1", "display_name": "Lasse Kliemann", "link": "https://stackoverflow.com/users/3531954/lasse-kliemann"}, "edited": false, "score": 0, "creation_date": 1563777204, "post_id": 57135713, "comment_id": 100795935, "body": "@LasseKliemann: This example was surprising to me too, even though I&#39;ve been working with Ruby for a long time. It appears weird at first simply because it&#39;s asynchronous. A block can be executed any number of time (including 0) and at any time, depending on what the method does. Documentation helps a lot!"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 2, "last_activity_date": 1563733587, "last_edit_date": 1563733587, "creation_date": 1563731991, "answer_id": 57135713, "question_id": 57134710, "link": "https://stackoverflow.com/questions/57134710/ruby-and-netsftp-why-cant-i-move-this-to-a-separate-function/57135713#57135713", "title": "Ruby and Net::SFTP: why can&#39;t I move this to a separate function?", "body": "<p>Interesting problem.</p>\n\n<h1>Old school debugging</h1>\n\n<p>Let's add some <code>puts</code> to see what happens:</p>\n\n<pre><code>require \"net/sftp\"\n\ndef sftp_file_exists_1?(host, user, filename)\n  Net::SFTP.start(host, user, verify_host_key: :always) do |sftp|\n    puts \"  BEFORE STAT\"\n    sftp.stat(filename) do |response|\n      puts \"  REQUEST FINISHED\"\n      return response.ok?\n    end\n    puts \"  AFTER STAT\"\n  end\n  puts \"  NOT EXECUTED\"\nend\n\ndef sftp_stat_ok?(sftp, filename)\n  request = sftp.stat(filename) do |response|\n    puts \"  REQUEST FINISHED\"\n    return response.ok?\n  end\n  puts \"  REQUEST SENT\"\n  request\nend\n\ndef sftp_file_exists_2?(host, user, filename)\n  Net::SFTP.start(host, user, verify_host_key: :always) do |sftp|\n    puts \"  CALL STAT_OK?\"\n    return sftp_stat_ok?(sftp, filename)\n  end\n  puts \"  NOT EXECUTED\"\nend\n</code></pre>\n\n<p><code>sftp_file_exists_1?</code> outputs:</p>\n\n<pre><code>  BEFORE STAT\n  AFTER STAT\n  REQUEST FINISHED\ntrue\n</code></pre>\n\n<p>While <code>sftp_file_exists_2?</code> outputs:</p>\n\n<pre><code>  CALL STAT_OK?\n  REQUEST SENT\n#&lt;Net::SFTP::Request:0x0000000001db2558&gt;\n</code></pre>\n\n<p><code>\"  REQUEST FINISHED\"</code> doesn't appear.</p>\n\n<h1>Async logic</h1>\n\n<p>The block you pass to <a href=\"https://www.rubydoc.info/gems/net-sftp/2.0.5/Net%2FSFTP%2FSession:stat\" rel=\"nofollow noreferrer\"><code>stat</code></a> is a <a href=\"https://en.wikipedia.org/wiki/Callback_(computer_programming)\" rel=\"nofollow noreferrer\">callback</a>. It only gets called when the server responds. To make sure the block gets executed before <code>sftp_stat_ok?</code> returns, you need to wait for the request to be complete:</p>\n\n<pre><code>def sftp_stat_ok?(sftp, filename)\n  request = sftp.stat(filename) do |response|\n    return response.ok?\n  end\n  request.wait\nend\n\ndef sftp_file_exists_2?(host, user, filename)\n  Net::SFTP.start(host, user, verify_host_key: :always) do |sftp|\n    return sftp_stat_ok?(sftp, filename)\n  end\nend\n</code></pre>\n\n<p>It isn't needed for the first version because <a href=\"http://net-ssh.github.io/net-sftp/classes/Net/SFTP.html#method-c-start\" rel=\"nofollow noreferrer\"><code>start</code></a>:</p>\n\n<blockquote>\n  <p>If a block is given, it will be passed to the SFTP session and will be\n  called once the SFTP session is fully open and initialized. When the\n  block terminates, the new SSH session will automatically be closed.</p>\n</blockquote>\n"}], "owner": {"reputation": 279, "user_id": 3531954, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/35bf3b3f78e7d5c3006f57cfaa279460?s=128&d=identicon&r=PG&f=1", "display_name": "Lasse Kliemann", "link": "https://stackoverflow.com/users/3531954/lasse-kliemann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 57135713, "answer_count": 1, "score": 1, "last_activity_date": 1563733587, "creation_date": 1563723992, "last_edit_date": 1563727639, "question_id": 57134710, "link": "https://stackoverflow.com/questions/57134710/ruby-and-netsftp-why-cant-i-move-this-to-a-separate-function", "title": "Ruby and Net::SFTP: why can&#39;t I move this to a separate function?", "body": "<p>Writing a function that checks via SFTP if a file is present on the server.</p>\n\n<p>I have written a function <code>sftp_file_exists_1?</code> that works. Now I want to split this function into two functions, and to my surprise, this does not work.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require \"net/sftp\"\n\ndef sftp_file_exists_1?(host, user, filename)\n  Net::SFTP.start(host, user, verify_host_key: :always) do |sftp|\n    sftp.stat(filename) do |response|\n      return response.ok?\n    end\n  end\nend\n\ndef sftp_stat_ok?(sftp, filename)\n  sftp.stat(filename) do |response|\n    return response.ok?\n  end\nend\n\ndef sftp_file_exists_2?(host, user, filename)\n  Net::SFTP.start(host, user, verify_host_key: :always) do |sftp|\n    return sftp_stat_ok?(sftp, filename)\n  end\nend\n\np sftp_file_exists_1?(\"localhost\", \"user\", \"repos\")\np sftp_file_exists_2?(\"localhost\", \"user\", \"repos\")\n</code></pre>\n\n<p>I expected:</p>\n\n<pre><code>true\ntrue\n</code></pre>\n\n<p>since a file <code>repos</code> actually exists on the server. However, I get (abbreviated):</p>\n\n<pre><code>true\n#&lt;Net::SFTP::Request:0x000055f3b56732d0 @callback=#&lt;Proc:0x000055f3b5673280@./test.rb:14&gt;, ...\n</code></pre>\n\n<p><strong>Addendum:</strong> this works:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def sftp_stat_ok?(sftp, filename)\n  begin\n    sftp.stat!(filename)\n  rescue Net::SFTP::StatusException\n    return false\n  end\n  return true\nend\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 2694, "user_id": 3956205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42aff84cfa87f92797cb54bdea6d0c20?s=128&d=identicon&r=PG", "display_name": "BTL", "link": "https://stackoverflow.com/users/3956205/btl"}, "edited": false, "score": 0, "creation_date": 1563715414, "post_id": 57133602, "comment_id": 100783174, "body": "What have you tried ?"}, {"owner": {"reputation": 1, "user_id": 11815096, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SreNqQGLm4M/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdlkqhF12cFGt-3E7sGOd7xZrTh-A/photo.jpg?sz=128", "display_name": "lio oliver", "link": "https://stackoverflow.com/users/11815096/lio-oliver"}, "reply_to_user": {"reputation": 2694, "user_id": 3956205, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42aff84cfa87f92797cb54bdea6d0c20?s=128&d=identicon&r=PG", "display_name": "BTL", "link": "https://stackoverflow.com/users/3956205/btl"}, "edited": false, "score": 0, "creation_date": 1563715700, "post_id": 57133602, "comment_id": 100783248, "body": "I am not understanding of using some ruby gems or how would I calculate the exchange rate."}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1563722002, "post_id": 57133602, "comment_id": 100784835, "body": "1) parse the JSON file 2) convert the date param to the same string format you see in the JSON 3) lookup the from_currency to EUR rate 4) lookup the EUR to to_currency rate 5) calculate  try to solve the problem and come back if you have more question and can show us what you&#39;ve tried and what did not work. We do not solve homework here :-)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1563731089, "post_id": 57133602, "comment_id": 100786889, "body": "Some suggestions: 1) remove &quot;but other sources might not be JSON and may not be based on the EUR.&quot;, as there is no way to deal with such an open-ended statement; 2) write, &quot;The following is an example of a hash read from a JSON file.&quot;; 3) Make the hash a valid Ruby object by changing <code>} ....</code> to <code>}}</code> and assign a variable to the hash (e.g., <code>ex_rates = {&quot;2018-12-11&quot;: {...}}</code>) so that readers can refer to that variable in answers and comments without having to define it; and 4) state whether it&#39;s a homework problem. If it is SO rules require you to describe efforts you&#39;ve made to solve it."}, {"owner": {"reputation": 1, "user_id": 11815096, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SreNqQGLm4M/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdlkqhF12cFGt-3E7sGOd7xZrTh-A/photo.jpg?sz=128", "display_name": "lio oliver", "link": "https://stackoverflow.com/users/11815096/lio-oliver"}, "edited": false, "score": 0, "creation_date": 1563733382, "post_id": 57133602, "comment_id": 100787483, "body": "Thanks, i tried something this"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1563731435, "post_id": 57135241, "comment_id": 100786970, "body": "This assumes that &quot;buy&quot; and &quot;sell&quot; exchange rates are the same, which you must of course assume is true since you are given just use one set of rates, but it is a real-world issue."}], "tags": [], "owner": {"reputation": 419, "user_id": 6272061, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b94257067957a9a0778f53546fbe751e?s=128&d=identicon&r=PG&f=1", "display_name": "thomas", "link": "https://stackoverflow.com/users/6272061/thomas"}, "is_accepted": false, "score": 1, "last_activity_date": 1563728254, "creation_date": 1563728254, "answer_id": 57135241, "question_id": 57133602, "link": "https://stackoverflow.com/questions/57133602/exchange-rate-return-in-ruby/57135241#57135241", "title": "Exchange Rate return in Ruby", "body": "<p>Try something like this (copy those 3 files)</p>\n\n<p><strong><code>exchange.rb</code></strong></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require 'json'\n\nmodule Exchange\n  @rates = JSON.parse(File.read('rates.json'))\n\n  def self.rate(date, from_currency, to_currency)\n    rates = @rates[date]                     # get rates of given day\n    from_to_eur = 1.0 / rates[from_currency] # convert to EUR\n    from_to_eur * rates[to_currency]         # convert to target currency\n  end\nend\n</code></pre>\n\n<p><strong><code>test_script.rb</code></strong></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require_relative 'exchange.rb'\nrequire 'date'\n\ntarget_date = Date.new(2018,12,11).to_s\nputs \"USD to GBP: #{Exchange.rate(target_date, 'USD', 'GBP')}\"\nputs \"USD to JPY: #{Exchange.rate(target_date, 'PLN', 'CHF')}\"\nputs \"DKK to CAD: #{Exchange.rate(target_date, 'PLN', 'CHF')}\"\n</code></pre>\n\n<p><strong><code>rates.json</code></strong></p>\n\n<pre><code>{\n  \"2018-12-11\": {\n    \"USD\": 1.1379,\n    \"JPY\": 128.75,\n    \"BGN\": 1.9558,\n    \"CZK\": 25.845,\n    \"DKK\": 7.4641,\n    \"GBP\": 0.90228,\n    \"HUF\": 323.4,\n    \"PLN\": 4.2983,\n    \"RON\": 4.6557,\n    \"SEK\": 10.297,\n    \"CHF\": 1.1248,\n    \"ISK\": 140.2,\n    \"NOK\": 9.7038,\n    \"HRK\": 7.3943,\n    \"RUB\": 75.5225,\n    \"TRY\": 6.1295,\n    \"AUD\": 1.5778,\n    \"BRL\": 4.4417,\n    \"CAD\": 1.5239,\n    \"CNY\": 7.8498,\n    \"HKD\": 8.8934,\n    \"IDR\": 16625.0,\n    \"ILS\": 4.2691,\n    \"INR\": 81.8215,\n    \"KRW\": 1284.17,\n    \"MXN\": 23.0209,\n    \"MYR\": 4.7615,\n    \"NZD\": 1.6526,\n    \"PHP\": 60.009,\n    \"SGD\": 1.5617,\n    \"THB\": 37.317,\n    \"ZAR\": 16.2903\n  },\n  \"2018-12-10\": {\n    \"USD\": 1.1425,\n    \"JPY\": 128.79,\n    \"BGN\": 1.9558,\n    \"CZK\": 25.866,\n    \"DKK\": 7.4639,\n    \"GBP\": 0.90245,\n    \"HUF\": 323.15,\n    \"PLN\": 4.2921,\n    \"RON\": 4.6502,\n    \"SEK\": 10.333,\n    \"CHF\": 1.1295,\n    \"ISK\": 140.0,\n    \"NOK\": 9.6885,\n    \"HRK\": 7.387,\n    \"RUB\": 75.8985,\n    \"TRY\": 6.0499,\n    \"AUD\": 1.5842,\n    \"BRL\": 4.4524,\n    \"CAD\": 1.5218,\n    \"CNY\": 7.8967,\n    \"HKD\": 8.9283,\n    \"IDR\": 16671.36,\n    \"ILS\": 4.2642,\n    \"INR\": 82.7284,\n    \"KRW\": 1287.42,\n    \"MXN\": 23.132,\n    \"MYR\": 4.7671,\n    \"NZD\": 1.6581,\n    \"PHP\": 60.367,\n    \"SGD\": 1.5667,\n    \"THB\": 37.525,\n    \"ZAR\": 16.3463\n  },\n  \"2018-12-07\": {\n    \"USD\": 1.1371,\n    \"JPY\": 128.36,\n    \"BGN\": 1.9558,\n    \"CZK\": 25.851,\n    \"DKK\": 7.4641,\n    \"GBP\": 0.89085,\n    \"HUF\": 323.5,\n    \"PLN\": 4.2895,\n    \"RON\": 4.6485,\n    \"SEK\": 10.2665,\n    \"CHF\": 1.1299,\n    \"ISK\": 139.5,\n    \"NOK\": 9.697,\n    \"HRK\": 7.3913,\n    \"RUB\": 75.885,\n    \"TRY\": 6.0619,\n    \"AUD\": 1.5766,\n    \"BRL\": 4.4358,\n    \"CAD\": 1.523,\n    \"CNY\": 7.8244,\n    \"HKD\": 8.8866,\n    \"IDR\": 16454.01,\n    \"ILS\": 4.2545,\n    \"INR\": 80.509,\n    \"KRW\": 1278.67,\n    \"MXN\": 23.1435,\n    \"MYR\": 4.7372,\n    \"NZD\": 1.6558,\n    \"PHP\": 60.059,\n    \"SGD\": 1.5583,\n    \"THB\": 37.359,\n    \"ZAR\": 16.0673\n  }\n}\n</code></pre>\n\n<p>When you run <code>test_script.rb</code> you should be able to see the exchange rates. I hope this works for you, but be aware that this only covers the JSON case. Let me know if it worked and I have to agree with @pascal_betz, in the future please provide more info what you already tried and what actually failed or what specifically you faild to do. But welcome to stackoverflow, definately keep posting, I know it can be discouraging in the beginning! ;)</p>\n"}], "owner": {"reputation": 1, "user_id": 11815096, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-SreNqQGLm4M/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdlkqhF12cFGt-3E7sGOd7xZrTh-A/photo.jpg?sz=128", "display_name": "lio oliver", "link": "https://stackoverflow.com/users/11815096/lio-oliver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 218, "favorite_count": 0, "closed_date": 1565626200, "answer_count": 1, "score": -4, "last_activity_date": 1565626184, "creation_date": 1563715193, "last_edit_date": 1565626184, "question_id": 57133602, "link": "https://stackoverflow.com/questions/57133602/exchange-rate-return-in-ruby", "closed_reason": "Not suitable for this site", "title": "Exchange Rate return in Ruby", "body": "<pre><code>require 'json'\nrequire 'date'\n\nmodule Exchange\n  file = File.read('./data/data.json')\n  data_hash = JSON.parse(file)\n\n  def self.rate(date, from_currency, to_currency)\n    date = date.strftime('%Y-%m-%d')\n    raise 'That date does not exist' unless data_hash[date]\n\n    data_hash[date][to_currency] / data_hash[date][from_currency]\n  end\nend\n\n</code></pre>\n\n<p>This method must return the exchange rate between <code>from_currency</code> and <code>to_currency</code> on <code>date</code> as a float.</p>\n\n<p>I have included a JSON file of currency exchange rates which are based upon the Euro. I need to  use this as your source of currency exchange rates</p>\n\n<p>Also, the format of file can be anything other than json in future. and it should support different currency other than Euro as well. (I dont know how would i do this)</p>\n\n<p>the json file looks like this:</p>\n\n<pre><code>{\n  \"2018-12-11\": {\n    \"USD\": 1.1379,\n    \"JPY\": 128.75,\n    \"BGN\": 1.9558,\n    \"CZK\": 25.845,\n    \"DKK\": 7.4641,\n    \"GBP\": 0.90228,\n    \"HUF\": 323.4,\n    \"PLN\": 4.2983,\n    \"RON\": 4.6557,\n    \"SEK\": 10.297,\n    \"CHF\": 1.1248,\n    \"ISK\": 140.2,\n    \"NOK\": 9.7038,\n    \"HRK\": 7.3943,\n    \"RUB\": 75.5225,\n    \"TRY\": 6.1295,\n    \"AUD\": 1.5778,\n    \"BRL\": 4.4417,\n    \"CAD\": 1.5239,\n    \"CNY\": 7.8498,\n    \"HKD\": 8.8934,\n    \"IDR\": 16625.0,\n    \"ILS\": 4.2691,\n    \"INR\": 81.8215,\n    \"KRW\": 1284.17,\n    \"MXN\": 23.0209,\n    \"MYR\": 4.7615,\n    \"NZD\": 1.6526,\n    \"PHP\": 60.009,\n    \"SGD\": 1.5617,\n    \"THB\": 37.317,\n    \"ZAR\": 16.2903\n  },\n  \"2018-12-10\": {\n    \"USD\": 1.1425,\n    \"JPY\": 128.79,\n    \"BGN\": 1.9558,\n    \"CZK\": 25.866,\n    \"DKK\": 7.4639,\n    \"GBP\": 0.90245,\n    \"HUF\": 323.15,\n    \"PLN\": 4.2921,\n    \"RON\": 4.6502,\n    \"SEK\": 10.333,\n    \"CHF\": 1.1295,\n    \"ISK\": 140.0,\n    \"NOK\": 9.6885,\n    \"HRK\": 7.387,\n    \"RUB\": 75.8985,\n    \"TRY\": 6.0499,\n    \"AUD\": 1.5842,\n    \"BRL\": 4.4524,\n    \"CAD\": 1.5218,\n    \"CNY\": 7.8967,\n    \"HKD\": 8.9283,\n    \"IDR\": 16671.36,\n    \"ILS\": 4.2642,\n    \"INR\": 82.7284,\n    \"KRW\": 1287.42,\n    \"MXN\": 23.132,\n    \"MYR\": 4.7671,\n    \"NZD\": 1.6581,\n    \"PHP\": 60.367,\n    \"SGD\": 1.5667,\n    \"THB\": 37.525,\n    \"ZAR\": 16.3463\n  },\n  \"2018-12-07\": {\n    \"USD\": 1.1371,\n    \"JPY\": 128.36,\n    \"BGN\": 1.9558,\n    \"CZK\": 25.851,\n    \"DKK\": 7.4641,\n    \"GBP\": 0.89085,\n    \"HUF\": 323.5,\n    \"PLN\": 4.2895,\n    \"RON\": 4.6485,\n    \"SEK\": 10.2665,\n    \"CHF\": 1.1299,\n    \"ISK\": 139.5,\n    \"NOK\": 9.697,\n    \"HRK\": 7.3913,\n    \"RUB\": 75.885,\n    \"TRY\": 6.0619,\n    \"AUD\": 1.5766,\n    \"BRL\": 4.4358,\n    \"CAD\": 1.523,\n    \"CNY\": 7.8244,\n    \"HKD\": 8.8866,\n    \"IDR\": 16454.01,\n    \"ILS\": 4.2545,\n    \"INR\": 80.509,\n    \"KRW\": 1278.67,\n    \"MXN\": 23.1435,\n    \"MYR\": 4.7372,\n    \"NZD\": 1.6558,\n    \"PHP\": 60.059,\n    \"SGD\": 1.5583,\n    \"THB\": 37.359,\n    \"ZAR\": 16.0673\n  }\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 394, "user_id": 11509906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DYTfF.jpg?s=128&g=1", "display_name": "Sumak", "link": "https://stackoverflow.com/users/11509906/sumak"}, "edited": false, "score": 0, "creation_date": 1563732630, "post_id": 57133512, "comment_id": 100787274, "body": "Thanks a lot for your precision, I&#39;ll try to be more precise next time. I saw someone using haml in a tutorial, it looks awesome ! (I didnt used it here, it&#39;s my first project)"}, {"owner": {"reputation": 106, "user_id": 10250197, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cyg90ndsbqA/AAAAAAAAAAI/AAAAAAAAEU8/Dbj_hhdGaGA/photo.jpg?sz=128", "display_name": "kkp", "link": "https://stackoverflow.com/users/10250197/kkp"}, "reply_to_user": {"reputation": 394, "user_id": 11509906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DYTfF.jpg?s=128&g=1", "display_name": "Sumak", "link": "https://stackoverflow.com/users/11509906/sumak"}, "edited": false, "score": 0, "creation_date": 1563744165, "post_id": 57133512, "comment_id": 100789842, "body": "Sure thing. If you have troubles with the syntax at first, there are erb -&gt; haml converters available online which might prove helpful."}, {"owner": {"reputation": 394, "user_id": 11509906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DYTfF.jpg?s=128&g=1", "display_name": "Sumak", "link": "https://stackoverflow.com/users/11509906/sumak"}, "edited": false, "score": 0, "creation_date": 1563793319, "post_id": 57133512, "comment_id": 100804213, "body": "Thanks again, tbh I can&#39;t wait to finish this project and try haml ! If you want to know about the URL problem, if I choose to use <i>redirect_to</i> / <i>redirect_back</i>, variables won&#39;t be passed (so errors won&#39;t be displayed). But if I choose <i>render action: :new</i>, turbolinks will mess with my URL (<a href=\"https://github.com/turbolinks/turbolinks/issues/60\" rel=\"nofollow noreferrer\">github.com/turbolinks/turbolinks/issues/60</a>)... Removing turbolinks after implenting AJAX looks the easiest to me, but I&#39;m gonna do it latter (and will read more about that issue)"}], "tags": [], "owner": {"reputation": 106, "user_id": 10250197, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cyg90ndsbqA/AAAAAAAAAAI/AAAAAAAAEU8/Dbj_hhdGaGA/photo.jpg?sz=128", "display_name": "kkp", "link": "https://stackoverflow.com/users/10250197/kkp"}, "is_accepted": true, "score": 1, "last_activity_date": 1563714362, "creation_date": 1563714362, "answer_id": 57133512, "question_id": 57133128, "link": "https://stackoverflow.com/questions/57133128/activerecord-validations-a-dry-way-to-display-errors/57133512#57133512", "title": "ActiveRecord validations + a DRY way to display errors?", "body": "<p>1 <code>has_one_attached</code> enables a method <code>attached?</code>. You can define your own validation method, that uses this to perform validation. ActiveStorage (where the <code>has_one_attached</code> comes from) does not support validations on its own yet. It will in Rails 6 but I assume you are not using this version of RAILS. You could even move the validations to an outside validator and use that to validate the file presence, size, type etc. <a href=\"https://guides.rubyonrails.org/active_record_validations.html#validates-with\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/active_record_validations.html#validates-with</a>\nMoving validations from the model is usually considered good practice in the long term.</p>\n\n<p>2 Try to use redirect when there are errors, the same way you do it when form succedes (instead of render).</p>\n\n<p>3 Yes, you can just move the part responsible for displaying errors into a partial that's easy to access across the application, and render it in the form under a condition of having errors (or render it always, but it won't display anything in it if there are no errors)</p>\n\n<p>Also when submitting a question, try to specify what exactly is not working, the way you described validation not working is a bit vague.</p>\n\n<p>Also on a personal note, I suggest using haml instead of erb. But that's only cause you mentioned you wanted some suggestions ;)</p>\n"}], "owner": {"reputation": 394, "user_id": 11509906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DYTfF.jpg?s=128&g=1", "display_name": "Sumak", "link": "https://stackoverflow.com/users/11509906/sumak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 57133512, "answer_count": 1, "score": 0, "last_activity_date": 1563714362, "creation_date": 1563711337, "question_id": 57133128, "link": "https://stackoverflow.com/questions/57133128/activerecord-validations-a-dry-way-to-display-errors", "title": "ActiveRecord validations + a DRY way to display errors?", "body": "<p>I'd like to catch and display validation errors for ActiveRecord resources attached to an object (here: <em>:album_artwork</em>).</p>\n\n<p>I'm following Amit Suroliya suggestion for displaying errors within forms (<em>f.object.errors</em> ..., found <a href=\"https://stackoverflow.com/questions/31092846/how-to-show-error-message-on-rails-views\">here</a>). Following <a href=\"https://guides.rubyonrails.org/active_record_validations.html#displaying-validation-errors-in-views\" rel=\"nofollow noreferrer\">guides.rubyonrails.com guide</a> (<em>&lt;% if @article.errors.any? %></em>) leads to having errors when the form first loads (before user submit it). </p>\n\n<p><strong>CODE :</strong></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># album.rb\n\n  has_one_attached :album_artwork\n\n  validates :name,          presence: { message: 'Album should have a title.' }\n  validates :release_date,  presence: { message: 'Album should have a release date.' }\n  validates :album_artwork, presence: { message: 'Album should have an artwork.' } # not working :(\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>#albums_controller.rb\n\ndef new\n  @album = Album.new\n  @album.tracks.build # Album has_many Tracks (doesn't matter here)\nend\n\n\ndef create\n  @album = Album.new(album_params)\n\n  respond_to do |format|\n    if @album.save\n      format.html { redirect_to @album, flash: { success: \"Album added\" } }\n      format.json {  }\n    else\n      format.html { render 'albums/new', flash: { error: \"Something wrong happened :(\" } }\n      format.json {  }\n    end\n  end\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code># albums/new.html.erb\n\n&lt;%= form_for @album, url: {action: 'create'} do |f| %&gt;\n\n  &lt;% if f.object.errors.any? %&gt;\n     &lt;div class=\"alert alert-danger\"&gt;\n      &lt;h4&gt;Errors :&lt;/h4&gt;\n      &lt;ul&gt;\n        &lt;% f.object.errors.full_messages.each do |message| %&gt;\n          &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n        &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;%= render 'albums/form_new', f: f %&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>There's 3 points where I can't figure out the best (or any) solution:</p>\n\n<ul>\n<li>How could I validate the <em>file_field</em> corresponding to <em>:album_artwork</em> ?</li>\n<li>When validations fail, URL points to <em>/albums</em> instead of <em>/albums/new</em> (however, <em>/albums/new</em> is displayed, but I'm redirected to <em>/albums</em> if I refresh)</li>\n<li>Is there any convenient way to make the code for displaying errors DRY ? (a helper rendering partial ?)</li>\n</ul>\n\n<p>Any helping hands, suggestions or critics would be gratefully received ! </p>\n\n<p>Have a great day</p>\n"}, {"tags": ["ruby", "selenium", "watir"], "comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 1, "creation_date": 1563709410, "post_id": 57132842, "comment_id": 100781808, "body": "Include WATIR tag, people will come on your way to help you."}, {"owner": {"reputation": 26505, "user_id": 10885684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b93ef11f20d07cf796af83ae1ffe83?s=128&d=identicon&r=PG&f=1", "display_name": "KunduK", "link": "https://stackoverflow.com/users/10885684/kunduk"}, "edited": false, "score": 0, "creation_date": 1563710362, "post_id": 57132842, "comment_id": 100782030, "body": "Please provide some Explicit Wait before interacting the element."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "reply_to_user": {"reputation": 26505, "user_id": 10885684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/66b93ef11f20d07cf796af83ae1ffe83?s=128&d=identicon&r=PG&f=1", "display_name": "KunduK", "link": "https://stackoverflow.com/users/10885684/kunduk"}, "edited": false, "score": 1, "creation_date": 1563714887, "post_id": 57132842, "comment_id": 100783060, "body": "@KunduK He is using watir, so explicit wait for element to become visible is not necessary because that&#39;s automatic."}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1563747525, "post_id": 57132842, "comment_id": 100790443, "body": "That&#39;s not the error I would expect. What happens when you click? Does it pop up the file upload dialog as expected? Fancy front end devs overwriting standard html behavior can make some of this especially challenging."}, {"owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1563766733, "post_id": 57132842, "comment_id": 100793377, "body": "Do you have a hidden input field with <code>type=file</code> attribute and value in the page?"}, {"owner": {"reputation": 93455, "user_id": 187141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f9e28dc83496320c87c55b3cf988ab60?s=128&d=identicon&r=PG", "display_name": "yegor256", "link": "https://stackoverflow.com/users/187141/yegor256"}, "reply_to_user": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "edited": false, "score": 0, "creation_date": 1563776181, "post_id": 57132842, "comment_id": 100795578, "body": "@supputuri yes, I do have that"}], "answers": [{"tags": [], "owner": {"reputation": 12118, "user_id": 4714829, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd1b66c22707be26afda19fe995e17ea?s=128&d=identicon&r=PG&f=1", "display_name": "supputuri", "link": "https://stackoverflow.com/users/4714829/supputuri"}, "is_accepted": false, "score": 0, "last_activity_date": 1563801306, "creation_date": 1563801306, "answer_id": 57146907, "question_id": 57132842, "link": "https://stackoverflow.com/questions/57132842/how-to-send-keys-to-the-file-upload-dialog-in-selenium/57146907#57146907", "title": "How to send keys to the file upload dialog in Selenium?", "body": "<p>Use the below code to upload the file.</p>\n\n<pre><code>browser.element(:css =&gt; \"input[type='file']\").sendKeys(file_path)\n</code></pre>\n"}], "owner": {"reputation": 93455, "user_id": 187141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f9e28dc83496320c87c55b3cf988ab60?s=128&d=identicon&r=PG", "display_name": "yegor256", "link": "https://stackoverflow.com/users/187141/yegor256"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1563801306, "creation_date": 1563708975, "last_edit_date": 1563709879, "question_id": 57132842, "link": "https://stackoverflow.com/questions/57132842/how-to-send-keys-to-the-file-upload-dialog-in-selenium", "title": "How to send keys to the file upload dialog in Selenium?", "body": "<p>I'm doing this (using Watir on top of Selenium):</p>\n\n<pre><code>browser.span(:id =&gt; 'Upload').click\n</code></pre>\n\n<p>Pay attention, this is neither an <code>&lt;input&gt;</code> nor a <code>&lt;button&gt;</code>. It's just a <code>&lt;span&gt;</code>, which reacts (via some JavaScript) with a file upload dialog, which expects me to give it a file name. I need to send the file name into it and then hit <code>Enter</code>. How can I do this in Selenium?</p>\n\n<p>I can't do this:</p>\n\n<pre><code>browser.span(:id =&gt; 'Upload').sendKeys(file)\n</code></pre>\n\n<p>Because I'm getting:</p>\n\n<pre><code>error: element not interactable\n</code></pre>\n"}]