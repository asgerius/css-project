[{"tags": ["sql", "ruby-on-rails", "ruby", "postgresql", "distinct"], "answers": [{"comments": [{"owner": {"reputation": 144312, "user_id": 62076, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/62c90b6f399e6b95554b2da31ca8619a?s=128&d=identicon&r=PG", "display_name": "Alex Wayne", "link": "https://stackoverflow.com/users/62076/alex-wayne"}, "edited": false, "score": 0, "creation_date": 1486600784, "post_id": 42126006, "comment_id": 71420598, "body": "Doing that prevents the error, but then returns zero records :("}, {"owner": {"reputation": 1682, "user_id": 4219209, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8f3e6158829f78389b3d364ae4a247bf?s=128&d=identicon&r=PG", "display_name": "Lanny Bose", "link": "https://stackoverflow.com/users/4219209/lanny-bose"}, "reply_to_user": {"reputation": 144312, "user_id": 62076, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/62c90b6f399e6b95554b2da31ca8619a?s=128&d=identicon&r=PG", "display_name": "Alex Wayne", "link": "https://stackoverflow.com/users/62076/alex-wayne"}, "edited": false, "score": 0, "creation_date": 1486648285, "post_id": 42126006, "comment_id": 71443089, "body": "I had a typo above, and was missing a close-quote and close-parenthesis on the second line. Did you copy-paste directly?"}], "tags": [], "owner": {"reputation": 1682, "user_id": 4219209, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/8f3e6158829f78389b3d364ae4a247bf?s=128&d=identicon&r=PG", "display_name": "Lanny Bose", "link": "https://stackoverflow.com/users/4219209/lanny-bose"}, "is_accepted": false, "score": 0, "last_activity_date": 1486648272, "last_edit_date": 1495542260, "creation_date": 1486599105, "answer_id": 42126006, "question_id": 42125810, "link": "https://stackoverflow.com/questions/42125810/rails-postgres-query-for-all-records-that-meet-a-criteria-with-a-unique-associ/42126006#42126006", "title": "Rails + Postgres query for all records that meet a criteria with a unique association ID", "body": "<p>By taking a look at your error...</p>\n\n<pre><code>ERROR:  SELECT DISTINCT ON expressions must match initial ORDER BY expressions\n</code></pre>\n\n<p>...I got to <a href=\"https://stackoverflow.com/questions/9795660/postgresql-distinct-on-with-different-order-by\">this Stack Overflow post</a>.</p>\n\n<p>You need to include 'account_id' in your order function somewhere.</p>\n\n<p>So I think you should be able to do...</p>\n\n<pre><code>Activity\n  .select('DISTINCT ON (stage_id)')\n  .where(stage: stages)\n  .where('created_at &lt; ?', @start_time)\n  .order(:stage_id, :created_at)\n</code></pre>\n"}], "owner": {"reputation": 144312, "user_id": 62076, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/62c90b6f399e6b95554b2da31ca8619a?s=128&d=identicon&r=PG", "display_name": "Alex Wayne", "link": "https://stackoverflow.com/users/62076/alex-wayne"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486648272, "creation_date": 1486597963, "question_id": 42125810, "link": "https://stackoverflow.com/questions/42125810/rails-postgres-query-for-all-records-that-meet-a-criteria-with-a-unique-associ", "title": "Rails + Postgres query for all records that meet a criteria with a unique association ID", "body": "<p>I have some code like this:</p>\n\n<pre><code>stages.each do |stage|\n  start_activity = stage.activities.where('created_at &lt; ?', @start_time).first\n  end_activity   = stage.activities.where('created_at &lt; ?', @end_time).first\n  # ...\nend\n</code></pre>\n\n<p>Which fills my logs with a few screens worth of queries like these:</p>\n\n<pre><code>Activity Load (0.3ms)  SELECT  \"activities\".* FROM \"activities\"\n  WHERE \"activities\".\"stage_id\" = $1\n  AND (created_at &lt; '2017-01-31 08:00:00.000000')\n  ORDER BY id DESC, \"activities\".\"created_at\" DESC\n  LIMIT 1 \n  [[\"stage_id\", 11548]]\nActivity Load (0.3ms)  SELECT  \"activities\".* FROM \"activities\"\n  ...\n</code></pre>\n\n<p>(Activity has a default scoped order of <code>id DESC</code>)</p>\n\n<p>So I'm hoping there is a way to fetch all the activities I need per timestamp in a single query. This would reduce my number of from <code>activity_count * 2</code> to simply <code>2</code>.</p>\n\n<p>Here's what I tried, but I don't think <code>distinct</code> is properly being used here.</p>\n\n<pre><code>Activity\n  .select('DISTINCT ON (stage_id) *')\n  .where(stage: stages)\n  .where('created_at &lt; ?', @start_time)\n  .reorder('id DESC')\n</code></pre>\n\n<p>Which spews out:</p>\n\n<pre><code>ActiveRecord::StatementInvalid (PG::InvalidColumnReference: ERROR:  SELECT DISTINCT ON expressions must match initial ORDER BY expressions\nLINE 1: SELECT DISTINCT ON (stage_id) * FROM \"activities\" WHERE \"act...\n                            ^\n: SELECT DISTINCT ON (stage_id) * FROM \"activities\" WHERE \"activities\".\"stage_id\" IN (11548, 11549, &lt;more ids snipped&gt;, 12432, 12433) AND (created_at &lt; '2017-01-31 08:00:00.000000')  ORDER BY id DESC):\n</code></pre>\n\n<p>What I mean to do here is to say: give me all activities that have a <code>stage_id</code> in an array of <code>stages</code>, where the <code>created_at</code> date is nearest to (without going over) a timestamp. What I want to get back is a single activity record for every stage in <code>stages</code>.</p>\n\n<p>Is it possible to do this in <code>1</code> query rather than <code>stages.count</code> queries?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "tdd", "bdd"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1486600416, "post_id": 42125263, "comment_id": 71420490, "body": "I&#39;d suggest checking out <a href=\"http://www.relishapp.com/rspec/rspec-core/v/3-5/docs\" rel=\"nofollow noreferrer\">relishapp.com/rspec/rspec-core/v/3-5/docs</a>.  Lots of easy-to-consume examples..."}], "answers": [{"comments": [{"owner": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "edited": false, "score": 0, "creation_date": 1486625978, "post_id": 42126088, "comment_id": 71428553, "body": "<code>rspec init</code> or <code>rspec --init</code>?"}, {"owner": {"reputation": 87, "user_id": 6476991, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/77uJL.jpg?s=128&g=1", "display_name": "MoscrowDev", "link": "https://stackoverflow.com/users/6476991/moscrowdev"}, "edited": false, "score": 0, "creation_date": 1486642840, "post_id": 42126088, "comment_id": 71439198, "body": "Wow, that was incredibly helpful, for real. Thanks a lot for the help. And if i download the source code from a page, so i dont need to make a HTTP request, I want to just read the file.html that i downloaded, how do I do that? put the file path in a variable?"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 3, "last_activity_date": 1486628065, "last_edit_date": 1486628065, "creation_date": 1486599591, "answer_id": 42126088, "question_id": 42125263, "link": "https://stackoverflow.com/questions/42125263/build-up-help-for-tdd-bdd-with-rspec/42126088#42126088", "title": "Build up help for TDD/BDD with RSpec", "body": "<p>there's an <code>rspec --init</code> command that will create your boilerplate.</p>\n\n<p>Once you've done this, open <code>spec_helper.rb</code> and require your code file.</p>\n\n<p>By the way, it's a little odd that your initialize accepts a url and assigns it to an instance variable, but the count method takes a url as an argument. </p>\n\n<p>So assuming it's refactored to this:</p>\n\n<pre><code>attr_reader :url\ndef initialize(url)\n  @url = url\nend\n\ndef count(word)\n  doc = Nokogiri::HTML(open(url)) # this uses the attr_reader\n  doc.css('head').remove\n  doc.text.scan(/#{word}/i).size\nend\n</code></pre>\n\n<p>Then you can write a test case like this (this is not a comprehensive coverage, just an example):</p>\n\n<pre><code>describe \"Counter\" do\n  let(:url) { \"http://some_url\" }\n  let(:counter) { Counter.new url }\n  it \"counts words\" do\n    expect(counter.count(\"foo\")).to(\n      eq(\"&lt;whatever the expected result is&gt;\")\n    )\n  end\nend\n</code></pre>\n\n<p>Using <code>let</code> to set variables is optional. You could also set the variables inside the <code>it ... do</code> block, but you'd have to repeat it for each case. </p>\n\n<p>In addition to <code>.to</code> you have <code>.not_to</code>, and there are many other helpful methods than <code>eq</code>. I recommend reading the RSpec matcher docs to familiarize yourself with these. </p>\n\n<p>It's also worth mentioning that this test case will make an HTTP call which is sometimes desired, and sometimes not. For example if you have many cases and want to run them quickly, then removing HTTP calls will be beneficial. But doing this means that you are no longer actually testing the state of the url. What if the markup changes? Unless your test case actually makes the HTTP call, you won't know for sure. </p>\n\n<p>Still, it's good to know how to remove the HTTP call since the underlying concept (\"mocking\" or \"stubbing\") has a lot of uses. Something like this:</p>\n\n<pre><code>  it \"counts words\" do\n    mock_html = &lt;&lt;-HTML\n      &lt;!doctype html&gt;\n      &lt;html lang='en'&gt;\n        &lt;head&gt;&lt;/head&gt;\n        &lt;body&gt;foo&lt;/body&gt;\n      &lt;/html&gt;\n    HTML\n    expect(Object).to(\n      receive(:open).with(any_args).at_least(1).times.and_return(mock_html)\n    )\n    expect(counter.count(\"foo\")).to eq(1)\n    expect(counter.count(\"bar\")).to eq(0)\n  end\n</code></pre>\n\n<p><code>any_args</code> is a special term you can use when stubbing methods. You could also use <code>url</code> here since you know what the passed argument is going to be. </p>\n\n<p>For more info, again I'll refer you to RSpec's docs, this time the ones about mocking / stubbing.</p>\n\n<p>Generally you want to focus mostly on input/output of functions. Sometimes you will want to check that another method is called (you'd use mock/stub for this) but it's probably not expected of you to test every single line of code. </p>\n"}], "owner": {"reputation": 87, "user_id": 6476991, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/77uJL.jpg?s=128&g=1", "display_name": "MoscrowDev", "link": "https://stackoverflow.com/users/6476991/moscrowdev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 1, "accepted_answer_id": 42126088, "answer_count": 1, "score": 2, "last_activity_date": 1486628065, "creation_date": 1486594799, "last_edit_date": 1486597209, "question_id": 42125263, "link": "https://stackoverflow.com/questions/42125263/build-up-help-for-tdd-bdd-with-rspec", "title": "Build up help for TDD/BDD with RSpec", "body": "<p>For about 2 weeks ago i've started learning Ruby, i've made an WebParser / Page WordCounter using 'open-uri' and 'nokogiri'. So i just run up the terminal with 'ruby counter.rb <a href=\"http://test.com\" rel=\"nofollow noreferrer\">http://test.com</a> word' and i and up with the number of matches of that word, case insensitive so i can grab everything.</p>\n\n<p>SO here I am learning about RSpec, TDD, BDD and all this stuff, and i would like to know how my code could be constructed using RSpec examples and expectations. Ive already read all the documentation, i'm building simples examples to test, etc.</p>\n\n<p>I would like to know if there is anyone that could build my code into RSpec examples and expectations, so I can study what you've done and how you've done.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>require 'open-uri'\nrequire 'nokogiri'\n\nclass Counter   \n\n    def initialize(url)\n      @url = url\n    end\n\n    def count(word, url)\n      doc = Nokogiri::HTML(open(url))\n      doc.css('head').remove\n      doc.text.scan(/#{word}/i).size\n    end\nend\n\nurl, word = ARGV\nputs \"Found: #{Counter.new(url).count(word, url)} matches.\"\n</code></pre>\n\n<p>Hope someone could help me, i'm really into ruby and found this RSpec amazing, </p>\n\n<p>Thanks guys, i'll be studying and waiting!</p>\n"}, {"tags": ["ruby", "selenium", "automation"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 1, "creation_date": 1486595019, "post_id": 42125019, "comment_id": 71418670, "body": "If you don&#39;t want to manually create the Screenshots directory, you could use <code>Dir::mkdir</code> to create it and then execute <code>.save_screenshot</code>."}, {"owner": {"reputation": 1538, "user_id": 1983338, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4af56af209894e4740c189078a50914c?s=128&d=identicon&r=PG", "display_name": "Cagy79", "link": "https://stackoverflow.com/users/1983338/cagy79"}, "edited": false, "score": 1, "creation_date": 1486595562, "post_id": 42125019, "comment_id": 71418877, "body": "Did you try to a double backslash? That is a \\ escaped with a \\ resulting in &#180;\\\\&#180;"}, {"owner": {"reputation": 41, "user_id": 7537157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b03209e8a842152348b5a92fe65009bc?s=128&d=identicon&r=PG&f=1", "display_name": "OrdinaryKing", "link": "https://stackoverflow.com/users/7537157/ordinaryking"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1486747330, "post_id": 42125019, "comment_id": 71495129, "body": "@orde do you have any example code for the Mkdir method? I can get the screenshots outputing to an already created folder, but cant make a folder create itself, then save the screenshot to that folder destination"}], "answers": [{"tags": [], "owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "is_accepted": true, "score": 0, "last_activity_date": 1487123679, "creation_date": 1487123679, "answer_id": 42239421, "question_id": 42125019, "link": "https://stackoverflow.com/questions/42125019/ruby-selenium-screenshot-to-specific-file-location/42239421#42239421", "title": "Ruby Selenium Screenshot to specific File location", "body": "<p>Here's a simple, contrived example that demonstrates how to create a directory before saving the screenshot using <a href=\"https://ruby-doc.org/core-2.4.0/Dir.html#method-c-mkdir\" rel=\"nofollow noreferrer\"><code>Dir::mkdir</code></a>:</p>\n\n<pre><code>Dir.mkdir \"C:\\\\screenshots\"\ndriver.save_screenshot \"C:\\\\screenshots\\\\Screenshot.png\"\n</code></pre>\n\n<p>As @Cagy79 points out, you have to escape the backslash with a double backslash.  </p>\n\n<p>Also, keep in mind that an error will be thrown if the directory exists, so you may want to check for it (e.g. <code>Dir.mkdir(\"C:\\\\screenshots\") unless Dir.exist?(\"C:\\\\screenshots\")</code>).  And take a look at the documentation.  There's a lot in the <code>Dir</code> class that can make your life easier.</p>\n"}], "owner": {"reputation": 41, "user_id": 7537157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b03209e8a842152348b5a92fe65009bc?s=128&d=identicon&r=PG&f=1", "display_name": "OrdinaryKing", "link": "https://stackoverflow.com/users/7537157/ordinaryking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 615, "favorite_count": 0, "accepted_answer_id": 42239421, "answer_count": 1, "score": 0, "last_activity_date": 1487123679, "creation_date": 1486593640, "question_id": 42125019, "link": "https://stackoverflow.com/questions/42125019/ruby-selenium-screenshot-to-specific-file-location", "title": "Ruby Selenium Screenshot to specific File location", "body": "<p>I'm having some trouble with taking a screenshot and saving it to a specific file location:</p>\n\n<p>I having <strong>working</strong> code which saves a screenshot to the original file location of my workspace: </p>\n\n<p><strong><em>driver.save_screenshot(\"screenshot.png\")</em></strong> </p>\n\n<p>I want to be able to save this screenshot in its own folder in my C://Username//RubyTutorial//Screenshots//Screenshot.png</p>\n\n<p>C://Username//RubyTutorials is an already existing directory, I would like the code to create a 'Screenshots' folder and then save the image in that folder.</p>\n\n<p>How am I able to do this?</p>\n\n<p>I have tried:\n<strong><em>driver.save_screenshot(\"C://Username//RubyTutorial//Screenshots//Screenshot.png\")</em></strong></p>\n\n<p>but I get errors of \"No such file or directory\"</p>\n\n<p>I have tried different attempts of switching the \"//\" to \"/\", \"\\\" and \"\\\"</p>\n\n<p>but still no luck.</p>\n\n<p>Thank you :)</p>\n"}, {"tags": ["ruby", "automation", "sftp"], "comments": [{"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1486623246, "post_id": 42124883, "comment_id": 71427183, "body": "What do you get if you print <code>file.name</code>?"}, {"owner": {"reputation": 83, "user_id": 3877296, "user_type": "registered", "profile_image": "https://graph.facebook.com/727130203/picture?type=large", "display_name": "Jason Nicholas", "link": "https://stackoverflow.com/users/3877296/jason-nicholas"}, "reply_to_user": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1486651264, "post_id": 42124883, "comment_id": 71445232, "body": "Using print file.name I get jumbled output but looks like it tried to assign chars to the octal code:        &#39;inistrators@BUILTIN   \u21a8domain users@POSTNTRACK  \u263a&#199;    X&#252;\u2193)    XE&#172;\u2569    X&#252;\u2193)    \u219320170106-2682954.999  \u263b\u255c\u263a      \u263aK   \u25acAdministrators@BUILTIN   \u21a8domain users@POSTNTRACK  \u263a&#199;    X~z&#247;    X~z&#247;    Xo\u221a=       &#39;M20170106-2382954_SUMMARY_5010.HTML  \u263b\u255c\u263a      0/   \u25acAdministrators@BUILTIN   \u21a8domain users@POSTNTRACK  \u263a&#199;    X~z\u2248    X~z\u2248    Xo\u221a&gt;       \u2193MVP270111-238912517.999  \u263b\u255c\u263a      \u263aQ   \u25acAdministrators@BUILTIN   \u21a8domain users@POSTNTRACK  \u263a&#199;    X~z&#247;    X~z&#247;Xv&#244;t&#39;20170111-238912517_SUMMARY_50.HTML&#39;"}, {"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1486651751, "post_id": 42124883, "comment_id": 71445600, "body": "What do you get when you connect using a standalone SFTP client, like WinSCP? - Show us its log."}, {"owner": {"reputation": 83, "user_id": 3877296, "user_type": "registered", "profile_image": "https://graph.facebook.com/727130203/picture?type=large", "display_name": "Jason Nicholas", "link": "https://stackoverflow.com/users/3877296/jason-nicholas"}, "reply_to_user": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1486654546, "post_id": 42124883, "comment_id": 71447732, "body": "Seems fine to login with WinSCP or FileZilla, filenames look good and I can interact fine. Though when I believed this to originally be a permissions issue and asked their support about it they did respond stating &#39;We have some clients who experienced issues when using WinSCP. &#39;              Log file is available <a href=\"https://file.io/ZmkfsJ\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1486654859, "post_id": 42124883, "comment_id": 71447961, "body": "I mean log file of WinSCP."}, {"owner": {"reputation": 83, "user_id": 3877296, "user_type": "registered", "profile_image": "https://graph.facebook.com/727130203/picture?type=large", "display_name": "Jason Nicholas", "link": "https://stackoverflow.com/users/3877296/jason-nicholas"}, "reply_to_user": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1486655316, "post_id": 42124883, "comment_id": 71448304, "body": "That is the session level logging from WinSCP of logging into the SFTP in question. Is there a different log you need?"}, {"owner": {"reputation": 83, "user_id": 3877296, "user_type": "registered", "profile_image": "https://graph.facebook.com/727130203/picture?type=large", "display_name": "Jason Nicholas", "link": "https://stackoverflow.com/users/3877296/jason-nicholas"}, "reply_to_user": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1486655541, "post_id": 42124883, "comment_id": 71448476, "body": "Sorry never used this quick share file upload, trying again <a href=\"https://file.io/W33QIz\" rel=\"nofollow noreferrer\">file.io/W33QIz</a>"}, {"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1486656074, "post_id": 42124883, "comment_id": 71448847, "body": "Do you have an access to server configuration? Can you try to configure the server to use SFTP version 3 at most (not the newer versions)?"}, {"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1486656108, "post_id": 42124883, "comment_id": 71448872, "body": "If not, try temporarily changing the <code>HIGHEST_PROTOCOL_VERSION_SUPPORTED</code> in <code>sftp&#47;session.rb</code> to 3."}, {"owner": {"reputation": 83, "user_id": 3877296, "user_type": "registered", "profile_image": "https://graph.facebook.com/727130203/picture?type=large", "display_name": "Jason Nicholas", "link": "https://stackoverflow.com/users/3877296/jason-nicholas"}, "reply_to_user": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1486657128, "post_id": 42124883, "comment_id": 71449553, "body": "Awesome, yes this did work! I received no unknown characters and I can clearly get the filename which allows me to download all files."}, {"owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1486657200, "post_id": 42124883, "comment_id": 71449596, "body": "What did work? The <code>HIGHEST_PROTOCOL_VERSION_SUPPORTED=3</code>?"}, {"owner": {"reputation": 83, "user_id": 3877296, "user_type": "registered", "profile_image": "https://graph.facebook.com/727130203/picture?type=large", "display_name": "Jason Nicholas", "link": "https://stackoverflow.com/users/3877296/jason-nicholas"}, "reply_to_user": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "edited": false, "score": 0, "creation_date": 1486657278, "post_id": 42124883, "comment_id": 71449659, "body": "Yes, I have no access to configure the server as it is 3rd party. Changing the HIGHEST_PROTOCOL.. version solved my issue. Is there any way to change this with this script only? I have a few other scripts that run with sftp and wasn&#39;t sure if this would affect them"}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 3877296, "user_type": "registered", "profile_image": "https://graph.facebook.com/727130203/picture?type=large", "display_name": "Jason Nicholas", "link": "https://stackoverflow.com/users/3877296/jason-nicholas"}, "edited": false, "score": 0, "creation_date": 1486658156, "post_id": 42141911, "comment_id": 71450263, "body": "Excellent, this has been driving me mad. I will test out my other scripts that use sftp/session.rb just to ensure, but I am confident with your breakdown. Thank you so much again!"}], "tags": [], "owner": {"reputation": 144837, "user_id": 850848, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c287735beca76400cb9b6d08bf591cb9?s=128&d=identicon&r=PG", "display_name": "Martin Prikryl", "link": "https://stackoverflow.com/users/850848/martin-prikryl"}, "is_accepted": true, "score": 1, "last_activity_date": 1486674164, "last_edit_date": 1486674164, "creation_date": 1486657641, "answer_id": 42141911, "question_id": 42124883, "link": "https://stackoverflow.com/questions/42124883/broken-filenames-with-ruby-when-connected-to-sftp-version-5/42141911#42141911", "title": "Broken filenames with Ruby when connected to SFTP version 5", "body": "<p>The server implements SFTP version 5. That's rather unusual. Most SFTP servers (OpenSSH in particular) support version 3 only. For that reason newer versions of the protocol are rarely used and it's not uncommon that their implementation is buggy (as not properly tested). What seems to be the case here. The Ruby implementation of the SFTP version 5 is probably wrong.</p>\n\n<p>You can force lower version of the protocol using <code>HIGHEST_PROTOCOL_VERSION_SUPPORTED=3</code> in <code>sftp/session.rb</code>. It does not seem that there's a way to change the version on a per-session basis. Though, it's unlikely that the change breaks your other sessions, as they most probably use the version 3 anyway.</p>\n"}], "owner": {"reputation": 83, "user_id": 3877296, "user_type": "registered", "profile_image": "https://graph.facebook.com/727130203/picture?type=large", "display_name": "Jason Nicholas", "link": "https://stackoverflow.com/users/3877296/jason-nicholas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 2, "accepted_answer_id": 42141911, "answer_count": 1, "score": 1, "last_activity_date": 1486674164, "creation_date": 1486593137, "last_edit_date": 1486657757, "question_id": 42124883, "link": "https://stackoverflow.com/questions/42124883/broken-filenames-with-ruby-when-connected-to-sftp-version-5", "title": "Broken filenames with Ruby when connected to SFTP version 5", "body": "<p>While building a new ruby automation script to handle files up and down from an sftp connection I am having trouble extracting filenames. \nUsing these same exact methods I have built automated sftp scripts that are actively being used and have not had much trouble, but I can not seem to output the available filenames of files in this sftp setup.</p>\n\n<p>I know the sftp connection is fine as I am able to upload files and can hardcode in path/filename to download files. \nMy problem seems to be specifically with reading the names of the files. </p>\n\n<p>Using typical methods, I can only seem to get output of what appears to be the file object or a mass of jumbled text which does include the filenames:</p>\n\n<pre><code>\"#&lt;Net::SFTP::Protocol::V04::Name:0x4f6d598 @name=nil, @attributes=#&lt;Net::SFTP::Protocol::V04::Attributes:0x4f6d5c8 @attributes={:type=&gt;1}&gt;&gt;\"\n</code></pre>\n\n<p>or (clip from the mass of jumbled(octal?) data that does contain filenames):</p>\n\n<pre><code>\"#&lt;Net::SFTP::Protocol::V04::Name:0x4f6d778@name=\"inistrators@BUILTIN\\000\\000\\000\\027domain users@POSTNTRACK\\000\\000\\001\\200\\000\\000\\000\\000X\\201\\031)\\000\\000\\000\\000XE\\252\\312\\000\\000\\000\\000X\\201\\031)\\000\\000\\000\\b\\000\\000\\000\\031MVP20170106-238682954.999\\000\\000\\002\\275\\001\\000\\000\\000\\000\\000\\000\\001K\\000\\000\\000\\026Administrators@BUILTIN\\000\\000\\000\\027domain users@POSTNTRACK\\000\\000\\001\\200\\000\\000\\000\\000X~z\\366\\000\\000\\000\\000X~z\\366\\000\\000\\000\\000Xo\\373=\\000\\000\\000\\000\\000\\000\\000'MVP20170106-238682954.HTML\\000\\000\\002\\275\\001\\000....\"\n</code></pre>\n\n<p>This output is from the code(simplified):</p>\n\n<pre><code>require 'net/sftp'\nrequire 'net/ssh'\nNet::SSH.start(@site,@user,:password =&gt;@pass) do |session|\nsession.sftp.connect do |sftp|\nsftp.dir.foreach('/Download') do |file|\nnext if (file.name == '..' || file.name == '.')\nnext if !file.file?\np file\n</code></pre>\n\n<p>This should be simple but I have been working on this problem for weeks; <strong>please help provide info, point out where I am going wrong, or could this be an issue on the SFTP side?</strong> Have tried with and without SSH session included</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1486591280, "post_id": 42124400, "comment_id": 71416971, "body": "Doesn&#39;t <code>JSON.parse</code> expect JSON, not a JSON fragment?"}, {"owner": {"reputation": 361, "user_id": 2761764, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/33bcd2875465c2771568bf0e2435ab37?s=128&d=identicon&r=PG&f=1", "display_name": "markain", "link": "https://stackoverflow.com/users/2761764/markain"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1486592005, "post_id": 42124400, "comment_id": 71417329, "body": "I think you&#39;re right. I assumed incorrectly they did similar things."}, {"owner": {"reputation": 1420, "user_id": 5045091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MAqXn.jpg?s=128&g=1", "display_name": "theterminalguy", "link": "https://stackoverflow.com/users/5045091/theterminalguy"}, "edited": false, "score": 0, "creation_date": 1486592256, "post_id": 42124400, "comment_id": 71417435, "body": "This works find on my end. You may want to update your <code>json</code> gem and try it out in <code>pry or irb</code>. I have tried out your string it passed correctly. I am using ruby 2.3.1"}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1486592378, "post_id": 42124400, "comment_id": 71417496, "body": "<code>JSON.parse(string)</code> and <code>JSON.load(string)</code>  both work for me"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 2724945, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49bb80529d347663f9038a78df831f53?s=128&d=identicon&r=PG", "display_name": "Ga&#235;tan DUAHMEL", "link": "https://stackoverflow.com/users/2724945/ga%c3%abtan-duahmel"}, "is_accepted": false, "score": 2, "last_activity_date": 1486592314, "last_edit_date": 1495540408, "creation_date": 1486592314, "answer_id": 42124695, "question_id": 42124400, "link": "https://stackoverflow.com/questions/42124400/json-parse-in-ruby-failing/42124695#42124695", "title": "JSON parse in ruby failing", "body": "<p>I encounter the same issue with JSON.parse for a string nested in a JSON string. My solution was to escape <code>JSON::ParserError</code> with YAML.</p>\n\n<pre><code>YAML.load(\"\\\"AACAY, AAOI, AAON, AATI, ABAX,ZYXI\\\"\")\n=&gt; \"AACAY, AAOI, AAON, AATI, ABAX,ZYXI\"\n</code></pre>\n\n<p>Beware of gotchas though. See <a href=\"https://stackoverflow.com/questions/24608600/is-it-safe-to-parse-json-with-yaml-load\">this SO thread</a></p>\n"}, {"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1486593746, "creation_date": 1486593746, "answer_id": 42125041, "question_id": 42124400, "link": "https://stackoverflow.com/questions/42124400/json-parse-in-ruby-failing/42125041#42125041", "title": "JSON parse in ruby failing", "body": "<p>Its a bug in the JSON parser that is fixed as of v2.0 of the <a href=\"https://rubygems.org/gems/json\" rel=\"nofollow noreferrer\">json gem</a>.</p>\n\n<pre><code># json_parser_test.rb\nrequire 'json'\nputs JSON.parse(\"\\\"AACAY, AAOI, AAON, AATI, ABAX,ZYXI\\\"\")\n</code></pre>\n\n<hr>\n\n<pre><code>maxcal@MaxBook ~/p/s/tmp&gt; gem list json\n\n*** LOCAL GEMS ***\n\njson (1.8.3)\njson-schema (2.7.0)\njsonapi (0.1.1.beta6)\njsonapi-parser (0.1.1.beta3)\njsonapi-renderer (0.1.1.beta1)\nmulti_json (1.12.1, 1.11.2)\nmaxcal@MaxBook ~/p/s/tmp&gt; ruby json_parser_test.rb \n/Users/maxcal/.rbenv/versions/2.3.1/lib/ruby/2.3.0/json/common.rb:156:in `parse': 784: unexpected token at '\"AACAY, AAOI, AAON, AATI, ABAX,ZYXI\"' (JSON::ParserError)\n    from /Users/maxcal/.rbenv/versions/2.3.1/lib/ruby/2.3.0/json/common.rb:156:in `parse'\n    from json_parser_test.rb:2:in `&lt;main&gt;'\n</code></pre>\n\n<p>Upgrading the JSON gem makes the parser error disappear:</p>\n\n<pre><code>maxcal@MaxBook ~/p/s/tmp&gt; gem install json -v 2.0\nFetching: json-2.0.0.gem (100%)\nBuilding native extensions.  This could take a while...\nSuccessfully installed json-2.0.0\nBuilding YARD (yri) index for json-2.0.0...\nDone installing documentation for json after 2 seconds\n1 gem installed\nmaxcal@MaxBook ~/p/s/tmp&gt; ruby json_parser_test.rb \nAACAY, AAOI, AAON, AATI, ABAX,ZYXI\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 3133204, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ea27716e1218a15456cc7ae4299fe364?s=128&d=identicon&r=PG&f=1", "display_name": "user3133204", "link": "https://stackoverflow.com/users/3133204/user3133204"}, "is_accepted": false, "score": 0, "last_activity_date": 1486622850, "creation_date": 1486622850, "answer_id": 42130023, "question_id": 42124400, "link": "https://stackoverflow.com/questions/42124400/json-parse-in-ruby-failing/42130023#42130023", "title": "JSON parse in ruby failing", "body": "<p>JSON.parse() does not work with all string formats.\nString needs to have following format.\n\"{\\\"AACAY\\\":\\\"AAOI\\\", \\\"AAON\\\":\\\"AATI\\\", \\\"ABAX\\\":\\\"ZYXI\\\"}\"\nwhich contains stringified object.</p>\n"}], "owner": {"reputation": 361, "user_id": 2761764, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/33bcd2875465c2771568bf0e2435ab37?s=128&d=identicon&r=PG&f=1", "display_name": "markain", "link": "https://stackoverflow.com/users/2761764/markain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1510, "favorite_count": 0, "accepted_answer_id": 42125041, "answer_count": 3, "score": 0, "last_activity_date": 1486622850, "creation_date": 1486590956, "question_id": 42124400, "link": "https://stackoverflow.com/questions/42124400/json-parse-in-ruby-failing", "title": "JSON parse in ruby failing", "body": "<p>In my rails database I have an object with a text field that is valid json:</p>\n\n<pre><code>\"\\\"AACAY, AAOI, AAON, AATI, ABAX,ZYXI\\\"\"\n</code></pre>\n\n<p>If I call JSON.parse on the field in ruby it errors with this:</p>\n\n<pre><code>JSON::ParserError: 784: unexpected token at '\"AACAY, AAOI, AAON, AATI, ABAX,ZYXI\"'\n</code></pre>\n\n<p>However, if I call JSON.parse on the same string in the browser it works.</p>\n\n<p>Why is the ruby call failing?</p>\n"}, {"tags": ["ruby", "rubygems", "rbenv"], "comments": [{"owner": {"reputation": 1629, "user_id": 333548, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f0c82d5179b2b107bbe7e20057877eac?s=128&d=identicon&r=PG", "display_name": "Stray", "link": "https://stackoverflow.com/users/333548/stray"}, "edited": false, "score": 0, "creation_date": 1486599348, "post_id": 42123979, "comment_id": 71420197, "body": "The answer was here: <a href=\"http://rubygems.rubyforge.org/rubygems-update/UPGRADING_rdoc.html\" rel=\"nofollow noreferrer\">rubygems.rubyforge.org/rubygems-update/UPGRADING_rdoc.html</a>  <code>gem update --system 1.3.6</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1629, "user_id": 333548, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f0c82d5179b2b107bbe7e20057877eac?s=128&d=identicon&r=PG", "display_name": "Stray", "link": "https://stackoverflow.com/users/333548/stray"}, "edited": false, "score": 0, "creation_date": 1486597716, "post_id": 42124412, "comment_id": 71419613, "body": "Thanks - I think that&#39;s the same as I&#39;ve already tried? If I type only what you&#39;ve put, I get   <code>Please specify at least one gem name (e.g. gem build GEMNAME)</code>  But although <code>gem install -v 1.3.6 rubygems-update</code> does execute (apparently) the install of 1.3.6, it&#39;s still using 2.6.0 when I do <code>gem ... </code>"}], "tags": [], "owner": {"reputation": 2009, "user_id": 20769, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/922e7e3c612566756735b2def78827d8?s=128&d=identicon&r=PG", "display_name": "Joshua", "link": "https://stackoverflow.com/users/20769/joshua"}, "is_accepted": false, "score": 0, "last_activity_date": 1486591010, "creation_date": 1486591010, "answer_id": 42124412, "question_id": 42123979, "link": "https://stackoverflow.com/questions/42123979/how-do-i-force-rbenv-ruby-version-to-use-a-specific-rubygems-version/42124412#42124412", "title": "How do I force rbenv ruby version to use a specific rubygems version?", "body": "<p>I believe the command to update rubygems is the following</p>\n\n<pre><code>gem install -v 1.3.6 \n</code></pre>\n\n<p>This will do it for all 1.8.7 rubies. If you want to do it for specify directories you'll need to <a href=\"https://gist.github.com/MicahElliott/2407918#enable-rvm-style-gemsets-optional\" rel=\"nofollow noreferrer\">install the rbenv gemset plugin</a>. </p>\n"}, {"tags": [], "owner": {"reputation": 1629, "user_id": 333548, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f0c82d5179b2b107bbe7e20057877eac?s=128&d=identicon&r=PG", "display_name": "Stray", "link": "https://stackoverflow.com/users/333548/stray"}, "is_accepted": false, "score": 0, "last_activity_date": 1486599316, "creation_date": 1486599316, "answer_id": 42126035, "question_id": 42123979, "link": "https://stackoverflow.com/questions/42123979/how-do-i-force-rbenv-ruby-version-to-use-a-specific-rubygems-version/42126035#42126035", "title": "How do I force rbenv ruby version to use a specific rubygems version?", "body": "<p>Found the solution - via <a href=\"http://rubygems.rubyforge.org/rubygems-update/UPGRADING_rdoc.html\" rel=\"nofollow noreferrer\">http://rubygems.rubyforge.org/rubygems-update/UPGRADING_rdoc.html</a></p>\n\n<p><code>gem update --system 1.3.6</code></p>\n\n<p>Has rolled it back to the right version. Phew!</p>\n"}], "owner": {"reputation": 1629, "user_id": 333548, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f0c82d5179b2b107bbe7e20057877eac?s=128&d=identicon&r=PG", "display_name": "Stray", "link": "https://stackoverflow.com/users/333548/stray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 574, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1486599316, "creation_date": 1486589405, "question_id": 42123979, "link": "https://stackoverflow.com/questions/42123979/how-do-i-force-rbenv-ruby-version-to-use-a-specific-rubygems-version", "title": "How do I force rbenv ruby version to use a specific rubygems version?", "body": "<p>I have a legacy project which requires ruby 1.8.7.</p>\n\n<p>I've just moved from Mac OS 10.8 to 10.12, so I've installed rbenv to allow me to run ruby 1.8.7.</p>\n\n<p>However, the gems I need require a file - gem_original_require.rb - which isn't present in rubygems 2.6.x.</p>\n\n<p>My old 1.8.7 set up uses rubygems 1.3.6, so I would like to use this version of gems in this project.</p>\n\n<p>Under 1.8.7, I've tried <code>gem install -v 1.3.6 rubygems-update</code> and <code>rbenv rehash</code> and I've restarted the terminal, </p>\n\n<p>but <code>gem  --version</code> still outputs:</p>\n\n<p><code>&gt; 2.6.10</code></p>\n\n<p>Can I set up rbenv such that each (project specific) ruby uses a specific version of rubygems?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "yaml", "amazon-sqs", "shoryuken"], "answers": [{"tags": [], "owner": {"reputation": 6119, "user_id": 165753, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/w6iBN.jpg?s=128&g=1", "display_name": "dimid", "link": "https://stackoverflow.com/users/165753/dimid"}, "is_accepted": false, "score": 2, "last_activity_date": 1486590175, "creation_date": 1486590175, "answer_id": 42124200, "question_id": 42123963, "link": "https://stackoverflow.com/questions/42123963/environment-specific-shoryuken-configuration/42124200#42124200", "title": "Environment specific shoryuken configuration", "body": "<p>One possible workaround is using</p>\n\n<pre><code>concurrency: 25\ndelay: 0\nqueues:\n- [&lt;%=ENV['RAILS_ENV']%&gt;_high,  30]\n- [&lt;%=ENV['RAILS_ENV']%&gt;_mid,     6]\n- [&lt;%=ENV['RAILS_ENV']%&gt;_low,     2]\n</code></pre>\n\n<p>and start shoryuken with</p>\n\n<pre><code>RAILS_ENV=development bundle exec shoryuken -R -C config/shoryuken.yml\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5872, "user_id": 464685, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/1e9ce2c15d24684d45ae475c5d9fc4d4?s=128&d=identicon&r=PG", "display_name": "Pablo Cantero", "link": "https://stackoverflow.com/users/464685/pablo-cantero"}, "is_accepted": true, "score": 1, "last_activity_date": 1488225818, "creation_date": 1488225818, "answer_id": 42494741, "question_id": 42123963, "link": "https://stackoverflow.com/questions/42123963/environment-specific-shoryuken-configuration/42494741#42494741", "title": "Environment specific shoryuken configuration", "body": "<p>I usually use a specific config <code>shoryuken.dev.yml</code> in development.</p>\n\n<p>For the queues in development, I strongly recommend to create a user (<a href=\"https://aws.amazon.com/iam/\" rel=\"nofollow noreferrer\">IAM</a>) per developer, with <a href=\"https://github.com/phstc/shoryuken/wiki/Amazon-SQS-IAM-Policy-for-Shoryuken\" rel=\"nofollow noreferrer\">the needed permissions</a> for the resource <code>\"arn:aws:sqs:::${aws:username}-*\"</code>, then in the config <code>- [&lt;%= aws_user_name %&gt;_queue_name, 1]</code>.</p>\n\n<p>If you are using ActiveJob, have a look at the <a href=\"http://edgeapi.rubyonrails.org/classes/ActiveJob/QueueAdapters/InlineAdapter.html\" rel=\"nofollow noreferrer\"><code>inline</code></a> option. Might be an alternative.</p>\n\n<p>Last but not least, you can also add queues at runtime, check <a href=\"https://github.com/phstc/shoryuken/issues/282#issuecomment-282599455\" rel=\"nofollow noreferrer\">this</a>.</p>\n"}], "owner": {"reputation": 6119, "user_id": 165753, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/w6iBN.jpg?s=128&g=1", "display_name": "dimid", "link": "https://stackoverflow.com/users/165753/dimid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 942, "favorite_count": 0, "accepted_answer_id": 42494741, "answer_count": 2, "score": 1, "last_activity_date": 1524087738, "creation_date": 1486589351, "last_edit_date": 1486590697, "question_id": 42123963, "link": "https://stackoverflow.com/questions/42123963/environment-specific-shoryuken-configuration", "title": "Environment specific shoryuken configuration", "body": "<p>I'm using the <a href=\"https://github.com/phstc/shoryuken\" rel=\"nofollow noreferrer\">shoryuken gem</a> by running</p>\n\n<pre><code>bundle exec shoryuken -R -C config/shoryuken.yml\n</code></pre>\n\n<p>and shoryuken.yml is</p>\n\n<pre><code>concurrency: 25\ndelay: 0\nqueues:\n- [development_high,  30]\n- [development_mid,   6]\n- [development_low,   2]\n</code></pre>\n\n<p>This works fine. However, I'd like to use the environment specific queues, e.g. use <code>production_high</code> in production. \nI make sure these queues exist in </p>\n\n<p><code>config/initializers/aws.rb</code> using</p>\n\n<pre><code>%w(low mid high).each do |q|\n  sqs.create_queue(queue_name: Rails.env + '_' + q)\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "dry"], "comments": [{"owner": {"reputation": 518, "user_id": 4044403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/656f9bcecd67c3d35bcf5d2ee7bbd15f?s=128&d=identicon&r=PG&f=1", "display_name": "Jose Castellanos", "link": "https://stackoverflow.com/users/4044403/jose-castellanos"}, "edited": false, "score": 0, "creation_date": 1486591599, "post_id": 42123769, "comment_id": 71417124, "body": "A method using anything like &quot;find&quot; related will be doing a query however what is your end goal? To prefill the form with the fields for those translations? If so you can do that with <code>accepts_nested_attributes_for :translations</code> and building the <code>@question.translations</code> only in the &quot;new&quot; action in your controller. Let me know if that was what you are asking and I will elaborate it an answer"}, {"owner": {"reputation": 331, "user_id": 7020299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6lN5r.jpg?s=128&g=1", "display_name": "Misu", "link": "https://stackoverflow.com/users/7020299/misu"}, "reply_to_user": {"reputation": 518, "user_id": 4044403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/656f9bcecd67c3d35bcf5d2ee7bbd15f?s=128&d=identicon&r=PG&f=1", "display_name": "Jose Castellanos", "link": "https://stackoverflow.com/users/4044403/jose-castellanos"}, "edited": false, "score": 0, "creation_date": 1486622873, "post_id": 42123769, "comment_id": 71427007, "body": "@JoseCastellanos imagine a <code>form_for @question</code> that has some own fields (title, default_language...), and then <code>fields_for :translations</code> (with all it needs: <code>accepts_nested_attributes_for</code>, params whitelisted...). The translations fields consist of a <code>hidden_field</code> for <code>language</code> identified by a flag and a <code>text_field</code> for <code>value</code>. The goal is that <b>the user sees all possible languages</b> (once) even if there is no trasnlation for that language (and I reject <code>:translation</code> if value is blank). Is that well explained?"}], "owner": {"reputation": 331, "user_id": 7020299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6lN5r.jpg?s=128&g=1", "display_name": "Misu", "link": "https://stackoverflow.com/users/7020299/misu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1486588598, "creation_date": 1486588598, "question_id": 42123769, "link": "https://stackoverflow.com/questions/42123769/rails-find-or-initialize-by-without-db-query", "title": "Rails find_or_initialize_by without db query", "body": "<p>Is there any rails method that does the same as <code>find_or_initialize_by</code>, but <strong>without a database query</strong>?</p>\n\n<p>The problem is:</p>\n\n<p><strong>1.) It can lead to something like an \"n+1\" query.</strong></p>\n\n<p>For example I have a <code>Question</code> model that <code>has_many :translations</code> connecting it to the <code>Translation</code> model which has the attributes (columns) <code>language</code> and <code>value</code>. When editing a question I have a nested form for <code>:translations</code>, but first I need to build the missing languages in the controller. If I do</p>\n\n<pre><code>%w(en hu fr de it).each do |lng|\n  @question.translations.find_or_initialize_by(language: lng)\nend\n</code></pre>\n\n<p>it will run a query for every five languages, even if I have eager loaded <code>:translations</code>.</p>\n\n<p><strong>2.) It doesn't find non-persisted elements</strong> (exactly because of querying in the database).</p>\n\n<p>So if in the previous form someone fills only 'en' translation of <code>@question</code>, submits the form, but some validation fails, the form gets re-rendered with error messages, there are two possibilities: either I do <em>not</em> run the <code>find_or_initialize_by</code> for each languages (in this case <strong><em>only</em></strong> the 'en' field will be displayed), or I <em>run</em> it (and 'en' field will be <strong><em>duplicated</em></strong> - the first will contain the submitted but not persisted <code>value</code>, the second will be empty)</p>\n\n<p>What I use is the following (inside <code>each</code>'s block):</p>\n\n<pre><code>@question.translations.select{ |t| t.language == lng }.first ||\n    @question.translations.build(language: lng)\n</code></pre>\n\n<p>which works just fine but I think it is not DRY enough (as it duplicates <code>@question.translations</code>, <code>language</code> and <code>lng</code>), and I really hope there is some <strong>\"rails way\"</strong> to do this.</p>\n\n<p>Any ideas will be appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 1420, "user_id": 5045091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MAqXn.jpg?s=128&g=1", "display_name": "theterminalguy", "link": "https://stackoverflow.com/users/5045091/theterminalguy"}, "is_accepted": false, "score": 0, "last_activity_date": 1486592997, "creation_date": 1486592997, "answer_id": 42124856, "question_id": 42123603, "link": "https://stackoverflow.com/questions/42123603/ruby-on-rails-overlapping-routes/42124856#42124856", "title": "Ruby On Rails Overlapping Routes", "body": "<p>There are several patterns for solving this kind of problems in rails. One of which is slug constraint. Use this resources they help with the concept of using slugs and refactoring large rails routes </p>\n\n<ol>\n<li><a href=\"http://blog.arkency.com/2014/01/short-urls-for-every-route-in-your-rails-app/\" rel=\"nofollow noreferrer\">http://blog.arkency.com/2014/01/short-urls-for-every-route-in-your-rails-app/</a></li>\n<li><a href=\"http://code-worrier.com/blog/custom-slugs-in-rails/\" rel=\"nofollow noreferrer\">http://code-worrier.com/blog/custom-slugs-in-rails/</a></li>\n<li><a href=\"https://stackoverflow.com/questions/19781163/refactoring-a-large-routes-rb-file-in-rails-4\">Refactoring a large routes.rb file in rails 4</a></li>\n</ol>\n"}], "owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486592997, "creation_date": 1486588012, "question_id": 42123603, "link": "https://stackoverflow.com/questions/42123603/ruby-on-rails-overlapping-routes", "title": "Ruby On Rails Overlapping Routes", "body": "<p>I'm rebuilding/redesigning a site in Rails that's currently in production using Magento. To ensure that I don't lower my seo rankings I am keeping my URI's the same. I am facing an optimization issue with this because the current site doesn't have subdirectories. With that said, the products are under the root directory of the site, the reviews are under the root directory of the site, and all the other content pages are under the root directory of the site. \nfor example a product might be at </p>\n\n<pre><code>www.example.com/some-product-name\n</code></pre>\n\n<p>and a review could be at </p>\n\n<pre><code>www.example.com/some-review-name\n</code></pre>\n\n<p>rails obviously uses routes and my first guess was to make a route that looks like this:</p>\n\n<pre><code>get '/:uri_identifier', to: 'pages#find_page'\n</code></pre>\n\n<p>This works fine, but with 50k products to query through and 5k reviews along with another 200 different content pages, this creates an optimization issue since this controller method becomes a catch all to figure out which page it should render based on </p>\n\n<pre><code>params[:uri_identifier]\n</code></pre>\n\n<p>The uri's don't have any kind of form either so filtering them with an if statement to avoid large amounts of queries isn't really feasible. My idea was to create routes specific for the reviews and add them in routes.erb above the route</p>\n\n<pre><code>get '/:uri_identifier', to: 'pages#find_page'    \n</code></pre>\n\n<p>but I'm still going to have to create close to 5k routes to pull this off. I did try this and it worked, but I'm not real sure what is the best way to approach this issue to ensure that I use the least amount of resources. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "github", "rubygems"], "comments": [{"owner": {"reputation": 3811, "user_id": 793330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432566b982c73ead26d886951ca7a05c?s=128&d=identicon&r=PG", "display_name": "engineerDave", "link": "https://stackoverflow.com/users/793330/engineerdave"}, "edited": false, "score": 0, "creation_date": 1486588111, "post_id": 42123240, "comment_id": 71415351, "body": "Are you running the app with bundler exec, i.e. bundle exec rails s"}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "reply_to_user": {"reputation": 3811, "user_id": 793330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432566b982c73ead26d886951ca7a05c?s=128&d=identicon&r=PG", "display_name": "engineerDave", "link": "https://stackoverflow.com/users/793330/engineerdave"}, "edited": false, "score": 0, "creation_date": 1486588305, "post_id": 42123240, "comment_id": 71415453, "body": "<code>bundle exec omp.rb</code> -&gt; <code>bundler: command not found: omp.rb</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1486594465, "post_id": 42125118, "comment_id": 71418406, "body": "That solution was suggested in the comments... didn&#39;t work:  <code>bundle exec omp.rb -&gt; bundler: command not found: omp.rb</code>"}, {"owner": {"reputation": 4538, "user_id": 809830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdd9801d2717096282258b192edc7793?s=128&d=identicon&r=PG", "display_name": "Alex Kojin", "link": "https://stackoverflow.com/users/809830/alex-kojin"}, "reply_to_user": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1486594546, "post_id": 42125118, "comment_id": 71418450, "body": "You miss <code>ruby</code> command before <code>omp.rb</code>. The answer is updated with another solution."}], "tags": [], "owner": {"reputation": 4538, "user_id": 809830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdd9801d2717096282258b192edc7793?s=128&d=identicon&r=PG", "display_name": "Alex Kojin", "link": "https://stackoverflow.com/users/809830/alex-kojin"}, "is_accepted": true, "score": 1, "last_activity_date": 1486594489, "last_edit_date": 1486594489, "creation_date": 1486594087, "answer_id": 42125118, "question_id": 42123240, "link": "https://stackoverflow.com/questions/42123240/require-forked-gem-in-bundle/42125118#42125118", "title": "Require forked gem in bundle", "body": "<p>You can run you code with <code>bundle exec ruby omp.rb</code></p>\n\n<p>Or you can define bundler in the top of your code:</p>\n\n<pre><code># activate bundler\nrequire 'bundler/setup'\n# require all gems\nBundler.require\n</code></pre>\n\n<p>and run it <code>ruby omp.rb</code></p>\n"}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 42125118, "answer_count": 1, "score": 1, "last_activity_date": 1486594489, "creation_date": 1486586691, "question_id": 42123240, "link": "https://stackoverflow.com/questions/42123240/require-forked-gem-in-bundle", "title": "Require forked gem in bundle", "body": "<p>I had to fork a gem from github and make some code changes to suit my needs.  I then put it in my own <a href=\"https://github.com/godzilla74/openvas-omp-ruby\" rel=\"nofollow noreferrer\">github repo</a> using <a href=\"http://www.cerebris.com/blog/2011/03/15/creating-and-managing-private-rubygems-with-jeweler-github-and-bundler/\" rel=\"nofollow noreferrer\">this resource</a>.</p>\n\n<p>Now, for my app, I've added the gem to my <code>Gemfile</code>:</p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'openvas-omp', :git =&gt; 'git://github.com/godzilla74/openvas-omp-ruby.git'\n</code></pre>\n\n<p>Ran <code>bundle install</code> and now I'm trying to run my app but it's throwing an error saying that it can't load my gem: </p>\n\n<pre><code>/Users/godzilla74/.rbenv/versions/2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- openvas-omp-ruby (LoadError)\n    from /Users/godzilla74/.rbenv/versions/2.3.0/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from omp.rb:7:in `&lt;main&gt;'\n</code></pre>\n\n<p>My app is pretty simple so far.  It's just one file <code>omp.rb</code>:</p>\n\n<pre><code>...some other requires....\nrequire 'openvas-omp'\n\nov = OpenVASOMP::OpenVASOMP.new(\"host\" =&gt; \"10.10.10.200\", \"port\" =&gt; \"9390\", \"user\" =&gt; 'admin', \"password\" =&gt; 'admin')\nputs ov\n</code></pre>\n\n<p>Here is my current tree of the <code>omp</code> app folder:</p>\n\n<pre><code>.\n\u251c\u2500\u2500 Gemfile\n\u251c\u2500\u2500 Gemfile.lock\n\u251c\u2500\u2500 omp.rb\n</code></pre>\n\n<p>Have I gone about implementing the gem incorrectly?  From what I understand, I can't simply run the command <code>gem install openvas-omp</code> because that will pick up on the original github repo which I forked.</p>\n"}, {"tags": ["ruby", "rabbitmq", "bunny", "sneakers"], "answers": [{"tags": [], "owner": {"reputation": 3548, "user_id": 2318810, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34138f17ed66a94d22d50402d3ee71d2?s=128&d=identicon&r=PG", "display_name": "Lauri", "link": "https://stackoverflow.com/users/2318810/lauri"}, "is_accepted": false, "score": 0, "last_activity_date": 1509371135, "creation_date": 1509371135, "answer_id": 47016829, "question_id": 42123190, "link": "https://stackoverflow.com/questions/42123190/rabbitmq-keeps-stacking-unacked-messages-although-they-are-rejected-or-acknowled/47016829#47016829", "title": "RabbitMQ keeps stacking unacked messages although they are rejected or acknowledged", "body": "<p>Slightly late answer but faced this issue and the solution is alway return either <code>ack!</code> or <code>reject!</code>.</p>\n\n<p>So change this:</p>\n\n<pre><code>reject!\nreturn\n</code></pre>\n\n<p>to</p>\n\n<pre><code>return reject!\n</code></pre>\n"}], "owner": {"reputation": 8143, "user_id": 537943, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/910d6caf7e77a69b61fbf0b4e0d32532?s=128&d=identicon&r=PG", "display_name": "Tom", "link": "https://stackoverflow.com/users/537943/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 238, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1509371135, "creation_date": 1486586486, "last_edit_date": 1486586973, "question_id": 42123190, "link": "https://stackoverflow.com/questions/42123190/rabbitmq-keeps-stacking-unacked-messages-although-they-are-rejected-or-acknowled", "title": "RabbitMQ keeps stacking unacked messages although they are rejected or acknowledged", "body": "<p>My Ruby code below processes RabbitMQ events. I'm using Bunny for Ruby and the <a href=\"https://github.com/jondot/sneakers\" rel=\"nofollow noreferrer\">sneakers gem</a>. Although I think I'm acting on all possible events, the local channels are getting stacked with unacked messages. This happens every time the log says something like:</p>\n\n<pre><code>sneakers_1          | I, [2017-02-08T19:03:31.088857 #14]  INFO -- : Rejecting 172.21.0.21. Name invalid tld\n</code></pre>\n\n<p>This is my Ruby code:</p>\n\n<pre><code>require 'sneakers'\n\nclass EventProcessor\n  include Sneakers::Worker\n  from_queue :edge_requests\n\n\n  def work(msg)\n    msg = JSON.parse(msg)\n    domain = msg[':path'].split('/').first\n    domain = domain.downcase.sub(/^www\\./, '')\n    domain = Domain.find_or_initialize_by(name: domain) {|domain| domain.status = :active}\n    unless domain.valid?\n      Rails.logger.info \"Rejecting #{domain.name}. #{domain.errors.full_messages.join(',')}\"\n      reject!\n      return\n    end\n    domain.persisted? ? domain.touch : domain.save!\n    ack!\n  rescue\n    Rails.logger.error $!\n    reject!\n  end\nend\n</code></pre>\n\n<p>Something is wrong with my <code>reject!</code> probably? kind of stuck for hours. I tried to change all the <code>reject!</code> with <code>ack!</code> but nothing seems to help.</p>\n\n<p>Maybe I'm using <code>rescue</code> the wrong way?</p>\n"}, {"tags": ["ruby", "hash", "syntax", "splat"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1486588494, "post_id": 42123150, "comment_id": 71415559, "body": "I am pretty sure no one can explain this better than @J&#246;rgWMittag did on <a href=\"http://stackoverflow.com/a/17173107/1978251\">This SO Post</a>. BTW you could not define options in the signature and instead use something like <code>options = nums.last.is_a?(Hash) ? nums.pop : {}</code> in the body of your method."}, {"owner": {"reputation": 473, "user_id": 5163373, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3dVWt.png?s=128&g=1", "display_name": "jStaff", "link": "https://stackoverflow.com/users/5163373/jstaff"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1486675582, "post_id": 42123150, "comment_id": 71460725, "body": "That post solves this one. I cannot delete this post because it is flagged by a moderator."}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1486588579, "post_id": 42123394, "comment_id": 71415614, "body": "Not necessarily true <a href=\"http://stackoverflow.com/questions/17173034/optional-argument-after-splat-argument/17173107#17173107\">Read here</a>"}, {"owner": {"reputation": 473, "user_id": 5163373, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3dVWt.png?s=128&g=1", "display_name": "jStaff", "link": "https://stackoverflow.com/users/5163373/jstaff"}, "edited": false, "score": 0, "creation_date": 1486590118, "post_id": 42123394, "comment_id": 71416398, "body": "I found that 1.8 and 1.9+ have differences for this standard. Hmm..."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 473, "user_id": 5163373, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3dVWt.png?s=128&g=1", "display_name": "jStaff", "link": "https://stackoverflow.com/users/5163373/jstaff"}, "edited": false, "score": 1, "creation_date": 1486602032, "post_id": 42123394, "comment_id": 71420911, "body": "@jStaff: Yes. 1.9 relaxed some rules. 2.0 added optional keyword parameters. 2.1 added mandatory keyword parameters."}], "tags": [], "owner": {"reputation": 5130, "user_id": 1443478, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4J9cr.jpg?s=128&g=1", "display_name": "Brennan", "link": "https://stackoverflow.com/users/1443478/brennan"}, "is_accepted": true, "score": 1, "last_activity_date": 1486587244, "creation_date": 1486587244, "answer_id": 42123394, "question_id": 42123150, "link": "https://stackoverflow.com/questions/42123150/syntax-error-initialization-with-splat-operator-and-empty-hash/42123394#42123394", "title": "Syntax error: initialization with splat operator and empty hash", "body": "<p>A splat argument must be the last argument of your method.</p>\n"}], "owner": {"reputation": 473, "user_id": 5163373, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/3dVWt.png?s=128&g=1", "display_name": "jStaff", "link": "https://stackoverflow.com/users/5163373/jstaff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "closed_date": 1486602065, "accepted_answer_id": 42123394, "answer_count": 1, "score": -1, "last_activity_date": 1486587244, "creation_date": 1486586350, "last_edit_date": 1592644375, "question_id": 42123150, "link": "https://stackoverflow.com/questions/42123150/syntax-error-initialization-with-splat-operator-and-empty-hash", "closed_reason": "Duplicate", "title": "Syntax error: initialization with splat operator and empty hash", "body": "<h3>I have the following code that as far as I know should work correctly but doesn't:</h3>\n<pre><code>def calculate( *nums, options = {} ) //errors out here on equals sign\n  if options.empty\n    return add(nums)\n  elsif options[:subtract]\n    return substract(nums)\n  elsif options[:add]\n    return add(nums)\n  end\nend\n</code></pre>\n<h3>Error:</h3>\n<blockquote>\n<p>class: SyntaxError\nmessage: /opt/eval-server/eval-server/app/models/eval_spec_runner.rb:5: syntax\nerror, unexpected '=', expecting ')'\ndef calculate( *nums, options = {} )                              ^\nbacktrace: RubyMonk:18:in `eval'</p>\n</blockquote>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 2, "creation_date": 1486584903, "post_id": 42122764, "comment_id": 71413559, "body": "&quot;So for a performance/memory perspective is it better to return nil at the end of ruby methods.&quot; what is your reason for thinking so?"}, {"owner": {"reputation": 3823, "user_id": 116156, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2d1ba46c042134f573f69461f9689ed9?s=128&d=identicon&r=PG", "display_name": "JD Frias", "link": "https://stackoverflow.com/users/116156/jd-frias"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1486585341, "post_id": 42122764, "comment_id": 71413795, "body": "From my old <code>c</code> programming days I know that return values get pushed on the stack frame and the calling function needs to pop them out. I would think that ruby works in a similar way and if returning nil all this push and pop would be avoided thus less memory use and less clock cycles required"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1486585541, "post_id": 42122764, "comment_id": 71413912, "body": "ruby is designed for programmer happiness and while there are times when optimizing is important this probably isn&#39;t one of them, considering that the return value will be garbage-collected unless it&#39;s assigned to a variable. However it&#39;s helpful to document when methods only use side effects. There&#39;s a convention to add a bang (<code>!</code>) at the end of the method name, and some people do choose to explicitly return nil, but it&#39;s more for clarity&#39;s sake than performance."}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 2, "creation_date": 1486585681, "post_id": 42122764, "comment_id": 71413996, "body": "<a href=\"https://www.ruby-lang.org/en/documentation/ruby-from-other-languages/to-ruby-from-c-and-cpp/\" rel=\"nofollow noreferrer\">ruby-lang.org/en/documentation/ruby-from-other-languages/&hellip;</a> &quot;All variables live on the heap. Further, you don\u2019t need to free them yourself\u2014the garbage collector takes care of that.&quot; &quot;There\u2019s no macros or preprocessor. No casts. No pointers (nor pointer arithmetic). No typedefs, sizeof, nor enums.&quot;  Also ruby is implemented in C ;)"}], "answers": [{"tags": [], "owner": {"reputation": 1777, "user_id": 3353157, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6168a2c2f5e3582addf6d9d70ce13749?s=128&d=identicon&r=PG", "display_name": "Peter Camilleri", "link": "https://stackoverflow.com/users/3353157/peter-camilleri"}, "is_accepted": true, "score": 4, "last_activity_date": 1486585751, "creation_date": 1486585751, "answer_id": 42123001, "question_id": 42122764, "link": "https://stackoverflow.com/questions/42122764/should-i-always-return-nil-in-ruby-methods/42123001#42123001", "title": "Should I always return nil in ruby methods?", "body": "<p>To start, methods also have return values with optional side effects. Further Ruby has methods only, and not functions. A bit of code defined outside a module or a class is a method of the default main object which is Object class. </p>\n\n<p>In cases where there are only side effects and no return value, conventional wisdom is to return self. This allows methods to be chained:</p>\n\n<pre><code>obj.method_one(args).method_two(args).method_three(args)\n</code></pre>\n\n<p>as opposed to:</p>\n\n<pre><code>obj.method_one(args)\nobj.method_two(args)\nobj.method_three(args)\n</code></pre>\n\n<p>While a minor point, every method always has access to its self, while nil would be a reference to a special global object. This could possibly be faster, but not enough to ever be important.</p>\n\n<p>Source code above is shown for illustration only and not intended to start a holy war on source code formatting.</p>\n"}], "owner": {"reputation": 3823, "user_id": 116156, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/2d1ba46c042134f573f69461f9689ed9?s=128&d=identicon&r=PG", "display_name": "JD Frias", "link": "https://stackoverflow.com/users/116156/jd-frias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 785, "favorite_count": 0, "accepted_answer_id": 42123001, "answer_count": 1, "score": 1, "last_activity_date": 1486585751, "creation_date": 1486584863, "question_id": 42122764, "link": "https://stackoverflow.com/questions/42122764/should-i-always-return-nil-in-ruby-methods", "title": "Should I always return nil in ruby methods?", "body": "<p>As we know functions have side-effects and/or return values, and methods have only side-effects. So for a performance/memory perspective is it better to return <code>nil</code> at the end of ruby methods.</p>\n\n<p>For example if I have a method that adds a hash to an existing hash like this:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>def add_to_config(config)\n  config[:alphabet] = {a: 1, b: 2, c: 3}\nend\n</code></pre>\n\n<p>We know that the return value of this method is the item assigned, in this case the alphabet hash. Now in this trivial example doesn't seem like a big deal. But what happens when it's a big complex data structure that is assigned?</p>\n\n<p>Is it better to explicitly return <code>nil</code> to prevent the bigger data structure from being returned? </p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>def add_to_config(config)\n  config[:alphabet] = {a: 1, b: 2, c: 3}\n  nil\nend\n</code></pre>\n\n<p>Or does it really matter? Since it's just probably pushing a pointer into the stack -- speculation, I have no idea how ruby does it.</p>\n"}, {"tags": ["ruby", "gzip", "jruby", "zlib", "decoding"], "answers": [{"tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 3, "last_activity_date": 1486583822, "creation_date": 1486583822, "answer_id": 42122458, "question_id": 42122192, "link": "https://stackoverflow.com/questions/42122192/zlibgzipfileerror-not-in-gzip-format/42122458#42122458", "title": "Zlib::GzipFile::Error: not in gzip format", "body": "<p>Your <code>str</code> contains Base64 encoded data. However, since <code>Zlib::GzipReader</code> doesn't decode the data on its own but expects the raw binary gzip data, it fails.</p>\n\n<p>You can manually decode the data before creating your <code>StringIO</code> object though:</p>\n\n<pre><code>require 'base64'\nrequire 'stringio'\nrequire 'zlib'\n\nstr = 'H4sIAAAAAAAA/y2NwQrDIBAFfyXstUbWNWrir5RSrEoQUi2JOZSQf6+EHt8wzDtgKd7VVPIG9n7AMwWwYhj1MBkkwtEwcN7vq/NfsAo5MnhFt6Y8g71WcDXW9I5ggVCYHqlH0xE12RJ1N5SIwGBpJ3UPTVOKa41IssGS5z+Vhhs1SdHo9okxXPXzcf4AY45Ve6EAAAA='\nraw = Base64.decode64(str)\ninput = StringIO.new(raw)\nputs Zlib::GzipReader.new(input).read\n# =&gt; {\"locations\":[{\"_id\":1486497022087,\"accuracy\":50.0,\"bearing\":0.0,\"datetime\":\"2017-02-07 22:50:22 +0300\",\"latitude\":55.660023,\"longitude\":37.759313,\"speed\":0.0}]}\n</code></pre>\n\n<p>The website you linked to also describes this behavior (emphasis mine):</p>\n\n<blockquote>\n  <p>This simple online text compression tool is compressing a plain text and decompressing <strong>compressed base64 string</strong> with gzip, bzip2 and deflate algorithms</p>\n</blockquote>\n"}], "owner": {"reputation": 3542, "user_id": 5381547, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/jFcfu.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/5381547/viktor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2248, "favorite_count": 0, "accepted_answer_id": 42122458, "answer_count": 1, "score": 0, "last_activity_date": 1486583822, "creation_date": 1486582849, "question_id": 42122192, "link": "https://stackoverflow.com/questions/42122192/zlibgzipfileerror-not-in-gzip-format", "title": "Zlib::GzipFile::Error: not in gzip format", "body": "<p>I'm trying to decode a gzipped string with <code>zlib</code> and <code>jruby</code>. Here is the minimal working example.</p>\n\n<pre><code>require 'stringio'\nrequire 'zlib'\n\nstr = 'H4sIAAAAAAAA/y2NwQrDIBAFfyXstUbWNWrir5RSrEoQUi2JOZSQf6+EHt8wzDtgKd7VVPIG9n7AMwWwYhj1MBkkwtEwcN7vq/NfsAo5MnhFt6Y8g71WcDXW9I5ggVCYHqlH0xE12RJ1N5SIwGBpJ3UPTVOKa41IssGS5z+Vhhs1SdHo9okxXPXzcf4AY45Ve6EAAAA='\ninput = StringIO.new(str)\nputs Zlib::GzipReader.new(input).read\n</code></pre>\n\n<p>And this is the output I get</p>\n\n<pre><code>/Users/duke/.rvm/rubies/jruby-1.7.23/bin/jruby --1.9 -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) /Users/duke/RubymineProjects/untitled/gzip_test.rb\nZlib::GzipFile::Error: not in gzip format\n  initialize at org/jruby/ext/zlib/JZlibRubyGzipReader.java:156\n         new at org/jruby/ext/zlib/JZlibRubyGzipReader.java:85\n      (root) at /Users/duke/RubymineProjects/untitled/gzip_test.rb:6\n        load at org/jruby/RubyKernel.java:1059\n      (root) at -e:1\n\nProcess finished with exit code 1\n</code></pre>\n\n<p>The gzipped string is valid. You can try it here <a href=\"http://www.txtwizard.net/compression\" rel=\"nofollow noreferrer\">http://www.txtwizard.net/compression</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "model-view-controller"], "comments": [{"owner": {"reputation": 599, "user_id": 5213979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1dfcb9ed38c471bb15c8685ee8a61ef?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Kumar", "link": "https://stackoverflow.com/users/5213979/abhishek-kumar"}, "edited": false, "score": 0, "creation_date": 1486581998, "post_id": 42121879, "comment_id": 71411837, "body": "can you post the parameters that reach your server. You can check that on the console running the rails server (<code>rails s</code>)"}, {"owner": {"reputation": 306, "user_id": 5007156, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/lA3OI.jpg?s=128&g=1", "display_name": "Mike Wiesenhart", "link": "https://stackoverflow.com/users/5007156/mike-wiesenhart"}, "reply_to_user": {"reputation": 599, "user_id": 5213979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1dfcb9ed38c471bb15c8685ee8a61ef?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Kumar", "link": "https://stackoverflow.com/users/5213979/abhishek-kumar"}, "edited": false, "score": 0, "creation_date": 1486582388, "post_id": 42121879, "comment_id": 71412067, "body": "@AbhishekKumar Parameters: {&quot;utf8&quot;=&gt;&quot;\u2713&quot;, &quot;authenticity_token&quot;=&gt;&quot;lNP3u+Hs2FYsTBTClWuwJWiwW8HTFECzGVD4C&zwnj;&#8203;dEOgOF5WD2eNiMNHtQuH&zwnj;&#8203;jHpynJp7CaIDio09/mhv&zwnj;&#8203;Qg5rLhgtA==&quot;, &quot;calendar&quot;=&gt;{&quot;name&quot;=&gt;&quot;Listing Agent Workshop&quot;, &quot;description&quot;=&gt;&quot;ffhfh&quot;, &quot;date&quot;=&gt;&quot;Friday Feb 17, 2017&quot;, &quot;time&quot;=&gt;&quot;4:00 PM&quot;, &quot;office&quot;=&gt;&quot;2&quot;}, &quot;commit&quot;=&gt;&quot;Save&quot;}"}, {"owner": {"reputation": 306, "user_id": 5007156, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/lA3OI.jpg?s=128&g=1", "display_name": "Mike Wiesenhart", "link": "https://stackoverflow.com/users/5007156/mike-wiesenhart"}, "reply_to_user": {"reputation": 599, "user_id": 5213979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1dfcb9ed38c471bb15c8685ee8a61ef?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Kumar", "link": "https://stackoverflow.com/users/5213979/abhishek-kumar"}, "edited": false, "score": 0, "creation_date": 1486582417, "post_id": 42121879, "comment_id": 71412093, "body": "@AbhishekKumar All of that is correct so I&#39;m not sure where I am going wrong."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1486582616, "post_id": 42121879, "comment_id": 71412214, "body": "That&#39;s your error, you&#39;re passing <code>office =&gt; 2</code>, and your Calendar object wants ant Office object or and office_id."}, {"owner": {"reputation": 306, "user_id": 5007156, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/lA3OI.jpg?s=128&g=1", "display_name": "Mike Wiesenhart", "link": "https://stackoverflow.com/users/5007156/mike-wiesenhart"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1486582684, "post_id": 42121879, "comment_id": 71412252, "body": "@Anthony But 2 is the office id...so I&#39;m a bit lost."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1486582798, "post_id": 42121879, "comment_id": 71412321, "body": "it wants <code>Calendar.new(office: Offind.find(calendar_params[:office]), other_params_here)</code> OR it wants <code>Calendar.new(office_id: calendar_params[:office_id])</code>."}, {"owner": {"reputation": 306, "user_id": 5007156, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/lA3OI.jpg?s=128&g=1", "display_name": "Mike Wiesenhart", "link": "https://stackoverflow.com/users/5007156/mike-wiesenhart"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1486583507, "post_id": 42121879, "comment_id": 71412746, "body": "@Anthony Gotcha. Add it as an answer and I will accept."}], "answers": [{"tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": true, "score": 1, "last_activity_date": 1486583849, "creation_date": 1486583849, "answer_id": 42122467, "question_id": 42121879, "link": "https://stackoverflow.com/questions/42121879/error-when-submitting-a-form-with-two-different-models/42122467#42122467", "title": "Error when submitting a form with two different models", "body": "<p>Rails is trying to infer which <code>Office</code> to associate with your new <code>Calendar</code>.  Your calendar is being built as:</p>\n\n<pre><code>Calendar.new({\"name\"=&gt;\"Listing Agent Workshop\", \"description\"=&gt;\"ffhfh\", \"date\"=&gt;\"Friday Feb 17, 2017\", \"time\"=&gt;\"4:00 PM\", \"office\"=&gt;\"2\"})\n</code></pre>\n\n<p>Rails knows the <code>office</code> key is an associated model but it expect the value to be an actual instance of an <code>Office</code>, instead here it's just a string.</p>\n\n<p>Instead, you should either specify the id and let rails look it up or find the object first if that is a concern.</p>\n\n<p>First way (change the params):</p>\n\n<pre><code>Calendar.new({\"name\"=&gt;\"Listing Agent Workshop\", \"description\"=&gt;\"ffhfh\", \"date\"=&gt;\"Friday Feb 17, 2017\", \"time\"=&gt;\"4:00 PM\", \"office_id\"=&gt;\"2\"})\n</code></pre>\n\n<p>Better way:</p>\n\n<pre><code>office = Office.find(calendar_params[:office])\ncalendar_params[:office] = office\nCalendar.new(calendar_params)\n</code></pre>\n"}], "owner": {"reputation": 306, "user_id": 5007156, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/lA3OI.jpg?s=128&g=1", "display_name": "Mike Wiesenhart", "link": "https://stackoverflow.com/users/5007156/mike-wiesenhart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 0, "accepted_answer_id": 42122467, "answer_count": 1, "score": 0, "last_activity_date": 1486583849, "creation_date": 1486581795, "last_edit_date": 1486582451, "question_id": 42121879, "link": "https://stackoverflow.com/questions/42121879/error-when-submitting-a-form-with-two-different-models", "title": "Error when submitting a form with two different models", "body": "<p>I have an <code>office</code> model which is a list of all the current offices. I also have a <code>calendar</code> model which will just act as a company calendar. I am trying to get a dropdown of all the current offices to display on the <code>localhost:3000/calendars/new</code> so people can see where the event will be taking place. When I go to submit the form, I get the error shown below. I have posted all relevant code as well. Thanks in advance.</p>\n\n<p>Calendar.rb:</p>\n\n<pre><code>class Calendar &lt; ActiveRecord::Base\n  belongs_to :office\nend\n</code></pre>\n\n<p>Office.rb:</p>\n\n<pre><code>class Office &lt; ActiveRecord::Base\n  has_many :calendars\nend\n</code></pre>\n\n<p>calendars_controller:</p>\n\n<pre><code>def new\n  @calendar = Calendar.new\n  @offices = Office.all\nend\n</code></pre>\n\n<p>_form.html.erb:</p>\n\n<pre><code>&lt;div class=\"field\"&gt;\n  &lt;%= f.label :office_id, class: \"general-text-label\" %&gt;&lt;br&gt;\n  &lt;%= collection_select :calendar, :office, @offices, :id, :name, {include_blank: true}, {class: \"selectize\"} %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/al7LR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/al7LR.png\" alt=\"enter image description here\"></a></p>\n\n<p>Parameters:</p>\n\n<pre><code>Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"lNP3u+Hs2FYsTBTClWuwJWiwW8HTFECzGVD4CdEOgOF5WD2eNiMNHtQuHjHpynJp7CaIDio09/mhvQg5rLhgtA==\", \"calendar\"=&gt;{\"name\"=&gt;\"Listing Agent Workshop\", \"description\"=&gt;\"ffhfh\", \"date\"=&gt;\"Friday Feb 17, 2017\", \"time\"=&gt;\"4:00 PM\", \"office\"=&gt;\"2\"}, \"commit\"=&gt;\"Save\"}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 2, "creation_date": 1486581713, "post_id": 42121796, "comment_id": 71411680, "body": "fyi your syntax is not correct here: <code>else user &amp;&amp; user.authenticate(params[:password])</code> should be &quot;else if&quot;"}, {"owner": {"reputation": 1, "user_id": 7536324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50d70d12ce1ec3cefa45acb1485f5185?s=128&d=identicon&r=PG", "display_name": "MountainWifey", "link": "https://stackoverflow.com/users/7536324/mountainwifey"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1486585918, "post_id": 42121796, "comment_id": 71414132, "body": "The use of &quot;else&quot; has worked in all previous applications I built with the same validations. I tried changing it in this one to see if it had any effect, and it didn&#39;t. My understanding is that &quot;elsif&quot; should be used if there is more than one check that follows, and &quot;else&quot; if there is only one?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1486585983, "post_id": 42121796, "comment_id": 71414161, "body": "sorry, yes it&#39;s <code>elsif</code> not javascript&#39;s <code>else if</code>. It may not raise a syntax error but it&#39;s not the same thing. When using <code>else</code> you wouldn&#39;t put anything on the same line"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7536324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50d70d12ce1ec3cefa45acb1485f5185?s=128&d=identicon&r=PG", "display_name": "MountainWifey", "link": "https://stackoverflow.com/users/7536324/mountainwifey"}, "edited": false, "score": 0, "creation_date": 1486585318, "post_id": 42121855, "comment_id": 71413784, "body": "If I remove that line, I get the error that states &quot;password_confirm is an undefined method&quot;."}], "tags": [], "owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "is_accepted": false, "score": 0, "last_activity_date": 1486581708, "creation_date": 1486581708, "answer_id": 42121855, "question_id": 42121796, "link": "https://stackoverflow.com/questions/42121796/entry-fields-in-ruby-returning-cant-be-blank-error/42121855#42121855", "title": "Entry fields in Ruby returning &quot;Can&#39;t be blank&quot; error", "body": "<p>Remove this line, it messes up how ActiveRecord handles things for you.</p>\n\n<pre><code>attr_accessor :password_confirm, :password\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7536324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50d70d12ce1ec3cefa45acb1485f5185?s=128&d=identicon&r=PG", "display_name": "MountainWifey", "link": "https://stackoverflow.com/users/7536324/mountainwifey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "closed_date": 1486583979, "answer_count": 1, "score": 0, "last_activity_date": 1486585487, "creation_date": 1486581500, "last_edit_date": 1486585487, "question_id": 42121796, "link": "https://stackoverflow.com/questions/42121796/entry-fields-in-ruby-returning-cant-be-blank-error", "closed_reason": "Duplicate", "title": "Entry fields in Ruby returning &quot;Can&#39;t be blank&quot; error", "body": "<p>I've checked the other answers floating around, but haven't found one that solves my issue, as removing \"attr_accessor\" from my validations gives me an error that states \"password_confirm is an undefined method\". I built this application and, initially, was able to create new users from the login/registration page. Now, when I try to create a new user, I get two conflicting errors that I can't quite figure out. One is a rollback that says \"User Exists\", though the user doesn't show in my database. The other is that I get the error messages \"Password can't be blank\" and \"Password Confirmation can't be blank,\" despite the fact that both fields have been filled in.</p>\n\n<p>This is my controller code: </p>\n\n<pre><code>    def create\n    user = User.create(name:params[:name], alias:params[:alias], email:params[:email], password:params[:password], password_confirmation:params[:password_confirm])\n    if !user.errors.messages.empty?\n      puts '********'\n      puts user.errors.full_messages\n      puts '********'\n      flash[:errors] = user.errors.messages\n      redirect_to '/users'\n    else user &amp;&amp; user.authenticate(params[:password])\n      puts '********'\n      puts user.errors.full_messages\n      puts '********'\n      session[:id] = user.id\n      redirect_to \"/ideas\"\n    end\n  end\n</code></pre>\n\n<p>This is the HTML:</p>\n\n<pre><code>    &lt;div class=\"\"&gt;\n  &lt;h3&gt;Register Here:&lt;/h3&gt;\n  &lt;form action=\"/users/create\" method=\"post\"&gt;\n    &lt;input type=\"hidden\" name=\"authenticity_token\" value=\"&lt;%= form_authenticity_token %&gt;\"&gt;\n    Name:&lt;input type=\"text\" name='name'&gt;&lt;br&gt;\n    Alias:&lt;input type=\"text\" name='alias'&gt;&lt;br&gt;\n    Email Address:&lt;input type=\"text\" name='email'&gt;&lt;br&gt;\n    Password:&lt;input type=\"text\" name='password'&gt;&lt;br&gt;\n    &lt;p&gt;* Password must be at least 8 characters.&lt;/p&gt;\n    Confirm Password:&lt;input type=\"text\" name=\"password_confirm\"&gt;&lt;br&gt;\n    &lt;input type=\"submit\" value=\"Register\"&gt;\n  &lt;/form&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And this is my model:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_secure_password\n  has_many :ideas\n  has_many :likes\n  attr_accessor :password_confirm, :password\n  email_regex = /\\A([^@\\s]+)@((?:[-a-z0-9]+\\.)+[a-z]+)\\z/i\n  validates :name, presence: {message: [\"Name can't be blank\"]}\n  validates :alias, presence: {message: [\"Alias can't be blank\"]}\n  validates :password, presence: {message: [\"Password can't be blank\"]}, :on =&gt; :create, length: {minimum: 8}\n  validates :password_confirm, presence: {message:[\"Password Confirmation can't be blank\"]}, :on =&gt; :create\n  validates :email, presence: {message: [\"Email name can't be blank\"]}, :format =&gt; { :with =&gt; email_regex}, :uniqueness =&gt; { :case_sensitive =&gt; false}, :on =&gt; :create\n  def total_likes\n    self.likes.sum(:count)\n  end\n  def total_posts\n    self.ideas.sum(:user_id)\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "url"], "comments": [{"owner": {"reputation": 5529, "user_id": 1032663, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/nQ6Rw.jpg?s=128&g=1", "display_name": "Joel_Blum", "link": "https://stackoverflow.com/users/1032663/joel-blum"}, "edited": false, "score": 1, "creation_date": 1486581382, "post_id": 42121724, "comment_id": 71411486, "body": "Why can&#39;t httparty simply make the request and fail if invalid url?"}, {"owner": {"reputation": 326, "user_id": 4954795, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/9d5a6a4729a786805054a118296d8bc5?s=128&d=identicon&r=PG&f=1", "display_name": "teresa", "link": "https://stackoverflow.com/users/4954795/teresa"}, "reply_to_user": {"reputation": 5529, "user_id": 1032663, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/nQ6Rw.jpg?s=128&g=1", "display_name": "Joel_Blum", "link": "https://stackoverflow.com/users/1032663/joel-blum"}, "edited": false, "score": 0, "creation_date": 1486581728, "post_id": 42121724, "comment_id": 71411685, "body": "@Joel_Blum I found if I pass in the invalid URL to HTTParty, it would just error with <code>getaddrinfo: nodename nor servname provided, or not known</code> and break the app. I&#39;m not sure how to catch that error or if HTTParty has a way to check the URL response before failing."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1486582290, "post_id": 42121724, "comment_id": 71411994, "body": "You can check a URL for validity; that&#39;s different than ensuring the endpoint <i>exists</i>. But your &quot;invalid&quot; URL example isn&#39;t an invalid URL, it just doesn&#39;t exist. <a href=\"http://stackoverflow.com/a/26768085/438992\">stackoverflow.com/a/26768085/438992</a>"}, {"owner": {"reputation": 326, "user_id": 4954795, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/9d5a6a4729a786805054a118296d8bc5?s=128&d=identicon&r=PG&f=1", "display_name": "teresa", "link": "https://stackoverflow.com/users/4954795/teresa"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1486584016, "post_id": 42121724, "comment_id": 71413047, "body": "Thank you, @DaveNewton. I was able to get the check working based on your comment. I also edited my question so it was more accurate."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1486585801, "post_id": 42121724, "comment_id": 71414068, "body": "@tshckr\tPlease add the answer as an answer, not as part of the question."}], "answers": [{"tags": [], "owner": {"reputation": 326, "user_id": 4954795, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/9d5a6a4729a786805054a118296d8bc5?s=128&d=identicon&r=PG&f=1", "display_name": "teresa", "link": "https://stackoverflow.com/users/4954795/teresa"}, "is_accepted": false, "score": 0, "last_activity_date": 1486586943, "last_edit_date": 1495540900, "creation_date": 1486586943, "answer_id": 42123310, "question_id": 42121724, "link": "https://stackoverflow.com/questions/42121724/rails-how-to-check-api-request-url-before-pull/42123310#42123310", "title": "Rails how to check API request URL before pull", "body": "<p>Thanks to <a href=\"https://stackoverflow.com/users/438992/dave-newton\">@Dave Newton</a> from the comments I was able to get the check working. I also edited my question to reflect that it was not about the 'validity' of the URL. But it was that the URL does not exist.</p>\n\n<p>Based on: <a href=\"https://stackoverflow.com/questions/7909596/how-can-i-handle-errors-with-httparty/26768085#26768085\">How can I handle errors with HTTParty?</a>.</p>\n\n<p>Solution:</p>\n\n<pre><code> begin\n   response = HTTParty.get(url) \n rescue HTTParty::Error\n   # don\u00b4t do anything / whatever\n   puts \"=========ERROR==============\"\n rescue StandardError\n   # rescue instances of StandardError,\n   # i.e. Timeout::Error, SocketError etc\n   puts \"=========STANDARD ERROR==============\"\n end\n</code></pre>\n\n<p>Then added a check <code>if !response.nil?</code>, so if the HTTParty request returned an error. <code>response</code> would be <code>nil</code> and the block of code would be ignored.</p>\n"}], "owner": {"reputation": 326, "user_id": 4954795, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/9d5a6a4729a786805054a118296d8bc5?s=128&d=identicon&r=PG&f=1", "display_name": "teresa", "link": "https://stackoverflow.com/users/4954795/teresa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 495, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486586943, "creation_date": 1486581252, "last_edit_date": 1495541345, "question_id": 42121724, "link": "https://stackoverflow.com/questions/42121724/rails-how-to-check-api-request-url-before-pull", "title": "Rails how to check API request URL before pull", "body": "<p>I am looking for a way to check if the API URL exists before making a request using HTTParty. Currently, if the URL does not exist, the HTTParty request errors.</p>\n\n<p>I tried following this <a href=\"https://stackoverflow.com/questions/5908017/check-if-url-exists-in-ruby\">Check if URL exists in Ruby</a>: </p>\n\n<pre><code>api_url = \"http://api.meetup.com/LA-Computer-Science-Reading-Group/events?photo-host=public&amp;page=20&amp;sig_id=215634693&amp;sig=0be729af948c1a17ce5f35faa9fcedd5ae22de56\"\nrequire \"net/http\"\nurl_request = URI.parse(api_url)\nreq = Net::HTTP.new(url_request.host, url_request.port)\nres = req.request_head(url_request.path)\n\n@check = res \n\nresponse = HTTParty.get(api_url) \n</code></pre>\n\n<p>view:</p>\n\n<pre><code>&lt;%= @check.inspect %&gt;\n#&lt;Net::HTTPOK 200 OK readbody=true&gt;\n</code></pre>\n\n<p>But if I change the URL to something that does not exist, such as: </p>\n\n<pre><code>http://api.meeeeeetup.com/LA-Computer-Science-Reading-Group/events?photo-host=public&amp;page=20&amp;sig_id=215634693&amp;sig=0be729af948c1a17ce5f35faa9fcedd5ae22de56` \n</code></pre>\n\n<p>The page still errors with <code>getaddrinfo: nodename nor servname provided, or not known</code></p>\n\n<p>Also, the URL request I want to check is a XML request:</p>\n\n<pre><code>http://api.indeed.com/ads/apisearch?publisher=#{publisher_key}&amp;q=java&amp;l=austin%2C+tx&amp;sort=&amp;radius=&amp;st=&amp;jt=&amp;start=&amp;limit=&amp;fromage=&amp;filter=&amp;latlong=1&amp;co=us&amp;chnl=&amp;userip=&amp;useragent=&amp;v=2\n</code></pre>\n\n<p>and using the idea above, this API URL does not return a successful call. Instead it returns a <code>#&lt;Net::HTTPMethodNotAllowed 405 Method Not Allowed readbody=true&gt;</code>. </p>\n\n<p>I'm not sure about emulating a browser to check the results that way or if there is an easier way to check for validity of the API URL request before the HTTParty request. </p>\n"}, {"tags": ["arrays", "ruby", "string", "integer"], "answers": [{"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1486582780, "post_id": 42121453, "comment_id": 71412309, "body": "As a slight variation, how about <code>data.map { |s| s.match?(&#47;\\D&#47;) ? 0 : s.to_i }</code>?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1486583506, "post_id": 42121453, "comment_id": 71412745, "body": "@sagarpandya82 negatives"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1486580337, "creation_date": 1486580337, "answer_id": 42121453, "question_id": 42121234, "link": "https://stackoverflow.com/questions/42121234/how-do-i-convert-every-element-of-an-array-of-strings-to-a-number-subject-to-cer/42121453#42121453", "title": "How do I convert every element of an array of strings to a number subject to certain conditions?", "body": "<p>You were one step from solution. One should still use <code>map</code>, not <code>select</code> there:</p>\n\n<pre><code>%w|6M 6 M|.map { |s| (i = s.to_i).to_s == s ? i : 0 }\n#\u21d2 [0, 6, 0]\n</code></pre>\n\n<p>Another way would be to make use of <code>Regexp</code>:</p>\n\n<pre><code>%w|6M 6 M|.map { |s| s =~ /\\A-?\\d+\\z/ ? s.to_i : 0 }\n#\u21d2 [0, 6, 0]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1486641037, "creation_date": 1486641037, "answer_id": 42135978, "question_id": 42121234, "link": "https://stackoverflow.com/questions/42121234/how-do-i-convert-every-element-of-an-array-of-strings-to-a-number-subject-to-cer/42135978#42135978", "title": "How do I convert every element of an array of strings to a number subject to certain conditions?", "body": "<p>I think, one of a possible solutions is:</p>\n\n<pre><code>a = %w|6m 6 m|\na.map { |e| Integer(e) rescue 0 }\n#=&gt; [0, 6, 0]\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 42121453, "answer_count": 2, "score": 0, "last_activity_date": 1486641037, "creation_date": 1486579622, "question_id": 42121234, "link": "https://stackoverflow.com/questions/42121234/how-do-i-convert-every-element-of-an-array-of-strings-to-a-number-subject-to-cer", "title": "How do I convert every element of an array of strings to a number subject to certain conditions?", "body": "<p>I'm using Ruby 2.4.  I have an array of strings -- they could take any form.  I want to apply a \"to_i\" function to them, but only if the string only consists of numbers.  I tried this</p>\n\n<pre><code>data.map(&amp;:to_i)\n</code></pre>\n\n<p>but this converts things like [\"6M\"] to [\"6\"], which I dont' want (I want it to be [\"0\"] since there is an \"M\" in there).  Then I tried</p>\n\n<pre><code> data.select{|string| string.to_i.to_s == string ? string.to_i : -2 }\n</code></pre>\n\n<p>but this too does nothing.  How can I convert strings to integers subject to certain conditions?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1486581003, "post_id": 42121087, "comment_id": 71411317, "body": "Consider moving this to <a href=\"https://codereview.stackexchange.com\">Code Review</a>."}], "answers": [{"tags": [], "owner": {"reputation": 599, "user_id": 5213979, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d1dfcb9ed38c471bb15c8685ee8a61ef?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Kumar", "link": "https://stackoverflow.com/users/5213979/abhishek-kumar"}, "is_accepted": false, "score": 2, "last_activity_date": 1486579545, "creation_date": 1486579545, "answer_id": 42121204, "question_id": 42121087, "link": "https://stackoverflow.com/questions/42121087/is-there-a-better-way-to-write-closely-related-nested-if-conditions-in-rails/42121204#42121204", "title": "Is there a better way to write closely related nested if conditions in Rails?", "body": "<pre><code>votes = \n  if is_important\n    (votes &lt; 500) ? 3000 : votes * 10\n  else\n    (votes &lt; 500) ? 8000 : votes * 5\n  end\n</code></pre>\n\n<p>In  ruby if-else, case statements return the value after evaluating the expression.</p>\n"}, {"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 3, "last_activity_date": 1486580951, "last_edit_date": 1486580951, "creation_date": 1486579754, "answer_id": 42121275, "question_id": 42121087, "link": "https://stackoverflow.com/questions/42121087/is-there-a-better-way-to-write-closely-related-nested-if-conditions-in-rails/42121275#42121275", "title": "Is there a better way to write closely related nested if conditions in Rails?", "body": "<p>For me \"cleaner way\" is having a simple interface, which does not force me to dive into implementation details (but when I have to, it should be easy to read):</p>\n\n<pre><code>def count(votes)\n  is_important ? count_important(votes) : count_not_important(votes)\nend\n\nprivate\n\ndef count_important(votes)\n  votes &lt; 500 ? 3000 : votes * 10\nend\n\ndef count_not_important(votes)\n  votes &lt; 500 ? 8000 : votes * 5\nend\n</code></pre>\n\n<p>P.S. With this simple task an <code>if/else</code> statement should be enough though.</p>\n"}, {"tags": [], "owner": {"reputation": 3811, "user_id": 793330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432566b982c73ead26d886951ca7a05c?s=128&d=identicon&r=PG", "display_name": "engineerDave", "link": "https://stackoverflow.com/users/793330/engineerdave"}, "is_accepted": false, "score": 1, "last_activity_date": 1486581338, "creation_date": 1486581338, "answer_id": 42121739, "question_id": 42121087, "link": "https://stackoverflow.com/questions/42121087/is-there-a-better-way-to-write-closely-related-nested-if-conditions-in-rails/42121739#42121739", "title": "Is there a better way to write closely related nested if conditions in Rails?", "body": "<p>You can always just flatten your nesting. Also, don't forget to check that votes actually is there because you have a few returns that assume its presence. </p>\n\n<pre><code>votes = 0 unless votes\nvotes = if is_important &amp;&amp; votes &lt; 500 \n    3000\nelsif is_important \n    votes * 10\nelsif votes &lt; 500\n    8000\nelse\n    votes * 5\nend\n</code></pre>\n\n<p>also you could use then with if and get </p>\n\n<pre><code>votes = 0 unless votes\nvotes = if is_important &amp;&amp; votes &lt; 500 then 3000\nelsif is_important then votes * 10\nelsif votes &lt; 500 then 8000\nelse votes * 5\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 400, "user_id": 2263066, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/SktQH.jpg?s=128&g=1", "display_name": "Lars P", "link": "https://stackoverflow.com/users/2263066/lars-p"}, "is_accepted": false, "score": 1, "last_activity_date": 1486716452, "last_edit_date": 1486716452, "creation_date": 1486606586, "answer_id": 42127099, "question_id": 42121087, "link": "https://stackoverflow.com/questions/42121087/is-there-a-better-way-to-write-closely-related-nested-if-conditions-in-rails/42127099#42127099", "title": "Is there a better way to write closely related nested if conditions in Rails?", "body": "<p>There are many ways to do this. Here is a DRY and compact, but perhaps too odd one:</p>\n\n<pre><code>votes = \n  case [is_important, votes &lt; 500]\n    when [true, true]   then 3000\n    when [true, false]  then votes * 10\n    when [false, true]  then 5000\n    when [false, false] then votes * 5\n    end\n</code></pre>\n"}], "owner": {"reputation": 5893, "user_id": 611696, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/ef89fc537df4f8c678e5fd34aa08ad11?s=128&d=identicon&r=PG&f=1", "display_name": "Hopstream", "link": "https://stackoverflow.com/users/611696/hopstream"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 42121275, "answer_count": 4, "score": 0, "last_activity_date": 1486716452, "creation_date": 1486579126, "last_edit_date": 1486590554, "question_id": 42121087, "link": "https://stackoverflow.com/questions/42121087/is-there-a-better-way-to-write-closely-related-nested-if-conditions-in-rails", "title": "Is there a better way to write closely related nested if conditions in Rails?", "body": "<p>Here is an example:</p>\n\n<pre><code>if is_important\n  if votes &lt; 500\n    votes = 3000\n  else\n    votes = votes * 10\n  end\nelse\n  if votes &lt; 500\n    votes = 8000\n  else\n    votes = votes * 5\n  end\nend\n</code></pre>\n\n<p>I'm trying to find the best way to write such nested <code>if</code>/<code>else</code> conditions in a more cleaner way in Ruby.</p>\n"}, {"tags": ["ruby", "xml", "nokogiri"], "comments": [{"owner": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "edited": false, "score": 0, "creation_date": 1486575000, "post_id": 42119665, "comment_id": 71407815, "body": "I can&#39;t answer, but interesting is what does <code>rescue nil</code> after assignment mean? I didn&#39;t know you can do that. Thanks :)"}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "reply_to_user": {"reputation": 1464, "user_id": 5712410, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/2be8636271ba5bf194537f8119d752b1?s=128&d=identicon&r=PG&f=1", "display_name": "Marko Avlija\u0161", "link": "https://stackoverflow.com/users/5712410/marko-avlija%c5%a1"}, "edited": false, "score": 0, "creation_date": 1486575046, "post_id": 42119665, "comment_id": 71407841, "body": "@MarkoAvlija\u0161 it&#39;s just a filler right now... If there isn&#39;t any result, I&#39;ll eventually fill it in with a rescue."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1486575615, "post_id": 42119665, "comment_id": 71408178, "body": "You can&#39;t reduce the sample XML further? Take out everything that is unnecessary. Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. We need the <i>minimum</i> input necessary to demonstrate the problem."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1486575978, "post_id": 42119665, "comment_id": 71408389, "body": "Your code isn&#39;t idiomatic, but the main problem is you&#39;re using <code>&#47;&#47;</code> when you should be using <code>.&#47;</code> to start your intermediate selectors. <code>&#47;&#47;</code> means search from the top of the DOM to the bottom. <code>.&#47;</code> means search from this spot."}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1486576055, "post_id": 42119665, "comment_id": 71408446, "body": "@theTinMan ah, good to know...."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1486576252, "post_id": 42119665, "comment_id": 71408557, "body": "It&#39;s not necessary to find <code>root</code> using <code>&#47;X</code>. Simply start your search with <code>&#47;&#47;get_results_response&#47;result</code> then remove <code>&#47;&#47;</code> from the other <code>at_xpath</code> and you should get better results."}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 94, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1486575854, "creation_date": 1486574467, "last_edit_date": 1486575854, "question_id": 42119665, "link": "https://stackoverflow.com/questions/42119665/nokogiri-conditional-parsing", "title": "Nokogiri conditional parsing", "body": "<p>I have some pretty unorganized XML (courtesy of a 3rd party application I'm using) that I need to parse.</p>\n\n<p>If the element <code>result/nvt/cve</code> has a value (besides 'NOCVE') then I need to save certain values.</p>\n\n<p>Some of the XML, with both 'NOCVE' and a CVE:</p>\n\n<pre><code>&lt;X&gt;\n&lt;result id=\"8791e80e-f254-479f-907e-e2667f57246b\"&gt;\n  &lt;nvt oid=\"1.3.6.1.4.1.25623.1.0.111038\"&gt;\n    &lt;cve&gt;NOCVE&lt;/cve&gt;\n    .......\n&lt;/result&gt;\n\n&lt;result id=\"c1bf6c4e-1192-418a-bb2c-a3e3376dd42f\"&gt;\n  &lt;name&gt;Dropbear SSH CRLF Injection Vulnerability&lt;/name&gt;\n  &lt;detection&gt;\n    &lt;result id=\"1817a9ea-379f-41ad-9450-e2c1d6d73f9b\"&gt;\n      &lt;details&gt;\n        &lt;detail&gt;\n          &lt;name&gt;source_name&lt;/name&gt;\n          &lt;value&gt;Dropbear SSH Detection&lt;/value&gt;\n        &lt;/detail&gt;\n      &lt;/details&gt;\n    &lt;/result&gt;\n  &lt;/detection&gt;\n  &lt;host&gt;10.10.10.1&lt;/host&gt;\n  &lt;port&gt;2222/tcp&lt;/port&gt;\n  &lt;nvt oid=\"1.3.6.1.4.1.25623.1.0.807740\"&gt;\n    &lt;name&gt;Dropbear SSH CRLF Injection Vulnerability&lt;/name&gt;\n    &lt;cve&gt;CVE-2016-3116&lt;/cve&gt;\n  &lt;/nvt&gt;\n&lt;/result&gt;\n&lt;/X&gt;\n</code></pre>\n\n<p>In this case, the 2nd XML <code>result</code> element has <code>&lt;cve&gt;CVE-2016-3116&lt;/cve&gt;</code> whereas the first one has <code>&lt;cve&gt;NOCVE&lt;/cve&gt;</code>.</p>\n\n<p>I'm trying to search my document, determine if the <code>&lt;cve&gt;&lt;/cve&gt;</code> has a value other than <code>NOCVE</code> and then save various element text into variables for later use:</p>\n\n<pre><code>doc = File.open(\"results.xml\") { |f| Nokogiri::XML(f) }\n\nroot = doc.xpath(\"/X/get_results_response\")\n\nroot.xpath(\"//result\").each do |result|\n  if result.at_xpath(\"//nvt/cve\").text != 'NOCVE'\n    result_id = result.at_xpath(\"@id\").value\n    host = result.at_xpath(\"host\").text rescue nil\n    cve = result.at_xpath(\"//nvt/cve\").text\n    puts \"#{result_id} #{host} - #{cve}\"\n  end\nend\n</code></pre>\n\n<p>However, I'm not getting any results!  I also realize this code my be totally inefficient, so if you have suggestions, please share!</p>\n"}, {"tags": ["ruby", "count", "enumerable", "method-declaration"], "answers": [{"comments": [{"owner": {"reputation": 309, "user_id": 6793362, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4589bf211e8db9fafd983832c308f9a0?s=128&d=identicon&r=PG", "display_name": "Nikolay D", "link": "https://stackoverflow.com/users/6793362/nikolay-d"}, "edited": false, "score": 0, "creation_date": 1486642870, "post_id": 42120103, "comment_id": 71439218, "body": "Thank you for your answer! I eventually ended up doing something similar and it worked. I&#39;ll post my solution below.  Just a minor question though - in your first example shouldn&#39;t the third line be &quot;puts &quot;block given&quot; if block_given?&quot;, with if, not unless?  I tried something similar to your last example, but couldn&#39;t figure out the &quot;block.nil?&quot; part and I always ended up with an argument error."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 309, "user_id": 6793362, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4589bf211e8db9fafd983832c308f9a0?s=128&d=identicon&r=PG", "display_name": "Nikolay D", "link": "https://stackoverflow.com/users/6793362/nikolay-d"}, "edited": false, "score": 0, "creation_date": 1486656391, "post_id": 42120103, "comment_id": 71449053, "body": "Yes, I meant <code>if</code>, not <code>unless</code>. Good catch. I can&#39;t explain your ArgumentError without seeing your code, however."}, {"owner": {"reputation": 309, "user_id": 6793362, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4589bf211e8db9fafd983832c308f9a0?s=128&d=identicon&r=PG", "display_name": "Nikolay D", "link": "https://stackoverflow.com/users/6793362/nikolay-d"}, "edited": false, "score": 0, "creation_date": 1486671465, "post_id": 42120103, "comment_id": 71458415, "body": "I just meant an argument error for wrong number of arguments because &amp;block is explicitly declared as an argument and I couldn&#39;t use it without a block, as I didn&#39;t think of the block.nil? part."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 6, "last_activity_date": 1560529621, "last_edit_date": 1560529621, "creation_date": 1486575848, "answer_id": 42120103, "question_id": 42119658, "link": "https://stackoverflow.com/questions/42119658/can-a-ruby-method-accept-either-a-block-or-an-argument/42120103#42120103", "title": "Can a Ruby method accept either a block OR an argument?", "body": "<p>Sure it's possible. All you have to do is check if an argument is given and also check if a block is given.</p>\n\n<pre><code>def call_me(arg=nil)\n  puts \"arg given\" unless arg.nil?\n  puts \"block given\" if block_given?\nend\n\ncall_me(1)\n# =&gt; arg given\ncall_me { \"foo\" }\n# =&gt; block given\ncall_me(1) { \"foo\" }\n# =&gt; arg given\n#    block given\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code>def call_me(arg=nil, &amp;block)\n  puts \"arg given\" unless arg.nil?\n  puts \"block given\" unless block.nil?\nend\n</code></pre>\n\n<p>The latter is useful because it converts the block to a Proc (named <code>block</code>) that you can then reuse, as below.</p>\n\n<p>You could implement your own <code>count</code> method like this:</p>\n\n<pre><code>module Enumerable\n  def my_count(*args, &amp;block)\n    return size if args.empty? &amp;&amp; block.nil?\n    raise ArgumentError, \"wrong number of arguments (given #{args.size}, expected 1)\" if args.size &gt; 1\n\n    counter = block.nil? ? -&gt;(i) { i == args[0] } : block\n    sum {|i| counter.call(i) ? 1 : 0 }\n  end\nend\n\narr = [1,2,3,4,5]\np arr.my_count # =&gt; 5\np arr.my_count(2) # =&gt; 1\np arr.my_count(&amp;:even?) # =&gt; 2\np arr.my_count(2, 3) # =&gt; ArgumentError: wrong number of arguments (given 2, expected 1)\n</code></pre>\n\n<p>See it on repl.it: <a href=\"https://repl.it/@jrunning/YellowishPricklyPenguin-1\" rel=\"nofollow noreferrer\">https://repl.it/@jrunning/YellowishPricklyPenguin-1</a></p>\n"}, {"comments": [{"owner": {"reputation": 309, "user_id": 6793362, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4589bf211e8db9fafd983832c308f9a0?s=128&d=identicon&r=PG", "display_name": "Nikolay D", "link": "https://stackoverflow.com/users/6793362/nikolay-d"}, "edited": false, "score": 0, "creation_date": 1486642535, "post_id": 42121424, "comment_id": 71438996, "body": "Thank you, I find your last example easiest to understand. I&#39;ll have to get back to the others after some time again, but they seem helpful, too. :)"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 2, "last_activity_date": 1486580705, "last_edit_date": 1486580705, "creation_date": 1486580236, "answer_id": 42121424, "question_id": 42119658, "link": "https://stackoverflow.com/questions/42119658/can-a-ruby-method-accept-either-a-block-or-an-argument/42121424#42121424", "title": "Can a Ruby method accept either a block OR an argument?", "body": "<p>Yes, it is possible to do this by making the parameters optional (blocks are always optional anyway) and checking whether a positional argument or a block argument was passed.</p>\n\n<p>This is a bit messy, though. Most Ruby implementations get around this, by implementing the methods in question with privileged access to the private internals of the implementation, which makes it much easier to check whether arguments were passed or not. E.g. both JRuby and IronRuby have ways to bind <em>multiple overloaded</em> Java / CLI methods to a <em>single</em> Ruby method based on the number and the types of arguments, which makes it possible to implement those three \"modes\" of <code>count</code> as three simple overloads of the same method. Here's the example of <a href=\"https://github.com/IronLanguages/ironruby/blob/master/Src/Libraries/Builtins/Enumerable.cs#L722-L768\" rel=\"nofollow noreferrer\"><code>count</code> from IronRuby</a>, and this is <a href=\"https://github.com/jruby/jruby/blob/master/core/src/main/java/org/jruby/RubyEnumerable.java#L149-L204\" rel=\"nofollow noreferrer\"><code>count</code> from JRuby</a>.</p>\n\n<p>Ruby, however, doesn't support overloading, so you have to implement it manually, which can be a bit awkward. Something like this:</p>\n\n<pre><code>module Enumerable\n  def count(item = (item_not_given = true; nil))\n    item_given = !item_not_given\n    warn 'given block not used' if block_given? &amp;&amp; item_given\n\n    return count(&amp;item.method(:==)) if item_given\n    return inject(0) {|acc, el| if yield el then acc + 1 else acc end } if block_given?\n    count(&amp;:itself)\n  end\nend\n</code></pre>\n\n<p>As you can see, it is a bit awkward. Why don't I simply use <code>nil</code> as a default argument for the optional <code>item</code> parameter? Well, because <code>nil</code> is a valid argument, and I wouldn't be able to distinguish between someone passing no argument and someone passing <code>nil</code> as an argument.</p>\n\n<p>For comparison, here is how <a href=\"https://github.com/rubinius/rubinius/blob/master/core/enumerable.rb#L53-L66\" rel=\"nofollow noreferrer\"><code>count</code> is implemented in Rubinius</a>:</p>\n\n<blockquote>\n<pre><code>def count(item = undefined)\n  seq = 0\n  if !undefined.equal?(item)\n    each do\n      element = Rubinius.single_block_arg\n      seq += 1 if item == element\n    end\n  elsif block_given?\n    each { |element| seq += 1 if yield(element) }\n  else\n    each { seq += 1 }\n  end\n  seq\nend\n</code></pre>\n</blockquote>\n\n<p>Where I (ab)use the fact that the default argument for an optional parameter is an arbitrary Ruby expression with side-effects such as setting variables, Rubinius uses a special <code>undefined</code> object that is provided by the Rubinius runtime and is <code>equal?</code> only to itself.</p>\n"}, {"tags": [], "owner": {"reputation": 309, "user_id": 6793362, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4589bf211e8db9fafd983832c308f9a0?s=128&d=identicon&r=PG", "display_name": "Nikolay D", "link": "https://stackoverflow.com/users/6793362/nikolay-d"}, "is_accepted": false, "score": 0, "last_activity_date": 1486643429, "last_edit_date": 1495540892, "creation_date": 1486643429, "answer_id": 42136790, "question_id": 42119658, "link": "https://stackoverflow.com/questions/42119658/can-a-ruby-method-accept-either-a-block-or-an-argument/42136790#42136790", "title": "Can a Ruby method accept either a block OR an argument?", "body": "<p>Thank you for your help! Just before I came to check if there are any answers I came up with the following solution. It can be definitely improved, and I'll try to shorten it a bit, but I prefer to first post it here as I came up with it, it might be helpful for other newbies like me. In the code below I'm using a #my_each method that I that works the same as the normal #each.</p>\n\n<pre><code>def my_count(arg=nil)\n    sum = 0\n    if block_given? &amp;&amp; arg == nil\n        self.my_each do |elem|\n            if yield(elem)\n                sum += 1\n            end\n        end\n    elsif !block_given? &amp;&amp; arg != nil\n        self.my_each do |elem|\n            if arg == elem\n                sum += 1\n            end\n        end\n    else\n        self.my_each do |elem|\n            sum += 1\n        end\n    end\n    sum\nend\n</code></pre>\n\n<p>I also found these two links helpful:\n<a href=\"https://stackoverflow.com/questions/35747905/a-method-with-an-optional-parameter\">A method with an optional parameter</a>\nand <a href=\"http://augustl.com/blog/2008/procs_blocks_and_anonymous_functions/\" rel=\"nofollow noreferrer\">http://augustl.com/blog/2008/procs_blocks_and_anonymous_functions/</a> (which reminded me that a method can yield a block even if it's not defined as an argument such as &amp;block). I saw Jorg has commented in the first link's discussion, too.</p>\n"}], "owner": {"reputation": 309, "user_id": 6793362, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4589bf211e8db9fafd983832c308f9a0?s=128&d=identicon&r=PG", "display_name": "Nikolay D", "link": "https://stackoverflow.com/users/6793362/nikolay-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1771, "favorite_count": 0, "accepted_answer_id": 42120103, "answer_count": 3, "score": 6, "last_activity_date": 1560529621, "creation_date": 1486574442, "last_edit_date": 1486576156, "question_id": 42119658, "link": "https://stackoverflow.com/questions/42119658/can-a-ruby-method-accept-either-a-block-or-an-argument", "title": "Can a Ruby method accept either a block OR an argument?", "body": "<p>I'm doing the lessons on The Odin Project and now I have to write myself a new <code>#count</code> method (with another name) that behaves like the normal one from the Enumerable module.</p>\n\n<p>The documentation on count says the following (<a href=\"http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-count\" rel=\"noreferrer\">http://ruby-doc.org/core-2.4.0/Enumerable.html#method-i-count</a>):</p>\n\n<blockquote>\n  <h3>count \u2192 int<br>count(item) \u2192 int<br>count { |obj| block } \u2192 int</h3>\n  \n  <p>Returns the number of items in <code>enum</code> through enumeration. If an\n  argument is given, the number of items in <code>enum</code> that are equal to <code>item</code>\n  are counted. If a block is given, it counts the number of elements\n  yielding a true value.</p>\n</blockquote>\n\n<p>I think I can write all of these as separate methods, but I was mostly wondering if one method definition can combine the last two uses of <code>count</code> - with <code>item</code> and with the block. Naturally, I'm wondering if all three can be combined in one definition, but I'm mostly interested in the last two. So far I can't seem to find a possible answer.</p>\n\n<p>The documentation page has these examples:</p>\n\n<pre><code>ary = [1, 2, 4, 2]\nary.count               #=&gt; 4\nary.count(2)            #=&gt; 2\nary.count{ |x| x%2==0 } #=&gt; 3\n</code></pre>\n"}, {"tags": ["ruby", "cucumber", "environment-variables", "browserstack"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1486573961, "post_id": 42119303, "comment_id": 71407238, "body": "Where does the key <code>bsmobile</code> come from? Who is parsing that key from the Yaml file?"}, {"owner": {"reputation": 23, "user_id": 5571769, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/fcaccab0c5fd4657a617e2c313400111?s=128&d=identicon&r=PG&f=1", "display_name": "DHarls17", "link": "https://stackoverflow.com/users/5571769/dharls17"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1486575039, "post_id": 42119303, "comment_id": 71407836, "body": "Sorry, should have added that the &#39;bsmobile&#39; is just a cucumber profile name (I&#39;ve given when testing) for the testing of the mobile device (in this cast iPhone 6. So when I run the cucumber test I only need to enter &#39;-p bsmobile&#39; rather than all of the environments."}], "answers": [{"tags": [], "owner": {"reputation": 784, "user_id": 4019341, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zVo4q.jpg?s=128&g=1", "display_name": "Mukesh Tiwari", "link": "https://stackoverflow.com/users/4019341/mukesh-tiwari"}, "is_accepted": false, "score": 0, "last_activity_date": 1486576177, "creation_date": 1486576177, "answer_id": 42120199, "question_id": 42119303, "link": "https://stackoverflow.com/questions/42119303/cucumber-ruby-spaces-in-cucumber-yml-profile-env-variables/42120199#42120199", "title": "Cucumber Ruby - Spaces in cucumber.yml profile ENV variables", "body": "<p>I believe you can just pass the device as iPhone6 with a space. The same should work for iPhone6S and other mobile emulators. Have you tried this already?</p>\n"}, {"tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": false, "score": 0, "last_activity_date": 1486659036, "last_edit_date": 1486659036, "creation_date": 1486656181, "answer_id": 42141398, "question_id": 42119303, "link": "https://stackoverflow.com/questions/42119303/cucumber-ruby-spaces-in-cucumber-yml-profile-env-variables/42141398#42141398", "title": "Cucumber Ruby - Spaces in cucumber.yml profile ENV variables", "body": "<p>The answer is found on <a href=\"https://github.com/cucumber/cucumber-ruby/blob/f5a396aba2bba85af65685b2577bc9253e303bd6/lib/cucumber/cli/profile_loader.rb#L34\" rel=\"nofollow noreferrer\">line 34 of the cucumber gem file <code>profile_loader.rb</code></a>:</p>\n\n<pre><code>args_from_yml = Shellwords.shellwords(args_from_yml)\n</code></pre>\n\n<p>From here we can test to see what works in irb, and after a little experimentation we find this:</p>\n\n<pre><code>Shellwords.shellwords(\"xxx yyy zzz=\\'aaa bbb\\'\")\n=&gt; [\"xxx\", \"yyy\", \"zzz=aaa bbb\"]\n</code></pre>\n\n<p>Hence the solution to your problem should be:</p>\n\n<pre><code>MOBILE_DEVICE='iPhone 6'\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 5571769, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/fcaccab0c5fd4657a617e2c313400111?s=128&d=identicon&r=PG&f=1", "display_name": "DHarls17", "link": "https://stackoverflow.com/users/5571769/dharls17"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 674, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1486659036, "creation_date": 1486573356, "last_edit_date": 1486656319, "question_id": 42119303, "link": "https://stackoverflow.com/questions/42119303/cucumber-ruby-spaces-in-cucumber-yml-profile-env-variables", "title": "Cucumber Ruby - Spaces in cucumber.yml profile ENV variables", "body": "<p>I'm using ruby to script my cucumber tests and have hit a problem when defining some variables.</p>\n\n<p>I need to run a test on the iPhone 6 device, so I added the following (BrowserStack) definition into my cucumbers env.rb file;</p>\n\n<pre><code>capabilities['device'] = ENV['MOBILE_DEVICE']\n</code></pre>\n\n<p>And the following profile into my cucumber.yml file;</p>\n\n<pre><code>bsmobile: BROWSER_NAME=iPhone PLATFORM=MAC MOBILE_DEVICE='iPhone 6'\n</code></pre>\n\n<p>However, when I run this on Windows it's not allowing the space in the 'MOBILE_DEVICE' env.</p>\n\n<p>I've tried;</p>\n\n<pre><code>MOBILE_DEVICE=\"iPhone 6\"\n\"MOBILE_DEVICE=iPhone 6\"\nMOBILE_DEVICE=\"'iPhone 6'\"\nMOBILE_DEVICE='iPhone\\ 6'\nMOBILE_DEVICE=iPhone\\ 6\n</code></pre>\n\n<p>But none seemed to work.</p>\n\n<p>Am I missing something obvious here?</p>\n\n<p>Any help would be great.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 126, "user_id": 5747405, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f6df507d43a44a61ddad066e32a90c40?s=128&d=identicon&r=PG&f=1", "display_name": "Shital luitel", "link": "https://stackoverflow.com/users/5747405/shital-luitel"}, "reply_to_user": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1486646901, "post_id": 42119241, "comment_id": 71442124, "body": "Nothing special... can you give me any idea about how i can do that...."}], "answers": [{"tags": [], "owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "is_accepted": false, "score": 1, "last_activity_date": 1486573891, "last_edit_date": 1495541374, "creation_date": 1486573891, "answer_id": 42119473, "question_id": 42119241, "link": "https://stackoverflow.com/questions/42119241/recording-activities-of-every-controller-in-rails/42119473#42119473", "title": "Recording activities of every controller in rails", "body": "<p>I'm not sure what you mean by \"track the activities\", but it sounds like you want to track when a user changes those attributes. I would suggest looking into ActionCable, which the user will make a connection with, and basically subscribe to a channel, and you can record what they are doing.</p>\n\n<p>Here is a good place to start:\n<a href=\"https://stackoverflow.com/questions/37289441/actioncable-connected-users-list\">Actioncable connected users list</a></p>\n"}], "owner": {"reputation": 126, "user_id": 5747405, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/f6df507d43a44a61ddad066e32a90c40?s=128&d=identicon&r=PG&f=1", "display_name": "Shital luitel", "link": "https://stackoverflow.com/users/5747405/shital-luitel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1486646619, "creation_date": 1486573138, "last_edit_date": 1486646619, "question_id": 42119241, "link": "https://stackoverflow.com/questions/42119241/recording-activities-of-every-controller-in-rails", "title": "Recording activities of every controller in rails", "body": "<p>I have created a log model and a method in every controller to keep record of action performed in every controller. that method populate logs modle. But i don't know how keep record of user creation, deletion and update using this function.</p>\n\n<p>The method that i have created is:-</p>\n\n<pre><code>def keep_record(msg)\n    @log = Log.new\n    @log.user_id = current_user.id\n    @log.description = msg\n    @log.save\nend\n</code></pre>\n\n<p>How can i use this method to keep record of creating, editing and removing user in devise gem.</p>\n\n<p>Can anyone suggest me how to modify Registration_controller to keep record of creating, deleting and updating user.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 1277, "user_id": 1737811, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ab510b7d0d145c538fcc7638395ee703?s=128&d=identicon&r=PG", "display_name": "mutantkeyboard", "link": "https://stackoverflow.com/users/1737811/mutantkeyboard"}, "edited": false, "score": 0, "creation_date": 1486574116, "post_id": 42118679, "comment_id": 71407348, "body": "To me it looks similar to <a href=\"https://github.com/rspec/rspec-rails/issues/1586\" rel=\"nofollow noreferrer\">this</a> issue. Don&#39;t know if it helps or not. I&#39;d also try renaming <code>Rails.application.routes.draw</code> to <code>Yourappname::Application.routes.draw</code>"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1486576442, "post_id": 42118679, "comment_id": 71408683, "body": "Am I missing something or is rspec infering <code>TrayConfigurationsController</code> in the failure output but you&#39;re describing <code>ItemConfigurationsController </code>.  Anything weird in <code>log&#47;test.log</code> ?"}, {"owner": {"reputation": 6694, "user_id": 29291, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2d51089c979c89185ed307d42e5c15c8?s=128&d=identicon&r=PG", "display_name": "Steve Gattuso", "link": "https://stackoverflow.com/users/29291/steve-gattuso"}, "edited": false, "score": 0, "creation_date": 1486578749, "post_id": 42118679, "comment_id": 71410063, "body": "whoops, that&#39;s a mistake. I renamed some of the models for the purpose of this question in order to make it more generic. I&#39;ve fixed that in the latest edit."}, {"owner": {"reputation": 6694, "user_id": 29291, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2d51089c979c89185ed307d42e5c15c8?s=128&d=identicon&r=PG", "display_name": "Steve Gattuso", "link": "https://stackoverflow.com/users/29291/steve-gattuso"}, "edited": false, "score": 0, "creation_date": 1486653076, "post_id": 42118679, "comment_id": 71446582, "body": "also nothing in <code>log&#47;test.log</code>, just some lines about the queries run before attempting that GET request."}], "answers": [{"comments": [{"owner": {"reputation": 6694, "user_id": 29291, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2d51089c979c89185ed307d42e5c15c8?s=128&d=identicon&r=PG", "display_name": "Steve Gattuso", "link": "https://stackoverflow.com/users/29291/steve-gattuso"}, "edited": false, "score": 0, "creation_date": 1487099809, "post_id": 42197377, "comment_id": 71628232, "body": "YES, that was it! Thank you so much, you&#39;ve saved me more time/sanity than you know, haha."}], "tags": [], "owner": {"reputation": 1308, "user_id": 2212311, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/0SVoC.jpg?s=128&g=1", "display_name": "shlajin", "link": "https://stackoverflow.com/users/2212311/shlajin"}, "is_accepted": true, "score": 4, "last_activity_date": 1486964728, "creation_date": 1486964728, "answer_id": 42197377, "question_id": 42118679, "link": "https://stackoverflow.com/questions/42118679/rspec-cannot-find-route-for-nested-resource/42197377#42197377", "title": "RSpec cannot find route for nested resource", "body": "<p>Well, apart from the typo <code>controller: :item_configuration</code> (singular, while controller is plural) in your routes you specify <code>on</code> parameter on <code>resources</code>. It seems to be it acts like a constraint on <code>resources</code>, rather than as a \"type\" of interaction.</p>\n\n<p>From console:</p>\n\n<pre><code>app.url_for({:action=&gt;\"show\", :controller=&gt;\"api/v1/item_configurations\", :id=&gt;\"2\", :user_id=&gt;\"1\"})\n=&gt; ActionController::UrlGenerationError: No route matches {:action=&gt;\"show\", :controller=&gt;\"api/v1/item_configurations\", :id=&gt;\"2\", :user_id=&gt;\"1\"}\napp.url_for({:action=&gt;\"show\", :controller=&gt;\"api/v1/item_configurations\", :id=&gt;\"2\", :user_id=&gt;\"1\", on: :member})\n=&gt; \"http://www.example.com/v1/users/1/item_configurations/2\"\n</code></pre>\n\n<p>Therefore, use <code>member</code> block in routes to achieve desired behaviour:</p>\n\n<pre><code>...\nresources :users do\n  member do\n     resources :configuration_items \n  end\nend\n...\n</code></pre>\n"}], "owner": {"reputation": 6694, "user_id": 29291, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/2d51089c979c89185ed307d42e5c15c8?s=128&d=identicon&r=PG", "display_name": "Steve Gattuso", "link": "https://stackoverflow.com/users/29291/steve-gattuso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 749, "favorite_count": 0, "accepted_answer_id": 42197377, "answer_count": 1, "score": 1, "last_activity_date": 1486964728, "creation_date": 1486571681, "last_edit_date": 1486578721, "question_id": 42118679, "link": "https://stackoverflow.com/questions/42118679/rspec-cannot-find-route-for-nested-resource", "title": "RSpec cannot find route for nested resource", "body": "<p>I'm dealing with a seemingly strange issue while trying to run unit tests on a nested <code>resources</code> controller. Here's my setup:</p>\n\n<p><code>routes.rb</code>:</p>\n\n<pre><code>Rails.application.routes.draw do\n  scope module: 'api' do\n    namespace :v1 do\n      resources :users do\n        resources 'item-configurations',\n          controller: :item_configuration,\n            as: :item_configurations,\n            on: :member\n      end\n    end\n  end\nend\n</code></pre>\n\n<p><code>app/controllers/api/v1/item_configurations_controller.rb</code>:</p>\n\n<pre><code>module Api::V1                              \n  class ItemConfigurationsController &lt; ApplicationController\n    def show\n      @user = authorize User.find(params[:user_id])      \n      @item_configuration = authorize @user.item_configurations.find(params[:id])\n\n      success @item_configuration\n    end\n  end\nend\n</code></pre>\n\n<p>and finally, <code>spec/controllers/api/v1/item_configurations_controller_spec.rb</code>:</p>\n\n<pre><code>require 'rails_helper'\n\ndescribe Api::V1::ItemConfigurationsController do\n  describe '#show' do\n    it 'renders an item configuration' do\n      user = FactoryGirl.create(:user)\n      configuration = FactoryGirl.create(:item_configuration)\n\n      get :show, params: {user_id: user.id, id: configuration.id}\n      expect(response.status).to equal(200)\n    end\n  end\nend\n</code></pre>\n\n<p>When I make a request to <code>/users/1/item-configurations/4</code> I'm able to get a response, just as I'd expect. The issue comes from when I run <code>rspec</code>, I get the following error:</p>\n\n<pre><code>  1) Api::V1::ItemConfigurationsController#show renders an item configuration\n     Failure/Error: get :show, params: {user_id: user.id, id: configuration.id}\n\n     ActionController::UrlGenerationError:\n       No route matches {:action=&gt;\"show\", :controller=&gt;\"api/v1/item_configurations\", :id=&gt;1, :user_id=&gt;1}\n</code></pre>\n\n<p>Normally these errors arise when a parameter is missing from the request, but in this case everything appears to be there (both <code>user_id</code> and <code>id</code>). I've also tried this on other routes on the controller (<code>#index</code> also works when sent a <code>GET</code> but does not work in rspec), adding a <code>format: :json</code> param, etc. but nothing seems to solve it.</p>\n\n<p>Am I crazy or is there something simple I'm missing here?</p>\n"}, {"tags": ["ruby", "chef-recipe", "devops", "knife"], "answers": [{"tags": [], "owner": {"reputation": 1523, "user_id": 6896906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JiWcO.jpg?s=128&g=1", "display_name": "Zach Tuttle", "link": "https://stackoverflow.com/users/6896906/zach-tuttle"}, "is_accepted": false, "score": 0, "last_activity_date": 1486573869, "last_edit_date": 1495542844, "creation_date": 1486573869, "answer_id": 42119461, "question_id": 42118134, "link": "https://stackoverflow.com/questions/42118134/invalid-signature-for-user-or-client/42119461#42119461", "title": "Invalid signature for user or client", "body": "<p>Maybe this will help: <a href=\"https://stackoverflow.com/questions/24561129/chef-node-configuration-issue-with-knife-bootstrap-cant-authenticate-with-serv\">Chef node configuration issue with knife bootstrap- can&#39;t authenticate with server</a></p>\n\n<p>Are sure your pem file is valid? </p>\n\n<p>take a look at the chef docs about <a href=\"https://docs.chef.io/chef_private_keys.html\" rel=\"nofollow noreferrer\">public/private keys</a>: </p>\n"}], "owner": {"reputation": 1, "user_id": 7535536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/db81331461b8c5f85993f1163f1c92c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tanya", "link": "https://stackoverflow.com/users/7535536/tanya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2873, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1531841997, "creation_date": 1486570237, "question_id": 42118134, "link": "https://stackoverflow.com/questions/42118134/invalid-signature-for-user-or-client", "title": "Invalid signature for user or client", "body": "<p>we created a cookbook locally on the computer with the command: knife create cookbook web in powershell, and we want to upload it to the chef server with command: knife cookbook upload web and it gives us an error:ERROR: Failed to authenticate to <a href=\"https://api.chef.io/organizations/e_t\" rel=\"nofollow noreferrer\">https://api.chef.io/organizations/e_t</a> as e_t with key C:/chef-repo/.chef/e_t.pem Response:  <strong>Invalid signature for user or client</strong> 'e_t' , what is the problem??? thank you in advance</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 2572, "user_id": 2862049, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ffd65bc37e559c2c407f064f308828a4?s=128&d=identicon&r=PG&f=1", "display_name": "Lukas Baliak", "link": "https://stackoverflow.com/users/2862049/lukas-baliak"}, "is_accepted": true, "score": 1, "last_activity_date": 1486570391, "creation_date": 1486570391, "answer_id": 42118186, "question_id": 42117915, "link": "https://stackoverflow.com/questions/42117915/ruby-date-comparison-not-working/42118186#42118186", "title": "Ruby date comparison not working?", "body": "<p><code>sunday</code> is <code>Time</code> class not <code>Date</code>. Try to parse it into date like this.</p>\n\n<pre><code>sunday = Time.now.last_week.sunday.to_date\n</code></pre>\n"}], "owner": {"reputation": 914, "user_id": 5843840, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/58ecdbd6cee1807add0dcbbeb0f22a64?s=128&d=identicon&r=PG&f=1", "display_name": "Jones", "link": "https://stackoverflow.com/users/5843840/jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 42118186, "answer_count": 1, "score": 0, "last_activity_date": 1486571611, "creation_date": 1486569664, "last_edit_date": 1486571611, "question_id": 42117915, "link": "https://stackoverflow.com/questions/42117915/ruby-date-comparison-not-working", "title": "Ruby date comparison not working?", "body": "<p>I'm trying to determine if something happened in the past week. I'm gettign the begining of the week with <code>Time.now.last_week.sunday</code> and trying to compare with the <code>&gt;</code> operator.</p>\n\n<pre><code>sunday = Time.now.last_week.sunday\nputs \"Last Sunday:  \" + sunday.to_s\njson = json[\"objects\"]\nputs \"JSON objects found: \" + json.count.to_s\nputs \"checking date\"\njson.select! do |statement|\n  puts \"\\tObject date: \" + Date.parse(statement[\"statement_date\"]).to_s\n  puts \"\\tSince Sunday? \" + (Date.parse(statement[\"statement_date\"]) &gt; sunday).to_s\n  (Date.parse(statement[\"statement_date\"]) &gt; sunday)\nend\n</code></pre>\n\n<p>The problem I run into is that things happening the day after, are still filtered out:</p>\n\n<pre><code>Last Sunday:  2017-02-05 23:59:59 -0500\nJSON objects found: 10\nchecking date\n    Object date: 2017-02-06\n    Since Sunday? false\n    Object date: 2017-02-02\n    Since Sunday? false\n    Object date: 2017-02-06\n    Since Sunday? false\n    Object date: 2017-02-05\n    Since Sunday? false\n    Object date: 2017-02-01\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "file"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1486588998, "post_id": 42117815, "comment_id": 71415854, "body": "It&#39;s not a good idea to assume something is a bug just because you don&#39;t understand it. <a href=\"http://catb.org/esr/faqs/smart-questions.html#idm46227256017920\" rel=\"nofollow noreferrer\">catb.org/esr/faqs/smart-questions.html#idm46227256017920</a> will help you."}, {"owner": {"reputation": 545, "user_id": 566286, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/S1a9V.jpg?s=128&g=1", "display_name": "Matt Bettinson", "link": "https://stackoverflow.com/users/566286/matt-bettinson"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1486668315, "post_id": 42117815, "comment_id": 71456571, "body": "@theTinMan I meant the behaviour of the code was introducing a bug, I wasn&#39;t saying the Ruby code was a bug."}], "answers": [{"tags": [], "owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "is_accepted": false, "score": 1, "last_activity_date": 1486685724, "last_edit_date": 1486685724, "creation_date": 1486572837, "answer_id": 42119125, "question_id": 42117815, "link": "https://stackoverflow.com/questions/42117815/file-only-not-showing-it-is-empty-after-size-method-is-called/42119125#42119125", "title": "File only not showing it is empty after size method is called", "body": "<p>It's because you've only opened the file for writing, not reading. When you use</p>\n\n<pre><code>file = File.new('output.html', 'w')\n</code></pre>\n\n<p>you open \"output.html\" for writing, and then, as expected you write \"Hey\" to it using </p>\n\n<pre><code>file.write(\"Hey\")\n</code></pre>\n\n<p>If you were to open the file now, it would contain \"Hey\". </p>\n\n<p>Here is where it gets weird. Setting <code>new = file</code> is not needed, because they are references to the same object. When you use <code>File.read(new)</code> you are reading from something that is not readable. You would see this if you ran <code>new.read</code>, because you would get an error. When you run <code>new.size</code> it opens it for reading, possibly to read it to get the size. </p>\n\n<p><code>dup</code>ing it and <code>clone</code>ing it do the same thing. Once it has been opened for reading, you can read from it correctly.</p>\n\n<p>What I do not know is why <code>dup</code> or <code>clone</code> opens it for reading or why when you try to <code>File.read</code> a non-readable file it returns <code>\"\"</code> whereas when you <code>read</code> the file it throws an error.</p>\n\n<p>Here is an ever stranger snippet that reproduced the behavior you created:</p>\n\n<pre><code>output = File.new('output.html', 'w')\noutput.write(\"Hey\")\nputs File.read(output) #=&gt; \"\"\nnew = output.dup\nputs File.read(output) #=&gt; \"Hey\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1486601263, "post_id": 42123843, "comment_id": 71420731, "body": "So does <code>dup</code>ing <code>clone</code>ing and checking file size trigger the buffer to flush? If so, why doesn&#39;t passing it as an argument do the same?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1486669528, "post_id": 42123843, "comment_id": 71457235, "body": "Checking the file size <i>might</i>, because it&#39;ll issue a <code>stat</code> call on the file. The others shouldn&#39;t affect the file at all. <code>dup</code> and <code>clone</code> only deal with the variable, which is very different from the file in the OS buffer or on the disk."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1486672370, "post_id": 42123843, "comment_id": 71458967, "body": "Irb isn&#39;t exactly the same as running code in the Ruby interpreter. What happens when you run it in the interpreter?"}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1486589364, "last_edit_date": 1486589364, "creation_date": 1486588950, "answer_id": 42123843, "question_id": 42117815, "link": "https://stackoverflow.com/questions/42117815/file-only-not-showing-it-is-empty-after-size-method-is-called/42123843#42123843", "title": "File only not showing it is empty after size method is called", "body": "<p>I think you're running afoul of how files are written and flushed to disk.</p>\n\n<p>Writing to a file doesn't guarantee it's immediately written unless the <code>sync</code> flag is set.</p>\n\n<blockquote>\n  <p>When sync mode is true, all output is immediately flushed to the underlying operating system and is not buffered internally.</p>\n</blockquote>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.4.0/IO.html#method-i-sync\" rel=\"nofollow noreferrer\"><code>sync</code></a> and <a href=\"http://ruby-doc.org/core-2.4.0/IO.html#method-i-sync-3D\" rel=\"nofollow noreferrer\"><code>sync=</code></a> for more information.</p>\n\n<p>If <code>sync</code> is false, the file will be written when the intermediate buffer is full, or if something triggers the flush, such as closing the file. It's been a while since I checked, but it <em>might</em> also occur when a new-line is written.</p>\n\n<p>Don't think that setting <code>sync = true</code> is the proper fix. There's a really important reason we use an intermediate buffer: speed. It's much faster to write/read from the buffer and then let the OS determine when the proper time to write to the disk will be. Forcing flushing will slow down your code and can slow down the system if you're writing to the disk a lot. So understand how it works but don't play games with it unless you understand <em>why</em> you need to sync.</p>\n\n<p>When we <code>open</code> a file using Ruby we're strongly encouraged to use the block-form:</p>\n\n<pre><code>File.open('path/to/file', 'w') do |fo|\n  ...\nend\n</code></pre>\n\n<p>The block form automatically closes the file, which would flush it, causing the file to be written to disk.</p>\n\n<p>This isn't a situation that is limited to Ruby, it's just how operating systems work, and the language sitting above it inherits this behavior.</p>\n\n<p>Also, we use the block form because it helps preserve the file handles. Operating systems have a limited number of files that can be open at one time. If you use the non-block form and are not diligent to close the file as soon as you're finished with it, and you are in a loop that opens files, you can eventually crash your code, at which point the interpreter will die and all the open files will be closed automatically. But don't rely on the automatic behavior, because it's good programming practice to close explicitly right away, or to use the block form that does it for us.</p>\n"}], "owner": {"reputation": 545, "user_id": 566286, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/S1a9V.jpg?s=128&g=1", "display_name": "Matt Bettinson", "link": "https://stackoverflow.com/users/566286/matt-bettinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1486685724, "creation_date": 1486569414, "last_edit_date": 1486569860, "question_id": 42117815, "link": "https://stackoverflow.com/questions/42117815/file-only-not-showing-it-is-empty-after-size-method-is-called", "title": "File only not showing it is empty after size method is called", "body": "<p>I have a very strange bug in Ruby/Rails. I'm using byebug to ask what the file contains, which shows nothing. Then I'm asking how big the file is, and then when I read it again it contains something. I am on Mac OS. Here is the output:</p>\n\n<pre><code>(byebug) File.read(@file)\n\"\"\n(byebug) @file.size\n23\n(byebug) File.read(@file)\n\"HTML + CRT goes here...\"\n</code></pre>\n\n<p>Anyone have any ideas?</p>\n\n<p>I've reproduced it into the following Ruby code:</p>\n\n<pre><code>file = File.new('output.html', 'w')\nfile.write(\"Hey\")\nnew = file\nputs File.read(new)\nputs new.size\nputs File.read(new)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 1063, "user_id": 1930504, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/a4UQO.jpg?s=128&g=1", "display_name": "Jack Bracken", "link": "https://stackoverflow.com/users/1930504/jack-bracken"}, "edited": false, "score": 2, "creation_date": 1486569090, "post_id": 42117618, "comment_id": 71403732, "body": "What is the output of gem install eventmachine -v &#39;1.0.8&#39;?"}, {"owner": {"reputation": 82953, "user_id": 608639, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/aPIhh.jpg?s=128&g=1", "display_name": "jww", "link": "https://stackoverflow.com/users/608639/jww"}, "edited": false, "score": 0, "creation_date": 1486569399, "post_id": 42117618, "comment_id": 71403953, "body": "Also see <a href=\"http://stackoverflow.com/q/31880676/608639\">An error occurred while installing eventmachine (1.0.3), and Bundler cannot continue</a>."}], "answers": [{"tags": [], "owner": {"reputation": 339, "user_id": 4312613, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b91730eea305f0fabc415e925de5f921?s=128&d=identicon&r=PG", "display_name": "Kenneth Bregat", "link": "https://stackoverflow.com/users/4312613/kenneth-bregat"}, "is_accepted": false, "score": 6, "last_activity_date": 1486671128, "creation_date": 1486671128, "answer_id": 42145981, "question_id": 42117618, "link": "https://stackoverflow.com/questions/42117618/an-error-occurred-while-installing-eventmachine-with-version-1-0-8/42145981#42145981", "title": "&quot;An error occurred while installing eventmachine&quot; with version 1.0.8", "body": "<p>Create a reference for the OpenSSl gem was the key. I did something like this:</p>\n\n<pre><code>gem install eventmachine -v '1.0.8' -- --with-cppflags=-I/usr/local/opt/openssl/include\n</code></pre>\n\n<p>and finally worked for me.</p>\n\n<p>Thanks @Jack and @Jww for his help.</p>\n"}], "owner": {"reputation": 339, "user_id": 4312613, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/b91730eea305f0fabc415e925de5f921?s=128&d=identicon&r=PG", "display_name": "Kenneth Bregat", "link": "https://stackoverflow.com/users/4312613/kenneth-bregat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 573, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486671128, "creation_date": 1486568856, "last_edit_date": 1486569490, "question_id": 42117618, "link": "https://stackoverflow.com/questions/42117618/an-error-occurred-while-installing-eventmachine-with-version-1-0-8", "title": "&quot;An error occurred while installing eventmachine&quot; with version 1.0.8", "body": "<p>Can someone help me to solve this problem:</p>\n\n<pre><code> An error occurred while installing eventmachine (1.0.8), and Bundler cannot\n    continue.\n    Make sure that `gem install eventmachine -v '1.0.8'` succeeds before bundling.\n</code></pre>\n\n<p>It comes after I do: \"bundle install\" in my environment.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "regex", "ruby-2.3.1"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1486580822, "post_id": 42116636, "comment_id": 71411213, "body": "Why? <code>&#39;a&#39;</code> contains <code>b</code> zero or more times, doesn&#39;t it?"}], "answers": [{"comments": [{"owner": {"reputation": 22034, "user_id": 21699, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1c27bc77c7d5d9506958e3f9164341b7?s=128&d=identicon&r=PG", "display_name": "Tigraine", "link": "https://stackoverflow.com/users/21699/tigraine"}, "edited": false, "score": 1, "creation_date": 1486566921, "post_id": 42116804, "comment_id": 71402199, "body": "A very good resource for testing ruby regexp is <a href=\"http://rubular.com/\" rel=\"nofollow noreferrer\">rubular.com</a>. As you already noted regex return the first match and ab* matches <code>a</code> as well as <code>abb</code>. Also note that regex is also greedy by default so /a*c/ will match <code>aabbcc</code> (annoying when matching braces as you sometimes end up with matching the last brace in your string not the one that actually closes a brace."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 22034, "user_id": 21699, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1c27bc77c7d5d9506958e3f9164341b7?s=128&d=identicon&r=PG", "display_name": "Tigraine", "link": "https://stackoverflow.com/users/21699/tigraine"}, "edited": false, "score": 0, "creation_date": 1486567523, "post_id": 42116804, "comment_id": 71402630, "body": "@Tigraine: For that, you&#39;d need <code>&#47;\\(.*?\\)&#47;</code> or <code>&#47;\\([^\\)]*\\)&#47;</code>"}, {"owner": {"reputation": 584, "user_id": 1026043, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9fce6707e7ce87f5b890f4f492737014?s=128&d=identicon&r=PG", "display_name": "maml", "link": "https://stackoverflow.com/users/1026043/maml"}, "reply_to_user": {"reputation": 22034, "user_id": 21699, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1c27bc77c7d5d9506958e3f9164341b7?s=128&d=identicon&r=PG", "display_name": "Tigraine", "link": "https://stackoverflow.com/users/21699/tigraine"}, "edited": false, "score": 1, "creation_date": 1486570537, "post_id": 42116804, "comment_id": 71404783, "body": "@Tigraine: <code>&quot;aabbcc&quot;[&#47;a*c&#47;]</code> returns <code>c</code>"}, {"owner": {"reputation": 22034, "user_id": 21699, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/1c27bc77c7d5d9506958e3f9164341b7?s=128&d=identicon&r=PG", "display_name": "Tigraine", "link": "https://stackoverflow.com/users/21699/tigraine"}, "edited": false, "score": 0, "creation_date": 1486575976, "post_id": 42116804, "comment_id": 71408387, "body": "ah sorry i meant <code>&#47;a.*c&#47;</code> :) it will match both c not only to the first one."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1486576504, "post_id": 42116804, "comment_id": 71408721, "body": "Please don&#39;t use answers for commenting."}], "tags": [], "owner": {"reputation": 584, "user_id": 1026043, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9fce6707e7ce87f5b890f4f492737014?s=128&d=identicon&r=PG", "display_name": "maml", "link": "https://stackoverflow.com/users/1026043/maml"}, "is_accepted": false, "score": 1, "last_activity_date": 1486566653, "creation_date": 1486566653, "answer_id": 42116804, "question_id": 42116636, "link": "https://stackoverflow.com/questions/42116636/why-does-aabbcc-ab-only-return-a/42116804#42116804", "title": "why does &quot;aabbcc&quot;[/ab*/] only return &quot;a&quot;?", "body": "<p>Ok so I just learned it's because the left-most match wins and since there's a single <code>a</code> that matches before the <code>abb</code> that's what's returned.</p>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 4, "last_activity_date": 1486567625, "creation_date": 1486567625, "answer_id": 42117137, "question_id": 42116636, "link": "https://stackoverflow.com/questions/42116636/why-does-aabbcc-ab-only-return-a/42117137#42117137", "title": "why does &quot;aabbcc&quot;[/ab*/] only return &quot;a&quot;?", "body": "<p>The regex returns exactly what you asked : the first occurence of 1 <code>a</code> followed by 0 or more <code>b</code>.</p>\n\n<p>If you want all the non-overlapping occurences, you could use <a href=\"http://ruby-doc.org/core-2.4.0/String.html#method-i-scan\" rel=\"nofollow noreferrer\"><code>scan</code></a> :</p>\n\n<pre><code>\"aabbcc\".scan(/ab*/)\n#=&gt; [\"a\", \"abb\"]\n</code></pre>\n\n<p>If you want to have a least 1 <code>b</code>, you could use <code>b+</code> :</p>\n\n<pre><code>\"aabbcc\"[/ab+/]\n#=&gt; \"abb\"\n</code></pre>\n"}], "owner": {"reputation": 584, "user_id": 1026043, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9fce6707e7ce87f5b890f4f492737014?s=128&d=identicon&r=PG", "display_name": "maml", "link": "https://stackoverflow.com/users/1026043/maml"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1486567851, "creation_date": 1486566226, "last_edit_date": 1486567551, "question_id": 42116636, "link": "https://stackoverflow.com/questions/42116636/why-does-aabbcc-ab-only-return-a", "title": "why does &quot;aabbcc&quot;[/ab*/] only return &quot;a&quot;?", "body": "<p>If the quantifier <code>*</code> represents, 'zero or more times,' it seems like <code>\"aabbcc\"[/ab*/]</code> should return <code>\"abb\"</code> but it returns only <code>\"a\"</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "http-headers", "response-headers"], "comments": [{"owner": {"reputation": 539, "user_id": 3693398, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/100000471452957/picture?type=large", "display_name": "teddybear", "link": "https://stackoverflow.com/users/3693398/teddybear"}, "edited": false, "score": 0, "creation_date": 1486568790, "post_id": 42116611, "comment_id": 71403491, "body": "Is that the same response from <code>request.headers</code>?"}, {"owner": {"reputation": 69, "user_id": 7506839, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b30b2d4fe58f2bc7269258dc7c136cb3?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kanafotskiy", "link": "https://stackoverflow.com/users/7506839/roman-kanafotskiy"}, "reply_to_user": {"reputation": 539, "user_id": 3693398, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/100000471452957/picture?type=large", "display_name": "teddybear", "link": "https://stackoverflow.com/users/3693398/teddybear"}, "edited": false, "score": 0, "creation_date": 1486569271, "post_id": 42116611, "comment_id": 71403860, "body": "yup, it&#39;s the output of <code>request.headers</code>. And if I access access-token like this <code>request.headers[&quot;Access-Token&quot;]</code> it returns nil"}, {"owner": {"reputation": 539, "user_id": 3693398, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/100000471452957/picture?type=large", "display_name": "teddybear", "link": "https://stackoverflow.com/users/3693398/teddybear"}, "edited": false, "score": 0, "creation_date": 1486569721, "post_id": 42116611, "comment_id": 71404190, "body": "Try <code>request.header[&#39;access-token&#39;]</code>"}, {"owner": {"reputation": 69, "user_id": 7506839, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b30b2d4fe58f2bc7269258dc7c136cb3?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kanafotskiy", "link": "https://stackoverflow.com/users/7506839/roman-kanafotskiy"}, "reply_to_user": {"reputation": 539, "user_id": 3693398, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/100000471452957/picture?type=large", "display_name": "teddybear", "link": "https://stackoverflow.com/users/3693398/teddybear"}, "edited": false, "score": 0, "creation_date": 1486629320, "post_id": 42116611, "comment_id": 71430230, "body": "@user3693398 The commenter below suggested the same. Didn&#39;t work. Someone suggested this &quot; \t \t Ok now the hard part is finding how deeply it is nested. At the very least it is @header[:access_token] however if that doesn&#39;t work you have to find out how many hashes/arrays it is inside and basically work your way to it. For instance it could be response[:something][:another_array][:another_hash][:header]&zwnj;&#8203;\u200c\u200b[:access_token]&quot;. But there&#39;s almost no way to know how deeply it&#39;s nested"}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 7506839, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b30b2d4fe58f2bc7269258dc7c136cb3?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kanafotskiy", "link": "https://stackoverflow.com/users/7506839/roman-kanafotskiy"}, "edited": false, "score": 0, "creation_date": 1486569308, "post_id": 42117558, "comment_id": 71403885, "body": "oh I wish it was that simple. Tried both - no luck"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 69, "user_id": 7506839, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b30b2d4fe58f2bc7269258dc7c136cb3?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kanafotskiy", "link": "https://stackoverflow.com/users/7506839/roman-kanafotskiy"}, "edited": false, "score": 0, "creation_date": 1486569413, "post_id": 42117558, "comment_id": 71403969, "body": "It&#39;s strange. I do the same way in an app I&#39;m building and it works."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 0, "last_activity_date": 1486568709, "creation_date": 1486568709, "answer_id": 42117558, "question_id": 42116611, "link": "https://stackoverflow.com/questions/42116611/rails-move-info-from-headers-to-body/42117558#42117558", "title": "Rails move info from Headers to Body", "body": "<p>It seems just wrong the case of your key. This should work</p>\n\n<pre><code>request.headers[\"access-token\"]\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 7506839, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b30b2d4fe58f2bc7269258dc7c136cb3?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kanafotskiy", "link": "https://stackoverflow.com/users/7506839/roman-kanafotskiy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486568709, "creation_date": 1486566146, "question_id": 42116611, "link": "https://stackoverflow.com/questions/42116611/rails-move-info-from-headers-to-body", "title": "Rails move info from Headers to Body", "body": "<p>I tried to use Rails method <code>request.headers[\"Access-Token\"]</code> to get Access-Token from Headers and move it to Body. But the problem is that headers' output looks like this:</p>\n\n<p><a href=\"https://pp.vk.me/c638121/v638121746/239b4/PF4NFzGBTio.jpg\" rel=\"nofollow noreferrer\">https://pp.vk.me/c638121/v638121746/239b4/PF4NFzGBTio.jpg</a>  </p>\n\n<p>Is there any way to access <code>Access-Token</code> from headers?</p>\n"}, {"tags": ["ruby", "syntax-error", "atom-editor"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1486566019, "post_id": 42116494, "comment_id": 71401545, "body": "<a href=\"http://blade.nagaokaut.ac.jp/ruby/ruby-talk/2710\" rel=\"nofollow noreferrer\">blade.nagaokaut.ac.jp/ruby/ruby-talk/2710</a>"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1486566031, "post_id": 42116494, "comment_id": 71401553, "body": "<a href=\"http://stackoverflow.com/q/3660563/438992\">stackoverflow.com/q/3660563/438992</a>"}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 3, "last_activity_date": 1486565921, "creation_date": 1486565921, "answer_id": 42116516, "question_id": 42116494, "link": "https://stackoverflow.com/questions/42116494/syntax-error-unexpected-keyword-else-ruby/42116516#42116516", "title": "syntax error-unexpected keyword else ruby", "body": "<p><code>++</code> operator doesn't exist in Ruby. Go for</p>\n\n<pre><code>num += 1\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 5936908, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06e38fba4d5df924cc4130b092175cd0?s=128&d=identicon&r=PG&f=1", "display_name": "davidemarchiori", "link": "https://stackoverflow.com/users/5936908/davidemarchiori"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 810, "favorite_count": 0, "accepted_answer_id": 42116516, "answer_count": 1, "score": -1, "last_activity_date": 1486565921, "creation_date": 1486565869, "question_id": 42116494, "link": "https://stackoverflow.com/questions/42116494/syntax-error-unexpected-keyword-else-ruby", "title": "syntax error-unexpected keyword else ruby", "body": "<p>i am getting this error while trying to execute this piece of code</p>\n\n<pre><code>def self.encode(string)\n    v=string.split(\"\")\n    num=0\n    tmp=v[0]\n    s=\"\"\n    for i in (0..v.count-1)\n      if v[i]==tmp\n        num++\n      else\n        s &lt;&lt; num\n        s&lt;&lt;v[i-1]\n        tmp=v[i]\n        num=1\n      end\n    end\n    return s\n  end\n</code></pre>\n\n<p>the error is run-length-encoding.rb:10: syntax error, unexpected keyword_else</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "couchbase"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1486564356, "post_id": 42115446, "comment_id": 71400238, "body": "I haven&#39;t used couchbase but the whole idea with ActiveRecord is that the ORM handles database connections and its done on the model level - not in controllers. You could use a global variable but it just seems like a huge anti-pattern."}, {"owner": {"reputation": 1848, "user_id": 657644, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/28f86578bc070ea2fbde98810ddf63d0?s=128&d=identicon&r=PG", "display_name": "PascalTurbo", "link": "https://stackoverflow.com/users/657644/pascalturbo"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1486567456, "post_id": 42115446, "comment_id": 71402577, "body": "Than let&#39;s see couchbase like a service. In my case it&#39;s more used like a service then like a database. For example think about a services that takes the name of a city and returns geographical information. Where would you place such a service?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1486567817, "post_id": 42115446, "comment_id": 71402814, "body": "In rails you don&#39;t really have the whole &quot;services&quot; layer like in Laravel or Symfony. There are plenty of gems which provide it but its not cannon - DHH is pretty opposed to dependency injection."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1486581984, "post_id": 42115446, "comment_id": 71411829, "body": "models are one place to write globally-available code, but not the only. You can write any file you like in <code>app&#47;models</code> or <code>config&#47;initializers</code> and it will be autoloaded - it doesn&#39;t have to be ActiveRecord. There are guides to add other paths, like lib/ or services/ , to autoload as well."}], "owner": {"reputation": 1848, "user_id": 657644, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/28f86578bc070ea2fbde98810ddf63d0?s=128&d=identicon&r=PG", "display_name": "PascalTurbo", "link": "https://stackoverflow.com/users/657644/pascalturbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1486563160, "creation_date": 1486563160, "question_id": 42115446, "link": "https://stackoverflow.com/questions/42115446/loading-my-own-service-in-rails", "title": "Loading my own service in rails", "body": "<p>What's the best solution for providing a global couchbase connection in my rails application.\nI'm also using ActiveRecord so I don't need <a href=\"https://github.com/couchbase/couchbase-ruby-model\" rel=\"nofollow noreferrer\">couchbase-ruby-model</a></p>\n\n<p>The couchbase connection should be accessible from all my controllers. I wan't to avoid creating a new connection everytime a couchbase connection is needed. </p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 1, "last_activity_date": 1486562828, "creation_date": 1486562828, "answer_id": 42115321, "question_id": 42115017, "link": "https://stackoverflow.com/questions/42115017/group-list-of-objects-ar-relation-by-user-id/42115321#42115321", "title": "Group list of objects/AR relation by user_id", "body": "<p>Try this one</p>\n\n<pre><code>where(app_user_id: user_id).\n  where('...').\n  select('app_user_id, agreement_id').\n  map { |a| [a.app_user_id, a.agreement_id] }.\n  group_by(&amp;:first)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21539, "user_id": 169277, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/66e2fa2e7f25d50d67a5a6acde7a5716?s=128&d=identicon&r=PG", "display_name": "ant", "link": "https://stackoverflow.com/users/169277/ant"}, "is_accepted": true, "score": 1, "last_activity_date": 1486563223, "creation_date": 1486563223, "answer_id": 42115462, "question_id": 42115017, "link": "https://stackoverflow.com/questions/42115017/group-list-of-objects-ar-relation-by-user-id/42115462#42115462", "title": "Group list of objects/AR relation by user_id", "body": "<p>This might work :</p>\n\n<pre><code>where(app_user_id: user_id)\n  .where('...')\n  .select('app_user_id, agreement_id')\n  .group_by(&amp;:app_user_id).map{|k,v| Hash[k, v.map(&amp;:agreement_id)]}\n</code></pre>\n"}], "owner": {"reputation": 493, "user_id": 3616806, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/5e239b7b5f6e0938a4393e0a639b0aa5?s=128&d=identicon&r=PG&f=1", "display_name": "Remember_me", "link": "https://stackoverflow.com/users/3616806/remember-me"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "accepted_answer_id": 42115462, "answer_count": 2, "score": 0, "last_activity_date": 1486563223, "creation_date": 1486562021, "question_id": 42115017, "link": "https://stackoverflow.com/questions/42115017/group-list-of-objects-ar-relation-by-user-id", "title": "Group list of objects/AR relation by user_id", "body": "<p>I have a list of objects which is actually AR Relation. My object has these fields :</p>\n\n<pre><code>{\n  agreement_id: 1,\n  app_user_id: 1,\n  agency_name: 'Small business 1'\n  ..etc..\n},\n{\n  agreement_id: 2,\n  app_user_id: 1,\n  agency_name: 'Small business 2'\n  ..etc..\n}\n</code></pre>\n\n<p>I m representing my object as a Hash for easier understanding. I need to map my list of objects to format like this :</p>\n\n<pre><code>{\n  1 =&gt; [1,2]\n}\n</code></pre>\n\n<p>This represents a list of agreement_ids grouped by the user. I always know which user I m grouping on. Here is what I've tried so far :</p>\n\n<pre><code>where(app_user_id: user_id).where('...').select('app_user_id, agreement_id').group_by(&amp;:app_user_id)\n</code></pre>\n\n<p>This gives me the structure what I want but not exactly the data that I want, here is an output of this :</p>\n\n<pre><code>{1=&gt;\n  [#&lt;Agreement:0x6340fdbb agreement_id: 1, app_user_id: 1&gt;,\n   #&lt;Agreement:0x91bd4dd agreement_id: 2, app_user_id: 1&gt;]\n }\n</code></pre>\n\n<p>I've also thought I was going to be able to do this with <code>map</code> method, and here is what I tried :</p>\n\n<pre><code>where(app_user_id: user_id).where('....').select('app_user_id, agreement_id').map do |ag|\n  { ag.app_user_id =&gt; ag.agreement_id } \nend.reduce(&amp;:merge) \n</code></pre>\n\n<p>But it only produces the mapping with the last agreement_id like this :</p>\n\n<pre><code>{1=&gt;2}\n</code></pre>\n\n<p>I've tried some other things not worth mentioning. Can anyone suggest a way that would make this work?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundler", "redmine", "gemfile"], "comments": [{"owner": {"reputation": 258, "user_id": 5372350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bxH_xBs-r9s/AAAAAAAAAAI/AAAAAAAAABg/UYFtw0nAYW8/photo.jpg?sz=128", "display_name": "Sonu Singh", "link": "https://stackoverflow.com/users/5372350/sonu-singh"}, "edited": false, "score": 0, "creation_date": 1486558238, "post_id": 42113605, "comment_id": 71395825, "body": "Are you using rvm?"}, {"owner": {"reputation": 2453, "user_id": 800965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fMjbN.jpg?s=128&g=1", "display_name": "Aleksandar Pavi\u0107", "link": "https://stackoverflow.com/users/800965/aleksandar-pavi%c4%87"}, "reply_to_user": {"reputation": 258, "user_id": 5372350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bxH_xBs-r9s/AAAAAAAAAAI/AAAAAAAAABg/UYFtw0nAYW8/photo.jpg?sz=128", "display_name": "Sonu Singh", "link": "https://stackoverflow.com/users/5372350/sonu-singh"}, "edited": false, "score": 0, "creation_date": 1486558320, "post_id": 42113605, "comment_id": 71395877, "body": "Yes, you can conclude that based on /.rvm/ listed in post."}, {"owner": {"reputation": 258, "user_id": 5372350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bxH_xBs-r9s/AAAAAAAAAAI/AAAAAAAAABg/UYFtw0nAYW8/photo.jpg?sz=128", "display_name": "Sonu Singh", "link": "https://stackoverflow.com/users/5372350/sonu-singh"}, "edited": false, "score": 0, "creation_date": 1486558501, "post_id": 42113605, "comment_id": 71395993, "body": "can run this command &quot;rvm list gemsets&quot; and paste output?"}, {"owner": {"reputation": 2453, "user_id": 800965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fMjbN.jpg?s=128&g=1", "display_name": "Aleksandar Pavi\u0107", "link": "https://stackoverflow.com/users/800965/aleksandar-pavi%c4%87"}, "reply_to_user": {"reputation": 258, "user_id": 5372350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bxH_xBs-r9s/AAAAAAAAAAI/AAAAAAAAABg/UYFtw0nAYW8/photo.jpg?sz=128", "display_name": "Sonu Singh", "link": "https://stackoverflow.com/users/5372350/sonu-singh"}, "edited": false, "score": 0, "creation_date": 1486558672, "post_id": 42113605, "comment_id": 71396102, "body": "I&#39;ve edited my question, added rvm list gemsets"}, {"owner": {"reputation": 258, "user_id": 5372350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bxH_xBs-r9s/AAAAAAAAAAI/AAAAAAAAABg/UYFtw0nAYW8/photo.jpg?sz=128", "display_name": "Sonu Singh", "link": "https://stackoverflow.com/users/5372350/sonu-singh"}, "edited": false, "score": 0, "creation_date": 1486558801, "post_id": 42113605, "comment_id": 71396201, "body": "now it&#39;s working for you?"}, {"owner": {"reputation": 2453, "user_id": 800965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fMjbN.jpg?s=128&g=1", "display_name": "Aleksandar Pavi\u0107", "link": "https://stackoverflow.com/users/800965/aleksandar-pavi%c4%87"}, "reply_to_user": {"reputation": 258, "user_id": 5372350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bxH_xBs-r9s/AAAAAAAAAAI/AAAAAAAAABg/UYFtw0nAYW8/photo.jpg?sz=128", "display_name": "Sonu Singh", "link": "https://stackoverflow.com/users/5372350/sonu-singh"}, "edited": false, "score": 0, "creation_date": 1486558873, "post_id": 42113605, "comment_id": 71396242, "body": "Not working I didn&#39;t do anything except  rvm list gemset"}, {"owner": {"reputation": 258, "user_id": 5372350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bxH_xBs-r9s/AAAAAAAAAAI/AAAAAAAAABg/UYFtw0nAYW8/photo.jpg?sz=128", "display_name": "Sonu Singh", "link": "https://stackoverflow.com/users/5372350/sonu-singh"}, "edited": false, "score": 0, "creation_date": 1486559804, "post_id": 42113605, "comment_id": 71396872, "body": "Man, No need to add this rvm list gemsets just run this command on your console and paste the output here"}, {"owner": {"reputation": 2453, "user_id": 800965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fMjbN.jpg?s=128&g=1", "display_name": "Aleksandar Pavi\u0107", "link": "https://stackoverflow.com/users/800965/aleksandar-pavi%c4%87"}, "reply_to_user": {"reputation": 258, "user_id": 5372350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bxH_xBs-r9s/AAAAAAAAAAI/AAAAAAAAABg/UYFtw0nAYW8/photo.jpg?sz=128", "display_name": "Sonu Singh", "link": "https://stackoverflow.com/users/5372350/sonu-singh"}, "edited": false, "score": 0, "creation_date": 1486559937, "post_id": 42113605, "comment_id": 71396975, "body": "rvm list gemsets  rvm gemsets  =&gt; ruby-2.3.3 [ x86_64 ]    ruby-2.3.3@global [ x86_64 ]"}], "answers": [{"tags": [], "owner": {"reputation": 2453, "user_id": 800965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fMjbN.jpg?s=128&g=1", "display_name": "Aleksandar Pavi\u0107", "link": "https://stackoverflow.com/users/800965/aleksandar-pavi%c4%87"}, "is_accepted": true, "score": 1, "last_activity_date": 1486560265, "creation_date": 1486560265, "answer_id": 42114380, "question_id": 42113605, "link": "https://stackoverflow.com/questions/42113605/redmine-keeps-asking-to-run-bundle-install/42114380#42114380", "title": "Redmine keeps asking to run bundle install", "body": "<p>This is what eventually fixed my problem, thanks for atombender's answer here:\n<a href=\"https://github.com/bundler/bundler/issues/5068#issuecomment-259580704\" rel=\"nofollow noreferrer\">https://github.com/bundler/bundler/issues/5068#issuecomment-259580704</a> </p>\n\n<p>I've performed:</p>\n\n<pre><code>bundle install --deployment\n</code></pre>\n"}], "owner": {"reputation": 2453, "user_id": 800965, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/fMjbN.jpg?s=128&g=1", "display_name": "Aleksandar Pavi\u0107", "link": "https://stackoverflow.com/users/800965/aleksandar-pavi%c4%87"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 527, "favorite_count": 0, "accepted_answer_id": 42114380, "answer_count": 1, "score": 1, "last_activity_date": 1508918384, "creation_date": 1486558187, "last_edit_date": 1508918384, "question_id": 42113605, "link": "https://stackoverflow.com/questions/42113605/redmine-keeps-asking-to-run-bundle-install", "title": "Redmine keeps asking to run bundle install", "body": "<p>I'm performing <strong>bundle install</strong> of Redmine on a server in China, and I have replaced <a href=\"https://rubygems.org\" rel=\"nofollow noreferrer\">https://rubygems.org</a> with <a href=\"https://gems.ruby-china.org/\" rel=\"nofollow noreferrer\">https://gems.ruby-china.org/</a> both in gemfile and mirror as suggested like this:</p>\n\n<pre><code>gem sources --add https://gems.ruby-china.org/ --remove https://rubygems.org/\n</code></pre>\n\n<p>And also in my Gemfile, so it looks like this:   </p>\n\n<pre><code>#source 'https://rubygems.org'\nsource 'https://gems.ruby-china.org/'\n</code></pre>\n\n<p>But after running <strong>bundle install</strong> which is reinstall actually I'm getting message below:</p>\n\n<blockquote>\n  <p>Your bundle is locked to json (1.8.6), but that version could not be\n  found in any of the sources listed in your Gemfile. If you haven't\n  changed sources, that means the author of json (1.8.6) has removed it.\n  You'll need to update your bundle to a different version of json\n  (1.8.6) that hasn't been removed in order to install.\n  (Bundler::GemNotFound)</p>\n</blockquote>\n\n<p>While I can confirm that 1.8.6 is installed like this:</p>\n\n<pre><code>gem list\n...\njson (1.8.6, 1.8.3)\n</code></pre>\n\n<p>And like this:</p>\n\n<pre><code>bundle show json\n/home/redminedev/.rvm/gems/ruby-2.3.3/gems/json-1.8.6\n</code></pre>\n\n<p>This is the listing of rvm list gemsets:</p>\n\n<pre><code>rvm list gemsets\n\nrvm gemsets\n\n=&gt; ruby-2.3.3 [ x86_64 ]\n   ruby-2.3.3@global [ x86_64 ]\n</code></pre>\n\n<p>I tried deleting .bundle directory, deleting gemfile, purging and reinstalling all gems... Nothing worked. Any suggestions?</p>\n"}, {"tags": ["json", "ruby", "string", "elasticsearch", "logstash"], "comments": [{"owner": {"reputation": 16219, "user_id": 2785358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JegPt.jpg?s=128&g=1", "display_name": "Alcanzar", "link": "https://stackoverflow.com/users/2785358/alcanzar"}, "edited": false, "score": 1, "creation_date": 1486561820, "post_id": 42113589, "comment_id": 71398342, "body": "it&#39;s not quite clear what you are asking.  Are you asking to see &quot;request&quot; equal to a string version of that json object?"}, {"owner": {"reputation": 15576, "user_id": 677561, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/95077e3dc8c640d554cfa97da3dc6131?s=128&d=identicon&r=PG&f=1", "display_name": "Alain Collins", "link": "https://stackoverflow.com/users/677561/alain-collins"}, "edited": false, "score": 0, "creation_date": 1486565319, "post_id": 42113589, "comment_id": 71401011, "body": "Logstash doesn&#39;t do very much that you don&#39;t ask it to do.  Including the basics of your config in your question would help.  Also, defining what you mean by &quot;parsing&quot; would clarify the question.  Also, are you looking at elasticsearch itself, or using kibana (which represents things its own way sometimes)."}, {"owner": {"reputation": 65, "user_id": 6406513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8de1cd6174cd35533f70c80cd27ee8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Stan Marsh", "link": "https://stackoverflow.com/users/6406513/stan-marsh"}, "reply_to_user": {"reputation": 16219, "user_id": 2785358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JegPt.jpg?s=128&g=1", "display_name": "Alcanzar", "link": "https://stackoverflow.com/users/2785358/alcanzar"}, "edited": false, "score": 0, "creation_date": 1486565943, "post_id": 42113589, "comment_id": 71401497, "body": "@Alcanzar, yes, i think, that json-value of field &quot;request&quot; ins string will be enough for me"}, {"owner": {"reputation": 65, "user_id": 6406513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8de1cd6174cd35533f70c80cd27ee8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Stan Marsh", "link": "https://stackoverflow.com/users/6406513/stan-marsh"}, "reply_to_user": {"reputation": 15576, "user_id": 677561, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/95077e3dc8c640d554cfa97da3dc6131?s=128&d=identicon&r=PG&f=1", "display_name": "Alain Collins", "link": "https://stackoverflow.com/users/677561/alain-collins"}, "edited": false, "score": 0, "creation_date": 1486566244, "post_id": 42113589, "comment_id": 71401705, "body": "@Alain Collins , i&#39;ve add my logstash template file. About &quot;parsing&quot; - just see the string from logstash.log (updated the topic)"}, {"owner": {"reputation": 15576, "user_id": 677561, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/95077e3dc8c640d554cfa97da3dc6131?s=128&d=identicon&r=PG&f=1", "display_name": "Alain Collins", "link": "https://stackoverflow.com/users/677561/alain-collins"}, "edited": false, "score": 0, "creation_date": 1486622741, "post_id": 42113589, "comment_id": 71426949, "body": "There&#39;s a lot going on here.  The part of your config that you posted has nothing to do with the parsing of the data you&#39;re asking about (and is probably better solved with mutate-&gt;gsub anyway).  The error you&#39;re getting from elasticsearch is because logstash is sending json into your string field.  Can you share any portion of your config that affects the &quot;request&quot; field (perhaps your input stanza has a json codec, or you have a json filter, etc)."}, {"owner": {"reputation": 65, "user_id": 6406513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8de1cd6174cd35533f70c80cd27ee8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Stan Marsh", "link": "https://stackoverflow.com/users/6406513/stan-marsh"}, "reply_to_user": {"reputation": 15576, "user_id": 677561, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/95077e3dc8c640d554cfa97da3dc6131?s=128&d=identicon&r=PG&f=1", "display_name": "Alain Collins", "link": "https://stackoverflow.com/users/677561/alain-collins"}, "edited": false, "score": 0, "creation_date": 1486647119, "post_id": 42113589, "comment_id": 71442297, "body": "@Alain Collins, i&#39;ve added my full configs. Is there any problem?"}, {"owner": {"reputation": 15576, "user_id": 677561, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/95077e3dc8c640d554cfa97da3dc6131?s=128&d=identicon&r=PG&f=1", "display_name": "Alain Collins", "link": "https://stackoverflow.com/users/677561/alain-collins"}, "reply_to_user": {"reputation": 16219, "user_id": 2785358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JegPt.jpg?s=128&g=1", "display_name": "Alcanzar", "link": "https://stackoverflow.com/users/2785358/alcanzar"}, "edited": false, "score": 0, "creation_date": 1486659003, "post_id": 42113589, "comment_id": 71450832, "body": "The key to your config is that you&#39;re using the json filter, which will treat your message as json and make all the fields you&#39;re seeing.  There isn&#39;t a good way to <i>prevent</i> that, but @Alcanzar shows you a way to <i>reverse</i> it."}], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 6406513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8de1cd6174cd35533f70c80cd27ee8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Stan Marsh", "link": "https://stackoverflow.com/users/6406513/stan-marsh"}, "edited": false, "score": 0, "creation_date": 1486565695, "post_id": 42115016, "comment_id": 71401300, "body": "Thanks for your response, but i&#39;ve already tried using &#39;not_analyzed&#39; and not to specify config for this field in ****.template file... there is still the same problem (updated the topic)"}], "tags": [], "owner": {"reputation": 912, "user_id": 2710302, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7ef75e2c9bb7830c76c8328743c6144?s=128&d=identicon&r=PG", "display_name": "christinabo", "link": "https://stackoverflow.com/users/2710302/christinabo"}, "is_accepted": false, "score": 0, "last_activity_date": 1486562021, "creation_date": 1486562021, "answer_id": 42115016, "question_id": 42113589, "link": "https://stackoverflow.com/questions/42113589/how-not-to-parse-some-fields-by-logstash/42115016#42115016", "title": "How not to parse some fields by logstash?", "body": "<p>ElasticSearch analyzes the field by default.\nIf what you need is just not to analyze the <code>request</code> field, change how this is indexed by setting <code>\"index\": \"not-analyzed\"</code> in the mapping of the field.</p>\n\n<p>More info from the documentation <a href=\"https://www.elastic.co/guide/en/elasticsearch/guide/master/mapping-intro.html#_index_2\" rel=\"nofollow noreferrer\">here</a></p>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 6406513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8de1cd6174cd35533f70c80cd27ee8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Stan Marsh", "link": "https://stackoverflow.com/users/6406513/stan-marsh"}, "edited": false, "score": 0, "creation_date": 1486566766, "post_id": 42116594, "comment_id": 71402076, "body": "I updated the topic - added part of my config file. How can i add what you&#39;ve advised my into this config?"}, {"owner": {"reputation": 16219, "user_id": 2785358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JegPt.jpg?s=128&g=1", "display_name": "Alcanzar", "link": "https://stackoverflow.com/users/2785358/alcanzar"}, "reply_to_user": {"reputation": 65, "user_id": 6406513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8de1cd6174cd35533f70c80cd27ee8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Stan Marsh", "link": "https://stackoverflow.com/users/6406513/stan-marsh"}, "edited": false, "score": 0, "creation_date": 1486566875, "post_id": 42116594, "comment_id": 71402159, "body": "you&#39;d just add it as another filter after the existing <code>ruby {}</code> filter you have"}, {"owner": {"reputation": 65, "user_id": 6406513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8de1cd6174cd35533f70c80cd27ee8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Stan Marsh", "link": "https://stackoverflow.com/users/6406513/stan-marsh"}, "edited": false, "score": 0, "creation_date": 1486567443, "post_id": 42116594, "comment_id": 71402562, "body": "could you please show it? I&#39;ve added it as an another filter{} with ruby{} after the first one and got - Configuration error. Not restarting. Re-run with configtest parameter for details"}, {"owner": {"reputation": 16219, "user_id": 2785358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JegPt.jpg?s=128&g=1", "display_name": "Alcanzar", "link": "https://stackoverflow.com/users/2785358/alcanzar"}, "reply_to_user": {"reputation": 65, "user_id": 6406513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8de1cd6174cd35533f70c80cd27ee8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Stan Marsh", "link": "https://stackoverflow.com/users/6406513/stan-marsh"}, "edited": false, "score": 0, "creation_date": 1486568118, "post_id": 42116594, "comment_id": 71403014, "body": "updated my answer because it wasn&#39;t working in logstash 5.1 when I tested it."}, {"owner": {"reputation": 65, "user_id": 6406513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8de1cd6174cd35533f70c80cd27ee8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Stan Marsh", "link": "https://stackoverflow.com/users/6406513/stan-marsh"}, "edited": false, "score": 0, "creation_date": 1486569282, "post_id": 42116594, "comment_id": 71403873, "body": "i&#39;ve updated my config file, but received the same result as in topic...("}, {"owner": {"reputation": 16219, "user_id": 2785358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JegPt.jpg?s=128&g=1", "display_name": "Alcanzar", "link": "https://stackoverflow.com/users/2785358/alcanzar"}, "reply_to_user": {"reputation": 65, "user_id": 6406513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8de1cd6174cd35533f70c80cd27ee8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Stan Marsh", "link": "https://stackoverflow.com/users/6406513/stan-marsh"}, "edited": false, "score": 0, "creation_date": 1486569588, "post_id": 42116594, "comment_id": 71404096, "body": "it should be working.  The error you are getting from elasticsearch indicates it didn&#39;t replace the field."}, {"owner": {"reputation": 65, "user_id": 6406513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8de1cd6174cd35533f70c80cd27ee8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Stan Marsh", "link": "https://stackoverflow.com/users/6406513/stan-marsh"}, "edited": false, "score": 0, "creation_date": 1486641754, "post_id": 42116594, "comment_id": 71438463, "body": "i&#39;ve updated the topic adding my full configs.. could you please check it?"}, {"owner": {"reputation": 16219, "user_id": 2785358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JegPt.jpg?s=128&g=1", "display_name": "Alcanzar", "link": "https://stackoverflow.com/users/2785358/alcanzar"}, "reply_to_user": {"reputation": 65, "user_id": 6406513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8de1cd6174cd35533f70c80cd27ee8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Stan Marsh", "link": "https://stackoverflow.com/users/6406513/stan-marsh"}, "edited": false, "score": 0, "creation_date": 1486651400, "post_id": 42116594, "comment_id": 71445337, "body": "Your current problem is not what your originally asked for, so you should ask another question"}, {"owner": {"reputation": 65, "user_id": 6406513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8de1cd6174cd35533f70c80cd27ee8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Stan Marsh", "link": "https://stackoverflow.com/users/6406513/stan-marsh"}, "edited": false, "score": 0, "creation_date": 1486652916, "post_id": 42116594, "comment_id": 71446465, "body": "now i understand it. Can you help with original question - how to prevent parsing a field if its value is a json?"}, {"owner": {"reputation": 16219, "user_id": 2785358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JegPt.jpg?s=128&g=1", "display_name": "Alcanzar", "link": "https://stackoverflow.com/users/2785358/alcanzar"}, "reply_to_user": {"reputation": 65, "user_id": 6406513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8de1cd6174cd35533f70c80cd27ee8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Stan Marsh", "link": "https://stackoverflow.com/users/6406513/stan-marsh"}, "edited": false, "score": 0, "creation_date": 1486652977, "post_id": 42116594, "comment_id": 71446500, "body": "That&#39;s what my answer currently reflects"}], "tags": [], "owner": {"reputation": 16219, "user_id": 2785358, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JegPt.jpg?s=128&g=1", "display_name": "Alcanzar", "link": "https://stackoverflow.com/users/2785358/alcanzar"}, "is_accepted": true, "score": 1, "last_activity_date": 1486651329, "last_edit_date": 1486651329, "creation_date": 1486566101, "answer_id": 42116594, "question_id": 42113589, "link": "https://stackoverflow.com/questions/42113589/how-not-to-parse-some-fields-by-logstash/42116594#42116594", "title": "How not to parse some fields by logstash?", "body": "<p>You should be able to do this with a ruby filter:</p>\n\n<pre><code>filter {\n    ruby {\n        init =&gt; \"require 'socket'\"\n        code =&gt; \"\n           event['host'] = Socket.gethostname.gsub(/\\..*/, '')\n           event['request'] = (event['request'].to_s);\n        \"\n    }\n\n    if \"restapi\" in [tags] {\n        ruby {\n                code =&gt; '\n                    require \"json\"\n                    event.set(\"request\",event.get(\"request\").to_json)'\n        }\n        date {\n                match =&gt; [ \"date_start\", \"yyyy-MM-dd HH:mm:ss\" ]\n                target =&gt; \"date_start\"\n         }\n        date {\n                match =&gt; [ \"date_end\", \"yyyy-MM-dd HH:mm:ss\" ]\n                target =&gt; \"date_end\"\n        }\n        date {\n                match =&gt; [ \"date\", \"yyyy-MM-dd HH:mm:ss\" ]\n                target =&gt; \"date\"\n        }\n    }\n}\n</code></pre>\n\n<p>When testing this with stubbed out stdin/stdout:</p>\n\n<pre><code>input {\n stdin { codec =&gt; json }\n}\n// above filter{} block here\noutput {\n  stdout { codec=&gt;rubydebug}\n}\n</code></pre>\n\n<p>And testing like this:</p>\n\n<pre><code>echo '{ \"startDate\": \"2015-05-27\", \"endDate\": \"2015-05-27\", \"request\" : {\"requestId\":\"123\",\"field2\":1,\"field2\": 2,\"field3\":3} }' | bin/logstash -f test.conf\n</code></pre>\n\n<p>It outputs this:</p>\n\n<pre><code>{\n     \"startDate\" =&gt; \"2015-05-27\",\n       \"endDate\" =&gt; \"2015-05-27\",\n       \"request\" =&gt; \"{\\\"requestId\\\"=&gt;\\\"123\\\", \\\"field2\\\"=&gt;2, \\\"field3\\\"=&gt;3}\",\n      \"@version\" =&gt; \"1\",\n    \"@timestamp\" =&gt; \"2017-02-09T14:37:02.789Z\",\n          \"host\" =&gt; \"xxxx\"\n}\n</code></pre>\n\n<p>So I've answered your original question.  You should ask another question if you can't figure out why your template isn't working.</p>\n"}], "owner": {"reputation": 65, "user_id": 6406513, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8de1cd6174cd35533f70c80cd27ee8d4?s=128&d=identicon&r=PG&f=1", "display_name": "Stan Marsh", "link": "https://stackoverflow.com/users/6406513/stan-marsh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 969, "favorite_count": 1, "accepted_answer_id": 42116594, "answer_count": 2, "score": 1, "last_activity_date": 1496405916, "creation_date": 1486558130, "last_edit_date": 1496405916, "question_id": 42113589, "link": "https://stackoverflow.com/questions/42113589/how-not-to-parse-some-fields-by-logstash", "title": "How not to parse some fields by logstash?", "body": "<p>I have a log-file which looks like this (simplified):   </p>\n\n<pre><code> { \"startDate\": \"2015-05-27\", \"endDate\": \"2015-05-27\", \n    \"request\" : {\"requestId\":\"123\",\"field2\":1,\"field2\": 2,\"field3\":3, ....} }\n</code></pre>\n\n<p>Log-stash tries to <code>parse</code> all fields including field \"request\". But is it possible not to parse this field?<br>\nI want to see the \"request\" field in <code>elastic-search</code> but it shouldn't be parsed.</p>\n\n<p>here is a part of my config file:</p>\n\n<pre><code>input {\n    file {\n        type =&gt; \"json\"\n        path =&gt; [\n                \"/var/log/service/restapi.log\"\n        ]\n        tags =&gt; [\"restapi\"]\n    }\n}\n\nfilter {\n    ruby {\n        init =&gt; \"require 'socket'\"\n        code =&gt; \"\n           event['host'] = Socket.gethostname.gsub(/\\..*/, '')\n           event['request'] = (event['request'].to_s);\n        \"\n    }\n\n    if \"restapi\" in [tags] {\n        json {\n            source =&gt; \"message\"\n        }\n        date {\n                match =&gt; [ \"date_start\", \"yyyy-MM-dd HH:mm:ss\" ]\n                target =&gt; \"date_start\"\n         }\n        date {\n                match =&gt; [ \"date_end\", \"yyyy-MM-dd HH:mm:ss\" ]\n                target =&gt; \"date_end\"\n        }\n        date {\n                match =&gt; [ \"date\", \"yyyy-MM-dd HH:mm:ss\" ]\n                target =&gt; \"date\"\n        }\n    }\n}\noutput {\n    if \"restapi\" in [tags] {\n        elasticsearch {\n            hosts =&gt; [\".......\"]\n            template_name =&gt; \"logs\"\n            template =&gt; \"/etc/logstash/templates/service.json\"\n            template_overwrite =&gt; true\n            index =&gt; \"service-logs-%{+YYYY.MM.dd}\"\n            idle_flush_time =&gt; 20\n            flush_size =&gt; 500\n        }\n    }\n}\n</code></pre>\n\n<p>here is my template file:</p>\n\n<pre><code>{\n  \"template\" : \"service-*\",\n  \"settings\" : {\n    \"index\": {\n            \"refresh_interval\": \"60s\",\n            \"number_of_shards\": 6,\n            \"number_of_replicas\": 2\n        }\n  },\n  \"mappings\" : {\n    \"logs\" : {\n        \"properties\" : {\n        \"@timestamp\" : { \"type\" : \"date\", \"format\" : \"dateOptionalTime\" },\n        \"@version\" : { \"type\" : \"integer\", \"index\" : \"not_analyzed\" },\n        \"message\": { \"type\" : \"string\", \"norms\" : { \"enabled\" : false } },\n        \"method\" : { \"type\" : \"string\", \"index\" : \"not_analyzed\" },\n        \"traffic_source\" : { \"type\" : \"string\", \"index\" : \"not_analyzed\" },\n        \"request_path\" : { \"type\" : \"string\", \"index\" : \"not_analyzed\" },\n        \"status\" : { \"type\" : \"integer\", \"index\" : \"not_analyzed\" },\n        \"host_name\" : { \"type\" : \"string\", \"index\" : \"not_analyzed\" },\n        \"environment\" : { \"type\" : \"string\", \"index\" : \"not_analyzed\" },\n        \"action\" : { \"type\" : \"string\", \"index\" : \"not_analyzed\" },\n        \"request_id\" : { \"type\" : \"string\", \"index\" : \"not_analyzed\" },\n        \"date\" : { \"type\" : \"date\", \"format\" : \"dateOptionalTime\" },\n        \"date_start\" : { \"type\" : \"date\", \"format\" : \"dateOptionalTime\" },\n        \"date_end\" : { \"type\" : \"date\", \"format\" : \"dateOptionalTime\" },\n        \"adnest_type\" : { \"type\" : \"string\", \"index\" : \"not_analyzed\" },\n        \"request\" : { \"type\" : \"string\", \"index\" : \"not_analyzed\" }\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>here is from logstash.log   </p>\n\n<pre><code>response=&gt;{\"create\"=&gt;{\"_index\"=&gt;\"logs-2017.02.08\", \"_type\"=&gt;\"json\", \"_id\"=&gt;\"AVoeNgdhD5iEO87EVF_n\", \"status\" =&gt;400, \"error\"=&gt; \"type\"=&gt;\"mapper_parsing_exception\", \"reason\"=&gt;\"failed to parse [request]\", \"caused_by\"=&gt;{\"type\"=&gt;\"illegal_argument_exception\", \"reason\"=&gt;\"unknown property [requestId]\" }}}}, :level=&gt;:warn}\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 1040, "user_id": 3886951, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/EdCAq.jpg?s=128&g=1", "display_name": "l__flex__l", "link": "https://stackoverflow.com/users/3886951/l-flex-l"}, "edited": false, "score": 2, "creation_date": 1486557812, "post_id": 42113103, "comment_id": 71395538, "body": "Seems like the best answer. If your using ruby2.4 or higher I would use <code>@lines.size.pred.digits.count</code>"}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 5, "last_activity_date": 1486557114, "last_edit_date": 1486557114, "creation_date": 1486556771, "answer_id": 42113103, "question_id": 42112961, "link": "https://stackoverflow.com/questions/42112961/how-to-change-number-of-spaces-depending-on-digits-in-integer/42113103#42113103", "title": "How to change number of spaces depending on digits in integer?", "body": "<p>You are looking for<a href=\"https://ruby-doc.org/core-2.4.0/String.html#method-i-ljust\" rel=\"nofollow noreferrer\"><code>String#ljust</code></a>:</p>\n\n<pre><code>index_size = @lines.size.pred.to_s.size\n\n@lines.each_with_index do |line, index|\n  puts \"##{index.to_s.ljust(index_size)} #{line[:text]}\"\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1486571632, "post_id": 42113152, "comment_id": 71405615, "body": "Clever. It won&#39;t work for huge ids, but it&#39;s probably not a problem."}], "tags": [], "owner": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "is_accepted": false, "score": 2, "last_activity_date": 1486556900, "creation_date": 1486556900, "answer_id": 42113152, "question_id": 42112961, "link": "https://stackoverflow.com/questions/42112961/how-to-change-number-of-spaces-depending-on-digits-in-integer/42113152#42113152", "title": "How to change number of spaces depending on digits in integer?", "body": "<p>you can use tabs:</p>\n\n<pre><code>2.2.4 :001 &gt; class Tabs\n2.2.4 :002?&gt;   def self.do_it\n2.2.4 :003?&gt;     (1..13).each do |number|\n2.2.4 :004 &gt;         puts \"##{number}\\tblah\"\n2.2.4 :005?&gt;       end\n2.2.4 :006?&gt;     end\n2.2.4 :007?&gt;   end\n=&gt; :do_it\n2.2.4 :008 &gt; Tabs.do_it\n#1  blah\n#2  blah\n#3  blah\n#4  blah\n#5  blah\n#6  blah\n#7  blah\n#8  blah\n#9  blah\n#10 blah\n#11 blah\n#12 blah\n#13 blah\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 2, "last_activity_date": 1486562014, "last_edit_date": 1486562014, "creation_date": 1486561355, "answer_id": 42114767, "question_id": 42112961, "link": "https://stackoverflow.com/questions/42112961/how-to-change-number-of-spaces-depending-on-digits-in-integer/42114767#42114767", "title": "How to change number of spaces depending on digits in integer?", "body": "<p>You could also use <a href=\"https://ruby-doc.org/core-2.4.0/Kernel.html#method-i-format\" rel=\"nofollow noreferrer\"><code>format</code></a> with <code>\"%-3d\"</code> :</p>\n\n<ul>\n<li><p><code>-</code> : Left-justify the result of this conversion.</p></li>\n<li><p><code>d</code> : Convert argument as a decimal number.</p></li>\n</ul>\n\n<hr>\n\n<pre><code>n       = 14\nwidth   = (n-1).to_s.size\npattern = \"#%-#{width}d %s\"\n\nn.times do |i|\n  puts format(pattern, i, 'blah')\nend\n</code></pre>\n\n<p>It outputs :</p>\n\n<pre><code>#0  blah\n#1  blah\n#2  blah\n#3  blah\n#4  blah\n#5  blah\n#6  blah\n#7  blah\n#8  blah\n#9  blah\n#10 blah\n#11 blah\n#12 blah\n#13 blah\n</code></pre>\n"}], "owner": {"reputation": 5423, "user_id": 937922, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/VsV8g.png?s=128&g=1", "display_name": "Takkun", "link": "https://stackoverflow.com/users/937922/takkun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 42113103, "answer_count": 3, "score": 1, "last_activity_date": 1486562014, "creation_date": 1486556394, "question_id": 42112961, "link": "https://stackoverflow.com/questions/42112961/how-to-change-number-of-spaces-depending-on-digits-in-integer", "title": "How to change number of spaces depending on digits in integer?", "body": "<p>I'm looking to print out the values in an array with line numbers at the start of each line. I'd like to change the spacing to make sure the values line up vertically regardless of the size of the array.</p>\n\n<pre><code>@lines.each_with_index {|l,i|\n  newtext = l[:text]\n  space = ' ' * @lines.size.to_s.size\n  cur_space = i.to_s.size\n  (1..cur_space).each { space.chop! }\n\n  puts \"\\##{i}#{space} #{newtext}\"\n}\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>#0  blah\n#1  blah\n#2  blah\n#3  blah\n#4  blah\n#5  blah\n#6  blah\n#7  blah\n#8  blah\n#9  blah\n#10 blah\n#11 blah\n#12 blah\n#13 blah\n</code></pre>\n\n<p>This works, but I was wondering if there is a better way to do it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 1228, "user_id": 4497621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d140bf5c97a7ee616b0f21189fa9373?s=128&d=identicon&r=PG&f=1", "display_name": "John Hayes-Reed", "link": "https://stackoverflow.com/users/4497621/john-hayes-reed"}, "is_accepted": false, "score": 3, "last_activity_date": 1486554298, "creation_date": 1486554298, "answer_id": 42112210, "question_id": 42112009, "link": "https://stackoverflow.com/questions/42112009/url-points-to-different-controller/42112210#42112210", "title": "URL points to different controller", "body": "<p>Its because of your first route :</p>\n\n<pre><code>get ':id' =&gt; 'users#show', as: :user_profile\n</code></pre>\n\n<p>This is taking <strong>any</strong> single slash and text path and sending it to <code>users#show</code>. So in the case of categories it is entering the string 'categories' into the :id, parameter and going to your users show method. I suspect you will find the same result with any resources paths you have placed outside your <code>resources :users</code> block.</p>\n\n<p>I would suggest keeping your routes simple and using  </p>\n\n<pre><code>resources :users, only: :show\n</code></pre>\n\n<p>or, if you really want to use that route, i would stick it at the bottom of your routes file so that other resources get checked first, and it is the last processed</p>\n"}], "owner": {"reputation": 1130, "user_id": 4574914, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c27823d944d6c2125057e337c8700b97?s=128&d=identicon&r=PG&f=1", "display_name": "joeyk16", "link": "https://stackoverflow.com/users/4574914/joeyk16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486554298, "creation_date": 1486553704, "question_id": 42112009, "link": "https://stackoverflow.com/questions/42112009/url-points-to-different-controller", "title": "URL points to different controller", "body": "<p>Hello Everoyone when i go to <code>/categories</code> it points to <code>UsersController#show</code>. </p>\n\n<p><strong>It should be going to <code>CategoriesController#index</code></strong></p>\n\n<p>Here is a glimps of my routes.</p>\n\n<pre><code>Rails.application.routes.draw do\n  get ':id' =&gt; 'users#show', as: :user_profile\n\n  resources :users, path: ':username' do\n    collection do\n      resources :outfits \n      resources :cart_items, only: [:create, :index, :destroy]\n      resources :relationships, only: [:create, :destroy]\n      resources :addresses, only: [:new, :create, :edit, :update, :destroy]\n      resources :paypals, except: [:index]\n    end\n  end\n\n  resources :categories\nend\n</code></pre>\n\n<p>Thank you for any help in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "paperclip"], "comments": [{"owner": {"reputation": 1420, "user_id": 5045091, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MAqXn.jpg?s=128&g=1", "display_name": "theterminalguy", "link": "https://stackoverflow.com/users/5045091/theterminalguy"}, "edited": false, "score": 0, "creation_date": 1486572806, "post_id": 42111836, "comment_id": 71406441, "body": "Do you mean instance variable ? You can also modify your question so we can understand you clearly. There are some many things one can infer from your question."}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 0, "last_activity_date": 1486553706, "creation_date": 1486553706, "answer_id": 42112010, "question_id": 42111836, "link": "https://stackoverflow.com/questions/42111836/extract-variables-from-string/42112010#42112010", "title": "extract variables from string", "body": "<p>This looks like an hash. If you have this object in an <code>h</code> variable, you can retrieve the duration in this way</p>\n\n<pre><code>h[:duration]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 961, "user_id": 815334, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3Ky7N.jpg?s=128&g=1", "display_name": "mswiszcz", "link": "https://stackoverflow.com/users/815334/mswiszcz"}, "is_accepted": false, "score": 1, "last_activity_date": 1486569567, "creation_date": 1486569567, "answer_id": 42117877, "question_id": 42111836, "link": "https://stackoverflow.com/questions/42111836/extract-variables-from-string/42117877#42117877", "title": "extract variables from string", "body": "<p>If what you provided is a string then what you are looking for is either </p>\n\n<pre><code>h = your_string.to_h\nh[:duration]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>h = JSON.parse(your_string)\nh[:duration]\n</code></pre>\n"}], "owner": {"reputation": 16, "user_id": 4173419, "user_type": "registered", "profile_image": "https://graph.facebook.com/1134045718/picture?type=large", "display_name": "Ugolino", "link": "https://stackoverflow.com/users/4173419/ugolino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1486569567, "creation_date": 1486553180, "question_id": 42111836, "link": "https://stackoverflow.com/questions/42111836/extract-variables-from-string", "title": "extract variables from string", "body": "<p>I'm using paperclip-av-transcoder gem to upload videos on my rails app. I also have the metadata field on my db as a string automatically genereated by the transcoder with the video information.\nThe string generated has the following format</p>\n\n<pre><code>{:length=&gt;\"0:16:31.52\", :duration=&gt;991.52, :fps=&gt;29, :size=&gt;\"1152x720\", :width=&gt;1152, :height=&gt;720, :aspect=&gt;1.6, :audio_encode=&gt;\"aac (LC) (mp4a / 0x6134706D)\", :audio_bitrate=&gt;\"44100 Hz\", :audio_channels=&gt;\"stereo\"}\n</code></pre>\n\n<p>I would like to get single data from this string like the duration and use it on my view. How can I extract the single variables from this string</p>\n\n<p>many thanks</p>\n"}, {"tags": ["ruby", "jupyter-notebook", "jupyter", "iruby"], "answers": [{"comments": [{"owner": {"reputation": 2360, "user_id": 943075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49fb730b047e149af9197c76ecd24c5b?s=128&d=identicon&r=PG", "display_name": "Cyril", "link": "https://stackoverflow.com/users/943075/cyril"}, "edited": false, "score": 0, "creation_date": 1491430856, "post_id": 43242372, "comment_id": 73555317, "body": "Why not providing the exact code and walkthrough directly inside your answer?"}, {"owner": {"reputation": 81, "user_id": 7823294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fl4gb.png?s=128&g=1", "display_name": "J.Bacon", "link": "https://stackoverflow.com/users/7823294/j-bacon"}, "reply_to_user": {"reputation": 2360, "user_id": 943075, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/49fb730b047e149af9197c76ecd24c5b?s=128&d=identicon&r=PG", "display_name": "Cyril", "link": "https://stackoverflow.com/users/943075/cyril"}, "edited": false, "score": 0, "creation_date": 1491431104, "post_id": 43242372, "comment_id": 73555407, "body": "I wasn&#39;t sure what the proper etiquette was."}], "tags": [], "owner": {"reputation": 81, "user_id": 7823294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fl4gb.png?s=128&g=1", "display_name": "J.Bacon", "link": "https://stackoverflow.com/users/7823294/j-bacon"}, "is_accepted": false, "score": 1, "last_activity_date": 1529336824, "last_edit_date": 1529336824, "creation_date": 1491429652, "answer_id": 43242372, "question_id": 42111591, "link": "https://stackoverflow.com/questions/42111591/iruby-kernel-keeps-getting-killed/43242372#43242372", "title": "iRuby kernel keeps getting killed", "body": "<p>The <a href=\"https://github.com/SciRuby/iruby\" rel=\"nofollow noreferrer\">iRuby documentation at github</a> suggests using Anaconda and setting your Ruby environment to 2.4.1 using rbenv.  I had the same issue when experimenting with the iRuby kernel.  </p>\n\n<p>From the Readme:  </p>\n\n<blockquote>\n  <p><strong>Mac</strong></p>\n  \n  <p>I recommend an installation using Anaconda.</p>\n  \n  <p>After that, run the following commands.  </p>\n\n<pre><code>brew install rbenv automake gmp libtool wget\nrbenv install 2.4.1\nrbenv global 2.4.1  \necho 'eval \"$(rbenv init -)\"' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\nbrew install zeromq\nbrew install czmq --HEAD\ngem install cztop iruby\niruby register --force\n</code></pre>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 7823294, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fl4gb.png?s=128&g=1", "display_name": "J.Bacon", "link": "https://stackoverflow.com/users/7823294/j-bacon"}, "is_accepted": false, "score": 1, "last_activity_date": 1491578677, "last_edit_date": 1491578677, "creation_date": 1491577165, "answer_id": 43281307, "question_id": 42111591, "link": "https://stackoverflow.com/questions/42111591/iruby-kernel-keeps-getting-killed/43281307#43281307", "title": "iRuby kernel keeps getting killed", "body": "<p>I am not sure why the kernel is dying but I suspect it has something to do with the zeromq socket interface.  On My Mac I have confirmed the following is working:</p>\n\n<p>Perhaps brew, ruby and python installed a separate zeromq instance. </p>\n\n<p>IRuby 0.2.9<br>\nRuby 2.1.0<br>\nHomebrew 1.1.12  </p>\n\n<p>I have not had any time to investigate it.     </p>\n"}, {"tags": [], "owner": {"reputation": 2647, "user_id": 4488503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05d45f38e178f1c854938992de726299?s=128&d=identicon&r=PG", "display_name": "DBrown", "link": "https://stackoverflow.com/users/4488503/dbrown"}, "is_accepted": false, "score": 2, "last_activity_date": 1517344661, "creation_date": 1517344661, "answer_id": 48530119, "question_id": 42111591, "link": "https://stackoverflow.com/questions/42111591/iruby-kernel-keeps-getting-killed/48530119#48530119", "title": "iRuby kernel keeps getting killed", "body": "<p>I found that this particular error came up when running iRuby in a project folder with a Gemfile, and <a href=\"https://github.com/SciRuby/iruby/issues/74\" rel=\"nofollow noreferrer\">mentioned in this issue</a>. You may also see a warning when starting iruby to run the register command, as well as add your libraries to the Gemfile.</p>\n\n<p>Add both <em>iruby</em> and <em>ffi-rzmq</em> in your Gemfile:</p>\n\n<pre><code>gem 'iruby'\ngem 'ffi-rzmq'\n</code></pre>\n\n<p>then run:</p>\n\n<pre><code>$ bundle install\n</code></pre>\n\n<p>After all is installed, go ahead and run iruby again:</p>\n\n<pre><code>$ iruby notebook\n</code></pre>\n\n<p>After starting iruby you should see a log without the <strong>uninitialized constant IRuby::Kernel::Session (NameError)</strong> error, and a kernel that does not die. </p>\n\n<p>Even though you may not need to, if for some reason you continue to have issues it may be worth re-registering the kernel after the bundle:</p>\n\n<pre><code>$ iruby register --force\n</code></pre>\n\n<p>Hope this helps someone! </p>\n"}], "owner": {"reputation": 733, "user_id": 6348508, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f82784be19bc4fa0f82219c95f5fdd60?s=128&d=identicon&r=PG", "display_name": "Sarvex", "link": "https://stackoverflow.com/users/6348508/sarvex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 823, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1529336824, "creation_date": 1486552468, "last_edit_date": 1495540953, "question_id": 42111591, "link": "https://stackoverflow.com/questions/42111591/iruby-kernel-keeps-getting-killed", "title": "iRuby kernel keeps getting killed", "body": "<p>I am Ruby with Homebrew on macOS Sierra 10.12.3. I installed jupyter with pip install and iruby with gem install </p>\n\n<p>When I run <code>iruby notebook</code> the server starts fine but while creating a new notebook Kernel is always killed with following log. </p>\n\n<pre><code>/usr/local/lib/ruby/gems/2.4.0/gems/iruby-0.2.9/lib/iruby/kernel.rb:18:in `initialize': uninitialized constant IRuby::Kernel::Session (NameError)\n    from /usr/local/lib/ruby/gems/2.4.0/gems/iruby-0.2.9/lib/iruby/command.rb:70:in `new'\n    from /usr/local/lib/ruby/gems/2.4.0/gems/iruby-0.2.9/lib/iruby/command.rb:70:in `run_kernel'\n    from /usr/local/lib/ruby/gems/2.4.0/gems/iruby-0.2.9/lib/iruby/command.rb:34:in `run'\n    from /usr/local/lib/ruby/gems/2.4.0/gems/iruby-0.2.9/bin/iruby:5:in `&lt;top (required)&gt;'\n    from /usr/local/bin/iruby:22:in `load'\n    from /usr/local/bin/iruby:22:in `&lt;main&gt;'\n</code></pre>\n\n<p>I have seen other <a href=\"https://stackoverflow.com/questions/35999925/kernel-dies-when-creating-iruby-notebook\">question</a> but there the error message is different. </p>\n"}, {"tags": ["ruby", "chef-infra"], "answers": [{"comments": [{"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1486668727, "post_id": 42113718, "comment_id": 71456784, "body": "You should be aware that 12.0.2 is super duper outdated and you should really fix this ASAP :) Test Kitchen is a good way to try new versions of Chef to make sure they work for you."}], "tags": [], "owner": {"reputation": 6682, "user_id": 1574104, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/685bf9f1f469f90c37687d7e715ed964?s=128&d=identicon&r=PG", "display_name": "WebQube", "link": "https://stackoverflow.com/users/1574104/webqube"}, "is_accepted": false, "score": 0, "last_activity_date": 1487179678, "last_edit_date": 1487179678, "creation_date": 1486558444, "answer_id": 42113718, "question_id": 42111452, "link": "https://stackoverflow.com/questions/42111452/chef-client-failed-to-read-machine-metadata/42113718#42113718", "title": "chef client failed to read machine metadata", "body": "<p>Found out what was the issue. \nThe difference was the chef-client version \nthe Startup script reinstalls chef with the latest version. \nUsing this bash </p>\n\n<pre><code>curl -L \"https://www.opscode.com/chef/install.sh\" | bash\n</code></pre>\n\n<p>I've modified to a version specific bash </p>\n\n<pre><code>curl -LO https://omnitruck.chef.io/install.sh &amp;&amp; sudo bash ./install.sh -v 12.15.19 &amp;&amp; rm install.sh\n</code></pre>\n\n<p>And it worked</p>\n"}], "owner": {"reputation": 6682, "user_id": 1574104, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/685bf9f1f469f90c37687d7e715ed964?s=128&d=identicon&r=PG", "display_name": "WebQube", "link": "https://stackoverflow.com/users/1574104/webqube"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1487179678, "creation_date": 1486552065, "last_edit_date": 1486556676, "question_id": 42111452, "link": "https://stackoverflow.com/questions/42111452/chef-client-failed-to-read-machine-metadata", "title": "chef client failed to read machine metadata", "body": "<p>I have a few servers installed with chef. \none of them started to fail when running </p>\n\n<pre><code>sudo chef-client -j /etc/chef/first-boot.json\n</code></pre>\n\n<p>ONLY on one of the machines</p>\n\n<p>when debugging, the error is </p>\n\n<pre><code>Re-raising exception: NoMethodError - undefined method `[]' for nil:NilClass\n</code></pre>\n\n<p>The trace is </p>\n\n<pre><code>/opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.18.31/lib/chef/data_collector/messages/helpers.rb:133:in `read_node_uuid'\n  /opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.18.31/lib/chef/data_collector/messages/helpers.rb:111:in `node_uuid'\n  /opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.18.31/lib/chef/data_collector/messages.rb:40:in `run_start_message'\n  /opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.18.31/lib/chef/data_collector.rb:130:in `block in run_started'\n  /opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.18.31/lib/chef/data_collector.rb:307:in `disable_reporter_on_error'\n  /opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.18.31/lib/chef/data_collector.rb:128:in `run_started'\n  /opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.18.31/lib/chef/event_dispatch/dispatcher.rb:43:in `call'\n  /opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.18.31/lib/chef/event_dispatch/dispatcher.rb:43:in `block in call_subscribers'\n  /opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.18.31/lib/chef/event_dispatch/dispatcher.rb:34:in `each'\n  /opt/chef/embedded/lib/ruby/gems/2.3.0/gems/chef-12.18.31/lib/chef/event_dispatch/dispatcher.rb:34:in `call_subscribers'\n</code></pre>\n\n<p>The line is </p>\n\n<pre><code>metadata[\"node_uuid\"]\n</code></pre>\n\n<p>The metadata is coming by reading <code>data_collector_metadata.json</code> file </p>\n\n<pre><code>    def metadata\n              Chef::JSONCompat.parse(Chef::FileCache.load(metadata_filename))\n   rescue Chef::Exceptions::FileNotFound\n          {}\n end\n</code></pre>\n\n<p>I'm struggling with this ... why is this working on some servers and on this it does not </p>\n"}, {"tags": ["ruby", "compilation", "sass", "phpstorm"], "comments": [{"owner": {"reputation": 136418, "user_id": 783119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bbfd3e5e9f8b698abf7cd1c7aae7a10?s=128&d=identicon&r=PG", "display_name": "LazyOne", "link": "https://stackoverflow.com/users/783119/lazyone"}, "edited": false, "score": 0, "creation_date": 1486555321, "post_id": 42111370, "comment_id": 71393758, "body": "<b>1)</b> What are your File Watcher settings? <b>2)</b> is that <code>_specificCode</code> (or whatever) file that &quot;does not work&quot; is inside the project? <b>3)</b> I assume that you can compile your individual skins just fine (in other words: current file watcher works). <b>4)</b> And changes to <code>_skinsVariables</code> are processed normally (skin gets compiled)?"}, {"owner": {"reputation": 1604, "user_id": 5993042, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-xVPl-CpHhmM/AAAAAAAAAAI/AAAAAAAAIDA/iT3m9_JzwPc/photo.jpg?sz=128", "display_name": "Obed Marquez Parlapiano", "link": "https://stackoverflow.com/users/5993042/obed-marquez-parlapiano"}, "reply_to_user": {"reputation": 136418, "user_id": 783119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bbfd3e5e9f8b698abf7cd1c7aae7a10?s=128&d=identicon&r=PG", "display_name": "LazyOne", "link": "https://stackoverflow.com/users/783119/lazyone"}, "edited": false, "score": 0, "creation_date": 1486556816, "post_id": 42111370, "comment_id": 71394803, "body": "<b>1)</b> Here they are in phpstorm: <a href=\"https://gyazo.com/2cd504495766e57099d22063dcd1a75d\" rel=\"nofollow noreferrer\">gyazo.com/2cd504495766e57099d22063dcd1a75d</a> <b>2)</b> Yeah, its part of the project but outside of the all_skins file. <b>3)</b> I can compile them manually just fine, they compline automatically <i>only</i> if I edit the file itself <b>4)</b> nope, changes to the included partials dont trigger the watcher"}, {"owner": {"reputation": 2088, "user_id": 5675556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2w6hM.jpg?s=128&g=1", "display_name": "Jan Rydrych", "link": "https://stackoverflow.com/users/5675556/jan-rydrych"}, "edited": false, "score": 0, "creation_date": 1486557898, "post_id": 42111370, "comment_id": 71395586, "body": "Lets make things clear for me - you have FileWatcher set - everything works fine - except when you make changes into _specificCode.scss? I do not understand to this &quot;but a modification to the included _specificCode (or any included partial) doesn&#39;t trigger it.&quot; - by &quot;any included partial&quot; you mean what?"}, {"owner": {"reputation": 1604, "user_id": 5993042, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-xVPl-CpHhmM/AAAAAAAAAAI/AAAAAAAAIDA/iT3m9_JzwPc/photo.jpg?sz=128", "display_name": "Obed Marquez Parlapiano", "link": "https://stackoverflow.com/users/5993042/obed-marquez-parlapiano"}, "reply_to_user": {"reputation": 2088, "user_id": 5675556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2w6hM.jpg?s=128&g=1", "display_name": "Jan Rydrych", "link": "https://stackoverflow.com/users/5675556/jan-rydrych"}, "edited": false, "score": 0, "creation_date": 1486558074, "post_id": 42111370, "comment_id": 71395706, "body": "@HonzaRydrych not only to that specific file, but to any partial. Modifying a partial doesn&#39;t re-compile all the .scss files that have that partial included, even if they&#39;re being watched."}, {"owner": {"reputation": 2088, "user_id": 5675556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2w6hM.jpg?s=128&g=1", "display_name": "Jan Rydrych", "link": "https://stackoverflow.com/users/5675556/jan-rydrych"}, "edited": false, "score": 0, "creation_date": 1486558175, "post_id": 42111370, "comment_id": 71395784, "body": "Can you please alter the filesystem structure, in your original question, with tags what is partial and where _specificCode.scss and _skinVariables.scss lives?"}, {"owner": {"reputation": 1604, "user_id": 5993042, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-xVPl-CpHhmM/AAAAAAAAAAI/AAAAAAAAIDA/iT3m9_JzwPc/photo.jpg?sz=128", "display_name": "Obed Marquez Parlapiano", "link": "https://stackoverflow.com/users/5993042/obed-marquez-parlapiano"}, "reply_to_user": {"reputation": 2088, "user_id": 5675556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2w6hM.jpg?s=128&g=1", "display_name": "Jan Rydrych", "link": "https://stackoverflow.com/users/5675556/jan-rydrych"}, "edited": false, "score": 0, "creation_date": 1486558501, "post_id": 42111370, "comment_id": 71395992, "body": "Done, I also added an edit to explain myself better and how the file.scss is importing the partials @HonzaRydrych"}, {"owner": {"reputation": 136418, "user_id": 783119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bbfd3e5e9f8b698abf7cd1c7aae7a10?s=128&d=identicon&r=PG", "display_name": "LazyOne", "link": "https://stackoverflow.com/users/783119/lazyone"}, "edited": false, "score": 0, "creation_date": 1486560412, "post_id": 42111370, "comment_id": 71397303, "body": "Well ... <b>1)</b> You are <code>Track only root files</code> option enabled -- that&#39;s good -- it meant to run file watcher for main file instead of included; You may wish to disable &quot;Immediate file sync` option though; <b>2)</b> With Scope &quot;Open Files&quot; it may not work that well -- try &quot;Project Files&quot; for now. <b>3)</b> My main concern is -- this file gets included in many &quot;root&quot; files -- maybe this is what causing it? But it seems to work fine here with LESS (much simpler project though)."}, {"owner": {"reputation": 136418, "user_id": 783119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bbfd3e5e9f8b698abf7cd1c7aae7a10?s=128&d=identicon&r=PG", "display_name": "LazyOne", "link": "https://stackoverflow.com/users/783119/lazyone"}, "edited": false, "score": 0, "creation_date": 1486560548, "post_id": 42111370, "comment_id": 71397420, "body": "If those changes to File Watcher is not enough, you may try 1) answer by  Honza Rydrych 2) Manually trigger re-run of File Watchers -- see <a href=\"http://stackoverflow.com/a/20012655/783119\">stackoverflow.com/a/20012655/783119</a>"}, {"owner": {"reputation": 1604, "user_id": 5993042, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-xVPl-CpHhmM/AAAAAAAAAAI/AAAAAAAAIDA/iT3m9_JzwPc/photo.jpg?sz=128", "display_name": "Obed Marquez Parlapiano", "link": "https://stackoverflow.com/users/5993042/obed-marquez-parlapiano"}, "reply_to_user": {"reputation": 136418, "user_id": 783119, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bbfd3e5e9f8b698abf7cd1c7aae7a10?s=128&d=identicon&r=PG", "display_name": "LazyOne", "link": "https://stackoverflow.com/users/783119/lazyone"}, "edited": false, "score": 0, "creation_date": 1486561551, "post_id": 42111370, "comment_id": 71398130, "body": "@LazyOne hah! I&#39;ve been using your solution from that question so far, but I was getting tired of running 30+ file watchers manually every time. I solved the problem using a batch file that runs all of them, but it&#39;s not a nice, flexible solution. I&#39;ll try honza&#39;s answer though"}], "answers": [{"comments": [{"owner": {"reputation": 1604, "user_id": 5993042, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-xVPl-CpHhmM/AAAAAAAAAAI/AAAAAAAAIDA/iT3m9_JzwPc/photo.jpg?sz=128", "display_name": "Obed Marquez Parlapiano", "link": "https://stackoverflow.com/users/5993042/obed-marquez-parlapiano"}, "edited": false, "score": 0, "creation_date": 1486561581, "post_id": 42114288, "comment_id": 71398151, "body": "Yeah, I was heading towards that solution as well but using npm, it looks like the best option. Thanks Honza."}], "tags": [], "owner": {"reputation": 2088, "user_id": 5675556, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2w6hM.jpg?s=128&g=1", "display_name": "Jan Rydrych", "link": "https://stackoverflow.com/users/5675556/jan-rydrych"}, "is_accepted": true, "score": 1, "last_activity_date": 1486559963, "creation_date": 1486559963, "answer_id": 42114288, "question_id": 42111370, "link": "https://stackoverflow.com/questions/42111370/how-to-compile-all-scss-files-located-in-different-folders/42114288#42114288", "title": "How to compile all scss files located in different folders?", "body": "<p>So now you have the file watcher set to watch the open files and in case of modification it should compile ONLY the file itself.</p>\n\n<p>What you need is to set your scss transpiler to compile the /all_skins/1/css/file.scss, /all_skins/2/css/file.scss, etc., but I don't know if the ruby transpiler you're using is capable of this setting.</p>\n\n<p>I solved something similar with <a href=\"http://gulpjs.com\" rel=\"nofollow noreferrer\">http://gulpjs.com</a> (Grunt alternative) with Gulpfile.js config like this (altered to your paths):</p>\n\n<pre><code>gulp.task('styles', function() {\n    return gulp.src([\n            'all_skins/**/*.scss'\n        ])\n        .pipe($.sass())\n        .pipe($.autoprefixer('last 3 version'));\n});\n</code></pre>\n\n<p>Then set a PhpStorm's file watcher to watch whole <code>all_skins</code> and <code>common_css</code> folder (can be set by \"scopes\") and run gulp task named \"styles\" and it should work.</p>\n"}], "owner": {"reputation": 1604, "user_id": 5993042, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh6.googleusercontent.com/-xVPl-CpHhmM/AAAAAAAAAAI/AAAAAAAAIDA/iT3m9_JzwPc/photo.jpg?sz=128", "display_name": "Obed Marquez Parlapiano", "link": "https://stackoverflow.com/users/5993042/obed-marquez-parlapiano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1932, "favorite_count": 0, "accepted_answer_id": 42114288, "answer_count": 1, "score": 0, "last_activity_date": 1486559963, "creation_date": 1486551848, "last_edit_date": 1486558267, "question_id": 42111370, "link": "https://stackoverflow.com/questions/42111370/how-to-compile-all-scss-files-located-in-different-folders", "title": "How to compile all scss files located in different folders?", "body": "<p>I have a file structure as follows: </p>\n\n<pre><code>all_skins\n|\u2014 1\n  |\u2014 css\n     |- _skinVariables.scss\n     |\u2014 file.scss\n     |\u2014 file.css\n|\u2014 2\n  |\u2014 css\n     |- _skinVariables.scss\n     |\u2014 file.scss\n     |\u2014 file.css\n|\u2014 3\n  |\u2014 css\n     |- _skinVariables.scss\n     |\u2014 file.scss\n     |\u2014 file.css\ncommon_css\n| _specificCode.scss\n| _otherCode.scss\n</code></pre>\n\n<p>Inside my <code>scss</code> file for each \"skin\" I'm importing some general scss partials such as <code>_skinsVariables</code> and <code>_specificCode</code>. The _skinVariables partial changes for each skin, and the _specificCode is a general partial reused in all the scss files located outside the <code>all_skins</code> directory.</p>\n\n<p>The problem is that whenever I make a change in the <code>specificCode</code> partial file, I need to recompile manually each scss file to generate the new css with the modified code.</p>\n\n<p>I'm using PhpStorm's file watcher, so any change to the specific scss file triggers the watcher, but a modification to the included _specificCode (or any included partial) doesn't trigger it.</p>\n\n<p>Is there any way to compile all the scss files inside a parent folder? There are over 30 of these numbered sub-folders, so doing it by hand is time consuming.</p>\n\n<p>Any solution using command line, PhpStorm itself, or other software such as grunt will do for me (least desired).</p>\n\n<p><strong>Edit:</strong></p>\n\n<p>The file.scss would be as follows:</p>\n\n<pre><code>@import \"skinVariables\";\n@import \"../../../common_css/specificCode\"\n</code></pre>\n\n<p>To be a bit clearer, the problem is that I have the partials included in all my file.scss, to make life easier most of the code comes from the partials. </p>\n\n<p>When I modify a partial that is imported in all the files, such as _specificCode.scss, I would need all the file.scss to be re-compiled, but this doesn't happen.</p>\n\n<p>The way the watchers seem to work at the moment is that they're triggered <em>only</em> when a modification is done to the file.scss itself, not to the partial that is being included. </p>\n\n<p>Any work around this?</p>\n"}, {"tags": ["ruby", "rubygems", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1486550254, "post_id": 42110704, "comment_id": 71390318, "body": "do you happen to have <code>something.dup</code> in your codebase?"}, {"owner": {"reputation": 443, "user_id": 5158845, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2eff4c21679d34a45c335d91940215c9?s=128&d=identicon&r=PG&f=1", "display_name": "gogofan", "link": "https://stackoverflow.com/users/5158845/gogofan"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1486550757, "post_id": 42110704, "comment_id": 71390657, "body": "No, I think the &quot;dup&quot; is referring to the code belongs to the gems. But I don&#39;t really know what causes the problem."}, {"owner": {"reputation": 443, "user_id": 5158845, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2eff4c21679d34a45c335d91940215c9?s=128&d=identicon&r=PG&f=1", "display_name": "gogofan", "link": "https://stackoverflow.com/users/5158845/gogofan"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1486550919, "post_id": 42110704, "comment_id": 71390772, "body": "I found the problem why, I was using ruby version 2.4.0-preview instead of ruby version 2.4.0."}], "owner": {"reputation": 443, "user_id": 5158845, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/2eff4c21679d34a45c335d91940215c9?s=128&d=identicon&r=PG&f=1", "display_name": "gogofan", "link": "https://stackoverflow.com/users/5158845/gogofan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1565, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1525194311, "creation_date": 1486550007, "last_edit_date": 1525194311, "question_id": 42110704, "link": "https://stackoverflow.com/questions/42110704/cant-dup-nilclass-typeerror", "title": "Can&#39;t dup NilClass (TypeError)", "body": "<p>I am trying to run my cucumber tests, but I get this error: </p>\n\n<pre><code>can't dup NilClass (TypeError)\n\n/Users/jeffreyyong/.rbenv/versions/2.4.0-preview1/lib/ruby/gems/2.4.0/gems/sprockets-3.7.1/lib/sprockets/utils.rb:40:in `dup'\n</code></pre>\n\n<p>What is the source of the problem and how I can go about debugging it? </p>\n"}, {"tags": ["ruby", "git", "homebrew"], "owner": {"reputation": 11, "user_id": 7533592, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-gRswohY7CGs/AAAAAAAAAAI/AAAAAAAAAAA/DrdvpZqh3Qo/photo.jpg?sz=128", "display_name": "Billy McCloskey", "link": "https://stackoverflow.com/users/7533592/billy-mccloskey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1486979945, "creation_date": 1486547593, "last_edit_date": 1486979945, "question_id": 42109778, "link": "https://stackoverflow.com/questions/42109778/source-code-build-of-macpgp2-fails-with-home-brew-ruby-build-error-a-la-git-hub", "title": "Source Code build of MacPGP2 fails with home-brew/ruby build error a la git hub", "body": "<p>I want to build the source distribution of the GPG Suite, in this case, just the MacPGP2 portion.</p>\n\n<p>I went to the GPG Suite site, grabbed the copy-lefted source, and read thru a lot of release notes, read me files, and then realized the Readme.md file describes how to do the build right out of git-hub, so I figured I'd simply do that with the following sequence:</p>\n\n<pre><code>git clone https://github.com/GPGTools/MacGPG2.git\ncd MacGPG2\ngit submodule init\ngit submodule update\nmake\n</code></pre>\n\n<p>This crapped out.</p>\n\n<p>I narrowed the problem down to a hard-coded path to the wrong ruby interpreter in the top line of a very brew config file:</p>\n\n<pre><code>.../MacGPG2/build/homebrew/Library/brew.rb\n</code></pre>\n\n<p>which points to a version of ruby that is not installed on my Mac, as far as I know:</p>\n\n<pre><code>#!/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby -W0\n</code></pre>\n\n<p>I played around and patched this config file to point to a known ruby, but that merely exposed some ruby coding errors further along in the MacPGP2 ruby source.  I abandoned trying to patch homebrew.</p>\n\n<p>At this point, it looks like a build.sh script constructs or grabs a homebrew config file that points to a very wrong hardcoded place, for my case.  I don't know how to fix this or whom to notify about this problem.</p>\n\n<p>So, I decided to toss this out there, here. So to speak.</p>\n\n<p>Thanks.</p>\n\n<p>Here is the git sequence:</p>\n\n<p><a href=\"https://i.stack.imgur.com/RYdQc.png\" rel=\"nofollow noreferrer\">git sequence to generate a gpg suite</a></p>\n"}, {"tags": ["ruby", "regex", "ruby-on-rails-4", "regex-greedy", "regedit"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1486546308, "post_id": 42109266, "comment_id": 71387418, "body": "Please share your current approach to solve this. What does not work there?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1486546761, "post_id": 42109266, "comment_id": 71387790, "body": "What is your expected result for the given paragraph?"}, {"owner": {"reputation": 6124, "user_id": 461887, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/73a86b3136bfdda99045ba5de86dd9ec?s=128&d=identicon&r=PG", "display_name": "sayth", "link": "https://stackoverflow.com/users/461887/sayth"}, "edited": false, "score": 0, "creation_date": 1486547101, "post_id": 42109266, "comment_id": 71388086, "body": "Here is an exact andwer using gsub <a href=\"http://stackoverflow.com/a/1274631/461887\">stackoverflow.com/a/1274631/461887</a>"}], "owner": {"reputation": 11, "user_id": 6459684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FeMBM.jpg?s=128&g=1", "display_name": "SANJAY", "link": "https://stackoverflow.com/users/6459684/sanjay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 16, "favorite_count": 0, "closed_date": 1486548567, "answer_count": 0, "score": 0, "last_activity_date": 1486546166, "creation_date": 1486546166, "question_id": 42109266, "link": "https://stackoverflow.com/questions/42109266/regix-in-ruby-on-rails-for-adding-n-n-2-new-line-when-i-found-n", "closed_reason": "Duplicate", "title": "Regix in ruby on rails for adding &quot;\\n\\n&quot; &quot; 2 new line&quot; when i found &quot;\\n&quot;", "body": "<p>I am new in regix and working in ruby on rails please help me out.</p>\n\n<p>My scenario is :</p>\n\n<pre><code>alleyway\\n behind the venue\\n. The young agent never\\n\\n.\n</code></pre>\n\n<p>I have a paragraph. And i want to add \\n only when i find \\n. \nex. in above sentence i want \"venue\\n\\n\".</p>\n"}, {"tags": ["ruby", "http", "mechanize"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1486546493, "post_id": 42109074, "comment_id": 71387585, "body": "I think you have to use the <code>x-csrftoken</code> value from the cookies."}, {"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1486601268, "post_id": 42109074, "comment_id": 71420733, "body": "Yeah, you can&#39;t use your browser&#39;s session data in mechanize, because it&#39;s using a different session."}], "owner": {"reputation": 1470, "user_id": 1987461, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/664b3ec09a4053da7ecd919255539b54?s=128&d=identicon&r=PG", "display_name": "borjagvo", "link": "https://stackoverflow.com/users/1987461/borjagvo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1486545578, "creation_date": 1486545578, "question_id": 42109074, "link": "https://stackoverflow.com/questions/42109074/reproducing-instagram-request-with-ruby", "title": "Reproducing Instagram request with Ruby", "body": "<p>I'm trying to reproduce the AJAX query Instagram does when you visit <a href=\"https://www.instagram.com/explore/tags/madrid/\" rel=\"nofollow noreferrer\">https://www.instagram.com/explore/tags/madrid/</a> for learning purposes.</p>\n\n<p>The request the browser does when visiting the URL above is <code>https://www.instagram.com/query/</code>. <a href=\"https://gist.github.com/anonymous/63404b7cf653af4002f5039d4a752624\" rel=\"nofollow noreferrer\">These</a> are the parameters I can see in the Network tab in Chrome.</p>\n\n<p>I'm trying to reproduce that query by two means:\n- Using just <code>Net::HTTP</code> \n- Using Mechanize to let it handle cookies and other stuff</p>\n\n<p>None of them is working for me.</p>\n\n<p><a href=\"https://gist.github.com/bgvo/06ca663d16c6e311ab89572ffd46f015\" rel=\"nofollow noreferrer\"><strong>Using Net::HTTP</strong></a></p>\n\n<p><a href=\"https://gist.github.com/bgvo/62f319b33fd5e1eb678c0adcde7409a9\" rel=\"nofollow noreferrer\"><strong>Using Mechanize</strong></a></p>\n\n<p>Both methods give me a 403 Forbidden Error.</p>\n\n<p>Any idea of what am I doing wrong?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "git", "rubygems", "bundle", "bundler"], "answers": [{"comments": [{"owner": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "edited": false, "score": 1, "creation_date": 1486623218, "post_id": 42109330, "comment_id": 71427170, "body": "but my bundler is the newest version 1.14.3, i run the app in docker container, i don&#39;t know does it effect?"}, {"owner": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "edited": false, "score": 9, "creation_date": 1486626195, "post_id": 42109330, "comment_id": 71428650, "body": "I find the issue, because there is exist external include gem file that its gemspec file use the syntax <code>git ls-files</code>"}], "tags": [], "owner": {"reputation": 7467, "user_id": 6426617, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ruH2N.jpg?s=128&g=1", "display_name": "Keshan Nageswaran", "link": "https://stackoverflow.com/users/6426617/keshan-nageswaran"}, "is_accepted": true, "score": 3, "last_activity_date": 1486546335, "creation_date": 1486546335, "answer_id": 42109330, "question_id": 42108469, "link": "https://stackoverflow.com/questions/42108469/fatal-not-a-git-repository-or-any-of-the-parent-directories-git-when-bundl/42109330#42109330", "title": "fatal: Not a git repository (or any of the parent directories): .git when &quot;bundle install&quot;", "body": "<p>There is a bug for Bundler in older version, which could be related: <a href=\"https://github.com/carlhuda/bundler/issues/2039\" rel=\"nofollow noreferrer\">https://github.com/carlhuda/bundler/issues/2039</a></p>\n\n<p>Definitely not a problem with git or your git repo. Try updating bundler. latest stable version of bundler would fix this issue</p>\n"}], "owner": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3072, "favorite_count": 1, "accepted_answer_id": 42109330, "answer_count": 1, "score": 2, "last_activity_date": 1486546335, "creation_date": 1486543770, "question_id": 42108469, "link": "https://stackoverflow.com/questions/42108469/fatal-not-a-git-repository-or-any-of-the-parent-directories-git-when-bundl", "title": "fatal: Not a git repository (or any of the parent directories): .git when &quot;bundle install&quot;", "body": "<p>I have a directory exist Gemfile.</p>\n\n<p>When I execute \"bundle install\" in the directory, it show waring message</p>\n\n<pre><code>fatal: Not a git repository (or any of the parent directories): .git \n</code></pre>\n\n<p>but if I execute \"git init\" in the directory first, it no show this waring message.</p>\n\n<p>I know it's about the directory that is it a git repository? but it's no make sense. </p>\n\n<p>Why execute \"bundle install\" in the directory need the directory become git repository first?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "bundler", "ruby-on-rails-2"], "comments": [{"owner": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "edited": false, "score": 0, "creation_date": 1486544318, "post_id": 42107785, "comment_id": 71386110, "body": "Maybe you are using different <code>rvm</code> gemsets"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1486550047, "post_id": 42107785, "comment_id": 71390180, "body": "What is the line in your crontab?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1486550244, "post_id": 42107785, "comment_id": 71390314, "body": "More specifically, could your issue be solved by configuring it as something like: <code>&#47;bin&#47;bash -l -c &#39;cd &#47;path&#47;to&#47;project &amp;&amp; bundle exec bin&#47;rails runner -e ....&#39;</code>?"}, {"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1486552538, "post_id": 42107785, "comment_id": 71391923, "body": "@TomLord - thanks for quick reply, my line of code is <code>*&#47;1 * * * * JOBNAME=&quot;watch&quot; TIMEOUT=30 $APP_DIR&#47;script&#47;cronhelper.sh $APP_DIR&#47;script&#47;runner -e production &quot;Unit.watch&quot;</code>"}, {"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "reply_to_user": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "edited": false, "score": 0, "creation_date": 1486552724, "post_id": 42107785, "comment_id": 71392065, "body": "@Bustikiller - thanks for quick reply, I have only one version of ruby installed"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1486553592, "post_id": 42107785, "comment_id": 71392649, "body": "Did you try running it as <code>&#47;bin&#47;bash -l -c &#39;....&#39;</code>? Any difference?"}, {"owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1486560156, "post_id": 42107785, "comment_id": 71397131, "body": "@TomLord - thanks It worked for me, I am still checking"}], "owner": {"reputation": 2395, "user_id": 1626261, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/v6cN0.jpg?s=128&g=1", "display_name": "Sonalkumar sute", "link": "https://stackoverflow.com/users/1626261/sonalkumar-sute"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1486550336, "creation_date": 1486541466, "last_edit_date": 1486550336, "question_id": 42107785, "link": "https://stackoverflow.com/questions/42107785/while-running-cron-job-getting-the-error-could-not-load-the-bundler-gem-install", "title": "While running cron job getting the error Could not load the bundler gem. Install it with `gem install bundler", "body": "<p>While running task from cronjobs getting the error</p>\n\n<p><code>preinitializer.rb:5 Could not load the bundler gem. Install it with gem install bundler</code></p>\n\n<p>But when I am running the same task from console, it is working fine.</p>\n\n<p><code>Bundler 1.13.6</code> is installed </p>\n\n<p>I am using ruby 1.8.7 and rails 2.3.8</p>\n\n<p>Any suggestions on this</p>\n"}, {"tags": ["ruby", "xml", "nokogiri"], "comments": [{"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 1, "creation_date": 1486539972, "post_id": 42107363, "comment_id": 71383745, "body": "Please post your code."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1486589958, "post_id": 42107363, "comment_id": 71416323, "body": "Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. Have you read the Nokogiri tutorials? They discuss how to search and extract information. Have you searched the internet for how to find a node&#39;s parameter based on the value? Your selector isn&#39;t correct so searching will explain what to do. <a href=\"http://meta.stackoverflow.com/q/261592/128421\">meta.stackoverflow.com/q/261592/128421</a> is important too."}], "answers": [{"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1486686345, "last_edit_date": 1486686345, "creation_date": 1486589840, "answer_id": 42124097, "question_id": 42107363, "link": "https://stackoverflow.com/questions/42107363/how-to-parse-an-xml-file-using-nokogiri-and-ruby/42124097#42124097", "title": "How to parse an XML file using Nokogiri and Ruby", "body": "<p>This is the basic way to search for a node with a given parameter and value using CSS:</p>\n\n<pre><code>require 'nokogiri'\n\ndoc = Nokogiri::XML(&lt;&lt;EOT)\n&lt;root&gt;\n  &lt;person name=\"brother\"&gt;Abhijeet&lt;/person&gt;\n  &lt;person name=\"sister\"&gt;pratiksha&lt;/person&gt;\n&lt;/root&gt;\nEOT\n\ndoc.at('person[name=\"sister\"]').to_html # =&gt; \"&lt;person name=\\\"sister\\\"&gt;pratiksha&lt;/person&gt;\"\n</code></pre>\n\n<p>You need to research CSS and XPath and how their syntax work. In XPath <code>//person/sister</code> means search everywhere for <code>&lt;sister&gt;</code> nodes inside <code>&lt;person&gt;</code> nodes, matching something like:</p>\n\n<pre><code>&lt;root&gt;\n  &lt;person&gt;\n    &lt;sister /&gt;\n  &lt;/person&gt;\n  &lt;person&gt;\n    &lt;sister /&gt;\n  &lt;/person&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>Where it would find all the <code>&lt;sister /&gt;</code> nodes. It doesn't search for the parameter of a node.</p>\n\n<p>Don't do:</p>\n\n<pre><code>doc.elements.each do |f|\n    f.each do |y|\n         p y\n    end\nend\n</code></pre>\n\n<p>You're going to waste a lot of CPU walking through every element. Instead learn how selectors work, so you can take advantage of the power of libXML.</p>\n"}], "owner": {"reputation": 153, "user_id": 5129887, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/41d94c75c838dde47111f2430741a337?s=128&d=identicon&r=PG&f=1", "display_name": "anjali rai", "link": "https://stackoverflow.com/users/5129887/anjali-rai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 672, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1486686345, "creation_date": 1486539809, "last_edit_date": 1486686220, "question_id": 42107363, "link": "https://stackoverflow.com/questions/42107363/how-to-parse-an-xml-file-using-nokogiri-and-ruby", "title": "How to parse an XML file using Nokogiri and Ruby", "body": "<p>I have a XML file:</p>\n\n<pre><code>&lt;root&gt;\n    &lt;person name=\"brother\"&gt;Abhijeet&lt;/person&gt;\n    &lt;person name=\"sister\"&gt;pratiksha&lt;/person&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>I want it to parse using Nokogiri. I tried by using CSS and XPath but it returns nil or the first element value. How do I retrieve other values?\nI tried:</p>\n\n<pre><code>doc = Nokogiri::XML(xmlFile)\ndoc.elements.each do |f|\n    f.each do |y|\n         p y\n    end\nend\n</code></pre>\n\n<p>and:</p>\n\n<pre><code>doc.xpath(\"//person/sister\")\ndoc.at_xpath(\"//person/sister\")\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 330, "user_id": 4827700, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh3.googleusercontent.com/-aM7fUoHjQGc/AAAAAAAAAAI/AAAAAAAAAFY/zriOP126N1Y/photo.jpg?sz=128", "display_name": "Chaudhary Prakash", "link": "https://stackoverflow.com/users/4827700/chaudhary-prakash"}, "edited": false, "score": 0, "creation_date": 1486537712, "post_id": 42106387, "comment_id": 71382594, "body": "please check  this link <a href=\"http://stackoverflow.com/questions/8456300/mysql2-so-libmysqlclient-r-so-15-cannot-open-shared-object-file-no-such-file#10369022\" title=\"mysql2 so libmysqlclient r so 15 cannot open shared object file no such file%2310369022\">stackoverflow.com/questions/8456300/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1486537225, "post_id": 42106635, "comment_id": 71382330, "body": "This is not correct. The OP just typed the wrong command, using <code>rails</code> instead of <code>rake</code>."}, {"owner": {"reputation": 656, "user_id": 1571115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a14d53b497799c8835ba825923564b6?s=128&d=identicon&r=PG", "display_name": "titan", "link": "https://stackoverflow.com/users/1571115/titan"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1486537364, "post_id": 42106635, "comment_id": 71382416, "body": "@EddeAlmeida OP might be developing in <code>rails5</code>. See this <a href=\"http://blog.bigbinary.com/2016/01/14/rails-5-supports-rake-commands-using-rails.html\" rel=\"nofollow noreferrer\">blog.bigbinary.com/2016/01/14/&hellip;</a>"}, {"owner": {"reputation": 656, "user_id": 1571115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a14d53b497799c8835ba825923564b6?s=128&d=identicon&r=PG", "display_name": "titan", "link": "https://stackoverflow.com/users/1571115/titan"}, "edited": false, "score": 0, "creation_date": 1486538434, "post_id": 42106635, "comment_id": 71382981, "body": "should work without it. Being on safe side do all steps again :). And please upvote my answer. Thanks"}, {"owner": {"reputation": 49, "user_id": 5563694, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10207469593755005/picture?type=large", "display_name": "Haziq Azmi", "link": "https://stackoverflow.com/users/5563694/haziq-azmi"}, "edited": false, "score": 0, "creation_date": 1486538650, "post_id": 42106635, "comment_id": 71383104, "body": "tqvm.. actually, i did what you told me to insert &#39;sudo apt-get install libmysqlclient20-dev.&#39; but i&#39;m getting an error where it couldn&#39;t locate the package... so what i do is  insert &#39;sudo apt-get update&#39; and then &#39;sudo apt-get install libmysqlclient-dev&#39;"}], "tags": [], "owner": {"reputation": 656, "user_id": 1571115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0a14d53b497799c8835ba825923564b6?s=128&d=identicon&r=PG", "display_name": "titan", "link": "https://stackoverflow.com/users/1571115/titan"}, "is_accepted": true, "score": 0, "last_activity_date": 1486537168, "creation_date": 1486537168, "answer_id": 42106635, "question_id": 42106387, "link": "https://stackoverflow.com/questions/42106387/rails-aborted-when-put-command-rails-dbschemadump/42106635#42106635", "title": "Rails aborted when put command &#39;rails db:schema:dump&#39;", "body": "<p>You might be missing development libraries in your machine. Install this library if you dont already have it.</p>\n\n<pre><code>sudo apt-get install libmysqlclient20-dev\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 5563694, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10207469593755005/picture?type=large", "display_name": "Haziq Azmi", "link": "https://stackoverflow.com/users/5563694/haziq-azmi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 501, "favorite_count": 0, "accepted_answer_id": 42106635, "answer_count": 1, "score": 1, "last_activity_date": 1486544103, "creation_date": 1486536213, "last_edit_date": 1486544103, "question_id": 42106387, "link": "https://stackoverflow.com/questions/42106387/rails-aborted-when-put-command-rails-dbschemadump", "title": "Rails aborted when put command &#39;rails db:schema:dump&#39;", "body": "<p>When I run <code>rails db:schema:dump</code> I receive this error</p>\n\n<pre><code>rails aborted!\nLoadError: libmysqlclient.so.20: cannot open shared object file: No such file or directory - /home/mekjaaganu/.rvm/gems/ruby-2.3.3/gems/mysql2-0.4.5/lib/mysql2/mysql2.so\n/home/mekjaaganu/.rvm/gems/ruby-2.3.3/gems/mysql2-0.4.5/lib/mysql2.rb:31:in `require'\n/home/mekjaaganu/.rvm/gems/ruby-2.3.3/gems/mysql2-0.4.5/lib/mysql2.rb:31:in `&lt;top (required)&gt;'\n/home/mekjaaganu/.rvm/gems/ruby-2.3.3/gems/bundler-1.14.3/lib/bundler/runtime.rb:91:in `require'\n/home/mekjaaganu/.rvm/gems/ruby-2.3.3/gems/bundler-1.14.3/lib/bundler/runtime.rb:91:in `block (2 levels) in require'\n/home/mekjaaganu/.rvm/gems/ruby-2.3.3/gems/bundler-1.14.3/lib/bundler/runtime.rb:86:in `each'\n/home/mekjaaganu/.rvm/gems/ruby-2.3.3/gems/bundler-1.14.3/lib/bundler/runtime.rb:86:in `block in require'\n/home/mekjaaganu/.rvm/gems/ruby-2.3.3/gems/bundler-1.14.3/lib/bundler/runtime.rb:75:in `each'\n/home/mekjaaganu/.rvm/gems/ruby-2.3.3/gems/bundler-1.14.3/lib/bundler/runtime.rb:75:in `require'\n/home/mekjaaganu/.rvm/gems/ruby-2.3.3/gems/bundler-1.14.3/lib/bundler.rb:107:in `require'\n/home/mekjaaganu/Sites/simple_cms/config/application.rb:7:in `&lt;top (required)&gt;'\n/home/mekjaaganu/Sites/simple_cms/Rakefile:4:in `require_relative'\n/home/mekjaaganu/Sites/simple_cms/Rakefile:4:in `&lt;top (required)&gt;'\n/home/mekjaaganu/.rvm/gems/ruby-2.3.3/gems/railties-5.0.1/lib/rails/commands/rake_proxy.rb:13:in `block in run_rake_task'\n/home/mekjaaganu/.rvm/gems/ruby-2.3.3/gems/railties-5.0.1/lib/rails/commands/rake_proxy.rb:11:in `run_rake_task'\n/home/mekjaaganu/.rvm/gems/ruby-2.3.3/gems/railties-5.0.1/lib/rails/commands/commands_tasks.rb:51:in `run_command!'\n/home/mekjaaganu/.rvm/gems/ruby-2.3.3/gems/railties-5.0.1/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\n/home/mekjaaganu/Sites/simple_cms/bin/rails:9:in `require'\n/home/mekjaaganu/Sites/simple_cms/bin/rails:9:in `&lt;top (required)&gt;'\n/home/mekjaaganu/.rvm/gems/ruby-2.3.3/gems/spring-2.0.1/lib/spring/client/rails.rb:28:in `load'\n/home/mekjaaganu/.rvm/gems/ruby-2.3.3/gems/spring-2.0.1/lib/spring/client/rails.rb:28:in `call'\n/home/mekjaaganu/.rvm/gems/ruby-2.3.3/gems/spring-2.0.1/lib/spring/client/command.rb:7:in `call'\n/home/mekjaaganu/.rvm/gems/ruby-2.3.3/gems/spring-2.0.1/lib/spring/client.rb:30:in `run'\n/home/mekjaaganu/.rvm/gems/ruby-2.3.3/gems/spring-2.0.1/bin/spring:49:in `&lt;top (required)&gt;'\n/home/mekjaaganu/.rvm/gems/ruby-2.3.3/gems/spring-2.0.1/lib/spring/binstub.rb:31:in `load'\n/home/mekjaaganu/.rvm/gems/ruby-2.3.3/gems/spring-2.0.1/lib/spring/binstub.rb:31:in `&lt;top (required)&gt;'\n/home/mekjaaganu/Sites/simple_cms/bin/spring:15:in `require'\n/home/mekjaaganu/Sites/simple_cms/bin/spring:15:in `&lt;top (required)&gt;'\nbin/rails:3:in `load'\nbin/rails:3:in `&lt;main&gt;'\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>My <code>config/database.yml</code> file looks like this. Already checked the database name and user password. Everything looks fine. Able to create database name simple_cms_development and password is right.</p>\n\n<pre><code># MySQL. Versions 5.0 and up are supported.\n#\n# Install the MySQL driver\n#   gem install mysql2\n#\n# Ensure the MySQL gem is defined in your Gemfile\n#   gem 'mysql2'\n#\n# And be sure to use new-style password hashing:\n#   http://dev.mysql.com/doc/refman/5.7/en/old-client.html\n#\ndefault: &amp;default\n  adapter: mysql2\n  encoding: utf8\n  pool: 5\n  username: rails_user\n  password: secretpassword\n  socket: /var/run/mysqld/mysqld.sock\n\ndevelopment:\n  &lt;&lt;: *default\n  database: simple_cms_development\n\n# Warning: The database defined as \"test\" will be erased and\n# re-generated from your development database when you run \"rake\".\n# Do not set this db to the same as development or production.\ntest:\n  &lt;&lt;: *default\n  database: simple_cms_test\n\n# As with config/secrets.yml, you never want to store sensitive information,\n# like your database password, in your source code. If your source code is\n# ever seen by anyone, they now have access to your database.\n#\n# Instead, provide the password as a unix environment variable when you boot\n# the app. Read http://guides.rubyonrails.org/configuring.html#configuring-a-database\n# for a full rundown on how to provide these environment variables in a\n# production deployment.\n#\n# On Heroku and other platform providers, you may have a full connection URL\n# available as an environment variable. For example:\n#\n#   DATABASE_URL=\"mysql2://myuser:mypass@localhost/somedatabase\"\n#\n# You can use this database configuration with:\n#\n#   production:\n#     url: &lt;%= ENV['DATABASE_URL'] %&gt;\n#\nproduction:\n  &lt;&lt;: *default\n  database: simple_cms_production\n  username: simple_cms\n  password: &lt;%= ENV['SIMPLE_CMS_DATABASE_PASSWORD'] %&gt;\n</code></pre>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1486537137, "post_id": 42106175, "comment_id": 71382287, "body": "Please edit your question posting your <code>config&#47;database.yml</code> file. Be careful and mask all possible passwords this file may contain before posting."}, {"owner": {"reputation": 1059, "user_id": 3576036, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f1fb048a732909f50ff2e2a267119640?s=128&d=identicon&r=PG&f=1", "display_name": "user3576036", "link": "https://stackoverflow.com/users/3576036/user3576036"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1486537590, "post_id": 42106175, "comment_id": 71382536, "body": "@EddeAlmeida I have added database.yml. Please check"}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1486537789, "post_id": 42106175, "comment_id": 71382639, "body": "Try adding a line with <code>host:     localhost</code> right after <code>default: &amp;default</code> in your <code>config&#47;database.yml</code> and then run the command again, please."}, {"owner": {"reputation": 1059, "user_id": 3576036, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f1fb048a732909f50ff2e2a267119640?s=128&d=identicon&r=PG&f=1", "display_name": "user3576036", "link": "https://stackoverflow.com/users/3576036/user3576036"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1486539813, "post_id": 42106175, "comment_id": 71383680, "body": "@EddeAlmeida  I added   <code>host: localhost</code> under <code>default: &amp;default</code>  still getting the same exact error."}, {"owner": {"reputation": 1137, "user_id": 409517, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf42064e4e4c692a24b2856526a5d33d?s=128&d=identicon&r=PG", "display_name": "saadlulu", "link": "https://stackoverflow.com/users/409517/saadlulu"}, "edited": false, "score": 0, "creation_date": 1486540193, "post_id": 42106175, "comment_id": 71383861, "body": "does rake also fail when you try other rake tasks? for example &quot;rake db:migrate&quot; ?"}, {"owner": {"reputation": 1059, "user_id": 3576036, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f1fb048a732909f50ff2e2a267119640?s=128&d=identicon&r=PG&f=1", "display_name": "user3576036", "link": "https://stackoverflow.com/users/3576036/user3576036"}, "reply_to_user": {"reputation": 1137, "user_id": 409517, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf42064e4e4c692a24b2856526a5d33d?s=128&d=identicon&r=PG", "display_name": "saadlulu", "link": "https://stackoverflow.com/users/409517/saadlulu"}, "edited": false, "score": 0, "creation_date": 1486540395, "post_id": 42106175, "comment_id": 71383956, "body": "@saadlulu <code>rake db:create</code> gives <code>developmet already exists</code> <code>test already exists</code> and <code>rake db:migrate</code> didnt give any errors it created all the migrations."}, {"owner": {"reputation": 1137, "user_id": 409517, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf42064e4e4c692a24b2856526a5d33d?s=128&d=identicon&r=PG", "display_name": "saadlulu", "link": "https://stackoverflow.com/users/409517/saadlulu"}, "edited": false, "score": 0, "creation_date": 1486540598, "post_id": 42106175, "comment_id": 71384066, "body": "@user3576036 can you for the sake of debugging this, remove all data from your seed and run &quot;rake db:seed&quot; and tell us what happens"}, {"owner": {"reputation": 1059, "user_id": 3576036, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f1fb048a732909f50ff2e2a267119640?s=128&d=identicon&r=PG&f=1", "display_name": "user3576036", "link": "https://stackoverflow.com/users/3576036/user3576036"}, "reply_to_user": {"reputation": 1137, "user_id": 409517, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf42064e4e4c692a24b2856526a5d33d?s=128&d=identicon&r=PG", "display_name": "saadlulu", "link": "https://stackoverflow.com/users/409517/saadlulu"}, "edited": false, "score": 0, "creation_date": 1486541769, "post_id": 42106175, "comment_id": 71384635, "body": "@saadlulu I removed all the data on <b>seeds.rb</b> and ran <code>rake db:seed</code> no error and didn&#39;t populate any data. And I tried your answer <code>rake db:seed RAILS_ENV=development</code>. Still same error."}, {"owner": {"reputation": 1137, "user_id": 409517, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf42064e4e4c692a24b2856526a5d33d?s=128&d=identicon&r=PG", "display_name": "saadlulu", "link": "https://stackoverflow.com/users/409517/saadlulu"}, "edited": false, "score": 0, "creation_date": 1486541894, "post_id": 42106175, "comment_id": 71384704, "body": "@user3576036 your seed data file might be corrupted, try a single entry now and check. you may also be trying to insert duplicate data, or you are inserting into the wrong database, try my answer below"}, {"owner": {"reputation": 1059, "user_id": 3576036, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f1fb048a732909f50ff2e2a267119640?s=128&d=identicon&r=PG&f=1", "display_name": "user3576036", "link": "https://stackoverflow.com/users/3576036/user3576036"}, "reply_to_user": {"reputation": 1137, "user_id": 409517, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf42064e4e4c692a24b2856526a5d33d?s=128&d=identicon&r=PG", "display_name": "saadlulu", "link": "https://stackoverflow.com/users/409517/saadlulu"}, "edited": false, "score": 0, "creation_date": 1486545476, "post_id": 42106175, "comment_id": 71386879, "body": "@saadlulu as you mentioned I started seeding the instructions from <b>seeds.rb</b> one by by one. It started creating. The issue is with this instruction <code>puts &quot;\\n######################## Creating Super Admin ########################\\n&quot; AdminUser.create!(email: &#39;super_admin@example.com&#39;, name: &#39;Super Admin&#39;, password: &#39;password&#39;, password_confirmation: &#39;password&#39;, role: &#39;super_admin&#39;, active: true)</code>. Do you know what might be the issue with this line?"}, {"owner": {"reputation": 1137, "user_id": 409517, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf42064e4e4c692a24b2856526a5d33d?s=128&d=identicon&r=PG", "display_name": "saadlulu", "link": "https://stackoverflow.com/users/409517/saadlulu"}, "edited": false, "score": 0, "creation_date": 1486621789, "post_id": 42106175, "comment_id": 71426510, "body": "@user3576036 way to find out whats the problem with this is to go to your console and create a new object with that data <code>user = AdminUser.new(email: &#39;super_admin@example.com&#39;, name: &#39;Super Admin&#39;, password: &#39;password&#39;, password_confirmation: &#39;password&#39;, role: &#39;super_admin&#39;, active: true)</code> .. then you can call <code>user.valid?</code> and <code>user.errors.all</code>"}, {"owner": {"reputation": 1059, "user_id": 3576036, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f1fb048a732909f50ff2e2a267119640?s=128&d=identicon&r=PG&f=1", "display_name": "user3576036", "link": "https://stackoverflow.com/users/3576036/user3576036"}, "reply_to_user": {"reputation": 1137, "user_id": 409517, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf42064e4e4c692a24b2856526a5d33d?s=128&d=identicon&r=PG", "display_name": "saadlulu", "link": "https://stackoverflow.com/users/409517/saadlulu"}, "edited": false, "score": 0, "creation_date": 1486631324, "post_id": 42106175, "comment_id": 71431441, "body": "@saadlulu I ran <code>user = AdminUser.new(email: &#39;super_admin@example.com&#39;, name: &#39;Super Admin&#39;, password: &#39;password&#39;, password_confirmation: &#39;password&#39;, role: &#39;super_admin&#39;, active: true)</code> on rails console. And <code>user.valid?</code> gave <code>=&gt; true </code>."}, {"owner": {"reputation": 1137, "user_id": 409517, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf42064e4e4c692a24b2856526a5d33d?s=128&d=identicon&r=PG", "display_name": "saadlulu", "link": "https://stackoverflow.com/users/409517/saadlulu"}, "edited": false, "score": 0, "creation_date": 1486633242, "post_id": 42106175, "comment_id": 71432807, "body": "@user3576036 try to save that object, Im suspecting that you already have that record and your primary key/validation is firing up. check and let us know whats the result please. oh and double check that your seed and console are working on the same environment."}, {"owner": {"reputation": 1059, "user_id": 3576036, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f1fb048a732909f50ff2e2a267119640?s=128&d=identicon&r=PG&f=1", "display_name": "user3576036", "link": "https://stackoverflow.com/users/3576036/user3576036"}, "reply_to_user": {"reputation": 1137, "user_id": 409517, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf42064e4e4c692a24b2856526a5d33d?s=128&d=identicon&r=PG", "display_name": "saadlulu", "link": "https://stackoverflow.com/users/409517/saadlulu"}, "edited": false, "score": 0, "creation_date": 1486634533, "post_id": 42106175, "comment_id": 71433657, "body": "@saadlulu I ran <code>user.save</code> and it gave     &#39;  AdminUser Exists (0.9ms)  SELECT  1 AS one FROM <code>admin_users</code> WHERE <code>admin_users</code>.<code>email</code> = BINARY &#39;super_admin@example.com&#39; LIMIT 1 `  <code>UserMailer#confirmation_instructions: processed outbound mail in 320.4ms </code> and again followed that template error <code>ActionView::Template::Error: Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true </code>"}, {"owner": {"reputation": 1059, "user_id": 3576036, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f1fb048a732909f50ff2e2a267119640?s=128&d=identicon&r=PG&f=1", "display_name": "user3576036", "link": "https://stackoverflow.com/users/3576036/user3576036"}, "reply_to_user": {"reputation": 1137, "user_id": 409517, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf42064e4e4c692a24b2856526a5d33d?s=128&d=identicon&r=PG", "display_name": "saadlulu", "link": "https://stackoverflow.com/users/409517/saadlulu"}, "edited": false, "score": 0, "creation_date": 1486635312, "post_id": 42106175, "comment_id": 71434164, "body": "@saadlulu After I ran the above coomand and it said &quot;AdminUser Exists&quot;  I checked on console running <code>AdminUser.all</code> it returned no records at all and no super_admin object"}, {"owner": {"reputation": 1137, "user_id": 409517, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf42064e4e4c692a24b2856526a5d33d?s=128&d=identicon&r=PG", "display_name": "saadlulu", "link": "https://stackoverflow.com/users/409517/saadlulu"}, "edited": false, "score": 0, "creation_date": 1486643751, "post_id": 42106175, "comment_id": 71439841, "body": "@user3576036 well you have many options to decide from now, either find the user thats causing the problem and remove it, remove all users if all the users are fake, connect to another empty database if all the data is in the seed and you dont have any real data. go nuts and best of luck :)"}], "answers": [{"tags": [], "owner": {"reputation": 1137, "user_id": 409517, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/bf42064e4e4c692a24b2856526a5d33d?s=128&d=identicon&r=PG", "display_name": "saadlulu", "link": "https://stackoverflow.com/users/409517/saadlulu"}, "is_accepted": false, "score": 0, "last_activity_date": 1486540900, "creation_date": 1486540900, "answer_id": 42107634, "question_id": 42106175, "link": "https://stackoverflow.com/questions/42106175/when-i-run-rake-dbseed-i-keep-getting-rake-aborted-actionviewtemplateerr/42107634#42107634", "title": "When I run rake db:seed, I keep getting &quot;rake aborted! ActionView::Template::Error: Missing host to link to! &quot;", "body": "<p>I guess you are trying to populate the development environment with seed, if that was the case then try this </p>\n\n<pre><code>rake db:seed RAILS_ENV=development\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1059, "user_id": 3576036, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f1fb048a732909f50ff2e2a267119640?s=128&d=identicon&r=PG&f=1", "display_name": "user3576036", "link": "https://stackoverflow.com/users/3576036/user3576036"}, "is_accepted": true, "score": 0, "last_activity_date": 1487151104, "creation_date": 1487151104, "answer_id": 42245452, "question_id": 42106175, "link": "https://stackoverflow.com/questions/42106175/when-i-run-rake-dbseed-i-keep-getting-rake-aborted-actionviewtemplateerr/42245452#42245452", "title": "When I run rake db:seed, I keep getting &quot;rake aborted! ActionView::Template::Error: Missing host to link to! &quot;", "body": "<p>I got it. I forgot to answer it sorry. The solution might vary for this particular error for everyone. But for me I had to do the following changes in the following files.</p>\n\n<p>In application.yml I added</p>\n\n<pre><code>SMTP_HOST: 'localhost:3000'\n</code></pre>\n\n<p>And in development.rb I added </p>\n\n<pre><code>config.action_mailer.raise_delivery_errors = false\n</code></pre>\n\n<p>Seeding done. </p>\n"}], "owner": {"reputation": 1059, "user_id": 3576036, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f1fb048a732909f50ff2e2a267119640?s=128&d=identicon&r=PG&f=1", "display_name": "user3576036", "link": "https://stackoverflow.com/users/3576036/user3576036"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 42245452, "answer_count": 2, "score": 1, "last_activity_date": 1487151104, "creation_date": 1486535382, "last_edit_date": 1486537537, "question_id": 42106175, "link": "https://stackoverflow.com/questions/42106175/when-i-run-rake-dbseed-i-keep-getting-rake-aborted-actionviewtemplateerr", "title": "When I run rake db:seed, I keep getting &quot;rake aborted! ActionView::Template::Error: Missing host to link to! &quot;", "body": "<p>I am trying to run our company product source code on a local host. I have tried placing </p>\n\n<pre><code>config.action_mailer.default_url_options = { host: \"localhost:3000\" }\n</code></pre>\n\n<p>in all development.rb, test.rb and production.rb.\nBut when I run </p>\n\n<pre><code>rake db:seed  \n</code></pre>\n\n<p>I still keep getting</p>\n\n<pre><code>ActionView::Template::Error: Missing host to link to! Please provide the :host parameter, set default_url_options[:host], or set :only_path to true.\n</code></pre>\n\n<p>I am adding my config/database.yml file as suggested in the edit\nconfig/database.yml</p>\n\n<pre><code>default: &amp;default\n  adapter: mysql2\n  encoding: utf8\n  pool: 5\n  username: root\n  password: ******\n  socket: /var/run/mysqld/mysqld.sock\n\ndevelopment:\n  &lt;&lt;: *default\n  database: company_development\n\n# Warning: The database defined as \"test\" will be erased and\n# re-generated from your development database when you run \"rake\".\n# Do not set this db to the same as development or production.\ntest:\n  &lt;&lt;: *default\n  database: coompany_test\n\n# As with config/secrets.yml, you never want to store sensitive information,\n# like your database password, in your source code. If your source code is\n# ever seen by anyone, they now have access to your database.\n#\n# Instead, provide the password as a unix environment variable when you boot\n# the app. Read http://guides.rubyonrails.org/configuring.html#configuring-a-database\n# for a full rundown on how to provide these environment variables in a\n# production deployment.\n#\n# On Heroku and other platform providers, you may have a full connection URL\n# available as an environment variable. For example:\n#\n#   DATABASE_URL=\"mysql2://myuser:mypass@localhost/somedatabase\"\n#\n# You can use this database configuration with:\n#\n#   production:\n#     url: &lt;%= ENV['DATABASE_URL'] %&gt;\n#\nproduction:\n  &lt;&lt;: *default\n  database: company_production\n  username: company\n  password: &lt;%= ****** %&gt;\n</code></pre>\n\n<p>Any help would be much appreciated. Thank You.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "axlsx"], "comments": [{"owner": {"reputation": 6124, "user_id": 461887, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/73a86b3136bfdda99045ba5de86dd9ec?s=128&d=identicon&r=PG", "display_name": "sayth", "link": "https://stackoverflow.com/users/461887/sayth"}, "edited": false, "score": 0, "creation_date": 1486547725, "post_id": 42105313, "comment_id": 71388580, "body": "If the first example on the project page doesn&#39;t help please clarify why. <a href=\"https://github.com/randym/axlsx/blob/master/examples\" rel=\"nofollow noreferrer\">github.com/randym/axlsx/blob/master/examples</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1225, "user_id": 5724342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0fc4bbc261a7a2a233a196a0b655fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gurmukh Singh", "link": "https://stackoverflow.com/users/5724342/gurmukh-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1486551109, "creation_date": 1486551109, "answer_id": 42111108, "question_id": 42105313, "link": "https://stackoverflow.com/questions/42105313/how-to-add-a-column-to-an-excel-in-rails-using-axlsx-gem/42111108#42111108", "title": "How to add a column to an excel in rails using Axlsx gem?", "body": "<p>try something like this:</p>\n\n<p>adding first row with column names, then second row with column values</p>\n\n<pre><code>sheet.add_row ['col 1', 'col 2', 'col 3', 'col 4', 'col5']\nsheet.add_row [1, 2, 0.3, 4, 5.0]\n</code></pre>\n\n<p>and depending on the conditions you want you can modify as required, for example:</p>\n\n<pre><code>  #Hide the 5th column\n  sheet.column_info[4].hidden = true\n</code></pre>\n\n<p>you could encapsulate this within a condition to hide or display a column</p>\n"}], "owner": {"reputation": 17, "user_id": 5043738, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/471b73c2c2edb2a153428370b78f15bf?s=128&d=identicon&r=PG&f=1", "display_name": "Pavani Akula", "link": "https://stackoverflow.com/users/5043738/pavani-akula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 777, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486551109, "creation_date": 1486531336, "question_id": 42105313, "link": "https://stackoverflow.com/questions/42105313/how-to-add-a-column-to-an-excel-in-rails-using-axlsx-gem", "title": "How to add a column to an excel in rails using Axlsx gem?", "body": "<p>I have few column names defined in my choices and I am adding it to the sheet as a first row but, one of the column should not be present all the time, it should vary conditionally, so I want to add a specific column based on some condition.</p>\n\n<p>Here is my code\n<strong>sheet.add_row choices, style: style_shout</strong></p>\n\n<p>NOW, How should I add a <strong>column</strong> to the sheet?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 2, "creation_date": 1486532776, "post_id": 42105293, "comment_id": 71380460, "body": "Indent this code correctly."}, {"owner": {"reputation": 941, "user_id": 5809075, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-G2XZLxcyRfE/AAAAAAAAAAI/AAAAAAAAAGI/udCZbAA3tkk/photo.jpg?sz=128", "display_name": "Hizqeel", "link": "https://stackoverflow.com/users/5809075/hizqeel"}, "edited": false, "score": 1, "creation_date": 1486570750, "post_id": 42105293, "comment_id": 71404948, "body": "What error are you getting?"}, {"owner": {"reputation": 27697, "user_id": 4433386, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/hbHEL.png?s=128&g=1", "display_name": "Marcus M&#252;ller", "link": "https://stackoverflow.com/users/4433386/marcus-m%c3%bcller"}, "edited": false, "score": 0, "creation_date": 1515952416, "post_id": 42105293, "comment_id": 83487285, "body": "Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: How to create a Minimal, Complete, and Verifiable example."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 7529683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0amwS.jpg?s=128&g=1", "display_name": "dennisnderitu", "link": "https://stackoverflow.com/users/7529683/dennisnderitu"}, "edited": false, "score": 0, "creation_date": 1486534831, "post_id": 42105692, "comment_id": 71381238, "body": "thanks. But is still isn&#39;t working"}, {"owner": {"reputation": 1484, "user_id": 312105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/741b8dd0ba8f8b40dd1351b0548fc60e?s=128&d=identicon&r=PG", "display_name": "MKumar", "link": "https://stackoverflow.com/users/312105/mkumar"}, "reply_to_user": {"reputation": 17, "user_id": 7529683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0amwS.jpg?s=128&g=1", "display_name": "dennisnderitu", "link": "https://stackoverflow.com/users/7529683/dennisnderitu"}, "edited": false, "score": 0, "creation_date": 1486534888, "post_id": 42105692, "comment_id": 71381265, "body": "What is the error you are getting?"}], "tags": [], "owner": {"reputation": 1484, "user_id": 312105, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/741b8dd0ba8f8b40dd1351b0548fc60e?s=128&d=identicon&r=PG", "display_name": "MKumar", "link": "https://stackoverflow.com/users/312105/mkumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1486533199, "creation_date": 1486533199, "answer_id": 42105692, "question_id": 42105293, "link": "https://stackoverflow.com/questions/42105293/ruby-on-rails-modelling-users/42105692#42105692", "title": "Ruby on Rails Modelling users", "body": "<p>Your model should looks like below. </p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-.]+\\.[a-z]+\\z/i\n\n  before_save { self.email = email.downcase }\n  validates :name,  presence: true, length: { maximum: 50 }\n  validates :email, presence: true, length: { maximum: 255 },\n            format: { with: VALID_EMAIL_REGEX },\n            uniqueness: { case_sensitive: false }\n  validates :password, presence: true, length:{ minimum: 6 }\n\n  has_secure_password\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1163, "user_id": 1826058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4182d58570b11f50ad0baf667b80300?s=128&d=identicon&r=PG", "display_name": "kaspernj", "link": "https://stackoverflow.com/users/1826058/kaspernj"}, "is_accepted": false, "score": 0, "last_activity_date": 1486538942, "creation_date": 1486538942, "answer_id": 42107131, "question_id": 42105293, "link": "https://stackoverflow.com/questions/42105293/ruby-on-rails-modelling-users/42107131#42107131", "title": "Ruby on Rails Modelling users", "body": "<p>You probably also want to change this line:</p>\n\n<pre><code>before_save { self.email = email.downcase }\n</code></pre>\n\n<p>Into this:</p>\n\n<pre><code>before_validation { self.email = email.downcase }\n</code></pre>\n\n<p>The way this is going to go down is:</p>\n\n<ol>\n<li>Validation</li>\n<li>Before save callbacks</li>\n<li>Actual save</li>\n</ol>\n\n<p>So a user will use uppercase letters in his email, then save and the validations will fail because of the use of uppercase letters.</p>\n\n<p>So you want to set his email to lower case letters BEFORE the validations and not after :-)</p>\n"}, {"tags": [], "owner": {"reputation": 941, "user_id": 5809075, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-G2XZLxcyRfE/AAAAAAAAAAI/AAAAAAAAAGI/udCZbAA3tkk/photo.jpg?sz=128", "display_name": "Hizqeel", "link": "https://stackoverflow.com/users/5809075/hizqeel"}, "is_accepted": false, "score": 1, "last_activity_date": 1486551755, "creation_date": 1486551755, "answer_id": 42111332, "question_id": 42105293, "link": "https://stackoverflow.com/questions/42105293/ruby-on-rails-modelling-users/42111332#42111332", "title": "Ruby on Rails Modelling users", "body": "<p>In your <code>User</code> model try this:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n\n  before_validation { self.email = email.downcase! }\n  validates :name, presence: true, length: { maximum: 50 }\n  VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-]+(\\.[a-z\\d\\-]+)*\\.[a-z]+\\z/i\n  validates :email, presence: true, length: { maximum: 255 },\n                                    format: { with: VALID_EMAIL_REGEX },\n                                    uniqueness: { case_sensitive: false }\n\n  has_secure_password\n\n  validates :password, presence: true, length: { minimum: 6 }\nend\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 7529683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0amwS.jpg?s=128&g=1", "display_name": "dennisnderitu", "link": "https://stackoverflow.com/users/7529683/dennisnderitu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "closed_date": 1516002447, "answer_count": 3, "score": -1, "last_activity_date": 1486551755, "creation_date": 1486531209, "last_edit_date": 1486533922, "question_id": 42105293, "link": "https://stackoverflow.com/questions/42105293/ruby-on-rails-modelling-users", "closed_reason": "Not suitable for this site", "title": "Ruby on Rails Modelling users", "body": "<pre><code>class User &lt; ActiveRecord::Base\n\n\n  before_save { self.email = email.downcase }\n  (validates :name,  presence: true, length: { maximum: 50 })\n   VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-.]+\\.[a-z]+\\z/i\n  validates :email, presence: true, length: { maximum: 255 };\n    format: { with: VALID_EMAIL_REGEX };              \n    uniqueness: { case_sensitive: false },\n  has_secure_password:\n\n  (validates :password, presence: true, length:{ minimum: 6 } )  \nend\n</code></pre>\n\n<p>Someone help me to figure out where this syntax has an error</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1486523462, "post_id": 42103952, "comment_id": 71377779, "body": "If this is data from your database, this is almost certainly something you should be doing in your ActiveRecord query (<code>order</code>), <i>not</i> with <code>sort</code>."}, {"owner": {"reputation": 2538, "user_id": 6847234, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/9e6c83419733b2645e9e9c66aaf5e959?s=128&d=identicon&r=PG&f=1", "display_name": "dev_054", "link": "https://stackoverflow.com/users/6847234/dev-054"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1486523563, "post_id": 42103952, "comment_id": 71377800, "body": "Unfortunately this <code>data</code> isn&#39;t coming from my <i>database</i>. This is the result of some math calculations that I did in my <code>controller</code>. I just got stucked with this, it&#39;s a bit complex."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1486527521, "post_id": 42103952, "comment_id": 71378773, "body": "1.In your example, the values of <code>:project_dependents_ids</code> are empty arrays or arrays containing a single dependent id. The name of the key suggests those arrays may contain more than one dependent id. Can they? 2. Can the ids be such that 2 must follow 1, 3 must follow 2 and 1 must follow 3 (in which case that impossibility would have to be identified in code)? This is not an easy problem."}, {"owner": {"reputation": 2538, "user_id": 6847234, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/9e6c83419733b2645e9e9c66aaf5e959?s=128&d=identicon&r=PG&f=1", "display_name": "dev_054", "link": "https://stackoverflow.com/users/6847234/dev-054"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1486527594, "post_id": 42103952, "comment_id": 71378796, "body": "@CarySwoveland: 1. Yes, <code>:project_dependents_ids</code> can contain more than one dependent. 2. Well, it&#39;s a problem (a circular dependence) that I&#39;ve already solved (or I think I&#39;ve solved) before do this kind of sort. Yes, I know it isn&#39;t an easy problem, that&#39;s why I&#39;m stucked :("}], "answers": [{"comments": [{"owner": {"reputation": 2538, "user_id": 6847234, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/9e6c83419733b2645e9e9c66aaf5e959?s=128&d=identicon&r=PG&f=1", "display_name": "dev_054", "link": "https://stackoverflow.com/users/6847234/dev-054"}, "edited": false, "score": 0, "creation_date": 1486529715, "post_id": 42104749, "comment_id": 71379452, "body": "Awesome! I just tested your <code>code</code> here and it really works, different than mine (which currently is a complete mess). Thanks for your answer, it helped me a lot. Now I&#39;ll study your <code>code</code> ^^. By the way, I took a look in Tsort module and it&#39;s so great, I&#39;ve never heard about it before.. too bad that it doesn&#39;t fit in my case."}, {"owner": {"reputation": 2538, "user_id": 6847234, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/9e6c83419733b2645e9e9c66aaf5e959?s=128&d=identicon&r=PG&f=1", "display_name": "dev_054", "link": "https://stackoverflow.com/users/6847234/dev-054"}, "edited": false, "score": 0, "creation_date": 1486600257, "post_id": 42104749, "comment_id": 71420444, "body": "Hello @Amadan, I was thinking about <code>TSort</code>.. and I think it can fit in my case if I just sort the items by <code>distance</code> first and then call <code>.tsort</code>. Or is there something that I&#39;m missing?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 2538, "user_id": 6847234, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/9e6c83419733b2645e9e9c66aaf5e959?s=128&d=identicon&r=PG&f=1", "display_name": "dev_054", "link": "https://stackoverflow.com/users/6847234/dev-054"}, "edited": false, "score": 0, "creation_date": 1486602804, "post_id": 42104749, "comment_id": 71421094, "body": "Oh, nice. I tried sorting the <code>each_child</code> order, but didn&#39;t try that. Cheers."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 3, "last_activity_date": 1486533488, "last_edit_date": 1486533488, "creation_date": 1486528170, "answer_id": 42104749, "question_id": 42103952, "link": "https://stackoverflow.com/questions/42103952/ruby-implementing-custom-sort/42104749#42104749", "title": "Ruby - Implementing custom sort", "body": "<p>Without the <code>distance</code> requirement, Ruby's <code>TSort</code> is exactly the tool for the job. However, I couldn't figure out how to add an extra requirement to the topological sort, so...</p>\n\n<p>One idea is to start with a sorted array, then rearrange it by pushing each element just past all of its dependents. E.g. Starting with the sorted order</p>\n\n<pre><code>[3, 4, 5, 2, 1]\n</code></pre>\n\n<p>we leave 3 alone (no dependents), leave 4 alone (all its dependents are left of it), leave 5 alone (no dependents), push 2 after 1 (because 1 is its dependent and to its right), then leave 1 alone (all its dependents are left of it), and leave 2 alone (all its dependents are left of it).</p>\n\n<p>This will result in an infinite loop if you have circular dependencies. It can be defended against, but I'll leave it as an exercise to the reader :) (E.g. you could keep a <code>Set</code> of all nodes pushed at <code>curr</code>, and clear it when <code>curr</code> is incremented; if you try to re-push the same one, raise an error)</p>\n\n<pre><code>array = hash # because your naming makes no sense :)\nhash = array.each.with_object({}) { |o, h| h[o[:project_id]] = o }\n\norder = array.map { |o| o[:project_id] }.sort_by { |id| -hash[id][:distance] }\n\norder.each_index do |curr|\n  dependents = hash[order[curr]][:project_dependents_ids]\n  max_dep_index = dependents.map { |d| order.index(d) }.max\n  if max_dep_index&amp;.&gt; curr\n    order[curr .. max_dep_index - 1], order[max_dep_index] =\n      order[curr + 1 .. max_dep_index], order[curr]\n    redo\n  end\nend\n\nresult = hash.values_at(*order)\n</code></pre>\n\n<p>EDIT: This is not terribly efficient, all those <code>.index</code> calls, and I have this feeling it should be possible to do it better...</p>\n\n<p>EDIT2: Made the loop more Rubyish.</p>\n"}], "owner": {"reputation": 2538, "user_id": 6847234, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/9e6c83419733b2645e9e9c66aaf5e959?s=128&d=identicon&r=PG&f=1", "display_name": "dev_054", "link": "https://stackoverflow.com/users/6847234/dev-054"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 42104749, "answer_count": 1, "score": 2, "last_activity_date": 1486533488, "creation_date": 1486523241, "question_id": 42103952, "link": "https://stackoverflow.com/questions/42103952/ruby-implementing-custom-sort", "title": "Ruby - Implementing custom sort", "body": "<p>I have this <code>array</code> of <code>Hash</code>:</p>\n\n<pre><code>hash =    \n[\n  {\n    distance: 0.3997651063189804, project_id: 1, project_name: \"Project 1\", project_dependents_ids: [4]\n  },\n  {\n    distance: 0.414026818885287, project_id: 2, project_name: \"Project 2\", project_dependents_ids: [1]\n  },\n  {\n    distance: 0.6259577862775509, project_id: 3, project_name: \"Project 3\", project_dependents_ids: []\n  },\n  {\n    distance: 0.43719371056189227, project_id: 4, project_name: \"Project 4\", project_dependents_ids: [3]\n  },\n  {\n    distance: 0.4341702282185951, project_id: 5, project_name: \"Project 5\", project_dependents_ids: []\n  }\n]\n</code></pre>\n\n<p>I have to sort it by <code>distance</code> first, BUT, if the <code>project</code> has <code>project_dependents</code> (<strong>self association</strong>), it must comes after the <code>project</code> <em>associated</em>.</p>\n\n<p>Ex:</p>\n\n<p>A simple sort by <strong>distances</strong>, as below:</p>\n\n<pre><code>hash.sort! { |a, b| b[:distance] &lt;=&gt; a[:distance] }\n</code></pre>\n\n<p>... will result in:</p>\n\n<ul>\n<li>Project 3</li>\n<li>Project 4</li>\n<li>Project 5</li>\n<li>Project 2</li>\n<li>Project 1</li>\n</ul>\n\n<p>But this result isn't 100% what I want. I want to sort it also by the <code>project_dependents</code>. Ex:</p>\n\n<p>The result must be:</p>\n\n<ul>\n<li>Project 3</li>\n<li>Project 4</li>\n<li>Project 5</li>\n<li>Project 1 # Project 1 has less distance, BUT project 2 depends of it.</li>\n<li>Project 2</li>\n</ul>\n\n<p>It's just a <em>simple</em> example. A project can have many self association ids and so on..</p>\n\n<p>So, I want to know how I can implement this kind of sort. Maybe a general idea would be helpful. All the implementations that I made here got giant code and incorrect result.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bash", "rvm"], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 5633365, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/0b838878431e4cbe1d921a8982713364?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/5633365/rohan"}, "edited": false, "score": 0, "creation_date": 1486520415, "post_id": 42103512, "comment_id": 71377025, "body": "So I&#39;ve tried these steps, and unfortunately gotten the same output again: df: /Users/rohan/.rvm: No such file or directory"}, {"owner": {"reputation": 93, "user_id": 5633365, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/0b838878431e4cbe1d921a8982713364?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/5633365/rohan"}, "edited": false, "score": 0, "creation_date": 1486521386, "post_id": 42103512, "comment_id": 71377268, "body": "Thanks for updating the answer, but unfortunately it still doesn&#39;t work. Still getting the same error message as above /:. Really not sure where anything could have gone wrong."}], "tags": [], "owner": {"reputation": 2562, "user_id": 4344085, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ilSIn.jpg?s=128&g=1", "display_name": "Khanh Pham", "link": "https://stackoverflow.com/users/4344085/khanh-pham"}, "is_accepted": false, "score": 0, "last_activity_date": 1486521227, "last_edit_date": 1486521227, "creation_date": 1486520000, "answer_id": 42103512, "question_id": 42103395, "link": "https://stackoverflow.com/questions/42103395/rvm-installation-errors/42103512#42103512", "title": "RVM Installation Errors", "body": "<p>You can do these steps as below:</p>\n\n<ol>\n<li>gpg --keyserver hkp://keys.gnupg.net --recv-keys 409B6B1796C275462A1703113804BB82D39DC0E3</li>\n<li>\\curl -sSL <a href=\"https://get.rvm.io\" rel=\"nofollow noreferrer\">https://get.rvm.io</a> | bash -s stable</li>\n</ol>\n\n<p>for more informations, you can check at official document:\n<a href=\"http://rvm.io/\" rel=\"nofollow noreferrer\">http://rvm.io/</a></p>\n\n<p><strong>update</strong>: You can try to do this command</p>\n\n<p><code>curl -sSL https://rvm.io/mpapis.asc | gpg --import -</code></p>\n\n<p>then run <code>\\curl -sSL https://get.rvm.io | bash -s stable</code> again</p>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 5633365, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/0b838878431e4cbe1d921a8982713364?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/5633365/rohan"}, "edited": false, "score": 0, "creation_date": 1486532038, "post_id": 42105395, "comment_id": 71380189, "body": "OMG YES! It works! Thank you so much for letting me know I was on the verge of chucking my laptop out the window"}], "tags": [], "owner": {"reputation": 11, "user_id": 7532261, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-uaXFSdpUqJk/AAAAAAAAAAI/AAAAAAAAA_Y/OMfSD8wAB1k/photo.jpg?sz=128", "display_name": "Diane Liu", "link": "https://stackoverflow.com/users/7532261/diane-liu"}, "is_accepted": false, "score": 1, "last_activity_date": 1486531807, "creation_date": 1486531807, "answer_id": 42105395, "question_id": 42103395, "link": "https://stackoverflow.com/questions/42103395/rvm-installation-errors/42105395#42105395", "title": "RVM Installation Errors", "body": "<p>I was experiencing the same issue and now it works! You did nothing wrong. It's something wrong with the RVM website. Try to run the same command again and you will see everything works now!</p>\n"}], "owner": {"reputation": 93, "user_id": 5633365, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/0b838878431e4cbe1d921a8982713364?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/5633365/rohan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1486531807, "creation_date": 1486519202, "question_id": 42103395, "link": "https://stackoverflow.com/questions/42103395/rvm-installation-errors", "title": "RVM Installation Errors", "body": "<p>I'm having some issues regarding the installation of RVM. I'm working with a freshly clean-installed mac, so previous folders and that sort of thing shouldn't be an issue. The steps I've taken so far are as follows:</p>\n\n<ol>\n<li>Downloaded XCode Command Line Tools</li>\n<li>Installed Homebrew</li>\n<li>Verified I had Git installed</li>\n<li>Used Homebrew to install gpg</li>\n<li>Installed the gpg key thing</li>\n<li><p>Used the <code>\\curl -L https://get.rvm.io | bash -s stable</code> command to try to install RVM, and was met with this error:</p>\n\n<blockquote>\n  <p>df: /Users/rohan/.rvm: No such file or directory</p>\n</blockquote></li>\n</ol>\n\n<p>I assumed that the command in number 6 automatically created the .rvm folder, so I'm a little unsure of how to proceed. Any help would be greatly appreciated!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 40865, "user_id": 10431, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/22aac6106c44ae4078bd4c0a564714e0?s=128&d=identicon&r=PG", "display_name": "Keith Nicholas", "link": "https://stackoverflow.com/users/10431/keith-nicholas"}, "edited": false, "score": 1, "creation_date": 1486517613, "post_id": 42103123, "comment_id": 71376332, "body": "as an alternative, host your own mini api that proxiesnws data that you know works with your old stack"}, {"owner": {"reputation": 336, "user_id": 2543937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uzQpz.jpg?s=128&g=1", "display_name": "Alien_AV", "link": "https://stackoverflow.com/users/2543937/alien-av"}, "edited": false, "score": 0, "creation_date": 1486519366, "post_id": 42103123, "comment_id": 71376788, "body": "try taking a traffic capture (eg tcpdump/Wireshark) on your dev machine, of working and not working connection. if difference won&#39;t be evident from there, you can try posting the http requests comparison here"}, {"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1486520745, "post_id": 42103123, "comment_id": 71377104, "body": "Would you mind adding a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? Just some code that I can run to repro the issue?"}, {"owner": {"reputation": 588, "user_id": 1404185, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c78e2c600fb4ce64d10d95eeb47abf4?s=128&d=identicon&r=PG", "display_name": "chetstone", "link": "https://stackoverflow.com/users/1404185/chetstone"}, "reply_to_user": {"reputation": 336, "user_id": 2543937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uzQpz.jpg?s=128&g=1", "display_name": "Alien_AV", "link": "https://stackoverflow.com/users/2543937/alien-av"}, "edited": false, "score": 0, "creation_date": 1486524429, "post_id": 42103123, "comment_id": 71378035, "body": "@Alien_AV that&#39;s the ticket. Net:HTTP 1.8.6 was not including a User-Agent field. I added one like <a href=\"http://stackoverflow.com/a/5798178/1404185\">this</a> and that fixed the problem. Thanks! (Maybe you can post your comment as an answer?)"}], "answers": [{"tags": [], "owner": {"reputation": 336, "user_id": 2543937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uzQpz.jpg?s=128&g=1", "display_name": "Alien_AV", "link": "https://stackoverflow.com/users/2543937/alien-av"}, "is_accepted": true, "score": 2, "last_activity_date": 1486537756, "creation_date": 1486537756, "answer_id": 42106797, "question_id": 42103123, "link": "https://stackoverflow.com/questions/42103123/how-to-work-around-obsolete-networking-protocol-in-ruby-1-8-6/42106797#42106797", "title": "How to work around obsolete networking protocol in ruby 1.8.6", "body": "<p>According to your traffic capture analysis, the issue is that 1.8.6 doesn't add HTTP User-Agent field  by default.\nOne way to add it is:</p>\n\n<pre><code>http = Net::HTTP.new(\"your.site.com\", 80)\nreq = Net::HTTP::Get.new(\"/path/to/the/page.html\", {'User-Agent' =&gt; 'your_agent'})\nresponse = http.request(req)\nputs response.body\n</code></pre>\n"}], "owner": {"reputation": 588, "user_id": 1404185, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9c78e2c600fb4ce64d10d95eeb47abf4?s=128&d=identicon&r=PG", "display_name": "chetstone", "link": "https://stackoverflow.com/users/1404185/chetstone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 42106797, "answer_count": 1, "score": 1, "last_activity_date": 1486537756, "creation_date": 1486517447, "question_id": 42103123, "link": "https://stackoverflow.com/questions/42103123/how-to-work-around-obsolete-networking-protocol-in-ruby-1-8-6", "title": "How to work around obsolete networking protocol in ruby 1.8.6", "body": "<p>I have a lot of software running on an embedded system with ruby 1.8.6. One script queries the national weather service and a few days ago it stopped working: I started getting <code>&lt;H1&gt;Access Denied&lt;/H1&gt;</code>. This is a public interface and there's no API key. </p>\n\n<p>I get the same error when I run this script using ruby 1.8.6 on my development machine. When I run it with ruby 1.9, the error doesn't happen.</p>\n\n<p>Evidently the NWS modified their HTTP protocol in some way last week that is incompatible with Net:HTTP in ruby 1.8.6</p>\n\n<p>The URL is \"<a href=\"http://graphical.weather.gov/xml/sample_products/browser_interface/ndfdXMLclient.php?lat=37&amp;lon=-105&amp;product=time-series&amp;begin=&amp;end=&amp;sky=sky&amp;maxt=maxt&amp;mint=mint&amp;Submit=Submit\" rel=\"nofollow noreferrer\">http://graphical.weather.gov/xml/sample_products/browser_interface/ndfdXMLclient.php?lat=37&amp;lon=-105&amp;product=time-series&amp;begin=&amp;end=&amp;sky=sky&amp;maxt=maxt&amp;mint=mint&amp;Submit=Submit</a>\"</p>\n\n<p>I get a good response when I use curl.</p>\n\n<p>The code is:\n<code>begin\n  xml = Net::HTTP.get_response(URI.parse(url)).body\nrescue</code></p>\n\n<p>I have RestClient 1.6 and tried substituting that for Net:HTTP but it just uses Net:HTTP internally and I get a <code>403 Forbidden</code>.</p>\n\n<p>Does anyone have any idea what could have changed in the protocol and a way to work around it?</p>\n\n<p>I think I may be able to get updated firmware from the system manufacturer but I hesitate to go that route because it will force rewriting of many rather fragile hacks.</p>\n"}, {"tags": ["ruby", "websocket", "eventmachine", "faye"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1486519009, "post_id": 42103120, "comment_id": 71376705, "body": "what is the use of the call_qes method? You&#39;re using an instance variable as a sort of global that you can access in and out of threads. For this type of thing you should use something more dependably atomic, like a database."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 1, "creation_date": 1486522907, "post_id": 42103120, "comment_id": 71377625, "body": "Why not use a websocket framework (I&#39;m the author of one, <a href=\"http://www.plezi.io\" rel=\"nofollow noreferrer\">plezi.io</a>, so I&#39;m curious)?"}, {"owner": {"reputation": 33, "user_id": 7427392, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oV0ocAjnd2Q/AAAAAAAAAAI/AAAAAAAAAHs/qW6xcvt-Vro/photo.jpg?sz=128", "display_name": "Leigh K", "link": "https://stackoverflow.com/users/7427392/leigh-k"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1486527411, "post_id": 42103120, "comment_id": 71378732, "body": "@maxple So basically the websocket server I am accessing is basicaly rest over websokets.  It takes a json request and returns a json response.  All I am trying to  do it be able to do multiple requests/response on the same websocket connection really."}, {"owner": {"reputation": 33, "user_id": 7427392, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oV0ocAjnd2Q/AAAAAAAAAAI/AAAAAAAAAHs/qW6xcvt-Vro/photo.jpg?sz=128", "display_name": "Leigh K", "link": "https://stackoverflow.com/users/7427392/leigh-k"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1486527521, "post_id": 42103120, "comment_id": 71378772, "body": "@myst I&#39;ll take a look.  To be honest the reason I ended up with faye-websocket is it was the first thing I found an example for that let me specify client certs for (which is what options is above).  So if plezi supports WSS and client certs its a definite option."}, {"owner": {"reputation": 33, "user_id": 7427392, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oV0ocAjnd2Q/AAAAAAAAAAI/AAAAAAAAAHs/qW6xcvt-Vro/photo.jpg?sz=128", "display_name": "Leigh K", "link": "https://stackoverflow.com/users/7427392/leigh-k"}, "edited": false, "score": 0, "creation_date": 1486528005, "post_id": 42103120, "comment_id": 71378909, "body": "Oh.. and it needs to run on windows."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1486544771, "post_id": 42103120, "comment_id": 71386389, "body": "@LeighK , plezi.io requires Linux/BSD and supports <code>wss</code> only behind a TLS proxy (such as nginx)... so it might not fit your needs... This is because plezi.io utilizes the <a href=\"https://github.com/boazsegev/iodine/blob/master/SPEC-Websocket-Draft.md\" rel=\"nofollow noreferrer\">proposed Websocket Rack Specification</a> which <a href=\"https://github.com/rack/rack/pull/1107\" rel=\"nofollow noreferrer\">was discussed at length</a> but seems to be only supported by iodine, which is a young and fast server written in C for BSD / Linux systems."}], "owner": {"reputation": 33, "user_id": 7427392, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oV0ocAjnd2Q/AAAAAAAAAAI/AAAAAAAAAHs/qW6xcvt-Vro/photo.jpg?sz=128", "display_name": "Leigh K", "link": "https://stackoverflow.com/users/7427392/leigh-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1486517439, "creation_date": 1486517439, "question_id": 42103120, "link": "https://stackoverflow.com/questions/42103120/creating-a-class-over-faye-websocket-in-ruby", "title": "creating a class over faye-websocket in ruby", "body": "<p>I am not experienced with event driven programming and I am struggling to get my head around how I would write a class on top of faye-websocket to hide the complexity of what I am doing.  Here is the idea of what I want to do:</p>\n\n<pre><code>require 'faye/websocket'\nrequire 'eventmachine'\nrequire 'pp'\n\nclass Rubix\n\ndef initialize(url, options)\n@response = {}\nEM.run {\n  ws = Faye::WebSocket::Client.new(url, nil, options)\n\n  ws.on :open do |event|\n...\n  end\n\n  ws.on :error do |event|\n    p [:error]\n  end\n\n  ws.on :message do |event|\n    resp = JSON.parse(event.data)\n    rid = resp['id']\n    response[rid] = resp\n  end\n\n  ws.on :close do |event|\n    p [:close, event.code, event.reason]\n    ws = nil\n  end\n\n}\n\nend\n\ndef call_qes(json_rpc, id)\n  ws.send(json_rpc)\n  while @response[id].nil?\n    sleep(1)\n  end\n  resp = @response.delete(id)\n  return resp\nend\n\nend\n</code></pre>\n\n<p>Is this a valid approach?  If not how should I put a layer of abstraction around this?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rvm"], "answers": [{"comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1486544335, "post_id": 42104989, "comment_id": 71386124, "body": "rbenv and rvm are different tools. Denouncing the tool the question is about and describing a completely different tool doesn&#39;t help OP much nor is it a valid answer to their question."}], "tags": [], "owner": {"reputation": 759, "user_id": 5266581, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-4WBTC_1yMB8/AAAAAAAAAAI/AAAAAAAAACI/pCGef6nYJik/photo.jpg?sz=128", "display_name": "Engr.Tanbir Hasan", "link": "https://stackoverflow.com/users/5266581/engr-tanbir-hasan"}, "is_accepted": false, "score": -2, "last_activity_date": 1486529561, "creation_date": 1486529561, "answer_id": 42104989, "question_id": 42102892, "link": "https://stackoverflow.com/questions/42102892/installing-rvm-no-output-failure/42104989#42104989", "title": "Installing RVM - No Output, Failure", "body": "<p>Use rbenv instead of rvm, rbenv is most suitable than rvm. </p>\n\n<p>Homebrew setup:</p>\n\n<pre><code>ruby -e \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)\"\n</code></pre>\n\n<p>rbenv setup:</p>\n\n<pre><code>brew install rbenv ruby-build\n\n# Add rbenv to bash so that it loads every time you open a terminal\necho 'if which rbenv &gt; /dev/null; then eval \"$(rbenv init -)\"; fi' &gt;&gt; ~/.bash_profile\nsource ~/.bash_profile\n\n# Install Ruby\nrbenv install 2.4.0\nrbenv global 2.4.0\nruby -v\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 4617153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/168b130fef491e8dceeb918b0660407a?s=128&d=identicon&r=PG", "display_name": "Bagel", "link": "https://stackoverflow.com/users/4617153/bagel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1486529561, "creation_date": 1486515920, "last_edit_date": 1486521034, "question_id": 42102892, "link": "https://stackoverflow.com/questions/42102892/installing-rvm-no-output-failure", "title": "Installing RVM - No Output, Failure", "body": "<p>I'm on MacOS Sierra</p>\n\n<p>brew doctor says no problem</p>\n\n<p>xcode/gcc is installed</p>\n\n<p>My first problem is <a href=\"https://imgur.com/a/xBjby\" rel=\"nofollow noreferrer\">no response when I use curl</a>.</p>\n\n<p>And <a href=\"https://imgur.com/a/5pLcq\" rel=\"nofollow noreferrer\">here is what I get when I trace the installation</a>.</p>\n\n<p>After the installation is complete, I restart my terminal and try and use 'source ~/.rvm/scripts/rvm', but I get an error 'No such file or directory'</p>\n\n<p>I've tried to delete the directory and re-install a couple of times, but no luck. </p>\n\n<p>EDIT: If I don't use -sSL, I get two lines of output, but still no luck: imgur.com/a/bxyLy</p>\n\n<p>EDIT2: <a href=\"https://github.com/rvm/rvm/issues/3910\" rel=\"nofollow noreferrer\">https://github.com/rvm/rvm/issues/3910</a> allows installation</p>\n"}, {"tags": ["ruby", "google-api", "google-knowledge-graph"], "answers": [{"tags": [], "owner": {"reputation": 1003, "user_id": 4568188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5D86s.jpg?s=128&g=1", "display_name": "bwalshy", "link": "https://stackoverflow.com/users/4568188/bwalshy"}, "is_accepted": false, "score": 0, "last_activity_date": 1486512626, "creation_date": 1486512626, "answer_id": 42102371, "question_id": 42102277, "link": "https://stackoverflow.com/questions/42102277/credentials-for-google-knowledge-graph/42102371#42102371", "title": "credentials for google knowledge graph", "body": "<p>According to the Ruby Docs for the Google Api Client, <code>key</code> is an instance method where you can assign your api key (<a href=\"http://www.rubydoc.info/github/google/google-api-ruby-client/Google/Apis/KgsearchV1/KgsearchService#key-instance_method\" rel=\"nofollow noreferrer\">http://www.rubydoc.info/github/google/google-api-ruby-client/Google/Apis/KgsearchV1/KgsearchService#key-instance_method</a>).</p>\n\n<p>So I believe you'd do something like the following: </p>\n\n<pre><code>kgSearch = Kgsearch::KgsearchService.new\nkgSearch.key = 'your_key_here'\nresponse = kgSearch.search_entities(query: query) # and any other options that are necessary\n</code></pre>\n"}], "owner": {"reputation": 2343, "user_id": 4033050, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/8617552b81048f6c4b67c9ec04f413b1?s=128&d=identicon&r=PG&f=1", "display_name": "Seb", "link": "https://stackoverflow.com/users/4033050/seb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 68, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1486512626, "creation_date": 1486511961, "question_id": 42102277, "link": "https://stackoverflow.com/questions/42102277/credentials-for-google-knowledge-graph", "title": "credentials for google knowledge graph", "body": "<p>I am trying to use the Google Knowledge graph API. I already have the API key and also use the library instead of the RESTful API.</p>\n\n<pre><code>kgSearch = Kgsearch::KgsearchService.new\nresponse = kgSearch.search_entities(query: query)\n</code></pre>\n\n<p>I have tried to instantiate the service as below</p>\n\n<pre><code>kgSearch = Kgsearch::KgsearchService.new(api: 'klfkdlfkdlm')\n</code></pre>\n\n<p>it's rejected because the init expect no arguments.</p>\n\n<p>Any idea, how to add the api_key ??</p>\n\n<p>I try also:</p>\n\n<pre><code>response = kgSearch.search_entities(query: query, api: 'fjfkjfl')\n</code></pre>\n\n<p>same things</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1486510409, "post_id": 42101931, "comment_id": 71374189, "body": "when you see that error, you need to look in the rails console for the cause. adding that output to the question would make it easier to help"}, {"owner": {"reputation": 179, "user_id": 6753997, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/8KICN.png?s=128&g=1", "display_name": "jshaf", "link": "https://stackoverflow.com/users/6753997/jshaf"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1486510588, "post_id": 42101931, "comment_id": 71374241, "body": "@maxple unfortunately I am running the server in a docker container and am not getting any logs. So I am debugging using the console in Chrome"}, {"owner": {"reputation": 36449, "user_id": 2453699, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0b0a49d160baf7d95b81d798ea0cb65?s=128&d=identicon&r=PG", "display_name": "vee", "link": "https://stackoverflow.com/users/2453699/vee"}, "edited": false, "score": 1, "creation_date": 1486510853, "post_id": 42101931, "comment_id": 71374328, "body": "It&#39;s unfortunate you don&#39;t have access to the logs! Can&#39;t you get inside the container? <code>docker exec .... &#47;bin&#47;bash</code> then you check the logs. Better yet, you could define your rails app&#39;s log directory as a docker volume so that you have access to it from your development box. It seems like you need to fix your development environment first so that you can see what&#39;s going on when you test your code."}], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 6753997, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/8KICN.png?s=128&g=1", "display_name": "jshaf", "link": "https://stackoverflow.com/users/6753997/jshaf"}, "edited": false, "score": 0, "creation_date": 1486666720, "post_id": 42103052, "comment_id": 71455690, "body": "Where would this JS logic be put into?"}, {"owner": {"reputation": 71, "user_id": 4894086, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3e2ec60a83a33c8911d19e1964694322?s=128&d=identicon&r=PG&f=1", "display_name": "William Sumfest", "link": "https://stackoverflow.com/users/4894086/william-sumfest"}, "reply_to_user": {"reputation": 179, "user_id": 6753997, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/8KICN.png?s=128&g=1", "display_name": "jshaf", "link": "https://stackoverflow.com/users/6753997/jshaf"}, "edited": false, "score": 0, "creation_date": 1486810387, "post_id": 42103052, "comment_id": 71513570, "body": "For simplicity, you can just place it in application.js"}, {"owner": {"reputation": 179, "user_id": 6753997, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/8KICN.png?s=128&g=1", "display_name": "jshaf", "link": "https://stackoverflow.com/users/6753997/jshaf"}, "edited": false, "score": 0, "creation_date": 1487109190, "post_id": 42103052, "comment_id": 71633277, "body": "I actually scaffolded to create these controller actions, so I don&#39;t think there is a syntax error. For some reason my format.js is not getting hit. I know this because the data is being saved and everything but breaks at format.js"}], "tags": [], "owner": {"reputation": 71, "user_id": 4894086, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/3e2ec60a83a33c8911d19e1964694322?s=128&d=identicon&r=PG&f=1", "display_name": "William Sumfest", "link": "https://stackoverflow.com/users/4894086/william-sumfest"}, "is_accepted": false, "score": 0, "last_activity_date": 1486516976, "creation_date": 1486516976, "answer_id": 42103052, "question_id": 42101931, "link": "https://stackoverflow.com/questions/42101931/failed-to-load-resource-the-server-responded-with-a-status-of-500-internal-ser/42103052#42103052", "title": "Failed to load resource: the server responded with a status of 500 (Internal Server Error) Ajax Rails error", "body": "<p>It looks like it could be a syntax error</p>\n\n<pre><code>{ render :show, status: :created, location: @post }\n</code></pre>\n\n<p>It would be simpler to render the json from the post and control the logic in javascript.</p>\n\n<pre><code>render json: @post\n</code></pre>\n\n<p>and then in javascript have a listener on the form's success</p>\n\n<pre><code>    $(\"form\").on(\"ajax:complete\", (xhr, status) -&gt;\n           alert(\"Post was created!\");\n    )\n    $(\"form\").(\"ajax:error\", (xhr, data, status) -&gt;\n      \"Handle errors here\";\n    )\n</code></pre>\n"}], "owner": {"reputation": 179, "user_id": 6753997, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/8KICN.png?s=128&g=1", "display_name": "jshaf", "link": "https://stackoverflow.com/users/6753997/jshaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1511, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486516976, "creation_date": 1486510086, "question_id": 42101931, "link": "https://stackoverflow.com/questions/42101931/failed-to-load-resource-the-server-responded-with-a-status-of-500-internal-ser", "title": "Failed to load resource: the server responded with a status of 500 (Internal Server Error) Ajax Rails error", "body": "<p>I am currently just trying to add some ajax to my rails application. I am getting this error when I try to create a new post. I know the post is created because when I refresh the page the post ends up in the list of posts.</p>\n\n<h3>posts_controller.rb</h3>\n\n<pre><code>  def create\n    @post = Post.new(post_params)\n    respond_to do |format|\n      if @post.save\n        format.html { redirect_to @post, notice: 'Post was successfully created.' }\n        format.json { render :show, status: :created, location: @post }\n        format.js\n      else\n        format.html { render :new }\n        format.json { render json: @post.errors, status: :unprocessable_entity }\n        format.js\n      end\n    end\n  end\n</code></pre>\n\n<h3>app/views/posts/index.html.erb</h3>\n\n<pre><code>&lt;%= form_for(@post, remote: true) do |f| %&gt;\n      &lt;div class=\"modal fade\" id=\"mynewpost\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\" aria-hidden=\"true\"&gt;\n        &lt;div class=\"modal-dialog\"&gt;\n          &lt;div class=\"modal-content\"&gt;\n            &lt;div class=\"modal-header\"&gt;\n              &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"&gt;&lt;span aria-hidden=\"true\"&gt;&amp;times;&lt;/span&gt;&lt;/button&gt;\n              &lt;h4 class=\"modal-title\" id=\"myModalLabel\"&gt;Suggested Invite&lt;/h4&gt;\n            &lt;/div&gt;\n            &lt;div class=\"modal-body\"&gt;\n            &lt;/div&gt;\n            &lt;div class=\"modal-footer\"&gt;\n              &lt;button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\" id=\"mynewpost\"&gt;Close&lt;/button&gt;\n              &lt;%= submit_tag \"Create\", class: \"btn btn-primary\" %&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n</code></pre>\n\n\n\n<h3>app/views/posts/create.js.erb</h3>\n\n<pre><code>alert(\"Post Created!!\");\n</code></pre>\n\n<h3>routes.rb</h3>\n\n<pre><code>resources :posts\n</code></pre>\n\n<p>Now I expect that after clicking submit I should see poste created!But I don't. I just get an internal server error. From here I have no idea what to do. Please let me know if there is any additional information I can provide.</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "conditional-statements"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1486506675, "post_id": 42101188, "comment_id": 71372765, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. We&#39;d like to see your attempt so we can correct it. You&#39;ve only given us a list of requirements so it looks like you want us to write the code for you."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1486537102, "post_id": 42101188, "comment_id": 71382263, "body": "You might want to replace the word &quot;capitalized&quot; with something like &quot;contains only capital letters&quot;, since &quot;capitalized&quot; refers to only the first character of a word."}], "answers": [{"tags": [], "owner": {"reputation": 5998, "user_id": 3889043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrDMd.jpg?s=128&g=1", "display_name": "mrlew", "link": "https://stackoverflow.com/users/3889043/mrlew"}, "is_accepted": false, "score": 0, "last_activity_date": 1486508319, "last_edit_date": 1486508319, "creation_date": 1486507059, "answer_id": 42101343, "question_id": 42101188, "link": "https://stackoverflow.com/questions/42101188/how-do-i-check-if-one-element-in-an-array-satisfies-a-pattern-while-the-rest-do/42101343#42101343", "title": "How do I check if one element in an array satisfies a pattern, while the rest don&#39;t?", "body": "<p>One approach:</p>\n\n<pre><code>def check_only_last_upcase(arr)\n    return false if arr.empty?\n    arr.each_with_index do |word, index| \n        return false if word == word.upcase &amp;&amp; index != (arr.length-1)\n    end\n    (arr.last.upcase == arr.last)\nend\n\nputs check_only_last_upcase([\"word\", \"wOrD\", \"WORD\"]) #true\nputs check_only_last_upcase([\"WORD\", \"wOrD\", \"WORD\"]) #false\nputs check_only_last_upcase([\"word\", \"wOrD\", \"word\"]) #false\nputs check_only_last_upcase([\"word\"]) #false\nputs check_only_last_upcase([\"WORD\"]) #true\nputs check_only_last_upcase([]) #false\n</code></pre>\n\n<p>Another way (looks more like a ruby way?):</p>\n\n<pre><code>def check_only_last_upcase(arr)\n    arr.last == arr.last.upcase &amp;&amp;\n    arr\n        .slice(0,arr.length-1)\n        .all? { |word| word.upcase != word }\nend\n</code></pre>\n\n<p>Last suggestion assumes <code>arr</code> has always at least one item (don't return if <code>arr</code> is empty), as you pointed.</p>\n"}, {"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 0, "last_activity_date": 1486510584, "creation_date": 1486510584, "answer_id": 42102023, "question_id": 42101188, "link": "https://stackoverflow.com/questions/42101188/how-do-i-check-if-one-element-in-an-array-satisfies-a-pattern-while-the-rest-do/42102023#42102023", "title": "How do I check if one element in an array satisfies a pattern, while the rest don&#39;t?", "body": "<p>Or, possibly:</p>\n\n<pre><code>foo.last == foo.last.upcase and foo.select{|e| e == foo.last}.length == 1\n</code></pre>\n\n<p>And...</p>\n\n<pre><code>2.3.1 :001 &gt; foo = [\"WORD\",\"Word\"]\n =&gt; [\"WORD\", \"Word\"] \n2.3.1 :002 &gt; foo.last == foo.last.upcase and foo.select{|e| e == foo.last}.length == 1\n =&gt; false \n2.3.1 :003 &gt; foo = [\"WORD\",\"WORD\"]\n =&gt; [\"WORD\", \"WORD\"] \n2.3.1 :004 &gt; foo.last == foo.last.upcase and foo.select{|e| e == foo.last}.length == 1\n =&gt; false \n2.3.1 :005 &gt; foo = [\"Word\",\"WORD\"]\n =&gt; [\"Word\", \"WORD\"] \n2.3.1 :006 &gt; foo.last == foo.last.upcase and foo.select{|e| e == foo.last}.length == 1\n =&gt; true \n2.3.1 :007 &gt; foo = [\"Word\",\"WORD\",\"WORD\"]\n =&gt; [\"Word\", \"WORD\", \"WORD\"] \n2.3.1 :008 &gt; foo.last == foo.last.upcase and foo.select{|e| e == foo.last}.length == 1\n =&gt; false \n2.3.1 :009 &gt; foo = [\"WORD\"]\n =&gt; [\"WORD\"] \n2.3.1 :010 &gt; foo.last == foo.last.upcase and foo.select{|e| e == foo.last}.length == 1\n =&gt; true \n2.3.1 :011 &gt; foo = [\"Word\"]\n =&gt; [\"Word\"] \n2.3.1 :012 &gt; foo.last == foo.last.upcase and foo.select{|e| e == foo.last}.length == 1\n =&gt; false \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5998, "user_id": 3889043, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PrDMd.jpg?s=128&g=1", "display_name": "mrlew", "link": "https://stackoverflow.com/users/3889043/mrlew"}, "edited": false, "score": 0, "creation_date": 1486513998, "post_id": 42102063, "comment_id": 71375290, "body": "Very clever! I became ashamed of my answer now :)"}, {"owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "edited": false, "score": 0, "creation_date": 1486536494, "post_id": 42102063, "comment_id": 71381997, "body": "You need to fix your regex: <code>only_last_upcase?([&#39;Word&#39;]) #=&gt; true</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "edited": false, "score": 1, "creation_date": 1486536769, "post_id": 42102063, "comment_id": 71382118, "body": "Thanks, @Michael. I didn&#39;t read the question very carefully. I guess I saw the word &quot;capitalized&quot; and went from there. I&#39;ll fix my answer."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1486543150, "post_id": 42102063, "comment_id": 71385422, "body": "Slightly more concise: <code>arr.find_index { |str| str == str.upcase } == arr.size - 1</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1486544428, "post_id": 42102063, "comment_id": 71386175, "body": "@Stefan, yes, that&#39;s better. Thanks. I&#39;ve edited to incorporate your suggestion."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1486544922, "post_id": 42102063, "comment_id": 71386489, "body": "@CarySwoveland <code>find_index</code> passes elements to the block, not indices."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1486568288, "post_id": 42102063, "comment_id": 71403122, "body": "@Stefan, yes, of course. Thanks."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 6, "last_activity_date": 1486568200, "last_edit_date": 1486568200, "creation_date": 1486510787, "answer_id": 42102063, "question_id": 42101188, "link": "https://stackoverflow.com/questions/42101188/how-do-i-check-if-one-element-in-an-array-satisfies-a-pattern-while-the-rest-do/42102063#42102063", "title": "How do I check if one element in an array satisfies a pattern, while the rest don&#39;t?", "body": "<pre><code>def only_last_upcase?(arr)\n  arr.find_index { |w| w == w.upcase } == arr.size - 1\nend\n\nonly_last_upcase? [\"word\", \"wOrD\", \"WORD\"] #=&gt; true\nonly_last_upcase? [\"WORD\", \"wOrD\", \"WORD\"] #=&gt; false\nonly_last_upcase? [\"word\", \"wOrD\", \"word\"] #=&gt; false\nonly_last_upcase? [\"word\"]                 #=&gt; false\nonly_last_upcase? [\"Word\"]                 #=&gt; false\nonly_last_upcase? [\"WORD\"]                 #=&gt; true\nonly_last_upcase? []                       #=&gt; false\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1486543684, "post_id": 42103057, "comment_id": 71385716, "body": "Your first version compares each element to the last element, so it returns <code>true</code> for <code>[&quot;FOO&quot;, &quot;BAR&quot;, &quot;BAZ&quot;]</code>. Besides, <code>none?</code> doesn&#39;t necessarily traverse the whole array, it returns as soon as the block returns a truthy result."}, {"owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1486551446, "post_id": 42103057, "comment_id": 71391141, "body": "2 very good points @Stefan, serves me right for posting answers on SO right after waking up."}, {"owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1486551563, "post_id": 42103057, "comment_id": 71391227, "body": "I just completely removed the first version."}], "tags": [], "owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "is_accepted": false, "score": 2, "last_activity_date": 1486551546, "last_edit_date": 1486551546, "creation_date": 1486517013, "answer_id": 42103057, "question_id": 42101188, "link": "https://stackoverflow.com/questions/42101188/how-do-i-check-if-one-element-in-an-array-satisfies-a-pattern-while-the-rest-do/42103057#42103057", "title": "How do I check if one element in an array satisfies a pattern, while the rest don&#39;t?", "body": "<p>The good thing about Ruby is that it's fairly easy to turn textual descriptions of problems into actual code:</p>\n\n<pre><code>def only_last_upcase?(arr)\n  last_index = arr.size - 1\n  arr.find_index { |s| s =~ /^[A-Z]*$/ } == last_index\nend\n</code></pre>\n\n<p>Both of them have the following results:</p>\n\n<pre><code>only_last_upcase?([\"word\", \"wOrD\", \"WORD\"])\n#=&gt; true\nonly_last_upcase?([\"WORD\", \"wOrD\", \"WORD\"])\n#=&gt; false\nonly_last_upcase?([\"word\", \"wOrD\", \"word\"])\n#=&gt; false\nonly_last_upcase?([\"word\"])\n#=&gt; false\nonly_last_upcase?([\"WORD\"])\n#=&gt; true\nonly_last_upcase?([])\n#=&gt; false\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 1, "last_activity_date": 1486529316, "last_edit_date": 1486529316, "creation_date": 1486525861, "answer_id": 42104360, "question_id": 42101188, "link": "https://stackoverflow.com/questions/42101188/how-do-i-check-if-one-element-in-an-array-satisfies-a-pattern-while-the-rest-do/42104360#42104360", "title": "How do I check if one element in an array satisfies a pattern, while the rest don&#39;t?", "body": "<p>Check only <strong>one</strong> element satisfies your condition <strong>and</strong> that the array's <strong>last</strong> element satisfies the same condition:</p>\n\n<pre><code>arr.one? { |str| str == str.upcase } &amp;&amp; arr.last == arr.last.upcase\n</code></pre>\n\n<p>Passes all the same tests given in the answer by Cary Swoveland.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 228, "favorite_count": 0, "closed_date": 1486541012, "accepted_answer_id": 42102063, "answer_count": 5, "score": -1, "last_activity_date": 1486568200, "creation_date": 1486506352, "question_id": 42101188, "link": "https://stackoverflow.com/questions/42101188/how-do-i-check-if-one-element-in-an-array-satisfies-a-pattern-while-the-rest-do", "closed_reason": "Needs more focus", "title": "How do I check if one element in an array satisfies a pattern, while the rest don&#39;t?", "body": "<p>I'm using Ruby 2.4.  I know how to check if a string is all capitalized by doing</p>\n\n<pre><code>str == str.upcase\n</code></pre>\n\n<p>but if I have an array of strings, what is a quick way to check that only the last element of the array is capitalized while, for the other elements,  str != str.upcase .  I'm assuming there is at least one element in the array and if there is only one element and it is capitalized, I would want my condition to evaluate to true.</p>\n"}, {"tags": ["arrays", "ruby", "optimization"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1486544259, "post_id": 42100507, "comment_id": 71386071, "body": "You can reduce the number of possible combinations by removing any array whose elements are already contained in another array. In your example, both <code>b</code> and <code>d</code> are covered by <code>a</code>."}], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1486509469, "post_id": 42101788, "comment_id": 71373898, "body": "It looks like a variant of subset-sum with arrays instead of integers. Subset-sum is indeed NP-complete."}, {"owner": {"reputation": 191, "user_id": 560632, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/37901829/picture?type=large", "display_name": "Robert Brandin", "link": "https://stackoverflow.com/users/560632/robert-brandin"}, "edited": false, "score": 0, "creation_date": 1486509539, "post_id": 42101788, "comment_id": 71373927, "body": "Thanks for answering! This is pretty much the solution I came to. Had forgotten about the <code>combination</code> function though, that&#39;s a handy thing. Marking yours as correct, thanks!"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1486509489, "last_edit_date": 1486509489, "creation_date": 1486509354, "answer_id": 42101788, "question_id": 42100507, "link": "https://stackoverflow.com/questions/42100507/finding-the-fewest-number-of-arrays-whose-union-matches-another-array/42101788#42101788", "title": "Finding the fewest number of arrays whose union matches another array", "body": "<p>I'm pretty sure (I'd wager the problem is NP-complete) that one must just check combinations, beginning with combinations of one array, then, if that is unsuccessful, checking combinations of two arrays, and so on. </p>\n\n<pre><code>def minimal_cover(arr, target)\n  (1..arr.size).each do |n|\n    arr.combination(n).each { |a| return a if (target - a.reduce(:|)).empty? }\n  end\n  nil\nend\n\na = [1, 2, 4]\nb = [2, 4]\nc = [3]\nd = [1, 2]\narrays = [a, b, c, d]\ntarget = [1, 2, 3, 4]\n\nminimal_cover(arrays, target)\n  #=&gt; [[1, 2, 4], [3]]\n</code></pre>\n"}], "owner": {"reputation": 191, "user_id": 560632, "user_type": "registered", "accept_rate": 77, "profile_image": "https://graph.facebook.com/37901829/picture?type=large", "display_name": "Robert Brandin", "link": "https://stackoverflow.com/users/560632/robert-brandin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "closed_date": 1486541297, "accepted_answer_id": 42101788, "answer_count": 1, "score": -1, "last_activity_date": 1486509489, "creation_date": 1486503594, "last_edit_date": 1486507165, "question_id": 42100507, "link": "https://stackoverflow.com/questions/42100507/finding-the-fewest-number-of-arrays-whose-union-matches-another-array", "closed_reason": "Needs more focus", "title": "Finding the fewest number of arrays whose union matches another array", "body": "<p>Given an arbitrary number of arrays placed into an array:</p>\n\n<pre><code>a = [1, 2, 4]\nb = [2, 4]\nc = [3]\nd = [1, 2]\n\narrays = [a, b, c, d]\n</code></pre>\n\n<p>I would like to select the fewest number of these arrays which union to match the array <code>[1, 2, 3, 4]</code> in ruby, i.e. the \"correct\" answer is <code>[a, c]</code> and not <code>[b, c, d]</code>.</p>\n\n<p>For my purposes, it does not matter if the fewest number of arrays overlap at all, just that they can fulfill the criterion of matching the desired array.</p>\n\n<p>I can imagine several brute force solutions (e.g. a nested loop that unions each element with every other element), but I'm wondering if there is an optimal/elegant method to get this result.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "logging"], "answers": [{"tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": true, "score": 1, "last_activity_date": 1486504365, "creation_date": 1486504365, "answer_id": 42100738, "question_id": 42100457, "link": "https://stackoverflow.com/questions/42100457/how-do-i-set-the-log-level-for-ony-one-custom-rails-logger-in-rails/42100738#42100738", "title": "How do I set the log level for ony one custom rails logger in rails", "body": "<p>You can set the level right after adding the custom logger:</p>\n\n<pre><code>config.active_record.logger = Logger.new(\"log/custom_log_file.log\")\nconfig.active_record.logger.level = 2\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 3263538, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/d93259c7a68ffbd700af0711891f4b52?s=128&d=identicon&r=PG&f=1", "display_name": "wgraydev", "link": "https://stackoverflow.com/users/3263538/wgraydev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 42100738, "answer_count": 1, "score": 1, "last_activity_date": 1486504365, "creation_date": 1486503392, "question_id": 42100457, "link": "https://stackoverflow.com/questions/42100457/how-do-i-set-the-log-level-for-ony-one-custom-rails-logger-in-rails", "title": "How do I set the log level for ony one custom rails logger in rails", "body": "<p>The examples I've seen for setting log level seems straightforward in most instances however how do I set the log level for my custom logger:</p>\n\n<p><code>config.active_record.logger = Logger.new(\"log/custom_log_file.log\")</code></p>\n\n<p>According to the <a href=\"http://guides.rubyonrails.org/debugging_rails_applications.html#log-levels\" rel=\"nofollow noreferrer\">rails guides</a> I should be able to make one of the following calls\nto set a log level to debug, but I believe this is a global thing.</p>\n\n<pre><code>config.log_level = :warn # In any environment initializer, or\nRails.logger.level = 2 # at any time\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "actioncontroller"], "comments": [{"owner": {"reputation": 6179, "user_id": 2969544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b66660630d54cf58a7d4675be1d6ff?s=128&d=identicon&r=PG", "display_name": "oklas", "link": "https://stackoverflow.com/users/2969544/oklas"}, "edited": false, "score": 1, "creation_date": 1486503567, "post_id": 42100422, "comment_id": 71371173, "body": "Seems <code>[WeakRef](ruby-doc.org&#47;stdlib-1.9.3&#47;libdoc&#47;weakref&#47;rdoc&#47;Weak&zwnj;&#8203;Ref.html)</code> can help"}], "answers": [{"comments": [{"owner": {"reputation": 58917, "user_id": 1461050, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/c8IhJ.jpg?s=128&g=1", "display_name": "davidgyoung", "link": "https://stackoverflow.com/users/1461050/davidgyoung"}, "edited": false, "score": 0, "creation_date": 1486503905, "post_id": 42100557, "comment_id": 71371359, "body": "Thanks for the tip.  But I don&#39;t want my <code>@garage</code> object to be garbage collected until I am done using it.   It seems that if I use <code>WeakRef</code> then there is a chance it could be garbage collected before the controller method completes.  Am I wrong?"}, {"owner": {"reputation": 6179, "user_id": 2969544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b66660630d54cf58a7d4675be1d6ff?s=128&d=identicon&r=PG", "display_name": "oklas", "link": "https://stackoverflow.com/users/2969544/oklas"}, "reply_to_user": {"reputation": 58917, "user_id": 1461050, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/c8IhJ.jpg?s=128&g=1", "display_name": "davidgyoung", "link": "https://stackoverflow.com/users/1461050/davidgyoung"}, "edited": false, "score": 0, "creation_date": 1486504235, "post_id": 42100557, "comment_id": 71371532, "body": "Always will be fine. I did some improvement of answer. Use master link in that place where it not be garbage collected."}, {"owner": {"reputation": 58917, "user_id": 1461050, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/c8IhJ.jpg?s=128&g=1", "display_name": "davidgyoung", "link": "https://stackoverflow.com/users/1461050/davidgyoung"}, "edited": false, "score": 0, "creation_date": 1486504520, "post_id": 42100557, "comment_id": 71371682, "body": "Yes, it seems like that may work with the improvement.  But this seems to have the same effect of me simply setting <code>@garage = nil</code> at the end of my method.  While either of these may be a reasonable workaround, my understanding is that I shouldn&#39;t <i>need</i> to do this in Rails.  I&#39;d like to first understand what I am doing wrong, if anything, that is causing this unexpected behavior."}, {"owner": {"reputation": 6179, "user_id": 2969544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b66660630d54cf58a7d4675be1d6ff?s=128&d=identicon&r=PG", "display_name": "oklas", "link": "https://stackoverflow.com/users/2969544/oklas"}, "reply_to_user": {"reputation": 58917, "user_id": 1461050, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/c8IhJ.jpg?s=128&g=1", "display_name": "davidgyoung", "link": "https://stackoverflow.com/users/1461050/davidgyoung"}, "edited": false, "score": 0, "creation_date": 1486538808, "post_id": 42100557, "comment_id": 71383190, "body": "It is not workaround. It is only way. I&#39;ll try to open the full."}], "tags": [], "owner": {"reputation": 6179, "user_id": 2969544, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8b66660630d54cf58a7d4675be1d6ff?s=128&d=identicon&r=PG", "display_name": "oklas", "link": "https://stackoverflow.com/users/2969544/oklas"}, "is_accepted": false, "score": 3, "last_activity_date": 1486538717, "last_edit_date": 1486538717, "creation_date": 1486503757, "answer_id": 42100557, "question_id": 42100422, "link": "https://stackoverflow.com/questions/42100422/rails-memory-leak-controller-class-holding-a-reference-to-instance/42100557#42100557", "title": "Rails memory leak: controller class holding a reference to instance", "body": "<p>You need to use <a href=\"http://ruby-doc.org/stdlib-1.9.3/libdoc/weakref/rdoc/WeakRef.html\" rel=\"nofollow noreferrer\">WeakRef</a></p>\n\n<blockquote>\n  <p>Weak Reference class that allows a referenced object to be\n  garbage-collected. A WeakRef may be used exactly like the object it\n  references.</p>\n</blockquote>\n\n<pre><code>foo = Object.new\n\nfoo = WeakRef.new(foo) # Creates a weak reference to orig\n\nObjectSpace.garbage_collect\n\np foo.to_s       # should raise exception (recycled)\n</code></pre>\n\n<p>The use case is there where two object reference is used. First is master and second is weak. Your object will not be garbage collected until first master link is in use. Use master link (generic variable) in the object which live same or more time than we need referenced object. And inside of referenced object use weak link.</p>\n\n<p>It is corresponding practice for this case. In another languages with garbage collector too, in perl for example. The C++ libraries have too much solutions for memory management strategies. Garbage collector can not remove garbage (objects) when they in use. If object refer to another and another refer to first this means  both in use. So it is not garbage - it is useful for \"garbage collector opinion\". But really it is garbage - and it is memory leak.</p>\n\n<p>Graph of objects-references must not have loops or cycles. If we need reference that forms loop or cycle in objects-references graph we need to use at least one quasi cutting weak reference in each.</p>\n"}, {"comments": [{"owner": {"reputation": 58917, "user_id": 1461050, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/c8IhJ.jpg?s=128&g=1", "display_name": "davidgyoung", "link": "https://stackoverflow.com/users/1461050/davidgyoung"}, "edited": false, "score": 0, "creation_date": 1486557323, "post_id": 42106082, "comment_id": 71395171, "body": "Thanks.  This should not prevent garbage collection though, right?  I think it&#39;s OK for the presenter to hold a reference to the controller instance because both objects should only exist for the lifetime of the request.  Both objects should be eligible for garbage collection after the request ends."}, {"owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "reply_to_user": {"reputation": 58917, "user_id": 1461050, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/c8IhJ.jpg?s=128&g=1", "display_name": "davidgyoung", "link": "https://stackoverflow.com/users/1461050/davidgyoung"}, "edited": false, "score": 0, "creation_date": 1486579294, "post_id": 42106082, "comment_id": 71410380, "body": "It shouldn&#39;t, unless something is holding on to either the controller or presenter, in which case both will keep existing. I&#39;d take a closer look at whether any constants are getting mutated."}, {"owner": {"reputation": 58917, "user_id": 1461050, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/c8IhJ.jpg?s=128&g=1", "display_name": "davidgyoung", "link": "https://stackoverflow.com/users/1461050/davidgyoung"}, "edited": false, "score": 0, "creation_date": 1486585797, "post_id": 42106082, "comment_id": 71414065, "body": "Yes, in my case, I have evidence that the something is holding a reference to the controller.   What do you mean by &quot;whether any constants are getting mutated&quot;?"}, {"owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "reply_to_user": {"reputation": 58917, "user_id": 1461050, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/c8IhJ.jpg?s=128&g=1", "display_name": "davidgyoung", "link": "https://stackoverflow.com/users/1461050/davidgyoung"}, "edited": false, "score": 1, "creation_date": 1486613903, "post_id": 42106082, "comment_id": 71423873, "body": "Constants don&#39;t get garbage cleaned, so if you have an array or hash in a constant, the contents of that array / hash will never go out of scope. This may not be obvious, eg. <code>values = DEFAULT_VALUES; values &lt;&lt; some_object</code>."}], "tags": [], "owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "is_accepted": false, "score": 3, "last_activity_date": 1486535048, "creation_date": 1486535048, "answer_id": 42106082, "question_id": 42100422, "link": "https://stackoverflow.com/questions/42100422/rails-memory-leak-controller-class-holding-a-reference-to-instance/42106082#42106082", "title": "Rails memory leak: controller class holding a reference to instance", "body": "<p><code>GaragesPresenter</code> holds a reference to <code>view_context</code></p>\n\n<pre><code>@garage = GaragesPresenter.new(@garage, view_context)\n</code></pre>\n\n<p><code>view_context</code> returns an <a href=\"http://api.rubyonrails.org/classes/ActionView/Rendering.html#method-i-view_context\" rel=\"nofollow noreferrer\">instance of of a view class</a> which holds a reference to <code>self</code>, which is the invoking controller:</p>\n\n<pre><code># File actionview/lib/action_view/rendering.rb, line 71\ndef view_context\n  view_context_class.new(view_renderer, view_assigns, self)\nend\n</code></pre>\n"}], "owner": {"reputation": 58917, "user_id": 1461050, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/c8IhJ.jpg?s=128&g=1", "display_name": "davidgyoung", "link": "https://stackoverflow.com/users/1461050/davidgyoung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1068, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1486538717, "creation_date": 1486503260, "question_id": 42100422, "link": "https://stackoverflow.com/questions/42100422/rails-memory-leak-controller-class-holding-a-reference-to-instance", "title": "Rails memory leak: controller class holding a reference to instance", "body": "<p>I have a memory leak in a Rails 4.2.6 application.  A controller allocates a large <code>GaragesPresenter</code> object as an instance variable, which should be de-referenced and garbage collected after the request completes.  However, I see that this never happens.</p>\n\n<pre><code>def show\n  @garage = GaragesPresenter.new(@garage, view_context)\n  respond_to do |format|\n    format.html\n  end\nend\n</code></pre>\n\n<p>I see that a reference to the <code>GaragesPresenter</code> instance is being held by the <code>GaragesController</code> instance, and an instance to that is being held by the <code>GaragesController</code> class.  This is true long after the request has completed and <code>GC.start</code> has been called.  <strong>Why is the <code>GaragesController</code> class holding a reference to the instance?</strong></p>\n\n<p>I know this because I set up a heap dump with:</p>\n\n<pre><code>require 'objspace'\n...\nGC.start\nfile = File.open(\"/tmp/dumpfile\", 'w')\nObjectSpace.dump_all(output: file)\n</code></pre>\n\n<p>And in the resulting file I see the following three objects:</p>\n\n<p><strong>The following object is a GaragesPresenter, which is very large:</strong></p>\n\n<p><code>{\"address\":\"0x7fd077217e20\", \"type\":\"OBJECT\", \"class\":\"0x7fd074a04618\", \"ivars\":7, \"references\":[\"0x7fd0772bf940\", \"0x7fd077711480\", \"0x7fd077748188\", \"0x7fd077772898\", \"0x7fd07720c778\", \"0x7fd0771ef8d0\", \"0x7fd0771ef8d0\"], \"file\":\"/Users/dyoung/workspace/commutyble/site-app/app/controllers/garages_controller.rb\", \"line\":19, \"method\":\"new\", \"generation\":35, \"memsize\":56, \"flags\":{\"wb_protected\":true, \"old\":true, \"marked\":true}}</code></p>\n\n<p><strong>A reference to the above object is being held by a GaragesController instance (expected, as the show method allocates the presenter as an instance variable):</strong></p>\n\n<p><code>{\"address\":\"0x7fd0727559f0\", \"type\":\"OBJECT\", \"class\":\"0x7fd0727865a0\", \"ivars\":22, \"references\":[\"0x7fd0727558b0\", \"0x7fd072755888\", \"0x7fd072755838\", \"0x7fd0732400e0\", \"0x7fd072754a50\", \"0x7fd0734c5658\", \"0x7fd07704e878\", \"0x7fd0732ab020\", \"0x7fd072785ee8\", \"0x7fd077217e20\", \"0x7fd0771ffe10\", \"0x7fd07720cde0\", \"0x7fd0732a82d0\"], \"file\":\"/Users/dyoung/.rvm/gems/ruby-2.1.0/gems/actionpack-4.2.6/lib/action_controller/metal.rb\", \"line\":237, \"method\":\"new\", \"generation\":35, \"memsize\":176, \"flags\":{\"wb_protected\":true, \"old\":true, \"marked\":true}}</code></p>\n\n<p><strong>A reference to the above GaragesController instance is being held by the GaragesController class, presumably preventing garabage collection.   Why??</strong></p>\n\n<p><code>{\"address\":\"0x7fd0727865a0\", \"type\":\"CLASS\", \"class\":\"0x7fd0726a7260\", \"name\":\"GaragesController\", \"references\":[\"0x7fd0727559f0\", \"0x7fd0726a72b0\"], \"file\":\"/Users/dyoung/.rvm/gems/ruby-2.1.0/gems/activesupport-4.2.6/lib/active_support/callbacks.rb\", \"line\":435, \"method\":\"instance_exec\", \"generation\":35, \"memsize\":672, \"flags\":{\"wb_protected\":true, \"old\":true, \"marked\":true}}</code></p>\n"}, {"tags": ["javascript", "ruby", "webrtc", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 3410, "user_id": 3422137, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/1239853391/picture?type=large", "display_name": "Shadid", "link": "https://stackoverflow.com/users/3422137/shadid"}, "edited": false, "score": 0, "creation_date": 1486536916, "post_id": 42103915, "comment_id": 71382182, "body": "interesting indeed. Thanks Mikkel."}], "tags": [], "owner": {"reputation": 7125, "user_id": 3975309, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r5v7W.jpg?s=128&g=1", "display_name": "Mikkel", "link": "https://stackoverflow.com/users/3975309/mikkel"}, "is_accepted": true, "score": 0, "last_activity_date": 1486522972, "creation_date": 1486522972, "answer_id": 42103915, "question_id": 42100383, "link": "https://stackoverflow.com/questions/42100383/is-it-possible-to-have-video-chat-capabilities-using-rails-5-action-cable/42103915#42103915", "title": "is it possible to have video chat capabilities using rails 5 action cable", "body": "<p>The Rails action cable is basically an open channel between your client code in the web browser and your server process, meaning you can have things happen quickly without the need to send a http request. </p>\n\n<p>WebRTC is basically a peer-to-peer protocol. It needs some signalling activity to help it establish a call, but from then on, it os peer to peer, or browser to browser. The beauty of this arrangement is that the server does not have to carry the video stream, so the server can be lightweight.</p>\n\n<p>So as you can see, webRTC and rails cable are different in nature, so while you could use the rails cable for the signalling part, you won't be able to use it for the video stream.</p>\n"}], "owner": {"reputation": 3410, "user_id": 3422137, "user_type": "registered", "accept_rate": 84, "profile_image": "https://graph.facebook.com/1239853391/picture?type=large", "display_name": "Shadid", "link": "https://stackoverflow.com/users/3422137/shadid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 0, "accepted_answer_id": 42103915, "answer_count": 1, "score": 0, "last_activity_date": 1486522972, "creation_date": 1486503127, "question_id": 42100383, "link": "https://stackoverflow.com/questions/42100383/is-it-possible-to-have-video-chat-capabilities-using-rails-5-action-cable", "title": "is it possible to have video chat capabilities using rails 5 action cable", "body": "<p>I was wondering is it possible to have a real time video chat just using rails 5 action cable. Can I use something like webRTC and combine it with the Rails action cable. Will it be possible to have p2p video streaming on action cable.</p>\n"}, {"tags": ["ruby", "function"], "comments": [{"owner": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 1, "creation_date": 1486502503, "post_id": 42100159, "comment_id": 71370632, "body": "well.. The error message is pretty much telling you everything. <code>hey</code> is a variable and not a string as you probably intended. Use <code>wri(&quot;hey&quot;)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1486526513, "post_id": 42100641, "comment_id": 71378512, "body": "Just a friendly tip, it&#39;s not necessary to include irb-prompts in your answer and it in fact make the code more difficult to read. So best avoided in future. Anyway this answer is correct so I +1&#39;d."}], "tags": [], "owner": {"reputation": 539, "user_id": 3693398, "user_type": "registered", "accept_rate": 64, "profile_image": "https://graph.facebook.com/100000471452957/picture?type=large", "display_name": "teddybear", "link": "https://stackoverflow.com/users/3693398/teddybear"}, "is_accepted": true, "score": 3, "last_activity_date": 1486504024, "creation_date": 1486504024, "answer_id": 42100641, "question_id": 42100159, "link": "https://stackoverflow.com/questions/42100159/ruby-function-undefined-local-variable-or-method/42100641#42100641", "title": "Ruby function undefined local variable or method", "body": "<p>You are passing the variable <code>hey</code> as an argument to the method <code>wri()</code>. You probably want the string <code>'hey'</code></p>\n\n<pre><code>&gt;def wri(var)\n&gt;  puts var\n&gt;end\n&gt;nil\n&gt;wri('hey')\nhey\n=&gt; nil\n&gt;the_variable_hey = 'hey'\n=&gt; 'hey'\n&gt;wri(the_variable_hey)\nhey\n=&gt; nil\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6652007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b5ecf44b32b19bc964ca57f5ea9bd0d?s=128&d=identicon&r=PG&f=1", "display_name": "Josqu", "link": "https://stackoverflow.com/users/6652007/josqu"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 451, "favorite_count": 0, "closed_date": 1486511731, "accepted_answer_id": 42100641, "answer_count": 1, "score": -1, "last_activity_date": 1486507611, "creation_date": 1486502177, "question_id": 42100159, "link": "https://stackoverflow.com/questions/42100159/ruby-function-undefined-local-variable-or-method", "closed_reason": "Not suitable for this site", "title": "Ruby function undefined local variable or method", "body": "<pre><code>def wri(var)\nputs var\nend\nwri(hey)\n</code></pre>\n\n<p>output : <code>main.rb:4:in</code>': undefined local variable or method <code>hey' for main:Object (NameError)</code></p>\n\n<p>where is the Mistake?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5582, "user_id": 27060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50576d785edd6db7d1999810863bcb01?s=128&d=identicon&r=PG", "display_name": "Reuben Mallaby", "link": "https://stackoverflow.com/users/27060/reuben-mallaby"}, "edited": false, "score": 1, "creation_date": 1486503066, "post_id": 42099705, "comment_id": 71370915, "body": "Just to clarify - you only get the last project&#39;s posts because of the equals sign! If you had <code>@posts = [] ..... @posts &lt;&lt; @posts.what_do_i_use_here(pr.posts.all)</code> all posts would have been added but you would have had a huge performance hit"}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 2766354, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0d4867502bff85af1731d76c38396c4d?s=128&d=identicon&r=PG&f=1", "display_name": "Tomus", "link": "https://stackoverflow.com/users/2766354/tomus"}, "edited": false, "score": 0, "creation_date": 1486501498, "post_id": 42099878, "comment_id": 71370097, "body": "Ah, so I can get them all directly from Post model. Thank you :)"}, {"owner": {"reputation": 5582, "user_id": 27060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50576d785edd6db7d1999810863bcb01?s=128&d=identicon&r=PG", "display_name": "Reuben Mallaby", "link": "https://stackoverflow.com/users/27060/reuben-mallaby"}, "reply_to_user": {"reputation": 71, "user_id": 2766354, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0d4867502bff85af1731d76c38396c4d?s=128&d=identicon&r=PG&f=1", "display_name": "Tomus", "link": "https://stackoverflow.com/users/2766354/tomus"}, "edited": false, "score": 0, "creation_date": 1486502870, "post_id": 42099878, "comment_id": 71370819, "body": "Glad I could help 8)"}], "tags": [], "owner": {"reputation": 5582, "user_id": 27060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50576d785edd6db7d1999810863bcb01?s=128&d=identicon&r=PG", "display_name": "Reuben Mallaby", "link": "https://stackoverflow.com/users/27060/reuben-mallaby"}, "is_accepted": true, "score": 2, "last_activity_date": 1486501093, "creation_date": 1486501093, "answer_id": 42099878, "question_id": 42099705, "link": "https://stackoverflow.com/questions/42099705/how-to-aggregate-model-instances-into-one-variable-in-rails/42099878#42099878", "title": "How to aggregate model instances into one variable in Rails?", "body": "<p>If you're only interested in posts related to projects:</p>\n\n<p><strong>Posts are related only to projects</strong></p>\n\n<p><code>@posts = Post.order(created_at: :desc)</code></p>\n\n<p><strong>Posts that are related polymorphically</strong></p>\n\n<p><code>@posts = Post.where(posted_type: 'Project').order(created_at: :desc)</code></p>\n\n<p>where <code>posted_type</code> is the type field for the polymorphic relation</p>\n"}], "owner": {"reputation": 71, "user_id": 2766354, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0d4867502bff85af1731d76c38396c4d?s=128&d=identicon&r=PG&f=1", "display_name": "Tomus", "link": "https://stackoverflow.com/users/2766354/tomus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 42099878, "answer_count": 1, "score": 0, "last_activity_date": 1486501093, "creation_date": 1486500490, "question_id": 42099705, "link": "https://stackoverflow.com/questions/42099705/how-to-aggregate-model-instances-into-one-variable-in-rails", "title": "How to aggregate model instances into one variable in Rails?", "body": "<p>Inside projects controller I have this:</p>\n\n<pre><code>def index\n   @projects = Project.all\n   @projects.each do |pr|\n     @posts = @posts.what_do_i_use_here(pr.posts.all)\n   end\n   @posts.order('created_at DESC')\nend\n</code></pre>\n\n<p>Each project has its posts, now I want to aggregate posts from all projects into one variable, how do I do that ?\nNote, this gets posts from last project without any problem:</p>\n\n<pre><code>@projects.each do |pr|\n  @posts = pr.posts.all\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1486500131, "post_id": 42099564, "comment_id": 71369410, "body": "first step to fix it is to ask a question that at least one person will understand..."}, {"owner": {"reputation": 151, "user_id": 5344550, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/740f72cb47fc3a952c2f4d975c6206ab?s=128&d=identicon&r=PG&f=1", "display_name": "olafsadventures", "link": "https://stackoverflow.com/users/5344550/olafsadventures"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1486500328, "post_id": 42099564, "comment_id": 71369525, "body": "I changed two to ten. Is that better, @AndreyDeineko ?"}, {"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1486500757, "post_id": 42099564, "comment_id": 71369742, "body": "think about what will happen when <code>i</code> is the index of the last element of <code>array</code>"}, {"owner": {"reputation": 151, "user_id": 5344550, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/740f72cb47fc3a952c2f4d975c6206ab?s=128&d=identicon&r=PG&f=1", "display_name": "olafsadventures", "link": "https://stackoverflow.com/users/5344550/olafsadventures"}, "edited": false, "score": 1, "creation_date": 1486500851, "post_id": 42099564, "comment_id": 71369784, "body": "Right, ruby is expecting another number after the last number in the array, hence the nil error."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1486501303, "post_id": 42099564, "comment_id": 71370000, "body": "Why are you using <code>inject</code> while completely ignoring <code>m</code>?"}, {"owner": {"reputation": 151, "user_id": 5344550, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/740f72cb47fc3a952c2f4d975c6206ab?s=128&d=identicon&r=PG&f=1", "display_name": "olafsadventures", "link": "https://stackoverflow.com/users/5344550/olafsadventures"}, "edited": false, "score": 0, "creation_date": 1486501427, "post_id": 42099564, "comment_id": 71370059, "body": "The method&#39;s original purpose was to add up the values that equaled two. I changed the method for debugging purposes."}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 0, "creation_date": 1486502242, "post_id": 42099564, "comment_id": 71370494, "body": "Wait so your goal is to print a list of every unique pair of elements in the array which sum up to 10, ie 8+2, 7+3, 10+0 etc?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1486502578, "post_id": 42099564, "comment_id": 71370669, "body": "Consider whether you want the zero. For each collection not including a zero that sums to 10, there is another collection which equals the original collection with a zero added. For example, <code>[2,8]</code> and [2,8,0]` both sum to <code>10</code>. If you have, say, three zeroes, <code>[2,8,0,0]</code> and <code>[2,8,0,0,0] also sume to </code>10`."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1486503891, "post_id": 42099564, "comment_id": 71371353, "body": "Can you post the required output for the array given in your example?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1486508328, "post_id": 42099564, "comment_id": 71373472, "body": "Your desired output doesn&#39;t match the description of the problem in your question. I would expect the output to be <code>&quot;0:1:2:2:2:3, 0:1:2:2:5, 0:1:2:7, 0:1:3:6, 0:1:9, 0:2:2:6, 0:2:3:5, 0:2:8, 0:3:7, 0:5:5, 0:10, 1:2:2:2:3, 1:2:2:5, 1:2:7, 1:3:6, 1:9, 2:2:6, 2:3:5, 2:8, 3:7, 5:5, 10&quot;</code>"}, {"owner": {"reputation": 151, "user_id": 5344550, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/740f72cb47fc3a952c2f4d975c6206ab?s=128&d=identicon&r=PG&f=1", "display_name": "olafsadventures", "link": "https://stackoverflow.com/users/5344550/olafsadventures"}, "edited": false, "score": 0, "creation_date": 1486508515, "post_id": 42099564, "comment_id": 71373547, "body": "Wow. The method was for debugging purposes. I am doing a bowling kata. The kata reads: If a player knocks down 10 pins with two rolls, then this is a SPARE. The score for this frame is 10 plus the total number of pins knocked down in the next roll."}, {"owner": {"reputation": 151, "user_id": 5344550, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/740f72cb47fc3a952c2f4d975c6206ab?s=128&d=identicon&r=PG&f=1", "display_name": "olafsadventures", "link": "https://stackoverflow.com/users/5344550/olafsadventures"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1486508581, "post_id": 42099564, "comment_id": 71373572, "body": "I am simply trying to determine if I have a spare at this point. Sorry for the confusion. @J&#246;rgWMittag"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1486511083, "post_id": 42099564, "comment_id": 71374419, "body": "Since there are no answers yet you can and should edit your question to state that you want all pairs of numbers from the array that sum to <code>10</code>, but the first cannot be <code>10</code>."}, {"owner": {"reputation": 151, "user_id": 5344550, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/740f72cb47fc3a952c2f4d975c6206ab?s=128&d=identicon&r=PG&f=1", "display_name": "olafsadventures", "link": "https://stackoverflow.com/users/5344550/olafsadventures"}, "edited": false, "score": 0, "creation_date": 1486511363, "post_id": 42099564, "comment_id": 71374517, "body": "I&#39;m gonna sit on it. Feeling a bit frustrated. Thanks Cary."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1486562349, "post_id": 42099564, "comment_id": 71398788, "body": "Your question is <i>still</i> extremely unclear. In the last paragraph, you say that your desired output is <code>8:2,5:5</code>. In the comments, you say you want to detect spares, but the <code>8:2</code> isn&#39;t a spare, only the <code>5:5</code> is, so the result should be <code>5:5</code>, not <code>8:2,5:5</code>. The answer you accepted as correct detects spares <b>and strikes</b>, yet in the comments you only mention spares (and in the question, you don&#39;t mention bowling at all). In the question, you only talk about an arbitrary number of arbitrary elements that add up to 10, for which the correct result would be the one I posted in my comment above"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1486562470, "post_id": 42099564, "comment_id": 71398880, "body": "You now have 4 different interpretations of your question, you <i>really</i> need to clear it up. Relevant information belongs <i>in the question</i>, not hidden away in comments."}, {"owner": {"reputation": 151, "user_id": 5344550, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/740f72cb47fc3a952c2f4d975c6206ab?s=128&d=identicon&r=PG&f=1", "display_name": "olafsadventures", "link": "https://stackoverflow.com/users/5344550/olafsadventures"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1486573770, "post_id": 42099564, "comment_id": 71407110, "body": "@J&#246;rgWMittag it is a spare. If a person scores a strike which is a score of ten, then the player does not get a second turn. So the nine after the first ten would count as roll 1."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1486577975, "post_id": 42099564, "comment_id": 71409588, "body": "Then you should put that <i>in the question</i>, where one can see it. You still haven&#39;t specified the input format, nor have you clarified what &quot;elements in the array that add up to ten&quot; means."}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1486521223, "last_edit_date": 1486521223, "creation_date": 1486511708, "answer_id": 42102226, "question_id": 42099564, "link": "https://stackoverflow.com/questions/42099564/how-to-find-elements-that-sum-up-to-ten-in-array/42102226#42102226", "title": "How to find elements that sum up to ten in array", "body": "<pre><code>array =  [6, 2, 7, 1, 10, 9, 0, 8, 2, 10, 10, 3, 5, 7, 2, 5, 5, 5]\n\narray.flat_map { |n| n == 10 ? [10, 0] : n }.\n      each_slice(2).\n      select { |ball1,ball2| ball1 != 10 &amp;&amp; ball1+ball2.to_i == 10 }\n  #=&gt; [[8, 2], [5, 5]] \n</code></pre>\n\n<p>The steps are as follows. Firstly, use <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-flat_map\" rel=\"nofollow noreferrer\">Enumerable#flat_map</a> to insert a zero after each <code>10</code> (in bowling, a <em>strike</em>): </p>\n\n<pre><code>a = array.flat_map { |n| n == 10 ? [10, 0] : n }\n  #=&gt; [6, 2, 7, 1, 10, 0, 9, 0, 8, 2, 10, 0, 10, 0, 3, 5, 7, 2, 5, 5, 5] \n</code></pre>\n\n<p>This allows us to use <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-each_slice\" rel=\"nofollow noreferrer\">Enumerable#each_slice</a> to divide <code>array</code> into pairs:</p>\n\n<pre><code>e = a.each_slice(2)\n  #=&gt; #&lt;Enumerator: [6, 2, 7, 1, 10, 0, 9, 0, 8, 2, 10, 0, 10, 0, 3, 5, 7, 2, 5, 5, 5]\n  #   :each_slice(2)&gt; \n</code></pre>\n\n<p>We can use <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-entries\" rel=\"nofollow noreferrer\">Enumerable#entries</a> (or <a href=\"http://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-to_a\" rel=\"nofollow noreferrer\">Enumerable#to_a</a>) to see the values that will be generated by this enumerator and pass on to <code>select</code>:</p>\n\n<pre><code>e.entries\n  #=&gt; [[6, 2], [7, 1], [10, 0], [9, 0], [8, 2], [10, 0], [10, 0], [3, 5],\n  #    [7, 2], [5, 5], [5]] \n</code></pre>\n\n<p>Note the array of size one <code>[5]</code> at the end. Continuing,</p>\n\n<pre><code>e.select { |ball1,ball2| ball1 != 10 &amp;&amp; ball1+ball2.to_i == 10 }\n  #=&gt; [[8, 2], [5, 5]] \n</code></pre>\n\n<p>When the last element of <code>e</code> (<code>[5]</code>) is generated, <code>select</code>'s block variables are computed as follows:</p>\n\n<pre><code>ball1, ball2 = [5]\n  #=&gt; [5] \nball1\n  #=&gt; 5 \nball2\n  #=&gt; nil \n</code></pre>\n\n<p>Had the block above contained <code>&amp;&amp; ball1+ball2 == 10</code> this would have raised an exception (unless the inclusion of the last element of <code>array</code> was a mistake in the formulation of the example). That could have been handled with a <code>if ball2.nil? ...</code> statement, but I chose to instead simply convert <code>ball2</code> to an integer. If it's already an integer, that value is returned; it it equals <code>nil</code>, <code>nil.to_i #=&gt; 0</code>. See <a href=\"http://ruby-doc.org/core-2.3.0/NilClass.html#method-i-to_i\" rel=\"nofollow noreferrer\">NilClass#to_i</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 151, "user_id": 5344550, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/740f72cb47fc3a952c2f4d975c6206ab?s=128&d=identicon&r=PG&f=1", "display_name": "olafsadventures", "link": "https://stackoverflow.com/users/5344550/olafsadventures"}, "edited": false, "score": 0, "creation_date": 1486517248, "post_id": 42103064, "comment_id": 71376241, "body": "I have realized the error in my question. I should not have written it while I was tired and hungry. Thanks a bunch."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1486522016, "post_id": 42103064, "comment_id": 71377414, "body": "If the <code>9</code> in <code>array</code> is changed to <code>0</code>, <code>print(array) #=&gt; &quot;10:0,8:2,5:5,5:5&quot;</code>, but the OP made it clear in comments that it the bowling <i>spares</i> that are to be idenfied. That is, <code>&quot;10:0&quot;</code> should not be printed."}, {"owner": {"reputation": 1141, "user_id": 3251463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxssB.png?s=128&g=1", "display_name": "Scott Schupbach", "link": "https://stackoverflow.com/users/3251463/scott-schupbach"}, "edited": false, "score": 0, "creation_date": 1486604332, "post_id": 42103064, "comment_id": 71421513, "body": "That was not clear in the question when I submitted my answer. In fact, it&#39;s barely clear in the comments. The bowling talk was in a hidden comment. I had to go digging for it. My solution answers the question as stated. If the OP updates the question with bowling-specific requirements, I&#39;ll update the answer and also account for the edge-case where <code>0:10</code> is included (since a gutter ball followed by a &quot;strike&quot; in the same frame is really a spare)."}], "tags": [], "owner": {"reputation": 1141, "user_id": 3251463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxssB.png?s=128&g=1", "display_name": "Scott Schupbach", "link": "https://stackoverflow.com/users/3251463/scott-schupbach"}, "is_accepted": true, "score": 1, "last_activity_date": 1486517060, "creation_date": 1486517060, "answer_id": 42103064, "question_id": 42099564, "link": "https://stackoverflow.com/questions/42099564/how-to-find-elements-that-sum-up-to-ten-in-array/42103064#42103064", "title": "How to find elements that sum up to ten in array", "body": "<p><code>#inject</code> is a weird method to use for this purpose. The way you've written it, a nil is being returned as the aggregator which is why you're not getting the desired result. Remove it and the logic is clearer:</p>\n\n<pre><code>array =  [6, 2, 7, 1, 10, 9, 0, 8, 2, 10, 10, 3, 5, 7, 2, 5, 5, 5]\ndef print(array)\n  pairs = []\n  array.each_with_index do |val, idx|\n    next if idx == 0\n    prev_val = array[idx - 1]\n    curr_total = val + prev_val\n    if curr_total == 10\n      pairs &lt;&lt; [prev_val, val]\n    end\n  end\n\n  pairs.map { |pair| pair.join(':') }.join(',')\nend\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 5344550, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/740f72cb47fc3a952c2f4d975c6206ab?s=128&d=identicon&r=PG&f=1", "display_name": "olafsadventures", "link": "https://stackoverflow.com/users/5344550/olafsadventures"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 100, "favorite_count": 0, "accepted_answer_id": 42103064, "answer_count": 2, "score": -1, "last_activity_date": 1486561960, "creation_date": 1486499974, "last_edit_date": 1486507132, "question_id": 42099564, "link": "https://stackoverflow.com/questions/42099564/how-to-find-elements-that-sum-up-to-ten-in-array", "title": "How to find elements that sum up to ten in array", "body": "<p>I am trying to print elements in the array that add up to ten, but I get this error: </p>\n\n<pre><code> 8 : 25 : 55 : 5TypeError: nil can't be coerced into Fixnum \n</code></pre>\n\n<p>This is my code:</p>\n\n<pre><code>array =  [6, 2, 7, 1, 10, 9, 0, 8, 2, 10, 10, 3, 5, 7, 2, 5, 5, 5]\ndef print(array)\n  array.each_with_index.inject(0) do |m,(roll,i)|\n    if array[i] + array[i+1] == 10 \n      print \"#{array[i]} : #{array[i+1]}\"\n    end\n  end\nend\n</code></pre>\n\n<p>My desired output is:</p>\n\n<pre><code>8:2,5:5\n</code></pre>\n\n<p>How can I fix this? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "controller"], "comments": [{"owner": {"reputation": 1225, "user_id": 5724342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0fc4bbc261a7a2a233a196a0b655fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gurmukh Singh", "link": "https://stackoverflow.com/users/5724342/gurmukh-singh"}, "edited": false, "score": 1, "creation_date": 1486499650, "post_id": 42099388, "comment_id": 71369107, "body": "give the rails guide a read <a href=\"http://guides.rubyonrails.org/action_controller_overview.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/action_controller_overview.html</a>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1486504241, "post_id": 42099388, "comment_id": 71371534, "body": "A good practice is to adhere to the single responsibility principle so that each controller does one job - in other words each controller should manage only one resource. Most things like a contact page con be done with the standard CRUD verbs. Calling your controller <code>ViewsController</code> makes me want to facepalm - hard. If you want to have a controller for static pages just call it Pages or StaticController."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7509111, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qzkt5.jpg?s=128&g=1", "display_name": "Marco Calzada", "link": "https://stackoverflow.com/users/7509111/marco-calzada"}, "is_accepted": false, "score": 0, "last_activity_date": 1486503864, "creation_date": 1486503864, "answer_id": 42100595, "question_id": 42099388, "link": "https://stackoverflow.com/questions/42099388/how-to-make-a-good-practice-naming-your-controllers-in-rails/42100595#42100595", "title": "How to make a good practice naming your controllers in rails?", "body": "<p>I prefer to do it as scaffold does, for example to generate a controller for Home page where I put def Index and another controller named Contact which would have def Index, def New, def Update, etc...</p>\n\n<p>But, if you are thinking on a landing page it could be in one single controller, like all in Home Controller.</p>\n"}], "owner": {"reputation": 43, "user_id": 5078710, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3f9b0163879863b7c4a38f4893141c00?s=128&d=identicon&r=PG&f=1", "display_name": "imjustaguy", "link": "https://stackoverflow.com/users/5078710/imjustaguy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486503864, "creation_date": 1486499375, "question_id": 42099388, "link": "https://stackoverflow.com/questions/42099388/how-to-make-a-good-practice-naming-your-controllers-in-rails", "title": "How to make a good practice naming your controllers in rails?", "body": "<p>So i have an application in rails and i make a controller named views for all my static views that don't involve the database, so is a good practice make \n<code>def contact</code> and <code>def index</code> for the landing page in my views controller\nor i should make a contact controller and use index method?</p>\n\n<p>I know it works but its really a good practice?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nokogiri"], "comments": [{"owner": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "edited": false, "score": 0, "creation_date": 1486497482, "post_id": 42098571, "comment_id": 71367945, "body": "so, do you want  to get contents from <code>&lt;a&gt;</code> tags?"}, {"owner": {"reputation": 15, "user_id": 7502308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89f83533fbd86cb2bf5d09c90e115afd?s=128&d=identicon&r=PG&f=1", "display_name": "J. Loffhagen", "link": "https://stackoverflow.com/users/7502308/j-loffhagen"}, "reply_to_user": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "edited": false, "score": 0, "creation_date": 1486498079, "post_id": 42098571, "comment_id": 71368279, "body": "@mr_sudaca No I&#39;m trying to get the &lt;td&gt;*.meta.stackoverflow.com&lt;/td&gt;"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7252292"}, "is_accepted": true, "score": 0, "last_activity_date": 1486497280, "creation_date": 1486497280, "answer_id": 42098792, "question_id": 42098571, "link": "https://stackoverflow.com/questions/42098571/parsing-html-for-specific-td-tags-with-nokogiri/42098792#42098792", "title": "Parsing HTML for specific &lt;td&gt; tags with Nokogiri", "body": "<p>Once you select the table you can do</p>\n\n<pre><code>table.last_element_child.previous\n</code></pre>\n\n<p>which returns the last child and then get the last childs previous sibling.</p>\n\n<p><a href=\"https://github.com/sparklemotion/nokogiri/wiki/Cheat-sheet\" rel=\"nofollow noreferrer\">https://github.com/sparklemotion/nokogiri/wiki/Cheat-sheet</a></p>\n"}], "owner": {"reputation": 15, "user_id": 7502308, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/89f83533fbd86cb2bf5d09c90e115afd?s=128&d=identicon&r=PG&f=1", "display_name": "J. Loffhagen", "link": "https://stackoverflow.com/users/7502308/j-loffhagen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 42098792, "answer_count": 1, "score": 1, "last_activity_date": 1486590165, "creation_date": 1486496568, "last_edit_date": 1486590165, "question_id": 42098571, "link": "https://stackoverflow.com/questions/42098571/parsing-html-for-specific-td-tags-with-nokogiri", "title": "Parsing HTML for specific &lt;td&gt; tags with Nokogiri", "body": "<p>I am currently working on a SSL Certificate Enumeration tool that will query <a href=\"https://crt.sh\" rel=\"nofollow noreferrer\">https://crt.sh</a> for a specific website, and scrape the results to find sub-domains.  I am using Mechanize to get the results page as HTML, and I need to parse through the response for some specific table data.  Following is an example of one row of results</p>\n\n<pre><code>&lt;tr&gt;\n  &lt;td style=\"text-align:center\"&gt;&lt;a href=\"?id=47689622\"&gt;47689622&lt;/a&gt;&lt;/td&gt;\n  &lt;td style=\"text-align:center\"&gt;2016-10-22&lt;/td&gt;\n  &lt;td style=\"text-align:center\"&gt;2016-05-21&lt;/td&gt;\n  &lt;td&gt;*.meta.stackoverflow.com&lt;/td&gt;\n  &lt;td&gt;&lt;a style=\"white-space:normal\" href=\"?caid=1397\"&gt;C=US, O=DigiCert Inc, OU=www.digicert.com, CN=DigiCert SHA2 High Assurance Server CA&lt;/a&gt;&lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n\n<p>I need a way to pull only the second last  tag, which obviously has no id or class attached to it.  Does anyone have any experience with something similar? If so any tips would be appreciated.  The way I am getting the file from the controller is as follows.</p>\n\n<pre><code>domain = params[:domain_name]\n@result = \"Retrieving domain information from crt.sh\\nSee https://crt.sh/?q=%25#{domain} to validate manually\\n\\n\"\nhost = ENV[\"https_proxy\"][8..-1].split(\":\")[0]    \nport = ENV[\"https_proxy\"].split(\":\")[2].chomp(\"/\")\n\nagent = Mechanize.new\nagent.user_agent = 'Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.1; WOW64; Trident/6.0)'\nagent.set_proxy(host, port)\nhtml_doc = Nokogiri::HTML(agent.get(\"https://crt.sh/?q=%25#{domain}\").body, 'UTF-8')\n</code></pre>\n\n<p>I don't have much experience with Nokogiri, as I just started learning Ruby on Rails a month ago and have not needed Nokogiri until earlier today.</p>\n"}, {"tags": ["ruby", "google-bigquery"], "comments": [{"owner": {"reputation": 13852, "user_id": 122321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6246e7ea94e3d325fbcad2baa13c83?s=128&d=identicon&r=PG", "display_name": "Lars Haugseth", "link": "https://stackoverflow.com/users/122321/lars-haugseth"}, "edited": false, "score": 0, "creation_date": 1494082857, "post_id": 42098199, "comment_id": 74682080, "body": "There is a GitHub PR for this, but it hasn&#39;t been merged yet: <a href=\"https://github.com/GoogleCloudPlatform/google-cloud-ruby/pull/1432\" rel=\"nofollow noreferrer\">github.com/GoogleCloudPlatform/google-cloud-ruby/pull/1432</a>"}, {"owner": {"reputation": 473, "user_id": 1290598, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/42fcR.jpg?s=128&g=1", "display_name": "Max Ostapenko", "link": "https://stackoverflow.com/users/1290598/max-ostapenko"}, "edited": false, "score": 0, "creation_date": 1535493203, "post_id": 42098199, "comment_id": 91083724, "body": "It seems this parameter has been deprecated. There are no more details about pricing tiers on a pricing page: <a href=\"https://cloud.google.com/bigquery/pricing#on_demand_pricing\" rel=\"nofollow noreferrer\">cloud.google.com/bigquery/pricing#on_demand_pricing</a>"}], "answers": [{"comments": [{"owner": {"reputation": 13852, "user_id": 122321, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e6246e7ea94e3d325fbcad2baa13c83?s=128&d=identicon&r=PG", "display_name": "Lars Haugseth", "link": "https://stackoverflow.com/users/122321/lars-haugseth"}, "edited": false, "score": 0, "creation_date": 1494776872, "post_id": 43949058, "comment_id": 74961655, "body": "The question was how to do it using the Ruby API, which doesn&#39;t include this option yet (see my comment to the question.)"}], "tags": [], "owner": {"reputation": 3033, "user_id": 5012320, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/khPPC.jpg?s=128&g=1", "display_name": "lax1089", "link": "https://stackoverflow.com/users/5012320/lax1089"}, "is_accepted": false, "score": 0, "last_activity_date": 1494648083, "creation_date": 1494648083, "answer_id": 43949058, "question_id": 42098199, "link": "https://stackoverflow.com/questions/42098199/how-do-i-set-the-billingtier-in-the-bigquery-ruby-api/43949058#43949058", "title": "How do I set the BillingTier in the BigQuery Ruby API?", "body": "<p>To run the query at a higher pricing tier, pass a new value for <code>maximumBillingTier</code> as part of the query request, the same way as you pass other properties. See reference <a href=\"https://cloud.google.com/bigquery/docs/reference/v2/jobs#configuration.query\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>For example, you could do something like <code>configuration.query.createDisposition</code> or <code>configuration.query.allowLargeResults</code></p>\n\n<p>It should be noted that the <code>maximumBillingTier</code> is a positive integer that serves as a multiplier of the basic price of $5 per TB. See reference and more detailed info <a href=\"https://cloud.google.com/bigquery/pricing#high-compute\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>You could also achieve this from within bq command line:</p>\n\n<pre><code>USAGE: bq.py [--global_flags] &lt;command&gt; [--command_flags] [args]\n</code></pre>\n\n<p>Alter the <code>job_property</code> global flag as needed:</p>\n\n<blockquote>\n  <p>--job_property: Additional key-value pairs to include in the properties field of the job configuration; repeat this option to\n  specify a list of values</p>\n</blockquote>\n"}], "owner": {"reputation": 739, "user_id": 6719378, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/85c10d5eb8d877f42b0382b39399def3?s=128&d=identicon&r=PG&f=1", "display_name": "dorachan2010", "link": "https://stackoverflow.com/users/6719378/dorachan2010"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 180, "favorite_count": 0, "answer_count": 1, "score": 6, "last_activity_date": 1494648083, "creation_date": 1486495295, "last_edit_date": 1486541265, "question_id": 42098199, "link": "https://stackoverflow.com/questions/42098199/how-do-i-set-the-billingtier-in-the-bigquery-ruby-api", "title": "How do I set the BillingTier in the BigQuery Ruby API?", "body": "<p>Some of my queries are returning <code>billingTierLimitExceeded</code> error and troubleshooting it lead me to documents telling me to change the configuration for my query job.</p>\n\n<p>I found the <code>configuration.query.maximumBillingTier</code> in the REST API but not for Ruby client library.</p>\n\n<p>How do I set <code>configuration.query.maximumBillingTier</code> using the Ruby SDK?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "ruby-on-rails-3", "join"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1486495235, "post_id": 42098028, "comment_id": 71366709, "body": "You would need to aggregate (read count) the number of emails received e.g. select(&#39;count(recipients.id) as emails_received&#39;).group(&#39;contacts.id&#39;)"}, {"owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1486496888, "post_id": 42098028, "comment_id": 71367653, "body": "How would that allow users to order them?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1486497157, "post_id": 42098028, "comment_id": 71367787, "body": "You mean <code>order(&#39;count(recipients.id) ASC&#39;)</code>? Well then just like that"}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1486498047, "post_id": 42098028, "comment_id": 71368258, "body": "@engineersmnky I believe you need to have the <code>count</code> in <code>select</code> in order to do that."}, {"owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1486498055, "post_id": 42098028, "comment_id": 71368262, "body": "@engineersmnky so what would the full line look like? <code>@contacts = Contact.where(user_id: session[:user_id]).select(&#39;count(recipients.id) as emails_received&#39;).group(&#39;contacts.id&#39;).all.order(&#39;count(reci&zwnj;&#8203;pients.id) ASC&#39;)</code> ?"}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1486498241, "post_id": 42098028, "comment_id": 71368370, "body": "@BenSmith get rid off the <code>all</code>, it will convert it into an array. and <code>order(&#39;emails_received&#39;)</code>"}, {"owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "edited": false, "score": 0, "creation_date": 1486498479, "post_id": 42098028, "comment_id": 71368489, "body": "Would one of you show me what the overall line would be? I&#39;m finding the mismatch of comments difficult to understand"}], "answers": [{"comments": [{"owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "edited": false, "score": 0, "creation_date": 1486498650, "post_id": 42099126, "comment_id": 71368585, "body": "Thanks but this is giving me the error: <code>SQLite3::SQLException: no such column: reci\u200c\u200bpients.id: SELECT contacts.*, count(recipients.id) as emails_received FROM &quot;contacts&quot; INNER JOIN &quot;recipients&quot; ON &quot;recipients&quot;.&quot;contact_id&quot; = &quot;contacts&quot;.&quot;id&quot; WHERE &quot;contacts&quot;.&quot;user_id&quot; = ? GROUP BY contacts.id  ORDER BY count(reci\u200c\u200bpients.id) ASC</code>"}, {"owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "edited": false, "score": 0, "creation_date": 1486498847, "post_id": 42099126, "comment_id": 71368687, "body": "I removed the <code>.order(&#39;count(reci\u200c\u200bpients.id) ASC&#39;)</code> to see whether that would just show me all the contacts. Unfortunately, it doesn&#39;t show the contacts who have not received an email - so those who do not appear in the recipients table."}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "reply_to_user": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "edited": false, "score": 0, "creation_date": 1486501662, "post_id": 42099126, "comment_id": 71370198, "body": "@BenSmith oops... my bad. forgot to change that. should be <code>.order(&#39;emails_received ASC&#39;)</code>"}], "tags": [], "owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "is_accepted": false, "score": 0, "last_activity_date": 1486501622, "last_edit_date": 1486501622, "creation_date": 1486498546, "answer_id": 42099126, "question_id": 42098028, "link": "https://stackoverflow.com/questions/42098028/ruby-on-rails-left-outer-join-with-sort/42099126#42099126", "title": "Ruby on Rails: Left Outer Join with Sort", "body": "<p>try this.</p>\n\n<pre><code>@contacts = Contact.select('contacts.*, count(recipients.id) as emails_received')\n                   .where(user_id: session[:user_id])\n                   .joins(:recipients)\n                   .group('contacts.id')\n                   .order('emails_received ASC')\n</code></pre>\n\n<p>If you want to show the ones that didn't receive email, you need left outer join.</p>\n\n<pre><code>@contacts = Contact.select('contacts.*, count(recipients.id) as emails_received')\n                   .where(user_id: session[:user_id])\n                   .joins('LEFT OUTER JOIN recipients ON recipients.contact_id = contacts.id)\n                   .group('contacts.id')\n                   .order('emails_received ASC')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "edited": false, "score": 0, "creation_date": 1486499851, "post_id": 42099427, "comment_id": 71369230, "body": "This seems to work though I cannot get the ordering to work?"}, {"owner": {"reputation": 1163, "user_id": 1826058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4182d58570b11f50ad0baf667b80300?s=128&d=identicon&r=PG", "display_name": "kaspernj", "link": "https://stackoverflow.com/users/1826058/kaspernj"}, "reply_to_user": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "edited": false, "score": 0, "creation_date": 1486500076, "post_id": 42099427, "comment_id": 71369376, "body": "@BenSmith I have added an example on how to do the sorting as well. I have tested a working query like this on Postgres which works."}, {"owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "edited": false, "score": 0, "creation_date": 1486500334, "post_id": 42099427, "comment_id": 71369527, "body": "That&#39;s great! Thank you!"}], "tags": [], "owner": {"reputation": 1163, "user_id": 1826058, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4182d58570b11f50ad0baf667b80300?s=128&d=identicon&r=PG", "display_name": "kaspernj", "link": "https://stackoverflow.com/users/1826058/kaspernj"}, "is_accepted": true, "score": 2, "last_activity_date": 1486500057, "last_edit_date": 1486500057, "creation_date": 1486499537, "answer_id": 42099427, "question_id": 42098028, "link": "https://stackoverflow.com/questions/42098028/ruby-on-rails-left-outer-join-with-sort/42099427#42099427", "title": "Ruby on Rails: Left Outer Join with Sort", "body": "<p>In order to do a LEFT OUTER JOIN try this:</p>\n\n<pre><code>Contact.includes(:recipients).references(:recipients)\n</code></pre>\n\n<p>Note: This will also preload recipients and add a ton of SQL to the query</p>\n\n<p>If you also want to do the sorting, then you should be able to do so like this:</p>\n\n<pre><code>Contact.includes(:recipients).references(:recipients).group(\"contacts.id, recipients.id\").order(\"COUNT(recipients.id) ASC\")\n</code></pre>\n"}], "owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 659, "favorite_count": 0, "accepted_answer_id": 42099427, "answer_count": 2, "score": 0, "last_activity_date": 1486501622, "creation_date": 1486494698, "question_id": 42098028, "link": "https://stackoverflow.com/questions/42098028/ruby-on-rails-left-outer-join-with-sort", "title": "Ruby on Rails: Left Outer Join with Sort", "body": "<p>I have a RoR application for sending emails, I have the models Contacts, Recipients, and Users, whereby a user can have many contacts and a contact can have many recipients. The data looks like this:</p>\n\n<pre><code> User\n ID     Name\n 1      Ben\n 2      Emily\n 3      Brian\n\n Contact\n ID       Name     User_ID\n 1        Jack     1\n 2        Joe      2\n 3        Chloe    2\n 4        Jacob    1\n 5        Trevor   3\n\n Recipient\n ID     Contact_ID     Email_ID (not relevant for this question)\n 1      1              2\n 2      1              1\n 3      4              5\n 4      1              6\n 5      2              8\n</code></pre>\n\n<p>What I want to do is on the index page for contacts, display all the contacts belonging to a user allow the user to choose what to order them by, such as name and the amount of emails received.</p>\n\n<p>The problem I have is that I can display all the contacts belonging to a user no problem, but I am struggling to allow a user to sort the contacts by the amount of emails they have received. The amount of emails they have received can be calculated by counting the amount of recipients with the same contact id. The reason I have this problem is because I want to display all the contacts belonging to a user irrespective of whether they have received emails (a contact may have received 0 emails). The code I have tried is:</p>\n\n<pre><code>@contacts = Contact.where(user_id: session[:user_id]).all.order(params.fetch(:sort, 'id asc'))\n</code></pre>\n\n<p>But this doesn't allow a user to sort by the amount of emails the contacts have received.</p>\n\n<p>I have also tried this:</p>\n\n<pre><code>  @contacts = Contact.where(user_id: session[:user_id]).joins(:recipients).group('contacts.id').all.order(params.fetch(:sort, 'id asc'))\n</code></pre>\n\n<p>But this only displays the contacts who have received emails.</p>\n\n<p>And I have also tried this:</p>\n\n<pre><code>@contacts = Contact.where(user_id: session[:user_id]).joins(\"LEFT OUTER JOIN contacts ON contacts.id = recipients.contact_id\").all.order('max(recipients.contact_id) DESC')\n</code></pre>\n\n<p>This displays all contacts who have and have not received emails and allows sorting, but it shows duplicate data. I.e. using the above data, if Ben were to look at his contacts (user_id 1) he could see Jack and Jacob, but because Jack has received 3 emails he would see the following:</p>\n\n<pre><code>First Name:\nJack\nJacob\nJack\nJack\nJack\n</code></pre>\n\n<p>Is there a way to solve this? Please note that I am currently using the following code on <code>index.html.erb</code> to allow a user to select what they want to order the records by:</p>\n\n<pre><code>&lt;form&gt;\n    Order By:\n    &lt;select name=\"sort\"&gt;\n        &lt;option value=\"firstname ASC\"&gt;First Name (A - Z)&lt;/option&gt;\n        &lt;option value=\"firstname DESC\"&gt;First Name (Z - A)&lt;/option&gt;\n        &lt;option value=\"surname ASC\"&gt;Surname (A - Z)&lt;/option&gt;\n        &lt;option value=\"surname DESC\"&gt;Surname (Z - A)&lt;/option&gt;\n        &lt;option value=\"email ASC\"&gt;Email (A - Z)&lt;/option&gt;\n        &lt;option value=\"email DESC\"&gt;Email (Z - A)&lt;/option&gt;\n        &lt;option value=\"max(recipients.contact_id) ASC\"&gt;Emails Recieved (Low - High)&lt;/option&gt;\n        &lt;option value=\"max(recipients.contact_id) DESC\"&gt;Emails Recieved (High - Low)&lt;/option&gt;\n\n        &lt;option value=\"updated_at ASC\"&gt;Date Updated (Oldest First)&lt;/option&gt;\n        &lt;option value=\"updated_at DESC\"&gt;Date Updated (Newest First)&lt;/option&gt;\n    &lt;/select&gt;\n    &lt;button&gt;\n        Go\n    &lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n"}, {"tags": ["ruby", "rufus-scheduler"], "comments": [{"owner": {"reputation": 14364, "user_id": 1023609, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14cd00b085c207261db49ac46be4773c?s=128&d=identicon&r=PG", "display_name": "MurifoX", "link": "https://stackoverflow.com/users/1023609/murifox"}, "edited": false, "score": 0, "creation_date": 1486494929, "post_id": 42097927, "comment_id": 71366519, "body": "I believe that&#39;s a typo, you don&#39;t need the last <code>end</code>. Why do you have the params <code>url</code> <code>count</code> <code>method</code>, if you are not using?"}, {"owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "reply_to_user": {"reputation": 14364, "user_id": 1023609, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14cd00b085c207261db49ac46be4773c?s=128&d=identicon&r=PG", "display_name": "MurifoX", "link": "https://stackoverflow.com/users/1023609/murifox"}, "edited": false, "score": 0, "creation_date": 1486495112, "post_id": 42097927, "comment_id": 71366630, "body": "those are passed in the command line I just didn&#39;t explicitly call out the ARGV."}], "answers": [{"comments": [{"owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "edited": false, "score": 0, "creation_date": 1486505278, "post_id": 42099976, "comment_id": 71372067, "body": "oh yes you are right my actual script uses puts, but rewriting the abstraction I excluded it...but you hit the main issue which is the $schedule.join......"}, {"owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "edited": false, "score": 0, "creation_date": 1486505289, "post_id": 42099976, "comment_id": 71372070, "body": "so I think you solved my problem let me give it a go!"}, {"owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "edited": false, "score": 0, "creation_date": 1486505529, "post_id": 42099976, "comment_id": 71372216, "body": "Yes!  this is working, thank you.  I wish this had been in the examples or documentation somehow.  I wouldn&#39;t have known to use the $schedule and <code>join</code>.....how did you figure that out based on the documentation?"}, {"owner": {"reputation": 3437, "user_id": 10762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d96626e52beb1ff90f57a8e189e1e6f?s=128&d=identicon&r=PG", "display_name": "jmettraux", "link": "https://stackoverflow.com/users/10762/jmettraux"}, "reply_to_user": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "edited": false, "score": 0, "creation_date": 1486506883, "post_id": 42099976, "comment_id": 71372843, "body": "The join is in the documentation: <a href=\"https://github.com/jmettraux/rufus-scheduler\" rel=\"nofollow noreferrer\">github.com/jmettraux/rufus-scheduler</a> (quickstart.rb top first code example) There is also <a href=\"https://github.com/jmettraux/rufus-scheduler#schedulerjoin\" rel=\"nofollow noreferrer\">github.com/jmettraux/rufus-scheduler#schedulerjoin</a> and, as a programmer, you should understand that when a program exits, its threads die with it. I wrote rufus-scheduler so I know its documentation. &quot;join&quot; simply follows the Thread#join pattern for programmer familiarity. So please read the documentation before complaining &quot;I wish this had been in the doc&quot;. Do not put the blame on others."}], "tags": [], "owner": {"reputation": 3437, "user_id": 10762, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d96626e52beb1ff90f57a8e189e1e6f?s=128&d=identicon&r=PG", "display_name": "jmettraux", "link": "https://stackoverflow.com/users/10762/jmettraux"}, "is_accepted": true, "score": 2, "last_activity_date": 1486502875, "last_edit_date": 1486502875, "creation_date": 1486501471, "answer_id": 42099976, "question_id": 42097927, "link": "https://stackoverflow.com/questions/42097927/how-to-queue-rufus-scheduler-jobs/42099976#42099976", "title": "How to queue rufus-scheduler jobs", "body": "<p>How can you expect</p>\n\n<pre><code>def loop\n  \"hey I am i the loop\"\nend \n</code></pre>\n\n<p>to output anything to stdout (not STD)? It is just returning a string, it is not calling <code>print</code> or <code>puts</code>...</p>\n\n<pre><code># myScript.rb\n\nrequire 'rufus-scheduler'\n\ndef _loop(u, c, m)\n  # \"loop\" is a bad name, it's a Ruby keyword, so using \"_loop\" instead\n  # it's still a bad name\n\n  p \"hey I am i the loop\"\n  p [ Time.now, [ u, c, m ] ]\n    # without p or puts nothing gets to stdout\nend\n\n$scheduler = Rufus::Scheduler.new\n  # creating a single scheduler for the whole script\n  # not creating a new scheduler each time run_schedule is called\n\ndef run_schedule(url, count, method, interval)\n\n  #puts \"running scheduler\"\n  #scheduler = Rufus::Scheduler.new\n    # commenting out...\n\n  $scheduler.every interval do\n\n    _loop(url, count, method)\n  end\nend\n\n#run_schedule(url, count, method, interval)\nrun_schedule('url', 'count', 'method', '3s')\n\n$scheduler.join\n  # let the Ruby main thread join the scheduler thread so that\n  # the Ruby process does not exit and so scheduling may happen\n</code></pre>\n\n<p>and so it goes:</p>\n\n<pre><code>\"hey I am i the loop\"\n[2017-02-08 06:06:01 +0900, [\"url\", \"count\", \"method\"]]\n\"hey I am i the loop\"\n[2017-02-08 06:06:05 +0900, [\"url\", \"count\", \"method\"]]\n\"hey I am i the loop\"\n[2017-02-08 06:06:08 +0900, [\"url\", \"count\", \"method\"]]\n</code></pre>\n\n<p>Note the <code>$scheduler.join</code> at the end of the script. That prevents the Ruby process from exiting. Since that process doesn't exist, the threads in it (in our case, the thread in the rufus-scheduler instance) live and do their work. Your initial script was simply exiting, freeing all its resources, as expected.</p>\n"}], "owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 1, "accepted_answer_id": 42099976, "answer_count": 1, "score": 1, "last_activity_date": 1486507268, "creation_date": 1486494388, "last_edit_date": 1486507268, "question_id": 42097927, "link": "https://stackoverflow.com/questions/42097927/how-to-queue-rufus-scheduler-jobs", "title": "How to queue rufus-scheduler jobs", "body": "<p>I have something like the following:</p>\n\n<pre><code># myScript.rb\n\nrequire 'rufus-scheduler'\n\n  def loop\n    \"hey I am i the loop\"\n  end \n\n  def run_schedule(url, count, method, interval)\n    puts \"running scheduler\"\n\n    scheduler = Rufus::Scheduler.new\n\n    scheduler.every interval do\n\n    loop(url, count, method)\n    end\n  end  \n\n  run_schedule(url, count, method, interval)\n</code></pre>\n\n<p>My expectation is that when I run:</p>\n\n<pre><code>bundle exec ruby myScript.rb url, count, method, interval\n</code></pre>\n\n<p>I see output to STD a bunch of \"hey I am in the loop\" based on the interval.</p>\n\n<p>What happens is I exit to the command line prompt and never see the loop run.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "edited": false, "score": 2, "creation_date": 1486491805, "post_id": 42097014, "comment_id": 71364786, "body": "also, you can eager load events by doing <code>@epoches = Epoch.includes(:events)</code> and avoid doing sql queries (<code>epoch.events</code>) in your view"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "edited": false, "score": 0, "creation_date": 1486493168, "post_id": 42097014, "comment_id": 71365532, "body": "@mr_sudaca I would upvote your comment 4 more times if I could. Views should not query the database and especially when performing n+1 queries."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7252292"}, "reply_to_user": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "edited": false, "score": 0, "creation_date": 1486493298, "post_id": 42097014, "comment_id": 71365614, "body": "Good point, @mr_sudaca do you want to propose an edit with that included in the answer and then I will accept?"}, {"owner": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "edited": false, "score": 0, "creation_date": 1486493499, "post_id": 42097014, "comment_id": 71365726, "body": "edit added, first edit :), so don&#39;t know if it&#39;s valid for SO"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7252292"}, "is_accepted": true, "score": 3, "last_activity_date": 1486493538, "last_edit_date": 1486493538, "creation_date": 1486491246, "answer_id": 42097014, "question_id": 42096979, "link": "https://stackoverflow.com/questions/42096979/rails-get-objects-belong-to-other-objects/42097014#42097014", "title": "Rails - get objects belong to other objects", "body": "<p>Remove the <code>@events = Epoch.find(params[:id]).event.all</code> line in the controller and the view should be this.</p>\n\n<pre><code>&lt;% @epoches.each do |epoch| %&gt;\n    &lt;div&gt;&lt;%= epoch.main_title %&gt; : &lt;/div&gt;\n    &lt;% epoch.events.each do |event| %&gt;\n        &lt;div&gt;&lt;%= event.title %&gt;&lt;/div&gt;\n    &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Edit: You can eager load events by doing <code>@epoches = Epoch.includes(:events)</code> in your controller. That will cache both epochs and events and also will prevent doing sql queries in your view</p>\n"}], "owner": {"reputation": 119, "user_id": 7039910, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/464edee302c4920a64df3b21810ed084?s=128&d=identicon&r=PG&f=1", "display_name": "crcerror", "link": "https://stackoverflow.com/users/7039910/crcerror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 42097014, "answer_count": 1, "score": 0, "last_activity_date": 1486493538, "creation_date": 1486491140, "question_id": 42096979, "link": "https://stackoverflow.com/questions/42096979/rails-get-objects-belong-to-other-objects", "title": "Rails - get objects belong to other objects", "body": "<p>appreciate if you help me. I'm using rails 4.2.</p>\n\n<p>I have 2 models - Epoch and Event. Every epoch has many events. </p>\n\n<p>I want to make list with events for every epoch:</p>\n\n<pre><code>&lt;% @epoches.each do |epoch| %&gt;\n    &lt;div&gt;&lt;%= epoch.main_title %&gt; : &lt;/div&gt;\n    &lt;% @events.each do |event| %&gt;\n        &lt;div&gt;&lt;%= event.title %&gt;&lt;/div&gt;\n    &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>my epoches_controller.rb looks like:</p>\n\n<pre><code>def epochline\n    @epoches = Epoch.all\n    @events = Epoch.find(params[:id]).event.all\nend\n</code></pre>\n\n<p>When i call in console \"Epoch.find(1).events.all\" it works amazing, but web-server return error - \"Couldn't find Epoch with 'id'=\". What am i doing wrong? How can I edit my controller to solve this problem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "stripe-connect"], "comments": [{"owner": {"reputation": 258, "user_id": 5372350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bxH_xBs-r9s/AAAAAAAAAAI/AAAAAAAAABg/UYFtw0nAYW8/photo.jpg?sz=128", "display_name": "Sonu Singh", "link": "https://stackoverflow.com/users/5372350/sonu-singh"}, "edited": false, "score": 0, "creation_date": 1486488401, "post_id": 42096049, "comment_id": 71362831, "body": "Please check params[:stripeToken] value, might be your stripe token not generating properly."}, {"owner": {"reputation": 258, "user_id": 5372350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bxH_xBs-r9s/AAAAAAAAAAI/AAAAAAAAABg/UYFtw0nAYW8/photo.jpg?sz=128", "display_name": "Sonu Singh", "link": "https://stackoverflow.com/users/5372350/sonu-singh"}, "edited": false, "score": 1, "creation_date": 1486490397, "post_id": 42096049, "comment_id": 71364006, "body": "Did you check params[:stripeToken] value in your controller?"}, {"owner": {"reputation": 49, "user_id": 5644106, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EJqID.jpg?s=128&g=1", "display_name": "ChrisJC2017", "link": "https://stackoverflow.com/users/5644106/chrisjc2017"}, "reply_to_user": {"reputation": 258, "user_id": 5372350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bxH_xBs-r9s/AAAAAAAAAAI/AAAAAAAAABg/UYFtw0nAYW8/photo.jpg?sz=128", "display_name": "Sonu Singh", "link": "https://stackoverflow.com/users/5372350/sonu-singh"}, "edited": false, "score": 0, "creation_date": 1486492051, "post_id": 42096049, "comment_id": 71364932, "body": "You are right, it is not being generated properly: &quot;authenticity_token&quot;=&gt;&quot;kdL18CbkOWWJMnytdU/IQx4WD+0IgfTzbLDEs&zwnj;&#8203;1rV31O6dgLTV/MgA3HWf&zwnj;&#8203;jBo5FgJ1mxrXxw9ZU8+B&zwnj;&#8203;VO7LayxQg==&quot;, &quot;amount&quot;=&gt;&quot;10&quot;, &quot;stripeToken&quot;=&gt;&quot;&quot;}.  how do I fix this?"}, {"owner": {"reputation": 49, "user_id": 5644106, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EJqID.jpg?s=128&g=1", "display_name": "ChrisJC2017", "link": "https://stackoverflow.com/users/5644106/chrisjc2017"}, "reply_to_user": {"reputation": 258, "user_id": 5372350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bxH_xBs-r9s/AAAAAAAAAAI/AAAAAAAAABg/UYFtw0nAYW8/photo.jpg?sz=128", "display_name": "Sonu Singh", "link": "https://stackoverflow.com/users/5372350/sonu-singh"}, "edited": false, "score": 0, "creation_date": 1486493880, "post_id": 42096049, "comment_id": 71365916, "body": "I&#39;ve edited my form js from this answer: <a href=\"http://stackoverflow.com/questions/20049865/stripe-checkout-with-custom-integration-in-rails\" title=\"stripe checkout with custom integration in rails\">stackoverflow.com/questions/20049865/&hellip;</a> but am still having the same issue"}, {"owner": {"reputation": 258, "user_id": 5372350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bxH_xBs-r9s/AAAAAAAAAAI/AAAAAAAAABg/UYFtw0nAYW8/photo.jpg?sz=128", "display_name": "Sonu Singh", "link": "https://stackoverflow.com/users/5372350/sonu-singh"}, "edited": false, "score": 0, "creation_date": 1486542016, "post_id": 42096049, "comment_id": 71384779, "body": "Please create stripe.rb file inside config/initializers   Rails.configuration.stripe = { \t:publishable_key =&gt;  &#39;PUBLISHABLE_KEY&#39;,   \t:secret_key =&gt;  &#39;SECRET_KEY&#39;   } Stripe.api_key = Rails.configuration.stripe[:secret_key]"}, {"owner": {"reputation": 49, "user_id": 5644106, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EJqID.jpg?s=128&g=1", "display_name": "ChrisJC2017", "link": "https://stackoverflow.com/users/5644106/chrisjc2017"}, "reply_to_user": {"reputation": 258, "user_id": 5372350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bxH_xBs-r9s/AAAAAAAAAAI/AAAAAAAAABg/UYFtw0nAYW8/photo.jpg?sz=128", "display_name": "Sonu Singh", "link": "https://stackoverflow.com/users/5372350/sonu-singh"}, "edited": false, "score": 0, "creation_date": 1486603520, "post_id": 42096049, "comment_id": 71421284, "body": "Yes, I already had that.."}, {"owner": {"reputation": 49, "user_id": 5644106, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EJqID.jpg?s=128&g=1", "display_name": "ChrisJC2017", "link": "https://stackoverflow.com/users/5644106/chrisjc2017"}, "reply_to_user": {"reputation": 258, "user_id": 5372350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bxH_xBs-r9s/AAAAAAAAAAI/AAAAAAAAABg/UYFtw0nAYW8/photo.jpg?sz=128", "display_name": "Sonu Singh", "link": "https://stackoverflow.com/users/5372350/sonu-singh"}, "edited": false, "score": 0, "creation_date": 1486734599, "post_id": 42096049, "comment_id": 71486931, "body": "Thanks for you help!  I was unable to determine the issue and have rolled back to basic  forms and charges to start over and try doing it properly."}], "answers": [{"tags": [], "owner": {"reputation": 95, "user_id": 1457646, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/VoFGc.jpg?s=128&g=1", "display_name": "Subrat Rout", "link": "https://stackoverflow.com/users/1457646/subrat-rout"}, "is_accepted": false, "score": 0, "last_activity_date": 1503999856, "creation_date": 1503999856, "answer_id": 45935785, "question_id": 42096049, "link": "https://stackoverflow.com/questions/42096049/stripe-standalone-source-paramsstripetoken-error/45935785#45935785", "title": "Stripe standalone :source =&gt; params[:stripeToken] error", "body": "<p>I had exactly the similar problem. But after few hours of struggle I figured it out. The reason is following. If you are using Rails 4.+ and using Turbolinks along with it, then it loads entire javascript for that page and when you are loading modal the javascript on that modal page wont work. You have to switch off the turbolink.</p>\n\n<p>For me I switched off at the link level which is the link responsible for loading the charge/new page. Example:\n<code>\n   &lt;%= link_to \"Buy\", new_charge_path(product_id: @product.id),'data-no-turbolink' => true  %>\n</code></p>\n"}], "owner": {"reputation": 49, "user_id": 5644106, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/EJqID.jpg?s=128&g=1", "display_name": "ChrisJC2017", "link": "https://stackoverflow.com/users/5644106/chrisjc2017"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 437, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1503999856, "creation_date": 1486487919, "last_edit_date": 1486516516, "question_id": 42096049, "link": "https://stackoverflow.com/questions/42096049/stripe-standalone-source-paramsstripetoken-error", "title": "Stripe standalone :source =&gt; params[:stripeToken] error", "body": "<p>I'm new to Stripe connect, building a marketplace app using stripe connect standalone, and require the user to enter a custom amount to pay the other user. The old form I was using worked fine, but once I changed to the new form, my :source  => params[:stripeToken] no longer generates, as well as :stripeEmail.  What is causing this?</p>\n\n<blockquote>\n  <p>Invalid source object: must be a dictionary or a non-empty string</p>\n</blockquote>\n\n<p>my original charges_controller.rb</p>\n\n<pre><code>class ChargesController &lt; ApplicationController\n\n    def new\n    end\n\ndef create\n  # Amount in cents\n  @amount = 500\n\n  customer = Stripe::Customer.create(\n    :email =&gt; params[:stripeEmail],\n    :source  =&gt; params[:stripeToken]\n  )\n\n  charge = Stripe::Charge.create(\n    :customer    =&gt; customer.id,\n    :amount      =&gt; @amount,\n    :description =&gt; 'Wage Payment',\n    :currency    =&gt; 'cad'\n  )\n\nrescue Stripe::CardError =&gt; e\n  flash[:error] = e.message\n  redirect_to new_charge_path\nend\nend\n</code></pre>\n\n<p>then I added the methods from the stripe recipe for custom amounts:</p>\n\n<pre><code>def create\n   @amount = params[:amount]\n\n  @amount = @amount.gsub('$', '').gsub(',', '')\n\n  begin\n    @amount = Float(@amount).round(2)\n  rescue\n    flash[:error] = 'Charge not completed. Please enter a valid amount in CAD ($).'\n    redirect_to new_charge_path\n    return\n  end\n\n  @amount = (@amount * 100).to_i # Must be an integer!\n\n  if @amount &lt; 500\n    flash[:error] = 'Charge not completed. Payment amount must be at least $5.'\n    redirect_to new_charge_path\n    return\n  end\n\n  charge = Stripe::Charge.create(\n    :amount =&gt; @amount,\n    :customer    =&gt; customer.id,\n    :currency =&gt; 'cad',\n    :source =&gt; params[:stripeToken],\n    :description =&gt; \u2018Payment'\n  )\n\n     customer = Stripe::Customer.create(\n    :email =&gt; params[:stripeEmail],\n    :source  =&gt; params[:stripeToken]\n  )\n\n  rescue Stripe::CardError =&gt; e\n    flash[:error] = e.message\n    redirect_to new_charge_path\n  end\n</code></pre>\n\n<p>I also modified the form, and added the javascript in charges/new.html.erb:</p>\n\n<p>old form:</p>\n\n<pre><code>&lt;script type=\"text/javascript\" src=\"https://js.stripe.com/v2/\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\nStripe.setPublishableKey('pk_test_my_key');\n&lt;/script&gt;\n\n&lt;%= form_tag charges_path do %&gt;\n  &lt;article&gt;\n    &lt;% if flash[:error].present? %&gt;\n      &lt;div id=\"error_explanation\"&gt;\n        &lt;p&gt;&lt;%= flash[:error] %&gt;&lt;/p&gt;\n      &lt;/div&gt;\n    &lt;% end %&gt;\n    &lt;label class=\"amount\"&gt;\n      &lt;span&gt;Amount: $5.00&lt;/span&gt;\n    &lt;/label&gt;\n  &lt;/article&gt;\n\n  &lt;script src=\"https://checkout.stripe.com/checkout.js\" class=\"stripe-button\"\n          data-key=\"&lt;%= Rails.configuration.stripe[:publishable_key] %&gt;\"\n          data-description=\"A month's subscription\"\n          data-amount=\"500\"\n          data-locale=\"auto\"&gt;&lt;/script&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>new form:</p>\n\n<pre><code> &lt;%= form_tag charges_path, id: 'form' do %&gt;\n  &lt;div id=\"error_explanation\"&gt;\n    &lt;% if flash[:error].present? %&gt;\n      &lt;p&gt;&lt;%= flash[:error] %&gt;&lt;/p&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n  &lt;article&gt;\n    &lt;%= label_tag(:amount, 'Payment Amount:') %&gt;\n    &lt;%= text_field_tag(:amount) %&gt;\n  &lt;/article&gt;\n  &lt;article&gt;\n    &lt;%= hidden_field_tag(:stripeToken) %&gt;\n    &lt;%= hidden_field_tag(:stripeEmail) %&gt;\n  &lt;/article&gt;\n  &lt;button id='donateButton'&gt;Pay Now&lt;/button&gt;\n&lt;% end %&gt;\n\n&lt;script src=\"https://checkout.stripe.com/checkout.js\"&gt;&lt;/script&gt;\n&lt;script type=\"text/javascript\"&gt;\nStripe.setPublishableKey('pk_test_CcUZ1IJxEqLR5RvVE3p5tx3U');\n&lt;/script&gt;\n&lt;script&gt;\n\n\nvar handler = StripeCheckout.configure({\n  key: '&lt;%= Rails.configuration.stripe[:publishable_key] %&gt;',\n  locale: 'auto',\n  name: 'Payments',\n  description: 'Wage',\n  token: function(token) {\n    $('input#stripeToken').val(token.id);\n    $('input#stripeEmail').val(token.id);\n    $('form').submit();\n  }\n});\n\n    $('#donateButton').on('click', function(e) {\n      e.preventDefault();\n\n      $('#error_explanation').html('');\n\n      var amount = $('input#amount').val();\n      amount = amount.replace(/\\$/g, '').replace(/\\,/g, '')\n\n      amount = parseFloat(amount);\n\n      if (isNaN(amount)) {\n        $('#error_explanation').html('&lt;p&gt;Please enter a valid amount in CAD ($).&lt;/p&gt;');\n      }\n      else if (amount &lt; 5.00) {\n        $('#error_explanation').html('&lt;p&gt;Wage amount must be at least $5.&lt;/p&gt;');\n      }\n      else {\n        amount = amount * 100; // Needs to be an integer!\n        handler.open({\n          amount: Math.round(amount)\n        })\n      }\n    });\n\n    // Close Checkout on page navigation\n    $(window).on('popstate', function() {\n      handler.close();\n    });\n    &lt;/script&gt;\n</code></pre>\n\n<p>Now when I submit the custom amount, I am given the following error:</p>\n\n<blockquote>\n  <p>You have passed a blank string for 'source'. You should remove the\n  'source' parameter from your request or supply a non-blank value</p>\n  \n  <p>Extracted source (around line #27):  Stripe::Charge.create(</p>\n</blockquote>\n\n<p>Not sure how to proceed.  This error seems to be associated to creating charges, as the error is in the charges controller.  Or it is in the javascript of the new custom form.</p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "internationalization", "rails-i18n"], "comments": [{"owner": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 1, "creation_date": 1486501054, "post_id": 42095714, "comment_id": 71369881, "body": "The YAML seems right. Are you sure the current locale for that request or irb session is indeed &#39;cs&#39;? Also, If that is a new locale file and you&#39;re testing this through a web request, don&#39;t forget to restart the server because rails doesn&#39;t pick up new translation files before each request."}, {"owner": {"reputation": 1047, "user_id": 1223501, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/3eDvF.jpg?s=128&g=1", "display_name": "Foton", "link": "https://stackoverflow.com/users/1223501/foton"}, "reply_to_user": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 0, "creation_date": 1486541603, "post_id": 42095714, "comment_id": 71384551, "body": "Yes, locale is &#39;cs&#39; (non ar.attributes translations are shown correctly). And I restarted server even it is old locale file."}, {"owner": {"reputation": 3785, "user_id": 839925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfa54eccd89d7c0d2225e0ca279c1191?s=128&d=identicon&r=PG", "display_name": "Alexandre Angelim", "link": "https://stackoverflow.com/users/839925/alexandre-angelim"}, "edited": false, "score": 0, "creation_date": 1486559058, "post_id": 42095714, "comment_id": 71396357, "body": "Is there any change the key activerecord is present in another translation file? I18n doesn&#39;t merge YAML keys so if there&#39;s another it can be overriding this one and these attributes aren&#39;t been taken into account."}], "answers": [{"tags": [], "owner": {"reputation": 1047, "user_id": 1223501, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/3eDvF.jpg?s=128&g=1", "display_name": "Foton", "link": "https://stackoverflow.com/users/1223501/foton"}, "is_accepted": false, "score": 0, "last_activity_date": 1486629210, "creation_date": 1486629210, "answer_id": 42131642, "question_id": 42095714, "link": "https://stackoverflow.com/questions/42095714/using-human-attribute-name-with-nested-class-in-module/42131642#42131642", "title": "Using `human_attribute_name` with nested class in module", "body": "<p>I made mistake somewhere.\nAfter @Alexanders comments, I try i from the start and voil\u00e1! The Yaml version <code>import/log:</code> works.</p>\n\n<p>Probably I tried first Yaml translation in new file without restarting server and then check other (now wrong) versions through capybara tests.</p>\n\n<p>Alexander, Thank you very much.</p>\n"}], "owner": {"reputation": 1047, "user_id": 1223501, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/3eDvF.jpg?s=128&g=1", "display_name": "Foton", "link": "https://stackoverflow.com/users/1223501/foton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 597, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486629210, "creation_date": 1486486849, "question_id": 42095714, "link": "https://stackoverflow.com/questions/42095714/using-human-attribute-name-with-nested-class-in-module", "title": "Using `human_attribute_name` with nested class in module", "body": "<p>I have class:</p>\n\n<pre><code>module Import\n  class Log &lt; ActiveRecord::Base\n  end\nend\n</code></pre>\n\n<p>I would like to use <code>Import::Log.human_attribute_name(:results)</code>.\nI already found that this will (in method) end with call </p>\n\n<pre><code>I18n.translate('activerecord.attributes.import/log.results', {:count=&gt;1, :default=&gt;[:\"attributes.results\", \"Results\"]})\n</code></pre>\n\n<p>But  I do not know how to write translation file.\nTried YML</p>\n\n<pre><code>cs:\n  activerecord:\n    attributes:\n      import/log:\n        results: \"V\u00fdsledky b\u011bhu\"\n</code></pre>\n\n<p>Tried ruby hash</p>\n\n<pre><code>{\n  cs: {\n    activerecord: {\n      attributes: {\n        'import\\/log': {\n          results: \"V\u00fdsledky b\u011bhu\"\n        }\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>Nothing works.\nAny idea?</p>\n\n<p>I </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 845, "user_id": 3545349, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/7hEUr.jpg?s=128&g=1", "display_name": "MarceloBarbosa", "link": "https://stackoverflow.com/users/3545349/marcelobarbosa"}, "edited": false, "score": 0, "creation_date": 1486487583, "post_id": 42095451, "comment_id": 71362279, "body": "looks ok... can you please post the stack trace?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 3, "creation_date": 1486489169, "post_id": 42095451, "comment_id": 71363300, "body": "I&#39;d recommend using a Ruby lint program. There are several out there, and they can be integrated with decent editors. They&#39;d immediately show the error, along with suggesting improvements to your coding style."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 7529983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0682885a32dcb8f9c9b7086e48c24dd9?s=128&d=identicon&r=PG&f=1", "display_name": "YEB", "link": "https://stackoverflow.com/users/7529983/yeb"}, "edited": false, "score": 0, "creation_date": 1486574737, "post_id": 42095476, "comment_id": 71407667, "body": "Yea got it thanks. I just started ruby a week ago, coming from javascript."}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 3, "user_id": 7529983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0682885a32dcb8f9c9b7086e48c24dd9?s=128&d=identicon&r=PG&f=1", "display_name": "YEB", "link": "https://stackoverflow.com/users/7529983/yeb"}, "edited": false, "score": 0, "creation_date": 1486579888, "post_id": 42095476, "comment_id": 71410701, "body": "My pleasure Sir :)"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 6, "last_activity_date": 1486486101, "creation_date": 1486486101, "answer_id": 42095476, "question_id": 42095451, "link": "https://stackoverflow.com/questions/42095451/how-to-find-the-missing-end-or-maybe-too-many-ends-in-ruby/42095476#42095476", "title": "How to find the missing end, or maybe too many ends in Ruby", "body": "<p>In ruby <code>++</code> and <code>--</code> operators don't exist. Go for</p>\n\n<pre><code>number_of_zeros -= 1\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 258, "user_id": 5372350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bxH_xBs-r9s/AAAAAAAAAAI/AAAAAAAAABg/UYFtw0nAYW8/photo.jpg?sz=128", "display_name": "Sonu Singh", "link": "https://stackoverflow.com/users/5372350/sonu-singh"}, "is_accepted": false, "score": 2, "last_activity_date": 1486486450, "creation_date": 1486486450, "answer_id": 42095580, "question_id": 42095451, "link": "https://stackoverflow.com/questions/42095451/how-to-find-the-missing-end-or-maybe-too-many-ends-in-ruby/42095580#42095580", "title": "How to find the missing end, or maybe too many ends in Ruby", "body": "<p>This is not correct way in Ruby <code>number_of_zeros--</code></p>\n\n<p>Please use <code>number_of_zeros -= 1</code></p>\n"}], "owner": {"reputation": 3, "user_id": 7529983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0682885a32dcb8f9c9b7086e48c24dd9?s=128&d=identicon&r=PG&f=1", "display_name": "YEB", "link": "https://stackoverflow.com/users/7529983/yeb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "accepted_answer_id": 42095476, "answer_count": 2, "score": -1, "last_activity_date": 1486489048, "creation_date": 1486486025, "last_edit_date": 1486489048, "question_id": 42095451, "link": "https://stackoverflow.com/questions/42095451/how-to-find-the-missing-end-or-maybe-too-many-ends-in-ruby", "title": "How to find the missing end, or maybe too many ends in Ruby", "body": "<p>I am getting the following error in a very short Ruby program:</p>\n\n<pre><code>(repl):8: syntax error, unexpected keyword_end\n(repl):11: syntax error, unexpected end-of-input, expecting keyword_end\n</code></pre>\n\n<p>Here is the code:</p>\n\n<pre><code>def three_digit_format(n) \n  digits = n.to_s.length \n  string = n.to_s\n  number_of_zeros = 3 - digits.to_i\n   while number_of_zeros &gt; 0 \n     string += \"0\"\n     number_of_zeros--\n   end\nend\n</code></pre>\n\n<p>It seems like this should be straightforward but I can't seem to make it work. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model"], "comments": [{"owner": {"reputation": 1182, "user_id": 1254111, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e474a928abce178452a51bd6607f39c7?s=128&d=identicon&r=PG", "display_name": "betoharres", "link": "https://stackoverflow.com/users/1254111/betoharres"}, "edited": false, "score": 0, "creation_date": 1486486520, "post_id": 42094771, "comment_id": 71361570, "body": "Thanks but adding <code>private_class_method</code> to parent class did not worked. any other suggestion?"}, {"owner": {"reputation": 1994, "user_id": 606907, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/d3aca05004a1c66695d2f22ffa69c0d2?s=128&d=identicon&r=PG", "display_name": "denys281", "link": "https://stackoverflow.com/users/606907/denys281"}, "edited": false, "score": 0, "creation_date": 1486491264, "post_id": 42094771, "comment_id": 71364475, "body": "It works for me. <code>NoMethodError: private method </code>some_method&#39; called for Child:Class from (pry):1:in <code>&lt;main&gt;&#39;</code>"}], "owner": {"reputation": 1182, "user_id": 1254111, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e474a928abce178452a51bd6607f39c7?s=128&d=identicon&r=PG", "display_name": "betoharres", "link": "https://stackoverflow.com/users/1254111/betoharres"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "closed_date": 1486484241, "answer_count": 0, "score": 1, "last_activity_date": 1486484155, "creation_date": 1486484155, "question_id": 42094771, "link": "https://stackoverflow.com/questions/42094771/im-able-to-access-a-private-method-in-a-children-model-class", "closed_reason": "Duplicate", "title": "I&#39;m able to access a private method in a children model class", "body": "<p>Trying to do Single Table Inheritance using Rails 5.0.0.1(latest), and if you do:</p>\n\n<pre><code>class Parent &lt; ApplicationRecord\n  private\n  def self.some_method=(argument)\n    return true\n  end\nend\n\nclass Child &lt; Parent\nend\n\n$ rails console\nirb(main):001:0&gt; Client.some_method\n=&gt; true\n</code></pre>\n\n<p>The code will works, which is not what I expected, it should work only if is\nprotected. Could anyone explain why this code is working? Thanks in advance.</p>\n"}, {"tags": ["ruby", "constants"], "comments": [{"owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1486485085, "post_id": 42094546, "comment_id": 71360507, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/17407908/does-ruby-provide-a-constant-added-hook-method\">Does Ruby provide a constant_added hook method?</a>"}, {"owner": {"reputation": 864, "user_id": 1423901, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mLA3B.jpg?s=128&g=1", "display_name": "Redithion", "link": "https://stackoverflow.com/users/1423901/redithion"}, "reply_to_user": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1486489038, "post_id": 42094546, "comment_id": 71363211, "body": "I don&#39;t see it as a duplicate, but it&#39;s related. The main difference is that I don&#39;t want a hook or get all constants I just want <b>my</b> constants"}], "answers": [{"tags": [], "owner": {"reputation": 1063, "user_id": 1906565, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/d57f8a6095df6b8a3aae2eeae014ccee?s=128&d=identicon&r=PG", "display_name": "Nicholas C", "link": "https://stackoverflow.com/users/1906565/nicholas-c"}, "is_accepted": true, "score": 3, "last_activity_date": 1486485313, "creation_date": 1486485313, "answer_id": 42095197, "question_id": 42094546, "link": "https://stackoverflow.com/questions/42094546/is-there-a-way-to-get-only-the-constants-defined-by-my-script/42095197#42095197", "title": "Is there a way to get only the constants defined by my script?", "body": "<p>This is tricky because not having a class your are putting your constants onto the main:Object when you run your script. So you need to be able to know what constants are defined before the script executes. Something like this would work:</p>\n\n<pre><code>#script_one.rb\nobj_cons = Object.constants\nrequire_relative 'script_two'\n\nONE = 'this is 1'\nputs self.class.constants - obj_cons\n</code></pre>\n\n<p>That generates the array:  [TWO, ONE] -- which I believe is what you want.</p>\n\n<pre><code>$ ruby script_one.rb\nTWO\nONE\n</code></pre>\n"}], "owner": {"reputation": 864, "user_id": 1423901, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mLA3B.jpg?s=128&g=1", "display_name": "Redithion", "link": "https://stackoverflow.com/users/1423901/redithion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 42095197, "answer_count": 1, "score": 0, "last_activity_date": 1486488940, "creation_date": 1486483533, "last_edit_date": 1486488940, "question_id": 42094546, "link": "https://stackoverflow.com/questions/42094546/is-there-a-way-to-get-only-the-constants-defined-by-my-script", "title": "Is there a way to get only the constants defined by my script?", "body": "<p>I want to get the constants <strong>defined in my scripts</strong>, suppose I have two files like this:</p>\n\n<p>script_two.rb</p>\n\n<pre><code>TWO = 'this is 2'\n</code></pre>\n\n<p>script_one.rb</p>\n\n<pre><code>require_relative 'script_two'\n\nONE = 'this is 1'\n# Check for constants\n</code></pre>\n\n<p>I want to know how to get the array of constants <code>[ONE, TWO]</code> (order doesn't matter).</p>\n\n<p>I know that <code>Object.constants</code> gives an array of current constants but that includes lots of other constants like <code>TRUE</code>, <code>NIL</code>, etc.</p>\n\n<p>I thought of keeping the result of that at the beginning and then call it again after requires so I can make the difference. But it's a bit ugly, isn't there another way?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1486482688, "post_id": 42094185, "comment_id": 71358692, "body": "1. Those are not &quot;class instance variables&quot;, just regular instance variables. Terminology is important. 2. because of <code>attr_accessor :name</code>"}, {"owner": {"reputation": 1991, "user_id": 574591, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9505b9216fdae1f6735ed821cfa7e7f8?s=128&d=identicon&r=PG", "display_name": "Alina", "link": "https://stackoverflow.com/users/574591/alina"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1486484265, "post_id": 42094185, "comment_id": 71359896, "body": "with <code>attr_reader :name</code> I have the same, so is there any way I can avoid this behavior but still be able to read the instance variable?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1486484661, "post_id": 42094185, "comment_id": 71360182, "body": "yeah, why do you put <code>attr_accessor</code> / <code>attr_reader</code> there, again?"}], "answers": [{"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 3, "last_activity_date": 1506532606, "last_edit_date": 1506532606, "creation_date": 1486485810, "answer_id": 42095380, "question_id": 42094185, "link": "https://stackoverflow.com/questions/42094185/ruby-access-instance-variables-from-another-method/42095380#42095380", "title": "Ruby access instance variables from another method", "body": "<p>As hinted in the comments:</p>\n\n<pre><code>attr_accessor :name\n</code></pre>\n\n<p>is shorthand for:</p>\n\n<pre><code>def name\n  @name\nend\n\ndef name=(name)\n  @name = name\nend\n</code></pre>\n\n<p>So expanding your code we have:</p>\n\n<pre><code>class Blabla    \n  def name\n    @name\n  end\n\n  def name=(name)\n    @name = name\n  end\n\n  def initialize(blabla)\n    @name = blabla\n  end\n\n  def populate()\n    puts \"name : #{name}\"\n    puts \"name : #{@name}\"\n  end\nend\n</code></pre>\n\n<p><code>#{name}</code> references the method <code>name</code> which returns <code>@name</code>.</p>\n\n<p><code>#{@name}</code> references <code>@name</code> directly.</p>\n\n<p>Also be sure to understand <code>attr_reader</code>, <code>attr_writer</code> methods.</p>\n"}], "owner": {"reputation": 1991, "user_id": 574591, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9505b9216fdae1f6735ed821cfa7e7f8?s=128&d=identicon&r=PG", "display_name": "Alina", "link": "https://stackoverflow.com/users/574591/alina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1878, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1506532606, "creation_date": 1486482626, "last_edit_date": 1486490280, "question_id": 42094185, "link": "https://stackoverflow.com/questions/42094185/ruby-access-instance-variables-from-another-method", "title": "Ruby access instance variables from another method", "body": "<p>I have a class and I try to access an instance variable and I noticed I can do it in both ways by addressing it with <code>@</code> and without it. Why si there no error when I call it without a <code>@</code> <code>puts \"name : #{name}\"</code>?</p>\n\n<pre><code>class Blabla\n    attr_accessor :name\n\n    def initialize(blabla)\n        @name = blabla\n    end\n\n    def populate()\n        puts \"name : #{name}\"\n        puts \"name : #{@name}\"\n    end\n\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "edited": false, "score": 0, "creation_date": 1486482745, "post_id": 42093912, "comment_id": 71358733, "body": "Looks like a linked list to me. Is that the meaning you&#39;re trying to convey?"}, {"owner": {"reputation": 6433, "user_id": 1064917, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/219d10e3fc486c3173291954195d537c?s=128&d=identicon&r=PG", "display_name": "Rick", "link": "https://stackoverflow.com/users/1064917/rick"}, "reply_to_user": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "edited": false, "score": 0, "creation_date": 1486483614, "post_id": 42093912, "comment_id": 71359416, "body": "@flyooi - No, although you could probably do that with my implementation if you wanted to."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 3, "creation_date": 1486502731, "post_id": 42093912, "comment_id": 71370746, "body": "<code>Pair = Struct.new(:head, :tail)</code> is a shorter way to write this class."}], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 3, "last_activity_date": 1486492455, "last_edit_date": 1495539925, "creation_date": 1486482079, "answer_id": 42093961, "question_id": 42093912, "link": "https://stackoverflow.com/questions/42093912/does-ruby-have-a-pair-data-type/42093961#42093961", "title": "Does Ruby have a `Pair` data type?", "body": "<p>No, Ruby doesn't have a standard <code>Pair</code> class.</p>\n\n<p>You could take a look at \"<a href=\"https://stackoverflow.com/questions/525957/using-tuples-in-ruby\">Using Tuples in Ruby?</a>\".</p>\n\n<p>The solutions involve either using a similar class as yours, the <a href=\"https://github.com/KamilLelonek/ruby-tuples\" rel=\"nofollow noreferrer\">Tuples</a> gem or <a href=\"https://ruby-doc.org/stdlib-2.4.0/libdoc/ostruct/rdoc/OpenStruct.html\" rel=\"nofollow noreferrer\">OpenStruct</a>.</p>\n\n<p>Python has <a href=\"https://docs.python.org/3/tutorial/datastructures.html#tuples-and-sequences\" rel=\"nofollow noreferrer\"><code>tuple</code></a>, but even Java doesn't have one: \"<a href=\"https://stackoverflow.com/questions/521171/a-java-collection-of-value-pairs-tuples\">A Java collection of value pairs? (tuples?)</a>\".</p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 2, "last_activity_date": 1486483508, "creation_date": 1486483508, "answer_id": 42094532, "question_id": 42093912, "link": "https://stackoverflow.com/questions/42093912/does-ruby-have-a-pair-data-type/42094532#42094532", "title": "Does Ruby have a `Pair` data type?", "body": "<p>No, there is no such class in the Ruby core library or standard libraries. It would be nice to have core library support (as well as literal syntax) for tuples, though.</p>\n\n<p>I once experimented with a class very similar to yours, in order to replace the array that gets <code>yielded</code> by <code>Hash#each</code> with a pair. I found that monkey-patching <code>Hash#each</code> to return a pair instead of an array actually breaks surprisingly little code, provided that the pair class responds appropriately to <code>to_a</code> and <code>to_ary</code>:</p>\n\n<pre><code>class Pair\n  attr_reader :first, :second\n\n  def to_ary; [first, second] end\n  alias_method :to_a, :to_ary\n\n  private\n\n  attr_writer :first, :second\n\n  def initialize(first, second)\n    self.first, self.second = first, second\n  end\n\n  class &lt;&lt; self; alias_method :[], :new end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1348, "user_id": 1363520, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/dd01041b737eca45a9c5d01d234d3b9c?s=128&d=identicon&r=PG", "display_name": "Som Poddar", "link": "https://stackoverflow.com/users/1363520/som-poddar"}, "is_accepted": true, "score": 3, "last_activity_date": 1486487049, "creation_date": 1486487049, "answer_id": 42095784, "question_id": 42093912, "link": "https://stackoverflow.com/questions/42093912/does-ruby-have-a-pair-data-type/42095784#42095784", "title": "Does Ruby have a `Pair` data type?", "body": "<p>You can also use OpenStruct datatype. Probably not exactly what you wanted, but here is an implementation ...</p>\n\n<pre><code>require 'ostruct'\n\nfoo = OpenStruct.new\nfoo.head = \"cabeza\"\nfoo.tail = \"cola\"\n</code></pre>\n\n<p>Finally,</p>\n\n<pre><code>puts foo.head\n =&gt; \"cabeza\"\n\nputs foo.tail\n =&gt; \"cola\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 186, "user_id": 2340684, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20381b12339f505894d6cff38d4696ca?s=128&d=identicon&r=PG", "display_name": "code_monkey_steve", "link": "https://stackoverflow.com/users/2340684/code-monkey-steve"}, "is_accepted": false, "score": 0, "last_activity_date": 1541179373, "creation_date": 1541179373, "answer_id": 53123225, "question_id": 42093912, "link": "https://stackoverflow.com/questions/42093912/does-ruby-have-a-pair-data-type/53123225#53123225", "title": "Does Ruby have a `Pair` data type?", "body": "<p>You don't need a special type, you can use a 2-element array with a little helper to give the pairs a consistent order.  E.g.:</p>\n\n<pre><code>def pair(a, b)\n  (a.hash &lt; b.hash) ? [a, b] : [b, a]\nend\n\ndistances = {\n  pair(\"Los Angeles\", \"New York\") =&gt; 2_789.6,\n  pair(\"Los Angeles\", \"Sydney\") =&gt; 7_497,\n}\n\ndistances[ pair(\"Los Angeles\", \"New York\") ]    # =&gt; 2789.6\ndistances[ pair(\"New York\", \"Los Angeles\") ]    # =&gt; 2789.6\ndistances[ pair(\"Sydney\", \"Los Angeles\") ]      # =&gt; 7497\n</code></pre>\n"}], "owner": {"reputation": 6433, "user_id": 1064917, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/219d10e3fc486c3173291954195d537c?s=128&d=identicon&r=PG", "display_name": "Rick", "link": "https://stackoverflow.com/users/1064917/rick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4308, "favorite_count": 0, "accepted_answer_id": 42095784, "answer_count": 4, "score": 7, "last_activity_date": 1541179373, "creation_date": 1486481960, "last_edit_date": 1486491293, "question_id": 42093912, "link": "https://stackoverflow.com/questions/42093912/does-ruby-have-a-pair-data-type", "title": "Does Ruby have a `Pair` data type?", "body": "<p>Sometimes I need to deal with key / value data.</p>\n\n<p>I dislike using Arrays, because they are not constrained in size (it's too easy to accidentally add more than 2 items, plus you end up needing to validate size later on). Furthermore, indexes of <code>0</code> and <code>1</code> become magic numbers and do a poor job of conveying meaning (\"When I say 0, I really mean <code>head</code>...\").</p>\n\n<p>Hashes are also not appropriate, as it is possible to accidentally add an extra entry.</p>\n\n<p>I wrote the following class to solve the problem:</p>\n\n<pre><code>class Pair\n  attr_accessor :head, :tail\n\n  def initialize(h, t)\n      @head, @tail = h, t\n  end\nend\n</code></pre>\n\n<p>It works great and solves the problem, but I am curious to know: does the Ruby standard library comes with such a class already?</p>\n"}, {"tags": ["objective-c", "ruby", "continuous-integration", "lint"], "comments": [{"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1486558666, "post_id": 42093631, "comment_id": 71396097, "body": "Any Github-integrated CI will do this. For example. check this: <a href=\"https://github.com/puppetlabs/puppet/blob/master/.travis.yml\" rel=\"nofollow noreferrer\">github.com/puppetlabs/puppet/blob/master/.travis.yml</a> and this: <a href=\"https://github.com/puppetlabs/puppet/blob/master/Rakefile\" rel=\"nofollow noreferrer\">github.com/puppetlabs/puppet/blob/master/Rakefile</a>"}, {"owner": {"reputation": 3488, "user_id": 283899, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/201e0648f6fc82d38967b2ce68b2f985?s=128&d=identicon&r=PG&f=1", "display_name": "Kamchatka", "link": "https://stackoverflow.com/users/283899/kamchatka"}, "reply_to_user": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1486719084, "post_id": 42093631, "comment_id": 71477254, "body": "Thanks. I&#39;m trying to remember the tool that among other things does &quot;verify that commit messages match CONTRIBUTING.md requirements&quot; but with a DSL, not having to write your own commands."}], "answers": [{"comments": [{"owner": {"reputation": 3488, "user_id": 283899, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/201e0648f6fc82d38967b2ce68b2f985?s=128&d=identicon&r=PG&f=1", "display_name": "Kamchatka", "link": "https://stackoverflow.com/users/283899/kamchatka"}, "edited": false, "score": 0, "creation_date": 1486484125, "post_id": 42093806, "comment_id": 71359792, "body": "thanks! it seems to be limited to code checking. the tool I had in mind was also applying to the PR, commit messages themselves if I remember correctly."}], "tags": [], "owner": {"reputation": 490, "user_id": 1309959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c2cacdce453a3e6f093fa1f3e103772?s=128&d=identicon&r=PG", "display_name": "Philipp Alexander Frank", "link": "https://stackoverflow.com/users/1309959/philipp-alexander-frank"}, "is_accepted": false, "score": 1, "last_activity_date": 1486481678, "creation_date": 1486481678, "answer_id": 42093806, "question_id": 42093631, "link": "https://stackoverflow.com/questions/42093631/pull-request-linter/42093806#42093806", "title": "Pull-request &quot;linter&quot;", "body": "<p>HoundCI by thoughtbot is a pretty popular tool. It is SaaS-based and free to use for open source projects: <a href=\"https://houndci.com/\" rel=\"nofollow noreferrer\">https://houndci.com/</a></p>\n\n<p>It supports <code>ruby</code> and <code>javascript</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 3488, "user_id": 283899, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/201e0648f6fc82d38967b2ce68b2f985?s=128&d=identicon&r=PG&f=1", "display_name": "Kamchatka", "link": "https://stackoverflow.com/users/283899/kamchatka"}, "is_accepted": true, "score": 1, "last_activity_date": 1488284489, "creation_date": 1488284489, "answer_id": 42508653, "question_id": 42093631, "link": "https://stackoverflow.com/questions/42093631/pull-request-linter/42508653#42508653", "title": "Pull-request &quot;linter&quot;", "body": "<p>I found the tool I was looking for: it's called <a href=\"https://github.com/danger/danger\" rel=\"nofollow noreferrer\">Danger</a>:</p>\n\n<blockquote>\n  <h1>What is Danger?</h1>\n  \n  <p>Danger runs after your CI, automating your team's conventions\n  surrounding code review.</p>\n  \n  <p>This provides another logical step in your process, through this\n  Danger can help lint your rote tasks in daily code review.</p>\n  \n  <p>You can use Danger to codify your teams norms, leaving humans to think\n  about harder problems.</p>\n  \n  <h1>For example?</h1>\n  \n  <p>You can:</p>\n  \n  <ul>\n  <li>Enforce CHANGELOGs Enforce links to Trello/JIRA in PR/MR bodies</li>\n  <li>Enforce using descriptive labels Look out for common anti-patterns</li>\n  <li>Highlight interesting build artifacts Give specific files extra focus</li>\n  <li>Danger provides the glue to let you build out the rules specific to    your team's culture, offering useful metadata and a comprehensive<br>\n  plugin system to share common issues.</li>\n  </ul>\n</blockquote>\n"}], "owner": {"reputation": 3488, "user_id": 283899, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/201e0648f6fc82d38967b2ce68b2f985?s=128&d=identicon&r=PG&f=1", "display_name": "Kamchatka", "link": "https://stackoverflow.com/users/283899/kamchatka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "accepted_answer_id": 42508653, "answer_count": 2, "score": 0, "last_activity_date": 1491579876, "creation_date": 1486481262, "last_edit_date": 1491579876, "question_id": 42093631, "link": "https://stackoverflow.com/questions/42093631/pull-request-linter", "title": "Pull-request &quot;linter&quot;", "body": "<p>I had seen a tool a while ago that would let me define rules for GitHub pull-requests, and could be enforced during CI.</p>\n\n<p>The rules could be for instance:</p>\n\n<ul>\n<li>The commit title should respect a format</li>\n<li>The number of files changed cannot be higher than 10</li>\n<li>There should be no stray \":focus\" in the specs</li>\n<li>etc.</li>\n</ul>\n\n<p>I can't remember the name of this tool.</p>\n"}, {"tags": ["ruby", "sketchup"], "comments": [{"owner": {"reputation": 63, "user_id": 7302667, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PuZ3ufjWpSw/AAAAAAAAAAI/AAAAAAAAAeU/-TeRFfzFjNI/photo.jpg?sz=128", "display_name": "Jan Huus", "link": "https://stackoverflow.com/users/7302667/jan-huus"}, "edited": false, "score": 0, "creation_date": 1486578860, "post_id": 42093581, "comment_id": 71410121, "body": "Must have been a Sketchup bug. I restarted Sketchup and the problem went away."}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 7302667, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PuZ3ufjWpSw/AAAAAAAAAAI/AAAAAAAAAeU/-TeRFfzFjNI/photo.jpg?sz=128", "display_name": "Jan Huus", "link": "https://stackoverflow.com/users/7302667/jan-huus"}, "edited": false, "score": 0, "creation_date": 1486578935, "post_id": 42114733, "comment_id": 71410162, "body": "Thanks for taking a look. It must have been a Sketchup bug. I restarted Sketchup and the problem went away. A circle was mysteriously appearing at the base of face2 when I extruded it, but not anymore."}, {"owner": {"reputation": 555, "user_id": 7529405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2304c31772fc744f9b1487a4a5f155e9?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Hamilton", "link": "https://stackoverflow.com/users/7529405/chris-hamilton"}, "reply_to_user": {"reputation": 63, "user_id": 7302667, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PuZ3ufjWpSw/AAAAAAAAAAI/AAAAAAAAAeU/-TeRFfzFjNI/photo.jpg?sz=128", "display_name": "Jan Huus", "link": "https://stackoverflow.com/users/7302667/jan-huus"}, "edited": false, "score": 0, "creation_date": 1486579066, "post_id": 42114733, "comment_id": 71410252, "body": "@JanHuus Glad it&#39;s sorted."}], "tags": [], "owner": {"reputation": 555, "user_id": 7529405, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2304c31772fc744f9b1487a4a5f155e9?s=128&d=identicon&r=PG&f=1", "display_name": "Chris Hamilton", "link": "https://stackoverflow.com/users/7529405/chris-hamilton"}, "is_accepted": false, "score": 0, "last_activity_date": 1486561276, "creation_date": 1486561276, "answer_id": 42114733, "question_id": 42093581, "link": "https://stackoverflow.com/questions/42093581/circle-appears-after-pushpull-on-a-trapezoid-face/42114733#42114733", "title": "Circle appears after pushpull on a trapezoid face", "body": "<p>Your code works for me (I also extruded face2). Could you edit your question and upload a picture of the problem you are describing?</p>\n\n<p><a href=\"https://i.stack.imgur.com/F64Sz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/F64Sz.png\" alt=\"enter image description here\"></a></p>\n"}, {"comments": [{"owner": {"reputation": 2681, "user_id": 486990, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b0220a4b0ec42f2ddc610d0c187b1ee1?s=128&d=identicon&r=PG", "display_name": "thomthom", "link": "https://stackoverflow.com/users/486990/thomthom"}, "edited": false, "score": 0, "creation_date": 1486581185, "post_id": 42121046, "comment_id": 71411393, "body": "Could have been a graphic card/driver issue - if it looked like an unexpected visual artefact."}, {"owner": {"reputation": 63, "user_id": 7302667, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PuZ3ufjWpSw/AAAAAAAAAAI/AAAAAAAAAeU/-TeRFfzFjNI/photo.jpg?sz=128", "display_name": "Jan Huus", "link": "https://stackoverflow.com/users/7302667/jan-huus"}, "reply_to_user": {"reputation": 2681, "user_id": 486990, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/b0220a4b0ec42f2ddc610d0c187b1ee1?s=128&d=identicon&r=PG", "display_name": "thomthom", "link": "https://stackoverflow.com/users/486990/thomthom"}, "edited": false, "score": 0, "creation_date": 1486650836, "post_id": 42121046, "comment_id": 71444941, "body": "I don&#39;t think so, since the circle was selectable as a face in Sketchup. If it happens again I&#39;ll post the image. It was actually slightly more complex than a simple circle. Something like an inner circle with a semi-circle around it on the same plane."}], "tags": [], "owner": {"reputation": 63, "user_id": 7302667, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PuZ3ufjWpSw/AAAAAAAAAAI/AAAAAAAAAeU/-TeRFfzFjNI/photo.jpg?sz=128", "display_name": "Jan Huus", "link": "https://stackoverflow.com/users/7302667/jan-huus"}, "is_accepted": false, "score": 0, "last_activity_date": 1486578985, "creation_date": 1486578985, "answer_id": 42121046, "question_id": 42093581, "link": "https://stackoverflow.com/questions/42093581/circle-appears-after-pushpull-on-a-trapezoid-face/42121046#42121046", "title": "Circle appears after pushpull on a trapezoid face", "body": "<p>This was a bug in Sketchup, as indicated in comments above.</p>\n"}], "owner": {"reputation": 63, "user_id": 7302667, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PuZ3ufjWpSw/AAAAAAAAAAI/AAAAAAAAAeU/-TeRFfzFjNI/photo.jpg?sz=128", "display_name": "Jan Huus", "link": "https://stackoverflow.com/users/7302667/jan-huus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1486578985, "creation_date": 1486481113, "question_id": 42093581, "link": "https://stackoverflow.com/questions/42093581/circle-appears-after-pushpull-on-a-trapezoid-face", "title": "Circle appears after pushpull on a trapezoid face", "body": "<p>I'm new to Sketchup scripting. When I extrude face2 below, a circle appears at the base of the face. It only appears after the pushpull and it doesn't appear if I extrude face1. Face1 and face2 are supposed to be the first two walls of a box. Could someone explain this?</p>\n\n<pre><code>ents = Sketchup.active_model.entities\nface1 = ents.add_face [1.m, 0, 0], [1.1.m, -0.1.m, 0], [-1.1.m, -0.1.m, 0], [-1.m, 0, 0]\nface2 = ents.add_face [-1.m, 0, 0], [-1.1.m, -0.1.m, 0], [-1.1.m, 1.1.m, 0], [-1.m, 1.m, 0]\nface1.pushpull(1.m, true)\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1141, "user_id": 3251463, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hxssB.png?s=128&g=1", "display_name": "Scott Schupbach", "link": "https://stackoverflow.com/users/3251463/scott-schupbach"}, "edited": false, "score": 0, "creation_date": 1486517644, "post_id": 42093357, "comment_id": 71376345, "body": "Just return <code>memo</code> in the last part of the ternary instead of using <code>next</code>. Also, with inject, the <code>memo += s</code> is identical to <code>memo + s</code>, so the equal sign is really redundant here."}], "answers": [{"comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 1, "creation_date": 1486480637, "post_id": 42093396, "comment_id": 71357144, "body": "Use <code>reduce(0, :+)</code> otherwise if the array has zero non-nil elements this returns <code>nil</code>, not <code>0</code>"}, {"owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "reply_to_user": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1486480694, "post_id": 42093396, "comment_id": 71357190, "body": "Thanks, I didn&#39;t think about that edge case. I was assuming the array had nil elements"}, {"owner": {"reputation": 534, "user_id": 1520965, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9d3599fdb032a18e0066027529da8085?s=128&d=identicon&r=PG&f=1", "display_name": "Manuk Karapetyan", "link": "https://stackoverflow.com/users/1520965/manuk-karapetyan"}, "edited": false, "score": 0, "creation_date": 1486481207, "post_id": 42093396, "comment_id": 71357588, "body": "<code>(array-[nil]).inject(:+)</code> just for fun ))"}], "tags": [], "owner": {"reputation": 22074, "user_id": 4703663, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/kN6k0.jpg?s=128&g=1", "display_name": "Richard Hamilton", "link": "https://stackoverflow.com/users/4703663/richard-hamilton"}, "is_accepted": false, "score": 3, "last_activity_date": 1486480677, "last_edit_date": 1486480677, "creation_date": 1486480574, "answer_id": 42093396, "question_id": 42093357, "link": "https://stackoverflow.com/questions/42093357/add-numbers-in-array-while-avoiding-nil-elements/42093396#42093396", "title": "Add numbers in array while avoiding nil elements", "body": "<p>Use <code>compact</code></p>\n\n<pre><code>array.compact.reduce(0,:+)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1486499227, "post_id": 42093543, "comment_id": 71368882, "body": "While it&#39;ll work it&#39;s slower, and will continue to get slower as the array size grows. You&#39;re better off using the built-in methods as demonstrated by <a href=\"http://stackoverflow.com/a/42093625/128421\">stackoverflow.com/a/42093625/128421</a>. Also, unless you intend to select your answer it&#39;s better to not add your &quot;final&quot; code as an answer."}], "tags": [], "owner": {"reputation": 151, "user_id": 5344550, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/740f72cb47fc3a952c2f4d975c6206ab?s=128&d=identicon&r=PG&f=1", "display_name": "olafsadventures", "link": "https://stackoverflow.com/users/5344550/olafsadventures"}, "is_accepted": false, "score": 0, "last_activity_date": 1486481008, "creation_date": 1486481008, "answer_id": 42093543, "question_id": 42093357, "link": "https://stackoverflow.com/questions/42093357/add-numbers-in-array-while-avoiding-nil-elements/42093543#42093543", "title": "Add numbers in array while avoiding nil elements", "body": "<p>I figured it out:</p>\n\n<pre><code>array.reject{|a| a.nil?}.inject(0){|memo,a| memo+=a}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 7, "last_activity_date": 1486481245, "creation_date": 1486481245, "answer_id": 42093625, "question_id": 42093357, "link": "https://stackoverflow.com/questions/42093357/add-numbers-in-array-while-avoiding-nil-elements/42093625#42093625", "title": "Add numbers in array while avoiding nil elements", "body": "<p>The reason why your version doesn't work is simple: the return value of the block becomes the <code>memo</code> value for the next iteration. In the case that <code>s</code> is not an <code>Integer</code>, you simply return nothing, i.e. <code>nil</code>, so during the next iteration, <code>memo</code> is <code>nil</code>.</p>\n\n<p>You can fix it by simply returning memo unchanged:</p>\n\n<pre><code>def add(array)\n  array.inject(0) { |memo, s| s.is_a? Integer ? memo += s : next memo }\n  #                                                              \u2191\u2191\u2191\u2191\nend\n</code></pre>\n\n<p>This is the smallest possible change that will fix your problem.</p>\n\n<p>A block normally returns the value of the last expression evaluated inside the block, so the <code>next</code> is actually not necessary:</p>\n\n<pre><code>def add(array)\n  array.inject(0) { |memo, s| s.is_a? Integer ? memo += s : memo }\nend\n</code></pre>\n\n<p>It doesn't make sense to assign to <code>memo</code>, it goes out of scope at the end of the block anyway, and you never use it again:</p>\n\n<pre><code>def add(array)\n  array.inject(0) { |memo, s| s.is_a? Integer ? memo + s : memo }\nend\n</code></pre>\n\n<p>According to the standard community style guides, argument lists to message sends should be enclosed in parenthesis, unless it's a \"procedure-like\" message send (e.g. <code>puts</code>, <code>require</code>) or a \"keyword-like\" one (e.g. <code>attr_accessor</code>):</p>\n\n<pre><code>def add(array)\n  array.inject(0) { |memo, s| s.is_a?(Integer) ? memo + s : memo }\nend\n</code></pre>\n\n<p>Personally, I don't like the conditional operator. That's a stylistic issue, though, but I much prefer this:</p>\n\n<pre><code>def add(array)\n  array.inject(0) { |memo, s| if s.is_a?(Integer) then memo + s else memo end }\nend\n</code></pre>\n\n<p>However, a much easier solution is to remove the <code>nil</code> elements before you iterate:</p>\n\n<pre><code>def add(array)\n  array.reject {|s| s.nil? }.inject(0) { |memo, s| memo + s }\nend\n</code></pre>\n\n<p>Which can be more elegantly written using <a href=\"http://ruby-doc.org/core/Symbol.html#method-i-to_proc\"><code>Symbol#to_proc</code></a></p>\n\n<pre><code>def add(array)\n  array.reject(&amp;:nil?).inject(0) { |memo, s| memo + s }\nend\n</code></pre>\n\n<p>But is actually just equivalent to the more readable:</p>\n\n<pre><code>def add(array)\n  array.compact.inject(0) { |memo, s| memo + s }\nend\n</code></pre>\n\n<p><a href=\"http://ruby-doc.org/core/Enumerable.html#method-i-inject\"><code>inject</code></a> allows you to pass the name of the combining method as a <a href=\"http://ruby-doc.org/core/Symbol.html\"><code>Symbol</code></a>:</p>\n\n<pre><code>def add(array)\n  array.compact.inject(0, :+)\nend\n</code></pre>\n\n<p>And that is just the same as <a href=\"http://ruby-doc.org/core/Array.html#method-i-sum\"><code>sum</code></a>:</p>\n\n<pre><code>def add(array)\n  array.compact.sum\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1486498923, "last_edit_date": 1495541827, "creation_date": 1486498537, "answer_id": 42099123, "question_id": 42093357, "link": "https://stackoverflow.com/questions/42093357/add-numbers-in-array-while-avoiding-nil-elements/42099123#42099123", "title": "Add numbers in array while avoiding nil elements", "body": "<p>You can do it many ways:</p>\n\n<pre><code>array = [3,4,5,6,nil,9,nil,9,3]\narray.sum(&amp;:to_i) # =&gt; 39\narray.reject(&amp;:nil?).sum # =&gt; 39\n</code></pre>\n\n<p>You can use <code>compact</code> instead of <code>reject(&amp;:nil?)</code>:</p>\n\n<pre><code>array.compact.sum # =&gt; 39\n</code></pre>\n\n<p>If you don't have <code>sum</code> available, which you should if you're using a reasonably recent Ruby, you can use <code>inject(:+)</code>:</p>\n\n<pre><code>array.compact.inject(:+) # =&gt; 39\n</code></pre>\n\n<hr>\n\n<pre><code>require 'fruity'\n\ncompare do\n  sum_to_i { array.sum(&amp;:to_i) }\n  reject_nil { array.reject(&amp;:nil?).sum }\n  compact_reduce { array.compact.reduce(0,:+) }\n  compact_sum { array.compact.sum }\n  compact_inject { array.compact.inject(:+) }\n  do_not_do_this { array.reject{|a| a.nil?}.inject(0){|memo,a| memo+=a} }\nend\n\n# &gt;&gt; Running each test 8192 times. Test will take about 1 second.\n# &gt;&gt; compact_sum is faster than compact_inject by 10.000000000000009% \u00b1 10.0%\n# &gt;&gt; compact_inject is similar to compact_reduce\n# &gt;&gt; compact_reduce is faster than sum_to_i by 19.999999999999996% \u00b1 10.0%\n# &gt;&gt; sum_to_i is faster than reject_nil by 1.9x \u00b1 0.1\n# &gt;&gt; reject_nil is faster than do_not_do_this by 2.0x \u00b1 0.1\n</code></pre>\n\n<p><a href=\"https://stackoverflow.com/a/42093625/128421\">J\u00f6rg's solution</a> is clearly the fastest.</p>\n"}], "owner": {"reputation": 151, "user_id": 5344550, "user_type": "registered", "accept_rate": 22, "profile_image": "https://www.gravatar.com/avatar/740f72cb47fc3a952c2f4d975c6206ab?s=128&d=identicon&r=PG&f=1", "display_name": "olafsadventures", "link": "https://stackoverflow.com/users/5344550/olafsadventures"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 404, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1486498923, "creation_date": 1486480450, "question_id": 42093357, "link": "https://stackoverflow.com/questions/42093357/add-numbers-in-array-while-avoiding-nil-elements", "title": "Add numbers in array while avoiding nil elements", "body": "<p>I want to add the numbers in the array and ignore the nil elements. My solution obviously doesn't work.</p>\n\n<pre><code>array = [3,4,5,6,nil,9,nil,9,3]\n\ndef add(array)\n  array.inject(0){|memo,s|s.is_a?Integer ? memo+=s : next}\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "http", "devise"], "comments": [{"owner": {"reputation": 187, "user_id": 323133, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2fa0826d36c6cee9245aaa7dcbdf10b0?s=128&d=identicon&r=PG", "display_name": "androidharry", "link": "https://stackoverflow.com/users/323133/androidharry"}, "edited": false, "score": 0, "creation_date": 1539949921, "post_id": 42091659, "comment_id": 92696150, "body": "did you find a solution to this?"}], "answers": [{"comments": [{"owner": {"reputation": 69, "user_id": 7506839, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b30b2d4fe58f2bc7269258dc7c136cb3?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kanafotskiy", "link": "https://stackoverflow.com/users/7506839/roman-kanafotskiy"}, "edited": false, "score": 0, "creation_date": 1486484739, "post_id": 42092067, "comment_id": 71360245, "body": "when I do <code>request.headers[&quot;access-token&quot;]</code> it returns <code>nil</code> but the output is correct with  <code>request.headers[&quot;Content-Type&quot;]</code>"}, {"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "reply_to_user": {"reputation": 69, "user_id": 7506839, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b30b2d4fe58f2bc7269258dc7c136cb3?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kanafotskiy", "link": "https://stackoverflow.com/users/7506839/roman-kanafotskiy"}, "edited": false, "score": 0, "creation_date": 1486488047, "post_id": 42092067, "comment_id": 71362619, "body": "That means you&#39;re not getting the right key.  The key itself could be nested as well.  Add a puts statement for request.headers in your controller and paste it to your question so we can see."}, {"owner": {"reputation": 69, "user_id": 7506839, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b30b2d4fe58f2bc7269258dc7c136cb3?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kanafotskiy", "link": "https://stackoverflow.com/users/7506839/roman-kanafotskiy"}, "edited": false, "score": 0, "creation_date": 1486543499, "post_id": 42092067, "comment_id": 71385626, "body": "The output looks looks like this. Can&#39;t access the token in any way <a href=\"https://pp.vk.me/c638121/v638121746/239b4/PF4NFzGBTio.jpg\" rel=\"nofollow noreferrer\">pp.vk.me/c638121/v638121746/239b4/PF4NFzGBTio.jpg</a>"}, {"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "reply_to_user": {"reputation": 69, "user_id": 7506839, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b30b2d4fe58f2bc7269258dc7c136cb3?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kanafotskiy", "link": "https://stackoverflow.com/users/7506839/roman-kanafotskiy"}, "edited": false, "score": 0, "creation_date": 1486568557, "post_id": 42092067, "comment_id": 71403322, "body": "Ok now the hard part is finding how deeply it is nested.  At the very least it is @header[:access_token] however if that doesn&#39;t work you have to find out how many hashes/arrays it is inside and basically work your way to it.  For instance it could be response[:something][:another_array][:another_hash][:header]&zwnj;&#8203;[:access_token]"}, {"owner": {"reputation": 69, "user_id": 7506839, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b30b2d4fe58f2bc7269258dc7c136cb3?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kanafotskiy", "link": "https://stackoverflow.com/users/7506839/roman-kanafotskiy"}, "edited": false, "score": 0, "creation_date": 1486569385, "post_id": 42092067, "comment_id": 71403939, "body": "there&#39;s just no way to find how deeply it&#39;s nested. Spent 1.5 hrs on that"}, {"owner": {"reputation": 187, "user_id": 323133, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2fa0826d36c6cee9245aaa7dcbdf10b0?s=128&d=identicon&r=PG", "display_name": "androidharry", "link": "https://stackoverflow.com/users/323133/androidharry"}, "edited": false, "score": 0, "creation_date": 1539949884, "post_id": 42092067, "comment_id": 92696134, "body": "the question is about response headers not request headers"}], "tags": [], "owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "is_accepted": false, "score": 0, "last_activity_date": 1486741704, "last_edit_date": 1486741704, "creation_date": 1486476835, "answer_id": 42092067, "question_id": 42091659, "link": "https://stackoverflow.com/questions/42091659/is-there-any-way-to-move-devises-headers-response-to-body/42092067#42092067", "title": "Is there any way to move Devise&#39;s headers response to body?", "body": "<p>Rails provides you with a request object so you can grab whatever you need out of the headers in your controller.</p>\n\n<pre><code>def some_action\n     @mime_type = request.headers[\"Content-Type\"] # =&gt; \"text/plain\"\n     @token = request.headers[\"key-for-your-token-here\"]\nend\n</code></pre>\n\n<p>You can then either pass it to your view or you can insert it into the response body via <code>request.body</code>as you would insert any key/value pair into a hash.</p>\n\n<p>Documentation for ActionDispatch::Request found here:\n<a href=\"http://api.rubyonrails.org/classes/ActionDispatch/Request.html#method-i-headers\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/classes/ActionDispatch/Request.html#method-i-headers</a></p>\n\n<p>UPDATE:</p>\n\n<p>Make a custom method and see how long it has to run to navigate the header hash.  If long you can use it to find the exact nesting of what you're looking for and change it.</p>\n\n<pre><code>def find_token(parent, request.headers)\n  request.headers.each {|key, value|\n    if value.is_a?(Hash) \n       find_token(key, value)\n    elsif key == 'THE TOKEN KEY HERE'\n       return value\n    else\n      next\n    end \n  }\nend\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 7506839, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b30b2d4fe58f2bc7269258dc7c136cb3?s=128&d=identicon&r=PG&f=1", "display_name": "Roman Kanafotskiy", "link": "https://stackoverflow.com/users/7506839/roman-kanafotskiy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 442, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486741704, "creation_date": 1486475723, "question_id": 42091659, "link": "https://stackoverflow.com/questions/42091659/is-there-any-way-to-move-devises-headers-response-to-body", "title": "Is there any way to move Devise&#39;s headers response to body?", "body": "<p>In my Rails-api app I'am using <code>Devise</code> gem which when authenticating returns all crucial info (Access-Token, UID, Client etc) in Headers, like this:</p>\n\n<pre><code>Access-Token \u2192DIbgreortZbCYKqzC8HdNg\nClient \u2192Y6J5oTIqS7Gc_-h9xynBQ\nUid \u2192email2@example.com\n</code></pre>\n\n<p>I want those to be in the response Body. Is there any way to achieve this?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1419, "user_id": 2460374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/448cb6bb58c400ddb4decc721680d231?s=128&d=identicon&r=PG", "display_name": "jkalden", "link": "https://stackoverflow.com/users/2460374/jkalden"}, "edited": false, "score": 3, "creation_date": 1486475714, "post_id": 42091425, "comment_id": 71353460, "body": "please show your efforts and where you got stuck! See <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a> and provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> as <a href=\"https://stackoverflow.com\">Stack Overflow</a> is not a (homework) coding service!"}, {"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 2, "creation_date": 1486476987, "post_id": 42091425, "comment_id": 71354364, "body": "You need to give us examples of your inputs and structure of your code"}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "edited": false, "score": 0, "creation_date": 1486478090, "post_id": 42091425, "comment_id": 71355186, "body": "Just switch to Haskell, and your function is <code>tail . scanl (-) 10</code> \\o/"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 6234179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42810806fbaee8e514b06bfc4ae450e2?s=128&d=identicon&r=PG&f=1", "display_name": "N. Semenov", "link": "https://stackoverflow.com/users/6234179/n-semenov"}, "edited": false, "score": 0, "creation_date": 1486479493, "post_id": 42092246, "comment_id": 71356261, "body": "Yes! That&#39;s what I was looking for, thank you!"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 1, "last_activity_date": 1486477358, "creation_date": 1486477358, "answer_id": 42092246, "question_id": 42091425, "link": "https://stackoverflow.com/questions/42091425/getting-an-array-for-chart/42092246#42092246", "title": "Getting an array for chart", "body": "<pre><code>[5, 3, 2].each_with_object([10]){|e, a| a.push(a.last - e)}.drop(1)\n# =&gt; [5, 2, 0]\n</code></pre>\n\n<p>Know why you need the complication <code>drop(1)</code>? It is because, without it, the answer makes more logical sense. Your requirement is what was complicated.</p>\n\n<pre><code>[5, 3, 2].each_with_object([10]){|e, a| a.push(a.last - e)}\n# =&gt; [10, 5, 2, 0]\n</code></pre>\n\n<p>The initial <code>10</code> represents the initial state.</p>\n"}], "owner": {"reputation": 1, "user_id": 6234179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42810806fbaee8e514b06bfc4ae450e2?s=128&d=identicon&r=PG&f=1", "display_name": "N. Semenov", "link": "https://stackoverflow.com/users/6234179/n-semenov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "closed_date": 1486480819, "accepted_answer_id": 42092246, "answer_count": 1, "score": -3, "last_activity_date": 1486477469, "creation_date": 1486475030, "last_edit_date": 1486477469, "question_id": 42091425, "link": "https://stackoverflow.com/questions/42091425/getting-an-array-for-chart", "closed_reason": "Needs details or clarity", "title": "Getting an array for chart", "body": "<p>I had 10 items in total. I lost all of them in 3 days: 5 items on the 1st day, 3 items on the 2nd day, and 2 items on the last day. I need to get an array <code>[5, 2, 0]</code> of remaining items at the end of each day. How can I get the array, given total <code>10</code> and the array of lost items <code>[5, 3, 2]</code>? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "vmware", "vsphere", "rbvmomi"], "answers": [{"tags": [], "owner": {"reputation": 9567, "user_id": 1900722, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nGsJr.jpg?s=128&g=1", "display_name": "anquegi", "link": "https://stackoverflow.com/users/1900722/anquegi"}, "is_accepted": false, "score": 0, "last_activity_date": 1486499628, "last_edit_date": 1486499628, "creation_date": 1486480475, "answer_id": 42093366, "question_id": 42090844, "link": "https://stackoverflow.com/questions/42090844/how-to-resize-vm-disk-with-rbvmomi-in-ruby/42093366#42093366", "title": "How to resize VM disk with RbVmomi in Ruby", "body": "<p>On their Github is a <a href=\"https://github.com/vmware/rbvmomi/blob/master/examples/create_vm-1.9.rb\" rel=\"nofollow noreferrer\">complete example</a>. Here are the relevant parts:</p>\n\n<pre><code>{\n          operation: :add,\n          fileOperation: :create,\n          device: VIM.VirtualDisk(\n            key: 0,\n            backing: VIM.VirtualDiskFlatVer2BackingInfo(\n              fileName: '[datastore1]',\n              diskMode: :persistent,\n              thinProvisioned: true,\n            ),\n            controllerKey: 1000,\n            unitNumber: 0,\n            capacityInKB: 4000000,\n          )\n        }\n</code></pre>\n\n<p>The complete code is: </p>\n\n<pre><code>#!/usr/bin/env ruby\nrequire 'trollop'\nrequire 'rbvmomi'\nrequire 'rbvmomi/trollop'\n\nVIM = RbVmomi::VIM\n\nopts = Trollop.options do\n  banner &lt;&lt;-EOS\nCreate a VM.\n\nUsage:\n    create_vm-1.9.rb [options]\n\nVIM connection options:\n    EOS\n\n    rbvmomi_connection_opts\n\n    text &lt;&lt;-EOS\n\nVM location options:\n    EOS\n\n    rbvmomi_datacenter_opt\n\n    text &lt;&lt;-EOS\n\nOther options:\n  EOS\nend\n\nTrollop.die(\"must specify host\") unless opts[:host]\nvm_name = ARGV[0] or abort \"must specify VM name\"\n\nvim = VIM.connect opts\ndc = vim.serviceInstance.find_datacenter(opts[:datacenter]) or abort \"datacenter not found\"\nvmFolder = dc.vmFolder\nhosts = dc.hostFolder.children\nrp = hosts.first.resourcePool\n\nvm_cfg = {\n  name: vm_name,\n  guestId: 'otherGuest',\n  files: { vmPathName: '[datastore1]' },\n  numCPUs: 1,\n  memoryMB: 128,\n  deviceChange: [\n    {\n      operation: :add,\n      device: VIM.VirtualLsiLogicController(\n        key: 1000,\n        busNumber: 0,\n        sharedBus: :noSharing,\n      )\n    }, {\n      operation: :add,\n      fileOperation: :create,\n      device: VIM.VirtualDisk(\n        key: 0,\n        backing: VIM.VirtualDiskFlatVer2BackingInfo(\n          fileName: '[datastore1]',\n          diskMode: :persistent,\n          thinProvisioned: true,\n        ),\n        controllerKey: 1000,\n        unitNumber: 0,\n        capacityInKB: 4000000,\n      )\n    }, {\n      operation: :add,\n      device: VIM.VirtualE1000(\n        key: 0,\n        deviceInfo: {\n          label: 'Network Adapter 1',\n          summary: 'VM Network',\n        },\n        backing: VIM.VirtualEthernetCardNetworkBackingInfo(\n          deviceName: 'VM Network',\n        ),\n        addressType: 'generated'\n      )\n    }\n  ],\n  extraConfig: [\n    {\n      key: 'bios.bootOrder',\n      value: 'ethernet0'\n    }\n  ]\n}\n\nvmFolder.CreateVM_Task(:config =&gt; vm_cfg, :pool =&gt; rp).wait_for_completion\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 108, "user_id": 1320997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/074830281ef6f9f6e39b6c6fed426459?s=128&d=identicon&r=PG", "display_name": "h3rmanj", "link": "https://stackoverflow.com/users/1320997/h3rmanj"}, "is_accepted": true, "score": 2, "last_activity_date": 1486481404, "creation_date": 1486481404, "answer_id": 42093692, "question_id": 42090844, "link": "https://stackoverflow.com/questions/42090844/how-to-resize-vm-disk-with-rbvmomi-in-ruby/42093692#42093692", "title": "How to resize VM disk with RbVmomi in Ruby", "body": "<p>Since you are trying to reconfigure an existing VirtualMachine, you could do something like this:</p>\n\n<pre><code>#Get the disk from the VM (assuming you only have one disk)\ndisk = vm.config.hardware.device.grep(RbVmomi::VIM::VirtualDisk).first\n\n#Set new capacity\ndisk.capacityInKB = new_capacity_in_kb\n\n#Add the disk to the devicechange, specifying operation edit\nvm_cfg = {\n    :deviceChange =&gt; [\n        {\n            :device =&gt; disk,\n            :operation =&gt; :edit\n        }\n    ]\n}\n\n#Start the ReconfigVM_Task with the disk edit on the VM\nvm.ReconfigVM_Task(:spec =&gt; vm_cfg).wait_for_completion\n</code></pre>\n"}], "owner": {"reputation": 92, "user_id": 7528838, "user_type": "registered", "profile_image": "https://graph.facebook.com/10154986482590477/picture?type=large", "display_name": "Thorstein L&#248;kensgard", "link": "https://stackoverflow.com/users/7528838/thorstein-l%c3%b8kensgard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 606, "favorite_count": 2, "accepted_answer_id": 42093692, "answer_count": 2, "score": 3, "last_activity_date": 1582189934, "creation_date": 1486473320, "last_edit_date": 1486499561, "question_id": 42090844, "link": "https://stackoverflow.com/questions/42090844/how-to-resize-vm-disk-with-rbvmomi-in-ruby", "title": "How to resize VM disk with RbVmomi in Ruby", "body": "<p>I'm working on a project where I'm cloning a VM with RbVmomi and after the clone is finished I want to ReConfig the VM. </p>\n\n<p>The cloning is working great, but I have some problems when I want to change the disk size of the VM. I can change the numbers of CPUs and the size of memory, but when I try to change the disk size I get the error:</p>\n\n<pre><code>RbVmomi::Fault (InvalidDeviceSpec: Invalid configuration for device '0'.):\n</code></pre>\n\n<p>Code:</p>\n\n<pre><code>if json.has_key?('CPU_COUNT') &amp;&amp; json.has_key?('RAM')\n  vm_cfg = {\n      :numCPUs =&gt; json['CPU_COUNT'],\n      :memoryMB =&gt; json['RAM'],\n      :deviceChange =&gt; [\n          :operation =&gt; :edit, #also tried with :add\n          :fileOperation =&gt; :create,\n          :device =&gt; RbVmomi::VIM.VirtualDisk(\n              :key =&gt; 0,\n              :backing =&gt; RbVmomi::VIM.VirtualDiskFlatVer2BackingInfo(\n              :fileName =&gt; '[datastore]',\n              :diskMode =&gt; :persistent,\n              :thinProvisioned =&gt; true\n          ),\n          :controllerKey =&gt; 1000,\n          :unitNumber =&gt; 0,\n          :capacityInKB =&gt; json['DISK_SIZE'] * 1024 * 1024\n      )\n  ]\n  }\n\n  dc.find_vm(vmID).ReconfigVM_Task(:spec =&gt; vm_cfg).wait_for_completion\n</code></pre>\n"}, {"tags": ["ruby", "random"], "answers": [{"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1486473757, "post_id": 42090750, "comment_id": 71351979, "body": "Note that the OP isn&#39;t testing equality between <code>Random</code> instances but between floats. A (small) step is missing in your explanation IMHO."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1486474109, "post_id": 42090750, "comment_id": 71352249, "body": "@EricDuminil: The equality was to point out that they have the same state, so of course they\u2019ll produce the same random numbers. (<code>a == b</code> for <code>a.is_a? Random</code> implies <code>a.rand == b.rand</code>.)"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1486474227, "post_id": 42090750, "comment_id": 71352341, "body": "It might be obvious to you, but not to the OP or to everyone coming to read your answer. I had to look at <code>random.c</code> to check how <code>Random</code> equality is defined. My 2c$."}, {"owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1486474286, "post_id": 42090750, "comment_id": 71352382, "body": "@EricDuminil: If it\u2019s false, it\u2019s true that it wouldn\u2019t tell you anything for sure, but since it\u2019s true one can surmise that equality is defined in the only useful way for <code>Random</code> instances. =)"}], "tags": [], "owner": {"reputation": 198293, "user_id": 707111, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/oXZkh.jpg?s=128&g=1", "display_name": "Ry-", "link": "https://stackoverflow.com/users/707111/ry"}, "is_accepted": true, "score": 11, "last_activity_date": 1486473037, "creation_date": 1486473037, "answer_id": 42090750, "question_id": 42090606, "link": "https://stackoverflow.com/questions/42090606/why-does-random-work-like-this-in-ruby/42090750#42090750", "title": "Why does random work like this in Ruby?", "body": "<p>You\u2019re probably going to be disappointed with this one. Let\u2019s take a look at the output of <code>rand</code>:</p>\n\n<pre><code>irb(main):001:0&gt; Random.rand\n0.5739704645347423\n</code></pre>\n\n<p>It\u2019s a number in the range [0, 1). <code>Random.new</code> accepts an <em>integer</em> seed.</p>\n\n<pre><code>irb(main):002:0&gt; Random.new(5.5) == Random.new(5)\ntrue\n</code></pre>\n\n<p>Mystery solved!</p>\n"}], "owner": {"reputation": 2043, "user_id": 2560641, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2bc2c905a072936e95d5f7e0c6d9dc80?s=128&d=identicon&r=PG", "display_name": "Juliano", "link": "https://stackoverflow.com/users/2560641/juliano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 42090750, "answer_count": 1, "score": 10, "last_activity_date": 1486476506, "creation_date": 1486472574, "last_edit_date": 1486476506, "question_id": 42090606, "link": "https://stackoverflow.com/questions/42090606/why-does-random-work-like-this-in-ruby", "title": "Why does random work like this in Ruby?", "body": "<p>I was trying to be clever about deterministically picking random stuff, and found this:</p>\n\n<pre><code>irb(main):011:0&gt; Random.new(Random.new(1).rand + 1).rand == Random.new(1).rand\n=&gt; true\nirb(main):012:0&gt; Random.new(Random.new(5).rand + 1).rand == Random.new(5).rand\n=&gt; false\nirb(main):013:0&gt; Random.new(Random.new(5).rand + 5).rand == Random.new(5).rand\n=&gt; true\n</code></pre>\n\n<p>For a second, I thought \"wow, maybe that's a property of random number generators\", but Python and C# fail to reproduce this.</p>\n"}, {"tags": ["ruby", "rubygems", "therubyracer", "libv8"], "comments": [{"owner": {"reputation": 7972, "user_id": 1297435, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/a9a1330f0e323fabed39f561f1b0d94c?s=128&d=identicon&r=PG", "display_name": "rails_id", "link": "https://stackoverflow.com/users/1297435/rails-id"}, "edited": false, "score": 2, "creation_date": 1486471487, "post_id": 42090211, "comment_id": 71350386, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/6356450/therubyracer-gem-on-windows\">therubyracer gem on windows</a>"}], "answers": [{"tags": [], "owner": {"reputation": 39, "user_id": 3999532, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001843904897/picture?type=large", "display_name": "Rankit Ranjan", "link": "https://stackoverflow.com/users/3999532/rankit-ranjan"}, "is_accepted": false, "score": 2, "last_activity_date": 1489662532, "last_edit_date": 1489662532, "creation_date": 1489658931, "answer_id": 42830927, "question_id": 42090211, "link": "https://stackoverflow.com/questions/42090211/error-installing-therubyracer/42830927#42830927", "title": "Error installing therubyracer", "body": "<p>The provided error means that you don't have g++ installed yet.</p>\n\n<p>I think you need to first run this command: </p>\n\n<pre><code> sudo apt-get install g++\n</code></pre>\n"}], "owner": {"reputation": 1275, "user_id": 4479510, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/1d7b848c7fca9ceb4840c999be0d756c?s=128&d=identicon&r=PG&f=1", "display_name": "RagnarLodbrok", "link": "https://stackoverflow.com/users/4479510/ragnarlodbrok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1067, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1515105176, "creation_date": 1486471388, "question_id": 42090211, "link": "https://stackoverflow.com/questions/42090211/error-installing-therubyracer", "title": "Error installing therubyracer", "body": "<p>I am having trouble installing therubyracer on Windows Server 2012 R2.</p>\n\n<p>first, i tried with <code>gem install therubyracer -v '0.12.3'</code></p>\n\n<p>which gave this output:</p>\n\n<pre><code>Temporarily enhancing PATH to include DevKit...\nBuilding native extensions.  This could take a while...\nERROR:  Error installing therubyracer:\n        ERROR: Failed to build gem native extension.\n\n    C:/Ruby200/bin/ruby.exe extconf.rb\nchecking for main() in -lpthread... no\nchecking for v8.h... no\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n        --with-opt-dir\n        --without-opt-dir\n        --with-opt-include\n        --without-opt-include=${opt-dir}/include\n        --with-opt-lib\n        --without-opt-lib=${opt-dir}/lib\n        --with-make-prog\n        --without-make-prog\n        --srcdir=.\n        --curdir\n        --ruby=C:/Ruby200/bin/ruby\n        --with-pthreadlib\n        --without-pthreadlib\n        --enable-debug\n        --disable-debug\n        --with-v8-dir\n        --without-v8-dir\n        --with-v8-include\n        --without-v8-include=${v8-dir}/include\n        --with-v8-lib\n        --without-v8-lib=${v8-dir}/\nC:/Ruby200/lib/ruby/gems/2.0.0/gems/libv8-3.16.14.17/ext/libv8/location.rb:50:in `configure': By using --with-system-v8, you have chosen to use the version  (Libv8::Location::System::NotFoundError)\nof V8 found on your system and *not* the one that is bundled with\nthe libv8 rubygem.\n\nHowever, your system version of v8 could not be located.\n\nPlease make sure your system version of v8 that is compatible\nwith 3.16.14.17 installed. You may need to use the\n--with-v8-dir option if it is installed in a non-standard location\n        from C:/Ruby200/lib/ruby/gems/2.0.0/gems/libv8-3.16.14.17/lib/libv8.rb:7:in `configure_makefile'\n        from extconf.rb:32:in `&lt;main&gt;'\n\n\nGem files will remain installed in C:/Ruby200/lib/ruby/gems/2.0.0/gems/therubyracer-0.12.3 for inspection.\nResults logged to C:/Ruby200/lib/ruby/gems/2.0.0/gems/therubyracer-0.12.3/ext/v8/gem_make.out\n</code></pre>\n\n<p>Also tried <code>gem install therubyracer -v '0.12.3' -- --with-v8-dir</code></p>\n\n<p>which resulted in this output:</p>\n\n<pre><code>Temporarily enhancing PATH to include DevKit...\nBuilding native extensions with: '--with-v8-dir'\nThis could take a while...\nERROR:  Error installing therubyracer:\n        ERROR: Failed to build gem native extension.\n\n    C:/Ruby200/bin/ruby.exe extconf.rb --with-v8-dir\nchecking for main() in -lpthread... no\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n        --with-opt-dir\n        --without-opt-dir\n        --with-opt-include\n        --without-opt-include=${opt-dir}/include\n        --with-opt-lib\n        --without-opt-lib=${opt-dir}/lib\n        --with-make-prog\n        --without-make-prog\n        --srcdir=.\n        --curdir\n        --ruby=C:/Ruby200/bin/ruby\n        --with-pthreadlib\n        --without-pthreadlib\n        --enable-debug\n        --disable-debug\n        --with-v8-dir\nC:/Ruby200/lib/ruby/2.0.0/mkmf.rb:1665:in `dir_config': undefined method `split' for true:TrueClass (NoMethodError)\n        from C:/Ruby200/lib/ruby/gems/2.0.0/gems/libv8-3.16.14.17/ext/libv8/location.rb:49:in `configure'\n        from C:/Ruby200/lib/ruby/gems/2.0.0/gems/libv8-3.16.14.17/lib/libv8.rb:7:in `configure_makefile'\n        from extconf.rb:32:in `&lt;main&gt;'\n\n\nGem files will remain installed in C:/Ruby200/lib/ruby/gems/2.0.0/gems/therubyracer-0.12.3 for inspection.\nResults logged to C:/Ruby200/lib/ruby/gems/2.0.0/gems/therubyracer-0.12.3/ext/v8/gem_make.out\n</code></pre>\n\n<p>If you need any further information please let me know.</p>\n"}, {"tags": ["ruby", "settimeout", "mechanize"], "answers": [{"tags": [], "owner": {"reputation": 1798, "user_id": 2636454, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/FyyQr.png?s=128&g=1", "display_name": "GDP2", "link": "https://stackoverflow.com/users/2636454/gdp2"}, "is_accepted": false, "score": 1, "last_activity_date": 1486482107, "last_edit_date": 1495535373, "creation_date": 1486482107, "answer_id": 42093971, "question_id": 42089691, "link": "https://stackoverflow.com/questions/42089691/how-to-settimeout-in-mechanize-ruby/42093971#42093971", "title": "How to setTimeout in mechanize ruby?", "body": "<p>I'm guessing that you're trying to use the <code>setTimeout</code> method from JavaScript, but unfortunately, Mechanize doesn't understand JavaScript and can't really work with it (see <a href=\"https://stackoverflow.com/q/802225/2636454\">this question</a> for more info). The methods that you're using are separate from the <code>setTimeout</code> functionality in JavaScript. You might have success with something like this using <a href=\"http://watir.github.io\" rel=\"nofollow noreferrer\">Watir</a> or something similar:</p>\n\n<pre><code># this assumes that `browser' is a `Watir::Browser' object\nbrowser.execute_script(\"window.setTimeout(my_code, 2000)\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "is_accepted": true, "score": 1, "last_activity_date": 1486526972, "creation_date": 1486526972, "answer_id": 42104529, "question_id": 42089691, "link": "https://stackoverflow.com/questions/42089691/how-to-settimeout-in-mechanize-ruby/42104529#42104529", "title": "How to setTimeout in mechanize ruby?", "body": "<p>Apparently there's also an idle_timeout but I'm not sure what the difference is or if it really works:</p>\n\n<pre><code>mech.methods.grep /timeout=/\n#=&gt; [:idle_timeout=, :open_timeout=, :read_timeout=]\n</code></pre>\n"}], "owner": {"reputation": 1826, "user_id": 5150708, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/252ff188dc7377773468944f8794dc3f?s=128&d=identicon&r=PG&f=1", "display_name": "Santosh Sharma", "link": "https://stackoverflow.com/users/5150708/santosh-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 462, "favorite_count": 0, "accepted_answer_id": 42104529, "answer_count": 2, "score": 1, "last_activity_date": 1486526972, "creation_date": 1486469781, "question_id": 42089691, "link": "https://stackoverflow.com/questions/42089691/how-to-settimeout-in-mechanize-ruby", "title": "How to setTimeout in mechanize ruby?", "body": "<p>i want to use setTimeout in mechanize ruby for full page load.</p>\n\n<p>i have try following. but didn't work</p>\n\n<pre><code>mech = Mechanize.new { |agent|\n  agent.open_timeout   = 5\n  agent.read_timeout   = 5\n}\n</code></pre>\n\n<p>any idea?</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 2, "last_activity_date": 1486477596, "last_edit_date": 1495539923, "creation_date": 1486476504, "answer_id": 42091954, "question_id": 42088964, "link": "https://stackoverflow.com/questions/42088964/opening-relative-paths-from-gem/42091954#42091954", "title": "Opening relative paths from gem", "body": "<h1>Short answer</h1>\n\n<p>If I understand it correctly, you don't need to change anything.</p>\n\n<p>Inside <code>app.rb</code> and your <code>gem</code>, relative paths will be understood relatively to <code>Dir.pwd</code>.</p>\n\n<p>If you run <code>ruby app.rb</code> from inside <code>/home/user/my_app</code> : </p>\n\n<ul>\n<li><code>Dir.pwd</code> will be <code>/home/user/my_app</code></li>\n<li>both <code>app.rb</code> and <code>my_gem</code> will look for <code>'data.txt'</code> inside <code>/home/user/my_app</code>.</li>\n</ul>\n\n<h1>Useful methods, just in case</h1>\n\n<h3>Dir.chdir</h3>\n\n<p>If for some reason <code>Dir.pwd</code> isn't the desired folder, you could <a href=\"https://ruby-doc.org/core-2.2.3/Dir.html#method-c-chdir\" rel=\"nofollow noreferrer\">change directory</a> :</p>\n\n<pre><code>Dir.chdir('/home/user/my_app') do\n  # relative paths will be based from /home/user/my_app\n  # call your gem from here\nend\n</code></pre>\n\n<h3>Get the directory of current file :</h3>\n\n<p><a href=\"https://ruby-doc.org/core-2.4.0/Kernel.html#method-i-__dir__\" rel=\"nofollow noreferrer\"><code>__dir__</code></a> will help you get the directory :</p>\n\n<blockquote>\n  <p>Returns the canonicalized absolute path of the directory of the file\n  from which this method is called.</p>\n</blockquote>\n\n<h3>Get the current file :</h3>\n\n<p><code>__FILE__</code> will return the current file. (Note : <a href=\"https://stackoverflow.com/questions/15190700/why-is-file-uppercase-and-dir-lowercase\">uppercase</a>.)</p>\n\n<h3>Concatenate file paths :</h3>\n\n<p>If you need to concatenate file paths, use <a href=\"https://ruby-doc.org/core-2.2.0/File.html#method-c-expand_path\" rel=\"nofollow noreferrer\"><code>File.expand_path</code></a> or <a href=\"https://ruby-doc.org/core-2.2.0/File.html#method-c-join\" rel=\"nofollow noreferrer\"><code>File.join</code></a>. Please don't concatenate strings.</p>\n\n<p>If you don't trust that the relative path will be correctly resolved, you could send an absolute path to your method :</p>\n\n<pre><code>my_gem.load_from_file(File.expand_path('data.txt'))\n</code></pre>\n"}], "owner": {"reputation": 1035, "user_id": 5846366, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/ALAtx.jpg?s=128&g=1", "display_name": "AlexNikolaev94", "link": "https://stackoverflow.com/users/5846366/alexnikolaev94"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 418, "favorite_count": 0, "accepted_answer_id": 42091954, "answer_count": 1, "score": 1, "last_activity_date": 1486477991, "creation_date": 1486467619, "last_edit_date": 1486475065, "question_id": 42088964, "link": "https://stackoverflow.com/questions/42088964/opening-relative-paths-from-gem", "title": "Opening relative paths from gem", "body": "<p>I'm writing a simple gem that can load from and save data to text files and zip archives. So, it has four methods: <code>load_from_file</code>, <code>load_from_zip</code>, <code>save_to_file</code> and <code>save_to_zip</code> respectfully. The problem is that I can't figure out how to specify relative paths for loading and saving for these methods. Here they go:</p>\n\n<pre><code>def load_from_file(filename)\n  File.open(filename) do |f|\n    f.each { |line| add(line) } # `add` is my another class method\n  end\nend\n\ndef load_from_zip(filename)\n  Zip::File.open(\"#{filename}.zip\") do |zipfile|\n    zipfile.each { |entry| read_zipped_file(zipfile, entry) } # my private method\n  end\nend\n\ndef save_to_file(filename)\n  File.write(\"#{filename}.txt\", data)\nend\n\ndef save_to_zip(filename)\n  Zip::File.open(\"#{filename}.zip\", Zip::File::CREATE) do |zipfile|\n    zipfile.get_output_stream('output.txt') { |f| f.print data }\n  end\nend\n\nprivate\n\ndef read_zipped_file(zipfile, entry)\n  zipfile.read(entry).lines.each { |line| add(line) }\nend\n</code></pre>\n\n<p>So what I want basically is to allow this gem to load and save files by relative paths whereever it is used in system, e.g. I have an app located in <code>/home/user/my_app</code> with two files - <code>app.rb</code> and <code>data.txt</code>, and I could be able to read the file from this directory without specifying absolute path.</p>\n\n<p>Example:</p>\n\n<pre><code># app.rb\nrequire 'my_gem'\n\nmy_gem = MyGem.new\nmy_gem.load_from_file('data.txt')\n</code></pre>\n\n<p>(Sorry for bad English)</p>\n\n<p><strong>UPD:</strong> This is not Rails gem and I'm not using Rails. All this is only pure Ruby.</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "spreadsheet"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1486465697, "post_id": 42088187, "comment_id": 71346584, "body": "&quot;Mr Data Converter&quot; has a &quot;Ruby&quot; output option."}, {"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1486465787, "post_id": 42088187, "comment_id": 71346670, "body": "Hit me please \ud83d\ude31\ud83d\ude2d"}, {"owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1486465935, "post_id": 42088187, "comment_id": 71346768, "body": "Oh actually it seems I still have export problems (even with Ruby) with my strings... it would seem one of the cells is exported without surrounding quotes which causes a parsing problem <code>&quot;h1&quot;=&gt;String not surrounded by quotes,&quot;h2&#233;=&gt; ...</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1486466563, "post_id": 42088187, "comment_id": 71347188, "body": "Can you be more specific? Maybe an actual Google spreadsheet would help."}], "owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 411, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1486465467, "creation_date": 1486465467, "question_id": 42088187, "link": "https://stackoverflow.com/questions/42088187/copy-pasting-spreadsheet-excel-data-into-ruby-console", "title": "Copy pasting spreadsheet/excel data into Ruby console", "body": "<p>I often have to import excel data into my production ruby console, and I'm having a hard time figuring the best, fast way to do that.</p>\n\n<p>Currently, I'm copying my Google spreadhseet range into <a href=\"https://shancarter.github.io/mr-data-converter/\" rel=\"nofollow noreferrer\">Mr Data Converter</a>, exporting as JSON, and I have to rewrite the JSON so it looks like a Ruby Hash, so I can copy-paste the final output into my ruby console and assign it to a variable.</p>\n\n<p>Anyone has a faster way ? I also tried to just use a ruby string <code>&lt;&lt;-RAW</code>, copy paste my JSON data and try to <code>JSON.parse(raw)</code> but it seems to fail at times...</p>\n\n<p>Sample of data I copy paste into Mr Data Converter (h for header, v for value)</p>\n\n<pre><code>h1  h2  h3  h4\nv11 V12 V13 v14\nv21 V22 v23 v24\n</code></pre>\n\n<p>Sample Data I get from Conversion</p>\n\n<pre><code>[{\"h1\":\"v11\",\"h2\":\"v12\",\"h3\":\"v13\",\"h4\":\"v14\"},\n {\"h1\":\"v21\",\"h2\":\"v22\",\"h3\":\"v23\",\"h4\":\"v24\"},\n]\n</code></pre>\n\n<p>I may have special characters like <code>\"</code> or <code>:</code>, which is the cause for many failures.</p>\n\n<p>Do you have a fast way to copy-paste code from excel into a ruby console ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1486465541, "post_id": 42088092, "comment_id": 71346463, "body": "Please could you show what code you have written so far? See: <a href=\"http://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a>"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1486465549, "post_id": 42088092, "comment_id": 71346468, "body": "add some code buddy"}], "answers": [{"comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 2, "creation_date": 1486466021, "post_id": 42088231, "comment_id": 71346826, "body": "<code>where(events: { start_date: Today.beginning_of_day..Today.end_of_day })</code>"}, {"owner": {"reputation": 500, "user_id": 5973933, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-Oibv_qAg5fQ/AAAAAAAAAAI/AAAAAAAAAGs/PWra2-sj8Pk/photo.jpg?sz=128", "display_name": "Raunak Joneja", "link": "https://stackoverflow.com/users/5973933/raunak-joneja"}, "edited": false, "score": 0, "creation_date": 1486466960, "post_id": 42088231, "comment_id": 71347461, "body": "this doesnt serve my purpose, as it then does not display the rest of the venues, I need all the venues displayed and events for each venue that are happening today."}], "tags": [], "owner": {"reputation": 14364, "user_id": 1023609, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14cd00b085c207261db49ac46be4773c?s=128&d=identicon&r=PG", "display_name": "MurifoX", "link": "https://stackoverflow.com/users/1023609/murifox"}, "is_accepted": false, "score": 0, "last_activity_date": 1486465582, "creation_date": 1486465582, "answer_id": 42088231, "question_id": 42088092, "link": "https://stackoverflow.com/questions/42088092/ruby-on-rails-query-a-one-to-many-relationship/42088231#42088231", "title": "Ruby on Rails Query a one to many relationship", "body": "<p>Assuming that <code>Venue has_many :events</code> and <code>Event belongs_to :venue</code>, you can do something like this:  </p>\n\n<pre><code>Venue.includes(:events).where(\"events.start_date BETWEEN ? AND ?\", Today.beginning_of_day, Today.end_of_day)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1285, "user_id": 6700665, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/h79ZZ.jpg?s=128&g=1", "display_name": "pan.goth", "link": "https://stackoverflow.com/users/6700665/pan-goth"}, "is_accepted": true, "score": 1, "last_activity_date": 1486484162, "creation_date": 1486484162, "answer_id": 42094774, "question_id": 42088092, "link": "https://stackoverflow.com/questions/42088092/ruby-on-rails-query-a-one-to-many-relationship/42094774#42094774", "title": "Ruby on Rails Query a one to many relationship", "body": "<p>You can add this to your Venue model:</p>\n\n<pre><code>has_many :todays_events, -&gt; { where(start_date: DateTime.now.beginning_of_day..DateTime.now.end_of_day) }, class_name: 'Event'\n</code></pre>\n\n<p>and then do this:</p>\n\n<pre><code>venues = Venue.includes(:todays_events)\n\nJSON.parse(venues.to_json(include: [:category, :offer, :todays_events])) \n</code></pre>\n\n<p>The minus is that the key for events in JSON will be <em>todays_events</em> instead of <em>events</em>.</p>\n"}], "owner": {"reputation": 500, "user_id": 5973933, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-Oibv_qAg5fQ/AAAAAAAAAAI/AAAAAAAAAGs/PWra2-sj8Pk/photo.jpg?sz=128", "display_name": "Raunak Joneja", "link": "https://stackoverflow.com/users/5973933/raunak-joneja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 366, "favorite_count": 0, "accepted_answer_id": 42094774, "answer_count": 2, "score": -3, "last_activity_date": 1486484162, "creation_date": 1486465182, "last_edit_date": 1486466802, "question_id": 42088092, "link": "https://stackoverflow.com/questions/42088092/ruby-on-rails-query-a-one-to-many-relationship", "title": "Ruby on Rails Query a one to many relationship", "body": "<p>I have two table venues and <code>events</code>, a venue can have multiple events, but an event can have only one venue.</p>\n\n<p>The API <code>get /venues</code> returns all the venues, with the all events for each venue.\nOn passing of a param 'happening_today' get <code>/venues?happening_today=true</code>,\nI need to display all my venues and only those events for each venue that have the <code>start_date</code> same as today! If there are no events, a empty array should be displayed. </p>\n\n<pre><code>def index\n\n   venues = Venue.all venues = venues.eager_load(:event).where(\"events.start_time &gt;= ?\", Date.today)\n\n   venues = JSON.parse(venues.to_json(:include =&gt; [:category, :offer, :event])) \n\n   render json: {venues: venues}, status: 200\n\n end \n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1486463733, "post_id": 42087350, "comment_id": 71345262, "body": "Is it for &quot;a certain method&quot; (as the title says), or any method that comes as final (as the body says)? What do you mean by &quot;a pair of lines&quot;?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1486465320, "post_id": 42087350, "comment_id": 71346298, "body": "To me it sounds like <i>&quot;Using hammer to drill screws if a certain wall is green&quot;</i>. Without any further information, I&#39;d say that you are approaching the problem in the wrong way. Can you explain what you are trying to achieve?"}, {"owner": {"reputation": 873, "user_id": 2320239, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/daef5b7116143c14162b242bf0b1a35a?s=128&d=identicon&r=PG", "display_name": "user2320239", "link": "https://stackoverflow.com/users/2320239/user2320239"}, "edited": false, "score": 0, "creation_date": 1486465643, "post_id": 42087350, "comment_id": 71346536, "body": "Hi I&#39;ve edited my example to more closely show what I want to do, I didn&#39;t put that first since I just wanted general guidance so I could work the rest out on my own."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1486500884, "post_id": 42087350, "comment_id": 71369799, "body": "Don&#39;t ask for general guidance on Stack Overflow. SO is for detailed answers, not broad ones."}], "answers": [{"comments": [{"owner": {"reputation": 873, "user_id": 2320239, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/daef5b7116143c14162b242bf0b1a35a?s=128&d=identicon&r=PG", "display_name": "user2320239", "link": "https://stackoverflow.com/users/2320239/user2320239"}, "edited": false, "score": 0, "creation_date": 1486564908, "post_id": 42088529, "comment_id": 71400679, "body": "This is part way there, the problem is that I&#39;d like to be able to inspect the return value, which is why I wanted it to be assigned to a variable"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1486567414, "last_edit_date": 1486567414, "creation_date": 1486466417, "answer_id": 42088529, "question_id": 42087350, "link": "https://stackoverflow.com/questions/42087350/how-to-use-meta-programming-to-add-lines-if-a-certain-method-is-called/42088529#42088529", "title": "How to use meta-programming to add lines if a certain method is called", "body": "<p>The easiest way I can think of is <a href=\"http://ruby-doc.org/core-2.4.0/Object.html#method-i-tap\" rel=\"nofollow noreferrer\"><code>tap</code></a>:</p>\n\n<pre><code>def my_method\n  do_some_stuff.tap { |return_value| byebug }\nend\n</code></pre>\n\n<p><code>tap</code> executes the block (starts byebug) and returns the receiver after the block returns.</p>\n\n<p>Within byebug, you can then examine the local variables via <code>var local</code> which shows the current value of <code>return_value</code>.</p>\n"}], "owner": {"reputation": 873, "user_id": 2320239, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/daef5b7116143c14162b242bf0b1a35a?s=128&d=identicon&r=PG", "display_name": "user2320239", "link": "https://stackoverflow.com/users/2320239/user2320239"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1486567414, "creation_date": 1486463076, "last_edit_date": 1486501858, "question_id": 42087350, "link": "https://stackoverflow.com/questions/42087350/how-to-use-meta-programming-to-add-lines-if-a-certain-method-is-called", "title": "How to use meta-programming to add lines if a certain method is called", "body": "<p>Is there a way to do the following? </p>\n\n<p>Whenever a method is called as the final line within the body of another method, I want the method call to be surrounded by a pair of lines. </p>\n\n<p>The following method:</p>\n\n<pre><code>def my_method\n    do_some_stuff\n    byebug\nend\n</code></pre>\n\n<p>should be transformed into:</p>\n\n<pre><code>def my_method\n    x = do_some_stuff\n    byebug\n    x\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1486460960, "post_id": 42086324, "comment_id": 71343339, "body": "Would it not be enough just to rename <code>applications.scss</code> to <code>application.css</code>"}, {"owner": {"reputation": 1, "user_id": 7527740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5cb95d54243ba135ee271000745886c?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Boustos", "link": "https://stackoverflow.com/users/7527740/diego-boustos"}, "edited": false, "score": 0, "creation_date": 1486465713, "post_id": 42086324, "comment_id": 71346598, "body": "I don&#39;t understand the problem. I download a &quot;working-app&quot; ruby from github. With this source code, developpers can compile and run rails server."}], "tags": [], "owner": {"reputation": 2925, "user_id": 7362128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c182f15f6440b325d21ef726ccbda66?s=128&d=identicon&r=PG", "display_name": "Slava.K", "link": "https://stackoverflow.com/users/7362128/slava-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1486460247, "creation_date": 1486460247, "answer_id": 42086324, "question_id": 42085979, "link": "https://stackoverflow.com/questions/42085979/ruby-on-rails-couldnt-find-file-selectize/42086324#42086324", "title": "Ruby on rails : &quot;couldn&#39;t find file &#39;selectize&#39;&quot;", "body": "<p><code>selectize</code> currently does not have support for <code>scss</code> - <a href=\"https://github.com/manuelvanrijn/selectize-rails/issues/16\" rel=\"nofollow noreferrer\">see corresponding issue</a>.</p>\n\n<p>To include <code>css</code> file into <code>scss</code> you will need <a href=\"https://github.com/sass/sass/issues/556\" rel=\"nofollow noreferrer\">a workaround</a></p>\n"}], "owner": {"reputation": 1, "user_id": 7527740, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e5cb95d54243ba135ee271000745886c?s=128&d=identicon&r=PG&f=1", "display_name": "Diego Boustos", "link": "https://stackoverflow.com/users/7527740/diego-boustos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 191, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486460247, "creation_date": 1486459302, "question_id": 42085979, "link": "https://stackoverflow.com/questions/42085979/ruby-on-rails-couldnt-find-file-selectize", "title": "Ruby on rails : &quot;couldn&#39;t find file &#39;selectize&#39;&quot;", "body": "<p>When I run my rails server in development mode, I get this error message :</p>\n\n<pre><code>Sprockets::FileNotFound at /\n\ncouldn't find file 'selectize' (in /XXX/app/assets/stylesheets/application.scss:3)\n</code></pre>\n\n<p>I don't understand the problem because I have installed the gem : <strong>selectize-rails (0.12.4)</strong></p>\n\n<p>In my <strong>application.scss</strong> I have </p>\n\n<pre><code>&gt; /*\n&gt; *= require jquery.ui.autocomplete\n&gt; *= require selectize\n&gt; *= require selectize.default\n&gt; *= require_self\n&gt; */\n</code></pre>\n\n<p>Do yo have an idea ? Thanks a lot</p>\n\n<pre><code>#rails -v\nRails 4.1.1\n#gem list\n*** LOCAL GEMS ***\n\nactionmailer (4.1.1)\nactionpack (4.1.1)\nactionview (4.1.1)\nactivemodel (4.1.1)\nactiverecord (4.1.1)\nactivesupport (4.1.1)\naddressable (2.3.6)\nairbrake (4.1.0)\nancestry (2.1.0)\narel (5.0.1.20140414130214)\nautoprefixer-rails (3.1.1.20141001)\nawesome_print (1.2.0)\nbackup (3.4.0)\nbcrypt (3.1.7)\nbetter_errors (2.0.0)\nbigdecimal (1.2.4)\nbinding_of_caller (0.7.2)\nbourbon (3.2.3)\nbrakeman (2.6.2)\nbuftok (0.2.0)\nbuilder (3.2.2)\nbundler (1.14.3)\ncapistrano (2.15.5)\ncelluloid (0.16.0)\nchoice (0.1.6)\nchronic (0.10.2)\nckeditor (4.1.0)\nclamp (0.6.3)\ncoderay (1.1.0)\ncoffee-rails (4.0.1)\ncoffee-script (2.3.0)\ncoffee-script-source (1.8.0)\nconnection_pool (2.0.0)\ndebug_inspector (0.0.2)\ndevise (3.4.0)\ndevise-i18n (0.11.2)\ndocile (1.1.5)\ndotenv (0.11.1)\ndotenv-deployment (0.0.2)\ndragonfly (1.0.7)\nelasticsearch (1.0.5)\nelasticsearch-api (1.0.5)\nelasticsearch-model (0.1.6)\nelasticsearch-rails (0.1.6)\nelasticsearch-transport (1.0.5)\nequalizer (0.0.9)\nerubis (2.7.0)\nexcon (0.40.0)\nexecjs (2.2.1)\nfabrication (2.11.3)\nfaker (1.4.3)\nfaraday (0.9.0)\nfastercsv (1.5.5)\nffi (1.9.5)\nfog (1.23.0)\nfog-brightbox (0.5.1)\nfog-core (1.24.0)\nfog-json (1.0.0)\nfog-softlayer (0.3.20)\nforeman (0.75.0)\nformatador (0.2.5)\nfoundation-rails (5.4.5.0)\nguard (2.6.1)\nguard-minitest (2.3.2)\nhaml (4.0.5)\nhashie (3.3.1)\nhighline (1.6.21)\nhike (1.2.3)\nhipchat (1.3.0)\nhitimes (1.2.2)\nhttp (0.6.2)\nhttp_parser.rb (0.6.0)\nhttparty (0.13.1)\ni18n (0.6.11)\ni18n-extra_translations (0.0.6)\ninflecto (0.0.2)\nio-console (0.4.2)\nipaddress (0.8.0)\njbuilder (2.2.1)\njquery-fileupload-rails (0.4.1)\njquery-rails (3.1.2)\njquery-ui-rails (4.2.1)\njson (1.8.1)\njwt (1.0.0)\nkaminari (0.16.1)\nkgio (2.9.2)\nlaunchy (2.4.2)\nletter_opener (1.2.0)\nlibv8 (3.16.14.7 x86_64-darwin-14)\nliquid (2.6.1)\nlisten (2.7.11)\nlumberjack (1.0.9)\nmail (2.5.4)\nmemoizable (0.4.2)\nmethod_source (0.8.2)\nmime-types (1.25.1)\nmini_portile (0.6.0)\nminitest (5.4.2, 4.7.5)\nminitest-spec-rails (5.1.0)\nmulti_json (1.10.1)\nmulti_xml (0.5.5)\nmultipart-post (2.0.0)\nnaught (1.0.0)\nnet-scp (1.2.1)\nnet-sftp (2.1.2)\nnet-ssh (2.9.1)\nnet-ssh-gateway (1.2.0)\nnokogiri (1.6.3.1)\noauth (0.4.7)\noauth2 (1.0.0)\nomniauth (1.2.2)\nomniauth-facebook (2.0.0)\nomniauth-oauth (1.0.1)\nomniauth-oauth2 (1.2.0)\nomniauth-twitter (1.0.1)\nopen4 (1.3.4)\norm_adapter (0.5.0)\npg (0.17.1)\npolyglot (0.3.5)\npry (0.10.1)\npry-rails (0.3.2)\npsych (2.0.5)\npuma (2.9.1)\nrack (1.5.2)\nrack-cache (1.2)\nrack-protection (1.5.3)\nrack-test (0.6.2)\nrails (4.1.1)\nrails-erd (1.1.0)\nrailties (4.1.1)\nraindrops (0.13.0)\nrake (10.3.2, 10.1.0)\nrb-fsevent (0.9.4)\nrb-inotify (0.9.5)\nrdoc (4.1.2, 4.1.0)\nredis (3.1.0)\nredis-namespace (1.5.1)\nref (1.0.5)\nresponders (1.1.1)\nrubber (2.13.1)\nruby-graphviz (1.0.9)\nruby-prof (0.15.1)\nruby2ruby (2.1.3)\nruby_parser (3.5.0)\nsass (3.2.19)\nsass-rails (4.0.3)\nsdoc (0.4.1)\nselectize-rails (0.12.4)\nsexp_processor (4.4.4)\nsidekiq (3.2.4)\nsimple_oauth (0.2.0)\nsimplecov (0.9.1)\nsimplecov-html (0.8.0)\nsinatra (1.4.5)\nslim (2.0.3)\nslim-rails (2.1.5)\nslop (3.6.0)\nspring (1.1.3)\nsprockets (2.11.0)\nsprockets-rails (2.1.4)\nsqlite3 (1.3.9)\ntemple (0.6.8)\nterminal-table (1.4.5)\ntest-unit (2.1.2.0)\ntherubyracer (0.12.1)\nthor (0.19.1)\nthread_safe (0.3.4)\ntilt (1.4.1)\ntimers (4.0.1)\ntreetop (1.4.15)\nturbolinks (2.4.0)\ntwitter (5.11.0)\ntzinfo (1.2.2)\nuglifier (2.5.3)\nunicorn (4.8.3)\nwarden (1.2.3)\nwhenever (0.9.3)\nyard (0.8.7.4)\n</code></pre>\n"}, {"tags": ["sql", "ruby-on-rails", "json", "ruby", "search"], "comments": [{"owner": {"reputation": 7972, "user_id": 1297435, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/a9a1330f0e323fabed39f561f1b0d94c?s=128&d=identicon&r=PG", "display_name": "rails_id", "link": "https://stackoverflow.com/users/1297435/rails-id"}, "edited": false, "score": 0, "creation_date": 1486458088, "post_id": 42085101, "comment_id": 71341522, "body": "may be, the problem in routes.rb <a href=\"http://stackoverflow.com/a/5369702/1297435\">stackoverflow.com/a/5369702/1297435</a>"}, {"owner": {"reputation": 613, "user_id": 3463845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4236769cdd8ee86b4f715a09f6a615d5?s=128&d=identicon&r=PG", "display_name": "hattila91", "link": "https://stackoverflow.com/users/3463845/hattila91"}, "reply_to_user": {"reputation": 7972, "user_id": 1297435, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/a9a1330f0e323fabed39f561f1b0d94c?s=128&d=identicon&r=PG", "display_name": "rails_id", "link": "https://stackoverflow.com/users/1297435/rails-id"}, "edited": false, "score": 0, "creation_date": 1486462301, "post_id": 42085101, "comment_id": 71344257, "body": "Agreed with @rails_id. Could you include the path definitions from your <code>config&#47;routes.rb</code> file related to the <code>typeahead</code> and <code>search</code> actions? You&#39;re probably missing some constraints to allow dots in the <code>query</code> parameter."}, {"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "reply_to_user": {"reputation": 7972, "user_id": 1297435, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/a9a1330f0e323fabed39f561f1b0d94c?s=128&d=identicon&r=PG", "display_name": "rails_id", "link": "https://stackoverflow.com/users/1297435/rails-id"}, "edited": false, "score": 0, "creation_date": 1486503368, "post_id": 42085101, "comment_id": 71371073, "body": "@rails_id Yep, that was the problem. Thanks."}], "owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1486456470, "creation_date": 1486456470, "question_id": 42085101, "link": "https://stackoverflow.com/questions/42085101/searching-for-character-seems-to-behave-differently-when-results-are-rendere", "title": "Searching for &quot;.&quot; character seems to behave differently when results are rendered in json", "body": "<p>I'm using the <a href=\"https://github.com/yourabi/twitter-typeahead-rails\" rel=\"nofollow noreferrer\">twitter-typeahead-rails gem</a> to implement instant search on my app (search results populate a dropdown menu as you type). The problem I'm getting is that searching for the \".\" character seems to give bizarre results, but apparently only when the results are translated into json.</p>\n\n<p>This is my typeahead method*, utilizing instant search and therefore json:</p>\n\n<pre><code>def typeahead\n  q = params[:query]\n  render json: Singer.where('name ilike ?', \"%#{q}%\").first(5)\nend\n</code></pre>\n\n<p>And this is a different method, which redirects to a page with search results, and doesn't use json:</p>\n\n<pre><code>def search\n  q = params[:query]\n  results = Singer.where('name ilike ?', \"%#{q}%\").first(5)\nend\n</code></pre>\n\n<p>On the second method (called \"search\"), searching q = \"t.i.\" behaves as expected, and gives me a results page with a Singer with <code>name: \"T.I.\"</code>.</p>\n\n<p>On the first method (\"typeahead\"), however, searching for q = \"t.i.\" returns no results. When I search for q = \"t.i\" I get a Singer with <code>name: \"Taylor Swift\"</code> as a result, and I can't fathom why. q = \"t.\" also returns no results. Strings with two dots and three letters, like \"t.i.a\" also return no results. <strong>However, any searches without dots work normally.</strong></p>\n\n<p>As far as I can tell, the \".\" is for some reason being interpreted differently in my first method, but again, I can't imagine why. I've tried searching for what, if anything, \".\" means in SQL, but can't find anything. The only difference between the two methods seems to be that the first one is rendered in json. But why would that make any difference?</p>\n\n<hr>\n\n<p>*I didn't include the code for searching for or rendering the results, because it's very long and I figured the only code that's relevant is the code that retrieves the records from the database, because that is what is failing.</p>\n\n<pre><code>#Gemfile\ngem 'rails', '4.0.10'\ngem 'pg'\ngem 'twitter-typeahead-rails', '0.10.5'\n</code></pre>\n"}, {"tags": ["ruby", "mongodb", "amazon-ec2", "sidekiq", "mongodump"], "answers": [{"comments": [{"owner": {"reputation": 671, "user_id": 1142154, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/96b9d5e6f06a19bafbe3be141278c333?s=128&d=identicon&r=PG", "display_name": "Peter89", "link": "https://stackoverflow.com/users/1142154/peter89"}, "edited": false, "score": 0, "creation_date": 1486613789, "post_id": 42087097, "comment_id": 71423837, "body": "I think your way is really hard to apply. Because data is over 5m records. Even I indexed fields for query as fastest as possible, but Sorting and Counting is taking alot of time in mongodb and Split data like that is unconvenient for importing again"}], "tags": [], "owner": {"reputation": 268, "user_id": 2338984, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05ae3478316058f15a307e78b936822a?s=128&d=identicon&r=PG", "display_name": "sig", "link": "https://stackoverflow.com/users/2338984/sig"}, "is_accepted": false, "score": 1, "last_activity_date": 1486462799, "last_edit_date": 1486462799, "creation_date": 1486462393, "answer_id": 42087097, "question_id": 42084746, "link": "https://stackoverflow.com/questions/42084746/mongodb-stuck-with-dump-and-delete-large-data/42087097#42087097", "title": "MONGODB, stuck with dump and delete large data", "body": "<p>Perhaps you should try other strategy. You may try to do it in few steps. Also you must split this task into many small jobs. You can run this jobs in a background in a low priority. On your place i'll make next steps:<br></p>\n\n<p>1st step:<br>\n1) create temporary DB(collection) for storing data for dump<br>\n2) select required data from original collection in small portions. How big? It depends on your server. For example 5000 entries per time (limit, offset).<br>\n3) save data in temporary db<br></p>\n\n<p>Now you can try to dump temporary db. If it will not work you may try to use <a href=\"https://docs.mongodb.com/v3.2/core/sharding-data-partitioning/\" rel=\"nofollow noreferrer\">partitioning</a>. </p>\n"}], "owner": {"reputation": 671, "user_id": 1142154, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/96b9d5e6f06a19bafbe3be141278c333?s=128&d=identicon&r=PG", "display_name": "Peter89", "link": "https://stackoverflow.com/users/1142154/peter89"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486462799, "creation_date": 1486455100, "last_edit_date": 1486458137, "question_id": 42084746, "link": "https://stackoverflow.com/questions/42084746/mongodb-stuck-with-dump-and-delete-large-data", "title": "MONGODB, stuck with dump and delete large data", "body": "<p>I have problem with \"dump\" then \"delete\" large data MONGODB</p>\n\n<p>db have already index fields need to query </p>\n\n<p>total data ~50m records</p>\n\n<p>filtered data have to dump and delete ~5m</p>\n\n<p>3 server:<br>\n-- MONGO t2.medium</p>\n\n<p>-- SIDEKIQ t2.small </p>\n\n<p>-- OTHER SERVER t2.small (multi)</p>\n\n<p>I run cronjob at the less traffic time. But it take too much time to complete job, ~6-8h and when it running , other-server can't connect MONGODB, then other-server change to status degrade ( elasticbeantalk with docker )</p>\n\n<p>when server down, I check MONGODB mongostat: cpu taking ~95-96%. OTHER SERVER logs is \"can not connect to db\". </p>\n\n<p>Please, Someone have experience of mongodb that help me work out this</p>\n"}, {"tags": ["sql", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 5397, "user_id": 4313133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RM0KD.jpg?s=128&g=1", "display_name": "Tom-db", "link": "https://stackoverflow.com/users/4313133/tom-db"}, "edited": false, "score": 1, "creation_date": 1486454861, "post_id": 42084372, "comment_id": 71339766, "body": "Why you don&#39;t want to use the copy command? Is it a school homework?"}, {"owner": {"reputation": 111, "user_id": 6690698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e666761fb5172e10c44a2bd40420b444?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar RS", "link": "https://stackoverflow.com/users/6690698/sagar-rs"}, "reply_to_user": {"reputation": 5397, "user_id": 4313133, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/RM0KD.jpg?s=128&g=1", "display_name": "Tom-db", "link": "https://stackoverflow.com/users/4313133/tom-db"}, "edited": false, "score": 0, "creation_date": 1486459424, "post_id": 42084372, "comment_id": 71342314, "body": "nope mate . just asking if there is a way .  If you want help otherwise just leave it. @TommasoDiBucchianico"}, {"owner": {"reputation": 37141, "user_id": 5315974, "user_type": "registered", "accept_rate": 47, "profile_image": "https://i.stack.imgur.com/MNGHV.png?s=128&g=1", "display_name": "Vao Tsun", "link": "https://stackoverflow.com/users/5315974/vao-tsun"}, "edited": false, "score": 0, "creation_date": 1486464288, "post_id": 42084372, "comment_id": 71345594, "body": "you can modify your csv to become a list of inserts. If you want to &quot;import&quot; csv - copy is the meant way."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1486502170, "post_id": 42084372, "comment_id": 71370467, "body": "Your question isn&#39;t a good fit as asked. On Stack Overflow we want to see what you tried, then we&#39;ll help solve a specific problem. Your question is very broad. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages, and <a href=\"http://meta.stackoverflow.com/questions/261592/how-much-research-effort-is-expected-of-stack-overflow-users\" title=\"how much research effort is expected of stack overflow users\">meta.stackoverflow.com/questions/261592/&hellip;</a>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1486502318, "post_id": 42084372, "comment_id": 71370528, "body": "There are multiple ways to read a CSV file, however the built-in CSV class is a good starting point. To insert the records you can generate insert statements, or use the pg gem, or an ORM like Sequel, Active Record or DataMapper. You need to research how those work, try writing code, then ask a specific question about a specific problem. The CSV class has good examples as does Sequel&#39;s README and cheatsheet pages."}], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1486503387, "post_id": 42088134, "comment_id": 71371086, "body": "The built-in CSV class can do the same by using the <code>headers: :first_row</code> option and <code>to_hash</code> on the returned row object."}, {"owner": {"reputation": 490, "user_id": 1309959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c2cacdce453a3e6f093fa1f3e103772?s=128&d=identicon&r=PG", "display_name": "Philipp Alexander Frank", "link": "https://stackoverflow.com/users/1309959/philipp-alexander-frank"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1486548505, "post_id": 42088134, "comment_id": 71389148, "body": "Thanks @theTinMan I didn&#39;t know that."}], "tags": [], "owner": {"reputation": 490, "user_id": 1309959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c2cacdce453a3e6f093fa1f3e103772?s=128&d=identicon&r=PG", "display_name": "Philipp Alexander Frank", "link": "https://stackoverflow.com/users/1309959/philipp-alexander-frank"}, "is_accepted": false, "score": 1, "last_activity_date": 1486465324, "creation_date": 1486465324, "answer_id": 42088134, "question_id": 42084372, "link": "https://stackoverflow.com/questions/42084372/how-to-import-csv-file-to-postgresql-table-without-using-copy-command/42088134#42088134", "title": "How to import csv file to postgresql table without using copy command", "body": "<p>You tagged your question with <code>ruby</code>, so a ruby'ish way could be:</p>\n\n<p>Install the <code>smarter_csv</code> gem (<a href=\"https://github.com/tilo/smarter_csv\" rel=\"nofollow noreferrer\">https://github.com/tilo/smarter_csv</a>) which lets you parse each line into a hash where the column title is used as the key.</p>\n\n<pre><code>inserts = SmarterCSV.process('/path/to/file.csv')\n# [\n#   { col_name: \"value from row 1\", ... },\n#   { col_name: \"value from row 2\", ... }\n# ]\n</code></pre>\n\n<p>Then you might use whatever ORM or database connector you like, e.g. <code>ActiveRecord</code>:</p>\n\n<pre><code>MyModel.insert(inserts)\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 6690698, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e666761fb5172e10c44a2bd40420b444?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar RS", "link": "https://stackoverflow.com/users/6690698/sagar-rs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 252, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1486465324, "creation_date": 1486453644, "question_id": 42084372, "link": "https://stackoverflow.com/questions/42084372/how-to-import-csv-file-to-postgresql-table-without-using-copy-command", "title": "How to import csv file to postgresql table without using copy command", "body": "<p>I am planning to use insert command or anything like bulk insert but not copy command . please help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "configuration", "redis", "sidekiq"], "answers": [{"comments": [{"owner": {"reputation": 4480, "user_id": 259889, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/aba1af6d6197093c880797a82e1bc2a2?s=128&d=identicon&r=PG", "display_name": "Sid", "link": "https://stackoverflow.com/users/259889/sid"}, "edited": false, "score": 0, "creation_date": 1486453584, "post_id": 42083732, "comment_id": 71339059, "body": "Oh, I seemed to have missed that.  Thanks @Joel_Blum"}], "tags": [], "owner": {"reputation": 5529, "user_id": 1032663, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/nQ6Rw.jpg?s=128&g=1", "display_name": "Joel_Blum", "link": "https://stackoverflow.com/users/1032663/joel-blum"}, "is_accepted": true, "score": 8, "last_activity_date": 1486451522, "last_edit_date": 1486451522, "creation_date": 1486451185, "answer_id": 42083732, "question_id": 42083311, "link": "https://stackoverflow.com/questions/42083311/default-sidekiq-redis-configuration-in-rails-app/42083732#42083732", "title": "Default Sidekiq Redis configuration in Rails app", "body": "<p>From sidekiq docs:</p>\n\n<blockquote>\n  <p>By default, Sidekiq tries to connect to Redis at localhost:6379</p>\n</blockquote>\n\n<p><a href=\"https://github.com/mperham/sidekiq/wiki/Using-Redis\" rel=\"noreferrer\">https://github.com/mperham/sidekiq/wiki/Using-Redis</a></p>\n\n<p>You can change the port in the initializer:</p>\n\n<pre><code> Sidekiq.configure_server do |config|\n      config.redis = { url: 'redis://redis.example.com:7372/12' }\n end\n</code></pre>\n\n<p>From the looks of it sidekiq works only with redis </p>\n\n<blockquote>\n  <p>Sidekiq uses Redis to store all of its job and operational data.</p>\n</blockquote>\n"}], "owner": {"reputation": 4480, "user_id": 259889, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/aba1af6d6197093c880797a82e1bc2a2?s=128&d=identicon&r=PG", "display_name": "Sid", "link": "https://stackoverflow.com/users/259889/sid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10077, "favorite_count": 0, "accepted_answer_id": 42083732, "answer_count": 1, "score": 6, "last_activity_date": 1486451522, "creation_date": 1486449600, "last_edit_date": 1486449935, "question_id": 42083311, "link": "https://stackoverflow.com/questions/42083311/default-sidekiq-redis-configuration-in-rails-app", "title": "Default Sidekiq Redis configuration in Rails app", "body": "<p>I'm trying to understand the Redis &amp; Sidekiq configuration in a Passenger+Rails app and have run into some lack of understanding.  I start the redis server independently of my rails app, while Sidekiq is a gem in my Rails app.  I start it likewise: (no sidekiq.yml file needed for me)</p>\n\n<blockquote>\n  <p>bundle exec sidekiq</p>\n</blockquote>\n\n<p>Following is my sidekiq.rb initializer:</p>\n\n<pre><code>require 'sidekiq'\nrequire 'sidekiq-status'\n\nSidekiq.configure_client do |config|\n  config.client_middleware do |chain|\n    chain.add Sidekiq::Status::ClientMiddleware\n  end\nend\n\nSidekiq.configure_server do |config|\n  config.server_middleware do |chain|\n    chain.add Sidekiq::Status::ServerMiddleware, expiration: 30.minutes\n  end\n  config.client_middleware do |chain|\n    chain.add Sidekiq::Status::ClientMiddleware\n  end\nend\n</code></pre>\n\n<p>I went through some library classes, but to no avail.</p>\n\n<p>I want to understand where does Sidekiq configure it's Redis server details.  It defaults to <code>localhost:6379</code>, but I am not quite sure how.<br>\nAlso, if I wish to use Memcached in future, how can I change that?</p>\n"}, {"tags": ["ruby", "savon"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 1850766, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db78becafe101714cf44f5f6181ba4ca?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/1850766/jared"}, "edited": false, "score": 0, "creation_date": 1488472748, "post_id": 42082394, "comment_id": 72256141, "body": "I finally just loaded the wsdl as a file as I wasn&#39;t able to get around this issue."}], "tags": [], "owner": {"reputation": 382, "user_id": 920265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/857a580bdb66bcc195659d4fc1166e48?s=128&d=identicon&r=PG", "display_name": "Sooraj", "link": "https://stackoverflow.com/users/920265/sooraj"}, "is_accepted": true, "score": 1, "last_activity_date": 1486445323, "creation_date": 1486445323, "answer_id": 42082394, "question_id": 42081173, "link": "https://stackoverflow.com/questions/42081173/disable-basic-auth-for-savon-wsdl-call/42082394#42082394", "title": "Disable basic_auth for Savon WSDL call", "body": "<p>Savon will perform basic auth only if you provide <em>:basic_auth</em> while creating the <em>Savon.client</em> object.</p>\n"}], "owner": {"reputation": 65, "user_id": 1850766, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/db78becafe101714cf44f5f6181ba4ca?s=128&d=identicon&r=PG", "display_name": "Jared", "link": "https://stackoverflow.com/users/1850766/jared"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 42082394, "answer_count": 1, "score": 1, "last_activity_date": 1486445323, "creation_date": 1486437899, "question_id": 42081173, "link": "https://stackoverflow.com/questions/42081173/disable-basic-auth-for-savon-wsdl-call", "title": "Disable basic_auth for Savon WSDL call", "body": "<p>Is it possible to disable authentication (basic_auth) when Savon attempts to retrieve the WSDL?</p>\n\n<p>It appears that this changed somewhere around 2.0 or 2.1 and now the authentication headers are always being sent, which the server I am calling throws an error when this happens.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "ssh", "devise"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 3403959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c34df162241ca4eac0d3324c147643c1?s=128&d=identicon&r=PG&f=1", "display_name": "user3403959", "link": "https://stackoverflow.com/users/3403959/user3403959"}, "edited": false, "score": 0, "creation_date": 1487084650, "post_id": 42083982, "comment_id": 71618330, "body": "It worked perfectly! But now I deployed the Rails App into an Amazon EC2 and when I try to connect I get &quot;Net::SSH::AuthenticationFailed&quot;, which is weird because I can connect through SSH using the console of the EC2 instance"}, {"owner": {"reputation": 2925, "user_id": 7362128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c182f15f6440b325d21ef726ccbda66?s=128&d=identicon&r=PG", "display_name": "Slava.K", "link": "https://stackoverflow.com/users/7362128/slava-k"}, "reply_to_user": {"reputation": 13, "user_id": 3403959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c34df162241ca4eac0d3324c147643c1?s=128&d=identicon&r=PG&f=1", "display_name": "user3403959", "link": "https://stackoverflow.com/users/3403959/user3403959"}, "edited": false, "score": 0, "creation_date": 1487140671, "post_id": 42083982, "comment_id": 71643088, "body": "My guess is that your server is run by another system user which therefore has different ssh key. You can check it by running <code>ps u | grep your_server_name</code>. For example, If you are using <code>puma</code> in your project: <code>ps u | grep puma</code>. The first column of output will containt user name. Compare it to your user name. Also, I think you&#39;d better create another question with this issue so that amazon experts will be able to help you"}], "tags": [], "owner": {"reputation": 2925, "user_id": 7362128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c182f15f6440b325d21ef726ccbda66?s=128&d=identicon&r=PG", "display_name": "Slava.K", "link": "https://stackoverflow.com/users/7362128/slava-k"}, "is_accepted": true, "score": 0, "last_activity_date": 1486452066, "creation_date": 1486452066, "answer_id": 42083982, "question_id": 42080856, "link": "https://stackoverflow.com/questions/42080856/ruby-on-rails-connect-back-to-app-database-after-ssh-tunnel-query/42083982#42083982", "title": "Ruby on Rails - Connect back to app database after SSH Tunnel query", "body": "<p>Do not use <code>ActiveRecord::Base.establish_connection</code>, call <code>establish_connection</code> on <code>Item</code> class instead:</p>\n\n<pre><code>class Item &lt; ActiveRecord::Base\n  establish_connection { # your connection options here }\nend\n</code></pre>\n\n<p>Or, if you have no other choice, then store local database connection options somewhere before calling <code>ActiveRecord::Base.establish_connection</code> and then connect local database manually using stored configuration:</p>\n\n<pre><code>@local_db = Rails.configuration.database_configuration[Rails.env]\n@remote_db = {\n  adapter: 'mysql2',\n  host: '127.0.0.1',\n  username: username,\n  password: password,\n  database: remote_db_name,\n  port: @port\n}\nActiveRecord::Base.establish_connection(@remote_db)\n\n# when you need your local database again:\nActiveRecord::Base.establish_connection(@local_db)\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 3403959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c34df162241ca4eac0d3324c147643c1?s=128&d=identicon&r=PG&f=1", "display_name": "user3403959", "link": "https://stackoverflow.com/users/3403959/user3403959"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 1, "accepted_answer_id": 42083982, "answer_count": 1, "score": 1, "last_activity_date": 1486452066, "creation_date": 1486435835, "question_id": 42080856, "link": "https://stackoverflow.com/questions/42080856/ruby-on-rails-connect-back-to-app-database-after-ssh-tunnel-query", "title": "Ruby on Rails - Connect back to app database after SSH Tunnel query", "body": "<p>I'm connecting to a remote database through an SSH Tunnel inside an Activerecord::Base called Item. </p>\n\n<p>I have:</p>\n\n<pre><code>require 'net/ssh/gateway'\nrequire 'active_record'\nrequire 'mysql2'\n\nclass Item &lt; ActiveRecord::Base\n  self.table_name = \"[table_name]\"\n  @gateway = Net::SSH::Gateway.new(host, username)\n  @port = @gateway.open('127.0.0.1', 3306, 3309)\n\n ActiveRecord::Base.establish_connection(\n   adapter: 'mysql2',\n   host: '127.0.0.1',\n   username: username,\n   password: password,\n   database: remote_db_name,\n   port: @port\n )\n</code></pre>\n\n<p>Then, in a controller I can successfully call for example <code>Item.all</code> and retrieve all the items from that remote table. The problem is that then I go to another view of the app (I'm using devise for the users) and I get this error:</p>\n\n<pre><code>Mysql2::Error: Table '[remote_database_name].users' doesn't exist: SELECT `users`.* FROM `users` WHERE `users`.`id` = 2 ORDER BY `users`.`id` ASC LIMIT 1\n</code></pre>\n\n<p>How do I connect back to the local database? I tried using <code>@gateway.shutdown!</code> and <code>@gateway.close(@port)</code> with methods from the controller, but it doesn't work.</p>\n"}]