[{"tags": ["ruby", "activerecord", "jruby"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 10648643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e2ec3456e524fc8f760675bb087ac89?s=128&d=identicon&r=PG&f=1", "display_name": "squirrelchew", "link": "https://stackoverflow.com/users/10648643/squirrelchew"}, "edited": false, "score": 0, "creation_date": 1542845084, "post_id": 53422096, "comment_id": 93718816, "body": "Yeah, that explains the behaviour.  Is there a way to get the desired effect?"}, {"owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "reply_to_user": {"reputation": 23, "user_id": 10648643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e2ec3456e524fc8f760675bb087ac89?s=128&d=identicon&r=PG&f=1", "display_name": "squirrelchew", "link": "https://stackoverflow.com/users/10648643/squirrelchew"}, "edited": false, "score": 0, "creation_date": 1542845256, "post_id": 53422096, "comment_id": 93718870, "body": "It&#39;s difficult to say what&#39;s your desired effect. You can either modify one of <code>foo_rows.first.bars</code> or modify the one from <code>bar_rows</code>, add it to <code>foo_rows.first.bars</code> and delete the previous one."}, {"owner": {"reputation": 23, "user_id": 10648643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e2ec3456e524fc8f760675bb087ac89?s=128&d=identicon&r=PG&f=1", "display_name": "squirrelchew", "link": "https://stackoverflow.com/users/10648643/squirrelchew"}, "edited": false, "score": 0, "creation_date": 1542845887, "post_id": 53422096, "comment_id": 93719029, "body": "I&#39;d expect the bar with the id of 1 to be the same bar that&#39;s associated with all the foos, just as it would be in a relational database.    This way I can locate a bar through a foo, update it right there, and not have to traverse every foo looking for that bar to update it as well."}, {"owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "reply_to_user": {"reputation": 23, "user_id": 10648643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e2ec3456e524fc8f760675bb087ac89?s=128&d=identicon&r=PG&f=1", "display_name": "squirrelchew", "link": "https://stackoverflow.com/users/10648643/squirrelchew"}, "edited": false, "score": 0, "creation_date": 1542846028, "post_id": 53422096, "comment_id": 93719059, "body": "I don&#39;t think there&#39;s any way around it. You&#39;ll have to find the object directly in the associations of given <code>foo</code>. If you change the object somewhere else and want to have the changes reflected in <code>foo</code>, you&#39;ll have to reassign the associated item."}, {"owner": {"reputation": 23, "user_id": 10648643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e2ec3456e524fc8f760675bb087ac89?s=128&d=identicon&r=PG&f=1", "display_name": "squirrelchew", "link": "https://stackoverflow.com/users/10648643/squirrelchew"}, "edited": false, "score": 0, "creation_date": 1542847673, "post_id": 53422096, "comment_id": 93719393, "body": "That&#39;s what I was afraid of, hah!  I guess I&#39;ll be writing some methods to do that all quick-like.  Thanks!"}], "tags": [], "owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "is_accepted": true, "score": 0, "last_activity_date": 1542844595, "creation_date": 1542844595, "answer_id": 53422096, "question_id": 53421835, "link": "https://stackoverflow.com/questions/53421835/how-do-you-create-many-to-many-class-instance-relationships-in-jruby-w-activerec/53422096#53422096", "title": "How do you create many-to-many class instance relationships in JRuby w/ActiveRecord?", "body": "<p>Your <code>bar_rows</code> and <code>foo_rows.first.bars</code> are arrays with different objects in memory. Just because the <code>id</code> attribute of one of their elements is equal, it doesn't mean they're the same objects:</p>\n\n<pre><code>bar_rows.find { |bar| bar.bar_id == 1 }.object_id\n# =&gt; 40057500\nfoo_rows.first.bars.find { |bar| bar.bar_id == 1 }.object_id\n# =&gt; 40057123\n</code></pre>\n\n<p>You are changing attribute of one of these objects, there is no reason that the attribute of the second object should be changed.</p>\n\n<p>As for the <code>JRuby</code> part, it does not matter -- MRI would behave the same.</p>\n"}], "owner": {"reputation": 23, "user_id": 10648643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e2ec3456e524fc8f760675bb087ac89?s=128&d=identicon&r=PG&f=1", "display_name": "squirrelchew", "link": "https://stackoverflow.com/users/10648643/squirrelchew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 53422096, "answer_count": 1, "score": 0, "last_activity_date": 1542844595, "creation_date": 1542842579, "question_id": 53421835, "link": "https://stackoverflow.com/questions/53421835/how-do-you-create-many-to-many-class-instance-relationships-in-jruby-w-activerec", "title": "How do you create many-to-many class instance relationships in JRuby w/ActiveRecord?", "body": "<p>I have this basic setup:</p>\n\n<pre><code>class Foo &lt; ActiveRecord::Base\n  self.primary_key = 'foo_id'\n  has_and_belongs_to_many :bars\nend\n\nclass Bar &lt; ActiveRecord::Base\n  self.primary_key = :bar_id\n  has_and_belongs_to_many :foos\nend\n</code></pre>\n\n<p>Now I can see all the bars associated with foos using <code>Foo.first.bars</code> or <code>Bar.first.foos</code> and this works as expected.</p>\n\n<p>Where I'm stumped is how to do something like this:</p>\n\n<pre><code>foo_rows = Foo.all\n=&gt; (all those rows)\nbar_rows = Bar.all\n=&gt; (all those rows)\nfoo_rows.first.bars.find { |bar| bar.bar_id == 1 }.some_col\n=&gt; \"The value from the database\"\nbar_rows.find { |bar| bar.bar_id == 1 }.some_col = 'a new value'\n=&gt; \"a new value\"\nfoo_rows.first.bars.find { |bar| bar.bar_id == 1 }.some_col\n=&gt; \"a new value\"\n</code></pre>\n\n<p>But instead that last line says <code>\"The value from the database\"</code></p>\n\n<p>How do I achieve the desired behaviour?</p>\n"}, {"tags": ["ruby", "string"], "comments": [{"owner": {"reputation": 20644, "user_id": 184184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f6a508697f9eca2680b12ddb85ba1319?s=128&d=identicon&r=PG", "display_name": "Lenin Raj Rajasekaran", "link": "https://stackoverflow.com/users/184184/lenin-raj-rajasekaran"}, "edited": false, "score": 1, "creation_date": 1542839829, "post_id": 53421378, "comment_id": 93717216, "body": "what is the logic of this split?"}, {"owner": {"reputation": 9, "user_id": 10598651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/peUOq.jpg?s=128&g=1", "display_name": "Alejandro Rodriguez", "link": "https://stackoverflow.com/users/10598651/alejandro-rodriguez"}, "reply_to_user": {"reputation": 20644, "user_id": 184184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f6a508697f9eca2680b12ddb85ba1319?s=128&d=identicon&r=PG", "display_name": "Lenin Raj Rajasekaran", "link": "https://stackoverflow.com/users/184184/lenin-raj-rajasekaran"}, "edited": false, "score": 0, "creation_date": 1542840129, "post_id": 53421378, "comment_id": 93717305, "body": "The program is about math expressions checker and the idea is  separate all the &quot;()&quot; and operators  minus the numbers or trigonometric ratios"}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 1, "creation_date": 1542841565, "post_id": 53421378, "comment_id": 93717763, "body": "What&#39;s the logic of an input such as <code>cos4</code> or <code>sin65</code>?  You seem to be treating them as labels or variable names.  How would one know that&#39;s not supposed to be evaluating <code>cosine(4)</code> and <code>sine(65)</code>?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1542863222, "post_id": 53421378, "comment_id": 93722724, "body": "It is a bad idea to use constant for something like that."}], "answers": [{"comments": [{"owner": {"reputation": 9, "user_id": 10598651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/peUOq.jpg?s=128&g=1", "display_name": "Alejandro Rodriguez", "link": "https://stackoverflow.com/users/10598651/alejandro-rodriguez"}, "edited": false, "score": 0, "creation_date": 1542840836, "post_id": 53421532, "comment_id": 93717519, "body": "Thanks, is what I needed"}], "tags": [], "owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "is_accepted": true, "score": 1, "last_activity_date": 1542840627, "creation_date": 1542840627, "answer_id": 53421532, "question_id": 53421378, "link": "https://stackoverflow.com/questions/53421378/how-to-split-and-keep-numbers-together/53421532#53421532", "title": "How to split and keep numbers together", "body": "<pre><code>\"((234+332)+(cos4-sin65))\".split /([[:alpha:]]*\\d+)*/\n# =&gt; [\"(\", \"(\", \"234\", \"+\", \"332\", \")\", \"+\", \"(\", \"cos4\", \"-\", \"sin65\", \")\", \")\"]\n</code></pre>\n\n<p>Splits the whole string by nothing or optional alphanumeric + digits.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1542841844, "creation_date": 1542841844, "answer_id": 53421733, "question_id": 53421378, "link": "https://stackoverflow.com/questions/53421378/how-to-split-and-keep-numbers-together/53421733#53421733", "title": "How to split and keep numbers together", "body": "<pre><code>oper = \"((234+332)+(cos4-sin65))\"\n\noper.scan /[^[:alnum:]]|[[:alnum:]]+/\n  #=&gt; [\"(\", \"(\", \"234\", \"+\", \"332\", \")\", \"+\", \"(\", \"cos4\", \"-\", \"sin65\", \")\", \")\"]\n</code></pre>\n\n<p>Scan for one non-alphanumeric character or one or more alphanumeric characters.</p>\n"}], "owner": {"reputation": 9, "user_id": 10598651, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/peUOq.jpg?s=128&g=1", "display_name": "Alejandro Rodriguez", "link": "https://stackoverflow.com/users/10598651/alejandro-rodriguez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 53421532, "answer_count": 2, "score": 0, "last_activity_date": 1542863463, "creation_date": 1542839701, "last_edit_date": 1542863463, "question_id": 53421378, "link": "https://stackoverflow.com/questions/53421378/how-to-split-and-keep-numbers-together", "title": "How to split and keep numbers together", "body": "<p>I am programming a math expression checker. I have this string:</p>\n\n<pre><code>Oper = \"((234+332)+(cos4-sin65))\"\n</code></pre>\n\n<p>I want to split this string by separating all <code>\"()\"</code>s and operators minus numbers or trigonometric ratios to get this result:</p>\n\n<pre><code>Oper = ['(', '(', '234', '+', '332', ')', '+', '(', 'cos4', '-', 'sin65', ')', ')']\n</code></pre>\n\n<p>How would the split be?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "linux", "shell"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1542838434, "post_id": 53421150, "comment_id": 93716742, "body": "Have a look at <a href=\"https://stackoverflow.com/questions/24514307/passing-variable-from-ruby-as-a-password-for-shell\" title=\"passing variable from ruby as a password for shell\">stackoverflow.com/questions/24514307/&hellip;</a>"}, {"owner": {"reputation": 1112, "user_id": 2051503, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/320137ee8c1d5a035216bf3f8072478b?s=128&d=identicon&r=PG", "display_name": "Boris Kuzevanov", "link": "https://stackoverflow.com/users/2051503/boris-kuzevanov"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1542840266, "post_id": 53421150, "comment_id": 93717341, "body": "Please can you write example ? it will be something like this ?: <code>cmd = &quot;openssl genrsa -des3 -out testfolder&#47;test.key 1024 -S 111111Password&quot;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 1112, "user_id": 2051503, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/320137ee8c1d5a035216bf3f8072478b?s=128&d=identicon&r=PG", "display_name": "Boris Kuzevanov", "link": "https://stackoverflow.com/users/2051503/boris-kuzevanov"}, "edited": false, "score": 0, "creation_date": 1542838686, "post_id": 53421190, "comment_id": 93716833, "body": "please, explain me this line ` reader.expect(/Enter pass phrase for vendor/testkey.key/)` thanks"}, {"owner": {"reputation": 20644, "user_id": 184184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f6a508697f9eca2680b12ddb85ba1319?s=128&d=identicon&r=PG", "display_name": "Lenin Raj Rajasekaran", "link": "https://stackoverflow.com/users/184184/lenin-raj-rajasekaran"}, "reply_to_user": {"reputation": 1112, "user_id": 2051503, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/320137ee8c1d5a035216bf3f8072478b?s=128&d=identicon&r=PG", "display_name": "Boris Kuzevanov", "link": "https://stackoverflow.com/users/2051503/boris-kuzevanov"}, "edited": false, "score": 0, "creation_date": 1542838779, "post_id": 53421190, "comment_id": 93716866, "body": "when the output from the shell matches that string, the password will get inputted into the shell"}, {"owner": {"reputation": 1112, "user_id": 2051503, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/320137ee8c1d5a035216bf3f8072478b?s=128&d=identicon&r=PG", "display_name": "Boris Kuzevanov", "link": "https://stackoverflow.com/users/2051503/boris-kuzevanov"}, "edited": false, "score": 0, "creation_date": 1542838886, "post_id": 53421190, "comment_id": 93716905, "body": "so I need to copy exactly terminal answer and paste in this line?"}, {"owner": {"reputation": 20644, "user_id": 184184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f6a508697f9eca2680b12ddb85ba1319?s=128&d=identicon&r=PG", "display_name": "Lenin Raj Rajasekaran", "link": "https://stackoverflow.com/users/184184/lenin-raj-rajasekaran"}, "reply_to_user": {"reputation": 1112, "user_id": 2051503, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/320137ee8c1d5a035216bf3f8072478b?s=128&d=identicon&r=PG", "display_name": "Boris Kuzevanov", "link": "https://stackoverflow.com/users/2051503/boris-kuzevanov"}, "edited": false, "score": 0, "creation_date": 1542838922, "post_id": 53421190, "comment_id": 93716928, "body": "I think even regex works. so just try something shorter like <code>Enter pass phrase</code>"}], "tags": [], "owner": {"reputation": 20644, "user_id": 184184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f6a508697f9eca2680b12ddb85ba1319?s=128&d=identicon&r=PG", "display_name": "Lenin Raj Rajasekaran", "link": "https://stackoverflow.com/users/184184/lenin-raj-rajasekaran"}, "is_accepted": false, "score": 2, "last_activity_date": 1542838785, "last_edit_date": 1542838785, "creation_date": 1542838464, "answer_id": 53421190, "question_id": 53421150, "link": "https://stackoverflow.com/questions/53421150/rails-run-shell-command-with-user-input/53421190#53421190", "title": "rails run shell command with user input", "body": "<pre><code>require 'pty'\nrequire 'expect'\n\nPTY.spawn(\"openssl genrsa -des3 -out testfolder/testkey.key 1024\") do |reader, writer|\n  reader.expect(/Enter pass phrase/)\n  writer.puts(\"&lt;password&gt;\")\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1112, "user_id": 2051503, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/320137ee8c1d5a035216bf3f8072478b?s=128&d=identicon&r=PG", "display_name": "Boris Kuzevanov", "link": "https://stackoverflow.com/users/2051503/boris-kuzevanov"}, "edited": false, "score": 0, "creation_date": 1542901693, "post_id": 53424874, "comment_id": 93742553, "body": "please can you explain me what does it mean -passout ?"}, {"owner": {"reputation": 1416, "user_id": 8656126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a097761015b0c2b723f22eb4d239b3e6?s=128&d=identicon&r=PG&f=1", "display_name": "richflow", "link": "https://stackoverflow.com/users/8656126/richflow"}, "reply_to_user": {"reputation": 1112, "user_id": 2051503, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/320137ee8c1d5a035216bf3f8072478b?s=128&d=identicon&r=PG", "display_name": "Boris Kuzevanov", "link": "https://stackoverflow.com/users/2051503/boris-kuzevanov"}, "edited": false, "score": 0, "creation_date": 1543024288, "post_id": 53424874, "comment_id": 93781531, "body": "&quot;-passout arg    output file pass phrase source&quot; source for the pass phrase"}], "tags": [], "owner": {"reputation": 1416, "user_id": 8656126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a097761015b0c2b723f22eb4d239b3e6?s=128&d=identicon&r=PG&f=1", "display_name": "richflow", "link": "https://stackoverflow.com/users/8656126/richflow"}, "is_accepted": true, "score": 1, "last_activity_date": 1542867222, "creation_date": 1542867222, "answer_id": 53424874, "question_id": 53421150, "link": "https://stackoverflow.com/questions/53421150/rails-run-shell-command-with-user-input/53424874#53424874", "title": "rails run shell command with user input", "body": "<p>You can try passing the passphase through an argument (not recommended):</p>\n\n<pre><code>openssl genrsa -des3 -out testfolder/testkey.key -passout pass:SECRET_PASS 1024\n</code></pre>\n\n<p>A more secure option is to write the passphrase to a temporary file and use this:</p>\n\n<pre><code>openssl genrsa -des3 -out testfolder/testkey.key -passout file:passphrase.txt 1024\n</code></pre>\n\n<p>Answer shamelessly lifted from <a href=\"https://stackoverflow.com/a/4300425/8656126\">this SO thread</a> which has much more detail and better explanations.</p>\n"}], "owner": {"reputation": 1112, "user_id": 2051503, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/320137ee8c1d5a035216bf3f8072478b?s=128&d=identicon&r=PG", "display_name": "Boris Kuzevanov", "link": "https://stackoverflow.com/users/2051503/boris-kuzevanov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "accepted_answer_id": 53424874, "answer_count": 2, "score": 3, "last_activity_date": 1542867222, "creation_date": 1542838278, "question_id": 53421150, "link": "https://stackoverflow.com/questions/53421150/rails-run-shell-command-with-user-input", "title": "rails run shell command with user input", "body": "<p>I want to run shell command from rails app controller.\nMy app code is:</p>\n\n<pre><code>cmd = \"openssl genrsa -des3 -out testfolder/testkey.key 1024\"\nsystem cmd \n</code></pre>\n\n<p>than shell will ask me password, so if you run this command from terminal you can input password, but if I run from controller I can't.</p>\n\n<p>I don't want to use rails OPENSSL, for some reasons.</p>\n\n<p>I tried to google but I have no result.</p>\n\n<p>Also I tried something like this:</p>\n\n<pre><code>cmd = \"openssl genrsa -des3 -out testfolder/testkey.key 1024\"\nsystem cmd\nsystem 'echo', '111111Passs'\n</code></pre>\n\n<p>This is not solution of my problem.</p>\n\n<p>My question is:\nhow to pass password from controller to shell? \nThan how I can submit this command? (simulate press on ENTER on my keyboard) </p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2088, "user_id": 1074514, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/l7UJP.jpg?s=128&g=1", "display_name": "Dessus", "link": "https://stackoverflow.com/users/1074514/dessus"}, "edited": false, "score": 0, "creation_date": 1542834674, "post_id": 53420465, "comment_id": 93715364, "body": "Please include the error details in your post to help people"}, {"owner": {"reputation": 582, "user_id": 2464546, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2af08981b53416c5e483122a613c3759?s=128&d=identicon&r=PG", "display_name": "risa_risa", "link": "https://stackoverflow.com/users/2464546/risa-risa"}, "edited": false, "score": 0, "creation_date": 1542835475, "post_id": 53420465, "comment_id": 93715695, "body": "Also helpful would be your entire code as it&#39;s structured right now.  What are you expecting as a result of <code>s1.name</code>? and what are you expecting as a result of <code>s1.var1</code>?"}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1542835945, "post_id": 53420465, "comment_id": 93715885, "body": "There is a typo: <code>initialize</code>, not <code>initilize</code>."}, {"owner": {"reputation": 43, "user_id": 10687970, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-W-FBZswSfRQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-j5CLVVgaMNxyzSC0-DyemrQO0G7Q/mo/photo.jpg?sz=128", "display_name": "Ke Ma", "link": "https://stackoverflow.com/users/10687970/ke-ma"}, "edited": false, "score": 0, "creation_date": 1542835979, "post_id": 53420465, "comment_id": 93715899, "body": "I expect a way that makes s1.var work like s1.name, I mean to use the value of var to result a s1.name"}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 1, "creation_date": 1542836231, "post_id": 53420465, "comment_id": 93715982, "body": "<code>s1.send(var)</code> is a way to do it."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1542836246, "post_id": 53420465, "comment_id": 93715994, "body": "<code>attr_accessor :name</code> adds the <code>def name</code> for you, if you really want to go directly to the instance variable (generally not recommended) then you&#39;d use <code>s1.instance_variable_get(:@name)</code>."}, {"owner": {"reputation": 43, "user_id": 10687970, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-W-FBZswSfRQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-j5CLVVgaMNxyzSC0-DyemrQO0G7Q/mo/photo.jpg?sz=128", "display_name": "Ke Ma", "link": "https://stackoverflow.com/users/10687970/ke-ma"}, "reply_to_user": {"reputation": 36453, "user_id": 12046409, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZRRhI.jpg?s=128&g=1", "display_name": "JohanC", "link": "https://stackoverflow.com/users/12046409/johanc"}, "edited": false, "score": 0, "creation_date": 1589220502, "post_id": 53420465, "comment_id": 109201488, "body": "@JohanC this is helpful, after this when I do plt.show, it displays a grid with different colors based on the number of points within a bin, but how to display just 2 colors? for example, I want the bin with more than 100 points to display yellow, and other to black?"}, {"owner": {"reputation": 43, "user_id": 10687970, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-W-FBZswSfRQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-j5CLVVgaMNxyzSC0-DyemrQO0G7Q/mo/photo.jpg?sz=128", "display_name": "Ke Ma", "link": "https://stackoverflow.com/users/10687970/ke-ma"}, "reply_to_user": {"reputation": 36453, "user_id": 12046409, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZRRhI.jpg?s=128&g=1", "display_name": "JohanC", "link": "https://stackoverflow.com/users/12046409/johanc"}, "edited": false, "score": 0, "creation_date": 1589221740, "post_id": 53420465, "comment_id": 109202106, "body": "@JohanC Hey man, I posted a new question already, please help, appriciate!"}], "owner": {"reputation": 43, "user_id": 10687970, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-W-FBZswSfRQ/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-j5CLVVgaMNxyzSC0-DyemrQO0G7Q/mo/photo.jpg?sz=128", "display_name": "Ke Ma", "link": "https://stackoverflow.com/users/10687970/ke-ma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "closed_date": 1542836170, "answer_count": 0, "score": 0, "last_activity_date": 1542836455, "creation_date": 1542834302, "last_edit_date": 1542836455, "question_id": 53420465, "link": "https://stackoverflow.com/questions/53420465/how-to-use-the-value-of-the-variable-as-the-class-variable-accessor", "closed_reason": "Duplicate", "title": "How to use the value of the variable as the class variable accessor", "body": "<p>for example :</p>\n\n<pre><code>class Student \n  attr_accessor :name\n  def initialize(name)\n      @name=name\n  end\nend\n\ns1 = Student.new(\"student1\")\nvar = \"name\"\nputs s1.var  # error message, var is not defined in class Student\n</code></pre>\n\n<p>I expect <code>puts s1.var</code> to print \"student1\" exactly like <code>puts s1.name</code></p>\n"}, {"tags": ["ruby", "sockets", "url", "uri", "protocols"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 10687830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b8ecab47a30291b0a3319112bacc39?s=128&d=identicon&r=PG&f=1", "display_name": "Eduardo Paulo Migo", "link": "https://stackoverflow.com/users/10687830/eduardo-paulo-migo"}, "edited": false, "score": 0, "creation_date": 1542833855, "post_id": 53420243, "comment_id": 93714994, "body": "syntax error, unexpected &#39;\\n&#39;, expecting &#39;=&#39; url, server"}, {"owner": {"reputation": 1, "user_id": 10687830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b8ecab47a30291b0a3319112bacc39?s=128&d=identicon&r=PG&f=1", "display_name": "Eduardo Paulo Migo", "link": "https://stackoverflow.com/users/10687830/eduardo-paulo-migo"}, "edited": false, "score": 0, "creation_date": 1542833863, "post_id": 53420243, "comment_id": 93715004, "body": "syntax error, unexpected end-of-input, expecting keyword_end puts fileProtocol(url)"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1542834686, "post_id": 53420243, "comment_id": 93715369, "body": "I think you want <code>[url, server]</code> at the end of the method, Ruby doesn&#39;t really let you return multiple values, you explicitly return an array and then deconstruct it during the assignment."}, {"owner": {"reputation": 1, "user_id": 10687830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b8ecab47a30291b0a3319112bacc39?s=128&d=identicon&r=PG&f=1", "display_name": "Eduardo Paulo Migo", "link": "https://stackoverflow.com/users/10687830/eduardo-paulo-migo"}, "edited": false, "score": 0, "creation_date": 1542893022, "post_id": 53420243, "comment_id": 93737643, "body": "Okay. Thanks. I&#39;ll see what I can do. ^^"}], "tags": [], "owner": {"reputation": 668, "user_id": 1983268, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/1342a64e5ca49abb647742954a7d7840?s=128&d=identicon&r=PG", "display_name": "Carlos Romero", "link": "https://stackoverflow.com/users/1983268/carlos-romero"}, "is_accepted": false, "score": 0, "last_activity_date": 1542886840, "last_edit_date": 1542886840, "creation_date": 1542833280, "answer_id": 53420243, "question_id": 53419978, "link": "https://stackoverflow.com/questions/53419978/why-errors-appear-at-ruby/53420243#53420243", "title": "Why errors appear at Ruby?", "body": "<p>I see a few problems there. In your method <code>fileProtocol</code> it seems like you are setting the value of <code>uri</code> with an inline if (<code>do X if condition</code>), so that <code>end</code> immediately following the <code>if</code> is unnecessary. Also, the <code>=</code> should be <code>==</code></p>\n\n<p>I believe you want something like this:</p>\n\n<pre><code>def fileProtocol( url , server ) \n   uri = URI(url, server) if scheme == uri.scheme  \n   [url, server]\nend\n\nputs fileProtocol(url, server) \n</code></pre>\n\n<p>EDIT: Also, as @muistooshort pointed in the comments, the return value of the method (its last line) should wrap any multiple values you want to return in an array.</p>\n"}], "owner": {"reputation": 1, "user_id": 10687830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/81b8ecab47a30291b0a3319112bacc39?s=128&d=identicon&r=PG&f=1", "display_name": "Eduardo Paulo Migo", "link": "https://stackoverflow.com/users/10687830/eduardo-paulo-migo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1542894444, "creation_date": 1542831950, "last_edit_date": 1542894444, "question_id": 53419978, "link": "https://stackoverflow.com/questions/53419978/why-errors-appear-at-ruby", "title": "Why errors appear at Ruby?", "body": "<p><strong>Objective</strong> \nAdd (uri, url) with port. </p>\n\n<pre><code> # Help for carlos-romero   \n # https://stackoverflow.com\n\n # Help for mu-is-too-short\n # https://stackoverflow.com\n\nrequire 'uri'\nrequire 'socket'\n\nurl = 'file://C://'\n\n class Class1\n    def fileProtocol( url )\n        uri = URI(url) if scheme = uri.scheme\n      puts fileProtocol(url)\n    end\n  end\n\n class Class2\n     def fileProtocolPort( server )\n         server = TCPServer.open(8080)\n           for i in  0..5\n           client = server.accept\n             client.puts(Time.now.ctime)\n            client.puts \"Closing the connection. Bye!\"\n            client.close\n            end\n            end\n            end\n</code></pre>\n\n<p><strong>ruby show this errors</strong></p>\n\n<blockquote>\n  <p>Traceback (most recent call last):\n      2: from main.rb:7:in <code>&lt;main&gt;'\n      1: from main.rb:7:in</code>open'\n  main.rb:7:in `initialize': Address already in use - bind(2) for nil port 8080 (Errno::EADDRINUSE)</p>\n</blockquote>\n\n<p>So, what does that mean this error? Can you help me?</p>\n"}, {"tags": ["ruby", "thor"], "answers": [{"tags": [], "owner": {"reputation": 1298, "user_id": 6305204, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/jGfSZ.png?s=128&g=1", "display_name": "con--", "link": "https://stackoverflow.com/users/6305204/con"}, "is_accepted": false, "score": 1, "last_activity_date": 1542886354, "creation_date": 1542886354, "answer_id": 53430040, "question_id": 53418821, "link": "https://stackoverflow.com/questions/53418821/make-thor-show-message-for-top-level-command/53430040#53430040", "title": "Make Thor show message for top level command", "body": "<p>The closest thing I can think of is adding a default task and using it to invoke the help task. You'd get this message when calling <code>$my_command</code> with no arguments</p>\n\n<pre><code>require 'thor'\nclass MyCLI &lt; Thor\n  desc \"hello NAME\", \"say hello to NAME\"\n  def hello(name)\n    puts \"Hello #{name}\"\n  end\n  desc \"greeting\", \"this is just a greeting\"\n  def greeting\n    puts \"Welcome to MyCLI\"\n    invoke :help\n  end\n  default_task :greeting\nend\n\nMyCLI.start(ARGV)\n\n# $my_command\n# output:\n\n# Welcome to MyCLI\n# Commands:\n#   test.rb greeting        # this is just a greeting\n#   test.rb hello NAME      # say hello to NAME\n#   test.rb help [COMMAND]  # Describe available commands or one spec...\n</code></pre>\n"}], "owner": {"reputation": 1635, "user_id": 3017954, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/eb24756b6ef26baee8ae161006099cc7?s=128&d=identicon&r=PG&f=1", "display_name": "CodeSmith", "link": "https://stackoverflow.com/users/3017954/codesmith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542886354, "creation_date": 1542826475, "question_id": 53418821, "link": "https://stackoverflow.com/questions/53418821/make-thor-show-message-for-top-level-command", "title": "Make Thor show message for top level command", "body": "<p>Is there any way to make Thor show a general message for the top level command?</p>\n\n<pre><code>$my_command help\n\nI'd like to show a welcome message here.\n\nCommands:\n  my_command help [COMMAND]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "associations"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 2, "creation_date": 1542830126, "post_id": 53418434, "comment_id": 93713430, "body": "This is not a code writing service, you have to show that you at least have tried to solve the problem."}, {"owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1542832747, "post_id": 53418434, "comment_id": 93714527, "body": "sorry im new here im going to upload my code now"}, {"owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1542911799, "post_id": 53418434, "comment_id": 93746917, "body": "Ive edited my code and included what ive tried @max"}], "owner": {"reputation": 87, "user_id": 10686438, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-mDlr5ba1iuE/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-gSPgmEAs1DoxxJETccLcvn6iUPDQ/mo/photo.jpg?sz=128", "display_name": "kevin lopez", "link": "https://stackoverflow.com/users/10686438/kevin-lopez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542911613, "creation_date": 1542824939, "last_edit_date": 1542911613, "question_id": 53418434, "link": "https://stackoverflow.com/questions/53418434/ruby-on-rails-devise-user-model-can-create-a-team-and-become-leader-or-join-an-e", "title": "Ruby on rails devise user model can create a team and become leader or join an existing team as member", "body": "<p>Hey guys im working on a rails application where users that have successfully signed up and logged in to their dashboard can create a team and become the leader (invite others to join via email, delete existing members etc.) or join an existing team as a member.( can only view other members and information about themselves) I'm using the Devise gem for user login / sign up since it has a lot of what i need. A team has one manager and has many members. Heres what ive tried, users belong to teams, and teams have many users. Ive also tried the association, Users have one team and teams have many users but one manager. I'm very confused thanks again.</p>\n\n<p><strong>user.rb</strong></p>\n\n<pre><code>class User &lt; ApplicationRecord\n   devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :validatable, :confirmable \n   validates_presence_of :phone, :city, :state, :street, :zip, presence: true, on: :create\n   belongs_to :team \nend\n</code></pre>\n\n<p><strong>schema.rb</strong></p>\n\n<pre><code>create_table \"users\", force: :cascade do |t|\n    t.string \"email\", default: \"\", null: false\n    t.string \"encrypted_password\", default: \"\", null: false\n    t.string \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.string \"confirmation_token\"\n    t.datetime \"confirmed_at\"\n    t.datetime \"confirmation_sent_at\"\n    t.string \"firstname\"\n    t.string \"middlename\"\n    t.string \"lastname\"\n    t.string \"phone\"\n    t.string \"city\"\n    t.string \"state\"\n    t.string \"street\"\n    t.string \"zip\"\n    t.bigint \"team_id\"\n    t.index [\"team_id\"], name: \"index_users_on_team_id\"\n    t.index [\"confirmation_token\"], name: \"index_users_on_confirmation_token\", unique: true\n    t.index [\"email\"], name: \"index_users_on_email\", unique: true\n    t.index [\"reset_password_token\"], name: \"index_users_on_reset_password_token\", unique: true\nend\n</code></pre>\n\n<p><strong>team.rb</strong></p>\n\n<pre><code>class Team &lt; ApplicationRecord\n  has_many :users, class_name: \"User\"  \nend\n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>   devise_for :users, path: 'users' , controllers: { sessions: \"users/sessions\", confirmations: 'users/confirmations', registrations: 'users/registrations' } \n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1542826891, "post_id": 53418354, "comment_id": 93711925, "body": "Unrelated, but canonical Ruby code uses <code>_</code> to separate words in variable names, e.g., <code>team_name</code> or <code>ten_cent_beer_night</code>. Please either use that (preferred) or <i>something</i> to avoid word smashes."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1542830140, "post_id": 53418354, "comment_id": 93713437, "body": "<code>gets</code> and <code>chomp</code> returns strings, so <code>to_s</code> is redundant."}], "answers": [{"comments": [{"owner": {"reputation": 1761, "user_id": 1015289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e07d153edaeac44c96faea415f09d09b?s=128&d=identicon&r=PG&f=1", "display_name": "Wayne Phipps", "link": "https://stackoverflow.com/users/1015289/wayne-phipps"}, "edited": false, "score": 0, "creation_date": 1542826911, "post_id": 53418877, "comment_id": 93711943, "body": "IO.readLines returns an array so I believe count would return the number of elements?"}, {"owner": {"reputation": 1521, "user_id": 1274846, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/048371ccb94bbd3aae9ac0ca20c0a31c?s=128&d=identicon&r=PG", "display_name": "Trinculo", "link": "https://stackoverflow.com/users/1274846/trinculo"}, "reply_to_user": {"reputation": 1761, "user_id": 1015289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e07d153edaeac44c96faea415f09d09b?s=128&d=identicon&r=PG&f=1", "display_name": "Wayne Phipps", "link": "https://stackoverflow.com/users/1015289/wayne-phipps"}, "edited": false, "score": 1, "creation_date": 1542827128, "post_id": 53418877, "comment_id": 93712068, "body": "@WaynePhipps - He calls &quot;.to_s&quot; on it so it comes back as a string representation of the Array."}, {"owner": {"reputation": 1761, "user_id": 1015289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e07d153edaeac44c96faea415f09d09b?s=128&d=identicon&r=PG&f=1", "display_name": "Wayne Phipps", "link": "https://stackoverflow.com/users/1015289/wayne-phipps"}, "edited": false, "score": 0, "creation_date": 1542827229, "post_id": 53418877, "comment_id": 93712118, "body": "well spotted, my bad"}, {"owner": {"reputation": 25, "user_id": 10626254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HIbw6.png?s=128&g=1", "display_name": "asdfsadf", "link": "https://stackoverflow.com/users/10626254/asdfsadf"}, "edited": false, "score": 1, "creation_date": 1542829079, "post_id": 53418877, "comment_id": 93712966, "body": "Thanks a ton, that did it."}], "tags": [], "owner": {"reputation": 1521, "user_id": 1274846, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/048371ccb94bbd3aae9ac0ca20c0a31c?s=128&d=identicon&r=PG", "display_name": "Trinculo", "link": "https://stackoverflow.com/users/1274846/trinculo"}, "is_accepted": true, "score": 1, "last_activity_date": 1542826824, "last_edit_date": 1542826824, "creation_date": 1542826718, "answer_id": 53418877, "question_id": 53418354, "link": "https://stackoverflow.com/questions/53418354/ruby-using-count-to-tally-instances-of-a-word-instead-of-its-component-letters/53418877#53418877", "title": "Ruby using count to tally instances of a word instead of its component letters", "body": "<p><code>count</code> counts the number of individual characters, not the instances of the string.</p>\n\n<p>Try:</p>\n\n<pre><code>wins = tencentbeernight.scan(teamname).length\n</code></pre>\n\n<p>This will use <code>teamname</code> as a <em>regular expression</em> and count the number of times it appears.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1542837678, "creation_date": 1542837678, "answer_id": 53421069, "question_id": 53418354, "link": "https://stackoverflow.com/questions/53418354/ruby-using-count-to-tally-instances-of-a-word-instead-of-its-component-letters/53421069#53421069", "title": "Ruby using count to tally instances of a word instead of its component letters", "body": "<p>Converting the array returned by <a href=\"http://ruby-doc.org/core-2.5.1/IO.html#method-c-readlines\" rel=\"nofollow noreferrer\">IO::readlines</a> to a string and then counting the number of times a string appears in that string can be made to work but it is not an approach that any experienced Rubiest would take.</p>\n\n<p>First, let's create a file <code>\"winners.txt\"</code>.</p>\n\n<pre><code>arr = [\"Raiders\", \"Bears\", \"bearskin rug\", \"Chargers\", \"my bugbears\", \"bears\"]\nstr = arr.join(\"\\n\")\n  #=&gt; \"Raiders\\nBears\\nbearskin rug\\nChargers\\nmy bugbears\\nbears\"\nfilename = \"winners.txt\"\nFile.write(filename, str)\n  #=&gt; 53 (characters written)\n</code></pre>\n\n<p>and get the name of the team:</p>\n\n<pre><code>team = gets.chomp\n  #=&gt; \"bears\"\n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.5.1/IO.html#method-c-write\" rel=\"nofollow noreferrer\">IO#write</a>.<sup>1</sup></p>\n\n<p>The approach advocated in the question and provided in another answer is as follows:</p>\n\n<pre><code>array = IO.readlines(filename)\n  #&gt; [\"Raiders\\n\", \"Bears\\n\", \"bearskin rug\\n\", \"Chargers\\n\", \"my bugbears\\n\", \"bears\"]\nstr = array.to_s\n  #=&gt; \"[\\\"Raiders\\\\n\\\", \\\"Bears\\\\n\\\", \\\"bearskin rug\\\\n\\\", \\\"Chargers\\\\n\\\", \\\"my bugbears\\\\n\\\", \\\"bears\\\"]\"\na = str.scan(team)\n  #=&gt; [\"bears\", \"bears\", \"bears\"]\na.size\n  #=&gt; 3\n</code></pre>\n\n<p>which is incorrect. We could get around those problems, but the more conventional approach is the following:</p>\n\n<pre><code>team = gets.downcase.chomp\n  #=&gt; \"bears\"\n\na = File.readlines(filename)\n  #=&gt; [\"raiders\\n\", \"bears\\n\", \"bearskin rug\\n\", \"chargers\\n\", \"my bugbears\\n\", \"bears\"]\na.count { |s| s.downcase.match?(/\\b#{team}\\b/) }\n  #=&gt; 2\n</code></pre>\n\n<p>which gives the correct answer, as <code>a[1]</code> and <code>a[-1]</code> (and only those elements) are matched. The regular expression reads, \"match a <a href=\"https://www.regular-expressions.info/wordboundaries.html\" rel=\"nofollow noreferrer\">word break</a> (<code>\\b</code>) following by the value of <code>team</code> followed by another word break\".</p>\n\n<p>We can improve on this however. There is no need to create the temporary array, <code>a</code>. Instead we use <a href=\"http://ruby-doc.org/core-2.5.1/IO.html#method-c-foreach\" rel=\"nofollow noreferrer\">IO::foreach</a>, which reads the file line-by-line and, when used without a block, returns an enumerator:</p>\n\n<pre><code>enum = File.foreach(filename)\n  #=&gt; #&lt;Enumerator: File:foreach(\"winners.txt\")&gt;\n</code></pre>\n\n<p>We can see the values that will be generated by <code>enum</code> by converting it to an array:</p>\n\n<pre><code>enum.to_a\n  #=&gt; [\"raiders\\n\", \"\\n\", \"bears\\n\", \"\\n\", \"bearskin rug\\n\", \"\\n\", \"chargers\\n\",\n  #    \"\\n\", \"my bugbears\\n\", \"\\n\", \"bears\\n\"]\n</code></pre>\n\n<p>Continuing,</p>\n\n<pre><code>enum.count { |s| s.downcase.match?(/\\b#{team}\\b/) }\n  #=&gt; 2\n</code></pre>\n\n<p>One would normally chain the two methods:</p>\n\n<pre><code>File.foreach(filename).count { |s| s.downcase.match?(/\\b#{team}\\b/) }\n  #= 2\n</code></pre>\n\n<p><sup>1 I've used <code>File</code> as the receiver for some methods that are defined in the class <code>IO</code>. That's commonly done and works because <code>File.superclass #=&gt; IO</code>.</sup></p>\n"}], "owner": {"reputation": 25, "user_id": 10626254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HIbw6.png?s=128&g=1", "display_name": "asdfsadf", "link": "https://stackoverflow.com/users/10626254/asdfsadf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 53418877, "answer_count": 2, "score": 1, "last_activity_date": 1542837678, "creation_date": 1542824600, "last_edit_date": 1542826845, "question_id": 53418354, "link": "https://stackoverflow.com/questions/53418354/ruby-using-count-to-tally-instances-of-a-word-instead-of-its-component-letters", "title": "Ruby using count to tally instances of a word instead of its component letters", "body": "<p>I'm trying to tally up the number of wins a team has, but my code has it counting the instances of each individual letter in the team's name.</p>\n\n<pre><code>wins = 0  \n\nputs \"Please enter a team name to check\"   \n\nteamname = gets.chomp.to_s\n\ntencentbeernight = IO.readlines(\"winners.txt\").to_s\n\nwins = tencentbeernight.count(teamname)\n\nprintf \"The %2s have won %2i times\" % [teamname, wins]\n</code></pre>\n\n<p>How do I get it to count the name of the team?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "is_accepted": true, "score": 2, "last_activity_date": 1542826752, "last_edit_date": 1542826752, "creation_date": 1542826061, "answer_id": 53418719, "question_id": 53418008, "link": "https://stackoverflow.com/questions/53418008/build-a-new-array-of-hash-from-multiple-array-of-hashes/53418719#53418719", "title": "build a new array of hash from multiple array of hashes", "body": "<p>Using</p>\n\n<pre><code>def merge_by(a,b, key)\n  (a+b).group_by { |h| h[key] }\n       .each_value.map { |arr| arr.inject(:merge) }\nend\n\nmerge_by(\n  merge_by(customer_mapping, customer_with_products, :customer_order_id),\n  product_mapping,\n  :product_order_id\n).select { |h| h[:product_id] }.map { |h| h.slice(:product_id, :customer_id) }\n\n#=&gt;[{:product_id=&gt;\"j\", :customer_id=&gt;\"a\"},\n#   {:product_id=&gt;\"k\", :customer_id=&gt;\"b\"},\n#   {:product_id=&gt;\"l\", :customer_id=&gt;\"c\"}]\n</code></pre>\n\n<p>Definitely not the cleanest solution, if your initial arrays come from SQL queries, I think those queries could be modified to aggregate your data properly.</p>\n\n<pre><code>merge_by(customer_mapping, customer_with_products, :customer_order_id)\n# =&gt; [{:customer_id=&gt;\"a\", :customer_order_id=&gt;\"g1\", :product_order_id=&gt;\"a1\"},\n#     {:customer_id=&gt;\"b\", :customer_order_id=&gt;\"g2\", :product_order_id=&gt;\"a2\"},\n#     {:customer_id=&gt;\"c\", :customer_order_id=&gt;\"g3\", :product_order_id=&gt;\"a3\"},\n#     {:customer_id=&gt;\"d\", :customer_order_id=&gt;\"g4\", :product_order_id=&gt;\"a4\"},\n#     {:customer_id=&gt;\"e\", :customer_order_id=&gt;\"g5\", :product_order_id=&gt;\"a5\"}]\n</code></pre>\n\n<p>Then merge it similarly with your last array and cleanup the result selecting only the elements for which <code>:product_id</code> was found, slicing wanted keys.</p>\n\n<p>Alternatively, a much more readable solution, depending on your array sizes might be slower as it keeps iterating over the hashes:</p>\n\n<pre><code>product_mapping.map do |hc| \n  b_match = customer_with_products.detect { |hb| hb[:product_order_id] == hc[:product_order_id] }\n  a_match = customer_mapping.detect { |ha| ha[:customer_order_id] == b_match[:customer_order_id] }\n  [hc, a_match, b_match].inject(:merge)\nend.map { |h| h.slice(:product_id, :customer_id) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 308, "user_id": 7945232, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BWX0S.jpg?s=128&g=1", "display_name": "MrCodeX", "link": "https://stackoverflow.com/users/7945232/mrcodex"}, "is_accepted": false, "score": 1, "last_activity_date": 1542828945, "last_edit_date": 1542828945, "creation_date": 1542828036, "answer_id": 53419170, "question_id": 53418008, "link": "https://stackoverflow.com/questions/53418008/build-a-new-array-of-hash-from-multiple-array-of-hashes/53419170#53419170", "title": "build a new array of hash from multiple array of hashes", "body": "<p>Following your handling of the problem the solution would be the following:</p>\n\n<pre><code>result_hash_array = product_mapping.map do |product_mapping_entry|\n        customer_receipt = customer_with_products.find do |customer_with_products_entry|\n            product_mapping_entry[:product_order_id] == customer_with_products_entry[:product_order_id]\n        end\n        customer_id = customer_mapping.find do |customer_mapping_entry|\n            customer_receipt[:customer_order_id] == customer_mapping_entry[:customer_order_id]\n        end[:customer_id]\n        {product_id: product_mapping_entry[:product_id], customer_id: customer_id}\nend\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>results_hash_array =&gt; [{:product_id=&gt;\"j\", :customer_id=&gt;\"a\"},\n                       {:product_id=&gt;\"k\", :customer_id=&gt;\"b\"},\n                       {:product_id=&gt;\"l\", :customer_id=&gt;\"c\"}]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1542870835, "last_edit_date": 1542870835, "creation_date": 1542829618, "answer_id": 53419507, "question_id": 53418008, "link": "https://stackoverflow.com/questions/53418008/build-a-new-array-of-hash-from-multiple-array-of-hashes/53419507#53419507", "title": "build a new array of hash from multiple array of hashes", "body": "<p>Other option, starting from <code>customer_mapping</code>, one liner (but quite wide):</p>\n\n<pre><code>customer_mapping.map { |e| {customer_id: e[:customer_id], product_id: (product_mapping.detect { |k| k[:product_order_id] == (customer_with_products.detect{ |h| h[:customer_order_id] == e[:customer_order_id] } || {} )[:product_order_id] } || {} )[:product_id]  } }\n\n#=&gt; [{:customer_id=&gt;\"a\", :product_id=&gt;\"j\"},\n#    {:customer_id=&gt;\"b\", :product_id=&gt;\"k\"},\n#    {:customer_id=&gt;\"c\", :product_id=&gt;\"l\"},\n#    {:customer_id=&gt;\"d\", :product_id=&gt;nil},\n#    {:customer_id=&gt;\"e\", :product_id=&gt;nil}]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1542876788, "last_edit_date": 1542876788, "creation_date": 1542876459, "answer_id": 53426967, "question_id": 53418008, "link": "https://stackoverflow.com/questions/53418008/build-a-new-array-of-hash-from-multiple-array-of-hashes/53426967#53426967", "title": "build a new array of hash from multiple array of hashes", "body": "<pre><code>cust_order_id_to_cust_id =\n  customer_mapping.each_with_object({}) do |g,h|\n    h[g[:customer_order_id]] = g[:customer_id]\n  end\n  #=&gt; {\"g1\"=&gt;\"a\", \"g2\"=&gt;\"b\", \"g3\"=&gt;\"c\", \"g4\"=&gt;\"d\", \"g5\"=&gt;\"e\"}\n\nprod_order_id_to_cust_order_id =\n  customer_with_products.each_with_object({}) do |g,h|\n    h[g[:product_order_id]] = g[:customer_order_id]\n  end\n  #=&gt; {\"a1\"=&gt;\"g1\", \"a2\"=&gt;\"g2\", \"a3\"=&gt;\"g3\", \"a4\"=&gt;\"g4\", \"a5\"=&gt;\"g5\"}\n\nproduct_mapping.map do |h|\n  { product_id: h[:product_id], customer_id: \n    cust_order_id_to_cust_id[prod_order_id_to_cust_order_id[h[:product_order_id]]] }\nend\n  #=&gt; [{:product_id=&gt;\"j\", :customer_id=&gt;\"a\"},\n  #    {:product_id=&gt;\"k\", :customer_id=&gt;\"b\"},\n  #    {:product_id=&gt;\"l\", :customer_id=&gt;\"c\"}]\n</code></pre>\n\n<p>This formulation is particularly easy to test. (It's so straightforward that no debugging was needed).</p>\n"}, {"tags": [], "owner": {"reputation": 6256, "user_id": 1050480, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/u3rFw.jpg?s=128&g=1", "display_name": "SG 86", "link": "https://stackoverflow.com/users/1050480/sg-86"}, "is_accepted": false, "score": 0, "last_activity_date": 1542887352, "creation_date": 1542887352, "answer_id": 53430370, "question_id": 53418008, "link": "https://stackoverflow.com/questions/53418008/build-a-new-array-of-hash-from-multiple-array-of-hashes/53430370#53430370", "title": "build a new array of hash from multiple array of hashes", "body": "<p>I would recommended to rather take a longer but more readable solution which you also understand in some months from now by looking at it. Use full names for the hash keys instead of hiding them behind <code>k, v</code> for more complexe lookups (maybe its just my personal preference).</p>\n\n<p>I would suggest somethink like:</p>\n\n<pre><code>result = product_mapping.map do |mapping|\n  customer_id = customer_mapping.find do |hash|\n    hash[:customer_order_id] == customer_with_products.find do |hash|\n      hash[:product_order_id] == mapping[:product_order_id]\n    end[:customer_order_id]\n  end[:customer_id]\n\n  { product_id: mapping[:product_id], customer_id: customer_id }\nend\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 10687200, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-2KnII724uNs/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hdvEANsdT_ypF3h29yVZiAlyr6UA/mo/photo.jpg?sz=128", "display_name": "jose miliano", "link": "https://stackoverflow.com/users/10687200/jose-miliano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 53418719, "answer_count": 5, "score": 0, "last_activity_date": 1542887352, "creation_date": 1542823051, "question_id": 53418008, "link": "https://stackoverflow.com/questions/53418008/build-a-new-array-of-hash-from-multiple-array-of-hashes", "title": "build a new array of hash from multiple array of hashes", "body": "<p>I have following three array of hashes.</p>\n\n<pre><code>customer_mapping = [\n      {:customer_id=&gt;\"a\", :customer_order_id=&gt;\"g1\"},\n      {:customer_id=&gt;\"b\", :customer_order_id=&gt;\"g2\"},\n      {:customer_id=&gt;\"c\", :customer_order_id=&gt;\"g3\"},\n      {:customer_id=&gt;\"d\", :customer_order_id=&gt;\"g4\"},\n      {:customer_id=&gt;\"e\", :customer_order_id=&gt;\"g5\"}\n    ]\n\ncustomer_with_products = [\n      {:customer_order_id=&gt;\"g1\", :product_order_id=&gt;\"a1\"},\n      {:customer_order_id=&gt;\"g2\", :product_order_id=&gt;\"a2\"},\n      {:customer_order_id=&gt;\"g3\", :product_order_id=&gt;\"a3\"},\n      {:customer_order_id=&gt;\"g4\", :product_order_id=&gt;\"a4\"},\n      {:customer_order_id=&gt;\"g5\", :product_order_id=&gt;\"a5\"}\n    ]\n\nproduct_mapping = [\n    {:product_id=&gt;\"j\", :product_order_id=&gt;\"a1\"},\n    {:product_id=&gt;\"k\", :product_order_id=&gt;\"a2\"},\n    {:product_id=&gt;\"l\", :product_order_id=&gt;\"a3\"}\n  ]\n</code></pre>\n\n<p>What i want is a new hash with only customer_id and product_id</p>\n\n<pre><code>{:product_id=&gt;\"j\", :customer_id=&gt;\"a\"},\n{:product_id=&gt;\"k\", :customer_id=&gt;\"b\"},\n{:product_id=&gt;\"l\", :customer_id=&gt;\"c\"}\n</code></pre>\n\n<p>I tried to loop over product_mapping and select the customer_order_id that match product_order_id in customer_with_products and then thought of looping over customer_mapping  but not able to get desired output from the first step.</p>\n\n<p>How can i achieve this?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1542823032, "post_id": 53417899, "comment_id": 93710212, "body": "What is the issue with that query? Is your goal &quot;All Users&quot; and just load the tasks in a given range? (Outer Join with condition) If so maybe just execute 2 queries (one for users and one for tasks in the date range) then just unify them in the UI. What rails version are you using as well as rails 5 offers <code>left_joins</code> as well as <code>or</code> syntax options?"}, {"owner": {"reputation": 43, "user_id": 5870350, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3OwrH.jpg?s=128&g=1", "display_name": "Dale Palmer", "link": "https://stackoverflow.com/users/5870350/dale-palmer"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1542825392, "post_id": 53417899, "comment_id": 93711199, "body": "The issue with the query is I only get the users with tasks within the date range, when my UI expects a list of all users.  As for version, I am using rails 5.   As for unifying them on the UI that&#39;s what I am currently trying. I thought it would prove difficult to line up the tasks with the correct user, when I first considered this route."}], "answers": [{"tags": [], "owner": {"reputation": 159, "user_id": 9722060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fd6af43aa5acad3d7111cc6be4d835bb?s=128&d=identicon&r=PG&f=1", "display_name": "Stefan Rendevski", "link": "https://stackoverflow.com/users/9722060/stefan-rendevski"}, "is_accepted": false, "score": 1, "last_activity_date": 1542885827, "creation_date": 1542885827, "answer_id": 53429888, "question_id": 53417899, "link": "https://stackoverflow.com/questions/53417899/rails-has-many-with-query-get-all-nested-and-parent-object/53429888#53429888", "title": "Rails - Has many, with query get all nested and parent object", "body": "<p>What you need is a left outer join. However, if you have a <code>WHERE</code> clause, this will filter away results for which the join fails, see <a href=\"https://stackoverflow.com/questions/4752455/left-join-with-where-clause]\">Left Join With Where Clause</a>.</p>\n\n<p>You need to specify the condition as part of the <code>JOIN</code> clause, so something along these lines:</p>\n\n<pre><code>User.filter(params.slice(:project_ids, :email, :id))\n    .joins(\"LEFT OUTER JOINS tasks ON tasks.user_id = users.id AND \n            tasks.end_date BETWEEN :week_start AND :week_end OR \n            tasks.start_date BETWEEN :week_start AND \n            :week_end\", week_start: week_start, week_end: week_end\n    .includes(:tasks).order(:name)\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 5870350, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3OwrH.jpg?s=128&g=1", "display_name": "Dale Palmer", "link": "https://stackoverflow.com/users/5870350/dale-palmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1542885827, "creation_date": 1542822593, "question_id": 53417899, "link": "https://stackoverflow.com/questions/53417899/rails-has-many-with-query-get-all-nested-and-parent-object", "title": "Rails - Has many, with query get all nested and parent object", "body": "<p>I have been working on an scheduling app, and running into an issue with finding a way to efficiently get specific records. </p>\n\n<p>Here are the models in question.</p>\n\n<pre><code>class Task &lt; ApplicationRecord\n belongs_to :user, optional: true\n belongs_to :project, optional: true\n belongs_to :project_schedule, optional: true\n belongs_to :user_schedule, optional: true\n\nclass User &lt; ApplicationRecord\n include Filterable\n validates :email, presence: true\n validates :email, uniqueness: true\n has_many :tasks \n</code></pre>\n\n<p>What the front end expects is a json of all users, with all tasks nested within them. This has become too cumbersome to load that many tasks and I was attempting to specify a date range to the tasks while still getting all users.</p>\n\n<p>So this seems more difficult that I originally expected. I can get all users efficiently, all tasks within a date range, and all users with tasks within a given date range with the tasks included. But getting all users with the tasks nested within a given date range has evaded me.</p>\n\n<p>What I've tried</p>\n\n<pre><code>User.filter(params.slice(:project_ids, :email, :id))\n .includes(:tasks).where('((tasks.end_date BETWEEN ? AND ?)\n OR (tasks.start_date BETWEEN ? AND ?))',\n week_start, week_end, week_start, week_end)\n .references(:tasks).order(:name)\n</code></pre>\n\n<p>I've also tried merging all users and all users with tasks within the range to no avail.</p>\n\n<p>I feel like key is raw SQL but I couldn't wrap my head around the query yesterday.</p>\n\n<p>Any insight would be helpful and appreciated. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "ruby-on-rails-5", "rspec-rails"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1542820712, "post_id": 53417425, "comment_id": 93709118, "body": "you should have some stacktrace pointing to the file an line that produces the error"}, {"owner": {"reputation": 446, "user_id": 1743972, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SiOLK.jpg?s=128&g=1", "display_name": "Mohamed Sami", "link": "https://stackoverflow.com/users/1743972/mohamed-sami"}, "reply_to_user": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1542820830, "post_id": 53417425, "comment_id": 93709184, "body": "When I run individual spec for the test cases, it is successful, the main issue when I run all test cases together actually"}, {"owner": {"reputation": 446, "user_id": 1743972, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SiOLK.jpg?s=128&g=1", "display_name": "Mohamed Sami", "link": "https://stackoverflow.com/users/1743972/mohamed-sami"}, "reply_to_user": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1542821343, "post_id": 53417425, "comment_id": 93709425, "body": "@arieljuod do you know what could be the cause for this?"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1542822615, "post_id": 53417425, "comment_id": 93710022, "body": "the error should have a staktrace pointing to a file and line number where it&#39;s trying to use that app variable, you are not showing the full error, just the error message, so no idea where&#39;s that comming from, show the full error with stacktrace and all"}, {"owner": {"reputation": 446, "user_id": 1743972, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SiOLK.jpg?s=128&g=1", "display_name": "Mohamed Sami", "link": "https://stackoverflow.com/users/1743972/mohamed-sami"}, "reply_to_user": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1542822837, "post_id": 53417425, "comment_id": 93710128, "body": "@arieljuod, I added the full trace in the question"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1542822986, "post_id": 53417425, "comment_id": 93710197, "body": "@MohamedSami The error points to: <code>app&#47;mailers&#47;devise&#47;mailer.rb:12</code>. What&#39;s in that file? What&#39;s on line 12? And the problem was originally triggered from <code>spec&#47;controllers&#47;answers_controller_spec.rb:150</code>. What is this test? What&#39;s on line 150?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1542823106, "post_id": 53417425, "comment_id": 93710256, "body": "If the test passes in isolation, but not when you run the whole file, you could try debugging further with <code>rspec --bisect</code>."}, {"owner": {"reputation": 446, "user_id": 1743972, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SiOLK.jpg?s=128&g=1", "display_name": "Mohamed Sami", "link": "https://stackoverflow.com/users/1743972/mohamed-sami"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1542823108, "post_id": 53417425, "comment_id": 93710258, "body": "@TomLord app/mailers/devise/mailer.rb:12 is the normal devise mailer,"}, {"owner": {"reputation": 446, "user_id": 1743972, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SiOLK.jpg?s=128&g=1", "display_name": "Mohamed Sami", "link": "https://stackoverflow.com/users/1743972/mohamed-sami"}, "edited": false, "score": 0, "creation_date": 1542823165, "post_id": 53417425, "comment_id": 93710290, "body": "The error is repeated actually with every single test case, this is only one of the examples"}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1542823290, "post_id": 53417425, "comment_id": 93710349, "body": "hmmm, I&#39;m guessing that you used some devise command to copy the gem&#39;s mailer class into your app folder and maybe you have an outdated version, check if you have the mailer inside app/mailers/devise and if it&#39;s differente from the one in the gem"}, {"owner": {"reputation": 446, "user_id": 1743972, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SiOLK.jpg?s=128&g=1", "display_name": "Mohamed Sami", "link": "https://stackoverflow.com/users/1743972/mohamed-sami"}, "reply_to_user": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1542823478, "post_id": 53417425, "comment_id": 93710440, "body": "@arieljuod That is true, I have the mailer inside app/mailers/devise and I checked the mailer version and it is the same only I added few lines       headers &quot;X-SMTPAPI&quot; =&gt; {&quot;category&quot;=&gt; &quot;Confirmation&quot;}.to_json       opts[:cc] = &#39;email@here&#39;"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1542823529, "post_id": 53417425, "comment_id": 93710460, "body": "<a href=\"https://github.com/rack-test/rack-test/blob/6c07bf53adf4a4082e206561f5b9b43142fdc821/lib/rack/test/methods.rb#L5-L18\" rel=\"nofollow noreferrer\">github.com/rack-test/rack-test/blob/&hellip;</a>"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1542823774, "post_id": 53417425, "comment_id": 93710545, "body": "...So the question comes back, for the third time, to: Can you please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? It looks like you&#39;re doing something &quot;wrong&quot; in the tests, like trying to use <code>rack-test</code> without defining an <code>app</code>. But I don&#39;t know what&#39;s wrong, because you haven&#39;t shared any code."}, {"owner": {"reputation": 446, "user_id": 1743972, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SiOLK.jpg?s=128&g=1", "display_name": "Mohamed Sami", "link": "https://stackoverflow.com/users/1743972/mohamed-sami"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1542824561, "post_id": 53417425, "comment_id": 93710867, "body": "@TomLord I have shared the trace error for that. But can you guide me more, what do you mean by defining the app? I have the rspec_helper.rb which has the configuration as the normal case."}, {"owner": {"reputation": 446, "user_id": 1743972, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SiOLK.jpg?s=128&g=1", "display_name": "Mohamed Sami", "link": "https://stackoverflow.com/users/1743972/mohamed-sami"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1542833023, "post_id": 53417425, "comment_id": 93714649, "body": "@TomLord, I added a new trace, what do you think?"}, {"owner": {"reputation": 446, "user_id": 1743972, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SiOLK.jpg?s=128&g=1", "display_name": "Mohamed Sami", "link": "https://stackoverflow.com/users/1743972/mohamed-sami"}, "reply_to_user": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1542833044, "post_id": 53417425, "comment_id": 93714658, "body": "@arieljuod, I added a new trace, what do you think?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1542834209, "post_id": 53417425, "comment_id": 93715161, "body": "@MohamedSami So the error also stems from the <code>spec&#47;mailers&#47;user_mailer_messages_spec.rb</code> test. OK... But how can I <i>reproduce</i> the problem? What code is in that file? An error trace is helpful to see what triggers it, but that file could contain literally anything, for all I know."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1542834370, "post_id": 53417425, "comment_id": 93715229, "body": "Try to delete everything you can from that file, and from <code>rails_helper.rb</code>/<code>spec_helper.rb</code>, whilst still reproducing the error. Show a <b>minimal</b> test example that triggers it. Most likely, by the time you&#39;ve actually cut it down to a minimal example, it should be quite obvious what the likely culprit is. Apparently it&#39;s got something to do with your use of <code>rack-test</code>, for starters."}, {"owner": {"reputation": 446, "user_id": 1743972, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SiOLK.jpg?s=128&g=1", "display_name": "Mohamed Sami", "link": "https://stackoverflow.com/users/1743972/mohamed-sami"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1542834504, "post_id": 53417425, "comment_id": 93715287, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/184055/discussion-between-mohamed-sami-and-tom-lord\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 446, "user_id": 1743972, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SiOLK.jpg?s=128&g=1", "display_name": "Mohamed Sami", "link": "https://stackoverflow.com/users/1743972/mohamed-sami"}, "is_accepted": true, "score": 4, "last_activity_date": 1543014970, "creation_date": 1543014970, "answer_id": 53453786, "question_id": 53417425, "link": "https://stackoverflow.com/questions/53417425/nameerror-undefined-local-variable-or-method-app-for-rails-5-1-6-upgraded/53453786#53453786", "title": "NameError: undefined local variable or method `app&#39; for - Rails 5.1.6 upgraded", "body": "<p>It seems that the issue was one of the controllers' files, I was including a depreciated Rack::Test::Methods which made the conflict. If you experience a similar issue, remove it in rails 5.1</p>\n\n<pre><code>include Rack::Test::Methods\n</code></pre>\n"}], "owner": {"reputation": 446, "user_id": 1743972, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SiOLK.jpg?s=128&g=1", "display_name": "Mohamed Sami", "link": "https://stackoverflow.com/users/1743972/mohamed-sami"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 569, "favorite_count": 0, "accepted_answer_id": 53453786, "answer_count": 1, "score": 2, "last_activity_date": 1543014970, "creation_date": 1542820636, "last_edit_date": 1542832960, "question_id": 53417425, "link": "https://stackoverflow.com/questions/53417425/nameerror-undefined-local-variable-or-method-app-for-rails-5-1-6-upgraded", "title": "NameError: undefined local variable or method `app&#39; for - Rails 5.1.6 upgraded", "body": "<p>I got this error in rspec while I do not have any variable or method with that name, I even searched all over the project. This happens when I run Rspec for all the test cases, while individual test cases work fine.</p>\n\n<p>I was upgrading the ruby on rails version from ruby 2.3.3 rails 4.1.6. and I upgraded the version one by one, and I have all test passed after reaching rails 5.1.6 with ruby 2.4.5 I got this error. while all the tests also worked normally with the same ruby version and rails 5.0.7</p>\n\n<p>Please let me know if you have any idea how to solve this.</p>\n\n<p>I rebuild the spec_helper.rb again using bin/rspec --init and I added the dependencies and I have a longer trace now</p>\n\n<pre><code>NameError:\n  undefined local variable or method `app' for #&lt;Devise::Mailer:0x00007fd3271928f8&gt;\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/rack-test-1.1.0/lib/rack/test/methods.rb:30:in `build_rack_mock_session'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/rack-test-1.1.0/lib/rack/test/methods.rb:26:in `rack_mock_session'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/rack-test-1.1.0/lib/rack/test/methods.rb:41:in `build_rack_test_session'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/rack-test-1.1.0/lib/rack/test/methods.rb:37:in `rack_test_session'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/rack-test-1.1.0/lib/rack/test/methods.rb:45:in `current_session'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionview-5.1.6/lib/action_view/helpers/controller_helper.rb:18:in `assign_controller'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionview-5.1.6/lib/action_view/base.rb:211:in `initialize'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionpack-5.1.6/lib/action_dispatch/routing/url_for.rb:106:in `initialize'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionview-5.1.6/lib/action_view/rendering.rb:72:in `new'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionview-5.1.6/lib/action_view/rendering.rb:72:in `view_context'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionview-5.1.6/lib/action_view/rendering.rb:97:in `_render_template'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionview-5.1.6/lib/action_view/rendering.rb:83:in `render_to_body'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionpack-5.1.6/lib/abstract_controller/rendering.rb:24:in `render'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionmailer-5.1.6/lib/action_mailer/base.rb:945:in `block in collect_responses_from_templates'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionmailer-5.1.6/lib/action_mailer/base.rb:942:in `each'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionmailer-5.1.6/lib/action_mailer/base.rb:942:in `each'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionmailer-5.1.6/lib/action_mailer/base.rb:942:in `map'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionmailer-5.1.6/lib/action_mailer/base.rb:942:in `collect_responses_from_templates'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionmailer-5.1.6/lib/action_mailer/base.rb:927:in `collect_responses'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionmailer-5.1.6/lib/action_mailer/base.rb:830:in `mail'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/devise-4.5.0/lib/devise/mailers/helpers.rb:19:in `devise_mail'\n# ./app/mailers/devise/mailer.rb:12:in `confirmation_instructions'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionpack-5.1.6/lib/abstract_controller/base.rb:186:in `process_action'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionpack-5.1.6/lib/abstract_controller/callbacks.rb:20:in `block in process_action'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:97:in `run_callbacks'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionpack-5.1.6/lib/abstract_controller/callbacks.rb:19:in `process_action'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionpack-5.1.6/lib/abstract_controller/base.rb:124:in `process'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionmailer-5.1.6/lib/action_mailer/rescuable.rb:23:in `block in process'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionmailer-5.1.6/lib/action_mailer/rescuable.rb:15:in `handle_exceptions'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionmailer-5.1.6/lib/action_mailer/rescuable.rb:22:in `process'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionview-5.1.6/lib/action_view/rendering.rb:30:in `process'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionmailer-5.1.6/lib/action_mailer/base.rb:609:in `block in process'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activesupport-5.1.6/lib/active_support/notifications.rb:166:in `block in instrument'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activesupport-5.1.6/lib/active_support/notifications/instrumenter.rb:21:in `instrument'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activesupport-5.1.6/lib/active_support/notifications.rb:166:in `instrument'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionmailer-5.1.6/lib/action_mailer/base.rb:608:in `process'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionmailer-5.1.6/lib/action_mailer/message_delivery.rb:105:in `block in processed_mailer'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionmailer-5.1.6/lib/action_mailer/message_delivery.rb:104:in `tap'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionmailer-5.1.6/lib/action_mailer/message_delivery.rb:104:in `processed_mailer'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/actionmailer-5.1.6/lib/action_mailer/message_delivery.rb:95:in `deliver_now'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/devise-4.5.0/lib/devise/models/authenticatable.rb:200:in `send_devise_notification'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/devise-4.5.0/lib/devise/models/confirmable.rb:121:in `send_confirmation_instructions'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/devise-4.5.0/lib/devise/models/confirmable.rb:183:in `send_on_create_confirmation_instructions'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:413:in `block in make_lambda'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:260:in `block in conditional'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:511:in `block in invoke_after'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:511:in `each'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:511:in `invoke_after'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:132:in `run_callbacks'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activesupport-5.1.6/lib/active_support/callbacks.rb:827:in `_run_commit_callbacks'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activerecord-5.1.6/lib/active_record/transactions.rb:343:in `committed!'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activerecord-5.1.6/lib/active_record/connection_adapters/abstract/transaction.rb:86:in `commit_records'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activerecord-5.1.6/lib/active_record/connection_adapters/abstract/transaction.rb:178:in `block in commit_transaction'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activerecord-5.1.6/lib/active_record/connection_adapters/abstract/transaction.rb:168:in `commit_transaction'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activerecord-5.1.6/lib/active_record/connection_adapters/abstract/transaction.rb:207:in `block in within_new_transaction'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activerecord-5.1.6/lib/active_record/connection_adapters/abstract/transaction.rb:191:in `within_new_transaction'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activerecord-5.1.6/lib/active_record/connection_adapters/abstract/database_statements.rb:235:in `transaction'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activerecord-5.1.6/lib/active_record/transactions.rb:210:in `transaction'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activerecord-5.1.6/lib/active_record/transactions.rb:381:in `with_transaction_returning_status'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activerecord-5.1.6/lib/active_record/transactions.rb:308:in `block in save'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activerecord-5.1.6/lib/active_record/transactions.rb:323:in `rollback_active_record_state!'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activerecord-5.1.6/lib/active_record/transactions.rb:307:in `save'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activerecord-5.1.6/lib/active_record/suppressor.rb:42:in `save'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activerecord-5.1.6/lib/active_record/persistence.rb:34:in `create'\n# ./spec/mailers/user_mailer_messages_spec.rb:91:in `block (2 levels) in &lt;top (required)&gt;'\n# ./spec/mailers/user_mailer_messages_spec.rb:89:in `block in &lt;top (required)&gt;'\n# ./spec/mailers/user_mailer_messages_spec.rb:3:in `&lt;top (required)&gt;'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:286:in `load'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:286:in `block in load'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:258:in `load_dependency'\n# /Users/melsatar/.rvm/gems/ruby-2.4.5/gems/activesupport-5.1.6/lib/active_support/dependencies.rb:286:in `load'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "carrierwave", "rails-admin"], "comments": [{"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1548349404, "post_id": 53416886, "comment_id": 95519093, "body": "Could you edit your question to include this view please: <code>rails_admin&#47;main&#47;edit.html.haml</code>?"}, {"owner": {"reputation": 179, "user_id": 9534222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AfySY.jpg?s=128&g=1", "display_name": "Felipe Marcon", "link": "https://stackoverflow.com/users/9534222/felipe-marcon"}, "reply_to_user": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1549295728, "post_id": 53416886, "comment_id": 95842416, "body": "@SRack I don&#39;t have this file on my project :/ RailsAdmin and CarrierWave handle this."}], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 1956092, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50d28cbfbd7fd899334c400206d0dd06?s=128&d=identicon&r=PG", "display_name": "user1956092", "link": "https://stackoverflow.com/users/1956092/user1956092"}, "is_accepted": true, "score": 2, "last_activity_date": 1549911151, "creation_date": 1549911151, "answer_id": 54637230, "question_id": 53416886, "link": "https://stackoverflow.com/questions/53416886/rails-admin-undefined-method-for-using-carrierwave-multiple-upload/54637230#54637230", "title": "Rails Admin - undefined method `&#39; for using Carrierwave multiple upload", "body": "<p>I had same problem and add this methods into model helped me:</p>\n\n<pre><code>  attr_accessor :delete_images\n  after_validation do\n    uploaders = images.delete_if do |uploader|\n      if Array(delete_images).include?(uploader.file.identifier)\n        uploader.remove!\n        true\n      end\n    end\n    write_attribute(:images, uploaders.map { |uploader| uploader.file.identifier })\n  end\n\n  def images=(files)\n    appended = files.map do |file|\n      uploader = _mounter(:images).blank_uploader\n      uploader.cache! file\n      uploader\n    end\n    super(images + appended)\n  end\n</code></pre>\n"}], "owner": {"reputation": 179, "user_id": 9534222, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AfySY.jpg?s=128&g=1", "display_name": "Felipe Marcon", "link": "https://stackoverflow.com/users/9534222/felipe-marcon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 337, "favorite_count": 0, "accepted_answer_id": 54637230, "answer_count": 1, "score": 1, "last_activity_date": 1549911151, "creation_date": 1542818865, "question_id": 53416886, "link": "https://stackoverflow.com/questions/53416886/rails-admin-undefined-method-for-using-carrierwave-multiple-upload", "title": "Rails Admin - undefined method `&#39; for using Carrierwave multiple upload", "body": "<p>I can't edit some records in Rails Admin after do a multiple files upload using Carrierwave.</p>\n\n<p>I guess that did the correct config, when I upload the files everything goes well, but if I try edit after save the record that error happens:</p>\n\n<p>.log:</p>\n\n<pre><code>14:33:56 web.1    | Started POST \"/admin/__better_errors/563c2613b62e459f/variables\" for 127.0.0.1 at 2018-11-21 14:33:56 -0200\n14:33:56 web.1    |   Tag Load (0.6ms)  SELECT  \"tags\".* FROM \"tags\" INNER JOIN \"projects_tags\" ON \"tags\".\"id\" = \"projects_tags\".\"tag_id\" WHERE \"projects_tags\".\"project_id\" = $1 LIMIT $2  [[\"project_id\", 75],[\"LIMIT\", 11]]\n14:33:56 web.1    |   \u21b3 /Users/Atua/.rvm/gems/ruby-2.5.1@atua/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98\n14:34:50 web.1    | Started GET \"/admin/project/75/edit\" for 127.0.0.1 at 2018-11-21 14:34:50 -0200\n14:34:50 web.1    | Processing by RailsAdmin::MainController#edit as HTML\n14:34:50 web.1    |   Parameters: {\"model_name\"=&gt;\"project\", \"id\"=&gt;\"75\"}\n14:34:50 web.1    |   Admin Load (0.4ms)  SELECT  \"admins\".* FROM \"admins\" WHERE \"admins\".\"id\" = $1 ORDER BY \"admins\".\"id\" ASC LIMIT $2  [[\"id\", 1], [\"LIMIT\", 1]]\n14:34:50 web.1    |   \u21b3 config/initializers/rails_admin.rb:9\n14:34:50 web.1    |   Project Load (2.1ms)  SELECT  \"projects\".* FROM \"projects\" WHERE \"projects\".\"id\" = $1 ORDER BY \"projects\".\"id\" ASC LIMIT $2  [[\"id\", 75], [\"LIMIT\", 1]]\n14:34:50 web.1    |   \u21b3 /Users/Atua/.rvm/gems/ruby-2.5.1@atua/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98\n14:34:51 web.1    |   Rendering /Users/Atua/.rvm/gems/ruby-2.5.1@atua/gems/rails_admin-1.4.2/app/views/rails_admin/main/edit.html.haml within layouts/rails_admin/application\n14:34:51 web.1    |   Rendered /Users/Atua/.rvm/gems/ruby-2.5.1@atua/gems/rails_admin-1.4.2/app/views/rails_admin/main/_form_field.html.haml (3.8ms)\n14:34:51 web.1    |   Rendered /Users/Atua/.rvm/gems/ruby-2.5.1@atua/gems/rails_admin-1.4.2/app/views/rails_admin/main/_form_text.html.haml (31.4ms)\n14:34:51 web.1    |   Tag Load (0.5ms)  SELECT \"tags\".* FROM \"tags\" INNER JOIN \"projects_tags\" ON \"tags\".\"id\" = \"projects_tags\".\"tag_id\" WHERE \"projects_tags\".\"project_id\" = $1  [[\"project_id\", 75]]\n14:34:51 web.1    |   \u21b3 /Users/Atua/.rvm/gems/ruby-2.5.1@atua/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98\n14:34:51 web.1    |    (0.4ms)  SELECT COUNT(*) FROM \"tags\"\n14:34:51 web.1    |   \u21b3 /Users/Atua/.rvm/gems/ruby-2.5.1@atua/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98\n14:34:51 web.1    |   Tag Load (0.5ms)  SELECT \"tags\".* FROM \"tags\" ORDER BY tags.id desc\n14:34:51 web.1    |   \u21b3 /Users/Atua/.rvm/gems/ruby-2.5.1@atua/gems/activerecord-5.2.1/lib/active_record/log_subscriber.rb:98\n14:34:51 web.1    |   Rendered /Users/Atua/.rvm/gems/ruby-2.5.1@atua/gems/rails_admin-1.4.2/app/views/rails_admin/main/_form_filtering_multiselect.html.haml (22.4ms)\n14:34:51 web.1    |   Rendered /Users/Atua/.rvm/gems/ruby-2.5.1@atua/gems/rails_admin-1.4.2/app/views/rails_admin/main/_form_text.html.haml (0.4ms)\n14:34:51 web.1    |   Rendered /Users/Atua/.rvm/gems/ruby-2.5.1@atua/gems/rails_admin-1.4.2/app/views/rails_admin/main/_form_text.html.haml (0.4ms)\n14:34:51 web.1    |   Rendered /Users/Atua/.rvm/gems/ruby-2.5.1@atua/gems/rails_admin-1.4.2/app/views/rails_admin/main/_form_text.html.haml (0.4ms)\n14:34:51 web.1    |   Rendered /Users/Atua/.rvm/gems/ruby-2.5.1@atua/gems/rails_admin-1.4.2/app/views/rails_admin/main/_form_file_upload.html.haml (13.9ms)\n14:34:51 web.1    |   Rendered /Users/Atua/.rvm/gems/ruby-2.5.1@atua/gems/rails_admin-1.4.2/app/views/rails_admin/main/_form_multiple_file_upload.html.haml (45.1ms)\n14:34:51 web.1    |   Rendered /Users/Atua/.rvm/gems/ruby-2.5.1@atua/gems/rails_admin-1.4.2/app/views/rails_admin/main/edit.html.haml within layouts/rails_admin/application (623.9ms)\n14:34:51 web.1    | Completed 500 Internal Server Error in 800ms (ActiveRecord: 3.9ms)\n14:34:51 web.1    |\n14:34:51 web.1    |\n14:34:51 web.1    |\n14:34:51 web.1    | NoMethodError - undefined method `' for #&lt;Project:0x00007fb7cfa36900&gt;:\n14:34:51 web.1    |\n</code></pre>\n\n<p>rails_admin.rb:</p>\n\n<pre><code>config.model Project do\n    edit do\n      field :title\n      field :headline\n      field :images, :multiple_carrierwave\n    end\nend\n</code></pre>\n\n<p>ProjectImageUploader.rb</p>\n\n<pre><code>class ProjectImageUploader &lt; CarrierWave::Uploader::Base\n  include CarrierWave::MiniMagick\n  include CarrierWave::ImageOptimizer\n  process optimize: [{ quality: 85 }]\n  storage :file\n\n  version :normal do\n    process :efficient_conversion =&gt; [640, 960]\n  end\n\n  def store_dir\n    \"system/uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}\"\n  end\n\n  private\n    def efficient_conversion(width, height)\n      manipulate! do |img|\n        img.combine_options do |c|\n          c.fuzz        \"3%\"\n          c.trim\n          c.resize      \"#{width}x#{height}&gt;\"\n          c.resize      \"#{width}x#{height}&lt;\"\n        end\n        img\n      end\n    end\nend\n</code></pre>\n\n<p>Project model:</p>\n\n<pre><code>mount_uploaders :images, ProjectImageUploader\n</code></pre>\n"}, {"tags": ["html", "ruby", "string"], "comments": [{"owner": {"reputation": 830, "user_id": 642496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/182757c8d4baebc5eb960251d7b983f1?s=128&d=identicon&r=PG", "display_name": "hernanvicente", "link": "https://stackoverflow.com/users/642496/hernanvicente"}, "edited": false, "score": 0, "creation_date": 1542819650, "post_id": 53416827, "comment_id": 93708586, "body": "If your html tags are into files, you can posibly use your code editor, Visual Code have a find and replace tool, but if your html tags are saved into a database you will probably need to replace the tags from a script, Gsub is your frind. Check: <a href=\"https://stackoverflow.com/questions/18587022/ruby-regex-replace-tag-type\" title=\"ruby regex replace tag type\">stackoverflow.com/questions/18587022/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": true, "score": 2, "last_activity_date": 1542820256, "creation_date": 1542820256, "answer_id": 53417313, "question_id": 53416827, "link": "https://stackoverflow.com/questions/53416827/how-to-replace-all-html-tags-of-one-kind-with-another/53417313#53417313", "title": "How to replace all html tags of one kind with another", "body": "<p>You can make use <a href=\"https://ruby-doc.org/core-2.1.4/String.html#method-i-gsub\" rel=\"nofollow noreferrer\"><strong><code>gsub</code></strong></a> with block </p>\n\n<pre><code>string = \"&lt;p&gt;&lt;i&gt;Random stuff here...&lt;/i&gt;&lt;/p&gt;\"\n\nstring.gsub(/(&lt;\\/?)i(&gt;)/) { \"#{$1}em#{$2}\" }\n#=&gt; \"&lt;p&gt;&lt;em&gt;Random stuff here...&lt;/em&gt;&lt;/p&gt;\"\n</code></pre>\n\n<p>Explanation: </p>\n\n<p>Match an <code>i</code> html opening or closing tag and replace it with <code>em</code></p>\n"}], "owner": {"reputation": 75, "user_id": 3903418, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8022f3eb03eacb735062275212d2b57?s=128&d=identicon&r=PG&f=1", "display_name": "user3903418", "link": "https://stackoverflow.com/users/3903418/user3903418"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "closed_date": 1542864455, "accepted_answer_id": 53417313, "answer_count": 1, "score": 0, "last_activity_date": 1542864692, "creation_date": 1542818657, "last_edit_date": 1542864692, "question_id": 53416827, "link": "https://stackoverflow.com/questions/53416827/how-to-replace-all-html-tags-of-one-kind-with-another", "closed_reason": "Duplicate", "title": "How to replace all html tags of one kind with another", "body": "<p>I need to replace all HTML tags of one kind in a string with another, e.g., replace all <code>&lt;i&gt;</code> tags with <code>&lt;em&gt;</code> tag.</p>\n\n<p>What's the best way to effectively change:</p>\n\n<pre><code>\"&lt;p&gt;&lt;i&gt;Random stuff here...&lt;/i&gt;&lt;/p&gt;\"\n</code></pre>\n\n<p>to the following?</p>\n\n<pre><code>\"&lt;p&gt;&lt;em&gt;Random stuff here...&lt;/em&gt;&lt;/p&gt;\"\n</code></pre>\n\n<p>There are millions of such strings, so a solution taking complexity into account would be nice.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 4, "last_activity_date": 1542820400, "creation_date": 1542820400, "answer_id": 53417352, "question_id": 53416563, "link": "https://stackoverflow.com/questions/53416563/how-can-i-make-my-custom-url-helpers-in-rails/53417352#53417352", "title": "How can I make my custom url helpers in rails?", "body": "<p>I would just define the routes as:</p>\n\n<pre><code>resources :books do\n  resources :reviews, only: [:new, :create, :index]\nend\n\nresources :films do\n  resources :reviews, only: [:new, :create, :index]\nend\n</code></pre>\n\n<p>This will create the routes as:</p>\n\n<pre><code>books/:book_id/reviews\nfilms/:film_id/reviews\n</code></pre>\n\n<p>This is the conventional RESTful way to define <a href=\"https://guides.rubyonrails.org/routing.html#nested-resources\" rel=\"nofollow noreferrer\">nested resources</a>. And more importantly it works with the <a href=\"https://api.rubyonrails.org/v5.2.1/classes/ActionDispatch/Routing/PolymorphicRoutes.html\" rel=\"nofollow noreferrer\">Rails polymorphic route helpers</a>.</p>\n\n<p>You can use routing concerns to DRY it if needed.</p>\n\n<pre><code>concern :reviewable do\n  resources :reviews, only: [:new, :create, :index]\nend\n\nresources :books, concerns: :reviewable\nresources :films, concerns: :reviewable\n</code></pre>\n\n<p>It gives you the named route helpers <code>book_reviews_path(@book)</code> and <code>film_reviews_path(@film)</code>. You can also use the polymorphic route helpers:</p>\n\n<pre><code>&lt;%= link_to \"Reviews for #{@reviewable.title}\" [@reviewable, :reviews] %&gt;\n...\n&lt;%= form_for([@reviewable, @reviewable.review.new]) do %&gt;\n...\nredirect_to [@reviewable, :reviews], notice: 'Review created'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 515, "user_id": 7896107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee250a5dfdcd5c76e0273383a0884618?s=128&d=identicon&r=PG&f=1", "display_name": "Chiara Ani", "link": "https://stackoverflow.com/users/7896107/chiara-ani"}, "is_accepted": false, "score": 0, "last_activity_date": 1599652941, "creation_date": 1599652941, "answer_id": 63811268, "question_id": 53416563, "link": "https://stackoverflow.com/questions/53416563/how-can-i-make-my-custom-url-helpers-in-rails/63811268#63811268", "title": "How can I make my custom url helpers in rails?", "body": "<p>Even though my question has been answered a long time ago, I want to add another answer according to the title of the question.\nSo if you actually want to create custom url and path helpers, here's the answer with an example: <a href=\"https://stackoverflow.com/questions/63808393/generating-a-full-resourceful-path-giving-only-the-last-resource-to-the-routes-h/63811113#63811113\">Generating a full resourceful path giving only the last resource to the routes helper</a></p>\n<p>Rails docs:  <a href=\"https://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/CustomUrls.html#method-i-direct\" rel=\"nofollow noreferrer\">https://api.rubyonrails.org/classes/ActionDispatch/Routing/Mapper/CustomUrls.html#method-i-direct</a></p>\n"}], "owner": {"reputation": 515, "user_id": 7896107, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee250a5dfdcd5c76e0273383a0884618?s=128&d=identicon&r=PG&f=1", "display_name": "Chiara Ani", "link": "https://stackoverflow.com/users/7896107/chiara-ani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 852, "favorite_count": 0, "accepted_answer_id": 53417352, "answer_count": 2, "score": 0, "last_activity_date": 1599652941, "creation_date": 1542817829, "question_id": 53416563, "link": "https://stackoverflow.com/questions/53416563/how-can-i-make-my-custom-url-helpers-in-rails", "title": "How can I make my custom url helpers in rails?", "body": "<p>I'd like this custom url helper to be accessible from controllers, views, tests... Ending with both _url and _path. Also it should have the possibility to add parameters at the end as a url helper.</p>\n\n<pre><code>def reviews(reviewable)\n  \"/reviews/#{reviewable.class}/#{reviewable.id}\"\nend\nreviews_url Book.find(1) # /reviews/Book/1\nreviews_path Film.find(3) # /reviews/Film/3\n</code></pre>\n\n<p>Review.reviewable is polymorphic.</p>\n\n<p><em>config/routes</em></p>\n\n<pre><code>get \"reviews/:reviewable_type/:reviewable_id\" =&gt; \"reviews#index\"\n</code></pre>\n"}, {"tags": ["ruby", "http", "session", "request"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1542875224, "post_id": 53416461, "comment_id": 93727452, "body": "You would call <code>start</code> explicitly if you are going to make multiple HTTP <code>request</code>s within the same TCP connection (given that the server supports <a href=\"https://en.wikipedia.org/wiki/HTTP_persistent_connection\" rel=\"nofollow noreferrer\">persistent connections</a>)"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1542875677, "post_id": 53419929, "comment_id": 93727683, "body": "<code>start</code> is called with a block here, so the connection will be closed afterwards."}], "tags": [], "owner": {"reputation": 36, "user_id": 6553807, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dfe2b32fd2fa30bb0bc08c8c659fe3ac?s=128&d=identicon&r=PG", "display_name": "DjPadz", "link": "https://stackoverflow.com/users/6553807/djpadz"}, "is_accepted": false, "score": 1, "last_activity_date": 1542831702, "creation_date": 1542831702, "answer_id": 53419929, "question_id": 53416461, "link": "https://stackoverflow.com/questions/53416461/why-do-we-need-to-run-start-when-using-net-http/53419929#53419929", "title": "Why do we need to run start when using net/http?", "body": "<p><code>http.start()</code> will explicitly open the TCP connection at the point in time that it's been called.  It's automatically called by <code>http.request()</code> if it hasn't been called already.  To wit, here's the first few lines of the <code>request</code> method:</p>\n\n<pre><code>def request(req, body = nil, &amp;block)  # :yield: +response+\n  unless started?\n    start {\n      req['connection'] ||= 'close'\n      return request(req, body, &amp;block)\n    }\n  end\n</code></pre>\n\n<p>Assuming <code>getFullUri()</code> takes less than a couple of seconds to run (see the <code>keep_alive_timeout</code> attribute), the original connection should be reused regardless of how it was created.</p>\n"}], "owner": {"reputation": 85, "user_id": 9552314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb650c65497624eb35ed3ce7566a0458?s=128&d=identicon&r=PG&f=1", "display_name": "Shared", "link": "https://stackoverflow.com/users/9552314/shared"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 2, "answer_count": 1, "score": 2, "last_activity_date": 1542831702, "creation_date": 1542817577, "question_id": 53416461, "link": "https://stackoverflow.com/questions/53416461/why-do-we-need-to-run-start-when-using-net-http", "title": "Why do we need to run start when using net/http?", "body": "<p>If I use:</p>\n\n<pre><code>uri = URI(\"...\")\nhttp = Net::HTTP.new(uri.host, uri.port)\nhttp.read_timeout = 60\n# Add http.start here? Why?\nfor i in 1..n\n    uri = getFullUri()\n    req = Net::HTTP::Get.new(uri.path)\n    resp = http.request(req)\nend\n</code></pre>\n\n<p>everything works fine.</p>\n\n<p>Why do I need to add an <code>http.start</code>?</p>\n\n<p>I see that <code>http.started?</code> returns <code>false</code> everywhere if I don't add <code>http.start</code>, but does this have a negative impact?</p>\n\n<p>Which is the difference between those 2 cases?</p>\n\n<p>Do the number of TCP connections or HTTP sessions differ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 1, "creation_date": 1542815639, "post_id": 53415815, "comment_id": 93706079, "body": "When you run <code>gem install mysql2 -v &#39;0.5.2&#39; --source &#39;https:&#47;&#47;rubygems.org&#47;&#39;</code>, what is the output?"}, {"owner": {"reputation": 57, "user_id": 3146329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e58b744faca342a5b7d1fbbe2fd28d78?s=128&d=identicon&r=PG", "display_name": "kai00", "link": "https://stackoverflow.com/users/3146329/kai00"}, "reply_to_user": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1542815687, "post_id": 53415815, "comment_id": 93706109, "body": "I tried to install older versions of Mysql2 0.5.1, 0.5.0, too. But it is failed..."}, {"owner": {"reputation": 57, "user_id": 3146329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e58b744faca342a5b7d1fbbe2fd28d78?s=128&d=identicon&r=PG", "display_name": "kai00", "link": "https://stackoverflow.com/users/3146329/kai00"}, "reply_to_user": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1542815762, "post_id": 53415815, "comment_id": 93706167, "body": "Hi, Sara ERROR:  While executing gem ... (Errno::EACCES)     Permission denied @ rb_sysopen - /Users/daisuke/.rbenv/versions/2.5.3/lib/ruby/gems/2.5.0/gem&zwnj;&#8203;s/mysql2-0.5.2/CHANG&zwnj;&#8203;ELOG.md"}, {"owner": {"reputation": 57, "user_id": 3146329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e58b744faca342a5b7d1fbbe2fd28d78?s=128&d=identicon&r=PG", "display_name": "kai00", "link": "https://stackoverflow.com/users/3146329/kai00"}, "reply_to_user": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1542815880, "post_id": 53415815, "comment_id": 93706250, "body": "I did sudo, too.  sudo gem install mysql2 -v &#39;0.5.2&#39; --source &#39;<a href=\"https://rubygems.org/\" rel=\"nofollow noreferrer\">rubygems.org</a>&#39; Password: Building native extensions. This could take a while... ERROR:  Error installing mysql2: \tERROR: Failed to build gem native extension."}, {"owner": {"reputation": 57, "user_id": 3146329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e58b744faca342a5b7d1fbbe2fd28d78?s=128&d=identicon&r=PG", "display_name": "kai00", "link": "https://stackoverflow.com/users/3146329/kai00"}, "reply_to_user": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1542816549, "post_id": 53415815, "comment_id": 93706651, "body": "Hi,  hernanvicente. macOS Mojave 10.14.1"}, {"owner": {"reputation": 830, "user_id": 642496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/182757c8d4baebc5eb960251d7b983f1?s=128&d=identicon&r=PG", "display_name": "hernanvicente", "link": "https://stackoverflow.com/users/642496/hernanvicente"}, "edited": false, "score": 0, "creation_date": 1542816786, "post_id": 53415815, "comment_id": 93706786, "body": "Sorry, I did missread your comment above. Could you please share share the result of your trace? Try to run your instruction appending a <code>--trace</code>"}, {"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1542816821, "post_id": 53415815, "comment_id": 93706809, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/19765290/error-failed-to-build-gem-native-extension-error-installing-mysql2\">ERROR: Failed to build gem native extension - Error installing mysql2</a>"}, {"owner": {"reputation": 830, "user_id": 642496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/182757c8d4baebc5eb960251d7b983f1?s=128&d=identicon&r=PG", "display_name": "hernanvicente", "link": "https://stackoverflow.com/users/642496/hernanvicente"}, "edited": false, "score": 0, "creation_date": 1542816908, "post_id": 53415815, "comment_id": 93706867, "body": "I think that you are probably missing to install some dev package dependency. Try: <code>brew install mysql-connector-c</code> and then later <code>brew install libmysqlclient-dev</code>"}, {"owner": {"reputation": 57, "user_id": 3146329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e58b744faca342a5b7d1fbbe2fd28d78?s=128&d=identicon&r=PG", "display_name": "kai00", "link": "https://stackoverflow.com/users/3146329/kai00"}, "edited": false, "score": 0, "creation_date": 1542817567, "post_id": 53415815, "comment_id": 93707311, "body": "brew install libmysqlclient-dev Error: No available formula with the name &quot;libmysqlclient-dev&quot;  ==&gt; Searching for a previously deleted formula (in the last month)... Warning: homebrew/core is shallow clone. To get complete history run:   git -C &quot;$(brew --repo homebrew/core)&quot; fetch --unshallow  Error: No previously deleted formula found. ==&gt; Searching for similarly named formulae... Error: No similarly named formulae found. ==&gt; Searching taps... ==&gt; Searching taps on GitHub... Error: No formulae found in taps."}, {"owner": {"reputation": 830, "user_id": 642496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/182757c8d4baebc5eb960251d7b983f1?s=128&d=identicon&r=PG", "display_name": "hernanvicente", "link": "https://stackoverflow.com/users/642496/hernanvicente"}, "edited": false, "score": 0, "creation_date": 1542818814, "post_id": 53415815, "comment_id": 93708078, "body": "@Daisuke can you try to install your mysql gem providing the actual mysql directory. Check <a href=\"https://coderwall.com/p/whbzrw/install-mysql2-gem-in-mac-os-x-with-mysql-installed-via-brew\" rel=\"nofollow noreferrer\">coderwall.com/p/whbzrw/&hellip;</a>"}, {"owner": {"reputation": 57, "user_id": 3146329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e58b744faca342a5b7d1fbbe2fd28d78?s=128&d=identicon&r=PG", "display_name": "kai00", "link": "https://stackoverflow.com/users/3146329/kai00"}, "reply_to_user": {"reputation": 830, "user_id": 642496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/182757c8d4baebc5eb960251d7b983f1?s=128&d=identicon&r=PG", "display_name": "hernanvicente", "link": "https://stackoverflow.com/users/642496/hernanvicente"}, "edited": false, "score": 0, "creation_date": 1542844587, "post_id": 53415815, "comment_id": 93718672, "body": "@hernanvicente I did it. however... sudo gem install mysql2 -- --with-mysql-dir=/usr/local/bin/mysql Building native extensions with: &#39;--with-mysql-dir=/usr/local/bin/mysql&#39; This could take a while... ERROR:  Error installing mysql2: ERROR: Failed to build gem native extension."}], "answers": [{"tags": [], "owner": {"reputation": 187, "user_id": 789045, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/iU5qQ.jpg?s=128&g=1", "display_name": "A1aks", "link": "https://stackoverflow.com/users/789045/a1aks"}, "is_accepted": false, "score": 0, "last_activity_date": 1545919515, "creation_date": 1545919515, "answer_id": 53946354, "question_id": 53415815, "link": "https://stackoverflow.com/questions/53415815/failed-to-install-mysql2-version-0-5-2/53946354#53946354", "title": "Failed to install &quot;Mysql2&quot; version 0.5.2", "body": "<p>This is a very good post. I was facing the same issue using mac. What I ended up doing was the following. </p>\n\n<ol>\n<li><p>I changed the permission for the Gemfile. I used <code>chmod 755 Gemfile</code>.</p></li>\n<li><p>I used <code>sudo bundle install</code>. This allowed me to install all the gems in the Gemfile. </p></li>\n<li><p>I did a <code>rake db:create</code> and <code>rails server</code>. </p></li>\n</ol>\n\n<p>Got things working. Hope it fixes your issue too. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11220235, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-NFIbSL7S8QQ/AAAAAAAAAAI/AAAAAAAAEHI/4MKnpmjGaKE/photo.jpg?sz=128", "display_name": "Johannes Mentz", "link": "https://stackoverflow.com/users/11220235/johannes-mentz"}, "is_accepted": false, "score": 0, "last_activity_date": 1552907067, "creation_date": 1552907067, "answer_id": 55219910, "question_id": 53415815, "link": "https://stackoverflow.com/questions/53415815/failed-to-install-mysql2-version-0-5-2/55219910#55219910", "title": "Failed to install &quot;Mysql2&quot; version 0.5.2", "body": "<p>I had the same issue, when setting up a new machine.</p>\n\n<p>Just running</p>\n\n<p><code>brew install mysql</code></p>\n\n<p>fixed the failing mysql gem installation for me.</p>\n"}, {"tags": [], "owner": {"reputation": 702, "user_id": 4000293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/976ba675f6c7be8be7c327d1adf91fee?s=128&d=identicon&r=PG&f=1", "display_name": "sloneorzeszki", "link": "https://stackoverflow.com/users/4000293/sloneorzeszki"}, "is_accepted": false, "score": 0, "last_activity_date": 1552909914, "creation_date": 1552909914, "answer_id": 55220727, "question_id": 53415815, "link": "https://stackoverflow.com/questions/53415815/failed-to-install-mysql2-version-0-5-2/55220727#55220727", "title": "Failed to install &quot;Mysql2&quot; version 0.5.2", "body": "<p>Don't know if this will help, but I had imilar problems on Mac with MySQL twice. First time I just did a complete reinstall, I made sure there were no MySQL files left in the system. I think I followed <a href=\"https://gist.github.com/vitorbritto/0555879fe4414d18569d\" rel=\"nofollow noreferrer\">this</a> guide. The second time I read that it's an issue with symoblic links which I managed to fix with <code>brew prune</code> (I see that it might have been <a href=\"https://discourse.brew.sh/t/error-calling-brew-prune-is-disabled/4142\" rel=\"nofollow noreferrer\">renamed</a> to <code>brew cleanup</code> now - worth to check both).</p>\n"}], "owner": {"reputation": 57, "user_id": 3146329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e58b744faca342a5b7d1fbbe2fd28d78?s=128&d=identicon&r=PG", "display_name": "kai00", "link": "https://stackoverflow.com/users/3146329/kai00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1374, "favorite_count": 1, "answer_count": 3, "score": 3, "last_activity_date": 1552909914, "creation_date": 1542815530, "last_edit_date": 1542818034, "question_id": 53415815, "link": "https://stackoverflow.com/questions/53415815/failed-to-install-mysql2-version-0-5-2", "title": "Failed to install &quot;Mysql2&quot; version 0.5.2", "body": "<p>I tried all methods of <a href=\"https://stackoverflow.com/questions/3608287/error-installing-mysql2-failed-to-build-gem-native-extension\">here</a>.\nBut still, the same error occurs.</p>\n\n<pre><code>An error occurred while installing mysql2 (0.5.2), and Bundler cannot\ncontinue.\nMake sure that gem install mysql2 -v '0.5.2' --source 'https://rubygems.org/'\nsucceeds before bundling.\n</code></pre>\n\n<p>My spec is:</p>\n\n<ul>\n<li><p>MacOS Mojave 10.14.1</p></li>\n<li><p>Ruby 2.5.3p105</p></li>\n<li><p>Mysql 8.0.12 with Homebrew</p></li>\n</ul>\n\n<p>Gemfile:</p>\n\n<pre><code>gem \"rails\"\ngem \"mysql2\", \"0.5.2\"\n</code></pre>\n\n<p>Could you kindly tell me a solution?</p>\n"}, {"tags": ["ruby", "methods"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1542809818, "post_id": 53414029, "comment_id": 93702552, "body": "Well, ruby doesn&#39;t have functions. Only methods. And they all belong to some class."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1542810141, "post_id": 53414029, "comment_id": 93702748, "body": "&quot;and why it matters&quot; - classes are &quot;data + behaviour&quot;. Methods are the behaviour part. Without them, classes become just dumb structs and are much less useful (from OOP perspective anyway)"}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1542810795, "post_id": 53414029, "comment_id": 93703097, "body": "@SergioTulentsev Doesnt ruby lambdas kind of a functions in js?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 2, "creation_date": 1542812645, "post_id": 53414029, "comment_id": 93704223, "body": "@MartinZinovsky: similar, but not quite the same. 1) They are fully-fledged objects themselves and because of that 2) they are not directly invocable (you can&#39;t do <code>my_lambda()</code>, only <code>my_lambda.call</code> or <code>my_lambda.()</code> or one of 50 other ways)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1542817121, "post_id": 53414029, "comment_id": 93707016, "body": "<i>&quot;How can a Method be part of a class?&quot;</i> \u2013 by definition, that&#39;s essentially what makes it a method."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1542842626, "post_id": 53414029, "comment_id": 93718109, "body": "@SergioTulentsev: Methods belong to modules (of which classes are a specialization)."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1542906427, "post_id": 53414029, "comment_id": 93744922, "body": "@J&#246;rgWMittag: ruby&#39;s implementation details. :)"}], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 10300774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ef14d6017f71e09f2886cd6a4de559?s=128&d=identicon&r=PG&f=1", "display_name": "Jules", "link": "https://stackoverflow.com/users/10300774/jules"}, "edited": false, "score": 0, "creation_date": 1542815662, "post_id": 53414325, "comment_id": 93706093, "body": "So my understanding now is that you can create some information as a class, and then apply a Method to it. Does a Method always require a class, and would you say that Methods are built around classes?"}, {"owner": {"reputation": 523, "user_id": 9700152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72c028b2be330717577567ca86733681?s=128&d=identicon&r=PG&f=1", "display_name": "Dustin R", "link": "https://stackoverflow.com/users/9700152/dustin-r"}, "reply_to_user": {"reputation": 151, "user_id": 10300774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ef14d6017f71e09f2886cd6a4de559?s=128&d=identicon&r=PG&f=1", "display_name": "Jules", "link": "https://stackoverflow.com/users/10300774/jules"}, "edited": false, "score": 2, "creation_date": 1542818095, "post_id": 53414325, "comment_id": 93707660, "body": "Methods/Functions in JavaScript do not require a class, although it helps greatly with code organization, and can improve readability by logically grouping a class&#39;s specific functions together.  I would suggest reading more on JavaScript classes as they work differently than some OOP languages today.  A lot of it boils down to personal preference, however, following known JavaScript coding conventions will make your code more easily understandable by a wider array of audiences."}], "tags": [], "owner": {"reputation": 523, "user_id": 9700152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72c028b2be330717577567ca86733681?s=128&d=identicon&r=PG&f=1", "display_name": "Dustin R", "link": "https://stackoverflow.com/users/9700152/dustin-r"}, "is_accepted": false, "score": 2, "last_activity_date": 1542810647, "creation_date": 1542810647, "answer_id": 53414325, "question_id": 53414029, "link": "https://stackoverflow.com/questions/53414029/trying-to-understand-what-a-method-is-how-can-it-be-part-of-a-class/53414325#53414325", "title": "Trying to understand what a Method is, how can it be &#39;part of a class&#39;?", "body": "<p>Methods are generally something that a class can do,\nclass MailClient(for example) might have methods such as sendMail, getMail, forwardMail, etc. In OOP, methods should for the most part be something that a class can do.</p>\n\n<pre><code>    MailClient.getMail();\n</code></pre>\n\n<p>The above code can be conceptualized as telling the class to invoke its getMail() behavior.</p>\n\n<p>You may think of this in real-life terms such as:</p>\n\n<p><code>Dog.bark();</code></p>\n\n<p>Objects have behavior and attributes, the behaviors are the methods.</p>\n"}, {"comments": [{"owner": {"reputation": 151, "user_id": 10300774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ef14d6017f71e09f2886cd6a4de559?s=128&d=identicon&r=PG&f=1", "display_name": "Jules", "link": "https://stackoverflow.com/users/10300774/jules"}, "edited": false, "score": 0, "creation_date": 1542815340, "post_id": 53414645, "comment_id": 93705885, "body": "I think I get it, part of the problem was my understanding of what a class was. So is it that a Method requires a class, that is to say some information that can be contained within or without of the Method to work, and that the information is considered an object in itself?"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 151, "user_id": 10300774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ef14d6017f71e09f2886cd6a4de559?s=128&d=identicon&r=PG&f=1", "display_name": "Jules", "link": "https://stackoverflow.com/users/10300774/jules"}, "edited": false, "score": 2, "creation_date": 1542819149, "post_id": 53414645, "comment_id": 93708272, "body": "I think your confusions comes from using functions in JS which don&#39;t require a class. You can call any function you&#39;ve defined from anywhere in your code. Class orientated design is pretty much the opposite of this - you want the same method (function name) to do different things to different classes. A ruby method has to operate on a class (and where it looks like you aren&#39;t calling it on a class it&#39;s in fact happening without you realising - like when you call a method in a controller, the method is called on an instance of that controller class)"}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 3, "last_activity_date": 1542811799, "creation_date": 1542811799, "answer_id": 53414645, "question_id": 53414029, "link": "https://stackoverflow.com/questions/53414029/trying-to-understand-what-a-method-is-how-can-it-be-part-of-a-class/53414645#53414645", "title": "Trying to understand what a Method is, how can it be &#39;part of a class&#39;?", "body": "<blockquote>\n  <p>Can you explain the whole 'Methods are part of a class' thing and why it matters? How can a Method be part of a class? Class as in an integer or a string?</p>\n</blockquote>\n\n<p>Let's say you have two classes, Apple and Cake. Let's assume that when you sell an apple, it has a tax rate of 10%, and cake 20%. By splitting the methods into individual classes, we can define a different method for 'price_with_tax' to each class:</p>\n\n<pre><code>class Apple &lt; ApplicationRecord\n  def price_with_tax\n    self.price * 1.1\n  end\nend\n\nclass Cake &lt; ApplicationRecord\n  def price_with_tax\n    self.price * 1.2\n  end\nend\n</code></pre>\n\n<p>In javascript we wouldn't be able to do this, and would need to have 2 methods, 'add 10% tax' and 'add 20% tax'. By structuring the methods as we have, we're able to do:</p>\n\n<pre><code>apple = Apple.find(1)\ncake = Cake.find(1)\ncake.price_with_tax\napple.price_with_tax\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 77, "user_id": 4339360, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-yCaRn94gLoE/AAAAAAAAAAI/AAAAAAAAACc/LgD2NrYqirM/photo.jpg?sz=128", "display_name": "PPCC", "link": "https://stackoverflow.com/users/4339360/ppcc"}, "is_accepted": false, "score": 0, "last_activity_date": 1543441579, "last_edit_date": 1543441579, "creation_date": 1543440352, "answer_id": 53528358, "question_id": 53414029, "link": "https://stackoverflow.com/questions/53414029/trying-to-understand-what-a-method-is-how-can-it-be-part-of-a-class/53528358#53528358", "title": "Trying to understand what a Method is, how can it be &#39;part of a class&#39;?", "body": "<p>In OOP:</p>\n\n<p>Class is like a blueprint/template. It has properties, methods etc. An object can be created with it. So an object can call method in class.\nUsually a method is created to perform an operation. </p>\n\n<p>Example:</p>\n\n<pre><code>// a demo class\npublic class Animal{\n    // a method\n    public void sound(){\n        // do something...\n    }\n\n    // main class, we create an object and call sound() method\n    public static void main(String[] args){\n        Animal dog = new Animal();     // create an object so that we can use the method\n        dog.sound();    // method call\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 151, "user_id": 10300774, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87ef14d6017f71e09f2886cd6a4de559?s=128&d=identicon&r=PG&f=1", "display_name": "Jules", "link": "https://stackoverflow.com/users/10300774/jules"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1543441579, "creation_date": 1542809701, "question_id": 53414029, "link": "https://stackoverflow.com/questions/53414029/trying-to-understand-what-a-method-is-how-can-it-be-part-of-a-class", "title": "Trying to understand what a Method is, how can it be &#39;part of a class&#39;?", "body": "<p>I've done some work with functions in Javascript, and thought that a Method was the Ruby name for the same. I recently did a technical interview and the interviewer was trying to help me debug by explaining how Methods were part of a class, and that it's an OOP thing.</p>\n\n<p>I can't spot a functional difference between a Method and an equivalent Function, so I don't see what classes have to do with it.</p>\n\n<p><strong>Can you explain the whole 'Methods are part of a class' thing and why it matters? How can a Method be part of a class? Class as in an integer or a string?</strong></p>\n\n<p>The interviewer believed it would help, but it seems like a tiny technicality more than something useful.</p>\n"}, {"tags": ["ruby", "hashmap", "key", "lazy-evaluation"], "comments": [{"owner": {"reputation": 1181, "user_id": 4589069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a712e21314267b02a73ad8302c0730?s=128&d=identicon&r=PG&f=1", "display_name": "MrAleister", "link": "https://stackoverflow.com/users/4589069/mraleister"}, "edited": false, "score": 0, "creation_date": 1542809909, "post_id": 53413940, "comment_id": 93702607, "body": "Not sure what aspect of Hash you would like to be lazy-implemented ? Keys evaluation ? How would it be addressed in memory ?"}, {"owner": {"reputation": 131, "user_id": 10686191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02479552fe3724f19d316f6ae7d75906?s=128&d=identicon&r=PG&f=1", "display_name": "user183966", "link": "https://stackoverflow.com/users/10686191/user183966"}, "reply_to_user": {"reputation": 1181, "user_id": 4589069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a712e21314267b02a73ad8302c0730?s=128&d=identicon&r=PG&f=1", "display_name": "MrAleister", "link": "https://stackoverflow.com/users/4589069/mraleister"}, "edited": false, "score": 0, "creation_date": 1542810126, "post_id": 53413940, "comment_id": 93702738, "body": "Hi @MrAleister Yes, keys evaluation (or rather, all aspects of the map). I have no idea how it would be addressed in memory. I thought that didn&#39;t really matter since it&#39;s object oriented, the same way I can just provide a lazy evaluation block for the values I would hope to provide a lazy evaluation block for the keys."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1542811378, "post_id": 53413940, "comment_id": 93703426, "body": "What do you mean by  <i>&quot;I have made the value lookup lazy in the straightforward way&quot;</i>? Why is that <i>&quot;no advantage in [your] scenario if [you] have to look up the keys eagerly&quot;</i>?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1542811532, "post_id": 53413940, "comment_id": 93703506, "body": "I don&#39;t understand what you&#39;re trying to achieve. (Why do you want to do this?) Can you show what code you&#39;ve written so far? You could just use <code>my_hash.keys.lazy</code>, but... <i>why</i>? What would be the purpose?"}, {"owner": {"reputation": 131, "user_id": 10686191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02479552fe3724f19d316f6ae7d75906?s=128&d=identicon&r=PG&f=1", "display_name": "user183966", "link": "https://stackoverflow.com/users/10686191/user183966"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1542812578, "post_id": 53413940, "comment_id": 93704170, "body": "Hi @TomLord . It is not laziness on the output side of the hash that I want, but laziness on the input side of the hash. I hope that makes sense."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1542822343, "post_id": 53413940, "comment_id": 93709881, "body": "@user183966 No, that doesn&#39;t really make sense to me. Can you please provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> of the problem? At a guess, perhaps what you&#39;d like to do is define each hash <b>value</b> as a <b>lambda</b> - and only evaluate this at the point of accessing? Or perhaps you&#39;re looking at this the wrong way, and what&#39;s really needed is some optimisation of how/when the &quot;eager loading&quot; is performed."}, {"owner": {"reputation": 1181, "user_id": 4589069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a712e21314267b02a73ad8302c0730?s=128&d=identicon&r=PG&f=1", "display_name": "MrAleister", "link": "https://stackoverflow.com/users/4589069/mraleister"}, "edited": false, "score": 0, "creation_date": 1542822345, "post_id": 53413940, "comment_id": 93709882, "body": "@user183966 not really, could you please present some example of such lazy-input ?"}, {"owner": {"reputation": 1181, "user_id": 4589069, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8a712e21314267b02a73ad8302c0730?s=128&d=identicon&r=PG&f=1", "display_name": "MrAleister", "link": "https://stackoverflow.com/users/4589069/mraleister"}, "edited": false, "score": 0, "creation_date": 1542822653, "post_id": 53413940, "comment_id": 93710043, "body": "<code>by passing a block to the Hash, and an exception is thrown if that key is not associated with an available data source</code> so Hash with a query interface where query itself is in a form of code block ?"}, {"owner": {"reputation": 131, "user_id": 10686191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02479552fe3724f19d316f6ae7d75906?s=128&d=identicon&r=PG&f=1", "display_name": "user183966", "link": "https://stackoverflow.com/users/10686191/user183966"}, "edited": false, "score": 0, "creation_date": 1542839291, "post_id": 53413940, "comment_id": 93717045, "body": "I have rewritten the question using code examples to hopefully make it clearer."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1542852622, "post_id": 53413940, "comment_id": 93720345, "body": "You say, &quot;..I want to present the available endpoints as a Hash...&quot; What are the hash&#39;s keys (&quot;endpoints&quot;?) and values (&quot;available&quot;)? What is the &quot;expensive&quot; operation? (Determining if an endpoint is &quot;availIable&quot;?) Do you simply want to avoid determining if an endpoint is available if you&#39;ve previously made that determination (i.e., assuming it will remain in its earlier state). Meaningless jargon (&quot;lazy keys&quot;) is not helpful."}], "answers": [{"tags": [], "owner": {"reputation": 1869, "user_id": 1454158, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/00c67acbbd503f63bad53da85439b3a4?s=128&d=identicon&r=PG", "display_name": "Volte", "link": "https://stackoverflow.com/users/1454158/volte"}, "is_accepted": false, "score": 0, "last_activity_date": 1542899468, "creation_date": 1542899468, "answer_id": 53433825, "question_id": 53413940, "link": "https://stackoverflow.com/questions/53413940/ruby-hash-with-lazy-keys/53433825#53433825", "title": "Ruby hash with lazy keys", "body": "<p>You'd have to override the <code>key?</code> method, and do your own checking in there.</p>\n\n<pre><code>class LazyHash &lt; Hash\n  def key?(key)\n    # Do your checking here. However that looks for your application\n  end\nend\n</code></pre>\n\n<p>In my opinion, you're asking for trouble though. One of the most powerful virtues in computer science is expectability. If you're changing the behavior of something, modifying it far beyond it's intent, it doesn't serve you to continue calling it by the original name. You don't need to shoe-horn your solution into existing classes/interfaces.</p>\n\n<p>Programming offers you plenty of flexibility, so you <em>can</em> do stuff like this (dependent on the language of course), but in that same argument, you have no reason not to simply build a new object/service with it's own API.</p>\n\n<p>I recommend starting fresh with a new class and building out your desired interface and functionality.</p>\n\n<pre><code>class LazyEndpoints\n  def on?(name)\n\n  end\n\n  def set(name, value)\n\n  end\nend\n</code></pre>\n\n<p>(Or something like that, the world is yours for the taking!)</p>\n"}], "owner": {"reputation": 131, "user_id": 10686191, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02479552fe3724f19d316f6ae7d75906?s=128&d=identicon&r=PG&f=1", "display_name": "user183966", "link": "https://stackoverflow.com/users/10686191/user183966"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542899468, "creation_date": 1542809436, "last_edit_date": 1542839397, "question_id": 53413940, "link": "https://stackoverflow.com/questions/53413940/ruby-hash-with-lazy-keys", "title": "Ruby hash with lazy keys", "body": "<p>I have a collection of 'data endpoints'. Each endpoint has a name and can be available or unavailable. In Ruby I want to present the available endpoints as a Hash to make it easy to work with them. The difficulty is that getting information about the endpoints is costly and should be done lazily.</p>\n\n<p>Some examples of how I want my object to behave:</p>\n\n<pre><code>endpoints = get_endpoints.call        # No endpoint information is accessed yet\nresult = endpoints['name1']           # This should only query endpoint \"name1\"\nis_available = endpoints.key? 'name2' # This should only query endpoint \"name2\"\nall_available = endpoints.keys        # This has to query all endpoints\n</code></pre>\n\n<p>The comments describe how the object internally makes requests to the 'data endpoints'.</p>\n\n<p>It is <a href=\"https://stackoverflow.com/questions/13431124/is-there-a-built-in-lazy-hash-in-ruby\">straightforward</a> to make a Hash that can do the first 2 lines. However I don't know how to support the last 2 lines. To do this I need a way to make the keys lazy, not just the values.</p>\n\n<p>Thank you for taking a look!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1542808265, "post_id": 53412735, "comment_id": 93701592, "body": "Ah, it&#39;s a pity that your bot is not giving out rewards here :)"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1542807559, "post_id": 53413293, "comment_id": 93701113, "body": "You probably want to call <code>super</code> in that decorator"}, {"owner": {"reputation": 98, "user_id": 3632948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fada79a084598c5111f87d0583830727?s=128&d=identicon&r=PG&f=1", "display_name": "jarosluv", "link": "https://stackoverflow.com/users/3632948/jarosluv"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1542807909, "post_id": 53413293, "comment_id": 93701351, "body": "You&#39;re right. I&#39;ve got the original question wrong before. Thank you."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1542808225, "post_id": 53413293, "comment_id": 93701560, "body": "Also why class_eval? Can simply do <code>klass.prepend Decorator</code>"}, {"owner": {"reputation": 98, "user_id": 3632948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fada79a084598c5111f87d0583830727?s=128&d=identicon&r=PG&f=1", "display_name": "jarosluv", "link": "https://stackoverflow.com/users/3632948/jarosluv"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1542810137, "post_id": 53413293, "comment_id": 93702743, "body": "This is stale part of code from my previous version of answer, that I&#39;ve just fixed. Generally you&#39;re totally right again. Thank you :)"}], "tags": [], "owner": {"reputation": 98, "user_id": 3632948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fada79a084598c5111f87d0583830727?s=128&d=identicon&r=PG&f=1", "display_name": "jarosluv", "link": "https://stackoverflow.com/users/3632948/jarosluv"}, "is_accepted": true, "score": 4, "last_activity_date": 1542809842, "last_edit_date": 1542809842, "creation_date": 1542807447, "answer_id": 53413293, "question_id": 53412735, "link": "https://stackoverflow.com/questions/53412735/how-to-decorate-all-similar-methods-in-ruby/53413293#53413293", "title": "How to decorate all similar methods in Ruby?", "body": "<p>You can <code>prepend</code> module:</p>\n\n<pre><code>module Decorator\n  def read\n    puts \"hello\"\n    super\n  end\nend\n\nclass Book\n  prepend Decorator\n\n  def read\n    puts \"bye\"\n  end\nend\n\nclass Magazine\n  prepend Decorator\n\n  def read\n    puts \"cya\"\n  end\nend\n\nBook.new.read \n# \"hello\"\n# \"bye\"\n\nMagazine.new.read\n# \"hello\"\n# \"cya\"\n</code></pre>\n\n<p>As well there is more clean way to do this kind of modifications with <code>refinements</code>:</p>\n\n<pre><code>class Book\n  def read\n    puts \"bye\"\n  end\nend\n\nclass Magazine\n  def read\n    puts \"cya\"\n  end\nend\n\nmodule Decorator\n  def read\n    puts \"hello\"\n    super\n  end\nend\n\nmodule DecoratedBook\n  refine Book do\n    prepend Decorator\n  end\nend\n\nmodule DecoratedMagazine\n  refine Magazine do\n    prepend Decorator\n  end\nend\n\nusing DecoratedBook\nusing DecoratedMagazine\n\nBook.new.read \n# \"hello\"\n# \"bye\"\n\nMagazine.new.read\n# \"hello\"\n# \"cya\"\n</code></pre>\n\n<p>Notice: this code may not run in <code>irb</code>.</p>\n\n<p>Also you can do it right in the runtime:</p>\n\n<pre><code>module Decorator\n  def read\n    puts \"hello\"\n    super\n  end\nend\n\n[Book, Magazine].each do |klass|\n  klass.prepend Decorator\nend\n\nBook.new.read \n# \"hello\"\n# \"bye\"\n\nMagazine.new.read\n# \"hello\"\n# \"cya\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1542808193, "post_id": 53413333, "comment_id": 93701535, "body": "I think this is the correct example of &quot;decorator pattern&quot;."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 1, "creation_date": 1542808527, "post_id": 53413333, "comment_id": 93701757, "body": "@KimmoLehto: depends. For one thing, other methods are not proxied here (original object&#39;s API, if it were specified, is not reflected fully). And some clients may do type checks, so you might want your decorated object still <b>be_a?</b>  the same type."}, {"owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1542870725, "post_id": 53413333, "comment_id": 93725332, "body": "@SergioTulentsev yes, with <code>class ReaderDecorator &lt; SimpleDelegator</code> it would be better. The question does have the keyword &quot;decorate&quot;, so an answer with an actual &quot;decorator&quot; is fitting."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "edited": false, "score": 0, "creation_date": 1542906203, "post_id": 53413333, "comment_id": 93744811, "body": "@KimmoLehto &quot;actual&quot; as in &quot;as described by gang of four&quot;? Their decorator implements the interface (maintains both api surface and type checks). Anyway, what I was trying to say is there are flavors of decorators. Who&#39;s to say which one of them is the &quot;real&quot; one? :)"}], "tags": [], "owner": {"reputation": 165, "user_id": 7446199, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JUsyj.jpg?s=128&g=1", "display_name": "vk26", "link": "https://stackoverflow.com/users/7446199/vk26"}, "is_accepted": false, "score": 1, "last_activity_date": 1542807555, "creation_date": 1542807555, "answer_id": 53413333, "question_id": 53412735, "link": "https://stackoverflow.com/questions/53412735/how-to-decorate-all-similar-methods-in-ruby/53413333#53413333", "title": "How to decorate all similar methods in Ruby?", "body": "<p>May be you want something as:</p>\n\n<pre><code>class ReaderDecorator\n  def initialize(obj)\n    @obj = obj\n  end\n\n  def read\n    puts 'Hello'\n    @obj.read\n  end\nend\n\nReaderDecorator.new(Book.new).read\nReaderDecorator.new(Magazine.new).read\n</code></pre>\n"}], "owner": {"reputation": 93455, "user_id": 187141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f9e28dc83496320c87c55b3cf988ab60?s=128&d=identicon&r=PG", "display_name": "yegor256", "link": "https://stackoverflow.com/users/187141/yegor256"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 53413293, "answer_count": 2, "score": 1, "last_activity_date": 1542809842, "creation_date": 1542805621, "question_id": 53412735, "link": "https://stackoverflow.com/questions/53412735/how-to-decorate-all-similar-methods-in-ruby", "title": "How to decorate all similar methods in Ruby?", "body": "<p>Here is my class:</p>\n\n<pre><code>class Book\n  def read\n     # something\n  end\nend\n</code></pre>\n\n<p>And another one:</p>\n\n<pre><code>class Magazine\n  def read\n     # something\n  end\nend\n</code></pre>\n\n<p>Now, I want to decorate both <code>read</code> methods in these two classes. I want them both to print \"hello\" right before they start working. How do I do that? I suspect, I need to use mixins, but can't figure out exactly how.</p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "is_accepted": true, "score": 1, "last_activity_date": 1542804806, "last_edit_date": 1542804806, "creation_date": 1542803518, "answer_id": 53412111, "question_id": 53411752, "link": "https://stackoverflow.com/questions/53411752/how-to-stub-has-many-association-in-rspec/53412111#53412111", "title": "How to stub has_many association in RSpec", "body": "<p>Why dont you make use of <a href=\"https://github.com/thoughtbot/factory_bot/blob/master/GETTING_STARTED.md#associations\" rel=\"nofollow noreferrer\"><code>FactoryBot associations</code></a>?</p>\n\n<pre><code>FactoryBot.define do\n  # tag factory with a `belongs_to` association for the book\n  factory :tag do\n    name { 'test_tag' }\n    book\n\n    trait :science do\n      name { 'science' }  \n    end\n  end\n\n  # book factory with a `belongs_to` association for the author\n  factory :book do\n    title { \"Through the Looking Glass\" }\n    author\n\n    factory :science_book do\n      title { \"Some science stuff\" }\n\n      after(:create) do |book, evaluator|\n        create(:tag, :science, book: book)\n      end\n    end\n  end\n\n  # author factory without associated books\n  factory :author do\n    name { \"John Doe\" }\n\n    # author_with_science_books will create book data after the author has\n    # been created\n    factory :author_with_science_books do\n      # books_count is declared as an ignored attribute and available in\n      # attributes on the factory, as well as the callback via the evaluator\n      transient do\n        books_count { 5 }\n      end\n\n      # the after(:create) yields two values; the author instance itself and\n      # the evaluator, which stores all values from the factory, including\n      # ignored attributes; `create_list`'s second argument is the number of\n      # records to create and we make sure the author is associated properly\n      # to the book\n      after(:create) do |author, evaluator|\n        create_list(:science_book, evaluator.books_count, authors: [author])\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>This allows you to do:</p>\n\n<pre><code>create(:author).books.count # 0\ncreate(:author_with_science_books).books.count # 5\ncreate(:author_with_science_books, books_count: 15).books.count # 15\n</code></pre>\n\n<p>So your test becomes:</p>\n\n<pre><code>RSpec.describe Author, type: :model do\n  describe '#has_science_tag?' do\n    let(:author_with_science_books) { create(:author_with_science_books, books_count: 1) }\n\n    context 'one science book' do\n      it 'returns true' do\n        expect(author_with_science_books.has_science_tag?).to eq true\n      end\n    end\n  end\nend\n</code></pre>\n\n<hr>\n\n<p>And you could also refactor <code>Author#has_science_tag?</code>:</p>\n\n<pre><code>class Author &lt; ApplicationRecord\n  has_many :books\n\n  def has_science_tag?\n    books.joins(:tags).where(\"tags.name ILIKE '%science%'\").exists?\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 713, "user_id": 975352, "user_type": "registered", "accept_rate": 16, "profile_image": "https://www.gravatar.com/avatar/79470d4708b9927990eb78650fb906ca?s=128&d=identicon&r=PG&f=1", "display_name": "Akira  Noguchi", "link": "https://stackoverflow.com/users/975352/akira-noguchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 0, "accepted_answer_id": 53412111, "answer_count": 1, "score": 1, "last_activity_date": 1542804806, "creation_date": 1542802215, "question_id": 53411752, "link": "https://stackoverflow.com/questions/53411752/how-to-stub-has-many-association-in-rspec", "title": "How to stub has_many association in RSpec", "body": "<p>I'm try to stub has_many association in RSpec because building records is so complicated. I want to detect which author has science book by using <code>Author#has_science_tag?</code>.</p>\n\n<p><strong>Model</strong></p>\n\n<pre><code>class Book &lt; ApplicationRecord\n  has_and_belongs_to_many :tags\n  belongs_to :author\nend\n\nclass Tag &lt; ApplicationRecord\n  has_and_belongs_to_many :books\nend\n\nclass Author &lt; ApplicationRecord\n  has_many :books\n\n  def has_science_tag?\n    tags = books.joins(:tags).pluck('tags.name')\n    tags.grep(/science/i).present?\n  end\nend\n</code></pre>\n\n<p><strong>RSpec</strong> </p>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe Author, type: :model do\n  describe '#has_science_tag?' do\n    let(:author) { create(:author) }\n\n    context 'one science book' do\n      example 'it returns true' do\n        allow(author).to receive_message_chain(:books, :joins, :pluck).with(no_args).with(:tags).with('tags.name').and_return(['Science'])\n        expect(author.has_science_tag?).to be_truthy\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>In this case, using <code>receive_message_chain</code> is good choice? Or stubbing has_many association is bad idea?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redirect", "request", "httparty"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1542800184, "post_id": 53410479, "comment_id": 93697132, "body": "Shouldn&#39;t the server build the URL to the redirect location correctly? I would argue if you change params on the redirect then you are not following the redirect but just request another URL."}, {"owner": {"reputation": 2274, "user_id": 7390929, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/WPB1g.jpg?s=128&g=1", "display_name": "Lucas Andrade", "link": "https://stackoverflow.com/users/7390929/lucas-andrade"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1542801193, "post_id": 53410479, "comment_id": 93697688, "body": "Yes, it&#39;s redirect correctly, I just notice that. Thank you."}], "answers": [{"tags": [], "owner": {"reputation": 1604, "user_id": 197559, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/QwQOg.jpg?s=128&g=1", "display_name": "Kodak", "link": "https://stackoverflow.com/users/197559/kodak"}, "is_accepted": false, "score": 0, "last_activity_date": 1595955753, "creation_date": 1595955753, "answer_id": 63139228, "question_id": 53410479, "link": "https://stackoverflow.com/questions/53410479/ruby-on-rails-how-to-set-new-params-on-httparty-before-redirect/63139228#63139228", "title": "Ruby on Rails how to set new params on HTTParty before redirect?", "body": "<ol>\n<li>Disable follow redirect (as described here: <a href=\"https://github.com/jnunemaker/httparty/issues/380\" rel=\"nofollow noreferrer\">https://github.com/jnunemaker/httparty/issues/380</a>)</li>\n<li>Load initial request</li>\n<li>Save cookies</li>\n<li>Do manual redirect with the cookies</li>\n</ol>\n"}], "owner": {"reputation": 2274, "user_id": 7390929, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/WPB1g.jpg?s=128&g=1", "display_name": "Lucas Andrade", "link": "https://stackoverflow.com/users/7390929/lucas-andrade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 117, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1595955753, "creation_date": 1542797432, "question_id": 53410479, "link": "https://stackoverflow.com/questions/53410479/ruby-on-rails-how-to-set-new-params-on-httparty-before-redirect", "title": "Ruby on Rails how to set new params on HTTParty before redirect?", "body": "<p>I have a POST request with HTTParty, this post validates my params and then redirect me to another page. So there are two requests. </p>\n\n<p>But the second request also require params, how can I pass this params to HTTParty before the redirect?</p>\n\n<p>First request:</p>\n\n<pre><code>response = HTTParty.post(URL_TO_SITE, headers: headers, body: params)\n# What I need it's something like this\nresponse.before_redirect(params: new_params)\n</code></pre>\n\n<p>I don't know if this is the correct way, so how can I do that?</p>\n"}, {"tags": ["json", "ruby", "cucumber"], "comments": [{"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1542797120, "post_id": 53410337, "comment_id": 93695452, "body": "Did you look for a gems that compare json or hashes?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1542797316, "post_id": 53410337, "comment_id": 93695571, "body": "You might try <a href=\"https://github.com/am-kantox/iteraptor\" rel=\"nofollow noreferrer\"><code>iteraptor</code></a> the gem I have created exactly for this kind of tasks. It allows iterating, mapping and reducing the deeply nested structures."}, {"owner": {"reputation": 139, "user_id": 5581314, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1f08692876a66df8a8fcb54d990ec22b?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhah", "link": "https://stackoverflow.com/users/5581314/mikhah"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1542797801, "post_id": 53410337, "comment_id": 93695845, "body": "@AlekseiMatiushkin interesting, will try it now, I&#39;ll keep you posted on the result"}, {"owner": {"reputation": 139, "user_id": 5581314, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1f08692876a66df8a8fcb54d990ec22b?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhah", "link": "https://stackoverflow.com/users/5581314/mikhah"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1542799889, "post_id": 53410337, "comment_id": 93696964, "body": "@AlekseiMatiushkin looks like this is exactly what I&#39;ve needed, thanks a lot"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1542800535, "post_id": 53410337, "comment_id": 93697317, "body": "@Mikhah cool, welcome."}, {"owner": {"reputation": 139, "user_id": 5581314, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1f08692876a66df8a8fcb54d990ec22b?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhah", "link": "https://stackoverflow.com/users/5581314/mikhah"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1542800878, "post_id": 53410337, "comment_id": 93697520, "body": "@AlekseiMatiushkin make an answer of your comment. so I&#39;ll be able to mark it as correct answer, you&#39;ll gain some points on stack and so on)"}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1542801240, "creation_date": 1542801240, "answer_id": 53411494, "question_id": 53410337, "link": "https://stackoverflow.com/questions/53410337/compare-2-cucumber-json-reports-with-ruby/53411494#53411494", "title": "Compare 2 cucumber JSON reports with ruby", "body": "<p>Since you are asking for a gem, you might try <a href=\"https://github.com/am-kantox/iteraptor\" rel=\"nofollow noreferrer\"><code>iteraptor</code></a> I have created exactly for this kind of tasks.</p>\n\n<p>It allows iterating, mapping and reducing the deeply nested structures. For instance, to filter out all the keys called <code>\"name\"</code> on all levels, you might do:</p>\n\n<pre><code>input.iteraptor.reject(/name/)\n</code></pre>\n\n<p>The more detailed description might be found on the github page linked above.</p>\n"}], "owner": {"reputation": 139, "user_id": 5581314, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/1f08692876a66df8a8fcb54d990ec22b?s=128&d=identicon&r=PG&f=1", "display_name": "Mikhah", "link": "https://stackoverflow.com/users/5581314/mikhah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 53411494, "answer_count": 1, "score": 0, "last_activity_date": 1542801240, "creation_date": 1542796991, "question_id": 53410337, "link": "https://stackoverflow.com/questions/53410337/compare-2-cucumber-json-reports-with-ruby", "title": "Compare 2 cucumber JSON reports with ruby", "body": "<p>The problem is: I have 2 cucumber test reports in JSON format\nI need to remove redundant key-value pairs from those reports and compare them, but I can't understand how to remove the unnecessary data from those 2 jsons because of their structure after JSON.parse (array or hash with many nested arrays/hashes). Please advice if there are some gems or known solutions to do this\nJSON structure is e.g. :</p>\n\n<pre><code>[\n  {\n    \"uri\": \"features/home_screen.feature\",\n    \"id\": \"as-a-user-i-want-to-explore-home-screen\",\n    \"keyword\": \"Feature\",\n    \"name\": \"As a user I want to explore home screen\",\n    \"description\": \"\",\n    \"line\": 2,\n    \"tags\": [\n      {\n        \"name\": \"@home_screen\",\n        \"line\": 1\n      }\n    ],\n    \"elements\": [\n      {\n        \"keyword\": \"Background\",\n        \"name\": \"\",\n        \"description\": \"\",\n        \"line\": 3,\n        \"type\": \"background\",\n        \"before\": [\n          {\n            \"match\": {\n              \"location\": \"features/step_definitions/support/hooks.rb:1\"\n            },\n            \"result\": {\n              \"status\": \"passed\",\n              \"duration\": 505329000\n            }\n          }\n        ],\n        \"steps\": [\n          {\n            \"keyword\": \"Given \",\n            \"name\": \"I click OK button in popup\",\n            \"line\": 4,\n            \"match\": {\n              \"location\": \"features/step_definitions/registration_steps.rb:91\"\n            },\n            \"result\": {\n              \"status\": \"passed\",\n              \"duration\": 2329140000\n            }\n          },\n          {\n            \"keyword\": \"And \",\n            \"name\": \"I click Allow button in popup\",\n            \"line\": 5,\n            \"match\": {\n              \"location\": \"features/step_definitions/registration_steps.rb:96\"\n            },\n            \"result\": {\n              \"status\": \"passed\",\n              \"duration\": 1861776000\n            }\n          }\n        ]\n      },\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 13, "user_id": 8170403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ffa558243c5a0c056a9a7e699de202?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar", "link": "https://stackoverflow.com/users/8170403/sagar"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1542803782, "post_id": 53410217, "comment_id": 93698992, "body": "1):-User must enter the array as input."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8170403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ffa558243c5a0c056a9a7e699de202?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar", "link": "https://stackoverflow.com/users/8170403/sagar"}, "edited": false, "score": 0, "creation_date": 1542802031, "post_id": 53410499, "comment_id": 93698112, "body": "Case is i am getting array from user input, Then, create an empty hash = H=Hash.new{}. After that i need to iterate through that array(user input) and put values into hash values"}, {"owner": {"reputation": 13, "user_id": 8170403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ffa558243c5a0c056a9a7e699de202?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar", "link": "https://stackoverflow.com/users/8170403/sagar"}, "edited": false, "score": 0, "creation_date": 1542802076, "post_id": 53410499, "comment_id": 93698137, "body": "Using for loop only"}], "tags": [], "owner": {"reputation": 802, "user_id": 8728218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/376ec53188ea3ec0271198a862516657?s=128&d=identicon&r=PG&f=1", "display_name": "Dyaniyal Wilson", "link": "https://stackoverflow.com/users/8728218/dyaniyal-wilson"}, "is_accepted": false, "score": 0, "last_activity_date": 1542797469, "creation_date": 1542797469, "answer_id": 53410499, "question_id": 53410217, "link": "https://stackoverflow.com/questions/53410217/ruby-accept-array-as-input-and-put-it-into-hash/53410499#53410499", "title": "Ruby:-- Accept array as input and put it into hash", "body": "<pre><code>A = [1, 6, 4, 5]\nHash[[*'k1'..\"k#{A.length}\"].zip(A)]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 1, "creation_date": 1542798567, "post_id": 53410649, "comment_id": 93696275, "body": "You can use <code>each_with_object</code> and get rid of returning <code>m</code>  <code>a.each_with_object({}).with_index { |(a,m), i| m[&quot;k#{i+1}&quot;] = a }</code>."}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1542798932, "post_id": 53410649, "comment_id": 93696456, "body": "@SebastianPalma Yeah, it is better than I gave, thanks :)"}, {"owner": {"reputation": 13, "user_id": 8170403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ffa558243c5a0c056a9a7e699de202?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar", "link": "https://stackoverflow.com/users/8170403/sagar"}, "edited": false, "score": 0, "creation_date": 1542802018, "post_id": 53410649, "comment_id": 93698108, "body": "case is i am getting array from user input, Then, create an empty hash = H=Hash.new{}. After that i need to iterate through that array(user input) and put values into hash values."}, {"owner": {"reputation": 13, "user_id": 8170403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ffa558243c5a0c056a9a7e699de202?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar", "link": "https://stackoverflow.com/users/8170403/sagar"}, "edited": false, "score": 0, "creation_date": 1542802085, "post_id": 53410649, "comment_id": 93698146, "body": "Using for loop only"}], "tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 1, "last_activity_date": 1542803303, "last_edit_date": 1542803303, "creation_date": 1542797955, "answer_id": 53410649, "question_id": 53410217, "link": "https://stackoverflow.com/questions/53410217/ruby-accept-array-as-input-and-put-it-into-hash/53410649#53410649", "title": "Ruby:-- Accept array as input and put it into hash", "body": "<p>Another solution can be,</p>\n\n<pre><code>a.each_with_index.inject({}) { |m,(a,i)| m[\"k#{i+1}\"] = a; m }\n</code></pre>\n\n<p><strong>Update:</strong> answering to your question</p>\n\n<pre><code>puts 'Enter number of hash elements'\nn = gets.to_i\nn.times |i|\n    hash[\"k#{i+1}\"] = gets.to_i\nend\nputs 'All array elements are assigned to keys in the hash'\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8170403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83ffa558243c5a0c056a9a7e699de202?s=128&d=identicon&r=PG&f=1", "display_name": "Sagar", "link": "https://stackoverflow.com/users/8170403/sagar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1542803303, "creation_date": 1542796638, "question_id": 53410217, "link": "https://stackoverflow.com/questions/53410217/ruby-accept-array-as-input-and-put-it-into-hash", "title": "Ruby:-- Accept array as input and put it into hash", "body": "<p>User must enter the array as input. Hash has to accept the input array elements as values.</p>\n\n<p>Create a Ruby program for this by using loops. If array completed print this statement \u201cAll array elements are assigned to keys in the hash\u201d</p>\n\n<pre><code>A = [1, 6, 4, 5]\nH = {\u201ck1\u201d =&gt; 1\n\u201ck2\u201d =&gt; 6\n\u201ck3\u201d =&gt; 4\n\u201ck4\u201d =&gt; 5}\n</code></pre>\n"}, {"tags": ["css", "ruby-on-rails", "ruby", "twitter-bootstrap-3", "haml"], "comments": [{"owner": {"reputation": 115, "user_id": 7897991, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/0wr6C.jpg?s=128&g=1", "display_name": "Sci Ranch", "link": "https://stackoverflow.com/users/7897991/sci-ranch"}, "edited": false, "score": 0, "creation_date": 1542795870, "post_id": 53409856, "comment_id": 93694678, "body": "You should also consider popper.js. It is a great tooltip javascript library. It definitely simplifies tooltips, and it allows you to control where they are too."}], "answers": [{"tags": [], "owner": {"reputation": 126, "user_id": 5580086, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-eVYfMGBdz_g/AAAAAAAAAAI/AAAAAAAABvE/0I7orojdTDA/photo.jpg?sz=128", "display_name": "Isa Ataseven", "link": "https://stackoverflow.com/users/5580086/isa-ataseven"}, "is_accepted": true, "score": 1, "last_activity_date": 1542799717, "creation_date": 1542799717, "answer_id": 53411126, "question_id": 53409856, "link": "https://stackoverflow.com/questions/53409856/simple-form-label-with-tooltip/53411126#53411126", "title": "Simple Form Label with tooltip", "body": "<p>You can use bootstrap row and column like this.</p>\n\n<pre><code>&lt;html lang=\"en\"&gt;\n&lt;head&gt;\n  &lt;link rel=\"stylesheet\" href=\"https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css\"&gt;\n  &lt;link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\"&gt;\n  &lt;script src=\"https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js\"&gt;&lt;/script&gt;\n  &lt;script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js\"&gt;&lt;/script&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;div class=\"container\"&gt;\n    &lt;div class=\"row\"&gt;\n        &lt;div class=\"col-md-2\"&gt;\n          &lt;label &gt;Label&lt;/label&gt;\n          &lt;i class=\"fa fa-info-circle\" title=\"tooltip\" data-toggle=\"tooltip\" data-placement=\"right\" aria-hidden=\"true\"&gt;&lt;/i&gt;  \n        &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"row\"&gt;\n      &lt;div class=\"col-md-12\"&gt;\n        &lt;input type=\"text\" name=\"usrname\"&gt;&lt;br&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n\n&lt;script&gt;\n$(document).ready(function(){\n    $('[data-toggle=\"tooltip\"]').tooltip();   \n});\n&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>More information about bootstrap Grid system :  <a href=\"https://getbootstrap.com/docs/4.0/layout/grid/\" rel=\"nofollow noreferrer\">GridSystem</a></p>\n"}], "owner": {"reputation": 491, "user_id": 5340764, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/28da3c822efa0da601cbc324e44beecd?s=128&d=identicon&r=PG&f=1", "display_name": "SpongebobJunior", "link": "https://stackoverflow.com/users/5340764/spongebobjunior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1621, "favorite_count": 0, "accepted_answer_id": 53411126, "answer_count": 1, "score": 0, "last_activity_date": 1581309397, "creation_date": 1542795553, "last_edit_date": 1581309397, "question_id": 53409856, "link": "https://stackoverflow.com/questions/53409856/simple-form-label-with-tooltip", "title": "Simple Form Label with tooltip", "body": "<p><a href=\"https://i.stack.imgur.com/yYQfx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yYQfx.png\" alt=\"enter image description here\"></a></p>\n\n<p>I have a simple form input field that has a tooltip. How can I style the tooltip so that it will be beside the input field label?    </p>\n\n<pre><code>= s.input :name, :label =&gt; 'Name', :as =&gt; :string, :input_html =&gt; { :value =&gt; model.name}, :required =&gt; true\n%span.fa.fa-question-circle{\"data-toggle\" =&gt; \"tooltip\", :style =&gt; \"float: right; display:inline-block;\", :title =&gt; \"Your Name\"}\n</code></pre>\n"}, {"tags": ["ruby", "sorting"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1542793965, "post_id": 53409330, "comment_id": 93693587, "body": "Explain &quot;this array&quot;. What logic gives you that? The code you presented will not substitute for that because reading through your code to figure out your intention is an extra burden that the readers should not do, and the fact that is it not complete means that we cannot get the logic by parsing your code."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1542794789, "post_id": 53409330, "comment_id": 93694059, "body": "In what way do you want to merge the arrays? There are indefinitely many ways to do that. What do you mean by &quot;correct value&quot;? How is &quot;sorting&quot; relevant to your issue?"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1542795780, "post_id": 53409873, "comment_id": 93694620, "body": "This &quot;sums&quot;, not &quot;replaces&quot;. What if there are multiple replacement candidates for the same place? It is not specified what to do by the OP, and I&#39;m too lazy to make a full answer, so a nitpicky comment it is :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1542795888, "post_id": 53409873, "comment_id": 93694685, "body": "@SergioTulentsev I am not sure I follow; the result is as needed and if one wants to replace zeroes then the very simple modification is required: add a guard <code>if acc[name][i].zero?</code> in the inner block."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1542795994, "post_id": 53409873, "comment_id": 93694741, "body": "Yep, this guard will fix the imaginary problem"}, {"owner": {"reputation": 155, "user_id": 2516470, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/defeb702ce22293785051e0cac960bc1?s=128&d=identicon&r=PG", "display_name": "Gauthier", "link": "https://stackoverflow.com/users/2516470/gauthier"}, "edited": false, "score": 0, "creation_date": 1542796236, "post_id": 53409873, "comment_id": 93694889, "body": "There won&#39;t be multiple replacement candidates for the same place :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 155, "user_id": 2516470, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/defeb702ce22293785051e0cac960bc1?s=128&d=identicon&r=PG", "display_name": "Gauthier", "link": "https://stackoverflow.com/users/2516470/gauthier"}, "edited": false, "score": 0, "creation_date": 1542796416, "post_id": 53409873, "comment_id": 93695006, "body": "@Gauthier this is the worst mistake the developer can do: to rely on the validness of an input."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1542795950, "last_edit_date": 1542795950, "creation_date": 1542795595, "answer_id": 53409873, "question_id": 53409330, "link": "https://stackoverflow.com/questions/53409330/merge-multiple-arrays/53409873#53409873", "title": "Merge multiple arrays", "body": "<p>Assuming your initial array of arrays is stored in <code>arr</code>:</p>\n\n<pre><code>arr.each_with_object(Hash.new { |h, k| h[k] = [0] * 4 }) do |(name, *vals), acc|\n  (0...vals.size).each { |i| acc[name][i] += vals[i] }\nend.map { |k, v| [k, *v] }\n#\u21d2 [[\"Horse\", 8, 7, 12, 0],\n#   [\"Dog\", 1, 3, 3, 0],\n#   [\"Test\", 5, 0, 2, 2],\n#   [\"Cat\", 5, 2, 4, 0]]\n</code></pre>\n\n<p>The key to the solution is to maintain a hash and convert it to the array in the very end. The hash is easier to lookup and operate in general.</p>\n\n<p>The accumulator uses the default values to simplify adding new values to.</p>\n"}, {"comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 1, "creation_date": 1542798796, "post_id": 53410820, "comment_id": 93696379, "body": "I thought same nearly way :)"}, {"owner": {"reputation": 155, "user_id": 2516470, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/defeb702ce22293785051e0cac960bc1?s=128&d=identicon&r=PG", "display_name": "Gauthier", "link": "https://stackoverflow.com/users/2516470/gauthier"}, "edited": false, "score": 0, "creation_date": 1542820520, "post_id": 53410820, "comment_id": 93709026, "body": "That&#39;s exactly what i wanted to do thanks a lot ! And i didn&#39;t know about transpose, so thank for that :)"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 4, "last_activity_date": 1542862937, "last_edit_date": 1542862937, "creation_date": 1542798529, "answer_id": 53410820, "question_id": 53409330, "link": "https://stackoverflow.com/questions/53409330/merge-multiple-arrays/53410820#53410820", "title": "Merge multiple arrays", "body": "<p>Not certain what the question is, but assuming that the array given is <code>arr</code>, you can get the result by:</p>\n\n<pre><code>arr\n.group_by(&amp;:first)\n.map{|k, v| [k, *v.transpose.drop(1).map{|a| a.inject(:+)}]}\n</code></pre>\n\n<p>or as pointed out by Cary Swoveland:</p>\n\n<pre><code>arr\n.group_by(&amp;:first)\n.map{|k, v| [k, *v.transpose.drop(1).map(&amp;:sum)]}\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>[\n  [\"Horse\", 8, 7, 12, 0],\n  [\"Dog\", 1, 3, 3, 0],\n  [\"Test\", 5, 0, 2, 2],\n  [\"Cat\", 5, 2, 4, 0]\n]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 241, "user_id": 1192471, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3d436ec8e078b174e605f3b9c4d5f0e7?s=128&d=identicon&r=PG", "display_name": "Onur Eren Elibol", "link": "https://stackoverflow.com/users/1192471/onur-eren-elibol"}, "is_accepted": false, "score": 0, "last_activity_date": 1542798688, "creation_date": 1542798688, "answer_id": 53410870, "question_id": 53409330, "link": "https://stackoverflow.com/questions/53409330/merge-multiple-arrays/53410870#53410870", "title": "Merge multiple arrays", "body": "<p>with this you won't have limit after the name of animal <code>[\"Dog\", 1, 4, 5, 0, 6, 3, ...]</code></p>\n\n<pre><code>array.group_by { |obj| obj[0] }.map do |key, values| \n  rest = values.reduce([]) do |memo, value|\n    value[1..-1].each_with_index do |item, i|\n      memo[i] ||= 0\n      memo[i] = [item, memo[i]].max\n    end\n    memo\n  end\n  [key] + rest\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": false, "score": 0, "last_activity_date": 1542798717, "creation_date": 1542798717, "answer_id": 53410876, "question_id": 53409330, "link": "https://stackoverflow.com/questions/53409330/merge-multiple-arrays/53410876#53410876", "title": "Merge multiple arrays", "body": "<p>Following is simple one,</p>\n\n<pre><code>hash = array.group_by(&amp;:first)\nhash.map { |k,v| v.map { |x| x[1..-1] }.transpose.map {|x| x.reduce(:+)}.unshift(k) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1542824834, "last_edit_date": 1542824834, "creation_date": 1542823661, "answer_id": 53418148, "question_id": 53409330, "link": "https://stackoverflow.com/questions/53409330/merge-multiple-arrays/53418148#53418148", "title": "Merge multiple arrays", "body": "<pre><code>arr = [[\"Horse\", 8, 0, 0, 0], [\"Horse\", 0, 0, 12, 0], [\"Horse\", 0, 7, 0, 0],\n       [\"Dog\",   1, 0, 0, 0], [\"Dog\",   0, 0,  3, 0], [\"Dog\",   0, 3, 0, 0],\n       [\"Test\",  5, 0, 0, 0], [\"Test\",  0, 0,  2, 0], [\"Test\",  0, 0, 0, 2],\n       [\"Cat\",   5, 0, 0, 0], [\"Cat\",   0, 0,  4, 0], [\"Cat\",   0, 2, 0, 0]]\n\nrequire 'matrix'\n\narr.each_with_object({}) do |(k,*arr),h|\n  h[k] = h.key?(k) ? (h[k] + Vector[*arr]) : Vector[*arr]\nend.map { |a,v| [a, *v.to_a] }\n  #=&gt; [[\"Horse\", 8, 7, 12, 0],\n  #    [\"Dog\",   1, 3,  3, 0],\n  #    [\"Test\",  5, 0,  2, 2],\n  #    [\"Cat\",   5, 2,  4, 0]]\n</code></pre>\n\n<p>Requiring <code>'matrix'</code> loads the class <a href=\"http://ruby-doc.org/stdlib-2.5.1/libdoc/matrix/rdoc/Vector.html\" rel=\"nofollow noreferrer\">Vector</a> as well as <a href=\"http://ruby-doc.org/stdlib-2.5.1/libdoc/matrix/rdoc/Matrix.html\" rel=\"nofollow noreferrer\">Matrix</a>. See <a href=\"http://ruby-doc.org/stdlib-2.5.1/libdoc/matrix/rdoc/Vector.html#method-c-5B-5D\" rel=\"nofollow noreferrer\">Vector::[]</a>, <a href=\"http://ruby-doc.org/stdlib-2.5.1/libdoc/matrix/rdoc/Vector.html#method-i-2B\" rel=\"nofollow noreferrer\">Vector#+</a> and <a href=\"http://ruby-doc.org/stdlib-2.5.1/libdoc/matrix/rdoc/Vector.html#method-i-to_a\" rel=\"nofollow noreferrer\">Vector#to_a</a>.</p>\n\n<p>This does not require the elements of <code>arr</code> be ordered in any way.</p>\n"}], "owner": {"reputation": 155, "user_id": 2516470, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/defeb702ce22293785051e0cac960bc1?s=128&d=identicon&r=PG", "display_name": "Gauthier", "link": "https://stackoverflow.com/users/2516470/gauthier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "accepted_answer_id": 53410820, "answer_count": 5, "score": -1, "last_activity_date": 1542862937, "creation_date": 1542793916, "last_edit_date": 1542795110, "question_id": 53409330, "link": "https://stackoverflow.com/questions/53409330/merge-multiple-arrays", "title": "Merge multiple arrays", "body": "<p>I have an array of arrays as given below.</p>\n\n<pre><code>[\n  [\"Horse\", 8, 0, 0, 0],\n  [\"Horse\", 0, 0, 12, 0],\n  [\"Horse\", 0, 7, 0, 0],\n  [\"Dog\", 1, 0, 0, 0],\n  [\"Dog\", 0, 0, 3, 0],\n  [\"Dog\", 0, 3, 0, 0],\n  [\"Test\", 5, 0, 0, 0],\n  [\"Test\", 0, 0, 2, 0],\n  [\"Test\", 0, 0, 0, 2],\n  [\"Cat\", 5, 0, 0, 0],\n  [\"Cat\", 0, 0, 4, 0],\n  [\"Cat\", 0, 2, 0, 0]\n]\n</code></pre>\n\n<p>I want to merge the different arrays who start with the same first elements together and replacing the 0 by the value who are at the same position inside the other array, like the result below.</p>\n\n<pre><code>[\n  [\"Horse\", 8, 7, 12, 0],\n  [\"Dog\", 1, 3, 3, 0],\n  [\"Test\", 5, 0, 2, 2],\n  [\"Cat\", 5, 2, 4, 0]\n]\n</code></pre>\n\n<p>So far I have this function:</p>\n\n<pre><code>array.each_with_index do |line, idx|\n  if array[idx+1].present? &amp;&amp; line[0] == array[idx+1][0]\n    line.each_with_index do |l, i|\n      if l != 0 &amp;&amp; array[idx+1][i] == 0\n        array[idx+1][i] = array[idx][i]\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>But it is not completely what I'm trying to do, but i'm close. Does anyone have some insights?</p>\n"}, {"tags": ["ruby", "methods", "constants", "local-variables"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1542791080, "post_id": 53407543, "comment_id": 93691829, "body": "@sawa is it not obvious that the OP simply wants to know why they got an error calling the key value on the constant with a space but not on non-constant object?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 2, "creation_date": 1542792185, "post_id": 53407543, "comment_id": 93692489, "body": "@lacostenycoder At least, it is not written. And you are guessing."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1542794999, "post_id": 53407543, "comment_id": 93694174, "body": "Regarding good/bad/required style comments: even if this worked, this is still terrible style. When reading code, how do you know whether <code>a [b]</code> means <code>a[b]</code> or <code>a([b])</code>?"}], "owner": {"reputation": 101, "user_id": 1122138, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8dc0bcfe9eda78b24bd295b1c53805ee?s=128&d=identicon&r=PG", "display_name": "Michael Latz", "link": "https://stackoverflow.com/users/1122138/michael-latz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1542796831, "creation_date": 1542787224, "last_edit_date": 1542796831, "question_id": 53407543, "link": "https://stackoverflow.com/questions/53407543/space-between-constant-hash-and-bracket-causes-undefined-method-error", "title": "Space between constant hash and bracket causes undefined method error", "body": "<p>This works fine:</p>\n\n<pre><code>hsh = { a: 'str' }\nhsh [:a] # =&gt; \"str\"\n</code></pre>\n\n<p>This works as well:</p>\n\n<pre><code>HSH = { a: 'str' }\nHSH . fetch(:a) #  =&gt; \"str\"\n</code></pre>\n\n<p>This doesn't:</p>\n\n<pre><code>HSH = { a: 'str' }\nHSH [:a] # &gt;&gt; NoMethodError (undefined method `HSH' for main:Object)\n</code></pre>\n\n<p>Why is this the case?\nAnd is this documented anywhere?</p>\n\n<hr>\n\n<p>I'm fiddling around with vertical alignment so if you have this:</p>\n\n<pre><code>var0 = VERTICAL_ALIGN[GREAT]\nvar1 = IS_VERY       [GREAT]\n</code></pre>\n\n<p>You know what's it supposed to do since you have the first line.</p>\n\n<p>But this one works(as well):</p>\n\n<pre><code>var0 = VERTICAL_ALIGN[GREAT]\nvar1 =        IS_VERY[GREAT]\n</code></pre>\n"}, {"tags": ["json", "ruby"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1542784195, "post_id": 53406763, "comment_id": 93688535, "body": "<code>JSON::ParserError : 822: unexpected token</code> means there was a request sent to the server that did not include valid JSON. Are you sure that your log includes the sent data? I guess - because Rails raises that error before even calling the controller - that you will not be able to see the data that was to the application in your log file."}, {"owner": {"reputation": 171, "user_id": 2741394, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1a9c20638f27b927218ac23335ef97d7?s=128&d=identicon&r=PG&f=1", "display_name": "JohnZhang", "link": "https://stackoverflow.com/users/2741394/johnzhang"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1542786345, "post_id": 53406763, "comment_id": 93689394, "body": "The input actually is a zipped data, so it is logged in the error handling."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1542790997, "post_id": 53406763, "comment_id": 93691781, "body": "Can you add the code that unzips and converts to JSON?"}], "owner": {"reputation": 171, "user_id": 2741394, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1a9c20638f27b927218ac23335ef97d7?s=128&d=identicon&r=PG&f=1", "display_name": "JohnZhang", "link": "https://stackoverflow.com/users/2741394/johnzhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 383, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542784199, "creation_date": 1542783518, "last_edit_date": 1542784199, "question_id": 53406763, "link": "https://stackoverflow.com/questions/53406763/randomly-failed-because-of-jsonparsererror-822-unexpected-token", "title": "Randomly failed because of JSON::ParserError : 822: unexpected token", "body": "<p>I have a REST POST API that receives json data and validates parameters. In the production environment, the API sometimes raises an exception:</p>\n\n<pre><code>JSON::ParserError : 822: unexpected token at ...\n</code></pre>\n\n<p>The stack trace is like:</p>\n\n<pre><code>&gt; .../gems/ruby-2.2.10/gems/json-1.8.6/lib/json/common.rb:155:in `parse'\n&gt; .../gems/ruby-2.2.10/gems/json-1.8.6/lib/json/common.rb:155:in `parse'\n&gt; .../gems/ruby-2.2.10/gems/activesupport-4.2.10/lib/active_support/json/decoding.rb:26:in `decode'\n</code></pre>\n\n<p>It seems that the error occurs randomly; I cannot find any pattern.</p>\n\n<p>When I try the same code with the dumped data, there is no parsing error.</p>\n\n<p>I thought the error is due to running in concurrent, but I tried it in local with 1000 concurrent requests, which are far more than in the production environment, and it still works without any error. </p>\n\n<p>I appreciate to throw some light.</p>\n\n<p>What does the <code>822</code> mean in the error message? It does not seem to be the character position in the json data.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4176, "user_id": 1254882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9514908fea209625280aba96c54006?s=128&d=identicon&r=PG&f=1", "display_name": "devanand", "link": "https://stackoverflow.com/users/1254882/devanand"}, "edited": false, "score": 0, "creation_date": 1542794492, "post_id": 53406164, "comment_id": 93693882, "body": "you may look in an other direction. there is a way too find out what fields has been changed in rails. <a href=\"https://api.rubyonrails.org/classes/ActiveModel/Dirty.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveModel/Dirty.html</a>"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 4176, "user_id": 1254882, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba9514908fea209625280aba96c54006?s=128&d=identicon&r=PG&f=1", "display_name": "devanand", "link": "https://stackoverflow.com/users/1254882/devanand"}, "edited": false, "score": 0, "creation_date": 1542854973, "post_id": 53406164, "comment_id": 93720835, "body": "thanks.  that helps for changing the order_status, but not sure how it helps for executing the charge.  ive been told by a more experienced coder than myself i should be creating a controller for each action to accomlish what i want because the way i solved it (down below in the response to my own post) is too &quot;brute&quot;.. it works but im going to look into creating a controller for charging and changing the order_status ... and i assume ill be combining them with a join table but ill see.... if you have any insight on this, feel free to let me know!"}], "answers": [{"comments": [{"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1542926865, "post_id": 53407931, "comment_id": 93751157, "body": "This isn&#39;t going to be an accepted response.  I have been told to explore creating a separate controller for each separate update action.  If anyone has some insight, feel free to comment or respond to the question!"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1544085199, "post_id": 53407931, "comment_id": 94153046, "body": "Update.  I created a new controller for uploading files.  This way i can efficiently handle the uploading and then allow updating on it without worry of charging someone twice. The create action also looks for a previously updloaded file which will block the charge - this is just an added layer of protection aside from the views"}], "tags": [], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "is_accepted": false, "score": 0, "last_activity_date": 1542788977, "creation_date": 1542788977, "answer_id": 53407931, "question_id": 53406164, "link": "https://stackoverflow.com/questions/53406164/having-separate-update-actions-for-different-params-in-controller/53407931#53407931", "title": "Having Separate Update actions for different params in controller?", "body": "<p>This seems to have solved it so far.  :::</p>\n\n<pre><code>def update\n    respond_to do |format|\n      if @order.update(order_status)\n        if user_signed_in?\n          format.html { redirect_to ([@user, @order]), notice: 'Order was successfully order_status.' }\n          format.json { render :show, status: :ok, location: @order }\n        else\n          format.html { render :edit }\n          format.json { render json: @order.errors, status: :unprocessable_entity }\n        end\n      end\n        if @order.update(order_charge)\n          @amount = (@order.order_price).to_i * 100\n          @amount_seller = (@order.order_price).to_i * 75\n          if @order.update(order_charge)\n            if current_user.seller?\n                          charge = Stripe::Charge.create({\n                            :amount      =&gt; (@order.order_price).to_i * 100,\n                            :description =&gt; 'Rails Stripe customer',\n                            :currency    =&gt; 'usd',\n                            :customer =&gt; @order.stripe_customer_token,\n                            :destination =&gt; {\n                              :amount =&gt; @amount_seller ,\n                              :account =&gt; (@order.seller.stripe_token),\n                            }\n                          })\n              @order.order_status = \"charged\"\n              format.html { redirect_to ([@user, @order]), notice: 'Order was successfully uploaded.' }\n              format.json { render :show, status: :ok, location: @order }\n            else\n              format.html { render :edit }\n              format.json { render json: @order.errors, status: :unprocessable_entity }\n            end\n          end\n        end\n        if @order.update(order_params)\n          if user_signed_in?\n            format.html { redirect_to ([@user, @order]), notice: 'Order was successfully updated.' }\n            format.json { render :show, status: :ok, location: @order }\n          else\n            format.html { render :edit }\n            format.json { render json: @order.errors, status: :unprocessable_entity }\n          end\n          if buyer_signed_in?\n            format.html { redirect_to ([@user, @order]), notice: 'Order was successfully updated.' }\n            format.json { render :show, status: :ok, location: @order }\n          else\n            format.html { render :edit }\n            format.json { render json: @order.errors, status: :unprocessable_entity }\n          end\n        end\n      end\n    end\n\nprivate\n\n    def order_params\n      params.require(:order).permit(:name, :email, :image, :video, :description)\n    end\n\n    def order_status\n      params.require(:order).permit(:order_status)\n    end\n\n    def order_charge\n      params.require(:order).permit(:video)\n    end\nend\n</code></pre>\n\n<p>If anyone sees this and thinks they have a better way, please let me know.  I'm not sure how convenient or efficient this may be, (embedding all into one method, etc.)  but it seems to work.  My only issue is that</p>\n\n<ol>\n<li><p>When i change order_status to cancel, no message appears but it works.</p></li>\n<li><p>when i change fill in the video param, the order_status message appears.  Which i understand but i don't understand why it won't appear when i change the status to cancel - and btw, cancel is a enum of \"2\".</p></li>\n</ol>\n"}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1542788977, "creation_date": 1542780514, "last_edit_date": 1542785225, "question_id": 53406164, "link": "https://stackoverflow.com/questions/53406164/having-separate-update-actions-for-different-params-in-controller", "title": "Having Separate Update actions for different params in controller?", "body": "<p><strong>(post updated down below)</strong></p>\n\n<p><strong>My issue:</strong> Is that I need a separate update action for the different params in my controller. I need a general update actions for params (minus params in the separate update actions/methods), an update action for :video, and an update action for :order_status</p>\n\n<p><strong>Question:</strong> How can I efficiently accomplish having multiple update actions in my controller?</p>\n\n<p>Here is an idea of what I want, and it doesn't work:</p>\n\n<pre><code>  def charge_update\n    respond_to do |format|\n      @amount = (@order.order_price).to_i * 100\n      @amount_seller = (@order.order_price).to_i * 75\n      if @order.update(order_charge)\n        if user_signed_in? &amp;&amp; user.seller?\n                      charge = Stripe::Charge.create({\n                        :amount      =&gt; (@order.order_price).to_i * 100,\n                        :description =&gt; 'Rails Stripe customer',\n                        :currency    =&gt; 'usd',\n                        :customer =&gt; @order.stripe_customer_token,\n                        :destination =&gt; {\n                          :amount =&gt; @amount_seller ,\n                          :account =&gt; (@order.seller.stripe_token),\n                        }\n                      })\n          @order.order_status = \"charged\"\n          format.html { redirect_to ([@user, @order]), notice: 'Order was successfully uploaded.' }\n          format.json { render :show, status: :ok, location: @order }\n        else\n          format.html { render :edit }\n          format.json { render json: @order.errors, status: :unprocessable_entity }\n        end\n      end\n    end\n  end\n\n  def cancel_update\n    respond_to do |format|\n      if @order.cancel_update(order_update)\n        if user_signed_in?\n          if @order.order_status = \"cancelled\"\n\n            format.html { redirect_to @order, notice: 'Order was successfully cancelled.' }\n            format.json { render :show, status: :ok, location: @order }\n          else\n            format.html { render :edit }\n            format.json { render json: @order.errors, status: :unprocessable_entity }\n          end\n        end\n      end\n    end\n  end\n\n  def update\n    respond_to do |format|\n      if @order.update( order_params.except(:order_status) )\n        if user_signed_in?\n          format.html { redirect_to ([@user, @order]), notice: 'Order was successfully updated.' }\n          format.json { render :show, status: :ok, location: @order }\n        else\n          format.html { render :edit }\n          format.json { render json: @order.errors, status: :unprocessable_entity }\n        end\n        if buyer_signed_in?\n          format.html { redirect_to ([@user, @order]), notice: 'Order was successfully updated.' }\n          format.json { render :show, status: :ok, location: @order }\n        else\n          format.html { render :edit }\n          format.json { render json: @order.errors, status: :unprocessable_entity }\n        end\n      end\n    end\n  end\n\nprivate\n\n    def order_params\n      params.require(:order).permit(:name, :email, :image,:description)\n    end\n\n    def order_status\n      params.require(:order).permit(:order_status)\n    end\n\n    def order_charge\n      params.require(:order).permit(:video)\n    end\n...\n</code></pre>\n\n<p>My issues with what I need to accomplish:</p>\n\n<p>I want a separate action for when an order_status is changed, for each value. Most importantly, I want a certain message to be displayed depending on the value that the order_status column is changed to.</p>\n\n<p>Most important issue:</p>\n\n<p>I need a separate update action for charging customers. This is most important because i can't just have a customer being charged when someone updates a name, or when a seller updates an order_status, etc.</p>\n\n<p>I'm doing something wrong or i need to set up the routes to have the ability to allow multiple update actions?</p>\n\n<p>So how i can separate the updates and params?</p>\n\n<p><strong><em>UPDATE</em></strong></p>\n\n<p>I embedded the update methods into the one original method like so...</p>\n\n<p>but i have one issue now, the message notices don't appear correct to the update param. The \"Order was successfully updated\" appears, which isn't the customized one for when i upload a video or change the ordeR_status column</p>\n\n<pre><code>  def update\n    respond_to do |format|\n      if params[\"order_status\"]\n        if user_signed_in?\n          format.html { redirect_to ([@user, @order]), notice: 'Order was successfully order_status.' }\n          format.json { render :show, status: :ok, location: @order }\n        else\n          format.html { render :edit }\n          format.json { render json: @order.errors, status: :unprocessable_entity }\n        end\n      end\n        if params[\"video\"]\n          @amount = (@order.order_price).to_i * 100\n          @amount_seller = (@order.order_price).to_i * 75\n          if @order.update(order_charge)\n            if user_signed_in? &amp;&amp; user.seller?\n                          charge = Stripe::Charge.create({\n                            :amount      =&gt; (@order.order_price).to_i * 100,\n                            :description =&gt; 'Rails Stripe customer',\n                            :currency    =&gt; 'usd',\n                            :customer =&gt; @order.stripe_customer_token,\n                            :destination =&gt; {\n                              :amount =&gt; @amount_seller ,\n                              :account =&gt; (@order.seller.stripe_token),\n                            }\n                          })\n              @order.order_status = \"charged\"\n              format.html { redirect_to ([@user, @order]), notice: 'Order was successfully uploaded.' }\n              format.json { render :show, status: :ok, location: @order }\n            else\n              format.html { render :edit }\n              format.json { render json: @order.errors, status: :unprocessable_entity }\n            end\n          end\n        end\n        if @order.update(order_params)\n          if user_signed_in?\n            format.html { redirect_to ([@user, @order]), notice: 'Order was successfully updated.' }\n            format.json { render :show, status: :ok, location: @order }\n          else\n            format.html { render :edit }\n            format.json { render json: @order.errors, status: :unprocessable_entity }\n          end\n          if buyer_signed_in?\n            format.html { redirect_to ([@user, @order]), notice: 'Order was successfully updated.' }\n            format.json { render :show, status: :ok, location: @order }\n          else\n            format.html { render :edit }\n            format.json { render json: @order.errors, status: :unprocessable_entity }\n          end\n        end\n      end\n    end\n</code></pre>\n\n<p><strong>So I have two issues now:</strong></p>\n\n<ol>\n<li>The customized messages don't show</li>\n<li>and under the :video param update, I want the order status to change the \"charged\", but what i currently have doesn't do it</li>\n</ol>\n\n<p>Anyone have any ideas on how to improve this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "ruby-on-rails-5", "acts-as-list"], "answers": [{"comments": [{"owner": {"reputation": 3746, "user_id": 134788, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e8424594187a3e0eb125f6e0a62a2999?s=128&d=identicon&r=PG", "display_name": "Ayrad", "link": "https://stackoverflow.com/users/134788/ayrad"}, "edited": false, "score": 0, "creation_date": 1542791519, "post_id": 53408415, "comment_id": 93692083, "body": "so I don&#39;t have to create a third polymorphic model called content that the other models inherit from that should be positionable?"}, {"owner": {"reputation": 2228, "user_id": 797285, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/155e3a832ac9eda845e10564e4e3c1a1?s=128&d=identicon&r=PG", "display_name": "lafeber", "link": "https://stackoverflow.com/users/797285/lafeber"}, "reply_to_user": {"reputation": 3746, "user_id": 134788, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e8424594187a3e0eb125f6e0a62a2999?s=128&d=identicon&r=PG", "display_name": "Ayrad", "link": "https://stackoverflow.com/users/134788/ayrad"}, "edited": false, "score": 1, "creation_date": 1542792022, "post_id": 53408415, "comment_id": 93692390, "body": "No, and if you don&#39;t mind the types mixing, you can just scope by <code>:playlist</code>"}], "tags": [], "owner": {"reputation": 2228, "user_id": 797285, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/155e3a832ac9eda845e10564e4e3c1a1?s=128&d=identicon&r=PG", "display_name": "lafeber", "link": "https://stackoverflow.com/users/797285/lafeber"}, "is_accepted": true, "score": 1, "last_activity_date": 1542791997, "last_edit_date": 1542791997, "creation_date": 1542790774, "answer_id": 53408415, "question_id": 53405992, "link": "https://stackoverflow.com/questions/53405992/ordering-a-many-to-many-relationship-in-rails/53408415#53408415", "title": "ordering a many_to_many relationship in rails", "body": "<p>You'll need a <code>position</code> field in the <code>contents_playlists</code> (or <code>playlists_contents</code> - as the model is called PlaylistsContents?) table. You can add multiple scopes by using:</p>\n\n<p><code>acts_as_list scope: [:playlist, :link, :media]</code></p>\n\n<p>Edit: added <code>:playlist</code></p>\n"}], "owner": {"reputation": 3746, "user_id": 134788, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e8424594187a3e0eb125f6e0a62a2999?s=128&d=identicon&r=PG", "display_name": "Ayrad", "link": "https://stackoverflow.com/users/134788/ayrad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 53408415, "answer_count": 1, "score": 0, "last_activity_date": 1542791997, "creation_date": 1542779529, "question_id": 53405992, "link": "https://stackoverflow.com/questions/53405992/ordering-a-many-to-many-relationship-in-rails", "title": "ordering a many_to_many relationship in rails", "body": "<p>I would like to implement a drag and drop of a list of items in a playlist.  Playlist contents are of different activerecord types. I need to store the position and persist it in the database and handle the ordering using acts_as_list. I'm not sure I'm building the associations correctly.</p>\n\n<p>I built <strong>has_many_through</strong> relationships using a join table, but I'm not sure how to get acts_as_list to work with this configuration.</p>\n\n<p>My models are like this:</p>\n\n<pre><code>class Playlist &lt; ActiveRecord::Base\n\n  belongs_to :group\n  belongs_to :user\n\n  has_many :links, through: :playlists_contents dependent: :destroy\n  has_many :medias,  through: :playlists_contents dependent: :destroy\nend\n</code></pre>\n\n<p>My migration for the join table looks like this:</p>\n\n<pre><code>class CreateJoinTable &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :contents_playlists do |t|\n      t.belongs_to :link, index: true\n      t.belongs_to :media, index: true\n      t.belongs_to :playlist, index: true\n    end\n  end\n</code></pre>\n\n<p>I have this so far in my join table model:</p>\n\n<pre><code>class PlaylistsContents &lt; ActiveRecord::Base\n\n  default_scope -&gt; { order(position: :asc) }\n\n  default_scope :order =&gt; 'position'\n  belongs_to :playlist\n  belongs_to :link\n  belongs_to :media\n  acts_as_list :scope =&gt; :link\n  acts_as_list :scope =&gt; :media\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "jekyll"], "comments": [{"owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 1, "creation_date": 1542785231, "post_id": 53403684, "comment_id": 93688955, "body": "Simply delete them from file explorer or with a <code>rm -rf ~&#47;path&#47;to&#47;gems&#47;*</code>.   If you&#39;re starting to develop with ruby, you definitely have to look at <a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow noreferrer\">rbenv</a> which allows you to easily run any ruby version you want."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1542789435, "post_id": 53403684, "comment_id": 93690849, "body": "Can you post the full backtrace errors you got? But also see answer I&#39;ve posted."}], "answers": [{"comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1542789457, "post_id": 53404602, "comment_id": 93690863, "body": "this answer made me say to myself... &quot;ain&#39;t nobody got time for that!&quot;"}], "tags": [], "owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "is_accepted": false, "score": 4, "last_activity_date": 1542774013, "last_edit_date": 1542774013, "creation_date": 1542768394, "answer_id": 53404602, "question_id": 53403684, "link": "https://stackoverflow.com/questions/53403684/how-to-start-over-with-a-clean-gems-install-for-jekyll/53404602#53404602", "title": "How to start over with a clean gems install for jekyll?", "body": "<p>You can just run:</p>\n\n<pre><code>gem uninstall [gemname]\n</code></pre>\n\n<p>to remove them one at a time.</p>\n"}, {"comments": [{"owner": {"reputation": 301, "user_id": 8062316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/844cdb76e5b5ab4984ac0abd5525141a?s=128&d=identicon&r=PG&f=1", "display_name": "Kingle", "link": "https://stackoverflow.com/users/8062316/kingle"}, "edited": false, "score": 1, "creation_date": 1542825013, "post_id": 53408019, "comment_id": 93711048, "body": "Thank you. I intend to use ruby for my blog so I&#39;ll definitely check out RVM."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 301, "user_id": 8062316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/844cdb76e5b5ab4984ac0abd5525141a?s=128&d=identicon&r=PG&f=1", "display_name": "Kingle", "link": "https://stackoverflow.com/users/8062316/kingle"}, "edited": false, "score": 0, "creation_date": 1542832463, "post_id": 53408019, "comment_id": 93714400, "body": "@Kingle I highly recommend using RVM.  It will make your life easier."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 4, "last_activity_date": 1542789281, "creation_date": 1542789281, "answer_id": 53408019, "question_id": 53403684, "link": "https://stackoverflow.com/questions/53403684/how-to-start-over-with-a-clean-gems-install-for-jekyll/53408019#53408019", "title": "How to start over with a clean gems install for jekyll?", "body": "<p>It is highly recommend to not use system ruby but use a ruby version manager. One reason is that you won't have to use <code>sudo</code> before your gem commands.</p>\n\n<p>If you want to remove all your current gems you should be able to just do</p>\n\n<pre><code>gem uninstall --all\n</code></pre>\n\n<p>But you might need to prepend it with <code>sudo gem uninstall --all</code></p>\n\n<p>If you intend to do any longer term work / multiple projects with ruby, I recommend using RVM.  You can find <a href=\"https://rvm.io/rvm/install\" rel=\"nofollow noreferrer\">detailed install instructions here</a></p>\n\n<p>Some prefer <a href=\"https://github.com/rbenv/rbenv#installation\" rel=\"nofollow noreferrer\">rbenv</a> however it's install instructions seem to be focused on MacOS, so if you're on linux, I dunno.</p>\n"}], "owner": {"reputation": 301, "user_id": 8062316, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/844cdb76e5b5ab4984ac0abd5525141a?s=128&d=identicon&r=PG&f=1", "display_name": "Kingle", "link": "https://stackoverflow.com/users/8062316/kingle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2390, "favorite_count": 0, "accepted_answer_id": 53408019, "answer_count": 2, "score": 2, "last_activity_date": 1542789281, "creation_date": 1542760473, "question_id": 53403684, "link": "https://stackoverflow.com/questions/53403684/how-to-start-over-with-a-clean-gems-install-for-jekyll", "title": "How to start over with a clean gems install for jekyll?", "body": "<p>I've been working on a blog using Jekyll so I installed Ruby with this command from the Jekyll doc:</p>\n\n<pre><code>sudo apt-get install ruby ruby-dev build-essential\n</code></pre>\n\n<p>Then I installed the gems directory to my home folder. I tried out a lot of different themes and just run <code>bundle install</code> when my terminal said I was missing any dependencies. Now I have a lot of packages installed inside the gems folder. Is there a way for me remove unnecessary gems and start over without uninstall gems?</p>\n"}, {"tags": ["ruby", "postgresql", "activerecord", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 1001, "user_id": 2945977, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c76f28b6eccfe32b63a559aac74a9be5?s=128&d=identicon&r=PG&f=1", "display_name": "sonic", "link": "https://stackoverflow.com/users/2945977/sonic"}, "edited": false, "score": 0, "creation_date": 1542806319, "post_id": 53403206, "comment_id": 93700369, "body": "Let me know if I explained my problem not well enought."}], "answers": [{"comments": [{"owner": {"reputation": 1001, "user_id": 2945977, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c76f28b6eccfe32b63a559aac74a9be5?s=128&d=identicon&r=PG&f=1", "display_name": "sonic", "link": "https://stackoverflow.com/users/2945977/sonic"}, "edited": false, "score": 0, "creation_date": 1542800949, "post_id": 53408580, "comment_id": 93697556, "body": "Thanks for answer. It doesnt have @param_type_localization as value for s\u0142ug type-localization. I need to find posts that fullfill both queries. Post needs to have localization Paris and Type localization house. Im searching for seperate relationships but want to return only common ids/posts"}], "tags": [], "owner": {"reputation": 2228, "user_id": 797285, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/155e3a832ac9eda845e10564e4e3c1a1?s=128&d=identicon&r=PG", "display_name": "lafeber", "link": "https://stackoverflow.com/users/797285/lafeber"}, "is_accepted": false, "score": 0, "last_activity_date": 1542791407, "creation_date": 1542791407, "answer_id": 53408580, "question_id": 53403206, "link": "https://stackoverflow.com/questions/53403206/common-part-in-associations-rails-should-i-use-merge/53408580#53408580", "title": "Common part in associations rails, should I use merge?", "body": "<p>You'll want to combine it in SQL: (untested)</p>\n\n<pre><code>@posts_combined = @posts.merge(CamaleonCms::CustomFieldsRelationship.\nwhere(\"(cama_custom_fields_relationships.custom_field_slug = ? \n  OR cama_custom_fields_relationships.custom_field_slug = 'type-localization') \n  AND LOWER(cama_custom_fields_relationships.value) LIKE ? \", \"localization\", \n  \"%#{@param_localization}%\"))\n</code></pre>\n"}], "owner": {"reputation": 1001, "user_id": 2945977, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c76f28b6eccfe32b63a559aac74a9be5?s=128&d=identicon&r=PG&f=1", "display_name": "sonic", "link": "https://stackoverflow.com/users/2945977/sonic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1543341851, "creation_date": 1542756870, "last_edit_date": 1543341851, "question_id": 53403206, "link": "https://stackoverflow.com/questions/53403206/common-part-in-associations-rails-should-i-use-merge", "title": "Common part in associations rails, should I use merge?", "body": "<p><strong>Update 2</strong></p>\n\n<pre><code>Cama::PostType.first.posts.joins(:custom_field_values)\n.where(\"cama_custom_fields_relationships.custom_field_slug = ? AND \ncama_custom_fields_relationships.value LIKE ?\",\"localization\", \n\"%Paris%\").merge(Cama::PostType.first.posts.joins(:custom_field_values)\n.where(\"cama_custom_fields_relationships.custom_field_slug = ? AND cama_custom_fields_relationships.value = ?\",\"type-localization\", \"2\"))\n</code></pre>\n\n<p>Why this merge doesn't work ?</p>\n\n<p>It returns me same result when executed seperately... Merge should work as intersection so common part should be result. I dont get it</p>\n\n<p><strong>Update</strong></p>\n\n<p>I will try to ask in more conceptual way. </p>\n\n<p>I have model B that have slug:text, value:text, belongs_to: Model A</p>\n\n<p>I have model A that have name:string, has_many: Model B</p>\n\n<p>@posts_one = I search for model B where slug=\"something\", value = \"city\"   </p>\n\n<p>@posts_two = I search for model B where slug=\"mood\", value=\"good\"</p>\n\n<p>I have 2 results based on diffrent parameters. Both belongs_to: model A</p>\n\n<p>Now I want to return only the common <code>belongs_to</code>. \nso if </p>\n\n<p>@posts_one will return me 20 results with model_a_ids</p>\n\n<p>@posts_two will return me 20 results with model_a_ids</p>\n\n<p>I want to return only common model_a_ids of those 2 queries and right away to find posts. I try to make it in one query but dont know if its possible</p>\n\n<p><strong>Oryginal post</strong></p>\n\n<p>I use Camaleon CMS and I try to create filters based on additional \"custom fields\". I think to answer this question you dont have to know this cms. </p>\n\n<p>I want to find common part of 2 queries or make it in one query(that would be the best)</p>\n\n<p>I have </p>\n\n<pre><code>@posts = Cama::PostType.first.posts.includes(:custom_field_values)\n@param_localization = \"Paris\"\n@param_type_localization = \"House\"\n\n\n@posts_one = @posts.merge(CamaleonCms::CustomFieldsRelationship.\nwhere(\"cama_custom_fields_relationships.custom_field_slug = ? AND \nLOWER(cama_custom_fields_relationships.value) LIKE ?\", \"localization\",\n\"%#{@param_localization}%\"))\n\nputs @posts_one.count =&gt; 2\n\n\n@posts_two = @posts.merge(CamaleonCms::CustomFieldsRelationship.where(custom_field_slug:\n\"type-localization\", value: @param_type_localization))\n\nputs @posts_two.count =&gt; 2\n</code></pre>\n\n<p>Question is how can I merge it together or make it one query ? When I made it in one <code>where clause</code> it returns me 0 results since I need to find 2 diffrent custom fields relationships that has diffrent values and slugs but it have relations to posts throught :custom_fields_values, so I have to make 2 queries I guess(like I did). First I find customFieldRelationship with <code>slug = localization</code> and second with <code>slug = type_localization</code> and then I need to find <code>common part</code></p>\n\n<p>I tried to <code>@result = @posts_one.merge(@posts_two)</code> but I got no result then. I thought it will return me \"<strong>common part</strong>\" of association which means <strong>2 results</strong></p>\n\n<p>How can I combine it to find me posts that fullfil both queries ?</p>\n\n<p>Let me know if I explained my problem not well enought.</p>\n"}, {"tags": ["css", "ruby-on-rails", "ruby", "sinatra"], "comments": [{"owner": {"reputation": 1931, "user_id": 8160563, "user_type": "registered", "profile_image": "https://graph.facebook.com/1180392262065252/picture?type=large", "display_name": "Marvin Klar", "link": "https://stackoverflow.com/users/8160563/marvin-klar"}, "edited": false, "score": 1, "creation_date": 1542754988, "post_id": 53402808, "comment_id": 93681100, "body": "Are there any errors in the browsers console?"}, {"owner": {"reputation": 1158, "user_id": 1611339, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7aORl.jpg?s=128&g=1", "display_name": "timbillstrom", "link": "https://stackoverflow.com/users/1611339/timbillstrom"}, "edited": false, "score": 0, "creation_date": 1542757444, "post_id": 53402808, "comment_id": 93681741, "body": "What&#39;s the path (URL) to the page where the CSS isn&#39;t applied?"}, {"owner": {"reputation": 33, "user_id": 10123016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb6617d0696c4725fad370e5f70d345?s=128&d=identicon&r=PG&f=1", "display_name": "slope", "link": "https://stackoverflow.com/users/10123016/slope"}, "edited": false, "score": 0, "creation_date": 1542757823, "post_id": 53402808, "comment_id": 93681826, "body": "So I just checked the browser console, and I&#39;m getting this error: Refused to apply style from &#39;<a href=\"http://localhost:4567/videos/style.css\" rel=\"nofollow noreferrer\">localhost:4567/videos/style.css</a>&#39; because its MIME type (&#39;text/html&#39;) is not a supported stylesheet MIME type, and strict MIME checking is enabled. Do you know how I can resolve this issue?"}, {"owner": {"reputation": 33, "user_id": 10123016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb6617d0696c4725fad370e5f70d345?s=128&d=identicon&r=PG&f=1", "display_name": "slope", "link": "https://stackoverflow.com/users/10123016/slope"}, "reply_to_user": {"reputation": 1158, "user_id": 1611339, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7aORl.jpg?s=128&g=1", "display_name": "timbillstrom", "link": "https://stackoverflow.com/users/1611339/timbillstrom"}, "edited": false, "score": 0, "creation_date": 1542757869, "post_id": 53402808, "comment_id": 93681837, "body": "@timbillstrom it works on all paths except the &quot;localhost:4567/upload_video&quot;"}, {"owner": {"reputation": 1158, "user_id": 1611339, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7aORl.jpg?s=128&g=1", "display_name": "timbillstrom", "link": "https://stackoverflow.com/users/1611339/timbillstrom"}, "edited": false, "score": 0, "creation_date": 1542757999, "post_id": 53402808, "comment_id": 93681869, "body": "@slope Could you send a example of the URL where the CSS is in fact working?"}, {"owner": {"reputation": 33, "user_id": 10123016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb6617d0696c4725fad370e5f70d345?s=128&d=identicon&r=PG&f=1", "display_name": "slope", "link": "https://stackoverflow.com/users/10123016/slope"}, "edited": false, "score": 0, "creation_date": 1542758021, "post_id": 53402808, "comment_id": 93681880, "body": "yes! let me add a snippet."}, {"owner": {"reputation": 1158, "user_id": 1611339, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7aORl.jpg?s=128&g=1", "display_name": "timbillstrom", "link": "https://stackoverflow.com/users/1611339/timbillstrom"}, "edited": false, "score": 0, "creation_date": 1542758249, "post_id": 53402808, "comment_id": 93681922, "body": "@slope There is no 404 errors in the browser console, right?"}, {"owner": {"reputation": 33, "user_id": 10123016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb6617d0696c4725fad370e5f70d345?s=128&d=identicon&r=PG&f=1", "display_name": "slope", "link": "https://stackoverflow.com/users/10123016/slope"}, "reply_to_user": {"reputation": 1158, "user_id": 1611339, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7aORl.jpg?s=128&g=1", "display_name": "timbillstrom", "link": "https://stackoverflow.com/users/1611339/timbillstrom"}, "edited": false, "score": 0, "creation_date": 1542758299, "post_id": 53402808, "comment_id": 93681929, "body": "@timbillstrom negative, no 404 errors!"}, {"owner": {"reputation": 1158, "user_id": 1611339, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7aORl.jpg?s=128&g=1", "display_name": "timbillstrom", "link": "https://stackoverflow.com/users/1611339/timbillstrom"}, "edited": false, "score": 0, "creation_date": 1542758362, "post_id": 53402808, "comment_id": 93681947, "body": "Can you access the URL to the CSS-file directly in your browser? <code>http:&#47;&#47;localhost:4567&#47;videos&#47;style.css</code>"}, {"owner": {"reputation": 33, "user_id": 10123016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb6617d0696c4725fad370e5f70d345?s=128&d=identicon&r=PG&f=1", "display_name": "slope", "link": "https://stackoverflow.com/users/10123016/slope"}, "reply_to_user": {"reputation": 1158, "user_id": 1611339, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7aORl.jpg?s=128&g=1", "display_name": "timbillstrom", "link": "https://stackoverflow.com/users/1611339/timbillstrom"}, "edited": false, "score": 0, "creation_date": 1542759053, "post_id": 53402808, "comment_id": 93682102, "body": "@timbillstrom Negative, I&#39;m not able to. But your solution in the bottom worked! Thank you so much for all your help!!!"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 10123016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb6617d0696c4725fad370e5f70d345?s=128&d=identicon&r=PG&f=1", "display_name": "slope", "link": "https://stackoverflow.com/users/10123016/slope"}, "edited": false, "score": 0, "creation_date": 1542759067, "post_id": 53403459, "comment_id": 93682107, "body": "This worked! I feel a bit silly for not linking the stylesheet correctly, thank you so much for all your help!!!! :)"}, {"owner": {"reputation": 1158, "user_id": 1611339, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7aORl.jpg?s=128&g=1", "display_name": "timbillstrom", "link": "https://stackoverflow.com/users/1611339/timbillstrom"}, "reply_to_user": {"reputation": 33, "user_id": 10123016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb6617d0696c4725fad370e5f70d345?s=128&d=identicon&r=PG&f=1", "display_name": "slope", "link": "https://stackoverflow.com/users/10123016/slope"}, "edited": false, "score": 0, "creation_date": 1542759289, "post_id": 53403459, "comment_id": 93682152, "body": "Glad to be at help @slope , when the browser tried fetching the stylesheets from the incorrect URL, it most likely tried fetching the Rails/Sinatra 404-page as a stylesheet resource, therefore the MIME-type error. I&#39;d be happy if you mark the answer as accepted (:"}], "tags": [], "owner": {"reputation": 1158, "user_id": 1611339, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7aORl.jpg?s=128&g=1", "display_name": "timbillstrom", "link": "https://stackoverflow.com/users/1611339/timbillstrom"}, "is_accepted": true, "score": 2, "last_activity_date": 1542758635, "creation_date": 1542758635, "answer_id": 53403459, "question_id": 53402808, "link": "https://stackoverflow.com/questions/53402808/css-applied-to-all-pages-but-one-ruby-sinatra/53403459#53403459", "title": "CSS applied to all pages but one - Ruby/Sinatra", "body": "<p>I think this might resolve your issue, I think the link to your stylesheets might be broken. \nIf the page is not in the top-path, if it looks something like this:</p>\n\n<blockquote>\n  <p><a href=\"http://localhost/namespace/ThisIsThePage\" rel=\"nofollow noreferrer\">http://localhost/namespace/ThisIsThePage</a></p>\n</blockquote>\n\n<p>In your <code>layout.erb</code>-file, you are refering to the stylesheets using:</p>\n\n<pre><code>href=\"style.css\"\n</code></pre>\n\n<p>In your CSS-imports, I'd recommend to refer to the stylesheets by using e.g:</p>\n\n<pre><code>href=\"/style.css\"\n</code></pre>\n\n<p>Note the slash before the filename. The slash tells the browser that the resource will loaded from the root-path of your webserver. Without the slash, the browser will try to grab the <code>style.css</code> from the path below:</p>\n\n<blockquote>\n  <p><a href=\"http://localhost/namespace/style.css\" rel=\"nofollow noreferrer\">http://localhost/namespace/style.css</a></p>\n</blockquote>\n"}], "owner": {"reputation": 33, "user_id": 10123016, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb6617d0696c4725fad370e5f70d345?s=128&d=identicon&r=PG&f=1", "display_name": "slope", "link": "https://stackoverflow.com/users/10123016/slope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 53403459, "answer_count": 1, "score": 0, "last_activity_date": 1542758635, "creation_date": 1542754420, "last_edit_date": 1542758146, "question_id": 53402808, "link": "https://stackoverflow.com/questions/53402808/css-applied-to-all-pages-but-one-ruby-sinatra", "title": "CSS applied to all pages but one - Ruby/Sinatra", "body": "<p>I'm creating a simple web application with Ruby using Sinatra, and when modifying the views, the CSS is applied to all .erb files except one. I'm not quite sure what the issue is. I've tried:</p>\n\n<ul>\n<li>Clearing my browser cache</li>\n<li>Running the application on a new browser (Chrome, Safari, Firefox, even Edge)</li>\n<li>Running the application on a different device</li>\n<li>Linking the stylesheet directly from the erb file </li>\n</ul>\n\n<p>This is my layout.erb file </p>\n\n<pre><code>&lt;br/&gt;\n&lt;h2&gt;Upload a Video&lt;/h2&gt;\n&lt;br/&gt;\n&lt;br/&gt;\n&lt;form action=\"/create_video\" method=\"POST\"&gt;\n  &lt;div class=\"col-6\"&gt;\n    &lt;label for=\"videoTitle\"&gt;Video Title&lt;/label&gt;\n    &lt;input type=\"text\" class=\"form-control\" aria-describedby=\"emailHelp\" placeholder=\"Enter video title\" name=\"title\"&gt;\n  &lt;/div&gt;\n  &lt;br/&gt;\n  &lt;div class=\"col-6\"&gt;\n    &lt;label for=\"videoDescription\"&gt;Video Description&lt;/label&gt;\n    &lt;input type=\"text\" class=\"form-control\" placeholder=\"Enter video description\" name=\"description\"&gt;\n  &lt;/div&gt;\n  &lt;br/&gt;\n    &lt;br/&gt;\n    &lt;div class=\"col-6\"&gt;\n     &lt;label for=\"videoURL\"&gt;Video Link&lt;/label&gt;\n     &lt;input type=\"text\" class=\"form-control\" placeholder=\"Enter link to video\" name=\"l_url\"&gt;\n    &lt;/div&gt;\n    &lt;br/&gt;\n    &lt;div class=\"col-6\"&gt;\n     &lt;label for=\"listingUrl\"&gt;Company&lt;/label&gt;\n     &lt;input type=\"text\" class=\"form-control\" placeholder=\"Enter company name\" name=\"company\"&gt;\n    &lt;/div&gt;\n    &lt;br/&gt;\n  &amp;nbsp;&amp;nbsp;&lt;button type=\"submit\" class=\"btn btn-primary\"&gt;Submit&lt;/button&gt;\n&lt;/form&gt;\n&lt;br/&gt;\n&lt;br/&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>My layout.erb file </p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;&lt;/title&gt;\n    &lt;link rel=\"stylesheet\" href=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css\" integrity=\"sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm\" crossorigin=\"anonymous\"&gt;\n    &lt;link href=\"https://fonts.googleapis.com/css?family=Roboto:300|Niramit|Nunito\" rel=\"stylesheet\"&gt;\n    &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"style.css\"&gt;\n    &lt;link rel=\"stylesheet\" type=\"text/css\" href=\"animate.css\"&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n    &lt;%= erb :navigation %&gt;\n\n    &lt;main role=\"main\"&gt;\n\n        &lt;%= yield %&gt;\n\n    &lt;/main&gt;\n\n\n    &lt;footer class=\"end\"&gt;\n         &lt;div class=\"footer-grid\"&gt;\n      &lt;div class=\"footer-one\"&gt;\n        &lt;p&gt; logo&lt;p&gt;\n      &lt;/div&gt;\n        &lt;div class=\"footer-two\"&gt;\n            &lt;p&gt;&amp;copy; Copyright Ignite 2018. All rights reserved.&lt;/p&gt;\n            &lt;p&gt;Terms of use \u2022 Press Inquiries \u2022 General Inquiries \u2022 Investors&lt;/p&gt;\n        &lt;/div&gt;\n        &lt;div class=\"footer-three\"&gt;\n        &lt;img src=\"https://image.flaticon.com/icons/svg/185/185981.svg\" width=40 height=40&gt;\n        &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\n        &lt;img src=\"https://image.flaticon.com/icons/svg/185/185961.svg\" width=40 height=40&gt;\n        &amp;nbsp;&amp;nbsp;&amp;nbsp;&amp;nbsp;\n        &lt;img src=\"https://image.flaticon.com/icons/svg/185/185985.svg\" width=40 height=40&gt;\n        &lt;/div&gt;\n    &lt;/footer&gt;\n\n\n    &lt;script src=\"https://code.jquery.com/jquery-3.2.1.slim.min.js\" integrity=\"sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN\" crossorigin=\"anonymous\"&gt;&lt;/script&gt;\n    &lt;script src=\"https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js\" integrity=\"sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q\" crossorigin=\"anonymous\"&gt;&lt;/script&gt;\n    &lt;script src=\"https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js\" integrity=\"sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl\" crossorigin=\"anonymous\"&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Finally, this is a small snippet where the style sheet IS working:</p>\n\n<pre><code>   &lt;br/&gt;\n   &lt;br/&gt;\n   &lt;h2&gt;Videos&lt;/h2&gt;\n   &lt;br/&gt;\n   &lt;br/&gt;\n   &lt;% @videos.each do |v| %&gt;\n      &lt;img src=\"&lt;%= v.logo %&gt;\" width=\"110\" height=\"110\"&gt;\n      &lt;h3&gt;&lt;%= v.title %&gt;&lt;/h3&gt;\n      &lt;p&gt;&lt;%= v.l_url %&gt;&lt;/p&gt;\n      &lt;p&gt;&lt;%= v.description %&gt; &lt;/p&gt;\n   &lt;br/&gt;\n   &lt;% end %&gt;\n   &lt;br/&gt;\n   &lt;br/&gt;\n   &lt;br/&gt;\n   &lt;br/&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Any idea what might be wrong? I appreciate any tips. </p>\n"}, {"tags": ["arrays", "ruby", "hash"], "answers": [{"comments": [{"owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "edited": false, "score": 6, "creation_date": 1542751492, "post_id": 53402184, "comment_id": 93679886, "body": "Or using <code>max_by</code>, <code>hash.max_by { |k,v| v.last.to_f }</code>"}, {"owner": {"reputation": 41, "user_id": 10583554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19a7b36a831eb2f370ea48f9ab2c9112?s=128&d=identicon&r=PG&f=1", "display_name": "Tobyrrr00", "link": "https://stackoverflow.com/users/10583554/tobyrrr00"}, "edited": false, "score": 0, "creation_date": 1542752905, "post_id": 53402184, "comment_id": 93680384, "body": "Thank you guys. You&#39;re a lifesaver."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1542786124, "post_id": 53402184, "comment_id": 93689298, "body": "You are sorting the values alphabetically, not by their numerical value."}], "tags": [], "owner": {"reputation": 59053, "user_id": 555384, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/91f3c86d471f089ca2b3ec5093832ccb?s=128&d=identicon&r=PG", "display_name": "jondavidjohn", "link": "https://stackoverflow.com/users/555384/jondavidjohn"}, "is_accepted": false, "score": 3, "last_activity_date": 1542822753, "last_edit_date": 1542822753, "creation_date": 1542750915, "answer_id": 53402184, "question_id": 53402104, "link": "https://stackoverflow.com/questions/53402104/selecting-the-highest-value-in-attribute-from-hash-of-arrays/53402184#53402184", "title": "Selecting the highest value in attribute from hash of arrays", "body": "<p>You can first sort the hash:</p>\n\n<pre><code>sorted = hash.sort_by { |key, value| value[1].to_f }\n# =&gt; [[352, [\"socks\", \"3.99\"]], [456, [\"pants\", \"49.50\"]], [124, [\"shoes\", \"59.99\"]]]\n</code></pre>\n\n<p>And then you can select the last pair:</p>\n\n<pre><code>sorted[-1]\n# =&gt; [124, [\"shoes\", \"59.99\"]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1542769970, "post_id": 53402599, "comment_id": 93684493, "body": "Notice that this compares the prices as strings, not as floats, and it is not certain whether the OP wanted that."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 1, "last_activity_date": 1542753252, "creation_date": 1542753252, "answer_id": 53402599, "question_id": 53402104, "link": "https://stackoverflow.com/questions/53402104/selecting-the-highest-value-in-attribute-from-hash-of-arrays/53402599#53402599", "title": "Selecting the highest value in attribute from hash of arrays", "body": "<p>If you don\u2019t mind the keys, another option could be:</p>\n\n<p><code>h.values.map(&amp;:reverse).max</code></p>\n\n<p><code>#=&gt; [\"59.99\", \"shoes\"]</code></p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1542767947, "post_id": 53404021, "comment_id": 93684067, "body": "I suggest you show the return value: <code>#=&gt; [124, [&quot;shoes&quot;, &quot;59.99&quot;]]</code>."}], "tags": [], "owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "is_accepted": false, "score": 6, "last_activity_date": 1542786380, "last_edit_date": 1542786380, "creation_date": 1542763477, "answer_id": 53404021, "question_id": 53402104, "link": "https://stackoverflow.com/questions/53402104/selecting-the-highest-value-in-attribute-from-hash-of-arrays/53404021#53404021", "title": "Selecting the highest value in attribute from hash of arrays", "body": "<p>The most idiomatic would probably be this:</p>\n\n<pre><code>h.max_by { |_, v| v.last.to_f }\n#=&gt; [124, [\"shoes\", \"59.99\"]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 5, "last_activity_date": 1542768454, "creation_date": 1542768454, "answer_id": 53404612, "question_id": 53402104, "link": "https://stackoverflow.com/questions/53402104/selecting-the-highest-value-in-attribute-from-hash-of-arrays/53404612#53404612", "title": "Selecting the highest value in attribute from hash of arrays", "body": "<p>You can dig into the structure using parentheses like this:</p>\n\n<pre><code>h = {\n  124 =&gt; [\"shoes\", \"59.99\"],\n  456 =&gt; [\"pants\", \"49.50\"],\n  352 =&gt; [\"socks\", \"3.99\"]\n}\n\nh.max_by{|_, (_, price)| price.to_f}\n# =&gt; [124, [\"shoes\", \"59.99\"]]\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 10583554, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19a7b36a831eb2f370ea48f9ab2c9112?s=128&d=identicon&r=PG&f=1", "display_name": "Tobyrrr00", "link": "https://stackoverflow.com/users/10583554/tobyrrr00"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1542822753, "creation_date": 1542750568, "last_edit_date": 1542786356, "question_id": 53402104, "link": "https://stackoverflow.com/questions/53402104/selecting-the-highest-value-in-attribute-from-hash-of-arrays", "title": "Selecting the highest value in attribute from hash of arrays", "body": "<p>I have this hash:</p>\n\n<pre><code>h = {\n  124 =&gt; [\"shoes\", \"59.99\"],\n  456 =&gt; [\"pants\", \"49.50\"],\n  352 =&gt; [\"socks\", \"3.99\"]\n}\n</code></pre>\n\n<p>Each value has two elements. They are a name (e.g., <code>\"shoes\"</code>, <code>\"pants\"</code>, <code>\"socks\"</code>) and a price (e.g., <code>\"59.99\"</code>, <code>\"49.50\"</code>, and <code>\"3.99\"</code>). I need to select the value that has the highest price. That would be key <code>124</code> with price <code>\"59.99\"</code>. How do I select the hash with the highest price?</p>\n\n<p>I tried this:</p>\n\n<pre><code>h.select{ |x| x[1] }.max\n#=&gt; [456, [\"pants\", \"49.50\"]]\n</code></pre>\n\n<p>But this gives me the max value and returns the key <code>456</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "comments": [{"owner": {"reputation": 95, "user_id": 7668589, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/Q1NYI.jpg?s=128&g=1", "display_name": "Daniel Bailey", "link": "https://stackoverflow.com/users/7668589/daniel-bailey"}, "reply_to_user": {"reputation": 1761, "user_id": 1015289, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e07d153edaeac44c96faea415f09d09b?s=128&d=identicon&r=PG&f=1", "display_name": "Wayne Phipps", "link": "https://stackoverflow.com/users/1015289/wayne-phipps"}, "edited": false, "score": 0, "creation_date": 1542749133, "post_id": 53401725, "comment_id": 93678808, "body": "@WaynePhipps I&#39;ve actually tried that already doing <code>Patient.first(dob: Date.parse(&#39;31-12-2010&#39;))</code>"}], "answers": [{"comments": [{"owner": {"reputation": 95, "user_id": 7668589, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/Q1NYI.jpg?s=128&g=1", "display_name": "Daniel Bailey", "link": "https://stackoverflow.com/users/7668589/daniel-bailey"}, "edited": false, "score": 0, "creation_date": 1542750201, "post_id": 53401960, "comment_id": 93679290, "body": "Thanks, I got it to work. I was forgetting the update part. so <code>Patient.first.update(dob: Date.parse(&#39;31-12-2010&#39;))</code> worked."}], "tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 2, "last_activity_date": 1542749870, "creation_date": 1542749870, "answer_id": 53401960, "question_id": 53401725, "link": "https://stackoverflow.com/questions/53401725/adding-a-date-to-a-date-attribute-in-active-record/53401960#53401960", "title": "Adding a date to a date attribute in active record", "body": "<p>You have two problems:</p>\n\n<ol>\n<li><code>first</code> doesn't take query arguments.</li>\n<li>Your date format is ambiguous.</li>\n</ol>\n\n<p>The <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-first\" rel=\"nofollow noreferrer\"><code>first</code> finder method</a> looks like:</p>\n\n<blockquote>\n  <p><strong>first(limit = nil)</strong><br>\n  Find the first record (or first <code>N</code> records if a parameter is supplied). If no order is defined it will order by primary key.</p>\n</blockquote>\n\n<p>You want to use <code>find_by</code> as your <code>.where(...).first</code> shortcut.</p>\n\n<p>And to avoid ambiguity with your dates, you should use <code>Date</code> objects or ISO-8601 formatted strings (i.e. YYYY-MM-DD) inside the application and leave the supposedly \"human friendly\" formats for the very edges.</p>\n\n<p>You want to say:</p>\n\n<pre><code>Patient.find_by(dob: '1990-01-25')\n</code></pre>\n"}], "owner": {"reputation": 95, "user_id": 7668589, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/Q1NYI.jpg?s=128&g=1", "display_name": "Daniel Bailey", "link": "https://stackoverflow.com/users/7668589/daniel-bailey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 53401960, "answer_count": 1, "score": 0, "last_activity_date": 1542749879, "creation_date": 1542748910, "last_edit_date": 1542749879, "question_id": 53401725, "link": "https://stackoverflow.com/questions/53401725/adding-a-date-to-a-date-attribute-in-active-record", "title": "Adding a date to a date attribute in active record", "body": "<p>I am trying to add a date of birth to each patient in my database and having issues adding a date to the <code>dob</code> attribute on each patient. When I add for ex. <code>Patient.first(dob: \"01/25/1990\")</code> I get an error reading <code>no implicit conversion of Integer into Hash</code>. Any ideas on how I would do so?</p>\n\n<pre><code> create_table \"patients\", force: :cascade do |t|\n    t.string \"first_name\"\n    t.string \"last_name\"\n    t.integer \"age\"\n    t.date \"dob\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n</code></pre>\n\n<p>When I seeded my database, my <code>dob</code> field was <code>nil</code></p>\n\n<p>I have also tried <code>Patient.first(dob: Date.parse('31-12-2010'))</code> and still get the same error.</p>\n"}, {"tags": ["json", "ruby", "string"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1542787972, "post_id": 53400700, "comment_id": 93690103, "body": "<i>&quot;<code>\\</code> inside a string does not escape anything&quot;</i> \u2013 not true, it escapes the <code>&quot;</code> which would otherwise end the string."}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 10682276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/276bf5bb1fdcfe40448e4de8948e92c8?s=128&d=identicon&r=PG", "display_name": "David H", "link": "https://stackoverflow.com/users/10682276/david-h"}, "is_accepted": true, "score": 3, "last_activity_date": 1542788261, "last_edit_date": 1542788261, "creation_date": 1542744449, "answer_id": 53400755, "question_id": 53400700, "link": "https://stackoverflow.com/questions/53400700/inside-a-string-does-not-escape-anything/53400755#53400755", "title": "`\\` inside a string does not escape anything", "body": "<p>I am not very fluent in Ruby, but this is commonly done with <code>\"\\\\\"</code>, resulting in <code>\"\\\"</code></p>\n\n<p>So, <code>\"Lucas Andrade \\\\\\\"My name\\\\\\\"\"</code> should result in what you're looking for, an escaped <code>\\</code> and an escaped <code>\"</code></p>\n"}, {"comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1542745620, "post_id": 53400799, "comment_id": 93677182, "body": "This does not answer the question. He needs the output to include the backslash character and the output of <code>puts &#39;Lucas Andrade &quot;My name&quot;&#39;</code> does not include a backslash."}, {"owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1542745693, "post_id": 53400799, "comment_id": 93677218, "body": "There&#39;s a bit of confusion from OP: ` So when I print my str I should see this: &quot;Lucas Andrade \\&quot;My name\\&quot;&quot;` which my answer does. But OP also says they want the backslash therein."}, {"owner": {"reputation": 2274, "user_id": 7390929, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/WPB1g.jpg?s=128&g=1", "display_name": "Lucas Andrade", "link": "https://stackoverflow.com/users/7390929/lucas-andrade"}, "edited": false, "score": 0, "creation_date": 1542747539, "post_id": 53400799, "comment_id": 93678061, "body": "In ruby <code>puts</code> and <code>print</code> are different, that&#39;s why I said <code>print</code>. In your answer the \\ are just represented by ruby output syntax, the are not part of the string."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1542786897, "post_id": 53400799, "comment_id": 93689626, "body": "<code>puts</code> is like <code>print</code> with newline (if missing)."}], "tags": [], "owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "is_accepted": false, "score": 1, "last_activity_date": 1542744653, "creation_date": 1542744653, "answer_id": 53400799, "question_id": 53400700, "link": "https://stackoverflow.com/questions/53400700/inside-a-string-does-not-escape-anything/53400799#53400799", "title": "`\\` inside a string does not escape anything", "body": "<p>You can wrap it in single quote marks.</p>\n\n<pre><code>str = 'Lucas Andrade \"My name\"'\n=&gt; \"Lucas Andrade \\\"My name\\\"\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1542787807, "post_id": 53400969, "comment_id": 93690026, "body": "The OP should probably generate the whole JSON structure out of a Ruby hash."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 3, "last_activity_date": 1542745431, "creation_date": 1542745431, "answer_id": 53400969, "question_id": 53400700, "link": "https://stackoverflow.com/questions/53400700/inside-a-string-does-not-escape-anything/53400969#53400969", "title": "`\\` inside a string does not escape anything", "body": "<p>When you need to send the string as JSON to an API, why don't you use <code>JSON.generate</code> to escape the string as needed?</p>\n\n<pre><code>JSON.generate(\"Lucas Andrade \\\"My name\\\"\")\n</code></pre>\n"}], "owner": {"reputation": 2274, "user_id": 7390929, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/WPB1g.jpg?s=128&g=1", "display_name": "Lucas Andrade", "link": "https://stackoverflow.com/users/7390929/lucas-andrade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 53400755, "answer_count": 3, "score": 2, "last_activity_date": 1542788261, "creation_date": 1542744159, "last_edit_date": 1542780907, "question_id": 53400700, "link": "https://stackoverflow.com/questions/53400700/inside-a-string-does-not-escape-anything", "title": "`\\` inside a string does not escape anything", "body": "<p>The character <code>\\</code> is used to escape some characters in a string. I need a string that includes <code>\\</code> like this:</p>\n\n<pre><code>str = \"Lucas Andrade \\\"My name\\\"\"\n</code></pre>\n\n<p>When I print <code>str</code>, I should see this:</p>\n\n<pre><code>print str\n# &gt;&gt; Lucas Andrade \\\"My name\\\"\n</code></pre>\n\n<p>I will embed this string directly inside a json param to send an API request using HTTParty like this example:</p>\n\n<pre><code>params {\n  \"name\": \"Lucas\",\n  \"json\": {\n    \"address\": \"some\",\n    \"street\": \"example\",\n    \"string\": \"the custom \\\"string\\\"\"\n  }\n}\n</code></pre>\n\n<p>I think HTTParty does not format this string automatically.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx", "puma", "nginx-config"], "comments": [{"owner": {"reputation": 766, "user_id": 1772133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf9816fbc30091abe048f667191cc81e?s=128&d=identicon&r=PG", "display_name": "Chris Hall", "link": "https://stackoverflow.com/users/1772133/chris-hall"}, "edited": false, "score": 0, "creation_date": 1542742740, "post_id": 53400247, "comment_id": 93675785, "body": "Possibly stupid question, but I know there are some nginx options that are order dependent: have you tried putting the proxy_pass before the proxy_set_header&#39;s?  That&#39;s the only obvious difference I see between your config and the one you referenced."}, {"owner": {"reputation": 954, "user_id": 2539135, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/Ilkwg.jpg?s=128&g=1", "display_name": "Ashish Jambhulkar", "link": "https://stackoverflow.com/users/2539135/ashish-jambhulkar"}, "reply_to_user": {"reputation": 766, "user_id": 1772133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf9816fbc30091abe048f667191cc81e?s=128&d=identicon&r=PG", "display_name": "Chris Hall", "link": "https://stackoverflow.com/users/1772133/chris-hall"}, "edited": false, "score": 0, "creation_date": 1542743080, "post_id": 53400247, "comment_id": 93675949, "body": "@chrisHall I dont think, it is order dependent but still I tried and it didnt work."}], "answers": [{"tags": [], "owner": {"reputation": 551, "user_id": 455537, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/rwYxX.jpg?s=128&g=1", "display_name": "DivXZero", "link": "https://stackoverflow.com/users/455537/divxzero"}, "is_accepted": false, "score": 2, "last_activity_date": 1542747100, "creation_date": 1542747100, "answer_id": 53401330, "question_id": 53400247, "link": "https://stackoverflow.com/questions/53400247/http-origin-header-https-example-com-didnt-match-request-base-url-http-e/53401330#53401330", "title": "HTTP Origin header (https://example.com) didn&#39;t match request.base_url (http://example.com) rails", "body": "<p>I have the exact same setup as you and mine is working with the below proxy config:</p>\n\n<pre><code>  location @rails {\n    proxy_set_header  X-Real-IP $remote_addr;\n    proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header  Host $http_host;\n    proxy_redirect off;\n    proxy_pass http://rails_app;\n  }\n</code></pre>\n\n<p>I think it might be the X-Forwarded-Proto and SSL that might be causing your issue, it isn't necessary behind the proxy.</p>\n"}], "owner": {"reputation": 954, "user_id": 2539135, "user_type": "registered", "accept_rate": 17, "profile_image": "https://i.stack.imgur.com/Ilkwg.jpg?s=128&g=1", "display_name": "Ashish Jambhulkar", "link": "https://stackoverflow.com/users/2539135/ashish-jambhulkar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2690, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1542785480, "creation_date": 1542742262, "last_edit_date": 1542785480, "question_id": 53400247, "link": "https://stackoverflow.com/questions/53400247/http-origin-header-https-example-com-didnt-match-request-base-url-http-e", "title": "HTTP Origin header (https://example.com) didn&#39;t match request.base_url (http://example.com) rails", "body": "<p>I am running Nginx server with the puma on https. I configured Letsencrypt for SSL verification. The problem is that the server is running fine but when I try to create a user through devise it throws this error</p>\n\n<p>\"HTTP Origin header (<a href=\"https://example.com\" rel=\"nofollow noreferrer\">https://example.com</a>) didn't match request.base_url (<a href=\"http://example.com\" rel=\"nofollow noreferrer\">http://example.com</a>)\"</p>\n\n<p>I tried to modify the nginx.conf configuration as specified over here \n<a href=\"https://github.com/rails/rails/issues/22965#issuecomment-172929004\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/issues/22965#issuecomment-172929004</a></p>\n\n<p>but still, no luck here is my configuration file</p>\n\n<pre><code>upstream puma {\n\n  server unix:///home/ubuntu/blue_whale/example/shared/tmp/sockets/gofickle-puma.sock;\n}\n\nserver\n{\n    listen 443 ssl default;\n    server_name example.com;\n    ssl_certificate /etc/letsencrypt/live/example.com/fullchain.pem;\n    ssl_certificate_key /etc/letsencrypt/live/example.com/privkey.pem;\n\n    root /home/ubuntu/blue_whale/example/current/public;\n    access_log /home/ubuntu/blue_whale/example/current/log/nginx.access.log;\n    error_log /home/ubuntu/blue_whale/example/current/log/nginx.error.log info;\n\n    add_header Strict-Transport-Security \u201cmax-age=31536000\u201d;\n\n\n  location ^~ /assets/ {\n    gzip_static on;\n    expires max;\n    add_header Cache-Control public;\n  }\n\n  try_files $uri/index.html $uri @puma;\n  location / {\n    proxy_set_header  Host $host;\n    proxy_set_header  X-Forwarded-For $proxy_add_x_forwarded_for;\n    proxy_set_header  X-Forwarded-Proto $scheme;\n    proxy_set_header  X-Forwarded-Ssl on; # Optional\n    proxy_set_header  X-Forwarded-Port $server_port;\n    proxy_set_header  X-Forwarded-Host $host;\n\n    proxy_pass http://puma;\n  }\n</code></pre>\n"}, {"tags": ["ruby", "irb"], "comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1542742702, "post_id": 53399991, "comment_id": 93675759, "body": "I can understand why there is an error for this. What is the use-case?"}], "answers": [{"comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 2, "creation_date": 1542742533, "post_id": 53400285, "comment_id": 93675665, "body": "Since Ruby 2.4 there&#39;s <code>binding.irb</code> to get the local context. You don&#39;t need pry."}, {"owner": {"reputation": 40466, "user_id": 33226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8f75007bcbcb8ba4daa408592e1c65ec?s=128&d=identicon&r=PG", "display_name": "Gavin Miller", "link": "https://stackoverflow.com/users/33226/gavin-miller"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1542742583, "post_id": 53400285, "comment_id": 93675695, "body": "@Max no way!?!? TIL!"}, {"owner": {"reputation": 1056, "user_id": 9652640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rZGNE.png?s=128&g=1", "display_name": "Min-Soo Pipefeet", "link": "https://stackoverflow.com/users/9652640/min-soo-pipefeet"}, "edited": false, "score": 0, "creation_date": 1542781126, "post_id": 53400285, "comment_id": 93687327, "body": "Thx. Works great. But if I change <code>break</code> to <code>retry</code> or <code>next</code> I can only once <code>Ctrl-C</code> to <i>irb</i>, the following <code>Ctrl-C</code>s are ignored. Any idea why?"}], "tags": [], "owner": {"reputation": 40466, "user_id": 33226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8f75007bcbcb8ba4daa408592e1c65ec?s=128&d=identicon&r=PG", "display_name": "Gavin Miller", "link": "https://stackoverflow.com/users/33226/gavin-miller"}, "is_accepted": true, "score": 3, "last_activity_date": 1542742914, "last_edit_date": 1542742914, "creation_date": 1542742423, "answer_id": 53400285, "question_id": 53399991, "link": "https://stackoverflow.com/questions/53399991/ruby-run-irb-from-trap-context/53400285#53400285", "title": "Ruby: run irb from trap context?", "body": "<blockquote>\n  <p>Ruby 2.0 does not allow Mutex#lock within a signal handler</p>\n</blockquote>\n\n<p>According to this <a href=\"https://bugs.ruby-lang.org/issues/7917\" rel=\"nofollow noreferrer\">bug 7917</a> in ruby lang this is the \"expected\" behaviour. So you've basically found a language bug and a book bug because the author didn't test this example in ruby 2.0 (confirmed that it works in 1.9.)</p>\n\n<p>An alternative method is to use an exception/rescue and execute an <code>IRB</code> session from an interrupt  like this:</p>\n\n<pre><code>require 'irb'\n\ncount = 0\nloop do\n  count += 1\n  puts count\n  puts \"Value = #{@value}\" if defined? @value\n  sleep 1\nrescue Interrupt =&gt; e\n  IRB.start\n  break\nend \n</code></pre>\n\n<p>The above will correctly trap an interrupt and allow an <code>IRB</code> session to start. I did notice that <code>IRB.start</code> won't give you a local execution context, so you may want to look at <code>binding.irb</code> that let's you start a more useful debugging session like this:</p>\n\n<pre><code>$ ruby thread-test.rb\n1\n2\n^C\n[1] irb(main)&gt;\n\nFrom: /work/_scratch/thread-test/thread-test.rb @ line 11 :\n\n     6:   puts count\n     7:   puts \"Value = #{@value}\" if defined? @value\n     8:   sleep 1\n     9: rescue Interrupt =&gt; e\n    10:   binding.irb\n =&gt; 11:   break\n    12: end\n\n[2] irb(main)&gt; e\n=&gt; Interrupt\n[3] irb(main)&gt; count\n=&gt; 2\n</code></pre>\n\n<p>I found a few blog posts on handling <a href=\"https://timuruski.net/blog/2014/signals-traps-and-rescues/\" rel=\"nofollow noreferrer\">Signals, Traps, and Rescues</a> and <a href=\"https://timuruski.net/blog/2014/graceful-shutdown/\" rel=\"nofollow noreferrer\">Graceful Shutdown</a> that may help you further with your problem.</p>\n"}], "owner": {"reputation": 1056, "user_id": 9652640, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rZGNE.png?s=128&g=1", "display_name": "Min-Soo Pipefeet", "link": "https://stackoverflow.com/users/9652640/min-soo-pipefeet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 53400285, "answer_count": 1, "score": 3, "last_activity_date": 1542742914, "creation_date": 1542741256, "question_id": 53399991, "link": "https://stackoverflow.com/questions/53399991/ruby-run-irb-from-trap-context", "title": "Ruby: run irb from trap context?", "body": "<p>The following example is given in the book <em>Programming Ruby 1.9 &amp; 2.0</em>:</p>\n\n<pre><code>require 'irb'\n\ntrap \"INT\" do\n  IRB.start\nend\n\ncount = 0\nloop do\n  count += 1\n  puts count\n  puts \"Value = #{@value}\" if defined? @value\n  sleep 1\nend\n</code></pre>\n\n<p>Unfortunately, if I run this code with my Ruby 2.5.1 setup I get the following <code>ThreadError</code> (<em>run_irb.rb</em> is the name of the file with the code above):</p>\n\n<pre><code>    24: from run_irb.rb:8:in `&lt;main&gt;'\n    23: from run_irb.rb:8:in `loop'\n    22: from run_irb.rb:12:in `block in &lt;main&gt;'\n    21: from run_irb.rb:12:in `sleep'\n    20: from run_irb.rb:4:in `block in &lt;main&gt;'\n    19: from /usr/lib/ruby/2.5.0/irb.rb:376:in `start'\n    18: from /usr/lib/ruby/2.5.0/irb/init.rb:17:in `setup'\n    17: from /usr/lib/ruby/2.5.0/irb/init.rb:112:in `init_config'\n    16: from /usr/lib/ruby/2.5.0/irb/init.rb:112:in `new'\n    15: from /usr/lib/ruby/2.5.0/irb/locale.rb:32:in `initialize'\n    14: from /usr/lib/ruby/2.5.0/irb/locale.rb:108:in `load'\n    13: from /usr/lib/ruby/2.5.0/irb/locale.rb:124:in `find'\n    12: from /usr/lib/ruby/2.5.0/irb/locale.rb:145:in `search_file'\n    11: from /usr/lib/ruby/2.5.0/irb/locale.rb:157:in `each_localized_path'\n    10: from /usr/lib/ruby/2.5.0/irb/locale.rb:167:in `each_sublocale'\n     9: from /usr/lib/ruby/2.5.0/irb/locale.rb:158:in `block in each_localized_path'\n     8: from /usr/lib/ruby/2.5.0/irb/locale.rb:150:in `block in search_file'\n     7: from /usr/lib/ruby/2.5.0/rubygems.rb:213:in `try_activate'\n     6: from /usr/lib/ruby/2.5.0/rubygems/specification.rb:1063:in `find_by_path'\n     5: from /usr/lib/ruby/2.5.0/rubygems/specification.rb:1063:in `find'\n     4: from /usr/lib/ruby/2.5.0/rubygems/specification.rb:1063:in `each'\n     3: from /usr/lib/ruby/2.5.0/rubygems/specification.rb:1064:in `block in find_by_path'\n     2: from /usr/lib/ruby/2.5.0/rubygems/core_ext/kernel_require.rb:40:in `require'\n     1: from /usr/lib/ruby/2.5.0/monitor.rb:185:in `mon_enter'\n/usr/lib/ruby/2.5.0/monitor.rb:185:in `lock': can't be called from trap context (ThreadError)\n</code></pre>\n\n<p>Is there a way to get the irb run from the trap context with Ruby 2.5.1?</p>\n"}, {"tags": ["ruby", "set"], "answers": [{"tags": [], "owner": {"reputation": 28006, "user_id": 960828, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/5dbfc386f986b9d600324cd02dae266d?s=128&d=identicon&r=PG", "display_name": "Alex D", "link": "https://stackoverflow.com/users/960828/alex-d"}, "is_accepted": false, "score": 3, "last_activity_date": 1542738846, "creation_date": 1542738846, "answer_id": 53399381, "question_id": 53399306, "link": "https://stackoverflow.com/questions/53399306/how-does-set-in-ruby-compare-elements/53399381#53399381", "title": "How does Set in ruby compare elements?", "body": "<p>Ruby's built-in <code>Set</code> stores items in a <code>Hash</code>. So for your objects to be treated as the \"same\" by <code>Set</code>, you also need to define a custom <code>hash</code> method. Something like this would work:</p>\n\n<pre><code>def hash\n  @name.hash\nend\n</code></pre>\n\n<p>Use <code>gem which set.rb</code> to see where the source code for <code>Set</code> is stored, and try reading through it. It's clear and well-written. </p>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 5, "last_activity_date": 1542738895, "last_edit_date": 1592644375, "creation_date": 1542738895, "answer_id": 53399393, "question_id": 53399306, "link": "https://stackoverflow.com/questions/53399306/how-does-set-in-ruby-compare-elements/53399393#53399393", "title": "How does Set in ruby compare elements?", "body": "<p>From the <a href=\"https://ruby-doc.org/stdlib-2.5.3/libdoc/set/rdoc/Set.html\" rel=\"noreferrer\">docs</a>:</p>\n<blockquote>\n<p><code>Set</code> uses <code>Hash</code> as storage, so you must note the following points:</p>\n<ul>\n<li>Equality of elements is determined according to <code>Object#eql?</code> and <code>Object#hash</code>. [...]</li>\n</ul>\n</blockquote>\n<p>That said: If you want two people to be equal when they have the same name, then you must implement <code>hash</code> accordingly:</p>\n<pre><code>def hash\n  @name.hash\nend\n</code></pre>\n"}], "owner": {"reputation": 85, "user_id": 4785390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb18caa947b6a96f5b5fa5f9f8d8126b?s=128&d=identicon&r=PG&f=1", "display_name": "YiLuo", "link": "https://stackoverflow.com/users/4785390/yiluo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "accepted_answer_id": 53399393, "answer_count": 2, "score": 2, "last_activity_date": 1542769200, "creation_date": 1542738550, "last_edit_date": 1542769200, "question_id": 53399306, "link": "https://stackoverflow.com/questions/53399306/how-does-set-in-ruby-compare-elements", "title": "How does Set in ruby compare elements?", "body": "<p>I am trying to put custom objects in a set. I tried this:</p>\n\n<pre><code>require 'set'\n\nclass Person\n  include Comparable\n\n  def initialize(name, age)\n    @name = name\n    @age = age\n  end\n  attr_accessor :name, :age\n\n  def ==(other)\n    @name == other.name\n  end\n  alias eql? ==\nend\n\na = Person.new(\"a\", 18)\nb = Person.new(\"a\", 18)\npeople = Set[]\npeople &lt;&lt; a\npeople &lt;&lt; b\n\nputs a == b # true\n</code></pre>\n\n<p>It seems that <code>Set</code> does not identify same objects with <code>Object#eql?</code> or <code>==</code> methods:</p>\n\n<pre><code>puts people # #&lt;Set: {#&lt;Person:0x00007f9e09843df8 @name=\"a\", @age=18&gt;, #&lt;Person:0x00007f9e09843da8 @name=\"a\", @age=18&gt;}&gt;\n</code></pre>\n\n<p>How does <code>Set</code> identify two same objects?</p>\n"}, {"tags": ["ruby", "rubygems"], "owner": {"reputation": 770, "user_id": 1734864, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CDVpk.jpg?s=128&g=1", "display_name": "Adam Westbrook", "link": "https://stackoverflow.com/users/1734864/adam-westbrook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1542739283, "creation_date": 1542738470, "question_id": 53399288, "link": "https://stackoverflow.com/questions/53399288/why-do-gem-install-and-add-runtime-dependency-install-different-versions", "title": "Why do `gem install` and `add_runtime_dependency` install different versions?", "body": "<p>Given that the gem <a href=\"https://rubygems.org/gems/bundle\" rel=\"nofollow noreferrer\">bundle</a>'s (note the missing 'r') only job is to install <code>bundler</code> as a dependency, why is the version being installed different?</p>\n\n<pre><code>root@0879914af1e6:/# gem install bundle --explain\nGems to install:\n  bundle-0.0.1\n  bundler-2.0.0.pre.1\nroot@0879914af1e6:/# gem install bundler --explain\nGems to install:\n  bundler-1.17.1\n</code></pre>\n\n<p>Why does <code>gem install</code> seemingly default to stable packages whereas <code>add_runtime_dependency</code> (as seen in <a href=\"https://github.com/will/bundle/blob/master/bundle.gemspec\" rel=\"nofollow noreferrer\">bundle's gemspec</a>) doesn't?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1542738274, "post_id": 53399120, "comment_id": 93673637, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/34785667/select-consecutive-integers-from-array-in-ruby\">Select consecutive integers from array in Ruby</a>"}, {"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1542738285, "post_id": 53399120, "comment_id": 93673643, "body": "would it not be <code>3, 6, 10, 23, 36, 45, 51?</code>"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1542738372, "post_id": 53399120, "comment_id": 93673690, "body": "What have you tried? Where is the work you have done so far in trying to solve this problem on your own? Why don&#39;t any of the <a href=\"https://stackoverflow.com/search?q=%5Bruby%5D+array+consecutive\">many similar answered questions</a> on stackoverflow answer the question for you?"}, {"owner": {"reputation": 736, "user_id": 695186, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5e8a7008005c6b3cc5e3164b76630517?s=128&d=identicon&r=PG", "display_name": "Ryan Clark", "link": "https://stackoverflow.com/users/695186/ryan-clark"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1542739530, "post_id": 53399120, "comment_id": 93674231, "body": "@anothermh The answer to the possible duplicate you referenced has what I need, but the question is the opposite of what I was trying to do. It&#39;s also flagged as not a very good question. I searched, but most of the questions I found were not doing exactly what I was looking for. Will update my question with the code I first attempted with."}, {"owner": {"reputation": 736, "user_id": 695186, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5e8a7008005c6b3cc5e3164b76630517?s=128&d=identicon&r=PG", "display_name": "Ryan Clark", "link": "https://stackoverflow.com/users/695186/ryan-clark"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1542739773, "post_id": 53399120, "comment_id": 93674345, "body": "@JoshBrody That could be a resulting array, but not what I&#39;m looking for. I really do want the result to exclude each entire group of consecutive numbers."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1542770230, "post_id": 53399252, "comment_id": 93684554, "body": "<code>array = [1,3,0]; arr.select.with_index{ |x, index| (array[index-1] != x-1) &amp;&amp; (array[index+1] != x+1)} #=&gt; [0]</code>. The problem is when <code>index #=&gt; 0</code>, <code>array[index-1] #=&gt; 0</code>."}], "tags": [], "owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "is_accepted": true, "score": 2, "last_activity_date": 1542738325, "creation_date": 1542738325, "answer_id": 53399252, "question_id": 53399120, "link": "https://stackoverflow.com/questions/53399120/remove-groups-of-consecutive-numbers-from-array-in-ruby/53399252#53399252", "title": "Remove groups of consecutive numbers from array in Ruby", "body": "<p>You can use <code>select</code> and check the surrounding values: </p>\n\n<pre><code>array.select.with_index{ |x, index| (array[index-1] != x-1) &amp;&amp; (array[index+1] != x+1)}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1542772576, "post_id": 53399933, "comment_id": 93685081, "body": "Nice one. Invariably, one can flip a coin to decide whether to use <code>Enumerable#chunk_while</code> or <a href=\"http://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-slice_when\" rel=\"nofollow noreferrer\">Enumerable#slice_when</a> (<code>a.slice_when { |a,b| b != a + 1 }...</code>)."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 8, "last_activity_date": 1542780726, "last_edit_date": 1542780726, "creation_date": 1542741023, "answer_id": 53399933, "question_id": 53399120, "link": "https://stackoverflow.com/questions/53399120/remove-groups-of-consecutive-numbers-from-array-in-ruby/53399933#53399933", "title": "Remove groups of consecutive numbers from array in Ruby", "body": "<p>Other option:</p>\n\n<pre><code>array.chunk_while { |i, j| i + 1 == j }.select { |e| e.size == 1 }.flatten\n#=&gt; [6, 23, 45]\n</code></pre>\n\n<p>The good of <a href=\"https://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-chunk_while\" rel=\"nofollow noreferrer\">Enumerable#chunk_while</a> is that it takes two params. The core doc has just an example of a one-by-one increasing subsequence.</p>\n"}], "owner": {"reputation": 736, "user_id": 695186, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5e8a7008005c6b3cc5e3164b76630517?s=128&d=identicon&r=PG", "display_name": "Ryan Clark", "link": "https://stackoverflow.com/users/695186/ryan-clark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 303, "favorite_count": 0, "accepted_answer_id": 53399252, "answer_count": 2, "score": 2, "last_activity_date": 1542780726, "creation_date": 1542737772, "last_edit_date": 1542769612, "question_id": 53399120, "link": "https://stackoverflow.com/questions/53399120/remove-groups-of-consecutive-numbers-from-array-in-ruby", "title": "Remove groups of consecutive numbers from array in Ruby", "body": "<p>I have an array: </p>\n\n<pre><code>[1, 2, 3, 6, 8, 9, 10, 23, 34, 35, 36, 45, 50, 51, ...]\n</code></pre>\n\n<p>I'm trying to remove each group of consecutive numbers so I end up with:</p>\n\n<pre><code>[6, 23, 45, ...]\n</code></pre>\n\n<p>I am looking for anomalies in serial ids.  Does anyone have suggestions?</p>\n\n<p>My initial attempt only checks for the id before each element: </p>\n\n<pre><code>non_consecutive_ids = []\nids.each_with_index do |x, i|\n  unless x == ids[i-1] + 1\n    non_consecutive_ids &lt;&lt; x\n  end\nend\n</code></pre>\n\n<p>The thing I think I was missing was to also check to see if the next element in the array is 1 more than the current. </p>\n"}, {"tags": ["ruby", "metaprogramming"], "answers": [{"tags": [], "owner": {"reputation": 2095, "user_id": 1383990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e58edb37eb72ad8ebd3d584aad0cefe7?s=128&d=identicon&r=PG", "display_name": "Lars Schirrmeister", "link": "https://stackoverflow.com/users/1383990/lars-schirrmeister"}, "is_accepted": true, "score": 1, "last_activity_date": 1542735562, "creation_date": 1542735562, "answer_id": 53398575, "question_id": 53397974, "link": "https://stackoverflow.com/questions/53397974/ruby-metaprogramming-define-method-block-not-maintaining-scope/53398575#53398575", "title": "Ruby metaprogramming: define_method block not maintaining scope", "body": "<p>When you reference the class <code>Base::Test</code> like this, ruby does not take the <code>Base::</code> as the module context to look up constants. That is the normal behaviour and would also not work, if you would define the moethod directly.</p>\n\n<p>But you could do it in this way: </p>\n\n<pre><code>module Base\n  Test.instance_eval do\n    def asdf\n      puts \"Test#asdf called\"\n      Foo.new.info\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 3550687, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17306b2809e923fce9721454e44b2bce?s=128&d=identicon&r=PG&f=1", "display_name": "user3550687", "link": "https://stackoverflow.com/users/3550687/user3550687"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 53398575, "answer_count": 1, "score": 0, "last_activity_date": 1542735562, "creation_date": 1542733324, "question_id": 53397974, "link": "https://stackoverflow.com/questions/53397974/ruby-metaprogramming-define-method-block-not-maintaining-scope", "title": "Ruby metaprogramming: define_method block not maintaining scope", "body": "<p>I'm working on dynamically patching a bunch of classes and methods(most of the time these methods are not simple \"puts\" like a lot of examples I've been able to find on the internet)</p>\n\n<p>Say for instance I have the following code:\nfoo.rb</p>\n\n<pre><code>module Base\n  class Foo\n    def info\n      puts 'Foo#info called'\n    end\n  end \n end\n</code></pre>\n\n<p>&amp; I also have the following class: \ntest.rb</p>\n\n<pre><code>module Base\n  class Test\n    def print\n      puts \"Test#print called\"\n      Foo.new.info\n    end\n  end\nend\n</code></pre>\n\n<p>Then in main.rb I have the following where I want to add a method that uses a class within the same module(Foo in this case)</p>\n\n<pre><code>require_relative './foo'\nrequire_relative './test'\n\n\nnew_method_content = \"puts 'hi'\n                      Foo.new.info\"\n\nBase::Test.instance_eval do\n  def asdf\n    puts \"Test#asdf called\"\n    Foo.new.info\n   end\nend\n</code></pre>\n\n<p>Which, when executed will net the following:</p>\n\n<pre><code>Uncaught exception: uninitialized constant Foo\n</code></pre>\n\n<p>Which sort of makes sense to me because the main.rb file doesn't know that I want Base::Foo, however, I need a way to maintain lookup scope because Base::Test should be able to find the class Foo that I want.</p>\n\n<pre><code>Base::Test.instance_eval do\n  def asdf\n    puts \"Test#asdf called\"\n    Foo.new.info\n   end\nend\n</code></pre>\n\n<p>I've done a fair bit of googling and SO'ing but haven't found anything about how to maintain constant lookup scope while class_eval/instance_eval/module_eval/define_method(I've tried a lot of Ruby's dark magic methods all of which have ended in varying degrees of failure lol)</p>\n\n<p><a href=\"https://cirw.in/blog/constant-lookup\" rel=\"nofollow noreferrer\">https://cirw.in/blog/constant-lookup</a></p>\n\n<blockquote>\n  <p>Confusingly however, if you pass a String to these methods, then the String is evaluated with Module.nesting containing just the class itself (for class_eval) or just the singleton class of the object (for instance_eval).</p>\n</blockquote>\n\n<p>&amp; also this: \n<a href=\"https://bugs.ruby-lang.org/issues/6838\" rel=\"nofollow noreferrer\">https://bugs.ruby-lang.org/issues/6838</a></p>\n\n<blockquote>\n  <p>Evaluates the string or block in the context of <em>mod</em>, except that when\n  a block is given, constant/class variable lookup is not affected.</p>\n</blockquote>\n\n<p>So my question is: \nHow can I redefine a method BUT maintain constant/class scope?</p>\n\n<p>I've been trying a bunch of other things(in the context of main.rb): </p>\n\n<pre><code>Base::Test.class_eval('def asdf; puts \"Test#asdf called\"; Foo.new.info; end')\nBase::Test.new.asdf\n=&gt;\nTest#asdf called\nUncaught exception: uninitialized constant Base::Test::Foo\nDid you mean?  Base::Foo\n</code></pre>\n\n<p>(which is a diff problem in that it's trying to look it up from the evaluated module nesting? I'm not sure why it doesn't try all module paths available from Base::Test though, I would think it would try Base::Test::Foo which doesn't exist, so then it would go up the module tree looking for the class(Base::Foo) which would exist)</p>\n"}, {"tags": ["ruby", "parsing", "dom"], "answers": [{"comments": [{"owner": {"reputation": 17608, "user_id": 661624, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/347231f8387561ef324e25b48b96ba16?s=128&d=identicon&r=PG&f=1", "display_name": "Henley Chiu", "link": "https://stackoverflow.com/users/661624/henley-chiu"}, "edited": false, "score": 0, "creation_date": 1542818618, "post_id": 53404049, "comment_id": 93707957, "body": "I actually don&#39;t want to extract all internal links. I want to check if a link is really a link to a resource. The way I phrased the question is just so I can make it easier for ppl to understand what I want."}], "tags": [], "owner": {"reputation": 841, "user_id": 1110514, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1116ed19b0c89ab4805fdf062d393fa8?s=128&d=identicon&r=PG", "display_name": "Antoine", "link": "https://stackoverflow.com/users/1110514/antoine"}, "is_accepted": false, "score": 0, "last_activity_date": 1542763664, "creation_date": 1542763664, "answer_id": 53404049, "question_id": 53397382, "link": "https://stackoverflow.com/questions/53397382/how-to-tell-if-internal-link-is-pointing-to-a-static-resource/53404049#53404049", "title": "How to tell if internal link is pointing to a static resource?", "body": "<p>Did you think to use a gem for that? Some people already did the job to get this kind of information and you could use it as well.</p>\n\n<p>I quickly find one but there is a few.\nTake a look:\n<a href=\"https://github.com/alexpeattie/nitlink#usage\" rel=\"nofollow noreferrer\">https://github.com/alexpeattie/nitlink#usage</a></p>\n"}], "owner": {"reputation": 17608, "user_id": 661624, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/347231f8387561ef324e25b48b96ba16?s=128&d=identicon&r=PG&f=1", "display_name": "Henley Chiu", "link": "https://stackoverflow.com/users/661624/henley-chiu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542763664, "creation_date": 1542731325, "question_id": 53397382, "link": "https://stackoverflow.com/questions/53397382/how-to-tell-if-internal-link-is-pointing-to-a-static-resource", "title": "How to tell if internal link is pointing to a static resource?", "body": "<p>I am using Ruby to find/store all links in a web page that is pointing to another resource (like another HTML page).</p>\n\n<p>Obviously, links like the below are real links:</p>\n\n<pre><code>&lt;a href=\"/resource\"&gt;Dummy 3&lt;/a&gt;\n</code></pre>\n\n<p>I am encountering links like the below that are not truly links to resources:</p>\n\n<pre><code>&lt;a href=\"#\"&gt;Dummy&lt;/a&gt;\n&lt;a href=\"javascript:void()\"&gt;Dummy 2&lt;/a&gt; //a javascript link could redirect me to another resource, but I am not interested in these\n</code></pre>\n\n<p>I'm trying to come up with a rule on excluding links like the 2 above.</p>\n\n<p>Is there other links I should be excluding, aside from \"#\", and anything that starts with \"javascript:\" ?</p>\n"}, {"tags": ["sql", "ruby", "prolog", "declarative-programming"], "comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 2, "creation_date": 1542731352, "post_id": 53396992, "comment_id": 93670007, "body": "What qualifies as a &quot;declarative language feature&quot;? Ruby&#39;s flexible syntax allows you to define some pretty weird-looking domain-specific-languages, to the point that you could make Ruby look similar to declarative languages like Prolog or SQL. Behind the scenes it would still be OOP, but does that count?"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1542747000, "post_id": 53396992, "comment_id": 93677795, "body": "You&#39;re going to make some judgment calls here depending upon how much of a &quot;purist&quot; you want to be. But if you do a Google search on &quot;declarative programming language&quot; the first few hits are fairly insightful. Firstly, there are several overlapping definitions of what it means for a programming language to be &quot;declarative&quot;. One of the simplistic ones is, &quot;a programming language that allows you to express <i>what</i> you want to do, without indicating <i>how</i> to do it&quot;. By that definition, some of the higher level Ruby class methods could fall into that category. Do some reading, do some thinking. :)"}, {"owner": {"reputation": 303, "user_id": 9722089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c19580d236b7f6feeaf695ee5037e92?s=128&d=identicon&r=PG&f=1", "display_name": "Royale_w_cheese", "link": "https://stackoverflow.com/users/9722089/royale-w-cheese"}, "edited": false, "score": 0, "creation_date": 1542826390, "post_id": 53396992, "comment_id": 93711662, "body": "yes Max it would count, I&#39;m just not sure how i would specifically implement any of the possible declarative features in Ruby. An example or two would be amazing."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1542842287, "post_id": 53396992, "comment_id": 93717988, "body": "@lurker: &quot;higher level Ruby class methods&quot; are not language features but library features."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1542842343, "post_id": 53396992, "comment_id": 93718005, "body": "What is a &quot;declarative language feature&quot;?"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1542848106, "post_id": 53396992, "comment_id": 93719474, "body": "@J&#246;rgWMittag yes, technically you&#39;re right. I was jus thinking in terms of what the language structure lends itself to."}, {"owner": {"reputation": 303, "user_id": 9722089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c19580d236b7f6feeaf695ee5037e92?s=128&d=identicon&r=PG&f=1", "display_name": "Royale_w_cheese", "link": "https://stackoverflow.com/users/9722089/royale-w-cheese"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1542912634, "post_id": 53396992, "comment_id": 93747181, "body": "@Jorg W Mittag Characteristics of declarative languages:  Model of computation based on a system where relationships are specified directly in terms of the constituents of the input data. Made up of sets of definitions or equations describing relations which specify what is to be computed, not how it is to be computed. Non-destructive assignment of variables. Explicit representations for data structures used. Order of execution does not matter (no side effects). Expressions/definitions can be used as values. Programmer no longer responsible for control."}, {"owner": {"reputation": 303, "user_id": 9722089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c19580d236b7f6feeaf695ee5037e92?s=128&d=identicon&r=PG&f=1", "display_name": "Royale_w_cheese", "link": "https://stackoverflow.com/users/9722089/royale-w-cheese"}, "edited": false, "score": 0, "creation_date": 1542913087, "post_id": 53396992, "comment_id": 93747307, "body": "i am having a hard time giving concrete examples of how Ruby uses some/any of these characteristics/features. In all the other programming paradigms I have covered so far, I have been able to easily give concrete examples of how Ruby uses some of their features."}], "owner": {"reputation": 303, "user_id": 9722089, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c19580d236b7f6feeaf695ee5037e92?s=128&d=identicon&r=PG&f=1", "display_name": "Royale_w_cheese", "link": "https://stackoverflow.com/users/9722089/royale-w-cheese"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 241, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542768582, "creation_date": 1542729929, "question_id": 53396992, "link": "https://stackoverflow.com/questions/53396992/declarative-language-features", "title": "Declarative Language Features", "body": "<p>Does the Ruby Programming language contain any declarative language features? I have not been able to find any information on the subject but am supposed to look at all the different programming paradigms and write a report discussing which features from each paradigm that Ruby contains and give examples. This is the first paradigm that I have had problems finding at least one or two features that Ruby contains. Any help is appreciated. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1542729596, "post_id": 53396848, "comment_id": 93669095, "body": "Can you add an example of the expected or preferred output?"}, {"owner": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1542729653, "post_id": 53396848, "comment_id": 93669114, "body": "Yeah of course!"}], "answers": [{"comments": [{"owner": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 1, "creation_date": 1542731108, "post_id": 53397207, "comment_id": 93669883, "body": "Hey, thanks for the answer, will this create separate hashes ? In my case I need 3 hashes all with the same keys but different values"}, {"owner": {"reputation": 1869, "user_id": 1454158, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/00c67acbbd503f63bad53da85439b3a4?s=128&d=identicon&r=PG", "display_name": "Volte", "link": "https://stackoverflow.com/users/1454158/volte"}, "reply_to_user": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 0, "creation_date": 1542738725, "post_id": 53397207, "comment_id": 93673848, "body": "@SaraMoufarrej Ah, so you want an array of hashes, where all the values for each hash are constructed in each iteration of the loop? So, in other words, one hash for each line?"}, {"owner": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 0, "creation_date": 1542738865, "post_id": 53397207, "comment_id": 93673925, "body": "Yes, that&#39;s it exactly!"}], "tags": [], "owner": {"reputation": 1869, "user_id": 1454158, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/00c67acbbd503f63bad53da85439b3a4?s=128&d=identicon&r=PG", "display_name": "Volte", "link": "https://stackoverflow.com/users/1454158/volte"}, "is_accepted": false, "score": 0, "last_activity_date": 1542730697, "creation_date": 1542730697, "answer_id": 53397207, "question_id": 53396848, "link": "https://stackoverflow.com/questions/53396848/move-data-into-3-separate-hashes-inside-loop-in-ruby/53397207#53397207", "title": "Move data into 3 Separate Hashes inside loop in ruby", "body": "<p>You could leverage the fact that your file instance is an <a href=\"https://ruby-doc.org/core-2.5.1/Enumerable.html\" rel=\"nofollow noreferrer\">enumerable</a>. This allows you to leverage the <a href=\"https://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-inject\" rel=\"nofollow noreferrer\"><code>inject</code></a> method, and you can seed that with an empty hash. <code>collector</code> in this case is the hash that gets passed along as the iteration continues. Be sure to (implicitly, by having <code>collector</code> be the last line of the block) return the value of collector as the <code>inject</code> method will use this to feed into the next iteration. It's some pretty powerful stuff!</p>\n\n<p>I <em>think</em> this is roughly what you're going for. I used <code>model</code> as the key in the hash, and <code>set_of_features</code> as your data.</p>\n\n<pre><code>def convertListings2Catalogue (fileName)\n  f = File.open(fileName, \"r\")\n\n  my_hash = f.inject({}) do |collector, line|\n    km=line[/[0-9]+km/]\n    t = line[(Regexp.union(/sedan/i, /coupe/i, /hatchback/i, /station/i, /suv/i))]\n    trans = line[(Regexp.union(/auto/i, /manual/i, /steptronic/i))]\n    dt = line[(Regexp.union(/fwd/i, /rwd/i, /awd/i))]\n    status = line[(Regexp.union(/used/i, /new/i))]\n    car_maker = line[(Regexp.union(/honda/i, /toyota/i, /mercedes/i, /bmw/i, /lexus/i))]  \n    stock = line.scan(/(\\d+[a-z0-9]+[a-z](?&lt;!km\\b))(?:,|$)/i).first\n    year = line.scan(/(\\d{4}(?&lt;!km\\b))(?:,|$)/).first\n    trim = line.scan(/\\b[a-zA-Z]{2}\\b/).first\n    fuel = line.scan(/[\\d.]+L\\/\\d*km/).first\n    set_of_features = line.scan(/\\{(.*?)\\}/).first\n    model = line[(Regexp.union(/camry/i, /clk/i, /crv/i))]\n    collector[model] = set_of_features\n    collector\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 0, "creation_date": 1542731465, "post_id": 53397343, "comment_id": 93670053, "body": "Hey, i&#39;m getting a syntax error <code>q3.rb:22: syntax error, unexpected &#39;:&#39;, expecting &#39;}&#39;   listings.push { kilometers: km, type: t, transmission: t...</code>"}, {"owner": {"reputation": 183, "user_id": 6849656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g3NjQ.png?s=128&g=1", "display_name": "kallelundgren93", "link": "https://stackoverflow.com/users/6849656/kallelundgren93"}, "reply_to_user": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 0, "creation_date": 1542731564, "post_id": 53397343, "comment_id": 93670108, "body": "Try :kilometers =&gt; km etc.!"}, {"owner": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 0, "creation_date": 1542731720, "post_id": 53397343, "comment_id": 93670184, "body": "Yeah i&#39;m still getting the same error  <code>q3.rb:22: syntax error, unexpected =&gt;, expecting &amp;. or :: or &#39;[&#39; or &#39;.&#39; ...h { :kilometers =&gt; km, :type =&gt; t, :transmission =&gt; trans, :... ...                                </code>"}, {"owner": {"reputation": 183, "user_id": 6849656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g3NjQ.png?s=128&g=1", "display_name": "kallelundgren93", "link": "https://stackoverflow.com/users/6849656/kallelundgren93"}, "reply_to_user": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 0, "creation_date": 1542731934, "post_id": 53397343, "comment_id": 93670291, "body": "ah my fault do it like this: listing = { kilometers: km, transmission: tm ........} listings.push listing"}, {"owner": {"reputation": 183, "user_id": 6849656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g3NjQ.png?s=128&g=1", "display_name": "kallelundgren93", "link": "https://stackoverflow.com/users/6849656/kallelundgren93"}, "reply_to_user": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 0, "creation_date": 1542732020, "post_id": 53397343, "comment_id": 93670339, "body": "updated my answer, this doesnt produce the error on my end, so hopefully it works for u!"}, {"owner": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 0, "creation_date": 1542732343, "post_id": 53397343, "comment_id": 93670521, "body": "if I need to access the second, third, etc. listing ? What should i replace <code>.first</code> with ?"}, {"owner": {"reputation": 183, "user_id": 6849656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g3NjQ.png?s=128&g=1", "display_name": "kallelundgren93", "link": "https://stackoverflow.com/users/6849656/kallelundgren93"}, "reply_to_user": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 0, "creation_date": 1542732703, "post_id": 53397343, "comment_id": 93670752, "body": ".first is just a helper for writing listings[0].  You can see more on this <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html\" rel=\"nofollow noreferrer\">link</a>.  Basically it just makes it more readable.  so: listings.first == listings[0], listings.second == listings[1]"}, {"owner": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 0, "creation_date": 1542732929, "post_id": 53397343, "comment_id": 93670889, "body": "I see what you mean, but I can&#39;t seem to access the other features of the remaining car models in my file. listing[1] and listings[2] are empty"}, {"owner": {"reputation": 183, "user_id": 6849656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g3NjQ.png?s=128&g=1", "display_name": "kallelundgren93", "link": "https://stackoverflow.com/users/6849656/kallelundgren93"}, "reply_to_user": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 0, "creation_date": 1542733223, "post_id": 53397343, "comment_id": 93671070, "body": "What happens if you only print out listings, does all listings appear?"}, {"owner": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 0, "creation_date": 1542733287, "post_id": 53397343, "comment_id": 93671104, "body": "No just the first car model: <code>{:kilometers=&gt;&quot;65101km&quot;, :type=&gt;&quot;Sedan&quot;, :transmission=&gt;&quot;Manual&quot;, :drivetrain=&gt;&quot;FWD&quot;, :status=&gt;&quot;Used&quot;, :car_maker=&gt;&quot;Toyota&quot;}</code>"}, {"owner": {"reputation": 183, "user_id": 6849656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g3NjQ.png?s=128&g=1", "display_name": "kallelundgren93", "link": "https://stackoverflow.com/users/6849656/kallelundgren93"}, "reply_to_user": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 0, "creation_date": 1542733381, "post_id": 53397343, "comment_id": 93671156, "body": "Is your <code>listings = []</code> inside your loop? if not edit in your current code in your post and I&#39;ll recreate it on my end."}, {"owner": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 0, "creation_date": 1542733686, "post_id": 53397343, "comment_id": 93671315, "body": "Yeah it&#39;s inside the loop, listings[0] prints the first listing, listings[1] and [2] are empty"}, {"owner": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 0, "creation_date": 1542734294, "post_id": 53397343, "comment_id": 93671630, "body": "hey i fixed it its working now, but do you have any idea how I can skip the white spaces between the lines and not store them in <code>listings[]</code> ? Thanks again"}, {"owner": {"reputation": 183, "user_id": 6849656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g3NjQ.png?s=128&g=1", "display_name": "kallelundgren93", "link": "https://stackoverflow.com/users/6849656/kallelundgren93"}, "reply_to_user": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 0, "creation_date": 1542734601, "post_id": 53397343, "comment_id": 93671784, "body": "Im not really sure which whitespaces you mean, if you could explain more it would be great"}, {"owner": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 0, "creation_date": 1542734879, "post_id": 53397343, "comment_id": 93671932, "body": "In my file, the car models are separated with an empty line just like i showed above, so while iterating each line, the empty line is being stored in my listings[]"}, {"owner": {"reputation": 183, "user_id": 6849656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g3NjQ.png?s=128&g=1", "display_name": "kallelundgren93", "link": "https://stackoverflow.com/users/6849656/kallelundgren93"}, "reply_to_user": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 0, "creation_date": 1542797858, "post_id": 53397343, "comment_id": 93695882, "body": "An easy fix is to wrap the contents of everything in the loop with <code>unless line.blank?</code>. The best fix would be to remove empty lines before looping through it."}], "tags": [], "owner": {"reputation": 183, "user_id": 6849656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g3NjQ.png?s=128&g=1", "display_name": "kallelundgren93", "link": "https://stackoverflow.com/users/6849656/kallelundgren93"}, "is_accepted": false, "score": 0, "last_activity_date": 1542732010, "last_edit_date": 1542732010, "creation_date": 1542731185, "answer_id": 53397343, "question_id": 53396848, "link": "https://stackoverflow.com/questions/53396848/move-data-into-3-separate-hashes-inside-loop-in-ruby/53397343#53397343", "title": "Move data into 3 Separate Hashes inside loop in ruby", "body": "<p>Hope I understood you're question correctly.\nI would do this like below. Now everytime you would call this action it will return a hash with each listing in it. </p>\n\n<pre><code>    def convertListings2Catalogue (fileName)\n      listings = []\n\n      f = File.open(fileName, \"r\")\n      f.each_line do |line|\n\n        km=line[/[0-9]+km/]\n        t = line[(Regexp.union(/sedan/i, /coupe/i, /hatchback/i, /station/i, /suv/i))]\n        trans = line[(Regexp.union(/auto/i, /manual/i, /steptronic/i))]\n        dt = line[(Regexp.union(/fwd/i, /rwd/i, /awd/i))]\n        status = line[(Regexp.union(/used/i, /new/i))]\n        car_maker = line[(Regexp.union(/honda/i, /toyota/i, /mercedes/i, /bmw/i, /lexus/i))]  \n        stock = line.scan(/(\\d+[a-z0-9]+[a-z](?&lt;!km\\b))(?:,|$)/i).first\n        year = line.scan(/(\\d{4}(?&lt;!km\\b))(?:,|$)/).first\n        trim = line.scan(/\\b[a-zA-Z]{2}\\b/).first\n        fuel = line.scan(/[\\d.]+L\\/\\d*km/).first\n        set_of_features = line.scan(/\\{(.*?)\\}/).first\n        model = line[(Regexp.union(/camry/i, /clk/i, /crv/i))]\n\n        listing = { kilometers: km, type: t, transmission: trans, drivetrain: dt, status: status, car_maker: car_maker }\n\n        listings.push listing\n\n        return listings\n      end \n    end\n</code></pre>\n\n<p>Then wherever you use this you could just do.</p>\n\n<pre><code>listnings = convertListings2Catalogue(\"somefile.txt\")\nlistnings.first #to get the first listing \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 2, "creation_date": 1542916594, "post_id": 53404369, "comment_id": 93748459, "body": "Thank you for this very detailed answer, very helpful"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 0, "last_activity_date": 1560702518, "last_edit_date": 1560702518, "creation_date": 1542766109, "answer_id": 53404369, "question_id": 53396848, "link": "https://stackoverflow.com/questions/53396848/move-data-into-3-separate-hashes-inside-loop-in-ruby/53404369#53404369", "title": "Move data into 3 Separate Hashes inside loop in ruby", "body": "<p>I don't fully understand the question but I thought it was important to suggest how you might deal with a more fundamental issue: extracting the desired information from each line of the file in an effective and Ruby-like manner. Once you have that information, in the form of an array of hashes, one hash per line, you can do with it what you want. Alternatively, you could loop through the lines in the file, constructing a hash for each line and performing any desired operations before going on to the next line.</p>\n\n<p>Being new to Ruby you will undoubtedly find some of the code below difficult to understand. If you persevere, however, I think you will be able to understand all of it, and in the process learn a lot about Ruby. I've made some suggestions in the last section of my answer to help you decipher the code.</p>\n\n<p><strong>Code</strong> </p>\n\n<pre><code>words_by_key = {\n  type:         %w| sedan coupe hatchback station suv |,\n  transmission: %w| auto manual steptronic |,\n  drivetrain:   %w| fwd rwd awd |,\n  status:       %w| used new |,\n  car_maker:    %w| honda toyota mercedes bmw lexus |,\n  model:        %w| camry clk crv |\n}\n  #=&gt; {:type=&gt;[\"sedan\", \"coupe\", \"hatchback\", \"station\", \"suv\"],\n  #    :transmission=&gt;[\"auto\", \"manual\", \"steptronic\"],\n  #    :drivetrain=&gt;[\"fwd\", \"rwd\", \"awd\"],\n  #    :status=&gt;[\"used\", \"new\"],\n  #    :car_maker=&gt;[\"honda\", \"toyota\", \"mercedes\", \"bmw\", \"lexus\"],\n  #    :model=&gt;[\"camry\", \"clk\", \"crv\"]}\n\nWORDS_TO_KEYS = words_by_key.each_with_object({}) { |(k,v),h| v.each { |s| h[s] = k } }\n  #=&gt; {\"sedan\"=&gt;:type, \"coupe\"=&gt;:type, \"hatchback\"=&gt;:type, \"station\"=&gt;:type, \"suv\"=&gt;:type,\n  #    \"auto\"=&gt;:transmission, \"manual\"=&gt;:transmission, \"steptronic\"=&gt;:transmission,\n  #    \"fwd\"=&gt;:drivetrain, \"rwd\"=&gt;:drivetrain, \"awd\"=&gt;:drivetrain,\n  #    \"used\"=&gt;:status, \"new\"=&gt;:status,\n  #    \"honda\"=&gt;:car_maker, \"toyota\"=&gt;:car_maker, \"mercedes\"=&gt;:car_maker,\n  #      \"bmw\"=&gt;:car_maker, \"lexus\"=&gt;:car_maker,\n  #    \"camry\"=&gt;:model, \"clk\"=&gt;:model, \"crv\"=&gt;:model}\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>module ExtractionMethods\n  def km(str)\n    str[/\\A\\d+(?=km\\z)/]\n  end\n\n  def year(str)\n    str[/\\A\\d+{4}\\z/]\n  end\n\n  def stock(str)\n    return nil if str.end_with?('km')\n    str[/\\A\\d+\\p{Alpha}\\p{Alnum}*\\z/]\n  end\n\n  def trim(str)\n    str[/\\A\\p{Alpha}{2}\\z/]\n  end\n\n  def fuel_consumption(str)\n    str.to_f if str[/\\A\\d+(?:\\.\\d+)?(?=l\\/100km\\z)/]\n  end\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>class K\n  include ExtractionMethods      \n  def extract_hashes(fname)\n    File.foreach(fname).with_object([]) do |line, arr|\n      line = line.downcase\n      idx_left = line.index('{')\n      idx_right = line.index('}')\n      if idx_left &amp;&amp; idx_right    \n        g = { set_of_features: line[idx_left..idx_right] }\n        line[idx_left..idx_right] = ''\n        line.squeeze!(',')\n      else\n        g = {}\n      end\n      arr &lt;&lt; line.split(',').each_with_object(g) do |word, h|\n        word.strip!\n        if WORDS_TO_KEYS.key?(word)\n          h[WORDS_TO_KEYS[word]] = word\n        else\n          ExtractionMethods.instance_methods.find do |m|\n            v = public_send(m, word)\n            (h[m] = v) unless v.nil?\n            v\n          end\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p><strong>Example</strong></p>\n\n<pre><code>data =&lt;&lt;BITTER_END\n65101km,Sedan,Manual,2010,18131A,FWD,Used,5.5L/100km,Toyota,camry,SE,{AC, Heated Seats, Heated Mirrors, Keyless Entry}\ncoupe,1100km,auto,RWD, Mercedec,CLK,LX ,18FO724A,2017,{AC, Heated Seats, Heated Mirrors, Keyless Entry, Power seats},6L/100km,Used\nAWD,SUV,0km,auto,new,Honda,CRV,8L/100km,{Heated Seats, Heated Mirrors, Keyless Entry},19BF723A,2018,LE\nBITTER_END\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>FILE_NAME = 'temp'\nFile.write(FILE_NAME, data)\n  #=&gt; 353 (characters written to file)\n\nk = K.new\n  #=&gt; #&lt;K:0x00000001c257d348&gt;\nk.extract_hashes(FILE_NAME)\n  #=&gt; [{:set_of_features=&gt;\"{ac, heated seats, heated mirrors, keyless entry}\",\n  #     :km=&gt;\"65101\", :type=&gt;\"sedan\", :transmission=&gt;\"manual\", :year=&gt;\"2010\",\n  #     :stock=&gt;\"18131a\", :drivetrain=&gt;\"fwd\", :status=&gt;\"used\", :fuel_consumption=&gt;5.5,\n  #     :car_maker=&gt;\"toyota\", :model=&gt;\"camry\", :trim=&gt;\"se\"},\n  #    {:set_of_features=&gt;\"{ac, heated seats, heated mirrors, keyless entry, power seats}\",\n  #     :type=&gt;\"coupe\", :km=&gt;\"1100\", :transmission=&gt;\"auto\", :drivetrain=&gt;\"rwd\",\n  #     :model=&gt;\"clk\", :trim=&gt;\"lx\", :stock=&gt;\"18fo724a\", :year=&gt;\"2017\",\n  #     :fuel_consumption=&gt;6.0, :status=&gt;\"used\"},\n  #    {:set_of_features=&gt;\"{heated seats, heated mirrors, keyless entry}\",\n  #     :drivetrain=&gt;\"awd\", :type=&gt;\"suv\", :km=&gt;\"0\", :transmission=&gt;\"auto\",\n  #     :status=&gt;\"new\", :car_maker=&gt;\"honda\", :model=&gt;\"crv\", :fuel_consumption=&gt;8.0,\n  #     :stock=&gt;\"19bf723a\", :year=&gt;\"2018\", :trim=&gt;\"le\"}]\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>Firstly, note that the HEREDOC needs to be un-indented before being executed.</p>\n\n<p>You will see that the instance method <code>K#extract_hashes</code> uses <a href=\"http://ruby-doc.org/core-2.5.1/IO.html#method-c-foreach\" rel=\"nofollow noreferrer\">IO#foreach</a> to read the file line-by-line.<sup>1</sup> </p>\n\n<p>The first step in processing each line of the file is to downcase it. You will then want to split the string on commas to form an array of words. There is a problem, however, in that you don't want to split on commas that are between a left and right brace (<code>{</code> and <code>}</code>), which corresponds to the key <code>:set_of_features</code>. I decided to deal with that by determining the indices of the two braces, creating a hash with the single key <code>:set_of_features</code>, delete that substring from the line and lastly replace a resulting pair of adjacent commas with a single comma:</p>\n\n<pre><code>  idx_left = line.index('{')\n  idx_right = line.index('}')\n  if idx_left &amp;&amp; idx_right    \n    g = { set_of_features: line[idx_left..idx_right] }\n    line[idx_left..idx_right] = ''\n    line.squeeze!(',')\n  else\n    g = {}\n  end\n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.5.1/String.html\" rel=\"nofollow noreferrer\">String</a> for the documentation of the <code>String</code> methods used here and elsewhere.</p>\n\n<p>We can now convert the resulting <code>line</code> to an array of words by splitting on the commas. If any capitalization is desired in the output this should be done after the hashes have been constructed.</p>\n\n<p>We will build on the hash <code>{ set_of_features: line[idx_left..idx_right] }</code> just created. When complete, it will be appended to the array being returned.</p>\n\n<p>Each element (<code>word</code>) in the array, is then processed. If it is a key of the hash <code>WORDS_TO_KEYS</code> we set</p>\n\n<pre><code>h[WORDS_TO_KEYS[word]] = word\n</code></pre>\n\n<p>and are finished with that word. If not, we execute each of the instance methods <code>m</code> in the module <code>ExtractionMethods</code> until one is found for which <code>m[word]</code> is not <code>nil</code>. When that is found another key-value pair is added to the hash <code>h</code>:</p>\n\n<pre><code>h[m] = word\n</code></pre>\n\n<p>Notice that the name of each instance method in <code>ExtractionMethods</code>, which is a symbol (e.g., <code>:km</code>), is a key in the hash <code>h</code>. Having separate methods facilitates debugging and testing.</p>\n\n<p>I could have written:</p>\n\n<pre><code>if    (s = km(word))\n  s\nelsif (s = year(word))\n  s\nelsif (s = stock(str))\n  s\nelsif (s = trim(str))\n  s\nelsif (s = fuel_consumption(str))\n  s\nend\n</code></pre>\n\n<p>but since all these methods take the same argument, <code>word</code>, we can instead use <a href=\"https://ruby-doc.org/core-2.5.3/Object.html#method-i-public_send\" rel=\"nofollow noreferrer\">Object#public_send</a>:</p>\n\n<pre><code>a = [:km, :year, :stock, :trim, :fuel_consumption]\n\na.find do |m|\n  v = public_send(m, word)\n  (h[m] = v) unless v.nil?\n  v \nend\n</code></pre>\n\n<p>A final tweak is to put all the methods in the array <code>a</code> in a module <code>ExtractionMethods</code> and include that module in the class <code>K</code>. We can then replace <code>a</code> in the <code>find</code> expression above with <code>ExtractionMethods.instance_methods</code>. (See <a href=\"http://ruby-doc.org/core-2.5.1/Module.html#method-i-instance_methods\" rel=\"nofollow noreferrer\">Module#instance_methods</a>.)</p>\n\n<p>Suppose now that the data are changed so that additional fields are added (e.g., for \"colour\" or \"price\"). Then the <em>only</em> modifications to the code required are changes to <code>words_by_key</code> and/or the addition of methods to <code>ExtractionMethods</code>.</p>\n\n<p><strong>Understanding the code</strong></p>\n\n<p>It may be helpful to run the code with <code>puts</code> statements inserted. For example,</p>\n\n<pre><code>idx_left = line.index('{')\nidx_right = line.index('}')\nputs \"idx_left=#{idx_left}, idx_left=#{idx_left}\"\n</code></pre>\n\n<p>Where code is <em>chained</em> it may be helpful to break it up with temporary variables and insert <code>puts</code> statements. For example, change</p>\n\n<pre><code>arr &lt;&lt; line.split(',').each_with_object(g) do |word, h|\n  ...\n</code></pre>\n\n<p>to</p>\n\n<pre><code>a = line.split(',')\nputs \"line.split(',')=#{a}\"\nenum = a.each_with_object(g)\nputs \"enum.to_a=#{enum.to_a}\"\narr &lt;&lt; enum do |word, h|\n  ...\n</code></pre>\n\n<p>The second <code>puts</code> here is merely to see what elements the enumerator <code>enum</code> will generate and pass to the block.</p>\n\n<p>Another way of doing that is to use the handy method <a href=\"http://ruby-doc.org/core-2.5.1/Object.html#method-i-tap\" rel=\"nofollow noreferrer\">Object#tap</a>, which is inserted between two methods:</p>\n\n<pre><code>arr &lt;&lt; line.split(',').tap { |a| puts \"line.split(',')=#{a}\"}.\n            each_with_object(g) do |word, h|\n              ...\n</code></pre>\n\n<p><code>tap</code> (great name, eh?), as used here, simply returns its receiver after displaying its value.</p>\n\n<p>Lastly, I've used the method <a href=\"http://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-each_with_object\" rel=\"nofollow noreferrer\">Enumerable#each_with_object</a> in a couple of places. It may seem complex but it's actually quite simple. For example,</p>\n\n<pre><code>arr &lt;&lt; line.split(',').each_with_object(g) do |word, h|\n  ...\nend\n</code></pre>\n\n<p>is effectively equivalent to:</p>\n\n<pre><code>h = g\narr &lt;&lt; line.split(',').each do |word|\n  ...\nend\nh\n</code></pre>\n\n<p><sup>1 Many <a href=\"http://ruby-doc.org/core-2.5.1/IO.html\" rel=\"nofollow noreferrer\">IO</a> methods are typically invoked on <a href=\"http://ruby-doc.org/core-2.5.1/File.html\" rel=\"nofollow noreferrer\">File</a>. This is acceptable because <code>File.superclass #=&gt; IO</code>.</sup></p>\n"}], "owner": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 53404369, "answer_count": 3, "score": 0, "last_activity_date": 1560702518, "creation_date": 1542729413, "last_edit_date": 1542741480, "question_id": 53396848, "link": "https://stackoverflow.com/questions/53396848/move-data-into-3-separate-hashes-inside-loop-in-ruby", "title": "Move data into 3 Separate Hashes inside loop in ruby", "body": "<p>It's only my second post and I'm still learning ruby. \nI'm trying to figure this out based on my Java knowledge but I can't seem to get it right. </p>\n\n<p>What I need to do is: \nI have a function that reads a file line by line and extract different car features from each line, for example: </p>\n\n<pre><code>def convertListings2Catalogue (fileName)\n\nf = File.open(fileName, \"r\")\nf.each_line do |line|\n\n  km=line[/[0-9]+km/]\n  t = line[(Regexp.union(/sedan/i, /coupe/i, /hatchback/i, /station/i, /suv/i))]\n  trans = ....\nend end\n</code></pre>\n\n<blockquote>\n  <p>Now for each line I need to store the extracted features into separate\n  hashes that I can access later in my program.</p>\n  \n  <p>The issues I'm facing: \n  1) I'm overwriting the features in the same hash\n  2) Can't access the hash outside my function</p>\n</blockquote>\n\n<p>That what's in my file: </p>\n\n<blockquote>\n  <p>65101km,Sedan,Manual,2010,18131A,FWD,Used,5.5L/100km,Toyota,camry,SE,{AC,\n  Heated Seats, Heated Mirrors, Keyless Entry}</p>\n  \n  <p>coupe,1100km,auto,RWD, Mercedec,CLK,LX ,18FO724A,2017,{AC, Heated\n  Seats, Heated Mirrors, Keyless Entry, Power seats},6L/100km,Used</p>\n  \n  <p>AWD,SUV,0km,auto,new,Honda,CRV,8L/100km,{Heated Seats, Heated Mirrors,\n  Keyless Entry},19BF723A,2018,LE</p>\n</blockquote>\n\n<p>Now my function extracts the features of each car model, but I need to store these features in 3 different hashes with the same keys but different values. </p>\n\n<pre><code>listing = Hash.new(0)\n  listing = { kilometers: km, type: t, transmission: trans, drivetrain: dt, status: status, car_maker: car_maker }\n</code></pre>\n\n<p>I tried moving the data from one hash to another, I even tried storing the data in an array first and then moving it to the hash but I still can't figure out how to create separate hashes inside a loop.<br>\n<strong>Thanks</strong></p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 1, "creation_date": 1542741815, "post_id": 53396521, "comment_id": 93675323, "body": "This is because <code>:product == &#39;product&#39; #=&gt; false</code>"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1542772868, "post_id": 53396521, "comment_id": 93685146, "body": "Your hash does not have a key <code>&quot;product&quot;</code> (although you have key <code>:product</code>). Don&#39;t use (hash) literals without knowing what it means."}], "answers": [{"tags": [], "owner": {"reputation": 183, "user_id": 6849656, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/g3NjQ.png?s=128&g=1", "display_name": "kallelundgren93", "link": "https://stackoverflow.com/users/6849656/kallelundgren93"}, "is_accepted": true, "score": 2, "last_activity_date": 1542729433, "creation_date": 1542729433, "answer_id": 53396857, "question_id": 53396521, "link": "https://stackoverflow.com/questions/53396521/cannot-extract-data-from-a-hash/53396857#53396857", "title": "Cannot extract data from a hash", "body": "<p>Hope this suffices!</p>\n\n<p><code>array_hash.first[:product]</code></p>\n\n<p>If you want the second one you just do</p>\n\n<pre><code>array_hash.second[:product]\n</code></pre>\n\n<p>Also, .first is just a helper for doing array_hash[0], but the issue behind you getting nil is that you need to represent it with a :symbol in Ruby</p>\n"}, {"comments": [{"owner": {"reputation": 21, "user_id": 10681049, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eK9frAm2gj8/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jVeALK8pP-a0PS1ujQocMmerohsg/mo/photo.jpg?sz=128", "display_name": "Nguyen Khoi Nguyen", "link": "https://stackoverflow.com/users/10681049/nguyen-khoi-nguyen"}, "edited": false, "score": 0, "creation_date": 1542818763, "post_id": 53396877, "comment_id": 93708043, "body": "Thank you so much for your detail answer. It really works for me. Because I am a newbie in Ruby and I am trying to learn by myself so there is something I can not handle it. Thank you"}, {"owner": {"reputation": 1869, "user_id": 1454158, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/00c67acbbd503f63bad53da85439b3a4?s=128&d=identicon&r=PG", "display_name": "Volte", "link": "https://stackoverflow.com/users/1454158/volte"}, "reply_to_user": {"reputation": 21, "user_id": 10681049, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eK9frAm2gj8/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jVeALK8pP-a0PS1ujQocMmerohsg/mo/photo.jpg?sz=128", "display_name": "Nguyen Khoi Nguyen", "link": "https://stackoverflow.com/users/10681049/nguyen-khoi-nguyen"}, "edited": false, "score": 0, "creation_date": 1542898336, "post_id": 53396877, "comment_id": 93740690, "body": "@NguyenKhoiNguyen here at Stack Overflow, we try to accept answers that have the most explanation that also addresses the question. Please consider changing your accepted answer."}], "tags": [], "owner": {"reputation": 1869, "user_id": 1454158, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/00c67acbbd503f63bad53da85439b3a4?s=128&d=identicon&r=PG", "display_name": "Volte", "link": "https://stackoverflow.com/users/1454158/volte"}, "is_accepted": false, "score": 1, "last_activity_date": 1542729900, "last_edit_date": 1542729900, "creation_date": 1542729502, "answer_id": 53396877, "question_id": 53396521, "link": "https://stackoverflow.com/questions/53396521/cannot-extract-data-from-a-hash/53396877#53396877", "title": "Cannot extract data from a hash", "body": "<p>I'm guessing you're accustom to using Hash in Ruby on Rails, which subclasses the <a href=\"https://ruby-doc.org/core-2.5.3/Hash.html\" rel=\"nofollow noreferrer\"><code>Hash</code></a> class that comes with Ruby as <a href=\"https://api.rubyonrails.org/v4.2/classes/ActiveSupport/HashWithIndifferentAccess.html\" rel=\"nofollow noreferrer\"><code>HashWithIndifferentAccess</code></a>, and you usually never forced to look at this as a developer (in Rails). It should also be noted, that Rails <a href=\"https://api.rubyonrails.org/v4.2/classes/Hash.html\" rel=\"nofollow noreferrer\">directly modifies</a> Ruby's base <a href=\"https://ruby-doc.org/core-2.5.3/Hash.html\" rel=\"nofollow noreferrer\"><code>Hash</code></a> class, so you actually have a lot more available to you in Rails (or, specifically when <a href=\"https://rubygems.org/gems/activesupport\" rel=\"nofollow noreferrer\">ActiveSupport</a> is loaded).</p>\n\n<p>Ruby (pure), however doesn't mess around when it comes to keys in the hash. This allows for some powerful applications\u2014remember, everything in Ruby is an Object.</p>\n\n<p>So, <code>'string'</code> and <code>:symbol</code> are both objects, and different objects at that. You can even use a <code>Class</code> as a key in your hash.</p>\n\n<pre><code>{\n  Object =&gt; :object_symbol,\n  Class =&gt; :class_symbol\n}\n</code></pre>\n\n<p>So when you're trying to access values behind a key in your hash, make sure you use the exact key itself.</p>\n\n<p>In your example above, you're using the symbol <code>product</code> as your key. Ruby uses <code>:</code> to denote that.</p>\n\n<pre><code>{\n  product: 'A',\n  qty: 1\n}\n</code></pre>\n\n<p>This is the equivalent of saying</p>\n\n<pre><code>{\n  :product =&gt; 'A',\n  :qty =&gt; 1\n}\n</code></pre>\n\n<p>So what you want to call is <code>get_value = get_first_hash[:product]</code></p>\n"}], "owner": {"reputation": 21, "user_id": 10681049, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-eK9frAm2gj8/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jVeALK8pP-a0PS1ujQocMmerohsg/mo/photo.jpg?sz=128", "display_name": "Nguyen Khoi Nguyen", "link": "https://stackoverflow.com/users/10681049/nguyen-khoi-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 53396857, "answer_count": 2, "score": 0, "last_activity_date": 1542772647, "creation_date": 1542728405, "last_edit_date": 1542772647, "question_id": 53396521, "link": "https://stackoverflow.com/questions/53396521/cannot-extract-data-from-a-hash", "title": "Cannot extract data from a hash", "body": "<p>I have an array of hashes:</p>\n\n<pre><code>array_hash = [{product: 'A', qty: 1}, {product: 'B', qty: 2}]\n</code></pre>\n\n<p>I want to get the value of the first key <code>\"product\"</code>.</p>\n\n<p>I get the expected hash with this code:</p>\n\n<pre><code>get_first_hash = array_hash[0]\n# =&gt; {product: 'A', qty: 1}\n</code></pre>\n\n<p>However, this code returns <code>nil</code>:</p>\n\n<pre><code>get_value = get_first_hash['product']\n# =&gt; nil\n</code></pre>\n\n<p>I hope someones can tell me about this.</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1542727639, "post_id": 53396204, "comment_id": 93667859, "body": "I&#39;m not sure what the specific issue is--the simplest thing to do is to iterate over the incoming hash&#39;s key/value pairs, if the key is found in the original hash, set the new value to existing + incoming, if it isn&#39;t, add the incoming key/value pair. Can you be more clear about what the problem is?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1542727913, "post_id": 53396204, "comment_id": 93668013, "body": "this question has been asked a time or two <a href=\"https://stackoverflow.com/questions/4091487/sum-2-hashes-attributes-with-the-same-key\" title=\"sum 2 hashes attributes with the same key\">stackoverflow.com/questions/4091487/&hellip;</a>, <a href=\"https://stackoverflow.com/questions/4453511/group-hashes-by-keys-and-sum-the-values\" title=\"group hashes by keys and sum the values\">stackoverflow.com/questions/4453511/&hellip;</a>, <a href=\"https://stackoverflow.com/questions/48868886/merge-and-sum-hashes-inside-a-ruby-array\" title=\"merge and sum hashes inside a ruby array\">stackoverflow.com/questions/48868886/&hellip;</a>, <a href=\"https://stackoverflow.com/questions/36004998/add-values-of-same-key-in-array-of-hashes\" title=\"add values of same key in array of hashes\">stackoverflow.com/questions/36004998/&hellip;</a>, <a href=\"https://stackoverflow.com/questions/37003362/array-with-hash-how-to-merge-same-keys-and-add-its-value\" title=\"array with hash how to merge same keys and add its value\">stackoverflow.com/questions/37003362/&hellip;</a>"}, {"owner": {"reputation": 5, "user_id": 10635984, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "TARK WAGON", "link": "https://stackoverflow.com/users/10635984/tark-wagon"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1542727957, "post_id": 53396204, "comment_id": 93668041, "body": "Hello @DaveNewton what i want to do is the simplest thing you&#39;re talking about, i just don&#39;t know how to code it."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1542734301, "post_id": 53396204, "comment_id": 93671637, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/4091487/sum-2-hashes-attributes-with-the-same-key\">Sum 2 hashes attributes with the same key</a>"}], "answers": [{"tags": [], "owner": {"reputation": 703, "user_id": 3275627, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sFsXG.jpg?s=128&g=1", "display_name": "Jonathan Duarte", "link": "https://stackoverflow.com/users/3275627/jonathan-duarte"}, "is_accepted": true, "score": 1, "last_activity_date": 1542727817, "creation_date": 1542727817, "answer_id": 53396340, "question_id": 53396204, "link": "https://stackoverflow.com/questions/53396204/compute-hash-value-of-same-key-ruby/53396340#53396340", "title": "compute hash value of same key ruby", "body": "<p>If you just want to compute equal keys in the hash what you are looking for is the <code>merge</code> method in the Hash class.</p>\n\n<p><a href=\"https://ruby-doc.org/core-2.2.1/Hash.html#method-i-merge\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.2.1/Hash.html#method-i-merge</a></p>\n\n<blockquote>\n  <p>Returns a new hash containing the contents of other_hash and the\n  contents of hsh. If no block is specified, the value for entries with\n  duplicate keys will be that of other_hash. Otherwise the value for\n  each duplicate key is determined by calling the block with the key,\n  its value in hsh and its value in other_hash.</p>\n</blockquote>\n\n<p>When you pass a block to the <code>merge</code> method it will yield both old value and new value, and the you can do your computation there.</p>\n\n<p>For instance:</p>\n\n<pre><code>hash  = {\"a\"=&gt;2, \"b\"=&gt;3}\nhash2 = {\"c\"=&gt;4, \"a\"=&gt;5}\n\nresult = hash.merge(hash2) { |key, old_val, new_val| old_val + new_val }\n\np result #=&gt; {\"a\"=&gt;7, \"b\"=&gt;3, \"c\"=&gt;4}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1542727873, "creation_date": 1542727873, "answer_id": 53396366, "question_id": 53396204, "link": "https://stackoverflow.com/questions/53396204/compute-hash-value-of-same-key-ruby/53396366#53396366", "title": "compute hash value of same key ruby", "body": "<p>Just use <a href=\"https://ruby-doc.org/core-2.5.3/Hash.html#method-i-merge\" rel=\"nofollow noreferrer\"><code>Hash#merge</code></a> with a block and tell Ruby what to do when the key exists in both hashes \u2013 in this example just add the value from the second hash to the value from the first hash. </p>\n\n<pre><code>hash.merge(hash2) { |key, v1, v2| v1 + v2 }\n#=&gt; { \"a\" =&gt; 7, \"b\" =&gt; 3, \"c\" =&gt; 4 }\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 10635984, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "TARK WAGON", "link": "https://stackoverflow.com/users/10635984/tark-wagon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 686, "favorite_count": 0, "accepted_answer_id": 53396340, "answer_count": 2, "score": 0, "last_activity_date": 1542727873, "creation_date": 1542727360, "question_id": 53396204, "link": "https://stackoverflow.com/questions/53396204/compute-hash-value-of-same-key-ruby", "title": "compute hash value of same key ruby", "body": "<p>I start with a basic hash where the key is a string and value an integer.</p>\n\n<pre><code>hash = {\"a\"=&gt;2, \"b\"=&gt;3}\n</code></pre>\n\n<p>Then what I try to achieve is that i want to push several times into that hash a new hash with different keys or / and same : </p>\n\n<pre><code>hash2 = {\"c\"=&gt;4, \"a\"=&gt;5}\n</code></pre>\n\n<p>The result should be </p>\n\n<pre><code>h_result = {\"a\"=&gt;7, \"b\"=&gt;3, \"c\"=&gt;4}\n</code></pre>\n\n<p>The first thing would be to push the new hash and keep the duplicate keys.\nI saw that answer = <a href=\"https://stackoverflow.com/questions/1980794/how-can-i-merge-two-hashes-without-overwritten-duplicate-keys-in-ruby\">How can I merge two hashes without overwritten duplicate keys in Ruby?</a> but it seems that it's not working..</p>\n\n<p>Then I think I should match the same keys and compute the values. But again I can't find the answer.</p>\n\n<p>Thanks guys </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "devise"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1542743979, "post_id": 53395868, "comment_id": 93676439, "body": "No. This are no intrinsic security benefits to splitting the details of a user into separate tables/models. Creating a completely separate resource increases complexity but on the other hand you don&#39;t have to monkey with devise controllers and views which could potentially lead to security holes if you mess it up."}], "answers": [{"tags": [], "owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "is_accepted": true, "score": 2, "last_activity_date": 1542731317, "creation_date": 1542731317, "answer_id": 53397377, "question_id": 53395868, "link": "https://stackoverflow.com/questions/53395868/devise-for-rails-does-seperating-user-data-into-two-models-improve-security/53397377#53397377", "title": "Devise for Rails: Does Seperating User Data into Two Models Improve Security?", "body": "<p>First off, welcome to Stack Overflow!</p>\n\n<p>Your point about having access to the database is valid. If that happens, you're right; it won't matter how the data is structured.</p>\n\n<p>The point that the article that you referenced is also valid. If the <code>User</code> model is specifically in place to interact with <code>devise</code>, it might be best not to use it to store profile information for maintainability reasons, if nothing else.</p>\n\n<p>If <code>devise</code> is the only library that controls migrations to the <code>User</code> table, you're much less likely to run into migration or column name conflicts down the road.</p>\n\n<p>That said, I'd agree with the separation of concerns approach.</p>\n"}], "owner": {"reputation": 715, "user_id": 10005216, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GhDeR.png?s=128&g=1", "display_name": "Mr. J", "link": "https://stackoverflow.com/users/10005216/mr-j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 53397377, "answer_count": 1, "score": 1, "last_activity_date": 1612141560, "creation_date": 1542726243, "last_edit_date": 1612141560, "question_id": 53395868, "link": "https://stackoverflow.com/questions/53395868/devise-for-rails-does-seperating-user-data-into-two-models-improve-security", "title": "Devise for Rails: Does Seperating User Data into Two Models Improve Security?", "body": "<p>I am building a rails app using Devise. I have been told that it is advisable to split User data into two Models for security reasons... 1 Model being the default User table created by devise, and the other a Profile table to store private data (addresses etc).</p>\n\n<p>As explained in <a href=\"https://stackoverflow.com/questions/30029542/devise-for-rails-4-why-should-you-keep-user-profile-data-on-a-separate-table-to\">this article</a>, its a good idea to do this for Separation of Concern reasons.</p>\n\n<p>My question is, does doing this also increase security of the user accounts, or not? </p>\n\n<p>My guess is that it would not, because if someone has hacked into your database then it would not matter how many Models you have data scattered across, the hacker would have access to all of it anyway. But happy to be corrected if I am wrong :) </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "date"], "comments": [{"owner": {"reputation": 7736, "user_id": 687142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VErBp.jpg?s=128&g=1", "display_name": "xlembouras", "link": "https://stackoverflow.com/users/687142/xlembouras"}, "edited": false, "score": 4, "creation_date": 1542726103, "post_id": 53395695, "comment_id": 93666896, "body": "<code>{sunday: 0, monday: 1, tuesday: 2, wednesday: 3, thursday: 4, friday: 5, saturday: 6 }</code> will work."}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 2, "creation_date": 1542726979, "post_id": 53395695, "comment_id": 93667433, "body": "Be careful since <code>beginning_of_week</code> depends on a rails config value (you can have any day to be the first of the week) <a href=\"https://guides.rubyonrails.org/configuring.html#rails-general-configuration\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 518, "user_id": 8905332, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qSGD6IOatlQ/AAAAAAAAAAI/AAAAAAAAAOA/lcytjZkeivA/photo.jpg?sz=128", "display_name": "ldeld", "link": "https://stackoverflow.com/users/8905332/ldeld"}, "edited": false, "score": 7, "creation_date": 1542726979, "post_id": 53395695, "comment_id": 93667435, "body": "There&#39;s probably a better built-in method to do it, but you can always do <code>Date::DAYNAMES.find_index(&quot;Wednesday&quot;)</code>"}, {"owner": {"reputation": 1509, "user_id": 3052463, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/3w2GR.jpg?s=128&g=1", "display_name": "Abundance", "link": "https://stackoverflow.com/users/3052463/abundance"}, "edited": false, "score": 0, "creation_date": 1542727192, "post_id": 53395695, "comment_id": 93667564, "body": "thanks for the comments. was wondering if there was an easier built-in way. using a dictionary seems to be the cleanest / fastest. As for beginning_of_week returning a default value, that&#39;s not an issue since I&#39;m passing in an argument."}, {"owner": {"reputation": 518, "user_id": 8905332, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qSGD6IOatlQ/AAAAAAAAAAI/AAAAAAAAAOA/lcytjZkeivA/photo.jpg?sz=128", "display_name": "ldeld", "link": "https://stackoverflow.com/users/8905332/ldeld"}, "edited": false, "score": 1, "creation_date": 1542727480, "post_id": 53395695, "comment_id": 93667749, "body": "I also find <code>Date.parse(&quot;Wednesday&quot;).wday</code> pretty clean"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 2, "creation_date": 1542728351, "post_id": 53395695, "comment_id": 93668275, "body": "When you expect Monday to return <code>1</code>, would you consider Sunday to return <code>0</code> or <code>7</code>?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1542773363, "post_id": 53395695, "comment_id": 93685251, "body": "@Ideid I think your <code>Date::DAYNAMES.find_index(&quot;Wednesday&quot;)</code> is the cleanest and the most robust. Can you turn that into an answer?"}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 6, "last_activity_date": 1542728211, "last_edit_date": 1542728211, "creation_date": 1542727485, "answer_id": 53396231, "question_id": 53395695, "link": "https://stackoverflow.com/questions/53395695/ruby-convert-day-of-week-to-integer/53396231#53396231", "title": "Ruby - Convert Day Of Week To Integer", "body": "<p>You can parse it using <a href=\"http://ruby-doc.org/stdlib-2.5.3/libdoc/date/rdoc/Date.html#method-c-strptime\" rel=\"noreferrer\"><code>strptime</code></a>:</p>\n\n<pre><code>Date.strptime('Monday', '%A').wday\n#=&gt; 1\n\nDate.strptime('Wednesday', '%A').wday\n#=&gt; 3\n</code></pre>\n\n<p>The intermediate date object refers to the weekday in the current week:</p>\n\n<pre><code>Date.today\n#=&gt; #&lt;Date: 2018-11-20 ...&gt;\n\nDate.strptime('Monday', '%A')\n#=&gt; #&lt;Date: 2018-11-19 ...&gt;\n</code></pre>\n\n<p>You can also use <a href=\"http://ruby-doc.org/stdlib-2.5.3/libdoc/date/rdoc/Date.html#method-c-_strptime\" rel=\"noreferrer\"><code>_strptime</code></a> (prefixed with an underscore) to extract the date elements which happen to be <code>:wday</code> for a single weekday:</p>\n\n<pre><code>Date._strptime('Monday', '%A')\n#=&gt; {:wday=&gt;1}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 518, "user_id": 8905332, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qSGD6IOatlQ/AAAAAAAAAAI/AAAAAAAAAOA/lcytjZkeivA/photo.jpg?sz=128", "display_name": "ldeld", "link": "https://stackoverflow.com/users/8905332/ldeld"}, "edited": false, "score": 2, "creation_date": 1542727635, "post_id": 53396233, "comment_id": 93667855, "body": "No need for a gem actually (at least on ruby 2.5.1): <code>Date.parse(&quot;Monday&quot;).wday</code>"}, {"owner": {"reputation": 240, "user_id": 10037501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2024b0f1e38bece10465331ba91af258?s=128&d=identicon&r=PG&f=1", "display_name": "MarcusVinnicius", "link": "https://stackoverflow.com/users/10037501/marcusvinnicius"}, "reply_to_user": {"reputation": 518, "user_id": 8905332, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qSGD6IOatlQ/AAAAAAAAAAI/AAAAAAAAAOA/lcytjZkeivA/photo.jpg?sz=128", "display_name": "ldeld", "link": "https://stackoverflow.com/users/8905332/ldeld"}, "edited": false, "score": 0, "creation_date": 1542728036, "post_id": 53396233, "comment_id": 93668082, "body": "Ohh!! I didn&#39;t know. Thank you!!"}], "tags": [], "owner": {"reputation": 240, "user_id": 10037501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2024b0f1e38bece10465331ba91af258?s=128&d=identicon&r=PG&f=1", "display_name": "MarcusVinnicius", "link": "https://stackoverflow.com/users/10037501/marcusvinnicius"}, "is_accepted": false, "score": 0, "last_activity_date": 1542727489, "creation_date": 1542727489, "answer_id": 53396233, "question_id": 53395695, "link": "https://stackoverflow.com/questions/53395695/ruby-convert-day-of-week-to-integer/53396233#53396233", "title": "Ruby - Convert Day Of Week To Integer", "body": "<p>You can use the CHRONIC gem.</p>\n\n<blockquote>\n  <p>Chronic is a Ruby natural language date/time parser written by Tom\n  Preston-Werner (@mojombo) which takes surprisingly human readable text\n  and converts it to dates. (<a href=\"http://robdodson.me/playing-with-ruby-dates/\" rel=\"nofollow noreferrer\">http://robdodson.me/playing-with-ruby-dates/</a>)</p>\n</blockquote>\n\n<p>You can use like this:</p>\n\n<pre><code>require 'chronic'\n\nChronic.parse('Monday').wday\n=&gt; 1\n</code></pre>\n\n<p>I hope help you! </p>\n"}], "owner": {"reputation": 1509, "user_id": 3052463, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/3w2GR.jpg?s=128&g=1", "display_name": "Abundance", "link": "https://stackoverflow.com/users/3052463/abundance"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1318, "favorite_count": 0, "accepted_answer_id": 53396231, "answer_count": 2, "score": 4, "last_activity_date": 1542728211, "creation_date": 1542725721, "question_id": 53395695, "link": "https://stackoverflow.com/questions/53395695/ruby-convert-day-of-week-to-integer", "title": "Ruby - Convert Day Of Week To Integer", "body": "<p>How would you convert a day string (i.e. <code>\"Monday\"</code> or <code>\"Wednesday\"</code>), into the corresponding wday integer (<code>1</code> or <code>3</code>)?</p>\n\n<p>I've come up with this convoluted way</p>\n\n<pre><code>Date.today.beginning_of_week(\"Monday\".downcase.to_sym).wday\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-app-engine", "deployment", "environment-variables"], "answers": [{"tags": [], "owner": {"reputation": 573, "user_id": 8394595, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-_rM37he_ewU/AAAAAAAAAAI/AAAAAAAAACI/PRgcE9dW_IM/photo.jpg?sz=128", "display_name": "Katayoon", "link": "https://stackoverflow.com/users/8394595/katayoon"}, "is_accepted": false, "score": 0, "last_activity_date": 1542757888, "creation_date": 1542757888, "answer_id": 53403346, "question_id": 53395592, "link": "https://stackoverflow.com/questions/53395592/host-rails-app-in-the-google-cloud-app-engine-and-set-environment-variables/53403346#53403346", "title": "Host Rails App in the Google Cloud App Engine and set Environment variables", "body": "<p>As mentioned in <a href=\"https://cloud.google.com/docs/authentication/production#best_practices_for_managing_credentials\" rel=\"nofollow noreferrer\">Best practices for managing credentials</a>, you may use an environment variable pointing to credentials outside of the application's source code, such as <a href=\"https://cloud.google.com/kms/\" rel=\"nofollow noreferrer\">Cloud Key Management Service</a>. I also recommend to take a look at <a href=\"https://cloud.google.com/kms/docs/secret-management\" rel=\"nofollow noreferrer\">Secret management with Cloud KMS documentation</a> which explains solutions when you choose a secret management.</p>\n"}, {"tags": [], "owner": {"reputation": 124, "user_id": 7479469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/03cb36fa5b1fa37f5e54c1797f05bcf6?s=128&d=identicon&r=PG&f=1", "display_name": "Zero Soul Eater", "link": "https://stackoverflow.com/users/7479469/zero-soul-eater"}, "is_accepted": true, "score": 3, "last_activity_date": 1544539970, "creation_date": 1544539970, "answer_id": 53726691, "question_id": 53395592, "link": "https://stackoverflow.com/questions/53395592/host-rails-app-in-the-google-cloud-app-engine-and-set-environment-variables/53726691#53726691", "title": "Host Rails App in the Google Cloud App Engine and set Environment variables", "body": "<p>I did it!</p>\n\n<p>For local development, I just set my env as usual.</p>\n\n<p>If the mode is Production I load them from the <a href=\"http://googleapis.github.io/google-cloud-ruby/docs/google-cloud-datastore/latest/Google/Cloud/Datastore/Properties.html\" rel=\"nofollow noreferrer\">Google Datastore</a> all key values pairs and set them as an env variable.</p>\n\n<p>I do this in an Initializer, to do so just create a file in <code>YourApp/config/initializers/</code> and put the code in it! Just Create new Entities copy the <strong>Kind</strong> name in the code and set your project id. As your App is hosted in Google it should have access to the datastore (You need to set the right in the IAM-Manager)</p>\n\n<pre><code>require \"google/cloud/datastore\"\n# Load the enviroment variables from the google datastore!\nif Rails.env == \"production\"\n\n  data_store = Google::Cloud::Datastore.new(\n      project_id: 'YOUR_PROJECT_ID'\n  )\n\n  query = data_store.query \"YOUR_KIND_NAME\"\n  results = data_store.run query\n\n  puts \"Set custom env variables!\"\n  # Set each result as an env variable\n  results[0].properties.to_h.each do |key, value|\n    ENV[key]= value\n  end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 124, "user_id": 7479469, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/03cb36fa5b1fa37f5e54c1797f05bcf6?s=128&d=identicon&r=PG&f=1", "display_name": "Zero Soul Eater", "link": "https://stackoverflow.com/users/7479469/zero-soul-eater"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 426, "favorite_count": 1, "accepted_answer_id": 53726691, "answer_count": 2, "score": 3, "last_activity_date": 1544540071, "creation_date": 1542725403, "last_edit_date": 1544540071, "question_id": 53395592, "link": "https://stackoverflow.com/questions/53395592/host-rails-app-in-the-google-cloud-app-engine-and-set-environment-variables", "title": "Host Rails App in the Google Cloud App Engine and set Environment variables", "body": "<p>I will host my RoR API-App in the Google App-Engine.</p>\n\n<p>Everything works so far, but I have to store usernames, passwords and keys (e.g. Database user/password) in plain text in the <code>app.yaml</code>. this is just stupid, so I will never be able to push this to my git repo! Usually I store stuff like this in an env variable and use them in my application.</p>\n\n<p>But I did not find a way to set or access env variables.</p>\n\n<p>Is there a way or an alternative to do so?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 3352, "user_id": 5152338, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5QbPE.png?s=128&g=1", "display_name": "jdno", "link": "https://stackoverflow.com/users/5152338/jdno"}, "edited": false, "score": 2, "creation_date": 1542724629, "post_id": 53395296, "comment_id": 93666054, "body": "Hi Cheung, welcome to StackOverflow. The error message states that Jekyll cannot be found. Did you follow Jekyll&#39;s <a href=\"https://jekyllrb.com/docs/\" rel=\"nofollow noreferrer\">installation instructions</a> to install it?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1542728662, "post_id": 53395296, "comment_id": 93668475, "body": "How did you install <code>jekyll</code>?"}], "owner": {"reputation": 1, "user_id": 10631394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b1a7cdc69bbcf3c4170d6c325496328?s=128&d=identicon&r=PG&f=1", "display_name": "Cheung", "link": "https://stackoverflow.com/users/10631394/cheung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542728639, "creation_date": 1542724383, "last_edit_date": 1542728639, "question_id": 53395296, "link": "https://stackoverflow.com/questions/53395296/why-cant-i-launch-jekyll", "title": "Why can&#39;t I launch Jekyll?", "body": "<p>Traceback (most recent call last):  </p>\n\n<pre><code>3: from /usr/local/bin/jekyll:18:in `&lt;main&gt;'    \n2: from /usr/local/Cellar/ruby/2.5.3_1/lib/ruby/2.5.0/rubygems/core_ext/kernel_gem.rb:65:in 'gem'   \n1: from /usr/local/Cellar/ruby/2.5.3_1/lib/ruby/2.5.0/rubygems/dependency.rb:323:in 'to_spec' \n        /usr/local/Cellar/ruby/2.5.3_1/lib/ruby/2.5.0/rubygems/dependency.rb:311:in `to_specs': \nCould not find 'jekyll' (&gt;= 0) among 28 total gem(s) (Gem::MissingSpecError) \nChecked in 'GEM_PATH=/Users/dayi/.rvm/gems/ruby-2.0.0-p648:/Users/dayi/.rvm/gems/ruby-2.0.0-p648@global', execute `gem env` for more information\n</code></pre>\n\n<p>Just want to create a blog page in personal GitHub pages in Mac terminal, but it stuck when I text in Jekyll new XX</p>\n"}, {"tags": ["ruby", "api", "rubygems", "soundcloud"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 2646723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KPtZ0.jpg?s=128&g=1", "display_name": "javpet", "link": "https://stackoverflow.com/users/2646723/javpet"}, "edited": false, "score": 0, "creation_date": 1542753038, "post_id": 53397393, "comment_id": 93680421, "body": "Thanks @lacostenycoder! It seems like this working, but it only picks up the first element from the comma separated list (so in this case house). I&#39;ll experiment with it more."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 33, "user_id": 2646723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KPtZ0.jpg?s=128&g=1", "display_name": "javpet", "link": "https://stackoverflow.com/users/2646723/javpet"}, "edited": false, "score": 0, "creation_date": 1542766505, "post_id": 53397393, "comment_id": 93683772, "body": "actually I updated my answer to use <code>tags</code> instead. but you may need to escape the comma."}, {"owner": {"reputation": 33, "user_id": 2646723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KPtZ0.jpg?s=128&g=1", "display_name": "javpet", "link": "https://stackoverflow.com/users/2646723/javpet"}, "edited": false, "score": 1, "creation_date": 1543077706, "post_id": 53397393, "comment_id": 93792052, "body": "Thanks @lacostenycoder! It seems working with both genres and tags."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 2, "last_activity_date": 1542804219, "last_edit_date": 1542804219, "creation_date": 1542731378, "answer_id": 53397393, "question_id": 53395071, "link": "https://stackoverflow.com/questions/53395071/soundcloud-ruby-gem-genres-tags-filter-doesnt-work/53397393#53397393", "title": "Soundcloud ruby gem - genres / tags filter doesn&#39;t work", "body": "<p>Well looking at api docs <a href=\"https://developers.soundcloud.com/docs/api/reference#tracks\" rel=\"nofollow noreferrer\">https://developers.soundcloud.com/docs/api/reference#tracks</a></p>\n\n<p><code>tags   list    a comma separated list of tags</code></p>\n\n<p>Not sure but perhaps try a string param instead of array as docs say</p>\n\n<pre><code>client.get('/tracks', limit: 200, order: 'created_at', \n            'duration[from]' =&gt; 180_000, 'duration[to]' =&gt; 360_000, \n            'created_at[from]' =&gt; 3.days.ago.strftime('%Y-%m-%d %I:%M:%S'),\n             q: 'something', tags: 'house,techno'\n           )\n</code></pre>\n\n<p>If your tags have spaces in them use <code>+</code> instead of space i.e.</p>\n\n<pre><code>tags: 'house,techo,deep+house'\n</code></pre>\n\n<p>downcase the tags because soundcloud does anyway, for example you can type in your browser <a href=\"https://soundcloud.com/search/?q=lacostenyc&amp;tags=house,techno\" rel=\"nofollow noreferrer\">https://soundcloud.com/search/?q=lacostenyc&amp;tags=house,techno</a></p>\n"}], "owner": {"reputation": 33, "user_id": 2646723, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KPtZ0.jpg?s=128&g=1", "display_name": "javpet", "link": "https://stackoverflow.com/users/2646723/javpet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 53397393, "answer_count": 1, "score": 3, "last_activity_date": 1542804219, "creation_date": 1542723734, "question_id": 53395071, "link": "https://stackoverflow.com/questions/53395071/soundcloud-ruby-gem-genres-tags-filter-doesnt-work", "title": "Soundcloud ruby gem - genres / tags filter doesn&#39;t work", "body": "<p>I'm trying to get certain tracks with filters on genres / tags, and it seems to work when it's only one genre, although it doesn't work when it's multiple genres in array meanwhile the documentation says it accepts a list: <a href=\"https://developers.soundcloud.com/docs/api/reference#tracks\" rel=\"nofollow noreferrer\">https://developers.soundcloud.com/docs/api/reference#tracks</a></p>\n\n<pre><code>client.get('/tracks', limit: 200, order: 'created_at', 'duration[from]' =&gt; \n180_000, 'duration[to]' =&gt; 360_000, 'created_at[from]' =&gt; \n3.days.ago.strftime('%Y-%m-%d %I:%M:%S'), q: 'something', tags: ['House', 'Techno'])`\n</code></pre>\n\n<p>It doesn't return error or anything, it's just the tracks returned are not picking up the filtering parameters it seems.\nDoes anyone else experienced the same issue with / without the gem?</p>\n"}, {"tags": ["ruby", "sinatra"], "comments": [{"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 0, "creation_date": 1542794193, "post_id": 53395059, "comment_id": 93693696, "body": "Where is the class instance (e.g. foo.build_menu) being called?"}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 2286348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0123e7e7d7cf5f57c1a42a726bc73e15?s=128&d=identicon&r=PG&f=1", "display_name": "schulle877", "link": "https://stackoverflow.com/users/2286348/schulle877"}, "edited": false, "score": 0, "creation_date": 1542784633, "post_id": 53397770, "comment_id": 93688722, "body": "Thanks for that answer. So I have to take the long way. I thought there might be something like a global variable, which I can use in any context."}], "tags": [], "owner": {"reputation": 308, "user_id": 6023124, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7718cf4e9d16e02962fd942988ccc9b1?s=128&d=identicon&r=PG&f=1", "display_name": "rcrews", "link": "https://stackoverflow.com/users/6023124/rcrews"}, "is_accepted": false, "score": 1, "last_activity_date": 1542732623, "creation_date": 1542732623, "answer_id": 53397770, "question_id": 53395059, "link": "https://stackoverflow.com/questions/53395059/how-to-get-request-url-in-ruby-sinatra-class-context/53397770#53397770", "title": "How to get request url in ruby Sinatra class context?", "body": "<p>You can pass the value to your class:</p>\n\n<pre><code>class Foo\n  attr_accessor :request_path_info, :request_fullpath, :request_url\n  def build_menu\n    highlight_menu_entry if request_path_info == '/hello-world'\n  end\nend\n\nfoo = Foo.new\n\nget '/hello-world' do\n  foo.request_path_info = request.path_info\n  foo.request_fullpath = request.fullpath\n  foo.request_url = request.url\nend\n\nfoo.build_menu\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 623, "user_id": 846250, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o1e1i.png?s=128&g=1", "display_name": "To\ub9c8SE", "link": "https://stackoverflow.com/users/846250/to%eb%a7%88se"}, "edited": false, "score": 1, "creation_date": 1544511693, "post_id": 53407331, "comment_id": 94291338, "body": "This is bound to fail in cases where requests are being treated in parallel, you should really consider using @rcrews &#39;s answer instead."}], "tags": [], "owner": {"reputation": 103, "user_id": 2286348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0123e7e7d7cf5f57c1a42a726bc73e15?s=128&d=identicon&r=PG&f=1", "display_name": "schulle877", "link": "https://stackoverflow.com/users/2286348/schulle877"}, "is_accepted": true, "score": 0, "last_activity_date": 1542786161, "creation_date": 1542786161, "answer_id": 53407331, "question_id": 53395059, "link": "https://stackoverflow.com/questions/53395059/how-to-get-request-url-in-ruby-sinatra-class-context/53407331#53407331", "title": "How to get request url in ruby Sinatra class context?", "body": "<p>Found the answer by my myself. I use a self defined global variable <code>$PATHNAME</code> which I can use in any context. Combined with the <code>before do</code>-preprocessor in my main app, I can fill an use the variable.</p>\n\n<pre><code>before do\n  $PATHNAME=request.path_info\nend\n\nclass Foo\n  def build_menu\n    highlight_menu_entry if $PATHNAME == '/hello-world'\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 2286348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0123e7e7d7cf5f57c1a42a726bc73e15?s=128&d=identicon&r=PG&f=1", "display_name": "schulle877", "link": "https://stackoverflow.com/users/2286348/schulle877"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 520, "favorite_count": 0, "accepted_answer_id": 53407331, "answer_count": 2, "score": 0, "last_activity_date": 1542786161, "creation_date": 1542723658, "question_id": 53395059, "link": "https://stackoverflow.com/questions/53395059/how-to-get-request-url-in-ruby-sinatra-class-context", "title": "How to get request url in ruby Sinatra class context?", "body": "<p>In Sinatra you have the possibility to get the request full path by using the following lines:</p>\n\n<pre><code>get '/hello-world' do\n  request.path_info   # =&gt; '/hello-world'\n  request.fullpath    # =&gt; '/hello-world?foo=bar'\n  request.url         # =&gt; 'http://example.com/hello-world?foo=bar'\nend\n</code></pre>\n\n<p>I have several classes I use in my app. In this one particular class I like to compare the <code>request.path_info</code> to a string. </p>\n\n<pre><code>class foo\n  def build_menu\n    if request.path_info == \"/hello-world\"\n      highlight_menu_entry\n    end\n  end\nend\n</code></pre>\n\n<p>But the <code>request</code>-Object is not known in this class context and an error is thrown. I though this is a SUPER-GLOBAL like in PHP <code>$_POST</code> or <code>$_GET</code>, if there is some in Ruby/Sinatra.</p>\n\n<p>So how can I check the <code>request.path</code> in a class context?</p>\n"}, {"tags": ["ruby", "sinatra", "pg"], "comments": [{"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 0, "creation_date": 1542794323, "post_id": 53394615, "comment_id": 93693787, "body": "Can you supply the connection set up code or which framework/code you&#39;re using to make calls to the database?"}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "reply_to_user": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 0, "creation_date": 1542799680, "post_id": 53394615, "comment_id": 93696847, "body": "@iain Done.  Couldn&#39;t be more simple."}, {"owner": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 0, "creation_date": 1542813622, "post_id": 53394615, "comment_id": 93704855, "body": "I don&#39;t use the PG gem but I would suggest perhaps wrapping database calls in a block (as <a href=\"http://jakegoulding.com/blog/2012/10/01/using-ruby-blocks-to-ensure-resources-are-cleaned-up/\" rel=\"nofollow noreferrer\">File.open</a> does) with <a href=\"https://deveiate.org/code/pg/PG/Connection.html#method-i-finish\" rel=\"nofollow noreferrer\"><code>finish</code></a> to make sure they&#39;re closed, and put those selects into stored procedures to see if that helps. Trying a library like <a href=\"http://sequel.jeremyevans.net/\" rel=\"nofollow noreferrer\">Sequel</a> that will happily take SQL strings and will manage the connection might be worth investigating. Sorry I can&#39;t help more."}, {"owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "reply_to_user": {"reputation": 11068, "user_id": 335847, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/o0AC7.png?s=128&g=1", "display_name": "iain", "link": "https://stackoverflow.com/users/335847/iain"}, "edited": false, "score": 0, "creation_date": 1542813760, "post_id": 53394615, "comment_id": 93704932, "body": "I can close connections, not a problem.  Just wondering about default procedures with garbage collection as it&#39;s not documented in the <code>PG::connection</code> pages.  I can test other implementations later, but thought I&#39;d just throw it out there in case I was missing something.  Thx."}], "owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 180, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542799603, "creation_date": 1542722232, "last_edit_date": 1542799603, "question_id": 53394615, "link": "https://stackoverflow.com/questions/53394615/ruby-pg-gem-connections-not-closingpg-gem-connections-not-closing", "title": "Ruby PG gem Connections Not ClosingPG gem Connections Not Closing", "body": "<p><code>PostgreSQL</code> is installed on my workstation and I host an admin website (<code>Sinatra</code> using the <code>PG</code> gem on <code>nginx</code>) that only I have access too.  </p>\n\n<p>Every so often I get thei following error:</p>\n\n<pre><code>PG::ConnectionBad - FATAL:  sorry, too many clients already\n</code></pre>\n\n<p><code>max_connections</code> is indeed set to 100, but I'm using two on any page at any time.  Looking at the <code>pg_stat_activity</code>, I see two simple <code>SELECT</code>s that are not problematic:</p>\n\n<pre><code>SELECT * FROM twils ORDER BY id DESC LIMIT 30   client backend\nSELECT mdate FROM params WHERE mkey = $1    client backend\n</code></pre>\n\n<p>Both of these are completed before the page has time to even render (comparable speed) and should not stay open.  So either I'm mistaken in that I need to force these closed, or they are not closing at the end of the page, basically <strong>garbage collection</strong>.  </p>\n\n<p>Since <code>PG</code> connections are stateless and don't carry from page to page, I am under the impression the end of the page means all connections closed for the user.  I thought it was automatic.  Am I wrong to assume this?  Am I to deliberately perform a <code>conn.close</code> or <code>conn.finish</code> on every connection?  </p>\n\n<pre><code>conn = PG.connect( dbname: 'hq' )\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "regex"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1542770934, "post_id": 53393523, "comment_id": 93684695, "body": "If you just want to count rather than get the matches, then you should do: <code>smapArray.count(&amp;spamWords.method(:=~))</code>."}], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 2, "last_activity_date": 1542719383, "creation_date": 1542719383, "answer_id": 53393733, "question_id": 53393523, "link": "https://stackoverflow.com/questions/53393523/finding-multiple-patterns-in-a-string-in-ruby/53393733#53393733", "title": "Finding multiple patterns in a string in Ruby", "body": "<p>You can union multiple patterns into one regular expression, then perform the search exactly like you did below:</p>\n\n<pre><code>spamWords = Regexp.new(\"Delighted|Saddened\")\n</code></pre>\n\n<p>You can also use <code>Regexp.union</code> to auto-generate this regexp for you:</p>\n\n<pre><code>spamWords = Regexp.union(\"Delighted\", \"Saddened\")\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 9026536, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ed83e9ea219b1c0d769b191cc719b3?s=128&d=identicon&r=PG&f=1", "display_name": "rhanly", "link": "https://stackoverflow.com/users/9026536/rhanly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "accepted_answer_id": 53393733, "answer_count": 1, "score": 0, "last_activity_date": 1542770601, "creation_date": 1542718691, "last_edit_date": 1542770601, "question_id": 53393523, "link": "https://stackoverflow.com/questions/53393523/finding-multiple-patterns-in-a-string-in-ruby", "title": "Finding multiple patterns in a string in Ruby", "body": "<p>I am trying to find strings in an array that match multiple regular expression patterns. I figured out how to do this for one pattern as below:</p>\n\n<pre><code>spamWords = Regexp.new(\"Delighted\")\n\nspamCount1 = 0\nspamArray.each do |word|\n  if word =~ spamWords\n    spamCount1 +=1\n  end\nend\np spamCount1\n</code></pre>\n\n<p>I iterated over an array of <code>spamWord</code> strings, but I was wondering if there is a simpler way of doing this.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1542719928, "post_id": 53393144, "comment_id": 93663049, "body": "Try <code>your_str[&#47;#({(?:[^{}]++|\\g&lt;1&gt;)*})&#47;, 1].gsub(&#47;[{}]&#47;, &quot;&quot;)</code>, see <a href=\"https://ideone.com/1WAPGU\" rel=\"nofollow noreferrer\">demo</a>."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 2, "creation_date": 1542723983, "post_id": 53393144, "comment_id": 93665630, "body": "If the goal of this is to make <code>eval</code> safe, don&#39;t bother. You would basically need to implement a Ruby static analyzer to truly do that."}], "answers": [{"tags": [], "owner": {"reputation": 1357, "user_id": 6229122, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tQUnBjPGP9o/AAAAAAAAAAI/AAAAAAAACww/wJS82aCB06E/photo.jpg?sz=128", "display_name": "Alex Suslyakov", "link": "https://stackoverflow.com/users/6229122/alex-suslyakov"}, "is_accepted": false, "score": 2, "last_activity_date": 1542722656, "last_edit_date": 1542722656, "creation_date": 1542722309, "answer_id": 53394645, "question_id": 53393144, "link": "https://stackoverflow.com/questions/53393144/ruby-remove-interpolation-from-string/53394645#53394645", "title": "Ruby remove interpolation from string", "body": "<p>You can use <code>gsub</code> and named regex in this case</p>\n\n<pre><code>&gt; reg = Regexp.new('\\\\#{(?&lt;content&gt;.+)}')\n=&gt; /\\#{(?&lt;content&gt;.+)}/\n&gt; str1.gsub(reg) { |match| $~[:content] }\n=&gt; \"user.name\"\n&gt; str2.gsub(reg) { |match| $~[:content] }\n=&gt; \"[1,2,3].map { |el| el }.join(',')\"\n</code></pre>\n\n<p>Your example didn't work well because <code>[^smth]</code> matches against any single character in the list, not the whole sentence.</p>\n\n<p>BTW I'd like to warn you that regexp might fit for simple adjustments, but it will always have some edge cases. I'm not sure how the example above will behave on interpolation inside interpolation for example.</p>\n\n<p>It's better to use proper lexer &amp; parser for more complex cases.</p>\n\n<p>Also, be very... <em>very</em> careful doing <code>eval</code> </p>\n"}], "owner": {"reputation": 107, "user_id": 1397675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b759c99b1991b3f6be602d7f29218cd?s=128&d=identicon&r=PG", "display_name": "Ivan Verevkin", "link": "https://stackoverflow.com/users/1397675/ivan-verevkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542722656, "creation_date": 1542717410, "question_id": 53393144, "link": "https://stackoverflow.com/questions/53393144/ruby-remove-interpolation-from-string", "title": "Ruby remove interpolation from string", "body": "<p>I want to remove string interpolation for eval.</p>\n\n<p>I have a lot of places with such code, so only one option is modifying the condition to unescape code.</p>\n\n<p>I found a regexp that works well</p>\n\n<pre><code>\"\\#{user.name}\"[/[^\\#{}]+/]\n</code></pre>\n\n<p>as result, I have <code>\"user.name\"</code></p>\n\n<p>but such code removing curly braces in blocks as well</p>\n\n<pre><code>\"\\#{[1,2,3].map { |el| el }.join(',')}\"[/[^\\#{}]+/]\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>\"[1,2,3].map \"\n</code></pre>\n\n<p>the expected result is:</p>\n\n<pre><code>\"[1,2,3].map { |el| el }.join(',')\"\n</code></pre>\n\n<p>Any ideas how to solve it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1158, "user_id": 1611339, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7aORl.jpg?s=128&g=1", "display_name": "timbillstrom", "link": "https://stackoverflow.com/users/1611339/timbillstrom"}, "edited": false, "score": 0, "creation_date": 1542716515, "post_id": 53392389, "comment_id": 93661018, "body": "Hi @Afolabi, I&#39;d recommend you to check out this answer if you haven&#39;t come across it already: <a href=\"https://stackoverflow.com/a/43481898/1611339\">stackoverflow.com/a/43481898/1611339</a>"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1542733572, "post_id": 53392389, "comment_id": 93671261, "body": "Don\u2019t include screenshots of plaintext. You clearly have access to the data: copy and paste it into your post."}], "answers": [{"comments": [{"owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "edited": false, "score": 0, "creation_date": 1542749955, "post_id": 53393592, "comment_id": 93679174, "body": "but there is only one problem to this: If there are fields that has no email i.e. empty, it wont show the highest occurred email. Meaning if the <i>nil</i> fields are plenty and that turn out to be the highest occurred, then the output will be nil (no value)"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "edited": false, "score": 0, "creation_date": 1542782721, "post_id": 53393592, "comment_id": 93687926, "body": "@AfolabiOlaoluwaAkinwumi I considered case of email to be mandatory field, If empty email field case is present, you can filter them out in <code>@history_assets</code> or later in <code>@highest_occurrence</code>"}], "tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": true, "score": 1, "last_activity_date": 1542718949, "creation_date": 1542718949, "answer_id": 53393592, "question_id": 53392389, "link": "https://stackoverflow.com/questions/53392389/how-to-output-the-highest-occurring-email-address-from-a-hash/53393592#53393592", "title": "how to output the highest occurring email address from a hash", "body": "<p>Please check following if necessary,</p>\n\n<p>This will provide you Hash[email,objects(with same emails)]</p>\n\n<pre><code>@highest_occurrence = @history_assets.group_by {|x| x.email }\n</code></pre>\n\n<p>Get highest repeated email id,</p>\n\n<pre><code>@summary = {\n  highest_occurrence_account: @highest_occurrence.max_by { |k,v| v.count }[0]\n}\n</code></pre>\n"}], "owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 53393592, "answer_count": 1, "score": 0, "last_activity_date": 1542718949, "creation_date": 1542714616, "question_id": 53392389, "link": "https://stackoverflow.com/questions/53392389/how-to-output-the-highest-occurring-email-address-from-a-hash", "title": "how to output the highest occurring email address from a hash", "body": "<p>I know this must have existed and I did follow some answers that seems to be a duplicate question, so, I followed <a href=\"https://stackoverflow.com/a/5858236/5614748\">https://stackoverflow.com/a/5858236/5614748</a>, but am having a little issue.</p>\n\n<p>**Am trying to output the highest occurring email address from a table and show it in the view. </p>\n\n<p>This is what I have done:</p>\n\n<p><strong>show action</strong></p>\n\n<pre><code>module Admin\n  module Statistic\n    class TrafficsController &lt; BaseController\n      def show\n        @signup_grid = ::Statistic::TrafficsGrid.new(params[:statistic_traffics_grid])\n        @history_assets = @signup_grid.assets\n        @highest_occurrence = Hash[@history_assets.group_by {|x| x}.map {|k,v| [k.email,v.count]}]\n\n        @summary = {\n            :highest_occurrence_account =&gt; @highest_occurrence # this is my output and I have uploaded the hash it outputs instead of the email alone.\n        }\n        @traffic_filter = true\n      end\n    end\n  end\nend\n</code></pre>\n\n<p><strong>instance variable @highest_occurrence</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/C6y6g.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C6y6g.png\" alt=\"highest occurrence\"></a></p>\n\n<p><strong>my output</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/bw2kd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bw2kd.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "elasticsearch", "ruby-on-rails-5", "searchkick"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1542707458, "post_id": 53390010, "comment_id": 93656015, "body": "Why and how are soft-deleted users excluded from the query in the first place? Did you implement this feature yourself or do you use a gem (which one)?"}, {"owner": {"reputation": 335, "user_id": 7397660, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/41bca4edee3203ddfa4ed21b501e1bbe?s=128&d=identicon&r=PG&f=1", "display_name": "Code father", "link": "https://stackoverflow.com/users/7397660/code-father"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1542707586, "post_id": 53390010, "comment_id": 93656098, "body": "It&#39;s the spree_user model. When querying through, it omits the user whose deleted_at field is not nil. However unscoping it shows the result for all on normal active record query but does not work with searchkick."}, {"owner": {"reputation": 1612, "user_id": 1146473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/798f66c6c7e53703e2a30ff911b0e884?s=128&d=identicon&r=PG", "display_name": "ekampp", "link": "https://stackoverflow.com/users/1146473/ekampp"}, "edited": false, "score": 0, "creation_date": 1542719744, "post_id": 53390010, "comment_id": 93662922, "body": "Is it possible that the problem is that the soft-deleted records are not in the elastic search index at all? Perhaps there&#39;s a hook somewhere removing them when they&#39;re soft-deleted?"}], "answers": [{"tags": [], "owner": {"reputation": 1377, "user_id": 3011280, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/mkyAT.jpg?s=128&g=1", "display_name": "Oshan Wisumperuma", "link": "https://stackoverflow.com/users/3011280/oshan-wisumperuma"}, "is_accepted": false, "score": 0, "last_activity_date": 1547615100, "creation_date": 1547615100, "answer_id": 54210729, "question_id": 53390010, "link": "https://stackoverflow.com/questions/53390010/how-to-display-soft-deleted-users-when-searching-through-searchkick/54210729#54210729", "title": "How to display soft deleted users when searching through searchkick?", "body": "<p>got the same experience on mongoid_paranoia gem. when you call the model#destroy method, it removes the record from the elasticsearch as well. so one solution is to reindex the model using \"after_destroy\" callback. </p>\n"}], "owner": {"reputation": 335, "user_id": 7397660, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/41bca4edee3203ddfa4ed21b501e1bbe?s=128&d=identicon&r=PG&f=1", "display_name": "Code father", "link": "https://stackoverflow.com/users/7397660/code-father"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1547615100, "creation_date": 1542706502, "question_id": 53390010, "link": "https://stackoverflow.com/questions/53390010/how-to-display-soft-deleted-users-when-searching-through-searchkick", "title": "How to display soft deleted users when searching through searchkick?", "body": "<p>I am using searchkick to perform search for users. However it does not display the soft-deleted user's record. I have tried using unscoped too, but that does not work either.</p>\n\n<pre><code>User.unscoped.all.search search_param, fields: [:id, :email, :first_name, :last_name], match: :word_middle\n</code></pre>\n\n<p>Is there a way I could display soft-deleted users record when using searchkick?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pluralize"], "comments": [{"owner": {"reputation": 3411, "user_id": 294022, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/qsrDd.jpg?s=128&g=1", "display_name": "GorillaApe", "link": "https://stackoverflow.com/users/294022/gorillaape"}, "edited": false, "score": 0, "creation_date": 1542705131, "post_id": 53389406, "comment_id": 93654606, "body": "It seems that :count thing works with numbers but number_with_delimeter is a string technically, so I see no way other than implementing your custom helper/whathever method"}, {"owner": {"reputation": 1913, "user_id": 547341, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/10a0cbba661dd3521b5a35a3e7bbabcd?s=128&d=identicon&r=PG", "display_name": "Albert Catal&#224;", "link": "https://stackoverflow.com/users/547341/albert-catal%c3%a0"}, "edited": false, "score": 1, "creation_date": 1542707682, "post_id": 53389406, "comment_id": 93656150, "body": "why use number_with_delimiter as a second parameter when you need to provide a number? number_with_delimiter is a helper that transforms a number to a string &#191;?"}, {"owner": {"reputation": 4032, "user_id": 1706309, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/y61rm.jpg?s=128&g=1", "display_name": "pzin", "link": "https://stackoverflow.com/users/1706309/pzin"}, "edited": false, "score": 0, "creation_date": 1542786575, "post_id": 53389406, "comment_id": 93689492, "body": "So I should choose between formatting the number or pluralize the string?"}], "answers": [{"comments": [{"owner": {"reputation": 4032, "user_id": 1706309, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/y61rm.jpg?s=128&g=1", "display_name": "pzin", "link": "https://stackoverflow.com/users/1706309/pzin"}, "edited": false, "score": 0, "creation_date": 1542786463, "post_id": 53390409, "comment_id": 93689444, "body": "This does not use any i18n method."}], "tags": [], "owner": {"reputation": 802, "user_id": 8728218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/376ec53188ea3ec0271198a862516657?s=128&d=identicon&r=PG&f=1", "display_name": "Dyaniyal Wilson", "link": "https://stackoverflow.com/users/8728218/dyaniyal-wilson"}, "is_accepted": false, "score": 1, "last_activity_date": 1542707854, "creation_date": 1542707854, "answer_id": 53390409, "question_id": 53389406, "link": "https://stackoverflow.com/questions/53389406/rails-pluralize-count-when-zero-does-not-work-with-number-with-delimiter-method/53390409#53390409", "title": "Rails pluralize count when zero, does not work with number_with_delimiter method", "body": "<p>Rails already have helpers to pluralize the string according to the count given.   </p>\n\n<pre><code>2.1.5 :037 &gt; helper.pluralize(0,'count')\n =&gt; \"0 counts\" \n2.1.5 :038 &gt; helper.pluralize(1,'count')\n =&gt; \"1 count\" \n2.1.5 :039 &gt; helper.pluralize(2,'count')\n =&gt; \"2 counts\" \n</code></pre>\n"}], "owner": {"reputation": 4032, "user_id": 1706309, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/y61rm.jpg?s=128&g=1", "display_name": "pzin", "link": "https://stackoverflow.com/users/1706309/pzin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 244, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1542708273, "creation_date": 1542704317, "question_id": 53389406, "link": "https://stackoverflow.com/questions/53389406/rails-pluralize-count-when-zero-does-not-work-with-number-with-delimiter-method", "title": "Rails pluralize count when zero, does not work with number_with_delimiter method", "body": "<p>I am trying to make a pluralization work with zero case and also using <code>number_with_delimiter</code> to make it readable with bigger numbers.</p>\n\n<p>So, I have in my YAML file:</p>\n\n<pre><code>count:\n  zero: no counts\n  one: 1 count\n  other %{count} counts\n</code></pre>\n\n<p>And in the view:</p>\n\n<pre><code>t 'count', number_with_delimiter(count)\n</code></pre>\n\n<p>The problem is, it does not work with the zero case. It handle it as other case. But, if I leave out the <code>number_with_delimiter</code> method it work as expected.</p>\n\n<p>It is possible to pluralize with a number format handling also the zero case?</p>\n"}, {"tags": ["ruby", "algorithm", "logic"], "comments": [{"owner": {"reputation": 555, "user_id": 10426870, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JXZEEkspHH4/AAAAAAAAAAI/AAAAAAAAAAA/WPpLNRdID4g/photo.jpg?sz=128", "display_name": "Rohit Namjoshi", "link": "https://stackoverflow.com/users/10426870/rohit-namjoshi"}, "edited": false, "score": 0, "creation_date": 1542687168, "post_id": 53385814, "comment_id": 93647893, "body": "A method can return a <code>Symbol</code>, just like the <code>price_name</code> method above does. What exactly is the issue?"}, {"owner": {"reputation": 1, "user_id": 1502245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a2375d35c30b9b65ce4a2396fad4c78?s=128&d=identicon&r=PG", "display_name": "zcreative", "link": "https://stackoverflow.com/users/1502245/zcreative"}, "reply_to_user": {"reputation": 555, "user_id": 10426870, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JXZEEkspHH4/AAAAAAAAAAI/AAAAAAAAAAA/WPpLNRdID4g/photo.jpg?sz=128", "display_name": "Rohit Namjoshi", "link": "https://stackoverflow.com/users/10426870/rohit-namjoshi"}, "edited": false, "score": 0, "creation_date": 1542687688, "post_id": 53385814, "comment_id": 93648014, "body": "I need to get the name of the variable that <code>values.compact.min</code> chose."}, {"owner": {"reputation": 555, "user_id": 10426870, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JXZEEkspHH4/AAAAAAAAAAI/AAAAAAAAAAA/WPpLNRdID4g/photo.jpg?sz=128", "display_name": "Rohit Namjoshi", "link": "https://stackoverflow.com/users/10426870/rohit-namjoshi"}, "edited": false, "score": 0, "creation_date": 1542690071, "post_id": 53385814, "comment_id": 93648589, "body": "To do that you need a mapping between values and names. Use <code>Hash</code> to do that."}], "answers": [{"tags": [], "owner": {"reputation": 27, "user_id": 5412304, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-6TnTqLDb4-Q/AAAAAAAAAAI/AAAAAAAAAdw/GXesephmWWc/photo.jpg?sz=128", "display_name": "Hector Moreno-Bravo", "link": "https://stackoverflow.com/users/5412304/hector-moreno-bravo"}, "is_accepted": false, "score": -1, "last_activity_date": 1542687554, "creation_date": 1542687554, "answer_id": 53386151, "question_id": 53385814, "link": "https://stackoverflow.com/questions/53385814/determine-which-value-was-selected/53386151#53386151", "title": "Determine which value was selected", "body": "<p>you could use case</p>\n\n<pre><code>case values\n  when double_round_trip\n    return :double_round_trip\n  when on_the_ground \n...\n</code></pre>\n\n<p><a href=\"https://www.rubyguides.com/2015/10/ruby-case/\" rel=\"nofollow noreferrer\">https://www.rubyguides.com/2015/10/ruby-case/</a></p>\n"}, {"comments": [{"owner": {"reputation": 555, "user_id": 10426870, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JXZEEkspHH4/AAAAAAAAAAI/AAAAAAAAAAA/WPpLNRdID4g/photo.jpg?sz=128", "display_name": "Rohit Namjoshi", "link": "https://stackoverflow.com/users/10426870/rohit-namjoshi"}, "edited": false, "score": 0, "creation_date": 1542728553, "post_id": 53386568, "comment_id": 93668411, "body": "Using a <code>Hash</code> is what I suggested in my comment."}], "tags": [], "owner": {"reputation": 1, "user_id": 1502245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a2375d35c30b9b65ce4a2396fad4c78?s=128&d=identicon&r=PG", "display_name": "zcreative", "link": "https://stackoverflow.com/users/1502245/zcreative"}, "is_accepted": false, "score": -1, "last_activity_date": 1542690593, "creation_date": 1542690593, "answer_id": 53386568, "question_id": 53385814, "link": "https://stackoverflow.com/questions/53385814/determine-which-value-was-selected/53386568#53386568", "title": "Determine which value was selected", "body": "<p>I ended up using:</p>\n\n<pre><code>price_options.key(price) # double_round_trip\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 1502245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a2375d35c30b9b65ce4a2396fad4c78?s=128&d=identicon&r=PG", "display_name": "zcreative", "link": "https://stackoverflow.com/users/1502245/zcreative"}, "edited": false, "score": 0, "creation_date": 1542698088, "post_id": 53387216, "comment_id": 93651257, "body": "It&#39;s a little more complicated than that. There are some conditions for the point to point price to be in the array. I&#39;ve provided an answer below showing how I solved it."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1542694332, "creation_date": 1542694332, "answer_id": 53387216, "question_id": 53385814, "link": "https://stackoverflow.com/questions/53385814/determine-which-value-was-selected/53387216#53387216", "title": "Determine which value was selected", "body": "<p>If I get your point, why not use an array?</p>\n\n<pre><code>def price_name_for date_range\n  [:on_the_ground, :double_round_trip, :point_to_point][date_range-1]\nend\n\nprice_name_for 1 #=&gt; :on_the_ground\nprice_name_for 2 #=&gt; :double_round_trip\nprice_name_for 3 #=&gt; :point_to_point\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 1502245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5a2375d35c30b9b65ce4a2396fad4c78?s=128&d=identicon&r=PG", "display_name": "zcreative", "link": "https://stackoverflow.com/users/1502245/zcreative"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1542694332, "creation_date": 1542684677, "question_id": 53385814, "link": "https://stackoverflow.com/questions/53385814/determine-which-value-was-selected", "title": "Determine which value was selected", "body": "<p>I have three numerical variables: <code>on_the_ground</code>, <code>double_round_trip</code> and <code>point_to_point</code>. The <code>price</code> function returns one of these based on some simple logic.</p>\n\n<p>Below is how it currently works.</p>\n\n<pre><code>def price\n  return on_the_ground if date_range == 1\n\n  values = [\n    on_the_ground,\n    double_round_trip\n  ]\n\n  if !turbo? &amp;&amp; !vlj?\n    values.push(point_to_point)\n  end\n\n  values.compact.min\nend\n</code></pre>\n\n<p>I'd like to have a function that can return a symbol based on which value should be returned. For example:</p>\n\n<pre><code>def price_name\n  return :on_the_ground if date_range == 1\n  ... etc...\nend\n</code></pre>\n"}, {"tags": ["ruby", "google-sheets-api"], "comments": [{"owner": {"reputation": 21, "user_id": 5999694, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207352197357404/picture?type=large", "display_name": "Corey Shapiro", "link": "https://stackoverflow.com/users/5999694/corey-shapiro"}, "edited": false, "score": 0, "creation_date": 1542683418, "post_id": 53385483, "comment_id": 93647132, "body": "It would be nice if I could insert the following code above the code I mentioned before and have everything still work as well:"}, {"owner": {"reputation": 21, "user_id": 5999694, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207352197357404/picture?type=large", "display_name": "Corey Shapiro", "link": "https://stackoverflow.com/users/5999694/corey-shapiro"}, "edited": false, "score": 0, "creation_date": 1542683425, "post_id": 53385483, "comment_id": 93647135, "body": "cell_color = Sheets::Color.new(:blue =&gt; 1, :red =&gt; 0, :green =&gt; 0) \t\t    cell_format = Sheets::CellFormat.new(:background_color =&gt; cell_color) \t\tcell_data = Sheets::CellData.new(:formatted_value =&gt; date_string, :effective_format =&gt; cell_format)"}], "owner": {"reputation": 21, "user_id": 5999694, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207352197357404/picture?type=large", "display_name": "Corey Shapiro", "link": "https://stackoverflow.com/users/5999694/corey-shapiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 183, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542681946, "creation_date": 1542681946, "question_id": 53385483, "link": "https://stackoverflow.com/questions/53385483/how-do-i-use-the-googleapissheetsv4batchupdatespreadsheetrequest-object-pr", "title": "How do I use the Google::Apis::SheetsV4::BatchUpdateSpreadsheetRequest object properly?", "body": "<p>For now I'm just trying to add data to a cell in a Google Sheet using the batch_update_spreadsheet method of the SheetsService class. I know I could use the batch_update_values method for this purpose, but eventually I want to be able to add data to and change the formatting of multiple cells at the same time, which I can't do with that method. When I run the following code, I don't get any errors, but the cell is not updated on the given sheet:</p>\n\n<pre><code>cell_data = Sheets::CellData.new(:formatted_value =&gt; \"Hello World\")\nrow_data = Sheets::RowData.new(:values =&gt; [cell_data])\ngrid_coordinate = Sheets::GridCoordinate.new(:sheet_id =&gt; 0, :column_index =&gt; 3, :row_index =&gt; 5)\nupdate_cells_request = Sheets::UpdateCellsRequest.new(:fields =&gt; \"formatted_value\", :rows =&gt; [row_data], :range =&gt; grid_coordinate)\nrequest = Sheets::Request.new(:update_cells =&gt; update_cells_request)\nrequests &lt;&lt; request\nbatch_update_spreadsheet_request_object = Sheets::BatchUpdateSpreadsheetRequest.new(:requests =&gt; requests, :include_spreadsheet_in_response =&gt; true, :response_include_grid_data =&gt; true)\nresult = $service.batch_update_spreadsheet($spreadsheet_id, batch_update_spreadsheet_request_object)\n</code></pre>\n\n<p>Does anyone have any ideas why this code would not work the way it is intended to?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1542680003, "post_id": 53385201, "comment_id": 93646448, "body": "What is the logic behind <code>18131A</code>, and why is that your expected output?"}, {"owner": {"reputation": 9344, "user_id": 5781745, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/lStUs.jpg?s=128&g=1", "display_name": "K.D\u1d00\u1d20\u026as", "link": "https://stackoverflow.com/users/5781745/k-d%e1%b4%80%e1%b4%a0%c9%aas"}, "edited": false, "score": 0, "creation_date": 1542680101, "post_id": 53385201, "comment_id": 93646474, "body": "Are you trying to return all the delimited values (in between <code>,</code>) except the ones that shows the km?"}, {"owner": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "reply_to_user": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1542680425, "post_id": 53385201, "comment_id": 93646548, "body": "@TimBiegeleisen it&#39;s the car&#39;s serial number"}, {"owner": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "reply_to_user": {"reputation": 9344, "user_id": 5781745, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/lStUs.jpg?s=128&g=1", "display_name": "K.D\u1d00\u1d20\u026as", "link": "https://stackoverflow.com/users/5781745/k-d%e1%b4%80%e1%b4%a0%c9%aas"}, "edited": false, "score": 0, "creation_date": 1542680465, "post_id": 53385201, "comment_id": 93646559, "body": "@K.D\u1d00\u1d20\u026as no just the one word with letters and numbers not ending with &#39;km&#39;"}, {"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 2, "creation_date": 1542680591, "post_id": 53385201, "comment_id": 93646588, "body": "You need to provide <i>logic</i> by which we can figure out how to extract the car&#39;s serial number.  Currently, you have not done this."}, {"owner": {"reputation": 9344, "user_id": 5781745, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/lStUs.jpg?s=128&g=1", "display_name": "K.D\u1d00\u1d20\u026as", "link": "https://stackoverflow.com/users/5781745/k-d%e1%b4%80%e1%b4%a0%c9%aas"}, "edited": false, "score": 1, "creation_date": 1542680862, "post_id": 53385201, "comment_id": 93646645, "body": "Here&#39;s the issue: your serial number is just a bunch of numbers and letters - same thing that every other one of your delimited values have. There is currently no logic that can separate your serial numbers from a normal word like &#39;Sedan&#39;. Some appropriate logic would be &quot;All serial numbers will always start with at least 2 digits (minimum) and always end in a capital letter that is between A-F, and will always be between 5-8 characters long&quot; would be a good place to start."}, {"owner": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "reply_to_user": {"reputation": 9344, "user_id": 5781745, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/lStUs.jpg?s=128&g=1", "display_name": "K.D\u1d00\u1d20\u026as", "link": "https://stackoverflow.com/users/5781745/k-d%e1%b4%80%e1%b4%a0%c9%aas"}, "edited": false, "score": 1, "creation_date": 1542681018, "post_id": 53385201, "comment_id": 93646677, "body": "@K.D\u1d00\u1d20\u026as but the serial number is the only thing in my text that contains both letters and numbers other than the number of kilometers (ends with km). Thanks"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 9344, "user_id": 5781745, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/lStUs.jpg?s=128&g=1", "display_name": "K.D\u1d00\u1d20\u026as", "link": "https://stackoverflow.com/users/5781745/k-d%e1%b4%80%e1%b4%a0%c9%aas"}, "edited": false, "score": 0, "creation_date": 1542684739, "post_id": 53385201, "comment_id": 93647349, "body": "Sara, I think both you and @K.D\u1d00\u1d20\u026as have valid points. However, you should consider the possibility that the contents of the string may change in future to include a data item that meets your test for a serial number but in fact is not one. Incidentally, &quot;But it keeps on returning the # of kilometers.&quot; brought a smile to my face. You run the code. The answer is not what you expect, so you run it again--without making any changes--hoping for a better outcome. It makes no sense, but we&#39;ve all done it."}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1560716096, "last_edit_date": 1560716096, "creation_date": 1542681062, "answer_id": 53385370, "question_id": 53385201, "link": "https://stackoverflow.com/questions/53385201/regex-that-will-match-a-combination-of-letters-and-numbers-not-ending-with-km/53385370#53385370", "title": "Regex that will match a combination of letters and numbers NOT ending with &quot;km&quot;", "body": "<p>My understand is that, given a string, you wish to extract all substrings having the following properties:</p>\n\n<ul>\n<li>the substring is preceded by a comma or begins the string and is followed by a comma or ends the string;</li>\n<li>the substring contains only digits and uppercase letters;</li>\n<li>the substring contains at least one digit;</li>\n<li>the substring contains at least one uppercase letter; and</li>\n<li>the substring cannot end with the string <code>\"km\"</code>.</li>\n</ul>\n\n<p>The test string is the following.</p>\n\n<pre><code>str = \"65101km,Sedan,Manual,18131A,FWD,Used,5.5L/100km,Toyota,camry,SE,\" +\n      \"{AC, Heated Seats, Heated Mirrors, Keyless Entry},2010,208A1,28km1\"\n</code></pre>\n\n<p>Notice that I've appended the string given in the question with <code>\",208A1,28km1\"</code>.</p>\n\n<p>You can extract the desired substrings using the method <a href=\"http://ruby-doc.org/core-2.5.1/String.html#method-i-scan\" rel=\"nofollow noreferrer\">String#scan</a> with the following regular expression.</p>\n\n<pre><code>r = /\n    (?&lt;=\\A|,)      # match the beginning of the string or a comma in a positive lookbehind\n    [\\p{Upper}\\d]  # match a digit or uppercase letter in character class\n    *              # perform above match zero or more times     \n    (?:            # begin a non-capture group\n      \\d           # match a digit\n      \\p{Upper}    # match an uppercase letter\n      |            # or\n      \\p{Upper}    # match an uppercase letter\n      \\d           # match one or more digits\n    )              # end non-capture group\n    [\\p{Upper}\\d]  # match a digit or uppercase letter in character class\n    *              # perform above match zero or more times     \n    (?&lt;!km)        # do not match 'km' (negative lookbehing)\n    (?=,|\\z)       # match a comma or end of the string (positive lookahead)\n    /x             # free-spacing regex definition mode\n\nstr.scan(r)\n   #=&gt; [\"18131A\", \"208A1\"]\n</code></pre>\n\n<p>Alternatively, you could do that in four simpler steps.</p>\n\n<pre><code>str.split(',').select do |s| s.match?(/\\A\\p{Alnum}+\\z/) &amp;&amp;\n                             s.match?(/\\p{Alpha}/) &amp;&amp;\n                             s.match?(/\\p{Digit}/) &amp;&amp;\n                             !s.end_with?(\"km\")\n                      end\n  #=&gt; [\"18131A\", \"208A1\"]\n</code></pre>\n\n<p>Documentation for <code>\\p{}</code> <em>constructs</em> can be found by searching on the same in  <a href=\"http://ruby-doc.org/core-2.5.1/Regexp.html\" rel=\"nofollow noreferrer\">Regexp</a>. They are similar to <em>POSIX bracket classes</em>, which are documented in the same file.</p>\n\n<p>The regular expression is conventionally written (i.e., not free spacing mode) as follows. I've also replaced <code>\\p{Upper}</code> by its abbreviation, <code>\\p{Lu}</code>.</p>\n\n<pre><code> r = /(?&lt;=\\A|,)[\\p{Lu}\\d]*(?:\\d\\p{Lu}|\\p{Lu}\\d)[\\p{Lu}\\d]*(?&lt;!km)(?=,|\\z)/\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 0, "creation_date": 1542681906, "post_id": 53385443, "comment_id": 93646838, "body": "thanks, this seems to work, but how can i output the serial number without the coma and the end"}, {"owner": {"reputation": 9344, "user_id": 5781745, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/lStUs.jpg?s=128&g=1", "display_name": "K.D\u1d00\u1d20\u026as", "link": "https://stackoverflow.com/users/5781745/k-d%e1%b4%80%e1%b4%a0%c9%aas"}, "reply_to_user": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 0, "creation_date": 1542681939, "post_id": 53385443, "comment_id": 93646850, "body": "You need to return the submatches - not the entire match. See <a href=\"https://www.regular-expressions.info/refcapture.html\" rel=\"nofollow noreferrer\">What is a capturing group</a>"}, {"owner": {"reputation": 9344, "user_id": 5781745, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/lStUs.jpg?s=128&g=1", "display_name": "K.D\u1d00\u1d20\u026as", "link": "https://stackoverflow.com/users/5781745/k-d%e1%b4%80%e1%b4%a0%c9%aas"}, "reply_to_user": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 0, "creation_date": 1542682186, "post_id": 53385443, "comment_id": 93646906, "body": "<code>serialNum = string.match(&#47;(\\d+\\w+(?&lt;!km\\b))[,|$]&#47;i).captures</code> works for Ruby I believe"}, {"owner": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 0, "creation_date": 1542682533, "post_id": 53385443, "comment_id": 93646976, "body": "if i&#39;m doing something like this: <code>f = File.open(fileName, &quot;r&quot;) f.each_line do |line| stock = line[&#47;(\\d+\\w+(?&lt;!km\\b))[,|$]&#47;] </code> can i use the method <code>capture</code> ?"}, {"owner": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 0, "creation_date": 1542683815, "post_id": 53385443, "comment_id": 93647202, "body": "I&#39;m sorry i just noticed that it is sometimes returning the &#39;date&#39; in the string"}, {"owner": {"reputation": 9344, "user_id": 5781745, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/lStUs.jpg?s=128&g=1", "display_name": "K.D\u1d00\u1d20\u026as", "link": "https://stackoverflow.com/users/5781745/k-d%e1%b4%80%e1%b4%a0%c9%aas"}, "reply_to_user": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 0, "creation_date": 1542684932, "post_id": 53385443, "comment_id": 93647381, "body": "I fixed it in my last edit @SaraMoufarrej. Sorry I was driving"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1542696315, "post_id": 53385443, "comment_id": 93650575, "body": "Note: <code>&quot;1a,1_a_b,1akm1&quot;.scan &#47;(\\d+\\w+[a-z](?&lt;!km\\b))(?:,|$)&#47;i #=&gt; [[&quot;1_a_b&quot;]]</code>.  <code>&quot;1_a_b&quot;</code> incorrectly matches because of what I regard as a curiosity of <code>\\w</code>, which I rarely use. To match <code>1a</code> change <code>\\w+</code> to <code>\\w*</code>. You also need to make changes to cause <code>1akm1</code> to be matched. Incidentally, coding while operating a moving vehicle is a &quot;distracted driving&quot; offence in most jurisdictions."}, {"owner": {"reputation": 9344, "user_id": 5781745, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/lStUs.jpg?s=128&g=1", "display_name": "K.D\u1d00\u1d20\u026as", "link": "https://stackoverflow.com/users/5781745/k-d%e1%b4%80%e1%b4%a0%c9%aas"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1542696682, "post_id": 53385443, "comment_id": 93650694, "body": "Thanks for the input @CarySwoveland. The reason I decided to go with the <code>+</code> quantifier in this case was because I figured a serial number would have to be greater than 2 chrs in length. I could certainly change the <code>\\w</code> to <code>[a-z0-9]</code>, however. And my response of me driving was actually for my lack of a timely response to OP&#39;s query (not me coding &amp; driving) xD"}, {"owner": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "edited": false, "score": 0, "creation_date": 1542722084, "post_id": 53385443, "comment_id": 93664445, "body": "Thank you both for greatly clarifying things"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1560716748, "post_id": 53385443, "comment_id": 99817683, "body": "<code>&quot;12km,%18131A,22km&quot;.scan &#47;(\\d+[a-z0-9]+[a-z](?&lt;!km\\b))(?:,|$)&#47;i #=&gt; [[&quot;18131A&quot;]]</code>. I&#39;m not sure that is intended.  Sara, do you want that? (btw I returned to this question after many moons because of an upvote of my answer. Upon doing so I noticed my answer was incorrect, so fixed it.)"}], "tags": [], "owner": {"reputation": 9344, "user_id": 5781745, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/lStUs.jpg?s=128&g=1", "display_name": "K.D\u1d00\u1d20\u026as", "link": "https://stackoverflow.com/users/5781745/k-d%e1%b4%80%e1%b4%a0%c9%aas"}, "is_accepted": true, "score": 3, "last_activity_date": 1542696775, "last_edit_date": 1542696775, "creation_date": 1542681668, "answer_id": 53385443, "question_id": 53385201, "link": "https://stackoverflow.com/questions/53385201/regex-that-will-match-a-combination-of-letters-and-numbers-not-ending-with-km/53385443#53385443", "title": "Regex that will match a combination of letters and numbers NOT ending with &quot;km&quot;", "body": "<p>From the <strong>examples</strong> you provided, it appears your serial numbers will always start with a digit and ends with a letter -- if this isn't true, then refer to <a href=\"https://stackoverflow.com/questions/53385201/regex-that-will-match-a-combination-of-letters-and-numbers-not-ending-with-km/53385443#comment93646645_53385201\">my comment</a> and read up what it's going to take to assist you better.</p>\n\n<p>This pattern should work: </p>\n\n<pre><code>/(\\d+[a-z0-9]+[a-z](?&lt;!km\\b))(?:,|$)/i\n</code></pre>\n\n<p>This requires the following conditions:</p>\n\n<ul>\n<li><code>\\d+</code> start with a minimum of one or more <code>+</code> digits <code>\\d</code></li>\n<li><code>[a-z0-9]+</code> followed by any alphanumerical character <code>[a-z0-9]</code>, one or more times <code>+</code></li>\n<li><code>(?&lt;!km\\b))(?:,|$)</code> negative lookahead that asserts the string ends with either a comma <code>,</code> or end of string <code>$</code>, but not if it comes after the letters km <code>(?&lt;!km\\b)</code></li>\n</ul>\n\n<p>This uses a single capturing group <code>(...)</code> so you don't include the comma <code>,</code> that comes with the entire match</p>\n\n<p>See it on <a href=\"https://regex101.com/r/BpTKsC/2\" rel=\"nofollow noreferrer\">regex101</a></p>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1542698933, "creation_date": 1542698933, "answer_id": 53388159, "question_id": 53385201, "link": "https://stackoverflow.com/questions/53385201/regex-that-will-match-a-combination-of-letters-and-numbers-not-ending-with-km/53388159#53388159", "title": "Regex that will match a combination of letters and numbers NOT ending with &quot;km&quot;", "body": "<p>I would start with splitting this line into items by the comma and then applying the regular expression to each item:</p>\n\n<pre><code>input = \"65101km,Sedan,Manual,18131A,FWD,Used,5.5L/100km,Toyota,\" \\\n        \"camry,SE,{AC, Heated Seats, Heated Mirrors, Keyless Entry},2010\"\ninput.split(',').grep(/^(?!.*km)\\d+\\p{l}+$/)\n#\u21d2 [\"18131A\"]\n</code></pre>\n\n<p>The above returns an array, so you probably want to handle it somehow (e.g. with <code>first</code>.)</p>\n\n<p>The regular expression itself matches all the items, following the pattern <code>\\d+\\p{l}+</code> that do not match <code>km</code> (<a href=\"https://www.regular-expressions.info/lookaround.html\" rel=\"nofollow noreferrer\">negative lookahead</a> in the beginning.)</p>\n"}], "owner": {"reputation": 47, "user_id": 10677636, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e544ddd2b573535ccd47fea109abb38b?s=128&d=identicon&r=PG&f=1", "display_name": "tester_s25", "link": "https://stackoverflow.com/users/10677636/tester-s25"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4401, "favorite_count": 0, "accepted_answer_id": 53385443, "answer_count": 3, "score": 0, "last_activity_date": 1560716096, "creation_date": 1542679508, "last_edit_date": 1542680721, "question_id": 53385201, "link": "https://stackoverflow.com/questions/53385201/regex-that-will-match-a-combination-of-letters-and-numbers-not-ending-with-km", "title": "Regex that will match a combination of letters and numbers NOT ending with &quot;km&quot;", "body": "<p>I'm new here so I'll try my best. </p>\n\n<p>I have a line of text containing different car information.</p>\n\n<blockquote>\n  <p>65101km,Sedan,Manual,18131A,FWD,Used,5.5L/100km,Toyota,camry,SE,{AC, Heated Seats, Heated Mirrors, Keyless Entry},2010</p>\n</blockquote>\n\n<p>I am trying to write a regex that will match a combination of letters and numbers NOT ending with \"km\" in that line.\nIt is the car's serial number that can differ from one carmaker to another.\nFor example: </p>\n\n<blockquote>\n  <p>18FO724A, 18131A, 19BF723A</p>\n</blockquote>\n\n<p>These are different serial numbers from different car models.</p>\n\n<p>I tried this: </p>\n\n<pre><code>/((?:[a-zA-Z]+[0-9]+[^km]$|[0-9]+[a-zA-Z])[a-zA-Z0-9])/\n</code></pre>\n\n<p>But it keeps on returning the # of kilometers</p>\n\n<blockquote>\n  <p>65101km</p>\n</blockquote>\n\n<p>while the answer I need is</p>\n\n<blockquote>\n  <p>18131A</p>\n</blockquote>\n\n<p>Any help will do.\nThanks</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 2, "creation_date": 1542685903, "post_id": 53385134, "comment_id": 93647595, "body": "Do not include links to external websites when you can easily copy and paste the content from those sites into your question. When that link stops working no one will be able to see the work you\u2019ve done. It\u2019s <i>32 characters</i> in a <i>single line</i>."}], "answers": [{"comments": [{"owner": {"reputation": 1909, "user_id": 1511626, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/gCsa3.png?s=128&g=1", "display_name": "Genhain", "link": "https://stackoverflow.com/users/1511626/genhain"}, "edited": false, "score": 0, "creation_date": 1542685122, "post_id": 53385232, "comment_id": 93647420, "body": "That is useful, but the end result I&#39;m looking for is to also have the original string while matching the aforementioned characters and modifying/replacing them with base64 encoded versions of the tag.  i am currently using gsub <code>gsub(&#47;({{2,3}\\s*)([^{}]*)(\\s*}{2,3})&#47;) { |_| $~[1]+Base64.urlsafe_encode64($~[2].strip, padding: false)+$~[3] }</code>"}, {"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "reply_to_user": {"reputation": 1909, "user_id": 1511626, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/gCsa3.png?s=128&g=1", "display_name": "Genhain", "link": "https://stackoverflow.com/users/1511626/genhain"}, "edited": false, "score": 2, "creation_date": 1542685355, "post_id": 53385232, "comment_id": 93647461, "body": "Well that isn&#39;t what your question says, and you should not change your question after others have already answered."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "reply_to_user": {"reputation": 1909, "user_id": 1511626, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/gCsa3.png?s=128&g=1", "display_name": "Genhain", "link": "https://stackoverflow.com/users/1511626/genhain"}, "edited": false, "score": 2, "creation_date": 1542686237, "post_id": 53385232, "comment_id": 93647669, "body": "@Genhain Why would you post a question that isn&#39;t your actual question? I recommend you read <a href=\"https://stackoverflow.com/help/how-to-ask\">How do I ask a good question?</a> and remember that you&#39;re asking <i>volunteers</i> to help you."}, {"owner": {"reputation": 1909, "user_id": 1511626, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/gCsa3.png?s=128&g=1", "display_name": "Genhain", "link": "https://stackoverflow.com/users/1511626/genhain"}, "edited": false, "score": 0, "creation_date": 1542687031, "post_id": 53385232, "comment_id": 93647862, "body": "@TimBiegeleisen and anothermh. Thank you for your time, sorry i was not succinct enough."}, {"owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "edited": false, "score": 0, "creation_date": 1542687265, "post_id": 53385232, "comment_id": 93647912, "body": "Ask a new question and reference this one, and maybe use my pattern if that would help at all."}, {"owner": {"reputation": 1909, "user_id": 1511626, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/gCsa3.png?s=128&g=1", "display_name": "Genhain", "link": "https://stackoverflow.com/users/1511626/genhain"}, "edited": false, "score": 0, "creation_date": 1542689058, "post_id": 53385232, "comment_id": 93648348, "body": "I think i came up with what i need, a more rigorous testing is needed but it seems to achieve what i want, rest assured if it does not i will be making a much more concise inquiry. Thank you again."}], "tags": [], "owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "is_accepted": true, "score": 2, "last_activity_date": 1542679783, "creation_date": 1542679783, "answer_id": 53385232, "question_id": 53385134, "link": "https://stackoverflow.com/questions/53385134/regex-for-value-inside-mustache-braces-while-ignoring-erroneous-whitespace/53385232#53385232", "title": "Regex for value inside mustache braces while ignoring erroneous whitespace", "body": "<p>One option is to <code>scan</code> your input string into an array matches, using the following pattern:</p>\n\n<pre><code>\\{+\\s*([^{}]+)\\s*\\}+\n</code></pre>\n\n<p>This would capture all content appearing in between (presumably) nested sets of curly braces.  Then, we can flatten that array into a single level array of string matches, from the single capture group, and collect, removing leading and trailing whitespace.</p>\n\n<pre><code>str = \"Hello {{{ name }}}, {{{greeting}}}. what is your favourite code related website {{ code question website!!! ?? ? }}? here is some random fact {{ random fun  fact    }}\"\narr = str.scan(/\\{+\\s*([^{}]+)\\s*\\}+/)\nprint arr.flatten.collect{|x| x.strip || x }\n\n[\"name\", \"greeting\", \"code question website!!! ?? ?\", \"random fun  fact\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1571894464, "creation_date": 1571894464, "answer_id": 58534602, "question_id": 53385134, "link": "https://stackoverflow.com/questions/53385134/regex-for-value-inside-mustache-braces-while-ignoring-erroneous-whitespace/58534602#58534602", "title": "Regex for value inside mustache braces while ignoring erroneous whitespace", "body": "<pre><code>str = \"Hello {{{ name }}}, {{{greeting}}}. what is your favourite code related website {{ code question website!!! ?? ? }}? here is some random fact {{ random fun  fact    }}\"\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>r = /\n    {+[ ]*     # match 1+ left braces then 0+ spaces\n    \\K         # forget everything matched so far\n    .+?        # match 1+ characters, lazily\n    (?=[ ]*})  # match 0+ spaces then 1 right brace in a positive lookahead\n    /x\n\nstr.scan(r)\n  #=&gt; [\"name\", \"greeting\", \"code question website!!! ?? ?\", \"random fun  fact\"]\n</code></pre>\n\n<p>This regular expression is conventionally written:</p>\n\n<pre><code>/{+ *\\K.+?(?= *})/\n</code></pre>\n\n<p>In free-spacing mode spaces are stripped out before the expression is parsed, so spaces that are part of the expression must be protected. I have done so by putting them in a character class. Alternatively, spaces can be escaped. Depending on requirements, one could instead match whitespaces with <code>\\s</code>, <code>[[:space:]]</code> or <code>\\p{Space}</code>, or spaces or tabs with <code>[[:blank:]]</code> or <code>\\p{Blank}</code>.</p>\n"}], "owner": {"reputation": 1909, "user_id": 1511626, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/gCsa3.png?s=128&g=1", "display_name": "Genhain", "link": "https://stackoverflow.com/users/1511626/genhain"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 53385232, "answer_count": 2, "score": 0, "last_activity_date": 1571894464, "creation_date": 1542678784, "last_edit_date": 1542687285, "question_id": 53385134, "link": "https://stackoverflow.com/questions/53385134/regex-for-value-inside-mustache-braces-while-ignoring-erroneous-whitespace", "title": "Regex for value inside mustache braces while ignoring erroneous whitespace", "body": "<p>I am currently attempting to use Regex to obtain the value inside Mustache syntax braces e.g </p>\n\n<p><code>Hello {{{ name }}}, {{{greeting}}}. what is your favourite code related website {{ code question website!!! ?? ? }}? here is some random fact {{ random fun  fact    }}</code></p>\n\n<p>I am trying to select everything except the braces and the leading and trailing white space (In the case the user adds more accidentally) or rather i would like to use groups to capture these 3 elements </p>\n\n<ul>\n<li>group 1: '{' and leading whitespace</li>\n<li>group 2: value we want</li>\n<li>group 3: trailing white space and '}'</li>\n</ul>\n\n<p>so far i have come up with the following <code>({{2,3}\\s*)([^{}]*)(\\s*}{2,3})</code> but if you check the capture groups the 2nd group matches then value we want...Which is good, but also the trailing white space which should be in the third group. i.e</p>\n\n<ul>\n<li>group 1: '{' and leading whitespace</li>\n<li>group 2: value we want with trailing white space</li>\n<li>group 3: '}'</li>\n</ul>\n\n<p>Ruby Implementation\n<code>str.gsub(/({{2,3}\\s*)([^{}]*)(\\s*}{2,3})/) { |_| $~[1]+Base64.urlsafe_encode64($~[2].strip, padding: false)+$~[3] }\n</code></p>\n"}, {"tags": ["ruby", "docker", "docker-swarm", "health-monitoring"], "comments": [{"owner": {"reputation": 5286, "user_id": 455770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mMHwz.jpg?s=128&g=1", "display_name": "Rots", "link": "https://stackoverflow.com/users/455770/rots"}, "edited": false, "score": 0, "creation_date": 1542679748, "post_id": 53385075, "comment_id": 93646393, "body": "I&#39;d guess that it&#39;s because your loop never finishes, so the script is always running, therefore always in a starting state."}, {"owner": {"reputation": 245, "user_id": 992104, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/349db56856a2c7d282918884e706ebda?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/992104/joe"}, "reply_to_user": {"reputation": 5286, "user_id": 455770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mMHwz.jpg?s=128&g=1", "display_name": "Rots", "link": "https://stackoverflow.com/users/455770/rots"}, "edited": false, "score": 0, "creation_date": 1542681935, "post_id": 53385075, "comment_id": 93646849, "body": "@Rots thanks for the comment! Ok. That would explain the starting part, but not the fact that it becomes unhealthy far too early (e.g. with the script above, rather than one that runs for a while and then stops outputting logs before sleeping for a long time, which will also become unhealthy early)."}, {"owner": {"reputation": 5286, "user_id": 455770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mMHwz.jpg?s=128&g=1", "display_name": "Rots", "link": "https://stackoverflow.com/users/455770/rots"}, "edited": false, "score": 0, "creation_date": 1542685619, "post_id": 53385075, "comment_id": 93647517, "body": "No problem. try commenting out the <code>$logger.warn</code> line. Perhaps it&#39;s looking for something there and reporting unhealthy. Else you might need to return something like 0 to report success."}, {"owner": {"reputation": 245, "user_id": 992104, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/349db56856a2c7d282918884e706ebda?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/992104/joe"}, "reply_to_user": {"reputation": 5286, "user_id": 455770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mMHwz.jpg?s=128&g=1", "display_name": "Rots", "link": "https://stackoverflow.com/users/455770/rots"}, "edited": false, "score": 0, "creation_date": 1542710593, "post_id": 53385075, "comment_id": 93657855, "body": "@Rots unfortunately not, changing the log level to debug still results in it going unhealthy while still outputting logs. I&#39;m less concerned about the &#39;health: starting&#39; than I am about it becoming unhealthy while logs are still going out."}, {"owner": {"reputation": 5286, "user_id": 455770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mMHwz.jpg?s=128&g=1", "display_name": "Rots", "link": "https://stackoverflow.com/users/455770/rots"}, "edited": false, "score": 0, "creation_date": 1542743773, "post_id": 53385075, "comment_id": 93676352, "body": "good try. Try setting the exit status with <code>exit 0</code> or <code>exit 1</code>."}], "owner": {"reputation": 245, "user_id": 992104, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/349db56856a2c7d282918884e706ebda?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/992104/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 978, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1542678221, "creation_date": 1542678221, "question_id": 53385075, "link": "https://stackoverflow.com/questions/53385075/base-docker-healthcheck-on-stdout-logs", "title": "Base docker healthcheck on STDOUT logs", "body": "<p>I've got a script that outputs logs to STDOUT. I want to monitor this, and if <code>x</code> seconds passes without log output, the healthcheck should fail and the container should restart.</p>\n\n<p>I've got something that I feel should work (using strace), but it's not. I'll post the files below. Does anyone have any idea how to solve this?</p>\n\n<p>Dockerfile:</p>\n\n<pre><code>FROM ruby:2.5.1\nRUN apt-get update\nRUN dpkg --configure -a\nENV TZ=Europe/London\nRUN ln -snf /usr/share/zoneinfo/$TZ /etc/localtime &amp;&amp; echo $TZ &gt; /etc/timezone\nRUN DEBIAN_FRONTEND=noninteractive apt-get install -y keyboard-configuration\nRUN apt-get install -y  --fix-missing curl gnupg build-essential mosh iceweasel git libappindicator1 postgresql libpq-dev xvfb xorg dbus-x11\nRUN apt-get install -y --fix-missing libxss1 nodejs xfonts-100dpi xfonts-75dpi sqlite libindicator7 unzip wget curl bzip2 libssl-dev libreadline-dev zlib1g-dev strace\nRUN ln -sf /usr/bin/nodejs /usr/local/bin/node\nRUN gem install bundler activerecord activesupport watir watir-scroll nokogiri pg pry forgery rspec headless rake vcr webmock rails logger\nWORKDIR /home/\nCOPY . .\nHEALTHCHECK --interval=25s --timeout=5s --retries=5 CMD strace -p $(pgrep -n ruby) 2&gt;&amp;1 | grep -m 1 write\\(\nCMD [\"ruby\", \"./test.rb\"]\n</code></pre>\n\n<p>test.rb:</p>\n\n<pre><code>require 'logger'\n$logger = Logger.new(STDOUT)\n$logger.level = Logger::DEBUG\nloop do\n  sleep 5\n  $logger.warn 'hi'\nend\n</code></pre>\n\n<p>Logs are outputting as expected when running <code>docker container log</code>, but the health status is always <code>starting</code>, and shortly after starting it will consider it failed and restart. I intend to use Docker Swarm once this is working.</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 2, "creation_date": 1542679001, "post_id": 53385065, "comment_id": 93646239, "body": "Sounds like <code>drop_while</code> ."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1542691386, "post_id": 53385065, "comment_id": 93648980, "body": "<code>drop_while</code> will drop elements from the beginning. What if the first four and the sixth elements are valid and you need remove the fifth one to make a run of five?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1542775773, "post_id": 53385065, "comment_id": 93685776, "body": "This is an interesting question, but it is not answered by the answer to which you awarded the greenie. See my comments on that question."}], "answers": [{"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 1, "last_activity_date": 1542695107, "creation_date": 1542695107, "answer_id": 53387381, "question_id": 53385065, "link": "https://stackoverflow.com/questions/53385065/delete-as-many-elements-from-the-beginning-of-an-array-that-match-a-value-until/53387381#53387381", "title": "Delete as many elements from the beginning of an array that match a value, until array reaches a specified size", "body": "<p>If you delete from the original object you end up with all the items that had not been deleted. So, I gues it is better to move just the desired items to a new object:</p>\n\n<pre><code>all_items.each_with_object([]) { |item, ary| ary &lt;&lt; item if !exclude_ids.include?(item[\"id\"]) and ary.size &lt; 5 }\n\n#=&gt; [{\"id\"=&gt;\"id03\"}, {\"id\"=&gt;\"id04\"}, {\"id\"=&gt;\"id05\"}, {\"id\"=&gt;\"id06\"}, {\"id\"=&gt;\"id08\"}]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1542838912, "last_edit_date": 1542838912, "creation_date": 1542699633, "answer_id": 53388293, "question_id": 53385065, "link": "https://stackoverflow.com/questions/53385065/delete-as-many-elements-from-the-beginning-of-an-array-that-match-a-value-until/53388293#53388293", "title": "Delete as many elements from the beginning of an array that match a value, until array reaches a specified size", "body": "<pre><code>termination_threshold = 5\nall_items = (1..20).to_a\n  #=&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]\nexclusions = [1,2,7]\n\nall_items.reject! do |n|\n  break if termination_threshold.zero?\n  exclude = exclusions.include? n\n  termination_threshold -= 1 if exclude\n  exclude\nend\n  #=&gt; [3, 4, 5, 6, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]\n\nall_items\n  #=&gt; [3, 4, 5, 6, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20]\n</code></pre>\n\n<p>The following could be used if only an array containing the first <code>termination_threshold</code> valid elements of <code>all_items</code> were desired:</p>\n\n<pre><code>all_items.each_with_object([]) do |e,arr|\n  arr &lt;&lt; e unless exclusions.include?(e)\n  break arr if arr.size == termination_threshold\nend\n  #=&gt; [3, 4, 5, 6, 8]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1542775232, "post_id": 53389652, "comment_id": 93685638, "body": "This is incorrect as it does not modify <code>all_items</code>. Instead, it returns an array containing the first 5 elements of <code>all_items</code> that are not contained in <code>exclude_ids</code>. The OP was quite specific that elements of <code>all_items</code> were to be removed until the first 5 valid elements of <code>all_items</code> had been identified. The OP even mentioned the use of <code>delete_if</code> (aka <code>reject!</code>, not <code>reject</code>). I considered using a lazy enumerator, but there is no lazy <code>reject!</code>..."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1542775609, "post_id": 53389652, "comment_id": 93685734, "body": "...Suppose <code>all_times</code> has 1,000 elements and the first 3 fail the test and the next five pass. An array of elements at offsets 3-7 of <code>all_items</code> is returned and <code>all_items</code> is unchanged. What use is that? The OP wants to use <code>all_items</code> with certain elements removed."}, {"owner": {"reputation": 10727, "user_id": 479167, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0ddf90fe12087db9cfae84c52ae0147c?s=128&d=identicon&r=PG", "display_name": "rubish", "link": "https://stackoverflow.com/users/479167/rubish"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1542782180, "post_id": 53389652, "comment_id": 93687718, "body": "@CarySwoveland based on return statement I deduced that the OP is just deleting elements because he wants to return the first five unrejected items, he doesn&#39;t care about the input. Moreover if deleting item was so important I assume deleting all the invalid items would have been priority instead of just rejecting to get the first five valid items."}, {"owner": {"reputation": 10727, "user_id": 479167, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0ddf90fe12087db9cfae84c52ae0147c?s=128&d=identicon&r=PG", "display_name": "rubish", "link": "https://stackoverflow.com/users/479167/rubish"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1542782293, "post_id": 53389652, "comment_id": 93687763, "body": "@CarySwoveland sometimes refactoring doesn&#39;t simply mean rearranging the code for optimization or readability but identifying the underlying requirements and change the code to match requirements while optimizing and improving readability."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1542782469, "post_id": 53389652, "comment_id": 93687828, "body": "The last sentence of the OP&#39;s question unambiguous and is not the question you answered."}, {"owner": {"reputation": 10727, "user_id": 479167, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0ddf90fe12087db9cfae84c52ae0147c?s=128&d=identicon&r=PG", "display_name": "rubish", "link": "https://stackoverflow.com/users/479167/rubish"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1542782661, "post_id": 53389652, "comment_id": 93687906, "body": "@CarySwoveland I agree with you and understand that you have given a answer for exactly what OP was asking, but he did accept my answer so I would assume OP didn&#39;t mean that and was focusing on it simply because of the way he had implemented it already."}, {"owner": {"reputation": 131, "user_id": 8496955, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/130af836e960f2242a04e7fa5cbef5a8?s=128&d=identicon&r=PG&f=1", "display_name": "lumos", "link": "https://stackoverflow.com/users/8496955/lumos"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1542836274, "post_id": 53389652, "comment_id": 93716009, "body": "I apologize for the confusion. I chose the answer because as @rubish inferred, I was ultimately more concerned with the need to break out of the iteration once the first five unrejected items were found (which is why I didn&#39;t simply run a <code>delete_if</code> on the whole array in the first place). I was hung up on using <code>delete_if</code> only because I didn&#39;t know something like <code>.lazy.reject</code> existed, which ended up being exactly what I was looking for for my script (once I modified it so the output was stored in a new array, since, as @CarySwoveland points out, there is no lazy <code>reject!</code>)."}, {"owner": {"reputation": 131, "user_id": 8496955, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/130af836e960f2242a04e7fa5cbef5a8?s=128&d=identicon&r=PG&f=1", "display_name": "lumos", "link": "https://stackoverflow.com/users/8496955/lumos"}, "edited": false, "score": 0, "creation_date": 1542836394, "post_id": 53389652, "comment_id": 93716053, "body": "I selected the answer that suited my personal needs, but for the sake of selecting an answer that technically responds to the exact question as I asked it at the time, I can change the accepted answer."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1542839862, "post_id": 53389652, "comment_id": 93717228, "body": "Given what you want, using a lazy enumerator is in my mind overkill. Moreover, lazy methods tend to be much slower than their non-lazy counterparts. I edited my answer to give a simple, straightforward calculation. In future, please ask how a desired end result could be obtained, rather than how a specific calculation could be done. Here that would be (sic) &quot;How can I obtain an array containing the first 5 valid elements of <code>all_items</code> without enumerating the entire array, where an element is valid if...?."}], "tags": [], "owner": {"reputation": 10727, "user_id": 479167, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0ddf90fe12087db9cfae84c52ae0147c?s=128&d=identicon&r=PG", "display_name": "rubish", "link": "https://stackoverflow.com/users/479167/rubish"}, "is_accepted": false, "score": 1, "last_activity_date": 1542705186, "creation_date": 1542705186, "answer_id": 53389652, "question_id": 53385065, "link": "https://stackoverflow.com/questions/53385065/delete-as-many-elements-from-the-beginning-of-an-array-that-match-a-value-until/53389652#53389652", "title": "Delete as many elements from the beginning of an array that match a value, until array reaches a specified size", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.5.0/Enumerator/Lazy.html\" rel=\"nofollow noreferrer\">Enumerator::Lazy</a> to achieve what you want:</p>\n\n<pre><code>all_items = [{\"id\" =&gt; \"id01\"},{\"id\" =&gt; \"id02\"},{\"id\" =&gt; \"id03\"},{\"id\" =&gt; \"id04\"},{\"id\" =&gt; \"id05\"},{\"id\" =&gt; \"id06\"},{\"id\" =&gt; \"id07\"},{\"id\" =&gt; \"id08\"},{\"id\" =&gt; \"id09\"},{\"id\" =&gt; \"id10\"}]\nexclude_ids = [\"id01\",\"id02\",\"id07\"]\nall_items.lazy.reject {|item| exclude_ids.include?(item['id']) }.first(5)\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 8496955, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/130af836e960f2242a04e7fa5cbef5a8?s=128&d=identicon&r=PG&f=1", "display_name": "lumos", "link": "https://stackoverflow.com/users/8496955/lumos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 53388293, "answer_count": 3, "score": 3, "last_activity_date": 1542838912, "creation_date": 1542678145, "question_id": 53385065, "link": "https://stackoverflow.com/questions/53385065/delete-as-many-elements-from-the-beginning-of-an-array-that-match-a-value-until", "title": "Delete as many elements from the beginning of an array that match a value, until array reaches a specified size", "body": "<p>I'm trying to modify an array by deleting values that match a unique ID, but then stop once the first 5 values of the array are valid (i.e. their IDs do not match the undesired ones). If the array has a count &lt;= 5, then this suffices:</p>\n\n<pre><code>all_items = [{\"id\" =&gt; \"id01\"},{\"id\" =&gt; \"id02\"},{\"id\" =&gt; \"id03\"},{\"id\" =&gt; \"id04\"}]\nexclude_ids = [\"id01\",\"id02\"]\nall_items.delete_if { |item| exclude_ids.include?(item[\"id\"])}\n</code></pre>\n\n<p>and the desired output is <code>[{\"id\" =&gt; \"id03\"},{\"id\" =&gt; \"id04\"}]</code>.</p>\n\n<p>But in the case where the total count of the array is >= 5, I want to delete <em>only</em> as many of the first items as necessary until the first 5 elements (<code>all_items[0..4]</code>) are all valid within the set criterion, and then stop iterating. If I were to do this:</p>\n\n<pre><code>all_items = [{\"id\" =&gt; \"id01\"},{\"id\" =&gt; \"id02\"},{\"id\" =&gt; \"id03\"},{\"id\" =&gt; \"id04\"},{\"id\" =&gt; \"id05\"},{\"id\" =&gt; \"id06\"},{\"id\" =&gt; \"id07\"},{\"id\" =&gt; \"id08\"},{\"id\" =&gt; \"id09\"},{\"id\" =&gt; \"id10\"}]\nexclude_ids = [\"id01\",\"id02\",\"id07\"]\nall_items.delete_if { |item| exclude_ids.include?(item[\"id\"])}\nreturn all_items[0..4]\n</code></pre>\n\n<p>I do get the desired output, <code>[{\"id\" =&gt; \"id03\"},{\"id\" =&gt; \"id04\"},{\"id\" =&gt; \"id05\"},{\"id\" =&gt; \"id06\"},{\"id\" =&gt; \"id08\"}]</code>. But I want the <code>delete_if</code> to completely stop once it reaches the point where <code>all_items[0..4]</code> already contains 5 valid elements. In this instance, I would want it to break after <code>{\"id\" =&gt; \"id08\"}</code>, and not even check the remaining values. (If, however, while the <code>delete_if</code> is running, the total count dips below 5, then it should continue iterating over all remaining elements, as it would fall into the category of the first piece of code I posted above, where the count &lt;= 5.)</p>\n\n<p>I know there is a <code>delete_if.with_index</code>, but I'm not sure if it's appropriate in this context, especially since the index would be shifting as items are deleted. </p>\n\n<p>To summarize my question: is there a way to delete as many first items from an array as is required until <code>array[0..x]</code> is populated by desired values, and then stop checking/deleting any remaining items once that count of x is reached? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "linux", "ubuntu"], "comments": [{"owner": {"reputation": 5428, "user_id": 1938097, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/928c1abb5e28975cff71561ce3ed98d6?s=128&d=identicon&r=PG", "display_name": "Austio", "link": "https://stackoverflow.com/users/1938097/austio"}, "edited": false, "score": 0, "creation_date": 1542679062, "post_id": 53384844, "comment_id": 93646253, "body": "Howdy, looks like your issue is related to permissions on your system.  You could get around that by running sudo in front of your command.  However i think your best course of action is to remove ruby from your system (sudo apt-get purge ruby) and then start over with rbenv.  <a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow noreferrer\">github.com/rbenv/rbenv</a>"}, {"owner": {"reputation": 15486, "user_id": 719547, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51e61f099c7b1ac0588ecda69193f75c?s=128&d=identicon&r=PG", "display_name": "Jim Stewart", "link": "https://stackoverflow.com/users/719547/jim-stewart"}, "edited": false, "score": 2, "creation_date": 1542696427, "post_id": 53384844, "comment_id": 93650616, "body": "You almost certainly did <code>sudo gem install</code> on some other gem previously, and now your <code>&#47;home&#47;bernardo&#47;.gem</code> directory is owned by <code>root</code>. The easiest way to fix this is a bit of a sledgehammer, but you should do it: <code>sudo rm -rf ~&#47;.gem</code>, and then reinstall any gems you want. This will delete all your gems (some of which are owned by root), but it&#39;ll fix your problem. Just do that and then reinstall the gems you want, and never ever <code>sudo gem install</code> for any reason."}, {"owner": {"reputation": 15486, "user_id": 719547, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51e61f099c7b1ac0588ecda69193f75c?s=128&d=identicon&r=PG", "display_name": "Jim Stewart", "link": "https://stackoverflow.com/users/719547/jim-stewart"}, "reply_to_user": {"reputation": 5428, "user_id": 1938097, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/928c1abb5e28975cff71561ce3ed98d6?s=128&d=identicon&r=PG", "display_name": "Austio", "link": "https://stackoverflow.com/users/1938097/austio"}, "edited": false, "score": 0, "creation_date": 1542696733, "post_id": 53384844, "comment_id": 93650719, "body": "@Austio above is on the right track, but wrong about the underlying cause, and purging/reinstalling Ruby is not going to help."}], "answers": [{"tags": [], "owner": {"reputation": 973, "user_id": 9989384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/530602201f9551563176b0b648b7d50b?s=128&d=identicon&r=PG&f=1", "display_name": "Cryptex Technologies", "link": "https://stackoverflow.com/users/9989384/cryptex-technologies"}, "is_accepted": false, "score": 0, "last_activity_date": 1542692371, "creation_date": 1542692371, "answer_id": 53386871, "question_id": 53384844, "link": "https://stackoverflow.com/questions/53384844/problems-installing-rails-in-ubuntu/53386871#53386871", "title": "Problems installing &quot;rails&quot; in Ubuntu", "body": "<p>Just go through the steps given in below link: <a href=\"https://gorails.com/setup/ubuntu/16.04\" rel=\"nofollow noreferrer\">https://gorails.com/setup/ubuntu/16.04</a>\nand make sure you install ruby using rvm and set is default ruby. Then install rails.\nThis will resolve your issue.</p>\n\n<p>If still the problem is not resolved, then remove previously installed ruby and go through all the steps for ruby and rails installation.</p>\n"}, {"tags": [], "owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "is_accepted": true, "score": 0, "last_activity_date": 1542701182, "last_edit_date": 1542701182, "creation_date": 1542696239, "answer_id": 53387586, "question_id": 53384844, "link": "https://stackoverflow.com/questions/53384844/problems-installing-rails-in-ubuntu/53387586#53387586", "title": "Problems installing &quot;rails&quot; in Ubuntu", "body": "<p>Here are the steps that I took to install rbenv in ubuntu server </p>\n\n<pre><code>git clone https://github.com/rbenv/rbenv.git ~/.rbenv\necho 'export PATH=\"$HOME/.rbenv/bin:$PATH\"' &gt;&gt; ~/.bashrc\necho 'eval \"$(rbenv init -)\"' &gt;&gt; ~/.bashrc\nsource ~/.bashrc\ngit clone https://github.com/rbenv/ruby-build.git ~/.rbenv/plugins/ruby-build\nrbenv -v\nrbenv install 2.5.3\nrbenv global 2.5.3\nrbenv rehash\nruby -v\ngem install bundler\n# inside rails application\nbundle install\n</code></pre>\n\n<p>Explanation:</p>\n\n<ul>\n<li>Line 1: clone rbenv project</li>\n<li>line 2-4: enter rbenv path and settings to your bashrc</li>\n<li>rbenv -v = check whether your rbenv is running correctly</li>\n<li>then install ruby version (I checked above you running version 2.5.3)</li>\n<li>rbenv global 2.5.3 (set version 2.5.3 in any folder paths)</li>\n<li>rbenv rehash (after you set global / local make sure you do rehash)</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 6074972, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5mtsR.jpg?s=128&g=1", "display_name": "Maheshkumar.J", "link": "https://stackoverflow.com/users/6074972/maheshkumar-j"}, "is_accepted": false, "score": -1, "last_activity_date": 1542700978, "creation_date": 1542700978, "answer_id": 53388602, "question_id": 53384844, "link": "https://stackoverflow.com/questions/53384844/problems-installing-rails-in-ubuntu/53388602#53388602", "title": "Problems installing &quot;rails&quot; in Ubuntu", "body": "<p>Use <code>sudo gem install rails</code> May helps you.</p>\n"}, {"tags": [], "owner": {"reputation": 448, "user_id": 2781238, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tf946.jpg?s=128&g=1", "display_name": "Vikram Sharma", "link": "https://stackoverflow.com/users/2781238/vikram-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1542706237, "creation_date": 1542706237, "answer_id": 53389942, "question_id": 53384844, "link": "https://stackoverflow.com/questions/53384844/problems-installing-rails-in-ubuntu/53389942#53389942", "title": "Problems installing &quot;rails&quot; in Ubuntu", "body": "<p>Never install a gem with sudo command.</p>\n\n<p>use</p>\n\n<pre><code>gem install rails\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>sudo gem install rails \n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 10677526, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-TnhvNEO4TJc/AAAAAAAAAAI/AAAAAAAAGNk/oGBRyqvhVrY/photo.jpg?sz=128", "display_name": "Bernardo Garza", "link": "https://stackoverflow.com/users/10677526/bernardo-garza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 1, "accepted_answer_id": 53387586, "answer_count": 4, "score": 0, "last_activity_date": 1584528160, "creation_date": 1542676317, "last_edit_date": 1584528160, "question_id": 53384844, "link": "https://stackoverflow.com/questions/53384844/problems-installing-rails-in-ubuntu", "title": "Problems installing &quot;rails&quot; in Ubuntu", "body": "<p>I am new to programming and trying to install Rails on <code>Ubuntu 18.10</code>, but I get the following error when running <code>~$ gem install rails</code>. How do I avoid this error and install rails?</p>\n\n<blockquote>\n  <p>ERROR:  While executing gem ... (Errno::EACCES)\n      Permission denied @ dir_s_mkdir - /home/bernardo/.gem/specs</p>\n</blockquote>\n\n<p>I'm running <code>Ruby 2.5.3p105</code>.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "is_accepted": false, "score": 1, "last_activity_date": 1542675734, "creation_date": 1542675734, "answer_id": 53384776, "question_id": 53384505, "link": "https://stackoverflow.com/questions/53384505/initialize-ruby-hash-with-empty-array-as-default/53384776#53384776", "title": "Initialize Ruby hash with empty array as default", "body": "<p>The <a href=\"https://ruby-doc.org/core-2.1.5/Hash.html#method-c-new\" rel=\"nofollow noreferrer\">answer</a> is in <code>Hash.new</code>. In short: </p>\n\n<blockquote>\n  <p>If obj (<code>[]</code> in your case) is specified, this single object will be used for all default values. If a block is specified, it will be called with the hash object and the key, and should return the default value. It is the block's responsibility to store the value in the hash if required.</p>\n</blockquote>\n\n<p>Initialise with a block to set non-nil defaults.</p>\n"}], "owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1170, "favorite_count": 0, "closed_date": 1542676845, "answer_count": 1, "score": 3, "last_activity_date": 1542675770, "creation_date": 1542673256, "question_id": 53384505, "link": "https://stackoverflow.com/questions/53384505/initialize-ruby-hash-with-empty-array-as-default", "closed_reason": "Duplicate", "title": "Initialize Ruby hash with empty array as default", "body": "<p>When I initialize a Ruby hash with a default value like 0 and create a new entry in the hash and increment it behaves as expected:</p>\n\n<pre><code>irb(main):001:0&gt; h1 = Hash.new(0)\n=&gt; {}\nirb(main):002:0&gt; h1[:foo] += 1\n=&gt; 1\nirb(main):003:0&gt; h1\n=&gt; {:foo=&gt;1}\nirb(main):004:0&gt; h1[:foo]\n=&gt; 1\n</code></pre>\n\n<p>Notice how <code>h1 #=&gt; {:foo=&gt;1}</code> and <code>h1[:foo] #=&gt; 1</code>. That's what I was expecting to see.</p>\n\n<p>Except if I use a default value of an empty array then this is what happens:</p>\n\n<pre><code>irb(main):005:0&gt; h2 = Hash.new([])\n=&gt; {}\nirb(main):006:0&gt; h2[:foo] &lt;&lt; \"cats\"\n=&gt; [\"cats\"]\nirb(main):007:0&gt; h2\n=&gt; {}\nirb(main):008:0&gt; h2[:foo]\n=&gt; [\"cats\"]\n</code></pre>\n\n<p>Notice how <code>h2 #=&gt; {}</code> and <code>h2[:foo] #=&gt; [\"cats\"]</code>. I don't know why this is happening.</p>\n\n<ul>\n<li>What is going on here?</li>\n<li>Why does h2 look like an empty hash but then still has a value with the key <code>:foo</code>?</li>\n</ul>\n\n<p>If I use some a block then the expected behavior happens:</p>\n\n<pre><code>irb(main):001:0&gt; h3 = Hash.new {|hash, key| hash[key] = [] }\n=&gt; {}\nirb(main):002:0&gt; h3[:foo] &lt;&lt; \"cats\"\n=&gt; [\"cats\"]\nirb(main):003:0&gt; h3\n=&gt; {:foo=&gt;[\"cats\"]}\nirb(main):004:0&gt; h3[:foo]\n=&gt; [\"cats\"]\n</code></pre>\n\n<p>Notice how <code>h2 #=&gt; {:foo=&gt;[\"cats\"]}</code> and <code>h3[:foo] #=&gt; [\"cats\"]</code>. That's what I was expecting to see.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf", "delayed-job"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1542683955, "post_id": 53384410, "comment_id": 93647225, "body": "Personally I would save some kind of reference to the delayed_job process and check if the job has finished before reading the file, but it&#39;s easier to implement some kind of temp file and move/rename it after it&#39;s saved."}], "answers": [{"tags": [], "owner": {"reputation": 5836, "user_id": 1153022, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/JgpPs.jpg?s=128&g=1", "display_name": "okay56k", "link": "https://stackoverflow.com/users/1153022/okay56k"}, "is_accepted": false, "score": 1, "last_activity_date": 1542673263, "creation_date": 1542673263, "answer_id": 53384507, "question_id": 53384410, "link": "https://stackoverflow.com/questions/53384410/ruby-file-exist-returns-true-before-file-is-readable/53384507#53384507", "title": "Ruby File.exist? returns true before file is readable", "body": "<p>You could write to a temp file then rename it once it's finished. You haven't included your code so far but something like this could work for you:</p>\n\n<pre><code>def write_and_replace(path, file, file_name, data)\n  file_path = File.join(folder_path, \"#{file_name}.pdf\")\n  temp_file_path = File.join(folder_path, \"temp_#{file_name}.pdf\")\n\n  File.open(temp_file_path, 'w') { |f| f.write(data) }\n\n  # Args: existing file, new name\n  File.rename(path, file_path)\n  File.rename(temp_file_path, file)\n  File.delete(file_path)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1542677060, "post_id": 53384548, "comment_id": 93645825, "body": "Or push a notification over Action Cable instead of having the client poll."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1542677161, "post_id": 53384548, "comment_id": 93645850, "body": "Yes, indeed. I don&#39;t do Action Cable (yet), but that seems very true."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 1, "last_activity_date": 1542673664, "creation_date": 1542673664, "answer_id": 53384548, "question_id": 53384410, "link": "https://stackoverflow.com/questions/53384410/ruby-file-exist-returns-true-before-file-is-readable/53384548#53384548", "title": "Ruby File.exist? returns true before file is readable", "body": "<p>This is (very broadly and somewhat roughly) how I do it: </p>\n\n<p>First, I call a <code>post</code> action on the controller that is calling the background create process. This action creates a <code>ServiceRequest</code> (a model in my app) with relevant <code>service_request.details</code> and a status of <code>created</code>. The <code>service_request</code> is then sent to the background process (I use RabbitMQ). And the action returns the <code>service_request.id</code>.</p>\n\n<p>The front end starts pinging (via AJAX) the service request end point (something like <code>service_requests/:id</code>), and the <code>ServiceRequestController</code>'s <code>show</code> action sends back the <code>service_request.status</code> (along with other stuff, including <code>service_request.results</code>. This loops while the <code>service_request.status</code> is neither <code>completed</code> nor <code>failed</code>.</p>\n\n<p>Meanwhile, the background process creates the PDF. When it is done, it sets the <code>service_request.status</code> to <code>completed</code>. And, it sets <code>service_request.results</code> to contain the data the front end needs to locate and retrieve the PDF. (I store my PDFs to and AWS bucket since I'm on Heroku.)</p>\n\n<p>When the front end finally receives a service_request.status of <code>completed</code> it uses the <code>service_request.results</code> to fetch and display the PDF.</p>\n"}], "owner": {"reputation": 43, "user_id": 9235874, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5564d5b99fc28edd1a1ea0ae7ba9f48c?s=128&d=identicon&r=PG&f=1", "display_name": "bugged", "link": "https://stackoverflow.com/users/9235874/bugged"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 53384548, "answer_count": 2, "score": 1, "last_activity_date": 1542673664, "creation_date": 1542672580, "question_id": 53384410, "link": "https://stackoverflow.com/questions/53384410/ruby-file-exist-returns-true-before-file-is-readable", "title": "Ruby File.exist? returns true before file is readable", "body": "<p>I've got a Rails app where I'm trying to pass the creation of a large PDF to a background process and allow the user to see it when it's finished. It's a multi-page document combined with the combine_pdf gem and passed to delayed_job.</p>\n\n<p>I have 3 actions: the first creates and saves the file, the second is called repeatedly with short delays via an asynchronous request to check if the file exists yet, and the third shows the PDF in the browser.</p>\n\n<p>I'm having trouble with the second part, as it uses <code>File.exist?('my_file.pdf')</code>, but this is returning <code>true</code> before the file has finished saving. The link that is then shown to view the PDF results in an error (ActionController::MissingFile). The file actually becomes available about 10 seconds later, at which point the link works correctly.</p>\n\n<p>I'm guessing the file is still being written at the point that it's checked? How can I check the file saving has completed and the file is actually available to be read?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "join", "activerecord", "controller"], "answers": [{"comments": [{"owner": {"reputation": 541, "user_id": 7773621, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b4bfe00cf0e21d8915f252905ccc73d3?s=128&d=identicon&r=PG&f=1", "display_name": "Boucherie", "link": "https://stackoverflow.com/users/7773621/boucherie"}, "edited": false, "score": 0, "creation_date": 1542726480, "post_id": 53387855, "comment_id": 93667123, "body": "That&#39;s the second thing I tried - I get <code>nil</code> from this (this version makes it back into an instance variable, but still the same)"}], "tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": false, "score": 0, "last_activity_date": 1542697557, "creation_date": 1542697557, "answer_id": 53387855, "question_id": 53383703, "link": "https://stackoverflow.com/questions/53383703/pull-activerecord-join-table-information-through-controller-query/53387855#53387855", "title": "Pull Activerecord join table information through controller query", "body": "<pre><code>@warehoused_products = Product.includes(:rfid_tags).where(\"rfid_tags.location_type = ? AND rfid_tags.location_id = ?\", 'Warehouse', params[:id]) \n\n\n@product_histories = @warehoused_products.includes(\"product_selections\").where(\"product_selections.product_id = ?\", params[:product_id]).first.inspect\n</code></pre>\n"}], "owner": {"reputation": 541, "user_id": 7773621, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b4bfe00cf0e21d8915f252905ccc73d3?s=128&d=identicon&r=PG&f=1", "display_name": "Boucherie", "link": "https://stackoverflow.com/users/7773621/boucherie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542697557, "creation_date": 1542667334, "last_edit_date": 1542692075, "question_id": 53383703, "link": "https://stackoverflow.com/questions/53383703/pull-activerecord-join-table-information-through-controller-query", "title": "Pull Activerecord join table information through controller query", "body": "<p>I have a query that generated a list of product data; I am working to dig in a bit deeper and extract an attribute from a join table (ProductSelections). Both RFIDTag and Products have many of the Product Selections model (i.e. the schema table contains both an rfid_tag_id and a product_id). Since I'm working from the product list, I'm deriving my query from here: </p>\n\n<pre><code>#original query (works as needed):\n\n@warehoused_products = Product.includes(:rfid_tags).joins(:rfid_tags).where(\"rfid_tags.location_type = 'Warehouse' AND rfid_tags.location_id = ?\", params[:id]) \n\n#Attempt at getting product selection data:\n\n@product_histories = @warehoused_products.joins(\"INNER JOIN product_selections ON :product_selections.product_id = products.id\").includes(:product_selections)\n</code></pre>\n\n<p>This raises a fairly large postgreSQL error when I check it:</p>\n\n<pre><code>raise @product_histories.inspect:\n\nPG::SyntaxError: ERROR: syntax error at or near \":\" LINE 1: ...eted_at\" IS NULL INNER JOIN product_selections ON :product_s...\n</code></pre>\n\n<p>On adjusting the query:</p>\n\n<pre><code>raise @warehoused_products.includes(:product_selections).joins(:product_selections).where(\"product_selections.product_id = ?\", params[:product_id]).first.inspect\n</code></pre>\n\n<p>I get a a <code>nil</code> result - error-free, and likely cleaner, but not quite there.</p>\n\n<p>A Product Selection object looks like so, for reference: </p>\n\n<pre><code>#&lt;ProductSelection id: 269, user_id: 2, listing_id: 11, product_id: 35, created_at: \"2016-07-14 15:38:11\", updated_at: \"2016-08-08 21:10:13\", rfid_tag_id: 575, part_id: nil, use_time: 2173274, account_id: 1, deleted_at: nil&gt;\n</code></pre>\n\n<p>How can I resolve the query so that I can pull the associated table object?</p>\n"}, {"tags": ["ruby", "local-variables"], "comments": [{"owner": {"reputation": 20644, "user_id": 184184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f6a508697f9eca2680b12ddb85ba1319?s=128&d=identicon&r=PG", "display_name": "Lenin Raj Rajasekaran", "link": "https://stackoverflow.com/users/184184/lenin-raj-rajasekaran"}, "edited": false, "score": 0, "creation_date": 1542665526, "post_id": 53383363, "comment_id": 93642725, "body": "where is <code>number_adder</code> defined in your code?"}, {"owner": {"reputation": 162909, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 3, "creation_date": 1542665834, "post_id": 53383363, "comment_id": 93642831, "body": "Code in question has nothing to do with JavaScript. Please only use tags that are relevant to the specific problem"}, {"owner": {"reputation": 355, "user_id": 5719485, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Py3gI.jpg?s=128&g=1", "display_name": "Pararera", "link": "https://stackoverflow.com/users/5719485/pararera"}, "reply_to_user": {"reputation": 162909, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "edited": false, "score": 0, "creation_date": 1542666059, "post_id": 53383363, "comment_id": 93642901, "body": "@charlietfl guess he said he tried same code with JS."}, {"owner": {"reputation": 162909, "user_id": 1175966, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d3d9dfbd040f9cbc1a6b82f0da2b345?s=128&d=identicon&r=PG", "display_name": "charlietfl", "link": "https://stackoverflow.com/users/1175966/charlietfl"}, "reply_to_user": {"reputation": 355, "user_id": 5719485, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Py3gI.jpg?s=128&g=1", "display_name": "Pararera", "link": "https://stackoverflow.com/users/5719485/pararera"}, "edited": false, "score": 0, "creation_date": 1542666340, "post_id": 53383363, "comment_id": 93642998, "body": "@SilvioCro The code shown wouldn&#39;t work in javascript so just mentioning the word doesn&#39;t make it a relevant tag"}, {"owner": {"reputation": 2125, "user_id": 1446543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/934816c610f53abdab5f26510478bc24?s=128&d=identicon&r=PG", "display_name": "ForeverZer0", "link": "https://stackoverflow.com/users/1446543/foreverzer0"}, "edited": false, "score": 1, "creation_date": 1542671989, "post_id": 53383363, "comment_id": 93644706, "body": "This is not a &quot;scope&quot; question at all, it is a value/reference type question. It has nothing to do with the scope of the argument, and everything to do with the type of the argument."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1542771829, "post_id": 53383363, "comment_id": 93684922, "body": "What direction do you want to be pointed to? It is not clear what you want."}], "answers": [{"tags": [], "owner": {"reputation": 5449, "user_id": 681520, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/701baebf68d1d7faa9f9def6a24fe356?s=128&d=identicon&r=PG", "display_name": "Kimmo Lehto", "link": "https://stackoverflow.com/users/681520/kimmo-lehto"}, "is_accepted": false, "score": 0, "last_activity_date": 1542720841, "creation_date": 1542720841, "answer_id": 53394190, "question_id": 53383363, "link": "https://stackoverflow.com/questions/53383363/scope-of-methods-with-arrays/53394190#53394190", "title": "Scope of methods with arrays", "body": "<p>When calling <code>z = [...]</code> you are creating a new instance of Array in the memory and storing a reference to it in the local variable z.</p>\n\n<pre><code> z = ['foo']\n b = z\n y = ['foo']\n z.object_id # =&gt; 70314403278880\n b.object_id # =&gt; 70314403278880 (same object)\n y.object_id # =&gt; 70314411394940 (a different object)\n</code></pre>\n\n<p>When calling <code>arr(z)</code>, what you are actually passing to the method is a reference to the array instance, not the array itself or a pointer to the local variable.</p>\n\n<p>As the reference points to an array, you can do things to it, such as add elements. The same goes with strings and other \"non-constant\" objects. You can't modify a number.</p>\n\n<p>When you call <code>x = 10</code> you are assigning the object id of <code>10</code> (usually <code>21</code>) to the local variable <code>x</code>.</p>\n\n<pre><code>x = 10\ny = x\nz = 10\nx.object_id # =&gt; 21\ny.object_id # =&gt; 21\nz.object_id # =&gt; 21\n</code></pre>\n\n<p>When you call <code>num(x)</code>, you are actually calling <code>num(x.object_id)</code>. The method-local variable <code>n</code> is used to store the reference, but the method never receives a reference to the local variable <code>x</code> that you used, <code>x</code> would no longer be a local variable in that case.</p>\n\n<p>When the method does <code>n += 10</code> it changes what <code>n</code> points to, not what <code>x</code> points to.</p>\n\n<p>So, in a way, what your example is \"trying\" to do is <code>10 = 10 + 10</code>. After this, the value of <code>10</code> would be 20 from there on forwards and <code>10 + 1</code> would now return <code>21</code>.</p>\n\n<p>Other objects that behave like this include for example <code>true</code>, <code>false</code>, <code>:symbols</code>. </p>\n"}], "owner": {"reputation": 21, "user_id": 10423066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a2a3592fe2c3180f0043495ff97f3aef?s=128&d=identicon&r=PG&f=1", "display_name": "Alex.B", "link": "https://stackoverflow.com/users/10423066/alex-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1542771721, "creation_date": 1542665415, "last_edit_date": 1542771721, "question_id": 53383363, "link": "https://stackoverflow.com/questions/53383363/scope-of-methods-with-arrays", "title": "Scope of methods with arrays", "body": "<p>I have these methods:</p>\n\n<pre><code>def num n\n  n += 10\nend\n\ndef arr a\n  a &lt;&lt; \"TEST\"\nend\n</code></pre>\n\n<p>After calling the methods on a number and an array respectively, the array is changed:</p>\n\n<pre><code>x = 10\nnum(x)\nx # =&gt; 10\n\nz = [1, 'hi', \"Byron\"]\narr(z)\nz # =&gt; [1, 'hi', \"Byron\", \"TEST\"]\n</code></pre>\n\n<p>Could anyone please point me to the right direction?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "is_accepted": true, "score": 0, "last_activity_date": 1542665876, "last_edit_date": 1542665876, "creation_date": 1542665260, "answer_id": 53383329, "question_id": 53383275, "link": "https://stackoverflow.com/questions/53383275/active-record-relation-method-to-aggregate-associated-has-many/53383329#53383329", "title": "Active Record Relation Method to aggregate associated has_many", "body": "<p>This was what I was looking for:</p>\n\n<pre><code>my_users = User.where(age: 35)\nBlog.where(user: my_users)\n</code></pre>\n\n<p>What was tripping me up was that I had to switch gears.  I first grab the relevant <code>users</code>, but then I pass those <code>users</code> into a <code>Blog</code> query.</p>\n\n<p>Since I ultimately want an active record relation of <code>blogs</code>, the cleanest way is to make sure the top model I start with in the query is <code>Blog</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 830, "user_id": 642496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/182757c8d4baebc5eb960251d7b983f1?s=128&d=identicon&r=PG", "display_name": "hernanvicente", "link": "https://stackoverflow.com/users/642496/hernanvicente"}, "is_accepted": false, "score": 1, "last_activity_date": 1542666100, "last_edit_date": 1542666100, "creation_date": 1542665434, "answer_id": 53383368, "question_id": 53383275, "link": "https://stackoverflow.com/questions/53383275/active-record-relation-method-to-aggregate-associated-has-many/53383368#53383368", "title": "Active Record Relation Method to aggregate associated has_many", "body": "<p>Active record's where Metrodome returns you an active record relation, not an unique result. You need to:</p>\n\n<pre><code>my_users = User.where(age: 35).first\n</code></pre>\n\n<p>Then you should be able to get the blogs of one user with:</p>\n\n<pre><code>my_users.blogs\n</code></pre>\n\n<p>But if your intention is to have all the blogs of different users, you should try to:</p>\n\n<pre><code>my_user_ids = User.where(id: 35).pluck(:id)\nBlog.where(user_id: my_user_ids)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1542666597, "post_id": 53383537, "comment_id": 93643097, "body": "This is certainly a valid point, but it does not return a <code>Blog</code> active record relation object. Instead: it returns an array."}], "tags": [], "owner": {"reputation": 963, "user_id": 3311489, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a07a3d565ce06b5428c193379d869be3?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Ellis", "link": "https://stackoverflow.com/users/3311489/nick-ellis"}, "is_accepted": false, "score": 0, "last_activity_date": 1542666333, "creation_date": 1542666333, "answer_id": 53383537, "question_id": 53383275, "link": "https://stackoverflow.com/questions/53383275/active-record-relation-method-to-aggregate-associated-has-many/53383537#53383537", "title": "Active Record Relation Method to aggregate associated has_many", "body": "<p>The other answers are correct, but you can do this more efficiently and reduce your database queries like so.</p>\n\n<pre><code>my_users = User.includes(:blogs).where(age: 35)  # this makes one db query to get all data\nall_assoc_blogs = my_users.map(&amp;:blogs)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1036, "user_id": 2931056, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/nmpaa.jpg?s=128&g=1", "display_name": "piton4eg", "link": "https://stackoverflow.com/users/2931056/piton4eg"}, "is_accepted": false, "score": 1, "last_activity_date": 1542668167, "creation_date": 1542668167, "answer_id": 53383827, "question_id": 53383275, "link": "https://stackoverflow.com/questions/53383275/active-record-relation-method-to-aggregate-associated-has-many/53383827#53383827", "title": "Active Record Relation Method to aggregate associated has_many", "body": "<p>Maybe it will help you:</p>\n\n<pre><code>Blog.joins(:user).where(user: User.where(age: :35))\n</code></pre>\n\n<p>or </p>\n\n<pre><code>Blog.joins(:user).merge(User.where(age: :35))\n</code></pre>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 53383329, "answer_count": 4, "score": 2, "last_activity_date": 1542668167, "creation_date": 1542664971, "last_edit_date": 1542665418, "question_id": 53383275, "link": "https://stackoverflow.com/questions/53383275/active-record-relation-method-to-aggregate-associated-has-many", "title": "Active Record Relation Method to aggregate associated has_many", "body": "<p>Consider these two models:</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :blogs\nend\n\nclass Blog &lt; ApplicationRecord\n  belongs_to :user\nend\n</code></pre>\n\n<p>I'd like to do something like this but it will not work:</p>\n\n<pre><code>my_users        = User.where(age: 35) \nall_assoc_blogs = my_users.blogs # errors out\n</code></pre>\n\n<p>Here is the error:</p>\n\n<blockquote>\n  <p>undefined method `blogs' for User::ActiveRecord_Relation:</p>\n</blockquote>\n\n<p>I understand why it doesn't work: you can only call <code>blogs</code> on a single <code>user</code> object.  You cannot call <code>blogs</code> on an active record relation object of <code>users</code>.</p>\n\n<p>Ultimately, I want an active record relation object which consists of an aggregate of all the blogs for all the users in the <code>my_users</code> active record relation object. Is there a slick rails way of doing this?  This is the only way I can think of and it is pretty ugly:</p>\n\n<pre><code>my_users   = User.where(age: 35)\ntemp_blogs = []\nmy_users.each {|u| temp_blogs &lt;&lt; u.blogs.to_a}\nblog_ids = temp_blogs.flatten.pluck(:id)\nBlog.where(id: blog_ids)\n</code></pre>\n"}, {"tags": ["ruby", "class", "methods", "arguments"], "comments": [{"owner": {"reputation": 20644, "user_id": 184184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f6a508697f9eca2680b12ddb85ba1319?s=128&d=identicon&r=PG", "display_name": "Lenin Raj Rajasekaran", "link": "https://stackoverflow.com/users/184184/lenin-raj-rajasekaran"}, "edited": false, "score": 0, "creation_date": 1542666707, "post_id": 53383184, "comment_id": 93643146, "body": "the line number in the error (40) doesn&#39;t match with the actual line number in the code (25)"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1542668650, "post_id": 53383184, "comment_id": 93643762, "body": "Why does <code>displayHealthProfile</code> need any arguments at all? Shouldn&#39;t everything it needs in the instance variables? Also, be very careful with your parentheses, <code>m (arg)</code> and <code>m(arg)</code> are very different things in Ruby, they may work the same with one argument but the parentheses in the first are for expression grouping while in the second they are for calling the method; the difference becomes apparent when you have multiple arguments (i.e. <code>m(a, b)</code> is fine but <code>m (a, b)</code> is a syntax error)."}, {"owner": {"reputation": 3, "user_id": 10677018, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9wMMg5RoT5E/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hXjKalO9L6uDTwRWQRpQAOFvEkfg/mo/photo.jpg?sz=128", "display_name": "Daniel Loschiavo", "link": "https://stackoverflow.com/users/10677018/daniel-loschiavo"}, "edited": false, "score": 0, "creation_date": 1542673525, "post_id": 53383184, "comment_id": 93645017, "body": "I removed some of my comment lines at the top of the file so the line is 40 where the method displayHealthProfile is defined in my file. And the variables that the method needs are created in the main file so unless I make them universal using $ then they need to be passed into the method if i\u2019m not mistaken."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 10677018, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9wMMg5RoT5E/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hXjKalO9L6uDTwRWQRpQAOFvEkfg/mo/photo.jpg?sz=128", "display_name": "Daniel Loschiavo", "link": "https://stackoverflow.com/users/10677018/daniel-loschiavo"}, "edited": false, "score": 0, "creation_date": 1542686979, "post_id": 53384982, "comment_id": 93647852, "body": "I have removed all arguments and returns from the methods inside the class and changed the main code to what you suggested. Now I am getting unused variable warnings as well as the original error even though there are no arguments passed to the displayHealthProfile method now."}, {"owner": {"reputation": 555, "user_id": 10426870, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JXZEEkspHH4/AAAAAAAAAAI/AAAAAAAAAAA/WPpLNRdID4g/photo.jpg?sz=128", "display_name": "Rohit Namjoshi", "link": "https://stackoverflow.com/users/10426870/rohit-namjoshi"}, "reply_to_user": {"reputation": 3, "user_id": 10677018, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9wMMg5RoT5E/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hXjKalO9L6uDTwRWQRpQAOFvEkfg/mo/photo.jpg?sz=128", "display_name": "Daniel Loschiavo", "link": "https://stackoverflow.com/users/10677018/daniel-loschiavo"}, "edited": false, "score": 0, "creation_date": 1542728663, "post_id": 53384982, "comment_id": 93668476, "body": "@DanielLoschiavo  Why the downvote? The answer above does exactly what you need in a clean way."}, {"owner": {"reputation": 3, "user_id": 10677018, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9wMMg5RoT5E/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hXjKalO9L6uDTwRWQRpQAOFvEkfg/mo/photo.jpg?sz=128", "display_name": "Daniel Loschiavo", "link": "https://stackoverflow.com/users/10677018/daniel-loschiavo"}, "edited": false, "score": 0, "creation_date": 1542751073, "post_id": 53384982, "comment_id": 93679680, "body": "Did not mean to, was trying to upvote but still said zero so i hit all of them and realized it doesnt show under 15. Not sure how to remove it. @RohitNamjoshi"}, {"owner": {"reputation": 555, "user_id": 10426870, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JXZEEkspHH4/AAAAAAAAAAI/AAAAAAAAAAA/WPpLNRdID4g/photo.jpg?sz=128", "display_name": "Rohit Namjoshi", "link": "https://stackoverflow.com/users/10426870/rohit-namjoshi"}, "reply_to_user": {"reputation": 3, "user_id": 10677018, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9wMMg5RoT5E/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hXjKalO9L6uDTwRWQRpQAOFvEkfg/mo/photo.jpg?sz=128", "display_name": "Daniel Loschiavo", "link": "https://stackoverflow.com/users/10677018/daniel-loschiavo"}, "edited": false, "score": 0, "creation_date": 1542751844, "post_id": 53384982, "comment_id": 93680000, "body": "@DanielLoschiavo Oh well. If my answer worked for you then you can accept it as the best answer."}], "tags": [], "owner": {"reputation": 555, "user_id": 10426870, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-JXZEEkspHH4/AAAAAAAAAAI/AAAAAAAAAAA/WPpLNRdID4g/photo.jpg?sz=128", "display_name": "Rohit Namjoshi", "link": "https://stackoverflow.com/users/10426870/rohit-namjoshi"}, "is_accepted": false, "score": -2, "last_activity_date": 1542689529, "last_edit_date": 1542689529, "creation_date": 1542677438, "answer_id": 53384982, "question_id": 53383184, "link": "https://stackoverflow.com/questions/53383184/ruby-error-wrong-number-of-arguments-given-1-expected-0-when-i-give-the-rig/53384982#53384982", "title": "Ruby: Error: wrong number of arguments (given 1, expected 0) when I give the right number of arguments", "body": "<p>In health_profile.rb</p>\n\n<pre><code>class HealthProfile\n  def initialize(firstName, lastName, gender, birthYear, currentYear, height, weight)\n    @firstName = firstName\n    @lastName = lastName\n    @gender = gender\n    @birthYear = birthYear\n    @currentYear = currentYear\n    @height = height\n    @weight = weight\n  end\n\n  def userAge\n    @currentYear - @birthYear\n  end\n\n  def maxHeartRate #The maximum heart rate is computed as 220 minus age in years\n    220 - userAge\n  end\n\n  def targetHeartRateRange #The target-heart-rate is a range that is 50-89% of the maximum heart rate\n    maxhr = maxHeartRate\n    lowtarget = 0.50 * maxhr\n    hightarget = 0.89 * maxhr\n    [lowtarget, hightarget]\n  end\n\n  def bmi #(weight:lbs * 703) / (height:inches * height:inches)\n    (@weight * 703) / (@height * @height)\n  end\n\n  def displayHealthProfile\n    lowtarget, hightarget = targetHeartRateRange\n\n    puts \"HEALTH PROFILE FOR: #{@firstName.chomp} #{@lastName}\"\n    puts \"***********************************\"\n    puts\n    puts \"Gender: #{@gender}\"\n    puts \"Age: #{userAge}\"\n    puts \"Height (in inches): #{@height}\"\n    puts \"Weight (in pounds): #{@weight}\"\n    puts \"Maximum heart rate: #{maxHeartRate}\"\n    puts\n    puts\n    puts \"Target heart rate range\"\n    puts \"*************************\"\n    puts\n    puts \"Minimum: #{lowtarget}\"\n    puts \"Maximum: #{hightarget}\"\n    puts \"BMI: #{bmi}\"\n    puts\n    puts\n    puts \"BMI VALUES\"\n    puts \"************\"\n    puts\n    puts \"Underweight: less than 18.5\"\n    puts \"Normal: between 18.5 and 24.9\"\n    puts \"Overweight: between 25 and 29.9\"\n    puts \"Obese: 30 or greater\"\n  end\nend\n</code></pre>\n\n<p>In main.rb</p>\n\n<pre><code>require_relative 'health_profile.rb'\nrequire 'date'\n\ncurrentYear = Date.today.year\ncurrentYear = currentYear.to_i()\n\nprint (\"Enter your First Name: \")\nfirstName = gets()\nprint (\"Enter your Last Name: \")\nlastName = gets()\nprint (\"Enter your gender (Male/Female): \")\ngender = gets()\nprint (\"Enter your year of birth: \")\nbirthYear = gets().to_i()\nprint (\"Enter your height in inches: \")\nheight = gets().to_i()\nprint (\"Enter your weight in pounds: \")\nweight = gets().to_i()\n\nhp = HealthProfile.new(firstName, lastName, gender, birthYear, currentYear, height, weight)\nhp.displayHealthProfile\n</code></pre>\n\n<p>Then</p>\n\n<pre><code>ruby main.rb\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 1, "last_activity_date": 1542692310, "creation_date": 1542692310, "answer_id": 53386859, "question_id": 53383184, "link": "https://stackoverflow.com/questions/53383184/ruby-error-wrong-number-of-arguments-given-1-expected-0-when-i-give-the-rig/53386859#53386859", "title": "Ruby: Error: wrong number of arguments (given 1, expected 0) when I give the right number of arguments", "body": "<p>In line 2, you define <code>firstName</code> as a method with zero arguments:</p>\n\n<pre><code>attr_reader :firstName\n</code></pre>\n\n<p>(That's what a reader method is: a method that takes no arguments.)</p>\n\n<p>Here, you call <code>firstName</code> with one argument:</p>\n\n<pre><code>puts (\"HEALTH PROFILE FOR: #{firstName lastName}\")\n</code></pre>\n\n<p>Ruby allows you to leave out the parentheses around the argument list, which means that</p>\n\n<pre><code>firstName lastName\n</code></pre>\n\n<p>(as in the string substitution) is the same as </p>\n\n<pre><code>self.firstName(lastName)\n</code></pre>\n\n<p>What you probably mean is:</p>\n\n<pre><code>puts (\"HEALTH PROFILE FOR: #{firstName} #{lastName}\")\n#                                     \u2191 \u2191\u2191\n</code></pre>\n\n<blockquote>\n  <p>The two variables were parsed with newline characters which didn't sit well with the method call.</p>\n</blockquote>\n\n<p>This doesn't have anything to do with newlines in the strings. The content of a string <em>cannot possibly</em> cause this error. The error was caused by the fact that you called <code>firstName</code> with one argument but defined it with zero.</p>\n"}], "owner": {"reputation": 3, "user_id": 10677018, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-9wMMg5RoT5E/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-hXjKalO9L6uDTwRWQRpQAOFvEkfg/mo/photo.jpg?sz=128", "display_name": "Daniel Loschiavo", "link": "https://stackoverflow.com/users/10677018/daniel-loschiavo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3702, "favorite_count": 0, "accepted_answer_id": 53386859, "answer_count": 2, "score": 0, "last_activity_date": 1542692310, "creation_date": 1542664462, "last_edit_date": 1542688697, "question_id": 53383184, "link": "https://stackoverflow.com/questions/53383184/ruby-error-wrong-number-of-arguments-given-1-expected-0-when-i-give-the-rig", "title": "Ruby: Error: wrong number of arguments (given 1, expected 0) when I give the right number of arguments", "body": "<p><strong>Here is the class file:</strong></p>\n\n<pre><code>class HealthProfile\n    attr_reader :firstName, :lastName, :gender, :birthYear, :currentYear, :height, :weight\n    attr_writer :firstName, :lastName, :gender, :birthYear, :currentYear, :height, :weight\n\ndef initialize(firstName, lastName, gender, birthYear, currentYear, height, weight)\n    @firstName = firstName\n    @lastName = lastName\n    @gender = gender\n    @birthYear = birthYear\n    @currentYear = currentYear\n    @height = height\n    @weight = weight\nend\n\n\ndef userAge(currentYear, birthYear)\n    age = currentYear - birthYear\n    return age\nend\n\n\ndef maxHeartRate(age) #The maximum heart rate is computed as 220 minus age in years\n    maxhr = 220 - age\n    return maxhr\nend\n\ndef targetHeartRateRange(maxhr) #The target-heart-rate is a range that is 50-89% of the maximum heart rate\n    lowtarget = 0.50 * maxhr\n    hightarget = 0.89 * maxhr\n    return lowtarget, hightarget\nend\n\n\ndef BMI(weight, height) #(weight:lbs * 703) / (height:inches * height:inches)\n    bmi = (weight * 703) / (height * height)\n    return bmi\nend\n\ndef displayHealthProfile(firstName, lastName, gender, age, height, weight, maxhr, lowtarget, hightarget, bmi)\n    puts (\"HEALTH PROFILE FOR: #{firstName lastName}\")\n    puts (\"***********************************\")\n    puts\n    puts (\"Gender: #{gender}\")\n    puts (\"Age: #{age}\")\n    puts (\"Height (in inches): #{height}\")\n    puts (\"Weight (in pounds): #{weight}\")\n    puts (\"Maximum heart rate: #{maxhr}\")\n    puts\n    puts\n    puts (\"Target heart rate range\")\n    puts (\"*************************\")\n    puts\n    puts (\"Minimum: #{lowtarget}\")\n    puts (\"Maximum: #{hightarget}\")\n    puts (\"BMI: #{bmi}\")\n    puts\n    puts\n    puts (\"BMI VALUES\")\n    puts (\"************\")\n    puts\n    puts (\"Underweight: less than 18.5\")\n    puts (\"Normal: between 18.5 and 24.9\")\n    puts (\"Overweight: between 25 and 29.9\")\n    puts (\"Obese: 30 or greater\")\nend\nend\n</code></pre>\n\n<p><strong>Here is the main file code:</strong></p>\n\n<pre><code>require_relative 'lab11class.rb'\nrequire 'date'\n\ncurrentYear = Date.today.year\ncurrentYear = currentYear.to_i()\n\nprint (\"Enter your First Name: \")\nfirstName = gets()\nprint (\"Enter your Last Name: \")\nlastName = gets()\nprint (\"Enter your gender (Male/Female): \")\ngender = gets()\nprint (\"Enter your year of birth: \")\nbirthYear = gets().to_i()\nprint (\"Enter your height in inches: \")\nheight = gets().to_i()\nprint (\"Enter your weight in pounds: \")\nweight = gets().to_i()\n\nhp = HealthProfile.new(firstName, lastName, gender, birthYear, currentYear,     height, weight)\nage = hp.userAge(currentYear, birthYear)\nmaxhr = hp.maxHeartRate(age)\nlowtarget, hightarget = hp.targetHeartRateRange(maxhr)\nbmi = hp.BMI(weight, height)\nhp.displayHealthProfile(firstName, lastName, gender, age, height, weight, maxhr, lowtarget, hightarget, bmi)\n</code></pre>\n\n<p><strong>Here is the full error</strong></p>\n\n<pre><code>lab11class.rb:40:in `displayHealthProfile': wrong number of arguments (given 1, expected 0) (ArgumentError)\n</code></pre>\n\n<p>The problem is apparently with the displayHealthProfile method. It should expect 10 arguments, but when I enter all 10 in the main file it gives the error.\nHowever, if I remove one or more of the arguments from the call in the main file, I get the error except it says (given 9, expected 10) and so on if I were to remove more.\nAm I missing something? Any help is appreciated.</p>\n\n<p><strong>UPDATE</strong>\nI have fixed it and the program is working properly. The problem wasn't with the method at all, displayHealthProfile was correctly defined. The problem was with the firstName and lastName variables that were the first ones used under the method. The two variables were parsed with newline characters which didn't sit well with the method call. So here are the changes that fixed it.</p>\n\n<p><strong>Original</strong></p>\n\n<pre><code>puts (\"HEALTH PROFILE FOR: #{firstName lastName}\")\n</code></pre>\n\n<p><strong>Changed To:</strong></p>\n\n<pre><code>puts (\"HEALTH PROFILE FOR: #{firstName.chomp} #{lastName.chomp}\")\n</code></pre>\n\n<p>Thanks for your responses!</p>\n"}, {"tags": ["arrays", "ruby", "string", "replace", "user-input"], "answers": [{"tags": [], "owner": {"reputation": 963, "user_id": 3311489, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/a07a3d565ce06b5428c193379d869be3?s=128&d=identicon&r=PG&f=1", "display_name": "Nick Ellis", "link": "https://stackoverflow.com/users/3311489/nick-ellis"}, "is_accepted": true, "score": 1, "last_activity_date": 1542665807, "creation_date": 1542665807, "answer_id": 53383443, "question_id": 53383179, "link": "https://stackoverflow.com/questions/53383179/replacing-a-word-in-a-string-with-user-input-ruby/53383443#53383443", "title": "Replacing a word in a string with user input [RUBY]", "body": "<p>The problem is gets also grabs the new line when a user inputs, so you want to strip that off.  I made this silly test case in the console</p>\n\n<pre><code>sentence = \"hello world\"\nreplace_with = gets  # put in hello\nreplace_with.strip!\nsentence.gsub!(replace_with, 'butt')\nputs sentence  # prints 'butt world'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 0, "last_activity_date": 1542706039, "creation_date": 1542706039, "answer_id": 53389884, "question_id": 53383179, "link": "https://stackoverflow.com/questions/53383179/replacing-a-word-in-a-string-with-user-input-ruby/53389884#53389884", "title": "Replacing a word in a string with user input [RUBY]", "body": "<p>When you enter \"World\", you are actually pressing 6 keys: <kbd>W</kbd><kbd>o</kbd><kbd>r</kbd><kbd>l</kbd><kbd>d</kbd> and <kbd>enter</kbd> (modifier keys like <kbd>shift</kbd> are not recognized as separate characters). The <code>gets</code> method therefore returns <code>\"World\\n\"</code> with <code>\\n</code> begin <a href=\"https://en.wikipedia.org/wiki/Newline\" rel=\"nofollow noreferrer\">newline</a>.</p>\n\n<p>To remove such newlines, there's <a href=\"http://ruby-doc.org/core-2.5.3/String.html#method-i-chomp\" rel=\"nofollow noreferrer\"><code>chomp</code></a>:</p>\n\n<pre><code>\"World\\n\".chomp\n#=&gt; \"World\"\n</code></pre>\n\n<p>Applied to your code: (along with some minor fixes)</p>\n\n<pre><code>sentence = \"Hello, World.\"\n\nputs \"=========================\"\nputs sentence\n\nprint \"Enter the word you want to replace: \"\nreplace_word = gets.chomp\n\nprint \"Enter what you want the new word to be: \"\nnew_word = gets.chomp\n\nsentence[replace_word] = new_word\n\nputs sentence\n</code></pre>\n\n<p>Running the code gives:</p>\n\n<pre><code>=========================\nHello, World.\nEnter the word you want to replace: World\nEnter what you want the new word to be: Ruby\nHello, Ruby. \n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 10416216, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/970990e8ffc089086b3596033fda8004?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/10416216/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 53383443, "answer_count": 2, "score": 1, "last_activity_date": 1543270260, "creation_date": 1542664441, "last_edit_date": 1542664897, "question_id": 53383179, "link": "https://stackoverflow.com/questions/53383179/replacing-a-word-in-a-string-with-user-input-ruby", "title": "Replacing a word in a string with user input [RUBY]", "body": "<p>I'm trying to figure out how to replace a word in a string with a user string.</p>\n\n<p>The user would be prompted to type which word they would like to replace, and then they would be again prompted to enter the new word.</p>\n\n<p>For example the starting string would be \"Hello, World.\"\nUser would input \"World\"\nthen they would input \"Ruby\"\nFinally, \"Hello, Ruby.\" would print out.</p>\n\n<p>So far Ive tried using gsub and the [] method neither worked. Any thoughts?</p>\n\n<p>Here's my function so far: </p>\n\n<pre><code>def subString(string)\n    sentence = string\n    print\"=========================\\n\"\n    print sentence\n    print \"\\n\"\n    print \"Enter the word you want to replace: \"\n    replaceWord = gets\n    print \"Enter what you want the new word to be: \"\n    newWord = gets\n    sentence[replaceWord] = [newWord]\n    print sentence\n    #newString = sentence.gsub(replaceWord, newWord)\n    #newString = sentence.gsub(\"World\", \"Ruby\")\n    #print newString \nend\n</code></pre>\n"}, {"tags": ["ruby", "methods", "arguments", "default"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1542662190, "post_id": 53382028, "comment_id": 93641408, "body": "<code>foo(a=5, c=7)</code> yields the same result as <code>a=5; c=7; foo(5, 7)</code>. Ruby obviously doesn&#39;t know that you intend to assign <code>5</code> and <code>7</code> to the local variables <code>a</code> and <code>c</code> in the called method and assign <code>b</code> to its default value. She can only assume that you have passed the values of the first two variables, <code>a</code> and <code>b</code>, and that <code>c</code> is to be assigned its default value.  There is simply no way to do that other than by using named arguments. Note that the variables <code>a</code>, <code>b</code> and <code>c</code>  when executing the methods are unrelated to the local variables within the method that have same names."}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 4, "last_activity_date": 1542659041, "creation_date": 1542659041, "answer_id": 53382105, "question_id": 53382028, "link": "https://stackoverflow.com/questions/53382028/dealing-with-3-or-more-default-arguments-ruby/53382105#53382105", "title": "Dealing with 3 or more default arguments Ruby", "body": "<p>Using keyword arguments?</p>\n\n<pre><code>def foo(a: 1, b: 2, c: 3)\n  puts [a, b, c]\nend\n\nfoo(a: 5, c: 7) \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 1, "last_activity_date": 1542692862, "creation_date": 1542692862, "answer_id": 53386943, "question_id": 53382028, "link": "https://stackoverflow.com/questions/53382028/dealing-with-3-or-more-default-arguments-ruby/53386943#53386943", "title": "Dealing with 3 or more default arguments Ruby", "body": "<blockquote>\n  <p>I've seen a few examples of passing default arguments when creating methods, but none of them seem to address if you want to substitute only the first and third argument...</p>\n</blockquote>\n\n<p>That's because it is impossible.</p>\n\n<p>Default arguments get bound left-to-right. I wrote more about how arguments get bound to parameters in an answer to these questions: </p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/a/20634180/2988\">Mixing keyword with regular arguments in Ruby?</a></li>\n<li><a href=\"https://stackoverflow.com/a/27060893/2988\">Why can I have required parameters after a splat in Ruby but not optional ones?</a></li>\n</ul>\n"}], "owner": {"reputation": 129, "user_id": 10663676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e53116ab119e0bb4c481ff8829db729?s=128&d=identicon&r=PG&f=1", "display_name": "kel.o", "link": "https://stackoverflow.com/users/10663676/kel-o"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 53382105, "answer_count": 2, "score": 2, "last_activity_date": 1542692862, "creation_date": 1542658692, "question_id": 53382028, "link": "https://stackoverflow.com/questions/53382028/dealing-with-3-or-more-default-arguments-ruby", "title": "Dealing with 3 or more default arguments Ruby", "body": "<p>I've seen a few examples of passing default arguments when creating methods, but none of them seem to address if you want to substitute only the first and third argument... here's an example</p>\n\n<pre><code>def foo(a = 1, b = 2, c = 3)\n    puts [a, b, c]\nend\n\nfoo(1, 2) \n#=&gt; [1, 2, 3]\n</code></pre>\n\n<p>When I try to assign a=5 and c=7 and keep b its default value like this:</p>\n\n<pre><code>foo(a=5,c=7) \n</code></pre>\n\n<p>I get </p>\n\n<pre><code>=&gt; 5,7,3\n</code></pre>\n\n<p>but I expect <code>5,2,7</code></p>\n\n<p>what is the correct way to accomplish this?</p>\n"}, {"tags": ["ruby", "rails-activestorage"], "answers": [{"comments": [{"owner": {"reputation": 87, "user_id": 10054842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b8523c5d181b5ac75075dcda8b9f2df?s=128&d=identicon&r=PG&f=1", "display_name": "Anderson", "link": "https://stackoverflow.com/users/10054842/anderson"}, "edited": false, "score": 0, "creation_date": 1542662145, "post_id": 53382575, "comment_id": 93641384, "body": "Thank you so much!!"}, {"owner": {"reputation": 87, "user_id": 10054842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b8523c5d181b5ac75075dcda8b9f2df?s=128&d=identicon&r=PG&f=1", "display_name": "Anderson", "link": "https://stackoverflow.com/users/10054842/anderson"}, "edited": false, "score": 0, "creation_date": 1542849725, "post_id": 53382575, "comment_id": 93719759, "body": "Hi soo i&#39;m trying to enter files for specific records, so I actually have to write the colors and choose an image with the specific color, is there a way to attach different files for each record in the seed.rb?"}], "tags": [], "owner": {"reputation": 830, "user_id": 642496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/182757c8d4baebc5eb960251d7b983f1?s=128&d=identicon&r=PG", "display_name": "hernanvicente", "link": "https://stackoverflow.com/users/642496/hernanvicente"}, "is_accepted": true, "score": 6, "last_activity_date": 1542661391, "creation_date": 1542661391, "answer_id": 53382575, "question_id": 53381906, "link": "https://stackoverflow.com/questions/53381906/attach-images-in-seed-rb-file-in-rails-using-active-storage/53382575#53382575", "title": "Attach images in seed.rb file in rails using active storage", "body": "<p>You could use the <a href=\"https://github.com/ffaker/ffaker\" rel=\"noreferrer\">Ffaker</a> gem to easily generate fake data and finally after creating the vehicle record you can update your record image attribute from the instance variable. Check <a href=\"https://edgeguides.rubyonrails.org/active_storage_overview.html#attaching-file-io-objects\" rel=\"noreferrer\">Attaching File/IO Objects</a> </p>\n\n<p>This would be the code of <code>db/seed.rb</code> file:</p>\n\n<pre><code>if Vehicle.count.zero?\n  10.times do\n    v = Vehicle.create(\n      vin: FFaker::Code.ean,\n      color: FFaker::Color.name,\n      maker_id: m.id,\n      model_id: m.id,\n      wholesale_price: '40,000'\n    )\n    v.image.attach(io: File.open('/path/to/file'), filename: 'file.jpg')\n  end\nend\n</code></pre>\n\n<p>Don't forget to add the ffaker gem to your <code>Gemfile</code> file.</p>\n"}], "owner": {"reputation": 87, "user_id": 10054842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b8523c5d181b5ac75075dcda8b9f2df?s=128&d=identicon&r=PG&f=1", "display_name": "Anderson", "link": "https://stackoverflow.com/users/10054842/anderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2531, "favorite_count": 2, "accepted_answer_id": 53382575, "answer_count": 1, "score": 4, "last_activity_date": 1542663649, "creation_date": 1542658124, "last_edit_date": 1542663649, "question_id": 53381906, "link": "https://stackoverflow.com/questions/53381906/attach-images-in-seed-rb-file-in-rails-using-active-storage", "title": "Attach images in seed.rb file in rails using active storage", "body": "<p>I have a class called vehicles which can have an image attached to it. I have made a default image to display if no other image was uploaded in the vehicles.rb file.</p>\n\n<p>I would like to include images in the seed.rb file so I don't have to manually upload all images. Is this possible?</p>\n\n<p>Help is much appreciated thanks.</p>\n\n<p>Here is my vehicle.rb:</p>\n\n<pre><code>class Vehicle &lt; ApplicationRecord\n  belongs_to :make\n  belongs_to :model\n  accepts_nested_attributes_for :make\n  accepts_nested_attributes_for :model\n  has_one_attached :image\n\n  after_commit :add_default_image, on: %i[create update]\n\n  def add_default_image\n    unless image.attached?\n      image.attach(\n        io: File.open(Rails.root.join('app', 'assets', 'images', 'no_image_available.jpg')),\n        filename: 'no_image_available.jpg', content_type: 'image/jpg'\n      )\n    end\n  end\nend\n</code></pre>\n\n<p>Here is how i am creating records in my seed file but I would like to include the images as well:</p>\n\n<pre><code>v = Vehicle.create(\n  vin: '1QJGY54INDG38946',\n  color: 'grey',\n  make_id: m.id,\n  model_id: mo.id,\n  wholesale_price: '40,000'\n)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 898, "user_id": 160272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/813f535246722b7bf02aacc9ce818de8?s=128&d=identicon&r=PG", "display_name": "showaltb", "link": "https://stackoverflow.com/users/160272/showaltb"}, "is_accepted": false, "score": 0, "last_activity_date": 1542658068, "creation_date": 1542658068, "answer_id": 53381897, "question_id": 53381505, "link": "https://stackoverflow.com/questions/53381505/ruby-regex-match/53381897#53381897", "title": "ruby regex match", "body": "<p>You are correctly using placeholders, so you are protected from SQL injection attacks already. Rails will escape any unsafe characters in the pattern; you don't need to take any further action.</p>\n\n<p>If you still want to strip characters other than digits and <code>%</code>, you can use Ruby's <code>String#delete</code> method:</p>\n\n<pre><code>str.delete('^1-9%')\n</code></pre>\n\n<p>The <code>'^1-9%'</code> argument means \"Delete every character that is not <code>1</code> to <code>9</code> or <code>%</code>\". (n.b. you cannot use <code>\\d</code> here, because <code>#delete</code> doesn't understand regular expression meta characters.)</p>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.5.3/String.html#method-i-delete\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.5.3/String.html#method-i-delete</a>.</p>\n"}], "owner": {"reputation": 143, "user_id": 4521541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ebcf80d30f790087dc59eae4d73b478?s=128&d=identicon&r=PG&f=1", "display_name": "jl118", "link": "https://stackoverflow.com/users/4521541/jl118"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1542658068, "creation_date": 1542656306, "question_id": 53381505, "link": "https://stackoverflow.com/questions/53381505/ruby-regex-match", "title": "ruby regex match", "body": "<p>For my ruby on rails project, I have a model called message which has a to field. I want to implement a wildcard search so that, for example, <code>%545</code> will bring up all messages ending with <code>545</code>, <code>545%</code> will bring up all numbers starting with <code>545</code>, <code>%545%</code> will bring up all messages including <code>545</code>. </p>\n\n<p>I have a query like <code>Message.where(\"to like ?\", str)</code> where <code>str</code> is the string to match, e.g. <code>%545, %545%, 545%</code>...etc. </p>\n\n<p>Everything works but I'm concerned about SQL injection attack. So I want to do a regex matching for <code>str</code> so that it only allows <code>%</code> and numbers to pass through. So I want strings like <code>%545, %545%, 545%</code> to pass, but not <code>abc, %545a, a545%, %54a5%</code> to pass. </p>\n\n<p>I've tried <code>str.scan(/.*?(\\d+%)/)</code> but that doesn't work. </p>\n\n<p>Thanks. </p>\n"}, {"tags": ["ruby", "postgresql", "sequel"], "comments": [{"owner": {"reputation": 830, "user_id": 642496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/182757c8d4baebc5eb960251d7b983f1?s=128&d=identicon&r=PG", "display_name": "hernanvicente", "link": "https://stackoverflow.com/users/642496/hernanvicente"}, "edited": false, "score": 0, "creation_date": 1542664336, "post_id": 53381429, "comment_id": 93642272, "body": "Is your app a rails application?"}, {"owner": {"reputation": 5824, "user_id": 781743, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d19aed08825cbb3a52289ce9d5613035?s=128&d=identicon&r=PG", "display_name": "graywolf", "link": "https://stackoverflow.com/users/781743/graywolf"}, "reply_to_user": {"reputation": 830, "user_id": 642496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/182757c8d4baebc5eb960251d7b983f1?s=128&d=identicon&r=PG", "display_name": "hernanvicente", "link": "https://stackoverflow.com/users/642496/hernanvicente"}, "edited": false, "score": 0, "creation_date": 1542665954, "post_id": 53381429, "comment_id": 93642869, "body": "combination of hanami and grape if it helps"}], "answers": [{"comments": [{"owner": {"reputation": 5824, "user_id": 781743, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d19aed08825cbb3a52289ce9d5613035?s=128&d=identicon&r=PG", "display_name": "graywolf", "link": "https://stackoverflow.com/users/781743/graywolf"}, "edited": false, "score": 0, "creation_date": 1542666038, "post_id": 53383256, "comment_id": 93642897, "body": "Yeah I know about this way, but I get connection string formatted as in my question from the environment and wanted to avoid having to parse it :/"}], "tags": [], "owner": {"reputation": 830, "user_id": 642496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/182757c8d4baebc5eb960251d7b983f1?s=128&d=identicon&r=PG", "display_name": "hernanvicente", "link": "https://stackoverflow.com/users/642496/hernanvicente"}, "is_accepted": false, "score": 0, "last_activity_date": 1542666543, "last_edit_date": 1542666543, "creation_date": 1542664838, "answer_id": 53383256, "question_id": 53381429, "link": "https://stackoverflow.com/questions/53381429/how-to-use-connection-string-with-sequel-for-postgresql/53383256#53383256", "title": "How to use connection string with sequel for postgresql", "body": "<p>You could use a string with the connection information, for example:</p>\n\n<pre><code>conn_str = 'postgres://localhost/database_name?user=user&amp;password=password'\n\n\nDB = Sequel.connect(conn_str)\n</code></pre>\n\n<p>Check the Sequel's documentation of <a href=\"https://sequel.jeremyevans.net/rdoc/files/doc/opening_databases_rdoc.html\" rel=\"nofollow noreferrer\">how to open connections</a> with a hash</p>\n\n<pre><code>DB = Sequel.connect(\n  adapter: 'postgres',\n  host: 'localhost',\n  database: 'database_name',\n  user: 'database_user',\n  password: 'password'\n)\n</code></pre>\n\n<p>Then you should be able to run:</p>\n\n<pre><code>DB[:table_name].where(:attribute =&gt; 5000..10000)\n</code></pre>\n\n<p>Or you could use the postgres method directly:</p>\n\n<pre><code>DB = Sequel.postgres('my_db', :user =&gt; 'user', :password =&gt; 'password', :host =&gt; 'localhost')\n</code></pre>\n\n<p>Check <a href=\"https://devhints.io/sequel\" rel=\"nofollow noreferrer\">devhints</a> open connection shortcuts</p>\n"}], "owner": {"reputation": 5824, "user_id": 781743, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d19aed08825cbb3a52289ce9d5613035?s=128&d=identicon&r=PG", "display_name": "graywolf", "link": "https://stackoverflow.com/users/781743/graywolf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1670, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542666543, "creation_date": 1542655916, "question_id": 53381429, "link": "https://stackoverflow.com/questions/53381429/how-to-use-connection-string-with-sequel-for-postgresql", "title": "How to use connection string with sequel for postgresql", "body": "<p>I wanted to connect to postgresql database using connection string in form of</p>\n\n<pre><code>host=localhost user=x password=y dbname=z\n</code></pre>\n\n<p>this works fine when passed to psql</p>\n\n<pre><code>$ psql \"host=localhost user=x password=y dbname=z\"\n</code></pre>\n\n<p>and when passed to the <code>PG</code> gem</p>\n\n<pre><code>&gt; PG.connect(\"host=localhost user=x password=y dbname=z\")\n</code></pre>\n\n<p>however it fails when I try to pass it into sequel</p>\n\n<pre><code>&gt; Sequel.postgres(constr)\nSequel::DatabaseConnectionError: PG::ConnectionBad: could not connect to server: No such file or directory\n</code></pre>\n\n<p>How can I make sequel connect to my database?</p>\n"}, {"tags": ["ruby", "predicate", "dry-rb"], "answers": [{"tags": [], "owner": {"reputation": 836, "user_id": 1243214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1f97dfcd855c06d40ea3204f11fb47?s=128&d=identicon&r=PG", "display_name": "Mr. Tim", "link": "https://stackoverflow.com/users/1243214/mr-tim"}, "is_accepted": true, "score": 1, "last_activity_date": 1542664215, "creation_date": 1542664215, "answer_id": 53383140, "question_id": 53380501, "link": "https://stackoverflow.com/questions/53380501/dry-validation-case-insensitive-included-in-validation-with-dryvalidation/53383140#53383140", "title": "dry-validation: Case insensitive `included_in?` validation with Dry::Validation.Schema", "body": "<p>The correct way to reference my error message was to reference the predicate method. No need to worry about <code>arg</code>, <code>value</code>, etc.</p>\n\n<pre><code>en:\n  errors:\n    in_brand_list?: \"must be in the master brands list\"\n</code></pre>\n\n<p>Additionally, I was able to load this error message without a separate .yml by doing this:</p>\n\n<pre><code>CaseInsensitiveSchema = Dry::Validation.Schema do\n  BRANDS = %w(several hundred valid brands)\n\n  configure do\n    def in_brand_list?(value)\n      BRANDS.include? value.downcase\n    end\n\n    def self.messages\n      super.merge({en: {errors: {in_brand_list?: \"must be in the master brand list\"}}})\n    end     \n  end\n\n  required(:brand).value(:in_brand_list?)\nend\n</code></pre>\n\n<p>I'd still love to see other implementations, specifically for a generic case-insensitive predicate. Many people say <code>dry-rb</code> is fantastically organized, but I find it hard to follow.</p>\n"}], "owner": {"reputation": 836, "user_id": 1243214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad1f97dfcd855c06d40ea3204f11fb47?s=128&d=identicon&r=PG", "display_name": "Mr. Tim", "link": "https://stackoverflow.com/users/1243214/mr-tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 53383140, "answer_count": 1, "score": 0, "last_activity_date": 1542664215, "creation_date": 1542651517, "question_id": 53380501, "link": "https://stackoverflow.com/questions/53380501/dry-validation-case-insensitive-included-in-validation-with-dryvalidation", "title": "dry-validation: Case insensitive `included_in?` validation with Dry::Validation.Schema", "body": "<p>I'm trying to create a validation for a predetermined list of valid brands as part of an ETL pipeline. My validation requires case insensitivity, as some brands are compound words or abbreviations that are insignificant.</p>\n\n<p>I created a custom predicate, but I cannot figure out how to generate the appropriate error message.</p>\n\n<p>I read <a href=\"https://dry-rb.org/gems/dry-validation/error-messages/\" rel=\"nofollow noreferrer\">the error messages doc</a>, but am having a hard time interpreting:</p>\n\n<ul>\n<li>How to build the syntax for my custom predicate?</li>\n<li>Can I apply the messages in my schema class directly, without referencing an external .yml file? I looked <a href=\"https://github.com/dry-rb/dry-validation/blob/7d2231130fb08f5756ec285aad8885ab2cd93cab/lib/dry/validation/schema/class_interface.rb#L134\" rel=\"nofollow noreferrer\">here</a> and it seems like it's not as straightforward as I'd hoped.</li>\n</ul>\n\n<p>Below I've given code that represents what I have tried using both built-in predicates, and a custom one, each with their own issues. If there is a better way to compose a rule that achieves the same goal, I'd love to learn it.</p>\n\n<pre><code>require 'dry/validation'\n\nCaseSensitiveSchema = Dry::Validation.Schema do\n  BRANDS = %w(several hundred valid brands)\n\n  # :included_in? from https://dry-rb.org/gems/dry-validation/basics/built-in-predicates/\n  required(:brand).value(included_in?: BRANDS)\nend\n\nCaseInsensitiveSchema = Dry::Validation.Schema do\n  BRANDS = %w(several hundred valid brands)\n\n  configure do\n    def in_brand_list?(value)\n      BRANDS.include? value.downcase\n    end\n  end\n\n  required(:brand).value(:in_brand_list?)\nend\n\n\n# A valid string if case insensitive\nvalid_product = {brand: 'Valid'}\n\nCaseSensitiveSchema.call(valid_product).errors\n# =&gt; {:brand=&gt;[\"must be one of: here, are, some, valid, brands\"]} # This message will be ridiculous when the full brand list is applied\n\nCaseInsensitiveSchema.call(valid_product).errors\n# =&gt; {}   # Good!\n\n\n\ninvalid_product = {brand: 'Junk'}\n\nCaseSensitiveSchema.call(invalid_product).errors\n# =&gt; {:brand=&gt;[\"must be one of: several, hundred, valid, brands\"]}  # Good... (Except this error message will contain the entire brand list!!!)\n\nCaseInsensitiveSchema.call(invalid_product).errors\n# =&gt; Dry::Validation::MissingMessageError: message for in_brand_list? was not found\n# =&gt; from .. /gems/2.5.0/gems/dry-validation-0.12.2/lib/dry/validation/message_compiler.rb:116:in `visit_predicate'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "paperclip"], "answers": [{"comments": [{"owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "edited": false, "score": 0, "creation_date": 1542703100, "post_id": 53387281, "comment_id": 93653518, "body": "Hi @ray, thanks for your reply. I still get a exception, i have updated the question with sample example, can you please check? Thanks"}, {"owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "edited": false, "score": 0, "creation_date": 1542703647, "post_id": 53387281, "comment_id": 93653799, "body": "so my main question is how can i access user object when attachment type is logo"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "edited": false, "score": 0, "creation_date": 1542707806, "post_id": 53387281, "comment_id": 93656209, "body": "@opensource-developer I have not tried so not pretty sure, but it should work, check update in my answer"}, {"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "reply_to_user": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "edited": false, "score": 0, "creation_date": 1542782792, "post_id": 53387281, "comment_id": 93687955, "body": "@opensource-developer my pleasure :)"}], "tags": [], "owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "is_accepted": true, "score": 2, "last_activity_date": 1542707771, "last_edit_date": 1542707771, "creation_date": 1542694642, "answer_id": 53387281, "question_id": 53380335, "link": "https://stackoverflow.com/questions/53380335/single-model-to-have-two-file-attachment-columns-rails-4-paperclip/53387281#53387281", "title": "single model to have two file attachment columns - Rails 4 + Paperclip", "body": "<p>Keep your attachable type 'User' which will be clean polymorphic. Define <strong>type</strong> field inside 'Attachment' model having two values <strong>logo</strong> &amp; <strong>file</strong></p>\n\n<p>Association will get updated as below</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n\nhas_many :attachments, -&gt; {where type: \"file\"}, as: :attachable, dependent: :destroy  \nhas_one :user_logo, -&gt; {where type: \"logo\"}, class_name: \"Attachment\", foreign_key: :attachable_id, foreign_type: :attachable_type, dependent: :destroy\n\nend\n</code></pre>\n\n<p>I suggest you to have different styles for attachment depends on what type it have (logo/file). Validation for attachment type also vary as per type.</p>\n\n<pre><code>has_attached_file :file, styles: -&gt;(file){ file.instance.get_styles }\n\nvalidates_attachment_content_type :file, :content_type: [..], if: -&gt; { type == 'logo' }\n\nvalidates_attachment_content_type :file, :content_type: [..], if: -&gt; { type == 'file' }\n\n\ndef get_styles\n  if self.type == 'logo'\n    style1\n  elsif self.type == 'file'\n    style2\n  end\nend\n</code></pre>\n\n<p>Please update status or any query you u get further.</p>\n\n<p><strong>Update</strong> - answering to further question</p>\n\n<p><strong>First Way:</strong> If you are using <code>UserLogo</code> as an attachable_type in <code>Attachment</code>, then it do not follow polymorphic association so define custom association.</p>\n\n<pre><code>belongs_to :resource,\n  -&gt; { |attachment| ['User', 'UserLogo'].include? attachment.attachable },\n  class_name: 'User',\n  foreign_key: :attachable_id\n\nbelongs_to :belongs_to :attachable,\n  -&gt; { |attachment| ['User', 'UserLogo'].exclude? attachment.attachable_type },\n  class_name: :attachable_type,\n  foreign_key: :attachable_id\n</code></pre>\n\n<p><strong>Second Way:</strong> Create <code>UserLogo</code> class extending <code>User</code> class. It will find UserLogo with same User data</p>\n"}], "owner": {"reputation": 1958, "user_id": 1858727, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/3affc24909ae07768e44d1cc97d439bd?s=128&d=identicon&r=PG", "display_name": "opensource-developer", "link": "https://stackoverflow.com/users/1858727/opensource-developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 510, "favorite_count": 0, "accepted_answer_id": 53387281, "answer_count": 1, "score": 1, "last_activity_date": 1542707771, "creation_date": 1542650760, "last_edit_date": 1542703506, "question_id": 53380335, "link": "https://stackoverflow.com/questions/53380335/single-model-to-have-two-file-attachment-columns-rails-4-paperclip", "title": "single model to have two file attachment columns - Rails 4 + Paperclip", "body": "<p>I have a custom model which uses attachment model in rails.\nMy attachment model looks something like this</p>\n\n<pre><code>class Attachment &lt; ActiveRecord::Base\n  belongs_to :attachable, polymorphic: true\n  has_attached_file :file, styles: { logo: ['200x50&gt;',:png] }\nend\n</code></pre>\n\n<p>and the other model that uses the attachment looks something like this</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :attachments, as: :attachable, dependent: :destroy\nend\n</code></pre>\n\n<p>I want user model to have another attachment different from the one I have already setup to upload logo, something like this</p>\n\n<pre><code>has_one :user_logo, -&gt; {where attachable_type: \"UserLogo\"}, class_name: \"Attachment\", foreign_key: :attachable_id, foreign_type: :attachable_type, dependent: :destroy\n</code></pre>\n\n<p>but when I try to access <code>attachment.attachable</code> I get </p>\n\n<p><code>undefined UserLogo as **UserLogo** is not a model</code>. </p>\n\n<p>Can anyone please suggest what changes can I make so that <code>attachment.attachable</code> works for both attachment type.</p>\n\n<p>so for example</p>\n\n<p>when i execute something like this</p>\n\n<p><code>att = Attachment.find(3)</code> <strong>#assume it returns attachable type as User\nso att.attachable returns user object</strong></p>\n\n<p>but when i execute\n<code>att = Attachment.find(3)</code> <strong>#assume it returns attachable type as UserLogo\nso att.attachable returns exception <code>wrong constant name UserLogo</code></strong></p>\n\n<p>how can i access <code>User</code> object from both attachment types. Thanks</p>\n"}, {"tags": ["ruby", "zsh"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1542650387, "post_id": 53380243, "comment_id": 93636152, "body": "It indicates that it is the end of output with no new line characters (<code>\\n</code>) following it."}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1542650523, "post_id": 53380243, "comment_id": 93636228, "body": "I&#39;m not getting the same behavior in either IRB or passing into the interpreter directly."}, {"owner": {"reputation": 10727, "user_id": 479167, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0ddf90fe12087db9cfae84c52ae0147c?s=128&d=identicon&r=PG", "display_name": "rubish", "link": "https://stackoverflow.com/users/479167/rubish"}, "reply_to_user": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "edited": false, "score": 0, "creation_date": 1542650835, "post_id": 53380243, "comment_id": 93636374, "body": "@coreyward I do not see the behaviour in IRB, but do see passing directly to interpreter, I guess this is shell behaviour rather than ruby."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1542650917, "post_id": 53380243, "comment_id": 93636419, "body": "<a href=\"https://unix.stackexchange.com/q/167582/218427\">It&#39;s part of the shell</a>."}, {"owner": {"reputation": 67463, "user_id": 203130, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/1RE8c.jpg?s=128&g=1", "display_name": "coreyward", "link": "https://stackoverflow.com/users/203130/coreyward"}, "reply_to_user": {"reputation": 10727, "user_id": 479167, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0ddf90fe12087db9cfae84c52ae0147c?s=128&d=identicon&r=PG", "display_name": "rubish", "link": "https://stackoverflow.com/users/479167/rubish"}, "edited": false, "score": 0, "creation_date": 1542651019, "post_id": 53380243, "comment_id": 93636465, "body": "@rubish Ahh, so it&#39;s from zsh, not Ruby or bash."}, {"owner": {"reputation": 63, "user_id": 5589657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73cb85db49a01426ce66745a55a85e42?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/5589657/mark"}, "edited": false, "score": 0, "creation_date": 1542699346, "post_id": 53380243, "comment_id": 93651836, "body": "I added a &#39;puts&#39; after my logic and it removed the % character. Thanks guys, it was zsh after-all."}], "owner": {"reputation": 63, "user_id": 5589657, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/73cb85db49a01426ce66745a55a85e42?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/5589657/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "closed_date": 1542699291, "answer_count": 0, "score": 0, "last_activity_date": 1542650991, "creation_date": 1542650301, "last_edit_date": 1542650991, "question_id": 53380243, "link": "https://stackoverflow.com/questions/53380243/when-printing-out-a-variable-in-a-loop-why-does-the-last-character-end-with-the", "closed_reason": "Duplicate", "title": "When printing out a variable in a loop, why does the last character end with the symbol %?", "body": "<p>A random word is passed into the <strong>display_word</strong> function shown below.</p>\n\n<pre><code>def display_word word\n  length = word.length\n  length.times { print '_ ' }\nend\n</code></pre>\n\n<p>The goal is dynamically print out an <em>underscore</em> character for each character in the word. On running the program it prints out a % character at the end of the line. </p>\n\n<p>Is this expected behaviour and why?</p>\n"}, {"tags": ["ruby", "routes", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 38491, "user_id": 138601, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/215adbf27b92e2264832d67225e7a3ce?s=128&d=identicon&r=PG", "display_name": "Undistraction", "link": "https://stackoverflow.com/users/138601/undistraction"}, "edited": false, "score": 0, "creation_date": 1542720248, "post_id": 53391578, "comment_id": 93663253, "body": "Like I say in the question in italics: Is there any way to handle this purely within routes.rb? Doing it with a link is trivial."}], "tags": [], "owner": {"reputation": 973, "user_id": 9989384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/530602201f9551563176b0b648b7d50b?s=128&d=identicon&r=PG&f=1", "display_name": "Cryptex Technologies", "link": "https://stackoverflow.com/users/9989384/cryptex-technologies"}, "is_accepted": false, "score": -1, "last_activity_date": 1542712110, "last_edit_date": 1542712110, "creation_date": 1542711766, "answer_id": 53391578, "question_id": 53380000, "link": "https://stackoverflow.com/questions/53380000/add-a-page-link-anchor-to-a-rails-resource-in-routes-rb/53391578#53391578", "title": "Add A Page Link / Anchor To A Rails Resource in routes.rb", "body": "<p>To load on same page, provide id where you have click link like button</p>\n\n<p><code>&lt;a class=\"btn btn-primary\" href=\"#example\"&gt; example&lt;/a&gt;</code></p>\n\n<pre><code>&lt;div id=\"example\"&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>No need to make changes in routes</p>\n\n<p>and apply the same id to the div which you want to show</p>\n\n<p>or \nYou can try like this will work to open the in new page</p>\n\n<pre><code> &lt;%= link_to chat_messages_path(anchor: \"example\"), method: :get do %&gt;\n</code></pre>\n\n\n"}], "owner": {"reputation": 38491, "user_id": 138601, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/215adbf27b92e2264832d67225e7a3ce?s=128&d=identicon&r=PG", "display_name": "Undistraction", "link": "https://stackoverflow.com/users/138601/undistraction"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542712110, "creation_date": 1542649272, "question_id": 53380000, "link": "https://stackoverflow.com/questions/53380000/add-a-page-link-anchor-to-a-rails-resource-in-routes-rb", "title": "Add A Page Link / Anchor To A Rails Resource in routes.rb", "body": "<p>In my <code>routes.rb</code> I have a route: </p>\n\n<pre><code>resources :chat-messages\n</code></pre>\n\n<p>Any time a visitor hits <code>/chat-messages</code> I would like the page to load a view with the following url: <code>/chat-messages#example</code>. This will scroll the page to a div with the id of <code>example</code>. </p>\n\n<p><em>Is there any way to handle this purely within <code>routes.rb</code></em>, so that a link that uses <code>chat_messages_path</code> will still render the url including the anchor?</p>\n"}, {"tags": ["ruby", "validation", "syntax"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1542647260, "post_id": 53379441, "comment_id": 93634708, "body": "Instead of running the code with EVAL, perhaps just run <code>ruby -c</code>?"}, {"owner": {"reputation": 53, "user_id": 6837388, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-KLLqjmWbTd4/AAAAAAAAAAI/AAAAAAAAAAw/n0X015MXLTk/photo.jpg?sz=128", "display_name": "choey", "link": "https://stackoverflow.com/users/6837388/choey"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1542647636, "post_id": 53379441, "comment_id": 93634873, "body": "I need to do this programmatically in the controller action that receives the form submission, and I&#39;d prefer not to use programmatically access the filesystem or command line to do so, unless I&#39;m misunderstanding.  Thanks for your help."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1542648367, "post_id": 53379441, "comment_id": 93635163, "body": "This sounds <b>extremely dangerous</b>. Is there any way to do this other than by posting and running raw Ruby code? What&#39;s the actual objective here? There&#39;s really no &quot;safe&quot; way to run arbitrary code. Shopify has made an effort to contain <a href=\"https://github.com/Shopify/mruby-engine\" rel=\"nofollow noreferrer\">Ruby in a sandbox</a> so you may want to consider that approach."}, {"owner": {"reputation": 53, "user_id": 6837388, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-KLLqjmWbTd4/AAAAAAAAAAI/AAAAAAAAAAw/n0X015MXLTk/photo.jpg?sz=128", "display_name": "choey", "link": "https://stackoverflow.com/users/6837388/choey"}, "edited": false, "score": 0, "creation_date": 1542648739, "post_id": 53379441, "comment_id": 93635320, "body": "Definitely, executing the code, as in an eval, would be extremely dangerous, which is why I&#39;d rather a different solution.  The goal here is to <i>ensure a string has valid ruby syntax</i>, <b>without</b> executing any arbitrary code."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1542648868, "post_id": 53379441, "comment_id": 93635373, "body": "I don&#39;t know of a Ruby parser that prevents execution, though you might be able to staple something on the beginning of the code that prevents it from actually doing anything when it&#39;s evaluated. For example, <code>exit(0)</code>."}, {"owner": {"reputation": 53, "user_id": 6837388, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-KLLqjmWbTd4/AAAAAAAAAAI/AAAAAAAAAAw/n0X015MXLTk/photo.jpg?sz=128", "display_name": "choey", "link": "https://stackoverflow.com/users/6837388/choey"}, "edited": false, "score": 0, "creation_date": 1542649482, "post_id": 53379441, "comment_id": 93635684, "body": "That&#39;s a clever solution, though not ideal, it beats writing my own Ruby parser for this."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1543214526, "post_id": 53379441, "comment_id": 93821855, "body": "@tadman I don&#39;t think so. I don&#39;t think it is dangerous at all."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1543214645, "post_id": 53379441, "comment_id": 93821899, "body": "@choey Why do you expect Ruby on Rails to do this? Isn&#39;t this a purely Ruby matter?"}, {"owner": {"reputation": 53, "user_id": 6837388, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-KLLqjmWbTd4/AAAAAAAAAAI/AAAAAAAAAAw/n0X015MXLTk/photo.jpg?sz=128", "display_name": "choey", "link": "https://stackoverflow.com/users/6837388/choey"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1543249744, "post_id": 53379441, "comment_id": 93840270, "body": "@sawa You&#39;re probably right, it&#39;s purely a Ruby matter.  I had only mentioned Ruby on Rails since the code I&#39;m looking to syntax check is Ruby on Rails.  I wasn&#39;t sure if perhaps there were slight differences In Rails compared to vanilla Ruby."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1543252640, "post_id": 53379441, "comment_id": 93841772, "body": "@sawa <code>eval</code> is how you get remote code execution bugs, which are honestly the absolute worst kind to have."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1543295463, "post_id": 53379441, "comment_id": 93855844, "body": "@tadman How is <code>eval</code> relevant?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1543309044, "post_id": 53379441, "comment_id": 93861266, "body": "@choey Since Ruby on Rails is just libraries on top of Ruby, a valid Ruby on Rails code must be a valid Ruby code."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1543331979, "post_id": 53379441, "comment_id": 93874854, "body": "@sawa Numerous critical, business destroying bugs have been introduced over the years into Ruby packages and at the very end of that trail of destruction is a well intended, but poorly protected <code>eval</code>."}, {"owner": {"reputation": 53, "user_id": 6837388, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-KLLqjmWbTd4/AAAAAAAAAAI/AAAAAAAAAAw/n0X015MXLTk/photo.jpg?sz=128", "display_name": "choey", "link": "https://stackoverflow.com/users/6837388/choey"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1543333635, "post_id": 53379441, "comment_id": 93875907, "body": "@sawa thank you for clarifying this - I&#39;ll remove the rails references from the question."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 6837388, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-KLLqjmWbTd4/AAAAAAAAAAI/AAAAAAAAAAw/n0X015MXLTk/photo.jpg?sz=128", "display_name": "choey", "link": "https://stackoverflow.com/users/6837388/choey"}, "edited": false, "score": 0, "creation_date": 1543250572, "post_id": 53380229, "comment_id": 93840719, "body": "This is very cool, and I may use it for checking the syntax on the front-end, but I&#39;m mainly looking for a back-end solution."}], "tags": [], "owner": {"reputation": 181, "user_id": 1849684, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0c2mq.jpg?s=128&g=1", "display_name": "Andrzej Krzywda", "link": "https://stackoverflow.com/users/1849684/andrzej-krzywda"}, "is_accepted": false, "score": 0, "last_activity_date": 1542650247, "creation_date": 1542650247, "answer_id": 53380229, "question_id": 53379441, "link": "https://stackoverflow.com/questions/53379441/validate-ruby-syntax-using-ruby/53380229#53380229", "title": "Validate Ruby Syntax using Ruby", "body": "<p>I'd consider checking this in the browser with Opal - <a href=\"https://github.com/opal/opal\" rel=\"nofollow noreferrer\">https://github.com/opal/opal</a></p>\n"}, {"comments": [{"owner": {"reputation": 53, "user_id": 6837388, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-KLLqjmWbTd4/AAAAAAAAAAI/AAAAAAAAAAw/n0X015MXLTk/photo.jpg?sz=128", "display_name": "choey", "link": "https://stackoverflow.com/users/6837388/choey"}, "edited": false, "score": 0, "creation_date": 1543250278, "post_id": 53475854, "comment_id": 93840554, "body": "Beautiful - this is exactly what I was looking for.  I had previously stated in the question that this code string is coming from the front-end via a ruby editor and ajax, which I later removed to simplify the question, but that is probably why there are comments saying the eval approach is dangerous.  I didn&#39;t want to be executing arbitrary code coming from the internet, so this solution is much better."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 53, "user_id": 6837388, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-KLLqjmWbTd4/AAAAAAAAAAI/AAAAAAAAAAw/n0X015MXLTk/photo.jpg?sz=128", "display_name": "choey", "link": "https://stackoverflow.com/users/6837388/choey"}, "edited": false, "score": 0, "creation_date": 1543295595, "post_id": 53475854, "comment_id": 93855877, "body": "Using <code>eval</code> may be dangerous, but the  comments that I mentioned are those that do not mention <code>eval</code> but say that doing this is dangerous."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 2, "last_activity_date": 1543214195, "creation_date": 1543214195, "answer_id": 53475854, "question_id": 53379441, "link": "https://stackoverflow.com/questions/53379441/validate-ruby-syntax-using-ruby/53475854#53475854", "title": "Validate Ruby Syntax using Ruby", "body": "<p>Let the code string be <code>code</code>. The standard way is to do something like this:</p>\n\n<pre><code>begin\n  RubyVM::InstructionSequence.compile(code)\n  nil\nrescue Exception =&gt; e\n  ... # Put code here to return `e` itself, print its message, or whatever you like\nend\n</code></pre>\n\n<p>If an error is raised and is rescued, that error will display the syntax error. If not (and <code>nil</code> is returned), then <code>code</code> is syntactically valid Ruby code (which does not guarantee that it is free of other types of errors).</p>\n\n<p>The comments saying it is dangerous to do, etc, does not seem to make sense.</p>\n"}], "owner": {"reputation": 53, "user_id": 6837388, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh4.googleusercontent.com/-KLLqjmWbTd4/AAAAAAAAAAI/AAAAAAAAAAw/n0X015MXLTk/photo.jpg?sz=128", "display_name": "choey", "link": "https://stackoverflow.com/users/6837388/choey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 247, "favorite_count": 0, "accepted_answer_id": 53475854, "answer_count": 2, "score": 1, "last_activity_date": 1543334337, "creation_date": 1542646889, "last_edit_date": 1543334337, "question_id": 53379441, "link": "https://stackoverflow.com/questions/53379441/validate-ruby-syntax-using-ruby", "title": "Validate Ruby Syntax using Ruby", "body": "<p>I need to validate that a given string is valid Ruby syntax, programmatically, using Ruby.  I imagine one way I can do this is by running the code in an EVAL statement, and detecting syntax errors that way.</p>\n\n<p>What's a more proper, safer way I can accomplish this?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1542645932, "post_id": 53379015, "comment_id": 93634016, "body": "The docs from stdlib are pretty clear: <i>&quot;When &#39;time&#39; is required, Time is extended with additional methods for parsing and converting Times.&quot;</i>. So yes, these are two different things: the core <code>Time</code> class and some add-ons from stdlib."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1542646091, "post_id": 53379015, "comment_id": 93634103, "body": "Regarding the two versions: ruby-doc.org hosts docs for several Ruby versions. You should probably use the one matching <i>your</i> Ruby version."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1542648551, "post_id": 53379430, "comment_id": 93635241, "body": "It is really odd that <code>Time</code> exists by default and <code>require &#39;time&#39;</code> adds more methods to <code>Time</code>, but that&#39;s how it is."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 2, "last_activity_date": 1542646863, "creation_date": 1542646863, "answer_id": 53379430, "question_id": 53379015, "link": "https://stackoverflow.com/questions/53379015/time-from-core-2-3-0-vs-from-stdlib-2-5-3/53379430#53379430", "title": "Time from core 2.3.0 vs from stdlib 2.5.3", "body": "<p>There is both a <a href=\"https://ruby-doc.org/core-2.5.3/Time.html#method-i-zone\" rel=\"nofollow noreferrer\">core Time library</a> and a <a href=\"https://ruby-doc.org/stdlib-2.5.3/libdoc/time/rdoc/Time.html\" rel=\"nofollow noreferrer\">stdlib Time library</a>.</p>\n\n<p>Core one implements the core functionality of Time. Its structures, basic math, time zones, and generic formatting functions. Stdlib adds additional convenience methods for parsing and formatting.</p>\n\n<p>I can only guess why from my own experience with dates and times. There are <em>a lot</em> of date and time formats and they can rapidly bloat out an otherwise simple library both for memory and complexity. I presume the Ruby folks wanted to keep core <code>Time</code> simple and made the extra formatting optional.</p>\n\n<p><code>Time</code> does have a few formatting functions like <code>asctime</code>, <code>ctime</code>, and <code>strftime</code>. These you get for free from C, and <code>strftime</code> is quite powerful.</p>\n"}], "owner": {"reputation": 2774, "user_id": 3668967, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/tcSwe.png?s=128&g=1", "display_name": "Karol Selak", "link": "https://stackoverflow.com/users/3668967/karol-selak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 53379430, "answer_count": 1, "score": 0, "last_activity_date": 1542646863, "creation_date": 1542645259, "question_id": 53379015, "link": "https://stackoverflow.com/questions/53379015/time-from-core-2-3-0-vs-from-stdlib-2-5-3", "title": "Time from core 2.3.0 vs from stdlib 2.5.3", "body": "<p>I'm a little confused with Ruby documentation on <a href=\"https://ruby-doc.org/\" rel=\"nofollow noreferrer\">https://ruby-doc.org/</a>. We can find there <a href=\"https://ruby-doc.org/core-2.3.0/Time.html#method-i-zone\" rel=\"nofollow noreferrer\"><code>Time</code> class as a part of core 2.3.0</a>, where we have 60 functions described, and also <a href=\"https://ruby-doc.org/stdlib-2.5.3/libdoc/time/rdoc/Time.html\" rel=\"nofollow noreferrer\"><code>Time</code> class as a part of stdlib 2.5.3</a>, where we have only 13. Does these descriptions describe the same class? Are both actual for Ruby 2.5.3? Which of these descriptions should I trust?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 4, "creation_date": 1542646295, "post_id": 53378554, "comment_id": 93634204, "body": "You want <code>-5.remainder(3)</code> which returns <code>-2</code>"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1542671725, "post_id": 53378554, "comment_id": 93644642, "body": "AFAIK <code>-5 % 3</code> is implementation defined in C and C++, that can be either <code>-2</code> or <code>1</code> depending on how the CPU implements modulus with negatives and what it thinks &quot;smallest&quot; means: <code>-2</code> is smaller than <code>1</code> because <code>-2 &lt; 1</code> but <code>-2</code> is bigger than <code>1</code> because <code>|-2| &gt; |1|</code>."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1542779793, "post_id": 53378554, "comment_id": 93686844, "body": "It is a matter of what you want as the set of representatives of the elements derived by modulo. It is whether you think <code>{-2, -1, 0}</code> more natural or <code>{0, 1, 2}</code> more natural. Ruby takes the latter, and so do I."}], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 2, "last_activity_date": 1542644339, "creation_date": 1542644339, "answer_id": 53378758, "question_id": 53378554, "link": "https://stackoverflow.com/questions/53378554/why-modulus-operation-work-different-in-ruby-than-other-languages/53378758#53378758", "title": "Why modulus operation work different in ruby than other languages?", "body": "<p>It's in the docs: <a href=\"https://ruby-doc.org/core-2.5.0/Numeric.html#method-i-divmod\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.5.0/Numeric.html#method-i-divmod</a> </p>\n\n<blockquote>\n  <p>If <code>q, r = x.divmod(y)</code>, then</p>\n\n<pre><code>q = floor(x/y)\nx = q*y + r\n</code></pre>\n  \n  <p>The quotient is rounded toward negative infinity</p>\n</blockquote>\n\n<p>So <code>q</code> is -3 (-5 / 2 and round down, as per usual integer division rules). And <code>r = x - q * y = -5 - -3 * 2 = 1</code></p>\n"}], "owner": {"reputation": 796, "user_id": 9724062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5f4785594cbb8063808b1bd5d989cf9?s=128&d=identicon&r=PG&f=1", "display_name": "Pradhumn Sharma", "link": "https://stackoverflow.com/users/9724062/pradhumn-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1542779434, "creation_date": 1542643613, "last_edit_date": 1542779434, "question_id": 53378554, "link": "https://stackoverflow.com/questions/53378554/why-modulus-operation-work-different-in-ruby-than-other-languages", "title": "Why modulus operation work different in ruby than other languages?", "body": "<p>In Ruby, I get:</p>\n\n<pre><code>-5 % 3 # =&gt; 1\n</code></pre>\n\n<p>whereas other languages like PHP, Javascript, C++, and Java all produce the result <code>-2</code>. I don't understand this concept. I hope someone can explain this ruby's calculation method. It would be better if you could use an example of how it works.</p>\n"}, {"tags": ["css", "ruby", "colors", "sass", "hex"], "comments": [{"owner": {"reputation": 2492, "user_id": 5085788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bWlXI.jpg?s=128&g=1", "display_name": "luisenrike", "link": "https://stackoverflow.com/users/5085788/luisenrike"}, "edited": false, "score": 1, "creation_date": 1542643574, "post_id": 53376646, "comment_id": 93632619, "body": "I don&#39;t think there&#39;s a way but you could use this gem <a href=\"https://github.com/halostatue/color\" rel=\"nofollow noreferrer\">github.com/halostatue/color</a> and do something like <code>Color::RGB.by_hex(&#39;004454&#39;).adjust_saturation(0.5)</code>"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 2492, "user_id": 5085788, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bWlXI.jpg?s=128&g=1", "display_name": "luisenrike", "link": "https://stackoverflow.com/users/5085788/luisenrike"}, "edited": false, "score": 0, "creation_date": 1542702487, "post_id": 53376646, "comment_id": 93653235, "body": "@luisenrike Thanks yeah I had already tried that, it didn&#39;t work. See updated question."}], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1542702667, "creation_date": 1542637354, "last_edit_date": 1542702667, "question_id": 53376646, "link": "https://stackoverflow.com/questions/53376646/how-to-get-resulting-color-of-sass-filter-saturate-on-a-specific-hex-color", "title": "How to get resulting color of sass filter: saturate() on a specific hex color?", "body": "<p>Let's say I have the following code:</p>\n\n<pre><code>.foo {\n  color: #004454;\n  filter:\n    saturate(1.50);\n}\n</code></pre>\n\n<p>Is there a way inside ruby to get the resulting color hex value of <code>.foo</code> ?</p>\n\n<p>The ruby saturate methods in <a href=\"https://github.com/halostatue/color\" rel=\"nofollow noreferrer\">https://github.com/halostatue/color</a> don't change this color at all, for example:</p>\n\n<pre><code>Color::RGB.by_hex('004454').adjust_saturation(50).hex\n=&gt; \"004454\"\n</code></pre>\n\n<p>And since this color is already saturated at 100% I can't expect this to work, case in point:</p>\n\n<pre><code>Color::RGB.by_hex('004454').adjust_saturation(50).to_hsl\n=&gt; HSL [191.43 deg, 100.00%, 16.47%]\n</code></pre>\n\n<p>I guess what I need to do is find away to apply the magic that css filter applies as you can see clearly here in this <a href=\"https://jsfiddle.net/djlancejordan/q4zg6k27/20/\" rel=\"nofollow noreferrer\">jsfiddle</a></p>\n"}, {"tags": ["ruby", "amazon-redshift", "sequel"], "answers": [{"comments": [{"owner": {"reputation": 10912, "user_id": 1681, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dcc2d3a8038cd47219af0eebe0a8a78e?s=128&d=identicon&r=PG", "display_name": "Sixty4Bit", "link": "https://stackoverflow.com/users/1681/sixty4bit"}, "edited": false, "score": 0, "creation_date": 1543161578, "post_id": 53440588, "comment_id": 93809038, "body": "Thank you! I missed this in the documentation!"}, {"owner": {"reputation": 21992, "user_id": 712765, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/oLlVJ.jpg?s=128&g=1", "display_name": "Old Pro", "link": "https://stackoverflow.com/users/712765/old-pro"}, "reply_to_user": {"reputation": 10912, "user_id": 1681, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dcc2d3a8038cd47219af0eebe0a8a78e?s=128&d=identicon&r=PG", "display_name": "Sixty4Bit", "link": "https://stackoverflow.com/users/1681/sixty4bit"}, "edited": false, "score": 0, "creation_date": 1543193905, "post_id": 53440588, "comment_id": 93817471, "body": "@Sixty4Bit thank you for the bounty and I&#39;m glad I could help. Please also mark the answer as accepted (click the big checkmark) so that when the question shows up in future searches, people see it has an accepted answer."}, {"owner": {"reputation": 10912, "user_id": 1681, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dcc2d3a8038cd47219af0eebe0a8a78e?s=128&d=identicon&r=PG", "display_name": "Sixty4Bit", "link": "https://stackoverflow.com/users/1681/sixty4bit"}, "edited": false, "score": 0, "creation_date": 1543205170, "post_id": 53440588, "comment_id": 93819669, "body": "you would think awarding the bounty would have accepted the answer as well. Odd. Thanks for the heads up."}], "tags": [], "owner": {"reputation": 21992, "user_id": 712765, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/oLlVJ.jpg?s=128&g=1", "display_name": "Old Pro", "link": "https://stackoverflow.com/users/712765/old-pro"}, "is_accepted": true, "score": 1, "last_activity_date": 1542946590, "creation_date": 1542946590, "answer_id": 53440588, "question_id": 53376639, "link": "https://stackoverflow.com/questions/53376639/insert-into-select-with-a-hard-coded-value-with-ruby-sequel/53440588#53440588", "title": "Insert into select with a hard coded value with Ruby Sequel", "body": "<p>You didn't provide an executable setup, so I haven't tested this, but I think it will work. The basic idea is to just add a constant column of results to your select.</p>\n\n<pre><code>reports = db[:reports]\nreport_columns = [:user_id, :purchase_date, :sku, :channel]\n\nspoons_select_graph = {\n  user_id: :users,\n  purchase_date: :spoon_receipts,\n  product_id: :spoon_receipts,\n  channel: [:spoon_receipts, :channel, 'spoons']\n}\nspoons = db[:spoon_receipts]\nspoons_select = spoons.graph(:users, user_id: :user_id).set_graph_aliases(spoons_select_graph)\n\nreports.disable_insert_returning.insert(report_columns, spoons_select)\n</code></pre>\n\n<p>See the documentation for <a href=\"http://sequel.jeremyevans.net/rdoc/classes/Sequel/Dataset.html#method-i-set_graph_aliases\" rel=\"nofollow noreferrer\"><code>set_graph_aliases</code></a> for more information.</p>\n"}], "owner": {"reputation": 10912, "user_id": 1681, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/dcc2d3a8038cd47219af0eebe0a8a78e?s=128&d=identicon&r=PG", "display_name": "Sixty4Bit", "link": "https://stackoverflow.com/users/1681/sixty4bit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "accepted_answer_id": 53440588, "answer_count": 1, "score": 0, "last_activity_date": 1542946590, "creation_date": 1542637325, "last_edit_date": 1542638939, "question_id": 53376639, "link": "https://stackoverflow.com/questions/53376639/insert-into-select-with-a-hard-coded-value-with-ruby-sequel", "title": "Insert into select with a hard coded value with Ruby Sequel", "body": "<p>I am using Ruby Sequel to move data into reporting tables daily. I am consolidating data from three tables into a single table. I am doing this in Redshift so I have to use <code>disable_insert_returning</code>.  The names of the columns in the two tables match each other but not the end table which means I am using <code>graph</code> and <code>set_graph_aliases</code>. </p>\n\n<pre><code>reports = db[:reports]\nreport_columns = [:user_id, :purchase_date, :sku]\n\nspoons_select_graph = {\n  user_id: :users,\n  purchase_date: :spoon_receipts,\n  product_id: :spoon_receipts\n}\nspoons = db[:spoon_receipts]\nspoons_select = spoons.graph(:users, user_id: :user_id).set_graph_aliases(spoons_select_graph)\n\nforks_select_graph = {\n  user_id: :users,\n  purchase_date: :fork_receipts,\n  product_id: :fork_receipts\n}\nforks = db[:fork_receipts]\nforks_select = forks.graph(:users, user_id: :user_id).set_graph_aliases(forks_select_graph)\n\nreports.disable_insert_returning.insert(report_columns, spoons_select)\nreports.where(channel: nil).update(channel: 'spoons')\nreports.disable_insert_returning.insert(report_columns, forks_select)\nreports.where(channel: nil).update(channel: 'forks')\n</code></pre>\n\n<p>The updates are taking forever. What I would like to do is add the channel to the <code>insert select</code> so that I don't have to go back and update.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1542645865, "post_id": 53376097, "comment_id": 93633962, "body": "It is redudant to include tags in your title.You should remove &quot;Ruby on rails: &quot;."}], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 1, "last_activity_date": 1542639892, "creation_date": 1542639892, "answer_id": 53377411, "question_id": 53376097, "link": "https://stackoverflow.com/questions/53376097/ruby-on-rails-include-blank-if-more-than-one/53377411#53377411", "title": "ruby on rails: include blank if more than one", "body": "<p>You can use a tiny decorator:</p>\n\n<pre><code>class ClientDecorator\n  def self.form_select_choices\n    Client.pluck(:full_name, :id)\n  end\n\n  def self.form_select_include_blank?\n    { include_blank: Client.count.positive? }\n  end\nend\n</code></pre>\n\n<p>So, in your view you call those class methods:</p>\n\n<pre><code>&lt;%= form.select :client_id, ClientDecorator.form_select_choices, ClientDecorator.form_select_include_blank? %&gt;\n</code></pre>\n\n<p>Now you can test that and leave the database interaction far from the views.</p>\n"}], "owner": {"reputation": 2050, "user_id": 5695646, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-nEigl1xsDV4/AAAAAAAAAAI/AAAAAAAAANE/WGykpWYiogM/photo.jpg?sz=128", "display_name": "Yshmarov", "link": "https://stackoverflow.com/users/5695646/yshmarov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 53377411, "answer_count": 1, "score": 1, "last_activity_date": 1542639892, "creation_date": 1542635506, "question_id": 53376097, "link": "https://stackoverflow.com/questions/53376097/ruby-on-rails-include-blank-if-more-than-one", "title": "ruby on rails: include blank if more than one", "body": "<p>In a form, I want to include blank only in case of <code>Client.count&gt;1</code>. Is there a <strong>clean way</strong> of doing this?</p>\n\n<p>Now I'm using this select:</p>\n\n<pre><code>= f.select :client_id, Client.all.map{|c| [c.full_name, c.id]}, {include_blank: true}\n</code></pre>\n"}, {"tags": ["ruby", "calabash", "calabash-android"], "owner": {"reputation": 99, "user_id": 10674980, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-855djPsSzVA/AAAAAAAAAAI/AAAAAAAAADI/DpnnuSkmkGs/photo.jpg?sz=128", "display_name": "Piecho3a", "link": "https://stackoverflow.com/users/10674980/piecho3a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 184, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1542634987, "creation_date": 1542634987, "question_id": 53375941, "link": "https://stackoverflow.com/questions/53375941/calabash-for-android-on-windows-cannot-proceed-first-test", "title": "Calabash for Android on Windows - cannot proceed first test", "body": "<p>I know that Calabash is not officially supported by MS but stil developed by community. After configuration I always get the same error:</p>\n\n<pre><code>C:\\Users\\XXX YYY\\CalabashCucumberTest&gt;bundle exec calabash-android run io.apk\nNo test server found for this combination of app and calabash version. Recreating test server.\nWARNING: skipped META-INF/CERT.RSA as unsafe\nTraceback (most recent call last):\n        10: from C:/Ruby25-x64/bin/calabash-android:23:in `&lt;main&gt;'\n         9: from C:/Ruby25-x64/bin/calabash-android:23:in `load'\n         8: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/calabash-android-0.9.8/bin/calabash-android:86:in `&lt;top (required)&gt;'\n         7: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/calabash-android-0.9.8/bin/calabash-android-run.rb:16:in `calabash_run'\n         6: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/calabash-android-0.9.8/lib/calabash-android/helpers.rb:107:in `build_test_server_if_needed'\n         5: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/calabash-android-0.9.8/bin/calabash-android-build.rb:2:in `calabash_build'\n         4: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/calabash-android-0.9.8/lib/calabash-android/helpers.rb:169:in `fingerprint_from_apk'\n         3: from C:/Ruby25-x64/lib/ruby/2.5.0/tmpdir.rb:89:in `mktmpdir'\n         2: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/calabash-android-0.9.8/lib/calabash-android/helpers.rb:170:in `block in fingerprint_from_apk'\n         1: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/calabash-android-0.9.8/lib/calabash-android/helpers.rb:170:in `chdir'\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/calabash-android-0.9.8/lib/calabash-android/helpers.rb:188:in `block (2 levels) in fingerprint_from_apk': No signature files found in META-INF. Cannot proceed. (RuntimeError)\n</code></pre>\n\n<p>I followed official Github tutorial. I tried different apps, real and emulated devices - result is the same. Can anyone help me with configuration? Maybe I have to use other versions than latest Ruby and selected gems? </p>\n"}, {"tags": ["arrays", "ruby", "indexing"], "comments": [{"owner": {"reputation": 10727, "user_id": 479167, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0ddf90fe12087db9cfae84c52ae0147c?s=128&d=identicon&r=PG", "display_name": "rubish", "link": "https://stackoverflow.com/users/479167/rubish"}, "edited": false, "score": 0, "creation_date": 1542635122, "post_id": 53375926, "comment_id": 93627487, "body": "<code>array_player.rotate(array_player.index(starter))</code>"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1542635586, "post_id": 53375926, "comment_id": 93627802, "body": "<a href=\"https://stackoverflow.com/a/53233426/5025116\">stackoverflow.com/a/53233426/5025116</a>"}, {"owner": {"reputation": 5, "user_id": 10635984, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "TARK WAGON", "link": "https://stackoverflow.com/users/10635984/tark-wagon"}, "reply_to_user": {"reputation": 10727, "user_id": 479167, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0ddf90fe12087db9cfae84c52ae0147c?s=128&d=identicon&r=PG", "display_name": "rubish", "link": "https://stackoverflow.com/users/479167/rubish"}, "edited": false, "score": 0, "creation_date": 1542636524, "post_id": 53375926, "comment_id": 93628366, "body": "@rubish Wow ruby is cool. I Think i understand but could you enlight me a bit more ? Thanks !"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1542649035, "post_id": 53376859, "comment_id": 93635455, "body": "There&#39;s no need to quote from a method&#39;s doc, especially when the method is as straightforward as <code>Array#rotate</code>. Rather, just provide the link: &quot;The method <a href=\"http://ruby-doc.org/core-2.5.1/Array.html#method-i-rotate\" rel=\"nofollow noreferrer\">Array#rotate</a> can be used here&quot;. Also, your line <code>a.rotate(-count) # =&gt; [&quot;bob&quot;, &quot;alice&quot;, &quot;jean&quot;]</code> line is irrelevant and distracting."}], "tags": [], "owner": {"reputation": 1166, "user_id": 882223, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dd45c3d279959bed4fc7ff575c7c885e?s=128&d=identicon&r=PG", "display_name": "Aref Aslani", "link": "https://stackoverflow.com/users/882223/aref-aslani"}, "is_accepted": true, "score": 0, "last_activity_date": 1542686012, "last_edit_date": 1542686012, "creation_date": 1542638104, "answer_id": 53376859, "question_id": 53375926, "link": "https://stackoverflow.com/questions/53375926/sorting-array-with-starter-inside-the-array/53376859#53376859", "title": "Sorting array with starter inside the array", "body": "<p>As @rubish commented, you can use <a href=\"https://apidock.com/ruby/Array/rotate\" rel=\"nofollow noreferrer\">Array#rotate</a> method.</p>\n\n<p>You can use positive integer as <code>count</code> parameter to rotate items counter clockwise or negative integers to rotate them clockwise.</p>\n\n<pre><code>a = [\"alice\", \"jean\", \"bob\"]\nstarter = \"jean\"\ncount = a.index(starter) # =&gt; 1\n\na.rotate(count) # =&gt; [\"jean\", \"bob\", \"alice\"]\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 10635984, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "TARK WAGON", "link": "https://stackoverflow.com/users/10635984/tark-wagon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 53376859, "answer_count": 1, "score": 0, "last_activity_date": 1542686012, "creation_date": 1542634952, "question_id": 53375926, "link": "https://stackoverflow.com/questions/53375926/sorting-array-with-starter-inside-the-array", "title": "Sorting array with starter inside the array", "body": "<p>sorry I had issues formulating my question.\nto explain it better :</p>\n\n<pre><code>I have a = [\"alice\", \"jean\", \"bob\"]\n</code></pre>\n\n<p>Now i want to let the user choose who will start the game.\nIf its jean, the new array should be like this </p>\n\n<pre><code>a = [\"jean\", \"bob\", \"alice\"]\n</code></pre>\n\n<p>So far, this is working : </p>\n\n<pre><code>def sort_array_players(array_player, starter)\n  sort_array_player = []\n  array_player.map do |name|\n    if name == starter &amp;&amp; name == array_player[0]\n      sort_array_player = [array_player[0], array_player[1], array_player[2]]\n    elsif name == starter &amp;&amp; name == array_player[1]\n      sort_array_player = [array_player[1], array_player[2], array_player[0]]\n    elsif name == starter &amp;&amp; name == array_player[2]\n      sort_array_player = [array_player[2], array_player[0], array_player[1]]\n    end \n  end \n  puts sort_array_player\nend\n</code></pre>\n\n<p>I want to refractor this code but i'm a bit new to ruby, I've spend 2 hours trying to figure out this thing. My guess is that you need to use each.with_index and then create the new array starting by the first one and the following element would be the one with the index of the starter + 1..</p>\n\n<p>Thanks for helping guys</p>\n"}, {"tags": ["ruby", "amazon-web-services", "cpu", "aws-opsworks"], "owner": {"reputation": 660, "user_id": 5732351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4ia1g.png?s=128&g=1", "display_name": "Rod Elias", "link": "https://stackoverflow.com/users/5732351/rod-elias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1542634119, "creation_date": 1542634119, "question_id": 53375680, "link": "https://stackoverflow.com/questions/53375680/opsworks-hogging-cpu", "title": "OpsWorks hogging CPU", "body": "<p>I'm using <code>AWS Opsworks</code> with Chef version <code>11</code> and every time a deploy occurs I noticed a high CPU activity (a ruby process that uses a lot of CPU). </p>\n\n<p>Because of that, my application breaks every time I execute a 'deploy' command.</p>\n\n<p>I've reached to this thread <a href=\"https://forums.aws.amazon.com/thread.jspa?threadID=173399\" rel=\"nofollow noreferrer\">https://forums.aws.amazon.com/thread.jspa?threadID=173399</a></p>\n\n<p>and I'm wondering if such a problem still occurs with Chef version <code>12</code>.</p>\n\n<p>Any idea of how to solve this issue?</p>\n"}, {"tags": ["c++", "c", "ruby", "emulation"], "answers": [{"comments": [{"owner": {"reputation": 20213, "user_id": 147845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2e225ff5beb684088f5c9131d3979a18?s=128&d=identicon&r=PG", "display_name": "You", "link": "https://stackoverflow.com/users/147845/you"}, "edited": false, "score": 1, "creation_date": 1542635669, "post_id": 53376023, "comment_id": 93627849, "body": "Not only does union type-punning depend on system endianness; it is also technically undefined behavior (though some compilers, such as GCC, guarantee the intuitive semantics as a vendor-specific extension)."}, {"owner": {"reputation": 46, "user_id": 7101060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75521c5bf81e1e31b8a17e83f855c8fa?s=128&d=identicon&r=PG&f=1", "display_name": "Kayle Meta", "link": "https://stackoverflow.com/users/7101060/kayle-meta"}, "edited": false, "score": 0, "creation_date": 1542640489, "post_id": 53376023, "comment_id": 93630691, "body": "I guess I didn&#39;t ask correctly, what I want to do is exactly a way to constrain the integer to a specific range"}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "reply_to_user": {"reputation": 46, "user_id": 7101060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75521c5bf81e1e31b8a17e83f855c8fa?s=128&d=identicon&r=PG&f=1", "display_name": "Kayle Meta", "link": "https://stackoverflow.com/users/7101060/kayle-meta"}, "edited": false, "score": 0, "creation_date": 1542640736, "post_id": 53376023, "comment_id": 93630845, "body": "@KayleMeta I&#39;m sorry but your question has nothing at all even suggesting that this is the actual question, and I&#39;m actually unconvinced that it even is the question. For example, if you read the opcodes, or individual bytes, from a binary file, the reading part will already have constrained them to the range of the type that you read. On the other hand if you are forming the opcodes yourself, again they are already constrained by being valid opcodes."}, {"owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "reply_to_user": {"reputation": 46, "user_id": 7101060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75521c5bf81e1e31b8a17e83f855c8fa?s=128&d=identicon&r=PG&f=1", "display_name": "Kayle Meta", "link": "https://stackoverflow.com/users/7101060/kayle-meta"}, "edited": false, "score": 0, "creation_date": 1542640953, "post_id": 53376023, "comment_id": 93630992, "body": "@KayleMeta And if your question is how to take an arbitrary integer in Ruby and constrain it to the range, you can use <code>x &amp; 0xFFFF</code> and <code>x &amp; 0xFF</code> for 16- and 8-bit ranges, respectively, but you almost certainly don&#39;t have arbitrary integers where you would need to do this, and having to do so would indicate that you have an error somewhere earlier."}], "tags": [], "owner": {"reputation": 37414, "user_id": 204883, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ba29060be0758fa6537ff3d768a91757?s=128&d=identicon&r=PG", "display_name": "Arkku", "link": "https://stackoverflow.com/users/204883/arkku"}, "is_accepted": false, "score": 1, "last_activity_date": 1542635764, "last_edit_date": 1542635764, "creation_date": 1542635266, "answer_id": 53376023, "question_id": 53375662, "link": "https://stackoverflow.com/questions/53375662/ruby-mimicking-c-integer-data-types-and-union/53376023#53376023", "title": "Ruby mimicking C Integer Data types and union", "body": "<p>You can get the high and low byte of a 16-bit word with bitwise operations:</p>\n\n<pre><code>high_byte = opcode &gt;&gt; 8\nlow_byte = opcode &amp; 0xFF\n</code></pre>\n\n<p>The above assumes that <code>opcode</code> is already constrained to the range of 16-bit unsigned integers.</p>\n\n<p>And in reverse:</p>\n\n<pre><code>opcode = (high_byte &lt;&lt; 8) | low_byte\n</code></pre>\n\n<p>The above assumes that <code>high_byte</code> and <code>low_byte</code> are constrained to the range of 8-bit unsigned integers.</p>\n\n<p>This approach would be arguably better in C++ as well, since the union depends on system endianness (and is technically a non-standard extension in the first place, although widely supported by popular compilers).</p>\n"}], "owner": {"reputation": 46, "user_id": 7101060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75521c5bf81e1e31b8a17e83f855c8fa?s=128&d=identicon&r=PG&f=1", "display_name": "Kayle Meta", "link": "https://stackoverflow.com/users/7101060/kayle-meta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542635764, "creation_date": 1542634040, "last_edit_date": 1542635023, "question_id": 53375662, "link": "https://stackoverflow.com/questions/53375662/ruby-mimicking-c-integer-data-types-and-union", "title": "Ruby mimicking C Integer Data types and union", "body": "<p>I'm trying to make a Chip-8 emulator in Ruby as my friend has done it before with C++ but I've stumbled across some problems, mind me I have only some knowledge on Ruby whatsoever and I thought this Project would be a good way to improve my skills in this language. </p>\n\n<p>I've read about the Marshal class but I have no idea how to use it whatsoever.\n<a href=\"http://hackage.haskell.org/package/ruby-marshal-0.1.2/docs/Data-Ruby-Marshal-Int.html\" rel=\"nofollow noreferrer\">http://hackage.haskell.org/package/ruby-marshal-0.1.2/docs/Data-Ruby-Marshal-Int.html</a></p>\n\n<p>So basically the chip-8 opcodes are int16's but I need to get the lower and topmost bits of the instruction so I can correctly interpret it. In C++ he did it with an union and basic int data types as follows</p>\n\n<pre><code>struct Instruction {\n    union {\n        uint16_t opcode;\n        struct {\n            uint8_t lower;\n            uint8_t upper;\n        } bytes;\n    };\n</code></pre>\n\n<p><em>How can I mimick the specific uint8_t and uint16_t types</em>? I don't mind the union having to trade the union for something else.</p>\n\n<p>Also would this be the best way to use and manage the memory? I actually don't know if the code below is correctly and will compile as I only have access to notepad atm</p>\n\n<pre><code>class Memory\n    @memory = Hash.new(Array.new)\n    @memory[:system] = Array.new(0x200, 0)\n    @memory[:rom] = Array.new(0xCA0, 0)\n    @memory[:internal] = Array.new(0x5F, 0)\n    @memory[:refresher] = Array.new(0xF0, 0)\n\n    @stack = Array.new(0) #Gotta stick with push/pop\nend\n\nclass Chip8\n    def initialize\n        @memory = Memory.new\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "inheritance", "mixins", "activesupport"], "answers": [{"comments": [{"owner": {"reputation": 2285, "user_id": 4620141, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152601898256854/picture?type=large", "display_name": "David Geismar", "link": "https://stackoverflow.com/users/4620141/david-geismar"}, "edited": false, "score": 0, "creation_date": 1542795424, "post_id": 53377697, "comment_id": 93694403, "body": "I dont understand your explication about Module#define_method : <a href=\"https://apidock.com/ruby/Module/define_method\" rel=\"nofollow noreferrer\">apidock.com/ruby/Module/define_method</a>. I have checked it, and actually when you use define_method in a Parent class or in a module that is mixed in later, then the method is not returned by <code>Child.instance_methods(false)</code>"}, {"owner": {"reputation": 898, "user_id": 160272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/813f535246722b7bf02aacc9ce818de8?s=128&d=identicon&r=PG", "display_name": "showaltb", "link": "https://stackoverflow.com/users/160272/showaltb"}, "reply_to_user": {"reputation": 2285, "user_id": 4620141, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152601898256854/picture?type=large", "display_name": "David Geismar", "link": "https://stackoverflow.com/users/4620141/david-geismar"}, "edited": false, "score": 1, "creation_date": 1542908415, "post_id": 53377697, "comment_id": 93745706, "body": "@DavidGeismar. Yes, <code>define_method</code> can be used to define a method in the including class. Here&#39;s an example of how it can be done: <a href=\"https://gist.github.com/showaltb/da9e8773211f9e7b62d2a52ec2047eb2\" rel=\"nofollow noreferrer\">gist.github.com/showaltb/da9e8773211f9e7b62d2a52ec2047eb2</a>. (This isn&#39;t the exact technique <code>active_support</code> is using, but the effect is the same.)"}], "tags": [], "owner": {"reputation": 898, "user_id": 160272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/813f535246722b7bf02aacc9ce818de8?s=128&d=identicon&r=PG", "display_name": "showaltb", "link": "https://stackoverflow.com/users/160272/showaltb"}, "is_accepted": true, "score": 2, "last_activity_date": 1542640831, "creation_date": 1542640831, "answer_id": 53377697, "question_id": 53375616, "link": "https://stackoverflow.com/questions/53375616/retrieve-list-of-instance-methods-that-are-defined-in-rails-class-excluding-inhe/53377697#53377697", "title": "Retrieve list of instance methods that are defined in rails class excluding inherited and included methods", "body": "<p>Many (most? all?) of those extra methods you are seeing are being created using <code>Module#define_method</code>. If you dig deep in the source for <code>active_support</code>, you'll see that. (You aren't directly including <code>active_support</code>, but it's being pulled in by one or more of the <code>Mongoid</code> modules.)</p>\n\n<p>So these are in fact valid instance methods of your model class, which is why they are included in <code>instance_methods(false)</code>. Other methods that are defined \"conventionally\" in the mixins, such as <code>#freeze</code>, are reported by <code>instance_methods(true)</code>, but not by <code>instance_methods(false)</code>.</p>\n\n<p>I think you may have to do something to filter the list based on the source location. Something along these lines:</p>\n\n<pre><code>my_methods = Product.instance_methods(false).select do |m|\n  Product.instance_method(m).source_location.first.ends_with? '/product.rb'\nend\n</code></pre>\n"}], "owner": {"reputation": 2285, "user_id": 4620141, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/10152601898256854/picture?type=large", "display_name": "David Geismar", "link": "https://stackoverflow.com/users/4620141/david-geismar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 463, "favorite_count": 0, "accepted_answer_id": 53377697, "answer_count": 1, "score": 1, "last_activity_date": 1542640831, "creation_date": 1542633880, "question_id": 53375616, "link": "https://stackoverflow.com/questions/53375616/retrieve-list-of-instance-methods-that-are-defined-in-rails-class-excluding-inhe", "title": "Retrieve list of instance methods that are defined in rails class excluding inherited and included methods", "body": "<p>I have a class Product in my rails project, I am trying to retrieve a list of instance methods of my class that are defined in my file (not inherited method or included via mixin). Here's a small sample of my class :</p>\n\n<pre><code>class Product\n  include Mongoid::Document\n  include Mongoid::Paperclip\n  include Mongoid::Search\n  include Mongoid::Slug\n  include Mongoid::Timestamps\n  extend Enumerize\n    def product_image\n    image.url(:small) unless image.nil?\n  end\n\n  def product_school_level\n    self.school_levels.join ' | '\n  end\n\n  def product_grades\n    self.grades.where(degree_ids: nil).pluck(:name).uniq.join ' | '\n  end\nend\n</code></pre>\n\n<p>I tried to use  <code>Product.instance_methods(false)</code>. However this still returns a lot of methods I dont need, here's a little sample : \n:_run_post_process_callbacks,\n :aliased_fields,\n :_post_process_callbacks,\n :_run_image_post_process_callbacks,\n :_image_post_process_callbacks,\n :_validation_callbacks,\n :nested_attributes?,\n :_run_touch_callbacks,\n :readonly_attributes?,\n :_run_save_callbacks,\n :aliased_fields?,\n :_save_callbacks,\n :localized_fields?,\n :readonly_attributes,\n :fields?,\n :pre_processed_defaults?,\n :_update_callbacks,\n :post_processed_defaults?,\n :fields,\n :<strong>_id_default</strong> </p>\n\n<p>I ran <code>Product.new.method(:_run_post_process_callbacks).source_location</code> on a few of these methods to try to check where they come from. It seems they all come from active_support. \nI never included active_support in my class, so I guess classes in a rails project automatically include active_supports methods ? How is that possible without any inheritance syntax (&lt;&lt;) or include syntax ?\nHow can I then achieve what I want to do and get rid of these methods I dont need in my list ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1542633276, "post_id": 53375300, "comment_id": 93626463, "body": "Weird requirements. Why do you need to create such an array? Perhaps a proper class might be more better?"}, {"owner": {"reputation": 13, "user_id": 10674452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58b234a565ebb733825b3f4a32bdaaf1?s=128&d=identicon&r=PG&f=1", "display_name": "Da Ka", "link": "https://stackoverflow.com/users/10674452/da-ka"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1542633978, "post_id": 53375300, "comment_id": 93626838, "body": "@spickermann, year, i know. This is like an registration datas. About classes, i dont know. Im not an pro developer. Its just an amateur project. Could you help me?"}, {"owner": {"reputation": 10727, "user_id": 479167, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/0ddf90fe12087db9cfae84c52ae0147c?s=128&d=identicon&r=PG", "display_name": "rubish", "link": "https://stackoverflow.com/users/479167/rubish"}, "edited": false, "score": 0, "creation_date": 1542634170, "post_id": 53375300, "comment_id": 93626952, "body": "Seems like you have some typos or incorrect code near <code>Array.new(100000) do |index| index + 1</code>. If your index is nil <code>eight_twelve</code> would be nil as well, because you are not checking for string of length 0. Moreover you can reduce many if/else conditionals in your code and improve readability by using <code>format</code> function <code>format(&quot;%01d%02d%02d%02d%05d&quot;, one, two_three, four_five, six_seven, eight_twelve)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1542693241, "post_id": 53381245, "comment_id": 93649570, "body": "&quot;takes awhile to execute&quot; \u2013 And that is why &quot;combinatorial explosion&quot; is called combinatorial <b>explosion</b>."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1542693197, "last_edit_date": 1542693197, "creation_date": 1542655101, "answer_id": 53381245, "question_id": 53375300, "link": "https://stackoverflow.com/questions/53375300/combinatorics-ruby/53381245#53381245", "title": "Combinatorics Ruby", "body": "<p><a href=\"http://ruby-doc.org/core-2.5.1/Array.html#method-i-product\" rel=\"nofollow noreferrer\">Array#product</a> is the method of choice here.</p>\n\n<p>First construct the following array.</p>\n\n<pre><code>arr = [['1'], [*'05'..'15'], ['78'], [*'02'..'04', *'07'..'12', *'15'..'27'],\n       [*'00000'..'99999']]\n  #=&gt; [[\"1\"], [\"05\", \"06\", \"07\", \"08\", \"09\", \"10\", \"11\", \"12\", \"13\", \"14\", \"15\"],\n  #    [\"78\"], [\"02\", \"03\", \"04\", \"07\", \"08\", \"09\", \"10\", \"11\", \"12\", \"15\",\n  #     \"16\", \"17\", \"18\", \"19\", \"20\", \"21\", \"22\", \"23\", \"24\", \"25\", \"26\", \"27\"],\n  #     \"00000\", \"00001\",..., \"99999\"]\n</code></pre>\n\n<p>The sizes of each element (array) of <code>arr</code> is as follows.</p>\n\n<pre><code>arr.map(&amp;:size)\n  #=&gt; [1, 11, 1, 22, 100000]\n</code></pre>\n\n<p>To generate all combinations of arrays obtained by selecting one element from each element (array) of <code>arr</code> and then converting the resultant array to a string we write the following (which takes awhile to execute):</p>\n\n<pre><code>combos = arr.first.product(*arr.drop(1)).map(&amp;:join)\nn = combos.size\n  #=&gt; 24200000\n\ncombos.first(2)\n  #=&gt; [\"105780200000\", \"105780200001\"]\ncombos.last(2)\n  #=&gt; [\"115782799998\", \"115782799999\"]\n5.times do\n  i = rand(n)\n  puts \"%5d -&gt; %s\" % [i, combos[i]]\nend\n 9379583 -&gt; 109780979583\n12310295 -&gt; 110781910295\n11619403 -&gt; 110781019403\n 3571703 -&gt; 106781971703\n18237011 -&gt; 113781037011\n</code></pre>\n\n<p>Note:</p>\n\n<pre><code>size.reduce(:*)\n  #=&gt; 24200000\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 10674452, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58b234a565ebb733825b3f4a32bdaaf1?s=128&d=identicon&r=PG&f=1", "display_name": "Da Ka", "link": "https://stackoverflow.com/users/10674452/da-ka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1542693197, "creation_date": 1542632740, "last_edit_date": 1542633574, "question_id": 53375300, "link": "https://stackoverflow.com/questions/53375300/combinatorics-ruby", "title": "Combinatorics Ruby", "body": "<p>I need to make a list of numbers. \nRules: </p>\n\n<ol>\n<li>12 numbers in a string;</li>\n<li>First number its always \"1\";</li>\n<li>Numbers 2-3 its an items from array = [05..15];</li>\n<li>4-5 its always \"78\";</li>\n<li>6-7 its an items from array = [02,03,04,07,08,09,10,11,12,15..27];</li>\n<li>8-12 its all options of five-digit numbers;</li>\n</ol>\n\n<p>I wrote this code:</p>\n\n<pre><code>file = File.new('./file.txt', 'w')\none = 1\n\n(5..15).to_a.each do |two_three|\n  if two_three.to_s.length == 1\n    two_three = \"0#{two_three}\"\n  end\n\n  four_five = 78\n\n  arr1 = (2..27).to_a\n  arr2 = [0,1,5,6,13,14]\n  arr3 = arr1-arr2\n  arr3.each do |six_seven|\n    if six_seven.to_s.length == 1\n      six_seven = \"0#{six_seven}\"\n    else \n      six_seven = \"#{six_seven}\"\n    end\n\n    Array.new(100000) do |index|\n      index = index + 1\n\n      if index.to_s.length == 1\n        eight_twelve = \"0000#{index}\"\n      elsif index.to_s.length == 2\n        eight_twelve = \"000#{index}\"\n      elsif index.to_s.length == 3\n        eight_twelve = \"00#{index}\"\n      elsif index.to_s.length == 4\n        eight_twelve = \"0#{index}\"\n      end\n\n      file.puts \"#{one}#{two_three}#{four_five}#{six_seven}#{eight_twelve}\"\n    end\n  end\nend\n</code></pre>\n\n<p>Its working, but incorrectly. \n<a href=\"https://i.stack.imgur.com/6mpZL.png\" rel=\"nofollow noreferrer\">Results</a>\nAnd continues to jump throughout all results (return thirteen-digit only on at string number 200000).\nThanks for your help.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5", "rails-activejob"], "answers": [{"tags": [], "owner": {"reputation": 26, "user_id": 14485176, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05175f70d147d28558a035f3f25b935c?s=128&d=identicon&r=PG", "display_name": "nbennke", "link": "https://stackoverflow.com/users/14485176/nbennke"}, "is_accepted": false, "score": 0, "last_activity_date": 1617171111, "last_edit_date": 1617171111, "creation_date": 1617019949, "answer_id": 66853997, "question_id": 53374655, "link": "https://stackoverflow.com/questions/53374655/activejob-rescue-from-returning-success-without-raise-and-fail/66853997#66853997", "title": "ActiveJob rescue_from returning success without raise and fail", "body": "<p>This question is already some days old but has not been answered yet.</p>\n<p>You have to <code>include ActiveSupport::Rescuable</code> in your job class before defining the rescues.</p>\n<p>See also another question related to this topic: <a href=\"https://stackoverflow.com/questions/44900031/rescue-from-not-working-in-activejob\">rescue_from not working in ActiveJob</a></p>\n"}], "owner": {"reputation": 1370, "user_id": 1939905, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/2EG59.png?s=128&g=1", "display_name": "overallduka", "link": "https://stackoverflow.com/users/1939905/overallduka"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 388, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1617171111, "creation_date": 1542630497, "question_id": 53374655, "link": "https://stackoverflow.com/questions/53374655/activejob-rescue-from-returning-success-without-raise-and-fail", "title": "ActiveJob rescue_from returning success without raise and fail", "body": "<p>I'm trying to catch some errors in my <code>ApplicationJob</code>, but I don't want this errors to raise exceptions(and return failed job execution), but I want certain errors to be ignored(which basically returns success). \nI can accomplish this using regular <code>begin-rescue</code> in every job individually, but I want to share this rescues between multiple jobs.</p>\n\n<p>The issue is that <code>rescue_from</code> catches the error but raises the error anyway, and the job fails on the execution.</p>\n\n<p>application_job.rb</p>\n\n<pre><code>class ApplicationJob &lt; ActiveJob::Base\n\n  rescue_from StandardError do |exception|\n    puts \"Rescuing\"\n    true\n  end\n\nend\n</code></pre>\n\n<p>test_job.rb</p>\n\n<pre><code>class TestJob &lt; ApplicationJob\n\n\n  def perform(*args)\n    raise ActiveResource::ResourceNotFound, \"Wow\"\n  end\n\nend\n</code></pre>\n\n<p>Log when I execute the job:</p>\n\n<pre><code>Performing TestJob (Job ID: fd58cbd5-eb03-4fdc-8301-1ea70a9b1d8b) from Async(default)\nError performing TestJob (Job ID: fd58cbd5-eb03-4fdc-8301-1ea70a9b1d8b) from Async(default) in 1.03ms: ActiveResource::ResourceNotFound (Failed.):\n...\n.../.rvm/rubies/ruby-2.4.4/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n-e:1:in `&lt;main&gt;'\nRescuing\n =&gt; #&lt;ActiveResource::ResourceNotFound: Failed.&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1542628945, "post_id": 53374204, "comment_id": 93624113, "body": "The error is about what it says, you have neither local variable nor method in <code>rspec</code> where you execute <code>@phone_number = PhoneNumber.new(person_id: params[:person_id])</code> statement."}], "answers": [{"comments": [{"owner": {"reputation": 153, "user_id": 7269254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c906a6f2ddeb6ee28f3865246a298cdd?s=128&d=identicon&r=PG&f=1", "display_name": "wolf", "link": "https://stackoverflow.com/users/7269254/wolf"}, "edited": false, "score": 0, "creation_date": 1542630584, "post_id": 53374536, "comment_id": 93624982, "body": "Hey, thanks for your answer. I tried the code as you pointed out however, I got an error as follows:  <code>Expected &quot;http:&#47;&#47;test.host&#47;people&#47;1&quot; to be ===&quot;http:&#47;&#47;test.host&#47;phone_numbers&#47;1&quot;.</code>"}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 153, "user_id": 7269254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c906a6f2ddeb6ee28f3865246a298cdd?s=128&d=identicon&r=PG&f=1", "display_name": "wolf", "link": "https://stackoverflow.com/users/7269254/wolf"}, "edited": false, "score": 0, "creation_date": 1542632538, "post_id": 53374536, "comment_id": 93626032, "body": "So that means your controller is not redirecting to the person, it&#39;s redirecting to the phone number record.  Is that ok?  If so, you need to change the text to <code>expect(response).to redirect_to(assigns(:phone_number))</code> which is the way you&#39;d access the controllers&#39;s instance variable... <code>assigns(:phone_number)</code> in a test is the same variable as <code>@phone_number</code> in the controller."}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 153, "user_id": 7269254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c906a6f2ddeb6ee28f3865246a298cdd?s=128&d=identicon&r=PG&f=1", "display_name": "wolf", "link": "https://stackoverflow.com/users/7269254/wolf"}, "edited": false, "score": 0, "creation_date": 1542632621, "post_id": 53374536, "comment_id": 93626076, "body": "If it&#39;s NOT ok (i.e. the controller should redirect to the person record) then congrats, your test found a problem in your code!"}, {"owner": {"reputation": 153, "user_id": 7269254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c906a6f2ddeb6ee28f3865246a298cdd?s=128&d=identicon&r=PG&f=1", "display_name": "wolf", "link": "https://stackoverflow.com/users/7269254/wolf"}, "edited": false, "score": 0, "creation_date": 1542633522, "post_id": 53374536, "comment_id": 93626584, "body": "Thanks, I got the idea!"}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 3, "last_activity_date": 1542630099, "creation_date": 1542630099, "answer_id": 53374536, "question_id": 53374204, "link": "https://stackoverflow.com/questions/53374204/undefined-local-variable-or-method-params-for-controller/53374536#53374536", "title": "undefined local variable or method `params&#39; for controller", "body": "<p>There's no such thing as <code>params</code> in your test.</p>\n\n<p>Instead of...</p>\n\n<pre><code>@phone_number = PhoneNumber.new(person_id: params[:person_id])\n</code></pre>\n\n<p>...you could do...</p>\n\n<pre><code>@phone_number = PhoneNumber.new(person_id: valid_attributes[:person_id])\n</code></pre>\n\n<p>But since you're just testing that you redirected to the person, you could remove the above line completely and do</p>\n\n<pre><code>expect(response).to redirect_to(alice)\n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 7269254, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c906a6f2ddeb6ee28f3865246a298cdd?s=128&d=identicon&r=PG&f=1", "display_name": "wolf", "link": "https://stackoverflow.com/users/7269254/wolf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 918, "favorite_count": 0, "accepted_answer_id": 53374536, "answer_count": 1, "score": 0, "last_activity_date": 1542630099, "creation_date": 1542628854, "question_id": 53374204, "link": "https://stackoverflow.com/questions/53374204/undefined-local-variable-or-method-params-for-controller", "title": "undefined local variable or method `params&#39; for controller", "body": "<p>I am trying to implement contact manager with rails. I am using RSpec for test-driven development.</p>\n\n<p>\"When I am looking at a single person\u2019s page, I click an add link that takes me to the page where I enter the phone number. I click save, then I see the person and their updated information\" </p>\n\n<p>I am trying to validate this action.</p>\n\n<p>In my controller class</p>\n\n<pre><code>describe \"POST #create\" do\ncontext \"with valid params\" do\n  let(:alice) { Person.create(first_name: 'Alice', last_name: 'Smith') }\n  let(:valid_attributes) { {number: '555-1234', person_id: alice.id} }\n\n  it \"creates a new PhoneNumber\" do\n    expect {\n      post :create, params: {phone_number: valid_attributes}, session: valid_session\n    }.to change(PhoneNumber, :count).by(1)\n  end\n\n  it \"redirects to the phone number's person\" do\n    post :create, params: {:phone_number =&gt; valid_attributes}, session: valid_session\n    @phone_number = PhoneNumber.new(person_id: params[:person_id])\n    expect(response).to redirect_to(@phone_number.person)\n  end\nend\n</code></pre>\n\n<p>I want to redirect to phone number's person but while getting phone number \nIt gives me an error <code>undefined local variable or method params' for #&lt;RSpec::ExampleGroups::PhoneNumbersController::POSTCreate::WithValidParams:0x00007fc89e276898&gt;</code></p>\n\n<p>I also have view test as follows </p>\n\n<pre><code> it 'adds a new phone number' do\n  page.click_link('Add phone number')\n  page.fill_in('Number', with: '555-8888')\n  page.click_button('Create Phone number')\n  expect(current_path).to eq(person_path(person))\n  expect(page).to have_content('555-8888')\nend\n</code></pre>\n\n<p>Right now this test is also failing because of this error :</p>\n\n<pre><code>expected: \"/people/1\"\ngot: \"/phone_numbers\"\n</code></pre>\n\n<p>How can I resolve these problems and redirect user as desired? Thanks in advance</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1542621825, "post_id": 53372105, "comment_id": 93620375, "body": "Why do not you use data field inside ajax block ?"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 10549885, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zmCkO.jpg?s=128&g=1", "display_name": "Pujan Soni", "link": "https://stackoverflow.com/users/10549885/pujan-soni"}, "edited": false, "score": 0, "creation_date": 1542624189, "post_id": 53372247, "comment_id": 93621701, "body": "How can we set the same data attributes in the link_to tag?"}, {"owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "reply_to_user": {"reputation": 75, "user_id": 10549885, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zmCkO.jpg?s=128&g=1", "display_name": "Pujan Soni", "link": "https://stackoverflow.com/users/10549885/pujan-soni"}, "edited": false, "score": 0, "creation_date": 1542625326, "post_id": 53372247, "comment_id": 93622305, "body": "link_to &quot;abc&quot;, abc_path(@abc.id, param1: &#39;value1&#39;, param2: &#39;value2&#39;), method: :post"}, {"owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "reply_to_user": {"reputation": 75, "user_id": 10549885, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zmCkO.jpg?s=128&g=1", "display_name": "Pujan Soni", "link": "https://stackoverflow.com/users/10549885/pujan-soni"}, "edited": false, "score": 0, "creation_date": 1542632853, "post_id": 53372247, "comment_id": 93626190, "body": "It would be great if you could mark it as a correct, if it was helpful so that others can benefit from the same."}], "tags": [], "owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "is_accepted": true, "score": 0, "last_activity_date": 1542621854, "creation_date": 1542621854, "answer_id": 53372247, "question_id": 53372105, "link": "https://stackoverflow.com/questions/53372105/how-to-pass-the-attributes-in-ajax-which-can-be-accessed-through-params-in-the-c/53372247#53372247", "title": "How to pass the attributes in ajax which can be accessed through params in the controller in ruby on rails?", "body": "<p>As per the description mentioned in the post, the data attrbutes are the ones which are sent as body for the following POST request via ajax.</p>\n\n<pre><code>$('.like-btn').click(function(){\n$.ajax({\n    type: \"POST\",\n    url: \"like_user_post_path\", \n    data: {\"field1\": \"value1\", \"field2\": \"value2\"},\n    success: function(result){\n        $(\".like-text\").html(result);\n    }\n});\n});\n</code></pre>\n\n<p>Above is an example where the field1 and field2 specify the keys from which you will be parsing over the controller to fetch the corresponding values.</p>\n"}], "owner": {"reputation": 75, "user_id": 10549885, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/zmCkO.jpg?s=128&g=1", "display_name": "Pujan Soni", "link": "https://stackoverflow.com/users/10549885/pujan-soni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 53372247, "answer_count": 1, "score": 0, "last_activity_date": 1542621854, "creation_date": 1542621316, "question_id": 53372105, "link": "https://stackoverflow.com/questions/53372105/how-to-pass-the-attributes-in-ajax-which-can-be-accessed-through-params-in-the-c", "title": "How to pass the attributes in ajax which can be accessed through params in the controller in ruby on rails?", "body": "<p>My index.html.erb file looks like:\nindex.html.erb</p>\n\n<pre><code>...\n&lt;div class=\"panel-heading\"&gt;\n    &lt;h4 class=\"panel-title\"&gt;                                                \n        &lt;li class=\"list-group-item\"&gt;\n            Post --&gt; &lt;%= post.message %&gt;                                                    \n            &lt;%= link_to \"Like\", 'javascript:void(0)', class: \"btn btn-default like-right-position like-btn\"%&gt;                                                    \n            &lt;span class=\"like-right-position like-text\"&gt;Likdfe&lt;/span&gt;                                                \n        &lt;/li&gt;                                                \n        &lt;a class=\"btn btn-info pull-right\" data-parent=\"#accordion1\" data-toggle=\"collapse\" href=\"#collapse-post-&lt;%= post.id %&gt;\"&gt; Comments&lt;/a&gt;                                            \n    &lt;/h4&gt;\n&lt;/div&gt;\n...\n</code></pre>\n\n<p>And my application.js file is:</p>\n\n<pre><code>$('.like-btn').click(function(){\n    $.ajax({\n        type: \"POST\",\n        url: \"like_user_post_path\", \n        data: \"\",\n        success: function(result){\n            $(\".like-text\").html(result);\n        }\n    });\n});\n</code></pre>\n\n<p>I do not understand the concept of data attributes in html and how to pass it through ajax. Thanks in advance!!!</p>\n"}, {"tags": ["ruby", "cucumber", "capybara"], "answers": [{"tags": [], "owner": {"reputation": 106, "user_id": 6037583, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b584584fd12f81a98eb924a1df66bfed?s=128&d=identicon&r=PG&f=1", "display_name": "eurodo061", "link": "https://stackoverflow.com/users/6037583/eurodo061"}, "is_accepted": false, "score": 0, "last_activity_date": 1542624997, "creation_date": 1542624997, "answer_id": 53373122, "question_id": 53372034, "link": "https://stackoverflow.com/questions/53372034/optional-hash-option-in-ruby-class/53373122#53373122", "title": "Optional hash option in Ruby class", "body": "<p>You can do following:</p>\n\n<pre><code>options = {accept_insecure_certs: true, proxy: proxy}\noptions.merge!({browserName: 'chrome'}) if ENV['extra_args]\ncaps = Selenium::WebDriver::Remote::Capabilities.new(options)\n</code></pre>\n\n<p>Let me know if it helps!</p>\n"}, {"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1542626519, "creation_date": 1542626519, "answer_id": 53373561, "question_id": 53372034, "link": "https://stackoverflow.com/questions/53372034/optional-hash-option-in-ruby-class/53373561#53373561", "title": "Optional hash option in Ruby class", "body": "<p>You can set any  of the <code>Capabilities</code> keys via <code>#[]=</code>, with the key in snake case so</p>\n\n<pre><code>...\ncaps = Selenium::WebDriver::Remote::Capabilities.new(accept_insecure_certs: true, proxy: proxy)\ncaps['browser_name'] = 'chrome' if ENV['extra_args']\n...\n</code></pre>\n\n<p>would work but there's also a <code>browser_name=</code> method on <code>Capabilities</code> so</p>\n\n<pre><code>...\ncaps = Selenium::WebDriver::Remote::Capabilities.new(accept_insecure_certs: true, proxy: proxy)\ncaps.browser_name = 'chrome' if ENV['extra_args']\n...\n</code></pre>\n\n<p>probably makes more sense</p>\n"}], "owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 53373561, "answer_count": 2, "score": -1, "last_activity_date": 1542626519, "creation_date": 1542621080, "question_id": 53372034, "link": "https://stackoverflow.com/questions/53372034/optional-hash-option-in-ruby-class", "title": "Optional hash option in Ruby class", "body": "<p>I'm trying to configure a driver with Capybara where an options hash is only used via an environment variable.</p>\n\n<pre><code>Capybara.register_driver :chrome do |app|\nopts = Selenium::WebDriver::Chrome::Options.new\nopts.add_argument '--start-maximized'\nopts.add_argument '--disable-infobars'\nopts.add_argument '--headless' if ENV['headless']\ncaps = Selenium::WebDriver::Remote::Capabilities.new(accept_insecure_certs: true, proxy: proxy, browserName: 'chrome' if ENV['extra_args])\nCapybara::Selenium::Driver.new(\n    app,\n    browser: :chrome,\n    options: opts,\n    desired_capabilities: caps\n)\n  end\n\n  Capybara.app_host = location\n  Capybara.default_driver = :chrome\nend\n</code></pre>\n\n<p>This is the line I'm working on:</p>\n\n<pre><code>caps = Selenium::WebDriver::Remote::Capabilities.new(accept_insecure_certs: true, proxy: proxy, browserName: 'chrome' if ENV['extra_args])\n</code></pre>\n\n<p>I know this is invalid syntax but is there a way I can achieve what it is I am trying to do here? <code>browserName</code> needs to only be invoked if the <code>ENV[extra_args']</code> is set.</p>\n"}, {"tags": ["ruby", "activerecord", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 303, "user_id": 7749471, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/265ac6355cedd479203335692111f2fd?s=128&d=identicon&r=PG&f=1", "display_name": "tambakoo", "link": "https://stackoverflow.com/users/7749471/tambakoo"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1542623059, "post_id": 53371941, "comment_id": 93621070, "body": "@iGian couple of hundred times. Less than a thousand."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 1, "creation_date": 1542623404, "post_id": 53371941, "comment_id": 93621240, "body": "<code>[1, 2, 3, 4, 5, 6, 7].sample(rand(1..3))</code>"}, {"owner": {"reputation": 303, "user_id": 7749471, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/265ac6355cedd479203335692111f2fd?s=128&d=identicon&r=PG&f=1", "display_name": "tambakoo", "link": "https://stackoverflow.com/users/7749471/tambakoo"}, "reply_to_user": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1542623670, "post_id": 53371941, "comment_id": 93621397, "body": "@iGian that was super simple! Thanks."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1542623893, "post_id": 53371941, "comment_id": 93621530, "body": "<code>sample</code> is not an active record query, though."}, {"owner": {"reputation": 303, "user_id": 7749471, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/265ac6355cedd479203335692111f2fd?s=128&d=identicon&r=PG&f=1", "display_name": "tambakoo", "link": "https://stackoverflow.com/users/7749471/tambakoo"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1542625323, "post_id": 53371941, "comment_id": 93622304, "body": "@SergioTulentsev I meant <code>City.all</code> being a query"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1542626148, "post_id": 53371941, "comment_id": 93622732, "body": "@tambakoo: that it is, but you are not passing your logic to it. It runs unaltered. And then <code>sample</code> acts on the results. And in general, you can&#39;t &quot;pass a ruby function to be used in a query&quot;. That&#39;s the whole point of the databases: to filter/sort/return data with maximum efficiency."}], "answers": [{"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1542623888, "post_id": 53372757, "comment_id": 93621527, "body": "Why not <code>City.order(&#39;RAND()&#39;).limit(rand(1..3))</code>? (<code>RAND()</code>, <code>RANDOM()</code>) depending the DB."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1542623769, "creation_date": 1542623769, "answer_id": 53372757, "question_id": 53371941, "link": "https://stackoverflow.com/questions/53371941/how-do-i-run-a-ruby-function-inside-an-activerecord-query/53372757#53372757", "title": "How do I run a ruby function inside an ActiveRecord query?", "body": "<p>I'd suggest this way, to avoid retrieving all records:</p>\n\n<pre><code>n.times.map.with_object([]) { |_, a| a &lt;&lt; City.find(City.ids.sample) }\n</code></pre>\n\n<p>It returns an array of records.</p>\n\n<p>Of course, <code>n</code> can be a random integer.</p>\n"}], "owner": {"reputation": 303, "user_id": 7749471, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/265ac6355cedd479203335692111f2fd?s=128&d=identicon&r=PG&f=1", "display_name": "tambakoo", "link": "https://stackoverflow.com/users/7749471/tambakoo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1542623769, "creation_date": 1542620771, "question_id": 53371941, "link": "https://stackoverflow.com/questions/53371941/how-do-i-run-a-ruby-function-inside-an-activerecord-query", "title": "How do I run a ruby function inside an ActiveRecord query?", "body": "<p><code>City.all.sample{rand(1..3)}</code> I want the random function to generate the sample count. This always returns one record. </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1542614124, "post_id": 53370009, "comment_id": 93616728, "body": "You&#39;ll need a user agent capable of running JS. I haven&#39;t tried, but opening the app with a selenium/firefox combo should work."}, {"owner": {"reputation": 79, "user_id": 5717068, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1666959753589793/picture?type=large", "display_name": "Duong Nhat", "link": "https://stackoverflow.com/users/5717068/duong-nhat"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1542614310, "post_id": 53370009, "comment_id": 93616796, "body": "I need an embedded one, because I want to use it in a rails app. Im trying bower gem, hope it work"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1542617907, "post_id": 53370009, "comment_id": 93618256, "body": "Usually, a single page application communicates with a server via an API. I would now to build something that runs against the HTML of the single page app Instead, I would try to connect directly to the underlying API."}], "answers": [{"tags": [], "owner": {"reputation": 18749, "user_id": 407213, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/c5T4C.jpg?s=128&g=1", "display_name": "Dorian", "link": "https://stackoverflow.com/users/407213/dorian"}, "is_accepted": false, "score": 0, "last_activity_date": 1542620355, "creation_date": 1542620355, "answer_id": 53371826, "question_id": 53370009, "link": "https://stackoverflow.com/questions/53370009/how-to-read-data-from-single-page-app-by-ruby/53371826#53371826", "title": "How to read data from single page app by ruby", "body": "<p>With <code>HTTParty</code> you can only make HTTP requests, typically a SPA will communicate with the server via an API. But sometimes to data is in the HTML of the page so a combination of HTTParty and Nokogiri would make scrapping the data doable.</p>\n\n<p>The easiest way to scrap data from a SPA is to use an headless browser like <code>selenium</code> with <code>chrome-driver</code> (configured as headless).</p>\n"}], "owner": {"reputation": 79, "user_id": 5717068, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/1666959753589793/picture?type=large", "display_name": "Duong Nhat", "link": "https://stackoverflow.com/users/5717068/duong-nhat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1542620355, "creation_date": 1542612188, "question_id": 53370009, "link": "https://stackoverflow.com/questions/53370009/how-to-read-data-from-single-page-app-by-ruby", "title": "How to read data from single page app by ruby", "body": "<p>Is there effective way to read data from single page app build by react or angular by ruby? Using HTTParty or something like that only get home page.\nSorry for my bad English</p>\n"}, {"tags": ["ruby", "logging", "error-handling", "fileutils"], "comments": [{"owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "edited": false, "score": 2, "creation_date": 1542605121, "post_id": 53368221, "comment_id": 93613861, "body": "You are lacking privileges. Why try to write in <code>&#47;temp</code>, why not just <code>&#47;tmp</code>? Create a directory somewhere where the user running the script has more privileges, not in root, or use <code>&#47;tmp</code>. Or run your script with <code>sudo</code>."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1542607008, "post_id": 53368221, "comment_id": 93614398, "body": "Don&#39;t bother specifying the path for a temp directory. Just use <code>Dir.tmpdir</code> and/or <code>Dir.mktmpdir</code> and let Ruby do the lifting for you: <a href=\"https://ruby-doc.org/stdlib-2.5.3/libdoc/tmpdir/rdoc/Dir.html\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.5.3/libdoc/tmpdir/rdoc/Dir.html</a>"}], "answers": [{"comments": [{"owner": {"reputation": 474, "user_id": 1239108, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d1d7a776f07f1065414bdab6cc72ef65?s=128&d=identicon&r=PG", "display_name": "mrtriangle", "link": "https://stackoverflow.com/users/1239108/mrtriangle"}, "edited": false, "score": 0, "creation_date": 1542605827, "post_id": 53368839, "comment_id": 93614045, "body": "What about on a windows system? I want to check if a tmp directory exists and if not, create it and write the log file there."}, {"owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "edited": false, "score": 1, "creation_date": 1542605837, "post_id": 53368839, "comment_id": 93614049, "body": "It&#39;s <code>&#47;tmp</code>, not <code>&#47;temp</code> that should exist. Rescuing from opening a file which is supposed to be used for error logging and logging that error to the same file does not make sense."}, {"owner": {"reputation": 4866, "user_id": 6603195, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-nZGPkfcc0EE/AAAAAAAAAAI/AAAAAAAAAoE/op-TBiFRNzg/photo.jpg?sz=128", "display_name": "Marcin Ko\u0142odziej", "link": "https://stackoverflow.com/users/6603195/marcin-ko%c5%82odziej"}, "reply_to_user": {"reputation": 474, "user_id": 1239108, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d1d7a776f07f1065414bdab6cc72ef65?s=128&d=identicon&r=PG", "display_name": "mrtriangle", "link": "https://stackoverflow.com/users/1239108/mrtriangle"}, "edited": false, "score": 2, "creation_date": 1542605900, "post_id": 53368839, "comment_id": 93614067, "body": "@mrtriangle if you&#39;re trying to make your program compatible with both Windows and Unix, create your logs somewhere inside your application directory (or handle that in an OS-specific way)."}, {"owner": {"reputation": 665, "user_id": 10306509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEjY3.jpg?s=128&g=1", "display_name": "Ivan Olshansky", "link": "https://stackoverflow.com/users/10306509/ivan-olshansky"}, "reply_to_user": {"reputation": 474, "user_id": 1239108, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d1d7a776f07f1065414bdab6cc72ef65?s=128&d=identicon&r=PG", "display_name": "mrtriangle", "link": "https://stackoverflow.com/users/1239108/mrtriangle"}, "edited": false, "score": 1, "creation_date": 1542606107, "post_id": 53368839, "comment_id": 93614135, "body": "@mrtriangle, on most Windows system you can&#39;t create directory at root level without special permissions."}], "tags": [], "owner": {"reputation": 665, "user_id": 10306509, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEjY3.jpg?s=128&g=1", "display_name": "Ivan Olshansky", "link": "https://stackoverflow.com/users/10306509/ivan-olshansky"}, "is_accepted": false, "score": 0, "last_activity_date": 1542606249, "last_edit_date": 1542606249, "creation_date": 1542605631, "answer_id": 53368839, "question_id": 53368221, "link": "https://stackoverflow.com/questions/53368221/write-errors-to-log-file-in-ruby/53368839#53368839", "title": "Write Errors to Log File in Ruby", "body": "<ol>\n<li>You shouldn't create <strong>/tmp</strong> directory - this directory always exist.</li>\n<li>You should place <code>begin</code> above checking code, not below.</li>\n</ol>\n\n<pre>\n    require 'logger'\n    require 'fileutils'\n\n    begin\n      log = Logger.new File.open('/tmp/error.log', 'w')\n      log.level = Logger::INFO  \n    rescue StandardError => e\n      puts \"Error - #{e}\"\n    end\n</pre>\n"}, {"tags": [], "owner": {"reputation": 18749, "user_id": 407213, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/c5T4C.jpg?s=128&g=1", "display_name": "Dorian", "link": "https://stackoverflow.com/users/407213/dorian"}, "is_accepted": true, "score": 1, "last_activity_date": 1542620809, "creation_date": 1542620809, "answer_id": 53371957, "question_id": 53368221, "link": "https://stackoverflow.com/questions/53368221/write-errors-to-log-file-in-ruby/53371957#53371957", "title": "Write Errors to Log File in Ruby", "body": "<p>To make it work and compatible with Windows:</p>\n\n<pre><code>require 'logger'\nrequire 'tmpdir'\n\ntmp = Dir.mktmpdir\nlog = Logger.new File.open(File.join(tmp, 'error.log', 'w')\nlog.level = Logger::INFO\n\nbegin\n  # your code here\nrescue StandardError =&gt; e\n  log.error \"Error - #{e}\"\n  puts \"For detailed error messages, see the file: /temp/error.log\"\nend\n</code></pre>\n"}], "owner": {"reputation": 474, "user_id": 1239108, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/d1d7a776f07f1065414bdab6cc72ef65?s=128&d=identicon&r=PG", "display_name": "mrtriangle", "link": "https://stackoverflow.com/users/1239108/mrtriangle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1981, "favorite_count": 0, "accepted_answer_id": 53371957, "answer_count": 2, "score": -3, "last_activity_date": 1542651822, "creation_date": 1542600908, "last_edit_date": 1542651822, "question_id": 53368221, "link": "https://stackoverflow.com/questions/53368221/write-errors-to-log-file-in-ruby", "title": "Write Errors to Log File in Ruby", "body": "<p>I am trying to capture errors, check for a /tmp directory and then write the error to a logfile in that directory, currently I get: </p>\n\n<pre><code>.rvm/rubies/ruby-2.2.1/lib/ruby/2.2.0/fileutils.rb:252:in `mkdir': Permission denied @ dir_s_mkdir - /temp\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>require 'logger'\nrequire 'tmpdir'\n\ntemp = Dir.tmpdir()\nlog = Logger.new File.open(\"#{temp}/error.log\", 'w')\nlog.level = Logger::INFO\n\nbegin\n\nrescue StandardError =&gt; e\n   log.error \"Error - #{e}\"\n   puts \"For detailed error messages, see: #{temp}/error.log\"\nend\n</code></pre>\n\n<p>I believe this error is because I am attempting to do something I don't have permission to do, what I don't understand is there a clean way to achieve what I am attempting? Thanks in advance for any time spent on this issue.</p>\n\n<p>I have edited this with my updated code that answers my question. Thanks for all your input.</p>\n"}, {"tags": ["ruby", "docusignapi"], "comments": [{"owner": {"reputation": 18749, "user_id": 407213, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/c5T4C.jpg?s=128&g=1", "display_name": "Dorian", "link": "https://stackoverflow.com/users/407213/dorian"}, "edited": false, "score": 0, "creation_date": 1542621363, "post_id": 53368051, "comment_id": 93620094, "body": "I think you custom fields but I&#39;m not sure. I&#39;m guessing I could rephrase your question as: &quot;How can I populate custom fields of an envelope when uploading a document to DocuSign with docusign_rest&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 42798, "user_id": 64904, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/d18e711c1855012728c3a5782cfcc3ad?s=128&d=identicon&r=PG", "display_name": "Larry K", "link": "https://stackoverflow.com/users/64904/larry-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1543178649, "creation_date": 1543178649, "answer_id": 53471769, "question_id": 53368051, "link": "https://stackoverflow.com/questions/53368051/how-to-auto-populate-txt-from-ducusign-rest-gem/53471769#53471769", "title": "how to auto populate txt from ducusign_rest gem", "body": "<p>You can programmatically pass data to an envelope that uses a template by using the composite templates feature of the Envelopes::create API call. </p>\n\n<p>Or you can skip the template step and create fields (tabs) directly on the document when you create the envelope. In this case, you can supply <code>values</code> for the tabs when you create them.</p>\n\n<p>You may want to use the <a href=\"https://github.com/docusign/docusign-ruby-client\" rel=\"nofollow noreferrer\">official DocuSign SDK for Ruby.</a> </p>\n"}], "owner": {"reputation": 117, "user_id": 4136018, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd4d9db5785a035b2e62fa7ec82d07bc?s=128&d=identicon&r=PG", "display_name": "Jaz Pin", "link": "https://stackoverflow.com/users/4136018/jaz-pin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1543178649, "creation_date": 1542599234, "last_edit_date": 1542599748, "question_id": 53368051, "link": "https://stackoverflow.com/questions/53368051/how-to-auto-populate-txt-from-ducusign-rest-gem", "title": "how to auto populate txt from ducusign_rest gem", "body": "<p>I am trying to use 'docusign_rest'(<a href=\"https://github.com/jondkinney/docusign_rest\" rel=\"nofollow noreferrer\">https://github.com/jondkinney/docusign_rest</a>) gem to create envelope from template.</p>\n\n<p>I have uploaded the file and defined txt field with data label on document thru Docusign Console.</p>\n\n<p>How can I use this gem to pass data to document and display?</p>\n\n<p>Not sure this approach \"Creating an envelope from a template using custom tabs\" is the right way to develop system.</p>\n"}]