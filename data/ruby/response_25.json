[{"tags": ["html", "ruby-on-rails", "ruby", "methods", "attributes"], "answers": [{"comments": [{"owner": {"reputation": 11210, "user_id": 3046413, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0c4b85a42ee3c491c13d36b9a5b8a789?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Edwards", "link": "https://stackoverflow.com/users/3046413/carl-edwards"}, "edited": false, "score": 0, "creation_date": 1435799104, "post_id": 31174056, "comment_id": 50355623, "body": "Thanks  for noticing that typo. Where do I put <code>instance_var.send(attr.to_sym)</code> in the method?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 11210, "user_id": 3046413, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0c4b85a42ee3c491c13d36b9a5b8a789?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Edwards", "link": "https://stackoverflow.com/users/3046413/carl-edwards"}, "edited": false, "score": 0, "creation_date": 1435799131, "post_id": 31174056, "comment_id": 50355626, "body": "Instead of <code>instance_var.attr</code> that can&#39;t possibly work."}, {"owner": {"reputation": 11210, "user_id": 3046413, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0c4b85a42ee3c491c13d36b9a5b8a789?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Edwards", "link": "https://stackoverflow.com/users/3046413/carl-edwards"}, "edited": false, "score": 0, "creation_date": 1435799479, "post_id": 31174056, "comment_id": 50355715, "body": "I see. Would the same apply to <code>assoc_method</code>?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 11210, "user_id": 3046413, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0c4b85a42ee3c491c13d36b9a5b8a789?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Edwards", "link": "https://stackoverflow.com/users/3046413/carl-edwards"}, "edited": false, "score": 0, "creation_date": 1435799526, "post_id": 31174056, "comment_id": 50355729, "body": "Yes, <code>instance_var.assoc_method</code> needs to be <code>instance_var.send(assoc_method.to_sym)</code>."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 0, "last_activity_date": 1435798867, "creation_date": 1435798867, "answer_id": 31174056, "question_id": 31173520, "link": "https://stackoverflow.com/questions/31173520/passing-an-instance-attribute-and-association-method-as-parameters-in-a-ruby-met/31174056#31174056", "title": "Passing an instance attribute and association method as parameters in a ruby method", "body": "<p>If I understood what you want, <code>\"title\"</code> should be <code>\"name\"</code> instead, yes? In any case, <code>instance_var.attr</code> can't work since <code>instance_var</code> doesn't have <code>attr</code>; it has <code>name</code>. You want <code>instance_var.send(attr.to_sym)</code>.</p>\n"}], "owner": {"reputation": 11210, "user_id": 3046413, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0c4b85a42ee3c491c13d36b9a5b8a789?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Edwards", "link": "https://stackoverflow.com/users/3046413/carl-edwards"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "closed_date": 1435841904, "accepted_answer_id": 31174056, "answer_count": 1, "score": 0, "last_activity_date": 1435802322, "creation_date": 1435794713, "last_edit_date": 1435802322, "question_id": 31173520, "link": "https://stackoverflow.com/questions/31173520/passing-an-instance-attribute-and-association-method-as-parameters-in-a-ruby-met", "closed_reason": "Not suitable for this site", "title": "Passing an instance attribute and association method as parameters in a ruby method", "body": "<p>I've written a rails helper as a part of creating data-attributes for options within a select box.</p>\n\n<p><strong>Helper</strong></p>\n\n<pre><code>def list_attributed_options(instance_vars, attr, assoc_method)\n  instance_vars.map { |instance_var| [instance_var.attr, instance_var.id, { :\"data-#{assoc_method}\" =&gt; instance_var.assoc_method.downcase.gsub(/\\s+/, \"-\")}] }\nend\n</code></pre>\n\n<p><strong>View Code</strong></p>\n\n<pre><code>&lt;%= f.input :game_id, as: :select, collection: list_attributed_options(@games, \"title\", \"console\"), include_blank: \"Select a game\" %&gt;\n</code></pre>\n\n<p><code>instance_vars</code> represents the instance variables that will be used as the collection (<code>@games</code>), <code>attr</code> represents one of the instance variables' attributes and <code>assoc_method</code> is the model that it belongs to.</p>\n\n<pre><code>instance_var.title = \"Halo\"\ninstance_var.id = 21\ninstance_var.console = \"Xbox One\"\n</code></pre>\n\n<p>So for example in this particular case I want to name the options by a game's title, name the data attribute after the console belonging to the game:</p>\n\n<pre><code>&lt;select&gt;\n  &lt;option data-console=\"xbox-one\"&gt;Halo&lt;/option&gt;\n  &lt;option data-console=\"ps4\"&gt;ratchet-&amp;-clank&lt;/option&gt;\n  &lt;option data-console=\"xbox-one\"&gt;Tomb Raider&lt;/option&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>Interpolating the <code>attr</code> parameter works fine but when it comes to attaching them to the instance variable is when I run into problems.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "dependencies", "bundler", "ruby-on-rails-plugins"], "answers": [{"tags": [], "owner": {"reputation": 2759, "user_id": 247905, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/9552ad4dd462bb281bcbf9ed2feb41e0?s=128&d=identicon&r=PG", "display_name": "Pierre Pretorius", "link": "https://stackoverflow.com/users/247905/pierre-pretorius"}, "is_accepted": false, "score": 0, "last_activity_date": 1467392545, "creation_date": 1467392545, "answer_id": 38150607, "question_id": 31173485, "link": "https://stackoverflow.com/questions/31173485/developing-multiple-rails-plugins-with-dependencies/38150607#38150607", "title": "Developing Multiple Rails Plugins with Dependencies", "body": "<p>Stick with specifying git repositories in your Gemfile and using <a href=\"http://bundler.io/v1.5/git.html#local\" rel=\"nofollow\">bundle local overrides</a> to work on them.</p>\n\n<p><strong>Possible problems with solutions:</strong>\n<code>\n1. Local override for user at /path/to/local/repo is using branch deleteme but Gemfile specifies master\n</code>\nIf your Gemfile specifies branch \"master\" then the local override should have branch \"master\" checked out.  This is because the goal of a local override is so that you can work on a gem in a local folder while running and testing the application.  In production it will check out the branch and revision specified in the Gemfile and Gemfile.lock and it should offcourse be exactly what you are running with your local override.</p>\n\n<p><code>\n2. Could not find user-0.0.1 in any of the sources\nRun `bundle install` to install missing gems.\n</code>\nWhen you run bundle install it places a version number for each gem in the Gemfile.lock.  This file is added to git so that other developers and your production server runs the same versions of the gems as you do.  Your Gemfile.lock needs to specify the same version of your gem as what is returned in the local override gemspec file.  If you incremented the version number in the local override you need to run \"bundle update <em>gemname</em>\" in the application that uses it so that it updates the Gemfile.lock.  Note that bundler caches everything in a gemspec file until you increment the version.  Thus you can't add new dependencies or change dependency versions in a gemspec if you don't increase the version number in that gemspec.</p>\n\n<p><strong>The git-bundle gem</strong></p>\n\n<p>If you use a git repository in your Gemfile with local overrides bundler will store git revision hashes in your Gemfile.lock as mentioned above.  Example:</p>\n\n<p><em>Gemfile:</em>\n<code>\ngem 'example', git: 'https://github.com/your_name/example.git', branch: :master\n</code></p>\n\n<p><em>Bundle config shell command:</em>\n<code>\nbundle config local.example /path/to/local/git/repository\n</code></p>\n\n<p>Gemfile.lock (auto generated):\n<code>\nGIT\n  remote: https://github.com/your_name/example.git\n  revision: b9270e61abb89e1ff77fb8cfacb463e4d04388ad\n  branch: master\n</code></p>\n\n<p>After you commit in the local override repository you will need to run bundle install on your main application so that it rebuilds the Gemfile.lock to include the new revision hash and commit it. I recommend using the gem below as it automates this process for you and also aids in other scenarios. See the gem page for exact detail.</p>\n\n<p><a href=\"https://github.com/EPI-USE-Labs/git-bundle\" rel=\"nofollow\">https://github.com/EPI-USE-Labs/git-bundle</a></p>\n\n<p><strong>The activesupport-decorators gem</strong></p>\n\n<p>As a sidenote, when you need to extend classes between your gems you can use the decorator pattern which is implemented elegantly by the activesupport-decorators gem:</p>\n\n<p><a href=\"https://github.com/EPI-USE-Labs/activesupport-decorators\" rel=\"nofollow\">https://github.com/EPI-USE-Labs/activesupport-decorators</a></p>\n"}], "owner": {"reputation": 976, "user_id": 5071591, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f893dc0a368788bd3a95b7f9d34f86ab?s=128&d=identicon&r=PG", "display_name": "davids3", "link": "https://stackoverflow.com/users/5071591/davids3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 255, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1467392545, "creation_date": 1435794542, "question_id": 31173485, "link": "https://stackoverflow.com/questions/31173485/developing-multiple-rails-plugins-with-dependencies", "title": "Developing Multiple Rails Plugins with Dependencies", "body": "<p>I'm starting to build a series of plugins and engines in a project I'm developing and I've run into the issue of having to list the paths to dependencies in all of the Gemfiles for the main application and the plugins/engines if I want rake to work.</p>\n\n<p>Rake works fine for the main application because it's Gemfile lists the relative paths to the plugins/engines I want, but when a plugin/engine is dependent on another and does not have the relative paths all listed, using <code>rake rdoc</code> I'll get an error like the following (presumably I'll get the same error trying to run tests/the dummy application/etc):</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Bundler could not find compatible versions for gem \"user\":\n  In Gemfile:\n    auth (&gt;= 0) ruby depends on\n      user (&gt;= 0) ruby\nCould not find gem 'user (&gt;= 0) ruby', which is required by gem 'auth (&gt;= 0) ruby', in any of the sources.\n</code></pre>\n\n<p>Rather than having to use paths, I've tried specifying the git repository in the plugins/engines like so:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code># User engine\ngem 'user', git: 'https://localhost/git/project/user.git', branch: 'master'\n</code></pre>\n\n<p>And then using <code>bundler config local.user /path/to/local/repo</code> command to make it point to a local repository for development. This appeared to work perfectly... until I change the version of the plugin in the local repo, then it spits out this error in any dependent plugin/engine/application:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Could not find user-0.0.1 in any of the sources\nRun `bundle install` to install missing gems.\n</code></pre>\n\n<p>Whilst that isn't really much of an issue-- the version number will be changed at the end anyway --it also turns out that it will throw the following error if you're on a branch in the local repo instead of master:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Local override for user at /path/to/local/repo is using branch deleteme but Gemfile specifies master\n</code></pre>\n\n<p>And omitting the branch option from the Gemfile leaves me with this error:</p>\n\n<pre class=\"lang-none prettyprint-override\"><code>Cannot use local override for user at /path/to/local/repo because :branch is not specified in Gemfile. Specify a branch or use `bundle config --delete` to remove the local override\n</code></pre>\n\n<hr>\n\n<p>So am I just stuck with having <code>, path: \"../local-repo-directory\"</code> strewn about all of the Gemfiles for plugins/engines with dependencies on one another whilst in development or is there a way of developing multiple interdependent plugins/engines for Rails at the same time that doesn't use a really sloppy/inelegant solution?</p>\n\n<p>I'm drawing blanks on other ways to do this, so any help would be greatly appreciated. I hope I've explained this well enough, but if there's anything else I can clarify, let me know.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "geolocation", "gem", "geocode"], "comments": [{"owner": {"reputation": 218, "user_id": 3505500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0889e4b8308c2e6204d6ed16639f1ca7?s=128&d=identicon&r=PG", "display_name": "fedetaglia", "link": "https://stackoverflow.com/users/3505500/fedetaglia"}, "edited": false, "score": 0, "creation_date": 1457401574, "post_id": 31172516, "comment_id": 59380402, "body": "I know this is an old question but did you find a better solution for this?"}, {"owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "reply_to_user": {"reputation": 218, "user_id": 3505500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0889e4b8308c2e6204d6ed16639f1ca7?s=128&d=identicon&r=PG", "display_name": "fedetaglia", "link": "https://stackoverflow.com/users/3505500/fedetaglia"}, "edited": false, "score": 0, "creation_date": 1457447950, "post_id": 31172516, "comment_id": 59404296, "body": "unfortunately I did not"}], "answers": [{"tags": [], "owner": {"reputation": 218, "user_id": 3505500, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0889e4b8308c2e6204d6ed16639f1ca7?s=128&d=identicon&r=PG", "display_name": "fedetaglia", "link": "https://stackoverflow.com/users/3505500/fedetaglia"}, "is_accepted": true, "score": 3, "last_activity_date": 1457524425, "last_edit_date": 1457524425, "creation_date": 1457478779, "answer_id": 35879921, "question_id": 31172516, "link": "https://stackoverflow.com/questions/31172516/ruby-geocode-make-a-model-geocoded-when-latitude-and-longitude-already-exist/35879921#35879921", "title": "Ruby Geocode: Make a model &#39;geocoded&#39; when latitude and longitude already exist from other source?", "body": "<p>Yesterday I had the same issue, even if this is an old question I share here my solution in case someone else needs it.</p>\n\n<p>You can directly include the Geocoder gem on your model requiring the file and defining the geocoder options (these in my case are simple the names of latitude and longitude on my db columns).</p>\n\n<p>Since I'm working with an ActiveRecord Model I needed to:</p>\n\n<pre><code>require \"geocoder/stores/active_record\"\n\nclass User &lt; ActiveRecord::Base\n  include Geocoder::Store::ActiveRecord\n\n  def self.geocoder_options\n    { latitude: 'latitude', longitude: 'longitude' }\n  end\n\nend\n</code></pre>\n\n<p>I think this is cleaner solution than having a fake address method.</p>\n"}], "owner": {"reputation": 6202, "user_id": 1066615, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/iv68W.png?s=128&g=1", "display_name": "sixty4bit", "link": "https://stackoverflow.com/users/1066615/sixty4bit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 442, "favorite_count": 1, "accepted_answer_id": 35879921, "answer_count": 1, "score": 3, "last_activity_date": 1457524425, "creation_date": 1435788449, "question_id": 31172516, "link": "https://stackoverflow.com/questions/31172516/ruby-geocode-make-a-model-geocoded-when-latitude-and-longitude-already-exist", "title": "Ruby Geocode: Make a model &#39;geocoded&#39; when latitude and longitude already exist from other source?", "body": "<p>In my app I have a <code>Model</code> and am retrieving the <code>lat</code> and <code>lng</code> values for each row from an external API unrelated to Geocode. At this time all I need Geocode for is the <code>.nearbys</code> method which lets me find other nearby <code>models</code> within the default radius (50 miles) or one that I specify.</p>\n\n<p>Normally you \"active\" a model for Geocode by adding <code>geocoded_by :attribute_name</code>, where <code>attribute_name</code> will be used by Geocode when the object is saved to fetch the lat/long coordinates.</p>\n\n<p>Right now I've simply added this to my model to get it to work:</p>\n\n<pre><code>geocoded_by :blargh, latitude: :lat, longitude: :lng\n\ndef blargh\nend\n</code></pre>\n\n<p>This seems to work fine. I can open my console, instantiate a <code>Model</code>, and call <code>model.nearbys</code>. However, it seems a bit hacky and I'm wondering if there's a better way than just defining a fake method and passing that to <code>geocoded_by</code>. Many thanks in advance for any help!</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 704, "user_id": 1437795, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/8ead50194c6b0e467622e039b4211d04?s=128&d=identicon&r=PG", "display_name": "aazeem", "link": "https://stackoverflow.com/users/1437795/aazeem"}, "is_accepted": true, "score": 14, "last_activity_date": 1435789973, "last_edit_date": 1435789973, "creation_date": 1435787633, "answer_id": 31172364, "question_id": 31172337, "link": "https://stackoverflow.com/questions/31172337/undefined-method-for-mainobject-nomethoderror-though-method-is-defined/31172364#31172364", "title": "Undefined method for main:Object (NoMethodError) though method is defined", "body": "<p>Ruby expects the method to be declared before you call it, try to move your method definition before you call the method like:</p>\n\n<pre><code>def check_params(param)\n # some code\nend\n\ncheck_params param\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 3587299, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0211d11f5ded2a947b49d3ae4f705b8?s=128&d=identicon&r=PG&f=1", "display_name": "user3587299", "link": "https://stackoverflow.com/users/3587299/user3587299"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8485, "favorite_count": 2, "accepted_answer_id": 31172364, "answer_count": 1, "score": 6, "last_activity_date": 1435797153, "creation_date": 1435787535, "last_edit_date": 1435797153, "question_id": 31172337, "link": "https://stackoverflow.com/questions/31172337/undefined-method-for-mainobject-nomethoderror-though-method-is-defined", "title": "Undefined method for main:Object (NoMethodError) though method is defined", "body": "<p>I have defined a script with the following code snippet:</p>\n\n<pre><code>check_params param\n\ndef check_params(param)\n # some code\nend\n</code></pre>\n\n<p>When I run this I get</p>\n\n<blockquote>\n  <p>undefined method `check_params' for main:Object (NoMethodError)</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "tdd", "factory-bot"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1435785446, "post_id": 31171759, "comment_id": 50351443, "body": "Do you think you could edit the post and insert your code without the row numbers?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1435785536, "post_id": 31171759, "comment_id": 50351487, "body": "Also add the actual controller which you are testing."}, {"owner": {"reputation": 1506, "user_id": 2831700, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5e40a909ecdd6e94a32e120c0044ac9d?s=128&d=identicon&r=PG", "display_name": "IvRRimUm", "link": "https://stackoverflow.com/users/2831700/ivrrimum"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1435785714, "post_id": 31171759, "comment_id": 50351575, "body": "Done, but i dont think theres problem in the controller, my bet would be in configutation! I have added config.include FactoryGirl::Syntax::Methods to rails_helper.rb!"}, {"owner": {"reputation": 1506, "user_id": 2831700, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5e40a909ecdd6e94a32e120c0044ac9d?s=128&d=identicon&r=PG", "display_name": "IvRRimUm", "link": "https://stackoverflow.com/users/2831700/ivrrimum"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1435786867, "post_id": 31171759, "comment_id": 50352091, "body": "Or it could be FactoryGirl bug!"}, {"owner": {"reputation": 1989, "user_id": 1520130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9000383017000de1e1025f4f80d8655?s=128&d=identicon&r=PG", "display_name": "osman", "link": "https://stackoverflow.com/users/1520130/osman"}, "edited": false, "score": 0, "creation_date": 1435789250, "post_id": 31171759, "comment_id": 50353046, "body": "Try to isolate the problem. E.g. are you able to use the factory on the console?   <code>rails console test --sandbox</code> and then <code>create(:member)</code> and <code>Member.last</code>"}, {"owner": {"reputation": 1506, "user_id": 2831700, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5e40a909ecdd6e94a32e120c0044ac9d?s=128&d=identicon&r=PG", "display_name": "IvRRimUm", "link": "https://stackoverflow.com/users/2831700/ivrrimum"}, "edited": false, "score": 0, "creation_date": 1435818160, "post_id": 31171759, "comment_id": 50360560, "body": "I am not able to do create(...), but FactoryGirl.create(:...) Works just fine."}, {"owner": {"reputation": 1506, "user_id": 2831700, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5e40a909ecdd6e94a32e120c0044ac9d?s=128&d=identicon&r=PG", "display_name": "IvRRimUm", "link": "https://stackoverflow.com/users/2831700/ivrrimum"}, "edited": false, "score": 0, "creation_date": 1435832378, "post_id": 31171759, "comment_id": 50369486, "body": "Help still needed!!!"}, {"owner": {"reputation": 1506, "user_id": 2831700, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5e40a909ecdd6e94a32e120c0044ac9d?s=128&d=identicon&r=PG", "display_name": "IvRRimUm", "link": "https://stackoverflow.com/users/2831700/ivrrimum"}, "edited": false, "score": 0, "creation_date": 1435936799, "post_id": 31171759, "comment_id": 50421766, "body": "Resolved problem by installing databasecleaner!"}, {"owner": {"reputation": 3669, "user_id": 3678689, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/eadd310b0e2a59fe38c4ffbdb2884dfd?s=128&d=identicon&r=PG", "display_name": "Jan Klimo", "link": "https://stackoverflow.com/users/3678689/jan-klimo"}, "edited": false, "score": 0, "creation_date": 1436109739, "post_id": 31171759, "comment_id": 50462384, "body": "One thing to consider is to make this a feature (<code>type: :feature</code>) spec. Controller tests should be testing requests and their respective responses."}], "answers": [{"tags": [], "owner": {"reputation": 1506, "user_id": 2831700, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5e40a909ecdd6e94a32e120c0044ac9d?s=128&d=identicon&r=PG", "display_name": "IvRRimUm", "link": "https://stackoverflow.com/users/2831700/ivrrimum"}, "is_accepted": true, "score": 0, "last_activity_date": 1452770975, "creation_date": 1452770975, "answer_id": 34788491, "question_id": 31171759, "link": "https://stackoverflow.com/questions/31171759/factorygirl-not-creating-data-in-view/34788491#34788491", "title": "FactoryGirl not creating data in view", "body": "<p>Resolved the problem by installing databsecleaner! Member data now shows in controller and views!!!</p>\n"}], "owner": {"reputation": 1506, "user_id": 2831700, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5e40a909ecdd6e94a32e120c0044ac9d?s=128&d=identicon&r=PG", "display_name": "IvRRimUm", "link": "https://stackoverflow.com/users/2831700/ivrrimum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 34788491, "answer_count": 1, "score": 0, "last_activity_date": 1452770975, "creation_date": 1435785076, "last_edit_date": 1435785567, "question_id": 31171759, "link": "https://stackoverflow.com/questions/31171759/factorygirl-not-creating-data-in-view", "title": "FactoryGirl not creating data in view", "body": "<p>So this is my Factory:</p>\n\n<pre><code>    FactoryGirl.define do\n     factory :member do       \n       email 'admin@admin.com'\n       password 'rootroot'    \n       first_name 'Rinholds'  \n       last_name 'Jordan'     \n       expiration Time.local(2015, 6, 21, 15, 13, 0)\n       start_date Time.local(2015, 4, 21, 15, 13, 0)\n       role 2                 \n     end\n  end\n</code></pre>\n\n<p>This is my spec:</p>\n\n<pre><code>   require 'rails_helper'\n\n   describe DashboardController, type: :controller do\n\n     it 'should display chart', js: true do\n       member = create(:member)  \n       member.save!           \n       member.confirm         \n\n       binding.pry            \n       visit '/'              \n\n     end\n   end \n</code></pre>\n\n<p>This is my root_path():</p>\n\n<pre><code>     body\n       = yield\n     = Member.first.email\n~            \n</code></pre>\n\n<p>When i run spec it returns undefined method `email' for nil:NilClass in view.</p>\n\n<p>When i put binding pry in view, and run Member.all it returns empty array!</p>\n\n<p>How is that posible? How to force factorygirl to create real database data?!?</p>\n\n<p>-- edit --\nThis is the controller, althout it doesnt even get there, because of devise login page authorized_member!</p>\n\n<pre><code>   class DashboardController &lt; ApplicationController\n     before_filter :authenticate_member!\n\n     def index\n       day_statistics = Statistics::DayStatistics.new(current_member)\n       @charts = day_statistics.domain_charts\n     end\n   end\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1435784258, "post_id": 31171424, "comment_id": 50350768, "body": "What is the <code>.string</code> method? I&#39;ve never heard of it. There&#39;s <code>.to_s</code> which might be what you&#39;re thinking of. In any case, what you&#39;re doing here is a bit nuts and missing the point. Hint: Try iterating over each character in one string, and putting those characters into another with an inverted offset. Character N goes to 0, N-1 goes to 1, etc."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1435799838, "post_id": 31171424, "comment_id": 50355790, "body": "You may wish to look at the answers <a href=\"http://stackoverflow.com/questions/25575127/reverse-words-of-a-string-in-ruby\">here</a>."}], "answers": [{"comments": [{"owner": {"reputation": 348, "user_id": 5046696, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xi6xI.jpg?s=128&g=1", "display_name": "cpppatrick", "link": "https://stackoverflow.com/users/5046696/cpppatrick"}, "edited": false, "score": 0, "creation_date": 1435789071, "post_id": 31171560, "comment_id": 50352989, "body": "Thank you for the feedback. I&#39;ve been working through the tutorials on codecademy and teamtreehouse.com. But I&#39;m having a little trouble transitioning from the tutorials to real world problem solving."}], "tags": [], "owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "is_accepted": true, "score": 2, "last_activity_date": 1435784737, "last_edit_date": 1435784737, "creation_date": 1435784330, "answer_id": 31171560, "question_id": 31171424, "link": "https://stackoverflow.com/questions/31171424/reversing-a-ruby-string-without-reverse-method/31171560#31171560", "title": "Reversing a Ruby String, without .reverse method", "body": "<p>You need to stop the search for alternative or clever methods, such as altering things so you can <code>.sort</code> them. It is over-thinking the problem, or in some ways avoiding thinking about the core problem you have been asked to solve.</p>\n\n<p>What this test is trying to get you you to do, is understand the internals of a <code>String</code>, and maybe get an appreciation of how <code>String#reverse</code> might be implemented using the most basic string operations.</p>\n\n<p>One of the most basic <code>String</code> operations is to get a specific character from the string. You can get the first character by calling <code>string[0]</code>, and in general you can get the  nth character (zero-indexed) by calling <code>string[n]</code>.</p>\n\n<p>In addition you can combine or build longer strings by adding them together, e.g. if you had <code>a=\"hell\"</code> and <code>b=\"o\"</code>, then <code>c = a + b</code> would store <code>\"hello\"</code> in the variable <code>c</code>.</p>\n\n<p>Using this knowledge, find a way to loop through the original string and use that to build the reverse string, one character at a time. You may also need to look up how to get the length of a string (another basic string method, which you will find in any language's string library), and how to loop through numbers in sequence.</p>\n"}, {"comments": [{"owner": {"reputation": 352, "user_id": 4674730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c94f43181b69564bf2995c684e49ecb4?s=128&d=identicon&r=PG&f=1", "display_name": "askl56", "link": "https://stackoverflow.com/users/4674730/askl56"}, "edited": false, "score": 0, "creation_date": 1498676525, "post_id": 31172501, "comment_id": 76601603, "body": "If I was given this as a response to a coding interview challenge I would reject it on arrival, because the fundamental rule of programming and in particular coding challenges is to be readable for the human and then the computer, not the other way around."}], "tags": [], "owner": {"reputation": 1767, "user_id": 4110406, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/64150ed89bffb39ecd38f1f573afaaed?s=128&d=identicon&r=PG&f=1", "display_name": "Ludwig Schulze", "link": "https://stackoverflow.com/users/4110406/ludwig-schulze"}, "is_accepted": false, "score": -5, "last_activity_date": 1435788388, "creation_date": 1435788388, "answer_id": 31172501, "question_id": 31171424, "link": "https://stackoverflow.com/questions/31171424/reversing-a-ruby-string-without-reverse-method/31172501#31172501", "title": "Reversing a Ruby String, without .reverse method", "body": "<p>Looks like your on a good way, but you could also simply use</p>\n\n<pre><code>def reverse(string)\n  string.bytes.collect{|b|\n    -b+2*string.bytes.inject(0){|sum,add|\n      sum+add\n    }/string.length\n  }.pack'c*'\nend\n</code></pre>\n\n<p>because that transfers the computation into the integer domain instead of characters which is more natural for computers. Of course it passes all the tests :)</p>\n"}, {"tags": [], "owner": {"reputation": 5730, "user_id": 667987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c00249587cb5aa0ceb5765dc811faa7?s=128&d=identicon&r=PG", "display_name": "seph", "link": "https://stackoverflow.com/users/667987/seph"}, "is_accepted": false, "score": 2, "last_activity_date": 1435820353, "creation_date": 1435820353, "answer_id": 31177580, "question_id": 31171424, "link": "https://stackoverflow.com/questions/31171424/reversing-a-ruby-string-without-reverse-method/31177580#31177580", "title": "Reversing a Ruby String, without .reverse method", "body": "<p>You're on the right track converting it to an array.</p>\n\n<pre><code>def reverse(str)\n  str.chars.sort_by.with_index { |_, i| -i }.join\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 5518892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fcebc04d82dc49ff1bf60865c7100ca?s=128&d=identicon&r=PG&f=1", "display_name": "Chetan Barawkar", "link": "https://stackoverflow.com/users/5518892/chetan-barawkar"}, "is_accepted": false, "score": 2, "last_activity_date": 1617614203, "last_edit_date": 1617614203, "creation_date": 1446535748, "answer_id": 33493604, "question_id": 31171424, "link": "https://stackoverflow.com/questions/31171424/reversing-a-ruby-string-without-reverse-method/33493604#33493604", "title": "Reversing a Ruby String, without .reverse method", "body": "<p>Easiest way to reverse a string</p>\n<pre><code>s = &quot;chetan barawkar&quot;\n\nb = s.length - 1\n\nwhile b &gt;= 0\n\n  print  s[b]\n\n  b=b-1\n\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 119, "user_id": 3719779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f2cb3301dfb3f1a6ec4b5dcf7f42d56?s=128&d=identicon&r=PG&f=1", "display_name": "user3719779", "link": "https://stackoverflow.com/users/3719779/user3719779"}, "is_accepted": false, "score": 0, "last_activity_date": 1457091627, "creation_date": 1457091627, "answer_id": 35795137, "question_id": 31171424, "link": "https://stackoverflow.com/questions/31171424/reversing-a-ruby-string-without-reverse-method/35795137#35795137", "title": "Reversing a Ruby String, without .reverse method", "body": "<p>Here is a solution I used to reverse a string without using .reverse method :</p>\n\n<pre><code>@string = \"abcde\"\n@l = @string.length\n@string_reversed = \"\"\ni = @l-1\nwhile i &gt;=0 do\n @string_reversed &lt;&lt; @string[i]\n i = i-1\nend\nreturn @string_reversed\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1021, "user_id": 2662823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JuQWG.png?s=128&g=1", "display_name": "typo", "link": "https://stackoverflow.com/users/2662823/typo"}, "is_accepted": false, "score": 5, "last_activity_date": 1463275054, "creation_date": 1463275054, "answer_id": 37233518, "question_id": 31171424, "link": "https://stackoverflow.com/questions/31171424/reversing-a-ruby-string-without-reverse-method/37233518#37233518", "title": "Reversing a Ruby String, without .reverse method", "body": "<p>This is the simplest one line solution, for reversing a string without using <code>#reverse</code>, that I have come across -     </p>\n\n<pre><code>\"string\".chars.reduce { |x, y| y + x }          # =&gt; \"gnirts\"\n</code></pre>\n\n<p>Additionally, I have never heard of the <code>#string</code> method, I think you might try <code>#to_s</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 6383851, "user_type": "registered", "profile_image": "https://graph.facebook.com/580356938805863/picture?type=large", "display_name": "Jeremiah", "link": "https://stackoverflow.com/users/6383851/jeremiah"}, "is_accepted": false, "score": 0, "last_activity_date": 1469747893, "creation_date": 1469747893, "answer_id": 38648221, "question_id": 31171424, "link": "https://stackoverflow.com/questions/31171424/reversing-a-ruby-string-without-reverse-method/38648221#38648221", "title": "Reversing a Ruby String, without .reverse method", "body": "<p>Thought i'd contribute my rookie version.</p>\n\n<pre><code>def string_reverse(string)\n  new_array = []\n  formatted_string = string.chars\n  new_array &lt;&lt; formatted_string.chars.pop until formatted_string.empty?\n  new_array.join\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 7823935, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6e601baaaf7dcf64a0b4a8252a52043c?s=128&d=identicon&r=PG&f=1", "display_name": "NikB", "link": "https://stackoverflow.com/users/7823935/nikb"}, "is_accepted": false, "score": 0, "last_activity_date": 1491444947, "creation_date": 1491444947, "answer_id": 43244541, "question_id": 31171424, "link": "https://stackoverflow.com/questions/31171424/reversing-a-ruby-string-without-reverse-method/43244541#43244541", "title": "Reversing a Ruby String, without .reverse method", "body": "<p>Lol, I am going through the same challenge. It may not be the elegant solution, but it works and easy to understand:</p>\n\n<pre><code>puts(\"Write is a string that you want to print in reverse\")\n#taking a string from the user\nstring = gets.to_s #getting input and converting into string\ndef reverse(string)\n  i = 0\n  abc = [] # creating empty array\n  while i &lt; string.length\n    abc.unshift(string[i]) #populating empty array in reverse\n    i = i + 1\nend\nreturn abc.join   \nend\nputs (\"In reverse:  \" + reverse(string))\n</code></pre>\n"}], "owner": {"reputation": 348, "user_id": 5046696, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/xi6xI.jpg?s=128&g=1", "display_name": "cpppatrick", "link": "https://stackoverflow.com/users/5046696/cpppatrick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9636, "favorite_count": 0, "accepted_answer_id": 31171560, "answer_count": 8, "score": 0, "last_activity_date": 1617614203, "creation_date": 1435783830, "question_id": 31171424, "link": "https://stackoverflow.com/questions/31171424/reversing-a-ruby-string-without-reverse-method", "title": "Reversing a Ruby String, without .reverse method", "body": "<p>I am working on this coding challenge, and I have found that I am stuck. I thought it was possible to call the .string method on an argument that was passed in, but now I'm not sure. Everything I've found in the Ruby documentation suggests otherwise. I'd really like to figure this out without looking at the solution. Can someone help give me a push in the right direction?</p>\n\n<pre><code># Write a method that will take a string as input, and return a new\n# string with the same letters in reverse order.\n# Don't use String's reverse method; that would be too simple.\n# Difficulty: easy.\n\ndef reverse(string)\nstring_array = []\n\nstring.split()\n\nstring_array.push(string)\n\nstring_array.sort! { |x,y| y &lt;=&gt; x}\nend\n\n# These are tests to check that your code is working. After writing\n# your solution, they should all print true.\n\nputs(\n  'reverse(\"abc\") == \"cba\": ' + (reverse(\"abc\") == \"cba\").to_s\n)\nputs(\n  'reverse(\"a\") == \"a\": ' + (reverse(\"a\") == \"a\").to_s\n)\nputs(\n  'reverse(\"\") == \"\": ' + (reverse(\"\") == \"\").to_s\n)\n</code></pre>\n"}, {"tags": ["ruby", "watir-webdriver"], "comments": [{"owner": {"reputation": 924, "user_id": 783844, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6645a5cc2c5fff12c458b2699c411a11?s=128&d=identicon&r=PG", "display_name": "Egg Vans", "link": "https://stackoverflow.com/users/783844/egg-vans"}, "edited": false, "score": 1, "creation_date": 1435783760, "post_id": 31171283, "comment_id": 50350485, "body": "Hi, you should add any code (i.e. the html) directly into the question"}, {"owner": {"reputation": 15, "user_id": 5071083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f567e632c5aadadb795414071a7067c8?s=128&d=identicon&r=PG&f=1", "display_name": "Civil", "link": "https://stackoverflow.com/users/5071083/civil"}, "reply_to_user": {"reputation": 924, "user_id": 783844, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6645a5cc2c5fff12c458b2699c411a11?s=128&d=identicon&r=PG", "display_name": "Egg Vans", "link": "https://stackoverflow.com/users/783844/egg-vans"}, "edited": false, "score": 0, "creation_date": 1435784157, "post_id": 31171283, "comment_id": 50350710, "body": "@EggVans Sorry about that, I&#39;ll go ahead and do that when I get in tomorrow."}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1435784187, "post_id": 31171283, "comment_id": 50350730, "body": "Is that button visible on the page?  It appears that&#39;s in a &lt;div&gt; tag with style=&quot;display: none;&quot;."}, {"owner": {"reputation": 15, "user_id": 5071083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f567e632c5aadadb795414071a7067c8?s=128&d=identicon&r=PG&f=1", "display_name": "Civil", "link": "https://stackoverflow.com/users/5071083/civil"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1435785453, "post_id": 31171283, "comment_id": 50351448, "body": "@orde Yeah, I&#39;m not sure why it&#39;s saying that. The button is visible and clickable."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1435853365, "post_id": 31171283, "comment_id": 50384228, "body": "Are you sure you actually tried <code>$browser.button(:text =&gt; &#39;Add and Continue&#39;).click</code>? Based on the exception, I am guessing you actually tried <code>$browser.button(:text =&gt; &#39; Add and Continue&#39;).click</code> The space at the start would cause the element to not be located."}], "answers": [{"comments": [{"owner": {"reputation": 1113, "user_id": 1250190, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/42209a6704f712d1eadbc28a4f024c9e?s=128&d=identicon&r=PG", "display_name": "pjd", "link": "https://stackoverflow.com/users/1250190/pjd"}, "edited": false, "score": 0, "creation_date": 1435792640, "post_id": 31171652, "comment_id": 50354106, "body": "I think beyond the image content, the leading and trailing spaces that seem to be a part of the button text (in the image provided by @Civil) are what is preventing this from working. I am betting the regex you suggested above for the button text will take care of this."}], "tags": [], "owner": {"reputation": 7915, "user_id": 8136, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/16b21d7158b1214c552e22c198931d9a?s=128&d=identicon&r=PG", "display_name": "MattMcKnight", "link": "https://stackoverflow.com/users/8136/mattmcknight"}, "is_accepted": true, "score": 0, "last_activity_date": 1435784683, "creation_date": 1435784683, "answer_id": 31171652, "question_id": 31171283, "link": "https://stackoverflow.com/questions/31171283/difficulty-clicking-a-specific-button-in-firefox-using-watir/31171652#31171652", "title": "Difficulty Clicking a Specific Button in Firefox Using Watir", "body": "<p>It is the text property you are looking for, but it is not matching because of the image content which is also in the text of the button. You should probably use a regular expression along the lines of </p>\n\n<pre><code>$browser.button(:text =&gt; /Add and Continue/).click\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 5071083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f567e632c5aadadb795414071a7067c8?s=128&d=identicon&r=PG&f=1", "display_name": "Civil", "link": "https://stackoverflow.com/users/5071083/civil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 31171652, "answer_count": 1, "score": 0, "last_activity_date": 1435784683, "creation_date": 1435783347, "last_edit_date": 1435783970, "question_id": 31171283, "link": "https://stackoverflow.com/questions/31171283/difficulty-clicking-a-specific-button-in-firefox-using-watir", "title": "Difficulty Clicking a Specific Button in Firefox Using Watir", "body": "<p>I've been struggling with this for the past few hours. There's a certain button on a page that I'm trying to get the script to click, but I keep getting <a href=\"http://imgur.com/kgyLwSd&amp;AcLOmFR#1\" rel=\"nofollow\">this error</a>.</p>\n\n<p><a href=\"http://imgur.com/kgyLwSd&amp;AcLOmFR#0\" rel=\"nofollow\">Here is the HTML of the button I'm trying to click on.</a></p>\n\n<p>The code I'm using to try and click on it looks like:</p>\n\n<pre><code>$browser.button(:name =&gt; 'Add and Continue').click\n</code></pre>\n\n<p>For the attribute, I've also tried text. I even tried using the ID but that didn't work, which is for the best since it changes frequently. I've also made sure that it isn't within a frame.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["html", "ruby", "post", "text", "sinatra"], "comments": [{"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1435786515, "post_id": 31171182, "comment_id": 50351941, "body": "When you say save it do you mean to a database? If yes please provide some detail as to the ORM and where you want to save the data to."}, {"owner": {"reputation": 87, "user_id": 3255948, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b8ad45508f231ce3e4b567bb51f933fb?s=128&d=identicon&r=PG&f=1", "display_name": "aeipownu", "link": "https://stackoverflow.com/users/3255948/aeipownu"}, "edited": false, "score": 0, "creation_date": 1435787193, "post_id": 31171182, "comment_id": 50352226, "body": "Yes. I am using active_record to populate the current tables. I basically want to display 14 columns and 4 text fields. Save the 4 text fields to Postgres. Then after for the POST method I want to display all 18 columns as one table.I will edit this into the original post."}], "answers": [{"comments": [{"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1435823021, "post_id": 31174501, "comment_id": 50363174, "body": "It might be useful if you added submitting it to a db"}, {"owner": {"reputation": 228, "user_id": 4926416, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4d070bb169cd682d87532a39be50f5db?s=128&d=identicon&r=PG&f=1", "display_name": "mgtemp", "link": "https://stackoverflow.com/users/4926416/mgtemp"}, "edited": false, "score": 0, "creation_date": 1436373480, "post_id": 31174501, "comment_id": 50587716, "body": "This is exactly what I was looking for. Thank you so much. I&#39;ve been stuck for hours and all I really needed was an array..."}], "tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": true, "score": 4, "last_activity_date": 1435802332, "creation_date": 1435802332, "answer_id": 31174501, "question_id": 31171182, "link": "https://stackoverflow.com/questions/31171182/save-all-user-entries-from-html-text-built-off-a-loop-using-ruby-and-sinatra/31174501#31174501", "title": "Save all user entries from html text built off a loop using ruby and sinatra", "body": "<p>By default when Sinatra (using Rack) parses the form data then if there are any duplicate keys then the last one is used and overwrites the others. However if you use a name that ends with <code>[]</code> then Sinatra instead creates an array containing all the entries with that name.</p>\n\n<p>So in your case you need to change the names of the input elements:</p>\n\n<pre><code>&lt;input type=\"text\" name=\"event_description[]\"&gt;\n</code></pre>\n\n<p>(and similarly for the others). Note the <code>[]</code> at the end of the name.</p>\n\n<p>Now when you submit the form, <code>params['event_description']</code> will be an array containing all the items submitted to the <code>event_description</code> input elements.</p>\n\n<p>The Sinatra/Rack query parsing is actually more sophisticated than this, so you can go further with your form. In your loop you could do something like this:</p>\n\n<pre><code>&lt;td&gt;&lt;input type=\"text\" name=\"events[][description]\"&gt;&lt;/td&gt;\n&lt;td&gt;&lt;input type=\"text\" name=\"events[][type]\"&gt;\n&lt;td&gt;&lt;input type=\"text\" name=\"events[][class]\"&gt;\n&lt;td&gt;&lt;input type=\"text\" name=\"events[][issue_expert]\"&gt;&lt;/td&gt;\n</code></pre>\n\n<p>Now when you submit the form and it is parsed, <code>params['events']</code> will contain an array of hashes, each with keys <code>description</code>, <code>type</code>, <code>class</code> and <code>issue_expert</code>. You can then iterate over this array and process the data as appropriate. You may want to add a hidden <code>id</code> input with each hash to make sure each set of data is associated with the correct record (it might look something like <code>&lt;input type=hidden name=\"events[][id]\" value=\"&lt;% event.id %&gt;\"&gt;</code>).</p>\n"}], "owner": {"reputation": 228, "user_id": 4926416, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4d070bb169cd682d87532a39be50f5db?s=128&d=identicon&r=PG&f=1", "display_name": "mgtemp", "link": "https://stackoverflow.com/users/4926416/mgtemp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 1, "accepted_answer_id": 31174501, "answer_count": 1, "score": 2, "last_activity_date": 1435802332, "creation_date": 1435783016, "question_id": 31171182, "link": "https://stackoverflow.com/questions/31171182/save-all-user-entries-from-html-text-built-off-a-loop-using-ruby-and-sinatra", "title": "Save all user entries from html text built off a loop using ruby and sinatra", "body": "<p>I am creating a web page that displays a table. It also has four columns at the end of each record that are text fields where the user can enter data. When the user hits the submit button at the bottom I want to save all the data in all the text fields and add it to my table. How can I save the data for all the text fields? Here is my code.</p>\n\n<pre><code>&lt;h1&gt;Testing Table&lt;/h1&gt;\n&lt;form action=\"/table/\" method=\"POST\"&gt;\n&lt;table&gt;\n&lt;thead&gt;\n&lt;tr&gt;\n &lt;% event_column.each do |header| %&gt;\n    &lt;th&gt;\n      &lt;%= header %&gt;\n    &lt;/th&gt;\n  &lt;% end %&gt;\n&lt;/tr&gt;\n&lt;/thead&gt;\n&lt;tbody&gt;\n&lt;% events.each do |event| %&gt;\n  &lt;tr&gt;\n  &lt;% event = event.first(14) %&gt;\n  &lt;% event.each do |key, value| %&gt;\n    &lt;td&gt;\n    &lt;%= value %&gt;\n    &lt;/td&gt;\n  &lt;% end %&gt;\n    &lt;td&gt;&lt;input type=\"text\" name=\"event_description\"&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;input type=\"text\" name=\"event_type\"&gt;\n    &lt;td&gt;&lt;input type=\"text\" name=\"event_class\"&gt;\n    &lt;td&gt;&lt;input type=\"text\" name=\"issue_expert\"&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;% end %&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n&lt;br/&gt;\n&lt;input type=\"submit\"&gt;\n&lt;% ActiveRecord::Base.clear_active_connections! %&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>I understand my issue. Since I am using the same variable to write all of the user entered columns when I try displaying in my POST method</p>\n\n<pre><code>&lt;td&gt;&lt;%= params[:event_description] %&gt;&lt;/td&gt;\n</code></pre>\n\n<p>It will only display the last value entered because it's being reused. Is there anyway that when I hit submit I can loop through all the html text fields and save all the data? I'm pretty stuck here and I've searched all around. I understand how to save the text entry for the last row but, I don't know how to save all the text entries. I'm new to sinatra so I must be doing something fundamentally wrong.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1435782402, "post_id": 31170830, "comment_id": 50349755, "body": "<code>How can I style&#47;format the output from this? </code> - what is this in this sentence? This form? This input? This page? What do you understand by output?"}, {"owner": {"reputation": 3290, "user_id": 1214951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/313ce4fdeb46839023cc31357b72710b?s=128&d=identicon&r=PG", "display_name": "chad_", "link": "https://stackoverflow.com/users/1214951/chad"}, "edited": false, "score": 0, "creation_date": 1435782596, "post_id": 31170830, "comment_id": 50349868, "body": "@BroiSatse- I believe he&#39;s wondering what to edit to change the page that is displayed after <code>:create</code> is done, which would be the <code>show</code> template typically (as I&#39;m sure you know)."}], "answers": [{"tags": [], "owner": {"reputation": 3290, "user_id": 1214951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/313ce4fdeb46839023cc31357b72710b?s=128&d=identicon&r=PG", "display_name": "chad_", "link": "https://stackoverflow.com/users/1214951/chad"}, "is_accepted": false, "score": 0, "last_activity_date": 1435782536, "last_edit_date": 1435782536, "creation_date": 1435782236, "answer_id": 31170965, "question_id": 31170830, "link": "https://stackoverflow.com/questions/31170830/styling-results-from-a-text-field-in-rails/31170965#31170965", "title": "styling results from a text field in rails", "body": "<p>After submitting the form, the rails default is to load the model's <code>show.html.erb</code> template.  Edit that template to change it structurally or apply CSS to the elements therein.</p>\n"}], "owner": {"reputation": 115, "user_id": 4159752, "user_type": "registered", "accept_rate": 21, "profile_image": "https://graph.facebook.com/711771207/picture?type=large", "display_name": "Mark Shakespeare", "link": "https://stackoverflow.com/users/4159752/mark-shakespeare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435782536, "creation_date": 1435781775, "question_id": 31170830, "link": "https://stackoverflow.com/questions/31170830/styling-results-from-a-text-field-in-rails", "title": "styling results from a text field in rails", "body": "<p>I am building a simple Rails blog, using a text field to write posts like this:</p>\n\n<pre><code>    &lt;p&gt;\n        &lt;%= f.label :content %&gt;\n        &lt;%= f.text_field :content, :size=&gt;\"50\" %&gt;\n    &lt;/p&gt;\n</code></pre>\n\n<p>How can I style/format the output from this? When i submit a post and look at the developer tools in Chrome, the text is not added to a paragraph element so I don't know how to style it..</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "date", "activerecord"], "comments": [{"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1435782195, "post_id": 31170790, "comment_id": 50349656, "body": "Have you changed the existing migration? If so and if this is the latest migration run <code>rake db:migrate:redo</code>"}, {"owner": {"reputation": 122, "user_id": 3903587, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d566c0db7b1dc8c13d921fb36d18545f?s=128&d=identicon&r=PG&f=1", "display_name": "j.sanghoon", "link": "https://stackoverflow.com/users/3903587/j-sanghoon"}, "reply_to_user": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1435782430, "post_id": 31170790, "comment_id": 50349779, "body": "@BroiSatse Thank you so much! Every time I updated my active record, I&#39;ve been just doing &quot;rake db:migrate&quot; on top of existing ones. This worked. Thank you so much!"}], "owner": {"reputation": 122, "user_id": 3903587, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d566c0db7b1dc8c13d921fb36d18545f?s=128&d=identicon&r=PG&f=1", "display_name": "j.sanghoon", "link": "https://stackoverflow.com/users/3903587/j-sanghoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1435781637, "creation_date": 1435781637, "question_id": 31170790, "link": "https://stackoverflow.com/questions/31170790/active-record-date-and-nationality-function-giving-me-error-undefined-meth", "title": "Active record &quot;date&quot; and &quot;nationality&quot; function giving me error. (Undefined method)", "body": "<p>I am trying to create a profile page where I can input \"born_on\". It will be using the </p>\n\n<pre><code>class CreateWineMakers &lt; ActiveRecord::Migration\n  def change\n    create_table :wine_makers do |t|\n      t.string :name \n      t.date :born_on\n      t.text :nationality\n      t.text :profile \n      t.text :wine \n      t.integer :wine_list_id\n      t.timestamps\n    end\n\n     add_index :wine_makers, :wine_list_id\n    end\n end\n</code></pre>\n\n<p>Here is my view file. </p>\n\n<pre><code>&lt;%= simple_form_for WineMaker.new do |f| %&gt;\n     &lt;%= f.input :name %&gt;\n     &lt;%= f.input :profile %&gt;\n     &lt;%= f.input :wine %&gt;\n     &lt;%= f.input :born_on %&gt;\n     &lt;br/&gt;\n     &lt;%= f.submit \"Create\", :class =&gt; 'btn btn-primary' %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The \"born_on\" is giving me error saying the method is not defined. I am confused since all other inputs are working except \"born_on\" and \"nationality\". Before, my \"born_on\" was named \"birth_date\", and I thought the naming convention was wrong and changed it to \"born_on\". Here is the controller. </p>\n\n<pre><code>class WineMakersController &lt; ApplicationController\n\n    def new\n      @wine_maker = WineMaker.new\n    end\n\n    def create\n      @wine_maker = WineMaker.create(wine_maker_params)\n      redirect_to wine_list_path(@wine_list)\n    end\n\n\n    def show\n    end\n\n    private\n\n    def wine_maker_params\n    params.require(:wine_maker).permit(:name, :born_on, :nationality,   :profile, :wine )\n    end\nend\n</code></pre>\n\n<p>This seems like such an easy question that I couldn't find similar problems..</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "dropbox"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 4341989, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-7ymXUbMqozk/AAAAAAAAAAI/AAAAAAAAABU/zKWYdoDo1cE/photo.jpg?sz=128", "display_name": "tshes", "link": "https://stackoverflow.com/users/4341989/tshes"}, "edited": false, "score": 0, "creation_date": 1435783692, "post_id": 31171353, "comment_id": 50350448, "body": "Oh, I didn&#39;t change that part. In my real code i had ACCESS_TYPE= dropbox. And it still doesn&#39;t work."}, {"owner": {"reputation": 316, "user_id": 2113691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc8cd74b189db41af729f48d0fd30257?s=128&d=identicon&r=PG", "display_name": "Landon Alder", "link": "https://stackoverflow.com/users/2113691/landon-alder"}, "reply_to_user": {"reputation": 31, "user_id": 4341989, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-7ymXUbMqozk/AAAAAAAAAAI/AAAAAAAAABU/zKWYdoDo1cE/photo.jpg?sz=128", "display_name": "tshes", "link": "https://stackoverflow.com/users/4341989/tshes"}, "edited": false, "score": 0, "creation_date": 1435784550, "post_id": 31171353, "comment_id": 50350932, "body": "Maybe it&#39;s the space between ACCESS_TYPE= and dropbox?"}, {"owner": {"reputation": 31, "user_id": 4341989, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-7ymXUbMqozk/AAAAAAAAAAI/AAAAAAAAABU/zKWYdoDo1cE/photo.jpg?sz=128", "display_name": "tshes", "link": "https://stackoverflow.com/users/4341989/tshes"}, "edited": false, "score": 0, "creation_date": 1435798111, "post_id": 31171353, "comment_id": 50355425, "body": "No luck, any other ideas?"}], "tags": [], "owner": {"reputation": 316, "user_id": 2113691, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dc8cd74b189db41af729f48d0fd30257?s=128&d=identicon&r=PG", "display_name": "Landon Alder", "link": "https://stackoverflow.com/users/2113691/landon-alder"}, "is_accepted": false, "score": 1, "last_activity_date": 1435783564, "creation_date": 1435783564, "answer_id": 31171353, "question_id": 31170653, "link": "https://stackoverflow.com/questions/31170653/rake-aborted-dont-know-how-to-build-task-dropboxauthorize/31171353#31171353", "title": "Rake Aborted! &quot;Don&#39;t know how to build task &#39;dropbox:authorize&#39;&quot;", "body": "<p>You have to choose either dropbox or app_folder for the ACCESS_TYPE parameter.</p>\n\n<p><a href=\"https://github.com/robin850/carrierwave-dropbox/issues/4\" rel=\"nofollow\">https://github.com/robin850/carrierwave-dropbox/issues/4</a></p>\n"}], "owner": {"reputation": 31, "user_id": 4341989, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-7ymXUbMqozk/AAAAAAAAAAI/AAAAAAAAABU/zKWYdoDo1cE/photo.jpg?sz=128", "display_name": "tshes", "link": "https://stackoverflow.com/users/4341989/tshes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435783564, "creation_date": 1435781132, "question_id": 31170653, "link": "https://stackoverflow.com/questions/31170653/rake-aborted-dont-know-how-to-build-task-dropboxauthorize", "title": "Rake Aborted! &quot;Don&#39;t know how to build task &#39;dropbox:authorize&#39;&quot;", "body": "<p>Working with rails and my application, and bumped into a problem. I've come to the step where I need to install dropbox, and incorporate it to my code. The first step was to install the dropbox gem, and that happened with ease. Then I had to complete the migration, which was also a success. Then it came to the problem to rake dropbox, which the problem happend.</p>\n\n<p>This is the code that I put into my command line:</p>\n\n<pre><code>rake dropbox:authorize APP_KEY=your_app_key APP_SECRET=your_app_secret ACCESS_TYPE= dropbox | app_folder. \n</code></pre>\n\n<p>Of course I put my key and secret code into the code, but when I pressed enter, I got the following error.</p>\n\n<p>rake aborted!\nDon't know how to build task 'dropbox:authorize'\n</p>\n"}, {"tags": ["ruby", "version-control", "gem"], "answers": [{"tags": [], "owner": {"reputation": 9786, "user_id": 485864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34b46a9a4723bdbc6e1fdcf71b08517?s=128&d=identicon&r=PG", "display_name": "vgoff", "link": "https://stackoverflow.com/users/485864/vgoff"}, "is_accepted": false, "score": 0, "last_activity_date": 1435797245, "last_edit_date": 1435797245, "creation_date": 1435796852, "answer_id": 31173790, "question_id": 31170650, "link": "https://stackoverflow.com/questions/31170650/handle-gems-and-their-versions-for-one-file-scripts/31173790#31173790", "title": "Handle gems and their versions for one file scripts", "body": "<p>If it 'looks excessive' then perhaps it is? This is purely subjective. </p>\n\n<p>Using <code>gem 'gem_name', 'version.number.s'</code> is the way to do so, as I imagine you are doing from your words.</p>\n\n<p>Once you get to the point where you need more than one file, because the organization demands it, do so.  Don't fight something that is naturally occurring without a reason.</p>\n\n<p>For example, for a test that only runs when called directly in this \"small script\" for whatever measurement of small qualifies as that limitation...</p>\n\n<pre><code>def hello(name_ = 'World', name: name_)\n  \"Hello #{name}\"\nend\n\nif __FILE__ == $PROGRAM_NAME\n  gem 'minitest', '5.7.0'\n  require 'minitest/autorun'\n\n  describe hello do\n    it 'must return \"Hello World:\"' do\n      assert_equal hello, 'Hello World!'\n    end\n  end\nend\n</code></pre>\n\n<p>Having the gem specified there as is, does not require a <code>Gemfile.lock</code> (it isn't a gem, and doesn't include or have a <code>Gemfile</code>) only requires that I have that gem available / installed.</p>\n\n<p>It will complain if that gem is not available.</p>\n"}], "owner": {"reputation": 20852, "user_id": 96823, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8ae840d2ecaafde387aa2c636bbe5c4c?s=128&d=identicon&r=PG", "display_name": "tig", "link": "https://stackoverflow.com/users/96823/tig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435797245, "creation_date": 1435781117, "question_id": 31170650, "link": "https://stackoverflow.com/questions/31170650/handle-gems-and-their-versions-for-one-file-scripts", "title": "Handle gems and their versions for one file scripts", "body": "<p>I have a directory full of scripts mostly written in ruby. Most of them have only <code>require</code> calls, so after some time it is not always clear which gem provides the file or if gem changes \u2014 the script can become incompatible.</p>\n\n<p>I can add <code>gem</code> calls specifying versions, but if combined with <code>require</code> calls will look excessive for small scripts.</p>\n\n<p>Is there something like inline bundler without lock file, so only specifying gem versions, handling version resolution, automatic requiring and everything inline in ruby script?</p>\n"}, {"tags": ["ruby", "elasticsearch", "elasticsearch-api"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4398812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7ab60bf715c93e2fac9e2b06e9ae1e?s=128&d=identicon&r=PG&f=1", "display_name": "jkazuop", "link": "https://stackoverflow.com/users/4398812/jkazuop"}, "is_accepted": true, "score": 0, "last_activity_date": 1435783838, "creation_date": 1435783838, "answer_id": 31171429, "question_id": 31170494, "link": "https://stackoverflow.com/questions/31170494/ruby-elasticsearch-api-returning-the-latest-entry-to-an-index/31171429#31171429", "title": "Ruby Elasticsearch API: Returning the latest entry to an index", "body": "<p>I finally found the correct syntax:</p>\n\n<pre><code>json = client.search index: 'index',\n                    type: 'type',\n                    body: { query: { match_all: {} }, size: 1, sort: [ { _timestamp: { order: \"desc\"} } ] }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4398812, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df7ab60bf715c93e2fac9e2b06e9ae1e?s=128&d=identicon&r=PG&f=1", "display_name": "jkazuop", "link": "https://stackoverflow.com/users/4398812/jkazuop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 346, "favorite_count": 0, "accepted_answer_id": 31171429, "answer_count": 1, "score": 0, "last_activity_date": 1532335195, "creation_date": 1435780518, "last_edit_date": 1532335195, "question_id": 31170494, "link": "https://stackoverflow.com/questions/31170494/ruby-elasticsearch-api-returning-the-latest-entry-to-an-index", "title": "Ruby Elasticsearch API: Returning the latest entry to an index", "body": "<p>I've enabled the \"_timestamp\" field in the index mapping and I successfully retrieved the latest entry to an index using the elasticsearch REST API. The body of the POST request I used looks like this:</p>\n\n<pre><code>{\n    \"query\": {\n        \"match_all\": {}\n    },\n    \"size\": \"1\",\n    \"sort\": [\n        {\n            \"_timestamp\": {\n                \"order\": \"desc\"\n            }\n        }\n    ]\n}\n</code></pre>\n\n<p>Now I'm trying to translate this into the Ruby elasticsearch-api syntax... This is what I have so far:</p>\n\n<pre><code>client = Elasticsearch::Client.new host: 'blahblahblah:9200'\njson = client.search index: 'index', \n                type: 'type',\n                body: { query: { match_all: {} }},\n                sort: '_timestamp',\n                size: 1\n</code></pre>\n\n<p>I've tried several variations on the above code, but nothing seems to return the newest entry. I can't find many examples online using the Ruby elasticsearch API syntax, so any help would be greatly appreciated!</p>\n\n<p>If there is a way to return the latest entry without using the \"_timestamp\" field, I am open to trying that as well!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2683, "user_id": 595152, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/c171c7edd235e33799e747bf8b7d3dbb?s=128&d=identicon&r=PG", "display_name": "Betty St", "link": "https://stackoverflow.com/users/595152/betty-st"}, "edited": false, "score": 1, "creation_date": 1435780209, "post_id": 31170358, "comment_id": 50348527, "body": "do you get an error?"}, {"owner": {"reputation": 4543, "user_id": 3213605, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/a2HS8.jpg?s=128&g=1", "display_name": "PhilVarg", "link": "https://stackoverflow.com/users/3213605/philvarg"}, "edited": false, "score": 1, "creation_date": 1435780228, "post_id": 31170358, "comment_id": 50348540, "body": "can you explain more? what doesnt work about it? is there an error is it a different value than you expect?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1435782050, "post_id": 31170358, "comment_id": 50349569, "body": "What is your question?"}], "answers": [{"tags": [], "owner": {"reputation": 982, "user_id": 3005105, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/NIIPO.jpg?s=128&g=1", "display_name": "Gareth Burrows", "link": "https://stackoverflow.com/users/3005105/gareth-burrows"}, "is_accepted": false, "score": 0, "last_activity_date": 1435780277, "creation_date": 1435780277, "answer_id": 31170427, "question_id": 31170358, "link": "https://stackoverflow.com/questions/31170358/insert-information-from-hash-into-iteration/31170427#31170427", "title": "Insert information from hash into iteration", "body": "<p>This worked</p>\n\n<pre><code>@month_multipliers[month.to_sym]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": false, "score": 1, "last_activity_date": 1435780287, "creation_date": 1435780287, "answer_id": 31170434, "question_id": 31170358, "link": "https://stackoverflow.com/questions/31170358/insert-information-from-hash-into-iteration/31170434#31170434", "title": "Insert information from hash into iteration", "body": "<p><code>month_multipliers</code> has keys in <code>Symbol</code> objects, but <code>months</code> has keys as <code>String</code> objects. Use either all <code>Symbol</code> or <code>String</code> objects or convert keys to the correct object before retrieving the values from the hash.</p>\n"}, {"tags": [], "owner": {"reputation": 4543, "user_id": 3213605, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/a2HS8.jpg?s=128&g=1", "display_name": "PhilVarg", "link": "https://stackoverflow.com/users/3213605/philvarg"}, "is_accepted": false, "score": 0, "last_activity_date": 1435780363, "creation_date": 1435780363, "answer_id": 31170448, "question_id": 31170358, "link": "https://stackoverflow.com/questions/31170358/insert-information-from-hash-into-iteration/31170448#31170448", "title": "Insert information from hash into iteration", "body": "<p>I see your issue, youre using symbolic keys with string values. you can directly iterate over the month_multiplier for simplicity</p>\n\n<pre><code>month_multipliers.each_pair do |month, multiplier|\n  instance_variable_set :\"@#{month}_income\", (monthly_new_account_income * multiplier) + previous_years_monthly_income\nend\n</code></pre>\n"}], "owner": {"reputation": 982, "user_id": 3005105, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/NIIPO.jpg?s=128&g=1", "display_name": "Gareth Burrows", "link": "https://stackoverflow.com/users/3005105/gareth-burrows"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1435782020, "creation_date": 1435780006, "last_edit_date": 1435782020, "question_id": 31170358, "link": "https://stackoverflow.com/questions/31170358/insert-information-from-hash-into-iteration", "title": "Insert information from hash into iteration", "body": "<p>I am trying to insert information from a hash <code>monthly_multipliers</code> into an iterator.</p>\n\n<pre><code>month_multipliers = { april: 1, may: 2, june: 3, july: 4, august: 5, september: 6, october: 7, november: 8, december: 9, january: 10, february: 11, march: 12}\nmonths = ['april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december', 'january', 'february', 'march']\n</code></pre>\n\n<p>I then iterate through each month, and need to inject the monthly multiplier for each month, so june would be 3 august 5 etc.</p>\n\n<pre><code>months.each do |month|\n  instance_variable_set :\"@#{month}_income\", (monthly_new_account_income * month_multipliers[month]) + previous_years_monthly_income\nend\n</code></pre>\n\n<p>This bit doesn't work</p>\n\n<pre><code> month_multipliers[month])\n</code></pre>\n\n<p>I tried sending and getting an instance variable, but cannot get the format right.</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 9052, "user_id": 834239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/smpej.jpg?s=128&g=1", "display_name": "Amit Pal", "link": "https://stackoverflow.com/users/834239/amit-pal"}, "is_accepted": true, "score": 1, "last_activity_date": 1435781706, "creation_date": 1435781706, "answer_id": 31170805, "question_id": 31170344, "link": "https://stackoverflow.com/questions/31170344/how-to-call-javasscript-tag-in-rails/31170805#31170805", "title": "How to call javasscript_tag in rails?", "body": "<p>Try this:</p>\n\n<pre><code>&lt;% javascript_tag do %&gt;\n $(function() {\n setInterval(function(){ $.get(\"/posts/&lt;%= @post.id   %&gt;\");   }, 5000);\n });\n&lt;% end %&gt;\n</code></pre>\n\n<p>change to </p>\n\n<pre><code>&lt;script&gt;\n $(function() {\n setInterval(function(){ $.get(\"/posts/&lt;%= @post.id   %&gt;\");   }, 5000);\n });\n&lt;/script&gt;\n</code></pre>\n\n<p>It should work.</p>\n"}], "owner": {"reputation": 185, "user_id": 5063221, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/673d3ab6954e1d154bd69ee7a17baceb?s=128&d=identicon&r=PG&f=1", "display_name": "komal sharma", "link": "https://stackoverflow.com/users/5063221/komal-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 15, "favorite_count": 0, "accepted_answer_id": 31170805, "answer_count": 1, "score": 1, "last_activity_date": 1435781706, "creation_date": 1435779954, "question_id": 31170344, "link": "https://stackoverflow.com/questions/31170344/how-to-call-javasscript-tag-in-rails", "title": "How to call javasscript_tag in rails?", "body": "<p>I followed the each step of above question and here are my changes:</p>\n\n<pre><code>In show.html.erb (http://localhost:3000/posts/24)\n\n&lt;% javascript_tag do %&gt;\n $(function() {\n   setInterval(function(){ $.get(\"/posts/&lt;%= @post.id   %&gt;\");   }, 5000);\n    });\n&lt;% end %&gt;\n\n&lt;span id=\"changed_data\"&gt;\n It should be change after every 5 seconds\n&lt;/span&gt;\n</code></pre>\n\n<h1>controller class</h1>\n\n<pre><code>def show\n @post = Post.find(params[:id])\n respond_to do |format|\n   format.js\n   format.html\n end\n</code></pre>\n\n<p>end</p>\n\n<h1>Added a new file</h1>\n\n<pre><code>app/views/posts/show.js.erb\n$(\"#changed_data\").html(\"&lt;h2&gt; Changed &lt;/h2&gt;\");\n</code></pre>\n\n<p>But it sounds like that <code>javascript_tag</code> is not calling <code>jquery</code> method. What am I doing wrong here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "iterator"], "comments": [{"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1435780567, "post_id": 31170237, "comment_id": 50348731, "body": "where are ordered and between defined? is this in a scope?"}, {"owner": {"reputation": 269, "user_id": 3956916, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d8cf7cb0fe1b4286665943c2e00f940e?s=128&d=identicon&r=PG&f=1", "display_name": "Bebbs", "link": "https://stackoverflow.com/users/3956916/bebbs"}, "reply_to_user": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1435780787, "post_id": 31170237, "comment_id": 50348868, "body": "Yes, I can edit them in to the question, but I didn&#39;t think they were pertinent?"}, {"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 1, "creation_date": 1435783520, "post_id": 31170237, "comment_id": 50350367, "body": "looks like the @cat.impressions.ordered.between(@from,@to) is okay. what is confusing is the find_by. the way I would do this is that I would just create and array of zeros and after that iterate over the already retrieved values and just set the ones that are not zeros."}], "owner": {"reputation": 269, "user_id": 3956916, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/d8cf7cb0fe1b4286665943c2e00f940e?s=128&d=identicon&r=PG&f=1", "display_name": "Bebbs", "link": "https://stackoverflow.com/users/3956916/bebbs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1435780900, "creation_date": 1435779611, "last_edit_date": 1435780900, "question_id": 31170237, "link": "https://stackoverflow.com/questions/31170237/how-to-reduce-number-of-queries-in-rails", "title": "How to reduce number of queries in Rails", "body": "<p>I have a cats table. A cat <code>has_many</code> impressions, and an impression has  <code>impression_count</code> and <code>impression_day</code> columns - the count is an aggregate of all the people who've viewed a cat on a given day.</p>\n\n<p>What I want to do is to create chart a line chart showing the number of impressions of a cat over however many dates. The JS charting library I'm using takes two arrays: <code>chartValues</code>, and <code>chartLabels</code>.</p>\n\n<p>My controller action to generate those arrays:</p>\n\n<pre><code>def show\n  @cat = Cat.find(params[:id])\n\n  @from = @cat.created_at  \n  @to = Time.now\n\n  dates = (@from.to_date..@to)\n  @chartLabels = dates.to_a.map {|date| date.strftime(\"%b %e\")}\n\n  shown = @cat.impressions.ordered.between(@from,@to)\n  @chartValues = create_stats_for dates, shown\nend\n</code></pre>\n\n<p>The private <code>create_stats_for</code> method is used to shovel a 0 into the values array if no impressions were recorded on that date:</p>\n\n<pre><code>private\n\ndef create_stats_for dates, values\n    stat_values = []\n\n    dates.each do |date|\n      valid_impression = values.find_by impression_day: date\n      if valid_impression\n        stat_values &lt;&lt; valid_impression.impression_count\n      else\n        stat_values &lt;&lt; 0\n      end\n    end\n\n    stat_values\nend\n</code></pre>\n\n<p><strong>The issue</strong></p>\n\n<p>My problem is that this is really inefficient, as I can be iterating over  all the impressions for several years worth of dates, resulting in incredibly slow page loads. There are cases where the impression count can be in the hundreds.</p>\n\n<p>I feel like there's a much more efficient way to achieve the same goals, but I haven't figured it out yet - perhaps loading impressions into memory <strong>once</strong>, and iterating over those?</p>\n\n<p>Any help you could give on this would be much appreciated.</p>\n\n<p><strong>EDIT:</strong> The <code>ordered</code> and <code>between</code> methods (on the Impression model) as requested in the comments:</p>\n\n<pre><code>  def self.ordered\n    order('impression_day asc')\n  end\n\n  def self.between(from,to)\n    where(\"impression_day between ? and ?\", from.to_date, to.to_date)\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgis", "geos", "rgeo"], "answers": [{"tags": [], "owner": {"reputation": 979, "user_id": 695480, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0608ecd2d2f7dbb52cc5f3063ba6db39?s=128&d=identicon&r=PG&f=1", "display_name": "AndHeiberg", "link": "https://stackoverflow.com/users/695480/andheiberg"}, "is_accepted": true, "score": 15, "last_activity_date": 1457048389, "last_edit_date": 1457048389, "creation_date": 1435779000, "answer_id": 31170056, "question_id": 31170055, "link": "https://stackoverflow.com/questions/31170055/activerecord-postgis-adapter-undefined-method-point-for-nilnilclass/31170056#31170056", "title": "activerecord_postgis_adapter: undefined method `point&#39; for nil:NilClass", "body": "<p><a href=\"https://github.com/rgeo/activerecord-postgis-adapter/issues/190\" rel=\"noreferrer\">I created a github issue with a less consise but more detailed explaination.</a></p>\n\n<p>RGeos depends on GEOS. This error is a result of RGeos not being able to load GEOS.</p>\n\n<p>To check if this is the issue:</p>\n\n<pre><code>$ rails c\n&gt; RGeo::Geos.supported?\n=&gt; false\n</code></pre>\n\n<p>To check if you have GEOS installed:</p>\n\n<pre><code>geos-config --version\n</code></pre>\n\n<p>If GEOS isn't installed:</p>\n\n<pre><code>brew install geos\n</code></pre>\n\n<p>If GEOS is installed, fix your installed RGeo:</p>\n\n<pre><code>$ geos-config --prefix\n/usr/local/Cellar/geos/3.5.0\n$ gem install rgeo -- --with-geos-dir=/usr/local/Cellar/geos/3.5.0\n</code></pre>\n\n<p>Should now be installed correctly and your errors fixed. You can check as we did above:</p>\n\n<pre><code>$ rails c\n&gt; RGeo::Geos.supported?\n=&gt; true\n</code></pre>\n\n<p>If this doesn't work uninstall ALL versions of geos and rgeo:</p>\n\n<pre><code>$ brew uninstall geos\n$ gem uninstall rgeo\n</code></pre>\n\n<p>Re-install geos and rgeo as instructed above. You should have gem 'rgeo' in your Gemfile and after you bundle, you should see this as one of the outputs: \"Installing rgeo 0.4.0 with native extensions\"</p>\n"}], "owner": {"reputation": 979, "user_id": 695480, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0608ecd2d2f7dbb52cc5f3063ba6db39?s=128&d=identicon&r=PG&f=1", "display_name": "AndHeiberg", "link": "https://stackoverflow.com/users/695480/andheiberg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1592, "favorite_count": 2, "accepted_answer_id": 31170056, "answer_count": 1, "score": 3, "last_activity_date": 1457048389, "creation_date": 1435779000, "question_id": 31170055, "link": "https://stackoverflow.com/questions/31170055/activerecord-postgis-adapter-undefined-method-point-for-nilnilclass", "title": "activerecord_postgis_adapter: undefined method `point&#39; for nil:NilClass", "body": "<h1>Problem</h1>\n\n<p>90% sure it's a setup error on my end, but I can't do self.factory and trying to access lonlat gives me an exception \"undefined method `point' for nil:NilClass\"</p>\n\n<h1>I can</h1>\n\n<p>Set lonlat using:</p>\n\n<pre><code>mfactory = RGeo::ActiveRecord::SpatialFactoryStore.instance.factory(:geo_type =&gt; 'point')\nself.lonlat = mfactory.point(long, lat)\nself.save\n</code></pre>\n\n<p>This gives me values like <code>0101000020E610000061C3D32B65965DC03657CD7344F64040</code> in the db.</p>\n\n<p>I can't use:</p>\n\n<pre><code>self.lonlat = \"POINT(#{long},#{lat})\"\nself.save\n</code></pre>\n\n<h1>Questions</h1>\n\n<p>Do I need to setup something specific in the model?</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 982, "user_id": 3005105, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/NIIPO.jpg?s=128&g=1", "display_name": "Gareth Burrows", "link": "https://stackoverflow.com/users/3005105/gareth-burrows"}, "edited": false, "score": 0, "creation_date": 1435779608, "post_id": 31170104, "comment_id": 50348207, "body": "perfect. I now need a follow up question :)"}], "tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": false, "score": 2, "last_activity_date": 1435779158, "creation_date": 1435779158, "answer_id": 31170104, "question_id": 31169971, "link": "https://stackoverflow.com/questions/31169971/how-to-set-ruby-instance-names-in-iteration/31170104#31170104", "title": "how to set ruby instance names in iteration", "body": "<p>Use this <a href=\"http://ruby-doc.org/core-2.2.2/Object.html#method-i-instance_variable_set\" rel=\"nofollow\"><code>instance_variable_set</code></a> method.</p>\n\n<pre><code>months.each do |month|\n  instance_variable_set :\"@#{month}\", Month.new(month, 50, 1000)\nend\n</code></pre>\n"}], "owner": {"reputation": 982, "user_id": 3005105, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/NIIPO.jpg?s=128&g=1", "display_name": "Gareth Burrows", "link": "https://stackoverflow.com/users/3005105/gareth-burrows"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "closed_date": 1435780313, "answer_count": 1, "score": 0, "last_activity_date": 1435779158, "creation_date": 1435778728, "question_id": 31169971, "link": "https://stackoverflow.com/questions/31169971/how-to-set-ruby-instance-names-in-iteration", "closed_reason": "Duplicate", "title": "how to set ruby instance names in iteration", "body": "<p>I'm trying work something out in ruby.</p>\n\n<p>I have the months of the year in an array like this.</p>\n\n<pre><code>months = ['april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december', 'january', 'february', 'march']\n</code></pre>\n\n<p>I have then defined a class called Month, which looks like this...</p>\n\n<pre><code>class Month\n  attr_accessor :name, :accounts, :income\n  def initialize(name, accounts, income)  \n    # Instance variables  \n    @name = name  \n    @accounts = accounts\n    @income = income  \n  end  \nend\n</code></pre>\n\n<p>Now I am trying to create 12 instances of the Month class with an iterator like this</p>\n\n<pre><code>months.each do |month|\n  xxx = Month.new(month, 50, 1000)\nend\n</code></pre>\n\n<p>The bit I am struggling with is the xxx. I want this to be the name of the month, so I end up being able to do april.accounts, may.income etc. No matter what I try I cannot seem to figure it out?</p>\n\n<p>Can anyone help?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 10255, "user_id": 1155142, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c680db41999d478ca34d1a77a470e30d?s=128&d=identicon&r=PG", "display_name": "gabrielhilal", "link": "https://stackoverflow.com/users/1155142/gabrielhilal"}, "is_accepted": false, "score": 1, "last_activity_date": 1435778902, "creation_date": 1435778902, "answer_id": 31170030, "question_id": 31169657, "link": "https://stackoverflow.com/questions/31169657/nested-fields-for-rails-4/31170030#31170030", "title": "nested fields_for Rails 4", "body": "<p>You have deep nested attributes, so the <code>foto_product_services_attributes</code> should be inside the <code>product_services_attributes</code>:</p>\n\n<pre><code>params.require(:service).permit(:service_category_id, :title, :description, :product_services_attributes =&gt; [:title, \"_destroy\", :foto_product_services_attributes =&gt; [:avatar]])\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4397139, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-YPzCV1ho0d0/AAAAAAAAAAI/AAAAAAAAA-8/1izhYBzV2E8/photo.jpg?sz=128", "display_name": "Yudians", "link": "https://stackoverflow.com/users/4397139/yudians"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435780225, "creation_date": 1435777629, "last_edit_date": 1435780225, "question_id": 31169657, "link": "https://stackoverflow.com/questions/31169657/nested-fields-for-rails-4", "title": "nested fields_for Rails 4", "body": "<p>i have problem permit about double nested fields_for on rals 4. example relationship:</p>\n\n<pre><code>  Service - &gt; has_many :product_services\n  accepts_nested_attributes_for :product_services, allow_destroy: true\n  Product Service -&gt; has_many :foto_product_services\n  accepts_nested_attributes_for :foto_product_services, allow_destroy: true\n</code></pre>\n\n<p>Service -> new.html.slim</p>\n\n<pre><code>= form_for @service, :html =&gt; {:multipart =&gt; true} do |f|\n  = f.fields_for :product_services do |builder|\n    = render 'field_product', f: builder\n= f.submit\n</code></pre>\n\n<p>Service -> _field_product.html.slim</p>\n\n<pre><code>= f.text_field :price, :class =&gt; 'text_field input-lg width-100'\n= f.fields_for :foto_product_services do |builder|\n    = builder.file_field \"avatar[]\", type: :file, multiple: true\n</code></pre>\n\n<p>Permit Params in my Service Controller</p>\n\n<pre><code>def service_params\n  params.require(:service).permit(:service_category_id, :title, :description, :product_services_attributes =&gt; [:title, \"_destroy\"], :foto_product_services_attributes =&gt; [:avatar])\nend\n</code></pre>\n\n<p>When I click button submit after selected foto product, I get error unpermitted param :foto_product_services_attributes.</p>\n"}, {"tags": ["ruby", "rspec", "voltrb"], "comments": [{"owner": {"reputation": 11801, "user_id": 366051, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/a0ZU0.png?s=128&g=1", "display_name": "Paul Hoffer", "link": "https://stackoverflow.com/users/366051/paul-hoffer"}, "edited": false, "score": 0, "creation_date": 1435778509, "post_id": 31169480, "comment_id": 50347596, "body": "I think you&#39;d need to do <code>report.name.value</code>, but I&#39;m not sure if this is the proper way of getting it."}, {"owner": {"reputation": 177, "user_id": 3579220, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5f6b81754a3c31823dfee76236d6ffe6?s=128&d=identicon&r=PG&f=1", "display_name": "user3579220", "link": "https://stackoverflow.com/users/3579220/user3579220"}, "reply_to_user": {"reputation": 11801, "user_id": 366051, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/a0ZU0.png?s=128&g=1", "display_name": "Paul Hoffer", "link": "https://stackoverflow.com/users/366051/paul-hoffer"}, "edited": false, "score": 0, "creation_date": 1435779575, "post_id": 31169480, "comment_id": 50348183, "body": "Yes that worked! thank you"}], "answers": [{"tags": [], "owner": {"reputation": 177, "user_id": 3579220, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5f6b81754a3c31823dfee76236d6ffe6?s=128&d=identicon&r=PG&f=1", "display_name": "user3579220", "link": "https://stackoverflow.com/users/3579220/user3579220"}, "is_accepted": false, "score": 1, "last_activity_date": 1435779618, "creation_date": 1435779618, "answer_id": 31170241, "question_id": 31169480, "link": "https://stackoverflow.com/questions/31169480/voltrb-rspec-testing-a-method-cant-convert-promise-into-array/31170241#31170241", "title": "VoltRB rspec testing a method can&#39;t convert Promise into Array", "body": "<p>Using report.name.value fixes this issue</p>\n"}, {"tags": [], "owner": {"reputation": 876, "user_id": 368602, "user_type": "registered", "profile_image": "https://graph.facebook.com/144900684/picture?type=large", "display_name": "Ryan", "link": "https://stackoverflow.com/users/368602/ryan"}, "is_accepted": false, "score": 1, "last_activity_date": 1435783963, "creation_date": 1435783963, "answer_id": 31171461, "question_id": 31169480, "link": "https://stackoverflow.com/questions/31169480/voltrb-rspec-testing-a-method-cant-convert-promise-into-array/31171461#31171461", "title": "VoltRB rspec testing a method can&#39;t convert Promise into Array", "body": "<p>When running code on the server, calls to store return a promise that is already resolved.  But on the client the promise won't be resolved yet.  Someone (forget the name atm) is working on adding support to promise directly into opal-rspec, but at the moment a returned promise won't wait for opal-rspec.  The plan is once thats ready we'll add more tools to volt to make it easier for developers to test in both MRI and opal (like we do with Volt itself).</p>\n\n<p>You can call .value on a promise to get back its value, but only if the promise has resolved.  The safer way to do it is to use a .then block:</p>\n\n<pre><code>report.name.then do |name|\n  expect(name).to eq('Bob')\nend\n</code></pre>\n\n<p>Hopefully that helps.</p>\n"}], "owner": {"reputation": 177, "user_id": 3579220, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5f6b81754a3c31823dfee76236d6ffe6?s=128&d=identicon&r=PG&f=1", "display_name": "user3579220", "link": "https://stackoverflow.com/users/3579220/user3579220"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1435783963, "creation_date": 1435777069, "question_id": 31169480, "link": "https://stackoverflow.com/questions/31169480/voltrb-rspec-testing-a-method-cant-convert-promise-into-array", "title": "VoltRB rspec testing a method can&#39;t convert Promise into Array", "body": "<p>I am trying to do some rspec unit tests on a method in my model. The method returns a promise, and when resolved, the name of the person. The method is not the problem as I know that it works correctly. Here is my test code:</p>\n\n<pre><code>it 'should return correct name' do\n  report = Report.new(first_name: 'Testy', last_name: 'Testerson')\n  report.save!\n  expect(report.name).to eql('Testy Testerson')\nend\n</code></pre>\n\n<p>When I test it, I get the following error:</p>\n\n<pre><code>Failure/Error: expect(report.name).to eql('Testy Testerson')\nTypeError:\n  can't convert Promise to Array (Promise#to_ary gives Promise)\n</code></pre>\n\n<p>While debugging, I used the following line to inspect the returned value of the method:</p>\n\n<pre><code>puts report.name.inspect\n</code></pre>\n\n<p>And I got the following response:</p>\n\n<pre><code>#&lt;Promise(70319926955580): \"Testy Testerson\"&gt;\n</code></pre>\n\n<p>The error seems to be happening because it tests the promise against the expected value. Why am I getting this error?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1435778488, "post_id": 31169100, "comment_id": 50347581, "body": "You need to clean up this post A LOT just to make it more readable. If possible, use pastebin or gist."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 5035934, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/e8347bedc61cde41ed2a02bb98f321bc?s=128&d=identicon&r=PG", "display_name": "rnpd", "link": "https://stackoverflow.com/users/5035934/rnpd"}, "edited": false, "score": 0, "creation_date": 1435777338, "post_id": 31169401, "comment_id": 50346941, "body": "Hi @onebree thanks for your help! But doing this I get:  undefined method `user&#39; for #&lt;Comment::ActiveRecord_Associations_CollectionProxy:0xaacbd&zwnj;&#8203;b8&gt;"}, {"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "reply_to_user": {"reputation": 103, "user_id": 5035934, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/e8347bedc61cde41ed2a02bb98f321bc?s=128&d=identicon&r=PG", "display_name": "rnpd", "link": "https://stackoverflow.com/users/5035934/rnpd"}, "edited": false, "score": 0, "creation_date": 1435777496, "post_id": 31169401, "comment_id": 50347044, "body": "I can help you out later, if you do not mind. I think the issue lies in the model associations, which you should show instead of the schema, in my opinion"}, {"owner": {"reputation": 103, "user_id": 5035934, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/e8347bedc61cde41ed2a02bb98f321bc?s=128&d=identicon&r=PG", "display_name": "rnpd", "link": "https://stackoverflow.com/users/5035934/rnpd"}, "edited": false, "score": 0, "creation_date": 1435777532, "post_id": 31169401, "comment_id": 50347068, "body": "it&#39;s like the association is broken somewhere but I can get the object itself and I can link to the user. I just can&#39;t access to the users table information from comments"}, {"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "reply_to_user": {"reputation": 103, "user_id": 5035934, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/e8347bedc61cde41ed2a02bb98f321bc?s=128&d=identicon&r=PG", "display_name": "rnpd", "link": "https://stackoverflow.com/users/5035934/rnpd"}, "edited": false, "score": 0, "creation_date": 1435777604, "post_id": 31169401, "comment_id": 50347112, "body": "That is why I said to post the models of the article/comment/user and the associations you name."}, {"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "reply_to_user": {"reputation": 103, "user_id": 5035934, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/e8347bedc61cde41ed2a02bb98f321bc?s=128&d=identicon&r=PG", "display_name": "rnpd", "link": "https://stackoverflow.com/users/5035934/rnpd"}, "edited": false, "score": 0, "creation_date": 1435778568, "post_id": 31169401, "comment_id": 50347622, "body": "@NachPD I will check out everything tonight. I definitely think partials/locals are necessary, but the issue lies in your associations. Are you, by chance, doing this from the Rails Guides tutorial? I suggest following that for further advice while I am gone. Much of your code resembles the guide&#39;s tutorial"}, {"owner": {"reputation": 103, "user_id": 5035934, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/e8347bedc61cde41ed2a02bb98f321bc?s=128&d=identicon&r=PG", "display_name": "rnpd", "link": "https://stackoverflow.com/users/5035934/rnpd"}, "edited": false, "score": 0, "creation_date": 1435779500, "post_id": 31169401, "comment_id": 50348128, "body": "Thanks @onebree I&#39;ve read the rails guide and Michael Hartl&#39;s book and other few books and my code it&#39;s a remix of them. I&#39;m agree that we&#39;re facing an association issue but I can&#39;t see where I&#39;m wrong, an object can belong to more than one object and I wrote it. You&#39;re being very helpful , thanks!!"}, {"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "reply_to_user": {"reputation": 103, "user_id": 5035934, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/e8347bedc61cde41ed2a02bb98f321bc?s=128&d=identicon&r=PG", "display_name": "rnpd", "link": "https://stackoverflow.com/users/5035934/rnpd"}, "edited": false, "score": 0, "creation_date": 1435842599, "post_id": 31169401, "comment_id": 50376399, "body": "@NachPD I updated my answer to help with associations"}], "tags": [], "owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "is_accepted": false, "score": 1, "last_activity_date": 1435842570, "last_edit_date": 1592644375, "creation_date": 1435776754, "answer_id": 31169401, "question_id": 31169100, "link": "https://stackoverflow.com/questions/31169100/undefined-method-for-nilnilclass-cant-access-to-users-name-or-any-other-data/31169401#31169401", "title": "Undefined method for nil:NilClass. Can&#39;t access to user&#39;s name or any other data when calling from another controller in ROR", "body": "<h1>STEP ONE: Setting up a partial</h1>\n<p>You can try naming local variables when rendering a partial. For example, in <code>/articles/_show.html.erb</code>, you would enter the following at the (current) rendering line:</p>\n<pre><code>&lt;%= render partial: 'comments/show', locals: {comments: @comments} %&gt;\n</code></pre>\n<p>That will treat the <code>/comments/_show.html.erb</code> as a piece of a page, rather than a complete one. This is ideal for your situation, since the page itself is about articles, but you only want to render <em>a part</em> of the page to show comments.</p>\n<p>The <code>locals</code> hash sets up variables so your partial can render the correct objects, assuming they are named in the current controller. (In this case, the current controller is <code>ArticlesController</code>.) After setting local values, your next step in the comments show page is to replace <code>@comments</code> with simply <code>comments</code>.</p>\n<p>Now, say you have no comments associated with the article. It is the same as <code>Comment.where(article_id: @article.id)</code>, which is an array. Calling <code>each</code> on an empty array will take the first element, pretty much nil, and raise an error. In the app I work on, the best way to handle this is to prepend the code block with the following:</p>\n<pre><code>unless comments.empty?\n</code></pre>\n<p>This makes sense, because why show contents for comments if there are none present? Mind you, if you plan to have a form for entering comments, place that form <em>outside</em> the <code>unless</code> statement, and below the comments show partial.</p>\n<h1>STEP TWO: Editing associations</h1>\n<p>I do not know how you want to set this up exactly, so rather than provide copy/paste code, I will just explain. In most cases, comments do not stand alone, they always belong to something. A comment <em>immediately</em> belongs to an article. In your models, your associations should have a user having a comment <em>through</em> an article. Given the code you provided, I believe the hierarcy is the following:</p>\n<pre><code>User\nArticle\nComment\n</code></pre>\n<p>You need a user to make an article. You need an article to make a comment. While a user is required to make a comment, it is not a direct association. Again, I will not provide you with the exact code, as you may want to handle this slightly differently, but along the same lines.</p>\n"}, {"comments": [{"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1435777443, "post_id": 31169550, "comment_id": 50347009, "body": "This is not preferable, as you want as little logic as possible in the view. You want to make all your queries once in the controller to cache them, as now this query searches through ALL users to find one matching."}, {"owner": {"reputation": 383, "user_id": 1713555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9022c9d0babbad902764f95b6a8d8167?s=128&d=identicon&r=PG", "display_name": "sajinmp", "link": "https://stackoverflow.com/users/1713555/sajinmp"}, "reply_to_user": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1435777699, "post_id": 31169550, "comment_id": 50347170, "body": "True enough but I think this is the easiest way to do it."}], "tags": [], "owner": {"reputation": 383, "user_id": 1713555, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9022c9d0babbad902764f95b6a8d8167?s=128&d=identicon&r=PG", "display_name": "sajinmp", "link": "https://stackoverflow.com/users/1713555/sajinmp"}, "is_accepted": false, "score": 0, "last_activity_date": 1435777301, "creation_date": 1435777301, "answer_id": 31169550, "question_id": 31169100, "link": "https://stackoverflow.com/questions/31169100/undefined-method-for-nilnilclass-cant-access-to-users-name-or-any-other-data/31169550#31169550", "title": "Undefined method for nil:NilClass. Can&#39;t access to user&#39;s name or any other data when calling from another controller in ROR", "body": "<p>The mistake is in the <code>_show.html.erb</code> in the comments view. The comment has only a <strong>user_id</strong> attribute. So if you call <code>@comment.user</code> there is nothing to show since the comment doesn't have <strong>user</strong> attribute. You have to search for the user by the <strong>user_id</strong></p>\n\n<pre><code>&lt;% @comments.each do |c| %&gt;\n  &lt;h1&gt;&lt;%= User.find_by_id(c.user_id).name %&gt;&lt;/h1&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Try this. It would solve the problem.</p>\n"}, {"comments": [{"owner": {"reputation": 103, "user_id": 5035934, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/e8347bedc61cde41ed2a02bb98f321bc?s=128&d=identicon&r=PG", "display_name": "rnpd", "link": "https://stackoverflow.com/users/5035934/rnpd"}, "edited": false, "score": 0, "creation_date": 1435778092, "post_id": 31169575, "comment_id": 50347376, "body": "Thanks @prashant4020 that worked for me! But why we have to access with try?  In the model, I&#39;m posting it after finish this comment, comments belongs to user, so I should have access to the user&#39;s data right? Thanks for your help"}, {"owner": {"reputation": 103, "user_id": 5035934, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/e8347bedc61cde41ed2a02bb98f321bc?s=128&d=identicon&r=PG", "display_name": "rnpd", "link": "https://stackoverflow.com/users/5035934/rnpd"}, "edited": false, "score": 0, "creation_date": 1435783043, "post_id": 31169575, "comment_id": 50350112, "body": "But why is try working and the simple call not? Thanks"}], "tags": [], "owner": {"reputation": 1461, "user_id": 2059047, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5e1327cb46137894ca902795db2111ac?s=128&d=identicon&r=PG", "display_name": "Prashant4224", "link": "https://stackoverflow.com/users/2059047/prashant4224"}, "is_accepted": false, "score": 0, "last_activity_date": 1435777371, "creation_date": 1435777371, "answer_id": 31169575, "question_id": 31169100, "link": "https://stackoverflow.com/questions/31169100/undefined-method-for-nilnilclass-cant-access-to-users-name-or-any-other-data/31169575#31169575", "title": "Undefined method for nil:NilClass. Can&#39;t access to user&#39;s name or any other data when calling from another controller in ROR", "body": "<p>Pass the <code>locals</code> to <code>partial</code></p>\n\n<pre><code>&lt;%= render partial: 'comments/show', locals: { comments: @comments } %&gt;\n</code></pre>\n\n<p>comments/_show.html.erb</p>\n\n<pre><code>&lt;% comments.each do|c| %&gt;\n  &lt;h1&gt;&lt;%= c.try(:user).try(:name) %&gt;&lt;/h1&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 103, "user_id": 5035934, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/e8347bedc61cde41ed2a02bb98f321bc?s=128&d=identicon&r=PG", "display_name": "rnpd", "link": "https://stackoverflow.com/users/5035934/rnpd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 862, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1435842570, "creation_date": 1435775784, "last_edit_date": 1435778340, "question_id": 31169100, "link": "https://stackoverflow.com/questions/31169100/undefined-method-for-nilnilclass-cant-access-to-users-name-or-any-other-data", "title": "Undefined method for nil:NilClass. Can&#39;t access to user&#39;s name or any other data when calling from another controller in ROR", "body": "<p>I'm getting a \"undefined method `name' for nil:NilClass\" when I'm trying to get the users name of a comment from the articles controller. I've tryed to do the same request from the comments controller and it works just fine.</p>\n\n<pre><code>NoMethodError in Articles#show\nShowing    C:/xampp/htdocs/app/views/comments/_show.html.erb where line #2 raised:\n\nundefined method `name' for nil:NilClass\n</code></pre>\n\n<p>I' using ruby -v 2.1.5 and rails -v 4.2.2</p>\n\n<p>Here is my comments controller code:</p>\n\n<pre><code>class CommentsController &lt; ApplicationController\nbefore_filter :logged_in_user, only: [:create, :destroy]\n\ndef show\n    @comments= Comment.all\nend\n\ndef new\n    @comment = Comment.new\nend\n\ndef create\n    @article = Article.find(params[:article_id])\n    @comment = @article.comments.create(comment_params)\n    @comment.user_id = current_user.id\n    if @comment.save\n        flash[:success] = \"Comment created!\"\n        redirect_to article_path(@article)\n    end\n\n\nend \n\nprivate\n    def comment_params\n        params.require(:comment).permit(:body)\n    end\nend\n</code></pre>\n\n<p>And my Articles controller code</p>\n\n<pre><code>class ArticlesController &lt; ApplicationController\nbefore_action :logged_in_user, only: [:create, :destroy]\nbefore_action :correct_user,   only: [:edit, :update, :destroy]\n\n\n\ndef show\n    @article = Article.find(params[:id])\n    @user = @article.user\n    @comments = @article.comments\nend\n\n...\n\nprivate\n\n  def article_params\n      params.require(:article).permit(:title, :lead, :content, :hashtags,  :front_picture, :category_id, :league_id, :front_pic_src)\n  end\nend\n</code></pre>\n\n<p>And the views:</p>\n\n<p>/articles => show</p>\n\n<pre><code>&lt;!-- A little peace of my Articles view where I use \"user\" but under the @article --&gt;\n&lt;h3&gt; Article Autor&lt;/h3&gt;\n    &lt;div id=\"about-info\"&gt;\n        &lt;div class=\"post-profile-img-wrapper\"&gt;\n            &lt;%= link_to gravatar_for(@article.user, size: 50), @article.user %&gt;\n        &lt;/div&gt;\n        &lt;span class=\"user\"&gt;&lt;%= link_to @article.user.name, @article.user %&gt;  &lt;/span&gt;\n    &lt;/div&gt;\n\n&lt;!-- And here I call the render for comments--&gt;\n&lt;section class=\"comments\"&gt;\n    &lt;h2&gt;Comments&lt;/h2&gt;\n      &lt;%= render 'comments/show' %&gt;\n&lt;/section&gt;\n</code></pre>\n\n<p>And the rendered partial is _show.html.erb inside the comments view</p>\n\n<pre><code>&lt;% @comments.each do|c| %&gt;\n &lt;h1&gt;&lt;%= c.user.name %&gt;&lt;/h1&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>What am I doing wrong? I've tryed to create an instance variable in articles for user comments and it doesn't work.</p>\n\n<p>The comments table has a foreing key but it's pointing to the article_id I don't know if this is the best way, but it shouldn't affect the controllers behaviour, right?</p>\n\n<p>UPDATE</p>\n\n<p>Here is my comments schema, it may help</p>\n\n<pre><code>create_table \"comments\", force: :cascade do |t|\nt.text     \"body\",       limit: 65535\nt.integer  \"article_id\", limit: 4\nt.integer  \"user_id\",    limit: 4\nt.datetime \"created_at\",               null: false\nt.datetime \"updated_at\",               null: false\nend\n\nadd_index \"comments\", [\"article_id\"], name: \"index_comments_on_article_id\", using: :btree\nadd_index \"comments\", [\"user_id\"], name: \"index_comments_on_user_id\", using:   :btree\n</code></pre>\n\n<p>UPDATE FOR Models\nComment:</p>\n\n<pre><code>class Comment &lt; ActiveRecord::Base\n  belongs_to :user\n  belongs_to :article  \n  default_scope -&gt; { order(created_at: :desc) }\n  validates :body, presence: true\n\nend\n</code></pre>\n\n<p>Article:</p>\n\n<pre><code>class Article &lt; ActiveRecord::Base\nbelongs_to :category\nbelongs_to :user\nbelongs_to :league\nhas_many :comments, :dependent =&gt; :destroy\ndefault_scope -&gt; { order(created_at: :desc) }\nmount_uploader :front_picture, ArticleFrontUploader\nvalidates :user_id, presence: true\nvalidates :category_id, presence: true\nvalidates :content, presence: true\n#validate  :picture_size\n\nprivate\n\n# Validates the size of an uploaded picture.\n    def picture_size\n        if front_picture.size &gt; 5.megabytes\n          errors.add(:front_picture, \"should be less than 5MB\")\n        end\n    end\n\n\n end\n</code></pre>\n\n<p>Related peace of user</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n has_many :microposts, dependent: :destroy\n has_many :articles, dependent: :destroy\n has_many :comments, dependent: :destroy\n...\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "hash", "savon", "notation"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 5028706, "user_type": "registered", "accept_rate": 10, "profile_image": "https://graph.facebook.com/559579753/picture?type=large", "display_name": "Penelope Aether Mitsubishi", "link": "https://stackoverflow.com/users/5028706/penelope-aether-mitsubishi"}, "edited": false, "score": 0, "creation_date": 1435778051, "post_id": 31169156, "comment_id": 50347351, "body": "Can you explain in more detail please? I dont understand. Where can i find this [] method documented? Also, I saw this code <a href=\"http://stackoverflow.com/questions/4153215/parsing-soap-response-using-savon-response-to-hash-conversion-method\">here</a> where in the last line he does all_data = hres[:response][:asses_data][:date][:amount][:assesReference&zwnj;&#8203;][:year][:cusOffCode&zwnj;&#8203;][:serie][:number][:&zwnj;&#8203;date][:time]. How is that possible there and not in my example?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1435779085, "post_id": 31169156, "comment_id": 50347907, "body": "osman is referring to the the method [Fixnum#[]](<a href=\"http://ruby-doc.org//core-2.2.0/Fixnum.html#method-i-5B-5D\" rel=\"nofollow noreferrer\">ruby-doc.org//core-2.2.0/Fixnum.html#method-i-5B&zwnj;&#8203;-5D</a>)."}, {"owner": {"reputation": 51, "user_id": 5028706, "user_type": "registered", "accept_rate": 10, "profile_image": "https://graph.facebook.com/559579753/picture?type=large", "display_name": "Penelope Aether Mitsubishi", "link": "https://stackoverflow.com/users/5028706/penelope-aether-mitsubishi"}, "edited": false, "score": 0, "creation_date": 1435793220, "post_id": 31169156, "comment_id": 50354242, "body": "thnx for pointing that out, but i still dont understand how its used in a hash from savon that has the same structure as mine, and i cant use that on my hash. I don&#39;t understand what that method does in that context. If someone could explain it I would appreciate it."}], "tags": [], "owner": {"reputation": 1989, "user_id": 1520130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9000383017000de1e1025f4f80d8655?s=128&d=identicon&r=PG", "display_name": "osman", "link": "https://stackoverflow.com/users/1520130/osman"}, "is_accepted": false, "score": 2, "last_activity_date": 1435775963, "creation_date": 1435775963, "answer_id": 31169156, "question_id": 31169027, "link": "https://stackoverflow.com/questions/31169027/display-multiple-hash-keys-notation/31169156#31169156", "title": "Display multiple hash keys notation", "body": "<p><code>hash1[:nod\u00ade1][:node2\u00ad][:node3][:node4]</code> is calling the method [] on</p>\n\n<p><code>hash1[:nod\u00ade1][:node2\u00ad][:node3]</code>. </p>\n\n<p>Its the equivalent of trying <code>1[:node4]</code>. The method  on an integer takes a Fixnum and cannot implicitly convert a symbol (or a string etc) into an integer.</p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 5028706, "user_type": "registered", "accept_rate": 10, "profile_image": "https://graph.facebook.com/559579753/picture?type=large", "display_name": "Penelope Aether Mitsubishi", "link": "https://stackoverflow.com/users/5028706/penelope-aether-mitsubishi"}, "edited": false, "score": 0, "creation_date": 1435826741, "post_id": 31178547, "comment_id": 50365439, "body": "This makes perfect sense, although the reason i&#39;m asking is not because I find them difficult to read, but because  I saw this code here where in the last line he does all_data = hres[:response][:asses_data][:date][:amount][:assesReference&zwnj;&#8203;][:year][:cusOffCode&zwnj;&#8203;\u200c\u200b][:serie][:number]&zwnj;&#8203;[:date][:time]. How is that possible there? It has the same hash structure (xml to nested hash which output similar to my example, or am I wrong?)"}, {"owner": {"reputation": 1066, "user_id": 3215470, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rclPe.jpg?s=128&g=1", "display_name": "Andy Jones", "link": "https://stackoverflow.com/users/3215470/andy-jones"}, "reply_to_user": {"reputation": 51, "user_id": 5028706, "user_type": "registered", "accept_rate": 10, "profile_image": "https://graph.facebook.com/559579753/picture?type=large", "display_name": "Penelope Aether Mitsubishi", "link": "https://stackoverflow.com/users/5028706/penelope-aether-mitsubishi"}, "edited": false, "score": 0, "creation_date": 1435844634, "post_id": 31178547, "comment_id": 50377889, "body": "@PenelopeAetherMitsubishi -- well, I&#39;ve not seen the hash in question, but the logical assumption is that it isn&#39;t the same as the hash in your example. I mean that <code>...[:date]</code> most likely returns a hash which contains a key <code>:time</code>. Or else I don&#39;t see how it could ever work."}], "tags": [], "owner": {"reputation": 1066, "user_id": 3215470, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rclPe.jpg?s=128&g=1", "display_name": "Andy Jones", "link": "https://stackoverflow.com/users/3215470/andy-jones"}, "is_accepted": false, "score": 0, "last_activity_date": 1435823399, "creation_date": 1435823399, "answer_id": 31178547, "question_id": 31169027, "link": "https://stackoverflow.com/questions/31169027/display-multiple-hash-keys-notation/31178547#31178547", "title": "Display multiple hash keys notation", "body": "<p>These multiply-nested hashes are difficult to read, aren't they?  Let's spread your hash out a bit:</p>\n\n<pre><code>hash1= { \n  node1\u00ad: {\n    node\u00ad2: { node3:1\u00ad, node4:2 }\n    }\u00ad\n  }\n</code></pre>\n\n<p>So: The value of node1 is itself a hash. The only entry in that hash, node2, also has a hash for a value.  This hash has two entries: node3 and node4, both of which have integers as values.</p>\n\n<p>So <code>hash1[:node1][:node2]</code> returns <code>{node3:1, node4:2}</code>. And <code>hash1[:node1][:node2][:node3]</code> returns 1.</p>\n\n<p>But <code>hash1[:node1][:node2][:node3][:node4]</code> doesn't make any sense, because 1 isn't a hash, and therefore doesn't have a key <code>:node4</code>.  That key belongs to the <code>:node2</code> hash.</p>\n\n<p>It <em>would</em> make sense if you had <code>hash1= { node1\u00ad: {node\u00ad2: {node3: {node4:2} }}\u00ad}</code>.  But you don't.</p>\n\n<p>Like I said: these nested hashes are a pain to read...</p>\n"}], "owner": {"reputation": 51, "user_id": 5028706, "user_type": "registered", "accept_rate": 10, "profile_image": "https://graph.facebook.com/559579753/picture?type=large", "display_name": "Penelope Aether Mitsubishi", "link": "https://stackoverflow.com/users/5028706/penelope-aether-mitsubishi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1435823399, "creation_date": 1435775509, "question_id": 31169027, "link": "https://stackoverflow.com/questions/31169027/display-multiple-hash-keys-notation", "title": "Display multiple hash keys notation", "body": "<p>Let's say i have a ruby hash in the style of savon soap xml response to hash</p>\n\n<pre><code>   hash1= { node1\u00ad: {node\u00ad2:{node3:1\u00ad,node4:2}}\u00ad}\n</code></pre>\n\n<p>now to display this hash</p>\n\n<pre><code>hash1[:nod\u00ade1][:node2\u00ad][:node3]\n</code></pre>\n\n<p>works and outputs => 1</p>\n\n<pre><code>hash1[:nod\u00ade1][:node2\u00ad][:node4]\n</code></pre>\n\n<p>works and output => 2</p>\n\n<pre><code>hash1[:nod\u00ade1][:node2\u00ad][:node3][:node4]\n</code></pre>\n\n<p>gives TypeError</p>\n\n<p>although i have seen that type of code on savon scripts. What doesnt it work in my situation ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "api", "line-breaks"], "comments": [{"owner": {"reputation": 5315, "user_id": 937377, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/112a961031470b81dde7af7d4d3a03b4?s=128&d=identicon&r=PG", "display_name": "Nathan Arthur", "link": "https://stackoverflow.com/users/937377/nathan-arthur"}, "edited": false, "score": 0, "creation_date": 1435776492, "post_id": 31168348, "comment_id": 50346417, "body": "What old questions did you look at?"}, {"owner": {"reputation": 5315, "user_id": 937377, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/112a961031470b81dde7af7d4d3a03b4?s=128&d=identicon&r=PG", "display_name": "Nathan Arthur", "link": "https://stackoverflow.com/users/937377/nathan-arthur"}, "edited": false, "score": 0, "creation_date": 1435777540, "post_id": 31168348, "comment_id": 50347075, "body": "Good. In the future, linking to things that seem relevant helps people help you."}], "answers": [{"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 2, "last_activity_date": 1435774943, "creation_date": 1435774943, "answer_id": 31168849, "question_id": 31168348, "link": "https://stackoverflow.com/questions/31168348/ruby-json-new-line-break-rendered-format-incorrectly/31168849#31168849", "title": "ruby json new line break rendered format incorrectly", "body": "<p>There are no newlines in this:</p>\n\n<pre><code>:address=&gt; 'Address:\\nshollinganallur,\\nchennai.'\n</code></pre>\n\n<p>The <code>\\n</code> escape sequence doesn't work in single quoted strings so you're just getting the two characters <code>\\</code> and <code>n</code>.</p>\n\n<p>When that's converted to JSON, the <code>\\</code> has a meaning so it has to be escaped with another <code>\\</code>. Hence the output you're seeing.</p>\n\n<p>If you start with:</p>\n\n<pre><code>:address =&gt; \"Address:\\nshollinganallur,\\nchennai.\"\n</code></pre>\n\n<p>then you'll get your newlines all the way through.</p>\n"}], "owner": {"reputation": 1066, "user_id": 4393829, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/nK83a.jpg?s=128&g=1", "display_name": "m2j", "link": "https://stackoverflow.com/users/4393829/m2j"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 924, "favorite_count": 0, "accepted_answer_id": 31168849, "answer_count": 1, "score": 1, "last_activity_date": 1435774943, "creation_date": 1435773105, "question_id": 31168348, "link": "https://stackoverflow.com/questions/31168348/ruby-json-new-line-break-rendered-format-incorrectly", "title": "ruby json new line break rendered format incorrectly", "body": "<p>i tried to <code>rendor json format</code> in ruby on rails</p>\n\n<p><strong>My code:(<code>ruby code</code>)</strong></p>\n\n<pre><code>:address=&gt; 'Address:\\nshollinganallur,\\nchennai.'\n</code></pre>\n\n<p><strong>Rendered json output:</strong></p>\n\n<pre><code>\"address\": \"Address:\\\\nshollinganallur,\\\\nchennai.\"\n</code></pre>\n\n<p>I tried with old questions and answer. but nothing happend. Any help?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "ruby-on-rails-4.2"], "answers": [{"comments": [{"owner": {"reputation": 635, "user_id": 2354830, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cfd4a077611b116084438f512ef24f33?s=128&d=identicon&r=PG", "display_name": "oolong", "link": "https://stackoverflow.com/users/2354830/oolong"}, "edited": false, "score": 0, "creation_date": 1435776037, "post_id": 31168876, "comment_id": 50346154, "body": "Ah this was it. I was on 2.6.1. Updating to 2.8.0 fixed the problem. Thanks!"}], "tags": [], "owner": {"reputation": 1989, "user_id": 1520130, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d9000383017000de1e1025f4f80d8655?s=128&d=identicon&r=PG", "display_name": "osman", "link": "https://stackoverflow.com/users/1520130/osman"}, "is_accepted": true, "score": 0, "last_activity_date": 1435775032, "creation_date": 1435775032, "answer_id": 31168876, "question_id": 31168246, "link": "https://stackoverflow.com/questions/31168246/upgrading-to-rails-4-2-1-causes-validate-uniqueness-of-specs-to-fail/31168876#31168876", "title": "Upgrading to rails 4.2.1 causes validate_uniqueness_of specs to fail", "body": "<p>This</p>\n\n<pre><code>it { is_expected.to validate_uniqueness_of(:code) }\n</code></pre>\n\n<p>is provided from the shoulda matchers gem. Looks like a bug. Updating that gem to 2.80+ stable should fix it. There's some details here</p>\n\n<p><a href=\"https://github.com/thoughtbot/shoulda-matchers/issues/639\" rel=\"nofollow\">https://github.com/thoughtbot/shoulda-matchers/issues/639</a></p>\n"}], "owner": {"reputation": 635, "user_id": 2354830, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cfd4a077611b116084438f512ef24f33?s=128&d=identicon&r=PG", "display_name": "oolong", "link": "https://stackoverflow.com/users/2354830/oolong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 184, "favorite_count": 0, "accepted_answer_id": 31168876, "answer_count": 1, "score": 0, "last_activity_date": 1435775032, "creation_date": 1435772782, "question_id": 31168246, "link": "https://stackoverflow.com/questions/31168246/upgrading-to-rails-4-2-1-causes-validate-uniqueness-of-specs-to-fail", "title": "Upgrading to rails 4.2.1 causes validate_uniqueness_of specs to fail", "body": "<p>I have an application that's currently running on rails 4.1.4, and I'm trying to get it up to 4.2.1</p>\n\n<p>I'm running into problems with some of model specs when it comes to the validates_uniqueness_of declarations</p>\n\n<p>My models:</p>\n\n<pre><code>class PromoCode &lt; ActiveRecord::Base\n  validates_presence_of :expiration_date, :code, :discount\n  validates_uniqueness_of :code\nend\n\nclass Coupon &lt; ActiveRecord::Base\n  validates :code, presence: true, uniqueness: true\nend\n</code></pre>\n\n<p>My specs:</p>\n\n<pre><code>RSpec.describe PromoCode, type: :model do\n  it { is_expected.to validate_presence_of(:expiration_date) }\n  it { is_expected.to validate_presence_of(:code) }\n  it { is_expected.to validate_presence_of(:discount) }\n  it { is_expected.to validate_uniqueness_of(:code) }\nend\n\nRSpec.describe Coupon, type: :model do\n  it { is_expected.to validate_presence_of(:code) }\n  it { is_expected.to validate_uniqueness_of(:code) }\nend\n</code></pre>\n\n<p>The specs for presence are passing fine, but for both models, the specs for uniqueness are failing, and returning:</p>\n\n<pre><code>Failure/Error: it { is_expected.to validate_uniqueness_of(:code) }\n  NoMethodError:\n    undefined method `primary' for #&lt;ActiveRecord::ConnectionAdapters::PostgreSQLColumn:0x007f99176e0f20&gt;\n</code></pre>\n\n<p>What is going on here?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 270444, "user_id": 405017, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2024054e404233ed97b7d9287aff103d?s=128&d=identicon&r=PG", "display_name": "Phrogz", "link": "https://stackoverflow.com/users/405017/phrogz"}, "edited": false, "score": 1, "creation_date": 1436119447, "post_id": 31168189, "comment_id": 50465379, "body": "Note that <code>sub</code> can accept a string argument for literal replacements. So, you can use <code>.sub(&#39;&amp;&#39;,\u2026)</code> in place of <code>.sub(&#47;&amp;&#47;,\u2026)</code> if you like."}], "answers": [{"comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 1, "creation_date": 1435772942, "post_id": 31168227, "comment_id": 50344316, "body": "Already wanted to add the option with <code>puts &quot;milk &amp; honey&quot;.sub(&#47;&amp;&#47;) { &#39;\\&amp;&#39; }</code>, but I see Mark already added it :)"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1435773475, "post_id": 31168227, "comment_id": 50344626, "body": "Anyway, adding it to the answer."}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 1, "last_activity_date": 1435773347, "last_edit_date": 1435773347, "creation_date": 1435772725, "answer_id": 31168227, "question_id": 31168189, "link": "https://stackoverflow.com/questions/31168189/replacing-with-in-ruby-using-stringsub/31168227#31168227", "title": "Replacing &#39;&amp;&#39; with &#39;\\&amp;&#39; in Ruby using String#sub", "body": "<p>Just triple the <code>\\</code>:</p>\n\n<pre><code>puts \"milk &amp; honey\".sub(/&amp;/,'\\\\\\&amp;')\n</code></pre>\n\n<p>See the <a href=\"http://ideone.com/klG2kv\" rel=\"nofollow\">IDEONE demo</a></p>\n\n<p>In Ruby regex, <code>\\&amp;</code> means the entire regex, that is why it should be escaped, and then we need to add the literal <code>\\</code>. More patterns available are listed below:</p>\n\n<pre><code>\\&amp; (the entire regex)\n\\+ (the last group)\n\\` (pre-match string)\n\\' (post-match string)\n\\0 (same as \\&amp;)\n\\1 (first captured group)\n\\2 (second captured group)\n\\\\ (a backslash)\n</code></pre>\n\n<p>Block representation is easier and more human-readable and maintainable:</p>\n\n<pre><code>puts \"milk &amp; honey\".sub(/&amp;/) { '\\&amp;' }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "is_accepted": true, "score": 5, "last_activity_date": 1436125387, "last_edit_date": 1436125387, "creation_date": 1435772807, "answer_id": 31168258, "question_id": 31168189, "link": "https://stackoverflow.com/questions/31168189/replacing-with-in-ruby-using-stringsub/31168258#31168258", "title": "Replacing &#39;&amp;&#39; with &#39;\\&amp;&#39; in Ruby using String#sub", "body": "<p>When you pass a string as the replacement value to <code>String#sub</code> (or <code>String#gsub</code>), it is first scanned for <em>backreferences</em> to the original string. Of particular interest here, the sequence <code>\\&amp;</code> is replaced by whatever part of the string matched the whole regular expression:</p>\n\n<pre><code>puts \"bar\".gsub(/./, '\\\\&amp;\\\\&amp;')   # =&gt; bbaarr\n</code></pre>\n\n<p>Note that, despite appearances, the Ruby string literal <code>'\\\\&amp;\\\\&amp;'</code> represents a string with only four characters, not six:</p>\n\n<pre><code>puts '\\\\&amp;\\\\&amp;'  # =&gt; \\&amp;\\&amp;\n</code></pre>\n\n<p>That's because even single-quoted Ruby strings are subject to backslash-substitution, in order to allow the inclusion of single-quotes inside single-quoted strings. Only <code>'</code> or another backslash itself trigger substitution; a backslash followed by anything else is taken as simply a literal backslash.  That means that you can usually get literal backslashes without doubling them:</p>\n\n<pre><code>    puts '\\&amp;\\&amp;'  # still =&gt; \\&amp;\\&amp;\n</code></pre>\n\n<p>But that's a fiddly detail to rely on, as the next character could change the interpretation. The safest practice is doubling all backslashes that you want to appear literally in a string.</p>\n\n<p>Now in this case, we want to somehow get a literal backslash-ampersand <em>back out</em> of <code>sub</code>. Fortunately, just like the Ruby string parser, <code>sub</code> allows us to use doubled backslashes to indicate that a backslash should be taken as literal instead of as the start of a backreference. We just need to double the backslash in the string that <code>sub</code> receives - which means doubling <em>both</em> of the backslashes in the string's literal representation, taking us to a total of four backslashes in that form:</p>\n\n<pre><code>puts \"milk &amp; honey\".sub(/&amp;/, '\\\\\\\\&amp;')\n</code></pre>\n\n<p>You can get away with only three backslashes here if you like living dangerously. :)</p>\n\n<p>Alternatively, you can avoid all the backslash-counting and use the block form, where the replacement is obtained by calling a block of code instead of parsing a static string. Since the block is free to do any sort of substitution or string munging it wants, its return value is not scanned for backslash substitutions like the string version is:</p>\n\n<pre><code>puts \"milk &amp; honey\".sub(/&amp;/) { '\\\\&amp;' }\n</code></pre>\n\n<p>Or the \"risky\" version:</p>\n\n<pre><code>puts \"milk &amp; honey\".sub(/&amp;/) { '\\&amp;' }\n</code></pre>\n"}], "owner": {"reputation": 1107, "user_id": 44082, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SbrYT.jpg?s=128&g=1", "display_name": "Christian Lindig", "link": "https://stackoverflow.com/users/44082/christian-lindig"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 31168258, "answer_count": 2, "score": 2, "last_activity_date": 1436125387, "creation_date": 1435772600, "last_edit_date": 1435777750, "question_id": 31168189, "link": "https://stackoverflow.com/questions/31168189/replacing-with-in-ruby-using-stringsub", "title": "Replacing &#39;&amp;&#39; with &#39;\\&amp;&#39; in Ruby using String#sub", "body": "<p>I'm trying to replace every <code>&amp;</code> in a string with <code>\\&amp;</code> using <code>String#gsub</code>in Ruby. What I see is confusing me as I was hoping to get <code>milk \\&amp; honey</code>:</p>\n\n<pre><code>irb(main):009:0&gt; puts \"milk &amp; honey\".sub(/&amp;/,'\\ &amp;')\nmilk \\ &amp; honey\n=&gt; nil\nirb(main):010:0&gt; puts \"milk &amp; honey\".sub(/&amp;/,'\\&amp;')\nmilk &amp; honey\n=&gt; nil\nirb(main):011:0&gt; puts \"milk &amp; honey\".sub(/&amp;/,'\\\\&amp;')\nmilk &amp; honey\n=&gt; nil\nirb(main):012:0&gt; \n</code></pre>\n\n<p>This is on Ruby 2.0.0p481 on OS X. (I was using <code>String#sub</code> above but plan to use <code>String#gsub</code> for the general case with more than one <code>&amp;</code> in a string.)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml", "nokogiri"], "comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1435772635, "post_id": 31168155, "comment_id": 50344150, "body": "What if TITLE1 exists in the description?"}, {"owner": {"reputation": 428, "user_id": 781333, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/114bca93aa547e99d2cf0853d61f72c3?s=128&d=identicon&r=PG", "display_name": "Sunny ", "link": "https://stackoverflow.com/users/781333/sunny"}, "reply_to_user": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1435812951, "post_id": 31168155, "comment_id": 50358736, "body": "These are the Predefine tag so they are unique."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1435855245, "post_id": 31168155, "comment_id": 50385325, "body": "We need to see a summarized code example demonstrating the problem. It&#39;s easier for us and better for you if we correct your code than if we write something totally unrelated that doesn&#39;t fit your code. &quot;Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. Questions without a clear problem statement are not useful to other readers. See: <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a>.&quot;"}, {"owner": {"reputation": 428, "user_id": 781333, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/114bca93aa547e99d2cf0853d61f72c3?s=128&d=identicon&r=PG", "display_name": "Sunny ", "link": "https://stackoverflow.com/users/781333/sunny"}, "edited": false, "score": 0, "creation_date": 1436160335, "post_id": 31168155, "comment_id": 50474587, "body": "Agreed. I appreciate the suggestion and It is new learning experience for me. Thanks once again"}], "answers": [{"comments": [{"owner": {"reputation": 428, "user_id": 781333, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/114bca93aa547e99d2cf0853d61f72c3?s=128&d=identicon&r=PG", "display_name": "Sunny ", "link": "https://stackoverflow.com/users/781333/sunny"}, "edited": false, "score": 0, "creation_date": 1436161798, "post_id": 31191324, "comment_id": 50475052, "body": "Thanks for the answer. Just need to know one more thing the template I am using is not a string. It is placed in a file and from there I am reading XML :-                                                                          Nokogiri::XML::Document.parse(File.open(file_path))"}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 1, "last_activity_date": 1435859940, "last_edit_date": 1435859940, "creation_date": 1435859383, "answer_id": 31191324, "question_id": 31168155, "link": "https://stackoverflow.com/questions/31168155/how-to-replace-tag-with-some-value-in-xml-using-nokogiri/31191324#31191324", "title": "How to replace tag with some value in XML using Nokogiri", "body": "<p>The basic idea is you need to search the XML for the <code>&lt;book&gt;</code> tags. For each book found, retrieve the block of values that apply to it. Find the <code>&lt;author&gt;</code> tag and replace its text. Find the <code>&lt;title&gt;</code> tag, and replace its text also. Then go to the next book.</p>\n\n<p>However, in your example, writing code to do that is overkill when a simple <code>gsub</code> will do it in one pass:</p>\n\n<pre><code>xml = '&lt;?xml version=\"1.0\"?&gt;\n&lt;catalog&gt;\n   &lt;book id=\"bk101\"&gt;\n      &lt;author&gt;AUTHOR1&lt;/author&gt;\n      &lt;title&gt;TITLE1&lt;/title&gt;\n      &lt;genre&gt;Computer&lt;/genre&gt;\n      &lt;price&gt;44.95&lt;/price&gt;\n      &lt;publish_date&gt;2000-10-01&lt;/publish_date&gt;\n      &lt;description&gt;An in-depth look at creating applications \n      with XML.&lt;/description&gt;\n   &lt;/book&gt;\n   &lt;book id=\"bk102\"&gt;\n      &lt;author&gt;AUTHOR2&lt;/author&gt;\n      &lt;title&gt;TITLE2&lt;/title&gt;\n      &lt;genre&gt;Fantasy&lt;/genre&gt;\n      &lt;price&gt;5.95&lt;/price&gt;\n      &lt;publish_date&gt;2000-12-16&lt;/publish_date&gt;\n      &lt;description&gt;A former architect battles corporate zombies, \n      an evil sorceress, and her own childhood to become queen \n      of the world.&lt;/description&gt;\n   &lt;/book&gt;\n &lt;/catalog&gt;\n'\n\nvalues = {\n  'TITLE1' =&gt; 'Moby Dick',\n  'AUTHOR1' =&gt; 'Herman Melville',\n  'TITLE2' =&gt; 'Tom Sawyer',\n  'AUTHOR2' =&gt; 'Mark Twain',\n}\n\nputs xml.gsub(Regexp.union(values.keys), values)\n# &gt;&gt; &lt;?xml version=\"1.0\"?&gt;\n# &gt;&gt; &lt;catalog&gt;\n# &gt;&gt;    &lt;book id=\"bk101\"&gt;\n# &gt;&gt;       &lt;author&gt;Herman Melville&lt;/author&gt;\n# &gt;&gt;       &lt;title&gt;Moby Dick&lt;/title&gt;\n# &gt;&gt;       &lt;genre&gt;Computer&lt;/genre&gt;\n# &gt;&gt;       &lt;price&gt;44.95&lt;/price&gt;\n# &gt;&gt;       &lt;publish_date&gt;2000-10-01&lt;/publish_date&gt;\n# &gt;&gt;       &lt;description&gt;An in-depth look at creating applications \n# &gt;&gt;       with XML.&lt;/description&gt;\n# &gt;&gt;    &lt;/book&gt;\n# &gt;&gt;    &lt;book id=\"bk102\"&gt;\n# &gt;&gt;       &lt;author&gt;Mark Twain&lt;/author&gt;\n# &gt;&gt;       &lt;title&gt;Tom Sawyer&lt;/title&gt;\n# &gt;&gt;       &lt;genre&gt;Fantasy&lt;/genre&gt;\n# &gt;&gt;       &lt;price&gt;5.95&lt;/price&gt;\n# &gt;&gt;       &lt;publish_date&gt;2000-12-16&lt;/publish_date&gt;\n# &gt;&gt;       &lt;description&gt;A former architect battles corporate zombies, \n# &gt;&gt;       an evil sorceress, and her own childhood to become queen \n# &gt;&gt;       of the world.&lt;/description&gt;\n# &gt;&gt;    &lt;/book&gt;\n# &gt;&gt;  &lt;/catalog&gt;\n</code></pre>\n\n<p>This use of <a href=\"http://ruby-doc.org/core-2.2.2/String.html#method-i-gsub\" rel=\"nofollow\"><code>gsub</code></a> isn't used often, but I've used it many times when substituting values into templates. Using tags/keys that are guaranteed to be unique in the document are essential, so I often flag them using leading and trailing double underscores. In other words <code>__TITLE1__</code>, <code>__AUTHOR1__</code>, etc.</p>\n\n<p>Doing this you can easily replace the content of the other fields, such as <code>&lt;genre&gt;</code>, <code>&lt;price&gt;</code>, etc.</p>\n\n<p>Name the variables in the form the same as the keys/tags, and the task becomes even easier because you should receive a hash of field-names and field-values, which becomes the source for your hash used in the <code>gsub</code>. </p>\n\n<p>Be sure to verify/sanitize the values before substituting. Users mistype and malicious ones can deliberately enter data in an attempt to break your code, or worse, whatever the XML is fed into.</p>\n"}], "owner": {"reputation": 428, "user_id": 781333, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/114bca93aa547e99d2cf0853d61f72c3?s=128&d=identicon&r=PG", "display_name": "Sunny ", "link": "https://stackoverflow.com/users/781333/sunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 494, "favorite_count": 0, "accepted_answer_id": 31191324, "answer_count": 1, "score": 0, "last_activity_date": 1435859940, "creation_date": 1435772499, "last_edit_date": 1435855463, "question_id": 31168155, "link": "https://stackoverflow.com/questions/31168155/how-to-replace-tag-with-some-value-in-xml-using-nokogiri", "title": "How to replace tag with some value in XML using Nokogiri", "body": "<p>I have a predefine XML template with some tags that need to be replaced. The tag values come dynamically from the front-end.</p>\n\n<pre><code>&lt;?xml version=\"1.0\"?&gt;\n&lt;catalog&gt;\n   &lt;book id=\"bk101\"&gt;\n      &lt;author&gt;AUTHOR1&lt;/author&gt;\n      &lt;title&gt;TITLE1&lt;/title&gt;\n      &lt;genre&gt;Computer&lt;/genre&gt;\n      &lt;price&gt;44.95&lt;/price&gt;\n      &lt;publish_date&gt;2000-10-01&lt;/publish_date&gt;\n      &lt;description&gt;An in-depth look at creating applications \n      with XML.&lt;/description&gt;\n   &lt;/book&gt;\n   &lt;book id=\"bk102\"&gt;\n      &lt;author&gt;AUTHOR2&lt;/author&gt;\n      &lt;title&gt;TITLE2&lt;/title&gt;\n      &lt;genre&gt;Fantasy&lt;/genre&gt;\n      &lt;price&gt;5.95&lt;/price&gt;\n      &lt;publish_date&gt;2000-12-16&lt;/publish_date&gt;\n      &lt;description&gt;A former architect battles corporate zombies, \n      an evil sorceress, and her own childhood to become queen \n      of the world.&lt;/description&gt;\n   &lt;/book&gt;\n &lt;/catalog&gt;\n</code></pre>\n\n<p>In above example I need to replace <code>TITLE1</code>, <code>TITLE2</code>, <code>AUTHOR1</code>, <code>AUTHOR2</code> with the actual value dynamically.</p>\n\n<p>What is the best way to do this? I am using Nokogiri in some Ruby code but have had no luck. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv", "header"], "answers": [{"tags": [], "owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "is_accepted": false, "score": 0, "last_activity_date": 1435774338, "creation_date": 1435774338, "answer_id": 31168691, "question_id": 31167977, "link": "https://stackoverflow.com/questions/31167977/trouble-with-header-in-csv-parsing/31168691#31168691", "title": "trouble with header in CSV parsing", "body": "<p>It's the way you're passing in the hash param to open. You need to be consistent when passing in the hash.</p>\n\n<p>Try:</p>\n\n<pre><code>contents = CSV.open \"event_attendees.csv\", headers: true, header_converters: :symbol\n</code></pre>\n\n<p>or (old style)</p>\n\n<pre><code>contents = CSV.open \"event_attendees.csv\", :headers =&gt; true, :header_converters =&gt; :symbol\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 5058992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff08af505573063919441ed30fe8fa90?s=128&d=identicon&r=PG&f=1", "display_name": "dgarz", "link": "https://stackoverflow.com/users/5058992/dgarz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1435774338, "creation_date": 1435771826, "question_id": 31167977, "link": "https://stackoverflow.com/questions/31167977/trouble-with-header-in-csv-parsing", "title": "trouble with header in CSV parsing", "body": "<p>I'm trying currently trying to learn how to use CSV and for all intents and purposes my code should work (mostly because I'm directly following a tutorial walkthrough). However, I keep getting an error message that my syntax is wrong. I'm wondering if it is something with ruby 1.8 on my mac terminal, or a gem I have to install. Basically it is saying my <code>header: true</code> is the wrong syntax. Here's my code and the subsequent error.</p>\n\n<pre><code>require \"csv\"\nputs \"EventManager initialized.\"\n\ncontents = CSV.open \"event_attendees.csv\", headers: true, :header_converters :symbol\ncontents.each do |row|\n  name = row[:first_name]\n  puts name\nend\n</code></pre>\n\n<p>However, every time I run it I get this error.</p>\n\n<p><code>lib/event_manager.rb:4: syntax error, unexpected ':', expecting $end\n...event_attendees.csv\", headers: , :header_converters :symbol</code></p>\n\n<p>Anyone have a clue as to whats going on or what I should do/</p>\n"}, {"tags": ["ruby", "redis", "docker", "amazon-elasticache"], "answers": [{"tags": [], "owner": {"reputation": 255, "user_id": 1347348, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f3dd957698d5f8f2ff674462a3fde700?s=128&d=identicon&r=PG", "display_name": "fedenusy", "link": "https://stackoverflow.com/users/1347348/fedenusy"}, "is_accepted": true, "score": 0, "last_activity_date": 1436310504, "creation_date": 1436310504, "answer_id": 31280921, "question_id": 31167929, "link": "https://stackoverflow.com/questions/31167929/redis-client-times-out-when-connecting/31280921#31280921", "title": "Redis client times out when connecting", "body": "<p>Josiah and I had a long discussion <a href=\"https://groups.google.com/forum/#!topic/redis-db/lDrmShyanT8\" rel=\"nofollow\">on the Redis Google group</a> which helped solve my issue; hopefully the discussion can help someone else in the future.</p>\n"}], "owner": {"reputation": 255, "user_id": 1347348, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f3dd957698d5f8f2ff674462a3fde700?s=128&d=identicon&r=PG", "display_name": "fedenusy", "link": "https://stackoverflow.com/users/1347348/fedenusy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 0, "accepted_answer_id": 31280921, "answer_count": 1, "score": 1, "last_activity_date": 1436310504, "creation_date": 1435771660, "last_edit_date": 1435771995, "question_id": 31167929, "link": "https://stackoverflow.com/questions/31167929/redis-client-times-out-when-connecting", "title": "Redis client times out when connecting", "body": "<p>I have a Redis cluster running on ElastiCache.</p>\n\n<p>Multiple processes connect to the Redis cluster. Each process lives within a Docker container. The processes are not all the same -- I have a <code>web</code> process, a <code>worker</code> process, etc.</p>\n\n<p>After a few days of operating normally, some of my <code>web</code> processes begin to time out when connecting to Redis. When I <code>ssh</code> into an affected <code>web</code> container and try to reach the cluster via <code>redis-cli</code>, my connection to the cluster times out. This tells me that the issue affects the entire container, and not just the <code>web</code> process.</p>\n\n<p>When I use <code>redis-cli</code> from any other container, I connect without problems.</p>\n\n<p>My <code>web</code> processes create new connections as needed, and close old connections when they're idle for a long time. My guess is that any given Docker container can open a certain number of connections before reaching some kind of limit. After a few days, my <code>web</code> containers reach that limit.</p>\n\n<p>Any idea how to go about fixing this?</p>\n\n<p>--</p>\n\n<p>One more detail: for some reason, resetting my Redis cluster fixes the issue across all <code>web</code> containers. Maybe the Redis server imposes a limit on how many connections can be opened from a given IP address?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6433, "user_id": 663028, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/19fe7ba7282ef0f36fe76b38ee58e6f4?s=128&d=identicon&r=PG&f=1", "display_name": "prusswan", "link": "https://stackoverflow.com/users/663028/prusswan"}, "edited": false, "score": 0, "creation_date": 1441852068, "post_id": 31167874, "comment_id": 52844441, "body": "try with Ruby 2.0 and see if this error still occurs"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 5070664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d428604934867ff48a306276ea12aef?s=128&d=identicon&r=PG&f=1", "display_name": "David McGuinness", "link": "https://stackoverflow.com/users/5070664/david-mcguinness"}, "edited": false, "score": 0, "creation_date": 1435824867, "post_id": 31169051, "comment_id": 50364207, "body": "No, this didnt solve the issue, still getting the same warning"}, {"owner": {"reputation": 1194, "user_id": 3587928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/887b24ff23f9ae35db9da87f993c21c4?s=128&d=identicon&r=PG", "display_name": "Ojash", "link": "https://stackoverflow.com/users/3587928/ojash"}, "reply_to_user": {"reputation": 11, "user_id": 5070664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d428604934867ff48a306276ea12aef?s=128&d=identicon&r=PG&f=1", "display_name": "David McGuinness", "link": "https://stackoverflow.com/users/5070664/david-mcguinness"}, "edited": false, "score": 0, "creation_date": 1435829353, "post_id": 31169051, "comment_id": 50367354, "body": "First of all can you connect to your mysql service using the credentials as in the <code>database.yml</code>? Also try removing <code>encoding</code>, <code>pool</code>, <code>host</code>, <code>port</code>, <code>socket</code>"}, {"owner": {"reputation": 11, "user_id": 5070664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d428604934867ff48a306276ea12aef?s=128&d=identicon&r=PG&f=1", "display_name": "David McGuinness", "link": "https://stackoverflow.com/users/5070664/david-mcguinness"}, "edited": false, "score": 0, "creation_date": 1435831790, "post_id": 31169051, "comment_id": 50369100, "body": "Hi Ojash when I removed the credentials i got the following warning."}, {"owner": {"reputation": 11, "user_id": 5070664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d428604934867ff48a306276ea12aef?s=128&d=identicon&r=PG&f=1", "display_name": "David McGuinness", "link": "https://stackoverflow.com/users/5070664/david-mcguinness"}, "edited": false, "score": 0, "creation_date": 1435831794, "post_id": 31169051, "comment_id": 50369104, "body": "rake aborted! ActiveRecord::AdapterNotSpecified: &#39;mysql2&#39; database is not configured. Available: [&quot;default&quot;, &quot;adapter&quot;, &quot;username&quot;, &quot;password&quot;, &quot;development&quot;, &quot;&lt;&lt;&quot;, &quot;database&quot;]"}, {"owner": {"reputation": 1194, "user_id": 3587928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/887b24ff23f9ae35db9da87f993c21c4?s=128&d=identicon&r=PG", "display_name": "Ojash", "link": "https://stackoverflow.com/users/3587928/ojash"}, "reply_to_user": {"reputation": 11, "user_id": 5070664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d428604934867ff48a306276ea12aef?s=128&d=identicon&r=PG&f=1", "display_name": "David McGuinness", "link": "https://stackoverflow.com/users/5070664/david-mcguinness"}, "edited": false, "score": 0, "creation_date": 1435839460, "post_id": 31169051, "comment_id": 50374092, "body": "lets try one thing, create a new rails app using <code>rails g sample -d mysql</code>, then try <code>rake db:create</code> and see if the error appears on the new app as well."}, {"owner": {"reputation": 11, "user_id": 5070664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d428604934867ff48a306276ea12aef?s=128&d=identicon&r=PG&f=1", "display_name": "David McGuinness", "link": "https://stackoverflow.com/users/5070664/david-mcguinness"}, "edited": false, "score": 0, "creation_date": 1435849724, "post_id": 31169051, "comment_id": 50381647, "body": "should i not create a new app with rails new sample -d mysql"}, {"owner": {"reputation": 11, "user_id": 5070664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d428604934867ff48a306276ea12aef?s=128&d=identicon&r=PG&f=1", "display_name": "David McGuinness", "link": "https://stackoverflow.com/users/5070664/david-mcguinness"}, "edited": false, "score": 0, "creation_date": 1435849912, "post_id": 31169051, "comment_id": 50381766, "body": "I have created the new rails app &quot;sample&quot;. I tried a rake db:create after i installed by gem files and i got the following warning Ojash"}, {"owner": {"reputation": 11, "user_id": 5070664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d428604934867ff48a306276ea12aef?s=128&d=identicon&r=PG&f=1", "display_name": "David McGuinness", "link": "https://stackoverflow.com/users/5070664/david-mcguinness"}, "edited": false, "score": 0, "creation_date": 1435849937, "post_id": 31169051, "comment_id": 50381781, "body": "#&lt;Mysql2::Error: Can&#39;t connect to local MySQL server through socket &#39;/var/run/mysqld/mysqld.sock&#39; (2)&gt; Couldn&#39;t create database for {&quot;adapter&quot;=&gt;&quot;mysql2&quot;, &quot;encoding&quot;=&gt;&quot;utf8&quot;, &quot;pool&quot;=&gt;5, &quot;username&quot;=&gt;&quot;root&quot;, &quot;password&quot;=&gt;nil, &quot;host&quot;=&gt;&quot;localhost&quot;, ................"}, {"owner": {"reputation": 11, "user_id": 5070664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d428604934867ff48a306276ea12aef?s=128&d=identicon&r=PG&f=1", "display_name": "David McGuinness", "link": "https://stackoverflow.com/users/5070664/david-mcguinness"}, "edited": false, "score": 0, "creation_date": 1435850044, "post_id": 31169051, "comment_id": 50381858, "body": "Ive changed the socket to /tmp/mysql.sock and i get this warning #&lt;Mysql2::Error: Can&#39;t connect to local MySQL server through socket &#39;/tmp/mysql.sock&#39; (2)&gt;"}, {"owner": {"reputation": 1194, "user_id": 3587928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/887b24ff23f9ae35db9da87f993c21c4?s=128&d=identicon&r=PG", "display_name": "Ojash", "link": "https://stackoverflow.com/users/3587928/ojash"}, "reply_to_user": {"reputation": 11, "user_id": 5070664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d428604934867ff48a306276ea12aef?s=128&d=identicon&r=PG&f=1", "display_name": "David McGuinness", "link": "https://stackoverflow.com/users/5070664/david-mcguinness"}, "edited": false, "score": 0, "creation_date": 1435850242, "post_id": 31169051, "comment_id": 50382016, "body": "Please make sure your MySQL server is running try &#39;mysql&#39; command in the terminal."}, {"owner": {"reputation": 11, "user_id": 5070664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d428604934867ff48a306276ea12aef?s=128&d=identicon&r=PG&f=1", "display_name": "David McGuinness", "link": "https://stackoverflow.com/users/5070664/david-mcguinness"}, "edited": false, "score": 0, "creation_date": 1435852334, "post_id": 31169051, "comment_id": 50383509, "body": "davemac_1977@mysql:~/workspace/sample $ mysql ERROR 2002 (HY000): Can&#39;t connect to local MySQL server through socket &#39;/var/run/mysqld/mysqld.sock&#39; (2)"}, {"owner": {"reputation": 11, "user_id": 5070664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d428604934867ff48a306276ea12aef?s=128&d=identicon&r=PG&f=1", "display_name": "David McGuinness", "link": "https://stackoverflow.com/users/5070664/david-mcguinness"}, "edited": false, "score": 0, "creation_date": 1435852345, "post_id": 31169051, "comment_id": 50383521, "body": "mysql server is running"}, {"owner": {"reputation": 1194, "user_id": 3587928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/887b24ff23f9ae35db9da87f993c21c4?s=128&d=identicon&r=PG", "display_name": "Ojash", "link": "https://stackoverflow.com/users/3587928/ojash"}, "reply_to_user": {"reputation": 11, "user_id": 5070664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d428604934867ff48a306276ea12aef?s=128&d=identicon&r=PG&f=1", "display_name": "David McGuinness", "link": "https://stackoverflow.com/users/5070664/david-mcguinness"}, "edited": false, "score": 0, "creation_date": 1435854067, "post_id": 31169051, "comment_id": 50384650, "body": "OK then, first find your mysqld.sock file and give its path  to the socket. Is it really on <code>tmp&#47;</code> or in <code>var</code>. Make sure it exists and the path is proper"}, {"owner": {"reputation": 11, "user_id": 5070664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d428604934867ff48a306276ea12aef?s=128&d=identicon&r=PG&f=1", "display_name": "David McGuinness", "link": "https://stackoverflow.com/users/5070664/david-mcguinness"}, "edited": false, "score": 0, "creation_date": 1435874090, "post_id": 31169051, "comment_id": 50395086, "body": "How do i find mysqld file"}], "tags": [], "owner": {"reputation": 1194, "user_id": 3587928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/887b24ff23f9ae35db9da87f993c21c4?s=128&d=identicon&r=PG", "display_name": "Ojash", "link": "https://stackoverflow.com/users/3587928/ojash"}, "is_accepted": false, "score": 0, "last_activity_date": 1435775600, "creation_date": 1435775600, "answer_id": 31169051, "question_id": 31167874, "link": "https://stackoverflow.com/questions/31167874/cannot-connect-ruby-on-rails-app-with-mysql/31169051#31169051", "title": "Cannot connect Ruby on Rails App with Mysql", "body": "<p>Looks like its a problem with the indentation in the <code>database.yml</code> file. YML file should have 2 space indentations.</p>\n\n<pre><code>default: &amp;default\n  adapter: mysql2\n  encoding: utf8\n  pool: 5\n  username: root\n  password: manutdfc1999\n  host: 127.0.0.1\n  port: 3306 \n  socket: /tmp/mysql.sock\n\ndevelopment:\n  &lt;&lt;: *default\n  database: ruby\n\nproduction:\n  &lt;&lt;: *default\n  database: ruby\n  username: manutdfc1999\n  password: &lt;%= ENV['SAOIRSE_DATABASE_PASSWORD'] %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 5070664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d428604934867ff48a306276ea12aef?s=128&d=identicon&r=PG&f=1", "display_name": "David McGuinness", "link": "https://stackoverflow.com/users/5070664/david-mcguinness"}, "edited": false, "score": 0, "creation_date": 1435824932, "post_id": 31169213, "comment_id": 50364245, "body": "This didnt solve the problem either, my config files have declared the socket as /tmp/mysql.sock"}], "tags": [], "owner": {"reputation": 1461, "user_id": 2059047, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/5e1327cb46137894ca902795db2111ac?s=128&d=identicon&r=PG", "display_name": "Prashant4224", "link": "https://stackoverflow.com/users/2059047/prashant4224"}, "is_accepted": false, "score": 0, "last_activity_date": 1435776118, "creation_date": 1435776118, "answer_id": 31169213, "question_id": 31167874, "link": "https://stackoverflow.com/questions/31167874/cannot-connect-ruby-on-rails-app-with-mysql/31169213#31169213", "title": "Cannot connect Ruby on Rails App with Mysql", "body": "<p>Use <code>/var/run/mysqld/mysqld.sock</code> instead of <code>/tmp/mysql.sock</code></p>\n\n<pre><code>default: &amp;default\n  adapter: mysql2\n  encoding: utf8\n  pool: 5\n  username: root\n  password: manutdfc1999\n  host: 127.0.0.1\n  port: 3306 \n  socket: /var/run/mysqld/mysqld.sock\n\ndevelopment:\n  &lt;&lt;: *default\n  database: ruby\n\nproduction:\n  &lt;&lt;: *default\n  database: ruby\n  username: manutdfc1999\n  password: &lt;%= ENV['SAOIRSE_DATABASE_PASSWORD'] %&gt;\n</code></pre>\n\n<p>After the setup execute:</p>\n\n<pre><code>rake db:create\nrake db:migrate\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193, "user_id": 1634593, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/k9Tux.jpg?s=128&g=1", "display_name": "Jay", "link": "https://stackoverflow.com/users/1634593/jay"}, "is_accepted": false, "score": 0, "last_activity_date": 1452310027, "creation_date": 1452310027, "answer_id": 34689399, "question_id": 31167874, "link": "https://stackoverflow.com/questions/31167874/cannot-connect-ruby-on-rails-app-with-mysql/34689399#34689399", "title": "Cannot connect Ruby on Rails App with Mysql", "body": "<p>A little late to the party but this is probably your mysql2 version not lining up with current rails. </p>\n\n<p>gem 'mysql2', '0.3.18'</p>\n"}], "owner": {"reputation": 11, "user_id": 5070664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d428604934867ff48a306276ea12aef?s=128&d=identicon&r=PG&f=1", "display_name": "David McGuinness", "link": "https://stackoverflow.com/users/5070664/david-mcguinness"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 520, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1452310027, "creation_date": 1435771472, "last_edit_date": 1435772387, "question_id": 31167874, "link": "https://stackoverflow.com/questions/31167874/cannot-connect-ruby-on-rails-app-with-mysql", "title": "Cannot connect Ruby on Rails App with Mysql", "body": "<p>I cant get a Ruby on Rails application to connect to a Mysql database</p>\n\n<p>Ruby version: <code>2.2.1</code>, Mysql version: <code>5.5</code></p>\n\n<p><strong>database.yml:</strong></p>\n\n<pre><code>  default: &amp;default\n  adapter: mysql2\n  encoding: utf8\n  pool: 5\n  username: root\n  password: manutdfc1999\n  host: 127.0.0.1\n  port: 3306 \n  socket: /tmp/mysql.sock\n\n  development:\n  &lt;&lt;: *default\n  database: ruby\n\n&lt;&lt;: *default\ndatabase: ruby\nusername: manutdfc1999\npassword: &lt;%= ENV['SAOIRSE_DATABASE_PASSWORD'] %&gt;\n</code></pre>\n\n<p><strong>Gemfile:</strong></p>\n\n<pre><code>source 'https://rubygems.org'\n\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.2.1'\n# Use mysql as the database for Active Record\ngem 'mysql2'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.1.0'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\ngem 'turbolinks'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use Unicorn as the app server\n# gem 'unicorn'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug'\n\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views\n  gem 'web-console', '~&gt; 2.0'\n\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\nend\n</code></pre>\n\n<p>My mysql database is called ruby and its on my localhost\nwhen i carry out a rake db:migrate I get the following warning</p>\n\n<pre><code>davemac_1977@mysql:~/workspace/saoirse $ rake db:migrate\nrake aborted!\nActiveRecord::AdapterNotSpecified: 'mysql2' database is not configured. Available: [\"default\", \"adapter\", \"encoding\", \"pool\", \"username\", \"password\", \"host\", \"port\", \"socket\"]\n/usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.1/lib/active_record/connection_adapters/connection_specification.rb:248:in `resolve_symbol_connection'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.1/lib/active_record/connection_adapters/connection_specification.rb:231:in `resolve_string_connection'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.1/lib/active_record/connection_adapters/connection_specification.rb:213:in `resolve_connection'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.1/lib/active_record/connection_adapters/connection_specification.rb:139:in `resolve'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.1/lib/active_record/connection_adapters/connection_specification.rb:151:in `block in resolve_all'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.1/lib/active_record/connection_adapters/connection_specification.rb:150:in `each'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.1/lib/active_record/connection_adapters/connection_specification.rb:150:in `resolve_all'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.1/lib/active_record/connection_handling.rb:69:in `resolve'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.1/lib/active_record/core.rb:46:in `configurations='\n/usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.1/lib/active_record/railtie.rb:117:in `block (2 levels) in &lt;class:Railtie&gt;'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activesupport-4.2.1/lib/active_support/lazy_load_hooks.rb:38:in `instance_eval'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activesupport-4.2.1/lib/active_support/lazy_load_hooks.rb:38:in `execute_hook'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activesupport-4.2.1/lib/active_support/lazy_load_hooks.rb:45:in `block in run_load_hooks'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activesupport-4.2.1/lib/active_support/lazy_load_hooks.rb:44:in `each'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activesupport-4.2.1/lib/active_support/lazy_load_hooks.rb:44:in `run_load_hooks'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.1/lib/active_record/base.rb:316:in `&lt;module:ActiveRecord&gt;'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.1/lib/active_record/base.rb:26:in `&lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.1/lib/active_record/tasks/mysql_database_tasks.rb:8:in `&lt;class:MySQLDatabaseTasks&gt;'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.1/lib/active_record/tasks/mysql_database_tasks.rb:3:in `&lt;module:Tasks&gt;'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.1/lib/active_record/tasks/mysql_database_tasks.rb:2:in `&lt;module:ActiveRecord&gt;'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.1/lib/active_record/tasks/mysql_database_tasks.rb:1:in `&lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.1/lib/active_record/tasks/database_tasks.rb:50:in `&lt;module:DatabaseTasks&gt;'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.1/lib/active_record/tasks/database_tasks.rb:37:in `&lt;module:Tasks&gt;'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.1/lib/active_record/tasks/database_tasks.rb:4:in `&lt;module:ActiveRecord&gt;'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.1/lib/active_record/tasks/database_tasks.rb:3:in `&lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.2.1/gems/activerecord-4.2.1/lib/active_record/railtie.rb:41:in `block (3 levels) in &lt;class:Railtie&gt;'\nTasks: TOP =&gt; db:migrate =&gt; db:load_config\n(See full trace by running task with --trace) \n</code></pre>\n\n<p>How to fix this issue?</p>\n"}, {"tags": ["ruby", "chef-infra", "chef-recipe", "chefspec"], "comments": [{"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1435826343, "post_id": 31167273, "comment_id": 50365156, "body": "See <a href=\"https://github.com/sethvargo/chefspec#reporting\" rel=\"nofollow noreferrer\">here</a> about the filters to avoid this behavior."}], "answers": [{"tags": [], "owner": {"reputation": 1376, "user_id": 427117, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c91d05b02cc6a43fadcbe417b66bceb4?s=128&d=identicon&r=PG", "display_name": "Roland", "link": "https://stackoverflow.com/users/427117/roland"}, "is_accepted": false, "score": 0, "last_activity_date": 1435794049, "creation_date": 1435794049, "answer_id": 31173407, "question_id": 31167273, "link": "https://stackoverflow.com/questions/31167273/chefspec-counting-resources-from-included-recipe/31173407#31173407", "title": "ChefSpec counting resources from included recipe", "body": "<p>Depending on your cookbook dependency manager (<a href=\"https://github.com/sethvargo/chefspec#berkshelf\" rel=\"nofollow\">Berkshelf</a>, <a href=\"https://github.com/sethvargo/chefspec#librarian\" rel=\"nofollow\">Librarian</a>, none) ChefSpec can determine, if a chef resource call is made outside or inside the current cookbook. (You still may have to stub calls to data bags and thinngs like file system checks in pre-conditionals (<code>only_if</code>, <code>not_if</code>)).</p>\n\n<p>If you, for whatevery reasons, can't use any of the integration, you still can stub the <code>include_recipe</code> call as described in the ReadMe:</p>\n\n<p><a href=\"https://github.com/sethvargo/chefspec#include_recipe\" rel=\"nofollow\">https://github.com/sethvargo/chefspec#include_recipe</a></p>\n\n<p>hope this answers your question.</p>\n"}], "owner": {"reputation": 1934, "user_id": 3750230, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/f2f523f0f9f5266c8785ceeb58925a0d?s=128&d=identicon&r=PG&f=1", "display_name": "Jacques Betancourt", "link": "https://stackoverflow.com/users/3750230/jacques-betancourt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 156, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435794049, "creation_date": 1435769370, "question_id": 31167273, "link": "https://stackoverflow.com/questions/31167273/chefspec-counting-resources-from-included-recipe", "title": "ChefSpec counting resources from included recipe", "body": "<p>I have a Chef cookbook (cookbook_alpha::default) that includes another cookbook (cookbook_bravo::default) using <code>include_recipe 'cookbook_bravo::default'</code>.</p>\n\n<p>When I'm testing cookbook_alpha using ChefSpec, all of the resources in cookbook_alpha are shown and are tested. But the resources (files, templates, users etc) in cookbook_bravo show up as <code>Untouched resources</code> in cookbook_alpha test run. cookbook_bravo has it's own test suites and is covered adequately and I see no need to write duplicate, additional specs in cookbook_alpha simply to cover the resources from cookbook_bravo that are already tested.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "amazon-elastic-beanstalk"], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1435771169, "post_id": 31167298, "comment_id": 50343404, "body": "As a note since you are not passing a block to <code>File.open</code> the file will not automatically close. Why not something like <code>File.readlines(&#39;&#47;sys&#47;hypervisor&#47;uuid&#39;).first</code> this way it will self close otherwise you need to call <code>uuid.close</code> somewhere to make sure this isn&#39;t held indefinitely."}, {"owner": {"reputation": 171, "user_id": 2820541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3528ee535c4bb8cd9326a4b4b1d405e6?s=128&d=identicon&r=PG&f=1", "display_name": "BaneOfSerenity", "link": "https://stackoverflow.com/users/2820541/baneofserenity"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1435772735, "post_id": 31167298, "comment_id": 50344202, "body": "Appreciate the feedback. I made the change and it seems to work quite well. Thanks again."}], "tags": [], "owner": {"reputation": 171, "user_id": 2820541, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3528ee535c4bb8cd9326a4b4b1d405e6?s=128&d=identicon&r=PG&f=1", "display_name": "BaneOfSerenity", "link": "https://stackoverflow.com/users/2820541/baneofserenity"}, "is_accepted": true, "score": 1, "last_activity_date": 1435772698, "last_edit_date": 1435772698, "creation_date": 1435769445, "answer_id": 31167298, "question_id": 31167081, "link": "https://stackoverflow.com/questions/31167081/detecting-elastic-beanstalk-environment/31167298#31167298", "title": "Detecting Elastic Beanstalk Environment?", "body": "<p>I have a rails project and this is what we are currently doing inside in order to determine which environment our ec2 instance is a part of. </p>\n\n<p>Below the code is doing more than one check, the file check makes sure that you are running this code on an ec2 instance. The second set of url calls are grabbing the ec2 instance id along with which aws region is being used. Then finally it uses the previous two pieces of data to find the environment-name using the aws-sdk. It's a little ugly but it gets the job done.</p>\n\n<pre><code>require 'net/http'\nrequire 'aws-sdk'\n\nuuid = File.readlines('/sys/hypervisor/uuid', 'r')\nif uuid\n    str = uuid.first.slice(0,3)\n    if str == 'ec2'\n        metadata_endpoint = 'http://169.254.169.254/latest/meta-data/'\n        dynamic_endpoint = 'http://169.254.169.254/latest/dynamic/'\n        instance_id = Net::HTTP.get( URI.parse( metadata_endpoint + 'instance-id' ) )\n        document = Net::HTTP.get( URI.parse( dynamic_endpoint + 'instance-identity/document') )\n        parsed_document = JSON.parse(document)\n        region = parsed_document['region']\n        ec2 = AWS::EC2::Client.new(region: region)\n        ec2.describe_instances({instance_ids:[instance_id]}).reservation_set[0].instances_set[0].tag_set.each do |tag|\n            if tag.key == 'elasticbeanstalk:environment-name'\n                @env_name = tag.value\n            end\n        end\n    end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 415, "user_id": 1275069, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5491d2c75fa79c459af319cc4d110fd7?s=128&d=identicon&r=PG", "display_name": "silva96", "link": "https://stackoverflow.com/users/1275069/silva96"}, "edited": false, "score": 0, "creation_date": 1578422091, "post_id": 43490985, "comment_id": 105430522, "body": "Not necessarily, beanstalk lets you define the following hierarchy:  application&gt; Environment 1, Environment 2   Example:  my_blog &gt; qa-environment-of-my-blog, prod-environment-of-my-blog  I think the OP wants to know if the instance is running in qa or prod from inside the instance"}, {"owner": {"reputation": 2344, "user_id": 262406, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ace75149fb89dd46b804219fed0bc6dc?s=128&d=identicon&r=PG", "display_name": "smentek", "link": "https://stackoverflow.com/users/262406/smentek"}, "reply_to_user": {"reputation": 415, "user_id": 1275069, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/5491d2c75fa79c459af319cc4d110fd7?s=128&d=identicon&r=PG", "display_name": "silva96", "link": "https://stackoverflow.com/users/1275069/silva96"}, "edited": false, "score": 0, "creation_date": 1578426976, "post_id": 43490985, "comment_id": 105432615, "body": "It sounds to me like checking if you drive your own car by checking VIN number on its engine when on highway ;)"}], "tags": [], "owner": {"reputation": 2344, "user_id": 262406, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/ace75149fb89dd46b804219fed0bc6dc?s=128&d=identicon&r=PG", "display_name": "smentek", "link": "https://stackoverflow.com/users/262406/smentek"}, "is_accepted": false, "score": 1, "last_activity_date": 1492592235, "creation_date": 1492592235, "answer_id": 43490985, "question_id": 31167081, "link": "https://stackoverflow.com/questions/31167081/detecting-elastic-beanstalk-environment/43490985#43490985", "title": "Detecting Elastic Beanstalk Environment?", "body": "<p>Whatever you are doing you should be focus on <strong>application environment</strong> name and not on its sourroundings <strong>elastic beanstalk environment</strong> name. So use <a href=\"http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/eb3-setenv.html\" rel=\"nofollow noreferrer\">elastic beanstalk environment variables</a>, set sth like APP_ENV, and read it programmatically in whatever lagnuage you are using inside your app.</p>\n\n<p>It is kind of the same principle like with Object Oriented Programming where you encapsulate your stuff to be independent from ther rest of the code. Internals of EB may change with next release, elastic beanstalk environment variables will be still there...</p>\n"}], "owner": {"reputation": 10064, "user_id": 1769276, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/ddbbe9a629cce4be0da2d0a7a3421370?s=128&d=identicon&r=PG", "display_name": "PressingOnAlways", "link": "https://stackoverflow.com/users/1769276/pressingonalways"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 502, "favorite_count": 1, "accepted_answer_id": 31167298, "answer_count": 2, "score": 3, "last_activity_date": 1492592235, "creation_date": 1435768764, "question_id": 31167081, "link": "https://stackoverflow.com/questions/31167081/detecting-elastic-beanstalk-environment", "title": "Detecting Elastic Beanstalk Environment?", "body": "<p>I am trying to tag error messages by elastic beanstalk environment. Is there a way to programmatically determine what environment I am in from an EC2 instance inside the elastic beanstalk?</p>\n\n<p>I am using ruby on rails so a ruby way would be nice, but I can port from any language.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "image", "refile"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1435769095, "post_id": 31167052, "comment_id": 50342212, "body": "Could you post the complete error log?"}, {"owner": {"reputation": 1178, "user_id": 561634, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1ca61a0c142f288f0884be35524df6a6?s=128&d=identicon&r=PG", "display_name": "the_", "link": "https://stackoverflow.com/users/561634/the"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1435769487, "post_id": 31167052, "comment_id": 50342428, "body": "@Pavan, here: <code>NoMethodError (undefined method accepts_attachments_for for #&lt;Class:0x007ff2a46a5b50&gt;):   app&#47;models&#47;book.rb:6:in &lt;class:Book&gt;   app&#47;models&#47;book.rb:1:in &lt;top (required)&gt;   app&#47;controllers&#47;books_controller.rb:17:in new</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1905, "user_id": 794627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f0faa9b905f0eeff93547ec33fc59b?s=128&d=identicon&r=PG", "display_name": "Aldehir", "link": "https://stackoverflow.com/users/794627/aldehir"}, "is_accepted": true, "score": 6, "last_activity_date": 1435972408, "creation_date": 1435972408, "answer_id": 31215896, "question_id": 31167052, "link": "https://stackoverflow.com/questions/31167052/refile-accepts-attachments-for-issue/31215896#31215896", "title": "Refile accepts_attachments_for issue", "body": "<p>The feature you're looking to use is discussed here: <a href=\"https://github.com/refile/refile/issues/6\">https://github.com/refile/refile/issues/6</a> and it doesn't seem to be released yet. If you want to use it, you'll need to use the master branch. You can try using the master branch by changing your Gemfile:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>gem 'refile', require: \"refile/rails\", git: 'https://github.com/refile/refile.git', branch: 'master'\n</code></pre>\n"}], "owner": {"reputation": 1178, "user_id": 561634, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1ca61a0c142f288f0884be35524df6a6?s=128&d=identicon&r=PG", "display_name": "the_", "link": "https://stackoverflow.com/users/561634/the"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 737, "favorite_count": 4, "accepted_answer_id": 31215896, "answer_count": 1, "score": 3, "last_activity_date": 1435972408, "creation_date": 1435768644, "question_id": 31167052, "link": "https://stackoverflow.com/questions/31167052/refile-accepts-attachments-for-issue", "title": "Refile accepts_attachments_for issue", "body": "<p>I'm using Refile with a rails 4 app.</p>\n\n<p>I'm getting the error: <code>undefined method</code>accepts_attachments_for'`</p>\n\n<p>I'm trying to do multiple image upload, and have two models: books and blobs. </p>\n\n<p>My books.rb:</p>\n\n<pre><code>has_many :blobs, dependent: :destroy\naccepts_attachments_for :blobs\n</code></pre>\n\n<p>My blobs.rb:</p>\n\n<pre><code>belongs_to :book\nattachment :file\n</code></pre>\n\n<p>If I check rake routes, it shows that refile is mounted, so what is the issue?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6267, "user_id": 1144104, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c135bc644610fabc6e059b73fdd7f8ad?s=128&d=identicon&r=PG", "display_name": "jazzytomato", "link": "https://stackoverflow.com/users/1144104/jazzytomato"}, "edited": false, "score": 0, "creation_date": 1435767862, "post_id": 31166679, "comment_id": 50341525, "body": "Have a look at the find_each method <a href=\"http://apidock.com/rails/ActiveRecord/Batches/find_each\" rel=\"nofollow noreferrer\">apidock.com/rails/ActiveRecord/Batches/find_each</a>"}, {"owner": {"reputation": 3138, "user_id": 1448966, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aNPnb.jpg?s=128&g=1", "display_name": "A Fader Darkly", "link": "https://stackoverflow.com/users/1448966/a-fader-darkly"}, "reply_to_user": {"reputation": 6267, "user_id": 1144104, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c135bc644610fabc6e059b73fdd7f8ad?s=128&d=identicon&r=PG", "display_name": "jazzytomato", "link": "https://stackoverflow.com/users/1144104/jazzytomato"}, "edited": false, "score": 0, "creation_date": 1435767972, "post_id": 31166679, "comment_id": 50341587, "body": "Find_each locks you into ascending ID values."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1435768270, "post_id": 31166679, "comment_id": 50341753, "body": "Why the reverse order?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1435768379, "post_id": 31166679, "comment_id": 50341827, "body": "How about <code>User.order(id: :desc).find_each</code>?"}, {"owner": {"reputation": 3138, "user_id": 1448966, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aNPnb.jpg?s=128&g=1", "display_name": "A Fader Darkly", "link": "https://stackoverflow.com/users/1448966/a-fader-darkly"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1435768442, "post_id": 31166679, "comment_id": 50341861, "body": "@SergioTulentsev: To minimise disruption to live data. Recent IDs are exponentially more likely to need to be accessed based on the architecture of the site."}, {"owner": {"reputation": 3138, "user_id": 1448966, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aNPnb.jpg?s=128&g=1", "display_name": "A Fader Darkly", "link": "https://stackoverflow.com/users/1448966/a-fader-darkly"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1435768524, "post_id": 31166679, "comment_id": 50341907, "body": "@SergioTulentsev: find_each forces an ascending ID order. I think it also uses &#39;limit&#39; and &#39;offset&#39; behind the scenes, so it slows down over time for the kind of database sizes I&#39;m talking about."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1435768535, "post_id": 31166679, "comment_id": 50341912, "body": "Anyhow, writing <code>chunkify</code> is almost trivial. You didn&#39;t give it a try, did you?"}, {"owner": {"reputation": 3138, "user_id": 1448966, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aNPnb.jpg?s=128&g=1", "display_name": "A Fader Darkly", "link": "https://stackoverflow.com/users/1448966/a-fader-darkly"}, "edited": false, "score": 0, "creation_date": 1435768673, "post_id": 31166679, "comment_id": 50341989, "body": "Almost, but not quite, trivial. I have a solution, but I thought it would make a fun SO problem. And I usually end up learning some language or framework trick in the process."}, {"owner": {"reputation": 6267, "user_id": 1144104, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c135bc644610fabc6e059b73fdd7f8ad?s=128&d=identicon&r=PG", "display_name": "jazzytomato", "link": "https://stackoverflow.com/users/1144104/jazzytomato"}, "edited": false, "score": 0, "creation_date": 1435770586, "post_id": 31166679, "comment_id": 50343026, "body": "If you have a solution post it, this is always better to show that at least you tried. And it helps people to understand what you really try to achieve"}], "answers": [{"comments": [{"owner": {"reputation": 3138, "user_id": 1448966, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aNPnb.jpg?s=128&g=1", "display_name": "A Fader Darkly", "link": "https://stackoverflow.com/users/1448966/a-fader-darkly"}, "edited": false, "score": 0, "creation_date": 1435768037, "post_id": 31166854, "comment_id": 50341624, "body": "find_each locks you into ascending ID values."}, {"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "edited": false, "score": 0, "creation_date": 1435777179, "post_id": 31166854, "comment_id": 50346831, "body": "find_each should work with sorts; there&#39;s no reason it shouldn&#39;t."}, {"owner": {"reputation": 3138, "user_id": 1448966, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aNPnb.jpg?s=128&g=1", "display_name": "A Fader Darkly", "link": "https://stackoverflow.com/users/1448966/a-fader-darkly"}, "edited": false, "score": 0, "creation_date": 1435779271, "post_id": 31166854, "comment_id": 50348016, "body": "Should. Doesn&#39;t. The reasoning is that anything other than the PK (for example, created_at dates) may not be unique, so you could get duplicates and/or missing values when reading batches. (And who would ever want to go in REVERSE order?) My solution to this would be to use ID as a secondary ordering field, ensuring consistency across pages."}, {"owner": {"reputation": 36058, "user_id": 1157054, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5c9d0ecbe3045579b72f96744c62735c?s=128&d=identicon&r=PG", "display_name": "Ajedi32", "link": "https://stackoverflow.com/users/1157054/ajedi32"}, "reply_to_user": {"reputation": 3138, "user_id": 1448966, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aNPnb.jpg?s=128&g=1", "display_name": "A Fader Darkly", "link": "https://stackoverflow.com/users/1448966/a-fader-darkly"}, "edited": false, "score": 0, "creation_date": 1435780325, "post_id": 31166854, "comment_id": 50348591, "body": "@AFaderDarkly Didn&#39;t you basically just say you want to go in reverse order? You want to start with the chunk with the highest ids, right? So <code>order(id: :desc).find_each</code>. I don&#39;t see the problem."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 36058, "user_id": 1157054, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5c9d0ecbe3045579b72f96744c62735c?s=128&d=identicon&r=PG", "display_name": "Ajedi32", "link": "https://stackoverflow.com/users/1157054/ajedi32"}, "edited": false, "score": 0, "creation_date": 1435780430, "post_id": 31166854, "comment_id": 50348653, "body": "@Ajedi32: I think what he&#39;s saying is that <code>find_each</code> ignores that reverse order on <code>id</code>. Would&#39;ve tested this, but I don&#39;t have an sql database lying around :)"}, {"owner": {"reputation": 36058, "user_id": 1157054, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5c9d0ecbe3045579b72f96744c62735c?s=128&d=identicon&r=PG", "display_name": "Ajedi32", "link": "https://stackoverflow.com/users/1157054/ajedi32"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1435780646, "post_id": 31166854, "comment_id": 50348770, "body": "@SergioTulentsev Ah, found it: &quot;NOTE: It&#39;s not possible to set the order. That is automatically set to ascending on the primary key (\u201cid ASC\u201d) to make the batch ordering work. This also means that this method only works with integer-based primary keys.&quot; So yeah, if order is important I guess this won&#39;t work."}, {"owner": {"reputation": 3138, "user_id": 1448966, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aNPnb.jpg?s=128&g=1", "display_name": "A Fader Darkly", "link": "https://stackoverflow.com/users/1448966/a-fader-darkly"}, "edited": false, "score": 1, "creation_date": 1435781125, "post_id": 31166854, "comment_id": 50349077, "body": "Indeed. <code>find_each</code> defers to <code>find_in_batches</code> which does this:    <code>if logger &amp;&amp; (arel.orders.present? || arel.taken.present?)</code>     <code>logger.warn(&quot;Scoped order and limit are ignored, it&#39;s forced to be batch order and batch size&quot;)</code>   <code>end</code>    <code>relation = relation.reorder(batch_order).limit(batch_size)</code>"}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": false, "score": 1, "last_activity_date": 1435767981, "creation_date": 1435767981, "answer_id": 31166854, "question_id": 31166679, "link": "https://stackoverflow.com/questions/31166679/in-ruby-how-do-i-split-a-range-into-chunks-for-batch-operations/31166854#31166854", "title": "In Ruby, how do I split a range into chunks for batch operations?", "body": "<p>ActiveRecord provides a <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Batches.html#method-i-find_each\" rel=\"nofollow\"><code>find_each</code></a> method you can use to load small batches of records and perform a specific operation on the result set.</p>\n\n<blockquote>\n  <p>Looping through a collection of records from the database (using the all method, for example) is very inefficient since it will try to instantiate all the objects at once.</p>\n  \n  <p>In that case, batch processing methods allow you to work with the records in batches, thereby greatly reducing memory consumption.</p>\n  \n  <p>The <code>find_each</code> method uses <code>find_in_batches</code> with a batch size of <code>1000</code> (or as specified by the <code>:batch_size</code> option).</p>\n</blockquote>\n\n<p>You may want to add a new boolean field to the column you have to migrate to make sure you filter out the query to just the record where <code>processed</code> is false. In this way, even if the process dies for some reason, you can resume it and it will not restart from the beginning.</p>\n"}, {"comments": [{"owner": {"reputation": 3138, "user_id": 1448966, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aNPnb.jpg?s=128&g=1", "display_name": "A Fader Darkly", "link": "https://stackoverflow.com/users/1448966/a-fader-darkly"}, "edited": false, "score": 0, "creation_date": 1435776536, "post_id": 31168128, "comment_id": 50346441, "body": "Good answer. You are correct about the 0 of course, that was a typo. Corrected."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 3138, "user_id": 1448966, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aNPnb.jpg?s=128&g=1", "display_name": "A Fader Darkly", "link": "https://stackoverflow.com/users/1448966/a-fader-darkly"}, "edited": false, "score": 0, "creation_date": 1435776959, "post_id": 31168128, "comment_id": 50346693, "body": "@AFaderDarkly as a note this method is faster than your current approach as well because currently you are creating a new range using conditionals that must be evaluated and then converting it to an Array on every iteration."}, {"owner": {"reputation": 3138, "user_id": 1448966, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aNPnb.jpg?s=128&g=1", "display_name": "A Fader Darkly", "link": "https://stackoverflow.com/users/1448966/a-fader-darkly"}, "edited": false, "score": 1, "creation_date": 1435777246, "post_id": 31168128, "comment_id": 50346880, "body": "Yes, this is good. I&#39;d rejected each_slice as I suspected it would require an array, but of course it&#39;s just iterating through the enumerator so it won&#39;t try and keep all IDs in memory."}, {"owner": {"reputation": 3138, "user_id": 1448966, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aNPnb.jpg?s=128&g=1", "display_name": "A Fader Darkly", "link": "https://stackoverflow.com/users/1448966/a-fader-darkly"}, "edited": false, "score": 0, "creation_date": 1435778838, "post_id": 31168128, "comment_id": 50347777, "body": "It is indeed faster. Benchmark has it running in significantly less than half the time. Sold, have a green tick. The solution may have been trivial, but I definitely learned something from the process of asking and your answer. Many thanks."}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": true, "score": 2, "last_activity_date": 1435776967, "last_edit_date": 1435776967, "creation_date": 1435772419, "answer_id": 31168128, "question_id": 31166679, "link": "https://stackoverflow.com/questions/31166679/in-ruby-how-do-i-split-a-range-into-chunks-for-batch-operations/31168128#31168128", "title": "In Ruby, how do I split a range into chunks for batch operations?", "body": "<p>Are you looking for something as simple as this? </p>\n\n<pre><code>def chunkify(max_val,chunk_size);\n  max_val.downto(1).each_slice(chunk_size) {|chunk| yield chunk.reverse }\nend \n\nchunkify(100,10) {|c| puts c.inspect }\n  #[91, 92, 93, 94, 95, 96, 97, 98, 99, 100]\n  #[81, 82, 83, 84, 85, 86, 87, 88, 89, 90]\n  #[71, 72, 73, 74, 75, 76, 77, 78, 79, 80]\n  #[61, 62, 63, 64, 65, 66, 67, 68, 69, 70]\n  #[51, 52, 53, 54, 55, 56, 57, 58, 59, 60]\n  #[41, 42, 43, 44, 45, 46, 47, 48, 49, 50]\n  #[31, 32, 33, 34, 35, 36, 37, 38, 39, 40]\n  #[21, 22, 23, 24, 25, 26, 27, 28, 29, 30]\n  #[11, 12, 13, 14, 15, 16, 17, 18, 19, 20]\n  #[1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n  #=&gt; nil\n</code></pre>\n\n<p>as @SergioTulentsev pointed out this seems trivial. </p>\n\n<p>Also reverse will be less efficient and equally as effective as in decrementing order because SQL does not care about the order for an <code>IN()</code> clause.</p>\n"}], "owner": {"reputation": 3138, "user_id": 1448966, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aNPnb.jpg?s=128&g=1", "display_name": "A Fader Darkly", "link": "https://stackoverflow.com/users/1448966/a-fader-darkly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1857, "favorite_count": 0, "accepted_answer_id": 31168128, "answer_count": 2, "score": 2, "last_activity_date": 1435779399, "creation_date": 1435767474, "last_edit_date": 1435779399, "question_id": 31166679, "link": "https://stackoverflow.com/questions/31166679/in-ruby-how-do-i-split-a-range-into-chunks-for-batch-operations", "title": "In Ruby, how do I split a range into chunks for batch operations?", "body": "<p>This should be a fun little puzzle for all you Ruby golfers and gymnasts.</p>\n\n<p>The problem: I have millions of SQL database records that I need to move over to a NoSql database in batches of maybe 1000 or so, in reverse ID order (so find_each isn't a valid solution).</p>\n\n<p>This will run on a small server so I don't want to keep all the IDs in memory at once, just the IDs for one chunk.</p>\n\n<p>I'm hoping to use something along these lines in my codebase:</p>\n\n<pre><code>chunkify max_id, step_size do |ids|\n  copy_to_nosql SqlTable.where(id: ids)\nend\n</code></pre>\n\n<p>Can you write <code>chunkify</code>?</p>\n\n<p>The solution should not repeat any IDs, it should cover all IDs, the first yielded array should contain max_id and the lowest ID returned should be 1.</p>\n\n<p>PS. I am using the Rails framework, so feel free to use Rails specific language augmentations.</p>\n\n<p>PPS. I don't want to use database-driven solutions like 'limit' and 'offset', as for my database implementation at least, queries take longer to process as the offset increases.</p>\n\n<p>EDIT</p>\n\n<p>Here's a working solution. Any alternatives improving on readability, terseness or efficiency are most welcome:</p>\n\n<pre><code>  # yields arrays of ints (chunks), of [chunk_size] or lower length, which,\n  # when added together, would cover all values from 0 to [top_value], exactly\n  # once each. The highest value 'chunk' is provided first.\n  #\n  # &gt; chunkify(100, 10) { |chunk| puts chunk.inspect }\n  # [91, 92, 93, 94, 95, 96, 97, 98, 99, 100]\n  # [81, 82, 83, 84, 85, 86, 87, 88, 89, 90]\n  # ...\n  # [11, 12, 13, 14, 15, 16, 17, 18, 19, 20]\n  # [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n  # =&gt; 100\n  # &gt; chunkify(27, 8) { |chunk| puts chunk.inspect }\n  # [20, 21, 22, 23, 24, 25, 26, 27]\n  # [12, 13, 14, 15, 16, 17, 18, 19]\n  # [4, 5, 6, 7, 8, 9, 10, 11]\n  # [1, 2, 3]\n  # =&gt; 27\n  def chunkify(top_value, chunk_size)\n    top_value.step(1, -chunk_size) do |i|\n      yield ((i-chunk_size &gt; 0 ? i-chunk_size+1 : 1)...i+1).to_a\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1435775805, "post_id": 31166494, "comment_id": 50346024, "body": "I would suggest truncating your post, removing messages in the log, or even bits of code, that do not relate to the problem at hand. Your files are quite long, and may even be better in a gist or pastebin."}, {"owner": {"reputation": 1785, "user_id": 3373470, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8f968c218643a09267014e4beaeb4770?s=128&d=identicon&r=PG&f=1", "display_name": "onebree", "link": "https://stackoverflow.com/users/3373470/onebree"}, "edited": false, "score": 0, "creation_date": 1435775995, "post_id": 31166494, "comment_id": 50346126, "body": "Furthermore, Remember that you can still add logger statements in the view and controller! This will help determining whether objects are nil."}], "answers": [{"comments": [{"owner": {"reputation": 79, "user_id": 5070418, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-h8c3ECEzKtY/AAAAAAAAAAI/AAAAAAAAAFM/7qPfMD4YOFc/photo.jpg?sz=128", "display_name": "Vietnam Archive", "link": "https://stackoverflow.com/users/5070418/vietnam-archive"}, "edited": false, "score": 0, "creation_date": 1435773895, "post_id": 31166827, "comment_id": 50344872, "body": "That doesn&#39;t seem to solve the problem.  I still get the same error."}], "tags": [], "owner": {"reputation": 287, "user_id": 4892528, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/071cd4948003c3be5e43060053802d67?s=128&d=identicon&r=PG&f=1", "display_name": "Sheharose", "link": "https://stackoverflow.com/users/4892528/sheharose"}, "is_accepted": false, "score": 1, "last_activity_date": 1435851428, "last_edit_date": 1435851428, "creation_date": 1435767892, "answer_id": 31166827, "question_id": 31166494, "link": "https://stackoverflow.com/questions/31166494/actionviewtemplateerror-undefined-method-strip-for-nilnilclass/31166827#31166827", "title": "ActionView::Template::Error (undefined method `strip!&#39; for nil:NilClass)", "body": "<p>The error is in your _inline_results.html.erb... </p>\n\n<pre><code>&lt;% elsif result[\"primary_type\"] === \"repository\" %&gt;\n        &lt;%= link_to result['title'], :controller =&gt; :search, :action =&gt; :repository, :repo_id =&gt; id %&gt;\n</code></pre>\n\n<p>the error is that the result['title'] is nil. so, add this line of code....</p>\n\n<pre><code>&lt;% elsif result[\"primary_type\"] === \"repository\" %&gt;\n  &lt;% if !result['title'].blank? %&gt;        \n    &lt;%= link_to result['title'], :controller =&gt; :search, :action =&gt; :repository, :repo_id =&gt; id %&gt;\n  &lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 5070418, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-h8c3ECEzKtY/AAAAAAAAAAI/AAAAAAAAAFM/7qPfMD4YOFc/photo.jpg?sz=128", "display_name": "Vietnam Archive", "link": "https://stackoverflow.com/users/5070418/vietnam-archive"}, "is_accepted": true, "score": 0, "last_activity_date": 1435775565, "creation_date": 1435775565, "answer_id": 31169043, "question_id": 31166494, "link": "https://stackoverflow.com/questions/31166494/actionviewtemplateerror-undefined-method-strip-for-nilnilclass/31169043#31169043", "title": "ActionView::Template::Error (undefined method `strip!&#39; for nil:NilClass)", "body": "<p>I got it figured out. Looks like some of the data imported had blank titles \"\". By updating them it was able to work.</p>\n"}], "owner": {"reputation": 79, "user_id": 5070418, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-h8c3ECEzKtY/AAAAAAAAAAI/AAAAAAAAAFM/7qPfMD4YOFc/photo.jpg?sz=128", "display_name": "Vietnam Archive", "link": "https://stackoverflow.com/users/5070418/vietnam-archive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1256, "favorite_count": 0, "accepted_answer_id": 31169043, "answer_count": 2, "score": 1, "last_activity_date": 1435851428, "creation_date": 1435766884, "question_id": 31166494, "link": "https://stackoverflow.com/questions/31166494/actionviewtemplateerror-undefined-method-strip-for-nilnilclass", "title": "ActionView::Template::Error (undefined method `strip!&#39; for nil:NilClass)", "body": "<p>It seems I'm running into this error when I insert more than 100,000 records. I know it can support way more than that. The error is below and the code for the related classes.</p>\n\n<pre><code>2015-07-01 08:14:24.512:INFO:/:Started GET \"/search?type=digital_object\" for 129.118.15.44 at 2015-07-01 08:14:24 -0500|\n2015-07-01 08:14:24.512:INFO:/:Processing by SearchController#search as HTML|\n2015-07-01 08:14:24.512:INFO:/:  Parameters: {\"type\"=&gt;\"digital_object\"}|\nJul 01, 2015 8:14:24 AM org.apache.solr.core.SolrCore execute\nINFO: [collection1] webapp= path=/select params={facet=true&amp;sort=title_sort+asc&amp;facet.limit=100&amp;qf=four_part_id^3+title^2+finding_aid_filing_title^2+fullrecord&amp;wt=json&amp;rows=10&amp;defType=edismax&amp;pf=four_part_id^4&amp;start=0&amp;q=*:*&amp;facet.field=repository&amp;facet.field=primary_type&amp;facet.field=subjects&amp;facet.field=source&amp;facet.field=linked_agent_roles&amp;fq=types:(\"digital_object\")&amp;fq=-exclude_by_default:true&amp;fq=publish:true} hits=203799 status=0 QTime=15 \n2015-07-01 08:14:24.590:INFO:/:  Rendered G:/archivesspace/plugins/vva/public/views/search/_components_switch.html.erb (15.0ms)|\n2015-07-01 08:14:24.590:INFO:/:  Rendered search/_filter.html.erb (0.0ms)|\n2015-07-01 08:14:24.606:INFO:/:  Rendered search/_pagination_summary.html.erb (16.0ms)|\n2015-07-01 08:14:24.637:INFO:/:  Rendered search/_inline_results.html.erb (47.0ms)|\n2015-07-01 08:14:24.637:INFO:/:  Rendered search/results.html.erb within layouts/application (62.0ms)|\n2015-07-01 08:14:24.653:INFO:/:Completed 500 Internal Server Error in 141.0ms|\n2015-07-01 08:14:24.653:INFO:/:|ActionView::Template::Error (undefined method `strip!' for nil:NilClass):|    \n17:           &lt;% elsif result[\"primary_type\"] === \"repository\" %&gt;|    \n18:             &lt;%= link_to result['title'], :controller =&gt; :search, :action =&gt; :repository, :repo_id =&gt; id %&gt;|    \n19:           &lt;% else %&gt;|    \n20:             &lt;%= link_to title_or_finding_aid_filing_title( result )  , :controller =&gt; :records, :action =&gt; result[\"primary_type\"], :id =&gt; id, :repo_id =&gt; repo_id %&gt;|    \n21:           &lt;% end %&gt;|    \n22:         &lt;/h3&gt;|    \n23:         &lt;div class=\"result-summary\"&gt;|  app/helpers/application_helper.rb:22:in `title_or_finding_aid_filing_title'|  \napp/views/search/_inline_results.html.erb:20:in `_app_views_search__inline_results_html_erb___996910774_15116'| \napp/views/search/_inline_results.html.erb:5:in `_app_views_search__inline_results_html_erb___996910774_15116'|  \napp/helpers/application_helper.rb:134:in `render_aspace_partial'|  \napp/views/search/results.html.erb:13:in `_app_views_search_results_html_erb__332589766_15048'|  \napp/controllers/search_controller.rb:21:in `search'|  \napp/controllers/search_controller.rb:20:in `search'|||\n</code></pre>\n\n<p>_inline_results.html.erb</p>\n\n<pre><code>&lt;div class=\"search-results\"&gt;\n&lt;% if search_data.results? %&gt;\n  &lt;%= render_aspace_partial :partial =&gt; \"search/pagination_summary\", :locals =&gt; {:search_data =&gt; search_data} %&gt;\n  &lt;ul class=\"results-list\"&gt;\n    &lt;% search_data['results'].each do |result| %&gt;\n      &lt;%\n         id = JSONModel(result[\"primary_type\"]).id_for(result['uri'])\n         repo_id = JSONModel(:repository).id_for(JSONModel.repository_for(result['uri']),{}, true)\n      %&gt;\n      &lt;li class=\"result\"&gt;\n        &lt;h3&gt;\n          &lt;%= icon_for result[\"primary_type\"] %&gt;\n          &lt;% if result[\"primary_type\"] === \"subject\" %&gt;\n            &lt;%= link_to result[\"title\"], {\"filter_term\" =&gt; search_data.facet_query_string(\"subjects\", result[\"title\"])} %&gt;\n          &lt;% elsif [\"agent_person\", \"agent_software\", \"agent_family\", \"agent_corporate_entity\"].include?(result[\"primary_type\"]) %&gt;\n            &lt;%= link_to result['title'], :controller =&gt; :records, :action =&gt; :agent, :id =&gt; id, :agent_type =&gt; result[\"primary_type\"] %&gt;\n          &lt;% elsif result[\"primary_type\"] === \"repository\" %&gt;\n            &lt;%= link_to result['title'], :controller =&gt; :search, :action =&gt; :repository, :repo_id =&gt; id %&gt;\n          &lt;% else %&gt;\n            &lt;%= link_to title_or_finding_aid_filing_title( result )  , :controller =&gt; :records, :action =&gt; result[\"primary_type\"], :id =&gt; id, :repo_id =&gt; repo_id %&gt;\n          &lt;% end %&gt;\n        &lt;/h3&gt;\n        &lt;div class=\"result-summary\"&gt;\n          &lt;%= render_aspace_partial :partial =&gt; \"search/result_summary_#{result[\"primary_type\"]}\", :locals =&gt; {:obj =&gt; result} %&gt;\n        &lt;/div&gt;\n      &lt;/li&gt;\n    &lt;% end %&gt;\n  &lt;/ul&gt;\n  &lt;%= render_aspace_partial :partial =&gt; \"search/pagination\", :locals =&gt; {:search_data =&gt; search_data} %&gt;\n&lt;% else %&gt;\n  &lt;p class=\"alert alert-info\"&gt;\n    &lt;%= I18n.t(\"search_results.no_results\") %&gt;&lt;/em&gt;.\n  &lt;/p&gt;\n&lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>search_controller.rb</p>\n\n<pre><code>require 'advanced_query_builder'\n\nclass SearchController &lt; ApplicationController\n\n  DETAIL_TYPES = ['accession', 'resource', 'archival_object', 'digital_object',\n                  'digital_object_component', 'classification',\n                  'agent_person', 'agent_family', 'agent_software', 'agent_corporate_entity']\n\n  VIEWABLE_TYPES = ['agent', 'repository', 'subject'] + DETAIL_TYPES\n\n  FACETS = [\"repository\", \"primary_type\", \"subjects\", \"source\", \"linked_agent_roles\"]\n\n\n  def search\n    set_search_criteria\n\n    @search_data = Search.all(@criteria, @repositories)\n    @term_map = params[:term_map] ? ASUtils.json_parse(params[:term_map]) : {}\n\n    respond_to do |format|\n      format.html { render \"search/results\" }\n      format.js { render_aspace_partial :partial =&gt; \"search/inline_results\", :content_type =&gt; \"text/html\", :locals =&gt; {:search_data =&gt; @search_data} }\n    end\n  end\n\n  def advanced_search\n    set_advanced_search_criteria\n\n    @search_data = Search.all(@criteria, @repositories)\n\n    render \"search/results\"\n  end\n\n  def repository\n    set_search_criteria\n\n    if params[:repo_id].blank?\n      @search_data = Search.all(@criteria.merge({\"facet[]\" =&gt; [], \"type[]\" =&gt; [\"repository\"]}), {})\n\n      return render \"search/results\"\n    end\n\n    @repository = @repositories.select{|repo| JSONModel(:repository).id_for(repo.uri).to_s === params[:repo_id]}.first\n\n    @breadcrumbs = [\n      [@repository['repo_code'], url_for(:controller =&gt; :search, :action =&gt; :repository, :id =&gt; @repository.id), \"repository\"]\n    ]\n\n    @search_data = Search.repo(@repository.id, @criteria, @repositories)\n\n    render \"search/results\"\n  end\n\n\n  private\n\n  def set_search_criteria\n    @criteria = params.select{|k,v|\n      [\"page\", \"q\", \"type\", \"sort\",\n       \"filter_term\", \"root_record\", \"format\"].include?(k) and not v.blank?\n    }\n\n    @criteria[\"page\"] ||= 1\n    @criteria[\"sort\"] = \"title_sort asc\" unless @criteria[\"sort\"] or @criteria[\"q\"] or params[\"advanced\"].present?\n\n    if @criteria[\"filter_term\"]\n      @criteria[\"filter_term[]\"] = Array(@criteria[\"filter_term\"]).reject{|v| v.blank?}\n      @criteria.delete(\"filter_term\")\n    end\n\n    if params[:type].blank?\n      @criteria['type[]'] = DETAIL_TYPES\n    else\n      @criteria['type[]'] = Array(params[:type]).keep_if {|t| VIEWABLE_TYPES.include?(t)}\n      @criteria.delete(\"type\")\n    end\n\n    @criteria['exclude[]'] = params[:exclude] if not params[:exclude].blank?\n    @criteria['facet[]'] = FACETS\n  end\n\n\n  def set_advanced_search_criteria\n    set_search_criteria\n\n    terms = (0..2).collect{|i|\n      term = search_term(i)\n\n      if term and term[\"op\"] === \"NOT\"\n        term[\"op\"] = \"AND\"\n        term[\"negated\"] = true\n      end\n\n      term\n    }.compact\n\n    if not terms.empty?\n      @criteria[\"aq\"] = AdvancedQueryBuilder.new(terms, :public).build_query.to_json\n      @criteria['facet[]'] = FACETS\n    end\n  end\n\n  def search_term(i)\n    if not params[\"v#{i}\"].blank?\n      { \"field\" =&gt; params[\"f#{i}\"], \"value\" =&gt; params[\"v#{i}\"], \"op\" =&gt; params[\"op#{i}\"], \"type\" =&gt; \"text\" }\n    end\n  end\n\nend\n</code></pre>\n\n<p>application_helper.rb</p>\n\n<pre><code>module ApplicationHelper\n\n  def include_theme_css\n    css = \"\"\n    css += stylesheet_link_tag(\"themes/#{ArchivesSpacePublic::Application.config.public_theme}/bootstrap\", :media =&gt; \"all\")\n    css += stylesheet_link_tag(\"themes/#{ArchivesSpacePublic::Application.config.public_theme}/application\", :media =&gt; \"all\")\n    css.html_safe\n  end\n\n  def set_title(title)\n    @title = title\n  end\n\n  def title_or_finding_aid_filing_title(resource)\n    if resource[\"finding_aid_filing_title\"] &amp;&amp; !resource[\"finding_aid_filing_title\"].nil? &amp;&amp; resource[\"finding_aid_filing_title\"].length &gt; 0\n      title = resource[\"finding_aid_filing_title\"]\n    elsif resource[\"title\"] &amp;&amp; !resource[\"title\"].nil?\n      title = resource[\"title\"]\n    else\n      title = resource[\"display_string\"]\n    end\n    MixedContentParser::parse(title, url_for(:root))\n\n\n  end\n\n  def icon_for(type)\n    \"&lt;span class='icon-#{type}' title='#{I18n.t(\"#{type}._singular\")}'&gt;&lt;/span&gt;\".html_safe\n  end\n\n  def label_and_value(label, value)\n    return if value.blank?\n\n    label = content_tag(:dt, label)\n    value = content_tag(:dd, value)\n\n    label + value\n  end\n\n  def i18n_enum(jsonmodel_type, property, value)\n    return if value.blank?\n\n    property_defn = JSONModel(jsonmodel_type).schema[\"properties\"][property]\n\n    return if property_defn.nil?\n\n    if property_defn.has_key? \"dynamic_enum\"\n      enum_key = property_defn[\"dynamic_enum\"]\n      #return \"enumerations.#{enum_key}.#{value}\"\n      I18n.t(\"enumerations.#{enum_key}.#{value}\", :default =&gt; value)\n    else\n      I18n.t(\"#{jsonmodel_type}.#{property}_#{value}\", :default =&gt; value) \n    end\n  end\n\n  def params_for_search(opts = {})\n    search_params = {\n      :controller =&gt; :search,\n      :action =&gt; :search\n    }\n\n    search_params[\"filter_term\"] = Array(opts[\"filter_term\"] || params[\"filter_term\"]).clone\n    search_params[\"filter_term\"].concat(Array(opts[\"add_filter_term\"])) if opts[\"add_filter_term\"]\n    search_params[\"filter_term\"] = search_params[\"filter_term\"].reject{|f| Array(opts[\"remove_filter_term\"]).include?(f)} if opts[\"remove_filter_term\"]\n\n    search_params[\"sort\"] = opts[\"sort\"] || params[\"sort\"]\n\n    search_params[\"q\"] = opts[\"q\"] || params[\"q\"]\n\n    search_params[\"format\"] = params[\"format\"]\n    search_params[\"root_record\"] = params[\"root_record\"]\n    search_params[\"agent_type\"] = params[\"agent_type\"]\n\n    search_params[\"page\"] = opts[\"page\"] || params[\"page\"] || 1\n\n    if opts[\"type\"] &amp;&amp; opts[\"type\"].kind_of?(Array)\n      search_params[\"type\"] = opts[\"type\"]\n    else\n      search_params[\"type\"] = opts[\"type\"] || params[\"type\"]\n    end\n\n    search_params[\"term_map\"] = params[\"term_map\"]\n\n    # retain any advanced search params\n    advanced = (opts[\"advanced\"] || params[\"advanced\"])\n    search_params[\"advanced\"] = advanced.blank? || advanced === 'false' ? false : true\n    search_params[:action] = :advanced_search if search_params[\"advanced\"]\n\n    (0..2).each do |i|\n      search_params[\"v#{i}\"] = params[\"v#{i}\"]\n      search_params[\"f#{i}\"] = params[\"f#{i}\"]\n      search_params[\"op#{i}\"] = params[\"op#{i}\"]\n    end\n\n    search_params.reject{|k,v| k.blank? or v.blank?}\n  end\n\n  def set_title_for_search\n    title =  I18n.t(\"actions.search\")\n\n    if @search_data\n      if params[:type] &amp;&amp; !@search_data.types.blank?\n        title = \"#{I18n.t(\"search_results.searching\")} #{@search_data.types.join(\", \")}\"\n      end\n\n      facets_to_display = []\n\n      if @search_data.query?\n        facets_to_display &lt;&lt; @search_data.facet_label_for_query\n      end\n\n      if @search_data.filtered_terms?\n        facets_to_display &lt;&lt; @search_data[:criteria][\"filter_term[]\"].collect{|filter_term| @search_data.facet_label_for_filter(filter_term)}\n      end\n\n      if facets_to_display.length &gt; 0\n        title += \" | #{facets_to_display.join(\", \")}\"\n      end\n    end\n\n    set_title(title)\n  end\n\n  def truncate(string, length = 50, trailing = '&amp;hellip;')\n    return string if string.length &lt; length\n\n    \"#{string[0..50]}#{trailing}\".html_safe\n  end\n\n\n  # See: ApplicationController#render_aspace_partial\n  def render_aspace_partial(args)\n    defaults = {:formats =&gt; [:html], :handlers =&gt; [:erb]}\n    return render(defaults.merge(args))\n  end\n\n  def proxy_localhost?\n    AppConfig[:frontend_proxy_url] =~ /localhost/\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1435767178, "post_id": 31166363, "comment_id": 50341107, "body": "In which file did you get this error?"}, {"owner": {"reputation": 349, "user_id": 700467, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f0a454d0f5002eea5f0b7d98596b4ac1?s=128&d=identicon&r=PG&f=1", "display_name": "captain awesome", "link": "https://stackoverflow.com/users/700467/captain-awesome"}, "reply_to_user": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1435767318, "post_id": 31166363, "comment_id": 50341189, "body": "In the controller on this line: <code>@category_id = Category.find_by(name: params[:category]).id</code>"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1435767448, "post_id": 31166363, "comment_id": 50341273, "body": "How you are passing the <code>params[:category]</code>?"}, {"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1435767467, "post_id": 31166363, "comment_id": 50341288, "body": "What is that you get in params[:category]?"}, {"owner": {"reputation": 349, "user_id": 700467, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f0a454d0f5002eea5f0b7d98596b4ac1?s=128&d=identicon&r=PG&f=1", "display_name": "captain awesome", "link": "https://stackoverflow.com/users/700467/captain-awesome"}, "edited": false, "score": 0, "creation_date": 1435772971, "post_id": 31166363, "comment_id": 50344337, "body": "the <code>params[:category]</code> is being passed by the <code>application view</code> template. <code>link_to category.name, articles_path(category: category.name)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 349, "user_id": 700467, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f0a454d0f5002eea5f0b7d98596b4ac1?s=128&d=identicon&r=PG&f=1", "display_name": "captain awesome", "link": "https://stackoverflow.com/users/700467/captain-awesome"}, "edited": false, "score": 0, "creation_date": 1435773204, "post_id": 31167402, "comment_id": 50344489, "body": "I had to modify the index action from <code>if params[:category ].blank?</code> to <code>if params[:name].blank?</code> Now I am receiving <code>undefined method &#39;articles&#39; for nil:NilClass</code> for <code>@articles = @category.articles</code>"}, {"owner": {"reputation": 287, "user_id": 4892528, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/071cd4948003c3be5e43060053802d67?s=128&d=identicon&r=PG&f=1", "display_name": "Sheharose", "link": "https://stackoverflow.com/users/4892528/sheharose"}, "reply_to_user": {"reputation": 349, "user_id": 700467, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f0a454d0f5002eea5f0b7d98596b4ac1?s=128&d=identicon&r=PG&f=1", "display_name": "captain awesome", "link": "https://stackoverflow.com/users/700467/captain-awesome"}, "edited": false, "score": 0, "creation_date": 1435773549, "post_id": 31167402, "comment_id": 50344677, "body": "add this in your view...link_to category.name, articles_path(name: category.name)"}, {"owner": {"reputation": 349, "user_id": 700467, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f0a454d0f5002eea5f0b7d98596b4ac1?s=128&d=identicon&r=PG&f=1", "display_name": "captain awesome", "link": "https://stackoverflow.com/users/700467/captain-awesome"}, "edited": false, "score": 0, "creation_date": 1435773914, "post_id": 31167402, "comment_id": 50344880, "body": "i&#39;ve modified from from <code>articles_path(name: category.name.downcase)</code> to <code>articles_path(name: category.name)</code>, though this works, I don&#39;t have downcase urls."}, {"owner": {"reputation": 349, "user_id": 700467, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f0a454d0f5002eea5f0b7d98596b4ac1?s=128&d=identicon&r=PG&f=1", "display_name": "captain awesome", "link": "https://stackoverflow.com/users/700467/captain-awesome"}, "edited": false, "score": 0, "creation_date": 1435808429, "post_id": 31167402, "comment_id": 50357608, "body": "I&#39;ve installed this gem. Though the links are all downcased and no errors are returned, what&#39;s happening now is that no matter what <code>category</code> link I choose, it returns all of the articles as if each link called, <code>Article.all</code>."}, {"owner": {"reputation": 287, "user_id": 4892528, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/071cd4948003c3be5e43060053802d67?s=128&d=identicon&r=PG&f=1", "display_name": "Sheharose", "link": "https://stackoverflow.com/users/4892528/sheharose"}, "reply_to_user": {"reputation": 349, "user_id": 700467, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f0a454d0f5002eea5f0b7d98596b4ac1?s=128&d=identicon&r=PG&f=1", "display_name": "captain awesome", "link": "https://stackoverflow.com/users/700467/captain-awesome"}, "edited": false, "score": 0, "creation_date": 1435848364, "post_id": 31167402, "comment_id": 50380710, "body": "please try the edited answer and remove the gem mentioned in the above comment......"}, {"owner": {"reputation": 287, "user_id": 4892528, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/071cd4948003c3be5e43060053802d67?s=128&d=identicon&r=PG&f=1", "display_name": "Sheharose", "link": "https://stackoverflow.com/users/4892528/sheharose"}, "reply_to_user": {"reputation": 349, "user_id": 700467, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f0a454d0f5002eea5f0b7d98596b4ac1?s=128&d=identicon&r=PG&f=1", "display_name": "captain awesome", "link": "https://stackoverflow.com/users/700467/captain-awesome"}, "edited": false, "score": 0, "creation_date": 1435848499, "post_id": 31167402, "comment_id": 50380802, "body": "Actually,,,, instead of the above method,  you can downcase all the category names before saving it to the database and while displaying it in view you can capitalize it. its very easy and simple"}, {"owner": {"reputation": 349, "user_id": 700467, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f0a454d0f5002eea5f0b7d98596b4ac1?s=128&d=identicon&r=PG&f=1", "display_name": "captain awesome", "link": "https://stackoverflow.com/users/700467/captain-awesome"}, "edited": false, "score": 0, "creation_date": 1435862247, "post_id": 31167402, "comment_id": 50389253, "body": "You&#39;re awesome!! Thank you! :). I was thinking about going with the <code>display_name</code> and <code>route_name</code> for category names in the db method if all else failed but this works perfectly. Again, thank you!"}], "tags": [], "owner": {"reputation": 287, "user_id": 4892528, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/071cd4948003c3be5e43060053802d67?s=128&d=identicon&r=PG&f=1", "display_name": "Sheharose", "link": "https://stackoverflow.com/users/4892528/sheharose"}, "is_accepted": true, "score": 1, "last_activity_date": 1435848333, "last_edit_date": 1435848333, "creation_date": 1435769812, "answer_id": 31167402, "question_id": 31166363, "link": "https://stackoverflow.com/questions/31166363/rails-how-to-force-parameterized-or-downcase-urls-when-using-find-byobject-p/31167402#31167402", "title": "Rails - How to force parameterized or downcase URLS when using find_by(object: params[:object]).id?", "body": "<p>When there is an association between articles and category... You can get all the articles which belongs to Category:</p>\n\n<pre><code>@categories = Category.all\n@categories.each do |category|\n  @category ||= Category.find(category.id) if category.name.downcase == params[:name]\nend\nif @category\n  @articles = @category.articles\nelse\n  @articles = Article.all.order(\"created_at DESC\")\nend  \n</code></pre>\n\n<p>Include the above code in the Articles Controller in index action.</p>\n\n<p>in the view...</p>\n\n<pre><code>link_to category.name, articles_path(name: category.name.downcase)\n</code></pre>\n"}], "owner": {"reputation": 349, "user_id": 700467, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f0a454d0f5002eea5f0b7d98596b4ac1?s=128&d=identicon&r=PG&f=1", "display_name": "captain awesome", "link": "https://stackoverflow.com/users/700467/captain-awesome"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "accepted_answer_id": 31167402, "answer_count": 1, "score": 0, "last_activity_date": 1435848333, "creation_date": 1435766523, "last_edit_date": 1435767996, "question_id": 31166363, "link": "https://stackoverflow.com/questions/31166363/rails-how-to-force-parameterized-or-downcase-urls-when-using-find-byobject-p", "title": "Rails - How to force parameterized or downcase URLS when using find_by(object: params[:object]).id?", "body": "<p>How can I force parameterized or downcase URLS when using find_by id?</p>\n\n<p><strong>articles controller</strong></p>\n\n<pre><code>    def index\n        if params[:category].blank?\n            @articles = Article.all.order(\"created_at DESC\")\n        else\n            @category_id = Category.find_by(name: params[:category]).id\n            @articles = Article.where(category_id: @category_id).order(\"created_at DESC\")\n        end\n    end\n</code></pre>\n\n<p><strong>application view</strong></p>\n\n<p><code>link_to category.name, articles_path(category: category.name)</code></p>\n\n<p><strong>models:</strong></p>\n\n<pre><code>class Article &lt; ActiveRecord::Base\n    belongs_to :user\n    belongs_to :category\nend\n\n\nclass Category &lt; ActiveRecord::Base\n    has_many :articles\nend\n</code></pre>\n\n<p>I've tried the following...</p>\n\n<p><code>link_to category.name, articles_path(category: category.name.downcase)</code></p>\n\n<p><code>link_to category.name, articles_path(category: category.name).downcase</code></p>\n\n<p>but I'm receiving <code>undefined 'method 'id' for nil:NilClass</code>.</p>\n\n<p>Only way I've been able to accomplish this was creating views for each category but I'm looking to keep this as dry as possible.</p>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["ruby", "selenium-webdriver", "cucumber", "watir-webdriver"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 1, "creation_date": 1435772017, "post_id": 31165899, "comment_id": 50343851, "body": "Are you sure that the warning is occurring for that element? The warning only gets raised if you use the <code>text_field</code> method to locate a <code>textarea</code> element. In other words, the warnings is for <code>&lt;textarea id=&quot;some_id&quot;&gt;</code> not for <code>&lt;input id=&quot;some_id&quot; type=&quot;text&quot;&gt;</code>."}, {"owner": {"reputation": 9, "user_id": 4978524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4137ec6e8e5ef68982beeb663e20ad4?s=128&d=identicon&r=PG&f=1", "display_name": "acappelgryn", "link": "https://stackoverflow.com/users/4978524/acappelgryn"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1435775981, "post_id": 31165899, "comment_id": 50346116, "body": "Yes I am sure the warning is for <code>&lt;input id=&quot;some_id&quot; type=&quot;text&quot;&gt;</code> and not <code>&lt;textarea id=&quot;some_id&quot;&gt;</code> I have double checked. I can post the html if you need me to."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1435810968, "post_id": 31165899, "comment_id": 50358203, "body": "I inputted both of the text fields using <code>browser.text_field(id: &#39;login&#39;).when_present.set &#39;text&#39;</code> and <code>browser.text_field(id: &#39;password&#39;).when_present.set &#39;text&#39;</code>, neither of which gave the deprecation warning. I was using v0.8.0 with Chrome and Firefox. What is the Watir code that you are running for this HTML that generates the warning?"}, {"owner": {"reputation": 9, "user_id": 4978524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4137ec6e8e5ef68982beeb663e20ad4?s=128&d=identicon&r=PG&f=1", "display_name": "acappelgryn", "link": "https://stackoverflow.com/users/4978524/acappelgryn"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1435847323, "post_id": 31165899, "comment_id": 50379936, "body": "I have added the watir code I use @Justin Ko."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1435848273, "post_id": 31165899, "comment_id": 50380647, "body": "Sorry, I still cannot reproduce the error given that HTML and Watir/Cucumber code. Looking at the <a href=\"https://github.com/watir/watir-webdriver/blob/master/lib/watir-webdriver/locators/text_field_locator.rb#L86-L90\" rel=\"nofollow noreferrer\">Watir-Webdriver code</a>, I really do not see how the warning would be raised for an input element. When you see the warning you are only running this one single step?"}, {"owner": {"reputation": 9, "user_id": 4978524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4137ec6e8e5ef68982beeb663e20ad4?s=128&d=identicon&r=PG&f=1", "display_name": "acappelgryn", "link": "https://stackoverflow.com/users/4978524/acappelgryn"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1435936842, "post_id": 31165899, "comment_id": 50421791, "body": "No I running this step as a Background for other Scenarios that perform other functions."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1435937490, "post_id": 31165899, "comment_id": 50422148, "body": "Then I would guess that the warning is coming from one of those other functions. Please extract a runnable example that allows us to see the warning."}, {"owner": {"reputation": 9, "user_id": 4978524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4137ec6e8e5ef68982beeb663e20ad4?s=128&d=identicon&r=PG&f=1", "display_name": "acappelgryn", "link": "https://stackoverflow.com/users/4978524/acappelgryn"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1436198350, "post_id": 31165899, "comment_id": 50498031, "body": "@Justin Ko - I uninstalled the watir-webdriver (0.8.0) and selenium-webdriver (2.46) gems and reinstalled them and the message for the deprecated text_field is not displaying anymore. Seems like something happened when I installed the gem. Thank you for the effort in trying to solve my issue. If the problem occurs again I will come back to this question."}], "owner": {"reputation": 9, "user_id": 4978524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4137ec6e8e5ef68982beeb663e20ad4?s=128&d=identicon&r=PG&f=1", "display_name": "acappelgryn", "link": "https://stackoverflow.com/users/4978524/acappelgryn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 864, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1435847468, "creation_date": 1435765278, "last_edit_date": 1435847468, "question_id": 31165899, "link": "https://stackoverflow.com/questions/31165899/watir-webdriver-text-field-deprecation-use-textarea-but-method-does-not-seem", "title": "Watir-Webdriver text_field deprecation - use textarea (but method does not seem to work)", "body": "<p>The new version of <strong>watir-webdriver (0.8.0)</strong> has been released. I have installed it and have been running my suites to check for changes. During this process I have noticed the text_field methods I am using to set text in <code>&lt;input id=\"some_id\" type=\"text\"&gt;</code> tags has been deprecated from the message <code>Locating textareas with '#text_field' is deprecated. Please, use '#textarea' method instead.</code> I changed the <code>text_field</code> method to <code>textarea</code>, but once I do this the element can no longer be located.</p>\n\n<p>Am I using the method wrong? I tried to use it as <code>browser.textarea(:id=&gt; 'some_id').when_present.set \"Text\"</code>. Once the method times out, I get the message saying the element with the tagname <code>textarea</code> could not be located. Was wondering if there is something else I need the do to use the <code>textarea</code> method to set text in a <code>&lt;input id=\"some_id\" type=\"text\"&gt;</code> tag.</p>\n\n<p><strong>EDITED</strong> => html I am trying to automate on:</p>\n\n<pre><code>&lt;form action=\"some_href\" method=\"post\"&gt;\n  &lt;p class=\"align\"&gt;\n    &lt;label for=\"user\"&gt;Username&lt;/label&gt;\n    &lt;input id=\"login\" type=\"text\" value=\"\"&gt;\n  &lt;/p&gt;\n  &lt;p class=\"align\"&gt;\n    &lt;label for=\"pass\"&gt;Password&lt;/label&gt;\n    &lt;input id=\"password\" type=\"password\" value=\"\"&gt;\n  &lt;/p&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p><strong>EDITED</strong> Watir code used to automate page</p>\n\n<pre><code>#RUBY CODE\nclass Login\n\n  def open\n    @browser = Watir::Browser.new :firefox\n    @browser.goto some_website_url #URL leading to page with form HTML above\n  end\n\n  def login_as\n    user_field.when_present(10).set username\n    password_field.when_present(10).set password\n    login_link.when_present(10).click\n  end\n\n  def user_field\n    @browser.text_field(:id=&gt; \"login\")\n  end\n\n  def password_field\n    @browser.text_field(:id=&gt; 'password')\n  end\n\n  def username\n    \"user123\"\n  end\n\n  def password\n    \"p@ssw0rd\"\n  end\n\n  def login_link\n    @browser.link(:text=&gt; 'Sign-in')\n  end\nend#Login\n\n#STEP DEFINITION\nGiven(/^login to website$/) do\n  login = Login.new\n  login.open\n  login.login_as\nend\n</code></pre>\n\n<p>The previous versions I have been using without the deprecation message is:</p>\n\n<p><strong>watir-webdriver (0.6.11)</strong></p>\n\n<p><strong>selenium-webdriver (2.44.0)</strong></p>\n\n<p>Any answers would be appreciated if someone has some insight on the problem.</p>\n"}, {"tags": ["ruby", "rspec", "configuration"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 3753303, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/90c069324d7b4e7d14669bb92fca52f0?s=128&d=identicon&r=PG&f=1", "display_name": "emag3m", "link": "https://stackoverflow.com/users/3753303/emag3m"}, "edited": false, "score": 0, "creation_date": 1435768621, "post_id": 31165684, "comment_id": 50341963, "body": "really cool idea! However, it seems that block.call is throwing off the scope of the block because I&#39;m getting undefined method errors."}], "tags": [], "owner": {"reputation": 13635, "user_id": 1061413, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/0beb915463288cb6e8b50e8121860717?s=128&d=identicon&r=PG", "display_name": "Amit Kumar Gupta", "link": "https://stackoverflow.com/users/1061413/amit-kumar-gupta"}, "is_accepted": false, "score": 1, "last_activity_date": 1435764678, "creation_date": 1435764678, "answer_id": 31165684, "question_id": 31165323, "link": "https://stackoverflow.com/questions/31165323/rspec-is-there-a-way-do-execute-code-after-the-beforeeach-block-but-before-t/31165684#31165684", "title": "Rspec: Is there a way do execute code after the before(:each) block but before the actual it-block?", "body": "<p>Here's a hack that might work for you:</p>\n\n<pre><code>require 'rspec'\n\n$should_get_reset = 0\n$should_not_get_reset = 0\n\n# monkey-patch :before\nmodule RSpec::Core::Hooks\n    alias_method :original_before, :before\n    def before(*args, &amp;block)\n        original_before *args do\n            block.call\n            $should_get_reset = 0\n        end\n    end\n\n    # Alias :append_before to the new :before, because they do it here:\n    # https://github.com/rspec/rspec-core/blob/9f99b6aa24e24edd530035868e258abd24d88385/lib/rspec/core/hooks.rb#L201\n    alias_method :append_before, :before\nend\n\ndescribe \"Hi\" do\n    before do\n        $should_get_reset = 1\n        $should_not_get_reset = 1\n    end\n\n    it \"mom\" do\n        $should_get_reset += 1\n        $should_not_get_reset += 1\n        expect($should_get_reset).to eq(1)\n        expect($should_not_get_reset).to eq(2)\n    end\nend\n</code></pre>\n\n<p>You can save this in a file (say <code>foo_spec.rb</code>) and run <code>rspec foo_spec.rb</code> to see it work.  In practice, you would want to move your monkey-patching to a spec helper or support file.</p>\n"}], "owner": {"reputation": 65, "user_id": 3753303, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/90c069324d7b4e7d14669bb92fca52f0?s=128&d=identicon&r=PG&f=1", "display_name": "emag3m", "link": "https://stackoverflow.com/users/3753303/emag3m"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1435766825, "creation_date": 1435763745, "question_id": 31165323, "link": "https://stackoverflow.com/questions/31165323/rspec-is-there-a-way-do-execute-code-after-the-beforeeach-block-but-before-t", "title": "Rspec: Is there a way do execute code after the before(:each) block but before the actual it-block?", "body": "<p>I am trying to write a tool to measure the amount of http requests our feature specs make (if they make 0 we can move them over to a less expensive javascript spec). </p>\n\n<p>The problem I'm having is that I do not want to recognize requests made in the before(:each) block. I want to set my counts variable to 0 after the before(:each) block has been executed but before the 'it-block' has been executed.</p>\n\n<p>Right now the code looks something like this:</p>\n\n<pre><code>RSpec.configure do |config|\n\n  config.before(:each) do |test|\n    HTTPSpec::Counts= 0 \n  end\n\n  WebMock.after_request do |request_signature, response|\n    HTTPSpec::Counts += 1 \n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "mailer"], "comments": [{"owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "edited": false, "score": 0, "creation_date": 1435763509, "post_id": 31165135, "comment_id": 50338642, "body": "You have created a variable <code>@master_settings</code>, but used another -<code>@master</code>"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 4085234, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/bdee164f0fa8b8ef5e1982d13269c844?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/4085234/jenny"}, "edited": false, "score": 0, "creation_date": 1435763850, "post_id": 31165227, "comment_id": 50338889, "body": "here is how its getting set in the configuration loader helper:"}, {"owner": {"reputation": 75, "user_id": 4085234, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/bdee164f0fa8b8ef5e1982d13269c844?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/4085234/jenny"}, "edited": false, "score": 0, "creation_date": 1435763857, "post_id": 31165227, "comment_id": 50338893, "body": "doc.elements.each(&quot;DEFINITIONS/MAILGUN_THINGS&quot;) {|element|       master.set_alias_email(element.attributes[&quot;ALIAS_EMAIL&quot;])     }"}], "tags": [], "owner": {"reputation": 16076, "user_id": 802618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6111449042dd940f360673d25d61ea6b?s=128&d=identicon&r=PG", "display_name": "Kristj&#225;n", "link": "https://stackoverflow.com/users/802618/kristj%c3%a1n"}, "is_accepted": false, "score": 0, "last_activity_date": 1435763522, "creation_date": 1435763522, "answer_id": 31165227, "question_id": 31165135, "link": "https://stackoverflow.com/questions/31165135/rails-undefined-method-when-called-in-controller/31165227#31165227", "title": "Rails Undefined Method when called in controller", "body": "<p>You've loaded settings into <code>@master_settings</code>, but are trying to access <code>@master.get_alias_email</code>. The <code>@master</code> instance variable is <code>nil</code>.</p>\n"}], "owner": {"reputation": 75, "user_id": 4085234, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/bdee164f0fa8b8ef5e1982d13269c844?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/4085234/jenny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1435763522, "creation_date": 1435763262, "question_id": 31165135, "link": "https://stackoverflow.com/questions/31165135/rails-undefined-method-when-called-in-controller", "title": "Rails Undefined Method when called in controller", "body": "<p>In my controller for Bulletins that are posted I have this: </p>\n\n<pre><code> @master_settings = load_master_settings(Rails.root)\n  BulletinMailer.bulletin_email(params[:bulletin][:attachment].path, @master.get_alias_email).deliver\n</code></pre>\n\n<p>The master object is set from a Datasources.xml file, and in a configuration loader file it sets it using:</p>\n\n<pre><code>doc.elements.each(\"DEFINITIONS/MAILGUN_THINGS\") {|element|\n  master.set_alias_email(element.attributes[\"ALIAS_EMAIL\"])\n}\n</code></pre>\n\n<p>Then within an application_helper.rb I have these methods to set the attributes of the master object:</p>\n\n<pre><code>def set_alias_email(val)\n  @alias_email = val\nend\n\ndef get_alias_email\n  @alias_email\nend\n</code></pre>\n\n<p>When I try to send mail and put the alias email directly into the bulletin_mailer.rb file it works, however when I try to pass in a call to the alias_email attribute of the master object, the mail sends but does not arrive in my inbox indicating to me that something either isnt being stored or called correctly. </p>\n\n<p>The error I get is this:</p>\n\n<p>undefined method `get_alias_email' for nil:NilClass at the line that says:</p>\n\n<pre><code>BulletinMailer.bulletin_email(params[:bulletin][:attachment].path, @master.get_alias_email).deliver\n</code></pre>\n\n<p>So what is going on?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "is_accepted": true, "score": 1, "last_activity_date": 1435763703, "creation_date": 1435763703, "answer_id": 31165301, "question_id": 31164696, "link": "https://stackoverflow.com/questions/31164696/how-to-limit-the-amount-of-some-value-being-copied/31165301#31165301", "title": "How to limit the amount of some value being copied.", "body": "<p>Lets say you have a selector <code>$('.my_class')</code> and want to take only first <code>5</code> of them, simply do:</p>\n\n<pre><code>$('.my_class').slice(0, 5).val(text)\n</code></pre>\n\n<p>More info on <code>.slice()</code> <a href=\"https://api.jquery.com/slice/\" rel=\"nofollow\">here</a></p>\n"}], "owner": {"reputation": 199, "user_id": 4916244, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/JTjAA.jpg?s=128&g=1", "display_name": "Snowman", "link": "https://stackoverflow.com/users/4916244/snowman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 2, "accepted_answer_id": 31165301, "answer_count": 1, "score": 0, "last_activity_date": 1435763703, "creation_date": 1435762093, "question_id": 31164696, "link": "https://stackoverflow.com/questions/31164696/how-to-limit-the-amount-of-some-value-being-copied", "title": "How to limit the amount of some value being copied.", "body": "<p>Question is I have a javascript that enables my users to set a value lets say '0.6' and with setting this value they can copy it to the class id I specify in my javascript. The problem is I would like to figure out a way to limit this so lets say they copy the value but only want it to paste into the first 5 text fields how can I can I set a limit on how many times the value gets pasted, I am confused on how to accomplish this because the class id I have could have any amount of text fields. Any help would be greatly appreciated!!!</p>\n\n<p>Here is my JavaScript with the copy function </p>\n\n<pre><code>  $('.val_class').click(function() {\n    var txt;\n    var r = confirm(\"Are you sure you want to copy this value to each sample?.\");\n    var text = $('.val_box').val();\n     if (r == true) {\n       $('.reading_class').val(text);\n     } else {\n\n    }\n  });\n</code></pre>\n\n<p>Here is my view. </p>\n\n<pre><code>%th\n  %h2 Set a value to be copied to each sample.\n  %br\n  %tbody\n    %td\n      .js\n      %li Reading One\n      %br\n      =f.text_field :valc, :id =&gt; 'valc', :class =&gt; 'val_box', :hint =&gt; \"You can set a value in this text box that will be copied to all of the samples, by pressing copy value button.\"\n      .control-group\n        .controls\n          %button{:type =&gt; \"button\", :class =&gt; 'val_class', :id =&gt; \"val_class\"}Copy this value to all samples(Reading One)\n\n\n-@samples.each do |sample|\n\n =number_field_tag \"dimension[samples][#{sample.id}][value1]\", sample.value_for_dim(@dimension, index+1), :id =&gt; 'reading', :class =&gt; 'reading_class', :step =&gt; \"0.000001\"\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1435762547, "post_id": 31164433, "comment_id": 50337969, "body": "<code>defined?(hash)</code> reveals that it&#39;s a method and <code>method(:hash)</code> shows its origin"}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1435763349, "post_id": 31164433, "comment_id": 50338516, "body": "@Stefan I should have done that, but I guess I got too overwhelmed by my discovery to ask a question here :P"}], "answers": [{"comments": [{"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1435762209, "post_id": 31164609, "comment_id": 50337734, "body": "that explain it. Thanks :)"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1435761912, "last_edit_date": 1495541674, "creation_date": 1435761912, "answer_id": 31164609, "question_id": 31164433, "link": "https://stackoverflow.com/questions/31164433/is-there-a-default-variable-hash/31164609#31164609", "title": "Is there a default variable `hash`?", "body": "<p>By calling <code>hash</code> from the <code>pry</code>/<code>irb</code> one just calls <a href=\"http://ruby-doc.org/core-2.1.1/Object.html#method-i-hash\" rel=\"nofollow noreferrer\"><code>Object#hash</code></a> on <a href=\"https://stackoverflow.com/questions/917811/what-is-main-in-ruby\"><code>main</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 4602, "user_id": 1141264, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4af75d466ec6c84e3a0a9f1de61233ae?s=128&d=identicon&r=PG", "display_name": "DickieBoy", "link": "https://stackoverflow.com/users/1141264/dickieboy"}, "is_accepted": false, "score": 1, "last_activity_date": 1435761970, "creation_date": 1435761970, "answer_id": 31164639, "question_id": 31164433, "link": "https://stackoverflow.com/questions/31164433/is-there-a-default-variable-hash/31164639#31164639", "title": "Is there a default variable `hash`?", "body": "<p><code>hash</code> is a method on object(<a href=\"http://ruby-doc.org/core-2.2.2/Object.html#method-i-hash\" rel=\"nofollow\">docs</a>)</p>\n\n<p>Its part of the \"top level\" <a href=\"https://banisterfiend.wordpress.com/2010/11/23/what-is-the-ruby-top-level/\" rel=\"nofollow\">more info</a></p>\n"}, {"comments": [{"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "edited": false, "score": 0, "creation_date": 1435762186, "post_id": 31164640, "comment_id": 50337703, "body": "That makes perfect sense. Thanks"}], "tags": [], "owner": {"reputation": 36058, "user_id": 1157054, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5c9d0ecbe3045579b72f96744c62735c?s=128&d=identicon&r=PG", "display_name": "Ajedi32", "link": "https://stackoverflow.com/users/1157054/ajedi32"}, "is_accepted": true, "score": 6, "last_activity_date": 1435761976, "creation_date": 1435761976, "answer_id": 31164640, "question_id": 31164433, "link": "https://stackoverflow.com/questions/31164433/is-there-a-default-variable-hash/31164640#31164640", "title": "Is there a default variable `hash`?", "body": "<p>In Ruby, all top level method calls happen on the <code>main</code> object:</p>\n\n<pre><code>self\n#=&gt; main \n</code></pre>\n\n<p><code>main</code> is an object with the class <code>Object</code>:</p>\n\n<pre><code>self.class\n#=&gt; Object\n</code></pre>\n\n<p>So at the top level, <code>hash</code> calls the <a href=\"http://ruby-doc.org/core/Object.html#method-i-hash\" rel=\"noreferrer\"><code>Object#hash</code></a> method on the <code>main</code> object:</p>\n\n<blockquote>\n  <h1>hash \u2192 fixnum</h1>\n  \n  <p>Generates a Fixnum hash value for this object. This function must have\n  the property that <code>a.eql?(b)</code> implies <code>a.hash == b.hash</code>.</p>\n  \n  <p>The hash value is used along with eql? by the Hash class to determine\n  if two objects reference the same hash key. Any hash value that\n  exceeds the capacity of a Fixnum will be truncated before being used.</p>\n  \n  <p>The hash value for an object may not be identical across invocations\n  or implementations of Ruby. If you need a stable identifier across\n  Ruby invocations and implementations you will need to generate one\n  with a custom method.</p>\n</blockquote>\n\n<p>For more on the top-level in Ruby, see the blog post <em><a href=\"https://banisterfiend.wordpress.com/2010/11/23/what-is-the-ruby-top-level/\" rel=\"noreferrer\">What is the Ruby Top-Level?</a></em>.</p>\n"}], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 31164640, "answer_count": 3, "score": 3, "last_activity_date": 1435766757, "creation_date": 1435761485, "last_edit_date": 1435766757, "question_id": 31164433, "link": "https://stackoverflow.com/questions/31164433/is-there-a-default-variable-hash", "title": "Is there a default variable `hash`?", "body": "<p>I typed <code>hash</code> in irb or in Rails console, and I can see it holds some random value. I do not know if it should be there or it's done by some gem.</p>\n\n<p>Here:</p>\n\n<pre><code>hash # =&gt; -943824087729528496\n</code></pre>\n\n<p>Trying again:</p>\n\n<pre><code>hash # =&gt; 3150408717325671348 \n</code></pre>\n\n<p>Is this normal? If so, what's the use? Or what does that value mean?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 1, "creation_date": 1435761937, "post_id": 31164323, "comment_id": 50337543, "body": "Can you post your form code?"}], "answers": [{"tags": [], "owner": {"reputation": 40466, "user_id": 33226, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/8f75007bcbcb8ba4daa408592e1c65ec?s=128&d=identicon&r=PG", "display_name": "Gavin Miller", "link": "https://stackoverflow.com/users/33226/gavin-miller"}, "is_accepted": true, "score": 3, "last_activity_date": 1435763806, "creation_date": 1435763806, "answer_id": 31165340, "question_id": 31164323, "link": "https://stackoverflow.com/questions/31164323/ruby-on-rails-associations-error/31165340#31165340", "title": "Ruby on Rails - Associations error", "body": "<p>It looks to me like your issue is in your <code>create</code> method when you build the new contact:</p>\n\n<pre><code>@contact = @admin.contacts.build(:admin_id =&gt; @admin.id)\n</code></pre>\n\n<p>The code above doesn't include your <code>contact_params</code> and therefore wouldn't pass validation. You're only building a contact with the <code>admin_id</code>. Your code would have to look something like below to pass validation:</p>\n\n<pre><code>@contact = @admin.contacts.build(contact_params)\n</code></pre>\n\n<p>Also notice that you don't need to include <code>:admin_id =&gt; @admin.id</code> in <code>build</code> since you're creating the contact through the <code>@admin</code>. Rails is smart enough to know to associate that new contact with <code>@admin</code>!</p>\n"}], "owner": {"reputation": 1375, "user_id": 3125036, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/1588185783/picture?type=large", "display_name": "giovaZ", "link": "https://stackoverflow.com/users/3125036/giovaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 1, "accepted_answer_id": 31165340, "answer_count": 1, "score": 1, "last_activity_date": 1435763915, "creation_date": 1435761197, "last_edit_date": 1435763608, "question_id": 31164323, "link": "https://stackoverflow.com/questions/31164323/ruby-on-rails-associations-error", "title": "Ruby on Rails - Associations error", "body": "<p>i've got a problem about association in my RoR project; i explain:</p>\n\n<p>i've got two tables: </p>\n\n<ul>\n<li><strong>Admin</strong> - Created with Devise.</li>\n<li><strong>Contacts</strong> - Created with the rails standard console command <code>rails g scaffold</code>.</li>\n</ul>\n\n<p>The Admin table have an 1:n association with the Contact's one so in their respective classes:</p>\n\n<p><strong>Admin:</strong></p>\n\n<pre><code>class Admin &lt; ActiveRecord::Base\n  has_many :contacts\n\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\nend\n</code></pre>\n\n<p><strong>Contact</strong></p>\n\n<pre><code>class Contact &lt; ActiveRecord::Base\n        belongs_to :admin\n        validates :nome, :cognome, :indirizzo_abitazione, \n                  :numero_civico, :indirizzo_email, :prefisso_cellulare, :cellulare, presence: true\n        validates :indirizzo_email, :indirizzo_email_2, format: { with: /\\A([^@\\s]+)@((?:[-a-z0-9]+\\.)+[a-z]{2,})\\z/i, on: :create }\nend\n</code></pre>\n\n<p>When i create one contact the first thing that i need to know is the id of the Admin that is creating it so i modified the 'create' method in the contacts_controller whit this</p>\n\n<pre><code>    def create\n        @admin = Admin.find_by id: current_admin.id\n\n        @contact = @admin.contacts.build(:admin_id =&gt; @admin.id)\n\n        respond_to do |format|\n          if @contact.save\n            format.html { redirect_to @contact, notice: 'Contact was successfully created.' }\n            format.json { render :show, status: :created, location: @contact }\n          else\n            format.html { render :new }\n            format.json { render json: @contact.errors, status: :unprocessable_entity }\n          end\n        end\n\n  end\n</code></pre>\n\n<p>when i try to create a contact (the submit button action), after i filled all my fileds i recive lots of validation errors despite all my fields are valid.\nSo i think that none of the parameters of the fields are passed during the create method.</p>\n\n<p>I checked the contact_params method but all the fields are included:</p>\n\n<pre><code>def contact_params\n  params.require(:contact).permit(:nome, :cognome, :indirizzo_abitazione, :numero_civico, :indirizzo_email, :indirizzo_email_2, :prefisso_cellulare, :cellulare, :telefono_casa)\nend\n</code></pre>\n\n<p>where am i wrong?</p>\n\n<p>Also i add here the _form.html.erb code</p>\n\n<pre><code>  &lt;%= form_for(@contact) do |f| %&gt;\n  &lt;% if @contact.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(@contact.errors.count, \"error\") %&gt; prohibited this contact from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% @contact.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"form-group &lt;%= @contact.errors[:nome].present? == true ? \"has-error\" : \"\" %&gt;\" &gt;\n    &lt;%= f.label :nome , :class =&gt; \"control-label\" %&gt;&lt;br&gt;\n    &lt;%= f.text_field :nome, :class =&gt; \"form-control\" %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"form-group &lt;%= @contact.errors[:cognome].present? ? \"has-error\" : \"\" %&gt;\"&gt;\n    &lt;%= f.label :cognome, :class =&gt; \"control-label\" %&gt;&lt;br&gt;\n    &lt;%= f.text_field :cognome, :class =&gt; \"form-control\" %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"form-group &lt;%= @contact.errors[:indirizzo_abitazione].present? ? \"has-error\" : \"\" %&gt;\"&gt;\n    &lt;%= f.label :indirizzo_abitazione, :class =&gt; \"control-label\" %&gt;&lt;br&gt;\n    &lt;%= f.text_field :indirizzo_abitazione, :class =&gt; \"form-control\" %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"form-group &lt;%= @contact.errors[:numero_civico].present? ? \"has-error\" : \"\" %&gt;\"&gt;\n    &lt;%= f.label :numero_civico, :class =&gt; \"control-label\" %&gt;&lt;br&gt;\n    &lt;%= f.text_field :numero_civico, :class =&gt; \"form-control\" %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"form-group &lt;%= @contact.errors[:indirizzo_email].present? ? \"has-error\" : \"\" %&gt;\"&gt;\n    &lt;%= f.label :indirizzo_email, :class =&gt; \"control-label\" %&gt;&lt;br&gt;\n    &lt;%= f.text_field :indirizzo_email, :class =&gt; \"form-control\" %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"form-group &lt;%= @contact.errors[:indirizzo_email_2].present? ? \"has-error\" : \"\" %&gt;\"&gt;\n    &lt;%= f.label :indirizzo_email_2, :class =&gt; \"control-label\" %&gt;&lt;br&gt;\n    &lt;%= f.text_field :indirizzo_email_2, :class =&gt; \"form-control\" %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"form-group &lt;%= @contact.errors[:prefisso_cellulare].present? ? \"has-error\" : \"\" %&gt;\"&gt;\n    &lt;%= f.label :prefisso_cellulare, :class =&gt; \"control-label\" %&gt;&lt;br&gt;\n    &lt;%= f.text_field :prefisso_cellulare, :class =&gt; \"form-control\" %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"form-group &lt;%= @contact.errors[:cellulare].present? ? \"has-error\" : \"\" %&gt;\"&gt;\n    &lt;%= f.label :cellulare, :class =&gt; \"control-label\" %&gt;&lt;br&gt;\n    &lt;%= f.text_field :cellulare, :class =&gt; \"form-control\" %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"form-group &lt;%= @contact.errors[:telefono_casa].present? ? \"has-error\" : \"\" %&gt;\"&gt;\n    &lt;%= f.label :telefono_casa, :class =&gt; \"control-label\" %&gt;&lt;br&gt;\n    &lt;%= f.text_field :telefono_casa, :class =&gt; \"form-control\" %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "minitest"], "comments": [{"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1435774996, "post_id": 31164298, "comment_id": 50345506, "body": "please share full stack trace and gemfile. it looks like some sort of issue with the psych gem but it&#39;s hard to tell from just 1 line"}, {"owner": {"reputation": 1, "user_id": 5070074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0wCVy.jpg?s=128&g=1", "display_name": "Jamie Kawahara", "link": "https://stackoverflow.com/users/5070074/jamie-kawahara"}, "reply_to_user": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1435898132, "post_id": 31164298, "comment_id": 50400906, "body": "Here&#39;s more of the stack track, no gemfile was used just minitest/autorun, thanks for your reply."}], "answers": [{"tags": [], "owner": {"reputation": 329, "user_id": 2959663, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c62012c04ba1ee0f67c4da0e9da303a?s=128&d=identicon&r=PG&f=1", "display_name": "johnrbnz", "link": "https://stackoverflow.com/users/2959663/johnrbnz"}, "is_accepted": false, "score": 0, "last_activity_date": 1469042489, "creation_date": 1469042489, "answer_id": 38489131, "question_id": 31164298, "link": "https://stackoverflow.com/questions/31164298/undefined-method-dump-for-psychmodule/38489131#38489131", "title": "Undefined method &#39;dump&#39; for psych:Module", "body": "<p>I could resolve the same issue by using Ruby 2.3.0 instead of Ruby 2.2.0.</p>\n"}], "owner": {"reputation": 1, "user_id": 5070074, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0wCVy.jpg?s=128&g=1", "display_name": "Jamie Kawahara", "link": "https://stackoverflow.com/users/5070074/jamie-kawahara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 372, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1469042489, "creation_date": 1435761156, "last_edit_date": 1435901710, "question_id": 31164298, "link": "https://stackoverflow.com/questions/31164298/undefined-method-dump-for-psychmodule", "title": "Undefined method &#39;dump&#39; for psych:Module", "body": "<p>When running minitest with Ruby v 2.2.0, I get the following error, does anyone have advice on how to remedy this?</p>\n\n<p>Error :</p>\n\n<pre><code>/Users/jamie/.rvm/gems/ruby-2.2.0/gems/notiffany-0.0.6/lib/notiffany/notifier/detected.rb:22:in `block (2 levels) i\nn &lt;class:Notifier&gt;': undefined method `dump' for Psych:Module (NoMethodError)\n        from /Users/jamie/.rvm/gems/ruby-2.2.0/gems/nenv-0.2.0/lib/nenv/environment/dumper.rb:5:in `call'\n        from /Users/jamie/.rvm/gems/ruby-2.2.0/gems/nenv-0.2.0/lib/nenv/environment/dumper.rb:5:in `dump'\n        from /Users/jamie/.rvm/gems/ruby-2.2.0/gems/nenv-0.2.0/lib/nenv/environment.rb:47:in `block in _create_env_method'\n        from /Users/jamie/.rvm/gems/ruby-2.2.0/gems/notiffany-0.0.6/lib/notiffany/notifier/detected.rb:93:in `add'\n        from /Users/jamie/.rvm/gems/ruby-2.2.0/gems/notiffany-0.0.6/lib/notiffany/notifier/detected.rb:64:in `block (2 levels) in detect'\n        from /Users/jamie/.rvm/gems/ruby-2.2.0/gems/notiffany-0.0.6/lib/notiffany/notifier/detected.rb:62:in `each'\n        from /Users/jamie/.rvm/gems/ruby-2.2.0/gems/notiffany-0.0.6/lib/notiffany/notifier/detected.rb:62:in `detect'\n        from /Users/jamie/.rvm/gems/ruby-2.2.0/gems/notiffany-0.0.6/lib/notiffany/notifier/detected.rb:62:in `block in detect'\n        from /Users/jamie/.rvm/gems/ruby-2.2.0/gems/notiffany-0.0.6/lib/notiffany/notifier/detected.rb:61:in `each'\n        from /Users/jamie/.rvm/gems/ruby-2.2.0/gems/notiffany-0.0.6/lib/notiffany/notifier/detected.rb:61:in `detect'\n        from /Users/jamie/.rvm/gems/ruby-2.2.0/gems/notiffany-0.0.6/lib/notiffany/notifier.rb:105:in `initialize'\n        from /Users/jamie/.rvm/gems/ruby-2.2.0/gems/notiffany-0.0.6/lib/notiffany/notifier.rb:42:in `new'\n        from /Users/jamie/.rvm/gems/ruby-2.2.0/gems/notiffany-0.0.6/lib/notiffany/notifier.rb:42:in `connect'\n        from /Users/jamie/.rvm/gems/ruby-2.2.0/gems/guard-2.12.7/lib/guard/notifier.rb:11:in `connect'\n        from /Users/jamie/.rvm/gems/ruby-2.2.0/gems/guard-2.12.7/lib/guard/notifier.rb:31:in `notify'\n        from /Users/jamie/.rvm/gems/ruby-2.2.0/gems/guard-minitest-2.3.1/lib/guard/minitest/notifier.rb:34:in `noti\nfy'\n        from /Users/jamie/.rvm/gems/ruby-2.2.0/gems/guard-minitest-2.3.1/lib/guard/minitest/reporter.rb:11:in `repo\nrt'\n        from /Users/jamie/.rvm/gems/ruby-2.2.0/gems/minitest-5.7.0/lib/minitest.rb:638:in `each'\n        from /Users/jamie/.rvm/gems/ruby-2.2.0/gems/minitest-5.7.0/lib/minitest.rb:638:in `report'\n</code></pre>\n\n<p>...........</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "database-design", "data-modeling"], "answers": [{"comments": [{"owner": {"reputation": 32547, "user_id": 276959, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/mSp5G.jpg?s=128&g=1", "display_name": "Mohamad", "link": "https://stackoverflow.com/users/276959/mohamad"}, "edited": false, "score": 0, "creation_date": 1435771042, "post_id": 31165039, "comment_id": 50343322, "body": "Thanks. Can you tell me what you think? Fundamentally there are two types of activities: Workspace and Bucket ones. Workspace activities are public. They include memberships. Bucket activities are private or public, depending on the bucket. They include uploads, documents, and comments. The feed can be made up of both. This makes retrieving bucket activity easy: If user is an admin, grab all activities for buckets in the current workspace, otherwise grab all activities that belong to public buckets. We combine them with workspace activities. What do you think?"}, {"owner": {"reputation": 32547, "user_id": 276959, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/mSp5G.jpg?s=128&g=1", "display_name": "Mohamad", "link": "https://stackoverflow.com/users/276959/mohamad"}, "edited": false, "score": 0, "creation_date": 1435771963, "post_id": 31165039, "comment_id": 50343819, "body": "In addition, one attractive thing about the individual feeds is that I can have an isolated feed per bucket if I need to. That would include activities on documents and uploads, and comments on documents that belong to a single bucket."}, {"owner": {"reputation": 32547, "user_id": 276959, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/mSp5G.jpg?s=128&g=1", "display_name": "Mohamad", "link": "https://stackoverflow.com/users/276959/mohamad"}, "edited": false, "score": 0, "creation_date": 1435780476, "post_id": 31165039, "comment_id": 50348673, "body": "I&#39;m also concerned about the performance implications of the first approach."}, {"owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "reply_to_user": {"reputation": 32547, "user_id": 276959, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/mSp5G.jpg?s=128&g=1", "display_name": "Mohamad", "link": "https://stackoverflow.com/users/276959/mohamad"}, "edited": false, "score": 0, "creation_date": 1435832231, "post_id": 31165039, "comment_id": 50369401, "body": "I think this approach is understandable and reasonable. If you keep your auth logic separated and internal it should be nice and clean."}, {"owner": {"reputation": 32547, "user_id": 276959, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/mSp5G.jpg?s=128&g=1", "display_name": "Mohamad", "link": "https://stackoverflow.com/users/276959/mohamad"}, "edited": false, "score": 0, "creation_date": 1435846610, "post_id": 31165039, "comment_id": 50379398, "body": "I think I&#39;ll go down a different route. I will create a joined table that maps an activity to a user. Using a background job I will create a mapping in that table if the user has access to the activity. I don&#39;t know how scalable that is, but it doesn&#39;t seem bad. If I have 50 people in one project, I would have to add 50 mappings, but its idempotent, and solves the question of permissions. <a href=\"http://stackoverflow.com/questions/31186928/is-this-a-scalable-way-to-build-a-feed\" title=\"is this a scalable way to build a feed\">stackoverflow.com/questions/31186928/&hellip;</a>"}], "tags": [], "owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "is_accepted": false, "score": 2, "last_activity_date": 1435763015, "creation_date": 1435763015, "answer_id": 31165039, "question_id": 31164218, "link": "https://stackoverflow.com/questions/31164218/modeling-an-activity-feed/31165039#31165039", "title": "Modeling an activity feed", "body": "<p>I think your first approach is by far better, the only thing I might do nicer is:</p>\n\n<pre><code>class Activity\n  scope :auth_with, -&gt; (auth) { joins(:trackable).where(trackable: { private: trackable_access(auth) }) }\n\n  class &lt;&lt; self\n  private\n    def trackable_access(auth)\n      return false unless auth\n      auth.admin?\n    end\n  end\nend\n</code></pre>\n\n<p>Then you could call a pretty</p>\n\n<pre><code>@project.activities.auth_with(current_user)\n</code></pre>\n\n<p>and not be concerned with access issues, also your access logic will be in one place only, and the only place it concerns - <code>Activity</code>, so changing access logic will boil down to replacing <code>auth.admin?</code> in <code>trackable_access</code> with any other type of authentication.</p>\n\n<p>The cherry on top is making <code>trackable_access</code> private, so you can't call <code>Activity.trackable_access(...)</code> without evals.</p>\n\n<p>This is of course only my take on the matter, but I hope I helped somehow :)</p>\n"}, {"comments": [{"owner": {"reputation": 32547, "user_id": 276959, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/mSp5G.jpg?s=128&g=1", "display_name": "Mohamad", "link": "https://stackoverflow.com/users/276959/mohamad"}, "edited": false, "score": 0, "creation_date": 1435771116, "post_id": 31167637, "comment_id": 50343373, "body": "Thanks for chipping in. Can you read my comment to Piotr Kruczek&#39;s answer and tell me what you think?"}, {"owner": {"reputation": 2620, "user_id": 1575497, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f309a15fb5777ae219f1e5ca675f0847?s=128&d=identicon&r=PG", "display_name": "Bryce", "link": "https://stackoverflow.com/users/1575497/bryce"}, "reply_to_user": {"reputation": 32547, "user_id": 276959, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/mSp5G.jpg?s=128&g=1", "display_name": "Mohamad", "link": "https://stackoverflow.com/users/276959/mohamad"}, "edited": false, "score": 0, "creation_date": 1435782855, "post_id": 31167637, "comment_id": 50350011, "body": "If you&#39;re concerned about performance, then certainly having a field in the database on the Activites table is going to allow for a faster query than having to do a join just to understand whether or not something is meant to be included."}], "tags": [], "owner": {"reputation": 2620, "user_id": 1575497, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/f309a15fb5777ae219f1e5ca675f0847?s=128&d=identicon&r=PG", "display_name": "Bryce", "link": "https://stackoverflow.com/users/1575497/bryce"}, "is_accepted": false, "score": 0, "last_activity_date": 1435770634, "creation_date": 1435770634, "answer_id": 31167637, "question_id": 31164218, "link": "https://stackoverflow.com/questions/31164218/modeling-an-activity-feed/31167637#31167637", "title": "Modeling an activity feed", "body": "<p>I would honestly combine both approaches.  The second approach gets to what you really want your data to reflect - Is this activity private or not?</p>\n\n<p>I would then probably have the <code>:private</code> field on <code>Activity</code> set in a <code>before_save</code> hook, with the logic of something like \"set this to private if I belong to a private <code>Bucket</code>\".</p>\n\n<p>I prefer this approach because if your logic for what makes an <code>Activity</code> private every changes, or if you need to add flags for other types of access (e.g. <code>viewable_to_managers</code>), you can add a similar hook and run a script to update all of the past <code>Activity</code> objects.</p>\n"}], "owner": {"reputation": 32547, "user_id": 276959, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/mSp5G.jpg?s=128&g=1", "display_name": "Mohamad", "link": "https://stackoverflow.com/users/276959/mohamad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1435770634, "creation_date": 1435760970, "last_edit_date": 1435761863, "question_id": 31164218, "link": "https://stackoverflow.com/questions/31164218/modeling-an-activity-feed", "title": "Modeling an activity feed", "body": "<p>I would like a second opinion on an activity feed I'm trying to model. I've come up with three ways.</p>\n\n<p>I have a Project, Membership, Bucket, Upload, and Document models, all are ActiveRecord models. A Project has many memberships and many buckets. A bucket has many uploads, and an upload has many documents. I would like to track activity on memberships, buckets, uploads, and documents (updates, deletions, creations, etc...).</p>\n\n<pre><code>class Project\n  has_many :memberships\n  has_many :buckets\n  has_many :documents, through: :buckets\nend\n\nclass Bucket\n  belongs_to :project\n  has_many :uploads\n  has_many :documents, through: :uploads\nend\n\nclass Upload\n  belongs_to :bucket\n  has_many :documents\nend\n\nclass Document\n  belongs_to :upload\nend\n</code></pre>\n\n<p>This is fairly easy in itself. But some buckets are private, and only visible to admins. This means that their activities, and activities on their uploads and their documents can only be visible to admins.</p>\n\n<h2>Approach 1: A polymorphic Activity class</h2>\n\n<p>Activity would belong to a trackable object, in this case <code>Membership</code>, <code>Document</code>, <code>Upload</code>, and <code>Bucket</code>.</p>\n\n<pre><code>class Activity\n  belongs_to :project\n  belongs_to :trackable, polymorphic: true\nend\n</code></pre>\n\n<p>This lets me do things like <code>@project.activities</code>. To solve the privacy issue, I can use scopes.</p>\n\n<pre><code>scope :public, -&gt; { joins(:trackable).where(trackable: { private: false }) }\n</code></pre>\n\n<p>But only Bucket objects, and by extension their Upload and their Document objects have a privacy flag. Membership does not. I must add privacy flag to all trackable models just so that they can speak to the same interface.</p>\n\n<pre><code>class Membership\n  def private; false; end\nend\n\nclass Upload\n  delegate :private, to: :project\nend\n\nclass Document\n  delegate :private, to: :upload\nend\n</code></pre>\n\n<p>Then I can do this in some policy object.</p>\n\n<pre><code>@activities = if current_user.admin?\n  @project.activities\nelse\n  @project.activities.public\nend\n</code></pre>\n\n<h2>Approach 2: Add a private flag on activities</h2>\n\n<p>I can add a privacy flag on Activity.</p>\n\n<pre><code>@bucket.activities.build(project: @project) do |a|\n  a.private = @bucket.private?\nend\n</code></pre>\n\n<p>Then I can do this in some policy object.</p>\n\n<pre><code>@activities = if current_user.admin?\n  @project.activities\nelse\n  @project.activities.public\nend\n</code></pre>\n\n<p>This is easy, but not flexible. If we add an accesses table to buckets, so that their visibility is now based on access rather than user role, we would have to refactor painfully.</p>\n\n<p>Are there better ways to model this feed? How would you do it? I can't use any gems like public activity, so please do not suggest them.</p>\n"}, {"tags": ["android", "ios", "objective-c", "ruby"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4657588"}, "edited": false, "score": 0, "creation_date": 1435761250, "post_id": 31164106, "comment_id": 50337008, "body": "So what are you asking. You want someone to write the <code>Objective-C</code> equivalent of of your code?"}, {"owner": {"reputation": 1, "user_id": 5063041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/810dbcf8c4ddad21fb0dfb6b75c52d1f?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/5063041/david"}, "edited": false, "score": 0, "creation_date": 1435844708, "post_id": 31164106, "comment_id": 50377942, "body": "i want a solution to playing all mp3 file stored in the directory instead of just the one mp3 file which the code above does. the solution can be objective-c or ruby as the code above is pretty m much the same as objective-c thanks."}], "owner": {"reputation": 1, "user_id": 5063041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/810dbcf8c4ddad21fb0dfb6b75c52d1f?s=128&d=identicon&r=PG&f=1", "display_name": "David", "link": "https://stackoverflow.com/users/5063041/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1435760676, "creation_date": 1435760676, "question_id": 31164106, "link": "https://stackoverflow.com/questions/31164106/avplayer-streaming-how-to-play-the-next-mp3-is-folder", "title": "AVPlayer streaming how to play the next mp3 is folder", "body": "<p>I have written code in ruby (similar to objective c) which plays an mp3 file from amazon s3 using AVPlayer. I want to be able to play all mp3 file stored in the directory instead of just the one who will i go about doing this?? \nthe code i wrote is </p>\n\n<pre><code>def buttonIsTapped\np \"Button was tapped\"\n\nif (@audio_player == nil)\n  Dispatch::Queue.concurrent.async do \n    mainBundle = NSBundle.mainBundle\n    url = NSURL.URLWithString(\"https://s3-eu-west-1.amazonaws.com/mytrackzmusic/music/Nines+-+Loyal+To+The+Soil/\", ofType:\"mp3\")\n    #@audio_player = AVAudioPlayer.alloc.initWithData(fileData, error:error)\n    @audio_player = AVPlayer.alloc.initWithURL(url)\n    @audio_player.play\n\n    @playerIsPlaying = true\n  end\nelse \n  if @playerIsPlaying == true\n    @audio_player.pause\n    @playerIsPlaying = false\n  else\n    @audio_player.play\n    @playerIsPlaying = true\n  end\n</code></pre>\n"}, {"tags": ["ruby", "sinatra", "cucumber"], "owner": {"reputation": 807, "user_id": 3087106, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0a9b6432fda7159130a528d3c1dce2fd?s=128&d=identicon&r=PG&f=1", "display_name": "Pippo", "link": "https://stackoverflow.com/users/3087106/pippo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 315, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1563831985, "creation_date": 1435760027, "last_edit_date": 1563831985, "question_id": 31163828, "link": "https://stackoverflow.com/questions/31163828/how-to-start-stop-sinatra-app-in-cucumber-hook", "title": "How to start/stop sinatra app in cucumber hook", "body": "<p><strong>PROBLEM SOLVED:</strong></p>\n\n<p>I've figured out how to solve my problem:</p>\n\n<p>in the before hook I fork the current process to start my sinatra web app:</p>\n\n<pre><code>Before do\n  if $pid.nil?\n    $pid = fork do\n      App.run!\n    end\n  end\nend\n</code></pre>\n\n<p>Notice I have to have the forked PID attributed to a global variable so it doesnt get flushed after each scenario in cucumber. Besides that, I make sure to start my sintra app once in the entire cucumber execution.</p>\n\n<p>Then at the end of my cucumber execution, I kill the child process and wait for it to be cleared prior to terminating the cucumber session:</p>\n\n<pre><code>at_exit do\n  unless $pid.nil?\n    Process.kill \"TERM\", $pid\n    Process.wait $pid\n  end\nend\n</code></pre>\n\n<p><strong>ORIGINAL QUESTION:</strong></p>\n\n<p>I am looking to stub a web app which contain content that will then be used by my application to fetch that content from that stub and do its trick...</p>\n\n<p>What I am looking to achieve is start Sinatra app within cucumber hook... then stop it at end of execution... is that possible?</p>\n\n<p>Below is where I've got so far...</p>\n\n<pre><code>#myapp.rb\nrequire 'sinatra'\n\nclass App &lt; Sinatra::Base\n  set :server, 'webrick'\n\n  get '/' do\n    'Hello!!!'\n  end\nend\n</code></pre>\n\n<p>Then in hook:</p>\n\n<pre><code>Before do\n  App.run!\nend\n</code></pre>\n\n<p>The first issue there is that the sinatra app won't run in the background... after solving that problem then I would need to understand if it's easy enough to stop the sinatra session as well...</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "capistrano3"], "answers": [{"comments": [{"owner": {"reputation": 4416, "user_id": 2552259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d74162f339b5acd772d3f5dadaa8ea?s=128&d=identicon&r=PG", "display_name": "Jorge de los Santos", "link": "https://stackoverflow.com/users/2552259/jorge-de-los-santos"}, "edited": false, "score": 0, "creation_date": 1435759192, "post_id": 31163443, "comment_id": 50335412, "body": "Got this as an error: <code>ArgumentError: wrong number of arguments (1 for 2+)</code>"}, {"owner": {"reputation": 5825, "user_id": 978515, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/QAwRM.jpg?s=128&g=1", "display_name": "davids", "link": "https://stackoverflow.com/users/978515/davids"}, "reply_to_user": {"reputation": 4416, "user_id": 2552259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d74162f339b5acd772d3f5dadaa8ea?s=128&d=identicon&r=PG", "display_name": "Jorge de los Santos", "link": "https://stackoverflow.com/users/2552259/jorge-de-los-santos"}, "edited": false, "score": 0, "creation_date": 1435759327, "post_id": 31163443, "comment_id": 50335503, "body": "@JorgedelosSantos so the problem must be in the task&#39;s definition, rather than in your capistrano configuration"}], "tags": [], "owner": {"reputation": 5825, "user_id": 978515, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/QAwRM.jpg?s=128&g=1", "display_name": "davids", "link": "https://stackoverflow.com/users/978515/davids"}, "is_accepted": true, "score": 1, "last_activity_date": 1435758994, "creation_date": 1435758994, "answer_id": 31163443, "question_id": 31163232, "link": "https://stackoverflow.com/questions/31163232/how-to-define-and-run-capistrano-3-task-after-deploy/31163443#31163443", "title": "How to define and run capistrano 3 task after deploy?", "body": "<p>First off, have you checked if <code>bundle exec rake daemons:restart</code> works locally? If so, try something like this:</p>\n\n<pre><code>namespace :deploy do\n\n  after :restart do\n    on roles(:web), in: :groups, limit: 3, wait: 10 do\n      within release_path do\n         execute :rake, 'daemons:restart'\n      end\n    end\n  end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 4416, "user_id": 2552259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d74162f339b5acd772d3f5dadaa8ea?s=128&d=identicon&r=PG", "display_name": "Jorge de los Santos", "link": "https://stackoverflow.com/users/2552259/jorge-de-los-santos"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1675, "favorite_count": 0, "accepted_answer_id": 31163443, "answer_count": 1, "score": 2, "last_activity_date": 1435759275, "creation_date": 1435758522, "last_edit_date": 1435759275, "question_id": 31163232, "link": "https://stackoverflow.com/questions/31163232/how-to-define-and-run-capistrano-3-task-after-deploy", "title": "How to define and run capistrano 3 task after deploy?", "body": "<p>I have a capistrano script that works perfect, except it's not running a task after the deploy. I'm using rails_daemons to launch the rails application and a I need to restart the daemons.</p>\n\n<p><em>#deploy.rb</em></p>\n\n<pre><code>namespace :deploy do\n  on roles :all do\n    execute :bundle, \"exec rake daemons:restart\"\n  end\nend\n</code></pre>\n\n<p>Tryed this also:</p>\n\n<pre><code>task :restart_daemons, :roles =&gt; :app do\n  execute :bundle, \"exec rake daemons:restart\"\nend\n\nafter \"deploy\", \"deploy:restart_daemons\" \n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1453754975, "post_id": 31163142, "comment_id": 57732240, "body": "Burak, I&#39;m facing the same problem at the moment. Have you been able to solve your problem? Is the create.js.erb version working well? I mean I&#39;d like to use the reusable _message partial as well, but only saw json versions on the web."}, {"owner": {"reputation": 755, "user_id": 1974787, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f8bfd50de2a896e92a3f34f4750ff739?s=128&d=identicon&r=PG", "display_name": "Burak &#214;zmen", "link": "https://stackoverflow.com/users/1974787/burak-%c3%96zmen"}, "reply_to_user": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1453812263, "post_id": 31163142, "comment_id": 57754840, "body": "I did solved it, but actually not really sure how :p However it is about the subscription to the channel. If you dynamically subscribe to the channel with after ajax loads, it connects to the channel multiple times or creating the pusher object multiple times, I am not sure which one is true. And create.js.erb version is working pretty well, however I am not happy with it and will change it later, move to a more JSON based approach. Anyway, if you need further detail, contact me at burakozmen@outlook.com."}, {"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1453866001, "post_id": 31163142, "comment_id": 57783132, "body": "Burak, I&#39;m going to send a mail asap! THX"}, {"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1454940431, "post_id": 31163142, "comment_id": 58254590, "body": "Hey Burak, can you help me with this one then?"}], "owner": {"reputation": 755, "user_id": 1974787, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/f8bfd50de2a896e92a3f34f4750ff739?s=128&d=identicon&r=PG", "display_name": "Burak &#214;zmen", "link": "https://stackoverflow.com/users/1974787/burak-%c3%96zmen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1435758271, "creation_date": 1435758271, "question_id": 31163142, "link": "https://stackoverflow.com/questions/31163142/ajax-pusher-is-not-working-properly-in-rails-application", "title": "AJAX/Pusher is not working properly in Rails application", "body": "<p>I'm implementing a real time chat with Pusher and Ruby on Rails.</p>\n\n<p>I am using this form to send AJAX requests to my MessageController and in the MessageController#create, it responds this call with running create.js and Pusher triggers some-channel.</p>\n\n<pre><code>// show.html.erb\n\n&lt;%= form_for Message.new, :remote =&gt; true do |f| %&gt;\n                           &lt;%= f.text_field :content, id: 'new_message' %&gt;\n                           &lt;%= f.hidden_field :conversation_id, :value =&gt; @conversation.id %&gt;\n                           &lt;%= f.hidden_field :user_id, :value =&gt; current_user.id %&gt;\n                           &lt;%= f.submit \"Send\" %&gt;\n                         &lt;% end %&gt;\n\n// MessageController.rb\n\n    def create\n            @message = Message.create(content: params[:message][:content], user_id: params[:message][:user_id])\n            conversation = Conversation.find(params[:message][:conversation_id])\n        conversation.messages &lt;&lt; @message\n            Pusher['some-channel'].trigger('my_event', {\n          message: @message\n        })\n        end\n\n\n// create.js.erb\n\nvar pusher = new Pusher('PUSHER KEY');\nvar channel = pusher.subscribe('some-channel');\n  channel.bind('my_event', function(data) {\n    alert(data.message);\n    $(\".chats\").append(\"&lt;%= escape_javascript render(@message) %&gt;\");\n\n});\n$(\"#new_message\")[0].reset();\n</code></pre>\n\n<p>However, when I first submit  the form, nothing is appended to the page. In second submit, alert pops up twice showing the message I've just sent; first and second message I've just sent is appended to the page. In third submit, alert pops up three times showing the message I've just sent; first,second and third message is appended to the page and so on. I can't seem to find the problem. I understand that message is sent properly but somehow everytime it appends incorrect messages.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "hash", "filter"], "comments": [{"owner": {"reputation": 13866, "user_id": 267416, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/58278233d7c0462014b63d2538c811b4?s=128&d=identicon&r=PG", "display_name": "Wazery", "link": "https://stackoverflow.com/users/267416/wazery"}, "reply_to_user": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 0, "creation_date": 1435758484, "post_id": 31163110, "comment_id": 50334855, "body": "Yes, keys = %i(include_blank required)"}], "answers": [{"comments": [{"owner": {"reputation": 13866, "user_id": 267416, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/58278233d7c0462014b63d2538c811b4?s=128&d=identicon&r=PG", "display_name": "Wazery", "link": "https://stackoverflow.com/users/267416/wazery"}, "edited": false, "score": 0, "creation_date": 1435758842, "post_id": 31163342, "comment_id": 50335129, "body": "But I need the include_blank and required returned with their values, whether they are true or false or whatever."}, {"owner": {"reputation": 3438, "user_id": 751716, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/E36nI.jpg?s=128&g=1", "display_name": "Rubyrider", "link": "https://stackoverflow.com/users/751716/rubyrider"}, "reply_to_user": {"reputation": 13866, "user_id": 267416, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/58278233d7c0462014b63d2538c811b4?s=128&d=identicon&r=PG", "display_name": "Wazery", "link": "https://stackoverflow.com/users/267416/wazery"}, "edited": false, "score": 0, "creation_date": 1435758940, "post_id": 31163342, "comment_id": 50335209, "body": "So you want to group them by include_blank and required ?"}], "tags": [], "owner": {"reputation": 3438, "user_id": 751716, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/E36nI.jpg?s=128&g=1", "display_name": "Rubyrider", "link": "https://stackoverflow.com/users/751716/rubyrider"}, "is_accepted": false, "score": 1, "last_activity_date": 1435758774, "creation_date": 1435758774, "answer_id": 31163342, "question_id": 31163110, "link": "https://stackoverflow.com/questions/31163110/ruby-filtering-array-of-hash/31163342#31163342", "title": "Ruby filtering array of hash", "body": "<p>The following should do solve your problem: </p>\n\n<pre><code> args_array.collect {|a| a if a[:include_blank] == true &amp;&amp; a[:required=&gt;true] == true }.compact\n</code></pre>\n\n<p>or </p>\n\n<pre><code>dup_list = args_array.dup\ndup_list.delete_if {|a| !(a[:include_blank] == true &amp;&amp; a[:required=&gt;true] == true) }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1435759309, "post_id": 31163387, "comment_id": 50335494, "body": "That modifies <code>args_array[0]</code> though. If I understand the question correctly, that behavior doesn&#39;t seem to be okay (maybe it is).  <code>Hash#select</code> can be used in this case."}], "tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": false, "score": 2, "last_activity_date": 1435759485, "last_edit_date": 1435759485, "creation_date": 1435758860, "answer_id": 31163387, "question_id": 31163110, "link": "https://stackoverflow.com/questions/31163110/ruby-filtering-array-of-hash/31163387#31163387", "title": "Ruby filtering array of hash", "body": "<p>One way is to use <a href=\"http://ruby-doc.org/core-2.2.2/Hash.html#method-i-keep_if\" rel=\"nofollow\"><code>Hash#keep_if</code></a>:</p>\n\n<pre><code>args_array[0].dup.keep_if {|k| filter_keys.include? k}\n# =&gt; {:include_blank=&gt;true, :required=&gt;true}\n</code></pre>\n\n<p><sub>Note that <code>.dup</code> is here to prevent <code>args_array</code> from being modified, don't use it if you do want <code>args_array</code> to be updated.</sub></p>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1435761526, "creation_date": 1435761526, "answer_id": 31164455, "question_id": 31163110, "link": "https://stackoverflow.com/questions/31163110/ruby-filtering-array-of-hash/31164455#31164455", "title": "Ruby filtering array of hash", "body": "<pre><code>args_array.map do |elem| \n  elem.select do |k, _| \n    %i(include_blank required).include? k\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13376, "user_id": 3357295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3PzYS.jpg?s=128&g=1", "display_name": "Doguita", "link": "https://stackoverflow.com/users/3357295/doguita"}, "is_accepted": false, "score": 1, "last_activity_date": 1435769769, "creation_date": 1435769769, "answer_id": 31167390, "question_id": 31163110, "link": "https://stackoverflow.com/questions/31163110/ruby-filtering-array-of-hash/31167390#31167390", "title": "Ruby filtering array of hash", "body": "<p>You tagged as Rails so you can use <a href=\"http://api.rubyonrails.org/classes/Hash.html#method-i-slice\" rel=\"nofollow\">Hash#slice</a>:</p>\n\n<pre><code>args_array[0].slice *filter_keys\n# =&gt; {:include_blank=&gt;true, :required=&gt;true}\n</code></pre>\n"}], "owner": {"reputation": 13866, "user_id": 267416, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/58278233d7c0462014b63d2538c811b4?s=128&d=identicon&r=PG", "display_name": "Wazery", "link": "https://stackoverflow.com/users/267416/wazery"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2470, "favorite_count": 1, "answer_count": 4, "score": 1, "last_activity_date": 1435769769, "creation_date": 1435758190, "last_edit_date": 1435758573, "question_id": 31163110, "link": "https://stackoverflow.com/questions/31163110/ruby-filtering-array-of-hash", "title": "Ruby filtering array of hash", "body": "<p>I have the following array of arguments that has a hash with the args keys and their relevant passed values:</p>\n\n<pre><code>args_array = [{:collection=&gt;[\"abe\", \"&lt;mus&gt;\", \"hest\"], :include_blank=&gt;true, :required=&gt;true}]\n</code></pre>\n\n<p>I need to filter this hash to just get only some keys (like :include_blank and :required) in this example, with their relevant values like so:</p>\n\n<pre><code>filtered_args_hash = {:include_blank=&gt;true, :required=&gt;true}\n</code></pre>\n\n<p>So the <code>collection</code> arg is excluded, and just the <code>include_blank</code>, and <code>required</code> in which I specified are the ones returned.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>Here is a keys array of symbols in which I need to filter according to them:</p>\n\n<pre><code>filter_keys = %i(include_blank required)\n</code></pre>\n\n<p>How I can do that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "gemfile", "gemfile.lock"], "comments": [{"owner": {"reputation": 10255, "user_id": 1155142, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c680db41999d478ca34d1a77a470e30d?s=128&d=identicon&r=PG", "display_name": "gabrielhilal", "link": "https://stackoverflow.com/users/1155142/gabrielhilal"}, "edited": false, "score": 0, "creation_date": 1435758004, "post_id": 31162912, "comment_id": 50334457, "body": "try doing <code>bundle install</code> before pushing to heroku"}, {"owner": {"reputation": 5825, "user_id": 978515, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/QAwRM.jpg?s=128&g=1", "display_name": "davids", "link": "https://stackoverflow.com/users/978515/davids"}, "edited": false, "score": 0, "creation_date": 1435758176, "post_id": 31162912, "comment_id": 50334598, "body": "It seems that either you didn&#39;t <code>bundle install</code> after modifying your <code>Gemfile</code> or you don&#39;t have the correct files in your repository. Is <code>Gemfile.lock</code> in the <code>.gitignore</code>?"}, {"owner": {"reputation": 93, "user_id": 4914845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee735f53bf810afbe24c0884340b0ef7?s=128&d=identicon&r=PG&f=1", "display_name": "Rishabh", "link": "https://stackoverflow.com/users/4914845/rishabh"}, "edited": false, "score": 0, "creation_date": 1435758298, "post_id": 31162912, "comment_id": 50334698, "body": "No I&#39;ve done bundle install countless times now. Even updated my ruby version from 2.2.0 to 2.2.2. And bundle everytime."}, {"owner": {"reputation": 93, "user_id": 4914845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee735f53bf810afbe24c0884340b0ef7?s=128&d=identicon&r=PG&f=1", "display_name": "Rishabh", "link": "https://stackoverflow.com/users/4914845/rishabh"}, "edited": false, "score": 0, "creation_date": 1435758319, "post_id": 31162912, "comment_id": 50334718, "body": "Gemfile.lock isn&#39;t in .gitignore too"}, {"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1435759295, "post_id": 31162912, "comment_id": 50335486, "body": "If you have specified to use ruby2.2.0 in Gemfile. then why is it using ruby2.0.0 in heroku? if you fix that then it would run correctly is what I believe."}, {"owner": {"reputation": 93, "user_id": 4914845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee735f53bf810afbe24c0884340b0ef7?s=128&d=identicon&r=PG&f=1", "display_name": "Rishabh", "link": "https://stackoverflow.com/users/4914845/rishabh"}, "edited": false, "score": 0, "creation_date": 1435760223, "post_id": 31162912, "comment_id": 50336186, "body": "How do I change that? I also noticed this but haven&#39;t found a way to"}, {"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1435767084, "post_id": 31162912, "comment_id": 50341049, "body": "Should just be pulling it from your <code>Gemfile</code> as long as your latest <code>Gemfile</code> and <code>Gemfile.lock</code> are committed to your repository... which they are right?"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6015032"}, "is_accepted": false, "score": 1, "last_activity_date": 1457032159, "creation_date": 1457032159, "answer_id": 35780908, "question_id": 31162912, "link": "https://stackoverflow.com/questions/31162912/rails-heroku-deployment-error-push-rejected/35780908#35780908", "title": "Rails Heroku deployment error - push rejected", "body": "<p>Got to application.js and delete //= require turbolinks\nThen also comment out turoblinks in the gemfile and run bundle install and bundle update. Then I think you can reverse what I had just done and again run bundle install and bundle update. If not worst case scenario don't enable turbolinks and keep as is. Hope this works! </p>\n\n<p>Best,\nDH</p>\n"}], "owner": {"reputation": 93, "user_id": 4914845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee735f53bf810afbe24c0884340b0ef7?s=128&d=identicon&r=PG&f=1", "display_name": "Rishabh", "link": "https://stackoverflow.com/users/4914845/rishabh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 517, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1457032159, "creation_date": 1435757611, "last_edit_date": 1435758953, "question_id": 31162912, "link": "https://stackoverflow.com/questions/31162912/rails-heroku-deployment-error-push-rejected", "title": "Rails Heroku deployment error - push rejected", "body": "<p>So I am trying to deploy my application on Heroku but haven't been able to due to this error. Have spent like 3 hours trying out different things. Gemfile and Gemfile.lock are same and I've even tried deleting the lock file and using bundle to generate a new one. Same error. </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>git push heroku master\r\nCounting objects: 562, done.\r\nDelta compression using up to 4 threads.\r\nCompressing objects: 100% (525/525), done.\r\nWriting objects: 100% (562/562), 353.47 KiB | 0 bytes/s, done.\r\nTotal 562 (delta 286), reused 0 (delta 0)\r\nremote: Compressing source files... done.\r\nremote: Building source:\r\nremote: \r\nremote: -----&gt; Ruby app detected\r\nremote: -----&gt; Compiling Ruby/Rails\r\nremote: -----&gt; Using Ruby version: ruby-2.0.0\r\nremote: -----&gt; Installing dependencies using 1.9.7\r\nremote:        Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin -j4 --deployment\r\nremote:        You are trying to install in deployment mode after changing\r\nremote:        your Gemfile. Run `bundle install` elsewhere and add the\r\nremote:        updated Gemfile.lock to version control.\r\nremote:        You have deleted from the Gemfile:\r\nremote:        *\r\nremote:        Bundler Output: You are trying to install in deployment mode after changing\r\nremote:        your Gemfile. Run `bundle install` elsewhere and add the\r\nremote:        updated Gemfile.lock to version control.\r\nremote:        \r\nremote:        You have deleted from the Gemfile:\r\nremote:        *\r\nremote:  !\r\nremote:  !     Failed to install gems via Bundler.\r\nremote:  !\r\nremote: \r\nremote:  !     Push rejected, failed to compile Ruby app\r\nremote: \r\nremote: Verifying deploy....\r\nremote: \r\nremote: !\tPush rejected to polite-worms-1500.\r\nremote: \r\nTo https://git.heroku.com/polite-worms-1500.git\r\n ! [remote rejected] master -&gt; master (pre-receive hook declined)\r\nerror: failed to push some refs to 'https://git.heroku.com/polite-worms-1500.git'</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Here's the Gemfile:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>source 'https://rubygems.org'\r\n\r\nruby \"2.2.2\"\r\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\r\ngem 'rails', '4.2.1'\r\n# Use sqlite3 as the database for Active Record\r\ngem 'thin'\r\ngem \"pg\"\r\n# Use SCSS for stylesheets\r\ngem 'sass-rails', '~&gt; 5.0'\r\n# Use Uglifier as compressor for JavaScript assets\r\ngem 'uglifier', '&gt;= 1.3.0'\r\n# Use CoffeeScript for .coffee assets and views\r\ngem 'coffee-rails', '~&gt; 4.1.0'\r\n# See https://github.com/rails/execjs#readme for more supported runtimes\r\n# gem 'therubyracer', platforms: :ruby\r\ngem 'devise'\r\ngem 'omniauth-twitter'\r\ngem 'omniauth-facebook'\r\ngem 'carrierwave'\r\ngem 'bootstrap-sass'\r\ngem 'cloudinary'\r\ngem 'client_side_validations' , github:'DavyJonesLocker/client_side_validations'\r\n# Use jquery as the JavaScript library\r\ngem 'jquery-rails'\r\n# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\r\ngem 'turbolinks'\r\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\r\ngem 'jbuilder', '~&gt; 2.0'\r\n# bundle exec rake doc:rails generates the API under doc/api.\r\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\r\ngem 'rails_admin'\r\n# Use ActiveModel has_secure_password\r\n# gem 'bcrypt', '~&gt; 3.1.7'\r\n\r\n# Use Unicorn as the app server\r\n# gem 'unicorn'\r\n\r\n# Use Capistrano for deployment\r\n# gem 'capistrano-rails', group: :development\r\ngroup :development, :test do\r\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\r\n  gem 'byebug'\r\n \r\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views\r\n  gem 'web-console', '~&gt; 2.0'\r\n\r\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\r\n  gem 'spring'\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>And the Gemfile.lock :</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>GIT\r\n  remote: git://github.com/DavyJonesLocker/client_side_validations.git\r\n  revision: 023ddde13161dd614c8093f9a90305b57974776c\r\n  specs:\r\n    client_side_validations (4.2.0)\r\n      jquery-rails (&gt;= 3.1.2, &lt; 5.0.0)\r\n      rails (&gt;= 4.0.0, &lt; 4.3.0)\r\n\r\nGEM\r\n  remote: https://rubygems.org/\r\n  specs:\r\n    actionmailer (4.2.1)\r\n      actionpack (= 4.2.1)\r\n      actionview (= 4.2.1)\r\n      activejob (= 4.2.1)\r\n      mail (~&gt; 2.5, &gt;= 2.5.4)\r\n      rails-dom-testing (~&gt; 1.0, &gt;= 1.0.5)\r\n    actionpack (4.2.1)\r\n      actionview (= 4.2.1)\r\n      activesupport (= 4.2.1)\r\n      rack (~&gt; 1.6)\r\n      rack-test (~&gt; 0.6.2)\r\n      rails-dom-testing (~&gt; 1.0, &gt;= 1.0.5)\r\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.1)\r\n    actionview (4.2.1)\r\n      activesupport (= 4.2.1)\r\n      builder (~&gt; 3.1)\r\n      erubis (~&gt; 2.7.0)\r\n      rails-dom-testing (~&gt; 1.0, &gt;= 1.0.5)\r\n      rails-html-sanitizer (~&gt; 1.0, &gt;= 1.0.1)\r\n    activejob (4.2.1)\r\n      activesupport (= 4.2.1)\r\n      globalid (&gt;= 0.3.0)\r\n    activemodel (4.2.1)\r\n      activesupport (= 4.2.1)\r\n      builder (~&gt; 3.1)\r\n    activerecord (4.2.1)\r\n      activemodel (= 4.2.1)\r\n      activesupport (= 4.2.1)\r\n      arel (~&gt; 6.0)\r\n    activesupport (4.2.1)\r\n      i18n (~&gt; 0.7)\r\n      json (~&gt; 1.7, &gt;= 1.7.7)\r\n      minitest (~&gt; 5.1)\r\n      thread_safe (~&gt; 0.3, &gt;= 0.3.4)\r\n      tzinfo (~&gt; 1.1)\r\n    arel (6.0.0)\r\n    autoprefixer-rails (5.2.1)\r\n      execjs\r\n      json\r\n    aws_cf_signer (0.1.3)\r\n    bcrypt (3.1.10)\r\n    binding_of_caller (0.7.2)\r\n      debug_inspector (&gt;= 0.0.1)\r\n    bootstrap-sass (3.3.5.1)\r\n      autoprefixer-rails (&gt;= 5.0.0.1)\r\n      sass (&gt;= 3.3.0)\r\n    builder (3.2.2)\r\n    byebug (5.0.0)\r\n      columnize (= 0.9.0)\r\n    carrierwave (0.10.0)\r\n      activemodel (&gt;= 3.2.0)\r\n      activesupport (&gt;= 3.2.0)\r\n      json (&gt;= 1.7)\r\n      mime-types (&gt;= 1.16)\r\n    cloudinary (1.1.0)\r\n      aws_cf_signer\r\n      rest-client\r\n    coffee-rails (4.1.0)\r\n      coffee-script (&gt;= 2.2.0)\r\n      railties (&gt;= 4.0.0, &lt; 5.0)\r\n    coffee-script (2.4.1)\r\n      coffee-script-source\r\n      execjs\r\n    coffee-script-source (1.9.1.1)\r\n    columnize (0.9.0)\r\n    daemons (1.2.3)\r\n    debug_inspector (0.0.2)\r\n    devise (3.5.1)\r\n      bcrypt (~&gt; 3.0)\r\n      orm_adapter (~&gt; 0.1)\r\n      railties (&gt;= 3.2.6, &lt; 5)\r\n      responders\r\n      thread_safe (~&gt; 0.1)\r\n      warden (~&gt; 1.2.3)\r\n    domain_name (0.5.24)\r\n      unf (&gt;= 0.0.5, &lt; 1.0.0)\r\n    erubis (2.7.0)\r\n    eventmachine (1.0.7)\r\n    execjs (2.5.2)\r\n    faraday (0.9.1)\r\n      multipart-post (&gt;= 1.2, &lt; 3)\r\n    font-awesome-rails (4.3.0.0)\r\n      railties (&gt;= 3.2, &lt; 5.0)\r\n    globalid (0.3.5)\r\n      activesupport (&gt;= 4.1.0)\r\n    haml (4.0.6)\r\n      tilt\r\n    hashie (3.4.2)\r\n    http-cookie (1.0.2)\r\n      domain_name (~&gt; 0.5)\r\n    i18n (0.7.0)\r\n    jbuilder (2.3.0)\r\n      activesupport (&gt;= 3.0.0, &lt; 5)\r\n      multi_json (~&gt; 1.2)\r\n    jquery-rails (4.0.4)\r\n      rails-dom-testing (~&gt; 1.0)\r\n      railties (&gt;= 4.2.0)\r\n      thor (&gt;= 0.14, &lt; 2.0)\r\n    jquery-ui-rails (5.0.5)\r\n      railties (&gt;= 3.2.16)\r\n    json (1.8.3)\r\n    jwt (1.5.1)\r\n    kaminari (0.16.3)\r\n      actionpack (&gt;= 3.0.0)\r\n      activesupport (&gt;= 3.0.0)\r\n    loofah (2.0.2)\r\n      nokogiri (&gt;= 1.5.9)\r\n    mail (2.6.3)\r\n      mime-types (&gt;= 1.16, &lt; 3)\r\n    mime-types (2.6.1)\r\n    mini_portile (0.6.2)\r\n    minitest (5.7.0)\r\n    multi_json (1.11.1)\r\n    multi_xml (0.5.5)\r\n    multipart-post (2.0.0)\r\n    nested_form (0.3.2)\r\n    netrc (0.10.3)\r\n    nokogiri (1.6.6.2)\r\n      mini_portile (~&gt; 0.6.0)\r\n    oauth (0.4.7)\r\n    oauth2 (1.0.0)\r\n      faraday (&gt;= 0.8, &lt; 0.10)\r\n      jwt (~&gt; 1.0)\r\n      multi_json (~&gt; 1.3)\r\n      multi_xml (~&gt; 0.5)\r\n      rack (~&gt; 1.2)\r\n    omniauth (1.2.2)\r\n      hashie (&gt;= 1.2, &lt; 4)\r\n      rack (~&gt; 1.0)\r\n    omniauth-facebook (2.0.1)\r\n      omniauth-oauth2 (~&gt; 1.2)\r\n    omniauth-oauth (1.1.0)\r\n      oauth\r\n      omniauth (~&gt; 1.0)\r\n    omniauth-oauth2 (1.3.1)\r\n      oauth2 (~&gt; 1.0)\r\n      omniauth (~&gt; 1.2)\r\n    omniauth-twitter (1.2.0)\r\n      json (~&gt; 1.3)\r\n      omniauth-oauth (~&gt; 1.1)\r\n    orm_adapter (0.5.0)\r\n    pg (0.18.2)\r\n    rack (1.6.4)\r\n    rack-pjax (0.8.0)\r\n      nokogiri (~&gt; 1.5)\r\n      rack (~&gt; 1.1)\r\n    rack-test (0.6.3)\r\n      rack (&gt;= 1.0)\r\n    rails (4.2.1)\r\n      actionmailer (= 4.2.1)\r\n      actionpack (= 4.2.1)\r\n      actionview (= 4.2.1)\r\n      activejob (= 4.2.1)\r\n      activemodel (= 4.2.1)\r\n      activerecord (= 4.2.1)\r\n      activesupport (= 4.2.1)\r\n      bundler (&gt;= 1.3.0, &lt; 2.0)\r\n      railties (= 4.2.1)\r\n      sprockets-rails\r\n    rails-deprecated_sanitizer (1.0.3)\r\n      activesupport (&gt;= 4.2.0.alpha)\r\n    rails-dom-testing (1.0.6)\r\n      activesupport (&gt;= 4.2.0.beta, &lt; 5.0)\r\n      nokogiri (~&gt; 1.6.0)\r\n      rails-deprecated_sanitizer (&gt;= 1.0.1)\r\n    rails-html-sanitizer (1.0.2)\r\n      loofah (~&gt; 2.0)\r\n    rails_admin (0.6.8)\r\n      builder (~&gt; 3.1)\r\n      coffee-rails (~&gt; 4.0)\r\n      font-awesome-rails (&gt;= 3.0, &lt; 5)\r\n      haml (~&gt; 4.0)\r\n      jquery-rails (&gt;= 3.0, &lt; 5)\r\n      jquery-ui-rails (~&gt; 5.0)\r\n      kaminari (~&gt; 0.14)\r\n      nested_form (~&gt; 0.3)\r\n      rack-pjax (~&gt; 0.7)\r\n      rails (~&gt; 4.0)\r\n      remotipart (~&gt; 1.0)\r\n      safe_yaml (~&gt; 1.0)\r\n      sass-rails (&gt;= 4.0, &lt; 6)\r\n    railties (4.2.1)\r\n      actionpack (= 4.2.1)\r\n      activesupport (= 4.2.1)\r\n      rake (&gt;= 0.8.7)\r\n      thor (&gt;= 0.18.1, &lt; 2.0)\r\n    rake (10.4.2)\r\n    rdoc (4.2.0)\r\n    remotipart (1.2.1)\r\n    responders (2.1.0)\r\n      railties (&gt;= 4.2.0, &lt; 5)\r\n    rest-client (1.8.0)\r\n      http-cookie (&gt;= 1.0.2, &lt; 2.0)\r\n      mime-types (&gt;= 1.16, &lt; 3.0)\r\n      netrc (~&gt; 0.7)\r\n    safe_yaml (1.0.4)\r\n    sass (3.4.15)\r\n    sass-rails (5.0.3)\r\n      railties (&gt;= 4.0.0, &lt; 5.0)\r\n      sass (~&gt; 3.1)\r\n      sprockets (&gt;= 2.8, &lt; 4.0)\r\n      sprockets-rails (&gt;= 2.0, &lt; 4.0)\r\n      tilt (~&gt; 1.1)\r\n    sdoc (0.4.1)\r\n      json (~&gt; 1.7, &gt;= 1.7.7)\r\n      rdoc (~&gt; 4.0)\r\n    spring (1.3.6)\r\n    sprockets (3.2.0)\r\n      rack (~&gt; 1.0)\r\n    sprockets-rails (2.3.2)\r\n      actionpack (&gt;= 3.0)\r\n      activesupport (&gt;= 3.0)\r\n      sprockets (&gt;= 2.8, &lt; 4.0)\r\n    thin (1.6.3)\r\n      daemons (~&gt; 1.0, &gt;= 1.0.9)\r\n      eventmachine (~&gt; 1.0)\r\n      rack (~&gt; 1.0)\r\n    thor (0.19.1)\r\n    thread_safe (0.3.5)\r\n    tilt (1.4.1)\r\n    turbolinks (2.5.3)\r\n      coffee-rails\r\n    tzinfo (1.2.2)\r\n      thread_safe (~&gt; 0.1)\r\n    uglifier (2.7.1)\r\n      execjs (&gt;= 0.3.0)\r\n      json (&gt;= 1.8.0)\r\n    unf (0.1.4)\r\n      unf_ext\r\n    unf_ext (0.0.7.1)\r\n    warden (1.2.3)\r\n      rack (&gt;= 1.0)\r\n    web-console (2.1.3)\r\n      activemodel (&gt;= 4.0)\r\n      binding_of_caller (&gt;= 0.7.2)\r\n      railties (&gt;= 4.0)\r\n      sprockets-rails (&gt;= 2.0, &lt; 4.0)\r\n\r\nPLATFORMS\r\n  ruby\r\n\r\nDEPENDENCIES\r\n  bootstrap-sass\r\n  byebug\r\n  carrierwave\r\n  client_side_validations!\r\n  cloudinary\r\n  coffee-rails (~&gt; 4.1.0)\r\n  devise\r\n  jbuilder (~&gt; 2.0)\r\n  jquery-rails\r\n  omniauth-facebook\r\n  omniauth-twitter\r\n  pg\r\n  rails (= 4.2.1)\r\n  rails_admin\r\n  sass-rails (~&gt; 5.0)\r\n  sdoc (~&gt; 0.4.0)\r\n  spring\r\n  thin\r\n  turbolinks\r\n  uglifier (&gt;= 1.3.0)\r\n  web-console (~&gt; 2.0)\r\n\r\nBUNDLED WITH\r\n   1.10.5</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["ruby", "csv", "hash"], "comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 1, "creation_date": 1435761051, "post_id": 31162834, "comment_id": 50336865, "body": "My recommendation is not to start with that hash. Create the CSV from the same source the hash was created from."}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 4887162, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206783551250129/picture?type=large", "display_name": "Sokrah", "link": "https://stackoverflow.com/users/4887162/sokrah"}, "edited": false, "score": 0, "creation_date": 1435758733, "post_id": 31163234, "comment_id": 50335039, "body": "I would agree with you if I actually wanted to export it to a database. But this is not my goal here, I am practicing with ruby. And now on, I&#39;m just looking to match hash and csv !"}, {"owner": {"reputation": 105, "user_id": 4887162, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206783551250129/picture?type=large", "display_name": "Sokrah", "link": "https://stackoverflow.com/users/4887162/sokrah"}, "edited": false, "score": 0, "creation_date": 1435759073, "post_id": 31163234, "comment_id": 50335320, "body": "To make my point clearer, all I want here would be to export a csv file that can be readable by a third party that has no knowledge with computer.  And since i&#39;m not in business yet, I do not own an interface database/user. I&#39;m just looking for explore all that ruby could offer to me."}], "tags": [], "owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "is_accepted": false, "score": 0, "last_activity_date": 1435758525, "creation_date": 1435758525, "answer_id": 31163234, "question_id": 31162834, "link": "https://stackoverflow.com/questions/31162834/how-to-get-the-right-csv-format-from-hash-in-ruby/31163234#31163234", "title": "How to get the right csv format from hash in ruby", "body": "<p>It depends on how those fields are represented in the database.</p>\n\n<p>For example, your <code>jobs</code> has a hash with <code>name</code> key and your <code>kids</code> also has a hash with <code>name</code> key, so you can't just 'flatten' them, because keys have to be unique.</p>\n\n<p><code>jobs</code> is probably another model (database table), so you probably would have to (depending on the database) write it separately, including things like the id of the related object and so on.</p>\n\n<p>Are you sure you're not in over your head? Judging from your last question and because you seem to treat csv's as simple key-values pair omitting all the database representation and relations.</p>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 4887162, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206783551250129/picture?type=large", "display_name": "Sokrah", "link": "https://stackoverflow.com/users/4887162/sokrah"}, "edited": false, "score": 0, "creation_date": 1435761972, "post_id": 31163906, "comment_id": 50337561, "body": "You answered my question in a totally simple way ! Thank you"}], "tags": [], "owner": {"reputation": 2009, "user_id": 20769, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/922e7e3c612566756735b2def78827d8?s=128&d=identicon&r=PG", "display_name": "Joshua", "link": "https://stackoverflow.com/users/20769/joshua"}, "is_accepted": false, "score": 1, "last_activity_date": 1435764854, "last_edit_date": 1435764854, "creation_date": 1435760202, "answer_id": 31163906, "question_id": 31162834, "link": "https://stackoverflow.com/questions/31162834/how-to-get-the-right-csv-format-from-hash-in-ruby/31163906#31163906", "title": "How to get the right csv format from hash in ruby", "body": "<p>If you want to convert the hash to a CSV file or record, you'll need to get a 'flat' representation of your keys and values. Something like the following:</p>\n\n<pre><code>h = {\n a: 1,\n b: {\n  c: 3,\n  d: 4,\n  e: {\n    f: 5\n  },\n  g: 6\n } \n}\n\ndef flat_keys(h)\n  h.keys.reject{|k| h[k].is_a?(Hash)} + h.values.select{|v| v.is_a?(Hash)}.flat_map{|v| flat_keys(v)}\nend\n\nflat_keys(h)\n# [:a, :c, :d, :g, :f]\n\ndef flat_values(h)\n  h.values.flat_map{|v| v.is_a?(Hash) ? flat_values(v) : v}\nend\n\nflat_values(h)\n# [1, 3, 4, 5, 6]\n</code></pre>\n\n<p>Then you can apply that to create a CSV output. </p>\n"}, {"comments": [{"owner": {"reputation": 105, "user_id": 4887162, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206783551250129/picture?type=large", "display_name": "Sokrah", "link": "https://stackoverflow.com/users/4887162/sokrah"}, "edited": false, "score": 0, "creation_date": 1435761656, "post_id": 31163934, "comment_id": 50337336, "body": "<i>A valid csv has a fixed number of columns, your hash has a variable number of values</i> . Well, indeed I was about to use your method with empty cells (&quot;&quot;).  <b>deep hash</b> : that&#39;s tottaly my case, have no idea of this nickname, that&#39;s will help me a lot.  For the yaml option, that&#39;s a good tip! Even if i&#39;ll try to figure out how to solve my problem before, that&#39;s definitvly a way I will explore.  Thank you."}], "tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": true, "score": 1, "last_activity_date": 1435765153, "last_edit_date": 1435765153, "creation_date": 1435760291, "answer_id": 31163934, "question_id": 31162834, "link": "https://stackoverflow.com/questions/31162834/how-to-get-the-right-csv-format-from-hash-in-ruby/31163934#31163934", "title": "How to get the right csv format from hash in ruby", "body": "<p>A valid CSV output has a fixed number of columns, your hash has a variable number of values. The keys <code>jobs</code>, <code>graduate</code> and <code>kids</code> could all have multiple values.</p>\n\n<p>If your only goal is to make a CSV output that can be read in Excel for example, you could enumerate your Hash, take the maximum number of key/value pairs per key, total it and then write your CSV output, filling the blank values with \"\".</p>\n\n<p>There are plenty of examples here on Stack Overflow, search for \"deep hash\" to start with.</p>\n\n<p>Your result would have a different number of columns with each Hash you provide it.</p>\n\n<p>That's too much work if you ask me.\nIf you just want to present a readable result, your best and easiest option is to convert the Hash to YAML which is created for readability:</p>\n\n<pre><code>require 'yaml'\nhash = {.....}\nputs hash.to_yaml\n\nemployee:\n- name: Claude\n  lastname: David\n  profile:\n  - age: '43'\n    jobs:\n    - name: Ingeneer\n      year: '5'\n    graduate:\n    - place: Oxford\n      year: '1990'\n    kids:\n    - name: Viktor\n      age: '18'\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 4887162, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206783551250129/picture?type=large", "display_name": "Sokrah", "link": "https://stackoverflow.com/users/4887162/sokrah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 31163934, "answer_count": 3, "score": 3, "last_activity_date": 1435765153, "creation_date": 1435757435, "last_edit_date": 1495542602, "question_id": 31162834, "link": "https://stackoverflow.com/questions/31162834/how-to-get-the-right-csv-format-from-hash-in-ruby", "title": "How to get the right csv format from hash in ruby", "body": "<h1> Hash to csv</h1>\n\n<p>hash :</p>\n\n<pre><code>{\n\"employee\" =&gt; [\n  {\n    \"name\" =&gt; \"Claude\",\n    \"lastname\"=&gt; \"David\",\n    \"profile\" =&gt; [\n       \"age\" =&gt; \"43\",\n       \"jobs\" =&gt; [\n         {\n           \"name\" =&gt; \"Ingeneer\",\n           \"year\" =&gt; \"5\"\n         }\n       ],\n       \"graduate\" =&gt; [\n          {\n             \"place\" =&gt; \"Oxford\",\n             \"year\" =&gt; \"1990\"\n          },\n       ],\n       \"kids\" =&gt; [\n         {\n           \"name\" =&gt; \"Viktor\",\n           \"age\" =&gt; \"18\",\n         }\n    ]\n  }\n}]\n</code></pre>\n\n<p>this is an example of an hash I would work on. So, as you can see, there is many level of array in it.</p>\n\n<p>My question is, <strong>how do I put it properly in a CSV file?</strong></p>\n\n<p>I tried this :</p>\n\n<pre><code>column_names = hash['employee'].first.keys\ns=CSV.generate do |csv|\n   csv &lt;&lt; column_names\n   hash['scrap'].each do |x|\n     csv &lt;&lt; x.values\n   end\nend\nFile.write('myCSV.csv', s)\n</code></pre>\n\n<p>but I only get <code>name</code>, <code>lastname</code> and <code>profile</code> as keys, when I would catch all of them (<code>age</code>, <code>jobs</code>, <code>name</code> , <code>year</code>, <code>graduate</code>, <code>place</code>...).</p>\n\n<p>Beside, how can I associate one value per case?\nBecause I actually have all <code>employee[x]</code> which take a cell alone. Is there any parameters I have missed?</p>\n\n<p>Ps: This could be the following of <a href=\"https://stackoverflow.com/questions/8183706/how-to-save-a-hash-into-a-csv\">this post</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "is_accepted": false, "score": 0, "last_activity_date": 1435757599, "creation_date": 1435757599, "answer_id": 31162908, "question_id": 31162728, "link": "https://stackoverflow.com/questions/31162728/merge-methods-to-one-hash-through-method-chaining/31162908#31162908", "title": "Merge methods to one hash, through method chaining", "body": "<p>You just need to create scopes.</p>\n\n<pre><code>class Blah &lt; ActiveRecord::Base\n  scope :no_scope, -&gt; {all}\n  scope :for_user, -&gt; (user_id) {where(user_id: user_id)} \n\nend\n\n\nBlah.no_scope.for_user(1) #  where(user_id: 1)\n</code></pre>\n\n<p>See also <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Scoping/Named/ClassMethods.html\" rel=\"nofollow\">scopes</a></p>\n"}, {"tags": [], "owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "is_accepted": true, "score": 2, "last_activity_date": 1435757632, "creation_date": 1435757632, "answer_id": 31162919, "question_id": 31162728, "link": "https://stackoverflow.com/questions/31162728/merge-methods-to-one-hash-through-method-chaining/31162919#31162919", "title": "Merge methods to one hash, through method chaining", "body": "<p>Did you try to achieve this?</p>\n\n<pre><code>class Blah &lt; ActiveRecord::Base\n  scope :no_scope, -&gt; { where(scope: false) }\n  scope :for_user, -&gt; (id) { where(user_id: id) }\nend\n\nBlah.no_scope.for_user(1) #  where(scope: false, user_id: 1)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1435763385, "creation_date": 1435763385, "answer_id": 31165172, "question_id": 31162728, "link": "https://stackoverflow.com/questions/31162728/merge-methods-to-one-hash-through-method-chaining/31165172#31165172", "title": "Merge methods to one hash, through method chaining", "body": "<p>To give the result as a real Hash instead of a Activerecord relation, you do it like this</p>\n\n<pre><code>class Blah &lt; ActiveRecord::Base\n  scope :no_scope, -&gt;{where(scope: false)}\n  scope :for_user, -&gt;(id){where(user_id: id)} # no space in -&gt;(id)\nend\n\n# give results as an array of hashes\nBlah.no_scope.for_user(1).map { |e| {scope: e.scope, user_id: e.user_id} }\n</code></pre>\n\n<p>gives</p>\n\n<pre><code>[{\"scope\"=&gt;false, \"user_id\"=&gt;1}]\n</code></pre>\n"}], "owner": {"reputation": 4050, "user_id": 977017, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8c269927ef5eb1b0400bc6fb2e1a1e2e?s=128&d=identicon&r=PG", "display_name": "Jan", "link": "https://stackoverflow.com/users/977017/jan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 31162919, "answer_count": 3, "score": 1, "last_activity_date": 1435763385, "creation_date": 1435757163, "last_edit_date": 1435757352, "question_id": 31162728, "link": "https://stackoverflow.com/questions/31162728/merge-methods-to-one-hash-through-method-chaining", "title": "Merge methods to one hash, through method chaining", "body": "<p>I have a class which is generating queries for a db:</p>\n\n<p>They should concatenated, so I do not repeat my code for a query (DRY).</p>\n\n<p>I thought I could do something like this:</p>\n\n<p>ruby</p>\n\n<pre><code>class Blah &lt; ActiveRecord::Base\n  def no_scope\n    {scope: false}\n  end\n\n  def for_user(user_id)\n    {user_id: user_id}\n  end\nend\n</code></pre>\n\n<p>Now my query</p>\n\n<pre><code>    Blah.no_scope.for_user(1)\n</code></pre>\n\n<p>RESULT SHOULD BE A <strong>HASH</strong>:</p>\n\n<pre><code>    {user_id: 1, scope: false}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "model-view-controller"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1435757125, "post_id": 31162505, "comment_id": 50333750, "body": "I&#39;d create one controller for each resource ;-)"}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 3, "creation_date": 1435757158, "post_id": 31162505, "comment_id": 50333771, "body": "You should always think in resources. I would say you have 3 resources here: <code>session</code>, <code>members</code> and <code>messages</code>. Now it is not certain for me what index page does in the original website or how are messages associated with members, however I am pretty certian that 3 controllers would be ok."}, {"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "reply_to_user": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1435757186, "post_id": 31162505, "comment_id": 50333794, "body": "What do they do?  Looks like signup, profile and members would be new, show and index actions of a user controller respectively.  Then I&#39;d have a sessions controller for login and logout, and another one for index where my app is routed to personally. Forgot messages.  I&#39;m with @BroiSatse"}], "answers": [{"tags": [], "owner": {"reputation": 1401, "user_id": 2723934, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/025a08b4c87bf427fffab6600dea6ae8?s=128&d=identicon&r=PG&f=1", "display_name": "miler350", "link": "https://stackoverflow.com/users/2723934/miler350"}, "is_accepted": true, "score": 7, "last_activity_date": 1435757299, "creation_date": 1435757299, "answer_id": 31162779, "question_id": 31162505, "link": "https://stackoverflow.com/questions/31162505/rails-how-many-controllers-required/31162779#31162779", "title": "Rails - How many controllers required?", "body": "<p>Create a <code>sessions_controller</code> for <code>login</code> and <code>logout</code>. Here, you need to add a session and remove a session - they are managed in the same controller.</p>\n\n<p>Create a <code>users_controller</code> for <code>signup</code> and <code>members</code> (and possibly <code>profile</code>). Here, you want to create a new user, view all users, and view the information on a particular user.</p>\n\n<p>Create a <code>messages_controller</code> for <code>messages</code></p>\n\n<p>Create a <code>main_controller</code> to manage your <code>index</code>/homepage.</p>\n"}], "owner": {"reputation": 47817, "user_id": 2535611, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/d61593cac94336661b986823abb9852e?s=128&d=identicon&r=PG", "display_name": "rafaelc", "link": "https://stackoverflow.com/users/2535611/rafaelc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 331, "favorite_count": 0, "accepted_answer_id": 31162779, "answer_count": 1, "score": 2, "last_activity_date": 1558930873, "creation_date": 1435756640, "question_id": 31162505, "link": "https://stackoverflow.com/questions/31162505/rails-how-many-controllers-required", "title": "Rails - How many controllers required?", "body": "<p>I'm learning rails from scratch, and I've been studying it for a while but something is not clear to me.</p>\n\n<p>I have to 'move' a Django-based website to a Rails-based. \nThe website is very simple and consists of a mini 'social network', which has a structure like:</p>\n\n<pre><code>social/index\nsocial/signup\nsocial/login\nsocial/profile\nsocial/members\nsocial/messages\nsocial/logout\n</code></pre>\n\n<p>My question is: should I create <strong>ONE</strong> controller <code>SOCIAL</code> and make each page (i.e index, signup, login etc) functions of this controller; or should I generate one controller for each page (resulting in <strong>SEVEN</strong> controllers) ?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1435756696, "post_id": 31162440, "comment_id": 50333416, "body": "What is that you want to sort countries or currencies or both together?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1435756708, "post_id": 31162440, "comment_id": 50333426, "body": "To sort an array in an alphabetical order one uses <code>Array#sort</code>."}, {"owner": {"reputation": 133, "user_id": 4723216, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/45ec5d596276d6d5ff060da32070d2af?s=128&d=identicon&r=PG&f=1", "display_name": "kali", "link": "https://stackoverflow.com/users/4723216/kali"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1435757085, "post_id": 31162440, "comment_id": 50333711, "body": "@mudasobwa thank you"}], "owner": {"reputation": 133, "user_id": 4723216, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/45ec5d596276d6d5ff060da32070d2af?s=128&d=identicon&r=PG&f=1", "display_name": "kali", "link": "https://stackoverflow.com/users/4723216/kali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1435756510, "creation_date": 1435756510, "question_id": 31162440, "link": "https://stackoverflow.com/questions/31162440/ordering-select-box-list-alphabetically-rails-4-0", "title": "ordering select box list alphabetically rails 4.0", "body": "<p>I am fetching all currencies for all countries. how can i order them in alphabetical order</p>\n\n<p>here is what i have</p>\n\n<pre><code>= f.select :budget_currency, ['None'] + Country.pluck(:currency).compact.uniq.select {|x| x.present?}, {}, :class =&gt; \"itineraryBudget\"\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "twitter-bootstrap"], "comments": [{"owner": {"reputation": 17065, "user_id": 175981, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b357ab54946a2be4d19c8a9aab2a09d6?s=128&d=identicon&r=PG", "display_name": "Chris Peters", "link": "https://stackoverflow.com/users/175981/chris-peters"}, "edited": false, "score": 0, "creation_date": 1435757871, "post_id": 31162348, "comment_id": 50334357, "body": "Those <code>&#47;&#47; require</code> lines don&#39;t belong in <code>application.scss</code>. Those are JavaScript manifest lines anyway."}, {"owner": {"reputation": 2495, "user_id": 2970507, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/yw6OU.png?s=128&g=1", "display_name": "olivier", "link": "https://stackoverflow.com/users/2970507/olivier"}, "reply_to_user": {"reputation": 17065, "user_id": 175981, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b357ab54946a2be4d19c8a9aab2a09d6?s=128&d=identicon&r=PG", "display_name": "Chris Peters", "link": "https://stackoverflow.com/users/175981/chris-peters"}, "edited": false, "score": 0, "creation_date": 1435758592, "post_id": 31162348, "comment_id": 50334934, "body": "Is it <code>*=</code> ? in the scss file?"}, {"owner": {"reputation": 17065, "user_id": 175981, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b357ab54946a2be4d19c8a9aab2a09d6?s=128&d=identicon&r=PG", "display_name": "Chris Peters", "link": "https://stackoverflow.com/users/175981/chris-peters"}, "edited": false, "score": 1, "creation_date": 1435775838, "post_id": 31162348, "comment_id": 50346035, "body": "Once you change <code>application.css</code> to <code>application.scss</code>, you must use Sass <code>@import</code> statements instead of the default CSS comment syntax that Rails provides in asset manifest files."}, {"owner": {"reputation": 17065, "user_id": 175981, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b357ab54946a2be4d19c8a9aab2a09d6?s=128&d=identicon&r=PG", "display_name": "Chris Peters", "link": "https://stackoverflow.com/users/175981/chris-peters"}, "edited": false, "score": 0, "creation_date": 1435842090, "post_id": 31162348, "comment_id": 50375986, "body": "You&#39;re welcome. I know it probably doesn&#39;t solve your problem, but at least I could teach you that. :)"}, {"owner": {"reputation": 2495, "user_id": 2970507, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/yw6OU.png?s=128&g=1", "display_name": "olivier", "link": "https://stackoverflow.com/users/2970507/olivier"}, "reply_to_user": {"reputation": 17065, "user_id": 175981, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b357ab54946a2be4d19c8a9aab2a09d6?s=128&d=identicon&r=PG", "display_name": "Chris Peters", "link": "https://stackoverflow.com/users/175981/chris-peters"}, "edited": false, "score": 0, "creation_date": 1435852948, "post_id": 31162348, "comment_id": 50383944, "body": "@ChrisPeters maybe you have a solution for this problem? <a href=\"http://stackoverflow.com/questions/31189115/bootstrap-wont-load-with-rails-and-sass\" title=\"bootstrap wont load with rails and sass\">stackoverflow.com/questions/31189115/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 14478710, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14Gg8qlV-r-qnrbU7TRgZIT3KC5uDSKFCOZFevc2c=k-s128", "display_name": "geetha tulasi", "link": "https://stackoverflow.com/users/14478710/geetha-tulasi"}, "is_accepted": false, "score": 0, "last_activity_date": 1611302192, "creation_date": 1611302192, "answer_id": 65841262, "question_id": 31162348, "link": "https://stackoverflow.com/questions/31162348/how-should-look-a-application-scss-file-in-ruby/65841262#65841262", "title": "How should look a application.scss file in ruby?", "body": "<p>In sass files we does't include require,you can remove them.replace your code with as follows</p>\n<pre><code>@import &quot;bootstrap-sprockets&quot;;\n@import &quot;bootstrap&quot;;\n</code></pre>\n"}], "owner": {"reputation": 2495, "user_id": 2970507, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/yw6OU.png?s=128&g=1", "display_name": "olivier", "link": "https://stackoverflow.com/users/2970507/olivier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1611302192, "creation_date": 1435756296, "question_id": 31162348, "link": "https://stackoverflow.com/questions/31162348/how-should-look-a-application-scss-file-in-ruby", "title": "How should look a application.scss file in ruby?", "body": "<p>I'm new in ruby and my code looks like this: Is this correct? My boostrap does not load.. </p>\n\n<p>So <strong>application.scss</strong></p>\n\n<pre><code>//= require . \n//= require_self\n //= require jquery\n //= require jquery_ujs\n //= require turbolinks\n //= require bootstrap\n //= require_tree .\n\n\n@import \"bootstrap-sprockets\";\n@import \"bootstrap\";\n</code></pre>\n\n<p>And <strong>application.js</strong> looks like this:</p>\n\n<pre><code>// This is a manifest file that'll be compiled into application.js, which will include all the files\n// listed below.\n//\n// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, vendor/assets/javascripts,\n// or vendor/assets/javascripts of plugins, if any, can be referenced here using a relative path.\n//\n// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the\n// the compiled file.\n//\n// WARNING: THE FIRST BLANK LINE MARKS THE END OF WHAT'S TO BE PROCESSED, ANY BLANK LINE SHOULD\n// GO AFTER THE REQUIRES BELOW.\n//\n//= require jquery\n//= require jquery_ujs\n//= require turbolinks\n//= require bootstrap-sprockets\n//= require_tree .\n</code></pre>\n\n<p>Thanks for any explanation!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "node.js", "nginx", "capybara"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1435756363, "post_id": 31162291, "comment_id": 50333134, "body": "Does this help? <a href=\"http://stackoverflow.com/q/7047972/477037\">stackoverflow.com/q/7047972/477037</a>"}, {"owner": {"reputation": 11, "user_id": 4291110, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004028483781/picture?type=large", "display_name": "Timur  Daudov", "link": "https://stackoverflow.com/users/4291110/timur-daudov"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1435762763, "post_id": 31162291, "comment_id": 50338122, "body": "@Stefan, thanks, but no. The issue is that I need access to the test database during test execution. Also I will need to launch tests on Circle CI."}, {"owner": {"reputation": 686, "user_id": 572024, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c6c0901507af05b4f9d2a39f6a1531d7?s=128&d=identicon&r=PG", "display_name": "sean_robbins", "link": "https://stackoverflow.com/users/572024/sean-robbins"}, "edited": false, "score": 0, "creation_date": 1554910729, "post_id": 31162291, "comment_id": 97926230, "body": "Did you get this one solved?"}], "owner": {"reputation": 11, "user_id": 4291110, "user_type": "registered", "profile_image": "https://graph.facebook.com/100004028483781/picture?type=large", "display_name": "Timur  Daudov", "link": "https://stackoverflow.com/users/4291110/timur-daudov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1435756165, "creation_date": 1435756165, "question_id": 31162291, "link": "https://stackoverflow.com/questions/31162291/how-to-run-capybara-specs-on-nginxnoderails-servers", "title": "How to run Capybara specs on Nginx+Node+Rails servers?", "body": "<p>An application is running on Rails (localhost:3000) + Node (localhost:8080) servers and the Nginx is used to redirect requests either to Rails server or Node.</p>\n\n<p>In Nginx config file we have set constant IP (<strong>nginx.localhost</strong>) to send requests to Nginx.\nAlso the Rails and Node servers IP are constant for nginx.</p>\n\n<p>And now there is a problem to run tests on this environment.\nI need to run tests with this <strong>nginx.localhost</strong> as a root_path or Capybara.app_host so that I could test application via Nginx.</p>\n\n<p>Do you have any ideas? All what came to my mind was to update nginx config file with port and server generated by rspec on suite start.\nBut this is a bit awkward.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cocoon-gem"], "answers": [{"tags": [], "owner": {"reputation": 682, "user_id": 3965220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44dff4b585977e6b67ac1565c4039d74?s=128&d=identicon&r=PG&f=1", "display_name": "Fatimah", "link": "https://stackoverflow.com/users/3965220/fatimah"}, "is_accepted": false, "score": 0, "last_activity_date": 1435755836, "creation_date": 1435755836, "answer_id": 31162149, "question_id": 31161698, "link": "https://stackoverflow.com/questions/31161698/cocoon-gem-showing-rating-for-only-first-field/31162149#31162149", "title": "Cocoon gem showing rating for only first field", "body": "<p>I finally figured it out. I used class instead. It worked!</p>\n"}], "owner": {"reputation": 682, "user_id": 3965220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/44dff4b585977e6b67ac1565c4039d74?s=128&d=identicon&r=PG&f=1", "display_name": "Fatimah", "link": "https://stackoverflow.com/users/3965220/fatimah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1435755836, "creation_date": 1435754671, "question_id": 31161698, "link": "https://stackoverflow.com/questions/31161698/cocoon-gem-showing-rating-for-only-first-field", "title": "Cocoon gem showing rating for only first field", "body": "<p>I am developing an app that allows HR Managers rate candidates based on key indicators. I use cocoon gem to add the indicators per candidate and ratyjs to add star rating. But unfortunately, the star shows only on the first field because cocoon gem generates a new id per field. How can I get my rating to show for every candidate? </p>\n\n<p>Please help!</p>\n\n<p>Below is a snippet of my code</p>\n\n<pre><code>&lt;div id=\"edu-rating\"&gt;&lt;/div&gt;\n ...\n&lt;script&gt;\n$('#edu-rating').on('cocoon:after-insert').raty({\nstarOn: '&lt;%= image_path('star-on.png') %&gt;',\nstarOff: '&lt;%= image_path('star-off.png') %&gt;',\nstarHalf: '&lt;%= image_path('star-half.png') %&gt;',\npath: '',\nscoreName: 'interview_candidate[education]',\nspace: true \n});\n&lt;/script&gt;\n</code></pre>\n"}, {"tags": ["ruby", "puppet"], "comments": [{"owner": {"reputation": 7902, "user_id": 3356612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/085070b2074edcce07bc4381c7b5d635?s=128&d=identicon&r=PG", "display_name": "Felix Frank", "link": "https://stackoverflow.com/users/3356612/felix-frank"}, "edited": false, "score": 1, "creation_date": 1435760280, "post_id": 31161536, "comment_id": 50336230, "body": "Is there a <code>require &#39;json&#39;</code> in your older provider? Something in your recent changes seem to break that."}, {"owner": {"reputation": 846, "user_id": 975639, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/288dfe05f1db1be18fb0b70faa13400f?s=128&d=identicon&r=PG&f=1", "display_name": "badbishop", "link": "https://stackoverflow.com/users/975639/badbishop"}, "reply_to_user": {"reputation": 7902, "user_id": 3356612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/085070b2074edcce07bc4381c7b5d635?s=128&d=identicon&r=PG", "display_name": "Felix Frank", "link": "https://stackoverflow.com/users/3356612/felix-frank"}, "edited": false, "score": 0, "creation_date": 1435777707, "post_id": 31161536, "comment_id": 50347172, "body": "Yes, it is indeed, and I almost forgot it! Now, after installing ruby-json on the test machine, it works. Stupid me... But the weird part is - am I supposed to install a ruby-json package on <i>every single machine</i> (instead of a handful, where it&#39;s used) in the entire puppet environment just for parsing the docs?"}], "answers": [{"comments": [{"owner": {"reputation": 846, "user_id": 975639, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/288dfe05f1db1be18fb0b70faa13400f?s=128&d=identicon&r=PG&f=1", "display_name": "badbishop", "link": "https://stackoverflow.com/users/975639/badbishop"}, "edited": false, "score": 0, "creation_date": 1435948605, "post_id": 31181635, "comment_id": 50426604, "body": "I know I&#39;m breaking the rules, but how on Earth can I mark the question answered!? This message is displayed so briefly, that I still have no idea how to do it, with all those questions asked! By the way, thank you, Felix! :)"}], "tags": [], "owner": {"reputation": 7902, "user_id": 3356612, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/085070b2074edcce07bc4381c7b5d635?s=128&d=identicon&r=PG", "display_name": "Felix Frank", "link": "https://stackoverflow.com/users/3356612/felix-frank"}, "is_accepted": true, "score": 1, "last_activity_date": 1435831588, "creation_date": 1435831588, "answer_id": 31181635, "question_id": 31161536, "link": "https://stackoverflow.com/questions/31161536/custom-puppet-type-breaks-puppet-describe-with-no-such-file-to-load-json-2/31181635#31181635", "title": "Custom Puppet Type breaks puppet describe with &quot;no such file to load -- json&quot; (2.7)", "body": "<p>Unfortunately, Ruby gems that are required by one of your custom types must be provided for <em>all</em> your Puppet agents.</p>\n\n<p>The agent invariably syncs the types and providers to your agents, because at the time of plugin sync, the agent cannot yet tell whether a type is required by the catalog or not.</p>\n\n<p>If you can delegate the functionality to an external tool instead, Puppet will be able to discern that the provider just isn't suitable for most agents.</p>\n"}], "owner": {"reputation": 846, "user_id": 975639, "user_type": "registered", "accept_rate": 28, "profile_image": "https://www.gravatar.com/avatar/288dfe05f1db1be18fb0b70faa13400f?s=128&d=identicon&r=PG&f=1", "display_name": "badbishop", "link": "https://stackoverflow.com/users/975639/badbishop"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 31181635, "answer_count": 1, "score": 1, "last_activity_date": 1435831588, "creation_date": 1435754238, "last_edit_date": 1435755394, "question_id": 31161536, "link": "https://stackoverflow.com/questions/31161536/custom-puppet-type-breaks-puppet-describe-with-no-such-file-to-load-json-2", "title": "Custom Puppet Type breaks puppet describe with &quot;no such file to load -- json&quot; (2.7)", "body": "<p>I wrote a few custom Puppet types. As long as they all were used on the same node, </p>\n\n<p><code>puppet describe &lt;my_custom_type&gt;</code> </p>\n\n<p>worked fine, displaying the documentation from CLI.</p>\n\n<p>Then I wrote another custom type, but now I get</p>\n\n<pre><code># puppet describe &lt;my_new_custom_type&gt;\nCould not run: Could not autoload /var/lib/puppet/lib/puppet/type/&lt;my_older_custom_type&gt;: Could not autoload /var/lib/puppet/lib/puppet/provider/&lt;my_older_custom_type&gt;/&lt;custom_provider&gt;.rb: no such file to load -- json\n</code></pre>\n\n<p>A glimpse under the <code>/var/lib/puppet/lib/puppet</code> reveals that the 'missing' files are there. When I delete the old custom types' files under <code>/var/lib/puppet/lib/puppet</code>, then <code># puppet describe &lt;my_new_custom_type&gt;</code> works fine.</p>\n\n<p>Can someone advise an inexpensive workaround? Or I'm I overlooking something? I have to use Puppet v 2.7.something at the moment (not my personal choice), which will be upgraded in a matter of months, so if this is fixed in newer versions, I'd leave it as it is.</p>\n\n<p>All aforementioned custom types/providers are working, of course. The isuue is limited to <code>puppet describe</code> functionality.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "file-upload", "encoding", "utf-8"], "answers": [{"tags": [], "owner": {"reputation": 137, "user_id": 4323041, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4610b83635acb441b9879aa28b15897f?s=128&d=identicon&r=PG&f=1", "display_name": "Ferdinand Rosario", "link": "https://stackoverflow.com/users/4323041/ferdinand-rosario"}, "is_accepted": false, "score": 1, "last_activity_date": 1435757262, "creation_date": 1435757262, "answer_id": 31162760, "question_id": 31161259, "link": "https://stackoverflow.com/questions/31161259/encodingundefinedconversionerror-ascii-8bit-to-utf-8-ruby-on-rails/31162760#31162760", "title": "Encoding::UndefinedConversionError -ASCII-8BIT to UTF-8 ruby on rails", "body": "<p>I found the reason why this happen , I have the following </p>\n\n<pre><code>gem 'meta_request','0.2.1'\n</code></pre>\n\n<p>in my gemfile and removing this gem make the file upload works perfect.</p>\n\n<p>hope this will help someone else...</p>\n"}], "owner": {"reputation": 137, "user_id": 4323041, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4610b83635acb441b9879aa28b15897f?s=128&d=identicon&r=PG&f=1", "display_name": "Ferdinand Rosario", "link": "https://stackoverflow.com/users/4323041/ferdinand-rosario"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1252, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1435816005, "creation_date": 1435753519, "last_edit_date": 1435816005, "question_id": 31161259, "link": "https://stackoverflow.com/questions/31161259/encodingundefinedconversionerror-ascii-8bit-to-utf-8-ruby-on-rails", "title": "Encoding::UndefinedConversionError -ASCII-8BIT to UTF-8 ruby on rails", "body": "<p>2.2 and raisl 4.1. I tried to read an xlsx file from user.</p>\n\n<pre><code>&lt;%= form_for(@attachment, :html =&gt; { :multipart =&gt; true,:class =&gt; 'form-horizontal' }) do |f| %&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;label for=\"inputEmail3\" class=\"col-sm-2 control-label\"&gt;List of Company Name&lt;/label&gt;\n    &lt;div class=\"col-sm-10\"&gt;\n        &lt;%= f.file_field :attachment,class: 'form-control' %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;div class=\"col-sm-offset-2 col-sm-10\"&gt;\n      &lt;%= f.submit 'Import Company Name list',:class =&gt; \"btn btn-primary\" %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>In console </p>\n\n<pre><code> Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"BJMhP6MnjUH17esTRxtaViIpBXL/aMzQgzuOI0a9LjI=\", \"attachment\"=&gt;{\"attachment\"=&gt;#&lt;ActionDispatch::Http::UploadedFile:0x00000006cd25e8 @tempfile=#&lt;Tempfile:/tmp/RackMultipart20150701-9558-59shsp&gt;, @original_filename=\"Book2.xlsx\", @content_type=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\", @headers=\"Content-Disposition: form-data; name=\\\"attachment[attachment]\\\"; filename=\\\"Book2.xlsx\\\"\\r\\nContent-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\\r\\n\"&gt;}, \"commit\"=&gt;\"Import Company Name list\"}\n</code></pre>\n\n<p>Even though the parameter passing with UTF-8 mark I'm getting </p>\n\n<pre><code>Encoding::UndefinedConversionError - \"\\xA0\" from ASCII-8BIT to UTF-8:\n</code></pre>\n\n<p>error.. Tried varied solution like <strong>.force_encoding('UTF-8')</strong> mime::type but nothing worked out? </p>\n\n<p>Have anyone has an idea about this issue?</p>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1435753452, "post_id": 31160969, "comment_id": 50330953, "body": "Does this work without using VCR, i.e. hitting the real service?"}, {"owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1435754308, "post_id": 31160969, "comment_id": 50331564, "body": "No. The problem is not the exception. It seems to be something with the formatting."}], "answers": [{"comments": [{"owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "edited": false, "score": 0, "creation_date": 1435754387, "post_id": 31161565, "comment_id": 50331612, "body": "Would the error_code be a custom field on the <code>MoodleError</code> ?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "edited": false, "score": 1, "creation_date": 1435754457, "post_id": 31161565, "comment_id": 50331672, "body": "@Ryan-NealMes yes, it&#39;s just an attribute"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 2, "last_activity_date": 1435754423, "last_edit_date": 1435754423, "creation_date": 1435754298, "answer_id": 31161565, "question_id": 31160969, "link": "https://stackoverflow.com/questions/31160969/strange-behavior-in-rspec-when-raising-exception/31161565#31161565", "title": "Strange behavior in rspec when raising exception", "body": "<p><a href=\"https://www.relishapp.com/rspec/rspec-expectations/v/3-3/docs/built-in-matchers/raise-error-matcher\" rel=\"nofollow\"><code>raise_error</code></a> doesn't take a hash but an error message (either string or regexp).</p>\n\n<p>This would work:</p>\n\n<pre><code>expect {\n  Moodle::Client.new.core_user_get_users(params)\n}.to raise_error(Moodle::MoodleError, 'Invalid token - token not found')\n</code></pre>\n\n<p>You can set additional expectations by <a href=\"https://www.relishapp.com/rspec/rspec-expectations/docs/built-in-matchers/raise-error-matcher#set-expectations-on-error-object-passed-to-block\" rel=\"nofollow\">passing a block</a>, e.g.:</p>\n\n<pre><code>expect {\n  Moodle::Client.new.core_user_get_users(params)\n}.to raise_error(Moodle::MoodleError, 'Invalid token - token not found') { |error|\n  expect(error.errorcode).to eq('invalidtoken')\n}\n</code></pre>\n"}], "owner": {"reputation": 5183, "user_id": 799618, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/449b61e3b1906e8198b18b338259808c?s=128&d=identicon&r=PG", "display_name": "Ryan-Neal Mes", "link": "https://stackoverflow.com/users/799618/ryan-neal-mes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 31161565, "answer_count": 1, "score": 1, "last_activity_date": 1435754423, "creation_date": 1435752743, "question_id": 31160969, "link": "https://stackoverflow.com/questions/31160969/strange-behavior-in-rspec-when-raising-exception", "title": "Strange behavior in rspec when raising exception", "body": "<p>I am trying to figure out why the following spec won't pass when the expect and actual results look the same</p>\n\n<pre><code>1) Moodle::Client raises moodle error if token is invalid\n     Failure/Error: expect {\n       expected Moodle::MoodleError with {\"exception\"=&gt;\"moodle_exception\", \"errorcode\"=&gt;\"invalidtoken\", \"message\"=&gt;\"Invalid token - token not found\"}, got #&lt;Moodle::MoodleError: {\"exception\"=&gt;\"moodle_exception\", \"errorcode\"=&gt;\"invalidtoken\", \"message\"=&gt;\"Invalid token - token not found\"}&gt; with backtrace:\n         # ./lib/moodle/client.rb:27:in `resolve_request'\n         # ./lib/moodle/client.rb:11:in `method_missing'\n         # ./spec/moodle/client_spec.rb:48:in `block (4 levels) in &lt;module:Moodle&gt;'\n         # ./spec/moodle/client_spec.rb:47:in `block (3 levels) in &lt;module:Moodle&gt;'\n         # /Users/ryanme/.rvm/gems/ruby-2.2.2@phoenix/gems/vcr-2.9.3/lib/vcr/util/variable_args_block_caller.rb:9:in `call'\n         # /Users/ryanme/.rvm/gems/ruby-2.2.2@phoenix/gems/vcr-2.9.3/lib/vcr/util/variable_args_block_caller.rb:9:in `call_block'\n         # /Users/ryanme/.rvm/gems/ruby-2.2.2@phoenix/gems/vcr-2.9.3/lib/vcr.rb:182:in `use_cassette'\n         # ./spec/moodle/client_spec.rb:46:in `block (2 levels) in &lt;module:Moodle&gt;'\n     # ./spec/moodle/client_spec.rb:47:in `block (3 levels) in &lt;module:Moodle&gt;'\n     # /Users/ryanme/.rvm/gems/ruby-2.2.2@phoenix/gems/vcr-2.9.3/lib/vcr/util/variable_args_block_caller.rb:9:in `call'\n     # /Users/ryanme/.rvm/gems/ruby-2.2.2@phoenix/gems/vcr-2.9.3/lib/vcr/util/variable_args_block_caller.rb:9:in `call_block'\n     # /Users/ryanme/.rvm/gems/ruby-2.2.2@phoenix/gems/vcr-2.9.3/lib/vcr.rb:182:in `use_cassette'\n     # ./spec/moodle/client_spec.rb:46:in `block (2 levels) in &lt;module:Moodle&gt;'\n</code></pre>\n\n<p>The code is still work in progress:</p>\n\n<pre><code>require 'typhoeus'\n\nmodule Moodle\n  class Client\n    attr_reader :web_service_name, :filter_params\n\n    def method_missing message, *args, &amp;block\n      if supports_web_service? message\n        @web_service_name = message\n        @filter_params = args.first\n        resolve_request\n      else\n        super\n      end\n    end\n\n    def supports_web_service? name\n      true # change to look at configuration for web services\n    end\n\n    def resolve_request\n      response = request.run\n\n      json_body = JSON.parse(response.body)\n\n      if json_body['exception']\n        raise MoodleError, json_body\n      else\n        json_body\n      end\n    end\n\n    def request\n      Typhoeus::Request.new(Moodle.configuration.api_url,\n                            method: :post,\n                            params: request_params,\n                            headers: { 'Accept' =&gt; \"json\" })\n    end\n\n    def request_params\n      filter_params.merge!({ moodlewsrestformat: Moodle.configuration.format,\n                             wsfunction: web_service_name,\n                             wstoken: Moodle.configuration.token })\n    end\n  end\nend\n</code></pre>\n\n<p>The spec spec is below:</p>\n\n<pre><code>it 'raises moodle error if token is invalid' do\n      Moodle.configure do|c|\n        c.host = 'http://dev.vle.getsmarter.co.za'\n        c.token = 'invalidtoken'\n      end\n\n      expected_response = {\"exception\"=&gt;\"moodle_exception\",\"errorcode\"=&gt;\"invalidtoken\",\"message\"=&gt;\"Invalid token - token not found\"}\n      VCR.use_cassette(\"valid_service_with_invalid_token\") do\n        expect {\n          Moodle::Client.new.core_user_get_users(params)\n        }.to raise_error(Moodle::MoodleError, expected_response)\n      end\n    end\n</code></pre>\n\n<p>My question is why is it breaking? Does it have something to do with the backtrace? Also any ideas on how to fix it would be great.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 1, "creation_date": 1435752274, "post_id": 31160747, "comment_id": 50330105, "body": "Are you sure the exception is a timeout exception and not something else?"}, {"owner": {"reputation": 6476, "user_id": 345959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bb590d8ddd242dfaf688b8ffecdf76?s=128&d=identicon&r=PG", "display_name": "Smar", "link": "https://stackoverflow.com/users/345959/smar"}, "edited": false, "score": 0, "creation_date": 1435752388, "post_id": 31160747, "comment_id": 50330181, "body": "You should look at what exception it gets by <code>puts e</code> before <code>ap(..)</code>"}, {"owner": {"reputation": 6476, "user_id": 345959, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72bb590d8ddd242dfaf688b8ffecdf76?s=128&d=identicon&r=PG", "display_name": "Smar", "link": "https://stackoverflow.com/users/345959/smar"}, "edited": false, "score": 0, "creation_date": 1435752464, "post_id": 31160747, "comment_id": 50330232, "body": "Also if you want to catch only the timeout exception, use <code>rescue Timeout::Error =&gt; e</code> instead."}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 1, "last_activity_date": 1435753014, "last_edit_date": 1495540278, "creation_date": 1435753014, "answer_id": 31161067, "question_id": 31160747, "link": "https://stackoverflow.com/questions/31160747/timeout-wont-reset-after-the-first-time-out-happened/31161067#31161067", "title": "Timeout won&#39;t reset after the first time out happened", "body": "<p><code>rescue Exception</code> will rescue <em>any</em> exception (it's a <a href=\"https://stackoverflow.com/q/10048173/477037\">bad idea</a> to do so).</p>\n\n<p>Be specific in order to rescue the exception you're interested in:</p>\n\n<pre><code>require 'timeout'\n\ndef action_with_timeout(sec, &amp;block)\n  Timeout::timeout(sec, &amp;block)\nrescue Timeout::Error\n  # ...\nend\n</code></pre>\n\n<p>Other exceptions will not be rescued. This should reveal your actual problem.</p>\n"}], "owner": {"reputation": 12868, "user_id": 551273, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/f59206a9e3de691c70c179c7507d2bd4?s=128&d=identicon&r=PG&f=1", "display_name": "newBike", "link": "https://stackoverflow.com/users/551273/newbike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 31161067, "answer_count": 1, "score": -1, "last_activity_date": 1435753014, "creation_date": 1435752164, "last_edit_date": 1435752655, "question_id": 31160747, "link": "https://stackoverflow.com/questions/31160747/timeout-wont-reset-after-the-first-time-out-happened", "title": "Timeout won&#39;t reset after the first time out happened", "body": "<p>I expected that timeout will happen every 30 seconds in the following code:</p>\n\n<pre><code>def action_with_timeout(threshould, &amp;block)\n  begin\n    Timeout::timeout(threshould) {block.call}\n  rescue Exception =&gt; e\n    ap(\"Timeout #{threshould}, stop loading pag, #{Time.now}\")\n    stop_loading_page\n  end\nend\nwhile true\n  action_with_timeout(30) {\n    ap(\"to INDEX\")\n    browse_to(CONFIG[\"ROOT_URL\"])\n  }\nend    \n</code></pre>\n\n<p>However, it only works for the first time. The remaining will timeout in a short time. The output is:</p>\n\n<pre><code>\"Timeout 30, stop loading pag, 2015-07-01 19:59:10 +0800\"\n\"Timeout 30, stop loading pag, 2015-07-01 19:59:13 +0800\"\n\"Timeout 30, stop loading pag, 2015-07-01 19:59:16 +0800\"\n\"Timeout 30, stop loading pag, 2015-07-01 19:59:19 +0800\"\n</code></pre>\n\n<p>How can I fix it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "charts", "highcharts"], "owner": {"reputation": 31, "user_id": 3245551, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/39fa5cf9d1c1233096fc3b1bcc4c9a68?s=128&d=identicon&r=PG&f=1", "display_name": "MurakamiKioto", "link": "https://stackoverflow.com/users/3245551/murakamikioto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 270, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1435752265, "creation_date": 1435751837, "last_edit_date": 1435752265, "question_id": 31160623, "link": "https://stackoverflow.com/questions/31160623/lazy-high-charts-gem-and-geocharts", "title": "lazy high charts gem and geocharts", "body": "<p>I'm using lazy high charts gem for generate charts of my data in ruby on rails. It's ok when I try with pie charts, generate my data in a controller, and create helper for call my pie_chart with this: </p>\n\n<pre><code>def pie_chart(data, options={})\n  chart = LazyHighCharts::HighChart.new('pie') do |f|\n    f.chart({:defaultSeriesType=&gt;\"pie\", :backgroundColor=&gt;\"rgba(255, 255, 255, 0)\"} )\n    series = {\n             :type=&gt; 'pie',\n             :name=&gt; options[:name],\n             :data=&gt; data\n    }\n    f.series(series)\n    f.options[:title][:text] = options[:title]\n    f.legend(:layout=&gt; 'horizontal')\n    f.colors([\"#f7941d\", \"#8dc73f\", \"#11a99d\", \"#6ac7ff\",\"#ec217b\", \"#f03f37\"])\n\n    f.plot_options(:pie=&gt;{\n      :allowPointSelect=&gt;true,\n      :cursor=&gt;\"pointer\" ,\n      :dataLabels=&gt;{\n        :enabled=&gt;false,\n        :color=&gt;\"black\",\n        :style=&gt;{\n          :font=&gt;\"13px Trebuchet MS, Verdana, sans-serif\"\n        }\n      },\n      :showInLegend =&gt; true,\n      :point =&gt; {\n        :events =&gt; {\n      }}\n    })\n  end\n\n  html = high_chart(options[:id], chart) do\n    if options[:show_absolutes].present?\n      raw \"\n        options.legend.labelFormatter = function() {return '&lt;b&gt; '+ this.name +'&lt;/b&gt;: '+ this.y + ' (' + this.percentage.toFixed(2) +' %)';};\n        options.tooltip.formatter = function() {return '&lt;b&gt; '+ this.point.name +'&lt;/b&gt;: '+ this.y + ' (' + this.percentage.toFixed(2) +' %)';};\n      \"\n    else\n     raw \"\n        options.legend.labelFormatter = function() {return '&lt;b&gt; '+ this.name +'&lt;/b&gt;: '+ this.percentage.toFixed(2) +' %';};\n        options.tooltip.formatter = function() {return '&lt;b&gt; '+ this.point.name +'&lt;/b&gt;: '+ this.percentage.toFixed(2) +' %';};\n      \"\n    end\n  end\n</code></pre>\n\n<p>end</p>\n\n<p>But I need create a geochart with another data generate in my controller. I try with: </p>\n\n<pre><code>def maps_chart(data, options={})\n  chart = LazyHighCharts::HighChart.new('map') do |f|\n    f.chart({:defaultSeriesType=&gt;\"map\"})\n    series = {\n             :type=&gt; 'map',\n             :name=&gt; options[:name],\n             :data=&gt; data,\n             :mapData =&gt; geojson\n    }\n\n  end\n\n  high_stock(options[:id], chart) do\n  end end\n</code></pre>\n\n<p>But nothing happens when call my helper in my view. What is wrong? lazy high charts can create geocharts? because in his wiki not found anything else for this. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms"], "answers": [{"comments": [{"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1451078908, "post_id": 31160145, "comment_id": 56675126, "body": "Jon, how can you pass the correct URL with js to the rails form_for?"}], "tags": [], "owner": {"reputation": 11227, "user_id": 1087866, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/52hpI.jpg?s=128&g=1", "display_name": "Jon Cairns", "link": "https://stackoverflow.com/users/1087866/jon-cairns"}, "is_accepted": false, "score": 0, "last_activity_date": 1435750477, "creation_date": 1435750477, "answer_id": 31160145, "question_id": 31160056, "link": "https://stackoverflow.com/questions/31160056/rails-pass-the-id-to-the-form/31160145#31160145", "title": "Rails pass the `id` to the form", "body": "<p>What you want to do isn't possible with server-side code alone: you'll need to use javascript to take the user's input and build the correct URL. Forms with the GET method append query string parameters, which is what you're seeing, and there's no way to change that without javascript.</p>\n"}, {"tags": [], "owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "is_accepted": true, "score": 1, "last_activity_date": 1435750750, "creation_date": 1435750750, "answer_id": 31160237, "question_id": 31160056, "link": "https://stackoverflow.com/questions/31160056/rails-pass-the-id-to-the-form/31160237#31160237", "title": "Rails pass the `id` to the form", "body": "<p>You can redirect in index:</p>\n\n<pre><code>def index\n  if params[:id]\n    redirect_to item_path(params[:id]) and return\n  end\n  ...\nend\n</code></pre>\n"}], "owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 569, "favorite_count": 0, "accepted_answer_id": 31160237, "answer_count": 2, "score": 0, "last_activity_date": 1435750750, "creation_date": 1435750204, "question_id": 31160056, "link": "https://stackoverflow.com/questions/31160056/rails-pass-the-id-to-the-form", "title": "Rails pass the `id` to the form", "body": "<p>I have a model <code>Item</code> and standard controller for reviewing items, with <code>index</code> &amp; <code>show</code> actions. I want to fill <code>id</code> in the input field, and get to the <code>show</code> route with the id I passed to.</p>\n\n<p>Here is the code:</p>\n\n<pre><code>= form_tag items_path, method: :get, enforce_utf8: false do\n  = text_field_tag :id, nil, class: 'item_search_field form-control'\n  = submit_tag t('.submit'), name: nil, class: 'btn btn-success'\n</code></pre>\n\n<p>But after I pass <code>id</code>, saying <code>55</code>, I go to the <code>items#index</code> with id as param:</p>\n\n<p><a href=\"http://localhost:3000/items/?id=55\" rel=\"nofollow\">http://localhost:3000/items/?id=55</a></p>\n\n<p>What should I do to be at <code>localhost:3000/items/55</code> when I fill the code to <code>id</code> field?</p>\n"}, {"tags": ["php", "ruby", "marshalling"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1435751561, "post_id": 31159835, "comment_id": 50329577, "body": "How does the marshalled data look like? Is it a common format like YAML or JSON?"}, {"owner": {"reputation": 813, "user_id": 1961154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af6b9daa60a6856519080acddfd5f254?s=128&d=identicon&r=PG", "display_name": "intale", "link": "https://stackoverflow.com/users/1961154/intale"}, "edited": false, "score": 0, "creation_date": 1435751812, "post_id": 31159835, "comment_id": 50329759, "body": "And how are you going to load, serialized by ruby, object with php?"}, {"owner": {"reputation": 39, "user_id": 696933, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/dbb674a185c2db41f6349da3283ea02d?s=128&d=identicon&r=PG", "display_name": "Lazyone", "link": "https://stackoverflow.com/users/696933/lazyone"}, "edited": false, "score": 0, "creation_date": 1435752152, "post_id": 31159835, "comment_id": 50329997, "body": "It is a string. Data looks like &quot;I&quot;Denmark:ET&quot; I copied it form Redis Desktop manager."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1435753573, "post_id": 31159835, "comment_id": 50331035, "body": "You&#39;ll not get far unless you know the format of the data, is it, in Ruby <code>Marshal.dump(&quot;thing&quot;)</code>?"}, {"owner": {"reputation": 39, "user_id": 696933, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/dbb674a185c2db41f6349da3283ea02d?s=128&d=identicon&r=PG", "display_name": "Lazyone", "link": "https://stackoverflow.com/users/696933/lazyone"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1435754012, "post_id": 31159835, "comment_id": 50331348, "body": "@Kris, yes they are using ruby&#39;s Marshal."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1435756976, "post_id": 31159835, "comment_id": 50333624, "body": "I&#39;d strongly suggest writing Ruby to <code>Marshal.load</code> the data in to Ruby objects and then dumping it back as JSON or YAML."}], "answers": [{"comments": [{"owner": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 1, "creation_date": 1435755228, "post_id": 31161518, "comment_id": 50332219, "body": "<a href=\"https://github.com/ruby/ruby/blob/trunk/doc/marshal.rdoc\" rel=\"nofollow noreferrer\">It&#39;s documented</a>. Did you just not know or don&#39;t you consider it well documented?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 4127, "user_id": 4231385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d89a541a4609cafea3957e4cdfcca50f?s=128&d=identicon&r=PG&f=1", "display_name": "cremno", "link": "https://stackoverflow.com/users/4231385/cremno"}, "edited": false, "score": 0, "creation_date": 1435764357, "post_id": 31161518, "comment_id": 50339244, "body": "Indeed, I did not know that! Note that that document is just over two years old, whereas Ruby itself is well over 22 years old, so for over 20 years, the Marshal format indeed <i>was</i> undocumented (and for example JRuby, XRuby, Ruby.NET, IronRuby, Rubinius, SmallRuby, Topaz, Cardinal, BlueRuby, IoRuby, Red Sun, RubyGoLightly, tinyrb, \u2026 all had to reverse-engineer MRI/YARV over and over and over and over again). Anyway, my bad, it&#39;s been over two years since I last checked, and I should have checked again to be sure."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 1, "last_activity_date": 1435764476, "last_edit_date": 1495539837, "creation_date": 1435754197, "answer_id": 31161518, "question_id": 31159835, "link": "https://stackoverflow.com/questions/31159835/how-to-unmarshal-ruby-object-with-php/31161518#31161518", "title": "How to unmarshal Ruby object with PHP", "body": "<p>As far as I know, there is no deserializer for Ruby's internal Marshal format for PHP. You can write one, of course, <a href=\"https://github.com/ruby/ruby/blob/trunk/doc/marshal.rdoc\" rel=\"nofollow noreferrer\">here's the documentation</a>.</p>\n\n<p>Also, it simply might not be possible to represent the Ruby object as a PHP object, if the Ruby object uses features that PHP lacks. Either way, you will probably have to re-implement significant portions of Ruby's object model in PHP, in order to deserialize a Ruby Marshal string. For example, what if, after decoding the string, you end up with an object which is an instance of <code>UserFoo</code> with 3 instance variables referencing instances of class <code>MyBar</code>?</p>\n\n<p>Anyway, here is a series of blog posts to get you started:</p>\n\n<ol>\n<li><a href=\"http://jakegoulding.com/blog/2013/01/15/a-little-dip-into-rubys-marshal-format/\" rel=\"nofollow noreferrer\">A little dip into Ruby's Marshal format</a></li>\n<li><a href=\"http://jakegoulding.com/blog/2013/01/16/another-dip-into-rubys-marshal-format/\" rel=\"nofollow noreferrer\">Another dip into Ruby's Marshal format</a></li>\n<li><a href=\"http://jakegoulding.com/blog/2013/01/20/a-final-dip-into-rubys-marshal-format/\" rel=\"nofollow noreferrer\">A final dip into Ruby's Marshal format</a></li>\n</ol>\n\n<p>One thing you <em>could</em> try, is to run your PHP code on the JVM using one of the existing JVM implementations of PHP (e.g. Quercus or P8) and <a href=\"https://stackoverflow.com/a/1765060/2988\">embed an instance of JRuby</a> in your app to deserialize the string, provided the string can be deserialized with JRuby. (Similarly, you could do the same with IronPHP and IronRuby on the CLI.)</p>\n"}, {"tags": [], "owner": {"reputation": 355, "user_id": 1155760, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/7e35702fd761270c363ea2e34303f7af?s=128&d=identicon&r=PG", "display_name": "CSharpRU", "link": "https://stackoverflow.com/users/1155760/csharpru"}, "is_accepted": false, "score": 0, "last_activity_date": 1435765464, "creation_date": 1435765464, "answer_id": 31165962, "question_id": 31159835, "link": "https://stackoverflow.com/questions/31159835/how-to-unmarshal-ruby-object-with-php/31165962#31165962", "title": "How to unmarshal Ruby object with PHP", "body": "<p>You need to use another format (that easier because you don't need to write your own unmarshal library) instead of ruby internal marshalling, something like JSON, XML etc.</p>\n\n<p>Or you can simple execute ruby script from php which unmarshal ruby object.</p>\n"}], "owner": {"reputation": 39, "user_id": 696933, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/dbb674a185c2db41f6349da3283ea02d?s=128&d=identicon&r=PG", "display_name": "Lazyone", "link": "https://stackoverflow.com/users/696933/lazyone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 0, "accepted_answer_id": 31161518, "answer_count": 2, "score": 0, "last_activity_date": 1435765464, "creation_date": 1435749601, "question_id": 31159835, "link": "https://stackoverflow.com/questions/31159835/how-to-unmarshal-ruby-object-with-php", "title": "How to unmarshal Ruby object with PHP", "body": "<p>Marshaled data is in redis server and I need to access it with PHP. No other options.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1435748823, "post_id": 31159494, "comment_id": 50327662, "body": "<code>if @foo.is_a?(Foo)</code>"}, {"owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1435748892, "post_id": 31159494, "comment_id": 50327709, "body": "That&#39;s my problem, what should I replace <code>Foo</code> with?"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1435748929, "post_id": 31159494, "comment_id": 50327731, "body": "The class in question."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 2, "creation_date": 1435748956, "post_id": 31159494, "comment_id": 50327752, "body": "I think you need to add some more information to your question regarding what you&#39;re actually trying to do with the &quot;dynamic query&quot;"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1435749063, "post_id": 31159494, "comment_id": 50327815, "body": "You could also try <code>if @foo.is_a?(Array)</code> - the CollectionProxy class extends Array so this should return true for a collection.  This whole concept feels quite fragile though."}, {"owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1435749291, "post_id": 31159494, "comment_id": 50327973, "body": "I&#39;ve edited my answer with more details. I&#39;ve tried with <code>Array</code> and it returns <code>false</code> for a result of a <code>has_many</code>."}, {"owner": {"reputation": 3438, "user_id": 751716, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/E36nI.jpg?s=128&g=1", "display_name": "Rubyrider", "link": "https://stackoverflow.com/users/751716/rubyrider"}, "edited": false, "score": 0, "creation_date": 1435749443, "post_id": 31159494, "comment_id": 50328081, "body": "What is your exact requirement(s)? You want to load all user with profile seperately?"}, {"owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "reply_to_user": {"reputation": 3438, "user_id": 751716, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/E36nI.jpg?s=128&g=1", "display_name": "Rubyrider", "link": "https://stackoverflow.com/users/751716/rubyrider"}, "edited": false, "score": 0, "creation_date": 1435749496, "post_id": 31159494, "comment_id": 50328114, "body": "@Rubyrider I want to check whether the result came from a <code>has_one</code> or from a <code>has_many</code> relation."}, {"owner": {"reputation": 3438, "user_id": 751716, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/E36nI.jpg?s=128&g=1", "display_name": "Rubyrider", "link": "https://stackoverflow.com/users/751716/rubyrider"}, "edited": false, "score": 0, "creation_date": 1435749605, "post_id": 31159494, "comment_id": 50328191, "body": "You wanted to get caller of the association. Let me check for best solution."}, {"owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "edited": false, "score": 0, "creation_date": 1435749658, "post_id": 31159494, "comment_id": 50328224, "body": "Not the caller, just from what type of association did the result came. Check my example, cannot explain better :)"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1435749739, "post_id": 31159494, "comment_id": 50328275, "body": "When you get the results back, and it&#39;s a collection, what do you get for <code>@foo.class.name</code>?"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1435749808, "post_id": 31159494, "comment_id": 50328329, "body": "if those are your only two options then i would write an if/else and deal with each one seperately, in a more deliberate way, rather than just <code>send</code> it to the object, then try to work out afterwards what just happened."}, {"owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1435750175, "post_id": 31159494, "comment_id": 50328605, "body": "@MaxWilliams So you say the before <code>send</code>ing, I should check whether the <code>attr</code> I am about to call on the object describes either of the two relations?"}, {"owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1435750215, "post_id": 31159494, "comment_id": 50328640, "body": "@MaxWilliams I get <code>Name::ActiveRecord_Associations_CollectionProxy</code> back."}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 1, "creation_date": 1435750580, "post_id": 31159494, "comment_id": 50328873, "body": "So you could do <code>if @foo.class.name =~ &#47;CollectionProxy&#47;</code>.  I still think this is a pretty horrible way of doing business though."}], "answers": [{"comments": [{"owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "edited": false, "score": 0, "creation_date": 1435749043, "post_id": 31159550, "comment_id": 50327799, "body": "Seems that neither a result of a <code>has_one</code>, nor a result of a <code>has_many</code> responds to <code>:owner</code>. Can you give a short working example?"}, {"owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "edited": false, "score": 0, "creation_date": 1435749543, "post_id": 31159550, "comment_id": 50328148, "body": "Oh, I understand. But unfortunately, I cannot rely on actual model names since the whole thing must be generic, without knowing about any specific model."}], "tags": [], "owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "is_accepted": false, "score": 0, "last_activity_date": 1435749255, "last_edit_date": 1435749255, "creation_date": 1435748792, "answer_id": 31159550, "question_id": 31159494, "link": "https://stackoverflow.com/questions/31159494/how-to-check-whether-an-object-is-a-result-of-has-one-or-has-many/31159550#31159550", "title": "How to check whether an object is a result of has_one or has_many?", "body": "<p>Consider using <code>try</code> like this:</p>\n\n<pre><code>post.try(:owner)\n</code></pre>\n\n<p>this way a <code>has_one</code> relation will return the <code>owner</code> and <code>has_many</code> won't.</p>\n\n<p>It some situations it may be inconclusive, but should suffice for most of them.</p>\n\n<p><code>owner</code> is just an example:</p>\n\n<pre><code>class Post\nhas_one :owner\n\nclass Owner\nbelongs_to :post\n\npost = Post.create ...\npost.try(:owner)\n</code></pre>\n\n<p>returns <code>owner</code> if class <code>Post</code> <code>has_one :owner</code>, and <code>nil</code> if class <code>Post</code> <code>has_many :owners</code></p>\n\n<p><strong>For your example:</strong> <code>user.try(:profile)</code></p>\n"}, {"tags": [], "owner": {"reputation": 301, "user_id": 309093, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4752081d6d8bed95fecbdb9a5cc1514d?s=128&d=identicon&r=PG", "display_name": "Brenes", "link": "https://stackoverflow.com/users/309093/brenes"}, "is_accepted": false, "score": 2, "last_activity_date": 1435750712, "creation_date": 1435750712, "answer_id": 31160223, "question_id": 31159494, "link": "https://stackoverflow.com/questions/31159494/how-to-check-whether-an-object-is-a-result-of-has-one-or-has-many/31160223#31160223", "title": "How to check whether an object is a result of has_one or has_many?", "body": "<p>You can actually check the type of the result. You just have to check if it's an ActiveRecord::Base or an ActiveRecord::Associations::CollectionProxy.</p>\n\n<p>Following your example:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_one :profile\n  has_many :names\n\nuser = User.new\nattr = 'profile'\nuser.send(attr).is_a? ActiveRecord::Base # true\nuser.send(attr).is_a? ActiveRecord::Associations::CollectionProxy # false\n\nattr = 'names'\nuser.send(attr).is_a? ActiveRecord::Base # false\nuser.send(attr).is_a? ActiveRecord::Associations::CollectionProxy # true\n</code></pre>\n\n<p>This was tested on a Rails 4.1.4 but the classes are the same since Rails 3, apparently.</p>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 4, "last_activity_date": 1611944645, "last_edit_date": 1611944645, "creation_date": 1435751399, "answer_id": 31160462, "question_id": 31159494, "link": "https://stackoverflow.com/questions/31159494/how-to-check-whether-an-object-is-a-result-of-has-one-or-has-many/31160462#31160462", "title": "How to check whether an object is a result of has_one or has_many?", "body": "<p>You can use Active Record's <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Reflection/ClassMethods.html\" rel=\"nofollow noreferrer\">reflection</a>:</p>\n<pre><code>User.reflect_on_association(:profile)\n#=&gt; #&lt;ActiveRecord::Reflection::HasOneReflection:0x007fd2b76705c0 ...&gt;\n\nUser.reflect_on_association(:names)\n#=&gt; #&lt;ActiveRecord::Reflection::HasManyReflection:0x007fd2b767de78 ...&gt;\n</code></pre>\n<p>Within a <code>case</code> statement:</p>\n<pre><code>klass = User\nattr = :profile\n\ncase klass.reflect_on_association(attr)\nwhen ActiveRecord::Reflection::HasOneReflection\n  # ...\nwhen ActiveRecord::Reflection::HasManyReflection\n  # ...\nend\n\n### OR by macro\n\ncase klass.reflect_on_association(attr).macro\nwhen :belongs_to\n  # ...\nwhen :has_many\n  # ...\nwhen :has_one\n  # ...\nend\n</code></pre>\n<p>This works based on the association declaration in your model (<code>user.rb</code>), i.e. without accessing the database.</p>\n"}], "owner": {"reputation": 14224, "user_id": 433940, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/6b9f0021f63ca2fb96c0e50f422e0489?s=128&d=identicon&r=PG", "display_name": "linkyndy", "link": "https://stackoverflow.com/users/433940/linkyndy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 610, "favorite_count": 0, "accepted_answer_id": 31160462, "answer_count": 3, "score": 2, "last_activity_date": 1611944645, "creation_date": 1435748635, "last_edit_date": 1435749243, "question_id": 31159494, "link": "https://stackoverflow.com/questions/31159494/how-to-check-whether-an-object-is-a-result-of-has-one-or-has-many", "title": "How to check whether an object is a result of has_one or has_many?", "body": "<p>I build a query dynamically, based on either a <code>has_one</code> or <code>has_many</code> relation. So, I can end up with either an object, or CollectionProxy. How can I test, based on this result, whether the query used the <code>has_one</code> or the <code>has_many</code> relation?</p>\n\n<p>I thought of checking the type, but the CollectionProxy's type subclasses the related model's type.</p>\n\n<p>This dynamic query involves calling an attribute on an object, which can be either a <code>has_one</code> or a <code>has_many</code> relation. Something like:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_one :profile\n  has_many :names\n\nuser = User.new\nattr = 'profile' # or 'names'\nuser.send(attr) # I want to check whether this is a result of which of the two relations\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "friendly-id"], "comments": [{"owner": {"reputation": 2448, "user_id": 2621389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/uiNbQ.jpg?s=128&g=1", "display_name": "Bharat soni", "link": "https://stackoverflow.com/users/2621389/bharat-soni"}, "edited": false, "score": 0, "creation_date": 1435748347, "post_id": 31159311, "comment_id": 50327340, "body": "Do you have an attributes called slug into your corresponding model which is currently using the friendly-id extension then please try the query in the rails console, may help you to get solved the issues."}, {"owner": {"reputation": 1371, "user_id": 4587875, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kMutL.jpg?s=128&g=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4587875/sam"}, "reply_to_user": {"reputation": 2448, "user_id": 2621389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/uiNbQ.jpg?s=128&g=1", "display_name": "Bharat soni", "link": "https://stackoverflow.com/users/2621389/bharat-soni"}, "edited": false, "score": 0, "creation_date": 1435748662, "post_id": 31159311, "comment_id": 50327544, "body": "Thanks for the fast response. I did check in the Rails console and I can find the model with it&#39;s slug:  &gt; Budget.where(:slug =&gt; &quot;drinks&quot;)    Budget Load (4.0ms)  SELECT &quot;budgets&quot;.* FROM &quot;budgets&quot;  WHERE &quot;budgets&quot;.&quot;slug&quot; = &#39;drinks&#39;  =&gt; #&lt;ActiveRecord::Relation [#&lt;Budget id: 17, title: &quot;Drinks&quot;, amount: #&lt;BigDecimal:7f904bb14eb8,&#39;0.3478E4&#39;,9(27)&gt;, refresh_rate: nil, created_at: &quot;2015-06-30 12:22:34&quot;, updated_at: &quot;2015-06-30 12:22:34&quot;, user_id: 1, slug: &quot;drinks&quot;&gt;]&gt;"}, {"owner": {"reputation": 2448, "user_id": 2621389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/uiNbQ.jpg?s=128&g=1", "display_name": "Bharat soni", "link": "https://stackoverflow.com/users/2621389/bharat-soni"}, "edited": false, "score": 0, "creation_date": 1435748764, "post_id": 31159311, "comment_id": 50327616, "body": "parameters should comes in slug not in id."}, {"owner": {"reputation": 2448, "user_id": 2621389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/uiNbQ.jpg?s=128&g=1", "display_name": "Bharat soni", "link": "https://stackoverflow.com/users/2621389/bharat-soni"}, "edited": false, "score": 0, "creation_date": 1435748791, "post_id": 31159311, "comment_id": 50327637, "body": "Try to update your routes brother."}, {"owner": {"reputation": 1371, "user_id": 4587875, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kMutL.jpg?s=128&g=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4587875/sam"}, "reply_to_user": {"reputation": 2448, "user_id": 2621389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/uiNbQ.jpg?s=128&g=1", "display_name": "Bharat soni", "link": "https://stackoverflow.com/users/2621389/bharat-soni"}, "edited": false, "score": 0, "creation_date": 1435749218, "post_id": 31159311, "comment_id": 50327912, "body": "Sorry, what exactly do you mean? Which route should I update?"}, {"owner": {"reputation": 2448, "user_id": 2621389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/uiNbQ.jpg?s=128&g=1", "display_name": "Bharat soni", "link": "https://stackoverflow.com/users/2621389/bharat-soni"}, "edited": false, "score": 0, "creation_date": 1435754605, "post_id": 31159311, "comment_id": 50331778, "body": "Share your routes file here."}], "answers": [{"comments": [{"owner": {"reputation": 1371, "user_id": 4587875, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kMutL.jpg?s=128&g=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4587875/sam"}, "edited": false, "score": 0, "creation_date": 1435778496, "post_id": 31165731, "comment_id": 50347587, "body": "That looks much nicer and simpler than my silly workaround. Thanks a lot!"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 1371, "user_id": 4587875, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kMutL.jpg?s=128&g=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4587875/sam"}, "edited": false, "score": 0, "creation_date": 1435783389, "post_id": 31165731, "comment_id": 50350298, "body": "I just saw that you were creating the form from the budget#show method. Removed the #new action from my answer."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 0, "last_activity_date": 1435783323, "last_edit_date": 1435783323, "creation_date": 1435764795, "answer_id": 31165731, "question_id": 31159311, "link": "https://stackoverflow.com/questions/31159311/friendlyid-does-not-find-entry-with-matching-slug/31165731#31165731", "title": "FriendlyID does not find entry with matching slug", "body": "<p>Don't use FriendlyID for form parameters - just use the straight ID. That lets rails automatically add the association and results in a much more effective SQL query.</p>\n\n<pre><code>&lt;%= form_for(@budget.money_transactions.build, :html =&gt; { :id =&gt; 'money_transaction-form' }) do |f| %&gt;\n  &lt;%= f.hidden_field :budget_id, value: @budget.id %&gt;\n  &lt;%= f.number_field :amount, id: \"transaction-input\", placeholder: \"#{@budget.title} \", step: 0.01, :autocomplete =&gt; :off %&gt;\n  &lt;%= f.text_field :title, class: \"\", placeholder: \"purpose\", :autocomplete =&gt; :off %&gt;\n  &lt;%= f.button(type: 'submit', class: \"postfix\") do %&gt;\n    &lt;i class=\"fa fa-arrow-right\"&gt;&lt;/i&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>With that you can clean up your controller:</p>\n\n<pre><code>def create\n  @money_transaction = MoneyTransaction.new(money_transaction_params) do |mt|\n    mt.user = current_user\n    mt.date = Time.now.to_date\n    mt.is_positive = 0\n  end\n  respond_to do |format|\n    if @money_transaction.save\n      format.html { redirect_to @budget, notice: 'Transaction added.'}\n      format.json { render :show, status: :created, location: @budget }\n    else\n      format.html { redirect_to @budget, alert: 'Transaction was not valid.'}\n      format.json { render json: @money_transaction.errors, status: :unprocessable_entity }\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1371, "user_id": 4587875, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/kMutL.jpg?s=128&g=1", "display_name": "sam", "link": "https://stackoverflow.com/users/4587875/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 31165731, "answer_count": 1, "score": 0, "last_activity_date": 1435783323, "creation_date": 1435748140, "last_edit_date": 1435754814, "question_id": 31159311, "link": "https://stackoverflow.com/questions/31159311/friendlyid-does-not-find-entry-with-matching-slug", "title": "FriendlyID does not find entry with matching slug", "body": "<p>FriendlyID does not seem to find a database entry with the corresponding slug. </p>\n\n<p>Here is what the console shows: </p>\n\n<blockquote>\n  <p>Started GET \"/budgets/drinks\" for 127.0.0.1 at 2015-07-01 12:42:53\n  +0200 Processing by BudgetsController#show as HTML   Parameters: {\"id\"=>\"drinks\"}   Budget Load (0.2ms)  SELECT  \"budgets\".* FROM\n  \"budgets\"  WHERE \"budgets\".\"slug\" = 'drinks'  ORDER BY \"budgets\".\"id\"\n  ASC LIMIT 1   User Load (0.2ms)  SELECT  \"users\".* FROM \"users\"  WHERE\n  \"users\".\"id\" = 1  ORDER BY \"users\".\"id\" ASC LIMIT 1   MoneyTransaction\n  Load (0.5ms)  SELECT \"money_transactions\".* FROM \"money_transactions\" \n  WHERE \"money_transactions\".\"budget_id\" = ?  [[\"budget_id\", 17]]<br>\n  Budget Load (0.1ms)  SELECT \"budgets\".* FROM \"budgets\"  WHERE\n  \"budgets\".\"user_id\" = ?  [[\"user_id\", 1]]   Rendered\n  budgets/_budget_overview.html.erb (5.5ms)   Rendered\n  budgets/_form.html.erb (7.0ms)   Rendered budgets/show.html.erb within\n  layouts/application (26.3ms) Completed 200 OK in 224ms (Views: 213.5ms\n  | ActiveRecord: 1.0ms)</p>\n  \n  <p>Started POST \"/money_transactions\" for 127.0.0.1 at 2015-07-01\n  12:43:06 +0200 Processing by MoneyTransactionsController#create as\n  HTML   Parameters: {\"utf8\"=>\"\u2713\",\n  \"authenticity_token\"=>\"EPcX4adigoTRY6A1doxWpdMM9eXy/KyqY84zKp855bE=\",\n  \"money_transaction\"=>{\"budget_id\"=>\"drinks\", \"amount\"=>\"24\",\n  \"title\"=>\"coke\"}, \"button\"=>\"\"}   User Load (0.2ms)  SELECT  \"users\".*\n  FROM \"users\"  WHERE \"users\".\"id\" = 1  ORDER BY \"users\".\"id\" ASC LIMIT\n  1   Budget Load (0.2ms)  SELECT  \"budgets\".* FROM \"budgets\"  WHERE\n  \"budgets\".\"slug\" = 'drinks'  ORDER BY \"budgets\".\"id\" ASC LIMIT 1<br>\n  (0.1ms)  begin transaction   Budget Load (0.1ms)  SELECT  \"budgets\".*\n  FROM \"budgets\"  WHERE \"budgets\".\"id\" = ? LIMIT 1  [[\"id\", 0]]<br>\n  (0.1ms)  rollback transaction    (0.0ms)  begin transaction    (0.1ms)\n  rollback transaction Redirected to\n  <a href=\"http://localhost:3000/budgets/drinks\" rel=\"nofollow\">http://localhost:3000/budgets/drinks</a> Completed 302 Found in 14ms\n  (ActiveRecord: 0.7ms)</p>\n</blockquote>\n\n<p>This shows that the slug exists and is correctly related to the ID when I access the page. However after looking for for an entry with the slug \"drinks\" it only returns an ID of 0. </p>\n\n<blockquote>\n  <p>Budget Load (0.2ms)  SELECT  \"budgets\".* FROM \"budgets\"  WHERE\n  \"budgets\".\"slug\" = 'drinks'  ORDER BY \"budgets\".\"id\" ASC LIMIT 1<br>\n  (0.1ms)  begin transaction   Budget Load (0.1ms)  SELECT  \"budgets\".*\n  FROM \"budgets\"  WHERE \"budgets\".\"id\" = ? LIMIT 1  [[\"id\", 0]]</p>\n</blockquote>\n\n<p><strong>money_transaction_controller.rb</strong></p>\n\n<pre><code>def create\n    @budget = Budget.friendly.find(params[:money_transaction][:budget_id])\n    @money_transaction = MoneyTransaction.new(money_transaction_params)\n    @money_transaction.user = current_user\n    @money_transaction.date = Time.now.to_date\n    @money_transaction.is_positive = 0\n\n    @money_transaction.save\n\n    respond_to do |format|\n      if @money_transaction.save\n        format.html { redirect_to @budget, notice: 'Transaction added.'}\n        format.json { render :show, status: :created, location: @budget }\n      else\n        format.html { redirect_to @budget, alert: 'Transaction was not valid.'}\n        format.json { render json: @money_transaction.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n</code></pre>\n\n<p><strong>budget.rb</strong></p>\n\n<pre><code>class Budget &lt; ActiveRecord::Base\n  belongs_to :user\n  has_many :money_transactions\n\n  validates :amount, presence: true\n  validates :title, presence: true\n  validates :user, presence: true\n  validates :amount, numericality: true\n\n  extend FriendlyId\n  friendly_id :title, use: :slugged\n\n  def should_generate_new_friendly_id?\n    new_record?\n  end\nend\n</code></pre>\n\n<p><strong>budgets/show.html.erb</strong></p>\n\n<pre><code>&lt;%= form_for(@budget.money_transactions.build, :html =&gt; { :id =&gt; 'money_transaction-form' }) do |f| %&gt;\n      &lt;%= f.hidden_field :budget_id, :value =&gt; params[:id] %&gt;\n\n      &lt;%= f.number_field :amount, id: \"transaction-input\", placeholder: \"#{@budget.title} \", step: 0.01, :autocomplete =&gt; :off %&gt;\n\n      &lt;%= f.text_field :title, class: \"\", placeholder: \"purpose\", :autocomplete =&gt; :off %&gt;\n\n      &lt;%= f.button(type: 'submit', class: \"postfix\") do %&gt;\n          &lt;i class=\"fa fa-arrow-right\"&gt;&lt;/i&gt;\n      &lt;% end %&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>  get '/pages', to: 'pages#index'\n\n  devise_for :users\n  resources :users\n\n  resources :budget\n  resources :money_transactions\n\n\n  root :to =&gt; 'budgets#index'\n</code></pre>\n\n<p>Let me know if you need any other files. I worked with friendlyID before and never had problems. I hope you can help me. </p>\n\n<p><strong>EDIT:</strong> \nSo I found a workaround. But I feel like there should be a simpler solution. I changed my hidden field to: </p>\n\n<pre><code>&lt;%= f.hidden_field :budget_id, :value =&gt; Budget.where(:slug =&gt; params[:id]).last.id %&gt;\n</code></pre>\n\n<p>Now it works. But if you have a better solution, please let me know. </p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "api", "exchangewebservices"], "comments": [{"owner": {"reputation": 2931, "user_id": 1523560, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a04c8a5d97cf0b1c298c85b20c21f113?s=128&d=identicon&r=PG", "display_name": "bmalets", "link": "https://stackoverflow.com/users/1523560/bmalets"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1435748732, "post_id": 31159308, "comment_id": 50327594, "body": "@spickermann Exchange Web Services API"}, {"owner": {"reputation": 2931, "user_id": 1523560, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a04c8a5d97cf0b1c298c85b20c21f113?s=128&d=identicon&r=PG", "display_name": "bmalets", "link": "https://stackoverflow.com/users/1523560/bmalets"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1435748823, "post_id": 31159308, "comment_id": 50327661, "body": "@spickermann e.g. to check is user out of office I can use GetOofSettings API method. But does similar method for user&#39;s time zone exists?"}, {"owner": {"reputation": 2931, "user_id": 1523560, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a04c8a5d97cf0b1c298c85b20c21f113?s=128&d=identicon&r=PG", "display_name": "bmalets", "link": "https://stackoverflow.com/users/1523560/bmalets"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1435748927, "post_id": 31159308, "comment_id": 50327729, "body": "@spickermann please upvote my question back - it already has &quot;ews&quot; and &quot;exchangewebservices&quot; tag."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1435749027, "post_id": 31159308, "comment_id": 50327789, "body": "What gem do you used?"}, {"owner": {"reputation": 2931, "user_id": 1523560, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a04c8a5d97cf0b1c298c85b20c21f113?s=128&d=identicon&r=PG", "display_name": "bmalets", "link": "https://stackoverflow.com/users/1523560/bmalets"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1435749145, "post_id": 31159308, "comment_id": 50327860, "body": "@spickermann I use &quot;exchanger&quot; gem, but this gem supports only GetUsersAvailability API as I see... So, I&#39;m searching for a best way - how to get user&#39;s local time (I have city and exchange email)."}, {"owner": {"reputation": 2931, "user_id": 1523560, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a04c8a5d97cf0b1c298c85b20c21f113?s=128&d=identicon&r=PG", "display_name": "bmalets", "link": "https://stackoverflow.com/users/1523560/bmalets"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1435749317, "post_id": 31159308, "comment_id": 50327995, "body": "@spickermann I can use something like GoogleAPI to get city&#39;s coordinates and after get timezone by this coordinates... but it is too complicated I think.  That&#39;s why I&#39;m thinking about Exchange API (outlook should know about user&#39;s timezone)"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1435752063, "post_id": 31159308, "comment_id": 50329932, "body": "<a href=\"https://github.com/geokit/geokit\" rel=\"nofollow noreferrer\">Geokit</a> can do reverse geocoding  from an address and <a href=\"https://github.com/panthomakos/timezone\" rel=\"nofollow noreferrer\">Timezone</a> does timecode lookup from from coordinates."}, {"owner": {"reputation": 2931, "user_id": 1523560, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a04c8a5d97cf0b1c298c85b20c21f113?s=128&d=identicon&r=PG", "display_name": "bmalets", "link": "https://stackoverflow.com/users/1523560/bmalets"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1435752473, "post_id": 31159308, "comment_id": 50330238, "body": "@max thanks! But requests will cause a long dalays, and I needto make more than 100k requests per 24 hour (I&#39;m sure that geokit use Google/Yandex API which have limits for free requests)"}], "answers": [{"tags": [], "owner": {"reputation": 2931, "user_id": 1523560, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a04c8a5d97cf0b1c298c85b20c21f113?s=128&d=identicon&r=PG", "display_name": "bmalets", "link": "https://stackoverflow.com/users/1523560/bmalets"}, "is_accepted": true, "score": 0, "last_activity_date": 1436780303, "creation_date": 1436780303, "answer_id": 31379956, "question_id": 31159308, "link": "https://stackoverflow.com/questions/31159308/how-get-users-local-time-time-zones-by-their-phone-outlook-email-or-city/31379956#31379956", "title": "How get user&#39;s local time (time zones) by their phone, outlook email or city?", "body": "<p>My algorithm:</p>\n\n<ol>\n<li>Create additional model TimezoneDictionary e.g.</li>\n<li>Check for timezone in TimezoneDictionary model first.</li>\n<li><p>if timezone value is not found in TimezoneDictionary - make a request for timezone to Google API, and save it into TimezoneDictionary:</p>\n\n<p>a) request for coordinates via <a href=\"https://developers.google.com/maps/documentation/geolocation/\" rel=\"nofollow\">Google Geolocation API</a> </p>\n\n<p>b) request for timezone via <a href=\"https://developers.google.com/maps/documentation/timezone/\" rel=\"nofollow\">Google TimeZone API</a></p></li>\n</ol>\n\n<p>And when we have timezone value (\"Europe/Kyiv\" e.g.) we can get local time with ActiveSupport:</p>\n\n<pre><code>local_time = Time.now.in_time_zone \"Europe/Kyiv\"\n</code></pre>\n\n<p>P.S. I created a gem <a href=\"https://github.com/bmalets/which_time\" rel=\"nofollow\">which_time</a> for this issue (to get timzone/time by city name e.g.), so if you have the desire - use it :). I will be very thankful for pull request.</p>\n"}, {"tags": [], "owner": {"reputation": 136, "user_id": 2399793, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6be33080c429bd2fc924921f9a4f6b23?s=128&d=identicon&r=PG", "display_name": "Joonathan", "link": "https://stackoverflow.com/users/2399793/joonathan"}, "is_accepted": false, "score": 1, "last_activity_date": 1441626285, "creation_date": 1441626285, "answer_id": 32437903, "question_id": 31159308, "link": "https://stackoverflow.com/questions/31159308/how-get-users-local-time-time-zones-by-their-phone-outlook-email-or-city/32437903#32437903", "title": "How get user&#39;s local time (time zones) by their phone, outlook email or city?", "body": "<p>You could try to solve this via our new API</p>\n\n<pre><code>curl -s 'https://api.teleport.org/api/cities/?search=Tallinn,%20Estonia&amp;embed=city:search-results/city:item/city:timezone/tz:offsets-now' | jq '._embedded.\"city:search-results\"[0]._embedded.\"city:item\"._embedded.\"city:timezone\"'\n</code></pre>\n\n<p>This would run a search on <a href=\"http://developers.teleport.org/api/getting_started/\" rel=\"nofollow\">Teleport API</a> for city matching 'Tallinn, Estonia' and would fetch the timezone information for the result.</p>\n\n<p>I used <a href=\"https://stedolan.github.io/jq/\" rel=\"nofollow\">./jq</a> to parse it, the result would look like:</p>\n\n<pre><code>{\n  \"_embedded\": {\n    \"tz:offsets-now\": {\n      \"_links\": {\n        \"self\": {\n          \"href\": \"https://api.teleport.org/api/timezones/iana:Europe%2FTallinn/offsets/?date=2015-09-07T11%3A41%3A00Z\"\n        }\n      },\n      \"base_offset_min\": 120,\n      \"dst_offset_min\": 60,\n      \"end_time\": \"2015-10-25T01:00:00Z\",\n      \"short_name\": \"EEST\",\n      \"total_offset_min\": 180,\n      \"transition_time\": \"2015-03-29T01:00:00Z\"\n    }\n  },\n  \"_links\": {\n    \"self\": {\n      \"href\": \"https://api.teleport.org/api/timezones/iana:Europe%2FTallinn/\"\n    },\n    \"tz:offsets\": {\n      \"href\": \"https://api.teleport.org/api/timezones/iana:Europe%2FTallinn/offsets/{?date}\",\n      \"templated\": true\n    },\n    \"tz:offsets-now\": {\n      \"href\": \"https://api.teleport.org/api/timezones/iana:Europe%2FTallinn/offsets/?date=2015-09-07T11%3A41%3A00Z\"\n    }\n  },\n  \"iana_name\": \"Europe/Tallinn\"\n}\n</code></pre>\n"}], "owner": {"reputation": 2931, "user_id": 1523560, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a04c8a5d97cf0b1c298c85b20c21f113?s=128&d=identicon&r=PG", "display_name": "bmalets", "link": "https://stackoverflow.com/users/1523560/bmalets"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 326, "favorite_count": 0, "accepted_answer_id": 31379956, "answer_count": 2, "score": 1, "last_activity_date": 1441626285, "creation_date": 1435748134, "last_edit_date": 1435752703, "question_id": 31159308, "link": "https://stackoverflow.com/questions/31159308/how-get-users-local-time-time-zones-by-their-phone-outlook-email-or-city", "title": "How get user&#39;s local time (time zones) by their phone, outlook email or city?", "body": "<p>I'm developing rails project, which contain searching for a users.\nEach user have:</p>\n\n<ul>\n<li>outlook email (I am able to use Exchange API) </li>\n<li>Country and City</li>\n</ul>\n\n<p>I am searching for the most fast and simple way to get user's local time or time zone.</p>\n\n<p>My ideas:</p>\n\n<ol>\n<li><p>get city coordinates via google api, and after - get timezone by voordinates</p></li>\n<li><p>get time zone using other specific rest API</p></li>\n</ol>\n\n<p>But this realisation of this ideas is not good cause of long request/responce delays... So it is not suitable for me.</p>\n\n<p>Questions:</p>\n\n<ul>\n<li><p>Does some Exchange API exists to get user's time zone by email?</p></li>\n<li><p>Can you advise me better ways (JS, RoR or EWS API way) to get user's \ntime zone?</p></li>\n</ul>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "linux", "udp", "multicast", "multicastsocket"], "comments": [{"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1435752842, "post_id": 31158737, "comment_id": 50330504, "body": "Having one socket join multiple multicast groups shouldn&#39;t be an issue, however a socket can only bind to one port at a time.  If you need to read from multiple ports you need a separate socket for each one."}, {"owner": {"reputation": 67, "user_id": 116450, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/g9GBL.jpg?s=128&g=1", "display_name": "Glen", "link": "https://stackoverflow.com/users/116450/glen"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1435754019, "post_id": 31158737, "comment_id": 50331356, "body": "Thanks for the response. So how do I bind multiple (and there could be quite a few depending on the requirements of the user) sockets to one interface? Potentially the Port part might be the same but the Group Address could change."}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 1, "creation_date": 1435754674, "post_id": 31158737, "comment_id": 50331833, "body": "The way I do it is to first bind the socket to the port I want, then call setsockopt with IP_ADD_MEMBERSHIP for each group I want to join on that port.  I&#39;m not too familiar with ruby, but that&#39;s how it&#39;s done via the C API, and it looks like the functions more or less match up."}, {"owner": {"reputation": 67, "user_id": 116450, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/g9GBL.jpg?s=128&g=1", "display_name": "Glen", "link": "https://stackoverflow.com/users/116450/glen"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1435757494, "post_id": 31158737, "comment_id": 50334036, "body": "So if I have an input file with multicast groups and ports i should group all the multicast groups that use the same port together... bind a socket to that port and then use the setsockopt IP_ADD_MEMBERSHIP to add the groups. then once i have done that move on to the next port and repeat?"}, {"owner": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1435757680, "post_id": 31158737, "comment_id": 50334203, "body": "Yes, that should do it."}, {"owner": {"reputation": 67, "user_id": 116450, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/g9GBL.jpg?s=128&g=1", "display_name": "Glen", "link": "https://stackoverflow.com/users/116450/glen"}, "reply_to_user": {"reputation": 158911, "user_id": 1687119, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/f9c3036c1979d65847da3bdc271bb5b9?s=128&d=identicon&r=PG", "display_name": "dbush", "link": "https://stackoverflow.com/users/1687119/dbush"}, "edited": false, "score": 0, "creation_date": 1435757920, "post_id": 31158737, "comment_id": 50334391, "body": "ok then i&#39;m going to give that a go and possibly come back with an update... it might lead to more questions which i think will be better dealt with in a new post."}], "answers": [{"tags": [], "owner": {"reputation": 67, "user_id": 116450, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/g9GBL.jpg?s=128&g=1", "display_name": "Glen", "link": "https://stackoverflow.com/users/116450/glen"}, "is_accepted": false, "score": 0, "last_activity_date": 1435759958, "creation_date": 1435759958, "answer_id": 31163808, "question_id": 31158737, "link": "https://stackoverflow.com/questions/31158737/how-to-join-multiple-multicast-groups-on-one-interface/31163808#31163808", "title": "How to join multiple multicast groups on one interface", "body": "<p>Ok so I followed the advice given to bind to the interface first for each port and then add members for each of the multicast groups I want to listen to and this has resolved this particular issue and moved me on to the next issue I have. The next issue I will raise as a new topic.</p>\n"}], "owner": {"reputation": 67, "user_id": 116450, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/g9GBL.jpg?s=128&g=1", "display_name": "Glen", "link": "https://stackoverflow.com/users/116450/glen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1339, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435759958, "creation_date": 1435746329, "last_edit_date": 1435749551, "question_id": 31158737, "link": "https://stackoverflow.com/questions/31158737/how-to-join-multiple-multicast-groups-on-one-interface", "title": "How to join multiple multicast groups on one interface", "body": "<p>The Ruby version I have available is 1.8.7 and can't be upgraded as it is part of standard image that is used on all the companies Linux servers at this time and anything I do needs to be able to run on all of these servers without issue (I'm hoping though this won't be an issue)</p>\n\n<p>The project I am doing is to recreate an application that currently runs on Windows on a Linux server. The application takes a list of multicast groups and interfaces and attempts to join the groups and then listens for any data (doesn't matter what) reporting whether it could join and the data was there. It helps us in our environment prove out network connectivity prior to deployment of actual software on to the server. The data that it will be receiving will be binary encoded financial information from an exchange so I don't need to output (hence the commented out line and the  output) I just need to check it is available to the server.</p>\n\n<p>I have read up online and found bits and pieces of code that I have cobbled together into a small version of this where it joins 1 multicast group bound to 1 interface and listens for data for a period of time reporting whether any data was received.</p>\n\n<p>I then wanted to add a second multicast group and this is where my understanding is lacking in how to achieve this. My code is as follows:</p>\n\n<pre><code>#!/usr/bin/ruby\n\n require 'socket'\n require 'ipaddr'\n require 'timeout'\n\n MCAST_GROUP_A = \n {\n   :addr =&gt; '233.54.12.111',\n   :port =&gt; 26477,\n   :bindaddr =&gt; '172.31.230.156'\n }\n MCAST_GROUP_B = \n {\n   :addr =&gt; '233.54.12.111',\n   :port =&gt; 18170,\n   :bindaddr =&gt; '172.31.230.156'\n }\n\n ipA = IPAddr.new(MCAST_GROUP_A[:addr]).hton + IPAddr.new(MCAST_GROUP_A[:bindaddr]).hton\n ipB = IPAddr.new(MCAST_GROUP_B[:addr]).hton + IPAddr.new(MCAST_GROUP_B[:bindaddr]).hton\n\n begin\n   sockA = UDPSocket.open\n   sockA.setsockopt Socket::IPPROTO_IP, Socket::IP_ADD_MEMBERSHIP, ipA\n   sockA.setsockopt Socket::IPPROTO_IP, Socket::IP_ADD_MEMBERSHIP, ipB\n   sockA.bind Socket::INADDR_ANY, MCAST_GROUP_A[:port]\n   sockA.bind Socket::INADDR_ANY, MCAST_GROUP_B[:port]\n\n   timeoutSeconds = 10\n   Timeout.timeout(timeoutSeconds) do \n     msg, info = sockA.recvfrom(1024)\n     #puts \"MSG: #{msg} from #{info[2]} (#{info[3]})/#{info[1]} len #{msg.size}\"\n     puts \"MSG: &lt;garbled&gt; from #{info[2]} (#{info[3]})/#{info[1]} len #{msg.size}\"\n   end\n   rescue Timeout::Error\n     puts \"Nothing received connection timedout\\n\"\n ensure\n   sockA.close\n end\n</code></pre>\n\n<p>The error I get when I run this is:</p>\n\n<blockquote>\n  <p>[root@dt1d-ddncche21a ~]# ./UDPServer.rb\n  ./UDPServer.rb:35:in `setsockopt': Address already in use (Errno::EADDRINUSE)\n          from ./UDPServer.rb:35</p>\n</blockquote>\n\n<p>So that's where I am at and could really do with firstly pointers as to what is wrong (hopefully with an update to the code) and then once I this example working the next step will to be add a second interface into the mix to listen to again multiple multicast groups,</p>\n"}, {"tags": ["ruby", "ubuntu-14.04", "middleman"], "comments": [{"owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 0, "creation_date": 1435745489, "post_id": 31158329, "comment_id": 50325458, "body": "Have you tried <code>cd .</code> in the root project folder?"}], "answers": [{"comments": [{"owner": {"reputation": 1534, "user_id": 2439580, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/YTXZ5.jpg?s=128&g=1", "display_name": "stilllife", "link": "https://stackoverflow.com/users/2439580/stilllife"}, "edited": false, "score": 0, "creation_date": 1435756436, "post_id": 31158412, "comment_id": 50333198, "body": "So what is the purpose of the <code>.ruby-version</code> file if I have to change the default every time ?"}, {"owner": {"reputation": 1041, "user_id": 3276347, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/svVqH.jpg?s=128&g=1", "display_name": "Mahabub Islam Prio", "link": "https://stackoverflow.com/users/3276347/mahabub-islam-prio"}, "reply_to_user": {"reputation": 1534, "user_id": 2439580, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/YTXZ5.jpg?s=128&g=1", "display_name": "stilllife", "link": "https://stackoverflow.com/users/2439580/stilllife"}, "edited": false, "score": 0, "creation_date": 1435756529, "post_id": 31158412, "comment_id": 50333282, "body": "When there is a ruby version is predefined . It means that ..... your  stuff require this version ."}, {"owner": {"reputation": 1534, "user_id": 2439580, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/YTXZ5.jpg?s=128&g=1", "display_name": "stilllife", "link": "https://stackoverflow.com/users/2439580/stilllife"}, "edited": false, "score": 0, "creation_date": 1435757173, "post_id": 31158412, "comment_id": 50333784, "body": "but the <code>=&gt;</code> near the ruby version indicates &quot;current&quot; so why should the &quot;default&quot; matter ?"}, {"owner": {"reputation": 1041, "user_id": 3276347, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/svVqH.jpg?s=128&g=1", "display_name": "Mahabub Islam Prio", "link": "https://stackoverflow.com/users/3276347/mahabub-islam-prio"}, "reply_to_user": {"reputation": 1534, "user_id": 2439580, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/YTXZ5.jpg?s=128&g=1", "display_name": "stilllife", "link": "https://stackoverflow.com/users/2439580/stilllife"}, "edited": false, "score": 0, "creation_date": 1435760576, "post_id": 31158412, "comment_id": 50336489, "body": "It matters . You see RVM is stands for Ruby Version manager . And it always install and make a sandbox ready environment for your needs. So now if there is a situation that you will must use ruby 1.9 for development . then you can make default and current ruby usage into some specific version . And it is wise to make a version current and default because there is sometimes issues of permission and granting access."}, {"owner": {"reputation": 1534, "user_id": 2439580, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/YTXZ5.jpg?s=128&g=1", "display_name": "stilllife", "link": "https://stackoverflow.com/users/2439580/stilllife"}, "edited": false, "score": 0, "creation_date": 1435762833, "post_id": 31158412, "comment_id": 50338172, "body": "Seems to me we are going far from my issue. Let&#39;s make it more clear. In my project folder my &quot;current&quot; ruby is 2.2.0 but bundle ignores that. I want to set the ruby version to be run on a per-project basis without having to switch with rvm every time. I thought that was possible with the <code>.ruby-version</code> file. Is there a way to achieve this ?"}], "tags": [], "owner": {"reputation": 1041, "user_id": 3276347, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/svVqH.jpg?s=128&g=1", "display_name": "Mahabub Islam Prio", "link": "https://stackoverflow.com/users/3276347/mahabub-islam-prio"}, "is_accepted": false, "score": 0, "last_activity_date": 1435745404, "creation_date": 1435745404, "answer_id": 31158412, "question_id": 31158329, "link": "https://stackoverflow.com/questions/31158329/middleman-build-ruby-v-is-different-from-rvm-current-with-ruby-version/31158412#31158412", "title": "Middleman build: ruby -v is different from rvm current with .ruby-version", "body": "<p>Your rvm is using ruby version -1.9.3 . You have to type  <code>rvm --default use 2.2.0</code> and after that you can check the active version of ruby by typing <code>rvm list</code></p>\n\n<p>If there is a * sign near the ruby version 2.2.0 then it is using it for default usage . And I hope you will be able to fix this problem.</p>\n"}], "owner": {"reputation": 1534, "user_id": 2439580, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/YTXZ5.jpg?s=128&g=1", "display_name": "stilllife", "link": "https://stackoverflow.com/users/2439580/stilllife"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435745404, "creation_date": 1435745116, "question_id": 31158329, "link": "https://stackoverflow.com/questions/31158329/middleman-build-ruby-v-is-different-from-rvm-current-with-ruby-version", "title": "Middleman build: ruby -v is different from rvm current with .ruby-version", "body": "<p>I have a <a href=\"http://middlemanapp.com\" rel=\"nofollow\">Middleman</a> project in an Ubuntu 14.04 machine and I just want to run <code>bundle exec middleman build</code> using a per-project ruby version. So in the root folder of the project I have a <code>.ruby-version</code> with this content: <code>ruby-2.2.0</code>.</p>\n\n<p><code>rvm list</code> shows</p>\n\n<pre><code>rvm rubies\n\n * ruby-1.9.3-p551 [ x86_64 ]\n   ruby-2.1.4 [ x86_64 ]\n=&gt; ruby-2.2.0 [ x86_64 ]\n</code></pre>\n\n<p>Which seems fine. But <code>ruby -v</code> shows <code>ruby 1.9.3p484</code> and that middleman command fails because it uses the wrong ruby version</p>\n\n<pre><code>$ bundle exec middleman build\nbash: /usr/local/bin/bundle: /usr/bin/ruby1.8: bad interpreter: No such file or directory\n</code></pre>\n\n<p>So, how can I make sure that middleman uses the ruby version defined in the project folder ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "edited": false, "score": 0, "creation_date": 1435742969, "post_id": 31157433, "comment_id": 50323835, "body": "Which index page? users or posts? Which line of code throws the error?"}, {"owner": {"reputation": 661, "user_id": 4290657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/972acbef4b1d7987d7208b7f90c30e91?s=128&d=identicon&r=PG&f=1", "display_name": "JamesRocky", "link": "https://stackoverflow.com/users/4290657/jamesrocky"}, "reply_to_user": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "edited": false, "score": 0, "creation_date": 1435743234, "post_id": 31157433, "comment_id": 50324014, "body": "Mainly this code causes the issue in posts <code>&lt;%= image_tag(post.user.avatar.url(:thumb)) %&gt;</code>"}, {"owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1435745911, "post_id": 31157433, "comment_id": 50325703, "body": "<code>if  @user = current_user</code> shouldn&#39;t this be <code>==</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 661, "user_id": 4290657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/972acbef4b1d7987d7208b7f90c30e91?s=128&d=identicon&r=PG&f=1", "display_name": "JamesRocky", "link": "https://stackoverflow.com/users/4290657/jamesrocky"}, "edited": false, "score": 0, "creation_date": 1435743247, "post_id": 31157546, "comment_id": 50324023, "body": "This is the code that causes the issues,  <code>&lt;%= image_tag(post.user.avatar.url(:thumb)) %&gt;</code>"}, {"owner": {"reputation": 16407, "user_id": 157752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Qgx5T.jpg?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/157752/thilo"}, "edited": false, "score": 0, "creation_date": 1435746356, "post_id": 31157546, "comment_id": 50326010, "body": "This is correcting a bug though, unless you really want to link to one specific post throughout the loop, if <code>@post</code> is defined, or nowhere if not."}], "tags": [], "owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "is_accepted": false, "score": 4, "last_activity_date": 1435742943, "creation_date": 1435742943, "answer_id": 31157546, "question_id": 31157433, "link": "https://stackoverflow.com/questions/31157433/rails-how-do-i-show-all-the-users-post-undefined-method-user-for-nilnilclas/31157546#31157546", "title": "Rails: How do I show all the users post? undefined method `user&#39; for nil:NilClass", "body": "<p>Change</p>\n\n<pre><code>&lt;%= link_to post.user.name, @post.user %&gt; \n</code></pre>\n\n<p>to</p>\n\n<pre><code>&lt;%= link_to post.user.name, post.user %&gt; \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 661, "user_id": 4290657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/972acbef4b1d7987d7208b7f90c30e91?s=128&d=identicon&r=PG&f=1", "display_name": "JamesRocky", "link": "https://stackoverflow.com/users/4290657/jamesrocky"}, "edited": false, "score": 0, "creation_date": 1435743922, "post_id": 31157709, "comment_id": 50324458, "body": "It still give me the error <code>undefined method user for nil:NilClass</code>, it only happens if the user is not signed in. :("}, {"owner": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "edited": false, "score": 0, "creation_date": 1435745567, "post_id": 31157709, "comment_id": 50325510, "body": "instead of <code>@post</code> it should be <code>post</code>"}, {"owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "reply_to_user": {"reputation": 3587, "user_id": 4918948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7db0f565037fbddb5a8d5a30fa1e7273?s=128&d=identicon&r=PG&f=1", "display_name": "Vrushali Pawar", "link": "https://stackoverflow.com/users/4918948/vrushali-pawar"}, "edited": false, "score": 0, "creation_date": 1435745706, "post_id": 31157709, "comment_id": 50325579, "body": "@test thanks for the correction, I have edited the answer!"}, {"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1435747260, "post_id": 31157709, "comment_id": 50326586, "body": "The error said <code>undefined method user for nil:NilClass</code> not <code>undefined method avatar for nil:NilClass</code> So, how would the check <code>unless post.user.blank?</code> be the fix for this problem. I guess the actual fix would have been <code>&lt;%= link_to post.user.name, post.user %&gt;</code> instead of <code>&lt;%= link_to post.user.name, @post.user %&gt;</code>"}], "tags": [], "owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "is_accepted": true, "score": 1, "last_activity_date": 1435745690, "last_edit_date": 1435745690, "creation_date": 1435743416, "answer_id": 31157709, "question_id": 31157433, "link": "https://stackoverflow.com/questions/31157433/rails-how-do-i-show-all-the-users-post-undefined-method-user-for-nilnilclas/31157709#31157709", "title": "Rails: How do I show all the users post? undefined method `user&#39; for nil:NilClass", "body": "<p>Try this</p>\n\n<pre><code>&lt;% @posts.each do |post| %&gt; \n  &lt;% unless post.user.blank? %&gt;\n    &lt;%= image_tag(post.user.avatar.url(:thumb)) %&gt;\n    &lt;%= link_to post.user.name, post.user %&gt; \n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Hope this helped!</p>\n"}], "owner": {"reputation": 661, "user_id": 4290657, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/972acbef4b1d7987d7208b7f90c30e91?s=128&d=identicon&r=PG&f=1", "display_name": "JamesRocky", "link": "https://stackoverflow.com/users/4290657/jamesrocky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 67, "favorite_count": 0, "accepted_answer_id": 31157709, "answer_count": 2, "score": 0, "last_activity_date": 1435746156, "creation_date": 1435742707, "last_edit_date": 1435746156, "question_id": 31157433, "link": "https://stackoverflow.com/questions/31157433/rails-how-do-i-show-all-the-users-post-undefined-method-user-for-nilnilclas", "title": "Rails: How do I show all the users post? undefined method `user&#39; for nil:NilClass", "body": "<p>I was testing out a blog. If a user posts in the blog, when they go to the index, it shows all the users name. But if the user logs out and go to the index page, they get an error.</p>\n\n<pre><code>undefined method `user' for nil:NilClass\n</code></pre>\n\n<p>It seems to not show the other users post unless he or she is logged in or this error comes. Why is that happening? Any help would be appreciated.</p>\n\n<p>index.html</p>\n\n<pre><code>&lt;% @posts.each do |post| %&gt; \n\n      &lt;%= image_tag(post.user.avatar.url(:thumb)) %&gt;\n      &lt;%= link_to post.user.name, @post.user %&gt; \n &lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "http", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "edited": false, "score": 0, "creation_date": 1435742729, "post_id": 31157389, "comment_id": 50323662, "body": "In <code>news_params</code>, you&#39;ve mentioned that <code>params[:news]</code> is required. The error is due to this param missing in the request."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1435743081, "post_id": 31157389, "comment_id": 50323913, "body": "Please post your form code and params log."}], "answers": [{"tags": [], "owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "is_accepted": true, "score": 2, "last_activity_date": 1435742863, "creation_date": 1435742863, "answer_id": 31157508, "question_id": 31157389, "link": "https://stackoverflow.com/questions/31157389/param-is-missing-rails-4/31157508#31157508", "title": "Param is missing Rails 4", "body": "<p>Your <code>params</code> has value</p>\n\n<pre><code>params = { category: 'value', headline: 'value', .... }\n</code></pre>\n\n<p>When you use <code>news_params</code> you expect your params to be formatted like</p>\n\n<pre><code>params = { news: { category: 'value', headline: 'value', .... }}\n</code></pre>\n\n<p>But that is not the case.</p>\n\n<p>This is why it works when you use</p>\n\n<pre><code>@news = News.new(:category =&gt; params[:category], :headline =&gt; params[:headline], :content =&gt; params[:content], :image_url =&gt; params[:image_url])\n</code></pre>\n\n<p>And does not work with </p>\n\n<pre><code>@news = News.new(news_params)\n# news_params is nil\n</code></pre>\n"}], "owner": {"reputation": 638, "user_id": 1907445, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/d950a4dfdc72953912a64fac1490f3f9?s=128&d=identicon&r=PG", "display_name": "aceBox", "link": "https://stackoverflow.com/users/1907445/acebox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 31157508, "answer_count": 1, "score": 0, "last_activity_date": 1435742863, "creation_date": 1435742572, "question_id": 31157389, "link": "https://stackoverflow.com/questions/31157389/param-is-missing-rails-4", "title": "Param is missing Rails 4", "body": "<p>I have a controller 'news_controller.rb' for interfacing with a database. When I try to create a database row item (I do it by an automated script making post requests), I get the following error</p>\n\n<pre><code>ActionController::ParameterMissing (param is missing or the value is empty: news): app/controllers/api/news_controller.rb:57:in `news_params'app/controllers/api/news_controller.rb:28:in `create'\n</code></pre>\n\n<p>When I use params[:category], params[:headline] etc., inside the <strong>create</strong> action, then it works fine. What are the possible causes and solutions for this?</p>\n\n<p>Here's my controller code:</p>\n\n<pre><code>module Api\n    class NewsController &lt; Api::ApiController\n        respond_to :json\n\n        def index\n            @news = News.all\n            respond_with :news =&gt; @news\n        end\n\n        def show\n            @news = News.find(params[:id])\n            respond_with :news =&gt; @news\n        end\n\n        def new\n          @news = News.new\n          respond_with :news =&gt; @news\n        end\n\n        def edit\n            @news = News.find(params[:id])\n            respond_with :news =&gt; @news\n        end\n\n        def create\n            if !News.exists?(headline: params[:headline])\n                #@news = News.new(:category =&gt; params[:category], :headline =&gt; params[:headline], :content =&gt; params[:content], :image_url =&gt; params[:image_url])\n                @news = News.new(news_params)\n                if @news.save\n                    respond_with :news =&gt; @news\n                else\n                    respond_with @news.errors\n                end\n            end\n        end\n\n        def update\n          @news = News.find(params[:id])\n\n          if @news.update(news_params)\n            respond_with :news =&gt; @news\n          else\n            respond_with @news.errors\n          end\n        end\n\n        def destroy\n          @news = News.find(params[:id])\n          @news.destroy\n          respond_to do |format|\n            format.json { head :no_content }\n          end\n        end\n\n        private\n          def news_params\n            params.require(:news).permit(:category, :headline, :content, :image_url)\n          end\n    end\nend\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "inspect"], "answers": [{"comments": [{"owner": {"reputation": 123, "user_id": 3404084, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/258de8f9731bea4efae23e4b9460a06c?s=128&d=identicon&r=PG&f=1", "display_name": "jonjon", "link": "https://stackoverflow.com/users/3404084/jonjon"}, "edited": false, "score": 0, "creation_date": 1435742382, "post_id": 31157209, "comment_id": 50323411, "body": "Thanks. But when I &quot;puts add_two(array)&quot;, I just get nil in my return"}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "reply_to_user": {"reputation": 123, "user_id": 3404084, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/258de8f9731bea4efae23e4b9460a06c?s=128&d=identicon&r=PG&f=1", "display_name": "jonjon", "link": "https://stackoverflow.com/users/3404084/jonjon"}, "edited": false, "score": 0, "creation_date": 1435742591, "post_id": 31157209, "comment_id": 50323554, "body": "yes. because <code>puts</code> prints the output and returns <code>nil</code>. I did that just to explain you what&#39;s happening. In  short, you need not to worry about \\ in your result. Your actual code works fine and  \\  does not even exist."}, {"owner": {"reputation": 464, "user_id": 3597524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93146aea7d2a3644cf11e4a2e51ff2e1?s=128&d=identicon&r=PG&f=1", "display_name": "Mourad", "link": "https://stackoverflow.com/users/3597524/mourad"}, "edited": false, "score": 0, "creation_date": 1435743205, "post_id": 31157209, "comment_id": 50323995, "body": "I see no back slash on my output, i tried exactely what you wrote and it gave me what you are searching for."}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 1, "last_activity_date": 1435742056, "creation_date": 1435742056, "answer_id": 31157209, "question_id": 31157168, "link": "https://stackoverflow.com/questions/31157168/to-s-method-returning-an-unwanted/31157209#31157209", "title": "to_s method returning an unwanted &quot;\\&quot;", "body": "<p>Its not adding extra <code>\\</code>s. <code>\\</code> is escape character to escape <code>\"</code> which is part of the result String. Here:</p>\n\n<pre><code>a = add_two(array)\n# =&gt; \"[\\\"1 + 2 =  3\\\", \\\"2 + 2 =  4\\\", \\\"3 + 2 =  5\\\"]\"\n\nputs a\n# [\"1 + 2 =  3\", \"2 + 2 =  4\", \"3 + 2 =  5\"]\n</code></pre>\n\n<p>or directly:</p>\n\n<pre><code>puts add_two(array)\n# [\"1 + 2 =  3\", \"2 + 2 =  4\", \"3 + 2 =  5\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 5, "last_activity_date": 1435742441, "creation_date": 1435742441, "answer_id": 31157333, "question_id": 31157168, "link": "https://stackoverflow.com/questions/31157168/to-s-method-returning-an-unwanted/31157333#31157333", "title": "to_s method returning an unwanted &quot;\\&quot;", "body": "<p>It is coming from <code>to_s</code> that you have at the end. You are converting an array of strings (which is presumably already what you want) into a single string that contains double quotations (which must be escaped by <code>\\</code>). To fix it, just remove your line with <code>to_s</code>.</p>\n"}], "owner": {"reputation": 123, "user_id": 3404084, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/258de8f9731bea4efae23e4b9460a06c?s=128&d=identicon&r=PG&f=1", "display_name": "jonjon", "link": "https://stackoverflow.com/users/3404084/jonjon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 31157333, "answer_count": 2, "score": -1, "last_activity_date": 1435742751, "creation_date": 1435741940, "last_edit_date": 1435742751, "question_id": 31157168, "link": "https://stackoverflow.com/questions/31157168/to-s-method-returning-an-unwanted", "title": "to_s method returning an unwanted &quot;\\&quot;", "body": "<p>I wrote a method that takes an array of numbers, adds the number 2 to it, and then returns an array of strings.</p>\n\n<pre><code>def add_two(array)\n  new_array = array.map{|x| \"#{x} + 2 =  #{x + 2}\"}\n  new_array.to_s\nend\n</code></pre>\n\n<p>The following is a test result:</p>\n\n<p><img src=\"https://i.stack.imgur.com/u4MF0.png\" alt=\"enter image description here\"></p>\n\n<p>I have an unwanted <code>\\</code> in my return. I am trying to figure out where the <code>\\</code> is coming from. Can someone point me in the right direction?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby"], "comments": [{"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 1, "creation_date": 1435740581, "post_id": 31156592, "comment_id": 50322156, "body": "Could you explain (in the question text), why you are stuck, beyond not immediately knowing the answer yourself. Have you looked at any documentation? Also this is an unusual transformation - are you sure you want to do as written - what is it for?"}, {"owner": {"reputation": 901, "user_id": 3872380, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/wy14q.jpg?s=128&g=1", "display_name": "Mukesh", "link": "https://stackoverflow.com/users/3872380/mukesh"}, "edited": false, "score": 0, "creation_date": 1435745169, "post_id": 31156592, "comment_id": 50325267, "body": "array = [&quot;9999999999&quot;, &quot;500&quot;, &quot;existingusercheck&quot;, &quot;MBK9002&quot;, &quot;TestMerchant&quot;]     string = []      array.each do|aa|       string &lt;&lt; &quot;&#39;#{aa}&#39;&quot;     end     output = string.join"}], "answers": [{"tags": [], "owner": {"reputation": 38, "user_id": 4701633, "user_type": "registered", "profile_image": "https://graph.facebook.com/1071255986234906/picture?type=large", "display_name": "Felman Buntog", "link": "https://stackoverflow.com/users/4701633/felman-buntog"}, "is_accepted": true, "score": 0, "last_activity_date": 1435745980, "last_edit_date": 1435745980, "creation_date": 1435741054, "answer_id": 31156867, "question_id": 31156592, "link": "https://stackoverflow.com/questions/31156592/convert-ruby-array-to-string-with-specific-format/31156867#31156867", "title": "Convert Ruby Array to string with specific format", "body": "<p>I think you can do it like this:</p>\n\n<pre><code>array = [\"9999999999\", \"500\", \"existingusercheck\", \"MBK9002\", \"TestMerchant\"]\n\"'\"+array.join(\"''\")+\"'\"\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 4357872, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001370385203/picture?type=large", "display_name": "Pawan Yadav", "link": "https://stackoverflow.com/users/4357872/pawan-yadav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 851, "favorite_count": 0, "closed_date": 1435741561, "accepted_answer_id": 31156867, "answer_count": 1, "score": -5, "last_activity_date": 1435746055, "creation_date": 1435740341, "last_edit_date": 1435746055, "question_id": 31156592, "link": "https://stackoverflow.com/questions/31156592/convert-ruby-array-to-string-with-specific-format", "closed_reason": "Needs details or clarity", "title": "Convert Ruby Array to string with specific format", "body": "<p>This is my array</p>\n\n<pre><code> my_array = [\"9999999999\", \"500\", \"existingusercheck\", \"MBK9002\", \"TestMerchant\"]\n</code></pre>\n\n<p>And I want following string as output array</p>\n\n<pre><code> \"'9999999999''500''existingusercheck''MBK9002''TestMerchant'\"\n</code></pre>\n\n<p>Note: Each value should be quoted with single quote(<code>'500'</code>) and whole output should be quoted as string(<code>\"\"</code>)</p>\n"}, {"tags": ["ruby", "cucumber", "gherkin"], "comments": [{"owner": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "edited": false, "score": 0, "creation_date": 1435760867, "post_id": 31156572, "comment_id": 50336709, "body": "You have the time and the word <code>OUT</code> in your error message... looks like your <code>puts</code> override is working fine. Something is calling <code>puts</code> with those strings after an unrelated error?"}, {"owner": {"reputation": 173, "user_id": 2391528, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7c6ea361dcbf830fc9df366f03e36b4a?s=128&d=identicon&r=PG", "display_name": "k-prog", "link": "https://stackoverflow.com/users/2391528/k-prog"}, "reply_to_user": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "edited": false, "score": 0, "creation_date": 1435763951, "post_id": 31156572, "comment_id": 50338967, "body": "The code that outputs the error/backtrace is not PUTS but another custom overridden method in our helper class called PUTE which I included above as an example of one that works. So yes the overriding is working fine for every case except when the method name is PUTS?? I can fix this easy enough but I will have to refactor a lot of my step definition files. I don&#39;t want to do that until I can understand why this is seemingly happening out of the blue and only on some machines?"}], "owner": {"reputation": 173, "user_id": 2391528, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7c6ea361dcbf830fc9df366f03e36b4a?s=128&d=identicon&r=PG", "display_name": "k-prog", "link": "https://stackoverflow.com/users/2391528/k-prog"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 337, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1435746344, "creation_date": 1435740285, "last_edit_date": 1435746344, "question_id": 31156572, "link": "https://stackoverflow.com/questions/31156572/cucumber-step-definitions-file-unable-to-use-keyword-puts-which-is-overridden-in", "title": "Cucumber step definitions file unable to use keyword puts which is overridden in a ruby class in the same project", "body": "<p>I have a step definition file which has the following line </p>\n\n<pre><code>puts \"Beginning step execution\"\n</code></pre>\n\n<p>In a seperate file (Not a ruby class) called helper.rb I have overidden puts so I can output the puts with a timestamp which looks like this</p>\n\n<pre><code>def puts(o)\n  timenow = Time.now\n  if o.is_a? Array\n    msg = timenow.to_s+\" OUT: \"+o.to_s\n  else\n    msg = timenow.to_s+\" OUT: \"+o\n  end\n  super(msg.black)\nend\n</code></pre>\n\n<p>The error I am getting is</p>\n\n<blockquote>\n  <p>2015-06-30 14:44:59 +0100 OUT: Error: undefined method &lt;&lt;' for nil:NilClass 2015-06-30 14:44:59 +0100 OUT: /Library/Ruby/Gems/2.0.0/gems/gherkin-2.12.2/lib/gherkin/formatter/json_formatter.rb:89:inwrite'\n  /Library/Ruby/Gems/2.0.0/gems/cucumber-1.3.18/lib/cucumber/formatter/gherkin_formatter_adapter.rb:166:in puts' /Library/Ruby/Gems/2.0.0/gems/cucumber-1.3.18/lib/cucumber/ast/tree_walker.rb:181:inblock in send_to_all'\n  /Library/Ruby/Gems/2.0.0/gems/cucumber-1.3.18/lib/cucumber/ast/tree_walker.rb:179:in each' /Library/Ruby/Gems/2.0.0/gems/cucumber-1.3.18/lib/cucumber/ast/tree_walker.rb:179:insend_to_all'\n  /Library/Ruby/Gems/2.0.0/gems/cucumber-1.3.18/lib/cucumber/ast/tree_walker.rb:173:in broadcast' /Library/Ruby/Gems/2.0.0/gems/cucumber-1.3.18/lib/cucumber/ast/tree_walker.rb:154:inputs'\n  /Library/Ruby/Gems/2.0.0/gems/cucumber-1.3.18/lib/cucumber/runtime/user_interface.rb:14:in puts' /Library/Ruby/Gems/2.0.0/gems/cucumber-1.3.18/lib/cucumber/rb_support/rb_world.rb:107:inputs'\n  /Users/jenkins/workspace/TEST-regression-test_trial_mini/automation/ios/features/support/hooks.rb:104:in block in ' /Library/Ruby/Gems/2.0.0/gems/cucumber-1.3.18/lib/cucumber/core_ext/instance_exec.rb:48:ininstance_exec'\n  /Library/Ruby/Gems/2.0.0/gems/cucumber-1.3.18/lib/cucumber/core_ext/instance_exec.rb:48:in block in cucumber_instance_exec' /Library/Ruby/Gems/2.0.0/gems/cucumber-1.3.18/lib/cucumber/core_ext/instance_exec.rb:69:incucumber_run_with_backtrace_filtering'\n  /Library/Ruby/Gems/2.0.0/gems/cucumber-1.3.18/lib/cucumber/core_ext/instance_exec.rb:36:in cucumber_instance_exec' /Library/Ruby/Gems/2.0.0/gems/cucumber-1.3.18/lib/cucumber/rb_support/rb_hook.rb:14:ininvoke'\n  /Library/Ruby/Gems/2.0.0/gems/cucumber-1.3.18/lib/cucumber/language_support/language_methods.rb:114:in invoke' /Library/Ruby/Gems/2.0.0/gems/cucumber-1.3.18/lib/cucumber/language_support/language_methods.rb:102:inblock in execute_before'</p>\n</blockquote>\n\n<p>This method for printing errors works fine</p>\n\n<pre><code> def pute(o)\n  timenow = Time.now\n  if o.is_a? Array\n    msg = timenow.to_s+\" OUT: \"+o.to_s\n  else\n    msg = timenow.to_s+\" OUT: \"+o\n  end\n  Kernel.puts(msg.red)\nend\n</code></pre>\n\n<p>I thought it might be a problem with super but this method for printing using warn instead of puts works fine also</p>\n\n<pre><code>def warn(o)\n  p \"entered warn in gui_helper\"\n  timenow = Time.now\n  if o.is_a? Array\n    msg = timenow.to_s+\" OUT: \"+o.to_s\n  else\n    msg = timenow.to_s+\" OUT: \"+o\n  end\n  super(msg.black)\nend\n</code></pre>\n\n<p>We have had this code for a long time and this just starting happening all of sudden a few days ago and it seems to only affect some of my machines. I have compared the versions of cucumber, ruby, gherkin and other key gems we are using and there is no difference. Calling the puts method in a ruby class in the same project works fine. It seems the problem is that using the keyword PUTS specifically in a step definition file has stopped working because Gherkin thinks the text passed in the write method is nil? Anyone any ideas why this might be happening?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1693, "user_id": 1353211, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/9aa65661f1dea1179119c1f7a60f9000?s=128&d=identicon&r=PG", "display_name": "Rico-E", "link": "https://stackoverflow.com/users/1353211/rico-e"}, "edited": false, "score": 0, "creation_date": 1435738483, "post_id": 31155933, "comment_id": 50320796, "body": "Please add what you have tried and at what point you need specific help. Otherwise it smells a lot like homework."}], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 2814913, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d171137eca773f065d1774bf220639e1?s=128&d=identicon&r=PG&f=1", "display_name": "ShrinivasS", "link": "https://stackoverflow.com/users/2814913/shrinivass"}, "edited": false, "score": 0, "creation_date": 1435745972, "post_id": 31156640, "comment_id": 50325747, "body": "Thank you so much but i want to store it in a new array"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 43, "user_id": 2814913, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d171137eca773f065d1774bf220639e1?s=128&d=identicon&r=PG&f=1", "display_name": "ShrinivasS", "link": "https://stackoverflow.com/users/2814913/shrinivass"}, "edited": false, "score": 0, "creation_date": 1435756585, "post_id": 31156640, "comment_id": 50333330, "body": "I&#39;m not sure I understand what you mean, but I&#39;ve edited to use the three variable names in your question: <code>a</code>, <code>b</code> and <code>c</code>."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1435756847, "last_edit_date": 1435756847, "creation_date": 1435740449, "answer_id": 31156640, "question_id": 31155933, "link": "https://stackoverflow.com/questions/31155933/sorting-in-ruby-without-using-sort/31156640#31156640", "title": "Sorting in ruby without using .sort", "body": "<p>You cerainly want to make use of the fact that the two arrays to be merged are already sorted. This is one way to do that:</p>\n\n<pre><code>def merge_sort(a,b)\n  ac, bc = a.dup, b.dup\n  (a.size+b.size).times.each_with_object([]) do |_,c|\n    c &lt;&lt;\n      case [ac.any?, bc.any?]\n      when [true,true]  then (ac.first &lt;= bc.first) ? ac.shift : bc.shift\n      when [true,false] then ac.shift\n      else                   bc.shift\n      end\n   end\n end\n\n a = [1,4,6,9]\n b = [2,5,7,8]    \n\n c = merge_sort a,b \n   #=&gt; [1,2,4,5,6,7,8,9] \n</code></pre>\n\n<p>The first line is to avoid mutating (changing) <code>a</code> or <code>b</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 2814913, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d171137eca773f065d1774bf220639e1?s=128&d=identicon&r=PG&f=1", "display_name": "ShrinivasS", "link": "https://stackoverflow.com/users/2814913/shrinivass"}, "edited": false, "score": 0, "creation_date": 1435744567, "post_id": 31156715, "comment_id": 50324876, "body": "But i want to compare the elements of two arrays first and later add them to a new array like"}, {"owner": {"reputation": 43, "user_id": 2814913, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d171137eca773f065d1774bf220639e1?s=128&d=identicon&r=PG&f=1", "display_name": "ShrinivasS", "link": "https://stackoverflow.com/users/2814913/shrinivass"}, "edited": false, "score": 0, "creation_date": 1435744583, "post_id": 31156715, "comment_id": 50324893, "body": "a = {1,4,6,9} b = {8,5,2,7}  if a[i] &gt; b[i] push c[i] = b[i] push c[i+1] = a[i]  else if b[i] &gt; a[i] push c[i] = a[i] push c[i+1] = b[i]"}, {"owner": {"reputation": 464, "user_id": 3597524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93146aea7d2a3644cf11e4a2e51ff2e1?s=128&d=identicon&r=PG&f=1", "display_name": "Mourad", "link": "https://stackoverflow.com/users/3597524/mourad"}, "reply_to_user": {"reputation": 43, "user_id": 2814913, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d171137eca773f065d1774bf220639e1?s=128&d=identicon&r=PG&f=1", "display_name": "ShrinivasS", "link": "https://stackoverflow.com/users/2814913/shrinivass"}, "edited": false, "score": 0, "creation_date": 1435744696, "post_id": 31156715, "comment_id": 50324954, "body": "But in your question you are saying that the two arrays are sorted, you may want to edit the question"}, {"owner": {"reputation": 43, "user_id": 2814913, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d171137eca773f065d1774bf220639e1?s=128&d=identicon&r=PG&f=1", "display_name": "ShrinivasS", "link": "https://stackoverflow.com/users/2814913/shrinivass"}, "edited": false, "score": 0, "creation_date": 1435744742, "post_id": 31156715, "comment_id": 50324992, "body": "consider my both arrays a &amp; b are sorted arrays"}, {"owner": {"reputation": 43, "user_id": 2814913, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d171137eca773f065d1774bf220639e1?s=128&d=identicon&r=PG&f=1", "display_name": "ShrinivasS", "link": "https://stackoverflow.com/users/2814913/shrinivass"}, "edited": false, "score": 0, "creation_date": 1435744795, "post_id": 31156715, "comment_id": 50325033, "body": "like a = {1,4,6,9} and b = {2,5,7,8}"}, {"owner": {"reputation": 464, "user_id": 3597524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93146aea7d2a3644cf11e4a2e51ff2e1?s=128&d=identicon&r=PG&f=1", "display_name": "Mourad", "link": "https://stackoverflow.com/users/3597524/mourad"}, "reply_to_user": {"reputation": 43, "user_id": 2814913, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d171137eca773f065d1774bf220639e1?s=128&d=identicon&r=PG&f=1", "display_name": "ShrinivasS", "link": "https://stackoverflow.com/users/2814913/shrinivass"}, "edited": false, "score": 0, "creation_date": 1435744856, "post_id": 31156715, "comment_id": 50325070, "body": "In this case, camparing two arrays and put the result in an another one is the same if we have an array unsorted and we want to sort it from scratch,"}, {"owner": {"reputation": 464, "user_id": 3597524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93146aea7d2a3644cf11e4a2e51ff2e1?s=128&d=identicon&r=PG&f=1", "display_name": "Mourad", "link": "https://stackoverflow.com/users/3597524/mourad"}, "reply_to_user": {"reputation": 43, "user_id": 2814913, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d171137eca773f065d1774bf220639e1?s=128&d=identicon&r=PG&f=1", "display_name": "ShrinivasS", "link": "https://stackoverflow.com/users/2814913/shrinivass"}, "edited": false, "score": 0, "creation_date": 1435744949, "post_id": 31156715, "comment_id": 50325125, "body": "i see what you are searching for iam editing my answer now"}, {"owner": {"reputation": 464, "user_id": 3597524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93146aea7d2a3644cf11e4a2e51ff2e1?s=128&d=identicon&r=PG&f=1", "display_name": "Mourad", "link": "https://stackoverflow.com/users/3597524/mourad"}, "reply_to_user": {"reputation": 43, "user_id": 2814913, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d171137eca773f065d1774bf220639e1?s=128&d=identicon&r=PG&f=1", "display_name": "ShrinivasS", "link": "https://stackoverflow.com/users/2814913/shrinivass"}, "edited": false, "score": 0, "creation_date": 1435745155, "post_id": 31156715, "comment_id": 50325256, "body": "the two arrays has to have the same length or not ?"}, {"owner": {"reputation": 43, "user_id": 2814913, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d171137eca773f065d1774bf220639e1?s=128&d=identicon&r=PG&f=1", "display_name": "ShrinivasS", "link": "https://stackoverflow.com/users/2814913/shrinivass"}, "edited": false, "score": 0, "creation_date": 1435745222, "post_id": 31156715, "comment_id": 50325302, "body": "they may or may not be of a same length"}, {"owner": {"reputation": 464, "user_id": 3597524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93146aea7d2a3644cf11e4a2e51ff2e1?s=128&d=identicon&r=PG&f=1", "display_name": "Mourad", "link": "https://stackoverflow.com/users/3597524/mourad"}, "reply_to_user": {"reputation": 43, "user_id": 2814913, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d171137eca773f065d1774bf220639e1?s=128&d=identicon&r=PG&f=1", "display_name": "ShrinivasS", "link": "https://stackoverflow.com/users/2814913/shrinivass"}, "edited": false, "score": 0, "creation_date": 1435745399, "post_id": 31156715, "comment_id": 50325406, "body": "ok thanks wait for my edit"}, {"owner": {"reputation": 464, "user_id": 3597524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93146aea7d2a3644cf11e4a2e51ff2e1?s=128&d=identicon&r=PG&f=1", "display_name": "Mourad", "link": "https://stackoverflow.com/users/3597524/mourad"}, "reply_to_user": {"reputation": 43, "user_id": 2814913, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d171137eca773f065d1774bf220639e1?s=128&d=identicon&r=PG&f=1", "display_name": "ShrinivasS", "link": "https://stackoverflow.com/users/2814913/shrinivass"}, "edited": false, "score": 0, "creation_date": 1435747961, "post_id": 31156715, "comment_id": 50327045, "body": "OK, i hope i answred your question now !:)"}], "tags": [], "owner": {"reputation": 464, "user_id": 3597524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93146aea7d2a3644cf11e4a2e51ff2e1?s=128&d=identicon&r=PG&f=1", "display_name": "Mourad", "link": "https://stackoverflow.com/users/3597524/mourad"}, "is_accepted": false, "score": 0, "last_activity_date": 1435747935, "last_edit_date": 1435747935, "creation_date": 1435740669, "answer_id": 31156715, "question_id": 31155933, "link": "https://stackoverflow.com/questions/31155933/sorting-in-ruby-without-using-sort/31156715#31156715", "title": "Sorting in ruby without using .sort", "body": "<p>Here is a function that will help you do what you want.</p>\n\n<pre><code>def my_sort_function(a,b)\n  n = a.length + b.length\n  if a.length &lt; b.length\n    min = a.length\n  else\n    min = b.length\n  end\n  c=[]\n\n    min.times do |i|\n      if a[i] &gt; b[i]\n        c &lt;&lt; b[i]\n        c  &lt;&lt; a[i]\n      else\n        c &lt;&lt; a[i]\n        c  &lt;&lt; b[i]\n        end\n    end\n  if min == a.length\n\n    (c &lt;&lt; b[(min)..(b.length-1)]).flatten!\n\n  else\n    (c &lt;&lt; a[(min)..(a.length-1)]).flatten!\n\n  end\n\n  loop do\n    swapped = false\n\n    (n-1).times do |i|\n      if c[i] &gt; c[i+1]\n        c[i], c[i+1] = c[i+1], c[i]\n        swapped = true\n      end\n    end\n\n    break if not swapped\n  end\n  c\nend\n\na = [1,4,6]\nb = [2,5,7,8]\n\nputs a    #=&gt; a:[1,4,6]\nputs b    #=&gt; b:[2,5,7,8]\n\nc= my_sort_function(a,b)\nputs c    #=&gt; c:[1,2,4,5,6,7,8]\nputs \"sorting Done!\"\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 2814913, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d171137eca773f065d1774bf220639e1?s=128&d=identicon&r=PG&f=1", "display_name": "ShrinivasS", "link": "https://stackoverflow.com/users/2814913/shrinivass"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 224, "favorite_count": 0, "closed_date": 1435786552, "answer_count": 2, "score": -4, "last_activity_date": 1435756847, "creation_date": 1435738302, "last_edit_date": 1435742200, "question_id": 31155933, "link": "https://stackoverflow.com/questions/31155933/sorting-in-ruby-without-using-sort", "closed_reason": "Duplicate", "title": "Sorting in ruby without using .sort", "body": "<p>Sort the elements of two sorted arrays <strong>without using .sort method</strong> and put the sorted elements in a new array in RUBY</p>\n\n<p>I have two arrays, like this:</p>\n\n<pre><code>a = [1,4,6,9]\nb = [2,5,7,8]\n</code></pre>\n\n<p>and my output should be:</p>\n\n<pre><code>c = [1,2,4,5,6,7,8,9]\n</code></pre>\n\n<p>How do I do this?</p>\n"}, {"tags": ["ruby", "json"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1435738334, "post_id": 31155893, "comment_id": 50320691, "body": "Read the json file into a ruby structure (hash, in this case). Modify the ruby structure. Write it out to the file. PROFIT."}, {"owner": {"reputation": 105, "user_id": 4887162, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206783551250129/picture?type=large", "display_name": "Sokrah", "link": "https://stackoverflow.com/users/4887162/sokrah"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1435742076, "post_id": 31155893, "comment_id": 50323183, "body": "Yeah, but does it still work for a large file? (~15k lines)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1435742554, "post_id": 31155893, "comment_id": 50323534, "body": "Why wouldn&#39;t it work?"}, {"owner": {"reputation": 105, "user_id": 4887162, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206783551250129/picture?type=large", "display_name": "Sokrah", "link": "https://stackoverflow.com/users/4887162/sokrah"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1435743356, "post_id": 31155893, "comment_id": 50324105, "body": "The point is, I was afraid that work on a large file would require a lot of capacity. But, as shivam explained clearly, that is still the best way to go when you look at the complexity. Whatever, i&#39;ll go for that way ! Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 4887162, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206783551250129/picture?type=large", "display_name": "Sokrah", "link": "https://stackoverflow.com/users/4887162/sokrah"}, "edited": false, "score": 0, "creation_date": 1435742169, "post_id": 31155983, "comment_id": 50323238, "body": "As simple as that... Thank you ! But , does it still be efficiency with large json file? (~ 15k lines)"}, {"owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "reply_to_user": {"reputation": 105, "user_id": 4887162, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206783551250129/picture?type=large", "display_name": "Sokrah", "link": "https://stackoverflow.com/users/4887162/sokrah"}, "edited": false, "score": 1, "creation_date": 1435742381, "post_id": 31155983, "comment_id": 50323410, "body": "operation on Hash  is O(1). Which is magnitudes more efficient than alternate options like reading line by line and editing the file."}], "tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": true, "score": 8, "last_activity_date": 1435739297, "last_edit_date": 1435739297, "creation_date": 1435738473, "answer_id": 31155983, "question_id": 31155893, "link": "https://stackoverflow.com/questions/31155893/modify-json-file-with-ruby/31155983#31155983", "title": "Modify json file with ruby", "body": "<p>Convert json to hash, edit hash, convert back to json:</p>\n\n<pre><code>require 'json'\n\na = '{\"employees\":[\n      {\"firstName\":\"John\", \"lastName\":\"Doe\"},\n      {\"firstName\":\"Anna\", \"lastName\":\"Smith\"},\n      {\"firstName\":\"Peter\", \"lastName\":\"Jones\"}\n    ]}'\n\n# Converting JSON to Hash\nhash = JSON.parse a\n# =&gt; {\"employees\"=&gt;[{\"firstName\"=&gt;\"John\", \"lastName\"=&gt;\"Doe\"}, {\"firstName\"=&gt;\"Anna\", \"lastName\"=&gt;\"Smith\"}, {\"firstName\"=&gt;\"Peter\", \"lastName\"=&gt;\"Jones\"}]} \n\n# Modifying Hash as required\nhash[\"employees\"][1][\"lastName\"]  = \"David\"\n\n# Modified Hash\nhash\n# =&gt; {\"employees\"=&gt;[{\"firstName\"=&gt;\"John\", \"lastName\"=&gt;\"Doe\"}, {\"firstName\"=&gt;\"Anna\", \"lastName\"=&gt;\"David\"}, {\"firstName\"=&gt;\"Peter\", \"lastName\"=&gt;\"Jones\"}]}\n\n\n# Converting Hash back to JSON\nhash.to_json\n#  \"{\\\"employees\\\":[{\\\"firstName\\\":\\\"John\\\",\\\"lastName\\\":\\\"Doe\\\"}, {\\\"firstName\\\":\\\"Anna\\\",\\\"lastName\\\":\\\"David\\\"}, {\\\"firstName\\\":\\\"Peter\\\",\\\"lastName\\\":\\\"Jones\\\"}]}\"\n</code></pre>\n\n<p>I have directly modified the hash as I can see the exact index and iterating through Hash was not the question. But in real world example you may want to go through the Hash to look for key and then modify it, instead of doing to directly as in above example.</p>\n\n<p>You can use <code>pretty_generate</code> to pretty print your json. Here:</p>\n\n<pre><code>hash\n# =&gt; {\"employees\"=&gt;[{\"firstName\"=&gt;\"John\", \"lastName\"=&gt;\"Doe\"}, {\"firstName\"=&gt;\"Anna\", \"lastName\"=&gt;\"David\"}, {\"firstName\"=&gt;\"Peter\", \"lastName\"=&gt;\"Jones\"}]}\n\nputs JSON.pretty_generate hash\n#{\n#  \"employees\": [\n#    {\n#      \"firstName\": \"John\",\n#      \"lastName\": \"Doe\"\n#    },\n#    {\n#      \"firstName\": \"Anna\",\n#      \"lastName\": \"David\"\n#    },\n#    {\n#      \"firstName\": \"Peter\",\n#      \"lastName\": \"Jones\"\n#    }\n#  ]\n#}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 261, "user_id": 853424, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8055121bc9df481462c9e5a5faf9a32c?s=128&d=identicon&r=PG", "display_name": "Clergyman", "link": "https://stackoverflow.com/users/853424/clergyman"}, "is_accepted": false, "score": 0, "last_activity_date": 1536069464, "creation_date": 1536069464, "answer_id": 52168016, "question_id": 31155893, "link": "https://stackoverflow.com/questions/31155893/modify-json-file-with-ruby/52168016#52168016", "title": "Modify json file with ruby", "body": "<p>jsonpath gem can do it out of the box</p>\n\n<pre><code>JsonPath.for('{\"candy\":\"lollipop\"}').gsub('$..candy') {|v| \"big turks\" }.to_hash\n</code></pre>\n\n<p>in your case something like</p>\n\n<pre><code>require 'jsonpath'\n\na = '{\"employees\":[\n      {\"firstName\":\"John\", \"lastName\":\"Doe\"},\n      {\"firstName\":\"Anna\", \"lastName\":\"Smith\"},\n      {\"firstName\":\"Peter\", \"lastName\":\"Jones\"}\n    ]}'\nJsonPath.for(a).gsub('$.employees[1].lastName') {|v| \"David\" }.to_hash\n</code></pre>\n\n<p>will do the trick</p>\n"}], "owner": {"reputation": 105, "user_id": 4887162, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206783551250129/picture?type=large", "display_name": "Sokrah", "link": "https://stackoverflow.com/users/4887162/sokrah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8179, "favorite_count": 0, "accepted_answer_id": 31155983, "answer_count": 2, "score": 5, "last_activity_date": 1536069464, "creation_date": 1435738178, "question_id": 31155893, "link": "https://stackoverflow.com/questions/31155893/modify-json-file-with-ruby", "title": "Modify json file with ruby", "body": "<p>I have a json file that I need to access and modify with a ruby script.\nI know how to open a json, how to write a new one, but can I modify an existing one?</p>\n\n<p>I have searched for it a bit, but I have not found anything helpfull yet..\nOnly results treats on different programming languages ..</p>\n\n<p>exemple : I want to modify a wrong data, like below, Anna's last name.</p>\n\n<p>employee.json</p>\n\n<pre><code>{\"employees\":[\n    {\"firstName\":\"John\", \"lastName\":\"Doe\"},\n    {\"firstName\":\"Anna\", \"lastName\":\"Smith\"},\n    {\"firstName\":\"Peter\", \"lastName\":\"Jones\"}\n]}\n</code></pre>\n\n<p>=></p>\n\n<pre><code>{\"employees\":[\n    {\"firstName\":\"John\", \"lastName\":\"Doe\"},\n    {\"firstName\":\"Anna\", \"lastName\":\"David\"},\n    {\"firstName\":\"Peter\", \"lastName\":\"Jones\"}\n]}\n</code></pre>\n\n<p>Thanks in advance,</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "module", "include", "rails-engines"], "answers": [{"tags": [], "owner": {"reputation": 156, "user_id": 3445608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de4239680f98b8f92272d3f9828d602c?s=128&d=identicon&r=PG&f=1", "display_name": "jerrytao", "link": "https://stackoverflow.com/users/3445608/jerrytao"}, "is_accepted": false, "score": 0, "last_activity_date": 1435746723, "creation_date": 1435746723, "answer_id": 31158857, "question_id": 31155791, "link": "https://stackoverflow.com/questions/31155791/ruby-implement-an-acts-as/31158857#31158857", "title": "Ruby : implement an acts_as", "body": "<p>You need add your module to lazy load hook. Like this:</p>\n\n<pre><code>ActiveSupport.on_load(:active_record) do\n  include Organisable\nend\n</code></pre>\n\n<p>For more details see <a href=\"http://simonecarletti.com/blog/2011/04/understanding-ruby-and-rails-lazy-load-hooks/\" rel=\"nofollow\">Understanding Ruby and Rails: Lazy load hooks</a></p>\n"}], "owner": {"reputation": 47, "user_id": 5044618, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1b12831609f3b191d67eafe168301ea4?s=128&d=identicon&r=PG&f=1", "display_name": "Zak", "link": "https://stackoverflow.com/users/5044618/zak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435746723, "creation_date": 1435737897, "last_edit_date": 1435744877, "question_id": 31155791, "link": "https://stackoverflow.com/questions/31155791/ruby-implement-an-acts-as", "title": "Ruby : implement an acts_as", "body": "<p>I want to implement an acts_as. </p>\n\n<p>This would be something like this :</p>\n\n<pre><code>Module Organisable\n  def acts_as_organisable\n    send :include, InstanceMethods\n    has_many ...\n    before_destroy ...\n    ??\n  end\n  module InstanceMethods\n    def method1\n    end    \n\n    def method2\n    end\n  end\nend\n</code></pre>\n\n<p>And it would be used like :</p>\n\n<pre><code>def myClass &lt; ActiveRecord::Base\n    acts_as_organisable\n\nend\n</code></pre>\n\n<p>I tried it but it does'nt work. If it's possible i'd like pass parameters too (acts_as_organisable(param) ).</p>\n\n<hr>\n\n<p>This module must be placed in another engine.</p>\n\n<p>For the files organisation i think to :</p>\n\n<pre><code>MyEngine\n   Models\n     MyEngine\n        MyEngineClass\n     Organisable\n        Organisable\n</code></pre>\n\n<p>But not sure.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1435736157, "post_id": 31155133, "comment_id": 50319521, "body": "is your model called <code>Self</code>?"}, {"owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "edited": false, "score": 0, "creation_date": 1435736636, "post_id": 31155133, "comment_id": 50319792, "body": "Can you please post your routes file?"}, {"owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "edited": false, "score": 0, "creation_date": 1435737725, "post_id": 31155133, "comment_id": 50320365, "body": "What is your model name?"}, {"owner": {"reputation": 864, "user_id": 3655298, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1060747336/picture?type=large", "display_name": "shoaib", "link": "https://stackoverflow.com/users/3655298/shoaib"}, "edited": false, "score": 0, "creation_date": 1435740104, "post_id": 31155133, "comment_id": 50321836, "body": "in controller you can&#39;t call self. Self is used in  a class. So you can write self in you model/class, and in controller you have to write ModelName.new."}, {"owner": {"reputation": 546, "user_id": 4633925, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/pwk3O.jpg?s=128&g=1", "display_name": "alchemist95", "link": "https://stackoverflow.com/users/4633925/alchemist95"}, "edited": false, "score": 0, "creation_date": 1435814732, "post_id": 31155133, "comment_id": 50359286, "body": "yes, my model is called Self."}, {"owner": {"reputation": 546, "user_id": 4633925, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/pwk3O.jpg?s=128&g=1", "display_name": "alchemist95", "link": "https://stackoverflow.com/users/4633925/alchemist95"}, "edited": false, "score": 0, "creation_date": 1435815134, "post_id": 31155133, "comment_id": 50359415, "body": "to be clear, &#39;worms&#39; is the name of my controller..."}], "answers": [{"tags": [], "owner": {"reputation": 2448, "user_id": 2621389, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/uiNbQ.jpg?s=128&g=1", "display_name": "Bharat soni", "link": "https://stackoverflow.com/users/2621389/bharat-soni"}, "is_accepted": false, "score": 0, "last_activity_date": 1435737171, "creation_date": 1435737171, "answer_id": 31155568, "question_id": 31155133, "link": "https://stackoverflow.com/questions/31155133/nomethoderror-in-controllernewforms/31155568#31155568", "title": "NoMethodError in controller#new(Forms)", "body": "<p>Your form should be look like this as below...</p>\n\n<p>Self means what ?, You should write the name of your model here.</p>\n\n<p>And If you need full CRUD operation on the same then write the below line for the routes...</p>\n\n<pre><code>resources :your-model-name-in-plural\n\n&lt;%= form_for @next do |a| %&gt;\n&lt;%= a.text_field :name %&gt;\n&lt;%= a.text_field :prof %&gt;\n&lt;%= a.text_field :pic, :placeholder =&gt; 'Enter address' %&gt;\n</code></pre>\n"}], "owner": {"reputation": 546, "user_id": 4633925, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/pwk3O.jpg?s=128&g=1", "display_name": "alchemist95", "link": "https://stackoverflow.com/users/4633925/alchemist95"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 112, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1435815374, "creation_date": 1435735846, "last_edit_date": 1435815374, "question_id": 31155133, "link": "https://stackoverflow.com/questions/31155133/nomethoderror-in-controllernewforms", "title": "NoMethodError in controller#new(Forms)", "body": "<p>I have been trying to create a form on a page, with an instance variable @next, but it doesn't seem to work. When I remove the part which includes the form, the page opens up, clearly depicting that the paths have been correctly mentioned in routes.rb. To be clear,i haev added the following method in the controller file</p>\n\n<pre><code>def new\n@next=Self.new\nend\n</code></pre>\n\n<p>The part where  form is created.</p>\n\n<pre><code>&lt;%= form_for(@next) do |a| %&gt;\n&lt;%= a.text_field_tag :name %&gt;\n&lt;%= a.text_field_tag :prof %&gt;\n&lt;%= a.text_field_tag :pic, :placeholder =&gt; 'Enter address' %&gt;\n</code></pre>\n\n\n\n<p>i m using Rails 4.0.2</p>\n\n<p>routes.rb</p>\n\n<pre><code>get '/worms' =&gt; 'worms#index'\nget '/worms/new' =&gt; 'worms#new'\npost '/worms' =&gt; 'worms#create'\nget '/worms/:id' =&gt; 'worms#show'\n</code></pre>\n\n<p>Please help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 947, "user_id": 2599738, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/93c5593c949efbf4b008cca40efc4c25?s=128&d=identicon&r=PG", "display_name": "elements", "link": "https://stackoverflow.com/users/2599738/elements"}, "edited": false, "score": 0, "creation_date": 1435737191, "post_id": 31155192, "comment_id": 50320049, "body": "I was intending to only use it chained to another scope.  Thank you for your help; I&#39;m accepting the other answer because it was first (though only by a minute)."}], "tags": [], "owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "is_accepted": false, "score": 4, "last_activity_date": 1435736048, "creation_date": 1435736048, "answer_id": 31155192, "question_id": 31155085, "link": "https://stackoverflow.com/questions/31155085/rails-model-class-method-for-collection-of-objects/31155192#31155192", "title": "Rails model class method for collection of objects", "body": "<p>ActiveRecord collections are usually manipulated using scopes, with the benefits of being able to chain them and let the database do the heavy lifting. If you must manage it in Ruby, you can start with <code>all</code>. </p>\n\n<pre><code>def self.first_order_count\n  all.map(&amp;:first_for_customer?).count(true)\nend\n</code></pre>\n\n<p>What are you trying to achieve with your code though?</p>\n"}, {"comments": [{"owner": {"reputation": 947, "user_id": 2599738, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/93c5593c949efbf4b008cca40efc4c25?s=128&d=identicon&r=PG", "display_name": "elements", "link": "https://stackoverflow.com/users/2599738/elements"}, "edited": false, "score": 0, "creation_date": 1435737048, "post_id": 31155197, "comment_id": 50319997, "body": "Perfect!  That trick is going to make things a lot easier going forward.  I never realized I could call <code>all</code> on a relation and not just on the class itself."}, {"owner": {"reputation": 7553, "user_id": 128977, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dc3ee45902521594d55e2b8e3de5cf8e?s=128&d=identicon&r=PG", "display_name": "DreadPirateShawn", "link": "https://stackoverflow.com/users/128977/dreadpirateshawn"}, "edited": false, "score": 1, "creation_date": 1444708182, "post_id": 31155197, "comment_id": 54003402, "body": "You, sir, are a godsend. I filed <a href=\"https://github.com/rails/rails/issues/21943\" rel=\"nofollow noreferrer\">github.com/rails/rails/issues/21943</a> since this is a misleading documentation issue at best, or a bug at worst."}], "tags": [], "owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "is_accepted": true, "score": 15, "last_activity_date": 1435736070, "creation_date": 1435736070, "answer_id": 31155197, "question_id": 31155085, "link": "https://stackoverflow.com/questions/31155085/rails-model-class-method-for-collection-of-objects/31155197#31155197", "title": "Rails model class method for collection of objects", "body": "<p>In your case, you can use a trick in this case.</p>\n\n<pre><code>def self.first_order_count\n   all.map(&amp;:first_for_customer?).count(true)\nend\n</code></pre>\n\n<p>Will do the trick, without any other problems, this way if you concatenate this method on where clause you still get results from that where, this way you get what you need if you call this method directly on <code>Order</code>.</p>\n"}], "owner": {"reputation": 947, "user_id": 2599738, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/93c5593c949efbf4b008cca40efc4c25?s=128&d=identicon&r=PG", "display_name": "elements", "link": "https://stackoverflow.com/users/2599738/elements"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8620, "favorite_count": 2, "accepted_answer_id": 31155197, "answer_count": 2, "score": 15, "last_activity_date": 1435736070, "creation_date": 1435735707, "question_id": 31155085, "link": "https://stackoverflow.com/questions/31155085/rails-model-class-method-for-collection-of-objects", "title": "Rails model class method for collection of objects", "body": "<p>I'm having trouble writing class methods to use on collections of <code>ActiveRecord</code> objects.  I've run into this issue twice in the last couple of hours, and it seems like a simple problem, so I know I'm missing something, but I haven't been able to find answers elsewhere.</p>\n\n<p>Example:</p>\n\n<pre><code>class Order &lt; ActiveRecord::Base\n\n  belongs_to :customer\n\n  scope :month, -&gt; { where('order_date &gt; ?', DateTime.now.beginning_of_month.utc) }\n\n  def self.first_order_count\n    map(&amp;:first_for_customer?).count(true)\n  end\n\n  def first_for_customer?\n    self == customer.orders.first\n    # this self == bit seems awkward, but that's a separate question...\n  end\n\nend\n</code></pre>\n\n<p>If I call <code>Order.month.first_order_count</code>, I get\n<code>NoMethodError: undefined method 'map' for #&lt;Class:...</code></p>\n\n<p>As far as I know, that's because <code>map</code> can't be called directly on <code>Order</code>, but needs an <code>Enumerable</code> object instead.  If I call <code>Order.year.map(&amp;:first_for_customer?).count(true)</code>, I get the desired result.</p>\n\n<p>What's the right way to write methods to use on a collection of <code>ActiveRecord</code> objects, but not on the class directly?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "sinatra-activerecord"], "comments": [{"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1435743728, "post_id": 31155060, "comment_id": 50324346, "body": "You can do that via Mysql using <code>DELETE FROM table_name WHERE id=3;</code> , if you have direct access to mysql table."}, {"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1435744382, "post_id": 31155060, "comment_id": 50324768, "body": "In Users controller of sinatra framework you can use <code>delete &#39;&#47;:id&#39; do     find_record.destroy     flash[:notice] = &quot;Record deleted&quot;     redirect to(&#39;&#47;&#39;)   end</code>"}], "answers": [{"tags": [], "owner": {"reputation": 4543, "user_id": 650572, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/bA7hy.jpg?s=128&g=1", "display_name": "Rishi", "link": "https://stackoverflow.com/users/650572/rishi"}, "is_accepted": false, "score": 0, "last_activity_date": 1435783008, "creation_date": 1435783008, "answer_id": 31171180, "question_id": 31155060, "link": "https://stackoverflow.com/questions/31155060/tool-to-remove-records-from-mysql-database-table-with-generic-where-filter-param/31171180#31171180", "title": "Tool to remove records from mysql database table with generic where filter parameters", "body": "<p>Do you want to delete the records from your application itself? Or using any external tool/client?  </p>\n\n<p>On Tool part - HeidiSQL can be good candidate for MySQL client. Assuming that you have connection &amp; user permissions on your MySQL database you can delete the records using MySQL queries. </p>\n"}], "owner": {"reputation": 207, "user_id": 2039486, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/0433b8361c39089e68aea3753d90a8ae?s=128&d=identicon&r=PG", "display_name": "joe", "link": "https://stackoverflow.com/users/2039486/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1435783008, "creation_date": 1435735623, "last_edit_date": 1435736631, "question_id": 31155060, "link": "https://stackoverflow.com/questions/31155060/tool-to-remove-records-from-mysql-database-table-with-generic-where-filter-param", "title": "Tool to remove records from mysql database table with generic where filter parameters", "body": "<p>I have a database and the table contains more than 500k records.\nI want to delete some of the users that are expired from the table. Some times I want to delete users based on other different conditions as well.</p>\n\n<p>I have used Mysql for db, Ruby as programming language and Sinatra as its framework.</p>\n\n<p>Is there any tool or gem that can perform delete operation on mysql table based on generic where clause? </p>\n"}, {"tags": ["ruby", "forms", "submit"], "comments": [{"owner": {"reputation": 3427, "user_id": 3604993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1cZQr.png?s=128&g=1", "display_name": "Zoker", "link": "https://stackoverflow.com/users/3604993/zoker"}, "edited": false, "score": 0, "creation_date": 1435745855, "post_id": 31154507, "comment_id": 50325670, "body": "you should paste your codes"}, {"owner": {"reputation": 83, "user_id": 5034822, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10152971279082773/picture?type=large", "display_name": "Luca Luna", "link": "https://stackoverflow.com/users/5034822/luca-luna"}, "reply_to_user": {"reputation": 3427, "user_id": 3604993, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1cZQr.png?s=128&g=1", "display_name": "Zoker", "link": "https://stackoverflow.com/users/3604993/zoker"}, "edited": false, "score": 0, "creation_date": 1436165127, "post_id": 31154507, "comment_id": 50476390, "body": "It is because after opening and closing it there were hidden fields still required. A few lines of code to fix it."}], "owner": {"reputation": 83, "user_id": 5034822, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/10152971279082773/picture?type=large", "display_name": "Luca Luna", "link": "https://stackoverflow.com/users/5034822/luca-luna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1435733882, "creation_date": 1435733882, "question_id": 31154507, "link": "https://stackoverflow.com/questions/31154507/rails-link-to-remove-not-allowing-submit", "title": "Rails link_to_remove not allowing submit", "body": "<p>I am working on a form. I am using link_to_remove which works to show and hide what I want, but after using it the submit button doesn't do anything. Has anyone run into this or something similar?</p>\n\n<p>Thank you for reading!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "solr", "sunspot", "acts-as-paranoid"], "owner": {"reputation": 4297, "user_id": 625151, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d83cf0565b50081c4ef41fa22fdfdbb?s=128&d=identicon&r=PG", "display_name": "delphist", "link": "https://stackoverflow.com/users/625151/delphist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 587, "favorite_count": 2, "answer_count": 0, "score": 5, "last_activity_date": 1484214981, "creation_date": 1435733227, "question_id": 31154314, "link": "https://stackoverflow.com/questions/31154314/how-to-index-deleted-in-acts-as-paranoid-rows-in-sunspot", "title": "How to index deleted in acts_as_paranoid rows in sunspot", "body": "<p>I'm using sunspot and acts_as_paranoid gems in ruby on rails application.</p>\n\n<p>When i'm deleting a record, acts_as_paranoid gem overrides ActiveRecord behaviour not no delete it, but update <code>deleted_at</code> field to not-null value. And by defaults, add to all AR queries <code>WHERE deleted_at IS NULL</code> scipe.</p>\n\n<p>I have a lot of deleted users. And in adminpanel page I need to view and search them.</p>\n\n<p>The problem is that when reindexing <code>User</code> model, sunspot not indexing deleted users at all (adding <code>WHERE deleted_at IS NULL</code> scope by default).</p>\n\n<p>The only chance to index it, is to manually run</p>\n\n<pre><code>User.with_deleted.solr_reindex\n</code></pre>\n\n<p>So, the question is: how I should change my code, that sunspot <strong>ALWAYS</strong> index deleted records in <code>User</code> model?</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  searchable do\n    string  :class_name do\n      self.class.name\n    end\n\n    integer(:model_id) { |user| user.id }\n    integer :community_ids, references: 'Community', multiple: true\n\n   # ...\n  end\n\n  # ...\nend\n</code></pre>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "ruby-on-rails-3", "ms-word"], "comments": [{"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1435730645, "post_id": 31153542, "comment_id": 50316566, "body": "I think better approach is convert HTML to pdf. If you really not needed word then"}, {"owner": {"reputation": 6470, "user_id": 1896986, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/qEG8G.jpg?s=128&g=1", "display_name": "Rajesh Omanakuttan", "link": "https://stackoverflow.com/users/1896986/rajesh-omanakuttan"}, "reply_to_user": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1435731007, "post_id": 31153542, "comment_id": 50316737, "body": "@GaganGami: Yes, it is and I implemented the same. No issues with PDF conversion. But, word is also required.."}, {"owner": {"reputation": 6470, "user_id": 1896986, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/qEG8G.jpg?s=128&g=1", "display_name": "Rajesh Omanakuttan", "link": "https://stackoverflow.com/users/1896986/rajesh-omanakuttan"}, "reply_to_user": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1435733990, "post_id": 31153542, "comment_id": 50318268, "body": "Please tell me why downvoted?"}], "owner": {"reputation": 6470, "user_id": 1896986, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/qEG8G.jpg?s=128&g=1", "display_name": "Rajesh Omanakuttan", "link": "https://stackoverflow.com/users/1896986/rajesh-omanakuttan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 622, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1473619930, "creation_date": 1435730272, "last_edit_date": 1435733966, "question_id": 31153542, "link": "https://stackoverflow.com/questions/31153542/html-to-word-conversion-in-rails", "title": "HTML to Word conversion in Rails", "body": "<p>Rails version: 3.2, Ruby version: 1.9.3</p>\n\n<p>In my Rails app, there is an HTML file which I would like to convert to a WORD format without losing its structure/design. </p>\n\n<p>I have used the <a href=\"https://github.com/karnov/htmltoword\" rel=\"nofollow\">htmltoword</a> gem, but the HTML is not rendered exactly alike in the Word file. It has  design issues. It is not interpreting html elements like <code>table</code>, <code>&lt;ul&gt;</code> and <code>&lt;li&gt;</code> etc. correctly.</p>\n\n<p>I would like to have better suggestions for implementing this feature.\nThank you.</p>\n"}, {"tags": ["python", "ruby", "apache", "cgi", "environment-variables"], "answers": [{"comments": [{"owner": {"reputation": 2537, "user_id": 1596686, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/bb0df9d59647054dda587a38d1612a78?s=128&d=identicon&r=PG", "display_name": "Konstantin", "link": "https://stackoverflow.com/users/1596686/konstantin"}, "edited": false, "score": 0, "creation_date": 1435736076, "post_id": 31153836, "comment_id": 50319477, "body": "Thx, I added the environment variable list. In fact it&#39;s nearly the same as I get when I am logged in with any user name. I will try thos modern technologies too, but I am yet an absolute beginner, I would like to practise the processing of web forms with AJAX and CGI."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1435732330, "last_edit_date": 1435732330, "creation_date": 1435731494, "answer_id": 31153836, "question_id": 31153450, "link": "https://stackoverflow.com/questions/31153450/how-to-configure-apache-2-to-run-a-python-script-from-a-ruby-cgi-app-with-x/31153836#31153836", "title": "How to configure Apache 2 to run a Python script from a Ruby CGI app with %x{}", "body": "<p>When you run an application in a subshell you have to be aware of the environment being set up for that shell and application. The PATH and variables will be nonexistent or very limited which can affect its ability to find libraries. </p>\n\n<p>Write a small CGI that outputs the Apache variables and environment passed to the script, either as a web page or to the log or a file and examine the results. </p>\n\n<p>Also permissions and the user will be whatever the server sets up which is usually very restricted. </p>\n\n<p>Also, seriously consider <em>not</em> using CGI. Instead use something more modern and flexible. Sinatra works nicely with Apache using something like Passenger to glue them together. Sinatra makes it really easy to do web-services, and actually works so well you can often do without a heavyweight server like Apache, especially during the development, test and early production stages. I have an API used in-house that handles a lot of enterprise-critical requests and it just cruises along. </p>\n"}], "owner": {"reputation": 2537, "user_id": 1596686, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/bb0df9d59647054dda587a38d1612a78?s=128&d=identicon&r=PG", "display_name": "Konstantin", "link": "https://stackoverflow.com/users/1596686/konstantin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1440662921, "creation_date": 1435729874, "last_edit_date": 1440662921, "question_id": 31153450, "link": "https://stackoverflow.com/questions/31153450/how-to-configure-apache-2-to-run-a-python-script-from-a-ruby-cgi-app-with-x", "title": "How to configure Apache 2 to run a Python script from a Ruby CGI app with %x{}", "body": "<p>My Ruby CGI app is very simple, I would like to call a Python script, for example <code>youtube-dl</code>, or <code>youtube-upload</code> with <code>%x{youtube-dl --help}</code></p>\n\n<p>For the sake of simplicity, I would like to print only the help page of the <code>youtube-dl</code> Python script. So my Ruby script is also very simple:</p>\n\n<pre><code>#!/usr/bin/ruby\nrequire \"cgi\"\n\ncgi=CGI.new(:accept_charset =&gt; \"UTF-8\")\n\nurl=cgi['url']\n\nputs \"Content-Type: text/plain; charset=\\\"UTF-8\\\"\"\nputs \"Access-Control-Allow-Origin: *\"\nputs\n\nputs url\nputs \"-----------------------------------\"\nputs %x{youtube-dl --help 2&gt;&amp;1}\n</code></pre>\n\n<p>Then I can invoke this CGI app called <code>ytdl</code> with <a href=\"http://example.com/cgi-bin/ytdl?url=a_youtube_url\" rel=\"nofollow\">http://example.com/cgi-bin/ytdl?url=a_youtube_url</a>. Unfortunately I get only a lot of error messages from the Python interpreter which is unable to import some packages, especially site-packages:</p>\n\n<pre><code>Traceback (most recent call last):\n  File \"/usr/bin/youtube-dl\", line 5, in &lt;module&gt;\n    from pkg_resources import load_entry_point\n  File \"/usr/lib/python3.4/site-packages/pkg_resources/__init__.py\", line 36, in &lt;module&gt;\n    import plistlib\n  File \"/usr/lib/python3.4/plistlib.py\", line 65, in &lt;module&gt;\n    from xml.parsers.expat import ParserCreate\n  File \"/usr/lib/python3.4/xml/parsers/expat.py\", line 4, in &lt;module&gt;\n    from pyexpat import *\nImportError: /usr/lib/python3.4/lib-dynload/pyexpat.cpython-34m.so: undefined symbol: XML_SetHashSalt\n</code></pre>\n\n<p>I think I would configure my Apache 2 web server to provide some environment variables for the Python interpereter, where it can find the packages. Unfortunately I have no experience with Python, I only learned Ruby till now. My Apache server runs CGI apps as user <code>daemon</code>, and when I login as <code>daemon</code> I can run the <code>youtube-dl</code> script without error messages.</p>\n\n<p>Apache provide these environment for my CGI apps (printed with <code>puts %x{env}</code>):</p>\n\n<pre><code>UNIQUE_ID=VZN9RyX3N7MAAAs95zsAAAAI\nRUBYOPT=rubygems\nGEM_HOME=/home/XXXXXX/.gem/ruby/2.2.0\nHTTP_USER_AGENT=Opera/9.80 (X11; Linux i686) Presto/2.12.388 Version/12.16\nHTTP_HOST=xx.xxx.xx.xxx\nHTTP_ACCEPT=text/html, application/xml;q=0.9, application/xhtml+xml, image/png, image/webp, image/jpeg, image/gif, image/x-xbitmap, */*;q=0.1\nHTTP_ACCEPT_LANGUAGE=en-US,en;q=0.9\nHTTP_ACCEPT_ENCODING=gzip, deflate\nHTTP_CONNECTION=Keep-Alive\nPATH=/usr/local/sbin:/usr/local/bin:/usr/bin:/usr/bin/site_perl:/usr/bin/vendor_perl:/usr/bin/core_perl:/home/XXXXXX/.gem/ruby/2.2.0/bin:/home/XXXXXX/util\nLD_LIBRARY_PATH=/opt/lampp/lib:/opt/lampp/lib\nSERVER_SIGNATURE=\nSERVER_SOFTWARE=Apache/2.4.9 (Unix) OpenSSL/1.0.1g PHP/5.5.11 mod_perl/2.0.8-dev Perl/v5.16.3\nSERVER_NAME=xx.xxx.xx.xxx\nSERVER_ADDR=xx.xxx.xx.xxx\nSERVER_PORT=80\nREMOTE_ADDR=xx.x.xxx.xxx\nDOCUMENT_ROOT=/opt/lampp/htdocs\nREQUEST_SCHEME=http\nCONTEXT_PREFIX=/cgi-bin/\nCONTEXT_DOCUMENT_ROOT=/opt/lampp/cgi-bin/\nSERVER_ADMIN=you@example.com\nSCRIPT_FILENAME=/opt/lampp/cgi-bin/ytdl\nREMOTE_PORT=37798\nGATEWAY_INTERFACE=CGI/1.1\nSERVER_PROTOCOL=HTTP/1.1\nREQUEST_METHOD=GET\nQUERY_STRING=\nREQUEST_URI=/cgi-bin/ytdl\nSCRIPT_NAME=/cgi-bin/ytdl\n</code></pre>\n\n<p>Meanwhile I realized that when I set the environment variable (either in Apache config httpd.conf with SetEnv directive, or with <code>ENV['PYTHONHOME']=value</code> in my Ruby script)\ncalled PYTHONHOME to an empty string \"\" or \"/usr/lib\" , the error message disappers, and I get another one:</p>\n\n<pre><code>Fatal Python error: Py_Initialize: Unable to get the locale encoding\nImportError: No module named 'encodings'\n</code></pre>\n\n<p>When I set:</p>\n\n<pre><code>ENV['PYTHONHOME']=\"/usr/lib\"\nENV['PYTHONPATH']=\"/usr/lib/python3.4\"\n</code></pre>\n\n<p>I get another error message:</p>\n\n<pre><code>File \"/usr/bin/youtube-dl\", line 5, in &lt;module&gt;\n    from pkg_resources import load_entry_point\nImportError: No module named 'pkg_resources'\n</code></pre>\n\n<p>So my question is, how should I configure my Apache 2 webserver to make Python scripts run and make them callable from other apps?</p>\n"}, {"tags": ["javascript", "css", "ruby-on-rails", "ruby", "pagination"], "comments": [{"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1435736607, "post_id": 31152831, "comment_id": 50319766, "body": "Can you try removing the <code>render</code> inside <code>&lt;div id=&quot;pagination_table&quot;&gt;</code> ? This may not solve all the problems but as per the gem Readme I see that is how it is being done. And which version of rails are you using?"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1435768239, "post_id": 31152831, "comment_id": 50341732, "body": "@VamsiKrishna removing render had no affect :/ I&#39;m using <code>Rails 4.2.0.rc3</code>"}], "answers": [{"comments": [{"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1435823952, "post_id": 31168388, "comment_id": 50363667, "body": "Is everything working after this? I guess this should fix only the horizontal vertical issue. Moreover the gem has no support for Rails 4. Check this issue <a href=\"https://github.com/lingz/alphabetical_paginate/issues/18\" rel=\"nofollow noreferrer\">here</a>"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1435846654, "post_id": 31168388, "comment_id": 50379432, "body": "@VamsiKrishna that explains why I had so much difficult. With my answer though it does make it horizontal, fixes the CSS to look like twitter-bootstrap pagination, and now all the letters are clickable :]"}], "tags": [], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "is_accepted": true, "score": 0, "last_activity_date": 1435773266, "creation_date": 1435773266, "answer_id": 31168388, "question_id": 31152831, "link": "https://stackoverflow.com/questions/31152831/how-to-fix-dysfunctional-pagination/31168388#31168388", "title": "How to fix dysfunctional pagination?", "body": "<p>Added CSS class</p>\n\n<pre><code>  def index\n    @users, @alphaParams = User.alpha_paginate(params[:letter], {:pagination_class =&gt; \"pagination-centered\"}){|user| user.name}\n  end\n</code></pre>\n\n<p>CSS</p>\n\n<pre><code>.pagination-centered {\n  li {\n  display: inline;\n  padding: 6px 12px;\n  background-color: white;\n  border: 1px solid #ddd;\n  margin-left: -1px;\n  a {\n    color: #446CB3;\n  }\n  }\n  li.active {\n    background-color: #446CB3;    \n  }\n}\n</code></pre>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 31168388, "answer_count": 1, "score": 1, "last_activity_date": 1435773266, "creation_date": 1435726694, "last_edit_date": 1435728537, "question_id": 31152831, "link": "https://stackoverflow.com/questions/31152831/how-to-fix-dysfunctional-pagination", "title": "How to fix dysfunctional pagination?", "body": "<p>Something is wrong with this <a href=\"https://github.com/lingz/alphabetical_paginate\" rel=\"nofollow noreferrer\"><code>alphabetical_paginate</code> gem</a> &amp; I can't figure out how to fix it. I'm assuming this is not how it is suppose to look (I added the background color):</p>\n\n<p><img src=\"https://i.stack.imgur.com/xGFGq.png\" alt=\"enter image description here\"></p>\n\n<p>I'm assuming the letters are suppose to show horizontally:</p>\n\n<pre><code>All A P\n</code></pre>\n\n<p>And I know something is wrong because whatever letter(s) come after A are unclickable. A user can only click \"All\" or \"A\", I only have two users in this pagination, let's call them \"Anthony\" &amp; \"Paul\".</p>\n\n<p><strong>controller</strong></p>\n\n<pre><code>class UsersController &lt; ApplicationController\n\n  def index\n    @users, @alphaParams = User.all.alpha_paginate(params[:letter]){|user| user.name}\n  end\n\n  ...\nend\n</code></pre>\n\n<p><strong>users/index</strong></p>\n\n<pre><code>&lt;%= alphabetical_paginate @alphaParams %&gt;\n\n&lt;div id=\"pagination_table\"&gt;\n  &lt;%= render @users %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>assets.rb</strong></p>\n\n<pre><code>Rails.application.config.assets.version = '1.0'\n\nRails.application.config.assets.precompile += %w( stat.js )\n\nRails.application.config.assets.precompile += %w( habit.js )\n\nRails.application.config.assets.precompile += %w( alphabetical_paginate.js )\n</code></pre>\n\n<p>What do you think the cause is? Please don't hesitate to ask for further code or clarification.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 5065277, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a2ef7f99ff6b9dd6c3cd4855f2c548e7?s=128&d=identicon&r=PG&f=1", "display_name": "user5065277", "link": "https://stackoverflow.com/users/5065277/user5065277"}, "edited": false, "score": 0, "creation_date": 1435724879, "post_id": 31152415, "comment_id": 50314650, "body": "thank you for response but i edited above code but i am getting unknown attribute: author error in line @book = Book.new(books_params)"}], "tags": [], "owner": {"reputation": 9626, "user_id": 1154722, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/NLjAF.jpg?s=128&g=1", "display_name": "Huy", "link": "https://stackoverflow.com/users/1154722/huy"}, "is_accepted": false, "score": 1, "last_activity_date": 1435723938, "creation_date": 1435723938, "answer_id": 31152415, "question_id": 31152384, "link": "https://stackoverflow.com/questions/31152384/unpermitted-parameters-author/31152415#31152415", "title": "Unpermitted parameters: author", "body": "<p>That is because your <code>books_params</code> has <code>author_attributes</code> when it should be <code>author</code> based on your parameters.</p>\n\n<p>This should work:</p>\n\n<pre><code>def books_params\n  params.require(:book).permit(:book_name, :price, :author =&gt; [:author_name, :title, :publisher])\nend \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2982, "user_id": 3176055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c976138fc7bd60baa57b22e334816a44?s=128&d=identicon&r=PG&f=1", "display_name": "jon snow", "link": "https://stackoverflow.com/users/3176055/jon-snow"}, "is_accepted": false, "score": 0, "last_activity_date": 1435725379, "creation_date": 1435725379, "answer_id": 31152622, "question_id": 31152384, "link": "https://stackoverflow.com/questions/31152384/unpermitted-parameters-author/31152622#31152622", "title": "Unpermitted parameters: author", "body": "<p>Change <code>authore</code> to <code>author_attributes</code> in view file, like this.</p>\n\n<pre><code> &lt;%= f.fields_for :author_attributes do |b| %&gt;\n  &lt;p&gt;\n   &lt;%= b.label :author_name%&gt;&lt;br /&gt;\n   &lt;%= b.text_field :author_name %&gt;\n  &lt;/p&gt;\n</code></pre>\n\n<p>Also change respectively in controller also. I think, this much is enough.</p>\n\n<pre><code>def create\n  @book = Book.new(books_params) \n  @book.save \n  redirect_to root_url\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 5065277, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a2ef7f99ff6b9dd6c3cd4855f2c548e7?s=128&d=identicon&r=PG&f=1", "display_name": "user5065277", "link": "https://stackoverflow.com/users/5065277/user5065277"}, "edited": false, "score": 0, "creation_date": 1435834780, "post_id": 31152746, "comment_id": 50370918, "body": "thank you ,but author tables vales are not storing into author table , how to store author table values along with book table values"}], "tags": [], "owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1435841910, "last_edit_date": 1435841910, "creation_date": 1435726241, "answer_id": 31152746, "question_id": 31152384, "link": "https://stackoverflow.com/questions/31152384/unpermitted-parameters-author/31152746#31152746", "title": "Unpermitted parameters: author", "body": "<p>I will Suggested you just <code>debug</code> your code </p>\n\n<pre><code>def books_params\nbyebug\n  params.require(:book).permit(:book_name, :price, :author =&gt; [:author_name, :title, :publisher])\nend \n</code></pre>\n\n<p><strong>1:</strong>  check your <strong>requested params</strong></p>\n\n<p><strong>2:</strong>  kindly check <code>params.require(:book)</code></p>\n\n<p>Requested parameter would be like</p>\n\n<pre><code>  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"8sxeOVMVJucl5nN+kMpSaT1cB1yDPnk5gfKElWPiT5k=\", \"book\"=&gt;{\"book_name\"=&gt;\"life \", \"price\"=&gt;\"20\", \"author_\"=&gt;{\"author_name\"=&gt;\"swamy\", \"title\"=&gt;\"LIFE\", \"publisher\"=&gt;\"cta\"}}, \"commit\"=&gt;\"Submit\"}\n</code></pre>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html\" rel=\"nofollow\"> check with this link NestedAttributes</a></p>\n\n<p>Your controller would be this </p>\n\n<pre><code>class BooksController &lt; ApplicationController\n  def new\n  end\n\n  def create\n    @author = Author.create(params[:book])\n    redirect_to root_url\n  end\n\n  private\n\n  def books_params\n    params.require(:book).permit(:book_name, :price,:author_attributes =&gt; [:author_name, :title, :publisher])\n  end\nend \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 43, "user_id": 5065277, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a2ef7f99ff6b9dd6c3cd4855f2c548e7?s=128&d=identicon&r=PG&f=1", "display_name": "user5065277", "link": "https://stackoverflow.com/users/5065277/user5065277"}, "edited": false, "score": 0, "creation_date": 1435814752, "post_id": 31154831, "comment_id": 50359296, "body": "Thank you sir,but only book values are stored in database but author table have nil value ,can u please explain how to  store data to author table after checking author already existing or not"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 0, "last_activity_date": 1435734960, "creation_date": 1435734960, "answer_id": 31154831, "question_id": 31152384, "link": "https://stackoverflow.com/questions/31152384/unpermitted-parameters-author/31154831#31154831", "title": "Unpermitted parameters: author", "body": "<p>Your code is full of errors. Follow my changes.</p>\n\n<pre><code>#book.rb\nclass Book &lt; ActiveRecord::Base\n  belongs_to :author\n  accepts_nested_attributes_for :author\nend\n\n#books_controller.rb\ndef new\n@book = Book.new\n@book.build_author\nend\n\ndef create\n@book = Book.new(books_params)\n if @book.save \n   redirect_to root_url\n end\nend\n</code></pre>\n\n<p>Finally in your <strong><em>form</em></strong> change <code>&lt;%= form_for Book.new  do |f| %&gt;</code> to <code>&lt;%= form_for @book  do |f| %&gt;</code></p>\n"}], "owner": {"reputation": 43, "user_id": 5065277, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/a2ef7f99ff6b9dd6c3cd4855f2c548e7?s=128&d=identicon&r=PG&f=1", "display_name": "user5065277", "link": "https://stackoverflow.com/users/5065277/user5065277"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 307, "favorite_count": 0, "accepted_answer_id": 31154831, "answer_count": 4, "score": 1, "last_activity_date": 1435841910, "creation_date": 1435723646, "question_id": 31152384, "link": "https://stackoverflow.com/questions/31152384/unpermitted-parameters-author", "title": "Unpermitted parameters: author", "body": "<p>My requirements \nBasically I'm adding books to a database, and I want to store the Author in a separate table. So I have a table called authors which is referenced by the table books.</p>\n\n<p>I want to create a rails form for adding a book, and I'd like it to be just a simple form for Author, Title, Publisher etc, and if it finds the author already in the authors table then it should just reference that record, and if it isn't in the authors table then it should add a new record and reference it.</p>\n\n<p>while storing values i am getting  in log file \nUnpermitted parameters: author</p>\n\n<pre><code>Processing by BooksController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"8sxeOVMVJucl5nN+kMpSaT1cB1yDPnk5gfKElWPiT5k=\", \"book\"=&gt;{\"book_name\"=&gt;\"life \", \"price\"=&gt;\"20\", \"author\"=&gt;{\"author_name\"=&gt;\"swamy\", \"title\"=&gt;\"LIFE\", \"publisher\"=&gt;\"cta\"}}, \"commit\"=&gt;\"Submit\"}\n\nswamy\nLIFE\ncta\n  Author Load (1.6ms)  SELECT  \"authors\".* FROM \"authors\"  WHERE \"authors\".\"author_name\" = 'swamy' AND \"authors\".\"title\" = 'LIFE' AND \"authors\".\"publisher\" = 'cta' LIMIT 1\n   (0.6ms)  BEGIN\n  SQL (25.2ms)  INSERT INTO \"authors\" (\"author_name\", \"created_at\", \"publisher\", \"title\", \"updated_at\") VALUES ($1, $2, $3, $4, $5) RETURNING \"id\"  [[\"author_name\", \"swamy\"], [\"created_at\", \"2015-07-01 03:53:22.712401\"], [\"publisher\", \"cta\"], [\"title\", \"LIFE\"], [\"updated_at\", \"2015-07-01 03:53:22.712401\"]]\n   (16.8ms)  COMMIT\nUnpermitted parameters: author\n   (0.7ms)  BEGIN\n  SQL (1.0ms)  INSERT INTO \"books\" (\"Author_id\", \"book_name\", \"created_at\", \"price\", \"updated_at\") VALUES ($1, $2, $3, $4, $5) RETURNING \"id\"  [[\"Author_id\", 8], [\"book_name\", \"life \"], [\"created_at\", \"2015-07-01 03:53:22.865106\"], [\"price\", 20], [\"updated_at\", \"2015-07-01 03:53:22.865106\"]]\n   (22.4ms)  COMMIT\n</code></pre>\n\n<p>my code\nbooks_Controller</p>\n\n<pre><code>class BooksController &lt; ApplicationController\n  def new\n\n  end\n def create\n\n  @a=params[:author_name]\n  puts @a\n  b=params[:book][:author][:author_name]\n  puts b\n#   @c = @b.authors\n#   @d = @c.author_name\n   c=params[:book][:author][:title]\n        d=params[:book][:author][:publisher]\n\n  puts c\n   puts d\n   @author = Author.find_or_create_by(author_name: b,title: c, publisher: d)\n   @book = Book.new(books_params)\n   @book.Author = @author  \n   @book.save \n  redirect_to root_url\n\n end\nprivate\n\n  def books_params\n     params.require(:book).permit(:book_name, :price,:author_attributes =&gt; [:author_name, :title, :publisher])\nend \nend \n</code></pre>\n\n<p>model</p>\n\n<pre><code>class Author &lt; ActiveRecord::Base\n\nend\n\nclass Book &lt; ActiveRecord::Base\n  belongs_to :Author\n  accepts_nested_attributes_for :Author\n # def author_name=(author_name)\n  #  self.author = Author.find_or_create_by_name author_name\n  #end\nend\n</code></pre>\n\n<p>view\nbooks.html.erb</p>\n\n<pre><code>&lt;%= form_for Book.new  do |f| %&gt;\n\n  &lt;p&gt;\n    &lt;%= f.label :book_name %&gt;&lt;br /&gt;\n    &lt;%= f.text_field :book_name %&gt;\n  &lt;/p&gt;\n  &lt;p&gt;\n    &lt;%= f.label :price %&gt;&lt;br /&gt;\n    &lt;%= f.text_field :price %&gt;\n  &lt;/p&gt;\n\n  &lt;%= f.fields_for :author do |b| %&gt;\n     &lt;p&gt;\n    &lt;%= b.label :author_name%&gt;&lt;br /&gt;\n    &lt;%= b.text_field :author_name %&gt;\n  &lt;/p&gt;\n&lt;p&gt;\n    &lt;%= b.label :title%&gt;&lt;br /&gt;\n    &lt;%= b.text_field :title %&gt;\n  &lt;/p&gt;\n&lt;p&gt;\n    &lt;%= b.label :publisher%&gt;&lt;br /&gt;\n    &lt;%= b.text_field :publisher%&gt;\n  &lt;/p&gt;\n\n  &lt;% end %&gt;\n  &lt;p&gt;&lt;%= f.submit \"Submit\" %&gt;&lt;/p&gt;\n&lt;% end %&gt;\n~         \n</code></pre>\n\n<p>Hi sir i am new to rails i know it looks simple but i unable it find solution</p>\n\n<p>~<br>\n~         </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ajax", "ruby-on-rails-4", "model-view-controller"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1435726169, "post_id": 31152339, "comment_id": 50315049, "body": "I think you might get better answers if you describe what is you are actually trying to do - are you trying to add a view counter? Or provide some form of live updates? Try to describe it from users standpoint."}, {"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1435727544, "post_id": 31152339, "comment_id": 50315452, "body": "@AmitPal : Question 2 and 3 are confusing, are you thinking of either of them or both? If you refresh the page periodically every 10 seconds then updating a particular value using ajax doesn&#39;t make sense. Also, you can not update <code>&lt;%= @post.value %&gt;</code>&#39;s value on view, you can update the HTML fragment where that value is rendered on page. Is that what you&#39;re trying to say? am I missing something?"}, {"owner": {"reputation": 9052, "user_id": 834239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/smpej.jpg?s=128&g=1", "display_name": "Amit Pal", "link": "https://stackoverflow.com/users/834239/amit-pal"}, "reply_to_user": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 0, "creation_date": 1435728090, "post_id": 31152339, "comment_id": 50315622, "body": "@Surya  Yes, I am thinking one of them or any approach which is better.  Yes you are correct about <code>HTML</code> rendering.  I haven&#39;t think about that <code>Ajax</code> is not going to work in this case.  Ultimately I am looking for a way thorugh which I can updates the <code>post.value</code> periodically (as per conunter) using given <code>utility</code> class method till user is visiting the page.   Let&#39;s say @ first visit : counter start and <code>@post.value</code> = 3 update the value in database and render the new value in HTML view after refreshing the page automatically Wait for 10 seconds and continue the above proecss"}], "answers": [{"tags": [], "owner": {"reputation": 489, "user_id": 1303501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d44af6531fbd70f0c0df5dce8b83f72?s=128&d=identicon&r=PG", "display_name": "Glupo", "link": "https://stackoverflow.com/users/1303501/glupo"}, "is_accepted": false, "score": 1, "last_activity_date": 1435833496, "creation_date": 1435833496, "answer_id": 31182294, "question_id": 31152339, "link": "https://stackoverflow.com/questions/31152339/how-to-periodically-fetch-update-value-in-rails/31182294#31182294", "title": "How to periodically fetch/update value in rails?", "body": "<p>I would say the easiest approach doing it would be using <a href=\"http://edgeapi.rubyonrails.org/classes/ActionController/Live.html\" rel=\"nofollow\">ActionController::Live</a>. Using it you'll be able to send SSE(Server Sent Event) to your client while having js script there to catch and update your <code>&lt;%= @post.value %&gt;</code>. Here's a <a href=\"http://tenderlovemaking.com/2012/07/30/is-it-live.html\" rel=\"nofollow\">pretty nice manual</a> on using it.</p>\n\n<p>Still from my point of view the most appropriate way to implement things you want to do will be using something like <a href=\"http://faye.jcoglan.com/\" rel=\"nofollow\">Faye</a>. It is a publish/subscribe messaging system which will allow you to update your client with new data as soon as it appears, e.g., you can set an <code>after_save</code> in your model and publish an update to all subscribed clients. And of course there is a gem also called <a href=\"https://github.com/faye/faye\" rel=\"nofollow\">faye</a> to wrap its usage.</p>\n"}, {"tags": [], "owner": {"reputation": 2417, "user_id": 343495, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/823c21aefa18ab5a917aea66cc3c0519?s=128&d=identicon&r=PG", "display_name": "Drew", "link": "https://stackoverflow.com/users/343495/drew"}, "is_accepted": false, "score": 2, "last_activity_date": 1436322292, "last_edit_date": 1436322292, "creation_date": 1436321981, "answer_id": 31282453, "question_id": 31152339, "link": "https://stackoverflow.com/questions/31152339/how-to-periodically-fetch-update-value-in-rails/31282453#31282453", "title": "How to periodically fetch/update value in rails?", "body": "<p>I would go with <a href=\"https://www.firebase.com/\" rel=\"nofollow\">Firebase</a> as opposed to polling the server. </p>\n\n<p>However, if you're wanting to poll the server periodically, I would just have a JavaScript method which executes every 10 seconds, or at whatever interval you'd like, and fetches whatever data you'd like asynchronously and subsequently updates the DOM. </p>\n\n<p>Also, <a href=\"https://github.com/oscardelben/firebase-ruby\" rel=\"nofollow\">ruby wrapper for firebase api</a>, in case that may be of interest</p>\n"}], "owner": {"reputation": 9052, "user_id": 834239, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/smpej.jpg?s=128&g=1", "display_name": "Amit Pal", "link": "https://stackoverflow.com/users/834239/amit-pal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1469, "favorite_count": 2, "answer_count": 2, "score": 10, "last_activity_date": 1436322292, "creation_date": 1435723332, "last_edit_date": 1435728166, "question_id": 31152339, "link": "https://stackoverflow.com/questions/31152339/how-to-periodically-fetch-update-value-in-rails", "title": "How to periodically fetch/update value in rails?", "body": "<p>Let's take a scenario:</p>\n\n<pre><code>counter 10 seconds\n</code></pre>\n\n<ul>\n<li>User visited <code>show.html.erb</code> page</li>\n<li><code>show.html.erb</code> fetch the value from <code>database</code> using <code>&lt;%= @post.value %&gt;</code>.</li>\n<li>Counter started and each iteration of counter is for <code>10 seconds</code>.</li>\n<li>After every <code>10 seconds</code> I wanted to change the <code>@post.value</code> using <code>utility</code> class.</li>\n<li>update the <code>@post.value</code> in database.</li>\n<li>Refresh the <code>show.html.erb</code> automatically and <code>&lt;%= @post.value %&gt;</code> will show the updated value </li>\n<li>Above process will be run in loop until user move to other pages.</li>\n</ul>\n\n<p>If I have to simplify the problem in code then it would like this:</p>\n\n<h1>View Page</h1>\n\n<pre><code>&lt;%= @post.value %&gt;\n&lt;%= @post.name %&gt;\n</code></pre>\n\n<h1>Controller Method</h1>\n\n<pre><code>def show\n @post = Post.find(params[:id])\nend\n\ndef update\n....   #It's empty right now\nend\n\ndef fetching_value_from_PostUpdate(current_value)\n .. # Now I need to update the value in database\nend\n</code></pre>\n\n<h1>Utility class</h1>\n\n<p>I want to update the <code>post.value</code> on the basis of method written in this class. Pseudo code:</p>\n\n<pre><code>class PostUpdate\n @@instance_variable   \n\n def initialize(post_value)\n   @@instance_variable = Marshal.load(Marshal.dump(post_value))\n end\n\n  #Method required to calculate the value\ndef update_data_in_database\n ...\nreturn data\nend\n</code></pre>\n\n<p>Questions</p>\n\n<ul>\n<li>Where do I have to put the counter? client side or server side? I don't want to use <code>background jobs</code> in rails.</li>\n<li>What changes do I need to make in <code>show</code> method so that after every interval page will refresh automatically and pass the updated value in <code>@post.value</code>?</li>\n</ul>\n\n<p>Thanks for your help!</p>\n"}, {"tags": ["java", "ruby", "recaptcha", "public-key-encryption"], "answers": [{"comments": [{"owner": {"reputation": 6361, "user_id": 540887, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0c05d5d965d23a7a37de023f48ba51aa?s=128&d=identicon&r=PG", "display_name": "Muntasim", "link": "https://stackoverflow.com/users/540887/muntasim"}, "edited": false, "score": 0, "creation_date": 1452532770, "post_id": 31152577, "comment_id": 57200727, "body": "does private_key mean site_secret ?  Could you please provide a complete example including view and controller code"}, {"owner": {"reputation": 4250, "user_id": 129798, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/5cc165c5b9f18bfb64faddb021c82172?s=128&d=identicon&r=PG", "display_name": "Brendon Muir", "link": "https://stackoverflow.com/users/129798/brendon-muir"}, "reply_to_user": {"reputation": 6361, "user_id": 540887, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0c05d5d965d23a7a37de023f48ba51aa?s=128&d=identicon&r=PG", "display_name": "Muntasim", "link": "https://stackoverflow.com/users/540887/muntasim"}, "edited": false, "score": 1, "creation_date": 1452586091, "post_id": 31152577, "comment_id": 57222625, "body": "Hi there, the <code>private_key</code> is the key from google that they give you. I can&#39;t remember the terminology off the top of my head. This solution has been implemented in the recaptcha gem, so take a look at that for implementation guidelines. This answer here answers the question that was how to implement the java code in ruby."}, {"owner": {"reputation": 6361, "user_id": 540887, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/0c05d5d965d23a7a37de023f48ba51aa?s=128&d=identicon&r=PG", "display_name": "Muntasim", "link": "https://stackoverflow.com/users/540887/muntasim"}, "edited": false, "score": 0, "creation_date": 1452587353, "post_id": 31152577, "comment_id": 57223257, "body": "Thanks, I was able to implement that without <code>recaptcha</code> gem"}], "tags": [], "owner": {"reputation": 4250, "user_id": 129798, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/5cc165c5b9f18bfb64faddb021c82172?s=128&d=identicon&r=PG", "display_name": "Brendon Muir", "link": "https://stackoverflow.com/users/129798/brendon-muir"}, "is_accepted": true, "score": 1, "last_activity_date": 1435786170, "last_edit_date": 1435786170, "creation_date": 1435725050, "answer_id": 31152577, "question_id": 31152186, "link": "https://stackoverflow.com/questions/31152186/recaptcha-stoken-generation-convert-from-java-to-ruby/31152577#31152577", "title": "Recaptcha stoken generation (convert from Java to Ruby)", "body": "<p>Turns out I was close. I needed to <code>digest</code> not <code>hexdigest</code> the private key:</p>\n\n<pre><code>private_key_digest = Digest::SHA1.digest(private_key)[0...16]\n</code></pre>\n\n<p>So the final code is:</p>\n\n<pre><code>stoken_json = hash_to_json({'session_id' =&gt; SecureRandom.uuid, 'ts_ms' =&gt; (Time.now.to_f * 1000).to_i})\ncipher = OpenSSL::Cipher::AES128.new(:ECB)\nprivate_key_digest = Digest::SHA1.digest(private_key)[0...16]\n\ncipher.encrypt\ncipher.key = private_key_digest\nencrypted_stoken = cipher.update(stoken_json) &lt;&lt; cipher.final\nencoded_stoken = Base64.urlsafe_encode64(encrypted_stoken).gsub(/\\=+\\Z/, '')\n</code></pre>\n\n<p>There didn't seem to be a built-in way to strip the padding from the base64 string, thus the <code>.gsub</code> at the end.</p>\n\n<p>I also needed the timestamp in milliseconds so that part has been modified too.</p>\n\n<p>In the <a href=\"https://github.com/ambethia/recaptcha/\" rel=\"nofollow\">recaptcha</a> gem there is a method <code>hash_to_json</code> that I'm using, otherwise I suspect you'd use the JSON gem.</p>\n"}], "owner": {"reputation": 4250, "user_id": 129798, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/5cc165c5b9f18bfb64faddb021c82172?s=128&d=identicon&r=PG", "display_name": "Brendon Muir", "link": "https://stackoverflow.com/users/129798/brendon-muir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 319, "favorite_count": 2, "accepted_answer_id": 31152577, "answer_count": 1, "score": 2, "last_activity_date": 1435786170, "creation_date": 1435722264, "last_edit_date": 1435785785, "question_id": 31152186, "link": "https://stackoverflow.com/questions/31152186/recaptcha-stoken-generation-convert-from-java-to-ruby", "title": "Recaptcha stoken generation (convert from Java to Ruby)", "body": "<p>Google have provided the following example code showing how to generate a secure token for their second version of Recaptcha:</p>\n\n<pre><code>public class STokenUtils {\n  private static final String CIPHER_INSTANCE_NAME = \"AES/ECB/PKCS5Padding\";\n\n  public static final String createSToken(String siteSecret) {\n    String sessionId = UUID.randomUUID().toString();\n    String jsonToken = createJsonToken(sessionId);\n    return encryptAes(jsonToken, siteSecret);\n  }\n\n  private static final String createJsonToken(String sessionId) {\n    JsonObject obj = new JsonObject();\n    obj.addProperty(\"session_id\", sessionId);\n    obj.addProperty(\"ts_ms\", System.currentTimeMillis());\n    return new Gson().toJson(obj);\n  }\n\n  private static String encryptAes(String input, String siteSecret) {\n    try {\n      SecretKeySpec secretKey = getKey(siteSecret);\n      Cipher cipher = Cipher.getInstance(CIPHER_INSTANCE_NAME);\n      cipher.init(Cipher.ENCRYPT_MODE, secretKey);\n      return BaseEncoding.base64Url().omitPadding().encode(cipher.doFinal(input.getBytes(\"UTF-8\")));\n    } catch (Exception e) {\n      e.printStackTrace();\n    }\n    return null;\n  }\n\n  private static String decryptAes(String input, String key) throws Exception {\n    SecretKeySpec secretKey = getKey(key);\n    Cipher cipher = Cipher.getInstance(CIPHER_INSTANCE_NAME);\n    cipher.init(Cipher.DECRYPT_MODE, secretKey);\n    return new String(cipher.doFinal(\n        BaseEncoding.base64Url().omitPadding().decode(input)), \"UTF-8\");\n  }\n\n  private static SecretKeySpec getKey(String siteSecret){\n    try {\n      byte[] key = siteSecret.getBytes(\"UTF-8\");\n      key = Arrays.copyOf(MessageDigest.getInstance(\"SHA\").digest(key), 16);\n      return new SecretKeySpec(key, \"AES\");\n    } catch (NoSuchAlgorithmException | UnsupportedEncodingException e) {\n      e.printStackTrace();\n    }\n    return null;\n  }\n}\n</code></pre>\n\n<p>The full code can be found at: <a href=\"https://github.com/google/recaptcha-java\" rel=\"nofollow\">https://github.com/google/recaptcha-java</a></p>\n\n<p>I'm wanting to generate this token in Ruby 2.1+ and have got this far but it outputs incorrect data. I'm trying to slowly debug it, but in the meantime I'm wondering if anyone can see any obvious flaws in my process?</p>\n\n<pre><code>      stoken_json = hash_to_json({'session_id' =&gt; SecureRandom.uuid, 'ts_ms' =&gt; Time.now.to_i})\n      cipher = OpenSSL::Cipher::AES128.new(:ECB)\n      private_key_digest = Digest::SHA1.hexdigest(private_key)[0...16]    \n\n      cipher.encrypt\n      cipher.key = private_key_digest\n      encrypted_stoken = cipher.update(stoken_json) &lt;&lt; cipher.final\n      encoded_stoken = Base64.urlsafe_encode64(encrypted_stoken).gsub(/\\=+\\Z/, '')\n</code></pre>\n"}, {"tags": ["html", "ruby", "post", "text", "sinatra"], "comments": [{"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1435729907, "post_id": 31152095, "comment_id": 50316261, "body": "Is it a editable html table or a table with forms in it? Can you show the table html and Sinatra table generator code please?"}, {"owner": {"reputation": 87, "user_id": 3255948, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b8ad45508f231ce3e4b567bb51f933fb?s=128&d=identicon&r=PG&f=1", "display_name": "aeipownu", "link": "https://stackoverflow.com/users/3255948/aeipownu"}, "reply_to_user": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1435774646, "post_id": 31152095, "comment_id": 50345279, "body": "I&#39;ve updated my post."}, {"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1435782481, "post_id": 31152095, "comment_id": 50349804, "body": "How is it submitted?"}, {"owner": {"reputation": 87, "user_id": 3255948, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b8ad45508f231ce3e4b567bb51f933fb?s=128&d=identicon&r=PG&f=1", "display_name": "aeipownu", "link": "https://stackoverflow.com/users/3255948/aeipownu"}, "reply_to_user": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1435784943, "post_id": 31152095, "comment_id": 50351173, "body": "I&#39;m going to delete this post. this one is outdated. <a href=\"http://stackoverflow.com/questions/31171182/save-all-user-entries-from-html-text-built-off-a-loop-using-ruby-and-sinatra\" title=\"save all user entries from html text built off a loop using ruby and sinatra\">stackoverflow.com/questions/31171182/&hellip;</a>."}], "owner": {"reputation": 87, "user_id": 3255948, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/b8ad45508f231ce3e4b567bb51f933fb?s=128&d=identicon&r=PG&f=1", "display_name": "aeipownu", "link": "https://stackoverflow.com/users/3255948/aeipownu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "closed_date": 1436116299, "answer_count": 0, "score": 1, "last_activity_date": 1435774638, "creation_date": 1435721584, "last_edit_date": 1435774638, "question_id": 31152095, "link": "https://stackoverflow.com/questions/31152095/save-html-value-of-all-text-fields-as-a-ruby-array-using-sinatra", "closed_reason": "Duplicate", "title": "Save html value of all text fields as a Ruby array using Sinatra", "body": "<p>I am creating a webapp that outputs a table and empty columns. The user enters information into the columns then I want to save those entries and re display the entire table including the information the user entered. How can I save all entries in the text field once the user hits submit? The cells are created using a loop so the same variable will be used over and over again.</p>\n\n<p>I tried searching through stack overflow and google and couldn't figure out the answer to my problem. I'm new to sinatra.</p>\n\n<pre><code>&lt;% events.each do |event| %&gt;\n  &lt;% row_of_data = [ ] %&gt;\n  &lt;tr&gt;\n  &lt;% event = event.first(14) %&gt;\n  &lt;% event.each do |key, value| %&gt;\n    &lt;% row_of_data &lt;&lt; value %&gt;\n    &lt;td&gt;\n    &lt;%= value %&gt;\n    &lt;/td&gt;\n  &lt;% end %&gt;\n    &lt;td&gt;&lt;input type=\"text\" name=\"event_description\"&gt;&lt;/td&gt;\n    &lt;% row_of_data &lt;&lt; params[\"event_description\"] %&gt;\n    &lt;td&gt;&lt;input type=\"text\" name=\"event_type\"&gt;\n    &lt;% row_of_data &lt;&lt; params['event_type'] %&gt;\n    &lt;td&gt;&lt;input type=\"text\" name=\"event_class\"&gt;\n    &lt;% row_of_data &lt;&lt; params['event_class'] %&gt;\n    &lt;td&gt;&lt;input type=\"text\" name=\"issue_expert\"&gt;&lt;/td&gt;\n    &lt;% row_of_data &lt;&lt; params['issue_expert'] %&gt;\n  &lt;/tr&gt;\n</code></pre>\n\n<p>row_of_data is getting null values for everything that is is in the html text box's. I understand why this is happening because this is running in the GET method and therefore when it is saving this data it's before the user has entered data. How can I get the values inside of all the html boxes after the user has entered into the boxes so I can use those values in my POST method? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "asset-pipeline"], "answers": [{"tags": [], "owner": {"reputation": 222, "user_id": 3081249, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a0a29fdeeb41917a066607e0f8fd1b61?s=128&d=identicon&r=PG&f=1", "display_name": "Misha Prasolov", "link": "https://stackoverflow.com/users/3081249/misha-prasolov"}, "is_accepted": true, "score": 0, "last_activity_date": 1435721910, "creation_date": 1435721910, "answer_id": 31152137, "question_id": 31152049, "link": "https://stackoverflow.com/questions/31152049/rails-production-assets-precompile-but-appear-blank-in-the-browser/31152137#31152137", "title": "Rails production assets precompile, but appear blank in the browser", "body": "<p>I set <code>config.serve_static_files = true</code> in config/environments/production.rb and that fixed it. I'll probably have to fiddle with that to get it to work with what will likely be an NGINX server later, but it works locally.</p>\n"}, {"comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 0, "creation_date": 1547022380, "post_id": 54105615, "comment_id": 95043922, "body": "Use url tag to put your url as per SO policy"}], "tags": [], "owner": {"reputation": 11, "user_id": 10307408, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e50efdf80b9901da746b2770c721733?s=128&d=identicon&r=PG&f=1", "display_name": "Zapaf", "link": "https://stackoverflow.com/users/10307408/zapaf"}, "is_accepted": false, "score": 1, "last_activity_date": 1547023323, "last_edit_date": 1547023323, "creation_date": 1547021220, "answer_id": 54105615, "question_id": 31152049, "link": "https://stackoverflow.com/questions/31152049/rails-production-assets-precompile-but-appear-blank-in-the-browser/54105615#54105615", "title": "Rails production assets precompile, but appear blank in the browser", "body": "<p>for future googlers - \nnowadays 'serve_static_files' doesnt work. this got changed to:\n<code>config.public_file_server.enabled = true</code>\nfor more help see the guide: <a href=\"https://guides.rubyonrails.org/configuring.html\" rel=\"nofollow noreferrer\">here</a></p>\n"}], "owner": {"reputation": 222, "user_id": 3081249, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a0a29fdeeb41917a066607e0f8fd1b61?s=128&d=identicon&r=PG&f=1", "display_name": "Misha Prasolov", "link": "https://stackoverflow.com/users/3081249/misha-prasolov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "accepted_answer_id": 31152137, "answer_count": 2, "score": 2, "last_activity_date": 1547023323, "creation_date": 1435721185, "question_id": 31152049, "link": "https://stackoverflow.com/questions/31152049/rails-production-assets-precompile-but-appear-blank-in-the-browser", "title": "Rails production assets precompile, but appear blank in the browser", "body": "<p>The Sass and JS files all get compiled correctly when I <code>rake assets:precompile</code> for production, I can see them in the public/assets folder. <em>However when I try to run the app and view on a web browser it comes up as a 404.</em> The filenames match the compiled files in the public/assets folder. Everything works fine on Dev, just like all of the other SO questions I came up with.</p>\n\n<p><img src=\"https://i.stack.imgur.com/G1r1i.png\" alt=\"404 Error\"></p>\n\n<p>This is my original <strong>application.scss</strong></p>\n\n<pre><code>@import 'materialize/components/_color';\n@import 'materialize/components/variables';\n@import 'materialize';\n@import url(https://fonts.googleapis.com/icon?family=Material+Icons);\n\n.icon-block {\n  padding: 0 15px;\n}\n\n.icon-block .material-icons {\n  font-size: inherit;\n}\n</code></pre>\n\n<p>and original <strong>application.js</strong></p>\n\n<pre><code>//= require jquery\n//= require jquery_ujs\n//= require turbolinks\n//= require materialize-sprockets\n//= require_tree .\n</code></pre>\n\n<p>I'm on Windows for development, deploying to a Ubuntu server for production. New to Rails, but I want to do it right!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "edited": false, "score": 0, "creation_date": 1435724149, "post_id": 31151999, "comment_id": 50314446, "body": "Are you asking why the block has no parameters? Like <code>5.times { puts &#39;hello&#39;}</code>?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1435731209, "post_id": 31151999, "comment_id": 50316831, "body": "Your question is not clear. One the one hand, you seem to be wondering the syntax of block. But on the other, you seem to understand that, and are asking when a block is evaluated. And if you want to ask a general Ruby question, you should not use such specific example, and you should not have tagged it with nokogiri. Please edit the question."}, {"owner": {"reputation": 9786, "user_id": 485864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34b46a9a4723bdbc6e1fdcf71b08517?s=128&d=identicon&r=PG", "display_name": "vgoff", "link": "https://stackoverflow.com/users/485864/vgoff"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1435731298, "post_id": 31151999, "comment_id": 50316881, "body": "Not only what @sawa says but also not specifying which method which block is addressing.  A more complex example than necessary to ask the question that may be being asked.  It simply is not clear."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1435753692, "post_id": 31151999, "comment_id": 50331116, "body": "And what does this have to do with <a href=\"https://stackoverflow.com/questions/tagged/codeblocks\">codeblocks</a> (the Code::Blocks IDE for C++)?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1435753816, "post_id": 31151999, "comment_id": 50331208, "body": "There are two blocks in your code. Which one are you talking about specifically? Also, in your last paragraph, you ask about syntax, but in the preceding paragraph, your ask about semantics. Which is it?"}], "answers": [{"tags": [], "owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "is_accepted": false, "score": 1, "last_activity_date": 1435731022, "last_edit_date": 1435731022, "creation_date": 1435726302, "answer_id": 31152758, "question_id": 31151999, "link": "https://stackoverflow.com/questions/31151999/when-is-a-block-evaluated/31152758#31152758", "title": "When is a block evaluated?", "body": "<p>The following block is passed to <code>send</code> as an argument for the method contained in <code>rootTag</code></p>\n\n<pre><code>{\n  data.each { |e| generate_xml(e, xml) }\n}\n</code></pre>\n\n<p>When a block is passed to a method, the method controls whether/when to evaluate the block using <code>yield</code>. </p>\n"}], "owner": {"reputation": 8894, "user_id": 150050, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/a3036a782fc6c728ec1eba30e7b73b34?s=128&d=identicon&r=PG", "display_name": "aaa90210", "link": "https://stackoverflow.com/users/150050/aaa90210"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1435753717, "creation_date": 1435720786, "last_edit_date": 1435753717, "question_id": 31151999, "link": "https://stackoverflow.com/questions/31151999/when-is-a-block-evaluated", "title": "When is a block evaluated?", "body": "<p>I am trying to understand the syntax of the <code>xml.send</code> method call in the following example:</p>\n\n<pre><code>  builder = Nokogiri::XML::Builder.new(opt) do |xml|\n    xml.send(rootTag) {\n      data.each { |e| generate_xml(e, xml) }\n    }\n  end\n</code></pre>\n\n<p>The <code>xml.send</code> method call seems to be followed by a block. Is the block passed as an argument to the method? Is the block evaluated and the result passed to the method? Is it just run after the method?</p>\n\n<p>Note I am asking this as a general Ruby syntax question, not a Nokigiri specific question (that is just the example).</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 2, "creation_date": 1435716302, "post_id": 31151407, "comment_id": 50312767, "body": "I&#39;m not sure what you&#39;re trying to do... why not simply populate the existing @todd hash (or a duplicate) with the info: <code>@prod = @todd.map {|h| h.merge(call_api h[:num] ) }</code> ... assuming <code>call_api</code> returns a hush with the values in place. What is the difference you are trying to achieve?"}, {"owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1435761889, "post_id": 31151407, "comment_id": 50337517, "body": "So the issue I&#39;m having is sending the num through to call the api, and then when the results hash gets populated merging the @todd hash so that num matches on each and the correct price is merged with the correct num.. Does that make sense?"}], "answers": [{"tags": [], "owner": {"reputation": 473, "user_id": 2588887, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c060e93f000081c298d2a112fa884f8a?s=128&d=identicon&r=PG", "display_name": "Jay", "link": "https://stackoverflow.com/users/2588887/jay"}, "is_accepted": false, "score": 0, "last_activity_date": 1435720826, "creation_date": 1435720826, "answer_id": 31152007, "question_id": 31151407, "link": "https://stackoverflow.com/questions/31151407/merge-hash-with-array-of-hashes-based-on-value-in-shared-key/31152007#31152007", "title": "Merge hash with array of hashes based on value in shared key", "body": "<pre><code>@prod = []\n@num = []\n@todd = [\n  {:sellersku=&gt;\"2273500028\", :num=&gt;\"B0076E32F8\", :price=&gt;\"15.49\"},\n  {:sellersku=&gt;\"5154464774\", :num=&gt;\"B00013J6HY\", :price=&gt;\"445.94\"}\n]\n\n@todd.each do |hash|\n  serial_number = hash[:num]\n\n  # EXTERNAL CALL TO API\n  info = api_call(serial_number) #likely returns json\n  # parse into new hash called results\n\n  results = {\n    :vendor =&gt; vendor,\n    :type =&gt; type,\n    :color =&gt; @color,\n    :image =&gt; hi_image\n  }\n\n  @prod &lt;&lt; hash.merge(results)\nend\n\n@prod\n# after iteration, @prod will have all the information you are looking for.\n</code></pre>\n"}], "owner": {"reputation": 2168, "user_id": 4386626, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/f2c9512ee4dac8ccbbf45fc2cf1a8046?s=128&d=identicon&r=PG&f=1", "display_name": "ToddT", "link": "https://stackoverflow.com/users/4386626/toddt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1435720826, "creation_date": 1435715902, "question_id": 31151407, "link": "https://stackoverflow.com/questions/31151407/merge-hash-with-array-of-hashes-based-on-value-in-shared-key", "title": "Merge hash with array of hashes based on value in shared key", "body": "<p>I start with the following:</p>\n\n<pre><code>@prod = []\n@num = []\n@todd = [{:sellersku=&gt;\"2273500028\", :num=&gt;\"B0076E32F8\", :price=&gt;\"15.49\"}, \n{:sellersku=&gt;\"5154464774\", :num=&gt;\"B00013J6HY\", :price=&gt;\"445.94\"}]\n</code></pre>\n\n<p>Then create a lookup array:</p>\n\n<pre><code>@todd.each do |x|  \n  @num &lt;&lt; x[:num]\nend\n</code></pre>\n\n<p>Then using the lookup array go thru an API that loads various data into results:</p>\n\n<pre><code>@num.each do |x|\ncall_api(x) #I left out the code that populates the variables below..\nresults = {:num =&gt; x,  \n:vendor =&gt; vendor, :type =&gt; type, :color =&gt; @color, :image =&gt; hi_image\n}\nend\n</code></pre>\n\n<p>When the above finishes calling the api, I want to merge the @todd array and the results array into the @prod array of hashes. Resulting in this.</p>\n\n<pre><code>[{:sellersku=&gt;\"2273500028\", :num=&gt;\"B0076E32F8\", :price=&gt;\"15.49\",\n:vendor =&gt; \"Boss\", :type =&gt; \"Shoes\", :color =&gt; \"Blue\", :image =&gt; boss.jpg}, \n{:sellersku=&gt;\"5154464774\", :num=&gt;\"B00013J6HY\", :price=&gt;\"34.49\",\n:vendor =&gt; \"Converse\", :type =&gt; \"Shirt\", :color =&gt; \"Orange\", \n:image =&gt; cons.jpg}]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "stripe-payments"], "comments": [{"owner": {"reputation": 4150, "user_id": 1431375, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/2ac536f6b2c0c5235da73442f3577ea9?s=128&d=identicon&r=PG", "display_name": "Matthew Arkin", "link": "https://stackoverflow.com/users/1431375/matthew-arkin"}, "edited": false, "score": 0, "creation_date": 1435717479, "post_id": 31151378, "comment_id": 50313053, "body": "To create a charge, you&#39;d either pass a hash of card details as source (which is not PCI compliant in most cases), or the id of a token created with Stripe.js or Stripe Checkout. If you previously saved a token to a customer, you can pass both the customer id and the card id to the create method. You could never pass a Stripe::Card to the create charge method"}], "answers": [{"tags": [], "owner": {"reputation": 25180, "user_id": 1849664, "user_type": "moderator", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/9278dc00e1a8755dc2de02b6a908a15a?s=128&d=identicon&r=PG", "display_name": "Undo", "link": "https://stackoverflow.com/users/1849664/undo"}, "is_accepted": true, "score": 1, "last_activity_date": 1435716471, "last_edit_date": 1435716471, "creation_date": 1435716024, "answer_id": 31151422, "question_id": 31151378, "link": "https://stackoverflow.com/questions/31151378/using-a-stripecard-to-create-a-new-stripecharge/31151422#31151422", "title": "Using a Stripe::Card to create a new Stripe::Charge", "body": "<p><code>Stripe::Card</code> has a <code>to_hash</code> method, it should do what you want:</p>\n\n<pre><code>Stripe::Charge.create source: the_card_i_have.to_hash\n</code></pre>\n"}], "owner": {"reputation": 1881, "user_id": 4204030, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d3bef597eddffe2c9ab5f89a0a5c0bdd?s=128&d=identicon&r=PG&f=1", "display_name": "ThomYorkkke", "link": "https://stackoverflow.com/users/4204030/thomyorkkke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "accepted_answer_id": 31151422, "answer_count": 1, "score": 2, "last_activity_date": 1435716471, "creation_date": 1435715730, "question_id": 31151378, "link": "https://stackoverflow.com/questions/31151378/using-a-stripecard-to-create-a-new-stripecharge", "title": "Using a Stripe::Card to create a new Stripe::Charge", "body": "<p>I have a <code>Stripe::Card</code> for a customer, but I need to be able to put that into a <code>Stripe::Charge</code> since I can't call <code>Stripe::Charge.create source: the_card_i_have</code> because source needs to be a hash of the card's attributes.</p>\n\n<p>Does the <code>ruby-stripe</code> gem have some sort of built in way to convert that card to a hash? Is there an easy way to do that or do I need to make a helper method to do that manually?</p>\n"}, {"tags": ["javascript", "html", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 5067496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1c27346acc78fe9966525db83a4b079?s=128&d=identicon&r=PG&f=1", "display_name": "Evil1989", "link": "https://stackoverflow.com/users/5067496/evil1989"}, "edited": false, "score": 0, "creation_date": 1435715734, "post_id": 31151341, "comment_id": 50312609, "body": "Thanks for your answer. It&#39;s throwing an error <code>undefined method </code>each&#39; for #&lt;String:0x007fef3fb40998&gt;`  That means string is not null"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 53, "user_id": 5067496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1c27346acc78fe9966525db83a4b079?s=128&d=identicon&r=PG&f=1", "display_name": "Evil1989", "link": "https://stackoverflow.com/users/5067496/evil1989"}, "edited": false, "score": 0, "creation_date": 1435716129, "post_id": 31151341, "comment_id": 50312717, "body": "So <code>@data.matrix</code> returns a string and not an array. Looks like JSON, therefore let&#39;s parse it as JSON first. Please see my updated answer."}, {"owner": {"reputation": 53, "user_id": 5067496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1c27346acc78fe9966525db83a4b079?s=128&d=identicon&r=PG&f=1", "display_name": "Evil1989", "link": "https://stackoverflow.com/users/5067496/evil1989"}, "edited": false, "score": 0, "creation_date": 1435716695, "post_id": 31151341, "comment_id": 50312859, "body": "I tried but it&#39;s only printing the <code>arr[i][0] ..arr[i][col]</code> value. Please have a look at the screenshot.<a href=\"http://i.imgur.com/pSFWuI0.png\" rel=\"nofollow noreferrer\">i.imgur.com/pSFWuI0.png</a>  JSON representation of printing matrix section"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 53, "user_id": 5067496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1c27346acc78fe9966525db83a4b079?s=128&d=identicon&r=PG&f=1", "display_name": "Evil1989", "link": "https://stackoverflow.com/users/5067496/evil1989"}, "edited": false, "score": 0, "creation_date": 1435717317, "post_id": 31151341, "comment_id": 50313019, "body": "You did not tell in your question that each sub-array has more that two values... Updated my answer again."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 2, "last_activity_date": 1435717260, "last_edit_date": 1435717260, "creation_date": 1435715480, "answer_id": 31151341, "question_id": 31151119, "link": "https://stackoverflow.com/questions/31151119/how-to-represent-array-in-ruby-rails-view-template/31151341#31151341", "title": "How to represent array in ruby-rails view template?", "body": "<p>You could do something like:</p>\n\n<pre><code>&lt;table&gt;\n  &lt;% JSON.parse(@data.matrix).each do |tuple| %&gt;\n    &lt;tr&gt;\n      &lt;% tupel.each do |value| %&gt;\n        &lt;td&gt;&lt;%= value %&gt;&lt;/td&gt;\n      &lt;% end %&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n&lt;/table&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 186, "user_id": 3564065, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ee8dd47dce1b6e7278bde0b076a4e79?s=128&d=identicon&r=PG&f=1", "display_name": "Thirumal Sakthivel", "link": "https://stackoverflow.com/users/3564065/thirumal-sakthivel"}, "is_accepted": false, "score": 0, "last_activity_date": 1435730697, "last_edit_date": 1435730697, "creation_date": 1435729918, "answer_id": 31153462, "question_id": 31151119, "link": "https://stackoverflow.com/questions/31151119/how-to-represent-array-in-ruby-rails-view-template/31153462#31153462", "title": "How to represent array in ruby-rails view template?", "body": "<p>You could do something like for multiple array,    </p>\n\n<pre><code>&lt;table&gt;\n  &lt;% @data.matrix.flatten.each do |value| %&gt;\n    &lt;tr&gt;\n      &lt;td&gt;&lt;%= value %&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n&lt;/table&gt;\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 5067496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1c27346acc78fe9966525db83a4b079?s=128&d=identicon&r=PG&f=1", "display_name": "Evil1989", "link": "https://stackoverflow.com/users/5067496/evil1989"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 31151341, "answer_count": 2, "score": 4, "last_activity_date": 1435730697, "creation_date": 1435713780, "last_edit_date": 1435714729, "question_id": 31151119, "link": "https://stackoverflow.com/questions/31151119/how-to-represent-array-in-ruby-rails-view-template", "title": "How to represent array in ruby-rails view template?", "body": "<p>I am rendering a variable in <code>rails view</code>.</p>\n\n<pre><code>&lt;%= @data.matrix %&gt;\n</code></pre>\n\n<p>which prints multidimensional array in template like this:</p>\n\n<pre><code>[[\":23\", \":12\"],[ \":56\", \":12\"],[\":21\", \":23\"]]\n</code></pre>\n\n<p>How can I represent the above data in table format that it will actually look like a matrix in <code>view.html</code> page for better reading the values row and colum. We also have the information of <code>@data.row</code> and <code>@data.col</code> in view template.</p>\n\n<p>This is more <code>HTML</code> question but is there any way to do it with <code>rails view</code> syntax?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "link-to"], "answers": [{"tags": [], "owner": {"reputation": 1967, "user_id": 2355344, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5309fb1bc1f467ac017b7fdd89ce5154?s=128&d=identicon&r=PG", "display_name": "Collin Graves", "link": "https://stackoverflow.com/users/2355344/collin-graves"}, "is_accepted": true, "score": 0, "last_activity_date": 1435714736, "creation_date": 1435714736, "answer_id": 31151251, "question_id": 31151100, "link": "https://stackoverflow.com/questions/31151100/deleting-with-link-to-from-within-a-rails-4-view/31151251#31151251", "title": "Deleting with link_to from within a Rails 4 view", "body": "<p>Your view should look something like this. It appears your path name is incorrect: </p>\n\n<pre><code>&lt;% @bookmarks.each do |bookmark| %&gt;\n   &lt;%= link_to \"delete\", user_bookmark_path(@user, bookmark.id), method: :delete %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 1363658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf23cc19d3370f8bd5000ffdd7810a68?s=128&d=identicon&r=PG", "display_name": "Zeke MC", "link": "https://stackoverflow.com/users/1363658/zeke-mc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 178, "favorite_count": 0, "accepted_answer_id": 31151251, "answer_count": 1, "score": 1, "last_activity_date": 1435714736, "creation_date": 1435713621, "question_id": 31151100, "link": "https://stackoverflow.com/questions/31151100/deleting-with-link-to-from-within-a-rails-4-view", "title": "Deleting with link_to from within a Rails 4 view", "body": "<p>The following Rails 4 link_to is wrong, and thus I'm unable to delete and not sure why. In this project, \"bookmarks\" is a nested resource under \"users\" so rake routes gives me:</p>\n\n<pre><code>DELETE /users/:user_id/bookmarks/:id(.:format)                        bookmarks#destroy\n</code></pre>\n\n<p>View:</p>\n\n<pre><code>&lt;% @bookmarks.each do |bookmark| %&gt;\n   &lt;%= link_to \"delete\", user_bookmarks_path(@user, bookmark.id), method: :delete %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>def destroy\n    @user.bookmarks.find(params[:id]).destroy\n    redirect_to root_path\nend\n\nprivate\n\ndef bookmark_params\n    params.require(:bookmark).permit(:title, :bookmark_url)\nend\n\ndef get_user\n    @user = User.friendly.find(params[:user_id])\nend\n</code></pre>\n\n<p>The result is a link that looks like <a href=\"http://www.example.com/users/jane-doe/bookmarks.6\" rel=\"nofollow\">http://www.example.com/users/jane-doe/bookmarks.6</a> where 6 is the correct ID of the bookmark to be deleted. But I don't understand why it's not creating /bookmarks/6, which I think would then work fine with <em>destroy</em> in my controller. It feels like there's some big conceptual piece I'm just not understanding. Any tips are appreciated.</p>\n"}, {"tags": ["ruby", "oop", "recursion", "variable-assignment"], "comments": [{"owner": {"reputation": 73387, "user_id": 107277, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/781f66c42983ae7ee3123bbd620d8568?s=128&d=identicon&r=PG", "display_name": "Matt Huggins", "link": "https://stackoverflow.com/users/107277/matt-huggins"}, "edited": false, "score": 1, "creation_date": 1435710934, "post_id": 31150753, "comment_id": 50311559, "body": "What is your question?"}, {"owner": {"reputation": 3641, "user_id": 439332, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/JNgeL.jpg?s=128&g=1", "display_name": "Reed G. Law", "link": "https://stackoverflow.com/users/439332/reed-g-law"}, "reply_to_user": {"reputation": 73387, "user_id": 107277, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/781f66c42983ae7ee3123bbd620d8568?s=128&d=identicon&r=PG", "display_name": "Matt Huggins", "link": "https://stackoverflow.com/users/107277/matt-huggins"}, "edited": false, "score": 0, "creation_date": 1435711116, "post_id": 31150753, "comment_id": 50311596, "body": "Is there a way to access the parent object through the children without having to assign <code>owner</code> to all the children objects?"}, {"owner": {"reputation": 73387, "user_id": 107277, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/781f66c42983ae7ee3123bbd620d8568?s=128&d=identicon&r=PG", "display_name": "Matt Huggins", "link": "https://stackoverflow.com/users/107277/matt-huggins"}, "edited": false, "score": 0, "creation_date": 1435711246, "post_id": 31150753, "comment_id": 50311614, "body": "There has to be a reference to whatever object you want to access, otherwise you can&#39;t access it."}, {"owner": {"reputation": 3641, "user_id": 439332, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/JNgeL.jpg?s=128&g=1", "display_name": "Reed G. Law", "link": "https://stackoverflow.com/users/439332/reed-g-law"}, "reply_to_user": {"reputation": 73387, "user_id": 107277, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/781f66c42983ae7ee3123bbd620d8568?s=128&d=identicon&r=PG", "display_name": "Matt Huggins", "link": "https://stackoverflow.com/users/107277/matt-huggins"}, "edited": false, "score": 0, "creation_date": 1435711394, "post_id": 31150753, "comment_id": 50311644, "body": "True, but with the hash data structure example I could pass around that hash and reference it from within widgets in order to access attributes of the parent object. It wouldn&#39;t be instantiated as a <code>User</code> but at least the data would be there."}, {"owner": {"reputation": 3641, "user_id": 439332, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/JNgeL.jpg?s=128&g=1", "display_name": "Reed G. Law", "link": "https://stackoverflow.com/users/439332/reed-g-law"}, "reply_to_user": {"reputation": 73387, "user_id": 107277, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/781f66c42983ae7ee3123bbd620d8568?s=128&d=identicon&r=PG", "display_name": "Matt Huggins", "link": "https://stackoverflow.com/users/107277/matt-huggins"}, "edited": false, "score": 1, "creation_date": 1435712124, "post_id": 31150753, "comment_id": 50311793, "body": "Yes it makes sense but seems redundant. From a data modeling perspective you wouldn&#39;t want an infinite hash. But from an OOD perspective you might want to access a widgets owner regardless of how deeply nested the object is."}, {"owner": {"reputation": 1739, "user_id": 2863439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7c95bb944bbbe597543ae8a88987995?s=128&d=identicon&r=PG&f=1", "display_name": "limekin", "link": "https://stackoverflow.com/users/2863439/limekin"}, "edited": false, "score": 0, "creation_date": 1435712357, "post_id": 31150753, "comment_id": 50311840, "body": "Yes I get your question now."}], "answers": [{"comments": [{"owner": {"reputation": 3641, "user_id": 439332, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/JNgeL.jpg?s=128&g=1", "display_name": "Reed G. Law", "link": "https://stackoverflow.com/users/439332/reed-g-law"}, "edited": false, "score": 0, "creation_date": 1435725029, "post_id": 31150957, "comment_id": 50314686, "body": "I think you answer correctly the question as stated. But I&#39;m still left wondering if this is the best way do this from an OOD perspective. It seems a very data-centric approach. You pointed to ActiveRecord as an example, which is pattern I&#39;m trying to avoid. I&#39;m wondering what it would be like to use <a href=\"http://geekswithblogs.net/theArchitectsNapkin/archive/2013/09/08/oop-as-if-you-meant-it.aspx\" rel=\"nofollow noreferrer\">messaging</a> to achieve the same goal."}, {"owner": {"reputation": 1739, "user_id": 2863439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7c95bb944bbbe597543ae8a88987995?s=128&d=identicon&r=PG&f=1", "display_name": "limekin", "link": "https://stackoverflow.com/users/2863439/limekin"}, "edited": false, "score": 0, "creation_date": 1435726730, "post_id": 31150957, "comment_id": 50315203, "body": "Are you sure that this code really returns just  <code>#&lt;User:... @widgets=[#&lt;Widget:...&gt;]&gt;</code> for <code>widget.owner</code> ?"}], "tags": [], "owner": {"reputation": 4172, "user_id": 3088353, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/vGI0r.jpg?s=128&g=1", "display_name": "williamcodes", "link": "https://stackoverflow.com/users/3088353/williamcodes"}, "is_accepted": true, "score": 1, "last_activity_date": 1435713426, "last_edit_date": 1495541164, "creation_date": 1435712578, "answer_id": 31150957, "question_id": 31150753, "link": "https://stackoverflow.com/questions/31150753/referencing-parent-objects-from-children/31150957#31150957", "title": "Referencing parent objects from children", "body": "<p>What you're looking for is a custom writer. There is no <code>parent</code> method or equivalent on the <code>Object</code> or <code>BaseObject</code> class, because implementing that would require objects to track every other object that happened to point to it. When you want that functionality though, custom writers make it simple and easy to implement.</p>\n\n<pre><code>class Widget\n    attr_accessor :owner\nend\n\nclass User\n  attr_reader :widgets\n\n  def widgets=(widgets)\n    @widgets = widgets\n    widgets.each do |widget|\n      widget.owner = self\n    end\n  end\nend\n\nuser = User.new\nwidget = Widget.new\nuser.widgets = [widget]\nwidget.owner #=&gt; #&lt;User:... @widgets=[#&lt;Widget:...&gt;]&gt;\n</code></pre>\n\n<p>Note that this custom writer only covers regular assignment, like <code>user.widgets = [widget]</code>. If you wanted to do something like <code>user.widgets &lt;&lt; widget</code>, the new widget wouldn't be assigned an owner. If you want to be able to do that, you'll either have to <a href=\"https://stackoverflow.com/questions/4060630/add-a-callback-function-to-a-ruby-array-to-do-something-when-an-element-is-added\">monkeypatch <code>Array</code> like this</a> (not recommended), or you'll have to create a <code>WidgetCollection</code> class that likely inherits from <code>Array</code>. That's what <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html\" rel=\"nofollow noreferrer\">ActiveRecord::Associations</a> does. Speaking of which, if you happen to be using Rails, definitely look into using ActiveRecord to do all this for you. It looks like you're asking about plain old ruby so I'm giving you a vanilla ruby answer.</p>\n"}, {"tags": [], "owner": {"reputation": 1739, "user_id": 2863439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7c95bb944bbbe597543ae8a88987995?s=128&d=identicon&r=PG&f=1", "display_name": "limekin", "link": "https://stackoverflow.com/users/2863439/limekin"}, "is_accepted": false, "score": 1, "last_activity_date": 1435728334, "last_edit_date": 1435728334, "creation_date": 1435717125, "answer_id": 31151577, "question_id": 31150753, "link": "https://stackoverflow.com/questions/31150753/referencing-parent-objects-from-children/31151577#31151577", "title": "Referencing parent objects from children", "body": "<p>Thought of sharing the explanation I've come up with. It has no solid proof, but might help. </p>\n\n<p>Firstly, there isn't any problem with loop chaining objects like that. The code wouldn't work fine just like that if there was a problem with loop chains, it would either crash or show an error. So it might be handling these kind of loop references in a way, but it really makes sense if you understand that variables are just references to objects. </p>\n\n<p>I mean when you simply access a User instance <code>user</code>, it doesn't just load up everything inside it recursively. It just does nothing or maybe just takes out the reference. What really sets up the recursion is the <code>inspect</code> method, which recursively inspects all the instance variables inside the instance. But it does handle the deep inspects, with the <code>....</code>.</p>\n\n<p>So your real problem should only be with making inspects look compact. You can override that method, so that it won't recurse, and gives you a nice message. Example :</p>\n\n<pre><code>class User\n  attr_accessor :widgets\n  def initialize\n    @widgets =[]\n  end\n  def inspect\n    \"[User:objid=#{object_id};widgets=#{widgets.size}]\"\n  end\nend\n\nclass Widget\n  attr_accessor :owner\n\n  def inspect\n    \"#[Widget:objid=#{object_id}]\"\n  end\nend\n</code></pre>\n\n<p>The interface can remain the same.</p>\n\n<pre><code>user = User.new\nwidget = Widget.new\nwidget.owner = user\nwidget2 = Widget.new\nwidget2.owner = user\nuser.widgets = [widget, widget2]\nuser.widgets.first.owner.widgets.first.owner\n# =&gt; #[User:objid=-590412418;widgets=2]\n</code></pre>\n"}], "owner": {"reputation": 3641, "user_id": 439332, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/JNgeL.jpg?s=128&g=1", "display_name": "Reed G. Law", "link": "https://stackoverflow.com/users/439332/reed-g-law"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 424, "favorite_count": 0, "accepted_answer_id": 31150957, "answer_count": 2, "score": 2, "last_activity_date": 1435728334, "creation_date": 1435710833, "last_edit_date": 1435715987, "question_id": 31150753, "link": "https://stackoverflow.com/questions/31150753/referencing-parent-objects-from-children", "title": "Referencing parent objects from children", "body": "<p>Say you have a <code>User</code> class:</p>\n\n<pre><code>class User\n  attr_accessor :widgets\nend\n</code></pre>\n\n<p>and a <code>Widget</code>:</p>\n\n<pre><code>class Widget\n  attr_accessor :owner\nend\n</code></pre>\n\n<p>and you assign some widgets to a user:</p>\n\n<pre><code>user = User.new\nwidget = Widget.new\nwidget.owner = user\nwidget2 = Widget.new\nwidget2.owner = user\nuser.widgets = [widget, widget2]\n</code></pre>\n\n<p>Now you have a recursion of <code>user</code> \u2192 <code>widgets</code> \u2192 <code>owner</code>. <code>user.inspect</code> shows the same <code>user</code> reference once for every widget, cluttering the output:</p>\n\n<pre><code>user.widgets.first.owner.widgets.first.owner\n=&gt; #&lt;User:0x00000001cac820 @widgets=[#&lt;Widget:0x00000001ca45f8 @owner=#&lt;User:0x00000001cac820 ...&gt;&gt;, #&lt;Widget:0x00000001c87a20 @owner=#&lt;User:0x00000001cac820 ...&gt;&gt;]&gt;                                      \n</code></pre>\n\n<p>If we were to reduce this data structure to a hash we'd have:</p>\n\n<pre><code>{ user:\n    { widgets: [ { widget: ... },\n                 { widget: ... } ]\n    }\n}\n</code></pre>\n\n<p>We could pass this around instead of assigning <code>widget.owner</code> and it would be easy enough to reference the parent <code>user</code>.</p>\n\n<p>I wonder if there's a way to access the parent object through the child without having to assign <code>owner</code> to all child objects, an interface that could work like this:</p>\n\n<pre><code>user = User.new\nwidget = Widget.new\nuser.widgets = [widget]\nwidget.parent\n# =&gt; #&lt;User:... @widgets=[#&lt;Widget:...&gt;]&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "view", "controller"], "answers": [{"comments": [{"owner": {"reputation": 1218, "user_id": 4592910, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d1558928d220b4f7302dca2fe2c38ce7?s=128&d=identicon&r=PG&f=1", "display_name": "Kathan", "link": "https://stackoverflow.com/users/4592910/kathan"}, "edited": false, "score": 0, "creation_date": 1435726367, "post_id": 31150823, "comment_id": 50315107, "body": "I appreciate your help. I set up the counter cache, but am getting this error. <code>SQLite3::SQLException: no such column: subarticles_count: SELECT &quot;articles&quot;.* FROM &quot;articles&quot; WHERE (subarticles_count &gt; 0)</code>"}, {"owner": {"reputation": 2060, "user_id": 1965817, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/1t9U1.jpg?s=128&g=1", "display_name": "lkartono", "link": "https://stackoverflow.com/users/1965817/lkartono"}, "reply_to_user": {"reputation": 1218, "user_id": 4592910, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d1558928d220b4f7302dca2fe2c38ce7?s=128&d=identicon&r=PG&f=1", "display_name": "Kathan", "link": "https://stackoverflow.com/users/4592910/kathan"}, "edited": false, "score": 1, "creation_date": 1435739959, "post_id": 31150823, "comment_id": 50321737, "body": "Did you create a migration in order to have the field <code>subarticles_count </code> ?"}, {"owner": {"reputation": 1218, "user_id": 4592910, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d1558928d220b4f7302dca2fe2c38ce7?s=128&d=identicon&r=PG&f=1", "display_name": "Kathan", "link": "https://stackoverflow.com/users/4592910/kathan"}, "edited": false, "score": 0, "creation_date": 1435795011, "post_id": 31150823, "comment_id": 50354708, "body": "I am getting close. What would i use in the view? I get this error <code>No route matches {:action=&gt;&quot;show&quot;, :controller=&gt;&quot;articles&quot;, :id=&gt;nil} missing required keys: [:id]</code> when I try using my current link_to"}, {"owner": {"reputation": 2060, "user_id": 1965817, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/1t9U1.jpg?s=128&g=1", "display_name": "lkartono", "link": "https://stackoverflow.com/users/1965817/lkartono"}, "reply_to_user": {"reputation": 1218, "user_id": 4592910, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d1558928d220b4f7302dca2fe2c38ce7?s=128&d=identicon&r=PG&f=1", "display_name": "Kathan", "link": "https://stackoverflow.com/users/4592910/kathan"}, "edited": false, "score": 0, "creation_date": 1435877643, "post_id": 31150823, "comment_id": 50396288, "body": "mmm...that&#39;s weird. Is <code>@randitem</code> defined and has an id? Also, please update your post with some new code snippets so maybe I can see if there is any bug"}, {"owner": {"reputation": 1218, "user_id": 4592910, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d1558928d220b4f7302dca2fe2c38ce7?s=128&d=identicon&r=PG&f=1", "display_name": "Kathan", "link": "https://stackoverflow.com/users/4592910/kathan"}, "edited": false, "score": 0, "creation_date": 1435901674, "post_id": 31150823, "comment_id": 50401922, "body": "Finally got it working. Had to default the count to zero and then update it with the correct count in the migration. Thank you again."}], "tags": [], "owner": {"reputation": 2060, "user_id": 1965817, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/1t9U1.jpg?s=128&g=1", "display_name": "lkartono", "link": "https://stackoverflow.com/users/1965817/lkartono"}, "is_accepted": true, "score": 1, "last_activity_date": 1435711310, "creation_date": 1435711310, "answer_id": 31150823, "question_id": 31150503, "link": "https://stackoverflow.com/questions/31150503/link-to-random-page-where-content-present/31150823#31150823", "title": "Link to random page where content present", "body": "<p>Did you setup a <code>counter_cache</code>? If not, I would recommend you to do so as it will allow you to do what you want in a more elegant way (with less code and less database query as well) :  <a href=\"http://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow\">http://guides.rubyonrails.org/association_basics.html</a></p>\n\n<pre><code>class Article &lt; ActiveRecord::Base\n  # The article table needs then to have a `subarticles_count` field\n  has_many :subarticles\nend\nclass Subarticle &lt; ActiveRecord::Base\n  belongs_to :article, counter_cache: true\nend\n</code></pre>\n\n<p>Then in your controller, you can query the <code>articles</code> that have <code>subarticles</code> : </p>\n\n<pre><code>class ArticlesController &lt; ApplicationController\n  def index\n    @items = Article.includes(:subarticles).where('subarticles_count &gt; 0')\n    @randitem = @items[rand(@items.count)]\n  end\nend\n</code></pre>\n\n<p>By the way, it's cleaner to use the Ruby <code>sample</code> method to get a random item from a collection : </p>\n\n<pre><code>class ArticlesController &lt; ApplicationController\n  def index\n    @items = Article.includes(:subarticles).where('subarticles_count &gt; 0')\n    @randitem = @items.sample\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1218, "user_id": 4592910, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d1558928d220b4f7302dca2fe2c38ce7?s=128&d=identicon&r=PG&f=1", "display_name": "Kathan", "link": "https://stackoverflow.com/users/4592910/kathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 31150823, "answer_count": 1, "score": 1, "last_activity_date": 1435711310, "creation_date": 1435708910, "last_edit_date": 1435710340, "question_id": 31150503, "link": "https://stackoverflow.com/questions/31150503/link-to-random-page-where-content-present", "title": "Link to random page where content present", "body": "<p>I am using Rails 4. </p>\n\n<p>I have two resources: <code>articles</code> and <code>subarticles</code>. <code>subarticles</code> are nested into <code>articles</code>. </p>\n\n<p>I currently have a random button which takes the user to a random article. However, I would like it to only take them to an article page in which the <code>subarticle</code> is present. </p>\n\n<p>What is the best way to go about this? I'm having trouble finding documentation. </p>\n\n<p>Here is my random method in the articles_controller:</p>\n\n<pre><code>@items = Article.all\n@randitem = @items[rand(@items.count)]\n</code></pre>\n\n<p>and in the view:</p>\n\n<pre><code>&lt;%= link_to \"Random Page\", article_path(@randitem) %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "heroku"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1435710467, "post_id": 31150291, "comment_id": 50311457, "body": "You didn&#39;t ask a question. Is &quot;Unable to connect to Heroku API, please check internet connectivity and try again.&quot; significant? Perhaps your DNS or their host connectivity is down?"}], "answers": [{"tags": [], "owner": {"reputation": 27694, "user_id": 194175, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/56badf521701d4f9b3a394d3ef6e90c4?s=128&d=identicon&r=PG", "display_name": "rdegges", "link": "https://stackoverflow.com/users/194175/rdegges"}, "is_accepted": true, "score": -1, "last_activity_date": 1435784853, "creation_date": 1435784853, "answer_id": 31171694, "question_id": 31150291, "link": "https://stackoverflow.com/questions/31150291/unable-to-connect-to-heroku-api/31171694#31171694", "title": "Unable to connect to Heroku API", "body": "<p>This is happening because either:</p>\n\n<ul>\n<li>Heroku is experiencing an outage (not likely),</li>\n<li>Your internet connection / DNS connection are no working (pretty likely).</li>\n</ul>\n\n<p>The solution is just wait a bit and try again, hope this helps.</p>\n"}], "owner": {"reputation": 44, "user_id": 4259349, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003757611576/picture?type=large", "display_name": "Serhan Yav&#231;in", "link": "https://stackoverflow.com/users/4259349/serhan-yav%c3%a7in"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 116, "favorite_count": 0, "accepted_answer_id": 31171694, "answer_count": 1, "score": 0, "last_activity_date": 1435784853, "creation_date": 1435707440, "last_edit_date": 1435710713, "question_id": 31150291, "link": "https://stackoverflow.com/questions/31150291/unable-to-connect-to-heroku-api", "title": "Unable to connect to Heroku API", "body": "<pre><code>$ heroku git:remote -a quiet-scrubland-9526\n\nInstalling Heroku Toolbelt v4... !    Unable to connect to Heroku API, please check internet connectivity and try again.\n$ heroku status\n\n/usr/local/heroku/lib/heroku/helpers.rb:114: warning: Insecure world writable dir /home/corwin/.rvm in PATH, mode 040777\n\nInstalling Heroku Toolbelt v4... !    Unable to connect to Heroku API, please check internet connectivity and try again.\nEnter your Heroku credentials.\nEmail: email@domain.com\nPassword (typing will be hidden): \nAuthentication successful.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "associations", "rails-admin"], "answers": [{"tags": [], "owner": {"reputation": 93, "user_id": 4010857, "user_type": "registered", "profile_image": "https://graph.facebook.com/601641152/picture?type=large", "display_name": "Erik Froese", "link": "https://stackoverflow.com/users/4010857/erik-froese"}, "is_accepted": false, "score": 0, "last_activity_date": 1436409752, "creation_date": 1436409752, "answer_id": 31307215, "question_id": 31150036, "link": "https://stackoverflow.com/questions/31150036/rails-admin-gem-filter-has-many-through-association/31307215#31307215", "title": "Rails_admin gem filter has_many through association", "body": "<p>I'm currently trying to work through a similar problem.</p>\n\n<p>Adding the following to your rails admin config should allow you to add a post_flag filter: </p>\n\n<pre><code>field :post_flags do\n  searchable :name\nend\n</code></pre>\n\n<p>However, you will get an SQL error when when you try to use the search filter.</p>\n\n<p>We may have to hack RailsAdmin's MainController. Checkout this post: <a href=\"http://blog.endpoint.com/2013/07/hasmany-filter-in-railsadmin.html\" rel=\"nofollow\">http://blog.endpoint.com/2013/07/hasmany-filter-in-railsadmin.html</a></p>\n"}], "owner": {"reputation": 411, "user_id": 266435, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/f011542315ff0197385d715929319044?s=128&d=identicon&r=PG", "display_name": "ace973", "link": "https://stackoverflow.com/users/266435/ace973"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 741, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1436409752, "creation_date": 1435705725, "question_id": 31150036, "link": "https://stackoverflow.com/questions/31150036/rails-admin-gem-filter-has-many-through-association", "title": "Rails_admin gem filter has_many through association", "body": "<p>I'd like to be able to use the \"Add Filter\" dropdown so admins can search for posts that have been flagged a particular name.</p>\n\n<p>My Post model</p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n    belongs_to :user\n    has_many :post_flags\n    has_many :flags, through: :post_flags\n</code></pre>\n\n<p><strong>config/initializers/rails_admin.rb</strong></p>\n\n<pre><code>config.model 'Post' do\n    exclude_fields :rank, :embedded_url, :attached_picture, :updated_at\n\n    object_label do\n        \"#{bindings[:post].user.name}\"\n      end\n\n    list do\n      field :text_content\n      field :created_at\n      field :user_id\n      field :likes_number\n      field :post_flags \n    end\n end\n</code></pre>\n\n<p>I've tried adding \"searchable\" to the field :post_flags to no avail. Any help would be much appreciated. </p>\n\n<p><img src=\"https://i.stack.imgur.com/P59SC.png\" alt=\"screenshot\"></p>\n"}, {"tags": ["html", "ruby", "erb"], "comments": [{"owner": {"reputation": 454, "user_id": 4420382, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100007097701606/picture?type=large", "display_name": "Martijn Kerckhaert", "link": "https://stackoverflow.com/users/4420382/martijn-kerckhaert"}, "edited": false, "score": 0, "creation_date": 1435707109, "post_id": 31149942, "comment_id": 50310544, "body": "The data i&#39;m inserting is just a name and description. Currently it looks like this but its all on one row and overlapping, I need it to create a new row each 4 elements. <a href=\"http://gyazo.com/142768d56e3e6ac44c38acec6716057c\" rel=\"nofollow noreferrer\">gyazo.com/142768d56e3e6ac44c38acec6716057c</a> Mouseover makes it slide open and show the Import branch button."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1435708910, "post_id": 31149942, "comment_id": 50311044, "body": "A couple of minor comments: you are using instance variables in your view when you don&#39;t have to (or shouldn&#39;t). That is, <code>@div</code> and <code>@end</code> in particular. Just use local variable names for those, unless you need to make them persistent over the existence of the class instance. And you&#39;re missing an <code>=</code>: <code>&lt;% @end.html_safe %&gt;</code> should be <code>&lt;%= @end.html_safe %&gt;</code>."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1435709206, "post_id": 31149942, "comment_id": 50311138, "body": "I see some additional issues. You have a dangling <code>&lt;h2&gt;</code> (no closing <code>&lt;&#47;h2&gt;</code> in your code sample). It also looks like the first time you use <code>&lt;%= @div.html_safe %&gt;</code> it&#39;s going to close off the <code>&lt;div</code> that comes before your <code>each_with_index_do</code> loop, so that doesn&#39;t seem right."}, {"owner": {"reputation": 165, "user_id": 2924057, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/48ed94fe707689ff64dd6e47daef6bcf?s=128&d=identicon&r=PG&f=1", "display_name": "m. sherman", "link": "https://stackoverflow.com/users/2924057/m-sherman"}, "edited": false, "score": 1, "creation_date": 1435711854, "post_id": 31149942, "comment_id": 50311726, "body": "Also missing an closing tag for your div with the class &quot;row&quot;."}], "owner": {"reputation": 454, "user_id": 4420382, "user_type": "registered", "accept_rate": 78, "profile_image": "https://graph.facebook.com/100007097701606/picture?type=large", "display_name": "Martijn Kerckhaert", "link": "https://stackoverflow.com/users/4420382/martijn-kerckhaert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 174, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1435711217, "creation_date": 1435705254, "last_edit_date": 1435711217, "question_id": 31149942, "link": "https://stackoverflow.com/questions/31149942/insert-html-with-embedded-ruby", "title": "Insert HTML with embedded Ruby", "body": "<p>Is there a way that I can insert HTML tags with embedded Ruby?</p>\n\n<p>I'm trying to loop over items in my database and need to put them in a bootstrap grid.</p>\n\n<pre><code>&lt;% @div = \"&lt;/div&gt; &lt;div class='row'&gt; &lt;div class='col-md-3'&gt;\" %&gt;\n&lt;% @end = \"&lt;/div&gt;\" %&gt;\n\n\n\n  &lt;div class=\"row\"&gt;\n    &lt;% @branches.each_with_index do |b, index| %&gt;\n      &lt;div class=\"col-md-3\"&gt;\n        &lt;div class=\"cardje transition\"&gt;\n          &lt;h2 class=\"transition\"&gt;&lt;%= b.description %&gt;&lt;/p&gt;\n\n          &lt;div class=\"cta-container transition\"&gt;&lt;a href=\"#\" class=\"cta\"&gt;Import branch&lt;/a&gt;&lt;/div&gt;\n          &lt;div class=\"cardje_circle transition\"&gt;&lt;/div&gt;\n\n      &lt;/div&gt;\n    &lt;/div&gt;\n\n    &lt;% if index+1%4 == 0 %&gt;\n        &lt;%= @div.html_safe %&gt;\n    &lt;% end %&gt;\n    &lt;% if index+1 == @branches.count %&gt;\n        &lt;% @end.html_safe %&gt;\n    &lt;% end %&gt;\n &lt;% end %&gt;\n</code></pre>\n\n<p>There must be a simpler way but I need this page to be done by tomorrow morning and I've been working way too long.</p>\n\n<p>When I check the source code it's running only the loop and never implementing anything (so everything is on one row and overlapping).</p>\n"}, {"tags": ["ruby", "premailer"], "comments": [{"owner": {"reputation": 2426, "user_id": 82906, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ffe64eaead3a365bac8afa0272177526?s=128&d=identicon&r=PG", "display_name": "Sneal", "link": "https://stackoverflow.com/users/82906/sneal"}, "edited": false, "score": 0, "creation_date": 1435730734, "post_id": 31149879, "comment_id": 50316615, "body": "Running this directly without going through a cgi program I can&#39;t reproduce this, both examples have the same output. Maybe try the <a href=\"https://github.com/premailer/premailer/blob/master/lib/premailer/executor.rb\" rel=\"nofollow noreferrer\">premailer binary</a>?"}, {"owner": {"reputation": 11, "user_id": 4438584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8468dccc07cd6205956b0f0cf0306e3b?s=128&d=identicon&r=PG&f=1", "display_name": "Special Monkey", "link": "https://stackoverflow.com/users/4438584/special-monkey"}, "reply_to_user": {"reputation": 2426, "user_id": 82906, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/ffe64eaead3a365bac8afa0272177526?s=128&d=identicon&r=PG", "display_name": "Sneal", "link": "https://stackoverflow.com/users/82906/sneal"}, "edited": false, "score": 0, "creation_date": 1435770901, "post_id": 31149879, "comment_id": 50343217, "body": "Thanks, It looks like the CGI program, which includes a TinyMCE editor - is responsible for stripping the ignore tags (and their contents) out even before the premailer is called."}], "owner": {"reputation": 11, "user_id": 4438584, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8468dccc07cd6205956b0f0cf0306e3b?s=128&d=identicon&r=PG&f=1", "display_name": "Special Monkey", "link": "https://stackoverflow.com/users/4438584/special-monkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 231, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1435715896, "creation_date": 1435704794, "last_edit_date": 1435715896, "question_id": 31149879, "link": "https://stackoverflow.com/questions/31149879/ruby-premailer-gem-ignore-feature-doesnt-always-work", "title": "Ruby Premailer Gem: Ignore Feature Doesn&#39;t Always Work", "body": "<p>I'm using the <a href=\"https://github.com/premailer/premailer\" rel=\"nofollow\">premailer 1.8.4</a> gem and have a Perl / CGI script that calls premailer.rb.</p>\n\n<p>Premailer ignores styles wrapped in the data-premailer=\"ignore\" style tag - </p>\n\n<p>For example: test.html</p>\n\n<pre><code>&lt;style data-premailer=\"ignore\"&gt;\n/* this is a test */\n&lt;/style&gt;\n</code></pre>\n\n<p>For testing, I have the following in premailer-test.rb.  It is run against test.html. </p>\n\n<pre><code>html = 'test.html'\npremailer = Premailer.new(html, :warn_level =&gt; Premailer::Warnings::SAFE, :remove_comments =&gt; true)\nputs premailer.to_inline_css\n</code></pre>\n\n<p>On execution, it streams the processed test.html file to my screen with the <code>data-premailer=\"ignore\"</code> styles intact.</p>\n\n<p>However, when I call premailer.rb,</p>\n\n<pre><code>input_url = ARGV[0]\n\npremailer = Premailer.new(input_url, :warn_level =&gt; Premailer::Warnings::NONE)\n\n# Write the HTML output\nfout = File.open(input_url, \"w\")\nfout.puts premailer.to_inline_css\nfout.close\n\n# Output any CSS warnings\npremailer.warnings.each do |w|\n  puts \"#{w[:message]} (#{w[:level]}) may not render properly in #{w[:clients]}\"\nend\n</code></pre>\n\n<p>from within the cgi program (e.g. ruby premailer.rb msgid.html), the file saved has the <code>data-premailer=\"ignore\"</code> styles stripped out.</p>\n\n<p>I would like the <code>data-premailer=\"ignore\"</code> styles to remain. Thanks for any help!</p>\n"}]